var Laya=window.Laya=function(w$$,w$v){var w$_={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(w$v,w$l){return 1==arguments.length?w$_.__presubstr.call(this,w$v):w$_.__presubstr.call(this,w$v,0<w$l?w$l:this.length+w$l)},__init:function(w$v){w$v.forEach(function(w$v){w$v.__init$&&w$v.__init$()})},__isClass:function(w$v){return w$v&&(w$v.__isclass||w$v==Object||w$v==String||w$v==Array)},__newvec:function(w$v,w$l){var w$L=[];w$L.length=w$v;for(var w$A=0;w$A<w$v;w$A++)w$L[w$A]=w$l;return w$L},__extend:function(w$v,w$l){for(var w$L in w$l)if(w$l.hasOwnProperty(w$L)){var w$A=Object.getOwnPropertyDescriptor(w$l,w$L),w$x=w$A.get,w$m=w$A.set;w$x||w$m?w$x&&w$m?Object.defineProperty(w$v,w$L,w$A):(w$x&&Object.defineProperty(w$v,w$L,w$x),w$m&&Object.defineProperty(w$v,w$L,w$m)):w$v[w$L]=w$l[w$L]}function w$Z(){w$_.un(this,"constructor",w$v)}w$Z.prototype=w$l.prototype,w$v.prototype=new w$Z,w$_.un(w$v.prototype,"__imps",w$_.__copy({},w$l.prototype.__imps))},__copy:function(w$v,w$l){if(!w$l)return null;for(var w$L in w$v=w$v||{},w$l)w$v[w$L]=w$l[w$L];return w$v},__package:function(w$v,w$l){if(!w$_.__packages[w$v]){w$_.__packages[w$v]=!0;var w$L=w$$,w$A=w$v.split(".");if(1<w$A.length)for(var w$x=0,w$m=w$A.length-1;w$x<w$m;w$x++){var w$Z=w$L[w$A[w$x]];w$L=w$Z||(w$L[w$A[w$x]]={})}w$L[w$A[w$A.length-1]]||(w$L[w$A[w$A.length-1]]=w$l||{})}},__hasOwnProperty:function(w$v,w$l){return w$l=w$l||this,Object.hasOwnProperty.call(w$l,w$v)||function w$v(w$l,w$L){if(Object.hasOwnProperty.call(w$L.prototype,w$l))return!0;var w$A=w$L.prototype.__super;return null==w$A?null:w$v(w$l,w$A)}(w$v,w$l.__class)},__typeof:function(w$v,w$l){if(!w$v||!w$l)return!1;if(w$l===String)return"string"==typeof w$v;if(w$l===Number)return"number"==typeof w$v;if(w$l.__interface__)w$l=w$l.__interface__;else if("string"!=typeof w$l)return w$v instanceof w$l;return w$v.__imps&&w$v.__imps[w$l]||w$v.__class==w$l},__as:function(w$v,w$l){return this.__typeof(w$v,w$l)?w$v:null},__int:function(w$v){return w$v?parseInt(w$v):0},interface:function(w$v,w$l){w$_.__package(w$v,{});var w$L=w$_.__internals,w$A=w$L[w$v]=w$L[w$v]||{self:w$v};if(w$l){var w$x=w$l.split(",");w$A.extend=[];for(var w$m=0;w$m<w$x.length;w$m++){var w$Z=w$x[w$m];w$L[w$Z]=w$L[w$Z]||{self:w$Z},w$A.extend.push(w$L[w$Z])}}var w$O=w$$,w$e=w$v.split(".");for(w$m=0;w$m<w$e.length-1;w$m++)w$O=w$O[w$e[w$m]];w$O[w$e[w$e.length-1]]={__interface__:w$v}},class:function(w$v,w$l,w$L,w$A){if(w$L&&w$_.__extend(w$v,w$L),w$l)if(w$_.__package(w$l,w$v),w$_.__classmap[w$l]=w$v,0<w$l.indexOf(".")){if(0==w$l.indexOf("laya.")){var w$x=w$l.split(".");w$A=w$A||w$x[w$x.length-1],w$_[w$A]&&console.log("Warning!,this class["+w$A+"] already exist:",w$_[w$A]),w$_[w$A]=w$v}}else"Main"==w$l?w$$.Main=w$v:"MainWX"==w$l?w$$.MainWX=w$v:(w$_[w$l]&&console.log("Error!,this class["+w$l+"] already exist:",w$_[w$l]),w$_[w$l]=w$v);var w$m=w$_.un,w$Z=w$v.prototype;w$m(w$Z,"hasOwnProperty",w$_.__hasOwnProperty),w$m(w$Z,"__class",w$v),w$m(w$Z,"__super",w$L),w$m(w$Z,"__className",w$l),w$m(w$v,"__super",w$L),w$m(w$v,"__className",w$l),w$m(w$v,"__isclass",!0),w$m(w$v,"super",function(w$v){this.__super.call(w$v)})},imps:function(w$v,w$l){if(!w$l)return null;var w$x=w$v.__imps||w$_.un(w$v,"__imps",{});function w$m(w$v){var w$l,w$L;if((w$l=w$_.__internals[w$v])&&(w$x[w$v]=!0,w$L=w$l.extend))for(var w$A=0;w$A<w$L.length;w$A++)w$m(w$L[w$A].self)}for(var w$L in w$l)w$m(w$L)},superSet:function(w$v,w$l,w$L,w$A){var w$x=w$v.prototype["_$set_"+w$L];w$x&&w$x.call(w$l,w$A)},superGet:function(w$v,w$l,w$L){var w$A=w$v.prototype["_$get_"+w$L];return w$A?w$A.call(w$l):null},getset:function(w$v,w$l,w$L,w$A,w$x){w$v?(w$A&&(w$l["_$GET_"+w$L]=w$A),w$x&&(w$l["_$SET_"+w$L]=w$x)):(w$A&&w$_.un(w$l,"_$get_"+w$L,w$A),w$x&&w$_.un(w$l,"_$set_"+w$L,w$x)),w$A&&w$x?Object.defineProperty(w$l,w$L,{get:w$A,set:w$x,enumerable:!1,configurable:!0}):(w$A&&Object.defineProperty(w$l,w$L,{get:w$A,enumerable:!1,configurable:!0}),w$x&&Object.defineProperty(w$l,w$L,{set:w$x,enumerable:!1,configurable:!0}))},static:function(w$L,w$A){for(var w$x=0,w$v=w$A.length;w$x<w$v;w$x+=2)if("length"==w$A[w$x])w$L.length=w$A[w$x+1].call(w$L);else{function w$l(){var w$l=w$A[w$x],w$v=w$A[w$x+1];Object.defineProperty(w$L,w$l,{get:function(){return delete this[w$l],this[w$l]=w$v.call(this)},set:function(w$v){delete this[w$l],this[w$l]=w$v},enumerable:!0,configurable:!0})}w$l()}},un:function(w$v,w$l,w$L){return w$L||(w$L=w$v[w$l]),w$_.__propun.value=w$L,Object.defineProperty(w$v,w$l,w$_.__propun),w$L},uns:function(w$l,w$v){w$v.forEach(function(w$v){w$_.un(w$l,w$v)})}};return w$$.console=w$$.console||{log:function(){}},w$$.trace=w$$.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),w$_}(window,document);!function(w$v,w$l,w$L){w$L.un,w$L.uns,w$L.static,w$L.class,w$L.getset,w$L.__newvec}(window,document,Laya),function(w$Z,w$l,w$H){w$H.un,w$H.uns;var w$e=w$H.static,w$_=w$H.class,w$G=w$H.getset;w$H.__newvec;w$H.interface("laya.runtime.IMarket"),w$H.interface("laya.filters.IFilter"),w$H.interface("laya.display.ILayout"),w$H.interface("laya.resource.IDispose"),w$H.interface("laya.runtime.IPlatform"),w$H.interface("laya.resource.IDestroy"),w$H.interface("laya.runtime.IConchNode"),w$H.interface("laya.filters.IFilterAction"),w$H.interface("laya.runtime.ICPlatformClass"),w$H.interface("laya.resource.ICreateResource"),w$H.interface("laya.runtime.IConchRenderObject"),w$H.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var w$Q=function(){function w$m(){}return w$_(w$m,"laya.utils.RunDriver"),w$m.FILTER_ACTIONS=[],w$m.pixelRatio=-1,w$m._charSizeTestDiv=null,w$m.now=function(){return Date.now()},w$m.getWindow=function(){return w$Z},w$m.getPixelRatio=function(){if(w$m.pixelRatio<0){var w$v=w$N.context,w$l=w$v.backingStorePixelRatio||w$v.webkitBackingStorePixelRatio||w$v.mozBackingStorePixelRatio||w$v.msBackingStorePixelRatio||w$v.oBackingStorePixelRatio||w$v.backingStorePixelRatio||1;(w$m.pixelRatio=(w$N.window.devicePixelRatio||1)/w$l)<1&&(w$m.pixelRatio=1)}return w$m.pixelRatio},w$m.getIncludeStr=function(w$v){return null},w$m.createShaderCondition=function(w$v){var w$l="(function() {return "+w$v+";})";return w$H._runScript(w$l)},w$m.fontMap=[],w$m.measureText=function(w$v,w$l){var w$L=w$m.hanzi.test(w$v);if(w$L&&w$m.fontMap[w$l])return w$m.fontMap[w$l];var w$A=w$N.context;w$A.font=w$l;var w$x=w$A.measureText(w$v);return w$L&&(w$m.fontMap[w$l]=w$x),w$x},w$m.getWebGLContext=function(w$v){},w$m.beginFlush=function(){},w$m.endFinish=function(){},w$m.addToAtlas=null,w$m.flashFlushImage=function(w$v){},w$m.drawToCanvas=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z=w$Bv.create("2D"),w$O=new w$a(w$L,w$A,w$Z);return w$q.renders[w$l]._fun(w$v,w$O,w$x,w$m),w$Z},w$m.createParticleTemplate2D=null,w$m.createGLTextur=null,w$m.createWebGLContext2D=null,w$m.changeWebGLSize=function(w$v,w$l){},w$m.createRenderSprite=function(w$v,w$l){return new w$q(w$v,w$l)},w$m.createFilterAction=function(w$v){return new w$B},w$m.createGraphics=function(){return new w$K},w$m.clear=function(w$v){w$t._context.ctx.clear()},w$m.cancelLoadByUrl=function(w$v){},w$m.clearAtlas=function(w$v){},w$m.isAtlas=function(w$v){return!1},w$m.addTextureToAtlas=function(w$v){},w$m.getTexturePixels=function(w$v,w$l,w$L,w$A,w$x){return null},w$m.skinAniSprite=function(){return null},w$m.update3DLoop=function(){},w$e(w$m,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),w$m}(),w$A=(w$G(1,w$H,"alertGlobalError",null,function(w$v){var w$m=0;w$N.window.onerror=w$v?function(w$v,w$l,w$L,w$A,w$x){w$m++<5&&w$x&&alert(w$x.stack||w$x)}:null}),w$H.init=function(w$v,w$l,w$L){for(var w$A=[],w$x=2,w$m=arguments.length;w$x<w$m;w$x++)w$A.push(arguments[w$x]);if(!w$H._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=w$H._arrayBufferSlice),w$H._isinit=!0,w$N.__init__(),w$u.__init__(),w$K.__init__(),w$H.timer=new w$E,w$H.scaleTimer=new w$E,w$H.loader=new w$ev,w$U.__init__(),w$x=0;for(var w$Z=w$A.length;w$x<w$Z;w$x++)w$A[w$x].enable&&w$A[w$x].enable();return w$r.__init__(),w$O.__init__(),w$R.__init__(),w$j.beginCheck(),w$H._currentStage=w$H.stage=new w$Cv,w$H.stage.conchModel&&w$H.stage.conchModel.setRootNode(),w$H._getUrlPath(),w$H.render=new w$t(0,0),w$H.stage.size(w$v,w$l),w$q.__init__(),w$o.__init__(),w$c.instance.__init__(w$H.stage,w$t.canvas),w$fv.__init__(),w$k.autoStopMusic=!0,w$h.__init__(),w$t.canvas}},w$H._getUrlPath=function(){var w$v=w$N.window.location,w$l=w$v.pathname;w$l=w$l&&":"==w$l.charAt(2)?w$l.substring(1):w$l,w$I.rootPath=w$I.basePath=w$I.getPath("file:"==w$v.protocol?w$l:w$v.protocol+"//"+w$v.host+w$v.pathname)},w$H._arrayBufferSlice=function(w$v,w$l){var w$L=new Uint8Array(this,w$v,w$l-w$v),w$A=new Uint8Array(w$L.length);return w$A.set(w$L),w$A.buffer},w$H._runScript=function(w$v){return w$N.window[w$H._evcode](w$v)},w$H.stage=null,w$H.timer=null,w$H.scaleTimer=null,w$H.loader=null,w$H.version="1.8.6",w$H.render=null,w$H._currentStage=null,w$H._isinit=!1,w$H.isDebug=!1,w$H.MiniAdpter={init:function(){w$Z.navigator&&w$Z.navigator.userAgent&&-1<w$Z.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},w$e(w$H,["conchMarket",function(){return this.conchMarket=w$Z.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=w$Z.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function w$v(){}return w$_(w$v,"Config"),w$v.WebGLTextCacheCount=500,w$v.atlasEnable=!1,w$v.showCanvasMark=!1,w$v.animationInterval=50,w$v.isAntialias=!1,w$v.isAlpha=!1,w$v.premultipliedAlpha=!0,w$v.isStencil=!0,w$v.preserveDrawingBuffer=!1,w$v}()),w$$=function(){function w$$(){this._events=null}w$_(w$$,"laya.events.EventDispatcher");var w$v=w$$.prototype;return w$v.hasListener=function(w$v){return!!(this._events&&this._events[w$v])},w$v.event=function(w$v,w$l){if(!this._events||!this._events[w$v])return!1;var w$L=this._events[w$v];if(w$L.lock)w$L.queue||(w$L.queue=[]),w$L.queue.push(w$l);else{var w$A;for(w$L.lock=!0,w$L.cursor=w$L.head;w$L.cursor;)w$A=w$L.cursor,w$L.cursor=w$A.next,w$A.once&&w$$.delNode(w$L,w$A),null!=w$l?w$A.args?w$A.method.apply(w$A.caller,w$A.args.concat(w$l)):w$l instanceof Array?w$A.method.apply(w$A.caller,w$l):w$A.method.call(w$A.caller,w$l):w$A.method.apply(w$A.caller,w$A.args),w$A.once&&w$$.recoverHandler(w$A);w$L.lock=!1,!w$L.head&&this._events&&this._events[w$v]==w$L&&delete this._events[w$v],w$L.queue&&w$L.queue.length&&this.event(w$v,w$L.queue.shift())}return!0},w$v.on=function(w$v,w$l,w$L,w$A){return this._createListener(w$v,w$l,w$L,w$A,!1)},w$v.once=function(w$v,w$l,w$L,w$A){return this._createListener(w$v,w$l,w$L,w$A,!0)},w$v._createListener=function(w$v,w$l,w$L,w$A,w$x,w$m){void 0===w$m&&(w$m=!0),w$m&&this.off(w$v,w$l,w$L,w$x);var w$Z=w$$.createHandler(w$l||this,w$L,w$A,w$x);this._events||(this._events={});var w$O=this._events,w$e=w$O[w$v];return w$e?w$e.tail?(w$Z.prev=w$e.tail,w$e.tail.next=w$Z,w$e.tail=w$Z):w$e.head=w$e.tail=w$Z:w$O[w$v]={head:w$Z,tail:w$Z,cursor:null,lock:!1},this},w$v.off=function(w$v,w$l,w$L,w$A){if(void 0===w$A&&(w$A=!1),!this._events||!this._events[w$v])return this;for(var w$x=this._events[w$v],w$m=w$x.head;w$m;){if((!w$l||w$m.caller===w$l)&&w$m.method===w$L&&(!w$A||w$m.once)){w$$.delNode(w$x,w$m),w$x.cursor==w$m&&(w$x.cursor=w$m.next),w$$.recoverHandler(w$m);break}w$m=w$m.next}return this},w$v.offAll=function(w$v){var w$l=this._events;if(!w$l)return this;if(w$v)this._recoverHandlers(w$l[w$v]),delete w$l[w$v];else{for(var w$L in w$l)this._recoverHandlers(w$l[w$L]);this._events=null}return this},w$v._recoverHandlers=function(w$v){if(w$v){for(var w$l=w$v.head;w$l;){w$$.delNode(w$v,w$l);var w$L=w$l.next;w$$.recoverHandler(w$l),w$l=w$L}w$v.cursor=null}},w$v.isMouseEvent=function(w$v){return w$$.MOUSE_EVENTS[w$v]},w$$.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},w$$.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},w$$.delNode=function(w$v,w$l){w$l.prev?w$l.prev.next=w$l.next:w$v.head=w$l.next,w$l.next?w$l.next.prev=w$l.prev:w$v.tail=w$l.prev},w$$.createHandler=function(w$v,w$l,w$L,w$A){var w$x=w$$._freeHandler;return w$x?(w$$._freeCount--,w$$._freeHandler=w$x.next,w$x.caller=w$v,w$x.method=w$l,w$x.args=w$L,w$x.once=w$A):w$x={caller:w$v,method:w$l,args:w$L,once:w$A},w$x.prev=w$x.next=null,w$x},w$$.recoverHandler=function(w$v){w$v.caller=w$v.method=w$v.args=w$v.prev=null,w$v.next=w$$._freeHandler,w$$._freeHandler=w$v,w$$._freeCount++},w$$._freeHandler=null,w$$._freeCount=0,w$$}(),w$J=function(){function w$x(w$v,w$l,w$L,w$A){this.once=!1,void(this._id=0)===w$A&&(w$A=!1),this.setTo(w$v,w$l,w$L,w$A)}w$_(w$x,"laya.utils.Handler");var w$v=w$x.prototype;return w$v.setTo=function(w$v,w$l,w$L,w$A){return this._id=w$x._gid++,this.caller=w$v,this.method=w$l,this.args=w$L,this.once=w$A,this},w$v.run=function(){if(null==this.method)return null;var w$v=this._id,w$l=this.method.apply(this.caller,this.args);return this._id===w$v&&this.once&&this.recover(),w$l},w$v.runWith=function(w$v){if(null==this.method)return null;var w$l=this._id;if(null==w$v)var w$L=this.method.apply(this.caller,this.args);else w$L=this.args||w$v.unshift?this.args?this.method.apply(this.caller,this.args.concat(w$v)):this.method.apply(this.caller,w$v):this.method.call(this.caller,w$v);return this._id===w$l&&this.once&&this.recover(),w$L},w$v.clear=function(){return this.caller=null,this.method=null,this.args=null,this},w$v.recover=function(){0<this._id&&(this._id=0,this.clear())},w$x.create=function(w$v,w$l,w$L,w$A){return void 0===w$A&&(w$A=!0),new w$x(w$v,w$l,w$L,w$A)},w$x._gid=1,w$x}(),w$V=function(){function w$v(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}w$_(w$v,"laya.display.BitmapFont");var w$l=w$v.prototype;return w$l.loadFont=function(w$v,w$l){this._path=w$v,this._complete=w$l,w$H.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],w$J.create(this,this.onLoaded))},w$l.onLoaded=function(){this.parseFont(w$Ov.getRes(this._path),w$Ov.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},w$l.parseFont=function(w$v,w$l){if(null!=w$v&&null!=w$l){this._texture=w$l;var w$L=w$v.getElementsByTagName("info");if(!w$L[0].getAttributeNode)return this.parseFont2(w$v,w$l);this.fontSize=parseInt(w$L[0].getAttributeNode("size").nodeValue);var w$A,w$x=w$L[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(w$x[0]),parseInt(w$x[1]),parseInt(w$x[2]),parseInt(w$x[3])],w$A=w$v.getElementsByTagName("char");var w$m=0;for(w$m=0;w$m<w$A.length;w$m++){var w$Z=w$A[w$m],w$O=parseInt(w$Z.getAttributeNode("id").nodeValue),w$e=parseInt(w$Z.getAttributeNode("xoffset").nodeValue)/1,w$$=parseInt(w$Z.getAttributeNode("yoffset").nodeValue)/1,w$_=parseInt(w$Z.getAttributeNode("xadvance").nodeValue)/1,w$o=new w$T;w$o.x=parseInt(w$Z.getAttributeNode("x").nodeValue),w$o.y=parseInt(w$Z.getAttributeNode("y").nodeValue),w$o.width=parseInt(w$Z.getAttributeNode("width").nodeValue),w$o.height=parseInt(w$Z.getAttributeNode("height").nodeValue);var w$K=w$_v.create(w$l,w$o.x,w$o.y,w$o.width,w$o.height,w$e,w$$);this._maxWidth=Math.max(this._maxWidth,w$_+this.letterSpacing),this._fontCharDic[w$O]=w$K,this._fontWidthMap[w$O]=w$_}}},w$l.parseFont2=function(w$v,w$l){if(null!=w$v&&null!=w$l){this._texture=w$l;var w$L=w$v.getElementsByTagName("info");this.fontSize=parseInt(w$L[0].attributes.size.nodeValue);var w$A=w$L[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(w$A[0]),parseInt(w$A[1]),parseInt(w$A[2]),parseInt(w$A[3])];var w$x=w$v.getElementsByTagName("char"),w$m=0;for(w$m=0;w$m<w$x.length;w$m++){var w$Z=w$x[w$m].attributes,w$O=parseInt(w$Z.id.nodeValue),w$e=parseInt(w$Z.xoffset.nodeValue)/1,w$$=parseInt(w$Z.yoffset.nodeValue)/1,w$_=parseInt(w$Z.xadvance.nodeValue)/1,w$o=new w$T;w$o.x=parseInt(w$Z.x.nodeValue),w$o.y=parseInt(w$Z.y.nodeValue),w$o.width=parseInt(w$Z.width.nodeValue),w$o.height=parseInt(w$Z.height.nodeValue);var w$K=w$_v.create(w$l,w$o.x,w$o.y,w$o.width,w$o.height,w$e,w$$);this._maxWidth=Math.max(this._maxWidth,w$_+this.letterSpacing),this._fontCharDic[w$O]=w$K,this._fontWidthMap[w$O]=w$_}}},w$l.getCharTexture=function(w$v){return this._fontCharDic[w$v.charCodeAt(0)]},w$l.destroy=function(){if(this._texture){for(var w$v in this._fontCharDic){var w$l=this._fontCharDic[w$v];w$l&&w$l.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},w$l.setSpaceWidth=function(w$v){this._spaceWidth=w$v},w$l.getCharWidth=function(w$v){var w$l=w$v.charCodeAt(0);return this._fontWidthMap[w$l]?this._fontWidthMap[w$l]+this.letterSpacing:" "==w$v?this._spaceWidth+this.letterSpacing:0},w$l.getTextWidth=function(w$v){for(var w$l=0,w$L=0,w$A=w$v.length;w$L<w$A;w$L++)w$l+=this.getCharWidth(w$v.charAt(w$L));return w$l},w$l.getMaxWidth=function(){return this._maxWidth},w$l.getMaxHeight=function(){return this.fontSize},w$l.drawText=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z,w$O=this.getTextWidth(w$v),w$e=0;"center"===w$x&&(w$e=(w$m-w$O)/2),"right"===w$x&&(w$e=w$m-w$O);for(var w$$=0,w$_=0,w$o=w$v.length;w$_<w$o;w$_++)(w$Z=this.getCharTexture(w$v.charAt(w$_)))&&(w$l.graphics.drawTexture(w$Z,w$L+w$$+w$e,w$A),w$$+=this.getCharWidth(w$v.charAt(w$_)))},w$v}(),w$O=function(){function w$L(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=w$L._TF_EMPTY}w$_(w$L,"laya.display.css.Style");var w$v=w$L.prototype;return w$v.getTransform=function(){return this._tf},w$v.setTransform=function(w$v){this._tf="none"!==w$v&&w$v?w$v:w$L._TF_EMPTY},w$v.setTranslateX=function(w$v){this._tf===w$L._TF_EMPTY&&(this._tf=new w$x),this._tf.translateX=w$v},w$v.setTranslateY=function(w$v){this._tf===w$L._TF_EMPTY&&(this._tf=new w$x),this._tf.translateY=w$v},w$v.setScaleX=function(w$v){this._tf===w$L._TF_EMPTY&&(this._tf=new w$x),this._tf.scaleX=w$v},w$v.setScale=function(w$v,w$l){this._tf===w$L._TF_EMPTY&&(this._tf=new w$x),this._tf.scaleX=w$v,this._tf.scaleY=w$l},w$v.setScaleY=function(w$v){this._tf===w$L._TF_EMPTY&&(this._tf=new w$x),this._tf.scaleY=w$v},w$v.setRotate=function(w$v){this._tf===w$L._TF_EMPTY&&(this._tf=new w$x),this._tf.rotate=w$v},w$v.setSkewX=function(w$v){this._tf===w$L._TF_EMPTY&&(this._tf=new w$x),this._tf.skewX=w$v},w$v.setSkewY=function(w$v){this._tf===w$L._TF_EMPTY&&(this._tf=new w$x),this._tf.skewY=w$v},w$v.destroy=function(){this.scrollRect=null},w$v.render=function(w$v,w$l,w$L,w$A){},w$v.getCSSStyle=function(){return w$lv.EMPTY},w$v._enableLayout=function(){return!1},w$G(0,w$v,"scaleX",function(){return this._tf.scaleX},function(w$v){this.setScaleX(w$v)}),w$G(0,w$v,"transform",function(){return this.getTransform()},function(w$v){this.setTransform(w$v)}),w$G(0,w$v,"translateX",function(){return this._tf.translateX},function(w$v){this.setTranslateX(w$v)}),w$G(0,w$v,"translateY",function(){return this._tf.translateY},function(w$v){this.setTranslateY(w$v)}),w$G(0,w$v,"scaleY",function(){return this._tf.scaleY},function(w$v){this.setScaleY(w$v)}),w$G(0,w$v,"block",function(){return 0!=(1&this._type)}),w$G(0,w$v,"skewY",function(){return this._tf.skewY},function(w$v){this.setSkewY(w$v)}),w$G(0,w$v,"rotate",function(){return this._tf.rotate},function(w$v){this.setRotate(w$v)}),w$G(0,w$v,"skewX",function(){return this._tf.skewX},function(w$v){this.setSkewX(w$v)}),w$G(0,w$v,"paddingLeft",function(){return 0}),w$G(0,w$v,"paddingTop",function(){return 0}),w$G(0,w$v,"absolute",function(){return!0}),w$L.__init__=function(){w$L._TF_EMPTY=new w$x,w$L.EMPTY=new w$L},w$L.EMPTY=null,w$L._TF_EMPTY=null,w$L}(),w$r=function(){function w$l(w$v){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=w$p.create(w$l.defaultColor),this.family=w$l.defaultFamily,this.stroke=w$l._STROKE,this.size=w$l.defaultSize,w$v&&w$v!==w$l.EMPTY&&w$v.copyTo(this)}w$_(w$l,"laya.display.css.Font");var w$v=w$l.prototype;return w$v.set=function(w$v){this._text=null;for(var w$l=w$v.split(" "),w$L=0,w$A=w$l.length;w$L<w$A;w$L++){var w$x=w$l[w$L];switch(w$x){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<w$x.indexOf("px")&&(this.size=parseInt(w$x),this.family=w$l[w$L+1],w$L++)}},w$v.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},w$v.copyTo=function(w$v){w$v._type=this._type,w$v._text=this._text,w$v._weight=this._weight,w$v._color=this._color,w$v.family=this.family,w$v.stroke=this.stroke!=w$l._STROKE?this.stroke.slice():w$l._STROKE,w$v.indent=this.indent,w$v.size=this.size},w$G(0,w$v,"password",function(){return 0!=(1024&this._type)},function(w$v){w$v?this._type|=1024:this._type&=-1025}),w$G(0,w$v,"color",function(){return this._color.strColor},function(w$v){this._color=w$p.create(w$v)}),w$G(0,w$v,"italic",function(){return 0!=(512&this._type)},function(w$v){w$v?this._type|=512:this._type&=-513}),w$G(0,w$v,"bold",function(){return 0!=(2048&this._type)},function(w$v){w$v?this._type|=2048:this._type&=-2049}),w$G(0,w$v,"weight",function(){return""+this._weight},function(w$v){var w$l=0;switch(w$v){case"normal":break;case"bold":this.bold=!0,w$l=700;break;case"bolder":w$l=800;break;case"lighter":w$l=100;break;default:w$l=parseInt(w$v)}this._weight=w$l,this._text=null}),w$G(0,w$v,"decoration",function(){return this._decoration?this._decoration.value:null},function(w$v){var w$l=w$v.split(" ");switch(this._decoration||(this._decoration={}),w$l[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=w$l[0]}w$l[1]&&(this._decoration.color=w$p.create(w$l)),this._decoration.value=w$v}),w$l.__init__=function(){w$l.EMPTY=new w$l(null)},w$l.EMPTY=null,w$l.defaultColor="#000000",w$l.defaultSize=12,w$l.defaultFamily="Arial",w$l.defaultFont="12px Arial",w$l._STROKE=[0,"#000000"],w$l._ITALIC=512,w$l._PASSWORD=1024,w$l._BOLD=2048,w$l}(),w$x=function(){function w$v(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return w$_(w$v,"laya.display.css.TransformInfo"),w$v}(),w$K=function(){function w$o(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,w$t.isConchNode){this._nativeObj=new w$Z._conchGraphics,this.id=this._nativeObj.conchID}}w$_(w$o,"laya.display.Graphics");var w$v=w$o.prototype;return w$v.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},w$v.clear=function(w$v){void 0===w$v&&(w$v=!1);var w$l=0,w$L=0;if(w$v){var w$A=this._one;if(this._cmds){for(w$L=this._cmds.length,w$l=0;w$l<w$L;w$l++)!(w$A=this._cmds[w$l])||w$A.callee!==w$t._context._drawTexture&&w$A.callee!==w$t._context._drawTextureWithTransform||(w$A[0]=null,w$o._cache.push(w$A));this._cmds.length=0}else w$A&&(!w$A||w$A.callee!==w$t._context._drawTexture&&w$A.callee!==w$t._context._drawTextureWithTransform||(w$A[0]=null,w$o._cache.push(w$A)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(w$l=0,w$L=this._vectorgraphArray.length;w$l<w$L;w$l++)w$n.getInstance().deleteShape(this._vectorgraphArray[w$l]);this._vectorgraphArray.length=0}},w$v._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},w$v._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new w$L,this._graphicBounds._graphics=this)},w$v._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},w$v._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},w$v.getBounds=function(w$v){return void 0===w$v&&(w$v=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(w$v)},w$v.getBoundPoints=function(w$v){return void 0===w$v&&(w$v=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(w$v)},w$v._addCmd=function(w$v){this._cmds=this._cmds||[],w$v.callee=w$v.shift(),this._cmds.push(w$v)},w$v.setFilters=function(w$v){this._saveToCmd(w$t._context._setFilters,w$v)},w$v.drawTexture=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){if(void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0),void 0===w$A&&(w$A=0),void 0===w$x&&(w$x=0),void 0===w$Z&&(w$Z=1),!w$v||w$Z<.01)return null;w$A||(w$A=w$v.sourceWidth),w$x||(w$x=w$v.sourceHeight),w$Z=w$Z<0?0:1<w$Z?1:w$Z;var w$O,w$e=!w$t.isWebGL&&(w$N.onFirefox||w$N.onEdge||w$N.onIE||w$N.onSafari)?.5:0,w$$=w$A/w$v.sourceWidth,w$_=w$x/w$v.sourceHeight;return w$A=w$v.width*w$$,w$x=w$v.height*w$_,w$v.loaded&&(w$A<=0||w$x<=0)?null:(w$l+=w$v.offsetX*w$$,w$L+=w$v.offsetY*w$_,this._sp&&(this._sp._renderType|=512),w$l-=w$e,w$L-=w$e,w$A+=2*w$e,w$x+=2*w$e,w$o._cache.length?((w$O=w$o._cache.pop())[0]=w$v,w$O[1]=w$l,w$O[2]=w$L,w$O[3]=w$A,w$O[4]=w$x,w$O[5]=w$m,w$O[6]=w$Z):w$O=[w$v,w$l,w$L,w$A,w$x,w$m,w$Z],w$O.callee=w$m||1!=w$Z?w$t._context._drawTextureWithTransform:w$t._context._drawTexture,null!=this._one||w$m||1!=w$Z?this._saveToCmd(w$O.callee,w$O):(this._one=w$O,this._render=this._renderOneImg),w$v.loaded||w$v.once("loaded",this,this._textureLoaded,[w$v,w$O]),this._repaint(),w$O)},w$v.cleanByTexture=function(w$v,w$l,w$L,w$A,w$x){if(void 0===w$A&&(w$A=0),void 0===w$x&&(w$x=0),!w$v)return this.clear();if(this._one&&this._render===this._renderOneImg){w$A||(w$A=w$v.sourceWidth),w$x||(w$x=w$v.sourceHeight);var w$m=w$A/w$v.sourceWidth,w$Z=w$x/w$v.sourceHeight;w$A=w$v.width*w$m,w$x=w$v.height*w$Z,w$l+=w$v.offsetX*w$m,w$L+=w$v.offsetY*w$Z,this._one[0]=w$v,this._one[1]=w$l,this._one[2]=w$L,this._one[3]=w$A,this._one[4]=w$x,this._repaint()}else this.clear(),w$v&&this.drawTexture(w$v,w$l,w$L,w$A,w$x)},w$v.drawTextures=function(w$v,w$l){w$v&&this._saveToCmd(w$t._context._drawTextures,[w$v,w$l])},w$v.fillTexture=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){if(void 0===w$A&&(w$A=0),void 0===w$x&&(w$x=0),void 0===w$m&&(w$m="repeat"),w$v){var w$O=[w$v,w$l,w$L,w$A,w$x,w$m,w$Z||w$g.EMPTY,{}];w$v.loaded||w$v.once("loaded",this,this._textureLoaded,[w$v,w$O]),this._saveToCmd(w$t._context._fillTexture,w$O)}},w$v._textureLoaded=function(w$v,w$l){w$l[3]=w$l[3]||w$v.width,w$l[4]=w$l[4]||w$v.height,this._repaint()},w$v.fillCircle=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){w$L.bitmap.enableMerageInAtlas=!1;var w$O=new Float32Array(2*(w$Z+1)),w$e=new Float32Array(2*(w$Z+1)),w$$=new Uint16Array(3*w$Z),w$_=2*Math.PI/w$Z,w$o=0;w$O[0]=w$A,w$O[1]=w$x,w$e[0]=w$A/w$L.width,w$e[1]=w$x/w$L.height;for(var w$K=2,w$r=0;w$r<w$Z;w$r++){var w$G=w$m*Math.cos(w$o)+w$A,w$c=w$m*Math.sin(w$o)+w$x;w$O[w$K]=w$G,w$O[w$K+1]=w$c,w$e[w$K]=w$G/w$L.width,w$e[w$K+1]=w$c/w$L.height,w$o+=w$_,w$K+=2}for(w$r=w$K=0;w$r<w$Z;w$r++)w$$[w$K++]=0,w$$[w$K++]=w$r+1,w$$[w$K++]=w$Z+1<=w$r+2?1:w$r+2;this.drawTriangles(w$L,w$v,w$l,w$O,w$e,w$$)},w$v.drawTriangles=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$){void 0===w$O&&(w$O=1),this._saveToCmd(w$t._context.drawTriangles,[w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$])},w$v._saveToCmd=function(w$v,w$l){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=w$l,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(w$l)),w$l.callee=w$v,this._repaint(),w$l},w$v.clipRect=function(w$v,w$l,w$L,w$A){this._saveToCmd(w$t._context._clipRect,[w$v,w$l,w$L,w$A])},w$v.fillText=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){void 0===w$Z&&(w$Z=0),this._saveToCmd(w$t._context._fillText,[w$v,w$l,w$L,w$A||w$r.defaultFont,w$x,w$m])},w$v.fillBorderText=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){this._saveToCmd(w$t._context._fillBorderText,[w$v,w$l,w$L,w$A||w$r.defaultFont,w$x,w$m,w$Z,w$O])},w$v.strokeText=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){this._saveToCmd(w$t._context._strokeText,[w$v,w$l,w$L,w$A||w$r.defaultFont,w$x,w$m,w$Z])},w$v.alpha=function(w$v){w$v=w$v<0?0:1<w$v?1:w$v,this._saveToCmd(w$t._context._alpha,[w$v])},w$v.setAlpha=function(w$v){w$v=w$v<0?0:1<w$v?1:w$v,this._saveToCmd(w$t._context._setAlpha,[w$v])},w$v.transform=function(w$v,w$l,w$L){void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0),this._saveToCmd(w$t._context._transform,[w$v,w$l,w$L])},w$v.rotate=function(w$v,w$l,w$L){void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0),this._saveToCmd(w$t._context._rotate,[w$v,w$l,w$L])},w$v.scale=function(w$v,w$l,w$L,w$A){void 0===w$L&&(w$L=0),void 0===w$A&&(w$A=0),this._saveToCmd(w$t._context._scale,[w$v,w$l,w$L,w$A])},w$v.translate=function(w$v,w$l){this._saveToCmd(w$t._context._translate,[w$v,w$l])},w$v.save=function(){this._saveToCmd(w$t._context._save,[])},w$v.restore=function(){this._saveToCmd(w$t._context._restore,[])},w$v.replaceText=function(w$v){this._repaint();var w$l=this._cmds;if(w$l){for(var w$L=w$l.length-1;-1<w$L;w$L--)if(this._isTextCmd(w$l[w$L].callee))return w$l[w$L][0].toUpperCase?w$l[w$L][0]=w$v:w$l[w$L][0].setText(w$v),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=w$v:this._one[0].setText(w$v),!0;return!1},w$v._isTextCmd=function(w$v){return w$v===w$t._context._fillText||w$v===w$t._context._fillBorderText||w$v===w$t._context._strokeText},w$v.replaceTextColor=function(w$v){this._repaint();var w$l=this._cmds;if(w$l)for(var w$L=w$l.length-1;-1<w$L;w$L--)this._isTextCmd(w$l[w$L].callee)&&(w$l[w$L][4]=w$v,w$l[w$L][0].toUpperCase||(w$l[w$L][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=w$v,this._one[0].toUpperCase||(this._one[0].changed=!0))},w$v.loadImage=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z=this;void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0),void 0===w$A&&(w$A=0),void 0===w$x&&(w$x=0);var w$O=w$Ov.getRes(w$v);function w$e(w$v){w$v&&(w$Z.drawTexture(w$v,w$l,w$L,w$A,w$x),null!=w$m&&w$m.call(w$Z._sp,w$v))}w$O?w$e(w$O):w$H.loader.load(w$v,w$J.create(null,w$e),null,"image")},w$v._renderEmpty=function(w$v,w$l,w$L,w$A){},w$v._renderAll=function(w$v,w$l,w$L,w$A){for(var w$x,w$m=this._cmds,w$Z=0,w$O=w$m.length;w$Z<w$O;w$Z++)(w$x=w$m[w$Z]).callee.call(w$l,w$L,w$A,w$x)},w$v._renderOne=function(w$v,w$l,w$L,w$A){this._one.callee.call(w$l,w$L,w$A,this._one)},w$v._renderOneImg=function(w$v,w$l,w$L,w$A){this._one.callee.call(w$l,w$L,w$A,this._one),2305!==w$v._renderType&&(w$v._renderType|=1)},w$v.drawLine=function(w$v,w$l,w$L,w$A,w$x,w$m){void 0===w$m&&(w$m=1);var w$Z=0;w$t.isWebGL&&(w$Z=w$n.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(w$Z));var w$O=w$m%2==0?0:.5,w$e=[w$v+w$O,w$l+w$O,w$L+w$O,w$A+w$O,w$x,w$m,w$Z];this._saveToCmd(w$t._context._drawLine,w$e)},w$v.drawLines=function(w$v,w$l,w$L,w$A,w$x){void 0===w$x&&(w$x=1);var w$m=0;if(w$L&&!(w$L.length<4)){w$t.isWebGL&&(w$m=w$n.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(w$m));var w$Z=w$x%2==0?0:.5,w$O=[w$v+w$Z,w$l+w$Z,w$L,w$A,w$x,w$m];this._saveToCmd(w$t._context._drawLines,w$O)}},w$v.drawCurves=function(w$v,w$l,w$L,w$A,w$x){void 0===w$x&&(w$x=1);var w$m=[w$v,w$l,w$L,w$A,w$x];this._saveToCmd(w$t._context._drawCurves,w$m)},w$v.drawRect=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){void 0===w$Z&&(w$Z=1);var w$O=w$m?w$Z/2:0,w$e=w$m?w$Z:0,w$$=[w$v+w$O,w$l+w$O,w$L-w$e,w$A-w$e,w$x,w$m,w$Z];this._saveToCmd(w$t._context._drawRect,w$$)},w$v.drawCircle=function(w$v,w$l,w$L,w$A,w$x,w$m){void 0===w$m&&(w$m=1);var w$Z=w$x?w$m/2:0,w$O=0;w$t.isWebGL&&(w$O=w$n.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(w$O));var w$e=[w$v,w$l,w$L-w$Z,w$A,w$x,w$m,w$O];this._saveToCmd(w$t._context._drawCircle,w$e)},w$v.drawPie=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){void 0===w$O&&(w$O=1);var w$e=w$Z?w$O/2:0,w$$=w$Z?w$O:0,w$_=0;w$t.isWebGL&&(w$_=w$n.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(w$_));var w$o=[w$v+w$e,w$l+w$e,w$L-w$$,w$A,w$x,w$m,w$Z,w$O,w$_];w$o[3]=w$i.toRadian(w$A),w$o[4]=w$i.toRadian(w$x),this._saveToCmd(w$t._context._drawPie,w$o)},w$v.drawPoly=function(w$v,w$l,w$L,w$A,w$x,w$m){void 0===w$m&&(w$m=1);var w$Z=0,w$O=!1;w$t.isWebGL&&(w$Z=w$n.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(w$Z),w$O=!(6<w$L.length));var w$e=w$x?w$m%2==0?0:.5:0,w$$=[w$v+w$e,w$l+w$e,w$L,w$A,w$x,w$m,w$Z,w$O];this._saveToCmd(w$t._context._drawPoly,w$$)},w$v.drawPath=function(w$v,w$l,w$L,w$A,w$x){var w$m=[w$v,w$l,w$L,w$A,w$x];this._saveToCmd(w$t._context._drawPath,w$m)},w$G(0,w$v,"cmds",function(){return this._cmds},function(w$v){this._sp&&(this._sp._renderType|=512),this._cmds=w$v,this._render=this._renderAll,this._repaint()}),w$o.__init__=function(){if(w$t.isConchNode){for(var w$v=laya.display.Graphics.prototype,w$l=w$N.window.ConchGraphics.prototype,w$L=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],w$A=0,w$x=w$L.length;w$A<=w$x;w$A++){var w$m=w$L[w$A];w$v[w$m]=w$l[w$m]}w$v._saveToCmd=null,w$l.drawImageS&&(w$v.drawTextures=function(w$v,w$l){if(w$v&&w$v.loaded&&w$v.bitmap&&w$v.source){var w$L=w$v.uv,w$A=w$v.bitmap.width,w$x=w$v.bitmap.height;this.drawImageS(w$v.bitmap.source,w$L[0]*w$A,w$L[1]*w$x,(w$L[2]-w$L[0])*w$A,(w$L[5]-w$L[3])*w$x,w$v.offsetX,w$v.offsetY,w$v.width,w$v.height,w$l)}}),w$v.drawTexture=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){if(void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0),void 0===w$A&&(w$A=0),void 0===w$x&&(w$x=0),void 0===w$Z&&(w$Z=1),w$v)if(w$v.loaded){if(w$v.loaded&&w$v.bitmap&&w$v.source&&(w$A||(w$A=w$v.sourceWidth),w$x||(w$x=w$v.sourceHeight),w$Z=w$Z<0?0:1<w$Z?1:w$Z,w$A=w$A-w$v.sourceWidth+w$v.width,w$x=w$x-w$v.sourceHeight+w$v.height,!(w$A<=0||w$x<=0))){w$l+=w$v.offsetX,w$L+=w$v.offsetY;var w$O=w$v.uv,w$e=w$v.bitmap.width,w$$=w$v.bitmap.height;w$O[4]<w$O[0]&&w$O[5]<w$O[1]?this.drawImageM(w$v.bitmap.source,w$O[4]*w$e,w$O[5]*w$$,(w$O[0]-w$O[4])*w$e,(w$O[1]-w$O[5])*w$$,w$l,w$L,w$A,w$x,w$m,w$Z):this.drawImageM(w$v.bitmap.source,w$O[0]*w$e,w$O[1]*w$$,(w$O[2]-w$O[0])*w$e,(w$O[5]-w$O[3])*w$$,w$l,w$L,w$A,w$x,w$m,w$Z),this._repaint()}}else w$v.once("loaded",this,function(){this.drawTexture(w$v,w$l,w$L,w$A,w$x,w$m)})},w$v.fillTexture=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){if(void 0===w$A&&(w$A=0),void 0===w$x&&(w$x=0),void 0===w$m&&(w$m="repeat"),w$v&&w$v.loaded){var w$O,w$e=w$t._context.ctx,w$$=w$v.bitmap.width,w$_=w$v.bitmap.height,w$o=w$v.uv;w$O=w$v.uv!=w$_v.DEF_UV?w$e.createPattern(w$v.bitmap.source,w$m,w$o[0]*w$$,w$o[1]*w$_,(w$o[2]-w$o[0])*w$$,(w$o[5]-w$o[3])*w$_):w$e.createPattern(w$v.bitmap.source,w$m);var w$K=0,w$r=0;w$Z&&(w$l+=w$Z.x%w$v.width,w$L+=w$Z.y%w$v.height,w$K-=w$Z.x%w$v.width,w$r-=w$Z.y%w$v.height),this._fillImage(w$O,w$l,w$L,w$K,w$r,w$A,w$x)}}}},w$o._cache=[],w$o}(),w$L=function(){function w$B(){this._cacheBoundsType=!1}w$_(w$B,"laya.display.GraphicsBounds");var w$v=w$B.prototype;return w$v.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},w$v.reset=function(){this._temp&&(this._temp.length=0)},w$v.getBounds=function(w$v){return void 0===w$v&&(w$v=!1),(!this._bounds||!this._temp||this._temp.length<1||w$v!=this._cacheBoundsType)&&(this._bounds=w$T._getWrapRec(this.getBoundPoints(w$v),this._bounds)),this._cacheBoundsType=w$v,this._bounds},w$v.getBoundPoints=function(w$v){return void 0===w$v&&(w$v=!1),(!this._temp||this._temp.length<1||w$v!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(w$v)),this._cacheBoundsType=w$v,this._rstBoundPoints=w$i.copyArray(this._rstBoundPoints,this._temp)},w$v._getCmdPoints=function(w$v){void 0===w$v&&(w$v=!1);var w$l,w$L,w$A=w$t._context,w$x=this._graphics.cmds;if((w$l=this._temp||(this._temp=[])).length=0,w$x||null==this._graphics._one||(w$B._tempCmds.length=0,w$B._tempCmds.push(this._graphics._one),w$x=w$B._tempCmds),!w$x)return w$l;(w$L=w$B._tempMatrixArrays).length=0;var w$m=w$B._initMatrix;w$m.identity();for(var w$Z,w$O,w$e=w$B._tempMatrix,w$$=NaN,w$_=NaN,w$o=NaN,w$K=NaN,w$r=NaN,w$G=NaN,w$c=0,w$d=w$x.length;w$c<w$d;w$c++)if((w$Z=w$x[w$c]).callee)switch(w$Z.callee){case w$A._save:case 7:w$L.push(w$m),w$m=w$m.clone();break;case w$A._restore:case 8:w$m=w$L.pop();break;case w$A._scale:case 5:w$e.identity(),w$e.translate(-w$Z[2],-w$Z[3]),w$e.scale(w$Z[0],w$Z[1]),w$e.translate(w$Z[2],w$Z[3]),this._switchMatrix(w$m,w$e);break;case w$A._rotate:case 3:w$e.identity(),w$e.translate(-w$Z[1],-w$Z[2]),w$e.rotate(w$Z[0]),w$e.translate(w$Z[1],w$Z[2]),this._switchMatrix(w$m,w$e);break;case w$A._translate:case 6:w$e.identity(),w$e.translate(w$Z[0],w$Z[1]),this._switchMatrix(w$m,w$e);break;case w$A._transform:case 4:w$e.identity(),w$e.translate(-w$Z[1],-w$Z[2]),w$e.concat(w$Z[0]),w$e.translate(w$Z[1],w$Z[2]),this._switchMatrix(w$m,w$e);break;case 16:case 24:w$B._addPointArrToRst(w$l,w$T._getBoundPointS(w$Z[0],w$Z[1],w$Z[2],w$Z[3]),w$m);break;case 17:w$m.copyTo(w$e),w$e.concat(w$Z[4]),w$B._addPointArrToRst(w$l,w$T._getBoundPointS(w$Z[0],w$Z[1],w$Z[2],w$Z[3]),w$e);break;case w$A._drawTexture:w$O=w$Z[0],w$v?w$Z[3]&&w$Z[4]?w$B._addPointArrToRst(w$l,w$T._getBoundPointS(w$Z[1],w$Z[2],w$Z[3],w$Z[4]),w$m):(w$O=w$Z[0],w$B._addPointArrToRst(w$l,w$T._getBoundPointS(w$Z[1],w$Z[2],w$O.width,w$O.height),w$m)):(w$$=(w$Z[3]||w$O.sourceWidth)/w$O.width,w$_=(w$Z[4]||w$O.sourceHeight)/w$O.height,w$o=w$$*w$O.sourceWidth,w$K=w$_*w$O.sourceHeight,w$r=0<w$O.offsetX?w$O.offsetX:0,w$G=0<w$O.offsetY?w$O.offsetY:0,w$r*=w$$,w$G*=w$_,w$B._addPointArrToRst(w$l,w$T._getBoundPointS(w$Z[1]-w$r,w$Z[2]-w$G,w$o,w$K),w$m));break;case w$A._fillTexture:w$Z[3]&&w$Z[4]?w$B._addPointArrToRst(w$l,w$T._getBoundPointS(w$Z[1],w$Z[2],w$Z[3],w$Z[4]),w$m):(w$O=w$Z[0],w$B._addPointArrToRst(w$l,w$T._getBoundPointS(w$Z[1],w$Z[2],w$O.width,w$O.height),w$m));break;case w$A._drawTextureWithTransform:var w$C;w$C=w$Z[5]?(w$m.copyTo(w$e),w$e.concat(w$Z[5]),w$e):w$m,w$v?w$Z[3]&&w$Z[4]?w$B._addPointArrToRst(w$l,w$T._getBoundPointS(w$Z[1],w$Z[2],w$Z[3],w$Z[4]),w$C):(w$O=w$Z[0],w$B._addPointArrToRst(w$l,w$T._getBoundPointS(w$Z[1],w$Z[2],w$O.width,w$O.height),w$C)):(w$O=w$Z[0],w$$=(w$Z[3]||w$O.sourceWidth)/w$O.width,w$_=(w$Z[4]||w$O.sourceHeight)/w$O.height,w$o=w$$*w$O.sourceWidth,w$K=w$_*w$O.sourceHeight,w$r=0<w$O.offsetX?w$O.offsetX:0,w$G=0<w$O.offsetY?w$O.offsetY:0,w$r*=w$$,w$G*=w$_,w$B._addPointArrToRst(w$l,w$T._getBoundPointS(w$Z[1]-w$r,w$Z[2]-w$G,w$o,w$K),w$C));break;case w$A._drawRect:case 13:w$B._addPointArrToRst(w$l,w$T._getBoundPointS(w$Z[0],w$Z[1],w$Z[2],w$Z[3]),w$m);break;case w$A._drawCircle:case w$A._fillCircle:case 14:w$B._addPointArrToRst(w$l,w$T._getBoundPointS(w$Z[0]-w$Z[2],w$Z[1]-w$Z[2],w$Z[2]+w$Z[2],w$Z[2]+w$Z[2]),w$m);break;case w$A._drawLine:case 20:w$B._tempPoints.length=0;var w$J;w$J=.5*w$Z[5],w$Z[0]==w$Z[2]?w$B._tempPoints.push(w$Z[0]+w$J,w$Z[1],w$Z[2]+w$J,w$Z[3],w$Z[0]-w$J,w$Z[1],w$Z[2]-w$J,w$Z[3]):w$Z[1]==w$Z[3]?w$B._tempPoints.push(w$Z[0],w$Z[1]+w$J,w$Z[2],w$Z[3]+w$J,w$Z[0],w$Z[1]-w$J,w$Z[2],w$Z[3]-w$J):w$B._tempPoints.push(w$Z[0],w$Z[1],w$Z[2],w$Z[3]),w$B._addPointArrToRst(w$l,w$B._tempPoints,w$m);break;case w$A._drawCurves:case 22:w$B._addPointArrToRst(w$l,w$X.I.getBezierPoints(w$Z[2]),w$m,w$Z[0],w$Z[1]);break;case w$A._drawPoly:case w$A._drawLines:case 18:w$B._addPointArrToRst(w$l,w$Z[2],w$m,w$Z[0],w$Z[1]);break;case w$A._drawPath:case 19:w$B._addPointArrToRst(w$l,this._getPathPoints(w$Z[2]),w$m,w$Z[0],w$Z[1]);break;case w$A._drawPie:case 15:w$B._addPointArrToRst(w$l,this._getPiePoints(w$Z[0],w$Z[1],w$Z[2],w$Z[3],w$Z[4]),w$m)}return 200<w$l.length?w$l=w$i.copyArray(w$l,w$T._getWrapRec(w$l)._getBoundPoints()):8<w$l.length&&(w$l=w$f.scanPList(w$l)),w$l},w$v._switchMatrix=function(w$v,w$l){w$l.concat(w$v),w$l.copyTo(w$v)},w$v._getPiePoints=function(w$v,w$l,w$L,w$A,w$x){var w$m=w$B._tempPoints;w$B._tempPoints.length=0,w$m.push(w$v,w$l);var w$Z=(w$x-w$A)%(2*Math.PI)/10,w$O=NaN,w$e=w$A;for(w$O=0;w$O<=10;w$O++)w$m.push(w$v+w$L*Math.cos(w$e),w$l+w$L*Math.sin(w$e)),w$e+=w$Z;return w$m},w$v._getPathPoints=function(w$v){var w$l,w$L,w$A=0,w$x=w$B._tempPoints;for(w$x.length=0,w$l=w$v.length,w$A=0;w$A<w$l;w$A++)1<(w$L=w$v[w$A]).length&&(w$x.push(w$L[1],w$L[2]),3<w$L.length&&w$x.push(w$L[3],w$L[4]));return w$x},w$B._addPointArrToRst=function(w$v,w$l,w$L,w$A,w$x){void 0===w$A&&(w$A=0),void 0===w$x&&(w$x=0);var w$m,w$Z=0;for(w$m=w$l.length,w$Z=0;w$Z<w$m;w$Z+=2)w$B._addPointToRst(w$v,w$l[w$Z]+w$A,w$l[w$Z+1]+w$x,w$L)},w$B._addPointToRst=function(w$v,w$l,w$L,w$A){var w$x=w$g.TEMP;w$x.setTo(w$l||0,w$L||0),w$A.transformPoint(w$x),w$v.push(w$x.x,w$x.y)},w$B._tempPoints=[],w$B._tempMatrixArrays=[],w$B._tempCmds=[],w$e(w$B,["_tempMatrix",function(){return this._tempMatrix=new w$M},"_initMatrix",function(){return this._initMatrix=new w$M}]),w$B}(),w$m=function(){function w$v(){}w$_(w$v,"laya.events.Event");var w$l=w$v.prototype;return w$l.setTo=function(w$v,w$l,w$L){return this.type=w$v,this.currentTarget=w$l,this.target=w$L,this},w$l.stopPropagation=function(){this._stoped=!0},w$G(0,w$l,"stageY",function(){return w$H.stage.mouseY}),w$G(0,w$l,"charCode",function(){return this.nativeEvent.charCode}),w$G(0,w$l,"touches",function(){var w$v=this.nativeEvent.touches;if(w$v)for(var w$l=w$H.stage,w$L=0,w$A=w$v.length;w$L<w$A;w$L++){var w$x=w$v[w$L],w$m=w$g.TEMP;w$m.setTo(w$x.clientX,w$x.clientY),w$l._canvasTransform.invertTransformPoint(w$m),w$l.transform.invertTransformPoint(w$m),w$x.stageX=w$m.x,w$x.stageY=w$m.y}return w$v}),w$G(0,w$l,"keyLocation",function(){return this.nativeEvent.keyLocation}),w$G(0,w$l,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),w$G(0,w$l,"altKey",function(){return this.nativeEvent.altKey}),w$G(0,w$l,"shiftKey",function(){return this.nativeEvent.shiftKey}),w$G(0,w$l,"stageX",function(){return w$H.stage.mouseX}),w$v.EMPTY=new w$v,w$v.MOUSE_DOWN="mousedown",w$v.MOUSE_UP="mouseup",w$v.CLICK="click",w$v.RIGHT_MOUSE_DOWN="rightmousedown",w$v.RIGHT_MOUSE_UP="rightmouseup",w$v.RIGHT_CLICK="rightclick",w$v.MOUSE_MOVE="mousemove",w$v.MOUSE_OVER="mouseover",w$v.MOUSE_OUT="mouseout",w$v.MOUSE_WHEEL="mousewheel",w$v.ROLL_OVER="mouseover",w$v.ROLL_OUT="mouseout",w$v.DOUBLE_CLICK="doubleclick",w$v.CHANGE="change",w$v.CHANGED="changed",w$v.RESIZE="resize",w$v.ADDED="added",w$v.REMOVED="removed",w$v.DISPLAY="display",w$v.UNDISPLAY="undisplay",w$v.ERROR="error",w$v.COMPLETE="complete",w$v.LOADED="loaded",w$v.INITED="inited",w$v.PROGRESS="progress",w$v.INPUT="input",w$v.RENDER="render",w$v.OPEN="open",w$v.MESSAGE="message",w$v.CLOSE="close",w$v.KEY_DOWN="keydown",w$v.KEY_PRESS="keypress",w$v.KEY_UP="keyup",w$v.FRAME="enterframe",w$v.DRAG_START="dragstart",w$v.DRAG_MOVE="dragmove",w$v.DRAG_END="dragend",w$v.ENTER="enter",w$v.SELECT="select",w$v.BLUR="blur",w$v.FOCUS="focus",w$v.VISIBILITY_CHANGE="visibilitychange",w$v.FOCUS_CHANGE="focuschange",w$v.PLAYED="played",w$v.PAUSED="paused",w$v.STOPPED="stopped",w$v.START="start",w$v.END="end",w$v.ENABLE_CHANGED="enablechanged",w$v.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",w$v.COMPONENT_ADDED="componentadded",w$v.COMPONENT_REMOVED="componentremoved",w$v.LAYER_CHANGED="layerchanged",w$v.HIERARCHY_LOADED="hierarchyloaded",w$v.RECOVERED="recovered",w$v.RELEASED="released",w$v.LINK="link",w$v.LABEL="label",w$v.FULL_SCREEN_CHANGE="fullscreenchange",w$v.DEVICE_LOST="devicelost",w$v.MESH_CHANGED="meshchanged",w$v.MATERIAL_CHANGED="materialchanged",w$v.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",w$v.ANIMATION_CHANGED="animationchanged",w$v.TRIGGER_ENTER="triggerenter",w$v.TRIGGER_STAY="triggerstay",w$v.TRIGGER_EXIT="triggerexit",w$v.TRAIL_FILTER_CHANGE="trailfilterchange",w$v.DOMINO_FILTER_CHANGE="dominofilterchange",w$v}(),w$o=(function(){function w$v(){}w$_(w$v,"laya.events.Keyboard"),w$v.NUMBER_0=48,w$v.NUMBER_1=49,w$v.NUMBER_2=50,w$v.NUMBER_3=51,w$v.NUMBER_4=52,w$v.NUMBER_5=53,w$v.NUMBER_6=54,w$v.NUMBER_7=55,w$v.NUMBER_8=56,w$v.NUMBER_9=57,w$v.A=65,w$v.B=66,w$v.C=67,w$v.D=68,w$v.E=69,w$v.F=70,w$v.G=71,w$v.H=72,w$v.I=73,w$v.J=74,w$v.K=75,w$v.L=76,w$v.M=77,w$v.N=78,w$v.O=79,w$v.P=80,w$v.Q=81,w$v.R=82,w$v.S=83,w$v.T=84,w$v.U=85,w$v.V=86,w$v.W=87,w$v.X=88,w$v.Y=89,w$v.Z=90,w$v.F1=112,w$v.F2=113,w$v.F3=114,w$v.F4=115,w$v.F5=116,w$v.F6=117,w$v.F7=118,w$v.F8=119,w$v.F9=120,w$v.F10=121,w$v.F11=122,w$v.F12=123,w$v.F13=124,w$v.F14=125,w$v.F15=126,w$v.NUMPAD=21,w$v.NUMPAD_0=96,w$v.NUMPAD_1=97,w$v.NUMPAD_2=98,w$v.NUMPAD_3=99,w$v.NUMPAD_4=100,w$v.NUMPAD_5=101,w$v.NUMPAD_6=102,w$v.NUMPAD_7=103,w$v.NUMPAD_8=104,w$v.NUMPAD_9=105,w$v.NUMPAD_ADD=107,w$v.NUMPAD_DECIMAL=110,w$v.NUMPAD_DIVIDE=111,w$v.NUMPAD_ENTER=108,w$v.NUMPAD_MULTIPLY=106,w$v.NUMPAD_SUBTRACT=109,w$v.SEMICOLON=186,w$v.EQUAL=187,w$v.COMMA=188,w$v.MINUS=189,w$v.PERIOD=190,w$v.SLASH=191,w$v.BACKQUOTE=192,w$v.LEFTBRACKET=219,w$v.BACKSLASH=220,w$v.RIGHTBRACKET=221,w$v.QUOTE=222,w$v.ALTERNATE=18,w$v.BACKSPACE=8,w$v.CAPS_LOCK=20,w$v.COMMAND=15,w$v.CONTROL=17,w$v.DELETE=46,w$v.ENTER=13,w$v.ESCAPE=27,w$v.PAGE_UP=33,w$v.PAGE_DOWN=34,w$v.END=35,w$v.HOME=36,w$v.LEFT=37,w$v.UP=38,w$v.RIGHT=39,w$v.DOWN=40,w$v.SHIFT=16,w$v.SPACE=32,w$v.TAB=9,w$v.INSERT=45}(),function(){function w$x(){}return w$_(w$x,"laya.events.KeyBoardManager"),w$x.__init__=function(){w$x._addEvent("keydown"),w$x._addEvent("keypress"),w$x._addEvent("keyup")},w$x._addEvent=function(w$l){w$N.document.addEventListener(w$l,function(w$v){laya.events.KeyBoardManager._dispatch(w$v,w$l)},!0)},w$x._dispatch=function(w$v,w$l){if(w$x.enabled){w$x._event._stoped=!1,w$x._event.nativeEvent=w$v,w$x._event.keyCode=w$v.keyCode||w$v.which||w$v.charCode,"keydown"===w$l?w$x._pressKeys[w$x._event.keyCode]=!0:"keyup"===w$l&&(w$x._pressKeys[w$x._event.keyCode]=null);for(var w$L=w$H.stage.focus&&null!=w$H.stage.focus.event&&w$H.stage.focus.displayedInStage?w$H.stage.focus:w$H.stage,w$A=w$L;w$A;)w$A.event(w$l,w$x._event.setTo(w$l,w$A,w$L)),w$A=w$A.parent}},w$x.hasKeyDown=function(w$v){return w$x._pressKeys[w$v]},w$x._pressKeys={},w$x.enabled=!0,w$e(w$x,["_event",function(){return this._event=new w$m}]),w$x}()),w$c=(function(){function w$v(){}w$_(w$v,"laya.events.KeyLocation"),w$v.STANDARD=0,w$v.LEFT=1,w$v.RIGHT=2,w$v.NUM_PAD=3}(),function(){function w$$(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=w$N.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new w$m,this._matrix=new w$M,this._point=new w$g,this._rect=new w$T,this._prePoint=new w$g,this._curTouchID=NaN}w$_(w$$,"laya.events.MouseManager");var w$v=w$$.prototype;return w$v.__init__=function(w$v,w$l){var w$L=this;this._stage=w$v;var w$A=this,w$x=this._eventList;w$l.oncontextmenu=function(w$v){if(w$$.enabled)return!1},w$l.addEventListener("mousedown",function(w$v){w$$.enabled&&(w$N.onIE||w$v.preventDefault(),w$x.push(w$v),w$A.mouseDownTime=w$N.now())}),w$l.addEventListener("mouseup",function(w$v){w$$.enabled&&(w$v.preventDefault(),w$x.push(w$v),w$A.mouseDownTime=-w$N.now())},!0),w$l.addEventListener("mousemove",function(w$v){if(w$$.enabled){w$v.preventDefault();var w$l=w$N.now();if(w$l-w$A._lastMoveTimer<10)return;w$A._lastMoveTimer=w$l,w$x.push(w$v)}},!0),w$l.addEventListener("mouseout",function(w$v){w$$.enabled&&w$x.push(w$v)}),w$l.addEventListener("mouseover",function(w$v){w$$.enabled&&w$x.push(w$v)}),w$l.addEventListener("touchstart",function(w$v){w$$.enabled&&(w$x.push(w$v),w$$._isFirstTouch||w$fv.isInputting||w$v.preventDefault(),w$A.mouseDownTime=w$N.now())}),w$l.addEventListener("touchend",function(w$v){w$$.enabled?(w$$._isFirstTouch||w$fv.isInputting||w$v.preventDefault(),w$$._isFirstTouch=!1,w$x.push(w$v),w$A.mouseDownTime=-w$N.now()):w$L._curTouchID=NaN},!0),w$l.addEventListener("touchmove",function(w$v){w$$.enabled&&(w$v.preventDefault(),w$x.push(w$v))},!0),w$l.addEventListener("touchcancel",function(w$v){w$$.enabled?(w$v.preventDefault(),w$x.push(w$v)):w$L._curTouchID=NaN},!0),w$l.addEventListener("mousewheel",function(w$v){w$$.enabled&&w$x.push(w$v)}),w$l.addEventListener("DOMMouseScroll",function(w$v){w$$.enabled&&w$x.push(w$v)})},w$v.initEvent=function(w$v,w$l){var w$L;this._event._stoped=!1,this._event.nativeEvent=w$l||w$v,this._target=null,this._point.setTo(w$v.pageX||w$v.clientX,w$v.pageY||w$v.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=w$v.identifier||0,this._tTouchID=this._event.touchId,(w$L=w$d.I._event)._stoped=!1,w$L.nativeEvent=this._event.nativeEvent,w$L.touchId=this._event.touchId},w$v.checkMouseWheel=function(w$v){this._event.delta=w$v.wheelDelta?.025*w$v.wheelDelta:-w$v.detail;for(var w$l=w$d.I.getLastOvers(),w$L=0,w$A=w$l.length;w$L<w$A;w$L++){var w$x=w$l[w$L];w$x.event("mousewheel",this._event.setTo("mousewheel",w$x,this._target))}},w$v.onMouseMove=function(w$v){w$d.I.onMouseMove(w$v,this._tTouchID)},w$v.onMouseDown=function(w$v){if(w$fv.isInputting&&w$H.stage.focus&&w$H.stage.focus.focus&&!w$H.stage.focus.contains(this._target)){var w$l=w$H.stage.focus._tf||w$H.stage.focus,w$L=w$v._tf||w$v;w$L instanceof laya.display.Input&&w$L.multiline==w$l.multiline?w$l._focusOut():w$l.focus=!1}w$d.I.onMouseDown(w$v,this._tTouchID,this._isLeftMouse)},w$v.onMouseUp=function(w$v){w$d.I.onMouseUp(w$v,this._tTouchID,this._isLeftMouse)},w$v.check=function(w$v,w$l,w$L,w$A){this._point.setTo(w$l,w$L),w$v.fromParentPoint(this._point),w$l=this._point.x,w$L=this._point.y;var w$x=w$v.scrollRect;if(w$x&&(this._rect.setTo(w$x.x,w$x.y,w$x.width,w$x.height),!this._rect.contains(w$l,w$L)))return!1;if(!this.disableMouseEvent){if(w$v.hitTestPrior&&!w$v.mouseThrough&&!this.hitTest(w$v,w$l,w$L))return!1;for(var w$m=w$v._childs.length-1;-1<w$m;w$m--){var w$Z=w$v._childs[w$m];if(!w$Z.destroyed&&w$Z.mouseEnabled&&w$Z.visible&&this.check(w$Z,w$l,w$L,w$A))return!0}}var w$O=!(!w$v.hitTestPrior||w$v.mouseThrough||this.disableMouseEvent)||this.hitTest(w$v,w$l,w$L);return w$O?(this._target=w$v,w$A.call(this,w$v)):w$A===this.onMouseUp&&w$v===this._stage&&(this._target=this._stage,w$A.call(this,this._target)),w$O},w$v.hitTest=function(w$v,w$l,w$L){var w$A=!1;if(w$v.scrollRect&&(w$l-=w$v.scrollRect.x,w$L-=w$v.scrollRect.y),w$v.hitArea instanceof laya.utils.HitArea)return w$v.hitArea.isHit(w$l,w$L);if(0<w$v.width&&0<w$v.height||w$v.mouseThrough||w$v.hitArea)if(w$v.mouseThrough)w$A=w$v.getGraphicBounds().contains(w$l,w$L);else{var w$x=this._rect;w$v.hitArea?w$x=w$v.hitArea:w$x.setTo(0,0,w$v.width,w$v.height),w$A=w$x.contains(w$l,w$L)}return w$A},w$v.runEvent=function(){var w$v=this._eventList.length;if(w$v){this.mouseEventTime=w$N.now();var w$l,w$L=0,w$A=0,w$x=0;try{for(;w$L<w$v;){var w$m=this._eventList[w$L];switch("mousemove"!==w$m.type&&(this._prePoint.x=this._prePoint.y=-1e6),w$m.type){case"mousedown":this._touchIDs[0]=this._id++,w$$._isTouchRespond?w$$._isTouchRespond=!1:(this._isLeftMouse=0===w$m.button,this.initEvent(w$m),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===w$m.button,this.initEvent(w$m),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-w$m.clientX)+Math.abs(this._prePoint.y-w$m.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=w$m.clientX,this._prePoint.y=w$m.clientY,this.initEvent(w$m),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":w$$._isTouchRespond=!0,this._isLeftMouse=!0;var w$Z=w$m.changedTouches;for(w$A=0,w$x=w$Z.length;w$A<w$x;w$A++)w$l=w$Z[w$A],(w$$.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=w$l.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[w$l.identifier]=this._id++,this.initEvent(w$l,w$m),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":w$$._isTouchRespond=!0,this._isLeftMouse=!0;var w$O=w$m.changedTouches;for(w$A=0,w$x=w$O.length;w$A<w$x;w$A++)if(w$l=w$O[w$A],w$$.multiTouchEnabled||w$l.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(w$l,w$m);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var w$e=w$m.changedTouches;for(w$A=0,w$x=w$e.length;w$A<w$x;w$A++)w$l=w$e[w$A],(w$$.multiTouchEnabled||w$l.identifier==this._curTouchID)&&(this.initEvent(w$l,w$m),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(w$m);break;case"mouseout":w$d.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}w$L++}}catch(w$v){throw this._eventList.length=0,w$v}this._eventList.length=0}},w$$.enabled=!0,w$$.multiTouchEnabled=!0,w$$._isTouchRespond=!1,w$$._isFirstTouch=!0,w$e(w$$,["instance",function(){return this.instance=new w$$}]),w$$}()),w$d=function(){function w$G(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new w$m}w$_(w$G,"laya.events.TouchManager");var w$v=w$G.prototype;return w$v._clearTempArrs=function(){w$G._oldArr.length=0,w$G._newArr.length=0,w$G._tEleArr.length=0},w$v.getTouchFromArr=function(w$v,w$l){var w$L,w$A,w$x=0;for(w$L=w$l.length,w$x=0;w$x<w$L;w$x++)if((w$A=w$l[w$x]).id==w$v)return w$A;return null},w$v.removeTouchFromArr=function(w$v,w$l){var w$L=0;for(w$L=w$l.length-1;0<=w$L;w$L--)w$l[w$L].id==w$v&&w$l.splice(w$L,1)},w$v.createTouchO=function(w$v,w$l){var w$L;return(w$L=w$y.getItem("TouchData")||{}).id=w$l,w$L.tar=w$v,w$L},w$v.onMouseDown=function(w$v,w$l,w$L){var w$A,w$x,w$m,w$Z;(void 0===w$L&&(w$L=!1),this.enable)&&(w$A=this.getTouchFromArr(w$l,this.preOvers),w$m=this.getEles(w$v,null,w$G._tEleArr),w$A?w$A.tar=w$v:(w$x=this.createTouchO(w$v,w$l),this.preOvers.push(w$x)),w$N.onMobile&&this.sendEvents(w$m,"mouseover",w$l),w$Z=w$L?this.preDowns:this.preRightDowns,(w$A=this.getTouchFromArr(w$l,w$Z))?w$A.tar=w$v:(w$x=this.createTouchO(w$v,w$l),w$Z.push(w$x)),this.sendEvents(w$m,w$L?"mousedown":"rightmousedown",w$l),this._clearTempArrs())},w$v.sendEvents=function(w$v,w$l,w$L){void 0===w$L&&(w$L=0);var w$A,w$x,w$m,w$Z=0;for(w$A=w$v.length,this._event._stoped=!1,w$x=w$v[0],w$Z=0;w$Z<w$A;w$Z++){if((w$m=w$v[w$Z]).destroyed)return;if(w$m.event(w$l,this._event.setTo(w$l,w$m,w$x)),this._event._stoped)break}},w$v.getEles=function(w$v,w$l,w$L){for(w$L?w$L.length=0:w$L=[];w$v&&w$v!=w$l;)w$L.push(w$v),w$v=w$v.parent;return w$L},w$v.checkMouseOutAndOverOfMove=function(w$v,w$l,w$L){if(void 0===w$L&&(w$L=0),w$l!=w$v){var w$A,w$x,w$m=0,w$Z=0;if(w$l.contains(w$v))w$x=this.getEles(w$v,w$l,w$G._tEleArr),this.sendEvents(w$x,"mouseover",w$L);else if(w$v.contains(w$l))w$x=this.getEles(w$l,w$v,w$G._tEleArr),this.sendEvents(w$x,"mouseout",w$L);else{var w$O,w$e;(w$x=w$G._tEleArr).length=0,w$O=this.getEles(w$l,null,w$G._oldArr),w$e=this.getEles(w$v,null,w$G._newArr),w$Z=w$O.length;var w$$=0;for(w$m=0;w$m<w$Z;w$m++){if(w$A=w$O[w$m],0<=(w$$=w$e.indexOf(w$A))){w$e.splice(w$$,w$e.length-w$$);break}w$x.push(w$A)}0<w$x.length&&this.sendEvents(w$x,"mouseout",w$L),0<w$e.length&&this.sendEvents(w$e,"mouseover",w$L)}}},w$v.onMouseMove=function(w$v,w$l){var w$L,w$A;this.enable&&((w$L=this.getTouchFromArr(w$l,this.preOvers))?(this.checkMouseOutAndOverOfMove(w$v,w$L.tar),w$L.tar=w$v,w$A=this.getEles(w$v,null,w$G._tEleArr)):(w$A=this.getEles(w$v,null,w$G._tEleArr),this.sendEvents(w$A,"mouseover",w$l),this.preOvers.push(this.createTouchO(w$v,w$l))),this.sendEvents(w$A,"mousemove",w$l),this._clearTempArrs())},w$v.getLastOvers=function(){return(w$G._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,w$G._tEleArr):(w$G._tEleArr.push(w$H.stage),w$G._tEleArr)},w$v.stageMouseOut=function(){var w$v;w$v=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(w$v,"mouseout",0)},w$v.onMouseUp=function(w$v,w$l,w$L){if(void 0===w$L&&(w$L=!1),this.enable){var w$A,w$x,w$m,w$Z,w$O,w$e,w$$=0,w$_=0,w$o=w$N.onMobile;if(w$x=this.getEles(w$v,null,w$G._tEleArr),this.sendEvents(w$x,w$L?"mouseup":"rightmouseup",w$l),w$e=w$L?this.preDowns:this.preRightDowns,w$A=this.getTouchFromArr(w$l,w$e)){var w$K,w$r=w$N.now();if(w$K=w$r-this._lastClickTime<300,this._lastClickTime=w$r,w$v==w$A.tar)w$O=w$x;else for(w$m=this.getEles(w$A.tar,null,w$G._oldArr),(w$O=w$G._newArr).length=0,w$_=w$m.length,w$$=0;w$$<w$_;w$$++)w$Z=w$m[w$$],0<=w$x.indexOf(w$Z)&&w$O.push(w$Z);0<w$O.length&&this.sendEvents(w$O,w$L?"click":"rightclick",w$l),w$L&&w$K&&this.sendEvents(w$O,"doubleclick",w$l),this.removeTouchFromArr(w$l,w$e),w$A.tar=null,w$y.recover("TouchData",w$A)}else;(w$A=this.getTouchFromArr(w$l,this.preOvers))&&w$o&&((w$O=this.getEles(w$A.tar,null,w$O))&&0<w$O.length&&this.sendEvents(w$O,"mouseout",w$l),this.removeTouchFromArr(w$l,this.preOvers),w$A.tar=null,w$y.recover("TouchData",w$A)),this._clearTempArrs()}},w$G._oldArr=[],w$G._newArr=[],w$G._tEleArr=[],w$e(w$G,["I",function(){return this.I=new w$G}]),w$G}(),w$C=function(){function w$v(){this._action=null}w$_(w$v,"laya.filters.Filter");var w$l=w$v.prototype;return w$H.imps(w$l,{"laya.filters.IFilter":!0}),w$l.callNative=function(w$v){},w$G(0,w$l,"type",function(){return-1}),w$G(0,w$l,"action",function(){return this._action}),w$v.BLUR=16,w$v.COLOR=32,w$v.GLOW=8,w$v._filterStart=null,w$v._filterEnd=null,w$v._EndTarget=null,w$v._recycleScope=null,w$v._filter=null,w$v._useSrc=null,w$v._endSrc=null,w$v._useOut=null,w$v._endOut=null,w$v}(),w$B=function(){function w$v(){this.data=null}w$_(w$v,"laya.filters.ColorFilterAction");var w$l=w$v.prototype;return w$H.imps(w$l,{"laya.filters.IFilterAction":!0}),w$l.apply=function(w$v){var w$l=w$v.ctx.ctx,w$L=w$v.ctx.ctx.canvas;if(0==w$L.width||0==w$L.height)return w$L;for(var w$A,w$x=w$l.getImageData(0,0,w$L.width,w$L.height),w$m=w$x.data,w$Z=0,w$O=w$m.length;w$Z<w$O;w$Z+=4)w$A=this.getColor(w$m[w$Z],w$m[w$Z+1],w$m[w$Z+2],w$m[w$Z+3]),0!=w$m[w$Z+3]&&(w$m[w$Z]=w$A[0],w$m[w$Z+1]=w$A[1],w$m[w$Z+2]=w$A[2],w$m[w$Z+3]=w$A[3]);return w$l.putImageData(w$x,0,0),w$v},w$l.getColor=function(w$v,w$l,w$L,w$A){var w$x=[];if(this.data._mat&&this.data._alpha){var w$m=this.data._mat,w$Z=this.data._alpha;w$x[0]=w$m[0]*w$v+w$m[1]*w$l+w$m[2]*w$L+w$m[3]*w$A+w$Z[0],w$x[1]=w$m[4]*w$v+w$m[5]*w$l+w$m[6]*w$L+w$m[7]*w$A+w$Z[1],w$x[2]=w$m[8]*w$v+w$m[9]*w$l+w$m[10]*w$L+w$m[11]*w$A+w$Z[2],w$x[3]=w$m[12]*w$v+w$m[13]*w$l+w$m[14]*w$L+w$m[15]*w$A+w$Z[3]}return w$x},w$v}(),w$X=(function(){function w$v(){}w$_(w$v,"laya.maths.Arith"),w$v.formatR=function(w$v){return w$v>Math.PI&&(w$v-=2*Math.PI),w$v<-Math.PI&&(w$v+=2*Math.PI),w$v},w$v.isPOT=function(w$v,w$l){return 0<w$v&&0==(w$v&w$v-1)&&0<w$l&&0==(w$l&w$l-1)},w$v.setMatToArray=function(w$v,w$l){w$v.a,w$v.b,w$v.c,w$v.d,w$v.tx,w$v.ty,w$l[0]=w$v.a,w$l[1]=w$v.b,w$l[4]=w$v.c,w$l[5]=w$v.d,w$l[12]=w$v.tx,w$l[13]=w$v.ty}}(),function(){function w$v(){this._controlPoints=[new w$g,new w$g,new w$g],this._calFun=this.getPoint2}w$_(w$v,"laya.maths.Bezier");var w$l=w$v.prototype;return w$l._switchPoint=function(w$v,w$l){var w$L=this._controlPoints.shift();w$L.setTo(w$v,w$l),this._controlPoints.push(w$L)},w$l.getPoint2=function(w$v,w$l){var w$L=this._controlPoints[0],w$A=this._controlPoints[1],w$x=this._controlPoints[2],w$m=Math.pow(1-w$v,2)*w$L.x+2*w$v*(1-w$v)*w$A.x+Math.pow(w$v,2)*w$x.x,w$Z=Math.pow(1-w$v,2)*w$L.y+2*w$v*(1-w$v)*w$A.y+Math.pow(w$v,2)*w$x.y;w$l.push(w$m,w$Z)},w$l.getPoint3=function(w$v,w$l){var w$L=this._controlPoints[0],w$A=this._controlPoints[1],w$x=this._controlPoints[2],w$m=this._controlPoints[3],w$Z=Math.pow(1-w$v,3)*w$L.x+3*w$A.x*w$v*(1-w$v)*(1-w$v)+3*w$x.x*w$v*w$v*(1-w$v)+w$m.x*Math.pow(w$v,3),w$O=Math.pow(1-w$v,3)*w$L.y+3*w$A.y*w$v*(1-w$v)*(1-w$v)+3*w$x.y*w$v*w$v*(1-w$v)+w$m.y*Math.pow(w$v,3);w$l.push(w$Z,w$O)},w$l.insertPoints=function(w$v,w$l){var w$L,w$A=NaN;for(w$L=1/(w$v=0<w$v?w$v:5),w$A=0;w$A<=1;w$A+=w$L)this._calFun(w$A,w$l)},w$l.getBezierPoints=function(w$v,w$l,w$L){void 0===w$l&&(w$l=5),void 0===w$L&&(w$L=2);var w$A,w$x,w$m=0;if((w$A=w$v.length)<2*(w$L+1))return[];switch(w$x=[],w$L){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=w$L;)this._controlPoints.push(new w$g);for(w$m=0;w$m<2*w$L;w$m+=2)this._switchPoint(w$v[w$m],w$v[w$m+1]);for(w$m=2*w$L;w$m<w$A;w$m+=2)this._switchPoint(w$v[w$m],w$v[w$m+1]),w$m/2%w$L==0&&this.insertPoints(w$l,w$x);return w$x},w$e(w$v,["I",function(){return this.I=new w$v}]),w$v}()),w$f=function(){function w$$(){}return w$_(w$$,"laya.maths.GrahamScan"),w$$.multiply=function(w$v,w$l,w$L){return(w$v.x-w$L.x)*(w$l.y-w$L.y)-(w$l.x-w$L.x)*(w$v.y-w$L.y)},w$$.dis=function(w$v,w$l){return(w$v.x-w$l.x)*(w$v.x-w$l.x)+(w$v.y-w$l.y)*(w$v.y-w$l.y)},w$$._getPoints=function(w$v,w$l,w$L){for(void 0===w$l&&(w$l=!1),w$$._mPointList||(w$$._mPointList=[]);w$$._mPointList.length<w$v;)w$$._mPointList.push(new w$g);return w$L||(w$L=[]),w$L.length=0,w$l?w$$.getFrom(w$L,w$$._mPointList,w$v):w$$.getFromR(w$L,w$$._mPointList,w$v),w$L},w$$.getFrom=function(w$v,w$l,w$L){var w$A=0;for(w$A=0;w$A<w$L;w$A++)w$v.push(w$l[w$A]);return w$v},w$$.getFromR=function(w$v,w$l,w$L){var w$A=0;for(w$A=0;w$A<w$L;w$A++)w$v.push(w$l.pop());return w$v},w$$.pListToPointList=function(w$v,w$l){void 0===w$l&&(w$l=!1);var w$L=0,w$A=w$v.length/2,w$x=w$$._getPoints(w$A,w$l,w$$._tempPointList);for(w$L=0;w$L<w$A;w$L++)w$x[w$L].setTo(w$v[w$L+w$L],w$v[w$L+w$L+1]);return w$x},w$$.pointListToPlist=function(w$v){var w$l,w$L=0,w$A=w$v.length,w$x=w$$._temPList;for(w$L=w$x.length=0;w$L<w$A;w$L++)w$l=w$v[w$L],w$x.push(w$l.x,w$l.y);return w$x},w$$.scanPList=function(w$v){return w$i.copyArray(w$v,w$$.pointListToPlist(w$$.scan(w$$.pListToPointList(w$v,!0))))},w$$.scan=function(w$v){var w$l,w$L,w$A,w$x=0,w$m=0,w$Z=0,w$O=w$v.length,w$e={};for((w$L=w$$._temArr).length=0,w$x=(w$O=w$v.length)-1;0<=w$x;w$x--)w$A=(w$l=w$v[w$x]).x+"_"+w$l.y,w$e.hasOwnProperty(w$A)||(w$e[w$A]=!0,w$L.push(w$l));for(w$O=w$L.length,w$i.copyArray(w$v,w$L),w$x=1;w$x<w$O;w$x++)(w$v[w$x].y<w$v[w$Z].y||w$v[w$x].y==w$v[w$Z].y&&w$v[w$x].x<w$v[w$Z].x)&&(w$Z=w$x);for(w$l=w$v[0],w$v[0]=w$v[w$Z],w$v[w$Z]=w$l,w$x=1;w$x<w$O-1;w$x++){for(w$m=(w$Z=w$x)+1;w$m<w$O;w$m++)(0<w$$.multiply(w$v[w$m],w$v[w$Z],w$v[0])||0==w$$.multiply(w$v[w$m],w$v[w$Z],w$v[0])&&w$$.dis(w$v[0],w$v[w$m])<w$$.dis(w$v[0],w$v[w$Z]))&&(w$Z=w$m);w$l=w$v[w$x],w$v[w$x]=w$v[w$Z],w$v[w$Z]=w$l}if((w$L=w$$._temArr).length=0,w$v.length<3)return w$i.copyArray(w$L,w$v);for(w$L.push(w$v[0],w$v[1],w$v[2]),w$x=3;w$x<w$O;w$x++){for(;2<=w$L.length&&0<=w$$.multiply(w$v[w$x],w$L[w$L.length-1],w$L[w$L.length-2]);)w$L.pop();w$v[w$x]&&w$L.push(w$v[w$x])}return w$L},w$$._mPointList=null,w$$._tempPointList=[],w$$._temPList=[],w$$._temArr=[],w$$}(),w$w=function(){function w$x(){}return w$_(w$x,"laya.maths.MathUtil"),w$x.subtractVector3=function(w$v,w$l,w$L){w$L[0]=w$v[0]-w$l[0],w$L[1]=w$v[1]-w$l[1],w$L[2]=w$v[2]-w$l[2]},w$x.lerp=function(w$v,w$l,w$L){return w$v*(1-w$L)+w$l*w$L},w$x.scaleVector3=function(w$v,w$l,w$L){w$L[0]=w$v[0]*w$l,w$L[1]=w$v[1]*w$l,w$L[2]=w$v[2]*w$l},w$x.lerpVector3=function(w$v,w$l,w$L,w$A){var w$x=w$v[0],w$m=w$v[1],w$Z=w$v[2];w$A[0]=w$x+w$L*(w$l[0]-w$x),w$A[1]=w$m+w$L*(w$l[1]-w$m),w$A[2]=w$Z+w$L*(w$l[2]-w$Z)},w$x.lerpVector4=function(w$v,w$l,w$L,w$A){var w$x=w$v[0],w$m=w$v[1],w$Z=w$v[2],w$O=w$v[3];w$A[0]=w$x+w$L*(w$l[0]-w$x),w$A[1]=w$m+w$L*(w$l[1]-w$m),w$A[2]=w$Z+w$L*(w$l[2]-w$Z),w$A[3]=w$O+w$L*(w$l[3]-w$O)},w$x.slerpQuaternionArray=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){var w$O,w$e,w$$,w$_,w$o,w$K=w$v[w$l+0],w$r=w$v[w$l+1],w$G=w$v[w$l+2],w$c=w$v[w$l+3],w$d=w$L[w$A+0],w$C=w$L[w$A+1],w$J=w$L[w$A+2],w$B=w$L[w$A+3];return(w$e=w$K*w$d+w$r*w$C+w$G*w$J+w$c*w$B)<0&&(w$e=-w$e,w$d=-w$d,w$C=-w$C,w$J=-w$J,w$B=-w$B),w$o=1e-6<1-w$e?(w$O=Math.acos(w$e),w$$=Math.sin(w$O),w$_=Math.sin((1-w$x)*w$O)/w$$,Math.sin(w$x*w$O)/w$$):(w$_=1-w$x,w$x),w$m[w$Z+0]=w$_*w$K+w$o*w$d,w$m[w$Z+1]=w$_*w$r+w$o*w$C,w$m[w$Z+2]=w$_*w$G+w$o*w$J,w$m[w$Z+3]=w$_*w$c+w$o*w$B,w$m},w$x.getRotation=function(w$v,w$l,w$L,w$A){return Math.atan2(w$A-w$l,w$L-w$v)/Math.PI*180},w$x.sortBigFirst=function(w$v,w$l){return w$v==w$l?0:w$v<w$l?1:-1},w$x.sortSmallFirst=function(w$v,w$l){return w$v==w$l?0:w$v<w$l?-1:1},w$x.sortNumBigFirst=function(w$v,w$l){return parseFloat(w$l)-parseFloat(w$v)},w$x.sortNumSmallFirst=function(w$v,w$l){return parseFloat(w$v)-parseFloat(w$l)},w$x.sortByKey=function(w$L,w$v,w$l){var w$A;return void 0===w$v&&(w$v=!1),void 0===w$l&&(w$l=!0),w$A=w$v?w$l?w$x.sortNumBigFirst:w$x.sortBigFirst:w$l?w$x.sortNumSmallFirst:w$x.sortSmallFirst,function(w$v,w$l){return w$A(w$v[w$L],w$l[w$L])}},w$x}(),w$M=function(){function w$L(w$v,w$l,w$L,w$A,w$x,w$m){this.inPool=!1,this.bTransform=!1,void 0===w$v&&(w$v=1),void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0),void 0===w$A&&(w$A=1),void 0===w$x&&(w$x=0),void 0===w$m&&(w$m=0),this.a=w$v,this.b=w$l,this.c=w$L,this.d=w$A,this.tx=w$x,this.ty=w$m,this._checkTransform()}w$_(w$L,"laya.maths.Matrix");var w$v=w$L.prototype;return w$v.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},w$v._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},w$v.setTranslate=function(w$v,w$l){return this.tx=w$v,this.ty=w$l,this},w$v.translate=function(w$v,w$l){return this.tx+=w$v,this.ty+=w$l,this},w$v.scale=function(w$v,w$l){this.a*=w$v,this.d*=w$l,this.c*=w$v,this.b*=w$l,this.tx*=w$v,this.ty*=w$l,this.bTransform=!0},w$v.rotate=function(w$v){var w$l=Math.cos(w$v),w$L=Math.sin(w$v),w$A=this.a,w$x=this.c,w$m=this.tx;this.a=w$A*w$l-this.b*w$L,this.b=w$A*w$L+this.b*w$l,this.c=w$x*w$l-this.d*w$L,this.d=w$x*w$L+this.d*w$l,this.tx=w$m*w$l-this.ty*w$L,this.ty=w$m*w$L+this.ty*w$l,this.bTransform=!0},w$v.skew=function(w$v,w$l){var w$L=Math.tan(w$v),w$A=Math.tan(w$l),w$x=this.a,w$m=this.b;return this.a+=w$A*this.c,this.b+=w$A*this.d,this.c+=w$L*w$x,this.d+=w$L*w$m,this},w$v.invertTransformPoint=function(w$v){var w$l=this.a,w$L=this.b,w$A=this.c,w$x=this.d,w$m=this.tx,w$Z=w$l*w$x-w$L*w$A,w$O=w$x/w$Z,w$e=-w$L/w$Z,w$$=-w$A/w$Z,w$_=w$l/w$Z,w$o=(w$A*this.ty-w$x*w$m)/w$Z,w$K=-(w$l*this.ty-w$L*w$m)/w$Z;return w$v.setTo(w$O*w$v.x+w$$*w$v.y+w$o,w$e*w$v.x+w$_*w$v.y+w$K)},w$v.transformPoint=function(w$v){return w$v.setTo(this.a*w$v.x+this.c*w$v.y+this.tx,this.b*w$v.x+this.d*w$v.y+this.ty)},w$v.transformPointN=function(w$v){return w$v.setTo(this.a*w$v.x+this.c*w$v.y,this.b*w$v.x+this.d*w$v.y)},w$v.transformPointArray=function(w$v,w$l){for(var w$L=w$v.length,w$A=0;w$A<w$L;w$A+=2){var w$x=w$v[w$A],w$m=w$v[w$A+1];w$l[w$A]=this.a*w$x+this.c*w$m+this.tx,w$l[w$A+1]=this.b*w$x+this.d*w$m+this.ty}return w$l},w$v.transformPointArrayScale=function(w$v,w$l){for(var w$L=w$v.length,w$A=0;w$A<w$L;w$A+=2){var w$x=w$v[w$A],w$m=w$v[w$A+1];w$l[w$A]=this.a*w$x+this.c*w$m,w$l[w$A+1]=this.b*w$x+this.d*w$m}return w$l},w$v.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},w$v.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},w$v.invert=function(){var w$v=this.a,w$l=this.b,w$L=this.c,w$A=this.d,w$x=this.tx,w$m=w$v*w$A-w$l*w$L;return this.a=w$A/w$m,this.b=-w$l/w$m,this.c=-w$L/w$m,this.d=w$v/w$m,this.tx=(w$L*this.ty-w$A*w$x)/w$m,this.ty=-(w$v*this.ty-w$l*w$x)/w$m,this},w$v.setTo=function(w$v,w$l,w$L,w$A,w$x,w$m){return this.a=w$v,this.b=w$l,this.c=w$L,this.d=w$A,this.tx=w$x,this.ty=w$m,this},w$v.concat=function(w$v){var w$l=this.a,w$L=this.c,w$A=this.tx;return this.a=w$l*w$v.a+this.b*w$v.c,this.b=w$l*w$v.b+this.b*w$v.d,this.c=w$L*w$v.a+this.d*w$v.c,this.d=w$L*w$v.b+this.d*w$v.d,this.tx=w$A*w$v.a+this.ty*w$v.c+w$v.tx,this.ty=w$A*w$v.b+this.ty*w$v.d+w$v.ty,this},w$v.scaleEx=function(w$v,w$l){var w$L=this.a,w$A=this.b,w$x=this.c,w$m=this.d;0!==w$A||0!==w$x?(this.a=w$v*w$L,this.b=w$v*w$A,this.c=w$l*w$x):(this.a=w$v*w$L,this.b=0*w$m,this.c=0*w$L),this.d=w$l*w$m,this.bTransform=!0},w$v.rotateEx=function(w$v){var w$l=Math.cos(w$v),w$L=Math.sin(w$v),w$A=this.a,w$x=this.b,w$m=this.c,w$Z=this.d;0!==w$x||0!==w$m?(this.a=w$l*w$A+w$L*w$m,this.b=w$l*w$x+w$L*w$Z,this.c=-w$L*w$A+w$l*w$m,this.d=-w$L*w$x+w$l*w$Z):(this.a=w$l*w$A,this.b=w$L*w$Z,this.c=-w$L*w$A,this.d=w$l*w$Z),this.bTransform=!0},w$v.clone=function(){var w$v=w$L.create();return w$v.a=this.a,w$v.b=this.b,w$v.c=this.c,w$v.d=this.d,w$v.tx=this.tx,w$v.ty=this.ty,w$v.bTransform=this.bTransform,w$v},w$v.copyTo=function(w$v){return w$v.a=this.a,w$v.b=this.b,w$v.c=this.c,w$v.d=this.d,w$v.tx=this.tx,w$v.ty=this.ty,w$v.bTransform=this.bTransform,w$v},w$v.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},w$v.destroy=function(){if(!this.inPool){var w$v=w$L._cache;this.inPool=!0,w$v._length||(w$v._length=0),(w$v[w$v._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},w$L.mul=function(w$v,w$l,w$L){var w$A=w$v.a,w$x=w$v.b,w$m=w$v.c,w$Z=w$v.d,w$O=w$v.tx,w$e=w$v.ty,w$$=w$l.a,w$_=w$l.b,w$o=w$l.c,w$K=w$l.d,w$r=w$l.tx,w$G=w$l.ty;return 0!==w$_||0!==w$o?(w$L.a=w$A*w$$+w$x*w$o,w$L.b=w$A*w$_+w$x*w$K,w$L.c=w$m*w$$+w$Z*w$o,w$L.d=w$m*w$_+w$Z*w$K,w$L.tx=w$$*w$O+w$o*w$e+w$r,w$L.ty=w$_*w$O+w$K*w$e+w$G):(w$L.a=w$A*w$$,w$L.b=w$x*w$K,w$L.c=w$m*w$$,w$L.d=w$Z*w$K,w$L.tx=w$$*w$O+w$r,w$L.ty=w$K*w$e+w$G),w$L},w$L.mul16=function(w$v,w$l,w$L){var w$A=w$v.a,w$x=w$v.b,w$m=w$v.c,w$Z=w$v.d,w$O=w$v.tx,w$e=w$v.ty,w$$=w$l.a,w$_=w$l.b,w$o=w$l.c,w$K=w$l.d,w$r=w$l.tx,w$G=w$l.ty;return 0!==w$_||0!==w$o?(w$L[0]=w$A*w$$+w$x*w$o,w$L[1]=w$A*w$_+w$x*w$K,w$L[4]=w$m*w$$+w$Z*w$o,w$L[5]=w$m*w$_+w$Z*w$K,w$L[12]=w$$*w$O+w$o*w$e+w$r,w$L[13]=w$_*w$O+w$K*w$e+w$G):(w$L[0]=w$A*w$$,w$L[1]=w$x*w$K,w$L[4]=w$m*w$$,w$L[5]=w$Z*w$K,w$L[12]=w$$*w$O+w$r,w$L[13]=w$K*w$e+w$G),w$L},w$L.mulPre=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){var w$e=w$v.a,w$$=w$v.b,w$_=w$v.c,w$o=w$v.d,w$K=w$v.tx,w$r=w$v.ty;return 0!==w$L||0!==w$A?(w$O.a=w$e*w$l+w$$*w$A,w$O.b=w$e*w$L+w$$*w$x,w$O.c=w$_*w$l+w$o*w$A,w$O.d=w$_*w$L+w$o*w$x,w$O.tx=w$l*w$K+w$A*w$r+w$m,w$O.ty=w$L*w$K+w$x*w$r+w$Z):(w$O.a=w$e*w$l,w$O.b=w$$*w$x,w$O.c=w$_*w$l,w$O.d=w$o*w$x,w$O.tx=w$l*w$K+w$m,w$O.ty=w$x*w$r+w$Z),w$O},w$L.mulPos=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){var w$e=w$v.a,w$$=w$v.b,w$_=w$v.c,w$o=w$v.d,w$K=w$v.tx,w$r=w$v.ty;return 0!==w$$||0!==w$_?(w$O.a=w$l*w$e+w$L*w$_,w$O.b=w$l*w$$+w$L*w$o,w$O.c=w$A*w$e+w$x*w$_,w$O.d=w$A*w$$+w$x*w$o,w$O.tx=w$e*w$m+w$_*w$Z+w$K,w$O.ty=w$$*w$m+w$o*w$Z+w$r):(w$O.a=w$l*w$e,w$O.b=w$L*w$o,w$O.c=w$A*w$e,w$O.d=w$x*w$o,w$O.tx=w$e*w$m+w$K,w$O.ty=w$o*w$Z+w$r),w$O},w$L.preMul=function(w$v,w$l,w$L){var w$A=w$v.a,w$x=w$v.b,w$m=w$v.c,w$Z=w$v.d,w$O=w$l.a,w$e=w$l.b,w$$=w$l.c,w$_=w$l.d,w$o=w$l.tx,w$K=w$l.ty;return w$L.a=w$O*w$A,w$L.b=w$L.c=0,w$L.d=w$_*w$Z,w$L.tx=w$o*w$A+w$v.tx,w$L.ty=w$K*w$Z+w$v.ty,0===w$e&&0===w$$&&0===w$x&&0===w$m||(w$L.a+=w$e*w$m,w$L.d+=w$$*w$x,w$L.b+=w$O*w$x+w$e*w$Z,w$L.c+=w$$*w$A+w$_*w$m,w$L.tx+=w$K*w$m,w$L.ty+=w$o*w$x),w$L},w$L.preMulXY=function(w$v,w$l,w$L,w$A){var w$x=w$v.a,w$m=w$v.b,w$Z=w$v.c,w$O=w$v.d;return w$A.a=w$x,w$A.b=w$m,w$A.c=w$Z,w$A.d=w$O,w$A.tx=w$l*w$x+w$v.tx+w$L*w$Z,w$A.ty=w$L*w$O+w$v.ty+w$l*w$m,w$A},w$L.create=function(){var w$v=w$L._cache,w$l=w$v._length?w$v[--w$v._length]:new w$L;return w$l.inPool=!1,w$l},w$L.EMPTY=new w$L,w$L.TEMP=new w$L,w$L._cache=[],w$L}(),w$g=function(){function w$v(w$v,w$l){void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=0),this.x=w$v,this.y=w$l}w$_(w$v,"laya.maths.Point");var w$l=w$v.prototype;return w$l.setTo=function(w$v,w$l){return this.x=w$v,this.y=w$l,this},w$l.distance=function(w$v,w$l){return Math.sqrt((this.x-w$v)*(this.x-w$v)+(this.y-w$l)*(this.y-w$l))},w$l.toString=function(){return this.x+","+this.y},w$l.normalize=function(){var w$v=Math.sqrt(this.x*this.x+this.y*this.y);if(0<w$v){var w$l=1/w$v;this.x*=w$l,this.y*=w$l}},w$v.TEMP=new w$v,w$v.EMPTY=new w$v,w$v}(),w$T=function(){function w$$(w$v,w$l,w$L,w$A){void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0),void 0===w$A&&(w$A=0),this.x=w$v,this.y=w$l,this.width=w$L,this.height=w$A}w$_(w$$,"laya.maths.Rectangle");var w$v=w$$.prototype;return w$v.setTo=function(w$v,w$l,w$L,w$A){return this.x=w$v,this.y=w$l,this.width=w$L,this.height=w$A,this},w$v.copyFrom=function(w$v){return this.x=w$v.x,this.y=w$v.y,this.width=w$v.width,this.height=w$v.height,this},w$v.contains=function(w$v,w$l){return!(this.width<=0||this.height<=0)&&(w$v>=this.x&&w$v<this.right&&w$l>=this.y&&w$l<this.bottom)},w$v.intersects=function(w$v){return!(w$v.x>this.x+this.width||w$v.x+w$v.width<this.x||w$v.y>this.y+this.height||w$v.y+w$v.height<this.y)},w$v.intersection=function(w$v,w$l){return this.intersects(w$v)?(w$l||(w$l=new w$$),w$l.x=Math.max(this.x,w$v.x),w$l.y=Math.max(this.y,w$v.y),w$l.width=Math.min(this.right,w$v.right)-w$l.x,w$l.height=Math.min(this.bottom,w$v.bottom)-w$l.y,w$l):null},w$v.union=function(w$v,w$l){return w$l||(w$l=new w$$),this.clone(w$l),w$v.width<=0||w$v.height<=0?w$l:(w$l.addPoint(w$v.x,w$v.y),w$l.addPoint(w$v.right,w$v.bottom),this)},w$v.clone=function(w$v){return w$v||(w$v=new w$$),w$v.x=this.x,w$v.y=this.y,w$v.width=this.width,w$v.height=this.height,w$v},w$v.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},w$v.equals=function(w$v){return!(!w$v||w$v.x!==this.x||w$v.y!==this.y||w$v.width!==this.width||w$v.height!==this.height)},w$v.addPoint=function(w$v,w$l){return this.x>w$v&&(this.width+=this.x-w$v,this.x=w$v),this.y>w$l&&(this.height+=this.y-w$l,this.y=w$l),this.width<w$v-this.x&&(this.width=w$v-this.x),this.height<w$l-this.y&&(this.height=w$l-this.y),this},w$v._getBoundPoints=function(){var w$v=w$$._temB;return(w$v.length=0)==this.width||0==this.height||w$v.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),w$v},w$v.isEmpty=function(){return this.width<=0||this.height<=0},w$G(0,w$v,"right",function(){return this.x+this.width}),w$G(0,w$v,"bottom",function(){return this.y+this.height}),w$$._getBoundPointS=function(w$v,w$l,w$L,w$A){var w$x=w$$._temA;return(w$x.length=0)==w$L||0==w$A||w$x.push(w$v,w$l,w$v+w$L,w$l,w$v,w$l+w$A,w$v+w$L,w$l+w$A),w$x},w$$._getWrapRec=function(w$v,w$l){if(!w$v||w$v.length<1)return w$l?w$l.setTo(0,0,0,0):w$$.TEMP.setTo(0,0,0,0);w$l=w$l||new w$$;var w$L,w$A,w$x,w$m,w$Z,w$O=w$v.length,w$e=w$g.TEMP;for(w$x=w$Z=-(w$A=w$m=99999),w$L=0;w$L<w$O;w$L+=2)w$e.x=w$v[w$L],w$e.y=w$v[w$L+1],w$A=w$A<w$e.x?w$A:w$e.x,w$m=w$m<w$e.y?w$m:w$e.y,w$x=w$x>w$e.x?w$x:w$e.x,w$Z=w$Z>w$e.y?w$Z:w$e.y;return w$l.setTo(w$A,w$m,w$x-w$A,w$Z-w$m)},w$$.EMPTY=new w$$,w$$.TEMP=new w$$,w$$._temB=[],w$$._temA=[],w$$}(),w$k=function(){function w$e(){}return w$_(w$e,"laya.media.SoundManager"),w$G(1,w$e,"useAudioMusic",function(){return w$e._useAudioMusic},function(w$v){w$e._useAudioMusic=w$v,w$e._musicClass=w$v?w$Lv:null}),w$G(1,w$e,"autoStopMusic",function(){return w$e._autoStopMusic},function(w$v){w$H.stage.off("blur",null,w$e._stageOnBlur),w$H.stage.off("focus",null,w$e._stageOnFocus),w$H.stage.off("visibilitychange",null,w$e._visibilityChange),(w$e._autoStopMusic=w$v)&&(w$H.stage.on("blur",null,w$e._stageOnBlur),w$H.stage.on("focus",null,w$e._stageOnFocus),w$H.stage.on("visibilitychange",null,w$e._visibilityChange))}),w$G(1,w$e,"muted",function(){return w$e._muted},function(w$v){w$v!=w$e._muted&&(w$v&&w$e.stopAllSound(),w$e.musicMuted=w$v,w$e._muted=w$v)}),w$G(1,w$e,"musicMuted",function(){return w$e._musicMuted},function(w$v){w$v!=w$e._musicMuted&&(w$v?(w$e._tMusic&&w$e._musicChannel&&!w$e._musicChannel.isStopped?w$e._musicChannel.pause():w$e._musicChannel=null,w$e._musicMuted=w$v):(w$e._musicMuted=w$v,w$e._tMusic&&w$e._musicChannel&&w$e._musicChannel.resume()))}),w$G(1,w$e,"soundMuted",function(){return w$e._soundMuted},function(w$v){w$e._soundMuted=w$v}),w$e.addChannel=function(w$v){0<=w$e._channels.indexOf(w$v)||(w$e._channels.push(w$v),w$e.autoReleaseSound&&0!=w$e._notUsedCount&&w$e._notUsedUrls[w$v.url]&&(delete w$e._notUsedUrls[w$v.url],0==--w$e._notUsedCount&&w$H.timer.clear(w$e,w$e.disposeSoundIfNotUsed)))},w$e.removeChannel=function(w$v){var w$l=w$e._channels,w$L=w$l.indexOf(w$v);if(-1!=w$L&&(w$l.splice(w$L,1),w$e.autoReleaseSound)){var w$A=w$v.url,w$x=w$e.defaultIntervals[w$A]||2e4;if(0<w$x){var w$m=!0;for(w$L=w$l.length-1;0<=w$L;w$L--)if(w$l[w$L].url==w$A){w$m=!1;break}w$m&&(w$e._notUsedUrls[w$A]=Date.now()+w$x,0==w$e._notUsedCount++&&w$H.timer.loop(1e4,w$e,w$e.disposeSoundIfNotUsed))}}},w$e.disposeSoundIfNotUsed=function(){var w$v=w$e._notUsedUrls;if(0!=w$e._notUsedCount){var w$l=Date.now();for(var w$L in w$v)w$l>=w$v[w$L]&&(delete w$v[w$L],--w$e._notUsedCount,w$e.destroySound(w$L));if(0!=w$e._notUsedCount)return}w$H.timer.clear(w$e,w$e.disposeSoundIfNotUsed)},w$e._visibilityChange=function(){w$H.stage.isVisibility?w$e._stageOnFocus():w$e._stageOnBlur()},w$e._stageOnBlur=function(){w$e._isActive=!1,w$e._musicChannel&&(w$e._musicChannel.isStopped||(w$e._blurPaused=!0,w$e._musicChannel.pause())),w$e.stopAllSound(),w$H.stage.once("mousedown",null,w$e._stageOnFocus)},w$e._recoverWebAudio=function(){w$mv.ctx&&"running"!=w$mv.ctx.state&&w$mv.ctx.resume&&w$mv.ctx.resume()},w$e._stageOnFocus=function(){if(w$e._isActive=!0,w$e._recoverWebAudio(),w$H.stage.off("mousedown",null,w$e._stageOnFocus),w$e._blurPaused){var w$v=w$e._musicChannel;w$v&&w$e._music&&w$v.isStopped&&(w$e._blurPaused=!1,w$e._music._disposed?w$e.playMusic(w$v.url,w$v.loops,w$v.startHandler,w$v.completeHandler,w$v.startTime):w$v.audioBuffer?w$v.resume():w$e._music.play(w$v.startTime,w$v.loops,w$v.startHandler,w$v))}},w$e.playSound=function(w$v,w$l,w$L,w$A,w$x,w$m){if(void 0===w$l&&(w$l=1),void 0===w$m&&(w$m=0),!w$v)return null;if(w$e._muted)return null;if(w$e._recoverWebAudio(),w$v==w$e._tMusic){if(w$e._musicMuted)return null}else{if(!w$e._isActive)return null;if(w$e._soundMuted)return null}var w$Z,w$O=w$e._pool[w$v];return w$x||(w$x=w$e._soundClass),w$O||((w$O=new w$x).load(w$v),w$e._pool[w$v]=w$O),(w$Z=w$O.play(w$m,w$l,w$L))?(w$v==w$e._tMusic&&(w$e._music=w$O,w$e._isActive||(w$e._blurPaused=!0,w$Z.pause())),w$Z.url=w$v,w$Z.volume=w$v==w$e._tMusic?w$e.musicVolume:w$e.soundVolume,w$Z.completeHandler=w$A,w$Z):null},w$e.destroySound=function(w$v){var w$l=w$e._pool[w$v];w$l&&(delete w$e._pool[w$v],w$l.dispose())},w$e.playMusic=function(w$v,w$l,w$L,w$A,w$x){return void 0===w$l&&(w$l=0),void 0===w$x&&(w$x=0),w$e._tMusic=w$v,w$e._musicChannel&&w$e._musicChannel.stop(),w$e._musicChannel=w$e.playSound(w$v,w$l,w$L,w$A,null,w$x)},w$e.stopSound=function(w$v){for(var w$l,w$L=w$e._channels.length-1;0<=w$L;w$L--)(w$l=w$e._channels[w$L]).url==w$v&&w$l.stop()},w$e.stopAll=function(){w$e._tMusic=null;var w$v=0;for(w$v=w$e._channels.length-1;0<=w$v;w$v--)w$e._channels[w$v].stop()},w$e.stopAllSound=function(){var w$v,w$l=0;for(w$l=w$e._channels.length-1;0<=w$l;w$l--)(w$v=w$e._channels[w$l]).url!=w$e._tMusic&&w$v.stop()},w$e.stopMusic=function(){w$e._musicChannel&&w$e._musicChannel.stop(),w$e._tMusic=null},w$e.setSoundVolume=function(w$v,w$l){if(w$l)w$e._setVolume(w$l,w$v);else{w$e.soundVolume=w$v;var w$L,w$A=0;for(w$A=w$e._channels.length-1;0<=w$A;w$A--)(w$L=w$e._channels[w$A]).url!=w$e._tMusic&&(w$L.volume=w$v)}},w$e.setMusicVolume=function(w$v){w$e.musicVolume=w$v,w$e._setVolume(w$e._tMusic,w$v)},w$e._setVolume=function(w$v,w$l){for(var w$L,w$A=w$e._channels.length-1;0<=w$A;w$A--)(w$L=w$e._channels[w$A]).url==w$v&&(w$L.volume=w$l)},w$e.musicVolume=1,w$e.soundVolume=1,w$e.playbackRate=1,w$e._useAudioMusic=!0,w$e._muted=!1,w$e._soundMuted=!1,w$e._musicMuted=!1,w$e._tMusic=null,w$e._musicChannel=null,w$e._music=null,w$e._channels=[],w$e._autoStopMusic=!1,w$e._blurPaused=!1,w$e._isActive=!0,w$e._soundClass=null,w$e._musicClass=null,w$e.autoReleaseSound=!0,w$e._pool={},w$e.defaultIntervals={},w$e._notUsedUrls={},w$e._notUsedCount=0,w$e}(),w$h=function(){var w$v;function w$L(){}return w$_(w$L,"laya.net.LocalStorage"),w$L.__init__=function(){w$L._baseClass||(w$L._baseClass=w$v).init(),w$L.items=w$L._baseClass.items,w$L.support=w$L._baseClass.support},w$L.setItem=function(w$v,w$l){w$L._baseClass.setItem(w$v,w$l)},w$L.getItem=function(w$v){return w$L._baseClass.getItem(w$v)},w$L.setJSON=function(w$v,w$l){w$L._baseClass.setJSON(w$v,w$l)},w$L.getJSON=function(w$v){return w$L._baseClass.getJSON(w$v)},w$L.removeItem=function(w$v){w$L._baseClass.removeItem(w$v)},w$L.clear=function(){w$L._baseClass.clear()},w$L._baseClass=null,w$L.items=null,w$L.support=!1,w$L.__init$=function(){w$v=function(){function w$L(){}return w$_(w$L,""),w$L.init=function(){try{w$L.support=!0,w$L.items=w$Z.localStorage,w$L.setItem("laya","1"),w$L.removeItem("laya")}catch(w$v){w$L.support=!1}w$L.support||console.log("LocalStorage is not supprot or browser is private mode.")},w$L.setItem=function(w$v,w$l){try{w$L.support&&w$L.items.setItem(w$v,w$l)}catch(w$v){console.warn("set localStorage failed",w$v)}},w$L.getItem=function(w$v){return w$L.support?w$L.items.getItem(w$v):null},w$L.setJSON=function(w$v,w$l){try{w$L.support&&w$L.items.setItem(w$v,JSON.stringify(w$l))}catch(w$v){console.warn("set localStorage failed",w$v)}},w$L.getJSON=function(w$v){return JSON.parse(w$L.support?w$L.items.getItem(w$v):null)},w$L.removeItem=function(w$v){w$L.support&&w$L.items.removeItem(w$v)},w$L.clear=function(){w$L.support&&w$L.items.clear()},w$L.items=null,w$L.support=!1,w$L}()},w$L}(),w$P=(function(){function w$A(){}w$_(w$A,"laya.net.ResourceVersion"),w$A.enable=function(w$v,w$l,w$L){void 0===w$L&&(w$L=2),laya.net.ResourceVersion.type=w$L,w$H.loader.load(w$v,w$J.create(null,w$A.onManifestLoaded,[w$l]),null,"json"),w$I.customFormat=w$A.addVersionPrefix},w$A.onManifestLoaded=function(w$v,w$l){w$A.manifest=w$l,w$v.run(),w$l||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},w$A.addVersionPrefix=function(w$v){return w$A.manifest&&w$A.manifest[w$v]?2==w$A.type?w$A.manifest[w$v]:w$A.manifest[w$v]+"/"+w$v:w$v},w$A.FOLDER_VERSION=1,w$A.FILENAME_VERSION=2,w$A.manifest=null,w$A.type=1}(),function(){function w$v(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}w$_(w$v,"laya.net.TTFLoader");var w$l=w$v.prototype;return w$l.load=function(w$v){var w$l=(this._url=w$v).split(".ttf")[0].split("/");this.fontName=w$l[w$l.length-1],w$N.window.conch?this._loadConch():w$N.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},w$l._loadConch=function(){this._http=new w$Zv,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},w$l._onHttpLoaded=function(w$v){w$N.window.conch.setFontFaceFromBuffer(this.fontName,w$v),this._clearHttp(),this._complete()},w$l._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},w$l._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},w$l._complete=function(){w$H.timer.clear(this,this._complete),w$H.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},w$l._checkComplete=function(){w$Q.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},w$l._loadWithFontFace=function(){var w$v=new w$N.window.FontFace(this.fontName,"url('"+this._url+"')");w$N.window.document.fonts.add(w$v);var w$l=this;w$v.loaded.then(function(){w$l._complete()}),w$v.load()},w$l._createDiv=function(){this._div=w$N.createElement("div"),this._div.innerHTML="laya";var w$v=this._div.style;w$v.fontFamily=this.fontName,w$v.position="absolute",w$v.left="-100px",w$v.top="-100px",w$N.document.body.appendChild(this._div)},w$l._loadWithCSS=function(){var w$v=this,w$l=w$N.createElement("style");w$l.type="text/css",w$N.document.body.appendChild(w$l),w$l.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=w$Q.measureText("LayaTTFFont",this._fontTxt).width;var w$L=this;w$l.onload=function(){w$H.timer.once(1e4,w$L,w$v._complete)},w$H.timer.loop(20,this,this._checkComplete),this._createDiv()},w$v._testString="LayaTTFFont",w$v}()),w$I=function(){function w$A(w$v){this._url=null,this._path=null,this._url=w$A.formatURL(w$v),this._path=w$A.getPath(w$v)}w$_(w$A,"laya.net.URL");var w$v=w$A.prototype;return w$G(0,w$v,"path",function(){return this._path}),w$G(0,w$v,"url",function(){return this._url}),w$A.formatURL=function(w$v,w$l){if(!w$v)return"null path";if(0<w$v.indexOf(":"))return w$v;null!=w$A.customFormat&&(w$v=w$A.customFormat(w$v,w$l));var w$L=w$v.charAt(0);if("."===w$L)return w$A.formatRelativePath((w$l||w$A.basePath)+w$v);if("~"===w$L)return w$A.rootPath+w$v.substring(1);if("d"===w$L){if(0===w$v.indexOf("data:image"))return w$v}else if("/"===w$L)return w$v;return(w$l||w$A.basePath)+w$v},w$A.formatRelativePath=function(w$v){for(var w$l=w$v.split("/"),w$L=0,w$A=w$l.length;w$L<w$A;w$L++)".."==w$l[w$L]&&(w$l.splice(w$L-1,2),w$L-=2);return w$l.join("/")},w$A.isAbsolute=function(w$v){return 0<w$v.indexOf(":")||"/"==w$v.charAt(0)},w$A.getPath=function(w$v){var w$l=w$v.lastIndexOf("/");return 0<w$l?w$v.substr(0,w$l+1):""},w$A.getFileName=function(w$v){var w$l=w$v.lastIndexOf("/");return 0<w$l?w$v.substr(w$l+1):w$v},w$A.version={},w$A.basePath="",w$A.rootPath="",w$A.customFormat=function(w$v){var w$l=w$A.version[w$v];return!w$t.isConchApp&&w$l&&(w$v+="?v="+w$l),w$v},w$A}(),w$t=function(){function w$x(w$v,w$l){this._timeId=0;var w$L=w$x._mainCanvas.source.style;w$L.position="absolute",w$L.top=w$L.left="0px",w$L.background="#000000",w$x._mainCanvas.source.id="layaCanvas";var w$A=laya.renders.Render.isWebGL;w$x._mainCanvas.source.width=w$v,w$x._mainCanvas.source.height=w$l,w$A&&w$x.WebGL.init(w$x._mainCanvas,w$v,w$l),w$N.container.appendChild(w$x._mainCanvas.source),(w$x._context=new w$a(w$v,w$l,w$A?null:w$x._mainCanvas)).ctx.setIsMainContext(),w$N.window.requestAnimationFrame(function w$v(w$l){w$N.window.requestAnimationFrame(w$v);w$H.stage._loop()}),w$H.stage.on("visibilitychange",this,this._onVisibilitychange)}w$_(w$x,"laya.renders.Render");var w$v=w$x.prototype;return w$v._onVisibilitychange=function(){w$H.stage.isVisibility?0!=this._timeId&&w$N.window.clearInterval(this._timeId):this._timeId=w$N.window.setInterval(this._enterFrame,1e3)},w$v._enterFrame=function(w$v){w$H.stage._loop()},w$G(1,w$x,"context",function(){return w$x._context}),w$G(1,w$x,"canvas",function(){return w$x._mainCanvas.source}),w$x._context=null,w$x._mainCanvas=null,w$x.WebGL=null,w$x.isConchNode=!1,w$x.isConchApp=!1,w$x.isConchWebGL=!1,w$x.isWebGL=!1,w$x.is3DMode=!1,w$x.optimizeTextureMemory=function(w$v,w$l){return!0},w$x.__init$=function(){w$Z.ConchRenderType=w$Z.ConchRenderType||1,w$Z.ConchRenderType|=w$Z.conch?4:0,w$x.isConchNode=5==(5&w$Z.ConchRenderType),w$x.isConchApp=4==(4&w$Z.ConchRenderType),w$x.isConchWebGL=6==w$Z.ConchRenderType},w$x}(),w$a=function(){function w$Z(w$v,w$l,w$L){this.x=0,this.y=0,this._drawTexture=function(w$v,w$l,w$L){w$L[0].loaded&&this.ctx.drawTexture(w$L[0],w$L[1],w$L[2],w$L[3],w$L[4],w$v,w$l)},this._fillTexture=function(w$v,w$l,w$L){w$L[0].loaded&&this.ctx.fillTexture(w$L[0],w$L[1]+w$v,w$L[2]+w$l,w$L[3],w$L[4],w$L[5],w$L[6],w$L[7])},this._drawTextureWithTransform=function(w$v,w$l,w$L){w$L[0].loaded&&this.ctx.drawTextureWithTransform(w$L[0],w$L[1],w$L[2],w$L[3],w$L[4],w$L[5],w$v,w$l,w$L[6])},this._fillQuadrangle=function(w$v,w$l,w$L){this.ctx.fillQuadrangle(w$L[0],w$L[1],w$L[2],w$L[3],w$L[4])},this._drawRect=function(w$v,w$l,w$L){var w$A=this.ctx;null!=w$L[4]&&(w$A.fillStyle=w$L[4],w$A.fillRect(w$v+w$L[0],w$l+w$L[1],w$L[2],w$L[3],null)),null!=w$L[5]&&(w$A.strokeStyle=w$L[5],w$A.lineWidth=w$L[6],w$A.strokeRect(w$v+w$L[0],w$l+w$L[1],w$L[2],w$L[3],w$L[6]))},this._drawPie=function(w$v,w$l,w$L){var w$A=this.ctx;w$t.isWebGL&&w$A.setPathId(w$L[8]),w$A.beginPath(),w$t.isWebGL?(w$A.movePath(w$L[0]+w$v,w$L[1]+w$l),w$A.moveTo(0,0)):w$A.moveTo(w$v+w$L[0],w$l+w$L[1]),w$A.arc(w$v+w$L[0],w$l+w$L[1],w$L[2],w$L[3],w$L[4]),w$A.closePath(),this._fillAndStroke(w$L[5],w$L[6],w$L[7],!0)},this._clipRect=function(w$v,w$l,w$L){this.ctx.clipRect(w$v+w$L[0],w$l+w$L[1],w$L[2],w$L[3])},this._fillRect=function(w$v,w$l,w$L){this.ctx.fillRect(w$v+w$L[0],w$l+w$L[1],w$L[2],w$L[3],w$L[4])},this._drawCircle=function(w$v,w$l,w$L){var w$A=this.ctx;w$t.isWebGL&&w$A.setPathId(w$L[6]),w$W.drawCall++,w$A.beginPath(),w$t.isWebGL&&w$A.movePath(w$L[0]+w$v,w$L[1]+w$l),w$A.arc(w$L[0]+w$v,w$L[1]+w$l,w$L[2],0,w$Z.PI2),w$A.closePath(),this._fillAndStroke(w$L[3],w$L[4],w$L[5],!0)},this._fillCircle=function(w$v,w$l,w$L){w$W.drawCall++;var w$A=this.ctx;w$A.beginPath(),w$A.fillStyle=w$L[3],w$A.arc(w$L[0]+w$v,w$L[1]+w$l,w$L[2],0,w$Z.PI2),w$A.fill()},this._setShader=function(w$v,w$l,w$L){this.ctx.setShader(w$L[0])},this._drawLine=function(w$v,w$l,w$L){var w$A=this.ctx;w$t.isWebGL&&w$A.setPathId(w$L[6]),w$A.beginPath(),w$A.strokeStyle=w$L[4],w$A.lineWidth=w$L[5],w$t.isWebGL?(w$A.movePath(w$v,w$l),w$A.moveTo(w$L[0],w$L[1]),w$A.lineTo(w$L[2],w$L[3])):(w$A.moveTo(w$v+w$L[0],w$l+w$L[1]),w$A.lineTo(w$v+w$L[2],w$l+w$L[3])),w$A.stroke()},this._drawLines=function(w$v,w$l,w$L){var w$A=this.ctx;w$t.isWebGL&&w$A.setPathId(w$L[5]),w$A.beginPath(),w$v+=w$L[0],w$l+=w$L[1],w$t.isWebGL&&w$A.movePath(w$v,w$l),w$A.strokeStyle=w$L[3],w$A.lineWidth=w$L[4];var w$x=w$L[2],w$m=2,w$Z=w$x.length;if(w$t.isWebGL)for(w$A.moveTo(w$x[0],w$x[1]);w$m<w$Z;)w$A.lineTo(w$x[w$m++],w$x[w$m++]);else for(w$A.moveTo(w$v+w$x[0],w$l+w$x[1]);w$m<w$Z;)w$A.lineTo(w$v+w$x[w$m++],w$l+w$x[w$m++]);w$A.stroke()},this._drawLinesWebGL=function(w$v,w$l,w$L){this.ctx.drawLines(w$v+this.x+w$L[0],w$l+this.y+w$L[1],w$L[2],w$L[3],w$L[4])},this._drawCurves=function(w$v,w$l,w$L){this.ctx.drawCurves(w$v,w$l,w$L)},this._draw=function(w$v,w$l,w$L){w$L[0].call(null,this,w$v,w$l)},this._transformByMatrix=function(w$v,w$l,w$L){this.ctx.transformByMatrix(w$L[0])},this._setTransform=function(w$v,w$l,w$L){this.ctx.setTransform(w$L[0],w$L[1],w$L[2],w$L[3],w$L[4],w$L[5])},this._setTransformByMatrix=function(w$v,w$l,w$L){this.ctx.setTransformByMatrix(w$L[0])},this._save=function(w$v,w$l,w$L){this.ctx.save()},this._restore=function(w$v,w$l,w$L){this.ctx.restore()},this._translate=function(w$v,w$l,w$L){this.ctx.translate(w$L[0],w$L[1])},this._transform=function(w$v,w$l,w$L){this.ctx.translate(w$L[1]+w$v,w$L[2]+w$l);var w$A=w$L[0];this.ctx.transform(w$A.a,w$A.b,w$A.c,w$A.d,w$A.tx,w$A.ty),this.ctx.translate(-w$v-w$L[1],-w$l-w$L[2])},this._rotate=function(w$v,w$l,w$L){this.ctx.translate(w$L[1]+w$v,w$L[2]+w$l),this.ctx.rotate(w$L[0]),this.ctx.translate(-w$v-w$L[1],-w$l-w$L[2])},this._scale=function(w$v,w$l,w$L){this.ctx.translate(w$L[2]+w$v,w$L[3]+w$l),this.ctx.scale(w$L[0],w$L[1]),this.ctx.translate(-w$v-w$L[2],-w$l-w$L[3])},this._alpha=function(w$v,w$l,w$L){this.ctx.globalAlpha*=w$L[0]},this._setAlpha=function(w$v,w$l,w$L){this.ctx.globalAlpha=w$L[0]},this._fillText=function(w$v,w$l,w$L){this.ctx.fillText(w$L[0],w$L[1]+w$v,w$L[2]+w$l,w$L[3],w$L[4],w$L[5])},this._strokeText=function(w$v,w$l,w$L){this.ctx.strokeText(w$L[0],w$L[1]+w$v,w$L[2]+w$l,w$L[3],w$L[4],w$L[5],w$L[6])},this._fillBorderText=function(w$v,w$l,w$L){this.ctx.fillBorderText(w$L[0],w$L[1]+w$v,w$L[2]+w$l,w$L[3],w$L[4],w$L[5],w$L[6],w$L[7])},this._blendMode=function(w$v,w$l,w$L){this.ctx.globalCompositeOperation=w$L[0]},this._beginClip=function(w$v,w$l,w$L){this.ctx.beginClip&&this.ctx.beginClip(w$v+w$L[0],w$l+w$L[1],w$L[2],w$L[3])},this._setIBVB=function(w$v,w$l,w$L){this.ctx.setIBVB(w$L[0]+w$v,w$L[1]+w$l,w$L[2],w$L[3],w$L[4],w$L[5],w$L[6],w$L[7])},this._fillTrangles=function(w$v,w$l,w$L){this.ctx.fillTrangles(w$L[0],w$L[1]+w$v,w$L[2]+w$l,w$L[3],w$L[4])},this._drawPath=function(w$v,w$l,w$L){var w$A=this.ctx;w$t.isWebGL&&w$A.setPathId(-1),w$A.beginPath(),w$v+=w$L[0],w$l+=w$L[1],w$t.isWebGL&&w$A.movePath(w$v,w$l);for(var w$x=w$L[2],w$m=0,w$Z=w$x.length;w$m<w$Z;w$m++){var w$O=w$x[w$m];switch(w$O[0]){case"moveTo":w$t.isWebGL?w$A.moveTo(w$O[1],w$O[2]):w$A.moveTo(w$v+w$O[1],w$l+w$O[2]);break;case"lineTo":w$t.isWebGL?w$A.lineTo(w$O[1],w$O[2]):w$A.lineTo(w$v+w$O[1],w$l+w$O[2]);break;case"arcTo":w$t.isWebGL?w$A.arcTo(w$O[1],w$O[2],w$O[3],w$O[4],w$O[5]):w$A.arcTo(w$v+w$O[1],w$l+w$O[2],w$v+w$O[3],w$l+w$O[4],w$O[5]);break;case"closePath":w$A.closePath()}}var w$e=w$L[3];null!=w$e&&(w$A.fillStyle=w$e.fillStyle,w$A.fill());var w$$=w$L[4];null!=w$$&&(w$A.strokeStyle=w$$.strokeStyle,w$A.lineWidth=w$$.lineWidth||1,w$A.lineJoin=w$$.lineJoin,w$A.lineCap=w$$.lineCap,w$A.miterLimit=w$$.miterLimit,w$A.stroke())},this.drawPoly=function(w$v,w$l,w$L){this.ctx.drawPoly(w$v+this.x+w$L[0],w$l+this.y+w$L[1],w$L[2],w$L[3],w$L[4],w$L[5],w$L[6])},this._drawPoly=function(w$v,w$l,w$L){var w$A=this.ctx,w$x=w$L[2],w$m=2,w$Z=w$x.length;if(w$t.isWebGL)for(w$A.setPathId(w$L[6]),w$A.beginPath(),w$v+=w$L[0],w$l+=w$L[1],w$A.movePath(w$v,w$l),w$A.moveTo(w$x[0],w$x[1]);w$m<w$Z;)w$A.lineTo(w$x[w$m++],w$x[w$m++]);else for(w$A.beginPath(),w$v+=w$L[0],w$l+=w$L[1],w$A.moveTo(w$v+w$x[0],w$l+w$x[1]);w$m<w$Z;)w$A.lineTo(w$v+w$x[w$m++],w$l+w$x[w$m++]);w$A.closePath(),this._fillAndStroke(w$L[3],w$L[4],w$L[5],w$L[7])},this._drawSkin=function(w$v,w$l,w$L){var w$A=w$L[0];if(w$A){var w$x=this.ctx;w$A.render(w$x,w$v,w$l)}},this._drawParticle=function(w$v,w$l,w$L){this.ctx.drawParticle(w$v+this.x,w$l+this.y,w$L[0])},this._setFilters=function(w$v,w$l,w$L){this.ctx.setFilters(w$L)},w$L?this.ctx=w$L.getContext("2d"):(w$L=w$Bv.create("3D"),this.ctx=w$Q.createWebGLContext2D(w$L),w$L._setContext(this.ctx)),w$L.size(w$v,w$l),this.canvas=w$L}w$_(w$Z,"laya.renders.RenderContext");var w$v=w$Z.prototype;return w$v.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},w$v.drawTexture=function(w$v,w$l,w$L,w$A,w$x){w$v.loaded&&this.ctx.drawTexture(w$v,w$l,w$L,w$A,w$x,this.x,this.y)},w$v._drawTextures=function(w$v,w$l,w$L){w$L[0].loaded&&this.ctx.drawTextures(w$L[0],w$L[1],w$v+this.x,w$l+this.y)},w$v.drawTextureWithTransform=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){w$v.loaded&&this.ctx.drawTextureWithTransform(w$v,w$l,w$L,w$A,w$x,w$m,this.x,this.y,w$Z)},w$v.fillQuadrangle=function(w$v,w$l,w$L,w$A,w$x){this.ctx.fillQuadrangle(w$v,w$l,w$L,w$A,w$x)},w$v.drawCanvas=function(w$v,w$l,w$L,w$A,w$x){this.ctx.drawCanvas(w$v,w$l+this.x,w$L+this.y,w$A,w$x)},w$v.drawRect=function(w$v,w$l,w$L,w$A,w$x,w$m){void 0===w$m&&(w$m=1);var w$Z=this.ctx;w$Z.strokeStyle=w$x,w$Z.lineWidth=w$m,w$Z.strokeRect(w$v+this.x,w$l+this.y,w$L,w$A,w$m)},w$v._fillAndStroke=function(w$v,w$l,w$L,w$A){void 0===w$A&&(w$A=!1);var w$x=this.ctx;null!=w$v&&(w$x.fillStyle=w$v,w$t.isWebGL?w$x.fill(w$A):w$x.fill()),null!=w$l&&0<w$L&&(w$x.strokeStyle=w$l,w$x.lineWidth=w$L,w$x.stroke())},w$v.clipRect=function(w$v,w$l,w$L,w$A){this.ctx.clipRect(w$v+this.x,w$l+this.y,w$L,w$A)},w$v.fillRect=function(w$v,w$l,w$L,w$A,w$x){this.ctx.fillRect(w$v+this.x,w$l+this.y,w$L,w$A,w$x)},w$v.drawCircle=function(w$v,w$l,w$L,w$A,w$x){void 0===w$x&&(w$x=1),w$W.drawCall++;var w$m=this.ctx;w$m.beginPath(),w$m.strokeStyle=w$A,w$m.lineWidth=w$x,w$m.arc(w$v+this.x,w$l+this.y,w$L,0,w$Z.PI2),w$m.stroke()},w$v.drawTriangles=function(w$v,w$l,w$L){if(w$t.isWebGL)this.ctx.drawTriangles(w$L[0],w$v+w$L[1],w$l+w$L[2],w$L[3],w$L[4],w$L[5],w$L[6],w$L[7],w$L[8],w$L[9]);else{var w$A=w$L[5],w$x=0,w$m=w$A.length,w$Z=this.ctx;for(w$x=0;w$x<w$m;w$x+=3){var w$O=2*w$A[w$x],w$e=2*w$A[w$x+1],w$$=2*w$A[w$x+2];w$Z.drawTriangle(w$L[0],w$L[3],w$L[4],w$O,w$e,w$$,w$L[6],!0)}}},w$v.fillCircle=function(w$v,w$l,w$L,w$A){w$W.drawCall++;var w$x=this.ctx;w$x.beginPath(),w$x.fillStyle=w$A,w$x.arc(w$v+this.x,w$l+this.y,w$L,0,w$Z.PI2),w$x.fill()},w$v.setShader=function(w$v){this.ctx.setShader(w$v)},w$v.drawLine=function(w$v,w$l,w$L,w$A,w$x,w$m){void 0===w$m&&(w$m=1);var w$Z=this.ctx;w$Z.beginPath(),w$Z.strokeStyle=w$x,w$Z.lineWidth=w$m,w$Z.moveTo(this.x+w$v,this.y+w$l),w$Z.lineTo(this.x+w$L,this.y+w$A),w$Z.stroke()},w$v.clear=function(){this.ctx.clear()},w$v.transformByMatrix=function(w$v){this.ctx.transformByMatrix(w$v)},w$v.setTransform=function(w$v,w$l,w$L,w$A,w$x,w$m){this.ctx.setTransform(w$v,w$l,w$L,w$A,w$x,w$m)},w$v.setTransformByMatrix=function(w$v){this.ctx.setTransformByMatrix(w$v)},w$v.save=function(){this.ctx.save()},w$v.restore=function(){this.ctx.restore()},w$v.translate=function(w$v,w$l){this.ctx.translate(w$v,w$l)},w$v.transform=function(w$v,w$l,w$L,w$A,w$x,w$m){this.ctx.transform(w$v,w$l,w$L,w$A,w$x,w$m)},w$v.rotate=function(w$v){this.ctx.rotate(w$v)},w$v.scale=function(w$v,w$l){this.ctx.scale(w$v,w$l)},w$v.alpha=function(w$v){this.ctx.globalAlpha*=w$v},w$v.setAlpha=function(w$v){this.ctx.globalAlpha=w$v},w$v.fillWords=function(w$v,w$l,w$L,w$A,w$x,w$m){void 0===w$m&&(w$m=0),this.ctx.fillWords(w$v,w$l,w$L,w$A,w$x,w$m)},w$v.fillBorderWords=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){this.ctx.fillBorderWords(w$v,w$l,w$L,w$A,w$x,w$m,w$Z)},w$v.fillText=function(w$v,w$l,w$L,w$A,w$x,w$m){this.ctx.fillText(w$v,w$l+this.x,w$L+this.y,w$A,w$x,w$m)},w$v.strokeText=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){this.ctx.strokeText(w$v,w$l+this.x,w$L+this.y,w$A,w$x,w$m,w$Z)},w$v.blendMode=function(w$v){this.ctx.globalCompositeOperation=w$v},w$v.flush=function(){this.ctx.flush&&this.ctx.flush()},w$v.addRenderObject=function(w$v){this.ctx.addRenderObject(w$v)},w$v.beginClip=function(w$v,w$l,w$L,w$A){this.ctx.beginClip&&this.ctx.beginClip(w$v,w$l,w$L,w$A)},w$v.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},w$v.fillTrangles=function(w$v,w$l,w$L){this.ctx.fillTrangles(w$L[0],w$L[1],w$L[2],w$L[3],4<w$L.length?w$L[4]:null)},w$Z.PI2=2*Math.PI,w$Z}(),w$q=function(){function w$Z(w$v,w$l){switch(this._next=w$l||w$Z.NORENDER,w$v){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=w$C._filter);case 69905:return void(this._fun=w$Z._initRenderFun)}this.onCreate(w$v)}w$_(w$Z,"laya.renders.RenderSprite");var w$v=w$Z.prototype;return w$v.onCreate=function(w$v){},w$v._style=function(w$v,w$l,w$L,w$A){w$v._style.render(w$v,w$l,w$L,w$A);var w$x=this._next;w$x._fun.call(w$x,w$v,w$l,w$L,w$A)},w$v._no=function(w$v,w$l,w$L,w$A){},w$v._custom=function(w$v,w$l,w$L,w$A){w$v.customRender(w$l,w$L,w$A);var w$x=w$v._style._tf;this._next._fun.call(this._next,w$v,w$l,w$L-w$x.translateX,w$A-w$x.translateY)},w$v._clip=function(w$v,w$l,w$L,w$A){var w$x=this._next;if(w$x!=w$Z.NORENDER){var w$m=w$v._style.scrollRect;w$l.ctx.save(),w$l.ctx.clipRect(w$L,w$A,w$m.width,w$m.height),w$x._fun.call(w$x,w$v,w$l,w$L-w$m.x,w$A-w$m.y),w$l.ctx.restore()}},w$v._blend=function(w$v,w$l,w$L,w$A){var w$x=w$v._style;w$x.blendMode&&(w$l.ctx.globalCompositeOperation=w$x.blendMode);var w$m=this._next;w$m._fun.call(w$m,w$v,w$l,w$L,w$A),w$l.ctx.globalCompositeOperation="source-over"},w$v._mask=function(w$v,w$l,w$L,w$A){var w$x=this._next;w$x._fun.call(w$x,w$v,w$l,w$L,w$A);var w$m=w$v.mask;w$m&&(w$l.ctx.globalCompositeOperation="destination-in",(0<w$m.numChildren||!w$m.graphics._isOnlyOne())&&(w$m.cacheAsBitmap=!0),w$m.render(w$l,w$L-w$v.pivotX,w$A-w$v.pivotY)),w$l.ctx.globalCompositeOperation="source-over"},w$v._graphics=function(w$v,w$l,w$L,w$A){var w$x=w$v._style._tf;w$v._graphics&&w$v._graphics._render(w$v,w$l,w$L-w$x.translateX,w$A-w$x.translateY);var w$m=this._next;w$m._fun.call(w$m,w$v,w$l,w$L,w$A)},w$v._image=function(w$v,w$l,w$L,w$A){var w$x=w$v._style;w$l.ctx.drawTexture2(w$L,w$A,w$x._tf.translateX,w$x._tf.translateY,w$v.transform,w$x.alpha,w$x.blendMode,w$v._graphics._one)},w$v._image2=function(w$v,w$l,w$L,w$A){var w$x=w$v._style._tf;w$l.ctx.drawTexture2(w$L,w$A,w$x.translateX,w$x.translateY,w$v.transform,1,null,w$v._graphics._one)},w$v._alpha=function(w$v,w$l,w$L,w$A){var w$x;if(.01<(w$x=w$v._style.alpha)||w$v._needRepaint()){var w$m=w$l.ctx.globalAlpha;w$l.ctx.globalAlpha*=w$x;var w$Z=this._next;w$Z._fun.call(w$Z,w$v,w$l,w$L,w$A),w$l.ctx.globalAlpha=w$m}},w$v._transform=function(w$v,w$l,w$L,w$A){var w$x=w$v.transform,w$m=this._next;w$x&&w$m!=w$Z.NORENDER?(w$l.save(),w$l.transform(w$x.a,w$x.b,w$x.c,w$x.d,w$x.tx+w$L,w$x.ty+w$A),w$m._fun.call(w$m,w$v,w$l,0,0),w$l.restore()):w$m._fun.call(w$m,w$v,w$l,w$L,w$A)},w$v._childs=function(w$v,w$l,w$L,w$A){var w$x=w$v._style,w$m=w$x._tf;if(w$L=w$L-w$m.translateX+w$x.paddingLeft,w$A=w$A-w$m.translateY+w$x.paddingTop,w$x._calculation){var w$Z=w$v._getWords();if(w$Z){var w$O=w$x;w$O&&(w$O.stroke?w$l.fillBorderWords(w$Z,w$L,w$A,w$O.font,w$O.color,w$O.strokeColor,w$O.stroke):w$l.fillWords(w$Z,w$L,w$A,w$O.font,w$O.color,"none"!=w$O.textDecoration&&w$O.underLine?1:0))}}var w$e,w$$=w$v._childs,w$_=w$$.length;if(w$v.viewport||w$v.optimizeScrollRect&&w$v._style.scrollRect){var w$o=w$v.viewport||w$v._style.scrollRect,w$K=w$o.x,w$r=w$o.y,w$G=w$o.right,w$c=w$o.bottom,w$d=NaN,w$C=NaN;for(w$J=0;w$J<w$_;++w$J)(w$e=w$$[w$J]).visible&&(w$d=w$e._x)<w$G&&w$d+w$e.width>w$K&&(w$C=w$e._y)<w$c&&w$C+w$e.height>w$r&&w$e.render(w$l,w$L,w$A)}else for(var w$J=0;w$J<w$_;++w$J)(w$e=w$$[w$J])._style.visible&&w$e.render(w$l,w$L,w$A)},w$v._canvas=function(w$v,w$l,w$L,w$A){var w$x=w$v._$P.cacheCanvas;if(w$x){"bitmap"===w$x.type?w$W.canvasBitmap++:w$W.canvasNormal++;var w$m=w$x.ctx;if(w$v._needRepaint()||!w$m)this._canvas_repaint(w$v,w$l,w$L,w$A);else{var w$Z=w$x._cacheRec;w$l.drawCanvas(w$m.canvas,w$L+w$Z.x,w$A+w$Z.y,w$Z.width,w$Z.height)}}else this._next._fun.call(this._next,w$v,w$l,w$L,w$A)},w$v._canvas_repaint=function(w$v,w$l,w$L,w$A){var w$x=w$v._$P.cacheCanvas,w$m=this._next;if(w$x){var w$Z,w$O,w$e,w$$,w$_=w$x.ctx,w$o=w$v._needRepaint()||!w$_,w$K=w$x.type;if("bitmap"===w$K?w$W.canvasBitmap++:w$W.canvasNormal++,w$o){var w$r,w$G;w$x._cacheRec||(w$x._cacheRec=new w$T),w$t.isWebGL&&"bitmap"!==w$K?w$x._cacheRec.setTo(-w$v.pivotX,-w$v.pivotY,1,1):((w$$=w$v.getSelfBounds()).x=w$$.x-w$v.pivotX,w$$.y=w$$.y-w$v.pivotY,w$$.x=w$$.x-16,w$$.y=w$$.y-16,w$$.width=w$$.width+32,w$$.height=w$$.height+32,w$$.x=Math.floor(w$$.x+w$L)-w$L,w$$.y=Math.floor(w$$.y+w$A)-w$A,w$$.width=Math.floor(w$$.width),w$$.height=Math.floor(w$$.height),w$x._cacheRec.copyFrom(w$$)),w$$=w$x._cacheRec;var w$c,w$d=w$t.isWebGL?1:w$N.pixelRatio*w$H.stage.clientScaleX,w$C=w$t.isWebGL?1:w$N.pixelRatio*w$H.stage.clientScaleY;if(!w$t.isWebGL){var w$J,w$B=1,w$X=1;for(w$J=w$v;w$J&&w$J!=w$H.stage;)w$B*=w$J.scaleX,w$X*=w$J.scaleY,w$J=w$J.parent;w$t.isWebGL?(w$B<1&&(w$d*=w$B),w$X<1&&(w$C*=w$X)):(1<w$B&&(w$d*=w$B),1<w$X&&(w$C*=w$X))}if(w$v.scrollRect){var w$f=w$v.scrollRect;w$$.x-=w$f.x,w$$.y-=w$f.y}if(w$r=w$$.width*w$d,w$G=w$$.height*w$C,w$O=w$$.x,w$e=w$$.y,w$t.isWebGL&&"bitmap"===w$K&&(2048<w$r||2048<w$G))return console.warn("cache bitmap size larger than 2048,cache ignored"),w$x.ctx&&(w$y.recover("RenderContext",w$x.ctx),w$x.ctx.canvas.size(0,0),w$x.ctx=null),void w$m._fun.call(w$m,w$v,w$l,w$L,w$A);if(w$_||(w$_=w$x.ctx=w$y.getItem("RenderContext")||new w$a(w$r,w$G,w$Bv.create("AUTO"))),w$_.ctx.sprite=w$v,(w$Z=w$_.canvas).clear(),(w$Z.width!=w$r||w$Z.height!=w$G)&&w$Z.size(w$r,w$G),"bitmap"===w$K?w$Z.context.asBitmap=!0:"normal"===w$K&&(w$Z.context.asBitmap=!1),1!=w$d||1!=w$C){var w$w=w$_.ctx;w$w.save(),w$w.scale(w$d,w$C),!w$t.isConchWebGL&&w$t.isConchApp&&(w$c=w$v._$P.cf)&&w$w.setFilterMatrix&&w$w.setFilterMatrix(w$c._mat,w$c._alpha),w$m._fun.call(w$m,w$v,w$_,-w$O,-w$e),w$w.restore(),w$t.isConchApp&&!w$t.isConchWebGL||w$v._applyFilters()}else w$w=w$_.ctx,!w$t.isConchWebGL&&w$t.isConchApp&&(w$c=w$v._$P.cf)&&w$w.setFilterMatrix&&w$w.setFilterMatrix(w$c._mat,w$c._alpha),w$m._fun.call(w$m,w$v,w$_,-w$O,-w$e),w$t.isConchApp&&!w$t.isConchWebGL||w$v._applyFilters();w$v._$P.staticCache&&(w$x.reCache=!1),w$W.canvasReCache++}else w$O=(w$$=w$x._cacheRec).x,w$e=w$$.y,w$Z=w$_.canvas;w$l.drawCanvas(w$Z,w$L+w$O,w$A+w$e,w$$.width,w$$.height)}else w$m._fun.call(w$m,w$v,w$_,w$L,w$A)},w$Z.__init__=function(){var w$v,w$l,w$L=0;for(w$l=w$Q.createRenderSprite(69905,null),w$v=w$Z.renders.length=4096,w$L=0;w$L<w$v;w$L++)w$Z.renders[w$L]=w$l;w$Z.renders[0]=w$Q.createRenderSprite(0,null),function(w$v,w$l){for(var w$L=0,w$A=0;w$A<w$v.length;w$A++)w$L|=w$v[w$A],w$Z.renders[w$L]=w$l}([1,512,4,2],new w$Z(1,null)),w$Z.renders[513]=w$Q.createRenderSprite(513,null),w$Z.renders[517]=new w$Z(517,null)},w$Z._initRenderFun=function(w$v,w$l,w$L,w$A){var w$x=w$v._renderType;(w$Z.renders[w$x]=w$Z._getTypeRender(w$x))._fun(w$v,w$l,w$L,w$A)},w$Z._getTypeRender=function(w$v){for(var w$l=null,w$L=2048;1<w$L;)w$L&w$v&&(w$l=w$Q.createRenderSprite(w$L,w$l)),w$L>>=1;return w$l},w$Z.IMAGE=1,w$Z.ALPHA=2,w$Z.TRANSFORM=4,w$Z.BLEND=8,w$Z.CANVAS=16,w$Z.FILTERS=32,w$Z.MASK=64,w$Z.CLIP=128,w$Z.STYLE=256,w$Z.GRAPHICS=512,w$Z.CUSTOM=1024,w$Z.CHILDS=2048,w$Z.INIT=69905,w$Z.renders=[],w$Z.NORENDER=new w$Z(0,null),w$Z}(),w$u=function(){function w$O(){this._repaint=!1}w$_(w$O,"laya.resource.Context");var w$v=w$O.prototype;return w$v.replaceReset=function(){var w$v,w$l,w$L=0;for(w$v=w$O.replaceKeys.length,w$L=0;w$L<w$v;w$L++)w$l=w$O.replaceKeys[w$L],this[w$O.newKeys[w$L]]=this[w$l]},w$v.replaceResotre=function(){this.__restore(),this.__reset()},w$v.setIsMainContext=function(){},w$v.drawTextures=function(w$v,w$l,w$L,w$A){w$W.drawCall+=w$l.length/2;for(var w$x=w$v.width,w$m=w$v.height,w$Z=0,w$O=w$l.length;w$Z<w$O;w$Z+=2)this.drawTexture(w$v,w$l[w$Z],w$l[w$Z+1],w$x,w$m,w$L,w$A)},w$v.drawCanvas=function(w$v,w$l,w$L,w$A,w$x){w$W.drawCall++,this.drawImage(w$v.source,w$l,w$L,w$A,w$x)},w$v.fillRect=function(w$v,w$l,w$L,w$A,w$x){w$W.drawCall++,w$x&&(this.fillStyle=w$x),this.__fillRect(w$v,w$l,w$L,w$A)},w$v.fillText=function(w$v,w$l,w$L,w$A,w$x,w$m){w$W.drawCall++,3<arguments.length&&null!=w$A&&(this.font=w$A,this.fillStyle=w$x,this.textAlign=w$m,this.textBaseline="top"),this.__fillText(w$v,w$l,w$L)},w$v.fillBorderText=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){w$W.drawCall++,this.font=w$A,this.fillStyle=w$x,this.textBaseline="top",this.strokeStyle=w$m,this.lineWidth=w$Z,this.textAlign=w$O,this.__strokeText(w$v,w$l,w$L),this.__fillText(w$v,w$l,w$L)},w$v.strokeText=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){w$W.drawCall++,3<arguments.length&&null!=w$A&&(this.font=w$A,this.strokeStyle=w$x,this.lineWidth=w$m,this.textAlign=w$Z,this.textBaseline="top"),this.__strokeText(w$v,w$l,w$L)},w$v.transformByMatrix=function(w$v){this.transform(w$v.a,w$v.b,w$v.c,w$v.d,w$v.tx,w$v.ty)},w$v.setTransformByMatrix=function(w$v){this.setTransform(w$v.a,w$v.b,w$v.c,w$v.d,w$v.tx,w$v.ty)},w$v.clipRect=function(w$v,w$l,w$L,w$A){w$W.drawCall++,this.beginPath(),this.rect(w$v,w$l,w$L,w$A),this.clip()},w$v.drawTexture=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){w$W.drawCall++;var w$O=w$v.uv,w$e=w$v.bitmap.width,w$$=w$v.bitmap.height;this.drawImage(w$v.source,w$O[0]*w$e,w$O[1]*w$$,(w$O[2]-w$O[0])*w$e,(w$O[5]-w$O[3])*w$$,w$l+w$m,w$L+w$Z,w$A,w$x)},w$v.drawTextureWithTransform=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e){w$W.drawCall++;var w$$=w$v.uv,w$_=w$v.bitmap.width,w$o=w$v.bitmap.height;this.save(),1!=w$e&&(this.globalAlpha*=w$e),w$m?(this.transform(w$m.a,w$m.b,w$m.c,w$m.d,w$m.tx+w$Z,w$m.ty+w$O),this.drawImage(w$v.source,w$$[0]*w$_,w$$[1]*w$o,(w$$[2]-w$$[0])*w$_,(w$$[5]-w$$[3])*w$o,w$l,w$L,w$A,w$x)):this.drawImage(w$v.source,w$$[0]*w$_,w$$[1]*w$o,(w$$[2]-w$$[0])*w$_,(w$$[5]-w$$[3])*w$o,w$l+w$Z,w$L+w$O,w$A,w$x),this.restore()},w$v.drawTexture2=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){var w$e=w$O[0];if(w$e.loaded&&w$e.bitmap&&w$e.source){w$W.drawCall++;var w$$=1!==w$m;if(w$$){var w$_=this.globalAlpha;this.globalAlpha*=w$m}var w$o=w$e.uv,w$K=w$e.bitmap.width,w$r=w$e.bitmap.height;w$x?(this.save(),this.transform(w$x.a,w$x.b,w$x.c,w$x.d,w$x.tx+w$v,w$x.ty+w$l),this.drawImage(w$e.source,w$o[0]*w$K,w$o[1]*w$r,(w$o[2]-w$o[0])*w$K,(w$o[5]-w$o[3])*w$r,w$O[1]-w$L,w$O[2]-w$A,w$O[3],w$O[4]),this.restore()):this.drawImage(w$e.source,w$o[0]*w$K,w$o[1]*w$r,(w$o[2]-w$o[0])*w$K,(w$o[5]-w$o[3])*w$r,w$O[1]-w$L+w$v,w$O[2]-w$A+w$l,w$O[3],w$O[4]),w$$&&(this.globalAlpha=w$_)}},w$v.fillTexture=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){if(!w$O.pat){if(w$v.uv!=w$_v.DEF_UV){var w$e=new w$Bv("2D");w$e.getContext("2d"),w$e.size(w$v.width,w$v.height),w$e.context.drawTexture(w$v,0,0,w$v.width,w$v.height,0,0),w$v=new w$_v(w$e)}w$O.pat=this.createPattern(w$v.bitmap.source,w$m)}var w$$=w$l,w$_=w$L,w$o=0,w$K=0;w$Z&&(w$$+=w$Z.x%w$v.width,w$_+=w$Z.y%w$v.height,w$o-=w$Z.x%w$v.width,w$K-=w$Z.y%w$v.height),this.translate(w$$,w$_),this.fillRect(w$o,w$K,w$A,w$x,w$O.pat),this.translate(-w$$,-w$_)},w$v.drawTriangle=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){var w$e=w$v.bitmap,w$$=w$e.source,w$_=w$v.width,w$o=w$v.height,w$K=w$e.width,w$r=w$e.height,w$G=w$L[w$A]*w$K,w$c=w$L[w$x]*w$K,w$d=w$L[w$m]*w$K,w$C=w$L[w$A+1]*w$r,w$J=w$L[w$x+1]*w$r,w$B=w$L[w$m+1]*w$r,w$X=w$l[w$A],w$f=w$l[w$x],w$w=w$l[w$m],w$H=w$l[w$A+1],w$g=w$l[w$x+1],w$T=w$l[w$m+1];if(w$O){var w$h=(w$X+w$f+w$w)/3,w$V=(w$H+w$g+w$T)/3,w$k=w$X-w$h,w$Q=w$H-w$V,w$M=Math.sqrt(w$k*w$k+w$Q*w$Q);w$X=w$h+w$k/w$M*(w$M+1),w$H=w$V+w$Q/w$M*(w$M+1),w$Q=w$g-w$V,w$f=w$h+(w$k=w$f-w$h)/(w$M=Math.sqrt(w$k*w$k+w$Q*w$Q))*(w$M+1),w$g=w$V+w$Q/w$M*(w$M+1),w$Q=w$T-w$V,w$w=w$h+(w$k=w$w-w$h)/(w$M=Math.sqrt(w$k*w$k+w$Q*w$Q))*(w$M+1),w$T=w$V+w$Q/w$M*(w$M+1)}this.save(),w$Z&&this.transform(w$Z.a,w$Z.b,w$Z.c,w$Z.d,w$Z.tx,w$Z.ty),this.beginPath(),this.moveTo(w$X,w$H),this.lineTo(w$f,w$g),this.lineTo(w$w,w$T),this.closePath(),this.clip();var w$P=1/(w$G*w$J+w$C*w$d+w$c*w$B-w$J*w$d-w$C*w$c-w$G*w$B),w$I=w$X*w$J+w$C*w$w+w$f*w$B-w$J*w$w-w$C*w$f-w$X*w$B,w$t=w$G*w$f+w$X*w$d+w$c*w$w-w$f*w$d-w$X*w$c-w$G*w$w,w$a=w$G*w$J*w$w+w$C*w$f*w$d+w$X*w$c*w$B-w$X*w$J*w$d-w$C*w$c*w$w-w$G*w$f*w$B,w$q=w$H*w$J+w$C*w$T+w$g*w$B-w$J*w$T-w$C*w$g-w$H*w$B,w$u=w$G*w$g+w$H*w$d+w$c*w$T-w$g*w$d-w$H*w$c-w$G*w$T,w$R=w$G*w$J*w$T+w$C*w$g*w$d+w$H*w$c*w$B-w$H*w$J*w$d-w$C*w$c*w$T-w$G*w$g*w$B;this.transform(w$I*w$P,w$q*w$P,w$t*w$P,w$u*w$P,w$a*w$P,w$R*w$P),this.drawImage(w$$,w$v.uv[0]*w$K,w$v.uv[1]*w$r,w$_,w$o,w$v.uv[0]*w$K,w$v.uv[1]*w$r,w$_,w$o),this.restore()},w$v.flush=function(){return 0},w$v.fillWords=function(w$v,w$l,w$L,w$A,w$x,w$m){w$A&&(this.font=w$A),w$x&&(this.fillStyle=w$x);this.textBaseline="top",this.textAlign="left";for(var w$Z=0,w$O=w$v.length;w$Z<w$O;w$Z++){var w$e=w$v[w$Z];if(this.__fillText(w$e.char,w$e.x+w$l,w$e.y+w$L),1===w$m){var w$$=w$e.height,w$_=.5*w$e.style.letterSpacing;w$_||(w$_=0),this.beginPath(),this.strokeStyle=w$x,this.lineWidth=1,this.moveTo(w$l+w$e.x-w$_+.5,w$L+w$e.y+w$$+.5),this.lineTo(w$l+w$e.x+w$e.width+w$_+.5,w$L+w$e.y+w$$+.5),this.stroke()}}},w$v.fillBorderWords=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){w$A&&(this.font=w$A),w$x&&(this.fillStyle=w$x),this.textBaseline="top",this.lineWidth=w$Z,this.textAlign="left",this.strokeStyle=w$m;for(var w$O=0,w$e=w$v.length;w$O<w$e;w$O++){var w$$=w$v[w$O];this.__strokeText(w$$.char,w$$.x+w$l,w$$.y+w$L),this.__fillText(w$$.char,w$$.x+w$l,w$$.y+w$L)}},w$v.destroy=function(){this.canvas.width=this.canvas.height=0},w$v.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},w$v.drawCurves=function(w$v,w$l,w$L){this.beginPath(),this.strokeStyle=w$L[3],this.lineWidth=w$L[4];var w$A=w$L[2];w$v+=w$L[0],w$l+=w$L[1],this.moveTo(w$v+w$A[0],w$l+w$A[1]);for(var w$x=2,w$m=w$A.length;w$x<w$m;)this.quadraticCurveTo(w$v+w$A[w$x++],w$l+w$A[w$x++],w$v+w$A[w$x++],w$l+w$A[w$x++]);this.stroke()},w$O.__init__=function(w$l){var w$L=laya.resource.Context.prototype;if(!(w$l=w$l||CanvasRenderingContext2D.prototype).inited){w$l.inited=!0,w$l.__fillText=w$l.fillText,w$l.__fillRect=w$l.fillRect,w$l.__strokeText=w$l.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(w$v){w$l[w$v]=w$L[w$v]})}},w$O.replaceCanvasGetSet=function(w$v,w$l){var w$L=Object.getOwnPropertyDescriptor(w$v,w$l);if(!w$L||!w$L.configurable)return!1;var w$A,w$x={};for(w$A in w$L)"set"!=w$A&&(w$x[w$A]=w$L[w$A]);var w$m=w$L.set;return w$x.set=function(w$v){w$m.call(this,w$v);var w$l=this.getContext("2d");w$l&&"__reset"in w$l&&w$l.__reset()},Object.defineProperty(w$v,w$l,w$x),!0},w$O.replaceGetSet=function(w$v,w$l){var w$L=Object.getOwnPropertyDescriptor(w$v,w$l);if(!w$L||!w$L.configurable)return!1;var w$A,w$x={};for(w$A in w$L)"set"!=w$A&&(w$x[w$A]=w$L[w$A]);var w$m=w$L.set,w$Z="___"+w$l+"__";return w$O.newKeys.push(w$Z),w$x.set=function(w$v){w$v!=this[w$Z]&&(this[w$Z]=w$v,w$m.call(this,w$v))},Object.defineProperty(w$v,w$l,w$x),!0},w$O._default=new w$O,w$O.newKeys=[],w$e(w$O,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),w$O}(),w$R=function(){function w$m(w$v){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++w$m._uniqueIDCounter,this._name=w$v||"Content Manager",w$m._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,w$m._resourceManagers.push(this),this._resources=[],this._records={}}w$_(w$m,"laya.resource.ResourceManager");var w$v=w$m.prototype;return w$H.imps(w$v,{"laya.resource.IDispose":!0}),w$v.getResourceByIndex=function(w$v){return this._resources[w$v]},w$v.getResourcesLength=function(){return this._resources.length},w$v.addResource=function(w$v){return w$v.resourceManager&&w$v.resourceManager.removeResource(w$v),-1===this._resources.indexOf(w$v)&&((w$v._resourceManager=this)._resources.push(w$v),this.addRecord(w$v.uri,w$v.__className,w$v.memorySize),this.addSize(w$v.memorySize),!0)},w$v.removeResource=function(w$v){var w$l=this._resources.indexOf(w$v);return-1!==w$l&&(this._resources.splice(w$l,1),w$v._resourceManager=null,this._memorySize-=w$v.memorySize,this.addRecord(w$v.uri,w$v.__className,-w$v.memorySize),!0)},w$v.unload=function(){for(var w$v=this._resources.slice(0,this._resources.length),w$l=0;w$l<w$v.length;w$l++){w$v[w$l].destroy()}w$v.length=0},w$v.dispose=function(){if(this===w$m._systemResourceManager)throw new Error("systemResourceManager不能被释放！");w$m._resourceManagers.splice(w$m._resourceManagers.indexOf(this),1),w$m._isResourceManagersSorted=!1;for(var w$v=this._resources.slice(0,this._resources.length),w$l=0;w$l<w$v.length;w$l++){var w$L=w$v[w$l];w$L.resourceManager.removeResource(w$L),w$L.destroy()}w$v.length=0},w$v.addSize=function(w$v){w$v&&(this.autoRelease&&0<w$v&&this._memorySize+w$v>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=w$v)},w$v.addRecord=function(w$v,w$l,w$L){DEBUG&&w$L&&!w$v&&console.error(w$v,w$l,w$L),w$v&&(this._records.hasOwnProperty(w$l+"|"+w$v)||(this._records[w$l+"|"+w$v]=0),this._records[w$l+"|"+w$v]+=w$L,DEBUG&&this._records[w$l+"|"+w$v]<0&&console.error(w$v,w$l,this._records[w$l+"|"+w$v]))},w$v.garbageCollection=function(w$v){var w$l=this._resources;(w$l=w$l.slice()).sort(function(w$v,w$l){if(!w$v||!w$l)throw new Error("a或b不能为空！");return w$v.released&&w$l.released?0:w$v.released?1:w$l.released?-1:w$v._lastUseFrameCount-w$l._lastUseFrameCount});for(var w$L=w$W.loopCount,w$A=0,w$x=w$l.length;w$A<w$x;w$A++){var w$m=w$l[w$A];if(!(1<w$L-w$m._lastUseFrameCount))return void(this._memorySize>=w$v&&(this._isOverflow=!0));if(w$m.releaseResource(),this._memorySize<w$v)return void(this._isOverflow=!1)}},w$G(0,w$v,"id",function(){return this._id}),w$G(0,w$v,"name",function(){return this._name},function(w$v){!w$v&&""===w$v||this._name===w$v||(this._name=w$v,w$m._isResourceManagersSorted=!1)}),w$G(0,w$v,"memorySize",function(){return this._memorySize}),w$G(0,w$v,"records",function(){return this._records}),w$G(1,w$m,"systemResourceManager",function(){return w$m._systemResourceManager}),w$m.__init__=function(){w$m.currentResourceManager=w$m.systemResourceManager},w$m.getLoadedResourceManagerByIndex=function(w$v){return w$m._resourceManagers[w$v]},w$m.getLoadedResourceManagersCount=function(){return w$m._resourceManagers.length},w$m.recreateContentManagers=function(w$v){void 0===w$v&&(w$v=!1);for(var w$l=w$m.currentResourceManager,w$L=0;w$L<w$m._resourceManagers.length;w$L++){w$m.currentResourceManager=w$m._resourceManagers[w$L];for(var w$A=0;w$A<w$m.currentResourceManager._resources.length;w$A++)w$m.currentResourceManager._resources[w$A].releaseResource(w$v),w$m.currentResourceManager._resources[w$A].activeResource(w$v)}w$m.currentResourceManager=w$l},w$m.releaseContentManagers=function(w$v){void 0===w$v&&(w$v=!1);for(var w$l=w$m.currentResourceManager,w$L=0;w$L<w$m._resourceManagers.length;w$L++){w$m.currentResourceManager=w$m._resourceManagers[w$L];for(var w$A=0;w$A<w$m.currentResourceManager._resources.length;w$A++){var w$x=w$m.currentResourceManager._resources[w$A];!w$x.released&&w$x.releaseResource(w$v)}}w$m.currentResourceManager=w$l},w$m._uniqueIDCounter=0,w$m._isResourceManagersSorted=!1,w$m._resourceManagers=[],w$e(w$m,["_systemResourceManager",function(){return this._systemResourceManager=new w$m("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=w$m._systemResourceManager}]),w$m}(),w$N=(function(){function w$v(){}w$_(w$v,"laya.system.System"),w$v.changeDefinition=function(w$v,w$l){w$H[w$v]=w$l;var w$L=w$v+"=classObj";w$H._runScript(w$L)},w$v.__init__=function(){w$t.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function w$L(){}return w$_(w$L,"laya.utils.Browser"),w$G(1,w$L,"pixelRatio",function(){return w$L.__init__(),-1<w$L.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:w$Q.getPixelRatio()}),w$G(1,w$L,"height",function(){return w$L.__init__(),(w$H.stage&&w$H.stage.canvasRotation?w$L.clientWidth:w$L.clientHeight)*w$L.pixelRatio}),w$G(1,w$L,"clientWidth",function(){return w$L.__init__(),w$L.window.innerWidth||w$L.document.body.clientWidth}),w$G(1,w$L,"window",function(){return w$L.__init__(),w$L._window}),w$G(1,w$L,"clientHeight",function(){return w$L.__init__(),w$L.window.innerHeight||w$L.document.body.clientHeight||w$L.document.documentElement.clientHeight}),w$G(1,w$L,"width",function(){return w$L.__init__(),(w$H.stage&&w$H.stage.canvasRotation?w$L.clientHeight:w$L.clientWidth)*w$L.pixelRatio}),w$G(1,w$L,"container",function(){return w$L.__init__(),w$L._container||((w$L._container=w$L.createElement("div")).id="layaContainer",w$L.document.body.appendChild(w$L._container)),w$L._container},function(w$v){w$L._container=w$v}),w$G(1,w$L,"document",function(){return w$L.__init__(),w$L._document}),w$L.__init__=function(){if(!w$L._window){w$L._window=w$Q.getWindow(),w$L._document=w$L.window.document,w$L._window.addEventListener("message",function(w$v){laya.utils.Browser._onMessage(w$v)},!1),w$L.document.__createElement=w$L.document.createElement,w$Z.requestAnimationFrame=w$Z.requestAnimationFrame||w$Z.webkitRequestAnimationFrame||w$Z.mozRequestAnimationFrame||w$Z.oRequestAnimationFrame||w$Z.msRequestAnimationFrame||function(w$v){return w$Z.setTimeout(w$v,1e3/60)};var w$v=w$Z.document.body.style;w$v["-webkit-user-select"]="none",w$v["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",w$L.userAgent=w$L.window.navigator.userAgent,w$L.onIOS=!!(w$L.u=w$L.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),w$L.onMobile=-1<w$L.u.indexOf("Mobile"),w$L.onIPhone=-1<w$L.u.indexOf("iPhone"),w$L.onMac=-1<w$L.u.indexOf("Mac OS X"),w$L.onIPad=-1<w$L.u.indexOf("iPad"),w$L.onAndroid=-1<w$L.u.indexOf("Android")||-1<w$L.u.indexOf("Adr"),w$L.onWP=-1<w$L.u.indexOf("Windows Phone"),w$L.onQQBrowser=-1<w$L.u.indexOf("QQBrowser"),w$L.onMQQBrowser=-1<w$L.u.indexOf("MQQBrowser")||-1<w$L.u.indexOf("Mobile")&&-1<w$L.u.indexOf("QQ"),w$L.onIE=!!w$L.window.ActiveXObject||"ActiveXObject"in w$L.window,w$L.onWeiXin=-1<w$L.u.indexOf("MicroMessenger"),w$L.onPC=!w$L.onMobile,w$L.onSafari=-1<w$L.u.indexOf("Safari"),w$L.onFirefox=-1<w$L.u.indexOf("Firefox"),w$L.onEdge=-1<w$L.u.indexOf("Edge"),w$L.onMiniGame=-1<w$L.u.indexOf("MiniGame"),w$L.onLimixiu=-1<w$L.u.indexOf("limixiu"),w$L.httpProtocol="http:"==w$L.window.location.protocol,w$L.onMiniGame&&null==w$L.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),w$L.webAudioEnabled=!!(w$L.window.AudioContext||w$L.window.webkitAudioContext||w$L.window.mozAudioContext),w$L.soundType=w$L.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",w$xv=w$L.webAudioEnabled?w$mv:w$Lv,w$L.webAudioEnabled&&w$mv.initWebAudio(),w$Lv._initMusicAudio(),w$L.enableTouch="ontouchstart"in w$Z||w$Z.DocumentTouch&&w$l instanceof DocumentTouch,w$Z.focus(),w$k._soundClass=w$xv,w$k._musicClass=w$Lv,w$t._mainCanvas=w$t._mainCanvas||w$Bv.create("2D"),w$L.canvas||(w$L.canvas=w$Bv.create("2D"),w$L.context=w$L.canvas.getContext("2d"))}},w$L._onMessage=function(w$v){if(w$v.data&&"size"==w$v.data.name){if(w$L.window.innerWidth=w$v.data.width,w$L.window.innerHeight=w$v.data.height,w$L.window.__innerHeight=w$v.data.clientHeight,!w$L.document.createEvent)return void console.warn("no document.createEvent");var w$l=w$L.document.createEvent("HTMLEvents");return w$l.initEvent("resize",!1,!1),void w$L.window.dispatchEvent(w$l)}},w$L.createElement=function(w$v){return w$L.__init__(),w$L.document.__createElement(w$v)},w$L.getElementById=function(w$v){return w$L.__init__(),w$L.document.getElementById(w$v)},w$L.removeElement=function(w$v){w$v&&w$v.parentNode&&w$v.parentNode.removeChild(w$v)},w$L.now=function(){return w$Q.now()},w$L._window=null,w$L._document=null,w$L._container=null,w$L.userAgent=null,w$L.u=null,w$L.onIOS=!1,w$L.onMac=!1,w$L.onMobile=!1,w$L.onIPhone=!1,w$L.onIPad=!1,w$L.onAndroid=!1,w$L.onWP=!1,w$L.onQQBrowser=!1,w$L.onMQQBrowser=!1,w$L.onSafari=!1,w$L.onFirefox=!1,w$L.onEdge=!1,w$L.onIE=!1,w$L.onWeiXin=!1,w$L.onMiniGame=!1,w$L.onLimixiu=!1,w$L.onPC=!1,w$L.httpProtocol=!1,w$L.webAudioEnabled=!1,w$L.soundType=null,w$L.enableTouch=!1,w$L.canvas=null,w$L.context=null,w$L.__init$=function(){},w$L}()),w$b=function(){function w$l(w$v){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,w$v?(this._u8d_=new Uint8Array(w$v),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}w$_(w$l,"laya.utils.Byte");var w$v=w$l.prototype;return w$v.___resizeBuffer=function(w$l){try{var w$v=new Uint8Array(w$l);null!=this._u8d_&&(this._u8d_.length<=w$l?w$v.set(this._u8d_):w$v.set(this._u8d_.subarray(0,w$l))),this._u8d_=w$v,this._d_=new DataView(w$v.buffer)}catch(w$v){throw"___resizeBuffer err:"+w$l}},w$v.getString=function(){return this.rUTF(this.getUint16())},w$v.getFloat32Array=function(w$v,w$l){var w$L=w$v+w$l;w$L=w$L>this._length?this._length:w$L;var w$A=new Float32Array(this._d_.buffer.slice(w$v,w$L));return this._pos_=w$L,w$A},w$v.getUint8Array=function(w$v,w$l){var w$L=w$v+w$l;w$L=w$L>this._length?this._length:w$L;var w$A=new Uint8Array(this._d_.buffer.slice(w$v,w$L));return this._pos_=w$L,w$A},w$v.getInt16Array=function(w$v,w$l){var w$L=w$v+w$l;w$L=w$L>this._length?this._length:w$L;var w$A=new Int16Array(this._d_.buffer.slice(w$v,w$L));return this._pos_=w$L,w$A},w$v.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var w$v=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,w$v},w$v.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var w$v=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,w$v},w$v.writeFloat32=function(w$v){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,w$v,this._xd_),this._pos_+=4},w$v.writeFloat64=function(w$v){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,w$v,this._xd_),this._pos_+=8},w$v.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var w$v=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,w$v},w$v.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var w$v=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,w$v},w$v.writeInt32=function(w$v){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,w$v,this._xd_),this._pos_+=4},w$v.writeUint32=function(w$v){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,w$v,this._xd_),this._pos_+=4},w$v.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var w$v=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,w$v},w$v.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var w$v=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,w$v},w$v.writeUint16=function(w$v){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,w$v,this._xd_),this._pos_+=2},w$v.writeInt16=function(w$v){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,w$v,this._xd_),this._pos_+=2},w$v.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},w$v.writeUint8=function(w$v){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,w$v),this._pos_++},w$v._getUInt8=function(w$v){return this._d_.getUint8(w$v)},w$v._getUint16=function(w$v){return this._d_.getUint16(w$v,this._xd_)},w$v._getMatrix=function(){return new w$M(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},w$v.rUTF=function(w$v){for(var w$l=[],w$L=this._pos_+w$v,w$A=0,w$x=0,w$m=0,w$Z=String.fromCharCode,w$O=this._u8d_;this._pos_<w$L;)(w$A=w$O[this._pos_++])<128?0!=w$A&&w$l.push(w$Z(w$A)):w$A<224?w$l.push(w$Z((63&w$A)<<6|127&w$O[this._pos_++])):w$A<240?(w$x=w$O[this._pos_++],w$l.push(w$Z((31&w$A)<<12|(127&w$x)<<6|127&w$O[this._pos_++]))):(w$x=w$O[this._pos_++],w$m=w$O[this._pos_++],w$l.push(w$Z((15&w$A)<<18|(127&w$x)<<12|w$m<<6&127|127&w$O[this._pos_++]))),0;return w$l.join("")},w$v.getCustomString=function(w$v){for(var w$l=[],w$L=0,w$A=0,w$x=0,w$m=String.fromCharCode,w$Z=this._u8d_;0<w$v;)if((w$A=w$Z[this._pos_])<128)w$l.push(w$m(w$A)),this._pos_++,w$v--;else for(w$L=w$A-128,this._pos_++,w$v-=w$L;0<w$L;)w$A=w$Z[this._pos_++],w$x=w$Z[this._pos_++],w$l.push(w$m(w$x<<8|w$A)),w$L--;return w$l.join("")},w$v.clear=function(){this._pos_=0,this.length=0},w$v.__getBuffer=function(){return this._d_.buffer},w$v.writeUTFBytes=function(w$v){for(var w$l=0,w$L=(w$v+="").length;w$l<w$L;w$l++){var w$A=w$v.charCodeAt(w$l);w$A<=127?this.writeByte(w$A):w$A<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|w$A>>6,128|63&w$A],this._pos_),this._pos_+=2):w$A<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|w$A>>12,128|w$A>>6&63,128|63&w$A],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|w$A>>18,128|w$A>>12&63,128|w$A>>6&63,128|63&w$A],this._pos_),this._pos_+=4)}},w$v.writeUTFString=function(w$v){var w$l=this.pos;this.writeUint16(1),this.writeUTFBytes(w$v);var w$L=this.pos-w$l-2;if(65536<=w$L)throw"writeUTFString byte len more than 65536";this._d_.setUint16(w$l,w$L,this._xd_)},w$v.readUTFString=function(){return this.readUTFBytes(this.getUint16())},w$v.getUTFString=function(){return this.readUTFString()},w$v.readUTFBytes=function(w$v){if(void 0===w$v&&(w$v=-1),0==w$v)return"";var w$l=this.bytesAvailable;if(w$l<w$v)throw"readUTFBytes error - Out of bounds";return w$v=0<w$v?w$v:w$l,this.rUTF(w$v)},w$v.getUTFBytes=function(w$v){return void 0===w$v&&(w$v=-1),this.readUTFBytes(w$v)},w$v.writeByte=function(w$v){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,w$v),this._pos_+=1},w$v.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},w$v.getByte=function(){return this.readByte()},w$v.ensureWrite=function(w$v){this._length<w$v&&(this._length=w$v),this._allocated_<w$v&&(this.length=w$v)},w$v.writeArrayBuffer=function(w$v,w$l,w$L){if(void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0),w$l<0||w$L<0)throw"writeArrayBuffer error - Out of bounds";0==w$L&&(w$L=w$v.byteLength-w$l),this.ensureWrite(this._pos_+w$L);var w$A=new Uint8Array(w$v);this._u8d_.set(w$A.subarray(w$l,w$l+w$L),this._pos_),this._pos_+=w$L},w$G(0,w$v,"buffer",function(){var w$v=this._d_.buffer;return w$v.byteLength==this.length?w$v:w$v.slice(0,this.length)}),w$G(0,w$v,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(w$v){this._xd_="littleEndian"==w$v}),w$G(0,w$v,"length",function(){return this._length},function(w$v){this._allocated_<w$v?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(w$v,2*this._allocated_))):this._allocated_>w$v&&this.___resizeBuffer(this._allocated_=w$v),this._length=w$v}),w$G(0,w$v,"pos",function(){return this._pos_},function(w$v){this._pos_=w$v}),w$G(0,w$v,"bytesAvailable",function(){return this._length-this._pos_}),w$l.getSystemEndian=function(){if(!w$l._sysEndian){var w$v=new ArrayBuffer(2);new DataView(w$v).setInt16(0,256,!0),w$l._sysEndian=256===new Int16Array(w$v)[0]?"littleEndian":"bigEndian"}return w$l._sysEndian},w$l.BIG_ENDIAN="bigEndian",w$l.LITTLE_ENDIAN="littleEndian",w$l._sysEndian=null,w$l}(),w$j=function(){function w$x(){}return w$_(w$x,"laya.utils.CacheManager"),w$x.regCacheByFunction=function(w$v,w$l){var w$L;w$x.unRegCacheByFunction(w$v,w$l),w$L={tryDispose:w$v,getCacheList:w$l},w$x._cacheList.push(w$L)},w$x.unRegCacheByFunction=function(w$v,w$l){var w$L,w$A=0;for(w$L=w$x._cacheList.length,w$A=0;w$A<w$L;w$A++)if(w$x._cacheList[w$A].tryDispose==w$v&&w$x._cacheList[w$A].getCacheList==w$l)return void w$x._cacheList.splice(w$A,1)},w$x.forceDispose=function(){var w$v=0,w$l=w$x._cacheList.length;for(w$v=0;w$v<w$l;w$v++)w$x._cacheList[w$v].tryDispose(!0)},w$x.beginCheck=function(w$v){void 0===w$v&&(w$v=15e3),w$H.timer.loop(w$v,null,w$x._checkLoop)},w$x.stopCheck=function(){w$H.timer.clear(null,w$x._checkLoop)},w$x._checkLoop=function(){var w$v=w$x._cacheList;if(!(w$v.length<1)){var w$l,w$L=w$N.now(),w$A=0;for(w$l=w$A=w$v.length;0<w$A&&(w$v[w$x._index=++w$x._index%w$l].tryDispose(!1),!(w$N.now()-w$L>w$x.loopTimeLimit));)w$A--}},w$x.loopTimeLimit=2,w$x._cacheList=[],w$x._index=0,w$x}(),w$F=function(){function w$r(){}return w$_(w$r,"laya.utils.ClassUtils"),w$r.regClass=function(w$v,w$l){w$r._classMap[w$v]=w$l},w$r.getRegClass=function(w$v){return w$r._classMap[w$v]},w$r.getInstance=function(w$v){var w$l=w$r.getClass(w$v);return w$l?new w$l:(console.warn("[error] Undefined class:",w$v),null)},w$r.createByJson=function(w$v,w$l,w$L,w$A,w$x){"string"==typeof w$v&&(w$v=JSON.parse(w$v));var w$m=w$v.props;if(!w$l&&!(w$l=w$x?w$x.runWith(w$v):w$r.getInstance(w$m.runtime||w$v.type)))return null;var w$Z=w$v.child;if(w$Z)for(var w$O=0,w$e=w$Z.length;w$O<w$e;w$O++){var w$$=w$Z[w$O];if("render"!==w$$.props.name&&"render"!==w$$.props.renderType||!w$l._$set_itemRender)if("Graphic"==w$$.type)w$r.addGraphicsToSprite(w$$,w$l);else if(w$r.isDrawType(w$$.type))w$r.addGraphicToSprite(w$$,w$l,!0);else{var w$_=w$r.createByJson(w$$,null,w$L,w$A,w$x);"Script"==w$$.type?w$_.hasOwnProperty("owner")?w$_.owner=w$l:w$_.hasOwnProperty("target")&&(w$_.target=w$l):"mask"==w$$.props.renderType?w$l.mask=w$_:w$l.addChild(w$_)}else w$l.itemRender=w$$}if(w$m)for(var w$o in w$m){var w$K=w$m[w$o];"var"===w$o&&w$L?w$L[w$K]=w$l:w$K instanceof Array&&"function"==typeof w$l[w$o]?w$l[w$o].apply(w$l,w$K):w$l[w$o]=w$K}return w$A&&w$v.customProps&&w$A.runWith([w$l,w$v]),w$l.created&&w$l.created(),w$l},w$r.addGraphicsToSprite=function(w$v,w$l){var w$L;if((w$L=w$v.child)&&!(w$L.length<1)){var w$A;w$A=w$r._getGraphicsFromSprite(w$v,w$l);var w$x=0,w$m=0;w$v.props&&(w$x=w$r._getObjVar(w$v.props,"x",0),w$m=w$r._getObjVar(w$v.props,"y",0)),0!=w$x&&0!=w$m&&w$A.translate(w$x,w$m);var w$Z,w$O=0;for(w$Z=w$L.length,w$O=0;w$O<w$Z;w$O++)w$r._addGraphicToGraphics(w$L[w$O],w$A);0!=w$x&&0!=w$m&&w$A.translate(-w$x,-w$m)}},w$r.addGraphicToSprite=function(w$v,w$l,w$L){var w$A;void 0===w$L&&(w$L=!1),w$A=w$L?w$r._getGraphicsFromSprite(w$v,w$l):w$l.graphics,w$r._addGraphicToGraphics(w$v,w$A)},w$r._getGraphicsFromSprite=function(w$v,w$l){var w$L,w$A;if(!w$v||!w$v.props)return w$l.graphics;switch(w$A=w$v.props.renderType){case"hit":case"unHit":var w$x;w$l.hitArea||(w$l.hitArea=new w$S),(w$x=w$l.hitArea)[w$A]||(w$x[w$A]=new w$K),w$L=w$x[w$A]}return w$L||(w$L=w$l.graphics),w$L},w$r._getTransformData=function(w$v){var w$l;(w$v.hasOwnProperty("pivotX")||w$v.hasOwnProperty("pivotY"))&&(w$l=w$l||new w$M).translate(-w$r._getObjVar(w$v,"pivotX",0),-w$r._getObjVar(w$v,"pivotY",0));var w$L=w$r._getObjVar(w$v,"scaleX",1),w$A=w$r._getObjVar(w$v,"scaleY",1),w$x=w$r._getObjVar(w$v,"rotation",0);w$r._getObjVar(w$v,"skewX",0),w$r._getObjVar(w$v,"skewY",0);return 1==w$L&&1==w$A&&0==w$x||((w$l=w$l||new w$M).scale(w$L,w$A),w$l.rotate(.0174532922222222*w$x)),w$l},w$r._addGraphicToGraphics=function(w$v,w$l){var w$L,w$A;if((w$L=w$v.props)&&(w$A=w$r.DrawTypeDic[w$v.type])){var w$x,w$m;w$x=w$l;var w$Z=w$r._getParams(w$L,w$A[1],w$A[2],w$A[3]);((w$m=w$r._tM)||1!=w$r._alpha)&&(w$x.save(),w$m&&w$x.transform(w$m),1!=w$r._alpha&&w$x.alpha(w$r._alpha)),w$x[w$A[0]].apply(w$x,w$Z),(w$m||1!=w$r._alpha)&&w$x.restore()}},w$r._adptLineData=function(w$v){return w$v[2]=parseFloat(w$v[0])+parseFloat(w$v[2]),w$v[3]=parseFloat(w$v[1])+parseFloat(w$v[3]),w$v},w$r._adptTextureData=function(w$v){return w$v[0]=w$Ov.getRes(w$v[0]),w$v},w$r._adptLinesData=function(w$v){return w$v[2]=w$r._getPointListByStr(w$v[2]),w$v},w$r.isDrawType=function(w$v){return"Image"!=w$v&&w$r.DrawTypeDic.hasOwnProperty(w$v)},w$r._getParams=function(w$v,w$l,w$L,w$A){var w$x;void 0===w$L&&(w$L=0),(w$x=w$r._temParam).length=w$l.length;var w$m,w$Z,w$O=0;for(w$m=w$l.length,w$O=0;w$O<w$m;w$O++)w$x[w$O]=w$r._getObjVar(w$v,w$l[w$O][0],w$l[w$O][1]);return w$r._alpha=w$r._getObjVar(w$v,"alpha",1),w$Z=w$r._getTransformData(w$v),w$r._tM=w$Z?(w$L||(w$L=0),w$Z.translate(w$x[w$L],w$x[w$L+1]),w$x[w$L]=w$x[w$L+1]=0,w$Z):null,w$A&&w$r[w$A]&&(w$x=w$r[w$A](w$x)),w$x},w$r._getPointListByStr=function(w$v){var w$l,w$L,w$A=0;for(w$L=(w$l=w$v.split(",")).length,w$A=0;w$A<w$L;w$A++)w$l[w$A]=parseFloat(w$l[w$A]);return w$l},w$r._getObjVar=function(w$v,w$l,w$L){return w$v.hasOwnProperty(w$l)?w$v[w$l]:w$L},w$r._temParam=[],w$r._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},w$r.getClass=function(w$v){var w$l=w$r._classMap[w$v]||w$v;return"string"==typeof w$l?w$H.__classmap[w$l]:w$l},w$r._tM=null,w$r._alpha=NaN,w$e(w$r,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),w$r}(),w$p=function(){function w$m(w$v){if(this._color=[],"string"==typeof w$v){null===(this.strColor=w$v)&&(w$v="#000000"),"#"==w$v.charAt(0)&&(w$v=w$v.substr(1));var w$l=w$v.length;if(3==w$l||4==w$l){for(var w$L="",w$A=0;w$A<w$l;w$A++)w$L+=w$v[w$A]+w$v[w$A];w$v=w$L}var w$x=this.numColor=parseInt(w$v,16);if(8==w$v.length)return void(this._color=[parseInt(w$v.substr(0,2),16)/255,((16711680&w$x)>>16)/255,((65280&w$x)>>8)/255,(255&w$x)/255])}else w$x=this.numColor=w$v,this.strColor=w$i.toHexColor(w$x);this._color=[((16711680&w$x)>>16)/255,((65280&w$x)>>8)/255,(255&w$x)/255,1],this._color.__id=++w$m._COLODID}return w$_(w$m,"laya.utils.Color"),w$m._initDefault=function(){for(var w$v in w$m._DEFAULT={},w$m._COLOR_MAP)w$m._SAVE[w$v]=w$m._DEFAULT[w$v]=new w$m(w$m._COLOR_MAP[w$v]);return w$m._DEFAULT},w$m._initSaveMap=function(){for(var w$v in w$m._SAVE_SIZE=0,w$m._SAVE={},w$m._DEFAULT)w$m._SAVE[w$v]=w$m._DEFAULT[w$v]},w$m.create=function(w$v){var w$l=w$m._SAVE[w$v+""];return null!=w$l?w$l:(w$m._SAVE_SIZE<1e3||w$m._initSaveMap(),w$m._SAVE[w$v+""]=new w$m(w$v))},w$m._SAVE={},w$m._SAVE_SIZE=0,w$m._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},w$m._DEFAULT=w$m._initDefault(),w$m._COLODID=1,w$m}(),w$Y=(function(){function w$v(){this._values=[],this._keys=[]}w$_(w$v,"laya.utils.Dictionary");var w$l=w$v.prototype;w$l.set=function(w$v,w$l){var w$L=this.indexOf(w$v);0<=w$L?this._values[w$L]=w$l:(this._keys.push(w$v),this._values.push(w$l))},w$l.indexOf=function(w$v){var w$l=this._keys.indexOf(w$v);return 0<=w$l?w$l:(w$v="string"==typeof w$v?Number(w$v):"number"==typeof w$v?w$v.toString():w$v,this._keys.indexOf(w$v))},w$l.get=function(w$v){var w$l=this.indexOf(w$v);return w$l<0?null:this._values[w$l]},w$l.remove=function(w$v){var w$l=this.indexOf(w$v);return 0<=w$l&&(this._keys.splice(w$l,1),this._values.splice(w$l,1),!0)},w$l.clear=function(){this._values.length=0,this._keys.length=0},w$G(0,w$l,"values",function(){return this._values}),w$G(0,w$l,"keys",function(){return this._keys})}(),function(){function w$v(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}w$_(w$v,"laya.utils.Dragging");var w$l=w$v.prototype;return w$l.start=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){void 0===w$O&&(w$O=.92),this.clearTimer(),this.target=w$v,this.area=w$l,this.hasInertia=w$L,this.elasticDistance=w$l?w$A:0,this.elasticBackTime=w$x,this.data=w$m,this._disableMouseEvent=w$Z,this.ratio=w$O,1!=w$v.globalScaleX||1!=w$v.globalScaleY?this._parent=w$v.parent:this._parent=w$H.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,w$H.stage.on("mouseup",this,this.onStageMouseUp),w$H.stage.on("mouseout",this,this.onStageMouseUp),w$H.timer.frameLoop(1,this,this.loop)},w$l.clearTimer=function(){w$H.timer.clear(this,this.loop),w$H.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},w$l.stop=function(){this._dragging&&(w$c.instance.disableMouseEvent=!1,w$H.stage.off("mouseup",this,this.onStageMouseUp),w$H.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},w$l.loop=function(){var w$v=this._parent.getMousePoint(),w$l=w$v.x,w$L=w$v.y,w$A=w$l-this._lastX,w$x=w$L-this._lastY;if(this._clickOnly){if(!(1<Math.abs(w$A*w$H.stage._canvasTransform.getScaleX())||1<Math.abs(w$x*w$H.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),w$c.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(w$A,w$x);0==w$A&&0==w$x||(this._lastX=w$l,this._lastY=w$L,this.target.x+=w$A*this._elasticRateX,this.target.y+=w$x*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},w$l.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var w$v=this.area.x-this.target.x;else w$v=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-w$v/this.elasticDistance),this.target.y<this.area.y)var w$l=this.area.y-this.target.y;else w$l=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-w$l/this.elasticDistance)}},w$l.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},w$l.onStageMouseUp=function(w$v){if(w$c.instance.disableMouseEvent=!1,w$H.stage.off("mouseup",this,this.onStageMouseUp),w$H.stage.off("mouseout",this,this.onStageMouseUp),w$H.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var w$l=this._offsets.length,w$L=Math.min(w$l,6),w$A=this._offsets.length-w$L,w$x=w$l-1;w$A<w$x;w$x--)this._offsetY+=this._offsets[w$x--],this._offsetX+=this._offsets[w$x];this._offsetX=this._offsetX/w$L*2,this._offsetY=this._offsetY/w$L*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),w$H.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},w$l.checkElastic=function(){var w$v=NaN,w$l=NaN;if(this.target.x<this.area.x?w$v=this.area.x:this.target.x>this.area.x+this.area.width&&(w$v=this.area.x+this.area.width),this.target.y<this.area.y?w$l=this.area.y:this.target.y>this.area.y+this.area.height&&(w$l=this.area.y+this.area.height),isNaN(w$v)&&isNaN(w$l))this.clear();else{var w$L={};isNaN(w$v)||(w$L.x=w$v),isNaN(w$l)||(w$L.y=w$l),this._tween=w$s.to(this.target,w$L,this.elasticBackTime,w$D.sineOut,w$J.create(this,this.clear),0,!1,!1)}},w$l.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(w$H.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},w$l.clear=function(){if(this.target){this.clearTimer();var w$v=this.target;this.target=null,this._parent=null,w$v.event("dragend",this.data)}},w$v}()),w$D=function(){function w$O(){}return w$_(w$O,"laya.utils.Ease"),w$O.linearNone=function(w$v,w$l,w$L,w$A){return w$L*w$v/w$A+w$l},w$O.linearIn=function(w$v,w$l,w$L,w$A){return w$L*w$v/w$A+w$l},w$O.linearInOut=function(w$v,w$l,w$L,w$A){return w$L*w$v/w$A+w$l},w$O.linearOut=function(w$v,w$l,w$L,w$A){return w$L*w$v/w$A+w$l},w$O.bounceIn=function(w$v,w$l,w$L,w$A){return w$L-w$O.bounceOut(w$A-w$v,0,w$L,w$A)+w$l},w$O.bounceInOut=function(w$v,w$l,w$L,w$A){return w$v<.5*w$A?.5*w$O.bounceIn(2*w$v,0,w$L,w$A)+w$l:.5*w$O.bounceOut(2*w$v-w$A,0,w$L,w$A)+.5*w$L+w$l},w$O.bounceOut=function(w$v,w$l,w$L,w$A){return(w$v/=w$A)<1/2.75?w$L*(7.5625*w$v*w$v)+w$l:w$v<2/2.75?w$L*(7.5625*(w$v-=1.5/2.75)*w$v+.75)+w$l:w$v<2.5/2.75?w$L*(7.5625*(w$v-=2.25/2.75)*w$v+.9375)+w$l:w$L*(7.5625*(w$v-=2.625/2.75)*w$v+.984375)+w$l},w$O.backIn=function(w$v,w$l,w$L,w$A,w$x){return void 0===w$x&&(w$x=1.70158),w$L*(w$v/=w$A)*w$v*((w$x+1)*w$v-w$x)+w$l},w$O.backInOut=function(w$v,w$l,w$L,w$A,w$x){return void 0===w$x&&(w$x=1.70158),(w$v/=.5*w$A)<1?.5*w$L*(w$v*w$v*((1+(w$x*=1.525))*w$v-w$x))+w$l:w$L/2*((w$v-=2)*w$v*((1+(w$x*=1.525))*w$v+w$x)+2)+w$l},w$O.backOut=function(w$v,w$l,w$L,w$A,w$x){return void 0===w$x&&(w$x=1.70158),w$L*((w$v=w$v/w$A-1)*w$v*((w$x+1)*w$v+w$x)+1)+w$l},w$O.elasticIn=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z;return void 0===w$x&&(w$x=0),void 0===w$m&&(w$m=0),0==w$v?w$l:1==(w$v/=w$A)?w$l+w$L:(w$m||(w$m=.3*w$A),w$Z=!w$x||0<w$L&&w$x<w$L||w$L<0&&w$x<-w$L?(w$x=w$L,w$m/4):w$m/w$O.PI2*Math.asin(w$L/w$x),-w$x*Math.pow(2,10*(w$v-=1))*Math.sin((w$v*w$A-w$Z)*w$O.PI2/w$m)+w$l)},w$O.elasticInOut=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z;return void 0===w$x&&(w$x=0),void 0===w$m&&(w$m=0),0==w$v?w$l:2==(w$v/=.5*w$A)?w$l+w$L:(w$m||(w$m=w$A*(.3*1.5)),w$Z=!w$x||0<w$L&&w$x<w$L||w$L<0&&w$x<-w$L?(w$x=w$L,w$m/4):w$m/w$O.PI2*Math.asin(w$L/w$x),w$v<1?w$x*Math.pow(2,10*(w$v-=1))*Math.sin((w$v*w$A-w$Z)*w$O.PI2/w$m)*-.5+w$l:w$x*Math.pow(2,-10*(w$v-=1))*Math.sin((w$v*w$A-w$Z)*w$O.PI2/w$m)*.5+w$L+w$l)},w$O.elasticOut=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z;return void 0===w$x&&(w$x=0),void 0===w$m&&(w$m=0),0==w$v?w$l:1==(w$v/=w$A)?w$l+w$L:(w$m||(w$m=.3*w$A),w$Z=!w$x||0<w$L&&w$x<w$L||w$L<0&&w$x<-w$L?(w$x=w$L,w$m/4):w$m/w$O.PI2*Math.asin(w$L/w$x),w$x*Math.pow(2,-10*w$v)*Math.sin((w$v*w$A-w$Z)*w$O.PI2/w$m)+w$L+w$l)},w$O.strongIn=function(w$v,w$l,w$L,w$A){return w$L*(w$v/=w$A)*w$v*w$v*w$v*w$v+w$l},w$O.strongInOut=function(w$v,w$l,w$L,w$A){return(w$v/=.5*w$A)<1?.5*w$L*w$v*w$v*w$v*w$v*w$v+w$l:.5*w$L*((w$v-=2)*w$v*w$v*w$v*w$v+2)+w$l},w$O.strongOut=function(w$v,w$l,w$L,w$A){return w$L*((w$v=w$v/w$A-1)*w$v*w$v*w$v*w$v+1)+w$l},w$O.sineInOut=function(w$v,w$l,w$L,w$A){return.5*-w$L*(Math.cos(Math.PI*w$v/w$A)-1)+w$l},w$O.sineIn=function(w$v,w$l,w$L,w$A){return-w$L*Math.cos(w$v/w$A*w$O.HALF_PI)+w$L+w$l},w$O.sineOut=function(w$v,w$l,w$L,w$A){return w$L*Math.sin(w$v/w$A*w$O.HALF_PI)+w$l},w$O.quintIn=function(w$v,w$l,w$L,w$A){return w$L*(w$v/=w$A)*w$v*w$v*w$v*w$v+w$l},w$O.quintInOut=function(w$v,w$l,w$L,w$A){return(w$v/=.5*w$A)<1?.5*w$L*w$v*w$v*w$v*w$v*w$v+w$l:.5*w$L*((w$v-=2)*w$v*w$v*w$v*w$v+2)+w$l},w$O.quintOut=function(w$v,w$l,w$L,w$A){return w$L*((w$v=w$v/w$A-1)*w$v*w$v*w$v*w$v+1)+w$l},w$O.quartIn=function(w$v,w$l,w$L,w$A){return w$L*(w$v/=w$A)*w$v*w$v*w$v+w$l},w$O.quartInOut=function(w$v,w$l,w$L,w$A){return(w$v/=.5*w$A)<1?.5*w$L*w$v*w$v*w$v*w$v+w$l:.5*-w$L*((w$v-=2)*w$v*w$v*w$v-2)+w$l},w$O.quartOut=function(w$v,w$l,w$L,w$A){return-w$L*((w$v=w$v/w$A-1)*w$v*w$v*w$v-1)+w$l},w$O.cubicIn=function(w$v,w$l,w$L,w$A){return w$L*(w$v/=w$A)*w$v*w$v+w$l},w$O.cubicInOut=function(w$v,w$l,w$L,w$A){return(w$v/=.5*w$A)<1?.5*w$L*w$v*w$v*w$v+w$l:.5*w$L*((w$v-=2)*w$v*w$v+2)+w$l},w$O.cubicOut=function(w$v,w$l,w$L,w$A){return w$L*((w$v=w$v/w$A-1)*w$v*w$v+1)+w$l},w$O.quadIn=function(w$v,w$l,w$L,w$A){return w$L*(w$v/=w$A)*w$v+w$l},w$O.quadInOut=function(w$v,w$l,w$L,w$A){return(w$v/=.5*w$A)<1?.5*w$L*w$v*w$v+w$l:.5*-w$L*(--w$v*(w$v-2)-1)+w$l},w$O.quadOut=function(w$v,w$l,w$L,w$A){return-w$L*(w$v/=w$A)*(w$v-2)+w$l},w$O.expoIn=function(w$v,w$l,w$L,w$A){return 0==w$v?w$l:w$L*Math.pow(2,10*(w$v/w$A-1))+w$l-.001*w$L},w$O.expoInOut=function(w$v,w$l,w$L,w$A){return 0==w$v?w$l:w$v==w$A?w$l+w$L:(w$v/=.5*w$A)<1?.5*w$L*Math.pow(2,10*(w$v-1))+w$l:.5*w$L*(2-Math.pow(2,-10*--w$v))+w$l},w$O.expoOut=function(w$v,w$l,w$L,w$A){return w$v==w$A?w$l+w$L:w$L*(1-Math.pow(2,-10*w$v/w$A))+w$l},w$O.circIn=function(w$v,w$l,w$L,w$A){return-w$L*(Math.sqrt(1-(w$v/=w$A)*w$v)-1)+w$l},w$O.circInOut=function(w$v,w$l,w$L,w$A){return(w$v/=.5*w$A)<1?.5*-w$L*(Math.sqrt(1-w$v*w$v)-1)+w$l:.5*w$L*(Math.sqrt(1-(w$v-=2)*w$v)+1)+w$l},w$O.circOut=function(w$v,w$l,w$L,w$A){return w$L*Math.sqrt(1-(w$v=w$v/w$A-1)*w$v)+w$l},w$O.HALF_PI=.5*Math.PI,w$O.PI2=2*Math.PI,w$O}(),w$S=function(){function w$o(){this._hit=null,this._unHit=null}w$_(w$o,"laya.utils.HitArea");var w$v=w$o.prototype;return w$v.isHit=function(w$v,w$l){return!!w$o.isHitGraphic(w$v,w$l,this.hit)&&!w$o.isHitGraphic(w$v,w$l,this.unHit)},w$v.contains=function(w$v,w$l){return this.isHit(w$v,w$l)},w$G(0,w$v,"hit",function(){return this._hit||(this._hit=new w$K),this._hit},function(w$v){this._hit=w$v}),w$G(0,w$v,"unHit",function(){return this._unHit||(this._unHit=new w$K),this._unHit},function(w$v){this._unHit=w$v}),w$o.isHitGraphic=function(w$v,w$l,w$L){if(!w$L)return!1;var w$A;if(!(w$A=w$L.cmds)&&w$L._one&&((w$A=w$o._cmds).length=1,w$A[0]=w$L._one),!w$A)return!1;var w$x,w$m,w$Z=0;for(w$x=w$A.length,w$Z=0;w$Z<w$x;w$Z++)if(w$m=w$A[w$Z]){var w$O=w$t._context;switch(w$m.callee){case w$O._translate:case 6:w$v-=w$m[0],w$l-=w$m[1]}if(w$o.isHitCmd(w$v,w$l,w$m))return!0}return!1},w$o.isHitCmd=function(w$v,w$l,w$L){if(!w$L)return!1;var w$A=w$t._context,w$x=!1;switch(w$L.callee){case w$A._drawRect:case 13:w$o._rec.setTo(w$L[0],w$L[1],w$L[2],w$L[3]),w$x=w$o._rec.contains(w$v,w$l);break;case w$A._drawCircle:case w$A._fillCircle:case 14:w$x=(w$v-=w$L[0])*w$v+(w$l-=w$L[1])*w$l<w$L[2]*w$L[2];break;case w$A._drawPoly:case 18:w$v-=w$L[0],w$l-=w$L[1],w$x=w$o.ptInPolygon(w$v,w$l,w$L[2])}return w$x},w$o.ptInPolygon=function(w$v,w$l,w$L){var w$A;(w$A=w$o._ptPoint).setTo(w$v,w$l);var w$x,w$m=0,w$Z=NaN,w$O=NaN,w$e=NaN,w$$=NaN;w$x=w$L.length;for(var w$_=0;w$_<w$x;w$_+=2){if(w$Z=w$L[w$_],w$O=w$L[w$_+1],w$e=w$L[(w$_+2)%w$x],w$O!=(w$$=w$L[(w$_+3)%w$x]))if(!(w$A.y<Math.min(w$O,w$$)))if(!(w$A.y>=Math.max(w$O,w$$)))(w$A.y-w$O)*(w$e-w$Z)/(w$$-w$O)+w$Z>w$A.x&&w$m++}return w$m%2==1},w$o._cmds=[],w$e(w$o,["_rec",function(){return this._rec=new w$T},"_ptPoint",function(){return this._ptPoint=new w$g}]),w$o}(),w$y=(function(){function w$x(w$v,w$l,w$L,w$A){this.char=w$v,this.charNum=w$v.charCodeAt(0),this._x=this._y=0,this.width=w$l,this.height=w$L,this.style=w$A,this.isWord=!w$x._isWordRegExp.test(w$v)}w$_(w$x,"laya.utils.HTMLChar");var w$v=w$x.prototype;w$H.imps(w$v,{"laya.display.ILayout":!0}),w$v.setSprite=function(w$v){this._sprite=w$v},w$v.getSprite=function(){return this._sprite},w$v._isChar=function(){return!0},w$v._getCSSStyle=function(){return this.style},w$G(0,w$v,"width",function(){return this._w},function(w$v){this._w=w$v}),w$G(0,w$v,"x",function(){return this._x},function(w$v){this._sprite&&(this._sprite.x=w$v),this._x=w$v}),w$G(0,w$v,"y",function(){return this._y},function(w$v){this._sprite&&(this._sprite.y=w$v),this._y=w$v}),w$G(0,w$v,"height",function(){return this._h},function(w$v){this._h=w$v}),w$x._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function w$l(){}w$_(w$l,"laya.utils.Log"),w$l.enable=function(){w$l._logdiv||(w$l._logdiv=w$N.window.document.createElement("div"),w$N.window.document.body.appendChild(w$l._logdiv),w$l._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},w$l.toggle=function(){var w$v=w$l._logdiv.style;"1px"==w$v.width?w$v.width=w$v.height="50%":w$v.width=w$v.height="1px"},w$l.print=function(w$v){w$l._logdiv&&(w$l.maxCount<=w$l._count&&w$l.clear(),w$l._count++,w$l._logdiv.innerText+=w$v+"\n",w$l._logdiv.scrollTop=w$l._logdiv.scrollHeight)},w$l.clear=function(){w$l._logdiv.innerText="",w$l._count=0},w$l._logdiv=null,w$l._count=0,w$l.maxCount=20}(),function(){function w$l(){}w$_(w$l,"laya.utils.Mouse"),w$G(1,w$l,"cursor",function(){return w$l._style.cursor},function(w$v){w$l._style.cursor=w$v}),w$l.hide=function(){"none"!=w$l.cursor&&(w$l._preCursor=w$l.cursor,w$l.cursor="none")},w$l.show=function(){"none"==w$l.cursor&&(w$l.cursor=w$l._preCursor?w$l._preCursor:"auto")},w$l._preCursor=null,w$e(w$l,["_style",function(){return this._style=w$N.document.body.style}])}(),function(){function w$m(){}return w$_(w$m,"laya.utils.Pool"),w$m.getPoolBySign=function(w$v){return w$m._poolDic[w$v]||(w$m._poolDic[w$v]=[])},w$m.clearBySign=function(w$v){w$m._poolDic[w$v]&&(w$m._poolDic[w$v].length=0)},w$m.recover=function(w$v,w$l){w$l.__InPool||(w$l.__InPool=!0,w$m.getPoolBySign(w$v).push(w$l))},w$m.getItemByClass=function(w$v,w$l){var w$L=w$m.getPoolBySign(w$v),w$A=w$L.length?w$L.pop():new w$l;return w$A.__InPool=!1,w$A},w$m.getItemByCreateFun=function(w$v,w$l,w$L){var w$A=w$m.getPoolBySign(w$v),w$x=w$A.length?w$A.pop():w$l.call(w$L);return w$x.__InPool=!1,w$x},w$m.getItem=function(w$v){var w$l=w$m.getPoolBySign(w$v),w$L=w$l.length?w$l.pop():null;return w$L&&(w$L.__InPool=!1),w$L},w$m._poolDic={},w$m.InPoolSign="__InPool",w$m}()),w$W=function(){function w$e(){}return w$_(w$e,"laya.utils.Stat"),w$G(1,w$e,"onclick",null,function(w$v){w$e._sp&&w$e._sp.on("click",w$e._sp,w$v),w$e._canvas&&(w$e._canvas.source.onclick=w$v,w$e._canvas.source.style.pointerEvents="")}),w$e.show=function(w$v,w$l,w$L){if(void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0),!w$t.isConchApp||w$t.isConchWebGL){if(w$t.isConchWebGL||w$N.onMiniGame||w$N.onLimixiu||(w$e._useCanvas=!0),w$e._show=!0,w$e._fpsData.length=60,w$e._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},w$e._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},w$e._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},w$e._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},w$t.isWebGL)if(w$e._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},w$t.is3DMode){if(w$e._view[0].title="FPS(3D)",w$e._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},w$e._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},w$e._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==w$L){var w$A=8;w$e._view[w$A++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},w$e._view[w$A++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},w$e._view[w$A++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},w$e._view[w$A++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},w$e._view[w$A++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},w$e._view[w$A++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},w$e._view[w$A++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},w$e._view[w$A++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},w$e._view[w$A++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==w$L){w$A=8;w$e._view[w$A++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},w$e._view[w$A++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},w$e._view[w$A++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},w$e._view[w$A++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},w$e._view[w$A++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},w$e._view[w$A++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},w$e._view[w$A++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else w$e._view[0].title="FPS(WebGL)",w$e._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else w$e._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};w$e._useCanvas?w$e.createUIPre(w$v,w$l):w$e.createUI(w$v,w$l),w$e.enable()}else w$N.window.conch.showFPS&&w$N.window.conch.showFPS(w$v,w$l)},w$e.createUIPre=function(w$v,w$l){var w$L=w$N.pixelRatio;w$e._width=170*w$L,w$e._vx=75*w$L,w$e._height=w$L*(12*w$e._view.length+3*w$L)+4,w$e._fontSize=12*w$L;for(var w$A=0;w$A<w$e._view.length;w$A++)w$e._view[w$A].x=4,w$e._view[w$A].y=w$A*w$e._fontSize+2*w$L;w$e._canvas||((w$e._canvas=new w$Bv("2D")).size(w$e._width,w$e._height),(w$e._ctx=w$e._canvas.getContext("2d")).textBaseline="top",w$e._ctx.font=w$e._fontSize+"px Sans-serif",w$e._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+w$v+"px;top:"+w$l+"px;width:"+w$e._width/w$L+"px;height:"+w$e._height/w$L+"px;"),w$e._first=!0,w$e.loop(),w$e._first=!1,w$N.container.appendChild(w$e._canvas.source)},w$e.createUI=function(w$v,w$l){var w$L=w$e._sp,w$A=w$N.pixelRatio;w$L||(w$L=new w$ov,(w$e._leftText=new w$dv).pos(5,5),w$e._leftText.color="#ffffff",w$L.addChild(w$e._leftText),(w$e._txt=new w$dv).pos(80*w$A,5),w$e._txt.color="#ffffff",w$L.addChild(w$e._txt),w$e._sp=w$L),w$L.pos(w$v,w$l);for(var w$x="",w$m=0;w$m<w$e._view.length;w$m++){w$x+=w$e._view[w$m].title+"\n"}w$e._leftText.text=w$x;var w$Z=170*w$A,w$O=w$A*(12*w$e._view.length+3*w$A)+4;w$e._txt.fontSize=w$e._fontSize*w$A,w$e._leftText.fontSize=w$e._fontSize*w$A,w$L.size(w$Z,w$O),w$L.graphics.clear(),w$L.graphics.setAlpha(.5),w$L.graphics.drawRect(0,0,w$Z,w$O,"#999999"),w$L.graphics.setAlpha(1),w$e.loop()},w$e.enable=function(){w$H.timer.frameLoop(1,w$e,w$e.loop)},w$e.hide=function(){w$e._show=!1,w$H.timer.clear(w$e,w$e.loop),w$e._canvas&&w$N.removeElement(w$e._canvas.source)},w$e.clear=function(){w$e.trianglesFaces=w$e.drawCall=w$e.shaderCall=w$e.spriteCount=w$e.spriteRenderUseCacheCount=w$e.treeNodeCollision=w$e.treeSpriteCollision=w$e.canvasNormal=w$e.canvasBitmap=w$e.canvasReCache=0},w$e.loop=function(){w$e._count++;var w$v=w$N.now();if(!(w$v-w$e._timer<1e3)){var w$l=w$e._count;if(w$e.FPS=Math.round(1e3*w$l/(w$v-w$e._timer)),w$e._show){w$e.trianglesFaces=Math.round(w$e.trianglesFaces/w$l),w$e.spriteCount=w$e._useCanvas?(w$e.drawCall=Math.round(w$e.drawCall/w$l)-2,w$e.shaderCall=Math.round(w$e.shaderCall/w$l),Math.round(w$e.spriteCount/w$l)-1):(w$e.drawCall=Math.round(w$e.drawCall/w$l)-2,w$e.shaderCall=Math.round(w$e.shaderCall/w$l)-4,Math.round(w$e.spriteCount/w$l)-4),w$e.spriteRenderUseCacheCount=Math.round(w$e.spriteRenderUseCacheCount/w$l),w$e.canvasNormal=Math.round(w$e.canvasNormal/w$l),w$e.canvasBitmap=Math.round(w$e.canvasBitmap/w$l),w$e.canvasReCache=Math.ceil(w$e.canvasReCache/w$l),w$e.treeNodeCollision=Math.round(w$e.treeNodeCollision/w$l),w$e.treeSpriteCollision=Math.round(w$e.treeSpriteCollision/w$l);var w$L=0<w$e.FPS?Math.floor(1e3/w$e.FPS).toString():" ";w$e._fpsStr=w$e.FPS+(w$e.renderSlow?" slow":"")+" "+w$L,w$e._spriteStr=w$e.spriteCount+(w$e.spriteRenderUseCacheCount?"/"+w$e.spriteRenderUseCacheCount:""),w$e._canvasStr=w$e.canvasReCache+"/"+w$e.canvasNormal+"/"+w$e.canvasBitmap,w$e.currentMemorySize=w$R.systemResourceManager.memorySize,w$e._useCanvas?w$e.renderInfoPre():w$e.renderInfo(),w$e.clear()}w$e._count=0,w$e._timer=w$v}},w$e.renderInfoPre=function(){if(w$e._canvas){var w$v=w$e._ctx;w$v.clearRect(w$e._first?0:w$e._vx,0,w$e._width,w$e._height);for(var w$l=w$t.WebGL.mainContext,w$L=0;w$L<w$e._view.length;w$L++){var w$A=w$e._view[w$L];w$e._first&&(w$v.fillStyle="white",w$v.fillText(w$A.title,w$A.x,w$A.y,null,null,null)),w$v.fillStyle=w$A.color;var w$x=-1;if((w$A=w$e._view[w$L]).varying){if(w$l)switch(w$A.varying){case 1:w$x=w$l.getParameter(w$l[w$A.value]);break;case 2:w$x=w$l.getExtension(w$A.value)}}else w$x=w$e[w$A.value];"M"==w$A.units&&(w$x=Math.floor(w$x/1048576*100)/100+" M"),"K"==w$A.units&&(w$x=Math.floor(w$x/1024*100)/100+" K"),"string"==w$A.units&&(w$x=w$x.match(/\d+\.?\d/i)),w$v.fillText(w$x+"",w$A.x+w$e._vx,w$A.y,null,null,null)}}},w$e.renderInfo=function(){for(var w$v="",w$l=w$t.WebGL.mainContext,w$L=0;w$L<w$e._view.length;w$L++){var w$A=w$e._view[w$L],w$x=-1;if(w$A.varying){if(w$l)switch(w$A.varying){case 1:w$x=w$l.getParameter(w$l[w$A.value]);break;case 2:w$x=w$l.getExtension(w$A.value)}}else w$x=w$e[w$A.value];"M"==w$A.units&&(w$x=Math.floor(w$x/1048576*100)/100+" M"),"K"==w$A.units&&(w$x=Math.floor(w$x/1024*100)/100+" K"),"string"==w$A.units&&(w$x=w$x.match(/\d+\.?\d/i)),w$v+=w$x+"\n"}w$e._txt.text=w$v},w$e.FPS=0,w$e.loopCount=0,w$e.shaderCall=0,w$e.drawCall=0,w$e.trianglesFaces=0,w$e.spriteCount=0,w$e.spriteRenderUseCacheCount=0,w$e.treeNodeCollision=0,w$e.treeSpriteCollision=0,w$e.canvasNormal=0,w$e.canvasBitmap=0,w$e.canvasReCache=0,w$e.renderSlow=!1,w$e.currentMemorySize=0,w$e._fpsStr=null,w$e._canvasStr=null,w$e._spriteStr=null,w$e._fpsData=[],w$e._timer=0,w$e._count=0,w$e._view=[],w$e._fontSize=12,w$e._txt=null,w$e._leftText=null,w$e._sp=null,w$e._show=!1,w$e._useCanvas=!1,w$e._canvas=null,w$e._ctx=null,w$e._first=!1,w$e._vx=NaN,w$e._width=0,w$e._height=100,w$e}(),w$E=(function(){function w$v(){this._strsToID={},this._idToStrs=[],this._length=0}w$_(w$v,"laya.utils.StringKey");var w$l=w$v.prototype;w$l.add=function(w$v){var w$l=this._strsToID[w$v];return null!=w$l?w$l:(this._idToStrs[this._length]=w$v,this._strsToID[w$v]=this._length++)},w$l.getID=function(w$v){var w$l=this._strsToID[w$v];return null==w$l?-1:w$l},w$l.getName=function(w$v){var w$l=this._idToStrs[w$v];return null==w$l?void 0:w$l}}(),function(){var w$$;function w$v(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}w$_(w$v,"laya.utils.Timer");var w$l=w$v.prototype;return w$l._init=function(){w$H.timer&&w$H.timer.frameLoop(1,this,this._update)},w$l._now=function(){return Date.now()},w$l._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var w$v=this.currFrame=this.currFrame+this.scale,w$l=this._now();this._delta=(w$l-this._lastTimer)*this.scale;var w$L=this.currTimer=this.currTimer+this._delta;w$H.isDebug&&6e4<Math.abs(w$l-this._lastTimer)&&console.error("系统时间错误！"+(w$l-this._lastTimer)),this._lastTimer=w$l;var w$A=this._handlers;for(w$Z=this._count=0,w$O=w$A.length;w$Z<w$O;w$Z++)if(null!==(w$e=w$A[w$Z]).method){var w$x=w$e.userFrame?w$v:w$L;if(w$x>=w$e.exeTime)if(w$e.repeat)if(w$e.jumpFrame)for(;w$x>=w$e.exeTime;)w$e.exeTime+=w$e.delay,w$e.run(!1);else w$e.exeTime+=w$e.delay,w$e.run(!1),w$x>w$e.exeTime&&(w$e.exeTime+=Math.ceil((w$x-w$e.exeTime)/w$e.delay)*w$e.delay);else w$e.run(!0)}else this._count++;(30<this._count||w$v%200==0)&&this._clearHandlers();for(var w$m=this._laters,w$Z=0,w$O=w$m.length-1;w$Z<=w$O;w$Z++){var w$e=w$m[w$Z];this._isIgnoreRecover(w$e)||(null!==w$e.method&&(delete this._map[w$e.key],w$e.run(!1)),this._recoverHandler(w$e)),w$Z===w$O&&(w$O=w$m.length-1)}w$m.length=0}},w$l._clearHandlers=function(){for(var w$v=this._handlers,w$l=0,w$L=w$v.length;w$l<w$L;w$l++){var w$A=w$v[w$l];null!==w$A.method?this._temp.push(w$A):this._isIgnoreRecover(w$A)?this._temp.push(w$A):this._recoverHandler(w$A)}this._handlers=this._temp,this._temp=w$v,this._temp.length=0},w$l._recoverHandler=function(w$v){this._map[w$v.key]==w$v&&delete this._map[w$v.key],w$v.recover()},w$l._create=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){if(!w$L)return w$x.apply(w$A,w$m),null;if(w$Z){var w$e=this._getHandler(w$A,w$x);if(w$e)return w$e.repeat=w$l,w$e.userFrame=w$v,w$e.delay=w$L,w$e.ignoreRecover=w$O,w$e.caller=w$A,w$e.method=w$x,w$e.args=w$m,w$e.exeTime=w$L+(w$v?this.currFrame:this.currTimer+this._now()-this._lastTimer),w$e}return(w$e=w$$.create()).repeat=w$l,w$e.userFrame=w$v,w$e.delay=w$L,w$e.ignoreRecover=w$O,w$e.caller=w$A,w$e.method=w$x,w$e.args=w$m,w$e.exeTime=w$L+(w$v?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(w$e),this._handlers.push(w$e),w$e},w$l._indexHandler=function(w$v){var w$l=w$v.caller,w$L=w$v.method,w$A=w$l?w$l.$_GID||(w$l.$_GID=w$i.getGID()):0,w$x=w$L.$_TID||(w$L.$_TID=this._mid++);w$v.key=w$A+"_"+w$x,this._map[w$v.key]=w$v},w$l.once=function(w$v,w$l,w$L,w$A,w$x){void 0===w$x&&(w$x=!0),this._create(!1,!1,w$v,w$l,w$L,w$A,w$x,!1)},w$l.loop=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){void 0===w$x&&(w$x=!0),void 0===w$m&&(w$m=!1),void 0===w$Z&&(w$Z=!1);var w$O=this._create(!1,!0,w$v,w$l,w$L,w$A,w$x,w$Z);w$O&&(w$O.jumpFrame=w$m)},w$l.frameOnce=function(w$v,w$l,w$L,w$A,w$x){void 0===w$x&&(w$x=!0),this._create(!0,!1,w$v,w$l,w$L,w$A,w$x,!1)},w$l.frameLoop=function(w$v,w$l,w$L,w$A,w$x,w$m){void 0===w$x&&(w$x=!0),void 0===w$m&&(w$m=!1),this._create(!0,!0,w$v,w$l,w$L,w$A,w$x,w$m)},w$l.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+w$$._freeCount},w$l.clear=function(w$v,w$l){var w$L=this._getHandler(w$v,w$l);return!(!w$L||this._isIgnoreRecover(w$L))&&(delete this._map[w$L.key],w$L.key=null,w$L.clear(),!0)},w$l.clearAll=function(w$v){if(w$v)for(var w$l=0,w$L=this._handlers.length;w$l<w$L;w$l++){var w$A=this._handlers[w$l];w$A.caller===w$v&&(this._isIgnoreRecover(w$A)||(delete this._map[w$A.key],w$A.key=null,w$A.clear()))}},w$l._getHandler=function(w$v,w$l){var w$L=w$v?w$v.$_GID||(w$v.$_GID=w$i.getGID()):0,w$A=w$l.$_TID||(w$l.$_TID=this._mid++);return this._map[w$L+"_"+w$A]},w$l._isIgnoreRecover=function(w$v){if(w$v.ignoreRecover||w$v.caller&&"IgnoreRecover"==w$v.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var w$l="";try{arguments.propertyIsEnumerable.caller}catch(w$v){w$l=w$v.stack}w$H.recordError("报错：核心定时器销毁忽略  "+w$l)}return!0}return!1},w$l.hasHandler=function(w$v,w$l){return this._map[w$v.$_GID+"_"+w$l.$_TID]},w$l.callLater=function(w$v,w$l,w$L){if(null==this._getHandler(w$v,w$l)){var w$A=w$$.create();w$A.caller=w$v,w$A.method=w$l,w$A.args=w$L,this._indexHandler(w$A),this._laters.push(w$A)}},w$l.runCallLater=function(w$v,w$l){var w$L=this._getHandler(w$v,w$l);w$L&&null!=w$L.method&&(this._isIgnoreRecover(w$L)||(delete this._map[w$L.key],w$L.run(!0)))},w$l.runTimer=function(w$v,w$l){this.runCallLater(w$v,w$l)},w$G(0,w$l,"delta",function(){return this._delta}),w$v.__init$=function(){w$$=function(){function w$l(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}w$_(w$l,"");var w$v=w$l.prototype;return w$v.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},w$v.recover=function(){this.clear(),this.args=w$l._freeHandler,w$l._freeHandler=this,w$l._freeCount++},w$v.run=function(w$v){var w$l=this.caller;if(w$l&&w$l.destroyed)return this.clear();var w$L=this.method,w$A=this.args;w$v&&this.clear(),null!=w$L&&(w$A?w$L.apply(w$l,w$A):w$L.call(w$l))},w$l._freeHandler=null,w$l._freeCount=0,w$l.create=function(){var w$v=w$l._freeHandler;return w$v?(w$l._freeHandler=w$v.args,--w$l._freeCount,w$v.args=null,w$v):new w$l},w$l}()},w$v}()),w$s=function(){function w$o(){this.gid=0}w$_(w$o,"laya.utils.Tween");var w$v=w$o.prototype;return w$v.to=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){return void 0===w$m&&(w$m=0),void 0===w$Z&&(w$Z=!1),this._create(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,!0,!1,!0)},w$v.from=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){return void 0===w$m&&(w$m=0),void 0===w$Z&&(w$Z=!1),this._create(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,!1,!1,!0)},w$v._create=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$){if(!w$v)throw new Error("Tween:target is null");this._target=w$v,this._duration=w$L,this._ease=w$A||w$l.ease||w$o.easeNone,this._complete=w$x||w$l.complete,this._delay=w$m,this._props=[],this._usedTimer=0,this._startTimer=w$N.now(),this._usedPool=w$e,this._delayParam=null,this.update=w$l.update;var w$_=w$v.$_GID||(w$v.$_GID=w$i.getGID());return w$o.tweenMap[w$_]?(w$Z&&w$o.clearTween(w$v),w$o.tweenMap[w$_].push(this)):w$o.tweenMap[w$_]=[this],w$$?w$m<=0?this.firstStart(w$v,w$l,w$O):(this._delayParam=[w$v,w$l,w$O],w$H.scaleTimer.once(w$m,this,this.firstStart,this._delayParam)):this._initProps(w$v,w$l,w$O),this},w$v.firstStart=function(w$v,w$l,w$L){this._delayParam=null,w$v.destroyed?this.clear():(this._initProps(w$v,w$l,w$L),this._beginLoop())},w$v._initProps=function(w$v,w$l,w$L){for(var w$A in w$l)if("number"==typeof w$v[w$A]){var w$x=w$L?w$v[w$A]:w$l[w$A],w$m=w$L?w$l[w$A]:w$v[w$A];this._props.push([w$A,w$x,w$m-w$x]),w$L||(w$v[w$A]=w$x)}},w$v._beginLoop=function(){w$H.scaleTimer.frameLoop(1,this,this._doEase)},w$v._doEase=function(){this._updateEase(w$N.now())},w$v._updateEase=function(w$v){var w$l=this._target;if(w$l){if(w$l.destroyed)return w$o.clearTween(w$l);var w$L=this._usedTimer=w$v-this._startTimer-this._delay;if(!(w$L<0)){if(w$L>=this._duration)return this.complete();for(var w$A=0<w$L?this._ease(w$L,0,1,this._duration):0,w$x=this._props,w$m=0,w$Z=w$x.length;w$m<w$Z;w$m++){var w$O=w$x[w$m];w$l[w$O[0]]=w$O[1]+w$A*w$O[2]}this.update&&this.update.run()}}},w$v.complete=function(){if(this._target){w$H.scaleTimer.runTimer(this,this.firstStart);for(var w$v=this._target,w$l=this._props,w$L=this._complete,w$A=0,w$x=w$l.length;w$A<w$x;w$A++){var w$m=w$l[w$A];w$v[w$m[0]]=w$m[1]+w$m[2]}this.update&&this.update.run(),this.clear(),w$L&&w$L.run()}},w$v.pause=function(){w$H.scaleTimer.clear(this,this._beginLoop),w$H.scaleTimer.clear(this,this._doEase),w$H.scaleTimer.clear(this,this.firstStart);var w$v;(w$v=w$N.now()-this._startTimer-this._delay)<0&&(this._usedTimer=w$v)},w$v.setStartTime=function(w$v){this._startTimer=w$v},w$v.clear=function(){this._target&&(this._remove(),this._clear())},w$v._clear=function(){this.pause(),w$H.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,w$y.recover("tween",this))},w$v.recover=function(){this._usedPool=!0,this._clear()},w$v._remove=function(){var w$v=w$o.tweenMap[this._target.$_GID];if(w$v)for(var w$l=0,w$L=w$v.length;w$l<w$L;w$l++)if(w$v[w$l]===this){w$v.splice(w$l,1);break}},w$v.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=w$N.now(),this._delayParam)w$H.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var w$v=this._props,w$l=0,w$L=w$v.length;w$l<w$L;w$l++){var w$A=w$v[w$l];this._target[w$A[0]]=w$A[1]}w$H.scaleTimer.once(this._delay,this,this._beginLoop)}},w$v.resume=function(){this._usedTimer>=this._duration||(this._startTimer=w$N.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?w$H.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},w$G(0,w$v,"progress",null,function(w$v){var w$l=w$v*this._duration;this._startTimer=w$N.now()-this._delay-w$l}),w$o.to=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){return void 0===w$m&&(w$m=0),void 0===w$Z&&(w$Z=!1),void 0===w$O&&(w$O=!0),w$y.getItemByClass("tween",w$o)._create(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,!0,w$O,!0)},w$o.from=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){return void 0===w$m&&(w$m=0),void 0===w$Z&&(w$Z=!1),void 0===w$O&&(w$O=!0),w$y.getItemByClass("tween",w$o)._create(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,!1,w$O,!0)},w$o.clearAll=function(w$v){if(w$v&&w$v.$_GID){var w$l=w$o.tweenMap[w$v.$_GID];if(w$l){for(var w$L=0,w$A=w$l.length;w$L<w$A;w$L++)w$l[w$L]._clear();w$l.length=0}}},w$o.clear=function(w$v){w$v.clear()},w$o.clearTween=function(w$v){w$o.clearAll(w$v)},w$o.easeNone=function(w$v,w$l,w$L,w$A){return w$L*w$v/w$A+w$l},w$o.tweenMap={},w$o}(),w$i=function(){function w$O(){}return w$_(w$O,"laya.utils.Utils"),w$O.toRadian=function(w$v){return w$v*w$O._pi2},w$O.toAngle=function(w$v){return w$v*w$O._pi},w$O.toHexColor=function(w$v){if(w$v<0||isNaN(w$v))return null;for(var w$l=w$v.toString(16);w$l.length<6;)w$l="0"+w$l;return"#"+w$l},w$O.getGID=function(){return w$O._gid++},w$O.concatArray=function(w$v,w$l){if(!w$l)return w$v;if(!w$v)return w$l;var w$L=0,w$A=w$l.length;for(w$L=0;w$L<w$A;w$L++)w$v.push(w$l[w$L]);return w$v},w$O.clearArray=function(w$v){return w$v&&(w$v.length=0),w$v},w$O.copyArray=function(w$v,w$l){if(w$v||(w$v=[]),!w$l)return w$v;w$v.length=w$l.length;var w$L=0,w$A=w$l.length;for(w$L=0;w$L<w$A;w$L++)w$v[w$L]=w$l[w$L];return w$v},w$O.getGlobalRecByPoints=function(w$v,w$l,w$L,w$A,w$x){var w$m,w$Z;return w$m=new w$g(w$l,w$L),w$m=w$v.localToGlobal(w$m),w$Z=new w$g(w$A,w$x),w$Z=w$v.localToGlobal(w$Z),w$T._getWrapRec([w$m.x,w$m.y,w$Z.x,w$Z.y])},w$O.getGlobalPosAndScale=function(w$v){return w$O.getGlobalRecByPoints(w$v,0,0,1,1)},w$O.bind=function(w$v,w$l){return w$v.bind(w$l)},w$O.measureText=function(w$v,w$l){return w$Q.measureText(w$v,w$l)},w$O.updateOrder=function(w$v){if(!w$v||w$v.length<2)return!1;for(var w$l,w$L=1,w$A=0,w$x=w$v.length,w$m=NaN;w$L<w$x;){for(w$l=w$v[w$A=w$L],w$m=w$v[w$A]._zOrder;-1<--w$A&&w$v[w$A]._zOrder>w$m;)w$v[w$A+1]=w$v[w$A];w$v[w$A+1]=w$l,w$L++}var w$Z=w$l.parent.conchModel;if(w$Z)if(null!=w$Z.updateZOrder)w$Z.updateZOrder();else{for(w$L=0;w$L<w$x;w$L++)w$Z.removeChild(w$v[w$L].conchModel);for(w$L=0;w$L<w$x;w$L++)w$Z.addChildAt(w$v[w$L].conchModel,w$L)}return!0},w$O.transPointList=function(w$v,w$l,w$L){var w$A=0,w$x=w$v.length;for(w$A=0;w$A<w$x;w$A+=2)w$v[w$A]+=w$l,w$v[w$A+1]+=w$L},w$O.parseInt=function(w$v,w$l){void 0===w$l&&(w$l=0);var w$L=w$N.window.parseInt(w$v,w$l);return isNaN(w$L)?0:w$L},w$O.getFileExtension=function(w$v){w$O._extReg.lastIndex=w$v.lastIndexOf(".");var w$l=w$O._extReg.exec(w$v);return w$l&&1<w$l.length?w$l[1].toLowerCase():null},w$O.getTransformRelativeToWindow=function(w$v,w$l,w$L){var w$A=w$H.stage,w$x=laya.utils.Utils.getGlobalPosAndScale(w$v),w$m=w$A._canvasTransform.clone(),w$Z=w$m.tx,w$O=w$m.ty;w$m.rotate(-Math.PI/180*w$H.stage.canvasDegree),w$m.scale(w$H.stage.clientScaleX,w$H.stage.clientScaleY);var w$e=w$H.stage.canvasDegree%180!=0,w$$=NaN,w$_=NaN;w$e?(w$$=w$L+w$x.y,w$_=w$l+w$x.x,w$$*=w$m.d,w$_*=w$m.a,90==w$H.stage.canvasDegree?(w$$=w$Z-w$$,w$_+=w$O):(w$$+=w$Z,w$_=w$O-w$_)):(w$$=w$l+w$x.x,w$_=w$L+w$x.y,w$$*=w$m.a,w$_*=w$m.d,w$$+=w$Z,w$_+=w$O);var w$o=NaN,w$K=NaN;return w$K=w$e?(w$o=w$m.d*w$x.height,w$m.a*w$x.width):(w$o=w$m.a*w$x.width,w$m.d*w$x.height),{x:w$$,y:w$_,scaleX:w$o,scaleY:w$K}},w$O.fitDOMElementInArea=function(w$v,w$l,w$L,w$A,w$x,w$m){w$v._fitLayaAirInitialized||(w$v._fitLayaAirInitialized=!0,w$v.style.transformOrigin=w$v.style.webKittransformOrigin="left top",w$v.style.position="absolute");var w$Z=w$O.getTransformRelativeToWindow(w$l,w$L,w$A);w$v.style.transform=w$v.style.webkitTransform="scale("+w$Z.scaleX+","+w$Z.scaleY+") rotate("+w$H.stage.canvasDegree+"deg)",w$v.style.width=w$x+"px",w$v.style.height=w$m+"px",w$v.style.left=w$Z.x+"px",w$v.style.top=w$Z.y+"px"},w$O.isOkTextureList=function(w$v){if(!w$v)return!1;var w$l,w$L=0,w$A=w$v.length;for(w$L=0;w$L<w$A;w$L++)if(!(w$l=w$v[w$L])||!w$l.source)return!1;return!0},w$O.isOKCmdList=function(w$v){if(!w$v)return!1;var w$l,w$L,w$A=0,w$x=w$v.length,w$m=w$t._context;for(w$A=0;w$A<w$x;w$A++)switch((w$l=w$v[w$A]).callee){case w$m._drawTexture:case w$m._fillTexture:case w$m._drawTextureWithTransform:if(!(w$L=w$l[0])||!w$L.source)return!1}return!0},w$O._gid=1,w$O._pi=180/Math.PI,w$O._pi2=Math.PI/180,w$O._extReg=/\.(\w+)\??/g,w$O.parseXMLFromString=function(w$v){var w$l;if(w$v=w$v.replace(/>\s+</g,"><"),-1<(w$l=(new DOMParser).parseFromString(w$v,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(w$l.firstChild.firstChild.textContent);return w$l},w$O}(),w$n=function(){function w$v(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],w$t.isWebGL&&w$j.regCacheByFunction(w$i.bind(this.startDispose,this),w$i.bind(this.getCacheList,this))}w$_(w$v,"laya.utils.VectorGraphManager");var w$l=w$v.prototype;return w$l.getId=function(){return this._id++},w$l.addShape=function(w$v,w$l){this.shapeDic[w$v]=w$l,this.useDic[w$v]||(this.useDic[w$v]=!0)},w$l.addLine=function(w$v,w$l){this.shapeLineDic[w$v]=w$l,this.shapeLineDic[w$v]||(this.shapeLineDic[w$v]=!0)},w$l.getShape=function(w$v){this._checkKey&&null!=this.useDic[w$v]&&(this.useDic[w$v]=!0)},w$l.deleteShape=function(w$v){this.shapeDic[w$v]&&(this.shapeDic[w$v]=null,delete this.shapeDic[w$v]),this.shapeLineDic[w$v]&&(this.shapeLineDic[w$v]=null,delete this.shapeLineDic[w$v]),null!=this.useDic[w$v]&&delete this.useDic[w$v]},w$l.getCacheList=function(){var w$v,w$l=[];for(w$v in this.shapeDic)w$l.push(this.shapeDic[w$v]);for(w$v in this.shapeLineDic)w$l.push(this.shapeLineDic[w$v]);return w$l},w$l.startDispose=function(w$v){var w$l;for(w$l in this.useDic)this.useDic[w$l]=!1;this._checkKey=!0},w$l.endDispose=function(){if(this._checkKey){var w$v;for(w$v in this.useDic)this.useDic[w$v]||this.deleteShape(w$v);this._checkKey=!1}},w$v.getInstance=function(){return w$v.instance=w$v.instance||new w$v},w$v.instance=null,w$v}(),w$U=function(){function w$A(){this._obj=null,this._obj=w$A.supportWeakMap?new w$N.window.WeakMap:{},w$A.supportWeakMap||w$A._maps.push(this)}w$_(w$A,"laya.utils.WeakObject");var w$v=w$A.prototype;return w$v.set=function(w$v,w$l){if(null!=w$v)if(w$A.supportWeakMap){var w$L=w$v;"string"!=typeof w$v&&"number"!=typeof w$v||(w$L=w$A._keys[w$v])||(w$L=w$A._keys[w$v]={k:w$v}),this._obj.set(w$L,w$l)}else"string"==typeof w$v||"number"==typeof w$v?this._obj[w$v]=w$l:(w$v.$_GID||(w$v.$_GID=w$i.getGID()),this._obj[w$v.$_GID]=w$l)},w$v.get=function(w$v){if(null==w$v)return null;if(w$A.supportWeakMap){var w$l="string"==typeof w$v||"number"==typeof w$v?w$A._keys[w$v]:w$v;return w$l?this._obj.get(w$l):null}return"string"==typeof w$v||"number"==typeof w$v?this._obj[w$v]:this._obj[w$v.$_GID]},w$v.del=function(w$v){if(null!=w$v)if(w$A.supportWeakMap){var w$l="string"==typeof w$v||"number"==typeof w$v?w$A._keys[w$v]:w$v;if(!w$l)return;this._obj.delete(w$l)}else"string"==typeof w$v||"number"==typeof w$v?delete this._obj[w$v]:delete this._obj[this._obj.$_GID]},w$v.has=function(w$v){if(null==w$v)return!1;if(w$A.supportWeakMap){var w$l="string"==typeof w$v||"number"==typeof w$v?w$A._keys[w$v]:w$v;return this._obj.has(w$l)}return"string"==typeof w$v||"number"==typeof w$v?null!=this._obj[w$v]:null!=this._obj[this._obj.$_GID]},w$A.__init__=function(){(w$A.supportWeakMap=null!=w$N.window.WeakMap)||w$H.timer.loop(w$A.delInterval,null,w$A.clearCache)},w$A.clearCache=function(){for(var w$v=0,w$l=w$A._maps.length;w$v<w$l;w$v++){w$A._maps[w$v]._obj={}}},w$A.supportWeakMap=!1,w$A.delInterval=3e5,w$A._keys={},w$A._maps=[],w$e(w$A,["I",function(){return this.I=new w$A}]),w$A}(),w$z=function(){function w$v(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}w$_(w$v,"laya.utils.WordText");var w$l=w$v.prototype;return w$l.setText=function(w$v){this.changed=!0,this._text=w$v},w$l.toString=function(){return this._text},w$l.charCodeAt=function(w$v){return this._text?this._text.charCodeAt(w$v):NaN},w$l.charAt=function(w$v){return this._text?this._text.charAt(w$v):null},w$G(0,w$l,"length",function(){return this._text?this._text.length:0}),w$v}(),w$vv=function(w$v){function w$Z(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,w$Z.__super.call(this),this._childs=w$Z.ARRAY_EMPTY,this._$P=w$Z.PROP_EMPTY,this.timer=w$H.scaleTimer,this.conchModel=w$t.isConchNode?this.createConchModel():null}w$_(w$Z,"laya.display.Node",w$$);var w$l=w$Z.prototype;return w$l._setBit=function(w$v,w$l){1==w$v&&(this._getBit(w$v)!=w$l&&this._updateDisplayedInstage());w$l?this._bits|=w$v:this._bits&=~w$v},w$l._getBit=function(w$v){return 0!=(this._bits&w$v)},w$l._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},w$l._setUpNoticeType=function(w$v){var w$l=this;for(w$l._setBit(w$v,!0),w$l=w$l.parent;w$l;){if(w$l._getBit(w$v))return;w$l._setBit(w$v,!0),w$l=w$l.parent}},w$l.on=function(w$v,w$l,w$L,w$A){return"display"!==w$v&&"undisplay"!==w$v||this._getBit(1)||this._setUpNoticeType(1),this._createListener(w$v,w$l,w$L,w$A,!1)},w$l.once=function(w$v,w$l,w$L,w$A){return"display"!==w$v&&"undisplay"!==w$v||this._getBit(1)||this._setUpNoticeType(1),this._createListener(w$v,w$l,w$L,w$A,!0)},w$l.createConchModel=function(){return null},w$l.destroy=function(w$v){void 0===w$v&&(w$v=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(w$v?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},w$l.destroyChildren=function(){if(this._childs)for(var w$v=this._childs.length-1;-1<w$v;w$v--)this._childs[w$v].destroy(!0)},w$l.addChild=function(w$v){if(!w$v||this.destroyed||w$v===this)return w$v;if(w$v.zOrder&&this._set$P("hasZorder",!0),w$v._parent===this){var w$l=this.getChildIndex(w$v);w$l!==this._childs.length-1&&(this._childs.splice(w$l,1),this._childs.push(w$v),this.conchModel&&(this.conchModel.removeChild(w$v.conchModel),this.conchModel.addChildAt(w$v.conchModel,this._childs.length-1)),this._childChanged())}else w$v.parent&&w$v.parent.removeChild(w$v),this._childs===w$Z.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(w$v),this.conchModel&&this.conchModel.addChildAt(w$v.conchModel,this._childs.length-1),(w$v.parent=this)._childChanged();return w$v},w$l.addChildren=function(w$v){for(var w$l=arguments,w$L=0,w$A=w$l.length;w$L<w$A;)this.addChild(w$l[w$L++])},w$l.addChildAt=function(w$v,w$l){if(!w$v||this.destroyed||w$v===this)return w$v;if(w$v.zOrder&&this._set$P("hasZorder",!0),0<=w$l&&w$l<=this._childs.length){if(w$v._parent===this){var w$L=this.getChildIndex(w$v);this._childs.splice(w$L,1),this._childs.splice(w$l,0,w$v),this.conchModel&&(this.conchModel.removeChild(w$v.conchModel),this.conchModel.addChildAt(w$v.conchModel,w$l)),this._childChanged()}else w$v.parent&&w$v.parent.removeChild(w$v),this._childs===w$Z.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(w$l,0,w$v),this.conchModel&&this.conchModel.addChildAt(w$v.conchModel,w$l),w$v.parent=this;return w$v}throw new Error("appendChildAt:The index is out of bounds")},w$l.getChildIndex=function(w$v){return this._childs.indexOf(w$v)},w$l.getChildByName=function(w$v){var w$l=this._childs;if(w$l)for(var w$L=0,w$A=w$l.length;w$L<w$A;w$L++){var w$x=w$l[w$L];if(w$x.name===w$v)return w$x}return null},w$l._get$P=function(w$v){return this._$P[w$v]},w$l._set$P=function(w$v,w$l){return this.destroyed||(this._$P===w$Z.PROP_EMPTY&&(this._$P={}),this._$P[w$v]=w$l),w$l},w$l.getChildAt=function(w$v){return this._childs[w$v]},w$l.setChildIndex=function(w$v,w$l){var w$L=this._childs;if(w$l<0||w$l>=w$L.length)throw new Error("setChildIndex:The index is out of bounds.");var w$A=this.getChildIndex(w$v);if(w$A<0)throw new Error("setChildIndex:node is must child of this object.");return w$L.splice(w$A,1),w$L.splice(w$l,0,w$v),this.conchModel&&(this.conchModel.removeChild(w$v.conchModel),this.conchModel.addChildAt(w$v.conchModel,w$l)),this._childChanged(),w$v},w$l._childChanged=function(w$v){},w$l.removeChild=function(w$v){if(!this._childs)return w$v;var w$l=this._childs.indexOf(w$v);return this.removeChildAt(w$l)},w$l.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},w$l.removeChildByName=function(w$v){var w$l=this.getChildByName(w$v);return w$l&&this.removeChild(w$l),w$l},w$l.removeChildAt=function(w$v){var w$l=this.getChildAt(w$v);if(w$l){for(var w$L=this._childs.length-1,w$A=w$v;w$A<w$L;++w$A)this._childs[w$A]=this._childs[w$A+1];this._childs.length=w$L,this.conchModel&&this.conchModel.removeChild(w$l.conchModel),w$l.parent=null}return w$l},w$l.removeChildren=function(w$v,w$l){if(void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=2147483647),this._childs&&0<this._childs.length){var w$L=this._childs;if(0===w$v&&w$m<=w$l){var w$A=w$L;this._childs=w$Z.ARRAY_EMPTY}else w$A=w$L.splice(w$v,w$l-w$v);for(var w$x=0,w$m=w$A.length;w$x<w$m;w$x++)w$A[w$x].parent=null,this.conchModel&&this.conchModel.removeChild(w$A[w$x].conchModel)}return this},w$l.replaceChild=function(w$v,w$l){var w$L=this._childs.indexOf(w$l);return-1<w$L?(this._childs.splice(w$L,1,w$v),this.conchModel&&(this.conchModel.removeChild(w$l.conchModel),this.conchModel.addChildAt(w$v.conchModel,w$L)),w$l.parent=null,w$v.parent=this,w$v):null},w$l._updateDisplayedInstage=function(){var w$v;w$v=this;var w$l=w$H.stage;for(this._displayedInStage=!1;w$v;){if(w$v._getBit(1)){this._displayedInStage=w$v._displayedInStage;break}if(w$v==w$l||w$v._displayedInStage){this._displayedInStage=!0;break}w$v=w$v.parent}},w$l._setDisplay=function(w$v){this._displayedInStage!==w$v&&((this._displayedInStage=w$v)?this.event("display"):this.event("undisplay"))},w$l._displayChild=function(w$v,w$l){var w$L=w$v._childs;if(w$L)for(var w$A=0;w$A<w$L.length;w$A++){var w$x=w$L[w$A];w$x&&w$x._getBit(1)&&(0<w$x._childs.length?this._displayChild(w$x,w$l):w$x._setDisplay(w$l))}w$v._setDisplay(w$l)},w$l.contains=function(w$v){if(w$v===this)return!0;for(;w$v;){if(w$v.parent===this)return!0;w$v=w$v.parent}return!1},w$l.timerLoop=function(w$v,w$l,w$L,w$A,w$x,w$m){void 0===w$x&&(w$x=!0),void 0===w$m&&(w$m=!1),this.timer.loop(w$v,w$l,w$L,w$A,w$x,w$m)},w$l.timerOnce=function(w$v,w$l,w$L,w$A,w$x){void 0===w$x&&(w$x=!0),this.timer._create(!1,!1,w$v,w$l,w$L,w$A,w$x)},w$l.frameLoop=function(w$v,w$l,w$L,w$A,w$x){void 0===w$x&&(w$x=!0),this.timer._create(!0,!0,w$v,w$l,w$L,w$A,w$x)},w$l.frameOnce=function(w$v,w$l,w$L,w$A,w$x){void 0===w$x&&(w$x=!0),this.timer._create(!0,!1,w$v,w$l,w$L,w$A,w$x)},w$l.clearTimer=function(w$v,w$l){this.timer.clear(w$v,w$l)},w$G(0,w$l,"numChildren",function(){return this._childs.length}),w$G(0,w$l,"destroyed",function(){return this._destroyed}),w$G(0,w$l,"parent",function(){return this._parent},function(w$v){this._parent!==w$v&&(w$v?(this._parent=w$v,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),w$v.displayedInStage&&this._displayChild(this,!0)),w$v._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=w$v))}),w$G(0,w$l,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),w$Z.ARRAY_EMPTY=[],w$Z.PROP_EMPTY={},w$Z.NOTICE_DISPLAY=1,w$Z.MOUSEENABLE=2,w$Z}(),w$lv=function(w$v){function w$K(w$v){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,w$K.__super.call(this),this._padding=w$K._PADDING,this._spacing=w$K._SPACING,this._aligns=w$K._ALIGNS,this._font=w$r.EMPTY,this._ower=w$v}w$_(w$K,"laya.display.css.CSSStyle",w$v);var w$l=w$K.prototype;return w$l.destroy=function(){this._ower=null,this._font=null,this._rect=null},w$l.inherit=function(w$v){this._font=w$v._font,this._spacing=w$v._spacing===w$K._SPACING?w$K._SPACING:w$v._spacing.slice(),this.lineHeight=w$v.lineHeight},w$l._widthAuto=function(){return 0!=(262144&this._type)},w$l.widthed=function(w$v){return 0!=(8&this._type)},w$l._calculation=function(w$v,w$l){if(w$l.indexOf("%")<0)return!1;var w$A=this._ower,w$x=w$A.parent,w$m=this._rect;function w$Z(w$v,w$l,w$L){return w$v*w$L[0]+w$l*w$L[1]+w$L[2]}function w$L(w$v){var w$l=w$x.width,w$L=w$A.width;w$m.width&&(w$A.width=w$Z(w$l,w$L,w$m.width)),w$m.height&&(w$A.height=w$Z(w$l,w$L,w$m.height)),w$m.left&&(w$A.x=w$Z(w$l,w$L,w$m.left)),w$m.top&&(w$A.y=w$Z(w$l,w$L,w$m.top))}null===w$m&&(w$x._getCSSStyle()._type|=524288,w$x.on("resize",this,w$L),this._rect=w$m={input:{}});var w$O=w$l.split(" ");return w$O[0]=parseFloat(w$O[0])/100,1==w$O.length?w$O[1]=w$O[2]=0:(w$O[1]=parseFloat(w$O[1])/100,w$O[2]=parseFloat(w$O[2])),w$m[w$v]=w$O,w$m.input[w$v]=w$l,w$L(),!0},w$l.heighted=function(w$v){return 0!=(8192&this._type)},w$l.size=function(w$v,w$l){var w$L=this._ower,w$A=!1;-1!==w$v&&w$v!=this._ower.width&&(this._type|=8,this._ower.width=w$v,w$A=!0),-1!==w$l&&w$l!=this._ower.height&&(this._type|=8192,this._ower.height=w$l,w$A=!0),w$A&&(w$L._layoutLater(),524288&this._type&&w$L.event("resize",this))},w$l._getAlign=function(){return this._aligns[0]},w$l._getValign=function(){return this._aligns[1]},w$l._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},w$l._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new w$r(this._font))},w$l.render=function(w$v,w$l,w$L,w$A){var w$x=w$v.width,w$m=w$v.height;w$L-=w$v.pivotX,w$A-=w$v.pivotY,this._bgground&&null!=this._bgground.color&&w$l.ctx.fillRect(w$L,w$A,w$x,w$m,this._bgground.color),this._border&&this._border.color&&w$l.drawRect(w$L,w$A,w$x,w$m,this._border.color.strColor,this._border.size)},w$l.getCSSStyle=function(){return this},w$l.cssText=function(w$v){this.attrs(w$K.parseOneCSS(w$v,";"))},w$l.attrs=function(w$v){if(w$v)for(var w$l=0,w$L=w$v.length;w$l<w$L;w$l++){var w$A=w$v[w$l];this[w$A[0]]=w$A[1]}},w$l.setTransform=function(w$v){"none"===w$v?this._tf=w$O._TF_EMPTY:this.attrs(w$K.parseOneCSS(w$v,","))},w$l.translate=function(w$v,w$l){this._tf===w$O._TF_EMPTY&&(this._tf=new w$x),this._tf.translateX=w$v,this._tf.translateY=w$l},w$l.scale=function(w$v,w$l){this._tf===w$O._TF_EMPTY&&(this._tf=new w$x),this._tf.scaleX=w$v,this._tf.scaleY=w$l},w$l._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},w$G(0,w$l,"block",w$v.prototype._$get_block,function(w$v){w$v?this._type|=1:this._type&=-2}),w$G(0,w$l,"valign",function(){return w$K._valigndef[this._aligns[1]]},function(w$v){this._aligns===w$K._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=w$K._valigndef[w$v]}),w$G(0,w$l,"height",null,function(w$v){if(this._type|=8192,"string"==typeof w$v){if(this._calculation("height",w$v))return;w$v=parseInt(w$v)}this.size(-1,w$v)}),w$G(0,w$l,"width",null,function(w$v){if(this._type|=8,"string"==typeof w$v){var w$l=w$v.indexOf("auto");if(0<=w$l&&(this._type|=262144,w$v=w$v.substr(0,w$l)),this._calculation("width",w$v))return;w$v=parseInt(w$v)}this.size(w$v,-1)}),w$G(0,w$l,"fontWeight",function(){return this._font.weight},function(w$v){this._createFont().weight=w$v}),w$G(0,w$l,"left",null,function(w$v){var w$l=this._ower;if("string"==typeof w$v){if("center"===w$v?w$v="50% -50% 0":"right"===w$v&&(w$v="100% -100% 0"),this._calculation("left",w$v))return;w$v=parseInt(w$v)}w$l.x=w$v}),w$G(0,w$l,"_translate",null,function(w$v){this.translate(w$v[0],w$v[1])}),w$G(0,w$l,"absolute",function(){return 0!=(4&this._type)}),w$G(0,w$l,"top",null,function(w$v){var w$l=this._ower;if("string"==typeof w$v){if("middle"===w$v?w$v="50% -50% 0":"bottom"===w$v&&(w$v="100% -100% 0"),this._calculation("top",w$v))return;w$v=parseInt(w$v)}w$l.y=w$v}),w$G(0,w$l,"align",function(){return w$K._aligndef[this._aligns[0]]},function(w$v){this._aligns===w$K._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=w$K._aligndef[w$v]}),w$G(0,w$l,"bold",function(){return this._font.bold},function(w$v){this._createFont().bold=w$v}),w$G(0,w$l,"padding",function(){return this._padding},function(w$v){this._padding=w$v}),w$G(0,w$l,"leading",function(){return this._spacing[1]},function(w$v){"string"==typeof w$v&&(w$v=parseInt(w$v+"")),this._spacing===w$K._SPACING&&(this._spacing=[0,0]),this._spacing[1]=w$v}),w$G(0,w$l,"lineElement",function(){return 0!=(65536&this._type)},function(w$v){w$v?this._type|=65536:this._type&=-65537}),w$G(0,w$l,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(w$v){this.lineElement=!1,"right"===w$v?this._type|=32768:this._type&=-32769}),w$G(0,w$l,"textDecoration",function(){return this._font.decoration},function(w$v){this._createFont().decoration=w$v}),w$G(0,w$l,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(w$v){"nowrap"===w$v&&(this._type|=131072),"none"===w$v&&(this._type&=-131073)}),w$G(0,w$l,"background",null,function(w$v){w$v?(this._bgground||(this._bgground={}),this._bgground.color=w$v,this._ower.conchModel&&this._ower.conchModel.bgColor(w$v),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),w$G(0,w$l,"wordWrap",function(){return 0==(131072&this._type)},function(w$v){w$v?this._type&=-131073:this._type|=131072}),w$G(0,w$l,"color",function(){return this._font.color},function(w$v){this._createFont().color=w$v}),w$G(0,w$l,"password",function(){return this._font.password},function(w$v){this._createFont().password=w$v}),w$G(0,w$l,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(w$v){"none"===w$v?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=w$v),this._ower.conchModel&&this._ower.conchModel.bgColor(w$v),this._ower._renderType|=256}),w$G(0,w$l,"font",function(){return this._font.toString()},function(w$v){this._createFont().set(w$v)}),w$G(0,w$l,"weight",null,function(w$v){this._createFont().weight=w$v}),w$G(0,w$l,"letterSpacing",function(){return this._spacing[0]},function(w$v){"string"==typeof w$v&&(w$v=parseInt(w$v+"")),this._spacing===w$K._SPACING&&(this._spacing=[0,0]),this._spacing[0]=w$v}),w$G(0,w$l,"fontSize",function(){return this._font.size},function(w$v){this._createFont().size=w$v}),w$G(0,w$l,"italic",function(){return this._font.italic},function(w$v){this._createFont().italic=w$v}),w$G(0,w$l,"fontFamily",function(){return this._font.family},function(w$v){this._createFont().family=w$v}),w$G(0,w$l,"stroke",function(){return this._font.stroke[0]},function(w$v){this._createFont().stroke===w$r._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=w$v}),w$G(0,w$l,"strokeColor",function(){return this._font.stroke[1]},function(w$v){this._createFont().stroke===w$r._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=w$v}),w$G(0,w$l,"border",function(){return this._border?this._border.value:""},function(w$v){if("none"!=w$v){this._border||(this._border={});var w$l=(this._border.value=w$v).split(" ");if(this._border.color=w$p.create(w$l[w$l.length-1]),1==w$l.length)return this._border.size=1,void(this._border.type="solid");var w$L=0;0<w$l[0].indexOf("px")?(this._border.size=parseInt(w$l[0]),w$L++):this._border.size=1,this._border.type=w$l[w$L],this._ower._renderType|=256}else this._border=null}),w$G(0,w$l,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(w$v){w$v?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==w$v?null:w$p.create(w$v),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),w$G(0,w$l,"position",function(){return 4&this._type?"absolute":""},function(w$v){"absolute"==w$v?this._type|=4:this._type&=-5}),w$G(0,w$l,"display",null,function(w$v){switch(w$v){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),w$G(0,w$l,"paddingLeft",function(){return this.padding[3]}),w$G(0,w$l,"paddingTop",function(){return this.padding[0]}),w$G(0,w$l,"_scale",null,function(w$v){this._ower.scale(w$v[0],w$v[1])}),w$G(0,w$l,"_rotate",null,function(w$v){this._ower.rotation=w$v}),w$K.parseOneCSS=function(w$v,w$l){for(var w$L,w$A=[],w$x=w$v.split(w$l),w$m=0,w$Z=w$x.length;w$m<w$Z;w$m++){var w$O=w$x[w$m],w$e=w$O.indexOf(":"),w$$=w$O.substr(0,w$e).replace(/^\s+|\s+$/g,"");if(0!=w$$.length){var w$_=w$O.substr(w$e+1).replace(/^\s+|\s+$/g,""),w$o=[w$$,w$_];switch(w$$){case"italic":case"bold":w$o[1]="true"==w$_;break;case"line-height":w$o[0]="lineHeight",w$o[1]=parseInt(w$_);break;case"font-size":w$o[0]="fontSize",w$o[1]=parseInt(w$_);break;case"padding":1<(w$L=w$_.split(" ")).length||(w$L[1]=w$L[2]=w$L[3]=w$L[0]),w$o[1]=[parseInt(w$L[0]),parseInt(w$L[1]),parseInt(w$L[2]),parseInt(w$L[3])];break;case"rotate":w$o[0]="_rotate",w$o[1]=parseFloat(w$_);break;case"scale":w$L=w$_.split(" "),w$o[0]="_scale",w$o[1]=[parseFloat(w$L[0]),parseFloat(w$L[1])];break;case"translate":w$L=w$_.split(" "),w$o[0]="_translate",w$o[1]=[parseInt(w$L[0]),parseInt(w$L[1])];break;default:(w$o[0]=w$K._CSSTOVALUE[w$$])||(w$o[0]=w$$)}w$A.push(w$o)}}return w$A},w$K.parseCSS=function(w$v,w$l){for(var w$L;null!=(w$L=w$K._parseCSSRegExp.exec(w$v));)w$K.styleSheets[w$L[1]]=w$K.parseOneCSS(w$L[2],";")},w$K.EMPTY=new w$K(null),w$K._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},w$K._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),w$K._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},w$K._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},w$K.styleSheets={},w$K.ALIGN_CENTER=1,w$K.ALIGN_RIGHT=2,w$K.VALIGN_MIDDLE=1,w$K.VALIGN_BOTTOM=2,w$K._CSS_BLOCK=1,w$K._DISPLAY_NONE=2,w$K._ABSOLUTE=4,w$K._WIDTH_SET=8,w$K._PADDING=[0,0,0,0],w$K._RECT=[-1,-1,-1,-1],w$K._SPACING=[0,0],w$K._ALIGNS=[0,0,0],w$K.ADDLAYOUTED=512,w$K._NEWFONT=4096,w$K._HEIGHT_SET=8192,w$K._BACKGROUND_SET=16384,w$K._FLOAT_RIGHT=32768,w$K._LINE_ELEMENT=65536,w$K._NOWARP=131072,w$K._WIDTHAUTO=262144,w$K._LISTERRESZIE=524288,w$K}(w$O),w$Lv=function(w$v){function w$Z(){this.url=null,this.audio=null,this.loaded=!1,w$Z.__super.call(this)}w$_(w$Z,"laya.media.h5audio.AudioSound",w$$);var w$l=w$Z.prototype;return w$l.dispose=function(){var w$v=w$Z._audioCache[this.url];w$v&&(w$v.src="",delete w$Z._audioCache[this.url])},w$l.load=function(w$v){var w$l;if(w$v=w$I.formatURL(w$v),(this.url=w$v)==w$k._tMusic?(w$Z._initMusicAudio(),(w$l=w$Z._musicAudio).src!=w$v&&(w$Z._audioCache[w$l.src]=null,w$l=null)):w$l=w$Z._audioCache[w$v],w$l&&2<=w$l.readyState)this.event("complete");else{w$l||(w$l=w$v==w$k._tMusic?(w$Z._initMusicAudio(),w$Z._musicAudio):w$N.createElement("audio"),(w$Z._audioCache[w$v]=w$l).src=w$v),w$l.addEventListener("canplaythrough",w$A),w$l.addEventListener("error",w$x);var w$L=this;(this.audio=w$l).load?w$l.load():w$x()}function w$A(){w$m(),w$L.loaded=!0,w$L.event("complete")}function w$x(){w$l.load=null,w$m(),w$L.event("error")}function w$m(){w$l.removeEventListener("canplaythrough",w$A),w$l.removeEventListener("error",w$x)}},w$l.play=function(w$v,w$l,w$L){if(void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=0),!this.url)return null;var w$A,w$x;if(!(w$A=this.url==w$k._tMusic?w$Z._musicAudio:w$Z._audioCache[this.url]))return null;w$x=w$y.getItem("audio:"+this.url),w$t.isConchApp?w$x||((w$x=w$N.createElement("audio")).src=this.url):this.url==w$k._tMusic?(w$Z._initMusicAudio(),(w$x=w$Z._musicAudio).src=this.url):w$x=w$x||w$A.cloneNode(!0);var w$m=new w$Kv(w$x);return w$m.url=this.url,w$m.loops=w$l,w$m.startTime=w$v,w$m.startHandler=w$L,w$m.play(!1),w$k.addChannel(w$m),w$m},w$G(0,w$l,"duration",function(){var w$v;return(w$v=w$Z._audioCache[this.url])?w$v.duration:0}),w$Z._initMusicAudio=function(){w$Z._musicAudio||(w$Z._musicAudio||(w$Z._musicAudio=w$N.createElement("audio")),w$t.isConchApp||w$N.document.addEventListener("mousedown",w$Z._makeMusicOK))},w$Z._makeMusicOK=function(){w$N.document.removeEventListener("mousedown",w$Z._makeMusicOK),w$Z._musicAudio.src?w$Z._musicAudio.play():(w$Z._musicAudio.src="",w$Z._musicAudio.load())},w$Z._audioCache={},w$Z._musicAudio=null,w$Z}(),w$Av=function(w$v){function w$l(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,w$l.__super.call(this)}w$_(w$l,"laya.media.SoundChannel",w$$);var w$L=w$l.prototype;return w$L.play=function(){},w$L.stop=function(){},w$L.pause=function(){},w$L.resume=function(){},w$L.__runComplete=function(w$v){w$v&&w$v.run()},w$G(0,w$L,"volume",function(){return 1},function(w$v){}),w$G(0,w$L,"position",function(){return 0}),w$G(0,w$L,"duration",function(){return 0}),w$l}(),w$xv=function(w$v){function w$l(){w$l.__super.call(this)}w$_(w$l,"laya.media.Sound",w$$);var w$L=w$l.prototype;return w$L.load=function(w$v){},w$L.play=function(w$v,w$l,w$L){return void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=0),null},w$L.dispose=function(){},w$G(0,w$L,"duration",function(){return 0}),w$l}(),w$mv=function(w$v){function w$x(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,w$x.__super.call(this)}w$_(w$x,"laya.media.webaudio.WebAudioSound",w$$);var w$l=w$x.prototype;return w$l.load=function(w$v){this.url=w$v,this.audioBuffer=w$x._dataCache[w$v],this.audioBuffer?this._loaded(this.audioBuffer):(w$x.e.on("loaded:"+w$v,this,this._loaded),w$x.e.on("err:"+w$v,this,this._err),w$x.__loadingSound[w$v]||(w$x.__loadingSound[w$v]=!0,w$H.loader.load(w$v,w$J.create(this,this.onloaded),null,w$Ov.BUFFER,4,!1,null,!0)))},w$l.onloaded=function(w$v){w$v||this._err(),this._disposed?this._removeLoadEvents():(this.data=w$v,w$x.buffs.push({buffer:this.data,url:this.url}),w$x.decode())},w$l._err=function(){if(this._removeLoadEvents(),w$x.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var w$v,w$l,w$L,w$A=0;for(w$v=(w$l=this.__toPlays).length,w$A=0;w$A<w$v;w$A++)(w$L=w$l[w$A])[3]&&!w$L[3].isStopped&&w$L[3].event("error");this.__toPlays.length=0}},w$l._loaded=function(w$v){this._removeLoadEvents(),this._disposed||(this.audioBuffer=w$v,this.loaded=!0,this.event("complete"))},w$l._removeLoadEvents=function(){w$x.e.off("loaded:"+this.url,this,this._loaded),w$x.e.off("err:"+this.url,this,this._err)},w$l.__playAfterLoaded=function(){if(this.__toPlays){var w$v,w$l,w$L,w$A=0;for(w$v=(w$l=this.__toPlays).length,w$A=0;w$A<w$v;w$A++)(w$L=w$l[w$A])[3]&&!w$L[3].isStopped&&this.play(w$L[0],w$L[1],w$L[2],w$L[3]);this.__toPlays.length=0}},w$l.play=function(w$v,w$l,w$L,w$A){return void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=0),w$A=w$A||new w$rv,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([w$v,w$l,w$L,w$A]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),w$A.url=this.url,w$A.loops=w$l,w$A.audioBuffer=this.audioBuffer,w$A.startTime=w$v,w$A.startHandler=w$L,w$A.play(!1),w$k.addChannel(w$A),w$A},w$l.dispose=function(){this._disposed=!0,delete w$x._dataCache[this.url],delete w$x.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},w$G(0,w$l,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),w$x.decode=function(){if(!(w$x.buffs.length<=0||w$x.isDecoding))if(w$x.isDecoding=!0,(w$x.tInfo=w$x.buffs.shift())&&w$x.tInfo.buffer&&w$x.tInfo.buffer.byteLength)try{w$x.ctx.decodeAudioData(w$x.tInfo.buffer,w$x._done,w$x._fail)}catch(w$v){console.error("decodeAudioData error  byteLength:"+w$x.tInfo.buffer.byteLength+"  url:"+w$x.tInfo.url)}else w$x._fail()},w$x._done=function(w$v){w$x.e.event("loaded:"+w$x.tInfo.url,w$v),w$x._dataCache[w$x.tInfo.url]=w$v,w$x.isDecoding=!1,w$x.decode()},w$x._fail=function(){w$x.e.event("err:"+w$x.tInfo.url,null),w$x.isDecoding=!1,w$x.decode()},w$x._playEmptySound=function(){if(null!=w$x.ctx){if(w$x._emptySource&&(w$x._emptySource.stop(),w$x._emptySource.disconnect(0),!w$rv._tryCleanFailed))try{w$x._emptySource.buffer=null}catch(w$v){w$rv._tryCleanFailed=!0}var w$v=w$x.ctx.createBufferSource();w$v.buffer=w$x._miniBuffer,w$v.connect(w$x.ctx.destination),w$v.start(0,0,0),w$x._emptySource=w$v}},w$x._unlock=function(){w$x._unlocked||(w$x._playEmptySound(),"running"==w$x.ctx.state?(w$N.document.removeEventListener("mousedown",w$x._unlock,!0),w$N.document.removeEventListener("touchend",w$x._unlock,!0),w$N.document.removeEventListener("touchstart",w$x._unlock,!0),w$x._unlocked=!0):"suspended"==w$x.ctx.state&&w$k._recoverWebAudio())},w$x.initWebAudio=function(){"running"!=w$x.ctx.state&&(w$x._unlock(),w$N.document.addEventListener("mousedown",w$x._unlock,!0),w$N.document.addEventListener("touchend",w$x._unlock,!0),w$N.document.addEventListener("touchstart",w$x._unlock,!0))},w$x._emptySource=null,w$x._dataCache={},w$x.buffs=[],w$x.isDecoding=!1,w$x._unlocked=!1,w$x.tInfo=null,w$x.__loadingSound={},w$e(w$x,["window",function(){return this.window=w$N.window},"webAudioEnabled",function(){return this.webAudioEnabled=w$x.window.AudioContext||w$x.window.webkitAudioContext||w$x.window.mozAudioContext},"ctx",function(){return this.ctx=w$x.webAudioEnabled?new(w$x.window.AudioContext||w$x.window.webkitAudioContext||w$x.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=w$x.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new w$$}]),w$x}(),w$Zv=function(w$v){function w$l(){this._responseType=null,this._data=null,w$l.__super.call(this),this._http=new w$N.window.XMLHttpRequest}w$_(w$l,"laya.net.HttpRequest",w$$);var w$L=w$l.prototype;return w$L.send=function(w$v,w$l,w$L,w$A,w$x){void 0===w$L&&(w$L="get"),void 0===w$A&&(w$A="text"),this._responseType=w$A,this._data=null;var w$m=this,w$Z=this._http;if(w$Z.open(w$L,w$v,!0),w$x)for(var w$O=0;w$O<w$x.length;w$O++)w$Z.setRequestHeader(w$x[w$O++],w$x[w$O]);else w$t.isConchApp||(w$l&&"string"!=typeof w$l?w$Z.setRequestHeader("Content-Type","application/json"):w$Z.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));w$Z.responseType="arraybuffer"!==w$A?"text":"arraybuffer",w$Z.onerror=function(w$v){w$m._onError(w$v)},w$Z.onabort=function(w$v){w$m._onAbort(w$v)},w$Z.onprogress=function(w$v){w$m._onProgress(w$v)},w$Z.onload=function(w$v){w$m._onLoad(w$v)},w$Z.send(w$l)},w$L._onProgress=function(w$v){w$v&&w$v.lengthComputable&&this.event("progress",w$v.loaded/w$v.total)},w$L._onAbort=function(w$v){this.error("Request was aborted by user")},w$L._onError=function(w$v){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},w$L._onLoad=function(w$v){var w$l=this._http,w$L=void 0!==w$l.status?w$l.status:200;200===w$L||204===w$L||0===w$L?this.complete():this.error("["+w$l.status+"]"+w$l.statusText+":"+w$l.responseURL)},w$L.error=function(w$v){this.clear(),this.event("error",w$v)},w$L.complete=function(){this.clear();var w$l=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=w$i.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(w$v){w$l=!1,this.error(w$v.message)}w$l&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},w$L.clear=function(){var w$v=this._http;w$v.onerror=w$v.onabort=w$v.onprogress=w$v.onload=null},w$G(0,w$L,"url",function(){return this._http.responseURL}),w$G(0,w$L,"http",function(){return this._http}),w$G(0,w$L,"data",function(){return this._data}),w$l}(),w$Ov=function(w$v){function w$h(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,w$h.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}w$_(w$h,"laya.net.Loader",w$$);var w$l=w$h.prototype;return w$l.load=function(w$v,w$l,w$L,w$A,w$x){if(w$v&&""!=w$v||console.error("Loader 加载的url不合法 "+w$v),void 0===w$L&&(w$L=!0),void 0===w$x&&(w$x=!1),0===(this._url=w$v).indexOf("data:image")?this._type=w$l="image":this._type=w$l||(w$l=this.getTypeFromUrl(w$v)),this._cache=w$L,this._data=null,!w$x&&w$h.loadedMap[w$v])return this._data=w$h.loadedMap[w$v],this.event("progress",1),void this.event("complete",this._data);if(w$A&&w$h.setGroup(w$v,w$A),null!=w$h.parserMap[w$l])return this._customParse=!0,void(w$h.parserMap[w$l]instanceof laya.utils.Handler?w$h.parserMap[w$l].runWith(this):w$h.parserMap[w$l].call(null,this));if("image"===w$l||"htmlimage"===w$l||"nativeimage"===w$l)return this._loadImage(w$v);if("ttf"===w$l)return this._loadTTF(w$v);switch(w$l){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:w$l}w$h.preLoadedMap[w$v]?this.onLoaded(w$h.preLoadedMap[w$v]):w$Z.resMgrLoad(w$v,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},w$l.getTypeFromUrl=function(w$v){var w$l=w$i.getFileExtension(w$v);return w$l?w$h.typeMap[w$l]:(console.warn("Not recognize the resources suffix",w$v),"text")},w$l._loadTTF=function(w$v){w$v=w$I.formatURL(w$v);var w$l=new w$P;w$l.complete=w$J.create(this,this.onLoaded),w$l.load(w$v)},w$l._loadImage=function(w$v){w$Z.imgMgrLoad(w$v,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},w$l._loadImageComplete=function(w$v,w$l,w$L){if(null!=w$L)if(w$L instanceof ArrayBuffer){var w$A=new DataView(w$L),w$x=new laya.webgl.resource.WebGLImage(new Uint8Array(w$L,8),w$v,0,!1,w$A.getUint32(0),w$A.getUint32(4));this.onLoaded(w$x)}else if(w$L instanceof w$_v)w$h.imgMgrSet[w$v]=w$l,w$Z.imgMgrLock(w$v,w$h.imgMgrSet[w$v]),this._url=w$v,this.complete(w$L);else{var w$m=-1!=w$v.indexOf(".png",w$v.length-4)?6408:6407;w$x=new laya.webgl.resource.WebGLImage(w$L,w$v,w$m,!1,w$L.width,w$L.height);this.onLoaded(w$x)}else this.event("error","Load image failed")},w$l._loadSound=function(w$v){var w$l=new w$k._soundClass,w$L=this;function w$A(){w$l.offAll()}w$l.on("complete",this,function(){w$A(),w$L.onLoaded(w$l)}),w$l.on("error",this,function(){w$A(),w$l.dispose(),w$L.event("error","Load sound failed")}),w$l.load(w$v)},w$l.onProgress=function(w$v){"atlas"===this._type?this.event("progress",.3*w$v):this.event("progress",w$v)},w$l.onError=function(w$v){this.event("error",w$v)},w$l._loadedComplete=function(w$v,w$l,w$L){if(null!=w$L)switch(this._type){case"atlas":case"plf":case"json":var w$A=new w$b(w$L);this.onLoaded(JSON.parse(w$A.readUTFBytes()));break;case"font":w$A=new w$b(w$L);this.onLoaded(w$i.parseXMLFromString(w$A.readUTFBytes()));break;default:this.onLoaded(w$L)}else this.event("error",w$v)},w$l.onLoaded=function(w$v){var w$l=this._type;if("plf"==w$l)this.parsePLFData(w$v),this.complete(w$v);else if("image"===w$l){var w$L=new w$_v(w$v);w$L.url=this._url,this.complete(w$L)}else if("sound"===w$l||"htmlimage"===w$l||"nativeimage"===w$l)this.complete(w$v);else if("atlas"===w$l){if(!w$v.src&&!w$v._setContext){if(!this._data){if((this._data=w$v).meta&&w$v.meta.image)for(var w$A=w$v.meta.image.split(","),w$x=0<=this._url.indexOf("/")?"/":"\\",w$m=this._url.lastIndexOf(w$x),w$Z=0<=w$m?this._url.substr(0,w$m+1):"",w$O=0,w$e=w$A.length;w$O<w$e;w$O++)w$A[w$O]=w$Z+w$A[w$O];else w$A=[this._url.replace(".json",".png")];w$A.reverse(),w$v.toLoads=w$A,w$v.pics=[]}return this.event("progress",.3+1/w$A.length*.6),this._loadImage(w$A.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(w$v),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var w$$=this._data.frames,w$_=this._url.split("?")[0],w$o=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:w$_.substring(0,w$_.lastIndexOf("."))+"/",w$K=this._data.pics,w$r=w$I.formatURL(this._url),w$G=w$h.atlasMap[w$r]||(w$h.atlasMap[w$r]=[]);w$G.dir=w$o;var w$c=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var w$d in w$c=parseFloat(this._data.meta.scale),w$$){var w$C,w$J=w$$[w$d],w$B=w$K[w$J.frame.idx?w$J.frame.idx:0],w$X=w$I.formatURL(w$o+w$d);w$B.scaleRate=w$c,w$C=w$_v.create(w$B,w$J.frame.x,w$J.frame.y,w$J.frame.w,w$J.frame.h,w$J.spriteSourceSize.x,w$J.spriteSourceSize.y,w$J.sourceSize.w,w$J.sourceSize.h),w$h.cacheRes(w$X,w$C),w$h.keepCache(this._url,w$o+w$d),w$C.url=w$X,w$G.push(w$X)}else for(w$d in w$$)w$B=w$K[(w$J=w$$[w$d]).frame.idx?w$J.frame.idx:0],w$X=w$I.formatURL(w$o+w$d),w$h.cacheRes(w$X,w$_v.create(w$B,w$J.frame.x,w$J.frame.y,w$J.frame.w,w$J.frame.h,w$J.spriteSourceSize.x,w$J.spriteSourceSize.y,w$J.sourceSize.w,w$J.sourceSize.h)),w$h.loadedMap[w$X].url=w$X,w$h.keepCache(this._url,w$o+w$d),w$G.push(w$X);delete this._data.pics,this.complete(this._data)}else if("font"==w$l){if(!w$v.src)return this._data=w$v,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var w$f=new w$V;w$f.parseFont(this._data,w$v);var w$w=this._url.split(".fnt")[0].split("/"),w$H=w$w[w$w.length-1];w$dv.registerBitmapFont(w$H,w$f),this._data=w$f,this.complete(this._data)}else if("pkm"==w$l){var w$g=w$wv.create(w$v,this._url),w$T=new w$_v(w$g);w$T.url=this._url,this.complete(w$T)}else this.complete(w$v)},w$l.parsePLFData=function(w$v){var w$l,w$L,w$A;for(w$l in w$v)switch(w$A=w$v[w$l],w$l){case"json":case"text":for(w$L in w$A)w$h.preLoadedMap[w$I.formatURL(w$L)]=w$A[w$L];break;default:for(w$L in w$A)w$h.preLoadedMap[w$I.formatURL(w$L)]=w$A[w$L]}},w$l.complete=function(w$v){this._data=w$v,this._customParse?this.event("loaded",w$v instanceof Array?[w$v]:w$v):(w$h._loaders.push(this),w$h._isWorking||w$h.checkNext())},w$l.endLoad=function(w$v){w$v&&(this._data=w$v),this._cache&&w$h.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},w$G(0,w$l,"url",function(){return this._url}),w$G(0,w$l,"data",function(){return this._data}),w$G(0,w$l,"cache",function(){return this._cache}),w$G(0,w$l,"type",function(){return this._type}),w$h.checkNext=function(){w$h._isWorking=!0;for(var w$v=w$N.now();w$h._startIndex<w$h._loaders.length;)if(w$N.now(),w$h._loaders[w$h._startIndex].endLoad(),w$h._startIndex++,w$N.now()-w$v>w$h.maxTimeOut)return console.warn("loader callback cost a long time:"+(w$N.now()-w$v)+" url="+w$h._loaders[w$h._startIndex-1].url),void w$H.timer.frameOnce(1,null,w$h.checkNext);w$h._loaders.length=0,w$h._startIndex=0,w$h._isWorking=!1},w$h.clearRes=function(w$v,w$l){if(null!=w$v){void 0===w$l&&(w$l=!1),w$v=w$I.formatURL(w$v);var w$L=w$h.getAtlas(w$v);if(w$L){for(var w$A=0,w$x=w$L.length;w$A<w$x;w$A++){var w$m=w$L[w$A],w$Z=w$h.getRes(w$m);delete w$h.loadedMap[w$m],w$h.clearCache(w$v.substring(w$I.basePath.length),w$m.substring(w$I.basePath.length)),w$Z&&w$Z.destroy(w$l)}w$L.length=0,delete w$h.atlasMap[w$v],delete w$h.loadedMap[w$v]}else{var w$O=w$h.loadedMap[w$v];w$O&&(delete w$h.loadedMap[w$v],w$O instanceof laya.resource.Texture&&w$O.bitmap&&w$O.destroy(w$l))}}},w$h.clearTextureRes=function(w$v){w$v=w$I.formatURL(w$v);var w$l=laya.net.Loader.getAtlas(w$v),w$L=w$l&&0<w$l.length?laya.net.Loader.getRes(w$l[0]):laya.net.Loader.getRes(w$v);w$L&&w$L.bitmap&&(w$t.isConchApp&&!w$t.isConchWebGL?w$L.bitmap.source.releaseTexture&&w$L.bitmap.source.releaseTexture():null==w$L.bitmap._atlaser&&w$L.bitmap.releaseResource(!0))},w$h.getRes=function(w$v){return w$h.loadedMap[w$I.formatURL(w$v)]},w$h.getAtlas=function(w$v){return w$h.atlasMap[w$I.formatURL(w$v)]},w$h.cacheRes=function(w$v,w$l){w$v=w$I.formatURL(w$v),null!=w$h.loadedMap[w$v]?console.warn("Resources already exist,is repeated loading:",w$v):w$h.loadedMap[w$v]=w$l},w$h.setGroup=function(w$v,w$l){w$h.groupMap[w$l]||(w$h.groupMap[w$l]=[]),w$h.groupMap[w$l].push(w$v)},w$h.clearResByGroup=function(w$v){if(w$h.groupMap[w$v]){var w$l=w$h.groupMap[w$v],w$L=0,w$A=w$l.length;for(w$L=0;w$L<w$A;w$L++)w$h.clearRes(w$l[w$L]);w$l.length=0}},w$h.keepCache=function(w$v,w$l){if(w$v&&w$l){var w$L=w$h.cacheSet[w$l];w$L?-1==w$L.indexOf(w$v)&&w$L.push(w$v):w$h.cacheSet[w$l]=[w$v]}},w$h.clearCache=function(w$v,w$l){if(w$v&&w$l){var w$L=w$h.cacheSet[w$l];if(w$L){var w$A=w$L.indexOf(w$v);if(-1!==w$A){var w$x=w$L.length-1;0==w$x?(delete w$h.cacheSet[w$l],0<w$h.imgMgrSet[w$l]?w$Z.imgMgrFree(w$l,w$h.imgMgrSet[w$l]):w$h.clearRes(w$l,!0)):(w$L[w$A]=w$L[w$x],w$L.length=w$x)}}}},w$h.saveObject=function(w$v,w$l,w$L){if(w$l&&w$v){var w$A=w$h.objectSet[w$v];w$A?(console.warn("Loader.saveObject: "+w$v),w$A[0]=w$l,w$A[1]=w$L):w$h.objectSet[w$v]=[w$l,w$L,[]]}},w$h.findObject=function(w$v){if(w$v){var w$l=w$h.objectSet[w$v];if(w$l)return w$l[0]}return null},w$h.keepObject=function(w$v,w$l){if(w$v&&w$l){var w$L=w$h.objectSet[w$l];w$L&&-1===w$L[2].indexOf(w$v)&&w$L[2].push(w$v)}},w$h.clearObject=function(w$v,w$l){if(w$v&&w$l){var w$L=w$h.objectSet[w$l];if(w$L){var w$A=w$L[2],w$x=w$A.indexOf(w$v);if(-1!==w$x){var w$m=w$A.length-1;0==w$m?(delete w$h.objectSet[w$l],w$L[1]&&w$L[1].call(null,w$L[0])):(w$A[w$x]=w$A[w$m],w$A.length=w$m)}}}},w$h.TEXT="text",w$h.JSON="json",w$h.XML="xml",w$h.BUFFER="arraybuffer",w$h.IMAGE="image",w$h.SOUND="sound",w$h.ATLAS="atlas",w$h.FONT="font",w$h.TTF="ttf",w$h.PLF="plf",w$h.PKM="pkm",w$h.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},w$h.parserMap={},w$h.groupMap={},w$h.maxTimeOut=100,w$h.loadedMap={},w$h.preLoadedMap={},w$h.atlasMap={},w$h._loaders=[],w$h._isWorking=!1,w$h._startIndex=0,w$h.imgCache={},w$h.cacheSet={},w$h.objectSet={},w$h.imgMgrSet={},w$h}(),w$ev=function(w$v){var w$K;function w$r(){this.retryNum=3,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},w$r.__super.call(this);for(var w$v=0;w$v<this._maxPriority;w$v++)this._resInfos[w$v]=[]}w$_(w$r,"laya.net.LoaderManager",w$$);var w$l=w$r.prototype;return w$l.create=function(w$v,w$L,w$l,w$A,w$x,w$m,w$Z,w$O){if(null==w$m&&(w$m=2),null==w$Z&&(w$Z=!0),w$v instanceof Array){var w$e=w$v,w$$=w$e.length,w$_=0;if(w$l)var w$o=w$J.create(w$l.caller,w$l.method,w$l.args,!1);for(var w$K=0;w$K<w$$;w$K++){var w$r=w$e[w$K];"string"==typeof w$r&&(w$r=w$e[w$K]={url:w$r}),w$r.progress=0}for(w$K=0;w$K<w$$;w$K++){w$r=w$e[w$K];var w$G=w$l?w$J.create(null,w$C,[w$r],!1):null,w$c=w$l||w$L?w$J.create(null,w$d,[w$r]):null;this._create(w$r.url,w$c,w$G,w$r.clas||w$A,w$r.params||w$x,null!=w$r.priority&&0<=w$r.priority?w$r.priority:w$m,w$Z,w$r.group||w$O)}function w$d(w$v,w$l){w$_++,w$v.progress=1,w$_===w$$&&w$L&&w$L.run()}function w$C(w$v,w$l){w$v.progress=w$l;for(var w$L=0,w$A=0;w$A<w$$;w$A++){w$L+=w$e[w$A].progress}var w$x=w$L/w$$;w$o.runWith(w$x)}return!0}return this._create(w$v,w$L,w$l,w$A,w$x,w$m,w$Z,w$O)},w$l._create=function(w$l,w$L,w$v,w$A,w$x,w$m,w$Z,w$O){w$l&&""!=w$l||console.error("加载的url不合法 "+w$l),null==w$m&&(w$m=2),null==w$Z&&(w$Z=!0);var w$e=w$I.formatURL(w$l),w$$=this.getRes(w$e);if(w$$)!w$$.hasOwnProperty("loaded")||w$$.loaded?(w$v&&w$v.runWith(1),w$L&&w$L.run()):w$L&&w$H.loader._createListener(w$l,w$L.caller,w$L.method,w$L.args,!0,!1);else{var w$_=w$i.getFileExtension(w$l),w$o=w$r.createMap[w$_];if(!w$o)throw new Error("LoaderManager:unknown file("+w$l+") extension with: "+w$_+".");w$A||(w$A=w$o[0]);var w$K=w$o[1];if("atlas"==w$_)this.load(w$l,w$L,w$v,w$K,w$m,w$Z);else{w$A===w$_v&&(w$K="htmlimage"),(w$$=w$A?new w$A:null).hasOwnProperty("_loaded")&&(w$$._loaded=!1),w$$._setUrl(w$l),w$O&&w$$._setGroup(w$O),this._createLoad(w$$,w$l,w$J.create(null,function(w$v){w$$&&!w$$.destroyed&&w$v&&w$$.onAsynLoaded.call(w$$,w$l,w$v,w$x),w$L&&w$L.run();w$H.loader.event(w$l)}),w$v,w$K,w$m,!1,w$O,!0),w$Z&&this.cacheRes(w$e,w$$)}}return w$$},w$l.load=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){w$v&&""!=w$v||console.error("加载的url不合法 "+w$v);var w$e=this;if(null==w$x&&(w$x=2),null==w$m&&(w$m=!0),void 0===w$O&&(w$O=!1),w$v instanceof Array)return this._loadAssets(w$v,w$l,w$L,w$A,w$x,w$m,w$Z);var w$$=w$Ov.getRes(w$v);if(null!=w$$)w$H.timer.frameOnce(1,null,function(){w$L&&w$L.runWith(1),w$l&&w$l.runWith(w$$),w$e._loaderCount||w$e.event("complete")});else{var w$_=w$r._resMap[w$v];w$_?(w$l&&w$_._createListener("complete",w$l.caller,w$l.method,w$l.args,!1,!1),w$L&&w$_._createListener("progress",w$L.caller,w$L.method,w$L.args,!1,!1)):((w$_=this._infoPool.length?this._infoPool.pop():new w$K).url=w$v,w$_.type=w$A,w$_.cache=w$m,w$_.group=w$Z,w$_.ignoreCache=w$O,w$_.priority=w$x,w$l&&w$_.on("complete",w$l.caller,w$l.method,w$l.args),w$L&&w$_.on("progress",w$L.caller,w$L.method,w$L.args),w$r._resMap[w$v]=w$_,w$x=w$x<this._maxPriority?0<=w$x?w$x:0:this._maxPriority-1,this._resInfos[w$x].push(w$_),this._next())}return this},w$l._createLoad=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e){var w$$=this;if(null==w$m&&(w$m=2),null==w$Z&&(w$Z=!0),void 0===w$e&&(w$e=!1),w$l instanceof Array)return this._loadAssets(w$l,w$L,w$A,w$x,w$m,w$Z,w$O);var w$_=w$Ov.getRes(w$l);if(null!=w$_)w$H.timer.frameOnce(1,null,function(){w$A&&w$A.runWith(1),w$L&&w$L.runWith(w$_),w$$._loaderCount||w$$.event("complete")});else{var w$o=w$r._resMap[w$l];w$o?(w$L&&w$o._createListener("complete",w$L.caller,w$L.method,w$L.args,!1,!1),w$A&&w$o._createListener("progress",w$A.caller,w$A.method,w$A.args,!1,!1)):((w$o=this._infoPool.length?this._infoPool.pop():new w$K).url=w$l,w$o.clas=w$v,w$o.type=w$x,w$o.cache=w$Z,w$o.group=w$O,w$o.ignoreCache=w$e,w$o.priority=w$m,w$L&&w$o.on("complete",w$L.caller,w$L.method,w$L.args),w$A&&w$o.on("progress",w$A.caller,w$A.method,w$A.args),w$r._resMap[w$l]=w$o,w$m=w$m<this._maxPriority?0<=w$m?w$m:0:this._maxPriority-1,this._resInfos[w$m].push(w$o),this._next())}return this},w$l._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var w$v=0;w$v<this._maxPriority;w$v++)for(var w$l=this._resInfos[w$v];0<w$l.length;){var w$L=w$l.shift();if(w$L)return this._doLoad(w$L)}this._loaderCount||this.event("complete")}},w$l._doLoad=function(w$l){this._loaderCount++;var w$L=this._loaders.length?this._loaders.pop():new w$Ov;w$L.on("complete",null,w$x),w$L.on("progress",null,function(w$v){w$l.event("progress",w$v)}),w$L.on("error",null,function(w$v){w$x(null)});var w$A=this;function w$x(w$v){w$L.offAll(),w$L._data=null,w$L._customParse=!1,w$A._loaders.push(w$L),w$A._endLoad(w$l,w$v instanceof Array?[w$v]:w$v),w$A._loaderCount--,w$A._next()}w$L._class=w$l.clas,1<=w$l.priority?(w$L.priority=w$l.priority,w$L.realTime=!1):(w$L.priority=0,w$L.realTime=!0),w$L.load(w$l.url,w$l.type,w$l.cache,w$l.group,w$l.ignoreCache)},w$l._endLoad=function(w$v,w$l){var w$L=w$v.url;if(null==w$l){var w$A=this._failRes[w$L]||0;if(w$A<this.retryNum)return console.warn("[warn]Retry to load:",w$L),this._failRes[w$L]=w$A+1,void w$H.timer.once(this.retryDelay,this,this._addReTry,[w$v],!1);console.warn("[error]Failed to load:",w$L),this.event("error",w$L)}this._failRes[w$L]&&(this._failRes[w$L]=0),delete w$r._resMap[w$L],w$v.event("complete",w$l),w$v.offAll(),this._infoPool.push(w$v)},w$l._addReTry=function(w$v){this._resInfos[this._maxPriority-1].push(w$v),this._next()},w$l.clearRes=function(w$v,w$l){void 0===w$l&&(w$l=!1),w$Ov.clearRes(w$v,w$l)},w$l.getRes=function(w$v){return w$Ov.getRes(w$v)},w$l.cacheRes=function(w$v,w$l){w$Ov.cacheRes(w$v,w$l)},w$l.clearTextureRes=function(w$v){w$Ov.clearTextureRes(w$v)},w$l.setGroup=function(w$v,w$l){w$Ov.setGroup(w$v,w$l)},w$l.clearResByGroup=function(w$v){w$Ov.clearResByGroup(w$v)},w$l.clearUnLoaded=function(){for(var w$v=0;w$v<this._maxPriority;w$v++){for(var w$l=this._resInfos[w$v],w$L=w$l.length-1;-1<w$L;w$L--){var w$A=w$l[w$L];w$A&&(w$A.offAll(),this._infoPool.push(w$A))}w$l.length=0}this._loaderCount=0,w$r._resMap={}},w$l.cancelLoadByUrls=function(w$v){if(w$v)for(var w$l=0,w$L=w$v.length;w$l<w$L;w$l++)this.cancelLoadByUrl(w$v[w$l])},w$l.cancelLoadByUrl=function(w$v){for(var w$l=0;w$l<this._maxPriority;w$l++)for(var w$L=this._resInfos[w$l],w$A=w$L.length-1;-1<w$A;w$A--){var w$x=w$L[w$A];w$x&&w$x.url===w$v&&(w$L[w$A]=null,w$x.offAll(),this._infoPool.push(w$x))}w$r._resMap[w$v]&&delete w$r._resMap[w$v]},w$l._loadAssets=function(w$v,w$L,w$Z,w$l,w$A,w$x,w$m){null==w$A&&(w$A=2),null==w$x&&(w$x=!0);for(var w$O=w$v.length,w$e=0,w$$=0,w$_=[],w$o=!0,w$K=0;w$K<w$O;w$K++){var w$r=w$v[w$K];if(!w$r)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+w$v);"string"==typeof w$r&&(w$r={url:w$r,type:w$l,size:1,priority:w$A}),w$r.size||(w$r.size=1),w$r.progress=0,w$$+=w$r.size,w$_.push(w$r);var w$G=w$Z?w$J.create(null,w$C,[w$r],!1):null,w$c=w$L||w$Z?w$J.create(null,w$d,[w$r]):null;this.load(w$r.url,w$c,w$G,w$r.type,null!=w$r.priority&&0<=w$r.priority?w$r.priority:2,w$x,w$r.group||w$m)}function w$d(w$v,w$l){w$e++,w$v.progress=1,w$l||(w$o=!1),w$e===w$O&&w$L&&w$L.runWith(w$o)}function w$C(w$v,w$l){if(null!=w$Z){w$v.progress=w$l;for(var w$L=0,w$A=0;w$A<w$_.length;w$A++){var w$x=w$_[w$A];w$L+=w$x.size*w$x.progress}var w$m=w$L/w$$;w$Z.runWith(w$m)}}return this},w$r.cacheRes=function(w$v,w$l){w$Ov.cacheRes(w$v,w$l)},w$r._resMap={},w$e(w$r,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),w$r.__init$=function(){w$K=function(w$v){function w$l(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.priority=-1,w$l.__super.call(this)}return w$_(w$l,"",w$$),w$l}()},w$r}(),w$$v=(function(w$v){function w$x(w$v){w$x.__super.call(this),w$v||(w$v=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var w$l=0,w$L=0,w$A=0;w$A<20;w$A++)w$A%5!=4?this._mat[w$l++]=w$v[w$A]:this._alpha[w$L++]=w$v[w$A];this._action=w$Q.createFilterAction(32),this._action.data=this}w$_(w$x,"laya.filters.ColorFilter",w$C);var w$l=w$x.prototype;w$H.imps(w$l,{"laya.filters.IFilter":!0}),w$l.callNative=function(w$v){w$v._$P.cf=this;w$v.conchModel&&w$v.conchModel.setFilterMatrix&&w$v.conchModel.setFilterMatrix(this._mat,this._alpha)},w$G(0,w$l,"type",function(){return 32}),w$G(0,w$l,"action",function(){return this._action})}(),function(w$v){function w$A(w$v,w$l,w$L){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===w$l&&(w$l=0),w$A.__super.call(this),this._byteClass=w$L||w$b,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,w$v&&0<w$l&&w$l<65535&&this.connect(w$v,w$l)}w$_(w$A,"laya.net.Socket",w$$);var w$l=w$A.prototype;w$l.connect=function(w$v,w$l){var w$L="ws://"+w$v+":"+w$l;w$L="https:"==w$N.window.location.protocol?"wss://"+w$v+":"+w$l:"ws://"+w$v+":"+w$l,this.connectByUrl(w$L)},w$l.connectByUrl=function(w$v){var w$l=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new w$N.window.WebSocket(w$v,this.protocols):this._socket=new w$N.window.WebSocket(w$v),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(w$v){w$l._onOpen(w$v)},this._socket.onmessage=function(w$v){w$l._onMessage(w$v)},this._socket.onclose=function(w$v){w$l._onClose(w$v)},this._socket.onerror=function(w$v){w$l._onError(w$v)}},w$l.cleanSocket=function(){try{this._socket.close()}catch(w$v){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},w$l.close=function(){if(null!=this._socket)try{this._socket.close()}catch(w$v){}},w$l._onOpen=function(w$v){this._connected=!0,this.event("open",w$v)},w$l._onMessage=function(w$v){if(w$v&&w$v.data){var w$l=w$v.data;if(this.disableInput&&w$l)this.event("message",w$l);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var w$L=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,w$l&&("string"==typeof w$l?this._input.writeUTFBytes(w$l):this._input.writeArrayBuffer(w$l),this._addInputPosition=this._input.pos,this._input.pos=w$L),this.event("message",w$l)}}},w$l._onClose=function(w$v){this._connected=!1,this.event("close",w$v)},w$l._onError=function(w$v){this.event("error",w$v)},w$l.send=function(w$v){this._socket.send(w$v)},w$l.flush=function(){if(this._output&&0<this._output.length){var w$l;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(w$v){w$l=w$v}this._output.endian=this.endian,this._output.clear(),w$l&&this.event("error",w$l)}},w$G(0,w$l,"input",function(){return this._input}),w$G(0,w$l,"output",function(){return this._output}),w$G(0,w$l,"connected",function(){return this._connected}),w$G(0,w$l,"endian",function(){return this._endian},function(w$v){this._endian=w$v,null!=this._input&&(this._input.endian=w$v),null!=this._output&&(this._output.endian=w$v)}),w$A.LITTLE_ENDIAN="littleEndian",w$A.BIG_ENDIAN="bigEndian"}(),function(w$v){function w$O(){w$O.__super.call(this),this._$1__id=++w$O._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(w$O._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,w$R.currentResourceManager&&w$R.currentResourceManager.addResource(this)}w$_(w$O,"laya.resource.Resource",w$$);var w$l=w$O.prototype;return w$H.imps(w$l,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),w$l._setUrl=function(w$v){var w$l;this._url!==w$v&&(this._url&&((w$l=w$O._urlResourcesMap[this._url]).splice(w$l.indexOf(this),1),0===w$l.length&&delete w$O._urlResourcesMap[this._url]),w$v&&((w$l=w$O._urlResourcesMap[w$v])||(w$O._urlResourcesMap[w$v]=w$l=[]),w$l.push(this)),this._url=w$v)},w$l._getGroup=function(){return this._group},w$l._setGroup=function(w$v){var w$l;this._group!==w$v&&(this._group&&((w$l=w$O._groupResourcesMap[this._group]).splice(w$l.indexOf(this),1),0===w$l.length&&delete w$O._groupResourcesMap[this._group]),w$v&&((w$l=w$O._groupResourcesMap[w$v])||(w$O._groupResourcesMap[w$v]=w$l=[]),w$l.push(this)),this._group=w$v)},w$l._addReference=function(){this._referenceCount++},w$l._removeReference=function(){this._referenceCount--},w$l._clearReference=function(){this._referenceCount=0},w$l._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},w$l.recreateResource=function(){this.completeCreate()},w$l.disposeResource=function(){},w$l.activeResource=function(w$v){void 0===w$v&&(w$v=!1),this._lastUseFrameCount=w$W.loopCount,!this._destroyed&&this.__loaded&&(this._released||w$v)&&this.recreateResource()},w$l.releaseResource=function(w$v){return void 0===w$v&&(w$v=!0),!(!w$v&&this.lock)&&(!(this._released&&!w$v)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},w$l.onAsynLoaded=function(w$v,w$l,w$L){throw new Error("Resource: must override this function!")},w$l.destroy=function(){var w$v;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete w$O._idResourcesMap[this.id],this._url&&((w$v=w$O._urlResourcesMap[this._url])&&(w$v.splice(w$v.indexOf(this),1),0===w$v.length&&delete w$O._urlResourcesMap[this.url]),w$Ov.clearRes(this._url),this.__loaded||w$Q.cancelLoadByUrl(this._url)),this._group&&((w$v=w$O._groupResourcesMap[this._group]).splice(w$v.indexOf(this),1),0===w$v.length&&delete w$O._groupResourcesMap[this.url]))},w$l.completeCreate=function(){this._released=!1,this.event("recovered",this)},w$l.dispose=function(){this.destroy()},w$G(0,w$l,"memorySize",function(){return this._memorySize},function(w$v){var w$l=w$v-this._memorySize;this._memorySize=w$v,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,w$l),this.resourceManager&&this.resourceManager.addSize(w$l)}),w$G(0,w$l,"_loaded",null,function(w$v){this.__loaded=w$v}),w$G(0,w$l,"loaded",function(){return this.__loaded}),w$G(0,w$l,"id",function(){return this._$1__id}),w$G(0,w$l,"destroyed",function(){return this._destroyed}),w$G(0,w$l,"group",function(){return this._getGroup()},function(w$v){this._setGroup(w$v)}),w$G(0,w$l,"resourceManager",function(){return this._resourceManager}),w$G(0,w$l,"url",function(){return this._url}),w$G(0,w$l,"released",function(){return this._released}),w$G(0,w$l,"referenceCount",function(){return this._referenceCount}),w$O.getResourceByID=function(w$v){return w$O._idResourcesMap[w$v]},w$O.getResourceByURL=function(w$v,w$l){return void 0===w$l&&(w$l=0),null==w$O._urlResourcesMap[w$v]?null:w$O._urlResourcesMap[w$v][w$l]},w$O.getResourceCountByURL=function(w$v){return w$O._urlResourcesMap[w$v].length},w$O.destroyUnusedResources=function(w$v){var w$l;if(w$v){var w$L=w$O._groupResourcesMap[w$v];if(w$L)for(var w$A=w$L.slice(),w$x=0,w$m=w$A.length;w$x<w$m;w$x++)(w$l=w$A[w$x]).lock||0!==w$l._referenceCount||w$l.destroy()}else for(var w$Z in w$O._idResourcesMap)(w$l=w$O._idResourcesMap[w$Z]).lock||0!==w$l._referenceCount||w$l.destroy()},w$O._uniqueIDCounter=0,w$O._idResourcesMap={},w$O._urlResourcesMap={},w$O._groupResourcesMap={},w$O}()),w$_v=function(w$v){function w$h(w$v,w$l){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,w$h.__super.call(this),w$v&&null!=w$v._addReference&&w$v._addReference(),this.setTo(w$v,w$l)}w$_(w$h,"laya.resource.Texture",w$$);var w$l=w$h.prototype;return w$l._setUrl=function(w$v){this.url=w$v},w$l.setTo=function(w$v,w$l){if(w$v instanceof w$Z.HTMLElement){var w$L=w$Bv.create("2D",w$v);this.bitmap=w$L}else this.bitmap=w$v;if(this.uv=w$l||w$h.DEF_UV,w$v){this._w=w$v.width,this._h=w$v.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var w$A=this;if(this._loaded)w$Q.addToAtlas&&w$Q.addToAtlas(w$A);else{var w$x=w$v;w$x instanceof laya.resource.HTMLImage&&w$x.image&&w$x.image.addEventListener("load",function(w$v){w$Q.addToAtlas&&w$Q.addToAtlas(w$A)},!1)}}},w$l.active=function(){this.bitmap&&this.bitmap.activeResource()},w$l.destroy=function(w$v){if(void 0===w$v&&(w$v=!1),this.alphaTexture&&(this.alphaTexture.destroy(w$v),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var w$l=this.bitmap;w$v?(w$t.isConchApp&&w$l.source&&w$l.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,w$l.dispose(),w$l._clearReference()):(w$l._removeReference(),0==w$l.referenceCount&&(w$t.isConchApp&&w$l.source&&w$l.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,w$l.dispose())),this.url&&this===w$H.loader.getRes(this.url)&&w$H.loader.clearRes(this.url,w$v),this._loaded=!1}},w$l.load=function(w$v){var w$l=this;this._loaded=!1,w$v=w$I.customFormat(w$v);var w$L=this.bitmap||(this.bitmap=w$wv.create(w$v));w$L.uri=w$v,w$L&&w$L._addReference();var w$A=this;w$L.onload=function(){w$L.onload=null,w$A._loaded=!0,w$l.sourceWidth=w$l._w=w$L.width,w$l.sourceHeight=w$l._h=w$L.height,w$A.event("loaded",this),w$Q.addToAtlas&&w$Q.addToAtlas(w$A)}},w$l.addTextureToAtlas=function(w$v){w$Q.addTextureToAtlas(this)},w$l.getPixels=function(w$v,w$l,w$L,w$A){if(w$t.isConchApp){var w$x=this.bitmap;if(w$x.source&&w$x.source.getImageData){var w$m=w$x.source.getImageData(w$v,w$l,w$L,w$A),w$Z=new Uint8Array(w$m);return Array.from(w$Z)}return null}return w$t.isWebGL?w$Q.getTexturePixels(this,w$v,w$l,w$L,w$A):(w$N.canvas.size(w$L,w$A),w$N.canvas.clear(),w$N.context.drawTexture(this,-w$v,-w$l,this.width,this.height,0,0),w$N.context.getImageData(0,0,w$L,w$A).data)},w$l.onAsynLoaded=function(w$v,w$l){if(w$l){if("function"!=typeof w$l._addReference)throw new Error("bitmap._addReference is not a function. "+w$l.className+" "+typeof w$l._addReference+" "+w$l.constructor);w$l._addReference()}this.setTo(w$l,this.uv),this._loaded&&this.event("loaded",this)},w$G(0,w$l,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),w$G(0,w$l,"loaded",function(){return this._loaded}),w$G(0,w$l,"released",function(){return!this.bitmap||this.bitmap.released}),w$G(0,w$l,"width",function(){return this._w?this._w:this.uv&&this.uv!==w$h.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(w$v){this._w=w$v,this.sourceWidth||(this.sourceWidth=w$v)}),w$G(0,w$l,"repeat",function(){return!w$t.isWebGL||!this.bitmap||this.bitmap.repeat},function(w$v){w$v&&w$t.isWebGL&&this.bitmap&&(this.bitmap.repeat=w$v)&&(this.bitmap.enableMerageInAtlas=!1)}),w$G(0,w$l,"height",function(){return this._h?this._h:this.uv&&this.uv!==w$h.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(w$v){this._h=w$v,this.sourceHeight||(this.sourceHeight=w$v)}),w$G(0,w$l,"isLinearSampling",function(){return!w$t.isWebGL||9728!=this.bitmap.minFifter},function(w$v){!w$v&&w$t.isWebGL&&(w$v||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),w$h.moveUV=function(w$v,w$l,w$L){for(var w$A=0;w$A<8;w$A+=2)w$L[w$A]+=w$v,w$L[w$A+1]+=w$l;return w$L},w$h.create=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e){void 0===w$m&&(w$m=0),void 0===w$Z&&(w$Z=0),void 0===w$O&&(w$O=0),void 0===w$e&&(w$e=0);var w$$=w$v instanceof laya.resource.Texture,w$_=w$$?w$v.uv:w$h.DEF_UV,w$o=w$$?w$v.bitmap:w$v,w$K=w$Q.isAtlas(w$o);if(w$K){var w$r=w$o._atlaser,w$G=w$v._atlasID;if(-1==w$G)throw new Error("create texture error");w$o=w$r._inAtlasTextureBitmapValue[w$G],w$_=w$r._inAtlasTextureOriUVValue[w$G]}var w$c=new w$h(w$o,null);w$o.width&&w$l+w$A>w$o.width&&(w$A=w$o.width-w$l),w$o.height&&w$L+w$x>w$o.height&&(w$x=w$o.height-w$L),w$c.width=w$A,w$c.height=w$x,w$c.offsetX=w$m,w$c.offsetY=w$Z,w$c.sourceWidth=w$O||w$A,w$c.sourceHeight=w$e||w$x;var w$d=1/w$o.width,w$C=1/w$o.height;w$l*=w$d,w$L*=w$C,w$A*=w$d,w$x*=w$C;var w$J=w$c.uv[0],w$B=w$c.uv[1],w$X=w$c.uv[4],w$f=w$c.uv[5],w$w=w$X-w$J,w$H=w$f-w$B,w$g=w$h.moveUV(w$_[0],w$_[1],[w$l,w$L,w$l+w$A,w$L,w$l+w$A,w$L+w$x,w$l,w$L+w$x]);w$c.uv=[w$J+w$g[0]*w$w,w$B+w$g[1]*w$H,w$X-(1-w$g[2])*w$w,w$B+w$g[3]*w$H,w$X-(1-w$g[4])*w$w,w$f-(1-w$g[5])*w$H,w$J+w$g[6]*w$w,w$f-(1-w$g[7])*w$H],w$K&&w$c.addTextureToAtlas();var w$T=w$o.scaleRate;return w$T&&1!=w$T?(w$c.sourceWidth/=w$T,w$c.sourceHeight/=w$T,w$c.width/=w$T,w$c.height/=w$T,w$c.scaleRate=w$T,w$c.offsetX/=w$T,w$c.offsetY/=w$T):w$c.scaleRate=1,w$c},w$h.createFromTexture=function(w$v,w$l,w$L,w$A,w$x){var w$m=w$v.scaleRate;1!=w$m&&(w$l*=w$m,w$L*=w$m,w$A*=w$m,w$x*=w$m);var w$Z=w$T.TEMP.setTo(w$l-w$v.offsetX,w$L-w$v.offsetY,w$A,w$x),w$O=w$Z.intersection(w$h._rect1.setTo(0,0,w$v.width,w$v.height),w$h._rect2);if(!w$O)return null;var w$e=w$h.create(w$v,w$O.x,w$O.y,w$O.width,w$O.height,w$O.x-w$Z.x,w$O.y-w$Z.y,w$A,w$x);if(w$e.bitmap&&w$e.bitmap._removeReference)return w$e.bitmap._removeReference(),w$e;var w$$="bitmap:"+(w$e.bitmap?w$e.bitmap.constructor?w$e.bitmap.constructor.name:w$e.bitmap.__className:"")+", url:"+(w$v.url+" | "+(w$e.bitmap?w$e.bitmap.url:w$v.url))+", x="+w$l+",y="+w$L+",width="+w$A+",height="+w$x+", result="+(w$O?w$O.x+","+w$O.y+","+w$O.width+","+w$O.height:"null")+", rect="+w$Z.x+","+w$Z.y+","+w$Z.width+","+w$Z.height;throw new Error("报错：bitmap._removeReference is not a function  "+w$$)},w$h.DEF_UV=[0,0,1,0,1,1,0,1],w$h.INV_UV=[0,1,1,1,1,0,0,0],w$h._rect1=new w$T,w$h._rect2=new w$T,w$h}(),w$v=function(w$v){var w$O;function w$m(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,w$m.__super.call(this)}w$_(w$m,"laya.utils.TimeLine",w$$);var w$l=w$m.prototype;return w$l.to=function(w$v,w$l,w$L,w$A,w$x){return void 0===w$x&&(w$x=0),this._create(w$v,w$l,w$L,w$A,w$x,!0)},w$l.from=function(w$v,w$l,w$L,w$A,w$x){return void 0===w$x&&(w$x=0),this._create(w$v,w$l,w$L,w$A,w$x,!1)},w$l._create=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z=w$y.getItemByClass("tweenData",w$O);return w$Z.isTo=w$m,w$Z.type=0,w$Z.target=w$v,w$Z.duration=w$L,w$Z.data=w$l,w$Z.startTime=this._startTime+w$x,w$Z.endTime=w$Z.startTime+w$Z.duration,w$Z.ease=w$A,this._startTime=Math.max(w$Z.endTime,this._startTime),this._tweenDataList.push(w$Z),this._startTimeSort=!0,this._endTimeSort=!0,this},w$l.addLabel=function(w$v,w$l){var w$L=w$y.getItemByClass("tweenData",w$O);return w$L.type=1,w$L.data=w$v,w$L.endTime=w$L.startTime=this._startTime+w$l,this._labelDic||(this._labelDic={}),this._labelDic[w$v]=w$L,this._tweenDataList.push(w$L),this},w$l.removeLabel=function(w$v){if(this._labelDic&&this._labelDic[w$v]){var w$l=this._labelDic[w$v];if(w$l){var w$L=this._tweenDataList.indexOf(w$l);-1<w$L&&this._tweenDataList.splice(w$L,1)}delete this._labelDic[w$v]}},w$l.gotoTime=function(w$v){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var w$l,w$L,w$A,w$x;for(var w$m in this._firstTweenDic)if(w$L=this._firstTweenDic[w$m])for(var w$Z in w$L)w$L.diyTarget.hasOwnProperty(w$Z)&&(w$L.diyTarget[w$Z]=w$L[w$Z]);for(w$m in this._tweenDic)(w$l=this._tweenDic[w$m]).clear(),delete this._tweenDic[w$m];if(this._index=0,this._gidIndex=0,this._currTime=w$v,this._lastTime=w$N.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=w$A=this._tweenDataList.concat(),w$A.sort(function(w$v,w$l){return w$v.endTime>w$l.endTime?1:w$v.endTime<w$l.endTime?-1:0})}else w$A=this._endTweenDataList;for(var w$O=0,w$e=w$A.length;w$O<w$e;w$O++)if(0==(w$x=w$A[w$O]).type){if(!(w$v>=w$x.endTime))break;this._index=Math.max(this._index,w$O+1);var w$$=w$x.data;if(w$x.isTo)for(var w$_ in w$$)w$x.target[w$_]=w$$[w$_]}for(w$O=0,w$e=this._tweenDataList.length;w$O<w$e;w$O++)0==(w$x=this._tweenDataList[w$O]).type&&w$v>=w$x.startTime&&w$v<w$x.endTime&&(this._index=Math.max(this._index,w$O+1),this._gidIndex++,(w$l=w$y.getItemByClass("tween",w$s))._create(w$x.target,w$x.data,w$x.duration,w$x.ease,w$J.create(this,this._animComplete,[this._gidIndex]),0,!1,w$x.isTo,!0,!1),w$l.setStartTime(this._currTime-(w$v-w$x.startTime)),w$l._updateEase(this._currTime),w$l.gid=this._gidIndex,this._tweenDic[this._gidIndex]=w$l)}},w$l.gotoLabel=function(w$v){if(null!=this._labelDic){var w$l=this._labelDic[w$v];w$l&&this.gotoTime(w$l.startTime)}},w$l.pause=function(){w$H.timer.clear(this,this._update)},w$l.resume=function(){this.play(this._currTime,this._loopKey)},w$l.play=function(w$v,w$l){if(void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(w$v,w$l){return w$v.startTime>w$l.startTime?1:w$v.startTime<w$l.startTime?-1:0});for(var w$L=0,w$A=this._tweenDataList.length;w$L<w$A;w$L++){var w$x=this._tweenDataList[w$L];if(null!=w$x&&0==w$x.type){var w$m=w$x.target,w$Z=w$m.$_GID||(w$m.$_GID=w$i.getGID()),w$O=null;for(var w$e in null==this._firstTweenDic[w$Z]?((w$O={}).diyTarget=w$m,this._firstTweenDic[w$Z]=w$O):w$O=this._firstTweenDic[w$Z],w$x.data)null==w$O[w$e]&&(w$O[w$e]=w$m[w$e])}}}"string"==typeof w$v?this.gotoLabel(w$v):this.gotoTime(w$v),this._loopKey=w$l,this._lastTime=w$N.now(),w$H.timer.frameLoop(1,this,this._update)}},w$l._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var w$v in this._tweenDic)(w$l=this._tweenDic[w$v]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var w$l,w$L=w$N.now(),w$A=w$L-this._lastTime,w$x=this._currTime+=w$A*this.scale;for(w$v in this._lastTime=w$L,this._tweenDic)(w$l=this._tweenDic[w$v])._updateEase(w$x);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var w$m=this._tweenDataList[this._index];w$x>=w$m.startTime&&(this._index++,0==w$m.type?(this._gidIndex++,(w$l=w$y.getItemByClass("tween",w$s))._create(w$m.target,w$m.data,w$m.duration,w$m.ease,w$J.create(this,this._animComplete,[this._gidIndex]),0,!1,w$m.isTo,!0,!1),w$l.setStartTime(w$x),w$l.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=w$l)._updateEase(w$x)):this.event("label",w$m.data))}},w$l._animComplete=function(w$v){this._tweenDic[w$v]&&delete this._tweenDic[w$v]},w$l._complete=function(){this.event("complete")},w$l.reset=function(){var w$v;if(this._labelDic)for(w$v in this._labelDic)delete this._labelDic[w$v];for(w$v in this._tweenDic)this._tweenDic[w$v].clear(),delete this._tweenDic[w$v];for(w$v in this._firstTweenDic)delete this._firstTweenDic[w$v];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var w$l,w$L=0;for(w$l=this._tweenDataList.length,w$L=0;w$L<w$l;w$L++)this._tweenDataList[w$L]&&this._tweenDataList[w$L].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,w$H.timer.clear(this,this._update)},w$l.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},w$G(0,w$l,"index",function(){return this._frameIndex},function(w$v){this._frameIndex=w$v,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),w$G(0,w$l,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),w$m.to=function(w$v,w$l,w$L,w$A,w$x){return void 0===w$x&&(w$x=0),(new w$m).to(w$v,w$l,w$L,w$A,w$x)},w$m.from=function(w$v,w$l,w$L,w$A,w$x){return void 0===w$x&&(w$x=0),(new w$m).from(w$v,w$l,w$L,w$A,w$x)},w$m.__init$=function(){w$O=function(){function w$v(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return w$_(w$v,""),w$v.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,w$y.recover("tweenData",this)},w$v}()},w$m}(),w$ov=function(w$x){function w$L(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,w$L.__super.call(this),this._style=w$O.EMPTY}w$_(w$L,"laya.display.Sprite",w$x);var w$v=w$L.prototype;return w$H.imps(w$v,{"laya.display.ILayout":!0}),w$v.createConchModel=function(){return new ConchNode},w$v.destroy=function(w$v){if(void 0===w$v&&(w$v=!0),this._releaseMem(),!this._destroyed){this.filters=null;var w$l=this.mask;w$l&&(this.mask=null,w$l.destroy(w$v))}w$x.prototype.destroy.call(this,w$v),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},w$v.updateZOrder=function(){w$i.updateOrder(this._childs)&&this.repaint()},w$v.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},w$v.setBounds=function(w$v){this._set$P("uBounds",w$v)},w$v.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new w$T),w$T._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},w$v.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new w$T),w$T._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},w$v._boundPointsToParent=function(w$v){void 0===w$v&&(w$v=!1);var w$l=0,w$L=0;this._style&&(w$l=this._style._tf.translateX,w$L=this._style._tf.translateY,w$v=w$v||0!==this._style._tf.rotate,this._style.scrollRect&&(w$l+=this._style.scrollRect.x,w$L+=this._style.scrollRect.y));var w$A=this._getBoundPointsM(w$v);if(!w$A||w$A.length<1)return w$A;if(8!=w$A.length&&(w$A=w$v?w$f.scanPList(w$A):w$T._getWrapRec(w$A,w$T.TEMP)._getBoundPoints()),!this.transform)return w$i.transPointList(w$A,this._x-w$l,this._y-w$L),w$A;var w$x=w$g.TEMP,w$m=0,w$Z=w$A.length;for(w$m=0;w$m<w$Z;w$m+=2)w$x.x=w$A[w$m],w$x.y=w$A[w$m+1],this.toParentPoint(w$x),w$A[w$m]=w$x.x,w$A[w$m+1]=w$x.y;return w$A},w$v.getGraphicBounds=function(w$v){return void 0===w$v&&(w$v=!1),this._graphics?this._graphics.getBounds(w$v):w$T.TEMP.setTo(0,0,0,0)},w$v._getBoundPointsM=function(w$v){if(void 0===w$v&&(w$v=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var w$l=w$i.clearArray(this._$P.temBM),w$L=w$T.TEMP;return w$L.copyFrom(this.scrollRect),w$i.concatArray(w$l,w$L._getBoundPoints()),w$l}for(var w$A,w$x,w$m,w$Z=this._graphics?this._graphics.getBoundPoints():w$i.clearArray(this._$P.temBM),w$O=0,w$e=(w$m=this._childs).length;w$O<w$e;w$O++)(w$A=w$m[w$O])instanceof laya.display.Sprite&&1==w$A.visible&&(w$x=w$A._boundPointsToParent(w$v))&&(w$Z=w$Z?w$i.concatArray(w$Z,w$x):w$x);return w$Z},w$v.getStyle=function(){return this._style===w$O.EMPTY&&(this._style=new w$O),this._style},w$v.setStyle=function(w$v){this._style=w$v},w$v._adjustTransform=function(){this._tfChanged=!1;var w$v,w$l=this._style._tf,w$L=w$l.scaleX,w$A=w$l.scaleY;if(w$l.rotate||1!==w$L||1!==w$A||w$l.skewX||w$l.skewY){(w$v=this._transform||(this._transform=w$M.create())).bTransform=!0;var w$x=.0174532922222222*(w$l.rotate-w$l.skewX),w$m=.0174532922222222*(w$l.rotate+w$l.skewY),w$Z=Math.cos(w$m),w$O=Math.sin(w$m),w$e=Math.sin(w$x),w$$=Math.cos(w$x);return w$v.a=w$L*w$Z,w$v.b=w$L*w$O,w$v.c=-w$A*w$e,w$v.d=w$A*w$$,w$v.tx=w$v.ty=0,w$v}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,w$v},w$v.pos=function(w$v,w$l,w$L){if(void 0===w$L&&(w$L=!1),this._x!==w$v||this._y!==w$l){if(this.destroyed)return this;if(w$L){this._x=w$v,this._y=w$l,this.conchModel&&this.conchModel.pos(this._x,this._y);var w$A=this._parent;w$A&&0===w$A._repaint&&(w$A._repaint=1,w$A.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=w$v,this.y=w$l}return this},w$v.pivot=function(w$v,w$l){return this.pivotX=w$v,this.pivotY=w$l,this},w$v.size=function(w$v,w$l){return this.width=w$v,this.height=w$l,this},w$v.scale=function(w$v,w$l,w$L){void 0===w$L&&(w$L=!1);var w$A=this.getStyle(),w$x=w$A._tf;if(w$x.scaleX!=w$v||w$x.scaleY!=w$l){if(this.destroyed)return this;if(w$L){w$A.setScale(w$v,w$l),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(w$v,w$l),this._renderType|=4;var w$m=this._parent;w$m&&0===w$m._repaint&&(w$m._repaint=1,w$m.parentRepaint())}else this.scaleX=w$v,this.scaleY=w$l}return this},w$v.skew=function(w$v,w$l){return this.skewX=w$v,this.skewY=w$l,this},w$v.render=function(w$v,w$l,w$L){w$W.spriteCount++,w$q.renders[this._renderType]._fun(this,w$v,w$l+this._x,w$L+this._y),this._repaint=0},w$v.drawToCanvas=function(w$v,w$l,w$L,w$A){if(w$t.isConchNode){var w$x=w$Bv.create("2D");return new w$a(w$v,w$l,w$x).ctx.setCanvasType(1),this.conchModel.drawToCanvas(w$x.source,w$L,w$A),w$x}return w$Q.drawToCanvas(this,this._renderType,w$v,w$l,w$L,w$A)},w$v.customRender=function(w$v,w$l,w$L){this._renderType|=1024},w$v._applyFilters=function(){var w$v;if(!w$t.isWebGL&&((w$v=this._$P.filters)&&!(w$v.length<1)))for(var w$l=0,w$L=w$v.length;w$l<w$L;w$l++)w$v[w$l].action.apply(this._$P.cacheCanvas)},w$v._isHaveGlowFilter=function(){var w$v,w$l=0;if(this.filters)for(w$l=0;w$l<this.filters.length;w$l++)if(8==this.filters[w$l].type)return!0;for(w$l=0,w$v=this._childs.length;w$l<w$v;w$l++)if(this._childs[w$l]._isHaveGlowFilter())return!0;return!1},w$v.localToGlobal=function(w$v,w$l){void 0===w$l&&(w$l=!1),!0===w$l&&(w$v=new w$g(w$v.x,w$v.y));for(var w$L=this;w$L&&w$L!=w$H.stage;)w$v=w$L.toParentPoint(w$v),w$L=w$L.parent;return w$v},w$v.globalToLocal=function(w$v,w$l){void 0===w$l&&(w$l=!1),w$l&&(w$v=new w$g(w$v.x,w$v.y));for(var w$L=this,w$A=[];w$L&&w$L!=w$H.stage;)w$A.push(w$L),w$L=w$L.parent;for(var w$x=w$A.length-1;0<=w$x;)w$v=(w$L=w$A[w$x]).fromParentPoint(w$v),w$x--;return w$v},w$v.toParentPoint=function(w$v){if(!w$v)return w$v;w$v.x-=this.pivotX,w$v.y-=this.pivotY,this.transform&&this._transform.transformPoint(w$v),w$v.x+=this._x,w$v.y+=this._y;var w$l=this._style.scrollRect;return w$l&&(w$v.x-=w$l.x,w$v.y-=w$l.y),w$v},w$v.fromParentPoint=function(w$v){if(!w$v)return w$v;w$v.x-=this._x,w$v.y-=this._y;var w$l=this._style.scrollRect;return w$l&&(w$v.x+=w$l.x,w$v.y+=w$l.y),this.transform&&this._transform.invertTransformPoint(w$v),w$v.x+=this.pivotX,w$v.y+=this.pivotY,w$v},w$v.on=function(w$v,w$l,w$L,w$A){return 1!==this._mouseEnableState&&this.isMouseEvent(w$v)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(w$v,w$l,w$L,w$A,!1)):w$x.prototype.on.call(this,w$v,w$l,w$L,w$A)},w$v.once=function(w$v,w$l,w$L,w$A){return 1!==this._mouseEnableState&&this.isMouseEvent(w$v)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(w$v,w$l,w$L,w$A,!0)):w$x.prototype.once.call(this,w$v,w$l,w$L,w$A)},w$v._$2__onDisplay=function(){if(1!==this._mouseEnableState){var w$v=this;for(w$v=w$v.parent;w$v&&1!==w$v._mouseEnableState&&!w$v._getBit(2);)w$v.mouseEnabled=!0,w$v._setBit(2,!0),w$v=w$v.parent}},w$v.loadImage=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z=this;return void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0),void 0===w$A&&(w$A=0),void 0===w$x&&(w$x=0),this.graphics.loadImage(w$v,w$l,w$L,w$A,w$x,function(w$v){w$Z.destroyed||(w$Z.size(w$l+(w$A||w$v.width),w$L+(w$x||w$v.height)),w$Z.repaint(),w$m&&w$m.runWith(w$v))}),this},w$v.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},w$v._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},w$v._childChanged=function(w$v){this._childs.length?this._renderType|=2048:this._renderType&=-2049,w$v&&this._get$P("hasZorder")&&w$H.timer.callLater(this,this.updateZOrder),this.repaint()},w$v.parentRepaint=function(){var w$v=this._parent;w$v&&0===w$v._repaint&&(w$v._repaint=1,w$v.parentRepaint())},w$v.startDrag=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){void 0===w$l&&(w$l=!1),void 0===w$L&&(w$L=0),void 0===w$A&&(w$A=300),void 0===w$m&&(w$m=!1),void 0===w$Z&&(w$Z=.92),this._$P.dragging||this._set$P("dragging",new w$Y),this._$P.dragging.start(this,w$v,w$l,w$L,w$A,w$x,w$m,w$Z)},w$v.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},w$v._releaseMem=function(){if(this._$P){var w$v=this._$P.cacheCanvas;w$v&&w$v.ctx&&(w$y.recover("RenderContext",w$v.ctx),w$v.ctx.canvas.size(0,0),w$v.ctx=null);var w$l=this._$P._filterCache;w$l&&(w$l.destroy(),w$l.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},w$v._setDisplay=function(w$v){w$v||this._releaseMem(),w$x.prototype._setDisplay.call(this,w$v)},w$v.hitTestPoint=function(w$v,w$l){var w$L=this.globalToLocal(w$g.TEMP.setTo(w$v,w$l));return w$v=w$L.x,w$l=w$L.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?w$T.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(w$v,w$l)},w$v.getMousePoint=function(){return this.globalToLocal(w$g.TEMP.setTo(w$H.stage.mouseX,w$H.stage.mouseY))},w$v._getWords=function(){return null},w$v._addChildsToLayout=function(w$v){var w$l=this._getWords();if(null==w$l&&0==this._childs.length)return!1;if(w$l)for(var w$L=0,w$A=w$l.length;w$L<w$A;w$L++)w$v.push(w$l[w$L]);w$L=0;for(var w$x=this._childs.length;w$L<w$x;++w$L){var w$m=this._childs[w$L];w$m._style._enableLayout()&&w$m._addToLayout(w$v)}return!0},w$v._addToLayout=function(w$v){this._style.absolute||(this._style.block?w$v.push(this):this._addChildsToLayout(w$v)&&(this.x=this.y=0))},w$v._isChar=function(){return!1},w$v._getCSSStyle=function(){return this._style.getCSSStyle()},w$v._setAttributes=function(w$v,w$l){switch(w$v){case"x":this.x=parseFloat(w$l);break;case"y":this.y=parseFloat(w$l);break;case"width":this.width=parseFloat(w$l);break;case"height":this.height=parseFloat(w$l);break;default:this[w$v]=w$l}},w$v._layoutLater=function(){this.parent&&this.parent._layoutLater()},w$G(0,w$v,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(w$v){this._optimizeScrollRect!=w$v&&(this._optimizeScrollRect=w$v,this.conchModel&&this.conchModel.optimizeScrollRect(w$v))}),w$G(0,w$v,"customRenderEnable",null,function(w$v){if(w$v&&(this._renderType|=1024,w$t.isConchNode)){w$L.CustomList.push(this);var w$l=new w$Bv("2d");w$l._setContext(new CanvasRenderingContext2D),this.customContext=new w$a(0,0,w$l),w$l.context.setCanvasType&&w$l.context.setCanvasType(2),this.conchModel.custom(w$l.context)}}),w$G(0,w$v,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(w$v){this.cacheAs=w$v?this._$P.hasFilter?"none":"normal":"none"}),w$G(0,w$v,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(w$v){var w$l=this._$P.cacheCanvas;if(w$v!==(w$l?w$l.type:"none")){if("none"!==w$v)this._getBit(1)||this._setUpNoticeType(1),w$l||(w$l=this._set$P("cacheCanvas",w$y.getItemByClass("cacheCanvas",Object))),w$l.type=w$v,w$l.reCache=!0,this._renderType|=16,"bitmap"==w$v&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(w$l){var w$L=w$l;w$L&&w$L.ctx&&(w$y.recover("RenderContext",w$L.ctx),w$L.ctx.canvas.size(0,0),w$L.ctx=null),w$y.recover("cacheCanvas",w$l)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),w$G(0,w$v,"zOrder",function(){return this._zOrder},function(w$v){this._zOrder!=w$v&&(this._zOrder=w$v,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(w$v),this._parent&&(w$v&&this._parent._set$P("hasZorder",!0),w$H.timer.callLater(this._parent,this.updateZOrder)))}),w$G(0,w$v,"rotation",function(){return this._style._tf.rotate},function(w$v){var w$l=this.getStyle();if(w$l._tf.rotate!==w$v){w$l.setRotate(w$v),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(w$v),this._renderType|=4;var w$L=this._parent;w$L&&0===w$L._repaint&&(w$L._repaint=1,w$L.parentRepaint())}}),w$G(0,w$v,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(w$v){this._width!==w$v&&(this._width=w$v,this.conchModel&&this.conchModel.size(w$v,this._height),this.repaint())}),w$G(0,w$v,"x",function(){return this._x},function(w$v){if(this._x!==w$v){if(this.destroyed)return;this._x=w$v,this.conchModel&&this.conchModel.pos(w$v,this._y);var w$l=this._parent;w$l&&0===w$l._repaint&&(w$l._repaint=1,w$l.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),w$G(0,w$v,"globalScaleY",function(){for(var w$v=1,w$l=this;w$l&&w$l!==w$H.stage;)w$v*=w$l.scaleY,w$l=w$l.parent;return w$v}),w$G(0,w$v,"hitArea",function(){return this._$P.hitArea},function(w$v){this._set$P("hitArea",w$v)}),w$G(0,w$v,"staticCache",function(){return this._$P.staticCache},function(w$v){this._set$P("staticCache",w$v),w$v||this.reCache()}),w$G(0,w$v,"texture",function(){return this._texture},function(w$v){this._texture!=w$v&&(this._texture=w$v,this.graphics.cleanByTexture(w$v,0,0))}),w$G(0,w$v,"y",function(){return this._y},function(w$v){if(this._y!==w$v){if(this.destroyed)return;this._y=w$v,this.conchModel&&this.conchModel.pos(this._x,w$v);var w$l=this._parent;w$l&&0===w$l._repaint&&(w$l._repaint=1,w$l.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),w$G(0,w$v,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(w$v){this._height!==w$v&&(this._height=w$v,this.conchModel&&this.conchModel.size(this._width,w$v),this.repaint())}),w$G(0,w$v,"blendMode",function(){return this._style.blendMode},function(w$v){this.getStyle().blendMode=w$v,this.conchModel&&this.conchModel.blendMode(w$v),w$v&&"source-over"!=w$v?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),w$G(0,w$v,"scaleX",function(){return this._style._tf.scaleX},function(w$v){var w$l=this.getStyle();if(w$l._tf.scaleX!==w$v){w$l.setScaleX(w$v),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(w$v,w$l._tf.scaleY),this._renderType|=4;var w$L=this._parent;w$L&&0===w$L._repaint&&(w$L._repaint=1,w$L.parentRepaint())}}),w$G(0,w$v,"scaleY",function(){return this._style._tf.scaleY},function(w$v){var w$l=this.getStyle();if(w$l._tf.scaleY!==w$v){w$l.setScaleY(w$v),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(w$l._tf.scaleX,w$v),this._renderType|=4;var w$L=this._parent;w$L&&0===w$L._repaint&&(w$L._repaint=1,w$L.parentRepaint())}}),w$G(0,w$v,"stage",function(){return w$H.stage}),w$G(0,w$v,"skewX",function(){return this._style._tf.skewX},function(w$v){var w$l=this.getStyle();if(w$l._tf.skewX!==w$v){w$l.setSkewX(w$v),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(w$v,w$l._tf.skewY),this._renderType|=4;var w$L=this._parent;w$L&&0===w$L._repaint&&(w$L._repaint=1,w$L.parentRepaint())}}),w$G(0,w$v,"scrollRect",function(){return this._style.scrollRect},function(w$v){this.getStyle().scrollRect=w$v,this.repaint(),w$v?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(w$v.x,w$v.y,w$v.width,w$v.height)):(this._renderType&=-129,this.conchModel&&(w$L.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),w$G(0,w$v,"skewY",function(){return this._style._tf.skewY},function(w$v){var w$l=this.getStyle();if(w$l._tf.skewY!==w$v){w$l.setSkewY(w$v),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(w$l._tf.skewX,w$v),this._renderType|=4;var w$L=this._parent;w$L&&0===w$L._repaint&&(w$L._repaint=1,w$L.parentRepaint())}}),w$G(0,w$v,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(w$v){this._tfChanged=!1,(this._transform=w$v)&&(this._x=w$v.tx,this._y=w$v.ty,w$v.tx=w$v.ty=0,this.conchModel&&this.conchModel.transform(w$v.a,w$v.b,w$v.c,w$v.d,this._x,this._y)),w$v?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),w$G(0,w$v,"pivotX",function(){return this._style._tf.translateX},function(w$v){this.getStyle().setTranslateX(w$v),this.conchModel&&this.conchModel.pivot(w$v,this._style._tf.translateY),this.repaint()}),w$G(0,w$v,"pivotY",function(){return this._style._tf.translateY},function(w$v){this.getStyle().setTranslateY(w$v),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,w$v),this.repaint()}),w$G(0,w$v,"alpha",function(){return this._style.alpha},function(w$v){this._style&&this._style.alpha!==w$v&&(w$v=w$v<0?0:1<w$v?1:w$v,this.getStyle().alpha=w$v,this.conchModel&&this.conchModel.alpha(w$v),1!==w$v?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),w$G(0,w$v,"visible",function(){return this._style.visible},function(w$v){this._style&&this._style.visible!==w$v&&(this.getStyle().visible=w$v,this.conchModel&&this.conchModel.visible(w$v),this.parentRepaint())}),w$G(0,w$v,"graphics",function(){return this._graphics||(this.graphics=w$Q.createGraphics())},function(w$v){this._graphics&&(this._graphics._sp=null),(this._graphics=w$v)?(this._renderType&=-2,this._renderType|=512,(w$v._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(w$L.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),w$G(0,w$v,"filters",function(){return this._$P.filters},function(w$v){w$v&&0===w$v.length&&(w$v=null),this._$P.filters!=w$v&&(this._set$P("filters",w$v?w$v.slice():null),w$t.isConchApp&&(this.conchModel&&(w$L.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),w$t.isWebGL&&(w$v&&w$v.length?this._renderType|=32:this._renderType&=-33),w$v&&0<w$v.length?(this._getBit(1)||this._setUpNoticeType(1),w$t.isWebGL&&1==w$v.length&&w$v[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(w$t.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),w$G(0,w$v,"parent",w$x.prototype._$get_parent,function(w$v){w$H.superSet(w$vv,this,"parent",w$v),w$v&&this._getBit(2)&&this._$2__onDisplay()}),w$G(0,w$v,"mask",function(){return this._$P._mask},function(w$v){w$v&&this.mask&&this.mask._$P.maskParent||(w$v?(this.cacheAs="bitmap",this._set$P("_mask",w$v),w$v._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",w$v),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(w$v?w$v.conchModel:null),this._renderType|=64,this.parentRepaint())}),w$G(0,w$v,"mouseEnabled",function(){return 1<this._mouseEnableState},function(w$v){this._mouseEnableState=w$v?2:1}),w$G(0,w$v,"globalScaleX",function(){for(var w$v=1,w$l=this;w$l&&w$l!==w$H.stage;)w$v*=w$l.scaleX,w$l=w$l.parent;return w$v}),w$G(0,w$v,"mouseX",function(){return this.getMousePoint().x}),w$G(0,w$v,"mouseY",function(){return this.getMousePoint().y}),w$L.fromImage=function(w$v){return(new w$L).loadImage(w$v)},w$L._cachePool=[],w$L.CustomList=[],w$e(w$L,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=w$Z.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),w$L}(w$vv),w$Kv=function(w$v){function w$l(w$v){this._audio=null,this._onEnd=null,this._resumePlay=null,w$l.__super.call(this),this._onEnd=w$i.bind(this.__onEnd,this),this._resumePlay=w$i.bind(this.__resumePlay,this),w$v.addEventListener("ended",this._onEnd),this._audio=w$v}w$_(w$l,"laya.media.h5audio.AudioSoundChannel",w$Av);var w$L=w$l.prototype;return w$L.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(w$H.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},w$L.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,w$N.container.appendChild(this._audio),this._audio.play()}catch(w$v){this.event("error")}},w$L.play=function(w$v){this.isStopped=!1;try{this._audio.playbackRate=w$k.playbackRate,this._audio.currentTime=this.startTime}catch(w$v){return void this._audio.addEventListener("canplay",this._resumePlay)}w$k.addChannel(this),w$N.container.appendChild(this._audio),!w$v&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},w$L.stop=function(){this.isStopped=!0,w$k.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&w$t.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),w$N.onIE||this._audio!=w$Lv._musicAudio&&w$y.recover("audio:"+this.url,this._audio),w$N.removeElement(this._audio),this._audio=null)},w$L.pause=function(){this.isStopped=!0,w$k.removeChannel(this),"pause"in this._audio&&this._audio.pause()},w$L.resume=function(){this._audio&&(this.isStopped=!1,w$k.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},w$G(0,w$L,"position",function(){return this._audio?this._audio.currentTime:0}),w$G(0,w$L,"duration",function(){return this._audio?this._audio.duration:0}),w$G(0,w$L,"volume",function(){return this._audio?this._audio.volume:1},function(w$v){this._audio&&(this._audio.volume=w$v)}),w$l}(),w$rv=function(w$v){function w$l(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=w$mv.ctx,w$l.__super.call(this),this._onPlayEnd=w$i.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}w$_(w$l,"laya.media.webaudio.WebAudioSoundChannel",w$Av);var w$L=w$l.prototype;return w$L.play=function(w$v){if(w$k.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var w$l=this.context,w$L=this.gain,w$A=w$l.createBufferSource();(this.bufferSource=w$A).buffer=this.audioBuffer,w$A.connect(w$L),w$L&&w$L.disconnect(),w$L.connect(w$l.destination),w$A.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=w$N.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(w$A.loop=!0),w$A.playbackRate.setTargetAtTime?w$A.playbackRate.setTargetAtTime(w$k.playbackRate,this.context.currentTime,.1):w$A.playbackRate.value=w$k.playbackRate,w$A.start(0,this.startTime),!w$v&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},w$L.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(w$H.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},w$L._clearBufferSource=function(){if(this.bufferSource){var w$v=this.bufferSource;w$v.stop?w$v.stop(0):w$v.noteOff(0),w$v.disconnect(0),w$v.onended=null,w$l._tryCleanFailed||this._tryClearBuffer(w$v),this.bufferSource=null}},w$L._tryClearBuffer=function(w$v){try{w$v.buffer=null}catch(w$v){w$l._tryCleanFailed=!0}},w$L.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,w$k.removeChannel(this),this.startHandler=null,this.completeHandler=null},w$L.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,w$k.removeChannel(this)},w$L.resume=function(){this.startTime=this._pauseTime,this.play(!1)},w$G(0,w$L,"position",function(){return this.bufferSource?(w$N.now()-this._startTime)/1e3+this.startTime:0}),w$G(0,w$L,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),w$G(0,w$L,"volume",function(){return this._volume},function(w$v){this.isStopped||(this._volume=w$v,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(w$v,this.context.currentTime,.1):this.gain.gain.value=w$v)}),w$l._tryCleanFailed=!1,w$l}(),w$Gv=function(w$v){function w$l(){w$l.__super.call(this),this._w=0,this._h=0}w$_(w$l,"laya.resource.Bitmap",w$$v);var w$L=w$l.prototype;return w$G(0,w$L,"width",function(){return this._w}),w$G(0,w$L,"height",function(){return this._h}),w$G(0,w$L,"source",function(){return this._source}),w$l}(),w$cv=function(w$l){function w$v(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,w$v.__super.call(this),this._interval=w$A.animationInterval,this._setUpNoticeType(1)}w$_(w$v,"laya.display.AnimationPlayerBase",w$l);var w$L=w$v.prototype;return w$L.play=function(w$v,w$l,w$L,w$A){void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=!0),void 0===w$L&&(w$L=""),void 0===w$A&&(w$A=!0),this._isPlaying=!0,this.index="string"==typeof w$v?this._getFrameByLabel(w$v):w$v,this.loop=w$l,this._actionName=w$L,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},w$L._getFrameByLabel=function(w$v){var w$l=0;for(w$l=0;w$l<this._count;w$l++)if(this._labels[w$l]&&0<=this._labels[w$l].indexOf(w$v))return w$l;return 0},w$L._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},w$L._setControlNode=function(w$v){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=w$v)&&w$v!=this&&(w$v.on("display",this,this._checkResumePlaying),w$v.on("undisplay",this,this._checkResumePlaying))},w$L._setDisplay=function(w$v){w$l.prototype._setDisplay.call(this,w$v),this._checkResumePlaying()},w$L._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},w$L.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},w$L.addLabel=function(w$v,w$l){this._labels||(this._labels={}),this._labels[w$l]||(this._labels[w$l]=[]),this._labels[w$l].push(w$v)},w$L.removeLabel=function(w$v){if(w$v){if(this._labels)for(var w$l in this._labels)this._removeLabelFromLabelList(this._labels[w$l],w$v)}else this._labels=null},w$L._removeLabelFromLabelList=function(w$v,w$l){if(w$v)for(var w$L=w$v.length-1;0<=w$L;w$L--)w$v[w$L]==w$l&&w$v.splice(w$L,1)},w$L.gotoAndStop=function(w$v){this.index="string"==typeof w$v?this._getFrameByLabel(w$v):w$v,this.stop()},w$L._displayToIndex=function(w$v){},w$L.clear=function(){this.stop(),this._labels=null},w$G(0,w$L,"interval",function(){return this._interval},function(w$v){this._interval!=w$v&&(this._frameRateChanged=!0,this._interval=w$v,this._isPlaying&&0<w$v&&this.timerLoop(w$v,this,this._frameLoop,null,!0,!0))}),w$G(0,w$L,"isPlaying",function(){return this._isPlaying}),w$G(0,w$L,"index",function(){return this._index},function(w$v){if(this._index=w$v,this._displayToIndex(w$v),this._labels&&this._labels[w$v])for(var w$l=this._labels[w$v],w$L=0,w$A=w$l.length;w$L<w$A;w$L++)this.event("label",w$l[w$L])}),w$G(0,w$L,"count",function(){return this._count}),w$v.WRAP_POSITIVE=0,w$v.WRAP_REVERSE=1,w$v.WRAP_PINGPONG=2,w$v}(w$ov),w$dv=function(w$l){function w$r(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,w$r.__super.call(this),this.overflow=w$r.VISIBLE,this._style=new w$lv(this),this._style.wordWrap=!1}w$_(w$r,"laya.display.Text",w$l);var w$v=w$r.prototype;return w$v.destroy=function(w$v){void 0===w$v&&(w$v=!0),w$l.prototype.destroy.call(this,w$v),this._lines=null,this._words&&(this._words.length=0,this._words=null)},w$v._getBoundPointsM=function(w$v){void 0===w$v&&(w$v=!1);var w$l=w$T.TEMP;return w$l.setTo(0,0,this.width,this.height),w$l._getBoundPoints()},w$v.getGraphicBounds=function(w$v){void 0===w$v&&(w$v=!1);var w$l=w$T.TEMP;return w$l.setTo(0,0,this.width,this.height),w$l},w$v._getCSSStyle=function(){return this._style},w$v.lang=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$,w$_){if(w$v=w$r.langPacks&&w$r.langPacks[w$v]?w$r.langPacks[w$v]:w$v,arguments.length<2)this._text=w$v;else{for(var w$o=0,w$K=arguments.length;w$o<w$K;w$o++)w$v=w$v.replace("{"+w$o+"}",arguments[w$o+1]);this._text=w$v}},w$v._isPassWordMode=function(){var w$v=this._style.password;return"prompt"in this&&this.prompt==this._text&&(w$v=!1),w$v},w$v._getPassWordTxt=function(w$v){var w$l;w$l="";for(var w$L=w$v.length;0<w$L;w$L--)w$l+="●";return w$l},w$v.renderText=function(w$v,w$l){var w$L=this.graphics;w$L.clear(!0);var w$A=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(w$N.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);w$N.context.font=w$A;var w$x=this.padding,w$m=w$x[3],w$Z="left",w$O=this._lines,w$e=this.leading+this._charSize.height,w$$=this._currBitmapFont;w$$&&(w$e=this.leading+w$$.getMaxHeight());var w$_=w$x[0];if(!w$$&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(w$Z="right",w$m=this._width-w$x[1]):"center"==this.align&&(w$Z="center",w$m=.5*this._width+w$x[3]-w$x[1])),0<this._height){var w$o=this._textHeight>this._height?"top":this.valign;"middle"===w$o?w$_=.5*(this._height-w$l*w$e)+w$x[0]-w$x[2]:"bottom"===w$o&&(w$_=this._height-w$l*w$e-w$x[2])}var w$K=this._style;if(w$$&&w$$.autoScaleSize)var w$r=w$$.fontSize/this.fontSize;if(this._clipPoint)if(w$L.save(),w$$&&w$$.autoScaleSize){var w$G=0,w$c=0;w$G=this._width?this._width-w$x[3]-w$x[1]:this._textWidth,w$c=this._height?this._height-w$x[0]-w$x[2]:this._textHeight,w$G*=w$r,w$c*=w$r,w$L.clipRect(w$x[3],w$x[0],w$G,w$c)}else w$L.clipRect(w$x[3],w$x[0],this._width?this._width-w$x[3]-w$x[1]:this._textWidth,this._height?this._height-w$x[0]-w$x[2]:this._textHeight);var w$d=w$K.password;"prompt"in this&&this.prompt==this._text&&(w$d=!1);for(var w$C=0,w$J=0,w$B=Math.min(this._lines.length,w$l+w$v)||1,w$X=w$v;w$X<w$B;w$X++){var w$f,w$w=w$O[w$X];if(w$d){var w$H=w$w.length;w$w="";for(var w$g=w$H;0<w$g;w$g--)w$w+="●"}if(w$C=w$m-(this._clipPoint?this._clipPoint.x:0),w$J=w$_+w$e*w$X-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(w$Z,w$C,w$J,w$X),w$$){var w$T=this.width;w$$.autoScaleSize&&(w$T=this.width*w$r),w$$.drawText(w$w,this,w$C,w$J,this.align,w$T)}else w$t.isWebGL?(this._words||(this._words=[]),(w$f=this._words.length>w$X-w$v?this._words[w$X-w$v]:new w$z).setText(w$w)):w$f=w$w,w$K.stroke?w$L.fillBorderText(w$f,w$C,w$J,w$A,this.color,w$K.strokeColor,w$K.stroke,w$Z):w$L.fillText(w$f,w$C,w$J,w$A,this.color,w$Z)}if(w$$&&w$$.autoScaleSize){var w$h=1/w$r;this.scale(w$h,w$h)}this._clipPoint&&w$L.restore(),this._startX=w$m,this._startY=w$_},w$v.drawUnderline=function(w$v,w$l,w$L,w$A){var w$x=this._lineWidths[w$A];switch(w$v){case"center":w$l-=w$x/2;break;case"right":w$l-=w$x}w$L+=this._charSize.height,this._graphics.drawLine(w$l,w$L,w$l+w$x,w$L,this.underlineColor||this.color,1)},w$v.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);w$N.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new w$g(0,0)):this._clipPoint=null;var w$v=this._lines.length;if(this.overflow!=w$r.VISIBLE){var w$l=this.overflow==w$r.HIDDEN?Math.floor:Math.ceil;w$v=Math.min(w$v,w$l((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var w$L=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(w$L,w$v),this.repaint()},w$v.evalTextSize=function(){var w$v,w$l=NaN;w$v=Math.max.apply(this,this._lineWidths),w$l=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],w$v==this._textWidth&&w$l==this._textHeight||(this._textWidth=w$v,this._textHeight=w$l,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},w$v.checkEnabledViewportOrNot=function(){return this.overflow==w$r.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},w$v.changeText=function(w$v){this._text!==w$v&&(this.lang(w$v+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},w$v.parseLines=function(w$v){var w$l=this.wordWrap||this.overflow==w$r.HIDDEN;if(w$l)var w$L=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var w$A=w$N.context.measureText(w$r._testWord);w$t.isConchApp&&0===w$A.width&&0===w$A.height&&(w$A=w$N.context.measureText("W")),this._charSize.width=w$A.width,this._charSize.height=w$A.height||this.fontSize}for(var w$x=w$v.replace(/\r\n/g,"\n").split("\n"),w$m=0,w$Z=w$x.length;w$m<w$Z;w$m++){var w$O=w$x[w$m];w$l?this.parseLine(w$O,w$L):(this._lineWidths.push(this.getTextWidth(w$O)),this._lines.push(w$O))}},w$v.parseLine=function(w$v,w$l){w$N.context;var w$L,w$A=this._lines,w$x=0,w$m=NaN,w$Z=NaN,w$O=0;if((w$m=this.getTextWidth(w$v))<=w$l)return w$A.push(w$v),void this._lineWidths.push(w$m);w$m=this._charSize.width,0==(w$x=Math.floor(w$l/w$m))&&(w$x=1),w$Z=w$m=this.getTextWidth(w$v.substring(0,w$x));for(var w$e=w$x,w$$=w$v.length;w$e<w$$;w$e++)if(w$l<(w$Z+=w$m=this.getTextWidth(w$v.charAt(w$e))))if(this.wordWrap){var w$_=w$v.substring(w$O,w$e);if(w$_.charCodeAt(w$_.length-1)<255?(w$L=/(?:\w|-)+$/.exec(w$_))&&(w$e=w$L.index+w$O,0==w$L.index?w$e+=w$_.length:w$_=w$v.substring(w$O,w$e)):w$r.RightToLeft&&(w$L=/([\u0600-\u06FF])+$/.exec(w$_))&&(w$e=w$L.index+w$O,0==w$L.index?w$e+=w$_.length:w$_=w$v.substring(w$O,w$e)),w$A.push(w$_),this._lineWidths.push(w$Z-w$m),!((w$O=w$e)+w$x<w$$)){w$A.push(w$v.substring(w$O,w$$)),this._lineWidths.push(this.getTextWidth(w$A[w$A.length-1])),w$O=-1;break}w$e+=w$x,w$Z=w$m=this.getTextWidth(w$v.substring(w$O,w$e)),w$e--}else if(this.overflow==w$r.HIDDEN)return w$A.push(w$v.substring(0,w$e)),void this._lineWidths.push(this.getTextWidth(w$A[w$A.length-1]));this.wordWrap&&-1!=w$O&&(w$A.push(w$v.substring(w$O,w$$)),this._lineWidths.push(this.getTextWidth(w$A[w$A.length-1])))},w$v.getTextWidth=function(w$v){return this._currBitmapFont?this._currBitmapFont.getTextWidth(w$v):w$N.context.measureText(w$v).width},w$v.getWordWrapWidth=function(){var w$v=this.padding,w$l=NaN;return(w$l=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(w$l=this.wordWrap?100:w$N.width),w$l<=0&&(w$l=100),w$l-w$v[3]-w$v[1]},w$v.getCharPoint=function(w$v,w$l){this._isChanged&&w$H.timer.runCallLater(this,this.typeset);for(var w$L=0,w$A=this._lines,w$x=0,w$m=0,w$Z=w$A.length;w$m<w$Z;w$m++){if(w$v<(w$L+=w$A[w$m].length)){var w$O=w$m;break}w$x=w$L}var w$e=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;w$N.context.font=w$e;var w$$=this.getTextWidth(this._text.substring(w$x,w$v));return(w$l||new w$g).setTo(this._startX+w$$-(this._clipPoint?this._clipPoint.x:0),this._startY+w$O*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},w$G(0,w$v,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(w$v){w$v!=this._width&&(w$H.superSet(w$ov,this,"width",w$v),this.isChanged=!0)}),w$G(0,w$v,"textWidth",function(){return this._isChanged&&w$H.timer.runCallLater(this,this.typeset),this._textWidth}),w$G(0,w$v,"height",function(){return this._height?this._height:this.textHeight},function(w$v){w$v!=this._height&&(w$H.superSet(w$ov,this,"height",w$v),this.isChanged=!0)}),w$G(0,w$v,"textHeight",function(){return this._isChanged&&w$H.timer.runCallLater(this,this.typeset),this._textHeight}),w$G(0,w$v,"padding",function(){return this._getCSSStyle().padding},function(w$v){this._getCSSStyle().padding=w$v,this.isChanged=!0}),w$G(0,w$v,"bold",function(){return this._getCSSStyle().bold},function(w$v){this._getCSSStyle().bold=w$v,this.isChanged=!0}),w$G(0,w$v,"text",function(){return this._text||""},function(w$v){this._text!==w$v&&(this.lang(w$v+""),this.isChanged=!0,this.event("change"))}),w$G(0,w$v,"color",function(){return this._getCSSStyle().color},function(w$v){this._getCSSStyle().color!=w$v&&(this._getCSSStyle().color=w$v,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),w$G(0,w$v,"font",function(){return this._getCSSStyle().fontFamily},function(w$v){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),w$r._bitmapFonts&&w$r._bitmapFonts[w$v]&&(this._currBitmapFont=w$r._bitmapFonts[w$v]),this._getCSSStyle().fontFamily=w$v,this.isChanged=!0}),w$G(0,w$v,"fontSize",function(){return this._getCSSStyle().fontSize},function(w$v){this._getCSSStyle().fontSize=w$v,this.isChanged=!0}),w$G(0,w$v,"italic",function(){return this._getCSSStyle().italic},function(w$v){this._getCSSStyle().italic=w$v,this.isChanged=!0}),w$G(0,w$v,"align",function(){return this._getCSSStyle().align},function(w$v){this._getCSSStyle().align=w$v,this.isChanged=!0}),w$G(0,w$v,"valign",function(){return this._getCSSStyle().valign},function(w$v){this._getCSSStyle().valign=w$v,this.isChanged=!0}),w$G(0,w$v,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(w$v){this._getCSSStyle().wordWrap=w$v,this.isChanged=!0}),w$G(0,w$v,"leading",function(){return this._getCSSStyle().leading},function(w$v){this._getCSSStyle().leading=w$v,this.isChanged=!0}),w$G(0,w$v,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(w$v){this._getCSSStyle().backgroundColor=w$v,this.isChanged=!0}),w$G(0,w$v,"borderColor",function(){return this._getCSSStyle().borderColor},function(w$v){this._getCSSStyle().borderColor=w$v,this.isChanged=!0}),w$G(0,w$v,"stroke",function(){return this._getCSSStyle().stroke},function(w$v){this._getCSSStyle().stroke=w$v,this.isChanged=!0}),w$G(0,w$v,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(w$v){this._getCSSStyle().strokeColor=w$v,this.isChanged=!0}),w$G(0,w$v,"isChanged",null,function(w$v){this._isChanged!==w$v&&(this._isChanged=w$v)&&w$H.timer.callLater(this,this.typeset)}),w$G(0,w$v,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(w$v){if(!(this.overflow!=w$r.SCROLL||this.textWidth<this._width)&&this._clipPoint){w$v=w$v<this.padding[3]?this.padding[3]:w$v;var w$l=this._textWidth-this._width;w$v=w$l<w$v?w$l:w$v;var w$L=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=w$v,this.renderText(this._lastVisibleLineIndex,w$L)}}),w$G(0,w$v,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(w$v){if(!(this.overflow!=w$r.SCROLL||this.textHeight<this._height)&&this._clipPoint){w$v=w$v<this.padding[0]?this.padding[0]:w$v;var w$l=this._textHeight-this._height,w$L=(w$v=w$l<w$v?w$l:w$v)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=w$L;var w$A=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=w$v,this.renderText(w$L,w$A)}}),w$G(0,w$v,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),w$G(0,w$v,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),w$G(0,w$v,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),w$G(0,w$v,"underlineColor",function(){return this._underlineColor},function(w$v){this._underlineColor=w$v,this._isChanged=!0,this.typeset()}),w$r.registerBitmapFont=function(w$v,w$l){w$r._bitmapFonts||(w$r._bitmapFonts={}),w$r._bitmapFonts[w$v]=w$l},w$r.unregisterBitmapFont=function(w$v,w$l){if(void 0===w$l&&(w$l=!0),w$r._bitmapFonts&&w$r._bitmapFonts[w$v]){var w$L=w$r._bitmapFonts[w$v];w$l&&w$L.destroy(),delete w$r._bitmapFonts[w$v]}},w$r.setTextRightToLeft=function(){var w$v;(w$v=w$N.canvas.source.style).display="none",w$v.position="absolute",w$v.direction="rtl",w$t._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,w$N.document.body.appendChild(w$N.canvas.source)},w$r.supportFont=function(w$v){w$N.context.font="10px sans-serif";var w$l=w$N.context.measureText("abcji").width;w$N.context.font="10px "+w$v;var w$L=w$N.context.measureText("abcji").width;return console.log(w$l,w$L),w$l!==w$L},w$r._testWord="游",w$r.langPacks=null,w$r.VISIBLE="visible",w$r.SCROLL="scroll",w$r.HIDDEN="hidden",w$r.CharacterCache=!0,w$r.RightToLeft=!1,w$r._bitmapFonts=null,w$e(w$r,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),w$r}(w$ov),w$Cv=function(w$o){function w$Z(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",w$Z.__super.call(this),this.offset=new w$g,this._canvasTransform=new w$M,this._previousOrientation=w$N.window.orientation;var w$l=this;this.transform=w$M.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var w$v=w$N.window,w$L=this;w$v.addEventListener("focus",function(){w$l._isFocused=!0,w$L.event("focus"),w$L.event("focuschange")}),w$v.addEventListener("blur",function(){w$l._isFocused=!1,w$L.event("blur"),w$L.event("focuschange"),w$L._isInputting()&&(w$fv.inputElement.target.focus=!1)});var w$A="visibilityState",w$x="visibilitychange",w$m=w$v.document;void 0!==w$m.hidden?(w$x="visibilitychange",w$A="visibilityState"):void 0!==w$m.mozHidden?(w$x="mozvisibilitychange",w$A="mozVisibilityState"):void 0!==w$m.msHidden?(w$x="msvisibilitychange",w$A="msVisibilityState"):void 0!==w$m.webkitHidden&&(w$x="webkitvisibilitychange",w$A="webkitVisibilityState"),w$v.document.addEventListener(w$x,function(){"hidden"==w$N.document[w$A]?w$L._setStageVisible(!1):w$L._setStageVisible(!0)}),w$v.document.addEventListener("qbrowserVisibilityChange",function(w$v){w$L._setStageVisible(!w$v.hidden)}),w$v.addEventListener("resize",function(){var w$v=w$N.window.orientation;null!=w$v&&w$v!=w$l._previousOrientation&&w$L._isInputting()&&(w$fv.inputElement.target.focus=!1),w$l._previousOrientation=w$v,w$L._isInputting()||w$L._resetCanvas()}),w$v.addEventListener("orientationchange",function(w$v){w$L._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),w$N.onMobile&&this.on("mousedown",this,this._onmouseMove)}w$_(w$Z,"laya.display.Stage",w$o);var w$v=w$Z.prototype;return w$v._setStageVisible=function(w$v){this._isVisibility!=w$v&&(this._isVisibility=w$v,this._isVisibility||this._isInputting()&&(w$fv.inputElement.target.focus=!1),this.event("visibilitychange"))},w$v._isInputting=function(){return w$N.onMobile&&w$fv.isInputting},w$v._changeCanvasSize=function(){this.setScreenSize(w$N.clientWidth*w$N.pixelRatio,w$N.clientHeight*w$N.pixelRatio)},w$v._resetCanvas=function(){if(this.screenAdaptationEnabled){var w$v=w$t._mainCanvas;w$v.source.style;w$v.size(1,1),w$H.timer.once(100,this,this._changeCanvasSize)}},w$v.setScreenSize=function(w$v,w$l){var w$L=!1;if("none"!==this._screenMode&&(w$L=(w$v/w$l<1?"vertical":"horizontal")!==this._screenMode)){var w$A=w$l;w$l=w$v,w$v=w$A}this.canvasRotation=w$L;var w$x=w$t._mainCanvas,w$m=w$x.source.style,w$Z=this._canvasTransform.identity(),w$O=this._scaleMode,w$e=w$v/this.designWidth,w$$=w$l/this.designHeight,w$_=this.designWidth,w$o=this.designHeight,w$K=w$v,w$r=w$l,w$G=w$N.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,w$O){case"noscale":w$e=w$$=1,w$K=this.designWidth,w$r=this.designHeight;break;case"showall":w$e=w$$=Math.min(w$e,w$$),w$_=w$K=Math.round(this.designWidth*w$e),w$o=w$r=Math.round(this.designHeight*w$$);break;case"noborder":w$e=w$$=Math.max(w$e,w$$),w$K=Math.round(this.designWidth*w$e),w$r=Math.round(this.designHeight*w$$);break;case"full":w$e=w$$=1,this._width=w$_=w$v,this._height=w$o=w$l;break;case"fixedwidth":w$$=w$e,this._height=w$o=Math.round(w$l/w$e);break;case"fixedheight":w$e=w$$,this._width=w$_=Math.round(w$v/w$$);break;case"fixedauto":w$v/w$l<this.designWidth/this.designHeight?(w$$=w$e,this._height=w$o=Math.round(w$l/w$e)):(w$e=w$$,this._width=w$_=Math.round(w$v/w$$))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,w$_=w$_+1&2147483646,w$o=w$o+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),w$e*=this.scaleX,w$$*=this.scaleY,1===w$e&&1===w$$?this.transform.identity():(this.transform.a=this._formatData(w$e/(w$K/w$_)),this.transform.d=this._formatData(w$$/(w$r/w$o)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),w$x.size(w$_,w$o),w$Q.changeWebGLSize(w$_,w$o),w$Z.scale(w$K/w$_/w$G,w$r/w$o/w$G),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(w$v-w$K)/w$G:this.offset.x=.5*(w$v-w$K)/w$G,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(w$l-w$r)/w$G:this.offset.y=.5*(w$l-w$r)/w$G,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),w$Z.translate(this.offset.x,this.offset.y),this.canvasDegree=0,w$L&&("horizontal"===this._screenMode?(w$Z.rotate(Math.PI/2),w$Z.translate(w$l/w$G,0),this.canvasDegree=90):(w$Z.rotate(-Math.PI/2),w$Z.translate(0,w$v/w$G),this.canvasDegree=-90)),w$Z.a=this._formatData(w$Z.a),w$Z.d=this._formatData(w$Z.d),w$Z.tx=this._formatData(w$Z.tx),w$Z.ty=this._formatData(w$Z.ty),w$m.transformOrigin=w$m.webkitTransformOrigin=w$m.msTransformOrigin=w$m.mozTransformOrigin=w$m.oTransformOrigin="0px 0px 0px",w$m.transform=w$m.webkitTransform=w$m.msTransform=w$m.mozTransform=w$m.oTransform="matrix("+w$Z.toString()+")",w$Z.translate(parseInt(w$m.left)||0,parseInt(w$m.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},w$v._formatData=function(w$v){return Math.abs(w$v)<1e-6?0:Math.abs(1-w$v)<.001?0<w$v?1:-1:w$v},w$v.getMousePoint=function(){return w$g.TEMP.setTo(this.mouseX,this.mouseY)},w$v.repaint=function(){this._repaint=1},w$v.parentRepaint=function(){},w$v._loop=function(){return this.render(w$t.context,0,0),!0},w$v._onmouseMove=function(w$v){this._mouseMoveTime=w$N.now()},w$v.getTimeFromFrameStart=function(){return w$N.now()-this._frameStartTime},w$v.render=function(w$v,w$l,w$L){if("sleep"===this._frameRate&&!w$t.isConchApp){var w$A=w$N.now();if(!(1e3<=w$A-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(w$W.loopCount++,w$c.instance.runEvent(),w$H.timer._update()));this._frameStartTime=w$A}if(this._renderCount++,w$t.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=w$N.now();var w$x="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),w$m=this._renderCount%2==0;if(w$W.renderSlow=!w$x,w$x||w$m||w$t.isConchApp){var w$Z;w$W.loopCount++,w$c.instance.runEvent(),w$H.timer._update(),w$Q.update3DLoop();var w$O=0,w$e=0;if(w$t.isConchNode)for(w$O=0,w$e=this._scenes.length;w$O<w$e;w$O++)(w$Z=this._scenes[w$O])&&w$Z._updateSceneConch();else for(w$O=0,w$e=this._scenes.length;w$O<w$e;w$O++)(w$Z=this._scenes[w$O])&&w$Z._updateScene();if(w$t.isConchNode){var w$$=w$ov.CustomList;for(w$O=0,w$e=w$$.length;w$O<w$e;w$O++){var w$_=w$$[w$O];w$_.customRender(w$_.customContext,0,0)}return}}w$t.isConchNode||this.renderingEnabled&&(w$x||!w$m||w$t.isConchWebGL)&&(w$t.isWebGL?w$t.WebGL.mainContext&&!w$t.WebGL.mainContext.isContextLost()&&(w$v.clear(),w$o.prototype.render.call(this,w$v,w$l,w$L),w$W._show&&w$W._sp&&w$W._sp.render(w$v,w$l,w$L),w$Q.clear(this._bgColor),w$Q.beginFlush(),w$v.flush(),w$Q.endFinish(),w$n.instance&&w$n.getInstance().endDispose()):(w$Q.clear(this._bgColor),w$o.prototype.render.call(this,w$v,w$l,w$L),w$W._show&&w$W._sp&&w$W._sp.render(w$v,w$l,w$L)))}else this._renderCount%5==0&&(w$W.loopCount++,w$c.instance.runEvent(),w$H.timer._update())},w$v._requestFullscreen=function(){var w$v=w$N.document.documentElement;w$v.requestFullscreen?w$v.requestFullscreen():w$v.mozRequestFullScreen?w$v.mozRequestFullScreen():w$v.webkitRequestFullscreen?w$v.webkitRequestFullscreen():w$v.msRequestFullscreen&&w$v.msRequestFullscreen()},w$v._fullScreenChanged=function(){w$H.stage.event("fullscreenchange")},w$v.exitFullscreen=function(){var w$v=w$N.document;w$v.exitFullscreen?w$v.exitFullscreen():w$v.mozCancelFullScreen?w$v.mozCancelFullScreen():w$v.webkitExitFullscreen&&w$v.webkitExitFullscreen()},w$G(0,w$v,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),w$G(0,w$v,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),w$G(0,w$v,"frameRate",function(){return this._frameRate},function(w$v){if(this._frameRate=w$v,w$t.isConchApp)switch(this._frameRate){case"slow":w$N.window.conch&&w$N.window.conchConfig.setSlowFrame&&w$N.window.conchConfig.setSlowFrame(!0);break;case"fast":w$N.window.conch&&w$N.window.conchConfig.setSlowFrame&&w$N.window.conchConfig.setSlowFrame(!1);break;case"mouse":w$N.window.conch&&w$N.window.conchConfig.setMouseFrame&&w$N.window.conchConfig.setMouseFrame(2e3);break;case"sleep":w$N.window.conch&&w$N.window.conchConfig.setLimitFPS&&w$N.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),w$G(0,w$v,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),w$G(0,w$v,"width",w$o.prototype._$get_width,function(w$v){this.designWidth=w$v,w$H.superSet(w$ov,this,"width",w$v),w$H.timer.callLater(this,this._changeCanvasSize)}),w$G(0,w$v,"alignH",function(){return this._alignH},function(w$v){this._alignH=w$v,w$H.timer.callLater(this,this._changeCanvasSize)}),w$G(0,w$v,"isFocused",function(){return this._isFocused}),w$G(0,w$v,"height",w$o.prototype._$get_height,function(w$v){this.designHeight=w$v,w$H.superSet(w$ov,this,"height",w$v),w$H.timer.callLater(this,this._changeCanvasSize)}),w$G(0,w$v,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||w$M.create()},w$o.prototype._$set_transform),w$G(0,w$v,"isVisibility",function(){return this._isVisibility}),w$G(0,w$v,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),w$G(0,w$v,"scaleMode",function(){return this._scaleMode},function(w$v){this._scaleMode=w$v,w$H.timer.callLater(this,this._changeCanvasSize)}),w$G(0,w$v,"alignV",function(){return this._alignV},function(w$v){this._alignV=w$v,w$H.timer.callLater(this,this._changeCanvasSize)}),w$G(0,w$v,"bgColor",function(){return this._bgColor},function(w$v){this._bgColor=w$v,this.conchModel&&this.conchModel.bgColor(w$v),w$t.isWebGL&&(w$v?w$Z._wgColor=w$p.create(w$v)._color:w$N.onMiniGame||(w$Z._wgColor=null)),w$N.onLimixiu?w$Z._wgColor=w$p.create(w$v)._color:w$t.canvas.style.background=w$v||"none"}),w$G(0,w$v,"mouseX",function(){return Math.round(w$c.instance.mouseX/this.clientScaleX)}),w$G(0,w$v,"mouseY",function(){return Math.round(w$c.instance.mouseY/this.clientScaleY)}),w$G(0,w$v,"screenMode",function(){return this._screenMode},function(w$v){this._screenMode=w$v}),w$G(0,w$v,"visible",w$o.prototype._$get_visible,function(w$v){this.visible!==w$v&&(w$H.superSet(w$ov,this,"visible",w$v),w$t._mainCanvas.source.style.visibility=w$v?"visible":"hidden")}),w$G(0,w$v,"fullScreenEnabled",null,function(w$v){var w$l=w$N.document,w$L=w$t.canvas;w$v?(w$L.addEventListener("mousedown",this._requestFullscreen),w$L.addEventListener("touchstart",this._requestFullscreen),w$l.addEventListener("fullscreenchange",this._fullScreenChanged),w$l.addEventListener("mozfullscreenchange",this._fullScreenChanged),w$l.addEventListener("webkitfullscreenchange",this._fullScreenChanged),w$l.addEventListener("msfullscreenchange",this._fullScreenChanged)):(w$L.removeEventListener("mousedown",this._requestFullscreen),w$L.removeEventListener("touchstart",this._requestFullscreen),w$l.removeEventListener("fullscreenchange",this._fullScreenChanged),w$l.removeEventListener("mozfullscreenchange",this._fullScreenChanged),w$l.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),w$l.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),w$Z.SCALE_NOSCALE="noscale",w$Z.SCALE_EXACTFIT="exactfit",w$Z.SCALE_SHOWALL="showall",w$Z.SCALE_NOBORDER="noborder",w$Z.SCALE_FULL="full",w$Z.SCALE_FIXED_WIDTH="fixedwidth",w$Z.SCALE_FIXED_HEIGHT="fixedheight",w$Z.SCALE_FIXED_AUTO="fixedauto",w$Z.ALIGN_LEFT="left",w$Z.ALIGN_RIGHT="right",w$Z.ALIGN_CENTER="center",w$Z.ALIGN_TOP="top",w$Z.ALIGN_MIDDLE="middle",w$Z.ALIGN_BOTTOM="bottom",w$Z.SCREEN_NONE="none",w$Z.SCREEN_HORIZONTAL="horizontal",w$Z.SCREEN_VERTICAL="vertical",w$Z.FRAME_FAST="fast",w$Z.FRAME_SLOW="slow",w$Z.FRAME_MOUSE="mouse",w$Z.FRAME_SLEEP="sleep",w$Z.FRAME_MOUSE_THREDHOLD=2e3,w$e(w$Z,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),w$Z}(w$ov),w$Jv=(function(w$v){function w$l(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,w$l.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}w$_(w$l,"laya.media.SoundNode",w$ov);var w$L=w$l.prototype;w$L._onParentChange=function(){this.target=this.parent},w$L.play=function(w$v,w$l){void 0===w$v&&(w$v=1),isNaN(w$v)&&(w$v=1),this.url&&(this.stop(),this._channel=w$k.playSound(this.url,w$v,null,w$l))},w$L.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},w$L._setPlayAction=function(w$v,w$l,w$L,w$A){void 0===w$A&&(w$A=!0),this[w$L]&&w$v&&(w$A?w$v.on(w$l,this,this[w$L]):w$v.off(w$l,this,this[w$L]))},w$L._setPlayActions=function(w$v,w$l,w$L,w$A){if(void 0===w$A&&(w$A=!0),w$v&&w$l){var w$x,w$m=w$l.split(","),w$Z=0;for(w$x=w$m.length,w$Z=0;w$Z<w$x;w$Z++)this._setPlayAction(w$v,w$m[w$Z],w$L,w$A)}},w$G(0,w$L,"playEvent",null,function(w$v){(this._playEvents=w$v)&&this._tar&&this._setPlayActions(this._tar,w$v,"play")}),w$G(0,w$L,"target",null,function(w$v){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=w$v,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),w$G(0,w$L,"stopEvent",null,function(w$v){(this._stopEvents=w$v)&&this._tar&&this._setPlayActions(this._tar,w$v,"stop")})}(),function(w$v){function w$l(){this._src=null,this._onload=null,this._onerror=null,w$l.__super.call(this)}w$_(w$l,"laya.resource.FileBitmap",w$Gv);var w$L=w$l.prototype;return w$G(0,w$L,"src",function(){return this._src},function(w$v){this._src=w$v}),w$G(0,w$L,"onload",null,function(w$v){}),w$G(0,w$L,"onerror",null,function(w$v){}),w$l}()),w$Bv=function(w$v){function w$L(w$v,w$l){this._is2D=!1,w$L.__super.call(this);var w$A=this;if(this._source=this,"2D"===w$v||"AUTO"===w$v&&!w$t.isWebGL){this._is2D=!0,this._source=w$l||w$N.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var w$x=this;w$x.getContext=function(w$v,w$l){if(w$A._ctx)return w$A._ctx;var w$L=w$A._ctx=w$A._source.getContext(w$v,w$l);return w$L&&(w$L._canvas=w$x,w$t.isFlash||w$N.onLimixiu||(w$L.size=function(w$v,w$l){})),w$L}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}w$_(w$L,"laya.resource.HTMLCanvas",w$Gv);var w$l=w$L.prototype;return w$l.clear=function(){this._ctx&&this._ctx.clear()},w$l.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},w$l.release=function(){},w$l._setContext=function(w$v){this._ctx=w$v},w$l.getContext=function(w$v,w$l){return this._ctx?this._ctx:this._ctx=w$L._createContext(this)},w$l.getMemSize=function(){return 0},w$l.size=function(w$v,w$l){(this._w!=w$v||this._h!=w$l||this._source&&(this._source.width!=w$v||this._source.height!=w$l))&&(this._w=w$v,this._h=w$l,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(w$v,w$l),this._source&&(this._source.height=w$l,this._source.width=w$v))},w$l.getCanvas=function(){return this._source},w$l.toBase64=function(w$v,w$l,w$L){if(this._source)if(w$t.isConchApp&&this._source.toBase64)this._source.toBase64(w$v,w$l,w$L);else{var w$A=this._source.toDataURL(w$v,w$l);w$L.call(this,w$A)}},w$G(0,w$l,"context",function(){return this._ctx}),w$G(0,w$l,"asBitmap",null,function(w$v){}),w$L.create=function(w$v,w$l){return new w$L(w$v,w$l)},w$L.TYPE2D="2D",w$L.TYPE3D="3D",w$L.TYPEAUTO="AUTO",w$L._createContext=null,w$L}(),w$Xv=(function(w$v){function w$e(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){throw w$e.__super.call(this),new Error("不允许new！")}w$_(w$e,"laya.resource.HTMLSubImage",w$Gv),w$e.create=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){return void 0===w$O&&(w$O=!1),new w$e(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O)}}(),function(w$v){function w$o(){this._frames=null,this._url=null,w$o.__super.call(this),this._setControlNode(this)}w$_(w$o,"laya.display.Animation",w$v);var w$l=w$o.prototype;w$l.destroy=function(w$v){void 0===w$v&&(w$v=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,w$v),this._frames=null,this._labels=null},w$l.play=function(w$v,w$l,w$L,w$A){void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=!0),void 0===w$L&&(w$L=""),void 0===w$A&&(w$A=!0),w$L&&this._setFramesFromCache(w$L,w$A),this._isPlaying=!0,this.index="string"==typeof w$v?this._getFrameByLabel(w$v):w$v,this.loop=w$l,this._actionName=w$L,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},w$l._setFramesFromCache=function(w$v,w$l){var w$L;return void 0===w$l&&(w$l=!1),this._url&&(w$v=this._url+"#"+w$v),w$v&&w$o.framesMap[w$v]?((w$L=w$o.framesMap[w$v])instanceof Array?(this._frames=w$o.framesMap[w$v],this._count=this._frames.length):(w$L.nodeRoot&&(w$o.framesMap[w$v]=this._parseGraphicAnimationByData(w$L),w$L=w$o.framesMap[w$v]),this._frames=w$L.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=w$L.interval),this._labels=this._copyLabels(w$L.labels)),!0):(w$l&&console.log("ani not found:",w$v),!1)},w$l._copyLabels=function(w$v){if(!w$v)return null;var w$l,w$L;for(w$L in w$l={},w$v)w$l[w$L]=w$i.copyArray([],w$v[w$L]);return w$l},w$l._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&w$v.prototype._frameLoop.call(this)},w$l._displayToIndex=function(w$v){this._frames&&(this.graphics=this._frames[w$v])},w$l.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},w$l.loadImages=function(w$v,w$l){return void 0===w$l&&(w$l=""),this._url="",this._setFramesFromCache(w$l)||(this.frames=w$o.framesMap[w$l]?w$o.framesMap[w$l]:w$o.createFrames(w$v,w$l)),this},w$l.loadAtlas=function(w$l,w$L,w$A){void 0===w$A&&(w$A=""),this._url="";var w$x=this;function w$v(w$v){w$l===w$v&&(w$x.frames=w$o.framesMap[w$A]?w$o.framesMap[w$A]:w$o.createFrames(w$l,w$A),w$L&&w$L.run())}return w$x._setFramesFromCache(w$A)||(w$Ov.getAtlas(w$l)?w$v(w$l):w$H.loader.load(w$l,w$J.create(null,w$v,[w$l]),null,"atlas")),this},w$l.loadAnimation=function(w$v,w$l,w$L){this._url=w$v;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,w$l&&w$l.run()):!w$L||w$Ov.getAtlas(w$L)?this._loadAnimationData(w$v,w$l,w$L):w$H.loader.load(w$L,w$J.create(this,this._loadAnimationData,[w$v,w$l,w$L]),null,"atlas"),this},w$l._loadAnimationData=function(w$O,w$e,w$v){var w$$=this;if(!w$v||w$Ov.getAtlas(w$v)){var w$_=this;w$Ov.getRes(w$O)?w$l(w$O):w$H.loader.load(w$O,w$J.create(null,w$l,[w$O]),null,"json"),w$Ov.clearRes(w$O)}else console.warn("atlas load fail:"+w$v);function w$l(w$v){if(w$Ov.getRes(w$v)&&w$O===w$v){var w$l;if(w$o.framesMap[w$O+"#"])w$_._setFramesFromCache(w$$._actionName,!0),w$$.index=0,w$$._checkResumePlaying();else{var w$L=w$_._parseGraphicAnimation(w$Ov.getRes(w$O));if(!w$L)return;var w$A,w$x=w$L.animationList,w$m=0,w$Z=w$x.length;for(w$m=0;w$m<w$Z;w$m++)w$l=w$x[w$m],w$o.framesMap[w$O+"#"+w$l.name]=w$l,w$A||(w$A=w$l);w$A&&(w$o.framesMap[w$O+"#"]=w$A,w$_._setFramesFromCache(w$$._actionName,!0),w$$.index=0),w$$._checkResumePlaying()}w$e&&w$e.run()}}},w$l._parseGraphicAnimation=function(w$v){return w$Hv.parseAnimationData(w$v)},w$l._parseGraphicAnimationByData=function(w$v){return w$Hv.parseAnimationByData(w$v)},w$G(0,w$l,"frames",function(){return this._frames},function(w$v){(this._frames=w$v)&&(this._count=w$v.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),w$G(0,w$l,"autoPlay",null,function(w$v){w$v?this.play():this.stop()}),w$G(0,w$l,"source",null,function(w$v){-1<w$v.indexOf(".ani")?this.loadAnimation(w$v):-1<w$v.indexOf(".json")||-1<w$v.indexOf("als")||-1<w$v.indexOf("atlas")?this.loadAtlas(w$v):this.loadImages(w$v.split(","))}),w$G(0,w$l,"autoAnimation",null,function(w$v){this.play(0,!0,w$v,!1)}),w$o.createFrames=function(w$v,w$l){var w$L,w$A,w$x=0,w$m=0;if("string"==typeof w$v){var w$Z=w$Ov.getAtlas(w$v);if(w$Z&&w$Z.length)for(w$L=[],w$x=0,w$m=w$Z.length;w$x<w$m;w$x++)(w$A=new w$Q.createGraphics).drawTexture(w$Ov.getRes(w$Z[w$x]),0,0),w$L.push(w$A)}else if(w$v instanceof Array)for(w$L=[],w$x=0,w$m=w$v.length;w$x<w$m;w$x++)(w$A=new w$Q.createGraphics).loadImage(w$v[w$x],0,0),w$L.push(w$A);return w$l&&(w$o.framesMap[w$l]=w$L),w$L},w$o.clearCache=function(w$v){var w$l,w$L=w$o.framesMap,w$A=w$v+"#";for(w$l in w$L)w$l!==w$v&&0!=w$l.indexOf(w$A)||delete w$o.framesMap[w$l]},w$o.framesMap={}}(w$cv),function(w$v){function w$m(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,w$m.__super.call(this),null==w$m._sortIndexFun&&(w$m._sortIndexFun=w$w.sortByKey("index",!1,!0))}w$_(w$m,"laya.display.FrameAnimation",w$v);var w$l=w$m.prototype;return w$l._setUp=function(w$v,w$l){this._labels=null,this._animationNewFrames=null,this._targetDic=w$v,this._animationData=w$l,this.interval=1e3/w$l.frameRate,w$l.parsed?(this._count=w$l.count,this._labels=w$l.labels,this._animationNewFrames=w$l.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),w$l.parsed=!0,w$l.labels=this._labels,w$l.count=this._count,w$l.animationNewFrames=this._animationNewFrames},w$l.clear=function(){w$v.prototype.clear.call(this),this._targetDic=null,this._animationData=null},w$l._displayToIndex=function(w$v){if(this._animationData){w$v<0&&(w$v=0),w$v>this._count&&(w$v=this._count);var w$l=this._animationData.nodes,w$L=0,w$A=w$l.length;for(w$L=0;w$L<w$A;w$L++)this._displayNodeToFrame(w$l[w$L],w$v)}},w$l._displayNodeToFrame=function(w$v,w$l,w$L){w$L||(w$L=this._targetDic);var w$A=w$L[w$v.target];if(w$A){var w$x,w$m,w$Z,w$O=w$v.frames,w$e=w$v.keys,w$$=0,w$_=w$e.length;for(w$$=0;w$$<w$_;w$$++)w$Z=(w$m=w$O[w$x=w$e[w$$]]).length>w$l?w$m[w$l]:w$m[w$m.length-1],w$A[w$x]=w$Z}},w$l._calculateDatas=function(){if(this._animationData){var w$v,w$l=this._animationData.nodes,w$L=0,w$A=w$l.length;for(w$L=this._count=0;w$L<w$A;w$L++)w$v=w$l[w$L],this._calculateNodeKeyFrames(w$v);this._count+=1}},w$l._calculateNodeKeyFrames=function(w$v){var w$l,w$L,w$A=w$v.keyframes,w$x=w$v.target;for(w$l in w$v.frames||(w$v.frames={}),w$v.keys?w$v.keys.length=0:w$v.keys=[],w$v.initValues||(w$v.initValues={}),w$A)w$L=w$A[w$l],w$v.frames[w$l]||(w$v.frames[w$l]=[]),this._targetDic&&this._targetDic[w$x]&&(w$v.initValues[w$l]=this._targetDic[w$x][w$l]),w$L.sort(w$m._sortIndexFun),w$v.keys.push(w$l),this._calculateNodePropFrames(w$L,w$v.frames[w$l],w$l,w$x)},w$l.resetToInitState=function(){if(this._targetDic&&this._animationData){var w$v,w$l,w$L=this._animationData.nodes,w$A=0,w$x=w$L.length;for(w$A=0;w$A<w$x;w$A++)if(w$l=(w$v=w$L[w$A]).initValues){var w$m,w$Z=this._targetDic[w$v.target];if(w$Z)for(w$m in w$l)w$Z[w$m]=w$l[w$m]}}},w$l._calculateNodePropFrames=function(w$v,w$l,w$L,w$A){var w$x=0,w$m=w$v.length-1;if(0<w$m){for(w$l.length=w$v[w$m].index+1,w$x=0;w$x<w$m;w$x++)this._dealKeyFrame(w$v[w$x]),this._calculateFrameValues(w$v[w$x],w$v[w$x+1],w$l);this._dealKeyFrame(w$v[w$x])}0==w$m&&(w$l[w$v[0].index]=w$v[0].value,this._animationNewFrames&&(this._animationNewFrames[w$v[0].index]=!0))},w$l._dealKeyFrame=function(w$v){w$v.label&&""!=w$v.label&&this.addLabel(w$v.label,w$v.index)},w$l._calculateFrameValues=function(w$v,w$l,w$L){var w$A,w$x=0,w$m=w$v.index,w$Z=w$l.index,w$O=w$v.value,w$e=w$l.value-w$v.value,w$$=w$Z-w$m;if(w$Z>this._count&&(this._count=w$Z),w$v.tween)for(null==(w$A=w$D[w$v.tweenMethod])&&(w$A=w$D.linearNone),w$x=w$m;w$x<w$Z;w$x++)w$L[w$x]=w$A(w$x-w$m,w$O,w$e,w$$),this._animationNewFrames&&(this._animationNewFrames[w$x]=!0);else for(w$x=w$m;w$x<w$Z;w$x++)w$L[w$x]=w$O;this._animationNewFrames&&(this._animationNewFrames[w$v.index]=!0,this._animationNewFrames[w$l.index]=!0),w$L[w$l.index]=w$l.value},w$m._sortIndexFun=null,w$m}(w$cv)),w$fv=function(w$l){function w$x(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",w$x.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=w$dv.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}w$_(w$x,"laya.display.Input",w$l);var w$v=w$x.prototype;return w$v.setSelection=function(w$v,w$l){this.focus=!0,laya.display.Input.inputElement.selectionStart=w$v,laya.display.Input.inputElement.selectionEnd=w$l},w$v._onUnDisplay=function(w$v){this.focus=!1},w$v._onMouseDown=function(w$v){this.focus=!0},w$v._syncInputTransform=function(){var w$v=this.nativeInput,w$l=w$i.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),w$L=this._width-this.padding[1]-this.padding[3],w$A=this._height-this.padding[0]-this.padding[2];w$t.isConchApp?(w$v.setScale(w$l.scaleX,w$l.scaleY),w$v.setSize(w$L,w$A),w$v.setPos(w$l.x,w$l.y)):(w$x.inputContainer.style.transform=w$x.inputContainer.style.webkitTransform="scale("+w$l.scaleX+","+w$l.scaleY+") rotate("+w$H.stage.canvasDegree+"deg)",w$v.style.width=w$L+"px",w$v.style.height=w$A+"px",w$x.inputContainer.style.left=w$l.x+"px",w$x.inputContainer.style.top=w$l.y+"px")},w$v.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},w$v._setInputMethod=function(){w$x.input.parentElement&&w$x.inputContainer.removeChild(w$x.input),w$x.area.parentElement&&w$x.inputContainer.removeChild(w$x.area),w$x.inputElement=this._multiline?w$x.area:w$x.input,w$x.inputContainer.appendChild(w$x.inputElement),w$dv.RightToLeft&&(w$x.inputElement.style.direction="rtl")},w$v._focusIn=function(){laya.display.Input.isInputting=!0;var w$v=this.nativeInput;this._focus=!0;var w$l=w$v.style;w$l.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),w$v.readOnly=!this._editable,w$t.isConchApp&&(w$v.setType(this._type),w$v.setForbidEdit(!this._editable)),w$v.maxLength=this._maxChars;this.padding;if(w$v.type=this._type,w$v.value=this._content,w$v.placeholder=this._prompt,w$H.stage.off("keydown",this,this._onKeyDown),w$H.stage.on("keydown",this,this._onKeyDown),(w$H.stage.focus=this).event("focus"),w$N.onPC&&w$v.focus(),!w$N.onMiniGame){this._text;this._text=null}this.typeset(),w$v.setColor(this._originColor),w$v.setFontSize(this.fontSize),w$v.setFontFace(w$N.onIPhone&&w$dv._fontFamilyMap[this.font]||this.font),w$t.isConchApp&&w$v.setMultiAble&&w$v.setMultiAble(this._multiline),w$l.lineHeight=this.leading+this.fontSize+"px",w$l.fontStyle=this.italic?"italic":"normal",w$l.fontWeight=this.bold?"bold":"normal",w$l.textAlign=this.align,w$l.padding="0 0",this._syncInputTransform(),!w$t.isConchApp&&w$N.onPC&&w$H.timer.frameLoop(1,this,this._syncInputTransform)},w$v._setPromptColor=function(){(w$x.promptStyleDOM=w$N.getElementById("promptStyle"))||((w$x.promptStyleDOM=w$N.createElement("style")).setAttribute("id","promptStyle"),w$N.document.head.appendChild(w$x.promptStyleDOM)),w$x.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},w$v._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(w$H.superSet(w$dv,this,"text",this._content),w$H.superSet(w$dv,this,"color",this._originColor)):(w$H.superSet(w$dv,this,"text",this._prompt),w$H.superSet(w$dv,this,"color",this._promptColor)),w$H.stage.off("keydown",this,this._onKeyDown),w$H.stage.focus=null,this.event("blur"),w$t.isConchApp&&this.nativeInput.blur(),w$N.onPC&&w$H.timer.clear(this,this._syncInputTransform)},w$v._onKeyDown=function(w$v){13===w$v.keyCode&&(w$N.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},w$v.changeText=function(w$v){this._content=w$v,this._focus?(this.nativeInput.value=w$v||"",this.event("change")):w$l.prototype.changeText.call(this,w$v)},w$G(0,w$v,"color",w$l.prototype._$get_color,function(w$v){this._focus&&this.nativeInput.setColor(w$v),w$H.superSet(w$dv,this,"color",this._content?w$v:this._promptColor),this._originColor=w$v}),w$G(0,w$v,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(w$v){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),w$G(0,w$v,"multiline",function(){return this._multiline},function(w$v){this._multiline=w$v,this.valign=w$v?"top":"middle"}),w$G(0,w$v,"maxChars",function(){return this._maxChars},function(w$v){w$v<=0&&(w$v=1e5),this._maxChars=w$v}),w$G(0,w$v,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(w$v){w$H.superSet(w$dv,this,"color",this._originColor),w$v+="",this._focus?(this.nativeInput.value=w$v||"",this.event("change")):(this._multiline||(w$v=w$v.replace(/\r?\n/g,"")),(this._content=w$v)?w$H.superSet(w$dv,this,"text",w$v):(w$H.superSet(w$dv,this,"text",this._prompt),w$H.superSet(w$dv,this,"color",this.promptColor)))}),w$G(0,w$v,"nativeInput",function(){return this._multiline?w$x.area:w$x.input}),w$G(0,w$v,"prompt",function(){return this._prompt},function(w$v){!this._text&&w$v&&w$H.superSet(w$dv,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?w$H.superSet(w$dv,this,"text",this._text==this._prompt?w$v:this._text):w$H.superSet(w$dv,this,"text",w$v),this._prompt=w$dv.langPacks&&w$dv.langPacks[w$v]?w$dv.langPacks[w$v]:w$v}),w$G(0,w$v,"focus",function(){return this._focus},function(w$v){var w$l=this.nativeInput;this._focus!==w$v&&(w$v?(w$l.target?w$l.target._focusOut():this._setInputMethod(),(w$l.target=this)._focusIn()):(w$l.target=null,this._focusOut(),w$N.document.body.scrollTop=0,w$l.blur(),w$t.isConchApp?w$l.setPos(-1e4,-1e4):w$x.inputContainer.contains(w$l)&&w$x.inputContainer.removeChild(w$l)))}),w$G(0,w$v,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(w$v){w$v?(-1<(w$v="[^"+w$v+"]").indexOf("^^")&&(w$v=w$v.replace("^^","")),this._restrictPattern=new RegExp(w$v,"g")):this._restrictPattern=null}),w$G(0,w$v,"editable",function(){return this._editable},function(w$v){this._editable=w$v,w$t.isConchApp&&w$x.input.setForbidEdit(!w$v)}),w$G(0,w$v,"promptColor",function(){return this._promptColor},function(w$v){this._promptColor=w$v,this._content||w$H.superSet(w$dv,this,"color",w$v)}),w$G(0,w$v,"type",function(){return this._type},function(w$v){this._getCSSStyle().password="password"==w$v,this._type=w$v,w$t.isConchApp&&this.nativeInput.setType(w$v)}),w$G(0,w$v,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(w$v){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),w$G(0,w$v,"asPassword",function(){return this._getCSSStyle().password},function(w$v){this._getCSSStyle().password=w$v,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),w$x.__init__=function(){w$x._createInputElement(),w$N.onMobile&&w$t.canvas.addEventListener(w$x.IOS_IFRAME?w$N.onMiniGame?"touchend":"click":"touchend",w$x._popupInputMethod)},w$x._popupInputMethod=function(w$v){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},w$x._createInputElement=function(){w$x._initInput(w$x.area=w$N.createElement("textarea")),w$x._initInput(w$x.input=w$N.createElement("input")),(w$x.inputContainer=w$N.createElement("div")).style.position="absolute",w$x.inputContainer.style.zIndex=1e5,w$N.container.appendChild(w$x.inputContainer),w$x.inputContainer.setPos=function(w$v,w$l){w$x.inputContainer.style.left=w$v+"px",w$x.inputContainer.style.top=w$l+"px"}},w$x._initInput=function(w$l){var w$v=w$l.style;w$v.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",w$v.resize="none",w$v.backgroundColor="transparent",w$v.border="none",w$v.outline="none",w$v.zIndex=1,w$l.addEventListener("input",w$x._processInputting),w$l.addEventListener("mousemove",w$x._stopEvent),w$l.addEventListener("mousedown",w$x._stopEvent),w$l.addEventListener("touchmove",w$x._stopEvent),w$l.setFontFace=function(w$v){w$l.style.fontFamily=w$v},w$t.isConchApp||(w$l.setColor=function(w$v){w$l.style.color=w$v},w$l.setFontSize=function(w$v){w$l.style.fontSize=w$v+"px"})},w$x._processInputting=function(w$v){var w$l=laya.display.Input.inputElement.target;if(w$l){var w$L=laya.display.Input.inputElement.value;w$l._restrictPattern&&(w$L=w$L.replace(/\u2006|\x27/g,""),w$l._restrictPattern.test(w$L)&&(w$L=w$L.replace(w$l._restrictPattern,""),laya.display.Input.inputElement.value=w$L)),w$l._text=w$L,w$l.event("input")}},w$x._stopEvent=function(w$v){"touchmove"==w$v.type&&w$v.preventDefault(),w$v.stopPropagation&&w$v.stopPropagation()},w$x.TYPE_TEXT="text",w$x.TYPE_PASSWORD="password",w$x.TYPE_EMAIL="email",w$x.TYPE_URL="url",w$x.TYPE_NUMBER="number",w$x.TYPE_RANGE="range",w$x.TYPE_DATE="date",w$x.TYPE_MONTH="month",w$x.TYPE_WEEK="week",w$x.TYPE_TIME="time",w$x.TYPE_DATE_TIME="datetime",w$x.TYPE_DATE_TIME_LOCAL="datetime-local",w$x.TYPE_SEARCH="search",w$x.input=null,w$x.area=null,w$x.inputElement=null,w$x.inputContainer=null,w$x.confirmButton=null,w$x.promptStyleDOM=null,w$x.inputHeight=45,w$x.isInputting=!1,w$x.stageMatrix=null,w$e(w$x,["IOS_IFRAME",function(){return this.IOS_IFRAME=w$N.onIOS&&w$N.window.top!=w$N.window.self}]),w$x}(w$dv),w$wv=function(w$v){function w$L(w$v,w$l){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,w$L.__super.call(this),w$v&&this._init_(w$v,w$l)}w$_(w$L,"laya.resource.HTMLImage",w$Jv);var w$l=w$L.prototype;return w$l._init_=function(w$v,w$l){this._src=w$v,this._source=new w$N.window.Image,w$l&&(w$l.onload&&(this.onload=w$l.onload),w$l.onerror&&(this.onerror=w$l.onerror),w$l.onCreate&&w$l.onCreate(this)),0!=w$v.indexOf("data:image")&&(this._source.crossOrigin=""),w$v&&(this._source.src=w$v)},w$l.recreateResource=function(){var w$v=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var w$l=this;this._source=new w$N.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(w$l._needReleaseAgain)return w$l._needReleaseAgain=!1,w$l._source.onload=null,void(w$l._source=null);w$l._source.onload=null,w$l.memorySize=w$v._w*w$v._h*4,w$l._recreateLock=!1,w$l.completeCreate()},this._source.src=this._src}},w$l.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},w$l.onresize=function(){this._w=this._source.width,this._h=this._source.height},w$G(0,w$l,"onload",null,function(w$v){var w$l=this;this._onload=w$v,this._source&&(this._source.onload=null!=this._onload?function(){w$l.onresize(),w$l._onload()}:null)}),w$G(0,w$l,"onerror",null,function(w$v){var w$l=this;this._onerror=w$v,this._source&&(this._source.onerror=null!=this._onerror?function(){w$l._onerror()}:null)}),w$G(0,w$l,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(w$v){this._enableMerageInAtlas=w$v,w$t.isConchApp&&this._source&&(this._source.enableMerageInAtlas=w$v)}),w$L.create=function(w$v,w$l){return new w$L(w$v,w$l)},w$L}(),w$Hv=(function(w$m){function w$v(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,w$v.__super.call(this)}w$_(w$v,"laya.display.EffectAnimation",w$m);var w$l=w$v.prototype;w$l._onOtherBegin=function(w$v){w$v!=this&&this.stop()},w$l.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},w$l._onPlayAction=function(){this.play(0,!1)},w$l.play=function(w$v,w$l,w$L,w$A){void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=!0),void 0===w$L&&(w$L=""),void 0===w$A&&(w$A=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,w$v,w$l,w$L,w$A))},w$l._recordInitData=function(){if(this._aniKeys){var w$v,w$l,w$L=0;for(w$v=this._aniKeys.length,w$L=0;w$L<w$v;w$L++)w$l=this._aniKeys[w$L],this._initData[w$l]=this._target[w$l]}},w$l._displayToIndex=function(w$v){if(this._animationData){w$v<0&&(w$v=0),w$v>this._count&&(w$v=this._count);var w$l=this._animationData.nodes,w$L=0,w$A=w$l.length;for(w$A=1<w$A?1:w$A,w$L=0;w$L<w$A;w$L++)this._displayNodeToFrame(w$l[w$L],w$v)}},w$l._displayNodeToFrame=function(w$v,w$l,w$L){if(this._target){var w$A;w$A=this._target;var w$x,w$m,w$Z,w$O,w$e=w$v.frames,w$$=w$v.keys,w$_=0,w$o=w$$.length;w$O=w$v.secondFrames;var w$K,w$r,w$G,w$c,w$d=0;for(w$_=0;w$_<w$o;w$_++)w$m=w$e[w$x=w$$[w$_]],w$Z=-1==(w$d=w$O[w$x])?this._initData[w$x]:w$l<w$d?(w$G=(w$r=w$v.keyframes[w$x])[0]).tween?(null==(w$K=w$D[w$G.tweenMethod])&&(w$K=w$D.linearNone),w$c=w$r[1],w$K(w$l,this._initData[w$x],w$c.value-this._initData[w$x],w$c.index)):this._initData[w$x]:w$m.length>w$l?w$m[w$l]:w$m[w$m.length-1],w$A[w$x]=w$Z}},w$l._calculateNodeKeyFrames=function(w$v){w$m.prototype._calculateNodeKeyFrames.call(this,w$v);var w$l,w$L,w$A,w$x=w$v.keyframes;w$v.target;for(w$l in w$A={},w$v.secondFrames=w$A,w$x)(w$L=w$x[w$l]).length<=1?w$A[w$l]=-1:w$A[w$l]=w$L[1].index},w$G(0,w$l,"target",function(){return this._target},function(w$v){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=w$v,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),w$G(0,w$l,"playEvent",null,function(w$v){(this._playEvents=w$v)&&this.addEvent()}),w$G(0,w$l,"effectData",null,function(w$v){var w$l;w$v&&((w$l=w$v.animations)&&w$l[0]&&(this._setUp({},w$l[0]),w$l[0].nodes&&w$l[0].nodes[0]&&(this._aniKeys=w$l[0].nodes[0].keys)))}),w$G(0,w$l,"effectClass",null,function(w$v){var w$l,w$L;(this._effectClass=w$F.getClass(w$v),this._effectClass)&&((w$l=this._effectClass.uiView)&&(w$L=w$l.animations)&&w$L[0]&&(this._setUp({},w$L[0]),w$L[0].nodes&&w$L[0].nodes[0]&&(this._aniKeys=w$L[0].nodes[0].keys)))}),w$v.EffectAnimationBegin="effectanimationbegin"}(w$Xv),function(w$l){var w$V;function w$k(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,w$k.__super.call(this)}w$_(w$k,"laya.utils.GraphicAnimation",w$l);var w$v=w$k.prototype;return w$v._parseNodeList=function(w$v){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[w$v.compId]=w$v.props,w$v.compId&&this._nodeList.push(w$v.compId);var w$l=w$v.child;if(w$l){var w$L=0,w$A=w$l.length;for(w$L=0;w$L<w$A;w$L++)this._parseNodeList(w$l[w$L])}},w$v._calGraphicData=function(w$v){var w$l;if(this._setUp(null,w$v),this._createGraphicData(),this._nodeIDAniDic)for(w$l in this._nodeIDAniDic)this._nodeIDAniDic[w$l]=null},w$v._createGraphicData=function(){var w$v,w$l=[],w$L=0,w$A=this.count,w$x=this._animationNewFrames;for(w$x||(w$x=[]),w$L=0;w$L<w$A;w$L++)!w$x[w$L]&&w$v||(w$v=this._createFrameGraphic(w$L)),w$l.push(w$v);this._gList=w$l},w$v._createFrameGraphic=function(w$v){var w$l=w$Q.createGraphics();return w$k._rootMatrix||(w$k._rootMatrix=new w$M),this._updateNodeGraphic(this._rootNode,w$v,w$k._rootMatrix,w$l),w$l},w$v._updateNodeGraphic=function(w$v,w$l,w$L,w$A,w$x){var w$m;void 0===w$x&&(w$x=1);var w$Z,w$O,w$e,w$$=(w$m=this._nodeGDic[w$v.compId]=this._getNodeGraphicData(w$v.compId,w$l,this._nodeGDic[w$v.compId])).alpha*w$x;if(!(w$$<.01)&&(w$m.resultTransform||(w$m.resultTransform=w$M.create()),w$Z=w$m.resultTransform,w$M.mul(w$m.transform,w$L,w$Z),w$m.skin&&(w$O=this._getTextureByUrl(w$m.skin))&&(w$Z._checkTransform()?(w$A.drawTexture(w$O,0,0,w$m.width,w$m.height,w$Z,w$$),w$m.resultTransform=null):w$A.drawTexture(w$O,w$Z.tx,w$Z.ty,w$m.width,w$m.height,null,w$$)),w$e=w$v.child)){var w$_,w$o=0;for(w$_=w$e.length,w$o=0;w$o<w$_;w$o++)this._updateNodeGraphic(w$e[w$o],w$l,w$Z,w$A,w$$)}},w$v._updateNoChilds=function(w$v,w$l){if(w$v.skin){var w$L=this._getTextureByUrl(w$v.skin);if(w$L){var w$A=w$v.transform;w$A._checkTransform();!w$A.bTransform?w$l.drawTexture(w$L,w$A.tx,w$A.ty,w$v.width,w$v.height,null,w$v.alpha):w$l.drawTexture(w$L,0,0,w$v.width,w$v.height,w$A.clone(),w$v.alpha)}}},w$v._updateNodeGraphic2=function(w$v,w$l,w$L){var w$A;if(w$A=this._nodeGDic[w$v.compId]=this._getNodeGraphicData(w$v.compId,w$l,this._nodeGDic[w$v.compId]),w$v.child){var w$x=w$A.transform;w$x._checkTransform();var w$m,w$Z;w$Z=(w$m=!w$x.bTransform)&&(0!=w$x.tx||0!=w$x.ty);var w$O,w$e,w$$;if((w$O=w$x.bTransform||1!=w$A.alpha)&&w$L.save(),1!=w$A.alpha&&w$L.alpha(w$A.alpha),w$m?w$Z&&w$L.translate(w$x.tx,w$x.ty):w$L.transform(w$x.clone()),w$e=w$v.child,w$A.skin&&(w$$=this._getTextureByUrl(w$A.skin))&&w$L.drawTexture(w$$,0,0,w$A.width,w$A.height),w$e){var w$_,w$o=0;for(w$_=w$e.length,w$o=0;w$o<w$_;w$o++)this._updateNodeGraphic2(w$e[w$o],w$l,w$L)}w$O?w$L.restore():w$m?w$Z&&w$L.translate(-w$x.tx,-w$x.ty):w$L.transform(w$x.clone().invert())}else this._updateNoChilds(w$A,w$L)},w$v._calculateNodeKeyFrames=function(w$v){w$l.prototype._calculateNodeKeyFrames.call(this,w$v),this._nodeIDAniDic[w$v.target]=w$v},w$v.getNodeDataByID=function(w$v){return this._nodeIDAniDic[w$v]},w$v._getParams=function(w$v,w$l,w$L,w$A){var w$x=w$k._temParam;w$x.length=w$l.length;var w$m=0,w$Z=w$l.length;for(w$m=0;w$m<w$Z;w$m++)w$x[w$m]=this._getObjVar(w$v,w$l[w$m][0],w$L,w$l[w$m][1],w$A);return w$x},w$v._getObjVar=function(w$v,w$l,w$L,w$A,w$x){if(w$v.hasOwnProperty(w$l)){var w$m=w$v[w$l];if(w$L>=w$m.length&&(w$L=w$m.length-1),null!=w$v[w$l][w$L])return w$v[w$l][w$L]}return w$x.hasOwnProperty(w$l)?w$x[w$l]:w$A},w$v._getNodeGraphicData=function(w$v,w$l,w$L){w$L||(w$L=w$V.create()),w$L.transform?w$L.transform.identity():w$L.transform=w$M.create();var w$A=this.getNodeDataByID(w$v);if(!w$A)return w$L;var w$x,w$m,w$Z=w$A.frames,w$O=this._getParams(w$Z,w$k._drawTextureCmd,w$l,this._nodeDefaultProps[w$v]),w$e=w$O[0],w$$=NaN,w$_=NaN,w$o=w$O[5],w$K=w$O[6],w$r=w$O[13],w$G=w$O[14],w$c=w$O[7],w$d=w$O[8],w$C=w$O[9],w$J=w$O[11],w$B=w$O[12];w$$=w$O[3],w$_=w$O[4],0!=w$$&&0!=w$_||(w$e=null),-1==w$$&&(w$$=0),-1==w$_&&(w$_=0),w$L.skin=w$e,w$L.width=w$$,w$L.height=w$_,w$e&&((w$x=this._getTextureByUrl(w$e))?(w$$||(w$$=w$x.sourceWidth),w$_||(w$_=w$x.sourceHeight)):console.warn("lost skin:",w$e,",you may load pics first")),w$L.alpha=w$O[10],w$m=w$L.transform,0!=w$r&&(w$o=w$r*w$$),0!=w$G&&(w$K=w$G*w$_),0==w$o&&0==w$K||w$m.translate(-w$o,-w$K);var w$X=null;if(w$C||1!==w$c||1!==w$d||w$J||w$B){(w$X=w$k._tempMt).identity(),w$X.bTransform=!0;var w$f=.0174532922222222*(w$C-w$J),w$w=.0174532922222222*(w$C+w$B),w$H=Math.cos(w$w),w$g=Math.sin(w$w),w$T=Math.sin(w$f),w$h=Math.cos(w$f);w$X.a=w$c*w$H,w$X.b=w$c*w$g,w$X.c=-w$d*w$T,w$X.d=w$d*w$h,w$X.tx=w$X.ty=0}return w$X&&(w$m=w$M.mul(w$m,w$X,w$m)),w$m.translate(w$O[1],w$O[2]),w$L},w$v._getTextureByUrl=function(w$v){return w$Ov.getRes(w$v)},w$v.setAniData=function(w$v,w$l){if(w$v.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=w$v,this._parseNodeList(w$v);var w$L,w$A={},w$x=[],w$m=w$v.animations,w$Z=0,w$O=w$m.length;for(w$Z=0;w$Z<w$O;w$Z++)if(w$L=w$m[w$Z],this._labels=null,(!w$l||w$l==w$L.name)&&w$L){try{this._calGraphicData(w$L)}catch(w$v){console.warn("parse animation fail:"+w$L.name+",empty animation created"),this._gList=[]}var w$e={};w$e.interval=1e3/w$L.frameRate,w$e.frames=this._gList,w$e.labels=this._labels,w$e.name=w$L.name,w$x.push(w$e),w$A[w$L.name]=w$e}this.animationList=w$x,this.animationDic=w$A}w$k._temParam.length=0},w$v.parseByData=function(w$v){var w$l,w$L;w$l=w$v.nodeRoot,w$L=w$v.aniO,delete w$v.nodeRoot,delete w$v.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=w$l,this._parseNodeList(w$l),this._labels=null;try{this._calGraphicData(w$L)}catch(w$v){console.warn("parse animation fail:"+w$L.name+",empty animation created"),this._gList=[]}var w$A=w$v;return w$A.interval=1e3/w$L.frameRate,w$A.frames=this._gList,w$A.labels=this._labels,w$A.name=w$L.name,w$A},w$v.setUpAniData=function(w$v){if(w$v.animations){var w$l,w$L={},w$A=[],w$x=w$v.animations,w$m=0,w$Z=w$x.length;for(w$m=0;w$m<w$Z;w$m++)if(w$l=w$x[w$m]){var w$O={};w$O.name=w$l.name,w$O.aniO=w$l,w$O.nodeRoot=w$v,w$A.push(w$O),w$L[w$l.name]=w$O}this.animationList=w$A,this.animationDic=w$L}},w$v._clear=function(){var w$v,w$l;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(w$v in this._nodeGDic)(w$l=this._nodeGDic[w$v])&&w$l.recover();this._nodeGDic=null},w$k.parseAnimationByData=function(w$v){var w$l;return w$k._I||(w$k._I=new w$k),w$l=w$k._I.parseByData(w$v),w$k._I._clear(),w$l},w$k.parseAnimationData=function(w$v){var w$l;return w$k._I||(w$k._I=new w$k),w$k._I.setUpAniData(w$v),(w$l={}).animationList=w$k._I.animationList,w$l.animationDic=w$k._I.animationDic,w$k._I._clear(),w$l},w$k._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],w$k._temParam=[],w$k._I=null,w$k._rootMatrix=null,w$e(w$k,["_tempMt",function(){return this._tempMt=new w$M}]),w$k.__init$=function(){w$V=function(){function w$v(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return w$_(w$v,""),w$v.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),w$y.recover("GraphicNode",this)},w$v.create=function(){return w$y.getItemByClass("GraphicNode",w$v)},w$v}()},w$k}(w$Xv));w$H.__init([w$$,w$ev,w$t,w$N,w$E,w$h,w$v,w$Hv])}(window,document,Laya),function(w$v,w$l,w$L){w$L.un,w$L.uns,w$L.static;var w$A=w$L.class;w$L.getset,w$L.__newvec;new(function(){function w$v(){}return w$A(w$v,"LayaMain"),w$v}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(w$v,w$l){"use strict";for(var w$L in Object.defineProperty(w$l,"__esModule",{value:!0}),Laya){var w$A=Laya[w$L];w$A&&w$A.__isclass&&(w$l[w$L]=w$A)}}),function(w$v,w$l,w$w){w$w.un,w$w.uns;var w$Z=w$w.static,w$K=w$w.class,w$A=w$w.getset,w$m=w$w.__newvec,w$_=laya.maths.Arith,w$o=laya.maths.Bezier,w$L=laya.resource.Bitmap,w$r=laya.utils.Browser,w$e=laya.utils.Byte,w$G=laya.utils.Color,w$H=(laya.filters.ColorFilter,w$w.Config),w$x=laya.resource.Context,w$g=(laya.events.Event,laya.filters.Filter),w$O=laya.display.Graphics,w$$=laya.resource.HTMLCanvas,w$c=(laya.utils.HTMLChar,laya.resource.HTMLImage),w$d=laya.resource.HTMLSubImage,w$T=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),w$h=laya.maths.Point,w$V=laya.maths.Rectangle,w$C=laya.renders.Render,w$J=(laya.renders.RenderContext,laya.renders.RenderSprite),w$B=laya.resource.Resource,w$X=laya.resource.ResourceManager,w$f=laya.utils.RunDriver,w$k=laya.display.Sprite,w$Q=laya.display.Stage,w$M=laya.utils.Stat,w$P=laya.utils.StringKey,w$I=(laya.display.css.Style,laya.system.System),w$t=laya.display.Text,w$a=laya.resource.Texture,w$q=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),w$u=laya.utils.VectorGraphManager;laya.utils.WordText;w$w.interface("laya.webgl.shapes.IShape"),w$w.interface("laya.webgl.submit.ISubmit"),w$w.interface("laya.webgl.text.ICharSegment"),w$w.interface("laya.webgl.canvas.save.ISaveData"),w$w.interface("laya.webgl.resource.IMergeAtlasBitmap"),w$w.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var w$R=function(){function w$v(){}w$K(w$v,"laya.filters.webgl.FilterActionGL");var w$l=w$v.prototype;return w$w.imps(w$l,{"laya.filters.IFilterActionGL":!0}),w$l.setValue=function(w$v){},w$l.setValueMix=function(w$v){},w$l.apply3d=function(w$v,w$l,w$L,w$A,w$x){return null},w$l.apply=function(w$v){return null},w$A(0,w$l,"typeMix",function(){return 0}),w$v}(),w$N=function(){function w$v(){}return w$K(w$v,"laya.webgl.shader.ShaderValue"),w$v}(),w$b=function(){var w$A,w$x;function w$v(w$v,w$l,w$L){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new w$x,void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0),this._cells=null,this._rowInfo=null,this._init(w$v,w$l),this._atlasID=w$L}w$K(w$v,"laya.webgl.atlas.AtlasGrid");var w$l=w$v.prototype;return w$l.getAltasID=function(){return this._atlasID},w$l.setAltasID=function(w$v){0<=w$v&&(this._atlasID=w$v)},w$l.addTex=function(w$v,w$l,w$L){var w$A=this._get(w$l,w$L);return 0==w$A.ret||(this._fill(w$A.x,w$A.y,w$l,w$L,w$v),this._texCount++),w$A},w$l._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},w$l._init=function(w$v,w$l){if(this._width=w$v,this._height=w$l,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=w$m(this._height);for(var w$L=0;w$L<this._height;w$L++)this._rowInfo[w$L]=new w$A;return this._clear(),!0},w$l._get=function(w$v,w$l){var w$L=new w$F;if(w$v>=this._failSize.width&&w$l>=this._failSize.height)return w$L;for(var w$A=-1,w$x=-1,w$m=this._width,w$Z=this._height,w$O=this._cells,w$e=0;w$e<w$Z;w$e++)if(!(this._rowInfo[w$e].spaceCount<w$v))for(var w$$=0;w$$<w$m;){var w$_=3*(w$e*w$m+w$$);if(0!=w$O[w$_]||w$O[1+w$_]<w$v||w$O[2+w$_]<w$l)w$$+=w$O[1+w$_];else{w$A=w$$,w$x=w$e;for(var w$o=0;w$o<w$v;w$o++)if(w$O[3*w$o+w$_+2]<w$l){w$A=-1;break}if(!(w$A<0))return w$L.ret=!0,w$L.x=w$A,w$L.y=w$x,w$L;w$$+=w$O[1+w$_]}}return w$L},w$l._fill=function(w$v,w$l,w$L,w$A,w$x){var w$m=this._width,w$Z=this._height;this._check(w$v+w$L<=w$m&&w$l+w$A<=w$Z);for(var w$O=w$l;w$O<w$A+w$l;++w$O){this._check(this._rowInfo[w$O].spaceCount>=w$L),this._rowInfo[w$O].spaceCount-=w$L;for(var w$e=0;w$e<w$L;w$e++){var w$$=3*(w$v+w$O*w$m+w$e);this._check(0==this._cells[w$$]),this._cells[w$$]=w$x,this._cells[1+w$$]=w$L,this._cells[2+w$$]=w$A}}if(0<w$v)for(w$O=0;w$O<w$A;++w$O){var w$_=0;for(w$e=w$v-1;0<=w$e&&0==this._cells[3*((w$l+w$O)*w$m+w$e)];--w$e,++w$_);for(w$e=w$_;0<w$e;--w$e)this._cells[3*((w$l+w$O)*w$m+w$v-w$e)+1]=w$e,this._check(0<w$e)}if(0<w$l)for(w$e=w$v;w$e<w$v+w$L;++w$e){for(w$_=0,w$O=w$l-1;0<=w$O&&0==this._cells[3*(w$e+w$O*w$m)];--w$O,w$_++);for(w$O=w$_;0<w$O;--w$O)this._cells[3*(w$e+(w$l-w$O)*w$m)+2]=w$O,this._check(0<w$O)}},w$l._check=function(w$v){0==w$v&&console.log("xtexMerger 错误啦")},w$l._clear=function(){for(var w$v=this._texCount=0;w$v<this._height;w$v++)this._rowInfo[w$v].spaceCount=this._width;for(var w$l=0;w$l<this._height;w$l++)for(var w$L=0;w$L<this._width;w$L++){var w$A=3*(w$l*this._width+w$L);this._cells[w$A]=0,this._cells[1+w$A]=this._width-w$L,this._cells[2+w$A]=this._width-w$l}this._failSize.width=this._width+1,this._failSize.height=this._height+1},w$v.__init$=function(){w$A=function(){function w$v(){this.spaceCount=0}return w$K(w$v,""),w$v}(),w$x=function(){function w$v(){this.width=0,this.height=0}return w$K(w$v,""),w$v}()},w$v}(),w$j=function(){function w$C(w$v,w$l,w$L,w$A){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=w$v,this._height=w$l,this._gridSize=w$L,this._maxAtlaserCount=w$A,this._gridNumX=w$v/w$L,this._gridNumY=w$l/w$L,this._curAtlasIndex=0,this._atlaserArray=[]}w$K(w$C,"laya.webgl.atlas.AtlasResourceManager");var w$v=w$C.prototype;return w$v.setAtlasParam=function(w$v,w$l,w$L,w$A){if(1==this._setAtlasParam)return w$C._sid_=0,this._width=w$v,this._height=w$l,this._gridSize=w$L,this._maxAtlaserCount=w$A,this._gridNumX=w$v/w$L,this._gridNumY=w$l/w$L,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},w$v.pushData=function(w$v){var w$l,w$L=w$v.bitmap,w$A=-1,w$x=null,w$m=0,w$Z=0;for(w$m=0,w$l=this._atlaserArray.length;w$m<w$l&&(w$Z=(this._curAtlasIndex+w$m)%w$l,-1==(w$A=(w$x=this._atlaserArray[w$Z]).findBitmapIsExist(w$L)));w$m++);if(-1!=w$A){var w$O=w$x.InAtlasWebGLImagesOffsetValue[w$A];return w$G=w$O[0],w$c=w$O[1],w$x.addToAtlas(w$v,w$G,w$c),!0}this._setAtlasParam=!1;for(var w$e=Math.ceil((w$v.bitmap.width+2)/this._gridSize),w$$=Math.ceil((w$v.bitmap.height+2)/this._gridSize),w$_=!1,w$o=0;w$o<2;w$o++){var w$K=this._maxAtlaserCount;for(w$m=0;w$m<w$K;w$m++){w$Z=(this._curAtlasIndex+w$m)%w$K,this._atlaserArray.length-1>=w$Z||this._atlaserArray.push(new w$Vv(this._gridNumX,this._gridNumY,this._width,this._height,w$C._sid_++));var w$r=this._atlaserArray[w$Z],w$G=0,w$c=0,w$d=w$r.addTex(1,w$e,w$$);if(w$d.ret){w$G=w$d.x*this._gridSize+1,w$c=w$d.y*this._gridSize+1,w$L.lock=!0,w$r.addToAtlasTexture(w$L,w$G,w$c),w$r.addToAtlas(w$v,w$G,w$c),w$_=!0,this._curAtlasIndex=w$Z;break}}if(w$_)break;this._atlaserArray.push(new w$Vv(this._gridNumX,this._gridNumY,this._width,this._height,w$C._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return w$_||console.log(">>>AtlasManager pushData error"),w$_},w$v.addToAtlas=function(w$v){laya.webgl.atlas.AtlasResourceManager.instance.pushData(w$v)},w$v.garbageCollection=function(){if(!0===this._needGC){for(var w$v=this._atlaserArray.length-this._maxAtlaserCount,w$l=0;w$l<w$v;w$l++)this._atlaserArray[w$l].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+w$v),this._atlaserArray.splice(0,w$v),this._needGC=!1}return!0},w$v.freeAll=function(){for(var w$v=0,w$l=this._atlaserArray.length;w$v<w$l;w$v++)this._atlaserArray[w$v].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},w$v.getAtlaserCount=function(){return this._atlaserArray.length},w$v.getAtlaserByIndex=function(w$v){return this._atlaserArray[w$v]},w$A(1,w$C,"instance",function(){return w$C._Instance||(w$C._Instance=new w$C(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),w$C._Instance}),w$A(1,w$C,"enabled",function(){return w$H.atlasEnable}),w$A(1,w$C,"atlasLimitWidth",function(){return w$C._atlasLimitWidth},function(w$v){w$C._atlasLimitWidth=w$v}),w$A(1,w$C,"atlasLimitHeight",function(){return w$C._atlasLimitHeight},function(w$v){w$C._atlasLimitHeight=w$v}),w$C._enable=function(){w$H.atlasEnable=!0},w$C._disable=function(){w$H.atlasEnable=!1},w$C.__init__=function(){w$C.atlasTextureWidth=2048,w$C.atlasTextureHeight=2048,w$C.maxTextureCount=6,w$C.atlasLimitWidth=512,w$C.atlasLimitHeight=512},w$C._atlasLimitWidth=0,w$C._atlasLimitHeight=0,w$C.gridSize=16,w$C.atlasTextureWidth=0,w$C.atlasTextureHeight=0,w$C.maxTextureCount=0,w$C._atlasRestore=0,w$C.BOARDER_TYPE_NO=0,w$C.BOARDER_TYPE_RIGHT=1,w$C.BOARDER_TYPE_LEFT=2,w$C.BOARDER_TYPE_BOTTOM=4,w$C.BOARDER_TYPE_TOP=8,w$C.BOARDER_TYPE_ALL=15,w$C._sid_=0,w$C._Instance=null,w$C}(),w$F=function(){function w$v(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return w$K(w$v,"laya.webgl.atlas.MergeFillInfo"),w$v}(),w$p=function(){function w$l(){}return w$K(w$l,"laya.webgl.canvas.BlendMode"),w$l._init_=function(w$v){w$l.fns=[w$l.BlendNormal,w$l.BlendAdd,w$l.BlendMultiply,w$l.BlendScreen,w$l.BlendOverlay,w$l.BlendLight,w$l.BlendMask,w$l.BlendDestinationOut],w$l.targetFns=[w$l.BlendNormalTarget,w$l.BlendAddTarget,w$l.BlendMultiplyTarget,w$l.BlendScreenTarget,w$l.BlendOverlayTarget,w$l.BlendLightTarget,w$l.BlendMask,w$l.BlendDestinationOut]},w$l.BlendNormal=function(w$v){w$v.blendFunc(1,771)},w$l.BlendAdd=function(w$v){w$v.blendFunc(1,772)},w$l.BlendMultiply=function(w$v){w$v.blendFunc(774,771)},w$l.BlendScreen=function(w$v){w$v.blendFunc(1,1)},w$l.BlendOverlay=function(w$v){w$v.blendFunc(1,769)},w$l.BlendLight=function(w$v){w$v.blendFunc(1,1)},w$l.BlendNormalTarget=function(w$v){w$v.blendFunc(1,771)},w$l.BlendAddTarget=function(w$v){w$v.blendFunc(1,772)},w$l.BlendMultiplyTarget=function(w$v){w$v.blendFunc(774,771)},w$l.BlendScreenTarget=function(w$v){w$v.blendFunc(1,1)},w$l.BlendOverlayTarget=function(w$v){w$v.blendFunc(1,769)},w$l.BlendLightTarget=function(w$v){w$v.blendFunc(1,1)},w$l.BlendMask=function(w$v){w$v.blendFunc(0,770)},w$l.BlendDestinationOut=function(w$v){w$v.blendFunc(0,0)},w$l.activeBlendFunction=null,w$l.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],w$l.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},w$l.NORMAL="normal",w$l.ADD="add",w$l.MULTIPLY="multiply",w$l.SCREEN="screen",w$l.LIGHT="light",w$l.OVERLAY="overlay",w$l.DESTINATIONOUT="destination-out",w$l.fns=[],w$l.targetFns=[],w$l}(),w$Y=function(){function w$L(w$v){this._color=w$G.create("black"),this.setValue(w$v)}w$K(w$L,"laya.webgl.canvas.DrawStyle");var w$v=w$L.prototype;return w$v.setValue=function(w$v){if(w$v){if("string"==typeof w$v)return void(this._color=w$G.create(w$v));if(w$v instanceof laya.utils.Color)return void(this._color=w$v)}},w$v.reset=function(){this._color=w$G.create("black")},w$v.equal=function(w$v){return"string"==typeof w$v?this._color.strColor===w$v:w$v instanceof laya.utils.Color&&this._color.numColor===w$v.numColor},w$v.toColorStr=function(){return this._color.strColor},w$L.create=function(w$v){var w$l;if(w$v&&("string"==typeof w$v?w$l=w$G.create(w$v):w$v instanceof laya.utils.Color&&(w$l=w$v),w$l))return w$l._drawStyle||(w$l._drawStyle=new w$L(w$v));return laya.webgl.canvas.DrawStyle.DEFAULT},w$Z(w$L,["DEFAULT",function(){return this.DEFAULT=new w$L("#000000")}]),w$L}(),w$D=function(){function w$v(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];w$Xv.mainContext;this.ib=w$Uv.create(35048),this.vb=w$zv.create(5)}w$K(w$v,"laya.webgl.canvas.Path");var w$l=w$v.prototype;return w$l.addPoint=function(w$v,w$l){this.tempArray.push(w$v,w$l)},w$l.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},w$l.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},w$l.polygon=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z;return this.geomatrys.push(this._curGeomatry=w$Z=new w$Pv(w$v,w$l,w$L,w$A,w$x,w$m)),w$A||(w$Z.fill=!1),null==w$m&&(w$Z.borderWidth=0),w$Z},w$l.setGeomtry=function(w$v){this.geomatrys.push(this._curGeomatry=w$v)},w$l.drawLine=function(w$v,w$l,w$L,w$A,w$x){var w$m;return this.closePath?this.geomatrys.push(this._curGeomatry=w$m=new w$Mv(w$v,w$l,w$L,w$A,w$x)):this.geomatrys.push(this._curGeomatry=w$m=new w$Qv(w$v,w$l,w$L,w$A,w$x)),w$m.fill=!1,w$m},w$l.update=function(){var w$v=this.ib._byteLength,w$l=this.geomatrys.length;this.offset=w$v;for(var w$L=this.geoStart;w$L<w$l;w$L++)this.geomatrys[w$L].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=w$l,this.count=(this.ib._byteLength-w$v)/w$cv.BYTES_PIDX},w$l.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},w$l.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},w$v}(),w$S=function(){function w$O(){}w$K(w$O,"laya.webgl.canvas.save.SaveBase");var w$v=w$O.prototype;return w$w.imps(w$v,{"laya.webgl.canvas.save.ISaveData":!0}),w$v.isSaveMark=function(){return!1},w$v.restore=function(w$v){this._dataObj[this._valueName]=this._value,(w$O._cache[w$O._cache._length++]=this)._newSubmit&&(w$v._curSubmit=w$mv.RENDERBASE,w$v._renderKey=0)},w$O._createArray=function(){var w$v=[];return w$v._length=0,w$v},w$O._init=function(){var w$v=w$O._namemap={};return w$v[1]="ALPHA",w$v[2]="fillStyle",w$v[8]="font",w$v[256]="lineWidth",w$v[512]="strokeStyle",w$v[8192]="_mergeID",w$v[1024]=w$v[2048]=w$v[4096]=[],w$v[16384]="textBaseline",w$v[32768]="textAlign",w$v[65536]="_nBlendType",w$v[1048576]="shader",w$v[2097152]="filters",w$v},w$O.save=function(w$v,w$l,w$L,w$A){if((w$v._saveMark._saveuse&w$l)!==w$l){w$v._saveMark._saveuse|=w$l;var w$x=w$O._cache,w$m=0<w$x._length?w$x[--w$x._length]:new w$O;w$m._value=w$L[w$m._valueName=w$O._namemap[w$l]],w$m._dataObj=w$L,w$m._newSubmit=w$A;var w$Z=w$v._save;w$Z[w$Z._length++]=w$m}},w$O._cache=laya.webgl.canvas.save.SaveBase._createArray(),w$O._namemap=w$O._init(),w$O}(),w$y=function(){function w$m(){this._clipRect=new w$V}w$K(w$m,"laya.webgl.canvas.save.SaveClipRect");var w$v=w$m.prototype;return w$w.imps(w$v,{"laya.webgl.canvas.save.ISaveData":!0}),w$v.isSaveMark=function(){return!1},w$v.restore=function(w$v){w$v._clipRect=this._clipSaveRect,(w$m._cache[w$m._cache._length++]=this)._submitScissor.submitLength=w$v._submits._length-this._submitScissor.submitIndex,w$v._curSubmit=w$mv.RENDERBASE,w$v._renderKey=0},w$m.save=function(w$v,w$l){if(131072!=(131072&w$v._saveMark._saveuse)){w$v._saveMark._saveuse|=131072;var w$L=w$m._cache,w$A=0<w$L._length?w$L[--w$L._length]:new w$m;w$A._clipSaveRect=w$v._clipRect,w$v._clipRect=w$A._clipRect.copyFrom(w$v._clipRect),w$A._submitScissor=w$l;var w$x=w$v._save;w$x[w$x._length++]=w$A}},w$Z(w$m,["_cache",function(){return this._cache=w$S._createArray()}]),w$m}(),w$W=function(){function w$r(){this._contextX=0,this._contextY=0,this._clipRect=new w$V,this._rect=new w$V,this._matrix=new w$T}w$K(w$r,"laya.webgl.canvas.save.SaveClipRectStencil");var w$v=w$r.prototype;return w$w.imps(w$v,{"laya.webgl.canvas.save.ISaveData":!0}),w$v.isSaveMark=function(){return!1},w$v.restore=function(w$v){w$_v.restore(w$v,this._rect,this._saveMatrix,this._contextX,this._contextY),w$v._clipRect=this._clipSaveRect,w$v._curMat=this._saveMatrix,w$v._x=this._contextX,w$v._y=this._contextY,w$r._cache[w$r._cache._length++]=this,w$v._curSubmit=w$mv.RENDERBASE},w$r.save=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$){if(262144!=(262144&w$v._saveMark._saveuse)){w$v._saveMark._saveuse|=262144;var w$_=w$r._cache,w$o=0<w$_._length?w$_[--w$_._length]:new w$r;w$o._clipSaveRect=w$v._clipRect,w$o._clipRect.setTo(w$Z,w$O,w$e,w$$),w$v._clipRect=w$o._clipRect,w$o._rect.x=w$L,w$o._rect.y=w$A,w$o._rect.width=w$x,w$o._rect.height=w$m,w$o._contextX=w$v._x,w$o._contextY=w$v._y,w$o._saveMatrix=w$v._curMat,w$v._curMat.copyTo(w$o._matrix),w$v._curMat=w$o._matrix,w$o._submitStencil=w$l;var w$K=w$v._save;w$K[w$K._length++]=w$o}},w$Z(w$r,["_cache",function(){return this._cache=w$S._createArray()}]),w$r}(),w$E=function(){function w$A(){this._saveuse=0}w$K(w$A,"laya.webgl.canvas.save.SaveMark");var w$v=w$A.prototype;return w$w.imps(w$v,{"laya.webgl.canvas.save.ISaveData":!0}),w$v.isSaveMark=function(){return!0},w$v.restore=function(w$v){w$v._saveMark=this._preSaveMark,w$A._no[w$A._no._length++]=this},w$A.Create=function(w$v){var w$l=w$A._no,w$L=0<w$l._length?w$l[--w$l._length]:new w$A;return w$L._saveuse=0,w$L._preSaveMark=w$v._saveMark,w$v._saveMark=w$L},w$Z(w$A,["_no",function(){return this._no=w$S._createArray()}]),w$A}(),w$s=function(){function w$m(){this._matrix=new w$T}w$K(w$m,"laya.webgl.canvas.save.SaveTransform");var w$v=w$m.prototype;return w$w.imps(w$v,{"laya.webgl.canvas.save.ISaveData":!0}),w$v.isSaveMark=function(){return!1},w$v.restore=function(w$v){w$v._curMat=this._savematrix,w$m._no[w$m._no._length++]=this},w$m.save=function(w$v){var w$l=w$v._saveMark;if(2048!=(2048&w$l._saveuse)){w$l._saveuse|=2048;var w$L=w$m._no,w$A=0<w$L._length?w$L[--w$L._length]:new w$m;w$A._savematrix=w$v._curMat,w$v._curMat=w$v._curMat.copyTo(w$A._matrix);var w$x=w$v._save;w$x[w$x._length++]=w$A}},w$Z(w$m,["_no",function(){return this._no=w$S._createArray()}]),w$m}(),w$i=function(){function w$x(){}w$K(w$x,"laya.webgl.canvas.save.SaveTranslate");var w$v=w$x.prototype;return w$w.imps(w$v,{"laya.webgl.canvas.save.ISaveData":!0}),w$v.isSaveMark=function(){return!1},w$v.restore=function(w$v){w$v._curMat;w$v._x=this._x,w$v._y=this._y,w$x._no[w$x._no._length++]=this},w$x.save=function(w$v){var w$l=w$x._no,w$L=0<w$l._length?w$l[--w$l._length]:new w$x;w$L._x=w$v._x,w$L._y=w$v._y;var w$A=w$v._save;w$A[w$A._length++]=w$L},w$Z(w$x,["_no",function(){return this._no=w$S._createArray()}]),w$x}(),w$n=function(){function w$v(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new w$V}w$K(w$v,"laya.webgl.resource.RenderTargetMAX");var w$l=w$v.prototype;return w$l.setSP=function(w$v){this._sp=w$v},w$l.size=function(w$v,w$l){var w$L=this;this._width!==w$v||this._height!==w$l?(this.repaint=!0,this._width=w$v,this._height=w$l,this.target?this.target.size(w$v,w$l):this.target=w$uv.create(w$v,w$l),this.target.hasListener("recovered")||this.target.on("recovered",this,function(w$v){w$w.timer.callLater(w$L._sp,w$L._sp.repaint)})):this.target.size(w$v,w$l)},w$l._flushToTarget=function(w$v,w$l){if(!w$l._destroy){var w$L=w$Jv.worldScissorTest,w$A=w$Jv.worldClipRect;w$Jv.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,w$Jv.worldScissorTest=!1,w$Xv.mainContext.disable(3089);var w$x=w$Jv.worldAlpha,w$m=w$Jv.worldMatrix4,w$Z=w$Jv.worldMatrix,w$O=w$Jv.worldFilters,w$e=w$Jv.worldShaderDefines;if(w$Jv.worldMatrix=w$T.EMPTY,w$Jv.restoreTempArray(),w$Jv.worldMatrix4=w$Jv.TEMPMAT4_ARRAY,w$Jv.worldAlpha=1,w$Jv.worldFilters=null,w$Jv.worldShaderDefines=null,w$qv.activeShader=null,w$l.start(),w$H.showCanvasMark?w$l.clear(0,1,0,.3):w$l.clear(0,0,0,0),w$v.flush(),w$l.end(),w$qv.activeShader=null,w$Jv.worldAlpha=w$x,w$Jv.worldMatrix4=w$m,w$Jv.worldMatrix=w$Z,w$Jv.worldFilters=w$O,w$Jv.worldShaderDefines=w$e,w$Jv.worldScissorTest=w$L){var w$$=w$Jv.height-w$A.y-w$A.height;w$Xv.mainContext.scissor(w$A.x,w$$,w$A.width,w$A.height),w$Xv.mainContext.enable(3089)}w$Jv.worldClipRect=w$A}},w$l.flush=function(w$v){this.repaint&&(this._flushToTarget(w$v,this.target),this.repaint=!1)},w$l.drawTo=function(w$v,w$l,w$L,w$A,w$x){w$v.drawTexture(this.target.getTexture(),w$l,w$L,w$A,w$x,0,0)},w$l.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},w$v}(),w$U=function(){function w$v(){this.ALPHA=1,this.shaderType=0,this.defines=new w$kv}return w$K(w$v,"laya.webgl.shader.d2.Shader2D"),w$v.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},w$v.__init__=function(){var w$v,w$l;w$Ev.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),w$Ev.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),w$Ev.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),w$Ev.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),w$Ev.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),w$Ev.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),w$Ev.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),w$Ev.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),w$v="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",w$l='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',w$Ev.preCompile2D(0,1,w$v,w$l,null),w$v="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",w$l='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',w$Ev.preCompile2D(0,2,w$v,w$l,null),w$v="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",w$l="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",w$Ev.preCompile2D(0,4,w$v,w$l,null),w$v="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",w$l='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',w$Ev.preCompile2D(0,256,w$v,w$l,null),w$v="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",w$l="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",w$Ev.preCompile2D(0,512,w$v,w$l,null)},w$v}(),w$z=function(){function w$l(w$v,w$l,w$L){this._value=0,this._name2int=w$v,this._int2name=w$l,this._int2nameMap=w$L}w$K(w$l,"laya.webgl.shader.ShaderDefines");var w$v=w$l.prototype;return w$v.add=function(w$v){return"string"==typeof w$v&&(w$v=this._name2int[w$v]),this._value|=w$v,this._value},w$v.addInt=function(w$v){return this._value|=w$v,this._value},w$v.remove=function(w$v){return"string"==typeof w$v&&(w$v=this._name2int[w$v]),this._value&=~w$v,this._value},w$v.isDefine=function(w$v){return(this._value&w$v)===w$v},w$v.getValue=function(){return this._value},w$v.setValue=function(w$v){this._value=w$v},w$v.toNameDic=function(){var w$v=this._int2nameMap[this._value];return w$v||w$l._toText(this._value,this._int2name,this._int2nameMap)},w$l._reg=function(w$v,w$l,w$L,w$A){w$A[w$L[w$v]=w$l]=w$v},w$l._toText=function(w$v,w$l,w$L){var w$A=w$L[w$v];if(w$A)return w$A;for(var w$x={},w$m=1,w$Z=0;w$Z<32&&!(w$v<(w$m=1<<w$Z));w$Z++)if(w$v&w$m){var w$O=w$l[w$m];w$O&&(w$x[w$O]="")}return w$L[w$v]=w$x},w$l._toInt=function(w$v,w$l){for(var w$L=w$v.split("."),w$A=0,w$x=0,w$m=w$L.length;w$x<w$m;w$x++){var w$Z=w$l[w$L[w$x]];if(!w$Z)throw new Error("Defines to int err:"+w$v+"/"+w$L[w$x]);w$A|=w$Z}return w$A},w$l}(),w$vv=function(){function w$Z(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new w$T}w$K(w$Z,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var w$v=w$Z.prototype;return w$v.init=function(w$v,w$l,w$L){if(w$l)this._vs=w$l;else{this._vs=[];var w$A=w$v.width,w$x=w$v.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(w$A,0,1,0,1,1,1,1),this._vs.push(w$A,w$x,1,1,1,1,1,1),this._vs.push(0,w$x,0,1,1,1,1,1)}w$L?this._ps=w$L:(w$Z._defaultPS||(w$Z._defaultPS=[]).push(0,1,3,3,1,2),this._ps=w$Z._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=w$v},w$v.init2=function(w$v,w$l,w$L,w$A,w$x){this.transform&&(this.transform=null),w$L?this._ps=w$L:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=w$A,this._uvs=w$x,this.mEleNum=this._ps.length,this.mTexture=w$v,(w$C.isConchNode||w$C.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},w$v._initMyData=function(){var w$v=0,w$l=0,w$L=4*this._verticles.length;this._vs=w$Z._tempVS;var w$A=!1;if(w$C.isConchNode||w$C.isConchApp?(this._vs.length=w$L,w$A=!0):this._vs.length<w$L&&(this._vs.length=w$L,w$A=!0),w$Z._tVSLen=w$L,w$A)for(;w$v<w$L;)this._vs[w$v]=this._verticles[w$l],this._vs[w$v+1]=this._verticles[w$l+1],this._vs[w$v+2]=this._uvs[w$l],this._vs[w$v+3]=this._uvs[w$l+1],this._vs[w$v+4]=1,this._vs[w$v+5]=1,this._vs[w$v+6]=1,this._vs[w$v+7]=1,w$v+=8,w$l+=2;else for(;w$v<w$L;)this._vs[w$v]=this._verticles[w$l],this._vs[w$v+1]=this._verticles[w$l+1],this._vs[w$v+2]=this._uvs[w$l],this._vs[w$v+3]=this._uvs[w$l+1],w$v+=8,w$l+=2},w$v.getData2=function(w$v,w$l,w$L){var w$A;this.mVBBuffer=w$v,this.mIBBuffer=w$l,this._initMyData(),w$v.appendEx2(this._vs,Float32Array,w$Z._tVSLen,4),this._indexStart=w$l._byteLength,(w$A=w$Z._tempIB).length<this._ps.length&&(w$A.length=this._ps.length);for(var w$x=0,w$m=this._ps.length;w$x<w$m;w$x++)w$A[w$x]=this._ps[w$x]+w$L;w$l.appendEx2(w$A,Uint16Array,this._ps.length,2)},w$v.getData=function(w$v,w$l,w$L){if(this.mVBBuffer=w$v,this.mIBBuffer=w$l,w$v.append(this.mVBData),this._indexStart=w$l._byteLength,this.mIBData.start!=w$L){for(var w$A=0,w$x=this._ps.length;w$A<w$x;w$A++)this.mIBData[w$A]=this._ps[w$A]+w$L;this.mIBData.start=w$L}w$l.append(this.mIBData)},w$v.render=function(w$v,w$l,w$L){if(w$C.isWebGL&&this.mTexture){w$v._renderKey=0,w$v._shader2D.glTexture=null,w$lv.getInstance().addSkinMesh(this);var w$A=w$mv.createShape(w$v,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,w$gv.create(512,0));this.transform||(this.transform=w$T.EMPTY),this.transform.translate(w$l,w$L),w$T.mul(this.transform,w$v._curMat,this._tempMatrix),this.transform.translate(-w$l,-w$L);var w$x=w$A.shaderValue,w$m=w$x.u_mmat2||w$Jv.getMatrArray();w$Jv.mat2MatArray(this._tempMatrix,w$m),w$x.textureHost=this.mTexture,w$x.offsetX=0,w$x.offsetY=0,w$x.u_mmat2=w$m,w$x.ALPHA=w$v._shader2D.ALPHA,w$v._submits[w$v._submits._length++]=w$A}else w$C.isConchApp&&this.mTexture&&(this.transform||(this.transform=w$T.EMPTY),w$v.setSkinMesh&&w$v.setSkinMesh(w$l,w$L,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},w$Z._tempVS=[],w$Z._tempIB=[],w$Z._defaultPS=null,w$Z._tVSLen=0,w$Z}(),w$lv=function(){function w$v(){this.ib=null,this.vb=null;w$Xv.mainContext;this.ib=w$Uv.create(35048),this.vb=w$zv.create(8)}w$K(w$v,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var w$l=w$v.prototype;return w$l.addSkinMesh=function(w$v){w$v.getData2(this.vb,this.ib,this.vb._byteLength/32)},w$l.reset=function(){this.vb.clear(),this.ib.clear()},w$v.getInstance=function(){return w$v.instance=w$v.instance||new w$v},w$v.instance=null,w$v}(),w$Lv=function(){function w$v(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===w$e&&(w$e=0),this.x=w$v,this.y=w$l,this.width=w$L,this.height=w$A,this.edges=w$x,this.color=w$m,this.borderWidth=w$Z,this.borderColor=w$O}w$K(w$v,"laya.webgl.shapes.BasePoly");var w$l=w$v.prototype;return w$w.imps(w$l,{"laya.webgl.shapes.IShape":!0}),w$l.getData=function(w$v,w$l,w$L){},w$l.rebuild=function(w$v){},w$l.setMatrix=function(w$v){},w$l.needUpdate=function(w$v){return!0},w$l.sector=function(w$v,w$l,w$L){var w$A=this.x,w$x=this.y,w$m=this.edges,w$Z=(this.r1-this.r0)/w$m,w$O=this.width,w$e=this.height,w$$=this.color,w$_=(w$$>>16&255)/255,w$o=(w$$>>8&255)/255,w$K=(255&w$$)/255;w$v.push(w$A,w$x,w$_,w$o,w$K);for(var w$r=0;w$r<w$m+1;w$r++)w$v.push(w$A+Math.sin(w$Z*w$r+this.r0)*w$O,w$x+Math.cos(w$Z*w$r+this.r0)*w$e),w$v.push(w$_,w$o,w$K);for(w$r=0;w$r<w$m;w$r++)w$l.push(w$L,w$L+w$r+1,w$L+w$r+2)},w$l.createLine2=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z,w$O,w$e,w$$,w$_,w$o,w$K,w$r,w$G,w$c,w$d,w$C,w$J,w$B,w$X,w$f,w$w,w$H,w$g,w$T,w$h=w$v.concat(),w$V=w$x,w$k=this.borderColor,w$Q=(w$k>>16&255)/255,w$M=(w$k>>8&255)/255,w$P=(255&w$k)/255,w$I=w$h.length/2,w$t=w$A,w$a=w$L/2;w$e=w$h[0],w$$=w$h[1],w$c=w$e-(w$_=w$h[2]),w$G=(w$G=-(w$$-(w$o=w$h[3])))/(w$T=Math.sqrt(w$G*w$G+w$c*w$c))*w$a,w$c=w$c/w$T*w$a,w$V.push(w$e-w$G+this.x,w$$-w$c+this.y,w$Q,w$M,w$P,w$e+w$G+this.x,w$$+w$c+this.y,w$Q,w$M,w$P);for(var w$q=1;w$q<w$I-1;w$q++)w$e=w$h[2*(w$q-1)],w$$=w$h[2*(w$q-1)+1],w$_=w$h[2*w$q],w$o=w$h[2*w$q+1],w$K=w$h[2*(w$q+1)],w$r=w$h[2*(w$q+1)+1],w$c=w$e-w$_,w$C=w$_-w$K,w$X=(-(w$G=(w$G=-(w$$-w$o))/(w$T=Math.sqrt(w$G*w$G+w$c*w$c))*w$a)+w$e)*(-(w$c=w$c/w$T*w$a)+w$o)-(-w$G+w$_)*(-w$c+w$$),w$H=(-(w$d=(w$d=-(w$o-w$r))/(w$T=Math.sqrt(w$d*w$d+w$C*w$C))*w$a)+w$K)*(-(w$C=w$C/w$T*w$a)+w$o)-(-w$d+w$_)*(-w$C+w$r),w$g=(w$J=-w$c+w$$-(-w$c+w$o))*(w$w=-w$d+w$_-(-w$d+w$K))-(w$f=-w$C+w$r-(-w$C+w$o))*(w$B=-w$G+w$_-(-w$G+w$e)),Math.abs(w$g)<.1?(w$g+=10.1,w$V.push(w$_-w$G+this.x,w$o-w$c+this.y,w$Q,w$M,w$P,w$_+w$G+this.x,w$o+w$c+this.y,w$Q,w$M,w$P)):(((w$Z=(w$B*w$H-w$w*w$X)/w$g)-w$_)*(w$Z-w$_)+((w$O=(w$f*w$X-w$J*w$H)/w$g)-w$o)+(w$O-w$o),w$V.push(w$Z+this.x,w$O+this.y,w$Q,w$M,w$P,w$_-(w$Z-w$_)+this.x,w$o-(w$O-w$o)+this.y,w$Q,w$M,w$P));w$e=w$h[w$h.length-4],w$$=w$h[w$h.length-3],w$c=w$e-(w$_=w$h[w$h.length-2]),w$G=(w$G=-(w$$-(w$o=w$h[w$h.length-1])))/(w$T=Math.sqrt(w$G*w$G+w$c*w$c))*w$a,w$c=w$c/w$T*w$a,w$V.push(w$_-w$G+this.x,w$o-w$c+this.y,w$Q,w$M,w$P,w$_+w$G+this.x,w$o+w$c+this.y,w$Q,w$M,w$P);var w$u=w$m;for(w$q=1;w$q<w$u;w$q++)w$l.push(w$t+2*(w$q-1),w$t+2*(w$q-1)+1,w$t+2*w$q+1,w$t+2*w$q+1,w$t+2*w$q,w$t+2*(w$q-1));return w$V},w$l.createLine=function(w$v,w$l,w$L,w$A){var w$x=w$v.concat(),w$m=w$v,w$Z=this.borderColor,w$O=(w$Z>>16&255)/255,w$e=(w$Z>>8&255)/255,w$$=(255&w$Z)/255;w$x.splice(0,5);var w$_,w$o,w$K,w$r,w$G,w$c,w$d,w$C,w$J,w$B,w$X,w$f,w$w,w$H,w$g,w$T,w$h,w$V,w$k,w$Q,w$M=w$x.length/5,w$P=w$A,w$I=w$L/2;w$K=w$x[0],w$r=w$x[1],w$B=w$K-(w$G=w$x[5]),w$J=(w$J=-(w$r-(w$c=w$x[6])))/(w$Q=Math.sqrt(w$J*w$J+w$B*w$B))*w$I,w$B=w$B/w$Q*w$I,w$m.push(w$K-w$J,w$r-w$B,w$O,w$e,w$$,w$K+w$J,w$r+w$B,w$O,w$e,w$$);for(var w$t=1;w$t<w$M-1;w$t++)w$K=w$x[5*(w$t-1)],w$r=w$x[5*(w$t-1)+1],w$G=w$x[5*w$t],w$c=w$x[5*w$t+1],w$d=w$x[5*(w$t+1)],w$C=w$x[5*(w$t+1)+1],w$B=w$K-w$G,w$f=w$G-w$d,w$g=(-(w$J=(w$J=-(w$r-w$c))/(w$Q=Math.sqrt(w$J*w$J+w$B*w$B))*w$I)+w$K)*(-(w$B=w$B/w$Q*w$I)+w$c)-(-w$J+w$G)*(-w$B+w$r),w$V=(-(w$X=(w$X=-(w$c-w$C))/(w$Q=Math.sqrt(w$X*w$X+w$f*w$f))*w$I)+w$d)*(-(w$f=w$f/w$Q*w$I)+w$c)-(-w$X+w$G)*(-w$f+w$C),w$k=(w$w=-w$B+w$r-(-w$B+w$c))*(w$h=-w$X+w$G-(-w$X+w$d))-(w$T=-w$f+w$C-(-w$f+w$c))*(w$H=-w$J+w$G-(-w$J+w$K)),Math.abs(w$k)<.1?(w$k+=10.1,w$m.push(w$G-w$J,w$c-w$B,w$O,w$e,w$$,w$G+w$J,w$c+w$B,w$O,w$e,w$$)):(((w$_=(w$H*w$V-w$h*w$g)/w$k)-w$G)*(w$_-w$G)+((w$o=(w$T*w$g-w$w*w$V)/w$k)-w$c)+(w$o-w$c),w$m.push(w$_,w$o,w$O,w$e,w$$,w$G-(w$_-w$G),w$c-(w$o-w$c),w$O,w$e,w$$));w$K=w$x[w$x.length-10],w$r=w$x[w$x.length-9],w$B=w$K-(w$G=w$x[w$x.length-5]),w$J=(w$J=-(w$r-(w$c=w$x[w$x.length-4])))/(w$Q=Math.sqrt(w$J*w$J+w$B*w$B))*w$I,w$B=w$B/w$Q*w$I,w$m.push(w$G-w$J,w$c-w$B,w$O,w$e,w$$,w$G+w$J,w$c+w$B,w$O,w$e,w$$);var w$a=this.edges+1;for(w$t=1;w$t<w$a;w$t++)w$l.push(w$P+2*(w$t-1),w$P+2*(w$t-1)+1,w$P+2*w$t+1,w$P+2*w$t+1,w$P+2*w$t,w$P+2*(w$t-1));return w$m},w$l.createLoopLine=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z=w$v.concat(),w$O=w$x||w$v,w$e=this.borderColor,w$$=(w$e>>16&255)/255,w$_=(w$e>>8&255)/255,w$o=(255&w$e)/255;w$Z.splice(0,5);var w$K=[w$Z[0],w$Z[1]],w$r=[w$Z[w$Z.length-5],w$Z[w$Z.length-4]],w$G=w$r[0]+.5*(w$K[0]-w$r[0]),w$c=w$r[1]+.5*(w$K[1]-w$r[1]);w$Z.unshift(w$G,w$c,0,0,0),w$Z.push(w$G,w$c,0,0,0);var w$d,w$C,w$J,w$B,w$X,w$f,w$w,w$H,w$g,w$T,w$h,w$V,w$k,w$Q,w$M,w$P,w$I,w$t,w$a,w$q,w$u=w$Z.length/5,w$R=w$A,w$N=w$L/2;w$J=w$Z[0],w$B=w$Z[1],w$T=w$J-(w$X=w$Z[5]),w$g=(w$g=-(w$B-(w$f=w$Z[6])))/(w$q=Math.sqrt(w$g*w$g+w$T*w$T))*w$N,w$T=w$T/w$q*w$N,w$O.push(w$J-w$g,w$B-w$T,w$$,w$_,w$o,w$J+w$g,w$B+w$T,w$$,w$_,w$o);for(var w$b=1;w$b<w$u-1;w$b++)w$J=w$Z[5*(w$b-1)],w$B=w$Z[5*(w$b-1)+1],w$X=w$Z[5*w$b],w$f=w$Z[5*w$b+1],w$w=w$Z[5*(w$b+1)],w$H=w$Z[5*(w$b+1)+1],w$T=w$J-w$X,w$V=w$X-w$w,w$M=(-(w$g=(w$g=-(w$B-w$f))/(w$q=Math.sqrt(w$g*w$g+w$T*w$T))*w$N)+w$J)*(-(w$T=w$T/w$q*w$N)+w$f)-(-w$g+w$X)*(-w$T+w$B),w$t=(-(w$h=(w$h=-(w$f-w$H))/(w$q=Math.sqrt(w$h*w$h+w$V*w$V))*w$N)+w$w)*(-(w$V=w$V/w$q*w$N)+w$f)-(-w$h+w$X)*(-w$V+w$H),w$a=(w$k=-w$T+w$B-(-w$T+w$f))*(w$I=-w$h+w$X-(-w$h+w$w))-(w$P=-w$V+w$H-(-w$V+w$f))*(w$Q=-w$g+w$X-(-w$g+w$J)),Math.abs(w$a)<.1?(w$a+=10.1,w$O.push(w$X-w$g,w$f-w$T,w$$,w$_,w$o,w$X+w$g,w$f+w$T,w$$,w$_,w$o)):(((w$d=(w$Q*w$t-w$I*w$M)/w$a)-w$X)*(w$d-w$X)+((w$C=(w$P*w$M-w$k*w$t)/w$a)-w$f)+(w$C-w$f),w$O.push(w$d,w$C,w$$,w$_,w$o,w$X-(w$d-w$X),w$f-(w$C-w$f),w$$,w$_,w$o));w$m&&(w$l=w$m);var w$j=this.edges+1;for(w$b=1;w$b<w$j;w$b++)w$l.push(w$R+2*(w$b-1),w$R+2*(w$b-1)+1,w$R+2*w$b+1,w$R+2*w$b+1,w$R+2*w$b,w$R+2*(w$b-1));return w$l.push(w$R+2*(w$b-1),w$R+2*(w$b-1)+1,w$R+1,w$R+1,w$R,w$R+2*(w$b-1)),w$O},w$v}(),w$Av=function(){function w$c(){}return w$K(w$c,"laya.webgl.shapes.Earcut"),w$c.earcut=function(w$v,w$l,w$L){w$L=w$L||2;var w$A,w$x,w$m,w$Z,w$O,w$e,w$$,w$_=w$l&&w$l.length,w$o=w$_?w$l[0]*w$L:w$v.length,w$K=w$c.linkedList(w$v,0,w$o,w$L,!0),w$r=[];if(!w$K)return w$r;if(w$_&&(w$K=w$c.eliminateHoles(w$v,w$l,w$K,w$L)),w$v.length>80*w$L){w$A=w$m=w$v[0],w$x=w$Z=w$v[1];for(var w$G=w$L;w$G<w$o;w$G+=w$L)(w$O=w$v[w$G])<w$A&&(w$A=w$O),(w$e=w$v[w$G+1])<w$x&&(w$x=w$e),w$m<w$O&&(w$m=w$O),w$Z<w$e&&(w$Z=w$e);w$$=0!==(w$$=Math.max(w$m-w$A,w$Z-w$x))?1/w$$:0}return w$c.earcutLinked(w$K,w$r,w$L,w$A,w$x,w$$),w$r},w$c.linkedList=function(w$v,w$l,w$L,w$A,w$x){var w$m,w$Z;if(w$x===0<w$c.signedArea(w$v,w$l,w$L,w$A))for(w$m=w$l;w$m<w$L;w$m+=w$A)w$Z=w$c.insertNode(w$m,w$v[w$m],w$v[w$m+1],w$Z);else for(w$m=w$L-w$A;w$l<=w$m;w$m-=w$A)w$Z=w$c.insertNode(w$m,w$v[w$m],w$v[w$m+1],w$Z);return w$Z&&w$c.equals(w$Z,w$Z.next)&&(w$c.removeNode(w$Z),w$Z=w$Z.next),w$Z},w$c.filterPoints=function(w$v,w$l){if(!w$v)return w$v;w$l||(w$l=w$v);var w$L,w$A=w$v;do{if(w$L=!1,w$A.steiner||!w$c.equals(w$A,w$A.next)&&0!==w$c.area(w$A.prev,w$A,w$A.next))w$A=w$A.next;else{if(w$c.removeNode(w$A),(w$A=w$l=w$A.prev)===w$A.next)break;w$L=!0}}while(w$L||w$A!==w$l);return w$l},w$c.earcutLinked=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){if(w$v){!w$Z&&w$m&&w$c.indexCurve(w$v,w$A,w$x,w$m);for(var w$O,w$e,w$$=w$v;w$v.prev!==w$v.next;)if(w$O=w$v.prev,w$e=w$v.next,w$m?w$c.isEarHashed(w$v,w$A,w$x,w$m):w$c.isEar(w$v))w$l.push(w$O.i/w$L),w$l.push(w$v.i/w$L),w$l.push(w$e.i/w$L),w$c.removeNode(w$v),w$v=w$e.next,w$$=w$e.next;else if((w$v=w$e)===w$$){w$Z?1===w$Z?(w$v=w$c.cureLocalIntersections(w$v,w$l,w$L),w$c.earcutLinked(w$v,w$l,w$L,w$A,w$x,w$m,2)):2===w$Z&&w$c.splitEarcut(w$v,w$l,w$L,w$A,w$x,w$m):w$c.earcutLinked(w$c.filterPoints(w$v,null),w$l,w$L,w$A,w$x,w$m,1);break}}},w$c.isEar=function(w$v){var w$l=w$v.prev,w$L=w$v,w$A=w$v.next;if(0<=w$c.area(w$l,w$L,w$A))return!1;for(var w$x=w$v.next.next;w$x!==w$v.prev;){if(w$c.pointInTriangle(w$l.x,w$l.y,w$L.x,w$L.y,w$A.x,w$A.y,w$x.x,w$x.y)&&0<=w$c.area(w$x.prev,w$x,w$x.next))return!1;w$x=w$x.next}return!0},w$c.isEarHashed=function(w$v,w$l,w$L,w$A){var w$x=w$v.prev,w$m=w$v,w$Z=w$v.next;if(0<=w$c.area(w$x,w$m,w$Z))return!1;for(var w$O=w$x.x<w$m.x?w$x.x<w$Z.x?w$x.x:w$Z.x:w$m.x<w$Z.x?w$m.x:w$Z.x,w$e=w$x.y<w$m.y?w$x.y<w$Z.y?w$x.y:w$Z.y:w$m.y<w$Z.y?w$m.y:w$Z.y,w$$=w$x.x>w$m.x?w$x.x>w$Z.x?w$x.x:w$Z.x:w$m.x>w$Z.x?w$m.x:w$Z.x,w$_=w$x.y>w$m.y?w$x.y>w$Z.y?w$x.y:w$Z.y:w$m.y>w$Z.y?w$m.y:w$Z.y,w$o=w$c.zOrder(w$O,w$e,w$l,w$L,w$A),w$K=w$c.zOrder(w$$,w$_,w$l,w$L,w$A),w$r=w$v.nextZ;w$r&&w$r.z<=w$K;){if(w$r!==w$v.prev&&w$r!==w$v.next&&w$c.pointInTriangle(w$x.x,w$x.y,w$m.x,w$m.y,w$Z.x,w$Z.y,w$r.x,w$r.y)&&0<=w$c.area(w$r.prev,w$r,w$r.next))return!1;w$r=w$r.nextZ}for(w$r=w$v.prevZ;w$r&&w$r.z>=w$o;){if(w$r!==w$v.prev&&w$r!==w$v.next&&w$c.pointInTriangle(w$x.x,w$x.y,w$m.x,w$m.y,w$Z.x,w$Z.y,w$r.x,w$r.y)&&0<=w$c.area(w$r.prev,w$r,w$r.next))return!1;w$r=w$r.prevZ}return!0},w$c.cureLocalIntersections=function(w$v,w$l,w$L){var w$A=w$v;do{var w$x=w$A.prev,w$m=w$A.next.next;!w$c.equals(w$x,w$m)&&w$c.intersects(w$x,w$A,w$A.next,w$m)&&w$c.locallyInside(w$x,w$m)&&w$c.locallyInside(w$m,w$x)&&(w$l.push(w$x.i/w$L),w$l.push(w$A.i/w$L),w$l.push(w$m.i/w$L),w$c.removeNode(w$A),w$c.removeNode(w$A.next),w$A=w$v=w$m),w$A=w$A.next}while(w$A!==w$v);return w$A},w$c.splitEarcut=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z=w$v;do{for(var w$O=w$Z.next.next;w$O!==w$Z.prev;){if(w$Z.i!==w$O.i&&w$c.isValidDiagonal(w$Z,w$O)){var w$e=w$c.splitPolygon(w$Z,w$O);return w$Z=w$c.filterPoints(w$Z,w$Z.next),w$e=w$c.filterPoints(w$e,w$e.next),w$c.earcutLinked(w$Z,w$l,w$L,w$A,w$x,w$m),void w$c.earcutLinked(w$e,w$l,w$L,w$A,w$x,w$m)}w$O=w$O.next}w$Z=w$Z.next}while(w$Z!==w$v)},w$c.eliminateHoles=function(w$v,w$l,w$L,w$A){var w$x,w$m,w$Z,w$O,w$e,w$$=[];for(w$x=0,w$m=w$l.length;w$x<w$m;w$x++)w$Z=w$l[w$x]*w$A,w$O=w$x<w$m-1?w$l[w$x+1]*w$A:w$v.length,(w$e=w$c.linkedList(w$v,w$Z,w$O,w$A,!1))===w$e.next&&(w$e.steiner=!0),w$$.push(w$c.getLeftmost(w$e));for(w$$.sort(w$c.compareX),w$x=0;w$x<w$$.length;w$x++)w$c.eliminateHole(w$$[w$x],w$L),w$L=w$c.filterPoints(w$L,w$L.next);return w$L},w$c.compareX=function(w$v,w$l){return w$v.x-w$l.x},w$c.eliminateHole=function(w$v,w$l){if(w$l=w$c.findHoleBridge(w$v,w$l)){var w$L=w$c.splitPolygon(w$l,w$v);w$c.filterPoints(w$L,w$L.next)}},w$c.findHoleBridge=function(w$v,w$l){var w$L,w$A=w$l,w$x=w$v.x,w$m=w$v.y,w$Z=-1/0;do{if(w$m<=w$A.y&&w$m>=w$A.next.y&&w$A.next.y!==w$A.y){var w$O=w$A.x+(w$m-w$A.y)*(w$A.next.x-w$A.x)/(w$A.next.y-w$A.y);if(w$O<=w$x&&w$Z<w$O){if((w$Z=w$O)===w$x){if(w$m===w$A.y)return w$A;if(w$m===w$A.next.y)return w$A.next}w$L=w$A.x<w$A.next.x?w$A:w$A.next}}w$A=w$A.next}while(w$A!==w$l);if(!w$L)return null;if(w$x===w$Z)return w$L.prev;var w$e,w$$=w$L,w$_=w$L.x,w$o=w$L.y,w$K=1/0;for(w$A=w$L.next;w$A!==w$$;)w$x>=w$A.x&&w$A.x>=w$_&&w$x!==w$A.x&&w$c.pointInTriangle(w$m<w$o?w$x:w$Z,w$m,w$_,w$o,w$m<w$o?w$Z:w$x,w$m,w$A.x,w$A.y)&&((w$e=Math.abs(w$m-w$A.y)/(w$x-w$A.x))<w$K||w$e===w$K&&w$A.x>w$L.x)&&w$c.locallyInside(w$A,w$v)&&(w$L=w$A,w$K=w$e),w$A=w$A.next;return w$L},w$c.indexCurve=function(w$v,w$l,w$L,w$A){for(var w$x=w$v;null===w$x.z&&(w$x.z=w$c.zOrder(w$x.x,w$x.y,w$l,w$L,w$A)),w$x.prevZ=w$x.prev,w$x.nextZ=w$x.next,(w$x=w$x.next)!==w$v;);w$x.prevZ.nextZ=null,w$x.prevZ=null,w$c.sortLinked(w$x)},w$c.sortLinked=function(w$v){var w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$=1;do{for(w$L=w$v,w$m=w$v=null,w$Z=0;w$L;){for(w$Z++,w$A=w$L,w$l=w$O=0;w$l<w$$&&(w$O++,w$A=w$A.nextZ);w$l++);for(w$e=w$$;0<w$O||0<w$e&&w$A;)0!==w$O&&(0===w$e||!w$A||w$L.z<=w$A.z)?(w$L=(w$x=w$L).nextZ,w$O--):(w$A=(w$x=w$A).nextZ,w$e--),w$m?w$m.nextZ=w$x:w$v=w$x,w$x.prevZ=w$m,w$m=w$x;w$L=w$A}w$m.nextZ=null,w$$*=2}while(1<w$Z);return w$v},w$c.zOrder=function(w$v,w$l,w$L,w$A,w$x){return(w$v=1431655765&((w$v=858993459&((w$v=252645135&((w$v=16711935&((w$v=32767*(w$v-w$L)*w$x)|w$v<<8))|w$v<<4))|w$v<<2))|w$v<<1))|(w$l=1431655765&((w$l=858993459&((w$l=252645135&((w$l=16711935&((w$l=32767*(w$l-w$A)*w$x)|w$l<<8))|w$l<<4))|w$l<<2))|w$l<<1))<<1},w$c.getLeftmost=function(w$v){for(var w$l=w$v,w$L=w$v;w$l.x<w$L.x&&(w$L=w$l),(w$l=w$l.next)!==w$v;);return w$L},w$c.pointInTriangle=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){return 0<=(w$x-w$Z)*(w$l-w$O)-(w$v-w$Z)*(w$m-w$O)&&0<=(w$v-w$Z)*(w$A-w$O)-(w$L-w$Z)*(w$l-w$O)&&0<=(w$L-w$Z)*(w$m-w$O)-(w$x-w$Z)*(w$A-w$O)},w$c.isValidDiagonal=function(w$v,w$l){return w$v.next.i!==w$l.i&&w$v.prev.i!==w$l.i&&!w$c.intersectsPolygon(w$v,w$l)&&w$c.locallyInside(w$v,w$l)&&w$c.locallyInside(w$l,w$v)&&w$c.middleInside(w$v,w$l)},w$c.area=function(w$v,w$l,w$L){return(w$l.y-w$v.y)*(w$L.x-w$l.x)-(w$l.x-w$v.x)*(w$L.y-w$l.y)},w$c.equals=function(w$v,w$l){return w$v.x===w$l.x&&w$v.y===w$l.y},w$c.intersects=function(w$v,w$l,w$L,w$A){return!!(w$c.equals(w$v,w$l)&&w$c.equals(w$L,w$A)||w$c.equals(w$v,w$A)&&w$c.equals(w$L,w$l))||0<w$c.area(w$v,w$l,w$L)!=0<w$c.area(w$v,w$l,w$A)&&0<w$c.area(w$L,w$A,w$v)!=0<w$c.area(w$L,w$A,w$l)},w$c.intersectsPolygon=function(w$v,w$l){var w$L=w$v;do{if(w$L.i!==w$v.i&&w$L.next.i!==w$v.i&&w$L.i!==w$l.i&&w$L.next.i!==w$l.i&&w$c.intersects(w$L,w$L.next,w$v,w$l))return!0;w$L=w$L.next}while(w$L!==w$v);return!1},w$c.locallyInside=function(w$v,w$l){return w$c.area(w$v.prev,w$v,w$v.next)<0?0<=w$c.area(w$v,w$l,w$v.next)&&0<=w$c.area(w$v,w$v.prev,w$l):w$c.area(w$v,w$l,w$v.prev)<0||w$c.area(w$v,w$v.next,w$l)<0},w$c.middleInside=function(w$v,w$l){for(var w$L=w$v,w$A=!1,w$x=(w$v.x+w$l.x)/2,w$m=(w$v.y+w$l.y)/2;w$L.y>w$m!=w$L.next.y>w$m&&w$L.next.y!==w$L.y&&w$x<(w$L.next.x-w$L.x)*(w$m-w$L.y)/(w$L.next.y-w$L.y)+w$L.x&&(w$A=!w$A),(w$L=w$L.next)!==w$v;);return w$A},w$c.splitPolygon=function(w$v,w$l){var w$L=new w$xv(w$v.i,w$v.x,w$v.y),w$A=new w$xv(w$l.i,w$l.x,w$l.y),w$x=w$v.next,w$m=w$l.prev;return(w$v.next=w$l).prev=w$v,(w$L.next=w$x).prev=w$L,(w$A.next=w$L).prev=w$A,(w$m.next=w$A).prev=w$m,w$A},w$c.insertNode=function(w$v,w$l,w$L,w$A){var w$x=new w$xv(w$v,w$l,w$L);return w$A?(w$x.next=w$A.next,(w$x.prev=w$A).next.prev=w$x,w$A.next=w$x):(w$x.prev=w$x).next=w$x,w$x},w$c.removeNode=function(w$v){w$v.next.prev=w$v.prev,w$v.prev.next=w$v.next,w$v.prevZ&&(w$v.prevZ.nextZ=w$v.nextZ),w$v.nextZ&&(w$v.nextZ.prevZ=w$v.prevZ)},w$c.signedArea=function(w$v,w$l,w$L,w$A){for(var w$x=0,w$m=w$l,w$Z=w$L-w$A;w$m<w$L;w$m+=w$A)w$x+=(w$v[w$Z]-w$v[w$m])*(w$v[w$m+1]+w$v[w$Z+1]),w$Z=w$m;return w$x},w$c}(),w$xv=function(){function w$v(w$v,w$l,w$L){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=w$v,this.x=w$l,this.y=w$L,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return w$K(w$v,"laya.webgl.shapes.EarcutNode"),w$v}(),w$mv=(function(){function w$v(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){this.lineWidth=w$v,this.lineColor=w$l,this.lineAlpha=w$L,this.fillColor=w$A,this.fillAlpha=w$x,this.shape=w$Z,this.fill=w$m}w$K(w$v,"laya.webgl.shapes.GeometryData");var w$l=w$v.prototype;w$l.clone=function(){return new w$v(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},w$l.getIndexData=function(){return null},w$l.getVertexData=function(){return null},w$l.destroy=function(){this.shape=null}}(),function(){function w$v(w$v){if(w$v instanceof Float32Array)this.points=w$v;else if(w$v instanceof Array){w$v.length;this.points=new Float32Array(w$v)}}w$K(w$v,"laya.webgl.shapes.Vertex");var w$l=w$v.prototype;w$w.imps(w$l,{"laya.webgl.shapes.IShape":!0}),w$l.getData=function(w$v,w$l,w$L){},w$l.needUpdate=function(w$v){return!1},w$l.rebuild=function(w$v){},w$l.setMatrix=function(w$v){}}(),function(){function w$e(w$v){void 0===w$v&&(w$v=1e4),this._renderType=w$v}w$K(w$e,"laya.webgl.submit.Submit");var w$v=w$e.prototype;return w$w.imps(w$v,{"laya.webgl.submit.ISubmit":!0}),w$v.releaseRender=function(){var w$v=w$e._cache;(w$v[w$v._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},w$v.getRenderType=function(){return this._renderType},w$v.renderSubmit=function(){if(0===this._numEle)return 1;var w$v=this.shaderValue.textureHost;if(w$v){var w$l=w$v.source;if(!w$v.bitmap||!w$l)return 1;this.shaderValue.texture=w$l,w$v.alphaTexture&&w$v.alphaTexture.source&&(this.shaderValue.texture1=w$v.alphaTexture.source)}this._vb.bind_upload(this._ib);var w$L=w$Xv.mainContext;return this.shaderValue.upload(),w$p.activeBlendFunction!==this._blendFn&&(w$L.enable(3042),this._blendFn(w$L),w$p.activeBlendFunction=this._blendFn),w$M.drawCall++,w$M.trianglesFaces+=this._numEle/3,w$L.drawElements(4,this._numEle,5123,this._startIdx),1},w$e.__init__=function(){var w$v=w$e.RENDERBASE=new w$e(-1);w$v.shaderValue=new w$gv(0,0),w$v.shaderValue.ALPHA=-1234},w$e.createSubmit=function(w$v,w$l,w$L,w$A,w$x){var w$m=w$e._cache._length?w$e._cache[--w$e._cache._length]:new w$e;null==w$L&&((w$L=w$m._selfVb||(w$m._selfVb=w$zv.create(-1))).clear(),w$A=0),w$m._ib=w$l,w$m._vb=w$L,w$m._startIdx=w$A*w$cv.BYTES_PIDX,w$m._numEle=0;var w$Z=w$v._nBlendType;w$m._blendFn=w$v._targets?w$p.targetFns[w$Z]:w$p.fns[w$Z],w$m.shaderValue=w$x,w$m.shaderValue.setValue(w$v._shader2D);var w$O=w$v._shader2D.filters;return w$O&&w$m.shaderValue.setFilters(w$O),w$m},w$e.createShape=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z=w$e._cache._length?w$e._cache[--w$e._cache._length]:new w$e;w$Z._ib=w$l,w$Z._vb=w$L,w$Z._numEle=w$A,w$Z._startIdx=w$x,w$Z.shaderValue=w$m,w$Z.shaderValue.setValue(w$v._shader2D);var w$O=w$v._nBlendType;return w$Z._blendFn=w$v._targets?w$p.targetFns[w$O]:w$p.fns[w$O],w$Z},w$e.TYPE_2D=1e4,w$e.TYPE_CANVAS=10003,w$e.TYPE_CMDSETRT=10004,w$e.TYPE_CUSTOM=10005,w$e.TYPE_BLURRT=10006,w$e.TYPE_CMDDESTORYPRERT=10007,w$e.TYPE_DISABLESTENCIL=10008,w$e.TYPE_OTHERIBVB=10009,w$e.TYPE_PRIMITIVE=10010,w$e.TYPE_RT=10011,w$e.TYPE_BLUR_RT=10012,w$e.TYPE_TARGET=10013,w$e.TYPE_CHANGE_VALUE=10014,w$e.TYPE_SHAPE=10015,w$e.TYPE_TEXTURE=10016,w$e.TYPE_FILLTEXTURE=10017,w$e.RENDERBASE=null,w$e._cache=((w$e._cache=[])._length=0,w$e._cache),w$e}()),w$Zv=function(){function w$A(){this.fun=null,this.args=null}w$K(w$A,"laya.webgl.submit.SubmitCMD");var w$v=w$A.prototype;return w$w.imps(w$v,{"laya.webgl.submit.ISubmit":!0}),w$v.renderSubmit=function(){return this.fun.apply(null,this.args),1},w$v.getRenderType=function(){return 0},w$v.releaseRender=function(){var w$v=w$A._cache;w$v[w$v._length++]=this},w$A.create=function(w$v,w$l){var w$L=w$A._cache._length?w$A._cache[--w$A._cache._length]:new w$A;return w$L.fun=w$l,w$L.args=w$v,w$L},w$A._cache=((w$A._cache=[])._length=0,w$A._cache),w$A}(),w$Ov=function(){function w$l(){this.variables={}}w$K(w$l,"laya.webgl.submit.SubmitCMDScope");var w$v=w$l.prototype;return w$v.getValue=function(w$v){return this.variables[w$v]},w$v.addValue=function(w$v,w$l){return this.variables[w$v]=w$l},w$v.setValue=function(w$v,w$l){return this.variables.hasOwnProperty(w$v)?this.variables[w$v]=w$l:null},w$v.clear=function(){for(var w$v in this.variables)delete this.variables[w$v]},w$v.recycle=function(){this.clear(),w$l.POOL.push(this)},w$l.create=function(){var w$v=w$l.POOL.pop();return w$v||(w$v=new w$l),w$v},w$l.POOL=[],w$l}(),w$ev=function(){function w$o(){this.offset=0,this.startIndex=0,this._mat=w$T.create()}w$K(w$o,"laya.webgl.submit.SubmitOtherIBVB");var w$v=w$o.prototype;return w$w.imps(w$v,{"laya.webgl.submit.ISubmit":!0}),w$v.releaseRender=function(){var w$v=w$o._cache;(w$v[w$v._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},w$v.getRenderType=function(){return 10009},w$v.renderSubmit=function(){var w$v=this._shaderValue.textureHost;if(w$v){var w$l=w$v.source;if(!w$v.bitmap||!w$l)return 1;this._shaderValue.texture=w$l}this._vb.bind_upload(this._ib);var w$L=w$Jv.worldMatrix4,w$A=w$T.TEMP;w$T.mulPre(this._mat,w$L[0],w$L[1],w$L[4],w$L[5],w$L[12],w$L[13],w$A);var w$x=w$Jv.worldMatrix4=w$o.tempMatrix4;w$x[0]=w$A.a,w$x[1]=w$A.b,w$x[4]=w$A.c,w$x[5]=w$A.d,w$x[12]=w$A.tx,w$x[13]=w$A.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var w$m=w$Xv.mainContext;return w$p.activeBlendFunction!==this._blendFn&&(w$m.enable(3042),this._blendFn(w$m),w$p.activeBlendFunction=this._blendFn),w$M.drawCall++,w$M.trianglesFaces+=this._numEle/3,w$m.drawElements(4,this._numEle,5123,this.startIndex),w$Jv.worldMatrix4=w$L,w$qv.activeShader=null,1},w$o.create=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e){void 0===w$e&&(w$e=0);var w$$=w$o._cache._length?w$o._cache[--w$o._cache._length]:new w$o;w$$._ib=w$L,w$$._vb=w$l,w$$._numEle=w$A,w$$._shader=w$x,w$$._shaderValue=w$m;var w$_=w$v._nBlendType;switch(w$$._blendFn=w$v._targets?w$p.targetFns[w$_]:w$p.fns[w$_],w$e){case 0:w$$.offset=0,w$$.startIndex=w$O/(w$cv.BYTES_PE*w$l.vertexStride)*1.5,w$$.startIndex*=w$cv.BYTES_PIDX;break;case 1:w$$.startIndex=w$Z,w$$.offset=w$O}return w$$},w$o._cache=((w$o._cache=[])._length=0,w$o._cache),w$o.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],w$o}(),w$$v=function(){function w$L(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new w$V,this.screenRect=new w$V}w$K(w$L,"laya.webgl.submit.SubmitScissor");var w$v=w$L.prototype;return w$w.imps(w$v,{"laya.webgl.submit.ISubmit":!0}),w$v._scissor=function(w$v,w$l,w$L,w$A){var w$x=w$Jv.worldMatrix4,w$m=w$x[0],w$Z=w$x[5],w$O=w$x[12],w$e=w$x[13];if(w$A*=w$Z,(w$L*=w$m)<1||w$A<1)return!1;var w$$=(w$v=w$v*w$m+w$O)+w$L,w$_=(w$l=w$l*w$Z+w$e)+w$A;w$v<0&&(w$L=w$$-(w$v=0)),w$l<0&&(w$A=w$_-(w$l=0));var w$o=w$Jv.worldClipRect;if(w$v=Math.max(w$v,w$o.x),w$l=Math.max(w$l,w$o.y),w$L=Math.min(w$$,w$o.right)-w$v,w$A=Math.min(w$_,w$o.bottom)-w$l,w$L<1||w$A<1)return!1;var w$K=w$Jv.worldScissorTest;return this.screenRect.copyFrom(w$o),w$o.x=w$v,w$o.y=w$l,w$o.width=w$L,w$o.height=w$A,w$Jv.worldScissorTest=!0,w$l=w$Jv.height-w$l-w$A,w$Xv.mainContext.scissor(w$v,w$l,w$L,w$A),w$Xv.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),w$K?(w$l=w$Jv.height-this.screenRect.y-this.screenRect.height,w$Xv.mainContext.scissor(this.screenRect.x,w$l,this.screenRect.width,this.screenRect.height),w$Xv.mainContext.enable(3089)):(w$Xv.mainContext.disable(3089),w$Jv.worldScissorTest=!1),w$o.copyFrom(this.screenRect),!0},w$v._scissorWithTagart=function(w$v,w$l,w$L,w$A){if(w$L<1||w$A<1)return!1;var w$x=w$v+w$L,w$m=w$l+w$A;w$v<0&&(w$L=w$x-(w$v=0)),w$l<0&&(w$A=w$m-(w$l=0));var w$Z=w$Jv.worldClipRect;if(w$v=Math.max(w$v,w$Z.x),w$l=Math.max(w$l,w$Z.y),w$L=Math.min(w$x,w$Z.right)-w$v,w$A=Math.min(w$m,w$Z.bottom)-w$l,w$L<1||w$A<1)return!1;var w$O=w$Jv.worldScissorTest;return this.screenRect.copyFrom(w$Z),w$Jv.worldScissorTest=!0,w$Z.x=w$v,w$Z.y=w$l,w$Z.width=w$L,w$Z.height=w$A,w$l=w$Jv.height-w$l-w$A,w$Xv.mainContext.scissor(w$v,w$l,w$L,w$A),w$Xv.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),w$O?(w$l=w$Jv.height-this.screenRect.y-this.screenRect.height,w$Xv.mainContext.scissor(this.screenRect.x,w$l,this.screenRect.width,this.screenRect.height),w$Xv.mainContext.enable(3089)):(w$Xv.mainContext.disable(3089),w$Jv.worldScissorTest=!1),w$Z.copyFrom(this.screenRect),!0},w$v.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},w$v.getRenderType=function(){return 0},w$v.releaseRender=function(){var w$v=w$L._cache;(w$v[w$v._length++]=this).context=null},w$L.create=function(w$v){var w$l=w$L._cache._length?w$L._cache[--w$L._cache._length]:new w$L;return w$l.context=w$v,w$l},w$L._cache=((w$L._cache=[])._length=0,w$L._cache),w$L}(),w$_v=function(){function w$e(){this.step=0,this.blendMode=null,this.level=0}w$K(w$e,"laya.webgl.submit.SubmitStencil");var w$v=w$e.prototype;return w$w.imps(w$v,{"laya.webgl.submit.ISubmit":!0}),w$v.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},w$v.getRenderType=function(){return 0},w$v.releaseRender=function(){var w$v=w$e._cache;w$v[w$v._length++]=this},w$v.do1=function(){var w$v=w$Xv.mainContext;w$v.enable(2960),w$v.clear(1024),w$v.colorMask(!1,!1,!1,!1),w$v.stencilFunc(514,this.level,255),w$v.stencilOp(7680,7680,7682)},w$v.do2=function(){var w$v=w$Xv.mainContext;w$v.stencilFunc(514,this.level+1,255),w$v.colorMask(!0,!0,!0,!0),w$v.stencilOp(7680,7680,7680)},w$v.do3=function(){var w$v=w$Xv.mainContext;w$v.colorMask(!0,!0,!0,!0),w$v.stencilOp(7680,7680,7680),w$v.clear(1024),w$v.disable(2960)},w$v.do4=function(){var w$v=w$Xv.mainContext;0==this.level&&(w$v.enable(2960),w$v.clear(1024)),w$v.colorMask(!1,!1,!1,!1),w$v.stencilFunc(519,0,255),w$v.stencilOp(7680,7680,7682)},w$v.do5=function(){var w$v=w$Xv.mainContext;w$v.stencilFunc(514,this.level,255),w$v.colorMask(!0,!0,!0,!0),w$v.stencilOp(7680,7680,7680)},w$v.do6=function(){var w$v=w$Xv.mainContext;w$p.targetFns[w$p.TOINT[this.blendMode]](w$v)},w$v.do7=function(){var w$v=w$Xv.mainContext;w$v.colorMask(!1,!1,!1,!1),w$v.stencilOp(7680,7680,7683)},w$v.do8=function(){var w$v=w$Xv.mainContext;w$v.colorMask(!0,!0,!0,!0),w$v.stencilFunc(514,this.level,255),w$v.stencilOp(7680,7680,7680)},w$e.restore=function(w$v,w$l,w$L,w$A,w$x){var w$m;if((w$v._renderKey=0)<w$e._mask&&w$e._mask--,0==w$e._mask)w$m=laya.webgl.submit.SubmitStencil.create(3),w$v.addRenderObject(w$m),w$v._curSubmit=w$mv.RENDERBASE;else{w$m=laya.webgl.submit.SubmitStencil.create(7),w$v.addRenderObject(w$m);var w$Z=w$v._vb;w$Z._byteLength;if(w$dv.fillRectImgVb(w$Z,null,w$l.x,w$l.y,w$l.width,w$l.height,w$a.DEF_UV,w$L,w$A,w$x,0,0)){w$v._shader2D.glTexture=null;var w$O=w$v._curSubmit=w$mv.createSubmit(w$v,w$v._ib,w$Z,(w$Z._byteLength-64)/32*3,w$gv.create(2,0));w$O.shaderValue.ALPHA=1,w$v._submits[w$v._submits._length++]=w$O,w$v._curSubmit._numEle+=6,w$v._curSubmit=w$mv.RENDERBASE}else alert("clipRect calc stencil rect error");w$m=laya.webgl.submit.SubmitStencil.create(8),w$v.addRenderObject(w$m)}},w$e.restore2=function(w$v,w$l){var w$L;(w$v._renderKey=0)<w$e._mask&&w$e._mask--,0==w$e._mask?(w$L=laya.webgl.submit.SubmitStencil.create(3),w$v.addRenderObject(w$L),w$v._curSubmit=w$mv.RENDERBASE):(w$L=laya.webgl.submit.SubmitStencil.create(7),w$v.addRenderObject(w$L),w$v._submits[w$v._submits._length++]=w$l,w$L=laya.webgl.submit.SubmitStencil.create(8),w$v.addRenderObject(w$L))},w$e.create=function(w$v){var w$l=w$e._cache._length?w$e._cache[--w$e._cache._length]:new w$e;return 5==(w$l.step=w$v)&&++w$e._mask,w$l.level=w$e._mask,w$l},w$e._cache=((w$e._cache=[])._length=0,w$e._cache),w$e._mask=0,w$e}(),w$ov=function(){function w$O(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}w$K(w$O,"laya.webgl.submit.SubmitTarget");var w$v=w$O.prototype;return w$w.imps(w$v,{"laya.webgl.submit.ISubmit":!0}),w$v.renderSubmit=function(){this._vb.bind_upload(this._ib);var w$v=this.scope.getValue(this.proName);return w$v&&(this.shaderValue.texture=w$v.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[w$v.width,w$v.height]),this.shaderValue.upload(),this.blend(),w$M.drawCall++,w$M.trianglesFaces+=this._numEle/3,w$Xv.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},w$v.blend=function(){if(w$p.activeBlendFunction!==w$p.fns[this.blendType]){var w$v=w$Xv.mainContext;w$v.enable(3042),w$p.fns[this.blendType](w$v),w$p.activeBlendFunction=w$p.fns[this.blendType]}},w$v.getRenderType=function(){return 0},w$v.releaseRender=function(){var w$v=w$O._cache;(w$v[w$v._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},w$O.create=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z=w$O._cache._length?w$O._cache[--w$O._cache._length]:new w$O;return w$Z._ib=w$l,w$Z._vb=w$L,w$Z.proName=w$m,w$Z._startIdx=w$A*w$cv.BYTES_PIDX,w$Z._numEle=0,w$Z.blendType=w$v._nBlendType,w$Z.shaderValue=w$x,w$Z.shaderValue.setValue(w$v._shader2D),w$Z},w$O._cache=((w$O._cache=[])._length=0,w$O._cache),w$O}(),w$Kv=function(){function w$v(){this._sourceStr=null}w$K(w$v,"laya.webgl.text.CharSegment");var w$l=w$v.prototype;return w$w.imps(w$l,{"laya.webgl.text.ICharSegment":!0}),w$l.textToSpit=function(w$v){this._sourceStr=w$v},w$l.getChar=function(w$v){return this._sourceStr.charAt(w$v)},w$l.getCharCode=function(w$v){return this._sourceStr.charCodeAt(w$v)},w$l.length=function(){return this._sourceStr.length},w$v}(),w$rv=function(){var w$v;function w$M(){}return w$K(w$M,"laya.webgl.text.DrawText"),w$M.__init__=function(){w$M._charsTemp=new Array,w$M._drawValue=new w$v,w$M._charSeg=new w$Kv},w$M.customCharSeg=function(w$v){w$M._charSeg=w$v},w$M.getChar=function(w$v,w$l,w$L){var w$A=w$Sv.createOneChar(w$v,w$L);return-1!=w$l&&(w$M._charsCache[w$l]=w$A),w$A},w$M._drawSlow=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$,w$_,w$o,w$K,w$r,w$G){var w$c,w$d,w$C=w$M._drawValue.value(w$m,w$O,w$e,w$$,w$K,w$r,w$G),w$J=0,w$B=0,w$X=w$M._charsTemp,w$f=0,w$w=NaN;if(w$A)for(w$X.length=w$A.length,w$J=0,w$B=w$A.length;w$J<w$B;w$J++)(w$d=w$A[w$J])&&(w$w=w$d.charNum+w$C.txtID,w$X[w$J]=w$c=w$M._charsCache[w$w]||w$M.getChar(w$d.char,w$w,w$C),w$c.active());else{var w$H=w$L instanceof laya.utils.WordText?w$L.toString():w$L;if(w$t.CharacterCache){w$M._charSeg.textToSpit(w$H);var w$g=w$M._charSeg.length();for(w$J=0,w$B=w$X.length=w$g;w$J<w$B;w$J++)w$w=w$M._charSeg.getCharCode(w$J)+w$C.txtID,w$X[w$J]=w$c=w$M._charsCache[w$w]||w$M.getChar(w$M._charSeg.getChar(w$J),w$w,w$C),w$c.active(),w$f+=w$c.cw}else w$X.length=0,(w$c=w$M.getChar(w$H,-1,w$C)).active(),w$f+=w$c.cw,w$X[0]=w$c}var w$T=0;null!==w$Z&&"left"!==w$Z&&(w$T=-("center"==w$Z?w$f/2:w$f));var w$h,w$V,w$k=NaN,w$Q=0;if(w$A)for(w$J=0,w$B=w$X.length;w$J<w$B;w$J++)w$c=w$X[w$J],w$d=w$A[w$J],w$c&&w$d&&!w$c.isSpace&&(w$k=w$c.borderSize,w$h=w$c.texture,w$l._drawText(w$h,w$_+w$T+w$d.x*w$K-w$k,w$o+w$d.y*w$r-w$k,w$h.width,w$h.height,w$x,0,0,0,0));else{for(w$J=0,w$B=w$X.length;w$J<w$B;w$J++)(w$c=w$X[w$J])&&!w$c.isSpace&&(w$k=w$c.borderSize,w$h=w$c.texture,w$l._drawText(w$h,w$_+w$T-w$k,w$o-w$k,w$h.width,w$h.height,w$x,0,0,0,0),w$v&&((w$V=w$v[w$Q++])||(w$V=w$v[w$Q-1]=[]),w$V[0]=w$h,w$V[1]=w$T-w$k,w$V[2]=-w$k)),w$T+=w$c.cw;w$v&&(w$v.length=w$Q)}},w$M._drawFast=function(w$v,w$l,w$L,w$A,w$x){for(var w$m,w$Z,w$O=0,w$e=w$v.length;w$O<w$e;w$O++)(w$m=(w$Z=w$v[w$O])[0]).active(),w$l._drawText(w$m,w$A+w$Z[1],w$x+w$Z[2],w$m.width,w$m.height,w$L,0,0,0,0)},w$M.drawText=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$,w$_,w$o){if(void 0===w$o&&(w$o=0),!(w$l&&0===w$l.length||w$L&&0===w$L.length)){var w$K=w$A.a,w$r=w$A.d;(0!==w$A.b||0!==w$A.c)&&(w$K=w$r=1);var w$G=1!==w$K||1!==w$r;if(w$G&&w$w.stage.transform){var w$c=w$w.stage.transform;w$G=w$c.a===w$K&&w$c.d===w$r}else w$G=!1;if(w$G){var w$d=(w$A=w$A.copyTo(w$Hv._tmpMatrix)).tx,w$C=w$A.ty;w$A.scale(1/w$K,1/w$r),w$A._checkTransform(),w$$*=w$K,w$_*=w$r,w$$+=w$d-w$A.tx,w$_+=w$C-w$A.ty}else w$K=w$r=1;if(w$L)w$M._drawSlow(null,w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$,w$_,w$K,w$r,w$o);else{if(null===w$l.toUpperCase){var w$J=w$K+1e5*w$r,w$B=w$l;return void(w$B.changed||w$B.id!==w$J?(w$B.id=w$J,w$B.changed=!1,w$M._drawSlow(w$B.save,w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$,w$_,w$K,w$r,w$o)):w$M._drawFast(w$B.save,w$v,w$A,w$$,w$_))}var w$X=w$l+w$x.toString()+w$Z+w$O+w$e+w$K+w$r+w$m,w$f=w$M._textsCache[w$X];w$t.CharacterCache?w$f?w$M._drawFast(w$f,w$v,w$A,w$$,w$_):(w$M._textsCache.__length||(w$M._textsCache.__length=0),w$M._textsCache.__length>w$H.WebGLTextCacheCount&&((w$M._textsCache={}).__length=0,w$M._curPoolIndex=0),w$M._textCachesPool[w$M._curPoolIndex]?(w$f=w$M._textsCache[w$X]=w$M._textCachesPool[w$M._curPoolIndex]).length=0:w$M._textCachesPool[w$M._curPoolIndex]=w$f=w$M._textsCache[w$X]=[],w$M._textsCache.__length++,w$M._curPoolIndex++,w$M._drawSlow(w$f,w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$,w$_,w$K,w$r,w$o)):w$M._drawSlow(w$f,w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$,w$_,w$K,w$r,w$o)}}},w$M._charsTemp=null,w$M._textCachesPool=[],w$M._curPoolIndex=0,w$M._charsCache={},w$M._textsCache={},w$M._drawValue=null,w$M.d=[],w$M._charSeg=null,w$M.__init$=function(){w$v=function(){function w$e(){}return w$K(w$e,""),w$e.prototype.value=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){this.font=w$v,this.fillColor=w$l,this.borderColor=w$L,this.lineWidth=w$A,this.scaleX=w$x,this.scaleY=w$m,this.underLine=w$Z;var w$O=w$v.toString()+w$x+w$m+w$A+(w$l?w$l.toLowerCase():" ")+(w$L?w$L.toLowerCase():" ")+w$Z;return this.txtID=w$e._keymap[w$O],this.txtID||(this.txtID=1e-7*++w$e._keymapCount,w$e._keymap[w$O]=this.txtID),this},w$e.clear=function(){w$e._keymap={},w$e._keymapCount=1},w$e._keymap={},w$e._keymapCount=1,w$e}()},w$M}(),w$Gv=function(){function w$x(w$v){this._index=0,this._size=14,this._italic=-2,w$x._cache2=w$x._cache2||[],this.setFont(w$v||"14px Arial")}w$K(w$x,"laya.webgl.text.FontInContext");var w$v=w$x.prototype;return w$v.setFont=function(w$v){var w$l=w$x._cache2[w$v];if(w$l)this._words=w$l[0],this._size=w$l[1];else{this._words=w$v.split(" ");for(var w$L=0,w$A=this._words.length;w$L<w$A;w$L++)if(0<this._words[w$L].indexOf("px")){this._index=w$L;break}this._size=parseInt(this._words[this._index]),w$x._cache2[w$v]=[this._words,this._size]}this._text=null,this._italic=-2},w$v.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},w$v.hasType=function(w$v){for(var w$l=0,w$L=this._words.length;w$l<w$L;w$l++)if(this._words[w$l]===w$v)return w$l;return-1},w$v.removeType=function(w$v){for(var w$l=0,w$L=this._words.length;w$l<w$L;w$l++)if(this._words[w$l]===w$v){this._words.splice(w$l,1),this._index>w$l&&this._index--;break}this._text=null,this._italic=-2},w$v.copyTo=function(w$v){return w$v._text=this._text,w$v._size=this._size,w$v._index=this._index,w$v._words=this._words.slice(),w$v._italic=-2,w$v},w$v.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},w$A(0,w$v,"size",function(){return this._size},function(w$v){this._size=w$v,this._words[this._index]=w$v+"px",this._text=null}),w$x.create=function(w$v){var w$l=w$x._cache[w$v];return w$l||(w$l=w$x._cache[w$v]=new w$x(w$v))},w$x.EMPTY=new w$x,w$x._cache={},w$x._cache2=null,w$x}(),w$cv=function(){function w$v(){}return w$K(w$v,"laya.webgl.utils.CONST3D2D"),w$v.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],w$v.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],w$v.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],w$v._TMPARRAY=[],w$v._OFFSETX=0,w$v._OFFSETY=0,w$Z(w$v,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),w$v}(),w$dv=function(){function w$G(){}return w$K(w$G,"laya.webgl.utils.GlUtils"),w$G.make2DProjection=function(w$v,w$l,w$L){return[2/w$v,0,0,0,0,-2/w$l,0,0,0,0,2/w$L,0,-1,1,0,1]},w$G.fillIBQuadrangle=function(w$v,w$l){if(65535/4<w$l)throw Error("IBQuadrangle count:"+w$l+" must<:"+Math.floor(65535/4));w$l=Math.floor(w$l),w$v._resizeBuffer(6*(w$l+1)*2,!1),w$v.byteLength=w$v.bufferLength;for(var w$L=w$v.getUint16Array(),w$A=0,w$x=0;w$x<w$l;w$x++)w$L[w$A++]=4*w$x,w$L[w$A++]=4*w$x+2,w$L[w$A++]=4*w$x+1,w$L[w$A++]=4*w$x,w$L[w$A++]=4*w$x+3,w$L[w$A++]=4*w$x+2;return w$v.setNeedUpload(),!0},w$G.expandIBQuadrangle=function(w$v,w$l){w$v.bufferLength>=6*w$l*2||w$G.fillIBQuadrangle(w$v,w$l)},w$G.mathCeilPowerOfTwo=function(w$v){return w$v--,w$v|=w$v>>1,w$v|=w$v>>2,w$v|=w$v>>4,w$v|=w$v>>8,w$v|=w$v>>16,++w$v},w$G.fillQuadrangleImgVb=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){var w$e=16+(w$v._byteLength>>2);w$v.byteLength=w$e<<2;var w$$=w$v.getFloat32Array();w$$[(w$e-=16)+2]=w$x[0],w$$[w$e+3]=w$x[1],w$$[w$e+6]=w$x[2],w$$[w$e+7]=w$x[3],w$$[w$e+10]=w$x[4],w$$[w$e+11]=w$x[5],w$$[w$e+14]=w$x[6],w$$[w$e+15]=w$x[7];var w$_=w$m.a,w$o=w$m.b,w$K=w$m.c,w$r=w$m.d;if(1!==w$_||0!==w$o||0!==w$K||1!==w$r){w$m.bTransform=!0;var w$G=w$m.tx+w$Z,w$c=w$m.ty+w$O;w$$[w$e]=(w$A[0]+w$l)*w$_+(w$A[1]+w$L)*w$K+w$G,w$$[w$e+1]=(w$A[0]+w$l)*w$o+(w$A[1]+w$L)*w$r+w$c,w$$[w$e+4]=(w$A[2]+w$l)*w$_+(w$A[3]+w$L)*w$K+w$G,w$$[w$e+5]=(w$A[2]+w$l)*w$o+(w$A[3]+w$L)*w$r+w$c,w$$[w$e+8]=(w$A[4]+w$l)*w$_+(w$A[5]+w$L)*w$K+w$G,w$$[w$e+9]=(w$A[4]+w$l)*w$o+(w$A[5]+w$L)*w$r+w$c,w$$[w$e+12]=(w$A[6]+w$l)*w$_+(w$A[7]+w$L)*w$K+w$G,w$$[w$e+13]=(w$A[6]+w$l)*w$o+(w$A[7]+w$L)*w$r+w$c}else w$m.bTransform=!1,w$l+=w$m.tx+w$Z,w$L+=w$m.ty+w$O,w$$[w$e]=w$l+w$A[0],w$$[w$e+1]=w$L+w$A[1],w$$[w$e+4]=w$l+w$A[2],w$$[w$e+5]=w$L+w$A[3],w$$[w$e+8]=w$l+w$A[4],w$$[w$e+9]=w$L+w$A[5],w$$[w$e+12]=w$l+w$A[6],w$$[w$e+13]=w$L+w$A[7];return w$v._upload=!0},w$G.fillTranglesVB=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){var w$O=(w$v._byteLength>>2)+w$A.length;w$v.byteLength=w$O<<2;var w$e=w$v.getFloat32Array();w$O-=w$A.length;for(var w$$=w$A.length,w$_=w$x.a,w$o=w$x.b,w$K=w$x.c,w$r=w$x.d,w$G=0;w$G<w$$;w$G+=4)if(w$e[w$O+w$G+2]=w$A[w$G+2],w$e[w$O+w$G+3]=w$A[w$G+3],1!==w$_||0!==w$o||0!==w$K||1!==w$r){w$x.bTransform=!0;var w$c=w$x.tx+w$m,w$d=w$x.ty+w$Z;w$e[w$O+w$G]=(w$A[w$G]+w$l)*w$_+(w$A[w$G+1]+w$L)*w$K+w$c,w$e[w$O+w$G+1]=(w$A[w$G]+w$l)*w$o+(w$A[w$G+1]+w$L)*w$r+w$d}else w$x.bTransform=!1,w$l+=w$x.tx+w$m,w$L+=w$x.ty+w$Z,w$e[w$O+w$G]=w$l+w$A[w$G],w$e[w$O+w$G+1]=w$L+w$A[w$G+1];return w$v._upload=!0},w$G.copyPreImgVb=function(w$v,w$l,w$L){var w$A=w$v._byteLength>>2;w$v.byteLength=w$A+16<<2;for(var w$x=w$v.getFloat32Array(),w$m=0,w$Z=w$A-16;w$m<4;w$m++)w$x[w$A]=w$x[w$Z]+w$l,++w$Z,w$x[++w$A]=w$x[w$Z]+w$L,++w$Z,w$x[++w$A]=w$x[w$Z],++w$Z,w$x[++w$A]=w$x[w$Z],++w$A,++w$Z;w$v._upload=!0},w$G.fillRectImgVb=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$,w$_,w$o,w$K){void 0===w$K&&(w$K=!1);var w$r,w$G,w$c,w$d,w$C,w$J,w$B,w$X,w$f,w$w,w$H,w$g,w$T,w$h,w$V,w$k,w$Q=1,w$M=w$O.a,w$P=w$O.b,w$I=w$O.c,w$t=w$O.d,w$a=w$l&&w$l.width<99999999;if(1!==w$M||0!==w$P||0!==w$I||1!==w$t?(w$O.bTransform=!0,0===w$P&&0===w$I&&(w$Q=23,w$f=w$x+w$L,w$w=w$m+w$A,w$r=w$M*w$L+(w$H=w$O.tx+w$e),w$c=w$M*w$f+w$H,w$G=w$t*w$A+(w$g=w$O.ty+w$$),w$d=w$t*w$w+w$g)):(w$Q=23,w$O.bTransform=!1,w$c=(w$r=w$L+w$O.tx+w$e)+w$x,w$d=(w$G=w$A+w$O.ty+w$$)+w$m),w$a&&(w$C=w$l.x,w$J=w$l.y,w$B=w$l.width+w$C,w$X=w$l.height+w$J),1!==w$Q){if(Math.min(w$r,w$c)>=w$B)return!1;if(Math.min(w$G,w$d)>=w$X)return!1;if(Math.max(w$c,w$r)<=w$C)return!1;if(Math.max(w$d,w$G)<=w$J)return!1}var w$q=w$v._byteLength>>2;w$v.byteLength=16+w$q<<2;var w$u=w$v.getFloat32Array();switch(w$u[2+w$q]=w$Z[0],w$u[3+w$q]=w$Z[1],w$u[6+w$q]=w$Z[2],w$u[7+w$q]=w$Z[3],w$u[10+w$q]=w$Z[4],w$u[11+w$q]=w$Z[5],w$u[14+w$q]=w$Z[6],w$u[15+w$q]=w$Z[7],w$Q){case 1:w$H=w$O.tx+w$e,w$g=w$O.ty+w$$;var w$R=w$M*w$L,w$N=w$I*w$A,w$b=w$t*w$A,w$j=w$P*w$L,w$F=w$M*(w$f=w$x+w$L),w$p=w$I*(w$w=w$m+w$A),w$Y=w$t*w$w,w$D=w$P*w$f;w$K?(w$T=w$R+w$N+w$H,w$V=Math.round(w$T)-w$T,w$h=w$b+w$j+w$g,w$k=Math.round(w$h)-w$h,w$u[w$q]=w$T+w$V,w$u[1+w$q]=w$h+w$k,w$u[4+w$q]=w$F+w$N+w$H+w$V,w$u[5+w$q]=w$b+w$D+w$g+w$k,w$u[8+w$q]=w$F+w$p+w$H+w$V,w$u[9+w$q]=w$Y+w$D+w$g+w$k,w$u[12+w$q]=w$R+w$p+w$H+w$V,w$u[13+w$q]=w$Y+w$j+w$g+w$k):(w$u[w$q]=w$R+w$N+w$H,w$u[1+w$q]=w$b+w$j+w$g,w$u[4+w$q]=w$F+w$N+w$H,w$u[5+w$q]=w$b+w$D+w$g,w$u[8+w$q]=w$F+w$p+w$H,w$u[9+w$q]=w$Y+w$D+w$g,w$u[12+w$q]=w$R+w$p+w$H,w$u[13+w$q]=w$Y+w$j+w$g);break;case 23:w$K?(w$T=w$r+w$_,w$V=Math.round(w$T)-w$T,w$h=w$G,w$k=Math.round(w$h)-w$h,w$u[w$q]=w$T+w$V,w$u[1+w$q]=w$h+w$k,w$u[4+w$q]=w$c+w$_+w$V,w$u[5+w$q]=w$G+w$k,w$u[8+w$q]=w$c+w$V,w$u[9+w$q]=w$d+w$k,w$u[12+w$q]=w$r+w$V,w$u[13+w$q]=w$d+w$k):(w$u[w$q]=w$r+w$_,w$u[1+w$q]=w$G,w$u[4+w$q]=w$c+w$_,w$u[5+w$q]=w$G,w$u[8+w$q]=w$c,w$u[9+w$q]=w$d,w$u[12+w$q]=w$r,w$u[13+w$q]=w$d)}return w$v._upload=!0},w$G.fillLineVb=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){var w$e=.5*w$Z,w$$=w$G._fillLineArray,w$_=-(w$A-w$m),w$o=w$L-w$x,w$K=Math.sqrt(w$_*w$_+w$o*w$o);w$_/=w$K,w$o/=w$K,w$_*=w$e,w$o*=w$e,w$$[0]=w$L-w$_,w$$[1]=w$A-w$o,w$$[4]=w$L+w$_,w$$[5]=w$A+w$o,w$$[8]=w$x+w$_,w$$[9]=w$m+w$o,w$$[12]=w$x-w$_,w$$[13]=w$m-w$o,w$O&&w$O.transformPointArray(w$$,w$$);var w$r=16+(w$v._byteLength>>2);return w$v.byteLength=w$r<<2,w$v.insertData(w$$,w$r-16),!0},w$G._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w$G}(),w$Cv=(function(){function w$e(){}w$K(w$e,"laya.webgl.utils.MatirxArray"),w$e.ArrayMul=function(w$v,w$l,w$L){if(w$v)if(w$l)for(var w$A=NaN,w$x=NaN,w$m=NaN,w$Z=NaN,w$O=0;w$O<4;w$O++)w$A=w$v[w$O],w$x=w$v[w$O+4],w$m=w$v[w$O+8],w$Z=w$v[w$O+12],w$L[w$O]=w$A*w$l[0]+w$x*w$l[1]+w$m*w$l[2]+w$Z*w$l[3],w$L[w$O+4]=w$A*w$l[4]+w$x*w$l[5]+w$m*w$l[6]+w$Z*w$l[7],w$L[w$O+8]=w$A*w$l[8]+w$x*w$l[9]+w$m*w$l[10]+w$Z*w$l[11],w$L[w$O+12]=w$A*w$l[12]+w$x*w$l[13]+w$m*w$l[14]+w$Z*w$l[15];else w$e.copyArray(w$v,w$L);else w$e.copyArray(w$l,w$L)},w$e.copyArray=function(w$v,w$l){if(w$v&&w$l)for(var w$L=0;w$L<w$v.length;w$L++)w$l[w$L]=w$v[w$L]}}(),function(){function w$l(w$v,w$l,w$L){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=w$v,this._vb=new w$zv(w$v,35048),w$l&&this._vb._resizeBuffer(w$l,!1),this._ib=new w$Uv,w$L&&this._ib._resizeBuffer(w$L,!1)}w$K(w$l,"laya.webgl.utils.Mesh2D");var w$v=w$l.prototype;return w$v.cloneWithNewVB=function(){var w$v=new w$l(this._stride,0,0);return w$v._ib=this._ib,w$v._quadNum=this._quadNum,w$v._attribInfo=this._attribInfo,w$v},w$v.cloneWithNewVBIB=function(){var w$v=new w$l(this._stride,0,0);return w$v._attribInfo=this._attribInfo,w$v},w$v.getVBW=function(){return this._vb.setNeedUpload(),this._vb},w$v.getVBR=function(){return this._vb},w$v.getIBR=function(){return this._ib},w$v.getIBW=function(){return this._ib.setNeedUpload(),this._ib},w$v.createQuadIB=function(w$v){this._quadNum=w$v,this._ib._resizeBuffer(6*w$v*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var w$l=this._ib.getUint16Array(),w$L=0,w$A=0,w$x=0;w$x<w$v;w$x++)w$l[w$L++]=w$A,w$l[w$L++]=w$A+2,w$l[w$L++]=w$A+1,w$l[w$L++]=w$A,w$l[w$L++]=w$A+3,w$l[w$L++]=w$A+2,w$A+=4;this._ib.setNeedUpload()},w$v.setAttributes=function(w$v){if(this._attribInfo=w$v,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},w$v.getEleNum=function(){return this._ib.getBuffer().byteLength/2},w$v.releaseMesh=function(){},w$v.destroy=function(){},w$v.clearVB=function(){this._vb.clear()},w$l._gvaoid=0,w$l}()),w$Jv=function(){function w$x(){}return w$K(w$x,"laya.webgl.utils.RenderState2D"),w$x.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},w$x.mat2MatArray=function(w$v,w$l){var w$L=w$v,w$A=w$l;return w$A[0]=w$L.a,w$A[1]=w$L.b,w$A[2]=w$x.EMPTYMAT4_ARRAY[2],w$A[3]=w$x.EMPTYMAT4_ARRAY[3],w$A[4]=w$L.c,w$A[5]=w$L.d,w$A[6]=w$x.EMPTYMAT4_ARRAY[6],w$A[7]=w$x.EMPTYMAT4_ARRAY[7],w$A[8]=w$x.EMPTYMAT4_ARRAY[8],w$A[9]=w$x.EMPTYMAT4_ARRAY[9],w$A[10]=w$x.EMPTYMAT4_ARRAY[10],w$A[11]=w$x.EMPTYMAT4_ARRAY[11],w$A[12]=w$L.tx,w$A[13]=w$L.ty,w$A[14]=w$x.EMPTYMAT4_ARRAY[14],w$A[15]=w$x.EMPTYMAT4_ARRAY[15],w$l},w$x.restoreTempArray=function(){w$x.TEMPMAT4_ARRAY[0]=1,w$x.TEMPMAT4_ARRAY[1]=0,w$x.TEMPMAT4_ARRAY[4]=0,w$x.TEMPMAT4_ARRAY[5]=1,w$x.TEMPMAT4_ARRAY[12]=0,w$x.TEMPMAT4_ARRAY[13]=0},w$x.clear=function(){w$x.worldScissorTest=!1,w$x.worldShaderDefines=null,w$x.worldFilters=null,w$x.worldAlpha=1,w$x.worldClipRect.x=w$x.worldClipRect.y=0,w$x.worldClipRect.width=w$x.width,w$x.worldClipRect.height=w$x.height,w$x.curRenderTarget=null},w$x._MAXSIZE=99999999,w$x.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],w$x.worldMatrix4=w$x.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],w$x.worldAlpha=1,w$x.worldScissorTest=!1,w$x.worldFilters=null,w$x.worldShaderDefines=null,w$x.curRenderTarget=null,w$x.width=0,w$x.height=0,w$Z(w$x,["worldMatrix",function(){return this.worldMatrix=new w$T},"worldClipRect",function(){return this.worldClipRect=new w$V(0,0,99999999,99999999)}]),w$x}(),w$Bv=function(){var w$J,w$L;function w$B(w$v,w$l,w$L,w$A,w$x){var w$m=this;function w$Z(w$v){var w$l=[],w$L=new w$J(w$l);return w$m._compileToTree(w$L,w$v.split("\n"),0,w$l,w$x),w$L}var w$O=w$r.now();this._VS=w$Z(w$l),this._PS=w$Z(w$L),this._nameMap=w$A,2<w$r.now()-w$O&&console.log("ShaderCompile use time:"+(w$r.now()-w$O)+"  size:"+w$l.length+"/"+w$L.length)}w$K(w$B,"laya.webgl.utils.ShaderCompile");var w$v=w$B.prototype;return w$v._compileToTree=function(w$v,w$l,w$L,w$A,w$x){var w$m,w$Z,w$O,w$e,w$$,w$_,w$o,w$K=0,w$r=0,w$G=0,w$c=0;for(w$r=w$L;w$r<w$l.length;w$r++)if(!((w$O=w$l[w$r]).length<1)&&0!==(w$K=w$O.indexOf("//"))){if(0<=w$K&&(w$O=w$O.substr(0,w$K)),w$m=w$o||new w$J(w$A),w$o=null,w$m.text=w$O,w$m.noCompile=!0,0<=(w$K=w$O.indexOf("#"))){for(w$e="#",w$c=w$K+1,w$G=w$O.length;w$c<w$G;w$c++){var w$d=w$O.charAt(w$c);if(" "===w$d||"\t"===w$d||"\r"===w$d||"\n"===w$d||"?"===w$d)break;w$e+=w$d}switch(w$m.name=w$e){case"#ifdef":case"#ifndef":if(w$m.src=w$O,w$m.noCompile=null!=w$O.match(/[!&|()=<>]/),w$m.noCompile?console.log("function():Boolean{return "+w$O.substr(w$K+w$m.name.length)+"}"):(w$_=w$O.replace(/^\s*/,"").split(/\s+/),w$m.setCondition(w$_[1],"#ifdef"===w$e?1:2),w$m.text="//"+w$m.text),w$m.setParent(w$v),w$v=w$m,w$x)for(w$_=w$O.substr(w$c).split(w$B._splitToWordExps3),w$c=0;w$c<w$_.length;w$c++)(w$O=w$_[w$c]).length&&(w$x[w$O]=!0);continue;case"#if":if(w$m.src=w$O,w$m.noCompile=!0,w$m.setParent(w$v),w$v=w$m,w$x)for(w$_=w$O.substr(w$c).split(w$B._splitToWordExps3),w$c=0;w$c<w$_.length;w$c++)(w$O=w$_[w$c]).length&&"defined"!=w$O&&(w$x[w$O]=!0);continue;case"#else":w$m.src=w$O,w$Z=(w$v=w$v.parent).childs[w$v.childs.length-1],w$m.noCompile=w$Z.noCompile,w$m.noCompile||(w$m.condition=w$Z.condition,w$m.conditionType=1==w$Z.conditionType?2:1,w$m.text="//"+w$m.text+" "+w$Z.text+" "+w$m.conditionType),w$m.setParent(w$v),w$v=w$m;continue;case"#endif":w$Z=(w$v=w$v.parent).childs[w$v.childs.length-1],w$m.noCompile=w$Z.noCompile,w$m.noCompile||(w$m.text="//"+w$m.text),w$m.setParent(w$v);continue;case"#include":w$_=w$B.splitToWords(w$O,null);var w$C=w$B.includes[w$_[1]];if(!w$C)throw"ShaderCompile error no this include file:"+w$_[1];if((w$K=w$_[0].indexOf("?"))<0){w$m.setParent(w$v),w$O=w$C.getWith("with"==w$_[2]?w$_[3]:null),this._compileToTree(w$m,w$O.split("\n"),0,w$A,w$x),w$m.text="";continue}w$m.setCondition(w$_[0].substr(w$K+1),1),w$m.text=w$C.getWith("with"==w$_[2]?w$_[3]:null);break;case"#import":w$$=(w$_=w$B.splitToWords(w$O,null))[1],w$A.push({node:w$m,file:w$B.includes[w$$],ofs:w$m.text.length});continue}}else{if((w$Z=w$v.childs[w$v.childs.length-1])&&!w$Z.name){0<w$A.length&&w$B.splitToWords(w$O,w$Z),w$o=w$m,w$Z.text+="\n"+w$O;continue}0<w$A.length&&w$B.splitToWords(w$O,w$m)}w$m.setParent(w$v)}},w$v.createShader=function(w$v,w$l,w$L){var w$A={},w$x="";if(w$v)for(var w$m in w$v)w$x+="#define "+w$m+"\n",w$A[w$m]=!0;var w$Z=this._VS.toscript(w$A,[]),w$O=this._PS.toscript(w$A,[]);return(w$L||w$Ev.create)(w$x+w$Z.join("\n"),w$x+w$O.join("\n"),w$l,this._nameMap)},w$B._parseOne=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z={type:w$B.shaderParamsMap[w$L[w$A+1]],name:w$L[w$A+2],size:isNaN(parseInt(w$L[w$A+3]))?1:parseInt(w$L[w$A+3])};return w$m&&("attribute"==w$x?w$v.push(w$Z):w$l.push(w$Z)),":"==w$L[w$A+3]&&(w$Z.type=w$L[w$A+4],w$A+=2),w$A+=2},w$B.addInclude=function(w$v,w$l){if(!w$l||0===w$l.length)throw new Error("add shader include file err:"+w$v);if(w$B.includes[w$v])throw new Error("add shader include file err, has add:"+w$v);w$B.includes[w$v]=new w$L(w$l)},w$B.preGetParams=function(w$v,w$l){var w$L=[w$v,w$l],w$A={},w$x=[],w$m=[],w$Z={},w$O=[];w$A.attributes=w$x,w$A.uniforms=w$m,w$A.defines=w$Z;for(var w$e=0,w$$=0,w$_=0;w$_<2;w$_++){w$L[w$_]=w$L[w$_].replace(w$B._removeAnnotation,"");var w$o,w$K=w$L[w$_].match(w$B._reg);for(w$e=0,w$$=w$K.length;w$e<w$$;w$e++){var w$r=w$K[w$e];if("attribute"==w$r||"uniform"==w$r)w$e=w$B._parseOne(w$x,w$m,w$K,w$e,w$r,!0);else{if("#define"==w$r){w$O[w$r=w$K[++w$e]]=1;continue}if("#ifdef"==w$r){w$Z[w$o=w$K[++w$e]]=w$Z[w$o]||[];for(w$e++;w$e<w$$;w$e++)if("attribute"==(w$r=w$K[w$e])||"uniform"==w$r)w$e=w$B._parseOne(w$x,w$m,w$K,w$e,w$r,w$O[w$o]);else if("#else"==w$r)for(w$e++;w$e<w$$;w$e++)if("attribute"==(w$r=w$K[w$e])||"uniform"==w$r)w$e=w$B._parseOne(w$x,w$m,w$K,w$e,w$r,!w$O[w$o]);else if("#endif"==w$r)break}}}}return w$A},w$B.splitToWords=function(w$v,w$l){for(var w$L,w$A,w$x=[],w$m=-1,w$Z=0,w$O=w$v.length;w$Z<w$O;w$Z++)if(w$L=w$v.charAt(w$Z),0<=" \t=+-*/&%!<>()'\",;".indexOf(w$L)){if(0<=w$m&&1<w$Z-w$m&&(w$A=w$v.substr(w$m,w$Z-w$m),w$x.push(w$A)),'"'==w$L||"'"==w$L){var w$e=w$v.indexOf(w$L,w$Z+1);if(w$e<0)throw"Sharder err:"+w$v;w$x.push(w$v.substr(w$Z+1,w$e-w$Z-1)),w$Z=w$e,w$m=-1;continue}"("==w$L&&w$l&&0<w$x.length&&(w$A=w$x[w$x.length-1]+";","vec4;main;".indexOf(w$A)<0&&(w$l.useFuns+=w$A)),w$m=-1}else w$m<0&&(w$m=w$Z);return w$m<w$O&&1<w$O-w$m&&(w$A=w$v.substr(w$m,w$O-w$m),w$x.push(w$A)),w$x},w$B.IFDEF_NO=0,w$B.IFDEF_YES=1,w$B.IFDEF_ELSE=2,w$B.IFDEF_PARENT=3,w$B._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),w$B._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),w$B._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),w$B.includes={},w$Z(w$B,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),w$B.__init$=function(){w$J=function(){function w$L(w$v){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=w$v}w$K(w$L,"");var w$v=w$L.prototype;return w$v.setParent=function(w$v){w$v.childs.push(this),this.z=w$v.z+1,this.parent=w$v},w$v.setCondition=function(w$v,w$l){w$v&&(this.conditionType=w$l,w$v=w$v.replace(/(\s*$)/g,""),this.condition=function(){return this[w$v]},this.condition.__condition=w$v)},w$v.toscript=function(w$v,w$l){return this._toscript(w$v,w$l,++w$L.__id)},w$v._toscript=function(w$A,w$x,w$m){if(this.childs.length<1&&!this.text)return w$x;w$x.length;if(this.condition){var w$v=!!this.condition.call(w$A);if(2===this.conditionType&&(w$v=!w$v),!w$v)return w$x}if(this.text&&w$x.push(this.text),0<this.childs.length&&this.childs.forEach(function(w$v,w$l,w$L){w$v._toscript(w$A,w$x,w$m)}),0<this.includefiles.length&&0<this.useFuns.length)for(var w$l,w$L=0,w$Z=this.includefiles.length;w$L<w$Z;w$L++)this.includefiles[w$L].curUseID!=w$m&&0<(w$l=this.includefiles[w$L].file.getFunsScript(this.useFuns)).length&&(this.includefiles[w$L].curUseID=w$m,w$x[0]=w$l+w$x[0]);return w$x},w$L.__id=1,w$L}(),w$L=function(){function w$v(w$v){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=w$v;for(var w$l=0,w$L=0,w$A=0;!((w$l=w$v.indexOf("#begin",w$l))<0);){for(w$A=w$l+5;!((w$A=w$v.indexOf("#end",w$A))<0)&&"i"===w$v.charAt(w$A+4);)w$A+=5;if(w$A<0)throw"add include err,no #end:"+w$v;w$L=w$v.indexOf("\n",w$l);var w$x=w$B.splitToWords(w$v.substr(w$l,w$L-w$l),null);"code"==w$x[1]?this.codes[w$x[2]]=w$v.substr(w$L+1,w$A-w$L-1):"function"==w$x[1]&&(w$L=w$v.indexOf("function",w$l),w$L+="function".length,this.funs[w$x[3]]=w$v.substr(w$L+1,w$A-w$L-1),this.funnames+=w$x[3]+";"),w$l=w$A+1}}w$K(w$v,"");var w$l=w$v.prototype;return w$l.getWith=function(w$v){var w$l=w$v?this.codes[w$v]:this.script;if(!w$l)throw"get with error:"+w$v;return w$l},w$l.getFunsScript=function(w$v){var w$l="";for(var w$L in this.funs)0<=w$v.indexOf(w$L+";")&&(w$l+=this.funs[w$L]);return w$l},w$v}()},w$B}(),w$Xv=function(){function w$Z(){}return w$K(w$Z,"laya.webgl.WebGL"),w$Z._uint8ArraySlice=function(){for(var w$v=this.length,w$l=new Uint8Array(this.length),w$L=0;w$L<w$v;w$L++)w$l[w$L]=this[w$L];return w$l},w$Z._float32ArraySlice=function(){for(var w$v=this.length,w$l=new Float32Array(this.length),w$L=0;w$L<w$v;w$L++)w$l[w$L]=this[w$L];return w$l},w$Z._uint16ArraySlice=function(w$v){var w$l,w$L=arguments,w$A=0,w$x=0;if(0===w$L.length)for(w$A=this.length,w$l=new Uint16Array(w$A),w$x=0;w$x<w$A;w$x++)w$l[w$x]=this[w$x];else if(2===w$L.length){var w$m=w$L[0],w$Z=w$L[1];if(w$m<w$Z)for(w$A=w$Z-w$m,w$l=new Uint16Array(w$A),w$x=w$m;w$x<w$Z;w$x++)w$l[w$x-w$m]=this[w$x];else w$l=new Uint16Array(0)}return w$l},w$Z.expandContext=function(){var w$v=w$x.prototype,w$l=CanvasRenderingContext2D.prototype;w$l.fillTrangles=w$v.fillTrangles,w$sv.__int__(null),w$l.setIBVB=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$){void 0===w$e&&(w$e=0),void 0===w$$&&(w$$=0),null===w$L&&(this._ib=this._ib||w$Uv.QuadrangleIB,w$L=this._ib,w$dv.expandIBQuadrangle(w$L,w$A._byteLength/64+8)),this._setIBVB(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$)},w$l.fillTrangles=function(w$v,w$l,w$L,w$A,w$x){this._curMat=this._curMat||w$T.create(),this._vb=this._vb||w$zv.create(),this._ib||(this._ib=w$Uv.create(),w$dv.fillIBQuadrangle(this._ib,w$Z/4));var w$m=this._vb,w$Z=w$A.length>>4;w$dv.fillTranglesVB(w$m,w$l,w$L,w$A,w$x||this._curMat,0,0),w$dv.expandIBQuadrangle(this._ib,w$m._byteLength/64+8);var w$O=new w$gv(1,0);w$O.textureHost=w$v;var w$e=new w$nv("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");w$m._vertType=3,this._setIBVB(w$l,w$L,this._ib,w$m,6*w$Z,w$x,w$e,w$O,0,0)}},w$Z.enable=function(){if(w$r.__init__(),w$C.isConchApp&&!w$C.isConchWebGL)return w$f.skinAniSprite=function(){return new w$vv},w$Z.expandContext(),!1;if(w$f.getWebGLContext=function(w$v){for(var w$l,w$L=["webgl","experimental-webgl","webkit-3d","moz-webgl"],w$A=0;w$A<w$L.length;w$A++){try{w$l=w$v.getContext(w$L[w$A],{stencil:w$H.isStencil,alpha:w$H.isAlpha,antialias:w$H.isAntialias,premultipliedAlpha:w$H.premultipliedAlpha,preserveDrawingBuffer:w$H.preserveDrawingBuffer})}catch(w$v){}if(w$l)return w$l}return null},null==(w$Z.mainContext=w$f.getWebGLContext(w$C._mainCanvas)))return!1;if(w$C.isWebGL)return!0;w$c.create=function(w$v,w$l){return new w$vl(w$v,w$l)},w$d.create=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){return new w$Wv(w$v,w$l,w$L,w$A,w$x,w$m,w$Z)},w$C.WebGL=w$Z,w$C.isWebGL=!0,w$rv.__init__(),w$f.createRenderSprite=function(w$v,w$l){return new w$Tv(w$v,w$l)},w$f.createWebGLContext2D=function(w$v){return new w$Hv(w$v)},w$f.changeWebGLSize=function(w$v,w$l){laya.webgl.WebGL.onStageResize(w$v,w$l)},w$f.createGraphics=function(){return new w$wv};var w$v=w$f.createFilterAction;return w$f.createFilterAction=w$v||function(w$v){return new w$hv},w$f.clear=function(w$v){w$Jv.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var w$l=w$C.context.ctx,w$L=0==w$l._submits._length||w$H.preserveDrawingBuffer?w$G.create(w$v)._color:w$Q._wgColor;w$L&&w$l.clearBG(w$L[0],w$L[1],w$L[2],w$L[3]),w$Jv.clear()},w$f.addToAtlas=function(w$v,w$l){void 0===w$l&&(w$l=!1);var w$L=w$v.bitmap;w$C.optimizeTextureMemory(w$v.url,w$v)?w$w.__typeof(w$L,"laya.webgl.resource.IMergeAtlasBitmap")&&w$L.allowMerageInAtlas&&w$L.on("recovered",w$v,w$v.addTextureToAtlas):w$L.enableMerageInAtlas=!1},w$f.isAtlas=function(w$v){return w$v instanceof laya.webgl.atlas.AtlasWebGLCanvas},w$j._enable(),w$f.beginFlush=function(){for(var w$v=w$j.instance,w$l=w$v.getAtlaserCount(),w$L=0;w$L<w$l;w$L++){var w$A=w$v.getAtlaserByIndex(w$L).texture;w$A._flashCacheImageNeedFlush&&w$f.flashFlushImage(w$A)}},w$f.drawToCanvas=function(w$v,w$l,w$L,w$A,w$x,w$m){(w$L<=0||w$A<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),w$L|=0,w$A|=0,w$x|=0,w$m|=0;var w$Z=w$uv.create(w$L,w$A,6408,5121,0,!1);w$Z.start(),w$Z.clear(0,0,0,0),w$C.context.clear(),w$J.renders[w$l]._fun(w$v,w$C.context,w$x,w$Jv.height-w$A+w$m),w$C.context.flush(),w$Z.end();var w$O=w$Z.getData(0,0,w$L,w$A);if(w$Z.recycle(),w$O.byteLength==w$L*w$A*4){var w$e=new w$Dv;w$e._canvas=w$r.createElement("canvas"),w$e.size(w$L,w$A);var w$$=w$e._canvas.getContext("2d");w$r.canvas.size(w$L,w$A);var w$_=w$r.context,w$o=w$_.createImageData(w$L,w$A);return w$o.data.set(new Uint8ClampedArray(w$O.buffer)),w$e._imgData=w$o,w$_.putImageData(w$o,0,0),w$$.save(),w$$.translate(0,w$A),w$$.scale(1,-1),w$$.drawImage(w$r.canvas.source,0,0),w$$.restore(),w$e}console.log("drawToCanvas error: w:"+w$L+",h:"+w$A+",datalen:"+w$O.byteLength)},w$f.createFilterAction=function(w$v){var w$l;switch(w$v){case 32:w$l=new w$hv}return w$l},w$f.addTextureToAtlas=function(w$v){w$v._uvID++,w$j._atlasRestore++,w$v.bitmap.enableMerageInAtlas&&w$j.instance.addToAtlas(w$v)},w$f.getTexturePixels=function(w$v,w$l,w$L,w$A,w$x){w$C.context.ctx.clear();var w$m=new w$k;w$m.graphics.drawTexture(w$v,-w$l,-w$L);var w$Z=w$uv.create(w$A,w$x);w$Z.start(),w$Z.clear(0,0,0,0),w$m.render(w$C.context,0,0),w$C.context.ctx.flush(),w$Z.end();for(var w$O=w$Z.getData(0,0,w$A,w$x),w$e=[],w$$=0,w$_=w$x-1;0<=w$_;w$_--)for(var w$o=0;w$o<w$A;w$o++)w$$=4*(w$_*w$A+w$o),w$e.push(w$O[w$$]),w$e.push(w$O[w$$+1]),w$e.push(w$O[w$$+2]),w$e.push(w$O[w$$+3]);return w$e},w$f.skinAniSprite=function(){return new w$vv},w$$.create=function(w$v,w$l){var w$L=new w$Dv;return w$L._imgData=w$l,w$L.flipY=!1,w$L},w$g._filterStart=function(w$v,w$l,w$L,w$A,w$x){var w$m=w$v.getValue("bounds"),w$Z=w$uv.create(w$m.width,w$m.height);if(w$Z.start(),w$Z.clear(0,0,0,0),w$v.addValue("src",w$Z),w$v.addValue("ScissorTest",w$Jv.worldScissorTest),w$Jv.worldScissorTest){var w$O=new w$V;w$O.copyFrom(w$L.ctx._clipRect),w$v.addValue("clipRect",w$O),w$Jv.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},w$g._filterEnd=function(w$v,w$l,w$L,w$A,w$x){var w$m=w$v.getValue("bounds");w$v.getValue("src").end();var w$Z=w$uv.create(w$m.width,w$m.height);w$Z.start(),w$Z.clear(0,0,0,0),w$v.addValue("out",w$Z),w$l._set$P("_filterCache",w$Z),w$l._set$P("_isHaveGlowFilter",w$v.getValue("_isHaveGlowFilter"))},w$g._EndTarget=function(w$v,w$l){if(w$v.getValue("src").recycle(),w$v.getValue("out").end(),w$v.getValue("ScissorTest")){w$Jv.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),w$l.ctx.save();var w$L=w$v.getValue("clipRect");w$l.ctx.clipRect(w$L.x,w$L.y,w$L.width,w$L.height)}},w$g._useSrc=function(w$v){var w$l=w$v.getValue("out");w$l.end(),(w$l=w$v.getValue("src")).start(),w$l.clear(0,0,0,0)},w$g._endSrc=function(w$v){w$v.getValue("src").end()},w$g._useOut=function(w$v){var w$l=w$v.getValue("src");w$l.end(),(w$l=w$v.getValue("out")).start(),w$l.clear(0,0,0,0)},w$g._endOut=function(w$v){w$v.getValue("out").end()},w$g._recycleScope=function(w$v){w$v.recycle()},w$g._filter=function(w$v,w$l,w$L,w$A){var w$x=this._next;if(w$x){var w$m,w$Z,w$O=w$v.filters,w$e=w$O.length;if(1==w$e&&32==w$O[0].type)return w$l.ctx.save(),w$l.ctx.setFilters([w$O[0]]),w$x._fun.call(w$x,w$v,w$l,w$L,w$A),void w$l.ctx.restore();var w$$=w$Ov.create(),w$_=w$h.TEMP,w$o=w$l.ctx._getTransformMatrix(),w$K=w$T.create();w$o.copyTo(w$K);var w$r=0,w$G=0,w$c=!1,w$d=w$v._$P._filterCache?w$v._$P._filterCache:null;if(!w$d||w$v._repaint){w$c=w$v._isHaveGlowFilter(),w$$.addValue("_isHaveGlowFilter",w$c),w$c&&(w$r=50,w$G=25),(w$Z=new w$V).copyFrom(w$v.getSelfBounds()),w$Z.x+=w$v.x,w$Z.y+=w$v.y,w$Z.x-=w$v.pivotX+4,w$Z.y-=w$v.pivotY+4;var w$C=w$Z.x,w$J=w$Z.y;if(w$Z.width+=w$r+8,w$Z.height+=w$r+8,w$_.x=w$Z.x*w$K.a+w$Z.y*w$K.c,w$_.y=w$Z.y*w$K.d+w$Z.x*w$K.b,w$Z.x=w$_.x,w$Z.y=w$_.y,w$_.x=w$Z.width*w$K.a+w$Z.height*w$K.c,w$_.y=w$Z.height*w$K.d+w$Z.width*w$K.b,w$Z.width=w$_.x,w$Z.height=w$_.y,w$Z.width<=0||w$Z.height<=0)return;w$d&&w$d.recycle(),w$$.addValue("bounds",w$Z);var w$B=w$Zv.create([w$$,w$v,w$l,0,0],w$g._filterStart);w$l.addRenderObject(w$B),w$l.ctx._renderKey=0,w$l.ctx._shader2D.glTexture=null;var w$X=w$v.x-w$C+w$G,w$f=w$v.y-w$J+w$G;w$x._fun.call(w$x,w$v,w$l,w$X,w$f),w$B=w$Zv.create([w$$,w$v,w$l,0,0],w$g._filterEnd),w$l.addRenderObject(w$B);for(var w$w=0;w$w<w$e;w$w++){0!=w$w&&(w$B=w$Zv.create([w$$],w$g._useSrc),w$l.addRenderObject(w$B),w$m=w$gv.create(1,0),w$T.TEMP.identity(),w$l.ctx.drawTarget(w$$,0,0,w$Z.width,w$Z.height,w$T.TEMP,"out",w$m,null,w$p.TOINT.overlay),w$B=w$Zv.create([w$$],w$g._useOut),w$l.addRenderObject(w$B)),w$O[w$w].action.apply3d(w$$,w$v,w$l,0,0)}w$B=w$Zv.create([w$$,w$l],w$g._EndTarget),w$l.addRenderObject(w$B)}else{if((w$c=!!w$v._$P._isHaveGlowFilter&&w$v._$P._isHaveGlowFilter)&&(w$r=50,w$G=25),(w$Z=w$v.getBounds()).width<=0||w$Z.height<=0)return;w$Z.width+=w$r,w$Z.height+=w$r,w$_.x=w$Z.x*w$K.a+w$Z.y*w$K.c,w$_.y=w$Z.y*w$K.d+w$Z.x*w$K.b,w$Z.x=w$_.x,w$Z.y=w$_.y,w$_.x=w$Z.width*w$K.a+w$Z.height*w$K.c,w$_.y=w$Z.height*w$K.d+w$Z.width*w$K.b,w$Z.width=w$_.x,w$Z.height=w$_.y,w$$.addValue("out",w$d)}w$L=w$L-w$G-w$v.x,w$A=w$A-w$G-w$v.y,w$_.setTo(w$L,w$A),w$K.transformPoint(w$_),w$L=w$_.x+w$Z.x,w$A=w$_.y+w$Z.y,w$m=w$gv.create(1,0),w$T.TEMP.identity(),w$l.ctx.drawTarget(w$$,w$L,w$A,w$Z.width,w$Z.height,w$T.TEMP,"out",w$m,null,w$p.TOINT.overlay),w$B=w$Zv.create([w$$],w$g._recycleScope),w$l.addRenderObject(w$B),w$K.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=w$Z._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=w$Z._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=w$Z._uint8ArraySlice),!0},w$Z.onStageResize=function(w$v,w$l){null!=w$Z.mainContext&&(w$Z.mainContext.viewport(0,0,w$v,w$l),w$Jv.width=w$v,w$Jv.height=w$l)},w$Z.onInvalidGLRes=function(){w$j.instance.freeAll(),w$X.releaseContentManagers(!0),w$Z.doNodeRepaint(w$w.stage),w$Z.mainContext.viewport(0,0,w$Jv.width,w$Jv.height),w$w.stage.event("devicelost")},w$Z.doNodeRepaint=function(w$v){0==w$v.numChildren&&w$v.repaint();for(var w$l=0;w$l<w$v.numChildren;w$l++)w$Z.doNodeRepaint(w$v.getChildAt(w$l))},w$Z.init=function(w$v,w$l,w$L){w$Z.mainCanvas=w$v,w$$._createContext=function(w$v){return new w$Hv(w$v)},w$Dv._createContext=function(w$v){return new w$Hv(w$v)};var w$A=laya.webgl.WebGL.mainContext;if(null!=w$A.getShaderPrecisionFormat){var w$x=w$A.getShaderPrecisionFormat(35633,36338),w$m=w$A.getShaderPrecisionFormat(35632,36338);w$Z.shaderHighPrecision=!(!w$x.precision||!w$m.precision)}else w$Z.shaderHighPrecision=!1;if(w$A.deleteTexture1=w$A.deleteTexture,w$A.deleteTexture=function(w$v){w$v==w$fv.curBindTexValue&&(w$fv.curBindTexValue=null),w$A.deleteTexture1(w$v)},w$Z.onStageResize(w$l,w$L),null==w$Z.mainContext)throw new Error("webGL getContext err!");w$I.__init__(),w$j.__init__(),w$kv.__init__(),w$mv.__init__(),w$Hv.__init__(),w$gv.__init__(),w$U.__init__(),w$sv.__int__(w$A),w$p._init_(w$A),w$C.isConchApp&&conch.setOnInvalidGLRes(w$Z.onInvalidGLRes)},w$Z.mainCanvas=null,w$Z.mainContext=null,w$Z.antialias=!0,w$Z.shaderHighPrecision=!1,w$Z._bg_null=[0,0,0,0],w$Z}(),w$fv=function(){function w$A(){}return w$K(w$A,"laya.webgl.WebGLContext"),w$A.UseProgram=function(w$v){return w$A._useProgram!==w$v&&(w$Xv.mainContext.useProgram(w$v),w$A._useProgram=w$v,!0)},w$A.setDepthTest=function(w$v,w$l){w$l!==w$A._depthTest&&((w$A._depthTest=w$l)?w$v.enable(2929):w$v.disable(2929))},w$A.setDepthMask=function(w$v,w$l){w$l!==w$A._depthMask&&(w$A._depthMask=w$l,w$v.depthMask(w$l))},w$A.setDepthFunc=function(w$v,w$l){w$l!==w$A._depthFunc&&(w$A._depthFunc=w$l,w$v.depthFunc(w$l))},w$A.setBlend=function(w$v,w$l){w$l!==w$A._blend&&((w$A._blend=w$l)?w$v.enable(3042):w$v.disable(3042))},w$A.setBlendFunc=function(w$v,w$l,w$L){(w$l!==w$A._sFactor||w$L!==w$A._dFactor)&&(w$A._sFactor=w$l,w$A._dFactor=w$L,w$v.blendFunc(w$l,w$L))},w$A.setCullFace=function(w$v,w$l){w$l!==w$A._cullFace&&((w$A._cullFace=w$l)?w$v.enable(2884):w$v.disable(2884))},w$A.setFrontFace=function(w$v,w$l){w$l!==w$A._frontFace&&(w$A._frontFace=w$l,w$v.frontFace(w$l))},w$A.bindTexture=function(w$v,w$l,w$L){w$v.bindTexture(w$l,w$L),w$A.curBindTexTarget=w$l,w$A.curBindTexValue=w$L},w$A.DEPTH_BUFFER_BIT=256,w$A.STENCIL_BUFFER_BIT=1024,w$A.COLOR_BUFFER_BIT=16384,w$A.POINTS=0,w$A.LINES=1,w$A.LINE_LOOP=2,w$A.LINE_STRIP=3,w$A.TRIANGLES=4,w$A.TRIANGLE_STRIP=5,w$A.TRIANGLE_FAN=6,w$A.ZERO=0,w$A.ONE=1,w$A.SRC_COLOR=768,w$A.ONE_MINUS_SRC_COLOR=769,w$A.SRC_ALPHA=770,w$A.ONE_MINUS_SRC_ALPHA=771,w$A.DST_ALPHA=772,w$A.ONE_MINUS_DST_ALPHA=773,w$A.DST_COLOR=774,w$A.ONE_MINUS_DST_COLOR=775,w$A.SRC_ALPHA_SATURATE=776,w$A.FUNC_ADD=32774,w$A.BLEND_EQUATION=32777,w$A.BLEND_EQUATION_RGB=32777,w$A.BLEND_EQUATION_ALPHA=34877,w$A.FUNC_SUBTRACT=32778,w$A.FUNC_REVERSE_SUBTRACT=32779,w$A.BLEND_DST_RGB=32968,w$A.BLEND_SRC_RGB=32969,w$A.BLEND_DST_ALPHA=32970,w$A.BLEND_SRC_ALPHA=32971,w$A.CONSTANT_COLOR=32769,w$A.ONE_MINUS_CONSTANT_COLOR=32770,w$A.CONSTANT_ALPHA=32771,w$A.ONE_MINUS_CONSTANT_ALPHA=32772,w$A.BLEND_COLOR=32773,w$A.ARRAY_BUFFER=34962,w$A.ELEMENT_ARRAY_BUFFER=34963,w$A.ARRAY_BUFFER_BINDING=34964,w$A.ELEMENT_ARRAY_BUFFER_BINDING=34965,w$A.STREAM_DRAW=35040,w$A.STATIC_DRAW=35044,w$A.DYNAMIC_DRAW=35048,w$A.BUFFER_SIZE=34660,w$A.BUFFER_USAGE=34661,w$A.CURRENT_VERTEX_ATTRIB=34342,w$A.FRONT=1028,w$A.BACK=1029,w$A.CULL_FACE=2884,w$A.FRONT_AND_BACK=1032,w$A.BLEND=3042,w$A.DITHER=3024,w$A.STENCIL_TEST=2960,w$A.DEPTH_TEST=2929,w$A.SCISSOR_TEST=3089,w$A.POLYGON_OFFSET_FILL=32823,w$A.SAMPLE_ALPHA_TO_COVERAGE=32926,w$A.SAMPLE_COVERAGE=32928,w$A.NO_ERROR=0,w$A.INVALID_ENUM=1280,w$A.INVALID_VALUE=1281,w$A.INVALID_OPERATION=1282,w$A.OUT_OF_MEMORY=1285,w$A.CW=2304,w$A.CCW=2305,w$A.LINE_WIDTH=2849,w$A.ALIASED_POINT_SIZE_RANGE=33901,w$A.ALIASED_LINE_WIDTH_RANGE=33902,w$A.CULL_FACE_MODE=2885,w$A.FRONT_FACE=2886,w$A.DEPTH_RANGE=2928,w$A.DEPTH_WRITEMASK=2930,w$A.DEPTH_CLEAR_VALUE=2931,w$A.DEPTH_FUNC=2932,w$A.STENCIL_CLEAR_VALUE=2961,w$A.STENCIL_FUNC=2962,w$A.STENCIL_FAIL=2964,w$A.STENCIL_PASS_DEPTH_FAIL=2965,w$A.STENCIL_PASS_DEPTH_PASS=2966,w$A.STENCIL_REF=2967,w$A.STENCIL_VALUE_MASK=2963,w$A.STENCIL_WRITEMASK=2968,w$A.STENCIL_BACK_FUNC=34816,w$A.STENCIL_BACK_FAIL=34817,w$A.STENCIL_BACK_PASS_DEPTH_FAIL=34818,w$A.STENCIL_BACK_PASS_DEPTH_PASS=34819,w$A.STENCIL_BACK_REF=36003,w$A.STENCIL_BACK_VALUE_MASK=36004,w$A.STENCIL_BACK_WRITEMASK=36005,w$A.VIEWPORT=2978,w$A.SCISSOR_BOX=3088,w$A.COLOR_CLEAR_VALUE=3106,w$A.COLOR_WRITEMASK=3107,w$A.UNPACK_ALIGNMENT=3317,w$A.PACK_ALIGNMENT=3333,w$A.MAX_TEXTURE_SIZE=3379,w$A.MAX_VIEWPORT_DIMS=3386,w$A.SUBPIXEL_BITS=3408,w$A.RED_BITS=3410,w$A.GREEN_BITS=3411,w$A.BLUE_BITS=3412,w$A.ALPHA_BITS=3413,w$A.DEPTH_BITS=3414,w$A.STENCIL_BITS=3415,w$A.POLYGON_OFFSET_UNITS=10752,w$A.POLYGON_OFFSET_FACTOR=32824,w$A.TEXTURE_BINDING_2D=32873,w$A.SAMPLE_BUFFERS=32936,w$A.SAMPLES=32937,w$A.SAMPLE_COVERAGE_VALUE=32938,w$A.SAMPLE_COVERAGE_INVERT=32939,w$A.NUM_COMPRESSED_TEXTURE_FORMATS=34466,w$A.COMPRESSED_TEXTURE_FORMATS=34467,w$A.DONT_CARE=4352,w$A.FASTEST=4353,w$A.NICEST=4354,w$A.GENERATE_MIPMAP_HINT=33170,w$A.BYTE=5120,w$A.UNSIGNED_BYTE=5121,w$A.SHORT=5122,w$A.UNSIGNED_SHORT=5123,w$A.INT=5124,w$A.UNSIGNED_INT=5125,w$A.FLOAT=5126,w$A.DEPTH_COMPONENT=6402,w$A.ALPHA=6406,w$A.RGB=6407,w$A.RGBA=6408,w$A.LUMINANCE=6409,w$A.LUMINANCE_ALPHA=6410,w$A.UNSIGNED_SHORT_4_4_4_4=32819,w$A.UNSIGNED_SHORT_5_5_5_1=32820,w$A.UNSIGNED_SHORT_5_6_5=33635,w$A.FRAGMENT_SHADER=35632,w$A.VERTEX_SHADER=35633,w$A.MAX_VERTEX_ATTRIBS=34921,w$A.MAX_VERTEX_UNIFORM_VECTORS=36347,w$A.MAX_VARYING_VECTORS=36348,w$A.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,w$A.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,w$A.MAX_TEXTURE_IMAGE_UNITS=34930,w$A.MAX_FRAGMENT_UNIFORM_VECTORS=36349,w$A.SHADER_TYPE=35663,w$A.DELETE_STATUS=35712,w$A.LINK_STATUS=35714,w$A.VALIDATE_STATUS=35715,w$A.ATTACHED_SHADERS=35717,w$A.ACTIVE_UNIFORMS=35718,w$A.ACTIVE_ATTRIBUTES=35721,w$A.SHADING_LANGUAGE_VERSION=35724,w$A.CURRENT_PROGRAM=35725,w$A.NEVER=512,w$A.LESS=513,w$A.EQUAL=514,w$A.LEQUAL=515,w$A.GREATER=516,w$A.NOTEQUAL=517,w$A.GEQUAL=518,w$A.ALWAYS=519,w$A.KEEP=7680,w$A.REPLACE=7681,w$A.INCR=7682,w$A.DECR=7683,w$A.INVERT=5386,w$A.INCR_WRAP=34055,w$A.DECR_WRAP=34056,w$A.VENDOR=7936,w$A.RENDERER=7937,w$A.VERSION=7938,w$A.NEAREST=9728,w$A.LINEAR=9729,w$A.NEAREST_MIPMAP_NEAREST=9984,w$A.LINEAR_MIPMAP_NEAREST=9985,w$A.NEAREST_MIPMAP_LINEAR=9986,w$A.LINEAR_MIPMAP_LINEAR=9987,w$A.TEXTURE_MAG_FILTER=10240,w$A.TEXTURE_MIN_FILTER=10241,w$A.TEXTURE_WRAP_S=10242,w$A.TEXTURE_WRAP_T=10243,w$A.TEXTURE_2D=3553,w$A.TEXTURE=5890,w$A.TEXTURE_CUBE_MAP=34067,w$A.TEXTURE_BINDING_CUBE_MAP=34068,w$A.TEXTURE_CUBE_MAP_POSITIVE_X=34069,w$A.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,w$A.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,w$A.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,w$A.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,w$A.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,w$A.MAX_CUBE_MAP_TEXTURE_SIZE=34076,w$A.TEXTURE0=33984,w$A.TEXTURE1=33985,w$A.TEXTURE2=33986,w$A.TEXTURE3=33987,w$A.TEXTURE4=33988,w$A.TEXTURE5=33989,w$A.TEXTURE6=33990,w$A.TEXTURE7=33991,w$A.TEXTURE8=33992,w$A.TEXTURE9=33993,w$A.TEXTURE10=33994,w$A.TEXTURE11=33995,w$A.TEXTURE12=33996,w$A.TEXTURE13=33997,w$A.TEXTURE14=33998,w$A.TEXTURE15=33999,w$A.TEXTURE16=34e3,w$A.TEXTURE17=34001,w$A.TEXTURE18=34002,w$A.TEXTURE19=34003,w$A.TEXTURE20=34004,w$A.TEXTURE21=34005,w$A.TEXTURE22=34006,w$A.TEXTURE23=34007,w$A.TEXTURE24=34008,w$A.TEXTURE25=34009,w$A.TEXTURE26=34010,w$A.TEXTURE27=34011,w$A.TEXTURE28=34012,w$A.TEXTURE29=34013,w$A.TEXTURE30=34014,w$A.TEXTURE31=34015,w$A.ACTIVE_TEXTURE=34016,w$A.REPEAT=10497,w$A.CLAMP_TO_EDGE=33071,w$A.MIRRORED_REPEAT=33648,w$A.FLOAT_VEC2=35664,w$A.FLOAT_VEC3=35665,w$A.FLOAT_VEC4=35666,w$A.INT_VEC2=35667,w$A.INT_VEC3=35668,w$A.INT_VEC4=35669,w$A.BOOL=35670,w$A.BOOL_VEC2=35671,w$A.BOOL_VEC3=35672,w$A.BOOL_VEC4=35673,w$A.FLOAT_MAT2=35674,w$A.FLOAT_MAT3=35675,w$A.FLOAT_MAT4=35676,w$A.SAMPLER_2D=35678,w$A.SAMPLER_CUBE=35680,w$A.VERTEX_ATTRIB_ARRAY_ENABLED=34338,w$A.VERTEX_ATTRIB_ARRAY_SIZE=34339,w$A.VERTEX_ATTRIB_ARRAY_STRIDE=34340,w$A.VERTEX_ATTRIB_ARRAY_TYPE=34341,w$A.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,w$A.VERTEX_ATTRIB_ARRAY_POINTER=34373,w$A.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,w$A.COMPILE_STATUS=35713,w$A.LOW_FLOAT=36336,w$A.MEDIUM_FLOAT=36337,w$A.HIGH_FLOAT=36338,w$A.LOW_INT=36339,w$A.MEDIUM_INT=36340,w$A.HIGH_INT=36341,w$A.FRAMEBUFFER=36160,w$A.RENDERBUFFER=36161,w$A.RGBA4=32854,w$A.RGB5_A1=32855,w$A.RGB565=36194,w$A.DEPTH_COMPONENT16=33189,w$A.STENCIL_INDEX=6401,w$A.STENCIL_INDEX8=36168,w$A.DEPTH_STENCIL=34041,w$A.RENDERBUFFER_WIDTH=36162,w$A.RENDERBUFFER_HEIGHT=36163,w$A.RENDERBUFFER_INTERNAL_FORMAT=36164,w$A.RENDERBUFFER_RED_SIZE=36176,w$A.RENDERBUFFER_GREEN_SIZE=36177,w$A.RENDERBUFFER_BLUE_SIZE=36178,w$A.RENDERBUFFER_ALPHA_SIZE=36179,w$A.RENDERBUFFER_DEPTH_SIZE=36180,w$A.RENDERBUFFER_STENCIL_SIZE=36181,w$A.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,w$A.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,w$A.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,w$A.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,w$A.COLOR_ATTACHMENT0=36064,w$A.DEPTH_ATTACHMENT=36096,w$A.STENCIL_ATTACHMENT=36128,w$A.DEPTH_STENCIL_ATTACHMENT=33306,w$A.NONE=0,w$A.FRAMEBUFFER_COMPLETE=36053,w$A.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,w$A.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,w$A.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,w$A.FRAMEBUFFER_UNSUPPORTED=36061,w$A.FRAMEBUFFER_BINDING=36006,w$A.RENDERBUFFER_BINDING=36007,w$A.MAX_RENDERBUFFER_SIZE=34024,w$A.INVALID_FRAMEBUFFER_OPERATION=1286,w$A.UNPACK_FLIP_Y_WEBGL=37440,w$A.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,w$A.CONTEXT_LOST_WEBGL=37442,w$A.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,w$A.BROWSER_DEFAULT_WEBGL=37444,w$A._useProgram=null,w$A._depthTest=!0,w$A._depthMask=!0,w$A._blend=!1,w$A._cullFace=!1,w$A.curBindTexTarget=null,w$A.curBindTexValue=null,w$Z(w$A,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),w$A}(),w$wv=function(w$v){function w$l(){w$l.__super.call(this)}w$K(w$l,"laya.webgl.display.GraphicsGL",w$O);var w$L=w$l.prototype;return w$L.setShader=function(w$v){this._saveToCmd(w$C.context._setShader,[w$v])},w$L.setIBVB=function(w$v,w$l,w$L,w$A,w$x,w$m){this._saveToCmd(w$C.context._setIBVB,[w$v,w$l,w$L,w$A,w$x,w$m])},w$L.drawParticle=function(w$v,w$l,w$L){var w$A=w$f.createParticleTemplate2D(w$L);w$A.x=w$v,w$A.y=w$l,this._saveToCmd(w$C.context._drawParticle,[w$A])},w$l}(),w$Hv=function(w$v){var w$L;function w$b(w$v){this._x=0,this._y=0,this._id=++w$b._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,w$b.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=w$b.MAXCLIPRECT,this.mOutPoint,this._canvas=w$v,this._canvas._addReference(),w$b._contextcount++,w$C.isFlash?(this._ib=w$Uv.create(35044),w$dv.fillIBQuadrangle(this._ib,16)):this._ib=w$Uv.QuadrangleIB,this.clear()}w$K(w$b,"laya.webgl.canvas.WebGLContext2D",w$x);var w$l=w$b.prototype;return w$l.setIsMainContext=function(){this._isMain=!0},w$l.clearBG=function(w$v,w$l,w$L,w$A){var w$x=w$Xv.mainContext;w$x.clearColor(w$v,w$l,w$L,w$A),w$x.clear(16384)},w$l._getSubmits=function(){return this._submits},w$l._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var w$v=0,w$l=this._submits._length;w$v<w$l;w$v++)this._submits[w$v].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},w$l.destroy=function(){--w$b._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=w$Uv.QuadrangleIB&&this._ib.releaseResource()},w$l.clear=function(){this._submits||(this._other=w$L.DEFAULT,this._curMat=w$T.create(),this._vb=w$zv.create(-1),this._submits=[],this._save=[w$E.Create(this)],this._save.length=10,this._shader2D=new w$U,this._triangleMesh=w$av.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=w$L.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=w$b.MAXCLIPRECT,this._curSubmit=w$mv.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=w$Y.DEFAULT;for(var w$v=0,w$l=this._submits._length;w$v<w$l;w$v++)this._submits[w$v].releaseRender(),this._submits[w$v]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},w$l.size=function(w$v,w$l){if(this._width!=w$v||this._height!=w$l)if(0==w$v||0==w$l){0!=this._vb._byteLength&&(this._width=w$v,this._height=w$l,this._vb.clear(),this._vb.upload());for(var w$L=0,w$A=this._submits._length;w$L<w$A;w$L++)this._submits[w$L].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=w$v,this._height=w$l,this._targets&&this._targets.size(w$v,w$l),this._canvas.memorySize-=this._canvas.memorySize;0===w$v&&0===w$l&&this._releaseMem()},w$l._getTransformMatrix=function(){return this._curMat},w$l.translate=function(w$v,w$l){0===w$v&&0===w$l||(w$i.save(this),this._curMat.bTransform&&(w$s.save(this),this._curMat.transformPointN(w$h.TEMP.setTo(w$v,w$l)),w$v=w$h.TEMP.x,w$l=w$h.TEMP.y),this._x+=w$v,this._y+=w$l)},w$l.save=function(){this._save[this._save._length++]=w$E.Create(this)},w$l.restore=function(){var w$v=this._save._length;if(!(w$v<1))for(var w$l=w$v-1;0<=w$l;w$l--){var w$L=this._save[w$l];if(w$L.restore(this),w$L.isSaveMark())return void(this._save._length=w$l)}},w$l._fillText=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$){void 0===w$$&&(w$$=0);var w$_=this._shader2D,w$o=this._curSubmit.shaderValue,w$K=w$x?w$Gv.create(w$x):this._other.font;if(w$j.enabled)w$_.ALPHA!==w$o.ALPHA&&(w$_.glTexture=null),w$rv.drawText(this,w$v,w$l,this._curMat,w$K,w$e||this._other.textAlign,w$m,w$Z,w$O,w$L,w$A,w$$);else{this._shader2D.defines.getValue();var w$r=w$m?w$G.create(w$m)._color:w$_.colorAdd;w$_.ALPHA===w$o.ALPHA&&w$r===w$_.colorAdd&&w$o.colorAdd===w$_.colorAdd||(w$_.glTexture=null,w$_.colorAdd=w$r),w$rv.drawText(this,w$v,w$l,this._curMat,w$K,w$e||this._other.textAlign,w$m,w$Z,w$O,w$L,w$A,w$$)}},w$l.fillWords=function(w$v,w$l,w$L,w$A,w$x,w$m){this._fillText(null,w$v,w$l,w$L,w$A,w$x,null,-1,null,w$m)},w$l.fillBorderWords=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){this._fillBorderText(null,w$v,w$l,w$L,w$A,w$x,w$m,w$Z,null)},w$l.fillText=function(w$v,w$l,w$L,w$A,w$x,w$m){this._fillText(w$v,null,w$l,w$L,w$A,w$x,null,-1,w$m)},w$l.strokeText=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){this._fillText(w$v,null,w$l,w$L,w$A,null,w$x,w$m||1,w$Z)},w$l.fillBorderText=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){this._fillBorderText(w$v,null,w$l,w$L,w$A,w$x,w$m,w$Z,w$O)},w$l._fillBorderText=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e){if(!w$j.enabled)return this._fillText(w$v,w$l,w$L,w$A,w$x,null,w$Z,w$O||1,w$e),void this._fillText(w$v,w$l,w$L,w$A,w$x,w$m,null,-1,w$e);var w$$=this._shader2D,w$_=this._curSubmit.shaderValue;w$$.ALPHA!==w$_.ALPHA&&(w$$.glTexture=null);var w$o=w$x?(w$b._fontTemp.setFont(w$x),w$b._fontTemp):this._other.font;w$rv.drawText(this,w$v,w$l,this._curMat,w$o,w$e||this._other.textAlign,w$m,w$Z,w$O||1,w$L,w$A,0)},w$l.fillRect=function(w$v,w$l,w$L,w$A,w$x){var w$m=this._vb;if(w$dv.fillRectImgVb(w$m,this._clipRect,w$v,w$l,w$L,w$A,w$a.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var w$Z=this._shader2D.fillStyle;w$x&&(this._shader2D.fillStyle=w$Y.create(w$x));var w$O=this._shader2D,w$e=this._curSubmit.shaderValue;if(w$O.fillStyle!==w$e.fillStyle||w$O.ALPHA!==w$e.ALPHA){w$O.glTexture=null;var w$$=this._curSubmit=w$mv.createSubmit(this,this._ib,w$m,(w$m._byteLength-64)/32*3,w$gv.create(2,0));w$$.shaderValue.color=w$O.fillStyle._color._color,w$$.shaderValue.ALPHA=w$O.ALPHA,this._submits[this._submits._length++]=w$$}this._curSubmit._numEle+=6,this._shader2D.fillStyle=w$Z}},w$l.fillTexture=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){if(w$v.loaded&&w$v.bitmap&&w$v.source){var w$e=this._vb,w$$=w$v.bitmap.width,w$_=w$v.bitmap.height,w$o=w$v.uv,w$K=w$Z.x%w$v.width,w$r=w$Z.y%w$v.height;if(w$$!=w$O.w||w$_!=w$O.h){if(!w$O.w&&!w$O.h)switch(w$O.oy=w$O.ox=0,w$m){case"repeat":w$O.width=w$A,w$O.height=w$x;break;case"repeat-x":w$O.width=w$A,w$r<0?w$v.height+w$r>w$x?w$O.height=w$x:w$O.height=w$v.height+w$r:(w$O.oy=w$r,w$v.height+w$r>w$x?w$O.height=w$x-w$r:w$O.height=w$v.height);break;case"repeat-y":w$K<0?w$v.width+w$K>w$A?w$O.width=w$A:w$O.width=w$v.width+w$K:(w$O.ox=w$K,w$v.width+w$K>w$A?w$O.width=w$A-w$K:w$O.width=w$v.width),w$O.height=w$x;break;case"no-repeat":w$K<0?w$v.width+w$K>w$A?w$O.width=w$A:w$O.width=w$v.width+w$K:(w$O.ox=w$K,w$v.width+w$K>w$A?w$O.width=w$A-w$K:w$O.width=w$v.width),w$r<0?w$v.height+w$r>w$x?w$O.height=w$x:w$O.height=w$v.height+w$r:(w$O.oy=w$r,w$v.height+w$r>w$x?w$O.height=w$x-w$r:w$O.height=w$v.height);break;default:w$O.width=w$A,w$O.height=w$x}w$O.w=w$$,w$O.h=w$_,w$O.uv=[0,0,w$O.width/w$$,0,w$O.width/w$$,w$O.height/w$_,0,w$O.height/w$_]}if(w$l+=w$O.ox,w$L+=w$O.oy,w$K-=w$O.ox,w$r-=w$O.oy,w$dv.fillRectImgVb(w$e,this._clipRect,w$l,w$L,w$O.width,w$O.height,w$O.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var w$G=w$tv.create(this,this._ib,w$e,(w$e._byteLength-64)/32*3,w$gv.create(256,0)),w$c=(this._submits[this._submits._length++]=w$G).shaderValue;w$c.textureHost=w$v;var w$d=w$o[0]*w$$,w$C=w$o[1]*w$_,w$J=(w$o[2]-w$o[0])*w$$,w$B=(w$o[5]-w$o[3])*w$_,w$X=-w$K/w$$,w$f=-w$r/w$_;w$c.u_TexRange[0]=w$d/w$$,w$c.u_TexRange[1]=w$J/w$$,w$c.u_TexRange[2]=w$C/w$_,w$c.u_TexRange[3]=w$B/w$_,w$c.u_offset[0]=w$X,w$c.u_offset[1]=w$f,w$j.enabled&&!this._isMain&&w$G.addTexture(w$v,(w$e._byteLength>>2)-16),(this._curSubmit=w$G)._renderType=10017,w$G._numEle+=6}}else this.sprite&&w$w.timer.callLater(this,this._repaintSprite)},w$l.setShader=function(w$v){w$S.save(this,1048576,this._shader2D,!0),this._shader2D.shader=w$v},w$l.setFilters=function(w$v){w$S.save(this,2097152,this._shader2D,!0),this._shader2D.filters=w$v,this._curSubmit=w$mv.RENDERBASE,this._renderKey=0,this._drawCount++},w$l.drawTexture=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){this._drawTextureM(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,null,1)},w$l.addTextureVb=function(w$v,w$l,w$L){var w$A=this._curSubmit._vb||this._vb,w$x=w$A._byteLength>>2;w$A.byteLength=w$x+16<<2;for(var w$m=w$A.getFloat32Array(),w$Z=0;w$Z<16;w$Z+=4)w$m[w$x++]=w$v[w$Z]+w$l,w$m[w$x++]=w$v[w$Z+1]+w$L,w$m[w$x++]=w$v[w$Z+2],w$m[w$x++]=w$v[w$Z+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),w$A._upload=!0},w$l.willDrawTexture=function(w$v,w$l){if(!(w$v.loaded&&w$v.bitmap&&w$v.source))return this.sprite&&w$w.timer.callLater(this,this._repaintSprite),0;var w$L=w$v.bitmap,w$A=w$L.id+this._shader2D.ALPHA*w$l+10016;if(w$A==this._renderKey)return w$A;var w$x=this._shader2D,w$m=w$x.ALPHA,w$Z=this._curSubmit.shaderValue;w$x.ALPHA*=w$l,this._renderKey=w$A,this._drawCount++,w$x.glTexture=w$L;var w$O=this._vb,w$e=null,w$$=w$O._byteLength/32*3,w$_=w$Z.textureHost&&w$Z.textureHost==w$v&&w$Z.textureHost.alphaTexture==w$v.alphaTexture;return w$e=w$tv.create(this,this._ib,w$O,w$$,w$gv.create(1,0)),(this._submits[this._submits._length++]=w$e).shaderValue.textureHost=w$v,w$e._renderType=10016,w$e._preIsSameTextureShader=10016===this._curSubmit._renderType&&w$x.ALPHA===w$Z.ALPHA&&w$_,this._curSubmit=w$e,w$x.ALPHA=w$m,w$A},w$l.drawTextures=function(w$v,w$l,w$L,w$A){if(w$v.loaded&&w$v.bitmap&&w$v.source){var w$x=this._clipRect;if(this._clipRect=w$b.MAXCLIPRECT,this._drawTextureM(w$v,w$l[0],w$l[1],w$v.width,w$v.height,w$L,w$A,null,1)){if(this._clipRect=w$x,w$M.drawCall++,!(w$l.length<4)){for(var w$m=this._curSubmit._vb||this._vb,w$Z=this._curMat.a,w$O=this._curMat.d,w$e=2,w$$=w$l.length;w$e<w$$;w$e+=2)w$dv.copyPreImgVb(w$m,(w$l[w$e]-w$l[w$e-2])*w$Z,(w$l[w$e+1]-w$l[w$e-1])*w$O),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&w$w.timer.callLater(this,this._repaintSprite)},w$l._drawTextureM=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e){if(!w$v.loaded||!w$v.source)return this.sprite&&w$w.timer.callLater(this,this._repaintSprite),!1;var w$$=this._curSubmit._vb||this._vb,w$_=w$v.bitmap;w$l+=w$m,w$L+=w$Z,this._drawCount++;var w$o=w$_.id+this._shader2D.ALPHA*w$e+10016;if(w$o!=this._renderKey){this._renderKey=w$o;var w$K=this._curSubmit.shaderValue,w$r=this._shader2D,w$G=w$r.ALPHA;w$r.ALPHA*=w$e,w$r.glTexture=w$_;var w$c=this._vb,w$d=null,w$C=w$c._byteLength/32*3,w$J=w$K.textureHost&&w$K.textureHost==w$v&&w$K.textureHost.alphaTexture==w$v.alphaTexture;w$d=w$tv.create(this,this._ib,w$c,w$C,w$gv.create(1,0)),(this._submits[this._submits._length++]=w$d).shaderValue.textureHost=w$v,w$d._renderType=10016,w$d._preIsSameTextureShader=10016===this._curSubmit._renderType&&w$r.ALPHA===w$K.ALPHA&&w$J,this._curSubmit=w$d,w$$=this._curSubmit._vb||this._vb,w$r.ALPHA=w$G}return!!w$dv.fillRectImgVb(w$$,this._clipRect,w$l,w$L,w$A||w$v.width,w$x||w$v.height,w$v.uv,w$O||this._curMat,this._x,this._y,0,0)&&(w$j.enabled&&!this._isMain&&this._curSubmit.addTexture(w$v,(w$$._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},w$l._repaintSprite=function(){this.sprite&&this.sprite.repaint()},w$l._drawText=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$){var w$_=w$v.bitmap;this._drawCount++;var w$o=w$_.id+this._shader2D.ALPHA+10016;if(w$o!=this._renderKey){this._renderKey=w$o;var w$K=this._curSubmit.shaderValue,w$r=this._shader2D;w$r.glTexture=w$_;var w$G=this._vb,w$c=null,w$d=w$G._byteLength/32*3,w$C=w$K.textureHost&&w$K.textureHost==w$v&&w$K.textureHost.alphaTexture==w$v.alphaTexture;(w$c=w$j.enabled?w$tv.create(this,this._ib,w$G,w$d,w$gv.create(1,0)):w$tv.create(this,this._ib,w$G,w$d,w$iv.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&w$r.ALPHA===w$K.ALPHA&&w$C,(this._submits[this._submits._length++]=w$c).shaderValue.textureHost=w$v,w$c._renderType=10016,this._curSubmit=w$c}w$v.active();var w$J=this._curSubmit._vb||this._vb;w$dv.fillRectImgVb(w$J,this._clipRect,w$l+w$Z,w$L+w$O,w$A||w$v.width,w$x||w$v.height,w$v.uv,w$m||this._curMat,this._x,this._y,w$e,w$$,!0)&&(w$j.enabled&&!this._isMain&&this._curSubmit.addTexture(w$v,(w$J._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},w$l.drawTextureWithTransform=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e){if(w$m){var w$$=this._curMat,w$_=this._x,w$o=this._y;(0!==w$Z||0!==w$O)&&(this._x=w$Z*w$$.a+w$O*w$$.c,this._y=w$O*w$$.d+w$Z*w$$.b),w$m&&w$$.bTransform?(w$T.mul(w$m,w$$,w$b._tmpMatrix),(w$m=w$b._tmpMatrix)._checkTransform()):(this._x+=w$$.tx,this._y+=w$$.ty),this._drawTextureM(w$v,w$l,w$L,w$A,w$x,0,0,w$m,w$e),this._x=w$_,this._y=w$o}else this._drawTextureM(w$v,w$l,w$L,w$A,w$x,w$Z,w$O,null,w$e)},w$l.fillQuadrangle=function(w$v,w$l,w$L,w$A,w$x){var w$m=this._curSubmit,w$Z=this._vb,w$O=this._shader2D,w$e=w$m.shaderValue;if(this._renderKey=0,w$v.bitmap){var w$$=w$v.bitmap;w$O.glTexture==w$$&&w$O.ALPHA===w$e.ALPHA||(w$O.glTexture=w$$,(w$m=this._curSubmit=w$mv.createSubmit(this,this._ib,w$Z,w$Z._byteLength/32*3,w$gv.create(1,0))).shaderValue.glTexture=w$$,this._submits[this._submits._length++]=w$m),w$dv.fillQuadrangleImgVb(w$Z,w$l,w$L,w$A,w$v.uv,w$x||this._curMat,this._x,this._y)}else w$m.shaderValue.fillStyle&&w$m.shaderValue.fillStyle.equal(w$v)&&w$O.ALPHA===w$e.ALPHA||(w$O.glTexture=null,(w$m=this._curSubmit=w$mv.createSubmit(this,this._ib,w$Z,w$Z._byteLength/32*3,w$gv.create(2,0))).shaderValue.defines.add(2),w$m.shaderValue.fillStyle=w$Y.create(w$v),this._submits[this._submits._length++]=w$m),w$dv.fillQuadrangleImgVb(w$Z,w$l,w$L,w$A,w$a.DEF_UV,w$x||this._curMat,this._x,this._y);w$m._numEle+=6},w$l.drawTexture2=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){if(0!=w$m){var w$e=this._curMat;if(this._x=w$v*w$e.a+w$l*w$e.c,this._y=w$l*w$e.d+w$v*w$e.b,w$x&&(w$x=w$e.bTransform||w$x.bTransform?(w$T.mul(w$x,w$e,w$b._tmpMatrix),w$b._tmpMatrix):(this._x+=w$x.tx+w$e.tx,this._y+=w$x.ty+w$e.ty,w$T.EMPTY)),1!==w$m||w$Z){var w$$=this._shader2D.ALPHA,w$_=this._nBlendType;this._shader2D.ALPHA=w$m,w$Z&&(this._nBlendType=w$p.TOINT(w$Z)),this._drawTextureM(w$O[0],w$O[1]-w$L,w$O[2]-w$A,w$O[3],w$O[4],0,0,w$x,1),this._shader2D.ALPHA=w$$,this._nBlendType=w$_}else this._drawTextureM(w$O[0],w$O[1]-w$L,w$O[2]-w$A,w$O[3],w$O[4],0,0,w$x,1);this._x=this._y=0}},w$l.drawCanvas=function(w$v,w$l,w$L,w$A,w$x){var w$m=w$v.context;if(this._renderKey=0,w$m._targets)this._submits[this._submits._length++]=w$Iv.create(w$m,0,null),this._curSubmit=w$mv.RENDERBASE,w$m._targets.drawTo(this,w$l,w$L,w$A,w$x);else{var w$Z=this._submits[this._submits._length++]=w$Iv.create(w$m,this._shader2D.ALPHA,this._shader2D.filters),w$O=w$A/w$v.width,w$e=w$x/w$v.height,w$$=w$Z._matrix;this._curMat.copyTo(w$$),1!=w$O&&1!=w$e&&w$$.scale(w$O,w$e);var w$_=w$$.tx,w$o=w$$.ty;w$$.tx=w$$.ty=0,w$$.transformPoint(w$h.TEMP.setTo(w$l,w$L)),w$$.translate(w$h.TEMP.x+w$_,w$h.TEMP.y+w$o),this._curSubmit=w$mv.RENDERBASE}w$H.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=w$m._targets?"yellow":"green",this.strokeRect(w$l-1,w$L-1,w$A+2,w$x+2,1),this.strokeRect(w$l,w$L,w$A,w$x,1),this.restore())},w$l.drawTarget=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$){void 0===w$$&&(w$$=-1);var w$_=this._vb;if(w$dv.fillRectImgVb(w$_,this._clipRect,w$l,w$L,w$A,w$x,w$e||w$a.DEF_UV,w$m||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var w$o=this._curSubmit=w$ov.create(this,this._ib,w$_,(w$_._byteLength-64)/32*3,w$O,w$Z);w$o.blendType=-1==w$$?this._nBlendType:w$$,w$o.scope=w$v,this._submits[this._submits._length++]=w$o,this._curSubmit._numEle+=6}},w$l.mixRGBandAlpha=function(w$v){return this._mixRGBandAlpha(w$v,this._shader2D.ALPHA)},w$l._mixRGBandAlpha=function(w$v,w$l){var w$L=(4278190080&w$v)>>>24;return 0!=w$L?w$L*=w$l:w$L=255*w$l,16777215&w$v|w$L<<24},w$l.drawTriangles=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$){if(!w$v.loaded||!w$v.source)return this.sprite&&w$w.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;w$v.bitmap;var w$_=this._mixRGBandAlpha(4294967295,w$O),w$o=(w$A.length,w$m.length);this._renderKey=-1;var w$K=this._curSubmit=w$tv.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,w$gv.create(1,0));return w$K.shaderValue.textureHost=w$v,w$K._renderType=10016,this._submits[this._submits._length++]=w$K,w$Z?(w$b._tmpMatrix.a=w$Z.a,w$b._tmpMatrix.b=w$Z.b,w$b._tmpMatrix.c=w$Z.c,w$b._tmpMatrix.d=w$Z.d,w$b._tmpMatrix.tx=w$Z.tx+w$l,w$b._tmpMatrix.ty=w$Z.ty+w$L,w$T.mul(w$b._tmpMatrix,this._curMat,w$b._tmpMatrix)):(w$b._tmpMatrix.a=this._curMat.a,w$b._tmpMatrix.b=this._curMat.b,w$b._tmpMatrix.c=this._curMat.c,w$b._tmpMatrix.d=this._curMat.d,w$b._tmpMatrix.tx=this._curMat.tx+w$l,w$b._tmpMatrix.ty=this._curMat.ty+w$L),this._triangleMesh.addData(w$A,w$x,w$m,w$b._tmpMatrix,w$_,this),this._curSubmit._numEle+=w$o,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},w$l.transform=function(w$v,w$l,w$L,w$A,w$x,w$m){w$s.save(this),w$T.mul(w$T.TEMP.setTo(w$v,w$l,w$L,w$A,w$x,w$m),this._curMat,this._curMat),this._curMat._checkTransform()},w$l.setTransformByMatrix=function(w$v){w$v.copyTo(this._curMat)},w$l.transformByMatrix=function(w$v){w$s.save(this),w$T.mul(w$v,this._curMat,this._curMat),this._curMat._checkTransform()},w$l.rotate=function(w$v){w$s.save(this),this._curMat.rotateEx(w$v)},w$l.scale=function(w$v,w$l){w$s.save(this),this._curMat.scaleEx(w$v,w$l)},w$l.clipRect=function(w$v,w$l,w$L,w$A){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var w$x=w$_v.create(4);this.addRenderObject(w$x);var w$m=this._vb,w$Z=w$m._byteLength>>2;if(w$dv.fillRectImgVb(w$m,null,w$v,w$l,w$L,w$A,w$a.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var w$O=this._curSubmit=w$mv.createSubmit(this,this._ib,w$m,(w$m._byteLength-64)/32*3,w$gv.create(2,0));w$O.shaderValue.ALPHA=1,this._submits[this._submits._length++]=w$O,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var w$e=w$_v.create(5);this.addRenderObject(w$e);var w$$=w$m.getFloat32Array(),w$_=Math.min(Math.min(Math.min(w$$[0+w$Z],w$$[4+w$Z]),w$$[8+w$Z]),w$$[12+w$Z]),w$o=Math.max(Math.max(Math.max(w$$[0+w$Z],w$$[4+w$Z]),w$$[8+w$Z]),w$$[12+w$Z]),w$K=Math.min(Math.min(Math.min(w$$[1+w$Z],w$$[5+w$Z]),w$$[9+w$Z]),w$$[13+w$Z]),w$r=Math.max(Math.max(Math.max(w$$[1+w$Z],w$$[5+w$Z]),w$$[9+w$Z]),w$$[13+w$Z]);w$W.save(this,w$e,w$v,w$l,w$L,w$A,w$_,w$K,w$o-w$_,w$r-w$K),this._curSubmit=w$mv.RENDERBASE}else{w$L*=this._curMat.a,w$A*=this._curMat.d;var w$G=w$h.TEMP;this._curMat.transformPoint(w$G.setTo(w$v,w$l)),w$L<0&&(w$G.x=w$G.x+w$L,w$L=-w$L),w$A<0&&(w$G.y=w$G.y+w$A,w$A=-w$A),this._renderKey=0;var w$c=this._curSubmit=w$$v.create(this);(this._submits[this._submits._length++]=w$c).submitIndex=this._submits._length,w$c.submitLength=9999999,w$y.save(this,w$c);var w$d=this._clipRect,w$C=w$d.x,w$J=w$d.y,w$B=w$G.x+w$L,w$X=w$G.y+w$A;w$C<w$G.x&&(w$d.x=w$G.x),w$J<w$G.y&&(w$d.y=w$G.y),w$d.width=Math.min(w$B,w$C+w$d.width)-w$d.x,w$d.height=Math.min(w$X,w$J+w$d.height)-w$d.y,this._shader2D.glTexture=null,w$c.clipRect.copyFrom(w$d),this._curSubmit=w$mv.RENDERBASE}},w$l.setIBVB=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$,w$_){if(void 0===w$e&&(w$e=0),void 0===w$$&&(w$$=0),void 0===w$_&&(w$_=0),null===w$L){if(w$C.isFlash){var w$o=w$A;w$o._selfIB||(w$o._selfIB=w$Uv.create(35044)),w$o._selfIB.clear(),w$L=w$o._selfIB}else w$L=this._ib;w$dv.expandIBQuadrangle(w$L,w$A._byteLength/(4*w$A.vertexStride*4))}if(!w$O||!w$Z)throw Error("setIBVB must input:shader shaderValues");var w$K=w$ev.create(this,w$A,w$L,w$x,w$Z,w$O,w$e,w$$,w$_);w$m||(w$m=w$T.EMPTY),w$m.translate(w$v,w$l),w$T.mul(w$m,this._curMat,w$K._mat),w$m.translate(-w$v,-w$l),this._submits[this._submits._length++]=w$K,this._curSubmit=w$mv.RENDERBASE,this._renderKey=0},w$l.addRenderObject=function(w$v){this._submits[this._submits._length++]=w$v},w$l.fillTrangles=function(w$v,w$l,w$L,w$A,w$x){var w$m=this._curSubmit,w$Z=this._vb,w$O=this._shader2D,w$e=w$m.shaderValue,w$$=w$A.length>>4,w$_=w$v.bitmap;this._renderKey=0,w$O.glTexture==w$_&&w$O.ALPHA===w$e.ALPHA||((w$m=this._curSubmit=w$mv.createSubmit(this,this._ib,w$Z,w$Z._byteLength/32*3,w$gv.create(1,0))).shaderValue.textureHost=w$v,this._submits[this._submits._length++]=w$m),w$dv.fillTranglesVB(w$Z,w$l,w$L,w$A,w$x||this._curMat,this._x,this._y),w$m._numEle+=6*w$$},w$l.submitElement=function(w$v,w$l){var w$L=this._submits;for(w$l<0&&(w$l=w$L._length);w$v<w$l;)w$v+=w$L[w$v].renderSubmit()},w$l.finish=function(){w$Xv.mainContext.finish()},w$l.flush=function(){var w$v=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(w$v>this._ib.bufferLength/12&&w$dv.expandIBQuadrangle(this._ib,w$v),!this._isMain&&w$j.enabled&&w$j._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=w$j._atlasRestore;for(var w$l=this._submits,w$L=0,w$A=w$l._length;w$L<w$A;w$L++){var w$x=w$l[w$L];10016===w$x.getRenderType()&&w$x.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),w$lv.instance&&w$lv.getInstance().reset();var w$m;for(w$L=0,w$m=this.meshlist.length;w$L<w$m;w$L++){var w$Z=this.meshlist[w$L];w$Z.canReuse?w$Z.releaseMesh():w$Z.destroy()}return this.meshlist.length=0,this._curSubmit=w$mv.RENDERBASE,this._renderKey=0,this._triangleMesh=w$av.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},w$l.setPathId=function(w$v){if(this.mId=w$v,-1!=this.mId){this.mHaveKey=!1;var w$l=w$u.getInstance();w$l.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,w$l.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},w$l.movePath=function(w$v,w$l){var w$L=w$v,w$A=w$l;w$v=this._curMat.a*w$L+this._curMat.c*w$A+this._curMat.tx,w$l=this._curMat.b*w$L+this._curMat.d*w$A+this._curMat.ty,this.mX+=w$v,this.mY+=w$l},w$l.beginPath=function(){var w$v=this._getPath();w$v.tempArray.length=0,w$v.closePath=!1,this.mX=0,this.mY=0},w$l.closePath=function(){this._path.closePath=!0},w$l.fill=function(w$v){void 0===w$v&&(w$v=!1);var w$l=this._getPath();this.drawPoly(0,0,w$l.tempArray,this.fillStyle._color.numColor,0,0,w$v)},w$l.stroke=function(){var w$v=this._getPath();if(0<this.lineWidth){if(-1==this.mId)w$v.drawLine(0,0,w$v.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var w$l=w$u.getInstance().shapeLineDic[this.mId];w$l.rebuild(w$v.tempArray),w$v.setGeomtry(w$l)}else w$u.getInstance().addLine(this.mId,w$v.drawLine(0,0,w$v.tempArray,this.lineWidth,this.strokeStyle._color.numColor));w$v.update();var w$L=[this.mX,this.mY],w$A=w$mv.createShape(this,w$v.ib,w$v.vb,w$v.count,w$v.offset,w$gv.create(4,0));w$A.shaderValue.ALPHA=this._shader2D.ALPHA,w$A.shaderValue.u_pos=w$L,w$A.shaderValue.u_mmat2=w$Jv.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=w$A,this._renderKey=-1}},w$l.line=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z=this._curSubmit,w$O=this._vb;if(w$dv.fillLineVb(w$O,this._clipRect,w$v,w$l,w$L,w$A,w$x,w$m)){this._renderKey=0;var w$e=this._shader2D,w$$=w$Z.shaderValue;w$e.strokeStyle===w$$.strokeStyle&&w$e.ALPHA===w$$.ALPHA||(w$e.glTexture=null,(w$Z=this._curSubmit=w$mv.createSubmit(this,this._ib,w$O,(w$O._byteLength-64)/32*3,w$gv.create(2,0))).shaderValue.strokeStyle=w$e.strokeStyle,w$Z.shaderValue.mainID=2,w$Z.shaderValue.ALPHA=w$e.ALPHA,this._submits[this._submits._length++]=w$Z),w$Z._numEle+=6}},w$l.moveTo=function(w$v,w$l,w$L){void 0===w$L&&(w$L=!0);var w$A=this._getPath();if(w$L){var w$x=w$v,w$m=w$l;w$v=this._curMat.a*w$x+this._curMat.c*w$m,w$l=this._curMat.b*w$x+this._curMat.d*w$m}w$A.addPoint(w$v,w$l)},w$l.lineTo=function(w$v,w$l,w$L){void 0===w$L&&(w$L=!0);var w$A=this._getPath();if(w$L){var w$x=w$v,w$m=w$l;w$v=this._curMat.a*w$x+this._curMat.c*w$m,w$l=this._curMat.b*w$x+this._curMat.d*w$m}w$A.addPoint(w$v,w$l)},w$l.drawCurves=function(w$v,w$l,w$L){this.setPathId(-1),this.beginPath(),this.strokeStyle=w$L[3],this.lineWidth=w$L[4];var w$A=w$L[2];w$v+=w$L[0],w$l+=w$L[1],this.movePath(w$v,w$l),this.moveTo(w$A[0],w$A[1]);for(var w$x=2,w$m=w$A.length;w$x<w$m;)this.quadraticCurveTo(w$A[w$x++],w$A[w$x++],w$A[w$x++],w$A[w$x++]);this.stroke()},w$l.arcTo=function(w$v,w$l,w$L,w$A,w$x){if(-1==this.mId||!this.mHaveKey){var w$m=0,w$Z=0,w$O=0,w$e=this._getPath();this._curMat.copyTo(w$b._tmpMatrix),w$b._tmpMatrix.tx=w$b._tmpMatrix.ty=0,w$b._tempPoint.setTo(w$e.getEndPointX(),w$e.getEndPointY()),w$b._tmpMatrix.invertTransformPoint(w$b._tempPoint);var w$$=w$b._tempPoint.x-w$v,w$_=w$b._tempPoint.y-w$l,w$o=Math.sqrt(w$$*w$$+w$_*w$_);if(!(w$o<=1e-6)){var w$K=w$$/w$o,w$r=w$_/w$o,w$G=w$L-w$v,w$c=w$A-w$l,w$d=w$G*w$G+w$c*w$c,w$C=Math.sqrt(w$d);if(!(w$C<=1e-6)){var w$J=w$G/w$C,w$B=w$c/w$C,w$X=w$K+w$J,w$f=w$r+w$B,w$w=Math.sqrt(w$X*w$X+w$f*w$f);if(!(w$w<=1e-6)){var w$H=w$X/w$w,w$g=w$f/w$w,w$T=Math.acos(w$H*w$K+w$g*w$r),w$h=Math.PI/2-w$T,w$V=(w$o=w$x/Math.tan(w$h))*w$K+w$v,w$k=w$o*w$r+w$l,w$Q=Math.sqrt(w$o*w$o+w$x*w$x),w$M=w$v+w$H*w$Q,w$P=w$l+w$g*w$Q,w$I=0,w$t=0;if(0<=w$K*w$B-w$r*w$J){var w$a=2*w$h/w$b.SEGNUM;w$I=Math.sin(w$a),w$t=Math.cos(w$a)}else w$a=2*-w$h/w$b.SEGNUM,w$I=Math.sin(w$a),w$t=Math.cos(w$a);w$Z=this._curMat.a*w$V+this._curMat.c*w$k,w$O=this._curMat.b*w$V+this._curMat.d*w$k,w$Z==this._path.getEndPointX()&&w$O==this._path.getEndPointY()||w$e.addPoint(w$Z,w$O);var w$q=w$V-w$M,w$u=w$k-w$P;for(w$m=0;w$m<w$b.SEGNUM;w$m++){var w$R=w$q*w$t+w$u*w$I,w$N=-w$q*w$I+w$u*w$t;w$Z=w$R+w$M,w$O=w$N+w$P,w$v=this._curMat.a*w$Z+this._curMat.c*w$O,w$O=w$l=this._curMat.b*w$Z+this._curMat.d*w$O,(w$Z=w$v)==this._path.getEndPointX()&&w$O==this._path.getEndPointY()||w$e.addPoint(w$Z,w$O),w$q=w$R,w$u=w$N}}}}}},w$l.arc=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){if(void 0===w$m&&(w$m=!1),void 0===w$Z&&(w$Z=!0),-1!=this.mId){var w$O=w$u.getInstance().shapeDic[this.mId];if(w$O&&this.mHaveKey&&!w$O.needUpdate(this._curMat))return;w$l=w$v=0}var w$e,w$$=0,w$_=0,w$o=0,w$K=0,w$r=0,w$G=0,w$c=0;if(w$_=w$x-w$A,w$m)if(Math.abs(w$_)>=2*Math.PI)w$_=2*-Math.PI;else for(;0<w$_;)w$_-=2*Math.PI;else if(Math.abs(w$_)>=2*Math.PI)w$_=2*Math.PI;else for(;w$_<0;)w$_+=2*Math.PI;w$e=w$_/(w$c=w$L<101?Math.max(10,w$_*w$L/5):w$L<201?Math.max(10,w$_*w$L/20):Math.max(10,w$_*w$L/40))/2,w$o=Math.abs(4/3*(1-Math.cos(w$e))/Math.sin(w$e)),w$m&&(w$o=-w$o);var w$d=this._getPath(),w$C=NaN,w$J=NaN;for(w$G=0;w$G<=w$c;w$G++)w$$=w$A+w$_*(w$G/w$c),w$K=w$v+Math.cos(w$$)*w$L,w$r=w$l+Math.sin(w$$)*w$L,w$Z&&(w$C=w$K,w$J=w$r,w$K=this._curMat.a*w$C+this._curMat.c*w$J,w$r=this._curMat.b*w$C+this._curMat.d*w$J),w$K==this._path.getEndPointX()&&w$r==this._path.getEndPointY()||w$d.addPoint(w$K,w$r);w$K=w$v+Math.cos(w$x)*w$L,w$r=w$l+Math.sin(w$x)*w$L,w$Z&&(w$C=w$K,w$J=w$r,w$K=this._curMat.a*w$C+this._curMat.c*w$J,w$r=this._curMat.b*w$C+this._curMat.d*w$J),w$K==this._path.getEndPointX()&&w$r==this._path.getEndPointY()||w$d.addPoint(w$K,w$r)},w$l.quadraticCurveTo=function(w$v,w$l,w$L,w$A){var w$x=w$o.I,w$m=w$L,w$Z=w$A;w$L=this._curMat.a*w$m+this._curMat.c*w$Z,w$A=this._curMat.b*w$m+this._curMat.d*w$Z,w$m=w$v,w$Z=w$l,w$v=this._curMat.a*w$m+this._curMat.c*w$Z,w$l=this._curMat.b*w$m+this._curMat.d*w$Z;for(var w$O=w$x.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),w$v,w$l,w$L,w$A],30,2),w$e=0,w$$=w$O.length/2;w$e<w$$;w$e++)this.lineTo(w$O[2*w$e],w$O[2*w$e+1],!1);this.lineTo(w$L,w$A,!1)},w$l.rect=function(w$v,w$l,w$L,w$A){this._other=this._other.make(),this._other.path||(this._other.path=new w$D),this._other.path.rect(w$v,w$l,w$L,w$A)},w$l.strokeRect=function(w$v,w$l,w$L,w$A,w$x){var w$m=.5*w$x;this.line(w$v-w$m,w$l,w$v+w$L+w$m,w$l,w$x,this._curMat),this.line(w$v+w$L,w$l,w$v+w$L,w$l+w$A,w$x,this._curMat),this.line(w$v,w$l,w$v,w$l+w$A,w$x,this._curMat),this.line(w$v-w$m,w$l+w$A,w$v+w$L+w$m,w$l+w$A,w$x,this._curMat)},w$l.clip=function(){},w$l.drawPoly=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){void 0===w$Z&&(w$Z=!1),this._renderKey=0,this._shader2D.glTexture=null;var w$O=this._getPath();if(-1==this.mId)w$O.polygon(w$v,w$l,w$L,w$A,w$x||1,w$m);else if(this.mHaveKey){var w$e=w$u.getInstance().shapeDic[this.mId];w$e.setMatrix(this._curMat),w$e.rebuild(w$O.tempArray),w$O.setGeomtry(w$e)}else{var w$$=w$O.polygon(w$v,w$l,w$L,w$A,w$x||1,w$m);w$u.getInstance().addShape(this.mId,w$$),w$$.setMatrix(this._curMat)}w$O.update();var w$_,w$o=[this.mX,this.mY];if((w$_=w$mv.createShape(this,w$O.ib,w$O.vb,w$O.count,w$O.offset,w$gv.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,w$_.shaderValue.u_pos=w$o,w$_.shaderValue.u_mmat2=w$Jv.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=w$_,0<w$x){if(this.mHaveLineKey){var w$K=w$u.getInstance().shapeLineDic[this.mId];w$K.rebuild(w$O.tempArray),w$O.setGeomtry(w$K)}else w$u.getInstance().addShape(this.mId,w$O.drawLine(w$v,w$l,w$L,w$x,w$m));w$O.update(),(w$_=w$mv.createShape(this,w$O.ib,w$O.vb,w$O.count,w$O.offset,w$gv.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,w$_.shaderValue.u_mmat2=w$Jv.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=w$_}},w$l.drawParticle=function(w$v,w$l,w$L){w$L.x=w$v,w$L.y=w$l,this._submits[this._submits._length++]=w$L},w$l._getPath=function(){return this._path||(this._path=new w$D)},w$A(0,w$l,"globalCompositeOperation",function(){return w$p.NAMES[this._nBlendType]},function(w$v){var w$l=w$p.TOINT[w$v];null==w$l||this._nBlendType===w$l||(w$S.save(this,65536,this,!0),this._curSubmit=w$mv.RENDERBASE,this._renderKey=0,this._nBlendType=w$l)}),w$A(0,w$l,"strokeStyle",function(){return this._shader2D.strokeStyle},function(w$v){this._shader2D.strokeStyle.equal(w$v)||(w$S.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=w$Y.create(w$v))}),w$A(0,w$l,"globalAlpha",function(){return this._shader2D.ALPHA},function(w$v){(w$v=Math.floor(1e3*w$v)/1e3)!=this._shader2D.ALPHA&&(w$S.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=w$v)}),w$A(0,w$l,"asBitmap",null,function(w$v){if(w$v){if(this._targets||(this._targets=new w$n),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),w$A(0,w$l,"fillStyle",function(){return this._shader2D.fillStyle},function(w$v){this._shader2D.fillStyle.equal(w$v)||(w$S.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=w$Y.create(w$v))}),w$A(0,w$l,"textAlign",function(){return this._other.textAlign},function(w$v){this._other.textAlign===w$v||(this._other=this._other.make(),w$S.save(this,32768,this._other,!1),this._other.textAlign=w$v)}),w$A(0,w$l,"lineWidth",function(){return this._other.lineWidth},function(w$v){this._other.lineWidth===w$v||(this._other=this._other.make(),w$S.save(this,256,this._other,!1),this._other.lineWidth=w$v)}),w$A(0,w$l,"textBaseline",function(){return this._other.textBaseline},function(w$v){this._other.textBaseline===w$v||(this._other=this._other.make(),w$S.save(this,16384,this._other,!1),this._other.textBaseline=w$v)}),w$A(0,w$l,"font",null,function(w$v){w$v!=this._other.font.toString()&&(this._other=this._other.make(),w$S.save(this,8,this._other,!1),this._other.font===w$Gv.EMPTY?this._other.font=new w$Gv(w$v):this._other.font.setFont(w$v))}),w$b.__init__=function(){w$L.DEFAULT=new w$L},w$b._tempPoint=new w$h,w$b._SUBMITVBSIZE=32e3,w$b._MAXSIZE=99999999,w$b._RECTVBSIZE=16,w$b.MAXCLIPRECT=new w$V(0,0,99999999,99999999),w$b._COUNT=0,w$b._tmpMatrix=new w$T,w$b.SEGNUM=32,w$b._contextcount=0,w$Z(w$b,["_fontTemp",function(){return this._fontTemp=new w$Gv},"_drawStyleTemp",function(){return this._drawStyleTemp=new w$Y(null)}]),w$b.__init$=function(){w$L=function(){function w$v(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=w$Gv.EMPTY}w$K(w$v,"");var w$l=w$v.prototype;return w$l.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=w$Gv.EMPTY},w$l.make=function(){return this===w$v.DEFAULT?new w$v:this},w$v.DEFAULT=null,w$v}()},w$b}(),w$gv=function(w$v){function w$A(w$v,w$l){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,w$A.__super.call(this),this.defines=new w$kv,this.position=w$A._POSITION,this.mainID=w$v,this.subID=w$l,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=w$v|w$l,this._inClassCache=w$A._cache[this._cacheID],0<w$v&&!this._inClassCache&&(this._inClassCache=w$A._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}w$K(w$A,"laya.webgl.shader.d2.value.Value2D",w$N);var w$l=w$A.prototype;return w$l.setValue=function(w$v){},w$l.refresh=function(){var w$v=this.size;return w$v[0]=w$Jv.width,w$v[1]=w$Jv.height,this.alpha=this.ALPHA*w$Jv.worldAlpha,this.mmat=w$Jv.worldMatrix4,this},w$l._ShaderWithCompile=function(){return w$Ev.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,w$nv.create)},w$l._withWorldShaderDefines=function(){var w$v=w$Jv.worldShaderDefines,w$l=w$Ev.sharders[this.mainID|this.defines._value|w$v.getValue()];if(!w$l){var w$L,w$A={};for(w$L in this.defines.toNameDic())w$A[w$L]="";for(w$L in w$v.toNameDic())w$A[w$L]="";w$l=w$Ev.withCompile2D(0,this.mainID,w$A,this.mainID|this.defines._value|w$v.getValue(),w$nv.create)}var w$x=w$Jv.worldFilters;if(!w$x)return w$l;for(var w$m,w$Z=w$x.length,w$O=0;w$O<w$Z;w$O++)(w$m=w$x[w$O])&&w$m.action.setValue(this);return w$l},w$l.upload=function(){var w$v=w$Jv;this.alpha=this.ALPHA*w$v.worldAlpha,w$Jv.worldMatrix4!==w$Jv.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),w$Xv.shaderHighPrecision&&this.defines.add(1024);var w$l,w$L=w$v.worldShaderDefines?this._withWorldShaderDefines():w$Ev.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=w$v.width,this.size[1]=w$v.height,this.mmat=w$v.worldMatrix4,w$qv.activeShader!==w$L?w$L._shaderValueWidth!==w$v.width||w$L._shaderValueHeight!==w$v.height?(w$L._shaderValueWidth=w$v.width,w$L._shaderValueHeight=w$v.height):w$l=w$L._params2dQuick2||w$L._make2dQuick2():w$L._shaderValueWidth!==w$v.width||w$L._shaderValueHeight!==w$v.height?(w$L._shaderValueWidth=w$v.width,w$L._shaderValueHeight=w$v.height):w$l=w$L._params2dQuick1||w$L._make2dQuick1(),w$L.upload(this,w$l)},w$l.setFilters=function(w$v){if(this.filters=w$v)for(var w$l,w$L=w$v.length,w$A=0;w$A<w$L;w$A++)(w$l=w$v[w$A])&&(this.defines.add(w$l.type),w$l.action.setValue(this))},w$l.clear=function(){this.defines.setValue(this.subID)},w$l.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},w$A._initone=function(w$v,w$l){w$A._typeClass[w$v]=w$l,w$A._cache[w$v]=[],w$A._cache[w$v]._length=0},w$A.__init__=function(){w$A._POSITION=[2,5126,!1,4*w$cv.BYTES_PE,0],w$A._TEXCOORD=[2,5126,!1,4*w$cv.BYTES_PE,2*w$cv.BYTES_PE],w$A._initone(2,w$bv),w$A._initone(4,w$pv),w$A._initone(256,w$jv),w$A._initone(512,w$Nv),w$A._initone(1,w$Fv),w$A._initone(65,w$iv),w$A._initone(9,w$Fv)},w$A.create=function(w$v,w$l){var w$L=w$A._cache[w$v|w$l];return w$L._length?w$L[--w$L._length]:new w$A._typeClass[w$v|w$l](w$l)},w$A._POSITION=null,w$A._TEXCOORD=null,w$A._cache=[],w$A._typeClass=[],w$A.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],w$A}(),w$Tv=function(w$v){function w$d(w$v,w$l){w$d.__super.call(this,w$v,w$l)}w$K(w$d,"laya.webgl.utils.RenderSprite3D",w$J);var w$l=w$d.prototype;return w$l.onCreate=function(w$v){switch(w$v){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},w$l._mask=function(w$v,w$l,w$L,w$A){var w$x,w$m,w$Z=this._next,w$O=w$v.mask;if(w$O){w$l.ctx.save();var w$e=w$l.ctx.globalCompositeOperation,w$$=new w$V;if(w$$.copyFrom(w$O.getBounds()),w$$.width=Math.round(w$$.width),w$$.height=Math.round(w$$.height),w$$.x=Math.round(w$$.x),w$$.y=Math.round(w$$.y),0<w$$.width&&0<w$$.height){var w$_=w$v._style._tf,w$o=w$Ov.create();w$o.addValue("bounds",w$$),w$x=w$Zv.create([w$o,w$l],laya.webgl.utils.RenderSprite3D.tmpTarget),w$l.addRenderObject(w$x),w$O.render(w$l,-w$$.x,-w$$.y),w$x=w$Zv.create([w$o],laya.webgl.utils.RenderSprite3D.endTmpTarget),w$l.addRenderObject(w$x),w$l.ctx.save(),w$l.clipRect(w$L-w$_.translateX+w$$.x,w$A-w$_.translateY+w$$.y,w$$.width,w$$.height),w$Z._fun.call(w$Z,w$v,w$l,w$L,w$A),w$l.ctx.restore(),w$m=w$_v.create(6),w$e=w$l.ctx.globalCompositeOperation,w$m.blendMode="mask",w$l.addRenderObject(w$m),w$T.TEMP.identity();var w$K=w$gv.create(1,0),w$r=w$a.INV_UV,w$G=w$$.width,w$c=w$$.height;(w$$.width<32||w$$.height<32)&&((w$r=w$d.tempUV)[0]=0,w$r[1]=0,w$r[2]=32<=w$$.width?1:w$$.width/32,w$r[3]=0,w$r[4]=32<=w$$.width?1:w$$.width/32,w$r[5]=32<=w$$.height?1:w$$.height/32,w$r[6]=0,w$r[7]=32<=w$$.height?1:w$$.height/32,w$$.width=32<=w$$.width?w$$.width:32,w$$.height=32<=w$$.height?w$$.height:32,w$r[1]*=-1,w$r[3]*=-1,w$r[5]*=-1,w$r[7]*=-1,w$r[1]+=1,w$r[3]+=1,w$r[5]+=1,w$r[7]+=1),w$l.ctx.drawTarget(w$o,w$L+w$$.x-w$_.translateX,w$A+w$$.y-w$_.translateY,w$G,w$c,w$T.TEMP,"tmpTarget",w$K,w$r,6),w$x=w$Zv.create([w$o],laya.webgl.utils.RenderSprite3D.recycleTarget),w$l.addRenderObject(w$x),(w$m=w$_v.create(6)).blendMode=w$e,w$l.addRenderObject(w$m)}w$l.ctx.restore()}else w$Z._fun.call(w$Z,w$v,w$l,w$L,w$A)},w$l._blend=function(w$v,w$l,w$L,w$A){var w$x=w$v._style,w$m=this._next;w$x.blendMode?(w$l.ctx.save(),w$l.ctx.globalCompositeOperation=w$x.blendMode,w$m._fun.call(w$m,w$v,w$l,w$L,w$A),w$l.ctx.restore()):w$m._fun.call(w$m,w$v,w$l,w$L,w$A)},w$l._transform=function(w$v,w$l,w$L,w$A){var w$x=w$v.transform,w$m=this._next;if(w$x&&w$m!=w$J.NORENDER){var w$Z=w$l.ctx;w$v._style;w$x.tx=w$L,w$x.ty=w$A;var w$O=w$Z._getTransformMatrix(),w$e=w$O.clone();w$T.mul(w$x,w$O,w$O),w$O._checkTransform(),w$x.tx=w$x.ty=0,w$m._fun.call(w$m,w$v,w$l,0,0),w$e.copyTo(w$O),w$e.destroy()}else w$m._fun.call(w$m,w$v,w$l,w$L,w$A)},w$d.tmpTarget=function(w$v,w$l){var w$L=w$v.getValue("bounds"),w$A=w$uv.create(w$L.width,w$L.height);w$A.start(),w$A.clear(0,0,0,0),w$v.addValue("tmpTarget",w$A)},w$d.endTmpTarget=function(w$v){w$v.getValue("tmpTarget").end()},w$d.recycleTarget=function(w$v){w$v.getValue("tmpTarget").recycle(),w$v.recycle()},w$Z(w$d,["tempUV",function(){return this.tempUV=new Array(8)}]),w$d}(),w$hv=function(w$v){function w$l(){this.data=null,w$l.__super.call(this)}w$K(w$l,"laya.filters.webgl.ColorFilterActionGL",w$R);var w$L=w$l.prototype;return w$w.imps(w$L,{"laya.filters.IFilterActionGL":!0}),w$L.setValue=function(w$v){w$v.colorMat=this.data._mat,w$v.colorAlpha=this.data._alpha},w$L.apply3d=function(w$v,w$l,w$L,w$A,w$x){var w$m=w$v.getValue("bounds"),w$Z=w$gv.create(1,0);w$Z.setFilters([this.data]);var w$O=w$T.TEMP;w$O.identity(),w$L.ctx.drawTarget(w$v,0,0,w$m.width,w$m.height,w$O,"src",w$Z)},w$l}(),w$Vv=function(w$v){function w$m(w$v,w$l,w$L,w$A,w$x){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,w$m.__super.call(this,w$v,w$l,w$x),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new w$Yv,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=w$L,this._atlasCanvas.height=w$A,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}w$K(w$m,"laya.webgl.atlas.Atlaser",w$b);var w$l=w$m.prototype;return w$l.computeUVinAtlasTexture=function(w$v,w$l,w$L,w$A){var w$x=w$j.atlasTextureWidth,w$m=w$j.atlasTextureHeight,w$Z=w$L/w$x,w$O=w$A/w$m,w$e=(w$L+w$v.bitmap.width)/w$x,w$$=(w$A+w$v.bitmap.height)/w$m,w$_=w$v.bitmap.width/w$x,w$o=w$v.bitmap.height/w$m;w$v.uv=[w$Z+w$l[0]*w$_,w$O+w$l[1]*w$o,w$e-(1-w$l[2])*w$_,w$O+w$l[3]*w$o,w$e-(1-w$l[4])*w$_,w$$-(1-w$l[5])*w$o,w$Z+w$l[6]*w$_,w$$-(1-w$l[7])*w$o]},w$l.findBitmapIsExist=function(w$v){if(w$v instanceof laya.webgl.resource.WebGLImage){var w$l=w$v,w$L=w$l.url,w$A=this._InAtlasWebGLImagesKey[w$L||w$l.id];if(w$A)return w$A.offsetInfoID}return-1},w$l.addToAtlasTexture=function(w$v,w$l,w$L){if(w$v instanceof laya.webgl.resource.WebGLImage){var w$A=w$v,w$x=w$A.url;this._InAtlasWebGLImagesKey[w$x||w$A.id]={bitmap:w$v,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([w$l,w$L])}this._atlasCanvas.texSubImage2D(w$l,w$L,w$v.atlasSource),w$v.clearAtlasSource()},w$l.addToAtlas=function(w$v,w$l,w$L){w$v._atlasID=this._inAtlasTextureKey.length;var w$A=w$v.uv.slice(),w$x=w$v.bitmap;this._inAtlasTextureKey.push(w$v),this._inAtlasTextureOriUVValue.push(w$A),this._inAtlasTextureBitmapValue.push(w$x),this.computeUVinAtlasTexture(w$v,w$A,w$l,w$L),w$v.bitmap=this._atlasCanvas},w$l.clear=function(){for(var w$v=0,w$l=this._inAtlasTextureKey.length;w$v<w$l;w$v++)this._inAtlasTextureKey[w$v].bitmap=this._inAtlasTextureBitmapValue[w$v],this._inAtlasTextureKey[w$v].uv=this._inAtlasTextureOriUVValue[w$v],this._inAtlasTextureKey[w$v]._atlasID=-1,this._inAtlasTextureKey[w$v].bitmap.lock=!1,this._inAtlasTextureKey[w$v].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},w$l.dispose=function(){this.clear(),this._atlasCanvas.destroy()},w$A(0,w$l,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),w$A(0,w$l,"texture",function(){return this._atlasCanvas}),w$A(0,w$l,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),w$m}(),w$kv=function(w$v){function w$L(){w$L.__super.call(this,w$L.__name2int,w$L.__int2name,w$L.__int2nameMap)}return w$K(w$L,"laya.webgl.shader.d2.ShaderDefines2D",w$z),w$L.__init__=function(){w$L.reg("TEXTURE2D",1),w$L.reg("COLOR2D",2),w$L.reg("PRIMITIVE",4),w$L.reg("GLOW_FILTER",8),w$L.reg("BLUR_FILTER",16),w$L.reg("COLOR_FILTER",32),w$L.reg("COLOR_ADD",64),w$L.reg("WORLDMAT",128),w$L.reg("FILLTEXTURE",256),w$L.reg("FSHIGHPRECISION",1024),w$L.reg("TXTALPHA",2048),w$L.reg("TXTCOMPRESS",4096)},w$L.reg=function(w$v,w$l){w$z._reg(w$v,w$l,w$L.__name2int,w$L.__int2name)},w$L.toText=function(w$v,w$l,w$L){return w$z._toText(w$v,w$l,w$L)},w$L.toInt=function(w$v){return w$z._toInt(w$v,w$L.__name2int)},w$L.TEXTURE2D=1,w$L.COLOR2D=2,w$L.PRIMITIVE=4,w$L.FILTERGLOW=8,w$L.FILTERBLUR=16,w$L.FILTERCOLOR=32,w$L.COLORADD=64,w$L.WORLDMAT=128,w$L.FILLTEXTURE=256,w$L.SKINMESH=512,w$L.SHADERDEFINE_FSHIGHPRECISION=1024,w$L.TXTALPHA=2048,w$L.TXTCOMPRESS=4096,w$L.__name2int={},w$L.__int2name=[],w$L.__int2nameMap=[],w$L}(),w$Qv=(function(w$v){function w$O(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){w$O.__super.call(this,w$v,w$l,w$L,w$A,40,w$x,w$m,w$Z)}w$K(w$O,"laya.webgl.shapes.Ellipse",w$Lv)}(),function(w$v){function w$m(w$v,w$l,w$L,w$A,w$x){this._points=[],this.rebuild(w$L),w$m.__super.call(this,w$v,w$l,0,0,0,w$x,w$A,w$x,0)}w$K(w$m,"laya.webgl.shapes.Line",w$Lv);var w$l=w$m.prototype;return w$l.rebuild=function(w$v){var w$l=w$v.length;w$l!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(w$l/2-1)),this.mFloat32Array=new Float32Array(5*w$l)),this._points.length=0;for(var w$L=NaN,w$A=NaN,w$x=-1,w$m=-1,w$Z=w$v.length/2,w$O=0;w$O<w$Z;w$O++)w$L=w$v[2*w$O],w$A=w$v[2*w$O+1],(.01<Math.abs(w$x-w$L)||.01<Math.abs(w$m-w$A))&&this._points.push(w$L,w$A),w$x=w$L,w$m=w$A},w$l.getData=function(w$v,w$l,w$L){var w$A=[],w$x=[];0<this.borderWidth&&this.createLine2(this._points,w$A,this.borderWidth,w$L,w$x,this._points.length/2),this.mUint16Array.set(w$A,0),this.mFloat32Array.set(w$x,0),w$v.append(this.mUint16Array),w$l.append(this.mFloat32Array)},w$m}()),w$Mv=function(w$v){function w$o(w$v,w$l,w$L,w$A,w$x){this._points=[];for(var w$m=NaN,w$Z=NaN,w$O=-1,w$e=-1,w$$=w$L.length/2-1,w$_=0;w$_<w$$;w$_++)w$m=w$L[2*w$_],w$Z=w$L[2*w$_+1],(.01<Math.abs(w$O-w$m)||.01<Math.abs(w$e-w$Z))&&this._points.push(w$m,w$Z),w$O=w$m,w$e=w$Z;w$m=w$L[2*w$$],w$Z=w$L[2*w$$+1],w$O=this._points[0],w$e=this._points[1],(.01<Math.abs(w$O-w$m)||.01<Math.abs(w$e-w$Z))&&this._points.push(w$m,w$Z),w$o.__super.call(this,w$v,w$l,0,0,this._points.length/2,0,w$A,w$x)}w$K(w$o,"laya.webgl.shapes.LoopLine",w$Lv);var w$l=w$o.prototype;return w$l.getData=function(w$v,w$l,w$L){if(0<this.borderWidth){for(var w$A=this.color,w$x=(w$A>>16&255)/255,w$m=(w$A>>8&255)/255,w$Z=(255&w$A)/255,w$O=[],w$e=0,w$$=0,w$_=[],w$o=Math.floor(this._points.length/2),w$K=0;w$K<w$o;w$K++)w$e=this._points[2*w$K],w$$=this._points[2*w$K+1],w$O.push(this.x+w$e,this.y+w$$,w$x,w$m,w$Z);this.createLoopLine(w$O,w$_,this.borderWidth,w$L+w$O.length/5),w$v.append(new Uint16Array(w$_)),w$l.append(new Float32Array(w$O))}},w$l.createLoopLine=function(w$v,w$l,w$L,w$A,w$x,w$m){w$v.length;var w$Z=w$v.concat(),w$O=w$x||w$v,w$e=this.borderColor,w$$=(w$e>>16&255)/255,w$_=(w$e>>8&255)/255,w$o=(255&w$e)/255,w$K=[w$Z[0],w$Z[1]],w$r=[w$Z[w$Z.length-5],w$Z[w$Z.length-4]],w$G=w$r[0]+.5*(w$K[0]-w$r[0]),w$c=w$r[1]+.5*(w$K[1]-w$r[1]);w$Z.unshift(w$G,w$c,0,0,0),w$Z.push(w$G,w$c,0,0,0);var w$d,w$C,w$J,w$B,w$X,w$f,w$w,w$H,w$g,w$T,w$h,w$V,w$k,w$Q,w$M,w$P,w$I,w$t,w$a,w$q,w$u=w$Z.length/5,w$R=w$A,w$N=w$L/2;w$J=w$Z[0],w$B=w$Z[1],w$T=w$J-(w$X=w$Z[5]),w$g=(w$g=-(w$B-(w$f=w$Z[6])))/(w$q=Math.sqrt(w$g*w$g+w$T*w$T))*w$N,w$T=w$T/w$q*w$N,w$O.push(w$J-w$g,w$B-w$T,w$$,w$_,w$o,w$J+w$g,w$B+w$T,w$$,w$_,w$o);for(var w$b=1;w$b<w$u-1;w$b++)w$J=w$Z[5*(w$b-1)],w$B=w$Z[5*(w$b-1)+1],w$X=w$Z[5*w$b],w$f=w$Z[5*w$b+1],w$w=w$Z[5*(w$b+1)],w$H=w$Z[5*(w$b+1)+1],w$T=w$J-w$X,w$V=w$X-w$w,w$M=(-(w$g=(w$g=-(w$B-w$f))/(w$q=Math.sqrt(w$g*w$g+w$T*w$T))*w$N)+w$J)*(-(w$T=w$T/w$q*w$N)+w$f)-(-w$g+w$X)*(-w$T+w$B),w$t=(-(w$h=(w$h=-(w$f-w$H))/(w$q=Math.sqrt(w$h*w$h+w$V*w$V))*w$N)+w$w)*(-(w$V=w$V/w$q*w$N)+w$f)-(-w$h+w$X)*(-w$V+w$H),w$a=(w$k=-w$T+w$B-(-w$T+w$f))*(w$I=-w$h+w$X-(-w$h+w$w))-(w$P=-w$V+w$H-(-w$V+w$f))*(w$Q=-w$g+w$X-(-w$g+w$J)),Math.abs(w$a)<.1?(w$a+=10.1,w$O.push(w$X-w$g,w$f-w$T,w$$,w$_,w$o,w$X+w$g,w$f+w$T,w$$,w$_,w$o)):(((w$d=(w$Q*w$t-w$I*w$M)/w$a)-w$X)*(w$d-w$X)+((w$C=(w$P*w$M-w$k*w$t)/w$a)-w$f)+(w$C-w$f),w$O.push(w$d,w$C,w$$,w$_,w$o,w$X-(w$d-w$X),w$f-(w$C-w$f),w$$,w$_,w$o));w$m&&(w$l=w$m);var w$j=this.edges+1;for(w$b=1;w$b<w$j;w$b++)w$l.push(w$R+2*(w$b-1),w$R+2*(w$b-1)+1,w$R+2*w$b+1,w$R+2*w$b+1,w$R+2*w$b,w$R+2*(w$b-1));return w$l.push(w$R+2*(w$b-1),w$R+2*(w$b-1)+1,w$R+1,w$R+1,w$R,w$R+2*(w$b-1)),w$O},w$o}(),w$Pv=function(w$v){function w$Z(w$v,w$l,w$L,w$A,w$x,w$m){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=w$T.create(),this._points=w$L.slice(0,w$L.length),w$Z.__super.call(this,w$v,w$l,0,0,this._points.length/2,w$A,w$x,w$m)}w$K(w$Z,"laya.webgl.shapes.Polygon",w$Lv);var w$l=w$Z.prototype;return w$l.rebuild=function(w$v){this._repaint||(this._points.length=0,this._points=this._points.concat(w$v))},w$l.setMatrix=function(w$v){w$v.copyTo(this._mat)},w$l.needUpdate=function(w$v){return this._repaint=this._mat.a==w$v.a&&this._mat.b==w$v.b&&this._mat.c==w$v.c&&this._mat.d==w$v.d&&this._mat.tx==w$v.tx&&this._mat.ty==w$v.ty,!this._repaint},w$l.getData=function(w$v,w$l,w$L){var w$A,w$x=0,w$m=this._points,w$Z=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=w$L){for(this._start=w$L,w$A=[],w$Z=this.earcutTriangles.length,w$x=0;w$x<w$Z;w$x++)w$A.push(this.earcutTriangles[w$x]+w$L);this.mUint16Array=new Uint16Array(w$A)}}else{this._start=w$L,w$A=[];var w$O=[],w$e=[],w$$=this.color,w$_=(w$$>>16&255)/255,w$o=(w$$>>8&255)/255,w$K=(255&w$$)/255;for(w$Z=Math.floor(w$m.length/2),w$x=0;w$x<w$Z;w$x++)w$O.push(this.x+w$m[2*w$x],this.y+w$m[2*w$x+1],w$_,w$o,w$K),w$e.push(this.x+w$m[2*w$x],this.y+w$m[2*w$x+1]);for(this.earcutTriangles=w$Av.earcut(w$e,null,2),w$Z=this.earcutTriangles.length,w$x=0;w$x<w$Z;w$x++)w$A.push(this.earcutTriangles[w$x]+w$L);this.mUint16Array=new Uint16Array(w$A),this.mFloat32Array=new Float32Array(w$O)}w$v.append(this.mUint16Array),w$l.append(this.mFloat32Array)},w$Z}(),w$Iv=function(w$v){function w$m(){this._matrix=new w$T,this._matrix4=w$cv.defaultMatrix4.concat(),w$m.__super.call(this,1e4),this.shaderValue=new w$gv(0,0)}w$K(w$m,"laya.webgl.submit.SubmitCanvas",w$mv);var w$l=w$m.prototype;return w$l.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var w$v=w$Jv.worldAlpha,w$l=w$Jv.worldMatrix4,w$L=w$Jv.worldMatrix,w$A=w$Jv.worldFilters,w$x=w$Jv.worldShaderDefines,w$m=this.shaderValue,w$Z=this._matrix,w$O=this._matrix4,w$e=w$T.TEMP;return w$T.mul(w$Z,w$L,w$e),w$O[0]=w$e.a,w$O[1]=w$e.b,w$O[4]=w$e.c,w$O[5]=w$e.d,w$O[12]=w$e.tx,w$O[13]=w$e.ty,w$Jv.worldMatrix=w$e.clone(),w$Jv.worldMatrix4=w$O,w$Jv.worldAlpha=w$Jv.worldAlpha*w$m.alpha,w$m.filters&&w$m.filters.length&&(w$Jv.worldFilters=w$m.filters,w$Jv.worldShaderDefines=w$m.defines),this._ctx_src.flush(),w$Jv.worldAlpha=w$v,w$Jv.worldMatrix4=w$l,w$Jv.worldMatrix.destroy(),w$Jv.worldMatrix=w$L,w$Jv.worldFilters=w$A,w$Jv.worldShaderDefines=w$x,1},w$l.releaseRender=function(){var w$v=w$m._cache;this._ctx_src=null,w$v[w$v._length++]=this},w$l.getRenderType=function(){return 10003},w$m.create=function(w$v,w$l,w$L){var w$A=w$m._cache._length?w$m._cache[--w$m._cache._length]:new w$m;w$A._ctx_src=w$v;var w$x=w$A.shaderValue;return w$x.alpha=w$l,w$x.defines.setValue(0),w$L&&w$L.length&&w$x.setFilters(w$L),w$A},w$m._cache=((w$m._cache=[])._length=0,w$m._cache),w$m}(),w$tv=function(w$v){function w$$(w$v){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===w$v&&(w$v=1e4),w$$.__super.call(this,w$v)}w$K(w$$,"laya.webgl.submit.SubmitTexture",w$mv);var w$l=w$$.prototype;return w$l.releaseRender=function(){var w$v=w$$._cache;(w$v[w$v._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},w$l.addTexture=function(w$v,w$l){this._texsID[this._texs.length]=w$v._uvID,this._texs.push(w$v),this._vbPos.push(w$l)},w$l.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var w$v=this.shaderValue.textureHost.bitmap;if(null!==w$v)for(var w$l=this._vb.getFloat32Array(),w$L=0,w$A=this._texs.length;w$L<w$A;w$L++){var w$x=this._texs[w$L];w$x.active();var w$m=w$x.uv;if(this._texsID[w$L]!==w$x._uvID){this._texsID[w$L]=w$x._uvID;var w$Z=this._vbPos[w$L];w$l[w$Z+2]=w$m[0],w$l[w$Z+3]=w$m[1],w$l[w$Z+6]=w$m[2],w$l[w$Z+7]=w$m[3],w$l[w$Z+10]=w$m[4],w$l[w$Z+11]=w$m[5],w$l[w$Z+14]=w$m[6],w$l[w$Z+15]=w$m[7],this._vb.setNeedUpload()}w$x.bitmap!==w$v&&(this._isSameTexture=!1)}}},w$l.renderSubmit=function(){if(0===this._numEle)return w$$._shaderSet=!1,1;var w$v=this.shaderValue.textureHost;if(w$v){var w$l=w$v.source;if(!w$v.bitmap||!w$l)return w$$._shaderSet=!1,1;this.shaderValue.texture=w$l,w$v.alphaTexture&&w$v.alphaTexture.source&&(this.shaderValue.texture1=w$v.alphaTexture.source)}this._vb.bind_upload(this._ib);var w$L=w$Xv.mainContext;if(w$p.activeBlendFunction!==this._blendFn&&(w$L.enable(3042),this._blendFn(w$L),w$p.activeBlendFunction=this._blendFn),w$M.drawCall++,w$M.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&w$qv.activeShader&&w$$._shaderSet?(w$qv.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&w$qv.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),w$$._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var w$A=w$v.bitmap,w$x=0,w$m=w$qv.activeShader,w$Z=0,w$O=this._texs.length;w$Z<w$O;w$Z++){var w$e=this._texs[w$Z];w$e.bitmap===w$A&&w$Z+1!==w$O||(w$m.uploadTexture2D(w$e.source),w$L.drawElements(4,6*(w$Z-w$x+1),5123,this._startIdx+6*w$x*w$cv.BYTES_PIDX),w$A=w$e.bitmap,w$x=w$Z)}else w$L.drawElements(4,this._numEle,5123,this._startIdx);return 1},w$$.create=function(w$v,w$l,w$L,w$A,w$x){var w$m=w$$._cache._length?w$$._cache[--w$$._cache._length]:new w$$;null==w$L&&((w$L=w$m._selfVb||(w$m._selfVb=w$zv.create(-1))).clear(),w$A=0),w$m._ib=w$l,w$m._vb=w$L,w$m._startIdx=w$A*w$cv.BYTES_PIDX,w$m._numEle=0;var w$Z=w$v._nBlendType;w$m._blendFn=w$v._targets?w$p.targetFns[w$Z]:w$p.fns[w$Z],w$m.shaderValue=w$x,w$m.shaderValue.setValue(w$v._shader2D);var w$O=w$v._shader2D.filters;return w$O&&w$m.shaderValue.setFilters(w$O),w$m},w$$._cache=((w$$._cache=[])._length=0,w$$._cache),w$$._shaderSet=!0,w$$}(),w$av=function(w$v){function w$C(){w$C.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}w$K(w$C,"laya.webgl.utils.MeshTexture",w$Cv);var w$l=w$C.prototype;return w$l.addData=function(w$v,w$l,w$L,w$A,w$x,w$m){for(var w$Z=w$v.length/2,w$O=this._vb.needSize(w$Z*w$C.const_stride)>>2,w$e=this._vb.getFloat32Array(),w$$=0,w$_=0;w$_<w$Z;w$_++){var w$o=w$v[w$$],w$K=w$v[w$$+1],w$r=w$o*w$A.a+w$K*w$A.c+w$A.tx,w$G=w$o*w$A.b+w$K*w$A.d+w$A.ty;w$e[w$O++]=w$r,w$e[w$O++]=w$G,w$e[w$O++]=w$l[w$$],w$e[w$O++]=w$l[w$$+1],w$$+=2}this._vb.setNeedUpload();var w$c=this.vertNum;if(0<w$c){(w$Z=w$L.length)>w$C.tmpIdx.length&&(w$C.tmpIdx=new Uint16Array(w$Z));for(var w$d=0;w$d<w$Z;w$d++)w$C.tmpIdx[w$d]=w$L[w$d]+w$c;this._ib.appendU16Array(w$C.tmpIdx,w$L.length)}else this._ib.append(w$L);this._ib.setNeedUpload(),this.vertNum+=w$Z,this.indexNum+=w$L.length},w$l.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},w$l.destroy=function(){this._ib.destroy(),this._vb.destroy()},w$C.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new w$C},w$C.const_stride=16,w$C._POOL=[],w$Z(w$C,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),w$C}(),w$qv=function(w$v){function w$l(){w$l.__super.call(this),this.lock=!0}return w$K(w$l,"laya.webgl.shader.BaseShader",w$B),w$l.activeShader=null,w$l.bindShader=null,w$l}(),w$uv=function(w$l){function w$_(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===w$L&&(w$L=6408),void 0===w$A&&(w$A=5121),void 0===w$x&&(w$x=34041),void 0===w$m&&(w$m=!1),void 0===w$Z&&(w$Z=!1),void 0===w$O&&(w$O=-1),void 0===w$e&&(w$e=-1),this._type=1,this._w=w$v,this._h=w$l,this._surfaceFormat=w$L,this._surfaceType=w$A,this._depthStencilFormat=w$x,w$C.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=w$m,this._repeat=w$Z,this._minFifter=w$O,this._magFifter=w$e,this._createWebGLRenderTarget(),this.bitmap.lock=!0,w$_.__super.call(this,this.bitmap,w$a.INV_UV)}w$K(w$_,"laya.webgl.resource.RenderTarget2D",w$l);var w$v=w$_.prototype;return w$w.imps(w$v,{"laya.resource.IDispose":!0}),w$v.getType=function(){return this._type},w$v.getTexture=function(){return this},w$v.size=function(w$v,w$l){this._w==w$v&&this._h==w$l||(this._w=w$v,this._h=w$l,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},w$v.release=function(){this.destroy()},w$v.recycle=function(){w$_.POOL.push(this)},w$v.start=function(){var w$v=w$Xv.mainContext;return this._preRenderTarget=w$Jv.curRenderTarget,w$Jv.curRenderTarget=this,w$v.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(w$v.viewport(0,0,this._w,this._h),this._svWidth=w$Jv.width,this._svHeight=w$Jv.height,w$Jv.width=this._w,w$Jv.height=this._h,w$qv.activeShader=null),this},w$v.clear=function(w$v,w$l,w$L,w$A){void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0),void 0===w$A&&(w$A=1);var w$x=w$Xv.mainContext;w$x.clearColor(w$v,w$l,w$L,w$A);var w$m=16384;switch(this._depthStencilFormat){case 33189:w$m|=256;break;case 36168:w$m|=1024;break;case 34041:w$m|=256,w$m|=1024}w$x.clear(w$m)},w$v.end=function(){var w$v=w$Xv.mainContext;w$v.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,w$Jv.curRenderTarget=this._preRenderTarget,1==this._type?(w$v.viewport(0,0,this._svWidth,this._svHeight),w$Jv.width=this._svWidth,w$Jv.height=this._svHeight,w$qv.activeShader=null):w$v.viewport(0,0,w$w.stage.width,w$w.stage.height)},w$v.getData=function(w$v,w$l,w$L,w$A){var w$x=w$Xv.mainContext;if(w$x.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===w$x.checkFramebufferStatus(36160)))return w$x.bindFramebuffer(36160,null),null;var w$m=new Uint8Array(this._w*this._h*4);return w$x.readPixels(w$v,w$l,w$L,w$A,this._surfaceFormat,this._surfaceType,w$m),w$x.bindFramebuffer(36160,null),w$m},w$v.destroy=function(w$v){void 0===w$v&&(w$v=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,w$l.prototype.destroy.call(this))},w$v.dispose=function(){},w$v._createWebGLRenderTarget=function(){this.bitmap=new w$yv(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(w$v){this.event("recovered")})},w$A(0,w$v,"surfaceFormat",function(){return this._surfaceFormat}),w$A(0,w$v,"magFifter",function(){return this._magFifter}),w$A(0,w$v,"surfaceType",function(){return this._surfaceType}),w$A(0,w$v,"mipMap",function(){return this._mipMap}),w$A(0,w$v,"depthStencilFormat",function(){return this._depthStencilFormat}),w$A(0,w$v,"minFifter",function(){return this._minFifter}),w$A(0,w$v,"source",function(){return this._alreadyResolved?w$w.superGet(w$a,this,"source"):null}),w$_.create=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e){void 0===w$L&&(w$L=6408),void 0===w$A&&(w$A=5121),void 0===w$x&&(w$x=34041),void 0===w$m&&(w$m=!1),void 0===w$Z&&(w$Z=!1),void 0===w$O&&(w$O=-1),void 0===w$e&&(w$e=-1);var w$$=w$_.POOL.pop();return w$$||(w$$=new w$_(w$v,w$l)),w$$.bitmap&&w$$._w==w$v&&w$$._h==w$l&&w$$._surfaceFormat==w$L&&w$$._surfaceType==w$A&&w$$._depthStencilFormat==w$x&&w$$._mipMap==w$m&&w$$._repeat==w$Z&&w$$._minFifter==w$O&&w$$._magFifter==w$e||(w$$._w=w$v,w$$._h=w$l,w$$._surfaceFormat=w$L,w$$._surfaceType=w$A,w$$._depthStencilFormat=w$x,w$C.isConchWebGL&&34041===w$$._depthStencilFormat&&(w$$._depthStencilFormat=33189),w$$._mipMap=w$m,w$$._repeat=w$Z,w$$._minFifter=w$O,w$$._magFifter=w$e,w$$.release(),w$$._createWebGLRenderTarget()),w$$},w$_.TYPE2D=1,w$_.TYPE3D=2,w$_.POOL=[],w$_}(w$a),w$Rv=function(w$v){function w$l(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,w$l.__super.call(this),w$l._gl=w$Xv.mainContext}w$K(w$l,"laya.webgl.utils.Buffer",w$B);var w$L=w$l.prototype;return w$L._bind=function(){this.activeResource(),w$l._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(w$l._bindVertexBuffer=this._glBuffer),w$l._gl.bindBuffer(this._bufferType,w$l._bindActive[this._bufferType]=this._glBuffer),w$qv.activeShader=null)},w$L.recreateResource=function(){this._glBuffer||(this._glBuffer=w$l._gl.createBuffer()),this.completeCreate()},w$L.disposeResource=function(){this._glBuffer&&(w$Xv.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},w$A(0,w$L,"bufferUsage",function(){return this._bufferUsage}),w$l._gl=null,w$l._bindActive={},w$l._bindVertexBuffer=null,w$l._enableAtributes=[],w$l}(),w$Nv=function(w$v){function w$L(w$v){this.texcoord=null,this.offsetX=300,this.offsetY=0,w$L.__super.call(this,512,0);var w$l=8*w$cv.BYTES_PE;this.position=[2,5126,!1,w$l,0],this.texcoord=[2,5126,!1,w$l,2*w$cv.BYTES_PE],this.color=[4,5126,!1,w$l,4*w$cv.BYTES_PE]}return w$K(w$L,"laya.webgl.shader.d2.skinAnishader.SkinSV",w$gv),w$L}(),w$bv=function(w$v){function w$l(w$v){w$l.__super.call(this,2,0),this.color=[]}return w$K(w$l,"laya.webgl.shader.d2.value.Color2dSV",w$gv),w$l.prototype.setValue=function(w$v){w$v.fillStyle&&(this.color=w$v.fillStyle._color._color),w$v.strokeStyle&&(this.color=w$v.strokeStyle._color._color)},w$l}(),w$jv=function(w$v){function w$l(w$v){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=w$gv._TEXCOORD,w$l.__super.call(this,256,0)}w$K(w$l,"laya.webgl.shader.d2.value.FillTextureSV",w$gv);var w$L=w$l.prototype;return w$L.setValue=function(w$v){this.ALPHA=w$v.ALPHA,w$v.filters&&this.setFilters(w$v.filters)},w$L.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},w$l}(),w$Fv=function(w$v){function w$l(w$v){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=w$gv._TEXCOORD,void 0===w$v&&(w$v=0),w$l.__super.call(this,1,w$v)}w$K(w$l,"laya.webgl.shader.d2.value.TextureSV",w$gv);var w$L=w$l.prototype;return w$L.setValue=function(w$v){this.ALPHA=w$v.ALPHA,w$v.filters&&this.setFilters(w$v.filters)},w$L.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},w$l}(),w$pv=function(w$v){function w$l(w$v){this.a_color=null,this.u_pos=[0,0],w$l.__super.call(this,4,0),this.position=[2,5126,!1,5*w$cv.BYTES_PE,0],this.a_color=[3,5126,!1,5*w$cv.BYTES_PE,2*w$cv.BYTES_PE]}return w$K(w$l,"laya.webgl.shader.d2.value.PrimitiveSV",w$gv),w$l}(),w$Yv=function(w$v){function w$l(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,w$l.__super.call(this)}w$K(w$l,"laya.webgl.atlas.AtlasWebGLCanvas",w$v);var w$L=w$l.prototype;return w$L.recreateResource=function(){var w$v=w$Xv.mainContext,w$l=this._source=w$v.createTexture(),w$L=w$fv.curBindTexTarget,w$A=w$fv.curBindTexValue;w$fv.bindTexture(w$v,3553,w$l),w$v.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),w$v.texParameteri(3553,10241,9729),w$v.texParameteri(3553,10240,9729),w$v.texParameteri(3553,10242,33071),w$v.texParameteri(3553,10243,33071),w$L&&w$A&&w$fv.bindTexture(w$v,w$L,w$A),this.memorySize=this._w*this._h*4,this.completeCreate()},w$L.disposeResource=function(){this._source&&(w$Xv.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},w$L.texSubImage2D=function(w$v,w$l,w$L){if(w$C.isFlash){this._flashCacheImage||(this._flashCacheImage=w$c.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var w$A=w$L.bitmapdata;this._flashCacheImage._image.copyPixels(w$A,0,0,w$A.width,w$A.height,w$v,w$l),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var w$x=w$Xv.mainContext,w$m=w$fv.curBindTexTarget,w$Z=w$fv.curBindTexValue;w$fv.bindTexture(w$x,3553,this._source),w$x.pixelStorei(37441,!0),0<=w$v-1&&w$x.texSubImage2D(3553,0,w$v-1,w$l,6408,5121,w$L),w$v+1<=this._w&&w$x.texSubImage2D(3553,0,w$v+1,w$l,6408,5121,w$L),0<=w$l-1&&w$x.texSubImage2D(3553,0,w$v,w$l-1,6408,5121,w$L),w$l+1<=this._h&&w$x.texSubImage2D(3553,0,w$v,w$l+1,6408,5121,w$L),w$x.texSubImage2D(3553,0,w$v,w$l,6408,5121,w$L),w$x.pixelStorei(37441,!1),w$m&&w$Z&&w$fv.bindTexture(w$x,w$m,w$Z)}},w$L.texSubImage2DPixel=function(w$v,w$l,w$L,w$A,w$x){var w$m=w$Xv.mainContext,w$Z=w$fv.curBindTexTarget,w$O=w$fv.curBindTexValue;w$fv.bindTexture(w$m,3553,this._source);var w$e=new Uint8Array(w$x.data);w$m.pixelStorei(37441,!0),w$m.texSubImage2D(3553,0,w$v,w$l,w$L,w$A,6408,5121,w$e),w$m.pixelStorei(37441,!1),w$Z&&w$O&&w$fv.bindTexture(w$m,w$Z,w$O)},w$A(0,w$L,"width",w$v.prototype._$get_width,function(w$v){this._w=w$v}),w$A(0,w$L,"height",w$v.prototype._$get_height,function(w$v){this._h=w$v}),w$l}(w$L),w$Dv=function(w$v){function w$x(){this.flipY=!0,this.alwaysChange=!1,w$x.__super.call(this)}w$K(w$x,"laya.webgl.resource.WebGLCanvas",w$L);var w$l=w$x.prototype;return w$l.getCanvas=function(){return this._canvas},w$l.clear=function(){this._ctx&&this._ctx.clear()},w$l.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},w$l._setContext=function(w$v){this._ctx=w$v},w$l.getContext=function(w$v,w$l){return this._ctx?this._ctx:this._ctx=w$x._createContext(this)},w$l.size=function(w$v,w$l){this._w==w$v&&this._h==w$l||(this._w=w$v,this._h=w$l,this._ctx&&this._ctx.size(w$v,w$l),this._canvas&&(this._canvas.height=w$l,this._canvas.width=w$v))},w$l.activeResource=function(w$v){void 0===w$v&&(w$v=!1),this._source||this.recreateResource()},w$l.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},w$l.disposeResource=function(){this._source&&!this.iscpuSource&&(w$Xv.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},w$l.createWebGlTexture=function(){var w$v=w$Xv.mainContext;this._canvas;var w$l=this._source=w$v.createTexture();this.iscpuSource=!1;var w$L=w$fv.curBindTexTarget,w$A=w$fv.curBindTexValue;w$fv.bindTexture(w$v,3553,w$l),w$v.pixelStorei(37440,this.flipY?1:0),w$x.premulAlpha&&w$v.pixelStorei(37441,!0),w$v.texImage2D(3553,0,6408,6408,5121,this._imgData),w$x.premulAlpha&&w$v.pixelStorei(37441,!1),w$v.texParameteri(3553,10240,9729),w$v.texParameteri(3553,10241,9729),w$v.texParameteri(3553,10242,33071),w$v.texParameteri(3553,10243,33071),w$v.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,w$L&&w$A&&w$fv.bindTexture(w$v,w$L,w$A)},w$l.reloadCanvasData=function(){var w$v=w$Xv.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var w$l=w$fv.curBindTexTarget,w$L=w$fv.curBindTexValue;w$fv.bindTexture(w$v,3553,this._source),w$x.premulAlpha&&w$v.pixelStorei(37441,!0),w$v.texImage2D(3553,0,6408,6408,5121,this._imgData),w$x.premulAlpha&&w$v.pixelStorei(37441,!1),w$v.pixelStorei(37440,0),w$l&&w$L&&w$fv.bindTexture(w$v,w$l,w$L)},w$l.texSubImage2D=function(w$v,w$l,w$L){var w$A=w$Xv.mainContext,w$x=w$fv.curBindTexTarget,w$m=w$fv.curBindTexValue;w$fv.bindTexture(w$A,3553,this._source),w$A.pixelStorei(37441,!0),w$A.texSubImage2D(3553,0,w$l,w$L,6408,5121,w$v._source),w$A.pixelStorei(37441,!1),w$x&&w$m&&w$fv.bindTexture(w$A,w$x,w$m)},w$l.toBase64=function(w$v,w$l,w$L){var w$A=null;this._canvas&&(w$A=this._canvas.toDataURL(w$v,w$l)),w$L.call(this,w$A)},w$A(0,w$l,"context",function(){return this._ctx}),w$A(0,w$l,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),w$A(0,w$l,"asBitmap",null,function(w$v){this._ctx&&(this._ctx.asBitmap=w$v)}),w$x._createContext=null,w$x.premulAlpha=!1,w$x}(),w$Sv=function(w$v){function w$m(w$v,w$l){this.CborderSize=12,w$m.__super.call(this),this.char=w$v,this.isSpace=" "===w$v,this.xs=w$l.scaleX,this.ys=w$l.scaleY,this.font=w$l.font.toString(),this.fontSize=w$l.font.size,this.fillColor=w$l.fillColor,this.borderColor=w$l.borderColor,this.lineWidth=w$l.lineWidth,this.underLine=w$l.underLine;var w$L,w$A=w$C.isConchApp;w$A?((w$L=ConchTextCanvas)._source=ConchTextCanvas,w$L._source.canvas=ConchTextCanvas):w$L=w$r.canvas.source,this.canvas=w$L,this._enableMerageInAtlas=!0,this._ctx=w$A?w$L:this.canvas.getContext("2d",void 0);var w$x=w$q.measureText(this.char,this.font);this.cw=w$x.width*this.xs,this.ch=(w$x.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new w$a(this)}w$K(w$m,"laya.webgl.resource.WebGLCharImage",w$L);var w$l=w$m.prototype;return w$w.imps(w$l,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),w$l.active=function(){this.texture.active()},w$l.recreateResource=function(){var w$v=w$C.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),w$v){var w$l=this.fontSize;1==this.xs&&1==this.ys||(w$l=parseInt(w$l*(this.xs>this.ys?this.xs:this.ys)+""));var w$L="normal 100 "+this.font;w$L=w$L.replace(w$m._fontSizeReg,w$l),this.borderColor&&(w$L+=" 1 "+this.borderColor),this._ctx.font=w$L,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,w$t.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var w$A=this._ctx.measureText(this.char).width+1;this._ctx.lineTo(w$A,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},w$l.onresize=function(w$v,w$l){this._w=w$v,this._h=w$l,this._allowMerageInAtlas=!0},w$l.clearAtlasSource=function(){},w$A(0,w$l,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),w$A(0,w$l,"atlasSource",function(){return this.canvas}),w$A(0,w$l,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(w$v){this._enableMerageInAtlas=w$v}),w$m.createOneChar=function(w$v,w$l){return new w$m(w$v,w$l)},w$m._fontSizeReg=new RegExp("\\d+(?=px)","g"),w$m}(),w$yv=function(w$v){function w$$(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e){void 0===w$L&&(w$L=6408),void 0===w$A&&(w$A=5121),void 0===w$x&&(w$x=34041),void 0===w$m&&(w$m=!1),void 0===w$Z&&(w$Z=!1),void 0===w$O&&(w$O=-1),void 0===w$e&&(w$e=1),w$$.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=w$v,this._h=w$l,this._surfaceFormat=w$L,this._surfaceType=w$A,this._depthStencilFormat=w$x,this._mipMap=w$m,this._repeat=w$Z,this._minFifter=w$O,this._magFifter=w$e}w$K(w$$,"laya.webgl.resource.WebGLRenderTarget",w$L);var w$l=w$$.prototype;return w$l.recreateResource=function(){var w$v=w$Xv.mainContext;this._frameBuffer||(this._frameBuffer=w$v.createFramebuffer()),this._source||(this._source=w$v.createTexture());var w$l=w$fv.curBindTexTarget,w$L=w$fv.curBindTexValue;w$fv.bindTexture(w$v,3553,this._source),w$v.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var w$A=this._minFifter,w$x=this._magFifter,w$m=this._repeat?10497:33071,w$Z=w$_.isPOT(this._w,this._h);if(w$Z?(this._mipMap?-1!==w$A||(w$A=9987):-1!==w$A||(w$A=9729),-1!==w$x||(w$x=9729),w$v.texParameteri(3553,10241,w$A),w$v.texParameteri(3553,10240,w$x),w$v.texParameteri(3553,10242,w$m),w$v.texParameteri(3553,10243,w$m),this._mipMap&&w$v.generateMipmap(3553)):(-1!==w$A||(w$A=9729),-1!==w$x||(w$x=9729),w$v.texParameteri(3553,10241,w$A),w$v.texParameteri(3553,10240,w$x),w$v.texParameteri(3553,10242,33071),w$v.texParameteri(3553,10243,33071)),w$v.bindFramebuffer(36160,this._frameBuffer),w$v.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=w$v.createRenderbuffer()),w$v.bindRenderbuffer(36161,this._depthStencilBuffer),w$v.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:w$v.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:w$v.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:w$v.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}w$v.bindFramebuffer(36160,null),w$l&&w$L&&w$fv.bindTexture(w$v,w$l,w$L),w$v.bindRenderbuffer(36161,null),w$Z&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},w$l.disposeResource=function(){this._frameBuffer&&(w$Xv.mainContext.deleteTexture(this._source),w$Xv.mainContext.deleteFramebuffer(this._frameBuffer),w$Xv.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},w$A(0,w$l,"depthStencilBuffer",function(){return this._depthStencilBuffer}),w$A(0,w$l,"frameBuffer",function(){return this._frameBuffer}),w$$}(),w$Wv=function(w$v){function w$O(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){this.offsetX=0,this.offsetY=0,w$O.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=w$m,this.canvas=w$v,this._ctx=w$v.getContext("2d",void 0),this._w=w$A,this._h=w$x,this.offsetX=w$l,this.offsetY=w$L,this.src=w$Z,this._enableMerageInAtlas=!0,w$j.enabled&&this._w<w$j.atlasLimitWidth&&this._h<w$j.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}w$K(w$O,"laya.webgl.resource.WebGLSubImage",w$L);var w$l=w$O.prototype;return w$w.imps(w$l,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),w$l.size=function(w$v,w$l){this._w=w$v,this._h=w$l,this._ctx&&this._ctx.size(w$v,w$l),this.canvas&&(this.canvas.height=w$l,this.canvas.width=w$v)},w$l.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},w$l.createWebGlTexture=function(){var w$v=w$Xv.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var w$l=this._source=w$v.createTexture(),w$L=w$fv.curBindTexTarget,w$A=w$fv.curBindTexValue;w$fv.bindTexture(w$v,3553,w$l),w$v.pixelStorei(37441,!0),w$v.texImage2D(3553,0,6408,6408,5121,this.canvas),w$v.pixelStorei(37441,!1);var w$x=this.minFifter,w$m=this.magFifter,w$Z=this.repeat?10497:33071,w$O=w$_.isPOT(this.width,this.height);w$O?(this.mipmap?-1!==w$x||(w$x=9987):-1!==w$x||(w$x=9729),-1!==w$m||(w$m=9729),w$v.texParameteri(3553,10240,w$m),w$v.texParameteri(3553,10241,w$x),w$v.texParameteri(3553,10242,w$Z),w$v.texParameteri(3553,10243,w$Z),this.mipmap&&w$v.generateMipmap(3553)):(-1!==w$x||(w$x=9729),-1!==w$m||(w$m=9729),w$v.texParameteri(3553,10241,w$x),w$v.texParameteri(3553,10240,w$m),w$v.texParameteri(3553,10242,33071),w$v.texParameteri(3553,10243,33071)),w$L&&w$A&&w$fv.bindTexture(w$v,w$L,w$A),this.canvas=null,w$O&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},w$l.disposeResource=function(){w$j.enabled&&this._allowMerageInAtlas||!this._source||(w$Xv.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},w$l.clearAtlasSource=function(){},w$A(0,w$l,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),w$A(0,w$l,"atlasSource",function(){return this.canvas}),w$A(0,w$l,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(w$v){this._allowMerageInAtlas=w$v}),w$O}(),w$Ev=function(w$v){function w$$(w$v,w$l,w$L,w$A){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,w$$.__super.call(this),!w$v||!w$l)throw"Shader Error";this._id=++w$$._count,this._vs=w$v,this._ps=w$l,this._nameMap=w$A||{},null!=w$L&&(w$$.sharders[w$L]=this)}w$K(w$$,"laya.webgl.shader.Shader",w$qv);var w$l=w$$.prototype;return w$l.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},w$l.disposeResource=function(){w$Xv.mainContext.deleteShader(this._vshader),w$Xv.mainContext.deleteShader(this._pshader),w$Xv.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},w$l._compile=function(){if(!w$Xv.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var w$v=[this._vs,this._ps],w$l=w$Xv.mainContext;if(this._program=w$l.createProgram(),this._vshader=w$$._createShader(w$l,w$v[0],35633),this._pshader=w$$._createShader(w$l,w$v[1],35632),w$l.attachShader(this._program,this._vshader),w$l.attachShader(this._program,this._pshader),w$l.linkProgram(this._program),!w$C.isConchApp&&!w$l.getProgramParameter(this._program,35714))throw w$l.getProgramInfoLog(this._program);var w$L,w$A,w$x=0,w$m=0;for(w$m=w$C.isConchApp?w$l.getProgramParameterEx(this._vs,this._ps,"",35721):w$l.getProgramParameter(this._program,35721),w$x=0;w$x<w$m;w$x++){var w$Z=null;w$L={vartype:"attribute",glfun:null,ivartype:0,attrib:w$Z=w$C.isConchApp?w$l.getActiveAttribEx(this._vs,this._ps,"",w$x):w$l.getActiveAttrib(this._program,w$x),location:w$l.getAttribLocation(this._program,w$Z.name),name:w$Z.name,type:w$Z.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(w$L)}var w$O=0;for(w$O=w$C.isConchApp?w$l.getProgramParameterEx(this._vs,this._ps,"",35718):w$l.getProgramParameter(this._program,35718),w$x=0;w$x<w$O;w$x++){var w$e=null;w$e=w$C.isConchApp?w$l.getActiveUniformEx(this._vs,this._ps,"",w$x):w$l.getActiveUniform(this._program,w$x),0<(w$L={vartype:"uniform",glfun:null,ivartype:1,attrib:w$Z,location:w$l.getUniformLocation(this._program,w$e.name),name:w$e.name,type:w$e.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(w$L.name=w$L.name.substr(0,w$L.name.length-3),w$L.isArray=!0,w$L.location=w$l.getUniformLocation(this._program,w$L.name)),this._params.push(w$L)}for(w$x=0,w$A=this._params.length;w$x<w$A;w$x++)if((w$L=this._params[w$x]).indexOfParams=w$x,w$L.index=1,w$L.value=[w$L.location,null],w$L.codename=w$L.name,w$L.name=this._nameMap[w$L.codename]?this._nameMap[w$L.codename]:w$L.codename,(this._paramsMap[w$L.name]=w$L)._this=this,w$L.uploadedValue=[],"attribute"!==w$L.vartype)switch(w$L.type){case 5124:w$L.fun=w$L.isArray?this._uniform1iv:this._uniform1i;break;case 5126:w$L.fun=w$L.isArray?this._uniform1fv:this._uniform1f;break;case 35664:w$L.fun=w$L.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:w$L.fun=w$L.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:w$L.fun=w$L.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:w$L.fun=this._uniform_sampler2D;break;case 35680:w$L.fun=this._uniform_samplerCube;break;case 35676:w$L.glfun=w$l.uniformMatrix4fv,w$L.fun=this._uniformMatrix4fv;break;case 35670:w$L.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else w$L.fun=this._attribute}},w$l.getUniform=function(w$v){return this._paramsMap[w$v]},w$l._attribute=function(w$v,w$l){var w$L=w$Xv.mainContext,w$A=w$Rv._enableAtributes,w$x=w$v.location;return w$A[w$x]||w$L.enableVertexAttribArray(w$x),w$L.vertexAttribPointer(w$x,w$l[0],w$l[1],w$l[2],w$l[3],w$l[4]+this._offset),w$A[w$x]=w$Rv._bindVertexBuffer,1},w$l._uniform1f=function(w$v,w$l){var w$L=w$v.uploadedValue;return w$L[0]!==w$l?(w$Xv.mainContext.uniform1f(w$v.location,w$L[0]=w$l),1):0},w$l._uniform1fv=function(w$v,w$l){if(w$l.length<4){var w$L=w$v.uploadedValue;return w$L[0]!==w$l[0]||w$L[1]!==w$l[1]||w$L[2]!==w$l[2]||w$L[3]!==w$l[3]?(w$Xv.mainContext.uniform1fv(w$v.location,w$l),w$L[0]=w$l[0],w$L[1]=w$l[1],w$L[2]=w$l[2],w$L[3]=w$l[3],1):0}return w$Xv.mainContext.uniform1fv(w$v.location,w$l),1},w$l._uniform_vec2=function(w$v,w$l){var w$L=w$v.uploadedValue;return w$L[0]!==w$l[0]||w$L[1]!==w$l[1]?(w$Xv.mainContext.uniform2f(w$v.location,w$L[0]=w$l[0],w$L[1]=w$l[1]),1):0},w$l._uniform_vec2v=function(w$v,w$l){if(w$l.length<2){var w$L=w$v.uploadedValue;return w$L[0]!==w$l[0]||w$L[1]!==w$l[1]||w$L[2]!==w$l[2]||w$L[3]!==w$l[3]?(w$Xv.mainContext.uniform2fv(w$v.location,w$l),w$L[0]=w$l[0],w$L[1]=w$l[1],w$L[2]=w$l[2],w$L[3]=w$l[3],1):0}return w$Xv.mainContext.uniform2fv(w$v.location,w$l),1},w$l._uniform_vec3=function(w$v,w$l){var w$L=w$v.uploadedValue;return w$L[0]!==w$l[0]||w$L[1]!==w$l[1]||w$L[2]!==w$l[2]?(w$Xv.mainContext.uniform3f(w$v.location,w$L[0]=w$l[0],w$L[1]=w$l[1],w$L[2]=w$l[2]),1):0},w$l._uniform_vec3v=function(w$v,w$l){return w$Xv.mainContext.uniform3fv(w$v.location,w$l),1},w$l._uniform_vec4=function(w$v,w$l){var w$L=w$v.uploadedValue;return w$L[0]!==w$l[0]||w$L[1]!==w$l[1]||w$L[2]!==w$l[2]||w$L[3]!==w$l[3]?(w$Xv.mainContext.uniform4f(w$v.location,w$L[0]=w$l[0],w$L[1]=w$l[1],w$L[2]=w$l[2],w$L[3]=w$l[3]),1):0},w$l._uniform_vec4v=function(w$v,w$l){return w$Xv.mainContext.uniform4fv(w$v.location,w$l),1},w$l._uniformMatrix2fv=function(w$v,w$l){return w$Xv.mainContext.uniformMatrix2fv(w$v.location,!1,w$l),1},w$l._uniformMatrix3fv=function(w$v,w$l){return w$Xv.mainContext.uniformMatrix3fv(w$v.location,!1,w$l),1},w$l._uniformMatrix4fv=function(w$v,w$l){return w$Xv.mainContext.uniformMatrix4fv(w$v.location,!1,w$l),1},w$l._uniform1i=function(w$v,w$l){var w$L=w$v.uploadedValue;return w$L[0]!==w$l?(w$Xv.mainContext.uniform1i(w$v.location,w$L[0]=w$l),1):0},w$l._uniform1iv=function(w$v,w$l){return w$Xv.mainContext.uniform1iv(w$v.location,w$l),1},w$l._uniform_ivec2=function(w$v,w$l){var w$L=w$v.uploadedValue;return w$L[0]!==w$l[0]||w$L[1]!==w$l[1]?(w$Xv.mainContext.uniform2i(w$v.location,w$L[0]=w$l[0],w$L[1]=w$l[1]),1):0},w$l._uniform_ivec2v=function(w$v,w$l){return w$Xv.mainContext.uniform2iv(w$v.location,w$l),1},w$l._uniform_vec3i=function(w$v,w$l){var w$L=w$v.uploadedValue;return w$L[0]!==w$l[0]||w$L[1]!==w$l[1]||w$L[2]!==w$l[2]?(w$Xv.mainContext.uniform3i(w$v.location,w$L[0]=w$l[0],w$L[1]=w$l[1],w$L[2]=w$l[2]),1):0},w$l._uniform_vec3vi=function(w$v,w$l){return w$Xv.mainContext.uniform3iv(w$v.location,w$l),1},w$l._uniform_vec4i=function(w$v,w$l){var w$L=w$v.uploadedValue;return w$L[0]!==w$l[0]||w$L[1]!==w$l[1]||w$L[2]!==w$l[2]||w$L[3]!==w$l[3]?(w$Xv.mainContext.uniform4i(w$v.location,w$L[0]=w$l[0],w$L[1]=w$l[1],w$L[2]=w$l[2],w$L[3]=w$l[3]),1):0},w$l._uniform_vec4vi=function(w$v,w$l){return w$Xv.mainContext.uniform4iv(w$v.location,w$l),1},w$l._uniform_sampler2D=function(w$v,w$l){var w$L=w$Xv.mainContext,w$A=w$v.uploadedValue;return null==w$A[0]?(w$A[0]=this._curActTexIndex,w$L.uniform1i(w$v.location,this._curActTexIndex),w$L.activeTexture(w$$._TEXTURES[this._curActTexIndex]),w$fv.bindTexture(w$L,3553,w$l),this._curActTexIndex++,1):(w$L.activeTexture(w$$._TEXTURES[w$A[0]]),w$fv.bindTexture(w$L,3553,w$l),0)},w$l._uniform_samplerCube=function(w$v,w$l){var w$L=w$Xv.mainContext,w$A=w$v.uploadedValue;return null==w$A[0]?(w$A[0]=this._curActTexIndex,w$L.uniform1i(w$v.location,this._curActTexIndex),w$L.activeTexture(w$$._TEXTURES[this._curActTexIndex]),w$fv.bindTexture(w$L,34067,w$l),this._curActTexIndex++,1):(w$L.activeTexture(w$$._TEXTURES[w$A[0]]),w$fv.bindTexture(w$L,34067,w$l),0)},w$l._noSetValue=function(w$v){console.log("no....:"+w$v.name)},w$l.uploadOne=function(w$v,w$l){this.activeResource(),w$fv.UseProgram(this._program);var w$L=this._paramsMap[w$v];w$L.fun.call(this,w$L,w$l)},w$l.uploadTexture2D=function(w$v){w$M.shaderCall++;var w$l=w$Xv.mainContext;w$l.activeTexture(33984),w$fv.bindTexture(w$l,3553,w$v)},w$l.uploadTexture2D1=function(w$v){w$M.shaderCall++;var w$l=w$Xv.mainContext;w$l.activeTexture(33985),w$fv.bindTexture(w$l,3553,w$v)},w$l.upload=function(w$v,w$l){w$qv.activeShader=w$qv.bindShader=this,this._lastUseFrameCount===w$M.loopCount||this.activeResource(),w$fv.UseProgram(this._program),this._reCompile?(w$l=this._params,this._reCompile=!1):w$l=w$l||this._params;w$Xv.mainContext;for(var w$L,w$A,w$x=w$l.length,w$m=0,w$Z=0;w$Z<w$x;w$Z++)null!==(w$A=w$v[(w$L=w$l[w$Z]).name])&&(w$m+=w$L.fun.call(this,w$L,w$A));w$M.shaderCall+=w$m},w$l.uploadArray=function(w$v,w$l,w$L){w$qv.activeShader=this,(w$qv.bindShader=this).activeResource(),w$fv.UseProgram(this._program);this._params;for(var w$A,w$x,w$m=0,w$Z=w$l-2;0<=w$Z;w$Z-=2)(w$x=this._paramsMap[w$v[w$Z]])&&null!=(w$A=w$v[w$Z+1])&&(w$L&&w$L[w$x.name]&&w$L[w$x.name].bind(),w$m+=w$x.fun.call(this,w$x,w$A));w$M.shaderCall+=w$m},w$l.getParams=function(){return this._params},w$$.getShader=function(w$v){return w$$.sharders[w$v]},w$$.create=function(w$v,w$l,w$L,w$A){return new w$$(w$v,w$l,w$L,w$A)},w$$.withCompile=function(w$v,w$l,w$L,w$A){if(w$L&&w$$.sharders[w$L])return w$$.sharders[w$L];var w$x=w$$._preCompileShader[2e-4*w$v];if(!w$x)throw new Error("withCompile shader err!"+w$v);return w$x.createShader(w$l,w$L,w$A)},w$$.withCompile2D=function(w$v,w$l,w$L,w$A,w$x){if(w$A&&w$$.sharders[w$A])return w$$.sharders[w$A];var w$m=w$$._preCompileShader[2e-4*w$v+w$l];if(!w$m)throw new Error("withCompile shader err!"+w$v+" "+w$l);return w$m.createShader(w$L,w$A,w$x)},w$$.addInclude=function(w$v,w$l){w$Bv.addInclude(w$v,w$l)},w$$.preCompile=function(w$v,w$l,w$L,w$A){var w$x=2e-4*w$v;w$$._preCompileShader[w$x]=new w$Bv(w$x,w$l,w$L,w$A)},w$$.preCompile2D=function(w$v,w$l,w$L,w$A,w$x){var w$m=2e-4*w$v+w$l;w$$._preCompileShader[w$m]=new w$Bv(w$m,w$L,w$A,w$x)},w$$._createShader=function(w$v,w$l,w$L){var w$A=w$v.createShader(w$L);return w$v.shaderSource(w$A,w$l),w$v.compileShader(w$A),w$A},w$$._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],w$$._count=0,w$$._preCompileShader={},w$$.SHADERNAME2ID=2e-4,w$$.sharders=((w$$.sharders=[]).length=32,w$$.sharders),w$Z(w$$,["nameKey",function(){return this.nameKey=new w$P}]),w$$}(),w$sv=function(w$v){function w$l(){this._maxsize=0,this._upload=!0,this._uploadSize=0,w$l.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}w$K(w$l,"laya.webgl.utils.Buffer2D",w$v);var w$L=w$l.prototype;return w$L.needSize=function(w$v){var w$l=this._byteLength;if(w$v){var w$L=this._byteLength+w$v;w$L<=this._buffer.byteLength||this._resizeBuffer(w$L<<1,!0),this._byteLength=w$L}return w$l},w$L._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),w$M.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,w$Rv._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),w$Rv._gl.bufferSubData(this._bufferType,0,this._buffer)},w$L._bufferSubData=function(w$v,w$l,w$L){if(void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0),this._maxsize=Math.max(this._maxsize,this._byteLength),w$M.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,w$Rv._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),w$l||w$L){var w$A=this._buffer.slice(w$l,w$L);w$Rv._gl.bufferSubData(this._bufferType,w$v,w$A)}else w$Rv._gl.bufferSubData(this._bufferType,w$v,this._buffer)},w$L._checkArrayUse=function(){},w$L._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},w$L._bind_subUpload=function(w$v,w$l,w$L){return void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(w$v,w$l,w$L),!0)},w$L._resizeBuffer=function(w$v,w$l){if(w$v<this._buffer.byteLength)return this;if(this.memorySize=w$v,w$l&&this._buffer&&0<this._buffer.byteLength){var w$L=new ArrayBuffer(w$v);new Uint8Array(w$L).set(new Uint8Array(this._buffer),0),this._buffer=w$L}else this._buffer=new ArrayBuffer(w$v);return this._checkArrayUse(),this._upload=!0,this},w$L.append=function(w$v){this._upload=!0;var w$l,w$L;w$l=w$v.byteLength,w$v instanceof Uint8Array?(this._resizeBuffer(this._byteLength+w$l,!0),w$L=new Uint8Array(this._buffer,this._byteLength)):w$v instanceof Uint16Array?(this._resizeBuffer(this._byteLength+w$l,!0),w$L=new Uint16Array(this._buffer,this._byteLength)):w$v instanceof Float32Array&&(this._resizeBuffer(this._byteLength+w$l,!0),w$L=new Float32Array(this._buffer,this._byteLength)),w$L.set(w$v,0),this._byteLength+=w$l,this._checkArrayUse()},w$L.appendU16Array=function(w$v,w$l){this._resizeBuffer(this._byteLength+2*w$l,!0);for(var w$L=new Uint16Array(this._buffer,this._byteLength,w$l),w$A=0;w$A<w$l;w$A++)w$L[w$A]=w$v[w$A];this._byteLength+=2*w$l,this._checkArrayUse()},w$L.appendEx=function(w$v,w$l){this._upload=!0;var w$L;w$L=w$v.byteLength,this._resizeBuffer(this._byteLength+w$L,!0),new w$l(this._buffer,this._byteLength).set(w$v,0),this._byteLength+=w$L,this._checkArrayUse()},w$L.appendEx2=function(w$v,w$l,w$L,w$A){void 0===w$A&&(w$A=1),this._upload=!0;var w$x,w$m;w$x=w$L*w$A,this._resizeBuffer(this._byteLength+w$x,!0),w$m=new w$l(this._buffer,this._byteLength);var w$Z=0;for(w$Z=0;w$Z<w$L;w$Z++)w$m[w$Z]=w$v[w$Z];this._byteLength+=w$x,this._checkArrayUse()},w$L.getBuffer=function(){return this._buffer},w$L.setNeedUpload=function(){this._upload=!0},w$L.getNeedUpload=function(){return this._upload},w$L.upload=function(){var w$v=this._bind_upload();return w$Rv._gl.bindBuffer(this._bufferType,null),w$Rv._bindActive[this._bufferType]=null,w$qv.activeShader=null,w$v},w$L.subUpload=function(w$v,w$l,w$L){void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0);var w$A=this._bind_subUpload();return w$Rv._gl.bindBuffer(this._bufferType,null),w$Rv._bindActive[this._bufferType]=null,w$qv.activeShader=null,w$A},w$L.disposeResource=function(){w$v.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},w$L.clear=function(){this._byteLength=0,this._upload=!0},w$A(0,w$L,"bufferLength",function(){return this._buffer.byteLength}),w$A(0,w$L,"byteLength",null,function(w$v){this._byteLength!==w$v&&(w$v<=this._buffer.byteLength||this._resizeBuffer(2*w$v+256,!0),this._byteLength=w$v)}),w$l.__int__=function(w$v){w$Uv.QuadrangleIB=w$Uv.create(35044),w$dv.fillIBQuadrangle(w$Uv.QuadrangleIB,16)},w$l.FLOAT32=4,w$l.SHORT=2,w$l}(w$Rv),w$iv=(function(w$l){function w$L(w$v){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,w$L.__super.call(this,9)}w$K(w$L,"laya.webgl.shader.d2.value.GlowSV",w$l);var w$v=w$L.prototype;w$v.setValue=function(w$v){w$l.prototype.setValue.call(this,w$v)},w$v.clear=function(){w$l.prototype.clear.call(this)}}(w$Fv),function(w$v){function w$l(w$v){w$l.__super.call(this,64),this.defines.add(64)}w$K(w$l,"laya.webgl.shader.d2.value.TextSV",w$v);var w$L=w$l.prototype;return w$L.release=function(){(w$l.pool[w$l._length++]=this).clear()},w$L.clear=function(){w$v.prototype.clear.call(this)},w$l.create=function(){return w$l._length?w$l.pool[--w$l._length]:new w$l(null)},w$l.pool=[],w$l._length=0,w$l}(w$Fv)),w$nv=function(w$v){function w$x(w$v,w$l,w$L,w$A){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,w$x.__super.call(this,w$v,w$l,w$L,w$A)}w$K(w$x,"laya.webgl.shader.d2.Shader2X",w$v);var w$l=w$x.prototype;return w$l.upload2dQuick1=function(w$v){this.upload(w$v,this._params2dQuick1||this._make2dQuick1())},w$l._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var w$v,w$l=this._params,w$L=0,w$A=w$l.length;w$L<w$A;w$L++)w$v=w$l[w$L],(w$C.isFlash||"size"!==w$v.name&&"position"!==w$v.name&&"texcoord"!==w$v.name)&&this._params2dQuick1.push(w$v)}return this._params2dQuick1},w$l.disposeResource=function(){w$v.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},w$l.upload2dQuick2=function(w$v){this.upload(w$v,this._params2dQuick2||this._make2dQuick2())},w$l._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var w$v,w$l=this._params,w$L=0,w$A=w$l.length;w$L<w$A;w$L++)w$v=w$l[w$L],(w$C.isFlash||"size"!==w$v.name)&&this._params2dQuick2.push(w$v)}return this._params2dQuick2},w$x.create=function(w$v,w$l,w$L,w$A){return new w$x(w$v,w$l,w$L,w$A)},w$x}(w$Ev),w$Uv=function(w$v){function w$l(w$v){this._uint8Array=null,this._uint16Array=null,void 0===w$v&&(w$v=35044),w$l.__super.call(this),this._bufferUsage=w$v,this._bufferType=34963,w$C.isFlash||(this._buffer=new ArrayBuffer(8))}w$K(w$l,"laya.webgl.utils.IndexBuffer2D",w$sv);var w$L=w$l.prototype;return w$L._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},w$L.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},w$L.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},w$L.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},w$l.QuadrangleIB=null,w$l.create=function(w$v){return void 0===w$v&&(w$v=35044),new w$l(w$v)},w$l}(),w$zv=function(w$v){function w$L(w$v,w$l){this._floatArray32=null,this._vertexStride=0,w$L.__super.call(this),this._vertexStride=w$v,this._bufferUsage=w$l,this._bufferType=34962,w$C.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}w$K(w$L,"laya.webgl.utils.VertexBuffer2D",w$v);var w$l=w$L.prototype;return w$l.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},w$l.bind=function(w$v){w$v&&w$v._bind(),this._bind()},w$l.insertData=function(w$v,w$l){this.getFloat32Array().set(w$v,w$l),this._upload=!0},w$l.bind_upload=function(w$v){w$v._bind_upload()||w$v._bind(),this._bind_upload()||this._bind()},w$l._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},w$l.disposeResource=function(){w$v.prototype.disposeResource.call(this)},w$l.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},w$A(0,w$l,"vertexStride",function(){return this._vertexStride}),w$L.create=function(w$v,w$l){return void 0===w$l&&(w$l=35048),new w$L(w$v,w$l)},w$L}(w$sv),w$vl=function(w$v){function w$O(w$v,w$l,w$L,w$A,w$x,w$m){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===w$L&&(w$L=6408),void 0===w$A&&(w$A=!0),w$O.__super.call(this,w$v,w$l),w$v){if(this._format=w$L,this._mipmap=w$A,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof w$v)this._url=w$v,this._src=w$v,this._image=new w$r.window.Image,w$l&&(w$l.onload&&(this.onload=w$l.onload),w$l.onerror&&(this.onerror=w$l.onerror),w$l.onCreate&&w$l.onCreate(this)),this._image.crossOrigin=w$v&&0==w$v.indexOf("data:")?null:"",w$v&&(this._image.src=w$v);else if(w$v instanceof ArrayBuffer){this._src=w$l,this._url=this._src;var w$Z=new w$e(w$v);w$Z.readUTFBytes(4),w$Z.readUTFBytes(2),w$Z.getInt16();w$Z.endian="bigEndian",this._w=w$Z.getInt16(),this._h=w$Z.getInt16();w$Z.getInt16(),w$Z.getInt16();this._image=new Uint8Array(w$v,w$Z.pos),this._format=w$Xv.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,w$j.enabled&&this._w<w$j.atlasLimitWidth&&this._h<w$j.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(w$v instanceof Uint8Array))return this._src=w$l,this._url=this._src,this._image=w$v.source||w$v,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=w$l,this._url=this._src,this._w=w$x,this._h=w$m,this._image=w$v,this._format=0===w$L?w$v.byteLength/(w$x*w$m)==4?6408:6407:w$L}this._$5__enableMerageInAtlas=!0}}w$K(w$O,"laya.webgl.resource.WebGLImage",w$c);var w$l=w$O.prototype;return w$w.imps(w$l,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),w$l._init_=function(w$v,w$l){},w$l._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var w$v=w$Xv.mainContext,w$l=this._source=w$v.createTexture(),w$L=w$fv.curBindTexTarget,w$A=w$fv.curBindTexValue;w$fv.bindTexture(w$v,3553,w$l);var w$x=this.minFifter,w$m=this.magFifter,w$Z=this.repeat?10497:33071,w$O=w$_.isPOT(this._w,this._h),w$e=!1;switch(w$O?(this.mipmap?-1!==w$x||(w$x=9987):-1!==w$x||(w$x=9729),-1!==w$m||(w$m=9729),w$v.texParameteri(3553,10241,w$x),w$v.texParameteri(3553,10240,w$m),w$v.texParameteri(3553,10242,w$Z),w$v.texParameteri(3553,10243,w$Z),this.mipmap&&w$v.generateMipmap(3553)):(-1!==w$x||(w$x=9729),-1!==w$m||(w$m=9729),w$v.texParameteri(3553,10241,w$x),w$v.texParameteri(3553,10240,w$m),w$v.texParameteri(3553,10242,33071),w$v.texParameteri(3553,10243,33071)),w$v.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&w$v.pixelStorei(w$v.UNPACK_ALIGNMENT,1),w$v.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&w$v.pixelStorei(w$v.UNPACK_ALIGNMENT,1),w$v.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:w$e=!0,w$v.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case w$Xv.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:w$e=!0,w$v.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}w$v.pixelStorei(37441,!1),w$L&&w$A&&w$fv.bindTexture(w$v,w$L,w$A),this.uri||(this.uri=this._url),w$e?this.memorySize=this._image.length:w$O&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},w$l.recreateResource=function(){var w$v=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var w$l=this;this._image=new w$r.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(w$l._needReleaseAgain)return w$l._needReleaseAgain=!1,w$l._image.onload=null,void(w$l._image=null);w$l._allowMerageInAtlas&&w$l._enableMerageInAtlas?(w$v.memorySize=0,w$v._recreateLock=!1):w$l._createWebGlTexture(),w$l.completeCreate()},this._image.src=this._src}},w$l.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&w$Xv.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},w$l.onresize=function(){this._w=this._image.width,this._h=this._image.height,w$j.enabled&&this._w<w$j.atlasLimitWidth&&this._h<w$j.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},w$l.clearAtlasSource=function(){this._image=null},w$A(0,w$l,"format",function(){return this._format}),w$A(0,w$l,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(w$v){this._$5__enableMerageInAtlas=w$v}),w$A(0,w$l,"mipmap",function(){return this._mipmap}),w$A(0,w$l,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),w$A(0,w$l,"atlasSource",function(){return this._image}),w$A(0,w$l,"onload",null,function(w$v){var w$l=this;this._onload=w$v,this._image&&(this._image.onload=null!=this._onload?function(){w$l.onresize(),w$l._onload()}:null)}),w$A(0,w$l,"onerror",null,function(w$v){var w$l=this;this._onerror=w$v,this._image&&(this._image.onerror=null!=this._onerror?function(){w$l._onerror()}:null)}),w$O}();w$w.__init([w$rv,w$b,w$Hv,w$Bv])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(w$v,w$l){"use strict";for(var w$L in Object.defineProperty(w$l,"__esModule",{value:!0}),Laya){var w$A=Laya[w$L];w$A&&w$A.__isclass&&(w$l[w$L]=w$A)}}),function(w$m,w$v,w$A){w$A.un,w$A.uns;var w$x=w$A.static,w$Z=w$A.class,w$O=w$A.getset,w$e=(w$A.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),w$G=laya.utils.ClassUtils,w$o=(laya.events.Event,laya.utils.HTMLChar),w$$=laya.net.Loader,w$_=(laya.display.Node,laya.maths.Rectangle),w$K=laya.renders.Render,w$r=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),w$c=laya.utils.Stat,w$q=laya.display.Text,w$d=laya.resource.Texture,w$C=laya.net.URL,w$J=laya.utils.Utils,w$B=function(){function w$r(){}return w$Z(w$r,"laya.html.utils.HTMLParse"),w$r.parse=function(w$v,w$l,w$L){w$l=(w$l="<root>"+(w$l=w$l.replace(/<br>/g,"<br/>"))+"</root>").replace(w$r.spacePattern,w$r.char255);var w$A=w$J.parseXMLFromString(w$l);w$r._parseXML(w$v,w$A.childNodes[0].childNodes,w$L)},w$r._parseXML=function(w$v,w$l,w$L,w$A){var w$x=0,w$m=0;if(w$l.join||w$l.item)for(w$x=0,w$m=w$l.length;w$x<w$m;++w$x)w$r._parseXML(w$v,w$l[w$x],w$L,w$A);else{var w$Z,w$O,w$e;if(3==w$l.nodeType)return void(w$v instanceof laya.html.dom.HTMLDivElement?(null==w$l.nodeName&&(w$l.nodeName="#text"),w$O=w$l.nodeName.toLowerCase(),0<(w$e=w$l.textContent.replace(/^\s+|\s+$/g,"")).length&&(w$Z=w$G.getInstance(w$O))&&(w$v.addChild(w$Z),w$Z.innerTEXT=w$e.replace(w$r.char255AndOneSpacePattern," "))):0<(w$e=w$l.textContent.replace(/^\s+|\s+$/g,"")).length&&(w$v.innerTEXT=w$e.replace(w$r.char255AndOneSpacePattern," ")));if("#comment"==(w$O=w$l.nodeName.toLowerCase()))return;if(w$Z=w$G.getInstance(w$O)){(w$Z=w$v.addChild(w$Z)).URI=w$L,w$Z.href=w$A;var w$$=w$l.attributes;if(w$$&&0<w$$.length)for(w$x=0,w$m=w$$.length;w$x<w$m;++w$x){var w$_=w$$[w$x],w$o=w$_.nodeName,w$K=w$_.value;w$Z._setAttributes(w$o,w$K)}w$r._parseXML(w$Z,w$l.childNodes,w$L,w$Z.href)}else w$r._parseXML(w$v,w$l.childNodes,w$L,w$A)}},w$r.char255=String.fromCharCode(255),w$r.spacePattern=/&nbsp;|&#160;/g,w$r.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),w$r}(),w$X=function(){function w$a(){}return w$Z(w$a,"laya.html.utils.Layout"),w$a.later=function(w$v){null==w$a._will&&(w$a._will=[],w$A.stage.frameLoop(1,null,function(){if(!(w$a._will.length<1)){for(var w$v=0;w$v<w$a._will.length;w$v++)laya.html.utils.Layout.layout(w$a._will[w$v]);w$a._will.length=0}})),w$a._will.push(w$v)},w$a.layout=function(w$v){if(!w$v||!w$v._style)return null;if(0==(512&w$v._style._type))return null;w$v.getStyle()._type&=-513;var w$l=w$a._multiLineLayout(w$v);return w$K.isConchApp&&w$v.layaoutCallNative&&w$v.layaoutCallNative(),w$l},w$a._multiLineLayout=function(w$v){if(w$q.RightToLeft)return w$a._multiLineLayout2(w$v);var w$l=new Array;w$v._addChildsToLayout(w$l);var w$L,w$A,w$x,w$m,w$Z,w$O=0,w$e=w$l.length,w$$=w$v._getCSSStyle(),w$_=w$$.letterSpacing,w$o=w$$.leading,w$K=w$$.lineHeight,w$r=w$$._widthAuto()||!w$$.wordWrap,w$G=w$r?999999:w$v.width,w$c=(w$v.height,0),w$d=w$$.italic?w$$.fontSize/3:0,w$C=w$$._getAlign(),w$J=w$$._getValign(),w$B=0!==w$J||0!==w$C||0!=w$K,w$X=0,w$f=0,w$w=0,w$H=0,w$g=new Array,w$T=w$g[0]=new w$u,w$h=!1,w$V=!1;w$T.h=0,w$$.italic&&(w$G-=w$$.fontSize/3);var w$k=0,w$Q=!0;function w$M(){w$T.y=w$f,w$f+=w$T.h+w$o,0==w$T.h&&(w$f+=w$K),w$T.mWidth=w$k,w$k=0,w$T=new w$u,w$g.push(w$T),w$T.h=0,w$h=!(w$Q=!(w$X=0))}for(w$O=0;w$O<w$e;w$O++)if(null!=(w$L=w$l[w$O]))if(w$Q=!1,w$L instanceof laya.html.dom.HTMLBrElement)w$M(),w$T.y=w$f;else{if(w$L._isChar()){if((w$m=w$L).isWord)w$h=w$V||"\n"===w$m.char,w$T.wordStartIndex=w$T.elements.length;else{if(w$w=w$m.width+w$m.style.letterSpacin,0<w$g.length&&w$G<w$X+w$w&&0<w$T.wordStartIndex){var w$P;w$P=w$T.elements.length-w$T.wordStartIndex+1,w$T.elements.length=w$T.wordStartIndex,w$O-=w$P,w$M();continue}w$h=!1,w$k+=w$m.width}w$w=w$m.width+w$_,w$H=w$m.height,w$V=!1,(w$h=w$h||w$G<w$X+w$w)&&w$M(),w$T.minTextHeight=Math.min(w$T.minTextHeight,w$L.height)}else w$A=w$L._getCSSStyle(),w$Z=w$L,w$x=w$A.padding,0===w$A._getCssFloat()||(w$B=!0),w$h=w$V||w$A.lineElement,w$w=w$Z.width*w$Z._style._tf.scaleX+w$x[1]+w$x[3]+w$_,w$H=w$Z.height*w$Z._style._tf.scaleY+w$x[0]+w$x[2],w$V=w$A.lineElement,(w$h=w$h||w$G<w$X+w$w&&w$A.wordWrap)&&w$M();w$T.elements.push(w$L),w$T.h=Math.max(w$T.h,w$H),w$L.x=w$X,w$L.y=w$f,w$X+=w$w,w$T.w=w$X-w$_,w$T.y=w$f,w$c=Math.max(w$X+w$d,w$c)}else w$Q||(w$X+=w$a.DIV_ELEMENT_PADDING),w$T.wordStartIndex=w$T.elements.length;if(w$f=w$T.y+w$T.h,w$B){var w$I=0,w$t=w$G;for(w$r&&0<w$v.width&&(w$t=w$v.width),w$O=0,w$e=w$g.length;w$O<w$e;w$O++)w$g[w$O].updatePos(0,w$t,w$O,w$I,w$C,w$J,w$K),w$I+=Math.max(w$K,w$g[w$O].h+w$o);w$f=w$I}return w$r&&(w$v.width=w$c),w$f>w$v.height&&(w$v.height=w$f),[w$c,w$f]},w$a._multiLineLayout2=function(w$v){var w$l=new Array;w$v._addChildsToLayout(w$l);var w$L,w$A,w$x,w$m,w$Z,w$O=0,w$e=w$l.length,w$$=w$v._getCSSStyle(),w$_=w$$.letterSpacing,w$o=w$$.leading,w$K=w$$.lineHeight,w$r=w$$._widthAuto()||!w$$.wordWrap,w$G=w$r?999999:w$v.width,w$c=(w$v.height,0),w$d=w$$.italic?w$$.fontSize/3:0,w$C=2-w$$._getAlign(),w$J=w$$._getValign(),w$B=0!==w$J||0!=w$C||0!=w$K,w$X=0,w$f=0,w$w=0,w$H=0,w$g=new Array,w$T=w$g[0]=new w$u,w$h=!1,w$V=!1;w$T.h=0,w$$.italic&&(w$G-=w$$.fontSize/3);var w$k=0,w$Q=!0;function w$M(){w$T.y=w$f,w$f+=w$T.h+w$o,0==w$T.h&&(w$f+=w$K),w$T.mWidth=w$k,w$k=0,w$T=new w$u,w$g.push(w$T),w$T.h=0,w$h=!(w$Q=!(w$X=0))}for(w$O=0;w$O<w$e;w$O++)if(null!=(w$L=w$l[w$O]))if(w$Q=!1,w$L instanceof laya.html.dom.HTMLBrElement)w$M(),w$T.y=w$f;else{if(w$L._isChar()){if((w$m=w$L).isWord)w$h=w$V||"\n"===w$m.char,w$T.wordStartIndex=w$T.elements.length;else{if(0<w$g.length&&w$G<w$X+w$w&&0<w$T.wordStartIndex){var w$P;w$P=w$T.elements.length-w$T.wordStartIndex+1,w$T.elements.length=w$T.wordStartIndex,w$O-=w$P,w$M();continue}w$h=!1,w$k+=w$m.width}w$w=w$m.width+w$_,w$H=w$m.height,w$V=!1,(w$h=w$h||w$G<w$X+w$w)&&w$M(),w$T.minTextHeight=Math.min(w$T.minTextHeight,w$L.height)}else w$A=w$L._getCSSStyle(),w$Z=w$L,w$x=w$A.padding,0===w$A._getCssFloat()||(w$B=!0),w$h=w$V||w$A.lineElement,w$w=w$Z.width*w$Z._style._tf.scaleX+w$x[1]+w$x[3]+w$_,w$H=w$Z.height*w$Z._style._tf.scaleY+w$x[0]+w$x[2],w$V=w$A.lineElement,(w$h=w$h||w$G<w$X+w$w&&w$A.wordWrap)&&w$M();w$T.elements.push(w$L),w$T.h=Math.max(w$T.h,w$H),w$L.x=w$X,w$L.y=w$f,w$X+=w$w,w$T.w=w$X-w$_,w$T.y=w$f,w$c=Math.max(w$X+w$d,w$c)}else w$Q||(w$X+=w$a.DIV_ELEMENT_PADDING),w$T.wordStartIndex=w$T.elements.length;if(w$f=w$T.y+w$T.h,w$B){var w$I=0,w$t=w$G;for(w$O=0,w$e=w$g.length;w$O<w$e;w$O++)w$g[w$O].updatePos(0,w$t,w$O,w$I,w$C,w$J,w$K),w$I+=Math.max(w$K,w$g[w$O].h+w$o);w$f=w$I}for(w$r&&(w$v.width=w$c),w$f>w$v.height&&(w$v.height=w$f),w$O=0,w$e=w$g.length;w$O<w$e;w$O++)w$g[w$O].revertOrder(w$G);return[w$c,w$f]},w$a._will=null,w$a.DIV_ELEMENT_PADDING=0,w$a}(),w$u=function(){function w$v(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}w$Z(w$v,"laya.html.utils.LayoutLine");var w$l=w$v.prototype;return w$l.updatePos=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){var w$O,w$e=0;0<this.elements.length&&(w$e=(w$O=this.elements[this.elements.length-1]).x+w$O.width-this.elements[0].x);var w$$=0,w$_=NaN;1===w$x&&(w$$=(w$l-w$e)/2),2===w$x&&(w$$=w$l-w$e),0===w$Z||0!=w$m||(w$m=1);for(var w$o=0,w$K=this.elements.length;w$o<w$K;w$o++){var w$r=(w$O=this.elements[w$o])._getCSSStyle();switch(0!==w$$&&(w$O.x+=w$$),w$r._getValign()){case 0:w$O.y=w$A;break;case 1:var w$G=0;99999!=this.minTextHeight&&(w$G=this.minTextHeight);var w$c=(w$G+w$Z)/2;w$c=Math.max(w$c,this.h),w$_=(laya.html.dom.HTMLImageElement,w$A+w$c-w$O.height),w$O.y=w$_;break;case 2:w$O.y=w$A+(w$Z-w$O.height)}}},w$l.revertOrder=function(w$v){var w$l;if(0<this.elements.length){var w$L,w$A=0;for(w$L=this.elements.length,w$A=0;w$A<w$L;w$A++)(w$l=this.elements[w$A]).x=w$v-w$l.x-w$l.width}},w$v}(),w$f=function(w$L){function w$l(){this.URI=null,this._href=null,w$l.__super.call(this),this._text=w$l._EMPTYTEXT,this.setStyle(new w$e(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}w$Z(w$l,"laya.html.dom.HTMLElement",w$L);var w$v=w$l.prototype;return w$v.layaoutCallNative=function(){var w$v=0;if(this._childs&&0<(w$v=this._childs.length))for(var w$l=0;w$l<w$v;w$l++)this._childs[w$l].layaoutCallNative&&this._childs[w$l].layaoutCallNative();var w$L=this._getWords();w$L?laya.html.dom.HTMLElement.fillWords(this,w$L,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},w$v.appendChild=function(w$v){return this.addChild(w$v)},w$v._getWords2=function(){var w$v=this._text.text;if(!w$v||0===w$v.length)return null;var w$l,w$L,w$A=0,w$x=0;if(this._text.drawWords)w$L=this._text.drawWords;else{for(w$x=(w$l=w$v.split(" ")).length-1,w$L=[],w$A=0;w$A<w$x;w$A++)w$L.push(w$l[w$A]," ");0<=w$x&&w$L.push(w$l[w$x]),this._text.drawWords=w$L}var w$m,w$Z=this._text.words;if(w$Z&&w$Z.length===w$L.length)return w$Z;null===w$Z&&(this._text.words=w$Z=[]),w$Z.length=w$L.length;var w$O=this.style,w$e=w$O.font;for(w$A=0,w$x=w$L.length;w$A<w$x;w$A++){w$m=w$J.measureText(w$L[w$A],w$e);var w$$=w$Z[w$A]=new w$o(w$L[w$A],w$m.width,w$m.height||w$O.fontSize,w$O);if(1<w$$.char.length&&(w$$.charNum=w$$.char),this.href){var w$_=new w$r;this.addChild(w$_),w$$.setSprite(w$_)}}return w$Z},w$v._getWords=function(){if(!w$q.CharacterCache)return this._getWords2();var w$v=this._text.text;if(!w$v||0===w$v.length)return null;var w$l,w$L=this._text.words;if(w$L&&w$L.length===w$v.length)return w$L;null===w$L&&(this._text.words=w$L=[]),w$L.length=w$v.length;for(var w$A=this.style,w$x=w$A.font,w$m=0,w$Z=w$v.length;w$m<w$Z;w$m++)if(w$l=w$J.measureText(w$v.charAt(w$m),w$x)){var w$O=w$L[w$m]=new w$o(w$v.charAt(w$m),w$l.width,w$l.height||w$A.fontSize,w$A);if(this.href){var w$e=new w$r;this.addChild(w$e),w$O.setSprite(w$e)}}else console.warn("_getWords size is null"+w$v.charAt(w$m),w$x);return w$L},w$v.showLinkSprite=function(){var w$v=this._text.words;if(w$v)for(var w$l,w$L,w$A=[],w$x=0;w$x<w$v.length;w$x++)w$L=w$v[w$x],(w$l=new w$r).graphics.drawRect(0,0,w$L.width,w$L.height,"#ff0000"),w$l.width=w$L.width,w$l.height=w$L.height,this.addChild(w$l),w$A.push(w$l)},w$v._layoutLater=function(){var w$v=this.style;512&w$v._type||(w$v.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&w$v.block?(w$X.later(this),w$v._type|=512):this.parent&&this.parent._layoutLater())},w$v._setAttributes=function(w$v,w$l){switch(w$v){case"style":return void this.style.cssText(w$l);case"class":return void(this.className=w$l)}w$L.prototype._setAttributes.call(this,w$v,w$l)},w$v.updateHref=function(){if(null!=this._href){var w$v=this._getWords();if(w$v)for(var w$l,w$L,w$A=0;w$A<w$v.length;w$A++)(w$L=(w$l=w$v[w$A]).getSprite())&&(w$L.size(w$l.width,w$l.height),w$L.on("click",this,this.onLinkHandler))}},w$v.onLinkHandler=function(w$v){switch(w$v.type){case"click":for(var w$l=this;w$l;)w$l.event("link",[this.href]),w$l=w$l.parent}},w$v.formatURL=function(w$v){return this.URI?w$C.formatURL(w$v,this.URI?this.URI.path:null):w$v},w$O(0,w$v,"href",function(){return this._href},function(w$v){null!=(this._href=w$v)&&(this._getCSSStyle().underLine=1,this.updateHref())}),w$O(0,w$v,"color",null,function(w$v){this.style.color=w$v}),w$O(0,w$v,"onClick",null,function(w$v){w$A._runScript("fn=function(event){"+w$v+";}"),this.on("click",this,void 0)}),w$O(0,w$v,"id",null,function(w$v){w$w.document.setElementById(w$v,this)}),w$O(0,w$v,"innerTEXT",function(){return this._text.text},function(w$v){this.text=w$v}),w$O(0,w$v,"style",function(){return this._style}),w$O(0,w$v,"text",function(){return this._text.text},function(w$v){this._text==w$l._EMPTYTEXT?this._text={text:w$v,words:null}:(this._text.text=w$v,this._text.words&&(this._text.words.length=0)),w$K.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),w$O(0,w$v,"parent",w$L.prototype._$get_parent,function(w$v){if(w$v instanceof laya.html.dom.HTMLElement){var w$l=w$v;this.URI||(this.URI=w$l.URI),this.style.inherit(w$l.style)}w$A.superSet(w$r,this,"parent",w$v)}),w$O(0,w$v,"className",null,function(w$v){this.style.attrs(w$w.document.styleSheets["."+w$v])}),w$l.fillWords=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){w$v.graphics.clear();for(var w$O=0,w$e=w$l.length;w$O<w$e;w$O++){var w$$=w$l[w$O];w$v.graphics.fillText(w$$.char,w$$.x+w$L,w$$.y+w$A,w$x,w$m,"left",w$Z)}},w$l._EMPTYTEXT={text:null,words:null},w$l}(w$r),w$l=(function(w$v){function w$l(){w$l.__super.call(this),this.style.lineElement=!0,this.style.block=!0}w$Z(w$l,"laya.html.dom.HTMLBrElement",w$f)}(),function(w$v){function w$l(){this.contextHeight=NaN,this.contextWidth=NaN,w$l.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}w$Z(w$l,"laya.html.dom.HTMLDivElement",w$v);var w$L=w$l.prototype;return w$L.appendHTML=function(w$v){w$B.parse(this,w$v,this.URI),this.layout()},w$L._addChildsToLayout=function(w$l){var w$v=this._getWords();if(null==w$v&&0==this._childs.length)return!1;w$v&&w$v.forEach(function(w$v){w$l.push(w$v)});for(var w$L=!0,w$A=0,w$x=this._childs.length;w$A<w$x;w$A++){var w$m=this._childs[w$A];w$L?w$L=!1:w$l.push(null),w$m._addToLayout(w$l)}return!0},w$L._addToLayout=function(w$v){this.layout()},w$L.layout=function(){if(this.style){this.style._type|=512;var w$v=w$X.layout(this);if(w$v){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new w$_);var w$l=this._$P.mHtmlBounds;w$l.x=w$l.y=0,w$l.width=this.contextWidth=w$v[0],w$l.height=this.contextHeight=w$v[1],this.setBounds(w$l)}}},w$O(0,w$L,"height",function(){return this._height?this._height:this.contextHeight},w$v.prototype._$set_height),w$O(0,w$L,"innerHTML",null,function(w$v){this.destroyChildren(),this.appendHTML(w$v)}),w$O(0,w$L,"width",function(){return this._width?this._width:this.contextWidth},function(w$v){var w$l=!1;w$l=0===w$v?w$v!=this._width:w$v!=this.width,w$A.superSet(w$f,this,"width",w$v),w$l&&this.layout()}),w$l}(w$f)),w$w=function(w$v){function w$l(){this.all=new Array,this.styleSheets=w$e.styleSheets,w$l.__super.call(this)}w$Z(w$l,"laya.html.dom.HTMLDocument",w$f);var w$L=w$l.prototype;return w$L.getElementById=function(w$v){return this.all[w$v]},w$L.setElementById=function(w$v,w$l){this.all[w$v]=w$l},w$x(w$l,["document",function(){return this.document=new w$l}]),w$l}();(function(w$v){function w$l(){this._tex=null,this._url=null,this._renderArgs=[],w$l.__super.call(this),this.style.block=!0}w$Z(w$l,"laya.html.dom.HTMLImageElement",w$f);var w$L=w$l.prototype;w$L._addToLayout=function(w$v){!this._style.absolute&&w$v.push(this)},w$L.render=function(w$v,w$l,w$L){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(w$c.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,w$v.ctx.drawTexture2(w$l,w$L,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},w$L.layaoutCallNative=function(){var w$v=0;if(this._childs&&0<(w$v=this._childs.length))for(var w$l=0;w$l<w$v;w$l++)this._childs[w$l].layaoutCallNative&&this._childs[w$l].layaoutCallNative()},w$O(0,w$L,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(w$v){this._width!==w$v&&(this._width=w$v,this._style.width=w$v,this.repaint())}),w$O(0,w$L,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(w$v){this._height!==w$v&&(this._height=w$v,this._style.height=w$v,this.repaint())}),w$L.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),w$$.clearCache(this,this._url),this._tex=null),w$f.prototype.destroy.call(this)},w$L.onloaded=function(){var w$v=this._style;w$v&&!w$v.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),w$v&&!w$v.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),w$K.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},w$L._loadImageComplete=function(w$v,w$l,w$L){if(!this._destroyed)if(null!=w$L)if(w$L instanceof ArrayBuffer){var w$A=new DataView(w$L);new laya.webgl.resource.WebGLImage(new Uint8Array(w$L,8),w$v,0,!1,w$A.getUint32(0),w$A.getUint32(4));this.onloaded()}else if(w$L instanceof w$d)w$$.imgMgrSet[w$v]=w$l,w$m.imgMgrLock(w$v,w$$.imgMgrSet[w$v]),this._url=w$v,this._tex=w$L,w$$.keepCache(this,w$v),w$$.cacheRes(w$v,this._tex),this.onloaded();else{var w$x=-1!=w$v.indexOf(".png",w$v.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(w$L,w$v,w$x,!1,w$L.width,w$L.height);this.onloaded()}else this.event("error","Load image failed")},w$O(0,w$L,"src",null,function(w$v){(w$v=this.formatURL(w$v),this._url!=w$v)&&(null!=this._tex&&(w$$.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=w$v,(this._tex=w$$.getRes(w$v))?(w$$.keepCache(this,w$v),this.onloaded()):w$m.imgMgrLoad(w$v,this._loadImageComplete.bind(this),2,!1))})})(),function(w$v){function w$l(){this.type=null,w$l.__super.call(this),this.visible=!1}w$Z(w$l,"laya.html.dom.HTMLLinkElement",w$v);var w$L=w$l.prototype;w$L._onload=function(w$v){switch(this.type){case"text/css":w$e.parseCSS(w$v,this.URI)}},w$O(0,w$L,"href",w$v.prototype._$get_href,function(w$v){var w$l=this;w$v=this.formatURL(w$v),this.URI=new w$C(w$v);var w$L=new w$$;w$L.once("complete",null,function(w$v){w$l._onload(w$v)}),w$L.load(w$v,"text")}),w$l._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(w$f),function(w$v){function w$l(){w$l.__super.call(this),this.visible=!1}w$Z(w$l,"laya.html.dom.HTMLStyleElement",w$v),w$O(0,w$l.prototype,"text",w$v.prototype._$get_text,function(w$v){w$e.parseCSS(w$v,null)})}(w$f),function(w$v){function w$l(){w$l.__super.call(this),this._getCSSStyle().valign="middle"}w$Z(w$l,"laya.html.dom.HTMLIframeElement",w$v),w$O(0,w$l.prototype,"href",w$v.prototype._$get_href,function(w$L){var w$A=this;w$L=this.formatURL(w$L);var w$v=new w$$;w$v.once("complete",null,function(w$v){var w$l=w$A.URI;w$A.URI=new w$C(w$L),w$A.innerHTML=w$v,!w$l||(w$A.URI=w$l)}),w$v.load(w$L,"text")})}(w$l)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(w$v,w$l){"use strict";for(var w$L in Object.defineProperty(w$l,"__esModule",{value:!0}),Laya){var w$A=Laya[w$L];w$A&&w$A.__isclass&&(w$l[w$L]=w$A)}}),function(w$v,w$l,w$c){w$c.un,w$c.uns;var w$A=w$c.static,w$m=w$c.class,w$x=w$c.getset,w$L=(w$c.__newvec,laya.display.Animation),w$d=(laya.utils.Browser,laya.utils.ClassUtils),w$Z=laya.filters.ColorFilter,w$O=laya.utils.Ease,w$e=laya.events.Event,w$$=(laya.events.EventDispatcher,laya.display.css.Font),w$_=laya.display.FrameAnimation,w$o=laya.display.Graphics,w$K=laya.utils.Handler,w$r=laya.display.Input,w$J=laya.net.Loader,w$G=(laya.display.Node,laya.maths.Point),w$C=laya.maths.Rectangle,w$B=laya.renders.Render,w$X=laya.display.Sprite,w$f=laya.display.Text,w$w=laya.resource.Texture,w$H=laya.utils.Tween,w$g=laya.utils.Utils,w$T=laya.utils.WeakObject;w$c.interface("laya.ui.IItem"),w$c.interface("laya.ui.ISelect"),w$c.interface("laya.ui.IRender"),w$c.interface("laya.ui.IComponent"),w$c.interface("laya.ui.IBox","IComponent");var w$h=function(){function w$v(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return w$m(w$v,"laya.ui.LayoutStyle"),w$A(w$v,["EMPTY",function(){return this.EMPTY=new w$v}]),w$v}(),w$V=function(){function w$v(){}return w$m(w$v,"laya.ui.Styles"),w$v.labelColor="#000000",w$v.buttonStateNum=3,w$v.scrollBarMinNum=15,w$v.scrollBarDelayTime=500,w$A(w$v,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),w$v}(),w$k=function(){function w$x(){}return w$m(w$x,"laya.ui.UIUtils"),w$x.fillArray=function(w$v,w$l,w$L){var w$A=w$v.concat();if(w$l)for(var w$x=w$l.split(","),w$m=0,w$Z=Math.min(w$A.length,w$x.length);w$m<w$Z;w$m++){var w$O=w$x[w$m];w$A[w$m]="true"==w$O||"false"!=w$O&&w$O,null!=w$L&&(w$A[w$m]=w$L(w$O))}return w$A},w$x.toColor=function(w$v){return w$g.toHexColor(w$v)},w$x.gray=function(w$v,w$l){void 0===w$l&&(w$l=!0),w$l?w$x.addFilter(w$v,w$x.grayFilter):w$x.clearFilter(w$v,w$Z)},w$x.addFilter=function(w$v,w$l){var w$L=w$v.filters||[];w$L.push(w$l),w$v.filters=w$L},w$x.clearFilter=function(w$v,w$l){var w$L=w$v.filters;if(null!=w$L&&0<w$L.length){for(var w$A=w$L.length-1;-1<w$A;w$A--){var w$x=w$L[w$A];w$c.__typeof(w$x,w$l)&&w$L.splice(w$A,1)}w$v.filters=w$L}},w$x._getReplaceStr=function(w$v){return w$x.escapeSequence[w$v]},w$x.adptString=function(w$v){return w$v.replace(/\\(\w)/g,w$x._getReplaceStr)},w$x.getBindFun=function(w$v){var w$l=w$x._funMap.get(w$v);if(null==w$l){var w$L='"'+w$v+'"',w$A="(function(data){if(data==null)return;with(data){try{\nreturn "+(w$L=w$L.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";w$l=w$c._runScript(w$A),w$x._funMap.set(w$v,w$l)}return w$l},w$A(w$x,["grayFilter",function(){return this.grayFilter=new w$Z([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new w$T}]),w$x}(),w$Q=function(){function w$v(){}return w$m(w$v,"UIConfig"),w$v.touchScrollEnable=!0,w$v.mouseWheelEnable=!0,w$v.showButtons=!0,w$v.popupBgColor="#000000",w$v.popupBgAlpha=.5,w$v.closeDialogOnSide=!0,w$v}(),w$M=function(w$L){function w$C(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,w$C.__super.call(this),this._weakKeys=[]}w$m(w$C,"laya.ui.AutoBitmap",w$L);var w$v=w$C.prototype;return w$v.destroy=function(){if(w$J.clearObject(this,this._weakKey),this._weakKeys){for(var w$v=0,w$l=this._weakKeys.length;w$v<w$l;++w$v)w$J.clearObject(this,this._weakKeys[w$v]);this._weakKeys=null}w$L.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},w$v._setChanged=function(){this._isChanged||(this._isChanged=!0,w$c.timer.callLater(this,this.changeSource))},w$v.changeSource=function(){this._isChanged=!1;var w$v=this._source;if(w$v&&w$v.bitmap){var w$l=this.width,w$L=this.height,w$A=this._sizeGrid,w$x=w$v.sourceWidth,w$m=w$v.sourceHeight;if(!w$A||w$x===w$l&&w$m===w$L)this.cleanByTexture(w$v,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,w$l,w$L);else{w$J.clearObject(this,this._weakKey),w$v.$_GID||(w$v.$_GID=w$g.getGID());var w$Z=w$v.$_GID+"."+w$l+"."+w$L+"."+w$A.join("."),w$O=w$J.findObject(w$Z);if(w$g.isOKCmdList(w$O))return this._weakKey=w$Z,w$J.keepObject(this,this._weakKey),void(this.cmds=w$O);this.clear();var w$e,w$$,w$_=w$A[0],w$o=w$A[1],w$K=w$A[2],w$r=w$A[3],w$G=w$A[4],w$c=!1;if(w$l==w$x&&(w$r=w$o=0),w$L==w$m&&(w$_=w$K=0),w$l<w$r+w$o){var w$d=w$l;w$c=!0,w$l=w$r+w$o,this.save(),this.clipRect(0,0,w$d,w$L)}w$r&&w$_&&(w$e=w$C.getTexture(w$v,0,0,w$r,w$_),w$$=this._weakKeys[0],w$e?(w$$!=w$e.weakKey&&(w$J.clearObject(this,w$$),w$J.keepObject(this,w$e.weakKey),this._weakKeys[0]=w$e.weakKey),this.drawTexture(w$e,0,0,w$r,w$_)):(w$J.clearObject(this,w$$),this._weakKeys[0]="")),w$o&&w$_&&(w$e=w$C.getTexture(w$v,w$x-w$o,0,w$o,w$_),w$$=this._weakKeys[1],w$e?(w$$!=w$e.weakKey&&(w$J.clearObject(this,w$$),w$J.keepObject(this,w$e.weakKey),this._weakKeys[1]=w$e.weakKey),this.drawTexture(w$e,w$l-w$o,0,w$o,w$_)):(w$J.clearObject(this,w$$),this._weakKeys[1]="")),w$r&&w$K&&(w$e=w$C.getTexture(w$v,0,w$m-w$K,w$r,w$K),w$$=this._weakKeys[2],w$e?(w$$!=w$e.weakKey&&(w$J.clearObject(this,w$$),w$J.keepObject(this,w$e.weakKey),this._weakKeys[2]=w$e.weakKey),this.drawTexture(w$e,0,w$L-w$K,w$r,w$K)):(w$J.clearObject(this,w$$),this._weakKeys[2]="")),w$o&&w$K&&(w$e=w$C.getTexture(w$v,w$x-w$o,w$m-w$K,w$o,w$K),w$$=this._weakKeys[3],w$e?(w$$!=w$e.weakKey&&(w$J.clearObject(this,w$$),w$J.keepObject(this,w$e.weakKey),this._weakKeys[3]=w$e.weakKey),this.drawTexture(w$e,w$l-w$o,w$L-w$K,w$o,w$K)):(w$J.clearObject(this,w$$),this._weakKeys[3]="")),w$_&&(w$e=w$C.getTexture(w$v,w$r,0,w$x-w$r-w$o,w$_),w$$=this._weakKeys[4],w$e?(w$$!=w$e.weakKey&&(w$J.clearObject(this,w$$),w$J.keepObject(this,w$e.weakKey),this._weakKeys[4]=w$e.weakKey),this.drawBitmap(w$G,w$e,w$r,0,w$l-w$r-w$o,w$_)):(w$J.clearObject(this,w$$),this._weakKeys[4]="")),w$K&&(w$e=w$C.getTexture(w$v,w$r,w$m-w$K,w$x-w$r-w$o,w$K),w$$=this._weakKeys[5],w$e?(w$$!=w$e.weakKey&&(w$J.clearObject(this,w$$),w$J.keepObject(this,w$e.weakKey),this._weakKeys[5]=w$e.weakKey),this.drawBitmap(w$G,w$e,w$r,w$L-w$K,w$l-w$r-w$o,w$K)):(w$J.clearObject(this,w$$),this._weakKeys[5]="")),w$r&&(w$e=w$C.getTexture(w$v,0,w$_,w$r,w$m-w$_-w$K),w$$=this._weakKeys[6],w$e?(w$$!=w$e.weakKey&&(w$J.clearObject(this,w$$),w$J.keepObject(this,w$e.weakKey),this._weakKeys[6]=w$e.weakKey),this.drawBitmap(w$G,w$e,0,w$_,w$r,w$L-w$_-w$K)):(w$J.clearObject(this,w$$),this._weakKeys[6]="")),w$o&&(w$e=w$C.getTexture(w$v,w$x-w$o,w$_,w$o,w$m-w$_-w$K),w$$=this._weakKeys[7],w$e?(w$$!=w$e.weakKey&&(w$J.clearObject(this,w$$),w$J.keepObject(this,w$e.weakKey),this._weakKeys[7]=w$e.weakKey),this.drawBitmap(w$G,w$e,w$l-w$o,w$_,w$o,w$L-w$_-w$K)):(w$J.clearObject(this,w$$),this._weakKeys[7]="")),w$e=w$C.getTexture(w$v,w$r,w$_,w$x-w$r-w$o,w$m-w$_-w$K),w$$=this._weakKeys[8],w$e?(w$$!=w$e.weakKey&&(w$J.clearObject(this,w$$),w$J.keepObject(this,w$e.weakKey),this._weakKeys[8]=w$e.weakKey),this.drawBitmap(w$G,w$e,w$r,w$_,w$l-w$r-w$o,w$L-w$_-w$K)):(w$J.clearObject(this,w$$),this._weakKeys[8]=""),w$c&&this.restore(),this.autoCacheCmd&&!w$B.isConchApp&&(w$J.saveObject(w$Z,this.cmds,null),this._weakKey=w$Z,w$J.keepObject(this,this._weakKey))}this._repaint()}},w$v.drawBitmap=function(w$v,w$l,w$L,w$A,w$x,w$m){void 0===w$x&&(w$x=0),void 0===w$m&&(w$m=0),w$x<.1||w$m<.1||(!w$v||w$l.width==w$x&&w$l.height==w$m?this.drawTexture(w$l,w$L,w$A,w$x,w$m):this.fillTexture(w$l,w$L,w$A,w$x,w$m))},w$v.clear=function(w$v){void 0===w$v&&(w$v=!0),w$L.prototype.clear.call(this,!1)},w$x(0,w$v,"sizeGrid",function(){return this._sizeGrid},function(w$v){this._sizeGrid=w$v,this._setChanged()}),w$x(0,w$v,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(w$v){this._width!=w$v&&(this._width=w$v,this._setChanged())}),w$x(0,w$v,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(w$v){this._height!=w$v&&(this._height=w$v,this._setChanged())}),w$x(0,w$v,"source",function(){return this._source},function(w$v){w$v?(this._source=w$v,this._setChanged()):(this._source=null,this.clear())}),w$C.getTexture=function(w$v,w$l,w$L,w$A,w$x){w$A<=0&&(w$A=1),w$x<=0&&(w$x=1),w$v.$_GID||(w$v.$_GID=w$g.getGID());var w$m=w$v.$_GID+"."+w$l+"."+w$L+"."+w$A+"."+w$x,w$Z=w$J.findObject(w$m);if((!w$Z||!w$Z.source)&&(w$Z=w$w.createFromTexture(w$v,w$l,w$L,w$A,w$x))){if(w$v.alphaTexture){var w$O=w$v.width/w$v.alphaTexture.width;w$Z.alphaTexture=w$w.createFromTexture(w$v.alphaTexture,w$l/w$O,w$L/w$O,w$A/w$O,w$x/w$O)}w$J.saveObject(w$m,w$Z),w$Z.weakKey=w$m}return w$Z},w$C}(w$o),w$P=(function(w$v){function w$l(){w$l.__super.call(this)}w$m(w$l,"laya.ui.UIEvent",w$e),w$l.SHOW_TIP="showtip",w$l.HIDE_TIP="hidetip"}(),function(w$l){function w$v(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,w$v.__super.call(this),this._layout=w$h.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}w$m(w$v,"laya.ui.Component",w$l);var w$L=w$v.prototype;return w$c.imps(w$L,{"laya.ui.IComponent":!0}),w$L.destroy=function(w$v){void 0===w$v&&(w$v=!0),w$l.prototype.destroy.call(this,w$v),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},w$L.preinitialize=function(){},w$L.createChildren=function(){},w$L.initialize=function(){},w$L.callLater=function(w$v,w$l){w$c.timer.callLater(this,w$v,w$l)},w$L.runCallLater=function(w$v){w$c.timer.runCallLater(this,w$v)},w$L.commitMeasure=function(){},w$L.changeSize=function(){this.event("resize")},w$L.getLayout=function(){return this._layout===w$h.EMPTY&&(this._layout=new w$h),this._layout},w$L._setLayoutEnabled=function(w$v){this._layout&&this._layout.enable!=w$v&&(this._layout.enable=w$v,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},w$L.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},w$L.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},w$L.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},w$L.resetLayoutX=function(){var w$v=this._layout;if(isNaN(w$v.anchorX)||(this.pivotX=w$v.anchorX*this.width),this.layoutEnabled){var w$l=this.parent;w$l&&(isNaN(w$v.centerX)?isNaN(w$v.left)?isNaN(w$v.right)||(this.x=Math.round(w$l.width-this.displayWidth-w$v.right+this.pivotX*this.scaleX)):(this.x=Math.round(w$v.left+this.pivotX*this.scaleX),isNaN(w$v.right)||(this.width=(w$l._width-w$v.left-w$v.right)/(this.scaleX||.01))):this.x=Math.round(.5*(w$l.width-this.displayWidth)+w$v.centerX+this.pivotX*this.scaleX))}},w$L.resetLayoutY=function(){var w$v=this._layout;if(isNaN(w$v.anchorY)||(this.pivotY=w$v.anchorY*this.height),this.layoutEnabled){var w$l=this.parent;w$l&&(isNaN(w$v.centerY)?isNaN(w$v.top)?isNaN(w$v.bottom)||(this.y=Math.round(w$l.height-this.displayHeight-w$v.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(w$v.top+this.pivotY*this.scaleY),isNaN(w$v.bottom)||(this.height=(w$l._height-w$v.top-w$v.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(w$l.height-this.displayHeight)+w$v.centerY+this.pivotY*this.scaleY))}},w$L.onMouseOver=function(w$v){w$c.stage.event("showtip",this._toolTip)},w$L.onMouseOut=function(w$v){w$c.stage.event("hidetip",this._toolTip)},w$x(0,w$L,"displayWidth",function(){return this.width*this.scaleX}),w$x(0,w$L,"width",function(){return this._width?this._width:this.measureWidth},function(w$v){this._width!=w$v&&(this._width=w$v,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),w$x(0,w$L,"measureWidth",function(){var w$v=0;this.commitMeasure();for(var w$l=this.numChildren-1;-1<w$l;w$l--){var w$L=this.getChildAt(w$l);w$L.visible&&(w$v=Math.max(w$L.x+w$L.width*w$L.scaleX,w$v))}return w$v}),w$x(0,w$L,"displayHeight",function(){return this.height*this.scaleY}),w$x(0,w$L,"height",function(){return this._height?this._height:this.measureHeight},function(w$v){this._height!=w$v&&(this._height=w$v,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),w$x(0,w$L,"dataSource",function(){return this._dataSource},function(w$v){for(var w$l in this._dataSource=w$v,this._dataSource)this.hasOwnProperty(w$l)&&"function"!=typeof this[w$l]&&(this[w$l]=this._dataSource[w$l])}),w$x(0,w$L,"scaleY",w$l.prototype._$get_scaleY,function(w$v){w$c.superGet(w$X,this,"scaleY")!=w$v&&(w$c.superSet(w$X,this,"scaleY",w$v),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),w$x(0,w$L,"measureHeight",function(){var w$v=0;this.commitMeasure();for(var w$l=this.numChildren-1;-1<w$l;w$l--){var w$L=this.getChildAt(w$l);w$L.visible&&(w$v=Math.max(w$L.y+w$L.height*w$L.scaleY,w$v))}return w$v}),w$x(0,w$L,"scaleX",w$l.prototype._$get_scaleX,function(w$v){w$c.superGet(w$X,this,"scaleX")!=w$v&&(w$c.superSet(w$X,this,"scaleX",w$v),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),w$x(0,w$L,"top",function(){return this._layout.top},function(w$v){w$v!=this._layout.top&&(this.getLayout().top=w$v,this._setLayoutEnabled(!0)),this.resetLayoutY()}),w$x(0,w$L,"bottom",function(){return this._layout.bottom},function(w$v){w$v!=this._layout.bottom&&(this.getLayout().bottom=w$v,this._setLayoutEnabled(!0)),this.resetLayoutY()}),w$x(0,w$L,"left",function(){return this._layout.left},function(w$v){w$v!=this._layout.left&&(this.getLayout().left=w$v,this._setLayoutEnabled(!0)),this.resetLayoutX()}),w$x(0,w$L,"right",function(){return this._layout.right},function(w$v){w$v!=this._layout.right&&(this.getLayout().right=w$v,this._setLayoutEnabled(!0)),this.resetLayoutX()}),w$x(0,w$L,"centerX",function(){return this._layout.centerX},function(w$v){w$v!=this._layout.centerX&&(this.getLayout().centerX=w$v,this._setLayoutEnabled(!0)),this.resetLayoutX()}),w$x(0,w$L,"centerY",function(){return this._layout.centerY},function(w$v){w$v!=this._layout.centerY&&(this.getLayout().centerY=w$v,this._setLayoutEnabled(!0)),this.resetLayoutY()}),w$x(0,w$L,"anchorX",function(){return this._layout.anchorX},function(w$v){w$v!=this._layout.anchorX&&(this.getLayout().anchorX=w$v,this._setLayoutEnabled(!0)),this.resetLayoutX()}),w$x(0,w$L,"anchorY",function(){return this._layout.anchorY},function(w$v){w$v!=this._layout.anchorY&&(this.getLayout().anchorY=w$v,this._setLayoutEnabled(!0)),this.resetLayoutY()}),w$x(0,w$L,"tag",function(){return this._tag},function(w$v){this._tag=w$v}),w$x(0,w$L,"toolTip",function(){return this._toolTip},function(w$v){this._toolTip!=w$v&&(null!=(this._toolTip=w$v)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),w$x(0,w$L,"comXml",function(){return this._comXml},function(w$v){this._comXml=w$v}),w$x(0,w$L,"gray",function(){return this._gray},function(w$v){w$v!==this._gray&&(this._gray=w$v,w$k.gray(this,w$v))}),w$x(0,w$L,"disabled",function(){return this._disabled},function(w$v){w$v!==this._disabled&&(this.gray=this._disabled=w$v,this.mouseEnabled=!w$v)}),w$v}(w$X)),w$I=function(w$v){function w$l(){this.lockLayer=null,this.popupEffect=function(w$v){w$v.scale(1,1),w$H.from(w$v,{x:w$c.stage.width/2,y:w$c.stage.height/2,scaleX:0,scaleY:0},300,w$O.backOut,w$K.create(this,this.doOpen,[w$v]))},this.closeEffect=function(w$v,w$l){w$H.to(w$v,{x:w$c.stage.width/2,y:w$c.stage.height/2,scaleX:0,scaleY:0},300,w$O.strongOut,w$K.create(this,this.doClose,[w$v,w$l]))},w$l.__super.call(this),this.maskLayer=new w$X,this.popupEffectHandler=w$K.create(this,this.popupEffect,null,!1),this.closeEffectHandler=w$K.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,w$c.stage.addChild(this),w$c.stage.on("resize",this,this._onResize),w$Q.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}w$m(w$l,"laya.ui.DialogManager",w$X);var w$L=w$l.prototype;return w$L._closeOnSide=function(){var w$v=this.getChildAt(this.numChildren-1);w$v instanceof laya.ui.Dialog&&w$v.close("side")},w$L.setLockView=function(w$v){this.lockLayer||(this.lockLayer=new w$t,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(w$c.stage.width,w$c.stage.height)),this.lockLayer.removeChildren(),w$v&&(w$v.centerX=w$v.centerY=0,this.lockLayer.addChild(w$v))},w$L._onResize=function(w$v){var w$l=this.maskLayer.width=w$c.stage.width,w$L=this.maskLayer.height=w$c.stage.height;this.lockLayer&&this.lockLayer.size(w$l,w$L),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,w$l,w$L,w$Q.popupBgColor),this.maskLayer.alpha=w$Q.popupBgAlpha;for(var w$A=this.numChildren-1;-1<w$A;w$A--){var w$x=this.getChildAt(w$A);w$x.popupCenter&&this._centerDialog(w$x)}},w$L._centerDialog=function(w$v){w$v.x=Math.round((w$c.stage.width-w$v.width>>1)+w$v.pivotX),w$v.y=Math.round((w$c.stage.height-w$v.height>>1)+w$v.pivotY)},w$L.open=function(w$v,w$l,w$L){void 0===w$l&&(w$l=!1),void 0===w$L&&(w$L=!1),w$l&&this._closeAll(),w$v.popupCenter&&this._centerDialog(w$v),this.addChild(w$v),(w$v.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),w$L&&null!=w$v.popupEffect?w$v.popupEffect.runWith(w$v):this.doOpen(w$v),this.event("open")},w$L.doOpen=function(w$v){w$v.onOpened()},w$L.lock=function(w$v){this.lockLayer&&(w$v?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},w$L.close=function(w$v,w$l,w$L){void 0===w$L&&(w$L=!1),w$L&&null!=w$v.closeEffect?w$v.closeEffect.runWith([w$v,w$l]):this.doClose(w$v,w$l),this.event("close")},w$L.doClose=function(w$v,w$l){w$v.removeSelf(),w$v.isModal&&this._checkMask(),w$v.closeHandler&&w$v.closeHandler.runWith(w$l),w$v.onClosed(w$l)},w$L.closeAll=function(){this._closeAll(),this.event("close")},w$L._closeAll=function(){for(var w$v=this.numChildren-1;-1<w$v;w$v--){var w$l=this.getChildAt(w$v);w$l&&null!=w$l.close&&this.doClose(w$l)}},w$L.getDialogsByGroup=function(w$v){for(var w$l=[],w$L=this.numChildren-1;-1<w$L;w$L--){var w$A=this.getChildAt(w$L);w$A&&w$A.group===w$v&&w$l.push(w$A)}return w$l},w$L.closeByGroup=function(w$v){for(var w$l=[],w$L=this.numChildren-1;-1<w$L;w$L--){var w$A=this.getChildAt(w$L);w$A&&w$A.group===w$v&&(w$A.close(),w$l.push(w$A))}return w$l},w$L._checkMask=function(){this.maskLayer.removeSelf();for(var w$v=this.numChildren-1;-1<w$v;w$v--){var w$l=this.getChildAt(w$v);if(w$l&&w$l.isModal)return void this.addChildAt(this.maskLayer,w$v)}},w$l}(),w$t=function(w$v){function w$l(){w$l.__super.call(this)}w$m(w$l,"laya.ui.Box",w$v);var w$L=w$l.prototype;return w$c.imps(w$L,{"laya.ui.IBox":!0}),w$x(0,w$L,"dataSource",w$v.prototype._$get_dataSource,function(w$v){for(var w$l in this._dataSource=w$v){var w$L=this.getChildByName(w$l);w$L?w$L.dataSource=w$v[w$l]:this.hasOwnProperty(w$l)&&"function"!=typeof this[w$l]&&(this[w$l]=w$v[w$l])}}),w$l}(w$P),w$a=function(w$l){function w$L(w$v,w$l){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,w$L.__super.call(this),this._labelColors=w$V.buttonLabelColors,this._stateNum=w$V.buttonStateNum,void 0===w$l&&(w$l=""),this.skin=w$v,this.label=w$l}w$m(w$L,"laya.ui.Button",w$l);var w$v=w$L.prototype;return w$c.imps(w$v,{"laya.ui.ISelect":!0}),w$v.destroy=function(w$v){w$J.clearCache(this,this._skin),w$J.clearObject(this,this._weakKey),void 0===w$v&&(w$v=!0),w$l.prototype.destroy.call(this,w$v),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(w$v),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},w$v.createChildren=function(){this.graphics=this._bitmap=new w$M},w$v.createText=function(){this._text||(this._text=new w$f,this._text.overflow=w$f.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},w$v.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},w$v.onMouse=function(w$v){if(!1!==this.toggle||!this._selected)return"click"===w$v.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=w$L.stateMap[w$v.type]))},w$v.changeClips=function(){var w$v=w$J.getRes(this._skin);if(w$v&&this._skin&&""!=this._skin){w$J.clearObject(this,this._weakKey);var w$l=w$v.sourceWidth,w$L=w$v.sourceHeight/this._stateNum;w$v.$_GID||(w$v.$_GID=w$g.getGID());var w$A=w$v.$_GID+"-"+this._stateNum,w$x=w$J.findObject(w$A);if(w$g.isOkTextureList(w$x)||(w$x=null),w$x)this._weakKey=w$A,w$J.keepObject(this,this._weakKey),this._sources=w$x;else{if(this._sources=[],1===this._stateNum)this._sources.push(w$v);else for(var w$m=0;w$m<this._stateNum;w$m++){var w$Z=w$w.createFromTexture(w$v,0,w$L*w$m,w$l,w$L);if(w$v.alphaTexture){var w$O=w$v.width/w$v.alphaTexture.width;w$Z.alphaTexture=w$w.createFromTexture(w$v.alphaTexture,0/w$O,w$L*w$m/w$O,w$l/w$O,w$L/w$O)}this._sources.push(w$Z)}w$J.saveObject(w$A,this._sources),this._weakKey=w$A,w$J.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||w$l,this._bitmap.height=this._height||w$L,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=w$l)}else console.warn("lose skin ",this._skin,this.name,this.__className)},w$v.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var w$v=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[w$v]),this.label&&(this._text.color=this._labelColors[w$v],this._strokeColors&&(this._text.strokeColor=this._strokeColors[w$v]))},w$v._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},w$x(0,w$v,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(w$v){this.createText(),this._text.strokeColor=w$v}),w$x(0,w$v,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),w$x(0,w$v,"skin",function(){return this._skin},function(w$v){this._skin!=w$v&&(w$J.clearCache(this,this._skin),this._skin=w$v,w$J.keepCache(this,this._skin),this.callLater(this.changeClips),this._setStateChanged())}),w$x(0,w$v,"state",function(){return this._state},function(w$v){this._state!=w$v&&(this._state=w$v,this._setStateChanged())}),w$x(0,w$v,"text",function(){return this.createText(),this._text}),w$x(0,w$v,"stateNum",function(){return this._stateNum},function(w$v){"string"==typeof w$v&&(w$v=parseInt(w$v)),this._stateNum!=w$v&&(this._stateNum=w$v<1?1:3<w$v?3:w$v,this.callLater(this.changeClips))}),w$x(0,w$v,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(w$v){this._strokeColors=w$k.fillArray(w$V.buttonLabelColors,w$v,String),this._setStateChanged()}),w$x(0,w$v,"labelColors",function(){return this._labelColors.join(",")},function(w$v){this._labelColors=w$k.fillArray(w$V.buttonLabelColors,w$v,String),this._setStateChanged()}),w$x(0,w$v,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),w$x(0,w$v,"label",function(){return this._text?this._text.text:null},function(w$v){(this._text||w$v)&&(this.createText(),this._text.text!=w$v&&(w$v&&!this._text.parent&&this.addChild(this._text),this._text.text=(w$v+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),w$x(0,w$v,"selected",function(){return this._selected},function(w$v){this._selected!=w$v&&(this._selected=w$v,this.state=this._selected?2:0,this.event("change"))}),w$x(0,w$v,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(w$v){this.createText(),this._text.padding=w$k.fillArray(w$V.labelPadding,w$v,Number)}),w$x(0,w$v,"labelSize",function(){return this.createText(),this._text.fontSize},function(w$v){this.createText(),this._text.fontSize=w$v}),w$x(0,w$v,"labelStroke",function(){return this.createText(),this._text.stroke},function(w$v){this.createText(),this._text.stroke=w$v}),w$x(0,w$v,"labelBold",function(){return this.createText(),this._text.bold},function(w$v){this.createText(),this._text.bold=w$v}),w$x(0,w$v,"labelFont",function(){return this.createText(),this._text.font},function(w$v){this.createText(),this._text.font=w$v}),w$x(0,w$v,"labelAlign",function(){return this.createText(),this._text.align},function(w$v){this.createText(),this._text.align=w$v}),w$x(0,w$v,"clickHandler",function(){return this._clickHandler},function(w$v){this._clickHandler=w$v}),w$x(0,w$v,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(w$v){this._bitmap.sizeGrid=w$k.fillArray(w$V.defaultSizeGrid,w$v,Number)}),w$x(0,w$v,"width",w$l.prototype._$get_width,function(w$v){w$c.superSet(w$P,this,"width",w$v),this._autoSize&&(this._bitmap.width=w$v,this._text&&(this._text.width=w$v))}),w$x(0,w$v,"height",w$l.prototype._$get_height,function(w$v){w$c.superSet(w$P,this,"height",w$v),this._autoSize&&(this._bitmap.height=w$v,this._text&&(this._text.height=w$v))}),w$x(0,w$v,"dataSource",w$l.prototype._$get_dataSource,function(w$v){"number"==typeof(this._dataSource=w$v)||"string"==typeof w$v?this.label=w$v+"":w$c.superSet(w$P,this,"dataSource",w$v)}),w$x(0,w$v,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(w$v){this._bitmap._offset=w$v?w$k.fillArray([1,1],w$v,Number):[]}),w$A(w$L,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),w$L}(w$P),w$q=function(w$l){function w$A(w$v,w$l,w$L){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._complete=null,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,w$A.__super.call(this),void 0===w$l&&(w$l=1),void 0===w$L&&(w$L=1),this._clipX=w$l,this._clipY=w$L,this.skin=w$v}w$m(w$A,"laya.ui.Clip",w$l);var w$v=w$A.prototype;return w$v.destroy=function(w$v){w$J.clearCache(this,this._skin),w$J.clearObject(this,this._weakKey),void 0===w$v&&(w$v=!0),w$l.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},w$v.dispose=function(){this.destroy(!0),w$c.loader.clearRes(this._skin)},w$v.createChildren=function(){this.graphics=this._bitmap=new w$M},w$v._onDisplay=function(w$v){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},w$v.changeClip=function(){if(this._clipChanged=!1,this._skin){var w$v=w$J.getRes(this._skin);w$v?this.loadComplete(this._skin,w$v):w$c.loader.load(this._skin,w$K.create(this,this.loadComplete,[this._skin]))}},w$v.loadComplete=function(w$v,w$l){if(w$v===this._skin&&w$l){w$J.clearObject(this,this._weakKey);var w$L=this._clipWidth||Math.ceil(w$l.sourceWidth/this._clipX),w$A=this._clipHeight||Math.ceil(w$l.sourceHeight/this._clipY),w$x=this._skin+w$L+w$A,w$m=w$J.findObject(w$x);if(w$g.isOkTextureList(w$m)||(w$m=null),w$m)this._weakKey=w$x,w$J.keepObject(this,this._weakKey),this._sources=w$m;else{this._sources=[];for(var w$Z=0;w$Z<this._clipY;w$Z++)for(var w$O=0;w$O<this._clipX;w$O++){var w$e=w$w.createFromTexture(w$l,w$L*w$O,w$A*w$Z,w$L,w$A);if(w$l.alphaTexture){var w$$=w$l.width/w$l.alphaTexture.width;w$e.alphaTexture=w$w.createFromTexture(w$l.alphaTexture,w$L*w$O/w$$,w$A*w$Z/w$$,w$L/w$$,w$A/w$$)}this._sources.push(w$e)}w$J.saveObject(w$x,this._sources),this._weakKey=w$x,w$J.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},w$v.play=function(w$v,w$l){void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=-1),this._isPlaying=!0,this.index=w$v,this._toIndex=w$l,this._index++,w$c.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},w$v._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},w$v.stop=function(){this._isPlaying=!1,w$c.timer.clear(this,this._loop),this.event("complete")},w$v._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},w$x(0,w$v,"interval",function(){return this._interval},function(w$v){this._interval!=w$v&&(this._interval=w$v,this._isPlaying&&this.play())}),w$x(0,w$v,"skin",function(){return this._skin},function(w$v){this._skin!=w$v&&(w$J.clearCache(this,this._skin),(this._skin=w$v)?(w$J.keepCache(this,this._skin),this._setClipChanged()):this._bitmap.source=null)}),w$x(0,w$v,"sources",function(){return this._sources},function(w$v){this._sources=w$v,this.index=this._index,this.event("loaded")}),w$x(0,w$v,"clipX",function(){return this._clipX},function(w$v){this._clipX=w$v||1,this._setClipChanged()}),w$x(0,w$v,"clipY",function(){return this._clipY},function(w$v){this._clipY=w$v||1,this._setClipChanged()}),w$x(0,w$v,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),w$x(0,w$v,"clipWidth",function(){return this._clipWidth},function(w$v){this._clipWidth=w$v,this._setClipChanged()}),w$x(0,w$v,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(w$v){this._bitmap.sizeGrid=w$k.fillArray(w$V.defaultSizeGrid,w$v,Number)}),w$x(0,w$v,"group",function(){return this._group},function(w$v){w$v&&this._skin&&w$J.setGroup(this._skin,w$v),this._group=w$v}),w$x(0,w$v,"clipHeight",function(){return this._clipHeight},function(w$v){this._clipHeight=w$v,this._setClipChanged()}),w$x(0,w$v,"width",w$l.prototype._$get_width,function(w$v){w$c.superSet(w$P,this,"width",w$v),this._bitmap.width=w$v}),w$x(0,w$v,"height",w$l.prototype._$get_height,function(w$v){w$c.superSet(w$P,this,"height",w$v),this._bitmap.height=w$v}),w$x(0,w$v,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),w$x(0,w$v,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),w$x(0,w$v,"index",function(){return this._index},function(w$v){this._index=w$v,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[w$v]),this.event("change")}),w$x(0,w$v,"autoPlay",function(){return this._autoPlay},function(w$v){this._autoPlay!=w$v&&((this._autoPlay=w$v)?this.play():this.stop())}),w$x(0,w$v,"isPlaying",function(){return this._isPlaying},function(w$v){this._isPlaying=w$v}),w$x(0,w$v,"dataSource",w$l.prototype._$get_dataSource,function(w$v){"number"==typeof(this._dataSource=w$v)&&Math.floor(w$v)==w$v||"string"==typeof w$v?this.index=parseInt(w$v):w$c.superSet(w$P,this,"dataSource",w$v)}),w$x(0,w$v,"bitmap",function(){return this._bitmap}),w$A}(w$P),w$u=function(w$l){function w$v(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,w$v.__super.call(this)}w$m(w$v,"laya.ui.ColorPicker",w$l);var w$L=w$v.prototype;return w$L.destroy=function(w$v){void 0===w$v&&(w$v=!0),w$l.prototype.destroy.call(this,w$v),this._colorPanel&&this._colorPanel.destroy(w$v),this._colorButton&&this._colorButton.destroy(w$v),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},w$L.createChildren=function(){this.addChild(this._colorButton=new w$a),this._colorPanel=new w$t,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new w$X),this._colorPanel.addChild(this._colorBlock=new w$X),this._colorPanel.addChild(this._colorInput=new w$r)},w$L.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},w$L.onPanelMouseDown=function(w$v){w$v.stopPropagation()},w$L.changePanel=function(){this._panelChanged=!1;var w$v=this._colorPanel.graphics;w$v.clear(),w$v.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(w$v=this._colorTiles.graphics).clear();for(var w$l=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],w$L=0;w$L<12;w$L++)for(var w$A=0;w$A<20;w$A++){var w$x=0;w$x=0===w$A?w$l[w$L]:1===w$A?0:51*(((3*w$L+w$A/6)%3<<0)+3*(w$L/6<<0))<<16|w$A%6*51<<8|(w$L<<0)%6*51;var w$m=w$k.toColor(w$x);this._colors.push(w$m);var w$Z=w$A*this._gridSize,w$O=w$L*this._gridSize;w$v.drawRect(w$Z,w$O,this._gridSize,this._gridSize,w$m,"#000000")}},w$L.onColorButtonClick=function(w$v){this._colorPanel.parent?this.close():this.open()},w$L.open=function(){var w$v=this.localToGlobal(new w$G),w$l=w$v.x+this._colorPanel.width<=w$c.stage.width?w$v.x:w$c.stage.width-this._colorPanel.width,w$L=w$v.y+this._colorButton.height;w$L=w$L+this._colorPanel.height<=w$c.stage.height?w$L:w$v.y-this._colorPanel.height,this._colorPanel.pos(w$l,w$L),this._colorPanel.zOrder=1001,w$c._currentStage.addChild(this._colorPanel),w$c.stage.on("mousedown",this,this.removeColorBox)},w$L.close=function(){w$c.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},w$L.removeColorBox=function(w$v){this.close()},w$L.onColorFieldKeyDown=function(w$v){13==w$v.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),w$v.stopPropagation())},w$L.onColorInputChange=function(w$v){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},w$L.onColorTilesClick=function(w$v){this.selectedColor=this.getColorByMouse(),this.close()},w$L.onColorTilesMouseMove=function(w$v){this._colorInput.focus=!1;var w$l=this.getColorByMouse();this._colorInput.text=w$l,this.drawBlock(w$l)},w$L.getColorByMouse=function(){var w$v=this._colorTiles.getMousePoint(),w$l=Math.floor(w$v.x/this._gridSize),w$L=Math.floor(w$v.y/this._gridSize);return this._colors[20*w$L+w$l]},w$L.drawBlock=function(w$v){var w$l=this._colorBlock.graphics;w$l.clear();var w$L=w$v||"#ffffff";w$l.drawRect(0,0,50,20,w$L,this._borderColor),w$v||w$l.drawLine(0,0,50,20,"#ff0000")},w$L.changeColor=function(){var w$v=this.graphics;w$v.clear();var w$l=this._selectedColor||"#000000";w$v.drawRect(0,0,this._colorButton.width,this._colorButton.height,w$l)},w$L._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},w$x(0,w$L,"inputBgColor",function(){return this._inputBgColor},function(w$v){this._inputBgColor=w$v,this._setPanelChanged()}),w$x(0,w$L,"selectedColor",function(){return this._selectedColor},function(w$v){this._selectedColor!=w$v&&(this._selectedColor=this._colorInput.text=w$v,this.drawBlock(w$v),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",w$e.EMPTY.setTo("change",this,this)))}),w$x(0,w$L,"skin",function(){return this._colorButton.skin},function(w$v){this._colorButton.skin=w$v,this.changeColor()}),w$x(0,w$L,"bgColor",function(){return this._bgColor},function(w$v){this._bgColor=w$v,this._setPanelChanged()}),w$x(0,w$L,"borderColor",function(){return this._borderColor},function(w$v){this._borderColor=w$v,this._setPanelChanged()}),w$x(0,w$L,"inputColor",function(){return this._inputColor},function(w$v){this._inputColor=w$v,this._setPanelChanged()}),w$v}(w$P),w$R=function(w$l){function w$L(w$v,w$l){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,w$L.__super.call(this),this._itemColors=w$V.comboBoxItemColors,this.skin=w$v,this.labels=w$l}w$m(w$L,"laya.ui.ComboBox",w$l);var w$v=w$L.prototype;return w$v.destroy=function(w$v){void 0===w$v&&(w$v=!0),w$l.prototype.destroy.call(this,w$v),this._button&&this._button.destroy(w$v),this._list&&this._list.destroy(w$v),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},w$v.createChildren=function(){this.addChild(this._button=new w$a),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},w$v._createList=function(){this._list=new w$W,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},w$v._setListEvent=function(w$v){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=w$K.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},w$v.onListDown=function(w$v){w$v.stopPropagation()},w$v.onScrollBarDown=function(w$v){w$v.stopPropagation()},w$v.onButtonMouseDown=function(w$v){this.callLater(this.switchTo,[!this._isOpen])},w$v.changeList=function(){this._listChanged=!1;var w$v=this.width-2,w$l=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:w$v,height:this._itemHeight,fontSize:this._itemSize,color:w$l}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},w$v.onlistItemMouse=function(w$v,w$l){var w$L=w$v.type;if("mouseover"===w$L||"mouseout"===w$L){if(this._isCustomList)return;var w$A=this._list.getCell(w$l);if(!w$A)return;var w$x=w$A.getChildByName("label");w$x&&("mouseover"===w$L?(w$x.bgColor=this._itemColors[0],w$x.color=this._itemColors[1]):(w$x.bgColor=null,w$x.color=this._itemColors[2]))}else"click"===w$L&&(this.selectedIndex=w$l,this.isOpen=!1)},w$v.switchTo=function(w$v){this.isOpen=w$v},w$v.changeOpen=function(){this.isOpen=!this._isOpen},w$v.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var w$v=this._list.graphics;w$v.clear(),w$v.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var w$l=this._list.array||[],w$L=w$l.length=0,w$A=this._labels.length;w$L<w$A;w$L++)w$l.push({label:this._labels[w$L]});this._list.height=this._listHeight,this._list.array=w$l},w$v.changeSelected=function(){this._button.label=this.selectedLabel},w$v._onStageMouseWheel=function(w$v){this._list&&!this._list.contains(w$v.target)&&this.removeList(null)},w$v.removeList=function(w$v){w$c.stage.off("mousedown",this,this.removeList),w$c.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},w$x(0,w$v,"selectedIndex",function(){return this._selectedIndex},function(w$v){this._selectedIndex!=w$v&&(this._selectedIndex=w$v,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[w$e.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),w$x(0,w$v,"measureHeight",function(){return this._button.height}),w$x(0,w$v,"skin",function(){return this._button.skin},function(w$v){this._button.skin!=w$v&&(this._button.skin=w$v,this._listChanged=!0)}),w$x(0,w$v,"measureWidth",function(){return this._button.width}),w$x(0,w$v,"width",w$l.prototype._$get_width,function(w$v){w$c.superSet(w$P,this,"width",w$v),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),w$x(0,w$v,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(w$v){this.selectedIndex=this._labels.indexOf(w$v)}),w$x(0,w$v,"labels",function(){return this._labels.join(",")},function(w$v){0<this._labels.length&&(this.selectedIndex=-1),w$v?this._labels=w$v.split(","):this._labels.length=0,this._itemChanged=!0}),w$x(0,w$v,"height",w$l.prototype._$get_height,function(w$v){w$c.superSet(w$P,this,"height",w$v),this._button.height=this._height}),w$x(0,w$v,"selectHandler",function(){return this._selectHandler},function(w$v){this._selectHandler=w$v}),w$x(0,w$v,"visibleNum",function(){return this._visibleNum},function(w$v){this._visibleNum=w$v,this._listChanged=!0}),w$x(0,w$v,"labelBold",function(){return this._button.text.bold},function(w$v){this._button.text.bold=w$v}),w$x(0,w$v,"itemColors",function(){return String(this._itemColors)},function(w$v){this._itemColors=w$k.fillArray(this._itemColors,w$v,String),this._listChanged=!0}),w$x(0,w$v,"itemSize",function(){return this._itemSize},function(w$v){this._itemSize=w$v,this._listChanged=!0}),w$x(0,w$v,"scrollBar",function(){return this.list.scrollBar}),w$x(0,w$v,"isOpen",function(){return this._isOpen},function(w$v){if(this._isOpen!=w$v)if(this._isOpen=w$v,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var w$l=this.localToGlobal(w$G.TEMP.setTo(0,0)),w$L=w$l.y+this._button.height;w$L=w$L+this._listHeight<=w$c.stage.height?w$L:w$l.y-this._listHeight,this._list.pos(w$l.x,w$L),this._list.zOrder=1001,w$c._currentStage.addChild(this._list),w$c.stage.once("mousedown",this,this.removeList),w$c.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),w$x(0,w$v,"scrollBarSkin",function(){return this._scrollBarSkin},function(w$v){this._scrollBarSkin=w$v}),w$x(0,w$v,"sizeGrid",function(){return this._button.sizeGrid},function(w$v){this._button.sizeGrid=w$v}),w$x(0,w$v,"button",function(){return this._button}),w$x(0,w$v,"list",function(){return this._list||this._createList(),this._list},function(w$v){w$v&&(w$v.removeSelf(),this._isCustomList=!0,this._list=w$v,this._setListEvent(w$v),this._itemHeight=w$v.getCell(0).height+w$v.spaceY)}),w$x(0,w$v,"dataSource",w$l.prototype._$get_dataSource,function(w$v){"number"==typeof(this._dataSource=w$v)&&Math.floor(w$v)==w$v||"string"==typeof w$v?this.selectedIndex=parseInt(w$v):w$v instanceof Array?this.labels=w$v.join(","):w$c.superSet(w$P,this,"dataSource",w$v)}),w$x(0,w$v,"labelColors",function(){return this._button.labelColors},function(w$v){this._button.labelColors!=w$v&&(this._button.labelColors=w$v)}),w$x(0,w$v,"labelPadding",function(){return this._button.text.padding.join(",")},function(w$v){this._button.text.padding=w$k.fillArray(w$V.labelPadding,w$v,Number)}),w$x(0,w$v,"labelSize",function(){return this._button.text.fontSize},function(w$v){this._button.text.fontSize=w$v}),w$x(0,w$v,"labelFont",function(){return this._button.text.font},function(w$v){this._button.text.font=w$v}),w$x(0,w$v,"stateNum",function(){return this._button.stateNum},function(w$v){this._button.stateNum=w$v}),w$L}(w$P),w$N=function(w$l){function w$L(w$v){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,w$L.__super.call(this),this._showButtons=w$Q.showButtons,this._touchScrollEnable=w$Q.touchScrollEnable,this._mouseWheelEnable=w$Q.mouseWheelEnable,this.skin=w$v,this.max=1}w$m(w$L,"laya.ui.ScrollBar",w$l);var w$v=w$L.prototype;return w$v.destroy=function(w$v){void 0===w$v&&(w$v=!0),this.stopScroll(),this.target=null,w$l.prototype.destroy.call(this,w$v),this.upButton&&this.upButton.destroy(w$v),this.downButton&&this.downButton.destroy(w$v),this.slider&&this.slider.destroy(w$v),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},w$v.createChildren=function(){this.addChild(this.slider=new w$b),this.addChild(this.upButton=new w$a),this.addChild(this.downButton=new w$a)},w$v.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},w$v.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},w$v.onButtonMouseDown=function(w$v){var w$l=w$v.currentTarget===this.upButton;this.slide(w$l),w$c.timer.once(w$V.scrollBarDelayTime,this,this.startLoop,[w$l]),w$c.stage.once("mouseup",this,this.onStageMouseUp)},w$v.startLoop=function(w$v){w$c.timer.frameLoop(1,this,this.slide,[w$v])},w$v.slide=function(w$v){w$v?this.value-=this._scrollSize:this.value+=this._scrollSize},w$v.onStageMouseUp=function(w$v){w$c.timer.clear(this,this.startLoop),w$c.timer.clear(this,this.slide)},w$v.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},w$v.changeSize=function(){w$l.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},w$v.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},w$v.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},w$v.setScroll=function(w$v,w$l,w$L){this.runCallLater(this.changeSize),this.slider.setSlider(w$v,w$l,w$L),this.slider.bar.visible=0<w$l,!this._hide&&this.autoHide&&(this.visible=!1)},w$v.onTargetMouseWheel=function(w$v){this.value-=w$v.delta*this._scrollSize,this.target=this._target},w$v.onTargetMouseDown=function(w$v){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new w$G),this._lastPoint.setTo(w$c.stage.mouseX,w$c.stage.mouseY),w$c.timer.clear(this,this.tweenMove),w$H.clearTween(this),w$c.stage.once("mouseup",this,this.onStageMouseUp2),w$c.stage.once("mouseout",this,this.onStageMouseUp2),w$c.timer.frameLoop(1,this,this.loop)},w$v.loop=function(){var w$v=w$c.stage.mouseY,w$l=w$c.stage.mouseX;if(this._lastOffset=this.isVertical?w$v-this._lastPoint.y:w$l-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?w$c.stage._canvasTransform.getScaleY():w$c.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=w$l,this._lastPoint.y=w$v,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},w$v.onStageMouseUp2=function(w$v){if(w$c.stage.off("mouseup",this,this.onStageMouseUp2),w$c.stage.off("mouseout",this,this.onStageMouseUp2),w$c.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?w$H.to(this,{value:this.min},this.elasticBackTime,w$O.sineOut,w$K.create(this,this.elasticOver)):this._value>this.max&&w$H.to(this,{value:this.max},this.elasticBackTime,w$O.sineOut,w$K.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?w$c.stage.mouseY-this._lastPoint.y:w$c.stage.mouseX-this._lastPoint.x);for(var w$l=0,w$L=Math.min(this._offsets.length,3),w$A=0;w$A<w$L;w$A++)w$l+=this._offsets[this._offsets.length-1-w$A];if(this._lastOffset=w$l/w$L,(w$l=Math.abs(this._lastOffset))<2)return void this.event("end");60<w$l&&(this._lastOffset=0<this._lastOffset?60:-60);var w$x=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));w$c.timer.frameLoop(1,this,this.tweenMove,[w$x])}},w$v.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&w$H.to(this,{alpha:0},500),this.event("end")},w$v.tweenMove=function(w$v){this._lastOffset*=this.rollRatio;var w$l=NaN;if(0<w$v&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,w$l=.5*-(this.min-w$v-this.value),this._lastOffset>w$l&&(this._lastOffset=w$l)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,w$l=.5*-(this.max+w$v-this.value),this._lastOffset<w$l&&(this._lastOffset=w$l))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(w$c.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?w$H.to(this,{value:this.min},this.elasticBackTime,w$O.sineOut,w$K.create(this,this.elasticOver)):this._value>this.max?w$H.to(this,{value:this.max},this.elasticBackTime,w$O.sineOut,w$K.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&w$H.to(this,{alpha:0},500)}},w$v.stopScroll=function(){this.onStageMouseUp2(null),w$c.timer.clear(this,this.tweenMove),w$H.clearTween(this)},w$x(0,w$v,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),w$x(0,w$v,"skin",function(){return this._skin},function(w$v){this._skin!=w$v&&(this._skin=w$v,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),w$x(0,w$v,"max",function(){return this.slider.max},function(w$v){this.slider.max=w$v}),w$x(0,w$v,"showButtons",function(){return this._showButtons},function(w$v){this._showButtons=w$v,this.callLater(this.changeScrollBar)}),w$x(0,w$v,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),w$x(0,w$v,"min",function(){return this.slider.min},function(w$v){this.slider.min=w$v}),w$x(0,w$v,"value",function(){return this._value},function(w$v){w$v!==this._value&&(this._value=w$v,this._isElastic||(this.slider._value!=w$v&&(this.slider._value=w$v,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),w$x(0,w$v,"isVertical",function(){return this.slider.isVertical},function(w$v){this.slider.isVertical=w$v}),w$x(0,w$v,"sizeGrid",function(){return this.slider.sizeGrid},function(w$v){this.slider.sizeGrid=w$v}),w$x(0,w$v,"scrollSize",function(){return this._scrollSize},function(w$v){this._scrollSize=w$v}),w$x(0,w$v,"dataSource",w$l.prototype._$get_dataSource,function(w$v){"number"==typeof(this._dataSource=w$v)||"string"==typeof w$v?this.value=Number(w$v):w$c.superSet(w$P,this,"dataSource",w$v)}),w$x(0,w$v,"thumbPercent",function(){return this._thumbPercent},function(w$v){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),w$v=1<=w$v?.99:w$v,this._thumbPercent=w$v,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*w$v,w$V.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*w$v,w$V.scrollBarMinNum))}),w$x(0,w$v,"target",function(){return this._target},function(w$v){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=w$v)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),w$x(0,w$v,"hide",function(){return this._hide},function(w$v){this._hide=w$v,this.visible=!w$v}),w$x(0,w$v,"touchScrollEnable",function(){return this._touchScrollEnable},function(w$v){this._touchScrollEnable=w$v,this.target=this._target}),w$x(0,w$v,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(w$v){this._mouseWheelEnable=w$v,this.target=this._target}),w$x(0,w$v,"tick",function(){return this.slider.tick},function(w$v){this.slider.tick=w$v}),w$L}(w$P),w$b=function(w$l){function w$L(w$v){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,w$L.__super.call(this),this.skin=w$v}w$m(w$L,"laya.ui.Slider",w$l);var w$v=w$L.prototype;return w$v.destroy=function(w$v){void 0===w$v&&(w$v=!0),w$l.prototype.destroy.call(this,w$v),this._bg&&this._bg.destroy(w$v),this._bar&&this._bar.destroy(w$v),this._progress&&this._progress.destroy(w$v),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},w$v.createChildren=function(){this.addChild(this._bg=new w$j),this.addChild(this._bar=new w$a)},w$v.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},w$v.onBarMouseDown=function(w$v){this._globalSacle||(this._globalSacle=new w$G),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=w$c.stage.mouseX,this._ty=w$c.stage.mouseY,w$c.stage.on("mousemove",this,this.mouseMove),w$c.stage.once("mouseup",this,this.mouseUp),w$c.stage.once("mouseout",this,this.mouseUp),this.showValueText()},w$v.showValueText=function(){if(this.showLabel){var w$v=laya.ui.Slider.label;this.addChild(w$v),w$v.textField.changeText(this._value+""),this.isVertical?(w$v.x=this._bar.x+20,w$v.y=.5*(this._bar.height-w$v.height)+this._bar.y):(w$v.y=this._bar.y-20,w$v.x=.5*(this._bar.width-w$v.width)+this._bar.x)}},w$v.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},w$v.mouseUp=function(w$v){w$c.stage.off("mousemove",this,this.mouseMove),w$c.stage.off("mouseup",this,this.mouseUp),w$c.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},w$v.mouseMove=function(w$v){var w$l=this._value;this.isVertical?(this._bar.y+=(w$c.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(w$c.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=w$c.stage.mouseX,this._ty=w$c.stage.mouseY;var w$L=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*w$L)/w$L,this._value!=w$l&&this.sendChangeEvent(),this.showValueText()},w$v.sendChangeEvent=function(w$v){void 0===w$v&&(w$v="change"),this.event(w$v),this.changeHandler&&this.changeHandler.runWith(this._value)},w$v.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},w$v.changeSize=function(){w$l.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},w$v.setSlider=function(w$v,w$l,w$L){this._value=-1,this._min=w$v,this._max=w$v<w$l?w$l:w$v,this.value=w$L<w$v?w$v:w$l<w$L?w$l:w$L},w$v.changeValue=function(){var w$v=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*w$v)/w$v,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var w$l=this._max-this._min;0===w$l&&(w$l=1),this.isVertical?(this._bar.y=(this._value-this._min)/w$l*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/w$l*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},w$v.onBgMouseDown=function(w$v){var w$l=this._bg.getMousePoint();this.isVertical?this.value=w$l.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=w$l.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},w$x(0,w$v,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),w$x(0,w$v,"skin",function(){return this._skin},function(w$v){if(this._skin!=w$v){this._skin=w$v,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var w$l=this._skin.replace(".png","$progress.png");w$J.getRes(w$l)&&(this._progress||(this.addChild(this._progress=new w$j),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=w$l),this.setBarPoint(),this.callLater(this.changeValue)}}),w$x(0,w$v,"allowClickBack",function(){return this._allowClickBack},function(w$v){this._allowClickBack!=w$v&&((this._allowClickBack=w$v)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),w$x(0,w$v,"max",function(){return this._max},function(w$v){this._max!=w$v&&(this._max=w$v,this.callLater(this.changeValue))}),w$x(0,w$v,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),w$x(0,w$v,"tick",function(){return this._tick},function(w$v){this._tick!=w$v&&(this._tick=w$v,this.callLater(this.changeValue))}),w$x(0,w$v,"sizeGrid",function(){return this._bg.sizeGrid},function(w$v){this._bg.sizeGrid=w$v,this._bar.sizeGrid=w$v,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),w$x(0,w$v,"min",function(){return this._min},function(w$v){this._min!=w$v&&(this._min=w$v,this.callLater(this.changeValue))}),w$x(0,w$v,"value",function(){return this._value},function(w$v){if(this._value!=w$v){var w$l=this._value;this._value=w$v,this.changeValue(),this._value!=w$l&&this.sendChangeEvent()}}),w$x(0,w$v,"dataSource",w$l.prototype._$get_dataSource,function(w$v){"number"==typeof(this._dataSource=w$v)||"string"==typeof w$v?this.value=Number(w$v):w$c.superSet(w$P,this,"dataSource",w$v)}),w$x(0,w$v,"bar",function(){return this._bar}),w$A(w$L,["label",function(){return this.label=new w$F}]),w$L}(w$P),w$j=function(w$l){function w$L(w$v){this._bitmap=null,this._skin=null,this._group=null,w$L.__super.call(this),this.skin=w$v}w$m(w$L,"laya.ui.Image",w$l);var w$v=w$L.prototype;return w$v.destroy=function(w$v){void 0===w$v&&(w$v=!0),w$l.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,w$J.clearCache(this,this._skin)},w$v.dispose=function(){this.destroy(!0),w$J.clearCache(this,this._skin)},w$v.createChildren=function(){this.graphics=this._bitmap=new w$M},w$v.setSource=function(w$v,w$l){w$v===this._skin&&w$l&&(this.source=w$l,this.onCompResize())},w$x(0,w$v,"source",function(){return this._bitmap.source},function(w$v){this._bitmap&&(this._bitmap.source=w$v,this.event("loaded"),this.repaint())}),w$x(0,w$v,"dataSource",w$l.prototype._$get_dataSource,function(w$v){"string"==typeof(this._dataSource=w$v)?this.skin=w$v:w$c.superSet(w$P,this,"dataSource",w$v)}),w$x(0,w$v,"measureHeight",function(){return this._bitmap.height}),w$x(0,w$v,"skin",function(){return this._skin},function(w$v){if(this._skin!=w$v)if(w$J.clearCache(this,this._skin),this._skin=w$v){w$J.keepCache(this,this._skin);var w$l=w$J.getRes(w$v);w$l?(this.source=w$l,this.onCompResize()):w$c.loader.load(this._skin,w$K.create(this,this.setSource,[this._skin]),null,"image",1,!0,this._group)}else this.source=null}),w$x(0,w$v,"group",function(){return this._group},function(w$v){w$v&&this._skin&&w$J.setGroup(this._skin,w$v),this._group=w$v}),w$x(0,w$v,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(w$v){this._bitmap.sizeGrid=w$k.fillArray(w$V.defaultSizeGrid,w$v,Number)}),w$x(0,w$v,"measureWidth",function(){return this._bitmap.width}),w$x(0,w$v,"width",w$l.prototype._$get_width,function(w$v){w$c.superSet(w$P,this,"width",w$v),this._bitmap.width=0==w$v?1e-7:w$v}),w$x(0,w$v,"height",w$l.prototype._$get_height,function(w$v){w$c.superSet(w$P,this,"height",w$v),this._bitmap.height=0==w$v?1e-7:w$v}),w$L}(w$P),w$F=function(w$l){function w$L(w$v){this._tf=null,w$L.__super.call(this),void 0===w$v&&(w$v=""),w$$.defaultColor=w$V.labelColor,this.text=w$v}w$m(w$L,"laya.ui.Label",w$l);var w$v=w$L.prototype;return w$v.destroy=function(w$v){void 0===w$v&&(w$v=!0),w$l.prototype.destroy.call(this,w$v),this._tf=null},w$v.createChildren=function(){this.addChild(this._tf=new w$f)},w$v.changeText=function(w$v){this._tf.changeText(w$v)},w$x(0,w$v,"padding",function(){return this._tf.padding.join(",")},function(w$v){this._tf.padding=w$k.fillArray(w$V.labelPadding,w$v,Number)}),w$x(0,w$v,"bold",function(){return this._tf.bold},function(w$v){this._tf.bold=w$v}),w$x(0,w$v,"align",function(){return this._tf.align},function(w$v){this._tf.align=w$v}),w$x(0,w$v,"text",function(){return this._tf.text},function(w$v){this._tf.text!=w$v&&(w$v&&(w$v=w$k.adptString(w$v+"")),this._tf.text=w$v,this.event("change"),this._width&&this._height||this.onCompResize())}),w$x(0,w$v,"italic",function(){return this._tf.italic},function(w$v){this._tf.italic=w$v}),w$x(0,w$v,"wordWrap",function(){return this._tf.wordWrap},function(w$v){this._tf.wordWrap=w$v}),w$x(0,w$v,"font",function(){return this._tf.font},function(w$v){this._tf.font=w$v}),w$x(0,w$v,"dataSource",w$l.prototype._$get_dataSource,function(w$v){"number"==typeof(this._dataSource=w$v)||"string"==typeof w$v?this.text=w$v+"":w$c.superSet(w$P,this,"dataSource",w$v)}),w$x(0,w$v,"color",function(){return this._tf.color},function(w$v){this._tf.color=w$v}),w$x(0,w$v,"valign",function(){return this._tf.valign},function(w$v){this._tf.valign=w$v}),w$x(0,w$v,"leading",function(){return this._tf.leading},function(w$v){this._tf.leading=w$v}),w$x(0,w$v,"fontSize",function(){return this._tf.fontSize},function(w$v){this._tf.fontSize=w$v}),w$x(0,w$v,"bgColor",function(){return this._tf.bgColor},function(w$v){this._tf.bgColor=w$v}),w$x(0,w$v,"borderColor",function(){return this._tf.borderColor},function(w$v){this._tf.borderColor=w$v}),w$x(0,w$v,"stroke",function(){return this._tf.stroke},function(w$v){this._tf.stroke=w$v}),w$x(0,w$v,"strokeColor",function(){return this._tf.strokeColor},function(w$v){this._tf.strokeColor=w$v}),w$x(0,w$v,"textField",function(){return this._tf}),w$x(0,w$v,"measureWidth",function(){return this._tf.width}),w$x(0,w$v,"measureHeight",function(){return this._tf.height}),w$x(0,w$v,"width",function(){return this._width||this._tf.text?w$c.superGet(w$P,this,"width"):0},function(w$v){w$c.superSet(w$P,this,"width",w$v),this._tf.width=w$v}),w$x(0,w$v,"height",function(){return this._height||this._tf.text?w$c.superGet(w$P,this,"height"):0},function(w$v){w$c.superSet(w$P,this,"height",w$v),this._tf.height=w$v}),w$x(0,w$v,"overflow",function(){return this._tf.overflow},function(w$v){this._tf.overflow=w$v}),w$x(0,w$v,"underline",function(){return this._tf.underline},function(w$v){this._tf.underline=w$v}),w$x(0,w$v,"underlineColor",function(){return this._tf.underlineColor},function(w$v){this._tf.underlineColor=w$v}),w$L}(w$P),w$p=function(w$l){function w$L(w$v){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,w$L.__super.call(this),this.skin=w$v}w$m(w$L,"laya.ui.ProgressBar",w$l);var w$v=w$L.prototype;return w$v.destroy=function(w$v){void 0===w$v&&(w$v=!0),w$l.prototype.destroy.call(this,w$v),this._bg&&this._bg.destroy(w$v),this._bar&&this._bar.destroy(w$v),this._bg=this._bar=null,this.changeHandler=null},w$v.createChildren=function(){this.addChild(this._bg=new w$j),this.addChild(this._bar=new w$j)},w$v.changeValue=function(){if(this.sizeGrid){var w$v=this.sizeGrid.split(","),w$l=Number(w$v[3]),w$L=Number(w$v[1]),w$A=(this.width-w$l-w$L)*this._value;this._bar.width=w$l+w$L+w$A,this._bar.visible=this._bar.width>w$l+w$L}else this._bar.width=this.width*this._value},w$x(0,w$v,"measureHeight",function(){return this._bg.height}),w$x(0,w$v,"skin",function(){return this._skin},function(w$v){this._skin!=w$v&&(this._skin=w$v,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),w$x(0,w$v,"measureWidth",function(){return this._bg.width}),w$x(0,w$v,"height",w$l.prototype._$get_height,function(w$v){w$c.superSet(w$P,this,"height",w$v),this._bg.height=this._height,this._bar.height=this._height}),w$x(0,w$v,"bar",function(){return this._bar}),w$x(0,w$v,"value",function(){return this._value},function(w$v){this._value!=w$v&&(w$v=1<w$v?1:w$v<0?0:w$v,this._value=w$v,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(w$v))}),w$x(0,w$v,"bg",function(){return this._bg}),w$x(0,w$v,"sizeGrid",function(){return this._bg.sizeGrid},function(w$v){this._bg.sizeGrid=this._bar.sizeGrid=w$v}),w$x(0,w$v,"width",w$l.prototype._$get_width,function(w$v){w$c.superSet(w$P,this,"width",w$v),this._bg.width=this._width,this.callLater(this.changeValue)}),w$x(0,w$v,"dataSource",w$l.prototype._$get_dataSource,function(w$v){"number"==typeof(this._dataSource=w$v)||"string"==typeof w$v?this.value=Number(w$v):w$c.superSet(w$P,this,"dataSource",w$v)}),w$L}(w$P),w$Y=(function(w$v){function w$L(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,w$L.__super.call(this),this._tipBox=new w$P,this._tipBox.addChild(this._tipText=new w$f),this._tipText.x=this._tipText.y=5,this._tipText.color=w$L.tipTextColor,this._defaultTipHandler=this._showDefaultTip,w$c.stage.on("showtip",this,this._onStageShowTip),w$c.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}w$m(w$L,"laya.ui.TipManager",w$P);var w$l=w$L.prototype;w$l._onStageHideTip=function(w$v){w$c.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},w$l._onStageShowTip=function(w$v){w$c.timer.once(w$L.tipDelay,this,this._showTip,[w$v],!0)},w$l._showTip=function(w$v){if("string"==typeof w$v){var w$l=String(w$v);Boolean(w$l)&&this._defaultTipHandler(w$l)}else w$v instanceof laya.utils.Handler?w$v.run():"function"==typeof w$v&&w$v.apply();w$c.stage.on("mousemove",this,this._onStageMouseMove),w$c.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},w$l._onStageMouseDown=function(w$v){this.closeAll()},w$l._onStageMouseMove=function(w$v){this._showToStage(this,w$L.offsetX,w$L.offsetY)},w$l._showToStage=function(w$v,w$l,w$L){void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0);var w$A=w$v.getBounds();w$v.x=w$c.stage.mouseX+w$l,w$v.y=w$c.stage.mouseY+w$L,w$v.x+w$A.width>w$c.stage.width&&(w$v.x-=w$A.width+w$l),w$v.y+w$A.height>w$c.stage.height&&(w$v.y-=w$A.height+w$L)},w$l.closeAll=function(){w$c.timer.clear(this,this._showTip),w$c.stage.off("mousemove",this,this._onStageMouseMove),w$c.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},w$l.showDislayTip=function(w$v){this.addChild(w$v),this._showToStage(this),w$c._currentStage.addChild(this)},w$l._showDefaultTip=function(w$v){this._tipText.text=w$v;var w$l=this._tipBox.graphics;w$l.clear(),w$l.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,w$L.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),w$c._currentStage.addChild(this)},w$x(0,w$l,"defaultTipHandler",function(){return this._defaultTipHandler},function(w$v){this._defaultTipHandler=w$v}),w$L.offsetX=10,w$L.offsetY=15,w$L.tipTextColor="#ffffff",w$L.tipBackColor="#111111",w$L.tipDelay=200}(),function(w$v){var w$r;function w$G(){this._idMap=null,this._aniList=null,this._watchMap={},w$G.__super.call(this)}w$m(w$G,"laya.ui.View",w$t);var w$l=w$G.prototype;return w$l.createView=function(w$v){if(w$v.animations&&!this._idMap&&(this._idMap={}),w$G.createComp(w$v,this,this),w$v.animations){var w$l,w$L,w$A=[],w$x=w$v.animations,w$m=0,w$Z=w$x.length;for(w$m=0;w$m<w$Z;w$m++){switch(w$l=new w$_,w$L=w$x[w$m],w$l._setUp(this._idMap,w$L),(this[w$L.name]=w$l)._setControlNode(this),w$L.action){case 1:w$l.play(0,!1);break;case 2:w$l.play(0,!0)}w$A.push(w$l)}this._aniList=w$A}0<this._width&&null==w$v.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},w$l.onEvent=function(w$v,w$l){},w$l.loadUI=function(w$v){var w$l=w$G.uiMap[w$v];w$l&&this.createView(w$l)},w$l.destroy=function(w$v){void 0===w$v&&(w$v=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,w$v)},w$l.changeData=function(w$v){var w$l=this._watchMap[w$v];if(w$l){console.log("change",w$v);for(var w$L=0,w$A=w$l.length;w$L<w$A;w$L++){w$l[w$L].exe(this)}}},w$G._regs=function(){for(var w$v in w$G.uiClassMap)w$d.regClass(w$v,w$G.uiClassMap[w$v])},w$G.createComp=function(w$v,w$l,w$L,w$A){if(!(w$l=w$l||w$G.getCompInstance(w$v)))return console.warn("can not create:"+w$v.type),null;var w$x=w$v.child;if(w$x)for(var w$m=w$l instanceof laya.ui.List,w$Z=0,w$O=w$x.length;w$Z<w$O;w$Z++){var w$e=w$x[w$Z];if(!w$l.hasOwnProperty("itemRender")||"render"!=w$e.props.name&&"render"!==w$e.props.renderType)if("Graphic"==w$e.type)w$d.addGraphicsToSprite(w$e,w$l);else if(w$d.isDrawType(w$e.type))w$d.addGraphicToSprite(w$e,w$l,!0);else{if(w$m){var w$$=[],w$_=w$G.createComp(w$e,null,w$L,w$$);w$$.length&&(w$_._$bindData=w$$)}else w$_=w$G.createComp(w$e,null,w$L,w$A);"Script"==w$e.type?"owner"in w$_?w$_.owner=w$l:"target"in w$_&&(w$_.target=w$l):"mask"==w$e.props.renderType||"mask"==w$e.props.name?w$l.mask=w$_:w$_ instanceof laya.display.Sprite&&w$l.addChild(w$_)}else w$l.itemRender=w$e}var w$o=w$v.props;for(var w$K in w$o){var w$r=w$o[w$K];w$G.eventDic[w$K]?w$r&&w$L&&w$l.on(w$K,w$L,w$L.onEvent,[w$r]):w$G.setCompValue(w$l,w$K,w$r,w$L,w$A)}return w$c.__typeof(w$l,"laya.ui.IItem")&&w$l.initItems(),w$v.compId&&w$L&&w$L._idMap&&(w$L._idMap[w$v.compId]=w$l),w$l},w$G.setCompValue=function(w$v,w$l,w$L,w$A,w$x){if("string"==typeof w$L&&-1<w$L.indexOf("${")){if(w$G._sheet||(w$G._sheet=w$d.getClass("laya.data.Table")),!w$G._sheet)return void console.warn("Can not find class Sheet");if(w$x)w$x.push(w$v,w$l,w$L);else if(w$A){-1==w$L.indexOf("].")&&(w$L=w$L.replace(".","[0]."));var w$m,w$Z,w$O=new w$r(w$v,w$l,w$L);w$O.exe(w$A);for(var w$e=w$L.replace(/\[.*?\]\./g,".");null!=(w$m=w$G._parseWatchData.exec(w$e));){for(var w$$=w$m[1];null!=(w$Z=w$G._parseKeyWord.exec(w$$));){var w$_=w$Z[0],w$o=w$A._watchMap[w$_]||(w$A._watchMap[w$_]=[]);w$o.push(w$O),w$G._sheet.I.notifer.on(w$_,w$A,w$A.changeData,[w$_])}(w$o=w$A._watchMap[w$$]||(w$A._watchMap[w$$]=[])).push(w$O),w$G._sheet.I.notifer.on(w$$,w$A,w$A.changeData,[w$$])}}}else if("var"===w$l&&w$A)w$A[w$L]=w$v;else if("onClick"==w$l){var w$K=w$c._runScript("(function(){"+w$L+"})");w$v.on("click",w$A,w$K)}else w$v[w$l]="true"===w$L||"false"!==w$L&&w$L},w$G.getCompInstance=function(w$v){var w$l,w$L=w$v.props?w$v.props.runtime:null;return w$l=w$L?w$G.viewClassMap[w$L]||w$G.uiClassMap[w$L]||w$c.__classmap[w$L]:w$G.uiClassMap[w$v.type],w$v.props&&w$v.props.hasOwnProperty("renderType")&&"instance"==w$v.props.renderType?w$l.instance:w$l?new w$l:null},w$G.regComponent=function(w$v,w$l){w$G.uiClassMap[w$v]=w$l,w$d.regClass(w$v,w$l)},w$G.regViewRuntime=function(w$v,w$l){w$G.viewClassMap[w$v]=w$l},w$G.uiMap={},w$G.viewClassMap={},w$G._sheet=null,w$A(w$G,["uiClassMap",function(){return this.uiClassMap={ViewStack:w$vv,LinkButton:w$a,TextArea:w$$v,ColorPicker:w$u,Box:w$t,Button:w$a,CheckBox:w$D,Clip:w$q,ComboBox:w$R,Component:w$P,HScrollBar:w$E,HSlider:w$i,Image:w$j,Label:w$F,List:w$W,Panel:w$s,ProgressBar:w$p,Radio:w$U,RadioGroup:w$Ov,ScrollBar:w$N,Slider:w$b,Tab:w$ev,TextInput:w$Lv,View:w$G,VScrollBar:w$lv,VSlider:w$Av,Tree:w$z,HBox:w$mv,VBox:w$Zv,Sprite:w$X,Animation:w$L,Text:w$f,FontClip:w$y}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),w$G.__init$=function(){w$G._regs(),w$r=function(){function w$v(w$v,w$l,w$L){this.comp=null,this.prop=null,this.value=null,this.comp=w$v,this.prop=w$l,this.value=w$L}return w$m(w$v,""),w$v.prototype.exe=function(w$v){var w$l=w$k.getBindFun(this.value);this.comp[this.prop]=w$l.call(this,w$v)},w$v}()},w$G}()),w$D=function(w$v){function w$L(w$v,w$l){void 0===w$l&&(w$l=""),w$L.__super.call(this,w$v,w$l)}w$m(w$L,"laya.ui.CheckBox",w$v);var w$l=w$L.prototype;return w$l.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},w$l.initialize=function(){w$v.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},w$x(0,w$l,"dataSource",w$v.prototype._$get_dataSource,function(w$v){"boolean"==typeof(this._dataSource=w$v)?this.selected=w$v:"string"==typeof w$v?this.selected="true"===w$v:w$c.superSet(w$a,this,"dataSource",w$v)}),w$L}(w$a),w$S=function(w$v){function w$l(){this._space=0,this._align="none",this._itemChanged=!1,w$l.__super.call(this)}w$m(w$l,"laya.ui.LayoutBox",w$t);var w$L=w$l.prototype;return w$L.addChild=function(w$v){return w$v.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,w$v)},w$L.onResize=function(w$v){this._setItemChanged()},w$L.addChildAt=function(w$v,w$l){return w$v.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,w$v,w$l)},w$L.removeChild=function(w$v){return w$v.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,w$v)},w$L.removeChildAt=function(w$v){return this.getChildAt(w$v).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,w$v)},w$L.refresh=function(){this._setItemChanged()},w$L.changeItems=function(){this._itemChanged=!1},w$L.sortItem=function(w$v){w$v&&w$v.sort(function(w$v,w$l){return w$v.y-w$l.y})},w$L._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},w$x(0,w$L,"space",function(){return this._space},function(w$v){this._space=w$v,this._setItemChanged()}),w$x(0,w$L,"align",function(){return this._align},function(w$v){this._align=w$v,this._setItemChanged()}),w$l}(),w$y=function(w$l){function w$L(w$v,w$l){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,w$L.__super.call(this),w$v&&(this.skin=w$v),w$l&&(this.sheet=w$l)}w$m(w$L,"laya.ui.FontClip",w$l);var w$v=w$L.prototype;return w$v.createChildren=function(){this._bitmap=new w$M,this.on("loaded",this,this._onClipLoaded)},w$v._onClipLoaded=function(){this.callLater(this.changeValue)},w$v.changeValue=function(){var w$v;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),w$v=this._sources[0]))){var w$l="horizontal"===this._direction;w$l?(this._wordsW=this._valueArr.length*(w$v.sourceWidth+this.spaceX),this._wordsH=w$v.sourceHeight):(this._wordsW=w$v.sourceWidth,this._wordsH=(w$v.sourceHeight+this.spaceY)*this._valueArr.length);var w$L=0;if(this._width)switch(this._align){case"center":w$L=.5*(this._width-this._wordsW);break;case"right":w$L=this._width-this._wordsW;break;default:w$L=0}for(var w$A=0,w$x=this._valueArr.length;w$A<w$x;w$A++){var w$m=this._indexMap[this._valueArr.charAt(w$A)];this.sources[w$m]&&(w$v=this.sources[w$m],w$l?this.graphics.drawTexture(w$v,w$L+w$A*(w$v.sourceWidth+this.spaceX),0,w$v.sourceWidth,w$v.sourceHeight):this.graphics.drawTexture(w$v,0+w$L,w$A*(w$v.sourceHeight+this.spaceY),w$v.sourceWidth,w$v.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},w$v.destroy=function(w$v){void 0===w$v&&(w$v=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),w$l.prototype.destroy.call(this,w$v)},w$x(0,w$v,"sheet",function(){return this._sheet},function(w$v){w$v+="";var w$l=(this._sheet=w$v).split(" ");this._clipX=String(w$l[0]).length,this.clipY=w$l.length,this._indexMap={};for(var w$L=0;w$L<this._clipY;w$L++)for(var w$A=w$l[w$L].split(""),w$x=0,w$m=w$A.length;w$x<w$m;w$x++)this._indexMap[w$A[w$x]]=w$L*this._clipX+w$x}),w$x(0,w$v,"height",w$l.prototype._$get_height,function(w$v){w$c.superSet(w$q,this,"height",w$v),this.callLater(this.changeValue)}),w$x(0,w$v,"direction",function(){return this._direction},function(w$v){this._direction=w$v,this.callLater(this.changeValue)}),w$x(0,w$v,"value",function(){return this._valueArr?this._valueArr:""},function(w$v){w$v+="",this._valueArr=w$v,this.callLater(this.changeValue)}),w$x(0,w$v,"width",w$l.prototype._$get_width,function(w$v){w$c.superSet(w$q,this,"width",w$v),this.callLater(this.changeValue)}),w$x(0,w$v,"spaceX",function(){return this._spaceX},function(w$v){this._spaceX=w$v,"horizontal"===this._direction&&this.callLater(this.changeValue)}),w$x(0,w$v,"spaceY",function(){return this._spaceY},function(w$v){this._spaceY=w$v,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),w$x(0,w$v,"align",function(){return this._align},function(w$v){this._align=w$v,this.callLater(this.changeValue)}),w$x(0,w$v,"measureWidth",function(){return this._wordsW}),w$x(0,w$v,"measureHeight",function(){return this._wordsH}),w$L}(w$q),w$W=function(w$v){function w$l(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new w$G,w$l.__super.call(this)}w$m(w$l,"laya.ui.List",w$v);var w$L=w$l.prototype;return w$c.imps(w$L,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),w$L.destroy=function(w$v){void 0===w$v&&(w$v=!0),this._content&&this._content.destroy(w$v),this._scrollBar&&this._scrollBar.destroy(w$v),laya.ui.Component.prototype.destroy.call(this,w$v),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},w$L.createChildren=function(){this.addChild(this._content=new w$t)},w$L.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=w$c.superGet(w$t,this,"cacheAs")),w$c.superSet(w$t,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},w$L.onScrollEnd=function(){w$c.superSet(w$t,this,"cacheAs",this._$P.cacheAs)},w$L._removePreScrollBar=function(){var w$v=this.removeChildByName("scrollBar");w$v&&w$v.destroy(!0)},w$L.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var w$v=this._getOneCell(),w$l=w$v.width+this._spaceX||1,w$L=w$v.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/w$l):Math.ceil(this._width/w$l)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/w$L):Math.round(this._height/w$L));var w$A=this._width?this._width:w$l*this.repeatX-this._spaceX,w$x=this._height?this._height:w$L*this.repeatY-this._spaceY;this._cellSize=this._isVertical?w$L:w$l,this._cellOffset=this._isVertical?w$L*Math.max(this._repeatY2,this._repeatY)-w$x-this._spaceY:w$l*Math.max(this._repeatX2,this._repeatX)-w$A-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=w$x:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=w$A),this.setContentSize(w$A,w$x);var w$m=this._isVertical?this.repeatX:this.repeatY,w$Z=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,w$m,w$Z),this._createdLine=w$Z,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},w$L._getOneCell=function(){if(0===this._cells.length){var w$v=this.createItem();if(this._offset.setTo(w$v.x,w$v.y),this.cacheContent)return w$v;this._cells.push(w$v)}return this._cells[0]},w$L._createItems=function(w$v,w$l,w$L){var w$A=this._content,w$x=this._getOneCell(),w$m=w$x.width+this._spaceX,w$Z=w$x.height+this._spaceY;if(this.cacheContent){var w$O=new w$t;w$O.cacheAsBitmap=!0,w$O.pos((this._isVertical?0:w$v)*w$m,(this._isVertical?w$v:0)*w$Z),this._content.addChild(w$O),this._content.optimizeScrollRect=!0,w$A=w$O}else{for(var w$e=[],w$$=this._cells.length-1;-1<w$$;w$$--){var w$_=this._cells[w$$];w$_.removeSelf(),w$e.push(w$_)}this._cells.length=0}for(var w$o=w$v;w$o<w$L;w$o++)for(var w$K=0;w$K<w$l;w$K++)(w$x=w$e&&w$e.length?w$e.pop():this.createItem()).x=(this._isVertical?w$K:w$o)*w$m-w$A.x,w$x.y=(this._isVertical?w$o:w$K)*w$Z-w$A.y,w$x.name="item"+(w$o*w$l+w$K),w$A.addChild(w$x),this.addCell(w$x)},w$L.createItem=function(){var w$v=[];if("function"==typeof this._itemRender)var w$l=new this._itemRender;else w$l=w$Y.createComp(this._itemRender,null,null,w$v);if(0==w$v.length&&w$l._watchMap){var w$L=w$l._watchMap;for(var w$A in w$L)for(var w$x=w$L[w$A],w$m=0;w$m<w$x.length;w$m++){var w$Z=w$x[w$m];w$v.push(w$Z.comp,w$Z.prop,w$Z.value)}}return w$v.length&&(w$l._$bindData=w$v),w$l},w$L.addCell=function(w$v){w$v.on("click",this,this.onCellMouse),w$v.on("rightclick",this,this.onCellMouse),w$v.on("mouseover",this,this.onCellMouse),w$v.on("mouseout",this,this.onCellMouse),w$v.on("mousedown",this,this.onCellMouse),w$v.on("mouseup",this,this.onCellMouse),this._cells.push(w$v)},w$L.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var w$v=0,w$l=w$v=0;w$l<1e4;w$l++){var w$L=this.getChildByName("item"+w$l);if(!w$L)break;this.addCell(w$L),w$v++}this.repeatY=w$v}},w$L.setContentSize=function(w$v,w$l){this._content.width=w$v,this._content.height=w$l,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new w$C),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,w$v,w$l),this._content.scrollRect=this._content.scrollRect),this.event("resize")},w$L.onCellMouse=function(w$v){"mousedown"===w$v.type&&(this._isMoved=!1);var w$l=w$v.currentTarget,w$L=this._startIndex+this._cells.indexOf(w$l);w$L<0||("click"===w$v.type||"rightclick"===w$v.type?this.selectEnable&&!this._isMoved?this.selectedIndex=w$L:this.changeCellState(w$l,!0,0):"mouseover"!==w$v.type&&"mouseout"!==w$v.type||this._selectedIndex===w$L||this.changeCellState(w$l,"mouseover"===w$v.type,0),this.mouseHandler&&this.mouseHandler.runWith([w$v,w$L]))},w$L.changeCellState=function(w$v,w$l,w$L){var w$A=w$v.getChildByName("selectBox");w$A&&(this.selectEnable=!0,w$A.visible=w$l,w$A.index=w$L)},w$L.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},w$L.onScrollBarChange=function(w$v){this.runCallLater(this.changeCells);var w$l=this._scrollBar.value,w$L=this._isVertical?this.repeatX:this.repeatY,w$A=this._isVertical?this.repeatY:this.repeatX,w$x=Math.floor(w$l/this._cellSize);if(this.cacheContent)w$Z=w$A+1,this._createdLine-w$x<w$Z&&(this._createItems(this._createdLine,w$L,this._createdLine+w$Z),this.renderItems(this._createdLine*w$L,0),this._createdLine+=w$Z);else{var w$m=w$x*w$L,w$Z=0;if(w$m>this._startIndex){w$Z=w$m-this._startIndex;var w$O=!0,w$e=this._startIndex+w$L*(w$A+1);this._isMoved=!0}else w$m<this._startIndex&&(w$Z=this._startIndex-w$m,w$O=!1,w$e=this._startIndex-1,this._isMoved=!0);for(var w$$=0;w$$<w$Z;w$$++){if(w$O){var w$_=this._cells.shift();this._cells[this._cells.length]=w$_;var w$o=w$e+w$$}else w$_=this._cells.pop(),this._cells.unshift(w$_),w$o=w$e-w$$;var w$K=Math.floor(w$o/w$L)*this._cellSize;this._isVertical?w$_.y=w$K:w$_.x=w$K,this.renderItem(w$_,w$o)}this._startIndex=w$m,this.changeSelectStatus()}var w$r=this._content.scrollRect;this._isVertical?(w$r.y=w$l-this._offset.y,w$r.x=-this._offset.x):(w$r.y=-this._offset.y,w$r.x=w$l-this._offset.x),this._content.scrollRect=w$r},w$L.posCell=function(w$v,w$l){if(this._scrollBar){var w$L=this._isVertical?this.repeatX:this.repeatY,w$A=(this._isVertical?this.repeatY:this.repeatX,Math.floor(w$l/w$L)*this._cellSize);this._isVertical?w$v.y=w$A:w$v.x=w$A}},w$L.changeSelectStatus=function(){for(var w$v=0,w$l=this._cells.length;w$v<w$l;w$v++)this.changeCellState(this._cells[w$v],this._selectedIndex===this._startIndex+w$v,1)},w$L.renderItems=function(w$v,w$l){void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=0);for(var w$L=w$v,w$A=w$l||this._cells.length;w$L<w$A;w$L++)this.renderItem(this._cells[w$L],this._startIndex+w$L);this.changeSelectStatus()},w$L.renderItem=function(w$v,w$l){this._array&&0<=w$l&&w$l<this._array.length?(w$v.visible=!0,w$v._$bindData?(w$v._dataSource=this._array[w$l],this._bindData(w$v,this._array[w$l])):w$v.dataSource=this._array[w$l],this.cacheContent||this.posCell(w$v,w$l),this.hasListener("render")&&this.event("render",[w$v,w$l]),this.renderHandler&&this.renderHandler.runWith([w$v,w$l])):(w$v.visible=!1,w$v.dataSource=null)},w$L._bindData=function(w$v,w$l){for(var w$L=w$v._$bindData,w$A=0,w$x=w$L.length;w$A<w$x;w$A++){var w$m=w$L[w$A++],w$Z=w$L[w$A++],w$O=w$L[w$A],w$e=w$k.getBindFun(w$O);w$m[w$Z]=w$e.call(this,w$l)}},w$L.refresh=function(){this.array=this._array},w$L.getItem=function(w$v){return-1<w$v&&w$v<this._array.length?this._array[w$v]:null},w$L.changeItem=function(w$v,w$l){-1<w$v&&w$v<this._array.length&&(this._array[w$v]=w$l,w$v>=this._startIndex&&w$v<this._startIndex+this._cells.length&&this.renderItem(this.getCell(w$v),w$v))},w$L.setItem=function(w$v,w$l){this.changeItem(w$v,w$l)},w$L.addItem=function(w$v){this._array.push(w$v),this.array=this._array},w$L.addItemAt=function(w$v,w$l){this._array.splice(w$l,0,w$v),this.array=this._array},w$L.deleteItem=function(w$v){this._array.splice(w$v,1),this.array=this._array},w$L.getCell=function(w$v){return this.runCallLater(this.changeCells),-1<w$v&&this._cells?this._cells[(w$v-this._startIndex)%this._cells.length]:null},w$L.scrollTo=function(w$v){if(this._scrollBar){var w$l=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(w$v/w$l)*this._cellSize}else this.startIndex=w$v},w$L.tweenTo=function(w$v,w$l,w$L){if(void 0===w$l&&(w$l=200),this._scrollBar){var w$A=this._isVertical?this.repeatX:this.repeatY;w$H.to(this._scrollBar,{value:Math.floor(w$v/w$A)*this._cellSize},w$l,null,w$L,0,!0)}else this.startIndex=w$v,w$L&&w$L.run()},w$L._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},w$L.commitMeasure=function(){this.runCallLater(this.changeCells)},w$x(0,w$L,"cacheAs",w$v.prototype._$get_cacheAs,function(w$v){w$c.superSet(w$t,this,"cacheAs",w$v),this._scrollBar&&(this._$P.cacheAs=null,"none"!==w$v?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),w$x(0,w$L,"content",function(){return this._content}),w$x(0,w$L,"height",w$v.prototype._$get_height,function(w$v){w$v!=this._height&&(w$c.superSet(w$t,this,"height",w$v),this._setCellChanged())}),w$x(0,w$L,"itemRender",function(){return this._itemRender},function(w$v){if(this._itemRender!=w$v){this._itemRender=w$v;for(var w$l=this._cells.length-1;-1<w$l;w$l--)this._cells[w$l].destroy();this._cells.length=0,this._setCellChanged()}}),w$x(0,w$L,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(w$v){this._removePreScrollBar();var w$l=new w$lv;w$l.name="scrollBar",w$l.right=0,w$v&&" "!=w$v&&(w$l.skin=w$v),this.scrollBar=w$l,this.addChild(w$l),this._setCellChanged()}),w$x(0,w$L,"page",function(){return this._page},function(w$v){this._page=w$v,this._array&&(this._page=0<w$v?w$v:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),w$x(0,w$L,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(w$v){this._removePreScrollBar();var w$l=new w$E;w$l.name="scrollBar",w$l.bottom=0,w$v&&" "!=w$v&&(w$l.skin=w$v),this.scrollBar=w$l,this.addChild(w$l),this._setCellChanged()}),w$x(0,w$L,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(w$v){this._repeatX=w$v,this._setCellChanged()}),w$x(0,w$L,"scrollBar",function(){return this._scrollBar},function(w$v){this._scrollBar!=w$v&&(this._scrollBar=w$v)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),w$x(0,w$L,"width",w$v.prototype._$get_width,function(w$v){w$v!=this._width&&(w$c.superSet(w$t,this,"width",w$v),this._setCellChanged())}),w$x(0,w$L,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(w$v){this._repeatY=w$v,this._setCellChanged()}),w$x(0,w$L,"spaceX",function(){return this._spaceX},function(w$v){this._spaceX=w$v,this._setCellChanged()}),w$x(0,w$L,"spaceY",function(){return this._spaceY},function(w$v){this._spaceY=w$v,this._setCellChanged()}),w$x(0,w$L,"selectedIndex",function(){return this._selectedIndex},function(w$v){this._selectedIndex!=w$v&&(this._selectedIndex=w$v,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(w$v),this.startIndex=this._startIndex)}),w$x(0,w$L,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(w$v){this.selectedIndex=this._array.indexOf(w$v)}),w$x(0,w$L,"length",function(){return this._array?this._array.length:0}),w$x(0,w$L,"selection",function(){return this.getCell(this._selectedIndex)},function(w$v){this.selectedIndex=this._startIndex+this._cells.indexOf(w$v)}),w$x(0,w$L,"startIndex",function(){return this._startIndex},function(w$v){this._startIndex=0<w$v?w$v:0,this.callLater(this.renderItems)}),w$x(0,w$L,"array",function(){return this._array},function(w$v){this.runCallLater(this.changeCells),this._array=w$v||[];var w$l=this._array.length;if(this.totalPage=Math.ceil(w$l/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<w$l?this._selectedIndex:w$l-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var w$L=this._isVertical?this.repeatX:this.repeatY,w$A=this._isVertical?this.repeatY:this.repeatX,w$x=Math.ceil(w$l/w$L);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=w$A/w$x,this._scrollBar.setScroll(0,(w$x-w$A)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),w$x(0,w$L,"dataSource",w$v.prototype._$get_dataSource,function(w$v){"number"==typeof(this._dataSource=w$v)&&Math.floor(w$v)==w$v||"string"==typeof w$v?this.selectedIndex=parseInt(w$v):w$v instanceof Array?this.array=w$v:w$c.superSet(w$t,this,"dataSource",w$v)}),w$x(0,w$L,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),w$l}(w$t),w$E=function(w$v){function w$l(){w$l.__super.call(this)}return w$m(w$l,"laya.ui.HScrollBar",w$v),w$l.prototype.initialize=function(){w$v.prototype.initialize.call(this),this.slider.isVertical=!1},w$l}(w$N),w$s=function(w$v){function w$l(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,w$l.__super.call(this),this.width=this.height=100}w$m(w$l,"laya.ui.Panel",w$v);var w$L=w$l.prototype;return w$L.destroy=function(w$v){void 0===w$v&&(w$v=!0),laya.ui.Component.prototype.destroy.call(this,w$v),this._content&&this._content.destroy(w$v),this._vScrollBar&&this._vScrollBar.destroy(w$v),this._hScrollBar&&this._hScrollBar.destroy(w$v),this._vScrollBar=null,this._hScrollBar=null,this._content=null},w$L.destroyChildren=function(){this._content.destroyChildren()},w$L.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new w$t)},w$L.addChild=function(w$v){return w$v.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(w$v)},w$L.onResize=function(){this._setScrollChanged()},w$L.addChildAt=function(w$v,w$l){return w$v.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(w$v,w$l)},w$L.removeChild=function(w$v){return w$v.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(w$v)},w$L.removeChildAt=function(w$v){return this.getChildAt(w$v).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(w$v)},w$L.removeChildren=function(w$v,w$l){return void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=2147483647),this._content.removeChildren(w$v,w$l),this._setScrollChanged(),this},w$L.getChildAt=function(w$v){return this._content.getChildAt(w$v)},w$L.getChildByName=function(w$v){return this._content.getChildByName(w$v)},w$L.getChildIndex=function(w$v){return this._content.getChildIndex(w$v)},w$L.changeScroll=function(){this._scrollChanged=!1;var w$v=this.contentWidth||1,w$l=this.contentHeight||1,w$L=this._vScrollBar,w$A=this._hScrollBar,w$x=w$L&&w$l>this._height,w$m=w$A&&w$v>this._width,w$Z=w$x?this._width-w$L.width:this._width,w$O=w$m?this._height-w$A.height:this._height;w$L&&(w$L.x=this._width-w$L.width,w$L.y=0,w$L.height=this._height-(w$m?w$A.height:0),w$L.scrollSize=Math.max(.033*this._height,1),w$L.thumbPercent=w$O/w$l,w$L.setScroll(0,w$l-w$O,w$L.value)),w$A&&(w$A.x=0,w$A.y=this._height-w$A.height,w$A.width=this._width-(w$x?w$L.width:0),w$A.scrollSize=Math.max(.033*this._width,1),w$A.thumbPercent=w$Z/w$v,w$A.setScroll(0,w$v-w$Z,w$A.value))},w$L.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},w$L.setContentSize=function(w$v,w$l){var w$L=this._content;w$L.width=w$v,w$L.height=w$l,w$L.scrollRect||(w$L.scrollRect=new w$C),w$L.scrollRect.setTo(0,0,w$v,w$l),w$L.scrollRect=w$L.scrollRect},w$L.onScrollBarChange=function(w$v){var w$l=this._content.scrollRect;if(w$l){var w$L=Math.round(w$v.value);w$v.isVertical?w$l.y=w$L:w$l.x=w$L,this._content.scrollRect=w$l}},w$L.scrollTo=function(w$v,w$l){void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=0),this.vScrollBar&&(this.vScrollBar.value=w$l),this.hScrollBar&&(this.hScrollBar.value=w$v)},w$L.refresh=function(){this.changeScroll()},w$L.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=w$c.superGet(w$t,this,"cacheAs")),w$c.superSet(w$t,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},w$L.onScrollEnd=function(){w$c.superSet(w$t,this,"cacheAs",this._$P.cacheAs)},w$L._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},w$x(0,w$L,"numChildren",function(){return this._content.numChildren}),w$x(0,w$L,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(w$v){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new w$E),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=w$v}),w$x(0,w$L,"contentWidth",function(){for(var w$v=0,w$l=this._content.numChildren-1;-1<w$l;w$l--){var w$L=this._content.getChildAt(w$l);w$v=Math.max(w$L.x+w$L.width*w$L.scaleX,w$v)}return w$v}),w$x(0,w$L,"contentHeight",function(){for(var w$v=0,w$l=this._content.numChildren-1;-1<w$l;w$l--){var w$L=this._content.getChildAt(w$l);w$v=Math.max(w$L.y+w$L.height*w$L.scaleY,w$v)}return w$v}),w$x(0,w$L,"width",w$v.prototype._$get_width,function(w$v){w$c.superSet(w$t,this,"width",w$v),this._setScrollChanged()}),w$x(0,w$L,"hScrollBar",function(){return this._hScrollBar}),w$x(0,w$L,"content",function(){return this._content}),w$x(0,w$L,"height",w$v.prototype._$get_height,function(w$v){w$c.superSet(w$t,this,"height",w$v),this._setScrollChanged()}),w$x(0,w$L,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(w$v){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new w$lv),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=w$v}),w$x(0,w$L,"vScrollBar",function(){return this._vScrollBar}),w$x(0,w$L,"cacheAs",w$v.prototype._$get_cacheAs,function(w$v){w$c.superSet(w$t,this,"cacheAs",w$v),this._$P.cacheAs=null,"none"!==w$v?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),w$l}(w$t),w$i=function(w$v){function w$l(w$v){w$l.__super.call(this,w$v),this.isVertical=!1}return w$m(w$l,"laya.ui.HSlider",w$b),w$l}(),w$n=function(w$v){function w$L(w$v,w$l){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,w$L.__super.call(this),this.skin=w$l,this.labels=w$v}w$m(w$L,"laya.ui.UIGroup",w$v);var w$l=w$L.prototype;return w$c.imps(w$l,{"laya.ui.IItem":!0}),w$l.preinitialize=function(){this.mouseEnabled=!0},w$l.destroy=function(w$v){void 0===w$v&&(w$v=!0),laya.ui.Component.prototype.destroy.call(this,w$v),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},w$l.addItem=function(w$v,w$l){void 0===w$l&&(w$l=!0);var w$L=w$v,w$A=this._items.length;if(w$L.name="item"+w$A,this.addChild(w$L),this.initItems(),w$l&&0<w$A){var w$x=this._items[w$A-1];"horizontal"==this._direction?w$L.x=w$x.x+w$x.width+this._space:w$L.y=w$x.y+w$x.height+this._space}else w$l&&(w$L.x=0,w$L.y=0);return w$A},w$l.delItem=function(w$v,w$l){void 0===w$l&&(w$l=!0);var w$L=this._items.indexOf(w$v);if(-1!=w$L){var w$A=w$v;this.removeChild(w$A);for(var w$x=w$L+1,w$m=this._items.length;w$x<w$m;w$x++){var w$Z=this._items[w$x];w$Z.name="item"+(w$x-1),w$l&&("horizontal"==this._direction?w$Z.x-=w$A.width+this._space:w$Z.y-=w$A.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var w$O;w$O=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=w$O}}},w$l.initItems=function(){this._items||(this._items=[]);for(var w$v=this._items.length=0;w$v<1e4;w$v++){var w$l=this.getChildByName("item"+w$v);if(null==w$l)break;this._items.push(w$l),w$l.selected=w$v===this._selectedIndex,w$l.clickHandler=w$K.create(this,this.itemClick,[w$v],!1)}},w$l.itemClick=function(w$v){this.selectedIndex=w$v},w$l.setSelect=function(w$v,w$l){this._items&&-1<w$v&&w$v<this._items.length&&(this._items[w$v].selected=w$l)},w$l.createItem=function(w$v,w$l){return null},w$l.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var w$v=0,w$l=0,w$L=this._items.length;w$l<w$L;w$l++){var w$A=this._items[w$l];this._skin&&(w$A.skin=this._skin),this._labelColors&&(w$A.labelColors=this._labelColors),this._labelSize&&(w$A.labelSize=this._labelSize),this._labelStroke&&(w$A.labelStroke=this._labelStroke),this._labelStrokeColor&&(w$A.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(w$A.strokeColors=this._strokeColors),this._labelBold&&(w$A.labelBold=this._labelBold),this._labelPadding&&(w$A.labelPadding=this._labelPadding),this._labelAlign&&(w$A.labelAlign=this._labelAlign),this._stateNum&&(w$A.stateNum=this._stateNum),this._labelFont&&(w$A.labelFont=this._labelFont),"horizontal"===this._direction?(w$A.y=0,w$A.x=w$v,w$v+=w$A.width+this._space):(w$A.x=0,w$A.y=w$v,w$v+=w$A.height+this._space)}this.changeSize()},w$l.commitMeasure=function(){this.runCallLater(this.changeLabels)},w$l._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},w$x(0,w$l,"labelStrokeColor",function(){return this._labelStrokeColor},function(w$v){this._labelStrokeColor!=w$v&&(this._labelStrokeColor=w$v,this._setLabelChanged())}),w$x(0,w$l,"skin",function(){return this._skin},function(w$v){this._skin!=w$v&&(this._skin=w$v,this._setLabelChanged())}),w$x(0,w$l,"selectedIndex",function(){return this._selectedIndex},function(w$v){this._selectedIndex!=w$v&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=w$v,this.setSelect(w$v,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),w$x(0,w$l,"labels",function(){return this._labels},function(w$v){if(this._labels!=w$v){if(this._labels=w$v,this.removeChildren(),this._setLabelChanged(),this._labels)for(var w$l=this._labels.split(","),w$L=0,w$A=w$l.length;w$L<w$A;w$L++){var w$x=this.createItem(this._skin,w$l[w$L]);w$x.name="item"+w$L,this.addChild(w$x)}this.initItems()}}),w$x(0,w$l,"strokeColors",function(){return this._strokeColors},function(w$v){this._strokeColors!=w$v&&(this._strokeColors=w$v,this._setLabelChanged())}),w$x(0,w$l,"labelColors",function(){return this._labelColors},function(w$v){this._labelColors!=w$v&&(this._labelColors=w$v,this._setLabelChanged())}),w$x(0,w$l,"labelStroke",function(){return this._labelStroke},function(w$v){this._labelStroke!=w$v&&(this._labelStroke=w$v,this._setLabelChanged())}),w$x(0,w$l,"labelSize",function(){return this._labelSize},function(w$v){this._labelSize!=w$v&&(this._labelSize=w$v,this._setLabelChanged())}),w$x(0,w$l,"stateNum",function(){return this._stateNum},function(w$v){this._stateNum!=w$v&&(this._stateNum=w$v,this._setLabelChanged())}),w$x(0,w$l,"labelBold",function(){return this._labelBold},function(w$v){this._labelBold!=w$v&&(this._labelBold=w$v,this._setLabelChanged())}),w$x(0,w$l,"labelFont",function(){return this._labelFont},function(w$v){this._labelFont!=w$v&&(this._labelFont=w$v,this._setLabelChanged())}),w$x(0,w$l,"labelPadding",function(){return this._labelPadding},function(w$v){this._labelPadding!=w$v&&(this._labelPadding=w$v,this._setLabelChanged())}),w$x(0,w$l,"direction",function(){return this._direction},function(w$v){this._direction=w$v,this._setLabelChanged()}),w$x(0,w$l,"space",function(){return this._space},function(w$v){this._space=w$v,this._setLabelChanged()}),w$x(0,w$l,"items",function(){return this._items}),w$x(0,w$l,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(w$v){this.selectedIndex=this._items.indexOf(w$v)}),w$x(0,w$l,"dataSource",w$v.prototype._$get_dataSource,function(w$v){"number"==typeof(this._dataSource=w$v)&&Math.floor(w$v)==w$v||"string"==typeof w$v?this.selectedIndex=parseInt(w$v):w$v instanceof Array?this.labels=w$v.join(","):w$c.superSet(w$t,this,"dataSource",w$v)}),w$L}(w$t),w$U=function(w$l){function w$L(w$v,w$l){this._value=null,void 0===w$l&&(w$l=""),w$L.__super.call(this,w$v,w$l)}w$m(w$L,"laya.ui.Radio",w$l);var w$v=w$L.prototype;return w$v.destroy=function(w$v){void 0===w$v&&(w$v=!0),w$l.prototype.destroy.call(this,w$v),this._value=null},w$v.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},w$v.initialize=function(){w$l.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},w$v.onClick=function(w$v){this.selected=!0},w$x(0,w$v,"value",function(){return null!=this._value?this._value:this.label},function(w$v){this._value=w$v}),w$L}(w$a),w$z=function(w$v){function w$l(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,w$l.__super.call(this),this.width=this.height=200}w$m(w$l,"laya.ui.Tree",w$v);var w$L=w$l.prototype;return w$c.imps(w$L,{"laya.ui.IRender":!0}),w$L.destroy=function(w$v){void 0===w$v&&(w$v=!0),laya.ui.Component.prototype.destroy.call(this,w$v),this._list&&this._list.destroy(w$v),this._list=null,this._source=null,this._renderHandler=null},w$L.createChildren=function(){this.addChild(this._list=new w$W),this._list.renderHandler=w$K.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},w$L.onListChange=function(w$v){this.event("change")},w$L.getArray=function(){var w$v,w$l=[];for(var w$L in this._source)w$v=this._source[w$L],this.getParentOpenStatus(w$v)&&(w$v.x=this._spaceLeft*this.getDepth(w$v),w$l.push(w$v));return w$l},w$L.getDepth=function(w$v,w$l){return void 0===w$l&&(w$l=0),null==w$v.nodeParent?w$l:this.getDepth(w$v.nodeParent,w$l+1)},w$L.getParentOpenStatus=function(w$v){var w$l=w$v.nodeParent;return null==w$l||!!w$l.isOpen&&(null==w$l.nodeParent||this.getParentOpenStatus(w$l))},w$L.renderItem=function(w$v,w$l){var w$L=w$v.dataSource;if(w$L){w$v.left=w$L.x;var w$A=w$v.getChildByName("arrow");w$A&&(w$L.hasChild?(w$A.visible=!0,w$A.index=w$L.isOpen?1:0,w$A.tag=w$l,w$A.off("click",this,this.onArrowClick),w$A.on("click",this,this.onArrowClick)):w$A.visible=!1);var w$x=w$v.getChildByName("folder");w$x&&(2==w$x.clipY?w$x.index=w$L.isDirectory?0:1:w$x.index=w$L.isDirectory?w$L.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([w$v,w$l])}},w$L.onArrowClick=function(w$v){var w$l=w$v.currentTarget.tag;this._list.array[w$l].isOpen=!this._list.array[w$l].isOpen,this.event("open"),this._list.array=this.getArray()},w$L.setItemState=function(w$v,w$l){this._list.array[w$v]&&(this._list.array[w$v].isOpen=w$l,this._list.array=this.getArray())},w$L.fresh=function(){this._list.array=this.getArray(),this.repaint()},w$L.parseXml=function(w$v,w$l,w$L,w$A){var w$x,w$m=w$v.childNodes,w$Z=w$m.length;if(!w$A){w$x={};var w$O,w$e=w$v.attributes;for(var w$$ in w$e){var w$_=(w$O=w$e[w$$]).nodeName,w$o=w$O.nodeValue;w$x[w$_]="true"==w$o||"false"!=w$o&&w$o}w$x.nodeParent=w$L,0<w$Z&&(w$x.isDirectory=!0),w$x.hasChild=0<w$Z,w$l.push(w$x)}for(var w$K=0;w$K<w$Z;w$K++){var w$r=w$m[w$K];this.parseXml(w$r,w$l,w$x,!1)}},w$L.parseOpenStatus=function(w$v,w$l){for(var w$L=0,w$A=w$l.length;w$L<w$A;w$L++){var w$x=w$l[w$L];if(w$x.isDirectory)for(var w$m=0,w$Z=w$v.length;w$m<w$Z;w$m++){var w$O=w$v[w$m];if(w$O.isDirectory&&this.isSameParent(w$O,w$x)&&w$x.label==w$O.label){w$x.isOpen=w$O.isOpen;break}}}},w$L.isSameParent=function(w$v,w$l){return null==w$v.nodeParent&&null==w$l.nodeParent||null!=w$v.nodeParent&&null!=w$l.nodeParent&&(w$v.nodeParent.label==w$l.nodeParent.label&&this.isSameParent(w$v.nodeParent,w$l.nodeParent))},w$L.filter=function(w$v){if(Boolean(w$v)){var w$l=[];this.getFilterSource(this._source,w$l,w$v),this._list.array=w$l}else this._list.array=this.getArray()},w$L.getFilterSource=function(w$v,w$l,w$L){var w$A;for(var w$x in w$L=w$L.toLocaleLowerCase(),w$v)!(w$A=w$v[w$x]).isDirectory&&-1<String(w$A.label).toLowerCase().indexOf(w$L)&&(w$A.x=0,w$l.push(w$A)),w$A.child&&0<w$A.child.length&&this.getFilterSource(w$A.child,w$l,w$L)},w$x(0,w$L,"spaceBottom",function(){return this._list.spaceY},function(w$v){this._list.spaceY=w$v}),w$x(0,w$L,"keepStatus",function(){return this._keepStatus},function(w$v){this._keepStatus=w$v}),w$x(0,w$L,"itemRender",function(){return this._list.itemRender},function(w$v){this._list.itemRender=w$v}),w$x(0,w$L,"array",function(){return this._list.array},function(w$v){this._keepStatus&&this._list.array&&w$v&&this.parseOpenStatus(this._list.array,w$v),this._source=w$v,this._list.array=this.getArray()}),w$x(0,w$L,"mouseHandler",function(){return this._list.mouseHandler},function(w$v){this._list.mouseHandler=w$v}),w$x(0,w$L,"dataSource",w$v.prototype._$get_dataSource,function(w$v){this._dataSource=w$v,w$c.superSet(w$t,this,"dataSource",w$v)}),w$x(0,w$L,"source",function(){return this._source}),w$x(0,w$L,"scrollBar",function(){return this._list.scrollBar}),w$x(0,w$L,"list",function(){return this._list}),w$x(0,w$L,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(w$v){this._list.vScrollBarSkin=w$v}),w$x(0,w$L,"renderHandler",function(){return this._renderHandler},function(w$v){this._renderHandler=w$v}),w$x(0,w$L,"selectedIndex",function(){return this._list.selectedIndex},function(w$v){this._list.selectedIndex=w$v}),w$x(0,w$L,"spaceLeft",function(){return this._spaceLeft},function(w$v){this._spaceLeft=w$v}),w$x(0,w$L,"selectedItem",function(){return this._list.selectedItem},function(w$v){this._list.selectedItem=w$v}),w$x(0,w$L,"width",w$v.prototype._$get_width,function(w$v){w$c.superSet(w$t,this,"width",w$v),this._list.width=w$v}),w$x(0,w$L,"height",w$v.prototype._$get_height,function(w$v){w$c.superSet(w$t,this,"height",w$v),this._list.height=w$v}),w$x(0,w$L,"xml",null,function(w$v){var w$l=[];this.parseXml(w$v.childNodes[0],w$l,null,!0),this.array=w$l}),w$x(0,w$L,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),w$l}(w$t),w$vv=function(w$v){function w$l(){this._items=null,this._selectedIndex=0,w$l.__super.call(this),this._setIndexHandler=w$K.create(this,this.setIndex,null,!1)}w$m(w$l,"laya.ui.ViewStack",w$v);var w$L=w$l.prototype;return w$c.imps(w$L,{"laya.ui.IItem":!0}),w$L.setItems=function(w$v){this.removeChildren();for(var w$l=0,w$L=0,w$A=w$v.length;w$L<w$A;w$L++){var w$x=w$v[w$L];w$x&&(w$x.name="item"+w$l,this.addChild(w$x),w$l++)}this.initItems()},w$L.addItem=function(w$v){w$v.name="item"+this._items.length,this.addChild(w$v),this.initItems()},w$L.initItems=function(){this._items=[];for(var w$v=0;w$v<1e4;w$v++){var w$l=this.getChildByName("item"+w$v);if(null==w$l)break;this._items.push(w$l),w$l.visible=w$v==this._selectedIndex}},w$L.setSelect=function(w$v,w$l){this._items&&-1<w$v&&w$v<this._items.length&&(this._items[w$v].visible=w$l)},w$L.setIndex=function(w$v){this.selectedIndex=w$v},w$x(0,w$L,"dataSource",w$v.prototype._$get_dataSource,function(w$v){if("number"==typeof(this._dataSource=w$v)&&Math.floor(w$v)==w$v||"string"==typeof w$v)this.selectedIndex=parseInt(w$v);else for(var w$l in this._dataSource)this.hasOwnProperty(w$l)&&(this[w$l]=this._dataSource[w$l])}),w$x(0,w$L,"selectedIndex",function(){return this._selectedIndex},function(w$v){this._selectedIndex!=w$v&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=w$v,this.setSelect(this._selectedIndex,!0))}),w$x(0,w$L,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(w$v){this.selectedIndex=this._items.indexOf(w$v)}),w$x(0,w$L,"items",function(){return this._items}),w$x(0,w$L,"setIndexHandler",function(){return this._setIndexHandler},function(w$v){this._setIndexHandler=w$v}),w$l}(w$t),w$lv=function(w$v){function w$l(){w$l.__super.call(this)}return w$m(w$l,"laya.ui.VScrollBar",w$N),w$l}(),w$Lv=function(w$l){function w$L(w$v){this._bg=null,this._skin=null,w$L.__super.call(this),void 0===w$v&&(w$v=""),this.text=w$v,this.skin=this.skin}w$m(w$L,"laya.ui.TextInput",w$l);var w$v=w$L.prototype;return w$v.preinitialize=function(){this.mouseEnabled=!0},w$v.destroy=function(w$v){w$J.clearCache(this,this._skin),void 0===w$v&&(w$v=!0),w$l.prototype.destroy.call(this,w$v),this._bg&&this._bg.destroy(),this._bg=null},w$v.createChildren=function(){this.addChild(this._tf=new w$r),this._tf.padding=w$V.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},w$v._onFocus=function(){this.event("focus",this)},w$v._onBlur=function(){this.event("blur",this)},w$v._onInput=function(){this.event("input",this)},w$v._onEnter=function(){this.event("enter",this)},w$v.initialize=function(){this.width=128,this.height=22},w$v.select=function(){this._tf.select()},w$v.setSelection=function(w$v,w$l){this._tf.setSelection(w$v,w$l)},w$x(0,w$v,"text",w$l.prototype._$get_text,function(w$v){this._tf.text!=w$v&&(w$v+="",this._tf.text=w$v,this.event("change"))}),w$x(0,w$v,"bg",function(){return this._bg},function(w$v){this.graphics=this._bg=w$v}),w$x(0,w$v,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(w$v){this._tf.inputElementYAdjuster=w$v}),w$x(0,w$v,"multiline",function(){return this._tf.multiline},function(w$v){this._tf.multiline=w$v}),w$x(0,w$v,"skin",function(){return this._skin},function(w$v){this._skin!=w$v&&(w$J.clearCache(this,this._skin),this._skin=w$v,this._bg||(this.graphics=this._bg=new w$M),w$J.keepCache(this,this._skin),this._bg.source=w$J.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),w$x(0,w$v,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(w$v){this._bg||(this.graphics=this._bg=new w$M),this._bg.sizeGrid=w$k.fillArray(w$V.defaultSizeGrid,w$v,Number)}),w$x(0,w$v,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(w$v){this._tf.inputElementXAdjuster=w$v}),w$x(0,w$v,"width",w$l.prototype._$get_width,function(w$v){w$c.superSet(w$F,this,"width",w$v),this._bg&&(this._bg.width=w$v)}),w$x(0,w$v,"height",w$l.prototype._$get_height,function(w$v){w$c.superSet(w$F,this,"height",w$v),this._bg&&(this._bg.height=w$v)}),w$x(0,w$v,"editable",function(){return this._tf.editable},function(w$v){this._tf.editable=w$v}),w$x(0,w$v,"restrict",function(){return this._tf.restrict},function(w$v){this._tf.restrict=w$v}),w$x(0,w$v,"prompt",function(){return this._tf.prompt},function(w$v){this._tf.prompt=w$v}),w$x(0,w$v,"promptColor",function(){return this._tf.promptColor},function(w$v){this._tf.promptColor=w$v}),w$x(0,w$v,"maxChars",function(){return this._tf.maxChars},function(w$v){this._tf.maxChars=w$v}),w$x(0,w$v,"focus",function(){return this._tf.focus},function(w$v){this._tf.focus=w$v}),w$x(0,w$v,"type",function(){return this._tf.type},function(w$v){this._tf.type=w$v}),w$x(0,w$v,"asPassword",function(){return this._tf.asPassword},function(w$v){this._tf.asPassword=w$v}),w$L}(w$F),w$Av=function(w$v){function w$l(){w$l.__super.call(this)}return w$m(w$l,"laya.ui.VSlider",w$b),w$l}(),w$xv=function(w$v){function w$A(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,w$A.__super.call(this)}w$m(w$A,"laya.ui.Dialog",w$v);var w$l=w$A.prototype;return w$l.initialize=function(){this.popupEffect=w$A.manager.popupEffectHandler,this.closeEffect=w$A.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},w$l._dealDragArea=function(){var w$v=this.getChildByName("drag");w$v&&(this.dragArea=w$v.x+","+w$v.y+","+w$v.width+","+w$v.height,w$v.removeSelf())},w$l._onClick=function(w$v){var w$l=w$v.target;if(w$l)switch(w$l.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(w$l.name)}},w$l.show=function(w$v,w$l){void 0===w$v&&(w$v=!1),void 0===w$l&&(w$l=!0),this._open(!1,w$v,w$l)},w$l.popup=function(w$v,w$l){void 0===w$v&&(w$v=!1),void 0===w$l&&(w$l=!0),this._open(!0,w$v,w$l)},w$l._open=function(w$v,w$l,w$L){w$A.manager.lock(!1),this.isModal=w$v,w$A.manager.open(this,w$l,w$L)},w$l.onOpened=function(){},w$l.close=function(w$v,w$l){void 0===w$l&&(w$l=!0),w$A.manager.close(this,w$v,w$l)},w$l.onClosed=function(w$v){},w$l._onMouseDown=function(w$v){var w$l=this.getMousePoint();this._dragArea.contains(w$l.x,w$l.y)?this.startDrag():this.stopDrag()},w$x(0,w$l,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(w$v){if(w$v){var w$l=w$k.fillArray([0,0,0,0],w$v,Number);this._dragArea=new w$C(w$l[0],w$l[1],w$l[2],w$l[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),w$x(0,w$l,"isPopup",function(){return null!=this.parent}),w$x(0,w$l,"zOrder",w$v.prototype._$get_zOrder,function(w$v){w$c.superSet(w$Y,this,"zOrder",w$v),w$A.manager._checkMask()}),w$x(1,w$A,"manager",function(){return w$A._manager=w$A._manager||new w$I},function(w$v){w$A._manager=w$v}),w$A.setLockView=function(w$v){w$A.manager.setLockView(w$v)},w$A.lock=function(w$v){w$A.manager.lock(w$v)},w$A.closeAll=function(){w$A.manager.closeAll()},w$A.getDialogsByGroup=function(w$v){return w$A.manager.getDialogsByGroup(w$v)},w$A.closeByGroup=function(w$v){return w$A.manager.closeByGroup(w$v)},w$A.CLOSE="close",w$A.CANCEL="cancel",w$A.SURE="sure",w$A.NO="no",w$A.OK="ok",w$A.YES="yes",w$A._manager=null,w$A}(w$Y),w$mv=function(w$v){function w$l(){w$l.__super.call(this)}w$m(w$l,"laya.ui.HBox",w$v);var w$L=w$l.prototype;return w$L.sortItem=function(w$v){w$v&&w$v.sort(function(w$v,w$l){return w$v.x-w$l.x})},w$L.changeItems=function(){this._itemChanged=!1;for(var w$v=[],w$l=0,w$L=0,w$A=this.numChildren;w$L<w$A;w$L++){var w$x=this.getChildAt(w$L);w$x&&w$x.layoutEnabled&&(w$v.push(w$x),w$l=this._height?this._height:Math.max(w$l,w$x.height*w$x.scaleY))}this.sortItem(w$v);var w$m=0;for(w$L=0,w$A=w$v.length;w$L<w$A;w$L++)(w$x=w$v[w$L]).x=w$m,w$m+=w$x.width*w$x.scaleX+this._space,"top"==this._align?w$x.y=0:"middle"==this._align?w$x.y=.5*(w$l-w$x.height*w$x.scaleY):"bottom"==this._align&&(w$x.y=w$l-w$x.height*w$x.scaleY);this.changeSize()},w$x(0,w$L,"height",w$v.prototype._$get_height,function(w$v){this._height!=w$v&&(w$c.superSet(w$S,this,"height",w$v),this.callLater(this.changeItems))}),w$l.NONE="none",w$l.TOP="top",w$l.MIDDLE="middle",w$l.BOTTOM="bottom",w$l}(w$S),w$Zv=function(w$v){function w$l(){w$l.__super.call(this)}w$m(w$l,"laya.ui.VBox",w$v);var w$L=w$l.prototype;return w$L.changeItems=function(){this._itemChanged=!1;for(var w$v=[],w$l=0,w$L=0,w$A=this.numChildren;w$L<w$A;w$L++){var w$x=this.getChildAt(w$L);w$x&&w$x.layoutEnabled&&(w$v.push(w$x),w$l=this._width?this._width:Math.max(w$l,w$x.width*w$x.scaleX))}this.sortItem(w$v);var w$m=0;for(w$L=0,w$A=w$v.length;w$L<w$A;w$L++)(w$x=w$v[w$L]).y=w$m,w$m+=w$x.height*w$x.scaleY+this._space,"left"==this._align?w$x.x=0:"center"==this._align?w$x.x=.5*(w$l-w$x.width*w$x.scaleX):"right"==this._align&&(w$x.x=w$l-w$x.width*w$x.scaleX);this.changeSize()},w$x(0,w$L,"width",w$v.prototype._$get_width,function(w$v){this._width!=w$v&&(w$c.superSet(w$S,this,"width",w$v),this.callLater(this.changeItems))}),w$l.NONE="none",w$l.LEFT="left",w$l.CENTER="center",w$l.RIGHT="right",w$l}(w$S),w$Ov=function(w$v){function w$l(){w$l.__super.call(this)}return w$m(w$l,"laya.ui.RadioGroup",w$n),w$l.prototype.createItem=function(w$v,w$l){return new w$U(w$v,w$l)},w$l}(),w$ev=function(w$v){function w$l(){w$l.__super.call(this)}return w$m(w$l,"laya.ui.Tab",w$n),w$l.prototype.createItem=function(w$v,w$l){return new w$a(w$v,w$l)},w$l}(),w$$v=function(w$l){function w$L(w$v){this._vScrollBar=null,this._hScrollBar=null,void 0===w$v&&(w$v=""),w$L.__super.call(this,w$v)}w$m(w$L,"laya.ui.TextArea",w$l);var w$v=w$L.prototype;return w$v.destroy=function(w$v){void 0===w$v&&(w$v=!0),w$l.prototype.destroy.call(this,w$v),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},w$v.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},w$v.onVBarChanged=function(w$v){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},w$v.onHBarChanged=function(w$v){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},w$v.changeScroll=function(){var w$v=this._vScrollBar&&0<this._tf.maxScrollY,w$l=this._hScrollBar&&0<this._tf.maxScrollX,w$L=w$v?this._width-this._vScrollBar.width:this._width,w$A=w$l?this._height-this._hScrollBar.height:this._height,w$x=this._tf.padding||w$V.labelPadding;this._tf.width=w$L,this._tf.height=w$A,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-w$x[2],this._vScrollBar.y=w$x[1],this._vScrollBar.height=this._height-(w$l?this._hScrollBar.height:0)-w$x[1]-w$x[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=w$A/Math.max(this._tf.textHeight,w$A),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=w$v),this._hScrollBar&&(this._hScrollBar.x=w$x[0],this._hScrollBar.y=this._height-this._hScrollBar.height-w$x[3],this._hScrollBar.width=this._width-(w$v?this._vScrollBar.width:0)-w$x[0]-w$x[2],this._hScrollBar.scrollSize=Math.max(.033*w$L,1),this._hScrollBar.thumbPercent=w$L/Math.max(this._tf.textWidth,w$L),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=w$l)},w$v.scrollTo=function(w$v){this.commitMeasure(),this._tf.scrollY=w$v},w$x(0,w$v,"scrollY",function(){return this._tf.scrollY}),w$x(0,w$v,"width",w$l.prototype._$get_width,function(w$v){w$c.superSet(w$Lv,this,"width",w$v),this.callLater(this.changeScroll)}),w$x(0,w$v,"hScrollBar",function(){return this._hScrollBar}),w$x(0,w$v,"height",w$l.prototype._$get_height,function(w$v){w$c.superSet(w$Lv,this,"height",w$v),this.callLater(this.changeScroll)}),w$x(0,w$v,"maxScrollX",function(){return this._tf.maxScrollX}),w$x(0,w$v,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(w$v){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new w$lv),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=w$v}),w$x(0,w$v,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(w$v){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new w$E),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=w$v}),w$x(0,w$v,"vScrollBar",function(){return this._vScrollBar}),w$x(0,w$v,"maxScrollY",function(){return this._tf.maxScrollY}),w$x(0,w$v,"scrollX",function(){return this._tf.scrollX}),w$L}(w$Lv);!function(w$v){function w$l(){this._uiView=null,this.isCloseOther=!1,w$l.__super.call(this)}w$m(w$l,"laya.ui.AsynDialog",w$xv);var w$L=w$l.prototype;w$L.createView=function(w$v){this._uiView=w$v},w$L._open=function(w$v,w$l,w$L){this.isModal=w$v,this.isCloseOther=w$l,w$xv.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},w$L.onCreated=function(){this.createUI(),this.onOpen()},w$L.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},w$L.onOpen=function(){w$xv.manager.open(this,this.isCloseOther),w$xv.manager.lock(!1)},w$L.close=function(w$v,w$l){void 0===w$l&&(w$l=!0),w$xv.manager.close(this),this.onClose()},w$L.onClose=function(){},w$L.destroy=function(w$v){void 0===w$v&&(w$v=!0),laya.ui.View.prototype.destroy.call(this,w$v),this._uiView=null,this.onDestroy()},w$L.onDestroy=function(){}}();w$c.__init([w$Y])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(w$v,w$l){"use strict";for(var w$L in Object.defineProperty(w$l,"__esModule",{value:!0}),Laya){var w$A=Laya[w$L];w$A&&w$A.__isclass&&(w$l[w$L]=w$A)}}),function(w$K,w$v,w$f){w$f.un,w$f.uns;var w$o=w$f.static,w$r=w$f.class,w$G=w$f.getset,w$A=w$f.__newvec,w$X=laya.maths.Arith,w$Z=laya.webgl.atlas.AtlasResourceManager,w$L=laya.webgl.shader.BaseShader,w$P=laya.utils.Browser,w$O=laya.webgl.utils.Buffer,w$w=laya.utils.Byte,w$x=laya.utils.ClassUtils,w$e=w$f.Config,w$m=(laya.events.Event,laya.events.EventDispatcher),w$V=laya.utils.Handler,w$C=laya.net.Loader,w$l=laya.net.LoaderManager,w$$=(laya.maths.MathUtil,laya.display.Node),w$c=laya.renders.Render,w$_=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),w$d=laya.resource.Resource,w$J=laya.utils.RunDriver,w$B=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),w$H=laya.display.Sprite,w$g=laya.utils.Stat,w$T=laya.utils.StringKey,w$k=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),w$h=laya.utils.Utils,w$Q=laya.webgl.WebGL,w$M=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;w$f.interface("laya.d3.core.IClone"),w$f.interface("laya.d3.graphics.IVertex"),w$f.interface("laya.d3.core.render.IUpdate"),w$f.interface("laya.d3.core.scene.ITreeNode"),w$f.interface("laya.d3.core.render.IRenderable");(function(){function w$a(){}w$r(w$a,"laya.d3.animation.AnimationClipParser01"),w$a.READ_DATA=function(){w$a._DATA.offset=w$a._reader.getUint32(),w$a._DATA.size=w$a._reader.getUint32()},w$a.READ_BLOCK=function(){for(var w$v=w$a._BLOCK.count=w$a._reader.getUint16(),w$l=w$a._BLOCK.blockStarts=[],w$L=w$a._BLOCK.blockLengths=[],w$A=0;w$A<w$v;w$A++)w$l.push(w$a._reader.getUint32()),w$L.push(w$a._reader.getUint32())},w$a.READ_STRINGS=function(){var w$v=w$a._reader.getUint32(),w$l=w$a._reader.getUint16(),w$L=w$a._reader.pos;w$a._reader.pos=w$v+w$a._DATA.offset;for(var w$A=0;w$A<w$l;w$A++)w$a._strings[w$A]=w$a._reader.readUTFString();w$a._reader.pos=w$L},w$a.parse=function(w$v,w$l){w$a._animationClip=w$v;(w$a._reader=w$l).__getBuffer();w$a.READ_DATA(),w$a.READ_BLOCK(),w$a.READ_STRINGS();for(var w$L=0,w$A=w$a._BLOCK.count;w$L<w$A;w$L++){var w$x=w$l.getUint16(),w$m=w$a._strings[w$x],w$Z=w$a["READ_"+w$m];if(null==w$Z)throw new Error("model file err,no this function:"+w$x+" "+w$m);w$Z.call()}},w$a.READ_ANIMATIONS=function(){var w$v,w$l=0,w$L=0,w$A=w$a._reader,w$x=w$A.__getBuffer(),w$m=[],w$Z=w$A.getUint8();for(w$m.length=w$Z,w$l=0;w$l<w$Z;w$l++)w$m[w$l]=w$A.getUint16();var w$O=[],w$e=w$A.getUint16();for(w$O.length=w$e,w$l=0;w$l<w$e;w$l++)w$O[w$l]=w$A.getFloat32();var w$$=w$a._animationClip;w$$.name=w$a._strings[w$A.getUint16()];var w$_=w$$._duration=w$A.getFloat32();w$$.islooping=!!w$A.getByte(),w$$._frameRate=w$A.getInt16();var w$o=w$A.getInt16(),w$K=w$$._nodes=new Array;w$K.length=w$o,(w$$._publicClipDatas=[]).length=w$o;var w$r=w$$._nodesMap={},w$G=0,w$c=0;for(w$l=0;w$l<w$o;w$l++){w$v=w$K[w$l]=new w$p;var w$d=w$A.getUint16(),w$C=w$v.path=[];for(w$C.length=w$d,w$L=0;w$L<w$d;w$L++)w$C[w$L]=w$a._strings[w$A.getUint16()];var w$J=w$C.join("/"),w$B=w$r[w$J];w$B||(w$r[w$J]=w$B=[]),w$B.push(w$v);var w$X=w$A.getInt16();-1!==w$X&&(w$v.componentType=w$a._strings[w$X]);var w$f=w$j._propertyIndexDic[w$a._strings[w$A.getUint16()]];if(null==w$f)throw new Error("AnimationClipParser01:unknown property name.");var w$w=w$f<4,w$H=!w$w||w$w&&""===w$C[0];(w$v._cacheProperty=w$H)?w$G++:w$c++,w$v.propertyNameID=w$f;var w$g=w$m[w$A.getUint8()];w$v.keyFrameWidth=w$g/4;var w$T=w$v.keyFrames=[],w$h=w$T.length=w$A.getUint16(),w$V=null,w$k=NaN;for(w$L=0;w$L<w$h;w$L++){var w$Q=w$T[w$L]=new w$F;w$k=w$Q.startTime=w$O[w$A.getUint16()];var w$M=w$A.pos;w$Q.inTangent=new Float32Array(w$x.slice(w$M,w$M+w$g)),w$A.pos+=w$g,w$M=w$A.pos,w$Q.outTangent=new Float32Array(w$x.slice(w$M,w$M+w$g)),w$A.pos+=w$g,w$M=w$A.pos,w$Q.data=new Float32Array(w$x.slice(w$M,w$M+w$g)),w$A.pos+=w$g,w$V&&(w$V.next=w$Q,w$V.duration=w$k-w$V.startTime),w$V=w$Q}w$Q.next=null,w$Q.duration=w$_-w$k}var w$P=w$$._nodeToCachePropertyMap=new Int32Array(w$o),w$I=w$$._cachePropertyMap=new Int32Array(w$G),w$t=w$$._unCachePropertyMap=new Int32Array(w$c);for(w$G=w$c=0,w$l=0;w$l<w$o;w$l++)(w$v=w$K[w$l])._cacheProperty?(w$P[w$l]=w$G,w$I[w$G++]=w$l):w$t[w$c++]=w$l},w$a._animationClip=null,w$a._reader=null,w$a._strings=[],w$o(w$a,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function w$N(){}w$r(w$N,"laya.d3.animation.AnimationClipParser02"),w$N.READ_DATA=function(){w$N._DATA.offset=w$N._reader.getUint32(),w$N._DATA.size=w$N._reader.getUint32()},w$N.READ_BLOCK=function(){for(var w$v=w$N._BLOCK.count=w$N._reader.getUint16(),w$l=w$N._BLOCK.blockStarts=[],w$L=w$N._BLOCK.blockLengths=[],w$A=0;w$A<w$v;w$A++)w$l.push(w$N._reader.getUint32()),w$L.push(w$N._reader.getUint32())},w$N.READ_STRINGS=function(){var w$v=w$N._reader.getUint32(),w$l=w$N._reader.getUint16(),w$L=w$N._reader.pos;w$N._reader.pos=w$v+w$N._DATA.offset;for(var w$A=0;w$A<w$l;w$A++)w$N._strings[w$A]=w$N._reader.readUTFString();w$N._reader.pos=w$L},w$N.parse=function(w$v,w$l){w$N._animationClip=w$v;(w$N._reader=w$l).__getBuffer();w$N.READ_DATA(),w$N.READ_BLOCK(),w$N.READ_STRINGS();for(var w$L=0,w$A=w$N._BLOCK.count;w$L<w$A;w$L++){var w$x=w$l.getUint16(),w$m=w$N._strings[w$x],w$Z=w$N["READ_"+w$m];if(null==w$Z)throw new Error("model file err,no this function:"+w$x+" "+w$m);w$Z.call()}},w$N.READ_ANIMATIONS=function(){var w$v,w$l=0,w$L=0,w$A=w$N._reader,w$x=w$A.__getBuffer(),w$m=[],w$Z=w$A.getUint8();for(w$m.length=w$Z,w$l=0;w$l<w$Z;w$l++)w$m[w$l]=w$A.getUint16();var w$O=[],w$e=w$A.getUint16();for(w$O.length=w$e,w$l=0;w$l<w$e;w$l++)w$O[w$l]=w$A.getFloat32();var w$$=w$N._animationClip;w$$.name=w$N._strings[w$A.getUint16()];var w$_=w$$._duration=w$A.getFloat32();w$$.islooping=!!w$A.getByte(),w$$._frameRate=w$A.getInt16();var w$o=w$A.getInt16(),w$K=w$$._nodes=new Array;w$K.length=w$o,(w$$._publicClipDatas=[]).length=w$o;var w$r=w$$._nodesMap={},w$G=0,w$c=0;for(w$l=0;w$l<w$o;w$l++){w$v=w$K[w$l]=new w$p;var w$d=w$A.getUint16(),w$C=w$v.path=[];for(w$C.length=w$d,w$L=0;w$L<w$d;w$L++)w$C[w$L]=w$N._strings[w$A.getUint16()];var w$J=w$C.join("/"),w$B=w$r[w$J];w$B||(w$r[w$J]=w$B=[]),w$B.push(w$v);var w$X=w$A.getInt16();-1!==w$X&&(w$v.componentType=w$N._strings[w$X]);var w$f=w$j._propertyIndexDic[w$N._strings[w$A.getUint16()]];if(null==w$f)throw new Error("AnimationClipParser02:unknown property name.");var w$w=w$f<4,w$H=!w$w||w$w&&""===w$C[0];(w$v._cacheProperty=w$H)?w$G++:w$c++,w$v.propertyNameID=w$f;var w$g=w$m[w$A.getUint8()];w$v.keyFrameWidth=w$g/4;var w$T=w$v.keyFrames=[],w$h=w$T.length=w$A.getUint16(),w$V=null,w$k=NaN;for(w$L=0;w$L<w$h;w$L++){var w$Q=w$T[w$L]=new w$F;w$k=w$Q.startTime=w$O[w$A.getUint16()];var w$M=w$A.pos;w$Q.inTangent=new Float32Array(w$x.slice(w$M,w$M+w$g)),w$A.pos+=w$g,w$M=w$A.pos,w$Q.outTangent=new Float32Array(w$x.slice(w$M,w$M+w$g)),w$A.pos+=w$g,w$M=w$A.pos,w$Q.data=new Float32Array(w$x.slice(w$M,w$M+w$g)),w$A.pos+=w$g,w$V&&(w$V.next=w$Q,w$V.duration=w$k-w$V.startTime),w$V=w$Q}w$Q.next=null,w$Q.duration=w$_-w$k}var w$P=w$A.getUint16();for(w$l=0;w$l<w$P;w$l++){var w$I,w$t=new w$b;w$t.time=w$A.getFloat32(),w$t.eventName=w$N._strings[w$A.getUint16()];var w$a=w$A.getUint16();for(0<w$a&&(w$t.params=w$I=[]),w$L=0;w$L<w$a;w$L++){switch(w$A.getByte()){case 0:w$I.push(!!w$A.getByte());break;case 1:w$I.push(w$A.getInt32());break;case 2:w$I.push(w$A.getFloat32());break;case 3:w$I.push(w$N._strings[w$A.getUint16()]);break;default:throw new Error("unknown type.")}}w$$.addEvent(w$t)}var w$q=w$$._nodeToCachePropertyMap=new Int32Array(w$o),w$u=w$$._cachePropertyMap=new Int32Array(w$G),w$R=w$$._unCachePropertyMap=new Int32Array(w$c);for(w$G=w$c=0,w$l=0;w$l<w$o;w$l++)(w$v=w$K[w$l])._cacheProperty?(w$q[w$l]=w$G,w$u[w$G++]=w$l):w$R[w$c++]=w$l},w$N._animationClip=null,w$N._reader=null,w$N._strings=[],w$o(w$N,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var w$b=function(){function w$v(){this.time=NaN,this.eventName=null,this.params=null}return w$r(w$v,"laya.d3.animation.AnimationEvent"),w$v}(),w$j=function(){function w$A(){this._childs=[],this.transform=new w$Jl(this)}w$r(w$A,"laya.d3.animation.AnimationNode");var w$v=w$A.prototype;return w$f.imps(w$v,{"laya.d3.core.IClone":!0}),w$v.addChild=function(w$v){w$v._parent=this,w$v.transform.setParent(this.transform),this._childs.push(w$v)},w$v.removeChild=function(w$v){var w$l=this._childs.indexOf(w$v);-1!==w$l&&this._childs.splice(w$l,1)},w$v.getChildByName=function(w$v){for(var w$l=0,w$L=this._childs.length;w$l<w$L;w$l++){var w$A=this._childs[w$l];if(w$A.name===w$v)return w$A}return null},w$v.getChildByIndex=function(w$v){return this._childs[w$v]},w$v.getChildCount=function(){return this._childs.length},w$v.cloneTo=function(w$v){var w$l=w$v;w$l.name=this.name;for(var w$L=0,w$A=this._childs.length;w$L<w$A;w$L++){var w$x=this._childs[w$L],w$m=w$x.clone();w$l.addChild(w$m);var w$Z=w$x.transform,w$O=w$m.transform;w$O.setLocalPosition(w$Z.getLocalPosition()),w$O.setLocalRotation(w$Z.getLocalRotation()),w$O.setLocalScale(w$Z.getLocalScale()),w$O._localRotationEuler=w$Z._localRotationEuler,w$O._setWorldMatrixIgnoreUpdate(w$Z.getWorldMatrix())}},w$v.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$A.__init__=function(){w$A.registerAnimationNodeProperty("localPosition",w$A._getLocalPosition,w$A._setLocalPosition),w$A.registerAnimationNodeProperty("localRotation",w$A._getLocalRotation,w$A._setLocalRotation),w$A.registerAnimationNodeProperty("localScale",w$A._getLocalScale,w$A._setLocalScale),w$A.registerAnimationNodeProperty("localRotationEuler",w$A._getLocalRotationEuler,w$A._setLocalRotationEuler),w$A.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",w$A._getParticleRenderSharedMaterialTintColor,w$A._setParticleRenderSharedMaterialTintColor),w$A.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",w$A._getMeshRenderSharedMaterialTilingOffset,w$A._setMeshRenderSharedMaterialTilingOffset),w$A.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",w$A._getMeshRenderSharedMaterialAlbedo,w$A._setMeshRenderSharedMaterialAlbedo),w$A.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",w$A._getSkinnedMeshRenderSharedMaterialTilingOffset,w$A._setSkinnedMeshRenderSharedMaterialTilingOffset),w$A.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",w$A._getSkinnedMeshRenderSharedMaterialAlbedo,w$A._setSkinnedMeshRenderSharedMaterialAlbedo),w$A.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",w$A._getMeshRenderSharedMaterialAlbedo,w$A._setMeshRenderSharedMaterialAlbedo),w$A.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",w$A._getSkinnedMeshRenderSharedMaterialAlbedo,w$A._setSkinnedMeshRenderSharedMaterialAlbedo),w$A.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",w$A._getMeshRenderSharedMaterialIntensity,w$A._setMeshRenderSharedMaterialIntensity),w$A.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",w$A._getMeshRenderSharedMaterialAlpha,w$A._setMeshRenderSharedMaterialAlpha),w$A.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",w$A._getMeshRenderSharedMaterialAlphaColor,w$A._setMeshRenderSharedMaterialAlphaColor),w$A.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",w$A._getMeshRenderSharedMaterialBaseColor,w$A._setMeshRenderSharedMaterialBaseColor),w$A.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",w$A._getMeshRenderSharedMaterialDissolve,w$A._setMeshRenderSharedMaterialDissolve),w$A.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",w$A._getMeshRenderSharedMaterialDissolveSpeed,w$A._setMeshRenderSharedMaterialDissolveSpeed),w$A.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",w$A._getMeshRenderSharedMaterialMMultiplier,w$A._setMeshRenderSharedMaterialMMultiplier),w$A.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",w$A._getMeshRenderSharedMaterialBaseScrollSpeedX,w$A._setMeshRenderSharedMaterialBaseScrollSpeedX),w$A.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",w$A._getMeshRenderSharedMaterialBaseScrollSpeedY,w$A._setMeshRenderSharedMaterialBaseScrollSpeedY),w$A.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",w$A._getMeshRenderSharedMaterialSecondScrollSpeedX,w$A._setMeshRenderSharedMaterialSecondScrollSpeedX),w$A.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",w$A._getMeshRenderSharedMaterialSecondScrollSpeedY,w$A._setMeshRenderSharedMaterialSecondScrollSpeedY),w$A.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",w$A._getMeshRenderSharedMaterialDetailTilingOffset,w$A._setMeshRenderSharedMaterialDetailTilingOffset),w$A.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",w$A._getMeshRenderSharedMaterialDissolveTilingOffset,w$A._setMeshRenderSharedMaterialDissolveTilingOffset),w$A.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",w$A._getMeshRenderSharedMaterialMaskTilingOffset,w$A._setMeshRenderSharedMaterialMaskTilingOffset)},w$A.registerAnimationNodeProperty=function(w$v,w$l,w$L){if(w$A._propertyIndexDic[w$v])throw new Error("AnimationNode: this propertyName has registered.");w$A._propertyIndexDic[w$v]=w$A._propertyIDCounter,w$A._propertyGetFuncs[w$A._propertyIDCounter]=w$l,w$A._propertySetFuncs[w$A._propertyIDCounter]=w$L,w$A._propertyIDCounter++},w$A._getLocalPosition=function(w$v,w$l){return w$v?w$v.transform.getLocalPosition():w$l._transform.localPosition.elements},w$A._setLocalPosition=function(w$v,w$l,w$L){if(w$v)w$v.transform.setLocalPosition(w$L);else{var w$A=w$l._transform,w$x=w$A.localPosition;w$x.elements=w$L,w$A.localPosition=w$x}},w$A._getLocalRotation=function(w$v,w$l){return w$v?w$v.transform.getLocalRotation():w$l._transform.localRotation.elements},w$A._setLocalRotation=function(w$v,w$l,w$L){if(w$v)w$v.transform.setLocalRotation(w$L);else{var w$A=w$l._transform,w$x=w$A.localRotation;w$x.elements=w$L,w$A.localRotation=w$x}},w$A._getLocalScale=function(w$v,w$l){return w$v?w$v.transform.getLocalScale():w$l._transform.localScale.elements},w$A._setLocalScale=function(w$v,w$l,w$L){if(w$v)w$v.transform.setLocalScale(w$L);else{var w$A=w$l._transform,w$x=w$A.localScale;w$x.elements=w$L,w$A.localScale=w$x}},w$A._getLocalRotationEuler=function(w$v,w$l){return w$v?w$v.transform.getLocalRotationEuler():w$l._transform.localRotationEuler.elements},w$A._setLocalRotationEuler=function(w$v,w$l,w$L){if(w$v)w$v.transform.setLocalRotationEuler(w$L);else{var w$A=w$l._transform,w$x=w$A.localRotationEuler;w$x.elements=w$L,w$A.localRotationEuler=w$x}},w$A._getMeshRenderSharedMaterialTilingOffset=function(w$v,w$l){if(w$v){var w$L=w$v.transform._entity;return w$L?w$L.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return w$l.meshRender.sharedMaterial.tilingOffset.elements},w$A._setMeshRenderSharedMaterialTilingOffset=function(w$v,w$l,w$L){var w$A,w$x;if(w$v){var w$m=w$v.transform._entity;w$m&&((w$x=(w$A=w$m.owner.meshRender.material).tilingOffset).elements=w$L,w$A.tilingOffset=w$x)}else(w$x=(w$A=w$l.meshRender.material).tilingOffset).elements=w$L,w$A.tilingOffset=w$x},w$A._getMeshRenderSharedMaterialAlbedo=function(w$v,w$l){if(w$v){var w$L=w$v.transform._entity;return w$L?w$L.owner.meshRender.sharedMaterial.albedoColor.elements:null}return w$l.meshRender.sharedMaterial.albedoColor.elements},w$A._setMeshRenderSharedMaterialAlbedo=function(w$v,w$l,w$L){var w$A,w$x;if(w$v){var w$m=w$v.transform._entity;w$m&&((w$x=(w$A=w$m.owner.meshRender.material).albedoColor).elements=w$L,w$A.albedoColor=w$x)}else(w$x=(w$A=w$l.meshRender.material).albedoColor).elements=w$L,w$A.albedoColor=w$x},w$A._getSkinnedMeshRenderSharedMaterialTilingOffset=function(w$v,w$l){if(w$v){var w$L=w$v.transform._entity;return w$L?w$L.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return w$l.skinnedMeshRender.sharedMaterial.tilingOffset.elements},w$A._setSkinnedMeshRenderSharedMaterialTilingOffset=function(w$v,w$l,w$L){var w$A,w$x;if(w$v){var w$m=w$v.transform._entity;w$m&&((w$x=(w$A=w$m.owner.skinnedMeshRender.material).tilingOffset).elements=w$L,w$A.tilingOffset=w$x)}else(w$x=(w$A=w$l.skinnedMeshRender.material).tilingOffset).elements=w$L,w$A.tilingOffset=w$x},w$A._getSkinnedMeshRenderSharedMaterialAlbedo=function(w$v,w$l){if(w$v){var w$L=w$v.transform._entity;return w$L?w$L.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return w$l.skinnedMeshRender.sharedMaterial.albedoColor.elements},w$A._setSkinnedMeshRenderSharedMaterialAlbedo=function(w$v,w$l,w$L){var w$A,w$x;if(w$v){var w$m=w$v.transform._entity;w$m&&((w$x=(w$A=w$m.owner.skinnedMeshRender.material).albedoColor).elements=w$L,w$A.albedoColor=w$x)}else(w$x=(w$A=w$l.skinnedMeshRender.material).albedoColor).elements=w$L,w$A.albedoColor=w$x},w$A._getParticleRenderSharedMaterialTintColor=function(w$v,w$l){if(w$v){var w$L=w$v.transform._entity;return w$L?w$L.owner.particleRender.sharedMaterial.tintColor.elements:null}return w$l.particleRender.sharedMaterial.tintColor.elements},w$A._setParticleRenderSharedMaterialTintColor=function(w$v,w$l,w$L){var w$A,w$x;if(w$v){var w$m=w$v.transform._entity;w$m&&((w$x=(w$A=w$m.owner.particleRender.material).tintColor).elements=w$L,w$A.tintColor=w$x)}else(w$x=(w$A=w$l.particleRender.material).tintColor).elements=w$L,w$A.tintColor=w$x},w$A._getMeshRenderSharedMaterialAlphaColor=function(w$v,w$l){if(w$v){var w$L=w$v.transform._entity;return w$L?w$L.owner.meshRender.sharedMaterial.alphaColor.elements:null}return w$l.meshRender.sharedMaterial.alphaColor.elements},w$A._setMeshRenderSharedMaterialAlphaColor=function(w$v,w$l,w$L){var w$A,w$x;if(w$v){var w$m=w$v.transform._entity;w$m&&((w$x=(w$A=w$m.owner.meshRender.material).alphaColor).elements=w$L,w$A.alphaColor=w$x)}else(w$x=(w$A=w$l.meshRender.material).alphaColor).elements=w$L,w$A.alphaColor=w$x},w$A._getMeshRenderSharedMaterialBaseColor=function(w$v,w$l){if(w$v){var w$L=w$v.transform._entity;return w$L?w$L.owner.meshRender.sharedMaterial.baseColor.elements:null}return w$l.meshRender.sharedMaterial.baseColor.elements},w$A._setMeshRenderSharedMaterialBaseColor=function(w$v,w$l,w$L){var w$A,w$x;if(w$v){var w$m=w$v.transform._entity;w$m&&((w$x=(w$A=w$m.owner.meshRender.material).baseColor).elements=w$L,w$A.baseColor=w$x)}else(w$x=(w$A=w$l.meshRender.material).baseColor).elements=w$L,w$A.baseColor=w$x},w$A._getMeshRenderSharedMaterialDissolve=function(w$v,w$l){if(w$v){var w$L=w$v.transform._entity;return w$L?w$L.owner.meshRender.sharedMaterial.dissolve:0}return w$l.meshRender.sharedMaterial.dissolve},w$A._setMeshRenderSharedMaterialDissolve=function(w$v,w$l,w$L){if(w$v){var w$A=w$v.transform._entity;w$A&&(w$A.owner.meshRender.material.dissolve=w$L[0])}else w$l.meshRender.material.dissolve=w$L[0]},w$A._getMeshRenderSharedMaterialDissolveSpeed=function(w$v,w$l){if(w$v){var w$L=w$v.transform._entity;return w$L?w$L.owner.meshRender.sharedMaterial.dissolveSpeed:0}return w$l.meshRender.sharedMaterial.dissolveSpeed},w$A._setMeshRenderSharedMaterialDissolveSpeed=function(w$v,w$l,w$L){if(w$v){var w$A=w$v.transform._entity;w$A&&(w$A.owner.meshRender.material.dissolveSpeed=w$L[0])}else w$l.meshRender.material.dissolveSpeed=w$L[0]},w$A._getMeshRenderSharedMaterialMMultiplier=function(w$v,w$l){if(w$v){var w$L=w$v.transform._entity;return w$L?w$L.owner.meshRender.sharedMaterial.mMultiplier:0}return w$l.meshRender.sharedMaterial.mMultiplier},w$A._setMeshRenderSharedMaterialMMultiplier=function(w$v,w$l,w$L){if(w$v){var w$A=w$v.transform._entity;w$A&&(w$A.owner.meshRender.material.mMultiplier=w$L[0])}else w$l.meshRender.material.mMultiplier=w$L[0]},w$A._getMeshRenderSharedMaterialBaseScrollSpeedX=function(w$v,w$l){if(w$v){var w$L=w$v.transform._entity;return w$L?w$L.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return w$l.meshRender.sharedMaterial.baseScrollSpeedX},w$A._setMeshRenderSharedMaterialBaseScrollSpeedX=function(w$v,w$l,w$L){if(w$v){var w$A=w$v.transform._entity;w$A&&(w$A.owner.meshRender.material.baseScrollSpeedX=w$L[0])}else w$l.meshRender.material.baseScrollSpeedX=w$L[0]},w$A._getMeshRenderSharedMaterialBaseScrollSpeedY=function(w$v,w$l){if(w$v){var w$L=w$v.transform._entity;return w$L?w$L.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return w$l.meshRender.sharedMaterial.baseScrollSpeedY},w$A._setMeshRenderSharedMaterialBaseScrollSpeedY=function(w$v,w$l,w$L){if(w$v){var w$A=w$v.transform._entity;w$A&&(w$A.owner.meshRender.material.baseScrollSpeedY=w$L[0])}else w$l.meshRender.material.baseScrollSpeedY=w$L[0]},w$A._getMeshRenderSharedMaterialSecondScrollSpeedX=function(w$v,w$l){if(w$v){var w$L=w$v.transform._entity;return w$L?w$L.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return w$l.meshRender.sharedMaterial.secondScrollSpeedX},w$A._setMeshRenderSharedMaterialSecondScrollSpeedX=function(w$v,w$l,w$L){if(w$v){var w$A=w$v.transform._entity;w$A&&(w$A.owner.meshRender.material.secondScrollSpeedX=w$L[0])}else w$l.meshRender.material.secondScrollSpeedX=w$L[0]},w$A._getMeshRenderSharedMaterialSecondScrollSpeedY=function(w$v,w$l){if(w$v){var w$L=w$v.transform._entity;return w$L?w$L.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return w$l.meshRender.sharedMaterial.secondScrollSpeedY},w$A._setMeshRenderSharedMaterialSecondScrollSpeedY=function(w$v,w$l,w$L){if(w$v){var w$A=w$v.transform._entity;w$A&&(w$A.owner.meshRender.material.secondScrollSpeedY=w$L[0])}else w$l.meshRender.material.secondScrollSpeedY=w$L[0]},w$A._getMeshRenderSharedMaterialAlpha=function(w$v,w$l){if(w$v){var w$L=w$v.transform._entity;return w$L?w$L.owner.meshRender.sharedMaterial.alpha:0}return w$l.meshRender.sharedMaterial.alpha},w$A._setMeshRenderSharedMaterialAlpha=function(w$v,w$l,w$L){if(w$v){var w$A=w$v.transform._entity;w$A&&(w$A.owner.meshRender.material.alpha=w$L[0])}else w$l.meshRender.material.alpha=w$L[0]},w$A._getMeshRenderSharedMaterialIntensity=function(w$v,w$l){if(w$v){var w$L=w$v.transform._entity;return w$L?w$L.owner.meshRender.sharedMaterial.intensity:0}return w$l.meshRender.sharedMaterial.intensity},w$A._setMeshRenderSharedMaterialIntensity=function(w$v,w$l,w$L){if(w$v){var w$A=w$v.transform._entity;w$A&&(w$A.owner.meshRender.material.intensity=w$L[0])}else w$l.meshRender.material.intensity=w$L[0]},w$A._getMeshRenderSharedMaterialDetailTilingOffset=function(w$v,w$l){if(w$v){var w$L=w$v.transform._entity;return w$L?w$L.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return w$l.meshRender.sharedMaterial.detailTilingOffset.elements},w$A._setMeshRenderSharedMaterialDetailTilingOffset=function(w$v,w$l,w$L){var w$A,w$x;if(w$v){var w$m=w$v.transform._entity;w$m&&((w$x=(w$A=w$m.owner.meshRender.material).detailTilingOffset).elements=w$L,w$A.detailTilingOffset=w$x)}else(w$x=(w$A=w$l.meshRender.material).detailTilingOffset).elements=w$L,w$A.detailTilingOffset=w$x},w$A._getMeshRenderSharedMaterialDissolveTilingOffset=function(w$v,w$l){if(w$v){var w$L=w$v.transform._entity;return w$L?w$L.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return w$l.meshRender.sharedMaterial.dissolveTilingOffset.elements},w$A._setMeshRenderSharedMaterialDissolveTilingOffset=function(w$v,w$l,w$L){var w$A,w$x;if(w$v){var w$m=w$v.transform._entity;w$m&&((w$x=(w$A=w$m.owner.meshRender.material).dissolveTilingOffset).elements=w$L,w$A.dissolveTilingOffset=w$x)}else(w$x=(w$A=w$l.meshRender.material).dissolveTilingOffset).elements=w$L,w$A.dissolveTilingOffset=w$x},w$A._getMeshRenderSharedMaterialMaskTilingOffset=function(w$v,w$l){if(w$v){var w$L=w$v.transform._entity;return w$L?w$L.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return w$l.meshRender.sharedMaterial.maskTilingOffset.elements},w$A._setMeshRenderSharedMaterialMaskTilingOffset=function(w$v,w$l,w$L){var w$A,w$x;if(w$v){var w$m=w$v.transform._entity;w$m&&((w$x=(w$A=w$m.owner.meshRender.material).maskTilingOffset).elements=w$L,w$A.maskTilingOffset=w$x)}else(w$x=(w$A=w$l.meshRender.material).maskTilingOffset).elements=w$L,w$A.maskTilingOffset=w$x},w$A._propertyIDCounter=0,w$A._propertyIndexDic={},w$A._propertySetFuncs=[],w$A._propertyGetFuncs=[],w$A}(),w$F=function(){function w$v(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return w$r(w$v,"laya.d3.animation.Keyframe"),w$v}(),w$p=function(){function w$v(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return w$r(w$v,"laya.d3.animation.KeyframeNode"),w$v}(),w$I=(function(){function w$v(){this._tempVector30=new w$Zl,this._tempVector31=new w$Zl,this._tempVector32=new w$Zl,this._a=new w$Zl,this._b=new w$Zl,this._c=new w$Zl,this._d=new w$Zl}w$r(w$v,"laya.d3.core.glitter.SplineCurvePositionVelocity");var w$l=w$v.prototype;w$l.Init=function(w$v,w$l,w$L,w$A){w$v.cloneTo(this._d),w$l.cloneTo(this._c),w$Zl.scale(w$v,2,this._a),w$Zl.scale(w$L,2,this._tempVector30),w$Zl.subtract(this._a,this._tempVector30,this._a),w$Zl.add(this._a,w$l,this._a),w$Zl.add(this._a,w$A,this._a),w$Zl.scale(w$L,3,this._b),w$Zl.scale(w$v,3,this._tempVector30),w$Zl.subtract(this._b,this._tempVector30,this._b),w$Zl.subtract(this._b,w$A,this._b),w$Zl.scale(w$l,2,this._tempVector30),w$Zl.subtract(this._b,this._tempVector30,this._b)},w$l.Slerp=function(w$v,w$l){w$Zl.scale(this._a,w$v*w$v*w$v,this._tempVector30),w$Zl.scale(this._b,w$v*w$v,this._tempVector31),w$Zl.scale(this._c,w$v,this._tempVector32),w$Zl.add(this._tempVector30,this._tempVector31,w$l),w$Zl.add(w$l,this._tempVector32,w$l),w$Zl.add(w$l,this._d,w$l)}}(),function(){function w$u(w$v,w$l,w$L,w$A){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=w$v,this._h=w$l,this._minHeight=w$L,this._maxHeight=w$A}w$r(w$u,"laya.d3.core.HeightMap");var w$v=w$u.prototype;w$v._inBounds=function(w$v,w$l){return 0<=w$v&&w$v<this._h&&0<=w$l&&w$l<this._w},w$v.getHeight=function(w$v,w$l){return this._inBounds(w$v,w$l)?this._datas[w$v][w$l]:NaN},w$G(0,w$v,"width",function(){return this._w}),w$G(0,w$v,"height",function(){return this._h}),w$G(0,w$v,"maxHeight",function(){return this._maxHeight}),w$G(0,w$v,"minHeight",function(){return this._minHeight}),w$u.creatFromMesh=function(w$v,w$l,w$L,w$A){for(var w$x=[],w$m=[],w$Z=w$v.getSubMeshCount(),w$O=0;w$O<w$Z;w$O++){for(var w$e=w$v.getSubMesh(w$O),w$$=w$e._getVertexBuffer(),w$_=w$$.getData(),w$o=[],w$K=0;w$K<w$_.length;w$K+=w$$.vertexDeclaration.vertexStride/4){var w$r=new w$Zl(w$_[w$K+0],w$_[w$K+1],w$_[w$K+2]);w$o.push(w$r)}w$x.push(w$o);var w$G=w$e._getIndexBuffer();w$m.push(w$G.getData())}var w$c=w$v.boundingBox,w$d=w$c.min.x,w$C=w$c.min.z,w$J=w$c.max.x,w$B=w$c.max.z,w$X=w$c.min.y,w$f=w$c.max.y,w$w=w$J-w$d,w$H=w$B-w$C,w$g=w$A.elements[0]=w$w/(w$l-1),w$T=w$A.elements[1]=w$H/(w$L-1),w$h=new w$u(w$l,w$L,w$X,w$f),w$V=w$u._tempRay,w$k=w$V.direction.elements;w$k[0]=0,w$k[1]=-1,w$k[2]=0;var w$Q=w$f+.1;w$V.origin.elements[1]=w$Q;for(var w$M=0;w$M<w$L;w$M++){var w$P=w$C+w$M*w$T;w$h._datas[w$M]=[];for(var w$I=0;w$I<w$l;w$I++){var w$t=w$d+w$I*w$g,w$a=w$V.origin.elements;w$a[0]=w$t,w$a[2]=w$P;var w$q=w$u._getPosition(w$V,w$x,w$m);w$h._datas[w$M][w$I]=w$q===Number.MAX_VALUE?NaN:w$Q-w$q}}return w$h},w$u.createFromImage=function(w$v,w$l,w$L){for(var w$A=w$v.width,w$x=w$v.height,w$m=new w$u(w$A,w$x,w$l,w$L),w$Z=(w$L-w$l)/254,w$O=w$v.getPixels(),w$e=0,w$$=0;w$$<w$x;w$$++)for(var w$_=w$m._datas[w$$]=[],w$o=0;w$o<w$A;w$o++){var w$K=w$O[w$e++],w$r=w$O[w$e++],w$G=w$O[w$e++],w$c=w$O[w$e++];w$_[w$o]=255==w$K&&255==w$r&&255==w$G&&255==w$c?NaN:(w$K+w$r+w$G)/3*w$Z+w$l}return w$m},w$u._getPosition=function(w$v,w$l,w$L){for(var w$A=Number.MAX_VALUE,w$x=0;w$x<w$l.length;w$x++)for(var w$m=w$l[w$x],w$Z=w$L[w$x],w$O=0;w$O<w$Z.length;w$O+=3){var w$e=w$m[w$Z[w$O+0]],w$$=w$m[w$Z[w$O+1]],w$_=w$m[w$Z[w$O+2]],w$o=w$Gl.rayIntersectsTriangle(w$v,w$e,w$$,w$_);!isNaN(w$o)&&w$o<w$A&&(w$A=w$o)}return w$A},w$o(w$u,["_tempRay",function(){return this._tempRay=new w$xl(new w$Zl,new w$Zl)}])}(),function(){function w$x(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}w$r(w$x,"laya.d3.core.Layer");var w$v=w$x.prototype;return w$v._binarySearchIndex=function(){for(var w$v=0,w$l=w$x._collsionTestList.length-1,w$L=0;w$v<=w$l;){w$L=Math.floor((w$v+w$l)/2);var w$A=w$x._collsionTestList[w$L];if(w$A==this._number)return w$L;w$A>this._number?w$l=w$L-1:w$v=w$L+1}return w$v},w$v._addCollider=function(w$v){0===this._colliders.length&&w$x._collsionTestList.splice(this._binarySearchIndex(),0,this._number),w$v._isRigidbody?(this._colliders.unshift(w$v),this._nonRigidbodyOffset++):this._colliders.push(w$v)},w$v._removeCollider=function(w$v){var w$l=this._colliders.indexOf(w$v);w$l<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(w$l,1),0===this._colliders.length&&w$x._collsionTestList.splice(w$x._collsionTestList.indexOf(this._number),1)},w$G(0,w$v,"number",function(){return this._number}),w$G(0,w$v,"visible",function(){return this._visible},function(w$v){this._visible=w$v,w$x._visibleLayers=w$v?w$x._visibleLayers|this.mask:w$x._visibleLayers&~this.mask}),w$G(0,w$v,"mask",function(){return this._mask}),w$G(1,w$x,"visibleLayers",function(){return w$x._visibleLayers},function(w$v){w$x._visibleLayers=w$v;for(var w$l=0,w$L=w$x._layerList.length;w$l<w$L;w$l++){var w$A=w$x._layerList[w$l];w$A._visible=0!=(w$A._mask&w$x._visibleLayers)}}),w$x.__init__=function(){w$x._layerList.length=31;for(var w$v=0;w$v<31;w$v++){var w$l=new w$x;w$x._layerList[w$v]=w$l,0===w$v?(w$l.name="Default Layer",w$l.visible=!0):(w$l.name="Layer-"+w$v,w$l.visible=!1),w$l._number=w$v,w$l._mask=Math.pow(2,w$v)}w$x.currentCreationLayer=w$x._layerList[0]},w$x.getLayerByNumber=function(w$v){if(w$v<0||30<w$v)throw new Error("无法返回指定Layer，该number超出范围！");return w$x._layerList[w$v]},w$x.getLayerByName=function(w$v){for(var w$l=0;w$l<31;w$l++)if(w$x._layerList[w$l].name===w$v)return w$x._layerList[w$l];throw new Error("无法返回指定Layer,该name不存在")},w$x.isVisible=function(w$v){return 0!=(w$v&w$x._currentCameraCullingMask&w$x._visibleLayers)},w$x._layerList=[],w$x._visibleLayers=2147483647,w$x._collsionTestList=[],w$x._currentCameraCullingMask=2147483647,w$x.maxCount=31,w$x.currentCreationLayer=null,w$x}()),w$t=(function(){function w$v(w$v,w$l,w$L){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=w$v,this._minCount=w$l,this._maxCount=w$L}w$r(w$v,"laya.d3.core.particleShuriKen.module.Burst");var w$l=w$v.prototype;w$f.imps(w$l,{"laya.d3.core.IClone":!0}),w$l.cloneTo=function(w$v){var w$l=w$v;w$l._time=this._time,w$l._minCount=this._minCount,w$l._maxCount=this._maxCount},w$l.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$G(0,w$l,"time",function(){return this._time}),w$G(0,w$l,"minCount",function(){return this._minCount}),w$G(0,w$l,"maxCount",function(){return this._maxCount})}(),function(){function w$v(w$v){this._color=null,this.enbale=!1,this._color=w$v}w$r(w$v,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var w$l=w$v.prototype;w$l.cloneTo=function(w$v){var w$l=w$v;this._color.cloneTo(w$l._color),w$l.enbale=this.enbale},w$l.clone=function(){var w$v;switch(this._color.type){case 0:w$v=w$q.createByConstant(this._color.constant.clone());break;case 1:w$v=w$q.createByGradient(this._color.gradient.clone());break;case 2:w$v=w$q.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:w$v=w$q.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var w$l=new this.constructor(w$v);return w$l.enbale=this.enbale,w$l},w$G(0,w$l,"color",function(){return this._color})}(),function(){function w$v(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}w$r(w$v,"laya.d3.core.particleShuriKen.module.Emission");var w$l=w$v.prototype;w$f.imps(w$l,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),w$l._destroy=function(){this._bursts=null,this._destroyed=!0},w$l.getBurstsCount=function(){return this._bursts.length},w$l.getBurstByIndex=function(w$v){return this._bursts[w$v]},w$l.addBurst=function(w$v){var w$l=this._bursts.length;if(0<w$l)for(var w$L=0;w$L<w$l;w$L++)this._bursts[w$L].time>w$v.time&&this._bursts.splice(w$L,0,w$v);this._bursts.push(w$v)},w$l.removeBurst=function(w$v){var w$l=this._bursts.indexOf(w$v);-1!==w$l&&this._bursts.splice(w$l,1)},w$l.removeBurstByIndex=function(w$v){this._bursts.splice(w$v,1)},w$l.clearBurst=function(){this._bursts.length=0},w$l.cloneTo=function(w$v){var w$l=w$v,w$L=w$l._bursts;w$L.length=this._bursts.length;for(var w$A=0,w$x=this._bursts.length;w$A<w$x;w$A++){var w$m=w$L[w$A];w$m?this._bursts[w$A].cloneTo(w$m):w$L[w$A]=this._bursts[w$A].clone()}w$l._emissionRate=this._emissionRate,w$l.enbale=this.enbale},w$l.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$G(0,w$l,"destroyed",function(){return this._destroyed}),w$G(0,w$l,"emissionRate",function(){return this._emissionRate},function(w$v){if(w$v<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=w$v})}(),function(){function w$A(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}w$r(w$A,"laya.d3.core.particleShuriKen.module.FrameOverTime");var w$v=w$A.prototype;return w$f.imps(w$v,{"laya.d3.core.IClone":!0}),w$v.cloneTo=function(w$v){var w$l=w$v;w$l._type=this._type,w$l._constant=this._constant,this._overTime.cloneTo(w$l._overTime),w$l._constantMin=this._constantMin,w$l._constantMax=this._constantMax,this._overTimeMin.cloneTo(w$l._overTimeMin),this._overTimeMax.cloneTo(w$l._overTimeMax)},w$v.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$G(0,w$v,"frameOverTimeData",function(){return this._overTime}),w$G(0,w$v,"constant",function(){return this._constant}),w$G(0,w$v,"type",function(){return this._type}),w$G(0,w$v,"frameOverTimeDataMin",function(){return this._overTimeMin}),w$G(0,w$v,"constantMin",function(){return this._constantMin}),w$G(0,w$v,"frameOverTimeDataMax",function(){return this._overTimeMax}),w$G(0,w$v,"constantMax",function(){return this._constantMax}),w$A.createByConstant=function(w$v){var w$l=new w$A;return w$l._type=0,w$l._constant=w$v,w$l},w$A.createByOverTime=function(w$v){var w$l=new w$A;return w$l._type=1,w$l._overTime=w$v,w$l},w$A.createByRandomTwoConstant=function(w$v,w$l){var w$L=new w$A;return w$L._type=2,w$L._constantMin=w$v,w$L._constantMax=w$l,w$L},w$A.createByRandomTwoOverTime=function(w$v,w$l){var w$L=new w$A;return w$L._type=3,w$L._overTimeMin=w$v,w$L._overTimeMax=w$l,w$L},w$A}()),w$a=function(){function w$$(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}w$r(w$$,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var w$v=w$$.prototype;return w$f.imps(w$v,{"laya.d3.core.IClone":!0}),w$v.cloneTo=function(w$v){var w$l=w$v;w$l._type=this._type,w$l._separateAxes=this._separateAxes,w$l._constant=this._constant,this._constantSeparate.cloneTo(w$l._constantSeparate),this._gradient.cloneTo(w$l._gradient),this._gradientX.cloneTo(w$l._gradientX),this._gradientY.cloneTo(w$l._gradientY),this._gradientZ.cloneTo(w$l._gradientZ),w$l._constantMin=this._constantMin,w$l._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(w$l._constantMinSeparate),this._constantMaxSeparate.cloneTo(w$l._constantMaxSeparate),this._gradientMin.cloneTo(w$l._gradientMin),this._gradientMax.cloneTo(w$l._gradientMax),this._gradientXMin.cloneTo(w$l._gradientXMin),this._gradientXMax.cloneTo(w$l._gradientXMax),this._gradientYMin.cloneTo(w$l._gradientYMin),this._gradientYMax.cloneTo(w$l._gradientYMax),this._gradientZMin.cloneTo(w$l._gradientZMin),this._gradientZMax.cloneTo(w$l._gradientZMax)},w$v.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$G(0,w$v,"gradientZ",function(){return this._gradientZ}),w$G(0,w$v,"constant",function(){return this._constant}),w$G(0,w$v,"gradient",function(){return this._gradient}),w$G(0,w$v,"separateAxes",function(){return this._separateAxes}),w$G(0,w$v,"type",function(){return this._type}),w$G(0,w$v,"constantSeparate",function(){return this._constantSeparate}),w$G(0,w$v,"gradientX",function(){return this._gradientX}),w$G(0,w$v,"gradientY",function(){return this._gradientY}),w$G(0,w$v,"gradientW",function(){return this._gradientW}),w$G(0,w$v,"gradientMin",function(){return this._gradientMin}),w$G(0,w$v,"constantMin",function(){return this._constantMin}),w$G(0,w$v,"gradientMax",function(){return this._gradientMax}),w$G(0,w$v,"constantMax",function(){return this._constantMax}),w$G(0,w$v,"gradientWMin",function(){return this._gradientWMin}),w$G(0,w$v,"constantMinSeparate",function(){return this._constantMinSeparate}),w$G(0,w$v,"constantMaxSeparate",function(){return this._constantMaxSeparate}),w$G(0,w$v,"gradientXMin",function(){return this._gradientXMin}),w$G(0,w$v,"gradientXMax",function(){return this._gradientXMax}),w$G(0,w$v,"gradientWMax",function(){return this._gradientWMax}),w$G(0,w$v,"gradientYMin",function(){return this._gradientYMin}),w$G(0,w$v,"gradientYMax",function(){return this._gradientYMax}),w$G(0,w$v,"gradientZMin",function(){return this._gradientZMin}),w$G(0,w$v,"gradientZMax",function(){return this._gradientZMax}),w$$.createByConstant=function(w$v){var w$l=new w$$;return w$l._type=0,w$l._separateAxes=!1,w$l._constant=w$v,w$l},w$$.createByConstantSeparate=function(w$v){var w$l=new w$$;return w$l._type=0,w$l._separateAxes=!0,w$l._constantSeparate=w$v,w$l},w$$.createByGradient=function(w$v){var w$l=new w$$;return w$l._type=1,w$l._separateAxes=!1,w$l._gradient=w$v,w$l},w$$.createByGradientSeparate=function(w$v,w$l,w$L,w$A){var w$x=new w$$;return w$x._type=1,w$x._separateAxes=!0,w$x._gradientX=w$v,w$x._gradientY=w$l,w$x._gradientZ=w$L,w$x._gradientW=w$A,w$x},w$$.createByRandomTwoConstant=function(w$v,w$l){var w$L=new w$$;return w$L._type=2,w$L._separateAxes=!1,w$L._constantMin=w$v,w$L._constantMax=w$l,w$L},w$$.createByRandomTwoConstantSeparate=function(w$v,w$l){var w$L=new w$$;return w$L._type=2,w$L._separateAxes=!0,w$L._constantMinSeparate=w$v,w$L._constantMaxSeparate=w$l,w$L},w$$.createByRandomTwoGradient=function(w$v,w$l){var w$L=new w$$;return w$L._type=3,w$L._separateAxes=!1,w$L._gradientMin=w$v,w$L._gradientMax=w$l,w$L},w$$.createByRandomTwoGradientSeparate=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){var w$e=new w$$;return w$e._type=3,w$e._separateAxes=!0,w$e._gradientXMin=w$v,w$e._gradientXMax=w$l,w$e._gradientYMin=w$L,w$e._gradientYMax=w$A,w$e._gradientZMin=w$x,w$e._gradientZMax=w$m,w$e._gradientWMin=w$Z,w$e._gradientWMax=w$O,w$e},w$$}(),w$q=function(){function w$A(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}w$r(w$A,"laya.d3.core.particleShuriKen.module.GradientColor");var w$v=w$A.prototype;return w$f.imps(w$v,{"laya.d3.core.IClone":!0}),w$v.cloneTo=function(w$v){var w$l=w$v;w$l._type=this._type,this._constant.cloneTo(w$l._constant),this._constantMin.cloneTo(w$l._constantMin),this._constantMax.cloneTo(w$l._constantMax),this._gradient.cloneTo(w$l._gradient),this._gradientMin.cloneTo(w$l._gradientMin),this._gradientMax.cloneTo(w$l._gradientMax)},w$v.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$G(0,w$v,"gradient",function(){return this._gradient}),w$G(0,w$v,"constant",function(){return this._constant}),w$G(0,w$v,"type",function(){return this._type}),w$G(0,w$v,"gradientMin",function(){return this._gradientMin}),w$G(0,w$v,"constantMin",function(){return this._constantMin}),w$G(0,w$v,"gradientMax",function(){return this._gradientMax}),w$G(0,w$v,"constantMax",function(){return this._constantMax}),w$A.createByConstant=function(w$v){var w$l=new w$A;return w$l._type=0,w$l._constant=w$v,w$l},w$A.createByGradient=function(w$v){var w$l=new w$A;return w$l._type=1,w$l._gradient=w$v,w$l},w$A.createByRandomTwoConstant=function(w$v,w$l){var w$L=new w$A;return w$L._type=2,w$L._constantMin=w$v,w$L._constantMax=w$l,w$L},w$A.createByRandomTwoGradient=function(w$v,w$l){var w$L=new w$A;return w$L._type=3,w$L._gradientMin=w$v,w$L._gradientMax=w$l,w$L},w$A}(),w$u=(function(){function w$v(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}w$r(w$v,"laya.d3.core.particleShuriKen.module.GradientDataColor");var w$l=w$v.prototype;w$f.imps(w$l,{"laya.d3.core.IClone":!0}),w$l.addAlpha=function(w$v,w$l){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==w$v&&(w$v=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=w$v,this._alphaElements[this._alphaCurrentLength++]=w$l):DEBUG},w$l.addRGB=function(w$v,w$l){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==w$v&&(w$v=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=w$v,this._rgbElements[this._rgbCurrentLength++]=w$l.x,this._rgbElements[this._rgbCurrentLength++]=w$l.y,this._rgbElements[this._rgbCurrentLength++]=w$l.z):DEBUG},w$l.cloneTo=function(w$v){var w$l=w$v,w$L=0,w$A=0;w$l._alphaCurrentLength=this._alphaCurrentLength;var w$x=w$l._alphaElements;for(w$x.length=this._alphaElements.length,w$L=0,w$A=this._alphaElements.length;w$L<w$A;w$L++)w$x[w$L]=this._alphaElements[w$L];w$l._rgbCurrentLength=this._rgbCurrentLength;var w$m=w$l._rgbElements;for(w$m.length=this._rgbElements.length,w$L=0,w$A=this._rgbElements.length;w$L<w$A;w$L++)w$m[w$L]=this._rgbElements[w$L]},w$l.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$G(0,w$l,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),w$G(0,w$l,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function w$v(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}w$r(w$v,"laya.d3.core.particleShuriKen.module.GradientDataInt");var w$l=w$v.prototype;w$f.imps(w$l,{"laya.d3.core.IClone":!0}),w$l.add=function(w$v,w$l){this._currentLength<8?(6===this._currentLength&&1!==w$v&&(w$v=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=w$v,this._elements[this._currentLength++]=w$l):console.log("Warning:data count must lessEqual than 4")},w$l.cloneTo=function(w$v){var w$l=w$v;w$l._currentLength=this._currentLength;var w$L=w$l._elements;w$L.length=this._elements.length;for(var w$A=0,w$x=this._elements.length;w$A<w$x;w$A++)w$L[w$A]=this._elements[w$A]},w$l.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$G(0,w$l,"gradientCount",function(){return this._currentLength/2})}(),function(){function w$v(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}w$r(w$v,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var w$l=w$v.prototype;w$f.imps(w$l,{"laya.d3.core.IClone":!0}),w$l.add=function(w$v,w$l){this._currentLength<8?(6===this._currentLength&&1!==w$v&&(w$v=1,DEBUG),this._elements[this._currentLength++]=w$v,this._elements[this._currentLength++]=w$l):DEBUG},w$l.getKeyByIndex=function(w$v){return this._elements[2*w$v]},w$l.getValueByIndex=function(w$v){return this._elements[2*w$v+1]},w$l.getAverageValue=function(){for(var w$v=0,w$l=this._currentLength-2;w$v<w$l;w$v+=2){this._elements[w$v+1];this._elements[w$v+3],this._elements[w$v+2]-this._elements[w$v]}return 0},w$l.cloneTo=function(w$v){var w$l=w$v;w$l._currentLength=this._currentLength;var w$L=w$l._elements;w$L.length=this._elements.length;for(var w$A=0,w$x=this._elements.length;w$A<w$x;w$A++)w$L[w$A]=this._elements[w$A]},w$l.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$G(0,w$l,"gradientCount",function(){return this._currentLength/2})}(),function(){function w$v(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}w$r(w$v,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var w$l=w$v.prototype;w$f.imps(w$l,{"laya.d3.core.IClone":!0}),w$l.add=function(w$v,w$l){this._currentLength<8?(6===this._currentLength&&1!==w$v&&(w$v=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=w$v,this._elements[this._currentLength++]=w$l.x,this._elements[this._currentLength++]=w$l.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},w$l.cloneTo=function(w$v){var w$l=w$v;w$l._currentLength=this._currentLength;var w$L=w$l._elements;w$L.length=this._elements.length;for(var w$A=0,w$x=this._elements.length;w$A<w$x;w$A++)w$L[w$A]=this._elements[w$A]},w$l.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$G(0,w$l,"gradientCount",function(){return this._currentLength/3})}(),function(){function w$O(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}w$r(w$O,"laya.d3.core.particleShuriKen.module.GradientSize");var w$v=w$O.prototype;return w$f.imps(w$v,{"laya.d3.core.IClone":!0}),w$v.getMaxSizeInGradient=function(){var w$v=0,w$l=0,w$L=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(w$v=0,w$l=this._gradientX.gradientCount;w$v<w$l;w$v++)w$L=Math.max(w$L,this._gradientX.getValueByIndex(w$v));for(w$v=0,w$l=this._gradientY.gradientCount;w$v<w$l;w$v++)w$L=Math.max(w$L,this._gradientY.getValueByIndex(w$v))}else for(w$v=0,w$l=this._gradient.gradientCount;w$v<w$l;w$v++)w$L=Math.max(w$L,this._gradient.getValueByIndex(w$v));break;case 1:w$L=this._separateAxes?(w$L=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),w$L=Math.max(w$L,this._constantMinSeparate.y),Math.max(w$L,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(w$v=0,w$l=this._gradientXMin.gradientCount;w$v<w$l;w$v++)w$L=Math.max(w$L,this._gradientXMin.getValueByIndex(w$v));for(w$v=0,w$l=this._gradientXMax.gradientCount;w$v<w$l;w$v++)w$L=Math.max(w$L,this._gradientXMax.getValueByIndex(w$v));for(w$v=0,w$l=this._gradientYMin.gradientCount;w$v<w$l;w$v++)w$L=Math.max(w$L,this._gradientYMin.getValueByIndex(w$v));for(w$v=0,w$l=this._gradientZMax.gradientCount;w$v<w$l;w$v++)w$L=Math.max(w$L,this._gradientZMax.getValueByIndex(w$v))}else{for(w$v=0,w$l=this._gradientMin.gradientCount;w$v<w$l;w$v++)w$L=Math.max(w$L,this._gradientMin.getValueByIndex(w$v));for(w$v=0,w$l=this._gradientMax.gradientCount;w$v<w$l;w$v++)w$L=Math.max(w$L,this._gradientMax.getValueByIndex(w$v))}}return w$L},w$v.cloneTo=function(w$v){var w$l=w$v;w$l._type=this._type,w$l._separateAxes=this._separateAxes,this._gradient.cloneTo(w$l._gradient),this._gradientX.cloneTo(w$l._gradientX),this._gradientY.cloneTo(w$l._gradientY),this._gradientZ.cloneTo(w$l._gradientZ),w$l._constantMin=this._constantMin,w$l._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(w$l._constantMinSeparate),this._constantMaxSeparate.cloneTo(w$l._constantMaxSeparate),this._gradientMin.cloneTo(w$l._gradientMin),this._gradientMax.cloneTo(w$l._gradientMax),this._gradientXMin.cloneTo(w$l._gradientXMin),this._gradientXMax.cloneTo(w$l._gradientXMax),this._gradientYMin.cloneTo(w$l._gradientYMin),this._gradientYMax.cloneTo(w$l._gradientYMax),this._gradientZMin.cloneTo(w$l._gradientZMin),this._gradientZMax.cloneTo(w$l._gradientZMax)},w$v.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$G(0,w$v,"gradientZ",function(){return this._gradientZ}),w$G(0,w$v,"gradient",function(){return this._gradient}),w$G(0,w$v,"separateAxes",function(){return this._separateAxes}),w$G(0,w$v,"type",function(){return this._type}),w$G(0,w$v,"gradientMin",function(){return this._gradientMin}),w$G(0,w$v,"constantMin",function(){return this._constantMin}),w$G(0,w$v,"gradientX",function(){return this._gradientX}),w$G(0,w$v,"gradientY",function(){return this._gradientY}),w$G(0,w$v,"gradientMax",function(){return this._gradientMax}),w$G(0,w$v,"constantMax",function(){return this._constantMax}),w$G(0,w$v,"constantMinSeparate",function(){return this._constantMinSeparate}),w$G(0,w$v,"constantMaxSeparate",function(){return this._constantMaxSeparate}),w$G(0,w$v,"gradientXMin",function(){return this._gradientXMin}),w$G(0,w$v,"gradientXMax",function(){return this._gradientXMax}),w$G(0,w$v,"gradientYMin",function(){return this._gradientYMin}),w$G(0,w$v,"gradientYMax",function(){return this._gradientYMax}),w$G(0,w$v,"gradientZMin",function(){return this._gradientZMin}),w$G(0,w$v,"gradientZMax",function(){return this._gradientZMax}),w$O.createByGradient=function(w$v){var w$l=new w$O;return w$l._type=0,w$l._separateAxes=!1,w$l._gradient=w$v,w$l},w$O.createByGradientSeparate=function(w$v,w$l,w$L){var w$A=new w$O;return w$A._type=0,w$A._separateAxes=!0,w$A._gradientX=w$v,w$A._gradientY=w$l,w$A._gradientZ=w$L,w$A},w$O.createByRandomTwoConstant=function(w$v,w$l){var w$L=new w$O;return w$L._type=1,w$L._separateAxes=!1,w$L._constantMin=w$v,w$L._constantMax=w$l,w$L},w$O.createByRandomTwoConstantSeparate=function(w$v,w$l){var w$L=new w$O;return w$L._type=1,w$L._separateAxes=!0,w$L._constantMinSeparate=w$v,w$L._constantMaxSeparate=w$l,w$L},w$O.createByRandomTwoGradient=function(w$v,w$l){var w$L=new w$O;return w$L._type=2,w$L._separateAxes=!1,w$L._gradientMin=w$v,w$L._gradientMax=w$l,w$L},w$O.createByRandomTwoGradientSeparate=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z=new w$O;return w$Z._type=2,w$Z._separateAxes=!0,w$Z._gradientXMin=w$v,w$Z._gradientXMax=w$l,w$Z._gradientYMin=w$L,w$Z._gradientYMax=w$A,w$Z._gradientZMin=w$x,w$Z._gradientZMax=w$m,w$Z},w$O}()),w$R=function(){function w$O(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}w$r(w$O,"laya.d3.core.particleShuriKen.module.GradientVelocity");var w$v=w$O.prototype;return w$f.imps(w$v,{"laya.d3.core.IClone":!0}),w$v.cloneTo=function(w$v){var w$l=w$v;w$l._type=this._type,this._constant.cloneTo(w$l._constant),this._gradientX.cloneTo(w$l._gradientX),this._gradientY.cloneTo(w$l._gradientY),this._gradientZ.cloneTo(w$l._gradientZ),this._constantMin.cloneTo(w$l._constantMin),this._constantMax.cloneTo(w$l._constantMax),this._gradientXMin.cloneTo(w$l._gradientXMin),this._gradientXMax.cloneTo(w$l._gradientXMax),this._gradientYMin.cloneTo(w$l._gradientYMin),this._gradientYMax.cloneTo(w$l._gradientYMax),this._gradientZMin.cloneTo(w$l._gradientZMin),this._gradientZMax.cloneTo(w$l._gradientZMax)},w$v.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$G(0,w$v,"gradientZ",function(){return this._gradientZ}),w$G(0,w$v,"constant",function(){return this._constant}),w$G(0,w$v,"type",function(){return this._type}),w$G(0,w$v,"gradientXMax",function(){return this._gradientXMax}),w$G(0,w$v,"constantMin",function(){return this._constantMin}),w$G(0,w$v,"gradientX",function(){return this._gradientX}),w$G(0,w$v,"gradientY",function(){return this._gradientY}),w$G(0,w$v,"gradientXMin",function(){return this._gradientXMin}),w$G(0,w$v,"constantMax",function(){return this._constantMax}),w$G(0,w$v,"gradientYMin",function(){return this._gradientYMin}),w$G(0,w$v,"gradientYMax",function(){return this._gradientYMax}),w$G(0,w$v,"gradientZMin",function(){return this._gradientZMin}),w$G(0,w$v,"gradientZMax",function(){return this._gradientZMax}),w$O.createByConstant=function(w$v){var w$l=new w$O;return w$l._type=0,w$l._constant=w$v,w$l},w$O.createByGradient=function(w$v,w$l,w$L){var w$A=new w$O;return w$A._type=1,w$A._gradientX=w$v,w$A._gradientY=w$l,w$A._gradientZ=w$L,w$A},w$O.createByRandomTwoConstant=function(w$v,w$l){var w$L=new w$O;return w$L._type=2,w$L._constantMin=w$v,w$L._constantMax=w$l,w$L},w$O.createByRandomTwoGradient=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z=new w$O;return w$Z._type=3,w$Z._gradientXMin=w$v,w$Z._gradientXMax=w$l,w$Z._gradientYMin=w$L,w$Z._gradientYMax=w$A,w$Z._gradientZMin=w$x,w$Z._gradientZMax=w$m,w$Z},w$O}(),w$N=(function(){function w$v(w$v){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=w$v}w$r(w$v,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var w$l=w$v.prototype;w$f.imps(w$l,{"laya.d3.core.IClone":!0}),w$l.cloneTo=function(w$v){var w$l=w$v;this._angularVelocity.cloneTo(w$l._angularVelocity),w$l.enbale=this.enbale},w$l.clone=function(){var w$v;switch(this._angularVelocity.type){case 0:w$v=this._angularVelocity.separateAxes?w$a.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):w$a.createByConstant(this._angularVelocity.constant);break;case 1:w$v=this._angularVelocity.separateAxes?w$a.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):w$a.createByGradient(this._angularVelocity.gradient.clone());break;case 2:w$v=this._angularVelocity.separateAxes?w$a.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):w$a.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:w$v=this._angularVelocity.separateAxes?w$a.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):w$a.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var w$l=new this.constructor(w$v);return w$l.enbale=this.enbale,w$l},w$G(0,w$l,"angularVelocity",function(){return this._angularVelocity})}(),function(){function w$v(){this.enable=!1,this.randomDirection=!1}w$r(w$v,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.core.IClone":!0}),w$l._getShapeBoundBox=function(w$v){throw new Error("BaseShape: must override it.")},w$l._getSpeedBoundBox=function(w$v){throw new Error("BaseShape: must override it.")},w$l.generatePositionAndDirection=function(w$v,w$l,w$L,w$A){throw new Error("BaseShape: must override it.")},w$l._calculateProceduralBounds=function(w$v,w$l,w$L){this._getShapeBoundBox(w$v);var w$A=w$v.min,w$x=w$v.max;w$Zl.multiply(w$A,w$l,w$A),w$Zl.multiply(w$x,w$l,w$x);var w$m=new w$sv(new w$Zl,new w$Zl);this.randomDirection?(w$m.min=new w$Zl(-1,-1,-1),w$m.max=new w$Zl(1,1,1)):this._getSpeedBoundBox(w$m);var w$Z=new w$sv(new w$Zl,new w$Zl),w$O=w$Z.min,w$e=w$Z.max;w$Zl.scale(w$m.min,w$L.y,w$O),w$Zl.scale(w$m.max,w$L.y,w$e),w$Zl.add(w$v.min,w$O,w$O),w$Zl.add(w$v.max,w$e,w$e),w$Zl.min(w$v.min,w$O,w$v.min),w$Zl.max(w$v.max,w$O,w$v.max);var w$$=new w$sv(new w$Zl,new w$Zl),w$_=w$$.min,w$o=w$$.max;w$Zl.scale(w$m.min,w$L.x,w$_),w$Zl.scale(w$m.max,w$L.x,w$o),w$Zl.min(w$$.min,w$o,w$O),w$Zl.max(w$$.min,w$o,w$e),w$Zl.min(w$v.min,w$O,w$v.min),w$Zl.max(w$v.max,w$O,w$v.max)},w$l.cloneTo=function(w$v){w$v.enable=this.enable},w$l.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$v}()),w$Y=function(){function w$m(){}return w$r(w$m,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),w$m._randomPointUnitArcCircle=function(w$v,w$l,w$L){var w$A=w$l.elements,w$x=NaN;w$x=w$L?w$L.getFloat()*w$v:Math.random()*w$v,w$A[0]=Math.cos(w$x),w$A[1]=Math.sin(w$x)},w$m._randomPointInsideUnitArcCircle=function(w$v,w$l,w$L){var w$A=w$l.elements;w$m._randomPointUnitArcCircle(w$v,w$l,w$L);var w$x=NaN;w$x=w$L?Math.pow(w$L.getFloat(),.5):Math.pow(Math.random(),.5),w$A[0]=w$A[0]*w$x,w$A[1]=w$A[1]*w$x},w$m._randomPointUnitCircle=function(w$v,w$l){var w$L=w$v.elements,w$A=NaN;w$A=w$l?w$l.getFloat()*Math.PI*2:Math.random()*Math.PI*2,w$L[0]=Math.cos(w$A),w$L[1]=Math.sin(w$A)},w$m._randomPointInsideUnitCircle=function(w$v,w$l){var w$L=w$v.elements;w$m._randomPointUnitCircle(w$v);var w$A=NaN;w$A=w$l?Math.pow(w$l.getFloat(),.5):Math.pow(Math.random(),.5),w$L[0]=w$L[0]*w$A,w$L[1]=w$L[1]*w$A},w$m._randomPointUnitSphere=function(w$v,w$l){var w$L=w$v.elements,w$A=NaN,w$x=NaN;w$x=w$l?(w$A=w$L[2]=2*w$l.getFloat()-1,w$l.getFloat()*Math.PI*2):(w$A=w$L[2]=2*Math.random()-1,Math.random()*Math.PI*2);var w$m=Math.sqrt(1-w$A*w$A);w$L[0]=w$m*Math.cos(w$x),w$L[1]=w$m*Math.sin(w$x)},w$m._randomPointInsideUnitSphere=function(w$v,w$l){var w$L=w$v.elements;w$m._randomPointUnitSphere(w$v);var w$A=NaN;w$A=w$l?Math.pow(w$l.getFloat(),1/3):Math.pow(Math.random(),1/3),w$L[0]=w$L[0]*w$A,w$L[1]=w$L[1]*w$A,w$L[2]=w$L[2]*w$A},w$m._randomPointInsideHalfUnitBox=function(w$v,w$l){var w$L=w$v.elements;w$l?(w$L[0]=w$l.getFloat()-.5,w$L[1]=w$l.getFloat()-.5,w$L[2]=w$l.getFloat()-.5):(w$L[0]=Math.random()-.5,w$L[1]=Math.random()-.5,w$L[2]=Math.random()-.5)},w$m}(),w$D=(function(){function w$v(w$v){this._size=null,this.enbale=!1,this._size=w$v}w$r(w$v,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var w$l=w$v.prototype;w$f.imps(w$l,{"laya.d3.core.IClone":!0}),w$l.cloneTo=function(w$v){var w$l=w$v;this._size.cloneTo(w$l._size),w$l.enbale=this.enbale},w$l.clone=function(){var w$v;switch(this._size.type){case 0:w$v=this._size.separateAxes?w$u.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):w$u.createByGradient(this._size.gradient.clone());break;case 1:w$v=this._size.separateAxes?w$u.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):w$u.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:w$v=this._size.separateAxes?w$u.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):w$u.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var w$l=new this.constructor(w$v);return w$l.enbale=this.enbale,w$l},w$G(0,w$l,"size",function(){return this._size})}(),function(){function w$A(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}w$r(w$A,"laya.d3.core.particleShuriKen.module.StartFrame");var w$v=w$A.prototype;return w$f.imps(w$v,{"laya.d3.core.IClone":!0}),w$v.cloneTo=function(w$v){var w$l=w$v;w$l._type=this._type,w$l._constant=this._constant,w$l._constantMin=this._constantMin,w$l._constantMax=this._constantMax},w$v.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$G(0,w$v,"constant",function(){return this._constant}),w$G(0,w$v,"type",function(){return this._type}),w$G(0,w$v,"constantMin",function(){return this._constantMin}),w$G(0,w$v,"constantMax",function(){return this._constantMax}),w$A.createByConstant=function(w$v){var w$l=new w$A;return w$l._type=0,w$l._constant=w$v,w$l},w$A.createByRandomTwoConstant=function(w$v,w$l){var w$L=new w$A;return w$L._type=1,w$L._constantMin=w$v,w$L._constantMax=w$l,w$L},w$A}()),w$S=(function(){function w$v(w$v,w$l){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new w$ml(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=w$v,this._startFrame=w$l}w$r(w$v,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var w$l=w$v.prototype;w$f.imps(w$l,{"laya.d3.core.IClone":!0}),w$l.cloneTo=function(w$v){var w$l=w$v;this.tiles.cloneTo(w$l.tiles),w$l.type=this.type,w$l.randomRow=this.randomRow,this._frame.cloneTo(w$l._frame),this._startFrame.cloneTo(w$l._startFrame),w$l.cycles=this.cycles,w$l.enableUVChannels=this.enableUVChannels,w$l.enable=this.enable},w$l.clone=function(){var w$v,w$l;switch(this._frame.type){case 0:w$v=w$t.createByConstant(this._frame.constant);break;case 1:w$v=w$t.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:w$v=w$t.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:w$v=w$t.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:w$l=w$D.createByConstant(this._startFrame.constant);break;case 1:w$l=w$D.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var w$L=new this.constructor(w$v,w$l);return this.tiles.cloneTo(w$L.tiles),w$L.type=this.type,w$L.randomRow=this.randomRow,w$L.cycles=this.cycles,w$L.enableUVChannels=this.enableUVChannels,w$L.enable=this.enable,w$L},w$G(0,w$l,"frame",function(){return this._frame}),w$G(0,w$l,"startFrame",function(){return this._startFrame})}(),function(){function w$v(w$v){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=w$v}w$r(w$v,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var w$l=w$v.prototype;w$f.imps(w$l,{"laya.d3.core.IClone":!0}),w$l.cloneTo=function(w$v){var w$l=w$v;this._velocity.cloneTo(w$l._velocity),w$l.enbale=this.enbale,w$l.space=this.space},w$l.clone=function(){var w$v;switch(this._velocity.type){case 0:w$v=w$R.createByConstant(this._velocity.constant.clone());break;case 1:w$v=w$R.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:w$v=w$R.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:w$v=w$R.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var w$l=new this.constructor(w$v);return w$l.enbale=this.enbale,w$l.space=this.space,w$l},w$G(0,w$l,"velocity",function(){return this._velocity})}(),function(){function w$v(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new w$Kl,this._vb=w$Nl.create(w$v._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=w$Rl.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=w$ql.nameKey.getID("LINE"),this._shaderCompile=w$gl._preCompileShader[this._sharderNameID]}w$r(w$v,"laya.d3.core.PhasorSpriter3D");var w$l=w$v.prototype;return w$l.line=function(w$v,w$l,w$L,w$A){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(w$v.x,w$v.y,w$v.z,w$l.x,w$l.y,w$l.z,w$l.w),this.addVertex(w$L.x,w$L.y,w$L.z,w$A.x,w$A.y,w$A.z,w$A.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},w$l.circle=function(w$v,w$l,w$L,w$A,w$x,w$m){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*w$l,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/w$l,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*w$v,Math.cos(this._tempNumver0)*w$v,0,w$L,w$A,w$x,w$m),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},w$l.plane=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=w$A/2,this._tempNumver1=w$x/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(w$v-this._tempNumver0,w$l+this._tempNumver1,w$L,w$m,w$Z,w$O,w$e),this.addVertex(w$v+this._tempNumver0,w$l+this._tempNumver1,w$L,w$m,w$Z,w$O,w$e),this.addVertex(w$v-this._tempNumver0,w$l-this._tempNumver1,w$L,w$m,w$Z,w$O,w$e),this.addVertex(w$v+this._tempNumver0,w$l-this._tempNumver1,w$L,w$m,w$Z,w$O,w$e),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},w$l.box=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=w$A/2,this._tempNumver1=w$x/2,this._tempNumver2=w$m/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(w$v-this._tempNumver0,w$l+this._tempNumver1,w$L+this._tempNumver2,w$Z,w$O,w$e,w$$),this.addVertex(w$v+this._tempNumver0,w$l+this._tempNumver1,w$L+this._tempNumver2,w$Z,w$O,w$e,w$$),this.addVertex(w$v-this._tempNumver0,w$l-this._tempNumver1,w$L+this._tempNumver2,w$Z,w$O,w$e,w$$),this.addVertex(w$v+this._tempNumver0,w$l-this._tempNumver1,w$L+this._tempNumver2,w$Z,w$O,w$e,w$$),this.addVertex(w$v+this._tempNumver0,w$l+this._tempNumver1,w$L-this._tempNumver2,w$Z,w$O,w$e,w$$),this.addVertex(w$v-this._tempNumver0,w$l+this._tempNumver1,w$L-this._tempNumver2,w$Z,w$O,w$e,w$$),this.addVertex(w$v+this._tempNumver0,w$l-this._tempNumver1,w$L-this._tempNumver2,w$Z,w$O,w$e,w$$),this.addVertex(w$v-this._tempNumver0,w$l-this._tempNumver1,w$L-this._tempNumver2,w$Z,w$O,w$e,w$$),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},w$l.cone=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*w$L+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*w$L>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/w$L,this.addVertexIndex(0,w$l,0,w$A,w$x,w$m,w$Z,this._tempUint0),this.addVertexIndex(0,0,0,w$A,w$x,w$m,w$Z,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<w$L;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(w$v*this._tempNumver2,0,w$v*this._tempNumver3,w$A,w$x,w$m,w$Z,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==w$L-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(w$v*this._tempNumver2,0,w$v*this._tempNumver3,w$A,w$x,w$m,w$Z,this._tempUint0+(this._tempInt0+w$L)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==w$L-1?this.addIndexes(this._tempUint1+w$L+2):this.addIndexes(this._tempUint1+this._tempInt0+w$L+1),this.addIndexes(this._tempUint1+this._tempInt0+w$L),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},w$l.boundingBoxLine=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(w$v,w$x,w$m,w$Z,w$O,w$e,w$$),this.addVertex(w$A,w$x,w$m,w$Z,w$O,w$e,w$$),this.addVertex(w$v,w$l,w$m,w$Z,w$O,w$e,w$$),this.addVertex(w$A,w$l,w$m,w$Z,w$O,w$e,w$$),this.addVertex(w$A,w$x,w$L,w$Z,w$O,w$e,w$$),this.addVertex(w$v,w$x,w$L,w$Z,w$O,w$e,w$$),this.addVertex(w$A,w$l,w$L,w$Z,w$O,w$e,w$$),this.addVertex(w$v,w$l,w$L,w$Z,w$O,w$e,w$$),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},w$l.addVertex=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=w$v,this._vbData[this._posInVBData+1]=w$l,this._vbData[this._posInVBData+2]=w$L,this._vbData[this._posInVBData+3]=w$A,this._vbData[this._posInVBData+4]=w$x,this._vbData[this._posInVBData+5]=w$m,this._vbData[this._posInVBData+6]=w$Z,this._posInVBData+=this._floatSizePerVer,this},w$l.addVertexIndex=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){return this._hasBegun||this.addVertexIndexException(),this._vbData[w$O]=w$v,this._vbData[w$O+1]=w$l,this._vbData[w$O+2]=w$L,this._vbData[w$O+3]=w$A,this._vbData[w$O+4]=w$x,this._vbData[w$O+5]=w$m,this._vbData[w$O+6]=w$Z,(w$O+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=w$O),this},w$l.addIndexes=function(w$v){var w$l=arguments;this._hasBegun||this.addVertexIndexException();for(var w$L=0;w$L<w$l.length;w$L++)this._ibData[this._posInIBData]=w$l[w$L],this._posInIBData++;return this},w$l.begin=function(w$v,w$l){return this._hasBegun&&this.beginException0(),1!==w$v&&4!==w$v&&this.beginException1(),this._primitiveType=w$v,this._camera=w$l,this._hasBegun=!0,this},w$l.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},w$l.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(w$v._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),w$g.drawCall++,w$Q.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},w$l.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},w$l.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},w$l.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},w$l.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},w$l.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},w$l.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(28,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector4",1)])}]),w$v}()),w$y=function(){function w$v(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++w$v._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new w$Kl}w$r(w$v,"laya.d3.core.render.RenderElement");var w$l=w$v.prototype;return w$l.getDynamicBatchBakedVertexs=function(w$v){for(var w$l=this._renderObj._getVertexBuffer(w$v),w$L=w$l.getData().slice(),w$A=w$l.vertexDeclaration,w$x=w$A.getVertexElementByUsage(0).offset/4,w$m=w$A.getVertexElementByUsage(3).offset/4,w$Z=this._sprite3D.transform,w$O=w$Z.worldMatrix,w$e=w$Z.rotation,w$$=w$A.vertexStride/4,w$_=0,w$o=w$L.length;w$_<w$o;w$_+=w$$){var w$K=w$_+w$x,w$r=w$_+w$m;w$dl.transformVector3ArrayToVector3ArrayCoordinate(w$L,w$K,w$O,w$L,w$K),w$dl.transformVector3ArrayByQuat(w$L,w$r,w$e,w$L,w$r)}return w$L},w$l.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},w$l._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},w$G(0,w$l,"id",function(){return this._id}),w$G(0,w$l,"renderObj",function(){return this._renderObj},function(w$v){this._renderObj!==w$v&&(this._renderObj=w$v)}),w$v._uniqueIDCounter=0,w$v}(),w$W=function(){function w$l(w$v){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++w$l._uniqueIDCounter,this._needSort=!1,this._scene=w$v,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}w$r(w$l,"laya.d3.core.render.RenderQueue");var w$v=w$l.prototype;return w$v._sortOpaqueFunc=function(w$v,w$l){if(w$v._render&&w$l._render){var w$L=w$v._material.renderQueue-w$l._material.renderQueue;return 0==w$L?w$v._render._distanceForSort-w$l._render._distanceForSort:w$L}return 0},w$v._sortAlphaFunc=function(w$v,w$l){if(w$v._render&&w$l._render){var w$L=w$v._material.renderQueue-w$l._material.renderQueue;return 0==w$L?w$l._render._distanceForSort-w$v._render._distanceForSort:w$L}return 0},w$v._begainRenderElement=function(w$v,w$l,w$L){return!!w$l._beforeRender(w$v)},w$v._sortAlpha=function(w$v){w$l._cameraPosition=w$v,this._finalElements.sort(this._sortAlphaFunc)},w$v._sortOpaque=function(w$v){w$l._cameraPosition=w$v,this._finalElements.sort(this._sortOpaqueFunc)},w$v._preRender=function(w$v){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},w$v._render=function(w$v,w$l){for(var w$L,w$A,w$x,w$m,w$Z,w$O,w$e=w$g.loopCount,w$$=this._scene,w$_=w$v.camera,w$o=(w$_.id,!1),w$K=0,w$r=this._finalElements.length;w$K<w$r;w$K++){var w$G,w$c,w$d,w$C=this._finalElements[w$K];if(null!=w$C._onPreRenderFunction&&w$C._onPreRenderFunction.call(w$C._sprite3D,w$v),0===w$C._type){if(w$v.owner=w$d=w$C._sprite3D,w$v.renderElement=w$C,w$d._preRenderUpdateComponents(w$v),w$G=w$C.renderObj,w$c=w$C._material,this._begainRenderElement(w$v,w$G,w$c)){if(w$L=w$G._getVertexBuffers(),!(w$x=(w$A=w$G._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[w$A.id]){this._errorRecord[w$A.id]=1;var w$J="vertexBuffer:"+("("+w$A._destroyed+","+w$A._released+","+w$A._referenceCount+","+w$A._buffer+")")+", material:"+(w$c?w$c.__className+"("+w$c._destroyed+","+w$c._released+")":"null")+", owner:"+(w$d?w$d.__className+"("+w$d._destroyed+","+w$d._activeInHierarchy+","+w$d._displayedInStage+")":"null")+", renderObj:"+(w$G?w$G.__className+"("+w$G._destroyed+","+w$G._released+","+w$G._referenceCount+")":"")+", parent:, url:"+(w$d?w$d.url:"")+", disposeStack:"+w$A.disposeStack;w$f.recordError("报错：unknown vertexDeclaration  "+w$J)}continue}if(w$o=(w$m=w$v._shader=w$c._getShader(w$$._shaderDefineValue,w$x.shaderDefineValue,w$d._shaderDefineValue)).bind()||w$e!==w$m._uploadLoopCount,w$L){if(w$m._uploadVertexBuffer!==w$L||w$o){for(var w$B=0;w$B<w$L.length;w$B++){var w$X=w$L[w$B];w$m.uploadAttributesX(w$X.vertexDeclaration.shaderValues.data,w$X)}w$m._uploadVertexBuffer=w$L}}else(w$m._uploadVertexBuffer!==w$A||w$o)&&(w$m.uploadAttributes(w$x.shaderValues.data,null),w$m._uploadVertexBuffer=w$A);(w$m._uploadScene!==w$$||w$o)&&(w$m.uploadSceneUniforms(w$$._shaderValues.data),w$m._uploadScene=w$$),(w$_!==w$m._uploadCamera||w$m._uploadSprite3D!==w$d||w$o)&&(w$m.uploadSpriteUniforms(w$d._shaderValues.data),w$m._uploadSprite3D=w$d),(w$_!==w$m._uploadCamera||w$o)&&(w$m.uploadCameraUniforms(w$_._shaderValues.data),w$m._uploadCamera=w$_),(w$m._uploadMaterial!==w$c||w$o)&&(w$c._upload(),w$m._uploadMaterial=w$c),w$Z!==w$c?(w$c._setRenderStateBlendDepth(),w$c._setRenderStateFrontFace(w$l,w$d.transform),w$Z=w$c,w$O=w$d):w$O!==w$d&&(w$c._setRenderStateFrontFace(w$l,w$d.transform),w$O=w$d),w$G._render(w$v),w$m._uploadLoopCount=w$e}w$d._postRenderUpdateComponents(w$v)}else if(2===w$C._type){w$C.renderObj;w$v.owner=w$d=w$C._sprite3D,w$v.renderElement=w$C,w$v._batchIndexStart=w$C._tempBatchIndexStart,w$v._batchIndexEnd=w$C._tempBatchIndexEnd,w$G=w$C.renderObj,w$c=w$C._material,this._begainRenderElement(w$v,w$G,w$c)&&(w$x=(w$A=w$G._getVertexBuffer(0)).vertexDeclaration,w$o=(w$m=w$v._shader=w$c._getShader(w$$._shaderDefineValue,w$x.shaderDefineValue,w$d._shaderDefineValue)).bind()||w$e!==w$m._uploadLoopCount,(w$m._uploadVertexBuffer!==w$A||w$o)&&(w$m.uploadAttributes(w$x.shaderValues.data,null),w$m._uploadVertexBuffer=w$A),(w$m._uploadScene!==w$$||w$o)&&(w$m.uploadSceneUniforms(w$$._shaderValues.data),w$m._uploadScene=w$$),(w$_!==w$m._uploadCamera||w$m._uploadSprite3D!==w$d||w$o)&&(w$m.uploadSpriteUniforms(w$d._shaderValues.data),w$m._uploadSprite3D=w$d),(w$_!==w$m._uploadCamera||w$o)&&(w$m.uploadCameraUniforms(w$_._shaderValues.data),w$m._uploadCamera=w$_),(w$m._uploadMaterial!==w$c||w$o)&&(w$c._upload(),w$m._uploadMaterial=w$c),w$Z!==w$c?(w$c._setRenderStateBlendDepth(),w$c._setRenderStateFrontFace(w$l,w$d.transform),w$Z=w$c,w$O=w$d):w$O!==w$d&&(w$c._setRenderStateFrontFace(w$l,w$d.transform),w$O=w$d),w$G._render(w$v),w$m._uploadLoopCount=w$e)}}},w$v._renderShadow=function(w$v,w$l){for(var w$L,w$A,w$x,w$m,w$Z,w$O=w$g.loopCount,w$e=this._scene,w$$=w$v.camera,w$_=!1,w$o=0,w$K=this._finalElements.length;w$o<w$K;w$o++){var w$r,w$G,w$c,w$d=this._finalElements[w$o];0===w$d._type&&(w$v.owner=w$c=w$d._sprite3D,w$l||w$c._projectionViewWorldUpdateCamera===w$$&&w$c._projectionViewWorldUpdateLoopCount===w$g.loopCount||(w$c._render._renderUpdate(w$v._projectionViewMatrix),w$c._projectionViewWorldUpdateLoopCount=w$g.loopCount,w$c._projectionViewWorldUpdateCamera=w$$),w$v.renderElement=w$d,w$c._preRenderUpdateComponents(w$v),w$r=w$d.renderObj,w$G=w$d._material,this._begainRenderElement(w$v,w$r,null)&&(w$A=(w$L=w$r._getVertexBuffer(0)).vertexDeclaration,w$_=(w$x=w$v._shader=w$G._getShader(w$e._shaderDefineValue,w$A.shaderDefineValue,w$c._shaderDefineValue)).bind()||w$O!==w$x._uploadLoopCount,(w$x._uploadVertexBuffer!==w$L||w$_)&&(w$x.uploadAttributes(w$A.shaderValues.data,null),w$x._uploadVertexBuffer=w$L),(w$$!==w$x._uploadCamera||w$x._uploadSprite3D!==w$c||w$_)&&(w$x.uploadSpriteUniforms(w$c._shaderValues.data),w$x._uploadSprite3D=w$c),(w$$!==w$x._uploadCamera||w$_)&&(w$x.uploadCameraUniforms(w$$._shaderValues.data),w$x._uploadCamera=w$$),(w$x._uploadMaterial!==w$G||w$_)&&(w$G._upload(),w$x._uploadMaterial=w$G),w$x._uploadRenderElement,w$m!==w$G?(w$G._setRenderStateFrontFace(!1,w$c.transform),w$m=w$G,w$Z=w$c):w$Z!==w$c&&(w$G._setRenderStateFrontFace(!1,w$c.transform),w$Z=w$c),w$r._render(w$v),w$x._uploadLoopCount=w$O),w$c._postRenderUpdateComponents(w$v))}},w$v._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},w$v._addRenderElement=function(w$v){this._renderElements.push(w$v),this._needSort=!0},w$v._addDynamicBatchElement=function(w$v){this._dynamicBatchCombineRenderElements.push(w$v)},w$G(0,w$v,"id",function(){return this._id}),w$l._uniqueIDCounter=0,w$l._cameraPosition=null,w$l}(),w$E=function(){function w$v(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return w$r(w$v,"laya.d3.core.render.RenderState"),w$v.clientWidth=0,w$v.clientHeight=0,w$v}(),w$s=function(){function w$Z(w$v,w$l){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new w$nv(new w$Zl,0),this._corners=[new w$Zl,new w$Zl,new w$Zl,new w$Zl,new w$Zl,new w$Zl,new w$Zl,new w$Zl],this._boundingBoxCenter=new w$Zl,this._children=w$A(8),this._objects=[],this._tempBoundBoxCorners=[new w$Zl,new w$Zl,new w$Zl,new w$Zl,new w$Zl,new w$Zl,new w$Zl,new w$Zl],this._scene=w$v,this._currentDepth=w$l}w$r(w$Z,"laya.d3.core.scene.OctreeNode");var w$v=w$Z.prototype;return w$f.imps(w$v,{"laya.d3.core.scene.ITreeNode":!0}),w$v.init=function(w$v,w$l){var w$L=new w$Zl,w$A=new w$Zl;w$Zl.scale(w$l,-.5,w$L),w$Zl.scale(w$l,.5,w$A),w$Zl.add(w$L,w$v,w$L),w$Zl.add(w$A,w$v,w$A),this.exactBox=new w$sv(w$L,w$A),this.relaxBox=new w$sv(w$L,w$A)},w$v.addTreeNode=function(w$v){1===Collision.boxContainsBox(this._relaxBox,w$v.boundingBox)?this.addNodeDown(w$v,0):this.addObject(w$v)},w$v.addChild=function(w$v){var w$l=this._children[w$v];if(null==w$l){w$l=new w$Z(this._scene,this._currentDepth+1),(this._children[w$v]=w$l)._parent=this,w$Zl.subtract(this._exactBox.max,this._exactBox.min,w$Z.tempSize),w$Zl.multiply(w$Z.tempSize,w$Z._octreeSplit[w$v],w$Z.tempCenter),w$Zl.add(this._exactBox.min,w$Z.tempCenter,w$Z.tempCenter),w$Zl.scale(w$Z.tempSize,.25,w$Z.tempSize);var w$L=new w$Zl,w$A=new w$Zl;w$Zl.subtract(w$Z.tempCenter,w$Z.tempSize,w$L),w$Zl.add(w$Z.tempCenter,w$Z.tempSize,w$A),w$l.exactBox=new w$sv(w$L,w$A),w$Zl.scale(w$Z.tempSize,w$Z.relax,w$Z.tempSize);var w$x=new w$Zl,w$m=new w$Zl;w$Zl.subtract(w$Z.tempCenter,w$Z.tempSize,w$x),w$Zl.add(w$Z.tempCenter,w$Z.tempSize,w$m),w$l.relaxBox=new w$sv(w$x,w$m)}return w$l},w$v.addObject=function(w$v){(w$v._treeNode=this)._objects.push(w$v)},w$v.removeObject=function(w$v){if(w$v._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var w$l=this._objects.indexOf(w$v);return-1!==w$l&&(this._objects.splice(w$l,1),!0)},w$v.clearObject=function(){this._objects.length=0},w$v.addNodeUp=function(w$v,w$l){this._parent&&1!==Collision.boxContainsBox(this._exactBox,w$v.boundingBox)?this._parent.addNodeUp(w$v,w$l-1):this.addNodeDown(w$v,w$l)},w$v.addNodeDown=function(w$v,w$l){if(w$l<this._scene.treeLevel){var w$L=this.inChildIndex(w$v.boundingBoxCenter),w$A=this.addChild(w$L);1===Collision.boxContainsBox(w$A._relaxBox,w$v.boundingBox)?w$A.addNodeDown(w$v,++w$l):this.addObject(w$v)}else this.addObject(w$v)},w$v.inChildIndex=function(w$v){return 4*(w$v.z<this._boundingBoxCenter.z?0:1)+2*(w$v.y<this._boundingBoxCenter.y?0:1)+(w$v.x<this._boundingBoxCenter.x?0:1)},w$v.updateObject=function(w$v){1===Collision.boxContainsBox(this._relaxBox,w$v.boundingBox)?(this.removeObject(w$v),w$v._treeNode=null,this.addNodeDown(w$v,this._currentDepth)):this._parent&&(this.removeObject(w$v),w$v._treeNode=null,this._parent.addNodeUp(w$v,this._currentDepth-1))},w$v.cullingObjects=function(w$v,w$l,w$L,w$A,w$x){var w$m,w$Z=0,w$O=0,w$e=0,w$$=this._scene._dynamicBatchManager;for(w$Z=0,w$m=this._objects.length;w$Z<w$m;w$Z++){var w$_=this._objects[w$Z];if(w$I.isVisible(w$_._owner.layer.mask)&&w$_.enable){if(w$l&&(w$g.treeSpriteCollision+=1,0===w$v.containsBoundSphere(w$_.boundingSphere)))continue;w$_._renderUpdate(w$x),w$_._distanceForSort=w$Zl.distance(w$_.boundingSphere.center,w$A)+w$_.sortingFudge;var w$o=w$_._renderElements;for(w$O=0,w$e=w$o.length;w$O<w$e;w$O++){var w$K=w$o[w$O],w$r=w$K._staticBatch;if(w$r&&w$r._material===w$K._material)w$r._addBatchRenderElement(w$K);else{var w$G=w$K.renderObj;w$G.triangleCount<10&&1===w$G._vertexBufferCount&&w$G._getIndexBuffer()&&w$K._material.renderQueue<2&&w$K._canDynamicBatch&&!w$_._owner.isStatic?w$$._addPrepareRenderElement(w$K):this._scene.getRenderQueue(w$K._material.renderQueue)._addRenderElement(w$K)}}}}for(w$Z=0;w$Z<8;w$Z++){var w$c=this._children[w$Z];if(null!=w$c){var w$d=w$l;if(w$l){var w$C=w$v.containsBoundBox(w$c._relaxBox);if(w$g.treeNodeCollision+=1,0===w$C)continue;w$d=2===w$C}w$c.cullingObjects(w$v,w$d,w$L,w$A,w$x)}}},w$v.cullingShadowObjects=function(w$v,w$l,w$L,w$A,w$x){var w$m,w$Z=0,w$O=0,w$e=0;this._scene._dynamicBatchManager;for(w$Z=0,w$m=this._objects.length;w$Z<w$m;w$Z++){var w$$=this._objects[w$Z];if(w$$.castShadow&&w$I.isVisible(w$$._owner.layer.mask)&&w$$.enable){if(w$L&&0===w$v[0].containsBoundSphere(w$$.boundingSphere))continue;for(var w$_=1,w$o=w$v.length;w$_<w$o;w$_++){var w$K=w$l[w$_-1];if(0!==w$v[w$_].containsBoundSphere(w$$.boundingSphere)){var w$r=w$$._renderElements;for(w$O=0,w$e=w$r.length;w$O<w$e;w$O++)w$K._addRenderElement(w$r[w$O])}}}}for(w$Z=0;w$Z<8;w$Z++){var w$G=this._children[w$Z];if(null!=w$G){var w$c=w$L;if(w$L){var w$d=w$v[0].containsBoundBox(w$G._relaxBox);if(0===w$d)continue;w$c=2===w$d}w$G.cullingShadowObjects(w$v,w$l,w$c,w$A,w$x)}}},w$v.cullingShadowObjectsOnePSSM=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z,w$O=w$l[0],w$e=0,w$$=0,w$_=0;for(w$e=0,w$Z=this._objects.length;w$e<w$Z;w$e++){var w$o=this._objects[w$e];if(w$o.castShadow&&w$I.isVisible(w$o._owner.layer.mask)&&w$o.enable){if(w$A&&0===w$v.containsBoundSphere(w$o.boundingSphere))continue;w$o._renderUpdate(w$L);var w$K=w$o._renderElements;for(w$$=0,w$_=w$K.length;w$$<w$_;w$$++)w$O._addRenderElement(w$K[w$$])}}for(w$e=0;w$e<8;w$e++){var w$r=this._children[w$e];if(null!=w$r){var w$G=w$A;if(w$A){var w$c=w$v.containsBoundBox(w$r._relaxBox);if(0===w$c)continue;w$G=2===w$c}w$r.cullingShadowObjectsOnePSSM(w$v,w$l,w$L,w$G,w$x,w$m)}}},w$v.renderBoudingBox=function(w$v){this._renderBoudingBox(w$v);for(var w$l=0;w$l<8;++w$l){var w$L=this._children[w$l];w$L&&w$L.renderBoudingBox(w$v)}},w$v.buildAllChild=function(w$v){if(w$v<this._scene.treeLevel)for(var w$l=0;w$l<8;w$l++){this.addChild(w$l).buildAllChild(w$v+1)}},w$v._renderBoudingBox=function(w$v){},w$G(0,w$v,"exactBox",function(){return this._exactBox},function(w$v){this._exactBox=w$v,w$Zl.add(w$v.min,w$v.max,this._boundingBoxCenter),w$Zl.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),w$G(0,w$v,"relaxBox",function(){return this._relaxBox},function(w$v){(this._relaxBox=w$v).getCorners(this._corners),w$nv.createfromPoints(this._corners,this._boundingSphere)}),w$Z.debugMode=!1,w$Z.relax=1.15,w$Z.CHILDNUM=8,w$o(w$Z,["tempVector0",function(){return this.tempVector0=new w$Zl},"tempSize",function(){return this.tempSize=new w$Zl},"tempCenter",function(){return this.tempCenter=new w$Zl},"_octreeSplit",function(){return this._octreeSplit=[new w$Zl(.25,.25,.25),new w$Zl(.75,.25,.25),new w$Zl(.25,.75,.25),new w$Zl(.75,.75,.25),new w$Zl(.25,.25,.75),new w$Zl(.75,.25,.75),new w$Zl(.25,.75,.75),new w$Zl(.75,.75,.75)]}]),w$Z}(),w$i=(function(){function w$v(){}w$r(w$v,"laya.d3.core.scene.SceneManager")}(),function(){function w$v(w$v,w$l,w$L,w$A){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===w$v&&(w$v=1),void 0===w$l&&(w$l=1),void 0===w$L&&(w$L=1),void 0===w$A&&(w$A=1),this._r=w$v,this._g=w$l,this._b=w$L,this._a=w$A}return w$r(w$v,"laya.d3.core.trail.module.Color",null,"Color$1"),w$v.prototype.cloneTo=function(w$v){w$v._r=this._r,w$v._g=this._g,w$v._b=this._b,w$v._a=this._a},w$o(w$v,["RED",function(){return this.RED=new w$v(1,0,0,1)},"GREEN",function(){return this.GREEN=new w$v(0,1,0,1)},"BLUE",function(){return this.BLUE=new w$v(0,0,1,1)},"CYAN",function(){return this.CYAN=new w$v(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new w$v(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new w$v(1,0,1,1)},"GRAY",function(){return this.GRAY=new w$v(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new w$v(1,1,1,1)},"BLACK",function(){return this.BLACK=new w$v(0,0,0,1)}]),w$v}()),w$n=(function(){function w$v(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}w$r(w$v,"laya.d3.core.trail.module.Gradient");var w$l=w$v.prototype;w$l.setKeys=function(w$v,w$l){var w$L,w$A;this._colorKeys=w$v;for(var w$x=this.index=0;w$x<w$v.length;w$x++){var w$m=(w$L=w$v[w$x]).color;this._colorKeyData[this.index++]=w$m._r,this._colorKeyData[this.index++]=w$m._g,this._colorKeyData[this.index++]=w$m._b,this._colorKeyData[this.index++]=w$L.time}this._alphaKeys=w$l;for(var w$Z=this.index=0;w$Z<w$l.length;w$Z++)w$A=w$l[w$Z],this._alphaKeyData[this.index++]=w$A.alpha,this._alphaKeyData[this.index++]=w$A.time},w$l.cloneTo=function(w$v){var w$l=0,w$L=0,w$A=this.colorKeys,w$x=[];for(w$l=0,w$L=w$A.length;w$l<w$L;w$l++){var w$m=new w$U;w$A[w$l].cloneTo(w$m),w$x.push(w$m)}var w$Z=this.alphaKeys,w$O=[];for(w$l=0,w$L=w$Z.length;w$l<w$L;w$l++){var w$e=new w$n;w$Z[w$l].cloneTo(w$e),w$O.push(w$e)}w$v.setKeys(w$x,w$O)},w$G(0,w$l,"mode",function(){return this._mode},function(w$v){this._mode=w$v}),w$G(0,w$l,"colorKeys",function(){return this._colorKeys},function(w$v){this._colorKeys=w$v;for(var w$l=this.index=0;w$l<w$v.length;w$l++){var w$L=w$v[w$l],w$A=w$L.color;this._colorKeyData[this.index++]=w$A._r,this._colorKeyData[this.index++]=w$A._g,this._colorKeyData[this.index++]=w$A._b,this._colorKeyData[this.index++]=w$L.time}}),w$G(0,w$l,"alphaKeys",function(){return this._alphaKeys},function(w$v){this._alphaKeys=w$v;for(var w$l=this.index=0;w$l<w$v.length;w$l++){var w$L=w$v[w$l];this._alphaKeyData[this.index++]=w$L.alpha,this._alphaKeyData[this.index++]=w$L.time}})}(),function(){function w$v(w$v,w$l){this._alpha=NaN,this._time=NaN,void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=0),this._alpha=w$v,this._time=w$l}w$r(w$v,"laya.d3.core.trail.module.GradientAlphaKey");var w$l=w$v.prototype;return w$l.cloneTo=function(w$v){w$v.alpha=this.alpha,w$v.time=this.time},w$G(0,w$l,"alpha",function(){return this._alpha},function(w$v){this._alpha=w$v}),w$G(0,w$l,"time",function(){return this._time},function(w$v){this._time=w$v}),w$v}()),w$U=function(){function w$v(w$v,w$l){this._color=null,this._time=NaN,void 0===w$l&&(w$l=0),this._color=w$v||new w$i,this._time=w$l}w$r(w$v,"laya.d3.core.trail.module.GradientColorKey");var w$l=w$v.prototype;return w$l.cloneTo=function(w$v){this.color.cloneTo(w$v.color),w$v.time=this.time},w$G(0,w$l,"color",function(){return this._color},function(w$v){this._color=w$v}),w$G(0,w$l,"time",function(){return this._time},function(w$v){this._time=w$v}),w$v}(),w$z=(function(){function w$v(){}w$r(w$v,"laya.d3.core.trail.module.GradientMode"),w$v.Blend=0,w$v.Fixed=1}(),function(){function w$v(){}w$r(w$v,"laya.d3.core.trail.module.TextureMode"),w$v.Stretch=0,w$v.Tile=1}(),function(){function w$v(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}w$r(w$v,"laya.d3.core.trail.module.TrailKeyFrame"),w$v.prototype.cloneTo=function(w$v){w$v.time=this.time,w$v.inTangent=this.inTangent,w$v.outTangent=this.outTangent,w$v.value=this.value}}(),function(){function w$l(w$v){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new w$Zl,this._curPosition=new w$Zl,this._delVector3=new w$Zl,this._lastFixedVertexPosition=new w$Zl,this._pointAtoBVector3=new w$Zl,this._pointA=new w$Zl,this._pointB=new w$Zl,this._owner=w$v,this._id=w$l.renderElementCount++,0==this._id?w$v._owner.transform.position.cloneTo(this._lastPosition):w$v._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new w$Nl(w$z.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new w$Nl(w$z.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}w$r(w$l,"laya.d3.core.trail.TrailRenderElement");var w$v=w$l.prototype;w$f.imps(w$v,{"laya.d3.core.render.IRenderable":!0}),w$v._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},w$v._addTrailByFirstPosition=function(w$v,w$l){w$Zl.subtract(w$l,w$v,this._delVector3),w$Zl.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),w$Zl.normalize(this._pointAtoBVector3,this._pointAtoBVector3),w$Zl.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(w$v),w$v.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},w$v._addTrailByNextPosition=function(w$v){w$Zl.subtract(w$v,this._lastFixedVertexPosition,this._delVector3),w$Zl.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),w$Zl.normalize(this._pointAtoBVector3,this._pointAtoBVector3),w$Zl.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=w$Zl.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=w$Uv.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(w$v),w$v.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(w$v),this._virtualVerticesCount=2)},w$v._updateVerticesByPosition=function(w$v){this._pointe=w$v.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},w$v._updateVertexBuffer2=function(){var w$v,w$l=0,w$L=0,w$A=0;for(w$A=0,w$v=(this._verticesCount+this._virtualVerticesCount)/2;w$A<w$v;w$A++)w$L=0==this._owner.textureMode?(this._VerticesToTailLength[w$A]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[w$A],this._vertices2[w$l++]=1-w$L,this._vertices2[w$l++]=1-w$L;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},w$v._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},w$v._updateDisappear=function(){var w$v,w$l=0;for(w$l=this._curDisappearIndex,w$v=(this._verticesCount+this._virtualVerticesCount)/2;w$l<w$v;w$l++)this._owner._curtime-this._everyGroupVertexBirthTime[w$l]>=this._owner.time+w$Uv.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},w$v._beforeRender=function(w$v){return this._camera=w$v.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),w$Zl.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},w$v._render=function(w$v){this._isDead||(w$Q.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),w$g.drawCall++,w$g.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},w$v._getVertexBuffer=function(w$v){return void 0===w$v&&(w$v=0),0===w$v?this._vertexBuffer1:1===w$v?this._vertexBuffer2:null},w$v._getVertexBuffers=function(){return this._vertexBuffers},w$v._getIndexBuffer=function(){return null},w$v.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},w$v._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},w$G(0,w$v,"_vertexBufferCount",function(){return this._vertexBuffers.length}),w$G(0,w$v,"triangleCount",function(){return 0}),w$l.renderElementCount=0}(),function(){function w$v(){}w$r(w$v,"laya.d3.core.trail.VertexTrail");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration1}),w$G(1,w$v,"vertexDeclaration1",function(){return w$v._vertexDeclaration1}),w$G(1,w$v,"vertexDeclaration2",function(){return w$v._vertexDeclaration2}),w$o(w$v,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new w$mv(32,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",41),new w$Zv(24,"single",33),new w$Zv(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new w$mv(4,[new w$Zv(0,"single",38)])}]),w$v}()),w$vv=function(){function w$X(w$v){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=w$v}w$r(w$X,"laya.d3.graphics.DynamicBatch");var w$v=w$X.prototype;return w$f.imps(w$v,{"laya.d3.core.render.IRenderable":!0}),w$v._getVertexBuffer=function(w$v){return void 0===w$v&&(w$v=0),0===w$v?this._vertexBuffer:null},w$v._getIndexBuffer=function(){return this._indexBuffer},w$v._getCombineRenderElementFromPool=function(w$v,w$l,w$L){var w$A=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return w$A||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=w$A=new w$y,w$A._sprite3D=new w$Wl),w$A._sprite3D._render._renderUpdate(w$L),w$A},w$v._getRenderElement=function(w$v,w$l,w$L){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*w$X.maxVertexCount),this._indexDatas=new Uint16Array(w$X.maxIndexCount),this._vertexBuffer=w$Nl.create(this._vertexDeclaration,w$X.maxVertexCount,35048),this._indexBuffer=w$Rl.create("ushort",w$X.maxIndexCount,35048));for(var w$A=this._merageElements.length=0,w$x=0,w$m=0,w$Z=this._combineRenderElements.length;w$m<w$Z;w$m++){var w$O=this._combineRenderElements[w$m],w$e=w$O.getDynamicBatchBakedVertexs(0),w$$=w$O.getBakedIndices(),w$_=w$O._sprite3D.transform._isFrontFaceInvert,w$o=w$A/(this._vertexDeclaration.vertexStride/4),w$K=w$x,w$r=w$K+w$$.length;w$O._tempBatchIndexStart=w$K,w$O._tempBatchIndexEnd=w$r,this._indexDatas.set(w$$,w$x);var w$G=0;if(w$_)for(w$G=w$K;w$G<w$r;w$G+=3){this._indexDatas[w$G]=w$o+this._indexDatas[w$G];var w$c=this._indexDatas[w$G+1],w$d=this._indexDatas[w$G+2];this._indexDatas[w$G+1]=w$o+w$d,this._indexDatas[w$G+2]=w$o+w$c}else for(w$G=w$K;w$G<w$r;w$G+=3)this._indexDatas[w$G]=w$o+this._indexDatas[w$G],this._indexDatas[w$G+1]=w$o+this._indexDatas[w$G+1],this._indexDatas[w$G+2]=w$o+this._indexDatas[w$G+2];w$x+=w$$.length,this._vertexDatas.set(w$e,w$A),w$A+=w$e.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),w$m=this._combineRenderElementPoolIndex=0,w$Z=this._materials.length;w$m<w$Z;w$m++){var w$C=this._getCombineRenderElementFromPool(w$v,w$l,w$L);w$C._type=2,w$C._staticBatch=null;var w$J=(w$C.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[w$m]]._tempBatchIndexStart,w$B=w$m+1===this._materialToRenderElementsOffsets.length?w$x:this._combineRenderElements[this._materialToRenderElementsOffsets[w$m+1]]._tempBatchIndexStart;w$C._tempBatchIndexStart=w$J,w$C._tempBatchIndexEnd=w$B,w$C._material=this._materials[w$m],this._merageElements.push(w$C)}},w$v._addCombineRenderObjTest=function(w$v){var w$l=w$v.renderObj,w$L=this._currentCombineIndexCount+w$l._getIndexBuffer().indexCount,w$A=this._currentCombineVertexCount+w$l._getVertexBuffer().vertexCount;return!(w$X.maxVertexCount<w$A||w$X.maxIndexCount<w$L)},w$v._addCombineRenderObj=function(w$v){var w$l=w$v.renderObj;this._combineRenderElements.push(w$v),this._currentCombineIndexCount=this._currentCombineIndexCount+w$l._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+w$l._getVertexBuffer().vertexCount},w$v._addCombineMaterial=function(w$v){this._materials.push(w$v)},w$v._addMaterialToRenderElementOffset=function(w$v){this._materialToRenderElementsOffsets.push(w$v)},w$v._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},w$v._addToRenderQueue=function(w$v,w$l,w$L,w$A){this._getRenderElement(w$l,w$L,w$A);for(var w$x=0,w$m=this._materials.length;w$x<w$m;w$x++)w$v.getRenderQueue(this._materials[w$x].renderQueue)._addDynamicBatchElement(this._merageElements[w$x])},w$v._beforeRender=function(w$v){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},w$v._render=function(w$v){var w$l=w$v._batchIndexEnd-w$v._batchIndexStart;w$Q.mainContext.drawElements(4,w$l,5123,2*w$v._batchIndexStart),w$g.drawCall++,w$g.trianglesFaces+=w$l/3},w$v._getVertexBuffers=function(){return null},w$G(0,w$v,"_vertexBufferCount",function(){return 1}),w$G(0,w$v,"triangleCount",function(){return this._indexBuffer.indexCount/3}),w$G(0,w$v,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),w$X.maxVertexCount=2e4,w$X.maxIndexCount=4e4,w$X.maxCombineTriangleCount=10,w$X}(),w$lv=function(){function w$X(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}w$r(w$X,"laya.d3.graphics.DynamicBatchManager");var w$v=w$X.prototype;return w$v.getDynamicBatch=function(w$v,w$l){var w$L,w$A=w$v.id.toString()+w$l;return this._dynamicBatches[w$A]?w$L=this._dynamicBatches[w$A]:this._dynamicBatches[w$A]=w$L=new w$vv(w$v),w$L},w$v._garbageCollection=function(){for(var w$v in this._dynamicBatches)0===this._dynamicBatches[w$v].combineRenderElementsCount&&delete this._dynamicBatches[w$v]},w$v._addPrepareRenderElement=function(w$v){this._prepareDynamicBatchCombineElements.push(w$v)},w$v._finishCombineDynamicBatch=function(w$v){var w$l,w$L,w$A;this._prepareDynamicBatchCombineElements.sort(w$X._sortPrepareDynamicBatch);for(var w$x,w$m,w$Z,w$O,w$e,w$$=-1,w$_=!0,w$o=0,w$K=-1,w$r=0,w$G=this._prepareDynamicBatchCombineElements.length;w$r<w$G;w$r++){var w$c=(w$m=this._prepareDynamicBatchCombineElements[w$r]).renderObj._getVertexBuffer(0).vertexDeclaration,w$d=w$L!==w$c;w$d&&(w$o=0,w$L=w$c);var w$C=w$o!==w$$;if(w$C&&(w$$=w$o),(w$d||w$C)&&(w$Z=this.getDynamicBatch(w$c,w$o),w$l=null),w$_)if(w$Z._addCombineRenderObjTest(w$m)){if(w$l!==(w$x=w$m._material))w$O&&(w$v.getRenderQueue(w$e._material.renderQueue)._addRenderElement(w$e),w$e=w$O=null,w$K=-1),w$O=w$x,w$K=w$Z.combineRenderElementsCount,w$e=w$m,w$l=w$x;else if(w$O){var w$J=w$e.renderObj,w$B=w$m.renderObj;w$J._getVertexBuffer().vertexCount+w$B._getVertexBuffer().vertexCount>w$vv.maxVertexCount||w$J._getIndexBuffer().indexCount+w$B._getIndexBuffer().indexCount>w$vv.maxIndexCount?(w$v.getRenderQueue(w$e._material.renderQueue)._addRenderElement(w$e),w$O=w$x,w$K=w$Z.combineRenderElementsCount,w$e=w$m):(w$Z._addCombineMaterial(w$O),w$Z._addMaterialToRenderElementOffset(w$K),w$Z._addCombineRenderObj(w$e),w$e=w$O=null,w$K=-1,w$Z._addCombineRenderObj(w$m))}else w$Z._addCombineRenderObj(w$m);w$_=!0}else w$O&&(w$v.getRenderQueue(w$e._material.renderQueue)._addRenderElement(w$e),w$e=w$O=null,w$K=-1),w$o++,w$_=!1;else w$A=this._prepareDynamicBatchCombineElements[w$r-1],w$Z._addMaterialToRenderElementOffset(w$Z.combineRenderElementsCount),w$l=w$A._material,w$Z._addCombineMaterial(w$l),w$Z._addCombineRenderObj(w$A),w$_=!0,w$l!==(w$x=w$m._material)?(w$O=w$x,w$K=w$Z.combineRenderElementsCount,w$e=w$m):w$Z._addCombineRenderObj(w$m),w$l=w$x}w$O&&(w$v.getRenderQueue(w$e._material.renderQueue)._addRenderElement(w$e),w$e=w$O=null,w$K=-1),this._prepareDynamicBatchCombineElements.length=0},w$v._clearRenderElements=function(){for(var w$v in this._dynamicBatches)this._dynamicBatches[w$v]._clearRenderElements()},w$v._addToRenderQueue=function(w$v,w$l,w$L,w$A){for(var w$x in this._dynamicBatches){var w$m=this._dynamicBatches[w$x];0<w$m.combineRenderElementsCount&&w$m._addToRenderQueue(w$v,w$l,w$L,w$A)}},w$v.dispose=function(){this._dynamicBatches=null},w$X._sortPrepareDynamicBatch=function(w$v,w$l){return w$v._mainSortID-w$l._mainSortID},w$X}(),w$Lv=function(){function w$v(){}return w$r(w$v,"laya.d3.graphics.FrustumCulling"),w$v.renderShadowObjectCulling=function(w$v,w$l,w$L,w$A,w$x){var w$m=0,w$Z=0,w$O=0,w$e=0;for(w$m=0,w$O=w$L.length;w$m<w$O;w$m++){var w$$=w$L[w$m];w$$&&w$$._clearRenderElements()}var w$_,w$o,w$K,w$r=w$v._cullingRenders;if(1<w$x){for(w$m=0,w$O=w$v._cullingRendersLength;w$m<w$O;w$m++)if((w$_=w$r[w$m]).castShadow&&w$I.isVisible(w$_._owner.layer.mask)&&w$_.enable)for(var w$G=1,w$c=w$l.length;w$G<w$c;w$G++)if(w$o=w$L[w$G-1],0!==w$l[w$G].containsBoundSphere(w$_.boundingSphere))for(w$Z=0,w$e=(w$K=w$_._renderElements).length;w$Z<w$e;w$Z++)w$o._addRenderElement(w$K[w$Z])}else for(w$m=0,w$O=w$v._cullingRendersLength;w$m<w$O;w$m++)if((w$_=w$r[w$m]).castShadow&&w$I.isVisible(w$_._owner.layer.mask)&&w$_.enable&&0!==w$l[0].containsBoundSphere(w$_.boundingSphere))for(w$_._renderUpdate(w$A),w$o=w$L[0],w$Z=0,w$e=(w$K=w$_._renderElements).length;w$Z<w$e;w$Z++)w$o._addRenderElement(w$K[w$Z])},w$v.renderShadowObjectCullingOctree=function(w$v,w$l,w$L,w$A,w$x){for(var w$m=0,w$Z=w$L.length;w$m<w$Z;w$m++){var w$O=w$L[w$m];w$O&&w$O._clearRenderElements()}1<w$x?w$v.treeRoot.cullingShadowObjects(w$l,w$L,!0,0,w$v):w$v.treeRoot.cullingShadowObjectsOnePSSM(w$l[0],w$L,w$A,!0,0,w$v)},w$v.renderObjectCulling=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z=0,w$O=0,w$e=0,w$$=0,w$_=w$l._quenes,w$o=w$l._dynamicBatchManager,w$K=w$l._cullingRenders;for(w$Z=0,w$O=w$_.length;w$Z<w$O;w$Z++){var w$r=w$_[w$Z];w$r&&w$r._clearRenderElements()}var w$G=w$Av._staticBatchManagers;for(w$Z=0,w$O=w$G.length;w$Z<w$O;w$Z++)w$G[w$Z]._clearRenderElements();w$o._clearRenderElements();var w$c=w$L.transform.position;for(w$Z=0,w$O=w$l._cullingRendersLength;w$Z<w$O;w$Z++){var w$d=w$K[w$Z];if(w$I.isVisible(w$d._owner.layer.mask)&&w$d.enable&&0!==w$v.containsBoundSphere(w$d.boundingSphere)&&w$d._renderUpdate(w$m)){w$d._distanceForSort=w$Zl.distance(w$d.boundingSphere.center,w$c)+w$d.sortingFudge;var w$C=w$d._renderElements;for(w$e=0,w$$=w$C.length;w$e<w$$;w$e++){var w$J=w$C[w$e],w$B=w$J._staticBatch;if(w$B&&w$B._material===w$J._material)w$B._addBatchRenderElement(w$J);else{var w$X=w$J.renderObj;w$X.triangleCount<10&&1===w$X._vertexBufferCount&&w$X._getIndexBuffer()&&w$J._material.renderQueue<2&&w$J._canDynamicBatch&&!w$d._owner.isStatic?w$o._addPrepareRenderElement(w$J):w$l.getRenderQueue(w$J._material.renderQueue)._addRenderElement(w$J)}}}}for(w$Z=0,w$O=w$G.length;w$Z<w$O;w$Z++)w$G[w$Z]._addToRenderQueue(w$l,w$A,w$x,w$m);w$o._finishCombineDynamicBatch(w$l),w$o._addToRenderQueue(w$l,w$A,w$x,w$m)},w$v.renderObjectCullingOctree=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z=0,w$O=0,w$e=w$l._quenes,w$$=w$l._dynamicBatchManager;for(w$Z=0,w$O=w$e.length;w$Z<w$O;w$Z++){var w$_=w$e[w$Z];w$_&&w$_._clearRenderElements()}var w$o=w$Av._staticBatchManagers;for(w$Z=0,w$O=w$o.length;w$Z<w$O;w$Z++)w$o[w$Z]._clearRenderElements();for(w$$._clearRenderElements(),w$l._cullingRenders.length=0,w$l.treeRoot.cullingObjects(w$v,!0,0,w$L.transform.position,w$m),w$Z=0,w$O=w$o.length;w$Z<w$O;w$Z++)w$o[w$Z]._addToRenderQueue(w$l,w$A,w$x,w$m);w$$._finishCombineDynamicBatch(w$l),w$$._addToRenderQueue(w$l,w$A,w$x,w$m)},w$v.renderObjectCullingNoBoundFrustum=function(w$v,w$l,w$L,w$A,w$x){var w$m=0,w$Z=0,w$O=0,w$e=0,w$$=w$v._quenes,w$_=w$v._dynamicBatchManager,w$o=w$v._cullingRenders;for(w$m=0,w$Z=w$$.length;w$m<w$Z;w$m++){var w$K=w$$[w$m];w$K&&w$K._clearRenderElements()}var w$r=w$Av._staticBatchManagers;for(w$m=0,w$Z=w$r.length;w$m<w$Z;w$m++)w$r[w$m]._clearRenderElements();w$_._clearRenderElements();var w$G=w$l.transform.position;for(w$m=0,w$Z=w$v._cullingRendersLength;w$m<w$Z;w$m++){var w$c=w$o[w$m];if(w$I.isVisible(w$c._owner.layer.mask)&&w$c.enable){w$c._renderUpdate(w$x),w$c._distanceForSort=w$Zl.distance(w$c.boundingSphere.center,w$G)+w$c.sortingFudge;var w$d=w$c._renderElements;for(w$O=0,w$e=w$d.length;w$O<w$e;w$O++){var w$C=w$d[w$O],w$J=w$C._staticBatch;if(w$J&&w$J._material===w$C._material)w$J._addBatchRenderElement(w$C);else{var w$B=w$C.renderObj;w$B.triangleCount<10&&1===w$B._vertexBufferCount&&w$B._getIndexBuffer()&&w$C._material.renderQueue<2&&w$C._canDynamicBatch&&!w$c._owner.isStatic?w$_._addPrepareRenderElement(w$C):w$v.getRenderQueue(w$C._material.renderQueue)._addRenderElement(w$C)}}}}for(w$m=0,w$Z=w$r.length;w$m<w$Z;w$m++)w$r[w$m]._addToRenderQueue(w$v,w$L,w$A,w$x);w$_._finishCombineDynamicBatch(w$v),w$_._addToRenderQueue(w$v,w$L,w$A,w$x)},w$v}(),w$Av=function(){function w$m(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}w$r(w$m,"laya.d3.graphics.StaticBatchManager");var w$v=w$m.prototype;return w$v._finishInit=function(){for(var w$v in this._staticBatches)this._staticBatches[w$v]._finishInit();this._initBatchRenderElements.length=0},w$v._initStaticBatchs=function(w$v){throw new Error("StaticBatchManager:must override this function.")},w$v._addInitBatchSprite=function(w$v){for(var w$l=w$v._render._renderElements,w$L=0,w$A=w$l.length;w$L<w$A;w$L++)this._initBatchRenderElements.push(w$l[w$L])},w$v._clearRenderElements=function(){for(var w$v in this._staticBatches)this._staticBatches[w$v]._clearRenderElements()},w$v._garbageCollection=function(w$v){var w$l=w$v._staticBatch,w$L=w$l._initBatchRenderElements,w$A=w$L.indexOf(w$v);w$L.splice(w$A,1),0===w$L.length&&(w$l.dispose(),delete this._staticBatches[w$l._key])},w$v._addToRenderQueue=function(w$v,w$l,w$L,w$A){for(var w$x in this._staticBatches){var w$m=this._staticBatches[w$x];0<w$m._batchRenderElements.length&&w$m._updateToRenderQueue(w$v,w$A)}},w$v.dispose=function(){this._staticBatches=null},w$m._addToStaticBatchQueue=function(w$v){w$v instanceof laya.d3.core.RenderableSprite3D&&w$v._addToInitStaticBatchManager();for(var w$l=0,w$L=w$v.numChildren;w$l<w$L;w$l++)w$m._addToStaticBatchQueue(w$v._childs[w$l])},w$m.combine=function(w$v,w$l){var w$L,w$A=0,w$x=0;if(w$l)for(w$A=0,w$x=w$l.length;w$A<w$x;w$A++){w$l[w$A]._addToInitStaticBatchManager()}else w$v&&w$m._addToStaticBatchQueue(w$v);for(w$A=0,w$x=w$m._staticBatchManagers.length;w$A<w$x;w$A++)(w$L=w$m._staticBatchManagers[w$A])._initStaticBatchs(w$v),w$L._finishInit()},w$m._staticBatchManagers=[],w$m}(),w$xv=function(){function w$v(w$v,w$l,w$L){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=w$v,this._manager=w$l,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=w$L}w$r(w$v,"laya.d3.graphics.StaticBatch");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),w$l._binarySearch=function(w$v){for(var w$l=0,w$L=this._batchRenderElements.length-1,w$A=0;w$l<=w$L;)w$A=Math.floor((w$l+w$L)/2),this._compareBatchRenderElement(this._batchRenderElements[w$A],w$v)?w$L=w$A-1:w$l=w$A+1;return w$l},w$l._compareBatchRenderElement=function(w$v,w$l){throw new Error("StaticBatch:must override this function.")},w$l._getVertexDecLightMap=function(w$v){return w$v===w$Rv.vertexDeclaration?w$Iv.vertexDeclaration:w$v===w$uv.vertexDeclaration?w$Pv.vertexDeclaration:w$v===w$Tv.vertexDeclaration?w$Xv.vertexDeclaration:w$v===w$Fv.vertexDeclaration?null:w$v===w$cv.vertexDeclaration?w$dv.vertexDeclaration:w$v===w$bv.vertexDeclaration?w$av.vertexDeclaration:w$v===w$Qv.vertexDeclaration?w$Mv.vertexDeclaration:w$v===w$Nv.vertexDeclaration?w$tv.vertexDeclaration:w$v===w$uv.vertexDeclaration?w$Pv.vertexDeclaration:w$v===w$hv.vertexDeclaration?w$fv.vertexDeclaration:w$v===w$Fv.vertexDeclaration?null:w$v===w$cv.vertexDeclaration?w$dv.vertexDeclaration:w$v===w$jv.vertexDeclaration?w$qv.vertexDeclaration:w$v===w$Qv.vertexDeclaration?w$Mv.vertexDeclaration:w$v},w$l._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},w$l._addBatchRenderElement=function(w$v){this._batchRenderElements.splice(this._binarySearch(w$v),0,w$v)},w$l._updateToRenderQueue=function(w$v,w$l){this._combineRenderElementPoolIndex=0,this._getRenderElement(w$v.getRenderQueue(this._material.renderQueue)._renderElements,w$v,w$l)},w$l._getRenderElement=function(w$v,w$l,w$L){throw new Error("StaticBatch:must override this function.")},w$l._finishInit=function(){throw new Error("StaticBatch:must override this function.")},w$l._clearRenderElements=function(){this._batchRenderElements.length=0},w$l.dispose=function(){},w$l._getVertexBuffer=function(w$v){return void 0===w$v&&(w$v=0),null},w$l._getIndexBuffer=function(){return null},w$l._beforeRender=function(w$v){return!0},w$l._render=function(w$v){},w$l._getVertexBuffers=function(){return null},w$G(0,w$l,"_vertexBufferCount",function(){return 1}),w$G(0,w$l,"triangleCount",function(){return 0}),w$v.combine=function(w$v){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),w$Av.combine(w$v)},w$v.maxBatchVertexCount=65535,w$v}(),w$mv=function(){function w$Z(w$v,w$l){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++w$Z._uniqueIDCounter,this._id>w$Z.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",w$Z.maxVertexDeclaration);this._shaderValues=new w$Kl,this._vertexElementsDic={},this._vertexStride=w$v,this._vertexElements=w$l;for(var w$L=0;w$L<w$l.length;w$L++){var w$A=w$l[w$L],w$x=w$A.elementUsage;this._vertexElementsDic[w$x]=w$A;var w$m=[w$Z._getTypeSize(w$A.elementFormat)/4,5126,!1,this._vertexStride,w$A.offset];switch(this._shaderValues.setValue(w$x,w$m),w$x){case 1:this._addShaderDefine(w$gl.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(w$gl.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(w$gl.SHADERDEFINE_UV1)}}}w$r(w$Z,"laya.d3.graphics.VertexDeclaration");var w$v=w$Z.prototype;return w$v._addShaderDefine=function(w$v){this._shaderDefineValue|=w$v},w$v._removeShaderDefine=function(w$v){this._shaderDefineValue&=~w$v},w$v.getVertexElements=function(){return this._vertexElements.slice()},w$v.getVertexElementByUsage=function(w$v){return this._vertexElementsDic[w$v]},w$v.unBinding=function(){},w$G(0,w$v,"shaderDefineValue",function(){return this._shaderDefineValue}),w$G(0,w$v,"id",function(){return this._id}),w$G(0,w$v,"vertexStride",function(){return this._vertexStride}),w$G(0,w$v,"shaderValues",function(){return this._shaderValues}),w$Z._getTypeSize=function(w$v){switch(w$v){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},w$Z.getVertexStride=function(w$v){for(var w$l=0,w$L=0;w$L<w$v.Length;w$L++){var w$A=w$v[w$L],w$x=w$A.offset+w$Z._getTypeSize(w$A.elementFormat);w$l<w$x&&(w$l=w$x)}return w$l},w$Z._maxVertexDeclarationBit=1e3,w$Z._uniqueIDCounter=1,w$o(w$Z,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),w$Z}(),w$Zv=function(){function w$v(w$v,w$l,w$L){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=w$v,this.elementFormat=w$l,this.elementUsage=w$L}return w$r(w$v,"laya.d3.graphics.VertexElement"),w$v}(),w$Ov=(function(){function w$v(){}w$r(w$v,"laya.d3.graphics.VertexElementFormat"),w$v.Single="single",w$v.Vector2="vector2",w$v.Vector3="vector3",w$v.Vector4="vector4",w$v.Color="color",w$v.Byte4="byte4",w$v.Short2="short2",w$v.Short4="short4",w$v.NormalizedShort2="normalizedshort2",w$v.NormalizedShort4="normalizedshort4",w$v.HalfVector2="halfvector2",w$v.HalfVector4="halfvector4"}(),function(){function w$v(){}w$r(w$v,"laya.d3.graphics.VertexElementUsage"),w$v.POSITION0=0,w$v.COLOR0=1,w$v.TEXTURECOORDINATE0=2,w$v.NORMAL0=3,w$v.BINORMAL0=4,w$v.TANGENT0=5,w$v.BLENDINDICES0=6,w$v.BLENDWEIGHT0=7,w$v.DEPTH0=8,w$v.FOG0=9,w$v.POINTSIZE0=10,w$v.SAMPLE0=11,w$v.TESSELLATEFACTOR0=12,w$v.COLOR1=13,w$v.NEXTTEXTURECOORDINATE0=14,w$v.TEXTURECOORDINATE1=15,w$v.NEXTTEXTURECOORDINATE1=16,w$v.CORNERTEXTURECOORDINATE0=17,w$v.VELOCITY0=18,w$v.STARTCOLOR0=19,w$v.STARTSIZE=20,w$v.AGEADDSCALE0=21,w$v.STARTROTATION=22,w$v.ENDCOLOR0=23,w$v.STARTLIFETIME=24,w$v.TIME0=33,w$v.SHAPEPOSITIONSTARTLIFETIME=30,w$v.DIRECTIONTIME=32,w$v.SIZEROTATION0=27,w$v.RADIUS0=28,w$v.RADIAN0=29,w$v.STARTSPEED=31,w$v.RANDOM0=34,w$v.RANDOM1=35,w$v.SIMULATIONWORLDPOSTION=36,w$v.SIMULATIONWORLDROTATION=37,w$v.TEXTURECOORDINATE0X=38,w$v.TEXTURECOORDINATE0X1=39,w$v.TEXTURECOORDINATE0Y=40,w$v.OFFSETVECTOR=41}(),function(){function w$v(w$v,w$l,w$L){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=w$v,this._textureCoordinate0=w$l,this._time=w$L}w$r(w$v,"laya.d3.graphics.VertexGlitter");var w$l=w$v.prototype;w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"textureCoordinate",function(){return this._textureCoordinate0}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"time",function(){return this._time}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(24,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector2",2),new w$Zv(20,"single",33)])}])}(),function(){function w$v(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=w$v,this._position=w$l,this._velocity=w$L,this._startColor=w$A,this._endColor=w$x,this._sizeRotation=w$m,this._radius=w$Z,this._radian=w$O,this._ageAddScale=w$e,this._time=w$$}w$r(w$v,"laya.d3.graphics.VertexParticle");var w$l=w$v.prototype;w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"endColor",function(){return this._endColor}),w$G(0,w$l,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),w$G(0,w$l,"sizeRotation",function(){return this._sizeRotation}),w$G(0,w$l,"velocity",function(){return this._velocity}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"startColor",function(){return this._startColor}),w$G(0,w$l,"radius",function(){return this._radius}),w$G(0,w$l,"radian",function(){return this._radian}),w$G(0,w$l,"ageAddScale",function(){return this._ageAddScale}),w$G(0,w$l,"time",function(){return this._time}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(116,[new w$Zv(0,"vector4",17),new w$Zv(16,"vector3",0),new w$Zv(28,"vector3",18),new w$Zv(40,"vector4",19),new w$Zv(56,"vector4",23),new w$Zv(72,"vector3",27),new w$Zv(84,"vector2",28),new w$Zv(92,"vector4",29),new w$Zv(108,"single",24),new w$Zv(112,"single",33)])}])}(),function(){function w$v(w$v){this._position=null,this._position=w$v}w$r(w$v,"laya.d3.graphics.VertexPosition");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(12,[new w$Zv(0,"vector3",0)])}]),w$v}()),w$ev=function(){function w$v(w$v,w$l){this._position=null,this._normal=null,this._position=w$v,this._normal=w$l}w$r(w$v,"laya.d3.graphics.VertexPositionNormal");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(24,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3)])}]),w$v}(),w$$v=function(){function w$v(w$v,w$l,w$L){this._position=null,this._normal=null,this._color=null,this._position=w$v,this._normal=w$l,this._color=w$L}w$r(w$v,"laya.d3.graphics.VertexPositionNormalColor");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"color",function(){return this._color}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(40,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector4",1)])}]),w$v}(),w$_v=function(){function w$v(w$v,w$l,w$L,w$A,w$x){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=w$v,this._normal=w$l,this._color=w$L,this._blendIndex=w$A,this._blendWeight=w$x}w$r(w$v,"laya.d3.graphics.VertexPositionNormalColorSkin");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"blendWeight",function(){return this._blendWeight}),w$G(0,w$l,"color",function(){return this._color}),w$G(0,w$l,"blendIndex",function(){return this._blendIndex}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(72,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector4",1),new w$Zv(40,"vector4",7),new w$Zv(56,"vector4",6)])}]),w$v}(),w$ov=function(){function w$v(w$v,w$l,w$L,w$A,w$x,w$m){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=w$v,this._normal=w$l,this._color=w$L,this._tangent=w$A,this._blendIndex=w$x,this._blendWeight=w$m}w$r(w$v,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"blendWeight",function(){return this._blendWeight}),w$G(0,w$l,"color",function(){return this._color}),w$G(0,w$l,"blendIndex",function(){return this._blendIndex}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(88,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector4",1),new w$Zv(40,"vector4",7),new w$Zv(56,"vector4",6),new w$Zv(72,"vector4",5)])}]),w$v}(),w$Kv=function(){function w$v(w$v,w$l,w$L,w$A,w$x,w$m){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=w$v,this._normal=w$l,this._color=w$L,this._tangent=w$A,this._blendIndex=w$x,this._blendWeight=w$m}w$r(w$v,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"blendWeight",function(){return this._blendWeight}),w$G(0,w$l,"color",function(){return this._color}),w$G(0,w$l,"blendIndex",function(){return this._blendIndex}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(84,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector4",1),new w$Zv(40,"vector4",7),new w$Zv(56,"vector4",6),new w$Zv(72,"vector3",5)])}]),w$v}(),w$rv=function(){function w$v(w$v,w$l,w$L,w$A){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=w$v,this._normal=w$l,this._color=w$L,this._tangent=w$A}w$r(w$v,"laya.d3.graphics.VertexPositionNormalColorSTangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"color",function(){return this._color}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(56,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector4",1),new w$Zv(40,"vector4",5)])}]),w$v}(),w$Gv=function(){function w$v(w$v,w$l,w$L,w$A){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=w$v,this._normal=w$l,this._color=w$L,this._tangent=w$A}w$r(w$v,"laya.d3.graphics.VertexPositionNormalColorTangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"color",function(){return this._color}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(52,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector4",1),new w$Zv(40,"vector3",5)])}]),w$v}(),w$cv=function(){function w$v(w$v,w$l,w$L,w$A){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=w$v,this._normal=w$l,this._color=w$L,this._textureCoordinate=w$A}w$r(w$v,"laya.d3.graphics.VertexPositionNormalColorTexture");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"textureCoordinate",function(){return this._textureCoordinate}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"color",function(){return this._color}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(48,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector4",1),new w$Zv(40,"vector2",2)])}]),w$v}(),w$dv=function(){function w$v(w$v,w$l,w$L,w$A,w$x){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=w$v,this._normal=w$l,this._color=w$L,this._textureCoordinate0=w$A,this._textureCoordinate1=w$x}w$r(w$v,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"color",function(){return this._color}),w$G(0,w$l,"textureCoordinate0",function(){return this._textureCoordinate0}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(0,w$l,"textureCoordinate1",function(){return this._textureCoordinate1}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(56,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector4",1),new w$Zv(40,"vector2",2),new w$Zv(48,"vector2",15)])}]),w$v}(),w$Cv=function(){function w$v(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=w$v,this._normal=w$l,this._color=w$L,this._textureCoordinate0=w$A,this._textureCoordinate1=w$x,this._blendIndex=w$m,this._blendWeight=w$Z}w$r(w$v,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"blendWeight",function(){return this._blendWeight}),w$G(0,w$l,"color",function(){return this._color}),w$G(0,w$l,"textureCoordinate0",function(){return this._textureCoordinate0}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(0,w$l,"textureCoordinate1",function(){return this._textureCoordinate1}),w$G(0,w$l,"blendIndex",function(){return this._blendIndex}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(88,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector4",1),new w$Zv(40,"vector2",2),new w$Zv(48,"vector2",15),new w$Zv(56,"vector4",7),new w$Zv(72,"vector4",6)])}]),w$v}(),w$Jv=function(){function w$v(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=w$v,this._normal=w$l,this._color=w$L,this._textureCoordinate0=w$A,this._textureCoordinate1=w$x,this._tangent=w$m,this._blendIndex=w$Z,this._blendWeight=w$O}w$r(w$v,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"blendWeight",function(){return this._blendWeight}),w$G(0,w$l,"color",function(){return this._color}),w$G(0,w$l,"textureCoordinate0",function(){return this._textureCoordinate0}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(0,w$l,"textureCoordinate1",function(){return this._textureCoordinate1}),w$G(0,w$l,"blendIndex",function(){return this._blendIndex}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(104,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector4",1),new w$Zv(40,"vector2",2),new w$Zv(48,"vector2",15),new w$Zv(56,"vector4",7),new w$Zv(72,"vector4",6),new w$Zv(88,"vector4",5)])}]),w$v}(),w$Bv=function(){function w$v(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}w$r(w$v,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$l.VertexPositionNormalColorTexture0SkinTangent=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){this._position=w$v,this._normal=w$l,this._color=w$L,this._textureCoordinate0=w$A,this._textureCoordinate1=w$x,this._tangent=w$m,this._blendIndex=w$Z,this._blendWeight=w$O},w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"blendWeight",function(){return this._blendWeight}),w$G(0,w$l,"color",function(){return this._color}),w$G(0,w$l,"textureCoordinate0",function(){return this._textureCoordinate0}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(0,w$l,"textureCoordinate1",function(){return this._textureCoordinate1}),w$G(0,w$l,"blendIndex",function(){return this._blendIndex}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(100,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector4",1),new w$Zv(40,"vector2",2),new w$Zv(48,"vector2",15),new w$Zv(56,"vector4",7),new w$Zv(72,"vector4",6),new w$Zv(88,"vector3",5)])}]),w$v}(),w$Xv=function(){function w$v(w$v,w$l,w$L,w$A,w$x,w$m){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=w$v,this._normal=w$l,this._color=w$L,this._textureCoordinate0=w$A,this._textureCoordinate1=w$x,this._tangent=w$m}w$r(w$v,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"color",function(){return this._color}),w$G(0,w$l,"textureCoordinate0",function(){return this._textureCoordinate0}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(0,w$l,"textureCoordinate1",function(){return this._textureCoordinate1}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(72,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector4",1),new w$Zv(40,"vector2",2),new w$Zv(48,"vector2",15),new w$Zv(56,"vector4",5)])}]),w$v}(),w$fv=function(){function w$v(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}w$r(w$v,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$l.VertexPositionNormalColorTexture0Tangent=function(w$v,w$l,w$L,w$A,w$x,w$m){this._position=w$v,this._normal=w$l,this._color=w$L,this._textureCoordinate0=w$A,this._textureCoordinate1=w$x,this._tangent=w$m},w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"color",function(){return this._color}),w$G(0,w$l,"textureCoordinate0",function(){return this._textureCoordinate0}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(0,w$l,"textureCoordinate1",function(){return this._textureCoordinate1}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(68,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector4",1),new w$Zv(40,"vector2",2),new w$Zv(48,"vector2",15),new w$Zv(56,"vector3",5)])}]),w$v}(),w$wv=function(){function w$v(w$v,w$l,w$L,w$A,w$x,w$m){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=w$v,this._normal=w$l,this._color=w$L,this._textureCoordinate=w$A,this._blendIndex=w$x,this._blendWeight=w$m}w$r(w$v,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"textureCoordinate",function(){return this._textureCoordinate}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"blendWeight",function(){return this._blendWeight}),w$G(0,w$l,"color",function(){return this._color}),w$G(0,w$l,"blendIndex",function(){return this._blendIndex}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(80,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector4",1),new w$Zv(40,"vector2",2),new w$Zv(48,"vector4",7),new w$Zv(64,"vector4",6)])}]),w$v}(),w$Hv=function(){function w$v(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=w$v,this._normal=w$l,this._color=w$L,this._textureCoordinate=w$A,this._tangent=w$x,this._blendIndex=w$m,this._blendWeight=w$Z}w$r(w$v,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"textureCoordinate",function(){return this._textureCoordinate}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"blendWeight",function(){return this._blendWeight}),w$G(0,w$l,"color",function(){return this._color}),w$G(0,w$l,"blendIndex",function(){return this._blendIndex}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(96,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector4",1),new w$Zv(40,"vector2",2),new w$Zv(48,"vector4",7),new w$Zv(64,"vector4",6),new w$Zv(80,"vector4",5)])}]),w$v}(),w$gv=function(){function w$v(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=w$v,this._normal=w$l,this._color=w$L,this._textureCoordinate=w$A,this._tangent=w$x,this._blendIndex=w$m,this._blendWeight=w$Z}w$r(w$v,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"textureCoordinate",function(){return this._textureCoordinate}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"blendWeight",function(){return this._blendWeight}),w$G(0,w$l,"color",function(){return this._color}),w$G(0,w$l,"blendIndex",function(){return this._blendIndex}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(92,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector4",1),new w$Zv(40,"vector2",2),new w$Zv(48,"vector4",7),new w$Zv(64,"vector4",6),new w$Zv(80,"vector3",5)])}]),w$v}(),w$Tv=function(){function w$v(w$v,w$l,w$L,w$A,w$x){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=w$v,this._normal=w$l,this._color=w$L,this._textureCoordinate=w$A,this._tangent=w$x}w$r(w$v,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"textureCoordinate",function(){return this._textureCoordinate}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"color",function(){return this._color}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(64,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector4",1),new w$Zv(40,"vector2",2),new w$Zv(48,"vector4",5)])}]),w$v}(),w$hv=function(){function w$v(w$v,w$l,w$L,w$A,w$x){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=w$v,this._normal=w$l,this._color=w$L,this._textureCoordinate=w$A,this._tangent=w$x}w$r(w$v,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"textureCoordinate",function(){return this._textureCoordinate}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"color",function(){return this._color}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(60,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector4",1),new w$Zv(40,"vector2",2),new w$Zv(48,"vector3",5)])}]),w$v}(),w$Vv=function(){function w$v(w$v,w$l,w$L){this._position=null,this._normal=null,this._tangent=null,this._position=w$v,this._normal=w$l,this._tangent=w$L}w$r(w$v,"laya.d3.graphics.VertexPositionNormalSTangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(40,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector4",5)])}]),w$v}(),w$kv=function(){function w$v(w$v,w$l,w$L){this._position=null,this._normal=null,this._tangent=null,this._position=w$v,this._normal=w$l,this._tangent=w$L}w$r(w$v,"laya.d3.graphics.VertexPositionNormalTangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(36,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector3",5)])}]),w$v}(),w$Qv=function(){function w$v(w$v,w$l,w$L){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=w$v,this._normal=w$l,this._textureCoordinate=w$L}w$r(w$v,"laya.d3.graphics.VertexPositionNormalTexture");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"textureCoordinate",function(){return this._textureCoordinate}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(32,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector2",2)])}]),w$v}(),w$Mv=function(){function w$v(w$v,w$l,w$L,w$A){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=w$v,this._normal=w$l,this._textureCoordinate0=w$L,this._textureCoordinate1=w$A}w$r(w$v,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"textureCoordinate0",function(){return this._textureCoordinate0}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(0,w$l,"textureCoordinate1",function(){return this._textureCoordinate1}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(40,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector2",2),new w$Zv(32,"vector2",15)])}]),w$v}(),w$Pv=function(){function w$v(w$v,w$l,w$L,w$A,w$x,w$m){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=w$v,this._normal=w$l,this._textureCoordinate0=w$L,this._textureCoordinate1=w$A,this._blendIndex=w$x,this._blendWeight=w$m}w$r(w$v,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"textureCoordinate0",function(){return this._textureCoordinate0}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(0,w$l,"textureCoordinate1",function(){return this._textureCoordinate1}),w$G(0,w$l,"blendIndex",function(){return this._blendIndex}),w$G(0,w$l,"blendWeight",function(){return this._blendWeight}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(72,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector2",2),new w$Zv(32,"vector2",15),new w$Zv(40,"vector4",7),new w$Zv(56,"vector4",6)])}]),w$v}(),w$Iv=function(){function w$v(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=w$v,this._normal=w$l,this._textureCoordinate0=w$L,this._textureCoordinate1=w$A,this._tangent=w$x,this._blendIndex=w$m,this._blendWeight=w$Z}w$r(w$v,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"textureCoordinate0",function(){return this._textureCoordinate0}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(0,w$l,"textureCoordinate1",function(){return this._textureCoordinate1}),w$G(0,w$l,"blendIndex",function(){return this._blendIndex}),w$G(0,w$l,"blendWeight",function(){return this._blendWeight}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(88,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector2",2),new w$Zv(32,"vector2",15),new w$Zv(40,"vector4",7),new w$Zv(56,"vector4",6),new w$Zv(72,"vector4",5)])}]),w$v}(),w$tv=function(){function w$v(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}w$r(w$v,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$l.VertexPositionNormalTexture0SkinTangent=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){this._position=w$v,this._normal=w$l,this._textureCoordinate0=w$L,this._textureCoordinate1=w$A,this._tangent=w$x,this._blendIndex=w$m,this._blendWeight=w$Z},w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"textureCoordinate0",function(){return this._textureCoordinate0}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(0,w$l,"textureCoordinate1",function(){return this._textureCoordinate1}),w$G(0,w$l,"blendIndex",function(){return this._blendIndex}),w$G(0,w$l,"blendWeight",function(){return this._blendWeight}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(84,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector2",2),new w$Zv(32,"vector2",15),new w$Zv(40,"vector4",7),new w$Zv(56,"vector4",6),new w$Zv(72,"vector3",5)])}]),w$v}(),w$av=function(){function w$v(w$v,w$l,w$L,w$A,w$x){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=w$v,this._normal=w$l,this._textureCoordinate0=w$L,this._textureCoordinate1=w$A,this._tangent=w$x}w$r(w$v,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"textureCoordinate0",function(){return this._textureCoordinate0}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(0,w$l,"textureCoordinate1",function(){return this._textureCoordinate1}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(56,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector2",2),new w$Zv(32,"vector2",15),new w$Zv(40,"vector4",5)])}]),w$v}(),w$qv=function(){function w$v(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}w$r(w$v,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$l.VertexPositionNormalTexture0Tangent=function(w$v,w$l,w$L,w$A,w$x){this._position=w$v,this._normal=w$l,this._textureCoordinate0=w$L,this._textureCoordinate1=w$A,this._tangent=w$x},w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"textureCoordinate0",function(){return this._textureCoordinate0}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(0,w$l,"textureCoordinate1",function(){return this._textureCoordinate1}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(52,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector2",2),new w$Zv(32,"vector2",15),new w$Zv(40,"vector3",5)])}]),w$v}(),w$uv=function(){function w$v(w$v,w$l,w$L,w$A,w$x){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=w$v,this._normal=w$l,this._textureCoordinate=w$L,this._blendIndex=w$A,this._blendWeight=w$x}w$r(w$v,"laya.d3.graphics.VertexPositionNormalTextureSkin");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"textureCoordinate",function(){return this._textureCoordinate}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"blendIndex",function(){return this._blendIndex}),w$G(0,w$l,"blendWeight",function(){return this._blendWeight}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(64,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector2",2),new w$Zv(32,"vector4",7),new w$Zv(48,"vector4",6)])}]),w$v}(),w$Rv=function(){function w$v(w$v,w$l,w$L,w$A,w$x,w$m){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=w$v,this._normal=w$l,this._textureCoordinate=w$L,this._tangent=w$A,this._blendIndex=w$x,this._blendWeight=w$m}w$r(w$v,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"textureCoordinate",function(){return this._textureCoordinate}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"blendIndex",function(){return this._blendIndex}),w$G(0,w$l,"blendWeight",function(){return this._blendWeight}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(80,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector2",2),new w$Zv(32,"vector4",7),new w$Zv(48,"vector4",6),new w$Zv(64,"vector4",5)])}]),w$v}(),w$Nv=function(){function w$v(w$v,w$l,w$L,w$A,w$x,w$m){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=w$v,this._normal=w$l,this._textureCoordinate=w$L,this._tangent=w$A,this._blendIndex=w$x,this._blendWeight=w$m}w$r(w$v,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"textureCoordinate",function(){return this._textureCoordinate}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"blendIndex",function(){return this._blendIndex}),w$G(0,w$l,"blendWeight",function(){return this._blendWeight}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(76,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector2",2),new w$Zv(32,"vector4",7),new w$Zv(48,"vector4",6),new w$Zv(64,"vector3",5)])}]),w$v}(),w$bv=function(){function w$v(w$v,w$l,w$L,w$A){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=w$v,this._normal=w$l,this._textureCoordinate=w$L,this._tangent=w$A}w$r(w$v,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"textureCoordinate",function(){return this._textureCoordinate}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(48,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector2",2),new w$Zv(32,"vector4",5)])}]),w$v}(),w$jv=function(){function w$v(w$v,w$l,w$L,w$A){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=w$v,this._normal=w$l,this._textureCoordinate=w$L,this._tangent=w$A}w$r(w$v,"laya.d3.graphics.VertexPositionNormalTextureTangent");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"textureCoordinate",function(){return this._textureCoordinate}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(44,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector2",2),new w$Zv(32,"vector3",5)])}]),w$v}(),w$Fv=function(){function w$v(w$v,w$l,w$L){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=w$v,this._normal=w$l,this._textureCoordinate=w$L}w$r(w$v,"laya.d3.graphics.VertexPositionNTBTexture");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"textureCoordinate",function(){return this._textureCoordinate}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(56,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector3",5),new w$Zv(36,"vector3",4),new w$Zv(48,"vector2",2)])}]),w$v}(),w$pv=function(){function w$v(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=w$v,this._normal=w$l,this._textureCoordinate0=w$A,this._textureCoordinate1=w$x,this._tangent=w$m,w$L=w$L,this._blendIndex=w$Z,this._blendWeight=w$O}w$r(w$v,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"tangent",function(){return this._tangent}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"textureCoordinate0",function(){return this._textureCoordinate0}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(0,w$l,"textureCoordinate1",function(){return this._textureCoordinate1}),w$G(0,w$l,"blendIndex",function(){return this._blendIndex}),w$G(0,w$l,"blendWeight",function(){return this._blendWeight}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(96,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector3",5),new w$Zv(36,"vector3",4),new w$Zv(48,"vector2",2),new w$Zv(56,"vector2",15),new w$Zv(64,"vector4",7),new w$Zv(80,"vector4",6)])}]),w$v}(),w$Yv=function(){function w$v(w$v,w$l,w$L){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=w$v,this._normal=w$l,this._textureCoordinate=w$L}w$r(w$v,"laya.d3.graphics.VertexPositionNTBTextureSkin");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"textureCoordinate",function(){return this._textureCoordinate}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(88,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector3",5),new w$Zv(36,"vector3",4),new w$Zv(48,"vector2",2),new w$Zv(56,"vector4",7),new w$Zv(72,"vector4",6)])}]),w$v}(),w$Dv=(function(){function w$v(w$v,w$l,w$L,w$A){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=w$v,this._normal=w$l,this._textureCoord0=w$L,this._textureCoord1=w$A}w$r(w$v,"laya.d3.graphics.VertexPositionTerrain");var w$l=w$v.prototype;w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"normal",function(){return this._normal}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"textureCoord0",function(){return this._textureCoord0}),w$G(0,w$l,"textureCoord1",function(){return this._textureCoord1}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(40,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector3",3),new w$Zv(24,"vector2",2),new w$Zv(32,"vector2",15)])}])}(),function(){function w$v(w$v,w$l){this._position=null,this._textureCoordinate0=null,this._position=w$v,this._textureCoordinate0=w$l}w$r(w$v,"laya.d3.graphics.VertexPositionTexture0");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"position",function(){return this._position}),w$G(0,w$l,"textureCoordinate0",function(){return this._textureCoordinate0}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(20,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector2",2)])}]),w$v}()),w$Sv=(function(){function w$v(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$,w$_,w$o,w$K,w$r){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=w$v,this._positionStartLifeTime=w$l,this._velocity=w$L,this._startColor=w$A,this._startSize=w$x,this._startRotation0=w$m,this._startRotation1=w$Z,this._startRotation2=w$O,this._startLifeTime=w$e,this._time=w$$,this._startSpeed=w$_,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=w$r}w$r(w$v,"laya.d3.graphics.VertexShurikenParticleBillboard");var w$l=w$v.prototype;w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),w$G(0,w$l,"random1",function(){return this._randoms1}),w$G(0,w$l,"startRotation2",function(){return this._startRotation2}),w$G(0,w$l,"positionStartLifeTime",function(){return this._positionStartLifeTime}),w$G(0,w$l,"velocity",function(){return this._velocity}),w$G(0,w$l,"random0",function(){return this._randoms0}),w$G(0,w$l,"startSize",function(){return this._startSize}),w$G(0,w$l,"startColor",function(){return this._startColor}),w$G(0,w$l,"startRotation0",function(){return this._startRotation0}),w$G(0,w$l,"startRotation1",function(){return this._startRotation1}),w$G(0,w$l,"startLifeTime",function(){return this._startLifeTime}),w$G(0,w$l,"time",function(){return this._time}),w$G(0,w$l,"startSpeed",function(){return this._startSpeed}),w$G(0,w$l,"simulationWorldPostion",function(){return this._simulationWorldPostion}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(152,[new w$Zv(0,"vector4",17),new w$Zv(16,"vector4",30),new w$Zv(32,"vector4",32),new w$Zv(48,"vector4",19),new w$Zv(64,"vector3",20),new w$Zv(76,"vector3",22),new w$Zv(88,"single",31),new w$Zv(92,"vector4",34),new w$Zv(108,"vector4",35),new w$Zv(124,"vector3",36),new w$Zv(136,"vector4",37)])}])}(),function(){function w$v(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$,w$_,w$o,w$K,w$r){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=w$v,this._positionStartLifeTime=w$l,this._velocity=w$L,this._startColor=w$A,this._startSize=w$x,this._startRotation0=w$m,this._startRotation1=w$Z,this._startRotation2=w$O,this._startLifeTime=w$e,this._time=w$$,this._startSpeed=w$_,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=w$r}w$r(w$v,"laya.d3.graphics.VertexShurikenParticleMesh");var w$l=w$v.prototype;w$f.imps(w$l,{"laya.d3.graphics.IVertex":!0}),w$G(0,w$l,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),w$G(0,w$l,"velocity",function(){return this._velocity}),w$G(0,w$l,"position",function(){return this._positionStartLifeTime}),w$G(0,w$l,"random0",function(){return this._randoms0}),w$G(0,w$l,"startSize",function(){return this._startSize}),w$G(0,w$l,"startColor",function(){return this._startColor}),w$G(0,w$l,"startRotation0",function(){return this._startRotation0}),w$G(0,w$l,"startRotation1",function(){return this._startRotation1}),w$G(0,w$l,"random1",function(){return this._randoms1}),w$G(0,w$l,"startRotation2",function(){return this._startRotation2}),w$G(0,w$l,"startLifeTime",function(){return this._startLifeTime}),w$G(0,w$l,"time",function(){return this._time}),w$G(0,w$l,"startSpeed",function(){return this._startSpeed}),w$G(0,w$l,"simulationWorldPostion",function(){return this._simulationWorldPostion}),w$G(0,w$l,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$G(1,w$v,"vertexDeclaration",function(){return w$v._vertexDeclaration}),w$o(w$v,["_vertexDeclaration",function(){return this._vertexDeclaration=new w$mv(172,[new w$Zv(0,"vector3",0),new w$Zv(12,"vector4",1),new w$Zv(28,"vector2",2),new w$Zv(36,"vector4",30),new w$Zv(52,"vector4",32),new w$Zv(68,"vector4",19),new w$Zv(84,"vector3",20),new w$Zv(96,"vector3",22),new w$Zv(108,"single",31),new w$Zv(112,"vector4",34),new w$Zv(128,"vector4",35),new w$Zv(144,"vector3",36),new w$Zv(156,"vector4",37)])}])}(),function(){function w$B(w$v,w$l,w$L,w$A,w$x,w$m){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=w$L,this._materials=w$A,this._subMeshes=w$x,this._materialMap=w$m,this._version=w$l,this._onLoaded(w$v)}w$r(w$B,"laya.d3.loaders.LoadModelV01");var w$v=w$B.prototype;return w$v._onLoaded=function(w$v){this._readData=w$v,this.READ_BLOCK();for(var w$l=0;w$l<this._BLOCK.count;w$l++){var w$L=this._readData.getUint16(),w$A=this._strings[w$L],w$x=this["READ_"+w$A];if(null==w$x)throw new Error("model file err,no this function:"+w$L+" "+w$A);if(!w$x.call(this))break}return this._mesh},w$v.onError=function(){},w$v._readString=function(){return this._strings[this._readData.getUint16()]},w$v.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},w$v.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},w$v.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var w$v=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var w$l=0;w$l<this._STRINGS.size;w$l++)this._strings[w$l]=this._readData.readUTFString();return this._readData.pos=w$v,!0},w$v.READ_MATERIAL=function(){var w$v=this._readData.getUint16(),w$l=(this._readString(),this._readString());return this._materials[w$v]="null"!==w$l?w$C.getRes(this._materialMap[w$l]):new w$kl,!0},w$v.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var w$v,w$l=this._readData.__getBuffer(),w$L=0,w$A=this._readData.getUint32(),w$x=this._readData.getUint32(),w$m=(new Float32Array(w$l.slice(w$A+this._DATA.offset,w$A+this._DATA.offset+w$x)),this._readData.getUint32()),w$Z=this._readData.getUint32(),w$O=new Float32Array(w$l.slice(w$m+this._DATA.offset,w$m+this._DATA.offset+w$Z));for(this.mesh._inverseBindPoses=[],w$L=0,w$v=w$O.length;w$L<w$v;w$L+=16){var w$e=new w$vl(w$O[w$L+0],w$O[w$L+1],w$O[w$L+2],w$O[w$L+3],w$O[w$L+4],w$O[w$L+5],w$O[w$L+6],w$O[w$L+7],w$O[w$L+8],w$O[w$L+9],w$O[w$L+10],w$O[w$L+11],w$O[w$L+12],w$O[w$L+13],w$O[w$L+14],w$O[w$L+15]);this.mesh._inverseBindPoses.push(w$e)}break;default:throw new Error("LoadModel:unknown version.")}return!0},w$v.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var w$v=this._readString();this._shaderAttributes=w$v.match(w$B._attrReg);var w$l=this._readData.getUint32(),w$L=this._readData.getUint32(),w$A=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),w$x=this._readData.getUint32(),w$m=this._readData.getUint32(),w$Z=this._readData.getUint32(),w$O=this._readData.__getBuffer(),w$e=new w$$l(this._mesh),w$$=this._getVertexDeclaration(),w$_=w$Nl.create(w$$,w$x/w$$.vertexStride,35044,!0),w$o=w$A+this._DATA.offset,w$K=w$O.slice(w$o,w$o+w$x);w$_.setData(new Float32Array(w$K));for(var w$r=(w$e._vertexBuffer=w$_).vertexDeclaration.getVertexElements(),w$G=0;w$G<w$r.length;w$G++)w$e._bufferUsage[w$r[w$G].elementUsage]=w$_;var w$c=w$Rl.create("ushort",w$L/2,35044,!0),w$d=w$l+this._DATA.offset,w$C=w$O.slice(w$d,w$d+w$L);w$c.setData(new Uint16Array(w$C)),w$e._indexBuffer=w$c;var w$J=w$O.slice(w$m+this._DATA.offset,w$m+this._DATA.offset+w$Z);return w$e._boneIndicesList[0]=new Uint8Array(w$J),this._subMeshes.push(w$e),!0},w$v.READ_DATAAREA=function(){return!1},w$v._getVertexDeclaration=function(){for(var w$v,w$l=!1,w$L=!1,w$A=!1,w$x=!1,w$m=!1,w$Z=!1,w$O=!1,w$e=!1,w$$=!1,w$_=0;w$_<this._shaderAttributes.length;w$_+=8)switch(this._shaderAttributes[w$_]){case"POSITION":w$l=!0;break;case"NORMAL":w$L=!0;break;case"COLOR":w$A=!0;break;case"UV":w$x=!0;break;case"UV1":w$m=!0;break;case"BLENDWEIGHT":w$O=!0;break;case"BLENDINDICES":w$e=!0;break;case"TANGENT":w$Z=!0;break;case"BINORMAL":w$$=!0}return w$l&&w$L&&w$A&&w$x&&w$m&&w$O&&w$e&&w$Z?w$v=w$Bv.vertexDeclaration:w$l&&w$L&&w$A&&w$x&&w$m&&w$O&&w$e?w$v=w$Cv.vertexDeclaration:w$l&&w$L&&w$x&&w$m&&w$O&&w$e&&w$Z?w$v=w$tv.vertexDeclaration:w$l&&w$L&&w$x&&w$m&&w$O&&w$e?w$v=w$Pv.vertexDeclaration:w$l&&w$L&&w$A&&w$x&&w$O&&w$e&&w$Z?w$v=w$gv.vertexDeclaration:w$l&&w$L&&w$A&&w$x&&w$O&&w$e?w$v=w$wv.vertexDeclaration:w$l&&w$L&&w$Z&&w$$&&w$x&&w$O&&w$e?w$v=w$Yv.vertexDeclaration:w$l&&w$L&&w$x&&w$O&&w$e&&w$Z?w$v=w$Nv.vertexDeclaration:w$l&&w$L&&w$x&&w$O&&w$e?w$v=w$uv.vertexDeclaration:w$l&&w$L&&w$A&&w$O&&w$e&&w$Z?w$v=w$Kv.vertexDeclaration:w$l&&w$L&&w$A&&w$O&&w$e?w$v=w$_v.vertexDeclaration:w$l&&w$L&&w$A&&w$x&&w$m&&w$Z?w$v=w$fv.vertexDeclaration:w$l&&w$L&&w$A&&w$x&&w$m?w$v=w$dv.vertexDeclaration:w$l&&w$L&&w$x&&w$m&&w$Z?w$v=w$qv.vertexDeclaration:w$l&&w$L&&w$x&&w$m?w$v=w$Mv.vertexDeclaration:w$l&&w$L&&w$A&&w$x&&w$Z?w$v=w$hv.vertexDeclaration:w$l&&w$L&&w$x&&w$Z&&w$$?w$v=w$Fv.vertexDeclaration:w$l&&w$L&&w$A&&w$x?w$v=w$cv.vertexDeclaration:w$l&&w$L&&w$x&&w$Z?w$v=w$jv.vertexDeclaration:w$l&&w$L&&w$x?w$v=w$Qv.vertexDeclaration:w$l&&w$L&&w$A&&w$Z?w$v=w$Gv.vertexDeclaration:w$l&&w$L&&w$A&&(w$v=w$$v.vertexDeclaration),w$v},w$G(0,w$v,"mesh",function(){return this._mesh}),w$B._attrReg=new RegExp("(\\w+)|([:,;])","g"),w$B}()),w$yv=function(){function w$H(){}return w$r(w$H,"laya.d3.loaders.LoadModelV02"),w$H.parse=function(w$v,w$l,w$L,w$A,w$x,w$m){w$H._mesh=w$L,w$H._materials=w$A,w$H._subMeshes=w$x,w$H._materialMap=w$m,w$H._version=w$l,w$H._readData=w$v,w$H.READ_DATA(),w$H.READ_BLOCK(),w$H.READ_STRINGS();for(var w$Z=0,w$O=w$H._BLOCK.count;w$Z<w$O;w$Z++){w$H._readData.pos=w$H._BLOCK.blockStarts[w$Z];var w$e=w$H._readData.getUint16(),w$$=w$H._strings[w$e],w$_=w$H["READ_"+w$$];if(null==w$_)throw new Error("model file err,no this function:"+w$e+" "+w$$);w$_.call()}w$H._strings.length=0,w$H._readData=null,w$H._version=null,w$H._mesh=null,w$H._materials=null,w$H._subMeshes=null,w$H._materialMap=null},w$H._readString=function(){return w$H._strings[w$H._readData.getUint16()]},w$H.READ_DATA=function(){w$H._DATA.offset=w$H._readData.getUint32(),w$H._DATA.size=w$H._readData.getUint32()},w$H.READ_BLOCK=function(){for(var w$v=w$H._BLOCK.count=w$H._readData.getUint16(),w$l=w$H._BLOCK.blockStarts=[],w$L=w$H._BLOCK.blockLengths=[],w$A=0;w$A<w$v;w$A++)w$l.push(w$H._readData.getUint32()),w$L.push(w$H._readData.getUint32())},w$H.READ_STRINGS=function(){var w$v=w$H._readData.getUint32(),w$l=w$H._readData.getUint16(),w$L=w$H._readData.pos;w$H._readData.pos=w$v+w$H._DATA.offset;for(var w$A=0;w$A<w$l;w$A++)w$H._strings[w$A]=w$H._readData.readUTFString();w$H._readData.pos=w$L},w$H.READ_MATERIAL=function(){w$H._readString(),w$H._readString();var w$v=w$H._readString();return""!==w$v&&w$H._materials.push(w$C.getRes(w$H._materialMap[w$v])),!0},w$H.READ_MESH=function(){w$H._readString();var w$v,w$l=w$H._readData.__getBuffer(),w$L=0,w$A=w$H._readData.getInt16(),w$x=w$H._DATA.offset;for(w$L=0;w$L<w$A;w$L++){var w$m=w$x+w$H._readData.getUint32(),w$Z=w$H._readData.getUint32(),w$O=new Float32Array(w$l.slice(w$m,w$m+w$Z)),w$e=w$H._readString().match(w$H._attrReg),w$$=w$H._getVertexDeclaration(w$e),w$_=w$Nl.create(w$$,4*w$O.length/w$$.vertexStride,35044,!0);w$_.setData(w$O),w$H._mesh._vertexBuffers.push(w$_)}var w$o=w$x+w$H._readData.getUint32(),w$K=w$H._readData.getUint32(),w$r=new Uint16Array(w$l.slice(w$o,w$o+w$K)),w$G=w$Rl.create("ushort",w$K/2,35044,!0);w$G.setData(w$r),w$H._mesh._indexBuffer=w$G;var w$c=w$H._mesh._boneNames=[],w$d=w$H._readData.getUint16();for(w$c.length=w$d,w$L=0;w$L<w$d;w$L++)w$c[w$L]=w$H._strings[w$H._readData.getUint16()];var w$C=w$H._readData.getUint32(),w$J=w$H._readData.getUint32(),w$B=(new Float32Array(w$l.slice(w$x+w$C,w$x+w$C+w$J)),w$H._readData.getUint32()),w$X=w$H._readData.getUint32(),w$f=new Float32Array(w$l.slice(w$x+w$B,w$x+w$B+w$X));for(w$H._mesh._inverseBindPoses=[],w$L=0,w$v=w$f.length;w$L<w$v;w$L+=16){var w$w=new w$vl(w$f[w$L+0],w$f[w$L+1],w$f[w$L+2],w$f[w$L+3],w$f[w$L+4],w$f[w$L+5],w$f[w$L+6],w$f[w$L+7],w$f[w$L+8],w$f[w$L+9],w$f[w$L+10],w$f[w$L+11],w$f[w$L+12],w$f[w$L+13],w$f[w$L+14],w$f[w$L+15]);w$H._mesh._inverseBindPoses.push(w$w)}return w$H._mesh._skinnedDatas=new Float32Array(16*w$f.length),!0},w$H.READ_SUBMESH=function(){var w$v=w$H._readData.__getBuffer(),w$l=new w$$l(w$H._mesh),w$L=w$H._readData.getInt16(),w$A=w$H._readData.getUint32(),w$x=w$H._readData.getUint32();w$l._vertexBuffer=w$H._mesh._vertexBuffers[w$L],w$l._vertexStart=w$A,w$l._vertexCount=w$x;var w$m=w$H._readData.getUint32(),w$Z=w$H._readData.getUint32(),w$O=w$H._mesh._indexBuffer;w$l._indexBuffer=w$O,w$l._indexStart=w$m,w$l._indexCount=w$Z,w$l._indices=new Uint16Array(w$O.getData().buffer,2*w$m,w$Z);var w$e=w$H._DATA.offset,w$$=w$l._subIndexBufferStart,w$_=w$l._subIndexBufferCount,w$o=w$l._boneIndicesList,w$K=w$H._readData.getUint16();w$$.length=w$K,w$_.length=w$K,w$o.length=w$K;for(var w$r=0;w$r<w$K;w$r++){w$$[w$r]=w$H._readData.getUint32(),w$_[w$r]=w$H._readData.getUint32();var w$G=w$H._readData.getUint32(),w$c=w$H._readData.getUint32();w$l._boneIndicesList[w$r]=new Uint8Array(w$v.slice(w$e+w$G,w$e+w$G+w$c))}return w$H._subMeshes.push(w$l),!0},w$H._getVertexDeclaration=function(w$v){for(var w$l,w$L=!1,w$A=!1,w$x=!1,w$m=!1,w$Z=!1,w$O=!1,w$e=!1,w$$=!1,w$_=!1,w$o=0;w$o<w$v.length;w$o++)switch(w$v[w$o]){case"POSITION":w$L=!0;break;case"NORMAL":w$A=!0;break;case"COLOR":w$x=!0;break;case"UV":w$m=!0;break;case"UV1":w$Z=!0;break;case"BLENDWEIGHT":w$e=!0;break;case"BLENDINDICES":w$$=!0;break;case"TANGENT":w$O=!0;break;case"BINORMAL":w$_=!0}return w$L&&w$A&&w$x&&w$m&&w$Z&&w$e&&w$$&&w$O?w$l=w$Bv.vertexDeclaration:w$L&&w$A&&w$x&&w$m&&w$Z&&w$e&&w$$?w$l=w$Cv.vertexDeclaration:w$L&&w$A&&w$m&&w$Z&&w$e&&w$$&&w$O?w$l=w$tv.vertexDeclaration:w$L&&w$A&&w$m&&w$Z&&w$e&&w$$?w$l=w$Pv.vertexDeclaration:w$L&&w$A&&w$x&&w$m&&w$e&&w$$&&w$O?w$l=w$gv.vertexDeclaration:w$L&&w$A&&w$x&&w$m&&w$e&&w$$?w$l=w$wv.vertexDeclaration:w$L&&w$A&&w$m&&w$e&&w$$&&w$O?w$l=w$Nv.vertexDeclaration:w$L&&w$A&&w$m&&w$e&&w$$?w$l=w$uv.vertexDeclaration:w$L&&w$A&&w$x&&w$e&&w$$&&w$O?w$l=w$Kv.vertexDeclaration:w$L&&w$A&&w$x&&w$e&&w$$?w$l=w$_v.vertexDeclaration:w$L&&w$A&&w$x&&w$m&&w$Z&&w$O?w$l=w$fv.vertexDeclaration:w$L&&w$A&&w$x&&w$m&&w$Z?w$l=w$dv.vertexDeclaration:w$L&&w$A&&w$m&&w$Z&&w$O?w$l=w$qv.vertexDeclaration:w$L&&w$A&&w$m&&w$Z?w$l=w$Mv.vertexDeclaration:w$L&&w$A&&w$x&&w$m&&w$O?w$l=w$hv.vertexDeclaration:w$L&&w$A&&w$m&&w$O&&w$_?w$l=w$Fv.vertexDeclaration:w$L&&w$A&&w$x&&w$m?w$l=w$cv.vertexDeclaration:w$L&&w$A&&w$m&&w$O?w$l=w$jv.vertexDeclaration:w$L&&w$A&&w$m?w$l=w$Qv.vertexDeclaration:w$L&&w$A&&w$x&&w$O?w$l=w$Gv.vertexDeclaration:w$L&&w$A&&w$x&&(w$l=w$$v.vertexDeclaration),w$l},w$H._attrReg=new RegExp("(\\w+)|([:,;])","g"),w$H._strings=[],w$H._readData=null,w$H._version=null,w$H._mesh=null,w$H._materials=null,w$H._subMeshes=null,w$H._materialMap=null,w$o(w$H,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),w$H}(),w$Wv=function(){function w$w(){}return w$r(w$w,"laya.d3.loaders.LoadModelV03"),w$w.parse=function(w$v,w$l,w$L,w$A,w$x){w$w._mesh=w$L,w$w._subMeshes=w$A,w$w._materialMap=w$x,w$w._version=w$l,w$w._readData=w$v,w$w.READ_DATA(),w$w.READ_BLOCK(),w$w.READ_STRINGS();for(var w$m=0,w$Z=w$w._BLOCK.count;w$m<w$Z;w$m++){w$w._readData.pos=w$w._BLOCK.blockStarts[w$m];var w$O=w$w._readData.getUint16(),w$e=w$w._strings[w$O],w$$=w$w["READ_"+w$e];if(null==w$$)throw new Error("model file err,no this function:"+w$O+" "+w$e);w$$.call()}w$w._strings.length=0,w$w._readData=null,w$w._version=null,w$w._mesh=null,w$w._subMeshes=null,w$w._materialMap=null},w$w._readString=function(){return w$w._strings[w$w._readData.getUint16()]},w$w.READ_DATA=function(){w$w._DATA.offset=w$w._readData.getUint32(),w$w._DATA.size=w$w._readData.getUint32()},w$w.READ_BLOCK=function(){for(var w$v=w$w._BLOCK.count=w$w._readData.getUint16(),w$l=w$w._BLOCK.blockStarts=[],w$L=w$w._BLOCK.blockLengths=[],w$A=0;w$A<w$v;w$A++)w$l.push(w$w._readData.getUint32()),w$L.push(w$w._readData.getUint32())},w$w.READ_STRINGS=function(){var w$v=w$w._readData.getUint32(),w$l=w$w._readData.getUint16(),w$L=w$w._readData.pos;w$w._readData.pos=w$v+w$w._DATA.offset;for(var w$A=0;w$A<w$l;w$A++)w$w._strings[w$A]=w$w._readData.readUTFString();w$w._readData.pos=w$L},w$w.READ_MESH=function(){var w$v,w$l=w$w._readString(),w$L=w$w._readData.__getBuffer(),w$A=0,w$x=w$w._readData.getInt16(),w$m=w$w._DATA.offset;for(w$A=0;w$A<w$x;w$A++){var w$Z,w$O=w$m+w$w._readData.getUint32(),w$e=w$w._readData.getUint32(),w$$=new Float32Array(w$L.slice(w$O,w$O+w$e)),w$_=w$w._readString();switch(w$w._version){case"LAYAMODEL:03":w$Z=w$w._vertexDeclarationMap_Discard[w$_];break;case"LAYAMODEL:0301":w$Z=w$w._vertexDeclarationMap[w$_];break;default:throw new Error("LoadModelV03: unknown version.")}if(!w$Z)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+w$w._version+"  bufferAttribute="+w$_+"  name="+w$l+"  url="+(w$w._mesh?w$w._mesh.url:"null"));var w$o=w$Nl.create(w$Z,4*w$$.length/w$Z.vertexStride,35044,!0,w$w._mesh._url+"_"+w$A);w$o.setData(w$$),w$w._mesh._vertexBuffers.push(w$o)}var w$K=w$m+w$w._readData.getUint32(),w$r=w$w._readData.getUint32(),w$G=new Uint16Array(w$L.slice(w$K,w$K+w$r)),w$c=w$Rl.create("ushort",w$r/2,35044,!0,w$w._mesh._url);w$c.setData(w$G),w$w._mesh._indexBuffer=w$c;var w$d=w$w._mesh._boneNames=[],w$C=w$w._readData.getUint16();for(w$d.length=w$C,w$A=0;w$A<w$C;w$A++)w$d[w$A]=w$w._strings[w$w._readData.getUint16()];w$w._readData.pos+=8;var w$J=w$w._readData.getUint32(),w$B=w$w._readData.getUint32(),w$X=new Float32Array(w$L.slice(w$m+w$J,w$m+w$J+w$B));for(w$w._mesh._inverseBindPoses=[],w$A=0,w$v=w$X.length;w$A<w$v;w$A+=16){var w$f=new w$vl(w$X[w$A+0],w$X[w$A+1],w$X[w$A+2],w$X[w$A+3],w$X[w$A+4],w$X[w$A+5],w$X[w$A+6],w$X[w$A+7],w$X[w$A+8],w$X[w$A+9],w$X[w$A+10],w$X[w$A+11],w$X[w$A+12],w$X[w$A+13],w$X[w$A+14],w$X[w$A+15]);w$w._mesh._inverseBindPoses.push(w$f)}return w$w._mesh._skinnedDatas=new Float32Array(16*w$X.length),!0},w$w.READ_SUBMESH=function(){var w$v=w$w._readData.__getBuffer(),w$l=new w$$l(w$w._mesh),w$L=w$w._readData.getInt16(),w$A=w$w._readData.getUint32(),w$x=w$w._readData.getUint32();w$l._vertexBuffer=w$w._mesh._vertexBuffers[w$L],w$l._vertexStart=w$A,w$l._vertexCount=w$x;var w$m=w$w._readData.getUint32(),w$Z=w$w._readData.getUint32(),w$O=w$w._mesh._indexBuffer;w$l._indexBuffer=w$O,w$l._indexStart=w$m,w$l._indexCount=w$Z,w$l._indices=new Uint16Array(w$O.getData().buffer,2*w$m,w$Z);var w$e=w$w._DATA.offset,w$$=w$l._subIndexBufferStart,w$_=w$l._subIndexBufferCount,w$o=w$l._boneIndicesList,w$K=w$w._readData.getUint16();w$$.length=w$K,w$_.length=w$K,w$o.length=w$K;for(var w$r=0;w$r<w$K;w$r++){w$$[w$r]=w$w._readData.getUint32(),w$_[w$r]=w$w._readData.getUint32();var w$G=w$w._readData.getUint32(),w$c=w$w._readData.getUint32();w$o[w$r]=new Uint8Array(w$v.slice(w$e+w$G,w$e+w$G+w$c))}return w$w._subMeshes.push(w$l),!0},w$w._strings=[],w$w._readData=null,w$w._version=null,w$w._mesh=null,w$w._subMeshes=null,w$w._materialMap=null,w$o(w$w,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":w$Bv.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":w$Cv.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":w$pv.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":w$tv.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":w$Pv.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":w$gv.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":w$wv.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":w$Nv.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":w$uv.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":w$Kv.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":w$_v.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":w$fv.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":w$dv.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":w$qv.vertexDeclaration,"POSITION,NORMAL,UV,UV1":w$Mv.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":w$hv.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":w$Fv.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":w$cv.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":w$jv.vertexDeclaration,"POSITION,NORMAL,UV":w$Qv.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":w$Gv.vertexDeclaration,"POSITION,NORMAL,COLOR":w$$v.vertexDeclaration,"POSITION,NORMAL,TANGENT":w$kv.vertexDeclaration,"POSITION,NORMAL":w$ev.vertexDeclaration,"POSITION,UV":w$Dv.vertexDeclaration,POSITION:w$Ov.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":w$Jv.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":w$Cv.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":w$pv.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":w$Iv.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":w$Pv.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":w$Hv.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":w$wv.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":w$Rv.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":w$uv.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":w$ov.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":w$_v.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":w$Xv.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":w$dv.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":w$av.vertexDeclaration,"POSITION,NORMAL,UV,UV1":w$Mv.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":w$Tv.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":w$Fv.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":w$cv.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":w$bv.vertexDeclaration,"POSITION,NORMAL,UV":w$Qv.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":w$rv.vertexDeclaration,"POSITION,NORMAL,COLOR":w$$v.vertexDeclaration,"POSITION,NORMAL,TANGENT":w$Vv.vertexDeclaration,"POSITION,NORMAL":w$ev.vertexDeclaration,"POSITION,UV":w$Dv.vertexDeclaration,POSITION:w$Ov.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),w$w}(),w$Ev=function(){function w$O(){}return w$r(w$O,"laya.d3.loaders.MeshReader"),w$O.read=function(w$v,w$l,w$L,w$A,w$x){var w$m=new w$w(w$v);w$m.pos=0;var w$Z=w$m.readUTFString();switch(w$Z){case"LAYAMODEL:01":case"LAYASKINANI:01":w$O._readVersion01(w$m,w$Z,w$l,w$L,w$A,w$x);break;case"LAYAMODEL:02":w$yv.parse(w$m,w$Z,w$l,w$L,w$A,w$x);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":w$Wv.parse(w$m,w$Z,w$l,w$A,w$x);break;default:throw new Error("MeshReader: unknown mesh version.")}w$l._setSubMeshes(w$A)},w$O._readVersion01=function(w$v,w$l,w$L,w$A,w$x,w$m){new w$Sv(w$v,w$l,w$L,w$A,w$x,w$m)},w$O}(),w$sv=function(){function w$v(w$v,w$l){this.min=null,this.max=null,this.min=w$v,this.max=w$l}w$r(w$v,"laya.d3.math.BoundBox");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.core.IClone":!0}),w$l.getCorners=function(w$v){w$v.length=8;var w$l=this.min.elements,w$L=this.max.elements,w$A=w$l[0],w$x=w$l[1],w$m=w$l[2],w$Z=w$L[0],w$O=w$L[1],w$e=w$L[2];w$v[0]=new w$Zl(w$A,w$O,w$e),w$v[1]=new w$Zl(w$Z,w$O,w$e),w$v[2]=new w$Zl(w$Z,w$x,w$e),w$v[3]=new w$Zl(w$A,w$x,w$e),w$v[4]=new w$Zl(w$A,w$O,w$m),w$v[5]=new w$Zl(w$Z,w$O,w$m),w$v[6]=new w$Zl(w$Z,w$x,w$m),w$v[7]=new w$Zl(w$A,w$x,w$m)},w$l.toDefault=function(){this.min.toDefault(),this.max.toDefault()},w$l.cloneTo=function(w$v){var w$l=w$v;this.min.cloneTo(w$l.min),this.max.cloneTo(w$l.max)},w$l.clone=function(){var w$v=new this.constructor(new w$Zl,new w$Zl);return this.cloneTo(w$v),w$v},w$v.createfromPoints=function(w$v,w$l){if(null==w$v)throw new Error("points");var w$L=w$l.min,w$A=w$l.max,w$x=w$L.elements;w$x[0]=Number.MAX_VALUE,w$x[1]=Number.MAX_VALUE,w$x[2]=Number.MAX_VALUE;var w$m=w$A.elements;w$m[0]=-Number.MAX_VALUE,w$m[1]=-Number.MAX_VALUE,w$m[2]=-Number.MAX_VALUE;for(var w$Z=0,w$O=w$v.length;w$Z<w$O;++w$Z)w$Zl.min(w$L,w$v[w$Z],w$L),w$Zl.max(w$A,w$v[w$Z],w$A)},w$v.merge=function(w$v,w$l,w$L){w$Zl.min(w$v.min,w$l.min,w$L.min),w$Zl.max(w$v.max,w$l.max,w$L.max)},w$v}(),w$iv=function(){function w$$(w$v){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=w$v,this._near=new w$ll(new w$Zl),this._far=new w$ll(new w$Zl),this._left=new w$ll(new w$Zl),this._right=new w$ll(new w$Zl),this._top=new w$ll(new w$Zl),this._bottom=new w$ll(new w$Zl),w$$._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}w$r(w$$,"laya.d3.math.BoundFrustum");var w$v=w$$.prototype;return w$v.equalsBoundFrustum=function(w$v){return this._matrix.equalsOtherMatrix(w$v.matrix)},w$v.equalsObj=function(w$v){if(w$v instanceof laya.d3.math.BoundFrustum){var w$l=w$v;return this.equalsBoundFrustum(w$l)}return!1},w$v.getPlane=function(w$v){switch(w$v){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},w$v.getCorners=function(w$v){w$$._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(w$v[0]),w$$._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(w$v[1]),w$$._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(w$v[2]),w$$._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(w$v[3]),w$$._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(w$v[4]),w$$._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(w$v[5]),w$$._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(w$v[6]),w$$._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(w$v[7])},w$v.containsPoint=function(w$v){for(var w$l=w$ll.PlaneIntersectionType_Front,w$L=w$ll.PlaneIntersectionType_Front,w$A=0;w$A<6;w$A++){switch(w$A){case 0:w$L=Collision.intersectsPlaneAndPoint(this._near,w$v);break;case 1:w$L=Collision.intersectsPlaneAndPoint(this._far,w$v);break;case 2:w$L=Collision.intersectsPlaneAndPoint(this._left,w$v);break;case 3:w$L=Collision.intersectsPlaneAndPoint(this._right,w$v);break;case 4:w$L=Collision.intersectsPlaneAndPoint(this._top,w$v);break;case 5:w$L=Collision.intersectsPlaneAndPoint(this._bottom,w$v)}switch(w$L){case w$ll.PlaneIntersectionType_Back:return 0;case w$ll.PlaneIntersectionType_Intersecting:w$l=w$ll.PlaneIntersectionType_Intersecting}}switch(w$l){case w$ll.PlaneIntersectionType_Intersecting:return 2;default:return 1}},w$v.containsBoundBox=function(w$v){for(var w$l,w$L=w$$._tempV30,w$A=w$$._tempV31,w$x=1,w$m=0;w$m<6;w$m++){if(w$l=this.getPlane(w$m),this._getBoxToPlanePVertexNVertex(w$v,w$l.normal,w$L,w$A),Collision.intersectsPlaneAndPoint(w$l,w$L)===w$ll.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(w$l,w$A)===w$ll.PlaneIntersectionType_Back&&(w$x=2)}return w$x},w$v.containsBoundSphere=function(w$v){for(var w$l=w$ll.PlaneIntersectionType_Front,w$L=w$ll.PlaneIntersectionType_Front,w$A=0;w$A<6;w$A++){switch(w$A){case 0:w$L=Collision.intersectsPlaneAndSphere(this._near,w$v);break;case 1:w$L=Collision.intersectsPlaneAndSphere(this._far,w$v);break;case 2:w$L=Collision.intersectsPlaneAndSphere(this._left,w$v);break;case 3:w$L=Collision.intersectsPlaneAndSphere(this._right,w$v);break;case 4:w$L=Collision.intersectsPlaneAndSphere(this._top,w$v);break;case 5:w$L=Collision.intersectsPlaneAndSphere(this._bottom,w$v)}switch(w$L){case w$ll.PlaneIntersectionType_Back:return 0;case w$ll.PlaneIntersectionType_Intersecting:w$l=w$ll.PlaneIntersectionType_Intersecting}}switch(w$l){case w$ll.PlaneIntersectionType_Intersecting:return 2;default:return 1}},w$v._getBoxToPlanePVertexNVertex=function(w$v,w$l,w$L,w$A){var w$x=w$v.min,w$m=w$x.elements,w$Z=w$v.max,w$O=w$Z.elements,w$e=w$l.elements,w$$=w$e[0],w$_=w$e[1],w$o=w$e[2];w$x.cloneTo(w$L);var w$K=w$L.elements;0<=w$$&&(w$K[0]=w$O[0]),0<=w$_&&(w$K[1]=w$O[1]),0<=w$o&&(w$K[2]=w$O[2]),w$Z.cloneTo(w$A);var w$r=w$A.elements;0<=w$$&&(w$r[0]=w$m[0]),0<=w$_&&(w$r[1]=w$m[1]),0<=w$o&&(w$r[2]=w$m[2])},w$G(0,w$v,"top",function(){return this._top}),w$G(0,w$v,"matrix",function(){return this._matrix},function(w$v){this._matrix=w$v,w$$._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),w$G(0,w$v,"near",function(){return this._near}),w$G(0,w$v,"far",function(){return this._far}),w$G(0,w$v,"left",function(){return this._left}),w$G(0,w$v,"right",function(){return this._right}),w$G(0,w$v,"bottom",function(){return this._bottom}),w$$._getPlanesFromMatrix=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){var w$O=w$v.elements,w$e=w$O[0],w$$=w$O[1],w$_=w$O[2],w$o=w$O[3],w$K=w$O[4],w$r=w$O[5],w$G=w$O[6],w$c=w$O[7],w$d=w$O[8],w$C=w$O[9],w$J=w$O[10],w$B=w$O[11],w$X=w$O[12],w$f=w$O[13],w$w=w$O[14],w$H=w$O[15],w$g=w$l.normal.elements;w$g[0]=w$o+w$_,w$g[1]=w$c+w$G,w$g[2]=w$B+w$J,w$l.distance=w$H+w$w,w$l.normalize();var w$T=w$L.normal.elements;w$T[0]=w$o-w$_,w$T[1]=w$c-w$G,w$T[2]=w$B-w$J,w$L.distance=w$H-w$w,w$L.normalize();var w$h=w$A.normal.elements;w$h[0]=w$o+w$e,w$h[1]=w$c+w$K,w$h[2]=w$B+w$d,w$A.distance=w$H+w$X,w$A.normalize();var w$V=w$x.normal.elements;w$V[0]=w$o-w$e,w$V[1]=w$c-w$K,w$V[2]=w$B-w$d,w$x.distance=w$H-w$X,w$x.normalize();var w$k=w$m.normal.elements;w$k[0]=w$o-w$$,w$k[1]=w$c-w$r,w$k[2]=w$B-w$C,w$m.distance=w$H-w$f,w$m.normalize();var w$Q=w$Z.normal.elements;w$Q[0]=w$o+w$$,w$Q[1]=w$c+w$r,w$Q[2]=w$B+w$C,w$Z.distance=w$H+w$f,w$Z.normalize()},w$$._get3PlaneInterPoint=function(w$v,w$l,w$L){var w$A=w$v.normal,w$x=w$l.normal,w$m=w$L.normal;w$Zl.cross(w$x,w$m,w$$._tempV30),w$Zl.cross(w$m,w$A,w$$._tempV31),w$Zl.cross(w$A,w$x,w$$._tempV32);var w$Z=w$Zl.dot(w$A,w$$._tempV30),w$O=w$Zl.dot(w$x,w$$._tempV31),w$e=w$Zl.dot(w$m,w$$._tempV32);return w$Zl.scale(w$$._tempV30,-w$v.distance/w$Z,w$$._tempV33),w$Zl.scale(w$$._tempV31,-w$l.distance/w$O,w$$._tempV34),w$Zl.scale(w$$._tempV32,-w$L.distance/w$e,w$$._tempV35),w$Zl.add(w$$._tempV33,w$$._tempV34,w$$._tempV36),w$Zl.add(w$$._tempV35,w$$._tempV36,w$$._tempV37),w$$._tempV37},w$o(w$$,["_tempV30",function(){return this._tempV30=new w$Zl},"_tempV31",function(){return this._tempV31=new w$Zl},"_tempV32",function(){return this._tempV32=new w$Zl},"_tempV33",function(){return this._tempV33=new w$Zl},"_tempV34",function(){return this._tempV34=new w$Zl},"_tempV35",function(){return this._tempV35=new w$Zl},"_tempV36",function(){return this._tempV36=new w$Zl},"_tempV37",function(){return this._tempV37=new w$Zl}]),w$$}(),w$nv=function(){function w$_(w$v,w$l){this.center=null,this.radius=NaN,this.center=w$v,this.radius=w$l}w$r(w$_,"laya.d3.math.BoundSphere");var w$v=w$_.prototype;return w$f.imps(w$v,{"laya.d3.core.IClone":!0}),w$v.toDefault=function(){this.center.toDefault(),this.radius=0},w$v.intersectsRayDistance=function(w$v){return Collision.intersectsRayAndSphereRD(w$v,this)},w$v.intersectsRayPoint=function(w$v,w$l){return Collision.intersectsRayAndSphereRP(w$v,this,w$l)},w$v.cloneTo=function(w$v){var w$l=w$v;this.center.cloneTo(w$l.center),w$l.radius=this.radius},w$v.clone=function(){var w$v=new this.constructor(new w$Zl,new w$Zl);return this.cloneTo(w$v),w$v},w$_.createFromSubPoints=function(w$v,w$l,w$L,w$A){if(null==w$v)throw new Error("points");if(w$l<0||w$l>=w$v.length)throw new Error("start"+w$l+"Must be in the range [0, "+(w$v.length-1)+"]");if(w$L<0||w$l+w$L>w$v.length)throw new Error("count"+w$L+"Must be in the range <= "+w$v.length+"}");var w$x=w$l+w$L,w$m=w$_._tempVector3;w$m.elements[0]=0,w$m.elements[1]=0,w$m.elements[2]=0;for(var w$Z=w$l;w$Z<w$x;++w$Z)w$Zl.add(w$v[w$Z],w$m,w$m);var w$O=w$A.center;w$Zl.scale(w$m,1/w$L,w$O);var w$e=0;for(w$Z=w$l;w$Z<w$x;++w$Z){var w$$=w$Zl.distanceSquared(w$O,w$v[w$Z]);w$e<w$$&&(w$e=w$$)}w$A.radius=Math.sqrt(w$e)},w$_.createfromPoints=function(w$v,w$l){if(null==w$v)throw new Error("points");w$_.createFromSubPoints(w$v,0,w$v.length,w$l)},w$o(w$_,["_tempVector3",function(){return this._tempVector3=new w$Zl}]),w$_}(),w$Uv=(function(){function w$v(){}w$r(w$v,"laya.d3.math.ContainmentType"),w$v.Disjoint=0,w$v.Contains=1,w$v.Intersects=2}(),function(){function w$L(){}return w$r(w$L,"laya.d3.math.MathUtils3D"),w$L.isZero=function(w$v){return Math.abs(w$v)<w$L.zeroTolerance},w$L.nearEqual=function(w$v,w$l){return!!w$L.isZero(w$v-w$l)},w$L.fastInvSqrt=function(w$v){return w$L.isZero(w$v)?w$v:1/Math.sqrt(w$v)},w$o(w$L,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),w$L}()),w$zv=function(){function w$e(){var w$v=this.elements=new Float32Array(9);w$v[0]=1,w$v[1]=0,w$v[2]=0,w$v[3]=0,w$v[4]=1,w$v[5]=0,w$v[6]=0,w$v[7]=0,w$v[8]=1}w$r(w$e,"laya.d3.math.Matrix3x3");var w$v=w$e.prototype;return w$f.imps(w$v,{"laya.d3.core.IClone":!0}),w$v.determinant=function(){var w$v=this.elements,w$l=w$v[0],w$L=w$v[1],w$A=w$v[2],w$x=w$v[3],w$m=w$v[4],w$Z=w$v[5],w$O=w$v[6],w$e=w$v[7],w$$=w$v[8];return w$l*(w$$*w$m-w$Z*w$e)+w$L*(-w$$*w$x+w$Z*w$O)+w$A*(w$e*w$x-w$m*w$O)},w$v.translate=function(w$v,w$l){var w$L=w$l.elements,w$A=this.elements,w$x=w$v.elements,w$m=w$A[0],w$Z=w$A[1],w$O=w$A[2],w$e=w$A[3],w$$=w$A[4],w$_=w$A[5],w$o=w$A[6],w$K=w$A[7],w$r=w$A[8],w$G=w$x[0],w$c=w$x[1];w$L[0]=w$m,w$L[1]=w$Z,w$L[2]=w$O,w$L[3]=w$e,w$L[4]=w$$,w$L[5]=w$_,w$L[6]=w$G*w$m+w$c*w$e+w$o,w$L[7]=w$G*w$Z+w$c*w$$+w$K,w$L[8]=w$G*w$O+w$c*w$_+w$r},w$v.rotate=function(w$v,w$l){var w$L=w$l.elements,w$A=this.elements,w$x=w$A[0],w$m=w$A[1],w$Z=w$A[2],w$O=w$A[3],w$e=w$A[4],w$$=w$A[5],w$_=w$A[6],w$o=w$A[7],w$K=w$A[8],w$r=Math.sin(w$v),w$G=Math.cos(w$v);w$L[0]=w$G*w$x+w$r*w$O,w$L[1]=w$G*w$m+w$r*w$e,w$L[2]=w$G*w$Z+w$r*w$$,w$L[3]=w$G*w$O-w$r*w$x,w$L[4]=w$G*w$e-w$r*w$m,w$L[5]=w$G*w$$-w$r*w$Z,w$L[6]=w$_,w$L[7]=w$o,w$L[8]=w$K},w$v.scale=function(w$v,w$l){var w$L=w$l.elements,w$A=this.elements,w$x=w$v.elements,w$m=w$x[0],w$Z=w$x[1];w$L[0]=w$m*w$A[0],w$L[1]=w$m*w$A[1],w$L[2]=w$m*w$A[2],w$L[3]=w$Z*w$A[3],w$L[4]=w$Z*w$A[4],w$L[5]=w$Z*w$A[5],w$L[6]=w$A[6],w$L[7]=w$A[7],w$L[8]=w$A[8]},w$v.invert=function(w$v){var w$l=w$v.elements,w$L=this.elements,w$A=w$L[0],w$x=w$L[1],w$m=w$L[2],w$Z=w$L[3],w$O=w$L[4],w$e=w$L[5],w$$=w$L[6],w$_=w$L[7],w$o=w$L[8],w$K=w$o*w$O-w$e*w$_,w$r=-w$o*w$Z+w$e*w$$,w$G=w$_*w$Z-w$O*w$$,w$c=w$A*w$K+w$x*w$r+w$m*w$G;w$c||(w$v=null),w$c=1/w$c,w$l[0]=w$K*w$c,w$l[1]=(-w$o*w$x+w$m*w$_)*w$c,w$l[2]=(w$e*w$x-w$m*w$O)*w$c,w$l[3]=w$r*w$c,w$l[4]=(w$o*w$A-w$m*w$$)*w$c,w$l[5]=(-w$e*w$A+w$m*w$Z)*w$c,w$l[6]=w$G*w$c,w$l[7]=(-w$_*w$A+w$x*w$$)*w$c,w$l[8]=(w$O*w$A-w$x*w$Z)*w$c},w$v.transpose=function(w$v){var w$l=w$v.elements,w$L=this.elements;if(w$v===this){var w$A=w$L[1],w$x=w$L[2],w$m=w$L[5];w$l[1]=w$L[3],w$l[2]=w$L[6],w$l[3]=w$A,w$l[5]=w$L[7],w$l[6]=w$x,w$l[7]=w$m}else w$l[0]=w$L[0],w$l[1]=w$L[3],w$l[2]=w$L[6],w$l[3]=w$L[1],w$l[4]=w$L[4],w$l[5]=w$L[7],w$l[6]=w$L[2],w$l[7]=w$L[5],w$l[8]=w$L[8]},w$v.identity=function(){var w$v=this.elements;w$v[0]=1,w$v[1]=0,w$v[2]=0,w$v[3]=0,w$v[4]=1,w$v[5]=0,w$v[6]=0,w$v[7]=0,w$v[8]=1},w$v.cloneTo=function(w$v){var w$l,w$L,w$A;if((w$L=this.elements)!==(w$A=w$v.elements))for(w$l=0;w$l<9;++w$l)w$A[w$l]=w$L[w$l]},w$v.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$e.createFromTranslation=function(w$v,w$l){w$l.elements;var w$L=w$v.elements;w$l[0]=1,w$l[1]=0,w$l[2]=0,w$l[3]=0,w$l[4]=1,w$l[5]=0,w$l[6]=w$L[0],w$l[7]=w$L[1],w$l[8]=1},w$e.createFromRotation=function(w$v,w$l){var w$L=w$l.elements,w$A=Math.sin(w$v),w$x=Math.cos(w$v);w$L[0]=w$x,w$L[1]=w$A,w$L[2]=0,w$L[3]=-w$A,w$L[4]=w$x,w$L[5]=0,w$L[6]=0,w$L[7]=0,w$L[8]=1},w$e.createFromScaling=function(w$v,w$l){var w$L=w$l.elements,w$A=w$v.elements;w$L[0]=w$A[0],w$L[1]=0,w$L[2]=0,w$L[3]=0,w$L[4]=w$A[1],w$L[5]=0,w$L[6]=0,w$L[7]=0,w$L[8]=1},w$e.createFromMatrix4x4=function(w$v,w$l){w$l[0]=w$v[0],w$l[1]=w$v[1],w$l[2]=w$v[2],w$l[3]=w$v[4],w$l[4]=w$v[5],w$l[5]=w$v[6],w$l[6]=w$v[8],w$l[7]=w$v[9],w$l[8]=w$v[10]},w$e.multiply=function(w$v,w$l,w$L){var w$A=w$L.elements,w$x=w$v.elements,w$m=w$l.elements,w$Z=w$x[0],w$O=w$x[1],w$e=w$x[2],w$$=w$x[3],w$_=w$x[4],w$o=w$x[5],w$K=w$x[6],w$r=w$x[7],w$G=w$x[8],w$c=w$m[0],w$d=w$m[1],w$C=w$m[2],w$J=w$m[3],w$B=w$m[4],w$X=w$m[5],w$f=w$m[6],w$w=w$m[7],w$H=w$m[8];w$A[0]=w$c*w$Z+w$d*w$$+w$C*w$K,w$A[1]=w$c*w$O+w$d*w$_+w$C*w$r,w$A[2]=w$c*w$e+w$d*w$o+w$C*w$G,w$A[3]=w$J*w$Z+w$B*w$$+w$X*w$K,w$A[4]=w$J*w$O+w$B*w$_+w$X*w$r,w$A[5]=w$J*w$e+w$B*w$o+w$X*w$G,w$A[6]=w$f*w$Z+w$w*w$$+w$H*w$K,w$A[7]=w$f*w$O+w$w*w$_+w$H*w$r,w$A[8]=w$f*w$e+w$w*w$o+w$H*w$G},w$e.lookAt=function(w$v,w$l,w$L,w$A){w$Zl.subtract(w$v,w$l,w$e._tempV30),w$Zl.normalize(w$e._tempV30,w$e._tempV30),w$Zl.cross(w$L,w$e._tempV30,w$e._tempV31),w$Zl.normalize(w$e._tempV31,w$e._tempV31),w$Zl.cross(w$e._tempV30,w$e._tempV31,w$e._tempV32);var w$x=w$e._tempV30.elements,w$m=w$e._tempV31.elements,w$Z=w$e._tempV32.elements,w$O=w$A.elements;w$O[0]=w$m[0],w$O[3]=w$m[1],w$O[6]=w$m[2],w$O[1]=w$Z[0],w$O[4]=w$Z[1],w$O[7]=w$Z[2],w$O[2]=w$x[0],w$O[5]=w$x[1],w$O[8]=w$x[2]},w$e.DEFAULT=new w$e,w$o(w$e,["_tempV30",function(){return this._tempV30=new w$Zl},"_tempV31",function(){return this._tempV31=new w$Zl},"_tempV32",function(){return this._tempV32=new w$Zl}]),w$e}(),w$vl=function(){function w$T(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$,w$_,w$o,w$K,w$r,w$G,w$c){void 0===w$v&&(w$v=1),void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0),void 0===w$A&&(w$A=0),void 0===w$x&&(w$x=0),void 0===w$m&&(w$m=1),void 0===w$Z&&(w$Z=0),void 0===w$O&&(w$O=0),void 0===w$e&&(w$e=0),void 0===w$$&&(w$$=0),void 0===w$_&&(w$_=1),void 0===w$o&&(w$o=0),void 0===w$K&&(w$K=0),void 0===w$r&&(w$r=0),void 0===w$G&&(w$G=0),void 0===w$c&&(w$c=1);var w$d=this.elements=new Float32Array(16);w$d[0]=w$v,w$d[1]=w$l,w$d[2]=w$L,w$d[3]=w$A,w$d[4]=w$x,w$d[5]=w$m,w$d[6]=w$Z,w$d[7]=w$O,w$d[8]=w$e,w$d[9]=w$$,w$d[10]=w$_,w$d[11]=w$o,w$d[12]=w$K,w$d[13]=w$r,w$d[14]=w$G,w$d[15]=w$c}w$r(w$T,"laya.d3.math.Matrix4x4");var w$v=w$T.prototype;return w$f.imps(w$v,{"laya.d3.core.IClone":!0}),w$v.getElementByRowColumn=function(w$v,w$l){if(w$v<0||3<w$v)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(w$l<0||3<w$l)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*w$v+w$l]},w$v.setElementByRowColumn=function(w$v,w$l,w$L){if(w$v<0||3<w$v)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(w$l<0||3<w$l)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*w$v+w$l]=w$L},w$v.equalsOtherMatrix=function(w$v){var w$l=this.elements,w$L=w$v.elements;return w$Uv.nearEqual(w$l[0],w$L[0])&&w$Uv.nearEqual(w$l[1],w$L[1])&&w$Uv.nearEqual(w$l[2],w$L[2])&&w$Uv.nearEqual(w$l[3],w$L[3])&&w$Uv.nearEqual(w$l[4],w$L[4])&&w$Uv.nearEqual(w$l[5],w$L[5])&&w$Uv.nearEqual(w$l[6],w$L[6])&&w$Uv.nearEqual(w$l[7],w$L[7])&&w$Uv.nearEqual(w$l[8],w$L[8])&&w$Uv.nearEqual(w$l[9],w$L[9])&&w$Uv.nearEqual(w$l[10],w$L[10])&&w$Uv.nearEqual(w$l[11],w$L[11])&&w$Uv.nearEqual(w$l[12],w$L[12])&&w$Uv.nearEqual(w$l[13],w$L[13])&&w$Uv.nearEqual(w$l[14],w$L[14])&&w$Uv.nearEqual(w$l[15],w$L[15])},w$v.decomposeTransRotScale=function(w$v,w$l,w$L){var w$A=w$T._tempMatrix4x4;return this.decomposeTransRotMatScale(w$v,w$A,w$L)?(w$Ll.createFromMatrix4x4(w$A,w$l),!0):(w$l.identity(),!1)},w$v.decomposeTransRotMatScale=function(w$v,w$l,w$L){var w$A=this.elements,w$x=w$v.elements,w$m=w$l.elements,w$Z=w$L.elements;w$x[0]=w$A[12],w$x[1]=w$A[13],w$x[2]=w$A[14];var w$O=w$A[0],w$e=w$A[1],w$$=w$A[2],w$_=w$A[4],w$o=w$A[5],w$K=w$A[6],w$r=w$A[8],w$G=w$A[9],w$c=w$A[10],w$d=w$Z[0]=Math.sqrt(w$O*w$O+w$e*w$e+w$$*w$$),w$C=w$Z[1]=Math.sqrt(w$_*w$_+w$o*w$o+w$K*w$K),w$J=w$Z[2]=Math.sqrt(w$r*w$r+w$G*w$G+w$c*w$c);if(w$Uv.isZero(w$d)||w$Uv.isZero(w$C)||w$Uv.isZero(w$J))return w$m[1]=w$m[2]=w$m[3]=w$m[4]=w$m[6]=w$m[7]=w$m[8]=w$m[9]=w$m[11]=w$m[12]=w$m[13]=w$m[14]=0,w$m[0]=w$m[5]=w$m[10]=w$m[15]=1,!1;var w$B=w$T._tempVector0,w$X=w$B.elements;w$X[0]=w$r/w$J,w$X[1]=w$G/w$J,w$X[2]=w$c/w$J;var w$f=w$T._tempVector1,w$w=w$f.elements;w$w[0]=w$O/w$d,w$w[1]=w$e/w$d,w$w[2]=w$$/w$d;var w$H=w$T._tempVector2;w$Zl.cross(w$B,w$f,w$H);var w$g=w$T._tempVector1;return w$Zl.cross(w$H,w$B,w$g),w$m[3]=w$m[7]=w$m[11]=w$m[12]=w$m[13]=w$m[14]=0,w$m[15]=1,w$m[0]=w$g.x,w$m[1]=w$g.y,w$m[2]=w$g.z,w$m[4]=w$H.x,w$m[5]=w$H.y,w$m[6]=w$H.z,w$m[8]=w$B.x,w$m[9]=w$B.y,w$m[10]=w$B.z,w$m[0]*w$O+w$m[1]*w$e+w$m[2]*w$$<0&&(w$Z[0]=-w$d),w$m[4]*w$_+w$m[5]*w$o+w$m[6]*w$K<0&&(w$Z[1]=-w$C),w$m[8]*w$r+w$m[9]*w$G+w$m[10]*w$c<0&&(w$Z[2]=-w$J),!0},w$v.decomposeYawPitchRoll=function(w$v){var w$l=w$v.elements,w$L=Math.asin(-this.elements[9]);w$l[1]=w$L,Math.cos(w$L)>w$Uv.zeroTolerance?(w$l[2]=Math.atan2(this.elements[1],this.elements[5]),w$l[0]=Math.atan2(this.elements[8],this.elements[10])):(w$l[2]=Math.atan2(-this.elements[4],this.elements[0]),w$l[0]=0)},w$v.normalize=function(){var w$v=this.elements,w$l=w$v[0],w$L=w$v[1],w$A=w$v[2],w$x=Math.sqrt(w$l*w$l+w$L*w$L+w$A*w$A);if(!w$x)return w$v[0]=0,w$v[1]=0,void(w$v[2]=0);1!=w$x&&(w$x=1/w$x,w$v[0]=w$l*w$x,w$v[1]=w$L*w$x,w$v[2]=w$A*w$x)},w$v.transpose=function(){var w$v,w$l;return w$l=(w$v=this.elements)[1],w$v[1]=w$v[4],w$v[4]=w$l,w$l=w$v[2],w$v[2]=w$v[8],w$v[8]=w$l,w$l=w$v[3],w$v[3]=w$v[12],w$v[12]=w$l,w$l=w$v[6],w$v[6]=w$v[9],w$v[9]=w$l,w$l=w$v[7],w$v[7]=w$v[13],w$v[13]=w$l,w$l=w$v[11],w$v[11]=w$v[14],w$v[14]=w$l,this},w$v.invert=function(w$v){var w$l=this.elements,w$L=w$v.elements,w$A=w$l[0],w$x=w$l[1],w$m=w$l[2],w$Z=w$l[3],w$O=w$l[4],w$e=w$l[5],w$$=w$l[6],w$_=w$l[7],w$o=w$l[8],w$K=w$l[9],w$r=w$l[10],w$G=w$l[11],w$c=w$l[12],w$d=w$l[13],w$C=w$l[14],w$J=w$l[15],w$B=w$A*w$e-w$x*w$O,w$X=w$A*w$$-w$m*w$O,w$f=w$A*w$_-w$Z*w$O,w$w=w$x*w$$-w$m*w$e,w$H=w$x*w$_-w$Z*w$e,w$g=w$m*w$_-w$Z*w$$,w$T=w$o*w$d-w$K*w$c,w$h=w$o*w$C-w$r*w$c,w$V=w$o*w$J-w$G*w$c,w$k=w$K*w$C-w$r*w$d,w$Q=w$K*w$J-w$G*w$d,w$M=w$r*w$J-w$G*w$C,w$P=w$B*w$M-w$X*w$Q+w$f*w$k+w$w*w$V-w$H*w$h+w$g*w$T;0!==Math.abs(w$P)&&(w$P=1/w$P,w$L[0]=(w$e*w$M-w$$*w$Q+w$_*w$k)*w$P,w$L[1]=(w$m*w$Q-w$x*w$M-w$Z*w$k)*w$P,w$L[2]=(w$d*w$g-w$C*w$H+w$J*w$w)*w$P,w$L[3]=(w$r*w$H-w$K*w$g-w$G*w$w)*w$P,w$L[4]=(w$$*w$V-w$O*w$M-w$_*w$h)*w$P,w$L[5]=(w$A*w$M-w$m*w$V+w$Z*w$h)*w$P,w$L[6]=(w$C*w$f-w$c*w$g-w$J*w$X)*w$P,w$L[7]=(w$o*w$g-w$r*w$f+w$G*w$X)*w$P,w$L[8]=(w$O*w$Q-w$e*w$V+w$_*w$T)*w$P,w$L[9]=(w$x*w$V-w$A*w$Q-w$Z*w$T)*w$P,w$L[10]=(w$c*w$H-w$d*w$f+w$J*w$B)*w$P,w$L[11]=(w$K*w$f-w$o*w$H-w$G*w$B)*w$P,w$L[12]=(w$e*w$h-w$O*w$k-w$$*w$T)*w$P,w$L[13]=(w$A*w$k-w$x*w$h+w$m*w$T)*w$P,w$L[14]=(w$d*w$X-w$c*w$w-w$C*w$B)*w$P,w$L[15]=(w$o*w$w-w$K*w$X+w$r*w$B)*w$P)},w$v.identity=function(){var w$v=this.elements;w$v[1]=w$v[2]=w$v[3]=w$v[4]=w$v[6]=w$v[7]=w$v[8]=w$v[9]=w$v[11]=w$v[12]=w$v[13]=w$v[14]=0,w$v[0]=w$v[5]=w$v[10]=w$v[15]=1},w$v.cloneTo=function(w$v){var w$l,w$L,w$A;if((w$L=this.elements)!==(w$A=w$v.elements))for(w$l=0;w$l<16;++w$l)w$A[w$l]=w$L[w$l]},w$v.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$v.getTranslationVector=function(w$v){var w$l=this.elements,w$L=w$v.elements;w$L[0]=w$l[12],w$L[1]=w$l[13],w$L[2]=w$l[14]},w$v.setTranslationVector=function(w$v){var w$l=this.elements,w$L=w$v.elements;w$l[12]=w$L[0],w$l[13]=w$L[1],w$l[14]=w$L[2]},w$v.getForward=function(w$v){var w$l=this.elements,w$L=w$v.elements;w$L[0]=-w$l[8],w$L[1]=-w$l[9],w$L[2]=-w$l[10]},w$v.setForward=function(w$v){var w$l=this.elements,w$L=w$v.elements;w$l[8]=-w$L[0],w$l[9]=-w$L[1],w$l[10]=-w$L[2]},w$T.createRotationX=function(w$v,w$l){var w$L=w$l.elements,w$A=Math.sin(w$v),w$x=Math.cos(w$v);w$L[1]=w$L[2]=w$L[3]=w$L[4]=w$L[7]=w$L[8]=w$L[11]=w$L[12]=w$L[13]=w$L[14]=0,w$L[0]=w$L[15]=1,w$L[5]=w$L[10]=w$x,w$L[6]=w$A,w$L[9]=-w$A},w$T.createRotationY=function(w$v,w$l){var w$L=w$l.elements,w$A=Math.sin(w$v),w$x=Math.cos(w$v);w$L[1]=w$L[3]=w$L[4]=w$L[6]=w$L[7]=w$L[9]=w$L[11]=w$L[12]=w$L[13]=w$L[14]=0,w$L[5]=w$L[15]=1,w$L[0]=w$L[10]=w$x,w$L[2]=-w$A,w$L[8]=w$A},w$T.createRotationZ=function(w$v,w$l){var w$L=w$l.elements,w$A=Math.sin(w$v),w$x=Math.cos(w$v);w$L[2]=w$L[3]=w$L[6]=w$L[7]=w$L[8]=w$L[9]=w$L[11]=w$L[12]=w$L[13]=w$L[14]=0,w$L[10]=w$L[15]=1,w$L[0]=w$L[5]=w$x,w$L[1]=w$A,w$L[4]=-w$A},w$T.createRotationYawPitchRoll=function(w$v,w$l,w$L,w$A){w$Ll.createFromYawPitchRoll(w$v,w$l,w$L,w$T._tempQuaternion),w$T.createRotationQuaternion(w$T._tempQuaternion,w$A)},w$T.createRotationAxis=function(w$v,w$l,w$L){var w$A=w$v.elements,w$x=w$A[0],w$m=w$A[1],w$Z=w$A[2],w$O=Math.cos(w$l),w$e=Math.sin(w$l),w$$=w$x*w$x,w$_=w$m*w$m,w$o=w$Z*w$Z,w$K=w$x*w$m,w$r=w$x*w$Z,w$G=w$m*w$Z,w$c=w$L.elements;w$c[3]=w$c[7]=w$c[11]=w$c[12]=w$c[13]=w$c[14]=0,w$c[15]=1,w$c[0]=w$$+w$O*(1-w$$),w$c[1]=w$K-w$O*w$K+w$e*w$Z,w$c[2]=w$r-w$O*w$r-w$e*w$m,w$c[4]=w$K-w$O*w$K-w$e*w$Z,w$c[5]=w$_+w$O*(1-w$_),w$c[6]=w$G-w$O*w$G+w$e*w$x,w$c[8]=w$r-w$O*w$r+w$e*w$m,w$c[9]=w$G-w$O*w$G-w$e*w$x,w$c[10]=w$o+w$O*(1-w$o)},w$T.createRotationQuaternion=function(w$v,w$l){var w$L=w$v.elements,w$A=w$l.elements,w$x=w$L[0],w$m=w$L[1],w$Z=w$L[2],w$O=w$L[3],w$e=w$x*w$x,w$$=w$m*w$m,w$_=w$Z*w$Z,w$o=w$x*w$m,w$K=w$Z*w$O,w$r=w$Z*w$x,w$G=w$m*w$O,w$c=w$m*w$Z,w$d=w$x*w$O;w$A[3]=w$A[7]=w$A[11]=w$A[12]=w$A[13]=w$A[14]=0,w$A[15]=1,w$A[0]=1-2*(w$$+w$_),w$A[1]=2*(w$o+w$K),w$A[2]=2*(w$r-w$G),w$A[4]=2*(w$o-w$K),w$A[5]=1-2*(w$_+w$e),w$A[6]=2*(w$c+w$d),w$A[8]=2*(w$r+w$G),w$A[9]=2*(w$c-w$d),w$A[10]=1-2*(w$$+w$e)},w$T.createTranslate=function(w$v,w$l){var w$L=w$v.elements,w$A=w$l.elements;w$A[4]=w$A[8]=w$A[1]=w$A[9]=w$A[2]=w$A[6]=w$A[3]=w$A[7]=w$A[11]=0,w$A[0]=w$A[5]=w$A[10]=w$A[15]=1,w$A[12]=w$L[0],w$A[13]=w$L[1],w$A[14]=w$L[2]},w$T.createScaling=function(w$v,w$l){var w$L=w$v.elements,w$A=w$l.elements;w$A[0]=w$L[0],w$A[5]=w$L[1],w$A[10]=w$L[2],w$A[1]=w$A[4]=w$A[8]=w$A[12]=w$A[9]=w$A[13]=w$A[2]=w$A[6]=w$A[14]=w$A[3]=w$A[7]=w$A[11]=0,w$A[15]=1},w$T.multiply=function(w$v,w$l,w$L){var w$A,w$x,w$m,w$Z,w$O,w$e,w$$,w$_;for(w$x=w$L.elements,w$m=w$v.elements,w$x===(w$Z=w$l.elements)&&(w$Z=w$Z.slice()),w$A=0;w$A<4;w$A++)w$O=w$m[w$A],w$e=w$m[w$A+4],w$$=w$m[w$A+8],w$_=w$m[w$A+12],w$x[w$A]=w$O*w$Z[0]+w$e*w$Z[1]+w$$*w$Z[2]+w$_*w$Z[3],w$x[w$A+4]=w$O*w$Z[4]+w$e*w$Z[5]+w$$*w$Z[6]+w$_*w$Z[7],w$x[w$A+8]=w$O*w$Z[8]+w$e*w$Z[9]+w$$*w$Z[10]+w$_*w$Z[11],w$x[w$A+12]=w$O*w$Z[12]+w$e*w$Z[13]+w$$*w$Z[14]+w$_*w$Z[15]},w$T.createFromQuaternion=function(w$v,w$l){var w$L=w$l.elements,w$A=w$v.elements,w$x=w$A[0],w$m=w$A[1],w$Z=w$A[2],w$O=w$A[3],w$e=w$x+w$x,w$$=w$m+w$m,w$_=w$Z+w$Z,w$o=w$x*w$e,w$K=w$m*w$e,w$r=w$m*w$$,w$G=w$Z*w$e,w$c=w$Z*w$$,w$d=w$Z*w$_,w$C=w$O*w$e,w$J=w$O*w$$,w$B=w$O*w$_;w$L[0]=1-w$r-w$d,w$L[1]=w$K+w$B,w$L[2]=w$G-w$J,w$L[3]=0,w$L[4]=w$K-w$B,w$L[5]=1-w$o-w$d,w$L[6]=w$c+w$C,w$L[7]=0,w$L[8]=w$G+w$J,w$L[9]=w$c-w$C,w$L[10]=1-w$o-w$r,w$L[11]=0,w$L[12]=0,w$L[13]=0,w$L[14]=0,w$L[15]=1},w$T.createAffineTransformation=function(w$v,w$l,w$L,w$A){var w$x=w$v.elements,w$m=w$l.elements,w$Z=w$L.elements,w$O=w$A.elements,w$e=w$m[0],w$$=w$m[1],w$_=w$m[2],w$o=w$m[3],w$K=w$e+w$e,w$r=w$$+w$$,w$G=w$_+w$_,w$c=w$e*w$K,w$d=w$e*w$r,w$C=w$e*w$G,w$J=w$$*w$r,w$B=w$$*w$G,w$X=w$_*w$G,w$f=w$o*w$K,w$w=w$o*w$r,w$H=w$o*w$G,w$g=w$Z[0],w$T=w$Z[1],w$h=w$Z[2];w$O[0]=(1-(w$J+w$X))*w$g,w$O[1]=(w$d+w$H)*w$g,w$O[2]=(w$C-w$w)*w$g,w$O[3]=0,w$O[4]=(w$d-w$H)*w$T,w$O[5]=(1-(w$c+w$X))*w$T,w$O[6]=(w$B+w$f)*w$T,w$O[7]=0,w$O[8]=(w$C+w$w)*w$h,w$O[9]=(w$B-w$f)*w$h,w$O[10]=(1-(w$c+w$J))*w$h,w$O[11]=0,w$O[12]=w$x[0],w$O[13]=w$x[1],w$O[14]=w$x[2],w$O[15]=1},w$T.createLookAt=function(w$v,w$l,w$L,w$A){var w$x=w$A.elements,w$m=w$T._tempVector0,w$Z=w$T._tempVector1,w$O=w$T._tempVector2;w$Zl.subtract(w$v,w$l,w$O),w$Zl.normalize(w$O,w$O),w$Zl.cross(w$L,w$O,w$m),w$Zl.normalize(w$m,w$m),w$Zl.cross(w$O,w$m,w$Z),w$A.identity(),w$x[0]=w$m.x,w$x[4]=w$m.y,w$x[8]=w$m.z,w$x[1]=w$Z.x,w$x[5]=w$Z.y,w$x[9]=w$Z.z,w$x[2]=w$O.x,w$x[6]=w$O.y,w$x[10]=w$O.z,w$x[12]=-w$Zl.dot(w$m,w$v),w$x[13]=-w$Zl.dot(w$Z,w$v),w$x[14]=-w$Zl.dot(w$O,w$v)},w$T.createPerspective=function(w$v,w$l,w$L,w$A,w$x){var w$m=w$x.elements,w$Z=1/Math.tan(w$v/2),w$O=1/(w$L-w$A);w$m[0]=w$Z/w$l,w$m[5]=w$Z,w$m[10]=(w$A+w$L)*w$O,w$m[11]=-1,w$m[14]=2*w$A*w$L*w$O,w$m[1]=w$m[2]=w$m[3]=w$m[4]=w$m[6]=w$m[7]=w$m[8]=w$m[9]=w$m[12]=w$m[13]=w$m[15]=0},w$T.createOrthoOffCenterRH=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){var w$O=w$Z.elements,w$e=1/(w$v-w$l),w$$=1/(w$L-w$A),w$_=1/(w$x-w$m);w$O[1]=w$O[2]=w$O[3]=w$O[4]=w$O[6]=w$O[7]=w$O[8]=w$O[9]=w$O[11]=0,w$O[15]=1,w$O[0]=-2*w$e,w$O[5]=-2*w$$,w$O[10]=2*w$_,w$O[12]=(w$v+w$l)*w$e,w$O[13]=(w$A+w$L)*w$$,w$O[14]=(w$m+w$x)*w$_},w$T.translation=function(w$v,w$l){var w$L=w$v.elements,w$A=w$l.elements;w$A[0]=w$A[5]=w$A[10]=w$A[15]=1,w$A[12]=w$L[0],w$A[13]=w$L[1],w$A[14]=w$L[2]},w$o(w$T,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new w$T},"_tempVector0",function(){return this._tempVector0=new w$Zl},"_tempVector1",function(){return this._tempVector1=new w$Zl},"_tempVector2",function(){return this._tempVector2=new w$Zl},"_tempQuaternion",function(){return this._tempQuaternion=new w$Ll},"DEFAULT",function(){return this.DEFAULT=new w$T},"ZERO",function(){return this.ZERO=new w$T(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),w$T}(),w$ll=(function(){function w$B(w$v,w$l){this.extents=null,this.transformation=null,this.extents=w$v,this.transformation=w$l}w$r(w$B,"laya.d3.math.OrientedBoundBox");var w$v=w$B.prototype;w$v.getCorners=function(w$v){var w$l=w$B._tempV30.elements,w$L=w$B._tempV31.elements,w$A=w$B._tempV32.elements,w$x=this.extents.elements;w$l[0]=w$x[0],w$l[1]=w$l[2]=0,w$L[1]=w$x[1],w$L[0]=w$L[2]=0,w$A[2]=w$x[2],w$A[0]=w$A[1]=0,w$Zl.TransformNormal(w$B._tempV30,this.transformation,w$B._tempV30),w$Zl.TransformNormal(w$B._tempV31,this.transformation,w$B._tempV31),w$Zl.TransformNormal(w$B._tempV32,this.transformation,w$B._tempV32);var w$m=w$B._tempV33;this.transformation.getTranslationVector(w$m),w$v.length=8,w$Zl.add(w$m,w$B._tempV30,w$B._tempV34),w$Zl.add(w$B._tempV34,w$B._tempV31,w$B._tempV34),w$Zl.add(w$B._tempV34,w$B._tempV32,w$v[0]),w$Zl.add(w$m,w$B._tempV30,w$B._tempV34),w$Zl.add(w$B._tempV34,w$B._tempV31,w$B._tempV34),w$Zl.subtract(w$B._tempV34,w$B._tempV32,w$v[1]),w$Zl.subtract(w$m,w$B._tempV30,w$B._tempV34),w$Zl.add(w$B._tempV34,w$B._tempV31,w$B._tempV34),w$Zl.subtract(w$B._tempV34,w$B._tempV32,w$v[2]),w$Zl.subtract(w$m,w$B._tempV30,w$B._tempV34),w$Zl.add(w$B._tempV34,w$B._tempV31,w$B._tempV34),w$Zl.add(w$B._tempV34,w$B._tempV32,w$v[3]),w$Zl.add(w$m,w$B._tempV30,w$B._tempV34),w$Zl.subtract(w$B._tempV34,w$B._tempV31,w$B._tempV34),w$Zl.add(w$B._tempV34,w$B._tempV32,w$v[4]),w$Zl.add(w$m,w$B._tempV30,w$B._tempV34),w$Zl.subtract(w$B._tempV34,w$B._tempV31,w$B._tempV34),w$Zl.subtract(w$B._tempV34,w$B._tempV32,w$v[5]),w$Zl.subtract(w$m,w$B._tempV30,w$B._tempV34),w$Zl.subtract(w$B._tempV34,w$B._tempV31,w$B._tempV34),w$Zl.subtract(w$B._tempV34,w$B._tempV32,w$v[6]),w$Zl.subtract(w$m,w$B._tempV30,w$B._tempV34),w$Zl.subtract(w$B._tempV34,w$B._tempV31,w$B._tempV34),w$Zl.add(w$B._tempV34,w$B._tempV32,w$v[7])},w$v.transform=function(w$v){w$vl.multiply(this.transformation,w$v,this.transformation)},w$v.scale=function(w$v){w$Zl.multiply(this.extents,w$v,this.extents)},w$v.translate=function(w$v){this.transformation.getTranslationVector(w$B._tempV30),w$Zl.add(w$B._tempV30,w$v,w$B._tempV31),this.transformation.setTranslationVector(w$B._tempV31)},w$v.Size=function(w$v){w$Zl.scale(this.extents,2,w$v)},w$v.getSize=function(w$v){var w$l=this.extents.elements;w$B._tempV30.x=w$l[0],w$B._tempV31.y=w$l[1],w$B._tempV32.z=w$l[2],w$Zl.TransformNormal(w$B._tempV30,this.transformation,w$B._tempV30),w$Zl.TransformNormal(w$B._tempV31,this.transformation,w$B._tempV31),w$Zl.TransformNormal(w$B._tempV31,this.transformation,w$B._tempV32);var w$L=w$v.elements;w$L[0]=w$Zl.scalarLength(w$B._tempV30),w$L[1]=w$Zl.scalarLength(w$B._tempV31),w$L[2]=w$Zl.scalarLength(w$B._tempV32)},w$v.getSizeSquared=function(w$v){var w$l=this.extents.elements;w$B._tempV30.x=w$l[0],w$B._tempV31.y=w$l[1],w$B._tempV32.z=w$l[2],w$Zl.TransformNormal(w$B._tempV30,this.transformation,w$B._tempV30),w$Zl.TransformNormal(w$B._tempV31,this.transformation,w$B._tempV31),w$Zl.TransformNormal(w$B._tempV31,this.transformation,w$B._tempV32);var w$L=w$v.elements;w$L[0]=w$Zl.scalarLengthSquared(w$B._tempV30),w$L[1]=w$Zl.scalarLengthSquared(w$B._tempV31),w$L[2]=w$Zl.scalarLengthSquared(w$B._tempV32)},w$v.getCenter=function(w$v){this.transformation.getTranslationVector(w$v)},w$v.containsPoint=function(w$v){var w$l=this.extents.elements,w$L=w$l[0],w$A=w$l[1],w$x=w$l[2];this.transformation.invert(w$B._tempM0),w$Zl.transformCoordinate(w$v,w$B._tempM0,w$B._tempV30);var w$m=w$B._tempV30.elements,w$Z=Math.abs(w$m[0]),w$O=Math.abs(w$m[1]),w$e=Math.abs(w$m[2]);return w$Uv.nearEqual(w$Z,w$L)&&w$Uv.nearEqual(w$O,w$A)&&w$Uv.nearEqual(w$e,w$x)?2:w$Z<w$L&&w$O<w$A&&w$e<w$x?1:0},w$v.containsPoints=function(w$v){var w$l=this.extents.elements,w$L=w$l[0],w$A=w$l[1],w$x=w$l[2];this.transformation.invert(w$B._tempM0);for(var w$m=!0,w$Z=!1,w$O=0;w$O<w$v.length;w$O++){w$Zl.transformCoordinate(w$v[w$O],w$B._tempM0,w$B._tempV30);var w$e=w$B._tempV30.elements,w$$=Math.abs(w$e[0]),w$_=Math.abs(w$e[1]),w$o=Math.abs(w$e[2]);w$Uv.nearEqual(w$$,w$L)&&w$Uv.nearEqual(w$_,w$A)&&w$Uv.nearEqual(w$o,w$x)&&(w$Z=!0),w$$<w$L&&w$_<w$A&&w$o<w$x?w$Z=!0:w$m=!1}return w$m?1:w$Z?2:0},w$v.containsSphere=function(w$v,w$l){void 0===w$l&&(w$l=!1);var w$L=this.extents.elements,w$A=w$L[0],w$x=w$L[1],w$m=w$L[2],w$Z=w$v.radius;this.transformation.invert(w$B._tempM0),w$Zl.transformCoordinate(w$v.center,w$B._tempM0,w$B._tempV30);var w$O=NaN;if(w$O=w$l?w$Z:(w$Zl.scale(w$Zl.UnitX,w$Z,w$B._tempV31),w$Zl.TransformNormal(w$B._tempV31,w$B._tempM0,w$B._tempV31),w$Zl.scalarLength(w$B._tempV31)),w$Zl.scale(this.extents,-1,w$B._tempV32),w$Zl.Clamp(w$B._tempV30,w$B._tempV32,this.extents,w$B._tempV33),w$O*w$O<w$Zl.distanceSquared(w$B._tempV30,w$B._tempV33))return 0;var w$e=w$B._tempV30.elements,w$$=w$e[0],w$_=w$e[1],w$o=w$e[2],w$K=w$B._tempV32.elements,w$r=w$K[0],w$G=w$K[1],w$c=w$K[2];return w$r+w$O<=w$$&&w$$<=w$A-w$O&&w$O<w$A-w$r&&w$G+w$O<=w$_&&w$_<=w$x-w$O&&w$O<w$x-w$G&&w$c+w$O<=w$o&&w$o<=w$m-w$O&&w$O<w$m-w$c?1:2},w$v.containsOrientedBoundBox=function(w$v){var w$l=0,w$L=0;w$v.getCorners(w$B._corners);var w$A=this.containsPoints(w$B._corners);if(0!=w$A)return w$A;var w$x=this.extents.elements;w$v.extents.cloneTo(w$B._tempV35);var w$m=w$B._tempV35.elements;w$B._getRows(this.transformation,w$B._rows1),w$B._getRows(w$v.transformation,w$B._rows2);var w$Z=NaN;for(w$l=0;w$l<4;w$l++)for(w$L=0;w$L<4;w$L++)3==w$l||3==w$L?(w$B._tempM0.setElementByRowColumn(w$l,w$L,0),w$B._tempM1.setElementByRowColumn(w$l,w$L,0)):(w$Z=w$Zl.dot(w$B._rows1[w$l],w$B._rows2[w$L]),w$B._tempM0.setElementByRowColumn(w$l,w$L,w$Z),w$B._tempM1.setElementByRowColumn(w$l,w$L,Math.abs(w$Z)));w$v.getCenter(w$B._tempV34),this.getCenter(w$B._tempV36),w$Zl.subtract(w$B._tempV34,w$B._tempV36,w$B._tempV30);var w$O=w$B._tempV31.elements;w$O[0]=w$Zl.dot(w$B._tempV30,w$B._rows1[0]),w$O[1]=w$Zl.dot(w$B._tempV30,w$B._rows1[1]),w$O[2]=w$Zl.dot(w$B._tempV30,w$B._rows1[2]);var w$e=w$B._tempV32.elements,w$$=w$B._tempV33.elements;for(w$l=0;w$l<3;w$l++)if(w$e[0]=w$B._tempM1.getElementByRowColumn(w$l,0),w$e[1]=w$B._tempM1.getElementByRowColumn(w$l,1),w$e[2]=w$B._tempM1.getElementByRowColumn(w$l,2),w$x[w$l]+w$Zl.dot(w$B._tempV35,w$B._tempV32)<Math.abs(w$O[w$l]))return 0;for(w$L=0;w$L<3;w$L++)if(w$e[0]=w$B._tempM1.getElementByRowColumn(0,w$L),w$e[1]=w$B._tempM1.getElementByRowColumn(1,w$L),w$e[2]=w$B._tempM1.getElementByRowColumn(2,w$L),w$$[0]=w$B._tempM0.getElementByRowColumn(0,w$L),w$$[1]=w$B._tempM0.getElementByRowColumn(1,w$L),w$$[2]=w$B._tempM0.getElementByRowColumn(2,w$L),w$Zl.dot(this.extents,w$B._tempV32)+w$m[w$L]<Math.abs(w$Zl.dot(w$B._tempV31,w$B._tempV33)))return 0;for(w$l=0;w$l<3;w$l++)for(w$L=0;w$L<3;w$L++){var w$_=(w$l+1)%3,w$o=(w$l+2)%3,w$K=(w$L+1)%3,w$r=(w$L+2)%3;if(w$x[w$_]*w$B._tempM1.getElementByRowColumn(w$o,w$L)+w$x[w$o]*w$B._tempM1.getElementByRowColumn(w$_,w$L)+(w$m[w$K]*w$B._tempM1.getElementByRowColumn(w$l,w$r)+w$m[w$r]*w$B._tempM1.getElementByRowColumn(w$l,w$K))<Math.abs(w$O[w$o]*w$B._tempM0.getElementByRowColumn(w$_,w$L)-w$O[w$_]*w$B._tempM0.getElementByRowColumn(w$o,w$L)))return 0}return 2},w$v.containsLine=function(w$v,w$l){w$B._corners[0]=w$v,w$B._corners[1]=w$l;var w$L=this.containsPoints(w$B._corners);if(0!=w$L)return w$L;var w$A=this.extents.elements,w$x=w$A[0],w$m=w$A[1],w$Z=w$A[2];this.transformation.invert(w$B._tempM0),w$Zl.transformCoordinate(w$v,w$B._tempM0,w$B._tempV30),w$Zl.transformCoordinate(w$l,w$B._tempM0,w$B._tempV31),w$Zl.add(w$B._tempV30,w$B._tempV31,w$B._tempV32),w$Zl.scale(w$B._tempV32,.5,w$B._tempV32),w$Zl.subtract(w$B._tempV30,w$B._tempV32,w$B._tempV33);var w$O=w$B._tempV33.elements,w$e=w$O[0],w$$=w$O[1],w$_=w$O[2],w$o=w$B._tempV34.elements,w$K=w$o[0]=Math.abs(w$O[0]),w$r=w$o[1]=Math.abs(w$O[1]),w$G=w$o[2]=Math.abs(w$O[2]),w$c=w$B._tempV32.elements,w$d=w$c[0],w$C=w$c[1],w$J=w$c[2];return Math.abs(w$d)>w$x+w$K?0:Math.abs(w$C)>w$m+w$r?0:Math.abs(w$J)>w$Z+w$G?0:Math.abs(w$C*w$_-w$J*w$$)>w$m*w$G+w$Z*w$r?0:Math.abs(w$d*w$_-w$J*w$e)>w$x*w$G+w$Z*w$K?0:Math.abs(w$d*w$$-w$C*w$e)>w$x*w$r+w$m*w$K?0:2},w$v.containsBoundBox=function(w$v){var w$l=0,w$L=0,w$A=w$v.min,w$x=w$v.max;w$v.getCorners(w$B._corners);var w$m=this.containsPoints(w$B._corners);if(0!=w$m)return w$m;w$Zl.subtract(w$x,w$A,w$B._tempV30),w$Zl.scale(w$B._tempV30,.5,w$B._tempV30),w$Zl.add(w$A,w$B._tempV30,w$B._tempV30),w$Zl.subtract(w$x,w$B._tempV30,w$B._tempV31);var w$Z=this.extents.elements,w$O=w$B._tempV31.elements;w$B._getRows(this.transformation,w$B._rows1),this.transformation.invert(w$B._tempM0);for(w$l=0;w$l<3;w$l++)for(w$L=0;w$L<3;w$L++)w$B._tempM1.setElementByRowColumn(w$l,w$L,Math.abs(w$B._tempM0.getElementByRowColumn(w$l,w$L)));this.getCenter(w$B._tempV35),w$Zl.subtract(w$B._tempV30,w$B._tempV35,w$B._tempV32);var w$e=w$B._tempV31.elements;w$e[0]=w$Zl.dot(w$B._tempV32,w$B._rows1[0]),w$e[1]=w$Zl.dot(w$B._tempV32,w$B._rows1[1]),w$e[2]=w$Zl.dot(w$B._tempV32,w$B._rows1[2]);var w$$=w$B._tempV33.elements,w$_=w$B._tempV34.elements;for(w$l=0;w$l<3;w$l++)if(w$$[0]=w$B._tempM1.getElementByRowColumn(w$l,0),w$$[1]=w$B._tempM1.getElementByRowColumn(w$l,1),w$$[2]=w$B._tempM1.getElementByRowColumn(w$l,2),w$Z[w$l]+w$Zl.dot(w$B._tempV31,w$B._tempV33)<Math.abs(w$e[w$l]))return 0;for(w$L=0;w$L<3;w$L++)if(w$$[0]=w$B._tempM1.getElementByRowColumn(0,w$L),w$$[1]=w$B._tempM1.getElementByRowColumn(1,w$L),w$$[2]=w$B._tempM1.getElementByRowColumn(2,w$L),w$_[0]=w$B._tempM0.getElementByRowColumn(0,w$L),w$_[1]=w$B._tempM0.getElementByRowColumn(1,w$L),w$_[2]=w$B._tempM0.getElementByRowColumn(2,w$L),w$Zl.dot(this.extents,w$B._tempV33)+w$O[w$L]<Math.abs(w$Zl.dot(w$B._tempV31,w$B._tempV34)))return 0;for(w$l=0;w$l<3;w$l++)for(w$L=0;w$L<3;w$L++){var w$o=(w$l+1)%3,w$K=(w$l+2)%3,w$r=(w$L+1)%3,w$G=(w$L+2)%3;if(w$Z[w$o]*w$B._tempM1.getElementByRowColumn(w$K,w$L)+w$Z[w$K]*w$B._tempM1.getElementByRowColumn(w$o,w$L)+(w$O[w$r]*w$B._tempM1.getElementByRowColumn(w$l,w$G)+w$O[w$G]*w$B._tempM1.getElementByRowColumn(w$l,w$r))<Math.abs(w$e[w$K]*w$B._tempM0.getElementByRowColumn(w$o,w$L)-w$e[w$o]*w$B._tempM0.getElementByRowColumn(w$K,w$L)))return 0}return 2},w$v.intersectsRay=function(w$v,w$l){w$Zl.scale(this.extents,-1,w$B._tempV30),this.transformation.invert(w$B._tempM0),w$Zl.TransformNormal(w$v.direction,w$B._tempM0,w$B._ray.direction),w$Zl.transformCoordinate(w$v.origin,w$B._tempM0,w$B._ray.origin),w$B._boxBound1.min=w$B._tempV30,w$B._boxBound1.max=this.extents;var w$L=Collision.intersectsRayAndBoxRP(w$B._ray,w$B._boxBound1,w$l);return-1!==w$L&&w$Zl.transformCoordinate(w$l,this.transformation,w$l),w$L},w$v._getLocalCorners=function(w$v){w$v.length=8;var w$l=this.extents.elements;w$B._tempV30.x=w$l[0],w$B._tempV31.y=w$l[1],w$B._tempV32.z=w$l[2],w$Zl.add(w$B._tempV30,w$B._tempV31,w$B._tempV33),w$Zl.add(w$B._tempV33,w$B._tempV32,w$v[0]),w$Zl.add(w$B._tempV30,w$B._tempV31,w$B._tempV33),w$Zl.subtract(w$B._tempV33,w$B._tempV32,w$v[1]),w$Zl.subtract(w$B._tempV31,w$B._tempV30,w$B._tempV33),w$Zl.subtract(w$B._tempV33,w$B._tempV30,w$v[2]),w$Zl.subtract(w$B._tempV31,w$B._tempV30,w$B._tempV33),w$Zl.add(w$B._tempV33,w$B._tempV32,w$v[3]),w$Zl.subtract(w$B._tempV30,w$B._tempV31,w$B._tempV33),w$Zl.add(w$B._tempV33,w$B._tempV32,w$v[4]),w$Zl.subtract(w$B._tempV30,w$B._tempV31,w$B._tempV33),w$Zl.subtract(w$B._tempV33,w$B._tempV32,w$v[5]),w$Zl.scale(w$v[0],-1,w$v[6]),w$Zl.subtract(w$B._tempV32,w$B._tempV30,w$B._tempV33),w$Zl.subtract(w$B._tempV33,w$B._tempV31,w$v[7])},w$v.equals=function(w$v){return this.extents==w$v.extents&&this.transformation==w$v.transformation},w$v.cloneTo=function(w$v){var w$l=w$v;this.extents.cloneTo(w$l.extents),this.transformation.cloneTo(w$l.transformation)},w$B.createByBoundBox=function(w$v,w$l){var w$L=w$v.min,w$A=w$v.max;w$Zl.subtract(w$A,w$L,w$B._tempV30),w$Zl.scale(w$B._tempV30,.5,w$B._tempV30),w$Zl.add(w$L,w$B._tempV30,w$B._tempV31),w$Zl.subtract(w$A,w$B._tempV31,w$B._tempV32),w$vl.translation(w$B._tempV31,w$B._tempM0);var w$x=w$B._tempV32.clone(),w$m=w$B._tempM0.clone();w$l.extents=w$x,w$l.transformation=w$m},w$B.createByMinAndMaxVertex=function(w$v,w$l){return w$Zl.subtract(w$l,w$v,w$B._tempV30),w$Zl.scale(w$B._tempV30,.5,w$B._tempV30),w$Zl.add(w$v,w$B._tempV30,w$B._tempV31),w$Zl.subtract(w$l,w$B._tempV31,w$B._tempV32),w$vl.translation(w$B._tempV31,w$B._tempM0),new w$B(w$B._tempV32,w$B._tempM0)},w$B._getRows=function(w$v,w$l){w$l.length=3;var w$L=w$v.elements,w$A=w$l[0].elements;w$A[0]=w$L[0],w$A[1]=w$L[1],w$A[2]=w$L[2];var w$x=w$l[1].elements;w$x[0]=w$L[4],w$x[1]=w$L[5],w$x[2]=w$L[6];var w$m=w$l[2].elements;w$m[0]=w$L[8],w$m[1]=w$L[9],w$m[2]=w$L[10]},w$B.getObbtoObbMatrix4x4=function(w$v,w$l,w$L,w$A){var w$x=w$v.transformation,w$m=w$l.transformation;if(w$L){w$B._getRows(w$x,w$B._rows1),w$B._getRows(w$m,w$B._rows2);for(var w$Z=0;w$Z<3;w$Z++)for(var w$O=0;w$O<3;w$O++)w$A.setElementByRowColumn(w$Z,w$O,w$Zl.dot(w$B._rows2[w$Z],w$B._rows1[w$O]));w$l.getCenter(w$B._tempV30),w$v.getCenter(w$B._tempV31),w$Zl.subtract(w$B._tempV30,w$B._tempV31,w$B._tempV32);var w$e=w$A.elements;w$e[12]=w$Zl.dot(w$B._tempV32,w$B._rows1[0]),w$e[13]=w$Zl.dot(w$B._tempV32,w$B._rows1[1]),w$e[14]=w$Zl.dot(w$B._tempV32,w$B._rows1[2]),w$e[15]=1}else w$x.invert(w$B._tempM0),w$vl.multiply(w$m,w$B._tempM0,w$A)},w$B.merge=function(w$v,w$l,w$L){var w$A=w$v.extents,w$x=w$v.transformation;w$B.getObbtoObbMatrix4x4(w$v,w$l,w$L,w$B._tempM0),w$l._getLocalCorners(w$B._corners),w$Zl.transformCoordinate(w$B._corners[0],w$B._tempM0,w$B._corners[0]),w$Zl.transformCoordinate(w$B._corners[1],w$B._tempM0,w$B._corners[1]),w$Zl.transformCoordinate(w$B._corners[2],w$B._tempM0,w$B._corners[2]),w$Zl.transformCoordinate(w$B._corners[3],w$B._tempM0,w$B._corners[3]),w$Zl.transformCoordinate(w$B._corners[4],w$B._tempM0,w$B._corners[4]),w$Zl.transformCoordinate(w$B._corners[5],w$B._tempM0,w$B._corners[5]),w$Zl.transformCoordinate(w$B._corners[6],w$B._tempM0,w$B._corners[6]),w$Zl.transformCoordinate(w$B._corners[7],w$B._tempM0,w$B._corners[7]),w$Zl.scale(w$A,-1,w$B._boxBound1.min),w$A.cloneTo(w$B._boxBound1.max),w$sv.createfromPoints(w$B._corners,w$B._boxBound2),w$sv.merge(w$B._boxBound2,w$B._boxBound1,w$B._boxBound3);var w$m=w$B._boxBound3.min,w$Z=w$B._boxBound3.max;w$Zl.subtract(w$Z,w$m,w$B._tempV30),w$Zl.scale(w$B._tempV30,.5,w$B._tempV30),w$Zl.add(w$m,w$B._tempV30,w$B._tempV32),w$Zl.subtract(w$Z,w$B._tempV32,w$A),w$Zl.transformCoordinate(w$B._tempV32,w$x,w$B._tempV33)},w$o(w$B,["_tempV30",function(){return this._tempV30=new w$Zl},"_tempV31",function(){return this._tempV31=new w$Zl},"_tempV32",function(){return this._tempV32=new w$Zl},"_tempV33",function(){return this._tempV33=new w$Zl},"_tempV34",function(){return this._tempV34=new w$Zl},"_tempV35",function(){return this._tempV35=new w$Zl},"_tempV36",function(){return this._tempV36=new w$Zl},"_tempM0",function(){return this._tempM0=new w$vl},"_tempM1",function(){return this._tempM1=new w$vl},"_corners",function(){return this._corners=[new w$Zl,new w$Zl,new w$Zl,new w$Zl,new w$Zl,new w$Zl,new w$Zl,new w$Zl]},"_rows1",function(){return this._rows1=[new w$Zl,new w$Zl,new w$Zl]},"_rows2",function(){return this._rows2=[new w$Zl,new w$Zl,new w$Zl]},"_ray",function(){return this._ray=new w$xl(new w$Zl,new w$Zl)},"_boxBound1",function(){return this._boxBound1=new w$sv(new w$Zl,new w$Zl)},"_boxBound2",function(){return this._boxBound2=new w$sv(new w$Zl,new w$Zl)},"_boxBound3",function(){return this._boxBound3=new w$sv(new w$Zl,new w$Zl)}])}(),function(){function w$f(w$v,w$l){this.normal=null,this.distance=NaN,void 0===w$l&&(w$l=0),this.normal=w$v,this.distance=w$l}return w$r(w$f,"laya.d3.math.Plane"),w$f.prototype.normalize=function(){var w$v=this.normal.elements,w$l=w$v[0],w$L=w$v[1],w$A=w$v[2],w$x=1/Math.sqrt(w$l*w$l+w$L*w$L+w$A*w$A);w$v[0]=w$l*w$x,w$v[1]=w$L*w$x,w$v[2]=w$A*w$x,this.distance*=w$x},w$f.createPlaneBy3P=function(w$v,w$l,w$L){var w$A=w$v.elements,w$x=w$l.elements,w$m=w$L.elements,w$Z=w$x[0]-w$A[0],w$O=w$x[1]-w$A[1],w$e=w$x[2]-w$A[2],w$$=w$m[0]-w$A[0],w$_=w$m[1]-w$A[1],w$o=w$m[2]-w$A[2],w$K=w$O*w$o-w$e*w$_,w$r=w$e*w$$-w$Z*w$o,w$G=w$Z*w$_-w$O*w$$,w$c=1/Math.sqrt(w$K*w$K+w$r*w$r+w$G*w$G),w$d=w$K*w$c,w$C=w$r*w$c,w$J=w$G*w$c,w$B=w$f._TEMPVec3.elements;w$B[0]=w$d,w$B[1]=w$C,w$B[2]=w$J;var w$X=-(w$d*w$A[0]+w$C*w$A[1]+w$J*w$A[2]);return new w$f(w$f._TEMPVec3,w$X)},w$f.PlaneIntersectionType_Back=0,w$f.PlaneIntersectionType_Front=1,w$f.PlaneIntersectionType_Intersecting=2,w$o(w$f,["_TEMPVec3",function(){return this._TEMPVec3=new w$Zl}]),w$f}()),w$Ll=function(){function w$x(w$v,w$l,w$L,w$A){this.elements=new Float32Array(4),void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0),void 0===w$A&&(w$A=1),this.elements[0]=w$v,this.elements[1]=w$l,this.elements[2]=w$L,this.elements[3]=w$A}w$r(w$x,"laya.d3.math.Quaternion");var w$v=w$x.prototype;return w$f.imps(w$v,{"laya.d3.core.IClone":!0}),w$v.scaling=function(w$v,w$l){var w$L=w$l.elements,w$A=this.elements;w$L[0]=w$A[0]*w$v,w$L[1]=w$A[1]*w$v,w$L[2]=w$A[2]*w$v,w$L[3]=w$A[3]*w$v},w$v.normalize=function(w$v){var w$l=w$v.elements,w$L=this.elements,w$A=w$L[0],w$x=w$L[1],w$m=w$L[2],w$Z=w$L[3],w$O=w$A*w$A+w$x*w$x+w$m*w$m+w$Z*w$Z;0<w$O&&(w$O=1/Math.sqrt(w$O),w$l[0]=w$A*w$O,w$l[1]=w$x*w$O,w$l[2]=w$m*w$O,w$l[3]=w$Z*w$O)},w$v.length=function(){var w$v=this.elements,w$l=w$v[0],w$L=w$v[1],w$A=w$v[2],w$x=w$v[3];return Math.sqrt(w$l*w$l+w$L*w$L+w$A*w$A+w$x*w$x)},w$v.rotateX=function(w$v,w$l){var w$L=w$l.elements,w$A=this.elements;w$v*=.5;var w$x=w$A[0],w$m=w$A[1],w$Z=w$A[2],w$O=w$A[3],w$e=Math.sin(w$v),w$$=Math.cos(w$v);w$L[0]=w$x*w$$+w$O*w$e,w$L[1]=w$m*w$$+w$Z*w$e,w$L[2]=w$Z*w$$-w$m*w$e,w$L[3]=w$O*w$$-w$x*w$e},w$v.rotateY=function(w$v,w$l){var w$L=w$l.elements,w$A=this.elements;w$v*=.5;var w$x=w$A[0],w$m=w$A[1],w$Z=w$A[2],w$O=w$A[3],w$e=Math.sin(w$v),w$$=Math.cos(w$v);w$L[0]=w$x*w$$-w$Z*w$e,w$L[1]=w$m*w$$+w$O*w$e,w$L[2]=w$Z*w$$+w$x*w$e,w$L[3]=w$O*w$$-w$m*w$e},w$v.rotateZ=function(w$v,w$l){var w$L=w$l.elements,w$A=this.elements;w$v*=.5;var w$x=w$A[0],w$m=w$A[1],w$Z=w$A[2],w$O=w$A[3],w$e=Math.sin(w$v),w$$=Math.cos(w$v);w$L[0]=w$x*w$$+w$m*w$e,w$L[1]=w$m*w$$-w$x*w$e,w$L[2]=w$Z*w$$+w$O*w$e,w$L[3]=w$O*w$$-w$Z*w$e},w$v.getYawPitchRoll=function(w$v){w$Zl.transformQuat(w$Zl.ForwardRH,this,w$x.TEMPVector31),w$Zl.transformQuat(w$Zl.Up,this,w$x.TEMPVector32);var w$l=w$x.TEMPVector32.elements;w$x.angleTo(w$Zl.ZERO,w$x.TEMPVector31,w$x.TEMPVector33);var w$L=w$x.TEMPVector33.elements;w$L[0]==Math.PI/2?(w$L[1]=w$x.arcTanAngle(w$l[2],w$l[0]),w$L[2]=0):w$L[0]==-Math.PI/2?(w$L[1]=w$x.arcTanAngle(-w$l[2],-w$l[0]),w$L[2]=0):(w$vl.createRotationY(-w$L[1],w$x.TEMPMatrix0),w$vl.createRotationX(-w$L[0],w$x.TEMPMatrix1),w$Zl.transformCoordinate(w$x.TEMPVector32,w$x.TEMPMatrix0,w$x.TEMPVector32),w$Zl.transformCoordinate(w$x.TEMPVector32,w$x.TEMPMatrix1,w$x.TEMPVector32),w$L[2]=w$x.arcTanAngle(w$l[1],-w$l[0])),w$L[1]<=-Math.PI&&(w$L[1]=Math.PI),w$L[2]<=-Math.PI&&(w$L[2]=Math.PI),w$L[1]>=Math.PI&&w$L[2]>=Math.PI&&(w$L[1]=0,w$L[2]=0,w$L[0]=Math.PI-w$L[0]);var w$A=w$v.elements;w$A[0]=w$L[1],w$A[1]=w$L[0],w$A[2]=w$L[2]},w$v.invert=function(w$v){var w$l=w$v.elements,w$L=this.elements,w$A=w$L[0],w$x=w$L[1],w$m=w$L[2],w$Z=w$L[3],w$O=w$A*w$A+w$x*w$x+w$m*w$m+w$Z*w$Z,w$e=w$O?1/w$O:0;w$l[0]=-w$A*w$e,w$l[1]=-w$x*w$e,w$l[2]=-w$m*w$e,w$l[3]=w$Z*w$e},w$v.identity=function(){var w$v=this.elements;w$v[0]=0,w$v[1]=0,w$v[2]=0,w$v[3]=1},w$v.fromArray=function(w$v,w$l){void 0===w$l&&(w$l=0),this.elements[0]=w$v[w$l+0],this.elements[1]=w$v[w$l+1],this.elements[2]=w$v[w$l+2],this.elements[3]=w$v[w$l+3]},w$v.cloneTo=function(w$v){var w$l,w$L,w$A;if((w$L=this.elements)!==(w$A=w$v.elements))for(w$l=0;w$l<4;++w$l)w$A[w$l]=w$L[w$l]},w$v.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$v.equals=function(w$v){var w$l=this.elements,w$L=w$v.elements;return w$Uv.nearEqual(w$l[0],w$L[0])&&w$Uv.nearEqual(w$l[1],w$L[1])&&w$Uv.nearEqual(w$l[2],w$L[2])&&w$Uv.nearEqual(w$l[3],w$L[3])},w$v.lengthSquared=function(){var w$v=this.elements[0],w$l=this.elements[1],w$L=this.elements[2],w$A=this.elements[3];return w$v*w$v+w$l*w$l+w$L*w$L+w$A*w$A},w$G(0,w$v,"x",function(){return this.elements[0]}),w$G(0,w$v,"y",function(){return this.elements[1]}),w$G(0,w$v,"z",function(){return this.elements[2]}),w$G(0,w$v,"w",function(){return this.elements[3]}),w$x.createFromYawPitchRoll=function(w$v,w$l,w$L,w$A){var w$x=.5*w$L,w$m=.5*w$l,w$Z=.5*w$v,w$O=Math.sin(w$x),w$e=Math.cos(w$x),w$$=Math.sin(w$m),w$_=Math.cos(w$m),w$o=Math.sin(w$Z),w$K=Math.cos(w$Z),w$r=w$A.elements;w$r[0]=w$K*w$$*w$e+w$o*w$_*w$O,w$r[1]=w$o*w$_*w$e-w$K*w$$*w$O,w$r[2]=w$K*w$_*w$O-w$o*w$$*w$e,w$r[3]=w$K*w$_*w$e+w$o*w$$*w$O},w$x.multiply=function(w$v,w$l,w$L){var w$A=w$v.elements,w$x=w$l.elements,w$m=w$L.elements,w$Z=w$A[0],w$O=w$A[1],w$e=w$A[2],w$$=w$A[3],w$_=w$x[0],w$o=w$x[1],w$K=w$x[2],w$r=w$x[3],w$G=w$O*w$K-w$e*w$o,w$c=w$e*w$_-w$Z*w$K,w$d=w$Z*w$o-w$O*w$_,w$C=w$Z*w$_+w$O*w$o+w$e*w$K;w$m[0]=w$Z*w$r+w$_*w$$+w$G,w$m[1]=w$O*w$r+w$o*w$$+w$c,w$m[2]=w$e*w$r+w$K*w$$+w$d,w$m[3]=w$$*w$r-w$C},w$x.arcTanAngle=function(w$v,w$l){return 0==w$v?1==w$l?Math.PI/2:-Math.PI/2:0<w$v?Math.atan(w$l/w$v):w$v<0?0<w$l?Math.atan(w$l/w$v)+Math.PI:Math.atan(w$l/w$v)-Math.PI:0},w$x.angleTo=function(w$v,w$l,w$L){w$Zl.subtract(w$l,w$v,w$x.TEMPVector30),w$Zl.normalize(w$x.TEMPVector30,w$x.TEMPVector30),w$L.elements[0]=Math.asin(w$x.TEMPVector30.y),w$L.elements[1]=w$x.arcTanAngle(-w$x.TEMPVector30.z,-w$x.TEMPVector30.x)},w$x.createFromAxisAngle=function(w$v,w$l,w$L){var w$A=w$L.elements,w$x=w$v.elements;w$l*=.5;var w$m=Math.sin(w$l);w$A[0]=w$m*w$x[0],w$A[1]=w$m*w$x[1],w$A[2]=w$m*w$x[2],w$A[3]=Math.cos(w$l)},w$x.createFromMatrix3x3=function(w$v,w$l){var w$L,w$A=w$l.elements,w$x=w$v.elements,w$m=w$x[0]+w$x[4]+w$x[8];if(0<w$m)w$L=Math.sqrt(w$m+1),w$A[3]=.5*w$L,w$L=.5/w$L,w$A[0]=(w$x[5]-w$x[7])*w$L,w$A[1]=(w$x[6]-w$x[2])*w$L,w$A[2]=(w$x[1]-w$x[3])*w$L;else{var w$Z=0;w$x[4]>w$x[0]&&(w$Z=1),w$x[8]>w$x[3*w$Z+w$Z]&&(w$Z=2);var w$O=(w$Z+1)%3,w$e=(w$Z+2)%3;w$L=Math.sqrt(w$x[3*w$Z+w$Z]-w$x[3*w$O+w$O]-w$x[3*w$e+w$e]+1),w$A[w$Z]=.5*w$L,w$L=.5/w$L,w$A[3]=(w$x[3*w$O+w$e]-w$x[3*w$e+w$O])*w$L,w$A[w$O]=(w$x[3*w$O+w$Z]+w$x[3*w$Z+w$O])*w$L,w$A[w$e]=(w$x[3*w$e+w$Z]+w$x[3*w$Z+w$e])*w$L}},w$x.createFromMatrix4x4=function(w$v,w$l){var w$L,w$A,w$x=w$v.elements,w$m=w$l.elements,w$Z=w$x[0]+w$x[5]+w$x[10];0<w$Z?(w$L=Math.sqrt(w$Z+1),w$m[3]=.5*w$L,w$L=.5/w$L,w$m[0]=(w$x[6]-w$x[9])*w$L,w$m[1]=(w$x[8]-w$x[2])*w$L,w$m[2]=(w$x[1]-w$x[4])*w$L):w$x[0]>=w$x[5]&&w$x[0]>=w$x[10]?(w$A=.5/(w$L=Math.sqrt(1+w$x[0]-w$x[5]-w$x[10])),w$m[0]=.5*w$L,w$m[1]=(w$x[1]+w$x[4])*w$A,w$m[2]=(w$x[2]+w$x[8])*w$A,w$m[3]=(w$x[6]-w$x[9])*w$A):w$x[5]>w$x[10]?(w$A=.5/(w$L=Math.sqrt(1+w$x[5]-w$x[0]-w$x[10])),w$m[0]=(w$x[4]+w$x[1])*w$A,w$m[1]=.5*w$L,w$m[2]=(w$x[9]+w$x[6])*w$A,w$m[3]=(w$x[8]-w$x[2])*w$A):(w$A=.5/(w$L=Math.sqrt(1+w$x[10]-w$x[0]-w$x[5])),w$m[0]=(w$x[8]+w$x[2])*w$A,w$m[1]=(w$x[9]+w$x[6])*w$A,w$m[2]=.5*w$L,w$m[3]=(w$x[1]-w$x[4])*w$A)},w$x.slerp=function(w$v,w$l,w$L,w$A){var w$x,w$m,w$Z,w$O,w$e,w$$=w$v.elements,w$_=w$l.elements,w$o=w$A.elements,w$K=w$$[0],w$r=w$$[1],w$G=w$$[2],w$c=w$$[3],w$d=w$_[0],w$C=w$_[1],w$J=w$_[2],w$B=w$_[3];return(w$m=w$K*w$d+w$r*w$C+w$G*w$J+w$c*w$B)<0&&(w$m=-w$m,w$d=-w$d,w$C=-w$C,w$J=-w$J,w$B=-w$B),w$e=1e-6<1-w$m?(w$x=Math.acos(w$m),w$Z=Math.sin(w$x),w$O=Math.sin((1-w$L)*w$x)/w$Z,Math.sin(w$L*w$x)/w$Z):(w$O=1-w$L,w$L),w$o[0]=w$O*w$K+w$e*w$d,w$o[1]=w$O*w$r+w$e*w$C,w$o[2]=w$O*w$G+w$e*w$J,w$o[3]=w$O*w$c+w$e*w$B,w$o},w$x.lerp=function(w$v,w$l,w$L,w$A){var w$x=w$A.elements,w$m=w$v.elements,w$Z=w$l.elements,w$O=w$m[0],w$e=w$m[1],w$$=w$m[2],w$_=w$m[3];w$x[0]=w$O+w$L*(w$Z[0]-w$O),w$x[1]=w$e+w$L*(w$Z[1]-w$e),w$x[2]=w$$+w$L*(w$Z[2]-w$$),w$x[3]=w$_+w$L*(w$Z[3]-w$_)},w$x.add=function(w$v,w$l,w$L){var w$A=w$L.elements,w$x=w$v.elements,w$m=w$l.elements;w$A[0]=w$x[0]+w$m[0],w$A[1]=w$x[1]+w$m[1],w$A[2]=w$x[2]+w$m[2],w$A[3]=w$x[3]+w$m[3]},w$x.dot=function(w$v,w$l){var w$L=w$v.elements,w$A=w$l.elements;return w$L[0]*w$A[0]+w$L[1]*w$A[1]+w$L[2]*w$A[2]+w$L[3]*w$A[3]},w$x.rotationLookAt=function(w$v,w$l,w$L){w$x.lookAt(w$Zl.ZERO,w$v,w$l,w$L)},w$x.lookAt=function(w$v,w$l,w$L,w$A){w$zv.lookAt(w$v,w$l,w$L,w$x._tempMatrix3x3),w$x.rotationMatrix(w$x._tempMatrix3x3,w$A)},w$x.invert=function(w$v,w$l){var w$L=w$v.elements,w$A=w$l.elements,w$x=w$v.lengthSquared();w$Uv.isZero(w$x)||(w$x=1/w$x,w$A[0]=-w$L[0]*w$x,w$A[1]=-w$L[1]*w$x,w$A[2]=-w$L[2]*w$x,w$A[3]=w$L[3]*w$x)},w$x.rotationMatrix=function(w$v,w$l){var w$L=w$v.elements,w$A=w$L[0],w$x=w$L[1],w$m=w$L[2],w$Z=w$L[3],w$O=w$L[4],w$e=w$L[5],w$$=w$L[6],w$_=w$L[7],w$o=w$L[8],w$K=w$l.elements,w$r=NaN,w$G=NaN,w$c=w$A+w$O+w$o;0<w$c?(w$r=Math.sqrt(w$c+1),w$K[3]=.5*w$r,w$r=.5/w$r,w$K[0]=(w$e-w$_)*w$r,w$K[1]=(w$$-w$m)*w$r,w$K[2]=(w$x-w$Z)*w$r):w$O<=w$A&&w$o<=w$A?(w$G=.5/(w$r=Math.sqrt(1+w$A-w$O-w$o)),w$K[0]=.5*w$r,w$K[1]=(w$x+w$Z)*w$G,w$K[2]=(w$m+w$$)*w$G,w$K[3]=(w$e-w$_)*w$G):w$o<w$O?(w$G=.5/(w$r=Math.sqrt(1+w$O-w$A-w$o)),w$K[0]=(w$Z+w$x)*w$G,w$K[1]=.5*w$r,w$K[2]=(w$_+w$e)*w$G,w$K[3]=(w$$-w$m)*w$G):(w$G=.5/(w$r=Math.sqrt(1+w$o-w$A-w$O)),w$K[0]=(w$$+w$m)*w$G,w$K[1]=(w$_+w$e)*w$G,w$K[2]=.5*w$r,w$K[3]=(w$x-w$Z)*w$G)},w$x.DEFAULT=new w$x,w$o(w$x,["TEMPVector30",function(){return this.TEMPVector30=new w$Zl},"TEMPVector31",function(){return this.TEMPVector31=new w$Zl},"TEMPVector32",function(){return this.TEMPVector32=new w$Zl},"TEMPVector33",function(){return this.TEMPVector33=new w$Zl},"TEMPMatrix0",function(){return this.TEMPMatrix0=new w$vl},"TEMPMatrix1",function(){return this.TEMPMatrix1=new w$vl},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new w$zv},"NAN",function(){return this.NAN=new w$x(NaN,NaN,NaN,NaN)}]),w$x}(),w$Al=function(){function w$v(w$v){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=w$v,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}w$r(w$v,"laya.d3.math.Rand");var w$l=w$v.prototype;return w$l.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},w$l.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},w$l.getSignedFloat=function(){return 2*this.getFloat()-1},w$G(0,w$l,"seed",function(){return this.seeds[0]},function(w$v){this.seeds[0]=w$v,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),w$v.getFloatFromInt=function(w$v){return 1/8388607*(8388607&w$v)},w$v.getByteFromInt=function(w$v){return(8388607&w$v)>>>15},w$v}(),w$xl=(function(){function w$x(w$v){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(w$v instanceof Array)||4!==w$v.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|w$v[0],this._state0L=0|w$v[1],this._state1U=0|w$v[2],this._state1L=0|w$v[3]}w$r(w$x,"laya.d3.math.RandX");var w$v=w$x.prototype;w$v.randomint=function(){var w$v=this._state0U,w$l=this._state0L,w$L=this._state1U,w$A=this._state1L,w$x=(w$A>>>0)+(w$l>>>0),w$m=w$L+w$v+(w$x/2>>>31)>>>0,w$Z=w$x>>>0,w$O=0,w$e=0;w$O=(w$v^=w$O=w$v<<23|(-512&w$l)>>>9)^(this._state0U=w$L),w$e=(w$l^=w$e=w$l<<23)^(this._state0L=w$A);w$O^=w$v>>>18,w$e^=w$l>>>18|(262143&w$v)<<14;return w$O^=w$L>>>5,w$e^=w$A>>>5|(31&w$L)<<27,this._state1U=w$O,this._state1L=w$e,[w$m,w$Z]},w$v.random=function(){var w$v=this.randomint(),w$l=w$v[0],w$L=1023<<20|w$l>>>12,w$A=0|(w$v[1]>>>12|(4095&w$l)<<20);return w$x._CONVERTION_BUFFER.setUint32(0,w$L,!1),w$x._CONVERTION_BUFFER.setUint32(4,w$A,!1),w$Al._CONVERTION_BUFFER.getFloat64(0,!1)-1},w$o(w$x,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new w$Al([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function w$v(w$v,w$l){this.origin=null,this.direction=null,this.origin=w$v,this.direction=w$l}return w$r(w$v,"laya.d3.math.Ray"),w$v}()),w$ml=function(){function w$v(w$v,w$l){this.elements=new Float32Array(2),void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=0);var w$L=this.elements;w$L[0]=w$v,w$L[1]=w$l}w$r(w$v,"laya.d3.math.Vector2");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.core.IClone":!0}),w$l.fromArray=function(w$v,w$l){void 0===w$l&&(w$l=0),this.elements[0]=w$v[w$l+0],this.elements[1]=w$v[w$l+1]},w$l.cloneTo=function(w$v){var w$l=w$v.elements,w$L=this.elements;w$l[0]=w$L[0],w$l[1]=w$L[1]},w$l.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$G(0,w$l,"x",function(){return this.elements[0]},function(w$v){this.elements[0]=w$v}),w$G(0,w$l,"y",function(){return this.elements[1]},function(w$v){this.elements[1]=w$v}),w$v.scale=function(w$v,w$l,w$L){var w$A=w$L.elements,w$x=w$v.elements;w$A[0]=w$x[0]*w$l,w$A[1]=w$x[1]*w$l},w$o(w$v,["ZERO",function(){return this.ZERO=new w$v(0,0)},"ONE",function(){return this.ONE=new w$v(1,1)}]),w$v}(),w$Zl=function(){function w$_(w$v,w$l,w$L){this.elements=new Float32Array(3),void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0);var w$A=this.elements;w$A[0]=w$v,w$A[1]=w$l,w$A[2]=w$L}w$r(w$_,"laya.d3.math.Vector3");var w$v=w$_.prototype;return w$f.imps(w$v,{"laya.d3.core.IClone":!0}),w$v.fromArray=function(w$v,w$l){void 0===w$l&&(w$l=0),this.elements[0]=w$v[w$l+0],this.elements[1]=w$v[w$l+1],this.elements[2]=w$v[w$l+2]},w$v.cloneTo=function(w$v){var w$l=w$v.elements,w$L=this.elements;w$l[0]=w$L[0],w$l[1]=w$L[1],w$l[2]=w$L[2]},w$v.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$v.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},w$v.reset=function(w$v,w$l,w$L){this.elements[0]=w$v,this.elements[1]=w$l,this.elements[2]=w$L},w$G(0,w$v,"x",function(){return this.elements[0]},function(w$v){this.elements[0]=w$v}),w$G(0,w$v,"y",function(){return this.elements[1]},function(w$v){this.elements[1]=w$v}),w$G(0,w$v,"z",function(){return this.elements[2]},function(w$v){this.elements[2]=w$v}),w$_.distanceSquared=function(w$v,w$l){var w$L=w$v.elements,w$A=w$l.elements,w$x=w$L[0]-w$A[0],w$m=w$L[1]-w$A[1],w$Z=w$L[2]-w$A[2];return w$x*w$x+w$m*w$m+w$Z*w$Z},w$_.distance=function(w$v,w$l){var w$L=w$v.elements,w$A=w$l.elements,w$x=w$L[0]-w$A[0],w$m=w$L[1]-w$A[1],w$Z=w$L[2]-w$A[2];return Math.sqrt(w$x*w$x+w$m*w$m+w$Z*w$Z)},w$_.min=function(w$v,w$l,w$L){var w$A=w$L.elements,w$x=w$v.elements,w$m=w$l.elements;w$A[0]=Math.min(w$x[0],w$m[0]),w$A[1]=Math.min(w$x[1],w$m[1]),w$A[2]=Math.min(w$x[2],w$m[2])},w$_.max=function(w$v,w$l,w$L){var w$A=w$L.elements,w$x=w$v.elements,w$m=w$l.elements;w$A[0]=Math.max(w$x[0],w$m[0]),w$A[1]=Math.max(w$x[1],w$m[1]),w$A[2]=Math.max(w$x[2],w$m[2])},w$_.transformQuat=function(w$v,w$l,w$L){var w$A=w$L.elements,w$x=w$v.elements,w$m=w$l.elements,w$Z=w$x[0],w$O=w$x[1],w$e=w$x[2],w$$=w$m[0],w$_=w$m[1],w$o=w$m[2],w$K=w$m[3],w$r=w$K*w$Z+w$_*w$e-w$o*w$O,w$G=w$K*w$O+w$o*w$Z-w$$*w$e,w$c=w$K*w$e+w$$*w$O-w$_*w$Z,w$d=-w$$*w$Z-w$_*w$O-w$o*w$e;w$A[0]=w$r*w$K+w$d*-w$$+w$G*-w$o-w$c*-w$_,w$A[1]=w$G*w$K+w$d*-w$_+w$c*-w$$-w$r*-w$o,w$A[2]=w$c*w$K+w$d*-w$o+w$r*-w$_-w$G*-w$$},w$_.scalarLength=function(w$v){var w$l=w$v.elements,w$L=w$l[0],w$A=w$l[1],w$x=w$l[2];return Math.sqrt(w$L*w$L+w$A*w$A+w$x*w$x)},w$_.scalarLengthSquared=function(w$v){var w$l=w$v.elements,w$L=w$l[0],w$A=w$l[1],w$x=w$l[2];return w$L*w$L+w$A*w$A+w$x*w$x},w$_.normalize=function(w$v,w$l){var w$L=w$v.elements,w$A=w$l.elements,w$x=w$L[0],w$m=w$L[1],w$Z=w$L[2],w$O=w$x*w$x+w$m*w$m+w$Z*w$Z;0<w$O&&(w$O=1/Math.sqrt(w$O),w$A[0]=w$L[0]*w$O,w$A[1]=w$L[1]*w$O,w$A[2]=w$L[2]*w$O)},w$_.multiply=function(w$v,w$l,w$L){var w$A=w$L.elements,w$x=w$v.elements,w$m=w$l.elements;w$A[0]=w$x[0]*w$m[0],w$A[1]=w$x[1]*w$m[1],w$A[2]=w$x[2]*w$m[2]},w$_.scale=function(w$v,w$l,w$L){var w$A=w$L.elements,w$x=w$v.elements;w$A[0]=w$x[0]*w$l,w$A[1]=w$x[1]*w$l,w$A[2]=w$x[2]*w$l},w$_.lerp=function(w$v,w$l,w$L,w$A){var w$x=w$A.elements,w$m=w$v.elements,w$Z=w$l.elements,w$O=w$m[0],w$e=w$m[1],w$$=w$m[2];w$x[0]=w$O+w$L*(w$Z[0]-w$O),w$x[1]=w$e+w$L*(w$Z[1]-w$e),w$x[2]=w$$+w$L*(w$Z[2]-w$$)},w$_.transformV3ToV3=function(w$v,w$l,w$L){var w$A=w$_._tempVector4;w$_.transformV3ToV4(w$v,w$l,w$A);var w$x=w$A.elements,w$m=w$L.elements;w$m[0]=w$x[0],w$m[1]=w$x[1],w$m[2]=w$x[2]},w$_.transformV3ToV4=function(w$v,w$l,w$L){var w$A=w$v.elements,w$x=w$A[0],w$m=w$A[1],w$Z=w$A[2],w$O=w$l.elements,w$e=w$L.elements;w$e[0]=w$x*w$O[0]+w$m*w$O[4]+w$Z*w$O[8]+w$O[12],w$e[1]=w$x*w$O[1]+w$m*w$O[5]+w$Z*w$O[9]+w$O[13],w$e[2]=w$x*w$O[2]+w$m*w$O[6]+w$Z*w$O[10]+w$O[14],w$e[3]=w$x*w$O[3]+w$m*w$O[7]+w$Z*w$O[11]+w$O[15]},w$_.TransformNormal=function(w$v,w$l,w$L){var w$A=w$v.elements,w$x=w$A[0],w$m=w$A[1],w$Z=w$A[2],w$O=w$l.elements,w$e=w$L.elements;w$e[0]=w$x*w$O[0]+w$m*w$O[4]+w$Z*w$O[8],w$e[1]=w$x*w$O[1]+w$m*w$O[5]+w$Z*w$O[9],w$e[2]=w$x*w$O[2]+w$m*w$O[6]+w$Z*w$O[10]},w$_.transformCoordinate=function(w$v,w$l,w$L){var w$A=w$_._tempVector4.elements,w$x=w$v.elements,w$m=w$x[0],w$Z=w$x[1],w$O=w$x[2],w$e=w$l.elements;w$A[0]=w$m*w$e[0]+w$Z*w$e[4]+w$O*w$e[8]+w$e[12],w$A[1]=w$m*w$e[1]+w$Z*w$e[5]+w$O*w$e[9]+w$e[13],w$A[2]=w$m*w$e[2]+w$Z*w$e[6]+w$O*w$e[10]+w$e[14],w$A[3]=1/(w$m*w$e[3]+w$Z*w$e[7]+w$O*w$e[11]+w$e[15]);var w$$=w$L.elements;w$$[0]=w$A[0]*w$A[3],w$$[1]=w$A[1]*w$A[3],w$$[2]=w$A[2]*w$A[3]},w$_.Clamp=function(w$v,w$l,w$L,w$A){var w$x=w$v.elements,w$m=w$x[0],w$Z=w$x[1],w$O=w$x[2],w$e=w$l.elements,w$$=w$e[0],w$_=w$e[1],w$o=w$e[2],w$K=w$L.elements,w$r=w$K[0],w$G=w$K[1],w$c=w$K[2],w$d=w$A.elements;w$m=(w$m=w$r<w$m?w$r:w$m)<w$$?w$$:w$m,w$Z=(w$Z=w$G<w$Z?w$G:w$Z)<w$_?w$_:w$Z,w$O=(w$O=w$c<w$O?w$c:w$O)<w$o?w$o:w$O,w$d[0]=w$m,w$d[1]=w$Z,w$d[2]=w$O},w$_.add=function(w$v,w$l,w$L){var w$A=w$L.elements,w$x=w$v.elements,w$m=w$l.elements;w$A[0]=w$x[0]+w$m[0],w$A[1]=w$x[1]+w$m[1],w$A[2]=w$x[2]+w$m[2]},w$_.subtract=function(w$v,w$l,w$L){var w$A=w$L.elements,w$x=w$v.elements,w$m=w$l.elements;w$A[0]=w$x[0]-w$m[0],w$A[1]=w$x[1]-w$m[1],w$A[2]=w$x[2]-w$m[2]},w$_.cross=function(w$v,w$l,w$L){var w$A=w$v.elements,w$x=w$l.elements,w$m=w$L.elements,w$Z=w$A[0],w$O=w$A[1],w$e=w$A[2],w$$=w$x[0],w$_=w$x[1],w$o=w$x[2];w$m[0]=w$O*w$o-w$e*w$_,w$m[1]=w$e*w$$-w$Z*w$o,w$m[2]=w$Z*w$_-w$O*w$$},w$_.dot=function(w$v,w$l){var w$L=w$v.elements,w$A=w$l.elements;return w$L[0]*w$A[0]+w$L[1]*w$A[1]+w$L[2]*w$A[2]},w$_.equals=function(w$v,w$l){var w$L=w$v.elements,w$A=w$l.elements;return w$Uv.nearEqual(Math.abs(w$L[0]),Math.abs(w$A[0]))&&w$Uv.nearEqual(Math.abs(w$L[1]),Math.abs(w$A[1]))&&w$Uv.nearEqual(Math.abs(w$L[2]),Math.abs(w$A[2]))},w$_.ZERO=new w$_(0,0,0),w$_.ONE=new w$_(1,1,1),w$_.NegativeUnitX=new w$_(-1,0,0),w$_.UnitX=new w$_(1,0,0),w$_.UnitY=new w$_(0,1,0),w$_.UnitZ=new w$_(0,0,1),w$_.ForwardRH=new w$_(0,0,-1),w$_.ForwardLH=new w$_(0,0,1),w$_.Up=new w$_(0,1,0),w$_.NAN=new w$_(NaN,NaN,NaN),w$o(w$_,["_tempVector4",function(){return this._tempVector4=new w$Ol}]),w$_}(),w$Ol=function(){function w$v(w$v,w$l,w$L,w$A){this.elements=new Float32Array(4),void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0),void 0===w$A&&(w$A=0);var w$x=this.elements;w$x[0]=w$v,w$x[1]=w$l,w$x[2]=w$L,w$x[3]=w$A}w$r(w$v,"laya.d3.math.Vector4");var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.core.IClone":!0}),w$l.fromArray=function(w$v,w$l){void 0===w$l&&(w$l=0),this.elements[0]=w$v[w$l+0],this.elements[1]=w$v[w$l+1],this.elements[2]=w$v[w$l+2],this.elements[3]=w$v[w$l+3]},w$l.cloneTo=function(w$v){var w$l=w$v.elements,w$L=this.elements;w$l[0]=w$L[0],w$l[1]=w$L[1],w$l[2]=w$L[2],w$l[3]=w$L[3]},w$l.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$l.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},w$l.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},w$G(0,w$l,"x",function(){return this.elements[0]},function(w$v){this.elements[0]=w$v}),w$G(0,w$l,"y",function(){return this.elements[1]},function(w$v){this.elements[1]=w$v}),w$G(0,w$l,"z",function(){return this.elements[2]},function(w$v){this.elements[2]=w$v}),w$G(0,w$l,"w",function(){return this.elements[3]},function(w$v){this.elements[3]=w$v}),w$v.lerp=function(w$v,w$l,w$L,w$A){var w$x=w$A.elements,w$m=w$v.elements,w$Z=w$l.elements,w$O=w$m[0],w$e=w$m[1],w$$=w$m[2],w$_=w$m[3];w$x[0]=w$O+w$L*(w$Z[0]-w$O),w$x[1]=w$e+w$L*(w$Z[1]-w$e),w$x[2]=w$$+w$L*(w$Z[2]-w$$),w$x[3]=w$_+w$L*(w$Z[3]-w$_)},w$v.transformByM4x4=function(w$v,w$l,w$L){var w$A=w$v.elements,w$x=w$A[0],w$m=w$A[1],w$Z=w$A[2],w$O=w$A[3],w$e=w$l.elements,w$$=w$L.elements;w$$[0]=w$x*w$e[0]+w$m*w$e[4]+w$Z*w$e[8]+w$O*w$e[12],w$$[1]=w$x*w$e[1]+w$m*w$e[5]+w$Z*w$e[9]+w$O*w$e[13],w$$[2]=w$x*w$e[2]+w$m*w$e[6]+w$Z*w$e[10]+w$O*w$e[14],w$$[3]=w$x*w$e[3]+w$m*w$e[7]+w$Z*w$e[11]+w$O*w$e[15]},w$v.equals=function(w$v,w$l){var w$L=w$v.elements,w$A=w$l.elements;return w$Uv.nearEqual(Math.abs(w$L[0]),Math.abs(w$A[0]))&&w$Uv.nearEqual(Math.abs(w$L[1]),Math.abs(w$A[1]))&&w$Uv.nearEqual(Math.abs(w$L[2]),Math.abs(w$A[2]))&&w$Uv.nearEqual(Math.abs(w$L[3]),Math.abs(w$A[3]))},w$v.normalize=function(w$v,w$l){var w$L=w$v.elements,w$A=w$l.elements,w$x=w$v.length();0<w$x&&(w$A[0]=w$L[0]*w$x,w$A[1]=w$L[1]*w$x,w$A[2]=w$L[2]*w$x,w$A[3]=w$L[3]*w$x)},w$v.add=function(w$v,w$l,w$L){var w$A=w$L.elements,w$x=w$v.elements,w$m=w$l.elements;w$A[0]=w$x[0]+w$m[0],w$A[1]=w$x[1]+w$m[1],w$A[2]=w$x[2]+w$m[2],w$A[3]=w$x[3]+w$m[3]},w$v.subtract=function(w$v,w$l,w$L){var w$A=w$L.elements,w$x=w$v.elements,w$m=w$l.elements;w$A[0]=w$x[0]-w$m[0],w$A[1]=w$x[1]-w$m[1],w$A[2]=w$x[2]-w$m[2],w$A[3]=w$x[3]-w$m[3]},w$v.multiply=function(w$v,w$l,w$L){var w$A=w$L.elements,w$x=w$v.elements,w$m=w$l.elements;w$A[0]=w$x[0]*w$m[0],w$A[1]=w$x[1]*w$m[1],w$A[2]=w$x[2]*w$m[2],w$A[3]=w$x[3]*w$m[3]},w$v.scale=function(w$v,w$l,w$L){var w$A=w$L.elements,w$x=w$v.elements;w$A[0]=w$x[0]*w$l,w$A[1]=w$x[1]*w$l,w$A[2]=w$x[2]*w$l,w$A[3]=w$x[3]*w$l},w$v.Clamp=function(w$v,w$l,w$L,w$A){var w$x=w$v.elements,w$m=w$x[0],w$Z=w$x[1],w$O=w$x[2],w$e=w$x[3],w$$=w$l.elements,w$_=w$$[0],w$o=w$$[1],w$K=w$$[2],w$r=w$$[3],w$G=w$L.elements,w$c=w$G[0],w$d=w$G[1],w$C=w$G[2],w$J=w$G[3],w$B=w$A.elements;w$m=(w$m=w$c<w$m?w$c:w$m)<w$_?w$_:w$m,w$Z=(w$Z=w$d<w$Z?w$d:w$Z)<w$o?w$o:w$Z,w$O=(w$O=w$C<w$O?w$C:w$O)<w$K?w$K:w$O,w$e=(w$e=w$J<w$e?w$J:w$e)<w$r?w$r:w$e,w$B[0]=w$m,w$B[1]=w$Z,w$B[2]=w$O,w$B[3]=w$e},w$v.distanceSquared=function(w$v,w$l){var w$L=w$v.elements,w$A=w$l.elements,w$x=w$L[0]-w$A[0],w$m=w$L[1]-w$A[1],w$Z=w$L[2]-w$A[2],w$O=w$L[3]-w$A[3];return w$x*w$x+w$m*w$m+w$Z*w$Z+w$O*w$O},w$v.distance=function(w$v,w$l){var w$L=w$v.elements,w$A=w$l.elements,w$x=w$L[0]-w$A[0],w$m=w$L[1]-w$A[1],w$Z=w$L[2]-w$A[2],w$O=w$L[3]-w$A[3];return Math.sqrt(w$x*w$x+w$m*w$m+w$Z*w$Z+w$O*w$O)},w$v.dot=function(w$v,w$l){var w$L=w$v.elements,w$A=w$l.elements;return w$L[0]*w$A[0]+w$L[1]*w$A[1]+w$L[2]*w$A[2]+w$L[3]*w$A[3]},w$v.min=function(w$v,w$l,w$L){var w$A=w$L.elements,w$x=w$v.elements,w$m=w$l.elements;w$A[0]=Math.min(w$x[0],w$m[0]),w$A[1]=Math.min(w$x[1],w$m[1]),w$A[2]=Math.min(w$x[2],w$m[2]),w$A[3]=Math.min(w$x[3],w$m[3])},w$v.max=function(w$v,w$l,w$L){var w$A=w$L.elements,w$x=w$v.elements,w$m=w$l.elements;w$A[0]=Math.max(w$x[0],w$m[0]),w$A[1]=Math.max(w$x[1],w$m[1]),w$A[2]=Math.max(w$x[2],w$m[2]),w$A[3]=Math.max(w$x[3],w$m[3])},w$o(w$v,["ZERO",function(){return this.ZERO=new w$v},"ONE",function(){return this.ONE=new w$v(1,1,1,1)},"UnitX",function(){return this.UnitX=new w$v(1,0,0,0)},"UnitY",function(){return this.UnitY=new w$v(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new w$v(0,0,1,0)},"UnitW",function(){return this.UnitW=new w$v(0,0,0,1)}]),w$v}(),w$el=function(){function w$m(w$v,w$l,w$L,w$A){this.minDepth=0,this.maxDepth=1,this.x=w$v,this.y=w$l,this.width=w$L,this.height=w$A}w$r(w$m,"laya.d3.math.Viewport");var w$v=w$m.prototype;return w$v.project=function(w$v,w$l,w$L){w$Zl.transformV3ToV3(w$v,w$l,w$L);var w$A=w$v.elements,w$x=w$l.elements,w$m=w$L.elements,w$Z=w$A[0]*w$x[3]+w$A[1]*w$x[7]+w$A[2]*w$x[11]+w$x[15];1!==w$Z&&(w$m[0]=w$m[0]/w$Z,w$m[1]=w$m[1]/w$Z,w$m[2]=w$m[2]/w$Z),w$m[0]=.5*(w$m[0]+1)*this.width+this.x,w$m[1]=.5*(1-w$m[1])*this.height+this.y,w$m[2]=w$m[2]*(this.maxDepth-this.minDepth)+this.minDepth},w$v.unprojectFromMat=function(w$v,w$l,w$L){var w$A=w$v.elements,w$x=w$l.elements,w$m=w$L.elements;w$m[0]=(w$A[0]-this.x)/this.width*2-1,w$m[1]=-((w$A[1]-this.y)/this.height*2-1);var w$Z=(this.maxDepth-this.minDepth)/2;w$m[2]=(w$A[2]-this.minDepth-w$Z)/w$Z;var w$O=w$m[0]*w$x[3]+w$m[1]*w$x[7]+w$m[2]*w$x[11]+w$x[15];w$Zl.transformV3ToV3(w$L,w$l,w$L),1!==w$O&&(w$m[0]=w$m[0]/w$O,w$m[1]=w$m[1]/w$O,w$m[2]=w$m[2]/w$O)},w$v.unprojectFromWVP=function(w$v,w$l,w$L,w$A,w$x){w$vl.multiply(w$l,w$L,w$m._tempMatrix4x4),w$A&&w$vl.multiply(w$m._tempMatrix4x4,w$A,w$m._tempMatrix4x4),w$m._tempMatrix4x4.invert(w$m._tempMatrix4x4),this.unprojectFromMat(w$v,w$m._tempMatrix4x4,w$x)},w$o(w$m,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new w$vl}]),w$m}(),w$$l=function(){function w$k(w$v){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=w$v,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}w$r(w$k,"laya.d3.resource.models.SubMesh");var w$v=w$k.prototype;return w$f.imps(w$v,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),w$v._getVertexBuffer=function(w$v){return void 0===w$v&&(w$v=0),0===w$v?this._vertexBuffer:null},w$v._getIndexBuffer=function(){return this._indexBuffer},w$v._getStaticBatchBakedVertexs=function(w$v,w$l){var w$L,w$A,w$x=this._vertexBuffer,w$m=w$x.vertexDeclaration,w$Z=w$m.getVertexElementByUsage(0).offset/4,w$O=w$m.getVertexElementByUsage(3).offset/4,w$e=w$l.meshRender.lightmapScaleOffset,w$$=0,w$_=0,w$o=0,w$K=0,w$r=0,w$G=0;if(w$e)if(w$A=w$m.getVertexElementByUsage(15))w$o=w$m.vertexStride/4,w$L=0<this._vertexCount?w$x.getData().slice(this._vertexStart*w$o,(this._vertexStart+this._vertexCount)*w$o):w$x.getData().slice(),w$K=w$A.offset/4;else{w$o=(w$G=w$m.vertexStride/4)+2,w$L=this._vertexCount?new Float32Array(this._vertexCount*(w$x.vertexDeclaration.vertexStride/4+2)):new Float32Array(w$x.vertexCount*(w$x.vertexDeclaration.vertexStride/4+2)),w$K=(w$r=w$m.getVertexElementByUsage(2).offset/4)+2;var w$c=w$x.getData();for(w$$=0,w$_=w$c.length/w$G;w$$<w$_;w$$++){var w$d=0;w$d=0<this._vertexCount?(this._vertexStart+w$$)*w$G:w$$*w$G;var w$C=w$$*w$o,w$J=0;for(w$J=0;w$J<w$K;w$J++)w$L[w$C+w$J]=w$c[w$d+w$J];for(w$J=w$K;w$J<w$G;w$J++)w$L[w$C+w$J+2]=w$c[w$d+w$J]}}else w$o=w$m.vertexStride/4,w$L=this._vertexCount?w$x.getData().slice(this._vertexStart*w$o,(this._vertexStart+this._vertexCount)*w$o):w$x.getData().slice();if(w$v){var w$B=w$v.worldMatrix,w$X=w$k._tempMatrix4x40;w$B.invert(w$X);var w$f=w$k._tempMatrix4x41,w$w=w$l.transform.worldMatrix;w$vl.multiply(w$X,w$w,w$f)}else w$f=w$l.transform.worldMatrix;var w$H=w$k._tempQuaternion0;for(w$f.decomposeTransRotScale(w$k._tempVector30,w$H,w$k._tempVector31),w$$=0,w$_=w$L.length/w$o;w$$<w$_;w$$++){var w$g=w$$*w$o+w$Z,w$T=w$$*w$o+w$O;if(w$dl.transformVector3ArrayToVector3ArrayCoordinate(w$L,w$g,w$f,w$L,w$g),w$dl.transformVector3ArrayByQuat(w$L,w$T,w$H,w$L,w$T),w$e){var w$h=w$$*w$o+w$K;if(w$A)w$dl.transformLightingMapTexcoordByUV1Array(w$L,w$h,w$e,w$L,w$h);else{var w$V=w$$*w$G+w$r;w$dl.transformLightingMapTexcoordByUV0Array(w$c,w$V,w$e,w$L,w$h)}}}return w$L},w$v._getVertexBuffers=function(){return null},w$v._beforeRender=function(w$v){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},w$v._render=function(w$v){var w$l,w$L=0,w$A=w$v.renderElement;if(1<this._indexCount){var w$x=this._boneIndicesList.length;if(1<w$x){for(var w$m=0;w$m<w$x;w$m++)(w$l=w$A._skinAnimationDatas||this._skinAnimationDatas)&&(w$A._shaderValue.setValue(0,w$l[w$m]),w$v._shader.uploadRenderElementUniforms(w$A._shaderValue.data)),w$Q.mainContext.drawElements(4,this._subIndexBufferCount[w$m],5123,2*this._subIndexBufferStart[w$m]);w$g.drawCall+=w$x}else(w$l=w$A._skinAnimationDatas||this._skinAnimationDatas)&&(w$A._shaderValue.setValue(0,w$l[0]),w$v._shader.uploadRenderElementUniforms(w$A._shaderValue.data)),w$Q.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),w$g.drawCall++;w$L=this._indexCount}else w$L=this._indexBuffer.indexCount,(w$l=w$A._skinAnimationDatas||this._skinAnimationDatas)&&(w$A._shaderValue.setValue(0,w$l[0]),w$v._shader.uploadRenderElementUniforms(w$A._shaderValue.data)),w$Q.mainContext.drawElements(4,w$L,5123,0),w$g.drawCall++;w$g.trianglesFaces+=w$L/3},w$v.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},w$v.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},w$G(0,w$v,"_vertexBufferCount",function(){return 1}),w$G(0,w$v,"triangleCount",function(){return this._indexBuffer.indexCount/3}),w$o(w$k,["_tempVector30",function(){return this._tempVector30=new w$Zl},"_tempVector31",function(){return this._tempVector31=new w$Zl},"_tempQuaternion0",function(){return this._tempQuaternion0=new w$Ll},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new w$vl},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new w$vl}]),w$k}(),w$_l=function(){function w$v(w$v){this.defineCounter=0,this.defines=null,w$v?(this.defineCounter=w$v.defineCounter,this.defines=w$v.defines.slice()):(this.defineCounter=0,this.defines=[])}return w$r(w$v,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),w$v.prototype.registerDefine=function(w$v){var w$l=Math.pow(2,this.defineCounter++);return this.defines[w$l]=w$v,w$l},w$v}(),w$ol=function(){function w$v(){}return w$r(w$v,"laya.d3.shader.ShaderInit3D"),w$v.__init__=function(){var w$v,w$l;w$gl._globalRegDefine("HIGHPRECISION",w$gl.SHADERDEFINE_HIGHPRECISION),w$gl._globalRegDefine("FOG",w$gl.SHADERDEFINE_FOG),w$gl._globalRegDefine("DIRECTIONLIGHT",w$gl.SHADERDEFINE_DIRECTIONLIGHT),w$gl._globalRegDefine("POINTLIGHT",w$gl.SHADERDEFINE_POINTLIGHT),w$gl._globalRegDefine("SPOTLIGHT",w$gl.SHADERDEFINE_SPOTLIGHT),w$gl._globalRegDefine("UV",w$gl.SHADERDEFINE_UV0),w$gl._globalRegDefine("COLOR",w$gl.SHADERDEFINE_COLOR),w$gl._globalRegDefine("UV1",w$gl.SHADERDEFINE_UV1),w$gl._globalRegDefine("CASTSHADOW",w$rl.SHADERDEFINE_CAST_SHADOW),w$gl._globalRegDefine("SHADOWMAP_PSSM1",w$rl.SHADERDEFINE_SHADOW_PSSM1),w$gl._globalRegDefine("SHADOWMAP_PSSM2",w$rl.SHADERDEFINE_SHADOW_PSSM2),w$gl._globalRegDefine("SHADOWMAP_PSSM3",w$rl.SHADERDEFINE_SHADOW_PSSM3),w$gl._globalRegDefine("SHADOWMAP_PCF_NO",w$rl.SHADERDEFINE_SHADOW_PCF_NO),w$gl._globalRegDefine("SHADOWMAP_PCF1",w$rl.SHADERDEFINE_SHADOW_PCF1),w$gl._globalRegDefine("SHADOWMAP_PCF2",w$rl.SHADERDEFINE_SHADOW_PCF2),w$gl._globalRegDefine("SHADOWMAP_PCF3",w$rl.SHADERDEFINE_SHADOW_PCF3),w$gl._globalRegDefine("DEPTHFOG",w$gl.SAHDERDEFINE_DEPTHFOG),w$ql.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),w$ql.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),w$v={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},w$l={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var w$L=w$ql.nameKey.add("SIMPLE");shaderCompile=w$gl.add(w$L,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',w$v,w$l),w$ul.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),w$ul.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),w$ul.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),w$ul.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),w$ul.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),w$ul.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),w$ul.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),w$ul.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),w$ul.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},w$v}(),w$Kl=function(){function w$v(){this._data=null,this._data=[]}w$r(w$v,"laya.d3.shader.ValusArray");var w$l=w$v.prototype;return w$l.setValue=function(w$v,w$l){this._data[w$v]=w$l},w$G(0,w$l,"data",function(){return this._data}),w$v}(),w$rl=function(){function w$v(){}return w$v.SHADERDEFINE_RECEIVE_SHADOW=1,w$v.SHADERDEFINE_CAST_SHADOW=512,w$v.SHADERDEFINE_SHADOW_PSSM1=1024,w$v.SHADERDEFINE_SHADOW_PSSM2=2048,w$v.SHADERDEFINE_SHADOW_PSSM3=4096,w$v.SHADERDEFINE_SHADOW_PCF_NO=8192,w$v.SHADERDEFINE_SHADOW_PCF1=16384,w$v.SHADERDEFINE_SHADOW_PCF2=32768,w$v.SHADERDEFINE_SHADOW_PCF3=65536,w$v.MAX_PSSM_COUNT=3,w$v}(),w$Gl=function(){function w$W(){}return w$r(w$W,"laya.d3.utils.Picker"),w$W.calculateCursorRay=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z=w$v.elements[0],w$O=w$v.elements[1],w$e=w$W._tempVector30,w$$=w$e.elements;w$$[0]=w$Z,w$$[1]=w$O,w$$[2]=w$l.minDepth;var w$_=w$W._tempVector31,w$o=w$_.elements;w$o[0]=w$Z,w$o[1]=w$O,w$o[2]=w$l.maxDepth;var w$K=w$m.origin,w$r=w$W._tempVector32;w$l.unprojectFromWVP(w$e,w$L,w$A,w$x,w$K),w$l.unprojectFromWVP(w$_,w$L,w$A,w$x,w$r);var w$G=w$m.direction.elements;w$G[0]=w$r.x-w$K.x,w$G[1]=w$r.y-w$K.y,w$G[2]=w$r.z-w$K.z,w$Zl.normalize(w$m.direction,w$m.direction)},w$W.rayIntersectsPositionsAndIndices=function(w$v,w$l,w$L,w$A,w$x){for(var w$m=w$L.vertexStride/4,w$Z=w$L.getVertexElementByUsage(0).offset/4,w$O=Number.MAX_VALUE,w$e=-1,w$$=-1,w$_=-1,w$o=0;w$o<w$A.length;w$o+=3){var w$K=w$W._tempVector35,w$r=w$K.elements,w$G=w$A[w$o]*w$m,w$c=w$G+w$Z;w$r[0]=w$l[w$c],w$r[1]=w$l[1+w$c],w$r[2]=w$l[2+w$c];var w$d=w$W._tempVector36,w$C=w$d.elements,w$J=w$A[w$o+1]*w$m,w$B=w$J+w$Z;w$C[0]=w$l[w$B],w$C[1]=w$l[1+w$B],w$C[2]=w$l[2+w$B];var w$X=w$W._tempVector37,w$f=w$X.elements,w$w=w$A[w$o+2]*w$m,w$H=w$w+w$Z;w$f[0]=w$l[w$H],w$f[1]=w$l[1+w$H],w$f[2]=w$l[2+w$H];var w$g=laya.d3.utils.Picker.rayIntersectsTriangle(w$v,w$K,w$d,w$X);!isNaN(w$g)&&w$g<w$O&&(w$O=w$g,w$e=w$G,w$$=w$J,w$_=w$w)}if(w$O===Number.MAX_VALUE)return w$x.position.toDefault(),w$x.distance=Number.MAX_VALUE,w$x.trianglePositions[0].toDefault(),w$x.trianglePositions[1].toDefault(),w$x.trianglePositions[2].toDefault(),w$x.triangleNormals[0].toDefault(),w$x.triangleNormals[1].toDefault(),w$x.triangleNormals[2].toDefault(),!1;w$x.distance=w$O,w$Zl.scale(w$v.direction,w$O,w$x.position),w$Zl.add(w$v.origin,w$x.position,w$x.position);var w$T=w$x.trianglePositions,w$h=w$T[0],w$V=w$T[1],w$k=w$T[2],w$Q=w$h.elements,w$M=w$V.elements,w$P=w$k.elements,w$I=w$e+w$Z;w$Q[0]=w$l[w$I],w$Q[1]=w$l[w$I+1],w$Q[2]=w$l[w$I+2];var w$t=w$$+w$Z;w$M[0]=w$l[w$t],w$M[1]=w$l[w$t+1],w$M[2]=w$l[w$t+2];var w$a=w$_+w$Z;w$P[0]=w$l[w$a],w$P[1]=w$l[w$a+1],w$P[2]=w$l[w$a+2];var w$q=w$L.getVertexElementByUsage(3);if(w$q){var w$u=w$q.offset/4,w$R=w$x.triangleNormals,w$N=w$R[0],w$b=w$R[1],w$j=w$R[2],w$F=w$N.elements,w$p=w$b.elements,w$Y=w$j.elements,w$D=w$e+w$u;w$F[0]=w$l[w$D],w$F[1]=w$l[w$D+1],w$F[2]=w$l[w$D+2];var w$S=w$$+w$u;w$p[0]=w$l[w$S],w$p[1]=w$l[w$S+1],w$p[2]=w$l[w$S+2];var w$y=w$_+w$u;w$Y[0]=w$l[w$y],w$Y[1]=w$l[w$y+1],w$Y[2]=w$l[w$y+2]}return!0},w$W.rayIntersectsTriangle=function(w$v,w$l,w$L,w$A){var w$x=w$W._tempVector30,w$m=w$W._tempVector31;w$Zl.subtract(w$L,w$l,w$x),w$Zl.subtract(w$A,w$l,w$m);var w$Z,w$O=w$W._tempVector32;if(w$Zl.cross(w$v.direction,w$m,w$O),(w$Z=w$Zl.dot(w$x,w$O))>-Number.MIN_VALUE&&w$Z<Number.MIN_VALUE)return Number.NaN;var w$e,w$$=1/w$Z,w$_=w$W._tempVector33;if(w$Zl.subtract(w$v.origin,w$l,w$_),w$e=w$Zl.dot(w$_,w$O),(w$e*=w$$)<0||1<w$e)return Number.NaN;var w$o,w$K,w$r=w$W._tempVector34;return w$Zl.cross(w$_,w$x,w$r),w$o=w$Zl.dot(w$v.direction,w$r),(w$o*=w$$)<0||1<w$e+w$o?Number.NaN:(w$K=w$Zl.dot(w$m,w$r),(w$K*=w$$)<0?Number.NaN:w$K)},w$o(w$W,["_tempVector30",function(){return this._tempVector30=new w$Zl},"_tempVector31",function(){return this._tempVector31=new w$Zl},"_tempVector32",function(){return this._tempVector32=new w$Zl},"_tempVector33",function(){return this._tempVector33=new w$Zl},"_tempVector34",function(){return this._tempVector34=new w$Zl},"_tempVector35",function(){return this._tempVector35=new w$Zl},"_tempVector36",function(){return this._tempVector36=new w$Zl},"_tempVector37",function(){return this._tempVector37=new w$Zl}]),w$W}(),w$cl=(function(){function w$v(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new w$Zl,new w$Zl,new w$Zl],this.trianglePositions.length=3,this.triangleNormals=[new w$Zl,new w$Zl,new w$Zl],this.triangleNormals.length=3,this.position=new w$Zl}w$r(w$v,"laya.d3.utils.RaycastHit"),w$v.prototype.cloneTo=function(w$v){w$v.distance=this.distance,this.trianglePositions[0].cloneTo(w$v.trianglePositions[0]),this.trianglePositions[1].cloneTo(w$v.trianglePositions[1]),this.trianglePositions[2].cloneTo(w$v.trianglePositions[2]),this.triangleNormals[0].cloneTo(w$v.triangleNormals[0]),this.triangleNormals[1].cloneTo(w$v.triangleNormals[1]),this.triangleNormals[2].cloneTo(w$v.triangleNormals[2]),this.position.cloneTo(w$v.position),w$v.sprite3D=this.sprite3D}}(),function(){function w$v(w$v,w$l){this._width=0,this._height=0,this._width=w$v,this._height=w$l}w$r(w$v,"laya.d3.utils.Size");var w$l=w$v.prototype;return w$G(0,w$l,"width",function(){return-1===this._width?w$E.clientWidth:this._width}),w$G(0,w$l,"height",function(){return-1===this._height?w$E.clientHeight:this._height}),w$G(1,w$v,"fullScreen",function(){return new w$v(-1,-1)}),w$v}()),w$dl=function(){function w$I(){}return w$r(w$I,"laya.d3.utils.Utils3D"),w$I._rotationTransformScaleSkinAnimation=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$,w$_,w$o){var w$K,w$r,w$G,w$c,w$d,w$C=w$I._tempArray16_0,w$J=w$I._tempArray16_1,w$B=w$I._tempArray16_2,w$X=w$A+w$A,w$f=w$x+w$x,w$w=w$m+w$m,w$H=w$A*w$X,w$g=w$x*w$X,w$T=w$x*w$f,w$h=w$m*w$X,w$V=w$m*w$f,w$k=w$m*w$w,w$Q=w$Z*w$X,w$M=w$Z*w$f,w$P=w$Z*w$w;for(w$C[15]=1,w$C[0]=1-w$T-w$k,w$C[1]=w$g+w$P,w$C[2]=w$h-w$M,w$C[4]=w$g-w$P,w$C[5]=1-w$H-w$k,w$C[6]=w$V+w$Q,w$C[8]=w$h+w$M,w$C[9]=w$V-w$Q,w$C[10]=1-w$H-w$T,w$J[15]=1,w$J[0]=w$O,w$J[5]=w$e,w$J[10]=w$$,w$K=0;w$K<4;w$K++)w$r=w$C[w$K],w$G=w$C[w$K+4],w$c=w$C[w$K+8],w$d=w$C[w$K+12],w$B[w$K]=w$r,w$B[w$K+4]=w$G,w$B[w$K+8]=w$c,w$B[w$K+12]=w$r*w$v+w$G*w$l+w$c*w$L+w$d;for(w$K=0;w$K<4;w$K++)w$r=w$B[w$K],w$G=w$B[w$K+4],w$c=w$B[w$K+8],w$d=w$B[w$K+12],w$_[w$K+w$o]=w$r*w$J[0]+w$G*w$J[1]+w$c*w$J[2]+w$d*w$J[3],w$_[w$K+w$o+4]=w$r*w$J[4]+w$G*w$J[5]+w$c*w$J[6]+w$d*w$J[7],w$_[w$K+w$o+8]=w$r*w$J[8]+w$G*w$J[9]+w$c*w$J[10]+w$d*w$J[11],w$_[w$K+w$o+12]=w$r*w$J[12]+w$G*w$J[13]+w$c*w$J[14]+w$d*w$J[15]},w$I._createNodeByJson=function(w$v,w$l,w$L,w$A){if(!w$L)switch(w$l.type){case"Sprite3D":w$L=new w$al;break;case"MeshSprite3D":w$L=new w$Wl;break;case"SkinnedMeshSprite3D":w$L=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":w$L=new ShuriKenParticle3D;break;case"TrailSprite3D":w$L=new TrailSprite3D;break;case"Terrain":w$L=new Terrain;break;case"Camera":w$L=new w$yl;break;case"DirectionLight":w$L=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var w$x=w$l.props;if(w$x)for(var w$m in w$x)w$L[w$m]=w$x[w$m];var w$Z=w$l.customProps;w$Z&&(w$L instanceof laya.d3.core.Sprite3D?(w$L._parseBaseCustomProps(w$Z),w$L._parseCustomProps(w$v,w$A,w$Z,w$l),w$L._parseCustomComponent(w$v,w$A,w$l.components)):w$L._parseCustomProps(w$v,w$A,w$Z,w$l));var w$O=w$l.child;if(w$O)for(var w$e=0,w$$=w$O.length;w$e<w$$;w$e++){var w$_=w$I._createNodeByJson(w$v,w$O[w$e],null,w$A);w$L.addChild(w$_)}return w$L},w$I._computeBoneAndAnimationDatasByBindPoseMatrxix=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z,w$O,w$e=0,w$$=0,w$_=w$v.length;for(w$Z=0;w$Z<w$_;w$e+=w$v[w$Z].keyframeWidth,w$$+=16,w$Z++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(w$l[w$e+0],w$l[w$e+1],w$l[w$e+2],w$l[w$e+3],w$l[w$e+4],w$l[w$e+5],w$l[w$e+6],w$l[w$e+7],w$l[w$e+8],w$l[w$e+9],w$A,w$$),0!=w$Z&&(w$O=16*w$v[w$Z].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(w$A,w$O,w$A,w$$,w$A,w$$));var w$o=w$L.length;for(w$Z=0;w$Z<w$o;w$Z++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(w$A,16*w$m[w$Z],w$L[w$Z],w$x,16*w$Z)},w$I._computeAnimationDatasByArrayAndMatrixFast=function(w$v,w$l,w$L,w$A){for(var w$x=0,w$m=w$v.length;w$x<w$m;w$x++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(w$l,16*w$A[w$x],w$v[w$x],w$L,16*w$x)},w$I._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(w$v,w$l,w$L,w$A,w$x){var w$m,w$Z,w$O=0,w$e=0,w$$=w$v.length;for(w$m=0;w$m<w$$;w$O+=w$v[w$m].keyframeWidth,w$e+=16,w$m++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(w$l[w$O+7],w$l[w$O+8],w$l[w$O+9],w$l[w$O+3],w$l[w$O+4],w$l[w$O+5],w$l[w$O+6],w$l[w$O+0],w$l[w$O+1],w$l[w$O+2],w$A,w$e),0!=w$m&&(w$Z=16*w$v[w$m].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(w$A,w$Z,w$A,w$e,w$A,w$e));var w$_=w$L.length;for(w$m=0;w$m<w$_;w$m++){var w$o=16*w$m;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(w$A,w$o,w$L[w$m],w$x,w$o)}},w$I._computeAnimationDatasByArrayAndMatrixFastOld=function(w$v,w$l,w$L){for(var w$A=w$v.length,w$x=0;w$x<w$A;w$x++){var w$m=16*w$x;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(w$l,w$m,w$v[w$x],w$L,w$m)}},w$I._computeRootAnimationData=function(w$v,w$l,w$L){for(var w$A=0,w$x=0,w$m=0,w$Z=w$v.length;w$A<w$Z;w$x+=w$v[w$A].keyframeWidth,w$m+=16,w$A++)laya.d3.utils.Utils3D.createAffineTransformationArray(w$l[w$x+0],w$l[w$x+1],w$l[w$x+2],w$l[w$x+3],w$l[w$x+4],w$l[w$x+5],w$l[w$x+6],w$l[w$x+7],w$l[w$x+8],w$l[w$x+9],w$L,w$m)},w$I.transformVector3ArrayByQuat=function(w$v,w$l,w$L,w$A,w$x){var w$m=w$L.elements,w$Z=w$v[w$l],w$O=w$v[w$l+1],w$e=w$v[w$l+2],w$$=w$m[0],w$_=w$m[1],w$o=w$m[2],w$K=w$m[3],w$r=w$K*w$Z+w$_*w$e-w$o*w$O,w$G=w$K*w$O+w$o*w$Z-w$$*w$e,w$c=w$K*w$e+w$$*w$O-w$_*w$Z,w$d=-w$$*w$Z-w$_*w$O-w$o*w$e;w$A[w$x]=w$r*w$K+w$d*-w$$+w$G*-w$o-w$c*-w$_,w$A[w$x+1]=w$G*w$K+w$d*-w$_+w$c*-w$$-w$r*-w$o,w$A[w$x+2]=w$c*w$K+w$d*-w$o+w$r*-w$_-w$G*-w$$},w$I.mulMatrixByArray=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z,w$O,w$e,w$$,w$_;if(w$x===w$L){for(w$L=w$I._tempArray16_3,w$Z=0;w$Z<16;++w$Z)w$L[w$Z]=w$x[w$m+w$Z];w$A=0}for(w$Z=0;w$Z<4;w$Z++)w$O=w$v[w$l+w$Z],w$e=w$v[w$l+w$Z+4],w$$=w$v[w$l+w$Z+8],w$_=w$v[w$l+w$Z+12],w$x[w$m+w$Z]=w$O*w$L[w$A+0]+w$e*w$L[w$A+1]+w$$*w$L[w$A+2]+w$_*w$L[w$A+3],w$x[w$m+w$Z+4]=w$O*w$L[w$A+4]+w$e*w$L[w$A+5]+w$$*w$L[w$A+6]+w$_*w$L[w$A+7],w$x[w$m+w$Z+8]=w$O*w$L[w$A+8]+w$e*w$L[w$A+9]+w$$*w$L[w$A+10]+w$_*w$L[w$A+11],w$x[w$m+w$Z+12]=w$O*w$L[w$A+12]+w$e*w$L[w$A+13]+w$$*w$L[w$A+14]+w$_*w$L[w$A+15]},w$I.mulMatrixByArrayFast=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z,w$O,w$e,w$$,w$_;for(w$Z=0;w$Z<4;w$Z++)w$O=w$v[w$l+w$Z],w$e=w$v[w$l+w$Z+4],w$$=w$v[w$l+w$Z+8],w$_=w$v[w$l+w$Z+12],w$x[w$m+w$Z]=w$O*w$L[w$A+0]+w$e*w$L[w$A+1]+w$$*w$L[w$A+2]+w$_*w$L[w$A+3],w$x[w$m+w$Z+4]=w$O*w$L[w$A+4]+w$e*w$L[w$A+5]+w$$*w$L[w$A+6]+w$_*w$L[w$A+7],w$x[w$m+w$Z+8]=w$O*w$L[w$A+8]+w$e*w$L[w$A+9]+w$$*w$L[w$A+10]+w$_*w$L[w$A+11],w$x[w$m+w$Z+12]=w$O*w$L[w$A+12]+w$e*w$L[w$A+13]+w$$*w$L[w$A+14]+w$_*w$L[w$A+15]},w$I.mulMatrixByArrayAndMatrixFast=function(w$v,w$l,w$L,w$A,w$x){var w$m,w$Z,w$O,w$e,w$$,w$_=w$L.elements,w$o=w$_[0],w$K=w$_[1],w$r=w$_[2],w$G=w$_[3],w$c=w$_[4],w$d=w$_[5],w$C=w$_[6],w$J=w$_[7],w$B=w$_[8],w$X=w$_[9],w$f=w$_[10],w$w=w$_[11],w$H=w$_[12],w$g=w$_[13],w$T=w$_[14],w$h=w$_[15],w$V=w$l,w$k=w$l+4,w$Q=w$l+8,w$M=w$l+12,w$P=w$x,w$I=w$x+4,w$t=w$x+8,w$a=w$x+12;for(w$m=0;w$m<4;w$m++)w$Z=w$v[w$V+w$m],w$O=w$v[w$k+w$m],w$e=w$v[w$Q+w$m],w$$=w$v[w$M+w$m],w$A[w$P+w$m]=w$Z*w$o+w$O*w$K+w$e*w$r+w$$*w$G,w$A[w$I+w$m]=w$Z*w$c+w$O*w$d+w$e*w$C+w$$*w$J,w$A[w$t+w$m]=w$Z*w$B+w$O*w$X+w$e*w$f+w$$*w$w,w$A[w$a+w$m]=w$Z*w$H+w$O*w$g+w$e*w$T+w$$*w$h},w$I.createAffineTransformationArray=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$,w$_,w$o){var w$K=w$A+w$A,w$r=w$x+w$x,w$G=w$m+w$m,w$c=w$A*w$K,w$d=w$A*w$r,w$C=w$A*w$G,w$J=w$x*w$r,w$B=w$x*w$G,w$X=w$m*w$G,w$f=w$Z*w$K,w$w=w$Z*w$r,w$H=w$Z*w$G;w$_[w$o+0]=(1-(w$J+w$X))*w$O,w$_[w$o+1]=(w$d+w$H)*w$O,w$_[w$o+2]=(w$C-w$w)*w$O,w$_[w$o+3]=0,w$_[w$o+4]=(w$d-w$H)*w$e,w$_[w$o+5]=(1-(w$c+w$X))*w$e,w$_[w$o+6]=(w$B+w$f)*w$e,w$_[w$o+7]=0,w$_[w$o+8]=(w$C+w$w)*w$$,w$_[w$o+9]=(w$B-w$f)*w$$,w$_[w$o+10]=(1-(w$c+w$J))*w$$,w$_[w$o+11]=0,w$_[w$o+12]=w$v,w$_[w$o+13]=w$l,w$_[w$o+14]=w$L,w$_[w$o+15]=1},w$I.transformVector3ArrayToVector3ArrayCoordinate=function(w$v,w$l,w$L,w$A,w$x){var w$m=w$I._tempArray4_0,w$Z=w$v[w$l+0],w$O=w$v[w$l+1],w$e=w$v[w$l+2],w$$=w$L.elements;w$m[0]=w$Z*w$$[0]+w$O*w$$[4]+w$e*w$$[8]+w$$[12],w$m[1]=w$Z*w$$[1]+w$O*w$$[5]+w$e*w$$[9]+w$$[13],w$m[2]=w$Z*w$$[2]+w$O*w$$[6]+w$e*w$$[10]+w$$[14],w$m[3]=1/(w$Z*w$$[3]+w$O*w$$[7]+w$e*w$$[11]+w$$[15]),w$A[w$x+0]=w$m[0]*w$m[3],w$A[w$x+1]=w$m[1]*w$m[3],w$A[w$x+2]=w$m[2]*w$m[3]},w$I.transformLightingMapTexcoordByUV0Array=function(w$v,w$l,w$L,w$A,w$x){var w$m=w$L.elements;w$A[w$x+0]=w$v[w$l+0]*w$m[0]+w$m[2],w$A[w$x+1]=(w$v[w$l+1]-1)*w$m[1]+w$m[3]},w$I.transformLightingMapTexcoordByUV1Array=function(w$v,w$l,w$L,w$A,w$x){var w$m=w$L.elements;w$A[w$x+0]=w$v[w$l+0]*w$m[0]+w$m[2],w$A[w$x+1]=1+w$v[w$l+1]*w$m[1]+w$m[3]},w$I.getURLVerion=function(w$v){var w$l=w$v.indexOf("?");return 0<=w$l?w$v.substr(w$l):null},w$I._quaternionCreateFromYawPitchRollArray=function(w$v,w$l,w$L,w$A){var w$x=.5*w$L,w$m=.5*w$l,w$Z=.5*w$v,w$O=Math.sin(w$x),w$e=Math.cos(w$x),w$$=Math.sin(w$m),w$_=Math.cos(w$m),w$o=Math.sin(w$Z),w$K=Math.cos(w$Z);w$A[0]=w$K*w$$*w$e+w$o*w$_*w$O,w$A[1]=w$o*w$_*w$e-w$K*w$$*w$O,w$A[2]=w$K*w$_*w$O-w$o*w$$*w$e,w$A[3]=w$K*w$_*w$e+w$o*w$$*w$O},w$I._createAffineTransformationArray=function(w$v,w$l,w$L,w$A){var w$x=w$l[0],w$m=w$l[1],w$Z=w$l[2],w$O=w$l[3],w$e=w$x+w$x,w$$=w$m+w$m,w$_=w$Z+w$Z,w$o=w$x*w$e,w$K=w$x*w$$,w$r=w$x*w$_,w$G=w$m*w$$,w$c=w$m*w$_,w$d=w$Z*w$_,w$C=w$O*w$e,w$J=w$O*w$$,w$B=w$O*w$_,w$X=w$L[0],w$f=w$L[1],w$w=w$L[2];w$A[0]=(1-(w$G+w$d))*w$X,w$A[1]=(w$K+w$B)*w$X,w$A[2]=(w$r-w$J)*w$X,w$A[3]=0,w$A[4]=(w$K-w$B)*w$f,w$A[5]=(1-(w$o+w$d))*w$f,w$A[6]=(w$c+w$C)*w$f,w$A[7]=0,w$A[8]=(w$r+w$J)*w$w,w$A[9]=(w$c-w$C)*w$w,w$A[10]=(1-(w$o+w$G))*w$w,w$A[11]=0,w$A[12]=w$v[0],w$A[13]=w$v[1],w$A[14]=w$v[2],w$A[15]=1},w$I._mulMatrixArray=function(w$v,w$l,w$L,w$A){var w$x,w$m,w$Z,w$O,w$e,w$$=w$l.elements,w$_=w$$[0],w$o=w$$[1],w$K=w$$[2],w$r=w$$[3],w$G=w$$[4],w$c=w$$[5],w$d=w$$[6],w$C=w$$[7],w$J=w$$[8],w$B=w$$[9],w$X=w$$[10],w$f=w$$[11],w$w=w$$[12],w$H=w$$[13],w$g=w$$[14],w$T=w$$[15],w$h=w$A,w$V=w$A+4,w$k=w$A+8,w$Q=w$A+12;for(w$x=0;w$x<4;w$x++)w$m=w$v[w$x],w$Z=w$v[w$x+4],w$O=w$v[w$x+8],w$e=w$v[w$x+12],w$L[w$h+w$x]=w$m*w$_+w$Z*w$o+w$O*w$K+w$e*w$r,w$L[w$V+w$x]=w$m*w$G+w$Z*w$c+w$O*w$d+w$e*w$C,w$L[w$k+w$x]=w$m*w$J+w$Z*w$B+w$O*w$X+w$e*w$f,w$L[w$Q+w$x]=w$m*w$w+w$Z*w$H+w$O*w$g+w$e*w$T},w$I.getYawPitchRoll=function(w$v,w$l){w$I.transformQuat(w$Zl.ForwardRH,w$v,w$Ll.TEMPVector31),w$I.transformQuat(w$Zl.Up,w$v,w$Ll.TEMPVector32);var w$L=w$Ll.TEMPVector32.elements;w$I.angleTo(w$Zl.ZERO,w$Ll.TEMPVector31,w$Ll.TEMPVector33);var w$A=w$Ll.TEMPVector33.elements;w$A[0]==Math.PI/2?(w$A[1]=w$I.arcTanAngle(w$L[2],w$L[0]),w$A[2]=0):w$A[0]==-Math.PI/2?(w$A[1]=w$I.arcTanAngle(-w$L[2],-w$L[0]),w$A[2]=0):(w$vl.createRotationY(-w$A[1],w$Ll.TEMPMatrix0),w$vl.createRotationX(-w$A[0],w$Ll.TEMPMatrix1),w$Zl.transformCoordinate(w$Ll.TEMPVector32,w$Ll.TEMPMatrix0,w$Ll.TEMPVector32),w$Zl.transformCoordinate(w$Ll.TEMPVector32,w$Ll.TEMPMatrix1,w$Ll.TEMPVector32),w$A[2]=w$I.arcTanAngle(w$L[1],-w$L[0])),w$A[1]<=-Math.PI&&(w$A[1]=Math.PI),w$A[2]<=-Math.PI&&(w$A[2]=Math.PI),w$A[1]>=Math.PI&&w$A[2]>=Math.PI&&(w$A[1]=0,w$A[2]=0,w$A[0]=Math.PI-w$A[0]),w$l[0]=w$A[1],w$l[1]=w$A[0],w$l[2]=w$A[2]},w$I.arcTanAngle=function(w$v,w$l){return 0==w$v?1==w$l?Math.PI/2:-Math.PI/2:0<w$v?Math.atan(w$l/w$v):w$v<0?0<w$l?Math.atan(w$l/w$v)+Math.PI:Math.atan(w$l/w$v)-Math.PI:0},w$I.angleTo=function(w$v,w$l,w$L){w$Zl.subtract(w$l,w$v,w$Ll.TEMPVector30),w$Zl.normalize(w$Ll.TEMPVector30,w$Ll.TEMPVector30),w$L.elements[0]=Math.asin(w$Ll.TEMPVector30.y),w$L.elements[1]=w$I.arcTanAngle(-w$Ll.TEMPVector30.z,-w$Ll.TEMPVector30.x)},w$I.transformQuat=function(w$v,w$l,w$L){var w$A=w$L.elements,w$x=w$v.elements,w$m=w$l,w$Z=w$x[0],w$O=w$x[1],w$e=w$x[2],w$$=w$m[0],w$_=w$m[1],w$o=w$m[2],w$K=w$m[3],w$r=w$K*w$Z+w$_*w$e-w$o*w$O,w$G=w$K*w$O+w$o*w$Z-w$$*w$e,w$c=w$K*w$e+w$$*w$O-w$_*w$Z,w$d=-w$$*w$Z-w$_*w$O-w$o*w$e;w$A[0]=w$r*w$K+w$d*-w$$+w$G*-w$o-w$c*-w$_,w$A[1]=w$G*w$K+w$d*-w$_+w$c*-w$$-w$r*-w$o,w$A[2]=w$c*w$K+w$d*-w$o+w$r*-w$_-w$G*-w$$},w$I.quaterionNormalize=function(w$v,w$l){var w$L=w$v[0],w$A=w$v[1],w$x=w$v[2],w$m=w$v[3],w$Z=w$L*w$L+w$A*w$A+w$x*w$x+w$m*w$m;0<w$Z&&(w$Z=1/Math.sqrt(w$Z),w$l[0]=w$L*w$Z,w$l[1]=w$A*w$Z,w$l[2]=w$x*w$Z,w$l[3]=w$m*w$Z)},w$I.matrix4x4MultiplyFFF=function(w$v,w$l,w$L){var w$A,w$x,w$m,w$Z,w$O;if(w$L===w$l)for(w$l=new Float32Array(16),w$A=0;w$A<16;++w$A)w$l[w$A]=w$L[w$A];for(w$A=0;w$A<4;w$A++)w$x=w$v[w$A],w$m=w$v[w$A+4],w$Z=w$v[w$A+8],w$O=w$v[w$A+12],w$L[w$A]=w$x*w$l[0]+w$m*w$l[1]+w$Z*w$l[2]+w$O*w$l[3],w$L[w$A+4]=w$x*w$l[4]+w$m*w$l[5]+w$Z*w$l[6]+w$O*w$l[7],w$L[w$A+8]=w$x*w$l[8]+w$m*w$l[9]+w$Z*w$l[10]+w$O*w$l[11],w$L[w$A+12]=w$x*w$l[12]+w$m*w$l[13]+w$Z*w$l[14]+w$O*w$l[15]},w$I.matrix4x4MultiplyMFM=function(w$v,w$l,w$L){w$I.matrix4x4MultiplyFFF(w$v.elements,w$l,w$L.elements)},w$o(w$I,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new w$Zl},"_tempVector3_1",function(){return this._tempVector3_1=new w$Zl},"_tempVector3_2",function(){return this._tempVector3_2=new w$Zl},"_tempVector3_3",function(){return this._tempVector3_3=new w$Zl},"_tempVector3_4",function(){return this._tempVector3_4=new w$Zl},"_tempVector3_5",function(){return this._tempVector3_5=new w$Zl},"_tempVector3_6",function(){return this._tempVector3_6=new w$Zl},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),w$I}(),w$Cl=function(){function w$M(){}return w$r(w$M,"Laya3D"),w$M._cancelLoadByUrl=function(w$v){w$f.loader.cancelLoadByUrl(w$v),w$M._innerFirstLevelLoaderManager.cancelLoadByUrl(w$v),w$M._innerSecondLevelLoaderManager.cancelLoadByUrl(w$v),w$M._innerThirdLevelLoaderManager.cancelLoadByUrl(w$v),w$M._innerFourthLevelLoaderManager.cancelLoadByUrl(w$v)},w$M._changeWebGLSize=function(w$v,w$l){w$Q.onStageResize(w$v,w$l),w$E.clientWidth=w$v,w$E.clientHeight=w$l},w$M.__init__=function(){var w$v=w$l.createMap;w$v.lh=[w$al,"SPRITE3DHIERARCHY"],w$v.ls=[w$tl,"SPRITE3DHIERARCHY"],w$v.lm=[w$Fl,"MESH"],w$v.lmat=[w$ul,"MATERIAL"],w$v.jpg=[w$Yl,"nativeimage"],w$v.jpeg=[w$Yl,"nativeimage"],w$v.png=[w$Yl,"nativeimage"],w$v.pkm=[w$Yl,"arraybuffer"],w$v.raw=[w$bl,"arraybuffer"],w$v.mipmaps=[w$bl,"arraybuffer"],w$C.parserMap.SPRITE3DHIERARCHY=w$M._loadHierarchy,w$C.parserMap.MESH=w$M._loadMesh,w$C.parserMap.MATERIAL=w$M._loadMaterial,w$C.parserMap.TEXTURECUBE=w$M._loadTextureCube,w$C.parserMap.TERRAIN=w$M._loadTerrain,w$M._innerFirstLevelLoaderManager.on("error",null,w$M._eventLoadManagerError),w$M._innerSecondLevelLoaderManager.on("error",null,w$M._eventLoadManagerError),w$M._innerThirdLevelLoaderManager.on("error",null,w$M._eventLoadManagerError),w$M._innerFourthLevelLoaderManager.on("error",null,w$M._eventLoadManagerError)},w$M.READ_BLOCK=function(){return w$M._readData.pos+=4,!0},w$M.READ_DATA=function(){return w$M._DATA.offset=w$M._readData.getUint32(),w$M._DATA.size=w$M._readData.getUint32(),!0},w$M.READ_STRINGS=function(){var w$v=[],w$l={offset:0,size:0};w$l.offset=w$M._readData.getUint16(),w$l.size=w$M._readData.getUint16();w$M._readData.pos;w$M._readData.pos=w$l.offset+w$M._DATA.offset;for(var w$L=0;w$L<w$l.size;w$L++){var w$A=w$M._readData.readUTFString();-1===w$A.lastIndexOf(".lmat")&&-1===w$A.lastIndexOf(".lpbr")||w$v.push(w$A)}return w$v},w$M.formatRelativePath=function(w$v,w$l){var w$L;if("."===w$l.charAt(0)){for(var w$A=(w$v+w$l).split("/"),w$x=0,w$m=w$A.length;w$x<w$m;w$x++)if(".."==w$A[w$x]){var w$Z=w$x-1;0<w$Z&&".."!==w$A[w$Z]&&(w$A.splice(w$Z,2),w$x-=2)}w$L=w$A.join("/")}else w$L=w$v+w$l;return null!=w$k.customFormat&&(w$L=w$k.customFormat(w$L,null)),w$L},w$M._eventLoadManagerError=function(w$v){w$f.loader.event("error",w$v)},w$M._addHierarchyInnerUrls=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z=w$M.formatRelativePath(w$A,w$x);w$L&&(w$Z+=w$L),w$v.push({url:w$Z,clas:w$m}),w$l[w$x]=w$Z},w$M._getSprite3DHierarchyInnerUrls=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){var w$O,w$e=0,w$$=0;switch(w$v.type){case"Scene":var w$_=w$v.customProps.lightmaps;for(w$e=0,w$$=w$_.length;w$e<w$$;w$e++){var w$o=w$_[w$e].replace(".exr",".png");w$M._addHierarchyInnerUrls(w$A,w$x,w$m,w$Z,w$o,w$Yl)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var w$K;if(w$v.instanceParams)(w$K=w$v.instanceParams.loadPath)&&w$M._addHierarchyInnerUrls(w$l,w$x,w$m,w$Z,w$K,w$Fl);else{(w$K=(w$O=w$v.customProps).meshPath)&&w$M._addHierarchyInnerUrls(w$l,w$x,w$m,w$Z,w$K,w$Fl);var w$r=w$O.materials;if(w$r)for(w$e=0,w$$=w$r.length;w$e<w$$;w$e++){for(var w$G=w$r[w$e],w$c=w$G.type.split("."),w$d=w$P.window,w$C=0,w$J=w$c.length;w$C<w$J;++w$C){w$d=w$d[this.clasPaths[w$C]]}if("function"!=typeof w$d)throw"_getSprite3DHierarchyInnerUrls 错误: "+w$G.type+" 不是类";w$M._addHierarchyInnerUrls(w$L,w$x,w$m,w$Z,w$G.path,w$d)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var w$B=(w$O=w$v.customProps).meshPath;w$B&&w$M._addHierarchyInnerUrls(w$l,w$x,w$m,w$Z,w$B,w$Fl);var w$X=w$O.material;if(w$X){w$c=w$X.type.split("."),w$d=w$P.window;for(w$C=0,w$J=w$c.length;w$C<w$J;++w$C){w$d=w$d[this.clasPaths[w$C]]}w$M._addHierarchyInnerUrls(w$L,w$x,w$m,w$Z,w$X.path,w$d)}else{var w$f=w$O.materialPath;if(w$f)w$M._addHierarchyInnerUrls(w$L,w$x,w$m,w$Z,w$f,ShurikenParticleMaterial);else{var w$w=w$O.texturePath;w$w&&w$M._addHierarchyInnerUrls(w$A,w$x,w$m,w$Z,w$w,w$Yl)}}break;case"Terrain":w$M._addHierarchyInnerUrls(w$A,w$x,w$m,w$Z,w$v.customProps.dataPath,TerrainRes)}var w$H=w$v.components;for(var w$g in w$H){var w$T=w$H[w$g];switch(w$g){case"Animator":var w$h=w$T.avatarPath;if(w$h)w$M._addHierarchyInnerUrls(w$A,w$x,w$m,w$Z,w$h,Avatar);else{var w$V=w$T.avatar;w$V&&w$M._addHierarchyInnerUrls(w$A,w$x,w$m,w$Z,w$V.path,Avatar)}var w$k=w$T.clipPaths;for(w$e=0,w$$=w$k.length;w$e<w$$;w$e++)w$M._addHierarchyInnerUrls(w$A,w$x,w$m,w$Z,w$k[w$e],AnimationClip)}}var w$Q=w$v.child;for(w$e=0,w$$=w$Q.length;w$e<w$$;w$e++)w$M._getSprite3DHierarchyInnerUrls(w$Q[w$e],w$l,w$L,w$A,w$x,w$m,w$Z)},w$M._loadHierarchy=function(w$v){w$v.on("loaded",null,w$M._onHierarchylhLoaded,[w$v,w$v._class._getGroup()]),w$v.load(w$v.url,"json",!1,null,!0)},w$M._onHierarchylhLoaded=function(w$v,w$l,w$L){if(w$v._class.destroyed)w$v.endLoad();else{var w$A=w$v.url,w$x=w$dl.getURLVerion(w$A),w$m=w$k.getPath(w$A),w$Z=[],w$O=[],w$e=[],w$$={};w$M._getSprite3DHierarchyInnerUrls(w$L,w$Z,w$O,w$e,w$$,w$x,w$m);var w$_=w$Z.length+w$O.length+w$e.length,w$o=w$_+1,w$K=1/w$o;if(w$M._onProcessChange(w$v,0,w$K,1),0<w$e.length){var w$r=w$_/w$o,w$G=w$V.create(null,w$M._onProcessChange,[w$v,w$K,w$r],!1);w$M._innerFourthLevelLoaderManager.create(w$e,w$V.create(null,w$M._onHierarchyInnerForthLevResouLoaded,[w$v,w$l,w$G,w$L,w$$,w$Z,w$O,w$K+w$r*w$e.length,w$r]),w$G,null,null,1,!0,w$l)}else w$M._onHierarchyInnerForthLevResouLoaded(w$v,w$l,null,w$L,w$$,w$Z,w$O,w$K,w$r)}},w$M._onHierarchyInnerForthLevResouLoaded=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e){if(w$v._class.destroyed)w$v.endLoad();else if(w$L&&w$L.recover(),0<w$Z.length){var w$$=w$V.create(null,w$M._onProcessChange,[w$v,w$O,w$e],!1);w$M._innerSecondLevelLoaderManager.create(w$Z,w$V.create(null,w$M._onHierarchyInnerSecondLevResouLoaded,[w$v,w$l,w$$,w$A,w$x,w$m,w$O+w$e*w$Z.length,w$e]),w$L,null,null,1,!0,w$l)}else w$M._onHierarchyInnerSecondLevResouLoaded(w$v,w$l,null,w$A,w$x,w$m,w$O,w$e)},w$M._onHierarchyInnerSecondLevResouLoaded=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O){if(w$v._class.destroyed)w$v.endLoad();else if(w$L&&w$L.recover(),0<w$m.length){var w$e=w$V.create(null,w$M._onProcessChange,[w$v,w$Z,w$O],!1);w$M._innerFirstLevelLoaderManager.create(w$m,w$V.create(null,w$M._onHierarchyInnerFirstLevResouLoaded,[w$v,w$e,w$A,w$x]),w$L,null,null,1,!0,w$l)}else w$M._onHierarchyInnerFirstLevResouLoaded(w$v,null,w$A,w$x)},w$M._onHierarchyInnerFirstLevResouLoaded=function(w$v,w$l,w$L,w$A){w$l&&w$l.recover(),w$v.endLoad([w$L,w$A])},w$M._loadTerrain=function(w$v){w$v.on("loaded",null,w$M._onTerrainLtLoaded,[w$v,w$v._class._getGroup()]),w$v.load(w$v.url,"json",!1,null,!0)},w$M._onTerrainLtLoaded=function(w$v,w$l,w$L){if(w$v._class.destroyed)w$v.endLoad();else{var w$A,w$x,w$m=w$v.url,w$Z=w$dl.getURLVerion(w$m),w$O=w$k.getPath(w$m),w$e=[],w$$={},w$_=0,w$o=0,w$K=w$L.heightData;w$A=w$K.url,w$x=w$M.formatRelativePath(w$O,w$A),w$Z&&(w$x+=w$Z),w$A=w$$[w$A]=w$x;var w$r=w$L.detailTexture;for(w$_=0,w$o=w$r.length;w$_<w$o;w$_++)w$e.push({url:w$r[w$_].diffuse});var w$G=w$L.normalMap;for(w$_=0,w$o=w$G.length;w$_<w$o;w$_++)w$e.push({url:w$G[w$_]});var w$c=w$L.alphaMap;for(w$_=0,w$o=w$c.length;w$_<w$o;w$_++)w$e.push({url:w$c[w$_],params:[!1,!1,6408,!0]});for(w$_=0,w$o=w$e.length;w$_<w$o;w$_++){var w$d=w$e[w$_].url;w$x=w$M.formatRelativePath(w$O,w$d),w$Z&&(w$x+=w$Z),w$e[w$_].url=w$x,w$$[w$d]=w$x}var w$C=w$e.length,w$J=w$C+2,w$B=1/w$J;w$M._onProcessChange(w$v,0,w$B,1);var w$X={heightMapLoaded:!1,texturesLoaded:!1},w$f=w$V.create(null,w$M._onProcessChange,[w$v,w$B,w$B],!1);w$M._innerFourthLevelLoaderManager.create(w$A,w$V.create(null,w$M._onTerrainHeightMapLoaded,[w$v,w$f,w$L,w$$,w$X]),w$f,null,[w$K.numX,w$K.numZ,w$K.bitType,w$K.value],1,!0,w$l);var w$w=w$V.create(null,w$M._onProcessChange,[w$v,2*w$B,w$C/w$J],!1);w$M._innerFourthLevelLoaderManager.create(w$e,w$V.create(null,w$M._onTerrainTexturesLoaded,[w$v,w$w,w$L,w$$,w$X]),w$w,null,null,1,!0,w$l)}},w$M._onTerrainHeightMapLoaded=function(w$v,w$l,w$L,w$A,w$x){w$x.heightMapLoaded=!0,w$x.texturesLoaded&&(w$v.endLoad([w$L,w$A]),w$l.recover())},w$M._onTerrainTexturesLoaded=function(w$v,w$l,w$L,w$A,w$x){w$x.texturesLoaded=!0,w$x.heightMapLoaded&&(w$v.endLoad([w$L,w$A]),w$l.recover())},w$M._loadMesh=function(w$v){w$v.on("loaded",null,w$M._onMeshLmLoaded,[w$v,w$v._class._getGroup()]),w$v.load(w$v.url,"arraybuffer",!1,null,!0)},w$M._onMeshLmLoaded=function(w$v,w$l,w$L){if(w$v._class.destroyed)w$v.endLoad();else{var w$A,w$x,w$m,w$Z=w$v.url,w$O=w$dl.getURLVerion(w$Z),w$e=w$k.getPath(w$Z),w$$={},w$_=0,w$o=0;switch((w$M._readData=new w$w(w$L)).pos=0,w$M._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var w$K=w$M._readData.getUint32();w$M._readData.pos=w$M._readData.pos+4,w$o=w$M._readData.getUint16(),w$M._readData.pos=w$M._readData.pos+8*w$o;var w$r=w$M._readData.getUint32();for(w$o=w$M._readData.getUint16(),w$M._readData.pos=w$K+w$r,w$A=[],w$_=0;w$_<w$o;w$_++){var w$G=w$M._readData.readUTFString();-1!==w$G.lastIndexOf(".lmat")&&w$A.push(w$G)}break;default:for(w$M.READ_BLOCK(),w$_=0;w$_<2;w$_++){var w$c=w$M._readData.getUint16(),w$d=w$M._strings[w$c],w$C=w$M["READ_"+w$d];if(null==w$C)throw new Error("model file err,no this function:"+w$c+" "+w$d);1===w$_?w$A=w$C.call():w$C.call()}}for(w$_=0,w$m=w$A.length;w$_<w$m;w$_++){var w$J=w$A[w$_];w$x=w$M.formatRelativePath(w$e,w$J),w$O&&(w$x+=w$O),w$A[w$_]=w$x,w$$[w$J]=w$x}if(0<w$A.length){w$M._onProcessChange(w$v,0,.5,1);var w$B=w$V.create(null,w$M._onProcessChange,[w$v,.5,.5],!1);w$M._innerSecondLevelLoaderManager.create(w$A,w$V.create(null,w$M._onMeshMateialLoaded,[w$v,w$B,w$L,w$$]),w$B,null,null,1,!0,w$l)}else w$v.endLoad([w$L,w$$])}},w$M._onMeshMateialLoaded=function(w$v,w$l,w$L,w$A){w$v.endLoad([w$L,w$A]),w$l.recover()},w$M._getMaterialTexturePath=function(w$v,w$l,w$L){var w$A=w$v.length-4;return w$v.indexOf(".dds")!=w$A&&w$v.indexOf(".tga")!=w$A&&w$v.indexOf(".exr")!=w$A&&w$v.indexOf(".DDS")!=w$A&&w$v.indexOf(".TGA")!=w$A&&w$v.indexOf(".EXR")!=w$A||(w$v=w$v.substr(0,w$A)+".png"),w$v=w$M.formatRelativePath(w$L,w$v),w$l&&(w$v+=w$l),w$v},w$M._loadMaterial=function(w$v){w$v.on("loaded",null,w$M._onMaterilLmatLoaded,[w$v,w$v._class._getGroup()]),w$v.load(w$v.url,"json",!1,null,!0)},w$M._onMaterilLmatLoaded=function(w$v,w$l,w$L){if(w$v._class.destroyed)w$v.endLoad();else{var w$A,w$x=w$v.url,w$m=w$dl.getURLVerion(w$x),w$Z=w$k.getPath(w$x),w$O=[],w$e={},w$$=w$L.customProps,w$_=w$L.version;if(w$_)switch(w$_){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var w$o=w$L.props.textures,w$K=0,w$r=w$o.length;w$K<w$r;w$K++){var w$G=w$o[w$K],w$c=w$G.path;if(w$c){var w$d=w$c.length-4;w$c.indexOf(".exr")!=w$d&&w$c.indexOf(".EXR")!=w$d||(w$c=w$c.substr(0,w$d)+".png"),w$A=w$M.formatRelativePath(w$Z,w$c),w$m&&(w$A+=w$m),w$O.push({url:w$A,params:w$G.params}),w$e[w$c]=w$A}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var w$C=w$$.diffuseTexture.texture2D;if(w$C&&(w$A=w$M._getMaterialTexturePath(w$C,w$m,w$Z),w$O.push(w$A),w$e[w$C]=w$A),w$$.normalTexture){var w$J=w$$.normalTexture.texture2D;w$J&&(w$A=w$M._getMaterialTexturePath(w$J,w$m,w$Z),w$O.push(w$A),w$e[w$J]=w$A)}if(w$$.specularTexture){var w$B=w$$.specularTexture.texture2D;w$B&&(w$A=w$M._getMaterialTexturePath(w$B,w$m,w$Z),w$O.push(w$A),w$e[w$B]=w$A)}if(w$$.emissiveTexture){var w$X=w$$.emissiveTexture.texture2D;w$X&&(w$A=w$M._getMaterialTexturePath(w$X,w$m,w$Z),w$O.push(w$A),w$e[w$X]=w$A)}if(w$$.ambientTexture){var w$f=w$$.ambientTexture.texture2D;w$f&&(w$A=w$M._getMaterialTexturePath(w$f,w$m,w$Z),w$O.push(w$A),w$e[w$f]=w$A)}if(w$$.reflectTexture){var w$w=w$$.reflectTexture.texture2D;w$w&&(w$A=w$M._getMaterialTexturePath(w$w,w$m,w$Z),w$O.push(w$A),w$e[w$w]=w$A)}}var w$H=w$O.length,w$g=w$H+1,w$T=1/w$g;if(w$M._onProcessChange(w$v,0,w$T,1),0<w$H){var w$h=w$V.create(null,w$M._onProcessChange,[w$v,w$T,w$H/w$g],!1);w$M._innerFourthLevelLoaderManager.create(w$O,w$V.create(null,w$M._onMateialTexturesLoaded,[w$v,w$h,w$L,w$e]),w$h,w$Yl,null,1,!0,w$l)}else w$M._onMateialTexturesLoaded(w$v,null,w$L,null)}},w$M._onMateialTexturesLoaded=function(w$v,w$l,w$L,w$A){w$v.endLoad([w$L,w$A]),w$l&&w$l.recover()},w$M._loadTextureCube=function(w$v){w$v.on("loaded",null,w$M._onTextureCubeLtcLoaded,[w$v]),w$v.load(w$v.url,"json",!1,null,!0)},w$M._onTextureCubeLtcLoaded=function(w$v,w$l){if(w$v._class.destroyed)w$v.endLoad();else{var w$L=w$k.getPath(w$v.url),w$A=[w$M.formatRelativePath(w$L,w$l.px),w$M.formatRelativePath(w$L,w$l.nx),w$M.formatRelativePath(w$L,w$l.py),w$M.formatRelativePath(w$L,w$l.ny),w$M.formatRelativePath(w$L,w$l.pz),w$M.formatRelativePath(w$L,w$l.nz)];w$M._onProcessChange(w$v,0,1/7,1);var w$x=w$V.create(null,w$M._onProcessChange,[w$v,1/7,6/7],!1);w$M._innerFourthLevelLoaderManager.load(w$A,w$V.create(null,w$M._onTextureCubeImagesLoaded,[w$v,w$A,w$x]),w$x,"nativeimage")}},w$M._onTextureCubeImagesLoaded=function(w$v,w$l,w$L){var w$A=[];w$A.length=6;for(var w$x=0;w$x<6;w$x++){var w$m=w$l[w$x];w$A[w$x]=w$C.getRes(w$m),w$C.clearRes(w$m)}w$v.endLoad(w$A),w$L.recover()},w$M._onProcessChange=function(w$v,w$l,w$L,w$A){(w$A=w$l+w$A*w$L)<1&&w$v.event("progress",w$A)},w$M.init=function(w$v,w$l,w$L,w$A,w$x,w$m){if(void 0===w$L&&(w$L=!1),void 0===w$A&&(w$A=!1),void 0===w$x&&(w$x=!0),void 0===w$m&&(w$m=!0),w$J.update3DLoop=function(){},w$J.cancelLoadByUrl=function(w$v){w$M._cancelLoadByUrl(w$v)},w$e.isAntialias=w$L,w$e.isAlpha=w$A,w$e.premultipliedAlpha=w$x,w$e.isStencil=w$m,!w$Q.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");w$J.changeWebGLSize=w$M._changeWebGLSize,w$c.is3DMode=!0,w$f.init(w$v,w$l),w$I.__init__(),w$ol.__init__(),w$Wl.__init__(),w$j.__init__(),w$M.__init__(),w$Z.maxTextureCount=2,(w$M.debugMode||w$s.debugMode)&&(w$M._debugPhasorSprite=new w$S)},w$M.HIERARCHY="SPRITE3DHIERARCHY",w$M.MESH="MESH",w$M.MATERIAL="MATERIAL",w$M.PBRMATERIAL="PBRMTL",w$M.TEXTURECUBE="TEXTURECUBE",w$M.TERRAIN="TERRAIN",w$M._readData=null,w$M._debugPhasorSprite=null,w$M.debugMode=!1,w$o(w$M,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new w$l},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new w$l},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new w$l},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new w$l}]),w$M}(),w$Jl=function(w$v){function w$x(w$v){w$x.__super.call(this),this._owner=w$v,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}w$r(w$x,"laya.d3.animation.AnimationTransform3D",w$m);var w$l=w$x.prototype;return w$l._getlocalMatrix=function(){return this._localUpdate&&(w$dl._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},w$l._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var w$v=0,w$l=this._childs.length;w$v<w$l;w$v++)this._childs[w$v]._onWorldTransform()}},w$l._setWorldMatrixAndUpdate=function(w$v){if(this._worldMatrix=w$v,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var w$l=this._getlocalMatrix(),w$L=0;w$L<16;++w$L)this._worldMatrix[w$L]=w$l[w$L];else w$dl.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},w$l._setWorldMatrixNoUpdate=function(w$v){this._worldMatrix=w$v},w$l._setWorldMatrixIgnoreUpdate=function(w$v){this._worldMatrix=w$v,this._worldUpdate=!1},w$l.getLocalPosition=function(){return this._localPosition},w$l.setLocalPosition=function(w$v){if(this._parent)this._localPosition=w$v,this._localUpdate=!0,this._onWorldTransform();else{var w$l=this._entity.owner._transform,w$L=this._entity.localPosition,w$A=w$L.elements;w$A[0]=w$v[0],w$A[1]=w$v[1],w$A[2]=w$v[2],w$l.localPosition=w$L}},w$l.getLocalRotation=function(){if(this._localQuaternionUpdate){var w$v=this._localRotationEuler;w$dl._quaternionCreateFromYawPitchRollArray(w$v[1]/w$x._angleToRandin,w$v[0]/w$x._angleToRandin,w$v[2]/w$x._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},w$l.setLocalRotation=function(w$v){if(this._parent)this._localRotation=w$v,w$dl.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var w$l=this._entity.owner._transform,w$L=this._entity.localRotation,w$A=w$L.elements;w$A[0]=w$v[0],w$A[1]=w$v[1],w$A[2]=w$v[2],w$A[3]=w$v[3],w$l.localRotation=w$L}},w$l.getLocalScale=function(){return this._localScale},w$l.setLocalScale=function(w$v){if(this._parent)this._localScale=w$v,this._localUpdate=!0,this._onWorldTransform();else{var w$l=this._entity.owner._transform,w$L=this._entity.localScale,w$A=w$L.elements;w$A[0]=w$v[0],w$A[1]=w$v[1],w$A[2]=w$v[2],w$l.localScale=w$L}},w$l.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){w$dl.getYawPitchRoll(this._localRotation,w$x._tempVector3);var w$v=w$x._tempVector3,w$l=this._localRotationEuler;w$l[0]=w$v[1]*w$x._angleToRandin,w$l[1]=w$v[0]*w$x._angleToRandin,w$l[2]=w$v[2]*w$x._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},w$l.setLocalRotationEuler=function(w$v){if(this._parent)w$dl._quaternionCreateFromYawPitchRollArray(w$v[1]/w$x._angleToRandin,w$v[0]/w$x._angleToRandin,w$v[2]/w$x._angleToRandin,this._localRotation),this._localRotationEuler=w$v,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var w$l=this._entity.owner._transform,w$L=this._entity.localRotationEuler,w$A=w$L.elements;w$A[0]=w$v[0],w$A[1]=w$v[1],w$A[2]=w$v[2],w$l.localRotationEuler=w$L}},w$l.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)w$dl.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var w$v=this._getlocalMatrix(),w$l=0;w$l<16;++w$l)this._worldMatrix[w$l]=w$v[w$l];this._worldUpdate=!1}return this._worldMatrix},w$l.setParent=function(w$v){if(this._parent!==w$v){if(this._parent){var w$l=this._parent._childs,w$L=w$l.indexOf(this);w$l.splice(w$L,1)}w$v&&(w$v._childs.push(this),w$v&&this._onWorldTransform()),this._parent=w$v}},w$o(w$x,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),w$x}(),w$Bl=function(w$v){function w$l(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,w$l.__super.call(this),this._destroyed=!1,this._id=w$l._uniqueIDCounter,w$l._uniqueIDCounter++}w$r(w$l,"laya.d3.component.Component3D",w$m);var w$L=w$l.prototype;return w$f.imps(w$L,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),w$L._initialize=function(w$v){this._owner=w$v,this._enable=!0,this.started=!1,this._load(w$v)},w$L._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},w$L._load=function(w$v){},w$L._start=function(w$v){},w$L._update=function(w$v){},w$L._lateUpdate=function(w$v){},w$L._preRenderUpdate=function(w$v){},w$L._postRenderUpdate=function(w$v){},w$L._unload=function(w$v){this.offAll()},w$L._cloneTo=function(w$v){},w$G(0,w$L,"id",function(){return this._id}),w$G(0,w$L,"destroyed",function(){return this._destroyed}),w$G(0,w$L,"owner",function(){return this._owner}),w$G(0,w$L,"enable",function(){return this._enable},function(w$v){this._enable!==w$v&&(this._enable=w$v,this.event("enablechanged",this._enable))}),w$G(0,w$L,"isSingleton",function(){return w$l._isSingleton}),w$l._isSingleton=!0,w$l._uniqueIDCounter=1,w$l}(),w$Xl=function(w$v){function w$l(){this._destroyed=!1,w$l.__super.call(this),this._destroyed=!1}w$r(w$l,"laya.d3.core.GeometryFilter",w$m);var w$L=w$l.prototype;return w$f.imps(w$L,{"laya.resource.IDestroy":!0}),w$L._destroy=function(){this.offAll(),this._destroyed=!0},w$G(0,w$L,"_isAsyncLoaded",function(){return!0}),w$G(0,w$L,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),w$G(0,w$L,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),w$G(0,w$L,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),w$G(0,w$L,"destroyed",function(){return this._destroyed}),w$l}(),w$fl=function(w$v){function w$A(w$v){w$A.__super.call(this),this._id=++w$A._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new w$sv(new w$Zl,new w$Zl),this._boundingBoxCenter=new w$Zl,this._boundingSphere=new w$nv(new w$Zl,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=w$v,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}w$r(w$A,"laya.d3.core.render.BaseRender",w$m);var w$l=w$A.prototype;return w$f.imps(w$l,{"laya.resource.IDestroy":!0}),w$l._changeMaterialReference=function(w$v,w$l){w$v&&w$v._removeReference(),w$l._addReference()},w$l._getInstanceMaterial=function(w$v,w$l){var w$L=new w$v.constructor;return w$v.cloneTo(w$L),w$L.name=w$L.name+"(Instance)",this._materialsInstance[w$l]=!0,this._changeMaterialReference(this._materials[w$l],w$L),this._materials[w$l]=w$L},w$l._setShaderValuelightMap=function(w$v){this._setShaderValueTexture(3,w$v)},w$l._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},w$l._renderRenderableBoundBox=function(){var w$v=w$Cl._debugPhasorSprite,w$l=this.boundingBox,w$L=w$A._tempBoundBoxCorners;w$l.getCorners(w$L),w$v.line(w$L[0],w$A._greenColor,w$L[1],w$A._greenColor),w$v.line(w$L[2],w$A._greenColor,w$L[3],w$A._greenColor),w$v.line(w$L[4],w$A._greenColor,w$L[5],w$A._greenColor),w$v.line(w$L[6],w$A._greenColor,w$L[7],w$A._greenColor),w$v.line(w$L[0],w$A._greenColor,w$L[3],w$A._greenColor),w$v.line(w$L[1],w$A._greenColor,w$L[2],w$A._greenColor),w$v.line(w$L[2],w$A._greenColor,w$L[6],w$A._greenColor),w$v.line(w$L[3],w$A._greenColor,w$L[7],w$A._greenColor),w$v.line(w$L[0],w$A._greenColor,w$L[4],w$A._greenColor),w$v.line(w$L[1],w$A._greenColor,w$L[5],w$A._greenColor),w$v.line(w$L[4],w$A._greenColor,w$L[7],w$A._greenColor),w$v.line(w$L[5],w$A._greenColor,w$L[6],w$A._greenColor)},w$l._calculateBoundingSphere=function(){throw"BaseRender: must override it."},w$l._calculateBoundingBox=function(){throw"BaseRender: must override it."},w$l._setShaderValueTexture=function(w$v,w$l){this._owner._shaderValues.setValue(w$v,w$l)},w$l._setShaderValueMatrix4x4=function(w$v,w$l){this._owner._shaderValues.setValue(w$v,w$l?w$l.elements:null)},w$l._setShaderValueColor=function(w$v,w$l){this._owner._shaderValues.setValue(w$v,w$l?w$l.elements:null)},w$l._setShaderValueBuffer=function(w$v,w$l){this._owner._shaderValues.setValue(w$v,w$l)},w$l._setShaderValueInt=function(w$v,w$l){this._owner._shaderValues.setValue(w$v,w$l)},w$l._setShaderValueBool=function(w$v,w$l){this._owner._shaderValues.setValue(w$v,w$l)},w$l._setShaderValueNumber=function(w$v,w$l){this._owner._shaderValues.setValue(w$v,w$l)},w$l._setShaderValueVector2=function(w$v,w$l){this._owner._shaderValues.setValue(w$v,w$l?w$l.elements:null)},w$l._addShaderDefine=function(w$v){this._owner._shaderDefineValue|=w$v},w$l._removeShaderDefine=function(w$v){this._owner._shaderDefineValue&=~w$v},w$l._renderUpdate=function(w$v){return!0},w$l._applyLightMapParams=function(){if(0<=this._lightmapIndex){var w$v=this._owner.scene;if(w$v){var w$l=w$v.getlightmaps()[this._lightmapIndex];w$l?(this._addShaderDefine(w$Sl.SAHDERDEFINE_LIGHTMAP),w$l.loaded?this._setShaderValuelightMap(w$l):w$l.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(w$Sl.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(w$Sl.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(w$Sl.SAHDERDEFINE_LIGHTMAP)},w$l._updateOctreeNode=function(){var w$v=this._treeNode;w$v&&this._octreeNodeNeedChange&&(w$v.updateObject(this),this._octreeNodeNeedChange=!1)},w$l._destroy=function(){this.offAll();var w$v=0,w$l=0;for(w$v=0,w$l=this._renderElements.length;w$v<w$l;w$v++)this._renderElements[w$v]._destroy();for(w$v=0,w$l=this._materials.length;w$v<w$l;w$v++)this._materials[w$v]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},w$G(0,w$l,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),w$G(0,w$l,"id",function(){return this._id}),w$G(0,w$l,"material",function(){var w$v=this._materials[0];if(w$v&&!this._materialsInstance[0]){var w$l=this._getInstanceMaterial(w$v,0);this.event("materialchanged",[this,0,w$l])}return this._materials[0]},function(w$v){this.sharedMaterial=w$v}),w$G(0,w$l,"sharedMaterial",function(){return this._materials[0]},function(w$v){var w$l=this._materials[0];w$l!==w$v&&(this._materials[0]=w$v,this._materialsInstance[0]=!1,this._changeMaterialReference(w$l,w$v),this.event("materialchanged",[this,0,w$v]))}),w$G(0,w$l,"lightmapIndex",function(){return this._lightmapIndex},function(w$v){this._lightmapIndex=w$v,this._applyLightMapParams()}),w$G(0,w$l,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(w$v){this._lightmapScaleOffset=w$v,this._setShaderValueColor(2,w$v),this._addShaderDefine(w$Sl.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),w$G(0,w$l,"enable",function(){return this._enable},function(w$v){this._enable=w$v,this.event("enablechanged",[this,w$v])}),w$G(0,w$l,"materials",function(){for(var w$v=0,w$l=this._materials.length;w$v<w$l;w$v++)if(!this._materialsInstance[w$v]){var w$L=this._getInstanceMaterial(this._materials[w$v],w$v);this.event("materialchanged",[this,w$v,w$L])}return this._materials.slice()},function(w$v){this.sharedMaterials=w$v}),w$G(0,w$l,"sharedMaterials",function(){return this._materials.slice()},function(w$v){if(!w$v)throw new Error("MeshRender: shadredMaterials value can't be null.");var w$l=w$v.length;this._materialsInstance.length=w$l;for(var w$L=0;w$L<w$l;w$L++){var w$A=this._materials[w$L];w$A!==w$v[w$L]&&(this._materialsInstance[w$L]=!1,this._changeMaterialReference(w$A,w$v[w$L]),this.event("materialchanged",[this,w$L,w$v[w$L]]))}this._materials=w$v}),w$G(0,w$l,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),w$G(0,w$l,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var w$v=this.boundingBox;w$Zl.add(w$v.min,w$v.max,this._boundingBoxCenter),w$Zl.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),w$G(0,w$l,"receiveShadow",function(){return this._receiveShadow},function(w$v){this._receiveShadow!==w$v&&((this._receiveShadow=w$v)?this._addShaderDefine(w$rl.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(w$rl.SHADERDEFINE_RECEIVE_SHADOW))}),w$G(0,w$l,"destroyed",function(){return this._destroyed}),w$A._uniqueIDCounter=0,w$o(w$A,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new w$Zl,new w$Zl,new w$Zl,new w$Zl,new w$Zl,new w$Zl,new w$Zl,new w$Zl]},"_greenColor",function(){return this._greenColor=new w$Ol(0,1,0,1)}]),w$A}(),w$wl=function(w$v){function w$O(w$v){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,w$O.__super.call(this),this._localPosition=new w$Zl,this._localRotation=new w$Ll(0,0,0,1),this._localScale=new w$Zl(1,1,1),this._localRotationEuler=new w$Zl,this._localMatrix=new w$vl,this._position=new w$Zl,this._rotation=new w$Ll(0,0,0,1),this._scale=new w$Zl(1,1,1),this._worldMatrix=new w$vl,this._forward=new w$Zl,this._up=new w$Zl,this._right=new w$Zl,this._owner=w$v,this._childs=[]}w$r(w$O,"laya.d3.core.Transform3D",w$m);var w$l=w$O.prototype;return w$l._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)w$vl.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var w$v=w$O._tempVector30;w$Zl.multiply(this.pivot,this._localScale,w$v);var w$l=w$O._tempVector31;w$Zl.subtract(w$v,this.pivot,w$l);var w$L=w$O._tempVector32,w$A=this.localRotation;w$Zl.transformQuat(w$v,w$A,w$L),w$Zl.subtract(w$L,w$v,w$L);var w$x=w$O._tempVector33;w$Zl.subtract(this._localPosition,w$l,w$x),w$Zl.subtract(w$x,w$L,w$x),w$vl.createAffineTransformation(w$x,w$A,this._localScale,this._localMatrix)}},w$l._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var w$v=0,w$l=this._childs.length;w$v<w$l;w$v++)this._childs[w$v]._onWorldPositionRotationTransform()}},w$l._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var w$v=0,w$l=this._childs.length;w$v<w$l;w$v++)this._childs[w$v]._onWorldPositionScaleTransform()}},w$l._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var w$v=0,w$l=this._childs.length;w$v<w$l;w$v++)this._childs[w$v]._onWorldPositionTransform()}},w$l._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var w$v=0,w$l=this._childs.length;w$v<w$l;w$v++)this._childs[w$v]._onWorldPositionRotationTransform()}},w$l._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var w$v=0,w$l=this._childs.length;w$v<w$l;w$v++)this._childs[w$v]._onWorldPositionScaleTransform()}},w$l._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var w$v=0,w$l=this._childs.length;w$v<w$l;w$v++)this._childs[w$v]._onWorldTransform()}},w$l.translate=function(w$v,w$l){void 0===w$l&&(w$l=!0),w$l?(w$vl.createFromQuaternion(this.localRotation,w$O._tempMatrix0),w$Zl.transformCoordinate(w$v,w$O._tempMatrix0,w$O._tempVector30),w$Zl.add(this.localPosition,w$O._tempVector30,this._localPosition),this.localPosition=this._localPosition):(w$Zl.add(this.position,w$v,this._position),this.position=this._position)},w$l.rotate=function(w$v,w$l,w$L){var w$A;void 0===w$l&&(w$l=!0),void 0===w$L&&(w$L=!0),w$A=w$L?w$v:(w$Zl.scale(w$v,Math.PI/180,w$O._tempVector30),w$O._tempVector30),w$Ll.createFromYawPitchRoll(w$A.y,w$A.x,w$A.z,w$O._tempQuaternion0),w$l?(w$Ll.multiply(this._localRotation,w$O._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(w$Ll.multiply(w$O._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},w$l.lookAt=function(w$v,w$l,w$L){void 0===w$L&&(w$L=!1);var w$A,w$x=w$v.elements;if(w$L){if(w$A=this._localPosition.elements,Math.abs(w$A[0]-w$x[0])<w$Uv.zeroTolerance&&Math.abs(w$A[1]-w$x[1])<w$Uv.zeroTolerance&&Math.abs(w$A[2]-w$x[2])<w$Uv.zeroTolerance)return;w$Ll.lookAt(this._localPosition,w$v,w$l,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var w$m=this.position;if(w$A=w$m.elements,Math.abs(w$A[0]-w$x[0])<w$Uv.zeroTolerance&&Math.abs(w$A[1]-w$x[1])<w$Uv.zeroTolerance&&Math.abs(w$A[2]-w$x[2])<w$Uv.zeroTolerance)return;w$Ll.lookAt(w$m,w$v,w$l,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},w$G(0,w$l,"_isFrontFaceInvert",function(){var w$v=this.scale,w$l=w$v.x<0;return w$v.y<0&&(w$l=!w$l),w$v.z<0&&(w$l=!w$l),w$l}),w$G(0,w$l,"owner",function(){return this._owner}),w$G(0,w$l,"localRotation",function(){if(this._localQuaternionUpdate){var w$v=this._localRotationEuler.elements;w$Ll.createFromYawPitchRoll(w$v[1]/w$O._angleToRandin,w$v[0]/w$O._angleToRandin,w$v[2]/w$O._angleToRandin,this._localRotation)}return this._localRotation},function(w$v){this._localRotation=w$v,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),w$G(0,w$l,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?w$vl.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(w$v){null===this._parent?w$v.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),w$vl.multiply(this._localMatrix,w$v,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=w$v,this._worldUpdate=!1}),w$G(0,w$l,"worldNeedUpdate",function(){return this._worldUpdate}),w$G(0,w$l,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(w$v){this._localMatrix=w$v,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),w$G(0,w$l,"dummy",function(){return this._dummy},function(w$v){this._dummy!==w$v&&(this._dummy&&(this._dummy._entity=null),w$v&&(w$v._entity=this),this._dummy=w$v)}),w$G(0,w$l,"localPosition",function(){return this._localPosition},function(w$v){this._localPosition=w$v,this._localUpdate=!0,this._onWorldPositionTransform()}),w$G(0,w$l,"position",function(){if(this._positionUpdate){if(null!=this._parent){var w$v=this._parent.position;w$Zl.multiply(this._localPosition,this._parent.scale,w$O._tempVector30),w$Zl.transformQuat(w$O._tempVector30,this._parent.rotation,w$O._tempVector30),w$Zl.add(w$v,w$O._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(w$v){if(null!=this._parent){w$Zl.subtract(w$v,this._parent.position,this._localPosition);var w$l=this._parent.scale.elements,w$L=w$l[0],w$A=w$l[1],w$x=w$l[2];if(1!==w$L||1!==w$A||1!==w$x){var w$m=w$O._tempVector30,w$Z=w$m.elements;w$Z[0]=1/w$L,w$Z[1]=1/w$A,w$Z[2]=1/w$x,w$Zl.multiply(this._localPosition,w$m,this._localPosition)}this._parent.rotation.invert(w$O._tempQuaternion0),w$Zl.transformQuat(this._localPosition,w$O._tempQuaternion0,this._localPosition)}else w$v.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=w$v,this._positionUpdate=!1}),w$G(0,w$l,"localScale",function(){return this._localScale},function(w$v){this._localScale=w$v,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),w$G(0,w$l,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(w$O._tempVector30);var w$v=w$O._tempVector30.elements,w$l=this._localRotationEuler.elements;w$l[0]=w$v[1]*w$O._angleToRandin,w$l[1]=w$v[0]*w$O._angleToRandin,w$l[2]=w$v[2]*w$O._angleToRandin}return this._localRotationEuler},function(w$v){this._localRotationEuler=w$v,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),w$G(0,w$l,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?w$Ll.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(w$v){null!=this._parent?(this._parent.rotation.invert(w$O._tempQuaternion0),w$Ll.multiply(w$v,w$O._tempQuaternion0,this._localRotation)):w$v.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=w$v,this._rotationUpdate=!1}),w$G(0,w$l,"scale",function(){return this._scaleUpdate&&(null!==this._parent?w$Zl.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(w$v){if(null!==this._parent){var w$l=this._parent.scale.elements,w$L=w$O._tempVector30.elements;w$L[0]=1/w$l[0],w$L[1]=1/w$l[1],w$L[2]=1/w$l[2],w$Zl.multiply(w$v,w$O._tempVector30,this._localScale)}else w$v.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=w$v,this._scaleUpdate=!1}),w$G(0,w$l,"rotationEuler",null,function(w$v){w$Ll.createFromYawPitchRoll(w$v.y,w$v.x,w$v.z,this._rotation),this.rotation=this._rotation}),w$G(0,w$l,"forward",function(){var w$v=this.worldMatrix.elements;return this._forward.elements[0]=-w$v[8],this._forward.elements[1]=-w$v[9],this._forward.elements[2]=-w$v[10],this._forward}),w$G(0,w$l,"up",function(){var w$v=this.worldMatrix.elements;return this._up.elements[0]=w$v[4],this._up.elements[1]=w$v[5],this._up.elements[2]=w$v[6],this._up}),w$G(0,w$l,"right",function(){var w$v=this.worldMatrix.elements;return this._right.elements[0]=w$v[0],this._right.elements[1]=w$v[1],this._right.elements[2]=w$v[2],this._right}),w$G(0,w$l,"parent",function(){return this._parent},function(w$v){if(this._parent!==w$v){if(this._parent){var w$l=this._parent._childs,w$L=w$l.indexOf(this);w$l.splice(w$L,1)}w$v&&(w$v._childs.push(this),w$v&&this._onWorldTransform()),this._parent=w$v}}),w$o(w$O,["_tempVector30",function(){return this._tempVector30=new w$Zl},"_tempVector31",function(){return this._tempVector31=new w$Zl},"_tempVector32",function(){return this._tempVector32=new w$Zl},"_tempVector33",function(){return this._tempVector33=new w$Zl},"_tempQuaternion0",function(){return this._tempQuaternion0=new w$Ll},"_tempMatrix0",function(){return this._tempMatrix0=new w$vl},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),w$O}(),w$Hl=(function(w$v){function w$l(){this._rotation=0,this._matNeedUpdte=!1,w$l.__super.call(this),this._matrix=new w$vl,this._offset=new w$ml,this._tiling=new w$ml(1,1)}w$r(w$l,"laya.d3.core.TransformUV",w$m);var w$L=w$l.prototype;w$f.imps(w$L,{"laya.d3.core.IClone":!0}),w$L._updateMatrix=function(){w$l._tempOffsetV3.elements[0]=this._offset.x,w$l._tempOffsetV3.elements[1]=this._offset.y,w$Ll.createFromYawPitchRoll(0,0,this._rotation,w$l._tempRotationQua),w$l._tempTitlingV3.elements[0]=this._tiling.x,w$l._tempTitlingV3.elements[1]=this._tiling.y,w$vl.createAffineTransformation(w$l._tempOffsetV3,w$l._tempRotationQua,w$l._tempTitlingV3,this._matrix)},w$L.cloneTo=function(w$v){w$v._matrix=this._matrix.clone(),w$v._offset=this._offset.clone(),w$v._rotation=this._rotation,w$v._tiling=this._tiling.clone()},w$L.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$G(0,w$L,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),w$G(0,w$L,"tiling",function(){return this._tiling},function(w$v){this._tiling=w$v,this._matNeedUpdte=!0}),w$G(0,w$L,"offset",function(){return this._offset},function(w$v){this._offset=w$v,this._matNeedUpdte=!0}),w$G(0,w$L,"rotation",function(){return this._rotation},function(w$v){this._rotation=w$v,this._matNeedUpdte=!0}),w$o(w$l,["_tempOffsetV3",function(){return this._tempOffsetV3=new w$Zl(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new w$Ll},"_tempTitlingV3",function(){return this._tempTitlingV3=new w$Zl(1,1,1)}])}(),function(w$L){function w$v(){this.x=NaN,this.y=NaN,this.z=NaN,w$v.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}w$r(w$v,"laya.d3.core.particleShuriKen.module.shape.BoxShape",w$L);var w$l=w$v.prototype;w$l._getShapeBoundBox=function(w$v){var w$l=w$v.min.elements;w$l[0]=.5*-this.x,w$l[1]=.5*-this.y,w$l[2]=.5*-this.z;var w$L=w$v.max.elements;w$L[0]=.5*this.x,w$L[1]=.5*this.y,w$L[2]=.5*this.z},w$l._getSpeedBoundBox=function(w$v){var w$l=w$v.min.elements;w$l[0]=0,w$l[1]=0,w$l[2]=0;var w$L=w$v.max.elements;w$L[0]=0,w$L[1]=1,w$L[2]=0},w$l.generatePositionAndDirection=function(w$v,w$l,w$L,w$A){var w$x=w$v.elements,w$m=w$l.elements;w$L?(w$L.seed=w$A[16],w$Y._randomPointInsideHalfUnitBox(w$v,w$L),w$A[16]=w$L.seed):w$Y._randomPointInsideHalfUnitBox(w$v),w$x[0]=this.x*w$x[0],w$x[1]=this.y*w$x[1],w$x[2]=this.z*w$x[2],this.randomDirection?w$L?(w$L.seed=w$A[17],w$Y._randomPointUnitSphere(w$l,w$L),w$A[17]=w$L.seed):w$Y._randomPointUnitSphere(w$l):(w$m[0]=0,w$m[1]=0,w$m[2]=1)},w$l.cloneTo=function(w$v){w$L.prototype.cloneTo.call(this,w$v);var w$l=w$v;w$l.x=this.x,w$l.y=this.y,w$l.z=this.z,w$l.randomDirection=this.randomDirection}}(w$N),function(w$L){function w$Z(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,w$Z.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}w$r(w$Z,"laya.d3.core.particleShuriKen.module.shape.CircleShape",w$L);var w$v=w$Z.prototype;w$v._getShapeBoundBox=function(w$v){var w$l=w$v.min.elements;w$l[0]=w$l[2]=-this.radius,w$l[1]=0;var w$L=w$v.max.elements;w$L[0]=w$L[2]=this.radius,w$L[1]=0},w$v._getSpeedBoundBox=function(w$v){var w$l=w$v.min.elements;w$l[0]=w$l[1]=-1,w$l[2]=0;var w$L=w$v.max.elements;w$L[0]=w$L[1]=1,w$L[2]=0},w$v.generatePositionAndDirection=function(w$v,w$l,w$L,w$A){var w$x=w$v.elements,w$m=w$Z._tempPositionPoint.elements;w$L?(w$L.seed=w$A[16],this.emitFromEdge?w$Y._randomPointUnitArcCircle(this.arc,w$Z._tempPositionPoint,w$L):w$Y._randomPointInsideUnitArcCircle(this.arc,w$Z._tempPositionPoint,w$L),w$A[16]=w$L.seed):this.emitFromEdge?w$Y._randomPointUnitArcCircle(this.arc,w$Z._tempPositionPoint):w$Y._randomPointInsideUnitArcCircle(this.arc,w$Z._tempPositionPoint),w$x[0]=-w$m[0],w$x[1]=w$m[1],w$x[2]=0,w$Zl.scale(w$v,this.radius,w$v),this.randomDirection?w$L?(w$L.seed=w$A[17],w$Y._randomPointUnitSphere(w$l,w$L),w$A[17]=w$L.seed):w$Y._randomPointUnitSphere(w$l):w$v.cloneTo(w$l)},w$v.cloneTo=function(w$v){w$L.prototype.cloneTo.call(this,w$v);var w$l=w$v;w$l.radius=this.radius,w$l.arc=this.arc,w$l.emitFromEdge=this.emitFromEdge,w$l.randomDirection=this.randomDirection},w$o(w$Z,["_tempPositionPoint",function(){return this._tempPositionPoint=new w$ml}])}(w$N),function(w$L){function w$K(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,w$K.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}w$r(w$K,"laya.d3.core.particleShuriKen.module.shape.ConeShape",w$L);var w$v=w$K.prototype;w$v._getShapeBoundBox=function(w$v){var w$l=this.radius+this.length*Math.sin(this.angle),w$L=this.length*Math.cos(this.angle),w$A=w$v.min.elements;w$A[0]=w$A[1]=-w$l,w$A[2]=0;var w$x=w$v.max.elements;w$x[0]=w$x[1]=w$l,w$x[2]=w$L},w$v._getSpeedBoundBox=function(w$v){var w$l=Math.sin(this.angle),w$L=w$v.min.elements;w$L[0]=w$L[1]=-w$l,w$L[2]=0;var w$A=w$v.max.elements;w$A[0]=w$L[1]=w$l,w$A[2]=1},w$v.generatePositionAndDirection=function(w$v,w$l,w$L,w$A){var w$x,w$m=w$v.elements,w$Z=w$l.elements,w$O=w$K._tempPositionPoint.elements,w$e=NaN,w$$=NaN,w$_=Math.cos(this.angle),w$o=Math.sin(this.angle);switch(this.emitType){case 0:w$L?(w$L.seed=w$A[16],w$Y._randomPointInsideUnitCircle(w$K._tempPositionPoint,w$L),w$A[16]=w$L.seed):w$Y._randomPointInsideUnitCircle(w$K._tempPositionPoint),w$e=w$O[0],w$$=w$O[1],w$m[0]=w$e*this.radius,w$m[1]=w$$*this.radius,w$m[2]=0,this.randomDirection?(w$L?(w$L.seed=w$A[17],w$Y._randomPointInsideUnitCircle(w$K._tempDirectionPoint,w$L),w$A[17]=w$L.seed):w$Y._randomPointInsideUnitCircle(w$K._tempDirectionPoint),w$x=w$K._tempDirectionPoint.elements,w$Z[0]=w$x[0]*w$o,w$Z[1]=w$x[1]*w$o):(w$Z[0]=w$e*w$o,w$Z[1]=w$$*w$o),w$Z[2]=w$_;break;case 1:w$L?(w$L.seed=w$A[16],w$Y._randomPointUnitCircle(w$K._tempPositionPoint,w$L),w$A[16]=w$L.seed):w$Y._randomPointUnitCircle(w$K._tempPositionPoint),w$e=w$O[0],w$$=w$O[1],w$m[0]=w$e*this.radius,w$m[1]=w$$*this.radius,w$m[2]=0,this.randomDirection?(w$L?(w$L.seed=w$A[17],w$Y._randomPointInsideUnitCircle(w$K._tempDirectionPoint,w$L),w$A[17]=w$L.seed):w$Y._randomPointInsideUnitCircle(w$K._tempDirectionPoint),w$x=w$K._tempDirectionPoint.elements,w$Z[0]=w$x[0]*w$o,w$Z[1]=w$x[1]*w$o):(w$Z[0]=w$e*w$o,w$Z[1]=w$$*w$o),w$Z[2]=w$_;break;case 2:w$L?(w$L.seed=w$A[16],w$Y._randomPointInsideUnitCircle(w$K._tempPositionPoint,w$L)):w$Y._randomPointInsideUnitCircle(w$K._tempPositionPoint),w$e=w$O[0],w$$=w$O[1],w$m[0]=w$e*this.radius,w$m[1]=w$$*this.radius,w$Z[w$m[2]=0]=w$e*w$o,w$Z[1]=w$$*w$o,w$Z[2]=w$_,w$Zl.normalize(w$l,w$l),w$L?(w$Zl.scale(w$l,this.length*w$L.getFloat(),w$l),w$A[16]=w$L.seed):w$Zl.scale(w$l,this.length*Math.random(),w$l),w$Zl.add(w$v,w$l,w$v),this.randomDirection&&(w$L?(w$L.seed=w$A[17],w$Y._randomPointUnitSphere(w$l,w$L),w$A[17]=w$L.seed):w$Y._randomPointUnitSphere(w$l));break;case 3:w$L?(w$L.seed=w$A[16],w$Y._randomPointUnitCircle(w$K._tempPositionPoint,w$L)):w$Y._randomPointUnitCircle(w$K._tempPositionPoint),w$e=w$O[0],w$$=w$O[1],w$m[0]=w$e*this.radius,w$m[1]=w$$*this.radius,w$Z[w$m[2]=0]=w$e*w$o,w$Z[1]=w$$*w$o,w$Z[2]=w$_,w$Zl.normalize(w$l,w$l),w$L?(w$Zl.scale(w$l,this.length*w$L.getFloat(),w$l),w$A[16]=w$L.seed):w$Zl.scale(w$l,this.length*Math.random(),w$l),w$Zl.add(w$v,w$l,w$v),this.randomDirection&&(w$L?(w$L.seed=w$A[17],w$Y._randomPointUnitSphere(w$l,w$L),w$A[17]=w$L.seed):w$Y._randomPointUnitSphere(w$l));break;default:throw new Error("ConeShape:emitType is invalid.")}},w$v.cloneTo=function(w$v){w$L.prototype.cloneTo.call(this,w$v);var w$l=w$v;w$l.angle=this.angle,w$l.radius=this.radius,w$l.length=this.length,w$l.emitType=this.emitType,w$l.randomDirection=this.randomDirection},w$o(w$K,["_tempPositionPoint",function(){return this._tempPositionPoint=new w$ml},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new w$ml}])}(w$N),function(w$L){function w$v(){this.radius=NaN,this.emitFromShell=!1,w$v.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}w$r(w$v,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",w$L);var w$l=w$v.prototype;w$l._getShapeBoundBox=function(w$v){var w$l=w$v.min.elements;w$l[0]=w$l[1]=w$l[2]=-this.radius;var w$L=w$v.max.elements;w$L[0]=w$L[1]=this.radius,w$L[2]=0},w$l._getSpeedBoundBox=function(w$v){var w$l=w$v.min.elements;w$l[0]=w$l[1]=-1,w$l[2]=0;var w$L=w$v.max.elements;w$L[0]=w$L[1]=w$L[2]=1},w$l.generatePositionAndDirection=function(w$v,w$l,w$L,w$A){var w$x=w$v.elements;w$L?(w$L.seed=w$A[16],this.emitFromShell?w$Y._randomPointUnitSphere(w$v,w$L):w$Y._randomPointInsideUnitSphere(w$v,w$L),w$A[16]=w$L.seed):this.emitFromShell?w$Y._randomPointUnitSphere(w$v):w$Y._randomPointInsideUnitSphere(w$v),w$Zl.scale(w$v,this.radius,w$v);var w$m=w$x[2];w$m<0&&(w$x[2]=-1*w$m),this.randomDirection?w$L?(w$L.seed=w$A[17],w$Y._randomPointUnitSphere(w$l,w$L),w$A[17]=w$L.seed):w$Y._randomPointUnitSphere(w$l):w$v.cloneTo(w$l)},w$l.cloneTo=function(w$v){w$L.prototype.cloneTo.call(this,w$v);var w$l=w$v;w$l.radius=this.radius,w$l.emitFromShell=this.emitFromShell,w$l.randomDirection=this.randomDirection}}(w$N),function(w$L){function w$v(){this.radius=NaN,this.emitFromShell=!1,w$v.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}w$r(w$v,"laya.d3.core.particleShuriKen.module.shape.SphereShape",w$L);var w$l=w$v.prototype;w$l._getShapeBoundBox=function(w$v){var w$l=w$v.min.elements;w$l[0]=w$l[1]=w$l[2]=-this.radius;var w$L=w$v.max.elements;w$L[0]=w$L[1]=w$L[2]=this.radius},w$l._getSpeedBoundBox=function(w$v){var w$l=w$v.min.elements;w$l[0]=w$l[1]=w$l[2]=-1;var w$L=w$v.max.elements;w$L[0]=w$L[1]=w$L[2]=1},w$l.generatePositionAndDirection=function(w$v,w$l,w$L,w$A){w$L?(w$L.seed=w$A[16],this.emitFromShell?w$Y._randomPointUnitSphere(w$v,w$L):w$Y._randomPointInsideUnitSphere(w$v,w$L),w$A[16]=w$L.seed):this.emitFromShell?w$Y._randomPointUnitSphere(w$v):w$Y._randomPointInsideUnitSphere(w$v),w$Zl.scale(w$v,this.radius,w$v),this.randomDirection?w$L?(w$L.seed=w$A[17],w$Y._randomPointUnitSphere(w$l,w$L),w$A[17]=w$L.seed):w$Y._randomPointUnitSphere(w$l):w$v.cloneTo(w$l)},w$l.cloneTo=function(w$v){w$L.prototype.cloneTo.call(this,w$v);var w$l=w$v;w$l.radius=this.radius,w$l.emitFromShell=this.emitFromShell,w$l.randomDirection=this.randomDirection}}(w$N),function(w$v){function w$l(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,w$l.__super.call(this)}return w$r(w$l,"laya.d3.core.render.SubMeshRenderElement",w$y),w$l}()),w$gl=function(w$v){function w$d(w$v,w$l,w$L,w$A,w$x,w$m){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=w$v,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[w$rl.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[w$Sl.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[w$Sl.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[w$kl.SHADERDEFINE_ALPHATEST]="ALPHATEST";w$d.__super.call(this,w$v,w$l,w$L,null,{}),this._attributeMap=w$A;var w$Z;for(w$Z in w$x){var w$O=w$x[w$Z];switch(w$O[1]){case 0:this._renderElementUniformMap[w$Z]=w$O[0];break;case 1:this._materialUniformMap[w$Z]=w$O[0];break;case 2:this._spriteUniformMap[w$Z]=w$O[0];break;case 3:this._cameraUniformMap[w$Z]=w$O[0];break;case 4:this._sceneUniformMap[w$Z]=w$O[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}w$r(w$d,"laya.d3.shader.ShaderCompile3D",w$B);var w$l=w$d.prototype;return w$l._definesToNameDic=function(w$v,w$l){for(var w$L={},w$A=1,w$x=0;w$x<32&&!(w$v<(w$A=1<<w$x));w$x++)if(w$v&w$A){var w$m=w$l[w$A];w$m&&(w$L[w$m]="")}return w$L},w$l.withCompile=function(w$v,w$l,w$L,w$A){var w$x,w$m,w$Z;if(w$m=this.sharders[w$v])if(w$Z=w$m[w$l]){if(w$x=w$Z[w$L])return w$x}else w$Z=w$m[w$l]=[];else w$Z=(w$m=this.sharders[w$v]=[])[w$l]=[];var w$O,w$e=this._definesToNameDic(w$v,w$d._globalInt2name),w$$=this._definesToNameDic(w$l,this._spriteInt2name),w$_=this._definesToNameDic(w$L,this._materialInt2name),w$o={},w$K="";if(w$e)for(w$O in w$e)w$K+="#define "+w$O+"\n",w$o[w$O]=!0;if(w$$)for(w$O in w$$)w$K+="#define "+w$O+"\n",w$o[w$O]=!0;if(w$_)for(w$O in w$_)w$K+="#define "+w$O+"\n",w$o[w$O]=!0;var w$r=w$ql.nameKey.getName(this._name)+" compile ("+w$v+","+w$l+","+w$L+")",w$G=this._VS.toscript(w$o,[]),w$c=this._PS.toscript(w$o,[]);w$P.now();if(w$x=w$ql.create(w$K+w$G.join("\n"),w$K+w$c.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,w$A,w$r),w$Z[w$L]=w$x,laya.d3.shader.ShaderCompile3D.debugMode)w$P.now();return w$x},w$l.precompileShaderWithShaderDefine=function(w$v,w$l,w$L){this.withCompile(w$v,w$l,w$L,!0)},w$l.addMaterialDefines=function(w$v){var w$l=w$v.defines;for(var w$L in w$l){var w$A=w$l[w$L],w$x=parseInt(w$L);this._materialInt2name[w$x]=w$A,this._materialName2Int[w$A]=w$x}},w$l.addSpriteDefines=function(w$v){var w$l=w$v.defines;for(var w$L in w$l){var w$A=w$l[w$L],w$x=parseInt(w$L);this._spriteInt2name[w$x]=w$A,this._spriteName2Int[w$A]=w$x}},w$l.getMaterialDefineByName=function(w$v){return this._materialName2Int[w$v]},w$l.registerMaterialDefine=function(w$v){var w$l=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[w$l]=w$v,this._materialName2Int[w$v]=w$l},w$l.registerSpriteDefine=function(w$v){var w$l=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[w$l]=w$v,this._spriteName2Int[w$v]=w$l},w$d._globalRegDefine=function(w$v,w$l){w$d._globalInt2name[w$l]=w$v},w$d.add=function(w$v,w$l,w$L,w$A,w$x){return laya.d3.shader.ShaderCompile3D._preCompileShader[w$v]=new w$d(w$v,w$l,w$L,w$A,w$x,w$B.includes)},w$d.get=function(w$v){return laya.d3.shader.ShaderCompile3D._preCompileShader[w$ql.nameKey.getID(w$v)]},w$d._preCompileShader={},w$d._globalInt2name=[],w$d.debugMode=!1,w$d.SHADERDEFINE_HIGHPRECISION=1,w$d.SHADERDEFINE_FOG=4,w$d.SHADERDEFINE_DIRECTIONLIGHT=8,w$d.SHADERDEFINE_POINTLIGHT=16,w$d.SHADERDEFINE_SPOTLIGHT=32,w$d.SHADERDEFINE_UV0=64,w$d.SHADERDEFINE_COLOR=128,w$d.SHADERDEFINE_UV1=256,w$d.SAHDERDEFINE_DEPTHFOG=131072,w$d}(),w$Tl=function(w$v){function w$G(){w$G.__super.call(this)}w$r(w$G,"laya.d3.graphics.MeshSprite3DStaticBatchManager",w$Av);var w$l=w$G.prototype;return w$l._getStaticBatch=function(w$v,w$l,w$L,w$A){var w$x,w$m;return w$m=w$v?w$v.id.toString()+w$L.id.toString()+w$l.id.toString()+w$A.toString():w$L.id.toString()+w$l.id.toString()+w$A.toString(),this._staticBatches[w$m]?w$x=this._staticBatches[w$m]:this._staticBatches[w$m]=w$x=new w$hl(w$m,this,w$v,w$l,w$L),w$x},w$l._initStaticBatchs=function(w$v){var w$l,w$L;this._initBatchRenderElements.sort(w$G._sortPrepareStaticBatch);for(var w$A,w$x=!1,w$m=0,w$Z=0,w$O=this._initBatchRenderElements.length;w$Z<w$O;w$Z++){var w$e,w$$=this._initBatchRenderElements[w$Z],w$_=w$$.renderObj._getVertexBuffer(0);w$$._sprite3D;if(w$L===w$_.vertexDeclaration&&w$l===w$$._material)if(w$x)w$A._addCombineBatchRenderObjTest(w$$)?(w$e=w$$._staticBatch)!==w$A&&(w$e&&w$e._deleteCombineBatchRenderObj(w$$),w$A._addCombineBatchRenderObj(w$$)):(w$x=!1,w$m++);else{var w$o=this._initBatchRenderElements[w$Z-1],w$K=w$o.renderObj,w$r=w$$.renderObj;w$x=!(65535<w$K._getVertexBuffer().vertexCount+w$r._getVertexBuffer().vertexCount)&&(w$A=this._getStaticBatch(w$v,w$L,w$l,w$m),(w$e=w$o._staticBatch)!==w$A&&(w$e&&w$e._deleteCombineBatchRenderObj(w$o),w$A._addCombineBatchRenderObj(w$o)),(w$e=w$$._staticBatch)!==w$A&&(w$e&&w$e._deleteCombineBatchRenderObj(w$$),w$A._addCombineBatchRenderObj(w$$)),!0)}else w$x=!1,w$m=0;w$l=w$$._material,w$L=w$_.vertexDeclaration}},w$G._sortPrepareStaticBatch=function(w$v,w$l){var w$L=w$v._render,w$A=w$l._render,w$x=w$L.lightmapIndex-w$A.lightmapIndex;if(0!=w$x)return w$x;var w$m=w$L.receiveShadow-w$A.receiveShadow;if(0!=w$m)return w$m;var w$Z=w$v._mainSortID-w$l._mainSortID;return 0==w$Z?w$v.renderObj.triangleCount-w$l.renderObj.triangleCount:w$Z},w$G}(),w$hl=function(w$v){function w$m(w$v,w$l,w$L,w$A,w$x){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,w$m.__super.call(this,w$v,w$l,w$L),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=w$A,this._material=w$x}w$r(w$m,"laya.d3.graphics.SubMeshStaticBatch",w$xv);var w$l=w$m.prototype;return w$l._compareBatchRenderElement=function(w$v,w$l){return w$v._batchIndexStart>w$l._batchIndexStart},w$l._addCombineBatchRenderObjTest=function(w$v){var w$l=w$v.renderObj._vertexCount;return!(65535<(0<w$l?this._currentCombineVertexCount+w$l:this._currentCombineVertexCount+w$v.renderObj._getVertexBuffer().vertexCount))},w$l._addCombineBatchRenderObj=function(w$v){var w$l=w$v.renderObj,w$L=w$l._vertexCount;this._initBatchRenderElements.push(w$v),w$v._staticBatch=this,0<w$L?(this._currentCombineIndexCount+=w$l._indexCount,this._currentCombineVertexCount+=w$L):(this._currentCombineIndexCount=this._currentCombineIndexCount+w$l._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+w$l._getVertexBuffer().vertexCount),this._needFinishCombine=!0},w$l._deleteCombineBatchRenderObj=function(w$v){var w$l=w$v.renderObj,w$L=this._initBatchRenderElements.indexOf(w$v);if(-1!==w$L){this._initBatchRenderElements.splice(w$L,1),w$v._staticBatch=null;var w$A=w$l._vertexCount;0<w$A?(this._currentCombineIndexCount=this._currentCombineIndexCount-w$l._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-w$A):(this._currentCombineIndexCount=this._currentCombineIndexCount-w$l._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-w$l._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},w$l._finishInit=function(){if(this._needFinishCombine){var w$v=0,w$l=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var w$L=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),w$A=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=w$Nl.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=w$Rl.create("ushort",this._currentCombineIndexCount,35044);for(var w$x=0,w$m=this._initBatchRenderElements.length;w$x<w$m;w$x++){var w$Z=this._initBatchRenderElements[w$x],w$O=w$Z.renderObj,w$e=w$O._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,w$Z._sprite3D),w$$=w$O.getIndices(),w$_=w$Z._sprite3D.transform._isFrontFaceInvert,w$o=w$v/(this._vertexDeclaration.vertexStride/4)-w$O._vertexStart,w$K=w$l,w$r=w$K+w$$.length;w$Z._batchIndexStart=w$K,w$Z._batchIndexEnd=w$r,w$A.set(w$$,w$l);var w$G=0;if(w$_)for(w$G=w$K;w$G<w$r;w$G+=3){w$A[w$G]=w$o+w$A[w$G];var w$c=w$A[w$G+1],w$d=w$A[w$G+2];w$A[w$G+1]=w$o+w$d,w$A[w$G+2]=w$o+w$c}else for(w$G=w$K;w$G<w$r;w$G+=3)w$A[w$G]=w$o+w$A[w$G],w$A[w$G+1]=w$o+w$A[w$G+1],w$A[w$G+2]=w$o+w$A[w$G+2];w$l+=w$$.length,w$L.set(w$e,w$v),w$v+=w$e.length}this._vertexBuffer.setData(w$L),this._indexBuffer.setData(w$A),this._needFinishCombine=!1}},w$l._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new w$Hl)},w$l._getRenderElement=function(w$v,w$l,w$L){for(var w$A,w$x,w$m=this._batchRenderElements.length,w$Z=!0,w$O=0;w$O<w$m;w$O++){var w$e,w$$,w$_=(w$x=this._batchRenderElements[w$O])._sprite3D._render;if(0!==w$O&&(w$Z=(w$e=(w$A=this._batchRenderElements[w$O-1])._sprite3D._render).lightmapIndex!==w$_.lightmapIndex||w$e.receiveShadow!==w$_.receiveShadow||w$A._batchIndexEnd!==w$x._batchIndexStart),w$Z){(w$$=this._getCombineRenderElementFromPool()).renderObj=this,w$$._material=this._material,w$$._batchIndexStart=w$x._batchIndexStart,w$$._batchIndexEnd=w$x._batchIndexEnd;var w$o=w$_.lightmapIndex,w$K=w$o+1,w$r=this._batchOwnerIndices[w$K];w$r||(w$r=this._batchOwnerIndices[w$K]=[]);var w$G,w$c=w$r[w$x._render.receiveShadow?1:0];void 0===w$c?(w$r[w$_.receiveShadow?1:0]=this._batchOwners.length,(w$G=new w$Wl(null,"StaticBatchMeshSprite3D"))._scene=w$l,w$G._transform=this._rootOwner?this._rootOwner._transform:null,w$G._render.lightmapIndex=w$o,w$G._render.receiveShadow=w$x._render.receiveShadow,this._batchOwners.push(w$G)):w$G=this._batchOwners[w$c],w$G._render._renderUpdate(w$L),w$$._sprite3D=w$G,w$v.push(w$$)}else w$$._batchIndexEnd=w$x._batchIndexEnd}},w$l._beforeRender=function(w$v){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},w$l._render=function(w$v){var w$l=w$v.renderElement,w$L=w$l._batchIndexStart,w$A=w$l._batchIndexEnd-w$L;w$Q.mainContext.drawElements(4,w$A,5123,2*w$L),w$g.drawCall++,w$g.trianglesFaces+=w$A/3},w$l.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},w$l._getVertexBuffer=function(w$v){return void 0===w$v&&(w$v=0),this._vertexBuffer},w$m}(),w$Vl=function(w$v){function w$l(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,w$l.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}w$r(w$l,"laya.d3.core.ComponentNode",w$$);var w$L=w$l.prototype;return w$L.addComponent=function(w$v){var w$l,w$L=this._componentsMap.indexOf(w$v);if(-1===w$L)w$l=[],this._componentsMap.push(w$v),this._typeComponentsIndices.push(w$l);else if(w$l=this._typeComponentsIndices[w$L],this._components[w$l[0]].isSingleton)throw new Error("无法单实例创建"+w$v+"组件，"+w$v+"组件已存在！");var w$A=w$x.getInstance(w$v);return w$l.push(this._components.length),this._components.push(w$A),w$A instanceof laya.d3.component.Script&&this._scripts.push(w$A),w$A._initialize(this),w$A},w$L._removeComponent=function(w$v,w$l){var w$L=this._typeComponentsIndices[w$v],w$A=w$L[w$l],w$x=this._components[w$A];this._components.splice(w$A,1),w$x instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(w$x),1),w$L.splice(w$l,1),0===w$L.length&&(this._typeComponentsIndices.splice(w$v,1),this._componentsMap.splice(w$v,1));for(var w$m=0,w$Z=this._componentsMap.length;w$m<w$Z;w$m++)for(var w$O=(w$L=this._typeComponentsIndices[w$m]).length-1;0<=w$O;w$O--){var w$e=w$L[w$O];if(!(w$A<w$e))break;w$L[w$O]=--w$e}w$x._destroy()},w$L.getComponentByType=function(w$v,w$l){void 0===w$l&&(w$l=0);var w$L=this._componentsMap.indexOf(w$v);return-1===w$L?null:this._components[this._typeComponentsIndices[w$L][w$l]]},w$L.getComponentsByType=function(w$v,w$l){var w$L=this._componentsMap.indexOf(w$v);if(-1!==w$L){var w$A=this._typeComponentsIndices[w$L],w$x=w$A.length;w$l.length=w$x;for(var w$m=0;w$m<w$x;w$m++)w$l[w$m]=this._components[w$A[w$m]]}else w$l.length=0},w$L.getComponentByIndex=function(w$v){return this._components[w$v]},w$L.removeComponentByType=function(w$v,w$l){void 0===w$l&&(w$l=0);var w$L=this._componentsMap.indexOf(w$v);-1!==w$L&&this._removeComponent(w$L,w$l)},w$L.removeComponentsByType=function(w$v){var w$l=this._componentsMap.indexOf(w$v);if(-1!==w$l)for(var w$L=this._typeComponentsIndices[w$l],w$A=0,w$x=w$L.length;w$A<w$x;w$L.length<w$x?w$x--:w$A++)this._removeComponent(w$l,w$A)},w$L.removeAllComponent=function(){for(var w$v=0,w$l=this._componentsMap.length;w$v<w$l;this._componentsMap.length<w$l?w$l--:w$v++)this.removeComponentsByType(this._componentsMap[w$v])},w$L._updateComponents=function(w$v){for(var w$l=0,w$L=this._components.length;w$l<w$L;w$l++){var w$A=this._components[w$l];!w$A.started&&(w$A._start(w$v),w$A.started=!0),w$A.enable&&w$A._update(w$v)}},w$L._lateUpdateComponents=function(w$v){for(var w$l=0;w$l<this._components.length;w$l++){var w$L=this._components[w$l];!w$L.started&&(w$L._start(w$v),w$L.started=!0),w$L.enable&&w$L._lateUpdate(w$v)}},w$L._preRenderUpdateComponents=function(w$v){for(var w$l=0;w$l<this._components.length;w$l++){var w$L=this._components[w$l];!w$L.started&&(w$L._start(w$v),w$L.started=!0),w$L.enable&&w$L._preRenderUpdate(w$v)}},w$L._postRenderUpdateComponents=function(w$v){for(var w$l=0;w$l<this._components.length;w$l++){var w$L=this._components[w$l];!w$L.started&&(w$L._start(w$v),w$L.started=!0),w$L.enable&&w$L._postRenderUpdate(w$v)}},w$l}(),w$kl=function(w$A){function w$v(){w$v.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new w$Kl,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new w$Ol(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}w$r(w$v,"laya.d3.core.material.BaseMaterial",w$A);var w$l=w$v.prototype;return w$f.imps(w$l,{"laya.d3.core.IClone":!0}),w$l._addShaderDefine=function(w$v){this._shaderDefineValue|=w$v},w$l._removeShaderDefine=function(w$v){this._shaderDefineValue&=~w$v},w$l._addDisablePublicShaderDefine=function(w$v){this._disablePublicShaderDefine|=w$v},w$l._removeDisablePublicShaderDefine=function(w$v){this._disablePublicShaderDefine&=~w$v},w$l._setBuffer=function(w$v,w$l){this._shaderValues.setValue(w$v,w$l),this._values[w$v]=w$l},w$l._getBuffer=function(w$v){return this._values[w$v]},w$l._setMatrix4x4=function(w$v,w$l){this._shaderValues.setValue(w$v,w$l?w$l.elements:null),this._values[w$v]=w$l},w$l._getMatrix4x4=function(w$v){return this._values[w$v]},w$l._setInt=function(w$v,w$l){this._shaderValues.setValue(w$v,w$l),this._values[w$v]=w$l},w$l._getInt=function(w$v){return this._values[w$v]},w$l._setNumber=function(w$v,w$l){this._shaderValues.setValue(w$v,w$l),this._values[w$v]=w$l},w$l._getNumber=function(w$v){return this._values[w$v]},w$l._setBool=function(w$v,w$l){this._shaderValues.setValue(w$v,w$l),this._values[w$v]=w$l},w$l._getBool=function(w$v){return this._values[w$v]},w$l._setVector2=function(w$v,w$l){this._shaderValues.setValue(w$v,w$l?w$l.elements:null),this._values[w$v]=w$l},w$l._getVector2=function(w$v){return this._values[w$v]},w$l._setColor=function(w$v,w$l){this._shaderValues.setValue(w$v,w$l?w$l.elements:null),this._values[w$v]=w$l},w$l._getColor=function(w$v){return this._values[w$v]},w$l._setTexture=function(w$v,w$l){var w$L=this._values[w$v];this._values[w$v]=w$l,this._shaderValues.setValue(w$v,w$l),0<this.referenceCount&&(w$L&&w$L._removeReference(),w$l&&w$l._addReference())},w$l._getTexture=function(w$v){return this._values[w$v]},w$l._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},w$l._getShader=function(w$v,w$l,w$L){var w$A=(w$v|w$l)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(w$A,w$L,this._shaderDefineValue),this._shader},w$l._setRenderStateBlendDepth=function(){var w$v=w$Q.mainContext;switch(w$M.setDepthMask(w$v,this.depthWrite),0===this.depthTest?w$M.setDepthTest(w$v,!1):(w$M.setDepthTest(w$v,!0),w$M.setDepthFunc(w$v,this.depthTest)),this.blend){case 0:w$M.setBlend(w$v,!1);break;case 1:w$M.setBlend(w$v,!0),w$M.setBlendFunc(w$v,this.srcBlend,this.dstBlend);break;case 2:w$M.setBlend(w$v,!0)}},w$l._setRenderStateFrontFace=function(w$v,w$l){var w$L=w$Q.mainContext,w$A=0;switch(this.cull){case 0:w$M.setCullFace(w$L,!1);break;case 1:w$M.setCullFace(w$L,!0),w$A=w$v?w$l&&w$l._isFrontFaceInvert?2305:2304:w$l&&w$l._isFrontFaceInvert?2304:2305,w$M.setFrontFace(w$L,w$A);break;case 2:w$M.setCullFace(w$L,!0),w$A=w$v?w$l&&w$l._isFrontFaceInvert?2304:2305:w$l&&w$l._isFrontFaceInvert?2305:2304,w$M.setFrontFace(w$L,w$A)}},w$l.onAsynLoaded=function(w$v,w$l,w$L){var w$A=w$l[0],w$x=w$l[1];switch(w$A.version){case"LAYAMATERIAL:01":var w$m=0,w$Z=0,w$O=w$A.props;for(var w$e in w$O)switch(w$e){case"vectors":var w$$=w$O[w$e];for(w$m=0,w$Z=w$$.length;w$m<w$Z;w$m++){var w$_=w$$[w$m],w$o=w$_.value;switch(w$o.length){case 2:this[w$_.name]=new w$ml(w$o[0],w$o[1]);break;case 3:this[w$_.name]=new w$Zl(w$o[0],w$o[1],w$o[2]);break;case 4:this[w$_.name]=new w$Ol(w$o[0],w$o[1],w$o[2],w$o[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var w$K=w$O[w$e];for(w$m=0,w$Z=w$K.length;w$m<w$Z;w$m++){var w$r=w$K[w$m],w$G=w$r.path;w$G&&(this[w$r.name]=w$C.getRes(w$x[w$G]))}break;case"defines":var w$c=w$O[w$e];for(w$m=0,w$Z=w$c.length;w$m<w$Z;w$m++){var w$d=this._shaderCompile.getMaterialDefineByName(w$c[w$m]);this._addShaderDefine(w$d)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[w$e]=w$O[w$e];break;case"renderQueue":switch(w$O[w$e]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[w$e]=w$O[w$e]}break;case"LAYAMATERIAL:02":for(w$e in w$O=w$A.props)switch(w$e){case"vectors":for(w$m=0,w$Z=(w$$=w$O[w$e]).length;w$m<w$Z;w$m++)switch((w$o=(w$_=w$$[w$m]).value).length){case 2:this[w$_.name]=new w$ml(w$o[0],w$o[1]);break;case 3:this[w$_.name]=new w$Zl(w$o[0],w$o[1],w$o[2]);break;case 4:this[w$_.name]=new w$Ol(w$o[0],w$o[1],w$o[2],w$o[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(w$m=0,w$Z=(w$K=w$O[w$e]).length;w$m<w$Z;w$m++)(w$G=(w$r=w$K[w$m]).path)&&(this[w$r.name]=w$C.getRes(w$x[w$G]));break;case"defines":for(w$m=0,w$Z=(w$c=w$O[w$e]).length;w$m<w$Z;w$m++)w$d=this._shaderCompile.getMaterialDefineByName(w$c[w$m]),this._addShaderDefine(w$d);break;default:this[w$e]=w$O[w$e]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},w$l._addReference=function(){w$A.prototype._addReference.call(this);for(var w$v=0,w$l=this._values.length;w$v<w$l;w$v++){var w$L=this._values[w$v];w$L&&w$L instanceof laya.d3.resource.BaseTexture&&w$L._addReference()}},w$l._removeReference=function(){w$A.prototype._removeReference.call(this);for(var w$v=0,w$l=this._values.length;w$v<w$l;w$v++){var w$L=this._values[w$v];w$L&&w$L instanceof laya.d3.resource.BaseTexture&&w$L._removeReference()}},w$l.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},w$l.setShaderName=function(w$v){var w$l=w$ql.nameKey.getID(w$v);if(-1===w$l)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=w$gl._preCompileShader[w$l]},w$l.cloneTo=function(w$v){var w$l=w$v;w$l.name=this.name,w$l.cull=this.cull,w$l.blend=this.blend,w$l.srcBlend=this.srcBlend,w$l.dstBlend=this.dstBlend,w$l.srcBlendRGB=this.srcBlendRGB,w$l.dstBlendRGB=this.dstBlendRGB,w$l.srcBlendAlpha=this.srcBlendAlpha,w$l.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(w$l.blendConstColor),w$l.blendEquation=this.blendEquation,w$l.blendEquationRGB=this.blendEquationRGB,w$l.blendEquationAlpha=this.blendEquationAlpha,w$l.depthTest=this.depthTest,w$l.depthWrite=this.depthWrite,w$l.renderQueue=this.renderQueue,w$l._shader=this._shader,w$l._disablePublicShaderDefine=this._disablePublicShaderDefine,w$l._shaderDefineValue=this._shaderDefineValue;var w$L,w$A=0,w$x=w$l._shaderValues;w$l._shaderValues.data.length=this._shaderValues.data.length;var w$m=this._values.length,w$Z=w$l._values;for(w$A=0,w$L=w$Z.length=w$m;w$A<w$L;w$A++){var w$O=this._values[w$A];if(w$O)if("number"==typeof w$O)w$Z[w$A]=w$O,w$x.data[w$A]=w$O;else if("number"==typeof w$O&&Math.floor(w$O)==w$O)w$Z[w$A]=w$O,w$x.data[w$A]=w$O;else if("boolean"==typeof w$O)w$Z[w$A]=w$O,w$x.data[w$A]=w$O;else if(w$O instanceof laya.d3.math.Vector2){var w$e=w$Z[w$A]||(w$Z[w$A]=new w$ml);w$O.cloneTo(w$e),w$x.data[w$A]=w$e.elements}else if(w$O instanceof laya.d3.math.Vector3){var w$$=w$Z[w$A]||(w$Z[w$A]=new w$Zl);w$O.cloneTo(w$$),w$x.data[w$A]=w$$.elements}else if(w$O instanceof laya.d3.math.Vector4){var w$_=w$Z[w$A]||(w$Z[w$A]=new w$Ol);w$O.cloneTo(w$_),w$x.data[w$A]=w$_.elements}else if(w$O instanceof laya.d3.math.Matrix4x4){var w$o=w$Z[w$A]||(w$Z[w$A]=new w$vl);w$O.cloneTo(w$o),w$x.data[w$A]=w$o.elements}else w$O instanceof laya.d3.resource.BaseTexture&&(w$Z[w$A]=w$O,w$x.data[w$A]=w$O)}},w$l.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$G(0,w$l,"alphaTestValue",function(){return this._getNumber(0)},function(w$v){this._setNumber(0,w$v)}),w$G(0,w$l,"alphaTest",function(){return this._alphaTest},function(w$v){(this._alphaTest=w$v)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),w$v.__init__=function(){w$v.SHADERDEFINE_ALPHATEST=w$v.shaderDefines.registerDefine("ALPHATEST")},w$v.RENDERQUEUE_OPAQUE=2e3,w$v.RENDERQUEUE_ALPHATEST=2450,w$v.RENDERQUEUE_TRANSPARENT=3e3,w$v.CULL_NONE=0,w$v.CULL_FRONT=1,w$v.CULL_BACK=2,w$v.BLEND_DISABLE=0,w$v.BLEND_ENABLE_ALL=1,w$v.BLEND_ENABLE_SEPERATE=2,w$v.BLENDPARAM_ZERO=0,w$v.BLENDPARAM_ONE=1,w$v.BLENDPARAM_SRC_COLOR=768,w$v.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,w$v.BLENDPARAM_DST_COLOR=774,w$v.BLENDPARAM_ONE_MINUS_DST_COLOR=775,w$v.BLENDPARAM_SRC_ALPHA=770,w$v.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,w$v.BLENDPARAM_DST_ALPHA=772,w$v.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,w$v.BLENDPARAM_SRC_ALPHA_SATURATE=776,w$v.BLENDEQUATION_ADD=0,w$v.BLENDEQUATION_SUBTRACT=1,w$v.BLENDEQUATION_REVERSE_SUBTRACT=2,w$v.DEPTHTEST_OFF=0,w$v.DEPTHTEST_NEVER=512,w$v.DEPTHTEST_LESS=513,w$v.DEPTHTEST_EQUAL=514,w$v.DEPTHTEST_LEQUAL=515,w$v.DEPTHTEST_GREATER=516,w$v.DEPTHTEST_NOTEQUAL=517,w$v.DEPTHTEST_GEQUAL=518,w$v.DEPTHTEST_ALWAYS=519,w$v.SHADERDEFINE_ALPHATEST=1,w$v.ALPHATESTVALUE=0,w$o(w$v,["shaderDefines",function(){return this.shaderDefines=new w$_l}]),w$v}(w$d),w$Ql=function(w$v){function w$l(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,w$l.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}w$r(w$l,"laya.d3.resource.BaseTexture",w$d);var w$L=w$l.prototype;return w$G(0,w$L,"width",function(){return this._width}),w$G(0,w$L,"repeat",function(){return this._repeat},function(w$v){if(this._repeat!==w$v&&(this._repeat=w$v,this._source)){var w$l=w$Q.mainContext;w$M.bindTexture(w$l,this._type,this._source),w$X.isPOT(this._width,this._height)&&this._repeat?(w$l.texParameteri(this._type,10242,10497),w$l.texParameteri(this._type,10243,10497)):(w$l.texParameteri(this._type,10242,33071),w$l.texParameteri(this._type,10243,33071))}}),w$G(0,w$L,"height",function(){return this._height}),w$G(0,w$L,"magFifter",function(){return this._magFifter},function(w$v){(this._magFifter=w$v)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(w$v)}),w$G(0,w$L,"wrapModeV",function(){return this._wrapModeV}),w$G(0,w$L,"size",function(){return this._size}),w$G(0,w$L,"wrapModeU",function(){return this._wrapModeU}),w$G(0,w$L,"mipmap",function(){return this._mipmap},function(w$v){this._mipmap=w$v,this._mipmap!=w$v&&this._conchTexture&&this._conchTexture.setMipMap(w$v)}),w$G(0,w$L,"minFifter",function(){return this._minFifter},function(w$v){this._minFifter=w$v,this._minFifter!=w$v&&this._conchTexture&&this._conchTexture.setMinFifter(w$v)}),w$G(0,w$L,"format",function(){return this._format}),w$G(0,w$L,"source",function(){return this.activeResource(),this._source}),w$G(0,w$L,"defaulteTexture",function(){return w$pl.grayTexture}),w$l.WARPMODE_REPEAT=0,w$l.WARPMODE_CLAMP=1,w$l}(),w$Ml=function(w$v){function w$l(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,w$l.__super.call(this),this._boundingBoxCorners=w$A(8,null)}w$r(w$l,"laya.d3.resource.models.BaseMesh",w$d);var w$L=w$l.prototype;return w$L._getPositions=function(){throw new Error("未Override,请重载该属性！")},w$L._generateBoundingObject=function(){this._boundingSphere=new w$nv(new w$Zl,0),w$nv.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new w$sv(new w$Zl,new w$Zl),w$sv.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},w$L.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},w$L.getRenderElement=function(w$v){throw new Error("未Override,请重载该属性！")},w$G(0,w$L,"subMeshCount",function(){return this._subMeshCount}),w$G(0,w$L,"boundingBox",function(){return this._boundingBox}),w$G(0,w$L,"boundingBoxCorners",function(){return this._boundingBoxCorners}),w$G(0,w$L,"boundingSphere",function(){return this._boundingSphere}),w$l}(),w$Pl=(function(w$v){function w$l(){w$l.__super.call(this)}w$r(w$l,"laya.d3.component.Script",w$Bl);var w$L=w$l.prototype;w$L.onTriggerEnter=function(w$v){},w$L.onTriggerExit=function(w$v){},w$L.onTriggerStay=function(w$v){},w$G(0,w$L,"isSingleton",function(){return w$l._isSingleton}),w$l._isSingleton=!1}(),function(w$v){function w$l(w$v){this._owner=null,this._sharedMesh=null,w$l.__super.call(this),this._owner=w$v}w$r(w$l,"laya.d3.core.MeshFilter",w$v);var w$L=w$l.prototype;return w$L._sharedMeshLoaded=function(){this.event("loaded")},w$L._destroy=function(){w$v.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},w$G(0,w$L,"sharedMesh",function(){return this._sharedMesh},function(w$v){var w$l=this._sharedMesh;w$l&&w$l._removeReference(),(this._sharedMesh=w$v)._addReference(),this.event("meshchanged",[this,w$l,w$v]),w$v.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),w$G(0,w$L,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),w$G(0,w$L,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),w$G(0,w$L,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),w$G(0,w$L,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),w$l}(w$Xl)),w$Il=function(w$v){function w$l(w$v){w$l.__super.call(this,w$v),w$v.meshFilter.on("meshchanged",this,this._onMeshChanged)}w$r(w$l,"laya.d3.core.MeshRender",w$fl);var w$L=w$l.prototype;return w$L._onMeshChanged=function(w$v,w$l,w$L){w$L.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:w$L.once("loaded",this,this._onMeshLoaed)},w$L._onMeshLoaed=function(w$v,w$l){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},w$L._calculateBoundingSphereByInitSphere=function(w$v){var w$l=NaN,w$L=this._owner.transform,w$A=w$L.scale.elements,w$x=Math.abs(w$A[0]),w$m=Math.abs(w$A[1]),w$Z=Math.abs(w$A[2]);w$l=w$m<=w$x&&w$Z<=w$x?w$x:w$Z<=w$m?w$m:w$Z,w$Zl.transformCoordinate(w$v.center,w$L.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=w$v.radius*w$l},w$L._calculateBoundBoxByInitCorners=function(w$v){for(var w$l=this._owner.transform.worldMatrix,w$L=0;w$L<8;w$L++)w$Zl.transformCoordinate(w$v[w$L],w$l,w$fl._tempBoundBoxCorners[w$L]);w$sv.createfromPoints(w$fl._tempBoundBoxCorners,this._boundingBox)},w$L._calculateBoundingSphere=function(){var w$v=this._owner.meshFilter.sharedMesh;null==w$v||null==w$v.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(w$v.boundingSphere)},w$L._calculateBoundingBox=function(){var w$v=this._owner.meshFilter.sharedMesh;null==w$v||null==w$v.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(w$v.boundingBoxCorners)},w$L._renderUpdate=function(w$v){var w$l=this._owner.transform;if(w$l){this._setShaderValueMatrix4x4(0,w$l.worldMatrix);var w$L=this._owner.getProjectionViewWorldMatrix(w$v);this._setShaderValueMatrix4x4(1,w$L)}else this._setShaderValueMatrix4x4(0,w$vl.DEFAULT),this._setShaderValueMatrix4x4(1,w$v);return w$Cl.debugMode&&this._renderRenderableBoundBox(),!0},w$l}(),w$tl=function(w$l){function w$A(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,w$A.__super.call(this),this._renderState=new w$E,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new w$Kl,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new w$lv,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new w$Zl(.7,.7,.7),this.ambientColor=new w$Zl(.212,.227,.259),w$Q.shaderHighPrecision&&this.addShaderDefine(w$gl.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}w$r(w$A,"laya.d3.core.scene.Scene",w$l);var w$v=w$A.prototype;return w$f.imps(w$v,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),w$v._setUrl=function(w$v){this._url=w$v},w$v._getGroup=function(){return this._group},w$v._setGroup=function(w$v){this._group=w$v},w$v._display=function(){w$f.stage._scenes.push(this),w$f.stage._scenes.sort(w$A._sortScenes);for(var w$v=0,w$l=this._childs.length;w$v<w$l;w$v++){var w$L=this._childs[w$v];w$L.active&&w$L._activeHierarchy()}},w$v._unDisplay=function(){var w$v=w$f.stage._scenes;w$v.splice(w$v.indexOf(this),1);for(var w$l=0,w$L=this._childs.length;w$l<w$L;w$l++){var w$A=this._childs[w$l];w$A.active&&w$A._inActiveHierarchy()}},w$v._addChild3D=function(w$v){w$v.transform._onWorldTransform(),w$v._setBelongScene(this),this.displayedInStage&&w$v.active&&w$v._activeHierarchy()},w$v._removeChild3D=function(w$v){w$v.transform.parent=null,this.displayedInStage&&w$v.active&&w$v._inActiveHierarchy(),w$v._setUnBelongScene()},w$v.initOctree=function(w$v,w$l,w$L,w$A,w$x){void 0===w$x&&(w$x=6),this.treeSize=new w$Zl(w$v,w$l,w$L),this.treeLevel=w$x,this.treeRoot=new w$s(this,0),this.treeRoot.init(w$A,this.treeSize)},w$v._prepareUpdateToRenderState=function(w$v,w$l){w$l.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,w$l.scene=this},w$v._prepareSceneToRender=function(w$v){var w$l=this._lights.length;if(0<w$l)for(var w$L=0,w$A=0;w$A<w$l&&!(this._lights[w$A]._prepareToScene(w$v)&&++w$L>=this._enableLightCount);w$A++);},w$v._updateChilds=function(w$v){for(var w$l=0,w$L=this._childs.length;w$l<w$L;++w$l)this._childs[w$l]._update(w$v)},w$v._preRenderScene=function(w$v,w$l,w$L){var w$A,w$x=w$l._viewMatrix,w$m=w$l._projectionMatrix,w$Z=w$l._projectionViewMatrix,w$O=0,w$e=w$l.camera;for(w$e.useOcclusionCulling?this.treeRoot?w$Lv.renderObjectCullingOctree(w$L,this,w$e,w$x,w$m,w$Z):w$Lv.renderObjectCulling(w$L,this,w$e,w$x,w$m,w$Z):w$Lv.renderObjectCullingNoBoundFrustum(this,w$e,w$x,w$m,w$Z),w$O=0,w$A=this._quenes.length;w$O<w$A;w$O++)this._quenes[w$O]&&this._quenes[w$O]._preRender(w$l)},w$v._clear=function(w$v,w$l){var w$L=w$l._viewport,w$A=w$l.camera,w$x=w$L.x,w$m=w$A.renderTargetSize.height-w$L.y-w$L.height,w$Z=w$L.width,w$O=w$L.height;w$v.viewport(w$x,w$m,w$Z,w$O);var w$e=256,w$$=w$A.renderTarget;switch(w$A.clearFlag){case 0:var w$_=w$A.clearColor;if(w$_){w$v.enable(3089),w$v.scissor(w$x,w$m,w$Z,w$O);var w$o=w$_.elements;w$v.clearColor(w$o[0],w$o[1],w$o[2],w$o[3]),w$e|=16384}if(w$$)switch(w$_||(w$e=16384),w$$.depthStencilFormat){case 33189:w$e|=256;break;case 36168:w$e|=1024;break;case 34041:w$e|=256,w$e|=1024}w$v.clear(w$e),w$_&&w$v.disable(3089);break;case 1:case 2:if(w$$)switch(w$e=16384,w$$.depthStencilFormat){case 33189:w$e|=256;break;case 36168:w$e|=1024;break;case 34041:w$e|=256,w$e|=1024}w$v.clear(w$e);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},w$v._renderScene=function(w$v,w$l){var w$L,w$A,w$x=w$l.camera,w$m=0;for(w$m=0;w$m<2;w$m++)(w$A=this._quenes[w$m])&&(w$x.renderTarget?w$A._render(w$l,!0):w$A._render(w$l,!1));if(1===w$x.clearFlag){var w$Z=w$x.sky;w$Z&&(w$M.setCullFace(w$v,!1),w$M.setDepthFunc(w$v,515),w$M.setDepthMask(w$v,!1),w$Z._render(w$l),w$M.setDepthFunc(w$v,513),w$M.setDepthMask(w$v,!0))}for(w$m=2,w$L=this._quenes.length;w$m<w$L;w$m++)(w$A=this._quenes[w$m])&&(w$A._sortAlpha(w$l.camera.transform.position),w$x.renderTarget?w$A._render(w$l,!0):w$A._render(w$l,!1))},w$v._set3DRenderConfig=function(w$v){w$v.disable(3042),w$M._blend=!1,w$v.blendFunc(770,771),w$M._sFactor=770,w$M._dFactor=771,w$v.disable(2929),w$M._depthTest=!1,w$v.enable(2884),w$M._cullFace=!0,w$v.depthMask(1),w$M._depthMask=!0,w$v.frontFace(2304),w$M._frontFace=2304},w$v._set2DRenderConfig=function(w$v){w$M.setBlend(w$v,!0),w$M.setBlendFunc(w$v,1,771),w$M.setDepthTest(w$v,!1),w$M.setCullFace(w$v,!1),w$M.setDepthMask(w$v,!0),w$M.setFrontFace(w$v,2305),w$v.viewport(0,0,w$_.width,w$_.height)},w$v._parseCustomProps=function(w$v,w$l,w$L,w$A){var w$x=w$A.customProps.lightmaps,w$m=w$x.length,w$Z=this._lightmaps;w$Z.length=w$m;for(var w$O=0;w$O<w$m;w$O++)w$Z[w$O]=w$C.getRes(w$l[w$x[w$O].replace(".exr",".png")]);this.setlightmaps(w$Z);var w$e=w$A.customProps.ambientColor;w$e&&(this.ambientColor=new w$Zl(w$e[0],w$e[1],w$e[2]));var w$$=w$A.customProps.fogColor;w$$&&(this.fogColor=new w$Zl(w$$[0],w$$[1],w$$[2]))},w$v._addLight=function(w$v){this._lights.indexOf(w$v)<0&&this._lights.push(w$v)},w$v._removeLight=function(w$v){var w$l=this._lights.indexOf(w$v);0<=w$l&&this._lights.splice(w$l,1)},w$v._updateScene=function(){var w$v=this._renderState;this._prepareUpdateToRenderState(w$Q.mainContext,w$v),this._updateComponents(w$v),this._updateChilds(w$v),this._lateUpdateComponents(w$v),this._time+=w$v.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},w$v._updateSceneConch=function(){var w$v=this._renderState;this._prepareUpdateToRenderState(w$Q.mainContext,w$v),this._updateComponents(w$v),this._lateUpdateComponents(w$v),this._prepareSceneToRender(w$v);for(var w$l=0,w$L=this._cameraPool.length;w$l<w$L;w$l++){var w$A=this._cameraPool[w$l];(w$v.camera=w$A)._prepareCameraToRender()}},w$v._preRenderShadow=function(w$v,w$l,w$L,w$A,w$x){this.treeRoot?w$Lv.renderShadowObjectCullingOctree(this,w$l,w$L,w$A,w$x):w$Lv.renderShadowObjectCulling(this,w$l,w$L,w$A,w$x);for(var w$m=0,w$Z=w$L.length;w$m<w$Z;w$m++)w$L[w$m]&&w$L[w$m]._preRender(w$v)},w$v._renderShadowMap=function(w$v,w$l,w$L){var w$A=this.parallelSplitShadowMaps[0];w$A._calcAllLightCameraInfo(w$L);var w$x,w$m,w$Z,w$O=w$A.PSSMNum;if(this._preRenderShadow(w$l,w$A._lightCulling,w$A._shadowQuenes,w$A._lightVPMatrix[0],w$O),this.addShaderDefine(w$rl.SHADERDEFINE_CAST_SHADOW),1<w$O)for(var w$e=0;w$e<w$O;w$e++)w$x=w$A.getRenderTarget(w$e+1),w$A.beginRenderTarget(w$e+1),w$v.clearColor(1,1,1,1),w$v.clear(16640),w$v.viewport(0,0,w$x.width,w$x.height),w$l.camera=w$Z=w$A.getLightCamera(w$e),w$Z._prepareCameraToRender(),w$Z._prepareCameraViewProject(w$Z.viewMatrix,w$Z.projectionMatrix),w$l._projectionViewMatrix=w$A._lightVPMatrix[w$e+1],(w$m=w$A._shadowQuenes[w$e])._preRender(w$l),w$m._renderShadow(w$l,!1),w$A.endRenderTarget(w$e+1);else w$x=w$A.getRenderTarget(1),w$A.beginRenderTarget(1),w$v.clearColor(1,1,1,1),w$v.clear(16640),w$v.viewport(0,0,w$x.width,w$x.height),w$l.camera=w$Z=w$A.getLightCamera(0),w$Z._prepareCameraToRender(),w$Z._prepareCameraViewProject(w$Z.viewMatrix,w$Z.projectionMatrix),w$l._projectionViewMatrix=w$A._lightVPMatrix[0],(w$m=w$A._shadowQuenes[0])._preRender(w$l),w$m._renderShadow(w$l,!0),w$A.endRenderTarget(1);this.removeShaderDefine(w$rl.SHADERDEFINE_CAST_SHADOW)},w$v.addTreeNode=function(w$v){this.treeRoot.addTreeNode(w$v)},w$v.removeTreeNode=function(w$v){this.treeSize&&w$v._treeNode&&w$v._treeNode.removeObject(w$v)},w$v.setlightmaps=function(w$v){this._lightmaps=w$v;for(var w$l=0,w$L=this._renderableSprite3Ds.length;w$l<w$L;w$l++)this._renderableSprite3Ds[w$l]._render._applyLightMapParams()},w$v.getlightmaps=function(){return this._lightmaps},w$v.addChildAt=function(w$v,w$l){if(!(w$v instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(w$v&&w$v.__className));if(!w$v||this.destroyed||w$v===this)return w$v;if(w$v.zOrder&&this._set$P("hasZorder",!0),0<=w$l&&w$l<=this._childs.length){if(w$v._parent===this){var w$L=this.getChildIndex(w$v);this._childs.splice(w$L,1),this._childs.splice(w$l,0,w$v),this.conchModel&&(this.conchModel.removeChild(w$v.conchModel),this.conchModel.addChildAt(w$v.conchModel,w$l)),this._childChanged()}else w$v.parent&&w$v.parent.removeChild(w$v),this._childs===w$$.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(w$l,0,w$v),this.conchModel&&this.conchModel.addChildAt(w$v.conchModel,w$l),(w$v.parent=this)._addChild3D(w$v);return w$v}throw new Error("appendChildAt:The index is out of bounds")},w$v.addChild=function(w$v){if(!(w$v instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!w$v||this.destroyed||w$v===this)return w$v;if(w$v.zOrder&&this._set$P("hasZorder",!0),w$v._parent===this){var w$l=this.getChildIndex(w$v);w$l!==this._childs.length-1&&(this._childs.splice(w$l,1),this._childs.push(w$v),this.conchModel&&(this.conchModel.removeChild(w$v.conchModel),this.conchModel.addChildAt(w$v.conchModel,this._childs.length-1)),this._childChanged())}else w$v.parent&&w$v.parent.removeChild(w$v),this._childs===w$$.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(w$v),this.conchModel&&this.conchModel.addChildAt(w$v.conchModel,this._childs.length-1),(w$v.parent=this)._childChanged(),this._addChild3D(w$v);return w$v},w$v.removeChildAt=function(w$v){var w$l=this.getChildAt(w$v);return w$l&&(this._removeChild3D(w$l),this._childs.splice(w$v,1),this.conchModel&&this.conchModel.removeChild(w$l.conchModel),w$l.parent=null),w$l},w$v.removeChildren=function(w$v,w$l){if(void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=2147483647),this._childs&&0<this._childs.length){var w$L=this._childs;if(0===w$v&&w$m<=w$l){var w$A=w$L;this._childs=w$$.ARRAY_EMPTY}else w$A=w$L.splice(w$v,w$l-w$v);for(var w$x=0,w$m=w$A.length;w$x<w$m;w$x++)this._removeChild3D(w$A[w$x]),w$A[w$x].parent=null,this.conchModel&&this.conchModel.removeChild(w$A[w$x].conchModel)}return this},w$v.addFrustumCullingObject=function(w$v){this.treeRoot?this.addTreeNode(w$v):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(w$v):this._cullingRenders[this._cullingRendersLength]=w$v,w$v._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},w$v.removeFrustumCullingObject=function(w$v){if(this.treeRoot)this.removeTreeNode(w$v);else{this._cullingRendersLength--;var w$l=w$v._indexInSceneFrustumCullingObjects;if(w$l!==this._cullingRendersLength){var w$L=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[w$l]=w$L)._indexInSceneFrustumCullingObjects=w$l,w$v._indexInSceneFrustumCullingObjects=-1}}},w$v.getRenderQueue=function(w$v){return w$v<3e3?this._quenes[1]||(this._quenes[1]=new w$W(this)):this._quenes[2]||(this._quenes[2]=new w$W(this))},w$v.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new w$W(this)},w$v.addShaderDefine=function(w$v){this._shaderDefineValue|=w$v},w$v.removeShaderDefine=function(w$v){this._shaderDefineValue&=~w$v},w$v.addScript=function(w$v){return this._addComponent(w$v)},w$v.getScriptByType=function(w$v,w$l){return void 0===w$l&&(w$l=0),this._getComponentByType(w$v,w$l)},w$v.getScriptsByType=function(w$v,w$l){this._getComponentsByType(w$v,w$l)},w$v.getScriptByIndex=function(w$v){return this._getComponentByIndex(w$v)},w$v.removeScriptByType=function(w$v,w$l){void 0===w$l&&(w$l=0),this._removeComponentByType(w$v,w$l)},w$v.removeScriptsByType=function(w$v){this._removeComponentByType(w$v)},w$v.removeAllScript=function(){this._removeAllComponent()},w$v.render=function(w$v,w$l,w$L){(w$c._context.ctx._renderKey=0)<this._childs.length&&w$v.addRenderObject(this)},w$v.renderSubmit=function(){var w$v=w$Q.mainContext,w$l=this._renderState;this._set3DRenderConfig(w$v),this._prepareSceneToRender(this._renderState);var w$L,w$A=0,w$x=0;if(w$Cl.debugMode||w$s.debugMode)for(w$A=0,w$x=this._cameraPool.length;w$A<w$x;w$A++)w$L=this._cameraPool[w$A],w$Cl._debugPhasorSprite.begin(1,w$L),w$L.activeInHierarchy&&w$L._renderCamera(w$v,w$l,this),w$Cl._debugPhasorSprite.end();else for(w$A=0,w$x=this._cameraPool.length;w$A<w$x;w$A++)(w$L=this._cameraPool[w$A]).activeInHierarchy&&w$L._renderCamera(w$v,w$l,this);return this._set2DRenderConfig(w$v),1},w$v.onAsynLoaded=function(w$v,w$l,w$L){var w$A=w$l[0];if("Scene"!==w$A.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var w$x=w$l[1];w$dl._createNodeByJson(this,w$A,this,w$x),this.event("hierarchyloaded",[this]),this.__loaded=!0},w$v.destroy=function(w$v){void 0===w$v&&(w$v=!0),this.destroyed||(w$l.prototype.destroy.call(this,w$v),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,w$C.clearRes(this.url),this.loaded||w$Cl._cancelLoadByUrl(this.url))},w$v.getRenderType=function(){return 0},w$v.releaseRender=function(){},w$v._addComponent=function(w$v){var w$l,w$L=this._componentsMap.indexOf(w$v);if(-1===w$L)w$l=[],this._componentsMap.push(w$v),this._typeComponentsIndices.push(w$l);else if(w$l=this._typeComponentsIndices[w$L],this._components[w$l[0]].isSingleton)throw new Error("无法单实例创建"+w$v+"组件，"+w$v+"组件已存在！");var w$A=w$x.getInstance(w$v);w$l.push(this._components.length),this._components.push(w$A);return w$A._initialize(this),w$A},w$v._removeComponent=function(w$v,w$l){var w$L=this._typeComponentsIndices[w$v],w$A=w$L[w$l],w$x=this._components[w$A];this._components.splice(w$A,1),w$L.splice(w$l,1),0===w$L.length&&(this._typeComponentsIndices.splice(w$v,1),this._componentsMap.splice(w$v,1));for(var w$m=0,w$Z=this._componentsMap.length;w$m<w$Z;w$m++)for(var w$O=(w$L=this._typeComponentsIndices[w$m]).length-1;0<=w$O;w$O--){var w$e=w$L[w$O];if(!(w$A<w$e))break;w$L[w$O]=--w$e}w$x._destroy()},w$v._getComponentByType=function(w$v,w$l){void 0===w$l&&(w$l=0);var w$L=this._componentsMap.indexOf(w$v);return-1===w$L?null:this._components[this._typeComponentsIndices[w$L][w$l]]},w$v._getComponentsByType=function(w$v,w$l){var w$L=this._componentsMap.indexOf(w$v);if(-1!==w$L){var w$A=this._typeComponentsIndices[w$L],w$x=w$A.length;w$l.length=w$x;for(var w$m=0;w$m<w$x;w$m++)w$l[w$m]=this._components[w$A[w$m]]}else w$l.length=0},w$v._getComponentByIndex=function(w$v){return this._components[w$v]},w$v._removeComponentByType=function(w$v,w$l){void 0===w$l&&(w$l=0);var w$L=this._componentsMap.indexOf(w$v);-1!==w$L&&this._removeComponent(w$L,w$l)},w$v._removeComponentsByType=function(w$v){var w$l=this._componentsMap.indexOf(w$v);if(-1!==w$l)for(var w$L=this._typeComponentsIndices[w$l],w$A=0,w$x=w$L.length;w$A<w$x;w$L.length<w$x?w$x--:w$A++)this._removeComponent(w$l,w$A)},w$v._removeAllComponent=function(){for(var w$v=0,w$l=this._componentsMap.length;w$v<w$l;this._componentsMap.length<w$l?w$l--:w$v++)this._removeComponentsByType(this._componentsMap[w$v])},w$v._updateComponents=function(w$v){for(var w$l=0,w$L=this._components.length;w$l<w$L;w$l++){var w$A=this._components[w$l];!w$A.started&&(w$A._start(w$v),w$A.started=!0),w$A.enable&&w$A._update(w$v)}},w$v._lateUpdateComponents=function(w$v){for(var w$l=0;w$l<this._components.length;w$l++){var w$L=this._components[w$l];!w$L.started&&(w$L._start(w$v),w$L.started=!0),w$L.enable&&w$L._lateUpdate(w$v)}},w$v._preRenderUpdateComponents=function(w$v){for(var w$l=0;w$l<this._components.length;w$l++){var w$L=this._components[w$l];!w$L.started&&(w$L._start(w$v),w$L.started=!0),w$L.enable&&w$L._preRenderUpdate(w$v)}},w$v._postRenderUpdateComponents=function(w$v){for(var w$l=0;w$l<this._components.length;w$l++){var w$L=this._components[w$l];!w$L.started&&(w$L._start(w$v),w$L.started=!0),w$L.enable&&w$L._postRenderUpdate(w$v)}},w$G(0,w$v,"_loaded",null,function(w$v){this.__loaded=w$v}),w$G(0,w$v,"fogColor",function(){return this._fogColor},function(w$v){this._fogColor=w$v,this._shaderValues.setValue(0,w$v.elements)}),w$G(0,w$v,"enableFog",function(){return this._enableFog},function(w$v){this._enableFog!==w$v&&((this._enableFog=w$v)?(this.addShaderDefine(w$gl.SHADERDEFINE_FOG),this.removeShaderDefine(w$gl.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(w$gl.SHADERDEFINE_FOG))}),w$G(0,w$v,"url",function(){return this._url}),w$G(0,w$v,"loaded",function(){return this.__loaded}),w$G(0,w$v,"enableDepthFog",function(){return this._enableDepthFog},function(w$v){this._enableDepthFog!=w$v&&((this._enableDepthFog=w$v)?(this.addShaderDefine(w$gl.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(w$gl.SHADERDEFINE_FOG)):this.removeShaderDefine(w$gl.SAHDERDEFINE_DEPTHFOG))}),w$G(0,w$v,"fogStart",function(){return this._fogStart},function(w$v){this._fogStart=w$v,this._shaderValues.setValue(1,w$v)}),w$G(0,w$v,"fogRange",function(){return this._fogRange},function(w$v){this._fogRange=w$v,this._shaderValues.setValue(2,w$v)}),w$G(0,w$v,"ambientColor",function(){return this._ambientColor},function(w$v){this._ambientColor=w$v,this._shaderValues.setValue(21,w$v.elements)}),w$G(0,w$v,"scene",function(){return this}),w$G(0,w$v,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),w$A._sortScenes=function(w$v,w$l){if(w$v.parent!==w$f.stage||w$l.parent!==w$f.stage)return w$v.parent!==w$f.stage&&w$l.parent!==w$f.stage?w$A._sortScenes(w$v.parent,w$l.parent):w$v.parent===w$f.stage?-1:1;var w$L=w$f.stage._childs;return w$L.indexOf(w$v)-w$L.indexOf(w$l)},w$A.load=function(w$v){return w$f.loader.create(w$v,null,null,w$A)},w$A.FOGCOLOR=0,w$A.FOGSTART=1,w$A.FOGRANGE=2,w$A.LIGHTDIRECTION=3,w$A.LIGHTDIRCOLOR=4,w$A.POINTLIGHTPOS=5,w$A.POINTLIGHTRANGE=6,w$A.POINTLIGHTATTENUATION=7,w$A.POINTLIGHTCOLOR=8,w$A.SPOTLIGHTPOS=9,w$A.SPOTLIGHTDIRECTION=10,w$A.SPOTLIGHTSPOT=11,w$A.SPOTLIGHTRANGE=12,w$A.SPOTLIGHTATTENUATION=13,w$A.SPOTLIGHTCOLOR=14,w$A.SHADOWDISTANCE=15,w$A.SHADOWLIGHTVIEWPROJECT=16,w$A.SHADOWMAPPCFOFFSET=17,w$A.SHADOWMAPTEXTURE1=18,w$A.SHADOWMAPTEXTURE2=19,w$A.SHADOWMAPTEXTURE3=20,w$A.AMBIENTCOLOR=21,w$A.TIME=22,w$A}(w$H),w$al=function(w$v){function w$l(w$v){w$l.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new w$vl,this._shaderValues=new w$Kl,this._colliders=[],this._id=++w$l._uniqueIDCounter,this._transform=new w$wl(this),this.name=w$v||"Sprite3D-"+w$l._nameNumberCounter++,this.layer=w$I.currentCreationLayer,this.active=!0}w$r(w$l,"laya.d3.core.Sprite3D",w$Vl);var w$L=w$l.prototype;return w$f.imps(w$L,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),w$L._setUrl=function(w$v){this._url=w$v},w$L._getGroup=function(){return this._group},w$L._setGroup=function(w$v){this._group=w$v},w$L._addChild3D=function(w$v){w$v.transform.parent=this.transform,this._hierarchyAnimator&&(!w$v._hierarchyAnimator&&w$v._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(w$v,!0,[w$v.name])),this._scene&&(w$v._setBelongScene(this._scene),this._activeInHierarchy&&w$v._active&&w$v._activeHierarchy())},w$L._removeChild3D=function(w$v){w$v.transform.parent=null,this._scene&&(this._activeInHierarchy&&w$v._active&&w$v._inActiveHierarchy(),w$v._setUnBelongScene()),this._hierarchyAnimator&&(w$v._hierarchyAnimator==this._hierarchyAnimator&&w$v._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(w$v,!1,[w$v.name]))},w$L._parseBaseCustomProps=function(w$v){var w$l=this.transform.localPosition;w$v.translate?(w$l.fromArray(w$v.translate),w$l.x*=100,w$l.y*=100,w$l.z*=100):w$l.elements.fill(0),this.transform.localPosition=w$l;var w$L=this.transform.localRotation;w$v.rotation?w$L.fromArray(w$v.rotation):w$L.fromArray([0,0,0,-1]),this.transform.localRotation=w$L;var w$A=this.transform.localScale;w$v.scale?w$A.fromArray(w$v.scale):w$A.elements.fill(1),this.transform.localScale=w$A;var w$x=w$v.layer;null!=w$x&&(this.layer=w$I.getLayerByNumber(w$x))},w$L._parseCustomComponent=function(w$v,w$l,w$L){for(var w$A in w$L){var w$x=w$L[w$A];switch(w$A){case"Animator":var w$m=this.addComponent(Animator);if(w$x.avatarPath)w$m.avatar=w$C.getRes(w$l[w$x.avatarPath]);else{var w$Z=w$x.avatar;if(w$Z){w$m.avatar=w$C.getRes(w$l[w$Z.path]);var w$O=w$Z.linkSprites;w$O&&w$v.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[w$m,w$O])}}for(var w$e=w$x.clipPaths,w$$=w$e.length,w$_=0;w$_<w$$;w$_++)w$m.addClip(w$C.getRes(w$l[w$e[w$_]]));w$m.clip=w$C.getRes(w$l[w$e[0]]);var w$o=w$x.playOnWake;void 0!==w$o&&(w$m.playOnWake=w$o);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var w$K=this.addComponent(SphereCollider);w$K.isTrigger=w$x.isTrigger;var w$r=w$K.center;w$r.fromArray(w$x.center),w$K.center=w$r,w$K.radius=w$x.radius;break;case"BoxCollider":var w$G=this.addComponent(BoxCollider);w$G.isTrigger=w$x.isTrigger,w$G.center.fromArray(w$x.center);var w$c=w$G.size;w$c.fromArray(w$x.size),w$G.size=w$c;break;case"MeshCollider":this.addComponent(MeshCollider)}}},w$L._onRootNodeHierarchyLoaded=function(w$v,w$l){for(var w$L in w$l){for(var w$A=this,w$x=w$l[w$L],w$m=0,w$Z=w$x.length;w$m<w$Z;w$m++){var w$O=w$x[w$m];if(""===w$O)break;if(!(w$A=w$A.getChildByName(w$O)))break}w$A&&w$v.linkSprite3DToAvatarNode(w$L,w$A)}},w$L._setHierarchyAnimator=function(w$v,w$l){this._changeHierarchyAnimator(w$v);for(var w$L=0,w$A=this._childs.length;w$L<w$A;w$L++){var w$x=this._childs[w$L];w$x._hierarchyAnimator==w$l&&w$x._setHierarchyAnimator(w$v,w$l)}},w$L._clearHierarchyAnimator=function(w$v,w$l){this._changeHierarchyAnimator(w$l);for(var w$L=0,w$A=this._childs.length;w$L<w$A;w$L++){var w$x=this._childs[w$L];w$x._hierarchyAnimator==w$v&&w$x._clearHierarchyAnimator(w$v,w$l)}},w$L._getAnimatorToLinkSprite3D=function(w$v,w$l,w$L){var w$A=this.getComponentByType(Animator);if(w$A&&(w$A.avatar?w$A.avatar._version||w$v._setAnimatorToLinkAvatar(w$A,w$l):w$v._setAnimatorToLinkSprite3DNoAvatar(w$A,w$l,w$L)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){w$L.unshift(this._parent.name);var w$x=this._parent;w$x._hierarchyAnimator&&w$x._getAnimatorToLinkSprite3D(w$v,w$l,w$L)}},w$L._setAnimatorToLinkSprite3DNoAvatar=function(w$v,w$l,w$L){var w$A=0,w$x=0;for(w$A=0,w$x=w$v.getClipCount();w$A<w$x;w$A++)w$v._handleSpriteOwnersBySprite(w$A,w$l,w$L,this);for(w$A=0,w$x=this._childs.length;w$A<w$x;w$A++){var w$m=this._childs[w$A],w$Z=w$L.length;w$L.push(w$m.name),w$m._setAnimatorToLinkSprite3DNoAvatar(w$v,w$l,w$L),w$L.splice(w$Z,1)}},w$L._changeHierarchyAnimator=function(w$v){this._hierarchyAnimator=w$v},w$L._isLinkSpriteToAnimationNode=function(w$v,w$l,w$L){var w$A=w$v._avatarNodes.indexOf(w$l),w$x=w$v._cacheSpriteToNodesMap;if(w$L)this._transform.dummy=w$l.transform,w$v._cacheNodesToSpriteMap[w$A]=w$x.length,w$x.push(w$A);else{this._transform.dummy=null;var w$m=w$v._cacheNodesToSpriteMap[w$A];w$v._cacheNodesToSpriteMap[w$A]=null,w$x.splice(w$m,1)}},w$L._setBelongScene=function(w$v){this._scene=w$v;for(var w$l=0,w$L=this._childs.length;w$l<w$L;w$l++)this._childs[w$l]._setBelongScene(w$v)},w$L._setUnBelongScene=function(){this._scene=null;for(var w$v=0,w$l=this._childs.length;w$v<w$l;w$v++)this._childs[w$v]._setUnBelongScene()},w$L._activeHierarchy=function(){var w$v=0,w$l=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),w$v=0,w$l=this._colliders.length;w$v<w$l;w$v++)this._layer._addCollider(this._colliders[w$v]);for(this.event("activeinhierarchychanged",!0),w$v=0,w$l=this._childs.length;w$v<w$l;w$v++){var w$L=this._childs[w$v];w$L._active&&w$L._activeHierarchy()}},w$L._inActiveHierarchy=function(){var w$v=0,w$l=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),w$v=0,w$l=this._colliders.length;w$v<w$l;w$v++){var w$L=this._colliders[w$v];w$L._clearCollsionMap(),this._layer._removeCollider(w$L)}for(this.event("activeinhierarchychanged",!1),w$v=0,w$l=this._childs.length;w$v<w$l;w$v++){var w$A=this._childs[w$v];w$A._active&&w$A._inActiveHierarchy()}},w$L.addComponent=function(w$v){var w$l,w$L=this._componentsMap.indexOf(w$v);if(-1===w$L)w$l=[],this._componentsMap.push(w$v),this._typeComponentsIndices.push(w$l);else if(w$l=this._typeComponentsIndices[w$L],this._components[w$l[0]].isSingleton)throw new Error("无法单实例创建"+w$v+"组件，"+w$v+"组件已存在！");var w$A=w$x.getInstance(w$v);return w$l.push(this._components.length),this._components.push(w$A),w$A instanceof laya.d3.component.Script&&this._scripts.push(w$A),w$A._initialize(this),w$A},w$L._removeComponent=function(w$v,w$l){var w$L,w$A=0,w$x=this._typeComponentsIndices[w$v],w$m=w$x[w$l],w$Z=this._components[w$m];for(w$Z instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(w$Z),1),w$x.splice(w$l,1),0===w$x.length&&(this._typeComponentsIndices.splice(w$v,1),this._componentsMap.splice(w$v,1)),w$A=0,w$L=this._componentsMap.length;w$A<w$L;w$A++)for(var w$O=(w$x=this._typeComponentsIndices[w$A]).length-1;0<=w$O;w$O--){var w$e=w$x[w$O];if(!(w$m<w$e))break;w$x[w$O]=--w$e}w$Z._destroy()},w$L._clearSelfRenderObjects=function(){},w$L._addSelfRenderObjects=function(){},w$L._parseCustomProps=function(w$v,w$l,w$L,w$A){},w$L._updateChilds=function(w$v){var w$l=this._childs.length;if(0!==w$l)for(var w$L=0;w$L<w$l;++w$L)this._childs[w$L]._update(w$v)},w$L._getSortID=function(w$v,w$l){return 1e3*w$l.id+w$v._getVertexBuffer().vertexDeclaration.id},w$L._update=function(w$v){(w$v.owner=this)._activeInHierarchy&&(this._updateComponents(w$v),this._lateUpdateComponents(w$v),w$g.spriteCount++,this._childs.length&&this._updateChilds(w$v))},w$L.getProjectionViewWorldMatrix=function(w$v){return w$vl.multiply(w$v,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},w$L.loadHierarchy=function(w$v){this.addChild(laya.d3.core.Sprite3D.load(w$v))},w$L.addChildAt=function(w$v,w$l){if(!(w$v instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!w$v||this.destroyed||w$v===this)return w$v;if(w$v.zOrder&&this._set$P("hasZorder",!0),0<=w$l&&w$l<=this._childs.length){if(w$v._parent===this){var w$L=this.getChildIndex(w$v);this._childs.splice(w$L,1),this._childs.splice(w$l,0,w$v),this.conchModel&&(this.conchModel.removeChild(w$v.conchModel),this.conchModel.addChildAt(w$v.conchModel,w$l)),this._childChanged()}else w$v.parent&&w$v.parent.removeChild(w$v),this._childs===w$$.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(w$l,0,w$v),this.conchModel&&this.conchModel.addChildAt(w$v.conchModel,w$l),(w$v.parent=this)._addChild3D(w$v);return w$v}throw new Error("appendChildAt:The index is out of bounds")},w$L.addChild=function(w$v){if(!(w$v instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!w$v||this.destroyed||w$v===this)return w$v;if(w$v.zOrder&&this._set$P("hasZorder",!0),w$v._parent===this){var w$l=this.getChildIndex(w$v);w$l!==this._childs.length-1&&(this._childs.splice(w$l,1),this._childs.push(w$v),this.conchModel&&(this.conchModel.removeChild(w$v.conchModel),this.conchModel.addChildAt(w$v.conchModel,this._childs.length-1)),this._childChanged())}else w$v.parent&&w$v.parent.removeChild(w$v),this._childs===w$$.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(w$v),this.conchModel&&this.conchModel.addChildAt(w$v.conchModel,this._childs.length-1),(w$v.parent=this)._childChanged(),this._addChild3D(w$v);return w$v},w$L.removeChildAt=function(w$v){var w$l=this.getChildAt(w$v);return w$l&&(this._removeChild3D(w$l),this._childs.splice(w$v,1),this.conchModel&&this.conchModel.removeChild(w$l.conchModel),w$l.parent=null),w$l},w$L.removeChildren=function(w$v,w$l){if(void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=2147483647),this._childs&&0<this._childs.length){var w$L=this._childs;if(0===w$v&&w$m<=w$l){var w$A=w$L;this._childs=w$$.ARRAY_EMPTY}else w$A=w$L.splice(w$v,w$l-w$v);for(var w$x=0,w$m=w$A.length;w$x<w$m;w$x++)this._removeChild3D(w$A[w$x]),w$A[w$x].parent=null,this.conchModel&&this.conchModel.removeChild(w$A[w$x].conchModel)}return this},w$L.onAsynLoaded=function(w$v,w$l,w$L){var w$A=w$l[0];if("Sprite3D"!==w$A.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var w$x=w$l[1];w$dl._createNodeByJson(this,w$A,this,w$x),this.event("hierarchyloaded",[this]),this.__loaded=!0},w$L.cloneTo=function(w$v){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var w$l=w$v;w$l.name=this.name,w$l._destroyed=this._destroyed,w$l.timer=this.timer,w$l._$P=this._$P,w$l.active=this._active;var w$L=w$l.transform.localPosition;this.transform.localPosition.cloneTo(w$L),w$l.transform.localPosition=w$L;var w$A=w$l.transform.localRotation;this.transform.localRotation.cloneTo(w$A),w$l.transform.localRotation=w$A;var w$x=w$l.transform.localScale;this.transform.localScale.cloneTo(w$x),w$l.transform.localScale=w$x,w$l.isStatic=this.isStatic;var w$m=0,w$Z=0;for(w$m=0,w$Z=this._componentsMap.length;w$m<w$Z;w$m++){var w$O=w$l.addComponent(this._componentsMap[w$m]);this._components[w$m]._cloneTo(w$O)}for(w$m=0,w$Z=this._childs.length;w$m<w$Z;w$m++)w$l.addChild(this._childs[w$m].clone());var w$e=w$l.getComponentByType(Animator);if(w$e){var w$$=w$e._linkSpritesData;if(w$$)for(var w$_ in w$$){for(var w$o=w$$[w$_],w$K=w$l,w$r=0,w$G=w$o.length;w$r<w$G&&(w$K=w$K.getChildByName(w$o[w$r]));w$r++);if(w$K){var w$c=w$e._avatarNodeMap[w$_];w$K._isLinkSpriteToAnimationNode(w$e,w$c,!0)}}}},w$L.clone=function(){var w$v=new this.constructor;return this.cloneTo(w$v),w$v},w$L.destroy=function(w$v){if(void 0===w$v&&(w$v=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,w$v);var w$l,w$L=0;for(w$L=0,w$l=this._components.length;w$L<w$l;w$L++)this._components[w$L]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,w$C.clearRes(this.url),this.loaded||w$Cl._cancelLoadByUrl(this.url)}},w$L._handleSpriteToAvatar=function(w$v,w$l){w$v._avatarNodes;var w$L=w$v._avatarNodeMap[this.name];w$L&&w$L.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(w$v,w$L,w$l)},w$L._setAnimatorToLinkAvatar=function(w$v,w$l){this._handleSpriteToAvatar(w$v,w$l);for(var w$L=0,w$A=this._childs.length;w$L<w$A;w$L++){this._childs[w$L]._setAnimatorToLinkAvatar(w$v,w$l)}},w$G(0,w$L,"activeInHierarchy",function(){return this._activeInHierarchy}),w$G(0,w$L,"_loaded",null,function(w$v){this.__loaded=w$v}),w$G(0,w$L,"active",function(){return this._active},function(w$v){this._active!==w$v&&(this._active=w$v,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(w$v?this._activeHierarchy():this._inActiveHierarchy()))}),w$G(0,w$L,"componentsCount",function(){return this._components.length}),w$G(0,w$L,"loaded",function(){return this.__loaded}),w$G(0,w$L,"id",function(){return this._id}),w$G(0,w$L,"url",function(){return this._url}),w$G(0,w$L,"layer",function(){return this._layer},function(w$v){if(this._layer!==w$v){if(!w$v)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var w$l=0,w$L=this._colliders.length;if(this._layer)for(w$l=0;w$l<w$L;w$l++)this._layer._removeCollider(this._colliders[w$l]);for(w$l=0;w$l<w$L;w$l++)w$v._addCollider(this._colliders[w$l])}this._layer=w$v,this.event("layerchanged",w$v)}}),w$G(0,w$L,"scene",function(){return this._scene}),w$G(0,w$L,"transform",function(){return this._transform}),w$l.instantiate=function(w$v,w$l,w$L,w$A,w$x){void 0===w$L&&(w$L=!0);var w$m=w$v.clone();w$l&&w$l.addChild(w$m);var w$Z=w$m.transform;if(w$L){var w$O=w$Z.worldMatrix;w$v.transform.worldMatrix.cloneTo(w$O),w$Z.worldMatrix=w$O}else w$A&&(w$Z.position=w$A),w$x&&(w$Z.rotation=w$x);return w$m},w$l.load=function(w$v){return w$f.loader.create(w$v,null,null,w$l)},w$l.WORLDMATRIX=0,w$l.MVPMATRIX=1,w$l._uniqueIDCounter=0,w$l._nameNumberCounter=0,w$l}(),w$ql=function(w$v){function w$_(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],w$_.__super.call(this),!w$v||!w$l)throw"Shader Error";this._id=++w$_._count,this._vs=w$v,this._ps=w$l,this._attributeMap=w$L,this._sceneUniformMap=w$A,this._cameraUniformMap=w$x,this._spriteUniformMap=w$m,this._materialUniformMap=w$Z,this._renderElementUniformMap=w$O,this._precompile=w$e,this._define=w$$,this._precompile&&w$_.extCompileObj&&w$_.extCompileFunc?w$_.extCompileFunc.call(w$_.extCompileObj,w$v,w$l,w$$):this.recreateResource()}w$r(w$_,"laya.d3.shader.Shader3D",w$L);var w$l=w$_.prototype;return w$l.recreateResource=function(){w$P.now();this._compile(),this.completeCreate(),this.memorySize=0},w$l.disposeResource=function(){w$Q.mainContext.deleteShader(this._vshader),w$Q.mainContext.deleteShader(this._pshader),w$Q.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},w$l._compile=function(){if(!w$Q.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var w$v=[this._vs,this._ps],w$l=w$Q.mainContext;if(this._program=w$l.createProgram(),this._vshader=w$_._createShader(w$l,w$v[0],35633),this._pshader=w$_._createShader(w$l,w$v[1],35632),w$l.attachShader(this._program,this._vshader),w$l.attachShader(this._program,this._pshader),w$l.linkProgram(this._program),!w$c.isConchApp&&w$gl.debugMode&&!w$l.getProgramParameter(this._program,35714))throw w$l.getProgramInfoLog(this._program);var w$L,w$A=0,w$x=0,w$m=0;for(w$m=w$c.isConchApp?w$l.getProgramParameterEx(this._vs,this._ps,"",35721):w$l.getProgramParameter(this._program,35721),w$A=0;w$A<w$m;w$A++){var w$Z=null;w$L={vartype:"attribute",ivartype:0,attrib:w$Z=w$c.isConchApp?w$l.getActiveAttribEx(this._vs,this._ps,"",w$A):w$l.getActiveAttrib(this._program,w$A),location:w$l.getAttribLocation(this._program,w$Z.name),name:w$Z.name,type:w$Z.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(w$L)}var w$O=0;for(w$O=w$c.isConchApp?w$l.getProgramParameterEx(this._vs,this._ps,"",35718):w$l.getProgramParameter(this._program,35718),w$A=0;w$A<w$O;w$A++){var w$e=null;w$e=w$c.isConchApp?w$l.getActiveUniformEx(this._vs,this._ps,"",w$A):w$l.getActiveUniform(this._program,w$A),0<(w$L={vartype:"uniform",ivartype:1,attrib:w$Z,location:w$l.getUniformLocation(this._program,w$e.name),name:w$e.name,type:w$e.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(w$L.name=w$L.name.substr(0,w$L.name.length-3),w$L.isArray=!0,w$L.location=w$l.getUniformLocation(this._program,w$L.name)),this._uniformParams.push(w$L)}for(w$A=0,w$x=this._attributeParams.length;w$A<w$x;w$A++)(w$L=this._attributeParams[w$A]).indexOfParams=w$A,w$L.index=1,w$L.value=[w$L.location,null],w$L.codename=w$L.name,w$L.name=null!=this._attributeMap[w$L.codename]?this._attributeMap[w$L.codename]:w$L.codename,this._attributeParamsMap.push(w$L.name),this._attributeParamsMap.push(w$L),w$L._this=this,w$L.uploadedValue=[],w$L.fun=this._attribute;for(w$A=0,w$x=this._uniformParams.length;w$A<w$x;w$A++)switch((w$L=this._uniformParams[w$A]).indexOfParams=w$A,w$L.index=1,w$L.value=[w$L.location,null],w$L.codename=w$L.name,null!=this._sceneUniformMap[w$L.codename]?(w$L.name=this._sceneUniformMap[w$L.codename],this._sceneUniformParamsMap.push(w$L.name),this._sceneUniformParamsMap.push(w$L)):null!=this._cameraUniformMap[w$L.codename]?(w$L.name=this._cameraUniformMap[w$L.codename],this._cameraUniformParamsMap.push(w$L.name),this._cameraUniformParamsMap.push(w$L)):null!=this._spriteUniformMap[w$L.codename]?(w$L.name=this._spriteUniformMap[w$L.codename],this._spriteUniformParamsMap.push(w$L.name),this._spriteUniformParamsMap.push(w$L)):null!=this._materialUniformMap[w$L.codename]?(w$L.name=this._materialUniformMap[w$L.codename],this._materialUniformParamsMap.push(w$L.name),this._materialUniformParamsMap.push(w$L)):null!=this._renderElementUniformMap[w$L.codename]?(w$L.name=this._renderElementUniformMap[w$L.codename],this._renderElementUniformParamsMap.push(w$L.name),this._renderElementUniformParamsMap.push(w$L)):console.log("Shader:can't find uinform name:"+w$L.codename+" in shader file."),w$L._this=this,w$L.uploadedValue=[],w$L.type){case 5124:w$L.fun=w$L.isArray?this._uniform1iv:this._uniform1i;break;case 5126:w$L.fun=w$L.isArray?this._uniform1fv:this._uniform1f;break;case 35664:w$L.fun=w$L.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:w$L.fun=w$L.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:w$L.fun=w$L.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:w$L.fun=this._uniform_sampler2D;break;case 35680:w$L.fun=this._uniform_samplerCube;break;case 35676:w$L.fun=this._uniformMatrix4fv;break;case 35670:w$L.fun=this._uniform1i;break;case 35674:w$L.fun=this._uinformMatrix2fv;break;case 35675:w$L.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},w$l._attribute=function(w$v,w$l){var w$L=w$Q.mainContext,w$A=w$O._enableAtributes,w$x=w$v.location;return w$A[w$x]||w$L.enableVertexAttribArray(w$x),w$L.vertexAttribPointer(w$x,w$l[0],w$l[1],w$l[2],w$l[3],w$l[4]),w$A[w$x]=w$O._bindVertexBuffer,1},w$l._uniform1f=function(w$v,w$l){var w$L=w$v.uploadedValue;return w$L[0]!==w$l?(w$Q.mainContext.uniform1f(w$v.location,w$L[0]=w$l),1):0},w$l._uniform1fv=function(w$v,w$l){if(w$l.length<4){var w$L=w$v.uploadedValue;return w$L[0]!==w$l[0]||w$L[1]!==w$l[1]||w$L[2]!==w$l[2]||w$L[3]!==w$l[3]?(w$Q.mainContext.uniform1fv(w$v.location,w$l),w$L[0]=w$l[0],w$L[1]=w$l[1],w$L[2]=w$l[2],w$L[3]=w$l[3],1):0}return w$Q.mainContext.uniform1fv(w$v.location,w$l),1},w$l._uniform_vec2=function(w$v,w$l){var w$L=w$v.uploadedValue;return w$L[0]!==w$l[0]||w$L[1]!==w$l[1]?(w$Q.mainContext.uniform2f(w$v.location,w$L[0]=w$l[0],w$L[1]=w$l[1]),1):0},w$l._uniform_vec2v=function(w$v,w$l){if(w$l.length<2){var w$L=w$v.uploadedValue;return w$L[0]!==w$l[0]||w$L[1]!==w$l[1]||w$L[2]!==w$l[2]||w$L[3]!==w$l[3]?(w$Q.mainContext.uniform2fv(w$v.location,w$l),w$L[0]=w$l[0],w$L[1]=w$l[1],w$L[2]=w$l[2],w$L[3]=w$l[3],1):0}return w$Q.mainContext.uniform2fv(w$v.location,w$l),1},w$l._uniform_vec3=function(w$v,w$l){var w$L=w$v.uploadedValue;return w$L[0]!==w$l[0]||w$L[1]!==w$l[1]||w$L[2]!==w$l[2]?(w$Q.mainContext.uniform3f(w$v.location,w$L[0]=w$l[0],w$L[1]=w$l[1],w$L[2]=w$l[2]),1):0},w$l._uniform_vec3v=function(w$v,w$l){return w$Q.mainContext.uniform3fv(w$v.location,w$l),1},w$l._uniform_vec4=function(w$v,w$l){var w$L=w$v.uploadedValue;return w$L[0]!==w$l[0]||w$L[1]!==w$l[1]||w$L[2]!==w$l[2]||w$L[3]!==w$l[3]?(w$Q.mainContext.uniform4f(w$v.location,w$L[0]=w$l[0],w$L[1]=w$l[1],w$L[2]=w$l[2],w$L[3]=w$l[3]),1):0},w$l._uniform_vec4v=function(w$v,w$l){return w$Q.mainContext.uniform4fv(w$v.location,w$l),1},w$l._uniformMatrix2fv=function(w$v,w$l){return w$Q.mainContext.uniformMatrix2fv(w$v.location,!1,w$l),1},w$l._uniformMatrix3fv=function(w$v,w$l){return w$Q.mainContext.uniformMatrix3fv(w$v.location,!1,w$l),1},w$l._uniformMatrix4fv=function(w$v,w$l){return w$Q.mainContext.uniformMatrix4fv(w$v.location,!1,w$l),1},w$l._uinformMatrix2fv=function(w$v,w$l){return w$Q.mainContext.uniformMatrix2fv(w$v.location,!1,w$l),1},w$l._uinformMatrix3fv=function(w$v,w$l){return w$Q.mainContext.uniformMatrix3fv(w$v.location,!1,w$l),1},w$l._uniform1i=function(w$v,w$l){var w$L=w$v.uploadedValue;return w$L[0]!==w$l?(w$Q.mainContext.uniform1i(w$v.location,w$L[0]=w$l),1):0},w$l._uniform1iv=function(w$v,w$l){return w$Q.mainContext.uniform1iv(w$v.location,w$l),1},w$l._uniform_ivec2=function(w$v,w$l){var w$L=w$v.uploadedValue;return w$L[0]!==w$l[0]||w$L[1]!==w$l[1]?(w$Q.mainContext.uniform2i(w$v.location,w$L[0]=w$l[0],w$L[1]=w$l[1]),1):0},w$l._uniform_ivec2v=function(w$v,w$l){return w$Q.mainContext.uniform2iv(w$v.location,w$l),1},w$l._uniform_vec3i=function(w$v,w$l){var w$L=w$v.uploadedValue;return w$L[0]!==w$l[0]||w$L[1]!==w$l[1]||w$L[2]!==w$l[2]?(w$Q.mainContext.uniform3i(w$v.location,w$L[0]=w$l[0],w$L[1]=w$l[1],w$L[2]=w$l[2]),1):0},w$l._uniform_vec3vi=function(w$v,w$l){return w$Q.mainContext.uniform3iv(w$v.location,w$l),1},w$l._uniform_vec4i=function(w$v,w$l){var w$L=w$v.uploadedValue;return w$L[0]!==w$l[0]||w$L[1]!==w$l[1]||w$L[2]!==w$l[2]||w$L[3]!==w$l[3]?(w$Q.mainContext.uniform4i(w$v.location,w$L[0]=w$l[0],w$L[1]=w$l[1],w$L[2]=w$l[2],w$L[3]=w$l[3]),1):0},w$l._uniform_vec4vi=function(w$v,w$l){return w$Q.mainContext.uniform4iv(w$v.location,w$l),1},w$l._uniform_sampler2D=function(w$v,w$l){var w$L=w$l.source||w$l.defaulteTexture.source,w$A=w$Q.mainContext,w$x=w$v.uploadedValue;if(null!=w$x[0])return w$A.activeTexture(w$_._TEXTURES[w$x[0]]),w$L&&w$M.bindTexture(w$A,3553,w$L),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return w$x[0]=this._curActTexIndex,w$A.uniform1i(w$v.location,this._curActTexIndex),w$A.activeTexture(w$_._TEXTURES[this._curActTexIndex]),w$L&&w$M.bindTexture(w$A,3553,w$L),this._curActTexIndex++,1},w$l._uniform_samplerCube=function(w$v,w$l){var w$L=w$l.source||w$l.defaulteTexture.source,w$A=w$Q.mainContext,w$x=w$v.uploadedValue;if(null!=w$x[0])return w$A.activeTexture(w$_._TEXTURES[w$x[0]]),w$L?w$M.bindTexture(w$A,34067,w$L):w$M.bindTexture(w$A,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return w$x[0]=this._curActTexIndex,w$A.uniform1i(w$v.location,this._curActTexIndex),w$A.activeTexture(w$_._TEXTURES[this._curActTexIndex]),w$L?w$M.bindTexture(w$A,34067,w$L):w$M.bindTexture(w$A,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},w$l._noSetValue=function(w$v){console.log("no....:"+w$v.name)},w$l.bind=function(){return w$L.activeShader=this,(w$L.bindShader=this).activeResource(),w$M.UseProgram(this._program)},w$l.uploadAttributes=function(w$v,w$l){for(var w$L,w$A,w$x=0,w$m=0,w$Z=this._attributeParamsMap.length;w$m<w$Z;w$m+=2)w$A=this._attributeParamsMap[w$m+1],null!=(w$L=w$v[this._attributeParamsMap[w$m]])&&(w$l&&w$l[w$A.name]&&w$l[w$A.name].bind(),w$x+=w$A.fun.call(this,w$A,w$L));w$g.shaderCall+=w$x},w$l.uploadAttributesX=function(w$v,w$l){for(var w$L,w$A,w$x=0,w$m=0,w$Z=this._attributeParamsMap.length;w$m<w$Z;w$m+=2)w$A=this._attributeParamsMap[w$m+1],null!=(w$L=w$v[this._attributeParamsMap[w$m]])&&(w$l._bind(),w$x+=w$A.fun.call(this,w$A,w$L));w$g.shaderCall+=w$x},w$l.uploadSceneUniforms=function(w$v){for(var w$l,w$L,w$A=0,w$x=0,w$m=this._sceneUniformParamsMap.length;w$x<w$m;w$x+=2)w$L=this._sceneUniformParamsMap[w$x+1],null!=(w$l=w$v[this._sceneUniformParamsMap[w$x]])&&(w$A+=w$L.fun.call(this,w$L,w$l));w$g.shaderCall+=w$A},w$l.uploadCameraUniforms=function(w$v){for(var w$l,w$L,w$A=0,w$x=0,w$m=this._cameraUniformParamsMap.length;w$x<w$m;w$x+=2)w$L=this._cameraUniformParamsMap[w$x+1],null!=(w$l=w$v[this._cameraUniformParamsMap[w$x]])&&(w$A+=w$L.fun.call(this,w$L,w$l));w$g.shaderCall+=w$A},w$l.uploadSpriteUniforms=function(w$v){for(var w$l,w$L,w$A=0,w$x=0,w$m=this._spriteUniformParamsMap.length;w$x<w$m;w$x+=2)w$L=this._spriteUniformParamsMap[w$x+1],null!=(w$l=w$v[this._spriteUniformParamsMap[w$x]])&&(w$A+=w$L.fun.call(this,w$L,w$l));w$g.shaderCall+=w$A},w$l.uploadMaterialUniforms=function(w$v){for(var w$l,w$L,w$A=0,w$x=0,w$m=this._materialUniformParamsMap.length;w$x<w$m;w$x+=2)w$L=this._materialUniformParamsMap[w$x+1],null!=(w$l=w$v[this._materialUniformParamsMap[w$x]])&&(w$A+=w$L.fun.call(this,w$L,w$l));w$g.shaderCall+=w$A},w$l.uploadRenderElementUniforms=function(w$v){for(var w$l,w$L,w$A=0,w$x=0,w$m=this._renderElementUniformParamsMap.length;w$x<w$m;w$x+=2)w$L=this._renderElementUniformParamsMap[w$x+1],null!=(w$l=w$v[this._renderElementUniformParamsMap[w$x]])&&(w$A+=w$L.fun.call(this,w$L,w$l));w$g.shaderCall+=w$A},w$_.create=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$){return new w$_(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$)},w$_.addInclude=function(w$v,w$l){w$B.addInclude(w$v,w$l)},w$_._createShader=function(w$v,w$l,w$L){var w$A=w$v.createShader(w$L);if(w$v.shaderSource(w$A,w$l),w$v.compileShader(w$A),w$gl.debugMode&&!w$v.getShaderParameter(w$A,35713))throw w$v.getShaderInfoLog(w$A);return w$A},w$_.PERIOD_RENDERELEMENT=0,w$_.PERIOD_MATERIAL=1,w$_.PERIOD_SPRITE=2,w$_.PERIOD_CAMERA=3,w$_.PERIOD_SCENE=4,w$_._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],w$_._count=0,w$_._preCompile=!1,w$_.extCompileFunc=null,w$_.extCompileObj=null,w$o(w$_,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new w$T}]),w$_}(),w$ul=function(w$O){function w$e(){this._transformUV=null,w$e.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new w$Zl(.6,.6,.6)),this._setColor(10,new w$Zl(1,1,1)),this._setColor(11,new w$Ol(1,1,1,8)),this._setColor(12,new w$Zl(1,1,1)),this._setColor(7,new w$Ol(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new w$Ol(1,1,0,0)),this.renderMode=1}w$r(w$e,"laya.d3.core.material.StandardMaterial",w$O);var w$v=w$e.prototype;return w$v.disableLight=function(){this._addDisablePublicShaderDefine(w$gl.SHADERDEFINE_POINTLIGHT|w$gl.SHADERDEFINE_SPOTLIGHT|w$gl.SHADERDEFINE_DIRECTIONLIGHT)},w$v.disableFog=function(){this._addDisablePublicShaderDefine(w$gl.SHADERDEFINE_FOG)},w$v.onAsynLoaded=function(w$v,w$l,w$L){var w$A=w$l[0];if(w$A.version)w$O.prototype.onAsynLoaded.call(this,w$v,w$l,w$L);else{var w$x=w$l[1],w$m=w$A.props;for(var w$Z in w$m)this[w$Z]=w$m[w$Z];w$e._parseStandardMaterial(w$x,this,w$A),this._endLoaded()}},w$v.cloneTo=function(w$v){w$O.prototype.cloneTo.call(this,w$v);var w$l=w$v;this._transformUV&&(w$l._transformUV=this._transformUV.clone())},w$G(0,w$v,"ambientColor",function(){return this._getColor(9)},function(w$v){this._setColor(9,w$v)}),w$G(0,w$v,"ambientTexture",function(){return this._getTexture(5)},function(w$v){w$v?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,w$v)}),w$G(0,w$v,"renderMode",null,function(w$v){switch(w$v){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(w$e.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(w$e.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(w$e.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(w$e.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(w$e.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(w$e.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(w$e.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(w$e.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(w$e.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(w$e.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(w$e.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(w$e.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(w$e.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(w$e.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(w$e.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(w$e.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(w$v)}),w$G(0,w$v,"reflectColor",function(){return this._getColor(12)},function(w$v){this._setColor(12,w$v)}),w$G(0,w$v,"tilingOffset",function(){return this._getColor(15)},function(w$v){if(w$v){var w$l=w$v.elements;1!=w$l[0]||1!=w$l[1]||0!=w$l[2]||0!=w$l[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,w$v)}),w$G(0,w$v,"albedo",function(){return this._getColor(7)},function(w$v){this._setColor(7,w$v)}),w$G(0,w$v,"diffuseColor",function(){return this._getColor(10)},function(w$v){this._setColor(10,w$v)}),w$G(0,w$v,"albedoColor",function(){return this._getColor(7)},function(w$v){this._setColor(7,w$v)}),w$G(0,w$v,"specularColor",function(){return this._getColor(11)},function(w$v){this._setColor(11,w$v)}),w$G(0,w$v,"diffuseTexture",function(){return this._getTexture(1)},function(w$v){w$v?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,w$v)}),w$G(0,w$v,"normalTexture",function(){return this._getTexture(2)},function(w$v){w$v?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,w$v)}),w$G(0,w$v,"specularTexture",function(){return this._getTexture(3)},function(w$v){w$v?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,w$v)}),w$G(0,w$v,"emissiveTexture",function(){return this._getTexture(4)},function(w$v){w$v?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,w$v)}),w$G(0,w$v,"reflectTexture",function(){return this._getTexture(6)},function(w$v){w$v?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,w$v)}),w$G(0,w$v,"transformUV",function(){return this._transformUV},function(w$v){this._transformUV=w$v,this._setMatrix4x4(13,w$v.matrix),w$v?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,w$v.matrix.elements,0)}),w$e.__init__=function(){w$e.SHADERDEFINE_DIFFUSEMAP=w$e.shaderDefines.registerDefine("DIFFUSEMAP"),w$e.SHADERDEFINE_NORMALMAP=w$e.shaderDefines.registerDefine("NORMALMAP"),w$e.SHADERDEFINE_SPECULARMAP=w$e.shaderDefines.registerDefine("SPECULARMAP"),w$e.SHADERDEFINE_EMISSIVEMAP=w$e.shaderDefines.registerDefine("EMISSIVEMAP"),w$e.SHADERDEFINE_AMBIENTMAP=w$e.shaderDefines.registerDefine("AMBIENTMAP"),w$e.SHADERDEFINE_REFLECTMAP=w$e.shaderDefines.registerDefine("REFLECTMAP"),w$e.SHADERDEFINE_UVTRANSFORM=w$e.shaderDefines.registerDefine("UVTRANSFORM"),w$e.SHADERDEFINE_TILINGOFFSET=w$e.shaderDefines.registerDefine("TILINGOFFSET"),w$e.SHADERDEFINE_ADDTIVEFOG=w$e.shaderDefines.registerDefine("ADDTIVEFOG")},w$e.load=function(w$v){return w$f.loader.create(w$v,null,null,w$e)},w$e._parseStandardMaterial=function(w$v,w$l,w$L){var w$A=w$L.customProps,w$x=w$A.ambientColor;w$l.ambientColor=new w$Zl(w$x[0],w$x[1],w$x[2]);var w$m=w$A.diffuseColor;w$l.diffuseColor=new w$Zl(w$m[0],w$m[1],w$m[2]);var w$Z=w$A.specularColor;w$l.specularColor=new w$Ol(w$Z[0],w$Z[1],w$Z[2],w$Z[3]);var w$O=w$A.reflectColor;w$l.reflectColor=new w$Zl(w$O[0],w$O[1],w$O[2]);var w$e=w$A.albedoColor;w$e&&(w$l.albedo=new w$Ol(w$e[0],w$e[1],w$e[2],w$e[3]));var w$$=w$A.diffuseTexture.texture2D;w$$&&(w$l.diffuseTexture=w$C.getRes(w$v[w$$]));var w$_=w$A.normalTexture.texture2D;w$_&&(w$l.normalTexture=w$C.getRes(w$v[w$_]));var w$o=w$A.specularTexture.texture2D;w$o&&(w$l.specularTexture=w$C.getRes(w$v[w$o]));var w$K=w$A.emissiveTexture.texture2D;w$K&&(w$l.emissiveTexture=w$C.getRes(w$v[w$K]));var w$r=w$A.ambientTexture.texture2D;w$r&&(w$l.ambientTexture=w$C.getRes(w$v[w$r]));var w$G=w$A.reflectTexture.texture2D;w$G&&(w$l.reflectTexture=w$C.getRes(w$v[w$G]))},w$e.RENDERMODE_OPAQUE=1,w$e.RENDERMODE_OPAQUEDOUBLEFACE=2,w$e.RENDERMODE_CUTOUT=3,w$e.RENDERMODE_CUTOUTDOUBLEFACE=4,w$e.RENDERMODE_TRANSPARENT=13,w$e.RENDERMODE_TRANSPARENTDOUBLEFACE=14,w$e.RENDERMODE_ADDTIVE=15,w$e.RENDERMODE_ADDTIVEDOUBLEFACE=16,w$e.RENDERMODE_DEPTHREAD_TRANSPARENT=5,w$e.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,w$e.RENDERMODE_DEPTHREAD_ADDTIVE=7,w$e.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,w$e.RENDERMODE_NONDEPTH_TRANSPARENT=9,w$e.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,w$e.RENDERMODE_NONDEPTH_ADDTIVE=11,w$e.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,w$e.SHADERDEFINE_DIFFUSEMAP=0,w$e.SHADERDEFINE_NORMALMAP=0,w$e.SHADERDEFINE_SPECULARMAP=0,w$e.SHADERDEFINE_EMISSIVEMAP=0,w$e.SHADERDEFINE_AMBIENTMAP=0,w$e.SHADERDEFINE_REFLECTMAP=0,w$e.SHADERDEFINE_UVTRANSFORM=0,w$e.SHADERDEFINE_TILINGOFFSET=0,w$e.SHADERDEFINE_ADDTIVEFOG=0,w$e.DIFFUSETEXTURE=1,w$e.NORMALTEXTURE=2,w$e.SPECULARTEXTURE=3,w$e.EMISSIVETEXTURE=4,w$e.AMBIENTTEXTURE=5,w$e.REFLECTTEXTURE=6,w$e.ALBEDO=7,w$e.UVANIAGE=8,w$e.MATERIALAMBIENT=9,w$e.MATERIALDIFFUSE=10,w$e.MATERIALSPECULAR=11,w$e.MATERIALREFLECT=12,w$e.UVMATRIX=13,w$e.UVAGE=14,w$e.TILINGOFFSET=15,w$o(w$e,["defaultMaterial",function(){var w$v=new w$e;return w$v.lock=!0,this.defaultMaterial=w$v},"shaderDefines",function(){return this.shaderDefines=new w$_l(w$kl.shaderDefines)}]),w$e}(w$kl),w$Rl=function(w$v){function w$Z(w$v,w$l,w$L,w$A,w$x){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===w$L&&(w$L=35044),void 0===w$A&&(w$A=!1),w$Z.__super.call(this),this._indexType=w$v,this._indexCount=w$l,this._bufferUsage=w$L,this._bufferType=34963,this._canRead=w$A;var w$m;if("ushort"==w$v)this._indexTypeByteCount=2;else{if("ubyte"!=w$v)throw new Error("unidentification index type.");this._indexTypeByteCount=1}w$m=this._indexTypeByteCount*w$l,this._byteLength=w$m,this._bind(),w$O._gl.bufferData(this._bufferType,w$m,this._bufferUsage),this.uri=w$x,w$A?("ushort"==w$v?this._buffer=new Uint16Array(w$l):"ubyte"==w$v&&(this._buffer=new Uint8Array(w$l)),this.memorySize=2*w$m):this.memorySize=w$m}w$r(w$Z,"laya.d3.graphics.IndexBuffer3D",w$v);var w$l=w$Z.prototype;return w$l.setData=function(w$v,w$l,w$L,w$A){void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0),void 0===w$A&&(w$A=4294967295);var w$x=0;if("ushort"==this._indexType?(w$x=2,0===w$L&&4294967295===w$A||(w$v=new Uint16Array(w$v.buffer,w$L*w$x,w$A))):"ubyte"==this._indexType&&(w$x=1,0===w$L&&4294967295===w$A||(w$v=new Uint8Array(w$v.buffer,w$L*w$x,w$A))),this._bind(),w$O._gl.bufferSubData(this._bufferType,w$l*w$x,w$v),this._canRead)if(0!==w$l||0!==w$L||4294967295!==w$A){var w$m=this._buffer.length-w$l;w$m<w$A&&(w$A=w$m);for(var w$Z=0;w$Z<w$A;w$Z++)this._buffer[w$l+w$Z]=w$v[w$Z]}else this._buffer=w$v},w$l.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},w$l.disposeResource=function(){w$v.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},w$G(0,w$l,"indexType",function(){return this._indexType}),w$G(0,w$l,"indexTypeByteCount",function(){return this._indexTypeByteCount}),w$G(0,w$l,"indexCount",function(){return this._indexCount}),w$G(0,w$l,"canRead",function(){return this._canRead}),w$Z.INDEXTYPE_UBYTE="ubyte",w$Z.INDEXTYPE_USHORT="ushort",w$Z.create=function(w$v,w$l,w$L,w$A,w$x){return void 0===w$L&&(w$L=35044),void 0===w$A&&(w$A=!1),new w$Z(w$v,w$l,w$L,w$A,w$x)},w$Z}(w$O),w$Nl=function(w$m){function w$Z(w$v,w$l,w$L,w$A,w$x){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===w$A&&(w$A=!1),w$Z.__super.call(this),this._vertexDeclaration=w$v,this._vertexCount=w$l,this._bufferUsage=w$L,this._bufferType=34962,this._canRead=w$A,this.uri=w$x,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*w$l,this._bind(),w$O._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),w$A&&(this._buffer=new Float32Array(this._byteLength/4))}w$r(w$Z,"laya.d3.graphics.VertexBuffer3D",w$m);var w$v=w$Z.prototype;return w$v.bindWithIndexBuffer=function(w$v){w$v&&w$v._bind(),this._bind()},w$v.setData=function(w$v,w$l,w$L,w$A){if(void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0),void 0===w$A&&(w$A=4294967295),0===w$L&&4294967295===w$A||(w$v=new Float32Array(w$v.buffer,4*w$L,w$A)),this._bind(),w$O._gl.bufferSubData(this._bufferType,4*w$l,w$v),this._canRead)if(0!==w$l||0!==w$L||4294967295!==w$A){var w$x=this._buffer.length-w$l;w$x<w$A&&(w$A=w$x);for(var w$m=0;w$m<w$A;w$m++)this._buffer[w$l+w$m]=w$v[w$m]}else this._buffer=w$v},w$v.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},w$v.disposeResource=function(){for(var w$v=w$Q.mainContext,w$l=this._vertexDeclaration.getVertexElements(),w$L=w$O._enableAtributes,w$A=0,w$x=w$l.length;w$A<w$x;w$A++)w$L[w$A]===this._glBuffer&&(w$v.disableVertexAttribArray(w$A),w$L[w$A]=null);w$m.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},w$G(0,w$v,"vertexDeclaration",function(){return this._vertexDeclaration}),w$G(0,w$v,"vertexCount",function(){return this._vertexCount}),w$G(0,w$v,"canRead",function(){return this._canRead}),w$Z.create=function(w$v,w$l,w$L,w$A,w$x){return void 0===w$L&&(w$L=35044),void 0===w$A&&(w$A=!1),new w$Z(w$v,w$l,w$L,w$A,w$x)},w$Z}(w$O),w$bl=function(w$v){function w$B(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,w$B.__super.call(this),this._type=3553}w$r(w$B,"laya.d3.resource.DataTexture2D",w$Ql);var w$l=w$B.prototype;return w$l.genDebugMipmaps=function(){var w$v=[];return w$v.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),w$v.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),w$v.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),w$v.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),w$v.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),w$v.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),w$v.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),w$v.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),w$v.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),w$v.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),w$v},w$l._onTextureLoaded=function(w$v){},w$l._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var w$v=w$Q.mainContext,w$l=this._source=w$v.createTexture(),w$L=this._width,w$A=this._height,w$x=w$M.curBindTexTarget,w$m=w$M.curBindTexValue,w$Z=!1;if(w$M.bindTexture(w$v,this._type,w$l),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var w$O=0;w$v.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var w$e=0;w$e<this._mipmaps.length;w$e++){if(this._mipmaps[w$e].byteLength!=w$$*w$_*4)throw"mipmap size error  level:"+w$e;w$v.texSubImage2D(this._type,0,w$B.simLodRect[w$O++],w$B.simLodRect[w$O++],w$B.simLodRect[w$O++],w$B.simLodRect[w$O++],6408,5121,new Uint8Array(this._mipmaps[w$e]))}this.minFifter=9729,this.magFifter=9729}else{var w$$=this._width,w$_=this._height;for(w$O=0,w$v.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),w$e=0;w$e<this._mipmaps.length;w$e++){if(this._mipmaps[w$e].byteLength!=w$$*w$_*4)throw"mipmap size error  level:"+w$e;w$v.texImage2D(this._type,w$e,6408,w$$,w$_,0,6408,5121,new Uint8Array(this._mipmaps[w$e])),(w$$/=2)<1&&(w$$=1),(w$_/=2)<1&&(w$_=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&w$v.pixelStorei(w$v.UNPACK_ALIGNMENT,1),w$v.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var w$o=0,w$K=!1,w$r=!1;this._buffer.byteLength==4*w$L*w$A?(w$o=6408,w$K=!0):this._buffer.byteLength==3*w$L*w$A?(w$o=6407,w$r=!0):w$o=this._format,w$K||w$r?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),w$r&&w$v.pixelStorei(w$v.UNPACK_ALIGNMENT,1),w$v.texImage2D(this._type,0,w$o,w$L,w$A,0,w$o,5121,this._buffer)):w$v&&w$o==w$v.ALPHA?(w$v.texImage2D(3553,0,w$o,w$L,w$A,0,w$o,w$v.UNSIGNED_BYTE,this._buffer),w$Z=!0):0!=w$o&&(w$v.compressedTexImage2D(3553,0,w$o,w$L,w$A,0,this._buffer),w$Z=!0)}var w$G=this._minFifter,w$c=this._magFifter,w$d=0==this._wrapModeU?10497:33071,w$C=0==this._wrapModeV?10497:33071,w$J=w$X.isPOT(w$L,w$A);w$J?(this._mipmap||this._mipmaps?-1!==w$G||(w$G=9987):-1!==w$G||(w$G=9729),-1!==w$c||(w$c=9729),w$v.texParameteri(this._type,10241,w$G),w$v.texParameteri(this._type,10240,w$c),w$v.texParameteri(this._type,10242,w$d),w$v.texParameteri(this._type,10243,w$C),this._mipmap&&w$v.generateMipmap(this._type)):(-1!==w$G||(w$G=9729),-1!==w$c||(w$c=9729),w$v.texParameteri(this._type,10241,w$G),w$v.texParameteri(this._type,10240,w$c),w$v.texParameteri(this._type,10242,33071),w$v.texParameteri(this._type,10243,33071)),w$x&&w$m&&w$M.bindTexture(w$v,w$x,w$m),this.memorySize=w$Z?this._buffer.length:w$J?w$L*w$A*4*(1+1/3):w$L*w$A*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},w$l.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},w$l.onAsynLoaded=function(w$v,w$l,w$L){var w$A;w$L&&(w$A=w$L[0].call(this,w$l)),w$A&&(this._width=w$A.width,this._height=w$A.height,this._buffer=w$A.data),this._src=w$v,this._size=new w$cl(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},w$l.getPixels=function(){return new Uint8Array(this._buffer)},w$l.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(w$Q.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},w$G(0,w$l,"src",function(){return this._src}),w$B.create=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){if(void 0===w$A&&(w$A=9729),void 0===w$x&&(w$x=9729),void 0===w$m&&(w$m=!0),!w$v||w$v.byteLength<w$l*w$L*4)throw"DataTexture2D create error";var w$O=new w$B;return w$O.uri=w$Z,w$O._buffer=w$v,w$O._width=w$l,w$O._height=w$L,w$O._mipmap=w$m,w$O._magFifter=w$A,w$O._minFifter=w$x,w$O._size=new w$cl(w$O._width,w$O._height),w$O._conchTexture?alert("怎么给runtime传递datatexture数据"):w$O.activeResource(),w$O},w$B.load=function(w$v,w$l,w$L,w$A,w$x){if(void 0===w$l&&(w$l=0),void 0===w$L&&(w$L=0),void 0===w$A&&(w$A=9729),void 0===w$x&&(w$x=9729),"mipmaps"===w$h.getFileExtension(w$v)){var w$m=w$f.loader.create(w$v,null,null,w$B,[function(w$v){this._mipmaps=[];var w$l=new Uint32Array(w$v);this._width=w$l[0];var w$L=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,w$L=1024),this._width!=w$L)throw"现在只支持512x256的环境贴图。当前的是"+w$l[0];this._height=w$l[1];for(var w$A=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,w$x=this._height,w$m=8;;){var w$Z=w$A*w$x*4;if(w$m+w$Z>w$v.byteLength)throw"load mipmaps data size error ";var w$O=new Uint8Array(w$v,w$m,w$Z);if(this._mipmaps.push(w$O),w$m+=w$Z,1==w$A&&1==w$x)break;(w$A/=2)<1&&(w$A=1),(w$x/=2)<1&&(w$x=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){w$m.simLodInfo=new Float32Array(40);for(var w$Z=0;w$Z<w$m.simLodInfo.length;)w$m.simLodInfo[w$Z]=(w$B.simLodRect[w$Z]+.5)/1024,w$Z++,w$m.simLodInfo[w$Z]=(w$B.simLodRect[w$Z]+.5)/256,w$Z++,w$m.simLodInfo[w$Z]=Math.max(w$B.simLodRect[w$Z]-1,.1)/1024,w$Z++,w$m.simLodInfo[w$Z]=Math.max(w$B.simLodRect[w$Z]-1.5,.1)/256,w$Z++}return w$m}if("number"==typeof w$l)return w$f.loader.create(w$v,null,null,w$B,[function(w$v){return this._width=w$l,this._height=w$L,this._buffer=w$v,null}]);if("function"==typeof w$l)return w$f.loader.create(w$v,null,null,w$B,[w$l]);throw new Error("unknown params.")},w$B.lodasatlas=!1,w$o(w$B,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),w$B}(),w$jl=function(w$v){function w$l(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,w$l.__super.call(this)}w$r(w$l,"laya.d3.resource.models.PrimitiveMesh",w$Ml);var w$L=w$l.prototype;return w$f.imps(w$L,{"laya.d3.core.render.IRenderable":!0}),w$L._getVertexBuffer=function(w$v){return void 0===w$v&&(w$v=0),0===w$v?this._vertexBuffer:null},w$L._getVertexBuffers=function(){return null},w$L._getIndexBuffer=function(){return this._indexBuffer},w$L._getPositions=function(){var w$v,w$l=[],w$L=this._vertexBuffer.vertexDeclaration.getVertexElements(),w$A=0;for(w$A=0;w$A<w$L.length;w$A++){var w$x=w$L[w$A];if("vector3"===w$x.elementFormat&&0===w$x.elementUsage){w$v=w$x;break}}var w$m=this._vertexBuffer.getData();for(w$A=0;w$A<w$m.length;w$A+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var w$Z=w$A+w$v.offset/4,w$O=new w$Zl(w$m[w$Z+0],w$m[w$Z+1],w$m[w$Z+2]);w$l.push(w$O)}return w$l},w$L.getRenderElement=function(w$v){return this},w$L.getRenderElementsCount=function(){return 1},w$L.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},w$L._beforeRender=function(w$v){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},w$L._render=function(w$v){w$Q.mainContext.drawElements(4,this._numberIndices,5123,0),w$g.drawCall++,w$g.trianglesFaces+=this._numberIndices/3},w$G(0,w$L,"_vertexBufferCount",function(){return 1}),w$G(0,w$L,"triangleCount",function(){return this._indexBuffer.indexCount/3}),w$l}(),w$Fl=function(w$v){function w$l(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,w$l.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}w$r(w$l,"laya.d3.resource.models.Mesh",w$Ml);var w$L=w$l.prototype;return w$L._getPositions=function(){var w$v,w$l,w$L,w$A,w$x,w$m=[],w$Z=0,w$O=0,w$e=0;if(0!==this._vertexBuffers.length){var w$$=this._vertexBuffers.length;for(w$Z=0;w$Z<w$$;w$Z++){for(w$L=(w$v=this._vertexBuffers[w$Z]).vertexDeclaration.getVertexElements(),w$O=0;w$O<w$L.length;w$O++)if("vector3"===(w$A=w$L[w$O]).elementFormat&&0===w$A.elementUsage){w$l=w$A;break}for(w$x=w$v.getData(),w$O=0;w$O<w$x.length;w$O+=w$v.vertexDeclaration.vertexStride/4)w$e=w$O+w$l.offset/4,w$m.push(new w$Zl(w$x[w$e+0],w$x[w$e+1],w$x[w$e+2]))}}else{var w$_=this._subMeshes.length;for(w$Z=0;w$Z<w$_;w$Z++){for(w$L=(w$v=this._subMeshes[w$Z]._getVertexBuffer()).vertexDeclaration.getVertexElements(),w$O=0;w$O<w$L.length;w$O++)if("vector3"===(w$A=w$L[w$O]).elementFormat&&0===w$A.elementUsage){w$l=w$A;break}for(w$x=w$v.getData(),w$O=0;w$O<w$x.length;w$O+=w$v.vertexDeclaration.vertexStride/4)w$e=w$O+w$l.offset/4,w$m.push(new w$Zl(w$x[w$e+0],w$x[w$e+1],w$x[w$e+2]))}}return w$m},w$L._setSubMeshes=function(w$v){this._subMeshes=w$v,this._subMeshCount=w$v.length;for(var w$l=0;w$l<this._subMeshCount;w$l++)w$v[w$l]._indexInMesh=w$l;this._positions=this._getPositions(),this._generateBoundingObject()},w$L.onAsynLoaded=function(w$v,w$l,w$L){var w$A=w$l[0],w$x=w$l[1];w$Ev.read(w$A,this,this._materials,this._subMeshes,w$x),this.completeCreate(),this._endLoaded()},w$L.getSubMesh=function(w$v){return this._subMeshes[w$v]},w$L.getSubMeshCount=function(){return this._subMeshes.length},w$L.getRenderElementsCount=function(){return this._subMeshes.length},w$L.getRenderElement=function(w$v){return this._subMeshes[w$v]},w$L.disposeResource=function(){for(var w$v=0;w$v<this._subMeshes.length;w$v++)this._subMeshes[w$v].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},w$G(0,w$L,"materials",function(){return this._materials.slice()}),w$G(0,w$L,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),w$l.load=function(w$v){return w$f.loader.create(w$v,null,null,w$l)},w$l}(),w$pl=(function(w$v){function w$$(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===w$L&&(w$L=6408),void 0===w$A&&(w$A=5121),void 0===w$x&&(w$x=33189),void 0===w$m&&(w$m=!1),void 0===w$Z&&(w$Z=!1),void 0===w$O&&(w$O=-1),void 0===w$e&&(w$e=-1),w$$.__super.call(this),this._type=3553,this._width=w$v,this._height=w$l,this._size=new w$cl(w$v,w$l),this._surfaceFormat=w$L,this._surfaceType=w$A,this._depthStencilFormat=w$x,w$c.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=w$m,this._repeat=w$Z,this._minFifter=w$O,this._magFifter=w$e,this.activeResource(),this._alreadyResolved=!0}w$r(w$$,"laya.d3.resource.RenderTexture",w$Ql);var w$l=w$$.prototype;w$l.recreateResource=function(){var w$v=w$Q.mainContext;this._frameBuffer=w$v.createFramebuffer(),this._source=w$v.createTexture();var w$l=w$M.curBindTexTarget,w$L=w$M.curBindTexValue;w$M.bindTexture(w$v,this._type,this._source),w$v.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var w$A=this._minFifter,w$x=this._magFifter,w$m=this._repeat?10497:33071;if(w$X.isPOT(this._width,this._height)?(this._mipmap?-1!==w$A||(w$A=9987):-1!==w$A||(w$A=9729),-1!==w$x||(w$x=9729),w$v.texParameteri(this._type,10241,w$A),w$v.texParameteri(this._type,10240,w$x),w$v.texParameteri(this._type,10242,w$m),w$v.texParameteri(this._type,10243,w$m),this._mipmap&&w$v.generateMipmap(this._type)):(-1!==w$A||(w$A=9729),-1!==w$x||(w$x=9729),w$v.texParameteri(this._type,10241,w$A),w$v.texParameteri(this._type,10240,w$x),w$v.texParameteri(this._type,10242,33071),w$v.texParameteri(this._type,10243,33071)),w$l&&w$L&&w$M.bindTexture(w$v,w$l,w$L),w$v.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=w$v.createRenderbuffer(),w$v.bindRenderbuffer(36161,this._depthStencilBuffer),w$v.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),w$v.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:w$v.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:w$v.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:w$v.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}w$v.framebufferTexture2D(36160,36064,3553,this._source,0),w$v.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},w$l.start=function(){w$Q.mainContext.bindFramebuffer(36160,this.frameBuffer),(w$$._currentRenderTarget=this)._alreadyResolved=!1},w$l.end=function(){w$Q.mainContext.bindFramebuffer(36160,null),w$$._currentRenderTarget=null,this._alreadyResolved=!0},w$l.getData=function(w$v,w$l,w$L,w$A){var w$x=w$Q.mainContext;if(w$x.bindFramebuffer(36160,this._frameBuffer),!(36053===w$x.checkFramebufferStatus(36160)))return w$x.bindFramebuffer(36160,null),null;var w$m=new Uint8Array(this._width*this._height*4);return w$x.readPixels(w$v,w$l,w$L,w$A,this._surfaceFormat,this._surfaceType,w$m),w$x.bindFramebuffer(36160,null),w$m},w$l.disposeResource=function(){if(this._frameBuffer){var w$v=w$Q.mainContext;w$v.deleteTexture(this._source),w$v.deleteFramebuffer(this._frameBuffer),w$v.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},w$G(0,w$l,"surfaceFormat",function(){return this._surfaceFormat}),w$G(0,w$l,"surfaceType",function(){return this._surfaceType}),w$G(0,w$l,"depthStencilFormat",function(){return this._depthStencilFormat}),w$G(0,w$l,"source",function(){return this._alreadyResolved?w$f.superGet(w$Ql,this,"source"):null}),w$G(0,w$l,"depthStencilBuffer",function(){return this._depthStencilBuffer}),w$G(0,w$l,"frameBuffer",function(){return this._frameBuffer}),w$$._currentRenderTarget=null}(),function(w$v){function w$l(w$v){this._color=null,this._pixels=null,w$l.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new w$cl(this.width,this.height),this._color=w$v,this._pixels=new Uint8Array([255*w$v.x,255*w$v.y,255*w$v.z,255*w$v.w]),this.uri="SolidColorTexture2D_"+this.id}w$r(w$l,"laya.d3.resource.SolidColorTexture2D",w$Ql);var w$L=w$l.prototype;return w$L._createWebGlTexture=function(){var w$v=w$Q.mainContext,w$l=this._source=w$v.createTexture(),w$L=this._width,w$A=this._height,w$x=w$M.curBindTexTarget,w$m=w$M.curBindTexValue;w$M.bindTexture(w$v,this._type,w$l),w$v.texImage2D(this._type,0,6408,w$L,w$A,0,6408,5121,this._pixels);var w$Z=this._minFifter,w$O=this._magFifter,w$e=this._repeat?10497:33071,w$$=w$X.isPOT(w$L,w$A);w$$?(this._mipmap?-1!==w$Z||(w$Z=9987):-1!==w$Z||(w$Z=9729),-1!==w$O||(w$O=9729),w$v.texParameteri(this._type,10241,w$Z),w$v.texParameteri(this._type,10240,w$O),w$v.texParameteri(this._type,10242,w$e),w$v.texParameteri(this._type,10243,w$e),this._mipmap&&w$v.generateMipmap(this._type)):(-1!==w$Z||(w$Z=9729),-1!==w$O||(w$O=9729),w$v.texParameteri(this._type,10241,w$Z),w$v.texParameteri(this._type,10240,w$O),w$v.texParameteri(this._type,10242,33071),w$v.texParameteri(this._type,10243,33071)),w$x&&w$m&&w$M.bindTexture(w$v,w$x,w$m),this.memorySize=w$$?w$L*w$A*4*(1+1/3):w$L*w$A*4},w$L.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},w$L.disposeResource=function(){this._source&&(w$Q.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},w$o(w$l,["magentaTexture",function(){var w$v=new w$l(new w$Ol(1,0,1,1));return w$v.lock=!0,this.magentaTexture=w$v},"grayTexture",function(){var w$v=new w$l(new w$Ol(.5,.5,.5,1));return w$v.lock=!0,this.grayTexture=w$v}]),w$l}()),w$Yl=function(w$v){function w$x(w$v,w$l,w$L,w$A){this._canRead=!1,this._image=null,this._pixels=null,void 0===w$v&&(w$v=!1),void 0===w$l&&(w$l=!0),void 0===w$L&&(w$L=6408),void 0===w$A&&(w$A=!0),w$x.__super.call(this),this._type=3553,this._repeat=w$l,this._canRead=w$v,this._format=w$L,this._mipmap=w$A}w$r(w$x,"laya.d3.resource.Texture2D",w$Ql);var w$l=w$x.prototype;return w$l._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var w$v=w$Q.mainContext,w$l=this._source=w$v.createTexture(),w$L=this._width,w$A=this._height,w$x=w$M.curBindTexTarget,w$m=w$M.curBindTexValue;switch(w$M.bindTexture(w$v,this._type,w$l),this._format){case 6407:case 6408:this._canRead?w$v.texImage2D(this._type,0,this._format,w$L,w$A,0,this._format,5121,this._pixels):this._image instanceof laya.webgl.resource.WebGLImage?w$v.texImage2D(this._type,0,this._image._format,w$L,w$A,0,this._image._format,5121,this._image.atlasSource):w$v.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case w$Q.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:w$v.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var w$Z=this._minFifter,w$O=this._magFifter,w$e=this._repeat?10497:33071,w$$=0==this._wrapModeU?10497:33071,w$_=0==this._wrapModeV?10497:33071,w$o=w$X.isPOT(w$L,w$A);w$o?(this._mipmap?-1!==w$Z||(w$Z=9987):-1!==w$Z||(w$Z=9729),-1!==w$O||(w$O=9729),w$v.texParameteri(this._type,10241,w$Z),w$v.texParameteri(this._type,10240,w$O),w$v.texParameteri(this._type,10242,w$e),w$v.texParameteri(this._type,10243,w$e),w$v.texParameteri(this._type,10242,w$$),w$v.texParameteri(this._type,10243,w$_),this._mipmap&&w$v.generateMipmap(this._type)):(-1!==w$Z||(w$Z=9729),-1!==w$O||(w$O=9729),w$v.texParameteri(this._type,10241,w$Z),w$v.texParameteri(this._type,10240,w$O),w$v.texParameteri(this._type,10242,33071),w$v.texParameteri(this._type,10243,33071)),w$x&&w$m&&w$M.bindTexture(w$v,w$x,w$m),this._image.onload=null,this._image=null,this.memorySize=w$o?w$L*w$A*4*(1+1/3):w$L*w$A*4},w$l.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},w$l.onAsynLoaded=function(w$v,w$l,w$L){if(w$L){var w$A=w$L[0];void 0!==w$A&&(this._canRead=w$A);var w$x=w$L[1];void 0!==w$x&&(this._repeat=w$x);var w$m=w$L[2];void 0!==w$m&&(this._format=w$m);var w$Z=w$L[3];void 0!==w$Z&&(this._mipmap=w$Z);var w$O=w$L.wrapModeU;void 0!==w$O&&(this._wrapModeU=w$O);var w$e=w$L.wrapModeV;void 0!==w$e&&(this._wrapModeV=w$e)}switch(this._format){case 6407:case 6408:var w$$=(this._image=w$l).width,w$_=w$l.height;this._width=w$$,this._height=w$_,this._size=new w$cl(w$$,w$_),this._canRead&&(w$c.isConchApp?w$l instanceof w$K.HTMLElement&&(this._pixels=new Uint8Array(w$l.getImageData(0,0,w$$,w$_))):(w$P.canvas.size(w$$,w$_),w$P.canvas.clear(),w$P.context.drawImage(w$l,0,0,w$$,w$_),this._pixels=new Uint8Array(w$P.context.getImageData(0,0,w$$,w$_).data.buffer)));break;case w$Q.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var w$o=new w$w(w$l);w$o.readUTFBytes(4),w$o.readUTFBytes(2),w$o.getInt16();w$o.endian="bigEndian",this._width=w$o.getInt16(),this._height=w$o.getInt16(),this._size=new w$cl(this._width,this._height);w$o.getInt16(),w$o.getInt16();this._image=new Uint8Array(w$l,w$o.pos)}this.recreateResource(),this._endLoaded()},w$l.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},w$l.disposeResource=function(){this._source&&(w$Q.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},w$G(0,w$l,"_src",function(){return this.url}),w$G(0,w$l,"src",function(){return this.url}),w$x.load=function(w$v){return w$f.loader.create(w$v,null,null,w$x)},w$x}(),w$Dl=function(w$l){function w$L(w$v,w$l){w$L.__super.call(this),void 0===w$v&&(w$v=.3),void 0===w$l&&(w$l=1e3),this._tempVector3=new w$Zl,this._position=new w$Zl,this._up=new w$Zl,this._forward=new w$Zl,this._right=new w$Zl,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=w$cl.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=w$v,this._farPlane=w$l,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),w$f.stage.on("resize",this,this._onScreenSizeChanged)}w$r(w$L,"laya.d3.core.BaseCamera",w$l);var w$v=w$L.prototype;return w$v._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var w$v=this.scene._cameraPool,w$l=w$v.length-1,w$L=0;w$L<w$l;w$L++)if(w$v[w$L].renderingOrder>w$v[w$l].renderingOrder){var w$A=w$v[w$L];w$v[w$L]=w$v[w$l],w$v[w$l]=w$A}},w$v._calculateProjectionMatrix=function(){},w$v._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},w$v._prepareCameraToRender=function(){w$I._currentCameraCullingMask=this.cullingMask;var w$v=this._shaderValues;w$v.setValue(0,this.transform.position.elements),w$v.setValue(5,this.forward.elements),w$v.setValue(6,this.up.elements)},w$v._prepareCameraViewProject=function(w$v,w$l){var w$L=this._shaderValues;w$L.setValue(1,w$v.elements),w$L.setValue(2,w$l.elements)},w$v._renderCamera=function(w$v,w$l,w$L){},w$v.addLayer=function(w$v){29!==w$v.number&&30!=w$v.number&&(this.cullingMask=this.cullingMask|w$v.mask)},w$v.removeLayer=function(w$v){29!==w$v.number&&30!=w$v.number&&(this.cullingMask=this.cullingMask&~w$v.mask)},w$v.addAllLayers=function(){this.cullingMask=2147483647},w$v.removeAllLayers=function(){this.cullingMask=0|w$I.getLayerByNumber(29).mask|w$I.getLayerByNumber(30).mask},w$v.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},w$v.moveForward=function(w$v){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=w$v,this.transform.translate(this._tempVector3)},w$v.moveRight=function(w$v){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=w$v,this.transform.translate(this._tempVector3)},w$v.moveVertical=function(w$v){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=w$v,this.transform.translate(this._tempVector3,!1)},w$v._addSelfRenderObjects=function(){var w$v=this.scene._cameraPool,w$l=w$v.length;if(0<w$l){for(var w$L=w$l-1;0<=w$L;w$L--)if(this.renderingOrder<=w$v[w$L].renderingOrder){w$v.splice(w$L+1,0,this);break}}else w$v.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},w$v._clearSelfRenderObjects=function(){var w$v=this.scene._cameraPool;w$v.splice(w$v.indexOf(this),1)},w$v.destroy=function(w$v){void 0===w$v&&(w$v=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,w$f.stage.off("resize",this,this._onScreenSizeChanged),w$l.prototype.destroy.call(this,w$v)},w$G(0,w$v,"sky",function(){return this._sky},function(w$v){(this._sky=w$v)._ownerCamera=this}),w$G(0,w$v,"forward",function(){var w$v=this.transform.worldMatrix.elements,w$l=this._forward.elements;return w$l[0]=-w$v[8],w$l[1]=-w$v[9],w$l[2]=-w$v[10],this._forward}),w$G(0,w$v,"position",function(){var w$v=this.transform.worldMatrix.elements,w$l=this._position.elements;return w$l[0]=w$v[12],w$l[1]=w$v[13],w$l[2]=w$v[14],this._position}),w$G(0,w$v,"renderTarget",function(){return this._renderTarget},function(w$v){null!=(this._renderTarget=w$v)&&(this._renderTargetSize=w$v.size)}),w$G(0,w$v,"up",function(){var w$v=this.transform.worldMatrix.elements,w$l=this._up.elements;return w$l[0]=w$v[4],w$l[1]=w$v[5],w$l[2]=w$v[6],this._up}),w$G(0,w$v,"right",function(){var w$v=this.transform.worldMatrix.elements,w$l=this._right.elements;return w$l[0]=w$v[0],w$l[1]=w$v[1],w$l[2]=w$v[2],this._right}),w$G(0,w$v,"renderTargetSize",function(){return this._renderTargetSize},function(w$v){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=w$v,this._calculateProjectionMatrix()}),w$G(0,w$v,"fieldOfView",function(){return this._fieldOfView},function(w$v){this._fieldOfView=w$v,this._calculateProjectionMatrix()}),w$G(0,w$v,"nearPlane",function(){return this._nearPlane},function(w$v){this._nearPlane=w$v,this._calculateProjectionMatrix()}),w$G(0,w$v,"farPlane",function(){return this._farPlane},function(w$v){this._farPlane=w$v,this._calculateProjectionMatrix()}),w$G(0,w$v,"orthographic",function(){return this._orthographic},function(w$v){this._orthographic=w$v,this._calculateProjectionMatrix()}),w$G(0,w$v,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(w$v){this._orthographicVerticalSize=w$v,this._calculateProjectionMatrix()}),w$G(0,w$v,"renderingOrder",function(){return this._renderingOrder},function(w$v){this._renderingOrder=w$v,this._sortCamerasByRenderingOrder()}),w$L.CAMERAPOS=0,w$L.VIEWMATRIX=1,w$L.PROJECTMATRIX=2,w$L.VPMATRIX=3,w$L.VPMATRIX_NO_TRANSLATE=4,w$L.CAMERADIRECTION=5,w$L.CAMERAUP=6,w$L.ENVIRONMENTDIFFUSE=7,w$L.ENVIRONMENTSPECULAR=8,w$L.SIMLODINFO=9,w$L.DIFFUSEIRRADMATR=10,w$L.DIFFUSEIRRADMATG=11,w$L.DIFFUSEIRRADMATB=12,w$L.HDREXPOSURE=13,w$L.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",w$L.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",w$L.CLEARFLAG_SOLIDCOLOR=0,w$L.CLEARFLAG_SKY=1,w$L.CLEARFLAG_DEPTHONLY=2,w$L.CLEARFLAG_NONE=3,w$o(w$L,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new w$vl(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new w$vl},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new w$vl}]),w$L}(w$al),w$Sl=function(w$L){function w$l(w$v){this._render=null,this._geometryFilter=null,w$l.__super.call(this,w$v)}w$r(w$l,"laya.d3.core.RenderableSprite3D",w$L);var w$v=w$l.prototype;return w$v._addToInitStaticBatchManager=function(){},w$v._setBelongScene=function(w$v){w$L.prototype._setBelongScene.call(this,w$v),w$v._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},w$v._setUnBelongScene=function(){var w$v=this._scene._renderableSprite3Ds,w$l=w$v.indexOf(this);w$v.splice(w$l,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),w$L.prototype._setUnBelongScene.call(this)},w$v._update=function(w$v){(w$v.owner=this)._activeInHierarchy&&(this._updateComponents(w$v),this._render._updateOctreeNode(),this._lateUpdateComponents(w$v),w$g.spriteCount++,this._childs.length&&this._updateChilds(w$v))},w$v.destroy=function(w$v){void 0===w$v&&(w$v=!0),w$L.prototype.destroy.call(this,w$v),this._render._destroy(),this._render=null},w$l.__init__=function(){w$l.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=w$l.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),w$l.SAHDERDEFINE_LIGHTMAP=w$l.shaderDefines.registerDefine("LIGHTMAP")},w$l.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,w$l.SAHDERDEFINE_LIGHTMAP=4,w$l.LIGHTMAPSCALEOFFSET=2,w$l.LIGHTMAP=3,w$o(w$l,["shaderDefines",function(){return this.shaderDefines=new w$_l}]),w$l}(w$al),w$yl=(function(w$v){function w$A(w$v,w$l,w$L){this._long=NaN,this._width=NaN,this._height=NaN,void 0===w$v&&(w$v=1),void 0===w$l&&(w$l=1),void 0===w$L&&(w$L=1),w$A.__super.call(this),this._long=w$v,this._width=w$l,this._height=w$L,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}w$r(w$A,"laya.d3.resource.models.BoxMesh",w$jl);var w$l=w$A.prototype;w$l.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var w$v=w$Qv.vertexDeclaration,w$l=(w$v.vertexStride,this._long/2),w$L=this._height/2,w$A=this._width/2,w$x=new Float32Array([-w$l,w$L,-w$A,0,1,0,0,0,w$l,w$L,-w$A,0,1,0,1,0,w$l,w$L,w$A,0,1,0,1,1,-w$l,w$L,w$A,0,1,0,0,1,-w$l,-w$L,-w$A,0,-1,0,0,1,w$l,-w$L,-w$A,0,-1,0,1,1,w$l,-w$L,w$A,0,-1,0,1,0,-w$l,-w$L,w$A,0,-1,0,0,0,-w$l,w$L,-w$A,-1,0,0,0,0,-w$l,w$L,w$A,-1,0,0,1,0,-w$l,-w$L,w$A,-1,0,0,1,1,-w$l,-w$L,-w$A,-1,0,0,0,1,w$l,w$L,-w$A,1,0,0,1,0,w$l,w$L,w$A,1,0,0,0,0,w$l,-w$L,w$A,1,0,0,0,1,w$l,-w$L,-w$A,1,0,0,1,1,-w$l,w$L,w$A,0,0,1,0,0,w$l,w$L,w$A,0,0,1,1,0,w$l,-w$L,w$A,0,0,1,1,1,-w$l,-w$L,w$A,0,0,1,0,1,-w$l,w$L,-w$A,0,0,-1,1,0,w$l,w$L,-w$A,0,0,-1,0,0,w$l,-w$L,-w$A,0,0,-1,0,1,-w$l,-w$L,-w$A,0,0,-1,1,1]),w$m=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new w$Nl(w$v,this._numberVertices,35044,!0),this._indexBuffer=new w$Rl("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(w$x),this._indexBuffer.setData(w$m),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},w$G(0,w$l,"long",function(){return this._long},function(w$v){this._long!==w$v&&(this._long=w$v,this.releaseResource(),this.activeResource())}),w$G(0,w$l,"width",function(){return this._width},function(w$v){this._width!==w$v&&(this._width=w$v,this.releaseResource(),this.activeResource())}),w$G(0,w$l,"height",function(){return this._height},function(w$v){this._height!==w$v&&(this._height=w$v,this.releaseResource(),this.activeResource())})}(),function(w$v){function w$Z(w$v,w$l,w$L){void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=.3),void 0===w$L&&(w$L=1e3),this._viewMatrix=new w$vl,this._projectionMatrix=new w$vl,this._projectionViewMatrix=new w$vl,this._viewport=new w$el(0,0,0,0),this._normalizedViewport=new w$el(0,0,1,1),this._aspectRatio=w$v,this._boundFrustumUpdate=!0,this._boundFrustum=new w$iv(w$vl.DEFAULT),w$Z.__super.call(this,w$l,w$L),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}w$r(w$Z,"laya.d3.core.Camera",w$Dl);var w$l=w$Z.prototype;return w$l._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},w$l._parseCustomProps=function(w$v,w$l,w$L,w$A){var w$x=w$L.clearColor;this.clearColor=new w$Ol(w$x[0],w$x[1],w$x[2],w$x[3]);var w$m=w$L.viewport;this.normalizedViewport=new w$el(w$m[0],w$m[1],w$m[2],w$m[3])},w$l._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var w$v=this.orthographicVerticalSize*this.aspectRatio*.5,w$l=.5*this.orthographicVerticalSize;w$vl.createOrthoOffCenterRH(-w$v,w$v,-w$l,w$l,this.nearPlane,this.farPlane,this._projectionMatrix)}else w$vl.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},w$l._update=function(w$v){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,w$v)},w$l._renderCamera=function(w$v,w$l,w$L){var w$A,w$x;w$L.parallelSplitShadowMaps[0]&&w$L._renderShadowMap(w$v,w$l,this),(w$l.camera=this)._prepareCameraToRender(),w$L._preRenderUpdateComponents(w$l),w$A=w$l._viewMatrix=this.viewMatrix;var w$m=this._renderTarget;w$m?(w$m.start(),w$vl.multiply(w$Dl._invertYScaleMatrix,this._projectionMatrix,w$Dl._invertYProjectionMatrix),w$vl.multiply(w$Dl._invertYScaleMatrix,this.projectionViewMatrix,w$Dl._invertYProjectionViewMatrix),w$x=w$l._projectionMatrix=w$Dl._invertYProjectionMatrix,w$l._projectionViewMatrix=w$Dl._invertYProjectionViewMatrix):(w$x=w$l._projectionMatrix=this._projectionMatrix,w$l._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(w$A,w$x),w$l._viewport=this.viewport,w$L._preRenderScene(w$v,w$l,this.boundFrustum),w$L._clear(w$v,w$l),w$L._renderScene(w$v,w$l),w$L._postRenderUpdateComponents(w$l),w$m&&w$m.end()},w$l.viewportPointToRay=function(w$v,w$l){w$Gl.calculateCursorRay(w$v,this.viewport,this._projectionMatrix,this.viewMatrix,null,w$l)},w$l.normalizedViewportPointToRay=function(w$v,w$l){var w$L=w$Z._tempVector20,w$A=this.viewport,w$x=w$v.elements,w$m=w$L.elements;w$m[0]=w$x[0]*w$A.width,w$m[1]=w$x[1]*w$A.height,w$Gl.calculateCursorRay(w$L,this.viewport,this._projectionMatrix,this.viewMatrix,null,w$l)},w$l.worldToViewportPoint=function(w$v,w$l){w$vl.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(w$v,this._projectionViewMatrix,w$l);var w$L=w$l.elements;w$L[0]=w$L[0]/w$f.stage.clientScaleX,w$L[1]=w$L[1]/w$f.stage.clientScaleY},w$l.worldToNormalizedViewportPoint=function(w$v,w$l){w$vl.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(w$v,this._projectionViewMatrix,w$l);var w$L=w$l.elements;w$L[0]=w$L[0]/w$f.stage.clientScaleX,w$L[1]=w$L[1]/w$f.stage.clientScaleY},w$l.convertScreenCoordToOrthographicCoord=function(w$v,w$l){if(this._orthographic){var w$L=w$E.clientWidth,w$A=w$E.clientHeight,w$x=this.orthographicVerticalSize*this.aspectRatio/w$L,w$m=this.orthographicVerticalSize/w$A,w$Z=w$v.elements,w$O=w$l.elements;return w$O[0]=(-w$L/2+w$Z[0])*w$x,w$O[1]=(w$A/2-w$Z[1])*w$m,w$O[2]=(this.nearPlane-this.farPlane)*(w$Z[2]+1)/2-this.nearPlane,w$Zl.transformCoordinate(w$l,this.transform.worldMatrix,w$l),!0}return!1},w$G(0,w$l,"projectionViewMatrix",function(){return w$vl.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),w$G(0,w$l,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var w$v=this.viewport;return w$v.width/w$v.height},function(w$v){if(w$v<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=w$v,this._calculateProjectionMatrix()}),w$G(0,w$l,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),w$G(0,w$l,"needViewport",function(){var w$v=this.normalizedViewport;return 0===w$v.x&&0===w$v.y&&1===w$v.width&&1===w$v.height}),w$G(0,w$l,"viewport",function(){if(this._viewportExpressedInClipSpace){var w$v=this._normalizedViewport,w$l=this.renderTargetSize,w$L=w$l.width,w$A=w$l.height;this._viewport.x=w$v.x*w$L,this._viewport.y=w$v.y*w$A,this._viewport.width=w$v.width*w$L,this._viewport.height=w$v.height*w$A}return this._viewport},function(w$v){if(null!=this.renderTarget&&(w$v.x<0||w$v.y<0||0==w$v.width||0==w$v.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=w$v,this._calculateProjectionMatrix()}),w$G(0,w$l,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var w$v=this._viewport,w$l=this.renderTargetSize,w$L=w$l.width,w$A=w$l.height;this._normalizedViewport.x=w$v.x/w$L,this._normalizedViewport.y=w$v.y/w$A,this._normalizedViewport.width=w$v.width/w$L,this._normalizedViewport.height=w$v.height/w$A}return this._normalizedViewport},function(w$v){w$v.x<0&&(w$v.x=0,console.warn("Camera: viewport.x must large than 0.0.")),w$v.y<0&&(w$v.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<w$v.x+w$v.width&&(w$v.width=1-w$v.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<w$v.y+w$v.height&&(w$v.height=1-w$v.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=w$v,this._calculateProjectionMatrix()}),w$G(0,w$l,"projectionMatrix",function(){return this._projectionMatrix},function(w$v){this._projectionMatrix=w$v,this._useUserProjectionMatrix=!0}),w$G(0,w$l,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),w$o(w$Z,["_tempVector20",function(){return this._tempVector20=new w$ml}]),w$Z}()),w$Wl=function(w$L){function w$A(w$v,w$l){w$A.__super.call(this,w$l),this._geometryFilter=new w$Pl(this),this._render=new w$Il(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),w$v&&(this._geometryFilter.sharedMesh=w$v)instanceof laya.d3.resource.models.Mesh&&(w$v.loaded?this._render.sharedMaterials=w$v.materials:w$v.once("loaded",this,this._applyMeshMaterials))}w$r(w$A,"laya.d3.core.MeshSprite3D",w$L);var w$v=w$A.prototype;return w$v._changeRenderObjectByMesh=function(w$v){var w$l=this._render._renderElements,w$L=w$l[w$v];w$L||(w$L=w$l[w$v]=new w$Hl),w$L._render=this._render;var w$A=this._render.sharedMaterials[w$v];w$A||(w$A=w$ul.defaultMaterial);var w$x=this._geometryFilter.sharedMesh.getRenderElement(w$v);return w$L._mainSortID=this._getSortID(w$x,w$A),w$L._sprite3D=this,w$L.renderObj=w$x,w$L._material=w$A,w$L},w$v._changeRenderObjectByMaterial=function(w$v,w$l){var w$L=this._render._renderElements[w$v];w$l||(w$l=w$ul.defaultMaterial);var w$A=this._geometryFilter.sharedMesh.getRenderElement(w$v);return w$L._mainSortID=this._getSortID(w$A,w$l),w$L._sprite3D=this,w$L.renderObj=w$A,w$L._material=w$l,w$L},w$v._changeRenderObjectsByMesh=function(){var w$v=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=w$v;for(var w$l=0;w$l<w$v;w$l++)this._changeRenderObjectByMesh(w$l)},w$v._onMeshChanged=function(w$v){var w$l=w$v.sharedMesh;w$l.loaded?this._changeRenderObjectsByMesh():w$l.once("loaded",this,this._onMeshLoaded)},w$v._onMeshLoaded=function(w$v){w$v===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},w$v._onMaterialChanged=function(w$v,w$l,w$L){w$l<this._render._renderElements.length&&this._changeRenderObjectByMaterial(w$l,w$L)},w$v._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},w$v._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},w$v._parseCustomProps=function(w$v,w$l,w$L,w$A){var w$x=this.meshRender,w$m=w$L.lightmapIndex;null!=w$m&&(w$x.lightmapIndex=w$m);var w$Z,w$O,w$e=w$L.lightmapScaleOffset;if(w$e&&(w$x.lightmapScaleOffset=new w$Ol(w$e[0],w$e[1],w$e[2],w$e[3])),w$A.instanceParams)(w$Z=w$A.instanceParams.loadPath)&&(w$O=w$C.getRes(w$l[w$Z]),(this.meshFilter.sharedMesh=w$O).loaded?w$x.sharedMaterials=w$O.materials:w$O.once("loaded",this,this._applyMeshMaterials));else{(w$Z=w$L.meshPath)&&(w$O=w$C.getRes(w$l[w$Z]),this.meshFilter.sharedMesh=w$O);var w$$=w$L.materials;if(w$$){var w$_=w$x.sharedMaterials,w$o=w$$.length;w$_.length=w$o;for(var w$K=0;w$K<w$o;w$K++)w$_[w$K]=w$C.getRes(w$l[w$$[w$K].path]);w$x.sharedMaterials=w$_}}},w$v._applyMeshMaterials=function(w$v){for(var w$l=this._render.sharedMaterials,w$L=w$v.materials,w$A=0,w$x=w$L.length;w$A<w$x;w$A++)w$l[w$A]||(w$l[w$A]=w$L[w$A]);this._render.sharedMaterials=w$l},w$v._addToInitStaticBatchManager=function(){w$A._staticBatchManager._addInitBatchSprite(this)},w$v.cloneTo=function(w$v){var w$l=w$v;w$l._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var w$L=this._render,w$A=w$l._render;w$A.enable=w$L.enable,w$A.sharedMaterials=w$L.sharedMaterials,w$A.castShadow=w$L.castShadow;var w$x=w$L.lightmapScaleOffset;w$x&&(w$A.lightmapScaleOffset=w$x.clone()),w$A.lightmapIndex=w$L.lightmapIndex,w$A.receiveShadow=w$L.receiveShadow,w$A.sortingFudge=w$L.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,w$v)},w$v.destroy=function(w$v){if(void 0===w$v&&(w$v=!0),!this.destroyed){var w$l=this.meshFilter.sharedMesh;null!=w$l&&(w$l.loaded||w$l.off("loaded",this,this._applyMeshMaterials)),w$L.prototype.destroy.call(this,w$v),this._geometryFilter._destroy()}},w$G(0,w$v,"meshFilter",function(){return this._geometryFilter}),w$G(0,w$v,"meshRender",function(){return this._render}),w$A.__init__=function(){w$Av._staticBatchManagers.push(w$A._staticBatchManager)},w$A.load=function(w$v){return w$f.loader.create(w$v,null,null,w$A)},w$o(w$A,["_staticBatchManager",function(){return this._staticBatchManager=new w$Tl}]),w$A}(w$Sl)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(w$v,w$l){"use strict";for(var w$L in Object.defineProperty(w$l,"__esModule",{value:!0}),Laya){var w$A=Laya[w$L];w$A&&w$A.__isclass&&(w$l[w$L]=w$A)}}),function(w$v,w$l,w$xv){w$xv.un,w$xv.uns;var w$L=w$xv.static,w$A=w$xv.class,w$m=w$xv.getset,w$c=w$xv.__newvec,w$O=laya.maths.Bezier,w$o=laya.utils.Browser,w$Qv=laya.utils.Byte,w$x=(laya.events.Event,laya.events.EventDispatcher),w$Z=laya.display.Graphics,w$e=(laya.resource.HTMLCanvas,laya.utils.Handler),w$$=laya.net.Loader,w$K=laya.maths.MathUtil,w$Mv=laya.maths.Matrix,w$d=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),w$_=(laya.renders.RenderContext,laya.resource.Resource),w$r=laya.utils.RunDriver,w$mv=laya.display.Sprite,w$G=laya.utils.Stat,w$Pv=laya.resource.Texture,w$C=(laya.net.URL,laya.utils.Utils),w$M=function(){function w$v(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return w$A(w$v,"laya.ani.AnimationContent"),w$v}(),w$P=function(){function w$v(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return w$A(w$v,"laya.ani.AnimationNodeContent"),w$v}(),w$B=function(){function w$v(){}return w$A(w$v,"laya.ani.AnimationParser01"),w$v.parse=function(w$v,w$l){var w$L=w$l.__getBuffer(),w$A=0,w$x=0,w$m=0,w$Z=0,w$O=0,w$e=0,w$$=0,w$_=w$l.readUTFString();w$v._aniClassName=w$_;var w$o,w$K=w$l.readUTFString().split("\n"),w$r=w$l.getUint8(),w$G=w$l.getUint32(),w$c=w$l.getUint32();0<w$G&&(w$o=w$L.slice(w$G,w$c));var w$d=new w$Qv(w$o);for(0<w$c&&(w$v._publicExtData=w$L.slice(w$c,w$L.byteLength)),w$v._useParent=!!w$l.getUint8(),w$v._anis.length=w$r,w$A=0;w$A<w$r;w$A++){var w$C=w$v._anis[w$A]=new w$M;w$C.nodes=new Array;var w$J=w$C.name=w$K[w$l.getUint16()];w$v._aniMap[w$J]=w$A,w$C.bone3DMap={},w$C.playTime=w$l.getFloat32(),w$C.playTime<=0&&console.error("播放时间不能为0  url="+w$v.url+" name="+w$C.name);var w$B=w$C.nodes.length=w$l.getUint8();for(w$x=w$C.totalKeyframeDatasLength=0;w$x<w$B;w$x++){var w$X=w$C.nodes[w$x]=new w$P;w$X.childs=[];var w$f=w$l.getInt16();0<=w$f&&(w$X.name=w$K[w$f],w$C.bone3DMap[w$X.name]=w$x),w$X.keyFrame=new Array,w$X.parentIndex=w$l.getInt16(),-1==w$X.parentIndex?w$X.parent=null:w$X.parent=w$C.nodes[w$X.parentIndex],w$X.lerpType=w$l.getUint8();var w$w=w$l.getUint32();w$d.pos=w$w;var w$H=w$X.keyframeWidth=w$d.getUint16();if(w$C.totalKeyframeDatasLength+=w$H,0===w$X.lerpType||1===w$X.lerpType)for(w$X.interpolationMethod=[],w$X.interpolationMethod.length=w$H,w$m=0;w$m<w$H;w$m++)w$X.interpolationMethod[w$m]=w$a.interpolation[w$d.getUint8()];null!=w$X.parent&&w$X.parent.childs.push(w$X);var w$g=w$l.getUint16();0<w$g&&(w$X.extenData=w$L.slice(w$l.pos,w$l.pos+w$g),w$l.pos+=w$g);var w$T,w$h=w$l.getUint16(),w$V=0;for(w$m=0,w$Z=w$X.keyFrame.length=w$h;w$m<w$Z;w$m++){if((w$T=w$X.keyFrame[w$m]=new w$I).duration=w$l.getFloat32(),w$T.startTime=w$V,2===w$X.lerpType){w$T.interpolationData=[];var w$k,w$Q=w$l.getUint8();switch(w$k=w$l.getFloat32()){case 254:for(w$T.interpolationData.length=w$H,w$$=0;w$$<w$H;w$$++)w$T.interpolationData[w$$]=0;break;case 255:for(w$T.interpolationData.length=w$H,w$$=0;w$$<w$H;w$$++)w$T.interpolationData[w$$]=5;break;default:for(w$T.interpolationData.push(w$k),w$e=1;w$e<w$Q;w$e++)w$T.interpolationData.push(w$l.getFloat32())}}for(w$T.data=new Float32Array(w$H),w$O=0;w$O<w$H;w$O++)w$T.data[w$O]=w$l.getFloat32(),-1e-8<w$T.data[w$O]&&w$T.data[w$O]<1e-8&&(w$T.data[w$O]=0);w$V+=w$T.duration}w$T.startTime=w$C.playTime,w$X.playTime=w$C.playTime,w$v._calculateKeyFrame(w$X,w$h,w$H)}}},w$v}(),w$X=function(){function w$f(){}return w$A(w$f,"laya.ani.AnimationParser02"),w$f.READ_DATA=function(){w$f._DATA.offset=w$f._reader.getUint32(),w$f._DATA.size=w$f._reader.getUint32()},w$f.READ_BLOCK=function(){for(var w$v=w$f._BLOCK.count=w$f._reader.getUint16(),w$l=w$f._BLOCK.blockStarts=[],w$L=w$f._BLOCK.blockLengths=[],w$A=0;w$A<w$v;w$A++)w$l.push(w$f._reader.getUint32()),w$L.push(w$f._reader.getUint32())},w$f.READ_STRINGS=function(){var w$v=w$f._reader.getUint32(),w$l=w$f._reader.getUint16(),w$L=w$f._reader.pos;w$f._reader.pos=w$v+w$f._DATA.offset;for(var w$A=0;w$A<w$l;w$A++)w$f._strings[w$A]=w$f._reader.readUTFString();w$f._reader.pos=w$L},w$f.parse=function(w$v,w$l){w$f._templet=w$v;(w$f._reader=w$l).__getBuffer();w$f.READ_DATA(),w$f.READ_BLOCK(),w$f.READ_STRINGS();for(var w$L=0,w$A=w$f._BLOCK.count;w$L<w$A;w$L++){var w$x=w$l.getUint16(),w$m=w$f._strings[w$x],w$Z=w$f["READ_"+w$m];if(null==w$Z)throw new Error("model file err,no this function:"+w$x+" "+w$m);w$Z.call()}},w$f.READ_ANIMATIONS=function(){var w$v=w$f._reader,w$l=w$v.__getBuffer(),w$L=0,w$A=0,w$x=0,w$m=0,w$Z=w$v.getUint16(),w$O=[];for(w$O.length=w$Z,w$L=0;w$L<w$Z;w$L++)w$O[w$L]=w$a.interpolation[w$v.getByte()];var w$e=w$v.getUint8();for(w$f._templet._anis.length=w$e,w$L=0;w$L<w$e;w$L++){var w$$=w$f._templet._anis[w$L]={};w$$.nodes=new Array;var w$_=w$$.name=w$f._strings[w$v.getUint16()];w$f._templet._aniMap[w$_]=w$L,w$$.bone3DMap={},w$$.playTime=w$v.getFloat32();var w$o=w$$.nodes.length=w$v.getInt16();for(w$A=w$$.totalKeyframeDatasLength=0;w$A<w$o;w$A++){var w$K=w$$.nodes[w$A]={};w$K.keyframeWidth=w$Z,w$K.childs=[];var w$r=w$v.getUint16();0<=w$r&&(w$K.name=w$f._strings[w$r],w$$.bone3DMap[w$K.name]=w$A),w$K.keyFrame=new Array,w$K.parentIndex=w$v.getInt16(),-1==w$K.parentIndex?w$K.parent=null:w$K.parent=w$$.nodes[w$K.parentIndex],w$$.totalKeyframeDatasLength+=w$Z,w$K.interpolationMethod=w$O,null!=w$K.parent&&w$K.parent.childs.push(w$K);var w$G=w$v.getUint16(),w$c=null,w$d=null;for(w$x=0,w$m=w$K.keyFrame.length=w$G;w$x<w$m;w$x++){(w$c=w$K.keyFrame[w$x]={}).startTime=w$v.getFloat32(),w$d&&(w$d.duration=w$c.startTime-w$d.startTime);var w$C=w$f._DATA.offset,w$J=w$v.getUint32(),w$B=4*w$Z,w$X=w$l.slice(w$C+w$J,w$C+w$J+w$B);w$c.data=new Float32Array(w$X),w$d=w$c}w$c.duration=0,w$K.playTime=w$$.playTime,w$f._templet._calculateKeyFrame(w$K,w$G,w$Z)}}},w$f._templet=null,w$f._reader=null,w$f._strings=[],w$L(w$f,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),w$f}(),w$Iv=(function(){function w$v(){}w$A(w$v,"laya.ani.AnimationState"),w$v.stopped=0,w$v.paused=1,w$v.playing=2}(),function(){function w$x(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new w$Sv,this.resultMatrix=new w$Mv,this._children=[]}w$A(w$x,"laya.ani.bone.Bone");var w$v=w$x.prototype;return w$v.setTempMatrix=function(w$v){this._tempMatrix=w$v;var w$l,w$L=0;for(w$L=0,w$l=this._children.length;w$L<w$l;w$L++)this._children[w$L].setTempMatrix(this._tempMatrix)},w$v.update=function(w$v){var w$l;if(this.rotation=this.transform.skX,w$v)w$l=this.resultTransform.getMatrix(),w$Mv.mul(w$l,w$v,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)w$l=this.resultTransform.getMatrix(),w$Mv.mul(w$l,this.parentBone.resultMatrix,this.resultMatrix);else{var w$L=this.parentBone,w$A=NaN,w$x=NaN,w$m=NaN,w$Z=this.parentBone.resultMatrix;w$l=this.resultTransform.getMatrix();var w$O=w$Z.a*w$l.tx+w$Z.c*w$l.ty+w$Z.tx,w$e=w$Z.b*w$l.tx+w$Z.d*w$l.ty+w$Z.ty,w$$=new w$Mv;this.inheritRotation?(w$A=Math.atan2(w$L.resultMatrix.b,w$L.resultMatrix.a),w$x=Math.cos(w$A),w$m=Math.sin(w$A),w$$.setTo(w$x,w$m,-w$m,w$x,0,0),w$Mv.mul(this._tempMatrix,w$$,w$Mv.TEMP),w$Mv.TEMP.copyTo(w$$),w$l=this.resultTransform.getMatrix(),w$Mv.mul(w$l,w$$,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,w$l=this.resultTransform.getMatrix(),w$Mv.TEMP.identity(),w$Mv.TEMP.d=this.d,w$Mv.mul(w$l,w$Mv.TEMP,this.resultMatrix)),this.resultMatrix.tx=w$O,this.resultMatrix.ty=w$e}else(w$l=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var w$_,w$o=0;for(w$o=0,w$_=this._children.length;w$o<w$_;w$o++)this._children[w$o].update()},w$v.updateChild=function(){var w$v,w$l=0;for(w$l=0,w$v=this._children.length;w$l<w$v;w$l++)this._children[w$l].update()},w$v.setRotation=function(w$v){this._sprite&&(this._sprite.rotation=180*w$v/Math.PI)},w$v.updateDraw=function(w$v,w$l){w$x.ShowBones&&!w$x.ShowBones[this.name]||(this._sprite||(this._sprite=new w$mv,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),w$xv.stage.addChild(this._sprite)),this._sprite.x=w$v+this.resultMatrix.tx,this._sprite.y=w$l+this.resultMatrix.ty);var w$L,w$A=0;for(w$A=0,w$L=this._children.length;w$A<w$L;w$A++)this._children[w$A].updateDraw(w$v,w$l)},w$v.addChild=function(w$v){this._children.push(w$v),w$v.parentBone=this},w$v.findBone=function(w$v){if(this.name==w$v)return this;var w$l,w$L,w$A=0;for(w$A=0,w$l=this._children.length;w$A<w$l;w$A++)if(w$L=this._children[w$A].findBone(w$v))return w$L;return null},w$v.localToWorld=function(w$v){var w$l=w$v[0],w$L=w$v[1];w$v[0]=w$l*this.resultMatrix.a+w$L*this.resultMatrix.c+this.resultMatrix.tx,w$v[1]=w$l*this.resultMatrix.b+w$L*this.resultMatrix.d+this.resultMatrix.ty},w$x.ShowBones={},w$x}()),w$tv=function(){function w$c(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}w$A(w$c,"laya.ani.bone.BoneSlot");var w$v=w$c.prototype;return w$v.showSlotData=function(w$v,w$l){void 0===w$l&&(w$l=!0),this.currSlotData=w$v,w$l&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},w$v.showDisplayByName=function(w$v){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(w$v))},w$v.replaceDisplayByName=function(w$v,w$l){if(this.currSlotData){var w$L;w$L=this.currSlotData.getDisplayByName(w$v);var w$A;w$A=this.currSlotData.getDisplayByName(w$l),this.replaceDisplayByIndex(w$L,w$A)}},w$v.replaceDisplayByIndex=function(w$v,w$l){this.currSlotData&&(this._replaceDic[w$v]=w$l,this.displayIndex==w$v&&this.showDisplayByIndex(w$v))},w$v.showDisplayByIndex=function(w$v){if(null!=this._replaceDic[w$v]&&(w$v=this._replaceDic[w$v]),this.currSlotData&&-1<w$v&&w$v<this.currSlotData.displayArr.length){if(this.displayIndex=w$v,this.currDisplayData=this.currSlotData.displayArr[w$v],this.currDisplayData){var w$l=this.currDisplayData.name;this.currTexture=this.templet.getTexture(w$l),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!w$d.isConchApp||w$d.isConchApp&&"0.9.15"<w$mv.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},w$v.replaceSkin=function(w$v){this._diyTexture=w$v,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},w$v.setParentMatrix=function(w$v){this._parentMatrix=w$v},w$v.draw=function(w$v,w$l,w$L,w$A){if(void 0===w$L&&(w$L=!1),void 0===w$A&&(w$A=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var w$x,w$m=this.currTexture;switch(this._diyTexture&&(w$m=this._diyTexture),this.currDisplayData.type){case 0:if(w$v){var w$Z=this.getDisplayMatrix();if(this._parentMatrix){var w$O=!1;if(w$Z){var w$e;if(w$Mv.mul(w$Z,this._parentMatrix,w$Mv.TEMP),w$e=w$L?(null==this._resultMatrix&&(this._resultMatrix=new w$Mv),this._resultMatrix):new w$Mv,!w$d.isWebGL&&this.currDisplayData.uvs||w$d.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var w$$=w$c._tempMatrix;w$$.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(w$$.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(w$O=!0,w$$.rotate(-Math.PI/2)),w$Mv.mul(w$$,w$Mv.TEMP,w$e)}else w$Mv.TEMP.copyTo(w$e);w$O?w$v.drawTexture(w$m,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,w$e):w$v.drawTexture(w$m,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,w$e)}}}break;case 1:if(null==(w$x=w$L?(null==this._skinSprite&&(this._skinSprite=w$c.createSkinMesh()),this._skinSprite):w$c.createSkinMesh()))return;var w$_;if(null==this.currDisplayData.bones){var w$o,w$K=this.currDisplayData.weights;this.deformData&&(w$K=this.deformData),w$o=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=w$H.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=w$H.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=w$K;this.currDisplayData.triangles.length;w$_=this.currDisplayData.triangles,w$x.init2(w$m,null,w$_,this._mVerticleArr,w$o);var w$r,w$G=this.getDisplayMatrix();if(this._parentMatrix)if(w$G)w$Mv.mul(w$G,this._parentMatrix,w$Mv.TEMP),w$r=w$L?(null==this._resultMatrix&&(this._resultMatrix=new w$Mv),this._resultMatrix):new w$Mv,w$Mv.TEMP.copyTo(w$r),w$x.transform=w$r}else this.skinMesh(w$l,w$x,w$A);w$v.drawSkin(w$x);break;case 2:if(null==(w$x=w$L?(null==this._skinSprite&&(this._skinSprite=w$c.createSkinMesh()),this._skinSprite):w$c.createSkinMesh()))return;this.skinMesh(w$l,w$x,w$A),w$v.drawSkin(w$x)}}},w$v.skinMesh=function(w$v,w$l,w$L){var w$A,w$x=this.currTexture,w$m=this.currDisplayData.bones;w$A=this._diyTexture?(w$x=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=w$H.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=w$H.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var w$Z,w$O,w$e=this.currDisplayData.weights,w$$=this.currDisplayData.triangles,w$_=0,w$o=0,w$K=0,w$r=NaN,w$G=NaN,w$c=0,w$d=0,w$C=[],w$J=0,w$B=0;if(this.deformData&&0<this.deformData.length){var w$X=0;for(w$J=0,w$B=w$m.length;w$J<w$B;){for(w$K=w$m[w$J++]+w$J,w$o=w$_=0;w$J<w$K;w$J++)w$O=w$v[w$m[w$J]],w$r=w$e[w$c]+this.deformData[w$X++],w$G=w$e[w$c+1]+this.deformData[w$X++],w$d=w$e[w$c+2],w$_+=(w$r*w$O.a+w$G*w$O.c+w$O.tx)*w$d,w$o+=(w$r*w$O.b+w$G*w$O.d+w$O.ty)*w$d,w$c+=3;w$C.push(w$_,w$o)}}else for(w$J=0,w$B=w$m.length;w$J<w$B;){for(w$K=w$m[w$J++]+w$J,w$o=w$_=0;w$J<w$K;w$J++)w$O=w$v[w$m[w$J]],w$r=w$e[w$c],w$G=w$e[w$c+1],w$d=w$e[w$c+2],w$_+=(w$r*w$O.a+w$G*w$O.c+w$O.tx)*w$d,w$o+=(w$r*w$O.b+w$G*w$O.d+w$O.ty)*w$d,w$c+=3;w$C.push(w$_,w$o)}this._mVerticleArr=w$C,w$Z=w$$,w$l.init2(w$x,null,w$Z,this._mVerticleArr,w$A)},w$v.drawBonePoint=function(w$v){w$v&&this._parentMatrix&&w$v.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},w$v.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},w$v.getMatrix=function(){return this._resultMatrix},w$v.copy=function(){var w$v=new w$c;return w$v.type="copy",w$v.name=this.name,w$v.attachmentName=this.attachmentName,w$v.srcDisplayIndex=this.srcDisplayIndex,w$v.parent=this.parent,w$v.displayIndex=this.displayIndex,w$v.templet=this.templet,w$v.currSlotData=this.currSlotData,w$v.currTexture=this.currTexture,w$v.currDisplayData=this.currDisplayData,w$v},w$c.createSkinMesh=function(){return w$d.isWebGL||w$d.isConchApp?w$r.skinAniSprite():(w$d.isWebGL,null)},w$L(w$c,["_tempMatrix",function(){return this._tempMatrix=new w$Mv}]),w$c}(),w$av=function(){function w$v(){this.skinName=null,this.deformSlotDataList=[]}return w$A(w$v,"laya.ani.bone.DeformAniData"),w$v}(),w$qv=function(){function w$v(){this.deformSlotDisplayList=[]}return w$A(w$v,"laya.ani.bone.DeformSlotData"),w$v}(),w$uv=function(){function w$v(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}w$A(w$v,"laya.ani.bone.DeformSlotDisplayData");var w$l=w$v.prototype;return w$l.binarySearch1=function(w$v,w$l){var w$L=0,w$A=w$v.length-2;if(0==w$A)return 1;for(var w$x=w$A>>>1;;){if(w$v[Math.floor(w$x+1)]<=w$l?w$L=w$x+1:w$A=w$x,w$L==w$A)return w$L+1;w$x=w$L+w$A>>>1}return 0},w$l.apply=function(w$v,w$l,w$L){if(void 0===w$L&&(w$L=1),w$v+=.05,!(this.timeList.length<=0)){var w$A=0;if(!(w$v<this.timeList[0])){var w$x=this.vectices[0].length,w$m=[],w$Z=this.binarySearch1(this.timeList,w$v);if(this.frameIndex=w$Z,w$v>=this.timeList[this.timeList.length-1]){var w$O=this.vectices[this.vectices.length-1];if(w$L<1)for(w$A=0;w$A<w$x;w$A++)w$m[w$A]+=(w$O[w$A]-w$m[w$A])*w$L;else for(w$A=0;w$A<w$x;w$A++)w$m[w$A]=w$O[w$A];this.deformData=w$m}else{this.tweenKeyList[this.frameIndex];var w$e=this.vectices[this.frameIndex-1],w$$=this.vectices[this.frameIndex],w$_=this.timeList[this.frameIndex-1],w$o=this.timeList[this.frameIndex];w$L=this.tweenKeyList[w$Z-1]?(w$v-w$_)/(w$o-w$_):0;var w$K=NaN;for(w$A=0;w$A<w$x;w$A++)w$K=w$e[w$A],w$m[w$A]=w$K+(w$$[w$A]-w$K)*w$L;this.deformData=w$m}}}},w$v}(),w$Rv=function(){function w$v(){this.time=NaN,this.drawOrder=[]}return w$A(w$v,"laya.ani.bone.DrawOrderData"),w$v}(),w$Nv=function(){function w$v(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return w$A(w$v,"laya.ani.bone.EventData"),w$v}(),w$J=function(){function w$Av(w$v,w$l){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=w$v,this._targetBone=w$l[w$v.targetBoneIndex],this.isSpine=w$v.isSpine,null==this._bones&&(this._bones=[]);for(var w$L=this._bones.length=0,w$A=w$v.boneIndexs.length;w$L<w$A;w$L++)this._bones.push(w$l[w$v.boneIndexs[w$L]]);this.name=w$v.name,this.mix=w$v.mix,this.bendDirection=w$v.bendDirection}w$A(w$Av,"laya.ani.bone.IkConstraint");var w$v=w$Av.prototype;return w$v.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},w$v._applyIk1=function(w$v,w$l,w$L,w$A){var w$x=w$v.parentBone,w$m=1/(w$x.resultMatrix.a*w$x.resultMatrix.d-w$x.resultMatrix.b*w$x.resultMatrix.c),w$Z=w$l-w$x.resultMatrix.tx,w$O=w$L-w$x.resultMatrix.ty,w$e=(w$Z*w$x.resultMatrix.d-w$O*w$x.resultMatrix.c)*w$m-w$v.transform.x,w$$=(w$O*w$x.resultMatrix.a-w$Z*w$x.resultMatrix.b)*w$m-w$v.transform.y,w$_=Math.atan2(w$$,w$e)*w$Av.radDeg-0-w$v.transform.skX;w$v.transform.scX<0&&(w$_+=180),180<w$_?w$_-=360:w$_<-180&&(w$_+=360),w$v.transform.skX=w$v.transform.skY=w$v.transform.skX+w$_*w$A,w$v.update()},w$v.updatePos=function(w$v,w$l){this._sp&&this._sp.pos(w$v,w$l)},w$v._applyIk2=function(w$v,w$l,w$L,w$A,w$x,w$m){if(0!=w$m){var w$Z=w$v.resultTransform.x,w$O=w$v.resultTransform.y,w$e=w$v.transform.scX,w$$=w$v.transform.scY,w$_=w$l.transform.scX,w$o=0,w$K=0,w$r=0;w$r=w$e<0?(w$e=-w$e,w$o=180,-1):(w$o=0,1),w$$<0&&(w$$=-w$$,w$r=-w$r),w$K=w$_<0?(w$_=-w$_,180):0;var w$G=w$l.resultTransform.x,w$c=NaN,w$d=NaN,w$C=NaN,w$J=w$v.resultMatrix.a,w$B=w$v.resultMatrix.c,w$X=w$v.resultMatrix.b,w$f=w$v.resultMatrix.d,w$w=Math.abs(w$e-w$$)<=1e-4;w$C=w$w?(w$d=w$J*w$G+w$B*(w$c=w$l.resultTransform.y)+w$v.resultMatrix.tx,w$X*w$G+w$f*w$c+w$v.resultMatrix.ty):(w$c=0,w$d=w$J*w$G+w$v.resultMatrix.tx,w$X*w$G+w$v.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new w$mv,w$xv.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(w$L,w$A,15,"#ffff00"),this._sp.graphics.drawCircle(w$d,w$C,15,"#ff00ff")),w$v.setRotation(Math.atan2(w$C-w$v.resultMatrix.ty,w$d-w$v.resultMatrix.tx));var w$H=w$v.parentBone;w$J=w$H.resultMatrix.a,w$B=w$H.resultMatrix.c,w$X=w$H.resultMatrix.b;var w$g=1/(w$J*(w$f=w$H.resultMatrix.d)-w$B*w$X),w$T=w$L-w$H.resultMatrix.tx,w$h=w$A-w$H.resultMatrix.ty,w$V=(w$T*w$f-w$h*w$B)*w$g-w$Z,w$k=(w$h*w$J-w$T*w$X)*w$g-w$O,w$Q=((w$T=w$d-w$H.resultMatrix.tx)*w$f-(w$h=w$C-w$H.resultMatrix.ty)*w$B)*w$g-w$Z,w$M=(w$h*w$J-w$T*w$X)*w$g-w$O,w$P=Math.sqrt(w$Q*w$Q+w$M*w$M),w$I=w$l.length*w$_,w$t=NaN,w$a=NaN;if(w$w){var w$q=(w$V*w$V+w$k*w$k-w$P*w$P-(w$I*=w$e)*w$I)/(2*w$P*w$I);w$q<-1?w$q=-1:1<w$q&&(w$q=1),w$a=Math.acos(w$q)*w$x,w$J=w$P+w$I*w$q,w$B=w$I*Math.sin(w$a),w$t=Math.atan2(w$k*w$J-w$V*w$B,w$V*w$J+w$k*w$B)}else{var w$u=(w$J=w$e*w$I)*w$J,w$R=(w$B=w$$*w$I)*w$B,w$N=w$V*w$V+w$k*w$k,w$b=Math.atan2(w$k,w$V),w$j=-2*w$R*w$P,w$F=w$R-w$u;if(0<(w$f=w$j*w$j-4*w$F*(w$X=w$R*w$P*w$P+w$u*w$N-w$u*w$R))){var w$p=Math.sqrt(w$f);w$j<0&&(w$p=-w$p);var w$Y=(w$p=-(w$j+w$p)/2)/w$F,w$D=w$X/w$p,w$S=Math.abs(w$Y)<Math.abs(w$D)?w$Y:w$D;w$S*w$S<=w$N&&(w$h=Math.sqrt(w$N-w$S*w$S)*w$x,w$t=w$b-Math.atan2(w$h,w$S),w$a=Math.atan2(w$h/w$$,(w$S-w$P)/w$e))}var w$y=0,w$W=Number.MAX_VALUE,w$E=0,w$s=0,w$i=0,w$n=0,w$U=0,w$z=0;w$n<(w$f=(w$T=w$P+w$J)*w$T)&&(w$i=0,w$n=w$f,w$U=w$T),(w$f=(w$T=w$P-w$J)*w$T)<w$W&&(w$y=Math.PI,w$W=w$f,w$E=w$T);var w$vv=Math.acos(-w$J*w$P/(w$u-w$R));(w$f=(w$T=w$J*Math.cos(w$vv)+w$P)*w$T+(w$h=w$B*Math.sin(w$vv))*w$h)<w$W&&(w$y=w$vv,w$W=w$f,w$E=w$T,w$s=w$h),w$n<w$f&&(w$i=w$vv,w$n=w$f,w$U=w$T,w$z=w$h),w$a=w$N<=(w$W+w$n)/2?(w$t=w$b-Math.atan2(w$s*w$x,w$E),w$y*w$x):(w$t=w$b-Math.atan2(w$z*w$x,w$U),w$i*w$x)}var w$lv=Math.atan2(w$c,w$G)*w$r,w$Lv=w$v.resultTransform.skX;180<(w$t=(w$t-w$lv)*w$Av.radDeg+w$o-w$Lv)?w$t-=360:w$t<-180&&(w$t+=360),w$v.resultTransform.x=w$Z,w$v.resultTransform.y=w$O,w$v.resultTransform.skX=w$v.resultTransform.skY=w$Lv+w$t*w$m,w$Lv=w$l.resultTransform.skX,180<(w$a=((w$a+w$lv)*w$Av.radDeg-0)*w$r+w$K-(w$Lv%=360))?w$a-=360:w$a<-180&&(w$a+=360),w$l.resultTransform.x=w$G,w$l.resultTransform.y=w$c,w$l.resultTransform.skX=w$l.resultTransform.skY=w$l.resultTransform.skY+w$a*w$m,w$v.update()}},w$v._applyIk3=function(w$v,w$l,w$L,w$A,w$x,w$m){if(0!=w$m){var w$Z,w$O,w$e=w$l.resultMatrix.a*w$l.length,w$$=w$l.resultMatrix.b*w$l.length,w$_=w$e*w$e+w$$*w$$,w$o=Math.sqrt(w$_),w$K=w$v.resultMatrix.tx,w$r=w$v.resultMatrix.ty,w$G=w$l.resultMatrix.tx,w$c=w$l.resultMatrix.ty,w$d=w$G-w$K,w$C=w$c-w$r,w$J=w$d*w$d+w$C*w$C,w$B=Math.sqrt(w$J),w$X=(w$d=w$L-w$v.resultMatrix.tx)*w$d+(w$C=w$A-w$v.resultMatrix.ty)*w$C,w$f=Math.sqrt(w$X);if(w$o+w$B<=w$f||w$f+w$o<=w$B||w$f+w$B<=w$o){var w$w=NaN;w$G=w$K+(w$w=w$o+w$B<=w$f?1:-1)*(w$L-w$K)*w$B/w$f,w$c=w$r+w$w*(w$A-w$r)*w$B/w$f}else{var w$H=(w$J-w$_+w$X)/(2*w$X),w$g=Math.sqrt(w$J-w$H*w$H*w$X)/w$f,w$T=w$K+w$d*w$H,w$h=w$r+w$C*w$H,w$V=-w$C*w$g,w$k=w$d*w$g;w$c=0<w$x?(w$G=w$T-w$V,w$h-w$k):(w$G=w$T+w$V,w$h+w$k)}w$Z=w$G,w$O=w$c,this.isDebug&&(this._sp||(this._sp=new w$mv,w$xv.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(w$K,w$r,15,"#ff00ff"),this._sp.graphics.drawCircle(w$L,w$A,15,"#ffff00"),this._sp.graphics.drawCircle(w$Z,w$O,15,"#ff00ff"));var w$Q,w$M;w$Q=Math.atan2(w$O-w$v.resultMatrix.ty,w$Z-w$v.resultMatrix.tx),w$v.setRotation(w$Q),(w$M=w$Av._tempMatrix).identity(),w$M.rotate(w$Q),w$M.scale(w$v.resultMatrix.getScaleX(),w$v.resultMatrix.getScaleY()),w$M.translate(w$v.resultMatrix.tx,w$v.resultMatrix.ty),w$M.copyTo(w$v.resultMatrix),w$v.updateChild();var w$P,w$I;w$P=Math.atan2(w$A-w$O,w$L-w$Z),w$l.setRotation(w$P),(w$I=w$Av._tempMatrix).identity(),w$I.rotate(w$P),w$I.scale(w$l.resultMatrix.getScaleX(),w$l.resultMatrix.getScaleY()),w$I.translate(w$Z,w$O),w$M.copyTo(w$l.resultMatrix),w$l.updateChild()}},w$L(w$Av,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new w$Mv}]),w$Av}(),w$bv=function(){function w$v(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return w$A(w$v,"laya.ani.bone.IkConstraintData"),w$v}(),w$f=function(){function w$I(w$v,w$l){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=w$v,this.position=w$v.position,this.spacing=w$v.spacing,this.rotateMix=w$v.rotateMix,this.translateMix=w$v.translateMix,this.bones=[];for(var w$L=this.data.bones,w$A=0,w$x=w$L.length;w$A<w$x;w$A++)this.bones.push(w$l[w$L[w$A]])}w$A(w$I,"laya.ani.bone.PathConstraint");var w$v=w$I.prototype;return w$v.apply=function(w$v,w$l){if(this.target){var w$L=this.translateMix,w$A=this.translateMix,w$x=0<w$A,w$m=this.data.spacingMode,w$Z="length"==w$m,w$O=this.data.rotateMode,w$e="tangent"==w$O,w$$="chainScale"==w$O,w$_=[],w$o=this.bones.length,w$K=w$e?w$o:w$o+1,w$r=[];(this._spaces=w$r)[0]=this.position;var w$G=this.spacing;if(w$$||w$Z)for(var w$c=0,w$d=w$K-1;w$c<w$d;){var w$C=this.bones[w$c],w$J=w$C.length,w$B=w$J*w$C.resultMatrix.a,w$X=w$J*w$C.resultMatrix.b;w$J=Math.sqrt(w$B*w$B+w$X*w$X),w$$&&(w$_[w$c]=w$J),w$r[++w$c]=w$Z?Math.max(0,w$J+w$G):w$G}else for(w$c=1;w$c<w$K;w$c++)w$r[w$c]=w$G;var w$f=this.computeWorldPositions(this.target,w$v,w$l,w$K,w$e,"percent"==this.data.positionMode,"percent"==w$m);if(this._debugKey){for(w$c=0;w$c<w$f.length;w$c++)w$l.drawCircle(w$f[w$c++],w$f[w$c++],5,"#00ff00");var w$w=[];for(w$c=0;w$c<w$f.length;w$c++)w$w.push(w$f[w$c++],w$f[w$c++]);w$l.drawLines(0,0,w$w,"#ff0000")}var w$H=w$f[0],w$g=w$f[1],w$T=this.data.offsetRotation,w$h="chain"==w$O&&0==w$T,w$V=NaN;for(w$c=0,w$V=3;w$c<w$o;w$c++,w$V+=3){(w$C=this.bones[w$c]).resultMatrix.tx+=(w$H-w$C.resultMatrix.tx)*w$L,w$C.resultMatrix.ty+=(w$g-w$C.resultMatrix.ty)*w$L;var w$k=(w$B=w$f[w$V])-w$H,w$Q=(w$X=w$f[w$V+1])-w$g;if(w$$&&0!=(w$J=w$_[w$c])){var w$M=(Math.sqrt(w$k*w$k+w$Q*w$Q)/w$J-1)*w$A+1;w$C.resultMatrix.a*=w$M,w$C.resultMatrix.c*=w$M}if(w$H=w$B,w$g=w$X,w$x){var w$P=w$C.resultMatrix.a,w$I=w$C.resultMatrix.c,w$t=w$C.resultMatrix.b,w$a=w$C.resultMatrix.d,w$q=NaN,w$u=NaN,w$R=NaN;w$q=w$e?w$f[w$V-1]:0==w$r[w$c+1]?w$f[w$V+2]:Math.atan2(w$Q,w$k),w$q-=Math.atan2(w$t,w$P)-w$T/180*Math.PI,w$h&&(w$u=Math.cos(w$q),w$R=Math.sin(w$q),w$H+=((w$J=w$C.length)*(w$u*w$P-w$R*w$t)-w$k)*w$A,w$g+=(w$J*(w$R*w$P+w$u*w$t)-w$Q)*w$A),w$q>Math.PI?w$q-=2*Math.PI:w$q<-Math.PI&&(w$q+=2*Math.PI),w$q*=w$A,w$u=Math.cos(w$q),w$R=Math.sin(w$q),w$C.resultMatrix.a=w$u*w$P-w$R*w$t,w$C.resultMatrix.c=w$u*w$I-w$R*w$a,w$C.resultMatrix.b=w$R*w$P+w$u*w$t,w$C.resultMatrix.d=w$R*w$I+w$u*w$a}}}},w$v.computeWorldVertices2=function(w$v,w$l,w$L,w$A,w$x,w$m){var w$Z,w$O,w$e=w$v.currDisplayData.bones,w$$=w$v.currDisplayData.weights,w$_=w$v.currDisplayData.triangles,w$o=0,w$K=0,w$r=0,w$G=0,w$c=0,w$d=0,w$C=0,w$J=0,w$B=0,w$X=0,w$f=0;if(null!=w$e){for(w$o=0;w$o<w$L;w$o+=2)w$K+=(w$G=w$e[w$K])+1,w$r+=w$G;var w$w=w$l;for(w$c=w$m,w$d=3*w$r;w$c<w$A;w$c+=2){for(w$J=w$C=0,w$G=w$e[w$K++],w$G+=w$K;w$K<w$G;w$K++,w$d+=3){w$Z=w$w[w$e[w$K]].resultMatrix,w$B=w$$[w$d],w$X=w$$[w$d+1];var w$H=w$$[w$d+2];w$C+=(w$B*w$Z.a+w$X*w$Z.c+w$Z.tx)*w$H,w$J+=(w$B*w$Z.b+w$X*w$Z.d+w$Z.ty)*w$H}w$x[w$c]=w$C,w$x[w$c+1]=w$J}}else{var w$g,w$T;if(w$_||(w$_=w$$),w$v.deformData&&(w$_=w$v.deformData),w$g=w$v.parent,w$l)for(w$f=w$l.length,w$o=0;w$o<w$f;w$o++)if(w$l[w$o].name==w$g){w$O=w$l[w$o];break}w$O&&(w$T=w$O.resultMatrix),w$T||(w$T=w$I._tempMt);var w$h=w$T.tx,w$V=w$T.ty,w$k=w$T.a,w$Q=w$T.b,w$M=w$T.c,w$P=w$T.d;for(w$O&&(w$P*=w$O.d),w$K=w$L,w$c=w$m;w$c<w$A;w$K+=2,w$c+=2)w$B=w$_[w$K],w$X=w$_[w$K+1],w$x[w$c]=w$B*w$k+w$X*w$Q+w$h,w$x[w$c+1]=-(w$B*w$M+w$X*w$P+w$V)}},w$v.computeWorldPositions=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z){w$v.currDisplayData.bones,w$v.currDisplayData.weights,w$v.currDisplayData.triangles;var w$O=[],w$e=0,w$$=w$v.currDisplayData.verLen,w$_=this.position,w$o=this._spaces,w$K=[],w$r=[],w$G=w$$/6,w$c=-1,w$d=NaN,w$C=0,w$J=0,w$B=NaN,w$X=NaN,w$f=NaN,w$w=NaN;if(w$G--,w$$-=4,this.computeWorldVertices2(w$v,w$l,2,w$$,w$O,0),this._debugKey)for(w$e=0;w$e<w$O.length;)w$L.drawCircle(w$O[w$e++],w$O[w$e++],10,"#ff0000");w$K=w$O,this._curves.length=w$G;var w$H=this._curves,w$g=w$K[w$d=0],w$T=w$K[1],w$h=0,w$V=0,w$k=0,w$Q=0,w$M=0,w$P=0,w$I=NaN,w$t=NaN,w$a=NaN,w$q=NaN,w$u=NaN,w$R=NaN,w$N=NaN,w$b=NaN,w$j=0;for(w$e=0,w$j=2;w$e<w$G;w$e++,w$j+=6)w$h=w$K[w$j],w$V=w$K[w$j+1],w$k=w$K[w$j+2],w$Q=w$K[w$j+3],w$u=2*(w$I=.1875*(w$g-2*w$h+w$k))+(w$a=.09375*(3*(w$h-w$k)-w$g+(w$M=w$K[w$j+4]))),w$R=2*(w$t=.1875*(w$T-2*w$V+w$Q))+(w$q=.09375*(3*(w$V-w$Q)-w$T+(w$P=w$K[w$j+5]))),w$N=.75*(w$h-w$g)+w$I+.16666667*w$a,w$b=.75*(w$V-w$T)+w$t+.16666667*w$q,w$d+=Math.sqrt(w$N*w$N+w$b*w$b),w$N+=w$u,w$b+=w$R,w$u+=w$a,w$R+=w$q,w$d+=Math.sqrt(w$N*w$N+w$b*w$b),w$N+=w$u,w$b+=w$R,w$d+=Math.sqrt(w$N*w$N+w$b*w$b),w$N+=w$u+w$a,w$b+=w$R+w$q,w$d+=Math.sqrt(w$N*w$N+w$b*w$b),w$H[w$e]=w$d,w$g=w$M,w$T=w$P;if(w$m&&(w$_*=w$d),w$Z)for(w$e=0;w$e<w$A;w$e++)w$o[w$e]*=w$d;var w$F=this._segments,w$p=0,w$Y=0;for(w$Y=w$J=w$C=w$e=0;w$e<w$A;w$e++,w$C+=3)if((w$B=w$_+=w$X=w$o[w$e])<0)this.addBeforePosition(w$B,w$K,0,w$r,w$C);else if(w$d<w$B)this.addAfterPosition(w$B-w$d,w$K,w$$-4,w$r,w$C);else{for(;;w$J++)if(!((w$w=w$H[w$J])<w$B)){0==w$J?w$B/=w$w:w$B=(w$B-(w$f=w$H[w$J-1]))/(w$w-w$f);break}if(w$J!=w$c){var w$D=6*(w$c=w$J);for(w$g=w$K[w$D],w$T=w$K[w$D+1],w$h=w$K[w$D+2],w$V=w$K[w$D+3],w$k=w$K[w$D+4],w$Q=w$K[w$D+5],w$u=2*(w$I=.03*(w$g-2*w$h+w$k))+(w$a=.006*(3*(w$h-w$k)-w$g+(w$M=w$K[w$D+6]))),w$R=2*(w$t=.03*(w$T-2*w$V+w$Q))+(w$q=.006*(3*(w$V-w$Q)-w$T+(w$P=w$K[w$D+7]))),w$N=.3*(w$h-w$g)+w$I+.16666667*w$a,w$b=.3*(w$V-w$T)+w$t+.16666667*w$q,w$p=Math.sqrt(w$N*w$N+w$b*w$b),w$F[0]=w$p,w$D=1;w$D<8;w$D++)w$N+=w$u,w$b+=w$R,w$u+=w$a,w$R+=w$q,w$p+=Math.sqrt(w$N*w$N+w$b*w$b),w$F[w$D]=w$p;w$N+=w$u,w$b+=w$R,w$p+=Math.sqrt(w$N*w$N+w$b*w$b),w$F[8]=w$p,w$N+=w$u+w$a,w$b+=w$R+w$q,w$p+=Math.sqrt(w$N*w$N+w$b*w$b),w$F[9]=w$p,w$Y=0}for(w$B*=w$p;;w$Y++)if(!((w$w=w$F[w$Y])<w$B)){0==w$Y?w$B/=w$w:w$B=w$Y+(w$B-(w$f=w$F[w$Y-1]))/(w$w-w$f);break}this.addCurvePosition(.1*w$B,w$g,w$T,w$h,w$V,w$k,w$Q,w$M,w$P,w$r,w$C,w$x||0<w$e&&0==w$X)}return w$r},w$v.addBeforePosition=function(w$v,w$l,w$L,w$A,w$x){var w$m=w$l[w$L],w$Z=w$l[w$L+1],w$O=w$l[w$L+2]-w$m,w$e=w$l[w$L+3]-w$Z,w$$=Math.atan2(w$e,w$O);w$A[w$x]=w$m+w$v*Math.cos(w$$),w$A[w$x+1]=w$Z+w$v*Math.sin(w$$),w$A[w$x+2]=w$$},w$v.addAfterPosition=function(w$v,w$l,w$L,w$A,w$x){var w$m=w$l[w$L+2],w$Z=w$l[w$L+3],w$O=w$m-w$l[w$L],w$e=w$Z-w$l[w$L+1],w$$=Math.atan2(w$e,w$O);w$A[w$x]=w$m+w$v*Math.cos(w$$),w$A[w$x+1]=w$Z+w$v*Math.sin(w$$),w$A[w$x+2]=w$$},w$v.addCurvePosition=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$,w$_,w$o){0==w$v&&(w$v=1e-4);var w$K=w$v*w$v,w$r=w$K*w$v,w$G=1-w$v,w$c=w$G*w$G,w$d=w$c*w$G,w$C=w$G*w$v,w$J=3*w$C,w$B=w$G*w$J,w$X=w$J*w$v,w$f=w$l*w$d+w$A*w$B+w$m*w$X+w$O*w$r,w$w=w$L*w$d+w$x*w$B+w$Z*w$X+w$e*w$r;w$$[w$_]=w$f,w$$[w$_+1]=w$w,w$$[w$_+2]=w$o?Math.atan2(w$w-(w$L*w$c+w$x*w$C*2+w$Z*w$K),w$f-(w$l*w$c+w$A*w$C*2+w$m*w$K)):0},w$I.NONE=-1,w$I.BEFORE=-2,w$I.AFTER=-3,w$L(w$I,["_tempMt",function(){return this._tempMt=new w$Mv}]),w$I}(),w$jv=function(){function w$v(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return w$A(w$v,"laya.ani.bone.PathConstraintData"),w$v}(),w$Fv=function(){function w$v(){this.name=null,this.slotArr=[]}return w$A(w$v,"laya.ani.bone.SkinData"),w$v}(),w$pv=function(){function w$v(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}w$A(w$v,"laya.ani.bone.SkinSlotDisplayData");var w$l=w$v.prototype;return w$l.createTexture=function(w$v){return this.texture||(this.texture=new w$Pv(w$v.bitmap,this.uvs),w$v.bitmap.alphaTexture&&(this.texture.alphaTexture=new w$Pv(w$v.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=w$v.height,this.texture.height=w$v.width,this.texture.offsetX=-w$v.offsetX,this.texture.offsetY=-w$v.offsetY,this.texture.sourceWidth=w$v.sourceHeight,this.texture.sourceHeight=w$v.sourceWidth):(this.texture.width=w$v.width,this.texture.height=w$v.height,this.texture.offsetX=-w$v.offsetX,this.texture.offsetY=-w$v.offsetY,this.texture.sourceWidth=w$v.sourceWidth,this.texture.sourceHeight=w$v.sourceHeight),w$d.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},w$l.destory=function(){this.texture&&this.texture.destroy()},w$v}(),w$Yv=function(){function w$v(){this.name=null,this.displayArr=[]}return w$A(w$v,"laya.ani.bone.SlotData"),w$v.prototype.getDisplayByName=function(w$v){for(var w$l=0,w$L=this.displayArr.length;w$l<w$L;w$l++)if(this.displayArr[w$l].attachmentName==w$v)return w$l;return-1},w$v}(),w$w=function(){function w$v(w$v,w$l){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=w$c(2,0),this._data=w$v,null==this._bones&&(this._bones=[]),this.target=w$l[w$v.targetIndex];var w$L,w$A=0;for(w$A=0,w$L=w$v.boneIndexs.length;w$A<w$L;w$A++)this._bones.push(w$l[w$v.boneIndexs[w$A]]);this.rotateMix=w$v.rotateMix,this.translateMix=w$v.translateMix,this.scaleMix=w$v.scaleMix,this.shearMix=w$v.shearMix}return w$A(w$v,"laya.ani.bone.TfConstraint"),w$v.prototype.apply=function(){for(var w$v,w$l=this.target.resultMatrix.a,w$L=this.target.resultMatrix.b,w$A=this.target.resultMatrix.c,w$x=this.target.resultMatrix.d,w$m=0,w$Z=this._bones.length;w$m<w$Z;w$m++){if(w$v=this._bones[w$m],0<this.rotateMix){var w$O=w$v.resultMatrix.a,w$e=w$v.resultMatrix.b,w$$=w$v.resultMatrix.c,w$_=w$v.resultMatrix.d,w$o=Math.atan2(w$A,w$l)-Math.atan2(w$$,w$O)+this._data.offsetRotation*Math.PI/180;w$o>Math.PI?w$o-=2*Math.PI:w$o<-Math.PI&&(w$o+=2*Math.PI),w$o*=this.rotateMix;var w$K=Math.cos(w$o),w$r=Math.sin(w$o);w$v.resultMatrix.a=w$K*w$O-w$r*w$$,w$v.resultMatrix.b=w$K*w$e-w$r*w$_,w$v.resultMatrix.c=w$r*w$O+w$K*w$$,w$v.resultMatrix.d=w$r*w$e+w$K*w$_}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),w$v.resultMatrix.tx+=(this._temp[0]-w$v.resultMatrix.tx)*this.translateMix,w$v.resultMatrix.ty+=(this._temp[1]-w$v.resultMatrix.ty)*this.translateMix,w$v.updateChild()),0<this.scaleMix){var w$G=Math.sqrt(w$v.resultMatrix.a*w$v.resultMatrix.a+w$v.resultMatrix.c*w$v.resultMatrix.c),w$c=Math.sqrt(w$l*w$l+w$A*w$A),w$d=1e-5<w$G?(w$G+(w$c-w$G+this._data.offsetScaleX)*this.scaleMix)/w$G:0;w$v.resultMatrix.a*=w$d,w$v.resultMatrix.c*=w$d,w$G=Math.sqrt(w$v.resultMatrix.b*w$v.resultMatrix.b+w$v.resultMatrix.d*w$v.resultMatrix.d),w$c=Math.sqrt(w$L*w$L+w$x*w$x),w$d=1e-5<w$G?(w$G+(w$c-w$G+this._data.offsetScaleY)*this.scaleMix)/w$G:0,w$v.resultMatrix.b*=w$d,w$v.resultMatrix.d*=w$d}if(0<this.shearMix){w$e=w$v.resultMatrix.b,w$_=w$v.resultMatrix.d;var w$C=Math.atan2(w$_,w$e);(w$o=Math.atan2(w$x,w$L)-Math.atan2(w$A,w$l)-(w$C-Math.atan2(w$v.resultMatrix.c,w$v.resultMatrix.a)))>Math.PI?w$o-=2*Math.PI:w$o<-Math.PI&&(w$o+=2*Math.PI),w$o=w$C+(w$o+this._data.offsetShearY*Math.PI/180)*this.shearMix,w$d=Math.sqrt(w$e*w$e+w$_*w$_),w$v.resultMatrix.b=Math.cos(w$o)*w$d,w$v.resultMatrix.d=Math.sin(w$o)*w$d}}},w$v}(),w$Dv=function(){function w$v(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return w$A(w$v,"laya.ani.bone.TfConstraintData"),w$v}(),w$Sv=function(){function w$v(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}w$A(w$v,"laya.ani.bone.Transform");var w$l=w$v.prototype;return w$l.initData=function(w$v){null!=w$v.x&&(this.x=w$v.x),null!=w$v.y&&(this.y=w$v.y),null!=w$v.skX&&(this.skX=w$v.skX),null!=w$v.skY&&(this.skY=w$v.skY),null!=w$v.scX&&(this.scX=w$v.scX),null!=w$v.scY&&(this.scY=w$v.scY)},w$l.getMatrix=function(){var w$v;return(w$v=this.mMatrix?this.mMatrix:this.mMatrix=new w$Mv).identity(),w$v.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(w$v,this.skewX*Math.PI/180,this.skewY*Math.PI/180),w$v.rotate(this.skX*Math.PI/180),w$v.translate(this.x,this.y),w$v},w$l.skew=function(w$v,w$l,w$L){var w$A=Math.sin(w$L),w$x=Math.cos(w$L),w$m=Math.sin(w$l),w$Z=Math.cos(w$l);return w$v.setTo(w$v.a*w$Z-w$v.b*w$A,w$v.a*w$m+w$v.b*w$x,w$v.c*w$Z-w$v.d*w$A,w$v.c*w$m+w$v.d*w$x,w$v.tx*w$Z-w$v.ty*w$A,w$v.tx*w$m+w$v.ty*w$x),w$v},w$v}(),w$H=function(){function w$v(){}return w$A(w$v,"laya.ani.bone.UVTools"),w$v.getRelativeUV=function(w$v,w$l,w$L){var w$A=w$v[0],w$x=w$v[2]-w$v[0],w$m=w$v[1],w$Z=w$v[5]-w$v[1];w$L||(w$L=[]),w$L.length=w$l.length;var w$O,w$e=0;w$O=w$L.length;var w$$=1/w$x,w$_=1/w$Z;for(w$e=0;w$e<w$O;w$e+=2)w$L[w$e]=(w$l[w$e]-w$A)*w$$,w$L[w$e+1]=(w$l[w$e+1]-w$m)*w$_;return w$L},w$v.getAbsoluteUV=function(w$v,w$l,w$L){if(0==w$v[0]&&0==w$v[1]&&1==w$v[4]&&1==w$v[5])return w$L?(w$C.copyArray(w$L,w$l),w$L):w$l;var w$A=w$v[0],w$x=w$v[2]-w$v[0],w$m=w$v[1],w$Z=w$v[5]-w$v[1];w$L||(w$L=[]),w$L.length=w$l.length;var w$O,w$e=0;for(w$O=w$L.length,w$e=0;w$e<w$O;w$e+=2)w$L[w$e]=w$l[w$e]*w$x+w$A,w$L[w$e+1]=w$l[w$e+1]*w$Z+w$m;return w$L},w$v}(),w$I=function(){function w$v(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return w$A(w$v,"laya.ani.KeyFramesContent"),w$v}(),w$g=function(){function w$_(){}return w$A(w$_,"laya.ani.math.BezierLerp"),w$_.getBezierRate=function(w$v,w$l,w$L,w$A,w$x){var w$m=w$_._getBezierParamKey(w$l,w$L,w$A,w$x),w$Z=100*w$m+w$v;if(w$_._bezierResultCache[w$Z])return w$_._bezierResultCache[w$Z];var w$O,w$e=w$_._getBezierPoints(w$l,w$L,w$A,w$x,w$m),w$$=0;for(w$O=w$e.length,w$$=0;w$$<w$O;w$$+=2)if(w$v<=w$e[w$$])return w$_._bezierResultCache[w$Z]=w$e[w$$+1],w$e[w$$+1];return w$_._bezierResultCache[w$Z]=1},w$_._getBezierParamKey=function(w$v,w$l,w$L,w$A){return 100*(100*(100*(100*w$v+w$l)+w$L)+w$A)},w$_._getBezierPoints=function(w$v,w$l,w$L,w$A,w$x){return w$_._bezierPointsCache[w$x]?w$_._bezierPointsCache[w$x]:(w$m=[0,0,w$v,w$l,w$L,w$A,1,1],w$Z=(new w$O).getBezierPoints(w$m,100,3),w$_._bezierPointsCache[w$x]=w$Z);var w$m,w$Z},w$_._bezierResultCache={},w$_._bezierPointsCache={},w$_}(),w$T=function(w$v){function w$l(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,w$l.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}w$A(w$l,"laya.ani.AnimationPlayer",w$x);var w$L=w$l.prototype;return w$xv.imps(w$L,{"laya.resource.IDestroy":!0}),w$L._onTempletLoadedComputeFullKeyframeIndices=function(w$v,w$l,w$L){this._templet===w$L&&this._cachePlayRate===w$v&&this._cacheFrameRate===w$l&&this._computeFullKeyframeIndices()},w$L._computeFullKeyframeIndices=function(){for(var w$v=this._fullFrames=[],w$l=this._templet,w$L=this._cacheFrameRateInterval*this._cachePlayRate,w$A=0,w$x=w$l.getAnimationCount();w$A<w$x;w$A++){for(var w$m=[],w$Z=0,w$O=w$l.getAnimation(w$A).nodes.length;w$Z<w$O;w$Z++){for(var w$e=w$l.getAnimation(w$A).nodes[w$Z],w$$=Math.floor(w$e.playTime/w$L+.01),w$_=new Uint16Array(w$$+1),w$o=-1,w$K=0,w$r=w$e.keyFrame.length;w$K<w$r;w$K++){var w$G=w$e.keyFrame[w$K],w$c=w$G.startTime,w$d=w$c+w$G.duration+w$L;do{for(var w$C=Math.floor(w$c/w$L+.5),w$J=w$o+1;w$J<w$C;w$J++)w$_[w$J]=w$K;w$_[w$o=w$C]=w$K,w$c+=w$L}while(w$c<=w$d)}w$m.push(w$_)}w$v.push(w$m)}},w$L._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},w$L._calculatePlayDuration=function(){if(0!==this.state){var w$v=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=w$v),this._playEnd>w$v&&(this._playEnd=w$v),this._playDuration=this._playEnd-this._playStart}},w$L._setPlayParams=function(w$v,w$l){this._currentTime=w$v,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/w$l+.01),0),this._currentFrameTime=this._currentKeyframeIndex*w$l},w$L._setPlayParamsWhenStop=function(w$v,w$l){this._currentTime=w$v,this._currentKeyframeIndex=Math.max(Math.floor(w$v/w$l+.01),0),this._currentFrameTime=this._currentKeyframeIndex*w$l,this._currentAnimationClipIndex=-1},w$L._update=function(w$v){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var w$l=this._cacheFrameRateInterval*this._cachePlayRate,w$L=0;this._startUpdateLoopCount!==w$G.loopCount&&(w$L=w$v*this.playbackRate,this._elapsedPlaybackTime+=w$L);var w$A=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=w$A)return this._setPlayParamsWhenStop(w$A,w$l),void this.event("stopped");if(w$L+=this._currentTime,0<w$A)if(w$A<=w$L)do{if(w$L-=w$A,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(w$A,w$l),this._stopWhenCircleFinish=!1,void this.event("stopped");w$L<w$A&&(this._setPlayParams(w$L,w$l),this.event("complete"))}while(w$A<=w$L);else this._setPlayParams(w$L,w$l);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(w$A,w$l),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},w$L._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},w$L.play=function(w$v,w$l,w$L,w$A,w$x){if(void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=1),void 0===w$L&&(w$L=2147483647),void 0===w$A&&(w$A=0),void 0===w$x&&(w$x=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(w$L<0||w$A<0||w$x<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==w$x&&w$x<w$A)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=w$l,this._overallDuration=w$L,this._playStart=w$A,this._playEnd=w$x,this._paused=!1,this._currentAnimationClipIndex=w$v,this._currentKeyframeIndex=0,this._startUpdateLoopCount=w$G.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},w$L.playByFrame=function(w$v,w$l,w$L,w$A,w$x,w$m){void 0===w$v&&(w$v=0),void 0===w$l&&(w$l=1),void 0===w$L&&(w$L=2147483647),void 0===w$A&&(w$A=0),void 0===w$x&&(w$x=0),void 0===w$m&&(w$m=30);var w$Z=1e3/w$m;this.play(w$v,w$l,w$L,w$A*w$Z,w$x*w$Z)},w$L.stop=function(w$v){void 0===w$v&&(w$v=!0),w$v?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},w$m(0,w$L,"playEnd",function(){return this._playEnd}),w$m(0,w$L,"templet",function(){return this._templet},function(w$v){0===!this.state&&this.stop(!0),this._templet!==w$v&&((this._templet=w$v).loaded?this._computeFullKeyframeIndices():w$v.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),w$m(0,w$L,"playStart",function(){return this._playStart}),w$m(0,w$L,"playDuration",function(){return this._playDuration}),w$m(0,w$L,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),w$m(0,w$L,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),w$m(0,w$L,"overallDuration",function(){return this._overallDuration}),w$m(0,w$L,"currentFrameTime",function(){return this._currentFrameTime}),w$m(0,w$L,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),w$m(0,w$L,"currentPlayTime",function(){return this._currentTime+this._playStart}),w$m(0,w$L,"cachePlayRate",function(){return this._cachePlayRate},function(w$v){this._cachePlayRate!==w$v&&(this._cachePlayRate=w$v,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[w$v,this._cacheFrameRate])))}),w$m(0,w$L,"cacheFrameRate",function(){return this._cacheFrameRate},function(w$v){this._cacheFrameRate!==w$v&&(this._cacheFrameRate=w$v,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,w$v])))}),w$m(0,w$L,"currentTime",null,function(w$v){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(w$v<this._playStart||w$v>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=w$G.loopCount;var w$l=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=w$v,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/w$l),0),this._currentFrameTime=this._currentKeyframeIndex*w$l}}),w$m(0,w$L,"paused",function(){return this._paused},function(w$v){(this._paused=w$v)&&this.event("paused")}),w$m(0,w$L,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),w$m(0,w$L,"destroyed",function(){return this._destroyed}),w$l}(),w$t=function(w$v){function w$l(){w$l.__super.call(this),w$d.isConchNode&&(this.drawSkin=function(w$v){w$v.transform||(w$v.transform=w$Mv.EMPTY),this._addCmd([w$v]),this.setSkinMesh&&this.setSkinMesh(w$v._ps,w$v.mVBData,w$v.mEleNum,0,w$v.mTexture,w$v.transform)})}return w$A(w$l,"laya.ani.GraphicsAni",w$Z),w$l.prototype.drawSkin=function(w$v){var w$l=[w$v];this._saveToCmd(w$d._context._drawSkin,w$l)},w$l.create=function(){return w$l._caches.pop()||new w$l},w$l.recycle=function(w$v){w$v.clear(),w$l._caches.push(w$v)},w$l._caches=[],w$l}(),w$a=function(w$v){function w$J(){this._aniMap={},this.unfixedLastAniIndex=-1,w$J.__super.call(this),this._anis=new Array}w$A(w$J,"laya.ani.AnimationTemplet",w$_);var w$l=w$J.prototype;return w$l.parse=function(w$v){var w$l=new w$Qv(w$v);this._aniVersion=w$l.readUTFString(),w$B.parse(this,w$l)},w$l._calculateKeyFrame=function(w$v,w$l,w$L){var w$A=w$v.keyFrame;w$A[w$l]=w$A[0];for(var w$x=0;w$x<w$l;w$x++){var w$m=w$A[w$x];w$m.nextData=0===w$m.duration?w$m.data:w$A[w$x+1].data}w$A.length--},w$l.onAsynLoaded=function(w$v,w$l,w$L){var w$A=new w$Qv(w$l);switch(this._aniVersion=w$A.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":w$X.parse(this,w$A);break;default:w$B.parse(this,w$A)}this._endLoaded()},w$l.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},w$l.getAnimationCount=function(){return this._anis.length},w$l.getAnimation=function(w$v){return this._anis[w$v]},w$l.getAniDuration=function(w$v){return this._anis[w$v].playTime},w$l.getNodes=function(w$v){return this._anis[w$v].nodes},w$l.getNodeIndexWithName=function(w$v,w$l){return this._anis[w$v].bone3DMap[w$l]},w$l.getNodeCount=function(w$v){return this._anis[w$v].nodes.length},w$l.getTotalkeyframesLength=function(w$v){return this._anis[w$v].totalKeyframeDatasLength},w$l.getPublicExtData=function(){return this._publicExtData},w$l.getAnimationDataWithCache=function(w$v,w$l,w$L,w$A){var w$x=w$l[w$L];if(w$x){var w$m=w$x[w$v];return w$m?w$m[w$A]:null}return null},w$l.setAnimationDataWithCache=function(w$v,w$l,w$L,w$A,w$x){var w$m=w$l[w$L]||(w$l[w$L]={});(w$m[w$v]||(w$m[w$v]=[]))[w$A]=w$x},w$l.getOriginalData=function(w$v,w$l,w$L,w$A,w$x){for(var w$m=this._anis[w$v].nodes,w$Z=0,w$O=0,w$e=w$m.length,w$$=0;w$O<w$e;w$O++){var w$_,w$o=w$m[w$O];w$_=w$o.keyFrame[w$L[w$O][w$A]],w$o.dataOffset=w$$;var w$K=w$x-w$_.startTime,w$r=w$o.lerpType;if(w$r)switch(w$r){case 0:case 1:for(w$Z=0;w$Z<w$o.keyframeWidth;)w$Z+=w$o.interpolationMethod[w$Z](w$o,w$Z,w$l,w$$+w$Z,w$_.data,w$K,null,w$_.duration,w$_.nextData);break;case 2:var w$G=w$_.interpolationData,w$c=w$G.length,w$d=0;for(w$Z=0;w$Z<w$c;){var w$C=w$G[w$Z];switch(w$C){case 6:case 7:w$Z+=w$J.interpolation[w$C](w$o,w$d,w$l,w$$+w$d,w$_.data,w$K,null,w$_.duration,w$_.nextData,w$G,w$Z+1);break;default:w$Z+=w$J.interpolation[w$C](w$o,w$d,w$l,w$$+w$d,w$_.data,w$K,null,w$_.duration,w$_.nextData)}w$d++}}else for(w$Z=0;w$Z<w$o.keyframeWidth;)w$Z+=w$o.interpolationMethod[w$Z](w$o,w$Z,w$l,w$$+w$Z,w$_.data,w$K,null,w$_.duration,w$_.nextData);w$$+=w$o.keyframeWidth}},w$l.getNodesCurrentFrameIndex=function(w$v,w$l){var w$L=this._anis[w$v].nodes;w$v!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(w$L.length),this.unfixedCurrentTimes=new Float32Array(w$L.length),this.unfixedLastAniIndex=w$v);for(var w$A=0,w$x=w$L.length;w$A<w$x;w$A++){var w$m=w$L[w$A];for(w$l<this.unfixedCurrentTimes[w$A]&&(this.unfixedCurrentFrameIndexes[w$A]=0),this.unfixedCurrentTimes[w$A]=w$l;this.unfixedCurrentFrameIndexes[w$A]<w$m.keyFrame.length&&!(w$m.keyFrame[this.unfixedCurrentFrameIndexes[w$A]].startTime>this.unfixedCurrentTimes[w$A]);)this.unfixedCurrentFrameIndexes[w$A]++;this.unfixedCurrentFrameIndexes[w$A]--}return this.unfixedCurrentFrameIndexes},w$l.getOriginalDataUnfixedRate=function(w$v,w$l,w$L){var w$A=this._anis[w$v].nodes;w$v!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(w$A.length),this.unfixedCurrentTimes=new Float32Array(w$A.length),this.unfixedKeyframes=w$c(w$A.length),this.unfixedLastAniIndex=w$v);for(var w$x=0,w$m=0,w$Z=w$A.length,w$O=0;w$m<w$Z;w$m++){var w$e=w$A[w$m];for(w$L<this.unfixedCurrentTimes[w$m]&&(this.unfixedCurrentFrameIndexes[w$m]=0),this.unfixedCurrentTimes[w$m]=w$L;this.unfixedCurrentFrameIndexes[w$m]<w$e.keyFrame.length&&!(w$e.keyFrame[this.unfixedCurrentFrameIndexes[w$m]].startTime>this.unfixedCurrentTimes[w$m]);)this.unfixedKeyframes[w$m]=w$e.keyFrame[this.unfixedCurrentFrameIndexes[w$m]],this.unfixedCurrentFrameIndexes[w$m]++;var w$$=this.unfixedKeyframes[w$m];w$e.dataOffset=w$O;var w$_=w$L-w$$.startTime;if(w$e.lerpType)switch(w$e.lerpType){case 0:case 1:for(w$x=0;w$x<w$e.keyframeWidth;)w$x+=w$e.interpolationMethod[w$x](w$e,w$x,w$l,w$O+w$x,w$$.data,w$_,null,w$$.duration,w$$.nextData);break;case 2:var w$o=w$$.interpolationData,w$K=w$o.length,w$r=0;for(w$x=0;w$x<w$K;){var w$G=w$o[w$x];switch(w$G){case 6:case 7:w$x+=w$J.interpolation[w$G](w$e,w$r,w$l,w$O+w$r,w$$.data,w$_,null,w$$.duration,w$$.nextData,w$o,w$x+1);break;default:w$x+=w$J.interpolation[w$G](w$e,w$r,w$l,w$O+w$r,w$$.data,w$_,null,w$$.duration,w$$.nextData)}w$r++}}else for(w$x=0;w$x<w$e.keyframeWidth;)w$x+=w$e.interpolationMethod[w$x](w$e,w$x,w$l,w$O+w$x,w$$.data,w$_,null,w$$.duration,w$$.nextData);w$O+=w$e.keyframeWidth}},w$J._LinearInterpolation_0=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$){var w$_=0===w$O?0:w$m/w$O;return w$L[w$A]=(1-w$_)*w$x[w$l]+w$_*w$e[w$l],1},w$J._QuaternionInterpolation_1=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$){var w$_=0===w$O?0:w$m/w$O;return w$K.slerpQuaternionArray(w$x,w$l,w$e,w$l,w$_,w$L,w$A),4},w$J._AngleInterpolation_2=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$){return 0},w$J._RadiansInterpolation_3=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$){return 0},w$J._Matrix4x4Interpolation_4=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$){for(var w$_=0;w$_<16;w$_++,w$l++)w$L[w$A+w$_]=w$x[w$l]+w$m*w$Z[w$l];return 16},w$J._NoInterpolation_5=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$){return w$L[w$A]=w$x[w$l],1},w$J._BezierInterpolation_6=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$,w$_){return void 0===w$_&&(w$_=0),w$L[w$A]=w$x[w$l]+(w$e[w$l]-w$x[w$l])*w$g.getBezierRate(w$m/w$O,w$$[w$_],w$$[w$_+1],w$$[w$_+2],w$$[w$_+3]),5},w$J._BezierInterpolation_7=function(w$v,w$l,w$L,w$A,w$x,w$m,w$Z,w$O,w$e,w$$,w$_){return void 0===w$_&&(w$_=0),w$L[w$A]=w$$[w$_+4]+w$$[w$_+5]*w$g.getBezierRate((.001*w$m+w$$[w$_+6])/w$$[w$_+7],w$$[w$_],w$$[w$_+1],w$$[w$_+2],w$$[w$_+3]),9},w$J.load=function(w$v){return w$xv.loader.create(w$v,null,null,w$J)},w$J.interpolation=[w$J._LinearInterpolation_0,w$J._QuaternionInterpolation_1,w$J._AngleInterpolation_2,w$J._RadiansInterpolation_3,w$J._Matrix4x4Interpolation_4,w$J._NoInterpolation_5,w$J._BezierInterpolation_6,w$J._BezierInterpolation_7],w$J}(),w$h=function(w$l){function w$L(w$v,w$l){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,w$L.__super.call(this),void 0===w$l&&(w$l=0),w$v&&this.init(w$v,w$l)}w$A(w$L,"laya.ani.bone.Skeleton",w$l);var w$v=w$L.prototype;return w$v.init=function(w$v,w$l){void 0===w$l&&(w$l=0);var w$L,w$A,w$x,w$m=0,w$Z=0;if(1==w$l)for(this._graphicsCache=[],w$m=0,w$Z=w$v.getAnimationCount();w$m<w$Z;w$m++)this._graphicsCache.push([]);if(this._yReverseMatrix=w$v.yReverseMatrix,this._aniMode=w$l,this._templet=w$v,this._player=new w$T,this._player.cacheFrameRate=w$v.rate,this._player.templet=w$v,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=w$v.mBoneArr,this._rootBone=w$v.mRootBone,this._aniSectionDic=w$v.aniSectionDic,0<w$v.ikArr.length)for(this._ikArr=[],w$m=0,w$Z=w$v.ikArr.length;w$m<w$Z;w$m++)this._ikArr.push(new w$J(w$v.ikArr[w$m],this._boneList));if(0<w$v.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),w$m=0,w$Z=w$v.pathArr.length;w$m<w$Z;w$m++)w$L=w$v.pathArr[w$m],w$A=new w$f(w$L,this._boneList),(w$x=this._boneSlotDic[w$L.name])&&((w$A=new w$f(w$L,this._boneList)).target=w$x),this._pathDic[w$L.name]=w$A;if(0<w$v.tfArr.length)for(this._tfArr=[],w$m=0,w$Z=w$v.tfArr.length;w$m<w$Z;w$m++)this._tfArr.push(new w$w(w$v.tfArr[w$m],this._boneList));if(0<w$v.skinDataArray.length){var w$O=this._templet.skinDataArray[this._skinIndex];this._skinName=w$O.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},w$v.load=function(w$v,w$l,w$L){},w$v._onLoaded=function(){},w$v._parseComplete=function(){var w$v=w$V.TEMPLET_DICTIONARY[this._aniPath];w$v&&(this.init(w$v,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},w$v._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},w$v._onPlay=function(){this.event("played")},w$v._onStop=function(){var w$v,w$l=this._templet.eventAniArr[this._aniClipIndex];if(w$l&&this._eventIndex<w$l.length)for(;this._eventIndex<w$l.length;this._eventIndex++)(w$v=w$l[this._eventIndex]).time>=this._player.playStart&&w$v.time<=this._player.playEnd&&this.event("label",w$v);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},w$v._onPause=function(){this.event("paused")},w$v._parseSrcBoneMatrix=function(){var w$v=0,w$l=0;for(w$l=this._templet.srcBoneMatrixArr.length,w$v=0;w$v<w$l;w$v++)this._boneMatrixArray.push(new w$Mv);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var w$L,w$A,w$x=this._templet.boneSlotArray;for(w$v=0,w$l=w$x.length;w$v<w$l;w$v++)w$L=w$x[w$v],null==(w$A=this._bindBoneBoneSlotDic[w$L.parent])&&(this._bindBoneBoneSlotDic[w$L.parent]=w$A=[]),this._boneSlotDic[w$L.name]=w$L=w$L.copy(),w$A.push(w$L),this._boneSlotArray.push(w$L)}},w$v._emitMissedEvents=function(w$v,w$l,w$L){void 0===w$L&&(w$L=0);var w$A=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(w$A){var w$x,w$m,w$Z=0;for(w$x=w$A.length,w$Z=w$L;w$Z<w$x;w$Z++)(w$m=w$A[w$Z]).time>=this._player.playStart&&w$m.time<=this._player.playEnd&&this.event("label",w$m)}},w$v._update=function(w$v){if(void 0===w$v&&(w$v=!0),!(this._pause||w$v&&this._indexControl)){var w$l=this.timer.currTimer,w$L=this._player.currentKeyframeIndex,w$A=w$l-this._lastTime;if(w$v?this._player._update(w$A):w$L=-1,this._lastTime=w$l,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<w$A&&this._clipIndex==w$L&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var w$x;this._lastUpdateAniClipIndex=this._aniClipIndex,w$L>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var w$m,w$Z=this._templet.eventAniArr[this._aniClipIndex];if(w$Z&&this._eventIndex<w$Z.length&&((w$x=w$Z[this._eventIndex]).time>=this._player.playStart&&w$x.time<=this._player.playEnd?this._player.currentPlayTime>=w$x.time&&(this.event("label",w$x),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(w$m=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=w$m&&(this.graphics=w$m));var w$O=0,w$e=0;for(w$e=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,w$e-1)&&0<w$e;)w$e--;if(w$e<this._clipIndex)for(w$O=w$e;w$O<this._clipIndex;w$O++)this._createGraphics(w$O)}else if(1==this._aniMode){if(w$m=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=w$m&&(this.graphics=w$m));for(w$e=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,w$e-1)&&0<w$e;)w$e--;if(w$e<this._clipIndex)for(w$O=w$e;w$O<this._clipIndex;w$O++)this._createGraphics(w$O)}this._createGraphics()}}},w$v._createGraphics=function(w$v){void 0===w$v&&(w$v=-1),-1==w$v&&(w$v=this._clipIndex);var w$l,w$L,w$A=w$v*this._player.cacheFrameRateInterval,w$x=this._templet.drawOrderAniArr[this._aniClipIndex];if(w$x&&0<w$x.length)for(this._drawOrderIndex=0,w$l=w$x[this._drawOrderIndex];w$A>=w$l.time&&(this._drawOrder=w$l.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=w$x.length));)w$l=w$x[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=w$t.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=w$t.create(),w$L=this.graphics;var w$m=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],w$v,w$A);var w$Z,w$O,w$e,w$$,w$_=this._aniSectionDic[this._aniClipIndex],w$o=0,w$K=0,w$r=0,w$G=0,w$c=0,w$d=this._templet.srcBoneMatrixArr.length;for(w$c=w$_[w$K=0];w$K<w$d;w$K++)w$$=this._boneList[w$K],w$e=this._templet.srcBoneMatrixArr[w$K],w$$.resultTransform.scX=w$e.scX*this._curOriginalData[w$o++],w$$.resultTransform.skX=w$e.skX+this._curOriginalData[w$o++],w$$.resultTransform.skY=w$e.skY+this._curOriginalData[w$o++],w$$.resultTransform.scY=w$e.scY*this._curOriginalData[w$o++],w$$.resultTransform.x=w$e.x+this._curOriginalData[w$o++],w$$.resultTransform.y=w$e.y+this._curOriginalData[w$o++],8===this._templet.tMatrixDataLen&&(w$$.resultTransform.skewX=w$e.skewX+this._curOriginalData[w$o++],w$$.resultTransform.skewY=w$e.skewY+this._curOriginalData[w$o++]);var w$C,w$J={},w$B={};for(w$c+=w$_[1];w$K<w$c;w$K++)w$J[(w$C=w$m[w$K]).name]=this._curOriginalData[w$o++],w$B[w$C.name]=this._curOriginalData[w$o++],this._curOriginalData[w$o++],this._curOriginalData[w$o++],this._curOriginalData[w$o++],this._curOriginalData[w$o++];var w$X,w$f,w$w={},w$H={};for(w$c+=w$_[2];w$K<w$c;w$K++)w$w[(w$C=w$m[w$K]).name]=this._curOriginalData[w$o++],w$H[w$C.name]=this._curOriginalData[w$o++],this._curOriginalData[w$o++],this._curOriginalData[w$o++],this._curOriginalData[w$o++],this._curOriginalData[w$o++];if(this._pathDic)for(w$c+=w$_[3];w$K<w$c;w$K++){if(w$C=w$m[w$K],w$X=this._pathDic[w$C.name])switch(new w$Qv(w$C.extenData).getByte()){case 1:w$X.position=this._curOriginalData[w$o++];break;case 2:w$X.spacing=this._curOriginalData[w$o++];break;case 3:w$X.rotateMix=this._curOriginalData[w$o++],w$X.translateMix=this._curOriginalData[w$o++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(w$Mv.TEMP.identity()),this._ikArr)for(w$K=0,w$c=this._ikArr.length;w$K<w$c;w$K++)w$f=this._ikArr[w$K],w$w.hasOwnProperty(w$f.name)&&(w$f.bendDirection=w$w[w$f.name]),w$H.hasOwnProperty(w$f.name)&&(w$f.mix=w$H[w$f.name]),w$f.apply();if(this._pathDic)for(var w$g in this._pathDic)(w$X=this._pathDic[w$g]).apply(this._boneList,w$L);if(this._tfArr)for(w$K=0,w$G=this._tfArr.length;w$K<w$G;w$K++)this._tfArr[w$K].apply();for(w$K=0,w$G=this._boneList.length;w$K<w$G;w$K++)if(w$$=this._boneList[w$K],w$O=this._bindBoneBoneSlotDic[w$$.name],w$$.resultMatrix.copyTo(this._boneMatrixArray[w$K]),w$O)for(w$r=0,w$c=w$O.length;w$r<w$c;w$r++)(w$Z=w$O[w$r])&&w$Z.setParentMatrix(w$$.resultMatrix);var w$T,w$h,w$V,w$k,w$Q={},w$M=this._templet.deformAniArr;if(w$M&&0<w$M.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,w$K=0,w$c=this._boneSlotArray.length;w$K<w$c;w$K++)(w$Z=this._boneSlotArray[w$K]).deformData=null;var w$P,w$I=w$M[this._aniClipIndex];for(w$P in w$T=w$I.default,this._setDeform(w$T,w$Q,this._boneSlotArray,w$A),w$I)"default"!=w$P&&w$P!=this._skinName&&(w$T=w$I[w$P],this._setDeform(w$T,w$Q,this._boneSlotArray,w$A));w$T=w$I[this._skinName],this._setDeform(w$T,w$Q,this._boneSlotArray,w$A)}if(this._drawOrder)for(w$K=0,w$c=this._drawOrder.length;w$K<w$c;w$K++)w$h=w$J[(w$Z=this._boneSlotArray[this._drawOrder[w$K]]).name],w$V=w$B[w$Z.name],isNaN(w$V)||(w$L.save(),w$L.alpha(w$V)),isNaN(w$h)||-2==w$h||(this._templet.attachmentNames?w$Z.showDisplayByName(this._templet.attachmentNames[w$h]):w$Z.showDisplayByIndex(w$h)),w$Q[this._drawOrder[w$K]]?(w$k=w$Q[this._drawOrder[w$K]],w$Z.currDisplayData&&w$k[w$Z.currDisplayData.attachmentName]?w$Z.deformData=w$k[w$Z.currDisplayData.attachmentName]:w$Z.deformData=null):w$Z.deformData=null,isNaN(w$V)?w$Z.draw(w$L,this._boneMatrixArray,2==this._aniMode):w$Z.draw(w$L,this._boneMatrixArray,2==this._aniMode,w$V),isNaN(w$V)||w$L.restore();else for(w$K=0,w$c=this._boneSlotArray.length;w$K<w$c;w$K++)w$h=w$J[(w$Z=this._boneSlotArray[w$K]).name],w$V=w$B[w$Z.name],isNaN(w$V)||(w$L.save(),w$L.alpha(w$V)),isNaN(w$h)||-2==w$h||(this._templet.attachmentNames?w$Z.showDisplayByName(this._templet.attachmentNames[w$h]):w$Z.showDisplayByIndex(w$h)),w$Q[w$K]?(w$k=w$Q[w$K],w$Z.currDisplayData&&w$k[w$Z.currDisplayData.attachmentName]?w$Z.deformData=w$k[w$Z.currDisplayData.attachmentName]:w$Z.deformData=null):w$Z.deformData=null,isNaN(w$V)?w$Z.draw(w$L,this._boneMatrixArray,2==this._aniMode):w$Z.draw(w$L,this._boneMatrixArray,2==this._aniMode,w$V),isNaN(w$V)||w$L.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,w$v,w$L):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,w$v,w$L)},w$v._setDeform=function(w$v,w$l,w$L,w$A){if(w$v){var w$x,w$m,w$Z,w$O=0,w$e=0,w$$=0;if(w$v)for(w$O=0,w$e=w$v.deformSlotDataList.length;w$O<w$e;w$O++)for(w$x=w$v.deformSlotDataList[w$O],w$$=0;w$$<w$x.deformSlotDisplayList.length;w$$++)w$Z=w$L[(w$m=w$x.deformSlotDisplayList[w$$]).slotIndex],w$m.apply(w$A,w$Z),w$l[w$m.slotIndex]||(w$l[w$m.slotIndex]={}),w$l[w$m.slotIndex][w$m.attachment]=w$m.deformData}},w$v.getAnimNum=function(){return this._templet.getAnimationCount()},w$v.getAniNameByIndex=function(w$v){return this._templet.getAniNameByIndex(w$v)},w$v.getSlotByName=function(w$v){return this._boneSlotDic[w$v]},w$v.showSkinByName=function(w$v,w$l){void 0===w$l&&(w$l=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(w$v),w$l)},w$v.showSkinByIndex=function(w$v,w$l){void 0===w$l&&(w$l=!0);for(var w$L=0;w$L<this._boneSlotArray.length;w$L++)this._boneSlotArray[w$L].showSlotData(null,w$l);if(this._templet.showSkinByIndex(this._boneSlotDic,w$v,w$l)){var w$A=this._templet.skinDataArray[w$v];this._skinIndex=w$v,this._skinName=w$A.name}this._clearCache()},w$v.showSlotSkinByIndex=function(w$v,w$l){if(0!=this._aniMode){var w$L=this.getSlotByName(w$v);w$L&&w$L.showDisplayByIndex(w$l),this._clearCache()}},w$v.showSlotSkinByName=function(w$v,w$l){if(0!=this._aniMode){var w$L=this.getSlotByName(w$v);w$L&&w$L.showDisplayByName(w$l),this._clearCache()}},w$v.replaceSlotSkinName=function(w$v,w$l,w$L){if(0!=this._aniMode){var w$A=this.getSlotByName(w$v);w$A&&w$A.replaceDisplayByName(w$l,w$L),this._clearCache()}},w$v.replaceSlotSkinByIndex=function(w$v,w$l,w$L){if(0!=this._aniMode){var w$A=this.getSlotByName(w$v);w$A&&w$A.replaceDisplayByIndex(w$l,w$L),this._clearCache()}},w$v.setSlotSkin=function(w$v,w$l){if(0!=this._aniMode){var w$L=this.getSlotByName(w$v);w$L&&w$L.replaceSkin(w$l),this._clearCache()}},w$v._clearCache=function(){if(1==this._aniMode)for(var w$v=0,w$l=this._graphicsCache.length;w$v<w$l;w$v++){for(var w$L=0,w$A=this._graphicsCache[w$v].length;w$L<w$A;w$L++){var w$x=this._graphicsCache[w$v][w$L];w$x!=this.graphics&&w$t.recycle(w$x)}this._graphicsCache[w$v].length=0}},w$v.play=function(w$v,w$l,w$L,w$A,w$x,w$m){void 0===w$L&&(w$L=!0),void 0===w$A&&(w$A=0),void 0===w$x&&(w$x=0),void 0===w$m&&(w$m=!0),this._indexControl=!1;var w$Z=-1,w$O=NaN;if(w$O=w$l?2147483647:0,"string"==typeof w$v)for(var w$e=0,w$$=this._templet.getAnimationCount();w$e<w$$;w$e++){var w$_=this._templet.getAnimation(w$e);if(w$_&&w$v==w$_.name){w$Z=w$e;break}}else w$Z=w$v;-1<w$Z&&w$Z<this.getAnimNum()&&(this._aniClipIndex=w$Z,(w$L||this._pause||this._currAniIndex!=w$Z)&&(this._currAniIndex=w$Z,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(w$Z)),this._drawOrder=null,this._eventIndex=0,this._player.play(w$Z,this._player.playbackRate,w$O,w$A,w$x),w$m&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=w$o.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},w$v.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},w$v.playbackRate=function(w$v){this._player&&(this._player.playbackRate=w$v)},w$v.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},w$v.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=w$o.now(),this.timer.frameLoop(1,this,this._update,null,!0))},w$v._getGrahicsDataWithCache=function(w$v,w$l){return this._graphicsCache[w$v][w$l]},w$v._setGrahicsDataWithCache=function(w$v,w$l,w$L){this._graphicsCache[w$v][w$l]=w$L},w$v.destroy=function(w$v){void 0===w$v&&(w$v=!0),w$l.prototype.destroy.call(this,w$v),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},w$m(0,w$v,"url",function(){return this._aniPath},function(w$v){this.load(w$v)}),w$m(0,w$v,"index",function(){return this._index},function(w$v){this.player&&(this._index=w$v,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),w$m(0,w$v,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),w$m(0,w$v,"templet",function(){return this._templet}),w$m(0,w$v,"player",function(){return this._player}),w$L.useSimpleMeshInCanvas=!1,w$L}(w$mv),w$V=function(w$l){function w$x(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,w$x.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}w$A(w$x,"laya.ani.bone.Templet",w$l);var w$v=w$x.prototype;return w$v.getLoadList=function(){return this._loadList},w$v.loadAni=function(w$v){this._skBufferUrl=w$v,w$xv.loader.load(w$v,w$e.create(this,this.onComplete),null,"arraybuffer")},w$v.onComplete=function(w$v){if(this._isDestroyed)this.destroy();else{var w$l=w$$.getRes(this._skBufferUrl);w$l?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,w$l)):this.event("error","load failed:"+this._skBufferUrl)}},w$v.parseData=function(w$v,w$l,w$L){void 0===w$L&&(w$L=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=w$v,this._mainTexture&&w$d.isWebGL&&w$v.bitmap&&(w$v.bitmap.enableMerageInAtlas=!1),this._rate=w$L,this.parse(w$l)},w$v.buildArmature=function(w$v){return void 0===w$v&&(w$v=0),new w$h(this,w$v)},w$v.parse=function(w$v){w$l.prototype.parse.call(this,w$v),this._endLoaded(),this._aniVersion!=w$x.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+w$x.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},w$v._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var w$v=0;this._loadList=[];var w$l,w$L=new w$Qv(this.getPublicExtData()),w$A=0,w$x=0,w$m=0,w$Z=w$L.getInt32(),w$O=w$L.readUTFString(),w$e=w$O.split("\n");for(w$v=0;w$v<w$Z;w$v++)w$l=this._path+w$e[2*w$v],w$O=w$e[2*w$v+1],w$L.getFloat32(),w$L.getFloat32(),w$A=w$L.getFloat32(),w$x=w$L.getFloat32(),w$m=w$L.getFloat32(),isNaN(w$m)?0:w$m,w$m=w$L.getFloat32(),isNaN(w$m)?0:w$m,w$m=w$L.getFloat32(),isNaN(w$m)?w$A:w$m,w$m=w$L.getFloat32(),isNaN(w$m)?w$x:w$m,-1==this._loadList.indexOf(w$l)&&this._loadList.push(w$l);this.event("inited",this)}},w$v._textureComplete=function(){for(var w$v,w$l,w$L=0,w$A=this._loadList.length;w$L<w$A;w$L++)w$l=this._loadList[w$L],w$v=this._textureDic[w$l]=w$$.getRes(w$l),w$d.isWebGL&&w$v&&w$v.bitmap&&(w$v.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},w$v._parsePublicExtData=function(){var w$v=0,w$l=0,w$L=0,w$A=0,w$x=0;for(w$v=0,w$x=this.getAnimationCount();w$v<w$x;w$v++)this._graphicsCache.push([]);var w$m;w$m="Dragon"!=this._aniClassName;var w$Z,w$O,w$e=new w$Qv(this.getPublicExtData()),w$$=0,w$_=0,w$o=0,w$K=0,w$r=0,w$G=0,w$c=0,w$d=0,w$C=0,w$J=w$e.getInt32(),w$B=w$e.readUTFString(),w$X=w$B.split("\n");for(w$v=0;w$v<w$J;w$v++){if(w$Z=this._mainTexture,w$O=this._path+w$X[2*w$v],w$B=w$X[2*w$v+1],null==this._mainTexture&&(w$Z=this._textureDic[w$O]),!w$Z)return this.event("error",this),void(this.isParseFail=!0);w$$=w$e.getFloat32(),w$_=w$e.getFloat32(),w$o=w$e.getFloat32(),w$K=w$e.getFloat32(),w$C=w$e.getFloat32(),w$r=isNaN(w$C)?0:w$C,w$C=w$e.getFloat32(),w$G=isNaN(w$C)?0:w$C,w$C=w$e.getFloat32(),w$c=isNaN(w$C)?w$o:w$C,w$C=w$e.getFloat32(),w$d=isNaN(w$C)?w$K:w$C,this.subTextureDic[w$B]=w$Pv.create(w$Z,w$$,w$_,w$o,w$K,-w$r,-w$G,w$c,w$d),w$Z.alphaTexture&&(this.subTextureDic[w$B].alphaTexture=w$Pv.create(w$Z.alphaTexture,w$$,w$_,w$o,w$K,-w$r,-w$G,w$c,w$d))}this._mainTexture=w$Z;var w$f,w$w,w$H,w$g,w$T,w$h=w$e.getUint16();for(w$v=0;w$v<w$h;w$v++)(w$f=[]).push(w$e.getUint16()),w$f.push(w$e.getUint16()),w$f.push(w$e.getUint16()),w$f.push(w$e.getUint16()),this.aniSectionDic[w$v]=w$f;var w$V,w$k=w$e.getInt16(),w$Q={};for(w$v=0;w$v<w$k;w$v++)w$w=new w$Iv,0==w$v?w$V=w$w:w$w.root=w$V,w$w.d=w$m?-1:1,w$g=w$e.readUTFString(),w$T=w$e.readUTFString(),w$w.length=w$e.getFloat32(),1==w$e.getByte()&&(w$w.inheritRotation=!1),1==w$e.getByte()&&(w$w.inheritScale=!1),w$w.name=w$g,w$T&&((w$H=w$Q[w$T])?w$H.addChild(w$w):this.mRootBone=w$w),w$Q[w$g]=w$w,this.mBoneArr.push(w$w);this.tMatrixDataLen=w$e.getUint16();var w$M,w$P,w$I=w$e.getUint16(),w$t=Math.floor(w$I/this.tMatrixDataLen),w$a=this.srcBoneMatrixArr;for(w$v=0;w$v<w$t;w$v++)(w$M=new w$Sv).scX=w$e.getFloat32(),w$M.skX=w$e.getFloat32(),w$M.skY=w$e.getFloat32(),w$M.scY=w$e.getFloat32(),w$M.x=w$e.getFloat32(),w$M.y=w$e.getFloat32(),8===this.tMatrixDataLen&&(w$M.skewX=w$e.getFloat32(),w$M.skewY=w$e.getFloat32()),w$a.push(w$M),(w$w=this.mBoneArr[w$v]).transform=w$M;var w$q,w$u=w$e.getUint16(),w$R=0;for(w$v=0;w$v<w$u;w$v++){for(w$P=new w$bv,w$R=w$e.getUint16(),w$l=0;w$l<w$R;w$l++)w$P.boneNames.push(w$e.readUTFString()),w$P.boneIndexs.push(w$e.getInt16());w$P.name=w$e.readUTFString(),w$P.targetBoneName=w$e.readUTFString(),w$P.targetBoneIndex=w$e.getInt16(),w$P.bendDirection=w$e.getFloat32(),w$P.mix=w$e.getFloat32(),w$P.isSpine=w$m,this.ikArr.push(w$P)}var w$N,w$b=w$e.getUint16(),w$j=0;for(w$v=0;w$v<w$b;w$v++){for(w$q=new w$Dv,w$j=w$e.getUint16(),w$l=0;w$l<w$j;w$l++)w$q.boneIndexs.push(w$e.getInt16());w$q.name=w$e.getUTFString(),w$q.targetIndex=w$e.getInt16(),w$q.rotateMix=w$e.getFloat32(),w$q.translateMix=w$e.getFloat32(),w$q.scaleMix=w$e.getFloat32(),w$q.shearMix=w$e.getFloat32(),w$q.offsetRotation=w$e.getFloat32(),w$q.offsetX=w$e.getFloat32(),w$q.offsetY=w$e.getFloat32(),w$q.offsetScaleX=w$e.getFloat32(),w$q.offsetScaleY=w$e.getFloat32(),w$q.offsetShearY=w$e.getFloat32(),this.tfArr.push(w$q)}var w$F=w$e.getUint16(),w$p=0;for(w$v=0;w$v<w$F;w$v++){for((w$N=new w$jv).name=w$e.readUTFString(),w$p=w$e.getUint16(),w$l=0;w$l<w$p;w$l++)w$N.bones.push(w$e.getInt16());w$N.target=w$e.readUTFString(),w$N.positionMode=w$e.readUTFString(),w$N.spacingMode=w$e.readUTFString(),w$N.rotateMode=w$e.readUTFString(),w$N.offsetRotation=w$e.getFloat32(),w$N.position=w$e.getFloat32(),w$N.spacing=w$e.getFloat32(),w$N.rotateMix=w$e.getFloat32(),w$N.translateMix=w$e.getFloat32(),this.pathArr.push(w$N)}var w$Y,w$D,w$S,w$y,w$W,w$E=0,w$s=0,w$i=0,w$n=NaN,w$U=0,w$z=w$e.getInt16();for(w$v=0;w$v<w$z;w$v++){var w$vv=w$e.getUint8(),w$lv={};this.deformAniArr.push(w$lv);for(var w$Lv=0;w$Lv<w$vv;w$Lv++)for((w$Y=new w$av).skinName=w$e.getUTFString(),w$lv[w$Y.skinName]=w$Y,w$E=w$e.getInt16(),w$l=0;w$l<w$E;w$l++)for(w$D=new w$qv,w$Y.deformSlotDataList.push(w$D),w$s=w$e.getInt16(),w$L=0;w$L<w$s;w$L++)for(w$S=new w$uv,w$D.deformSlotDisplayList.push(w$S),w$S.slotIndex=w$e.getInt16(),w$S.attachment=w$e.getUTFString(),w$i=w$e.getInt16(),w$A=0;w$A<w$i;w$A++)for(1==w$e.getByte()?w$S.tweenKeyList.push(!0):w$S.tweenKeyList.push(!1),w$n=w$e.getFloat32(),w$S.timeList.push(w$n),w$y=[],w$S.vectices.push(w$y),w$U=w$e.getInt16(),w$x=0;w$x<w$U;w$x++)w$y.push(w$e.getFloat32())}var w$Av,w$xv,w$mv=w$e.getInt16(),w$Zv=0,w$Ov=0;for(w$v=0;w$v<w$mv;w$v++){for(w$Zv=w$e.getInt16(),w$W=[],w$l=0;w$l<w$Zv;w$l++){for((w$Av=new w$Rv).time=w$e.getFloat32(),w$Ov=w$e.getInt16(),w$L=0;w$L<w$Ov;w$L++)w$Av.drawOrder.push(w$e.getInt16());w$W.push(w$Av)}this.drawOrderAniArr.push(w$W)}var w$ev,w$$v=w$e.getInt16(),w$_v=0;for(w$v=0;w$v<w$$v;w$v++){for(w$_v=w$e.getInt16(),w$xv=[],w$l=0;w$l<w$_v;w$l++)(w$ev=new w$Nv).name=w$e.getUTFString(),w$ev.intValue=w$e.getInt32(),w$ev.floatValue=w$e.getFloat32(),w$ev.stringValue=w$e.getUTFString(),w$ev.time=w$e.getFloat32(),w$xv.push(w$ev);this.eventAniArr.push(w$xv)}var w$ov=w$e.getInt16();if(0<w$ov)for(this.attachmentNames=[],w$v=0;w$v<w$ov;w$v++)this.attachmentNames.push(w$e.getUTFString());var w$Kv,w$rv,w$Gv=w$e.getInt16();for(w$v=0;w$v<w$Gv;w$v++)(w$Kv=new w$tv).name=w$e.readUTFString(),w$Kv.parent=w$e.readUTFString(),w$Kv.attachmentName=w$e.readUTFString(),w$Kv.srcDisplayIndex=w$Kv.displayIndex=w$e.getInt16(),(w$Kv.templet=this).boneSlotDic[w$Kv.name]=w$Kv,null==(w$rv=this.bindBoneBoneSlotDic[w$Kv.parent])&&(this.bindBoneBoneSlotDic[w$Kv.parent]=w$rv=[]),w$rv.push(w$Kv),this.boneSlotArray.push(w$Kv);var w$cv,w$dv,w$Cv,w$Jv=w$e.readUTFString().split("\n"),w$Bv=0,w$Xv=w$e.getUint8(),w$fv=0,w$wv=0,w$Hv=0,w$gv=0,w$Tv=0,w$hv=0,w$Vv=0;for(w$v=0;w$v<w$Xv;w$v++){for((w$cv=new w$Fv).name=w$Jv[w$Bv++],w$fv=w$e.getUint8(),w$l=0;w$l<w$fv;w$l++){for((w$dv=new w$Yv).name=w$Jv[w$Bv++],w$Kv=this.boneSlotDic[w$dv.name],w$wv=w$e.getUint8(),w$L=0;w$L<w$wv;w$L++){if(w$Cv=new w$pv,this.skinSlotDisplayDataArr.push(w$Cv),w$Cv.name=w$Jv[w$Bv++],w$Cv.attachmentName=w$Jv[w$Bv++],w$Cv.transform=new w$Sv,w$Cv.transform.scX=w$e.getFloat32(),w$Cv.transform.skX=w$e.getFloat32(),w$Cv.transform.skY=w$e.getFloat32(),w$Cv.transform.scY=w$e.getFloat32(),w$Cv.transform.x=w$e.getFloat32(),w$Cv.transform.y=w$e.getFloat32(),w$dv.displayArr.push(w$Cv),w$Cv.width=w$e.getFloat32(),w$Cv.height=w$e.getFloat32(),w$Cv.type=w$e.getUint8(),w$Cv.verLen=w$e.getUint16(),0<(w$k=w$e.getUint16()))for(w$Cv.bones=[],w$A=0;w$A<w$k;w$A++){var w$kv=w$e.getUint16();w$Cv.bones.push(w$kv)}if(0<(w$Hv=w$e.getUint16()))for(w$Cv.uvs=[],w$A=0;w$A<w$Hv;w$A++)w$Cv.uvs.push(w$e.getFloat32());if(0<(w$gv=w$e.getUint16()))for(w$Cv.weights=[],w$A=0;w$A<w$gv;w$A++)w$Cv.weights.push(w$e.getFloat32());if(0<(w$Tv=w$e.getUint16()))for(w$Cv.triangles=[],w$A=0;w$A<w$Tv;w$A++)w$Cv.triangles.push(w$e.getUint16());if(0<(w$hv=w$e.getUint16()))for(w$Cv.vertices=[],w$A=0;w$A<w$hv;w$A++)w$Cv.vertices.push(w$e.getFloat32());if(0<(w$Vv=w$e.getUint16()))for(w$Cv.lengths=[],w$A=0;w$A<w$Vv;w$A++)w$Cv.lengths.push(w$e.getFloat32())}w$cv.slotArr.push(w$dv)}this.skinDic[w$cv.name]=w$cv,this.skinDataArray.push(w$cv)}1==w$e.getUint8()?(this.yReverseMatrix=new w$Mv(1,0,0,-1,0,0),w$V&&w$V.setTempMatrix(this.yReverseMatrix)):w$V&&w$V.setTempMatrix(new w$Mv),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},w$v.getTexture=function(w$v){var w$l=this.subTextureDic[w$v];return w$l||(w$l=this.subTextureDic[w$v.substr(0,w$v.length-1)]),null==w$l?this._mainTexture:w$l},w$v.showSkinByIndex=function(w$v,w$l,w$L){if(void 0===w$L&&(w$L=!0),w$l<0&&w$l>=this.skinDataArray.length)return!1;var w$A,w$x,w$m=0,w$Z=0,w$O=this.skinDataArray[w$l];if(w$O){for(w$m=0,w$Z=w$O.slotArr.length;w$m<w$Z;w$m++)(w$x=w$O.slotArr[w$m])&&(w$A=w$v[w$x.name])&&(w$A.showSlotData(w$x,w$L),w$L&&"undefined"!=w$A.attachmentName&&"null"!=w$A.attachmentName?w$A.showDisplayByName(w$A.attachmentName):w$A.showDisplayByIndex(w$A.displayIndex));return!0}return!1},w$v.getSkinIndexByName=function(w$v){for(var w$l=0,w$L=this.skinDataArray.length;w$l<w$L;w$l++)if(this.skinDataArray[w$l].name==w$v)return w$l;return-1},w$v.getGrahicsDataWithCache=function(w$v,w$l){return this._graphicsCache[w$v][w$l]},w$v.setGrahicsDataWithCache=function(w$v,w$l,w$L){this._graphicsCache[w$v][w$l]=w$L},w$v.destroy=function(){var w$v;for(var w$l in this._isDestroyed=!0,this.subTextureDic)(w$v=this.subTextureDic[w$l])&&w$v.destroy();for(w$l in this._textureDic)(w$v=this._textureDic[w$l])&&w$v.destroy();for(var w$L=0,w$A=this.skinSlotDisplayDataArr.length;w$L<w$A;w$L++)this.skinSlotDisplayDataArr[w$L].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete w$x.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},w$v.getAniNameByIndex=function(w$v){var w$l=this.getAnimation(w$v);return w$l?w$l.name:null},w$m(0,w$v,"rate",function(){return this._rate},function(w$v){this._rate=w$v}),w$x.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",w$x.TEMPLET_DICTIONARY=null,w$x}(w$a)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(w$v,w$l){"use strict";for(var w$L in Object.defineProperty(w$l,"__esModule",{value:!0}),Laya){var w$A=Laya[w$L];w$A&&w$A.__isclass&&(w$l[w$L]=w$A)}});