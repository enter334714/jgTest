"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),_common=require("./common"),_common2=_interopRequireDefault(_common),_baseparameter=require("./baseparameter"),_baseparameter2=_interopRequireDefault(_baseparameter);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var domain="analytics.52xiyou.com",protocol="https",ReportAnalytics=function(){function e(){_classCallCheck(this,e),this.baseParams=new _baseparameter2.default}return _createClass(e,[{key:"sendEvent",value:function(e,t){if(255<=e.length||255<=t.length||255<=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:"").length)return!1;this.send({ic:"TrackEvent",cat:e,act:t})}},{key:"send",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"GET",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"/mo.json";if(!(e=e||{}).ic||""==e.ic)return"";e._t=e._t||Date.now(),wx.request({url:protocol+"://"+domain+r,method:t,data:e,dataType:"json",success:function(e,t,r){_common2.default.xylog("RequestSuccess",e,t,r)},fail:function(e){_common2.default.xylog("RequestFail",e.errMsg)},complete:function(){}})}},{key:"parseQueryString",value:function(e){var t={};if(0<e.length){e="?"===e.charAt(0)?e.substring(1):e;if(0<e.length)for(var r=e.split("&"),n=0;n<r.length;n++)if(0<r[n].length){var a=r[n].split("=");try{var o=decodeURIComponent(a[0]),u=1<a.length?decodeURIComponent(a[1]):"";1<a.length&&(t[o]=u)}catch(e){}}}return t}},{key:"unParseQueryString",value:function(e){var t,r,n=[];for(t in e)e.hasOwnProperty&&!e.hasOwnProperty(t)||(r=e[t],n.push(encodeURIComponent(t)+"="+encodeURIComponent(r.slice(0,200))));var a=n.join("&");return 0<a.length?"?"+a:"?"}},{key:"getQueryString",value:function(e){e=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(e);return null!=e?unescape(e[2]):null}},{key:"parseUrl",value:function(e){var t=document.createElement("a");return t.href=e,""===t.host&&(t.href=t.href),{hash:t.hash,host:t.host,hostname:t.hostname,pathname:t.pathname,protocol:t.protocol,query:this.parseQueryString(t.search)}}},{key:"unParseUrl",value:function(e){return(e.protocol||"")+"//"+(e.host||"")+(e.pathname||"")+this.unParseQueryString(e.query)+(e.hash||"")}},{key:"isString",value:function(e){return"[object String]"===Object.prototype.toString.call(e)}},{key:"isArray",value:function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{key:"parseString",value:function(e){return e.replace(/(^\s*)|(\s*$)/g,"").toLowerCase()}},{key:"parseArray",value:function(e,t){for(var r=[],n=0;_val=e[n];n++)r.push(this.parseString(_val+""));return r.join(t||"&")}}]),e}();exports.default=ReportAnalytics;