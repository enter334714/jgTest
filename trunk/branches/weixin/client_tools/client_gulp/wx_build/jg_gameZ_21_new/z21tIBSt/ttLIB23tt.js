var Laya=window.Laya=function(T$o,T$L){var T$V={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(T$L,T$s){return 1==arguments.length?T$V.__presubstr.call(this,T$L):T$V.__presubstr.call(this,T$L,0<T$s?T$s:this.length+T$s);},__init:function(T$L){T$L.forEach(function(T$L){T$L.__init$&&T$L.__init$();});},__isClass:function(T$L){return T$L&&(T$L.__isclass||T$L==Object||T$L==String||T$L==Array);},__newvec:function(T$L,T$s){var T$m=[];T$m.length=T$L;for(var T$x=0;T$x<T$L;T$x++)T$m[T$x]=T$s;return T$m;},__extend:function(T$L,T$s){for(var T$m in T$s)if(T$s.hasOwnProperty(T$m)){var T$x=Object.getOwnPropertyDescriptor(T$s,T$m),T$w=T$x.get,T$O=T$x.set;T$w||T$O?T$w&&T$O?Object.defineProperty(T$L,T$m,T$x):(T$w&&Object.defineProperty(T$L,T$m,T$w),T$O&&Object.defineProperty(T$L,T$m,T$O)):T$L[T$m]=T$s[T$m];}function T$v(){T$V.un(this,"constructor",T$L);}T$v.prototype=T$s.prototype,T$L.prototype=new T$v(),T$V.un(T$L.prototype,"__imps",T$V.__copy({},T$s.prototype.__imps));},__copy:function(T$L,T$s){if(!T$s)return null;for(var T$m in T$L=T$L||{},T$s)T$L[T$m]=T$s[T$m];return T$L;},__package:function(T$L,T$s){if(!T$V.__packages[T$L]){T$V.__packages[T$L]=!0;var T$m=T$o,T$x=T$L.split(".");if(1<T$x.length)for(var T$w=0,T$O=T$x.length-1;T$w<T$O;T$w++){var T$v=T$m[T$x[T$w]];T$m=T$v||(T$m[T$x[T$w]]={});}T$m[T$x[T$x.length-1]]||(T$m[T$x[T$x.length-1]]=T$s||{});}},__hasOwnProperty:function(T$L,T$s){return T$s=T$s||this,Object.hasOwnProperty.call(T$s,T$L)||function T$L(T$s,T$m){if(Object.hasOwnProperty.call(T$m.prototype,T$s))return!0;var T$x=T$m.prototype.__super;return null==T$x?null:T$L(T$s,T$x);}(T$L,T$s.__class);},__typeof:function(T$L,T$s){if(!T$L||!T$s)return!1;if(T$s===String)return"string"==typeof T$L;if(T$s===Number)return"number"==typeof T$L;if(T$s.__interface__)T$s=T$s.__interface__;else if("string"!=typeof T$s)return T$L instanceof T$s;return T$L.__imps&&T$L.__imps[T$s]||T$L.__class==T$s;},__as:function(T$L,T$s){return this.__typeof(T$L,T$s)?T$L:null;},__int:function(T$L){return T$L?parseInt(T$L):0;},interface:function(T$L,T$s){T$V.__package(T$L,{});var T$m=T$V.__internals,T$x=T$m[T$L]=T$m[T$L]||{self:T$L};if(T$s){var T$w=T$s.split(",");T$x.extend=[];for(var T$O=0;T$O<T$w.length;T$O++){var T$v=T$w[T$O];T$m[T$v]=T$m[T$v]||{self:T$v},T$x.extend.push(T$m[T$v]);}}var T$y=T$o,T$F=T$L.split(".");for(T$O=0;T$O<T$F.length-1;T$O++)T$y=T$y[T$F[T$O]];T$y[T$F[T$F.length-1]]={__interface__:T$L};},class:function(T$L,T$s,T$m,T$x){if(T$m&&T$V.__extend(T$L,T$m),T$s)if(T$V.__package(T$s,T$L),T$V.__classmap[T$s]=T$L,0<T$s.indexOf(".")){if(0==T$s.indexOf("laya.")){var T$w=T$s.split(".");T$x=T$x||T$w[T$w.length-1],T$V[T$x]&&console.log("Warning!,this class["+T$x+"] already exist:",T$V[T$x]),T$V[T$x]=T$L;}}else"Main"==T$s?T$o.Main=T$L:"MainWX"==T$s?T$o.MainWX=T$L:(T$V[T$s]&&console.log("Error!,this class["+T$s+"] already exist:",T$V[T$s]),T$V[T$s]=T$L);var T$O=T$V.un,T$v=T$L.prototype;T$O(T$v,"hasOwnProperty",T$V.__hasOwnProperty),T$O(T$v,"__class",T$L),T$O(T$v,"__super",T$m),T$O(T$v,"__className",T$s),T$O(T$L,"__super",T$m),T$O(T$L,"__className",T$s),T$O(T$L,"__isclass",!0),T$O(T$L,"super",function(T$L){this.__super.call(T$L);});},imps:function(T$L,T$s){if(!T$s)return null;var T$w=T$L.__imps||T$V.un(T$L,"__imps",{});function T$O(T$L){var T$s,T$m;if((T$s=T$V.__internals[T$L])&&(T$w[T$L]=!0,T$m=T$s.extend))for(var T$x=0;T$x<T$m.length;T$x++)T$O(T$m[T$x].self);}for(var T$m in T$s)T$O(T$m);},superSet:function(T$L,T$s,T$m,T$x){var T$w=T$L.prototype["_$set_"+T$m];T$w&&T$w.call(T$s,T$x);},superGet:function(T$L,T$s,T$m){var T$x=T$L.prototype["_$get_"+T$m];return T$x?T$x.call(T$s):null;},getset:function(T$L,T$s,T$m,T$x,T$w){T$L?(T$x&&(T$s["_$GET_"+T$m]=T$x),T$w&&(T$s["_$SET_"+T$m]=T$w)):(T$x&&T$V.un(T$s,"_$get_"+T$m,T$x),T$w&&T$V.un(T$s,"_$set_"+T$m,T$w)),T$x&&T$w?Object.defineProperty(T$s,T$m,{get:T$x,set:T$w,enumerable:!1,configurable:!0}):(T$x&&Object.defineProperty(T$s,T$m,{get:T$x,enumerable:!1,configurable:!0}),T$w&&Object.defineProperty(T$s,T$m,{set:T$w,enumerable:!1,configurable:!0}));},static:function(T$m,T$x){for(var T$w=0,T$L=T$x.length;T$w<T$L;T$w+=2)if("length"==T$x[T$w])T$m.length=T$x[T$w+1].call(T$m);else{function T$s(){var T$s=T$x[T$w],T$L=T$x[T$w+1];Object.defineProperty(T$m,T$s,{get:function(){return delete this[T$s],this[T$s]=T$L.call(this);},set:function(T$L){delete this[T$s],this[T$s]=T$L;},enumerable:!0,configurable:!0});}T$s();}},un:function(T$L,T$s,T$m){return T$m||(T$m=T$L[T$s]),T$V.__propun.value=T$m,Object.defineProperty(T$L,T$s,T$V.__propun),T$m;},uns:function(T$s,T$L){T$L.forEach(function(T$L){T$V.un(T$s,T$L);});}};return T$o.console=T$o.console||{log:function(){}},T$o.trace=T$o.console.log,Error.prototype.throwError=function(){throw arguments;},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),T$V;}(window,document);!function(T$L,T$s,T$m){T$m.un,T$m.uns,T$m.static,T$m.class,T$m.getset,T$m.__newvec;}(window,document,Laya),function(T$v,T$s,T$a){T$a.un,T$a.uns;var T$F=T$a.static,T$V=T$a.class,T$u=T$a.getset;T$a.__newvec;T$a.interface("laya.runtime.IMarket"),T$a.interface("laya.filters.IFilter"),T$a.interface("laya.display.ILayout"),T$a.interface("laya.resource.IDispose"),T$a.interface("laya.runtime.IPlatform"),T$a.interface("laya.resource.IDestroy"),T$a.interface("laya.runtime.IConchNode"),T$a.interface("laya.filters.IFilterAction"),T$a.interface("laya.runtime.ICPlatformClass"),T$a.interface("laya.resource.ICreateResource"),T$a.interface("laya.runtime.IConchRenderObject"),T$a.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var T$U=function(){function T$O(){}return T$V(T$O,"laya.utils.RunDriver"),T$O.FILTER_ACTIONS=[],T$O.pixelRatio=-1,T$O._charSizeTestDiv=null,T$O.now=function(){return Date.now();},T$O.getWindow=function(){return T$v;},T$O.getPixelRatio=function(){if(T$O.pixelRatio<0){var T$L=T$Z.context,T$s=T$L.backingStorePixelRatio||T$L.webkitBackingStorePixelRatio||T$L.mozBackingStorePixelRatio||T$L.msBackingStorePixelRatio||T$L.oBackingStorePixelRatio||T$L.backingStorePixelRatio||1;(T$O.pixelRatio=(T$Z.window.devicePixelRatio||1)/T$s)<1&&(T$O.pixelRatio=1);}return T$O.pixelRatio;},T$O.getIncludeStr=function(T$L){return null;},T$O.createShaderCondition=function(T$L){var T$s="(function() {return "+T$L+";})";return T$a._runScript(T$s);},T$O.fontMap=[],T$O.measureText=function(T$L,T$s){var T$m=T$O.hanzi.test(T$L);if(T$m&&T$O.fontMap[T$s])return T$O.fontMap[T$s];var T$x=T$Z.context;T$x.font=T$s;var T$w=T$x.measureText(T$L);return T$w||(T$w={width:16,height:16}),T$m&&(T$O.fontMap[T$s]=T$w),T$w;},T$O.getWebGLContext=function(T$L){},T$O.beginFlush=function(){},T$O.endFinish=function(){},T$O.addToAtlas=null,T$O.flashFlushImage=function(T$L){},T$O.drawToCanvas=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v=T$bL.create("2D"),T$y=new T$A(T$m,T$x,T$v);return T$g.renders[T$s]._fun(T$L,T$y,T$w,T$O),T$v;},T$O.createParticleTemplate2D=null,T$O.createGLTextur=null,T$O.createWebGLContext2D=null,T$O.changeWebGLSize=function(T$L,T$s){},T$O.createRenderSprite=function(T$L,T$s){return new T$g(T$L,T$s);},T$O.createFilterAction=function(T$L){return new T$b();},T$O.createGraphics=function(){return new T$E();},T$O.clear=function(T$L){T$R._context.ctx.clear();},T$O.cancelLoadByUrl=function(T$L){},T$O.clearAtlas=function(T$L){},T$O.isAtlas=function(T$L){return!1;},T$O.addTextureToAtlas=function(T$L){},T$O.getTexturePixels=function(T$L,T$s,T$m,T$x,T$w){return null;},T$O.skinAniSprite=function(){return null;},T$O.update3DLoop=function(){},T$F(T$O,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$");}]),T$O;}(),T$x=(T$u(1,T$a,"alertGlobalError",null,function(T$L){var T$O=0;T$Z.window.onerror=T$L?function(T$L,T$s,T$m,T$x,T$w){T$O++<5&&T$w&&alert(T$w.stack||T$w);}:null;}),T$a.init=function(T$L,T$s,T$m){for(var T$x=[],T$w=2,T$O=arguments.length;T$w<T$O;T$w++)T$x.push(arguments[T$w]);if(!T$a._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=T$a._arrayBufferSlice),T$a._isinit=!0,T$Z.__init__(),T$$.__init__(),T$E.__init__(),T$a.timer=new T$P(),T$a.scaleTimer=new T$P(),T$a.loader=new T$FL(),T$z.__init__(),T$w=0;for(var T$v=T$x.length;T$w<T$v;T$w++)T$x[T$w].enable&&T$x[T$w].enable();return T$r.__init__(),T$y.__init__(),T$p.__init__(),T$d.beginCheck(),T$a._currentStage=T$a.stage=new T$DL(),T$a.stage.conchModel&&T$a.stage.conchModel.setRootNode(),T$a._getUrlPath(),T$a.render=new T$R(0,0),T$a.stage.size(T$L,T$s),T$g.__init__(),T$C.__init__(),T$T.instance.__init__(T$a.stage,T$R.canvas),T$HL.__init__(),T$i.autoStopMusic=!0,T$Q.__init__(),T$R.canvas;}},T$a._getUrlPath=function(){var T$L=T$Z.window.location,T$s=T$L.pathname;T$s=T$s&&":"==T$s.charAt(2)?T$s.substring(1):T$s,T$G.rootPath=T$G.basePath=T$G.getPath("file:"==T$L.protocol?T$s:T$L.protocol+"//"+T$L.host+T$L.pathname);},T$a._arrayBufferSlice=function(T$L,T$s){var T$m=new Uint8Array(this,T$L,T$s-T$L),T$x=new Uint8Array(T$m.length);return T$x.set(T$m),T$x.buffer;},T$a._runScript=function(T$L){return T$Z.window[T$a._evcode](T$L);},T$a.stage=null,T$a.timer=null,T$a.scaleTimer=null,T$a.loader=null,T$a.version="1.8.6",T$a.render=null,T$a._currentStage=null,T$a._isinit=!1,T$a.isDebug=!1,T$a.MiniAdpter={init:function(){T$v.navigator&&T$v.navigator.userAgent&&-1<T$v.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0");}},T$F(T$a,["conchMarket",function(){return this.conchMarket=T$v.conch?conchMarket:null;},"PlatformClass",function(){return this.PlatformClass=T$v.PlatformClass;},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al";}]),function(){function T$L(){}return T$V(T$L,"Config"),T$L.WebGLTextCacheCount=500,T$L.atlasEnable=!1,T$L.showCanvasMark=!1,T$L.animationInterval=50,T$L.isAntialias=!1,T$L.isAlpha=!1,T$L.premultipliedAlpha=!0,T$L.isStencil=!0,T$L.preserveDrawingBuffer=!1,T$L;}()),T$o=function(){function T$o(){this._events=null;}T$V(T$o,"laya.events.EventDispatcher");var T$L=T$o.prototype;return T$L.hasListener=function(T$L){return!!(this._events&&this._events[T$L]);},T$L.getListener=function(T$L){return this._events?this._events[T$L]:null;},T$L.event=function(T$L,T$s){if(!this._events||!this._events[T$L])return!1;var T$m=this._events[T$L];if(T$m.lock)T$m.queue||(T$m.queue=[]),T$m.queue.push(T$s);else{var T$x;for(T$m.lock=!0,T$m.cursor=T$m.head;T$m.cursor;)(T$x=T$m.cursor).recover?(T$m.head=T$m.tail=T$m.cursor=null,console.error("node is recover："+T$x.id)):(T$m.cursor=T$x.next,T$x.once&&T$o.delNode(T$m,T$x),T$x.method&&(null!=T$s?T$x.args?T$x.method.apply(T$x.caller,T$x.args.concat(T$s)):T$s instanceof Array?T$x.method.apply(T$x.caller,T$s):T$x.caller?T$x.method.call(T$x.caller,T$s):T$a.recordError("事件派发错误","node.caller:"+T$x.caller+"node.method:"+T$x.method+"data:"+T$s+"node.prev"+T$x.prev):T$x.method.apply(T$x.caller,T$x.args)),T$x.once&&T$o.recoverHandler(T$x));T$m.lock=!1,!T$m.head&&this._events&&this._events[T$L]==T$m&&delete this._events[T$L],T$m.queue&&T$m.queue.length&&this.event(T$L,T$m.queue.shift());}return!0;},T$L.on=function(T$L,T$s,T$m,T$x){return this._createListener(T$L,T$s,T$m,T$x,!1);},T$L.once=function(T$L,T$s,T$m,T$x){return this._createListener(T$L,T$s,T$m,T$x,!0);},T$L._createListener=function(T$L,T$s,T$m,T$x,T$w,T$O){void 0===T$O&&(T$O=!0),T$O&&this.off(T$L,T$s,T$m,T$w);var T$v=T$o.createHandler(T$s||this,T$m,T$x,T$w);this._events||(this._events={});var T$y=this._events,T$F=T$y[T$L];return T$F?T$F.tail?(T$v.prev=T$F.tail,T$F.tail.next=T$v,T$F.tail=T$v):T$F.head=T$F.tail=T$v:T$y[T$L]={head:T$v,tail:T$v,cursor:null,lock:!1},this;},T$L.off=function(T$L,T$s,T$m,T$x){if(void 0===T$x&&(T$x=!1),!this._events||!this._events[T$L])return this;for(var T$w=this._events[T$L],T$O=T$w.head;T$O;){if((!T$s||T$O.caller===T$s)&&T$O.method===T$m&&(!T$x||T$O.once)){T$o.delNode(T$w,T$O),T$w.cursor==T$O&&(T$w.cursor=T$O.next),T$o.recoverHandler(T$O);break;}T$O=T$O.next;}return this;},T$L.offAll=function(T$L){var T$s=this._events;if(!T$s)return this;if(T$L)this._recoverHandlers(T$s[T$L]),delete T$s[T$L];else{for(var T$m in T$s)this._recoverHandlers(T$s[T$m]);this._events=null;}return this;},T$L._recoverHandlers=function(T$L){if(T$L){for(var T$s=T$L.head;T$s;){T$o.delNode(T$L,T$s);var T$m=T$s.next;T$o.recoverHandler(T$s),T$s=T$m;}T$L.cursor=null;}},T$L.isMouseEvent=function(T$L){return T$o.MOUSE_EVENTS[T$L];},T$o.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},T$o.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0});},T$o.delNode=function(T$L,T$s){T$s.prev?T$s.prev.next=T$s.next:T$L.head=T$s.next,T$s.next?T$s.next.prev=T$s.prev:T$L.tail=T$s.prev;},T$o.createHandler=function(T$L,T$s,T$m,T$x){var T$w=500<T$o._freeHandler.length?T$o._freeHandler.shift():null;if(T$w){if(T$w.recover)T$w.recover=!1,T$w.caller=T$L,T$w.method=T$s,T$w.args=T$m,T$w.once=T$x;else{var T$O="";try{arguments.propertyIsEnumerable.caller;}catch(T$L){T$O=T$L.stack;}var T$v=T$w.caller?(T$w.caller.__proto__&&T$w.caller.__proto__.constructor&&T$w.caller.__proto__.constructor.name)+"|"+T$w.caller.__className+"|"+T$w.caller.name:"",T$y=T$w.method?T$w.method.name:"";T$a.recordError("EventDispatcher重复创建","caller="+T$v+"  method="+T$y+"  stack="+T$O),T$w={id:++T$o._nodeCount,caller:T$L,method:T$s,args:T$m,once:T$x,recover:!1};}}else T$w={id:++T$o._nodeCount,caller:T$L,method:T$s,args:T$m,once:T$x,recover:!1};return T$w.prev=T$w.next=null,T$w;},T$o.recoverHandler=function(T$L){if(T$L.recover){if(T$o._errorCount<5){T$o._errorCount++;var T$s="";try{arguments.propertyIsEnumerable.caller;}catch(T$L){T$s=T$L.stack;}var T$m=T$L.caller?(T$L.caller.__proto__&&T$L.caller.__proto__.constructor&&T$L.caller.__proto__.constructor.name)+"|"+T$L.caller.__className+"|"+T$L.caller.name:"",T$x=T$L.method?T$L.method.name:"";T$a.recordError("EventDispatcher重复回收","id="+T$L.id+"  caller="+T$m+"  method="+T$x+"  stack="+T$s);}T$L.caller=T$L.method=T$L.args=T$L.prev=null;}else T$L.recover=!0,T$L.caller=T$L.method=T$L.args=T$L.prev=T$L.next=null,T$o._freeHandler&&T$o._freeHandler.length<3e3&&T$o._freeHandler.push(T$L);},T$o._freeHandler=[],T$o._nodeCount=0,T$o._errorCount=0,T$o;}(),T$e=function(){function T$w(T$L,T$s,T$m,T$x){this.once=!1,void(this._id=0)===T$x&&(T$x=!1),this.setTo(T$L,T$s,T$m,T$x);}T$V(T$w,"laya.utils.Handler");var T$L=T$w.prototype;return T$L.setTo=function(T$L,T$s,T$m,T$x){return this._id=T$w._gid++,this.caller=T$L,this.method=T$s,this.args=T$m,this.once=T$x,this;},T$L.run=function(){if(null==this.method)return null;var T$L=this._id,T$s=this.method.apply(this.caller,this.args);return this._id===T$L&&this.once&&this.recover(),T$s;},T$L.runWith=function(T$L){if(null==this.method)return null;var T$s=this._id;if(null==T$L)var T$m=this.method.apply(this.caller,this.args);else T$m=this.args||T$L.unshift?this.args?this.method.apply(this.caller,this.args.concat(T$L)):this.method.apply(this.caller,T$L):this.method.call(this.caller,T$L);return this._id===T$s&&this.once&&this.recover(),T$m;},T$L.clear=function(){return this.caller=null,this.method=null,this.args=null,this;},T$L.recover=function(){0<this._id&&(this._id=0,this.clear());},T$w.create=function(T$L,T$s,T$m,T$x){return void 0===T$x&&(T$x=!0),new T$w(T$L,T$s,T$m,T$x);},T$w._gid=1,T$w;}(),T$N=function(){function T$L(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0;}T$V(T$L,"laya.display.BitmapFont");var T$s=T$L.prototype;return T$s.loadFont=function(T$L,T$s){this._path=T$L,this._complete=T$s,T$a.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],T$e.create(this,this.onLoaded));},T$s.onLoaded=function(){this.parseFont(T$yL.getRes(this._path),T$yL.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null);},T$s.parseFont=function(T$L,T$s){if(null!=T$L&&null!=T$s){this._texture=T$s;var T$m=T$L.getElementsByTagName("info");if(!T$m[0].getAttributeNode)return this.parseFont2(T$L,T$s);this.fontSize=parseInt(T$m[0].getAttributeNode("size").nodeValue);var T$x,T$w=T$m[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(T$w[0]),parseInt(T$w[1]),parseInt(T$w[2]),parseInt(T$w[3])],T$x=T$L.getElementsByTagName("char");var T$O=0;for(T$O=0;T$O<T$x.length;T$O++){var T$v=T$x[T$O],T$y=parseInt(T$v.getAttributeNode("id").nodeValue),T$F=parseInt(T$v.getAttributeNode("xoffset").nodeValue)/1,T$o=parseInt(T$v.getAttributeNode("yoffset").nodeValue)/1,T$V=parseInt(T$v.getAttributeNode("xadvance").nodeValue)/1,T$C=new T$_();T$C.x=parseInt(T$v.getAttributeNode("x").nodeValue),T$C.y=parseInt(T$v.getAttributeNode("y").nodeValue),T$C.width=parseInt(T$v.getAttributeNode("width").nodeValue),T$C.height=parseInt(T$v.getAttributeNode("height").nodeValue);var T$E=T$VL.create(T$s,T$C.x,T$C.y,T$C.width,T$C.height,T$F,T$o);this._maxWidth=Math.max(this._maxWidth,T$V+this.letterSpacing),this._fontCharDic[T$y]=T$E,this._fontWidthMap[T$y]=T$V;}}},T$s.parseFont2=function(T$L,T$s){if(null!=T$L&&null!=T$s){this._texture=T$s;var T$m=T$L.getElementsByTagName("info");this.fontSize=parseInt(T$m[0].attributes.size.nodeValue);var T$x=T$m[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(T$x[0]),parseInt(T$x[1]),parseInt(T$x[2]),parseInt(T$x[3])];var T$w=T$L.getElementsByTagName("char"),T$O=0;for(T$O=0;T$O<T$w.length;T$O++){var T$v=T$w[T$O].attributes,T$y=parseInt(T$v.id.nodeValue),T$F=parseInt(T$v.xoffset.nodeValue)/1,T$o=parseInt(T$v.yoffset.nodeValue)/1,T$V=parseInt(T$v.xadvance.nodeValue)/1,T$C=new T$_();T$C.x=parseInt(T$v.x.nodeValue),T$C.y=parseInt(T$v.y.nodeValue),T$C.width=parseInt(T$v.width.nodeValue),T$C.height=parseInt(T$v.height.nodeValue);var T$E=T$VL.create(T$s,T$C.x,T$C.y,T$C.width,T$C.height,T$F,T$o);this._maxWidth=Math.max(this._maxWidth,T$V+this.letterSpacing),this._fontCharDic[T$y]=T$E,this._fontWidthMap[T$y]=T$V;}}},T$s.getCharTexture=function(T$L){return this._fontCharDic[T$L.charCodeAt(0)];},T$s.destroy=function(){if(this._texture){for(var T$L in this._fontCharDic){var T$s=this._fontCharDic[T$L];T$s&&T$s.destroy();}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null;}},T$s.setSpaceWidth=function(T$L){this._spaceWidth=T$L;},T$s.getCharWidth=function(T$L){var T$s=T$L.charCodeAt(0);return this._fontWidthMap[T$s]?this._fontWidthMap[T$s]+this.letterSpacing:" "==T$L?this._spaceWidth+this.letterSpacing:0;},T$s.getTextWidth=function(T$L){for(var T$s=0,T$m=0,T$x=T$L.length;T$m<T$x;T$m++)T$s+=this.getCharWidth(T$L.charAt(T$m));return T$s;},T$s.getMaxWidth=function(){return this._maxWidth;},T$s.getMaxHeight=function(){return this.fontSize;},T$s.drawText=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v,T$y=this.getTextWidth(T$L),T$F=0;"center"===T$w&&(T$F=(T$O-T$y)/2),"right"===T$w&&(T$F=T$O-T$y);for(var T$o=0,T$V=0,T$C=T$L.length;T$V<T$C;T$V++)(T$v=this.getCharTexture(T$L.charAt(T$V)))&&(T$s.graphics.drawTexture(T$v,T$m+T$o+T$F,T$x),T$o+=this.getCharWidth(T$L.charAt(T$V)));},T$L;}(),T$y=function(){function T$m(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=T$m._TF_EMPTY;}T$V(T$m,"laya.display.css.Style");var T$L=T$m.prototype;return T$L.getTransform=function(){return this._tf;},T$L.setTransform=function(T$L){this._tf="none"!==T$L&&T$L?T$L:T$m._TF_EMPTY;},T$L.setTranslateX=function(T$L){this._tf===T$m._TF_EMPTY&&(this._tf=new T$w()),this._tf.translateX=T$L;},T$L.setTranslateY=function(T$L){this._tf===T$m._TF_EMPTY&&(this._tf=new T$w()),this._tf.translateY=T$L;},T$L.setScaleX=function(T$L){this._tf===T$m._TF_EMPTY&&(this._tf=new T$w()),this._tf.scaleX=T$L;},T$L.setScale=function(T$L,T$s){this._tf===T$m._TF_EMPTY&&(this._tf=new T$w()),this._tf.scaleX=T$L,this._tf.scaleY=T$s;},T$L.setScaleY=function(T$L){this._tf===T$m._TF_EMPTY&&(this._tf=new T$w()),this._tf.scaleY=T$L;},T$L.setRotate=function(T$L){this._tf===T$m._TF_EMPTY&&(this._tf=new T$w()),this._tf.rotate=T$L;},T$L.setSkewX=function(T$L){this._tf===T$m._TF_EMPTY&&(this._tf=new T$w()),this._tf.skewX=T$L;},T$L.setSkewY=function(T$L){this._tf===T$m._TF_EMPTY&&(this._tf=new T$w()),this._tf.skewY=T$L;},T$L.destroy=function(){this.scrollRect=null;},T$L.render=function(T$L,T$s,T$m,T$x){},T$L.getCSSStyle=function(){return T$sL.EMPTY;},T$L._enableLayout=function(){return!1;},T$u(0,T$L,"scaleX",function(){return this._tf.scaleX;},function(T$L){this.setScaleX(T$L);}),T$u(0,T$L,"transform",function(){return this.getTransform();},function(T$L){this.setTransform(T$L);}),T$u(0,T$L,"translateX",function(){return this._tf.translateX;},function(T$L){this.setTranslateX(T$L);}),T$u(0,T$L,"translateY",function(){return this._tf.translateY;},function(T$L){this.setTranslateY(T$L);}),T$u(0,T$L,"scaleY",function(){return this._tf.scaleY;},function(T$L){this.setScaleY(T$L);}),T$u(0,T$L,"block",function(){return 0!=(1&this._type);}),T$u(0,T$L,"skewY",function(){return this._tf.skewY;},function(T$L){this.setSkewY(T$L);}),T$u(0,T$L,"rotate",function(){return this._tf.rotate;},function(T$L){this.setRotate(T$L);}),T$u(0,T$L,"skewX",function(){return this._tf.skewX;},function(T$L){this.setSkewX(T$L);}),T$u(0,T$L,"paddingLeft",function(){return 0;}),T$u(0,T$L,"paddingTop",function(){return 0;}),T$u(0,T$L,"absolute",function(){return!0;}),T$m.__init__=function(){T$m._TF_EMPTY=new T$w(),T$m.EMPTY=new T$m();},T$m.EMPTY=null,T$m._TF_EMPTY=null,T$m;}(),T$r=function(){function T$s(T$L){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=T$I.create(T$s.defaultColor),this.family=T$s.defaultFamily,this.stroke=T$s._STROKE,this.size=T$s.defaultSize,T$L&&T$L!==T$s.EMPTY&&T$L.copyTo(this);}T$V(T$s,"laya.display.css.Font");var T$L=T$s.prototype;return T$L.set=function(T$L){this._text=null;for(var T$s=T$L.split(" "),T$m=0,T$x=T$s.length;T$m<T$x;T$m++){var T$w=T$s[T$m];switch(T$w){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue;}0<T$w.indexOf("px")&&(this.size=parseInt(T$w),this.family=T$s[T$m+1],T$m++);}},T$L.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family;},T$L.copyTo=function(T$L){T$L._type=this._type,T$L._text=this._text,T$L._weight=this._weight,T$L._color=this._color,T$L.family=this.family,T$L.stroke=this.stroke!=T$s._STROKE?this.stroke.slice():T$s._STROKE,T$L.indent=this.indent,T$L.size=this.size;},T$u(0,T$L,"password",function(){return 0!=(1024&this._type);},function(T$L){T$L?this._type|=1024:this._type&=-1025;}),T$u(0,T$L,"color",function(){return this._color.strColor;},function(T$L){this._color=T$I.create(T$L);}),T$u(0,T$L,"italic",function(){return 0!=(512&this._type);},function(T$L){T$L?this._type|=512:this._type&=-513;}),T$u(0,T$L,"bold",function(){return 0!=(2048&this._type);},function(T$L){T$L?this._type|=2048:this._type&=-2049;}),T$u(0,T$L,"weight",function(){return""+this._weight;},function(T$L){var T$s=0;switch(T$L){case"normal":break;case"bold":this.bold=!0,T$s=700;break;case"bolder":T$s=800;break;case"lighter":T$s=100;break;default:T$s=parseInt(T$L);}this._weight=T$s,this._text=null;}),T$u(0,T$L,"decoration",function(){return this._decoration?this._decoration.value:null;},function(T$L){var T$s=T$L.split(" ");switch(this._decoration||(this._decoration={}),T$s[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=T$s[0];}T$s[1]&&(this._decoration.color=T$I.create(T$s)),this._decoration.value=T$L;}),T$s.__init__=function(){T$s.EMPTY=new T$s(null);},T$s.EMPTY=null,T$s.defaultColor="#000000",T$s.defaultSize=12,T$s.defaultFamily="Arial",T$s.defaultFont="12px Arial",T$s._STROKE=[0,"#000000"],T$s._ITALIC=512,T$s._PASSWORD=1024,T$s._BOLD=2048,T$s;}(),T$w=function(){function T$L(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0;}return T$V(T$L,"laya.display.css.TransformInfo"),T$L;}(),T$E=function(){function T$C(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,T$R.isConchNode){this._nativeObj=new T$v._conchGraphics(),this.id=this._nativeObj.conchID;}}T$V(T$C,"laya.display.Graphics");var T$L=T$C.prototype;return T$L.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null;},T$L.clear=function(T$L){void 0===T$L&&(T$L=!1);var T$s=0,T$m=0;if(T$L){var T$x=this._one;if(this._cmds){for(T$m=this._cmds.length,T$s=0;T$s<T$m;T$s++)!(T$x=this._cmds[T$s])||T$x.callee!==T$R._context._drawTexture&&T$x.callee!==T$R._context._drawTextureWithTransform||(T$x[0]=null,T$C._cache.push(T$x));this._cmds.length=0;}else T$x&&(!T$x||T$x.callee!==T$R._context._drawTexture&&T$x.callee!==T$R._context._drawTextureWithTransform||(T$x[0]=null,T$C._cache.push(T$x)));}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(T$s=0,T$m=this._vectorgraphArray.length;T$s<T$m;T$s++)T$M.getInstance().deleteShape(this._vectorgraphArray[T$s]);this._vectorgraphArray.length=0;}},T$L._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset();},T$L._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new T$m(),this._graphicBounds._graphics=this);},T$L._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint();},T$L._isOnlyOne=function(){return!this._cmds||0===this._cmds.length;},T$L.getBounds=function(T$L){return void 0===T$L&&(T$L=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(T$L);},T$L.getBoundPoints=function(T$L){return void 0===T$L&&(T$L=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(T$L);},T$L._addCmd=function(T$L){this._cmds=this._cmds||[],T$L.callee=T$L.shift(),this._cmds.push(T$L);},T$L.setFilters=function(T$L){this._saveToCmd(T$R._context._setFilters,T$L);},T$L.drawTexture=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){if(void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0),void 0===T$x&&(T$x=0),void 0===T$w&&(T$w=0),void 0===T$v&&(T$v=1),!T$L||T$v<.01)return null;T$x||(T$x=T$L.sourceWidth),T$w||(T$w=T$L.sourceHeight),T$v=T$v<0?0:1<T$v?1:T$v;var T$y,T$F=!T$R.isWebGL&&(T$Z.onFirefox||T$Z.onEdge||T$Z.onIE||T$Z.onSafari)?.5:0,T$o=T$x/T$L.sourceWidth,T$V=T$w/T$L.sourceHeight;return T$x=T$L.width*T$o,T$w=T$L.height*T$V,T$L.loaded&&(T$x<=0||T$w<=0)?null:(T$s+=T$L.offsetX*T$o,T$m+=T$L.offsetY*T$V,this._sp&&(this._sp._renderType|=512),T$s-=T$F,T$m-=T$F,T$x+=2*T$F,T$w+=2*T$F,T$C._cache.length?((T$y=T$C._cache.pop())[0]=T$L,T$y[1]=T$s,T$y[2]=T$m,T$y[3]=T$x,T$y[4]=T$w,T$y[5]=T$O,T$y[6]=T$v):T$y=[T$L,T$s,T$m,T$x,T$w,T$O,T$v],T$y.callee=T$O||1!=T$v?T$R._context._drawTextureWithTransform:T$R._context._drawTexture,null!=this._one||T$O||1!=T$v?this._saveToCmd(T$y.callee,T$y):(this._one=T$y,this._render=this._renderOneImg),T$L.loaded||T$L.once("loaded",this,this._textureLoaded,[T$L,T$y]),this._repaint(),T$y);},T$L.cleanByTexture=function(T$L,T$s,T$m,T$x,T$w){if(void 0===T$x&&(T$x=0),void 0===T$w&&(T$w=0),!T$L)return this.clear();if(this._one&&this._render===this._renderOneImg){T$x||(T$x=T$L.sourceWidth),T$w||(T$w=T$L.sourceHeight);var T$O=T$x/T$L.sourceWidth,T$v=T$w/T$L.sourceHeight;T$x=T$L.width*T$O,T$w=T$L.height*T$v,T$s+=T$L.offsetX*T$O,T$m+=T$L.offsetY*T$v,this._one[0]=T$L,this._one[1]=T$s,this._one[2]=T$m,this._one[3]=T$x,this._one[4]=T$w,this._repaint();}else this.clear(),T$L&&this.drawTexture(T$L,T$s,T$m,T$x,T$w);},T$L.drawTextures=function(T$L,T$s){T$L&&this._saveToCmd(T$R._context._drawTextures,[T$L,T$s]);},T$L.fillTexture=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){if(void 0===T$x&&(T$x=0),void 0===T$w&&(T$w=0),void 0===T$O&&(T$O="repeat"),T$L){var T$y=[T$L,T$s,T$m,T$x,T$w,T$O,T$v||T$f.EMPTY,{}];T$L.loaded||T$L.once("loaded",this,this._textureLoaded,[T$L,T$y]),this._saveToCmd(T$R._context._fillTexture,T$y);}},T$L._textureLoaded=function(T$L,T$s){T$s[3]=T$s[3]||T$L.width,T$s[4]=T$s[4]||T$L.height,this._repaint();},T$L.fillCircle=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){T$m.bitmap.enableMerageInAtlas=!1;var T$y=new Float32Array(2*(T$v+1)),T$F=new Float32Array(2*(T$v+1)),T$o=new Uint16Array(3*T$v),T$V=2*Math.PI/T$v,T$C=0;T$y[0]=T$x,T$y[1]=T$w,T$F[0]=T$x/T$m.width,T$F[1]=T$w/T$m.height;for(var T$E=2,T$r=0;T$r<T$v;T$r++){var T$u=T$O*Math.cos(T$C)+T$x,T$T=T$O*Math.sin(T$C)+T$w;T$y[T$E]=T$u,T$y[T$E+1]=T$T,T$F[T$E]=T$u/T$m.width,T$F[T$E+1]=T$T/T$m.height,T$C+=T$V,T$E+=2;}for(T$r=T$E=0;T$r<T$v;T$r++)T$o[T$E++]=0,T$o[T$E++]=T$r+1,T$o[T$E++]=T$v+1<=T$r+2?1:T$r+2;this.drawTriangles(T$m,T$L,T$s,T$y,T$F,T$o);},T$L.drawTriangles=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o){void 0===T$y&&(T$y=1),this._saveToCmd(T$R._context.drawTriangles,[T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o]);},T$L._saveToCmd=function(T$L,T$s){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=T$s,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(T$s)),T$s.callee=T$L,this._repaint(),T$s;},T$L.clipRect=function(T$L,T$s,T$m,T$x){this._saveToCmd(T$R._context._clipRect,[T$L,T$s,T$m,T$x]);},T$L.fillText=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){void 0===T$v&&(T$v=0),this._saveToCmd(T$R._context._fillText,[T$L,T$s,T$m,T$x||T$r.defaultFont,T$w,T$O]);},T$L.fillBorderText=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){this._saveToCmd(T$R._context._fillBorderText,[T$L,T$s,T$m,T$x||T$r.defaultFont,T$w,T$O,T$v,T$y]);},T$L.strokeText=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){this._saveToCmd(T$R._context._strokeText,[T$L,T$s,T$m,T$x||T$r.defaultFont,T$w,T$O,T$v]);},T$L.alpha=function(T$L){T$L=T$L<0?0:1<T$L?1:T$L,this._saveToCmd(T$R._context._alpha,[T$L]);},T$L.setAlpha=function(T$L){T$L=T$L<0?0:1<T$L?1:T$L,this._saveToCmd(T$R._context._setAlpha,[T$L]);},T$L.transform=function(T$L,T$s,T$m){void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0),this._saveToCmd(T$R._context._transform,[T$L,T$s,T$m]);},T$L.rotate=function(T$L,T$s,T$m){void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0),this._saveToCmd(T$R._context._rotate,[T$L,T$s,T$m]);},T$L.scale=function(T$L,T$s,T$m,T$x){void 0===T$m&&(T$m=0),void 0===T$x&&(T$x=0),this._saveToCmd(T$R._context._scale,[T$L,T$s,T$m,T$x]);},T$L.translate=function(T$L,T$s){this._saveToCmd(T$R._context._translate,[T$L,T$s]);},T$L.save=function(){this._saveToCmd(T$R._context._save,[]);},T$L.restore=function(){this._saveToCmd(T$R._context._restore,[]);},T$L.replaceText=function(T$L){this._repaint();var T$s=this._cmds;if(T$s){for(var T$m=T$s.length-1;-1<T$m;T$m--)if(this._isTextCmd(T$s[T$m].callee))return T$s[T$m][0].toUpperCase?T$s[T$m][0]=T$L:T$s[T$m][0].setText(T$L),!0;}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=T$L:this._one[0].setText(T$L),!0;return!1;},T$L._isTextCmd=function(T$L){return T$L===T$R._context._fillText||T$L===T$R._context._fillBorderText||T$L===T$R._context._strokeText;},T$L.replaceTextColor=function(T$L){this._repaint();var T$s=this._cmds;if(T$s)for(var T$m=T$s.length-1;-1<T$m;T$m--)this._isTextCmd(T$s[T$m].callee)&&(T$s[T$m][4]=T$L,T$s[T$m][0].toUpperCase||(T$s[T$m][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=T$L,this._one[0].toUpperCase||(this._one[0].changed=!0));},T$L.loadImage=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v=this;void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0),void 0===T$x&&(T$x=0),void 0===T$w&&(T$w=0);var T$y=T$yL.getRes(T$L);function T$F(T$L){T$L&&(T$v.drawTexture(T$L,T$s,T$m,T$x,T$w),null!=T$O&&T$O.call(T$v._sp,T$L));}T$y?T$F(T$y):T$a.loader.load(T$L,T$e.create(null,T$F),null,"image");},T$L._renderEmpty=function(T$L,T$s,T$m,T$x){},T$L._renderAll=function(T$L,T$s,T$m,T$x){for(var T$w,T$O=this._cmds,T$v=0,T$y=T$O.length;T$v<T$y;T$v++)(T$w=T$O[T$v]).callee.call(T$s,T$m,T$x,T$w);},T$L._renderOne=function(T$L,T$s,T$m,T$x){this._one.callee.call(T$s,T$m,T$x,this._one);},T$L._renderOneImg=function(T$L,T$s,T$m,T$x){this._one.callee.call(T$s,T$m,T$x,this._one),2305!==T$L._renderType&&(T$L._renderType|=1);},T$L.drawLine=function(T$L,T$s,T$m,T$x,T$w,T$O){void 0===T$O&&(T$O=1);var T$v=0;T$R.isWebGL&&(T$v=T$M.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(T$v));var T$y=T$O%2==0?0:.5,T$F=[T$L+T$y,T$s+T$y,T$m+T$y,T$x+T$y,T$w,T$O,T$v];this._saveToCmd(T$R._context._drawLine,T$F);},T$L.drawLines=function(T$L,T$s,T$m,T$x,T$w){void 0===T$w&&(T$w=1);var T$O=0;if(T$m&&!(T$m.length<4)){T$R.isWebGL&&(T$O=T$M.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(T$O));var T$v=T$w%2==0?0:.5,T$y=[T$L+T$v,T$s+T$v,T$m,T$x,T$w,T$O];this._saveToCmd(T$R._context._drawLines,T$y);}},T$L.drawCurves=function(T$L,T$s,T$m,T$x,T$w){void 0===T$w&&(T$w=1);var T$O=[T$L,T$s,T$m,T$x,T$w];this._saveToCmd(T$R._context._drawCurves,T$O);},T$L.drawRect=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){void 0===T$v&&(T$v=1);var T$y=T$O?T$v/2:0,T$F=T$O?T$v:0,T$o=[T$L+T$y,T$s+T$y,T$m-T$F,T$x-T$F,T$w,T$O,T$v];this._saveToCmd(T$R._context._drawRect,T$o);},T$L.drawCircle=function(T$L,T$s,T$m,T$x,T$w,T$O){void 0===T$O&&(T$O=1);var T$v=T$w?T$O/2:0,T$y=0;T$R.isWebGL&&(T$y=T$M.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(T$y));var T$F=[T$L,T$s,T$m-T$v,T$x,T$w,T$O,T$y];this._saveToCmd(T$R._context._drawCircle,T$F);},T$L.drawPie=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){void 0===T$y&&(T$y=1);var T$F=T$v?T$y/2:0,T$o=T$v?T$y:0,T$V=0;T$R.isWebGL&&(T$V=T$M.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(T$V));var T$C=[T$L+T$F,T$s+T$F,T$m-T$o,T$x,T$w,T$O,T$v,T$y,T$V];T$C[3]=T$B.toRadian(T$x),T$C[4]=T$B.toRadian(T$w),this._saveToCmd(T$R._context._drawPie,T$C);},T$L.drawPoly=function(T$L,T$s,T$m,T$x,T$w,T$O){void 0===T$O&&(T$O=1);var T$v=0,T$y=!1;T$R.isWebGL&&(T$v=T$M.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(T$v),T$y=!(6<T$m.length));var T$F=T$w?T$O%2==0?0:.5:0,T$o=[T$L+T$F,T$s+T$F,T$m,T$x,T$w,T$O,T$v,T$y];this._saveToCmd(T$R._context._drawPoly,T$o);},T$L.drawPath=function(T$L,T$s,T$m,T$x,T$w){var T$O=[T$L,T$s,T$m,T$x,T$w];this._saveToCmd(T$R._context._drawPath,T$O);},T$u(0,T$L,"cmds",function(){return this._cmds;},function(T$L){this._sp&&(this._sp._renderType|=512),this._cmds=T$L,this._render=this._renderAll,this._repaint();}),T$C.__init__=function(){if(T$R.isConchNode){for(var T$L=laya.display.Graphics.prototype,T$s=T$Z.window.ConchGraphics.prototype,T$m=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],T$x=0,T$w=T$m.length;T$x<=T$w;T$x++){var T$O=T$m[T$x];T$L[T$O]=T$s[T$O];}T$L._saveToCmd=null,T$s.drawImageS&&(T$L.drawTextures=function(T$L,T$s){if(T$L&&T$L.loaded&&T$L.bitmap&&T$L.source){var T$m=T$L.uv,T$x=T$L.bitmap.width,T$w=T$L.bitmap.height;this.drawImageS(T$L.bitmap.source,T$m[0]*T$x,T$m[1]*T$w,(T$m[2]-T$m[0])*T$x,(T$m[5]-T$m[3])*T$w,T$L.offsetX,T$L.offsetY,T$L.width,T$L.height,T$s);}}),T$L.drawTexture=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){if(void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0),void 0===T$x&&(T$x=0),void 0===T$w&&(T$w=0),void 0===T$v&&(T$v=1),T$L)if(T$L.loaded){if(T$L.loaded&&T$L.bitmap&&T$L.source&&(T$x||(T$x=T$L.sourceWidth),T$w||(T$w=T$L.sourceHeight),T$v=T$v<0?0:1<T$v?1:T$v,T$x=T$x-T$L.sourceWidth+T$L.width,T$w=T$w-T$L.sourceHeight+T$L.height,!(T$x<=0||T$w<=0))){T$s+=T$L.offsetX,T$m+=T$L.offsetY;var T$y=T$L.uv,T$F=T$L.bitmap.width,T$o=T$L.bitmap.height;T$y[4]<T$y[0]&&T$y[5]<T$y[1]?this.drawImageM(T$L.bitmap.source,T$y[4]*T$F,T$y[5]*T$o,(T$y[0]-T$y[4])*T$F,(T$y[1]-T$y[5])*T$o,T$s,T$m,T$x,T$w,T$O,T$v):this.drawImageM(T$L.bitmap.source,T$y[0]*T$F,T$y[1]*T$o,(T$y[2]-T$y[0])*T$F,(T$y[5]-T$y[3])*T$o,T$s,T$m,T$x,T$w,T$O,T$v),this._repaint();}}else T$L.once("loaded",this,function(){this.drawTexture(T$L,T$s,T$m,T$x,T$w,T$O);});},T$L.fillTexture=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){if(void 0===T$x&&(T$x=0),void 0===T$w&&(T$w=0),void 0===T$O&&(T$O="repeat"),T$L&&T$L.loaded){var T$y,T$F=T$R._context.ctx,T$o=T$L.bitmap.width,T$V=T$L.bitmap.height,T$C=T$L.uv;T$y=T$L.uv!=T$VL.DEF_UV?T$F.createPattern(T$L.bitmap.source,T$O,T$C[0]*T$o,T$C[1]*T$V,(T$C[2]-T$C[0])*T$o,(T$C[5]-T$C[3])*T$V):T$F.createPattern(T$L.bitmap.source,T$O);var T$E=0,T$r=0;T$v&&(T$s+=T$v.x%T$L.width,T$m+=T$v.y%T$L.height,T$E-=T$v.x%T$L.width,T$r-=T$v.y%T$L.height),this._fillImage(T$y,T$s,T$m,T$E,T$r,T$x,T$w);}};}},T$C._cache=[],T$C;}(),T$m=function(){function T$b(){this._cacheBoundsType=!1;}T$V(T$b,"laya.display.GraphicsBounds");var T$L=T$b.prototype;return T$L.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null;},T$L.reset=function(){this._temp&&(this._temp.length=0);},T$L.getBounds=function(T$L){return void 0===T$L&&(T$L=!1),(!this._bounds||!this._temp||this._temp.length<1||T$L!=this._cacheBoundsType)&&(this._bounds=T$_._getWrapRec(this.getBoundPoints(T$L),this._bounds)),this._cacheBoundsType=T$L,this._bounds;},T$L.getBoundPoints=function(T$L){return void 0===T$L&&(T$L=!1),(!this._temp||this._temp.length<1||T$L!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(T$L)),this._cacheBoundsType=T$L,this._rstBoundPoints=T$B.copyArray(this._rstBoundPoints,this._temp);},T$L._getCmdPoints=function(T$L){void 0===T$L&&(T$L=!1);var T$s,T$m,T$x=T$R._context,T$w=this._graphics.cmds;if((T$s=this._temp||(this._temp=[])).length=0,T$w||null==this._graphics._one||(T$b._tempCmds.length=0,T$b._tempCmds.push(this._graphics._one),T$w=T$b._tempCmds),!T$w)return T$s;(T$m=T$b._tempMatrixArrays).length=0;var T$O=T$b._initMatrix;T$O.identity();for(var T$v,T$y,T$F=T$b._tempMatrix,T$o=NaN,T$V=NaN,T$C=NaN,T$E=NaN,T$r=NaN,T$u=NaN,T$T=0,T$j=T$w.length;T$T<T$j;T$T++)if((T$v=T$w[T$T]).callee)switch(T$v.callee){case T$x._save:case 7:T$m.push(T$O),T$O=T$O.clone();break;case T$x._restore:case 8:T$O=T$m.pop();break;case T$x._scale:case 5:T$F.identity(),T$F.translate(-T$v[2],-T$v[3]),T$F.scale(T$v[0],T$v[1]),T$F.translate(T$v[2],T$v[3]),this._switchMatrix(T$O,T$F);break;case T$x._rotate:case 3:T$F.identity(),T$F.translate(-T$v[1],-T$v[2]),T$F.rotate(T$v[0]),T$F.translate(T$v[1],T$v[2]),this._switchMatrix(T$O,T$F);break;case T$x._translate:case 6:T$F.identity(),T$F.translate(T$v[0],T$v[1]),this._switchMatrix(T$O,T$F);break;case T$x._transform:case 4:T$F.identity(),T$F.translate(-T$v[1],-T$v[2]),T$F.concat(T$v[0]),T$F.translate(T$v[1],T$v[2]),this._switchMatrix(T$O,T$F);break;case 16:case 24:T$b._addPointArrToRst(T$s,T$_._getBoundPointS(T$v[0],T$v[1],T$v[2],T$v[3]),T$O);break;case 17:T$O.copyTo(T$F),T$F.concat(T$v[4]),T$b._addPointArrToRst(T$s,T$_._getBoundPointS(T$v[0],T$v[1],T$v[2],T$v[3]),T$F);break;case T$x._drawTexture:T$y=T$v[0],T$L?T$v[3]&&T$v[4]?T$b._addPointArrToRst(T$s,T$_._getBoundPointS(T$v[1],T$v[2],T$v[3],T$v[4]),T$O):(T$y=T$v[0],T$b._addPointArrToRst(T$s,T$_._getBoundPointS(T$v[1],T$v[2],T$y.width,T$y.height),T$O)):(T$o=(T$v[3]||T$y.sourceWidth)/T$y.width,T$V=(T$v[4]||T$y.sourceHeight)/T$y.height,T$C=T$o*T$y.sourceWidth,T$E=T$V*T$y.sourceHeight,T$r=0<T$y.offsetX?T$y.offsetX:0,T$u=0<T$y.offsetY?T$y.offsetY:0,T$r*=T$o,T$u*=T$V,T$b._addPointArrToRst(T$s,T$_._getBoundPointS(T$v[1]-T$r,T$v[2]-T$u,T$C,T$E),T$O));break;case T$x._fillTexture:T$v[3]&&T$v[4]?T$b._addPointArrToRst(T$s,T$_._getBoundPointS(T$v[1],T$v[2],T$v[3],T$v[4]),T$O):(T$y=T$v[0],T$b._addPointArrToRst(T$s,T$_._getBoundPointS(T$v[1],T$v[2],T$y.width,T$y.height),T$O));break;case T$x._drawTextureWithTransform:var T$D;T$D=T$v[5]?(T$O.copyTo(T$F),T$F.concat(T$v[5]),T$F):T$O,T$L?T$v[3]&&T$v[4]?T$b._addPointArrToRst(T$s,T$_._getBoundPointS(T$v[1],T$v[2],T$v[3],T$v[4]),T$D):(T$y=T$v[0],T$b._addPointArrToRst(T$s,T$_._getBoundPointS(T$v[1],T$v[2],T$y.width,T$y.height),T$D)):(T$y=T$v[0],T$o=(T$v[3]||T$y.sourceWidth)/T$y.width,T$V=(T$v[4]||T$y.sourceHeight)/T$y.height,T$C=T$o*T$y.sourceWidth,T$E=T$V*T$y.sourceHeight,T$r=0<T$y.offsetX?T$y.offsetX:0,T$u=0<T$y.offsetY?T$y.offsetY:0,T$r*=T$o,T$u*=T$V,T$b._addPointArrToRst(T$s,T$_._getBoundPointS(T$v[1]-T$r,T$v[2]-T$u,T$C,T$E),T$D));break;case T$x._drawRect:case 13:T$b._addPointArrToRst(T$s,T$_._getBoundPointS(T$v[0],T$v[1],T$v[2],T$v[3]),T$O);break;case T$x._drawCircle:case T$x._fillCircle:case 14:T$b._addPointArrToRst(T$s,T$_._getBoundPointS(T$v[0]-T$v[2],T$v[1]-T$v[2],T$v[2]+T$v[2],T$v[2]+T$v[2]),T$O);break;case T$x._drawLine:case 20:T$b._tempPoints.length=0;var T$e;T$e=.5*T$v[5],T$v[0]==T$v[2]?T$b._tempPoints.push(T$v[0]+T$e,T$v[1],T$v[2]+T$e,T$v[3],T$v[0]-T$e,T$v[1],T$v[2]-T$e,T$v[3]):T$v[1]==T$v[3]?T$b._tempPoints.push(T$v[0],T$v[1]+T$e,T$v[2],T$v[3]+T$e,T$v[0],T$v[1]-T$e,T$v[2],T$v[3]-T$e):T$b._tempPoints.push(T$v[0],T$v[1],T$v[2],T$v[3]),T$b._addPointArrToRst(T$s,T$b._tempPoints,T$O);break;case T$x._drawCurves:case 22:T$b._addPointArrToRst(T$s,T$S.I.getBezierPoints(T$v[2]),T$O,T$v[0],T$v[1]);break;case T$x._drawPoly:case T$x._drawLines:case 18:T$b._addPointArrToRst(T$s,T$v[2],T$O,T$v[0],T$v[1]);break;case T$x._drawPath:case 19:T$b._addPointArrToRst(T$s,this._getPathPoints(T$v[2]),T$O,T$v[0],T$v[1]);break;case T$x._drawPie:case 15:T$b._addPointArrToRst(T$s,this._getPiePoints(T$v[0],T$v[1],T$v[2],T$v[3],T$v[4]),T$O);}return 200<T$s.length?T$s=T$B.copyArray(T$s,T$_._getWrapRec(T$s)._getBoundPoints()):8<T$s.length&&(T$s=T$H.scanPList(T$s)),T$s;},T$L._switchMatrix=function(T$L,T$s){T$s.concat(T$L),T$s.copyTo(T$L);},T$L._getPiePoints=function(T$L,T$s,T$m,T$x,T$w){var T$O=T$b._tempPoints;T$b._tempPoints.length=0,T$O.push(T$L,T$s);var T$v=(T$w-T$x)%(2*Math.PI)/10,T$y=NaN,T$F=T$x;for(T$y=0;T$y<=10;T$y++)T$O.push(T$L+T$m*Math.cos(T$F),T$s+T$m*Math.sin(T$F)),T$F+=T$v;return T$O;},T$L._getPathPoints=function(T$L){var T$s,T$m,T$x=0,T$w=T$b._tempPoints;for(T$w.length=0,T$s=T$L.length,T$x=0;T$x<T$s;T$x++)1<(T$m=T$L[T$x]).length&&(T$w.push(T$m[1],T$m[2]),3<T$m.length&&T$w.push(T$m[3],T$m[4]));return T$w;},T$b._addPointArrToRst=function(T$L,T$s,T$m,T$x,T$w){void 0===T$x&&(T$x=0),void 0===T$w&&(T$w=0);var T$O,T$v=0;for(T$O=T$s.length,T$v=0;T$v<T$O;T$v+=2)T$b._addPointToRst(T$L,T$s[T$v]+T$x,T$s[T$v+1]+T$w,T$m);},T$b._addPointToRst=function(T$L,T$s,T$m,T$x){var T$w=T$f.TEMP;T$w.setTo(T$s||0,T$m||0),T$x.transformPoint(T$w),T$L.push(T$w.x,T$w.y);},T$b._tempPoints=[],T$b._tempMatrixArrays=[],T$b._tempCmds=[],T$F(T$b,["_tempMatrix",function(){return this._tempMatrix=new T$c();},"_initMatrix",function(){return this._initMatrix=new T$c();}]),T$b;}(),T$O=function(){function T$L(){}T$V(T$L,"laya.events.Event");var T$s=T$L.prototype;return T$s.setTo=function(T$L,T$s,T$m){return this.type=T$L,this.currentTarget=T$s,this.target=T$m,this;},T$s.stopPropagation=function(){this._stoped=!0;},T$u(0,T$s,"stageY",function(){return T$a.stage.mouseY;}),T$u(0,T$s,"charCode",function(){return this.nativeEvent.charCode;}),T$u(0,T$s,"touches",function(){var T$L=this.nativeEvent.touches;if(T$L)for(var T$s=T$a.stage,T$m=0,T$x=T$L.length;T$m<T$x;T$m++){var T$w=T$L[T$m],T$O=T$f.TEMP;T$O.setTo(T$w.clientX,T$w.clientY),T$s._canvasTransform.invertTransformPoint(T$O),T$s.transform.invertTransformPoint(T$O),T$w.stageX=T$O.x,T$w.stageY=T$O.y;}return T$L;}),T$u(0,T$s,"keyLocation",function(){return this.nativeEvent.keyLocation;}),T$u(0,T$s,"ctrlKey",function(){return this.nativeEvent.ctrlKey;}),T$u(0,T$s,"altKey",function(){return this.nativeEvent.altKey;}),T$u(0,T$s,"shiftKey",function(){return this.nativeEvent.shiftKey;}),T$u(0,T$s,"stageX",function(){return T$a.stage.mouseX;}),T$L.EMPTY=new T$L(),T$L.MOUSE_DOWN="mousedown",T$L.MOUSE_UP="mouseup",T$L.CLICK="click",T$L.RIGHT_MOUSE_DOWN="rightmousedown",T$L.RIGHT_MOUSE_UP="rightmouseup",T$L.RIGHT_CLICK="rightclick",T$L.MOUSE_MOVE="mousemove",T$L.MOUSE_OVER="mouseover",T$L.MOUSE_OUT="mouseout",T$L.MOUSE_WHEEL="mousewheel",T$L.ROLL_OVER="mouseover",T$L.ROLL_OUT="mouseout",T$L.DOUBLE_CLICK="doubleclick",T$L.CHANGE="change",T$L.CHANGED="changed",T$L.RESIZE="resize",T$L.ADDED="added",T$L.REMOVED="removed",T$L.DISPLAY="display",T$L.UNDISPLAY="undisplay",T$L.ERROR="error",T$L.COMPLETE="complete",T$L.LOADED="loaded",T$L.INITED="inited",T$L.PROGRESS="progress",T$L.INPUT="input",T$L.RENDER="render",T$L.OPEN="open",T$L.MESSAGE="message",T$L.CLOSE="close",T$L.KEY_DOWN="keydown",T$L.KEY_PRESS="keypress",T$L.KEY_UP="keyup",T$L.FRAME="enterframe",T$L.DRAG_START="dragstart",T$L.DRAG_MOVE="dragmove",T$L.DRAG_END="dragend",T$L.ENTER="enter",T$L.SELECT="select",T$L.BLUR="blur",T$L.FOCUS="focus",T$L.VISIBILITY_CHANGE="visibilitychange",T$L.FOCUS_CHANGE="focuschange",T$L.PLAYED="played",T$L.PAUSED="paused",T$L.STOPPED="stopped",T$L.START="start",T$L.END="end",T$L.ENABLE_CHANGED="enablechanged",T$L.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",T$L.COMPONENT_ADDED="componentadded",T$L.COMPONENT_REMOVED="componentremoved",T$L.LAYER_CHANGED="layerchanged",T$L.HIERARCHY_LOADED="hierarchyloaded",T$L.RECOVERED="recovered",T$L.RELEASED="released",T$L.LINK="link",T$L.LABEL="label",T$L.FULL_SCREEN_CHANGE="fullscreenchange",T$L.DEVICE_LOST="devicelost",T$L.MESH_CHANGED="meshchanged",T$L.MATERIAL_CHANGED="materialchanged",T$L.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",T$L.ANIMATION_CHANGED="animationchanged",T$L.TRIGGER_ENTER="triggerenter",T$L.TRIGGER_STAY="triggerstay",T$L.TRIGGER_EXIT="triggerexit",T$L.TRAIL_FILTER_CHANGE="trailfilterchange",T$L.DOMINO_FILTER_CHANGE="dominofilterchange",T$L;}(),T$C=(function(){function T$L(){}T$V(T$L,"laya.events.Keyboard"),T$L.NUMBER_0=48,T$L.NUMBER_1=49,T$L.NUMBER_2=50,T$L.NUMBER_3=51,T$L.NUMBER_4=52,T$L.NUMBER_5=53,T$L.NUMBER_6=54,T$L.NUMBER_7=55,T$L.NUMBER_8=56,T$L.NUMBER_9=57,T$L.A=65,T$L.B=66,T$L.C=67,T$L.D=68,T$L.E=69,T$L.F=70,T$L.G=71,T$L.H=72,T$L.I=73,T$L.J=74,T$L.K=75,T$L.L=76,T$L.M=77,T$L.N=78,T$L.O=79,T$L.P=80,T$L.Q=81,T$L.R=82,T$L.S=83,T$L.T=84,T$L.U=85,T$L.V=86,T$L.W=87,T$L.X=88,T$L.Y=89,T$L.Z=90,T$L.F1=112,T$L.F2=113,T$L.F3=114,T$L.F4=115,T$L.F5=116,T$L.F6=117,T$L.F7=118,T$L.F8=119,T$L.F9=120,T$L.F10=121,T$L.F11=122,T$L.F12=123,T$L.F13=124,T$L.F14=125,T$L.F15=126,T$L.NUMPAD=21,T$L.NUMPAD_0=96,T$L.NUMPAD_1=97,T$L.NUMPAD_2=98,T$L.NUMPAD_3=99,T$L.NUMPAD_4=100,T$L.NUMPAD_5=101,T$L.NUMPAD_6=102,T$L.NUMPAD_7=103,T$L.NUMPAD_8=104,T$L.NUMPAD_9=105,T$L.NUMPAD_ADD=107,T$L.NUMPAD_DECIMAL=110,T$L.NUMPAD_DIVIDE=111,T$L.NUMPAD_ENTER=108,T$L.NUMPAD_MULTIPLY=106,T$L.NUMPAD_SUBTRACT=109,T$L.SEMICOLON=186,T$L.EQUAL=187,T$L.COMMA=188,T$L.MINUS=189,T$L.PERIOD=190,T$L.SLASH=191,T$L.BACKQUOTE=192,T$L.LEFTBRACKET=219,T$L.BACKSLASH=220,T$L.RIGHTBRACKET=221,T$L.QUOTE=222,T$L.ALTERNATE=18,T$L.BACKSPACE=8,T$L.CAPS_LOCK=20,T$L.COMMAND=15,T$L.CONTROL=17,T$L.DELETE=46,T$L.ENTER=13,T$L.ESCAPE=27,T$L.PAGE_UP=33,T$L.PAGE_DOWN=34,T$L.END=35,T$L.HOME=36,T$L.LEFT=37,T$L.UP=38,T$L.RIGHT=39,T$L.DOWN=40,T$L.SHIFT=16,T$L.SPACE=32,T$L.TAB=9,T$L.INSERT=45;}(),function(){function T$w(){}return T$V(T$w,"laya.events.KeyBoardManager"),T$w.__init__=function(){T$w._addEvent("keydown"),T$w._addEvent("keypress"),T$w._addEvent("keyup");},T$w._addEvent=function(T$s){T$Z.document.addEventListener(T$s,function(T$L){laya.events.KeyBoardManager._dispatch(T$L,T$s);},!0);},T$w._dispatch=function(T$L,T$s){if(T$w.enabled){T$w._event._stoped=!1,T$w._event.nativeEvent=T$L,T$w._event.keyCode=T$L.keyCode||T$L.which||T$L.charCode,"keydown"===T$s?T$w._pressKeys[T$w._event.keyCode]=!0:"keyup"===T$s&&(T$w._pressKeys[T$w._event.keyCode]=null);for(var T$m=T$a.stage.focus&&null!=T$a.stage.focus.event&&T$a.stage.focus.displayedInStage?T$a.stage.focus:T$a.stage,T$x=T$m;T$x;)T$x.event(T$s,T$w._event.setTo(T$s,T$x,T$m)),T$x=T$x.parent;}},T$w.hasKeyDown=function(T$L){return T$w._pressKeys[T$L];},T$w._pressKeys={},T$w.enabled=!0,T$F(T$w,["_event",function(){return this._event=new T$O();}]),T$w;}()),T$T=(function(){function T$L(){}T$V(T$L,"laya.events.KeyLocation"),T$L.STANDARD=0,T$L.LEFT=1,T$L.RIGHT=2,T$L.NUM_PAD=3;}(),function(){function T$o(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=T$Z.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new T$O(),this._matrix=new T$c(),this._point=new T$f(),this._rect=new T$_(),this._prePoint=new T$f(),this._curTouchID=NaN;}T$V(T$o,"laya.events.MouseManager");var T$L=T$o.prototype;return T$L.__init__=function(T$L,T$s){var T$m=this;this._stage=T$L;var T$x=this,T$w=this._eventList;T$s.oncontextmenu=function(T$L){if(T$o.enabled)return!1;},T$s.addEventListener("mousedown",function(T$L){T$o.enabled&&(T$Z.onIE||T$L.preventDefault(),T$w.push(T$L),T$x.mouseDownTime=T$Z.now());}),T$s.addEventListener("mouseup",function(T$L){T$o.enabled&&(T$L.preventDefault(),T$w.push(T$L),T$x.mouseDownTime=-T$Z.now());},!0),T$s.addEventListener("mousemove",function(T$L){if(T$o.enabled){T$L.preventDefault();var T$s=T$Z.now();if(T$s-T$x._lastMoveTimer<10)return;T$x._lastMoveTimer=T$s,T$w.push(T$L);}},!0),T$s.addEventListener("mouseout",function(T$L){T$o.enabled&&T$w.push(T$L);}),T$s.addEventListener("mouseover",function(T$L){T$o.enabled&&T$w.push(T$L);}),T$s.addEventListener("touchstart",function(T$L){T$o.enabled&&(T$w.push(T$L),T$o._isFirstTouch||T$HL.isInputting||T$L.preventDefault(),T$x.mouseDownTime=T$Z.now());}),T$s.addEventListener("touchend",function(T$L){T$o.enabled?(T$o._isFirstTouch||T$HL.isInputting||T$L.preventDefault(),T$o._isFirstTouch=!1,T$w.push(T$L),T$x.mouseDownTime=-T$Z.now()):T$m._curTouchID=NaN;},!0),T$s.addEventListener("touchmove",function(T$L){T$o.enabled&&(T$L.preventDefault(),T$w.push(T$L));},!0),T$s.addEventListener("touchcancel",function(T$L){T$o.enabled?(T$L.preventDefault(),T$w.push(T$L)):T$m._curTouchID=NaN;},!0),T$s.addEventListener("mousewheel",function(T$L){T$o.enabled&&T$w.push(T$L);}),T$s.addEventListener("DOMMouseScroll",function(T$L){T$o.enabled&&T$w.push(T$L);});},T$L.initEvent=function(T$L,T$s){var T$m;this._event._stoped=!1,this._event.nativeEvent=T$s||T$L,this._target=null,this._point.setTo(T$L.pageX||T$L.clientX,T$L.pageY||T$L.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=T$L.identifier||0,this._tTouchID=this._event.touchId,(T$m=T$j.I._event)._stoped=!1,T$m.nativeEvent=this._event.nativeEvent,T$m.touchId=this._event.touchId;},T$L.checkMouseWheel=function(T$L){this._event.delta=T$L.wheelDelta?.025*T$L.wheelDelta:-T$L.detail;for(var T$s=T$j.I.getLastOvers(),T$m=0,T$x=T$s.length;T$m<T$x;T$m++){var T$w=T$s[T$m];T$w.event("mousewheel",this._event.setTo("mousewheel",T$w,this._target));}},T$L.onMouseMove=function(T$L){T$j.I.onMouseMove(T$L,this._tTouchID);},T$L.onMouseDown=function(T$L){if(T$HL.isInputting&&T$a.stage.focus&&T$a.stage.focus.focus&&!T$a.stage.focus.contains(this._target)){var T$s=T$a.stage.focus._tf||T$a.stage.focus,T$m=T$L._tf||T$L;T$m instanceof laya.display.Input&&T$m.multiline==T$s.multiline?T$s._focusOut():T$s.focus=!1;}T$j.I.onMouseDown(T$L,this._tTouchID,this._isLeftMouse);},T$L.onMouseUp=function(T$L){T$j.I.onMouseUp(T$L,this._tTouchID,this._isLeftMouse);},T$L.check=function(T$L,T$s,T$m,T$x){this._point.setTo(T$s,T$m),T$L.fromParentPoint(this._point),T$s=this._point.x,T$m=this._point.y;var T$w=T$L.scrollRect;if(T$w&&(this._rect.setTo(T$w.x,T$w.y,T$w.width,T$w.height),!this._rect.contains(T$s,T$m)))return!1;if(!this.disableMouseEvent){if(T$L.hitTestPrior&&!T$L.mouseThrough&&!this.hitTest(T$L,T$s,T$m))return!1;for(var T$O=T$L._childs.length-1;-1<T$O;T$O--){var T$v=T$L._childs[T$O];if(!T$v.destroyed&&T$v.mouseEnabled&&T$v.visible&&this.check(T$v,T$s,T$m,T$x))return!0;}}var T$y=!(!T$L.hitTestPrior||T$L.mouseThrough||this.disableMouseEvent)||this.hitTest(T$L,T$s,T$m);return T$y?(this._target=T$L,T$x.call(this,T$L)):T$x===this.onMouseUp&&T$L===this._stage&&(this._target=this._stage,T$x.call(this,this._target)),T$y;},T$L.hitTest=function(T$L,T$s,T$m){var T$x=!1;if(T$L.scrollRect&&(T$s-=T$L.scrollRect.x,T$m-=T$L.scrollRect.y),T$L.hitArea instanceof laya.utils.HitArea)return T$L.hitArea.isHit(T$s,T$m);if(0<T$L.width&&0<T$L.height||T$L.mouseThrough||T$L.hitArea)if(T$L.mouseThrough)T$x=T$L.getGraphicBounds().contains(T$s,T$m);else{var T$w=this._rect;T$L.hitArea?T$w=T$L.hitArea:T$w.setTo(0,0,T$L.width,T$L.height),T$x=T$w.contains(T$s,T$m);}return T$x;},T$L.runEvent=function(){var T$L=this._eventList.length;if(T$L){this.mouseEventTime=T$Z.now();var T$s,T$m=0,T$x=0,T$w=0;try{for(;T$m<T$L;){var T$O=this._eventList[T$m];switch("mousemove"!==T$O.type&&(this._prePoint.x=this._prePoint.y=-1e6),T$O.type){case"mousedown":this._touchIDs[0]=this._id++,T$o._isTouchRespond?T$o._isTouchRespond=!1:(this._isLeftMouse=0===T$O.button,this.initEvent(T$O),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===T$O.button,this.initEvent(T$O),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-T$O.clientX)+Math.abs(this._prePoint.y-T$O.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=T$O.clientX,this._prePoint.y=T$O.clientY,this.initEvent(T$O),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":T$o._isTouchRespond=!0,this._isLeftMouse=!0;var T$v=T$O.changedTouches;for(T$x=0,T$w=T$v.length;T$x<T$w;T$x++)T$s=T$v[T$x],(T$o.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=T$s.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[T$s.identifier]=this._id++,this.initEvent(T$s,T$O),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":T$o._isTouchRespond=!0,this._isLeftMouse=!0;var T$y=T$O.changedTouches;for(T$x=0,T$w=T$y.length;T$x<T$w;T$x++)if(T$s=T$y[T$x],T$o.multiTouchEnabled||T$s.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(T$s,T$O);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null);}break;case"touchmove":var T$F=T$O.changedTouches;for(T$x=0,T$w=T$F.length;T$x<T$w;T$x++)T$s=T$F[T$x],(T$o.multiTouchEnabled||T$s.identifier==this._curTouchID)&&(this.initEvent(T$s,T$O),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(T$O);break;case"mouseout":T$j.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage));}T$m++;}}catch(T$L){throw this._eventList.length=0,T$L;}this._eventList.length=0;}},T$o.enabled=!0,T$o.multiTouchEnabled=!0,T$o._isTouchRespond=!1,T$o._isFirstTouch=!0,T$F(T$o,["instance",function(){return this.instance=new T$o();}]),T$o;}()),T$j=function(){function T$u(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new T$O();}T$V(T$u,"laya.events.TouchManager");var T$L=T$u.prototype;return T$L._clearTempArrs=function(){T$u._oldArr.length=0,T$u._newArr.length=0,T$u._tEleArr.length=0;},T$L.getTouchFromArr=function(T$L,T$s){var T$m,T$x,T$w=0;for(T$m=T$s.length,T$w=0;T$w<T$m;T$w++)if((T$x=T$s[T$w]).id==T$L)return T$x;return null;},T$L.removeTouchFromArr=function(T$L,T$s){var T$m=0;for(T$m=T$s.length-1;0<=T$m;T$m--)T$s[T$m].id==T$L&&T$s.splice(T$m,1);},T$L.createTouchO=function(T$L,T$s){var T$m;return(T$m=T$q.getItem("TouchData")||{}).id=T$s,T$m.tar=T$L,T$m;},T$L.onMouseDown=function(T$L,T$s,T$m){var T$x,T$w,T$O,T$v;(void 0===T$m&&(T$m=!1),this.enable)&&(T$x=this.getTouchFromArr(T$s,this.preOvers),T$O=this.getEles(T$L,null,T$u._tEleArr),T$x?T$x.tar=T$L:(T$w=this.createTouchO(T$L,T$s),this.preOvers.push(T$w)),T$Z.onMobile&&this.sendEvents(T$O,"mouseover",T$s),T$v=T$m?this.preDowns:this.preRightDowns,(T$x=this.getTouchFromArr(T$s,T$v))?T$x.tar=T$L:(T$w=this.createTouchO(T$L,T$s),T$v.push(T$w)),this.sendEvents(T$O,T$m?"mousedown":"rightmousedown",T$s),this._clearTempArrs());},T$L.sendEvents=function(T$L,T$s,T$m){void 0===T$m&&(T$m=0);var T$x,T$w,T$O,T$v=0;for(T$x=T$L.length,this._event._stoped=!1,T$w=T$L[0],T$v=0;T$v<T$x;T$v++){if((T$O=T$L[T$v]).destroyed)return;if(T$O.event(T$s,this._event.setTo(T$s,T$O,T$w)),this._event._stoped)break;}},T$L.getEles=function(T$L,T$s,T$m){for(T$m?T$m.length=0:T$m=[];T$L&&T$L!=T$s;)T$m.push(T$L),T$L=T$L.parent;return T$m;},T$L.checkMouseOutAndOverOfMove=function(T$L,T$s,T$m){if(void 0===T$m&&(T$m=0),T$s!=T$L){var T$x,T$w,T$O=0,T$v=0;if(T$s.contains(T$L))T$w=this.getEles(T$L,T$s,T$u._tEleArr),this.sendEvents(T$w,"mouseover",T$m);else if(T$L.contains(T$s))T$w=this.getEles(T$s,T$L,T$u._tEleArr),this.sendEvents(T$w,"mouseout",T$m);else{var T$y,T$F;(T$w=T$u._tEleArr).length=0,T$y=this.getEles(T$s,null,T$u._oldArr),T$F=this.getEles(T$L,null,T$u._newArr),T$v=T$y.length;var T$o=0;for(T$O=0;T$O<T$v;T$O++){if(T$x=T$y[T$O],0<=(T$o=T$F.indexOf(T$x))){T$F.splice(T$o,T$F.length-T$o);break;}T$w.push(T$x);}0<T$w.length&&this.sendEvents(T$w,"mouseout",T$m),0<T$F.length&&this.sendEvents(T$F,"mouseover",T$m);}}},T$L.onMouseMove=function(T$L,T$s){var T$m,T$x;this.enable&&((T$m=this.getTouchFromArr(T$s,this.preOvers))?(this.checkMouseOutAndOverOfMove(T$L,T$m.tar),T$m.tar=T$L,T$x=this.getEles(T$L,null,T$u._tEleArr)):(T$x=this.getEles(T$L,null,T$u._tEleArr),this.sendEvents(T$x,"mouseover",T$s),this.preOvers.push(this.createTouchO(T$L,T$s))),this.sendEvents(T$x,"mousemove",T$s),this._clearTempArrs());},T$L.getLastOvers=function(){return(T$u._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,T$u._tEleArr):(T$u._tEleArr.push(T$a.stage),T$u._tEleArr);},T$L.stageMouseOut=function(){var T$L;T$L=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(T$L,"mouseout",0);},T$L.onMouseUp=function(T$L,T$s,T$m){if(void 0===T$m&&(T$m=!1),this.enable){var T$x,T$w,T$O,T$v,T$y,T$F,T$o=0,T$V=0,T$C=T$Z.onMobile;if(T$w=this.getEles(T$L,null,T$u._tEleArr),this.sendEvents(T$w,T$m?"mouseup":"rightmouseup",T$s),T$F=T$m?this.preDowns:this.preRightDowns,T$x=this.getTouchFromArr(T$s,T$F)){var T$E,T$r=T$Z.now();if(T$E=T$r-this._lastClickTime<300,this._lastClickTime=T$r,T$L==T$x.tar)T$y=T$w;else for(T$O=this.getEles(T$x.tar,null,T$u._oldArr),(T$y=T$u._newArr).length=0,T$V=T$O.length,T$o=0;T$o<T$V;T$o++)T$v=T$O[T$o],0<=T$w.indexOf(T$v)&&T$y.push(T$v);0<T$y.length&&this.sendEvents(T$y,T$m?"click":"rightclick",T$s),T$m&&T$E&&this.sendEvents(T$y,"doubleclick",T$s),this.removeTouchFromArr(T$s,T$F),T$x.tar=null,T$q.recover("TouchData",T$x);}else;(T$x=this.getTouchFromArr(T$s,this.preOvers))&&T$C&&((T$y=this.getEles(T$x.tar,null,T$y))&&0<T$y.length&&this.sendEvents(T$y,"mouseout",T$s),this.removeTouchFromArr(T$s,this.preOvers),T$x.tar=null,T$q.recover("TouchData",T$x)),this._clearTempArrs();}},T$u._oldArr=[],T$u._newArr=[],T$u._tEleArr=[],T$F(T$u,["I",function(){return this.I=new T$u();}]),T$u;}(),T$D=function(){function T$L(){this._action=null;}T$V(T$L,"laya.filters.Filter");var T$s=T$L.prototype;return T$a.imps(T$s,{"laya.filters.IFilter":!0}),T$s.callNative=function(T$L){},T$u(0,T$s,"type",function(){return-1;}),T$u(0,T$s,"action",function(){return this._action;}),T$L.BLUR=16,T$L.COLOR=32,T$L.GLOW=8,T$L._filterStart=null,T$L._filterEnd=null,T$L._EndTarget=null,T$L._recycleScope=null,T$L._filter=null,T$L._useSrc=null,T$L._endSrc=null,T$L._useOut=null,T$L._endOut=null,T$L;}(),T$b=function(){function T$L(){this.data=null;}T$V(T$L,"laya.filters.ColorFilterAction");var T$s=T$L.prototype;return T$a.imps(T$s,{"laya.filters.IFilterAction":!0}),T$s.apply=function(T$L){var T$s=T$L.ctx.ctx,T$m=T$L.ctx.ctx.canvas;if(0==T$m.width||0==T$m.height)return T$m;for(var T$x,T$w=T$s.getImageData(0,0,T$m.width,T$m.height),T$O=T$w.data,T$v=0,T$y=T$O.length;T$v<T$y;T$v+=4)T$x=this.getColor(T$O[T$v],T$O[T$v+1],T$O[T$v+2],T$O[T$v+3]),0!=T$O[T$v+3]&&(T$O[T$v]=T$x[0],T$O[T$v+1]=T$x[1],T$O[T$v+2]=T$x[2],T$O[T$v+3]=T$x[3]);return T$s.putImageData(T$w,0,0),T$L;},T$s.getColor=function(T$L,T$s,T$m,T$x){var T$w=[];if(this.data._mat&&this.data._alpha){var T$O=this.data._mat,T$v=this.data._alpha;T$w[0]=T$O[0]*T$L+T$O[1]*T$s+T$O[2]*T$m+T$O[3]*T$x+T$v[0],T$w[1]=T$O[4]*T$L+T$O[5]*T$s+T$O[6]*T$m+T$O[7]*T$x+T$v[1],T$w[2]=T$O[8]*T$L+T$O[9]*T$s+T$O[10]*T$m+T$O[11]*T$x+T$v[2],T$w[3]=T$O[12]*T$L+T$O[13]*T$s+T$O[14]*T$m+T$O[15]*T$x+T$v[3];}return T$w;},T$L;}(),T$S=(function(){function T$L(){}T$V(T$L,"laya.maths.Arith"),T$L.formatR=function(T$L){return T$L>Math.PI&&(T$L-=2*Math.PI),T$L<-Math.PI&&(T$L+=2*Math.PI),T$L;},T$L.isPOT=function(T$L,T$s){return 0<T$L&&0==(T$L&T$L-1)&&0<T$s&&0==(T$s&T$s-1);},T$L.setMatToArray=function(T$L,T$s){T$L.a,T$L.b,T$L.c,T$L.d,T$L.tx,T$L.ty,T$s[0]=T$L.a,T$s[1]=T$L.b,T$s[4]=T$L.c,T$s[5]=T$L.d,T$s[12]=T$L.tx,T$s[13]=T$L.ty;};}(),function(){function T$L(){this._controlPoints=[new T$f(),new T$f(),new T$f()],this._calFun=this.getPoint2;}T$V(T$L,"laya.maths.Bezier");var T$s=T$L.prototype;return T$s._switchPoint=function(T$L,T$s){var T$m=this._controlPoints.shift();T$m.setTo(T$L,T$s),this._controlPoints.push(T$m);},T$s.getPoint2=function(T$L,T$s){var T$m=this._controlPoints[0],T$x=this._controlPoints[1],T$w=this._controlPoints[2],T$O=Math.pow(1-T$L,2)*T$m.x+2*T$L*(1-T$L)*T$x.x+Math.pow(T$L,2)*T$w.x,T$v=Math.pow(1-T$L,2)*T$m.y+2*T$L*(1-T$L)*T$x.y+Math.pow(T$L,2)*T$w.y;T$s.push(T$O,T$v);},T$s.getPoint3=function(T$L,T$s){var T$m=this._controlPoints[0],T$x=this._controlPoints[1],T$w=this._controlPoints[2],T$O=this._controlPoints[3],T$v=Math.pow(1-T$L,3)*T$m.x+3*T$x.x*T$L*(1-T$L)*(1-T$L)+3*T$w.x*T$L*T$L*(1-T$L)+T$O.x*Math.pow(T$L,3),T$y=Math.pow(1-T$L,3)*T$m.y+3*T$x.y*T$L*(1-T$L)*(1-T$L)+3*T$w.y*T$L*T$L*(1-T$L)+T$O.y*Math.pow(T$L,3);T$s.push(T$v,T$y);},T$s.insertPoints=function(T$L,T$s){var T$m,T$x=NaN;for(T$m=1/(T$L=0<T$L?T$L:5),T$x=0;T$x<=1;T$x+=T$m)this._calFun(T$x,T$s);},T$s.getBezierPoints=function(T$L,T$s,T$m){void 0===T$s&&(T$s=5),void 0===T$m&&(T$m=2);var T$x,T$w,T$O=0;if((T$x=T$L.length)<2*(T$m+1))return[];switch(T$w=[],T$m){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[];}for(;this._controlPoints.length<=T$m;)this._controlPoints.push(new T$f());for(T$O=0;T$O<2*T$m;T$O+=2)this._switchPoint(T$L[T$O],T$L[T$O+1]);for(T$O=2*T$m;T$O<T$x;T$O+=2)this._switchPoint(T$L[T$O],T$L[T$O+1]),T$O/2%T$m==0&&this.insertPoints(T$s,T$w);return T$w;},T$F(T$L,["I",function(){return this.I=new T$L();}]),T$L;}()),T$H=function(){function T$o(){}return T$V(T$o,"laya.maths.GrahamScan"),T$o.multiply=function(T$L,T$s,T$m){return(T$L.x-T$m.x)*(T$s.y-T$m.y)-(T$s.x-T$m.x)*(T$L.y-T$m.y);},T$o.dis=function(T$L,T$s){return(T$L.x-T$s.x)*(T$L.x-T$s.x)+(T$L.y-T$s.y)*(T$L.y-T$s.y);},T$o._getPoints=function(T$L,T$s,T$m){for(void 0===T$s&&(T$s=!1),T$o._mPointList||(T$o._mPointList=[]);T$o._mPointList.length<T$L;)T$o._mPointList.push(new T$f());return T$m||(T$m=[]),T$m.length=0,T$s?T$o.getFrom(T$m,T$o._mPointList,T$L):T$o.getFromR(T$m,T$o._mPointList,T$L),T$m;},T$o.getFrom=function(T$L,T$s,T$m){var T$x=0;for(T$x=0;T$x<T$m;T$x++)T$L.push(T$s[T$x]);return T$L;},T$o.getFromR=function(T$L,T$s,T$m){var T$x=0;for(T$x=0;T$x<T$m;T$x++)T$L.push(T$s.pop());return T$L;},T$o.pListToPointList=function(T$L,T$s){void 0===T$s&&(T$s=!1);var T$m=0,T$x=T$L.length/2,T$w=T$o._getPoints(T$x,T$s,T$o._tempPointList);for(T$m=0;T$m<T$x;T$m++)T$w[T$m].setTo(T$L[T$m+T$m],T$L[T$m+T$m+1]);return T$w;},T$o.pointListToPlist=function(T$L){var T$s,T$m=0,T$x=T$L.length,T$w=T$o._temPList;for(T$m=T$w.length=0;T$m<T$x;T$m++)T$s=T$L[T$m],T$w.push(T$s.x,T$s.y);return T$w;},T$o.scanPList=function(T$L){return T$B.copyArray(T$L,T$o.pointListToPlist(T$o.scan(T$o.pListToPointList(T$L,!0))));},T$o.scan=function(T$L){var T$s,T$m,T$x,T$w=0,T$O=0,T$v=0,T$y=T$L.length,T$F={};for((T$m=T$o._temArr).length=0,T$w=(T$y=T$L.length)-1;0<=T$w;T$w--)T$x=(T$s=T$L[T$w]).x+"_"+T$s.y,T$F.hasOwnProperty(T$x)||(T$F[T$x]=!0,T$m.push(T$s));for(T$y=T$m.length,T$B.copyArray(T$L,T$m),T$w=1;T$w<T$y;T$w++)(T$L[T$w].y<T$L[T$v].y||T$L[T$w].y==T$L[T$v].y&&T$L[T$w].x<T$L[T$v].x)&&(T$v=T$w);for(T$s=T$L[0],T$L[0]=T$L[T$v],T$L[T$v]=T$s,T$w=1;T$w<T$y-1;T$w++){for(T$O=(T$v=T$w)+1;T$O<T$y;T$O++)(0<T$o.multiply(T$L[T$O],T$L[T$v],T$L[0])||0==T$o.multiply(T$L[T$O],T$L[T$v],T$L[0])&&T$o.dis(T$L[0],T$L[T$O])<T$o.dis(T$L[0],T$L[T$v]))&&(T$v=T$O);T$s=T$L[T$w],T$L[T$w]=T$L[T$v],T$L[T$v]=T$s;}if((T$m=T$o._temArr).length=0,T$L.length<3)return T$B.copyArray(T$m,T$L);for(T$m.push(T$L[0],T$L[1],T$L[2]),T$w=3;T$w<T$y;T$w++){for(;2<=T$m.length&&0<=T$o.multiply(T$L[T$w],T$m[T$m.length-1],T$m[T$m.length-2]);)T$m.pop();T$L[T$w]&&T$m.push(T$L[T$w]);}return T$m;},T$o._mPointList=null,T$o._tempPointList=[],T$o._temPList=[],T$o._temArr=[],T$o;}(),T$Y=function(){function T$w(){}return T$V(T$w,"laya.maths.MathUtil"),T$w.subtractVector3=function(T$L,T$s,T$m){T$m[0]=T$L[0]-T$s[0],T$m[1]=T$L[1]-T$s[1],T$m[2]=T$L[2]-T$s[2];},T$w.lerp=function(T$L,T$s,T$m){return T$L*(1-T$m)+T$s*T$m;},T$w.scaleVector3=function(T$L,T$s,T$m){T$m[0]=T$L[0]*T$s,T$m[1]=T$L[1]*T$s,T$m[2]=T$L[2]*T$s;},T$w.lerpVector3=function(T$L,T$s,T$m,T$x){var T$w=T$L[0],T$O=T$L[1],T$v=T$L[2];T$x[0]=T$w+T$m*(T$s[0]-T$w),T$x[1]=T$O+T$m*(T$s[1]-T$O),T$x[2]=T$v+T$m*(T$s[2]-T$v);},T$w.lerpVector4=function(T$L,T$s,T$m,T$x){var T$w=T$L[0],T$O=T$L[1],T$v=T$L[2],T$y=T$L[3];T$x[0]=T$w+T$m*(T$s[0]-T$w),T$x[1]=T$O+T$m*(T$s[1]-T$O),T$x[2]=T$v+T$m*(T$s[2]-T$v),T$x[3]=T$y+T$m*(T$s[3]-T$y);},T$w.slerpQuaternionArray=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){var T$y,T$F,T$o,T$V,T$C,T$E=T$L[T$s+0],T$r=T$L[T$s+1],T$u=T$L[T$s+2],T$T=T$L[T$s+3],T$j=T$m[T$x+0],T$D=T$m[T$x+1],T$e=T$m[T$x+2],T$b=T$m[T$x+3];return(T$F=T$E*T$j+T$r*T$D+T$u*T$e+T$T*T$b)<0&&(T$F=-T$F,T$j=-T$j,T$D=-T$D,T$e=-T$e,T$b=-T$b),T$C=1e-6<1-T$F?(T$y=Math.acos(T$F),T$o=Math.sin(T$y),T$V=Math.sin((1-T$w)*T$y)/T$o,Math.sin(T$w*T$y)/T$o):(T$V=1-T$w,T$w),T$O[T$v+0]=T$V*T$E+T$C*T$j,T$O[T$v+1]=T$V*T$r+T$C*T$D,T$O[T$v+2]=T$V*T$u+T$C*T$e,T$O[T$v+3]=T$V*T$T+T$C*T$b,T$O;},T$w.getRotation=function(T$L,T$s,T$m,T$x){return Math.atan2(T$x-T$s,T$m-T$L)/Math.PI*180;},T$w.sortBigFirst=function(T$L,T$s){return T$L==T$s?0:T$L<T$s?1:-1;},T$w.sortSmallFirst=function(T$L,T$s){return T$L==T$s?0:T$L<T$s?-1:1;},T$w.sortNumBigFirst=function(T$L,T$s){return parseFloat(T$s)-parseFloat(T$L);},T$w.sortNumSmallFirst=function(T$L,T$s){return parseFloat(T$L)-parseFloat(T$s);},T$w.sortByKey=function(T$m,T$L,T$s){var T$x;return void 0===T$L&&(T$L=!1),void 0===T$s&&(T$s=!0),T$x=T$L?T$s?T$w.sortNumBigFirst:T$w.sortBigFirst:T$s?T$w.sortNumSmallFirst:T$w.sortSmallFirst,function(T$L,T$s){return T$x(T$L[T$m],T$s[T$m]);};},T$w;}(),T$c=function(){function T$m(T$L,T$s,T$m,T$x,T$w,T$O){this.inPool=!1,this.bTransform=!1,void 0===T$L&&(T$L=1),void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0),void 0===T$x&&(T$x=1),void 0===T$w&&(T$w=0),void 0===T$O&&(T$O=0),this.a=T$L,this.b=T$s,this.c=T$m,this.d=T$x,this.tx=T$w,this.ty=T$O,this._checkTransform();}T$V(T$m,"laya.maths.Matrix");var T$L=T$m.prototype;return T$L.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this;},T$L._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d;},T$L.setTranslate=function(T$L,T$s){return this.tx=T$L,this.ty=T$s,this;},T$L.translate=function(T$L,T$s){return this.tx+=T$L,this.ty+=T$s,this;},T$L.scale=function(T$L,T$s){this.a*=T$L,this.d*=T$s,this.c*=T$L,this.b*=T$s,this.tx*=T$L,this.ty*=T$s,this.bTransform=!0;},T$L.rotate=function(T$L){var T$s=Math.cos(T$L),T$m=Math.sin(T$L),T$x=this.a,T$w=this.c,T$O=this.tx;this.a=T$x*T$s-this.b*T$m,this.b=T$x*T$m+this.b*T$s,this.c=T$w*T$s-this.d*T$m,this.d=T$w*T$m+this.d*T$s,this.tx=T$O*T$s-this.ty*T$m,this.ty=T$O*T$m+this.ty*T$s,this.bTransform=!0;},T$L.skew=function(T$L,T$s){var T$m=Math.tan(T$L),T$x=Math.tan(T$s),T$w=this.a,T$O=this.b;return this.a+=T$x*this.c,this.b+=T$x*this.d,this.c+=T$m*T$w,this.d+=T$m*T$O,this;},T$L.invertTransformPoint=function(T$L){var T$s=this.a,T$m=this.b,T$x=this.c,T$w=this.d,T$O=this.tx,T$v=T$s*T$w-T$m*T$x,T$y=T$w/T$v,T$F=-T$m/T$v,T$o=-T$x/T$v,T$V=T$s/T$v,T$C=(T$x*this.ty-T$w*T$O)/T$v,T$E=-(T$s*this.ty-T$m*T$O)/T$v;return T$L.setTo(T$y*T$L.x+T$o*T$L.y+T$C,T$F*T$L.x+T$V*T$L.y+T$E);},T$L.transformPoint=function(T$L){return T$L.setTo(this.a*T$L.x+this.c*T$L.y+this.tx,this.b*T$L.x+this.d*T$L.y+this.ty);},T$L.transformPointN=function(T$L){return T$L.setTo(this.a*T$L.x+this.c*T$L.y,this.b*T$L.x+this.d*T$L.y);},T$L.transformPointArray=function(T$L,T$s){for(var T$m=T$L.length,T$x=0;T$x<T$m;T$x+=2){var T$w=T$L[T$x],T$O=T$L[T$x+1];T$s[T$x]=this.a*T$w+this.c*T$O+this.tx,T$s[T$x+1]=this.b*T$w+this.d*T$O+this.ty;}return T$s;},T$L.transformPointArrayScale=function(T$L,T$s){for(var T$m=T$L.length,T$x=0;T$x<T$m;T$x+=2){var T$w=T$L[T$x],T$O=T$L[T$x+1];T$s[T$x]=this.a*T$w+this.c*T$O,T$s[T$x+1]=this.b*T$w+this.d*T$O;}return T$s;},T$L.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b);},T$L.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d);},T$L.invert=function(){var T$L=this.a,T$s=this.b,T$m=this.c,T$x=this.d,T$w=this.tx,T$O=T$L*T$x-T$s*T$m;return this.a=T$x/T$O,this.b=-T$s/T$O,this.c=-T$m/T$O,this.d=T$L/T$O,this.tx=(T$m*this.ty-T$x*T$w)/T$O,this.ty=-(T$L*this.ty-T$s*T$w)/T$O,this;},T$L.setTo=function(T$L,T$s,T$m,T$x,T$w,T$O){return this.a=T$L,this.b=T$s,this.c=T$m,this.d=T$x,this.tx=T$w,this.ty=T$O,this;},T$L.concat=function(T$L){var T$s=this.a,T$m=this.c,T$x=this.tx;return this.a=T$s*T$L.a+this.b*T$L.c,this.b=T$s*T$L.b+this.b*T$L.d,this.c=T$m*T$L.a+this.d*T$L.c,this.d=T$m*T$L.b+this.d*T$L.d,this.tx=T$x*T$L.a+this.ty*T$L.c+T$L.tx,this.ty=T$x*T$L.b+this.ty*T$L.d+T$L.ty,this;},T$L.scaleEx=function(T$L,T$s){var T$m=this.a,T$x=this.b,T$w=this.c,T$O=this.d;0!==T$x||0!==T$w?(this.a=T$L*T$m,this.b=T$L*T$x,this.c=T$s*T$w):(this.a=T$L*T$m,this.b=0*T$O,this.c=0*T$m),this.d=T$s*T$O,this.bTransform=!0;},T$L.rotateEx=function(T$L){var T$s=Math.cos(T$L),T$m=Math.sin(T$L),T$x=this.a,T$w=this.b,T$O=this.c,T$v=this.d;0!==T$w||0!==T$O?(this.a=T$s*T$x+T$m*T$O,this.b=T$s*T$w+T$m*T$v,this.c=-T$m*T$x+T$s*T$O,this.d=-T$m*T$w+T$s*T$v):(this.a=T$s*T$x,this.b=T$m*T$v,this.c=-T$m*T$x,this.d=T$s*T$v),this.bTransform=!0;},T$L.clone=function(){var T$L=T$m.create();return T$L.a=this.a,T$L.b=this.b,T$L.c=this.c,T$L.d=this.d,T$L.tx=this.tx,T$L.ty=this.ty,T$L.bTransform=this.bTransform,T$L;},T$L.copyTo=function(T$L){return T$L.a=this.a,T$L.b=this.b,T$L.c=this.c,T$L.d=this.d,T$L.tx=this.tx,T$L.ty=this.ty,T$L.bTransform=this.bTransform,T$L;},T$L.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty;},T$L.destroy=function(){if(!this.inPool){var T$L=T$m._cache;this.inPool=!0,T$L._length||(T$L._length=0),(T$L[T$L._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1;}},T$m.mul=function(T$L,T$s,T$m){var T$x=T$L.a,T$w=T$L.b,T$O=T$L.c,T$v=T$L.d,T$y=T$L.tx,T$F=T$L.ty,T$o=T$s.a,T$V=T$s.b,T$C=T$s.c,T$E=T$s.d,T$r=T$s.tx,T$u=T$s.ty;return 0!==T$V||0!==T$C?(T$m.a=T$x*T$o+T$w*T$C,T$m.b=T$x*T$V+T$w*T$E,T$m.c=T$O*T$o+T$v*T$C,T$m.d=T$O*T$V+T$v*T$E,T$m.tx=T$o*T$y+T$C*T$F+T$r,T$m.ty=T$V*T$y+T$E*T$F+T$u):(T$m.a=T$x*T$o,T$m.b=T$w*T$E,T$m.c=T$O*T$o,T$m.d=T$v*T$E,T$m.tx=T$o*T$y+T$r,T$m.ty=T$E*T$F+T$u),T$m;},T$m.mul16=function(T$L,T$s,T$m){var T$x=T$L.a,T$w=T$L.b,T$O=T$L.c,T$v=T$L.d,T$y=T$L.tx,T$F=T$L.ty,T$o=T$s.a,T$V=T$s.b,T$C=T$s.c,T$E=T$s.d,T$r=T$s.tx,T$u=T$s.ty;return 0!==T$V||0!==T$C?(T$m[0]=T$x*T$o+T$w*T$C,T$m[1]=T$x*T$V+T$w*T$E,T$m[4]=T$O*T$o+T$v*T$C,T$m[5]=T$O*T$V+T$v*T$E,T$m[12]=T$o*T$y+T$C*T$F+T$r,T$m[13]=T$V*T$y+T$E*T$F+T$u):(T$m[0]=T$x*T$o,T$m[1]=T$w*T$E,T$m[4]=T$O*T$o,T$m[5]=T$v*T$E,T$m[12]=T$o*T$y+T$r,T$m[13]=T$E*T$F+T$u),T$m;},T$m.mulPre=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){var T$F=T$L.a,T$o=T$L.b,T$V=T$L.c,T$C=T$L.d,T$E=T$L.tx,T$r=T$L.ty;return 0!==T$m||0!==T$x?(T$y.a=T$F*T$s+T$o*T$x,T$y.b=T$F*T$m+T$o*T$w,T$y.c=T$V*T$s+T$C*T$x,T$y.d=T$V*T$m+T$C*T$w,T$y.tx=T$s*T$E+T$x*T$r+T$O,T$y.ty=T$m*T$E+T$w*T$r+T$v):(T$y.a=T$F*T$s,T$y.b=T$o*T$w,T$y.c=T$V*T$s,T$y.d=T$C*T$w,T$y.tx=T$s*T$E+T$O,T$y.ty=T$w*T$r+T$v),T$y;},T$m.mulPos=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){var T$F=T$L.a,T$o=T$L.b,T$V=T$L.c,T$C=T$L.d,T$E=T$L.tx,T$r=T$L.ty;return 0!==T$o||0!==T$V?(T$y.a=T$s*T$F+T$m*T$V,T$y.b=T$s*T$o+T$m*T$C,T$y.c=T$x*T$F+T$w*T$V,T$y.d=T$x*T$o+T$w*T$C,T$y.tx=T$F*T$O+T$V*T$v+T$E,T$y.ty=T$o*T$O+T$C*T$v+T$r):(T$y.a=T$s*T$F,T$y.b=T$m*T$C,T$y.c=T$x*T$F,T$y.d=T$w*T$C,T$y.tx=T$F*T$O+T$E,T$y.ty=T$C*T$v+T$r),T$y;},T$m.preMul=function(T$L,T$s,T$m){var T$x=T$L.a,T$w=T$L.b,T$O=T$L.c,T$v=T$L.d,T$y=T$s.a,T$F=T$s.b,T$o=T$s.c,T$V=T$s.d,T$C=T$s.tx,T$E=T$s.ty;return T$m.a=T$y*T$x,T$m.b=T$m.c=0,T$m.d=T$V*T$v,T$m.tx=T$C*T$x+T$L.tx,T$m.ty=T$E*T$v+T$L.ty,0===T$F&&0===T$o&&0===T$w&&0===T$O||(T$m.a+=T$F*T$O,T$m.d+=T$o*T$w,T$m.b+=T$y*T$w+T$F*T$v,T$m.c+=T$o*T$x+T$V*T$O,T$m.tx+=T$E*T$O,T$m.ty+=T$C*T$w),T$m;},T$m.preMulXY=function(T$L,T$s,T$m,T$x){var T$w=T$L.a,T$O=T$L.b,T$v=T$L.c,T$y=T$L.d;return T$x.a=T$w,T$x.b=T$O,T$x.c=T$v,T$x.d=T$y,T$x.tx=T$s*T$w+T$L.tx+T$m*T$v,T$x.ty=T$m*T$y+T$L.ty+T$s*T$O,T$x;},T$m.create=function(){var T$L=T$m._cache,T$s=T$L._length?T$L[--T$L._length]:new T$m();return T$s.inPool=!1,T$s;},T$m.EMPTY=new T$m(),T$m.TEMP=new T$m(),T$m._cache=[],T$m;}(),T$f=function(){function T$L(T$L,T$s){void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=0),this.x=T$L,this.y=T$s;}T$V(T$L,"laya.maths.Point");var T$s=T$L.prototype;return T$s.setTo=function(T$L,T$s){return this.x=T$L,this.y=T$s,this;},T$s.distance=function(T$L,T$s){return Math.sqrt((this.x-T$L)*(this.x-T$L)+(this.y-T$s)*(this.y-T$s));},T$s.toString=function(){return this.x+","+this.y;},T$s.normalize=function(){var T$L=Math.sqrt(this.x*this.x+this.y*this.y);if(0<T$L){var T$s=1/T$L;this.x*=T$s,this.y*=T$s;}},T$L.TEMP=new T$L(),T$L.EMPTY=new T$L(),T$L;}(),T$_=function(){function T$o(T$L,T$s,T$m,T$x){void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0),void 0===T$x&&(T$x=0),this.x=T$L,this.y=T$s,this.width=T$m,this.height=T$x;}T$V(T$o,"laya.maths.Rectangle");var T$L=T$o.prototype;return T$L.setTo=function(T$L,T$s,T$m,T$x){return this.x=T$L,this.y=T$s,this.width=T$m,this.height=T$x,this;},T$L.copyFrom=function(T$L){return this.x=T$L.x,this.y=T$L.y,this.width=T$L.width,this.height=T$L.height,this;},T$L.contains=function(T$L,T$s){return!(this.width<=0||this.height<=0)&&T$L>=this.x&&T$L<this.right&&T$s>=this.y&&T$s<this.bottom;},T$L.intersects=function(T$L){return!(T$L.x>this.x+this.width||T$L.x+T$L.width<this.x||T$L.y>this.y+this.height||T$L.y+T$L.height<this.y);},T$L.intersection=function(T$L,T$s){return this.intersects(T$L)?(T$s||(T$s=new T$o()),T$s.x=Math.max(this.x,T$L.x),T$s.y=Math.max(this.y,T$L.y),T$s.width=Math.min(this.right,T$L.right)-T$s.x,T$s.height=Math.min(this.bottom,T$L.bottom)-T$s.y,T$s):null;},T$L.union=function(T$L,T$s){return T$s||(T$s=new T$o()),this.clone(T$s),T$L.width<=0||T$L.height<=0?T$s:(T$s.addPoint(T$L.x,T$L.y),T$s.addPoint(T$L.right,T$L.bottom),this);},T$L.clone=function(T$L){return T$L||(T$L=new T$o()),T$L.x=this.x,T$L.y=this.y,T$L.width=this.width,T$L.height=this.height,T$L;},T$L.toString=function(){return this.x+","+this.y+","+this.width+","+this.height;},T$L.equals=function(T$L){return!(!T$L||T$L.x!==this.x||T$L.y!==this.y||T$L.width!==this.width||T$L.height!==this.height);},T$L.addPoint=function(T$L,T$s){return this.x>T$L&&(this.width+=this.x-T$L,this.x=T$L),this.y>T$s&&(this.height+=this.y-T$s,this.y=T$s),this.width<T$L-this.x&&(this.width=T$L-this.x),this.height<T$s-this.y&&(this.height=T$s-this.y),this;},T$L._getBoundPoints=function(){var T$L=T$o._temB;return(T$L.length=0)==this.width||0==this.height||T$L.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),T$L;},T$L.isEmpty=function(){return this.width<=0||this.height<=0;},T$u(0,T$L,"right",function(){return this.x+this.width;}),T$u(0,T$L,"bottom",function(){return this.y+this.height;}),T$o._getBoundPointS=function(T$L,T$s,T$m,T$x){var T$w=T$o._temA;return(T$w.length=0)==T$m||0==T$x||T$w.push(T$L,T$s,T$L+T$m,T$s,T$L,T$s+T$x,T$L+T$m,T$s+T$x),T$w;},T$o._getWrapRec=function(T$L,T$s){if(!T$L||T$L.length<1)return T$s?T$s.setTo(0,0,0,0):T$o.TEMP.setTo(0,0,0,0);T$s=T$s||new T$o();var T$m,T$x,T$w,T$O,T$v,T$y=T$L.length,T$F=T$f.TEMP;for(T$w=T$v=-(T$x=T$O=99999),T$m=0;T$m<T$y;T$m+=2)T$F.x=T$L[T$m],T$F.y=T$L[T$m+1],T$x=T$x<T$F.x?T$x:T$F.x,T$O=T$O<T$F.y?T$O:T$F.y,T$w=T$w>T$F.x?T$w:T$F.x,T$v=T$v>T$F.y?T$v:T$F.y;return T$s.setTo(T$x,T$O,T$w-T$x,T$v-T$O);},T$o.EMPTY=new T$o(),T$o.TEMP=new T$o(),T$o._temB=[],T$o._temA=[],T$o;}(),T$i=function(){function T$F(){}return T$V(T$F,"laya.media.SoundManager"),T$u(1,T$F,"useAudioMusic",function(){return T$F._useAudioMusic;},function(T$L){T$F._useAudioMusic=T$L,T$F._musicClass=T$L?T$mL:null;}),T$u(1,T$F,"autoStopMusic",function(){return T$F._autoStopMusic;},function(T$L){T$a.stage.off("blur",null,T$F._stageOnBlur),T$a.stage.off("focus",null,T$F._stageOnFocus),T$a.stage.off("visibilitychange",null,T$F._visibilityChange),(T$F._autoStopMusic=T$L)&&(T$a.stage.on("blur",null,T$F._stageOnBlur),T$a.stage.on("focus",null,T$F._stageOnFocus),T$a.stage.on("visibilitychange",null,T$F._visibilityChange));}),T$u(1,T$F,"muted",function(){return T$F._muted;},function(T$L){T$L!=T$F._muted&&(T$L&&T$F.stopAllSound(),T$F.musicMuted=T$L,T$F._muted=T$L);}),T$u(1,T$F,"musicMuted",function(){return T$F._musicMuted;},function(T$L){T$L!=T$F._musicMuted&&(T$L?(T$F._tMusic&&T$F._musicChannel&&!T$F._musicChannel.isStopped?T$F._musicChannel.pause():T$F._musicChannel=null,T$F._musicMuted=T$L):(T$F._musicMuted=T$L,T$F._tMusic&&T$F._musicChannel&&T$F._musicChannel.resume()));}),T$u(1,T$F,"soundMuted",function(){return T$F._soundMuted;},function(T$L){T$F._soundMuted=T$L;}),T$F.addChannel=function(T$L){0<=T$F._channels.indexOf(T$L)||(T$F._channels.push(T$L),T$F.autoReleaseSound&&0!=T$F._notUsedCount&&T$F._notUsedUrls[T$L.url]&&(delete T$F._notUsedUrls[T$L.url],0==--T$F._notUsedCount&&T$a.timer.clear(T$F,T$F.disposeSoundIfNotUsed)));},T$F.removeChannel=function(T$L){var T$s=T$F._channels,T$m=T$s.indexOf(T$L);if(-1!=T$m&&(T$s.splice(T$m,1),T$F.autoReleaseSound)){var T$x=T$L.url,T$w=T$F.defaultIntervals[T$x]||2e4;if(0<T$w){var T$O=!0;for(T$m=T$s.length-1;0<=T$m;T$m--)if(T$s[T$m].url==T$x){T$O=!1;break;}T$O&&(T$F._notUsedUrls[T$x]=Date.now()+T$w,0==T$F._notUsedCount++&&T$a.timer.loop(1e4,T$F,T$F.disposeSoundIfNotUsed));}}},T$F.disposeSoundIfNotUsed=function(){var T$L=T$F._notUsedUrls;if(0!=T$F._notUsedCount){var T$s=Date.now();for(var T$m in T$L)T$s>=T$L[T$m]&&(delete T$L[T$m],--T$F._notUsedCount,T$F.destroySound(T$m));if(0!=T$F._notUsedCount)return;}T$a.timer.clear(T$F,T$F.disposeSoundIfNotUsed);},T$F._visibilityChange=function(){T$a.stage.isVisibility?T$F._stageOnFocus():T$F._stageOnBlur();},T$F._stageOnBlur=function(){T$F._isActive=!1,T$F._musicChannel&&(T$F._musicChannel.isStopped||(T$F._blurPaused=!0,T$F._musicChannel.pause())),T$F.stopAllSound(),T$a.stage.once("mousedown",null,T$F._stageOnFocus);},T$F._recoverWebAudio=function(){T$OL.ctx&&"running"!=T$OL.ctx.state&&T$OL.ctx.resume&&T$OL.ctx.resume();},T$F._stageOnFocus=function(){if(T$F._isActive=!0,T$F._recoverWebAudio(),T$a.stage.off("mousedown",null,T$F._stageOnFocus),T$F._blurPaused){var T$L=T$F._musicChannel;T$L&&T$F._music&&T$L.isStopped&&(T$F._blurPaused=!1,T$F._music._disposed?T$F.playMusic(T$L.url,T$L.loops,T$L.startHandler,T$L.completeHandler,T$L.startTime):T$L.audioBuffer?T$L.resume():T$F._music.play(T$L.startTime,T$L.loops,T$L.startHandler,T$L));}},T$F.playSound=function(T$L,T$s,T$m,T$x,T$w,T$O){if(void 0===T$s&&(T$s=1),void 0===T$O&&(T$O=0),!T$L)return null;if(T$F._muted)return null;if(T$F._recoverWebAudio(),T$L==T$F._tMusic){if(T$F._musicMuted)return null;}else{if(!T$F._isActive)return null;if(T$F._soundMuted)return null;}var T$v,T$y=T$F._pool[T$L];return T$w||(T$w=T$F._soundClass),T$y||((T$y=new T$w()).load(T$L),T$F._pool[T$L]=T$y),(T$v=T$y.play(T$O,T$s,T$m))?(T$L==T$F._tMusic&&(T$F._music=T$y,T$F._isActive||(T$F._blurPaused=!0,T$v.pause())),T$v.url=T$L,T$v.volume=T$L==T$F._tMusic?T$F.musicVolume:T$F.soundVolume,T$v.completeHandler=T$x,T$v):null;},T$F.destroySound=function(T$L){var T$s=T$F._pool[T$L];T$s&&(delete T$F._pool[T$L],T$s.dispose());},T$F.playMusic=function(T$L,T$s,T$m,T$x,T$w){return void 0===T$s&&(T$s=0),void 0===T$w&&(T$w=0),T$F._tMusic=T$L,T$F._musicChannel&&T$F._musicChannel.stop(),T$F._musicChannel=T$F.playSound(T$L,T$s,T$m,T$x,null,T$w);},T$F.stopSound=function(T$L){for(var T$s,T$m=T$F._channels.length-1;0<=T$m;T$m--)(T$s=T$F._channels[T$m]).url==T$L&&T$s.stop();},T$F.stopAll=function(){T$F._tMusic=null;var T$L=0;for(T$L=T$F._channels.length-1;0<=T$L;T$L--)T$F._channels[T$L].stop();},T$F.stopAllSound=function(){var T$L,T$s=0;for(T$s=T$F._channels.length-1;0<=T$s;T$s--)(T$L=T$F._channels[T$s]).url!=T$F._tMusic&&T$L.stop();},T$F.stopMusic=function(){T$F._musicChannel&&T$F._musicChannel.stop(),T$F._tMusic=null;},T$F.setSoundVolume=function(T$L,T$s){if(T$s)T$F._setVolume(T$s,T$L);else{T$F.soundVolume=T$L;var T$m,T$x=0;for(T$x=T$F._channels.length-1;0<=T$x;T$x--)(T$m=T$F._channels[T$x]).url!=T$F._tMusic&&(T$m.volume=T$L);}},T$F.setMusicVolume=function(T$L){T$F.musicVolume=T$L,T$F._setVolume(T$F._tMusic,T$L);},T$F._setVolume=function(T$L,T$s){for(var T$m,T$x=T$F._channels.length-1;0<=T$x;T$x--)(T$m=T$F._channels[T$x]).url==T$L&&(T$m.volume=T$s);},T$F.musicVolume=1,T$F.soundVolume=1,T$F.playbackRate=1,T$F._useAudioMusic=!0,T$F._muted=!1,T$F._soundMuted=!1,T$F._musicMuted=!1,T$F._tMusic=null,T$F._musicChannel=null,T$F._music=null,T$F._channels=[],T$F._autoStopMusic=!1,T$F._blurPaused=!1,T$F._isActive=!0,T$F._soundClass=null,T$F._musicClass=null,T$F.autoReleaseSound=!0,T$F._pool={},T$F.defaultIntervals={},T$F._notUsedUrls={},T$F._notUsedCount=0,T$F;}(),T$Q=function(){var T$L;function T$m(){}return T$V(T$m,"laya.net.LocalStorage"),T$m.__init__=function(){T$m._baseClass||(T$m._baseClass=T$L).init(),T$m.items=T$m._baseClass.items,T$m.support=T$m._baseClass.support;},T$m.setItem=function(T$L,T$s){T$m._baseClass.setItem(T$L,T$s);},T$m.getItem=function(T$L){return T$m._baseClass.getItem(T$L);},T$m.setJSON=function(T$L,T$s){T$m._baseClass.setJSON(T$L,T$s);},T$m.getJSON=function(T$L){return T$m._baseClass.getJSON(T$L);},T$m.removeItem=function(T$L){T$m._baseClass.removeItem(T$L);},T$m.clear=function(){T$m._baseClass.clear();},T$m._baseClass=null,T$m.items=null,T$m.support=!1,T$m.__init$=function(){T$L=function(){function T$m(){}return T$V(T$m,""),T$m.init=function(){try{T$m.support=!0,T$m.items=T$v.localStorage,T$m.setItem("laya","1"),T$m.removeItem("laya");}catch(T$L){T$m.support=!1;}T$m.support||console.log("LocalStorage is not supprot or browser is private mode.");},T$m.setItem=function(T$L,T$s){try{T$m.support&&T$m.items.setItem(T$L,T$s);}catch(T$L){console.warn("set localStorage failed",T$L);}},T$m.getItem=function(T$L){return T$m.support?T$m.items.getItem(T$L):null;},T$m.setJSON=function(T$L,T$s){try{T$m.support&&T$m.items.setItem(T$L,JSON.stringify(T$s));}catch(T$L){console.warn("set localStorage failed",T$L);}},T$m.getJSON=function(T$L){return JSON.parse(T$m.support?T$m.items.getItem(T$L):null);},T$m.removeItem=function(T$L){T$m.support&&T$m.items.removeItem(T$L);},T$m.clear=function(){T$m.support&&T$m.items.clear();},T$m.items=null,T$m.support=!1,T$m;}();},T$m;}(),T$h=(function(){function T$x(){}T$V(T$x,"laya.net.ResourceVersion"),T$x.enable=function(T$L,T$s,T$m){void 0===T$m&&(T$m=2),laya.net.ResourceVersion.type=T$m,T$a.loader.load(T$L,T$e.create(null,T$x.onManifestLoaded,[T$s]),null,"json"),T$G.customFormat=T$x.addVersionPrefix;},T$x.onManifestLoaded=function(T$L,T$s){T$x.manifest=T$s,T$L.run(),T$s||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。");},T$x.addVersionPrefix=function(T$L){return T$x.manifest&&T$x.manifest[T$L]?2==T$x.type?T$x.manifest[T$L]:T$x.manifest[T$L]+"/"+T$L:T$L;},T$x.FOLDER_VERSION=1,T$x.FILENAME_VERSION=2,T$x.manifest=null,T$x.type=1;}(),function(){function T$L(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null;}T$V(T$L,"laya.net.TTFLoader");var T$s=T$L.prototype;return T$s.load=function(T$L){var T$s=(this._url=T$L).split(".ttf")[0].split("/");this.fontName=T$s[T$s.length-1],T$Z.window.conch?this._loadConch():T$Z.window.FontFace?this._loadWithFontFace():this._loadWithCSS();},T$s._loadConch=function(){this._http=new T$vL(),this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer");},T$s._onHttpLoaded=function(T$L){T$Z.window.conch.setFontFaceFromBuffer(this.fontName,T$L),this._clearHttp(),this._complete();},T$s._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null);},T$s._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null);},T$s._complete=function(){T$a.timer.clear(this,this._complete),T$a.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null);},T$s._checkComplete=function(){T$U.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete();},T$s._loadWithFontFace=function(){var T$L=new T$Z.window.FontFace(this.fontName,"url('"+this._url+"')");T$Z.window.document.fonts.add(T$L);var T$s=this;T$L.loaded.then(function(){T$s._complete();}),T$L.load();},T$s._createDiv=function(){this._div=T$Z.createElement("div"),this._div.innerHTML="laya";var T$L=this._div.style;T$L.fontFamily=this.fontName,T$L.position="absolute",T$L.left="-100px",T$L.top="-100px",T$Z.document.body.appendChild(this._div);},T$s._loadWithCSS=function(){var T$L=this,T$s=T$Z.createElement("style");T$s.type="text/css",T$Z.document.body.appendChild(T$s),T$s.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=T$U.measureText("LayaTTFFont",this._fontTxt).width;var T$m=this;T$s.onload=function(){T$a.timer.once(1e4,T$m,T$L._complete);},T$a.timer.loop(20,this,this._checkComplete),this._createDiv();},T$L._testString="LayaTTFFont",T$L;}()),T$G=function(){function T$x(T$L){this._url=null,this._path=null,this._url=T$x.formatURL(T$L),this._path=T$x.getPath(T$L);}T$V(T$x,"laya.net.URL");var T$L=T$x.prototype;return T$u(0,T$L,"path",function(){return this._path;}),T$u(0,T$L,"url",function(){return this._url;}),T$x.formatURL=function(T$L,T$s){if(!T$L)return"null path";if(0<T$L.indexOf(":"))return T$L;null!=T$x.customFormat&&(T$L=T$x.customFormat(T$L,T$s));var T$m=T$L.charAt(0);if("."===T$m)return T$x.formatRelativePath((T$s||T$x.basePath)+T$L);if("~"===T$m)return T$x.rootPath+T$L.substring(1);if("d"===T$m){if(0===T$L.indexOf("data:image"))return T$L;}else if("/"===T$m)return T$L;return(T$s||T$x.basePath)+T$L;},T$x.formatRelativePath=function(T$L){for(var T$s=T$L.split("/"),T$m=0,T$x=T$s.length;T$m<T$x;T$m++)".."==T$s[T$m]&&(T$s.splice(T$m-1,2),T$m-=2);return T$s.join("/");},T$x.isAbsolute=function(T$L){return 0<T$L.indexOf(":")||"/"==T$L.charAt(0);},T$x.getPath=function(T$L){var T$s=T$L.lastIndexOf("/");return 0<T$s?T$L.substr(0,T$s+1):"";},T$x.getFileName=function(T$L){var T$s=T$L.lastIndexOf("/");return 0<T$s?T$L.substr(T$s+1):T$L;},T$x.version={},T$x.basePath="",T$x.rootPath="",T$x.customFormat=function(T$L){var T$s=T$x.version[T$L];return!T$R.isConchApp&&T$s&&(T$L+="?v="+T$s),T$L;},T$x;}(),T$R=function(){function T$w(T$L,T$s){this._timeId=0;var T$m=T$w._mainCanvas.source.style;T$m.position="absolute",T$m.top=T$m.left="0px",T$m.background="#000000",T$w._mainCanvas.source.id="layaCanvas";var T$x=laya.renders.Render.isWebGL;T$w._mainCanvas.source.width=T$L,T$w._mainCanvas.source.height=T$s,T$x&&T$w.WebGL.init(T$w._mainCanvas,T$L,T$s),T$Z.container.appendChild(T$w._mainCanvas.source),(T$w._context=new T$A(T$L,T$s,T$x?null:T$w._mainCanvas)).ctx.setIsMainContext(),T$Z.window.requestAnimationFrame(function T$L(T$s){T$Z.window.requestAnimationFrame(T$L);T$a.stage._loop();}),T$a.stage.on("visibilitychange",this,this._onVisibilitychange);}T$V(T$w,"laya.renders.Render");var T$L=T$w.prototype;return T$L._onVisibilitychange=function(){T$a.stage.isVisibility?0!=this._timeId&&T$Z.window.clearInterval(this._timeId):this._timeId=T$Z.window.setInterval(this._enterFrame,1e3);},T$L._enterFrame=function(T$L){T$a.stage._loop();},T$u(1,T$w,"context",function(){return T$w._context;}),T$u(1,T$w,"canvas",function(){return T$w._mainCanvas.source;}),T$w._context=null,T$w._mainCanvas=null,T$w.WebGL=null,T$w.isConchNode=!1,T$w.isConchApp=!1,T$w.isConchWebGL=!1,T$w.isWebGL=!1,T$w.is3DMode=!1,T$w.optimizeTextureMemory=function(T$L,T$s){return!0;},T$w.__init$=function(){T$v.ConchRenderType=T$v.ConchRenderType||1,T$v.ConchRenderType|=T$v.conch?4:0,T$w.isConchNode=5==(5&T$v.ConchRenderType),T$w.isConchApp=4==(4&T$v.ConchRenderType),T$w.isConchWebGL=6==T$v.ConchRenderType;},T$w;}(),T$A=function(){function T$v(T$L,T$s,T$m){this.x=0,this.y=0,this._drawTexture=function(T$L,T$s,T$m){T$m[0].loaded&&this.ctx.drawTexture(T$m[0],T$m[1],T$m[2],T$m[3],T$m[4],T$L,T$s);},this._fillTexture=function(T$L,T$s,T$m){T$m[0].loaded&&this.ctx.fillTexture(T$m[0],T$m[1]+T$L,T$m[2]+T$s,T$m[3],T$m[4],T$m[5],T$m[6],T$m[7]);},this._drawTextureWithTransform=function(T$L,T$s,T$m){T$m[0].loaded&&this.ctx.drawTextureWithTransform(T$m[0],T$m[1],T$m[2],T$m[3],T$m[4],T$m[5],T$L,T$s,T$m[6]);},this._fillQuadrangle=function(T$L,T$s,T$m){this.ctx.fillQuadrangle(T$m[0],T$m[1],T$m[2],T$m[3],T$m[4]);},this._drawRect=function(T$L,T$s,T$m){var T$x=this.ctx;null!=T$m[4]&&(T$x.fillStyle=T$m[4],T$x.fillRect(T$L+T$m[0],T$s+T$m[1],T$m[2],T$m[3],null)),null!=T$m[5]&&(T$x.strokeStyle=T$m[5],T$x.lineWidth=T$m[6],T$x.strokeRect(T$L+T$m[0],T$s+T$m[1],T$m[2],T$m[3],T$m[6]));},this._drawPie=function(T$L,T$s,T$m){var T$x=this.ctx;T$R.isWebGL&&T$x.setPathId(T$m[8]),T$x.beginPath(),T$R.isWebGL?(T$x.movePath(T$m[0]+T$L,T$m[1]+T$s),T$x.moveTo(0,0)):T$x.moveTo(T$L+T$m[0],T$s+T$m[1]),T$x.arc(T$L+T$m[0],T$s+T$m[1],T$m[2],T$m[3],T$m[4]),T$x.closePath(),this._fillAndStroke(T$m[5],T$m[6],T$m[7],!0);},this._clipRect=function(T$L,T$s,T$m){this.ctx.clipRect(T$L+T$m[0],T$s+T$m[1],T$m[2],T$m[3]);},this._fillRect=function(T$L,T$s,T$m){this.ctx.fillRect(T$L+T$m[0],T$s+T$m[1],T$m[2],T$m[3],T$m[4]);},this._drawCircle=function(T$L,T$s,T$m){var T$x=this.ctx;T$R.isWebGL&&T$x.setPathId(T$m[6]),T$K.drawCall++,T$x.beginPath(),T$R.isWebGL&&T$x.movePath(T$m[0]+T$L,T$m[1]+T$s),T$x.arc(T$m[0]+T$L,T$m[1]+T$s,T$m[2],0,T$v.PI2),T$x.closePath(),this._fillAndStroke(T$m[3],T$m[4],T$m[5],!0);},this._fillCircle=function(T$L,T$s,T$m){T$K.drawCall++;var T$x=this.ctx;T$x.beginPath(),T$x.fillStyle=T$m[3],T$x.arc(T$m[0]+T$L,T$m[1]+T$s,T$m[2],0,T$v.PI2),T$x.fill();},this._setShader=function(T$L,T$s,T$m){this.ctx.setShader(T$m[0]);},this._drawLine=function(T$L,T$s,T$m){var T$x=this.ctx;T$R.isWebGL&&T$x.setPathId(T$m[6]),T$x.beginPath(),T$x.strokeStyle=T$m[4],T$x.lineWidth=T$m[5],T$R.isWebGL?(T$x.movePath(T$L,T$s),T$x.moveTo(T$m[0],T$m[1]),T$x.lineTo(T$m[2],T$m[3])):(T$x.moveTo(T$L+T$m[0],T$s+T$m[1]),T$x.lineTo(T$L+T$m[2],T$s+T$m[3])),T$x.stroke();},this._drawLines=function(T$L,T$s,T$m){var T$x=this.ctx;T$R.isWebGL&&T$x.setPathId(T$m[5]),T$x.beginPath(),T$L+=T$m[0],T$s+=T$m[1],T$R.isWebGL&&T$x.movePath(T$L,T$s),T$x.strokeStyle=T$m[3],T$x.lineWidth=T$m[4];var T$w=T$m[2],T$O=2,T$v=T$w.length;if(T$R.isWebGL)for(T$x.moveTo(T$w[0],T$w[1]);T$O<T$v;)T$x.lineTo(T$w[T$O++],T$w[T$O++]);else for(T$x.moveTo(T$L+T$w[0],T$s+T$w[1]);T$O<T$v;)T$x.lineTo(T$L+T$w[T$O++],T$s+T$w[T$O++]);T$x.stroke();},this._drawLinesWebGL=function(T$L,T$s,T$m){this.ctx.drawLines(T$L+this.x+T$m[0],T$s+this.y+T$m[1],T$m[2],T$m[3],T$m[4]);},this._drawCurves=function(T$L,T$s,T$m){this.ctx.drawCurves(T$L,T$s,T$m);},this._draw=function(T$L,T$s,T$m){T$m[0].call(null,this,T$L,T$s);},this._transformByMatrix=function(T$L,T$s,T$m){this.ctx.transformByMatrix(T$m[0]);},this._setTransform=function(T$L,T$s,T$m){this.ctx.setTransform(T$m[0],T$m[1],T$m[2],T$m[3],T$m[4],T$m[5]);},this._setTransformByMatrix=function(T$L,T$s,T$m){this.ctx.setTransformByMatrix(T$m[0]);},this._save=function(T$L,T$s,T$m){this.ctx.save();},this._restore=function(T$L,T$s,T$m){this.ctx.restore();},this._translate=function(T$L,T$s,T$m){this.ctx.translate(T$m[0],T$m[1]);},this._transform=function(T$L,T$s,T$m){this.ctx.translate(T$m[1]+T$L,T$m[2]+T$s);var T$x=T$m[0];this.ctx.transform(T$x.a,T$x.b,T$x.c,T$x.d,T$x.tx,T$x.ty),this.ctx.translate(-T$L-T$m[1],-T$s-T$m[2]);},this._rotate=function(T$L,T$s,T$m){this.ctx.translate(T$m[1]+T$L,T$m[2]+T$s),this.ctx.rotate(T$m[0]),this.ctx.translate(-T$L-T$m[1],-T$s-T$m[2]);},this._scale=function(T$L,T$s,T$m){this.ctx.translate(T$m[2]+T$L,T$m[3]+T$s),this.ctx.scale(T$m[0],T$m[1]),this.ctx.translate(-T$L-T$m[2],-T$s-T$m[3]);},this._alpha=function(T$L,T$s,T$m){this.ctx.globalAlpha*=T$m[0];},this._setAlpha=function(T$L,T$s,T$m){this.ctx.globalAlpha=T$m[0];},this._fillText=function(T$L,T$s,T$m){this.ctx.fillText(T$m[0],T$m[1]+T$L,T$m[2]+T$s,T$m[3],T$m[4],T$m[5]);},this._strokeText=function(T$L,T$s,T$m){this.ctx.strokeText(T$m[0],T$m[1]+T$L,T$m[2]+T$s,T$m[3],T$m[4],T$m[5],T$m[6]);},this._fillBorderText=function(T$L,T$s,T$m){this.ctx.fillBorderText(T$m[0],T$m[1]+T$L,T$m[2]+T$s,T$m[3],T$m[4],T$m[5],T$m[6],T$m[7]);},this._blendMode=function(T$L,T$s,T$m){this.ctx.globalCompositeOperation=T$m[0];},this._beginClip=function(T$L,T$s,T$m){this.ctx.beginClip&&this.ctx.beginClip(T$L+T$m[0],T$s+T$m[1],T$m[2],T$m[3]);},this._setIBVB=function(T$L,T$s,T$m){this.ctx.setIBVB(T$m[0]+T$L,T$m[1]+T$s,T$m[2],T$m[3],T$m[4],T$m[5],T$m[6],T$m[7]);},this._fillTrangles=function(T$L,T$s,T$m){this.ctx.fillTrangles(T$m[0],T$m[1]+T$L,T$m[2]+T$s,T$m[3],T$m[4]);},this._drawPath=function(T$L,T$s,T$m){var T$x=this.ctx;T$R.isWebGL&&T$x.setPathId(-1),T$x.beginPath(),T$L+=T$m[0],T$s+=T$m[1],T$R.isWebGL&&T$x.movePath(T$L,T$s);for(var T$w=T$m[2],T$O=0,T$v=T$w.length;T$O<T$v;T$O++){var T$y=T$w[T$O];switch(T$y[0]){case"moveTo":T$R.isWebGL?T$x.moveTo(T$y[1],T$y[2]):T$x.moveTo(T$L+T$y[1],T$s+T$y[2]);break;case"lineTo":T$R.isWebGL?T$x.lineTo(T$y[1],T$y[2]):T$x.lineTo(T$L+T$y[1],T$s+T$y[2]);break;case"arcTo":T$R.isWebGL?T$x.arcTo(T$y[1],T$y[2],T$y[3],T$y[4],T$y[5]):T$x.arcTo(T$L+T$y[1],T$s+T$y[2],T$L+T$y[3],T$s+T$y[4],T$y[5]);break;case"closePath":T$x.closePath();}}var T$F=T$m[3];null!=T$F&&(T$x.fillStyle=T$F.fillStyle,T$x.fill());var T$o=T$m[4];null!=T$o&&(T$x.strokeStyle=T$o.strokeStyle,T$x.lineWidth=T$o.lineWidth||1,T$x.lineJoin=T$o.lineJoin,T$x.lineCap=T$o.lineCap,T$x.miterLimit=T$o.miterLimit,T$x.stroke());},this.drawPoly=function(T$L,T$s,T$m){this.ctx.drawPoly(T$L+this.x+T$m[0],T$s+this.y+T$m[1],T$m[2],T$m[3],T$m[4],T$m[5],T$m[6]);},this._drawPoly=function(T$L,T$s,T$m){var T$x=this.ctx,T$w=T$m[2],T$O=2,T$v=T$w.length;if(T$R.isWebGL)for(T$x.setPathId(T$m[6]),T$x.beginPath(),T$L+=T$m[0],T$s+=T$m[1],T$x.movePath(T$L,T$s),T$x.moveTo(T$w[0],T$w[1]);T$O<T$v;)T$x.lineTo(T$w[T$O++],T$w[T$O++]);else for(T$x.beginPath(),T$L+=T$m[0],T$s+=T$m[1],T$x.moveTo(T$L+T$w[0],T$s+T$w[1]);T$O<T$v;)T$x.lineTo(T$L+T$w[T$O++],T$s+T$w[T$O++]);T$x.closePath(),this._fillAndStroke(T$m[3],T$m[4],T$m[5],T$m[7]);},this._drawSkin=function(T$L,T$s,T$m){var T$x=T$m[0];if(T$x){var T$w=this.ctx;T$x.render(T$w,T$L,T$s);}},this._drawParticle=function(T$L,T$s,T$m){this.ctx.drawParticle(T$L+this.x,T$s+this.y,T$m[0]);},this._setFilters=function(T$L,T$s,T$m){this.ctx.setFilters(T$m);},T$m?this.ctx=T$m.getContext("2d"):(T$m=T$bL.create("3D"),this.ctx=T$U.createWebGLContext2D(T$m),T$m._setContext(this.ctx)),T$m.size(T$L,T$s),this.canvas=T$m;}T$V(T$v,"laya.renders.RenderContext");var T$L=T$v.prototype;return T$L.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null);},T$L.drawTexture=function(T$L,T$s,T$m,T$x,T$w){T$L.loaded&&this.ctx.drawTexture(T$L,T$s,T$m,T$x,T$w,this.x,this.y);},T$L._drawTextures=function(T$L,T$s,T$m){T$m[0].loaded&&this.ctx.drawTextures(T$m[0],T$m[1],T$L+this.x,T$s+this.y);},T$L.drawTextureWithTransform=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){T$L.loaded&&this.ctx.drawTextureWithTransform(T$L,T$s,T$m,T$x,T$w,T$O,this.x,this.y,T$v);},T$L.fillQuadrangle=function(T$L,T$s,T$m,T$x,T$w){this.ctx.fillQuadrangle(T$L,T$s,T$m,T$x,T$w);},T$L.drawCanvas=function(T$L,T$s,T$m,T$x,T$w){this.ctx.drawCanvas(T$L,T$s+this.x,T$m+this.y,T$x,T$w);},T$L.drawRect=function(T$L,T$s,T$m,T$x,T$w,T$O){void 0===T$O&&(T$O=1);var T$v=this.ctx;T$v.strokeStyle=T$w,T$v.lineWidth=T$O,T$v.strokeRect(T$L+this.x,T$s+this.y,T$m,T$x,T$O);},T$L._fillAndStroke=function(T$L,T$s,T$m,T$x){void 0===T$x&&(T$x=!1);var T$w=this.ctx;null!=T$L&&(T$w.fillStyle=T$L,T$R.isWebGL?T$w.fill(T$x):T$w.fill()),null!=T$s&&0<T$m&&(T$w.strokeStyle=T$s,T$w.lineWidth=T$m,T$w.stroke());},T$L.clipRect=function(T$L,T$s,T$m,T$x){this.ctx.clipRect(T$L+this.x,T$s+this.y,T$m,T$x);},T$L.fillRect=function(T$L,T$s,T$m,T$x,T$w){this.ctx.fillRect(T$L+this.x,T$s+this.y,T$m,T$x,T$w);},T$L.drawCircle=function(T$L,T$s,T$m,T$x,T$w){void 0===T$w&&(T$w=1),T$K.drawCall++;var T$O=this.ctx;T$O.beginPath(),T$O.strokeStyle=T$x,T$O.lineWidth=T$w,T$O.arc(T$L+this.x,T$s+this.y,T$m,0,T$v.PI2),T$O.stroke();},T$L.drawTriangles=function(T$L,T$s,T$m){if(T$R.isWebGL)this.ctx.drawTriangles(T$m[0],T$L+T$m[1],T$s+T$m[2],T$m[3],T$m[4],T$m[5],T$m[6],T$m[7],T$m[8],T$m[9]);else{var T$x=T$m[5],T$w=0,T$O=T$x.length,T$v=this.ctx;for(T$w=0;T$w<T$O;T$w+=3){var T$y=2*T$x[T$w],T$F=2*T$x[T$w+1],T$o=2*T$x[T$w+2];T$v.drawTriangle(T$m[0],T$m[3],T$m[4],T$y,T$F,T$o,T$m[6],!0);}}},T$L.fillCircle=function(T$L,T$s,T$m,T$x){T$K.drawCall++;var T$w=this.ctx;T$w.beginPath(),T$w.fillStyle=T$x,T$w.arc(T$L+this.x,T$s+this.y,T$m,0,T$v.PI2),T$w.fill();},T$L.setShader=function(T$L){this.ctx.setShader(T$L);},T$L.drawLine=function(T$L,T$s,T$m,T$x,T$w,T$O){void 0===T$O&&(T$O=1);var T$v=this.ctx;T$v.beginPath(),T$v.strokeStyle=T$w,T$v.lineWidth=T$O,T$v.moveTo(this.x+T$L,this.y+T$s),T$v.lineTo(this.x+T$m,this.y+T$x),T$v.stroke();},T$L.clear=function(){this.ctx.clear();},T$L.transformByMatrix=function(T$L){this.ctx.transformByMatrix(T$L);},T$L.setTransform=function(T$L,T$s,T$m,T$x,T$w,T$O){this.ctx.setTransform(T$L,T$s,T$m,T$x,T$w,T$O);},T$L.setTransformByMatrix=function(T$L){this.ctx.setTransformByMatrix(T$L);},T$L.save=function(){this.ctx.save();},T$L.restore=function(){this.ctx.restore();},T$L.translate=function(T$L,T$s){this.ctx.translate(T$L,T$s);},T$L.transform=function(T$L,T$s,T$m,T$x,T$w,T$O){this.ctx.transform(T$L,T$s,T$m,T$x,T$w,T$O);},T$L.rotate=function(T$L){this.ctx.rotate(T$L);},T$L.scale=function(T$L,T$s){this.ctx.scale(T$L,T$s);},T$L.alpha=function(T$L){this.ctx.globalAlpha*=T$L;},T$L.setAlpha=function(T$L){this.ctx.globalAlpha=T$L;},T$L.fillWords=function(T$L,T$s,T$m,T$x,T$w,T$O){void 0===T$O&&(T$O=0),this.ctx.fillWords(T$L,T$s,T$m,T$x,T$w,T$O);},T$L.fillBorderWords=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){this.ctx.fillBorderWords(T$L,T$s,T$m,T$x,T$w,T$O,T$v);},T$L.fillText=function(T$L,T$s,T$m,T$x,T$w,T$O){this.ctx.fillText(T$L,T$s+this.x,T$m+this.y,T$x,T$w,T$O);},T$L.strokeText=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){this.ctx.strokeText(T$L,T$s+this.x,T$m+this.y,T$x,T$w,T$O,T$v);},T$L.blendMode=function(T$L){this.ctx.globalCompositeOperation=T$L;},T$L.flush=function(){this.ctx.flush&&this.ctx.flush();},T$L.addRenderObject=function(T$L){this.ctx.addRenderObject(T$L);},T$L.beginClip=function(T$L,T$s,T$m,T$x){this.ctx.beginClip&&this.ctx.beginClip(T$L,T$s,T$m,T$x);},T$L.endClip=function(){this.ctx.endClip&&this.ctx.endClip();},T$L.fillTrangles=function(T$L,T$s,T$m){this.ctx.fillTrangles(T$m[0],T$m[1],T$m[2],T$m[3],4<T$m.length?T$m[4]:null);},T$v.PI2=2*Math.PI,T$v;}(),T$g=function(){function T$v(T$L,T$s){switch(this._next=T$s||T$v.NORENDER,T$L){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=T$D._filter);case 69905:return void(this._fun=T$v._initRenderFun);}this.onCreate(T$L);}T$V(T$v,"laya.renders.RenderSprite");var T$L=T$v.prototype;return T$L.onCreate=function(T$L){},T$L._style=function(T$L,T$s,T$m,T$x){T$L._style.render(T$L,T$s,T$m,T$x);var T$w=this._next;T$w._fun.call(T$w,T$L,T$s,T$m,T$x);},T$L._no=function(T$L,T$s,T$m,T$x){},T$L._custom=function(T$L,T$s,T$m,T$x){T$L.customRender(T$s,T$m,T$x);var T$w=T$L._style._tf;this._next._fun.call(this._next,T$L,T$s,T$m-T$w.translateX,T$x-T$w.translateY);},T$L._clip=function(T$L,T$s,T$m,T$x){var T$w=this._next;if(T$w!=T$v.NORENDER){var T$O=T$L._style.scrollRect;T$s.ctx.save(),T$s.ctx.clipRect(T$m,T$x,T$O.width,T$O.height),T$w._fun.call(T$w,T$L,T$s,T$m-T$O.x,T$x-T$O.y),T$s.ctx.restore();}},T$L._blend=function(T$L,T$s,T$m,T$x){var T$w=T$L._style;T$w.blendMode&&(T$s.ctx.globalCompositeOperation=T$w.blendMode);var T$O=this._next;T$O._fun.call(T$O,T$L,T$s,T$m,T$x),T$s.ctx.globalCompositeOperation="source-over";},T$L._mask=function(T$L,T$s,T$m,T$x){var T$w=this._next;T$w._fun.call(T$w,T$L,T$s,T$m,T$x);var T$O=T$L.mask;T$O&&(T$s.ctx.globalCompositeOperation="destination-in",(0<T$O.numChildren||!T$O.graphics._isOnlyOne())&&(T$O.cacheAsBitmap=!0),T$O.render(T$s,T$m-T$L.pivotX,T$x-T$L.pivotY)),T$s.ctx.globalCompositeOperation="source-over";},T$L._graphics=function(T$L,T$s,T$m,T$x){var T$w=T$L._style._tf;T$L._graphics&&T$L._graphics._render(T$L,T$s,T$m-T$w.translateX,T$x-T$w.translateY);var T$O=this._next;T$O._fun.call(T$O,T$L,T$s,T$m,T$x);},T$L._image=function(T$L,T$s,T$m,T$x){var T$w=T$L._style;T$s.ctx.drawTexture2(T$m,T$x,T$w._tf.translateX,T$w._tf.translateY,T$L.transform,T$w.alpha,T$w.blendMode,T$L._graphics._one);},T$L._image2=function(T$L,T$s,T$m,T$x){var T$w=T$L._style._tf;T$s.ctx.drawTexture2(T$m,T$x,T$w.translateX,T$w.translateY,T$L.transform,1,null,T$L._graphics._one);},T$L._alpha=function(T$L,T$s,T$m,T$x){var T$w;if(.01<(T$w=T$L._style.alpha)||T$L._needRepaint()){var T$O=T$s.ctx.globalAlpha;T$s.ctx.globalAlpha*=T$w;var T$v=this._next;T$v._fun.call(T$v,T$L,T$s,T$m,T$x),T$s.ctx.globalAlpha=T$O;}},T$L._transform=function(T$L,T$s,T$m,T$x){var T$w=T$L.transform,T$O=this._next;T$w&&T$O!=T$v.NORENDER?(T$s.save(),T$s.transform(T$w.a,T$w.b,T$w.c,T$w.d,T$w.tx+T$m,T$w.ty+T$x),T$O._fun.call(T$O,T$L,T$s,0,0),T$s.restore()):T$O._fun.call(T$O,T$L,T$s,T$m,T$x);},T$L._childs=function(T$L,T$s,T$m,T$x){var T$w=T$L._style,T$O=T$w._tf;if(T$m=T$m-T$O.translateX+T$w.paddingLeft,T$x=T$x-T$O.translateY+T$w.paddingTop,T$w._calculation){var T$v=T$L._getWords();if(T$v){var T$y=T$w;T$y&&(T$y.stroke?T$s.fillBorderWords(T$v,T$m,T$x,T$y.font,T$y.color,T$y.strokeColor,T$y.stroke):T$s.fillWords(T$v,T$m,T$x,T$y.font,T$y.color,"none"!=T$y.textDecoration&&T$y.underLine?1:0));}}var T$F,T$o=T$L._childs,T$V=T$o.length;if(T$L.viewport||T$L.optimizeScrollRect&&T$L._style.scrollRect){var T$C=T$L.viewport||T$L._style.scrollRect,T$E=T$C.x,T$r=T$C.y,T$u=T$C.right,T$T=T$C.bottom,T$j=NaN,T$D=NaN;for(T$e=0;T$e<T$V;++T$e)(T$F=T$o[T$e]).visible&&(T$j=T$F._x)<T$u&&T$j+T$F.width>T$E&&(T$D=T$F._y)<T$T&&T$D+T$F.height>T$r&&T$F.render(T$s,T$m,T$x);}else for(var T$e=0;T$e<T$V;++T$e)(T$F=T$o[T$e])._style.visible&&T$F.render(T$s,T$m,T$x);},T$L._canvas=function(T$L,T$s,T$m,T$x){var T$w=T$L._$P.cacheCanvas;if(T$w){"bitmap"===T$w.type?T$K.canvasBitmap++:T$K.canvasNormal++;var T$O=T$w.ctx;if(T$L._needRepaint()||!T$O)this._canvas_repaint(T$L,T$s,T$m,T$x);else{var T$v=T$w._cacheRec;T$s.drawCanvas(T$O.canvas,T$m+T$v.x,T$x+T$v.y,T$v.width,T$v.height);}}else this._next._fun.call(this._next,T$L,T$s,T$m,T$x);},T$L._canvas_repaint=function(T$L,T$s,T$m,T$x){var T$w=T$L._$P.cacheCanvas,T$O=this._next;if(T$w){var T$v,T$y,T$F,T$o,T$V=T$w.ctx,T$C=T$L._needRepaint()||!T$V,T$E=T$w.type;if("bitmap"===T$E?T$K.canvasBitmap++:T$K.canvasNormal++,T$C){var T$r,T$u;T$w._cacheRec||(T$w._cacheRec=new T$_()),T$R.isWebGL&&"bitmap"!==T$E?T$w._cacheRec.setTo(-T$L.pivotX,-T$L.pivotY,1,1):((T$o=T$L.getSelfBounds()).x=T$o.x-T$L.pivotX,T$o.y=T$o.y-T$L.pivotY,T$o.x=T$o.x-16,T$o.y=T$o.y-16,T$o.width=T$o.width+32,T$o.height=T$o.height+32,T$o.x=Math.floor(T$o.x+T$m)-T$m,T$o.y=Math.floor(T$o.y+T$x)-T$x,T$o.width=Math.floor(T$o.width),T$o.height=Math.floor(T$o.height),T$w._cacheRec.copyFrom(T$o)),T$o=T$w._cacheRec;var T$T,T$j=T$R.isWebGL?1:T$Z.pixelRatio*T$a.stage.clientScaleX,T$D=T$R.isWebGL?1:T$Z.pixelRatio*T$a.stage.clientScaleY;if(!T$R.isWebGL){var T$e,T$b=1,T$S=1;for(T$e=T$L;T$e&&T$e!=T$a.stage;)T$b*=T$e.scaleX,T$S*=T$e.scaleY,T$e=T$e.parent;T$R.isWebGL?(T$b<1&&(T$j*=T$b),T$S<1&&(T$D*=T$S)):(1<T$b&&(T$j*=T$b),1<T$S&&(T$D*=T$S));}if(T$L.scrollRect){var T$H=T$L.scrollRect;T$o.x-=T$H.x,T$o.y-=T$H.y;}if(T$r=T$o.width*T$j,T$u=T$o.height*T$D,T$y=T$o.x,T$F=T$o.y,T$R.isWebGL&&"bitmap"===T$E&&(2048<T$r||2048<T$u))return console.warn("cache bitmap size larger than 2048,cache ignored"),T$w.ctx&&(T$q.recover("RenderContext",T$w.ctx),T$w.ctx.canvas.size(0,0),T$w.ctx=null),void T$O._fun.call(T$O,T$L,T$s,T$m,T$x);if(T$V||(T$V=T$w.ctx=T$q.getItem("RenderContext")||new T$A(T$r,T$u,T$bL.create("AUTO"))),T$V.ctx.sprite=T$L,(T$v=T$V.canvas).clear(),(T$v.width!=T$r||T$v.height!=T$u)&&T$v.size(T$r,T$u),"bitmap"===T$E?T$v.context.asBitmap=!0:"normal"===T$E&&(T$v.context.asBitmap=!1),1!=T$j||1!=T$D){var T$Y=T$V.ctx;T$Y.save(),T$Y.scale(T$j,T$D),!T$R.isConchWebGL&&T$R.isConchApp&&(T$T=T$L._$P.cf)&&T$Y.setFilterMatrix&&T$Y.setFilterMatrix(T$T._mat,T$T._alpha),T$O._fun.call(T$O,T$L,T$V,-T$y,-T$F),T$Y.restore(),T$R.isConchApp&&!T$R.isConchWebGL||T$L._applyFilters();}else T$Y=T$V.ctx,!T$R.isConchWebGL&&T$R.isConchApp&&(T$T=T$L._$P.cf)&&T$Y.setFilterMatrix&&T$Y.setFilterMatrix(T$T._mat,T$T._alpha),T$O._fun.call(T$O,T$L,T$V,-T$y,-T$F),T$R.isConchApp&&!T$R.isConchWebGL||T$L._applyFilters();T$L._$P.staticCache&&(T$w.reCache=!1),T$K.canvasReCache++;}else T$y=(T$o=T$w._cacheRec).x,T$F=T$o.y,T$v=T$V.canvas;T$s.drawCanvas(T$v,T$m+T$y,T$x+T$F,T$o.width,T$o.height);}else T$O._fun.call(T$O,T$L,T$V,T$m,T$x);},T$v.__init__=function(){var T$L,T$s,T$m=0;for(T$s=T$U.createRenderSprite(69905,null),T$L=T$v.renders.length=4096,T$m=0;T$m<T$L;T$m++)T$v.renders[T$m]=T$s;T$v.renders[0]=T$U.createRenderSprite(0,null),function(T$L,T$s){for(var T$m=0,T$x=0;T$x<T$L.length;T$x++)T$m|=T$L[T$x],T$v.renders[T$m]=T$s;}([1,512,4,2],new T$v(1,null)),T$v.renders[513]=T$U.createRenderSprite(513,null),T$v.renders[517]=new T$v(517,null);},T$v._initRenderFun=function(T$L,T$s,T$m,T$x){var T$w=T$L._renderType;(T$v.renders[T$w]=T$v._getTypeRender(T$w))._fun(T$L,T$s,T$m,T$x);},T$v._getTypeRender=function(T$L){for(var T$s=null,T$m=2048;1<T$m;)T$m&T$L&&(T$s=T$U.createRenderSprite(T$m,T$s)),T$m>>=1;return T$s;},T$v.IMAGE=1,T$v.ALPHA=2,T$v.TRANSFORM=4,T$v.BLEND=8,T$v.CANVAS=16,T$v.FILTERS=32,T$v.MASK=64,T$v.CLIP=128,T$v.STYLE=256,T$v.GRAPHICS=512,T$v.CUSTOM=1024,T$v.CHILDS=2048,T$v.INIT=69905,T$v.renders=[],T$v.NORENDER=new T$v(0,null),T$v;}(),T$$=function(){function T$y(){this._repaint=!1;}T$V(T$y,"laya.resource.Context");var T$L=T$y.prototype;return T$L.replaceReset=function(){var T$L,T$s,T$m=0;for(T$L=T$y.replaceKeys.length,T$m=0;T$m<T$L;T$m++)T$s=T$y.replaceKeys[T$m],this[T$y.newKeys[T$m]]=this[T$s];},T$L.replaceResotre=function(){this.__restore(),this.__reset();},T$L.setIsMainContext=function(){},T$L.drawTextures=function(T$L,T$s,T$m,T$x){T$K.drawCall+=T$s.length/2;for(var T$w=T$L.width,T$O=T$L.height,T$v=0,T$y=T$s.length;T$v<T$y;T$v+=2)this.drawTexture(T$L,T$s[T$v],T$s[T$v+1],T$w,T$O,T$m,T$x);},T$L.drawCanvas=function(T$L,T$s,T$m,T$x,T$w){T$K.drawCall++,this.drawImage(T$L.source,T$s,T$m,T$x,T$w);},T$L.fillRect=function(T$L,T$s,T$m,T$x,T$w){T$K.drawCall++,T$w&&(this.fillStyle=T$w),this.__fillRect(T$L,T$s,T$m,T$x);},T$L.fillText=function(T$L,T$s,T$m,T$x,T$w,T$O){T$K.drawCall++,3<arguments.length&&null!=T$x&&(this.font=T$x,this.fillStyle=T$w,this.textAlign=T$O,this.textBaseline="top"),this.__fillText(T$L,T$s,T$m);},T$L.fillBorderText=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){T$K.drawCall++,this.font=T$x,this.fillStyle=T$w,this.textBaseline="top",this.strokeStyle=T$O,this.lineWidth=T$v,this.textAlign=T$y,this.__strokeText(T$L,T$s,T$m),this.__fillText(T$L,T$s,T$m);},T$L.strokeText=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){T$K.drawCall++,3<arguments.length&&null!=T$x&&(this.font=T$x,this.strokeStyle=T$w,this.lineWidth=T$O,this.textAlign=T$v,this.textBaseline="top"),this.__strokeText(T$L,T$s,T$m);},T$L.transformByMatrix=function(T$L){this.transform(T$L.a,T$L.b,T$L.c,T$L.d,T$L.tx,T$L.ty);},T$L.setTransformByMatrix=function(T$L){this.setTransform(T$L.a,T$L.b,T$L.c,T$L.d,T$L.tx,T$L.ty);},T$L.clipRect=function(T$L,T$s,T$m,T$x){T$K.drawCall++,this.beginPath(),this.rect(T$L,T$s,T$m,T$x),this.clip();},T$L.drawTexture=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){T$K.drawCall++;var T$y=T$L.uv,T$F=T$L.bitmap.width,T$o=T$L.bitmap.height;this.drawImage(T$L.source,T$y[0]*T$F,T$y[1]*T$o,(T$y[2]-T$y[0])*T$F,(T$y[5]-T$y[3])*T$o,T$s+T$O,T$m+T$v,T$x,T$w);},T$L.drawTextureWithTransform=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F){T$K.drawCall++;var T$o=T$L.uv,T$V=T$L.bitmap.width,T$C=T$L.bitmap.height;this.save(),1!=T$F&&(this.globalAlpha*=T$F),T$O?(this.transform(T$O.a,T$O.b,T$O.c,T$O.d,T$O.tx+T$v,T$O.ty+T$y),this.drawImage(T$L.source,T$o[0]*T$V,T$o[1]*T$C,(T$o[2]-T$o[0])*T$V,(T$o[5]-T$o[3])*T$C,T$s,T$m,T$x,T$w)):this.drawImage(T$L.source,T$o[0]*T$V,T$o[1]*T$C,(T$o[2]-T$o[0])*T$V,(T$o[5]-T$o[3])*T$C,T$s+T$v,T$m+T$y,T$x,T$w),this.restore();},T$L.drawTexture2=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){var T$F=T$y[0];if(T$F.loaded&&T$F.bitmap&&T$F.source){T$K.drawCall++;var T$o=1!==T$O;if(T$o){var T$V=this.globalAlpha;this.globalAlpha*=T$O;}var T$C=T$F.uv,T$E=T$F.bitmap.width,T$r=T$F.bitmap.height;T$w?(this.save(),this.transform(T$w.a,T$w.b,T$w.c,T$w.d,T$w.tx+T$L,T$w.ty+T$s),this.drawImage(T$F.source,T$C[0]*T$E,T$C[1]*T$r,(T$C[2]-T$C[0])*T$E,(T$C[5]-T$C[3])*T$r,T$y[1]-T$m,T$y[2]-T$x,T$y[3],T$y[4]),this.restore()):this.drawImage(T$F.source,T$C[0]*T$E,T$C[1]*T$r,(T$C[2]-T$C[0])*T$E,(T$C[5]-T$C[3])*T$r,T$y[1]-T$m+T$L,T$y[2]-T$x+T$s,T$y[3],T$y[4]),T$o&&(this.globalAlpha=T$V);}},T$L.fillTexture=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){if(!T$y.pat){if(T$L.uv!=T$VL.DEF_UV){var T$F=new T$bL("2D");T$F.getContext("2d"),T$F.size(T$L.width,T$L.height),T$F.context.drawTexture(T$L,0,0,T$L.width,T$L.height,0,0),T$L=new T$VL(T$F);}T$y.pat=this.createPattern(T$L.bitmap.source,T$O);}var T$o=T$s,T$V=T$m,T$C=0,T$E=0;T$v&&(T$o+=T$v.x%T$L.width,T$V+=T$v.y%T$L.height,T$C-=T$v.x%T$L.width,T$E-=T$v.y%T$L.height),this.translate(T$o,T$V),this.fillRect(T$C,T$E,T$x,T$w,T$y.pat),this.translate(-T$o,-T$V);},T$L.drawTriangle=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){var T$F=T$L.bitmap,T$o=T$F.source,T$V=T$L.width,T$C=T$L.height,T$E=T$F.width,T$r=T$F.height,T$u=T$m[T$x]*T$E,T$T=T$m[T$w]*T$E,T$j=T$m[T$O]*T$E,T$D=T$m[T$x+1]*T$r,T$e=T$m[T$w+1]*T$r,T$b=T$m[T$O+1]*T$r,T$S=T$s[T$x],T$H=T$s[T$w],T$Y=T$s[T$O],T$a=T$s[T$x+1],T$f=T$s[T$w+1],T$_=T$s[T$O+1];if(T$y){var T$Q=(T$S+T$H+T$Y)/3,T$N=(T$a+T$f+T$_)/3,T$i=T$S-T$Q,T$U=T$a-T$N,T$c=Math.sqrt(T$i*T$i+T$U*T$U);T$S=T$Q+T$i/T$c*(T$c+1),T$a=T$N+T$U/T$c*(T$c+1),T$U=T$f-T$N,T$H=T$Q+(T$i=T$H-T$Q)/(T$c=Math.sqrt(T$i*T$i+T$U*T$U))*(T$c+1),T$f=T$N+T$U/T$c*(T$c+1),T$U=T$_-T$N,T$Y=T$Q+(T$i=T$Y-T$Q)/(T$c=Math.sqrt(T$i*T$i+T$U*T$U))*(T$c+1),T$_=T$N+T$U/T$c*(T$c+1);}this.save(),T$v&&this.transform(T$v.a,T$v.b,T$v.c,T$v.d,T$v.tx,T$v.ty),this.beginPath(),this.moveTo(T$S,T$a),this.lineTo(T$H,T$f),this.lineTo(T$Y,T$_),this.closePath(),this.clip();var T$h=1/(T$u*T$e+T$D*T$j+T$T*T$b-T$e*T$j-T$D*T$T-T$u*T$b),T$G=T$S*T$e+T$D*T$Y+T$H*T$b-T$e*T$Y-T$D*T$H-T$S*T$b,T$R=T$u*T$H+T$S*T$j+T$T*T$Y-T$H*T$j-T$S*T$T-T$u*T$Y,T$A=T$u*T$e*T$Y+T$D*T$H*T$j+T$S*T$T*T$b-T$S*T$e*T$j-T$D*T$T*T$Y-T$u*T$H*T$b,T$g=T$a*T$e+T$D*T$_+T$f*T$b-T$e*T$_-T$D*T$f-T$a*T$b,T$$=T$u*T$f+T$a*T$j+T$T*T$_-T$f*T$j-T$a*T$T-T$u*T$_,T$p=T$u*T$e*T$_+T$D*T$f*T$j+T$a*T$T*T$b-T$a*T$e*T$j-T$D*T$T*T$_-T$u*T$f*T$b;this.transform(T$G*T$h,T$g*T$h,T$R*T$h,T$$*T$h,T$A*T$h,T$p*T$h),this.drawImage(T$o,T$L.uv[0]*T$E,T$L.uv[1]*T$r,T$V,T$C,T$L.uv[0]*T$E,T$L.uv[1]*T$r,T$V,T$C),this.restore();},T$L.flush=function(){return 0;},T$L.fillWords=function(T$L,T$s,T$m,T$x,T$w,T$O){T$x&&(this.font=T$x),T$w&&(this.fillStyle=T$w);this.textBaseline="top",this.textAlign="left";for(var T$v=0,T$y=T$L.length;T$v<T$y;T$v++){var T$F=T$L[T$v];if(this.__fillText(T$F.char,T$F.x+T$s,T$F.y+T$m),1===T$O){var T$o=T$F.height,T$V=.5*T$F.style.letterSpacing;T$V||(T$V=0),this.beginPath(),this.strokeStyle=T$w,this.lineWidth=1,this.moveTo(T$s+T$F.x-T$V+.5,T$m+T$F.y+T$o+.5),this.lineTo(T$s+T$F.x+T$F.width+T$V+.5,T$m+T$F.y+T$o+.5),this.stroke();}}},T$L.fillBorderWords=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){T$x&&(this.font=T$x),T$w&&(this.fillStyle=T$w),this.textBaseline="top",this.lineWidth=T$v,this.textAlign="left",this.strokeStyle=T$O;for(var T$y=0,T$F=T$L.length;T$y<T$F;T$y++){var T$o=T$L[T$y];this.__strokeText(T$o.char,T$o.x+T$s,T$o.y+T$m),this.__fillText(T$o.char,T$o.x+T$s,T$o.y+T$m);}},T$L.destroy=function(){this.canvas.width=this.canvas.height=0;},T$L.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1;},T$L.drawCurves=function(T$L,T$s,T$m){this.beginPath(),this.strokeStyle=T$m[3],this.lineWidth=T$m[4];var T$x=T$m[2];T$L+=T$m[0],T$s+=T$m[1],this.moveTo(T$L+T$x[0],T$s+T$x[1]);for(var T$w=2,T$O=T$x.length;T$w<T$O;)this.quadraticCurveTo(T$L+T$x[T$w++],T$s+T$x[T$w++],T$L+T$x[T$w++],T$s+T$x[T$w++]);this.stroke();},T$y.__init__=function(T$s){var T$m=laya.resource.Context.prototype;if(!(T$s=T$s||CanvasRenderingContext2D.prototype).inited){T$s.inited=!0,T$s.__fillText=T$s.fillText,T$s.__fillRect=T$s.fillRect,T$s.__strokeText=T$s.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(T$L){T$s[T$L]=T$m[T$L];});}},T$y.replaceCanvasGetSet=function(T$L,T$s){var T$m=Object.getOwnPropertyDescriptor(T$L,T$s);if(!T$m||!T$m.configurable)return!1;var T$x,T$w={};for(T$x in T$m)"set"!=T$x&&(T$w[T$x]=T$m[T$x]);var T$O=T$m.set;return T$w.set=function(T$L){T$O.call(this,T$L);var T$s=this.getContext("2d");T$s&&"__reset"in T$s&&T$s.__reset();},Object.defineProperty(T$L,T$s,T$w),!0;},T$y.replaceGetSet=function(T$L,T$s){var T$m=Object.getOwnPropertyDescriptor(T$L,T$s);if(!T$m||!T$m.configurable)return!1;var T$x,T$w={};for(T$x in T$m)"set"!=T$x&&(T$w[T$x]=T$m[T$x]);var T$O=T$m.set,T$v="___"+T$s+"__";return T$y.newKeys.push(T$v),T$w.set=function(T$L){T$L!=this[T$v]&&(this[T$v]=T$L,T$O.call(this,T$L));},Object.defineProperty(T$L,T$s,T$w),!0;},T$y._default=new T$y(),T$y.newKeys=[],T$F(T$y,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"];}]),T$y;}(),T$p=function(){function T$O(T$L){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++T$O._uniqueIDCounter,this._name=T$L||"Content Manager",T$O._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,T$O._resourceManagers.push(this),this._resources=[],this._records={};}T$V(T$O,"laya.resource.ResourceManager");var T$L=T$O.prototype;return T$a.imps(T$L,{"laya.resource.IDispose":!0}),T$L.getResourceByIndex=function(T$L){return this._resources[T$L];},T$L.getResourcesLength=function(){return this._resources.length;},T$L.addResource=function(T$L){return T$L.resourceManager&&T$L.resourceManager.removeResource(T$L),-1===this._resources.indexOf(T$L)&&((T$L._resourceManager=this)._resources.push(T$L),this.addRecord(T$L.uri,T$L.__className,T$L.memorySize),this.addSize(T$L.memorySize),!0);},T$L.removeResource=function(T$L){var T$s=this._resources.indexOf(T$L);return-1!==T$s&&(this._resources.splice(T$s,1),T$L._resourceManager=null,this._memorySize-=T$L.memorySize,this.addRecord(T$L.uri,T$L.__className,-T$L.memorySize),!0);},T$L.unload=function(){for(var T$L=this._resources.slice(0,this._resources.length),T$s=0;T$s<T$L.length;T$s++){T$L[T$s].destroy();}T$L.length=0;},T$L.dispose=function(){if(this===T$O._systemResourceManager)throw new Error("systemResourceManager不能被释放！");T$O._resourceManagers.splice(T$O._resourceManagers.indexOf(this),1),T$O._isResourceManagersSorted=!1;for(var T$L=this._resources.slice(0,this._resources.length),T$s=0;T$s<T$L.length;T$s++){var T$m=T$L[T$s];T$m.resourceManager.removeResource(T$m),T$m.destroy();}T$L.length=0;},T$L.addSize=function(T$L){T$L&&(this.autoRelease&&0<T$L&&this._memorySize+T$L>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=T$L);},T$L.addRecord=function(T$L,T$s,T$m){DEBUG&&T$m&&!T$L&&console.error(T$L,T$s,T$m);},T$L.garbageCollection=function(T$L){var T$s=this._resources;(T$s=T$s.slice()).sort(function(T$L,T$s){if(!T$L||!T$s)throw new Error("a或b不能为空！");return T$L.released&&T$s.released?0:T$L.released?1:T$s.released?-1:T$L._lastUseFrameCount-T$s._lastUseFrameCount;});for(var T$m=T$K.loopCount,T$x=0,T$w=T$s.length;T$x<T$w;T$x++){var T$O=T$s[T$x];if(!(1<T$m-T$O._lastUseFrameCount))return void(this._memorySize>=T$L&&(this._isOverflow=!0));if(T$O.releaseResource(),this._memorySize<T$L)return void(this._isOverflow=!1);}},T$u(0,T$L,"id",function(){return this._id;}),T$u(0,T$L,"name",function(){return this._name;},function(T$L){!T$L&&""===T$L||this._name===T$L||(this._name=T$L,T$O._isResourceManagersSorted=!1);}),T$u(0,T$L,"memorySize",function(){return this._memorySize;}),T$u(0,T$L,"records",function(){return this._records;}),T$u(1,T$O,"systemResourceManager",function(){return T$O._systemResourceManager;}),T$O.__init__=function(){T$O.currentResourceManager=T$O.systemResourceManager;},T$O.getLoadedResourceManagerByIndex=function(T$L){return T$O._resourceManagers[T$L];},T$O.getLoadedResourceManagersCount=function(){return T$O._resourceManagers.length;},T$O.recreateContentManagers=function(T$L){void 0===T$L&&(T$L=!1);for(var T$s=T$O.currentResourceManager,T$m=0;T$m<T$O._resourceManagers.length;T$m++){T$O.currentResourceManager=T$O._resourceManagers[T$m];for(var T$x=0;T$x<T$O.currentResourceManager._resources.length;T$x++)T$O.currentResourceManager._resources[T$x].releaseResource(T$L),T$O.currentResourceManager._resources[T$x].activeResource(T$L);}T$O.currentResourceManager=T$s;},T$O.releaseContentManagers=function(T$L){void 0===T$L&&(T$L=!1);for(var T$s=T$O.currentResourceManager,T$m=0;T$m<T$O._resourceManagers.length;T$m++){T$O.currentResourceManager=T$O._resourceManagers[T$m];for(var T$x=0;T$x<T$O.currentResourceManager._resources.length;T$x++){var T$w=T$O.currentResourceManager._resources[T$x];!T$w.released&&T$w.releaseResource(T$L);}}T$O.currentResourceManager=T$s;},T$O._uniqueIDCounter=0,T$O._isResourceManagersSorted=!1,T$O._resourceManagers=[],T$F(T$O,["_systemResourceManager",function(){return this._systemResourceManager=new T$O("System Resource Manager");},"currentResourceManager",function(){return this.currentResourceManager=T$O._systemResourceManager;}]),T$O;}(),T$Z=(function(){function T$L(){}T$V(T$L,"laya.system.System"),T$L.changeDefinition=function(T$L,T$s){T$a[T$L]=T$s;var T$m=T$L+"=classObj";T$a._runScript(T$m);},T$L.__init__=function(){T$R.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice());};}(),function(){function T$m(){}return T$V(T$m,"laya.utils.Browser"),T$u(1,T$m,"pixelRatio",function(){return T$m.__init__(),-1<T$m.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:T$U.getPixelRatio();}),T$u(1,T$m,"height",function(){return T$m.__init__(),(T$a.stage&&T$a.stage.canvasRotation?T$m.clientWidth:T$m.clientHeight)*T$m.pixelRatio;}),T$u(1,T$m,"clientWidth",function(){return T$m.__init__(),T$m.window.innerWidth||T$m.document.body.clientWidth;}),T$u(1,T$m,"window",function(){return T$m.__init__(),T$m._window;}),T$u(1,T$m,"clientHeight",function(){return T$m.__init__(),T$m.window.innerHeight||T$m.document.body.clientHeight||T$m.document.documentElement.clientHeight;}),T$u(1,T$m,"width",function(){return T$m.__init__(),(T$a.stage&&T$a.stage.canvasRotation?T$m.clientHeight:T$m.clientWidth)*T$m.pixelRatio;}),T$u(1,T$m,"container",function(){return T$m.__init__(),T$m._container||((T$m._container=T$m.createElement("div")).id="layaContainer",T$m.document.body.appendChild(T$m._container)),T$m._container;},function(T$L){T$m._container=T$L;}),T$u(1,T$m,"document",function(){return T$m.__init__(),T$m._document;}),T$m.__init__=function(){if(!T$m._window){T$m._window=T$U.getWindow(),T$m._document=T$m.window.document,T$m._window.addEventListener("message",function(T$L){laya.utils.Browser._onMessage(T$L);},!1),T$m.document.__createElement=T$m.document.createElement,T$v.requestAnimationFrame=T$v.requestAnimationFrame||T$v.webkitRequestAnimationFrame||T$v.mozRequestAnimationFrame||T$v.oRequestAnimationFrame||T$v.msRequestAnimationFrame||function(T$L){return T$v.setTimeout(T$L,1e3/60);};var T$L=T$v.document.body.style;T$L["-webkit-user-select"]="none",T$L["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",T$m.userAgent=T$m.window.navigator.userAgent,T$m.onIOS=!!(T$m.u=T$m.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),T$m.onMobile=-1<T$m.u.indexOf("Mobile"),T$m.onIPhone=-1<T$m.u.indexOf("iPhone"),T$m.onMac=-1<T$m.u.indexOf("Mac OS X"),T$m.onIPad=-1<T$m.u.indexOf("iPad"),T$m.onAndroid=-1<T$m.u.indexOf("Android")||-1<T$m.u.indexOf("Adr"),T$m.onWP=-1<T$m.u.indexOf("Windows Phone"),T$m.onQQBrowser=-1<T$m.u.indexOf("QQBrowser"),T$m.onMQQBrowser=-1<T$m.u.indexOf("MQQBrowser")||-1<T$m.u.indexOf("Mobile")&&-1<T$m.u.indexOf("QQ"),T$m.onIE=!!T$m.window.ActiveXObject||"ActiveXObject"in T$m.window,T$m.onWeiXin=-1<T$m.u.indexOf("MicroMessenger"),T$m.onPC=!T$m.onMobile,T$m.onSafari=-1<T$m.u.indexOf("Safari"),T$m.onFirefox=-1<T$m.u.indexOf("Firefox"),T$m.onEdge=-1<T$m.u.indexOf("Edge"),T$m.onMiniGame=-1<T$m.u.indexOf("MiniGame"),T$m.onLimixiu=-1<T$m.u.indexOf("limixiu"),T$m.httpProtocol="http:"==T$m.window.location.protocol,T$m.onMiniGame&&null==T$m.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),T$m.webAudioEnabled=!!(T$m.window.AudioContext||T$m.window.webkitAudioContext||T$m.window.mozAudioContext),T$m.soundType=T$m.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",T$wL=T$m.webAudioEnabled?T$OL:T$mL,T$m.webAudioEnabled&&T$OL.initWebAudio(),T$mL._initMusicAudio(),T$m.enableTouch="ontouchstart"in T$v||T$v.DocumentTouch&&T$s instanceof DocumentTouch,T$v.focus(),T$i._soundClass=T$wL,T$i._musicClass=T$mL,T$R._mainCanvas=T$R._mainCanvas||T$bL.create("2D"),T$m.canvas||(T$m.canvas=T$bL.create("2D"),T$m.context=T$m.canvas.getContext("2d"));}},T$m._onMessage=function(T$L){if(T$L.data&&"size"==T$L.data.name){if(T$m.window.innerWidth=T$L.data.width,T$m.window.innerHeight=T$L.data.height,T$m.window.__innerHeight=T$L.data.clientHeight,!T$m.document.createEvent)return void console.warn("no document.createEvent");var T$s=T$m.document.createEvent("HTMLEvents");return T$s.initEvent("resize",!1,!1),void T$m.window.dispatchEvent(T$s);}},T$m.createElement=function(T$L){return T$m.__init__(),T$m.document.__createElement(T$L);},T$m.getElementById=function(T$L){return T$m.__init__(),T$m.document.getElementById(T$L);},T$m.removeElement=function(T$L){T$L&&T$L.parentNode&&T$L.parentNode.removeChild(T$L);},T$m.now=function(){return T$U.now();},T$m._window=null,T$m._document=null,T$m._container=null,T$m.userAgent=null,T$m.u=null,T$m.onIOS=!1,T$m.onMac=!1,T$m.onMobile=!1,T$m.onIPhone=!1,T$m.onIPad=!1,T$m.onAndroid=!1,T$m.onWP=!1,T$m.onQQBrowser=!1,T$m.onMQQBrowser=!1,T$m.onSafari=!1,T$m.onFirefox=!1,T$m.onEdge=!1,T$m.onIE=!1,T$m.onWeiXin=!1,T$m.onMiniGame=!1,T$m.onLimixiu=!1,T$m.onPC=!1,T$m.httpProtocol=!1,T$m.webAudioEnabled=!1,T$m.soundType=null,T$m.enableTouch=!1,T$m.canvas=null,T$m.context=null,T$m.__init$=function(){},T$m;}()),T$W=function(){function T$s(T$L){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,T$L?(this._u8d_=new Uint8Array(T$L),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_);}T$V(T$s,"laya.utils.Byte");var T$L=T$s.prototype;return T$L.___resizeBuffer=function(T$s){try{var T$L=new Uint8Array(T$s);null!=this._u8d_&&(this._u8d_.length<=T$s?T$L.set(this._u8d_):T$L.set(this._u8d_.subarray(0,T$s))),this._u8d_=T$L,this._d_=new DataView(T$L.buffer);}catch(T$L){throw"___resizeBuffer err:"+T$s;}},T$L.getString=function(){return this.rUTF(this.getUint16());},T$L.getFloat32Array=function(T$L,T$s){var T$m=T$L+T$s;T$m=T$m>this._length?this._length:T$m;var T$x=new Float32Array(this._d_.buffer.slice(T$L,T$m));return this._pos_=T$m,T$x;},T$L.getUint8Array=function(T$L,T$s){var T$m=T$L+T$s;T$m=T$m>this._length?this._length:T$m;var T$x=new Uint8Array(this._d_.buffer.slice(T$L,T$m));return this._pos_=T$m,T$x;},T$L.getInt16Array=function(T$L,T$s){var T$m=T$L+T$s;T$m=T$m>this._length?this._length:T$m;var T$x=new Int16Array(this._d_.buffer.slice(T$L,T$m));return this._pos_=T$m,T$x;},T$L.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var T$L=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,T$L;},T$L.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var T$L=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,T$L;},T$L.writeFloat32=function(T$L){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,T$L,this._xd_),this._pos_+=4;},T$L.writeFloat64=function(T$L){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,T$L,this._xd_),this._pos_+=8;},T$L.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var T$L=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,T$L;},T$L.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var T$L=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,T$L;},T$L.writeInt32=function(T$L){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,T$L,this._xd_),this._pos_+=4;},T$L.writeUint32=function(T$L){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,T$L,this._xd_),this._pos_+=4;},T$L.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var T$L=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,T$L;},T$L.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var T$L=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,T$L;},T$L.writeUint16=function(T$L){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,T$L,this._xd_),this._pos_+=2;},T$L.writeInt16=function(T$L){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,T$L,this._xd_),this._pos_+=2;},T$L.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++);},T$L.writeUint8=function(T$L){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,T$L),this._pos_++;},T$L._getUInt8=function(T$L){return this._d_.getUint8(T$L);},T$L._getUint16=function(T$L){return this._d_.getUint16(T$L,this._xd_);},T$L._getMatrix=function(){return new T$c(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32());},T$L.rUTF=function(T$L){for(var T$s=[],T$m=this._pos_+T$L,T$x=0,T$w=0,T$O=0,T$v=String.fromCharCode,T$y=this._u8d_;this._pos_<T$m;)(T$x=T$y[this._pos_++])<128?0!=T$x&&T$s.push(T$v(T$x)):T$x<224?T$s.push(T$v((63&T$x)<<6|127&T$y[this._pos_++])):T$x<240?(T$w=T$y[this._pos_++],T$s.push(T$v((31&T$x)<<12|(127&T$w)<<6|127&T$y[this._pos_++]))):(T$w=T$y[this._pos_++],T$O=T$y[this._pos_++],T$s.push(T$v((15&T$x)<<18|(127&T$w)<<12|T$O<<6&127|127&T$y[this._pos_++]))),0;return T$s.join("");},T$L.getCustomString=function(T$L){for(var T$s=[],T$m=0,T$x=0,T$w=0,T$O=String.fromCharCode,T$v=this._u8d_;0<T$L;)if((T$x=T$v[this._pos_])<128)T$s.push(T$O(T$x)),this._pos_++,T$L--;else for(T$m=T$x-128,this._pos_++,T$L-=T$m;0<T$m;)T$x=T$v[this._pos_++],T$w=T$v[this._pos_++],T$s.push(T$O(T$w<<8|T$x)),T$m--;return T$s.join("");},T$L.clear=function(){this._pos_=0,this.length=0;},T$L.__getBuffer=function(){return this._d_.buffer;},T$L.writeUTFBytes=function(T$L){for(var T$s=0,T$m=(T$L+="").length;T$s<T$m;T$s++){var T$x=T$L.charCodeAt(T$s);T$x<=127?this.writeByte(T$x):T$x<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|T$x>>6,128|63&T$x],this._pos_),this._pos_+=2):T$x<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|T$x>>12,128|T$x>>6&63,128|63&T$x],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|T$x>>18,128|T$x>>12&63,128|T$x>>6&63,128|63&T$x],this._pos_),this._pos_+=4);}},T$L.writeUTFString=function(T$L){var T$s=this.pos;this.writeUint16(1),this.writeUTFBytes(T$L);var T$m=this.pos-T$s-2;if(65536<=T$m)throw"writeUTFString byte len more than 65536";this._d_.setUint16(T$s,T$m,this._xd_);},T$L.readUTFString=function(){return this.readUTFBytes(this.getUint16());},T$L.getUTFString=function(){return this.readUTFString();},T$L.readUTFBytes=function(T$L){if(void 0===T$L&&(T$L=-1),0==T$L)return"";var T$s=this.bytesAvailable;if(T$s<T$L)throw"readUTFBytes error - Out of bounds";return T$L=0<T$L?T$L:T$s,this.rUTF(T$L);},T$L.getUTFBytes=function(T$L){return void 0===T$L&&(T$L=-1),this.readUTFBytes(T$L);},T$L.writeByte=function(T$L){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,T$L),this._pos_+=1;},T$L.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++);},T$L.getByte=function(){return this.readByte();},T$L.ensureWrite=function(T$L){this._length<T$L&&(this._length=T$L),this._allocated_<T$L&&(this.length=T$L);},T$L.writeArrayBuffer=function(T$L,T$s,T$m){if(void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0),T$s<0||T$m<0)throw"writeArrayBuffer error - Out of bounds";0==T$m&&(T$m=T$L.byteLength-T$s),this.ensureWrite(this._pos_+T$m);var T$x=new Uint8Array(T$L);this._u8d_.set(T$x.subarray(T$s,T$s+T$m),this._pos_),this._pos_+=T$m;},T$u(0,T$L,"buffer",function(){var T$L=this._d_.buffer;return T$L.byteLength==this.length?T$L:T$L.slice(0,this.length);}),T$u(0,T$L,"endian",function(){return this._xd_?"littleEndian":"bigEndian";},function(T$L){this._xd_="littleEndian"==T$L;}),T$u(0,T$L,"length",function(){return this._length;},function(T$L){this._allocated_<T$L?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(T$L,2*this._allocated_))):this._allocated_>T$L&&this.___resizeBuffer(this._allocated_=T$L),this._length=T$L;}),T$u(0,T$L,"pos",function(){return this._pos_;},function(T$L){this._pos_=T$L;}),T$u(0,T$L,"bytesAvailable",function(){return this._length-this._pos_;}),T$s.getSystemEndian=function(){if(!T$s._sysEndian){var T$L=new ArrayBuffer(2);new DataView(T$L).setInt16(0,256,!0),T$s._sysEndian=256===new Int16Array(T$L)[0]?"littleEndian":"bigEndian";}return T$s._sysEndian;},T$s.BIG_ENDIAN="bigEndian",T$s.LITTLE_ENDIAN="littleEndian",T$s._sysEndian=null,T$s;}(),T$d=function(){function T$w(){}return T$V(T$w,"laya.utils.CacheManager"),T$w.regCacheByFunction=function(T$L,T$s){var T$m;T$w.unRegCacheByFunction(T$L,T$s),T$m={tryDispose:T$L,getCacheList:T$s},T$w._cacheList.push(T$m);},T$w.unRegCacheByFunction=function(T$L,T$s){var T$m,T$x=0;for(T$m=T$w._cacheList.length,T$x=0;T$x<T$m;T$x++)if(T$w._cacheList[T$x].tryDispose==T$L&&T$w._cacheList[T$x].getCacheList==T$s)return void T$w._cacheList.splice(T$x,1);},T$w.forceDispose=function(){var T$L=0,T$s=T$w._cacheList.length;for(T$L=0;T$L<T$s;T$L++)T$w._cacheList[T$L].tryDispose(!0);},T$w.beginCheck=function(T$L){void 0===T$L&&(T$L=15e3),T$a.timer.loop(T$L,null,T$w._checkLoop);},T$w.stopCheck=function(){T$a.timer.clear(null,T$w._checkLoop);},T$w._checkLoop=function(){var T$L=T$w._cacheList;if(!(T$L.length<1)){var T$s,T$m=T$Z.now(),T$x=0;for(T$s=T$x=T$L.length;0<T$x&&(T$L[T$w._index=++T$w._index%T$s].tryDispose(!1),!(T$Z.now()-T$m>T$w.loopTimeLimit));)T$x--;}},T$w.loopTimeLimit=2,T$w._cacheList=[],T$w._index=0,T$w;}(),T$X=function(){function T$r(){}return T$V(T$r,"laya.utils.ClassUtils"),T$r.regClass=function(T$L,T$s){T$r._classMap[T$L]=T$s;},T$r.getRegClass=function(T$L){return T$r._classMap[T$L];},T$r.getInstance=function(T$L){var T$s=T$r.getClass(T$L);return T$s?new T$s():(console.warn("[error] Undefined class:",T$L),null);},T$r.createByJson=function(T$L,T$s,T$m,T$x,T$w){"string"==typeof T$L&&(T$L=JSON.parse(T$L));var T$O=T$L.props;if(!T$s&&!(T$s=T$w?T$w.runWith(T$L):T$r.getInstance(T$O.runtime||T$L.type)))return null;var T$v=T$L.child;if(T$v)for(var T$y=0,T$F=T$v.length;T$y<T$F;T$y++){var T$o=T$v[T$y];if("render"!==T$o.props.name&&"render"!==T$o.props.renderType||!T$s._$set_itemRender){if("Graphic"==T$o.type)T$r.addGraphicsToSprite(T$o,T$s);else if(T$r.isDrawType(T$o.type))T$r.addGraphicToSprite(T$o,T$s,!0);else{var T$V=T$r.createByJson(T$o,null,T$m,T$x,T$w);"Script"==T$o.type?T$V.hasOwnProperty("owner")?T$V.owner=T$s:T$V.hasOwnProperty("target")&&(T$V.target=T$s):"mask"==T$o.props.renderType?T$s.mask=T$V:T$s.addChild(T$V);}}else T$s.itemRender=T$o;}if(T$O)for(var T$C in T$O){var T$E=T$O[T$C];"var"===T$C&&T$m?T$m[T$E]=T$s:T$E instanceof Array&&"function"==typeof T$s[T$C]?T$s[T$C].apply(T$s,T$E):T$s[T$C]=T$E;}return T$x&&T$L.customProps&&T$x.runWith([T$s,T$L]),T$s.created&&T$s.created(),T$s;},T$r.addGraphicsToSprite=function(T$L,T$s){var T$m;if((T$m=T$L.child)&&!(T$m.length<1)){var T$x;T$x=T$r._getGraphicsFromSprite(T$L,T$s);var T$w=0,T$O=0;T$L.props&&(T$w=T$r._getObjVar(T$L.props,"x",0),T$O=T$r._getObjVar(T$L.props,"y",0)),0!=T$w&&0!=T$O&&T$x.translate(T$w,T$O);var T$v,T$y=0;for(T$v=T$m.length,T$y=0;T$y<T$v;T$y++)T$r._addGraphicToGraphics(T$m[T$y],T$x);0!=T$w&&0!=T$O&&T$x.translate(-T$w,-T$O);}},T$r.addGraphicToSprite=function(T$L,T$s,T$m){var T$x;void 0===T$m&&(T$m=!1),T$x=T$m?T$r._getGraphicsFromSprite(T$L,T$s):T$s.graphics,T$r._addGraphicToGraphics(T$L,T$x);},T$r._getGraphicsFromSprite=function(T$L,T$s){var T$m,T$x;if(!T$L||!T$L.props)return T$s.graphics;switch(T$x=T$L.props.renderType){case"hit":case"unHit":var T$w;T$s.hitArea||(T$s.hitArea=new T$l()),(T$w=T$s.hitArea)[T$x]||(T$w[T$x]=new T$E()),T$m=T$w[T$x];}return T$m||(T$m=T$s.graphics),T$m;},T$r._getTransformData=function(T$L){var T$s;(T$L.hasOwnProperty("pivotX")||T$L.hasOwnProperty("pivotY"))&&(T$s=T$s||new T$c()).translate(-T$r._getObjVar(T$L,"pivotX",0),-T$r._getObjVar(T$L,"pivotY",0));var T$m=T$r._getObjVar(T$L,"scaleX",1),T$x=T$r._getObjVar(T$L,"scaleY",1),T$w=T$r._getObjVar(T$L,"rotation",0);T$r._getObjVar(T$L,"skewX",0),T$r._getObjVar(T$L,"skewY",0);return 1==T$m&&1==T$x&&0==T$w||((T$s=T$s||new T$c()).scale(T$m,T$x),T$s.rotate(.0174532922222222*T$w)),T$s;},T$r._addGraphicToGraphics=function(T$L,T$s){var T$m,T$x;if((T$m=T$L.props)&&(T$x=T$r.DrawTypeDic[T$L.type])){var T$w,T$O;T$w=T$s;var T$v=T$r._getParams(T$m,T$x[1],T$x[2],T$x[3]);((T$O=T$r._tM)||1!=T$r._alpha)&&(T$w.save(),T$O&&T$w.transform(T$O),1!=T$r._alpha&&T$w.alpha(T$r._alpha)),T$w[T$x[0]].apply(T$w,T$v),(T$O||1!=T$r._alpha)&&T$w.restore();}},T$r._adptLineData=function(T$L){return T$L[2]=parseFloat(T$L[0])+parseFloat(T$L[2]),T$L[3]=parseFloat(T$L[1])+parseFloat(T$L[3]),T$L;},T$r._adptTextureData=function(T$L){return T$L[0]=T$yL.getRes(T$L[0]),T$L;},T$r._adptLinesData=function(T$L){return T$L[2]=T$r._getPointListByStr(T$L[2]),T$L;},T$r.isDrawType=function(T$L){return"Image"!=T$L&&T$r.DrawTypeDic.hasOwnProperty(T$L);},T$r._getParams=function(T$L,T$s,T$m,T$x){var T$w;void 0===T$m&&(T$m=0),(T$w=T$r._temParam).length=T$s.length;var T$O,T$v,T$y=0;for(T$O=T$s.length,T$y=0;T$y<T$O;T$y++)T$w[T$y]=T$r._getObjVar(T$L,T$s[T$y][0],T$s[T$y][1]);return T$r._alpha=T$r._getObjVar(T$L,"alpha",1),T$v=T$r._getTransformData(T$L),T$r._tM=T$v?(T$m||(T$m=0),T$v.translate(T$w[T$m],T$w[T$m+1]),T$w[T$m]=T$w[T$m+1]=0,T$v):null,T$x&&T$r[T$x]&&(T$w=T$r[T$x](T$w)),T$w;},T$r._getPointListByStr=function(T$L){var T$s,T$m,T$x=0;for(T$m=(T$s=T$L.split(",")).length,T$x=0;T$x<T$m;T$x++)T$s[T$x]=parseFloat(T$s[T$x]);return T$s;},T$r._getObjVar=function(T$L,T$s,T$m){return T$L.hasOwnProperty(T$s)?T$L[T$s]:T$m;},T$r._temParam=[],T$r._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},T$r.getClass=function(T$L){var T$s=T$r._classMap[T$L]||T$L;return"string"==typeof T$s?T$a.__classmap[T$s]:T$s;},T$r._tM=null,T$r._alpha=NaN,T$F(T$r,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]};}]),T$r;}(),T$I=function(){function T$O(T$L){if(this._color=[],"string"==typeof T$L){null===(this.strColor=T$L)&&(T$L="#000000"),"#"==T$L.charAt(0)&&(T$L=T$L.substr(1));var T$s=T$L.length;if(3==T$s||4==T$s){for(var T$m="",T$x=0;T$x<T$s;T$x++)T$m+=T$L[T$x]+T$L[T$x];T$L=T$m;}var T$w=this.numColor=parseInt(T$L,16);if(8==T$L.length)return void(this._color=[parseInt(T$L.substr(0,2),16)/255,((16711680&T$w)>>16)/255,((65280&T$w)>>8)/255,(255&T$w)/255]);}else T$w=this.numColor=T$L,this.strColor=T$B.toHexColor(T$w);this._color=[((16711680&T$w)>>16)/255,((65280&T$w)>>8)/255,(255&T$w)/255,1],this._color.__id=++T$O._COLODID;}return T$V(T$O,"laya.utils.Color"),T$O._initDefault=function(){for(var T$L in T$O._DEFAULT={},T$O._COLOR_MAP)T$O._SAVE[T$L]=T$O._DEFAULT[T$L]=new T$O(T$O._COLOR_MAP[T$L]);return T$O._DEFAULT;},T$O._initSaveMap=function(){for(var T$L in T$O._SAVE_SIZE=0,T$O._SAVE={},T$O._DEFAULT)T$O._SAVE[T$L]=T$O._DEFAULT[T$L];},T$O.create=function(T$L){var T$s=T$O._SAVE[T$L+""];return null!=T$s?T$s:(T$O._SAVE_SIZE<1e3||T$O._initSaveMap(),T$O._SAVE[T$L+""]=new T$O(T$L));},T$O._SAVE={},T$O._SAVE_SIZE=0,T$O._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},T$O._DEFAULT=T$O._initDefault(),T$O._COLODID=1,T$O;}(),T$n=(function(){function T$L(){this._values=[],this._keys=[];}T$V(T$L,"laya.utils.Dictionary");var T$s=T$L.prototype;T$s.set=function(T$L,T$s){var T$m=this.indexOf(T$L);0<=T$m?this._values[T$m]=T$s:(this._keys.push(T$L),this._values.push(T$s));},T$s.indexOf=function(T$L){var T$s=this._keys.indexOf(T$L);return 0<=T$s?T$s:(T$L="string"==typeof T$L?Number(T$L):"number"==typeof T$L?T$L.toString():T$L,this._keys.indexOf(T$L));},T$s.get=function(T$L){var T$s=this.indexOf(T$L);return T$s<0?null:this._values[T$s];},T$s.remove=function(T$L){var T$s=this.indexOf(T$L);return 0<=T$s&&(this._keys.splice(T$s,1),this._values.splice(T$s,1),!0);},T$s.clear=function(){this._values.length=0,this._keys.length=0;},T$u(0,T$s,"values",function(){return this._values;}),T$u(0,T$s,"keys",function(){return this._keys;});}(),function(){function T$L(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0;}T$V(T$L,"laya.utils.Dragging");var T$s=T$L.prototype;return T$s.start=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){void 0===T$y&&(T$y=.92),this.clearTimer(),this.target=T$L,this.area=T$s,this.hasInertia=T$m,this.elasticDistance=T$s?T$x:0,this.elasticBackTime=T$w,this.data=T$O,this._disableMouseEvent=T$v,this.ratio=T$y,1!=T$L.globalScaleX||1!=T$L.globalScaleY?this._parent=T$L.parent:this._parent=T$a.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,T$a.stage.on("mouseup",this,this.onStageMouseUp),T$a.stage.on("mouseout",this,this.onStageMouseUp),T$a.timer.frameLoop(1,this,this.loop);},T$s.clearTimer=function(){T$a.timer.clear(this,this.loop),T$a.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null);},T$s.stop=function(){this._dragging&&(T$T.instance.disableMouseEvent=!1,T$a.stage.off("mouseup",this,this.onStageMouseUp),T$a.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear());},T$s.loop=function(){var T$L=this._parent.getMousePoint(),T$s=T$L.x,T$m=T$L.y,T$x=T$s-this._lastX,T$w=T$m-this._lastY;if(this._clickOnly){if(!(1<Math.abs(T$x*T$a.stage._canvasTransform.getScaleX())||1<Math.abs(T$w*T$a.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),T$T.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1);}else this._offsets.push(T$x,T$w);0==T$x&&0==T$w||(this._lastX=T$s,this._lastY=T$m,this.target.x+=T$x*this._elasticRateX,this.target.y+=T$w*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data));},T$s.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var T$L=this.area.x-this.target.x;else T$L=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-T$L/this.elasticDistance),this.target.y<this.area.y)var T$s=this.area.y-this.target.y;else T$s=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-T$s/this.elasticDistance);}},T$s.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height);},T$s.onStageMouseUp=function(T$L){if(T$T.instance.disableMouseEvent=!1,T$a.stage.off("mouseup",this,this.onStageMouseUp),T$a.stage.off("mouseout",this,this.onStageMouseUp),T$a.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var T$s=this._offsets.length,T$m=Math.min(T$s,6),T$x=this._offsets.length-T$m,T$w=T$s-1;T$x<T$w;T$w--)this._offsetY+=this._offsets[T$w--],this._offsetX+=this._offsets[T$w];this._offsetX=this._offsetX/T$m*2,this._offsetY=this._offsetY/T$m*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),T$a.timer.frameLoop(1,this,this.tweenMove);}else 0<this.elasticDistance?this.checkElastic():this.clear();},T$s.checkElastic=function(){var T$L=NaN,T$s=NaN;if(this.target.x<this.area.x?T$L=this.area.x:this.target.x>this.area.x+this.area.width&&(T$L=this.area.x+this.area.width),this.target.y<this.area.y?T$s=this.area.y:this.target.y>this.area.y+this.area.height&&(T$s=this.area.y+this.area.height),isNaN(T$L)&&isNaN(T$s))this.clear();else{var T$m={};isNaN(T$L)||(T$m.x=T$L),isNaN(T$s)||(T$m.y=T$s),this._tween=T$k.to(this.target,T$m,this.elasticBackTime,T$J.sineOut,T$e.create(this,this.clear),0,!1,!1);}},T$s.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(T$a.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear());},T$s.clear=function(){if(this.target){this.clearTimer();var T$L=this.target;this.target=null,this._parent=null,T$L.event("dragend",this.data);}},T$L;}()),T$J=function(){function T$y(){}return T$V(T$y,"laya.utils.Ease"),T$y.linearNone=function(T$L,T$s,T$m,T$x){return T$m*T$L/T$x+T$s;},T$y.linearIn=function(T$L,T$s,T$m,T$x){return T$m*T$L/T$x+T$s;},T$y.linearInOut=function(T$L,T$s,T$m,T$x){return T$m*T$L/T$x+T$s;},T$y.linearOut=function(T$L,T$s,T$m,T$x){return T$m*T$L/T$x+T$s;},T$y.bounceIn=function(T$L,T$s,T$m,T$x){return T$m-T$y.bounceOut(T$x-T$L,0,T$m,T$x)+T$s;},T$y.bounceInOut=function(T$L,T$s,T$m,T$x){return T$L<.5*T$x?.5*T$y.bounceIn(2*T$L,0,T$m,T$x)+T$s:.5*T$y.bounceOut(2*T$L-T$x,0,T$m,T$x)+.5*T$m+T$s;},T$y.bounceOut=function(T$L,T$s,T$m,T$x){return(T$L/=T$x)<1/2.75?T$m*(7.5625*T$L*T$L)+T$s:T$L<2/2.75?T$m*(7.5625*(T$L-=1.5/2.75)*T$L+.75)+T$s:T$L<2.5/2.75?T$m*(7.5625*(T$L-=2.25/2.75)*T$L+.9375)+T$s:T$m*(7.5625*(T$L-=2.625/2.75)*T$L+.984375)+T$s;},T$y.backIn=function(T$L,T$s,T$m,T$x,T$w){return void 0===T$w&&(T$w=1.70158),T$m*(T$L/=T$x)*T$L*((T$w+1)*T$L-T$w)+T$s;},T$y.backInOut=function(T$L,T$s,T$m,T$x,T$w){return void 0===T$w&&(T$w=1.70158),(T$L/=.5*T$x)<1?.5*T$m*(T$L*T$L*((1+(T$w*=1.525))*T$L-T$w))+T$s:T$m/2*((T$L-=2)*T$L*((1+(T$w*=1.525))*T$L+T$w)+2)+T$s;},T$y.backOut=function(T$L,T$s,T$m,T$x,T$w){return void 0===T$w&&(T$w=1.70158),T$m*((T$L=T$L/T$x-1)*T$L*((T$w+1)*T$L+T$w)+1)+T$s;},T$y.elasticIn=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v;return void 0===T$w&&(T$w=0),void 0===T$O&&(T$O=0),0==T$L?T$s:1==(T$L/=T$x)?T$s+T$m:(T$O||(T$O=.3*T$x),T$v=!T$w||0<T$m&&T$w<T$m||T$m<0&&T$w<-T$m?(T$w=T$m,T$O/4):T$O/T$y.PI2*Math.asin(T$m/T$w),-T$w*Math.pow(2,10*(T$L-=1))*Math.sin((T$L*T$x-T$v)*T$y.PI2/T$O)+T$s);},T$y.elasticInOut=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v;return void 0===T$w&&(T$w=0),void 0===T$O&&(T$O=0),0==T$L?T$s:2==(T$L/=.5*T$x)?T$s+T$m:(T$O||(T$O=T$x*(.3*1.5)),T$v=!T$w||0<T$m&&T$w<T$m||T$m<0&&T$w<-T$m?(T$w=T$m,T$O/4):T$O/T$y.PI2*Math.asin(T$m/T$w),T$L<1?T$w*Math.pow(2,10*(T$L-=1))*Math.sin((T$L*T$x-T$v)*T$y.PI2/T$O)*-.5+T$s:T$w*Math.pow(2,-10*(T$L-=1))*Math.sin((T$L*T$x-T$v)*T$y.PI2/T$O)*.5+T$m+T$s);},T$y.elasticOut=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v;return void 0===T$w&&(T$w=0),void 0===T$O&&(T$O=0),0==T$L?T$s:1==(T$L/=T$x)?T$s+T$m:(T$O||(T$O=.3*T$x),T$v=!T$w||0<T$m&&T$w<T$m||T$m<0&&T$w<-T$m?(T$w=T$m,T$O/4):T$O/T$y.PI2*Math.asin(T$m/T$w),T$w*Math.pow(2,-10*T$L)*Math.sin((T$L*T$x-T$v)*T$y.PI2/T$O)+T$m+T$s);},T$y.strongIn=function(T$L,T$s,T$m,T$x){return T$m*(T$L/=T$x)*T$L*T$L*T$L*T$L+T$s;},T$y.strongInOut=function(T$L,T$s,T$m,T$x){return(T$L/=.5*T$x)<1?.5*T$m*T$L*T$L*T$L*T$L*T$L+T$s:.5*T$m*((T$L-=2)*T$L*T$L*T$L*T$L+2)+T$s;},T$y.strongOut=function(T$L,T$s,T$m,T$x){return T$m*((T$L=T$L/T$x-1)*T$L*T$L*T$L*T$L+1)+T$s;},T$y.sineInOut=function(T$L,T$s,T$m,T$x){return .5*-T$m*(Math.cos(Math.PI*T$L/T$x)-1)+T$s;},T$y.sineIn=function(T$L,T$s,T$m,T$x){return-T$m*Math.cos(T$L/T$x*T$y.HALF_PI)+T$m+T$s;},T$y.sineOut=function(T$L,T$s,T$m,T$x){return T$m*Math.sin(T$L/T$x*T$y.HALF_PI)+T$s;},T$y.quintIn=function(T$L,T$s,T$m,T$x){return T$m*(T$L/=T$x)*T$L*T$L*T$L*T$L+T$s;},T$y.quintInOut=function(T$L,T$s,T$m,T$x){return(T$L/=.5*T$x)<1?.5*T$m*T$L*T$L*T$L*T$L*T$L+T$s:.5*T$m*((T$L-=2)*T$L*T$L*T$L*T$L+2)+T$s;},T$y.quintOut=function(T$L,T$s,T$m,T$x){return T$m*((T$L=T$L/T$x-1)*T$L*T$L*T$L*T$L+1)+T$s;},T$y.quartIn=function(T$L,T$s,T$m,T$x){return T$m*(T$L/=T$x)*T$L*T$L*T$L+T$s;},T$y.quartInOut=function(T$L,T$s,T$m,T$x){return(T$L/=.5*T$x)<1?.5*T$m*T$L*T$L*T$L*T$L+T$s:.5*-T$m*((T$L-=2)*T$L*T$L*T$L-2)+T$s;},T$y.quartOut=function(T$L,T$s,T$m,T$x){return-T$m*((T$L=T$L/T$x-1)*T$L*T$L*T$L-1)+T$s;},T$y.cubicIn=function(T$L,T$s,T$m,T$x){return T$m*(T$L/=T$x)*T$L*T$L+T$s;},T$y.cubicInOut=function(T$L,T$s,T$m,T$x){return(T$L/=.5*T$x)<1?.5*T$m*T$L*T$L*T$L+T$s:.5*T$m*((T$L-=2)*T$L*T$L+2)+T$s;},T$y.cubicOut=function(T$L,T$s,T$m,T$x){return T$m*((T$L=T$L/T$x-1)*T$L*T$L+1)+T$s;},T$y.quadIn=function(T$L,T$s,T$m,T$x){return T$m*(T$L/=T$x)*T$L+T$s;},T$y.quadInOut=function(T$L,T$s,T$m,T$x){return(T$L/=.5*T$x)<1?.5*T$m*T$L*T$L+T$s:.5*-T$m*(--T$L*(T$L-2)-1)+T$s;},T$y.quadOut=function(T$L,T$s,T$m,T$x){return-T$m*(T$L/=T$x)*(T$L-2)+T$s;},T$y.expoIn=function(T$L,T$s,T$m,T$x){return 0==T$L?T$s:T$m*Math.pow(2,10*(T$L/T$x-1))+T$s-.001*T$m;},T$y.expoInOut=function(T$L,T$s,T$m,T$x){return 0==T$L?T$s:T$L==T$x?T$s+T$m:(T$L/=.5*T$x)<1?.5*T$m*Math.pow(2,10*(T$L-1))+T$s:.5*T$m*(2-Math.pow(2,-10*--T$L))+T$s;},T$y.expoOut=function(T$L,T$s,T$m,T$x){return T$L==T$x?T$s+T$m:T$m*(1-Math.pow(2,-10*T$L/T$x))+T$s;},T$y.circIn=function(T$L,T$s,T$m,T$x){return-T$m*(Math.sqrt(1-(T$L/=T$x)*T$L)-1)+T$s;},T$y.circInOut=function(T$L,T$s,T$m,T$x){return(T$L/=.5*T$x)<1?.5*-T$m*(Math.sqrt(1-T$L*T$L)-1)+T$s:.5*T$m*(Math.sqrt(1-(T$L-=2)*T$L)+1)+T$s;},T$y.circOut=function(T$L,T$s,T$m,T$x){return T$m*Math.sqrt(1-(T$L=T$L/T$x-1)*T$L)+T$s;},T$y.HALF_PI=.5*Math.PI,T$y.PI2=2*Math.PI,T$y;}(),T$l=function(){function T$C(){this._hit=null,this._unHit=null;}T$V(T$C,"laya.utils.HitArea");var T$L=T$C.prototype;return T$L.isHit=function(T$L,T$s){return!!T$C.isHitGraphic(T$L,T$s,this.hit)&&!T$C.isHitGraphic(T$L,T$s,this.unHit);},T$L.contains=function(T$L,T$s){return this.isHit(T$L,T$s);},T$u(0,T$L,"hit",function(){return this._hit||(this._hit=new T$E()),this._hit;},function(T$L){this._hit=T$L;}),T$u(0,T$L,"unHit",function(){return this._unHit||(this._unHit=new T$E()),this._unHit;},function(T$L){this._unHit=T$L;}),T$C.isHitGraphic=function(T$L,T$s,T$m){if(!T$m)return!1;var T$x;if(!(T$x=T$m.cmds)&&T$m._one&&((T$x=T$C._cmds).length=1,T$x[0]=T$m._one),!T$x)return!1;var T$w,T$O,T$v=0;for(T$w=T$x.length,T$v=0;T$v<T$w;T$v++)if(T$O=T$x[T$v]){var T$y=T$R._context;switch(T$O.callee){case T$y._translate:case 6:T$L-=T$O[0],T$s-=T$O[1];}if(T$C.isHitCmd(T$L,T$s,T$O))return!0;}return!1;},T$C.isHitCmd=function(T$L,T$s,T$m){if(!T$m)return!1;var T$x=T$R._context,T$w=!1;switch(T$m.callee){case T$x._drawRect:case 13:T$C._rec.setTo(T$m[0],T$m[1],T$m[2],T$m[3]),T$w=T$C._rec.contains(T$L,T$s);break;case T$x._drawCircle:case T$x._fillCircle:case 14:T$w=(T$L-=T$m[0])*T$L+(T$s-=T$m[1])*T$s<T$m[2]*T$m[2];break;case T$x._drawPoly:case 18:T$L-=T$m[0],T$s-=T$m[1],T$w=T$C.ptInPolygon(T$L,T$s,T$m[2]);}return T$w;},T$C.ptInPolygon=function(T$L,T$s,T$m){var T$x;(T$x=T$C._ptPoint).setTo(T$L,T$s);var T$w,T$O=0,T$v=NaN,T$y=NaN,T$F=NaN,T$o=NaN;T$w=T$m.length;for(var T$V=0;T$V<T$w;T$V+=2){if(T$v=T$m[T$V],T$y=T$m[T$V+1],T$F=T$m[(T$V+2)%T$w],T$y!=(T$o=T$m[(T$V+3)%T$w]))if(!(T$x.y<Math.min(T$y,T$o)))if(!(T$x.y>=Math.max(T$y,T$o)))(T$x.y-T$y)*(T$F-T$v)/(T$o-T$y)+T$v>T$x.x&&T$O++;}return T$O%2==1;},T$C._cmds=[],T$F(T$C,["_rec",function(){return this._rec=new T$_();},"_ptPoint",function(){return this._ptPoint=new T$f();}]),T$C;}(),T$q=(function(){function T$w(T$L,T$s,T$m,T$x){this.char=T$L,this.charNum=T$L.charCodeAt(0),this._x=this._y=0,this.width=T$s,this.height=T$m,this.style=T$x,this.isWord=!T$w._isWordRegExp.test(T$L);}T$V(T$w,"laya.utils.HTMLChar");var T$L=T$w.prototype;T$a.imps(T$L,{"laya.display.ILayout":!0}),T$L.setSprite=function(T$L){this._sprite=T$L;},T$L.getSprite=function(){return this._sprite;},T$L._isChar=function(){return!0;},T$L._getCSSStyle=function(){return this.style;},T$u(0,T$L,"width",function(){return this._w;},function(T$L){this._w=T$L;}),T$u(0,T$L,"x",function(){return this._x;},function(T$L){this._sprite&&(this._sprite.x=T$L),this._x=T$L;}),T$u(0,T$L,"y",function(){return this._y;},function(T$L){this._sprite&&(this._sprite.y=T$L),this._y=T$L;}),T$u(0,T$L,"height",function(){return this._h;},function(T$L){this._h=T$L;}),T$w._isWordRegExp=new RegExp("[\\w.]","");}(),function(){function T$s(){}T$V(T$s,"laya.utils.Log"),T$s.enable=function(){T$s._logdiv||(T$s._logdiv=T$Z.window.document.createElement("div"),T$Z.window.document.body.appendChild(T$s._logdiv),T$s._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;");},T$s.toggle=function(){var T$L=T$s._logdiv.style;"1px"==T$L.width?T$L.width=T$L.height="50%":T$L.width=T$L.height="1px";},T$s.print=function(T$L){T$s._logdiv&&(T$s.maxCount<=T$s._count&&T$s.clear(),T$s._count++,T$s._logdiv.innerText+=T$L+"\n",T$s._logdiv.scrollTop=T$s._logdiv.scrollHeight);},T$s.clear=function(){T$s._logdiv.innerText="",T$s._count=0;},T$s._logdiv=null,T$s._count=0,T$s.maxCount=20;}(),function(){function T$s(){}T$V(T$s,"laya.utils.Mouse"),T$u(1,T$s,"cursor",function(){return T$s._style.cursor;},function(T$L){T$s._style.cursor=T$L;}),T$s.hide=function(){"none"!=T$s.cursor&&(T$s._preCursor=T$s.cursor,T$s.cursor="none");},T$s.show=function(){"none"==T$s.cursor&&(T$s.cursor=T$s._preCursor?T$s._preCursor:"auto");},T$s._preCursor=null,T$F(T$s,["_style",function(){return this._style=T$Z.document.body.style;}]);}(),function(){function T$O(){}return T$V(T$O,"laya.utils.Pool"),T$O.getPoolBySign=function(T$L){return T$O._poolDic[T$L]||(T$O._poolDic[T$L]=[]);},T$O.clearBySign=function(T$L){T$O._poolDic[T$L]&&(T$O._poolDic[T$L].length=0);},T$O.recover=function(T$L,T$s){T$s.__InPool||(T$s.__InPool=!0,T$O.getPoolBySign(T$L).push(T$s));},T$O.getItemByClass=function(T$L,T$s){var T$m=T$O.getPoolBySign(T$L),T$x=T$m.length?T$m.pop():new T$s();return T$x.__InPool=!1,T$x;},T$O.getItemByCreateFun=function(T$L,T$s,T$m){var T$x=T$O.getPoolBySign(T$L),T$w=T$x.length?T$x.pop():T$s.call(T$m);return T$w.__InPool=!1,T$w;},T$O.getItem=function(T$L){var T$s=T$O.getPoolBySign(T$L),T$m=T$s.length?T$s.pop():null;return T$m&&(T$m.__InPool=!1),T$m;},T$O._poolDic={},T$O.InPoolSign="__InPool",T$O;}()),T$K=function(){function T$F(){}return T$V(T$F,"laya.utils.Stat"),T$u(1,T$F,"onclick",null,function(T$L){T$F._sp&&T$F._sp.on("click",T$F._sp,T$L),T$F._canvas&&(T$F._canvas.source.onclick=T$L,T$F._canvas.source.style.pointerEvents="");}),T$F.show=function(T$L,T$s,T$m){if(void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0),!T$R.isConchApp||T$R.isConchWebGL){if(T$R.isConchWebGL||T$Z.onMiniGame||T$Z.onLimixiu||(T$F._useCanvas=!0),T$F._show=!0,T$F._fpsData.length=60,T$F._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},T$F._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},T$F._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},T$F._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},T$R.isWebGL){if(T$F._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},T$R.is3DMode){if(T$F._view[0].title="FPS(3D)",T$F._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},T$F._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},T$F._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==T$m){var T$x=8;T$F._view[T$x++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},T$F._view[T$x++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},T$F._view[T$x++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},T$F._view[T$x++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},T$F._view[T$x++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},T$F._view[T$x++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},T$F._view[T$x++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},T$F._view[T$x++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},T$F._view[T$x++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1};}else if(2==T$m){T$x=8;T$F._view[T$x++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},T$F._view[T$x++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},T$F._view[T$x++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},T$F._view[T$x++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},T$F._view[T$x++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},T$F._view[T$x++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},T$F._view[T$x++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2};}}else T$F._view[0].title="FPS(WebGL)",T$F._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};}else T$F._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};T$F._useCanvas?T$F.createUIPre(T$L,T$s):T$F.createUI(T$L,T$s),T$F.enable();}else T$Z.window.conch.showFPS&&T$Z.window.conch.showFPS(T$L,T$s);},T$F.createUIPre=function(T$L,T$s){var T$m=T$Z.pixelRatio;T$F._width=170*T$m,T$F._vx=75*T$m,T$F._height=T$m*(12*T$F._view.length+3*T$m)+4,T$F._fontSize=12*T$m;for(var T$x=0;T$x<T$F._view.length;T$x++)T$F._view[T$x].x=4,T$F._view[T$x].y=T$x*T$F._fontSize+2*T$m;T$F._canvas||((T$F._canvas=new T$bL("2D")).size(T$F._width,T$F._height),(T$F._ctx=T$F._canvas.getContext("2d")).textBaseline="top",T$F._ctx.font=T$F._fontSize+"px Sans-serif",T$F._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+T$L+"px;top:"+T$s+"px;width:"+T$F._width/T$m+"px;height:"+T$F._height/T$m+"px;"),T$F._first=!0,T$F.loop(),T$F._first=!1,T$Z.container.appendChild(T$F._canvas.source);},T$F.createUI=function(T$L,T$s){var T$m=T$F._sp,T$x=T$Z.pixelRatio;T$m||(T$m=new T$CL(),(T$F._leftText=new T$jL()).pos(5,5),T$F._leftText.color="#ffffff",T$m.addChild(T$F._leftText),(T$F._txt=new T$jL()).pos(80*T$x,5),T$F._txt.color="#ffffff",T$m.addChild(T$F._txt),T$F._sp=T$m),T$m.pos(T$L,T$s);for(var T$w="",T$O=0;T$O<T$F._view.length;T$O++){T$w+=T$F._view[T$O].title+"\n";}T$F._leftText.text=T$w;var T$v=170*T$x,T$y=T$x*(12*T$F._view.length+3*T$x)+4;T$F._txt.fontSize=T$F._fontSize*T$x,T$F._leftText.fontSize=T$F._fontSize*T$x,T$m.size(T$v,T$y),T$m.graphics.clear(),T$m.graphics.setAlpha(.5),T$m.graphics.drawRect(0,0,T$v,T$y,"#999999"),T$m.graphics.setAlpha(1),T$F.loop();},T$F.enable=function(){T$a.timer.frameLoop(1,T$F,T$F.loop);},T$F.hide=function(){T$F._show=!1,T$a.timer.clear(T$F,T$F.loop),T$F._canvas&&T$Z.removeElement(T$F._canvas.source);},T$F.clear=function(){T$F.trianglesFaces=T$F.drawCall=T$F.shaderCall=T$F.spriteCount=T$F.spriteRenderUseCacheCount=T$F.treeNodeCollision=T$F.treeSpriteCollision=T$F.canvasNormal=T$F.canvasBitmap=T$F.canvasReCache=0;},T$F.loop=function(){T$F._count++;var T$L=T$Z.now();if(!(T$L-T$F._timer<1e3)){var T$s=T$F._count;if(T$F.FPS=Math.round(1e3*T$s/(T$L-T$F._timer)),T$F._show){T$F.trianglesFaces=Math.round(T$F.trianglesFaces/T$s),T$F.spriteCount=T$F._useCanvas?(T$F.drawCall=Math.round(T$F.drawCall/T$s)-2,T$F.shaderCall=Math.round(T$F.shaderCall/T$s),Math.round(T$F.spriteCount/T$s)-1):(T$F.drawCall=Math.round(T$F.drawCall/T$s)-2,T$F.shaderCall=Math.round(T$F.shaderCall/T$s)-4,Math.round(T$F.spriteCount/T$s)-4),T$F.spriteRenderUseCacheCount=Math.round(T$F.spriteRenderUseCacheCount/T$s),T$F.canvasNormal=Math.round(T$F.canvasNormal/T$s),T$F.canvasBitmap=Math.round(T$F.canvasBitmap/T$s),T$F.canvasReCache=Math.ceil(T$F.canvasReCache/T$s),T$F.treeNodeCollision=Math.round(T$F.treeNodeCollision/T$s),T$F.treeSpriteCollision=Math.round(T$F.treeSpriteCollision/T$s);var T$m=0<T$F.FPS?Math.floor(1e3/T$F.FPS).toString():" ";T$F._fpsStr=T$F.FPS+(T$F.renderSlow?" slow":"")+" "+T$m,T$F._spriteStr=T$F.spriteCount+(T$F.spriteRenderUseCacheCount?"/"+T$F.spriteRenderUseCacheCount:""),T$F._canvasStr=T$F.canvasReCache+"/"+T$F.canvasNormal+"/"+T$F.canvasBitmap,T$F.currentMemorySize=T$p.systemResourceManager.memorySize,T$F._useCanvas?T$F.renderInfoPre():T$F.renderInfo(),T$F.clear();}T$F._count=0,T$F._timer=T$L;}},T$F.renderInfoPre=function(){if(T$F._canvas){var T$L=T$F._ctx;T$L.clearRect(T$F._first?0:T$F._vx,0,T$F._width,T$F._height);for(var T$s=T$R.WebGL.mainContext,T$m=0;T$m<T$F._view.length;T$m++){var T$x=T$F._view[T$m];T$F._first&&(T$L.fillStyle="white",T$L.fillText(T$x.title,T$x.x,T$x.y,null,null,null)),T$L.fillStyle=T$x.color;var T$w=-1;if((T$x=T$F._view[T$m]).varying){if(T$s)switch(T$x.varying){case 1:T$w=T$s.getParameter(T$s[T$x.value]);break;case 2:T$w=T$s.getExtension(T$x.value);}}else T$w=T$F[T$x.value];"M"==T$x.units&&(T$w=Math.floor(T$w/1048576*100)/100+" M"),"K"==T$x.units&&(T$w=Math.floor(T$w/1024*100)/100+" K"),"string"==T$x.units&&(T$w=T$w.match(/\d+\.?\d/i)),T$L.fillText(T$w+"",T$x.x+T$F._vx,T$x.y,null,null,null);}}},T$F.renderInfo=function(){for(var T$L="",T$s=T$R.WebGL.mainContext,T$m=0;T$m<T$F._view.length;T$m++){var T$x=T$F._view[T$m],T$w=-1;if(T$x.varying){if(T$s)switch(T$x.varying){case 1:T$w=T$s.getParameter(T$s[T$x.value]);break;case 2:T$w=T$s.getExtension(T$x.value);}}else T$w=T$F[T$x.value];"M"==T$x.units&&(T$w=Math.floor(T$w/1048576*100)/100+" M"),"K"==T$x.units&&(T$w=Math.floor(T$w/1024*100)/100+" K"),"string"==T$x.units&&(T$w=T$w.match(/\d+\.?\d/i)),T$L+=T$w+"\n";}T$F._txt.text=T$L;},T$F.FPS=0,T$F.loopCount=0,T$F.shaderCall=0,T$F.drawCall=0,T$F.trianglesFaces=0,T$F.spriteCount=0,T$F.spriteRenderUseCacheCount=0,T$F.treeNodeCollision=0,T$F.treeSpriteCollision=0,T$F.canvasNormal=0,T$F.canvasBitmap=0,T$F.canvasReCache=0,T$F.renderSlow=!1,T$F.currentMemorySize=0,T$F._fpsStr=null,T$F._canvasStr=null,T$F._spriteStr=null,T$F._fpsData=[],T$F._timer=0,T$F._count=0,T$F._view=[],T$F._fontSize=12,T$F._txt=null,T$F._leftText=null,T$F._sp=null,T$F._show=!1,T$F._useCanvas=!1,T$F._canvas=null,T$F._ctx=null,T$F._first=!1,T$F._vx=NaN,T$F._width=0,T$F._height=100,T$F;}(),T$P=(function(){function T$L(){this._strsToID={},this._idToStrs=[],this._length=0;}T$V(T$L,"laya.utils.StringKey");var T$s=T$L.prototype;T$s.add=function(T$L){var T$s=this._strsToID[T$L];return null!=T$s?T$s:(this._idToStrs[this._length]=T$L,this._strsToID[T$L]=this._length++);},T$s.getID=function(T$L){var T$s=this._strsToID[T$L];return null==T$s?-1:T$s;},T$s.getName=function(T$L){var T$s=this._idToStrs[T$L];return null==T$s?void 0:T$s;};}(),function(){var T$o;function T$L(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init();}T$V(T$L,"laya.utils.Timer");var T$s=T$L.prototype;return T$s._init=function(){T$a.timer&&T$a.timer.frameLoop(1,this,this._update);},T$s._now=function(){return Date.now();},T$s._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var T$L=this.currFrame=this.currFrame+this.scale,T$s=this._now();this._delta=(T$s-this._lastTimer)*this.scale;var T$m=this.currTimer=this.currTimer+this._delta;T$a.isDebug&&6e4<Math.abs(T$s-this._lastTimer)&&console.error("系统时间错误！"+(T$s-this._lastTimer)),this._lastTimer=T$s;var T$x=this._handlers;for(T$v=this._count=0,T$y=T$x.length;T$v<T$y;T$v++)if(null!==(T$F=T$x[T$v]).method){var T$w=T$F.userFrame?T$L:T$m;if(T$w>=T$F.exeTime)if(T$F.repeat){if(T$F.jumpFrame)for(;T$w>=T$F.exeTime;)T$F.exeTime+=T$F.delay,T$F.run(!1);else T$F.exeTime+=T$F.delay,T$F.run(!1),T$w>T$F.exeTime&&(T$F.exeTime+=Math.ceil((T$w-T$F.exeTime)/T$F.delay)*T$F.delay);}else T$F.run(!0);}else this._count++;(30<this._count||T$L%200==0)&&this._clearHandlers();for(var T$O=this._laters,T$v=0,T$y=T$O.length-1;T$v<=T$y;T$v++){var T$F=T$O[T$v];this._isIgnoreRecover(T$F)||(null!==T$F.method&&(delete this._map[T$F.key],T$F.run(!1)),this._recoverHandler(T$F)),T$v===T$y&&(T$y=T$O.length-1);}T$O.length=0;}},T$s._clearHandlers=function(){for(var T$L=this._handlers,T$s=0,T$m=T$L.length;T$s<T$m;T$s++){var T$x=T$L[T$s];null!==T$x.method?this._temp.push(T$x):this._isIgnoreRecover(T$x)?this._temp.push(T$x):this._recoverHandler(T$x);}this._handlers=this._temp,this._temp=T$L,this._temp.length=0;},T$s._recoverHandler=function(T$L){this._map[T$L.key]==T$L&&delete this._map[T$L.key],T$L.recover();},T$s._create=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){if(!T$m)return T$w.apply(T$x,T$O),null;if(T$v){var T$F=this._getHandler(T$x,T$w);if(T$F)return T$F.repeat=T$s,T$F.userFrame=T$L,T$F.delay=T$m,T$F.ignoreRecover=T$y,T$F.caller=T$x,T$F.method=T$w,T$F.args=T$O,T$F.exeTime=T$m+(T$L?this.currFrame:this.currTimer+this._now()-this._lastTimer),T$F;}return(T$F=T$o.create()).repeat=T$s,T$F.userFrame=T$L,T$F.delay=T$m,T$F.ignoreRecover=T$y,T$F.caller=T$x,T$F.method=T$w,T$F.args=T$O,T$F.exeTime=T$m+(T$L?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(T$F),this._handlers.push(T$F),T$F;},T$s._indexHandler=function(T$L){var T$s=T$L.caller,T$m=T$L.method,T$x=T$s?T$s.$_GID||(T$s.$_GID=T$B.getGID()):0,T$w=T$m.$_TID||(T$m.$_TID=this._mid++);T$L.key=T$x+"_"+T$w,this._map[T$L.key]=T$L;},T$s.once=function(T$L,T$s,T$m,T$x,T$w){void 0===T$w&&(T$w=!0),this._create(!1,!1,T$L,T$s,T$m,T$x,T$w,!1);},T$s.loop=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){void 0===T$w&&(T$w=!0),void 0===T$O&&(T$O=!1),void 0===T$v&&(T$v=!1);var T$y=this._create(!1,!0,T$L,T$s,T$m,T$x,T$w,T$v);T$y&&(T$y.jumpFrame=T$O);},T$s.frameOnce=function(T$L,T$s,T$m,T$x,T$w){void 0===T$w&&(T$w=!0),this._create(!0,!1,T$L,T$s,T$m,T$x,T$w,!1);},T$s.frameLoop=function(T$L,T$s,T$m,T$x,T$w,T$O){void 0===T$w&&(T$w=!0),void 0===T$O&&(T$O=!1),this._create(!0,!0,T$L,T$s,T$m,T$x,T$w,T$O);},T$s.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+T$o._freeCount;},T$s.clear=function(T$L,T$s){var T$m=this._getHandler(T$L,T$s);return!(!T$m||this._isIgnoreRecover(T$m))&&(delete this._map[T$m.key],T$m.key=null,T$m.clear(),!0);},T$s.clearAll=function(T$L){if(T$L)for(var T$s=0,T$m=this._handlers.length;T$s<T$m;T$s++){var T$x=this._handlers[T$s];T$x.caller===T$L&&(this._isIgnoreRecover(T$x)||(delete this._map[T$x.key],T$x.key=null,T$x.clear()));}},T$s._getHandler=function(T$L,T$s){var T$m=T$L?T$L.$_GID||(T$L.$_GID=T$B.getGID()):0,T$x=T$s.$_TID||(T$s.$_TID=this._mid++);return this._map[T$m+"_"+T$x];},T$s._isIgnoreRecover=function(T$L){if(T$L.ignoreRecover||T$L.caller&&"IgnoreRecover"==T$L.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var T$s="";try{arguments.propertyIsEnumerable.caller;}catch(T$L){T$s=T$L.stack;}T$a.recordError("报错：核心定时器销毁忽略  "+T$s);}return!0;}return!1;},T$s.hasHandler=function(T$L,T$s){return this._map[T$L.$_GID+"_"+T$s.$_TID];},T$s.callLater=function(T$L,T$s,T$m){if(null==this._getHandler(T$L,T$s)){var T$x=T$o.create();T$x.caller=T$L,T$x.method=T$s,T$x.args=T$m,this._indexHandler(T$x),this._laters.push(T$x);}},T$s.runCallLater=function(T$L,T$s){var T$m=this._getHandler(T$L,T$s);T$m&&null!=T$m.method&&(this._isIgnoreRecover(T$m)||(delete this._map[T$m.key],T$m.run(!0)));},T$s.runTimer=function(T$L,T$s){this.runCallLater(T$L,T$s);},T$u(0,T$s,"delta",function(){return this._delta;}),T$L.__init$=function(){T$o=function(){function T$s(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1;}T$V(T$s,"");var T$L=T$s.prototype;return T$L.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1;},T$L.recover=function(){this.clear(),this.args=T$s._freeHandler,T$s._freeHandler=this,T$s._freeCount++;},T$L.run=function(T$L){var T$s=this.caller;if(T$s&&T$s.destroyed)return this.clear();var T$m=this.method,T$x=this.args;T$L&&this.clear(),null!=T$m&&(T$x?T$m.apply(T$s,T$x):T$m.call(T$s));},T$s._freeHandler=null,T$s._freeCount=0,T$s.create=function(){var T$L=T$s._freeHandler;return T$L?(T$s._freeHandler=T$L.args,--T$s._freeCount,T$L.args=null,T$L):new T$s();},T$s;}();},T$L;}()),T$k=function(){function T$C(){this.gid=0;}T$V(T$C,"laya.utils.Tween");var T$L=T$C.prototype;return T$L.to=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){return void 0===T$O&&(T$O=0),void 0===T$v&&(T$v=!1),this._create(T$L,T$s,T$m,T$x,T$w,T$O,T$v,!0,!1,!0);},T$L.from=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){return void 0===T$O&&(T$O=0),void 0===T$v&&(T$v=!1),this._create(T$L,T$s,T$m,T$x,T$w,T$O,T$v,!1,!1,!0);},T$L._create=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o){if(!T$L)throw new Error("Tween:target is null");this._target=T$L,this._duration=T$m,this._ease=T$x||T$s.ease||T$C.easeNone,this._complete=T$w||T$s.complete,this._delay=T$O,this._props=[],this._usedTimer=0,this._startTimer=T$Z.now(),this._usedPool=T$F,this._delayParam=null,this.update=T$s.update;var T$V=T$L.$_GID||(T$L.$_GID=T$B.getGID());return T$C.tweenMap[T$V]?(T$v&&T$C.clearTween(T$L),T$C.tweenMap[T$V].push(this)):T$C.tweenMap[T$V]=[this],T$o?T$O<=0?this.firstStart(T$L,T$s,T$y):(this._delayParam=[T$L,T$s,T$y],T$a.scaleTimer.once(T$O,this,this.firstStart,this._delayParam)):this._initProps(T$L,T$s,T$y),this;},T$L.firstStart=function(T$L,T$s,T$m){this._delayParam=null,T$L.destroyed?this.clear():(this._initProps(T$L,T$s,T$m),this._beginLoop());},T$L._initProps=function(T$L,T$s,T$m){for(var T$x in T$s)if("number"==typeof T$L[T$x]){var T$w=T$m?T$L[T$x]:T$s[T$x],T$O=T$m?T$s[T$x]:T$L[T$x];this._props.push([T$x,T$w,T$O-T$w]),T$m||(T$L[T$x]=T$w);}},T$L._beginLoop=function(){T$a.scaleTimer.frameLoop(1,this,this._doEase);},T$L._doEase=function(){this._updateEase(T$Z.now());},T$L._updateEase=function(T$L){var T$s=this._target;if(T$s){if(T$s.destroyed)return T$C.clearTween(T$s);var T$m=this._usedTimer=T$L-this._startTimer-this._delay;if(!(T$m<0)){if(T$m>=this._duration)return this.complete();for(var T$x=0<T$m?this._ease(T$m,0,1,this._duration):0,T$w=this._props,T$O=0,T$v=T$w.length;T$O<T$v;T$O++){var T$y=T$w[T$O];T$s[T$y[0]]=T$y[1]+T$x*T$y[2];}this.update&&this.update.run();}}},T$L.complete=function(){if(this._target){T$a.scaleTimer.runTimer(this,this.firstStart);for(var T$L=this._target,T$s=this._props,T$m=this._complete,T$x=0,T$w=T$s.length;T$x<T$w;T$x++){var T$O=T$s[T$x];T$L[T$O[0]]=T$O[1]+T$O[2];}this.update&&this.update.run(),this.clear(),T$m&&T$m.run();}},T$L.pause=function(){T$a.scaleTimer.clear(this,this._beginLoop),T$a.scaleTimer.clear(this,this._doEase),T$a.scaleTimer.clear(this,this.firstStart);var T$L;(T$L=T$Z.now()-this._startTimer-this._delay)<0&&(this._usedTimer=T$L);},T$L.setStartTime=function(T$L){this._startTimer=T$L;},T$L.clear=function(){this._target&&(this._remove(),this._clear());},T$L._clear=function(){this.pause(),T$a.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,T$q.recover("tween",this));},T$L.recover=function(){this._usedPool=!0,this._clear();},T$L._remove=function(){var T$L=T$C.tweenMap[this._target.$_GID];if(T$L)for(var T$s=0,T$m=T$L.length;T$s<T$m;T$s++)if(T$L[T$s]===this){T$L.splice(T$s,1);break;}},T$L.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=T$Z.now(),this._delayParam)T$a.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var T$L=this._props,T$s=0,T$m=T$L.length;T$s<T$m;T$s++){var T$x=T$L[T$s];this._target[T$x[0]]=T$x[1];}T$a.scaleTimer.once(this._delay,this,this._beginLoop);}},T$L.resume=function(){this._usedTimer>=this._duration||(this._startTimer=T$Z.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?T$a.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop());},T$u(0,T$L,"progress",null,function(T$L){var T$s=T$L*this._duration;this._startTimer=T$Z.now()-this._delay-T$s;}),T$C.to=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){return void 0===T$O&&(T$O=0),void 0===T$v&&(T$v=!1),void 0===T$y&&(T$y=!0),T$q.getItemByClass("tween",T$C)._create(T$L,T$s,T$m,T$x,T$w,T$O,T$v,!0,T$y,!0);},T$C.from=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){return void 0===T$O&&(T$O=0),void 0===T$v&&(T$v=!1),void 0===T$y&&(T$y=!0),T$q.getItemByClass("tween",T$C)._create(T$L,T$s,T$m,T$x,T$w,T$O,T$v,!1,T$y,!0);},T$C.clearAll=function(T$L){if(T$L&&T$L.$_GID){var T$s=T$C.tweenMap[T$L.$_GID];if(T$s){for(var T$m=0,T$x=T$s.length;T$m<T$x;T$m++)T$s[T$m]._clear();T$s.length=0;}}},T$C.clear=function(T$L){T$L.clear();},T$C.clearTween=function(T$L){T$C.clearAll(T$L);},T$C.easeNone=function(T$L,T$s,T$m,T$x){return T$m*T$L/T$x+T$s;},T$C.tweenMap={},T$C;}(),T$B=function(){function T$y(){}return T$V(T$y,"laya.utils.Utils"),T$y.toRadian=function(T$L){return T$L*T$y._pi2;},T$y.toAngle=function(T$L){return T$L*T$y._pi;},T$y.toHexColor=function(T$L){if(T$L<0||isNaN(T$L))return null;for(var T$s=T$L.toString(16);T$s.length<6;)T$s="0"+T$s;return"#"+T$s;},T$y.getGID=function(){return T$y._gid++;},T$y.concatArray=function(T$L,T$s){if(!T$s)return T$L;if(!T$L)return T$s;var T$m=0,T$x=T$s.length;for(T$m=0;T$m<T$x;T$m++)T$L.push(T$s[T$m]);return T$L;},T$y.clearArray=function(T$L){return T$L&&(T$L.length=0),T$L;},T$y.copyArray=function(T$L,T$s){if(T$L||(T$L=[]),!T$s)return T$L;T$L.length=T$s.length;var T$m=0,T$x=T$s.length;for(T$m=0;T$m<T$x;T$m++)T$L[T$m]=T$s[T$m];return T$L;},T$y.getGlobalRecByPoints=function(T$L,T$s,T$m,T$x,T$w){var T$O,T$v;return T$O=new T$f(T$s,T$m),T$O=T$L.localToGlobal(T$O),T$v=new T$f(T$x,T$w),T$v=T$L.localToGlobal(T$v),T$_._getWrapRec([T$O.x,T$O.y,T$v.x,T$v.y]);},T$y.getGlobalPosAndScale=function(T$L){return T$y.getGlobalRecByPoints(T$L,0,0,1,1);},T$y.bind=function(T$L,T$s){return T$L.bind(T$s);},T$y.measureText=function(T$L,T$s){return T$U.measureText(T$L,T$s);},T$y.contextMeasureText=function(T$L){var T$s=T$Z.context.measureText(T$L);return T$s||(T$s={width:16,height:16}),T$s;},T$y.updateOrder=function(T$L){if(!T$L||T$L.length<2)return!1;for(var T$s,T$m=1,T$x=0,T$w=T$L.length,T$O=NaN;T$m<T$w;){for(T$s=T$L[T$x=T$m],T$O=T$L[T$x]._zOrder;-1<--T$x&&T$L[T$x]._zOrder>T$O;)T$L[T$x+1]=T$L[T$x];T$L[T$x+1]=T$s,T$m++;}var T$v=T$s.parent.conchModel;if(T$v)if(null!=T$v.updateZOrder)T$v.updateZOrder();else{for(T$m=0;T$m<T$w;T$m++)T$v.removeChild(T$L[T$m].conchModel);for(T$m=0;T$m<T$w;T$m++)T$v.addChildAt(T$L[T$m].conchModel,T$m);}return!0;},T$y.transPointList=function(T$L,T$s,T$m){var T$x=0,T$w=T$L.length;for(T$x=0;T$x<T$w;T$x+=2)T$L[T$x]+=T$s,T$L[T$x+1]+=T$m;},T$y.parseInt=function(T$L,T$s){void 0===T$s&&(T$s=0);var T$m=T$Z.window.parseInt(T$L,T$s);return isNaN(T$m)?0:T$m;},T$y.getFileExtension=function(T$L){T$y._extReg.lastIndex=T$L.lastIndexOf(".");var T$s=T$y._extReg.exec(T$L);return T$s&&1<T$s.length?T$s[1].toLowerCase():null;},T$y.getTransformRelativeToWindow=function(T$L,T$s,T$m){var T$x=T$a.stage,T$w=laya.utils.Utils.getGlobalPosAndScale(T$L),T$O=T$x._canvasTransform.clone(),T$v=T$O.tx,T$y=T$O.ty;T$O.rotate(-Math.PI/180*T$a.stage.canvasDegree),T$O.scale(T$a.stage.clientScaleX,T$a.stage.clientScaleY);var T$F=T$a.stage.canvasDegree%180!=0,T$o=NaN,T$V=NaN;T$F?(T$o=T$m+T$w.y,T$V=T$s+T$w.x,T$o*=T$O.d,T$V*=T$O.a,90==T$a.stage.canvasDegree?(T$o=T$v-T$o,T$V+=T$y):(T$o+=T$v,T$V=T$y-T$V)):(T$o=T$s+T$w.x,T$V=T$m+T$w.y,T$o*=T$O.a,T$V*=T$O.d,T$o+=T$v,T$V+=T$y);var T$C=NaN,T$E=NaN;return T$E=T$F?(T$C=T$O.d*T$w.height,T$O.a*T$w.width):(T$C=T$O.a*T$w.width,T$O.d*T$w.height),{x:T$o,y:T$V,scaleX:T$C,scaleY:T$E};},T$y.fitDOMElementInArea=function(T$L,T$s,T$m,T$x,T$w,T$O){T$L._fitLayaAirInitialized||(T$L._fitLayaAirInitialized=!0,T$L.style.transformOrigin=T$L.style.webKittransformOrigin="left top",T$L.style.position="absolute");var T$v=T$y.getTransformRelativeToWindow(T$s,T$m,T$x);T$L.style.transform=T$L.style.webkitTransform="scale("+T$v.scaleX+","+T$v.scaleY+") rotate("+T$a.stage.canvasDegree+"deg)",T$L.style.width=T$w+"px",T$L.style.height=T$O+"px",T$L.style.left=T$v.x+"px",T$L.style.top=T$v.y+"px";},T$y.isOkTextureList=function(T$L){if(!T$L)return!1;var T$s,T$m=0,T$x=T$L.length;for(T$m=0;T$m<T$x;T$m++)if(!(T$s=T$L[T$m])||!T$s.source)return!1;return!0;},T$y.isOKCmdList=function(T$L){if(!T$L)return!1;var T$s,T$m,T$x=0,T$w=T$L.length,T$O=T$R._context;for(T$x=0;T$x<T$w;T$x++)switch((T$s=T$L[T$x]).callee){case T$O._drawTexture:case T$O._fillTexture:case T$O._drawTextureWithTransform:if(!(T$m=T$s[0])||!T$m.source)return!1;}return!0;},T$y._gid=1,T$y._pi=180/Math.PI,T$y._pi2=Math.PI/180,T$y._extReg=/\.(\w+)\??/g,T$y.parseXMLFromString=function(T$L){var T$s;if(T$L=T$L.replace(/>\s+</g,"><"),-1<(T$s=new DOMParser().parseFromString(T$L,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(T$s.firstChild.firstChild.textContent);return T$s;},T$y;}(),T$M=function(){function T$L(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],T$R.isWebGL&&T$d.regCacheByFunction(T$B.bind(this.startDispose,this),T$B.bind(this.getCacheList,this));}T$V(T$L,"laya.utils.VectorGraphManager");var T$s=T$L.prototype;return T$s.getId=function(){return this._id++;},T$s.addShape=function(T$L,T$s){this.shapeDic[T$L]=T$s,this.useDic[T$L]||(this.useDic[T$L]=!0);},T$s.addLine=function(T$L,T$s){this.shapeLineDic[T$L]=T$s,this.shapeLineDic[T$L]||(this.shapeLineDic[T$L]=!0);},T$s.getShape=function(T$L){this._checkKey&&null!=this.useDic[T$L]&&(this.useDic[T$L]=!0);},T$s.deleteShape=function(T$L){this.shapeDic[T$L]&&(this.shapeDic[T$L]=null,delete this.shapeDic[T$L]),this.shapeLineDic[T$L]&&(this.shapeLineDic[T$L]=null,delete this.shapeLineDic[T$L]),null!=this.useDic[T$L]&&delete this.useDic[T$L];},T$s.getCacheList=function(){var T$L,T$s=[];for(T$L in this.shapeDic)T$s.push(this.shapeDic[T$L]);for(T$L in this.shapeLineDic)T$s.push(this.shapeLineDic[T$L]);return T$s;},T$s.startDispose=function(T$L){var T$s;for(T$s in this.useDic)this.useDic[T$s]=!1;this._checkKey=!0;},T$s.endDispose=function(){if(this._checkKey){var T$L;for(T$L in this.useDic)this.useDic[T$L]||this.deleteShape(T$L);this._checkKey=!1;}},T$L.getInstance=function(){return T$L.instance=T$L.instance||new T$L();},T$L.instance=null,T$L;}(),T$z=function(){function T$x(){this._obj=null,this._obj=T$x.supportWeakMap?new T$Z.window.WeakMap():{},T$x.supportWeakMap||T$x._maps.push(this);}T$V(T$x,"laya.utils.WeakObject");var T$L=T$x.prototype;return T$L.set=function(T$L,T$s){if(null!=T$L)if(T$x.supportWeakMap){var T$m=T$L;"string"!=typeof T$L&&"number"!=typeof T$L||(T$m=T$x._keys[T$L])||(T$m=T$x._keys[T$L]={k:T$L}),this._obj.set(T$m,T$s);}else"string"==typeof T$L||"number"==typeof T$L?this._obj[T$L]=T$s:(T$L.$_GID||(T$L.$_GID=T$B.getGID()),this._obj[T$L.$_GID]=T$s);},T$L.get=function(T$L){if(null==T$L)return null;if(T$x.supportWeakMap){var T$s="string"==typeof T$L||"number"==typeof T$L?T$x._keys[T$L]:T$L;return T$s?this._obj.get(T$s):null;}return"string"==typeof T$L||"number"==typeof T$L?this._obj[T$L]:this._obj[T$L.$_GID];},T$L.del=function(T$L){if(null!=T$L)if(T$x.supportWeakMap){var T$s="string"==typeof T$L||"number"==typeof T$L?T$x._keys[T$L]:T$L;if(!T$s)return;this._obj.delete(T$s);}else"string"==typeof T$L||"number"==typeof T$L?delete this._obj[T$L]:delete this._obj[this._obj.$_GID];},T$L.has=function(T$L){if(null==T$L)return!1;if(T$x.supportWeakMap){var T$s="string"==typeof T$L||"number"==typeof T$L?T$x._keys[T$L]:T$L;return this._obj.has(T$s);}return"string"==typeof T$L||"number"==typeof T$L?null!=this._obj[T$L]:null!=this._obj[this._obj.$_GID];},T$x.__init__=function(){(T$x.supportWeakMap=null!=T$Z.window.WeakMap)||T$a.timer.loop(T$x.delInterval,null,T$x.clearCache);},T$x.clearCache=function(){for(var T$L=0,T$s=T$x._maps.length;T$L<T$s;T$L++){T$x._maps[T$L]._obj={};}},T$x.supportWeakMap=!1,T$x.delInterval=3e5,T$x._keys={},T$x._maps=[],T$F(T$x,["I",function(){return this.I=new T$x();}]),T$x;}(),T$t=function(){function T$L(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null;}T$V(T$L,"laya.utils.WordText");var T$s=T$L.prototype;return T$s.setText=function(T$L){this.changed=!0,this._text=T$L;},T$s.toString=function(){return this._text;},T$s.charCodeAt=function(T$L){return this._text?this._text.charCodeAt(T$L):NaN;},T$s.charAt=function(T$L){return this._text?this._text.charAt(T$L):null;},T$u(0,T$s,"length",function(){return this._text?this._text.length:0;}),T$L;}(),T$LL=function(T$L){function T$v(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,T$v.__super.call(this),this._childs=T$v.ARRAY_EMPTY,this._$P=T$v.PROP_EMPTY,this.timer=T$a.scaleTimer,this.conchModel=T$R.isConchNode?this.createConchModel():null;}T$V(T$v,"laya.display.Node",T$o);var T$s=T$v.prototype;return T$s._setBit=function(T$L,T$s){1==T$L&&this._getBit(T$L)!=T$s&&this._updateDisplayedInstage();T$s?this._bits|=T$L:this._bits&=~T$L;},T$s._getBit=function(T$L){return 0!=(this._bits&T$L);},T$s._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1);},T$s._setUpNoticeType=function(T$L){var T$s=this;for(T$s._setBit(T$L,!0),T$s=T$s.parent;T$s;){if(T$s._getBit(T$L))return;T$s._setBit(T$L,!0),T$s=T$s.parent;}},T$s.on=function(T$L,T$s,T$m,T$x){return"display"!==T$L&&"undisplay"!==T$L||this._getBit(1)||this._setUpNoticeType(1),this._createListener(T$L,T$s,T$m,T$x,!1);},T$s.once=function(T$L,T$s,T$m,T$x){return"display"!==T$L&&"undisplay"!==T$L||this._getBit(1)||this._setUpNoticeType(1),this._createListener(T$L,T$s,T$m,T$x,!0);},T$s.createConchModel=function(){return null;},T$s.destroy=function(T$L){void 0===T$L&&(T$L=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(T$L?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this);},T$s.destroyChildren=function(){if(this._childs)for(var T$L=this._childs.length-1;-1<T$L;T$L--)this._childs[T$L].destroy(!0);},T$s.addChild=function(T$L){if(!T$L||this.destroyed||T$L===this)return T$L;if(T$L.zOrder&&this._set$P("hasZorder",!0),T$L._parent===this){var T$s=this.getChildIndex(T$L);T$s!==this._childs.length-1&&(this._childs.splice(T$s,1),this._childs.push(T$L),this.conchModel&&(this.conchModel.removeChild(T$L.conchModel),this.conchModel.addChildAt(T$L.conchModel,this._childs.length-1)),this._childChanged());}else T$L.parent&&T$L.parent.removeChild(T$L),this._childs===T$v.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(T$L),this.conchModel&&this.conchModel.addChildAt(T$L.conchModel,this._childs.length-1),(T$L.parent=this)._childChanged();return T$L;},T$s.addChildren=function(T$L){for(var T$s=arguments,T$m=0,T$x=T$s.length;T$m<T$x;)this.addChild(T$s[T$m++]);},T$s.addChildAt=function(T$L,T$s){if(!T$L||this.destroyed||T$L===this)return T$L;if(T$L.zOrder&&this._set$P("hasZorder",!0),0<=T$s&&T$s<=this._childs.length){if(T$L._parent===this){var T$m=this.getChildIndex(T$L);this._childs.splice(T$m,1),this._childs.splice(T$s,0,T$L),this.conchModel&&(this.conchModel.removeChild(T$L.conchModel),this.conchModel.addChildAt(T$L.conchModel,T$s)),this._childChanged();}else T$L.parent&&T$L.parent.removeChild(T$L),this._childs===T$v.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(T$s,0,T$L),this.conchModel&&this.conchModel.addChildAt(T$L.conchModel,T$s),T$L.parent=this;return T$L;}throw new Error("appendChildAt:The index is out of bounds");},T$s.getChildIndex=function(T$L){return this._childs.indexOf(T$L);},T$s.getChildByName=function(T$L){var T$s=this._childs;if(T$s)for(var T$m=0,T$x=T$s.length;T$m<T$x;T$m++){var T$w=T$s[T$m];if(T$w.name===T$L)return T$w;}return null;},T$s._get$P=function(T$L){return this._$P[T$L];},T$s._set$P=function(T$L,T$s){return this.destroyed||(this._$P===T$v.PROP_EMPTY&&(this._$P={}),this._$P[T$L]=T$s),T$s;},T$s.getChildAt=function(T$L){return this._childs[T$L];},T$s.setChildIndex=function(T$L,T$s){var T$m=this._childs;if(T$s<0||T$s>=T$m.length)throw new Error("setChildIndex:The index is out of bounds.");var T$x=this.getChildIndex(T$L);if(T$x<0)throw new Error("setChildIndex:node is must child of this object.");return T$m.splice(T$x,1),T$m.splice(T$s,0,T$L),this.conchModel&&(this.conchModel.removeChild(T$L.conchModel),this.conchModel.addChildAt(T$L.conchModel,T$s)),this._childChanged(),T$L;},T$s._childChanged=function(T$L){},T$s.removeChild=function(T$L){if(!this._childs)return T$L;var T$s=this._childs.indexOf(T$L);return this.removeChildAt(T$s);},T$s.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this;},T$s.removeChildByName=function(T$L){var T$s=this.getChildByName(T$L);return T$s&&this.removeChild(T$s),T$s;},T$s.removeChildAt=function(T$L){var T$s=this.getChildAt(T$L);if(T$s){for(var T$m=this._childs.length-1,T$x=T$L;T$x<T$m;++T$x)this._childs[T$x]=this._childs[T$x+1];this._childs.length=T$m,this.conchModel&&this.conchModel.removeChild(T$s.conchModel),T$s.parent=null;}return T$s;},T$s.removeChildren=function(T$L,T$s){if(void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=2147483647),this._childs&&0<this._childs.length){var T$m=this._childs;if(0===T$L&&T$O<=T$s){var T$x=T$m;this._childs=T$v.ARRAY_EMPTY;}else T$x=T$m.splice(T$L,T$s-T$L);for(var T$w=0,T$O=T$x.length;T$w<T$O;T$w++)T$x[T$w].parent=null,this.conchModel&&this.conchModel.removeChild(T$x[T$w].conchModel);}return this;},T$s.replaceChild=function(T$L,T$s){var T$m=this._childs.indexOf(T$s);return-1<T$m?(this._childs.splice(T$m,1,T$L),this.conchModel&&(this.conchModel.removeChild(T$s.conchModel),this.conchModel.addChildAt(T$L.conchModel,T$m)),T$s.parent=null,T$L.parent=this,T$L):null;},T$s._updateDisplayedInstage=function(){var T$L;T$L=this;var T$s=T$a.stage;for(this._displayedInStage=!1;T$L;){if(T$L._getBit(1)){this._displayedInStage=T$L._displayedInStage;break;}if(T$L==T$s||T$L._displayedInStage){this._displayedInStage=!0;break;}T$L=T$L.parent;}},T$s._setDisplay=function(T$L){this._displayedInStage!==T$L&&((this._displayedInStage=T$L)?this.event("display"):this.event("undisplay"));},T$s._displayChild=function(T$L,T$s){var T$m=T$L._childs;if(T$m)for(var T$x=0;T$x<T$m.length;T$x++){var T$w=T$m[T$x];T$w&&T$w._getBit(1)&&(0<T$w._childs.length?this._displayChild(T$w,T$s):T$w._setDisplay(T$s));}T$L._setDisplay(T$s);},T$s.contains=function(T$L){if(T$L===this)return!0;for(;T$L;){if(T$L.parent===this)return!0;T$L=T$L.parent;}return!1;},T$s.timerLoop=function(T$L,T$s,T$m,T$x,T$w,T$O){void 0===T$w&&(T$w=!0),void 0===T$O&&(T$O=!1),this.timer.loop(T$L,T$s,T$m,T$x,T$w,T$O);},T$s.timerOnce=function(T$L,T$s,T$m,T$x,T$w){void 0===T$w&&(T$w=!0),this.timer._create(!1,!1,T$L,T$s,T$m,T$x,T$w);},T$s.frameLoop=function(T$L,T$s,T$m,T$x,T$w){void 0===T$w&&(T$w=!0),this.timer._create(!0,!0,T$L,T$s,T$m,T$x,T$w);},T$s.frameOnce=function(T$L,T$s,T$m,T$x,T$w){void 0===T$w&&(T$w=!0),this.timer._create(!0,!1,T$L,T$s,T$m,T$x,T$w);},T$s.clearTimer=function(T$L,T$s){this.timer.clear(T$L,T$s);},T$u(0,T$s,"numChildren",function(){return this._childs.length;}),T$u(0,T$s,"destroyed",function(){return this._destroyed;}),T$u(0,T$s,"parent",function(){return this._parent;},function(T$L){this._parent!==T$L&&(T$L?(this._parent=T$L,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),T$L.displayedInStage&&this._displayChild(this,!0)),T$L._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=T$L));}),T$u(0,T$s,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage;}),T$v.ARRAY_EMPTY=[],T$v.PROP_EMPTY={},T$v.NOTICE_DISPLAY=1,T$v.MOUSEENABLE=2,T$v;}(),T$sL=function(T$L){function T$E(T$L){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,T$E.__super.call(this),this._padding=T$E._PADDING,this._spacing=T$E._SPACING,this._aligns=T$E._ALIGNS,this._font=T$r.EMPTY,this._ower=T$L;}T$V(T$E,"laya.display.css.CSSStyle",T$L);var T$s=T$E.prototype;return T$s.destroy=function(){this._ower=null,this._font=null,this._rect=null;},T$s.inherit=function(T$L){this._font=T$L._font,this._spacing=T$L._spacing===T$E._SPACING?T$E._SPACING:T$L._spacing.slice(),this.lineHeight=T$L.lineHeight;},T$s._widthAuto=function(){return 0!=(262144&this._type);},T$s.widthed=function(T$L){return 0!=(8&this._type);},T$s._calculation=function(T$L,T$s){if(T$s.indexOf("%")<0)return!1;var T$x=this._ower,T$w=T$x.parent,T$O=this._rect;function T$v(T$L,T$s,T$m){return T$L*T$m[0]+T$s*T$m[1]+T$m[2];}function T$m(T$L){var T$s=T$w.width,T$m=T$x.width;T$O.width&&(T$x.width=T$v(T$s,T$m,T$O.width)),T$O.height&&(T$x.height=T$v(T$s,T$m,T$O.height)),T$O.left&&(T$x.x=T$v(T$s,T$m,T$O.left)),T$O.top&&(T$x.y=T$v(T$s,T$m,T$O.top));}null===T$O&&(T$w._getCSSStyle()._type|=524288,T$w.on("resize",this,T$m),this._rect=T$O={input:{}});var T$y=T$s.split(" ");return T$y[0]=parseFloat(T$y[0])/100,1==T$y.length?T$y[1]=T$y[2]=0:(T$y[1]=parseFloat(T$y[1])/100,T$y[2]=parseFloat(T$y[2])),T$O[T$L]=T$y,T$O.input[T$L]=T$s,T$m(),!0;},T$s.heighted=function(T$L){return 0!=(8192&this._type);},T$s.size=function(T$L,T$s){var T$m=this._ower,T$x=!1;-1!==T$L&&T$L!=this._ower.width&&(this._type|=8,this._ower.width=T$L,T$x=!0),-1!==T$s&&T$s!=this._ower.height&&(this._type|=8192,this._ower.height=T$s,T$x=!0),T$x&&(T$m._layoutLater(),524288&this._type&&T$m.event("resize",this));},T$s._getAlign=function(){return this._aligns[0];},T$s._getValign=function(){return this._aligns[1];},T$s._getCssFloat=function(){return 0!=(32768&this._type)?32768:0;},T$s._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new T$r(this._font));},T$s.render=function(T$L,T$s,T$m,T$x){var T$w=T$L.width,T$O=T$L.height;T$m-=T$L.pivotX,T$x-=T$L.pivotY,this._bgground&&null!=this._bgground.color&&T$s.ctx.fillRect(T$m,T$x,T$w,T$O,this._bgground.color),this._border&&this._border.color&&T$s.drawRect(T$m,T$x,T$w,T$O,this._border.color.strColor,this._border.size);},T$s.getCSSStyle=function(){return this;},T$s.cssText=function(T$L){this.attrs(T$E.parseOneCSS(T$L,";"));},T$s.attrs=function(T$L){if(T$L)for(var T$s=0,T$m=T$L.length;T$s<T$m;T$s++){var T$x=T$L[T$s];this[T$x[0]]=T$x[1];}},T$s.setTransform=function(T$L){"none"===T$L?this._tf=T$y._TF_EMPTY:this.attrs(T$E.parseOneCSS(T$L,","));},T$s.translate=function(T$L,T$s){this._tf===T$y._TF_EMPTY&&(this._tf=new T$w()),this._tf.translateX=T$L,this._tf.translateY=T$s;},T$s.scale=function(T$L,T$s){this._tf===T$y._TF_EMPTY&&(this._tf=new T$w()),this._tf.scaleX=T$L,this._tf.scaleY=T$s;},T$s._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type);},T$u(0,T$s,"block",T$L.prototype._$get_block,function(T$L){T$L?this._type|=1:this._type&=-2;}),T$u(0,T$s,"valign",function(){return T$E._valigndef[this._aligns[1]];},function(T$L){this._aligns===T$E._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=T$E._valigndef[T$L];}),T$u(0,T$s,"height",null,function(T$L){if(this._type|=8192,"string"==typeof T$L){if(this._calculation("height",T$L))return;T$L=parseInt(T$L);}this.size(-1,T$L);}),T$u(0,T$s,"width",null,function(T$L){if(this._type|=8,"string"==typeof T$L){var T$s=T$L.indexOf("auto");if(0<=T$s&&(this._type|=262144,T$L=T$L.substr(0,T$s)),this._calculation("width",T$L))return;T$L=parseInt(T$L);}this.size(T$L,-1);}),T$u(0,T$s,"fontWeight",function(){return this._font.weight;},function(T$L){this._createFont().weight=T$L;}),T$u(0,T$s,"left",null,function(T$L){var T$s=this._ower;if("string"==typeof T$L){if("center"===T$L?T$L="50% -50% 0":"right"===T$L&&(T$L="100% -100% 0"),this._calculation("left",T$L))return;T$L=parseInt(T$L);}T$s.x=T$L;}),T$u(0,T$s,"_translate",null,function(T$L){this.translate(T$L[0],T$L[1]);}),T$u(0,T$s,"absolute",function(){return 0!=(4&this._type);}),T$u(0,T$s,"top",null,function(T$L){var T$s=this._ower;if("string"==typeof T$L){if("middle"===T$L?T$L="50% -50% 0":"bottom"===T$L&&(T$L="100% -100% 0"),this._calculation("top",T$L))return;T$L=parseInt(T$L);}T$s.y=T$L;}),T$u(0,T$s,"align",function(){return T$E._aligndef[this._aligns[0]];},function(T$L){this._aligns===T$E._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=T$E._aligndef[T$L];}),T$u(0,T$s,"bold",function(){return this._font.bold;},function(T$L){this._createFont().bold=T$L;}),T$u(0,T$s,"padding",function(){return this._padding;},function(T$L){this._padding=T$L;}),T$u(0,T$s,"leading",function(){return this._spacing[1];},function(T$L){"string"==typeof T$L&&(T$L=parseInt(T$L+"")),this._spacing===T$E._SPACING&&(this._spacing=[0,0]),this._spacing[1]=T$L;}),T$u(0,T$s,"lineElement",function(){return 0!=(65536&this._type);},function(T$L){T$L?this._type|=65536:this._type&=-65537;}),T$u(0,T$s,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left";},function(T$L){this.lineElement=!1,"right"===T$L?this._type|=32768:this._type&=-32769;}),T$u(0,T$s,"textDecoration",function(){return this._font.decoration;},function(T$L){this._createFont().decoration=T$L;}),T$u(0,T$s,"whiteSpace",function(){return 131072&this._type?"nowrap":"";},function(T$L){"nowrap"===T$L&&(this._type|=131072),"none"===T$L&&(this._type&=-131073);}),T$u(0,T$s,"background",null,function(T$L){T$L?(this._bgground||(this._bgground={}),this._bgground.color=T$L,this._ower.conchModel&&this._ower.conchModel.bgColor(T$L),this._type|=16384,this._ower._renderType|=256):this._bgground=null;}),T$u(0,T$s,"wordWrap",function(){return 0==(131072&this._type);},function(T$L){T$L?this._type&=-131073:this._type|=131072;}),T$u(0,T$s,"color",function(){return this._font.color;},function(T$L){this._createFont().color=T$L;}),T$u(0,T$s,"password",function(){return this._font.password;},function(T$L){this._createFont().password=T$L;}),T$u(0,T$s,"backgroundColor",function(){return this._bgground?this._bgground.color:null;},function(T$L){"none"===T$L?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=T$L),this._ower.conchModel&&this._ower.conchModel.bgColor(T$L),this._ower._renderType|=256;}),T$u(0,T$s,"font",function(){return this._font.toString();},function(T$L){this._createFont().set(T$L);}),T$u(0,T$s,"weight",null,function(T$L){this._createFont().weight=T$L;}),T$u(0,T$s,"letterSpacing",function(){return this._spacing[0];},function(T$L){"string"==typeof T$L&&(T$L=parseInt(T$L+"")),this._spacing===T$E._SPACING&&(this._spacing=[0,0]),this._spacing[0]=T$L;}),T$u(0,T$s,"fontSize",function(){return this._font.size;},function(T$L){this._createFont().size=T$L;}),T$u(0,T$s,"italic",function(){return this._font.italic;},function(T$L){this._createFont().italic=T$L;}),T$u(0,T$s,"fontFamily",function(){return this._font.family;},function(T$L){this._createFont().family=T$L;}),T$u(0,T$s,"stroke",function(){return this._font.stroke[0];},function(T$L){this._createFont().stroke===T$r._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=T$L;}),T$u(0,T$s,"strokeColor",function(){return this._font.stroke[1];},function(T$L){this._createFont().stroke===T$r._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=T$L;}),T$u(0,T$s,"border",function(){return this._border?this._border.value:"";},function(T$L){if("none"!=T$L){this._border||(this._border={});var T$s=(this._border.value=T$L).split(" ");if(this._border.color=T$I.create(T$s[T$s.length-1]),1==T$s.length)return this._border.size=1,void(this._border.type="solid");var T$m=0;0<T$s[0].indexOf("px")?(this._border.size=parseInt(T$s[0]),T$m++):this._border.size=1,this._border.type=T$s[T$m],this._ower._renderType|=256;}else this._border=null;}),T$u(0,T$s,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null;},function(T$L){T$L?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==T$L?null:T$I.create(T$L),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null;}),T$u(0,T$s,"position",function(){return 4&this._type?"absolute":"";},function(T$L){"absolute"==T$L?this._type|=4:this._type&=-5;}),T$u(0,T$s,"display",null,function(T$L){switch(T$L){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater();}}),T$u(0,T$s,"paddingLeft",function(){return this.padding[3];}),T$u(0,T$s,"paddingTop",function(){return this.padding[0];}),T$u(0,T$s,"_scale",null,function(T$L){this._ower.scale(T$L[0],T$L[1]);}),T$u(0,T$s,"_rotate",null,function(T$L){this._ower.rotation=T$L;}),T$E.parseOneCSS=function(T$L,T$s){for(var T$m,T$x=[],T$w=T$L.split(T$s),T$O=0,T$v=T$w.length;T$O<T$v;T$O++){var T$y=T$w[T$O],T$F=T$y.indexOf(":"),T$o=T$y.substr(0,T$F).replace(/^\s+|\s+$/g,"");if(0!=T$o.length){var T$V=T$y.substr(T$F+1).replace(/^\s+|\s+$/g,""),T$C=[T$o,T$V];switch(T$o){case"italic":case"bold":T$C[1]="true"==T$V;break;case"line-height":T$C[0]="lineHeight",T$C[1]=parseInt(T$V);break;case"font-size":T$C[0]="fontSize",T$C[1]=parseInt(T$V);break;case"padding":1<(T$m=T$V.split(" ")).length||(T$m[1]=T$m[2]=T$m[3]=T$m[0]),T$C[1]=[parseInt(T$m[0]),parseInt(T$m[1]),parseInt(T$m[2]),parseInt(T$m[3])];break;case"rotate":T$C[0]="_rotate",T$C[1]=parseFloat(T$V);break;case"scale":T$m=T$V.split(" "),T$C[0]="_scale",T$C[1]=[parseFloat(T$m[0]),parseFloat(T$m[1])];break;case"translate":T$m=T$V.split(" "),T$C[0]="_translate",T$C[1]=[parseInt(T$m[0]),parseInt(T$m[1])];break;default:(T$C[0]=T$E._CSSTOVALUE[T$o])||(T$C[0]=T$o);}T$x.push(T$C);}}return T$x;},T$E.parseCSS=function(T$L,T$s){for(var T$m;null!=(T$m=T$E._parseCSSRegExp.exec(T$L));)T$E.styleSheets[T$m[1]]=T$E.parseOneCSS(T$m[2],";");},T$E.EMPTY=new T$E(null),T$E._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},T$E._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),T$E._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},T$E._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},T$E.styleSheets={},T$E.ALIGN_CENTER=1,T$E.ALIGN_RIGHT=2,T$E.VALIGN_MIDDLE=1,T$E.VALIGN_BOTTOM=2,T$E._CSS_BLOCK=1,T$E._DISPLAY_NONE=2,T$E._ABSOLUTE=4,T$E._WIDTH_SET=8,T$E._PADDING=[0,0,0,0],T$E._RECT=[-1,-1,-1,-1],T$E._SPACING=[0,0],T$E._ALIGNS=[0,0,0],T$E.ADDLAYOUTED=512,T$E._NEWFONT=4096,T$E._HEIGHT_SET=8192,T$E._BACKGROUND_SET=16384,T$E._FLOAT_RIGHT=32768,T$E._LINE_ELEMENT=65536,T$E._NOWARP=131072,T$E._WIDTHAUTO=262144,T$E._LISTERRESZIE=524288,T$E;}(T$y),T$mL=function(T$L){function T$v(){this.url=null,this.audio=null,this.loaded=!1,T$v.__super.call(this);}T$V(T$v,"laya.media.h5audio.AudioSound",T$o);var T$s=T$v.prototype;return T$s.dispose=function(){var T$L=T$v._audioCache[this.url];T$L&&(T$L.src="",delete T$v._audioCache[this.url]);},T$s.load=function(T$L){var T$s;if(T$L=T$G.formatURL(T$L),(this.url=T$L)==T$i._tMusic?(T$v._initMusicAudio(),(T$s=T$v._musicAudio).src!=T$L&&(T$v._audioCache[T$s.src]=null,T$s=null)):T$s=T$v._audioCache[T$L],T$s&&2<=T$s.readyState)this.event("complete");else{T$s||(T$s=T$L==T$i._tMusic?(T$v._initMusicAudio(),T$v._musicAudio):T$Z.createElement("audio"),(T$v._audioCache[T$L]=T$s).src=T$L),T$s.addEventListener("canplaythrough",T$x),T$s.addEventListener("error",T$w);var T$m=this;(this.audio=T$s).load?T$s.load():T$w();}function T$x(){T$O(),T$m.loaded=!0,T$m.event("complete");}function T$w(){T$s.load=null,T$O(),T$m.event("error");}function T$O(){T$s.removeEventListener("canplaythrough",T$x),T$s.removeEventListener("error",T$w);}},T$s.play=function(T$L,T$s,T$m){if(void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=0),!this.url)return null;var T$x,T$w;if(!(T$x=this.url==T$i._tMusic?T$v._musicAudio:T$v._audioCache[this.url]))return null;T$w=T$q.getItem("audio:"+this.url),T$R.isConchApp?T$w||((T$w=T$Z.createElement("audio")).src=this.url):this.url==T$i._tMusic?(T$v._initMusicAudio(),(T$w=T$v._musicAudio).src=this.url):T$w=T$w||T$x.cloneNode(!0);var T$O=new T$EL(T$w);return T$O.url=this.url,T$O.loops=T$s,T$O.startTime=T$L,T$O.startHandler=T$m,T$O.play(!1),T$i.addChannel(T$O),T$O;},T$u(0,T$s,"duration",function(){var T$L;return(T$L=T$v._audioCache[this.url])?T$L.duration:0;}),T$v._initMusicAudio=function(){T$v._musicAudio||(T$v._musicAudio||(T$v._musicAudio=T$Z.createElement("audio")),T$R.isConchApp||T$Z.document.addEventListener("mousedown",T$v._makeMusicOK));},T$v._makeMusicOK=function(){T$Z.document.removeEventListener("mousedown",T$v._makeMusicOK),T$v._musicAudio.src?T$v._musicAudio.play():(T$v._musicAudio.src="",T$v._musicAudio.load());},T$v._audioCache={},T$v._musicAudio=null,T$v;}(),T$xL=function(T$L){function T$s(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,T$s.__super.call(this);}T$V(T$s,"laya.media.SoundChannel",T$o);var T$m=T$s.prototype;return T$m.play=function(){},T$m.stop=function(){},T$m.pause=function(){},T$m.resume=function(){},T$m.__runComplete=function(T$L){T$L&&T$L.run();},T$u(0,T$m,"volume",function(){return 1;},function(T$L){}),T$u(0,T$m,"position",function(){return 0;}),T$u(0,T$m,"duration",function(){return 0;}),T$s;}(),T$wL=function(T$L){function T$s(){T$s.__super.call(this);}T$V(T$s,"laya.media.Sound",T$o);var T$m=T$s.prototype;return T$m.load=function(T$L){},T$m.play=function(T$L,T$s,T$m){return void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=0),null;},T$m.dispose=function(){},T$u(0,T$m,"duration",function(){return 0;}),T$s;}(),T$OL=function(T$L){function T$w(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,T$w.__super.call(this);}T$V(T$w,"laya.media.webaudio.WebAudioSound",T$o);var T$s=T$w.prototype;return T$s.load=function(T$L){this.url=T$L,this.audioBuffer=T$w._dataCache[T$L],this.audioBuffer?this._loaded(this.audioBuffer):(T$w.e.on("loaded:"+T$L,this,this._loaded),T$w.e.on("err:"+T$L,this,this._err),T$w.__loadingSound[T$L]||(T$w.__loadingSound[T$L]=!0,T$a.loader.load(T$L,T$e.create(this,this.onloaded),null,T$yL.BUFFER,4,!1,null,!0)));},T$s.onloaded=function(T$L){T$L||this._err(),this._disposed?this._removeLoadEvents():(this.data=T$L,T$w.buffs.push({buffer:this.data,url:this.url}),T$w.decode());},T$s._err=function(){if(this._removeLoadEvents(),T$w.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var T$L,T$s,T$m,T$x=0;for(T$L=(T$s=this.__toPlays).length,T$x=0;T$x<T$L;T$x++)(T$m=T$s[T$x])[3]&&!T$m[3].isStopped&&T$m[3].event("error");this.__toPlays.length=0;}},T$s._loaded=function(T$L){this._removeLoadEvents(),this._disposed||(this.audioBuffer=T$L,this.loaded=!0,this.event("complete"));},T$s._removeLoadEvents=function(){T$w.e.off("loaded:"+this.url,this,this._loaded),T$w.e.off("err:"+this.url,this,this._err);},T$s.__playAfterLoaded=function(){if(this.__toPlays){var T$L,T$s,T$m,T$x=0;for(T$L=(T$s=this.__toPlays).length,T$x=0;T$x<T$L;T$x++)(T$m=T$s[T$x])[3]&&!T$m[3].isStopped&&this.play(T$m[0],T$m[1],T$m[2],T$m[3]);this.__toPlays.length=0;}},T$s.play=function(T$L,T$s,T$m,T$x){return void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=0),T$x=T$x||new T$rL(),this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([T$L,T$s,T$m,T$x]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),T$x.url=this.url,T$x.loops=T$s,T$x.audioBuffer=this.audioBuffer,T$x.startTime=T$L,T$x.startHandler=T$m,T$x.play(!1),T$i.addChannel(T$x),T$x;},T$s.dispose=function(){this._disposed=!0,delete T$w._dataCache[this.url],delete T$w.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[];},T$u(0,T$s,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0;}),T$w.decode=function(){if(!(T$w.buffs.length<=0||T$w.isDecoding))if(T$w.isDecoding=!0,(T$w.tInfo=T$w.buffs.shift())&&T$w.tInfo.buffer&&T$w.tInfo.buffer.byteLength)try{T$w.ctx.decodeAudioData(T$w.tInfo.buffer,T$w._done,T$w._fail);}catch(T$L){console.error("decodeAudioData error  byteLength:"+T$w.tInfo.buffer.byteLength+"  url:"+T$w.tInfo.url);}else T$w._fail();},T$w._done=function(T$L){T$w.e.event("loaded:"+T$w.tInfo.url,T$L),T$w._dataCache[T$w.tInfo.url]=T$L,T$w.isDecoding=!1,T$w.decode();},T$w._fail=function(){T$w.e.event("err:"+T$w.tInfo.url,null),T$w.isDecoding=!1,T$w.decode();},T$w._playEmptySound=function(){if(null!=T$w.ctx){if(T$w._emptySource&&(T$w._emptySource.stop(),T$w._emptySource.disconnect(0),!T$rL._tryCleanFailed))try{T$w._emptySource.buffer=null;}catch(T$L){T$rL._tryCleanFailed=!0;}var T$L=T$w.ctx.createBufferSource();T$L.buffer=T$w._miniBuffer,T$L.connect(T$w.ctx.destination),T$L.start(0,0,0),T$w._emptySource=T$L;}},T$w._unlock=function(){T$w._unlocked||(T$w._playEmptySound(),"running"==T$w.ctx.state?(T$Z.document.removeEventListener("mousedown",T$w._unlock,!0),T$Z.document.removeEventListener("touchend",T$w._unlock,!0),T$Z.document.removeEventListener("touchstart",T$w._unlock,!0),T$w._unlocked=!0):"suspended"==T$w.ctx.state&&T$i._recoverWebAudio());},T$w.initWebAudio=function(){"running"!=T$w.ctx.state&&(T$w._unlock(),T$Z.document.addEventListener("mousedown",T$w._unlock,!0),T$Z.document.addEventListener("touchend",T$w._unlock,!0),T$Z.document.addEventListener("touchstart",T$w._unlock,!0));},T$w._emptySource=null,T$w._dataCache={},T$w.buffs=[],T$w.isDecoding=!1,T$w._unlocked=!1,T$w.tInfo=null,T$w.__loadingSound={},T$F(T$w,["window",function(){return this.window=T$Z.window;},"webAudioEnabled",function(){return this.webAudioEnabled=T$w.window.AudioContext||T$w.window.webkitAudioContext||T$w.window.mozAudioContext;},"ctx",function(){return this.ctx=T$w.webAudioEnabled?new(T$w.window.AudioContext||T$w.window.webkitAudioContext||T$w.window.mozAudioContext)():void 0;},"_miniBuffer",function(){return this._miniBuffer=T$w.ctx.createBuffer(1,1,22050);},"e",function(){return this.e=new T$o();}]),T$w;}(),T$vL=function(T$L){function T$s(){this._responseType=null,this._data=null,T$s.__super.call(this),this._http=new T$Z.window.XMLHttpRequest();}T$V(T$s,"laya.net.HttpRequest",T$o);var T$m=T$s.prototype;return T$m.send=function(T$L,T$s,T$m,T$x,T$w){void 0===T$m&&(T$m="get"),void 0===T$x&&(T$x="text"),this._responseType=T$x,this._data=null;var T$O=this,T$v=this._http;if(T$v.open(T$m,T$L,!0),T$w)for(var T$y=0;T$y<T$w.length;T$y++)T$v.setRequestHeader(T$w[T$y++],T$w[T$y]);else T$R.isConchApp||(T$s&&"string"!=typeof T$s?T$v.setRequestHeader("Content-Type","application/json"):T$v.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));T$v.responseType="arraybuffer"!==T$x?"text":"arraybuffer",T$v.onerror=function(T$L){T$O._onError(T$L);},T$v.onabort=function(T$L){T$O._onAbort(T$L);},T$v.onprogress=function(T$L){T$O._onProgress(T$L);},T$v.onload=function(T$L){T$O._onLoad(T$L);},T$v.send(T$s);},T$m._onProgress=function(T$L){T$L&&T$L.lengthComputable&&this.event("progress",T$L.loaded/T$L.total);},T$m._onAbort=function(T$L){this.error("Request was aborted by user");},T$m._onError=function(T$L){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText);},T$m._onLoad=function(T$L){var T$s=this._http,T$m=void 0!==T$s.status?T$s.status:200;200===T$m||204===T$m||0===T$m?this.complete():this.error("["+T$s.status+"]"+T$s.statusText+":"+T$s.responseURL);},T$m.error=function(T$L){this.clear(),this.event("error",T$L);},T$m.complete=function(){this.clear();var T$s=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=T$B.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText;}catch(T$L){T$s=!1,this.error(T$L.message);}T$s&&this.event("complete",this._data instanceof Array?[this._data]:this._data);},T$m.clear=function(){var T$L=this._http;T$L.onerror=T$L.onabort=T$L.onprogress=T$L.onload=null;},T$u(0,T$m,"url",function(){return this._http.responseURL;}),T$u(0,T$m,"http",function(){return this._http;}),T$u(0,T$m,"data",function(){return this._data;}),T$s;}(),T$yL=function(T$L){function T$Q(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,T$Q.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1;}T$V(T$Q,"laya.net.Loader",T$o);var T$s=T$Q.prototype;return T$s.load=function(T$L,T$s,T$m,T$x,T$w){if(T$L&&""!=T$L||console.error("Loader 加载的url不合法 "+T$L),void 0===T$m&&(T$m=!0),void 0===T$w&&(T$w=!1),0===(this._url=T$L).indexOf("data:image")?this._type=T$s="image":this._type=T$s||(T$s=this.getTypeFromUrl(T$L)),this._cache=T$m,this._data=null,!T$w&&T$Q.loadedMap[T$L])return this._data=T$Q.loadedMap[T$L],this.event("progress",1),void this.event("complete",this._data);if(T$x&&T$Q.setGroup(T$L,T$x),null!=T$Q.parserMap[T$s])return this._customParse=!0,void(T$Q.parserMap[T$s]instanceof laya.utils.Handler?T$Q.parserMap[T$s].runWith(this):T$Q.parserMap[T$s].call(null,this));if("image"===T$s||"htmlimage"===T$s||"nativeimage"===T$s)return this._loadImage(T$L);if("ttf"===T$s)return this._loadTTF(T$L);switch(T$s){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:T$s;}T$Q.preLoadedMap[T$L]?this.onLoaded(T$Q.preLoadedMap[T$L]):T$v.resMgrLoad(T$L,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime);},T$s.getTypeFromUrl=function(T$L){var T$s=T$B.getFileExtension(T$L);return T$s?T$Q.typeMap[T$s]:(console.warn("Not recognize the resources suffix",T$L),"text");},T$s._loadTTF=function(T$L){T$L=T$G.formatURL(T$L);var T$s=new T$h();T$s.complete=T$e.create(this,this.onLoaded),T$s.load(T$L);},T$s._loadImage=function(T$L){T$v.imgMgrLoad(T$L,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime);},T$s._loadImageComplete=function(T$L,T$s,T$m){if(null!=T$m){if(T$m instanceof ArrayBuffer){var T$x=new DataView(T$m),T$w=new laya.webgl.resource.WebGLImage(new Uint8Array(T$m,8),T$L,0,!1,T$x.getUint32(0),T$x.getUint32(4));this.onLoaded(T$w);}else if(T$m instanceof T$VL)T$Q.imgMgrSet[T$L]=T$s,T$v.imgMgrLock(T$L,T$Q.imgMgrSet[T$L]),this._url=T$L,this.complete(T$m);else{var T$O=-1!=T$L.indexOf(".png",T$L.length-4)?6408:6407;T$w=new laya.webgl.resource.WebGLImage(T$m,T$L,T$O,!1,T$m.width,T$m.height);this.onLoaded(T$w);}}else this.event("error","Load image failed");},T$s.imageCancel=function(T$L,T$s,T$m){T$v.imgMgrCancel&&T$v.imgMgrCancel(T$L,this._onImageCallback);},T$s._loadSound=function(T$L){var T$s=new T$i._soundClass(),T$m=this;function T$x(){T$s.offAll();}T$s.on("complete",this,function(){T$x(),T$m.onLoaded(T$s);}),T$s.on("error",this,function(){T$x(),T$s.dispose(),T$m.event("error","Load sound failed");}),T$s.load(T$L);},T$s.onProgress=function(T$L){"atlas"===this._type?this.event("progress",.3*T$L):this.event("progress",T$L);},T$s.onError=function(T$L){this.event("error",T$L);},T$s._loadedComplete=function(T$L,T$s,T$m){if(null!=T$m)switch(this._type){case"atlas":case"plf":case"json":var T$x=new T$W(T$m);this.onLoaded(JSON.parse(T$x.readUTFBytes()));break;case"font":T$x=new T$W(T$m);this.onLoaded(T$B.parseXMLFromString(T$x.readUTFBytes()));break;default:this.onLoaded(T$m);}else this.event("error",T$L);},T$s.onLoaded=function(T$L){var T$s=this._type;if("plf"==T$s)this.parsePLFData(T$L),this.complete(T$L);else if("image"===T$s){var T$m=new T$VL(T$L);T$m.url=this._url,this.complete(T$m);}else if("sound"===T$s||"htmlimage"===T$s||"nativeimage"===T$s)this.complete(T$L);else if("atlas"===T$s){if(!T$L.src&&!T$L._setContext){if(!this._data){if((this._data=T$L).meta&&T$L.meta.image)for(var T$x=T$L.meta.image.split(","),T$w=0<=this._url.indexOf("/")?"/":"\\",T$O=this._url.lastIndexOf(T$w),T$v=0<=T$O?this._url.substr(0,T$O+1):"",T$y=0,T$F=T$x.length;T$y<T$F;T$y++)T$x[T$y]=T$v+T$x[T$y];else T$x=[this._url.replace(".json",".png")];T$x.reverse(),T$L.toLoads=T$x,T$L.pics=[];}return this.event("progress",.3+1/T$x.length*.6),this._loadImage(T$x.pop());}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(T$L),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var T$o=this._data.frames,T$V=this._url.split("?")[0],T$C=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:T$V.substring(0,T$V.lastIndexOf("."))+"/",T$E=this._data.pics,T$r=T$G.formatURL(this._url),T$u=T$Q.atlasMap[T$r]||(T$Q.atlasMap[T$r]=[]);T$u.dir=T$C;var T$T=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var T$j in T$T=parseFloat(this._data.meta.scale),T$o){var T$D,T$e=T$o[T$j],T$b=T$E[T$e.frame.idx?T$e.frame.idx:0],T$S=T$G.formatURL(T$C+T$j);T$b.scaleRate=T$T,T$D=T$VL.create(T$b,T$e.frame.x,T$e.frame.y,T$e.frame.w,T$e.frame.h,T$e.spriteSourceSize.x,T$e.spriteSourceSize.y,T$e.sourceSize.w,T$e.sourceSize.h),T$Q.cacheRes(T$S,T$D),T$Q.keepCache(this._url,T$C+T$j),T$D.url=T$S,T$u.push(T$S);}else for(T$j in T$o)T$b=T$E[(T$e=T$o[T$j]).frame.idx?T$e.frame.idx:0],T$S=T$G.formatURL(T$C+T$j),T$Q.cacheRes(T$S,T$VL.create(T$b,T$e.frame.x,T$e.frame.y,T$e.frame.w,T$e.frame.h,T$e.spriteSourceSize.x,T$e.spriteSourceSize.y,T$e.sourceSize.w,T$e.sourceSize.h)),T$Q.loadedMap[T$S].url=T$S,T$Q.keepCache(this._url,T$C+T$j),T$u.push(T$S);delete this._data.pics,this.complete(this._data);}else if("font"==T$s){if(!T$L.src)return this._data=T$L,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var T$H=new T$N();T$H.parseFont(this._data,T$L);var T$Y=this._url.split(".fnt")[0].split("/"),T$a=T$Y[T$Y.length-1];T$jL.registerBitmapFont(T$a,T$H),this._data=T$H,this.complete(this._data);}else if("pkm"==T$s){var T$f=T$YL.create(T$L,this._url),T$_=new T$VL(T$f);T$_.url=this._url,this.complete(T$_);}else this.complete(T$L);},T$s.parsePLFData=function(T$L){var T$s,T$m,T$x;for(T$s in T$L)switch(T$x=T$L[T$s],T$s){case"json":case"text":for(T$m in T$x)T$Q.preLoadedMap[T$G.formatURL(T$m)]=T$x[T$m];break;default:for(T$m in T$x)T$Q.preLoadedMap[T$G.formatURL(T$m)]=T$x[T$m];}},T$s.complete=function(T$L){this._data=T$L,this._customParse?this.event("loaded",T$L instanceof Array?[T$L]:T$L):(T$Q._loaders.push(this),T$Q._isWorking||T$Q.checkNext());},T$s.endLoad=function(T$L){T$L&&(this._data=T$L),this._cache&&T$Q.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data);},T$u(0,T$s,"url",function(){return this._url;}),T$u(0,T$s,"data",function(){return this._data;}),T$u(0,T$s,"cache",function(){return this._cache;}),T$u(0,T$s,"type",function(){return this._type;}),T$Q.checkNext=function(){T$Q._isWorking=!0;for(var T$L=T$Z.now();T$Q._startIndex<T$Q._loaders.length;)if(T$Z.now(),T$Q._loaders[T$Q._startIndex].endLoad(),T$Q._startIndex++,T$Z.now()-T$L>T$Q.maxTimeOut)return console.warn("loader callback cost a long time:"+(T$Z.now()-T$L)+" url="+T$Q._loaders[T$Q._startIndex-1].url),void T$a.timer.frameOnce(1,null,T$Q.checkNext);T$Q._loaders.length=0,T$Q._startIndex=0,T$Q._isWorking=!1;},T$Q.clearRes=function(T$L,T$s){if(null!=T$L){void 0===T$s&&(T$s=!1),T$L=T$G.formatURL(T$L);var T$m=T$Q.getAtlas(T$L);if(T$m){for(var T$x=0,T$w=T$m.length;T$x<T$w;T$x++){var T$O=T$m[T$x],T$v=T$Q.getRes(T$O);delete T$Q.loadedMap[T$O],T$Q.clearCache(T$L.substring(T$G.basePath.length),T$O.substring(T$G.basePath.length)),T$v&&T$v.destroy(T$s);}T$m.length=0,delete T$Q.atlasMap[T$L],delete T$Q.loadedMap[T$L];}else{var T$y=T$Q.loadedMap[T$L];T$y&&(delete T$Q.loadedMap[T$L],T$y instanceof laya.resource.Texture&&T$y.bitmap&&T$y.destroy(T$s));}}},T$Q.clearTextureRes=function(T$L){T$L=T$G.formatURL(T$L);var T$s=laya.net.Loader.getAtlas(T$L),T$m=T$s&&0<T$s.length?laya.net.Loader.getRes(T$s[0]):laya.net.Loader.getRes(T$L);T$m&&T$m.bitmap&&(T$R.isConchApp&&!T$R.isConchWebGL?T$m.bitmap.source.releaseTexture&&T$m.bitmap.source.releaseTexture():null==T$m.bitmap._atlaser&&T$m.bitmap.releaseResource(!0));},T$Q.getRes=function(T$L){return T$Q.loadedMap[T$G.formatURL(T$L)];},T$Q.getAtlas=function(T$L){return T$Q.atlasMap[T$G.formatURL(T$L)];},T$Q.cacheRes=function(T$L,T$s){T$L=T$G.formatURL(T$L),null!=T$Q.loadedMap[T$L]?console.warn("Resources already exist,is repeated loading:",T$L):T$Q.loadedMap[T$L]=T$s;},T$Q.setGroup=function(T$L,T$s){T$Q.groupMap[T$s]||(T$Q.groupMap[T$s]=[]),T$Q.groupMap[T$s].push(T$L);},T$Q.clearResByGroup=function(T$L){if(T$Q.groupMap[T$L]){var T$s=T$Q.groupMap[T$L],T$m=0,T$x=T$s.length;for(T$m=0;T$m<T$x;T$m++)T$Q.clearRes(T$s[T$m]);T$s.length=0;}},T$Q.keepCache=function(T$L,T$s){if(T$L&&T$s){var T$m=T$Q.cacheSet[T$s];T$m?-1==T$m.indexOf(T$L)&&T$m.push(T$L):T$Q.cacheSet[T$s]=[T$L];}},T$Q.clearCache=function(T$L,T$s){if(T$L&&T$s){var T$m=T$Q.cacheSet[T$s];if(T$m){var T$x=T$m.indexOf(T$L);if(-1!==T$x){var T$w=T$m.length-1;0==T$w?(delete T$Q.cacheSet[T$s],0<T$Q.imgMgrSet[T$s]?T$v.imgMgrFree(T$s,T$Q.imgMgrSet[T$s]):T$Q.clearRes(T$s,!0)):(T$m[T$x]=T$m[T$w],T$m.length=T$w);}}}},T$Q.saveObject=function(T$L,T$s,T$m){if(T$s&&T$L){var T$x=T$Q.objectSet[T$L];T$x?(console.warn("Loader.saveObject: "+T$L),T$x[0]=T$s,T$x[1]=T$m):T$Q.objectSet[T$L]=[T$s,T$m,[]];}},T$Q.findObject=function(T$L){if(T$L){var T$s=T$Q.objectSet[T$L];if(T$s)return T$s[0];}return null;},T$Q.keepObject=function(T$L,T$s){if(T$L&&T$s){var T$m=T$Q.objectSet[T$s];T$m&&-1===T$m[2].indexOf(T$L)&&T$m[2].push(T$L);}},T$Q.clearObject=function(T$L,T$s){if(T$L&&T$s){var T$m=T$Q.objectSet[T$s];if(T$m){var T$x=T$m[2],T$w=T$x.indexOf(T$L);if(-1!==T$w){var T$O=T$x.length-1;0==T$O?(delete T$Q.objectSet[T$s],T$m[1]&&T$m[1].call(null,T$m[0])):(T$x[T$w]=T$x[T$O],T$x.length=T$O);}}}},T$Q.TEXT="text",T$Q.JSON="json",T$Q.XML="xml",T$Q.BUFFER="arraybuffer",T$Q.IMAGE="image",T$Q.SOUND="sound",T$Q.ATLAS="atlas",T$Q.FONT="font",T$Q.TTF="ttf",T$Q.PLF="plf",T$Q.PKM="pkm",T$Q.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},T$Q.parserMap={},T$Q.groupMap={},T$Q.maxTimeOut=100,T$Q.loadedMap={},T$Q.preLoadedMap={},T$Q.atlasMap={},T$Q._loaders=[],T$Q._isWorking=!1,T$Q._startIndex=0,T$Q.imgCache={},T$Q.cacheSet={},T$Q.objectSet={},T$Q.imgMgrSet={},T$Q;}(),T$FL=function(T$L){var T$E;function T$r(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},T$r.__super.call(this);for(var T$L=0;T$L<this._maxPriority;T$L++)this._resInfos[T$L]=[];}T$V(T$r,"laya.net.LoaderManager",T$o);var T$s=T$r.prototype;return T$s.create=function(T$L,T$m,T$s,T$x,T$w,T$O,T$v,T$y){if(null==T$O&&(T$O=2),null==T$v&&(T$v=!0),T$L instanceof Array){var T$F=T$L,T$o=T$F.length,T$V=0;if(T$s)var T$C=T$e.create(T$s.caller,T$s.method,T$s.args,!1);for(var T$E=0;T$E<T$o;T$E++){var T$r=T$F[T$E];"string"==typeof T$r&&(T$r=T$F[T$E]={url:T$r}),T$r.progress=0;}for(T$E=0;T$E<T$o;T$E++){T$r=T$F[T$E];var T$u=T$s?T$e.create(null,T$D,[T$r],!1):null,T$T=T$s||T$m?T$e.create(null,T$j,[T$r]):null;this._create(T$r.url,T$T,T$u,T$r.clas||T$x,T$r.params||T$w,null!=T$r.priority&&0<=T$r.priority?T$r.priority:T$O,T$v,T$r.group||T$y);}function T$j(T$L,T$s){T$V++,T$L.progress=1,T$V===T$o&&T$m&&T$m.run();}function T$D(T$L,T$s){T$L.progress=T$s;for(var T$m=0,T$x=0;T$x<T$o;T$x++){T$m+=T$F[T$x].progress;}var T$w=T$m/T$o;T$C.runWith(T$w);}return!0;}return this._create(T$L,T$m,T$s,T$x,T$w,T$O,T$v,T$y);},T$s._create=function(T$s,T$m,T$L,T$x,T$w,T$O,T$v,T$y){T$s&&""!=T$s||console.error("加载的url不合法 "+T$s),null==T$O&&(T$O=2),null==T$v&&(T$v=!0);var T$F=T$G.formatURL(T$s),T$o=this.getRes(T$F);if(T$o)!T$o.hasOwnProperty("loaded")||T$o.loaded?(T$L&&T$L.runWith(1),T$m&&T$m.run()):T$m&&T$a.loader._createListener(T$s,T$m.caller,T$m.method,T$m.args,!0,!1);else{var T$V=T$B.getFileExtension(T$s),T$C=T$r.createMap[T$V];if(!T$C)throw new Error("LoaderManager:unknown file("+T$s+") extension with: "+T$V+".");T$x||(T$x=T$C[0]);var T$E=T$C[1];if("atlas"==T$V)this.load(T$s,T$m,T$L,T$E,T$O,T$v);else{T$x===T$VL&&(T$E="htmlimage"),(T$o=T$x?new T$x():null).hasOwnProperty("_loaded")&&(T$o._loaded=!1),T$o._setUrl(T$s),T$y&&T$o._setGroup(T$y),this._createLoad(T$o,T$s,T$e.create(null,function(T$L){T$o&&!T$o.destroyed&&T$L&&T$o.onAsynLoaded.call(T$o,T$s,T$L,T$w),T$m&&T$m.run();T$a.loader.event(T$s);}),T$L,T$E,T$O,!1,T$y,!0),T$v&&this.cacheRes(T$F,T$o);}}return T$o;},T$s.load=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){T$L&&""!=T$L||console.error("加载的url不合法 "+T$L);var T$F=this;if(null==T$w&&(T$w=2),null==T$O&&(T$O=!0),void 0===T$y&&(T$y=!1),T$L instanceof Array)return this._loadAssets(T$L,T$s,T$m,T$x,T$w,T$O,T$v);var T$o=T$yL.getRes(T$L);if(null!=T$o)T$a.timer.frameOnce(1,null,function(){T$m&&T$m.runWith(1),T$s&&T$s.runWith(T$o),T$F._loaderCount||T$F.event("complete");});else{var T$V=T$r._resMap[T$L];T$V?(T$s&&T$V._createListener("complete",T$s.caller,T$s.method,T$s.args,!1,!1),T$m&&T$V._createListener("progress",T$m.caller,T$m.method,T$m.args,!1,!1)):((T$V=this._infoPool.length?this._infoPool.pop():new T$E()).url=T$L,T$V.clas=null,T$V.type=T$x,T$V.cache=T$O,T$V.group=T$v,T$V.ignoreCache=T$y,T$V.priority=T$w,T$s&&T$V.on("complete",T$s.caller,T$s.method,T$s.args),T$m&&T$V.on("progress",T$m.caller,T$m.method,T$m.args),T$r._resMap[T$L]=T$V,T$w=T$w<this._maxPriority?0<=T$w?T$w:0:this._maxPriority-1,this._resInfos[T$w].push(T$V),this._next());}return this;},T$s.cancel=function(T$L,T$s,T$m){if(T$o=T$r._resMap[T$L]){T$s&&T$o.off("complete",T$s.caller,T$s.method,!1),T$m&&T$o.off("progress",T$m.caller,T$m.method,!1);var T$x=T$o.getListener("complete"),T$w=T$o.getListener("progress");if(!(T$x&&T$x.head||T$w&&T$w.head)){if(T$o.loader){var T$O=T$o.loader;T$O.imageCancel(T$L),T$O.offAll(),T$O._data=null,T$O._customParse=!1,T$O._url=null,T$O._class=null,T$O._type=null,this._loaders.push(T$O),this._loaderCount--,delete this._loaderMap[T$o.url];}for(var T$v=0;T$v<this._maxPriority;T$v++)for(var T$y=this._resInfos[T$v],T$F=T$y.length-1;-1<T$F;T$F--){var T$o;(T$o=T$y[T$F])&&T$o.url===T$L&&(T$y[T$F]=null,T$o.destroy(),T$o.offAll(),this._infoPool.push(T$o));}delete T$r._resMap[T$L],this._next();}}},T$s._createLoad=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F){var T$o=this;if(null==T$O&&(T$O=2),null==T$v&&(T$v=!0),void 0===T$F&&(T$F=!1),T$s instanceof Array)return this._loadAssets(T$s,T$m,T$x,T$w,T$O,T$v,T$y);var T$V=T$yL.getRes(T$s);if(null!=T$V)T$a.timer.frameOnce(1,null,function(){T$x&&T$x.runWith(1),T$m&&T$m.runWith(T$V),T$o._loaderCount||T$o.event("complete");});else{var T$C=T$r._resMap[T$s];T$C?(T$m&&T$C._createListener("complete",T$m.caller,T$m.method,T$m.args,!1,!1),T$x&&T$C._createListener("progress",T$x.caller,T$x.method,T$x.args,!1,!1)):((T$C=this._infoPool.length?this._infoPool.pop():new T$E()).url=T$s,T$C.clas=T$L,T$C.type=T$w,T$C.cache=T$v,T$C.group=T$y,T$C.ignoreCache=T$F,T$C.priority=T$O,T$m&&T$C.on("complete",T$m.caller,T$m.method,T$m.args),T$x&&T$C.on("progress",T$x.caller,T$x.method,T$x.args),T$r._resMap[T$s]=T$C,T$O=T$O<this._maxPriority?0<=T$O?T$O:0:this._maxPriority-1,this._resInfos[T$O].push(T$C),this._next());}return this;},T$s._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var T$L=0;T$L<this._maxPriority;T$L++)for(var T$s=this._resInfos[T$L];0<T$s.length;){var T$m=T$s.shift();if(T$m)return this._doLoad(T$m);}this._loaderCount||this.event("complete");}},T$s._doLoad=function(T$s){var T$m=this._loaders.length?this._loaders.pop():new T$yL();this._loaderCount++,(this._loaderMap[T$s.url]=T$m).on("complete",null,T$w),T$m.on("progress",null,function(T$L){T$s.event("progress",T$L);}),T$m.on("error",null,function(T$L){T$w(null);}),T$s.loader=T$m;var T$x=this;function T$w(T$L){T$m.offAll(),T$m._data=null,T$m._customParse=!1,T$m._url=null,T$m._class=null,T$m._type=null,T$x._loaders.push(T$m),T$x._loaderCount--,delete T$x._loaderMap[T$s.url],T$x._endLoad(T$s,T$L instanceof Array?[T$L]:T$L),T$x._next();}T$m._class=T$s.clas,1<=T$s.priority?(T$m.priority=T$s.priority,T$m.realTime=!1):(T$m.priority=0,T$m.realTime=!0),T$m.load(T$s.url,T$s.type,T$s.cache,T$s.group,T$s.ignoreCache);},T$s._endLoad=function(T$L,T$s){var T$m=T$L.url;if(null==T$s){var T$x=this._failRes[T$m]||0;if(T$x<this.retryNum)return console.warn("[warn]Retry to load:",T$m),this._failRes[T$m]=T$x+1,void T$a.timer.once(this.retryDelay,this,this._addReTry,[T$L],!1);console.warn("[error]Failed to load:",T$m),this.event("error",T$m);}this._failRes[T$m]&&(this._failRes[T$m]=0),delete T$r._resMap[T$m],T$L.event("complete",T$s),T$L.destroy(),T$L.offAll(),this._infoPool.push(T$L);},T$s._addReTry=function(T$L){this._resInfos[this._maxPriority-1].push(T$L),this._next();},T$s.clearRes=function(T$L,T$s){void 0===T$s&&(T$s=!1),T$yL.clearRes(T$L,T$s);},T$s.getRes=function(T$L){return T$yL.getRes(T$L);},T$s.cacheRes=function(T$L,T$s){T$yL.cacheRes(T$L,T$s);},T$s.clearTextureRes=function(T$L){T$yL.clearTextureRes(T$L);},T$s.setGroup=function(T$L,T$s){T$yL.setGroup(T$L,T$s);},T$s.clearResByGroup=function(T$L){T$yL.clearResByGroup(T$L);},T$s.clearUnLoaded=function(){for(var T$L=0;T$L<this._maxPriority;T$L++){for(var T$s=this._resInfos[T$L],T$m=T$s.length-1;-1<T$m;T$m--){var T$x=T$s[T$m];T$x&&(T$x.destroy(),T$x.offAll(),this._infoPool.push(T$x));}T$s.length=0;}this._loaderCount=0,T$r._resMap={};},T$s.cancelLoadByUrls=function(T$L){if(T$L)for(var T$s=0,T$m=T$L.length;T$s<T$m;T$s++)this.cancelLoadByUrl(T$L[T$s]);},T$s.cancelLoadByUrl=function(T$L){for(var T$s=0;T$s<this._maxPriority;T$s++)for(var T$m=this._resInfos[T$s],T$x=T$m.length-1;-1<T$x;T$x--){var T$w=T$m[T$x];T$w&&T$w.url===T$L&&(T$m[T$x]=null,T$w.destroy(),T$w.offAll(),this._infoPool.push(T$w));}T$r._resMap[T$L]&&delete T$r._resMap[T$L];},T$s._loadAssets=function(T$L,T$m,T$v,T$s,T$x,T$w,T$O){null==T$x&&(T$x=2),null==T$w&&(T$w=!0);for(var T$y=T$L.length,T$F=0,T$o=0,T$V=[],T$C=!0,T$E=0;T$E<T$y;T$E++){var T$r=T$L[T$E];if(!T$r)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+T$L);"string"==typeof T$r&&(T$r={url:T$r,type:T$s,size:1,priority:T$x}),T$r.size||(T$r.size=1),T$r.progress=0,T$o+=T$r.size,T$V.push(T$r);var T$u=T$v?T$e.create(null,T$D,[T$r],!1):null,T$T=T$m||T$v?T$e.create(null,T$j,[T$r]):null;this.load(T$r.url,T$T,T$u,T$r.type,null!=T$r.priority&&0<=T$r.priority?T$r.priority:2,T$w,T$r.group||T$O);}function T$j(T$L,T$s){T$F++,T$L.progress=1,T$s||(T$C=!1),T$F===T$y&&T$m&&T$m.runWith(T$C);}function T$D(T$L,T$s){if(null!=T$v){T$L.progress=T$s;for(var T$m=0,T$x=0;T$x<T$V.length;T$x++){var T$w=T$V[T$x];T$m+=T$w.size*T$w.progress;}var T$O=T$m/T$o;T$v.runWith(T$O);}}return this;},T$r.cacheRes=function(T$L,T$s){T$yL.cacheRes(T$L,T$s);},T$r._resMap={},T$F(T$r,["createMap",function(){return this.createMap={atlas:[null,"atlas"]};}]),T$r.__init$=function(){T$E=function(T$L){function T$s(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,T$s.__super.call(this);}return T$V(T$s,"",T$o),T$s.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1;},T$s;}();},T$r;}(),T$oL=(function(T$L){function T$w(T$L){T$w.__super.call(this),T$L||(T$L=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var T$s=0,T$m=0,T$x=0;T$x<20;T$x++)T$x%5!=4?this._mat[T$s++]=T$L[T$x]:this._alpha[T$m++]=T$L[T$x];this._action=T$U.createFilterAction(32),this._action.data=this;}T$V(T$w,"laya.filters.ColorFilter",T$D);var T$s=T$w.prototype;T$a.imps(T$s,{"laya.filters.IFilter":!0}),T$s.callNative=function(T$L){T$L._$P.cf=this;T$L.conchModel&&T$L.conchModel.setFilterMatrix&&T$L.conchModel.setFilterMatrix(this._mat,this._alpha);},T$u(0,T$s,"type",function(){return 32;}),T$u(0,T$s,"action",function(){return this._action;});}(),function(T$L){function T$x(T$L,T$s,T$m){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===T$s&&(T$s=0),T$x.__super.call(this),this._byteClass=T$m||T$W,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,T$L&&0<T$s&&T$s<65535&&this.connect(T$L,T$s);}T$V(T$x,"laya.net.Socket",T$o);var T$s=T$x.prototype;T$s.connect=function(T$L,T$s){var T$m="ws://"+T$L+":"+T$s;T$m="https:"==T$Z.window.location.protocol?"wss://"+T$L+":"+T$s:"ws://"+T$L+":"+T$s,this.connectByUrl(T$m);},T$s.connectByUrl=function(T$L){var T$s=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new T$Z.window.WebSocket(T$L,this.protocols):this._socket=new T$Z.window.WebSocket(T$L),this._socket.binaryType="arraybuffer",this._output=new this._byteClass(),this._output.endian=this.endian,this._input=new this._byteClass(),this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(T$L){T$s._onOpen(T$L);},this._socket.onmessage=function(T$L){T$s._onMessage(T$L);},this._socket.onclose=function(T$L){T$s._onClose(T$L);},this._socket.onerror=function(T$L){T$s._onError(T$L);};},T$s.cleanSocket=function(){try{this._socket.close();}catch(T$L){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null;},T$s.close=function(){if(null!=this._socket)try{this._socket.close();}catch(T$L){}},T$s._onOpen=function(T$L){this._connected=!0,this.event("open",T$L);},T$s._onMessage=function(T$L){if(T$L&&T$L.data){var T$s=T$L.data;if(this.disableInput&&T$s)this.event("message",T$s);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var T$m=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,T$s&&("string"==typeof T$s?this._input.writeUTFBytes(T$s):this._input.writeArrayBuffer(T$s),this._addInputPosition=this._input.pos,this._input.pos=T$m),this.event("message",T$s);}}},T$s._onClose=function(T$L){this._connected=!1,this.event("close",T$L);},T$s._onError=function(T$L){this.event("error",T$L);},T$s.send=function(T$L){this._socket.send(T$L);},T$s.flush=function(){if(this._output&&0<this._output.length){var T$s;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length));}catch(T$L){T$s=T$L;}this._output.endian=this.endian,this._output.clear(),T$s&&this.event("error",T$s);}},T$u(0,T$s,"input",function(){return this._input;}),T$u(0,T$s,"output",function(){return this._output;}),T$u(0,T$s,"connected",function(){return this._connected;}),T$u(0,T$s,"endian",function(){return this._endian;},function(T$L){this._endian=T$L,null!=this._input&&(this._input.endian=T$L),null!=this._output&&(this._output.endian=T$L);}),T$x.LITTLE_ENDIAN="littleEndian",T$x.BIG_ENDIAN="bigEndian";}(),function(T$L){function T$y(){T$y.__super.call(this),this._$1__id=++T$y._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(T$y._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,T$p.currentResourceManager&&T$p.currentResourceManager.addResource(this);}T$V(T$y,"laya.resource.Resource",T$o);var T$s=T$y.prototype;return T$a.imps(T$s,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),T$s._setUrl=function(T$L){var T$s;this._url!==T$L&&(this._url&&((T$s=T$y._urlResourcesMap[this._url]).splice(T$s.indexOf(this),1),0===T$s.length&&delete T$y._urlResourcesMap[this._url]),T$L&&((T$s=T$y._urlResourcesMap[T$L])||(T$y._urlResourcesMap[T$L]=T$s=[]),T$s.push(this)),this._url=T$L);},T$s._getGroup=function(){return this._group;},T$s._setGroup=function(T$L){var T$s;this._group!==T$L&&(this._group&&((T$s=T$y._groupResourcesMap[this._group]).splice(T$s.indexOf(this),1),0===T$s.length&&delete T$y._groupResourcesMap[this._group]),T$L&&((T$s=T$y._groupResourcesMap[T$L])||(T$y._groupResourcesMap[T$L]=T$s=[]),T$s.push(this)),this._group=T$L);},T$s._addReference=function(){this._referenceCount++;},T$s._removeReference=function(){this._referenceCount--;},T$s._clearReference=function(){this._referenceCount=0;},T$s._endLoaded=function(){this.__loaded=!0,this.event("loaded",this);},T$s.recreateResource=function(){this.completeCreate();},T$s.disposeResource=function(){},T$s.activeResource=function(T$L){void 0===T$L&&(T$L=!1),this._lastUseFrameCount=T$K.loopCount,!this._destroyed&&this.__loaded&&(this._released||T$L)&&this.recreateResource();},T$s.releaseResource=function(T$L){return void 0===T$L&&(T$L=!0),!(!T$L&&this.lock)&&!(this._released&&!T$L)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0);},T$s.onAsynLoaded=function(T$L,T$s,T$m){throw new Error("Resource: must override this function!");},T$s.destroy=function(){var T$L;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete T$y._idResourcesMap[this.id],this._url&&((T$L=T$y._urlResourcesMap[this._url])&&(T$L.splice(T$L.indexOf(this),1),0===T$L.length&&delete T$y._urlResourcesMap[this.url]),T$yL.clearRes(this._url),this.__loaded||T$U.cancelLoadByUrl(this._url)),this._group&&((T$L=T$y._groupResourcesMap[this._group]).splice(T$L.indexOf(this),1),0===T$L.length&&delete T$y._groupResourcesMap[this.url]));},T$s.completeCreate=function(){this._released=!1,this.event("recovered",this);},T$s.dispose=function(){this.destroy();},T$u(0,T$s,"memorySize",function(){return this._memorySize;},function(T$L){var T$s=T$L-this._memorySize;this._memorySize=T$L,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,T$s),this.resourceManager&&this.resourceManager.addSize(T$s);}),T$u(0,T$s,"_loaded",null,function(T$L){this.__loaded=T$L;}),T$u(0,T$s,"loaded",function(){return this.__loaded;}),T$u(0,T$s,"id",function(){return this._$1__id;}),T$u(0,T$s,"destroyed",function(){return this._destroyed;}),T$u(0,T$s,"group",function(){return this._getGroup();},function(T$L){this._setGroup(T$L);}),T$u(0,T$s,"resourceManager",function(){return this._resourceManager;}),T$u(0,T$s,"url",function(){return this._url;}),T$u(0,T$s,"released",function(){return this._released;}),T$u(0,T$s,"referenceCount",function(){return this._referenceCount;}),T$y.getResourceByID=function(T$L){return T$y._idResourcesMap[T$L];},T$y.getResourceByURL=function(T$L,T$s){return void 0===T$s&&(T$s=0),null==T$y._urlResourcesMap[T$L]?null:T$y._urlResourcesMap[T$L][T$s];},T$y.getResourceCountByURL=function(T$L){return T$y._urlResourcesMap[T$L].length;},T$y.destroyUnusedResources=function(T$L){var T$s;if(T$L){var T$m=T$y._groupResourcesMap[T$L];if(T$m)for(var T$x=T$m.slice(),T$w=0,T$O=T$x.length;T$w<T$O;T$w++)(T$s=T$x[T$w]).lock||0!==T$s._referenceCount||T$s.destroy();}else for(var T$v in T$y._idResourcesMap)(T$s=T$y._idResourcesMap[T$v]).lock||0!==T$s._referenceCount||T$s.destroy();},T$y._uniqueIDCounter=0,T$y._idResourcesMap={},T$y._urlResourcesMap={},T$y._groupResourcesMap={},T$y;}()),T$VL=function(T$L){function T$Q(T$L,T$s){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,T$Q.__super.call(this),T$L&&null!=T$L._addReference&&T$L._addReference(),this.setTo(T$L,T$s);}T$V(T$Q,"laya.resource.Texture",T$o);var T$s=T$Q.prototype;return T$s._setUrl=function(T$L){this.url=T$L;},T$s.setTo=function(T$L,T$s){if(T$L instanceof T$v.HTMLElement){var T$m=T$bL.create("2D",T$L);this.bitmap=T$m;}else this.bitmap=T$L;if(this.uv=T$s||T$Q.DEF_UV,T$L){this._w=T$L.width,this._h=T$L.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var T$x=this;if(this._loaded)T$U.addToAtlas&&T$U.addToAtlas(T$x);else{var T$w=T$L;T$w instanceof laya.resource.HTMLImage&&T$w.image&&T$w.image.addEventListener("load",function(T$L){T$U.addToAtlas&&T$U.addToAtlas(T$x);},!1);}}},T$s.active=function(){this.bitmap&&this.bitmap.activeResource();},T$s.destroy=function(T$L){if(void 0===T$L&&(T$L=!1),this.alphaTexture&&(this.alphaTexture.destroy(T$L),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var T$s=this.bitmap;T$L?(T$R.isConchApp&&T$s.source&&T$s.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,T$s.dispose(),T$s._clearReference()):(T$s._removeReference(),0==T$s.referenceCount&&(T$R.isConchApp&&T$s.source&&T$s.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,T$s.dispose())),this.url&&this===T$a.loader.getRes(this.url)&&T$a.loader.clearRes(this.url,T$L),this._loaded=!1;}},T$s.load=function(T$L){var T$s=this;this._loaded=!1,T$L=T$G.customFormat(T$L);var T$m=this.bitmap||(this.bitmap=T$YL.create(T$L));T$m.uri=T$L,T$m&&T$m._addReference();var T$x=this;T$m.onload=function(){T$m.onload=null,T$x._loaded=!0,T$s.sourceWidth=T$s._w=T$m.width,T$s.sourceHeight=T$s._h=T$m.height,T$x.event("loaded",this),T$U.addToAtlas&&T$U.addToAtlas(T$x);};},T$s.addTextureToAtlas=function(T$L){T$U.addTextureToAtlas(this);},T$s.getPixels=function(T$L,T$s,T$m,T$x){if(T$R.isConchApp){var T$w=this.bitmap;if(T$w.source&&T$w.source.getImageData){var T$O=T$w.source.getImageData(T$L,T$s,T$m,T$x),T$v=new Uint8Array(T$O);return Array.from(T$v);}return null;}return T$R.isWebGL?T$U.getTexturePixels(this,T$L,T$s,T$m,T$x):(T$Z.canvas.size(T$m,T$x),T$Z.canvas.clear(),T$Z.context.drawTexture(this,-T$L,-T$s,this.width,this.height,0,0),T$Z.context.getImageData(0,0,T$m,T$x).data);},T$s.onAsynLoaded=function(T$L,T$s){if(T$s){if("function"!=typeof T$s._addReference)throw new Error("bitmap._addReference is not a function. "+T$s.className+" "+typeof T$s._addReference+" "+T$s.constructor);T$s._addReference();}this.setTo(T$s,this.uv),this._loaded&&this.event("loaded",this);},T$u(0,T$s,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null;}),T$u(0,T$s,"loaded",function(){return this._loaded;}),T$u(0,T$s,"released",function(){return!this.bitmap||this.bitmap.released;}),T$u(0,T$s,"width",function(){return this._w?this._w:this.uv&&this.uv!==T$Q.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width;},function(T$L){this._w=T$L,this.sourceWidth||(this.sourceWidth=T$L);}),T$u(0,T$s,"repeat",function(){return!T$R.isWebGL||!this.bitmap||this.bitmap.repeat;},function(T$L){T$L&&T$R.isWebGL&&this.bitmap&&(this.bitmap.repeat=T$L)&&(this.bitmap.enableMerageInAtlas=!1);}),T$u(0,T$s,"height",function(){return this._h?this._h:this.uv&&this.uv!==T$Q.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height;},function(T$L){this._h=T$L,this.sourceHeight||(this.sourceHeight=T$L);}),T$u(0,T$s,"isLinearSampling",function(){return!T$R.isWebGL||9728!=this.bitmap.minFifter;},function(T$L){!T$L&&T$R.isWebGL&&(T$L||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1));}),T$Q.moveUV=function(T$L,T$s,T$m){for(var T$x=0;T$x<8;T$x+=2)T$m[T$x]+=T$L,T$m[T$x+1]+=T$s;return T$m;},T$Q.create=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F){void 0===T$O&&(T$O=0),void 0===T$v&&(T$v=0),void 0===T$y&&(T$y=0),void 0===T$F&&(T$F=0);var T$o=T$L instanceof laya.resource.Texture,T$V=T$o?T$L.uv:T$Q.DEF_UV,T$C=T$o?T$L.bitmap:T$L,T$E=T$U.isAtlas(T$C);if(T$E){var T$r=T$C._atlaser,T$u=T$L._atlasID;if(-1==T$u)throw new Error("create texture error");T$C=T$r._inAtlasTextureBitmapValue[T$u],T$V=T$r._inAtlasTextureOriUVValue[T$u];}var T$T=new T$Q(T$C,null);T$C.width&&T$s+T$x>T$C.width&&(T$x=T$C.width-T$s),T$C.height&&T$m+T$w>T$C.height&&(T$w=T$C.height-T$m),T$T.width=T$x,T$T.height=T$w,T$T.offsetX=T$O,T$T.offsetY=T$v,T$T.sourceWidth=T$y||T$x,T$T.sourceHeight=T$F||T$w;var T$j=1/T$C.width,T$D=1/T$C.height;T$s*=T$j,T$m*=T$D,T$x*=T$j,T$w*=T$D;var T$e=T$T.uv[0],T$b=T$T.uv[1],T$S=T$T.uv[4],T$H=T$T.uv[5],T$Y=T$S-T$e,T$a=T$H-T$b,T$f=T$Q.moveUV(T$V[0],T$V[1],[T$s,T$m,T$s+T$x,T$m,T$s+T$x,T$m+T$w,T$s,T$m+T$w]);T$T.uv=[T$e+T$f[0]*T$Y,T$b+T$f[1]*T$a,T$S-(1-T$f[2])*T$Y,T$b+T$f[3]*T$a,T$S-(1-T$f[4])*T$Y,T$H-(1-T$f[5])*T$a,T$e+T$f[6]*T$Y,T$H-(1-T$f[7])*T$a],T$E&&T$T.addTextureToAtlas();var T$_=T$C.scaleRate;return T$_&&1!=T$_?(T$T.sourceWidth/=T$_,T$T.sourceHeight/=T$_,T$T.width/=T$_,T$T.height/=T$_,T$T.scaleRate=T$_,T$T.offsetX/=T$_,T$T.offsetY/=T$_):T$T.scaleRate=1,T$T;},T$Q.createFromTexture=function(T$L,T$s,T$m,T$x,T$w){var T$O=T$L.scaleRate;1!=T$O&&(T$s*=T$O,T$m*=T$O,T$x*=T$O,T$w*=T$O);var T$v=T$_.TEMP.setTo(T$s-T$L.offsetX,T$m-T$L.offsetY,T$x,T$w),T$y=T$v.intersection(T$Q._rect1.setTo(0,0,T$L.width,T$L.height),T$Q._rect2);if(!T$y)return null;var T$F=T$Q.create(T$L,T$y.x,T$y.y,T$y.width,T$y.height,T$y.x-T$v.x,T$y.y-T$v.y,T$x,T$w);if(T$F.bitmap&&T$F.bitmap._removeReference)return T$F.bitmap._removeReference(),T$F;var T$o="bitmap:"+(T$F.bitmap?T$F.bitmap.constructor?T$F.bitmap.constructor.name:T$F.bitmap.__className:"")+", url:"+(T$L.url+" | "+(T$F.bitmap?T$F.bitmap.url:T$L.url))+", x="+T$s+",y="+T$m+",width="+T$x+",height="+T$w+", result="+(T$y?T$y.x+","+T$y.y+","+T$y.width+","+T$y.height:"null")+", rect="+T$v.x+","+T$v.y+","+T$v.width+","+T$v.height;throw new Error("报错：bitmap._removeReference is not a function  "+T$o);},T$Q.DEF_UV=[0,0,1,0,1,1,0,1],T$Q.INV_UV=[0,1,1,1,1,0,0,0],T$Q._rect1=new T$_(),T$Q._rect2=new T$_(),T$Q;}(),T$L=function(T$L){var T$y;function T$O(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,T$O.__super.call(this);}T$V(T$O,"laya.utils.TimeLine",T$o);var T$s=T$O.prototype;return T$s.to=function(T$L,T$s,T$m,T$x,T$w){return void 0===T$w&&(T$w=0),this._create(T$L,T$s,T$m,T$x,T$w,!0);},T$s.from=function(T$L,T$s,T$m,T$x,T$w){return void 0===T$w&&(T$w=0),this._create(T$L,T$s,T$m,T$x,T$w,!1);},T$s._create=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v=T$q.getItemByClass("tweenData",T$y);return T$v.isTo=T$O,T$v.type=0,T$v.target=T$L,T$v.duration=T$m,T$v.data=T$s,T$v.startTime=this._startTime+T$w,T$v.endTime=T$v.startTime+T$v.duration,T$v.ease=T$x,this._startTime=Math.max(T$v.endTime,this._startTime),this._tweenDataList.push(T$v),this._startTimeSort=!0,this._endTimeSort=!0,this;},T$s.addLabel=function(T$L,T$s){var T$m=T$q.getItemByClass("tweenData",T$y);return T$m.type=1,T$m.data=T$L,T$m.endTime=T$m.startTime=this._startTime+T$s,this._labelDic||(this._labelDic={}),this._labelDic[T$L]=T$m,this._tweenDataList.push(T$m),this;},T$s.removeLabel=function(T$L){if(this._labelDic&&this._labelDic[T$L]){var T$s=this._labelDic[T$L];if(T$s){var T$m=this._tweenDataList.indexOf(T$s);-1<T$m&&this._tweenDataList.splice(T$m,1);}delete this._labelDic[T$L];}},T$s.gotoTime=function(T$L){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var T$s,T$m,T$x,T$w;for(var T$O in this._firstTweenDic)if(T$m=this._firstTweenDic[T$O])for(var T$v in T$m)T$m.diyTarget.hasOwnProperty(T$v)&&(T$m.diyTarget[T$v]=T$m[T$v]);for(T$O in this._tweenDic)(T$s=this._tweenDic[T$O]).clear(),delete this._tweenDic[T$O];if(this._index=0,this._gidIndex=0,this._currTime=T$L,this._lastTime=T$Z.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=T$x=this._tweenDataList.concat(),T$x.sort(function(T$L,T$s){return T$L.endTime>T$s.endTime?1:T$L.endTime<T$s.endTime?-1:0;});}else T$x=this._endTweenDataList;for(var T$y=0,T$F=T$x.length;T$y<T$F;T$y++)if(0==(T$w=T$x[T$y]).type){if(!(T$L>=T$w.endTime))break;this._index=Math.max(this._index,T$y+1);var T$o=T$w.data;if(T$w.isTo)for(var T$V in T$o)T$w.target[T$V]=T$o[T$V];}for(T$y=0,T$F=this._tweenDataList.length;T$y<T$F;T$y++)0==(T$w=this._tweenDataList[T$y]).type&&T$L>=T$w.startTime&&T$L<T$w.endTime&&(this._index=Math.max(this._index,T$y+1),this._gidIndex++,(T$s=T$q.getItemByClass("tween",T$k))._create(T$w.target,T$w.data,T$w.duration,T$w.ease,T$e.create(this,this._animComplete,[this._gidIndex]),0,!1,T$w.isTo,!0,!1),T$s.setStartTime(this._currTime-(T$L-T$w.startTime)),T$s._updateEase(this._currTime),T$s.gid=this._gidIndex,this._tweenDic[this._gidIndex]=T$s);}},T$s.gotoLabel=function(T$L){if(null!=this._labelDic){var T$s=this._labelDic[T$L];T$s&&this.gotoTime(T$s.startTime);}},T$s.pause=function(){T$a.timer.clear(this,this._update);},T$s.resume=function(){this.play(this._currTime,this._loopKey);},T$s.play=function(T$L,T$s){if(void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(T$L,T$s){return T$L.startTime>T$s.startTime?1:T$L.startTime<T$s.startTime?-1:0;});for(var T$m=0,T$x=this._tweenDataList.length;T$m<T$x;T$m++){var T$w=this._tweenDataList[T$m];if(null!=T$w&&0==T$w.type){var T$O=T$w.target,T$v=T$O.$_GID||(T$O.$_GID=T$B.getGID()),T$y=null;for(var T$F in null==this._firstTweenDic[T$v]?((T$y={}).diyTarget=T$O,this._firstTweenDic[T$v]=T$y):T$y=this._firstTweenDic[T$v],T$w.data)null==T$y[T$F]&&(T$y[T$F]=T$O[T$F]);}}}"string"==typeof T$L?this.gotoLabel(T$L):this.gotoTime(T$L),this._loopKey=T$s,this._lastTime=T$Z.now(),T$a.timer.frameLoop(1,this,this._update);}},T$s._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var T$L in this._tweenDic)(T$s=this._tweenDic[T$L]).complete();return this._complete(),void this.pause();}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0);}var T$s,T$m=T$Z.now(),T$x=T$m-this._lastTime,T$w=this._currTime+=T$x*this.scale;for(T$L in this._lastTime=T$m,this._tweenDic)(T$s=this._tweenDic[T$L])._updateEase(T$w);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var T$O=this._tweenDataList[this._index];T$w>=T$O.startTime&&(this._index++,0==T$O.type?(this._gidIndex++,(T$s=T$q.getItemByClass("tween",T$k))._create(T$O.target,T$O.data,T$O.duration,T$O.ease,T$e.create(this,this._animComplete,[this._gidIndex]),0,!1,T$O.isTo,!0,!1),T$s.setStartTime(T$w),T$s.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=T$s)._updateEase(T$w)):this.event("label",T$O.data));}},T$s._animComplete=function(T$L){this._tweenDic[T$L]&&delete this._tweenDic[T$L];},T$s._complete=function(){this.event("complete");},T$s.reset=function(){var T$L;if(this._labelDic)for(T$L in this._labelDic)delete this._labelDic[T$L];for(T$L in this._tweenDic)this._tweenDic[T$L].clear(),delete this._tweenDic[T$L];for(T$L in this._firstTweenDic)delete this._firstTweenDic[T$L];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var T$s,T$m=0;for(T$s=this._tweenDataList.length,T$m=0;T$m<T$s;T$m++)this._tweenDataList[T$m]&&this._tweenDataList[T$m].destroy();}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,T$a.timer.clear(this,this._update);},T$s.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null;},T$u(0,T$s,"index",function(){return this._frameIndex;},function(T$L){this._frameIndex=T$L,this.gotoTime(this._frameIndex/this._frameRate*1e3);}),T$u(0,T$s,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total;}),T$O.to=function(T$L,T$s,T$m,T$x,T$w){return void 0===T$w&&(T$w=0),new T$O().to(T$L,T$s,T$m,T$x,T$w);},T$O.from=function(T$L,T$s,T$m,T$x,T$w){return void 0===T$w&&(T$w=0),new T$O().from(T$L,T$s,T$m,T$x,T$w);},T$O.__init$=function(){T$y=function(){function T$L(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null;}return T$V(T$L,""),T$L.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,T$q.recover("tweenData",this);},T$L;}();},T$O;}(),T$CL=function(T$w){function T$m(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,T$m.__super.call(this),this._style=T$y.EMPTY;}T$V(T$m,"laya.display.Sprite",T$w);var T$L=T$m.prototype;return T$a.imps(T$L,{"laya.display.ILayout":!0}),T$L.createConchModel=function(){return new ConchNode();},T$L.destroy=function(T$L){if(void 0===T$L&&(T$L=!0),this._releaseMem(),!this._destroyed){this.filters=null;var T$s=this.mask;T$s&&(this.mask=null,T$s.destroy(T$L));}T$w.prototype.destroy.call(this,T$L),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null;},T$L.updateZOrder=function(){T$B.updateOrder(this._childs)&&this.repaint();},T$L.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1;},T$L.setBounds=function(T$L){this._set$P("uBounds",T$L);},T$L.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new T$_()),T$_._getWrapRec(this._boundPointsToParent(),this._$P.mBounds);},T$L.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new T$_()),T$_._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds));},T$L._boundPointsToParent=function(T$L){void 0===T$L&&(T$L=!1);var T$s=0,T$m=0;this._style&&(T$s=this._style._tf.translateX,T$m=this._style._tf.translateY,T$L=T$L||0!==this._style._tf.rotate,this._style.scrollRect&&(T$s+=this._style.scrollRect.x,T$m+=this._style.scrollRect.y));var T$x=this._getBoundPointsM(T$L);if(!T$x||T$x.length<1)return T$x;if(8!=T$x.length&&(T$x=T$L?T$H.scanPList(T$x):T$_._getWrapRec(T$x,T$_.TEMP)._getBoundPoints()),!this.transform)return T$B.transPointList(T$x,this._x-T$s,this._y-T$m),T$x;var T$w=T$f.TEMP,T$O=0,T$v=T$x.length;for(T$O=0;T$O<T$v;T$O+=2)T$w.x=T$x[T$O],T$w.y=T$x[T$O+1],this.toParentPoint(T$w),T$x[T$O]=T$w.x,T$x[T$O+1]=T$w.y;return T$x;},T$L.getGraphicBounds=function(T$L){return void 0===T$L&&(T$L=!1),this._graphics?this._graphics.getBounds(T$L):T$_.TEMP.setTo(0,0,0,0);},T$L._getBoundPointsM=function(T$L){if(void 0===T$L&&(T$L=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var T$s=T$B.clearArray(this._$P.temBM),T$m=T$_.TEMP;return T$m.copyFrom(this.scrollRect),T$B.concatArray(T$s,T$m._getBoundPoints()),T$s;}for(var T$x,T$w,T$O,T$v=this._graphics?this._graphics.getBoundPoints():T$B.clearArray(this._$P.temBM),T$y=0,T$F=(T$O=this._childs).length;T$y<T$F;T$y++)(T$x=T$O[T$y])instanceof laya.display.Sprite&&1==T$x.visible&&(T$w=T$x._boundPointsToParent(T$L))&&(T$v=T$v?T$B.concatArray(T$v,T$w):T$w);return T$v;},T$L.getStyle=function(){return this._style===T$y.EMPTY&&(this._style=new T$y()),this._style;},T$L.setStyle=function(T$L){this._style=T$L;},T$L._adjustTransform=function(){this._tfChanged=!1;var T$L,T$s=this._style._tf,T$m=T$s.scaleX,T$x=T$s.scaleY;if(T$s.rotate||1!==T$m||1!==T$x||T$s.skewX||T$s.skewY){(T$L=this._transform||(this._transform=T$c.create())).bTransform=!0;var T$w=.0174532922222222*(T$s.rotate-T$s.skewX),T$O=.0174532922222222*(T$s.rotate+T$s.skewY),T$v=Math.cos(T$O),T$y=Math.sin(T$O),T$F=Math.sin(T$w),T$o=Math.cos(T$w);return T$L.a=T$m*T$v,T$L.b=T$m*T$y,T$L.c=-T$x*T$F,T$L.d=T$x*T$o,T$L.tx=T$L.ty=0,T$L;}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,T$L;},T$L.pos=function(T$L,T$s,T$m){if(void 0===T$m&&(T$m=!1),this._x!==T$L||this._y!==T$s){if(this.destroyed)return this;if(T$m){this._x=T$L,this._y=T$s,this.conchModel&&this.conchModel.pos(this._x,this._y);var T$x=this._parent;T$x&&0===T$x._repaint&&(T$x._repaint=1,T$x.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint());}else this.x=T$L,this.y=T$s;}return this;},T$L.pivot=function(T$L,T$s){return this.pivotX=T$L,this.pivotY=T$s,this;},T$L.size=function(T$L,T$s){return this.width=T$L,this.height=T$s,this;},T$L.scale=function(T$L,T$s,T$m){void 0===T$m&&(T$m=!1);var T$x=this.getStyle(),T$w=T$x._tf;if(T$w.scaleX!=T$L||T$w.scaleY!=T$s){if(this.destroyed)return this;if(T$m){T$x.setScale(T$L,T$s),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(T$L,T$s),this._renderType|=4;var T$O=this._parent;T$O&&0===T$O._repaint&&(T$O._repaint=1,T$O.parentRepaint());}else this.scaleX=T$L,this.scaleY=T$s;}return this;},T$L.skew=function(T$L,T$s){return this.skewX=T$L,this.skewY=T$s,this;},T$L.render=function(T$L,T$s,T$m){T$K.spriteCount++,T$g.renders[this._renderType]._fun(this,T$L,T$s+this._x,T$m+this._y),this._repaint=0;},T$L.drawToCanvas=function(T$L,T$s,T$m,T$x){if(T$R.isConchNode){var T$w=T$bL.create("2D");return new T$A(T$L,T$s,T$w).ctx.setCanvasType(1),this.conchModel.drawToCanvas(T$w.source,T$m,T$x),T$w;}return T$U.drawToCanvas(this,this._renderType,T$L,T$s,T$m,T$x);},T$L.customRender=function(T$L,T$s,T$m){this._renderType|=1024;},T$L._applyFilters=function(){var T$L;if(!T$R.isWebGL&&(T$L=this._$P.filters)&&!(T$L.length<1))for(var T$s=0,T$m=T$L.length;T$s<T$m;T$s++)T$L[T$s].action.apply(this._$P.cacheCanvas);},T$L._isHaveGlowFilter=function(){var T$L,T$s=0;if(this.filters)for(T$s=0;T$s<this.filters.length;T$s++)if(8==this.filters[T$s].type)return!0;for(T$s=0,T$L=this._childs.length;T$s<T$L;T$s++)if(this._childs[T$s]._isHaveGlowFilter())return!0;return!1;},T$L.localToGlobal=function(T$L,T$s){void 0===T$s&&(T$s=!1),!0===T$s&&(T$L=new T$f(T$L.x,T$L.y));for(var T$m=this;T$m&&T$m!=T$a.stage;)T$L=T$m.toParentPoint(T$L),T$m=T$m.parent;return T$L;},T$L.globalToLocal=function(T$L,T$s){void 0===T$s&&(T$s=!1),T$s&&(T$L=new T$f(T$L.x,T$L.y));for(var T$m=this,T$x=[];T$m&&T$m!=T$a.stage;)T$x.push(T$m),T$m=T$m.parent;for(var T$w=T$x.length-1;0<=T$w;)T$L=(T$m=T$x[T$w]).fromParentPoint(T$L),T$w--;return T$L;},T$L.toParentPoint=function(T$L){if(!T$L)return T$L;T$L.x-=this.pivotX,T$L.y-=this.pivotY,this.transform&&this._transform.transformPoint(T$L),T$L.x+=this._x,T$L.y+=this._y;var T$s=this._style.scrollRect;return T$s&&(T$L.x-=T$s.x,T$L.y-=T$s.y),T$L;},T$L.fromParentPoint=function(T$L){if(!T$L)return T$L;T$L.x-=this._x,T$L.y-=this._y;var T$s=this._style.scrollRect;return T$s&&(T$L.x+=T$s.x,T$L.y+=T$s.y),this.transform&&this._transform.invertTransformPoint(T$L),T$L.x+=this.pivotX,T$L.y+=this.pivotY,T$L;},T$L.on=function(T$L,T$s,T$m,T$x){return 1!==this._mouseEnableState&&this.isMouseEvent(T$L)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(T$L,T$s,T$m,T$x,!1)):T$w.prototype.on.call(this,T$L,T$s,T$m,T$x);},T$L.once=function(T$L,T$s,T$m,T$x){return 1!==this._mouseEnableState&&this.isMouseEvent(T$L)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(T$L,T$s,T$m,T$x,!0)):T$w.prototype.once.call(this,T$L,T$s,T$m,T$x);},T$L._$2__onDisplay=function(){if(1!==this._mouseEnableState){var T$L=this;for(T$L=T$L.parent;T$L&&1!==T$L._mouseEnableState&&!T$L._getBit(2);)T$L.mouseEnabled=!0,T$L._setBit(2,!0),T$L=T$L.parent;}},T$L.loadImage=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v=this;return void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0),void 0===T$x&&(T$x=0),void 0===T$w&&(T$w=0),this.graphics.loadImage(T$L,T$s,T$m,T$x,T$w,function(T$L){T$v.destroyed||(T$v.size(T$s+(T$x||T$L.width),T$m+(T$w||T$L.height)),T$v.repaint(),T$O&&T$O.runWith(T$L));}),this;},T$L.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint();},T$L._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache;},T$L._childChanged=function(T$L){this._childs.length?this._renderType|=2048:this._renderType&=-2049,T$L&&this._get$P("hasZorder")&&T$a.timer.callLater(this,this.updateZOrder),this.repaint();},T$L.parentRepaint=function(){var T$L=this._parent;T$L&&0===T$L._repaint&&(T$L._repaint=1,T$L.parentRepaint());},T$L.startDrag=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){void 0===T$s&&(T$s=!1),void 0===T$m&&(T$m=0),void 0===T$x&&(T$x=300),void 0===T$O&&(T$O=!1),void 0===T$v&&(T$v=.92),this._$P.dragging||this._set$P("dragging",new T$n()),this._$P.dragging.start(this,T$L,T$s,T$m,T$x,T$w,T$O,T$v);},T$L.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop();},T$L._releaseMem=function(){if(this._$P){var T$L=this._$P.cacheCanvas;T$L&&T$L.ctx&&(T$q.recover("RenderContext",T$L.ctx),T$L.ctx.canvas.size(0,0),T$L.ctx=null);var T$s=this._$P._filterCache;T$s&&(T$s.destroy(),T$s.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null;}},T$L._setDisplay=function(T$L){T$L||this._releaseMem(),T$w.prototype._setDisplay.call(this,T$L);},T$L.hitTestPoint=function(T$L,T$s){var T$m=this.globalToLocal(T$f.TEMP.setTo(T$L,T$s));return T$L=T$m.x,T$s=T$m.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?T$_.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(T$L,T$s);},T$L.getMousePoint=function(){return this.globalToLocal(T$f.TEMP.setTo(T$a.stage.mouseX,T$a.stage.mouseY));},T$L._getWords=function(){return null;},T$L._addChildsToLayout=function(T$L){var T$s=this._getWords();if(null==T$s&&0==this._childs.length)return!1;if(T$s)for(var T$m=0,T$x=T$s.length;T$m<T$x;T$m++)T$L.push(T$s[T$m]);T$m=0;for(var T$w=this._childs.length;T$m<T$w;++T$m){var T$O=this._childs[T$m];T$O._style._enableLayout()&&T$O._addToLayout(T$L);}return!0;},T$L._addToLayout=function(T$L){this._style.absolute||(this._style.block?T$L.push(this):this._addChildsToLayout(T$L)&&(this.x=this.y=0));},T$L._isChar=function(){return!1;},T$L._getCSSStyle=function(){return this._style.getCSSStyle();},T$L._setAttributes=function(T$L,T$s){switch(T$L){case"x":this.x=parseFloat(T$s);break;case"y":this.y=parseFloat(T$s);break;case"width":this.width=parseFloat(T$s);break;case"height":this.height=parseFloat(T$s);break;default:this[T$L]=T$s;}},T$L._layoutLater=function(){this.parent&&this.parent._layoutLater();},T$u(0,T$L,"optimizeScrollRect",function(){return this._optimizeScrollRect;},function(T$L){this._optimizeScrollRect!=T$L&&(this._optimizeScrollRect=T$L,this.conchModel&&this.conchModel.optimizeScrollRect(T$L));}),T$u(0,T$L,"customRenderEnable",null,function(T$L){if(T$L&&(this._renderType|=1024,T$R.isConchNode)){T$m.CustomList.push(this);var T$s=new T$bL("2d");T$s._setContext(new CanvasRenderingContext2D()),this.customContext=new T$A(0,0,T$s),T$s.context.setCanvasType&&T$s.context.setCanvasType(2),this.conchModel.custom(T$s.context);}}),T$u(0,T$L,"cacheAsBitmap",function(){return"none"!==this.cacheAs;},function(T$L){this.cacheAs=T$L?this._$P.hasFilter?"none":"normal":"none";}),T$u(0,T$L,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type;},function(T$L){var T$s=this._$P.cacheCanvas;if(T$L!==(T$s?T$s.type:"none")){if("none"!==T$L)this._getBit(1)||this._setUpNoticeType(1),T$s||(T$s=this._set$P("cacheCanvas",T$q.getItemByClass("cacheCanvas",Object))),T$s.type=T$L,T$s.reCache=!0,this._renderType|=16,"bitmap"==T$L&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(T$s){var T$m=T$s;T$m&&T$m.ctx&&(T$q.recover("RenderContext",T$m.ctx),T$m.ctx.canvas.size(0,0),T$m.ctx=null),T$q.recover("cacheCanvas",T$s);}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0);}this.repaint();}}),T$u(0,T$L,"zOrder",function(){return this._zOrder;},function(T$L){this._zOrder!=T$L&&(this._zOrder=T$L,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(T$L),this._parent&&(T$L&&this._parent._set$P("hasZorder",!0),T$a.timer.callLater(this._parent,this.updateZOrder)));}),T$u(0,T$L,"rotation",function(){return this._style._tf.rotate;},function(T$L){var T$s=this.getStyle();if(T$s._tf.rotate!==T$L){T$s.setRotate(T$L),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(T$L),this._renderType|=4;var T$m=this._parent;T$m&&0===T$m._repaint&&(T$m._repaint=1,T$m.parentRepaint());}}),T$u(0,T$L,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width;},function(T$L){this._width!==T$L&&(this._width=T$L,this.conchModel&&this.conchModel.size(T$L,this._height),this.repaint());}),T$u(0,T$L,"x",function(){return this._x;},function(T$L){if(this._x!==T$L){if(this.destroyed)return;this._x=T$L,this.conchModel&&this.conchModel.pos(T$L,this._y);var T$s=this._parent;T$s&&0===T$s._repaint&&(T$s._repaint=1,T$s.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint());}}),T$u(0,T$L,"globalScaleY",function(){for(var T$L=1,T$s=this;T$s&&T$s!==T$a.stage;)T$L*=T$s.scaleY,T$s=T$s.parent;return T$L;}),T$u(0,T$L,"hitArea",function(){return this._$P.hitArea;},function(T$L){this._set$P("hitArea",T$L);}),T$u(0,T$L,"staticCache",function(){return this._$P.staticCache;},function(T$L){this._set$P("staticCache",T$L),T$L||this.reCache();}),T$u(0,T$L,"texture",function(){return this._texture;},function(T$L){this._texture!=T$L&&(this._texture=T$L,this.graphics.cleanByTexture(T$L,0,0));}),T$u(0,T$L,"y",function(){return this._y;},function(T$L){if(this._y!==T$L){if(this.destroyed)return;this._y=T$L,this.conchModel&&this.conchModel.pos(this._x,T$L);var T$s=this._parent;T$s&&0===T$s._repaint&&(T$s._repaint=1,T$s.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint());}}),T$u(0,T$L,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height;},function(T$L){this._height!==T$L&&(this._height=T$L,this.conchModel&&this.conchModel.size(this._width,T$L),this.repaint());}),T$u(0,T$L,"blendMode",function(){return this._style.blendMode;},function(T$L){this.getStyle().blendMode=T$L,this.conchModel&&this.conchModel.blendMode(T$L),T$L&&"source-over"!=T$L?this._renderType|=8:this._renderType&=-9,this.parentRepaint();}),T$u(0,T$L,"scaleX",function(){return this._style._tf.scaleX;},function(T$L){var T$s=this.getStyle();if(T$s._tf.scaleX!==T$L){T$s.setScaleX(T$L),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(T$L,T$s._tf.scaleY),this._renderType|=4;var T$m=this._parent;T$m&&0===T$m._repaint&&(T$m._repaint=1,T$m.parentRepaint());}}),T$u(0,T$L,"scaleY",function(){return this._style._tf.scaleY;},function(T$L){var T$s=this.getStyle();if(T$s._tf.scaleY!==T$L){T$s.setScaleY(T$L),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(T$s._tf.scaleX,T$L),this._renderType|=4;var T$m=this._parent;T$m&&0===T$m._repaint&&(T$m._repaint=1,T$m.parentRepaint());}}),T$u(0,T$L,"stage",function(){return T$a.stage;}),T$u(0,T$L,"skewX",function(){return this._style._tf.skewX;},function(T$L){var T$s=this.getStyle();if(T$s._tf.skewX!==T$L){T$s.setSkewX(T$L),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(T$L,T$s._tf.skewY),this._renderType|=4;var T$m=this._parent;T$m&&0===T$m._repaint&&(T$m._repaint=1,T$m.parentRepaint());}}),T$u(0,T$L,"scrollRect",function(){return this._style.scrollRect;},function(T$L){this.getStyle().scrollRect=T$L,this.repaint(),T$L?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(T$L.x,T$L.y,T$L.width,T$L.height)):(this._renderType&=-129,this.conchModel&&(T$m.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)));}),T$u(0,T$L,"skewY",function(){return this._style._tf.skewY;},function(T$L){var T$s=this.getStyle();if(T$s._tf.skewY!==T$L){T$s.setSkewY(T$L),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(T$s._tf.skewX,T$L),this._renderType|=4;var T$m=this._parent;T$m&&0===T$m._repaint&&(T$m._repaint=1,T$m.parentRepaint());}}),T$u(0,T$L,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform;},function(T$L){this._tfChanged=!1,(this._transform=T$L)&&(this._x=T$L.tx,this._y=T$L.ty,T$L.tx=T$L.ty=0,this.conchModel&&this.conchModel.transform(T$L.a,T$L.b,T$L.c,T$L.d,this._x,this._y)),T$L?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint();}),T$u(0,T$L,"pivotX",function(){return this._style._tf.translateX;},function(T$L){this.getStyle().setTranslateX(T$L),this.conchModel&&this.conchModel.pivot(T$L,this._style._tf.translateY),this.repaint();}),T$u(0,T$L,"pivotY",function(){return this._style._tf.translateY;},function(T$L){this.getStyle().setTranslateY(T$L),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,T$L),this.repaint();}),T$u(0,T$L,"alpha",function(){return this._style.alpha;},function(T$L){this._style&&this._style.alpha!==T$L&&(T$L=T$L<0?0:1<T$L?1:T$L,this.getStyle().alpha=T$L,this.conchModel&&this.conchModel.alpha(T$L),1!==T$L?this._renderType|=2:this._renderType&=-3,this.parentRepaint());}),T$u(0,T$L,"visible",function(){return this._style.visible;},function(T$L){this._style&&this._style.visible!==T$L&&(this.getStyle().visible=T$L,this.conchModel&&this.conchModel.visible(T$L),this.parentRepaint());}),T$u(0,T$L,"graphics",function(){return this._graphics||(this.graphics=T$U.createGraphics());},function(T$L){this._graphics&&(this._graphics._sp=null),(this._graphics=T$L)?(this._renderType&=-2,this._renderType|=512,(T$L._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(T$m.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint();}),T$u(0,T$L,"filters",function(){return this._$P.filters;},function(T$L){T$L&&0===T$L.length&&(T$L=null),this._$P.filters!=T$L&&(this._set$P("filters",T$L?T$L.slice():null),T$R.isConchApp&&(this.conchModel&&(T$m.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),T$R.isWebGL&&(T$L&&T$L.length?this._renderType|=32:this._renderType&=-33),T$L&&0<T$L.length?(this._getBit(1)||this._setUpNoticeType(1),T$R.isWebGL&&1==T$L.length&&T$L[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(T$R.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint());}),T$u(0,T$L,"parent",T$w.prototype._$get_parent,function(T$L){T$a.superSet(T$LL,this,"parent",T$L),T$L&&this._getBit(2)&&this._$2__onDisplay();}),T$u(0,T$L,"mask",function(){return this._$P._mask;},function(T$L){T$L&&this.mask&&this.mask._$P.maskParent||(T$L?(this.cacheAs="bitmap",this._set$P("_mask",T$L),T$L._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",T$L),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(T$L?T$L.conchModel:null),this._renderType|=64,this.parentRepaint());}),T$u(0,T$L,"mouseEnabled",function(){return 1<this._mouseEnableState;},function(T$L){this._mouseEnableState=T$L?2:1;}),T$u(0,T$L,"globalScaleX",function(){for(var T$L=1,T$s=this;T$s&&T$s!==T$a.stage;)T$L*=T$s.scaleX,T$s=T$s.parent;return T$L;}),T$u(0,T$L,"mouseX",function(){return this.getMousePoint().x;}),T$u(0,T$L,"mouseY",function(){return this.getMousePoint().y;}),T$m.fromImage=function(T$L){return new T$m().loadImage(T$L);},T$m._cachePool=[],T$m.CustomList=[],T$F(T$m,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=T$v.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):"";}]),T$m;}(T$LL),T$EL=function(T$L){function T$s(T$L){this._audio=null,this._onEnd=null,this._resumePlay=null,T$s.__super.call(this),this._onEnd=T$B.bind(this.__onEnd,this),this._resumePlay=T$B.bind(this.__resumePlay,this),T$L.addEventListener("ended",this._onEnd),this._audio=T$L;}T$V(T$s,"laya.media.h5audio.AudioSoundChannel",T$xL);var T$m=T$s.prototype;return T$m.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(T$a.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0);},T$m.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,T$Z.container.appendChild(this._audio),this._audio.play();}catch(T$L){this.event("error");}},T$m.play=function(T$L){this.isStopped=!1;try{this._audio.playbackRate=T$i.playbackRate,this._audio.currentTime=this.startTime;}catch(T$L){return void this._audio.addEventListener("canplay",this._resumePlay);}T$i.addChannel(this),T$Z.container.appendChild(this._audio),!T$L&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play();},T$m.stop=function(){this.isStopped=!0,T$i.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&T$R.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),T$Z.onIE||this._audio!=T$mL._musicAudio&&T$q.recover("audio:"+this.url,this._audio),T$Z.removeElement(this._audio),this._audio=null);},T$m.pause=function(){this.isStopped=!0,T$i.removeChannel(this),"pause"in this._audio&&this._audio.pause();},T$m.resume=function(){this._audio&&(this.isStopped=!1,T$i.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play());},T$u(0,T$m,"position",function(){return this._audio?this._audio.currentTime:0;}),T$u(0,T$m,"duration",function(){return this._audio?this._audio.duration:0;}),T$u(0,T$m,"volume",function(){return this._audio?this._audio.volume:1;},function(T$L){this._audio&&(this._audio.volume=T$L);}),T$s;}(),T$rL=function(T$L){function T$s(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=T$OL.ctx,T$s.__super.call(this),this._onPlayEnd=T$B.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode();}T$V(T$s,"laya.media.webaudio.WebAudioSoundChannel",T$xL);var T$m=T$s.prototype;return T$m.play=function(T$L){if(T$i.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var T$s=this.context,T$m=this.gain,T$x=T$s.createBufferSource();(this.bufferSource=T$x).buffer=this.audioBuffer,T$x.connect(T$m),T$m&&T$m.disconnect(),T$m.connect(T$s.destination),T$x.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=T$Z.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(T$x.loop=!0),T$x.playbackRate.setTargetAtTime?T$x.playbackRate.setTargetAtTime(T$i.playbackRate,this.context.currentTime,.1):T$x.playbackRate.value=T$i.playbackRate,T$x.start(0,this.startTime),!T$L&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0;}},T$m.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(T$a.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0);},T$m._clearBufferSource=function(){if(this.bufferSource){var T$L=this.bufferSource;T$L.stop?T$L.stop(0):T$L.noteOff(0),T$L.disconnect(0),T$L.onended=null,T$s._tryCleanFailed||this._tryClearBuffer(T$L),this.bufferSource=null;}},T$m._tryClearBuffer=function(T$L){try{T$L.buffer=null;}catch(T$L){T$s._tryCleanFailed=!0;}},T$m.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,T$i.removeChannel(this),this.startHandler=null,this.completeHandler=null;},T$m.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,T$i.removeChannel(this);},T$m.resume=function(){this.startTime=this._pauseTime,this.play(!1);},T$u(0,T$m,"position",function(){return this.bufferSource?(T$Z.now()-this._startTime)/1e3+this.startTime:0;}),T$u(0,T$m,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0;}),T$u(0,T$m,"volume",function(){return this._volume;},function(T$L){this.isStopped||(this._volume=T$L,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(T$L,this.context.currentTime,.1):this.gain.gain.value=T$L);}),T$s._tryCleanFailed=!1,T$s;}(),T$uL=function(T$L){function T$s(){T$s.__super.call(this),this._w=0,this._h=0;}T$V(T$s,"laya.resource.Bitmap",T$oL);var T$m=T$s.prototype;return T$u(0,T$m,"width",function(){return this._w;}),T$u(0,T$m,"height",function(){return this._h;}),T$u(0,T$m,"source",function(){return this._source;}),T$s;}(),T$TL=function(T$s){function T$L(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,T$L.__super.call(this),this._interval=T$x.animationInterval,this._setUpNoticeType(1);}T$V(T$L,"laya.display.AnimationPlayerBase",T$s);var T$m=T$L.prototype;return T$m.play=function(T$L,T$s,T$m,T$x){void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=!0),void 0===T$m&&(T$m=""),void 0===T$x&&(T$x=!0),this._isPlaying=!0,this.index="string"==typeof T$L?this._getFrameByLabel(T$L):T$L,this.loop=T$s,this._actionName=T$m,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0);},T$m._getFrameByLabel=function(T$L){var T$s=0;for(T$s=0;T$s<this._count;T$s++)if(this._labels[T$s]&&0<=this._labels[T$s].indexOf(T$L))return T$s;return 0;},T$m._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete");}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete");}this.index=this._index;},T$m._setControlNode=function(T$L){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=T$L)&&T$L!=this&&(T$L.on("display",this,this._checkResumePlaying),T$L.on("undisplay",this,this._checkResumePlaying));},T$m._setDisplay=function(T$L){T$s.prototype._setDisplay.call(this,T$L),this._checkResumePlaying();},T$m._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop));},T$m.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop);},T$m.addLabel=function(T$L,T$s){this._labels||(this._labels={}),this._labels[T$s]||(this._labels[T$s]=[]),this._labels[T$s].push(T$L);},T$m.removeLabel=function(T$L){if(T$L){if(this._labels)for(var T$s in this._labels)this._removeLabelFromLabelList(this._labels[T$s],T$L);}else this._labels=null;},T$m._removeLabelFromLabelList=function(T$L,T$s){if(T$L)for(var T$m=T$L.length-1;0<=T$m;T$m--)T$L[T$m]==T$s&&T$L.splice(T$m,1);},T$m.gotoAndStop=function(T$L){this.index="string"==typeof T$L?this._getFrameByLabel(T$L):T$L,this.stop();},T$m._displayToIndex=function(T$L){},T$m.clear=function(){this.stop(),this._labels=null;},T$u(0,T$m,"interval",function(){return this._interval;},function(T$L){this._interval!=T$L&&(this._frameRateChanged=!0,this._interval=T$L,this._isPlaying&&0<T$L&&this.timerLoop(T$L,this,this._frameLoop,null,!0,!0));}),T$u(0,T$m,"isPlaying",function(){return this._isPlaying;}),T$u(0,T$m,"index",function(){return this._index;},function(T$L){if(this._index=T$L,this._displayToIndex(T$L),this._labels&&this._labels[T$L])for(var T$s=this._labels[T$L],T$m=0,T$x=T$s.length;T$m<T$x;T$m++)this.event("label",T$s[T$m]);}),T$u(0,T$m,"count",function(){return this._count;}),T$L.WRAP_POSITIVE=0,T$L.WRAP_REVERSE=1,T$L.WRAP_PINGPONG=2,T$L;}(T$CL),T$jL=function(T$s){function T$r(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,T$r.__super.call(this),this.overflow=T$r.VISIBLE,this._style=new T$sL(this),this._style.wordWrap=!1;}T$V(T$r,"laya.display.Text",T$s);var T$L=T$r.prototype;return T$L.destroy=function(T$L){void 0===T$L&&(T$L=!0),T$s.prototype.destroy.call(this,T$L),this._lines=null,this._words&&(this._words.length=0,this._words=null);},T$L._getBoundPointsM=function(T$L){void 0===T$L&&(T$L=!1);var T$s=T$_.TEMP;return T$s.setTo(0,0,this.width,this.height),T$s._getBoundPoints();},T$L.getGraphicBounds=function(T$L){void 0===T$L&&(T$L=!1);var T$s=T$_.TEMP;return T$s.setTo(0,0,this.width,this.height),T$s;},T$L._getCSSStyle=function(){return this._style;},T$L.lang=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o,T$V){if(T$L=T$r.langPacks&&T$r.langPacks[T$L]?T$r.langPacks[T$L]:T$L,arguments.length<2)this._text=T$L;else{for(var T$C=0,T$E=arguments.length;T$C<T$E;T$C++)T$L=T$L.replace("{"+T$C+"}",arguments[T$C+1]);this._text=T$L;}},T$L._isPassWordMode=function(){var T$L=this._style.password;return"prompt"in this&&this.prompt==this._text&&(T$L=!1),T$L;},T$L._getPassWordTxt=function(T$L){var T$s;T$s="";for(var T$m=T$L.length;0<T$m;T$m--)T$s+="●";return T$s;},T$L.renderText=function(T$L,T$s){var T$m=this.graphics;T$m.clear(!0);var T$x=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(T$Z.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);T$Z.context.font=T$x;var T$w=this.padding,T$O=T$w[3],T$v="left",T$y=this._lines,T$F=this.leading+this._charSize.height,T$o=this._currBitmapFont;T$o&&(T$F=this.leading+T$o.getMaxHeight());var T$V=T$w[0];if(!T$o&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(T$v="right",T$O=this._width-T$w[1]):"center"==this.align&&(T$v="center",T$O=.5*this._width+T$w[3]-T$w[1])),0<this._height){var T$C=this._textHeight>this._height?"top":this.valign;"middle"===T$C?T$V=.5*(this._height-T$s*T$F)+T$w[0]-T$w[2]:"bottom"===T$C&&(T$V=this._height-T$s*T$F-T$w[2]);}var T$E=this._style;if(T$o&&T$o.autoScaleSize)var T$r=T$o.fontSize/this.fontSize;if(this._clipPoint)if(T$m.save(),T$o&&T$o.autoScaleSize){var T$u=0,T$T=0;T$u=this._width?this._width-T$w[3]-T$w[1]:this._textWidth,T$T=this._height?this._height-T$w[0]-T$w[2]:this._textHeight,T$u*=T$r,T$T*=T$r,T$m.clipRect(T$w[3],T$w[0],T$u,T$T);}else T$m.clipRect(T$w[3],T$w[0],this._width?this._width-T$w[3]-T$w[1]:this._textWidth,this._height?this._height-T$w[0]-T$w[2]:this._textHeight);var T$j=T$E.password;"prompt"in this&&this.prompt==this._text&&(T$j=!1);for(var T$D=0,T$e=0,T$b=Math.min(this._lines.length,T$s+T$L)||1,T$S=T$L;T$S<T$b;T$S++){var T$H,T$Y=T$y[T$S];if(T$j){var T$a=T$Y.length;T$Y="";for(var T$f=T$a;0<T$f;T$f--)T$Y+="●";}if(T$D=T$O-(this._clipPoint?this._clipPoint.x:0),T$e=T$V+T$F*T$S-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(T$v,T$D,T$e,T$S),T$o){var T$_=this.width;T$o.autoScaleSize&&(T$_=this.width*T$r),T$o.drawText(T$Y,this,T$D,T$e,this.align,T$_);}else T$R.isWebGL?(this._words||(this._words=[]),(T$H=this._words.length>T$S-T$L?this._words[T$S-T$L]:new T$t()).setText(T$Y)):T$H=T$Y,T$E.stroke?T$m.fillBorderText(T$H,T$D,T$e,T$x,this.color,T$E.strokeColor,T$E.stroke,T$v):T$m.fillText(T$H,T$D,T$e,T$x,this.color,T$v);}if(T$o&&T$o.autoScaleSize){var T$Q=1/T$r;this.scale(T$Q,T$Q);}this._clipPoint&&T$m.restore(),this._startX=T$O,this._startY=T$V;},T$L.drawUnderline=function(T$L,T$s,T$m,T$x){var T$w=this._lineWidths[T$x];switch(T$L){case"center":T$s-=T$w/2;break;case"right":T$s-=T$w;}T$m+=this._charSize.height,this._graphics.drawLine(T$s,T$m,T$s+T$w,T$m,this.underlineColor||this.color,1);},T$L.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);T$Z.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new T$f(0,0)):this._clipPoint=null;var T$L=this._lines.length;if(this.overflow!=T$r.VISIBLE){var T$s=this.overflow==T$r.HIDDEN?Math.floor:Math.ceil;T$L=Math.min(T$L,T$s((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)));}var T$m=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(T$m,T$L),this.repaint();},T$L.evalTextSize=function(){var T$L,T$s=NaN;T$L=Math.max.apply(this,this._lineWidths),T$s=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],T$L==this._textWidth&&T$s==this._textHeight||(this._textWidth=T$L,this._textHeight=T$s,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight));},T$L.checkEnabledViewportOrNot=function(){return this.overflow==T$r.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height);},T$L.changeText=function(T$L){this._text!==T$L&&(this.lang(T$L+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset());},T$L.parseLines=function(T$L){var T$s=this.wordWrap||this.overflow==T$r.HIDDEN;if(T$s)var T$m=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var T$x=T$B.contextMeasureText(T$r._testWord);T$R.isConchApp&&0===T$x.width&&0===T$x.height&&(T$x=T$B.contextMeasureText("W")),this._charSize.width=T$x.width,this._charSize.height=T$x.height||this.fontSize;}for(var T$w=T$L.replace(/\r\n/g,"\n").split("\n"),T$O=0,T$v=T$w.length;T$O<T$v;T$O++){var T$y=T$w[T$O];T$s?this.parseLine(T$y,T$m):(this._lineWidths.push(this.getTextWidth(T$y)),this._lines.push(T$y));}},T$L.parseLine=function(T$L,T$s){T$Z.context;var T$m,T$x=this._lines,T$w=0,T$O=NaN,T$v=NaN,T$y=0;if((T$O=this.getTextWidth(T$L))<=T$s)return T$x.push(T$L),void this._lineWidths.push(T$O);T$O=this._charSize.width,0==(T$w=Math.floor(T$s/T$O))&&(T$w=1),T$v=T$O=this.getTextWidth(T$L.substring(0,T$w));for(var T$F=T$w,T$o=T$L.length;T$F<T$o;T$F++)if(T$s<(T$v+=T$O=this.getTextWidth(T$L.charAt(T$F))))if(this.wordWrap){var T$V=T$L.substring(T$y,T$F);if(T$V.charCodeAt(T$V.length-1)<255?(T$m=/(?:\w|-)+$/.exec(T$V))&&(T$F=T$m.index+T$y,0==T$m.index?T$F+=T$V.length:T$V=T$L.substring(T$y,T$F)):T$r.RightToLeft&&(T$m=/([\u0600-\u06FF])+$/.exec(T$V))&&(T$F=T$m.index+T$y,0==T$m.index?T$F+=T$V.length:T$V=T$L.substring(T$y,T$F)),T$x.push(T$V),this._lineWidths.push(T$v-T$O),!((T$y=T$F)+T$w<T$o)){T$x.push(T$L.substring(T$y,T$o)),this._lineWidths.push(this.getTextWidth(T$x[T$x.length-1])),T$y=-1;break;}T$F+=T$w,T$v=T$O=this.getTextWidth(T$L.substring(T$y,T$F)),T$F--;}else if(this.overflow==T$r.HIDDEN)return T$x.push(T$L.substring(0,T$F)),void this._lineWidths.push(this.getTextWidth(T$x[T$x.length-1]));this.wordWrap&&-1!=T$y&&(T$x.push(T$L.substring(T$y,T$o)),this._lineWidths.push(this.getTextWidth(T$x[T$x.length-1])));},T$L.getTextWidth=function(T$L){return this._currBitmapFont?this._currBitmapFont.getTextWidth(T$L):T$B.contextMeasureText(T$L).width;},T$L.getWordWrapWidth=function(){var T$L=this.padding,T$s=NaN;return(T$s=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(T$s=this.wordWrap?100:T$Z.width),T$s<=0&&(T$s=100),T$s-T$L[3]-T$L[1];},T$L.getCharPoint=function(T$L,T$s){this._isChanged&&T$a.timer.runCallLater(this,this.typeset);for(var T$m=0,T$x=this._lines,T$w=0,T$O=0,T$v=T$x.length;T$O<T$v;T$O++){if(T$L<(T$m+=T$x[T$O].length)){var T$y=T$O;break;}T$w=T$m;}var T$F=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;T$Z.context.font=T$F;var T$o=this.getTextWidth(this._text.substring(T$w,T$L));return(T$s||new T$f()).setTo(this._startX+T$o-(this._clipPoint?this._clipPoint.x:0),this._startY+T$y*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0));},T$u(0,T$L,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3];},function(T$L){T$L!=this._width&&(T$a.superSet(T$CL,this,"width",T$L),this.isChanged=!0);}),T$u(0,T$L,"textWidth",function(){return this._isChanged&&T$a.timer.runCallLater(this,this.typeset),this._textWidth;}),T$u(0,T$L,"height",function(){return this._height?this._height:this.textHeight;},function(T$L){T$L!=this._height&&(T$a.superSet(T$CL,this,"height",T$L),this.isChanged=!0);}),T$u(0,T$L,"textHeight",function(){return this._isChanged&&T$a.timer.runCallLater(this,this.typeset),this._textHeight;}),T$u(0,T$L,"padding",function(){return this._getCSSStyle().padding;},function(T$L){this._getCSSStyle().padding=T$L,this.isChanged=!0;}),T$u(0,T$L,"bold",function(){return this._getCSSStyle().bold;},function(T$L){this._getCSSStyle().bold=T$L,this.isChanged=!0;}),T$u(0,T$L,"text",function(){return this._text||"";},function(T$L){this._text!==T$L&&(this.lang(T$L+""),this.isChanged=!0,this.event("change"));}),T$u(0,T$L,"color",function(){return this._getCSSStyle().color;},function(T$L){this._getCSSStyle().color!=T$L&&(this._getCSSStyle().color=T$L,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0);}),T$u(0,T$L,"font",function(){return this._getCSSStyle().fontFamily;},function(T$L){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),T$r._bitmapFonts&&T$r._bitmapFonts[T$L]&&(this._currBitmapFont=T$r._bitmapFonts[T$L]),this._getCSSStyle().fontFamily=T$L,this.isChanged=!0;}),T$u(0,T$L,"fontSize",function(){return this._getCSSStyle().fontSize;},function(T$L){this._getCSSStyle().fontSize=T$L,this.isChanged=!0;}),T$u(0,T$L,"italic",function(){return this._getCSSStyle().italic;},function(T$L){this._getCSSStyle().italic=T$L,this.isChanged=!0;}),T$u(0,T$L,"align",function(){return this._getCSSStyle().align;},function(T$L){this._getCSSStyle().align=T$L,this.isChanged=!0;}),T$u(0,T$L,"valign",function(){return this._getCSSStyle().valign;},function(T$L){this._getCSSStyle().valign=T$L,this.isChanged=!0;}),T$u(0,T$L,"wordWrap",function(){return this._getCSSStyle().wordWrap;},function(T$L){this._getCSSStyle().wordWrap=T$L,this.isChanged=!0;}),T$u(0,T$L,"leading",function(){return this._getCSSStyle().leading;},function(T$L){this._getCSSStyle().leading=T$L,this.isChanged=!0;}),T$u(0,T$L,"bgColor",function(){return this._getCSSStyle().backgroundColor;},function(T$L){this._getCSSStyle().backgroundColor=T$L,this.isChanged=!0;}),T$u(0,T$L,"borderColor",function(){return this._getCSSStyle().borderColor;},function(T$L){this._getCSSStyle().borderColor=T$L,this.isChanged=!0;}),T$u(0,T$L,"stroke",function(){return this._getCSSStyle().stroke;},function(T$L){this._getCSSStyle().stroke=T$L,this.isChanged=!0;}),T$u(0,T$L,"strokeColor",function(){return this._getCSSStyle().strokeColor;},function(T$L){this._getCSSStyle().strokeColor=T$L,this.isChanged=!0;}),T$u(0,T$L,"isChanged",null,function(T$L){this._isChanged!==T$L&&(this._isChanged=T$L)&&T$a.timer.callLater(this,this.typeset);}),T$u(0,T$L,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0;},function(T$L){if(!(this.overflow!=T$r.SCROLL||this.textWidth<this._width)&&this._clipPoint){T$L=T$L<this.padding[3]?this.padding[3]:T$L;var T$s=this._textWidth-this._width;T$L=T$s<T$L?T$s:T$L;var T$m=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=T$L,this.renderText(this._lastVisibleLineIndex,T$m);}}),T$u(0,T$L,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0;},function(T$L){if(!(this.overflow!=T$r.SCROLL||this.textHeight<this._height)&&this._clipPoint){T$L=T$L<this.padding[0]?this.padding[0]:T$L;var T$s=this._textHeight-this._height,T$m=(T$L=T$s<T$L?T$s:T$L)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=T$m;var T$x=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=T$L,this.renderText(T$m,T$x);}}),T$u(0,T$L,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width;}),T$u(0,T$L,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height;}),T$u(0,T$L,"lines",function(){return this._isChanged&&this.typeset(),this._lines;}),T$u(0,T$L,"underlineColor",function(){return this._underlineColor;},function(T$L){this._underlineColor=T$L,this._isChanged=!0,this.typeset();}),T$r.registerBitmapFont=function(T$L,T$s){T$r._bitmapFonts||(T$r._bitmapFonts={}),T$r._bitmapFonts[T$L]=T$s;},T$r.unregisterBitmapFont=function(T$L,T$s){if(void 0===T$s&&(T$s=!0),T$r._bitmapFonts&&T$r._bitmapFonts[T$L]){var T$m=T$r._bitmapFonts[T$L];T$s&&T$m.destroy(),delete T$r._bitmapFonts[T$L];}},T$r.setTextRightToLeft=function(){var T$L;(T$L=T$Z.canvas.source.style).display="none",T$L.position="absolute",T$L.direction="rtl",T$R._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,T$Z.document.body.appendChild(T$Z.canvas.source);},T$r.supportFont=function(T$L){T$Z.context.font="10px sans-serif";var T$s=T$B.contextMeasureText("abcji").width;T$Z.context.font="10px "+T$L;var T$m=T$B.contextMeasureText("abcji").width;return console.log(T$s,T$m),T$s!==T$m;},T$r._testWord="游",T$r.langPacks=null,T$r.VISIBLE="visible",T$r.SCROLL="scroll",T$r.HIDDEN="hidden",T$r.CharacterCache=!0,T$r.RightToLeft=!1,T$r._bitmapFonts=null,T$F(T$r,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"};}]),T$r;}(T$CL),T$DL=function(T$C){function T$v(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",T$v.__super.call(this),this.offset=new T$f(),this._canvasTransform=new T$c(),this._previousOrientation=T$Z.window.orientation;var T$s=this;this.transform=T$c.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var T$L=T$Z.window,T$m=this;T$L.addEventListener("focus",function(){T$s._isFocused=!0,T$m.event("focus"),T$m.event("focuschange");}),T$L.addEventListener("blur",function(){T$s._isFocused=!1,T$m.event("blur"),T$m.event("focuschange"),T$m._isInputting()&&(T$HL.inputElement.target.focus=!1);});var T$x="visibilityState",T$w="visibilitychange",T$O=T$L.document;void 0!==T$O.hidden?(T$w="visibilitychange",T$x="visibilityState"):void 0!==T$O.mozHidden?(T$w="mozvisibilitychange",T$x="mozVisibilityState"):void 0!==T$O.msHidden?(T$w="msvisibilitychange",T$x="msVisibilityState"):void 0!==T$O.webkitHidden&&(T$w="webkitvisibilitychange",T$x="webkitVisibilityState"),T$L.document.addEventListener(T$w,function(){"hidden"==T$Z.document[T$x]?T$m._setStageVisible(!1):T$m._setStageVisible(!0);}),T$L.document.addEventListener("qbrowserVisibilityChange",function(T$L){T$m._setStageVisible(!T$L.hidden);}),T$L.addEventListener("resize",function(){var T$L=T$Z.window.orientation;null!=T$L&&T$L!=T$s._previousOrientation&&T$m._isInputting()&&(T$HL.inputElement.target.focus=!1),T$s._previousOrientation=T$L,T$m._isInputting()||T$m._resetCanvas();}),T$L.addEventListener("orientationchange",function(T$L){T$m._resetCanvas();}),this.on("mousemove",this,this._onmouseMove),T$Z.onMobile&&this.on("mousedown",this,this._onmouseMove);}T$V(T$v,"laya.display.Stage",T$C);var T$L=T$v.prototype;return T$L._setStageVisible=function(T$L){this._isVisibility!=T$L&&(this._isVisibility=T$L,this._isVisibility||this._isInputting()&&(T$HL.inputElement.target.focus=!1),this.event("visibilitychange"));},T$L._isInputting=function(){return T$Z.onMobile&&T$HL.isInputting;},T$L._changeCanvasSize=function(){this.setScreenSize(T$Z.clientWidth*T$Z.pixelRatio,T$Z.clientHeight*T$Z.pixelRatio);},T$L._resetCanvas=function(){if(this.screenAdaptationEnabled){var T$L=T$R._mainCanvas;T$L.source.style;T$L.size(1,1),T$a.timer.once(100,this,this._changeCanvasSize);}},T$L.setScreenSize=function(T$L,T$s){var T$m=!1;if("none"!==this._screenMode&&(T$m=(T$L/T$s<1?"vertical":"horizontal")!==this._screenMode)){var T$x=T$s;T$s=T$L,T$L=T$x;}this.canvasRotation=T$m;var T$w=T$R._mainCanvas,T$O=T$w.source.style,T$v=this._canvasTransform.identity(),T$y=this._scaleMode,T$F=T$L/this.designWidth,T$o=T$s/this.designHeight,T$V=this.designWidth,T$C=this.designHeight,T$E=T$L,T$r=T$s,T$u=T$Z.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,T$y){case"noscale":T$F=T$o=1,T$E=this.designWidth,T$r=this.designHeight;break;case"showall":T$F=T$o=Math.min(T$F,T$o),T$V=T$E=Math.round(this.designWidth*T$F),T$C=T$r=Math.round(this.designHeight*T$o);break;case"noborder":T$F=T$o=Math.max(T$F,T$o),T$E=Math.round(this.designWidth*T$F),T$r=Math.round(this.designHeight*T$o);break;case"full":T$F=T$o=1,this._width=T$V=T$L,this._height=T$C=T$s;break;case"fixedwidth":T$o=T$F,this._height=T$C=Math.round(T$s/T$F);break;case"fixedheight":T$F=T$o,this._width=T$V=Math.round(T$L/T$o);break;case"fixedauto":T$L/T$s<this.designWidth/this.designHeight?(T$o=T$F,this._height=T$C=Math.round(T$s/T$F)):(T$F=T$o,this._width=T$V=Math.round(T$L/T$o));}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,T$V=T$V+1&2147483646,T$C=T$C+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),T$F*=this.scaleX,T$o*=this.scaleY,1===T$F&&1===T$o?this.transform.identity():(this.transform.a=this._formatData(T$F/(T$E/T$V)),this.transform.d=this._formatData(T$o/(T$r/T$C)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),T$w.size(T$V,T$C),T$U.changeWebGLSize(T$V,T$C),T$v.scale(T$E/T$V/T$u,T$r/T$C/T$u),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(T$L-T$E)/T$u:this.offset.x=.5*(T$L-T$E)/T$u,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(T$s-T$r)/T$u:this.offset.y=.5*(T$s-T$r)/T$u,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),T$v.translate(this.offset.x,this.offset.y),this.canvasDegree=0,T$m&&("horizontal"===this._screenMode?(T$v.rotate(Math.PI/2),T$v.translate(T$s/T$u,0),this.canvasDegree=90):(T$v.rotate(-Math.PI/2),T$v.translate(0,T$L/T$u),this.canvasDegree=-90)),T$v.a=this._formatData(T$v.a),T$v.d=this._formatData(T$v.d),T$v.tx=this._formatData(T$v.tx),T$v.ty=this._formatData(T$v.ty),T$O.transformOrigin=T$O.webkitTransformOrigin=T$O.msTransformOrigin=T$O.mozTransformOrigin=T$O.oTransformOrigin="0px 0px 0px",T$O.transform=T$O.webkitTransform=T$O.msTransform=T$O.mozTransform=T$O.oTransform="matrix("+T$v.toString()+")",T$v.translate(parseInt(T$O.left)||0,parseInt(T$O.top)||0),this.visible=!0,this._repaint=1,this.event("resize");},T$L._formatData=function(T$L){return Math.abs(T$L)<1e-6?0:Math.abs(1-T$L)<.001?0<T$L?1:-1:T$L;},T$L.getMousePoint=function(){return T$f.TEMP.setTo(this.mouseX,this.mouseY);},T$L.repaint=function(){this._repaint=1;},T$L.parentRepaint=function(){},T$L._loop=function(){return this.render(T$R.context,0,0),!0;},T$L._onmouseMove=function(T$L){this._mouseMoveTime=T$Z.now();},T$L.getTimeFromFrameStart=function(){return T$Z.now()-this._frameStartTime;},T$L.render=function(T$L,T$s,T$m){if("sleep"===this._frameRate&&!T$R.isConchApp){var T$x=T$Z.now();if(!(1e3<=T$x-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(T$K.loopCount++,T$T.instance.runEvent(),T$a.timer._update()));this._frameStartTime=T$x;}if(this._renderCount++,T$R.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=T$Z.now();var T$w="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),T$O=this._renderCount%2==0;if(T$K.renderSlow=!T$w,T$w||T$O||T$R.isConchApp){var T$v;T$K.loopCount++,T$T.instance.runEvent(),T$a.timer._update(),T$U.update3DLoop();var T$y=0,T$F=0;if(T$R.isConchNode)for(T$y=0,T$F=this._scenes.length;T$y<T$F;T$y++)(T$v=this._scenes[T$y])&&T$v._updateSceneConch();else for(T$y=0,T$F=this._scenes.length;T$y<T$F;T$y++)(T$v=this._scenes[T$y])&&T$v._updateScene();if(T$R.isConchNode){var T$o=T$CL.CustomList;for(T$y=0,T$F=T$o.length;T$y<T$F;T$y++){var T$V=T$o[T$y];T$V.customRender(T$V.customContext,0,0);}return;}}T$R.isConchNode||this.renderingEnabled&&(T$w||!T$O||T$R.isConchWebGL)&&(T$R.isWebGL?T$R.WebGL.mainContext&&!T$R.WebGL.mainContext.isContextLost()&&(T$L.clear(),T$C.prototype.render.call(this,T$L,T$s,T$m),T$K._show&&T$K._sp&&T$K._sp.render(T$L,T$s,T$m),T$U.clear(this._bgColor),T$U.beginFlush(),T$L.flush(),T$U.endFinish(),T$M.instance&&T$M.getInstance().endDispose()):(T$U.clear(this._bgColor),T$C.prototype.render.call(this,T$L,T$s,T$m),T$K._show&&T$K._sp&&T$K._sp.render(T$L,T$s,T$m)));}else this._renderCount%5==0&&(T$K.loopCount++,T$T.instance.runEvent(),T$a.timer._update());},T$L._requestFullscreen=function(){var T$L=T$Z.document.documentElement;T$L.requestFullscreen?T$L.requestFullscreen():T$L.mozRequestFullScreen?T$L.mozRequestFullScreen():T$L.webkitRequestFullscreen?T$L.webkitRequestFullscreen():T$L.msRequestFullscreen&&T$L.msRequestFullscreen();},T$L._fullScreenChanged=function(){T$a.stage.event("fullscreenchange");},T$L.exitFullscreen=function(){var T$L=T$Z.document;T$L.exitFullscreen?T$L.exitFullscreen():T$L.mozCancelFullScreen?T$L.mozCancelFullScreen():T$L.webkitExitFullscreen&&T$L.webkitExitFullscreen();},T$u(0,T$L,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1;}),T$u(0,T$L,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight;}),T$u(0,T$L,"frameRate",function(){return this._frameRate;},function(T$L){if(this._frameRate=T$L,T$R.isConchApp)switch(this._frameRate){case"slow":T$Z.window.conch&&T$Z.window.conchConfig.setSlowFrame&&T$Z.window.conchConfig.setSlowFrame(!0);break;case"fast":T$Z.window.conch&&T$Z.window.conchConfig.setSlowFrame&&T$Z.window.conchConfig.setSlowFrame(!1);break;case"mouse":T$Z.window.conch&&T$Z.window.conchConfig.setMouseFrame&&T$Z.window.conchConfig.setMouseFrame(2e3);break;case"sleep":T$Z.window.conch&&T$Z.window.conchConfig.setLimitFPS&&T$Z.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.");}}),T$u(0,T$L,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1;}),T$u(0,T$L,"width",T$C.prototype._$get_width,function(T$L){this.designWidth=T$L,T$a.superSet(T$CL,this,"width",T$L),T$a.timer.callLater(this,this._changeCanvasSize);}),T$u(0,T$L,"alignH",function(){return this._alignH;},function(T$L){this._alignH=T$L,T$a.timer.callLater(this,this._changeCanvasSize);}),T$u(0,T$L,"isFocused",function(){return this._isFocused;}),T$u(0,T$L,"height",T$C.prototype._$get_height,function(T$L){this.designHeight=T$L,T$a.superSet(T$CL,this,"height",T$L),T$a.timer.callLater(this,this._changeCanvasSize);}),T$u(0,T$L,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||T$c.create();},T$C.prototype._$set_transform),T$u(0,T$L,"isVisibility",function(){return this._isVisibility;}),T$u(0,T$L,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth;}),T$u(0,T$L,"scaleMode",function(){return this._scaleMode;},function(T$L){this._scaleMode=T$L,T$a.timer.callLater(this,this._changeCanvasSize);}),T$u(0,T$L,"alignV",function(){return this._alignV;},function(T$L){this._alignV=T$L,T$a.timer.callLater(this,this._changeCanvasSize);}),T$u(0,T$L,"bgColor",function(){return this._bgColor;},function(T$L){this._bgColor=T$L,this.conchModel&&this.conchModel.bgColor(T$L),T$R.isWebGL&&(T$L?T$v._wgColor=T$I.create(T$L)._color:T$Z.onMiniGame||(T$v._wgColor=null)),T$Z.onLimixiu?T$v._wgColor=T$I.create(T$L)._color:T$R.canvas.style.background=T$L||"none";}),T$u(0,T$L,"mouseX",function(){return Math.round(T$T.instance.mouseX/this.clientScaleX);}),T$u(0,T$L,"mouseY",function(){return Math.round(T$T.instance.mouseY/this.clientScaleY);}),T$u(0,T$L,"screenMode",function(){return this._screenMode;},function(T$L){this._screenMode=T$L;}),T$u(0,T$L,"visible",T$C.prototype._$get_visible,function(T$L){this.visible!==T$L&&(T$a.superSet(T$CL,this,"visible",T$L),T$R._mainCanvas.source.style.visibility=T$L?"visible":"hidden");}),T$u(0,T$L,"fullScreenEnabled",null,function(T$L){var T$s=T$Z.document,T$m=T$R.canvas;T$L?(T$m.addEventListener("mousedown",this._requestFullscreen),T$m.addEventListener("touchstart",this._requestFullscreen),T$s.addEventListener("fullscreenchange",this._fullScreenChanged),T$s.addEventListener("mozfullscreenchange",this._fullScreenChanged),T$s.addEventListener("webkitfullscreenchange",this._fullScreenChanged),T$s.addEventListener("msfullscreenchange",this._fullScreenChanged)):(T$m.removeEventListener("mousedown",this._requestFullscreen),T$m.removeEventListener("touchstart",this._requestFullscreen),T$s.removeEventListener("fullscreenchange",this._fullScreenChanged),T$s.removeEventListener("mozfullscreenchange",this._fullScreenChanged),T$s.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),T$s.removeEventListener("msfullscreenchange",this._fullScreenChanged));}),T$v.SCALE_NOSCALE="noscale",T$v.SCALE_EXACTFIT="exactfit",T$v.SCALE_SHOWALL="showall",T$v.SCALE_NOBORDER="noborder",T$v.SCALE_FULL="full",T$v.SCALE_FIXED_WIDTH="fixedwidth",T$v.SCALE_FIXED_HEIGHT="fixedheight",T$v.SCALE_FIXED_AUTO="fixedauto",T$v.ALIGN_LEFT="left",T$v.ALIGN_RIGHT="right",T$v.ALIGN_CENTER="center",T$v.ALIGN_TOP="top",T$v.ALIGN_MIDDLE="middle",T$v.ALIGN_BOTTOM="bottom",T$v.SCREEN_NONE="none",T$v.SCREEN_HORIZONTAL="horizontal",T$v.SCREEN_VERTICAL="vertical",T$v.FRAME_FAST="fast",T$v.FRAME_SLOW="slow",T$v.FRAME_MOUSE="mouse",T$v.FRAME_SLEEP="sleep",T$v.FRAME_MOUSE_THREDHOLD=2e3,T$F(T$v,["_wgColor",function(){return this._wgColor=[0,0,0,1];}]),T$v;}(T$CL),T$eL=(function(T$L){function T$s(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,T$s.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange);}T$V(T$s,"laya.media.SoundNode",T$CL);var T$m=T$s.prototype;T$m._onParentChange=function(){this.target=this.parent;},T$m.play=function(T$L,T$s){void 0===T$L&&(T$L=1),isNaN(T$L)&&(T$L=1),this.url&&(this.stop(),this._channel=T$i.playSound(this.url,T$L,null,T$s));},T$m.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null;},T$m._setPlayAction=function(T$L,T$s,T$m,T$x){void 0===T$x&&(T$x=!0),this[T$m]&&T$L&&(T$x?T$L.on(T$s,this,this[T$m]):T$L.off(T$s,this,this[T$m]));},T$m._setPlayActions=function(T$L,T$s,T$m,T$x){if(void 0===T$x&&(T$x=!0),T$L&&T$s){var T$w,T$O=T$s.split(","),T$v=0;for(T$w=T$O.length,T$v=0;T$v<T$w;T$v++)this._setPlayAction(T$L,T$O[T$v],T$m,T$x);}},T$u(0,T$m,"playEvent",null,function(T$L){(this._playEvents=T$L)&&this._tar&&this._setPlayActions(this._tar,T$L,"play");}),T$u(0,T$m,"target",null,function(T$L){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=T$L,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0));}),T$u(0,T$m,"stopEvent",null,function(T$L){(this._stopEvents=T$L)&&this._tar&&this._setPlayActions(this._tar,T$L,"stop");});}(),function(T$L){function T$s(){this._src=null,this._onload=null,this._onerror=null,T$s.__super.call(this);}T$V(T$s,"laya.resource.FileBitmap",T$uL);var T$m=T$s.prototype;return T$u(0,T$m,"src",function(){return this._src;},function(T$L){this._src=T$L;}),T$u(0,T$m,"onload",null,function(T$L){}),T$u(0,T$m,"onerror",null,function(T$L){}),T$s;}()),T$bL=function(T$L){function T$m(T$L,T$s){this._is2D=!1,T$m.__super.call(this);var T$x=this;if(this._source=this,"2D"===T$L||"AUTO"===T$L&&!T$R.isWebGL){this._is2D=!0,this._source=T$s||T$Z.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var T$w=this;T$w.getContext=function(T$L,T$s){if(T$x._ctx)return T$x._ctx;var T$m=T$x._ctx=T$x._source.getContext(T$L,T$s);return T$m&&(T$m._canvas=T$w,T$R.isFlash||T$Z.onLimixiu||(T$m.size=function(T$L,T$s){})),T$m;};}this.uri="HTMLCanvas_"+this.id,this.lock=!0;}T$V(T$m,"laya.resource.HTMLCanvas",T$uL);var T$s=T$m.prototype;return T$s.clear=function(){this._ctx&&this._ctx.clear();},T$s.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this);},T$s.release=function(){},T$s._setContext=function(T$L){this._ctx=T$L;},T$s.getContext=function(T$L,T$s){return this._ctx?this._ctx:this._ctx=T$m._createContext(this);},T$s.getMemSize=function(){return 0;},T$s.size=function(T$L,T$s){(this._w!=T$L||this._h!=T$s||this._source&&(this._source.width!=T$L||this._source.height!=T$s))&&(this._w=T$L,this._h=T$s,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(T$L,T$s),this._source&&(this._source.height=T$s,this._source.width=T$L));},T$s.getCanvas=function(){return this._source;},T$s.toBase64=function(T$L,T$s,T$m){if(this._source)if(T$R.isConchApp&&this._source.toBase64)this._source.toBase64(T$L,T$s,T$m);else{var T$x=this._source.toDataURL(T$L,T$s);T$m.call(this,T$x);}},T$u(0,T$s,"context",function(){return this._ctx;}),T$u(0,T$s,"asBitmap",null,function(T$L){}),T$m.create=function(T$L,T$s){return new T$m(T$L,T$s);},T$m.TYPE2D="2D",T$m.TYPE3D="3D",T$m.TYPEAUTO="AUTO",T$m._createContext=null,T$m;}(),T$SL=(function(T$L){function T$F(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){throw T$F.__super.call(this),new Error("不允许new！");}T$V(T$F,"laya.resource.HTMLSubImage",T$uL),T$F.create=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){return void 0===T$y&&(T$y=!1),new T$F(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y);};}(),function(T$L){function T$C(){this._frames=null,this._url=null,T$C.__super.call(this),this._setControlNode(this);}T$V(T$C,"laya.display.Animation",T$L);var T$s=T$C.prototype;T$s.destroy=function(T$L){void 0===T$L&&(T$L=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,T$L),this._frames=null,this._labels=null;},T$s.play=function(T$L,T$s,T$m,T$x){void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=!0),void 0===T$m&&(T$m=""),void 0===T$x&&(T$x=!0),T$m&&this._setFramesFromCache(T$m,T$x),this._isPlaying=!0,this.index="string"==typeof T$L?this._getFrameByLabel(T$L):T$L,this.loop=T$s,this._actionName=T$m,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0);},T$s._setFramesFromCache=function(T$L,T$s){var T$m;return void 0===T$s&&(T$s=!1),this._url&&(T$L=this._url+"#"+T$L),T$L&&T$C.framesMap[T$L]?((T$m=T$C.framesMap[T$L])instanceof Array?(this._frames=T$C.framesMap[T$L],this._count=this._frames.length):(T$m.nodeRoot&&(T$C.framesMap[T$L]=this._parseGraphicAnimationByData(T$m),T$m=T$C.framesMap[T$L]),this._frames=T$m.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=T$m.interval),this._labels=this._copyLabels(T$m.labels)),!0):(T$s&&console.log("ani not found:",T$L),!1);},T$s._copyLabels=function(T$L){if(!T$L)return null;var T$s,T$m;for(T$m in T$s={},T$L)T$s[T$m]=T$B.copyArray([],T$L[T$m]);return T$s;},T$s._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&T$L.prototype._frameLoop.call(this);},T$s._displayToIndex=function(T$L){this._frames&&(this.graphics=this._frames[T$L]);},T$s.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null;},T$s.loadImages=function(T$L,T$s){return void 0===T$s&&(T$s=""),this._url="",this._setFramesFromCache(T$s)||(this.frames=T$C.framesMap[T$s]?T$C.framesMap[T$s]:T$C.createFrames(T$L,T$s)),this;},T$s.loadAtlas=function(T$s,T$m,T$x){void 0===T$x&&(T$x=""),this._url="";var T$w=this;function T$L(T$L){T$s===T$L&&(T$w.frames=T$C.framesMap[T$x]?T$C.framesMap[T$x]:T$C.createFrames(T$s,T$x),T$m&&T$m.run());}return T$w._setFramesFromCache(T$x)||(T$yL.getAtlas(T$s)?T$L(T$s):T$a.loader.load(T$s,T$e.create(null,T$L,[T$s]),null,"atlas")),this;},T$s.loadAnimation=function(T$L,T$s,T$m){this._url=T$L;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,T$s&&T$s.run()):!T$m||T$yL.getAtlas(T$m)?this._loadAnimationData(T$L,T$s,T$m):T$a.loader.load(T$m,T$e.create(this,this._loadAnimationData,[T$L,T$s,T$m]),null,"atlas"),this;},T$s._loadAnimationData=function(T$y,T$F,T$L){var T$o=this;if(!T$L||T$yL.getAtlas(T$L)){var T$V=this;T$yL.getRes(T$y)?T$s(T$y):T$a.loader.load(T$y,T$e.create(null,T$s,[T$y]),null,"json"),T$yL.clearRes(T$y);}else console.warn("atlas load fail:"+T$L);function T$s(T$L){if(T$yL.getRes(T$L)&&T$y===T$L){var T$s;if(T$C.framesMap[T$y+"#"])T$V._setFramesFromCache(T$o._actionName,!0),T$o.index=0,T$o._checkResumePlaying();else{var T$m=T$V._parseGraphicAnimation(T$yL.getRes(T$y));if(!T$m)return;var T$x,T$w=T$m.animationList,T$O=0,T$v=T$w.length;for(T$O=0;T$O<T$v;T$O++)T$s=T$w[T$O],T$C.framesMap[T$y+"#"+T$s.name]=T$s,T$x||(T$x=T$s);T$x&&(T$C.framesMap[T$y+"#"]=T$x,T$V._setFramesFromCache(T$o._actionName,!0),T$o.index=0),T$o._checkResumePlaying();}T$F&&T$F.run();}}},T$s._parseGraphicAnimation=function(T$L){return T$aL.parseAnimationData(T$L);},T$s._parseGraphicAnimationByData=function(T$L){return T$aL.parseAnimationByData(T$L);},T$u(0,T$s,"frames",function(){return this._frames;},function(T$L){(this._frames=T$L)&&(this._count=T$L.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index);}),T$u(0,T$s,"autoPlay",null,function(T$L){T$L?this.play():this.stop();}),T$u(0,T$s,"source",null,function(T$L){-1<T$L.indexOf(".ani")?this.loadAnimation(T$L):-1<T$L.indexOf(".json")||-1<T$L.indexOf("als")||-1<T$L.indexOf("atlas")?this.loadAtlas(T$L):this.loadImages(T$L.split(","));}),T$u(0,T$s,"autoAnimation",null,function(T$L){this.play(0,!0,T$L,!1);}),T$C.createFrames=function(T$L,T$s){var T$m,T$x,T$w=0,T$O=0;if("string"==typeof T$L){var T$v=T$yL.getAtlas(T$L);if(T$v&&T$v.length)for(T$m=[],T$w=0,T$O=T$v.length;T$w<T$O;T$w++)(T$x=new T$U.createGraphics()).drawTexture(T$yL.getRes(T$v[T$w]),0,0),T$m.push(T$x);}else if(T$L instanceof Array)for(T$m=[],T$w=0,T$O=T$L.length;T$w<T$O;T$w++)(T$x=new T$U.createGraphics()).loadImage(T$L[T$w],0,0),T$m.push(T$x);return T$s&&(T$C.framesMap[T$s]=T$m),T$m;},T$C.clearCache=function(T$L){var T$s,T$m=T$C.framesMap,T$x=T$L+"#";for(T$s in T$m)T$s!==T$L&&0!=T$s.indexOf(T$x)||delete T$C.framesMap[T$s];},T$C.framesMap={};}(T$TL),function(T$L){function T$O(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,T$O.__super.call(this),null==T$O._sortIndexFun&&(T$O._sortIndexFun=T$Y.sortByKey("index",!1,!0));}T$V(T$O,"laya.display.FrameAnimation",T$L);var T$s=T$O.prototype;return T$s._setUp=function(T$L,T$s){this._labels=null,this._animationNewFrames=null,this._targetDic=T$L,this._animationData=T$s,this.interval=1e3/T$s.frameRate,T$s.parsed?(this._count=T$s.count,this._labels=T$s.labels,this._animationNewFrames=T$s.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),T$s.parsed=!0,T$s.labels=this._labels,T$s.count=this._count,T$s.animationNewFrames=this._animationNewFrames;},T$s.clear=function(){T$L.prototype.clear.call(this),this._targetDic=null,this._animationData=null;},T$s._displayToIndex=function(T$L){if(this._animationData){T$L<0&&(T$L=0),T$L>this._count&&(T$L=this._count);var T$s=this._animationData.nodes,T$m=0,T$x=T$s.length;for(T$m=0;T$m<T$x;T$m++)this._displayNodeToFrame(T$s[T$m],T$L);}},T$s._displayNodeToFrame=function(T$L,T$s,T$m){T$m||(T$m=this._targetDic);var T$x=T$m[T$L.target];if(T$x){var T$w,T$O,T$v,T$y=T$L.frames,T$F=T$L.keys,T$o=0,T$V=T$F.length;for(T$o=0;T$o<T$V;T$o++)T$v=(T$O=T$y[T$w=T$F[T$o]]).length>T$s?T$O[T$s]:T$O[T$O.length-1],T$x[T$w]=T$v;}},T$s._calculateDatas=function(){if(this._animationData){var T$L,T$s=this._animationData.nodes,T$m=0,T$x=T$s.length;for(T$m=this._count=0;T$m<T$x;T$m++)T$L=T$s[T$m],this._calculateNodeKeyFrames(T$L);this._count+=1;}},T$s._calculateNodeKeyFrames=function(T$L){var T$s,T$m,T$x=T$L.keyframes,T$w=T$L.target;for(T$s in T$L.frames||(T$L.frames={}),T$L.keys?T$L.keys.length=0:T$L.keys=[],T$L.initValues||(T$L.initValues={}),T$x)T$m=T$x[T$s],T$L.frames[T$s]||(T$L.frames[T$s]=[]),this._targetDic&&this._targetDic[T$w]&&(T$L.initValues[T$s]=this._targetDic[T$w][T$s]),T$m.sort(T$O._sortIndexFun),T$L.keys.push(T$s),this._calculateNodePropFrames(T$m,T$L.frames[T$s],T$s,T$w);},T$s.resetToInitState=function(){if(this._targetDic&&this._animationData){var T$L,T$s,T$m=this._animationData.nodes,T$x=0,T$w=T$m.length;for(T$x=0;T$x<T$w;T$x++)if(T$s=(T$L=T$m[T$x]).initValues){var T$O,T$v=this._targetDic[T$L.target];if(T$v)for(T$O in T$s)T$v[T$O]=T$s[T$O];}}},T$s._calculateNodePropFrames=function(T$L,T$s,T$m,T$x){var T$w=0,T$O=T$L.length-1;if(0<T$O){for(T$s.length=T$L[T$O].index+1,T$w=0;T$w<T$O;T$w++)this._dealKeyFrame(T$L[T$w]),this._calculateFrameValues(T$L[T$w],T$L[T$w+1],T$s);this._dealKeyFrame(T$L[T$w]);}0==T$O&&(T$s[T$L[0].index]=T$L[0].value,this._animationNewFrames&&(this._animationNewFrames[T$L[0].index]=!0));},T$s._dealKeyFrame=function(T$L){T$L.label&&""!=T$L.label&&this.addLabel(T$L.label,T$L.index);},T$s._calculateFrameValues=function(T$L,T$s,T$m){var T$x,T$w=0,T$O=T$L.index,T$v=T$s.index,T$y=T$L.value,T$F=T$s.value-T$L.value,T$o=T$v-T$O;if(T$v>this._count&&(this._count=T$v),T$L.tween)for(null==(T$x=T$J[T$L.tweenMethod])&&(T$x=T$J.linearNone),T$w=T$O;T$w<T$v;T$w++)T$m[T$w]=T$x(T$w-T$O,T$y,T$F,T$o),this._animationNewFrames&&(this._animationNewFrames[T$w]=!0);else for(T$w=T$O;T$w<T$v;T$w++)T$m[T$w]=T$y;this._animationNewFrames&&(this._animationNewFrames[T$L.index]=!0,this._animationNewFrames[T$s.index]=!0),T$m[T$s.index]=T$s.value;},T$O._sortIndexFun=null,T$O;}(T$TL)),T$HL=function(T$s){function T$w(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",T$w.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=T$jL.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay);}T$V(T$w,"laya.display.Input",T$s);var T$L=T$w.prototype;return T$L.setSelection=function(T$L,T$s){this.focus=!0,laya.display.Input.inputElement.selectionStart=T$L,laya.display.Input.inputElement.selectionEnd=T$s;},T$L._onUnDisplay=function(T$L){this.focus=!1;},T$L._onMouseDown=function(T$L){this.focus=!0;},T$L._syncInputTransform=function(){var T$L=this.nativeInput,T$s=T$B.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),T$m=this._width-this.padding[1]-this.padding[3],T$x=this._height-this.padding[0]-this.padding[2];T$R.isConchApp?(T$L.setScale(T$s.scaleX,T$s.scaleY),T$L.setSize(T$m,T$x),T$L.setPos(T$s.x,T$s.y)):(T$w.inputContainer.style.transform=T$w.inputContainer.style.webkitTransform="scale("+T$s.scaleX+","+T$s.scaleY+") rotate("+T$a.stage.canvasDegree+"deg)",T$L.style.width=T$m+"px",T$L.style.height=T$x+"px",T$w.inputContainer.style.left=T$s.x+"px",T$w.inputContainer.style.top=T$s.y+"px");},T$L.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select();},T$L._setInputMethod=function(){T$w.input.parentElement&&T$w.inputContainer.removeChild(T$w.input),T$w.area.parentElement&&T$w.inputContainer.removeChild(T$w.area),T$w.inputElement=this._multiline?T$w.area:T$w.input,T$w.inputContainer.appendChild(T$w.inputElement),T$jL.RightToLeft&&(T$w.inputElement.style.direction="rtl");},T$L._focusIn=function(){laya.display.Input.isInputting=!0;var T$L=this.nativeInput;this._focus=!0;var T$s=T$L.style;T$s.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),T$L.readOnly=!this._editable,T$R.isConchApp&&(T$L.setType(this._type),T$L.setForbidEdit(!this._editable)),T$L.maxLength=this._maxChars;this.padding;if(T$L.type=this._type,T$L.value=this._content,T$L.placeholder=this._prompt,T$a.stage.off("keydown",this,this._onKeyDown),T$a.stage.on("keydown",this,this._onKeyDown),(T$a.stage.focus=this).event("focus"),T$Z.onPC&&T$L.focus(),!T$Z.onMiniGame){this._text;this._text=null;}this.typeset(),T$L.setColor(this._originColor),T$L.setFontSize(this.fontSize),T$L.setFontFace(T$Z.onIPhone&&T$jL._fontFamilyMap[this.font]||this.font),T$R.isConchApp&&T$L.setMultiAble&&T$L.setMultiAble(this._multiline),T$s.lineHeight=this.leading+this.fontSize+"px",T$s.fontStyle=this.italic?"italic":"normal",T$s.fontWeight=this.bold?"bold":"normal",T$s.textAlign=this.align,T$s.padding="0 0",this._syncInputTransform(),!T$R.isConchApp&&T$Z.onPC&&T$a.timer.frameLoop(1,this,this._syncInputTransform);},T$L._setPromptColor=function(){(T$w.promptStyleDOM=T$Z.getElementById("promptStyle"))||((T$w.promptStyleDOM=T$Z.createElement("style")).setAttribute("id","promptStyle"),T$Z.document.head.appendChild(T$w.promptStyleDOM)),T$w.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}";},T$L._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(T$a.superSet(T$jL,this,"text",this._content),T$a.superSet(T$jL,this,"color",this._originColor)):(T$a.superSet(T$jL,this,"text",this._prompt),T$a.superSet(T$jL,this,"color",this._promptColor)),T$a.stage.off("keydown",this,this._onKeyDown),T$a.stage.focus=null,this.event("blur"),T$R.isConchApp&&this.nativeInput.blur(),T$Z.onPC&&T$a.timer.clear(this,this._syncInputTransform);},T$L._onKeyDown=function(T$L){13===T$L.keyCode&&(T$Z.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"));},T$L.changeText=function(T$L){this._content=T$L,this._focus?(this.nativeInput.value=T$L||"",this.event("change")):T$s.prototype.changeText.call(this,T$L);},T$u(0,T$L,"color",T$s.prototype._$get_color,function(T$L){this._focus&&this.nativeInput.setColor(T$L),T$a.superSet(T$jL,this,"color",this._content?T$L:this._promptColor),this._originColor=T$L;}),T$u(0,T$L,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0;},function(T$L){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。");}),T$u(0,T$L,"multiline",function(){return this._multiline;},function(T$L){this._multiline=T$L,this.valign=T$L?"top":"middle";}),T$u(0,T$L,"maxChars",function(){return this._maxChars;},function(T$L){T$L<=0&&(T$L=1e5),this._maxChars=T$L;}),T$u(0,T$L,"text",function(){return this._focus?this.nativeInput.value:this._content||"";},function(T$L){T$a.superSet(T$jL,this,"color",this._originColor),T$L+="",this._focus?(this.nativeInput.value=T$L||"",this.event("change")):(this._multiline||(T$L=T$L.replace(/\r?\n/g,"")),(this._content=T$L)?T$a.superSet(T$jL,this,"text",T$L):(T$a.superSet(T$jL,this,"text",this._prompt),T$a.superSet(T$jL,this,"color",this.promptColor)));}),T$u(0,T$L,"nativeInput",function(){return this._multiline?T$w.area:T$w.input;}),T$u(0,T$L,"prompt",function(){return this._prompt;},function(T$L){!this._text&&T$L&&T$a.superSet(T$jL,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?T$a.superSet(T$jL,this,"text",this._text==this._prompt?T$L:this._text):T$a.superSet(T$jL,this,"text",T$L),this._prompt=T$jL.langPacks&&T$jL.langPacks[T$L]?T$jL.langPacks[T$L]:T$L;}),T$u(0,T$L,"focus",function(){return this._focus;},function(T$L){var T$s=this.nativeInput;this._focus!==T$L&&(T$L?(T$s.target?T$s.target._focusOut():this._setInputMethod(),(T$s.target=this)._focusIn()):(T$s.target=null,this._focusOut(),T$Z.document.body.scrollTop=0,T$s.blur(),T$R.isConchApp?T$s.setPos(-1e4,-1e4):T$w.inputContainer.contains(T$s)&&T$w.inputContainer.removeChild(T$s)));}),T$u(0,T$L,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:"";},function(T$L){T$L?(-1<(T$L="[^"+T$L+"]").indexOf("^^")&&(T$L=T$L.replace("^^","")),this._restrictPattern=new RegExp(T$L,"g")):this._restrictPattern=null;}),T$u(0,T$L,"editable",function(){return this._editable;},function(T$L){this._editable=T$L,T$R.isConchApp&&T$w.input.setForbidEdit(!T$L);}),T$u(0,T$L,"promptColor",function(){return this._promptColor;},function(T$L){this._promptColor=T$L,this._content||T$a.superSet(T$jL,this,"color",T$L);}),T$u(0,T$L,"type",function(){return this._type;},function(T$L){this._getCSSStyle().password="password"==T$L,this._type=T$L,T$R.isConchApp&&this.nativeInput.setType(T$L);}),T$u(0,T$L,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0;},function(T$L){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。");}),T$u(0,T$L,"asPassword",function(){return this._getCSSStyle().password;},function(T$L){this._getCSSStyle().password=T$L,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0;}),T$w.__init__=function(){T$w._createInputElement(),T$Z.onMobile&&T$R.canvas.addEventListener(T$w.IOS_IFRAME?T$Z.onMiniGame?"touchend":"click":"touchend",T$w._popupInputMethod);},T$w._popupInputMethod=function(T$L){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus();},T$w._createInputElement=function(){T$w._initInput(T$w.area=T$Z.createElement("textarea")),T$w._initInput(T$w.input=T$Z.createElement("input")),(T$w.inputContainer=T$Z.createElement("div")).style.position="absolute",T$w.inputContainer.style.zIndex=1e5,T$Z.container.appendChild(T$w.inputContainer),T$w.inputContainer.setPos=function(T$L,T$s){T$w.inputContainer.style.left=T$L+"px",T$w.inputContainer.style.top=T$s+"px";};},T$w._initInput=function(T$s){var T$L=T$s.style;T$L.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",T$L.resize="none",T$L.backgroundColor="transparent",T$L.border="none",T$L.outline="none",T$L.zIndex=1,T$s.addEventListener("input",T$w._processInputting),T$s.addEventListener("mousemove",T$w._stopEvent),T$s.addEventListener("mousedown",T$w._stopEvent),T$s.addEventListener("touchmove",T$w._stopEvent),T$s.setFontFace=function(T$L){T$s.style.fontFamily=T$L;},T$R.isConchApp||(T$s.setColor=function(T$L){T$s.style.color=T$L;},T$s.setFontSize=function(T$L){T$s.style.fontSize=T$L+"px";});},T$w._processInputting=function(T$L){var T$s=laya.display.Input.inputElement.target;if(T$s){var T$m=laya.display.Input.inputElement.value;T$s._restrictPattern&&(T$m=T$m.replace(/\u2006|\x27/g,""),T$s._restrictPattern.test(T$m)&&(T$m=T$m.replace(T$s._restrictPattern,""),laya.display.Input.inputElement.value=T$m)),T$s._text=T$m,T$s.event("input");}},T$w._stopEvent=function(T$L){"touchmove"==T$L.type&&T$L.preventDefault(),T$L.stopPropagation&&T$L.stopPropagation();},T$w.TYPE_TEXT="text",T$w.TYPE_PASSWORD="password",T$w.TYPE_EMAIL="email",T$w.TYPE_URL="url",T$w.TYPE_NUMBER="number",T$w.TYPE_RANGE="range",T$w.TYPE_DATE="date",T$w.TYPE_MONTH="month",T$w.TYPE_WEEK="week",T$w.TYPE_TIME="time",T$w.TYPE_DATE_TIME="datetime",T$w.TYPE_DATE_TIME_LOCAL="datetime-local",T$w.TYPE_SEARCH="search",T$w.input=null,T$w.area=null,T$w.inputElement=null,T$w.inputContainer=null,T$w.confirmButton=null,T$w.promptStyleDOM=null,T$w.inputHeight=45,T$w.isInputting=!1,T$w.stageMatrix=null,T$F(T$w,["IOS_IFRAME",function(){return this.IOS_IFRAME=T$Z.onIOS&&T$Z.window.top!=T$Z.window.self;}]),T$w;}(T$jL),T$YL=function(T$L){function T$m(T$L,T$s){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,T$m.__super.call(this),T$L&&this._init_(T$L,T$s);}T$V(T$m,"laya.resource.HTMLImage",T$eL);var T$s=T$m.prototype;return T$s._init_=function(T$L,T$s){this._src=T$L,this._source=new T$Z.window.Image(),T$s&&(T$s.onload&&(this.onload=T$s.onload),T$s.onerror&&(this.onerror=T$s.onerror),T$s.onCreate&&T$s.onCreate(this)),0!=T$L.indexOf("data:image")&&(this._source.crossOrigin=""),T$L&&(this._source.src=T$L);},T$s.recreateResource=function(){var T$L=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate();}else{this._recreateLock=!0;var T$s=this;this._source=new T$Z.window.Image(),this._source.crossOrigin="",this._source.onload=function(){if(T$s._needReleaseAgain)return T$s._needReleaseAgain=!1,T$s._source.onload=null,void(T$s._source=null);T$s._source.onload=null,T$s.memorySize=T$L._w*T$L._h*4,T$s._recreateLock=!1,T$s.completeCreate();},this._source.src=this._src;}},T$s.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0);},T$s.onresize=function(){this._w=this._source.width,this._h=this._source.height;},T$u(0,T$s,"onload",null,function(T$L){var T$s=this;this._onload=T$L,this._source&&(this._source.onload=null!=this._onload?function(){T$s.onresize(),T$s._onload();}:null);}),T$u(0,T$s,"onerror",null,function(T$L){var T$s=this;this._onerror=T$L,this._source&&(this._source.onerror=null!=this._onerror?function(){T$s._onerror();}:null);}),T$u(0,T$s,"enableMerageInAtlas",function(){return this._enableMerageInAtlas;},function(T$L){this._enableMerageInAtlas=T$L,T$R.isConchApp&&this._source&&(this._source.enableMerageInAtlas=T$L);}),T$m.create=function(T$L,T$s){return new T$m(T$L,T$s);},T$m;}(),T$aL=(function(T$O){function T$L(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,T$L.__super.call(this);}T$V(T$L,"laya.display.EffectAnimation",T$O);var T$s=T$L.prototype;T$s._onOtherBegin=function(T$L){T$L!=this&&this.stop();},T$s.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction));},T$s._onPlayAction=function(){this.play(0,!1);},T$s.play=function(T$L,T$s,T$m,T$x){void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=!0),void 0===T$m&&(T$m=""),void 0===T$x&&(T$x=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,T$L,T$s,T$m,T$x));},T$s._recordInitData=function(){if(this._aniKeys){var T$L,T$s,T$m=0;for(T$L=this._aniKeys.length,T$m=0;T$m<T$L;T$m++)T$s=this._aniKeys[T$m],this._initData[T$s]=this._target[T$s];}},T$s._displayToIndex=function(T$L){if(this._animationData){T$L<0&&(T$L=0),T$L>this._count&&(T$L=this._count);var T$s=this._animationData.nodes,T$m=0,T$x=T$s.length;for(T$x=1<T$x?1:T$x,T$m=0;T$m<T$x;T$m++)this._displayNodeToFrame(T$s[T$m],T$L);}},T$s._displayNodeToFrame=function(T$L,T$s,T$m){if(this._target){var T$x;T$x=this._target;var T$w,T$O,T$v,T$y,T$F=T$L.frames,T$o=T$L.keys,T$V=0,T$C=T$o.length;T$y=T$L.secondFrames;var T$E,T$r,T$u,T$T,T$j=0;for(T$V=0;T$V<T$C;T$V++)T$O=T$F[T$w=T$o[T$V]],T$v=-1==(T$j=T$y[T$w])?this._initData[T$w]:T$s<T$j?(T$u=(T$r=T$L.keyframes[T$w])[0]).tween?(null==(T$E=T$J[T$u.tweenMethod])&&(T$E=T$J.linearNone),T$T=T$r[1],T$E(T$s,this._initData[T$w],T$T.value-this._initData[T$w],T$T.index)):this._initData[T$w]:T$O.length>T$s?T$O[T$s]:T$O[T$O.length-1],T$x[T$w]=T$v;}},T$s._calculateNodeKeyFrames=function(T$L){T$O.prototype._calculateNodeKeyFrames.call(this,T$L);var T$s,T$m,T$x,T$w=T$L.keyframes;T$L.target;for(T$s in T$x={},T$L.secondFrames=T$x,T$w)(T$m=T$w[T$s]).length<=1?T$x[T$s]=-1:T$x[T$s]=T$m[1].index;},T$u(0,T$s,"target",function(){return this._target;},function(T$L){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=T$L,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent();}),T$u(0,T$s,"playEvent",null,function(T$L){(this._playEvents=T$L)&&this.addEvent();}),T$u(0,T$s,"effectData",null,function(T$L){var T$s;T$L&&(T$s=T$L.animations)&&T$s[0]&&(this._setUp({},T$s[0]),T$s[0].nodes&&T$s[0].nodes[0]&&(this._aniKeys=T$s[0].nodes[0].keys));}),T$u(0,T$s,"effectClass",null,function(T$L){var T$s,T$m;(this._effectClass=T$X.getClass(T$L),this._effectClass)&&(T$s=this._effectClass.uiView)&&(T$m=T$s.animations)&&T$m[0]&&(this._setUp({},T$m[0]),T$m[0].nodes&&T$m[0].nodes[0]&&(this._aniKeys=T$m[0].nodes[0].keys));}),T$L.EffectAnimationBegin="effectanimationbegin";}(T$SL),function(T$s){var T$N;function T$i(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,T$i.__super.call(this);}T$V(T$i,"laya.utils.GraphicAnimation",T$s);var T$L=T$i.prototype;return T$L._parseNodeList=function(T$L){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[T$L.compId]=T$L.props,T$L.compId&&this._nodeList.push(T$L.compId);var T$s=T$L.child;if(T$s){var T$m=0,T$x=T$s.length;for(T$m=0;T$m<T$x;T$m++)this._parseNodeList(T$s[T$m]);}},T$L._calGraphicData=function(T$L){var T$s;if(this._setUp(null,T$L),this._createGraphicData(),this._nodeIDAniDic)for(T$s in this._nodeIDAniDic)this._nodeIDAniDic[T$s]=null;},T$L._createGraphicData=function(){var T$L,T$s=[],T$m=0,T$x=this.count,T$w=this._animationNewFrames;for(T$w||(T$w=[]),T$m=0;T$m<T$x;T$m++)!T$w[T$m]&&T$L||(T$L=this._createFrameGraphic(T$m)),T$s.push(T$L);this._gList=T$s;},T$L._createFrameGraphic=function(T$L){var T$s=T$U.createGraphics();return T$i._rootMatrix||(T$i._rootMatrix=new T$c()),this._updateNodeGraphic(this._rootNode,T$L,T$i._rootMatrix,T$s),T$s;},T$L._updateNodeGraphic=function(T$L,T$s,T$m,T$x,T$w){var T$O;void 0===T$w&&(T$w=1);var T$v,T$y,T$F,T$o=(T$O=this._nodeGDic[T$L.compId]=this._getNodeGraphicData(T$L.compId,T$s,this._nodeGDic[T$L.compId])).alpha*T$w;if(!(T$o<.01)&&(T$O.resultTransform||(T$O.resultTransform=T$c.create()),T$v=T$O.resultTransform,T$c.mul(T$O.transform,T$m,T$v),T$O.skin&&(T$y=this._getTextureByUrl(T$O.skin))&&(T$v._checkTransform()?(T$x.drawTexture(T$y,0,0,T$O.width,T$O.height,T$v,T$o),T$O.resultTransform=null):T$x.drawTexture(T$y,T$v.tx,T$v.ty,T$O.width,T$O.height,null,T$o)),T$F=T$L.child)){var T$V,T$C=0;for(T$V=T$F.length,T$C=0;T$C<T$V;T$C++)this._updateNodeGraphic(T$F[T$C],T$s,T$v,T$x,T$o);}},T$L._updateNoChilds=function(T$L,T$s){if(T$L.skin){var T$m=this._getTextureByUrl(T$L.skin);if(T$m){var T$x=T$L.transform;T$x._checkTransform();!T$x.bTransform?T$s.drawTexture(T$m,T$x.tx,T$x.ty,T$L.width,T$L.height,null,T$L.alpha):T$s.drawTexture(T$m,0,0,T$L.width,T$L.height,T$x.clone(),T$L.alpha);}}},T$L._updateNodeGraphic2=function(T$L,T$s,T$m){var T$x;if(T$x=this._nodeGDic[T$L.compId]=this._getNodeGraphicData(T$L.compId,T$s,this._nodeGDic[T$L.compId]),T$L.child){var T$w=T$x.transform;T$w._checkTransform();var T$O,T$v;T$v=(T$O=!T$w.bTransform)&&(0!=T$w.tx||0!=T$w.ty);var T$y,T$F,T$o;if((T$y=T$w.bTransform||1!=T$x.alpha)&&T$m.save(),1!=T$x.alpha&&T$m.alpha(T$x.alpha),T$O?T$v&&T$m.translate(T$w.tx,T$w.ty):T$m.transform(T$w.clone()),T$F=T$L.child,T$x.skin&&(T$o=this._getTextureByUrl(T$x.skin))&&T$m.drawTexture(T$o,0,0,T$x.width,T$x.height),T$F){var T$V,T$C=0;for(T$V=T$F.length,T$C=0;T$C<T$V;T$C++)this._updateNodeGraphic2(T$F[T$C],T$s,T$m);}T$y?T$m.restore():T$O?T$v&&T$m.translate(-T$w.tx,-T$w.ty):T$m.transform(T$w.clone().invert());}else this._updateNoChilds(T$x,T$m);},T$L._calculateNodeKeyFrames=function(T$L){T$s.prototype._calculateNodeKeyFrames.call(this,T$L),this._nodeIDAniDic[T$L.target]=T$L;},T$L.getNodeDataByID=function(T$L){return this._nodeIDAniDic[T$L];},T$L._getParams=function(T$L,T$s,T$m,T$x){var T$w=T$i._temParam;T$w.length=T$s.length;var T$O=0,T$v=T$s.length;for(T$O=0;T$O<T$v;T$O++)T$w[T$O]=this._getObjVar(T$L,T$s[T$O][0],T$m,T$s[T$O][1],T$x);return T$w;},T$L._getObjVar=function(T$L,T$s,T$m,T$x,T$w){if(T$L.hasOwnProperty(T$s)){var T$O=T$L[T$s];if(T$m>=T$O.length&&(T$m=T$O.length-1),null!=T$L[T$s][T$m])return T$L[T$s][T$m];}return T$w.hasOwnProperty(T$s)?T$w[T$s]:T$x;},T$L._getNodeGraphicData=function(T$L,T$s,T$m){T$m||(T$m=T$N.create()),T$m.transform?T$m.transform.identity():T$m.transform=T$c.create();var T$x=this.getNodeDataByID(T$L);if(!T$x)return T$m;var T$w,T$O,T$v=T$x.frames,T$y=this._getParams(T$v,T$i._drawTextureCmd,T$s,this._nodeDefaultProps[T$L]),T$F=T$y[0],T$o=NaN,T$V=NaN,T$C=T$y[5],T$E=T$y[6],T$r=T$y[13],T$u=T$y[14],T$T=T$y[7],T$j=T$y[8],T$D=T$y[9],T$e=T$y[11],T$b=T$y[12];T$o=T$y[3],T$V=T$y[4],0!=T$o&&0!=T$V||(T$F=null),-1==T$o&&(T$o=0),-1==T$V&&(T$V=0),T$m.skin=T$F,T$m.width=T$o,T$m.height=T$V,T$F&&((T$w=this._getTextureByUrl(T$F))?(T$o||(T$o=T$w.sourceWidth),T$V||(T$V=T$w.sourceHeight)):console.warn("lost skin:",T$F,",you may load pics first")),T$m.alpha=T$y[10],T$O=T$m.transform,0!=T$r&&(T$C=T$r*T$o),0!=T$u&&(T$E=T$u*T$V),0==T$C&&0==T$E||T$O.translate(-T$C,-T$E);var T$S=null;if(T$D||1!==T$T||1!==T$j||T$e||T$b){(T$S=T$i._tempMt).identity(),T$S.bTransform=!0;var T$H=.0174532922222222*(T$D-T$e),T$Y=.0174532922222222*(T$D+T$b),T$a=Math.cos(T$Y),T$f=Math.sin(T$Y),T$_=Math.sin(T$H),T$Q=Math.cos(T$H);T$S.a=T$T*T$a,T$S.b=T$T*T$f,T$S.c=-T$j*T$_,T$S.d=T$j*T$Q,T$S.tx=T$S.ty=0;}return T$S&&(T$O=T$c.mul(T$O,T$S,T$O)),T$O.translate(T$y[1],T$y[2]),T$m;},T$L._getTextureByUrl=function(T$L){return T$yL.getRes(T$L);},T$L.setAniData=function(T$L,T$s){if(T$L.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=T$L,this._parseNodeList(T$L);var T$m,T$x={},T$w=[],T$O=T$L.animations,T$v=0,T$y=T$O.length;for(T$v=0;T$v<T$y;T$v++)if(T$m=T$O[T$v],this._labels=null,(!T$s||T$s==T$m.name)&&T$m){try{this._calGraphicData(T$m);}catch(T$L){console.warn("parse animation fail:"+T$m.name+",empty animation created"),this._gList=[];}var T$F={};T$F.interval=1e3/T$m.frameRate,T$F.frames=this._gList,T$F.labels=this._labels,T$F.name=T$m.name,T$w.push(T$F),T$x[T$m.name]=T$F;}this.animationList=T$w,this.animationDic=T$x;}T$i._temParam.length=0;},T$L.parseByData=function(T$L){var T$s,T$m;T$s=T$L.nodeRoot,T$m=T$L.aniO,delete T$L.nodeRoot,delete T$L.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=T$s,this._parseNodeList(T$s),this._labels=null;try{this._calGraphicData(T$m);}catch(T$L){console.warn("parse animation fail:"+T$m.name+",empty animation created"),this._gList=[];}var T$x=T$L;return T$x.interval=1e3/T$m.frameRate,T$x.frames=this._gList,T$x.labels=this._labels,T$x.name=T$m.name,T$x;},T$L.setUpAniData=function(T$L){if(T$L.animations){var T$s,T$m={},T$x=[],T$w=T$L.animations,T$O=0,T$v=T$w.length;for(T$O=0;T$O<T$v;T$O++)if(T$s=T$w[T$O]){var T$y={};T$y.name=T$s.name,T$y.aniO=T$s,T$y.nodeRoot=T$L,T$x.push(T$y),T$m[T$s.name]=T$y;}this.animationList=T$x,this.animationDic=T$m;}},T$L._clear=function(){var T$L,T$s;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(T$L in this._nodeGDic)(T$s=this._nodeGDic[T$L])&&T$s.recover();this._nodeGDic=null;},T$i.parseAnimationByData=function(T$L){var T$s;return T$i._I||(T$i._I=new T$i()),T$s=T$i._I.parseByData(T$L),T$i._I._clear(),T$s;},T$i.parseAnimationData=function(T$L){var T$s;return T$i._I||(T$i._I=new T$i()),T$i._I.setUpAniData(T$L),(T$s={}).animationList=T$i._I.animationList,T$s.animationDic=T$i._I.animationDic,T$i._I._clear(),T$s;},T$i._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],T$i._temParam=[],T$i._I=null,T$i._rootMatrix=null,T$F(T$i,["_tempMt",function(){return this._tempMt=new T$c();}]),T$i.__init$=function(){T$N=function(){function T$L(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1;}return T$V(T$L,""),T$L.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),T$q.recover("GraphicNode",this);},T$L.create=function(){return T$q.getItemByClass("GraphicNode",T$L);},T$L;}();},T$i;}(T$SL));T$a.__init([T$o,T$FL,T$R,T$Z,T$P,T$Q,T$L,T$aL]);}(window,document,Laya),function(T$L,T$s,T$m){T$m.un,T$m.uns,T$m.static;var T$x=T$m.class;T$m.getset,T$m.__newvec;new(function(){function T$L(){}return T$x(T$L,"LayaMain"),T$L;}())();}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$L,T$s){"use strict";for(var T$m in Object.defineProperty(T$s,"__esModule",{value:!0}),Laya){var T$x=Laya[T$m];T$x&&T$x.__isclass&&(T$s[T$m]=T$x);}}),function(T$L,T$s,T$Y){T$Y.un,T$Y.uns;var T$v=T$Y.static,T$E=T$Y.class,T$x=T$Y.getset,T$O=T$Y.__newvec,T$V=laya.maths.Arith,T$C=laya.maths.Bezier,T$m=laya.resource.Bitmap,T$r=laya.utils.Browser,T$F=laya.utils.Byte,T$u=laya.utils.Color,T$a=(laya.filters.ColorFilter,T$Y.Config),T$w=laya.resource.Context,T$f=(laya.events.Event,laya.filters.Filter),T$y=laya.display.Graphics,T$o=laya.resource.HTMLCanvas,T$T=(laya.utils.HTMLChar,laya.resource.HTMLImage),T$j=laya.resource.HTMLSubImage,T$_=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),T$Q=laya.maths.Point,T$N=laya.maths.Rectangle,T$D=laya.renders.Render,T$e=(laya.renders.RenderContext,laya.renders.RenderSprite),T$b=laya.resource.Resource,T$S=laya.resource.ResourceManager,T$H=laya.utils.RunDriver,T$i=laya.display.Sprite,T$U=laya.display.Stage,T$c=laya.utils.Stat,T$h=laya.utils.StringKey,T$G=(laya.display.css.Style,laya.system.System),T$R=laya.display.Text,T$A=laya.resource.Texture,T$g=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),T$$=laya.utils.VectorGraphManager;laya.utils.WordText;T$Y.interface("laya.webgl.shapes.IShape"),T$Y.interface("laya.webgl.submit.ISubmit"),T$Y.interface("laya.webgl.text.ICharSegment"),T$Y.interface("laya.webgl.canvas.save.ISaveData"),T$Y.interface("laya.webgl.resource.IMergeAtlasBitmap"),T$Y.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var T$p=function(){function T$L(){}T$E(T$L,"laya.filters.webgl.FilterActionGL");var T$s=T$L.prototype;return T$Y.imps(T$s,{"laya.filters.IFilterActionGL":!0}),T$s.setValue=function(T$L){},T$s.setValueMix=function(T$L){},T$s.apply3d=function(T$L,T$s,T$m,T$x,T$w){return null;},T$s.apply=function(T$L){return null;},T$x(0,T$s,"typeMix",function(){return 0;}),T$L;}(),T$Z=function(){function T$L(){}return T$E(T$L,"laya.webgl.shader.ShaderValue"),T$L;}(),T$W=function(){var T$x,T$w;function T$L(T$L,T$s,T$m){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new T$w(),void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0),this._cells=null,this._rowInfo=null,this._init(T$L,T$s),this._atlasID=T$m;}T$E(T$L,"laya.webgl.atlas.AtlasGrid");var T$s=T$L.prototype;return T$s.getAltasID=function(){return this._atlasID;},T$s.setAltasID=function(T$L){0<=T$L&&(this._atlasID=T$L);},T$s.addTex=function(T$L,T$s,T$m){var T$x=this._get(T$s,T$m);return 0==T$x.ret||(this._fill(T$x.x,T$x.y,T$s,T$m,T$L),this._texCount++),T$x;},T$s._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null);},T$s._init=function(T$L,T$s){if(this._width=T$L,this._height=T$s,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=T$O(this._height);for(var T$m=0;T$m<this._height;T$m++)this._rowInfo[T$m]=new T$x();return this._clear(),!0;},T$s._get=function(T$L,T$s){var T$m=new T$X();if(T$L>=this._failSize.width&&T$s>=this._failSize.height)return T$m;for(var T$x=-1,T$w=-1,T$O=this._width,T$v=this._height,T$y=this._cells,T$F=0;T$F<T$v;T$F++)if(!(this._rowInfo[T$F].spaceCount<T$L))for(var T$o=0;T$o<T$O;){var T$V=3*(T$F*T$O+T$o);if(0!=T$y[T$V]||T$y[1+T$V]<T$L||T$y[2+T$V]<T$s)T$o+=T$y[1+T$V];else{T$x=T$o,T$w=T$F;for(var T$C=0;T$C<T$L;T$C++)if(T$y[3*T$C+T$V+2]<T$s){T$x=-1;break;}if(!(T$x<0))return T$m.ret=!0,T$m.x=T$x,T$m.y=T$w,T$m;T$o+=T$y[1+T$V];}}return T$m;},T$s._fill=function(T$L,T$s,T$m,T$x,T$w){var T$O=this._width,T$v=this._height;this._check(T$L+T$m<=T$O&&T$s+T$x<=T$v);for(var T$y=T$s;T$y<T$x+T$s;++T$y){this._check(this._rowInfo[T$y].spaceCount>=T$m),this._rowInfo[T$y].spaceCount-=T$m;for(var T$F=0;T$F<T$m;T$F++){var T$o=3*(T$L+T$y*T$O+T$F);this._check(0==this._cells[T$o]),this._cells[T$o]=T$w,this._cells[1+T$o]=T$m,this._cells[2+T$o]=T$x;}}if(0<T$L)for(T$y=0;T$y<T$x;++T$y){var T$V=0;for(T$F=T$L-1;0<=T$F&&0==this._cells[3*((T$s+T$y)*T$O+T$F)];--T$F,++T$V);for(T$F=T$V;0<T$F;--T$F)this._cells[3*((T$s+T$y)*T$O+T$L-T$F)+1]=T$F,this._check(0<T$F);}if(0<T$s)for(T$F=T$L;T$F<T$L+T$m;++T$F){for(T$V=0,T$y=T$s-1;0<=T$y&&0==this._cells[3*(T$F+T$y*T$O)];--T$y,T$V++);for(T$y=T$V;0<T$y;--T$y)this._cells[3*(T$F+(T$s-T$y)*T$O)+2]=T$y,this._check(0<T$y);}},T$s._check=function(T$L){0==T$L&&console.log("xtexMerger 错误啦");},T$s._clear=function(){for(var T$L=this._texCount=0;T$L<this._height;T$L++)this._rowInfo[T$L].spaceCount=this._width;for(var T$s=0;T$s<this._height;T$s++)for(var T$m=0;T$m<this._width;T$m++){var T$x=3*(T$s*this._width+T$m);this._cells[T$x]=0,this._cells[1+T$x]=this._width-T$m,this._cells[2+T$x]=this._width-T$s;}this._failSize.width=this._width+1,this._failSize.height=this._height+1;},T$L.__init$=function(){T$x=function(){function T$L(){this.spaceCount=0;}return T$E(T$L,""),T$L;}(),T$w=function(){function T$L(){this.width=0,this.height=0;}return T$E(T$L,""),T$L;}();},T$L;}(),T$d=function(){function T$D(T$L,T$s,T$m,T$x){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=T$L,this._height=T$s,this._gridSize=T$m,this._maxAtlaserCount=T$x,this._gridNumX=T$L/T$m,this._gridNumY=T$s/T$m,this._curAtlasIndex=0,this._atlaserArray=[];}T$E(T$D,"laya.webgl.atlas.AtlasResourceManager");var T$L=T$D.prototype;return T$L.setAtlasParam=function(T$L,T$s,T$m,T$x){if(1==this._setAtlasParam)return T$D._sid_=0,this._width=T$L,this._height=T$s,this._gridSize=T$m,this._maxAtlaserCount=T$x,this._gridNumX=T$L/T$m,this._gridNumY=T$s/T$m,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1;},T$L.pushData=function(T$L){var T$s,T$m=T$L.bitmap,T$x=-1,T$w=null,T$O=0,T$v=0;for(T$O=0,T$s=this._atlaserArray.length;T$O<T$s&&(T$v=(this._curAtlasIndex+T$O)%T$s,-1==(T$x=(T$w=this._atlaserArray[T$v]).findBitmapIsExist(T$m)));T$O++);if(-1!=T$x){var T$y=T$w.InAtlasWebGLImagesOffsetValue[T$x];return T$u=T$y[0],T$T=T$y[1],T$w.addToAtlas(T$L,T$u,T$T),!0;}this._setAtlasParam=!1;for(var T$F=Math.ceil((T$L.bitmap.width+2)/this._gridSize),T$o=Math.ceil((T$L.bitmap.height+2)/this._gridSize),T$V=!1,T$C=0;T$C<2;T$C++){var T$E=this._maxAtlaserCount;for(T$O=0;T$O<T$E;T$O++){T$v=(this._curAtlasIndex+T$O)%T$E,this._atlaserArray.length-1>=T$v||this._atlaserArray.push(new T$NL(this._gridNumX,this._gridNumY,this._width,this._height,T$D._sid_++));var T$r=this._atlaserArray[T$v],T$u=0,T$T=0,T$j=T$r.addTex(1,T$F,T$o);if(T$j.ret){T$u=T$j.x*this._gridSize+1,T$T=T$j.y*this._gridSize+1,T$m.lock=!0,T$r.addToAtlasTexture(T$m,T$u,T$T),T$r.addToAtlas(T$L,T$u,T$T),T$V=!0,this._curAtlasIndex=T$v;break;}}if(T$V)break;this._atlaserArray.push(new T$NL(this._gridNumX,this._gridNumY,this._width,this._height,T$D._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1;}return T$V||console.log(">>>AtlasManager pushData error"),T$V;},T$L.addToAtlas=function(T$L){laya.webgl.atlas.AtlasResourceManager.instance.pushData(T$L);},T$L.garbageCollection=function(){if(!0===this._needGC){for(var T$L=this._atlaserArray.length-this._maxAtlaserCount,T$s=0;T$s<T$L;T$s++)this._atlaserArray[T$s].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+T$L),this._atlaserArray.splice(0,T$L),this._needGC=!1;}return!0;},T$L.freeAll=function(){for(var T$L=0,T$s=this._atlaserArray.length;T$L<T$s;T$L++)this._atlaserArray[T$L].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0;},T$L.getAtlaserCount=function(){return this._atlaserArray.length;},T$L.getAtlaserByIndex=function(T$L){return this._atlaserArray[T$L];},T$x(1,T$D,"instance",function(){return T$D._Instance||(T$D._Instance=new T$D(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),T$D._Instance;}),T$x(1,T$D,"enabled",function(){return T$a.atlasEnable;}),T$x(1,T$D,"atlasLimitWidth",function(){return T$D._atlasLimitWidth;},function(T$L){T$D._atlasLimitWidth=T$L;}),T$x(1,T$D,"atlasLimitHeight",function(){return T$D._atlasLimitHeight;},function(T$L){T$D._atlasLimitHeight=T$L;}),T$D._enable=function(){T$a.atlasEnable=!0;},T$D._disable=function(){T$a.atlasEnable=!1;},T$D.__init__=function(){T$D.atlasTextureWidth=2048,T$D.atlasTextureHeight=2048,T$D.maxTextureCount=6,T$D.atlasLimitWidth=512,T$D.atlasLimitHeight=512;},T$D._atlasLimitWidth=0,T$D._atlasLimitHeight=0,T$D.gridSize=16,T$D.atlasTextureWidth=0,T$D.atlasTextureHeight=0,T$D.maxTextureCount=0,T$D._atlasRestore=0,T$D.BOARDER_TYPE_NO=0,T$D.BOARDER_TYPE_RIGHT=1,T$D.BOARDER_TYPE_LEFT=2,T$D.BOARDER_TYPE_BOTTOM=4,T$D.BOARDER_TYPE_TOP=8,T$D.BOARDER_TYPE_ALL=15,T$D._sid_=0,T$D._Instance=null,T$D;}(),T$X=function(){function T$L(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0;}return T$E(T$L,"laya.webgl.atlas.MergeFillInfo"),T$L;}(),T$I=function(){function T$s(){}return T$E(T$s,"laya.webgl.canvas.BlendMode"),T$s._init_=function(T$L){T$s.fns=[T$s.BlendNormal,T$s.BlendAdd,T$s.BlendMultiply,T$s.BlendScreen,T$s.BlendOverlay,T$s.BlendLight,T$s.BlendMask,T$s.BlendDestinationOut],T$s.targetFns=[T$s.BlendNormalTarget,T$s.BlendAddTarget,T$s.BlendMultiplyTarget,T$s.BlendScreenTarget,T$s.BlendOverlayTarget,T$s.BlendLightTarget,T$s.BlendMask,T$s.BlendDestinationOut];},T$s.BlendNormal=function(T$L){T$L.blendFunc(1,771);},T$s.BlendAdd=function(T$L){T$L.blendFunc(1,772);},T$s.BlendMultiply=function(T$L){T$L.blendFunc(774,771);},T$s.BlendScreen=function(T$L){T$L.blendFunc(1,1);},T$s.BlendOverlay=function(T$L){T$L.blendFunc(1,769);},T$s.BlendLight=function(T$L){T$L.blendFunc(1,1);},T$s.BlendNormalTarget=function(T$L){T$L.blendFunc(1,771);},T$s.BlendAddTarget=function(T$L){T$L.blendFunc(1,772);},T$s.BlendMultiplyTarget=function(T$L){T$L.blendFunc(774,771);},T$s.BlendScreenTarget=function(T$L){T$L.blendFunc(1,1);},T$s.BlendOverlayTarget=function(T$L){T$L.blendFunc(1,769);},T$s.BlendLightTarget=function(T$L){T$L.blendFunc(1,1);},T$s.BlendMask=function(T$L){T$L.blendFunc(0,770);},T$s.BlendDestinationOut=function(T$L){T$L.blendFunc(0,0);},T$s.activeBlendFunction=null,T$s.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],T$s.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},T$s.NORMAL="normal",T$s.ADD="add",T$s.MULTIPLY="multiply",T$s.SCREEN="screen",T$s.LIGHT="light",T$s.OVERLAY="overlay",T$s.DESTINATIONOUT="destination-out",T$s.fns=[],T$s.targetFns=[],T$s;}(),T$n=function(){function T$m(T$L){this._color=T$u.create("black"),this.setValue(T$L);}T$E(T$m,"laya.webgl.canvas.DrawStyle");var T$L=T$m.prototype;return T$L.setValue=function(T$L){if(T$L){if("string"==typeof T$L)return void(this._color=T$u.create(T$L));if(T$L instanceof laya.utils.Color)return void(this._color=T$L);}},T$L.reset=function(){this._color=T$u.create("black");},T$L.equal=function(T$L){return"string"==typeof T$L?this._color.strColor===T$L:T$L instanceof laya.utils.Color&&this._color.numColor===T$L.numColor;},T$L.toColorStr=function(){return this._color.strColor;},T$m.create=function(T$L){var T$s;if(T$L&&("string"==typeof T$L?T$s=T$u.create(T$L):T$L instanceof laya.utils.Color&&(T$s=T$L),T$s))return T$s._drawStyle||(T$s._drawStyle=new T$m(T$L));return laya.webgl.canvas.DrawStyle.DEFAULT;},T$v(T$m,["DEFAULT",function(){return this.DEFAULT=new T$m("#000000");}]),T$m;}(),T$J=function(){function T$L(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];T$SL.mainContext;this.ib=T$zL.create(35048),this.vb=T$tL.create(5);}T$E(T$L,"laya.webgl.canvas.Path");var T$s=T$L.prototype;return T$s.addPoint=function(T$L,T$s){this.tempArray.push(T$L,T$s);},T$s.getEndPointX=function(){return this.tempArray[this.tempArray.length-2];},T$s.getEndPointY=function(){return this.tempArray[this.tempArray.length-1];},T$s.polygon=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v;return this.geomatrys.push(this._curGeomatry=T$v=new T$hL(T$L,T$s,T$m,T$x,T$w,T$O)),T$x||(T$v.fill=!1),null==T$O&&(T$v.borderWidth=0),T$v;},T$s.setGeomtry=function(T$L){this.geomatrys.push(this._curGeomatry=T$L);},T$s.drawLine=function(T$L,T$s,T$m,T$x,T$w){var T$O;return this.closePath?this.geomatrys.push(this._curGeomatry=T$O=new T$cL(T$L,T$s,T$m,T$x,T$w)):this.geomatrys.push(this._curGeomatry=T$O=new T$UL(T$L,T$s,T$m,T$x,T$w)),T$O.fill=!1,T$O;},T$s.update=function(){var T$L=this.ib._byteLength,T$s=this.geomatrys.length;this.offset=T$L;for(var T$m=this.geoStart;T$m<T$s;T$m++)this.geomatrys[T$m].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=T$s,this.count=(this.ib._byteLength-T$L)/T$TL.BYTES_PIDX;},T$s.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0;},T$s.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null;},T$L;}(),T$l=function(){function T$y(){}T$E(T$y,"laya.webgl.canvas.save.SaveBase");var T$L=T$y.prototype;return T$Y.imps(T$L,{"laya.webgl.canvas.save.ISaveData":!0}),T$L.isSaveMark=function(){return!1;},T$L.restore=function(T$L){this._dataObj[this._valueName]=this._value,(T$y._cache[T$y._cache._length++]=this)._newSubmit&&(T$L._curSubmit=T$OL.RENDERBASE,T$L._renderKey=0);},T$y._createArray=function(){var T$L=[];return T$L._length=0,T$L;},T$y._init=function(){var T$L=T$y._namemap={};return T$L[1]="ALPHA",T$L[2]="fillStyle",T$L[8]="font",T$L[256]="lineWidth",T$L[512]="strokeStyle",T$L[8192]="_mergeID",T$L[1024]=T$L[2048]=T$L[4096]=[],T$L[16384]="textBaseline",T$L[32768]="textAlign",T$L[65536]="_nBlendType",T$L[1048576]="shader",T$L[2097152]="filters",T$L;},T$y.save=function(T$L,T$s,T$m,T$x){if((T$L._saveMark._saveuse&T$s)!==T$s){T$L._saveMark._saveuse|=T$s;var T$w=T$y._cache,T$O=0<T$w._length?T$w[--T$w._length]:new T$y();T$O._value=T$m[T$O._valueName=T$y._namemap[T$s]],T$O._dataObj=T$m,T$O._newSubmit=T$x;var T$v=T$L._save;T$v[T$v._length++]=T$O;}},T$y._cache=laya.webgl.canvas.save.SaveBase._createArray(),T$y._namemap=T$y._init(),T$y;}(),T$q=function(){function T$O(){this._clipRect=new T$N();}T$E(T$O,"laya.webgl.canvas.save.SaveClipRect");var T$L=T$O.prototype;return T$Y.imps(T$L,{"laya.webgl.canvas.save.ISaveData":!0}),T$L.isSaveMark=function(){return!1;},T$L.restore=function(T$L){T$L._clipRect=this._clipSaveRect,(T$O._cache[T$O._cache._length++]=this)._submitScissor.submitLength=T$L._submits._length-this._submitScissor.submitIndex,T$L._curSubmit=T$OL.RENDERBASE,T$L._renderKey=0;},T$O.save=function(T$L,T$s){if(131072!=(131072&T$L._saveMark._saveuse)){T$L._saveMark._saveuse|=131072;var T$m=T$O._cache,T$x=0<T$m._length?T$m[--T$m._length]:new T$O();T$x._clipSaveRect=T$L._clipRect,T$L._clipRect=T$x._clipRect.copyFrom(T$L._clipRect),T$x._submitScissor=T$s;var T$w=T$L._save;T$w[T$w._length++]=T$x;}},T$v(T$O,["_cache",function(){return this._cache=T$l._createArray();}]),T$O;}(),T$K=function(){function T$r(){this._contextX=0,this._contextY=0,this._clipRect=new T$N(),this._rect=new T$N(),this._matrix=new T$_();}T$E(T$r,"laya.webgl.canvas.save.SaveClipRectStencil");var T$L=T$r.prototype;return T$Y.imps(T$L,{"laya.webgl.canvas.save.ISaveData":!0}),T$L.isSaveMark=function(){return!1;},T$L.restore=function(T$L){T$VL.restore(T$L,this._rect,this._saveMatrix,this._contextX,this._contextY),T$L._clipRect=this._clipSaveRect,T$L._curMat=this._saveMatrix,T$L._x=this._contextX,T$L._y=this._contextY,T$r._cache[T$r._cache._length++]=this,T$L._curSubmit=T$OL.RENDERBASE;},T$r.save=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o){if(262144!=(262144&T$L._saveMark._saveuse)){T$L._saveMark._saveuse|=262144;var T$V=T$r._cache,T$C=0<T$V._length?T$V[--T$V._length]:new T$r();T$C._clipSaveRect=T$L._clipRect,T$C._clipRect.setTo(T$v,T$y,T$F,T$o),T$L._clipRect=T$C._clipRect,T$C._rect.x=T$m,T$C._rect.y=T$x,T$C._rect.width=T$w,T$C._rect.height=T$O,T$C._contextX=T$L._x,T$C._contextY=T$L._y,T$C._saveMatrix=T$L._curMat,T$L._curMat.copyTo(T$C._matrix),T$L._curMat=T$C._matrix,T$C._submitStencil=T$s;var T$E=T$L._save;T$E[T$E._length++]=T$C;}},T$v(T$r,["_cache",function(){return this._cache=T$l._createArray();}]),T$r;}(),T$P=function(){function T$x(){this._saveuse=0;}T$E(T$x,"laya.webgl.canvas.save.SaveMark");var T$L=T$x.prototype;return T$Y.imps(T$L,{"laya.webgl.canvas.save.ISaveData":!0}),T$L.isSaveMark=function(){return!0;},T$L.restore=function(T$L){T$L._saveMark=this._preSaveMark,T$x._no[T$x._no._length++]=this;},T$x.Create=function(T$L){var T$s=T$x._no,T$m=0<T$s._length?T$s[--T$s._length]:new T$x();return T$m._saveuse=0,T$m._preSaveMark=T$L._saveMark,T$L._saveMark=T$m;},T$v(T$x,["_no",function(){return this._no=T$l._createArray();}]),T$x;}(),T$k=function(){function T$O(){this._matrix=new T$_();}T$E(T$O,"laya.webgl.canvas.save.SaveTransform");var T$L=T$O.prototype;return T$Y.imps(T$L,{"laya.webgl.canvas.save.ISaveData":!0}),T$L.isSaveMark=function(){return!1;},T$L.restore=function(T$L){T$L._curMat=this._savematrix,T$O._no[T$O._no._length++]=this;},T$O.save=function(T$L){var T$s=T$L._saveMark;if(2048!=(2048&T$s._saveuse)){T$s._saveuse|=2048;var T$m=T$O._no,T$x=0<T$m._length?T$m[--T$m._length]:new T$O();T$x._savematrix=T$L._curMat,T$L._curMat=T$L._curMat.copyTo(T$x._matrix);var T$w=T$L._save;T$w[T$w._length++]=T$x;}},T$v(T$O,["_no",function(){return this._no=T$l._createArray();}]),T$O;}(),T$B=function(){function T$w(){}T$E(T$w,"laya.webgl.canvas.save.SaveTranslate");var T$L=T$w.prototype;return T$Y.imps(T$L,{"laya.webgl.canvas.save.ISaveData":!0}),T$L.isSaveMark=function(){return!1;},T$L.restore=function(T$L){T$L._curMat;T$L._x=this._x,T$L._y=this._y,T$w._no[T$w._no._length++]=this;},T$w.save=function(T$L){var T$s=T$w._no,T$m=0<T$s._length?T$s[--T$s._length]:new T$w();T$m._x=T$L._x,T$m._y=T$L._y;var T$x=T$L._save;T$x[T$x._length++]=T$m;},T$v(T$w,["_no",function(){return this._no=T$l._createArray();}]),T$w;}(),T$M=function(){function T$L(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new T$N();}T$E(T$L,"laya.webgl.resource.RenderTargetMAX");var T$s=T$L.prototype;return T$s.setSP=function(T$L){this._sp=T$L;},T$s.size=function(T$L,T$s){var T$m=this;this._width!==T$L||this._height!==T$s?(this.repaint=!0,this._width=T$L,this._height=T$s,this.target?this.target.size(T$L,T$s):this.target=T$$L.create(T$L,T$s),this.target.hasListener("recovered")||this.target.on("recovered",this,function(T$L){T$Y.timer.callLater(T$m._sp,T$m._sp.repaint);})):this.target.size(T$L,T$s);},T$s._flushToTarget=function(T$L,T$s){if(!T$s._destroy){var T$m=T$eL.worldScissorTest,T$x=T$eL.worldClipRect;T$eL.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,T$eL.worldScissorTest=!1,T$SL.mainContext.disable(3089);var T$w=T$eL.worldAlpha,T$O=T$eL.worldMatrix4,T$v=T$eL.worldMatrix,T$y=T$eL.worldFilters,T$F=T$eL.worldShaderDefines;if(T$eL.worldMatrix=T$_.EMPTY,T$eL.restoreTempArray(),T$eL.worldMatrix4=T$eL.TEMPMAT4_ARRAY,T$eL.worldAlpha=1,T$eL.worldFilters=null,T$eL.worldShaderDefines=null,T$gL.activeShader=null,T$s.start(),T$a.showCanvasMark?T$s.clear(0,1,0,.3):T$s.clear(0,0,0,0),T$L.flush(),T$s.end(),T$gL.activeShader=null,T$eL.worldAlpha=T$w,T$eL.worldMatrix4=T$O,T$eL.worldMatrix=T$v,T$eL.worldFilters=T$y,T$eL.worldShaderDefines=T$F,T$eL.worldScissorTest=T$m){var T$o=T$eL.height-T$x.y-T$x.height;T$SL.mainContext.scissor(T$x.x,T$o,T$x.width,T$x.height),T$SL.mainContext.enable(3089);}T$eL.worldClipRect=T$x;}},T$s.flush=function(T$L){this.repaint&&(this._flushToTarget(T$L,this.target),this.repaint=!1);},T$s.drawTo=function(T$L,T$s,T$m,T$x,T$w){T$L.drawTexture(this.target.getTexture(),T$s,T$m,T$x,T$w,0,0);},T$s.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null);},T$L;}(),T$z=function(){function T$L(){this.ALPHA=1,this.shaderType=0,this.defines=new T$iL();}return T$E(T$L,"laya.webgl.shader.d2.Shader2D"),T$L.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null;},T$L.__init__=function(){var T$L,T$s;T$PL.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),T$PL.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),T$PL.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),T$PL.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),T$PL.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),T$PL.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),T$PL.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),T$PL.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),T$L="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",T$s='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',T$PL.preCompile2D(0,1,T$L,T$s,null),T$L="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",T$s='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',T$PL.preCompile2D(0,2,T$L,T$s,null),T$L="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",T$s="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",T$PL.preCompile2D(0,4,T$L,T$s,null),T$L="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",T$s='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',T$PL.preCompile2D(0,256,T$L,T$s,null),T$L="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",T$s="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",T$PL.preCompile2D(0,512,T$L,T$s,null);},T$L;}(),T$t=function(){function T$s(T$L,T$s,T$m){this._value=0,this._name2int=T$L,this._int2name=T$s,this._int2nameMap=T$m;}T$E(T$s,"laya.webgl.shader.ShaderDefines");var T$L=T$s.prototype;return T$L.add=function(T$L){return"string"==typeof T$L&&(T$L=this._name2int[T$L]),this._value|=T$L,this._value;},T$L.addInt=function(T$L){return this._value|=T$L,this._value;},T$L.remove=function(T$L){return"string"==typeof T$L&&(T$L=this._name2int[T$L]),this._value&=~T$L,this._value;},T$L.isDefine=function(T$L){return(this._value&T$L)===T$L;},T$L.getValue=function(){return this._value;},T$L.setValue=function(T$L){this._value=T$L;},T$L.toNameDic=function(){var T$L=this._int2nameMap[this._value];return T$L||T$s._toText(this._value,this._int2name,this._int2nameMap);},T$s._reg=function(T$L,T$s,T$m,T$x){T$x[T$m[T$L]=T$s]=T$L;},T$s._toText=function(T$L,T$s,T$m){var T$x=T$m[T$L];if(T$x)return T$x;for(var T$w={},T$O=1,T$v=0;T$v<32&&!(T$L<(T$O=1<<T$v));T$v++)if(T$L&T$O){var T$y=T$s[T$O];T$y&&(T$w[T$y]="");}return T$m[T$L]=T$w;},T$s._toInt=function(T$L,T$s){for(var T$m=T$L.split("."),T$x=0,T$w=0,T$O=T$m.length;T$w<T$O;T$w++){var T$v=T$s[T$m[T$w]];if(!T$v)throw new Error("Defines to int err:"+T$L+"/"+T$m[T$w]);T$x|=T$v;}return T$x;},T$s;}(),T$LL=function(){function T$v(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new T$_();}T$E(T$v,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var T$L=T$v.prototype;return T$L.init=function(T$L,T$s,T$m){if(T$s)this._vs=T$s;else{this._vs=[];var T$x=T$L.width,T$w=T$L.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(T$x,0,1,0,1,1,1,1),this._vs.push(T$x,T$w,1,1,1,1,1,1),this._vs.push(0,T$w,0,1,1,1,1,1);}T$m?this._ps=T$m:(T$v._defaultPS||(T$v._defaultPS=[]).push(0,1,3,3,1,2),this._ps=T$v._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=T$L;},T$L.init2=function(T$L,T$s,T$m,T$x,T$w){this.transform&&(this.transform=null),T$m?this._ps=T$m:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=T$x,this._uvs=T$w,this.mEleNum=this._ps.length,this.mTexture=T$L,(T$D.isConchNode||T$D.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs));},T$L._initMyData=function(){var T$L=0,T$s=0,T$m=4*this._verticles.length;this._vs=T$v._tempVS;var T$x=!1;if(T$D.isConchNode||T$D.isConchApp?(this._vs.length=T$m,T$x=!0):this._vs.length<T$m&&(this._vs.length=T$m,T$x=!0),T$v._tVSLen=T$m,T$x)for(;T$L<T$m;)this._vs[T$L]=this._verticles[T$s],this._vs[T$L+1]=this._verticles[T$s+1],this._vs[T$L+2]=this._uvs[T$s],this._vs[T$L+3]=this._uvs[T$s+1],this._vs[T$L+4]=1,this._vs[T$L+5]=1,this._vs[T$L+6]=1,this._vs[T$L+7]=1,T$L+=8,T$s+=2;else for(;T$L<T$m;)this._vs[T$L]=this._verticles[T$s],this._vs[T$L+1]=this._verticles[T$s+1],this._vs[T$L+2]=this._uvs[T$s],this._vs[T$L+3]=this._uvs[T$s+1],T$L+=8,T$s+=2;},T$L.getData2=function(T$L,T$s,T$m){var T$x;this.mVBBuffer=T$L,this.mIBBuffer=T$s,this._initMyData(),T$L.appendEx2(this._vs,Float32Array,T$v._tVSLen,4),this._indexStart=T$s._byteLength,(T$x=T$v._tempIB).length<this._ps.length&&(T$x.length=this._ps.length);for(var T$w=0,T$O=this._ps.length;T$w<T$O;T$w++)T$x[T$w]=this._ps[T$w]+T$m;T$s.appendEx2(T$x,Uint16Array,this._ps.length,2);},T$L.getData=function(T$L,T$s,T$m){if(this.mVBBuffer=T$L,this.mIBBuffer=T$s,T$L.append(this.mVBData),this._indexStart=T$s._byteLength,this.mIBData.start!=T$m){for(var T$x=0,T$w=this._ps.length;T$x<T$w;T$x++)this.mIBData[T$x]=this._ps[T$x]+T$m;this.mIBData.start=T$m;}T$s.append(this.mIBData);},T$L.render=function(T$L,T$s,T$m){if(T$D.isWebGL&&this.mTexture){T$L._renderKey=0,T$L._shader2D.glTexture=null,T$sL.getInstance().addSkinMesh(this);var T$x=T$OL.createShape(T$L,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,T$fL.create(512,0));this.transform||(this.transform=T$_.EMPTY),this.transform.translate(T$s,T$m),T$_.mul(this.transform,T$L._curMat,this._tempMatrix),this.transform.translate(-T$s,-T$m);var T$w=T$x.shaderValue,T$O=T$w.u_mmat2||T$eL.getMatrArray();T$eL.mat2MatArray(this._tempMatrix,T$O),T$w.textureHost=this.mTexture,T$w.offsetX=0,T$w.offsetY=0,T$w.u_mmat2=T$O,T$w.ALPHA=T$L._shader2D.ALPHA,T$L._submits[T$L._submits._length++]=T$x;}else T$D.isConchApp&&this.mTexture&&(this.transform||(this.transform=T$_.EMPTY),T$L.setSkinMesh&&T$L.setSkinMesh(T$s,T$m,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform));},T$v._tempVS=[],T$v._tempIB=[],T$v._defaultPS=null,T$v._tVSLen=0,T$v;}(),T$sL=function(){function T$L(){this.ib=null,this.vb=null;T$SL.mainContext;this.ib=T$zL.create(35048),this.vb=T$tL.create(8);}T$E(T$L,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var T$s=T$L.prototype;return T$s.addSkinMesh=function(T$L){T$L.getData2(this.vb,this.ib,this.vb._byteLength/32);},T$s.reset=function(){this.vb.clear(),this.ib.clear();},T$L.getInstance=function(){return T$L.instance=T$L.instance||new T$L();},T$L.instance=null,T$L;}(),T$mL=function(){function T$L(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===T$F&&(T$F=0),this.x=T$L,this.y=T$s,this.width=T$m,this.height=T$x,this.edges=T$w,this.color=T$O,this.borderWidth=T$v,this.borderColor=T$y;}T$E(T$L,"laya.webgl.shapes.BasePoly");var T$s=T$L.prototype;return T$Y.imps(T$s,{"laya.webgl.shapes.IShape":!0}),T$s.getData=function(T$L,T$s,T$m){},T$s.rebuild=function(T$L){},T$s.setMatrix=function(T$L){},T$s.needUpdate=function(T$L){return!0;},T$s.sector=function(T$L,T$s,T$m){var T$x=this.x,T$w=this.y,T$O=this.edges,T$v=(this.r1-this.r0)/T$O,T$y=this.width,T$F=this.height,T$o=this.color,T$V=(T$o>>16&255)/255,T$C=(T$o>>8&255)/255,T$E=(255&T$o)/255;T$L.push(T$x,T$w,T$V,T$C,T$E);for(var T$r=0;T$r<T$O+1;T$r++)T$L.push(T$x+Math.sin(T$v*T$r+this.r0)*T$y,T$w+Math.cos(T$v*T$r+this.r0)*T$F),T$L.push(T$V,T$C,T$E);for(T$r=0;T$r<T$O;T$r++)T$s.push(T$m,T$m+T$r+1,T$m+T$r+2);},T$s.createLine2=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v,T$y,T$F,T$o,T$V,T$C,T$E,T$r,T$u,T$T,T$j,T$D,T$e,T$b,T$S,T$H,T$Y,T$a,T$f,T$_,T$Q=T$L.concat(),T$N=T$w,T$i=this.borderColor,T$U=(T$i>>16&255)/255,T$c=(T$i>>8&255)/255,T$h=(255&T$i)/255,T$G=T$Q.length/2,T$R=T$x,T$A=T$m/2;T$F=T$Q[0],T$o=T$Q[1],T$T=T$F-(T$V=T$Q[2]),T$u=(T$u=-(T$o-(T$C=T$Q[3])))/(T$_=Math.sqrt(T$u*T$u+T$T*T$T))*T$A,T$T=T$T/T$_*T$A,T$N.push(T$F-T$u+this.x,T$o-T$T+this.y,T$U,T$c,T$h,T$F+T$u+this.x,T$o+T$T+this.y,T$U,T$c,T$h);for(var T$g=1;T$g<T$G-1;T$g++)T$F=T$Q[2*(T$g-1)],T$o=T$Q[2*(T$g-1)+1],T$V=T$Q[2*T$g],T$C=T$Q[2*T$g+1],T$E=T$Q[2*(T$g+1)],T$r=T$Q[2*(T$g+1)+1],T$T=T$F-T$V,T$D=T$V-T$E,T$S=(-(T$u=(T$u=-(T$o-T$C))/(T$_=Math.sqrt(T$u*T$u+T$T*T$T))*T$A)+T$F)*(-(T$T=T$T/T$_*T$A)+T$C)-(-T$u+T$V)*(-T$T+T$o),T$a=(-(T$j=(T$j=-(T$C-T$r))/(T$_=Math.sqrt(T$j*T$j+T$D*T$D))*T$A)+T$E)*(-(T$D=T$D/T$_*T$A)+T$C)-(-T$j+T$V)*(-T$D+T$r),T$f=(T$e=-T$T+T$o-(-T$T+T$C))*(T$Y=-T$j+T$V-(-T$j+T$E))-(T$H=-T$D+T$r-(-T$D+T$C))*(T$b=-T$u+T$V-(-T$u+T$F)),Math.abs(T$f)<.1?(T$f+=10.1,T$N.push(T$V-T$u+this.x,T$C-T$T+this.y,T$U,T$c,T$h,T$V+T$u+this.x,T$C+T$T+this.y,T$U,T$c,T$h)):(((T$v=(T$b*T$a-T$Y*T$S)/T$f)-T$V)*(T$v-T$V)+((T$y=(T$H*T$S-T$e*T$a)/T$f)-T$C)+(T$y-T$C),T$N.push(T$v+this.x,T$y+this.y,T$U,T$c,T$h,T$V-(T$v-T$V)+this.x,T$C-(T$y-T$C)+this.y,T$U,T$c,T$h));T$F=T$Q[T$Q.length-4],T$o=T$Q[T$Q.length-3],T$T=T$F-(T$V=T$Q[T$Q.length-2]),T$u=(T$u=-(T$o-(T$C=T$Q[T$Q.length-1])))/(T$_=Math.sqrt(T$u*T$u+T$T*T$T))*T$A,T$T=T$T/T$_*T$A,T$N.push(T$V-T$u+this.x,T$C-T$T+this.y,T$U,T$c,T$h,T$V+T$u+this.x,T$C+T$T+this.y,T$U,T$c,T$h);var T$$=T$O;for(T$g=1;T$g<T$$;T$g++)T$s.push(T$R+2*(T$g-1),T$R+2*(T$g-1)+1,T$R+2*T$g+1,T$R+2*T$g+1,T$R+2*T$g,T$R+2*(T$g-1));return T$N;},T$s.createLine=function(T$L,T$s,T$m,T$x){var T$w=T$L.concat(),T$O=T$L,T$v=this.borderColor,T$y=(T$v>>16&255)/255,T$F=(T$v>>8&255)/255,T$o=(255&T$v)/255;T$w.splice(0,5);var T$V,T$C,T$E,T$r,T$u,T$T,T$j,T$D,T$e,T$b,T$S,T$H,T$Y,T$a,T$f,T$_,T$Q,T$N,T$i,T$U,T$c=T$w.length/5,T$h=T$x,T$G=T$m/2;T$E=T$w[0],T$r=T$w[1],T$b=T$E-(T$u=T$w[5]),T$e=(T$e=-(T$r-(T$T=T$w[6])))/(T$U=Math.sqrt(T$e*T$e+T$b*T$b))*T$G,T$b=T$b/T$U*T$G,T$O.push(T$E-T$e,T$r-T$b,T$y,T$F,T$o,T$E+T$e,T$r+T$b,T$y,T$F,T$o);for(var T$R=1;T$R<T$c-1;T$R++)T$E=T$w[5*(T$R-1)],T$r=T$w[5*(T$R-1)+1],T$u=T$w[5*T$R],T$T=T$w[5*T$R+1],T$j=T$w[5*(T$R+1)],T$D=T$w[5*(T$R+1)+1],T$b=T$E-T$u,T$H=T$u-T$j,T$f=(-(T$e=(T$e=-(T$r-T$T))/(T$U=Math.sqrt(T$e*T$e+T$b*T$b))*T$G)+T$E)*(-(T$b=T$b/T$U*T$G)+T$T)-(-T$e+T$u)*(-T$b+T$r),T$N=(-(T$S=(T$S=-(T$T-T$D))/(T$U=Math.sqrt(T$S*T$S+T$H*T$H))*T$G)+T$j)*(-(T$H=T$H/T$U*T$G)+T$T)-(-T$S+T$u)*(-T$H+T$D),T$i=(T$Y=-T$b+T$r-(-T$b+T$T))*(T$Q=-T$S+T$u-(-T$S+T$j))-(T$_=-T$H+T$D-(-T$H+T$T))*(T$a=-T$e+T$u-(-T$e+T$E)),Math.abs(T$i)<.1?(T$i+=10.1,T$O.push(T$u-T$e,T$T-T$b,T$y,T$F,T$o,T$u+T$e,T$T+T$b,T$y,T$F,T$o)):(((T$V=(T$a*T$N-T$Q*T$f)/T$i)-T$u)*(T$V-T$u)+((T$C=(T$_*T$f-T$Y*T$N)/T$i)-T$T)+(T$C-T$T),T$O.push(T$V,T$C,T$y,T$F,T$o,T$u-(T$V-T$u),T$T-(T$C-T$T),T$y,T$F,T$o));T$E=T$w[T$w.length-10],T$r=T$w[T$w.length-9],T$b=T$E-(T$u=T$w[T$w.length-5]),T$e=(T$e=-(T$r-(T$T=T$w[T$w.length-4])))/(T$U=Math.sqrt(T$e*T$e+T$b*T$b))*T$G,T$b=T$b/T$U*T$G,T$O.push(T$u-T$e,T$T-T$b,T$y,T$F,T$o,T$u+T$e,T$T+T$b,T$y,T$F,T$o);var T$A=this.edges+1;for(T$R=1;T$R<T$A;T$R++)T$s.push(T$h+2*(T$R-1),T$h+2*(T$R-1)+1,T$h+2*T$R+1,T$h+2*T$R+1,T$h+2*T$R,T$h+2*(T$R-1));return T$O;},T$s.createLoopLine=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v=T$L.concat(),T$y=T$w||T$L,T$F=this.borderColor,T$o=(T$F>>16&255)/255,T$V=(T$F>>8&255)/255,T$C=(255&T$F)/255;T$v.splice(0,5);var T$E=[T$v[0],T$v[1]],T$r=[T$v[T$v.length-5],T$v[T$v.length-4]],T$u=T$r[0]+.5*(T$E[0]-T$r[0]),T$T=T$r[1]+.5*(T$E[1]-T$r[1]);T$v.unshift(T$u,T$T,0,0,0),T$v.push(T$u,T$T,0,0,0);var T$j,T$D,T$e,T$b,T$S,T$H,T$Y,T$a,T$f,T$_,T$Q,T$N,T$i,T$U,T$c,T$h,T$G,T$R,T$A,T$g,T$$=T$v.length/5,T$p=T$x,T$Z=T$m/2;T$e=T$v[0],T$b=T$v[1],T$_=T$e-(T$S=T$v[5]),T$f=(T$f=-(T$b-(T$H=T$v[6])))/(T$g=Math.sqrt(T$f*T$f+T$_*T$_))*T$Z,T$_=T$_/T$g*T$Z,T$y.push(T$e-T$f,T$b-T$_,T$o,T$V,T$C,T$e+T$f,T$b+T$_,T$o,T$V,T$C);for(var T$W=1;T$W<T$$-1;T$W++)T$e=T$v[5*(T$W-1)],T$b=T$v[5*(T$W-1)+1],T$S=T$v[5*T$W],T$H=T$v[5*T$W+1],T$Y=T$v[5*(T$W+1)],T$a=T$v[5*(T$W+1)+1],T$_=T$e-T$S,T$N=T$S-T$Y,T$c=(-(T$f=(T$f=-(T$b-T$H))/(T$g=Math.sqrt(T$f*T$f+T$_*T$_))*T$Z)+T$e)*(-(T$_=T$_/T$g*T$Z)+T$H)-(-T$f+T$S)*(-T$_+T$b),T$R=(-(T$Q=(T$Q=-(T$H-T$a))/(T$g=Math.sqrt(T$Q*T$Q+T$N*T$N))*T$Z)+T$Y)*(-(T$N=T$N/T$g*T$Z)+T$H)-(-T$Q+T$S)*(-T$N+T$a),T$A=(T$i=-T$_+T$b-(-T$_+T$H))*(T$G=-T$Q+T$S-(-T$Q+T$Y))-(T$h=-T$N+T$a-(-T$N+T$H))*(T$U=-T$f+T$S-(-T$f+T$e)),Math.abs(T$A)<.1?(T$A+=10.1,T$y.push(T$S-T$f,T$H-T$_,T$o,T$V,T$C,T$S+T$f,T$H+T$_,T$o,T$V,T$C)):(((T$j=(T$U*T$R-T$G*T$c)/T$A)-T$S)*(T$j-T$S)+((T$D=(T$h*T$c-T$i*T$R)/T$A)-T$H)+(T$D-T$H),T$y.push(T$j,T$D,T$o,T$V,T$C,T$S-(T$j-T$S),T$H-(T$D-T$H),T$o,T$V,T$C));T$O&&(T$s=T$O);var T$d=this.edges+1;for(T$W=1;T$W<T$d;T$W++)T$s.push(T$p+2*(T$W-1),T$p+2*(T$W-1)+1,T$p+2*T$W+1,T$p+2*T$W+1,T$p+2*T$W,T$p+2*(T$W-1));return T$s.push(T$p+2*(T$W-1),T$p+2*(T$W-1)+1,T$p+1,T$p+1,T$p,T$p+2*(T$W-1)),T$y;},T$L;}(),T$xL=function(){function T$T(){}return T$E(T$T,"laya.webgl.shapes.Earcut"),T$T.earcut=function(T$L,T$s,T$m){T$m=T$m||2;var T$x,T$w,T$O,T$v,T$y,T$F,T$o,T$V=T$s&&T$s.length,T$C=T$V?T$s[0]*T$m:T$L.length,T$E=T$T.linkedList(T$L,0,T$C,T$m,!0),T$r=[];if(!T$E)return T$r;if(T$V&&(T$E=T$T.eliminateHoles(T$L,T$s,T$E,T$m)),T$L.length>80*T$m){T$x=T$O=T$L[0],T$w=T$v=T$L[1];for(var T$u=T$m;T$u<T$C;T$u+=T$m)(T$y=T$L[T$u])<T$x&&(T$x=T$y),(T$F=T$L[T$u+1])<T$w&&(T$w=T$F),T$O<T$y&&(T$O=T$y),T$v<T$F&&(T$v=T$F);T$o=0!==(T$o=Math.max(T$O-T$x,T$v-T$w))?1/T$o:0;}return T$T.earcutLinked(T$E,T$r,T$m,T$x,T$w,T$o),T$r;},T$T.linkedList=function(T$L,T$s,T$m,T$x,T$w){var T$O,T$v;if(T$w===0<T$T.signedArea(T$L,T$s,T$m,T$x))for(T$O=T$s;T$O<T$m;T$O+=T$x)T$v=T$T.insertNode(T$O,T$L[T$O],T$L[T$O+1],T$v);else for(T$O=T$m-T$x;T$s<=T$O;T$O-=T$x)T$v=T$T.insertNode(T$O,T$L[T$O],T$L[T$O+1],T$v);return T$v&&T$T.equals(T$v,T$v.next)&&(T$T.removeNode(T$v),T$v=T$v.next),T$v;},T$T.filterPoints=function(T$L,T$s){if(!T$L)return T$L;T$s||(T$s=T$L);var T$m,T$x=T$L;do{if(T$m=!1,T$x.steiner||!T$T.equals(T$x,T$x.next)&&0!==T$T.area(T$x.prev,T$x,T$x.next))T$x=T$x.next;else{if(T$T.removeNode(T$x),(T$x=T$s=T$x.prev)===T$x.next)break;T$m=!0;}}while(T$m||T$x!==T$s);return T$s;},T$T.earcutLinked=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){if(T$L){!T$v&&T$O&&T$T.indexCurve(T$L,T$x,T$w,T$O);for(var T$y,T$F,T$o=T$L;T$L.prev!==T$L.next;)if(T$y=T$L.prev,T$F=T$L.next,T$O?T$T.isEarHashed(T$L,T$x,T$w,T$O):T$T.isEar(T$L))T$s.push(T$y.i/T$m),T$s.push(T$L.i/T$m),T$s.push(T$F.i/T$m),T$T.removeNode(T$L),T$L=T$F.next,T$o=T$F.next;else if((T$L=T$F)===T$o){T$v?1===T$v?(T$L=T$T.cureLocalIntersections(T$L,T$s,T$m),T$T.earcutLinked(T$L,T$s,T$m,T$x,T$w,T$O,2)):2===T$v&&T$T.splitEarcut(T$L,T$s,T$m,T$x,T$w,T$O):T$T.earcutLinked(T$T.filterPoints(T$L,null),T$s,T$m,T$x,T$w,T$O,1);break;}}},T$T.isEar=function(T$L){var T$s=T$L.prev,T$m=T$L,T$x=T$L.next;if(0<=T$T.area(T$s,T$m,T$x))return!1;for(var T$w=T$L.next.next;T$w!==T$L.prev;){if(T$T.pointInTriangle(T$s.x,T$s.y,T$m.x,T$m.y,T$x.x,T$x.y,T$w.x,T$w.y)&&0<=T$T.area(T$w.prev,T$w,T$w.next))return!1;T$w=T$w.next;}return!0;},T$T.isEarHashed=function(T$L,T$s,T$m,T$x){var T$w=T$L.prev,T$O=T$L,T$v=T$L.next;if(0<=T$T.area(T$w,T$O,T$v))return!1;for(var T$y=T$w.x<T$O.x?T$w.x<T$v.x?T$w.x:T$v.x:T$O.x<T$v.x?T$O.x:T$v.x,T$F=T$w.y<T$O.y?T$w.y<T$v.y?T$w.y:T$v.y:T$O.y<T$v.y?T$O.y:T$v.y,T$o=T$w.x>T$O.x?T$w.x>T$v.x?T$w.x:T$v.x:T$O.x>T$v.x?T$O.x:T$v.x,T$V=T$w.y>T$O.y?T$w.y>T$v.y?T$w.y:T$v.y:T$O.y>T$v.y?T$O.y:T$v.y,T$C=T$T.zOrder(T$y,T$F,T$s,T$m,T$x),T$E=T$T.zOrder(T$o,T$V,T$s,T$m,T$x),T$r=T$L.nextZ;T$r&&T$r.z<=T$E;){if(T$r!==T$L.prev&&T$r!==T$L.next&&T$T.pointInTriangle(T$w.x,T$w.y,T$O.x,T$O.y,T$v.x,T$v.y,T$r.x,T$r.y)&&0<=T$T.area(T$r.prev,T$r,T$r.next))return!1;T$r=T$r.nextZ;}for(T$r=T$L.prevZ;T$r&&T$r.z>=T$C;){if(T$r!==T$L.prev&&T$r!==T$L.next&&T$T.pointInTriangle(T$w.x,T$w.y,T$O.x,T$O.y,T$v.x,T$v.y,T$r.x,T$r.y)&&0<=T$T.area(T$r.prev,T$r,T$r.next))return!1;T$r=T$r.prevZ;}return!0;},T$T.cureLocalIntersections=function(T$L,T$s,T$m){var T$x=T$L;do{var T$w=T$x.prev,T$O=T$x.next.next;!T$T.equals(T$w,T$O)&&T$T.intersects(T$w,T$x,T$x.next,T$O)&&T$T.locallyInside(T$w,T$O)&&T$T.locallyInside(T$O,T$w)&&(T$s.push(T$w.i/T$m),T$s.push(T$x.i/T$m),T$s.push(T$O.i/T$m),T$T.removeNode(T$x),T$T.removeNode(T$x.next),T$x=T$L=T$O),T$x=T$x.next;}while(T$x!==T$L);return T$x;},T$T.splitEarcut=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v=T$L;do{for(var T$y=T$v.next.next;T$y!==T$v.prev;){if(T$v.i!==T$y.i&&T$T.isValidDiagonal(T$v,T$y)){var T$F=T$T.splitPolygon(T$v,T$y);return T$v=T$T.filterPoints(T$v,T$v.next),T$F=T$T.filterPoints(T$F,T$F.next),T$T.earcutLinked(T$v,T$s,T$m,T$x,T$w,T$O),void T$T.earcutLinked(T$F,T$s,T$m,T$x,T$w,T$O);}T$y=T$y.next;}T$v=T$v.next;}while(T$v!==T$L);},T$T.eliminateHoles=function(T$L,T$s,T$m,T$x){var T$w,T$O,T$v,T$y,T$F,T$o=[];for(T$w=0,T$O=T$s.length;T$w<T$O;T$w++)T$v=T$s[T$w]*T$x,T$y=T$w<T$O-1?T$s[T$w+1]*T$x:T$L.length,(T$F=T$T.linkedList(T$L,T$v,T$y,T$x,!1))===T$F.next&&(T$F.steiner=!0),T$o.push(T$T.getLeftmost(T$F));for(T$o.sort(T$T.compareX),T$w=0;T$w<T$o.length;T$w++)T$T.eliminateHole(T$o[T$w],T$m),T$m=T$T.filterPoints(T$m,T$m.next);return T$m;},T$T.compareX=function(T$L,T$s){return T$L.x-T$s.x;},T$T.eliminateHole=function(T$L,T$s){if(T$s=T$T.findHoleBridge(T$L,T$s)){var T$m=T$T.splitPolygon(T$s,T$L);T$T.filterPoints(T$m,T$m.next);}},T$T.findHoleBridge=function(T$L,T$s){var T$m,T$x=T$s,T$w=T$L.x,T$O=T$L.y,T$v=-1/0;do{if(T$O<=T$x.y&&T$O>=T$x.next.y&&T$x.next.y!==T$x.y){var T$y=T$x.x+(T$O-T$x.y)*(T$x.next.x-T$x.x)/(T$x.next.y-T$x.y);if(T$y<=T$w&&T$v<T$y){if((T$v=T$y)===T$w){if(T$O===T$x.y)return T$x;if(T$O===T$x.next.y)return T$x.next;}T$m=T$x.x<T$x.next.x?T$x:T$x.next;}}T$x=T$x.next;}while(T$x!==T$s);if(!T$m)return null;if(T$w===T$v)return T$m.prev;var T$F,T$o=T$m,T$V=T$m.x,T$C=T$m.y,T$E=1/0;for(T$x=T$m.next;T$x!==T$o;)T$w>=T$x.x&&T$x.x>=T$V&&T$w!==T$x.x&&T$T.pointInTriangle(T$O<T$C?T$w:T$v,T$O,T$V,T$C,T$O<T$C?T$v:T$w,T$O,T$x.x,T$x.y)&&((T$F=Math.abs(T$O-T$x.y)/(T$w-T$x.x))<T$E||T$F===T$E&&T$x.x>T$m.x)&&T$T.locallyInside(T$x,T$L)&&(T$m=T$x,T$E=T$F),T$x=T$x.next;return T$m;},T$T.indexCurve=function(T$L,T$s,T$m,T$x){for(var T$w=T$L;null===T$w.z&&(T$w.z=T$T.zOrder(T$w.x,T$w.y,T$s,T$m,T$x)),T$w.prevZ=T$w.prev,T$w.nextZ=T$w.next,(T$w=T$w.next)!==T$L;);T$w.prevZ.nextZ=null,T$w.prevZ=null,T$T.sortLinked(T$w);},T$T.sortLinked=function(T$L){var T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o=1;do{for(T$m=T$L,T$O=T$L=null,T$v=0;T$m;){for(T$v++,T$x=T$m,T$s=T$y=0;T$s<T$o&&(T$y++,T$x=T$x.nextZ);T$s++);for(T$F=T$o;0<T$y||0<T$F&&T$x;)0!==T$y&&(0===T$F||!T$x||T$m.z<=T$x.z)?(T$m=(T$w=T$m).nextZ,T$y--):(T$x=(T$w=T$x).nextZ,T$F--),T$O?T$O.nextZ=T$w:T$L=T$w,T$w.prevZ=T$O,T$O=T$w;T$m=T$x;}T$O.nextZ=null,T$o*=2;}while(1<T$v);return T$L;},T$T.zOrder=function(T$L,T$s,T$m,T$x,T$w){return(T$L=1431655765&((T$L=858993459&((T$L=252645135&((T$L=16711935&((T$L=32767*(T$L-T$m)*T$w)|T$L<<8))|T$L<<4))|T$L<<2))|T$L<<1))|(T$s=1431655765&((T$s=858993459&((T$s=252645135&((T$s=16711935&((T$s=32767*(T$s-T$x)*T$w)|T$s<<8))|T$s<<4))|T$s<<2))|T$s<<1))<<1;},T$T.getLeftmost=function(T$L){for(var T$s=T$L,T$m=T$L;T$s.x<T$m.x&&(T$m=T$s),(T$s=T$s.next)!==T$L;);return T$m;},T$T.pointInTriangle=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){return 0<=(T$w-T$v)*(T$s-T$y)-(T$L-T$v)*(T$O-T$y)&&0<=(T$L-T$v)*(T$x-T$y)-(T$m-T$v)*(T$s-T$y)&&0<=(T$m-T$v)*(T$O-T$y)-(T$w-T$v)*(T$x-T$y);},T$T.isValidDiagonal=function(T$L,T$s){return T$L.next.i!==T$s.i&&T$L.prev.i!==T$s.i&&!T$T.intersectsPolygon(T$L,T$s)&&T$T.locallyInside(T$L,T$s)&&T$T.locallyInside(T$s,T$L)&&T$T.middleInside(T$L,T$s);},T$T.area=function(T$L,T$s,T$m){return(T$s.y-T$L.y)*(T$m.x-T$s.x)-(T$s.x-T$L.x)*(T$m.y-T$s.y);},T$T.equals=function(T$L,T$s){return T$L.x===T$s.x&&T$L.y===T$s.y;},T$T.intersects=function(T$L,T$s,T$m,T$x){return!!(T$T.equals(T$L,T$s)&&T$T.equals(T$m,T$x)||T$T.equals(T$L,T$x)&&T$T.equals(T$m,T$s))||0<T$T.area(T$L,T$s,T$m)!=0<T$T.area(T$L,T$s,T$x)&&0<T$T.area(T$m,T$x,T$L)!=0<T$T.area(T$m,T$x,T$s);},T$T.intersectsPolygon=function(T$L,T$s){var T$m=T$L;do{if(T$m.i!==T$L.i&&T$m.next.i!==T$L.i&&T$m.i!==T$s.i&&T$m.next.i!==T$s.i&&T$T.intersects(T$m,T$m.next,T$L,T$s))return!0;T$m=T$m.next;}while(T$m!==T$L);return!1;},T$T.locallyInside=function(T$L,T$s){return T$T.area(T$L.prev,T$L,T$L.next)<0?0<=T$T.area(T$L,T$s,T$L.next)&&0<=T$T.area(T$L,T$L.prev,T$s):T$T.area(T$L,T$s,T$L.prev)<0||T$T.area(T$L,T$L.next,T$s)<0;},T$T.middleInside=function(T$L,T$s){for(var T$m=T$L,T$x=!1,T$w=(T$L.x+T$s.x)/2,T$O=(T$L.y+T$s.y)/2;T$m.y>T$O!=T$m.next.y>T$O&&T$m.next.y!==T$m.y&&T$w<(T$m.next.x-T$m.x)*(T$O-T$m.y)/(T$m.next.y-T$m.y)+T$m.x&&(T$x=!T$x),(T$m=T$m.next)!==T$L;);return T$x;},T$T.splitPolygon=function(T$L,T$s){var T$m=new T$wL(T$L.i,T$L.x,T$L.y),T$x=new T$wL(T$s.i,T$s.x,T$s.y),T$w=T$L.next,T$O=T$s.prev;return(T$L.next=T$s).prev=T$L,(T$m.next=T$w).prev=T$m,(T$x.next=T$m).prev=T$x,(T$O.next=T$x).prev=T$O,T$x;},T$T.insertNode=function(T$L,T$s,T$m,T$x){var T$w=new T$wL(T$L,T$s,T$m);return T$x?(T$w.next=T$x.next,(T$w.prev=T$x).next.prev=T$w,T$x.next=T$w):(T$w.prev=T$w).next=T$w,T$w;},T$T.removeNode=function(T$L){T$L.next.prev=T$L.prev,T$L.prev.next=T$L.next,T$L.prevZ&&(T$L.prevZ.nextZ=T$L.nextZ),T$L.nextZ&&(T$L.nextZ.prevZ=T$L.prevZ);},T$T.signedArea=function(T$L,T$s,T$m,T$x){for(var T$w=0,T$O=T$s,T$v=T$m-T$x;T$O<T$m;T$O+=T$x)T$w+=(T$L[T$v]-T$L[T$O])*(T$L[T$O+1]+T$L[T$v+1]),T$v=T$O;return T$w;},T$T;}(),T$wL=function(){function T$L(T$L,T$s,T$m){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=T$L,this.x=T$s,this.y=T$m,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1;}return T$E(T$L,"laya.webgl.shapes.EarcutNode"),T$L;}(),T$OL=(function(){function T$L(T$L,T$s,T$m,T$x,T$w,T$O,T$v){this.lineWidth=T$L,this.lineColor=T$s,this.lineAlpha=T$m,this.fillColor=T$x,this.fillAlpha=T$w,this.shape=T$v,this.fill=T$O;}T$E(T$L,"laya.webgl.shapes.GeometryData");var T$s=T$L.prototype;T$s.clone=function(){return new T$L(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape);},T$s.getIndexData=function(){return null;},T$s.getVertexData=function(){return null;},T$s.destroy=function(){this.shape=null;};}(),function(){function T$L(T$L){if(T$L instanceof Float32Array)this.points=T$L;else if(T$L instanceof Array){T$L.length;this.points=new Float32Array(T$L);}}T$E(T$L,"laya.webgl.shapes.Vertex");var T$s=T$L.prototype;T$Y.imps(T$s,{"laya.webgl.shapes.IShape":!0}),T$s.getData=function(T$L,T$s,T$m){},T$s.needUpdate=function(T$L){return!1;},T$s.rebuild=function(T$L){},T$s.setMatrix=function(T$L){};}(),function(){function T$F(T$L){void 0===T$L&&(T$L=1e4),this._renderType=T$L;}T$E(T$F,"laya.webgl.submit.Submit");var T$L=T$F.prototype;return T$Y.imps(T$L,{"laya.webgl.submit.ISubmit":!0}),T$L.releaseRender=function(){var T$L=T$F._cache;(T$L[T$L._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null;},T$L.getRenderType=function(){return this._renderType;},T$L.renderSubmit=function(){if(0===this._numEle)return 1;var T$L=this.shaderValue.textureHost;if(T$L){var T$s=T$L.source;if(!T$L.bitmap||!T$s)return 1;this.shaderValue.texture=T$s,T$L.alphaTexture&&T$L.alphaTexture.source&&(this.shaderValue.texture1=T$L.alphaTexture.source);}this._vb.bind_upload(this._ib);var T$m=T$SL.mainContext;return this.shaderValue.upload(),T$I.activeBlendFunction!==this._blendFn&&(T$m.enable(3042),this._blendFn(T$m),T$I.activeBlendFunction=this._blendFn),T$c.drawCall++,T$c.trianglesFaces+=this._numEle/3,T$m.drawElements(4,this._numEle,5123,this._startIdx),1;},T$F.__init__=function(){var T$L=T$F.RENDERBASE=new T$F(-1);T$L.shaderValue=new T$fL(0,0),T$L.shaderValue.ALPHA=-1234;},T$F.createSubmit=function(T$L,T$s,T$m,T$x,T$w){var T$O=T$F._cache._length?T$F._cache[--T$F._cache._length]:new T$F();null==T$m&&((T$m=T$O._selfVb||(T$O._selfVb=T$tL.create(-1))).clear(),T$x=0),T$O._ib=T$s,T$O._vb=T$m,T$O._startIdx=T$x*T$TL.BYTES_PIDX,T$O._numEle=0;var T$v=T$L._nBlendType;T$O._blendFn=T$L._targets?T$I.targetFns[T$v]:T$I.fns[T$v],T$O.shaderValue=T$w,T$O.shaderValue.setValue(T$L._shader2D);var T$y=T$L._shader2D.filters;return T$y&&T$O.shaderValue.setFilters(T$y),T$O;},T$F.createShape=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v=T$F._cache._length?T$F._cache[--T$F._cache._length]:new T$F();T$v._ib=T$s,T$v._vb=T$m,T$v._numEle=T$x,T$v._startIdx=T$w,T$v.shaderValue=T$O,T$v.shaderValue.setValue(T$L._shader2D);var T$y=T$L._nBlendType;return T$v._blendFn=T$L._targets?T$I.targetFns[T$y]:T$I.fns[T$y],T$v;},T$F.TYPE_2D=1e4,T$F.TYPE_CANVAS=10003,T$F.TYPE_CMDSETRT=10004,T$F.TYPE_CUSTOM=10005,T$F.TYPE_BLURRT=10006,T$F.TYPE_CMDDESTORYPRERT=10007,T$F.TYPE_DISABLESTENCIL=10008,T$F.TYPE_OTHERIBVB=10009,T$F.TYPE_PRIMITIVE=10010,T$F.TYPE_RT=10011,T$F.TYPE_BLUR_RT=10012,T$F.TYPE_TARGET=10013,T$F.TYPE_CHANGE_VALUE=10014,T$F.TYPE_SHAPE=10015,T$F.TYPE_TEXTURE=10016,T$F.TYPE_FILLTEXTURE=10017,T$F.RENDERBASE=null,T$F._cache=((T$F._cache=[])._length=0,T$F._cache),T$F;}()),T$vL=function(){function T$x(){this.fun=null,this.args=null;}T$E(T$x,"laya.webgl.submit.SubmitCMD");var T$L=T$x.prototype;return T$Y.imps(T$L,{"laya.webgl.submit.ISubmit":!0}),T$L.renderSubmit=function(){return this.fun.apply(null,this.args),1;},T$L.getRenderType=function(){return 0;},T$L.releaseRender=function(){var T$L=T$x._cache;T$L[T$L._length++]=this;},T$x.create=function(T$L,T$s){var T$m=T$x._cache._length?T$x._cache[--T$x._cache._length]:new T$x();return T$m.fun=T$s,T$m.args=T$L,T$m;},T$x._cache=((T$x._cache=[])._length=0,T$x._cache),T$x;}(),T$yL=function(){function T$s(){this.variables={};}T$E(T$s,"laya.webgl.submit.SubmitCMDScope");var T$L=T$s.prototype;return T$L.getValue=function(T$L){return this.variables[T$L];},T$L.addValue=function(T$L,T$s){return this.variables[T$L]=T$s;},T$L.setValue=function(T$L,T$s){return this.variables.hasOwnProperty(T$L)?this.variables[T$L]=T$s:null;},T$L.clear=function(){for(var T$L in this.variables)delete this.variables[T$L];},T$L.recycle=function(){this.clear(),T$s.POOL.push(this);},T$s.create=function(){var T$L=T$s.POOL.pop();return T$L||(T$L=new T$s()),T$L;},T$s.POOL=[],T$s;}(),T$FL=function(){function T$C(){this.offset=0,this.startIndex=0,this._mat=T$_.create();}T$E(T$C,"laya.webgl.submit.SubmitOtherIBVB");var T$L=T$C.prototype;return T$Y.imps(T$L,{"laya.webgl.submit.ISubmit":!0}),T$L.releaseRender=function(){var T$L=T$C._cache;(T$L[T$L._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null;},T$L.getRenderType=function(){return 10009;},T$L.renderSubmit=function(){var T$L=this._shaderValue.textureHost;if(T$L){var T$s=T$L.source;if(!T$L.bitmap||!T$s)return 1;this._shaderValue.texture=T$s;}this._vb.bind_upload(this._ib);var T$m=T$eL.worldMatrix4,T$x=T$_.TEMP;T$_.mulPre(this._mat,T$m[0],T$m[1],T$m[4],T$m[5],T$m[12],T$m[13],T$x);var T$w=T$eL.worldMatrix4=T$C.tempMatrix4;T$w[0]=T$x.a,T$w[1]=T$x.b,T$w[4]=T$x.c,T$w[5]=T$x.d,T$w[12]=T$x.tx,T$w[13]=T$x.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var T$O=T$SL.mainContext;return T$I.activeBlendFunction!==this._blendFn&&(T$O.enable(3042),this._blendFn(T$O),T$I.activeBlendFunction=this._blendFn),T$c.drawCall++,T$c.trianglesFaces+=this._numEle/3,T$O.drawElements(4,this._numEle,5123,this.startIndex),T$eL.worldMatrix4=T$m,T$gL.activeShader=null,1;},T$C.create=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F){void 0===T$F&&(T$F=0);var T$o=T$C._cache._length?T$C._cache[--T$C._cache._length]:new T$C();T$o._ib=T$m,T$o._vb=T$s,T$o._numEle=T$x,T$o._shader=T$w,T$o._shaderValue=T$O;var T$V=T$L._nBlendType;switch(T$o._blendFn=T$L._targets?T$I.targetFns[T$V]:T$I.fns[T$V],T$F){case 0:T$o.offset=0,T$o.startIndex=T$y/(T$TL.BYTES_PE*T$s.vertexStride)*1.5,T$o.startIndex*=T$TL.BYTES_PIDX;break;case 1:T$o.startIndex=T$v,T$o.offset=T$y;}return T$o;},T$C._cache=((T$C._cache=[])._length=0,T$C._cache),T$C.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T$C;}(),T$oL=function(){function T$m(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new T$N(),this.screenRect=new T$N();}T$E(T$m,"laya.webgl.submit.SubmitScissor");var T$L=T$m.prototype;return T$Y.imps(T$L,{"laya.webgl.submit.ISubmit":!0}),T$L._scissor=function(T$L,T$s,T$m,T$x){var T$w=T$eL.worldMatrix4,T$O=T$w[0],T$v=T$w[5],T$y=T$w[12],T$F=T$w[13];if(T$x*=T$v,(T$m*=T$O)<1||T$x<1)return!1;var T$o=(T$L=T$L*T$O+T$y)+T$m,T$V=(T$s=T$s*T$v+T$F)+T$x;T$L<0&&(T$m=T$o-(T$L=0)),T$s<0&&(T$x=T$V-(T$s=0));var T$C=T$eL.worldClipRect;if(T$L=Math.max(T$L,T$C.x),T$s=Math.max(T$s,T$C.y),T$m=Math.min(T$o,T$C.right)-T$L,T$x=Math.min(T$V,T$C.bottom)-T$s,T$m<1||T$x<1)return!1;var T$E=T$eL.worldScissorTest;return this.screenRect.copyFrom(T$C),T$C.x=T$L,T$C.y=T$s,T$C.width=T$m,T$C.height=T$x,T$eL.worldScissorTest=!0,T$s=T$eL.height-T$s-T$x,T$SL.mainContext.scissor(T$L,T$s,T$m,T$x),T$SL.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),T$E?(T$s=T$eL.height-this.screenRect.y-this.screenRect.height,T$SL.mainContext.scissor(this.screenRect.x,T$s,this.screenRect.width,this.screenRect.height),T$SL.mainContext.enable(3089)):(T$SL.mainContext.disable(3089),T$eL.worldScissorTest=!1),T$C.copyFrom(this.screenRect),!0;},T$L._scissorWithTagart=function(T$L,T$s,T$m,T$x){if(T$m<1||T$x<1)return!1;var T$w=T$L+T$m,T$O=T$s+T$x;T$L<0&&(T$m=T$w-(T$L=0)),T$s<0&&(T$x=T$O-(T$s=0));var T$v=T$eL.worldClipRect;if(T$L=Math.max(T$L,T$v.x),T$s=Math.max(T$s,T$v.y),T$m=Math.min(T$w,T$v.right)-T$L,T$x=Math.min(T$O,T$v.bottom)-T$s,T$m<1||T$x<1)return!1;var T$y=T$eL.worldScissorTest;return this.screenRect.copyFrom(T$v),T$eL.worldScissorTest=!0,T$v.x=T$L,T$v.y=T$s,T$v.width=T$m,T$v.height=T$x,T$s=T$eL.height-T$s-T$x,T$SL.mainContext.scissor(T$L,T$s,T$m,T$x),T$SL.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),T$y?(T$s=T$eL.height-this.screenRect.y-this.screenRect.height,T$SL.mainContext.scissor(this.screenRect.x,T$s,this.screenRect.width,this.screenRect.height),T$SL.mainContext.enable(3089)):(T$SL.mainContext.disable(3089),T$eL.worldScissorTest=!1),T$v.copyFrom(this.screenRect),!0;},T$L.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1;},T$L.getRenderType=function(){return 0;},T$L.releaseRender=function(){var T$L=T$m._cache;(T$L[T$L._length++]=this).context=null;},T$m.create=function(T$L){var T$s=T$m._cache._length?T$m._cache[--T$m._cache._length]:new T$m();return T$s.context=T$L,T$s;},T$m._cache=((T$m._cache=[])._length=0,T$m._cache),T$m;}(),T$VL=function(){function T$F(){this.step=0,this.blendMode=null,this.level=0;}T$E(T$F,"laya.webgl.submit.SubmitStencil");var T$L=T$F.prototype;return T$Y.imps(T$L,{"laya.webgl.submit.ISubmit":!0}),T$L.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8();}return 1;},T$L.getRenderType=function(){return 0;},T$L.releaseRender=function(){var T$L=T$F._cache;T$L[T$L._length++]=this;},T$L.do1=function(){var T$L=T$SL.mainContext;T$L.enable(2960),T$L.clear(1024),T$L.colorMask(!1,!1,!1,!1),T$L.stencilFunc(514,this.level,255),T$L.stencilOp(7680,7680,7682);},T$L.do2=function(){var T$L=T$SL.mainContext;T$L.stencilFunc(514,this.level+1,255),T$L.colorMask(!0,!0,!0,!0),T$L.stencilOp(7680,7680,7680);},T$L.do3=function(){var T$L=T$SL.mainContext;T$L.colorMask(!0,!0,!0,!0),T$L.stencilOp(7680,7680,7680),T$L.clear(1024),T$L.disable(2960);},T$L.do4=function(){var T$L=T$SL.mainContext;0==this.level&&(T$L.enable(2960),T$L.clear(1024)),T$L.colorMask(!1,!1,!1,!1),T$L.stencilFunc(519,0,255),T$L.stencilOp(7680,7680,7682);},T$L.do5=function(){var T$L=T$SL.mainContext;T$L.stencilFunc(514,this.level,255),T$L.colorMask(!0,!0,!0,!0),T$L.stencilOp(7680,7680,7680);},T$L.do6=function(){var T$L=T$SL.mainContext;T$I.targetFns[T$I.TOINT[this.blendMode]](T$L);},T$L.do7=function(){var T$L=T$SL.mainContext;T$L.colorMask(!1,!1,!1,!1),T$L.stencilOp(7680,7680,7683);},T$L.do8=function(){var T$L=T$SL.mainContext;T$L.colorMask(!0,!0,!0,!0),T$L.stencilFunc(514,this.level,255),T$L.stencilOp(7680,7680,7680);},T$F.restore=function(T$L,T$s,T$m,T$x,T$w){var T$O;if((T$L._renderKey=0)<T$F._mask&&T$F._mask--,0==T$F._mask)T$O=laya.webgl.submit.SubmitStencil.create(3),T$L.addRenderObject(T$O),T$L._curSubmit=T$OL.RENDERBASE;else{T$O=laya.webgl.submit.SubmitStencil.create(7),T$L.addRenderObject(T$O);var T$v=T$L._vb;T$v._byteLength;if(T$jL.fillRectImgVb(T$v,null,T$s.x,T$s.y,T$s.width,T$s.height,T$A.DEF_UV,T$m,T$x,T$w,0,0)){T$L._shader2D.glTexture=null;var T$y=T$L._curSubmit=T$OL.createSubmit(T$L,T$L._ib,T$v,(T$v._byteLength-64)/32*3,T$fL.create(2,0));T$y.shaderValue.ALPHA=1,T$L._submits[T$L._submits._length++]=T$y,T$L._curSubmit._numEle+=6,T$L._curSubmit=T$OL.RENDERBASE;}else alert("clipRect calc stencil rect error");T$O=laya.webgl.submit.SubmitStencil.create(8),T$L.addRenderObject(T$O);}},T$F.restore2=function(T$L,T$s){var T$m;(T$L._renderKey=0)<T$F._mask&&T$F._mask--,0==T$F._mask?(T$m=laya.webgl.submit.SubmitStencil.create(3),T$L.addRenderObject(T$m),T$L._curSubmit=T$OL.RENDERBASE):(T$m=laya.webgl.submit.SubmitStencil.create(7),T$L.addRenderObject(T$m),T$L._submits[T$L._submits._length++]=T$s,T$m=laya.webgl.submit.SubmitStencil.create(8),T$L.addRenderObject(T$m));},T$F.create=function(T$L){var T$s=T$F._cache._length?T$F._cache[--T$F._cache._length]:new T$F();return 5==(T$s.step=T$L)&&++T$F._mask,T$s.level=T$F._mask,T$s;},T$F._cache=((T$F._cache=[])._length=0,T$F._cache),T$F._mask=0,T$F;}(),T$CL=function(){function T$y(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null;}T$E(T$y,"laya.webgl.submit.SubmitTarget");var T$L=T$y.prototype;return T$Y.imps(T$L,{"laya.webgl.submit.ISubmit":!0}),T$L.renderSubmit=function(){this._vb.bind_upload(this._ib);var T$L=this.scope.getValue(this.proName);return T$L&&(this.shaderValue.texture=T$L.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[T$L.width,T$L.height]),this.shaderValue.upload(),this.blend(),T$c.drawCall++,T$c.trianglesFaces+=this._numEle/3,T$SL.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1;},T$L.blend=function(){if(T$I.activeBlendFunction!==T$I.fns[this.blendType]){var T$L=T$SL.mainContext;T$L.enable(3042),T$I.fns[this.blendType](T$L),T$I.activeBlendFunction=T$I.fns[this.blendType];}},T$L.getRenderType=function(){return 0;},T$L.releaseRender=function(){var T$L=T$y._cache;(T$L[T$L._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null;},T$y.create=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v=T$y._cache._length?T$y._cache[--T$y._cache._length]:new T$y();return T$v._ib=T$s,T$v._vb=T$m,T$v.proName=T$O,T$v._startIdx=T$x*T$TL.BYTES_PIDX,T$v._numEle=0,T$v.blendType=T$L._nBlendType,T$v.shaderValue=T$w,T$v.shaderValue.setValue(T$L._shader2D),T$v;},T$y._cache=((T$y._cache=[])._length=0,T$y._cache),T$y;}(),T$EL=function(){function T$L(){this._sourceStr=null;}T$E(T$L,"laya.webgl.text.CharSegment");var T$s=T$L.prototype;return T$Y.imps(T$s,{"laya.webgl.text.ICharSegment":!0}),T$s.textToSpit=function(T$L){this._sourceStr=T$L;},T$s.getChar=function(T$L){return this._sourceStr.charAt(T$L);},T$s.getCharCode=function(T$L){return this._sourceStr.charCodeAt(T$L);},T$s.length=function(){return this._sourceStr.length;},T$L;}(),T$rL=function(){var T$L;function T$c(){}return T$E(T$c,"laya.webgl.text.DrawText"),T$c.__init__=function(){T$c._charsTemp=new Array(),T$c._drawValue=new T$L(),T$c._charSeg=new T$EL();},T$c.customCharSeg=function(T$L){T$c._charSeg=T$L;},T$c.getChar=function(T$L,T$s,T$m){var T$x=T$lL.createOneChar(T$L,T$m);return-1!=T$s&&(T$c._charsCache[T$s]=T$x),T$x;},T$c._drawSlow=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o,T$V,T$C,T$E,T$r,T$u){var T$T,T$j,T$D=T$c._drawValue.value(T$O,T$y,T$F,T$o,T$E,T$r,T$u),T$e=0,T$b=0,T$S=T$c._charsTemp,T$H=0,T$Y=NaN;if(T$x)for(T$S.length=T$x.length,T$e=0,T$b=T$x.length;T$e<T$b;T$e++)(T$j=T$x[T$e])&&(T$Y=T$j.charNum+T$D.txtID,T$S[T$e]=T$T=T$c._charsCache[T$Y]||T$c.getChar(T$j.char,T$Y,T$D),T$T.active());else{var T$a=T$m instanceof laya.utils.WordText?T$m.toString():T$m;if(T$R.CharacterCache){T$c._charSeg.textToSpit(T$a);var T$f=T$c._charSeg.length();for(T$e=0,T$b=T$S.length=T$f;T$e<T$b;T$e++)T$Y=T$c._charSeg.getCharCode(T$e)+T$D.txtID,T$S[T$e]=T$T=T$c._charsCache[T$Y]||T$c.getChar(T$c._charSeg.getChar(T$e),T$Y,T$D),T$T.active(),T$H+=T$T.cw;}else T$S.length=0,(T$T=T$c.getChar(T$a,-1,T$D)).active(),T$H+=T$T.cw,T$S[0]=T$T;}var T$_=0;null!==T$v&&"left"!==T$v&&(T$_=-("center"==T$v?T$H/2:T$H));var T$Q,T$N,T$i=NaN,T$U=0;if(T$x)for(T$e=0,T$b=T$S.length;T$e<T$b;T$e++)T$T=T$S[T$e],T$j=T$x[T$e],T$T&&T$j&&!T$T.isSpace&&(T$i=T$T.borderSize,T$Q=T$T.texture,T$s._drawText(T$Q,T$V+T$_+T$j.x*T$E-T$i,T$C+T$j.y*T$r-T$i,T$Q.width,T$Q.height,T$w,0,0,0,0));else{for(T$e=0,T$b=T$S.length;T$e<T$b;T$e++)(T$T=T$S[T$e])&&!T$T.isSpace&&(T$i=T$T.borderSize,T$Q=T$T.texture,T$s._drawText(T$Q,T$V+T$_-T$i,T$C-T$i,T$Q.width,T$Q.height,T$w,0,0,0,0),T$L&&((T$N=T$L[T$U++])||(T$N=T$L[T$U-1]=[]),T$N[0]=T$Q,T$N[1]=T$_-T$i,T$N[2]=-T$i)),T$_+=T$T.cw;T$L&&(T$L.length=T$U);}},T$c._drawFast=function(T$L,T$s,T$m,T$x,T$w){for(var T$O,T$v,T$y=0,T$F=T$L.length;T$y<T$F;T$y++)(T$O=(T$v=T$L[T$y])[0]).active(),T$s._drawText(T$O,T$x+T$v[1],T$w+T$v[2],T$O.width,T$O.height,T$m,0,0,0,0);},T$c.drawText=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o,T$V,T$C){if(void 0===T$C&&(T$C=0),!(T$s&&0===T$s.length||T$m&&0===T$m.length)){var T$E=T$x.a,T$r=T$x.d;(0!==T$x.b||0!==T$x.c)&&(T$E=T$r=1);var T$u=1!==T$E||1!==T$r;if(T$u&&T$Y.stage.transform){var T$T=T$Y.stage.transform;T$u=T$T.a===T$E&&T$T.d===T$r;}else T$u=!1;if(T$u){var T$j=(T$x=T$x.copyTo(T$aL._tmpMatrix)).tx,T$D=T$x.ty;T$x.scale(1/T$E,1/T$r),T$x._checkTransform(),T$o*=T$E,T$V*=T$r,T$o+=T$j-T$x.tx,T$V+=T$D-T$x.ty;}else T$E=T$r=1;if(T$m)T$c._drawSlow(null,T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o,T$V,T$E,T$r,T$C);else{if(null===T$s.toUpperCase){var T$e=T$E+1e5*T$r,T$b=T$s;return void(T$b.changed||T$b.id!==T$e?(T$b.id=T$e,T$b.changed=!1,T$c._drawSlow(T$b.save,T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o,T$V,T$E,T$r,T$C)):T$c._drawFast(T$b.save,T$L,T$x,T$o,T$V));}var T$S=T$s+T$w.toString()+T$v+T$y+T$F+T$E+T$r+T$O,T$H=T$c._textsCache[T$S];T$R.CharacterCache?T$H?T$c._drawFast(T$H,T$L,T$x,T$o,T$V):(T$c._textsCache.__length||(T$c._textsCache.__length=0),T$c._textsCache.__length>T$a.WebGLTextCacheCount&&((T$c._textsCache={}).__length=0,T$c._curPoolIndex=0),T$c._textCachesPool[T$c._curPoolIndex]?(T$H=T$c._textsCache[T$S]=T$c._textCachesPool[T$c._curPoolIndex]).length=0:T$c._textCachesPool[T$c._curPoolIndex]=T$H=T$c._textsCache[T$S]=[],T$c._textsCache.__length++,T$c._curPoolIndex++,T$c._drawSlow(T$H,T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o,T$V,T$E,T$r,T$C)):T$c._drawSlow(T$H,T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o,T$V,T$E,T$r,T$C);}}},T$c._charsTemp=null,T$c._textCachesPool=[],T$c._curPoolIndex=0,T$c._charsCache={},T$c._textsCache={},T$c._drawValue=null,T$c.d=[],T$c._charSeg=null,T$c.__init$=function(){T$L=function(){function T$F(){}return T$E(T$F,""),T$F.prototype.value=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){this.font=T$L,this.fillColor=T$s,this.borderColor=T$m,this.lineWidth=T$x,this.scaleX=T$w,this.scaleY=T$O,this.underLine=T$v;var T$y=T$L.toString()+T$w+T$O+T$x+(T$s?T$s.toLowerCase():" ")+(T$m?T$m.toLowerCase():" ")+T$v;return this.txtID=T$F._keymap[T$y],this.txtID||(this.txtID=1e-7*++T$F._keymapCount,T$F._keymap[T$y]=this.txtID),this;},T$F.clear=function(){T$F._keymap={},T$F._keymapCount=1;},T$F._keymap={},T$F._keymapCount=1,T$F;}();},T$c;}(),T$uL=function(){function T$w(T$L){this._index=0,this._size=14,this._italic=-2,T$w._cache2=T$w._cache2||[],this.setFont(T$L||"14px Arial");}T$E(T$w,"laya.webgl.text.FontInContext");var T$L=T$w.prototype;return T$L.setFont=function(T$L){var T$s=T$w._cache2[T$L];if(T$s)this._words=T$s[0],this._size=T$s[1];else{this._words=T$L.split(" ");for(var T$m=0,T$x=this._words.length;T$m<T$x;T$m++)if(0<this._words[T$m].indexOf("px")){this._index=T$m;break;}this._size=parseInt(this._words[this._index]),T$w._cache2[T$L]=[this._words,this._size];}this._text=null,this._italic=-2;},T$L.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic;},T$L.hasType=function(T$L){for(var T$s=0,T$m=this._words.length;T$s<T$m;T$s++)if(this._words[T$s]===T$L)return T$s;return-1;},T$L.removeType=function(T$L){for(var T$s=0,T$m=this._words.length;T$s<T$m;T$s++)if(this._words[T$s]===T$L){this._words.splice(T$s,1),this._index>T$s&&this._index--;break;}this._text=null,this._italic=-2;},T$L.copyTo=function(T$L){return T$L._text=this._text,T$L._size=this._size,T$L._index=this._index,T$L._words=this._words.slice(),T$L._italic=-2,T$L;},T$L.toString=function(){return this._text?this._text:this._text=this._words.join(" ");},T$x(0,T$L,"size",function(){return this._size;},function(T$L){this._size=T$L,this._words[this._index]=T$L+"px",this._text=null;}),T$w.create=function(T$L){var T$s=T$w._cache[T$L];return T$s||(T$s=T$w._cache[T$L]=new T$w(T$L));},T$w.EMPTY=new T$w(),T$w._cache={},T$w._cache2=null,T$w;}(),T$TL=function(){function T$L(){}return T$E(T$L,"laya.webgl.utils.CONST3D2D"),T$L.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T$L.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],T$L.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],T$L._TMPARRAY=[],T$L._OFFSETX=0,T$L._OFFSETY=0,T$v(T$L,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT;},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT;}]),T$L;}(),T$jL=function(){function T$u(){}return T$E(T$u,"laya.webgl.utils.GlUtils"),T$u.make2DProjection=function(T$L,T$s,T$m){return[2/T$L,0,0,0,0,-2/T$s,0,0,0,0,2/T$m,0,-1,1,0,1];},T$u.fillIBQuadrangle=function(T$L,T$s){if(65535/4<T$s)throw Error("IBQuadrangle count:"+T$s+" must<:"+Math.floor(65535/4));T$s=Math.floor(T$s),T$L._resizeBuffer(6*(T$s+1)*2,!1),T$L.byteLength=T$L.bufferLength;for(var T$m=T$L.getUint16Array(),T$x=0,T$w=0;T$w<T$s;T$w++)T$m[T$x++]=4*T$w,T$m[T$x++]=4*T$w+2,T$m[T$x++]=4*T$w+1,T$m[T$x++]=4*T$w,T$m[T$x++]=4*T$w+3,T$m[T$x++]=4*T$w+2;return T$L.setNeedUpload(),!0;},T$u.expandIBQuadrangle=function(T$L,T$s){T$L.bufferLength>=6*T$s*2||T$u.fillIBQuadrangle(T$L,T$s);},T$u.mathCeilPowerOfTwo=function(T$L){return T$L--,T$L|=T$L>>1,T$L|=T$L>>2,T$L|=T$L>>4,T$L|=T$L>>8,T$L|=T$L>>16,++T$L;},T$u.fillQuadrangleImgVb=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){var T$F=16+(T$L._byteLength>>2);T$L.byteLength=T$F<<2;var T$o=T$L.getFloat32Array();T$o[(T$F-=16)+2]=T$w[0],T$o[T$F+3]=T$w[1],T$o[T$F+6]=T$w[2],T$o[T$F+7]=T$w[3],T$o[T$F+10]=T$w[4],T$o[T$F+11]=T$w[5],T$o[T$F+14]=T$w[6],T$o[T$F+15]=T$w[7];var T$V=T$O.a,T$C=T$O.b,T$E=T$O.c,T$r=T$O.d;if(1!==T$V||0!==T$C||0!==T$E||1!==T$r){T$O.bTransform=!0;var T$u=T$O.tx+T$v,T$T=T$O.ty+T$y;T$o[T$F]=(T$x[0]+T$s)*T$V+(T$x[1]+T$m)*T$E+T$u,T$o[T$F+1]=(T$x[0]+T$s)*T$C+(T$x[1]+T$m)*T$r+T$T,T$o[T$F+4]=(T$x[2]+T$s)*T$V+(T$x[3]+T$m)*T$E+T$u,T$o[T$F+5]=(T$x[2]+T$s)*T$C+(T$x[3]+T$m)*T$r+T$T,T$o[T$F+8]=(T$x[4]+T$s)*T$V+(T$x[5]+T$m)*T$E+T$u,T$o[T$F+9]=(T$x[4]+T$s)*T$C+(T$x[5]+T$m)*T$r+T$T,T$o[T$F+12]=(T$x[6]+T$s)*T$V+(T$x[7]+T$m)*T$E+T$u,T$o[T$F+13]=(T$x[6]+T$s)*T$C+(T$x[7]+T$m)*T$r+T$T;}else T$O.bTransform=!1,T$s+=T$O.tx+T$v,T$m+=T$O.ty+T$y,T$o[T$F]=T$s+T$x[0],T$o[T$F+1]=T$m+T$x[1],T$o[T$F+4]=T$s+T$x[2],T$o[T$F+5]=T$m+T$x[3],T$o[T$F+8]=T$s+T$x[4],T$o[T$F+9]=T$m+T$x[5],T$o[T$F+12]=T$s+T$x[6],T$o[T$F+13]=T$m+T$x[7];return T$L._upload=!0;},T$u.fillTranglesVB=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){var T$y=(T$L._byteLength>>2)+T$x.length;T$L.byteLength=T$y<<2;var T$F=T$L.getFloat32Array();T$y-=T$x.length;for(var T$o=T$x.length,T$V=T$w.a,T$C=T$w.b,T$E=T$w.c,T$r=T$w.d,T$u=0;T$u<T$o;T$u+=4)if(T$F[T$y+T$u+2]=T$x[T$u+2],T$F[T$y+T$u+3]=T$x[T$u+3],1!==T$V||0!==T$C||0!==T$E||1!==T$r){T$w.bTransform=!0;var T$T=T$w.tx+T$O,T$j=T$w.ty+T$v;T$F[T$y+T$u]=(T$x[T$u]+T$s)*T$V+(T$x[T$u+1]+T$m)*T$E+T$T,T$F[T$y+T$u+1]=(T$x[T$u]+T$s)*T$C+(T$x[T$u+1]+T$m)*T$r+T$j;}else T$w.bTransform=!1,T$s+=T$w.tx+T$O,T$m+=T$w.ty+T$v,T$F[T$y+T$u]=T$s+T$x[T$u],T$F[T$y+T$u+1]=T$m+T$x[T$u+1];return T$L._upload=!0;},T$u.copyPreImgVb=function(T$L,T$s,T$m){var T$x=T$L._byteLength>>2;T$L.byteLength=T$x+16<<2;for(var T$w=T$L.getFloat32Array(),T$O=0,T$v=T$x-16;T$O<4;T$O++)T$w[T$x]=T$w[T$v]+T$s,++T$v,T$w[++T$x]=T$w[T$v]+T$m,++T$v,T$w[++T$x]=T$w[T$v],++T$v,T$w[++T$x]=T$w[T$v],++T$x,++T$v;T$L._upload=!0;},T$u.fillRectImgVb=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o,T$V,T$C,T$E){void 0===T$E&&(T$E=!1);var T$r,T$u,T$T,T$j,T$D,T$e,T$b,T$S,T$H,T$Y,T$a,T$f,T$_,T$Q,T$N,T$i,T$U=1,T$c=T$y.a,T$h=T$y.b,T$G=T$y.c,T$R=T$y.d,T$A=T$s&&T$s.width<99999999;if(1!==T$c||0!==T$h||0!==T$G||1!==T$R?(T$y.bTransform=!0,0===T$h&&0===T$G&&(T$U=23,T$H=T$w+T$m,T$Y=T$O+T$x,T$r=T$c*T$m+(T$a=T$y.tx+T$F),T$T=T$c*T$H+T$a,T$u=T$R*T$x+(T$f=T$y.ty+T$o),T$j=T$R*T$Y+T$f)):(T$U=23,T$y.bTransform=!1,T$T=(T$r=T$m+T$y.tx+T$F)+T$w,T$j=(T$u=T$x+T$y.ty+T$o)+T$O),T$A&&(T$D=T$s.x,T$e=T$s.y,T$b=T$s.width+T$D,T$S=T$s.height+T$e),1!==T$U){if(Math.min(T$r,T$T)>=T$b)return!1;if(Math.min(T$u,T$j)>=T$S)return!1;if(Math.max(T$T,T$r)<=T$D)return!1;if(Math.max(T$j,T$u)<=T$e)return!1;}var T$g=T$L._byteLength>>2;T$L.byteLength=16+T$g<<2;var T$$=T$L.getFloat32Array();switch(T$$[2+T$g]=T$v[0],T$$[3+T$g]=T$v[1],T$$[6+T$g]=T$v[2],T$$[7+T$g]=T$v[3],T$$[10+T$g]=T$v[4],T$$[11+T$g]=T$v[5],T$$[14+T$g]=T$v[6],T$$[15+T$g]=T$v[7],T$U){case 1:T$a=T$y.tx+T$F,T$f=T$y.ty+T$o;var T$p=T$c*T$m,T$Z=T$G*T$x,T$W=T$R*T$x,T$d=T$h*T$m,T$X=T$c*(T$H=T$w+T$m),T$I=T$G*(T$Y=T$O+T$x),T$n=T$R*T$Y,T$J=T$h*T$H;T$E?(T$_=T$p+T$Z+T$a,T$N=Math.round(T$_)-T$_,T$Q=T$W+T$d+T$f,T$i=Math.round(T$Q)-T$Q,T$$[T$g]=T$_+T$N,T$$[1+T$g]=T$Q+T$i,T$$[4+T$g]=T$X+T$Z+T$a+T$N,T$$[5+T$g]=T$W+T$J+T$f+T$i,T$$[8+T$g]=T$X+T$I+T$a+T$N,T$$[9+T$g]=T$n+T$J+T$f+T$i,T$$[12+T$g]=T$p+T$I+T$a+T$N,T$$[13+T$g]=T$n+T$d+T$f+T$i):(T$$[T$g]=T$p+T$Z+T$a,T$$[1+T$g]=T$W+T$d+T$f,T$$[4+T$g]=T$X+T$Z+T$a,T$$[5+T$g]=T$W+T$J+T$f,T$$[8+T$g]=T$X+T$I+T$a,T$$[9+T$g]=T$n+T$J+T$f,T$$[12+T$g]=T$p+T$I+T$a,T$$[13+T$g]=T$n+T$d+T$f);break;case 23:T$E?(T$_=T$r+T$V,T$N=Math.round(T$_)-T$_,T$Q=T$u,T$i=Math.round(T$Q)-T$Q,T$$[T$g]=T$_+T$N,T$$[1+T$g]=T$Q+T$i,T$$[4+T$g]=T$T+T$V+T$N,T$$[5+T$g]=T$u+T$i,T$$[8+T$g]=T$T+T$N,T$$[9+T$g]=T$j+T$i,T$$[12+T$g]=T$r+T$N,T$$[13+T$g]=T$j+T$i):(T$$[T$g]=T$r+T$V,T$$[1+T$g]=T$u,T$$[4+T$g]=T$T+T$V,T$$[5+T$g]=T$u,T$$[8+T$g]=T$T,T$$[9+T$g]=T$j,T$$[12+T$g]=T$r,T$$[13+T$g]=T$j);}return T$L._upload=!0;},T$u.fillLineVb=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){var T$F=.5*T$v,T$o=T$u._fillLineArray,T$V=-(T$x-T$O),T$C=T$m-T$w,T$E=Math.sqrt(T$V*T$V+T$C*T$C);T$V/=T$E,T$C/=T$E,T$V*=T$F,T$C*=T$F,T$o[0]=T$m-T$V,T$o[1]=T$x-T$C,T$o[4]=T$m+T$V,T$o[5]=T$x+T$C,T$o[8]=T$w+T$V,T$o[9]=T$O+T$C,T$o[12]=T$w-T$V,T$o[13]=T$O-T$C,T$y&&T$y.transformPointArray(T$o,T$o);var T$r=16+(T$L._byteLength>>2);return T$L.byteLength=T$r<<2,T$L.insertData(T$o,T$r-16),!0;},T$u._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T$u;}(),T$DL=(function(){function T$F(){}T$E(T$F,"laya.webgl.utils.MatirxArray"),T$F.ArrayMul=function(T$L,T$s,T$m){if(T$L){if(T$s)for(var T$x=NaN,T$w=NaN,T$O=NaN,T$v=NaN,T$y=0;T$y<4;T$y++)T$x=T$L[T$y],T$w=T$L[T$y+4],T$O=T$L[T$y+8],T$v=T$L[T$y+12],T$m[T$y]=T$x*T$s[0]+T$w*T$s[1]+T$O*T$s[2]+T$v*T$s[3],T$m[T$y+4]=T$x*T$s[4]+T$w*T$s[5]+T$O*T$s[6]+T$v*T$s[7],T$m[T$y+8]=T$x*T$s[8]+T$w*T$s[9]+T$O*T$s[10]+T$v*T$s[11],T$m[T$y+12]=T$x*T$s[12]+T$w*T$s[13]+T$O*T$s[14]+T$v*T$s[15];else T$F.copyArray(T$L,T$m);}else T$F.copyArray(T$s,T$m);},T$F.copyArray=function(T$L,T$s){if(T$L&&T$s)for(var T$m=0;T$m<T$L.length;T$m++)T$s[T$m]=T$L[T$m];};}(),function(){function T$s(T$L,T$s,T$m){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=T$L,this._vb=new T$tL(T$L,35048),T$s&&this._vb._resizeBuffer(T$s,!1),this._ib=new T$zL(),T$m&&this._ib._resizeBuffer(T$m,!1);}T$E(T$s,"laya.webgl.utils.Mesh2D");var T$L=T$s.prototype;return T$L.cloneWithNewVB=function(){var T$L=new T$s(this._stride,0,0);return T$L._ib=this._ib,T$L._quadNum=this._quadNum,T$L._attribInfo=this._attribInfo,T$L;},T$L.cloneWithNewVBIB=function(){var T$L=new T$s(this._stride,0,0);return T$L._attribInfo=this._attribInfo,T$L;},T$L.getVBW=function(){return this._vb.setNeedUpload(),this._vb;},T$L.getVBR=function(){return this._vb;},T$L.getIBR=function(){return this._ib;},T$L.getIBW=function(){return this._ib.setNeedUpload(),this._ib;},T$L.createQuadIB=function(T$L){this._quadNum=T$L,this._ib._resizeBuffer(6*T$L*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var T$s=this._ib.getUint16Array(),T$m=0,T$x=0,T$w=0;T$w<T$L;T$w++)T$s[T$m++]=T$x,T$s[T$m++]=T$x+2,T$s[T$m++]=T$x+1,T$s[T$m++]=T$x,T$s[T$m++]=T$x+3,T$s[T$m++]=T$x+2,T$x+=4;this._ib.setNeedUpload();},T$L.setAttributes=function(T$L){if(this._attribInfo=T$L,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!";},T$L.getEleNum=function(){return this._ib.getBuffer().byteLength/2;},T$L.releaseMesh=function(){},T$L.destroy=function(){},T$L.clearVB=function(){this._vb.clear();},T$s._gvaoid=0,T$s;}()),T$eL=function(){function T$w(){}return T$E(T$w,"laya.webgl.utils.RenderState2D"),T$w.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];},T$w.mat2MatArray=function(T$L,T$s){var T$m=T$L,T$x=T$s;return T$x[0]=T$m.a,T$x[1]=T$m.b,T$x[2]=T$w.EMPTYMAT4_ARRAY[2],T$x[3]=T$w.EMPTYMAT4_ARRAY[3],T$x[4]=T$m.c,T$x[5]=T$m.d,T$x[6]=T$w.EMPTYMAT4_ARRAY[6],T$x[7]=T$w.EMPTYMAT4_ARRAY[7],T$x[8]=T$w.EMPTYMAT4_ARRAY[8],T$x[9]=T$w.EMPTYMAT4_ARRAY[9],T$x[10]=T$w.EMPTYMAT4_ARRAY[10],T$x[11]=T$w.EMPTYMAT4_ARRAY[11],T$x[12]=T$m.tx,T$x[13]=T$m.ty,T$x[14]=T$w.EMPTYMAT4_ARRAY[14],T$x[15]=T$w.EMPTYMAT4_ARRAY[15],T$s;},T$w.restoreTempArray=function(){T$w.TEMPMAT4_ARRAY[0]=1,T$w.TEMPMAT4_ARRAY[1]=0,T$w.TEMPMAT4_ARRAY[4]=0,T$w.TEMPMAT4_ARRAY[5]=1,T$w.TEMPMAT4_ARRAY[12]=0,T$w.TEMPMAT4_ARRAY[13]=0;},T$w.clear=function(){T$w.worldScissorTest=!1,T$w.worldShaderDefines=null,T$w.worldFilters=null,T$w.worldAlpha=1,T$w.worldClipRect.x=T$w.worldClipRect.y=0,T$w.worldClipRect.width=T$w.width,T$w.worldClipRect.height=T$w.height,T$w.curRenderTarget=null;},T$w._MAXSIZE=99999999,T$w.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T$w.worldMatrix4=T$w.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T$w.worldAlpha=1,T$w.worldScissorTest=!1,T$w.worldFilters=null,T$w.worldShaderDefines=null,T$w.curRenderTarget=null,T$w.width=0,T$w.height=0,T$v(T$w,["worldMatrix",function(){return this.worldMatrix=new T$_();},"worldClipRect",function(){return this.worldClipRect=new T$N(0,0,99999999,99999999);}]),T$w;}(),T$bL=function(){var T$e,T$m;function T$b(T$L,T$s,T$m,T$x,T$w){var T$O=this;function T$v(T$L){var T$s=[],T$m=new T$e(T$s);return T$O._compileToTree(T$m,T$L.split("\n"),0,T$s,T$w),T$m;}var T$y=T$r.now();this._VS=T$v(T$s),this._PS=T$v(T$m),this._nameMap=T$x,2<T$r.now()-T$y&&console.log("ShaderCompile use time:"+(T$r.now()-T$y)+"  size:"+T$s.length+"/"+T$m.length);}T$E(T$b,"laya.webgl.utils.ShaderCompile");var T$L=T$b.prototype;return T$L._compileToTree=function(T$L,T$s,T$m,T$x,T$w){var T$O,T$v,T$y,T$F,T$o,T$V,T$C,T$E=0,T$r=0,T$u=0,T$T=0;for(T$r=T$m;T$r<T$s.length;T$r++)if(!((T$y=T$s[T$r]).length<1)&&0!==(T$E=T$y.indexOf("//"))){if(0<=T$E&&(T$y=T$y.substr(0,T$E)),T$O=T$C||new T$e(T$x),T$C=null,T$O.text=T$y,T$O.noCompile=!0,0<=(T$E=T$y.indexOf("#"))){for(T$F="#",T$T=T$E+1,T$u=T$y.length;T$T<T$u;T$T++){var T$j=T$y.charAt(T$T);if(" "===T$j||"\t"===T$j||"\r"===T$j||"\n"===T$j||"?"===T$j)break;T$F+=T$j;}switch(T$O.name=T$F){case"#ifdef":case"#ifndef":if(T$O.src=T$y,T$O.noCompile=null!=T$y.match(/[!&|()=<>]/),T$O.noCompile?console.log("function():Boolean{return "+T$y.substr(T$E+T$O.name.length)+"}"):(T$V=T$y.replace(/^\s*/,"").split(/\s+/),T$O.setCondition(T$V[1],"#ifdef"===T$F?1:2),T$O.text="//"+T$O.text),T$O.setParent(T$L),T$L=T$O,T$w)for(T$V=T$y.substr(T$T).split(T$b._splitToWordExps3),T$T=0;T$T<T$V.length;T$T++)(T$y=T$V[T$T]).length&&(T$w[T$y]=!0);continue;case"#if":if(T$O.src=T$y,T$O.noCompile=!0,T$O.setParent(T$L),T$L=T$O,T$w)for(T$V=T$y.substr(T$T).split(T$b._splitToWordExps3),T$T=0;T$T<T$V.length;T$T++)(T$y=T$V[T$T]).length&&"defined"!=T$y&&(T$w[T$y]=!0);continue;case"#else":T$O.src=T$y,T$v=(T$L=T$L.parent).childs[T$L.childs.length-1],T$O.noCompile=T$v.noCompile,T$O.noCompile||(T$O.condition=T$v.condition,T$O.conditionType=1==T$v.conditionType?2:1,T$O.text="//"+T$O.text+" "+T$v.text+" "+T$O.conditionType),T$O.setParent(T$L),T$L=T$O;continue;case"#endif":T$v=(T$L=T$L.parent).childs[T$L.childs.length-1],T$O.noCompile=T$v.noCompile,T$O.noCompile||(T$O.text="//"+T$O.text),T$O.setParent(T$L);continue;case"#include":T$V=T$b.splitToWords(T$y,null);var T$D=T$b.includes[T$V[1]];if(!T$D)throw"ShaderCompile error no this include file:"+T$V[1];if((T$E=T$V[0].indexOf("?"))<0){T$O.setParent(T$L),T$y=T$D.getWith("with"==T$V[2]?T$V[3]:null),this._compileToTree(T$O,T$y.split("\n"),0,T$x,T$w),T$O.text="";continue;}T$O.setCondition(T$V[0].substr(T$E+1),1),T$O.text=T$D.getWith("with"==T$V[2]?T$V[3]:null);break;case"#import":T$o=(T$V=T$b.splitToWords(T$y,null))[1],T$x.push({node:T$O,file:T$b.includes[T$o],ofs:T$O.text.length});continue;}}else{if((T$v=T$L.childs[T$L.childs.length-1])&&!T$v.name){0<T$x.length&&T$b.splitToWords(T$y,T$v),T$C=T$O,T$v.text+="\n"+T$y;continue;}0<T$x.length&&T$b.splitToWords(T$y,T$O);}T$O.setParent(T$L);}},T$L.createShader=function(T$L,T$s,T$m){var T$x={},T$w="";if(T$L)for(var T$O in T$L)T$w+="#define "+T$O+"\n",T$x[T$O]=!0;var T$v=this._VS.toscript(T$x,[]),T$y=this._PS.toscript(T$x,[]);return(T$m||T$PL.create)(T$w+T$v.join("\n"),T$w+T$y.join("\n"),T$s,this._nameMap);},T$b._parseOne=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v={type:T$b.shaderParamsMap[T$m[T$x+1]],name:T$m[T$x+2],size:isNaN(parseInt(T$m[T$x+3]))?1:parseInt(T$m[T$x+3])};return T$O&&("attribute"==T$w?T$L.push(T$v):T$s.push(T$v)),":"==T$m[T$x+3]&&(T$v.type=T$m[T$x+4],T$x+=2),T$x+=2;},T$b.addInclude=function(T$L,T$s){if(!T$s||0===T$s.length)throw new Error("add shader include file err:"+T$L);if(T$b.includes[T$L])throw new Error("add shader include file err, has add:"+T$L);T$b.includes[T$L]=new T$m(T$s);},T$b.preGetParams=function(T$L,T$s){var T$m=[T$L,T$s],T$x={},T$w=[],T$O=[],T$v={},T$y=[];T$x.attributes=T$w,T$x.uniforms=T$O,T$x.defines=T$v;for(var T$F=0,T$o=0,T$V=0;T$V<2;T$V++){T$m[T$V]=T$m[T$V].replace(T$b._removeAnnotation,"");var T$C,T$E=T$m[T$V].match(T$b._reg);for(T$F=0,T$o=T$E.length;T$F<T$o;T$F++){var T$r=T$E[T$F];if("attribute"==T$r||"uniform"==T$r)T$F=T$b._parseOne(T$w,T$O,T$E,T$F,T$r,!0);else{if("#define"==T$r){T$y[T$r=T$E[++T$F]]=1;continue;}if("#ifdef"==T$r){T$v[T$C=T$E[++T$F]]=T$v[T$C]||[];for(T$F++;T$F<T$o;T$F++)if("attribute"==(T$r=T$E[T$F])||"uniform"==T$r)T$F=T$b._parseOne(T$w,T$O,T$E,T$F,T$r,T$y[T$C]);else if("#else"==T$r)for(T$F++;T$F<T$o;T$F++)if("attribute"==(T$r=T$E[T$F])||"uniform"==T$r)T$F=T$b._parseOne(T$w,T$O,T$E,T$F,T$r,!T$y[T$C]);else if("#endif"==T$r)break;}}}}return T$x;},T$b.splitToWords=function(T$L,T$s){for(var T$m,T$x,T$w=[],T$O=-1,T$v=0,T$y=T$L.length;T$v<T$y;T$v++)if(T$m=T$L.charAt(T$v),0<=" \t=+-*/&%!<>()'\",;".indexOf(T$m)){if(0<=T$O&&1<T$v-T$O&&(T$x=T$L.substr(T$O,T$v-T$O),T$w.push(T$x)),'"'==T$m||"'"==T$m){var T$F=T$L.indexOf(T$m,T$v+1);if(T$F<0)throw"Sharder err:"+T$L;T$w.push(T$L.substr(T$v+1,T$F-T$v-1)),T$v=T$F,T$O=-1;continue;}"("==T$m&&T$s&&0<T$w.length&&(T$x=T$w[T$w.length-1]+";","vec4;main;".indexOf(T$x)<0&&(T$s.useFuns+=T$x)),T$O=-1;}else T$O<0&&(T$O=T$v);return T$O<T$y&&1<T$y-T$O&&(T$x=T$L.substr(T$O,T$y-T$O),T$w.push(T$x)),T$w;},T$b.IFDEF_NO=0,T$b.IFDEF_YES=1,T$b.IFDEF_ELSE=2,T$b.IFDEF_PARENT=3,T$b._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),T$b._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),T$b._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),T$b.includes={},T$v(T$b,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680};},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g");}]),T$b.__init$=function(){T$e=function(){function T$m(T$L){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=T$L;}T$E(T$m,"");var T$L=T$m.prototype;return T$L.setParent=function(T$L){T$L.childs.push(this),this.z=T$L.z+1,this.parent=T$L;},T$L.setCondition=function(T$L,T$s){T$L&&(this.conditionType=T$s,T$L=T$L.replace(/(\s*$)/g,""),this.condition=function(){return this[T$L];},this.condition.__condition=T$L);},T$L.toscript=function(T$L,T$s){return this._toscript(T$L,T$s,++T$m.__id);},T$L._toscript=function(T$x,T$w,T$O){if(this.childs.length<1&&!this.text)return T$w;T$w.length;if(this.condition){var T$L=!!this.condition.call(T$x);if(2===this.conditionType&&(T$L=!T$L),!T$L)return T$w;}if(this.text&&T$w.push(this.text),0<this.childs.length&&this.childs.forEach(function(T$L,T$s,T$m){T$L._toscript(T$x,T$w,T$O);}),0<this.includefiles.length&&0<this.useFuns.length)for(var T$s,T$m=0,T$v=this.includefiles.length;T$m<T$v;T$m++)this.includefiles[T$m].curUseID!=T$O&&0<(T$s=this.includefiles[T$m].file.getFunsScript(this.useFuns)).length&&(this.includefiles[T$m].curUseID=T$O,T$w[0]=T$s+T$w[0]);return T$w;},T$m.__id=1,T$m;}(),T$m=function(){function T$L(T$L){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=T$L;for(var T$s=0,T$m=0,T$x=0;!((T$s=T$L.indexOf("#begin",T$s))<0);){for(T$x=T$s+5;!((T$x=T$L.indexOf("#end",T$x))<0)&&"i"===T$L.charAt(T$x+4);)T$x+=5;if(T$x<0)throw"add include err,no #end:"+T$L;T$m=T$L.indexOf("\n",T$s);var T$w=T$b.splitToWords(T$L.substr(T$s,T$m-T$s),null);"code"==T$w[1]?this.codes[T$w[2]]=T$L.substr(T$m+1,T$x-T$m-1):"function"==T$w[1]&&(T$m=T$L.indexOf("function",T$s),T$m+="function".length,this.funs[T$w[3]]=T$L.substr(T$m+1,T$x-T$m-1),this.funnames+=T$w[3]+";"),T$s=T$x+1;}}T$E(T$L,"");var T$s=T$L.prototype;return T$s.getWith=function(T$L){var T$s=T$L?this.codes[T$L]:this.script;if(!T$s)throw"get with error:"+T$L;return T$s;},T$s.getFunsScript=function(T$L){var T$s="";for(var T$m in this.funs)0<=T$L.indexOf(T$m+";")&&(T$s+=this.funs[T$m]);return T$s;},T$L;}();},T$b;}(),T$SL=function(){function T$v(){}return T$E(T$v,"laya.webgl.WebGL"),T$v._uint8ArraySlice=function(){for(var T$L=this.length,T$s=new Uint8Array(this.length),T$m=0;T$m<T$L;T$m++)T$s[T$m]=this[T$m];return T$s;},T$v._float32ArraySlice=function(){for(var T$L=this.length,T$s=new Float32Array(this.length),T$m=0;T$m<T$L;T$m++)T$s[T$m]=this[T$m];return T$s;},T$v._uint16ArraySlice=function(T$L){var T$s,T$m=arguments,T$x=0,T$w=0;if(0===T$m.length)for(T$x=this.length,T$s=new Uint16Array(T$x),T$w=0;T$w<T$x;T$w++)T$s[T$w]=this[T$w];else if(2===T$m.length){var T$O=T$m[0],T$v=T$m[1];if(T$O<T$v)for(T$x=T$v-T$O,T$s=new Uint16Array(T$x),T$w=T$O;T$w<T$v;T$w++)T$s[T$w-T$O]=this[T$w];else T$s=new Uint16Array(0);}return T$s;},T$v.expandContext=function(){var T$L=T$w.prototype,T$s=CanvasRenderingContext2D.prototype;T$s.fillTrangles=T$L.fillTrangles,T$kL.__int__(null),T$s.setIBVB=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o){void 0===T$F&&(T$F=0),void 0===T$o&&(T$o=0),null===T$m&&(this._ib=this._ib||T$zL.QuadrangleIB,T$m=this._ib,T$jL.expandIBQuadrangle(T$m,T$x._byteLength/64+8)),this._setIBVB(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o);},T$s.fillTrangles=function(T$L,T$s,T$m,T$x,T$w){this._curMat=this._curMat||T$_.create(),this._vb=this._vb||T$tL.create(),this._ib||(this._ib=T$zL.create(),T$jL.fillIBQuadrangle(this._ib,T$v/4));var T$O=this._vb,T$v=T$x.length>>4;T$jL.fillTranglesVB(T$O,T$s,T$m,T$x,T$w||this._curMat,0,0),T$jL.expandIBQuadrangle(this._ib,T$O._byteLength/64+8);var T$y=new T$fL(1,0);T$y.textureHost=T$L;var T$F=new T$ML("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");T$O._vertType=3,this._setIBVB(T$s,T$m,this._ib,T$O,6*T$v,T$w,T$F,T$y,0,0);};},T$v.enable=function(){if(T$r.__init__(),T$D.isConchApp&&!T$D.isConchWebGL)return T$H.skinAniSprite=function(){return new T$LL();},T$v.expandContext(),!1;if(T$H.getWebGLContext=function(T$L){for(var T$s,T$m=["webgl","experimental-webgl","webkit-3d","moz-webgl"],T$x=0;T$x<T$m.length;T$x++){try{T$s=T$L.getContext(T$m[T$x],{stencil:T$a.isStencil,alpha:T$a.isAlpha,antialias:T$a.isAntialias,premultipliedAlpha:T$a.premultipliedAlpha,preserveDrawingBuffer:T$a.preserveDrawingBuffer});}catch(T$L){}if(T$s)return T$s;}return null;},null==(T$v.mainContext=T$v.mainContext||T$H.getWebGLContext(T$D._mainCanvas)))return!1;if(T$D.isWebGL)return!0;T$T.create=function(T$L,T$s){return new T$Ls(T$L,T$s);},T$j.create=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){return new T$KL(T$L,T$s,T$m,T$x,T$w,T$O,T$v);},T$D.WebGL=T$v,T$D.isWebGL=!0,T$rL.__init__(),T$H.createRenderSprite=function(T$L,T$s){return new T$_L(T$L,T$s);},T$H.createWebGLContext2D=function(T$L){return new T$aL(T$L);},T$H.changeWebGLSize=function(T$L,T$s){laya.webgl.WebGL.onStageResize(T$L,T$s);},T$H.createGraphics=function(){return new T$YL();};var T$L=T$H.createFilterAction;return T$H.createFilterAction=T$L||function(T$L){return new T$QL();},T$H.clear=function(T$L){T$eL.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var T$s=T$D.context.ctx,T$m=0==T$s._submits._length||T$a.preserveDrawingBuffer?T$u.create(T$L)._color:T$U._wgColor;T$m&&T$s.clearBG(T$m[0],T$m[1],T$m[2],T$m[3]),T$eL.clear();},T$H.addToAtlas=function(T$L,T$s){void 0===T$s&&(T$s=!1);var T$m=T$L.bitmap;T$D.optimizeTextureMemory(T$L.url,T$L)?T$Y.__typeof(T$m,"laya.webgl.resource.IMergeAtlasBitmap")&&T$m.allowMerageInAtlas&&T$m.on("recovered",T$L,T$L.addTextureToAtlas):T$m.enableMerageInAtlas=!1;},T$H.isAtlas=function(T$L){return T$L instanceof laya.webgl.atlas.AtlasWebGLCanvas;},T$d._enable(),T$H.beginFlush=function(){for(var T$L=T$d.instance,T$s=T$L.getAtlaserCount(),T$m=0;T$m<T$s;T$m++){var T$x=T$L.getAtlaserByIndex(T$m).texture;T$x._flashCacheImageNeedFlush&&T$H.flashFlushImage(T$x);}},T$H.drawToCanvas=function(T$L,T$s,T$m,T$x,T$w,T$O){(T$m<=0||T$x<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),T$m|=0,T$x|=0,T$w|=0,T$O|=0;var T$v=T$$L.create(T$m,T$x,6408,5121,0,!1);T$v.start(),T$v.clear(0,0,0,0),T$D.context.clear(),T$e.renders[T$s]._fun(T$L,T$D.context,T$w,T$eL.height-T$x+T$O),T$D.context.flush(),T$v.end();var T$y=T$v.getData(0,0,T$m,T$x);if(T$v.recycle(),T$y.byteLength==T$m*T$x*4){var T$F=new T$JL();T$F._canvas=T$r.createElement("canvas"),T$F.size(T$m,T$x);var T$o=T$F._canvas.getContext("2d");T$r.canvas.size(T$m,T$x);var T$V=T$r.context,T$C=T$V.createImageData(T$m,T$x);return T$C.data.set(new Uint8ClampedArray(T$y.buffer)),T$F._imgData=T$C,T$V.putImageData(T$C,0,0),T$o.save(),T$o.translate(0,T$x),T$o.scale(1,-1),T$o.drawImage(T$r.canvas.source,0,0),T$o.restore(),T$F;}console.log("drawToCanvas error: w:"+T$m+",h:"+T$x+",datalen:"+T$y.byteLength);},T$H.createFilterAction=function(T$L){var T$s;switch(T$L){case 32:T$s=new T$QL();}return T$s;},T$H.addTextureToAtlas=function(T$L){T$L._uvID++,T$d._atlasRestore++,T$L.bitmap.enableMerageInAtlas&&T$d.instance.addToAtlas(T$L);},T$H.getTexturePixels=function(T$L,T$s,T$m,T$x,T$w){T$D.context.ctx.clear();var T$O=new T$i();T$O.graphics.drawTexture(T$L,-T$s,-T$m);var T$v=T$$L.create(T$x,T$w);T$v.start(),T$v.clear(0,0,0,0),T$O.render(T$D.context,0,0),T$D.context.ctx.flush(),T$v.end();for(var T$y=T$v.getData(0,0,T$x,T$w),T$F=[],T$o=0,T$V=T$w-1;0<=T$V;T$V--)for(var T$C=0;T$C<T$x;T$C++)T$o=4*(T$V*T$x+T$C),T$F.push(T$y[T$o]),T$F.push(T$y[T$o+1]),T$F.push(T$y[T$o+2]),T$F.push(T$y[T$o+3]);return T$F;},T$H.skinAniSprite=function(){return new T$LL();},T$o.create=function(T$L,T$s){var T$m=new T$JL();return T$m._imgData=T$s,T$m.flipY=!1,T$m;},T$f._filterStart=function(T$L,T$s,T$m,T$x,T$w){var T$O=T$L.getValue("bounds"),T$v=T$$L.create(T$O.width,T$O.height);if(T$v.start(),T$v.clear(0,0,0,0),T$L.addValue("src",T$v),T$L.addValue("ScissorTest",T$eL.worldScissorTest),T$eL.worldScissorTest){var T$y=new T$N();T$y.copyFrom(T$m.ctx._clipRect),T$L.addValue("clipRect",T$y),T$eL.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089);}},T$f._filterEnd=function(T$L,T$s,T$m,T$x,T$w){var T$O=T$L.getValue("bounds");T$L.getValue("src").end();var T$v=T$$L.create(T$O.width,T$O.height);T$v.start(),T$v.clear(0,0,0,0),T$L.addValue("out",T$v),T$s._set$P("_filterCache",T$v),T$s._set$P("_isHaveGlowFilter",T$L.getValue("_isHaveGlowFilter"));},T$f._EndTarget=function(T$L,T$s){if(T$L.getValue("src").recycle(),T$L.getValue("out").end(),T$L.getValue("ScissorTest")){T$eL.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),T$s.ctx.save();var T$m=T$L.getValue("clipRect");T$s.ctx.clipRect(T$m.x,T$m.y,T$m.width,T$m.height);}},T$f._useSrc=function(T$L){var T$s=T$L.getValue("out");T$s.end(),(T$s=T$L.getValue("src")).start(),T$s.clear(0,0,0,0);},T$f._endSrc=function(T$L){T$L.getValue("src").end();},T$f._useOut=function(T$L){var T$s=T$L.getValue("src");T$s.end(),(T$s=T$L.getValue("out")).start(),T$s.clear(0,0,0,0);},T$f._endOut=function(T$L){T$L.getValue("out").end();},T$f._recycleScope=function(T$L){T$L.recycle();},T$f._filter=function(T$L,T$s,T$m,T$x){var T$w=this._next;if(T$w){var T$O,T$v,T$y=T$L.filters,T$F=T$y.length;if(1==T$F&&32==T$y[0].type)return T$s.ctx.save(),T$s.ctx.setFilters([T$y[0]]),T$w._fun.call(T$w,T$L,T$s,T$m,T$x),void T$s.ctx.restore();var T$o=T$yL.create(),T$V=T$Q.TEMP,T$C=T$s.ctx._getTransformMatrix(),T$E=T$_.create();T$C.copyTo(T$E);var T$r=0,T$u=0,T$T=!1,T$j=T$L._$P._filterCache?T$L._$P._filterCache:null;if(!T$j||T$L._repaint){T$T=T$L._isHaveGlowFilter(),T$o.addValue("_isHaveGlowFilter",T$T),T$T&&(T$r=50,T$u=25),(T$v=new T$N()).copyFrom(T$L.getSelfBounds()),T$v.x+=T$L.x,T$v.y+=T$L.y,T$v.x-=T$L.pivotX+4,T$v.y-=T$L.pivotY+4;var T$D=T$v.x,T$e=T$v.y;if(T$v.width+=T$r+8,T$v.height+=T$r+8,T$V.x=T$v.x*T$E.a+T$v.y*T$E.c,T$V.y=T$v.y*T$E.d+T$v.x*T$E.b,T$v.x=T$V.x,T$v.y=T$V.y,T$V.x=T$v.width*T$E.a+T$v.height*T$E.c,T$V.y=T$v.height*T$E.d+T$v.width*T$E.b,T$v.width=T$V.x,T$v.height=T$V.y,T$v.width<=0||T$v.height<=0)return;T$j&&T$j.recycle(),T$o.addValue("bounds",T$v);var T$b=T$vL.create([T$o,T$L,T$s,0,0],T$f._filterStart);T$s.addRenderObject(T$b),T$s.ctx._renderKey=0,T$s.ctx._shader2D.glTexture=null;var T$S=T$L.x-T$D+T$u,T$H=T$L.y-T$e+T$u;T$w._fun.call(T$w,T$L,T$s,T$S,T$H),T$b=T$vL.create([T$o,T$L,T$s,0,0],T$f._filterEnd),T$s.addRenderObject(T$b);for(var T$Y=0;T$Y<T$F;T$Y++){0!=T$Y&&(T$b=T$vL.create([T$o],T$f._useSrc),T$s.addRenderObject(T$b),T$O=T$fL.create(1,0),T$_.TEMP.identity(),T$s.ctx.drawTarget(T$o,0,0,T$v.width,T$v.height,T$_.TEMP,"out",T$O,null,T$I.TOINT.overlay),T$b=T$vL.create([T$o],T$f._useOut),T$s.addRenderObject(T$b)),T$y[T$Y].action.apply3d(T$o,T$L,T$s,0,0);}T$b=T$vL.create([T$o,T$s],T$f._EndTarget),T$s.addRenderObject(T$b);}else{if((T$T=!!T$L._$P._isHaveGlowFilter&&T$L._$P._isHaveGlowFilter)&&(T$r=50,T$u=25),(T$v=T$L.getBounds()).width<=0||T$v.height<=0)return;T$v.width+=T$r,T$v.height+=T$r,T$V.x=T$v.x*T$E.a+T$v.y*T$E.c,T$V.y=T$v.y*T$E.d+T$v.x*T$E.b,T$v.x=T$V.x,T$v.y=T$V.y,T$V.x=T$v.width*T$E.a+T$v.height*T$E.c,T$V.y=T$v.height*T$E.d+T$v.width*T$E.b,T$v.width=T$V.x,T$v.height=T$V.y,T$o.addValue("out",T$j);}T$m=T$m-T$u-T$L.x,T$x=T$x-T$u-T$L.y,T$V.setTo(T$m,T$x),T$E.transformPoint(T$V),T$m=T$V.x+T$v.x,T$x=T$V.y+T$v.y,T$O=T$fL.create(1,0),T$_.TEMP.identity(),T$s.ctx.drawTarget(T$o,T$m,T$x,T$v.width,T$v.height,T$_.TEMP,"out",T$O,null,T$I.TOINT.overlay),T$b=T$vL.create([T$o],T$f._recycleScope),T$s.addRenderObject(T$b),T$E.destroy();}},Float32Array.prototype.slice||(Float32Array.prototype.slice=T$v._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=T$v._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=T$v._uint8ArraySlice),!0;},T$v.onStageResize=function(T$L,T$s){null!=T$v.mainContext&&(T$v.mainContext.viewport(0,0,T$L,T$s),T$eL.width=T$L,T$eL.height=T$s);},T$v.onInvalidGLRes=function(){T$d.instance.freeAll(),T$S.releaseContentManagers(!0),T$v.doNodeRepaint(T$Y.stage),T$v.mainContext.viewport(0,0,T$eL.width,T$eL.height),T$Y.stage.event("devicelost");},T$v.doNodeRepaint=function(T$L){0==T$L.numChildren&&T$L.repaint();for(var T$s=0;T$s<T$L.numChildren;T$s++)T$v.doNodeRepaint(T$L.getChildAt(T$s));},T$v.init=function(T$L,T$s,T$m){T$v.mainCanvas=T$L,T$o._createContext=function(T$L){return new T$aL(T$L);},T$JL._createContext=function(T$L){return new T$aL(T$L);};var T$x=laya.webgl.WebGL.mainContext;if(null!=T$x.getShaderPrecisionFormat){var T$w=T$x.getShaderPrecisionFormat(35633,36338),T$O=T$x.getShaderPrecisionFormat(35632,36338);T$v.shaderHighPrecision=!(!T$w.precision||!T$O.precision);}else T$v.shaderHighPrecision=!1;if(T$v.compressAstc=T$x.getExtension("WEBGL_compressed_texture_astc"),T$v.compressAtc=T$x.getExtension("WEBGL_compressed_texture_atc"),T$v.compressEtc=T$x.getExtension("WEBGL_compressed_texture_etc"),T$v.compressEtc1=T$x.getExtension("WEBGL_compressed_texture_etc1"),T$v.compressPvrtc=T$x.getExtension("WEBGL_compressed_texture_pvrtc"),T$v.compressS3tc=T$x.getExtension("WEBGL_compressed_texture_s3tc"),T$v.compressS3tc_srgb=T$x.getExtension("WEBGL_compressed_texture_s3tc_srgb"),T$v.compressAstc=T$v.compressAstc?T$v.compressAstc:{},T$v.compressAtc=T$v.compressAtc?T$v.compressAtc:{},T$v.compressEtc=T$v.compressEtc?T$v.compressEtc:{},T$v.compressEtc1=T$v.compressEtc1?T$v.compressEtc1:{},T$v.compressPvrtc=T$v.compressPvrtc?T$v.compressPvrtc:{},T$v.compressS3tc=T$v.compressS3tc?T$v.compressS3tc:{},T$v.compressS3tc_srgb=T$v.compressS3tc_srgb?T$v.compressS3tc_srgb:{},T$x.deleteTexture1=T$x.deleteTexture,T$x.deleteTexture=function(T$L){T$L==T$HL.curBindTexValue&&(T$HL.curBindTexValue=null),T$x.deleteTexture1(T$L);},T$v.onStageResize(T$s,T$m),null==T$v.mainContext)throw new Error("webGL getContext err!");T$G.__init__(),T$d.__init__(),T$iL.__init__(),T$OL.__init__(),T$aL.__init__(),T$fL.__init__(),T$z.__init__(),T$kL.__int__(T$x),T$I._init_(T$x),T$D.isConchApp&&conch.setOnInvalidGLRes(T$v.onInvalidGLRes);},T$v.mainCanvas=null,T$v.antialias=!0,T$v.shaderHighPrecision=!1,T$v._bg_null=[0,0,0,0],T$v;}(),T$HL=function(){function T$x(){}return T$E(T$x,"laya.webgl.WebGLContext"),T$x.UseProgram=function(T$L){return T$x._useProgram!==T$L&&(T$SL.mainContext.useProgram(T$L),T$x._useProgram=T$L,!0);},T$x.setDepthTest=function(T$L,T$s){T$s!==T$x._depthTest&&((T$x._depthTest=T$s)?T$L.enable(2929):T$L.disable(2929));},T$x.setDepthMask=function(T$L,T$s){T$s!==T$x._depthMask&&(T$x._depthMask=T$s,T$L.depthMask(T$s));},T$x.setDepthFunc=function(T$L,T$s){T$s!==T$x._depthFunc&&(T$x._depthFunc=T$s,T$L.depthFunc(T$s));},T$x.setBlend=function(T$L,T$s){T$s!==T$x._blend&&((T$x._blend=T$s)?T$L.enable(3042):T$L.disable(3042));},T$x.setBlendFunc=function(T$L,T$s,T$m){(T$s!==T$x._sFactor||T$m!==T$x._dFactor)&&(T$x._sFactor=T$s,T$x._dFactor=T$m,T$L.blendFunc(T$s,T$m));},T$x.setCullFace=function(T$L,T$s){T$s!==T$x._cullFace&&((T$x._cullFace=T$s)?T$L.enable(2884):T$L.disable(2884));},T$x.setFrontFace=function(T$L,T$s){T$s!==T$x._frontFace&&(T$x._frontFace=T$s,T$L.frontFace(T$s));},T$x.bindTexture=function(T$L,T$s,T$m){T$L.bindTexture(T$s,T$m),T$x.curBindTexTarget=T$s,T$x.curBindTexValue=T$m;},T$x.DEPTH_BUFFER_BIT=256,T$x.STENCIL_BUFFER_BIT=1024,T$x.COLOR_BUFFER_BIT=16384,T$x.POINTS=0,T$x.LINES=1,T$x.LINE_LOOP=2,T$x.LINE_STRIP=3,T$x.TRIANGLES=4,T$x.TRIANGLE_STRIP=5,T$x.TRIANGLE_FAN=6,T$x.ZERO=0,T$x.ONE=1,T$x.SRC_COLOR=768,T$x.ONE_MINUS_SRC_COLOR=769,T$x.SRC_ALPHA=770,T$x.ONE_MINUS_SRC_ALPHA=771,T$x.DST_ALPHA=772,T$x.ONE_MINUS_DST_ALPHA=773,T$x.DST_COLOR=774,T$x.ONE_MINUS_DST_COLOR=775,T$x.SRC_ALPHA_SATURATE=776,T$x.FUNC_ADD=32774,T$x.BLEND_EQUATION=32777,T$x.BLEND_EQUATION_RGB=32777,T$x.BLEND_EQUATION_ALPHA=34877,T$x.FUNC_SUBTRACT=32778,T$x.FUNC_REVERSE_SUBTRACT=32779,T$x.BLEND_DST_RGB=32968,T$x.BLEND_SRC_RGB=32969,T$x.BLEND_DST_ALPHA=32970,T$x.BLEND_SRC_ALPHA=32971,T$x.CONSTANT_COLOR=32769,T$x.ONE_MINUS_CONSTANT_COLOR=32770,T$x.CONSTANT_ALPHA=32771,T$x.ONE_MINUS_CONSTANT_ALPHA=32772,T$x.BLEND_COLOR=32773,T$x.ARRAY_BUFFER=34962,T$x.ELEMENT_ARRAY_BUFFER=34963,T$x.ARRAY_BUFFER_BINDING=34964,T$x.ELEMENT_ARRAY_BUFFER_BINDING=34965,T$x.STREAM_DRAW=35040,T$x.STATIC_DRAW=35044,T$x.DYNAMIC_DRAW=35048,T$x.BUFFER_SIZE=34660,T$x.BUFFER_USAGE=34661,T$x.CURRENT_VERTEX_ATTRIB=34342,T$x.FRONT=1028,T$x.BACK=1029,T$x.CULL_FACE=2884,T$x.FRONT_AND_BACK=1032,T$x.BLEND=3042,T$x.DITHER=3024,T$x.STENCIL_TEST=2960,T$x.DEPTH_TEST=2929,T$x.SCISSOR_TEST=3089,T$x.POLYGON_OFFSET_FILL=32823,T$x.SAMPLE_ALPHA_TO_COVERAGE=32926,T$x.SAMPLE_COVERAGE=32928,T$x.NO_ERROR=0,T$x.INVALID_ENUM=1280,T$x.INVALID_VALUE=1281,T$x.INVALID_OPERATION=1282,T$x.OUT_OF_MEMORY=1285,T$x.CW=2304,T$x.CCW=2305,T$x.LINE_WIDTH=2849,T$x.ALIASED_POINT_SIZE_RANGE=33901,T$x.ALIASED_LINE_WIDTH_RANGE=33902,T$x.CULL_FACE_MODE=2885,T$x.FRONT_FACE=2886,T$x.DEPTH_RANGE=2928,T$x.DEPTH_WRITEMASK=2930,T$x.DEPTH_CLEAR_VALUE=2931,T$x.DEPTH_FUNC=2932,T$x.STENCIL_CLEAR_VALUE=2961,T$x.STENCIL_FUNC=2962,T$x.STENCIL_FAIL=2964,T$x.STENCIL_PASS_DEPTH_FAIL=2965,T$x.STENCIL_PASS_DEPTH_PASS=2966,T$x.STENCIL_REF=2967,T$x.STENCIL_VALUE_MASK=2963,T$x.STENCIL_WRITEMASK=2968,T$x.STENCIL_BACK_FUNC=34816,T$x.STENCIL_BACK_FAIL=34817,T$x.STENCIL_BACK_PASS_DEPTH_FAIL=34818,T$x.STENCIL_BACK_PASS_DEPTH_PASS=34819,T$x.STENCIL_BACK_REF=36003,T$x.STENCIL_BACK_VALUE_MASK=36004,T$x.STENCIL_BACK_WRITEMASK=36005,T$x.VIEWPORT=2978,T$x.SCISSOR_BOX=3088,T$x.COLOR_CLEAR_VALUE=3106,T$x.COLOR_WRITEMASK=3107,T$x.UNPACK_ALIGNMENT=3317,T$x.PACK_ALIGNMENT=3333,T$x.MAX_TEXTURE_SIZE=3379,T$x.MAX_VIEWPORT_DIMS=3386,T$x.SUBPIXEL_BITS=3408,T$x.RED_BITS=3410,T$x.GREEN_BITS=3411,T$x.BLUE_BITS=3412,T$x.ALPHA_BITS=3413,T$x.DEPTH_BITS=3414,T$x.STENCIL_BITS=3415,T$x.POLYGON_OFFSET_UNITS=10752,T$x.POLYGON_OFFSET_FACTOR=32824,T$x.TEXTURE_BINDING_2D=32873,T$x.SAMPLE_BUFFERS=32936,T$x.SAMPLES=32937,T$x.SAMPLE_COVERAGE_VALUE=32938,T$x.SAMPLE_COVERAGE_INVERT=32939,T$x.NUM_COMPRESSED_TEXTURE_FORMATS=34466,T$x.COMPRESSED_TEXTURE_FORMATS=34467,T$x.DONT_CARE=4352,T$x.FASTEST=4353,T$x.NICEST=4354,T$x.GENERATE_MIPMAP_HINT=33170,T$x.BYTE=5120,T$x.UNSIGNED_BYTE=5121,T$x.SHORT=5122,T$x.UNSIGNED_SHORT=5123,T$x.INT=5124,T$x.UNSIGNED_INT=5125,T$x.FLOAT=5126,T$x.DEPTH_COMPONENT=6402,T$x.ALPHA=6406,T$x.RGB=6407,T$x.RGBA=6408,T$x.LUMINANCE=6409,T$x.LUMINANCE_ALPHA=6410,T$x.UNSIGNED_SHORT_4_4_4_4=32819,T$x.UNSIGNED_SHORT_5_5_5_1=32820,T$x.UNSIGNED_SHORT_5_6_5=33635,T$x.FRAGMENT_SHADER=35632,T$x.VERTEX_SHADER=35633,T$x.MAX_VERTEX_ATTRIBS=34921,T$x.MAX_VERTEX_UNIFORM_VECTORS=36347,T$x.MAX_VARYING_VECTORS=36348,T$x.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,T$x.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,T$x.MAX_TEXTURE_IMAGE_UNITS=34930,T$x.MAX_FRAGMENT_UNIFORM_VECTORS=36349,T$x.SHADER_TYPE=35663,T$x.DELETE_STATUS=35712,T$x.LINK_STATUS=35714,T$x.VALIDATE_STATUS=35715,T$x.ATTACHED_SHADERS=35717,T$x.ACTIVE_UNIFORMS=35718,T$x.ACTIVE_ATTRIBUTES=35721,T$x.SHADING_LANGUAGE_VERSION=35724,T$x.CURRENT_PROGRAM=35725,T$x.NEVER=512,T$x.LESS=513,T$x.EQUAL=514,T$x.LEQUAL=515,T$x.GREATER=516,T$x.NOTEQUAL=517,T$x.GEQUAL=518,T$x.ALWAYS=519,T$x.KEEP=7680,T$x.REPLACE=7681,T$x.INCR=7682,T$x.DECR=7683,T$x.INVERT=5386,T$x.INCR_WRAP=34055,T$x.DECR_WRAP=34056,T$x.VENDOR=7936,T$x.RENDERER=7937,T$x.VERSION=7938,T$x.NEAREST=9728,T$x.LINEAR=9729,T$x.NEAREST_MIPMAP_NEAREST=9984,T$x.LINEAR_MIPMAP_NEAREST=9985,T$x.NEAREST_MIPMAP_LINEAR=9986,T$x.LINEAR_MIPMAP_LINEAR=9987,T$x.TEXTURE_MAG_FILTER=10240,T$x.TEXTURE_MIN_FILTER=10241,T$x.TEXTURE_WRAP_S=10242,T$x.TEXTURE_WRAP_T=10243,T$x.TEXTURE_2D=3553,T$x.TEXTURE=5890,T$x.TEXTURE_CUBE_MAP=34067,T$x.TEXTURE_BINDING_CUBE_MAP=34068,T$x.TEXTURE_CUBE_MAP_POSITIVE_X=34069,T$x.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,T$x.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,T$x.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,T$x.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,T$x.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,T$x.MAX_CUBE_MAP_TEXTURE_SIZE=34076,T$x.TEXTURE0=33984,T$x.TEXTURE1=33985,T$x.TEXTURE2=33986,T$x.TEXTURE3=33987,T$x.TEXTURE4=33988,T$x.TEXTURE5=33989,T$x.TEXTURE6=33990,T$x.TEXTURE7=33991,T$x.TEXTURE8=33992,T$x.TEXTURE9=33993,T$x.TEXTURE10=33994,T$x.TEXTURE11=33995,T$x.TEXTURE12=33996,T$x.TEXTURE13=33997,T$x.TEXTURE14=33998,T$x.TEXTURE15=33999,T$x.TEXTURE16=34e3,T$x.TEXTURE17=34001,T$x.TEXTURE18=34002,T$x.TEXTURE19=34003,T$x.TEXTURE20=34004,T$x.TEXTURE21=34005,T$x.TEXTURE22=34006,T$x.TEXTURE23=34007,T$x.TEXTURE24=34008,T$x.TEXTURE25=34009,T$x.TEXTURE26=34010,T$x.TEXTURE27=34011,T$x.TEXTURE28=34012,T$x.TEXTURE29=34013,T$x.TEXTURE30=34014,T$x.TEXTURE31=34015,T$x.ACTIVE_TEXTURE=34016,T$x.REPEAT=10497,T$x.CLAMP_TO_EDGE=33071,T$x.MIRRORED_REPEAT=33648,T$x.FLOAT_VEC2=35664,T$x.FLOAT_VEC3=35665,T$x.FLOAT_VEC4=35666,T$x.INT_VEC2=35667,T$x.INT_VEC3=35668,T$x.INT_VEC4=35669,T$x.BOOL=35670,T$x.BOOL_VEC2=35671,T$x.BOOL_VEC3=35672,T$x.BOOL_VEC4=35673,T$x.FLOAT_MAT2=35674,T$x.FLOAT_MAT3=35675,T$x.FLOAT_MAT4=35676,T$x.SAMPLER_2D=35678,T$x.SAMPLER_CUBE=35680,T$x.VERTEX_ATTRIB_ARRAY_ENABLED=34338,T$x.VERTEX_ATTRIB_ARRAY_SIZE=34339,T$x.VERTEX_ATTRIB_ARRAY_STRIDE=34340,T$x.VERTEX_ATTRIB_ARRAY_TYPE=34341,T$x.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,T$x.VERTEX_ATTRIB_ARRAY_POINTER=34373,T$x.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,T$x.COMPILE_STATUS=35713,T$x.LOW_FLOAT=36336,T$x.MEDIUM_FLOAT=36337,T$x.HIGH_FLOAT=36338,T$x.LOW_INT=36339,T$x.MEDIUM_INT=36340,T$x.HIGH_INT=36341,T$x.FRAMEBUFFER=36160,T$x.RENDERBUFFER=36161,T$x.RGBA4=32854,T$x.RGB5_A1=32855,T$x.RGB565=36194,T$x.DEPTH_COMPONENT16=33189,T$x.STENCIL_INDEX=6401,T$x.STENCIL_INDEX8=36168,T$x.DEPTH_STENCIL=34041,T$x.RENDERBUFFER_WIDTH=36162,T$x.RENDERBUFFER_HEIGHT=36163,T$x.RENDERBUFFER_INTERNAL_FORMAT=36164,T$x.RENDERBUFFER_RED_SIZE=36176,T$x.RENDERBUFFER_GREEN_SIZE=36177,T$x.RENDERBUFFER_BLUE_SIZE=36178,T$x.RENDERBUFFER_ALPHA_SIZE=36179,T$x.RENDERBUFFER_DEPTH_SIZE=36180,T$x.RENDERBUFFER_STENCIL_SIZE=36181,T$x.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,T$x.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,T$x.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,T$x.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,T$x.COLOR_ATTACHMENT0=36064,T$x.DEPTH_ATTACHMENT=36096,T$x.STENCIL_ATTACHMENT=36128,T$x.DEPTH_STENCIL_ATTACHMENT=33306,T$x.NONE=0,T$x.FRAMEBUFFER_COMPLETE=36053,T$x.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,T$x.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,T$x.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,T$x.FRAMEBUFFER_UNSUPPORTED=36061,T$x.FRAMEBUFFER_BINDING=36006,T$x.RENDERBUFFER_BINDING=36007,T$x.MAX_RENDERBUFFER_SIZE=34024,T$x.INVALID_FRAMEBUFFER_OPERATION=1286,T$x.UNPACK_FLIP_Y_WEBGL=37440,T$x.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,T$x.CONTEXT_LOST_WEBGL=37442,T$x.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,T$x.BROWSER_DEFAULT_WEBGL=37444,T$x._useProgram=null,T$x._depthTest=!0,T$x._depthMask=!0,T$x._blend=!1,T$x._cullFace=!1,T$x.curBindTexTarget=null,T$x.curBindTexValue=null,T$v(T$x,["_depthFunc",function(){return this._depthFunc=513;},"_sFactor",function(){return this._sFactor=1;},"_dFactor",function(){return this._dFactor=0;},"_frontFace",function(){return this._frontFace=2305;}]),T$x;}(),T$YL=function(T$L){function T$s(){T$s.__super.call(this);}T$E(T$s,"laya.webgl.display.GraphicsGL",T$y);var T$m=T$s.prototype;return T$m.setShader=function(T$L){this._saveToCmd(T$D.context._setShader,[T$L]);},T$m.setIBVB=function(T$L,T$s,T$m,T$x,T$w,T$O){this._saveToCmd(T$D.context._setIBVB,[T$L,T$s,T$m,T$x,T$w,T$O]);},T$m.drawParticle=function(T$L,T$s,T$m){var T$x=T$H.createParticleTemplate2D(T$m);T$x.x=T$L,T$x.y=T$s,this._saveToCmd(T$D.context._drawParticle,[T$x]);},T$s;}(),T$aL=function(T$L){var T$m;function T$W(T$L){this._x=0,this._y=0,this._id=++T$W._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,T$W.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=T$W.MAXCLIPRECT,this.mOutPoint,this._canvas=T$L,this._canvas._addReference(),T$W._contextcount++,T$D.isFlash?(this._ib=T$zL.create(35044),T$jL.fillIBQuadrangle(this._ib,16)):this._ib=T$zL.QuadrangleIB,this.clear();}T$E(T$W,"laya.webgl.canvas.WebGLContext2D",T$w);var T$s=T$W.prototype;return T$s.setIsMainContext=function(){this._isMain=!0;},T$s.clearBG=function(T$L,T$s,T$m,T$x){var T$w=T$SL.mainContext;T$w.clearColor(T$L,T$s,T$m,T$x),T$w.clear(16384);},T$s._getSubmits=function(){return this._submits;},T$s._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var T$L=0,T$s=this._submits._length;T$L<T$s;T$L++)this._submits[T$L].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null);}},T$s.destroy=function(){--T$W._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=T$zL.QuadrangleIB&&this._ib.releaseResource();},T$s.clear=function(){this._submits||(this._other=T$m.DEFAULT,this._curMat=T$_.create(),this._vb=T$tL.create(-1),this._submits=[],this._save=[T$P.Create(this)],this._save.length=10,this._shader2D=new T$z(),this._triangleMesh=T$AL.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=T$m.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=T$W.MAXCLIPRECT,this._curSubmit=T$OL.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=T$n.DEFAULT;for(var T$L=0,T$s=this._submits._length;T$L<T$s;T$L++)this._submits[T$L].releaseRender(),this._submits[T$L]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1;},T$s.size=function(T$L,T$s){if(this._width!=T$L||this._height!=T$s)if(0==T$L||0==T$s){0!=this._vb._byteLength&&(this._width=T$L,this._height=T$s,this._vb.clear(),this._vb.upload());for(var T$m=0,T$x=this._submits._length;T$m<T$x;T$m++)this._submits[T$m].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null;}else this._width=T$L,this._height=T$s,this._targets&&this._targets.size(T$L,T$s),this._canvas.memorySize-=this._canvas.memorySize;0===T$L&&0===T$s&&this._releaseMem();},T$s._getTransformMatrix=function(){return this._curMat;},T$s.translate=function(T$L,T$s){0===T$L&&0===T$s||(T$B.save(this),this._curMat.bTransform&&(T$k.save(this),this._curMat.transformPointN(T$Q.TEMP.setTo(T$L,T$s)),T$L=T$Q.TEMP.x,T$s=T$Q.TEMP.y),this._x+=T$L,this._y+=T$s);},T$s.save=function(){this._save[this._save._length++]=T$P.Create(this);},T$s.restore=function(){var T$L=this._save._length;if(!(T$L<1))for(var T$s=T$L-1;0<=T$s;T$s--){var T$m=this._save[T$s];if(T$m.restore(this),T$m.isSaveMark())return void(this._save._length=T$s);}},T$s._fillText=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o){void 0===T$o&&(T$o=0);var T$V=this._shader2D,T$C=this._curSubmit.shaderValue,T$E=T$w?T$uL.create(T$w):this._other.font;if(T$d.enabled)T$V.ALPHA!==T$C.ALPHA&&(T$V.glTexture=null),T$rL.drawText(this,T$L,T$s,this._curMat,T$E,T$F||this._other.textAlign,T$O,T$v,T$y,T$m,T$x,T$o);else{this._shader2D.defines.getValue();var T$r=T$O?T$u.create(T$O)._color:T$V.colorAdd;T$V.ALPHA===T$C.ALPHA&&T$r===T$V.colorAdd&&T$C.colorAdd===T$V.colorAdd||(T$V.glTexture=null,T$V.colorAdd=T$r),T$rL.drawText(this,T$L,T$s,this._curMat,T$E,T$F||this._other.textAlign,T$O,T$v,T$y,T$m,T$x,T$o);}},T$s.fillWords=function(T$L,T$s,T$m,T$x,T$w,T$O){this._fillText(null,T$L,T$s,T$m,T$x,T$w,null,-1,null,T$O);},T$s.fillBorderWords=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){this._fillBorderText(null,T$L,T$s,T$m,T$x,T$w,T$O,T$v,null);},T$s.fillText=function(T$L,T$s,T$m,T$x,T$w,T$O){this._fillText(T$L,null,T$s,T$m,T$x,T$w,null,-1,T$O);},T$s.strokeText=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){this._fillText(T$L,null,T$s,T$m,T$x,null,T$w,T$O||1,T$v);},T$s.fillBorderText=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){this._fillBorderText(T$L,null,T$s,T$m,T$x,T$w,T$O,T$v,T$y);},T$s._fillBorderText=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F){if(!T$d.enabled)return this._fillText(T$L,T$s,T$m,T$x,T$w,null,T$v,T$y||1,T$F),void this._fillText(T$L,T$s,T$m,T$x,T$w,T$O,null,-1,T$F);var T$o=this._shader2D,T$V=this._curSubmit.shaderValue;T$o.ALPHA!==T$V.ALPHA&&(T$o.glTexture=null);var T$C=T$w?(T$W._fontTemp.setFont(T$w),T$W._fontTemp):this._other.font;T$rL.drawText(this,T$L,T$s,this._curMat,T$C,T$F||this._other.textAlign,T$O,T$v,T$y||1,T$m,T$x,0);},T$s.fillRect=function(T$L,T$s,T$m,T$x,T$w){var T$O=this._vb;if(T$jL.fillRectImgVb(T$O,this._clipRect,T$L,T$s,T$m,T$x,T$A.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var T$v=this._shader2D.fillStyle;T$w&&(this._shader2D.fillStyle=T$n.create(T$w));var T$y=this._shader2D,T$F=this._curSubmit.shaderValue;if(T$y.fillStyle!==T$F.fillStyle||T$y.ALPHA!==T$F.ALPHA){T$y.glTexture=null;var T$o=this._curSubmit=T$OL.createSubmit(this,this._ib,T$O,(T$O._byteLength-64)/32*3,T$fL.create(2,0));T$o.shaderValue.color=T$y.fillStyle._color._color,T$o.shaderValue.ALPHA=T$y.ALPHA,this._submits[this._submits._length++]=T$o;}this._curSubmit._numEle+=6,this._shader2D.fillStyle=T$v;}},T$s.fillTexture=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){if(T$L.loaded&&T$L.bitmap&&T$L.source){var T$F=this._vb,T$o=T$L.bitmap.width,T$V=T$L.bitmap.height,T$C=T$L.uv,T$E=T$v.x%T$L.width,T$r=T$v.y%T$L.height;if(T$o!=T$y.w||T$V!=T$y.h){if(!T$y.w&&!T$y.h)switch(T$y.oy=T$y.ox=0,T$O){case"repeat":T$y.width=T$x,T$y.height=T$w;break;case"repeat-x":T$y.width=T$x,T$r<0?T$L.height+T$r>T$w?T$y.height=T$w:T$y.height=T$L.height+T$r:(T$y.oy=T$r,T$L.height+T$r>T$w?T$y.height=T$w-T$r:T$y.height=T$L.height);break;case"repeat-y":T$E<0?T$L.width+T$E>T$x?T$y.width=T$x:T$y.width=T$L.width+T$E:(T$y.ox=T$E,T$L.width+T$E>T$x?T$y.width=T$x-T$E:T$y.width=T$L.width),T$y.height=T$w;break;case"no-repeat":T$E<0?T$L.width+T$E>T$x?T$y.width=T$x:T$y.width=T$L.width+T$E:(T$y.ox=T$E,T$L.width+T$E>T$x?T$y.width=T$x-T$E:T$y.width=T$L.width),T$r<0?T$L.height+T$r>T$w?T$y.height=T$w:T$y.height=T$L.height+T$r:(T$y.oy=T$r,T$L.height+T$r>T$w?T$y.height=T$w-T$r:T$y.height=T$L.height);break;default:T$y.width=T$x,T$y.height=T$w;}T$y.w=T$o,T$y.h=T$V,T$y.uv=[0,0,T$y.width/T$o,0,T$y.width/T$o,T$y.height/T$V,0,T$y.height/T$V];}if(T$s+=T$y.ox,T$m+=T$y.oy,T$E-=T$y.ox,T$r-=T$y.oy,T$jL.fillRectImgVb(T$F,this._clipRect,T$s,T$m,T$y.width,T$y.height,T$y.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var T$u=T$RL.create(this,this._ib,T$F,(T$F._byteLength-64)/32*3,T$fL.create(256,0)),T$T=(this._submits[this._submits._length++]=T$u).shaderValue;T$T.textureHost=T$L;var T$j=T$C[0]*T$o,T$D=T$C[1]*T$V,T$e=(T$C[2]-T$C[0])*T$o,T$b=(T$C[5]-T$C[3])*T$V,T$S=-T$E/T$o,T$H=-T$r/T$V;T$T.u_TexRange[0]=T$j/T$o,T$T.u_TexRange[1]=T$e/T$o,T$T.u_TexRange[2]=T$D/T$V,T$T.u_TexRange[3]=T$b/T$V,T$T.u_offset[0]=T$S,T$T.u_offset[1]=T$H,T$d.enabled&&!this._isMain&&T$u.addTexture(T$L,(T$F._byteLength>>2)-16),(this._curSubmit=T$u)._renderType=10017,T$u._numEle+=6;}}else this.sprite&&T$Y.timer.callLater(this,this._repaintSprite);},T$s.setShader=function(T$L){T$l.save(this,1048576,this._shader2D,!0),this._shader2D.shader=T$L;},T$s.setFilters=function(T$L){T$l.save(this,2097152,this._shader2D,!0),this._shader2D.filters=T$L,this._curSubmit=T$OL.RENDERBASE,this._renderKey=0,this._drawCount++;},T$s.drawTexture=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){this._drawTextureM(T$L,T$s,T$m,T$x,T$w,T$O,T$v,null,1);},T$s.addTextureVb=function(T$L,T$s,T$m){var T$x=this._curSubmit._vb||this._vb,T$w=T$x._byteLength>>2;T$x.byteLength=T$w+16<<2;for(var T$O=T$x.getFloat32Array(),T$v=0;T$v<16;T$v+=4)T$O[T$w++]=T$L[T$v]+T$s,T$O[T$w++]=T$L[T$v+1]+T$m,T$O[T$w++]=T$L[T$v+2],T$O[T$w++]=T$L[T$v+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),T$x._upload=!0;},T$s.willDrawTexture=function(T$L,T$s){if(!(T$L.loaded&&T$L.bitmap&&T$L.source))return this.sprite&&T$Y.timer.callLater(this,this._repaintSprite),0;var T$m=T$L.bitmap,T$x=T$m.id+this._shader2D.ALPHA*T$s+10016;if(T$x==this._renderKey)return T$x;var T$w=this._shader2D,T$O=T$w.ALPHA,T$v=this._curSubmit.shaderValue;T$w.ALPHA*=T$s,this._renderKey=T$x,this._drawCount++,T$w.glTexture=T$m;var T$y=this._vb,T$F=null,T$o=T$y._byteLength/32*3,T$V=T$v.textureHost&&T$v.textureHost==T$L&&T$v.textureHost.alphaTexture==T$L.alphaTexture;return T$F=T$RL.create(this,this._ib,T$y,T$o,T$fL.create(1,0)),(this._submits[this._submits._length++]=T$F).shaderValue.textureHost=T$L,T$F._renderType=10016,T$F._preIsSameTextureShader=10016===this._curSubmit._renderType&&T$w.ALPHA===T$v.ALPHA&&T$V,this._curSubmit=T$F,T$w.ALPHA=T$O,T$x;},T$s.drawTextures=function(T$L,T$s,T$m,T$x){if(T$L.loaded&&T$L.bitmap&&T$L.source){var T$w=this._clipRect;if(this._clipRect=T$W.MAXCLIPRECT,this._drawTextureM(T$L,T$s[0],T$s[1],T$L.width,T$L.height,T$m,T$x,null,1)){if(this._clipRect=T$w,T$c.drawCall++,!(T$s.length<4)){for(var T$O=this._curSubmit._vb||this._vb,T$v=this._curMat.a,T$y=this._curMat.d,T$F=2,T$o=T$s.length;T$F<T$o;T$F+=2)T$jL.copyPreImgVb(T$O,(T$s[T$F]-T$s[T$F-2])*T$v,(T$s[T$F+1]-T$s[T$F-1])*T$y),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle);}}else alert("drawTextures err");}else this.sprite&&T$Y.timer.callLater(this,this._repaintSprite);},T$s._drawTextureM=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F){if(!T$L.loaded||!T$L.source)return this.sprite&&T$Y.timer.callLater(this,this._repaintSprite),!1;var T$o=this._curSubmit._vb||this._vb,T$V=T$L.bitmap;T$s+=T$O,T$m+=T$v,this._drawCount++;var T$C=T$V.id+this._shader2D.ALPHA*T$F+10016;if(T$C!=this._renderKey){this._renderKey=T$C;var T$E=this._curSubmit.shaderValue,T$r=this._shader2D,T$u=T$r.ALPHA;T$r.ALPHA*=T$F,T$r.glTexture=T$V;var T$T=this._vb,T$j=null,T$D=T$T._byteLength/32*3,T$e=T$E.textureHost&&T$E.textureHost==T$L&&T$E.textureHost.alphaTexture==T$L.alphaTexture;T$j=T$RL.create(this,this._ib,T$T,T$D,T$fL.create(1,0)),(this._submits[this._submits._length++]=T$j).shaderValue.textureHost=T$L,T$j._renderType=10016,T$j._preIsSameTextureShader=10016===this._curSubmit._renderType&&T$r.ALPHA===T$E.ALPHA&&T$e,this._curSubmit=T$j,T$o=this._curSubmit._vb||this._vb,T$r.ALPHA=T$u;}return!!T$jL.fillRectImgVb(T$o,this._clipRect,T$s,T$m,T$x||T$L.width,T$w||T$L.height,T$L.uv,T$y||this._curMat,this._x,this._y,0,0)&&(T$d.enabled&&!this._isMain&&this._curSubmit.addTexture(T$L,(T$o._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0);},T$s._repaintSprite=function(){this.sprite&&this.sprite.repaint();},T$s._drawText=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o){var T$V=T$L.bitmap;this._drawCount++;var T$C=T$V.id+this._shader2D.ALPHA+10016;if(T$C!=this._renderKey){this._renderKey=T$C;var T$E=this._curSubmit.shaderValue,T$r=this._shader2D;T$r.glTexture=T$V;var T$u=this._vb,T$T=null,T$j=T$u._byteLength/32*3,T$D=T$E.textureHost&&T$E.textureHost==T$L&&T$E.textureHost.alphaTexture==T$L.alphaTexture;(T$T=T$d.enabled?T$RL.create(this,this._ib,T$u,T$j,T$fL.create(1,0)):T$RL.create(this,this._ib,T$u,T$j,T$BL.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&T$r.ALPHA===T$E.ALPHA&&T$D,(this._submits[this._submits._length++]=T$T).shaderValue.textureHost=T$L,T$T._renderType=10016,this._curSubmit=T$T;}T$L.active();var T$e=this._curSubmit._vb||this._vb;T$jL.fillRectImgVb(T$e,this._clipRect,T$s+T$v,T$m+T$y,T$x||T$L.width,T$w||T$L.height,T$L.uv,T$O||this._curMat,this._x,this._y,T$F,T$o,!0)&&(T$d.enabled&&!this._isMain&&this._curSubmit.addTexture(T$L,(T$e._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle));},T$s.drawTextureWithTransform=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F){if(T$O){var T$o=this._curMat,T$V=this._x,T$C=this._y;(0!==T$v||0!==T$y)&&(this._x=T$v*T$o.a+T$y*T$o.c,this._y=T$y*T$o.d+T$v*T$o.b),T$O&&T$o.bTransform?(T$_.mul(T$O,T$o,T$W._tmpMatrix),(T$O=T$W._tmpMatrix)._checkTransform()):(this._x+=T$o.tx,this._y+=T$o.ty),this._drawTextureM(T$L,T$s,T$m,T$x,T$w,0,0,T$O,T$F),this._x=T$V,this._y=T$C;}else this._drawTextureM(T$L,T$s,T$m,T$x,T$w,T$v,T$y,null,T$F);},T$s.fillQuadrangle=function(T$L,T$s,T$m,T$x,T$w){var T$O=this._curSubmit,T$v=this._vb,T$y=this._shader2D,T$F=T$O.shaderValue;if(this._renderKey=0,T$L.bitmap){var T$o=T$L.bitmap;T$y.glTexture==T$o&&T$y.ALPHA===T$F.ALPHA||(T$y.glTexture=T$o,(T$O=this._curSubmit=T$OL.createSubmit(this,this._ib,T$v,T$v._byteLength/32*3,T$fL.create(1,0))).shaderValue.glTexture=T$o,this._submits[this._submits._length++]=T$O),T$jL.fillQuadrangleImgVb(T$v,T$s,T$m,T$x,T$L.uv,T$w||this._curMat,this._x,this._y);}else T$O.shaderValue.fillStyle&&T$O.shaderValue.fillStyle.equal(T$L)&&T$y.ALPHA===T$F.ALPHA||(T$y.glTexture=null,(T$O=this._curSubmit=T$OL.createSubmit(this,this._ib,T$v,T$v._byteLength/32*3,T$fL.create(2,0))).shaderValue.defines.add(2),T$O.shaderValue.fillStyle=T$n.create(T$L),this._submits[this._submits._length++]=T$O),T$jL.fillQuadrangleImgVb(T$v,T$s,T$m,T$x,T$A.DEF_UV,T$w||this._curMat,this._x,this._y);T$O._numEle+=6;},T$s.drawTexture2=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){if(0!=T$O){var T$F=this._curMat;if(this._x=T$L*T$F.a+T$s*T$F.c,this._y=T$s*T$F.d+T$L*T$F.b,T$w&&(T$w=T$F.bTransform||T$w.bTransform?(T$_.mul(T$w,T$F,T$W._tmpMatrix),T$W._tmpMatrix):(this._x+=T$w.tx+T$F.tx,this._y+=T$w.ty+T$F.ty,T$_.EMPTY)),1!==T$O||T$v){var T$o=this._shader2D.ALPHA,T$V=this._nBlendType;this._shader2D.ALPHA=T$O,T$v&&(this._nBlendType=T$I.TOINT(T$v)),this._drawTextureM(T$y[0],T$y[1]-T$m,T$y[2]-T$x,T$y[3],T$y[4],0,0,T$w,1),this._shader2D.ALPHA=T$o,this._nBlendType=T$V;}else this._drawTextureM(T$y[0],T$y[1]-T$m,T$y[2]-T$x,T$y[3],T$y[4],0,0,T$w,1);this._x=this._y=0;}},T$s.drawCanvas=function(T$L,T$s,T$m,T$x,T$w){var T$O=T$L.context;if(this._renderKey=0,T$O._targets)this._submits[this._submits._length++]=T$GL.create(T$O,0,null),this._curSubmit=T$OL.RENDERBASE,T$O._targets.drawTo(this,T$s,T$m,T$x,T$w);else{var T$v=this._submits[this._submits._length++]=T$GL.create(T$O,this._shader2D.ALPHA,this._shader2D.filters),T$y=T$x/T$L.width,T$F=T$w/T$L.height,T$o=T$v._matrix;this._curMat.copyTo(T$o),1!=T$y&&1!=T$F&&T$o.scale(T$y,T$F);var T$V=T$o.tx,T$C=T$o.ty;T$o.tx=T$o.ty=0,T$o.transformPoint(T$Q.TEMP.setTo(T$s,T$m)),T$o.translate(T$Q.TEMP.x+T$V,T$Q.TEMP.y+T$C),this._curSubmit=T$OL.RENDERBASE;}T$a.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=T$O._targets?"yellow":"green",this.strokeRect(T$s-1,T$m-1,T$x+2,T$w+2,1),this.strokeRect(T$s,T$m,T$x,T$w,1),this.restore());},T$s.drawTarget=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o){void 0===T$o&&(T$o=-1);var T$V=this._vb;if(T$jL.fillRectImgVb(T$V,this._clipRect,T$s,T$m,T$x,T$w,T$F||T$A.DEF_UV,T$O||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var T$C=this._curSubmit=T$CL.create(this,this._ib,T$V,(T$V._byteLength-64)/32*3,T$y,T$v);T$C.blendType=-1==T$o?this._nBlendType:T$o,T$C.scope=T$L,this._submits[this._submits._length++]=T$C,this._curSubmit._numEle+=6;}},T$s.mixRGBandAlpha=function(T$L){return this._mixRGBandAlpha(T$L,this._shader2D.ALPHA);},T$s._mixRGBandAlpha=function(T$L,T$s){var T$m=(4278190080&T$L)>>>24;return 0!=T$m?T$m*=T$s:T$m=255*T$s,16777215&T$L|T$m<<24;},T$s.drawTriangles=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o){if(!T$L.loaded||!T$L.source)return this.sprite&&T$Y.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;T$L.bitmap;var T$V=this._mixRGBandAlpha(4294967295,T$y),T$C=(T$x.length,T$O.length);this._renderKey=-1;var T$E=this._curSubmit=T$RL.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,T$fL.create(1,0));return T$E.shaderValue.textureHost=T$L,T$E._renderType=10016,this._submits[this._submits._length++]=T$E,T$v?(T$W._tmpMatrix.a=T$v.a,T$W._tmpMatrix.b=T$v.b,T$W._tmpMatrix.c=T$v.c,T$W._tmpMatrix.d=T$v.d,T$W._tmpMatrix.tx=T$v.tx+T$s,T$W._tmpMatrix.ty=T$v.ty+T$m,T$_.mul(T$W._tmpMatrix,this._curMat,T$W._tmpMatrix)):(T$W._tmpMatrix.a=this._curMat.a,T$W._tmpMatrix.b=this._curMat.b,T$W._tmpMatrix.c=this._curMat.c,T$W._tmpMatrix.d=this._curMat.d,T$W._tmpMatrix.tx=this._curMat.tx+T$s,T$W._tmpMatrix.ty=this._curMat.ty+T$m),this._triangleMesh.addData(T$x,T$w,T$O,T$W._tmpMatrix,T$V,this),this._curSubmit._numEle+=T$C,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0;},T$s.transform=function(T$L,T$s,T$m,T$x,T$w,T$O){T$k.save(this),T$_.mul(T$_.TEMP.setTo(T$L,T$s,T$m,T$x,T$w,T$O),this._curMat,this._curMat),this._curMat._checkTransform();},T$s.setTransformByMatrix=function(T$L){T$L.copyTo(this._curMat);},T$s.transformByMatrix=function(T$L){T$k.save(this),T$_.mul(T$L,this._curMat,this._curMat),this._curMat._checkTransform();},T$s.rotate=function(T$L){T$k.save(this),this._curMat.rotateEx(T$L);},T$s.scale=function(T$L,T$s){T$k.save(this),this._curMat.scaleEx(T$L,T$s);},T$s.clipRect=function(T$L,T$s,T$m,T$x){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var T$w=T$VL.create(4);this.addRenderObject(T$w);var T$O=this._vb,T$v=T$O._byteLength>>2;if(T$jL.fillRectImgVb(T$O,null,T$L,T$s,T$m,T$x,T$A.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var T$y=this._curSubmit=T$OL.createSubmit(this,this._ib,T$O,(T$O._byteLength-64)/32*3,T$fL.create(2,0));T$y.shaderValue.ALPHA=1,this._submits[this._submits._length++]=T$y,this._curSubmit._numEle+=6;}else alert("clipRect calc stencil rect error");var T$F=T$VL.create(5);this.addRenderObject(T$F);var T$o=T$O.getFloat32Array(),T$V=Math.min(Math.min(Math.min(T$o[0+T$v],T$o[4+T$v]),T$o[8+T$v]),T$o[12+T$v]),T$C=Math.max(Math.max(Math.max(T$o[0+T$v],T$o[4+T$v]),T$o[8+T$v]),T$o[12+T$v]),T$E=Math.min(Math.min(Math.min(T$o[1+T$v],T$o[5+T$v]),T$o[9+T$v]),T$o[13+T$v]),T$r=Math.max(Math.max(Math.max(T$o[1+T$v],T$o[5+T$v]),T$o[9+T$v]),T$o[13+T$v]);T$K.save(this,T$F,T$L,T$s,T$m,T$x,T$V,T$E,T$C-T$V,T$r-T$E),this._curSubmit=T$OL.RENDERBASE;}else{T$m*=this._curMat.a,T$x*=this._curMat.d;var T$u=T$Q.TEMP;this._curMat.transformPoint(T$u.setTo(T$L,T$s)),T$m<0&&(T$u.x=T$u.x+T$m,T$m=-T$m),T$x<0&&(T$u.y=T$u.y+T$x,T$x=-T$x),this._renderKey=0;var T$T=this._curSubmit=T$oL.create(this);(this._submits[this._submits._length++]=T$T).submitIndex=this._submits._length,T$T.submitLength=9999999,T$q.save(this,T$T);var T$j=this._clipRect,T$D=T$j.x,T$e=T$j.y,T$b=T$u.x+T$m,T$S=T$u.y+T$x;T$D<T$u.x&&(T$j.x=T$u.x),T$e<T$u.y&&(T$j.y=T$u.y),T$j.width=Math.min(T$b,T$D+T$j.width)-T$j.x,T$j.height=Math.min(T$S,T$e+T$j.height)-T$j.y,this._shader2D.glTexture=null,T$T.clipRect.copyFrom(T$j),this._curSubmit=T$OL.RENDERBASE;}},T$s.setIBVB=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o,T$V){if(void 0===T$F&&(T$F=0),void 0===T$o&&(T$o=0),void 0===T$V&&(T$V=0),null===T$m){if(T$D.isFlash){var T$C=T$x;T$C._selfIB||(T$C._selfIB=T$zL.create(35044)),T$C._selfIB.clear(),T$m=T$C._selfIB;}else T$m=this._ib;T$jL.expandIBQuadrangle(T$m,T$x._byteLength/(4*T$x.vertexStride*4));}if(!T$y||!T$v)throw Error("setIBVB must input:shader shaderValues");var T$E=T$FL.create(this,T$x,T$m,T$w,T$v,T$y,T$F,T$o,T$V);T$O||(T$O=T$_.EMPTY),T$O.translate(T$L,T$s),T$_.mul(T$O,this._curMat,T$E._mat),T$O.translate(-T$L,-T$s),this._submits[this._submits._length++]=T$E,this._curSubmit=T$OL.RENDERBASE,this._renderKey=0;},T$s.addRenderObject=function(T$L){this._submits[this._submits._length++]=T$L;},T$s.fillTrangles=function(T$L,T$s,T$m,T$x,T$w){var T$O=this._curSubmit,T$v=this._vb,T$y=this._shader2D,T$F=T$O.shaderValue,T$o=T$x.length>>4,T$V=T$L.bitmap;this._renderKey=0,T$y.glTexture==T$V&&T$y.ALPHA===T$F.ALPHA||((T$O=this._curSubmit=T$OL.createSubmit(this,this._ib,T$v,T$v._byteLength/32*3,T$fL.create(1,0))).shaderValue.textureHost=T$L,this._submits[this._submits._length++]=T$O),T$jL.fillTranglesVB(T$v,T$s,T$m,T$x,T$w||this._curMat,this._x,this._y),T$O._numEle+=6*T$o;},T$s.submitElement=function(T$L,T$s){var T$m=this._submits;for(T$s<0&&(T$s=T$m._length);T$L<T$s;)T$L+=T$m[T$L].renderSubmit();},T$s.finish=function(){T$SL.mainContext.finish();},T$s.flush=function(){var T$L=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(T$L>this._ib.bufferLength/12&&T$jL.expandIBQuadrangle(this._ib,T$L),!this._isMain&&T$d.enabled&&T$d._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=T$d._atlasRestore;for(var T$s=this._submits,T$m=0,T$x=T$s._length;T$m<T$x;T$m++){var T$w=T$s[T$m];10016===T$w.getRenderType()&&T$w.checkTexture();}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),T$sL.instance&&T$sL.getInstance().reset();var T$O;for(T$m=0,T$O=this.meshlist.length;T$m<T$O;T$m++){var T$v=this.meshlist[T$m];T$v.canReuse?T$v.releaseMesh():T$v.destroy();}return this.meshlist.length=0,this._curSubmit=T$OL.RENDERBASE,this._renderKey=0,this._triangleMesh=T$AL.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length;},T$s.setPathId=function(T$L){if(this.mId=T$L,-1!=this.mId){this.mHaveKey=!1;var T$s=T$$.getInstance();T$s.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,T$s.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0);}},T$s.movePath=function(T$L,T$s){var T$m=T$L,T$x=T$s;T$L=this._curMat.a*T$m+this._curMat.c*T$x+this._curMat.tx,T$s=this._curMat.b*T$m+this._curMat.d*T$x+this._curMat.ty,this.mX+=T$L,this.mY+=T$s;},T$s.beginPath=function(){var T$L=this._getPath();T$L.tempArray.length=0,T$L.closePath=!1,this.mX=0,this.mY=0;},T$s.closePath=function(){this._path.closePath=!0;},T$s.fill=function(T$L){void 0===T$L&&(T$L=!1);var T$s=this._getPath();this.drawPoly(0,0,T$s.tempArray,this.fillStyle._color.numColor,0,0,T$L);},T$s.stroke=function(){var T$L=this._getPath();if(0<this.lineWidth){if(-1==this.mId)T$L.drawLine(0,0,T$L.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var T$s=T$$.getInstance().shapeLineDic[this.mId];T$s.rebuild(T$L.tempArray),T$L.setGeomtry(T$s);}else T$$.getInstance().addLine(this.mId,T$L.drawLine(0,0,T$L.tempArray,this.lineWidth,this.strokeStyle._color.numColor));T$L.update();var T$m=[this.mX,this.mY],T$x=T$OL.createShape(this,T$L.ib,T$L.vb,T$L.count,T$L.offset,T$fL.create(4,0));T$x.shaderValue.ALPHA=this._shader2D.ALPHA,T$x.shaderValue.u_pos=T$m,T$x.shaderValue.u_mmat2=T$eL.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=T$x,this._renderKey=-1;}},T$s.line=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v=this._curSubmit,T$y=this._vb;if(T$jL.fillLineVb(T$y,this._clipRect,T$L,T$s,T$m,T$x,T$w,T$O)){this._renderKey=0;var T$F=this._shader2D,T$o=T$v.shaderValue;T$F.strokeStyle===T$o.strokeStyle&&T$F.ALPHA===T$o.ALPHA||(T$F.glTexture=null,(T$v=this._curSubmit=T$OL.createSubmit(this,this._ib,T$y,(T$y._byteLength-64)/32*3,T$fL.create(2,0))).shaderValue.strokeStyle=T$F.strokeStyle,T$v.shaderValue.mainID=2,T$v.shaderValue.ALPHA=T$F.ALPHA,this._submits[this._submits._length++]=T$v),T$v._numEle+=6;}},T$s.moveTo=function(T$L,T$s,T$m){void 0===T$m&&(T$m=!0);var T$x=this._getPath();if(T$m){var T$w=T$L,T$O=T$s;T$L=this._curMat.a*T$w+this._curMat.c*T$O,T$s=this._curMat.b*T$w+this._curMat.d*T$O;}T$x.addPoint(T$L,T$s);},T$s.lineTo=function(T$L,T$s,T$m){void 0===T$m&&(T$m=!0);var T$x=this._getPath();if(T$m){var T$w=T$L,T$O=T$s;T$L=this._curMat.a*T$w+this._curMat.c*T$O,T$s=this._curMat.b*T$w+this._curMat.d*T$O;}T$x.addPoint(T$L,T$s);},T$s.drawCurves=function(T$L,T$s,T$m){this.setPathId(-1),this.beginPath(),this.strokeStyle=T$m[3],this.lineWidth=T$m[4];var T$x=T$m[2];T$L+=T$m[0],T$s+=T$m[1],this.movePath(T$L,T$s),this.moveTo(T$x[0],T$x[1]);for(var T$w=2,T$O=T$x.length;T$w<T$O;)this.quadraticCurveTo(T$x[T$w++],T$x[T$w++],T$x[T$w++],T$x[T$w++]);this.stroke();},T$s.arcTo=function(T$L,T$s,T$m,T$x,T$w){if(-1==this.mId||!this.mHaveKey){var T$O=0,T$v=0,T$y=0,T$F=this._getPath();this._curMat.copyTo(T$W._tmpMatrix),T$W._tmpMatrix.tx=T$W._tmpMatrix.ty=0,T$W._tempPoint.setTo(T$F.getEndPointX(),T$F.getEndPointY()),T$W._tmpMatrix.invertTransformPoint(T$W._tempPoint);var T$o=T$W._tempPoint.x-T$L,T$V=T$W._tempPoint.y-T$s,T$C=Math.sqrt(T$o*T$o+T$V*T$V);if(!(T$C<=1e-6)){var T$E=T$o/T$C,T$r=T$V/T$C,T$u=T$m-T$L,T$T=T$x-T$s,T$j=T$u*T$u+T$T*T$T,T$D=Math.sqrt(T$j);if(!(T$D<=1e-6)){var T$e=T$u/T$D,T$b=T$T/T$D,T$S=T$E+T$e,T$H=T$r+T$b,T$Y=Math.sqrt(T$S*T$S+T$H*T$H);if(!(T$Y<=1e-6)){var T$a=T$S/T$Y,T$f=T$H/T$Y,T$_=Math.acos(T$a*T$E+T$f*T$r),T$Q=Math.PI/2-T$_,T$N=(T$C=T$w/Math.tan(T$Q))*T$E+T$L,T$i=T$C*T$r+T$s,T$U=Math.sqrt(T$C*T$C+T$w*T$w),T$c=T$L+T$a*T$U,T$h=T$s+T$f*T$U,T$G=0,T$R=0;if(0<=T$E*T$b-T$r*T$e){var T$A=2*T$Q/T$W.SEGNUM;T$G=Math.sin(T$A),T$R=Math.cos(T$A);}else T$A=2*-T$Q/T$W.SEGNUM,T$G=Math.sin(T$A),T$R=Math.cos(T$A);T$v=this._curMat.a*T$N+this._curMat.c*T$i,T$y=this._curMat.b*T$N+this._curMat.d*T$i,T$v==this._path.getEndPointX()&&T$y==this._path.getEndPointY()||T$F.addPoint(T$v,T$y);var T$g=T$N-T$c,T$$=T$i-T$h;for(T$O=0;T$O<T$W.SEGNUM;T$O++){var T$p=T$g*T$R+T$$*T$G,T$Z=-T$g*T$G+T$$*T$R;T$v=T$p+T$c,T$y=T$Z+T$h,T$L=this._curMat.a*T$v+this._curMat.c*T$y,T$y=T$s=this._curMat.b*T$v+this._curMat.d*T$y,(T$v=T$L)==this._path.getEndPointX()&&T$y==this._path.getEndPointY()||T$F.addPoint(T$v,T$y),T$g=T$p,T$$=T$Z;}}}}}},T$s.arc=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){if(void 0===T$O&&(T$O=!1),void 0===T$v&&(T$v=!0),-1!=this.mId){var T$y=T$$.getInstance().shapeDic[this.mId];if(T$y&&this.mHaveKey&&!T$y.needUpdate(this._curMat))return;T$s=T$L=0;}var T$F,T$o=0,T$V=0,T$C=0,T$E=0,T$r=0,T$u=0,T$T=0;if(T$V=T$w-T$x,T$O){if(Math.abs(T$V)>=2*Math.PI)T$V=2*-Math.PI;else for(;0<T$V;)T$V-=2*Math.PI;}else if(Math.abs(T$V)>=2*Math.PI)T$V=2*Math.PI;else for(;T$V<0;)T$V+=2*Math.PI;T$F=T$V/(T$T=T$m<101?Math.max(10,T$V*T$m/5):T$m<201?Math.max(10,T$V*T$m/20):Math.max(10,T$V*T$m/40))/2,T$C=Math.abs(4/3*(1-Math.cos(T$F))/Math.sin(T$F)),T$O&&(T$C=-T$C);var T$j=this._getPath(),T$D=NaN,T$e=NaN;for(T$u=0;T$u<=T$T;T$u++)T$o=T$x+T$V*(T$u/T$T),T$E=T$L+Math.cos(T$o)*T$m,T$r=T$s+Math.sin(T$o)*T$m,T$v&&(T$D=T$E,T$e=T$r,T$E=this._curMat.a*T$D+this._curMat.c*T$e,T$r=this._curMat.b*T$D+this._curMat.d*T$e),T$E==this._path.getEndPointX()&&T$r==this._path.getEndPointY()||T$j.addPoint(T$E,T$r);T$E=T$L+Math.cos(T$w)*T$m,T$r=T$s+Math.sin(T$w)*T$m,T$v&&(T$D=T$E,T$e=T$r,T$E=this._curMat.a*T$D+this._curMat.c*T$e,T$r=this._curMat.b*T$D+this._curMat.d*T$e),T$E==this._path.getEndPointX()&&T$r==this._path.getEndPointY()||T$j.addPoint(T$E,T$r);},T$s.quadraticCurveTo=function(T$L,T$s,T$m,T$x){var T$w=T$C.I,T$O=T$m,T$v=T$x;T$m=this._curMat.a*T$O+this._curMat.c*T$v,T$x=this._curMat.b*T$O+this._curMat.d*T$v,T$O=T$L,T$v=T$s,T$L=this._curMat.a*T$O+this._curMat.c*T$v,T$s=this._curMat.b*T$O+this._curMat.d*T$v;for(var T$y=T$w.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),T$L,T$s,T$m,T$x],30,2),T$F=0,T$o=T$y.length/2;T$F<T$o;T$F++)this.lineTo(T$y[2*T$F],T$y[2*T$F+1],!1);this.lineTo(T$m,T$x,!1);},T$s.rect=function(T$L,T$s,T$m,T$x){this._other=this._other.make(),this._other.path||(this._other.path=new T$J()),this._other.path.rect(T$L,T$s,T$m,T$x);},T$s.strokeRect=function(T$L,T$s,T$m,T$x,T$w){var T$O=.5*T$w;this.line(T$L-T$O,T$s,T$L+T$m+T$O,T$s,T$w,this._curMat),this.line(T$L+T$m,T$s,T$L+T$m,T$s+T$x,T$w,this._curMat),this.line(T$L,T$s,T$L,T$s+T$x,T$w,this._curMat),this.line(T$L-T$O,T$s+T$x,T$L+T$m+T$O,T$s+T$x,T$w,this._curMat);},T$s.clip=function(){},T$s.drawPoly=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){void 0===T$v&&(T$v=!1),this._renderKey=0,this._shader2D.glTexture=null;var T$y=this._getPath();if(-1==this.mId)T$y.polygon(T$L,T$s,T$m,T$x,T$w||1,T$O);else if(this.mHaveKey){var T$F=T$$.getInstance().shapeDic[this.mId];T$F.setMatrix(this._curMat),T$F.rebuild(T$y.tempArray),T$y.setGeomtry(T$F);}else{var T$o=T$y.polygon(T$L,T$s,T$m,T$x,T$w||1,T$O);T$$.getInstance().addShape(this.mId,T$o),T$o.setMatrix(this._curMat);}T$y.update();var T$V,T$C=[this.mX,this.mY];if((T$V=T$OL.createShape(this,T$y.ib,T$y.vb,T$y.count,T$y.offset,T$fL.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,T$V.shaderValue.u_pos=T$C,T$V.shaderValue.u_mmat2=T$eL.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=T$V,0<T$w){if(this.mHaveLineKey){var T$E=T$$.getInstance().shapeLineDic[this.mId];T$E.rebuild(T$y.tempArray),T$y.setGeomtry(T$E);}else T$$.getInstance().addShape(this.mId,T$y.drawLine(T$L,T$s,T$m,T$w,T$O));T$y.update(),(T$V=T$OL.createShape(this,T$y.ib,T$y.vb,T$y.count,T$y.offset,T$fL.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,T$V.shaderValue.u_mmat2=T$eL.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=T$V;}},T$s.drawParticle=function(T$L,T$s,T$m){T$m.x=T$L,T$m.y=T$s,this._submits[this._submits._length++]=T$m;},T$s._getPath=function(){return this._path||(this._path=new T$J());},T$x(0,T$s,"globalCompositeOperation",function(){return T$I.NAMES[this._nBlendType];},function(T$L){var T$s=T$I.TOINT[T$L];null==T$s||this._nBlendType===T$s||(T$l.save(this,65536,this,!0),this._curSubmit=T$OL.RENDERBASE,this._renderKey=0,this._nBlendType=T$s);}),T$x(0,T$s,"strokeStyle",function(){return this._shader2D.strokeStyle;},function(T$L){this._shader2D.strokeStyle.equal(T$L)||(T$l.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=T$n.create(T$L));}),T$x(0,T$s,"globalAlpha",function(){return this._shader2D.ALPHA;},function(T$L){(T$L=Math.floor(1e3*T$L)/1e3)!=this._shader2D.ALPHA&&(T$l.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=T$L);}),T$x(0,T$s,"asBitmap",null,function(T$L){if(T$L){if(this._targets||(this._targets=new T$M()),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height);}else this._targets=null;}),T$x(0,T$s,"fillStyle",function(){return this._shader2D.fillStyle;},function(T$L){this._shader2D.fillStyle.equal(T$L)||(T$l.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=T$n.create(T$L));}),T$x(0,T$s,"textAlign",function(){return this._other.textAlign;},function(T$L){this._other.textAlign===T$L||(this._other=this._other.make(),T$l.save(this,32768,this._other,!1),this._other.textAlign=T$L);}),T$x(0,T$s,"lineWidth",function(){return this._other.lineWidth;},function(T$L){this._other.lineWidth===T$L||(this._other=this._other.make(),T$l.save(this,256,this._other,!1),this._other.lineWidth=T$L);}),T$x(0,T$s,"textBaseline",function(){return this._other.textBaseline;},function(T$L){this._other.textBaseline===T$L||(this._other=this._other.make(),T$l.save(this,16384,this._other,!1),this._other.textBaseline=T$L);}),T$x(0,T$s,"font",null,function(T$L){T$L!=this._other.font.toString()&&(this._other=this._other.make(),T$l.save(this,8,this._other,!1),this._other.font===T$uL.EMPTY?this._other.font=new T$uL(T$L):this._other.font.setFont(T$L));}),T$W.__init__=function(){T$m.DEFAULT=new T$m();},T$W._tempPoint=new T$Q(),T$W._SUBMITVBSIZE=32e3,T$W._MAXSIZE=99999999,T$W._RECTVBSIZE=16,T$W.MAXCLIPRECT=new T$N(0,0,99999999,99999999),T$W._COUNT=0,T$W._tmpMatrix=new T$_(),T$W.SEGNUM=32,T$W._contextcount=0,T$v(T$W,["_fontTemp",function(){return this._fontTemp=new T$uL();},"_drawStyleTemp",function(){return this._drawStyleTemp=new T$n(null);}]),T$W.__init$=function(){T$m=function(){function T$L(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=T$uL.EMPTY;}T$E(T$L,"");var T$s=T$L.prototype;return T$s.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=T$uL.EMPTY;},T$s.make=function(){return this===T$L.DEFAULT?new T$L():this;},T$L.DEFAULT=null,T$L;}();},T$W;}(),T$fL=function(T$L){function T$x(T$L,T$s){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,T$x.__super.call(this),this.defines=new T$iL(),this.position=T$x._POSITION,this.mainID=T$L,this.subID=T$s,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=T$L|T$s,this._inClassCache=T$x._cache[this._cacheID],0<T$L&&!this._inClassCache&&(this._inClassCache=T$x._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear();}T$E(T$x,"laya.webgl.shader.d2.value.Value2D",T$Z);var T$s=T$x.prototype;return T$s.setValue=function(T$L){},T$s.refresh=function(){var T$L=this.size;return T$L[0]=T$eL.width,T$L[1]=T$eL.height,this.alpha=this.ALPHA*T$eL.worldAlpha,this.mmat=T$eL.worldMatrix4,this;},T$s._ShaderWithCompile=function(){return T$PL.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,T$ML.create);},T$s._withWorldShaderDefines=function(){var T$L=T$eL.worldShaderDefines,T$s=T$PL.sharders[this.mainID|this.defines._value|T$L.getValue()];if(!T$s){var T$m,T$x={};for(T$m in this.defines.toNameDic())T$x[T$m]="";for(T$m in T$L.toNameDic())T$x[T$m]="";T$s=T$PL.withCompile2D(0,this.mainID,T$x,this.mainID|this.defines._value|T$L.getValue(),T$ML.create);}var T$w=T$eL.worldFilters;if(!T$w)return T$s;for(var T$O,T$v=T$w.length,T$y=0;T$y<T$v;T$y++)(T$O=T$w[T$y])&&T$O.action.setValue(this);return T$s;},T$s.upload=function(){var T$L=T$eL;this.alpha=this.ALPHA*T$L.worldAlpha,T$eL.worldMatrix4!==T$eL.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),T$SL.shaderHighPrecision&&this.defines.add(1024);var T$s,T$m=T$L.worldShaderDefines?this._withWorldShaderDefines():T$PL.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=T$L.width,this.size[1]=T$L.height,this.mmat=T$L.worldMatrix4,T$gL.activeShader!==T$m?T$m._shaderValueWidth!==T$L.width||T$m._shaderValueHeight!==T$L.height?(T$m._shaderValueWidth=T$L.width,T$m._shaderValueHeight=T$L.height):T$s=T$m._params2dQuick2||T$m._make2dQuick2():T$m._shaderValueWidth!==T$L.width||T$m._shaderValueHeight!==T$L.height?(T$m._shaderValueWidth=T$L.width,T$m._shaderValueHeight=T$L.height):T$s=T$m._params2dQuick1||T$m._make2dQuick1(),T$m.upload(this,T$s);},T$s.setFilters=function(T$L){if(this.filters=T$L)for(var T$s,T$m=T$L.length,T$x=0;T$x<T$m;T$x++)(T$s=T$L[T$x])&&(this.defines.add(T$s.type),T$s.action.setValue(this));},T$s.clear=function(){this.defines.setValue(this.subID);},T$s.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear();},T$x._initone=function(T$L,T$s){T$x._typeClass[T$L]=T$s,T$x._cache[T$L]=[],T$x._cache[T$L]._length=0;},T$x.__init__=function(){T$x._POSITION=[2,5126,!1,4*T$TL.BYTES_PE,0],T$x._TEXCOORD=[2,5126,!1,4*T$TL.BYTES_PE,2*T$TL.BYTES_PE],T$x._initone(2,T$WL),T$x._initone(4,T$IL),T$x._initone(256,T$dL),T$x._initone(512,T$ZL),T$x._initone(1,T$XL),T$x._initone(65,T$BL),T$x._initone(9,T$XL);},T$x.create=function(T$L,T$s){var T$m=T$x._cache[T$L|T$s];return T$m._length?T$m[--T$m._length]:new T$x._typeClass[T$L|T$s](T$s);},T$x._POSITION=null,T$x._TEXCOORD=null,T$x._cache=[],T$x._typeClass=[],T$x.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T$x;}(),T$_L=function(T$L){function T$j(T$L,T$s){T$j.__super.call(this,T$L,T$s);}T$E(T$j,"laya.webgl.utils.RenderSprite3D",T$e);var T$s=T$j.prototype;return T$s.onCreate=function(T$L){switch(T$L){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform);}},T$s._mask=function(T$L,T$s,T$m,T$x){var T$w,T$O,T$v=this._next,T$y=T$L.mask;if(T$y){T$s.ctx.save();var T$F=T$s.ctx.globalCompositeOperation,T$o=new T$N();if(T$o.copyFrom(T$y.getBounds()),T$o.width=Math.round(T$o.width),T$o.height=Math.round(T$o.height),T$o.x=Math.round(T$o.x),T$o.y=Math.round(T$o.y),0<T$o.width&&0<T$o.height){var T$V=T$L._style._tf,T$C=T$yL.create();T$C.addValue("bounds",T$o),T$w=T$vL.create([T$C,T$s],laya.webgl.utils.RenderSprite3D.tmpTarget),T$s.addRenderObject(T$w),T$y.render(T$s,-T$o.x,-T$o.y),T$w=T$vL.create([T$C],laya.webgl.utils.RenderSprite3D.endTmpTarget),T$s.addRenderObject(T$w),T$s.ctx.save(),T$s.clipRect(T$m-T$V.translateX+T$o.x,T$x-T$V.translateY+T$o.y,T$o.width,T$o.height),T$v._fun.call(T$v,T$L,T$s,T$m,T$x),T$s.ctx.restore(),T$O=T$VL.create(6),T$F=T$s.ctx.globalCompositeOperation,T$O.blendMode="mask",T$s.addRenderObject(T$O),T$_.TEMP.identity();var T$E=T$fL.create(1,0),T$r=T$A.INV_UV,T$u=T$o.width,T$T=T$o.height;(T$o.width<32||T$o.height<32)&&((T$r=T$j.tempUV)[0]=0,T$r[1]=0,T$r[2]=32<=T$o.width?1:T$o.width/32,T$r[3]=0,T$r[4]=32<=T$o.width?1:T$o.width/32,T$r[5]=32<=T$o.height?1:T$o.height/32,T$r[6]=0,T$r[7]=32<=T$o.height?1:T$o.height/32,T$o.width=32<=T$o.width?T$o.width:32,T$o.height=32<=T$o.height?T$o.height:32,T$r[1]*=-1,T$r[3]*=-1,T$r[5]*=-1,T$r[7]*=-1,T$r[1]+=1,T$r[3]+=1,T$r[5]+=1,T$r[7]+=1),T$s.ctx.drawTarget(T$C,T$m+T$o.x-T$V.translateX,T$x+T$o.y-T$V.translateY,T$u,T$T,T$_.TEMP,"tmpTarget",T$E,T$r,6),T$w=T$vL.create([T$C],laya.webgl.utils.RenderSprite3D.recycleTarget),T$s.addRenderObject(T$w),(T$O=T$VL.create(6)).blendMode=T$F,T$s.addRenderObject(T$O);}T$s.ctx.restore();}else T$v._fun.call(T$v,T$L,T$s,T$m,T$x);},T$s._blend=function(T$L,T$s,T$m,T$x){var T$w=T$L._style,T$O=this._next;T$w.blendMode?(T$s.ctx.save(),T$s.ctx.globalCompositeOperation=T$w.blendMode,T$O._fun.call(T$O,T$L,T$s,T$m,T$x),T$s.ctx.restore()):T$O._fun.call(T$O,T$L,T$s,T$m,T$x);},T$s._transform=function(T$L,T$s,T$m,T$x){var T$w=T$L.transform,T$O=this._next;if(T$w&&T$O!=T$e.NORENDER){var T$v=T$s.ctx;T$L._style;T$w.tx=T$m,T$w.ty=T$x;var T$y=T$v._getTransformMatrix(),T$F=T$y.clone();T$_.mul(T$w,T$y,T$y),T$y._checkTransform(),T$w.tx=T$w.ty=0,T$O._fun.call(T$O,T$L,T$s,0,0),T$F.copyTo(T$y),T$F.destroy();}else T$O._fun.call(T$O,T$L,T$s,T$m,T$x);},T$j.tmpTarget=function(T$L,T$s){var T$m=T$L.getValue("bounds"),T$x=T$$L.create(T$m.width,T$m.height);T$x.start(),T$x.clear(0,0,0,0),T$L.addValue("tmpTarget",T$x);},T$j.endTmpTarget=function(T$L){T$L.getValue("tmpTarget").end();},T$j.recycleTarget=function(T$L){T$L.getValue("tmpTarget").recycle(),T$L.recycle();},T$v(T$j,["tempUV",function(){return this.tempUV=new Array(8);}]),T$j;}(),T$QL=function(T$L){function T$s(){this.data=null,T$s.__super.call(this);}T$E(T$s,"laya.filters.webgl.ColorFilterActionGL",T$p);var T$m=T$s.prototype;return T$Y.imps(T$m,{"laya.filters.IFilterActionGL":!0}),T$m.setValue=function(T$L){T$L.colorMat=this.data._mat,T$L.colorAlpha=this.data._alpha;},T$m.apply3d=function(T$L,T$s,T$m,T$x,T$w){var T$O=T$L.getValue("bounds"),T$v=T$fL.create(1,0);T$v.setFilters([this.data]);var T$y=T$_.TEMP;T$y.identity(),T$m.ctx.drawTarget(T$L,0,0,T$O.width,T$O.height,T$y,"src",T$v);},T$s;}(),T$NL=function(T$L){function T$O(T$L,T$s,T$m,T$x,T$w){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,T$O.__super.call(this,T$L,T$s,T$w),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new T$nL(),this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=T$m,this._atlasCanvas.height=T$x,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0;}T$E(T$O,"laya.webgl.atlas.Atlaser",T$W);var T$s=T$O.prototype;return T$s.computeUVinAtlasTexture=function(T$L,T$s,T$m,T$x){var T$w=T$d.atlasTextureWidth,T$O=T$d.atlasTextureHeight,T$v=T$m/T$w,T$y=T$x/T$O,T$F=(T$m+T$L.bitmap.width)/T$w,T$o=(T$x+T$L.bitmap.height)/T$O,T$V=T$L.bitmap.width/T$w,T$C=T$L.bitmap.height/T$O;T$L.uv=[T$v+T$s[0]*T$V,T$y+T$s[1]*T$C,T$F-(1-T$s[2])*T$V,T$y+T$s[3]*T$C,T$F-(1-T$s[4])*T$V,T$o-(1-T$s[5])*T$C,T$v+T$s[6]*T$V,T$o-(1-T$s[7])*T$C];},T$s.findBitmapIsExist=function(T$L){if(T$L instanceof laya.webgl.resource.WebGLImage){var T$s=T$L,T$m=T$s.url,T$x=this._InAtlasWebGLImagesKey[T$m||T$s.id];if(T$x)return T$x.offsetInfoID;}return-1;},T$s.addToAtlasTexture=function(T$L,T$s,T$m){if(T$L instanceof laya.webgl.resource.WebGLImage){var T$x=T$L,T$w=T$x.url;this._InAtlasWebGLImagesKey[T$w||T$x.id]={bitmap:T$L,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([T$s,T$m]);}this._atlasCanvas.texSubImage2D(T$s,T$m,T$L.atlasSource),T$L.clearAtlasSource();},T$s.addToAtlas=function(T$L,T$s,T$m){T$L._atlasID=this._inAtlasTextureKey.length;var T$x=T$L.uv.slice(),T$w=T$L.bitmap;this._inAtlasTextureKey.push(T$L),this._inAtlasTextureOriUVValue.push(T$x),this._inAtlasTextureBitmapValue.push(T$w),this.computeUVinAtlasTexture(T$L,T$x,T$s,T$m),T$L.bitmap=this._atlasCanvas;},T$s.clear=function(){for(var T$L=0,T$s=this._inAtlasTextureKey.length;T$L<T$s;T$L++)this._inAtlasTextureKey[T$L].bitmap=this._inAtlasTextureBitmapValue[T$L],this._inAtlasTextureKey[T$L].uv=this._inAtlasTextureOriUVValue[T$L],this._inAtlasTextureKey[T$L]._atlasID=-1,this._inAtlasTextureKey[T$L].bitmap.lock=!1,this._inAtlasTextureKey[T$L].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0;},T$s.dispose=function(){this.clear(),this._atlasCanvas.destroy();},T$x(0,T$s,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue;}),T$x(0,T$s,"texture",function(){return this._atlasCanvas;}),T$x(0,T$s,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey;}),T$O;}(),T$iL=function(T$L){function T$m(){T$m.__super.call(this,T$m.__name2int,T$m.__int2name,T$m.__int2nameMap);}return T$E(T$m,"laya.webgl.shader.d2.ShaderDefines2D",T$t),T$m.__init__=function(){T$m.reg("TEXTURE2D",1),T$m.reg("COLOR2D",2),T$m.reg("PRIMITIVE",4),T$m.reg("GLOW_FILTER",8),T$m.reg("BLUR_FILTER",16),T$m.reg("COLOR_FILTER",32),T$m.reg("COLOR_ADD",64),T$m.reg("WORLDMAT",128),T$m.reg("FILLTEXTURE",256),T$m.reg("FSHIGHPRECISION",1024),T$m.reg("TXTALPHA",2048),T$m.reg("TXTCOMPRESS",4096);},T$m.reg=function(T$L,T$s){T$t._reg(T$L,T$s,T$m.__name2int,T$m.__int2name);},T$m.toText=function(T$L,T$s,T$m){return T$t._toText(T$L,T$s,T$m);},T$m.toInt=function(T$L){return T$t._toInt(T$L,T$m.__name2int);},T$m.TEXTURE2D=1,T$m.COLOR2D=2,T$m.PRIMITIVE=4,T$m.FILTERGLOW=8,T$m.FILTERBLUR=16,T$m.FILTERCOLOR=32,T$m.COLORADD=64,T$m.WORLDMAT=128,T$m.FILLTEXTURE=256,T$m.SKINMESH=512,T$m.SHADERDEFINE_FSHIGHPRECISION=1024,T$m.TXTALPHA=2048,T$m.TXTCOMPRESS=4096,T$m.__name2int={},T$m.__int2name=[],T$m.__int2nameMap=[],T$m;}(),T$UL=(function(T$L){function T$y(T$L,T$s,T$m,T$x,T$w,T$O,T$v){T$y.__super.call(this,T$L,T$s,T$m,T$x,40,T$w,T$O,T$v);}T$E(T$y,"laya.webgl.shapes.Ellipse",T$mL);}(),function(T$L){function T$O(T$L,T$s,T$m,T$x,T$w){this._points=[],this.rebuild(T$m),T$O.__super.call(this,T$L,T$s,0,0,0,T$w,T$x,T$w,0);}T$E(T$O,"laya.webgl.shapes.Line",T$mL);var T$s=T$O.prototype;return T$s.rebuild=function(T$L){var T$s=T$L.length;T$s!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(T$s/2-1)),this.mFloat32Array=new Float32Array(5*T$s)),this._points.length=0;for(var T$m=NaN,T$x=NaN,T$w=-1,T$O=-1,T$v=T$L.length/2,T$y=0;T$y<T$v;T$y++)T$m=T$L[2*T$y],T$x=T$L[2*T$y+1],(.01<Math.abs(T$w-T$m)||.01<Math.abs(T$O-T$x))&&this._points.push(T$m,T$x),T$w=T$m,T$O=T$x;},T$s.getData=function(T$L,T$s,T$m){var T$x=[],T$w=[];0<this.borderWidth&&this.createLine2(this._points,T$x,this.borderWidth,T$m,T$w,this._points.length/2),this.mUint16Array.set(T$x,0),this.mFloat32Array.set(T$w,0),T$L.append(this.mUint16Array),T$s.append(this.mFloat32Array);},T$O;}()),T$cL=function(T$L){function T$C(T$L,T$s,T$m,T$x,T$w){this._points=[];for(var T$O=NaN,T$v=NaN,T$y=-1,T$F=-1,T$o=T$m.length/2-1,T$V=0;T$V<T$o;T$V++)T$O=T$m[2*T$V],T$v=T$m[2*T$V+1],(.01<Math.abs(T$y-T$O)||.01<Math.abs(T$F-T$v))&&this._points.push(T$O,T$v),T$y=T$O,T$F=T$v;T$O=T$m[2*T$o],T$v=T$m[2*T$o+1],T$y=this._points[0],T$F=this._points[1],(.01<Math.abs(T$y-T$O)||.01<Math.abs(T$F-T$v))&&this._points.push(T$O,T$v),T$C.__super.call(this,T$L,T$s,0,0,this._points.length/2,0,T$x,T$w);}T$E(T$C,"laya.webgl.shapes.LoopLine",T$mL);var T$s=T$C.prototype;return T$s.getData=function(T$L,T$s,T$m){if(0<this.borderWidth){for(var T$x=this.color,T$w=(T$x>>16&255)/255,T$O=(T$x>>8&255)/255,T$v=(255&T$x)/255,T$y=[],T$F=0,T$o=0,T$V=[],T$C=Math.floor(this._points.length/2),T$E=0;T$E<T$C;T$E++)T$F=this._points[2*T$E],T$o=this._points[2*T$E+1],T$y.push(this.x+T$F,this.y+T$o,T$w,T$O,T$v);this.createLoopLine(T$y,T$V,this.borderWidth,T$m+T$y.length/5),T$L.append(new Uint16Array(T$V)),T$s.append(new Float32Array(T$y));}},T$s.createLoopLine=function(T$L,T$s,T$m,T$x,T$w,T$O){T$L.length;var T$v=T$L.concat(),T$y=T$w||T$L,T$F=this.borderColor,T$o=(T$F>>16&255)/255,T$V=(T$F>>8&255)/255,T$C=(255&T$F)/255,T$E=[T$v[0],T$v[1]],T$r=[T$v[T$v.length-5],T$v[T$v.length-4]],T$u=T$r[0]+.5*(T$E[0]-T$r[0]),T$T=T$r[1]+.5*(T$E[1]-T$r[1]);T$v.unshift(T$u,T$T,0,0,0),T$v.push(T$u,T$T,0,0,0);var T$j,T$D,T$e,T$b,T$S,T$H,T$Y,T$a,T$f,T$_,T$Q,T$N,T$i,T$U,T$c,T$h,T$G,T$R,T$A,T$g,T$$=T$v.length/5,T$p=T$x,T$Z=T$m/2;T$e=T$v[0],T$b=T$v[1],T$_=T$e-(T$S=T$v[5]),T$f=(T$f=-(T$b-(T$H=T$v[6])))/(T$g=Math.sqrt(T$f*T$f+T$_*T$_))*T$Z,T$_=T$_/T$g*T$Z,T$y.push(T$e-T$f,T$b-T$_,T$o,T$V,T$C,T$e+T$f,T$b+T$_,T$o,T$V,T$C);for(var T$W=1;T$W<T$$-1;T$W++)T$e=T$v[5*(T$W-1)],T$b=T$v[5*(T$W-1)+1],T$S=T$v[5*T$W],T$H=T$v[5*T$W+1],T$Y=T$v[5*(T$W+1)],T$a=T$v[5*(T$W+1)+1],T$_=T$e-T$S,T$N=T$S-T$Y,T$c=(-(T$f=(T$f=-(T$b-T$H))/(T$g=Math.sqrt(T$f*T$f+T$_*T$_))*T$Z)+T$e)*(-(T$_=T$_/T$g*T$Z)+T$H)-(-T$f+T$S)*(-T$_+T$b),T$R=(-(T$Q=(T$Q=-(T$H-T$a))/(T$g=Math.sqrt(T$Q*T$Q+T$N*T$N))*T$Z)+T$Y)*(-(T$N=T$N/T$g*T$Z)+T$H)-(-T$Q+T$S)*(-T$N+T$a),T$A=(T$i=-T$_+T$b-(-T$_+T$H))*(T$G=-T$Q+T$S-(-T$Q+T$Y))-(T$h=-T$N+T$a-(-T$N+T$H))*(T$U=-T$f+T$S-(-T$f+T$e)),Math.abs(T$A)<.1?(T$A+=10.1,T$y.push(T$S-T$f,T$H-T$_,T$o,T$V,T$C,T$S+T$f,T$H+T$_,T$o,T$V,T$C)):(((T$j=(T$U*T$R-T$G*T$c)/T$A)-T$S)*(T$j-T$S)+((T$D=(T$h*T$c-T$i*T$R)/T$A)-T$H)+(T$D-T$H),T$y.push(T$j,T$D,T$o,T$V,T$C,T$S-(T$j-T$S),T$H-(T$D-T$H),T$o,T$V,T$C));T$O&&(T$s=T$O);var T$d=this.edges+1;for(T$W=1;T$W<T$d;T$W++)T$s.push(T$p+2*(T$W-1),T$p+2*(T$W-1)+1,T$p+2*T$W+1,T$p+2*T$W+1,T$p+2*T$W,T$p+2*(T$W-1));return T$s.push(T$p+2*(T$W-1),T$p+2*(T$W-1)+1,T$p+1,T$p+1,T$p,T$p+2*(T$W-1)),T$y;},T$C;}(),T$hL=function(T$L){function T$v(T$L,T$s,T$m,T$x,T$w,T$O){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=T$_.create(),this._points=T$m.slice(0,T$m.length),T$v.__super.call(this,T$L,T$s,0,0,this._points.length/2,T$x,T$w,T$O);}T$E(T$v,"laya.webgl.shapes.Polygon",T$mL);var T$s=T$v.prototype;return T$s.rebuild=function(T$L){this._repaint||(this._points.length=0,this._points=this._points.concat(T$L));},T$s.setMatrix=function(T$L){T$L.copyTo(this._mat);},T$s.needUpdate=function(T$L){return this._repaint=this._mat.a==T$L.a&&this._mat.b==T$L.b&&this._mat.c==T$L.c&&this._mat.d==T$L.d&&this._mat.tx==T$L.tx&&this._mat.ty==T$L.ty,!this._repaint;},T$s.getData=function(T$L,T$s,T$m){var T$x,T$w=0,T$O=this._points,T$v=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=T$m){for(this._start=T$m,T$x=[],T$v=this.earcutTriangles.length,T$w=0;T$w<T$v;T$w++)T$x.push(this.earcutTriangles[T$w]+T$m);this.mUint16Array=new Uint16Array(T$x);}}else{this._start=T$m,T$x=[];var T$y=[],T$F=[],T$o=this.color,T$V=(T$o>>16&255)/255,T$C=(T$o>>8&255)/255,T$E=(255&T$o)/255;for(T$v=Math.floor(T$O.length/2),T$w=0;T$w<T$v;T$w++)T$y.push(this.x+T$O[2*T$w],this.y+T$O[2*T$w+1],T$V,T$C,T$E),T$F.push(this.x+T$O[2*T$w],this.y+T$O[2*T$w+1]);for(this.earcutTriangles=T$xL.earcut(T$F,null,2),T$v=this.earcutTriangles.length,T$w=0;T$w<T$v;T$w++)T$x.push(this.earcutTriangles[T$w]+T$m);this.mUint16Array=new Uint16Array(T$x),this.mFloat32Array=new Float32Array(T$y);}T$L.append(this.mUint16Array),T$s.append(this.mFloat32Array);},T$v;}(),T$GL=function(T$L){function T$O(){this._matrix=new T$_(),this._matrix4=T$TL.defaultMatrix4.concat(),T$O.__super.call(this,1e4),this.shaderValue=new T$fL(0,0);}T$E(T$O,"laya.webgl.submit.SubmitCanvas",T$OL);var T$s=T$O.prototype;return T$s.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var T$L=T$eL.worldAlpha,T$s=T$eL.worldMatrix4,T$m=T$eL.worldMatrix,T$x=T$eL.worldFilters,T$w=T$eL.worldShaderDefines,T$O=this.shaderValue,T$v=this._matrix,T$y=this._matrix4,T$F=T$_.TEMP;return T$_.mul(T$v,T$m,T$F),T$y[0]=T$F.a,T$y[1]=T$F.b,T$y[4]=T$F.c,T$y[5]=T$F.d,T$y[12]=T$F.tx,T$y[13]=T$F.ty,T$eL.worldMatrix=T$F.clone(),T$eL.worldMatrix4=T$y,T$eL.worldAlpha=T$eL.worldAlpha*T$O.alpha,T$O.filters&&T$O.filters.length&&(T$eL.worldFilters=T$O.filters,T$eL.worldShaderDefines=T$O.defines),this._ctx_src.flush(),T$eL.worldAlpha=T$L,T$eL.worldMatrix4=T$s,T$eL.worldMatrix.destroy(),T$eL.worldMatrix=T$m,T$eL.worldFilters=T$x,T$eL.worldShaderDefines=T$w,1;},T$s.releaseRender=function(){var T$L=T$O._cache;this._ctx_src=null,T$L[T$L._length++]=this;},T$s.getRenderType=function(){return 10003;},T$O.create=function(T$L,T$s,T$m){var T$x=T$O._cache._length?T$O._cache[--T$O._cache._length]:new T$O();T$x._ctx_src=T$L;var T$w=T$x.shaderValue;return T$w.alpha=T$s,T$w.defines.setValue(0),T$m&&T$m.length&&T$w.setFilters(T$m),T$x;},T$O._cache=((T$O._cache=[])._length=0,T$O._cache),T$O;}(),T$RL=function(T$L){function T$o(T$L){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array(),this._texsID=new Array(),this._vbPos=new Array(),void 0===T$L&&(T$L=1e4),T$o.__super.call(this,T$L);}T$E(T$o,"laya.webgl.submit.SubmitTexture",T$OL);var T$s=T$o.prototype;return T$s.releaseRender=function(){var T$L=T$o._cache;(T$L[T$L._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0;},T$s.addTexture=function(T$L,T$s){this._texsID[this._texs.length]=T$L._uvID,this._texs.push(T$L),this._vbPos.push(T$s);},T$s.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var T$L=this.shaderValue.textureHost.bitmap;if(null!==T$L)for(var T$s=this._vb.getFloat32Array(),T$m=0,T$x=this._texs.length;T$m<T$x;T$m++){var T$w=this._texs[T$m];T$w.active();var T$O=T$w.uv;if(this._texsID[T$m]!==T$w._uvID){this._texsID[T$m]=T$w._uvID;var T$v=this._vbPos[T$m];T$s[T$v+2]=T$O[0],T$s[T$v+3]=T$O[1],T$s[T$v+6]=T$O[2],T$s[T$v+7]=T$O[3],T$s[T$v+10]=T$O[4],T$s[T$v+11]=T$O[5],T$s[T$v+14]=T$O[6],T$s[T$v+15]=T$O[7],this._vb.setNeedUpload();}T$w.bitmap!==T$L&&(this._isSameTexture=!1);}}},T$s.renderSubmit=function(){if(0===this._numEle)return T$o._shaderSet=!1,1;var T$L=this.shaderValue.textureHost;if(T$L){var T$s=T$L.source;if(!T$L.bitmap||!T$s)return T$o._shaderSet=!1,1;this.shaderValue.texture=T$s,T$L.alphaTexture&&T$L.alphaTexture.source&&(this.shaderValue.texture1=T$L.alphaTexture.source);}this._vb.bind_upload(this._ib);var T$m=T$SL.mainContext;if(T$I.activeBlendFunction!==this._blendFn&&(T$m.enable(3042),this._blendFn(T$m),T$I.activeBlendFunction=this._blendFn),T$c.drawCall++,T$c.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&T$gL.activeShader&&T$o._shaderSet?(T$gL.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&T$gL.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),T$o._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var T$x=T$L.bitmap,T$w=0,T$O=T$gL.activeShader,T$v=0,T$y=this._texs.length;T$v<T$y;T$v++){var T$F=this._texs[T$v];T$F.bitmap===T$x&&T$v+1!==T$y||(T$O.uploadTexture2D(T$F.source),T$m.drawElements(4,6*(T$v-T$w+1),5123,this._startIdx+6*T$w*T$TL.BYTES_PIDX),T$x=T$F.bitmap,T$w=T$v);}else T$m.drawElements(4,this._numEle,5123,this._startIdx);return 1;},T$o.create=function(T$L,T$s,T$m,T$x,T$w){var T$O=T$o._cache._length?T$o._cache[--T$o._cache._length]:new T$o();null==T$m&&((T$m=T$O._selfVb||(T$O._selfVb=T$tL.create(-1))).clear(),T$x=0),T$O._ib=T$s,T$O._vb=T$m,T$O._startIdx=T$x*T$TL.BYTES_PIDX,T$O._numEle=0;var T$v=T$L._nBlendType;T$O._blendFn=T$L._targets?T$I.targetFns[T$v]:T$I.fns[T$v],T$O.shaderValue=T$w,T$O.shaderValue.setValue(T$L._shader2D);var T$y=T$L._shader2D.filters;return T$y&&T$O.shaderValue.setFilters(T$y),T$O;},T$o._cache=((T$o._cache=[])._length=0,T$o._cache),T$o._shaderSet=!0,T$o;}(),T$AL=function(T$L){function T$D(){T$D.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo);}T$E(T$D,"laya.webgl.utils.MeshTexture",T$DL);var T$s=T$D.prototype;return T$s.addData=function(T$L,T$s,T$m,T$x,T$w,T$O){for(var T$v=T$L.length/2,T$y=this._vb.needSize(T$v*T$D.const_stride)>>2,T$F=this._vb.getFloat32Array(),T$o=0,T$V=0;T$V<T$v;T$V++){var T$C=T$L[T$o],T$E=T$L[T$o+1],T$r=T$C*T$x.a+T$E*T$x.c+T$x.tx,T$u=T$C*T$x.b+T$E*T$x.d+T$x.ty;T$F[T$y++]=T$r,T$F[T$y++]=T$u,T$F[T$y++]=T$s[T$o],T$F[T$y++]=T$s[T$o+1],T$o+=2;}this._vb.setNeedUpload();var T$T=this.vertNum;if(0<T$T){(T$v=T$m.length)>T$D.tmpIdx.length&&(T$D.tmpIdx=new Uint16Array(T$v));for(var T$j=0;T$j<T$v;T$j++)T$D.tmpIdx[T$j]=T$m[T$j]+T$T;this._ib.appendU16Array(T$D.tmpIdx,T$m.length);}else this._ib.append(T$m);this._ib.setNeedUpload(),this.vertNum+=T$v,this.indexNum+=T$m.length;},T$s.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this);},T$s.destroy=function(){this._ib.destroy(),this._vb.destroy();},T$D.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new T$D();},T$D.const_stride=16,T$D._POOL=[],T$v(T$D,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8];},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4);}]),T$D;}(),T$gL=function(T$L){function T$s(){T$s.__super.call(this),this.lock=!0;}return T$E(T$s,"laya.webgl.shader.BaseShader",T$b),T$s.activeShader=null,T$s.bindShader=null,T$s;}(),T$$L=function(T$s){function T$V(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===T$m&&(T$m=6408),void 0===T$x&&(T$x=5121),void 0===T$w&&(T$w=34041),void 0===T$O&&(T$O=!1),void 0===T$v&&(T$v=!1),void 0===T$y&&(T$y=-1),void 0===T$F&&(T$F=-1),this._type=1,this._w=T$L,this._h=T$s,this._surfaceFormat=T$m,this._surfaceType=T$x,this._depthStencilFormat=T$w,T$D.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=T$O,this._repeat=T$v,this._minFifter=T$y,this._magFifter=T$F,this._createWebGLRenderTarget(),this.bitmap.lock=!0,T$V.__super.call(this,this.bitmap,T$A.INV_UV);}T$E(T$V,"laya.webgl.resource.RenderTarget2D",T$s);var T$L=T$V.prototype;return T$Y.imps(T$L,{"laya.resource.IDispose":!0}),T$L.getType=function(){return this._type;},T$L.getTexture=function(){return this;},T$L.size=function(T$L,T$s){this._w==T$L&&this._h==T$s||(this._w=T$L,this._h=T$s,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget());},T$L.release=function(){this.destroy();},T$L.recycle=function(){T$V.POOL.push(this);},T$L.start=function(){var T$L=T$SL.mainContext;return this._preRenderTarget=T$eL.curRenderTarget,T$eL.curRenderTarget=this,T$L.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(T$L.viewport(0,0,this._w,this._h),this._svWidth=T$eL.width,this._svHeight=T$eL.height,T$eL.width=this._w,T$eL.height=this._h,T$gL.activeShader=null),this;},T$L.clear=function(T$L,T$s,T$m,T$x){void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0),void 0===T$x&&(T$x=1);var T$w=T$SL.mainContext;T$w.clearColor(T$L,T$s,T$m,T$x);var T$O=16384;switch(this._depthStencilFormat){case 33189:T$O|=256;break;case 36168:T$O|=1024;break;case 34041:T$O|=256,T$O|=1024;}T$w.clear(T$O);},T$L.end=function(){var T$L=T$SL.mainContext;T$L.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,T$eL.curRenderTarget=this._preRenderTarget,1==this._type?(T$L.viewport(0,0,this._svWidth,this._svHeight),T$eL.width=this._svWidth,T$eL.height=this._svHeight,T$gL.activeShader=null):T$L.viewport(0,0,T$Y.stage.width,T$Y.stage.height);},T$L.getData=function(T$L,T$s,T$m,T$x){var T$w=T$SL.mainContext;if(T$w.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===T$w.checkFramebufferStatus(36160)))return T$w.bindFramebuffer(36160,null),null;var T$O=new Uint8Array(this._w*this._h*4);return T$w.readPixels(T$L,T$s,T$m,T$x,this._surfaceFormat,this._surfaceType,T$O),T$w.bindFramebuffer(36160,null),T$O;},T$L.destroy=function(T$L){void 0===T$L&&(T$L=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,T$s.prototype.destroy.call(this));},T$L.dispose=function(){},T$L._createWebGLRenderTarget=function(){this.bitmap=new T$qL(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(T$L){this.event("recovered");});},T$x(0,T$L,"surfaceFormat",function(){return this._surfaceFormat;}),T$x(0,T$L,"magFifter",function(){return this._magFifter;}),T$x(0,T$L,"surfaceType",function(){return this._surfaceType;}),T$x(0,T$L,"mipMap",function(){return this._mipMap;}),T$x(0,T$L,"depthStencilFormat",function(){return this._depthStencilFormat;}),T$x(0,T$L,"minFifter",function(){return this._minFifter;}),T$x(0,T$L,"source",function(){return this._alreadyResolved?T$Y.superGet(T$A,this,"source"):null;}),T$V.create=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F){void 0===T$m&&(T$m=6408),void 0===T$x&&(T$x=5121),void 0===T$w&&(T$w=34041),void 0===T$O&&(T$O=!1),void 0===T$v&&(T$v=!1),void 0===T$y&&(T$y=-1),void 0===T$F&&(T$F=-1);var T$o=T$V.POOL.pop();return T$o||(T$o=new T$V(T$L,T$s)),T$o.bitmap&&T$o._w==T$L&&T$o._h==T$s&&T$o._surfaceFormat==T$m&&T$o._surfaceType==T$x&&T$o._depthStencilFormat==T$w&&T$o._mipMap==T$O&&T$o._repeat==T$v&&T$o._minFifter==T$y&&T$o._magFifter==T$F||(T$o._w=T$L,T$o._h=T$s,T$o._surfaceFormat=T$m,T$o._surfaceType=T$x,T$o._depthStencilFormat=T$w,T$D.isConchWebGL&&34041===T$o._depthStencilFormat&&(T$o._depthStencilFormat=33189),T$o._mipMap=T$O,T$o._repeat=T$v,T$o._minFifter=T$y,T$o._magFifter=T$F,T$o.release(),T$o._createWebGLRenderTarget()),T$o;},T$V.TYPE2D=1,T$V.TYPE3D=2,T$V.POOL=[],T$V;}(T$A),T$pL=function(T$L){function T$s(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,T$s.__super.call(this),T$s._gl=T$SL.mainContext;}T$E(T$s,"laya.webgl.utils.Buffer",T$b);var T$m=T$s.prototype;return T$m._bind=function(){this.activeResource(),T$s._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(T$s._bindVertexBuffer=this._glBuffer),T$s._gl.bindBuffer(this._bufferType,T$s._bindActive[this._bufferType]=this._glBuffer),T$gL.activeShader=null);},T$m.recreateResource=function(){this._glBuffer||(this._glBuffer=T$s._gl.createBuffer()),this.completeCreate();},T$m.disposeResource=function(){this._glBuffer&&(T$SL.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0;},T$x(0,T$m,"bufferUsage",function(){return this._bufferUsage;}),T$s._gl=null,T$s._bindActive={},T$s._bindVertexBuffer=null,T$s._enableAtributes=[],T$s;}(),T$ZL=function(T$L){function T$m(T$L){this.texcoord=null,this.offsetX=300,this.offsetY=0,T$m.__super.call(this,512,0);var T$s=8*T$TL.BYTES_PE;this.position=[2,5126,!1,T$s,0],this.texcoord=[2,5126,!1,T$s,2*T$TL.BYTES_PE],this.color=[4,5126,!1,T$s,4*T$TL.BYTES_PE];}return T$E(T$m,"laya.webgl.shader.d2.skinAnishader.SkinSV",T$fL),T$m;}(),T$WL=function(T$L){function T$s(T$L){T$s.__super.call(this,2,0),this.color=[];}return T$E(T$s,"laya.webgl.shader.d2.value.Color2dSV",T$fL),T$s.prototype.setValue=function(T$L){T$L.fillStyle&&(this.color=T$L.fillStyle._color._color),T$L.strokeStyle&&(this.color=T$L.strokeStyle._color._color);},T$s;}(),T$dL=function(T$L){function T$s(T$L){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=T$fL._TEXCOORD,T$s.__super.call(this,256,0);}T$E(T$s,"laya.webgl.shader.d2.value.FillTextureSV",T$fL);var T$m=T$s.prototype;return T$m.setValue=function(T$L){this.ALPHA=T$L.ALPHA,T$L.filters&&this.setFilters(T$L.filters);},T$m.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0);},T$s;}(),T$XL=function(T$L){function T$s(T$L){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=T$fL._TEXCOORD,void 0===T$L&&(T$L=0),T$s.__super.call(this,1,T$L);}T$E(T$s,"laya.webgl.shader.d2.value.TextureSV",T$fL);var T$m=T$s.prototype;return T$m.setValue=function(T$L){this.ALPHA=T$L.ALPHA,T$L.filters&&this.setFilters(T$L.filters);},T$m.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0);},T$s;}(),T$IL=function(T$L){function T$s(T$L){this.a_color=null,this.u_pos=[0,0],T$s.__super.call(this,4,0),this.position=[2,5126,!1,5*T$TL.BYTES_PE,0],this.a_color=[3,5126,!1,5*T$TL.BYTES_PE,2*T$TL.BYTES_PE];}return T$E(T$s,"laya.webgl.shader.d2.value.PrimitiveSV",T$fL),T$s;}(),T$nL=function(T$L){function T$s(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,T$s.__super.call(this);}T$E(T$s,"laya.webgl.atlas.AtlasWebGLCanvas",T$L);var T$m=T$s.prototype;return T$m.recreateResource=function(){var T$L=T$SL.mainContext,T$s=this._source=T$L.createTexture(),T$m=T$HL.curBindTexTarget,T$x=T$HL.curBindTexValue;T$HL.bindTexture(T$L,3553,T$s),T$L.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),T$L.texParameteri(3553,10241,9729),T$L.texParameteri(3553,10240,9729),T$L.texParameteri(3553,10242,33071),T$L.texParameteri(3553,10243,33071),T$m&&T$x&&T$HL.bindTexture(T$L,T$m,T$x),this.memorySize=this._w*this._h*4,this.completeCreate();},T$m.disposeResource=function(){this._source&&(T$SL.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0);},T$m.texSubImage2D=function(T$L,T$s,T$m){if(T$D.isFlash){this._flashCacheImage||(this._flashCacheImage=T$T.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var T$x=T$m.bitmapdata;this._flashCacheImage._image.copyPixels(T$x,0,0,T$x.width,T$x.height,T$L,T$s),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0);}else{var T$w=T$SL.mainContext,T$O=T$HL.curBindTexTarget,T$v=T$HL.curBindTexValue;T$HL.bindTexture(T$w,3553,this._source),T$w.pixelStorei(37441,!0),0<=T$L-1&&T$w.texSubImage2D(3553,0,T$L-1,T$s,6408,5121,T$m),T$L+1<=this._w&&T$w.texSubImage2D(3553,0,T$L+1,T$s,6408,5121,T$m),0<=T$s-1&&T$w.texSubImage2D(3553,0,T$L,T$s-1,6408,5121,T$m),T$s+1<=this._h&&T$w.texSubImage2D(3553,0,T$L,T$s+1,6408,5121,T$m),T$w.texSubImage2D(3553,0,T$L,T$s,6408,5121,T$m),T$w.pixelStorei(37441,!1),T$O&&T$v&&T$HL.bindTexture(T$w,T$O,T$v);}},T$m.texSubImage2DPixel=function(T$L,T$s,T$m,T$x,T$w){var T$O=T$SL.mainContext,T$v=T$HL.curBindTexTarget,T$y=T$HL.curBindTexValue;T$HL.bindTexture(T$O,3553,this._source);var T$F=new Uint8Array(T$w.data);T$O.pixelStorei(37441,!0),T$O.texSubImage2D(3553,0,T$L,T$s,T$m,T$x,6408,5121,T$F),T$O.pixelStorei(37441,!1),T$v&&T$y&&T$HL.bindTexture(T$O,T$v,T$y);},T$x(0,T$m,"width",T$L.prototype._$get_width,function(T$L){this._w=T$L;}),T$x(0,T$m,"height",T$L.prototype._$get_height,function(T$L){this._h=T$L;}),T$s;}(T$m),T$JL=function(T$L){function T$w(){this.flipY=!0,this.alwaysChange=!1,T$w.__super.call(this);}T$E(T$w,"laya.webgl.resource.WebGLCanvas",T$m);var T$s=T$w.prototype;return T$s.getCanvas=function(){return this._canvas;},T$s.clear=function(){this._ctx&&this._ctx.clear();},T$s.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this);},T$s._setContext=function(T$L){this._ctx=T$L;},T$s.getContext=function(T$L,T$s){return this._ctx?this._ctx:this._ctx=T$w._createContext(this);},T$s.size=function(T$L,T$s){this._w==T$L&&this._h==T$s||(this._w=T$L,this._h=T$s,this._ctx&&this._ctx.size(T$L,T$s),this._canvas&&(this._canvas.height=T$s,this._canvas.width=T$L));},T$s.activeResource=function(T$L){void 0===T$L&&(T$L=!1),this._source||this.recreateResource();},T$s.recreateResource=function(){this.createWebGlTexture(),this.completeCreate();},T$s.disposeResource=function(){this._source&&!this.iscpuSource&&(T$SL.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0);},T$s.createWebGlTexture=function(){var T$L=T$SL.mainContext;this._canvas;var T$s=this._source=T$L.createTexture();this.iscpuSource=!1;var T$m=T$HL.curBindTexTarget,T$x=T$HL.curBindTexValue;T$HL.bindTexture(T$L,3553,T$s),T$L.pixelStorei(37440,this.flipY?1:0),T$w.premulAlpha&&T$L.pixelStorei(37441,!0),T$L.texImage2D(3553,0,6408,6408,5121,this._imgData),T$w.premulAlpha&&T$L.pixelStorei(37441,!1),T$L.texParameteri(3553,10240,9729),T$L.texParameteri(3553,10241,9729),T$L.texParameteri(3553,10242,33071),T$L.texParameteri(3553,10243,33071),T$L.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,T$m&&T$x&&T$HL.bindTexture(T$L,T$m,T$x);},T$s.reloadCanvasData=function(){var T$L=T$SL.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var T$s=T$HL.curBindTexTarget,T$m=T$HL.curBindTexValue;T$HL.bindTexture(T$L,3553,this._source),T$w.premulAlpha&&T$L.pixelStorei(37441,!0),T$L.texImage2D(3553,0,6408,6408,5121,this._imgData),T$w.premulAlpha&&T$L.pixelStorei(37441,!1),T$L.pixelStorei(37440,0),T$s&&T$m&&T$HL.bindTexture(T$L,T$s,T$m);},T$s.texSubImage2D=function(T$L,T$s,T$m){var T$x=T$SL.mainContext,T$w=T$HL.curBindTexTarget,T$O=T$HL.curBindTexValue;T$HL.bindTexture(T$x,3553,this._source),T$x.pixelStorei(37441,!0),T$x.texSubImage2D(3553,0,T$s,T$m,6408,5121,T$L._source),T$x.pixelStorei(37441,!1),T$w&&T$O&&T$HL.bindTexture(T$x,T$w,T$O);},T$s.toBase64=function(T$L,T$s,T$m){var T$x=null;this._canvas&&(T$x=this._canvas.toDataURL(T$L,T$s)),T$m.call(this,T$x);},T$x(0,T$s,"context",function(){return this._ctx;}),T$x(0,T$s,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source;}),T$x(0,T$s,"asBitmap",null,function(T$L){this._ctx&&(this._ctx.asBitmap=T$L);}),T$w._createContext=null,T$w.premulAlpha=!1,T$w;}(),T$lL=function(T$L){function T$O(T$L,T$s){this.CborderSize=12,T$O.__super.call(this),this.char=T$L,this.isSpace=" "===T$L,this.xs=T$s.scaleX,this.ys=T$s.scaleY,this.font=T$s.font.toString(),this.fontSize=T$s.font.size,this.fillColor=T$s.fillColor,this.borderColor=T$s.borderColor,this.lineWidth=T$s.lineWidth,this.underLine=T$s.underLine;var T$m,T$x=T$D.isConchApp;T$x?((T$m=ConchTextCanvas)._source=ConchTextCanvas,T$m._source.canvas=ConchTextCanvas):T$m=T$r.canvas.source,this.canvas=T$m,this._enableMerageInAtlas=!0,this._ctx=T$x?T$m:this.canvas.getContext("2d",void 0);var T$w=T$g.measureText(this.char,this.font);this.cw=T$w.width*this.xs,this.ch=(T$w.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new T$A(this);}T$E(T$O,"laya.webgl.resource.WebGLCharImage",T$m);var T$s=T$O.prototype;return T$Y.imps(T$s,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),T$s.active=function(){this.texture.active();},T$s.recreateResource=function(){var T$L=T$D.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),T$L){var T$s=this.fontSize;1==this.xs&&1==this.ys||(T$s=parseInt(T$s*(this.xs>this.ys?this.xs:this.ys)+""));var T$m="normal 100 "+this.font;T$m=T$m.replace(T$O._fontSizeReg,T$s),this.borderColor&&(T$m+=" 1 "+this.borderColor),this._ctx.font=T$m,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null);}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,T$R.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var T$x=this._ctx.measureText(this.char);T$x||(T$x={width:16});var T$w=T$x.width+1;this._ctx.lineTo(T$w,this.fontSize+1),this._ctx.stroke();}this._ctx.restore();}this.borderSize=this.CborderSize,this.completeCreate();},T$s.onresize=function(T$L,T$s){this._w=T$L,this._h=T$s,this._allowMerageInAtlas=!0;},T$s.clearAtlasSource=function(){},T$x(0,T$s,"allowMerageInAtlas",function(){return this._allowMerageInAtlas;}),T$x(0,T$s,"atlasSource",function(){return this.canvas;}),T$x(0,T$s,"enableMerageInAtlas",function(){return this._enableMerageInAtlas;},function(T$L){this._enableMerageInAtlas=T$L;}),T$O.createOneChar=function(T$L,T$s){return new T$O(T$L,T$s);},T$O._fontSizeReg=new RegExp("\\d+(?=px)","g"),T$O;}(),T$qL=function(T$L){function T$o(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F){void 0===T$m&&(T$m=6408),void 0===T$x&&(T$x=5121),void 0===T$w&&(T$w=34041),void 0===T$O&&(T$O=!1),void 0===T$v&&(T$v=!1),void 0===T$y&&(T$y=-1),void 0===T$F&&(T$F=1),T$o.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=T$L,this._h=T$s,this._surfaceFormat=T$m,this._surfaceType=T$x,this._depthStencilFormat=T$w,this._mipMap=T$O,this._repeat=T$v,this._minFifter=T$y,this._magFifter=T$F;}T$E(T$o,"laya.webgl.resource.WebGLRenderTarget",T$m);var T$s=T$o.prototype;return T$s.recreateResource=function(){var T$L=T$SL.mainContext;this._frameBuffer||(this._frameBuffer=T$L.createFramebuffer()),this._source||(this._source=T$L.createTexture());var T$s=T$HL.curBindTexTarget,T$m=T$HL.curBindTexValue;T$HL.bindTexture(T$L,3553,this._source),T$L.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var T$x=this._minFifter,T$w=this._magFifter,T$O=this._repeat?10497:33071,T$v=T$V.isPOT(this._w,this._h);if(T$v?(this._mipMap?-1!==T$x||(T$x=9987):-1!==T$x||(T$x=9729),-1!==T$w||(T$w=9729),T$L.texParameteri(3553,10241,T$x),T$L.texParameteri(3553,10240,T$w),T$L.texParameteri(3553,10242,T$O),T$L.texParameteri(3553,10243,T$O),this._mipMap&&T$L.generateMipmap(3553)):(-1!==T$x||(T$x=9729),-1!==T$w||(T$w=9729),T$L.texParameteri(3553,10241,T$x),T$L.texParameteri(3553,10240,T$w),T$L.texParameteri(3553,10242,33071),T$L.texParameteri(3553,10243,33071)),T$L.bindFramebuffer(36160,this._frameBuffer),T$L.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=T$L.createRenderbuffer()),T$L.bindRenderbuffer(36161,this._depthStencilBuffer),T$L.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:T$L.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:T$L.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:T$L.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer);}T$L.bindFramebuffer(36160,null),T$s&&T$m&&T$HL.bindTexture(T$L,T$s,T$m),T$L.bindRenderbuffer(36161,null),T$v&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate();},T$s.disposeResource=function(){this._frameBuffer&&(T$SL.mainContext.deleteTexture(this._source),T$SL.mainContext.deleteFramebuffer(this._frameBuffer),T$SL.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0,this.uri=null);},T$x(0,T$s,"depthStencilBuffer",function(){return this._depthStencilBuffer;}),T$x(0,T$s,"frameBuffer",function(){return this._frameBuffer;}),T$o;}(),T$KL=function(T$L){function T$y(T$L,T$s,T$m,T$x,T$w,T$O,T$v){this.offsetX=0,this.offsetY=0,T$y.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=T$O,this.canvas=T$L,this._ctx=T$L.getContext("2d",void 0),this._w=T$x,this._h=T$w,this.offsetX=T$s,this.offsetY=T$m,this.src=T$v,this._enableMerageInAtlas=!0,T$d.enabled&&this._w<T$d.atlasLimitWidth&&this._h<T$d.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1;}T$E(T$y,"laya.webgl.resource.WebGLSubImage",T$m);var T$s=T$y.prototype;return T$Y.imps(T$s,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),T$s.size=function(T$L,T$s){this._w=T$L,this._h=T$s,this._ctx&&this._ctx.size(T$L,T$s),this.canvas&&(this.canvas.height=T$s,this.canvas.width=T$L);},T$s.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate();},T$s.createWebGlTexture=function(){var T$L=T$SL.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var T$s=this._source=T$L.createTexture(),T$m=T$HL.curBindTexTarget,T$x=T$HL.curBindTexValue;T$HL.bindTexture(T$L,3553,T$s),T$L.pixelStorei(37441,!0),T$L.texImage2D(3553,0,6408,6408,5121,this.canvas),T$L.pixelStorei(37441,!1);var T$w=this.minFifter,T$O=this.magFifter,T$v=this.repeat?10497:33071,T$y=T$V.isPOT(this.width,this.height);T$y?(this.mipmap?-1!==T$w||(T$w=9987):-1!==T$w||(T$w=9729),-1!==T$O||(T$O=9729),T$L.texParameteri(3553,10240,T$O),T$L.texParameteri(3553,10241,T$w),T$L.texParameteri(3553,10242,T$v),T$L.texParameteri(3553,10243,T$v),this.mipmap&&T$L.generateMipmap(3553)):(-1!==T$w||(T$w=9729),-1!==T$O||(T$O=9729),T$L.texParameteri(3553,10241,T$w),T$L.texParameteri(3553,10240,T$O),T$L.texParameteri(3553,10242,33071),T$L.texParameteri(3553,10243,33071)),T$m&&T$x&&T$HL.bindTexture(T$L,T$m,T$x),this.canvas=null,T$y&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4;},T$s.disposeResource=function(){T$d.enabled&&this._allowMerageInAtlas||!this._source||(T$SL.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0);},T$s.clearAtlasSource=function(){},T$x(0,T$s,"allowMerageInAtlas",function(){return this._allowMerageInAtlas;}),T$x(0,T$s,"atlasSource",function(){return this.canvas;}),T$x(0,T$s,"enableMerageInAtlas",function(){return this._allowMerageInAtlas;},function(T$L){this._allowMerageInAtlas=T$L;}),T$y;}(),T$PL=function(T$L){function T$o(T$L,T$s,T$m,T$x){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,T$o.__super.call(this),!T$L||!T$s)throw"Shader Error";this._id=++T$o._count,this._vs=T$L,this._ps=T$s,this._nameMap=T$x||{},null!=T$m&&(T$o.sharders[T$m]=this);}T$E(T$o,"laya.webgl.shader.Shader",T$gL);var T$s=T$o.prototype;return T$s.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0;},T$s.disposeResource=function(){T$SL.mainContext.deleteShader(this._vshader),T$SL.mainContext.deleteShader(this._pshader),T$SL.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0;},T$s._compile=function(){if(!T$SL.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var T$L=[this._vs,this._ps],T$s=T$SL.mainContext;if(this._program=T$s.createProgram(),this._vshader=T$o._createShader(T$s,T$L[0],35633),this._pshader=T$o._createShader(T$s,T$L[1],35632),T$s.attachShader(this._program,this._vshader),T$s.attachShader(this._program,this._pshader),T$s.linkProgram(this._program),!T$D.isConchApp&&!T$s.getProgramParameter(this._program,35714))throw T$s.getProgramInfoLog(this._program);var T$m,T$x,T$w=0,T$O=0;for(T$O=T$D.isConchApp?T$s.getProgramParameterEx(this._vs,this._ps,"",35721):T$s.getProgramParameter(this._program,35721),T$w=0;T$w<T$O;T$w++){var T$v=null;T$m={vartype:"attribute",glfun:null,ivartype:0,attrib:T$v=T$D.isConchApp?T$s.getActiveAttribEx(this._vs,this._ps,"",T$w):T$s.getActiveAttrib(this._program,T$w),location:T$s.getAttribLocation(this._program,T$v.name),name:T$v.name,type:T$v.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(T$m);}var T$y=0;for(T$y=T$D.isConchApp?T$s.getProgramParameterEx(this._vs,this._ps,"",35718):T$s.getProgramParameter(this._program,35718),T$w=0;T$w<T$y;T$w++){var T$F=null;T$F=T$D.isConchApp?T$s.getActiveUniformEx(this._vs,this._ps,"",T$w):T$s.getActiveUniform(this._program,T$w),0<(T$m={vartype:"uniform",glfun:null,ivartype:1,attrib:T$v,location:T$s.getUniformLocation(this._program,T$F.name),name:T$F.name,type:T$F.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(T$m.name=T$m.name.substr(0,T$m.name.length-3),T$m.isArray=!0,T$m.location=T$s.getUniformLocation(this._program,T$m.name)),this._params.push(T$m);}for(T$w=0,T$x=this._params.length;T$w<T$x;T$w++)if((T$m=this._params[T$w]).indexOfParams=T$w,T$m.index=1,T$m.value=[T$m.location,null],T$m.codename=T$m.name,T$m.name=this._nameMap[T$m.codename]?this._nameMap[T$m.codename]:T$m.codename,(this._paramsMap[T$m.name]=T$m)._this=this,T$m.uploadedValue=[],"attribute"!==T$m.vartype)switch(T$m.type){case 5124:T$m.fun=T$m.isArray?this._uniform1iv:this._uniform1i;break;case 5126:T$m.fun=T$m.isArray?this._uniform1fv:this._uniform1f;break;case 35664:T$m.fun=T$m.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:T$m.fun=T$m.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:T$m.fun=T$m.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:T$m.fun=this._uniform_sampler2D;break;case 35680:T$m.fun=this._uniform_samplerCube;break;case 35676:T$m.glfun=T$s.uniformMatrix4fv,T$m.fun=this._uniformMatrix4fv;break;case 35670:T$m.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!");}else T$m.fun=this._attribute;}},T$s.getUniform=function(T$L){return this._paramsMap[T$L];},T$s._attribute=function(T$L,T$s){var T$m=T$SL.mainContext,T$x=T$pL._enableAtributes,T$w=T$L.location;return T$x[T$w]||T$m.enableVertexAttribArray(T$w),T$m.vertexAttribPointer(T$w,T$s[0],T$s[1],T$s[2],T$s[3],T$s[4]+this._offset),T$x[T$w]=T$pL._bindVertexBuffer,1;},T$s._uniform1f=function(T$L,T$s){var T$m=T$L.uploadedValue;return T$m[0]!==T$s?(T$SL.mainContext.uniform1f(T$L.location,T$m[0]=T$s),1):0;},T$s._uniform1fv=function(T$L,T$s){if(T$s.length<4){var T$m=T$L.uploadedValue;return T$m[0]!==T$s[0]||T$m[1]!==T$s[1]||T$m[2]!==T$s[2]||T$m[3]!==T$s[3]?(T$SL.mainContext.uniform1fv(T$L.location,T$s),T$m[0]=T$s[0],T$m[1]=T$s[1],T$m[2]=T$s[2],T$m[3]=T$s[3],1):0;}return T$SL.mainContext.uniform1fv(T$L.location,T$s),1;},T$s._uniform_vec2=function(T$L,T$s){var T$m=T$L.uploadedValue;return T$m[0]!==T$s[0]||T$m[1]!==T$s[1]?(T$SL.mainContext.uniform2f(T$L.location,T$m[0]=T$s[0],T$m[1]=T$s[1]),1):0;},T$s._uniform_vec2v=function(T$L,T$s){if(T$s.length<2){var T$m=T$L.uploadedValue;return T$m[0]!==T$s[0]||T$m[1]!==T$s[1]||T$m[2]!==T$s[2]||T$m[3]!==T$s[3]?(T$SL.mainContext.uniform2fv(T$L.location,T$s),T$m[0]=T$s[0],T$m[1]=T$s[1],T$m[2]=T$s[2],T$m[3]=T$s[3],1):0;}return T$SL.mainContext.uniform2fv(T$L.location,T$s),1;},T$s._uniform_vec3=function(T$L,T$s){var T$m=T$L.uploadedValue;return T$m[0]!==T$s[0]||T$m[1]!==T$s[1]||T$m[2]!==T$s[2]?(T$SL.mainContext.uniform3f(T$L.location,T$m[0]=T$s[0],T$m[1]=T$s[1],T$m[2]=T$s[2]),1):0;},T$s._uniform_vec3v=function(T$L,T$s){return T$SL.mainContext.uniform3fv(T$L.location,T$s),1;},T$s._uniform_vec4=function(T$L,T$s){var T$m=T$L.uploadedValue;return T$m[0]!==T$s[0]||T$m[1]!==T$s[1]||T$m[2]!==T$s[2]||T$m[3]!==T$s[3]?(T$SL.mainContext.uniform4f(T$L.location,T$m[0]=T$s[0],T$m[1]=T$s[1],T$m[2]=T$s[2],T$m[3]=T$s[3]),1):0;},T$s._uniform_vec4v=function(T$L,T$s){return T$SL.mainContext.uniform4fv(T$L.location,T$s),1;},T$s._uniformMatrix2fv=function(T$L,T$s){return T$SL.mainContext.uniformMatrix2fv(T$L.location,!1,T$s),1;},T$s._uniformMatrix3fv=function(T$L,T$s){return T$SL.mainContext.uniformMatrix3fv(T$L.location,!1,T$s),1;},T$s._uniformMatrix4fv=function(T$L,T$s){return T$SL.mainContext.uniformMatrix4fv(T$L.location,!1,T$s),1;},T$s._uniform1i=function(T$L,T$s){var T$m=T$L.uploadedValue;return T$m[0]!==T$s?(T$SL.mainContext.uniform1i(T$L.location,T$m[0]=T$s),1):0;},T$s._uniform1iv=function(T$L,T$s){return T$SL.mainContext.uniform1iv(T$L.location,T$s),1;},T$s._uniform_ivec2=function(T$L,T$s){var T$m=T$L.uploadedValue;return T$m[0]!==T$s[0]||T$m[1]!==T$s[1]?(T$SL.mainContext.uniform2i(T$L.location,T$m[0]=T$s[0],T$m[1]=T$s[1]),1):0;},T$s._uniform_ivec2v=function(T$L,T$s){return T$SL.mainContext.uniform2iv(T$L.location,T$s),1;},T$s._uniform_vec3i=function(T$L,T$s){var T$m=T$L.uploadedValue;return T$m[0]!==T$s[0]||T$m[1]!==T$s[1]||T$m[2]!==T$s[2]?(T$SL.mainContext.uniform3i(T$L.location,T$m[0]=T$s[0],T$m[1]=T$s[1],T$m[2]=T$s[2]),1):0;},T$s._uniform_vec3vi=function(T$L,T$s){return T$SL.mainContext.uniform3iv(T$L.location,T$s),1;},T$s._uniform_vec4i=function(T$L,T$s){var T$m=T$L.uploadedValue;return T$m[0]!==T$s[0]||T$m[1]!==T$s[1]||T$m[2]!==T$s[2]||T$m[3]!==T$s[3]?(T$SL.mainContext.uniform4i(T$L.location,T$m[0]=T$s[0],T$m[1]=T$s[1],T$m[2]=T$s[2],T$m[3]=T$s[3]),1):0;},T$s._uniform_vec4vi=function(T$L,T$s){return T$SL.mainContext.uniform4iv(T$L.location,T$s),1;},T$s._uniform_sampler2D=function(T$L,T$s){var T$m=T$SL.mainContext,T$x=T$L.uploadedValue;return null==T$x[0]?(T$x[0]=this._curActTexIndex,T$m.uniform1i(T$L.location,this._curActTexIndex),T$m.activeTexture(T$o._TEXTURES[this._curActTexIndex]),T$HL.bindTexture(T$m,3553,T$s),this._curActTexIndex++,1):(T$m.activeTexture(T$o._TEXTURES[T$x[0]]),T$HL.bindTexture(T$m,3553,T$s),0);},T$s._uniform_samplerCube=function(T$L,T$s){var T$m=T$SL.mainContext,T$x=T$L.uploadedValue;return null==T$x[0]?(T$x[0]=this._curActTexIndex,T$m.uniform1i(T$L.location,this._curActTexIndex),T$m.activeTexture(T$o._TEXTURES[this._curActTexIndex]),T$HL.bindTexture(T$m,34067,T$s),this._curActTexIndex++,1):(T$m.activeTexture(T$o._TEXTURES[T$x[0]]),T$HL.bindTexture(T$m,34067,T$s),0);},T$s._noSetValue=function(T$L){console.log("no....:"+T$L.name);},T$s.uploadOne=function(T$L,T$s){this.activeResource(),T$HL.UseProgram(this._program);var T$m=this._paramsMap[T$L];T$m.fun.call(this,T$m,T$s);},T$s.uploadTexture2D=function(T$L){T$c.shaderCall++;var T$s=T$SL.mainContext;T$s.activeTexture(33984),T$HL.bindTexture(T$s,3553,T$L);},T$s.uploadTexture2D1=function(T$L){T$c.shaderCall++;var T$s=T$SL.mainContext;T$s.activeTexture(33985),T$HL.bindTexture(T$s,3553,T$L);},T$s.upload=function(T$L,T$s){T$gL.activeShader=T$gL.bindShader=this,this._lastUseFrameCount===T$c.loopCount||this.activeResource(),T$HL.UseProgram(this._program),this._reCompile?(T$s=this._params,this._reCompile=!1):T$s=T$s||this._params;T$SL.mainContext;for(var T$m,T$x,T$w=T$s.length,T$O=0,T$v=0;T$v<T$w;T$v++)null!==(T$x=T$L[(T$m=T$s[T$v]).name])&&(T$O+=T$m.fun.call(this,T$m,T$x));T$c.shaderCall+=T$O;},T$s.uploadArray=function(T$L,T$s,T$m){T$gL.activeShader=this,(T$gL.bindShader=this).activeResource(),T$HL.UseProgram(this._program);this._params;for(var T$x,T$w,T$O=0,T$v=T$s-2;0<=T$v;T$v-=2)(T$w=this._paramsMap[T$L[T$v]])&&null!=(T$x=T$L[T$v+1])&&(T$m&&T$m[T$w.name]&&T$m[T$w.name].bind(),T$O+=T$w.fun.call(this,T$w,T$x));T$c.shaderCall+=T$O;},T$s.getParams=function(){return this._params;},T$o.getShader=function(T$L){return T$o.sharders[T$L];},T$o.create=function(T$L,T$s,T$m,T$x){return new T$o(T$L,T$s,T$m,T$x);},T$o.withCompile=function(T$L,T$s,T$m,T$x){if(T$m&&T$o.sharders[T$m])return T$o.sharders[T$m];var T$w=T$o._preCompileShader[2e-4*T$L];if(!T$w)throw new Error("withCompile shader err!"+T$L);return T$w.createShader(T$s,T$m,T$x);},T$o.withCompile2D=function(T$L,T$s,T$m,T$x,T$w){if(T$x&&T$o.sharders[T$x])return T$o.sharders[T$x];var T$O=T$o._preCompileShader[2e-4*T$L+T$s];if(!T$O)throw new Error("withCompile shader err!"+T$L+" "+T$s);return T$O.createShader(T$m,T$x,T$w);},T$o.addInclude=function(T$L,T$s){T$bL.addInclude(T$L,T$s);},T$o.preCompile=function(T$L,T$s,T$m,T$x){var T$w=2e-4*T$L;T$o._preCompileShader[T$w]=new T$bL(T$w,T$s,T$m,T$x);},T$o.preCompile2D=function(T$L,T$s,T$m,T$x,T$w){var T$O=2e-4*T$L+T$s;T$o._preCompileShader[T$O]=new T$bL(T$O,T$m,T$x,T$w);},T$o._createShader=function(T$L,T$s,T$m){var T$x=T$L.createShader(T$m);return T$L.shaderSource(T$x,T$s),T$L.compileShader(T$x),T$x;},T$o._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],T$o._count=0,T$o._preCompileShader={},T$o.SHADERNAME2ID=2e-4,T$o.sharders=((T$o.sharders=[]).length=32,T$o.sharders),T$v(T$o,["nameKey",function(){return this.nameKey=new T$h();}]),T$o;}(),T$kL=function(T$L){function T$s(){this._maxsize=0,this._upload=!0,this._uploadSize=0,T$s.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id;}T$E(T$s,"laya.webgl.utils.Buffer2D",T$L);var T$m=T$s.prototype;return T$m.needSize=function(T$L){var T$s=this._byteLength;if(T$L){var T$m=this._byteLength+T$L;T$m<=this._buffer.byteLength||this._resizeBuffer(T$m<<1,!0),this._byteLength=T$m;}return T$s;},T$m._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),T$c.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,T$pL._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),T$pL._gl.bufferSubData(this._bufferType,0,this._buffer);},T$m._bufferSubData=function(T$L,T$s,T$m){if(void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0),this._maxsize=Math.max(this._maxsize,this._byteLength),T$c.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,T$pL._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),T$s||T$m){var T$x=this._buffer.slice(T$s,T$m);T$pL._gl.bufferSubData(this._bufferType,T$L,T$x);}else T$pL._gl.bufferSubData(this._bufferType,T$L,this._buffer);},T$m._checkArrayUse=function(){},T$m._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0);},T$m._bind_subUpload=function(T$L,T$s,T$m){return void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(T$L,T$s,T$m),!0);},T$m._resizeBuffer=function(T$L,T$s){if(T$L<this._buffer.byteLength)return this;if(this.memorySize=T$L,T$s&&this._buffer&&0<this._buffer.byteLength){var T$m=new ArrayBuffer(T$L);new Uint8Array(T$m).set(new Uint8Array(this._buffer),0),this._buffer=T$m;}else this._buffer=new ArrayBuffer(T$L);return this._checkArrayUse(),this._upload=!0,this;},T$m.append=function(T$L){this._upload=!0;var T$s,T$m;T$s=T$L.byteLength,T$L instanceof Uint8Array?(this._resizeBuffer(this._byteLength+T$s,!0),T$m=new Uint8Array(this._buffer,this._byteLength)):T$L instanceof Uint16Array?(this._resizeBuffer(this._byteLength+T$s,!0),T$m=new Uint16Array(this._buffer,this._byteLength)):T$L instanceof Float32Array&&(this._resizeBuffer(this._byteLength+T$s,!0),T$m=new Float32Array(this._buffer,this._byteLength)),T$m.set(T$L,0),this._byteLength+=T$s,this._checkArrayUse();},T$m.appendU16Array=function(T$L,T$s){this._resizeBuffer(this._byteLength+2*T$s,!0);for(var T$m=new Uint16Array(this._buffer,this._byteLength,T$s),T$x=0;T$x<T$s;T$x++)T$m[T$x]=T$L[T$x];this._byteLength+=2*T$s,this._checkArrayUse();},T$m.appendEx=function(T$L,T$s){this._upload=!0;var T$m;T$m=T$L.byteLength,this._resizeBuffer(this._byteLength+T$m,!0),new T$s(this._buffer,this._byteLength).set(T$L,0),this._byteLength+=T$m,this._checkArrayUse();},T$m.appendEx2=function(T$L,T$s,T$m,T$x){void 0===T$x&&(T$x=1),this._upload=!0;var T$w,T$O;T$w=T$m*T$x,this._resizeBuffer(this._byteLength+T$w,!0),T$O=new T$s(this._buffer,this._byteLength);var T$v=0;for(T$v=0;T$v<T$m;T$v++)T$O[T$v]=T$L[T$v];this._byteLength+=T$w,this._checkArrayUse();},T$m.getBuffer=function(){return this._buffer;},T$m.setNeedUpload=function(){this._upload=!0;},T$m.getNeedUpload=function(){return this._upload;},T$m.upload=function(){var T$L=this._bind_upload();return T$pL._gl.bindBuffer(this._bufferType,null),T$pL._bindActive[this._bufferType]=null,T$gL.activeShader=null,T$L;},T$m.subUpload=function(T$L,T$s,T$m){void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0);var T$x=this._bind_subUpload();return T$pL._gl.bindBuffer(this._bufferType,null),T$pL._bindActive[this._bufferType]=null,T$gL.activeShader=null,T$x;},T$m.disposeResource=function(){T$L.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0;},T$m.clear=function(){this._byteLength=0,this._upload=!0;},T$x(0,T$m,"bufferLength",function(){return this._buffer.byteLength;}),T$x(0,T$m,"byteLength",null,function(T$L){this._byteLength!==T$L&&(T$L<=this._buffer.byteLength||this._resizeBuffer(2*T$L+256,!0),this._byteLength=T$L);}),T$s.__int__=function(T$L){T$zL.QuadrangleIB=T$zL.create(35044),T$jL.fillIBQuadrangle(T$zL.QuadrangleIB,16);},T$s.FLOAT32=4,T$s.SHORT=2,T$s;}(T$pL),T$BL=(function(T$s){function T$m(T$L){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,T$m.__super.call(this,9);}T$E(T$m,"laya.webgl.shader.d2.value.GlowSV",T$s);var T$L=T$m.prototype;T$L.setValue=function(T$L){T$s.prototype.setValue.call(this,T$L);},T$L.clear=function(){T$s.prototype.clear.call(this);};}(T$XL),function(T$L){function T$s(T$L){T$s.__super.call(this,64),this.defines.add(64);}T$E(T$s,"laya.webgl.shader.d2.value.TextSV",T$L);var T$m=T$s.prototype;return T$m.release=function(){(T$s.pool[T$s._length++]=this).clear();},T$m.clear=function(){T$L.prototype.clear.call(this);},T$s.create=function(){return T$s._length?T$s.pool[--T$s._length]:new T$s(null);},T$s.pool=[],T$s._length=0,T$s;}(T$XL)),T$ML=function(T$L){function T$w(T$L,T$s,T$m,T$x){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,T$w.__super.call(this,T$L,T$s,T$m,T$x);}T$E(T$w,"laya.webgl.shader.d2.Shader2X",T$L);var T$s=T$w.prototype;return T$s.upload2dQuick1=function(T$L){this.upload(T$L,this._params2dQuick1||this._make2dQuick1());},T$s._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var T$L,T$s=this._params,T$m=0,T$x=T$s.length;T$m<T$x;T$m++)T$L=T$s[T$m],(T$D.isFlash||"size"!==T$L.name&&"position"!==T$L.name&&"texcoord"!==T$L.name)&&this._params2dQuick1.push(T$L);}return this._params2dQuick1;},T$s.disposeResource=function(){T$L.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null;},T$s.upload2dQuick2=function(T$L){this.upload(T$L,this._params2dQuick2||this._make2dQuick2());},T$s._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var T$L,T$s=this._params,T$m=0,T$x=T$s.length;T$m<T$x;T$m++)T$L=T$s[T$m],(T$D.isFlash||"size"!==T$L.name)&&this._params2dQuick2.push(T$L);}return this._params2dQuick2;},T$w.create=function(T$L,T$s,T$m,T$x){return new T$w(T$L,T$s,T$m,T$x);},T$w;}(T$PL),T$zL=function(T$L){function T$s(T$L){this._uint8Array=null,this._uint16Array=null,void 0===T$L&&(T$L=35044),T$s.__super.call(this),this._bufferUsage=T$L,this._bufferType=34963,T$D.isFlash||(this._buffer=new ArrayBuffer(8));}T$E(T$s,"laya.webgl.utils.IndexBuffer2D",T$kL);var T$m=T$s.prototype;return T$m._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer));},T$m.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer));},T$m.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer));},T$m.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null;},T$s.QuadrangleIB=null,T$s.create=function(T$L){return void 0===T$L&&(T$L=35044),new T$s(T$L);},T$s;}(),T$tL=function(T$L){function T$m(T$L,T$s){this._floatArray32=null,this._vertexStride=0,T$m.__super.call(this),this._vertexStride=T$L,this._bufferUsage=T$s,this._bufferType=34962,T$D.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array();}T$E(T$m,"laya.webgl.utils.VertexBuffer2D",T$L);var T$s=T$m.prototype;return T$s.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer));},T$s.bind=function(T$L){T$L&&T$L._bind(),this._bind();},T$s.insertData=function(T$L,T$s){this.getFloat32Array().set(T$L,T$s),this._upload=!0;},T$s.bind_upload=function(T$L){T$L._bind_upload()||T$L._bind(),this._bind_upload()||this._bind();},T$s._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer));},T$s.disposeResource=function(){T$L.prototype.disposeResource.call(this);},T$s.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null;},T$x(0,T$s,"vertexStride",function(){return this._vertexStride;}),T$m.create=function(T$L,T$s){return void 0===T$s&&(T$s=35048),new T$m(T$L,T$s);},T$m;}(T$kL),T$Ls=function(T$L){function T$y(T$L,T$s,T$m,T$x,T$w,T$O){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===T$m&&(T$m=6408),void 0===T$x&&(T$x=!0),T$y.__super.call(this,T$L,T$s),T$L){if(this._format=T$m,this._mipmap=T$x,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof T$L)this._url=T$L,this._src=T$L,this._image=new T$r.window.Image(),T$s&&(T$s.onload&&(this.onload=T$s.onload),T$s.onerror&&(this.onerror=T$s.onerror),T$s.onCreate&&T$s.onCreate(this)),this._image.crossOrigin=T$L&&0==T$L.indexOf("data:")?null:"",T$L&&(this._image.src=T$L);else if(T$L instanceof ArrayBuffer){this._src=T$s,this._url=this._src;var T$v=new T$F(T$L);T$v.readUTFBytes(4),T$v.readUTFBytes(2),T$v.getInt16();T$v.endian="bigEndian",this._w=T$v.getInt16(),this._h=T$v.getInt16();T$v.getInt16(),T$v.getInt16();this._image=new Uint8Array(T$L,T$v.pos),this._format=T$SL.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,T$d.enabled&&this._w<T$d.atlasLimitWidth&&this._h<T$d.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1;}else{if(!(T$L instanceof Uint8Array))return this._src=T$s,this._url=this._src,this._image=T$L.source||T$L,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=T$s,this._url=this._src,this._w=T$w,this._h=T$O,this._image=T$L,this._format=0===T$m?T$L.byteLength/(T$w*T$O)==4?6408:6407:T$m;}this._$5__enableMerageInAtlas=!0;}}T$E(T$y,"laya.webgl.resource.WebGLImage",T$T);var T$s=T$y.prototype;return T$Y.imps(T$s,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),T$s._init_=function(T$L,T$s){},T$s._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var T$L=T$SL.mainContext,T$s=this._source=T$L.createTexture(),T$m=T$HL.curBindTexTarget,T$x=T$HL.curBindTexValue;T$HL.bindTexture(T$L,3553,T$s);var T$w=this.minFifter,T$O=this.magFifter,T$v=this.repeat?10497:33071,T$y=T$V.isPOT(this._w,this._h),T$F=!1;switch(T$y?(this.mipmap?-1!==T$w||(T$w=9987):-1!==T$w||(T$w=9729),-1!==T$O||(T$O=9729),T$L.texParameteri(3553,10241,T$w),T$L.texParameteri(3553,10240,T$O),T$L.texParameteri(3553,10242,T$v),T$L.texParameteri(3553,10243,T$v),this.mipmap&&T$L.generateMipmap(3553)):(-1!==T$w||(T$w=9729),-1!==T$O||(T$O=9729),T$L.texParameteri(3553,10241,T$w),T$L.texParameteri(3553,10240,T$O),T$L.texParameteri(3553,10242,33071),T$L.texParameteri(3553,10243,33071)),T$L.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&T$L.pixelStorei(T$L.UNPACK_ALIGNMENT,1),T$L.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&T$L.pixelStorei(T$L.UNPACK_ALIGNMENT,1),T$L.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:T$F=!0,T$L.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case T$SL.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:T$F=!0,T$L.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format);}T$L.pixelStorei(37441,!1),T$m&&T$x&&T$HL.bindTexture(T$L,T$m,T$x),this.uri||(this.uri=this._url),T$F?this.memorySize=this._image.length:T$y&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1;},T$s.recreateResource=function(){var T$L=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate();}else{this._recreateLock=!0;var T$s=this;this._image=new T$r.window.Image(),this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(T$s._needReleaseAgain)return T$s._needReleaseAgain=!1,T$s._image.onload=null,void(T$s._image=null);T$s._allowMerageInAtlas&&T$s._enableMerageInAtlas?(T$L.memorySize=0,T$L._recreateLock=!1):T$s._createWebGlTexture(),T$s.completeCreate();},this._image.src=this._src;}},T$s.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&T$SL.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0;},T$s.onresize=function(){this._w=this._image.width,this._h=this._image.height,T$d.enabled&&this._w<T$d.atlasLimitWidth&&this._h<T$d.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1;},T$s.clearAtlasSource=function(){this._image=null;},T$x(0,T$s,"format",function(){return this._format;}),T$x(0,T$s,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas;},function(T$L){this._$5__enableMerageInAtlas=T$L;}),T$x(0,T$s,"mipmap",function(){return this._mipmap;}),T$x(0,T$s,"allowMerageInAtlas",function(){return this._allowMerageInAtlas;}),T$x(0,T$s,"atlasSource",function(){return this._image;}),T$x(0,T$s,"onload",null,function(T$L){var T$s=this;this._onload=T$L,this._image&&(this._image.onload=null!=this._onload?function(){T$s.onresize(),T$s._onload();}:null);}),T$x(0,T$s,"onerror",null,function(T$L){var T$s=this;this._onerror=T$L,this._image&&(this._image.onerror=null!=this._onerror?function(){T$s._onerror();}:null);}),T$y;}();T$Y.__init([T$rL,T$W,T$aL,T$bL]);}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$L,T$s){"use strict";for(var T$m in Object.defineProperty(T$s,"__esModule",{value:!0}),Laya){var T$x=Laya[T$m];T$x&&T$x.__isclass&&(T$s[T$m]=T$x);}}),function(T$O,T$L,T$x){T$x.un,T$x.uns;var T$w=T$x.static,T$v=T$x.class,T$y=T$x.getset,T$F=(T$x.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),T$u=laya.utils.ClassUtils,T$C=(laya.events.Event,laya.utils.HTMLChar),T$o=laya.net.Loader,T$V=(laya.display.Node,laya.maths.Rectangle),T$E=laya.renders.Render,T$r=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),T$T=laya.utils.Stat,T$g=laya.display.Text,T$j=laya.resource.Texture,T$D=laya.net.URL,T$e=laya.utils.Utils,T$b=function(){function T$r(){}return T$v(T$r,"laya.html.utils.HTMLParse"),T$r.parse=function(T$L,T$s,T$m){T$s=(T$s="<root>"+(T$s=T$s.replace(/<br>/g,"<br/>"))+"</root>").replace(T$r.spacePattern,T$r.char255);var T$x=T$e.parseXMLFromString(T$s);T$r._parseXML(T$L,T$x.childNodes[0].childNodes,T$m);},T$r._parseXML=function(T$L,T$s,T$m,T$x){var T$w=0,T$O=0;if(T$s.join||T$s.item)for(T$w=0,T$O=T$s.length;T$w<T$O;++T$w)T$r._parseXML(T$L,T$s[T$w],T$m,T$x);else{var T$v,T$y,T$F;if(3==T$s.nodeType)return void(T$L instanceof laya.html.dom.HTMLDivElement?(null==T$s.nodeName&&(T$s.nodeName="#text"),T$y=T$s.nodeName.toLowerCase(),0<(T$F=T$s.textContent.replace(/^\s+|\s+$/g,"")).length&&(T$v=T$u.getInstance(T$y))&&(T$L.addChild(T$v),T$v.innerTEXT=T$F.replace(T$r.char255AndOneSpacePattern," "))):0<(T$F=T$s.textContent.replace(/^\s+|\s+$/g,"")).length&&(T$L.innerTEXT=T$F.replace(T$r.char255AndOneSpacePattern," ")));if("#comment"==(T$y=T$s.nodeName.toLowerCase()))return;if(T$v=T$u.getInstance(T$y)){(T$v=T$L.addChild(T$v)).URI=T$m,T$v.href=T$x;var T$o=T$s.attributes;if(T$o&&0<T$o.length)for(T$w=0,T$O=T$o.length;T$w<T$O;++T$w){var T$V=T$o[T$w],T$C=T$V.nodeName,T$E=T$V.value;T$v._setAttributes(T$C,T$E);}T$r._parseXML(T$v,T$s.childNodes,T$m,T$v.href);}else T$r._parseXML(T$L,T$s.childNodes,T$m,T$x);}},T$r.char255=String.fromCharCode(255),T$r.spacePattern=/&nbsp;|&#160;/g,T$r.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),T$r;}(),T$S=function(){function T$A(){}return T$v(T$A,"laya.html.utils.Layout"),T$A.later=function(T$L){null==T$A._will&&(T$A._will=[],T$x.stage.frameLoop(1,null,function(){if(!(T$A._will.length<1)){for(var T$L=0;T$L<T$A._will.length;T$L++)laya.html.utils.Layout.layout(T$A._will[T$L]);T$A._will.length=0;}})),T$A._will.push(T$L);},T$A.layout=function(T$L){if(!T$L||!T$L._style)return null;if(0==(512&T$L._style._type))return null;T$L.getStyle()._type&=-513;var T$s=T$A._multiLineLayout(T$L);return T$E.isConchApp&&T$L.layaoutCallNative&&T$L.layaoutCallNative(),T$s;},T$A._multiLineLayout=function(T$L){if(T$g.RightToLeft)return T$A._multiLineLayout2(T$L);var T$s=new Array();T$L._addChildsToLayout(T$s);var T$m,T$x,T$w,T$O,T$v,T$y=0,T$F=T$s.length,T$o=T$L._getCSSStyle(),T$V=T$o.letterSpacing,T$C=T$o.leading,T$E=T$o.lineHeight,T$r=T$o._widthAuto()||!T$o.wordWrap,T$u=T$r?999999:T$L.width,T$T=(T$L.height,0),T$j=T$o.italic?T$o.fontSize/3:0,T$D=T$o._getAlign(),T$e=T$o._getValign(),T$b=0!==T$e||0!==T$D||0!=T$E,T$S=0,T$H=0,T$Y=0,T$a=0,T$f=new Array(),T$_=T$f[0]=new T$$(),T$Q=!1,T$N=!1;T$_.h=0,T$o.italic&&(T$u-=T$o.fontSize/3);var T$i=0,T$U=!0;function T$c(){T$_.y=T$H,T$H+=T$_.h+T$C,0==T$_.h&&(T$H+=T$E),T$_.mWidth=T$i,T$i=0,T$_=new T$$(),T$f.push(T$_),T$_.h=0,T$Q=!(T$U=!(T$S=0));}for(T$y=0;T$y<T$F;T$y++)if(null!=(T$m=T$s[T$y])){if(T$U=!1,T$m instanceof laya.html.dom.HTMLBrElement)T$c(),T$_.y=T$H;else{if(T$m._isChar()){if((T$O=T$m).isWord)T$Q=T$N||"\n"===T$O.char,T$_.wordStartIndex=T$_.elements.length;else{if(T$Y=T$O.width+T$O.style.letterSpacin,0<T$f.length&&T$u<T$S+T$Y&&0<T$_.wordStartIndex){var T$h;T$h=T$_.elements.length-T$_.wordStartIndex+1,T$_.elements.length=T$_.wordStartIndex,T$y-=T$h,T$c();continue;}T$Q=!1,T$i+=T$O.width;}T$Y=T$O.width+T$V,T$a=T$O.height,T$N=!1,(T$Q=T$Q||T$u<T$S+T$Y)&&T$c(),T$_.minTextHeight=Math.min(T$_.minTextHeight,T$m.height);}else T$x=T$m._getCSSStyle(),T$v=T$m,T$w=T$x.padding,0===T$x._getCssFloat()||(T$b=!0),T$Q=T$N||T$x.lineElement,T$Y=T$v.width*T$v._style._tf.scaleX+T$w[1]+T$w[3]+T$V,T$a=T$v.height*T$v._style._tf.scaleY+T$w[0]+T$w[2],T$N=T$x.lineElement,(T$Q=T$Q||T$u<T$S+T$Y&&T$x.wordWrap)&&T$c();T$_.elements.push(T$m),T$_.h=Math.max(T$_.h,T$a),T$m.x=T$S,T$m.y=T$H,T$S+=T$Y,T$_.w=T$S-T$V,T$_.y=T$H,T$T=Math.max(T$S+T$j,T$T);}}else T$U||(T$S+=T$A.DIV_ELEMENT_PADDING),T$_.wordStartIndex=T$_.elements.length;if(T$H=T$_.y+T$_.h,T$b){var T$G=0,T$R=T$u;for(T$r&&0<T$L.width&&(T$R=T$L.width),T$y=0,T$F=T$f.length;T$y<T$F;T$y++)T$f[T$y].updatePos(0,T$R,T$y,T$G,T$D,T$e,T$E),T$G+=Math.max(T$E,T$f[T$y].h+T$C);T$H=T$G;}return T$r&&(T$L.width=T$T),T$H>T$L.height&&(T$L.height=T$H),[T$T,T$H];},T$A._multiLineLayout2=function(T$L){var T$s=new Array();T$L._addChildsToLayout(T$s);var T$m,T$x,T$w,T$O,T$v,T$y=0,T$F=T$s.length,T$o=T$L._getCSSStyle(),T$V=T$o.letterSpacing,T$C=T$o.leading,T$E=T$o.lineHeight,T$r=T$o._widthAuto()||!T$o.wordWrap,T$u=T$r?999999:T$L.width,T$T=(T$L.height,0),T$j=T$o.italic?T$o.fontSize/3:0,T$D=2-T$o._getAlign(),T$e=T$o._getValign(),T$b=0!==T$e||0!=T$D||0!=T$E,T$S=0,T$H=0,T$Y=0,T$a=0,T$f=new Array(),T$_=T$f[0]=new T$$(),T$Q=!1,T$N=!1;T$_.h=0,T$o.italic&&(T$u-=T$o.fontSize/3);var T$i=0,T$U=!0;function T$c(){T$_.y=T$H,T$H+=T$_.h+T$C,0==T$_.h&&(T$H+=T$E),T$_.mWidth=T$i,T$i=0,T$_=new T$$(),T$f.push(T$_),T$_.h=0,T$Q=!(T$U=!(T$S=0));}for(T$y=0;T$y<T$F;T$y++)if(null!=(T$m=T$s[T$y])){if(T$U=!1,T$m instanceof laya.html.dom.HTMLBrElement)T$c(),T$_.y=T$H;else{if(T$m._isChar()){if((T$O=T$m).isWord)T$Q=T$N||"\n"===T$O.char,T$_.wordStartIndex=T$_.elements.length;else{if(0<T$f.length&&T$u<T$S+T$Y&&0<T$_.wordStartIndex){var T$h;T$h=T$_.elements.length-T$_.wordStartIndex+1,T$_.elements.length=T$_.wordStartIndex,T$y-=T$h,T$c();continue;}T$Q=!1,T$i+=T$O.width;}T$Y=T$O.width+T$V,T$a=T$O.height,T$N=!1,(T$Q=T$Q||T$u<T$S+T$Y)&&T$c(),T$_.minTextHeight=Math.min(T$_.minTextHeight,T$m.height);}else T$x=T$m._getCSSStyle(),T$v=T$m,T$w=T$x.padding,0===T$x._getCssFloat()||(T$b=!0),T$Q=T$N||T$x.lineElement,T$Y=T$v.width*T$v._style._tf.scaleX+T$w[1]+T$w[3]+T$V,T$a=T$v.height*T$v._style._tf.scaleY+T$w[0]+T$w[2],T$N=T$x.lineElement,(T$Q=T$Q||T$u<T$S+T$Y&&T$x.wordWrap)&&T$c();T$_.elements.push(T$m),T$_.h=Math.max(T$_.h,T$a),T$m.x=T$S,T$m.y=T$H,T$S+=T$Y,T$_.w=T$S-T$V,T$_.y=T$H,T$T=Math.max(T$S+T$j,T$T);}}else T$U||(T$S+=T$A.DIV_ELEMENT_PADDING),T$_.wordStartIndex=T$_.elements.length;if(T$H=T$_.y+T$_.h,T$b){var T$G=0,T$R=T$u;for(T$y=0,T$F=T$f.length;T$y<T$F;T$y++)T$f[T$y].updatePos(0,T$R,T$y,T$G,T$D,T$e,T$E),T$G+=Math.max(T$E,T$f[T$y].h+T$C);T$H=T$G;}for(T$r&&(T$L.width=T$T),T$H>T$L.height&&(T$L.height=T$H),T$y=0,T$F=T$f.length;T$y<T$F;T$y++)T$f[T$y].revertOrder(T$u);return[T$T,T$H];},T$A._will=null,T$A.DIV_ELEMENT_PADDING=0,T$A;}(),T$$=function(){function T$L(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array();}T$v(T$L,"laya.html.utils.LayoutLine");var T$s=T$L.prototype;return T$s.updatePos=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){var T$y,T$F=0;0<this.elements.length&&(T$F=(T$y=this.elements[this.elements.length-1]).x+T$y.width-this.elements[0].x);var T$o=0,T$V=NaN;1===T$w&&(T$o=(T$s-T$F)/2),2===T$w&&(T$o=T$s-T$F),0===T$v||0!=T$O||(T$O=1);for(var T$C=0,T$E=this.elements.length;T$C<T$E;T$C++){var T$r=(T$y=this.elements[T$C])._getCSSStyle();switch(0!==T$o&&(T$y.x+=T$o),T$r._getValign()){case 0:T$y.y=T$x;break;case 1:var T$u=0;99999!=this.minTextHeight&&(T$u=this.minTextHeight);var T$T=(T$u+T$v)/2;T$T=Math.max(T$T,this.h),T$V=(laya.html.dom.HTMLImageElement,T$x+T$T-T$y.height),T$y.y=T$V;break;case 2:T$y.y=T$x+(T$v-T$y.height);}}},T$s.revertOrder=function(T$L){var T$s;if(0<this.elements.length){var T$m,T$x=0;for(T$m=this.elements.length,T$x=0;T$x<T$m;T$x++)(T$s=this.elements[T$x]).x=T$L-T$s.x-T$s.width;}},T$L;}(),T$H=function(T$m){function T$s(){this.URI=null,this._href=null,T$s.__super.call(this),this._text=T$s._EMPTYTEXT,this.setStyle(new T$F(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0;}T$v(T$s,"laya.html.dom.HTMLElement",T$m);var T$L=T$s.prototype;return T$L.layaoutCallNative=function(){var T$L=0;if(this._childs&&0<(T$L=this._childs.length))for(var T$s=0;T$s<T$L;T$s++)this._childs[T$s].layaoutCallNative&&this._childs[T$s].layaoutCallNative();var T$m=this._getWords();T$m?laya.html.dom.HTMLElement.fillWords(this,T$m,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear();},T$L.appendChild=function(T$L){return this.addChild(T$L);},T$L._getWords2=function(){var T$L=this._text.text;if(!T$L||0===T$L.length)return null;var T$s,T$m,T$x=0,T$w=0;if(this._text.drawWords)T$m=this._text.drawWords;else{for(T$w=(T$s=T$L.split(" ")).length-1,T$m=[],T$x=0;T$x<T$w;T$x++)T$m.push(T$s[T$x]," ");0<=T$w&&T$m.push(T$s[T$w]),this._text.drawWords=T$m;}var T$O,T$v=this._text.words;if(T$v&&T$v.length===T$m.length)return T$v;null===T$v&&(this._text.words=T$v=[]),T$v.length=T$m.length;var T$y=this.style,T$F=T$y.font;for(T$x=0,T$w=T$m.length;T$x<T$w;T$x++){T$O=T$e.measureText(T$m[T$x],T$F);var T$o=T$v[T$x]=new T$C(T$m[T$x],T$O.width,T$O.height||T$y.fontSize,T$y);if(1<T$o.char.length&&(T$o.charNum=T$o.char),this.href){var T$V=new T$r();this.addChild(T$V),T$o.setSprite(T$V);}}return T$v;},T$L._getWords=function(){if(!T$g.CharacterCache)return this._getWords2();var T$L=this._text.text;if(!T$L||0===T$L.length)return null;var T$s,T$m=this._text.words;if(T$m&&T$m.length===T$L.length)return T$m;null===T$m&&(this._text.words=T$m=[]),T$m.length=T$L.length;for(var T$x=this.style,T$w=T$x.font,T$O=0,T$v=T$L.length;T$O<T$v;T$O++)if(T$s=T$e.measureText(T$L.charAt(T$O),T$w)){var T$y=T$m[T$O]=new T$C(T$L.charAt(T$O),T$s.width,T$s.height||T$x.fontSize,T$x);if(this.href){var T$F=new T$r();this.addChild(T$F),T$y.setSprite(T$F);}}else console.warn("_getWords size is null"+T$L.charAt(T$O),T$w);return T$m;},T$L.showLinkSprite=function(){var T$L=this._text.words;if(T$L)for(var T$s,T$m,T$x=[],T$w=0;T$w<T$L.length;T$w++)T$m=T$L[T$w],(T$s=new T$r()).graphics.drawRect(0,0,T$m.width,T$m.height,"#ff0000"),T$s.width=T$m.width,T$s.height=T$m.height,this.addChild(T$s),T$x.push(T$s);},T$L._layoutLater=function(){var T$L=this.style;512&T$L._type||(T$L.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&T$L.block?(T$S.later(this),T$L._type|=512):this.parent&&this.parent._layoutLater());},T$L._setAttributes=function(T$L,T$s){switch(T$L){case"style":return void this.style.cssText(T$s);case"class":return void(this.className=T$s);}T$m.prototype._setAttributes.call(this,T$L,T$s);},T$L.updateHref=function(){if(null!=this._href){var T$L=this._getWords();if(T$L)for(var T$s,T$m,T$x=0;T$x<T$L.length;T$x++)(T$m=(T$s=T$L[T$x]).getSprite())&&(T$m.size(T$s.width,T$s.height),T$m.on("click",this,this.onLinkHandler));}},T$L.onLinkHandler=function(T$L){switch(T$L.type){case"click":for(var T$s=this;T$s;)T$s.event("link",[this.href]),T$s=T$s.parent;}},T$L.formatURL=function(T$L){return this.URI?T$D.formatURL(T$L,this.URI?this.URI.path:null):T$L;},T$y(0,T$L,"href",function(){return this._href;},function(T$L){null!=(this._href=T$L)&&(this._getCSSStyle().underLine=1,this.updateHref());}),T$y(0,T$L,"color",null,function(T$L){this.style.color=T$L;}),T$y(0,T$L,"onClick",null,function(T$L){T$x._runScript("fn=function(event){"+T$L+";}"),this.on("click",this,void 0);}),T$y(0,T$L,"id",null,function(T$L){T$Y.document.setElementById(T$L,this);}),T$y(0,T$L,"innerTEXT",function(){return this._text.text;},function(T$L){this.text=T$L;}),T$y(0,T$L,"style",function(){return this._style;}),T$y(0,T$L,"text",function(){return this._text.text;},function(T$L){this._text==T$s._EMPTYTEXT?this._text={text:T$L,words:null}:(this._text.text=T$L,this._text.words&&(this._text.words.length=0)),T$E.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref();}),T$y(0,T$L,"parent",T$m.prototype._$get_parent,function(T$L){if(T$L instanceof laya.html.dom.HTMLElement){var T$s=T$L;this.URI||(this.URI=T$s.URI),this.style.inherit(T$s.style);}T$x.superSet(T$r,this,"parent",T$L);}),T$y(0,T$L,"className",null,function(T$L){this.style.attrs(T$Y.document.styleSheets["."+T$L]);}),T$s.fillWords=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){T$L.graphics.clear();for(var T$y=0,T$F=T$s.length;T$y<T$F;T$y++){var T$o=T$s[T$y];T$L.graphics.fillText(T$o.char,T$o.x+T$m,T$o.y+T$x,T$w,T$O,"left",T$v);}},T$s._EMPTYTEXT={text:null,words:null},T$s;}(T$r),T$s=(function(T$L){function T$s(){T$s.__super.call(this),this.style.lineElement=!0,this.style.block=!0;}T$v(T$s,"laya.html.dom.HTMLBrElement",T$H);}(),function(T$L){function T$s(){this.contextHeight=NaN,this.contextWidth=NaN,T$s.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200;}T$v(T$s,"laya.html.dom.HTMLDivElement",T$L);var T$m=T$s.prototype;return T$m.appendHTML=function(T$L){T$b.parse(this,T$L,this.URI),this.layout();},T$m._addChildsToLayout=function(T$s){var T$L=this._getWords();if(null==T$L&&0==this._childs.length)return!1;T$L&&T$L.forEach(function(T$L){T$s.push(T$L);});for(var T$m=!0,T$x=0,T$w=this._childs.length;T$x<T$w;T$x++){var T$O=this._childs[T$x];T$m?T$m=!1:T$s.push(null),T$O._addToLayout(T$s);}return!0;},T$m._addToLayout=function(T$L){this.layout();},T$m.layout=function(){if(this.style){this.style._type|=512;var T$L=T$S.layout(this);if(T$L){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new T$V());var T$s=this._$P.mHtmlBounds;T$s.x=T$s.y=0,T$s.width=this.contextWidth=T$L[0],T$s.height=this.contextHeight=T$L[1],this.setBounds(T$s);}}},T$y(0,T$m,"height",function(){return this._height?this._height:this.contextHeight;},T$L.prototype._$set_height),T$y(0,T$m,"innerHTML",null,function(T$L){this.destroyChildren(),this.appendHTML(T$L);}),T$y(0,T$m,"width",function(){return this._width?this._width:this.contextWidth;},function(T$L){var T$s=!1;T$s=0===T$L?T$L!=this._width:T$L!=this.width,T$x.superSet(T$H,this,"width",T$L),T$s&&this.layout();}),T$s;}(T$H)),T$Y=function(T$L){function T$s(){this.all=new Array(),this.styleSheets=T$F.styleSheets,T$s.__super.call(this);}T$v(T$s,"laya.html.dom.HTMLDocument",T$H);var T$m=T$s.prototype;return T$m.getElementById=function(T$L){return this.all[T$L];},T$m.setElementById=function(T$L,T$s){this.all[T$L]=T$s;},T$w(T$s,["document",function(){return this.document=new T$s();}]),T$s;}();(function(T$L){function T$s(){this._tex=null,this._url=null,this._renderArgs=[],T$s.__super.call(this),this.style.block=!0;}T$v(T$s,"laya.html.dom.HTMLImageElement",T$H);var T$m=T$s.prototype;T$m._addToLayout=function(T$L){!this._style.absolute&&T$L.push(this);},T$m.render=function(T$L,T$s,T$m){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(T$T.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,T$L.ctx.drawTexture2(T$s,T$m,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs));},T$m.layaoutCallNative=function(){var T$L=0;if(this._childs&&0<(T$L=this._childs.length))for(var T$s=0;T$s<T$L;T$s++)this._childs[T$s].layaoutCallNative&&this._childs[T$s].layaoutCallNative();},T$y(0,T$m,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width;},function(T$L){this._width!==T$L&&(this._width=T$L,this._style.width=T$L,this.repaint());}),T$y(0,T$m,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height;},function(T$L){this._height!==T$L&&(this._height=T$L,this._style.height=T$L,this.repaint());}),T$m.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),T$o.clearCache(this,this._url),this._tex=null),T$H.prototype.destroy.call(this);},T$m.onloaded=function(){var T$L=this._style;T$L&&!T$L.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),T$L&&!T$L.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),T$E.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint();},T$m._loadImageComplete=function(T$L,T$s,T$m){if(!this._destroyed)if(null!=T$m){if(T$m instanceof ArrayBuffer){var T$x=new DataView(T$m);new laya.webgl.resource.WebGLImage(new Uint8Array(T$m,8),T$L,0,!1,T$x.getUint32(0),T$x.getUint32(4));this.onloaded();}else if(T$m instanceof T$j)T$o.imgMgrSet[T$L]=T$s,T$O.imgMgrLock(T$L,T$o.imgMgrSet[T$L]),this._url=T$L,this._tex=T$m,T$o.keepCache(this,T$L),T$o.cacheRes(T$L,this._tex),this.onloaded();else{var T$w=-1!=T$L.indexOf(".png",T$L.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(T$m,T$L,T$w,!1,T$m.width,T$m.height);this.onloaded();}}else this.event("error","Load image failed");},T$y(0,T$m,"src",null,function(T$L){(T$L=this.formatURL(T$L),this._url!=T$L)&&(null!=this._tex&&(T$o.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=T$L,(this._tex=T$o.getRes(T$L))?(T$o.keepCache(this,T$L),this.onloaded()):T$O.imgMgrLoad(T$L,this._loadImageComplete.bind(this),2,!1));});})(),function(T$L){function T$s(){this.type=null,T$s.__super.call(this),this.visible=!1;}T$v(T$s,"laya.html.dom.HTMLLinkElement",T$L);var T$m=T$s.prototype;T$m._onload=function(T$L){switch(this.type){case"text/css":T$F.parseCSS(T$L,this.URI);}},T$y(0,T$m,"href",T$L.prototype._$get_href,function(T$L){var T$s=this;T$L=this.formatURL(T$L),this.URI=new T$D(T$L);var T$m=new T$o();T$m.once("complete",null,function(T$L){T$s._onload(T$L);}),T$m.load(T$L,"text");}),T$s._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g");}(T$H),function(T$L){function T$s(){T$s.__super.call(this),this.visible=!1;}T$v(T$s,"laya.html.dom.HTMLStyleElement",T$L),T$y(0,T$s.prototype,"text",T$L.prototype._$get_text,function(T$L){T$F.parseCSS(T$L,null);});}(T$H),function(T$L){function T$s(){T$s.__super.call(this),this._getCSSStyle().valign="middle";}T$v(T$s,"laya.html.dom.HTMLIframeElement",T$L),T$y(0,T$s.prototype,"href",T$L.prototype._$get_href,function(T$m){var T$x=this;T$m=this.formatURL(T$m);var T$L=new T$o();T$L.once("complete",null,function(T$L){var T$s=T$x.URI;T$x.URI=new T$D(T$m),T$x.innerHTML=T$L,!T$s||(T$x.URI=T$s);}),T$L.load(T$m,"text");});}(T$s);}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$L,T$s){"use strict";for(var T$m in Object.defineProperty(T$s,"__esModule",{value:!0}),Laya){var T$x=Laya[T$m];T$x&&T$x.__isclass&&(T$s[T$m]=T$x);}}),function(T$w,T$L,T$T){T$T.un,T$T.uns;var T$x=T$T.static,T$O=T$T.class,T$v=T$T.getset,T$m=(T$T.__newvec,laya.display.Animation),T$j=(laya.utils.Browser,laya.utils.ClassUtils),T$y=laya.filters.ColorFilter,T$F=laya.utils.Ease,T$o=laya.events.Event,T$V=(laya.events.EventDispatcher,laya.display.css.Font),T$C=laya.display.FrameAnimation,T$s=laya.display.Graphics,T$E=laya.utils.Handler,T$r=laya.display.Input,T$e=laya.net.Loader,T$u=(laya.display.Node,laya.maths.Point),T$D=laya.maths.Rectangle,T$b=laya.renders.Render,T$S=laya.display.Sprite,T$H=laya.display.Text,T$Y=laya.resource.Texture,T$a=laya.utils.Tween,T$f=laya.utils.Utils,T$_=laya.utils.WeakObject;T$T.interface("laya.ui.IItem"),T$T.interface("laya.ui.ISelect"),T$T.interface("laya.ui.IRender"),T$T.interface("laya.ui.IComponent"),T$T.interface("laya.ui.IBox","IComponent");var T$Q=function(){function T$L(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN;}return T$O(T$L,"laya.ui.LayoutStyle"),T$x(T$L,["EMPTY",function(){return this.EMPTY=new T$L();}]),T$L;}(),T$N=function(){function T$L(){}return T$O(T$L,"laya.ui.Styles"),T$L.labelColor="#000000",T$L.buttonStateNum=3,T$L.scrollBarMinNum=15,T$L.scrollBarDelayTime=500,T$x(T$L,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0];},"labelPadding",function(){return this.labelPadding=[2,2,2,2];},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3];},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"];},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"];}]),T$L;}(),T$i=function(){function T$w(){}return T$O(T$w,"laya.ui.UIUtils"),T$w.fillArray=function(T$L,T$s,T$m){var T$x=T$L.concat();if(T$s)for(var T$w=T$s.split(","),T$O=0,T$v=Math.min(T$x.length,T$w.length);T$O<T$v;T$O++){var T$y=T$w[T$O];T$x[T$O]="true"==T$y||"false"!=T$y&&T$y,null!=T$m&&(T$x[T$O]=T$m(T$y));}return T$x;},T$w.toColor=function(T$L){return T$f.toHexColor(T$L);},T$w.gray=function(T$L,T$s){void 0===T$s&&(T$s=!0),T$s?T$w.addFilter(T$L,T$w.grayFilter):T$w.clearFilter(T$L,T$y);},T$w.addFilter=function(T$L,T$s){var T$m=T$L.filters||[];T$m.push(T$s),T$L.filters=T$m;},T$w.clearFilter=function(T$L,T$s){var T$m=T$L.filters;if(null!=T$m&&0<T$m.length){for(var T$x=T$m.length-1;-1<T$x;T$x--){var T$w=T$m[T$x];T$T.__typeof(T$w,T$s)&&T$m.splice(T$x,1);}T$L.filters=T$m;}},T$w._getReplaceStr=function(T$L){return T$w.escapeSequence[T$L];},T$w.adptString=function(T$L){return T$L.replace(/\\(\w)/g,T$w._getReplaceStr);},T$w.getBindFun=function(T$L){var T$s=T$w._funMap.get(T$L);if(null==T$s){var T$m='"'+T$L+'"',T$x="(function(data){if(data==null)return;with(data){try{\nreturn "+(T$m=T$m.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";T$s=T$T._runScript(T$x),T$w._funMap.set(T$L,T$s);}return T$s;},T$x(T$w,["grayFilter",function(){return this.grayFilter=new T$y([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0]);},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"};},"_funMap",function(){return this._funMap=new T$_();}]),T$w;}(),T$U=function(){function T$L(){}return T$O(T$L,"UIConfig"),T$L.touchScrollEnable=!0,T$L.mouseWheelEnable=!0,T$L.showButtons=!0,T$L.popupBgColor="#000000",T$L.popupBgAlpha=.5,T$L.closeDialogOnSide=!0,T$L;}(),T$c=function(T$m){function T$D(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,T$D.__super.call(this),this._weakKeys=[];}T$O(T$D,"laya.ui.AutoBitmap",T$m);var T$L=T$D.prototype;return T$L.destroy=function(){if(T$e.clearObject(this,this._weakKey),this._weakKeys){for(var T$L=0,T$s=this._weakKeys.length;T$L<T$s;++T$L)T$e.clearObject(this,this._weakKeys[T$L]);this._weakKeys=null;}T$m.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null;},T$L._setChanged=function(){this._isChanged||(this._isChanged=!0,T$T.timer.callLater(this,this.changeSource));},T$L.changeSource=function(){this._isChanged=!1;var T$L=this._source;if(T$L&&T$L.bitmap){var T$s=this.width,T$m=this.height,T$x=this._sizeGrid,T$w=T$L.sourceWidth,T$O=T$L.sourceHeight;if(!T$x||T$w===T$s&&T$O===T$m)this.cleanByTexture(T$L,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,T$s,T$m);else{T$e.clearObject(this,this._weakKey),T$L.$_GID||(T$L.$_GID=T$f.getGID());var T$v=T$L.$_GID+"."+T$s+"."+T$m+"."+T$x.join("."),T$y=T$e.findObject(T$v);if(T$f.isOKCmdList(T$y))return this._weakKey=T$v,T$e.keepObject(this,this._weakKey),void(this.cmds=T$y);this.clear();var T$F,T$o,T$V=T$x[0],T$C=T$x[1],T$E=T$x[2],T$r=T$x[3],T$u=T$x[4],T$T=!1;if(T$s==T$w&&(T$r=T$C=0),T$m==T$O&&(T$V=T$E=0),T$s<T$r+T$C){var T$j=T$s;T$T=!0,T$s=T$r+T$C,this.save(),this.clipRect(0,0,T$j,T$m);}T$r&&T$V&&(T$F=T$D.getTexture(T$L,0,0,T$r,T$V),T$o=this._weakKeys[0],T$F?(T$o!=T$F.weakKey&&(T$e.clearObject(this,T$o),T$e.keepObject(this,T$F.weakKey),this._weakKeys[0]=T$F.weakKey),this.drawTexture(T$F,0,0,T$r,T$V)):(T$e.clearObject(this,T$o),this._weakKeys[0]="")),T$C&&T$V&&(T$F=T$D.getTexture(T$L,T$w-T$C,0,T$C,T$V),T$o=this._weakKeys[1],T$F?(T$o!=T$F.weakKey&&(T$e.clearObject(this,T$o),T$e.keepObject(this,T$F.weakKey),this._weakKeys[1]=T$F.weakKey),this.drawTexture(T$F,T$s-T$C,0,T$C,T$V)):(T$e.clearObject(this,T$o),this._weakKeys[1]="")),T$r&&T$E&&(T$F=T$D.getTexture(T$L,0,T$O-T$E,T$r,T$E),T$o=this._weakKeys[2],T$F?(T$o!=T$F.weakKey&&(T$e.clearObject(this,T$o),T$e.keepObject(this,T$F.weakKey),this._weakKeys[2]=T$F.weakKey),this.drawTexture(T$F,0,T$m-T$E,T$r,T$E)):(T$e.clearObject(this,T$o),this._weakKeys[2]="")),T$C&&T$E&&(T$F=T$D.getTexture(T$L,T$w-T$C,T$O-T$E,T$C,T$E),T$o=this._weakKeys[3],T$F?(T$o!=T$F.weakKey&&(T$e.clearObject(this,T$o),T$e.keepObject(this,T$F.weakKey),this._weakKeys[3]=T$F.weakKey),this.drawTexture(T$F,T$s-T$C,T$m-T$E,T$C,T$E)):(T$e.clearObject(this,T$o),this._weakKeys[3]="")),T$V&&(T$F=T$D.getTexture(T$L,T$r,0,T$w-T$r-T$C,T$V),T$o=this._weakKeys[4],T$F?(T$o!=T$F.weakKey&&(T$e.clearObject(this,T$o),T$e.keepObject(this,T$F.weakKey),this._weakKeys[4]=T$F.weakKey),this.drawBitmap(T$u,T$F,T$r,0,T$s-T$r-T$C,T$V)):(T$e.clearObject(this,T$o),this._weakKeys[4]="")),T$E&&(T$F=T$D.getTexture(T$L,T$r,T$O-T$E,T$w-T$r-T$C,T$E),T$o=this._weakKeys[5],T$F?(T$o!=T$F.weakKey&&(T$e.clearObject(this,T$o),T$e.keepObject(this,T$F.weakKey),this._weakKeys[5]=T$F.weakKey),this.drawBitmap(T$u,T$F,T$r,T$m-T$E,T$s-T$r-T$C,T$E)):(T$e.clearObject(this,T$o),this._weakKeys[5]="")),T$r&&(T$F=T$D.getTexture(T$L,0,T$V,T$r,T$O-T$V-T$E),T$o=this._weakKeys[6],T$F?(T$o!=T$F.weakKey&&(T$e.clearObject(this,T$o),T$e.keepObject(this,T$F.weakKey),this._weakKeys[6]=T$F.weakKey),this.drawBitmap(T$u,T$F,0,T$V,T$r,T$m-T$V-T$E)):(T$e.clearObject(this,T$o),this._weakKeys[6]="")),T$C&&(T$F=T$D.getTexture(T$L,T$w-T$C,T$V,T$C,T$O-T$V-T$E),T$o=this._weakKeys[7],T$F?(T$o!=T$F.weakKey&&(T$e.clearObject(this,T$o),T$e.keepObject(this,T$F.weakKey),this._weakKeys[7]=T$F.weakKey),this.drawBitmap(T$u,T$F,T$s-T$C,T$V,T$C,T$m-T$V-T$E)):(T$e.clearObject(this,T$o),this._weakKeys[7]="")),T$F=T$D.getTexture(T$L,T$r,T$V,T$w-T$r-T$C,T$O-T$V-T$E),T$o=this._weakKeys[8],T$F?(T$o!=T$F.weakKey&&(T$e.clearObject(this,T$o),T$e.keepObject(this,T$F.weakKey),this._weakKeys[8]=T$F.weakKey),this.drawBitmap(T$u,T$F,T$r,T$V,T$s-T$r-T$C,T$m-T$V-T$E)):(T$e.clearObject(this,T$o),this._weakKeys[8]=""),T$T&&this.restore(),this.autoCacheCmd&&!T$b.isConchApp&&(T$e.saveObject(T$v,this.cmds,null),this._weakKey=T$v,T$e.keepObject(this,this._weakKey));}this._repaint();}},T$L.drawBitmap=function(T$L,T$s,T$m,T$x,T$w,T$O){void 0===T$w&&(T$w=0),void 0===T$O&&(T$O=0),T$w<.1||T$O<.1||(!T$L||T$s.width==T$w&&T$s.height==T$O?this.drawTexture(T$s,T$m,T$x,T$w,T$O):this.fillTexture(T$s,T$m,T$x,T$w,T$O));},T$L.clear=function(T$L){void 0===T$L&&(T$L=!0),T$m.prototype.clear.call(this,!1);},T$v(0,T$L,"sizeGrid",function(){return this._sizeGrid;},function(T$L){this._sizeGrid=T$L,this._setChanged();}),T$v(0,T$L,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0;},function(T$L){this._width!=T$L&&(this._width=T$L,this._setChanged());}),T$v(0,T$L,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0;},function(T$L){this._height!=T$L&&(this._height=T$L,this._setChanged());}),T$v(0,T$L,"source",function(){return this._source;},function(T$L){T$L?(this._source=T$L,this._setChanged()):(this._source=null,this.clear());}),T$D.getTexture=function(T$L,T$s,T$m,T$x,T$w){T$x<=0&&(T$x=1),T$w<=0&&(T$w=1),T$L.$_GID||(T$L.$_GID=T$f.getGID());var T$O=T$L.$_GID+"."+T$s+"."+T$m+"."+T$x+"."+T$w,T$v=T$e.findObject(T$O);if((!T$v||!T$v.source)&&(T$v=T$Y.createFromTexture(T$L,T$s,T$m,T$x,T$w))){if(T$L.alphaTexture){var T$y=T$L.width/T$L.alphaTexture.width;T$v.alphaTexture=T$Y.createFromTexture(T$L.alphaTexture,T$s/T$y,T$m/T$y,T$x/T$y,T$w/T$y);}T$e.saveObject(T$O,T$v),T$v.weakKey=T$O;}return T$v;},T$D;}(T$s),T$h=(function(T$L){function T$s(){T$s.__super.call(this);}T$O(T$s,"laya.ui.UIEvent",T$o),T$s.SHOW_TIP="showtip",T$s.HIDE_TIP="hidetip";}(),function(T$s){function T$L(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,T$L.__super.call(this),this._layout=T$Q.EMPTY,this.preinitialize(),this.createChildren(),this.initialize();}T$O(T$L,"laya.ui.Component",T$s);var T$m=T$L.prototype;return T$T.imps(T$m,{"laya.ui.IComponent":!0}),T$m.destroy=function(T$L){void 0===T$L&&(T$L=!0),T$s.prototype.destroy.call(this,T$L),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null;},T$m.preinitialize=function(){},T$m.createChildren=function(){},T$m.initialize=function(){},T$m.callLater=function(T$L,T$s){T$T.timer.callLater(this,T$L,T$s);},T$m.runCallLater=function(T$L){T$T.timer.runCallLater(this,T$L);},T$m.commitMeasure=function(){},T$m.changeSize=function(){this.event("resize");},T$m.getLayout=function(){return this._layout===T$Q.EMPTY&&(this._layout=new T$Q()),this._layout;},T$m._setLayoutEnabled=function(T$L){this._layout&&this._layout.enable!=T$L&&(this._layout.enable=T$L,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded());},T$m.onRemoved=function(){this.parent.off("resize",this,this.onCompResize);},T$m.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY();},T$m.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY());},T$m.resetLayoutX=function(){var T$L=this._layout;if(isNaN(T$L.anchorX)||(this.pivotX=T$L.anchorX*this.width),this.layoutEnabled){var T$s=this.parent;T$s&&(isNaN(T$L.centerX)?isNaN(T$L.left)?isNaN(T$L.right)||(this.x=Math.round(T$s.width-this.displayWidth-T$L.right+this.pivotX*this.scaleX)):(this.x=Math.round(T$L.left+this.pivotX*this.scaleX),isNaN(T$L.right)||(this.width=(T$s._width-T$L.left-T$L.right)/(this.scaleX||.01))):this.x=Math.round(.5*(T$s.width-this.displayWidth)+T$L.centerX+this.pivotX*this.scaleX));}},T$m.resetLayoutY=function(){var T$L=this._layout;if(isNaN(T$L.anchorY)||(this.pivotY=T$L.anchorY*this.height),this.layoutEnabled){var T$s=this.parent;T$s&&(isNaN(T$L.centerY)?isNaN(T$L.top)?isNaN(T$L.bottom)||(this.y=Math.round(T$s.height-this.displayHeight-T$L.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(T$L.top+this.pivotY*this.scaleY),isNaN(T$L.bottom)||(this.height=(T$s._height-T$L.top-T$L.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(T$s.height-this.displayHeight)+T$L.centerY+this.pivotY*this.scaleY));}},T$m.onMouseOver=function(T$L){T$T.stage.event("showtip",this._toolTip);},T$m.onMouseOut=function(T$L){T$T.stage.event("hidetip",this._toolTip);},T$v(0,T$m,"displayWidth",function(){return this.width*this.scaleX;}),T$v(0,T$m,"width",function(){return this._width?this._width:this.measureWidth;},function(T$L){this._width!=T$L&&(this._width=T$L,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX());}),T$v(0,T$m,"measureWidth",function(){var T$L=0;this.commitMeasure();for(var T$s=this.numChildren-1;-1<T$s;T$s--){var T$m=this.getChildAt(T$s);T$m.visible&&(T$L=Math.max(T$m.x+T$m.width*T$m.scaleX,T$L));}return T$L;}),T$v(0,T$m,"displayHeight",function(){return this.height*this.scaleY;}),T$v(0,T$m,"height",function(){return this._height?this._height:this.measureHeight;},function(T$L){this._height!=T$L&&(this._height=T$L,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY());}),T$v(0,T$m,"dataSource",function(){return this._dataSource;},function(T$L){for(var T$s in this._dataSource=T$L,this._dataSource)this.hasOwnProperty(T$s)&&"function"!=typeof this[T$s]&&(this[T$s]=this._dataSource[T$s]);}),T$v(0,T$m,"scaleY",T$s.prototype._$get_scaleY,function(T$L){T$T.superGet(T$S,this,"scaleY")!=T$L&&(T$T.superSet(T$S,this,"scaleY",T$L),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY());}),T$v(0,T$m,"measureHeight",function(){var T$L=0;this.commitMeasure();for(var T$s=this.numChildren-1;-1<T$s;T$s--){var T$m=this.getChildAt(T$s);T$m.visible&&(T$L=Math.max(T$m.y+T$m.height*T$m.scaleY,T$L));}return T$L;}),T$v(0,T$m,"scaleX",T$s.prototype._$get_scaleX,function(T$L){T$T.superGet(T$S,this,"scaleX")!=T$L&&(T$T.superSet(T$S,this,"scaleX",T$L),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX());}),T$v(0,T$m,"top",function(){return this._layout.top;},function(T$L){T$L!=this._layout.top&&(this.getLayout().top=T$L,this._setLayoutEnabled(!0)),this.resetLayoutY();}),T$v(0,T$m,"bottom",function(){return this._layout.bottom;},function(T$L){T$L!=this._layout.bottom&&(this.getLayout().bottom=T$L,this._setLayoutEnabled(!0)),this.resetLayoutY();}),T$v(0,T$m,"left",function(){return this._layout.left;},function(T$L){T$L!=this._layout.left&&(this.getLayout().left=T$L,this._setLayoutEnabled(!0)),this.resetLayoutX();}),T$v(0,T$m,"right",function(){return this._layout.right;},function(T$L){T$L!=this._layout.right&&(this.getLayout().right=T$L,this._setLayoutEnabled(!0)),this.resetLayoutX();}),T$v(0,T$m,"centerX",function(){return this._layout.centerX;},function(T$L){T$L!=this._layout.centerX&&(this.getLayout().centerX=T$L,this._setLayoutEnabled(!0)),this.resetLayoutX();}),T$v(0,T$m,"centerY",function(){return this._layout.centerY;},function(T$L){T$L!=this._layout.centerY&&(this.getLayout().centerY=T$L,this._setLayoutEnabled(!0)),this.resetLayoutY();}),T$v(0,T$m,"anchorX",function(){return this._layout.anchorX;},function(T$L){T$L!=this._layout.anchorX&&(this.getLayout().anchorX=T$L,this._setLayoutEnabled(!0)),this.resetLayoutX();}),T$v(0,T$m,"anchorY",function(){return this._layout.anchorY;},function(T$L){T$L!=this._layout.anchorY&&(this.getLayout().anchorY=T$L,this._setLayoutEnabled(!0)),this.resetLayoutY();}),T$v(0,T$m,"tag",function(){return this._tag;},function(T$L){this._tag=T$L;}),T$v(0,T$m,"toolTip",function(){return this._toolTip;},function(T$L){this._toolTip!=T$L&&(null!=(this._toolTip=T$L)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)));}),T$v(0,T$m,"comXml",function(){return this._comXml;},function(T$L){this._comXml=T$L;}),T$v(0,T$m,"gray",function(){return this._gray;},function(T$L){T$L!==this._gray&&(this._gray=T$L,T$i.gray(this,T$L));}),T$v(0,T$m,"disabled",function(){return this._disabled;},function(T$L){T$L!==this._disabled&&(this.gray=this._disabled=T$L,this.mouseEnabled=!T$L);}),T$L;}(T$S)),T$G=function(T$L){function T$s(){this.lockLayer=null,this.popupEffect=function(T$L){T$L.scale(1,1),T$a.from(T$L,{x:T$T.stage.width/2,y:T$T.stage.height/2,scaleX:0,scaleY:0},300,T$F.backOut,T$E.create(this,this.doOpen,[T$L]));},this.closeEffect=function(T$L,T$s){T$a.to(T$L,{x:T$T.stage.width/2,y:T$T.stage.height/2,scaleX:0,scaleY:0},300,T$F.strongOut,T$E.create(this,this.doClose,[T$L,T$s]));},T$s.__super.call(this),this.maskLayer=new T$S(),this.popupEffectHandler=T$E.create(this,this.popupEffect,null,!1),this.closeEffectHandler=T$E.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,T$T.stage.addChild(this),T$T.stage.on("resize",this,this._onResize),T$U.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null);}T$O(T$s,"laya.ui.DialogManager",T$S);var T$m=T$s.prototype;return T$m._closeOnSide=function(){var T$L=this.getChildAt(this.numChildren-1);T$L instanceof laya.ui.Dialog&&T$L.close("side");},T$m.setLockView=function(T$L){this.lockLayer||(this.lockLayer=new T$R(),this.lockLayer.mouseEnabled=!0,this.lockLayer.size(T$T.stage.width,T$T.stage.height)),this.lockLayer.removeChildren(),T$L&&(T$L.centerX=T$L.centerY=0,this.lockLayer.addChild(T$L));},T$m._onResize=function(T$L){var T$s=this.maskLayer.width=T$T.stage.width,T$m=this.maskLayer.height=T$T.stage.height;this.lockLayer&&this.lockLayer.size(T$s,T$m),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,T$s,T$m,T$U.popupBgColor),this.maskLayer.alpha=T$U.popupBgAlpha;for(var T$x=this.numChildren-1;-1<T$x;T$x--){var T$w=this.getChildAt(T$x);T$w.popupCenter&&this._centerDialog(T$w);}},T$m._centerDialog=function(T$L){T$L.x=Math.round((T$T.stage.width-T$L.width>>1)+T$L.pivotX),T$L.y=Math.round((T$T.stage.height-T$L.height>>1)+T$L.pivotY);},T$m.open=function(T$L,T$s,T$m){void 0===T$s&&(T$s=!1),void 0===T$m&&(T$m=!1),T$s&&this._closeAll(),T$L.popupCenter&&this._centerDialog(T$L),this.addChild(T$L),(T$L.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),T$m&&null!=T$L.popupEffect?T$L.popupEffect.runWith(T$L):this.doOpen(T$L),this.event("open");},T$m.doOpen=function(T$L){T$L.onOpened();},T$m.lock=function(T$L){this.lockLayer&&(T$L?this.addChild(this.lockLayer):this.lockLayer.removeSelf());},T$m.close=function(T$L,T$s,T$m){void 0===T$m&&(T$m=!1),T$m&&null!=T$L.closeEffect?T$L.closeEffect.runWith([T$L,T$s]):this.doClose(T$L,T$s),this.event("close");},T$m.doClose=function(T$L,T$s){T$L.removeSelf(),T$L.isModal&&this._checkMask(),T$L.closeHandler&&T$L.closeHandler.runWith(T$s),T$L.onClosed(T$s);},T$m.closeAll=function(){this._closeAll(),this.event("close");},T$m._closeAll=function(){for(var T$L=this.numChildren-1;-1<T$L;T$L--){var T$s=this.getChildAt(T$L);T$s&&null!=T$s.close&&this.doClose(T$s);}},T$m.getDialogsByGroup=function(T$L){for(var T$s=[],T$m=this.numChildren-1;-1<T$m;T$m--){var T$x=this.getChildAt(T$m);T$x&&T$x.group===T$L&&T$s.push(T$x);}return T$s;},T$m.closeByGroup=function(T$L){for(var T$s=[],T$m=this.numChildren-1;-1<T$m;T$m--){var T$x=this.getChildAt(T$m);T$x&&T$x.group===T$L&&(T$x.close(),T$s.push(T$x));}return T$s;},T$m._checkMask=function(){this.maskLayer.removeSelf();for(var T$L=this.numChildren-1;-1<T$L;T$L--){var T$s=this.getChildAt(T$L);if(T$s&&T$s.isModal)return void this.addChildAt(this.maskLayer,T$L);}},T$s;}(),T$R=function(T$L){function T$s(){T$s.__super.call(this);}T$O(T$s,"laya.ui.Box",T$L);var T$m=T$s.prototype;return T$T.imps(T$m,{"laya.ui.IBox":!0}),T$v(0,T$m,"dataSource",T$L.prototype._$get_dataSource,function(T$L){for(var T$s in this._dataSource=T$L){var T$m=this.getChildByName(T$s);T$m?T$m.dataSource=T$L[T$s]:this.hasOwnProperty(T$s)&&"function"!=typeof this[T$s]&&(this[T$s]=T$L[T$s]);}}),T$s;}(T$h),T$A=function(T$s){function T$m(T$L,T$s){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,T$m.__super.call(this),this._labelColors=T$N.buttonLabelColors,this._stateNum=T$N.buttonStateNum,void 0===T$s&&(T$s=""),this.skin=T$L,this.label=T$s;}T$O(T$m,"laya.ui.Button",T$s);var T$L=T$m.prototype;return T$T.imps(T$L,{"laya.ui.ISelect":!0}),T$L.destroy=function(T$L){this.clearEvent(),T$e.clearCache(this,this._skin),T$e.clearObject(this,this._weakKey),void 0===T$L&&(T$L=!0),T$s.prototype.destroy.call(this,T$L),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(T$L),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null;},T$L.clearEvent=function(){this._skin&&T$w.atalsNotify&&T$w.atalsNotify.off(this._skin,this,this._setBtnSource);},T$L.createChildren=function(){this.graphics=this._bitmap=new T$c();},T$L.createText=function(){this._text||(this._text=new T$H(),this._text.overflow=T$H.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height);},T$L.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1);},T$L.onMouse=function(T$L){if(!1!==this.toggle||!this._selected)return"click"===T$L.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=T$m.stateMap[T$L.type]));},T$L.changeClips=function(){var T$L=T$e.getRes(this._skin);if(T$L)if(this._skin&&""!=this._skin){T$e.clearObject(this,this._weakKey);var T$s=T$L.sourceWidth,T$m=T$L.sourceHeight/this._stateNum;T$L.$_GID||(T$L.$_GID=T$f.getGID());var T$x=T$L.$_GID+"-"+this._stateNum,T$w=T$e.findObject(T$x);if(T$f.isOkTextureList(T$w)||(T$w=null),T$w)this._weakKey=T$x,T$e.keepObject(this,this._weakKey),this._sources=T$w;else{if(this._sources=[],1===this._stateNum)this._sources.push(T$L);else for(var T$O=0;T$O<this._stateNum;T$O++){var T$v=T$Y.createFromTexture(T$L,0,T$m*T$O,T$s,T$m);if(T$L.alphaTexture){var T$y=T$L.width/T$L.alphaTexture.width;T$v.alphaTexture=T$Y.createFromTexture(T$L.alphaTexture,0/T$y,T$m*T$O/T$y,T$s/T$y,T$m/T$y);}this._sources.push(T$v);}T$e.saveObject(T$x,this._sources),this._weakKey=T$x,T$e.keepObject(this,this._weakKey);}this._autoSize?(this._bitmap.width=this._width||T$s,this._bitmap.height=this._height||T$m,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=T$s);}else console.warn("lose skin ",this._skin,this.name,this.__className);},T$L.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var T$L=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[T$L]),this.label&&(this._text.color=this._labelColors[T$L],this._strokeColors&&(this._text.strokeColor=this._strokeColors[T$L]));},T$L._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState));},T$v(0,T$L,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor;},function(T$L){this.createText(),this._text.strokeColor=T$L;}),T$v(0,T$L,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height;}),T$v(0,T$L,"skin",function(){return this._skin;},function(T$L){if(this._skin!=T$L)if(this.clearEvent(),T$e.clearCache(this,this._skin),this._skin=T$L,T$e.keepCache(this,this._skin),T$e.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var T$s=T$w.resAtalsObj&&T$w.resAtalsObj[this._skin];T$s?(T$w.atalsNotify&&T$w.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=T$s.sourceW),0==this.height&&(this.height=T$s.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className);}}),T$L._setBtnSource=function(T$L,T$s){T$L===this._skin&&T$s&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent());},T$v(0,T$L,"state",function(){return this._state;},function(T$L){this._state!=T$L&&(this._state=T$L,this._setStateChanged());}),T$v(0,T$L,"text",function(){return this.createText(),this._text;}),T$v(0,T$L,"stateNum",function(){return this._stateNum;},function(T$L){"string"==typeof T$L&&(T$L=parseInt(T$L)),this._stateNum!=T$L&&(this._stateNum=T$L<1?1:3<T$L?3:T$L,this.callLater(this.changeClips));}),T$v(0,T$L,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):"";},function(T$L){this._strokeColors=T$i.fillArray(T$N.buttonLabelColors,T$L,String),this._setStateChanged();}),T$v(0,T$L,"labelColors",function(){return this._labelColors.join(",");},function(T$L){this._labelColors=T$i.fillArray(T$N.buttonLabelColors,T$L,String),this._setStateChanged();}),T$v(0,T$L,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0));}),T$v(0,T$L,"label",function(){return this._text?this._text.text:null;},function(T$L){(this._text||T$L)&&(this.createText(),this._text.text!=T$L&&(T$L&&!this._text.parent&&this.addChild(this._text),this._text.text=(T$L+"").replace(/\\n/g,"\n"),this._setStateChanged()));}),T$v(0,T$L,"selected",function(){return this._selected;},function(T$L){this._selected!=T$L&&(this._selected=T$L,this.state=this._selected?2:0,this.event("change"));}),T$v(0,T$L,"labelPadding",function(){return this.createText(),this._text.padding.join(",");},function(T$L){this.createText(),this._text.padding=T$i.fillArray(T$N.labelPadding,T$L,Number);}),T$v(0,T$L,"labelSize",function(){return this.createText(),this._text.fontSize;},function(T$L){this.createText(),this._text.fontSize=T$L;}),T$v(0,T$L,"labelStroke",function(){return this.createText(),this._text.stroke;},function(T$L){this.createText(),this._text.stroke=T$L;}),T$v(0,T$L,"labelBold",function(){return this.createText(),this._text.bold;},function(T$L){this.createText(),this._text.bold=T$L;}),T$v(0,T$L,"labelFont",function(){return this.createText(),this._text.font;},function(T$L){this.createText(),this._text.font=T$L;}),T$v(0,T$L,"labelAlign",function(){return this.createText(),this._text.align;},function(T$L){this.createText(),this._text.align=T$L;}),T$v(0,T$L,"clickHandler",function(){return this._clickHandler;},function(T$L){this._clickHandler=T$L;}),T$v(0,T$L,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null;},function(T$L){this._bitmap.sizeGrid=T$i.fillArray(T$N.defaultSizeGrid,T$L,Number);}),T$v(0,T$L,"width",T$s.prototype._$get_width,function(T$L){T$T.superSet(T$h,this,"width",T$L),this._autoSize&&(this._bitmap.width=T$L,this._text&&(this._text.width=T$L));}),T$v(0,T$L,"height",T$s.prototype._$get_height,function(T$L){T$T.superSet(T$h,this,"height",T$L),this._autoSize&&(this._bitmap.height=T$L,this._text&&(this._text.height=T$L));}),T$v(0,T$L,"dataSource",T$s.prototype._$get_dataSource,function(T$L){"number"==typeof(this._dataSource=T$L)||"string"==typeof T$L?this.label=T$L+"":T$T.superSet(T$h,this,"dataSource",T$L);}),T$v(0,T$L,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null;},function(T$L){this._bitmap._offset=T$L?T$i.fillArray([1,1],T$L,Number):[];}),T$x(T$m,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0};}]),T$m;}(T$h),T$g=function(T$s){function T$x(T$L,T$s,T$m){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,T$x.__super.call(this),void 0===T$s&&(T$s=1),void 0===T$m&&(T$m=1),this._clipX=T$s,this._clipY=T$m,this.skin=T$L;}T$O(T$x,"laya.ui.Clip",T$s);var T$L=T$x.prototype;return T$L.destroy=function(T$L){this.clearEvent(),this.clearLoad(),T$e.clearCache(this,this._skin),T$e.clearObject(this,this._weakKey),void 0===T$L&&(T$L=!0),T$s.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null;},T$L.dispose=function(){this.destroy(!0),T$T.loader.clearRes(this._skin);},T$L.createChildren=function(){this.graphics=this._bitmap=new T$c();},T$L._onDisplay=function(T$L){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play();},T$L.changeClip=function(){if(this._clipChanged=!1,this._skin){var T$L=T$e.getRes(this._skin);if(T$L)this.loadComplete(this._skin,T$L);else{if(T$w.resAtalsObj&&T$w.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=T$E.create(this,this.loadComplete,[this._skin]),this._progress=null,T$T.loader.load(this._skin,this._complete,this._progress);}}},T$L.loadComplete=function(T$L,T$s){if(T$L===this._skin&&T$s){T$e.clearObject(this,this._weakKey);var T$m=this._clipWidth||Math.ceil(T$s.sourceWidth/this._clipX),T$x=this._clipHeight||Math.ceil(T$s.sourceHeight/this._clipY),T$w=this._skin+T$m+T$x,T$O=T$e.findObject(T$w);if(T$f.isOkTextureList(T$O)||(T$O=null),T$O)this._weakKey=T$w,T$e.keepObject(this,this._weakKey),this._sources=T$O;else{this._sources=[];for(var T$v=0;T$v<this._clipY;T$v++)for(var T$y=0;T$y<this._clipX;T$y++){var T$F=T$Y.createFromTexture(T$s,T$m*T$y,T$x*T$v,T$m,T$x);if(T$s.alphaTexture){var T$o=T$s.width/T$s.alphaTexture.width;T$F.alphaTexture=T$Y.createFromTexture(T$s.alphaTexture,T$m*T$y/T$o,T$x*T$v/T$o,T$m/T$o,T$x/T$o);}this._sources.push(T$F);}T$e.saveObject(T$w,this._sources),this._weakKey=T$w,T$e.keepObject(this,this._weakKey);}this.index=this._index,this.event("loaded"),this.onCompResize();}},T$L.play=function(T$L,T$s){void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=-1),this._isPlaying=!0,this.index=T$L,this._toIndex=T$s,this._index++,T$T.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay);},T$L._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index);},T$L.stop=function(){this._isPlaying=!1,T$T.timer.clear(this,this._loop),this.event("complete");},T$L._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip));},T$v(0,T$L,"interval",function(){return this._interval;},function(T$L){this._interval!=T$L&&(this._interval=T$L,this._isPlaying&&this.play());}),T$L.clearEvent=function(){this._skin&&T$w.atalsNotify&&T$w.atalsNotify.off(this._skin,this,this._setBtnSource);},T$L.clearLoad=function(){this._skin&&((this._complete||this._progress)&&T$T.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null);},T$v(0,T$L,"skin",function(){return this._skin;},function(T$L){if(this._skin!=T$L)if(this.clearLoad(),this.clearEvent(),T$e.clearCache(this,this._skin),this._skin=T$L){T$e.keepCache(this,this._skin);var T$s=T$e.getRes(T$L),T$m=T$w.resAtalsObj&&T$w.resAtalsObj[this._skin];!T$s&&T$m?T$w.atalsNotify&&T$w.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged();}else this._bitmap.source=null;}),T$L._setBtnSource=function(T$L,T$s){T$L===this._skin&&T$s&&(this.loadComplete(T$L,T$s),this.clearEvent());},T$v(0,T$L,"sources",function(){return this._sources;},function(T$L){this._sources=T$L,this.index=this._index,this.event("loaded");}),T$v(0,T$L,"clipX",function(){return this._clipX;},function(T$L){this._clipX=T$L||1,this._setClipChanged();}),T$v(0,T$L,"clipY",function(){return this._clipY;},function(T$L){this._clipY=T$L||1,this._setClipChanged();}),T$v(0,T$L,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0;}),T$v(0,T$L,"clipWidth",function(){return this._clipWidth;},function(T$L){this._clipWidth=T$L,this._setClipChanged();}),T$v(0,T$L,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null;},function(T$L){this._bitmap.sizeGrid=T$i.fillArray(T$N.defaultSizeGrid,T$L,Number);}),T$v(0,T$L,"group",function(){return this._group;},function(T$L){T$L&&this._skin&&T$e.setGroup(this._skin,T$L),this._group=T$L;}),T$v(0,T$L,"clipHeight",function(){return this._clipHeight;},function(T$L){this._clipHeight=T$L,this._setClipChanged();}),T$v(0,T$L,"width",T$s.prototype._$get_width,function(T$L){T$T.superSet(T$h,this,"width",T$L),this._bitmap.width=T$L;}),T$v(0,T$L,"height",T$s.prototype._$get_height,function(T$L){T$T.superSet(T$h,this,"height",T$L),this._bitmap.height=T$L;}),T$v(0,T$L,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width;}),T$v(0,T$L,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height;}),T$v(0,T$L,"index",function(){return this._index;},function(T$L){this._index=T$L,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[T$L]),this.event("change");}),T$v(0,T$L,"autoPlay",function(){return this._autoPlay;},function(T$L){this._autoPlay!=T$L&&((this._autoPlay=T$L)?this.play():this.stop());}),T$v(0,T$L,"isPlaying",function(){return this._isPlaying;},function(T$L){this._isPlaying=T$L;}),T$v(0,T$L,"dataSource",T$s.prototype._$get_dataSource,function(T$L){"number"==typeof(this._dataSource=T$L)&&Math.floor(T$L)==T$L||"string"==typeof T$L?this.index=parseInt(T$L):T$T.superSet(T$h,this,"dataSource",T$L);}),T$v(0,T$L,"bitmap",function(){return this._bitmap;}),T$x;}(T$h),T$$=function(T$s){function T$L(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,T$L.__super.call(this);}T$O(T$L,"laya.ui.ColorPicker",T$s);var T$m=T$L.prototype;return T$m.destroy=function(T$L){void 0===T$L&&(T$L=!0),T$s.prototype.destroy.call(this,T$L),this._colorPanel&&this._colorPanel.destroy(T$L),this._colorButton&&this._colorButton.destroy(T$L),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null;},T$m.createChildren=function(){this.addChild(this._colorButton=new T$A()),this._colorPanel=new T$R(),this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new T$S()),this._colorPanel.addChild(this._colorBlock=new T$S()),this._colorPanel.addChild(this._colorInput=new T$r());},T$m.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor;},T$m.onPanelMouseDown=function(T$L){T$L.stopPropagation();},T$m.changePanel=function(){this._panelChanged=!1;var T$L=this._colorPanel.graphics;T$L.clear(),T$L.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(T$L=this._colorTiles.graphics).clear();for(var T$s=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],T$m=0;T$m<12;T$m++)for(var T$x=0;T$x<20;T$x++){var T$w=0;T$w=0===T$x?T$s[T$m]:1===T$x?0:51*(((3*T$m+T$x/6)%3<<0)+3*(T$m/6<<0))<<16|T$x%6*51<<8|(T$m<<0)%6*51;var T$O=T$i.toColor(T$w);this._colors.push(T$O);var T$v=T$x*this._gridSize,T$y=T$m*this._gridSize;T$L.drawRect(T$v,T$y,this._gridSize,this._gridSize,T$O,"#000000");}},T$m.onColorButtonClick=function(T$L){this._colorPanel.parent?this.close():this.open();},T$m.open=function(){var T$L=this.localToGlobal(new T$u()),T$s=T$L.x+this._colorPanel.width<=T$T.stage.width?T$L.x:T$T.stage.width-this._colorPanel.width,T$m=T$L.y+this._colorButton.height;T$m=T$m+this._colorPanel.height<=T$T.stage.height?T$m:T$L.y-this._colorPanel.height,this._colorPanel.pos(T$s,T$m),this._colorPanel.zOrder=1001,T$T._currentStage.addChild(this._colorPanel),T$T.stage.on("mousedown",this,this.removeColorBox);},T$m.close=function(){T$T.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf();},T$m.removeColorBox=function(T$L){this.close();},T$m.onColorFieldKeyDown=function(T$L){13==T$L.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),T$L.stopPropagation());},T$m.onColorInputChange=function(T$L){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF");},T$m.onColorTilesClick=function(T$L){this.selectedColor=this.getColorByMouse(),this.close();},T$m.onColorTilesMouseMove=function(T$L){this._colorInput.focus=!1;var T$s=this.getColorByMouse();this._colorInput.text=T$s,this.drawBlock(T$s);},T$m.getColorByMouse=function(){var T$L=this._colorTiles.getMousePoint(),T$s=Math.floor(T$L.x/this._gridSize),T$m=Math.floor(T$L.y/this._gridSize);return this._colors[20*T$m+T$s];},T$m.drawBlock=function(T$L){var T$s=this._colorBlock.graphics;T$s.clear();var T$m=T$L||"#ffffff";T$s.drawRect(0,0,50,20,T$m,this._borderColor),T$L||T$s.drawLine(0,0,50,20,"#ff0000");},T$m.changeColor=function(){var T$L=this.graphics;T$L.clear();var T$s=this._selectedColor||"#000000";T$L.drawRect(0,0,this._colorButton.width,this._colorButton.height,T$s);},T$m._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel));},T$v(0,T$m,"inputBgColor",function(){return this._inputBgColor;},function(T$L){this._inputBgColor=T$L,this._setPanelChanged();}),T$v(0,T$m,"selectedColor",function(){return this._selectedColor;},function(T$L){this._selectedColor!=T$L&&(this._selectedColor=this._colorInput.text=T$L,this.drawBlock(T$L),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",T$o.EMPTY.setTo("change",this,this)));}),T$v(0,T$m,"skin",function(){return this._colorButton.skin;},function(T$L){this._colorButton.skin=T$L,this.changeColor();}),T$v(0,T$m,"bgColor",function(){return this._bgColor;},function(T$L){this._bgColor=T$L,this._setPanelChanged();}),T$v(0,T$m,"borderColor",function(){return this._borderColor;},function(T$L){this._borderColor=T$L,this._setPanelChanged();}),T$v(0,T$m,"inputColor",function(){return this._inputColor;},function(T$L){this._inputColor=T$L,this._setPanelChanged();}),T$L;}(T$h),T$p=function(T$s){function T$m(T$L,T$s){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,T$m.__super.call(this),this._itemColors=T$N.comboBoxItemColors,this.skin=T$L,this.labels=T$s;}T$O(T$m,"laya.ui.ComboBox",T$s);var T$L=T$m.prototype;return T$L.destroy=function(T$L){void 0===T$L&&(T$L=!0),T$s.prototype.destroy.call(this,T$L),this._button&&this._button.destroy(T$L),this._list&&this._list.destroy(T$L),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null;},T$L.createChildren=function(){this.addChild(this._button=new T$A()),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown);},T$L._createList=function(){this._list=new T$K(),this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list);},T$L._setListEvent=function(T$L){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=T$E.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown);},T$L.onListDown=function(T$L){T$L.stopPropagation();},T$L.onScrollBarDown=function(T$L){T$L.stopPropagation();},T$L.onButtonMouseDown=function(T$L){this.callLater(this.switchTo,[!this._isOpen]);},T$L.changeList=function(){this._listChanged=!1;var T$L=this.width-2,T$s=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:T$L,height:this._itemHeight,fontSize:this._itemSize,color:T$s}}]},this._list.repeatY=this._visibleNum,this._list.refresh();},T$L.onlistItemMouse=function(T$L,T$s){var T$m=T$L.type;if("mouseover"===T$m||"mouseout"===T$m){if(this._isCustomList)return;var T$x=this._list.getCell(T$s);if(!T$x)return;var T$w=T$x.getChildByName("label");T$w&&("mouseover"===T$m?(T$w.bgColor=this._itemColors[0],T$w.color=this._itemColors[1]):(T$w.bgColor=null,T$w.color=this._itemColors[2]));}else"click"===T$m&&(this.selectedIndex=T$s,this.isOpen=!1);},T$L.switchTo=function(T$L){this.isOpen=T$L;},T$L.changeOpen=function(){this.isOpen=!this._isOpen;},T$L.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var T$L=this._list.graphics;T$L.clear(),T$L.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3]);}for(var T$s=this._list.array||[],T$m=T$s.length=0,T$x=this._labels.length;T$m<T$x;T$m++)T$s.push({label:this._labels[T$m]});this._list.height=this._listHeight,this._list.array=T$s;},T$L.changeSelected=function(){this._button.label=this.selectedLabel;},T$L._onStageMouseWheel=function(T$L){this._list&&!this._list.contains(T$L.target)&&this.removeList(null);},T$L.removeList=function(T$L){T$T.stage.off("mousedown",this,this.removeList),T$T.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1;},T$v(0,T$L,"selectedIndex",function(){return this._selectedIndex;},function(T$L){this._selectedIndex!=T$L&&(this._selectedIndex=T$L,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[T$o.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex));}),T$v(0,T$L,"measureHeight",function(){return this._button.height;}),T$v(0,T$L,"skin",function(){return this._button.skin;},function(T$L){this._button.skin!=T$L&&(this._button.skin=T$L,this._listChanged=!0);}),T$v(0,T$L,"measureWidth",function(){return this._button.width;}),T$v(0,T$L,"width",T$s.prototype._$get_width,function(T$L){T$T.superSet(T$h,this,"width",T$L),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0;}),T$v(0,T$L,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null;},function(T$L){this.selectedIndex=this._labels.indexOf(T$L);}),T$v(0,T$L,"labels",function(){return this._labels.join(",");},function(T$L){0<this._labels.length&&(this.selectedIndex=-1),T$L?this._labels=T$L.split(","):this._labels.length=0,this._itemChanged=!0;}),T$v(0,T$L,"height",T$s.prototype._$get_height,function(T$L){T$T.superSet(T$h,this,"height",T$L),this._button.height=this._height;}),T$v(0,T$L,"selectHandler",function(){return this._selectHandler;},function(T$L){this._selectHandler=T$L;}),T$v(0,T$L,"visibleNum",function(){return this._visibleNum;},function(T$L){this._visibleNum=T$L,this._listChanged=!0;}),T$v(0,T$L,"labelBold",function(){return this._button.text.bold;},function(T$L){this._button.text.bold=T$L;}),T$v(0,T$L,"itemColors",function(){return String(this._itemColors);},function(T$L){this._itemColors=T$i.fillArray(this._itemColors,T$L,String),this._listChanged=!0;}),T$v(0,T$L,"itemSize",function(){return this._itemSize;},function(T$L){this._itemSize=T$L,this._listChanged=!0;}),T$v(0,T$L,"scrollBar",function(){return this.list.scrollBar;}),T$v(0,T$L,"isOpen",function(){return this._isOpen;},function(T$L){if(this._isOpen!=T$L)if(this._isOpen=T$L,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var T$s=this.localToGlobal(T$u.TEMP.setTo(0,0)),T$m=T$s.y+this._button.height;T$m=T$m+this._listHeight<=T$T.stage.height?T$m:T$s.y-this._listHeight,this._list.pos(T$s.x,T$m),this._list.zOrder=1001,T$T._currentStage.addChild(this._list),T$T.stage.once("mousedown",this,this.removeList),T$T.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex;}else this._list&&this._list.removeSelf();}),T$v(0,T$L,"scrollBarSkin",function(){return this._scrollBarSkin;},function(T$L){this._scrollBarSkin=T$L;}),T$v(0,T$L,"sizeGrid",function(){return this._button.sizeGrid;},function(T$L){this._button.sizeGrid=T$L;}),T$v(0,T$L,"button",function(){return this._button;}),T$v(0,T$L,"list",function(){return this._list||this._createList(),this._list;},function(T$L){T$L&&(T$L.removeSelf(),this._isCustomList=!0,this._list=T$L,this._setListEvent(T$L),this._itemHeight=T$L.getCell(0).height+T$L.spaceY);}),T$v(0,T$L,"dataSource",T$s.prototype._$get_dataSource,function(T$L){"number"==typeof(this._dataSource=T$L)&&Math.floor(T$L)==T$L||"string"==typeof T$L?this.selectedIndex=parseInt(T$L):T$L instanceof Array?this.labels=T$L.join(","):T$T.superSet(T$h,this,"dataSource",T$L);}),T$v(0,T$L,"labelColors",function(){return this._button.labelColors;},function(T$L){this._button.labelColors!=T$L&&(this._button.labelColors=T$L);}),T$v(0,T$L,"labelPadding",function(){return this._button.text.padding.join(",");},function(T$L){this._button.text.padding=T$i.fillArray(T$N.labelPadding,T$L,Number);}),T$v(0,T$L,"labelSize",function(){return this._button.text.fontSize;},function(T$L){this._button.text.fontSize=T$L;}),T$v(0,T$L,"labelFont",function(){return this._button.text.font;},function(T$L){this._button.text.font=T$L;}),T$v(0,T$L,"stateNum",function(){return this._button.stateNum;},function(T$L){this._button.stateNum=T$L;}),T$m;}(T$h),T$Z=function(T$s){function T$m(T$L){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,T$m.__super.call(this),this._showButtons=T$U.showButtons,this._touchScrollEnable=T$U.touchScrollEnable,this._mouseWheelEnable=T$U.mouseWheelEnable,this.skin=T$L,this.max=1;}T$O(T$m,"laya.ui.ScrollBar",T$s);var T$L=T$m.prototype;return T$L.destroy=function(T$L){void 0===T$L&&(T$L=!0),this.stopScroll(),this.target=null,T$s.prototype.destroy.call(this,T$L),this.upButton&&this.upButton.destroy(T$L),this.downButton&&this.downButton.destroy(T$L),this.slider&&this.slider.destroy(T$L),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null;},T$L.createChildren=function(){this.addChild(this.slider=new T$W()),this.addChild(this.upButton=new T$A()),this.addChild(this.downButton=new T$A());},T$L.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown);},T$L.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value);},T$L.onButtonMouseDown=function(T$L){var T$s=T$L.currentTarget===this.upButton;this.slide(T$s),T$T.timer.once(T$N.scrollBarDelayTime,this,this.startLoop,[T$s]),T$T.stage.once("mouseup",this,this.onStageMouseUp);},T$L.startLoop=function(T$L){T$T.timer.frameLoop(1,this,this.slide,[T$L]);},T$L.slide=function(T$L){T$L?this.value-=this._scrollSize:this.value+=this._scrollSize;},T$L.onStageMouseUp=function(T$L){T$T.timer.clear(this,this.startLoop),T$T.timer.clear(this,this.slide);},T$L.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint();},T$L.changeSize=function(){T$s.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value);},T$L.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition();},T$L.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width;},T$L.setScroll=function(T$L,T$s,T$m){this.runCallLater(this.changeSize),this.slider.setSlider(T$L,T$s,T$m),this.slider.bar.visible=0<T$s,!this._hide&&this.autoHide&&(this.visible=!1);},T$L.onTargetMouseWheel=function(T$L){this.value-=T$L.delta*this._scrollSize,this.target=this._target;},T$L.onTargetMouseDown=function(T$L){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new T$u()),this._lastPoint.setTo(T$T.stage.mouseX,T$T.stage.mouseY),T$T.timer.clear(this,this.tweenMove),T$a.clearTween(this),T$T.stage.once("mouseup",this,this.onStageMouseUp2),T$T.stage.once("mouseout",this,this.onStageMouseUp2),T$T.timer.frameLoop(1,this,this.loop);},T$L.loop=function(){var T$L=T$T.stage.mouseY,T$s=T$T.stage.mouseX;if(this._lastOffset=this.isVertical?T$L-this._lastPoint.y:T$s-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?T$T.stage._canvasTransform.getScaleY():T$T.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start");}this._offsets.push(this._lastOffset),this._lastPoint.x=T$s,this._lastPoint.y=T$L,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset);},T$L.onStageMouseUp2=function(T$L){if(T$T.stage.off("mouseup",this,this.onStageMouseUp2),T$T.stage.off("mouseout",this,this.onStageMouseUp2),T$T.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?T$a.to(this,{value:this.min},this.elasticBackTime,T$F.sineOut,T$E.create(this,this.elasticOver)):this._value>this.max&&T$a.to(this,{value:this.max},this.elasticBackTime,T$F.sineOut,T$E.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?T$T.stage.mouseY-this._lastPoint.y:T$T.stage.mouseX-this._lastPoint.x);for(var T$s=0,T$m=Math.min(this._offsets.length,3),T$x=0;T$x<T$m;T$x++)T$s+=this._offsets[this._offsets.length-1-T$x];if(this._lastOffset=T$s/T$m,(T$s=Math.abs(this._lastOffset))<2)return void this.event("end");60<T$s&&(this._lastOffset=0<this._lastOffset?60:-60);var T$w=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));T$T.timer.frameLoop(1,this,this.tweenMove,[T$w]);}},T$L.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&T$a.to(this,{alpha:0},500),this.event("end");},T$L.tweenMove=function(T$L){this._lastOffset*=this.rollRatio;var T$s=NaN;if(0<T$L&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,T$s=.5*-(this.min-T$L-this.value),this._lastOffset>T$s&&(this._lastOffset=T$s)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,T$s=.5*-(this.max+T$L-this.value),this._lastOffset<T$s&&(this._lastOffset=T$s))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(T$T.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?T$a.to(this,{value:this.min},this.elasticBackTime,T$F.sineOut,T$E.create(this,this.elasticOver)):this._value>this.max?T$a.to(this,{value:this.max},this.elasticBackTime,T$F.sineOut,T$E.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&T$a.to(this,{alpha:0},500);}},T$L.stopScroll=function(){this.onStageMouseUp2(null),T$T.timer.clear(this,this.tweenMove),T$a.clearTween(this);},T$v(0,T$L,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height;}),T$v(0,T$L,"skin",function(){return this._skin;},function(T$L){this._skin!=T$L&&(this._skin=T$L,this.slider.skin=this._skin,this.callLater(this.changeScrollBar));}),T$v(0,T$L,"max",function(){return this.slider.max;},function(T$L){this.slider.max=T$L;}),T$v(0,T$L,"showButtons",function(){return this._showButtons;},function(T$L){this._showButtons=T$L,this.callLater(this.changeScrollBar);}),T$v(0,T$L,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100;}),T$v(0,T$L,"min",function(){return this.slider.min;},function(T$L){this.slider.min=T$L;}),T$v(0,T$L,"value",function(){return this._value;},function(T$L){T$L!==this._value&&(this._value=T$L,this._isElastic||(this.slider._value!=T$L&&(this.slider._value=T$L,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value));}),T$v(0,T$L,"isVertical",function(){return this.slider.isVertical;},function(T$L){this.slider.isVertical=T$L;}),T$v(0,T$L,"sizeGrid",function(){return this.slider.sizeGrid;},function(T$L){this.slider.sizeGrid=T$L;}),T$v(0,T$L,"scrollSize",function(){return this._scrollSize;},function(T$L){this._scrollSize=T$L;}),T$v(0,T$L,"dataSource",T$s.prototype._$get_dataSource,function(T$L){"number"==typeof(this._dataSource=T$L)||"string"==typeof T$L?this.value=Number(T$L):T$T.superSet(T$h,this,"dataSource",T$L);}),T$v(0,T$L,"thumbPercent",function(){return this._thumbPercent;},function(T$L){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),T$L=1<=T$L?.99:T$L,this._thumbPercent=T$L,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*T$L,T$N.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*T$L,T$N.scrollBarMinNum));}),T$v(0,T$L,"target",function(){return this._target;},function(T$L){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=T$L)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown));}),T$v(0,T$L,"hide",function(){return this._hide;},function(T$L){this._hide=T$L,this.visible=!T$L;}),T$v(0,T$L,"touchScrollEnable",function(){return this._touchScrollEnable;},function(T$L){this._touchScrollEnable=T$L,this.target=this._target;}),T$v(0,T$L,"mouseWheelEnable",function(){return this._mouseWheelEnable;},function(T$L){this._mouseWheelEnable=T$L,this.target=this._target;}),T$v(0,T$L,"tick",function(){return this.slider.tick;},function(T$L){this.slider.tick=T$L;}),T$m;}(T$h),T$W=function(T$s){function T$m(T$L){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,T$m.__super.call(this),this.skin=T$L;}T$O(T$m,"laya.ui.Slider",T$s);var T$L=T$m.prototype;return T$L.destroy=function(T$L){void 0===T$L&&(T$L=!0),T$s.prototype.destroy.call(this,T$L),this._bg&&this._bg.destroy(T$L),this._bar&&this._bar.destroy(T$L),this._progress&&this._progress.destroy(T$L),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null;},T$L.createChildren=function(){this.addChild(this._bg=new T$d()),this.addChild(this._bar=new T$A());},T$L.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0;},T$L.onBarMouseDown=function(T$L){this._globalSacle||(this._globalSacle=new T$u()),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=T$T.stage.mouseX,this._ty=T$T.stage.mouseY,T$T.stage.on("mousemove",this,this.mouseMove),T$T.stage.once("mouseup",this,this.mouseUp),T$T.stage.once("mouseout",this,this.mouseUp),this.showValueText();},T$L.showValueText=function(){if(this.showLabel){var T$L=laya.ui.Slider.label;this.addChild(T$L),T$L.textField.changeText(this._value+""),this.isVertical?(T$L.x=this._bar.x+20,T$L.y=.5*(this._bar.height-T$L.height)+this._bar.y):(T$L.y=this._bar.y-20,T$L.x=.5*(this._bar.width-T$L.width)+this._bar.x);}},T$L.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf();},T$L.mouseUp=function(T$L){T$T.stage.off("mousemove",this,this.mouseMove),T$T.stage.off("mouseup",this,this.mouseUp),T$T.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText();},T$L.mouseMove=function(T$L){var T$s=this._value;this.isVertical?(this._bar.y+=(T$T.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(T$T.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=T$T.stage.mouseX,this._ty=T$T.stage.mouseY;var T$m=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*T$m)/T$m,this._value!=T$s&&this.sendChangeEvent(),this.showValueText();},T$L.sendChangeEvent=function(T$L){void 0===T$L&&(T$L="change"),this.event(T$L),this.changeHandler&&this.changeHandler.runWith(this._value);},T$L.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height));},T$L.changeSize=function(){T$s.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue();},T$L.setSlider=function(T$L,T$s,T$m){this._value=-1,this._min=T$L,this._max=T$L<T$s?T$s:T$L,this.value=T$m<T$L?T$L:T$s<T$m?T$s:T$m;},T$L.changeValue=function(){var T$L=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*T$L)/T$L,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var T$s=this._max-this._min;0===T$s&&(T$s=1),this.isVertical?(this._bar.y=(this._value-this._min)/T$s*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/T$s*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width));},T$L.onBgMouseDown=function(T$L){var T$s=this._bg.getMousePoint();this.isVertical?this.value=T$s.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=T$s.x/(this.width-this._bar.width)*(this._max-this._min)+this._min;},T$v(0,T$L,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height);}),T$v(0,T$L,"skin",function(){return this._skin;},function(T$L){if(this._skin!=T$L){this._skin=T$L,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var T$s=this._skin.replace(".png","$progress.png");T$e.getRes(T$s)&&(this._progress||(this.addChild(this._progress=new T$d()),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=T$s),this.setBarPoint(),this.callLater(this.changeValue);}}),T$v(0,T$L,"allowClickBack",function(){return this._allowClickBack;},function(T$L){this._allowClickBack!=T$L&&((this._allowClickBack=T$L)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown));}),T$v(0,T$L,"max",function(){return this._max;},function(T$L){this._max!=T$L&&(this._max=T$L,this.callLater(this.changeValue));}),T$v(0,T$L,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width);}),T$v(0,T$L,"tick",function(){return this._tick;},function(T$L){this._tick!=T$L&&(this._tick=T$L,this.callLater(this.changeValue));}),T$v(0,T$L,"sizeGrid",function(){return this._bg.sizeGrid;},function(T$L){this._bg.sizeGrid=T$L,this._bar.sizeGrid=T$L,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid);}),T$v(0,T$L,"min",function(){return this._min;},function(T$L){this._min!=T$L&&(this._min=T$L,this.callLater(this.changeValue));}),T$v(0,T$L,"value",function(){return this._value;},function(T$L){if(this._value!=T$L){var T$s=this._value;this._value=T$L,this.changeValue(),this._value!=T$s&&this.sendChangeEvent();}}),T$v(0,T$L,"dataSource",T$s.prototype._$get_dataSource,function(T$L){"number"==typeof(this._dataSource=T$L)||"string"==typeof T$L?this.value=Number(T$L):T$T.superSet(T$h,this,"dataSource",T$L);}),T$v(0,T$L,"bar",function(){return this._bar;}),T$x(T$m,["label",function(){return this.label=new T$X();}]),T$m;}(T$h),T$d=function(T$s){function T$m(T$L){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,T$m.__super.call(this),this.skin=T$L;}T$O(T$m,"laya.ui.Image",T$s);var T$L=T$m.prototype;return T$L.destroy=function(T$L){void 0===T$L&&(T$L=!0),T$s.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,T$e.clearCache(this,this._skin);},T$L.dispose=function(){this.destroy(!0),T$e.clearCache(this,this._skin),this.clearEvent();},T$L.createChildren=function(){this.graphics=this._bitmap=new T$c();},T$L.setSource=function(T$L,T$s){this.destroyed||T$L===this._skin&&T$s&&(this.source=T$s,this.onCompResize(),this.clearEvent());},T$L.clearEvent=function(){this._skin&&T$w.atalsNotify&&T$w.atalsNotify.off(this._skin,this,this.setSource);},T$L.clearLoad=function(){this._skin&&((this._complete||this._progress)&&T$T.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null);},T$v(0,T$L,"source",function(){return this._bitmap.source;},function(T$L){this._bitmap&&(this._bitmap.source=T$L,this.event("loaded"),this.repaint());}),T$v(0,T$L,"dataSource",T$s.prototype._$get_dataSource,function(T$L){"string"==typeof(this._dataSource=T$L)?this.skin=T$L:T$T.superSet(T$h,this,"dataSource",T$L);}),T$v(0,T$L,"measureHeight",function(){return this._bitmap.height;}),T$v(0,T$L,"skin",function(){return this._skin;},function(T$L){if(this._skin!=T$L)if(T$e.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=T$L){T$e.keepCache(this,this._skin);var T$s=T$e.getRes(T$L),T$m=T$w.resAtalsObj&&T$w.resAtalsObj[this._skin];T$s?(this.source=T$s,this.onCompResize()):T$m?(T$w.atalsNotify&&T$w.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=T$m.sourceW),0==this.height&&(this.height=T$m.sourceH)):(this._complete=T$E.create(this,this.setSource,[this._skin]),this._progress=null,T$T.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group));}else this.source=null;}),T$v(0,T$L,"group",function(){return this._group;},function(T$L){T$L&&this._skin&&T$e.setGroup(this._skin,T$L),this._group=T$L;}),T$v(0,T$L,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null;},function(T$L){this._bitmap.sizeGrid=T$i.fillArray(T$N.defaultSizeGrid,T$L,Number);}),T$v(0,T$L,"measureWidth",function(){return this._bitmap.width;}),T$v(0,T$L,"width",T$s.prototype._$get_width,function(T$L){T$T.superSet(T$h,this,"width",T$L),this._bitmap.width=0==T$L?1e-7:T$L;}),T$v(0,T$L,"height",T$s.prototype._$get_height,function(T$L){T$T.superSet(T$h,this,"height",T$L),this._bitmap.height=0==T$L?1e-7:T$L;}),T$m;}(T$h),T$X=function(T$s){function T$m(T$L){this._tf=null,T$m.__super.call(this),void 0===T$L&&(T$L=""),T$V.defaultColor=T$N.labelColor,this.text=T$L;}T$O(T$m,"laya.ui.Label",T$s);var T$L=T$m.prototype;return T$L.destroy=function(T$L){void 0===T$L&&(T$L=!0),T$s.prototype.destroy.call(this,T$L),this._tf=null;},T$L.createChildren=function(){this.addChild(this._tf=new T$H());},T$L.changeText=function(T$L){this._tf.changeText(T$L);},T$v(0,T$L,"padding",function(){return this._tf.padding.join(",");},function(T$L){this._tf.padding=T$i.fillArray(T$N.labelPadding,T$L,Number);}),T$v(0,T$L,"bold",function(){return this._tf.bold;},function(T$L){this._tf.bold=T$L;}),T$v(0,T$L,"align",function(){return this._tf.align;},function(T$L){this._tf.align=T$L;}),T$v(0,T$L,"text",function(){return this._tf.text;},function(T$L){this._tf.text!=T$L&&(T$L&&(T$L=T$i.adptString(T$L+"")),this._tf.text=T$L,this.event("change"),this._width&&this._height||this.onCompResize());}),T$v(0,T$L,"italic",function(){return this._tf.italic;},function(T$L){this._tf.italic=T$L;}),T$v(0,T$L,"wordWrap",function(){return this._tf.wordWrap;},function(T$L){this._tf.wordWrap=T$L;}),T$v(0,T$L,"font",function(){return this._tf.font;},function(T$L){this._tf.font=T$L;}),T$v(0,T$L,"dataSource",T$s.prototype._$get_dataSource,function(T$L){"number"==typeof(this._dataSource=T$L)||"string"==typeof T$L?this.text=T$L+"":T$T.superSet(T$h,this,"dataSource",T$L);}),T$v(0,T$L,"color",function(){return this._tf.color;},function(T$L){this._tf.color=T$L;}),T$v(0,T$L,"valign",function(){return this._tf.valign;},function(T$L){this._tf.valign=T$L;}),T$v(0,T$L,"leading",function(){return this._tf.leading;},function(T$L){this._tf.leading=T$L;}),T$v(0,T$L,"fontSize",function(){return this._tf.fontSize;},function(T$L){this._tf.fontSize=T$L;}),T$v(0,T$L,"bgColor",function(){return this._tf.bgColor;},function(T$L){this._tf.bgColor=T$L;}),T$v(0,T$L,"borderColor",function(){return this._tf.borderColor;},function(T$L){this._tf.borderColor=T$L;}),T$v(0,T$L,"stroke",function(){return this._tf.stroke;},function(T$L){this._tf.stroke=T$L;}),T$v(0,T$L,"strokeColor",function(){return this._tf.strokeColor;},function(T$L){this._tf.strokeColor=T$L;}),T$v(0,T$L,"textField",function(){return this._tf;}),T$v(0,T$L,"measureWidth",function(){return this._tf.width;}),T$v(0,T$L,"measureHeight",function(){return this._tf.height;}),T$v(0,T$L,"width",function(){return this._width||this._tf.text?T$T.superGet(T$h,this,"width"):0;},function(T$L){T$T.superSet(T$h,this,"width",T$L),this._tf.width=T$L;}),T$v(0,T$L,"height",function(){return this._height||this._tf.text?T$T.superGet(T$h,this,"height"):0;},function(T$L){T$T.superSet(T$h,this,"height",T$L),this._tf.height=T$L;}),T$v(0,T$L,"overflow",function(){return this._tf.overflow;},function(T$L){this._tf.overflow=T$L;}),T$v(0,T$L,"underline",function(){return this._tf.underline;},function(T$L){this._tf.underline=T$L;}),T$v(0,T$L,"underlineColor",function(){return this._tf.underlineColor;},function(T$L){this._tf.underlineColor=T$L;}),T$m;}(T$h),T$I=function(T$s){function T$m(T$L){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,T$m.__super.call(this),this.skin=T$L;}T$O(T$m,"laya.ui.ProgressBar",T$s);var T$L=T$m.prototype;return T$L.destroy=function(T$L){void 0===T$L&&(T$L=!0),T$s.prototype.destroy.call(this,T$L),this._bg&&this._bg.destroy(T$L),this._bar&&this._bar.destroy(T$L),this._bg=this._bar=null,this.changeHandler=null;},T$L.createChildren=function(){this.addChild(this._bg=new T$d()),this.addChild(this._bar=new T$d());},T$L.changeValue=function(){if(this.sizeGrid){var T$L=this.sizeGrid.split(","),T$s=Number(T$L[3]),T$m=Number(T$L[1]),T$x=(this.width-T$s-T$m)*this._value;this._bar.width=T$s+T$m+T$x,this._bar.visible=this._bar.width>T$s+T$m;}else this._bar.width=this.width*this._value;},T$v(0,T$L,"measureHeight",function(){return this._bg.height;}),T$v(0,T$L,"skin",function(){return this._skin;},function(T$L){this._skin!=T$L&&(this._skin=T$L,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue));}),T$v(0,T$L,"measureWidth",function(){return this._bg.width;}),T$v(0,T$L,"height",T$s.prototype._$get_height,function(T$L){T$T.superSet(T$h,this,"height",T$L),this._bg.height=this._height,this._bar.height=this._height;}),T$v(0,T$L,"bar",function(){return this._bar;}),T$v(0,T$L,"value",function(){return this._value;},function(T$L){this._value!=T$L&&(T$L=1<T$L?1:T$L<0?0:T$L,this._value=T$L,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(T$L));}),T$v(0,T$L,"bg",function(){return this._bg;}),T$v(0,T$L,"sizeGrid",function(){return this._bg.sizeGrid;},function(T$L){this._bg.sizeGrid=this._bar.sizeGrid=T$L;}),T$v(0,T$L,"width",T$s.prototype._$get_width,function(T$L){T$T.superSet(T$h,this,"width",T$L),this._bg.width=this._width,this.callLater(this.changeValue);}),T$v(0,T$L,"dataSource",T$s.prototype._$get_dataSource,function(T$L){"number"==typeof(this._dataSource=T$L)||"string"==typeof T$L?this.value=Number(T$L):T$T.superSet(T$h,this,"dataSource",T$L);}),T$m;}(T$h),T$n=(function(T$L){function T$m(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,T$m.__super.call(this),this._tipBox=new T$h(),this._tipBox.addChild(this._tipText=new T$H()),this._tipText.x=this._tipText.y=5,this._tipText.color=T$m.tipTextColor,this._defaultTipHandler=this._showDefaultTip,T$T.stage.on("showtip",this,this._onStageShowTip),T$T.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100;}T$O(T$m,"laya.ui.TipManager",T$h);var T$s=T$m.prototype;T$s._onStageHideTip=function(T$L){T$T.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf();},T$s._onStageShowTip=function(T$L){T$T.timer.once(T$m.tipDelay,this,this._showTip,[T$L],!0);},T$s._showTip=function(T$L){if("string"==typeof T$L){var T$s=String(T$L);Boolean(T$s)&&this._defaultTipHandler(T$s);}else T$L instanceof laya.utils.Handler?T$L.run():"function"==typeof T$L&&T$L.apply();T$T.stage.on("mousemove",this,this._onStageMouseMove),T$T.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null);},T$s._onStageMouseDown=function(T$L){this.closeAll();},T$s._onStageMouseMove=function(T$L){this._showToStage(this,T$m.offsetX,T$m.offsetY);},T$s._showToStage=function(T$L,T$s,T$m){void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0);var T$x=T$L.getBounds();T$L.x=T$T.stage.mouseX+T$s,T$L.y=T$T.stage.mouseY+T$m,T$L.x+T$x.width>T$T.stage.width&&(T$L.x-=T$x.width+T$s),T$L.y+T$x.height>T$T.stage.height&&(T$L.y-=T$x.height+T$m);},T$s.closeAll=function(){T$T.timer.clear(this,this._showTip),T$T.stage.off("mousemove",this,this._onStageMouseMove),T$T.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren();},T$s.showDislayTip=function(T$L){this.addChild(T$L),this._showToStage(this),T$T._currentStage.addChild(this);},T$s._showDefaultTip=function(T$L){this._tipText.text=T$L;var T$s=this._tipBox.graphics;T$s.clear(),T$s.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,T$m.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),T$T._currentStage.addChild(this);},T$v(0,T$s,"defaultTipHandler",function(){return this._defaultTipHandler;},function(T$L){this._defaultTipHandler=T$L;}),T$m.offsetX=10,T$m.offsetY=15,T$m.tipTextColor="#ffffff",T$m.tipBackColor="#111111",T$m.tipDelay=200;}(),function(T$L){var T$r;function T$u(){this._idMap=null,this._aniList=null,this._watchMap={},T$u.__super.call(this);}T$O(T$u,"laya.ui.View",T$R);var T$s=T$u.prototype;return T$s.createView=function(T$L){if(T$L.animations&&!this._idMap&&(this._idMap={}),T$u.createComp(T$L,this,this),T$L.animations){var T$s,T$m,T$x=[],T$w=T$L.animations,T$O=0,T$v=T$w.length;for(T$O=0;T$O<T$v;T$O++){switch(T$s=new T$C(),T$m=T$w[T$O],T$s._setUp(this._idMap,T$m),(this[T$m.name]=T$s)._setControlNode(this),T$m.action){case 1:T$s.play(0,!1);break;case 2:T$s.play(0,!0);}T$x.push(T$s);}this._aniList=T$x;}0<this._width&&null==T$L.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0);},T$s.onEvent=function(T$L,T$s){},T$s.loadUI=function(T$L){var T$s=T$u.uiMap[T$L];T$s&&this.createView(T$s);},T$s.destroy=function(T$L){void 0===T$L&&(T$L=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,T$L);},T$s.changeData=function(T$L){var T$s=this._watchMap[T$L];if(T$s){console.log("change",T$L);for(var T$m=0,T$x=T$s.length;T$m<T$x;T$m++){T$s[T$m].exe(this);}}},T$u._regs=function(){for(var T$L in T$u.uiClassMap)T$j.regClass(T$L,T$u.uiClassMap[T$L]);},T$u.createComp=function(T$L,T$s,T$m,T$x){if(!(T$s=T$s||T$u.getCompInstance(T$L)))return console.warn("can not create:"+T$L.type),null;var T$w=T$L.child;if(T$w)for(var T$O=T$s instanceof laya.ui.List,T$v=0,T$y=T$w.length;T$v<T$y;T$v++){var T$F=T$w[T$v];if(!T$s.hasOwnProperty("itemRender")||"render"!=T$F.props.name&&"render"!==T$F.props.renderType){if("Graphic"==T$F.type)T$j.addGraphicsToSprite(T$F,T$s);else if(T$j.isDrawType(T$F.type))T$j.addGraphicToSprite(T$F,T$s,!0);else{if(T$O){var T$o=[],T$V=T$u.createComp(T$F,null,T$m,T$o);T$o.length&&(T$V._$bindData=T$o);}else T$V=T$u.createComp(T$F,null,T$m,T$x);"Script"==T$F.type?"owner"in T$V?T$V.owner=T$s:"target"in T$V&&(T$V.target=T$s):"mask"==T$F.props.renderType||"mask"==T$F.props.name?T$s.mask=T$V:T$V instanceof laya.display.Sprite&&T$s.addChild(T$V);}}else T$s.itemRender=T$F;}var T$C=T$L.props;for(var T$E in T$C){var T$r=T$C[T$E];T$u.eventDic[T$E]?T$r&&T$m&&T$s.on(T$E,T$m,T$m.onEvent,[T$r]):T$u.setCompValue(T$s,T$E,T$r,T$m,T$x);}return T$T.__typeof(T$s,"laya.ui.IItem")&&T$s.initItems(),T$L.compId&&T$m&&T$m._idMap&&(T$m._idMap[T$L.compId]=T$s),T$s;},T$u.setCompValue=function(T$L,T$s,T$m,T$x,T$w){if("string"==typeof T$m&&-1<T$m.indexOf("${")){if(T$u._sheet||(T$u._sheet=T$j.getClass("laya.data.Table")),!T$u._sheet)return void console.warn("Can not find class Sheet");if(T$w)T$w.push(T$L,T$s,T$m);else if(T$x){-1==T$m.indexOf("].")&&(T$m=T$m.replace(".","[0]."));var T$O,T$v,T$y=new T$r(T$L,T$s,T$m);T$y.exe(T$x);for(var T$F=T$m.replace(/\[.*?\]\./g,".");null!=(T$O=T$u._parseWatchData.exec(T$F));){for(var T$o=T$O[1];null!=(T$v=T$u._parseKeyWord.exec(T$o));){var T$V=T$v[0],T$C=T$x._watchMap[T$V]||(T$x._watchMap[T$V]=[]);T$C.push(T$y),T$u._sheet.I.notifer.on(T$V,T$x,T$x.changeData,[T$V]);}(T$C=T$x._watchMap[T$o]||(T$x._watchMap[T$o]=[])).push(T$y),T$u._sheet.I.notifer.on(T$o,T$x,T$x.changeData,[T$o]);}}}else if("var"===T$s&&T$x)T$x[T$m]=T$L;else if("onClick"==T$s){var T$E=T$T._runScript("(function(){"+T$m+"})");T$L.on("click",T$x,T$E);}else T$L[T$s]="true"===T$m||"false"!==T$m&&T$m;},T$u.getCompInstance=function(T$L){var T$s,T$m=T$L.props?T$L.props.runtime:null;return T$s=T$m?T$u.viewClassMap[T$m]||T$u.uiClassMap[T$m]||T$T.__classmap[T$m]:T$u.uiClassMap[T$L.type],T$L.props&&T$L.props.hasOwnProperty("renderType")&&"instance"==T$L.props.renderType?T$s.instance:T$s?new T$s():null;},T$u.regComponent=function(T$L,T$s){T$u.uiClassMap[T$L]=T$s,T$j.regClass(T$L,T$s);},T$u.regViewRuntime=function(T$L,T$s){T$u.viewClassMap[T$L]=T$s;},T$u.uiMap={},T$u.viewClassMap={},T$u._sheet=null,T$x(T$u,["uiClassMap",function(){return this.uiClassMap={ViewStack:T$LL,LinkButton:T$A,TextArea:T$oL,ColorPicker:T$$,Box:T$R,Button:T$A,CheckBox:T$J,Clip:T$g,ComboBox:T$p,Component:T$h,HScrollBar:T$P,HSlider:T$B,Image:T$d,Label:T$X,List:T$K,Panel:T$k,ProgressBar:T$I,Radio:T$z,RadioGroup:T$yL,ScrollBar:T$Z,Slider:T$W,Tab:T$FL,TextInput:T$mL,View:T$u,VScrollBar:T$sL,VSlider:T$xL,Tree:T$t,HBox:T$OL,VBox:T$vL,Sprite:T$S,Animation:T$m,Text:T$H,FontClip:T$q};},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0};},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g;},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g;}]),T$u.__init$=function(){T$u._regs(),T$r=function(){function T$L(T$L,T$s,T$m){this.comp=null,this.prop=null,this.value=null,this.comp=T$L,this.prop=T$s,this.value=T$m;}return T$O(T$L,""),T$L.prototype.exe=function(T$L){var T$s=T$i.getBindFun(this.value);this.comp[this.prop]=T$s.call(this,T$L);},T$L;}();},T$u;}()),T$J=function(T$L){function T$m(T$L,T$s){void 0===T$s&&(T$s=""),T$m.__super.call(this,T$L,T$s);}T$O(T$m,"laya.ui.CheckBox",T$L);var T$s=T$m.prototype;return T$s.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1;},T$s.initialize=function(){T$L.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0;},T$v(0,T$s,"dataSource",T$L.prototype._$get_dataSource,function(T$L){"boolean"==typeof(this._dataSource=T$L)?this.selected=T$L:"string"==typeof T$L?this.selected="true"===T$L:T$T.superSet(T$A,this,"dataSource",T$L);}),T$m;}(T$A),T$l=function(T$L){function T$s(){this._space=0,this._align="none",this._itemChanged=!1,T$s.__super.call(this);}T$O(T$s,"laya.ui.LayoutBox",T$R);var T$m=T$s.prototype;return T$m.addChild=function(T$L){return T$L.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,T$L);},T$m.onResize=function(T$L){this._setItemChanged();},T$m.addChildAt=function(T$L,T$s){return T$L.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,T$L,T$s);},T$m.removeChild=function(T$L){return T$L.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,T$L);},T$m.removeChildAt=function(T$L){return this.getChildAt(T$L).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,T$L);},T$m.refresh=function(){this._setItemChanged();},T$m.changeItems=function(){this._itemChanged=!1;},T$m.sortItem=function(T$L){T$L&&T$L.sort(function(T$L,T$s){return T$L.y-T$s.y;});},T$m._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems));},T$v(0,T$m,"space",function(){return this._space;},function(T$L){this._space=T$L,this._setItemChanged();}),T$v(0,T$m,"align",function(){return this._align;},function(T$L){this._align=T$L,this._setItemChanged();}),T$s;}(),T$q=function(T$s){function T$m(T$L,T$s){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,T$m.__super.call(this),T$L&&(this.skin=T$L),T$s&&(this.sheet=T$s);}T$O(T$m,"laya.ui.FontClip",T$s);var T$L=T$m.prototype;return T$L.createChildren=function(){this._bitmap=new T$c(),this.on("loaded",this,this._onClipLoaded);},T$L._onClipLoaded=function(){this.callLater(this.changeValue);},T$L.changeValue=function(){var T$L;if(this._sources&&this._valueArr&&(this.graphics.clear(!0),T$L=this._sources[0])){var T$s="horizontal"===this._direction;T$s?(this._wordsW=this._valueArr.length*(T$L.sourceWidth+this.spaceX),this._wordsH=T$L.sourceHeight):(this._wordsW=T$L.sourceWidth,this._wordsH=(T$L.sourceHeight+this.spaceY)*this._valueArr.length);var T$m=0;if(this._width)switch(this._align){case"center":T$m=.5*(this._width-this._wordsW);break;case"right":T$m=this._width-this._wordsW;break;default:T$m=0;}for(var T$x=0,T$w=this._valueArr.length;T$x<T$w;T$x++){var T$O=this._indexMap[this._valueArr.charAt(T$x)];this.sources[T$O]&&(T$L=this.sources[T$O],T$s?this.graphics.drawTexture(T$L,T$m+T$x*(T$L.sourceWidth+this.spaceX),0,T$L.sourceWidth,T$L.sourceHeight):this.graphics.drawTexture(T$L,0+T$m,T$x*(T$L.sourceHeight+this.spaceY),T$L.sourceWidth,T$L.sourceHeight));}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize));}},T$L.destroy=function(T$L){void 0===T$L&&(T$L=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),T$s.prototype.destroy.call(this,T$L);},T$v(0,T$L,"sheet",function(){return this._sheet;},function(T$L){T$L+="";var T$s=(this._sheet=T$L).split(" ");this._clipX=String(T$s[0]).length,this.clipY=T$s.length,this._indexMap={};for(var T$m=0;T$m<this._clipY;T$m++)for(var T$x=T$s[T$m].split(""),T$w=0,T$O=T$x.length;T$w<T$O;T$w++)this._indexMap[T$x[T$w]]=T$m*this._clipX+T$w;}),T$v(0,T$L,"height",T$s.prototype._$get_height,function(T$L){T$T.superSet(T$g,this,"height",T$L),this.callLater(this.changeValue);}),T$v(0,T$L,"direction",function(){return this._direction;},function(T$L){this._direction=T$L,this.callLater(this.changeValue);}),T$v(0,T$L,"value",function(){return this._valueArr?this._valueArr:"";},function(T$L){T$L+="",this._valueArr=T$L,this.callLater(this.changeValue);}),T$v(0,T$L,"width",T$s.prototype._$get_width,function(T$L){T$T.superSet(T$g,this,"width",T$L),this.callLater(this.changeValue);}),T$v(0,T$L,"spaceX",function(){return this._spaceX;},function(T$L){this._spaceX=T$L,"horizontal"===this._direction&&this.callLater(this.changeValue);}),T$v(0,T$L,"spaceY",function(){return this._spaceY;},function(T$L){this._spaceY=T$L,"horizontal"!==this._direction&&this.callLater(this.changeValue);}),T$v(0,T$L,"align",function(){return this._align;},function(T$L){this._align=T$L,this.callLater(this.changeValue);}),T$v(0,T$L,"measureWidth",function(){return this._wordsW;}),T$v(0,T$L,"measureHeight",function(){return this._wordsH;}),T$m;}(T$g),T$K=function(T$L){function T$s(){this.selectHandler=null,this.renderHandler=null,this.renderTwHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this._twSwitch=!0,this._twDone=!0,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new T$u(),T$s.__super.call(this);}T$O(T$s,"laya.ui.List",T$L);var T$m=T$s.prototype;return T$T.imps(T$m,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),T$m.destroy=function(T$L){void 0===T$L&&(T$L=!0),this._content&&this._content.destroy(T$L),this._scrollBar&&this._scrollBar.destroy(T$L),laya.ui.Component.prototype.destroy.call(this,T$L),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this._twSwitch=null,this._twDone=null,this.selectHandler=this.renderHandler=this.mouseHandler=this.renderTwHandler=null;},T$m.createChildren=function(){this.addChild(this._content=new T$R());},T$m.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=T$T.superGet(T$R,this,"cacheAs")),T$T.superSet(T$R,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd);},T$m.onScrollEnd=function(){T$T.superSet(T$R,this,"cacheAs",this._$P.cacheAs);},T$m._removePreScrollBar=function(){var T$L=this.removeChildByName("scrollBar");T$L&&T$L.destroy(!0);},T$m.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var T$L=this._getOneCell(),T$s=T$L.width+this._spaceX||1,T$m=T$L.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/T$s):Math.ceil(this._width/T$s)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/T$m):Math.round(this._height/T$m));var T$x=this._width?this._width:T$s*this.repeatX-this._spaceX,T$w=this._height?this._height:T$m*this.repeatY-this._spaceY;this._cellSize=this._isVertical?T$m:T$s,this._cellOffset=this._isVertical?T$m*Math.max(this._repeatY2,this._repeatY)-T$w-this._spaceY:T$s*Math.max(this._repeatX2,this._repeatX)-T$x-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=T$w:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=T$x),this.setContentSize(T$x,T$w);var T$O=this._isVertical?this.repeatX:this.repeatY,T$v=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,T$O,T$v),this._createdLine=T$v,this._array&&(this.array=this._array,this.runCallLater(this.renderItems));}},T$m._getOneCell=function(){if(0===this._cells.length){var T$L=this.createItem();if(this._offset.setTo(T$L.x,T$L.y),this.cacheContent)return T$L;this._cells.push(T$L);}return this._cells[0];},T$m._createItems=function(T$L,T$s,T$m){var T$x=this._content,T$w=this._getOneCell(),T$O=T$w.width+this._spaceX,T$v=T$w.height+this._spaceY;if(this.cacheContent){var T$y=new T$R();T$y.cacheAsBitmap=!0,T$y.pos((this._isVertical?0:T$L)*T$O,(this._isVertical?T$L:0)*T$v),this._content.addChild(T$y),this._content.optimizeScrollRect=!0,T$x=T$y;}else{for(var T$F=[],T$o=this._cells.length-1;-1<T$o;T$o--){var T$V=this._cells[T$o];T$V.removeSelf(),T$F.push(T$V);}this._cells.length=0;}for(var T$C=T$L;T$C<T$m;T$C++)for(var T$E=0;T$E<T$s;T$E++)(T$w=T$F&&T$F.length?T$F.pop():this.createItem()).x=(this._isVertical?T$E:T$C)*T$O-T$x.x,T$w.y=(this._isVertical?T$C:T$E)*T$v-T$x.y,T$w.name="item"+(T$C*T$s+T$E),T$x.addChild(T$w),this.addCell(T$w);},T$m.createItem=function(){var T$L=[];if("function"==typeof this._itemRender)var T$s=new this._itemRender();else T$s=T$n.createComp(this._itemRender,null,null,T$L);if(0==T$L.length&&T$s._watchMap){var T$m=T$s._watchMap;for(var T$x in T$m)for(var T$w=T$m[T$x],T$O=0;T$O<T$w.length;T$O++){var T$v=T$w[T$O];T$L.push(T$v.comp,T$v.prop,T$v.value);}}return T$L.length&&(T$s._$bindData=T$L),T$s;},T$m.addCell=function(T$L){T$L.on("click",this,this.onCellMouse),T$L.on("rightclick",this,this.onCellMouse),T$L.on("mouseover",this,this.onCellMouse),T$L.on("mouseout",this,this.onCellMouse),T$L.on("mousedown",this,this.onCellMouse),T$L.on("mouseup",this,this.onCellMouse),this._cells.push(T$L);},T$m.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var T$L=0,T$s=T$L=0;T$s<1e4;T$s++){var T$m=this.getChildByName("item"+T$s);if(!T$m)break;this.addCell(T$m),T$L++;}this.repeatY=T$L;}},T$m.setContentSize=function(T$L,T$s){this._content.width=T$L,this._content.height=T$s,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new T$D()),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,T$L,T$s),this._content.scrollRect=this._content.scrollRect),this.event("resize");},T$m.onCellMouse=function(T$L){"mousedown"===T$L.type&&(this._isMoved=!1);var T$s=T$L.currentTarget,T$m=this._startIndex+this._cells.indexOf(T$s);T$m<0||("click"===T$L.type||"rightclick"===T$L.type?this.selectEnable&&!this._isMoved?this.selectedIndex=T$m:this.changeCellState(T$s,!0,0):"mouseover"!==T$L.type&&"mouseout"!==T$L.type||this._selectedIndex===T$m||this.changeCellState(T$s,"mouseover"===T$L.type,0),this.mouseHandler&&this.mouseHandler.runWith([T$L,T$m]));},T$m.changeCellState=function(T$L,T$s,T$m){var T$x=T$L.getChildByName("selectBox");T$x&&(this.selectEnable=!0,T$x.visible=T$s,T$x.index=T$m);},T$m.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange);},T$m.onScrollBarChange=function(T$L){this.runCallLater(this.changeCells);var T$s=this._scrollBar.value,T$m=this._isVertical?this.repeatX:this.repeatY,T$x=this._isVertical?this.repeatY:this.repeatX,T$w=Math.floor(T$s/this._cellSize);if(this.cacheContent)T$v=T$x+1,this._createdLine-T$w<T$v&&(this._createItems(this._createdLine,T$m,this._createdLine+T$v),this.renderItems(this._createdLine*T$m,0),this._createdLine+=T$v);else{var T$O=T$w*T$m,T$v=0;if(T$O>this._startIndex){T$v=T$O-this._startIndex;var T$y=!0,T$F=this._startIndex+T$m*(T$x+1);this._isMoved=!0;}else T$O<this._startIndex&&(T$v=this._startIndex-T$O,T$y=!1,T$F=this._startIndex-1,this._isMoved=!0);for(var T$o=0;T$o<T$v;T$o++){if(T$y){var T$V=this._cells.shift();this._cells[this._cells.length]=T$V;var T$C=T$F+T$o;}else T$V=this._cells.pop(),this._cells.unshift(T$V),T$C=T$F-T$o;var T$E=Math.floor(T$C/T$m)*this._cellSize;this._isVertical?T$V.y=T$E:T$V.x=T$E,this.renderItem(T$V,T$C);}this._startIndex=T$O,this.changeSelectStatus();}var T$r=this._content.scrollRect;this._isVertical?(T$r.y=T$s-this._offset.y,T$r.x=-this._offset.x):(T$r.y=-this._offset.y,T$r.x=T$s-this._offset.x),this._content.scrollRect=T$r;},T$m.posCell=function(T$L,T$s){if(this._scrollBar){var T$m=this._isVertical?this.repeatX:this.repeatY,T$x=(this._isVertical?this.repeatY:this.repeatX,Math.floor(T$s/T$m)*this._cellSize);this._isVertical?T$L.y=T$x:T$L.x=T$x;}},T$m.changeSelectStatus=function(){for(var T$L=0,T$s=this._cells.length;T$L<T$s;T$L++)this.changeCellState(this._cells[T$L],this._selectedIndex===this._startIndex+T$L,1);},T$m.renderItems=function(T$L,T$s){void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=0);for(var T$m=T$L,T$x=T$s||this._cells.length;T$m<T$x;T$m++)this.renderItem(this._cells[T$m],this._startIndex+T$m);this.changeSelectStatus(),this._twDone=!0;},T$m.renderItem=function(T$L,T$s){this._array&&0<=T$s&&T$s<this._array.length?(T$L.visible=!0,T$L._$bindData?(T$L._dataSource=this._array[T$s],this._bindData(T$L,this._array[T$s])):T$L.dataSource=this._array[T$s],this.cacheContent||this.posCell(T$L,T$s),this.hasListener("render")&&this.event("render",[T$L,T$s]),this.renderHandler&&this.renderHandler.runWith([T$L,T$s]),this.renderTwHandler&&this.renderTwHandler.runWith([T$L,T$s])):(T$L.visible=!1,T$L.dataSource=null);},T$m._bindData=function(T$L,T$s){for(var T$m=T$L._$bindData,T$x=0,T$w=T$m.length;T$x<T$w;T$x++){var T$O=T$m[T$x++],T$v=T$m[T$x++],T$y=T$m[T$x],T$F=T$i.getBindFun(T$y);T$O[T$v]=T$F.call(this,T$s);}},T$m.refresh=function(){this.array=this._array;},T$m.getItem=function(T$L){return-1<T$L&&T$L<this._array.length?this._array[T$L]:null;},T$m.changeItem=function(T$L,T$s){-1<T$L&&T$L<this._array.length&&(this._array[T$L]=T$s,T$L>=this._startIndex&&T$L<this._startIndex+this._cells.length&&this.renderItem(this.getCell(T$L),T$L));},T$m.setItem=function(T$L,T$s){this.changeItem(T$L,T$s);},T$m.addItem=function(T$L){this._array.push(T$L),this.array=this._array;},T$m.addItemAt=function(T$L,T$s){this._array.splice(T$s,0,T$L),this.array=this._array;},T$m.deleteItem=function(T$L){this._array.splice(T$L,1),this.array=this._array;},T$m.getCell=function(T$L){return this.runCallLater(this.changeCells),-1<T$L&&this._cells?this._cells[(T$L-this._startIndex)%this._cells.length]:null;},T$m.scrollTo=function(T$L){if(this._scrollBar){var T$s=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(T$L/T$s)*this._cellSize;}else this.startIndex=T$L;},T$m.tweenTo=function(T$L,T$s,T$m){if(void 0===T$s&&(T$s=200),this._scrollBar){var T$x=this._isVertical?this.repeatX:this.repeatY;T$a.to(this._scrollBar,{value:Math.floor(T$L/T$x)*this._cellSize},T$s,null,T$m,0,!0);}else this.startIndex=T$L,T$m&&T$m.run();},T$m._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells));},T$m.commitMeasure=function(){this.runCallLater(this.changeCells);},T$v(0,T$m,"cacheAs",T$L.prototype._$get_cacheAs,function(T$L){T$T.superSet(T$R,this,"cacheAs",T$L),this._scrollBar&&(this._$P.cacheAs=null,"none"!==T$L?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart));}),T$v(0,T$m,"content",function(){return this._content;}),T$v(0,T$m,"height",T$L.prototype._$get_height,function(T$L){T$L!=this._height&&(T$T.superSet(T$R,this,"height",T$L),this._setCellChanged());}),T$v(0,T$m,"itemRender",function(){return this._itemRender;},function(T$L){if(this._itemRender!=T$L){this._itemRender=T$L;for(var T$s=this._cells.length-1;-1<T$s;T$s--)this._cells[T$s].destroy();this._cells.length=0,this._setCellChanged();}}),T$v(0,T$m,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null;},function(T$L){this._removePreScrollBar();var T$s=new T$sL();T$s.name="scrollBar",T$s.right=0,T$L&&" "!=T$L&&(T$s.skin=T$L),this.scrollBar=T$s,this.addChild(T$s),this._setCellChanged();}),T$v(0,T$m,"page",function(){return this._page;},function(T$L){this._page=T$L,this._array&&(this._page=0<T$L?T$L:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY);}),T$v(0,T$m,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null;},function(T$L){this._removePreScrollBar();var T$s=new T$P();T$s.name="scrollBar",T$s.bottom=0,T$L&&" "!=T$L&&(T$s.skin=T$L),this.scrollBar=T$s,this.addChild(T$s),this._setCellChanged();}),T$v(0,T$m,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1;},function(T$L){this._repeatX=T$L,this._setCellChanged();}),T$v(0,T$m,"scrollBar",function(){return this._scrollBar;},function(T$L){this._scrollBar!=T$L&&(this._scrollBar=T$L)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange));}),T$v(0,T$m,"width",T$L.prototype._$get_width,function(T$L){T$L!=this._width&&(T$T.superSet(T$R,this,"width",T$L),this._setCellChanged());}),T$v(0,T$m,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1;},function(T$L){this._repeatY=T$L,this._setCellChanged();}),T$v(0,T$m,"spaceX",function(){return this._spaceX;},function(T$L){this._spaceX=T$L,this._setCellChanged();}),T$v(0,T$m,"spaceY",function(){return this._spaceY;},function(T$L){this._spaceY=T$L,this._setCellChanged();}),T$v(0,T$m,"selectedIndex",function(){return this._selectedIndex;},function(T$L){this._selectedIndex!=T$L&&(this._selectedIndex=T$L,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(T$L),this.startIndex=this._startIndex);}),T$v(0,T$m,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null;},function(T$L){this.selectedIndex=this._array.indexOf(T$L);}),T$v(0,T$m,"length",function(){return this._array?this._array.length:0;}),T$v(0,T$m,"selection",function(){return this.getCell(this._selectedIndex);},function(T$L){this.selectedIndex=this._startIndex+this._cells.indexOf(T$L);}),T$v(0,T$m,"startIndex",function(){return this._startIndex;},function(T$L){this._startIndex=0<T$L?T$L:0,this.callLater(this.renderItems);}),T$v(0,T$m,"twSwitch",function(){return this._twSwitch;},function(T$L){this._twSwitch=T$L;}),T$v(0,T$m,"twDone",function(){return this._twDone;},function(T$L){this._twDone=T$L;}),T$v(0,T$m,"array",function(){return this._array;},function(T$L){this.runCallLater(this.changeCells),this._array=T$L||[];var T$s=this._array.length;if(this.totalPage=Math.ceil(T$s/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<T$s?this._selectedIndex:T$s-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var T$m=this._isVertical?this.repeatX:this.repeatY,T$x=this._isVertical?this.repeatY:this.repeatX,T$w=Math.ceil(T$s/T$m);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=T$x/T$w,this._scrollBar.setScroll(0,(T$w-T$x)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content;}}),T$v(0,T$m,"dataSource",T$L.prototype._$get_dataSource,function(T$L){"number"==typeof(this._dataSource=T$L)&&Math.floor(T$L)==T$L||"string"==typeof T$L?this.selectedIndex=parseInt(T$L):T$L instanceof Array?this.array=T$L:T$T.superSet(T$R,this,"dataSource",T$L);}),T$v(0,T$m,"cells",function(){return this.runCallLater(this.changeCells),this._cells;}),T$s;}(T$R),T$P=function(T$L){function T$s(){T$s.__super.call(this);}return T$O(T$s,"laya.ui.HScrollBar",T$L),T$s.prototype.initialize=function(){T$L.prototype.initialize.call(this),this.slider.isVertical=!1;},T$s;}(T$Z),T$k=function(T$L){function T$s(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,T$s.__super.call(this),this.width=this.height=100;}T$O(T$s,"laya.ui.Panel",T$L);var T$m=T$s.prototype;return T$m.destroy=function(T$L){void 0===T$L&&(T$L=!0),laya.ui.Component.prototype.destroy.call(this,T$L),this._content&&this._content.destroy(T$L),this._vScrollBar&&this._vScrollBar.destroy(T$L),this._hScrollBar&&this._hScrollBar.destroy(T$L),this._vScrollBar=null,this._hScrollBar=null,this._content=null;},T$m.destroyChildren=function(){this._content.destroyChildren();},T$m.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new T$R());},T$m.addChild=function(T$L){return T$L.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(T$L);},T$m.onResize=function(){this._setScrollChanged();},T$m.addChildAt=function(T$L,T$s){return T$L.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(T$L,T$s);},T$m.removeChild=function(T$L){return T$L.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(T$L);},T$m.removeChildAt=function(T$L){return this.getChildAt(T$L).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(T$L);},T$m.removeChildren=function(T$L,T$s){return void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=2147483647),this._content.removeChildren(T$L,T$s),this._setScrollChanged(),this;},T$m.getChildAt=function(T$L){return this._content.getChildAt(T$L);},T$m.getChildByName=function(T$L){return this._content.getChildByName(T$L);},T$m.getChildIndex=function(T$L){return this._content.getChildIndex(T$L);},T$m.changeScroll=function(){this._scrollChanged=!1;var T$L=this.contentWidth||1,T$s=this.contentHeight||1,T$m=this._vScrollBar,T$x=this._hScrollBar,T$w=T$m&&T$s>this._height,T$O=T$x&&T$L>this._width,T$v=T$w?this._width-T$m.width:this._width,T$y=T$O?this._height-T$x.height:this._height;T$m&&(T$m.x=this._width-T$m.width,T$m.y=0,T$m.height=this._height-(T$O?T$x.height:0),T$m.scrollSize=Math.max(.033*this._height,1),T$m.thumbPercent=T$y/T$s,T$m.setScroll(0,T$s-T$y,T$m.value)),T$x&&(T$x.x=0,T$x.y=this._height-T$x.height,T$x.width=this._width-(T$w?T$m.width:0),T$x.scrollSize=Math.max(.033*this._width,1),T$x.thumbPercent=T$v/T$L,T$x.setScroll(0,T$L-T$v,T$x.value));},T$m.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height);},T$m.setContentSize=function(T$L,T$s){var T$m=this._content;T$m.width=T$L,T$m.height=T$s,T$m.scrollRect||(T$m.scrollRect=new T$D()),T$m.scrollRect.setTo(0,0,T$L,T$s),T$m.scrollRect=T$m.scrollRect;},T$m.onScrollBarChange=function(T$L){var T$s=this._content.scrollRect;if(T$s){var T$m=Math.round(T$L.value);T$L.isVertical?T$s.y=T$m:T$s.x=T$m,this._content.scrollRect=T$s;}},T$m.scrollTo=function(T$L,T$s){void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=0),this.vScrollBar&&(this.vScrollBar.value=T$s),this.hScrollBar&&(this.hScrollBar.value=T$L);},T$m.refresh=function(){this.changeScroll();},T$m.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=T$T.superGet(T$R,this,"cacheAs")),T$T.superSet(T$R,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd);},T$m.onScrollEnd=function(){T$T.superSet(T$R,this,"cacheAs",this._$P.cacheAs);},T$m._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll));},T$v(0,T$m,"numChildren",function(){return this._content.numChildren;}),T$v(0,T$m,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null;},function(T$L){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new T$P()),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=T$L;}),T$v(0,T$m,"contentWidth",function(){for(var T$L=0,T$s=this._content.numChildren-1;-1<T$s;T$s--){var T$m=this._content.getChildAt(T$s);T$L=Math.max(T$m.x+T$m.width*T$m.scaleX,T$L);}return T$L;}),T$v(0,T$m,"contentHeight",function(){for(var T$L=0,T$s=this._content.numChildren-1;-1<T$s;T$s--){var T$m=this._content.getChildAt(T$s);T$L=Math.max(T$m.y+T$m.height*T$m.scaleY,T$L);}return T$L;}),T$v(0,T$m,"width",T$L.prototype._$get_width,function(T$L){T$T.superSet(T$R,this,"width",T$L),this._setScrollChanged();}),T$v(0,T$m,"hScrollBar",function(){return this._hScrollBar;}),T$v(0,T$m,"content",function(){return this._content;}),T$v(0,T$m,"height",T$L.prototype._$get_height,function(T$L){T$T.superSet(T$R,this,"height",T$L),this._setScrollChanged();}),T$v(0,T$m,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null;},function(T$L){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new T$sL()),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=T$L;}),T$v(0,T$m,"vScrollBar",function(){return this._vScrollBar;}),T$v(0,T$m,"cacheAs",T$L.prototype._$get_cacheAs,function(T$L){T$T.superSet(T$R,this,"cacheAs",T$L),this._$P.cacheAs=null,"none"!==T$L?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart));}),T$s;}(T$R),T$B=function(T$L){function T$s(T$L){T$s.__super.call(this,T$L),this.isVertical=!1;}return T$O(T$s,"laya.ui.HSlider",T$W),T$s;}(),T$M=function(T$L){function T$m(T$L,T$s){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,T$m.__super.call(this),this.skin=T$s,this.labels=T$L;}T$O(T$m,"laya.ui.UIGroup",T$L);var T$s=T$m.prototype;return T$T.imps(T$s,{"laya.ui.IItem":!0}),T$s.preinitialize=function(){this.mouseEnabled=!0;},T$s.destroy=function(T$L){void 0===T$L&&(T$L=!0),laya.ui.Component.prototype.destroy.call(this,T$L),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null;},T$s.addItem=function(T$L,T$s){void 0===T$s&&(T$s=!0);var T$m=T$L,T$x=this._items.length;if(T$m.name="item"+T$x,this.addChild(T$m),this.initItems(),T$s&&0<T$x){var T$w=this._items[T$x-1];"horizontal"==this._direction?T$m.x=T$w.x+T$w.width+this._space:T$m.y=T$w.y+T$w.height+this._space;}else T$s&&(T$m.x=0,T$m.y=0);return T$x;},T$s.delItem=function(T$L,T$s){void 0===T$s&&(T$s=!0);var T$m=this._items.indexOf(T$L);if(-1!=T$m){var T$x=T$L;this.removeChild(T$x);for(var T$w=T$m+1,T$O=this._items.length;T$w<T$O;T$w++){var T$v=this._items[T$w];T$v.name="item"+(T$w-1),T$s&&("horizontal"==this._direction?T$v.x-=T$x.width+this._space:T$v.y-=T$x.height+this._space);}if(this.initItems(),-1<this._selectedIndex){var T$y;T$y=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=T$y;}}},T$s.initItems=function(){this._items||(this._items=[]);for(var T$L=this._items.length=0;T$L<1e4;T$L++){var T$s=this.getChildByName("item"+T$L);if(null==T$s)break;this._items.push(T$s),T$s.selected=T$L===this._selectedIndex,T$s.clickHandler=T$E.create(this,this.itemClick,[T$L],!1);}},T$s.itemClick=function(T$L){this.selectedIndex=T$L;},T$s.setSelect=function(T$L,T$s){this._items&&-1<T$L&&T$L<this._items.length&&(this._items[T$L].selected=T$s);},T$s.createItem=function(T$L,T$s){return null;},T$s.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var T$L=0,T$s=0,T$m=this._items.length;T$s<T$m;T$s++){var T$x=this._items[T$s];this._skin&&(T$x.skin=this._skin),this._labelColors&&(T$x.labelColors=this._labelColors),this._labelSize&&(T$x.labelSize=this._labelSize),this._labelStroke&&(T$x.labelStroke=this._labelStroke),this._labelStrokeColor&&(T$x.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(T$x.strokeColors=this._strokeColors),this._labelBold&&(T$x.labelBold=this._labelBold),this._labelPadding&&(T$x.labelPadding=this._labelPadding),this._labelAlign&&(T$x.labelAlign=this._labelAlign),this._stateNum&&(T$x.stateNum=this._stateNum),this._labelFont&&(T$x.labelFont=this._labelFont),"horizontal"===this._direction?(T$x.y=0,T$x.x=T$L,T$L+=T$x.width+this._space):(T$x.x=0,T$x.y=T$L,T$L+=T$x.height+this._space);}this.changeSize();},T$s.commitMeasure=function(){this.runCallLater(this.changeLabels);},T$s._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels));},T$v(0,T$s,"labelStrokeColor",function(){return this._labelStrokeColor;},function(T$L){this._labelStrokeColor!=T$L&&(this._labelStrokeColor=T$L,this._setLabelChanged());}),T$v(0,T$s,"skin",function(){return this._skin;},function(T$L){this._skin!=T$L&&(this._skin=T$L,this._setLabelChanged());}),T$v(0,T$s,"selectedIndex",function(){return this._selectedIndex;},function(T$L){this._selectedIndex!=T$L&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=T$L,this.setSelect(T$L,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex));}),T$v(0,T$s,"labels",function(){return this._labels;},function(T$L){if(this._labels!=T$L){if(this._labels=T$L,this.removeChildren(),this._setLabelChanged(),this._labels)for(var T$s=this._labels.split(","),T$m=0,T$x=T$s.length;T$m<T$x;T$m++){var T$w=this.createItem(this._skin,T$s[T$m]);T$w.name="item"+T$m,this.addChild(T$w);}this.initItems();}}),T$v(0,T$s,"strokeColors",function(){return this._strokeColors;},function(T$L){this._strokeColors!=T$L&&(this._strokeColors=T$L,this._setLabelChanged());}),T$v(0,T$s,"labelColors",function(){return this._labelColors;},function(T$L){this._labelColors!=T$L&&(this._labelColors=T$L,this._setLabelChanged());}),T$v(0,T$s,"labelStroke",function(){return this._labelStroke;},function(T$L){this._labelStroke!=T$L&&(this._labelStroke=T$L,this._setLabelChanged());}),T$v(0,T$s,"labelSize",function(){return this._labelSize;},function(T$L){this._labelSize!=T$L&&(this._labelSize=T$L,this._setLabelChanged());}),T$v(0,T$s,"stateNum",function(){return this._stateNum;},function(T$L){this._stateNum!=T$L&&(this._stateNum=T$L,this._setLabelChanged());}),T$v(0,T$s,"labelBold",function(){return this._labelBold;},function(T$L){this._labelBold!=T$L&&(this._labelBold=T$L,this._setLabelChanged());}),T$v(0,T$s,"labelFont",function(){return this._labelFont;},function(T$L){this._labelFont!=T$L&&(this._labelFont=T$L,this._setLabelChanged());}),T$v(0,T$s,"labelPadding",function(){return this._labelPadding;},function(T$L){this._labelPadding!=T$L&&(this._labelPadding=T$L,this._setLabelChanged());}),T$v(0,T$s,"direction",function(){return this._direction;},function(T$L){this._direction=T$L,this._setLabelChanged();}),T$v(0,T$s,"space",function(){return this._space;},function(T$L){this._space=T$L,this._setLabelChanged();}),T$v(0,T$s,"items",function(){return this._items;}),T$v(0,T$s,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null;},function(T$L){this.selectedIndex=this._items.indexOf(T$L);}),T$v(0,T$s,"dataSource",T$L.prototype._$get_dataSource,function(T$L){"number"==typeof(this._dataSource=T$L)&&Math.floor(T$L)==T$L||"string"==typeof T$L?this.selectedIndex=parseInt(T$L):T$L instanceof Array?this.labels=T$L.join(","):T$T.superSet(T$R,this,"dataSource",T$L);}),T$m;}(T$R),T$z=function(T$s){function T$m(T$L,T$s){this._value=null,void 0===T$s&&(T$s=""),T$m.__super.call(this,T$L,T$s);}T$O(T$m,"laya.ui.Radio",T$s);var T$L=T$m.prototype;return T$L.destroy=function(T$L){void 0===T$L&&(T$L=!0),T$s.prototype.destroy.call(this,T$L),this._value=null;},T$L.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1;},T$L.initialize=function(){T$s.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick);},T$L.onClick=function(T$L){this.selected=!0;},T$v(0,T$L,"value",function(){return null!=this._value?this._value:this.label;},function(T$L){this._value=T$L;}),T$m;}(T$A),T$t=function(T$L){function T$s(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,T$s.__super.call(this),this.width=this.height=200;}T$O(T$s,"laya.ui.Tree",T$L);var T$m=T$s.prototype;return T$T.imps(T$m,{"laya.ui.IRender":!0}),T$m.destroy=function(T$L){void 0===T$L&&(T$L=!0),laya.ui.Component.prototype.destroy.call(this,T$L),this._list&&this._list.destroy(T$L),this._list=null,this._source=null,this._renderHandler=null;},T$m.createChildren=function(){this.addChild(this._list=new T$K()),this._list.renderHandler=T$E.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange);},T$m.onListChange=function(T$L){this.event("change");},T$m.getArray=function(){var T$L,T$s=[];for(var T$m in this._source)T$L=this._source[T$m],this.getParentOpenStatus(T$L)&&(T$L.x=this._spaceLeft*this.getDepth(T$L),T$s.push(T$L));return T$s;},T$m.getDepth=function(T$L,T$s){return void 0===T$s&&(T$s=0),null==T$L.nodeParent?T$s:this.getDepth(T$L.nodeParent,T$s+1);},T$m.getParentOpenStatus=function(T$L){var T$s=T$L.nodeParent;return null==T$s||!!T$s.isOpen&&(null==T$s.nodeParent||this.getParentOpenStatus(T$s));},T$m.renderItem=function(T$L,T$s){var T$m=T$L.dataSource;if(T$m){T$L.left=T$m.x;var T$x=T$L.getChildByName("arrow");T$x&&(T$m.hasChild?(T$x.visible=!0,T$x.index=T$m.isOpen?1:0,T$x.tag=T$s,T$x.off("click",this,this.onArrowClick),T$x.on("click",this,this.onArrowClick)):T$x.visible=!1);var T$w=T$L.getChildByName("folder");T$w&&(2==T$w.clipY?T$w.index=T$m.isDirectory?0:1:T$w.index=T$m.isDirectory?T$m.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([T$L,T$s]);}},T$m.onArrowClick=function(T$L){var T$s=T$L.currentTarget.tag;this._list.array[T$s].isOpen=!this._list.array[T$s].isOpen,this.event("open"),this._list.array=this.getArray();},T$m.setItemState=function(T$L,T$s){this._list.array[T$L]&&(this._list.array[T$L].isOpen=T$s,this._list.array=this.getArray());},T$m.fresh=function(){this._list.array=this.getArray(),this.repaint();},T$m.parseXml=function(T$L,T$s,T$m,T$x){var T$w,T$O=T$L.childNodes,T$v=T$O.length;if(!T$x){T$w={};var T$y,T$F=T$L.attributes;for(var T$o in T$F){var T$V=(T$y=T$F[T$o]).nodeName,T$C=T$y.nodeValue;T$w[T$V]="true"==T$C||"false"!=T$C&&T$C;}T$w.nodeParent=T$m,0<T$v&&(T$w.isDirectory=!0),T$w.hasChild=0<T$v,T$s.push(T$w);}for(var T$E=0;T$E<T$v;T$E++){var T$r=T$O[T$E];this.parseXml(T$r,T$s,T$w,!1);}},T$m.parseOpenStatus=function(T$L,T$s){for(var T$m=0,T$x=T$s.length;T$m<T$x;T$m++){var T$w=T$s[T$m];if(T$w.isDirectory)for(var T$O=0,T$v=T$L.length;T$O<T$v;T$O++){var T$y=T$L[T$O];if(T$y.isDirectory&&this.isSameParent(T$y,T$w)&&T$w.label==T$y.label){T$w.isOpen=T$y.isOpen;break;}}}},T$m.isSameParent=function(T$L,T$s){return null==T$L.nodeParent&&null==T$s.nodeParent||null!=T$L.nodeParent&&null!=T$s.nodeParent&&T$L.nodeParent.label==T$s.nodeParent.label&&this.isSameParent(T$L.nodeParent,T$s.nodeParent);},T$m.filter=function(T$L){if(Boolean(T$L)){var T$s=[];this.getFilterSource(this._source,T$s,T$L),this._list.array=T$s;}else this._list.array=this.getArray();},T$m.getFilterSource=function(T$L,T$s,T$m){var T$x;for(var T$w in T$m=T$m.toLocaleLowerCase(),T$L)!(T$x=T$L[T$w]).isDirectory&&-1<String(T$x.label).toLowerCase().indexOf(T$m)&&(T$x.x=0,T$s.push(T$x)),T$x.child&&0<T$x.child.length&&this.getFilterSource(T$x.child,T$s,T$m);},T$v(0,T$m,"spaceBottom",function(){return this._list.spaceY;},function(T$L){this._list.spaceY=T$L;}),T$v(0,T$m,"keepStatus",function(){return this._keepStatus;},function(T$L){this._keepStatus=T$L;}),T$v(0,T$m,"itemRender",function(){return this._list.itemRender;},function(T$L){this._list.itemRender=T$L;}),T$v(0,T$m,"array",function(){return this._list.array;},function(T$L){this._keepStatus&&this._list.array&&T$L&&this.parseOpenStatus(this._list.array,T$L),this._source=T$L,this._list.array=this.getArray();}),T$v(0,T$m,"mouseHandler",function(){return this._list.mouseHandler;},function(T$L){this._list.mouseHandler=T$L;}),T$v(0,T$m,"dataSource",T$L.prototype._$get_dataSource,function(T$L){this._dataSource=T$L,T$T.superSet(T$R,this,"dataSource",T$L);}),T$v(0,T$m,"source",function(){return this._source;}),T$v(0,T$m,"scrollBar",function(){return this._list.scrollBar;}),T$v(0,T$m,"list",function(){return this._list;}),T$v(0,T$m,"scrollBarSkin",function(){return this._list.vScrollBarSkin;},function(T$L){this._list.vScrollBarSkin=T$L;}),T$v(0,T$m,"renderHandler",function(){return this._renderHandler;},function(T$L){this._renderHandler=T$L;}),T$v(0,T$m,"selectedIndex",function(){return this._list.selectedIndex;},function(T$L){this._list.selectedIndex=T$L;}),T$v(0,T$m,"spaceLeft",function(){return this._spaceLeft;},function(T$L){this._spaceLeft=T$L;}),T$v(0,T$m,"selectedItem",function(){return this._list.selectedItem;},function(T$L){this._list.selectedItem=T$L;}),T$v(0,T$m,"width",T$L.prototype._$get_width,function(T$L){T$T.superSet(T$R,this,"width",T$L),this._list.width=T$L;}),T$v(0,T$m,"height",T$L.prototype._$get_height,function(T$L){T$T.superSet(T$R,this,"height",T$L),this._list.height=T$L;}),T$v(0,T$m,"xml",null,function(T$L){var T$s=[];this.parseXml(T$L.childNodes[0],T$s,null,!0),this.array=T$s;}),T$v(0,T$m,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null;}),T$s;}(T$R),T$LL=function(T$L){function T$s(){this._items=null,this._selectedIndex=0,T$s.__super.call(this),this._setIndexHandler=T$E.create(this,this.setIndex,null,!1);}T$O(T$s,"laya.ui.ViewStack",T$L);var T$m=T$s.prototype;return T$T.imps(T$m,{"laya.ui.IItem":!0}),T$m.setItems=function(T$L){this.removeChildren();for(var T$s=0,T$m=0,T$x=T$L.length;T$m<T$x;T$m++){var T$w=T$L[T$m];T$w&&(T$w.name="item"+T$s,this.addChild(T$w),T$s++);}this.initItems();},T$m.addItem=function(T$L){T$L.name="item"+this._items.length,this.addChild(T$L),this.initItems();},T$m.initItems=function(){this._items=[];for(var T$L=0;T$L<1e4;T$L++){var T$s=this.getChildByName("item"+T$L);if(null==T$s)break;this._items.push(T$s),T$s.visible=T$L==this._selectedIndex;}},T$m.setSelect=function(T$L,T$s){this._items&&-1<T$L&&T$L<this._items.length&&(this._items[T$L].visible=T$s);},T$m.setIndex=function(T$L){this.selectedIndex=T$L;},T$v(0,T$m,"dataSource",T$L.prototype._$get_dataSource,function(T$L){if("number"==typeof(this._dataSource=T$L)&&Math.floor(T$L)==T$L||"string"==typeof T$L)this.selectedIndex=parseInt(T$L);else for(var T$s in this._dataSource)this.hasOwnProperty(T$s)&&(this[T$s]=this._dataSource[T$s]);}),T$v(0,T$m,"selectedIndex",function(){return this._selectedIndex;},function(T$L){this._selectedIndex!=T$L&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=T$L,this.setSelect(this._selectedIndex,!0));}),T$v(0,T$m,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null;},function(T$L){this.selectedIndex=this._items.indexOf(T$L);}),T$v(0,T$m,"items",function(){return this._items;}),T$v(0,T$m,"setIndexHandler",function(){return this._setIndexHandler;},function(T$L){this._setIndexHandler=T$L;}),T$s;}(T$R),T$sL=function(T$L){function T$s(){T$s.__super.call(this);}return T$O(T$s,"laya.ui.VScrollBar",T$Z),T$s;}(),T$mL=function(T$s){function T$m(T$L){this._bg=null,this._skin=null,T$m.__super.call(this),void 0===T$L&&(T$L=""),this.text=T$L,this.skin=this.skin;}T$O(T$m,"laya.ui.TextInput",T$s);var T$L=T$m.prototype;return T$L.preinitialize=function(){this.mouseEnabled=!0;},T$L.destroy=function(T$L){T$e.clearCache(this,this._skin),void 0===T$L&&(T$L=!0),T$s.prototype.destroy.call(this,T$L),this._bg&&this._bg.destroy(),this._bg=null;},T$L.createChildren=function(){this.addChild(this._tf=new T$r()),this._tf.padding=T$N.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus);},T$L._onFocus=function(){this.event("focus",this);},T$L._onBlur=function(){this.event("blur",this);},T$L._onInput=function(){this.event("input",this);},T$L._onEnter=function(){this.event("enter",this);},T$L.initialize=function(){this.width=128,this.height=22;},T$L.select=function(){this._tf.select();},T$L.setSelection=function(T$L,T$s){this._tf.setSelection(T$L,T$s);},T$v(0,T$L,"text",T$s.prototype._$get_text,function(T$L){this._tf.text!=T$L&&(T$L+="",this._tf.text=T$L,this.event("change"));}),T$v(0,T$L,"bg",function(){return this._bg;},function(T$L){this.graphics=this._bg=T$L;}),T$v(0,T$L,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster;},function(T$L){this._tf.inputElementYAdjuster=T$L;}),T$v(0,T$L,"multiline",function(){return this._tf.multiline;},function(T$L){this._tf.multiline=T$L;}),T$v(0,T$L,"skin",function(){return this._skin;},function(T$L){this._skin!=T$L&&(T$e.clearCache(this,this._skin),this._skin=T$L,this._bg||(this.graphics=this._bg=new T$c()),T$e.keepCache(this,this._skin),this._bg.source=T$e.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height));}),T$v(0,T$L,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null;},function(T$L){this._bg||(this.graphics=this._bg=new T$c()),this._bg.sizeGrid=T$i.fillArray(T$N.defaultSizeGrid,T$L,Number);}),T$v(0,T$L,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster;},function(T$L){this._tf.inputElementXAdjuster=T$L;}),T$v(0,T$L,"width",T$s.prototype._$get_width,function(T$L){T$T.superSet(T$X,this,"width",T$L),this._bg&&(this._bg.width=T$L);}),T$v(0,T$L,"height",T$s.prototype._$get_height,function(T$L){T$T.superSet(T$X,this,"height",T$L),this._bg&&(this._bg.height=T$L);}),T$v(0,T$L,"editable",function(){return this._tf.editable;},function(T$L){this._tf.editable=T$L;}),T$v(0,T$L,"restrict",function(){return this._tf.restrict;},function(T$L){this._tf.restrict=T$L;}),T$v(0,T$L,"prompt",function(){return this._tf.prompt;},function(T$L){this._tf.prompt=T$L;}),T$v(0,T$L,"promptColor",function(){return this._tf.promptColor;},function(T$L){this._tf.promptColor=T$L;}),T$v(0,T$L,"maxChars",function(){return this._tf.maxChars;},function(T$L){this._tf.maxChars=T$L;}),T$v(0,T$L,"focus",function(){return this._tf.focus;},function(T$L){this._tf.focus=T$L;}),T$v(0,T$L,"type",function(){return this._tf.type;},function(T$L){this._tf.type=T$L;}),T$v(0,T$L,"asPassword",function(){return this._tf.asPassword;},function(T$L){this._tf.asPassword=T$L;}),T$m;}(T$X),T$xL=function(T$L){function T$s(){T$s.__super.call(this);}return T$O(T$s,"laya.ui.VSlider",T$W),T$s;}(),T$wL=function(T$L){function T$x(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,T$x.__super.call(this);}T$O(T$x,"laya.ui.Dialog",T$L);var T$s=T$x.prototype;return T$s.initialize=function(){this.popupEffect=T$x.manager.popupEffectHandler,this.closeEffect=T$x.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick);},T$s._dealDragArea=function(){var T$L=this.getChildByName("drag");T$L&&(this.dragArea=T$L.x+","+T$L.y+","+T$L.width+","+T$L.height,T$L.removeSelf());},T$s._onClick=function(T$L){var T$s=T$L.target;if(T$s)switch(T$s.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(T$s.name);}},T$s.show=function(T$L,T$s){void 0===T$L&&(T$L=!1),void 0===T$s&&(T$s=!0),this._open(!1,T$L,T$s);},T$s.popup=function(T$L,T$s){void 0===T$L&&(T$L=!1),void 0===T$s&&(T$s=!0),this._open(!0,T$L,T$s);},T$s._open=function(T$L,T$s,T$m){T$x.manager.lock(!1),this.isModal=T$L,T$x.manager.open(this,T$s,T$m);},T$s.onOpened=function(){},T$s.close=function(T$L,T$s){void 0===T$s&&(T$s=!0),T$x.manager.close(this,T$L,T$s);},T$s.onClosed=function(T$L){},T$s._onMouseDown=function(T$L){var T$s=this.getMousePoint();this._dragArea.contains(T$s.x,T$s.y)?this.startDrag():this.stopDrag();},T$v(0,T$s,"dragArea",function(){return this._dragArea?this._dragArea.toString():null;},function(T$L){if(T$L){var T$s=T$i.fillArray([0,0,0,0],T$L,Number);this._dragArea=new T$D(T$s[0],T$s[1],T$s[2],T$s[3]),this.on("mousedown",this,this._onMouseDown);}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown);}),T$v(0,T$s,"isPopup",function(){return null!=this.parent;}),T$v(0,T$s,"zOrder",T$L.prototype._$get_zOrder,function(T$L){T$T.superSet(T$n,this,"zOrder",T$L),T$x.manager._checkMask();}),T$v(1,T$x,"manager",function(){return T$x._manager=T$x._manager||new T$G();},function(T$L){T$x._manager=T$L;}),T$x.setLockView=function(T$L){T$x.manager.setLockView(T$L);},T$x.lock=function(T$L){T$x.manager.lock(T$L);},T$x.closeAll=function(){T$x.manager.closeAll();},T$x.getDialogsByGroup=function(T$L){return T$x.manager.getDialogsByGroup(T$L);},T$x.closeByGroup=function(T$L){return T$x.manager.closeByGroup(T$L);},T$x.CLOSE="close",T$x.CANCEL="cancel",T$x.SURE="sure",T$x.NO="no",T$x.OK="ok",T$x.YES="yes",T$x._manager=null,T$x;}(T$n),T$OL=function(T$L){function T$s(){T$s.__super.call(this);}T$O(T$s,"laya.ui.HBox",T$L);var T$m=T$s.prototype;return T$m.sortItem=function(T$L){T$L&&T$L.sort(function(T$L,T$s){return T$L.x-T$s.x;});},T$m.changeItems=function(){this._itemChanged=!1;for(var T$L=[],T$s=0,T$m=0,T$x=this.numChildren;T$m<T$x;T$m++){var T$w=this.getChildAt(T$m);T$w&&T$w.layoutEnabled&&(T$L.push(T$w),T$s=this._height?this._height:Math.max(T$s,T$w.height*T$w.scaleY));}this.sortItem(T$L);var T$O=0;for(T$m=0,T$x=T$L.length;T$m<T$x;T$m++)(T$w=T$L[T$m]).x=T$O,T$O+=T$w.width*T$w.scaleX+this._space,"top"==this._align?T$w.y=0:"middle"==this._align?T$w.y=.5*(T$s-T$w.height*T$w.scaleY):"bottom"==this._align&&(T$w.y=T$s-T$w.height*T$w.scaleY);this.changeSize();},T$v(0,T$m,"height",T$L.prototype._$get_height,function(T$L){this._height!=T$L&&(T$T.superSet(T$l,this,"height",T$L),this.callLater(this.changeItems));}),T$s.NONE="none",T$s.TOP="top",T$s.MIDDLE="middle",T$s.BOTTOM="bottom",T$s;}(T$l),T$vL=function(T$L){function T$s(){T$s.__super.call(this);}T$O(T$s,"laya.ui.VBox",T$L);var T$m=T$s.prototype;return T$m.changeItems=function(){this._itemChanged=!1;for(var T$L=[],T$s=0,T$m=0,T$x=this.numChildren;T$m<T$x;T$m++){var T$w=this.getChildAt(T$m);T$w&&T$w.layoutEnabled&&(T$L.push(T$w),T$s=this._width?this._width:Math.max(T$s,T$w.width*T$w.scaleX));}this.sortItem(T$L);var T$O=0;for(T$m=0,T$x=T$L.length;T$m<T$x;T$m++)(T$w=T$L[T$m]).y=T$O,T$O+=T$w.height*T$w.scaleY+this._space,"left"==this._align?T$w.x=0:"center"==this._align?T$w.x=.5*(T$s-T$w.width*T$w.scaleX):"right"==this._align&&(T$w.x=T$s-T$w.width*T$w.scaleX);this.changeSize();},T$v(0,T$m,"width",T$L.prototype._$get_width,function(T$L){this._width!=T$L&&(T$T.superSet(T$l,this,"width",T$L),this.callLater(this.changeItems));}),T$s.NONE="none",T$s.LEFT="left",T$s.CENTER="center",T$s.RIGHT="right",T$s;}(T$l),T$yL=function(T$L){function T$s(){T$s.__super.call(this);}return T$O(T$s,"laya.ui.RadioGroup",T$M),T$s.prototype.createItem=function(T$L,T$s){return new T$z(T$L,T$s);},T$s;}(),T$FL=function(T$L){function T$s(){T$s.__super.call(this);}return T$O(T$s,"laya.ui.Tab",T$M),T$s.prototype.createItem=function(T$L,T$s){return new T$A(T$L,T$s);},T$s;}(),T$oL=function(T$s){function T$m(T$L){this._vScrollBar=null,this._hScrollBar=null,void 0===T$L&&(T$L=""),T$m.__super.call(this,T$L);}T$O(T$m,"laya.ui.TextArea",T$s);var T$L=T$m.prototype;return T$L.destroy=function(T$L){void 0===T$L&&(T$L=!0),T$s.prototype.destroy.call(this,T$L),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null;},T$L.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0;},T$L.onVBarChanged=function(T$L){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value);},T$L.onHBarChanged=function(T$L){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value);},T$L.changeScroll=function(){var T$L=this._vScrollBar&&0<this._tf.maxScrollY,T$s=this._hScrollBar&&0<this._tf.maxScrollX,T$m=T$L?this._width-this._vScrollBar.width:this._width,T$x=T$s?this._height-this._hScrollBar.height:this._height,T$w=this._tf.padding||T$N.labelPadding;this._tf.width=T$m,this._tf.height=T$x,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-T$w[2],this._vScrollBar.y=T$w[1],this._vScrollBar.height=this._height-(T$s?this._hScrollBar.height:0)-T$w[1]-T$w[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=T$x/Math.max(this._tf.textHeight,T$x),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=T$L),this._hScrollBar&&(this._hScrollBar.x=T$w[0],this._hScrollBar.y=this._height-this._hScrollBar.height-T$w[3],this._hScrollBar.width=this._width-(T$L?this._vScrollBar.width:0)-T$w[0]-T$w[2],this._hScrollBar.scrollSize=Math.max(.033*T$m,1),this._hScrollBar.thumbPercent=T$m/Math.max(this._tf.textWidth,T$m),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=T$s);},T$L.scrollTo=function(T$L){this.commitMeasure(),this._tf.scrollY=T$L;},T$v(0,T$L,"scrollY",function(){return this._tf.scrollY;}),T$v(0,T$L,"width",T$s.prototype._$get_width,function(T$L){T$T.superSet(T$mL,this,"width",T$L),this.callLater(this.changeScroll);}),T$v(0,T$L,"hScrollBar",function(){return this._hScrollBar;}),T$v(0,T$L,"height",T$s.prototype._$get_height,function(T$L){T$T.superSet(T$mL,this,"height",T$L),this.callLater(this.changeScroll);}),T$v(0,T$L,"maxScrollX",function(){return this._tf.maxScrollX;}),T$v(0,T$L,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null;},function(T$L){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new T$sL()),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=T$L;}),T$v(0,T$L,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null;},function(T$L){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new T$P()),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=T$L;}),T$v(0,T$L,"vScrollBar",function(){return this._vScrollBar;}),T$v(0,T$L,"maxScrollY",function(){return this._tf.maxScrollY;}),T$v(0,T$L,"scrollX",function(){return this._tf.scrollX;}),T$m;}(T$mL);!function(T$L){function T$s(){this._uiView=null,this.isCloseOther=!1,T$s.__super.call(this);}T$O(T$s,"laya.ui.AsynDialog",T$wL);var T$m=T$s.prototype;T$m.createView=function(T$L){this._uiView=T$L;},T$m._open=function(T$L,T$s,T$m){this.isModal=T$L,this.isCloseOther=T$s,T$wL.manager.lock(!0),this._uiView?this.onCreated():this.onOpen();},T$m.onCreated=function(){this.createUI(),this.onOpen();},T$m.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea();},T$m.onOpen=function(){T$wL.manager.open(this,this.isCloseOther),T$wL.manager.lock(!1);},T$m.close=function(T$L,T$s){void 0===T$s&&(T$s=!0),T$wL.manager.close(this),this.onClose();},T$m.onClose=function(){},T$m.destroy=function(T$L){void 0===T$L&&(T$L=!0),laya.ui.View.prototype.destroy.call(this,T$L),this._uiView=null,this.onDestroy();},T$m.onDestroy=function(){};}();T$T.__init([T$n]);}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$L,T$s){"use strict";for(var T$m in Object.defineProperty(T$s,"__esModule",{value:!0}),Laya){var T$x=Laya[T$m];T$x&&T$x.__isclass&&(T$s[T$m]=T$x);}}),function(T$E,T$L,T$H){T$H.un,T$H.uns;var T$C=T$H.static,T$r=T$H.class,T$u=T$H.getset,T$x=T$H.__newvec,T$S=laya.maths.Arith,T$v=laya.webgl.atlas.AtlasResourceManager,T$m=laya.webgl.shader.BaseShader,T$h=laya.utils.Browser,T$y=laya.webgl.utils.Buffer,T$Y=laya.utils.Byte,T$w=laya.utils.ClassUtils,T$F=T$H.Config,T$O=(laya.events.Event,laya.events.EventDispatcher),T$N=laya.utils.Handler,T$D=laya.net.Loader,T$s=laya.net.LoaderManager,T$o=(laya.maths.MathUtil,laya.display.Node),T$T=laya.renders.Render,T$V=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),T$j=laya.resource.Resource,T$e=laya.utils.RunDriver,T$b=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),T$a=laya.display.Sprite,T$f=laya.utils.Stat,T$_=laya.utils.StringKey,T$i=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),T$Q=laya.utils.Utils,T$U=laya.webgl.WebGL,T$c=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;T$H.interface("laya.d3.core.IClone"),T$H.interface("laya.d3.graphics.IVertex"),T$H.interface("laya.d3.core.render.IUpdate"),T$H.interface("laya.d3.core.scene.ITreeNode"),T$H.interface("laya.d3.core.render.IRenderable");(function(){function T$A(){}T$r(T$A,"laya.d3.animation.AnimationClipParser01"),T$A.READ_DATA=function(){T$A._DATA.offset=T$A._reader.getUint32(),T$A._DATA.size=T$A._reader.getUint32();},T$A.READ_BLOCK=function(){for(var T$L=T$A._BLOCK.count=T$A._reader.getUint16(),T$s=T$A._BLOCK.blockStarts=[],T$m=T$A._BLOCK.blockLengths=[],T$x=0;T$x<T$L;T$x++)T$s.push(T$A._reader.getUint32()),T$m.push(T$A._reader.getUint32());},T$A.READ_STRINGS=function(){var T$L=T$A._reader.getUint32(),T$s=T$A._reader.getUint16(),T$m=T$A._reader.pos;T$A._reader.pos=T$L+T$A._DATA.offset;for(var T$x=0;T$x<T$s;T$x++)T$A._strings[T$x]=T$A._reader.readUTFString();T$A._reader.pos=T$m;},T$A.parse=function(T$L,T$s){T$A._animationClip=T$L;(T$A._reader=T$s).__getBuffer();T$A.READ_DATA(),T$A.READ_BLOCK(),T$A.READ_STRINGS();for(var T$m=0,T$x=T$A._BLOCK.count;T$m<T$x;T$m++){var T$w=T$s.getUint16(),T$O=T$A._strings[T$w],T$v=T$A["READ_"+T$O];if(null==T$v)throw new Error("model file err,no this function:"+T$w+" "+T$O);T$v.call();}},T$A.READ_ANIMATIONS=function(){var T$L,T$s=0,T$m=0,T$x=T$A._reader,T$w=T$x.__getBuffer(),T$O=[],T$v=T$x.getUint8();for(T$O.length=T$v,T$s=0;T$s<T$v;T$s++)T$O[T$s]=T$x.getUint16();var T$y=[],T$F=T$x.getUint16();for(T$y.length=T$F,T$s=0;T$s<T$F;T$s++)T$y[T$s]=T$x.getFloat32();var T$o=T$A._animationClip;T$o.name=T$A._strings[T$x.getUint16()];var T$V=T$o._duration=T$x.getFloat32();T$o.islooping=!!T$x.getByte(),T$o._frameRate=T$x.getInt16();var T$C=T$x.getInt16(),T$E=T$o._nodes=new Array();T$E.length=T$C,(T$o._publicClipDatas=[]).length=T$C;var T$r=T$o._nodesMap={},T$u=0,T$T=0;for(T$s=0;T$s<T$C;T$s++){T$L=T$E[T$s]=new T$I();var T$j=T$x.getUint16(),T$D=T$L.path=[];for(T$D.length=T$j,T$m=0;T$m<T$j;T$m++)T$D[T$m]=T$A._strings[T$x.getUint16()];var T$e=T$D.join("/"),T$b=T$r[T$e];T$b||(T$r[T$e]=T$b=[]),T$b.push(T$L);var T$S=T$x.getInt16();-1!==T$S&&(T$L.componentType=T$A._strings[T$S]);var T$H=T$d._propertyIndexDic[T$A._strings[T$x.getUint16()]];if(null==T$H)throw new Error("AnimationClipParser01:unknown property name.");var T$Y=T$H<4,T$a=!T$Y||T$Y&&""===T$D[0];(T$L._cacheProperty=T$a)?T$u++:T$T++,T$L.propertyNameID=T$H;var T$f=T$O[T$x.getUint8()];T$L.keyFrameWidth=T$f/4;var T$_=T$L.keyFrames=[],T$Q=T$_.length=T$x.getUint16(),T$N=null,T$i=NaN;for(T$m=0;T$m<T$Q;T$m++){var T$U=T$_[T$m]=new T$X();T$i=T$U.startTime=T$y[T$x.getUint16()];var T$c=T$x.pos;T$U.inTangent=new Float32Array(T$w.slice(T$c,T$c+T$f)),T$x.pos+=T$f,T$c=T$x.pos,T$U.outTangent=new Float32Array(T$w.slice(T$c,T$c+T$f)),T$x.pos+=T$f,T$c=T$x.pos,T$U.data=new Float32Array(T$w.slice(T$c,T$c+T$f)),T$x.pos+=T$f,T$N&&(T$N.next=T$U,T$N.duration=T$i-T$N.startTime),T$N=T$U;}T$U.next=null,T$U.duration=T$V-T$i;}var T$h=T$o._nodeToCachePropertyMap=new Int32Array(T$C),T$G=T$o._cachePropertyMap=new Int32Array(T$u),T$R=T$o._unCachePropertyMap=new Int32Array(T$T);for(T$u=T$T=0,T$s=0;T$s<T$C;T$s++)(T$L=T$E[T$s])._cacheProperty?(T$h[T$s]=T$u,T$G[T$u++]=T$s):T$R[T$T++]=T$s;},T$A._animationClip=null,T$A._reader=null,T$A._strings=[],T$C(T$A,["_BLOCK",function(){return this._BLOCK={count:0};},"_DATA",function(){return this._DATA={offset:0,size:0};}]);})(),function(){function T$Z(){}T$r(T$Z,"laya.d3.animation.AnimationClipParser02"),T$Z.READ_DATA=function(){T$Z._DATA.offset=T$Z._reader.getUint32(),T$Z._DATA.size=T$Z._reader.getUint32();},T$Z.READ_BLOCK=function(){for(var T$L=T$Z._BLOCK.count=T$Z._reader.getUint16(),T$s=T$Z._BLOCK.blockStarts=[],T$m=T$Z._BLOCK.blockLengths=[],T$x=0;T$x<T$L;T$x++)T$s.push(T$Z._reader.getUint32()),T$m.push(T$Z._reader.getUint32());},T$Z.READ_STRINGS=function(){var T$L=T$Z._reader.getUint32(),T$s=T$Z._reader.getUint16(),T$m=T$Z._reader.pos;T$Z._reader.pos=T$L+T$Z._DATA.offset;for(var T$x=0;T$x<T$s;T$x++)T$Z._strings[T$x]=T$Z._reader.readUTFString();T$Z._reader.pos=T$m;},T$Z.parse=function(T$L,T$s){T$Z._animationClip=T$L;(T$Z._reader=T$s).__getBuffer();T$Z.READ_DATA(),T$Z.READ_BLOCK(),T$Z.READ_STRINGS();for(var T$m=0,T$x=T$Z._BLOCK.count;T$m<T$x;T$m++){var T$w=T$s.getUint16(),T$O=T$Z._strings[T$w],T$v=T$Z["READ_"+T$O];if(null==T$v)throw new Error("model file err,no this function:"+T$w+" "+T$O);T$v.call();}},T$Z.READ_ANIMATIONS=function(){var T$L,T$s=0,T$m=0,T$x=T$Z._reader,T$w=T$x.__getBuffer(),T$O=[],T$v=T$x.getUint8();for(T$O.length=T$v,T$s=0;T$s<T$v;T$s++)T$O[T$s]=T$x.getUint16();var T$y=[],T$F=T$x.getUint16();for(T$y.length=T$F,T$s=0;T$s<T$F;T$s++)T$y[T$s]=T$x.getFloat32();var T$o=T$Z._animationClip;T$o.name=T$Z._strings[T$x.getUint16()];var T$V=T$o._duration=T$x.getFloat32();T$o.islooping=!!T$x.getByte(),T$o._frameRate=T$x.getInt16();var T$C=T$x.getInt16(),T$E=T$o._nodes=new Array();T$E.length=T$C,(T$o._publicClipDatas=[]).length=T$C;var T$r=T$o._nodesMap={},T$u=0,T$T=0;for(T$s=0;T$s<T$C;T$s++){T$L=T$E[T$s]=new T$I();var T$j=T$x.getUint16(),T$D=T$L.path=[];for(T$D.length=T$j,T$m=0;T$m<T$j;T$m++)T$D[T$m]=T$Z._strings[T$x.getUint16()];var T$e=T$D.join("/"),T$b=T$r[T$e];T$b||(T$r[T$e]=T$b=[]),T$b.push(T$L);var T$S=T$x.getInt16();-1!==T$S&&(T$L.componentType=T$Z._strings[T$S]);var T$H=T$d._propertyIndexDic[T$Z._strings[T$x.getUint16()]];if(null==T$H)throw new Error("AnimationClipParser02:unknown property name.");var T$Y=T$H<4,T$a=!T$Y||T$Y&&""===T$D[0];(T$L._cacheProperty=T$a)?T$u++:T$T++,T$L.propertyNameID=T$H;var T$f=T$O[T$x.getUint8()];T$L.keyFrameWidth=T$f/4;var T$_=T$L.keyFrames=[],T$Q=T$_.length=T$x.getUint16(),T$N=null,T$i=NaN;for(T$m=0;T$m<T$Q;T$m++){var T$U=T$_[T$m]=new T$X();T$i=T$U.startTime=T$y[T$x.getUint16()];var T$c=T$x.pos;T$U.inTangent=new Float32Array(T$w.slice(T$c,T$c+T$f)),T$x.pos+=T$f,T$c=T$x.pos,T$U.outTangent=new Float32Array(T$w.slice(T$c,T$c+T$f)),T$x.pos+=T$f,T$c=T$x.pos,T$U.data=new Float32Array(T$w.slice(T$c,T$c+T$f)),T$x.pos+=T$f,T$N&&(T$N.next=T$U,T$N.duration=T$i-T$N.startTime),T$N=T$U;}T$U.next=null,T$U.duration=T$V-T$i;}var T$h=T$x.getUint16();for(T$s=0;T$s<T$h;T$s++){var T$G,T$R=new T$W();T$R.time=T$x.getFloat32(),T$R.eventName=T$Z._strings[T$x.getUint16()];var T$A=T$x.getUint16();for(0<T$A&&(T$R.params=T$G=[]),T$m=0;T$m<T$A;T$m++){switch(T$x.getByte()){case 0:T$G.push(!!T$x.getByte());break;case 1:T$G.push(T$x.getInt32());break;case 2:T$G.push(T$x.getFloat32());break;case 3:T$G.push(T$Z._strings[T$x.getUint16()]);break;default:throw new Error("unknown type.");}}T$o.addEvent(T$R);}var T$g=T$o._nodeToCachePropertyMap=new Int32Array(T$C),T$$=T$o._cachePropertyMap=new Int32Array(T$u),T$p=T$o._unCachePropertyMap=new Int32Array(T$T);for(T$u=T$T=0,T$s=0;T$s<T$C;T$s++)(T$L=T$E[T$s])._cacheProperty?(T$g[T$s]=T$u,T$$[T$u++]=T$s):T$p[T$T++]=T$s;},T$Z._animationClip=null,T$Z._reader=null,T$Z._strings=[],T$C(T$Z,["_BLOCK",function(){return this._BLOCK={count:0};},"_DATA",function(){return this._DATA={offset:0,size:0};}]);}();var T$W=function(){function T$L(){this.time=NaN,this.eventName=null,this.params=null;}return T$r(T$L,"laya.d3.animation.AnimationEvent"),T$L;}(),T$d=function(){function T$x(){this._childs=[],this.transform=new T$es(this);}T$r(T$x,"laya.d3.animation.AnimationNode");var T$L=T$x.prototype;return T$H.imps(T$L,{"laya.d3.core.IClone":!0}),T$L.addChild=function(T$L){T$L._parent=this,T$L.transform.setParent(this.transform),this._childs.push(T$L);},T$L.removeChild=function(T$L){var T$s=this._childs.indexOf(T$L);-1!==T$s&&this._childs.splice(T$s,1);},T$L.getChildByName=function(T$L){for(var T$s=0,T$m=this._childs.length;T$s<T$m;T$s++){var T$x=this._childs[T$s];if(T$x.name===T$L)return T$x;}return null;},T$L.getChildByIndex=function(T$L){return this._childs[T$L];},T$L.getChildCount=function(){return this._childs.length;},T$L.cloneTo=function(T$L){var T$s=T$L;T$s.name=this.name;for(var T$m=0,T$x=this._childs.length;T$m<T$x;T$m++){var T$w=this._childs[T$m],T$O=T$w.clone();T$s.addChild(T$O);var T$v=T$w.transform,T$y=T$O.transform;T$y.setLocalPosition(T$v.getLocalPosition()),T$y.setLocalRotation(T$v.getLocalRotation()),T$y.setLocalScale(T$v.getLocalScale()),T$y._localRotationEuler=T$v._localRotationEuler,T$y._setWorldMatrixIgnoreUpdate(T$v.getWorldMatrix());}},T$L.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$x.__init__=function(){T$x.registerAnimationNodeProperty("localPosition",T$x._getLocalPosition,T$x._setLocalPosition),T$x.registerAnimationNodeProperty("localRotation",T$x._getLocalRotation,T$x._setLocalRotation),T$x.registerAnimationNodeProperty("localScale",T$x._getLocalScale,T$x._setLocalScale),T$x.registerAnimationNodeProperty("localRotationEuler",T$x._getLocalRotationEuler,T$x._setLocalRotationEuler),T$x.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",T$x._getParticleRenderSharedMaterialTintColor,T$x._setParticleRenderSharedMaterialTintColor),T$x.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",T$x._getMeshRenderSharedMaterialTilingOffset,T$x._setMeshRenderSharedMaterialTilingOffset),T$x.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",T$x._getMeshRenderSharedMaterialAlbedo,T$x._setMeshRenderSharedMaterialAlbedo),T$x.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",T$x._getSkinnedMeshRenderSharedMaterialTilingOffset,T$x._setSkinnedMeshRenderSharedMaterialTilingOffset),T$x.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",T$x._getSkinnedMeshRenderSharedMaterialAlbedo,T$x._setSkinnedMeshRenderSharedMaterialAlbedo),T$x.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",T$x._getMeshRenderSharedMaterialAlbedo,T$x._setMeshRenderSharedMaterialAlbedo),T$x.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",T$x._getSkinnedMeshRenderSharedMaterialAlbedo,T$x._setSkinnedMeshRenderSharedMaterialAlbedo),T$x.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",T$x._getMeshRenderSharedMaterialIntensity,T$x._setMeshRenderSharedMaterialIntensity),T$x.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",T$x._getMeshRenderSharedMaterialAlpha,T$x._setMeshRenderSharedMaterialAlpha),T$x.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",T$x._getMeshRenderSharedMaterialAlphaColor,T$x._setMeshRenderSharedMaterialAlphaColor),T$x.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",T$x._getMeshRenderSharedMaterialBaseColor,T$x._setMeshRenderSharedMaterialBaseColor),T$x.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",T$x._getMeshRenderSharedMaterialDissolve,T$x._setMeshRenderSharedMaterialDissolve),T$x.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",T$x._getMeshRenderSharedMaterialDissolveSpeed,T$x._setMeshRenderSharedMaterialDissolveSpeed),T$x.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",T$x._getMeshRenderSharedMaterialMMultiplier,T$x._setMeshRenderSharedMaterialMMultiplier),T$x.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",T$x._getMeshRenderSharedMaterialBaseScrollSpeedX,T$x._setMeshRenderSharedMaterialBaseScrollSpeedX),T$x.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",T$x._getMeshRenderSharedMaterialBaseScrollSpeedY,T$x._setMeshRenderSharedMaterialBaseScrollSpeedY),T$x.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",T$x._getMeshRenderSharedMaterialSecondScrollSpeedX,T$x._setMeshRenderSharedMaterialSecondScrollSpeedX),T$x.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",T$x._getMeshRenderSharedMaterialSecondScrollSpeedY,T$x._setMeshRenderSharedMaterialSecondScrollSpeedY),T$x.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",T$x._getMeshRenderSharedMaterialDetailTilingOffset,T$x._setMeshRenderSharedMaterialDetailTilingOffset),T$x.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",T$x._getMeshRenderSharedMaterialDissolveTilingOffset,T$x._setMeshRenderSharedMaterialDissolveTilingOffset),T$x.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",T$x._getMeshRenderSharedMaterialMaskTilingOffset,T$x._setMeshRenderSharedMaterialMaskTilingOffset);},T$x.registerAnimationNodeProperty=function(T$L,T$s,T$m){if(T$x._propertyIndexDic[T$L])throw new Error("AnimationNode: this propertyName has registered.");T$x._propertyIndexDic[T$L]=T$x._propertyIDCounter,T$x._propertyGetFuncs[T$x._propertyIDCounter]=T$s,T$x._propertySetFuncs[T$x._propertyIDCounter]=T$m,T$x._propertyIDCounter++;},T$x._getLocalPosition=function(T$L,T$s){return T$L?T$L.transform.getLocalPosition():T$s._transform.localPosition.elements;},T$x._setLocalPosition=function(T$L,T$s,T$m){if(T$L)T$L.transform.setLocalPosition(T$m);else{var T$x=T$s._transform,T$w=T$x.localPosition;T$w.elements=T$m,T$x.localPosition=T$w;}},T$x._getLocalRotation=function(T$L,T$s){return T$L?T$L.transform.getLocalRotation():T$s._transform.localRotation.elements;},T$x._setLocalRotation=function(T$L,T$s,T$m){if(T$L)T$L.transform.setLocalRotation(T$m);else{var T$x=T$s._transform,T$w=T$x.localRotation;T$w.elements=T$m,T$x.localRotation=T$w;}},T$x._getLocalScale=function(T$L,T$s){return T$L?T$L.transform.getLocalScale():T$s._transform.localScale.elements;},T$x._setLocalScale=function(T$L,T$s,T$m){if(T$L)T$L.transform.setLocalScale(T$m);else{var T$x=T$s._transform,T$w=T$x.localScale;T$w.elements=T$m,T$x.localScale=T$w;}},T$x._getLocalRotationEuler=function(T$L,T$s){return T$L?T$L.transform.getLocalRotationEuler():T$s._transform.localRotationEuler.elements;},T$x._setLocalRotationEuler=function(T$L,T$s,T$m){if(T$L)T$L.transform.setLocalRotationEuler(T$m);else{var T$x=T$s._transform,T$w=T$x.localRotationEuler;T$w.elements=T$m,T$x.localRotationEuler=T$w;}},T$x._getMeshRenderSharedMaterialTilingOffset=function(T$L,T$s){if(T$L){var T$m=T$L.transform._entity;return T$m?T$m.owner.meshRender.sharedMaterial.tilingOffset.elements:null;}return T$s.meshRender.sharedMaterial.tilingOffset.elements;},T$x._setMeshRenderSharedMaterialTilingOffset=function(T$L,T$s,T$m){var T$x,T$w;if(T$L){var T$O=T$L.transform._entity;T$O&&((T$w=(T$x=T$O.owner.meshRender.material).tilingOffset).elements=T$m,T$x.tilingOffset=T$w);}else(T$w=(T$x=T$s.meshRender.material).tilingOffset).elements=T$m,T$x.tilingOffset=T$w;},T$x._getMeshRenderSharedMaterialAlbedo=function(T$L,T$s){if(T$L){var T$m=T$L.transform._entity;return T$m?T$m.owner.meshRender.sharedMaterial.albedoColor.elements:null;}return T$s.meshRender.sharedMaterial.albedoColor.elements;},T$x._setMeshRenderSharedMaterialAlbedo=function(T$L,T$s,T$m){var T$x,T$w;if(T$L){var T$O=T$L.transform._entity;T$O&&((T$w=(T$x=T$O.owner.meshRender.material).albedoColor).elements=T$m,T$x.albedoColor=T$w);}else(T$w=(T$x=T$s.meshRender.material).albedoColor).elements=T$m,T$x.albedoColor=T$w;},T$x._getSkinnedMeshRenderSharedMaterialTilingOffset=function(T$L,T$s){if(T$L){var T$m=T$L.transform._entity;return T$m?T$m.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null;}return T$s.skinnedMeshRender.sharedMaterial.tilingOffset.elements;},T$x._setSkinnedMeshRenderSharedMaterialTilingOffset=function(T$L,T$s,T$m){var T$x,T$w;if(T$L){var T$O=T$L.transform._entity;T$O&&((T$w=(T$x=T$O.owner.skinnedMeshRender.material).tilingOffset).elements=T$m,T$x.tilingOffset=T$w);}else(T$w=(T$x=T$s.skinnedMeshRender.material).tilingOffset).elements=T$m,T$x.tilingOffset=T$w;},T$x._getSkinnedMeshRenderSharedMaterialAlbedo=function(T$L,T$s){if(T$L){var T$m=T$L.transform._entity;return T$m?T$m.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null;}return T$s.skinnedMeshRender.sharedMaterial.albedoColor.elements;},T$x._setSkinnedMeshRenderSharedMaterialAlbedo=function(T$L,T$s,T$m){var T$x,T$w;if(T$L){var T$O=T$L.transform._entity;T$O&&((T$w=(T$x=T$O.owner.skinnedMeshRender.material).albedoColor).elements=T$m,T$x.albedoColor=T$w);}else(T$w=(T$x=T$s.skinnedMeshRender.material).albedoColor).elements=T$m,T$x.albedoColor=T$w;},T$x._getParticleRenderSharedMaterialTintColor=function(T$L,T$s){if(T$L){var T$m=T$L.transform._entity;return T$m?T$m.owner.particleRender.sharedMaterial.tintColor.elements:null;}return T$s.particleRender.sharedMaterial.tintColor.elements;},T$x._setParticleRenderSharedMaterialTintColor=function(T$L,T$s,T$m){var T$x,T$w;if(T$L){var T$O=T$L.transform._entity;T$O&&((T$w=(T$x=T$O.owner.particleRender.material).tintColor).elements=T$m,T$x.tintColor=T$w);}else(T$w=(T$x=T$s.particleRender.material).tintColor).elements=T$m,T$x.tintColor=T$w;},T$x._getMeshRenderSharedMaterialAlphaColor=function(T$L,T$s){if(T$L){var T$m=T$L.transform._entity;return T$m?T$m.owner.meshRender.sharedMaterial.alphaColor.elements:null;}return T$s.meshRender.sharedMaterial.alphaColor.elements;},T$x._setMeshRenderSharedMaterialAlphaColor=function(T$L,T$s,T$m){var T$x,T$w;if(T$L){var T$O=T$L.transform._entity;T$O&&((T$w=(T$x=T$O.owner.meshRender.material).alphaColor).elements=T$m,T$x.alphaColor=T$w);}else(T$w=(T$x=T$s.meshRender.material).alphaColor).elements=T$m,T$x.alphaColor=T$w;},T$x._getMeshRenderSharedMaterialBaseColor=function(T$L,T$s){if(T$L){var T$m=T$L.transform._entity;return T$m?T$m.owner.meshRender.sharedMaterial.baseColor.elements:null;}return T$s.meshRender.sharedMaterial.baseColor.elements;},T$x._setMeshRenderSharedMaterialBaseColor=function(T$L,T$s,T$m){var T$x,T$w;if(T$L){var T$O=T$L.transform._entity;T$O&&((T$w=(T$x=T$O.owner.meshRender.material).baseColor).elements=T$m,T$x.baseColor=T$w);}else(T$w=(T$x=T$s.meshRender.material).baseColor).elements=T$m,T$x.baseColor=T$w;},T$x._getMeshRenderSharedMaterialDissolve=function(T$L,T$s){if(T$L){var T$m=T$L.transform._entity;return T$m?T$m.owner.meshRender.sharedMaterial.dissolve:0;}return T$s.meshRender.sharedMaterial.dissolve;},T$x._setMeshRenderSharedMaterialDissolve=function(T$L,T$s,T$m){if(T$L){var T$x=T$L.transform._entity;T$x&&(T$x.owner.meshRender.material.dissolve=T$m[0]);}else T$s.meshRender.material.dissolve=T$m[0];},T$x._getMeshRenderSharedMaterialDissolveSpeed=function(T$L,T$s){if(T$L){var T$m=T$L.transform._entity;return T$m?T$m.owner.meshRender.sharedMaterial.dissolveSpeed:0;}return T$s.meshRender.sharedMaterial.dissolveSpeed;},T$x._setMeshRenderSharedMaterialDissolveSpeed=function(T$L,T$s,T$m){if(T$L){var T$x=T$L.transform._entity;T$x&&(T$x.owner.meshRender.material.dissolveSpeed=T$m[0]);}else T$s.meshRender.material.dissolveSpeed=T$m[0];},T$x._getMeshRenderSharedMaterialMMultiplier=function(T$L,T$s){if(T$L){var T$m=T$L.transform._entity;return T$m?T$m.owner.meshRender.sharedMaterial.mMultiplier:0;}return T$s.meshRender.sharedMaterial.mMultiplier;},T$x._setMeshRenderSharedMaterialMMultiplier=function(T$L,T$s,T$m){if(T$L){var T$x=T$L.transform._entity;T$x&&(T$x.owner.meshRender.material.mMultiplier=T$m[0]);}else T$s.meshRender.material.mMultiplier=T$m[0];},T$x._getMeshRenderSharedMaterialBaseScrollSpeedX=function(T$L,T$s){if(T$L){var T$m=T$L.transform._entity;return T$m?T$m.owner.meshRender.sharedMaterial.baseScrollSpeedX:0;}return T$s.meshRender.sharedMaterial.baseScrollSpeedX;},T$x._setMeshRenderSharedMaterialBaseScrollSpeedX=function(T$L,T$s,T$m){if(T$L){var T$x=T$L.transform._entity;T$x&&(T$x.owner.meshRender.material.baseScrollSpeedX=T$m[0]);}else T$s.meshRender.material.baseScrollSpeedX=T$m[0];},T$x._getMeshRenderSharedMaterialBaseScrollSpeedY=function(T$L,T$s){if(T$L){var T$m=T$L.transform._entity;return T$m?T$m.owner.meshRender.sharedMaterial.baseScrollSpeedY:0;}return T$s.meshRender.sharedMaterial.baseScrollSpeedY;},T$x._setMeshRenderSharedMaterialBaseScrollSpeedY=function(T$L,T$s,T$m){if(T$L){var T$x=T$L.transform._entity;T$x&&(T$x.owner.meshRender.material.baseScrollSpeedY=T$m[0]);}else T$s.meshRender.material.baseScrollSpeedY=T$m[0];},T$x._getMeshRenderSharedMaterialSecondScrollSpeedX=function(T$L,T$s){if(T$L){var T$m=T$L.transform._entity;return T$m?T$m.owner.meshRender.sharedMaterial.secondScrollSpeedX:0;}return T$s.meshRender.sharedMaterial.secondScrollSpeedX;},T$x._setMeshRenderSharedMaterialSecondScrollSpeedX=function(T$L,T$s,T$m){if(T$L){var T$x=T$L.transform._entity;T$x&&(T$x.owner.meshRender.material.secondScrollSpeedX=T$m[0]);}else T$s.meshRender.material.secondScrollSpeedX=T$m[0];},T$x._getMeshRenderSharedMaterialSecondScrollSpeedY=function(T$L,T$s){if(T$L){var T$m=T$L.transform._entity;return T$m?T$m.owner.meshRender.sharedMaterial.secondScrollSpeedY:0;}return T$s.meshRender.sharedMaterial.secondScrollSpeedY;},T$x._setMeshRenderSharedMaterialSecondScrollSpeedY=function(T$L,T$s,T$m){if(T$L){var T$x=T$L.transform._entity;T$x&&(T$x.owner.meshRender.material.secondScrollSpeedY=T$m[0]);}else T$s.meshRender.material.secondScrollSpeedY=T$m[0];},T$x._getMeshRenderSharedMaterialAlpha=function(T$L,T$s){if(T$L){var T$m=T$L.transform._entity;return T$m?T$m.owner.meshRender.sharedMaterial.alpha:0;}return T$s.meshRender.sharedMaterial.alpha;},T$x._setMeshRenderSharedMaterialAlpha=function(T$L,T$s,T$m){if(T$L){var T$x=T$L.transform._entity;T$x&&(T$x.owner.meshRender.material.alpha=T$m[0]);}else T$s.meshRender.material.alpha=T$m[0];},T$x._getMeshRenderSharedMaterialIntensity=function(T$L,T$s){if(T$L){var T$m=T$L.transform._entity;return T$m?T$m.owner.meshRender.sharedMaterial.intensity:0;}return T$s.meshRender.sharedMaterial.intensity;},T$x._setMeshRenderSharedMaterialIntensity=function(T$L,T$s,T$m){if(T$L){var T$x=T$L.transform._entity;T$x&&(T$x.owner.meshRender.material.intensity=T$m[0]);}else T$s.meshRender.material.intensity=T$m[0];},T$x._getMeshRenderSharedMaterialDetailTilingOffset=function(T$L,T$s){if(T$L){var T$m=T$L.transform._entity;return T$m?T$m.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null;}return T$s.meshRender.sharedMaterial.detailTilingOffset.elements;},T$x._setMeshRenderSharedMaterialDetailTilingOffset=function(T$L,T$s,T$m){var T$x,T$w;if(T$L){var T$O=T$L.transform._entity;T$O&&((T$w=(T$x=T$O.owner.meshRender.material).detailTilingOffset).elements=T$m,T$x.detailTilingOffset=T$w);}else(T$w=(T$x=T$s.meshRender.material).detailTilingOffset).elements=T$m,T$x.detailTilingOffset=T$w;},T$x._getMeshRenderSharedMaterialDissolveTilingOffset=function(T$L,T$s){if(T$L){var T$m=T$L.transform._entity;return T$m?T$m.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null;}return T$s.meshRender.sharedMaterial.dissolveTilingOffset.elements;},T$x._setMeshRenderSharedMaterialDissolveTilingOffset=function(T$L,T$s,T$m){var T$x,T$w;if(T$L){var T$O=T$L.transform._entity;T$O&&((T$w=(T$x=T$O.owner.meshRender.material).dissolveTilingOffset).elements=T$m,T$x.dissolveTilingOffset=T$w);}else(T$w=(T$x=T$s.meshRender.material).dissolveTilingOffset).elements=T$m,T$x.dissolveTilingOffset=T$w;},T$x._getMeshRenderSharedMaterialMaskTilingOffset=function(T$L,T$s){if(T$L){var T$m=T$L.transform._entity;return T$m?T$m.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null;}return T$s.meshRender.sharedMaterial.maskTilingOffset.elements;},T$x._setMeshRenderSharedMaterialMaskTilingOffset=function(T$L,T$s,T$m){var T$x,T$w;if(T$L){var T$O=T$L.transform._entity;T$O&&((T$w=(T$x=T$O.owner.meshRender.material).maskTilingOffset).elements=T$m,T$x.maskTilingOffset=T$w);}else(T$w=(T$x=T$s.meshRender.material).maskTilingOffset).elements=T$m,T$x.maskTilingOffset=T$w;},T$x._propertyIDCounter=0,T$x._propertyIndexDic={},T$x._propertySetFuncs=[],T$x._propertyGetFuncs=[],T$x;}(),T$X=function(){function T$L(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null;}return T$r(T$L,"laya.d3.animation.Keyframe"),T$L;}(),T$I=function(){function T$L(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null;}return T$r(T$L,"laya.d3.animation.KeyframeNode"),T$L;}(),T$G=(function(){function T$L(){this._tempVector30=new T$vs(),this._tempVector31=new T$vs(),this._tempVector32=new T$vs(),this._a=new T$vs(),this._b=new T$vs(),this._c=new T$vs(),this._d=new T$vs();}T$r(T$L,"laya.d3.core.glitter.SplineCurvePositionVelocity");var T$s=T$L.prototype;T$s.Init=function(T$L,T$s,T$m,T$x){T$L.cloneTo(this._d),T$s.cloneTo(this._c),T$vs.scale(T$L,2,this._a),T$vs.scale(T$m,2,this._tempVector30),T$vs.subtract(this._a,this._tempVector30,this._a),T$vs.add(this._a,T$s,this._a),T$vs.add(this._a,T$x,this._a),T$vs.scale(T$m,3,this._b),T$vs.scale(T$L,3,this._tempVector30),T$vs.subtract(this._b,this._tempVector30,this._b),T$vs.subtract(this._b,T$x,this._b),T$vs.scale(T$s,2,this._tempVector30),T$vs.subtract(this._b,this._tempVector30,this._b);},T$s.Slerp=function(T$L,T$s){T$vs.scale(this._a,T$L*T$L*T$L,this._tempVector30),T$vs.scale(this._b,T$L*T$L,this._tempVector31),T$vs.scale(this._c,T$L,this._tempVector32),T$vs.add(this._tempVector30,this._tempVector31,T$s),T$vs.add(T$s,this._tempVector32,T$s),T$vs.add(T$s,this._d,T$s);};}(),function(){function T$$(T$L,T$s,T$m,T$x){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=T$L,this._h=T$s,this._minHeight=T$m,this._maxHeight=T$x;}T$r(T$$,"laya.d3.core.HeightMap");var T$L=T$$.prototype;T$L._inBounds=function(T$L,T$s){return 0<=T$L&&T$L<this._h&&0<=T$s&&T$s<this._w;},T$L.getHeight=function(T$L,T$s){return this._inBounds(T$L,T$s)?this._datas[T$L][T$s]:NaN;},T$u(0,T$L,"width",function(){return this._w;}),T$u(0,T$L,"height",function(){return this._h;}),T$u(0,T$L,"maxHeight",function(){return this._maxHeight;}),T$u(0,T$L,"minHeight",function(){return this._minHeight;}),T$$.creatFromMesh=function(T$L,T$s,T$m,T$x){for(var T$w=[],T$O=[],T$v=T$L.getSubMeshCount(),T$y=0;T$y<T$v;T$y++){for(var T$F=T$L.getSubMesh(T$y),T$o=T$F._getVertexBuffer(),T$V=T$o.getData(),T$C=[],T$E=0;T$E<T$V.length;T$E+=T$o.vertexDeclaration.vertexStride/4){var T$r=new T$vs(T$V[T$E+0],T$V[T$E+1],T$V[T$E+2]);T$C.push(T$r);}T$w.push(T$C);var T$u=T$F._getIndexBuffer();T$O.push(T$u.getData());}var T$T=T$L.boundingBox,T$j=T$T.min.x,T$D=T$T.min.z,T$e=T$T.max.x,T$b=T$T.max.z,T$S=T$T.min.y,T$H=T$T.max.y,T$Y=T$e-T$j,T$a=T$b-T$D,T$f=T$x.elements[0]=T$Y/(T$s-1),T$_=T$x.elements[1]=T$a/(T$m-1),T$Q=new T$$(T$s,T$m,T$S,T$H),T$N=T$$._tempRay,T$i=T$N.direction.elements;T$i[0]=0,T$i[1]=-1,T$i[2]=0;var T$U=T$H+.1;T$N.origin.elements[1]=T$U;for(var T$c=0;T$c<T$m;T$c++){var T$h=T$D+T$c*T$_;T$Q._datas[T$c]=[];for(var T$G=0;T$G<T$s;T$G++){var T$R=T$j+T$G*T$f,T$A=T$N.origin.elements;T$A[0]=T$R,T$A[2]=T$h;var T$g=T$$._getPosition(T$N,T$w,T$O);T$Q._datas[T$c][T$G]=T$g===Number.MAX_VALUE?NaN:T$U-T$g;}}return T$Q;},T$$.createFromImage=function(T$L,T$s,T$m){for(var T$x=T$L.width,T$w=T$L.height,T$O=new T$$(T$x,T$w,T$s,T$m),T$v=(T$m-T$s)/254,T$y=T$L.getPixels(),T$F=0,T$o=0;T$o<T$w;T$o++)for(var T$V=T$O._datas[T$o]=[],T$C=0;T$C<T$x;T$C++){var T$E=T$y[T$F++],T$r=T$y[T$F++],T$u=T$y[T$F++],T$T=T$y[T$F++];T$V[T$C]=255==T$E&&255==T$r&&255==T$u&&255==T$T?NaN:(T$E+T$r+T$u)/3*T$v+T$s;}return T$O;},T$$._getPosition=function(T$L,T$s,T$m){for(var T$x=Number.MAX_VALUE,T$w=0;T$w<T$s.length;T$w++)for(var T$O=T$s[T$w],T$v=T$m[T$w],T$y=0;T$y<T$v.length;T$y+=3){var T$F=T$O[T$v[T$y+0]],T$o=T$O[T$v[T$y+1]],T$V=T$O[T$v[T$y+2]],T$C=T$us.rayIntersectsTriangle(T$L,T$F,T$o,T$V);!isNaN(T$C)&&T$C<T$x&&(T$x=T$C);}return T$x;},T$C(T$$,["_tempRay",function(){return this._tempRay=new T$ws(new T$vs(),new T$vs());}]);}(),function(){function T$w(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[];}T$r(T$w,"laya.d3.core.Layer");var T$L=T$w.prototype;return T$L._binarySearchIndex=function(){for(var T$L=0,T$s=T$w._collsionTestList.length-1,T$m=0;T$L<=T$s;){T$m=Math.floor((T$L+T$s)/2);var T$x=T$w._collsionTestList[T$m];if(T$x==this._number)return T$m;T$x>this._number?T$s=T$m-1:T$L=T$m+1;}return T$L;},T$L._addCollider=function(T$L){0===this._colliders.length&&T$w._collsionTestList.splice(this._binarySearchIndex(),0,this._number),T$L._isRigidbody?(this._colliders.unshift(T$L),this._nonRigidbodyOffset++):this._colliders.push(T$L);},T$L._removeCollider=function(T$L){var T$s=this._colliders.indexOf(T$L);T$s<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(T$s,1),0===this._colliders.length&&T$w._collsionTestList.splice(T$w._collsionTestList.indexOf(this._number),1);},T$u(0,T$L,"number",function(){return this._number;}),T$u(0,T$L,"visible",function(){return this._visible;},function(T$L){this._visible=T$L,T$w._visibleLayers=T$L?T$w._visibleLayers|this.mask:T$w._visibleLayers&~this.mask;}),T$u(0,T$L,"mask",function(){return this._mask;}),T$u(1,T$w,"visibleLayers",function(){return T$w._visibleLayers;},function(T$L){T$w._visibleLayers=T$L;for(var T$s=0,T$m=T$w._layerList.length;T$s<T$m;T$s++){var T$x=T$w._layerList[T$s];T$x._visible=0!=(T$x._mask&T$w._visibleLayers);}}),T$w.__init__=function(){T$w._layerList.length=31;for(var T$L=0;T$L<31;T$L++){var T$s=new T$w();T$w._layerList[T$L]=T$s,0===T$L?(T$s.name="Default Layer",T$s.visible=!0):(T$s.name="Layer-"+T$L,T$s.visible=!1),T$s._number=T$L,T$s._mask=Math.pow(2,T$L);}T$w.currentCreationLayer=T$w._layerList[0];},T$w.getLayerByNumber=function(T$L){if(T$L<0||30<T$L)throw new Error("无法返回指定Layer，该number超出范围！");return T$w._layerList[T$L];},T$w.getLayerByName=function(T$L){for(var T$s=0;T$s<31;T$s++)if(T$w._layerList[T$s].name===T$L)return T$w._layerList[T$s];throw new Error("无法返回指定Layer,该name不存在");},T$w.isVisible=function(T$L){return 0!=(T$L&T$w._currentCameraCullingMask&T$w._visibleLayers);},T$w._layerList=[],T$w._visibleLayers=2147483647,T$w._collsionTestList=[],T$w._currentCameraCullingMask=2147483647,T$w.maxCount=31,T$w.currentCreationLayer=null,T$w;}()),T$R=(function(){function T$L(T$L,T$s,T$m){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=T$L,this._minCount=T$s,this._maxCount=T$m;}T$r(T$L,"laya.d3.core.particleShuriKen.module.Burst");var T$s=T$L.prototype;T$H.imps(T$s,{"laya.d3.core.IClone":!0}),T$s.cloneTo=function(T$L){var T$s=T$L;T$s._time=this._time,T$s._minCount=this._minCount,T$s._maxCount=this._maxCount;},T$s.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$u(0,T$s,"time",function(){return this._time;}),T$u(0,T$s,"minCount",function(){return this._minCount;}),T$u(0,T$s,"maxCount",function(){return this._maxCount;});}(),function(){function T$L(T$L){this._color=null,this.enbale=!1,this._color=T$L;}T$r(T$L,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var T$s=T$L.prototype;T$s.cloneTo=function(T$L){var T$s=T$L;this._color.cloneTo(T$s._color),T$s.enbale=this.enbale;},T$s.clone=function(){var T$L;switch(this._color.type){case 0:T$L=T$g.createByConstant(this._color.constant.clone());break;case 1:T$L=T$g.createByGradient(this._color.gradient.clone());break;case 2:T$L=T$g.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:T$L=T$g.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone());}var T$s=new this.constructor(T$L);return T$s.enbale=this.enbale,T$s;},T$u(0,T$s,"color",function(){return this._color;});}(),function(){function T$L(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[];}T$r(T$L,"laya.d3.core.particleShuriKen.module.Emission");var T$s=T$L.prototype;T$H.imps(T$s,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),T$s._destroy=function(){this._bursts=null,this._destroyed=!0;},T$s.getBurstsCount=function(){return this._bursts.length;},T$s.getBurstByIndex=function(T$L){return this._bursts[T$L];},T$s.addBurst=function(T$L){var T$s=this._bursts.length;if(0<T$s)for(var T$m=0;T$m<T$s;T$m++)this._bursts[T$m].time>T$L.time&&this._bursts.splice(T$m,0,T$L);this._bursts.push(T$L);},T$s.removeBurst=function(T$L){var T$s=this._bursts.indexOf(T$L);-1!==T$s&&this._bursts.splice(T$s,1);},T$s.removeBurstByIndex=function(T$L){this._bursts.splice(T$L,1);},T$s.clearBurst=function(){this._bursts.length=0;},T$s.cloneTo=function(T$L){var T$s=T$L,T$m=T$s._bursts;T$m.length=this._bursts.length;for(var T$x=0,T$w=this._bursts.length;T$x<T$w;T$x++){var T$O=T$m[T$x];T$O?this._bursts[T$x].cloneTo(T$O):T$m[T$x]=this._bursts[T$x].clone();}T$s._emissionRate=this._emissionRate,T$s.enbale=this.enbale;},T$s.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$u(0,T$s,"destroyed",function(){return this._destroyed;}),T$u(0,T$s,"emissionRate",function(){return this._emissionRate;},function(T$L){if(T$L<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=T$L;});}(),function(){function T$x(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null;}T$r(T$x,"laya.d3.core.particleShuriKen.module.FrameOverTime");var T$L=T$x.prototype;return T$H.imps(T$L,{"laya.d3.core.IClone":!0}),T$L.cloneTo=function(T$L){var T$s=T$L;T$s._type=this._type,T$s._constant=this._constant,this._overTime.cloneTo(T$s._overTime),T$s._constantMin=this._constantMin,T$s._constantMax=this._constantMax,this._overTimeMin.cloneTo(T$s._overTimeMin),this._overTimeMax.cloneTo(T$s._overTimeMax);},T$L.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$u(0,T$L,"frameOverTimeData",function(){return this._overTime;}),T$u(0,T$L,"constant",function(){return this._constant;}),T$u(0,T$L,"type",function(){return this._type;}),T$u(0,T$L,"frameOverTimeDataMin",function(){return this._overTimeMin;}),T$u(0,T$L,"constantMin",function(){return this._constantMin;}),T$u(0,T$L,"frameOverTimeDataMax",function(){return this._overTimeMax;}),T$u(0,T$L,"constantMax",function(){return this._constantMax;}),T$x.createByConstant=function(T$L){var T$s=new T$x();return T$s._type=0,T$s._constant=T$L,T$s;},T$x.createByOverTime=function(T$L){var T$s=new T$x();return T$s._type=1,T$s._overTime=T$L,T$s;},T$x.createByRandomTwoConstant=function(T$L,T$s){var T$m=new T$x();return T$m._type=2,T$m._constantMin=T$L,T$m._constantMax=T$s,T$m;},T$x.createByRandomTwoOverTime=function(T$L,T$s){var T$m=new T$x();return T$m._type=3,T$m._overTimeMin=T$L,T$m._overTimeMax=T$s,T$m;},T$x;}()),T$A=function(){function T$o(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null;}T$r(T$o,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var T$L=T$o.prototype;return T$H.imps(T$L,{"laya.d3.core.IClone":!0}),T$L.cloneTo=function(T$L){var T$s=T$L;T$s._type=this._type,T$s._separateAxes=this._separateAxes,T$s._constant=this._constant,this._constantSeparate.cloneTo(T$s._constantSeparate),this._gradient.cloneTo(T$s._gradient),this._gradientX.cloneTo(T$s._gradientX),this._gradientY.cloneTo(T$s._gradientY),this._gradientZ.cloneTo(T$s._gradientZ),T$s._constantMin=this._constantMin,T$s._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(T$s._constantMinSeparate),this._constantMaxSeparate.cloneTo(T$s._constantMaxSeparate),this._gradientMin.cloneTo(T$s._gradientMin),this._gradientMax.cloneTo(T$s._gradientMax),this._gradientXMin.cloneTo(T$s._gradientXMin),this._gradientXMax.cloneTo(T$s._gradientXMax),this._gradientYMin.cloneTo(T$s._gradientYMin),this._gradientYMax.cloneTo(T$s._gradientYMax),this._gradientZMin.cloneTo(T$s._gradientZMin),this._gradientZMax.cloneTo(T$s._gradientZMax);},T$L.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$u(0,T$L,"gradientZ",function(){return this._gradientZ;}),T$u(0,T$L,"constant",function(){return this._constant;}),T$u(0,T$L,"gradient",function(){return this._gradient;}),T$u(0,T$L,"separateAxes",function(){return this._separateAxes;}),T$u(0,T$L,"type",function(){return this._type;}),T$u(0,T$L,"constantSeparate",function(){return this._constantSeparate;}),T$u(0,T$L,"gradientX",function(){return this._gradientX;}),T$u(0,T$L,"gradientY",function(){return this._gradientY;}),T$u(0,T$L,"gradientW",function(){return this._gradientW;}),T$u(0,T$L,"gradientMin",function(){return this._gradientMin;}),T$u(0,T$L,"constantMin",function(){return this._constantMin;}),T$u(0,T$L,"gradientMax",function(){return this._gradientMax;}),T$u(0,T$L,"constantMax",function(){return this._constantMax;}),T$u(0,T$L,"gradientWMin",function(){return this._gradientWMin;}),T$u(0,T$L,"constantMinSeparate",function(){return this._constantMinSeparate;}),T$u(0,T$L,"constantMaxSeparate",function(){return this._constantMaxSeparate;}),T$u(0,T$L,"gradientXMin",function(){return this._gradientXMin;}),T$u(0,T$L,"gradientXMax",function(){return this._gradientXMax;}),T$u(0,T$L,"gradientWMax",function(){return this._gradientWMax;}),T$u(0,T$L,"gradientYMin",function(){return this._gradientYMin;}),T$u(0,T$L,"gradientYMax",function(){return this._gradientYMax;}),T$u(0,T$L,"gradientZMin",function(){return this._gradientZMin;}),T$u(0,T$L,"gradientZMax",function(){return this._gradientZMax;}),T$o.createByConstant=function(T$L){var T$s=new T$o();return T$s._type=0,T$s._separateAxes=!1,T$s._constant=T$L,T$s;},T$o.createByConstantSeparate=function(T$L){var T$s=new T$o();return T$s._type=0,T$s._separateAxes=!0,T$s._constantSeparate=T$L,T$s;},T$o.createByGradient=function(T$L){var T$s=new T$o();return T$s._type=1,T$s._separateAxes=!1,T$s._gradient=T$L,T$s;},T$o.createByGradientSeparate=function(T$L,T$s,T$m,T$x){var T$w=new T$o();return T$w._type=1,T$w._separateAxes=!0,T$w._gradientX=T$L,T$w._gradientY=T$s,T$w._gradientZ=T$m,T$w._gradientW=T$x,T$w;},T$o.createByRandomTwoConstant=function(T$L,T$s){var T$m=new T$o();return T$m._type=2,T$m._separateAxes=!1,T$m._constantMin=T$L,T$m._constantMax=T$s,T$m;},T$o.createByRandomTwoConstantSeparate=function(T$L,T$s){var T$m=new T$o();return T$m._type=2,T$m._separateAxes=!0,T$m._constantMinSeparate=T$L,T$m._constantMaxSeparate=T$s,T$m;},T$o.createByRandomTwoGradient=function(T$L,T$s){var T$m=new T$o();return T$m._type=3,T$m._separateAxes=!1,T$m._gradientMin=T$L,T$m._gradientMax=T$s,T$m;},T$o.createByRandomTwoGradientSeparate=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){var T$F=new T$o();return T$F._type=3,T$F._separateAxes=!0,T$F._gradientXMin=T$L,T$F._gradientXMax=T$s,T$F._gradientYMin=T$m,T$F._gradientYMax=T$x,T$F._gradientZMin=T$w,T$F._gradientZMax=T$O,T$F._gradientWMin=T$v,T$F._gradientWMax=T$y,T$F;},T$o;}(),T$g=function(){function T$x(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null;}T$r(T$x,"laya.d3.core.particleShuriKen.module.GradientColor");var T$L=T$x.prototype;return T$H.imps(T$L,{"laya.d3.core.IClone":!0}),T$L.cloneTo=function(T$L){var T$s=T$L;T$s._type=this._type,this._constant.cloneTo(T$s._constant),this._constantMin.cloneTo(T$s._constantMin),this._constantMax.cloneTo(T$s._constantMax),this._gradient.cloneTo(T$s._gradient),this._gradientMin.cloneTo(T$s._gradientMin),this._gradientMax.cloneTo(T$s._gradientMax);},T$L.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$u(0,T$L,"gradient",function(){return this._gradient;}),T$u(0,T$L,"constant",function(){return this._constant;}),T$u(0,T$L,"type",function(){return this._type;}),T$u(0,T$L,"gradientMin",function(){return this._gradientMin;}),T$u(0,T$L,"constantMin",function(){return this._constantMin;}),T$u(0,T$L,"gradientMax",function(){return this._gradientMax;}),T$u(0,T$L,"constantMax",function(){return this._constantMax;}),T$x.createByConstant=function(T$L){var T$s=new T$x();return T$s._type=0,T$s._constant=T$L,T$s;},T$x.createByGradient=function(T$L){var T$s=new T$x();return T$s._type=1,T$s._gradient=T$L,T$s;},T$x.createByRandomTwoConstant=function(T$L,T$s){var T$m=new T$x();return T$m._type=2,T$m._constantMin=T$L,T$m._constantMax=T$s,T$m;},T$x.createByRandomTwoGradient=function(T$L,T$s){var T$m=new T$x();return T$m._type=3,T$m._gradientMin=T$L,T$m._gradientMax=T$s,T$m;},T$x;}(),T$$=(function(){function T$L(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16);}T$r(T$L,"laya.d3.core.particleShuriKen.module.GradientDataColor");var T$s=T$L.prototype;T$H.imps(T$s,{"laya.d3.core.IClone":!0}),T$s.addAlpha=function(T$L,T$s){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==T$L&&(T$L=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=T$L,this._alphaElements[this._alphaCurrentLength++]=T$s):DEBUG;},T$s.addRGB=function(T$L,T$s){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==T$L&&(T$L=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=T$L,this._rgbElements[this._rgbCurrentLength++]=T$s.x,this._rgbElements[this._rgbCurrentLength++]=T$s.y,this._rgbElements[this._rgbCurrentLength++]=T$s.z):DEBUG;},T$s.cloneTo=function(T$L){var T$s=T$L,T$m=0,T$x=0;T$s._alphaCurrentLength=this._alphaCurrentLength;var T$w=T$s._alphaElements;for(T$w.length=this._alphaElements.length,T$m=0,T$x=this._alphaElements.length;T$m<T$x;T$m++)T$w[T$m]=this._alphaElements[T$m];T$s._rgbCurrentLength=this._rgbCurrentLength;var T$O=T$s._rgbElements;for(T$O.length=this._rgbElements.length,T$m=0,T$x=this._rgbElements.length;T$m<T$x;T$m++)T$O[T$m]=this._rgbElements[T$m];},T$s.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$u(0,T$s,"alphaGradientCount",function(){return this._alphaCurrentLength/2;}),T$u(0,T$s,"rgbGradientCount",function(){return this._rgbCurrentLength/4;});}(),function(){function T$L(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8);}T$r(T$L,"laya.d3.core.particleShuriKen.module.GradientDataInt");var T$s=T$L.prototype;T$H.imps(T$s,{"laya.d3.core.IClone":!0}),T$s.add=function(T$L,T$s){this._currentLength<8?(6===this._currentLength&&1!==T$L&&(T$L=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=T$L,this._elements[this._currentLength++]=T$s):console.log("Warning:data count must lessEqual than 4");},T$s.cloneTo=function(T$L){var T$s=T$L;T$s._currentLength=this._currentLength;var T$m=T$s._elements;T$m.length=this._elements.length;for(var T$x=0,T$w=this._elements.length;T$x<T$w;T$x++)T$m[T$x]=this._elements[T$x];},T$s.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$u(0,T$s,"gradientCount",function(){return this._currentLength/2;});}(),function(){function T$L(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8);}T$r(T$L,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var T$s=T$L.prototype;T$H.imps(T$s,{"laya.d3.core.IClone":!0}),T$s.add=function(T$L,T$s){this._currentLength<8?(6===this._currentLength&&1!==T$L&&(T$L=1,DEBUG),this._elements[this._currentLength++]=T$L,this._elements[this._currentLength++]=T$s):DEBUG;},T$s.getKeyByIndex=function(T$L){return this._elements[2*T$L];},T$s.getValueByIndex=function(T$L){return this._elements[2*T$L+1];},T$s.getAverageValue=function(){for(var T$L=0,T$s=this._currentLength-2;T$L<T$s;T$L+=2){this._elements[T$L+1];this._elements[T$L+3],this._elements[T$L+2]-this._elements[T$L];}return 0;},T$s.cloneTo=function(T$L){var T$s=T$L;T$s._currentLength=this._currentLength;var T$m=T$s._elements;T$m.length=this._elements.length;for(var T$x=0,T$w=this._elements.length;T$x<T$w;T$x++)T$m[T$x]=this._elements[T$x];},T$s.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$u(0,T$s,"gradientCount",function(){return this._currentLength/2;});}(),function(){function T$L(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12);}T$r(T$L,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var T$s=T$L.prototype;T$H.imps(T$s,{"laya.d3.core.IClone":!0}),T$s.add=function(T$L,T$s){this._currentLength<8?(6===this._currentLength&&1!==T$L&&(T$L=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=T$L,this._elements[this._currentLength++]=T$s.x,this._elements[this._currentLength++]=T$s.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4");},T$s.cloneTo=function(T$L){var T$s=T$L;T$s._currentLength=this._currentLength;var T$m=T$s._elements;T$m.length=this._elements.length;for(var T$x=0,T$w=this._elements.length;T$x<T$w;T$x++)T$m[T$x]=this._elements[T$x];},T$s.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$u(0,T$s,"gradientCount",function(){return this._currentLength/3;});}(),function(){function T$y(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null;}T$r(T$y,"laya.d3.core.particleShuriKen.module.GradientSize");var T$L=T$y.prototype;return T$H.imps(T$L,{"laya.d3.core.IClone":!0}),T$L.getMaxSizeInGradient=function(){var T$L=0,T$s=0,T$m=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(T$L=0,T$s=this._gradientX.gradientCount;T$L<T$s;T$L++)T$m=Math.max(T$m,this._gradientX.getValueByIndex(T$L));for(T$L=0,T$s=this._gradientY.gradientCount;T$L<T$s;T$L++)T$m=Math.max(T$m,this._gradientY.getValueByIndex(T$L));}else for(T$L=0,T$s=this._gradient.gradientCount;T$L<T$s;T$L++)T$m=Math.max(T$m,this._gradient.getValueByIndex(T$L));break;case 1:T$m=this._separateAxes?(T$m=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),T$m=Math.max(T$m,this._constantMinSeparate.y),Math.max(T$m,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(T$L=0,T$s=this._gradientXMin.gradientCount;T$L<T$s;T$L++)T$m=Math.max(T$m,this._gradientXMin.getValueByIndex(T$L));for(T$L=0,T$s=this._gradientXMax.gradientCount;T$L<T$s;T$L++)T$m=Math.max(T$m,this._gradientXMax.getValueByIndex(T$L));for(T$L=0,T$s=this._gradientYMin.gradientCount;T$L<T$s;T$L++)T$m=Math.max(T$m,this._gradientYMin.getValueByIndex(T$L));for(T$L=0,T$s=this._gradientZMax.gradientCount;T$L<T$s;T$L++)T$m=Math.max(T$m,this._gradientZMax.getValueByIndex(T$L));}else{for(T$L=0,T$s=this._gradientMin.gradientCount;T$L<T$s;T$L++)T$m=Math.max(T$m,this._gradientMin.getValueByIndex(T$L));for(T$L=0,T$s=this._gradientMax.gradientCount;T$L<T$s;T$L++)T$m=Math.max(T$m,this._gradientMax.getValueByIndex(T$L));}}return T$m;},T$L.cloneTo=function(T$L){var T$s=T$L;T$s._type=this._type,T$s._separateAxes=this._separateAxes,this._gradient.cloneTo(T$s._gradient),this._gradientX.cloneTo(T$s._gradientX),this._gradientY.cloneTo(T$s._gradientY),this._gradientZ.cloneTo(T$s._gradientZ),T$s._constantMin=this._constantMin,T$s._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(T$s._constantMinSeparate),this._constantMaxSeparate.cloneTo(T$s._constantMaxSeparate),this._gradientMin.cloneTo(T$s._gradientMin),this._gradientMax.cloneTo(T$s._gradientMax),this._gradientXMin.cloneTo(T$s._gradientXMin),this._gradientXMax.cloneTo(T$s._gradientXMax),this._gradientYMin.cloneTo(T$s._gradientYMin),this._gradientYMax.cloneTo(T$s._gradientYMax),this._gradientZMin.cloneTo(T$s._gradientZMin),this._gradientZMax.cloneTo(T$s._gradientZMax);},T$L.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$u(0,T$L,"gradientZ",function(){return this._gradientZ;}),T$u(0,T$L,"gradient",function(){return this._gradient;}),T$u(0,T$L,"separateAxes",function(){return this._separateAxes;}),T$u(0,T$L,"type",function(){return this._type;}),T$u(0,T$L,"gradientMin",function(){return this._gradientMin;}),T$u(0,T$L,"constantMin",function(){return this._constantMin;}),T$u(0,T$L,"gradientX",function(){return this._gradientX;}),T$u(0,T$L,"gradientY",function(){return this._gradientY;}),T$u(0,T$L,"gradientMax",function(){return this._gradientMax;}),T$u(0,T$L,"constantMax",function(){return this._constantMax;}),T$u(0,T$L,"constantMinSeparate",function(){return this._constantMinSeparate;}),T$u(0,T$L,"constantMaxSeparate",function(){return this._constantMaxSeparate;}),T$u(0,T$L,"gradientXMin",function(){return this._gradientXMin;}),T$u(0,T$L,"gradientXMax",function(){return this._gradientXMax;}),T$u(0,T$L,"gradientYMin",function(){return this._gradientYMin;}),T$u(0,T$L,"gradientYMax",function(){return this._gradientYMax;}),T$u(0,T$L,"gradientZMin",function(){return this._gradientZMin;}),T$u(0,T$L,"gradientZMax",function(){return this._gradientZMax;}),T$y.createByGradient=function(T$L){var T$s=new T$y();return T$s._type=0,T$s._separateAxes=!1,T$s._gradient=T$L,T$s;},T$y.createByGradientSeparate=function(T$L,T$s,T$m){var T$x=new T$y();return T$x._type=0,T$x._separateAxes=!0,T$x._gradientX=T$L,T$x._gradientY=T$s,T$x._gradientZ=T$m,T$x;},T$y.createByRandomTwoConstant=function(T$L,T$s){var T$m=new T$y();return T$m._type=1,T$m._separateAxes=!1,T$m._constantMin=T$L,T$m._constantMax=T$s,T$m;},T$y.createByRandomTwoConstantSeparate=function(T$L,T$s){var T$m=new T$y();return T$m._type=1,T$m._separateAxes=!0,T$m._constantMinSeparate=T$L,T$m._constantMaxSeparate=T$s,T$m;},T$y.createByRandomTwoGradient=function(T$L,T$s){var T$m=new T$y();return T$m._type=2,T$m._separateAxes=!1,T$m._gradientMin=T$L,T$m._gradientMax=T$s,T$m;},T$y.createByRandomTwoGradientSeparate=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v=new T$y();return T$v._type=2,T$v._separateAxes=!0,T$v._gradientXMin=T$L,T$v._gradientXMax=T$s,T$v._gradientYMin=T$m,T$v._gradientYMax=T$x,T$v._gradientZMin=T$w,T$v._gradientZMax=T$O,T$v;},T$y;}()),T$p=function(){function T$y(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null;}T$r(T$y,"laya.d3.core.particleShuriKen.module.GradientVelocity");var T$L=T$y.prototype;return T$H.imps(T$L,{"laya.d3.core.IClone":!0}),T$L.cloneTo=function(T$L){var T$s=T$L;T$s._type=this._type,this._constant.cloneTo(T$s._constant),this._gradientX.cloneTo(T$s._gradientX),this._gradientY.cloneTo(T$s._gradientY),this._gradientZ.cloneTo(T$s._gradientZ),this._constantMin.cloneTo(T$s._constantMin),this._constantMax.cloneTo(T$s._constantMax),this._gradientXMin.cloneTo(T$s._gradientXMin),this._gradientXMax.cloneTo(T$s._gradientXMax),this._gradientYMin.cloneTo(T$s._gradientYMin),this._gradientYMax.cloneTo(T$s._gradientYMax),this._gradientZMin.cloneTo(T$s._gradientZMin),this._gradientZMax.cloneTo(T$s._gradientZMax);},T$L.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$u(0,T$L,"gradientZ",function(){return this._gradientZ;}),T$u(0,T$L,"constant",function(){return this._constant;}),T$u(0,T$L,"type",function(){return this._type;}),T$u(0,T$L,"gradientXMax",function(){return this._gradientXMax;}),T$u(0,T$L,"constantMin",function(){return this._constantMin;}),T$u(0,T$L,"gradientX",function(){return this._gradientX;}),T$u(0,T$L,"gradientY",function(){return this._gradientY;}),T$u(0,T$L,"gradientXMin",function(){return this._gradientXMin;}),T$u(0,T$L,"constantMax",function(){return this._constantMax;}),T$u(0,T$L,"gradientYMin",function(){return this._gradientYMin;}),T$u(0,T$L,"gradientYMax",function(){return this._gradientYMax;}),T$u(0,T$L,"gradientZMin",function(){return this._gradientZMin;}),T$u(0,T$L,"gradientZMax",function(){return this._gradientZMax;}),T$y.createByConstant=function(T$L){var T$s=new T$y();return T$s._type=0,T$s._constant=T$L,T$s;},T$y.createByGradient=function(T$L,T$s,T$m){var T$x=new T$y();return T$x._type=1,T$x._gradientX=T$L,T$x._gradientY=T$s,T$x._gradientZ=T$m,T$x;},T$y.createByRandomTwoConstant=function(T$L,T$s){var T$m=new T$y();return T$m._type=2,T$m._constantMin=T$L,T$m._constantMax=T$s,T$m;},T$y.createByRandomTwoGradient=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v=new T$y();return T$v._type=3,T$v._gradientXMin=T$L,T$v._gradientXMax=T$s,T$v._gradientYMin=T$m,T$v._gradientYMax=T$x,T$v._gradientZMin=T$w,T$v._gradientZMax=T$O,T$v;},T$y;}(),T$Z=(function(){function T$L(T$L){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=T$L;}T$r(T$L,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var T$s=T$L.prototype;T$H.imps(T$s,{"laya.d3.core.IClone":!0}),T$s.cloneTo=function(T$L){var T$s=T$L;this._angularVelocity.cloneTo(T$s._angularVelocity),T$s.enbale=this.enbale;},T$s.clone=function(){var T$L;switch(this._angularVelocity.type){case 0:T$L=this._angularVelocity.separateAxes?T$A.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):T$A.createByConstant(this._angularVelocity.constant);break;case 1:T$L=this._angularVelocity.separateAxes?T$A.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):T$A.createByGradient(this._angularVelocity.gradient.clone());break;case 2:T$L=this._angularVelocity.separateAxes?T$A.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):T$A.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:T$L=this._angularVelocity.separateAxes?T$A.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):T$A.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone());}var T$s=new this.constructor(T$L);return T$s.enbale=this.enbale,T$s;},T$u(0,T$s,"angularVelocity",function(){return this._angularVelocity;});}(),function(){function T$L(){this.enable=!1,this.randomDirection=!1;}T$r(T$L,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.core.IClone":!0}),T$s._getShapeBoundBox=function(T$L){throw new Error("BaseShape: must override it.");},T$s._getSpeedBoundBox=function(T$L){throw new Error("BaseShape: must override it.");},T$s.generatePositionAndDirection=function(T$L,T$s,T$m,T$x){throw new Error("BaseShape: must override it.");},T$s._calculateProceduralBounds=function(T$L,T$s,T$m){this._getShapeBoundBox(T$L);var T$x=T$L.min,T$w=T$L.max;T$vs.multiply(T$x,T$s,T$x),T$vs.multiply(T$w,T$s,T$w);var T$O=new T$kL(new T$vs(),new T$vs());this.randomDirection?(T$O.min=new T$vs(-1,-1,-1),T$O.max=new T$vs(1,1,1)):this._getSpeedBoundBox(T$O);var T$v=new T$kL(new T$vs(),new T$vs()),T$y=T$v.min,T$F=T$v.max;T$vs.scale(T$O.min,T$m.y,T$y),T$vs.scale(T$O.max,T$m.y,T$F),T$vs.add(T$L.min,T$y,T$y),T$vs.add(T$L.max,T$F,T$F),T$vs.min(T$L.min,T$y,T$L.min),T$vs.max(T$L.max,T$y,T$L.max);var T$o=new T$kL(new T$vs(),new T$vs()),T$V=T$o.min,T$C=T$o.max;T$vs.scale(T$O.min,T$m.x,T$V),T$vs.scale(T$O.max,T$m.x,T$C),T$vs.min(T$o.min,T$C,T$y),T$vs.max(T$o.min,T$C,T$F),T$vs.min(T$L.min,T$y,T$L.min),T$vs.max(T$L.max,T$y,T$L.max);},T$s.cloneTo=function(T$L){T$L.enable=this.enable;},T$s.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$L;}()),T$n=function(){function T$O(){}return T$r(T$O,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),T$O._randomPointUnitArcCircle=function(T$L,T$s,T$m){var T$x=T$s.elements,T$w=NaN;T$w=T$m?T$m.getFloat()*T$L:Math.random()*T$L,T$x[0]=Math.cos(T$w),T$x[1]=Math.sin(T$w);},T$O._randomPointInsideUnitArcCircle=function(T$L,T$s,T$m){var T$x=T$s.elements;T$O._randomPointUnitArcCircle(T$L,T$s,T$m);var T$w=NaN;T$w=T$m?Math.pow(T$m.getFloat(),.5):Math.pow(Math.random(),.5),T$x[0]=T$x[0]*T$w,T$x[1]=T$x[1]*T$w;},T$O._randomPointUnitCircle=function(T$L,T$s){var T$m=T$L.elements,T$x=NaN;T$x=T$s?T$s.getFloat()*Math.PI*2:Math.random()*Math.PI*2,T$m[0]=Math.cos(T$x),T$m[1]=Math.sin(T$x);},T$O._randomPointInsideUnitCircle=function(T$L,T$s){var T$m=T$L.elements;T$O._randomPointUnitCircle(T$L);var T$x=NaN;T$x=T$s?Math.pow(T$s.getFloat(),.5):Math.pow(Math.random(),.5),T$m[0]=T$m[0]*T$x,T$m[1]=T$m[1]*T$x;},T$O._randomPointUnitSphere=function(T$L,T$s){var T$m=T$L.elements,T$x=NaN,T$w=NaN;T$w=T$s?(T$x=T$m[2]=2*T$s.getFloat()-1,T$s.getFloat()*Math.PI*2):(T$x=T$m[2]=2*Math.random()-1,Math.random()*Math.PI*2);var T$O=Math.sqrt(1-T$x*T$x);T$m[0]=T$O*Math.cos(T$w),T$m[1]=T$O*Math.sin(T$w);},T$O._randomPointInsideUnitSphere=function(T$L,T$s){var T$m=T$L.elements;T$O._randomPointUnitSphere(T$L);var T$x=NaN;T$x=T$s?Math.pow(T$s.getFloat(),1/3):Math.pow(Math.random(),1/3),T$m[0]=T$m[0]*T$x,T$m[1]=T$m[1]*T$x,T$m[2]=T$m[2]*T$x;},T$O._randomPointInsideHalfUnitBox=function(T$L,T$s){var T$m=T$L.elements;T$s?(T$m[0]=T$s.getFloat()-.5,T$m[1]=T$s.getFloat()-.5,T$m[2]=T$s.getFloat()-.5):(T$m[0]=Math.random()-.5,T$m[1]=Math.random()-.5,T$m[2]=Math.random()-.5);},T$O;}(),T$J=(function(){function T$L(T$L){this._size=null,this.enbale=!1,this._size=T$L;}T$r(T$L,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var T$s=T$L.prototype;T$H.imps(T$s,{"laya.d3.core.IClone":!0}),T$s.cloneTo=function(T$L){var T$s=T$L;this._size.cloneTo(T$s._size),T$s.enbale=this.enbale;},T$s.clone=function(){var T$L;switch(this._size.type){case 0:T$L=this._size.separateAxes?T$$.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):T$$.createByGradient(this._size.gradient.clone());break;case 1:T$L=this._size.separateAxes?T$$.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):T$$.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:T$L=this._size.separateAxes?T$$.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):T$$.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone());}var T$s=new this.constructor(T$L);return T$s.enbale=this.enbale,T$s;},T$u(0,T$s,"size",function(){return this._size;});}(),function(){function T$x(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN;}T$r(T$x,"laya.d3.core.particleShuriKen.module.StartFrame");var T$L=T$x.prototype;return T$H.imps(T$L,{"laya.d3.core.IClone":!0}),T$L.cloneTo=function(T$L){var T$s=T$L;T$s._type=this._type,T$s._constant=this._constant,T$s._constantMin=this._constantMin,T$s._constantMax=this._constantMax;},T$L.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$u(0,T$L,"constant",function(){return this._constant;}),T$u(0,T$L,"type",function(){return this._type;}),T$u(0,T$L,"constantMin",function(){return this._constantMin;}),T$u(0,T$L,"constantMax",function(){return this._constantMax;}),T$x.createByConstant=function(T$L){var T$s=new T$x();return T$s._type=0,T$s._constant=T$L,T$s;},T$x.createByRandomTwoConstant=function(T$L,T$s){var T$m=new T$x();return T$m._type=1,T$m._constantMin=T$L,T$m._constantMax=T$s,T$m;},T$x;}()),T$l=(function(){function T$L(T$L,T$s){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new T$Os(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=T$L,this._startFrame=T$s;}T$r(T$L,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var T$s=T$L.prototype;T$H.imps(T$s,{"laya.d3.core.IClone":!0}),T$s.cloneTo=function(T$L){var T$s=T$L;this.tiles.cloneTo(T$s.tiles),T$s.type=this.type,T$s.randomRow=this.randomRow,this._frame.cloneTo(T$s._frame),this._startFrame.cloneTo(T$s._startFrame),T$s.cycles=this.cycles,T$s.enableUVChannels=this.enableUVChannels,T$s.enable=this.enable;},T$s.clone=function(){var T$L,T$s;switch(this._frame.type){case 0:T$L=T$R.createByConstant(this._frame.constant);break;case 1:T$L=T$R.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:T$L=T$R.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:T$L=T$R.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone());}switch(this._startFrame.type){case 0:T$s=T$J.createByConstant(this._startFrame.constant);break;case 1:T$s=T$J.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax);}var T$m=new this.constructor(T$L,T$s);return this.tiles.cloneTo(T$m.tiles),T$m.type=this.type,T$m.randomRow=this.randomRow,T$m.cycles=this.cycles,T$m.enableUVChannels=this.enableUVChannels,T$m.enable=this.enable,T$m;},T$u(0,T$s,"frame",function(){return this._frame;}),T$u(0,T$s,"startFrame",function(){return this._startFrame;});}(),function(){function T$L(T$L){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=T$L;}T$r(T$L,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var T$s=T$L.prototype;T$H.imps(T$s,{"laya.d3.core.IClone":!0}),T$s.cloneTo=function(T$L){var T$s=T$L;this._velocity.cloneTo(T$s._velocity),T$s.enbale=this.enbale,T$s.space=this.space;},T$s.clone=function(){var T$L;switch(this._velocity.type){case 0:T$L=T$p.createByConstant(this._velocity.constant.clone());break;case 1:T$L=T$p.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:T$L=T$p.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:T$L=T$p.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone());}var T$s=new this.constructor(T$L);return T$s.enbale=this.enbale,T$s.space=this.space,T$s;},T$u(0,T$s,"velocity",function(){return this._velocity;});}(),function(){function T$L(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new T$Es(),this._vb=T$Zs.create(T$L._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=T$ps.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=T$gs.nameKey.getID("LINE"),this._shaderCompile=T$fs._preCompileShader[this._sharderNameID];}T$r(T$L,"laya.d3.core.PhasorSpriter3D");var T$s=T$L.prototype;return T$s.line=function(T$L,T$s,T$m,T$x){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(T$L.x,T$L.y,T$L.z,T$s.x,T$s.y,T$s.z,T$s.w),this.addVertex(T$m.x,T$m.y,T$m.z,T$x.x,T$x.y,T$x.z,T$x.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this;},T$s.circle=function(T$L,T$s,T$m,T$x,T$w,T$O){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*T$s,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/T$s,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*T$L,Math.cos(this._tempNumver0)*T$L,0,T$m,T$x,T$w,T$O),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this;},T$s.plane=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=T$x/2,this._tempNumver1=T$w/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(T$L-this._tempNumver0,T$s+this._tempNumver1,T$m,T$O,T$v,T$y,T$F),this.addVertex(T$L+this._tempNumver0,T$s+this._tempNumver1,T$m,T$O,T$v,T$y,T$F),this.addVertex(T$L-this._tempNumver0,T$s-this._tempNumver1,T$m,T$O,T$v,T$y,T$F),this.addVertex(T$L+this._tempNumver0,T$s-this._tempNumver1,T$m,T$O,T$v,T$y,T$F),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this;},T$s.box=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=T$x/2,this._tempNumver1=T$w/2,this._tempNumver2=T$O/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(T$L-this._tempNumver0,T$s+this._tempNumver1,T$m+this._tempNumver2,T$v,T$y,T$F,T$o),this.addVertex(T$L+this._tempNumver0,T$s+this._tempNumver1,T$m+this._tempNumver2,T$v,T$y,T$F,T$o),this.addVertex(T$L-this._tempNumver0,T$s-this._tempNumver1,T$m+this._tempNumver2,T$v,T$y,T$F,T$o),this.addVertex(T$L+this._tempNumver0,T$s-this._tempNumver1,T$m+this._tempNumver2,T$v,T$y,T$F,T$o),this.addVertex(T$L+this._tempNumver0,T$s+this._tempNumver1,T$m-this._tempNumver2,T$v,T$y,T$F,T$o),this.addVertex(T$L-this._tempNumver0,T$s+this._tempNumver1,T$m-this._tempNumver2,T$v,T$y,T$F,T$o),this.addVertex(T$L+this._tempNumver0,T$s-this._tempNumver1,T$m-this._tempNumver2,T$v,T$y,T$F,T$o),this.addVertex(T$L-this._tempNumver0,T$s-this._tempNumver1,T$m-this._tempNumver2,T$v,T$y,T$F,T$o),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this;},T$s.cone=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*T$m+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*T$m>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/T$m,this.addVertexIndex(0,T$s,0,T$x,T$w,T$O,T$v,this._tempUint0),this.addVertexIndex(0,0,0,T$x,T$w,T$O,T$v,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<T$m;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(T$L*this._tempNumver2,0,T$L*this._tempNumver3,T$x,T$w,T$O,T$v,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==T$m-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(T$L*this._tempNumver2,0,T$L*this._tempNumver3,T$x,T$w,T$O,T$v,this._tempUint0+(this._tempInt0+T$m)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==T$m-1?this.addIndexes(this._tempUint1+T$m+2):this.addIndexes(this._tempUint1+this._tempInt0+T$m+1),this.addIndexes(this._tempUint1+this._tempInt0+T$m),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this;},T$s.boundingBoxLine=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(T$L,T$w,T$O,T$v,T$y,T$F,T$o),this.addVertex(T$x,T$w,T$O,T$v,T$y,T$F,T$o),this.addVertex(T$L,T$s,T$O,T$v,T$y,T$F,T$o),this.addVertex(T$x,T$s,T$O,T$v,T$y,T$F,T$o),this.addVertex(T$x,T$w,T$m,T$v,T$y,T$F,T$o),this.addVertex(T$L,T$w,T$m,T$v,T$y,T$F,T$o),this.addVertex(T$x,T$s,T$m,T$v,T$y,T$F,T$o),this.addVertex(T$L,T$s,T$m,T$v,T$y,T$F,T$o),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this;},T$s.addVertex=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=T$L,this._vbData[this._posInVBData+1]=T$s,this._vbData[this._posInVBData+2]=T$m,this._vbData[this._posInVBData+3]=T$x,this._vbData[this._posInVBData+4]=T$w,this._vbData[this._posInVBData+5]=T$O,this._vbData[this._posInVBData+6]=T$v,this._posInVBData+=this._floatSizePerVer,this;},T$s.addVertexIndex=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){return this._hasBegun||this.addVertexIndexException(),this._vbData[T$y]=T$L,this._vbData[T$y+1]=T$s,this._vbData[T$y+2]=T$m,this._vbData[T$y+3]=T$x,this._vbData[T$y+4]=T$w,this._vbData[T$y+5]=T$O,this._vbData[T$y+6]=T$v,(T$y+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=T$y),this;},T$s.addIndexes=function(T$L){var T$s=arguments;this._hasBegun||this.addVertexIndexException();for(var T$m=0;T$m<T$s.length;T$m++)this._ibData[this._posInIBData]=T$s[T$m],this._posInIBData++;return this;},T$s.begin=function(T$L,T$s){return this._hasBegun&&this.beginException0(),1!==T$L&&4!==T$L&&this.beginException1(),this._primitiveType=T$L,this._camera=T$s,this._hasBegun=!0,this;},T$s.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this;},T$s.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(T$L._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),T$f.drawCall++,T$U.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0);},T$s.addVertexIndexException=function(){throw new Error("请先调用begin()函数");},T$s.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！");},T$s.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！");},T$s.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！");},T$s.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！");},T$s.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！");},T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(28,[new T$vL(0,"vector3",0),new T$vL(12,"vector4",1)]);}]),T$L;}()),T$q=function(){function T$L(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++T$L._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new T$Es();}T$r(T$L,"laya.d3.core.render.RenderElement");var T$s=T$L.prototype;return T$s.getDynamicBatchBakedVertexs=function(T$L){for(var T$s=this._renderObj._getVertexBuffer(T$L),T$m=T$s.getData().slice(),T$x=T$s.vertexDeclaration,T$w=T$x.getVertexElementByUsage(0).offset/4,T$O=T$x.getVertexElementByUsage(3).offset/4,T$v=this._sprite3D.transform,T$y=T$v.worldMatrix,T$F=T$v.rotation,T$o=T$x.vertexStride/4,T$V=0,T$C=T$m.length;T$V<T$C;T$V+=T$o){var T$E=T$V+T$w,T$r=T$V+T$O;T$js.transformVector3ArrayToVector3ArrayCoordinate(T$m,T$E,T$y,T$m,T$E),T$js.transformVector3ArrayByQuat(T$m,T$r,T$F,T$m,T$r);}return T$m;},T$s.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData();},T$s._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this);},T$u(0,T$s,"id",function(){return this._id;}),T$u(0,T$s,"renderObj",function(){return this._renderObj;},function(T$L){this._renderObj!==T$L&&(this._renderObj=T$L);}),T$L._uniqueIDCounter=0,T$L;}(),T$K=function(){function T$s(T$L){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++T$s._uniqueIDCounter,this._needSort=!1,this._scene=T$L,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={};}T$r(T$s,"laya.d3.core.render.RenderQueue");var T$L=T$s.prototype;return T$L._sortOpaqueFunc=function(T$L,T$s){if(T$L._render&&T$s._render){var T$m=T$L._material.renderQueue-T$s._material.renderQueue;return 0==T$m?T$L._render._distanceForSort-T$s._render._distanceForSort:T$m;}return 0;},T$L._sortAlphaFunc=function(T$L,T$s){if(T$L._render&&T$s._render){var T$m=T$L._material.renderQueue-T$s._material.renderQueue;return 0==T$m?T$s._render._distanceForSort-T$L._render._distanceForSort:T$m;}return 0;},T$L._begainRenderElement=function(T$L,T$s,T$m){return!!T$s._beforeRender(T$L);},T$L._sortAlpha=function(T$L){T$s._cameraPosition=T$L,this._finalElements.sort(this._sortAlphaFunc);},T$L._sortOpaque=function(T$L){T$s._cameraPosition=T$L,this._finalElements.sort(this._sortOpaqueFunc);},T$L._preRender=function(T$L){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements);},T$L._render=function(T$L,T$s){for(var T$m,T$x,T$w,T$O,T$v,T$y,T$F=T$f.loopCount,T$o=this._scene,T$V=T$L.camera,T$C=(T$V.id,!1),T$E=0,T$r=this._finalElements.length;T$E<T$r;T$E++){var T$u,T$T,T$j,T$D=this._finalElements[T$E];if(null!=T$D._onPreRenderFunction&&T$D._onPreRenderFunction.call(T$D._sprite3D,T$L),0===T$D._type){if(T$L.owner=T$j=T$D._sprite3D,T$L.renderElement=T$D,T$j._preRenderUpdateComponents(T$L),T$u=T$D.renderObj,T$T=T$D._material,this._begainRenderElement(T$L,T$u,T$T)){if(T$m=T$u._getVertexBuffers(),!(T$w=(T$x=T$u._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[T$x.id]){this._errorRecord[T$x.id]=1;var T$e="vertexBuffer:"+("("+T$x._destroyed+","+T$x._released+","+T$x._referenceCount+","+T$x._buffer+")")+", material:"+(T$T?T$T.__className+"("+T$T._destroyed+","+T$T._released+")":"null")+", owner:"+(T$j?T$j.__className+"("+T$j._destroyed+","+T$j._activeInHierarchy+","+T$j._displayedInStage+")":"null")+", renderObj:"+(T$u?T$u.__className+"("+T$u._destroyed+","+T$u._released+","+T$u._referenceCount+")":"")+", parent:, url:"+(T$j?T$j.url:"")+", disposeStack:"+T$x.disposeStack;T$H.recordError("报错：unknown vertexDeclaration  "+T$e);}continue;}if(T$C=(T$O=T$L._shader=T$T._getShader(T$o._shaderDefineValue,T$w.shaderDefineValue,T$j._shaderDefineValue)).bind()||T$F!==T$O._uploadLoopCount,T$m){if(T$O._uploadVertexBuffer!==T$m||T$C){for(var T$b=0;T$b<T$m.length;T$b++){var T$S=T$m[T$b];T$O.uploadAttributesX(T$S.vertexDeclaration.shaderValues.data,T$S);}T$O._uploadVertexBuffer=T$m;}}else(T$O._uploadVertexBuffer!==T$x||T$C)&&(T$O.uploadAttributes(T$w.shaderValues.data,null),T$O._uploadVertexBuffer=T$x);(T$O._uploadScene!==T$o||T$C)&&(T$O.uploadSceneUniforms(T$o._shaderValues.data),T$O._uploadScene=T$o),(T$V!==T$O._uploadCamera||T$O._uploadSprite3D!==T$j||T$C)&&(T$O.uploadSpriteUniforms(T$j._shaderValues.data),T$O._uploadSprite3D=T$j),(T$V!==T$O._uploadCamera||T$C)&&(T$O.uploadCameraUniforms(T$V._shaderValues.data),T$O._uploadCamera=T$V),(T$O._uploadMaterial!==T$T||T$C)&&(T$T._upload(),T$O._uploadMaterial=T$T),T$v!==T$T?(T$T._setRenderStateBlendDepth(),T$T._setRenderStateFrontFace(T$s,T$j.transform),T$v=T$T,T$y=T$j):T$y!==T$j&&(T$T._setRenderStateFrontFace(T$s,T$j.transform),T$y=T$j),T$u._render(T$L),T$O._uploadLoopCount=T$F;}T$j._postRenderUpdateComponents(T$L);}else if(2===T$D._type){T$D.renderObj;T$L.owner=T$j=T$D._sprite3D,T$L.renderElement=T$D,T$L._batchIndexStart=T$D._tempBatchIndexStart,T$L._batchIndexEnd=T$D._tempBatchIndexEnd,T$u=T$D.renderObj,T$T=T$D._material,this._begainRenderElement(T$L,T$u,T$T)&&(T$w=(T$x=T$u._getVertexBuffer(0)).vertexDeclaration,T$C=(T$O=T$L._shader=T$T._getShader(T$o._shaderDefineValue,T$w.shaderDefineValue,T$j._shaderDefineValue)).bind()||T$F!==T$O._uploadLoopCount,(T$O._uploadVertexBuffer!==T$x||T$C)&&(T$O.uploadAttributes(T$w.shaderValues.data,null),T$O._uploadVertexBuffer=T$x),(T$O._uploadScene!==T$o||T$C)&&(T$O.uploadSceneUniforms(T$o._shaderValues.data),T$O._uploadScene=T$o),(T$V!==T$O._uploadCamera||T$O._uploadSprite3D!==T$j||T$C)&&(T$O.uploadSpriteUniforms(T$j._shaderValues.data),T$O._uploadSprite3D=T$j),(T$V!==T$O._uploadCamera||T$C)&&(T$O.uploadCameraUniforms(T$V._shaderValues.data),T$O._uploadCamera=T$V),(T$O._uploadMaterial!==T$T||T$C)&&(T$T._upload(),T$O._uploadMaterial=T$T),T$v!==T$T?(T$T._setRenderStateBlendDepth(),T$T._setRenderStateFrontFace(T$s,T$j.transform),T$v=T$T,T$y=T$j):T$y!==T$j&&(T$T._setRenderStateFrontFace(T$s,T$j.transform),T$y=T$j),T$u._render(T$L),T$O._uploadLoopCount=T$F);}}},T$L._renderShadow=function(T$L,T$s){for(var T$m,T$x,T$w,T$O,T$v,T$y=T$f.loopCount,T$F=this._scene,T$o=T$L.camera,T$V=!1,T$C=0,T$E=this._finalElements.length;T$C<T$E;T$C++){var T$r,T$u,T$T,T$j=this._finalElements[T$C];0===T$j._type&&(T$L.owner=T$T=T$j._sprite3D,T$s||T$T._projectionViewWorldUpdateCamera===T$o&&T$T._projectionViewWorldUpdateLoopCount===T$f.loopCount||(T$T._render._renderUpdate(T$L._projectionViewMatrix),T$T._projectionViewWorldUpdateLoopCount=T$f.loopCount,T$T._projectionViewWorldUpdateCamera=T$o),T$L.renderElement=T$j,T$T._preRenderUpdateComponents(T$L),T$r=T$j.renderObj,T$u=T$j._material,this._begainRenderElement(T$L,T$r,null)&&(T$x=(T$m=T$r._getVertexBuffer(0)).vertexDeclaration,T$V=(T$w=T$L._shader=T$u._getShader(T$F._shaderDefineValue,T$x.shaderDefineValue,T$T._shaderDefineValue)).bind()||T$y!==T$w._uploadLoopCount,(T$w._uploadVertexBuffer!==T$m||T$V)&&(T$w.uploadAttributes(T$x.shaderValues.data,null),T$w._uploadVertexBuffer=T$m),(T$o!==T$w._uploadCamera||T$w._uploadSprite3D!==T$T||T$V)&&(T$w.uploadSpriteUniforms(T$T._shaderValues.data),T$w._uploadSprite3D=T$T),(T$o!==T$w._uploadCamera||T$V)&&(T$w.uploadCameraUniforms(T$o._shaderValues.data),T$w._uploadCamera=T$o),(T$w._uploadMaterial!==T$u||T$V)&&(T$u._upload(),T$w._uploadMaterial=T$u),T$w._uploadRenderElement,T$O!==T$u?(T$u._setRenderStateFrontFace(!1,T$T.transform),T$O=T$u,T$v=T$T):T$v!==T$T&&(T$u._setRenderStateFrontFace(!1,T$T.transform),T$v=T$T),T$r._render(T$L),T$w._uploadLoopCount=T$y),T$T._postRenderUpdateComponents(T$L));}},T$L._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0;},T$L._addRenderElement=function(T$L){this._renderElements.push(T$L),this._needSort=!0;},T$L._addDynamicBatchElement=function(T$L){this._dynamicBatchCombineRenderElements.push(T$L);},T$u(0,T$L,"id",function(){return this._id;}),T$s._uniqueIDCounter=0,T$s._cameraPosition=null,T$s;}(),T$P=function(){function T$L(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null;}return T$r(T$L,"laya.d3.core.render.RenderState"),T$L.clientWidth=0,T$L.clientHeight=0,T$L;}(),T$k=function(){function T$v(T$L,T$s){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new T$ML(new T$vs(),0),this._corners=[new T$vs(),new T$vs(),new T$vs(),new T$vs(),new T$vs(),new T$vs(),new T$vs(),new T$vs()],this._boundingBoxCenter=new T$vs(),this._children=T$x(8),this._objects=[],this._tempBoundBoxCorners=[new T$vs(),new T$vs(),new T$vs(),new T$vs(),new T$vs(),new T$vs(),new T$vs(),new T$vs()],this._scene=T$L,this._currentDepth=T$s;}T$r(T$v,"laya.d3.core.scene.OctreeNode");var T$L=T$v.prototype;return T$H.imps(T$L,{"laya.d3.core.scene.ITreeNode":!0}),T$L.init=function(T$L,T$s){var T$m=new T$vs(),T$x=new T$vs();T$vs.scale(T$s,-.5,T$m),T$vs.scale(T$s,.5,T$x),T$vs.add(T$m,T$L,T$m),T$vs.add(T$x,T$L,T$x),this.exactBox=new T$kL(T$m,T$x),this.relaxBox=new T$kL(T$m,T$x);},T$L.addTreeNode=function(T$L){1===Collision.boxContainsBox(this._relaxBox,T$L.boundingBox)?this.addNodeDown(T$L,0):this.addObject(T$L);},T$L.addChild=function(T$L){var T$s=this._children[T$L];if(null==T$s){T$s=new T$v(this._scene,this._currentDepth+1),(this._children[T$L]=T$s)._parent=this,T$vs.subtract(this._exactBox.max,this._exactBox.min,T$v.tempSize),T$vs.multiply(T$v.tempSize,T$v._octreeSplit[T$L],T$v.tempCenter),T$vs.add(this._exactBox.min,T$v.tempCenter,T$v.tempCenter),T$vs.scale(T$v.tempSize,.25,T$v.tempSize);var T$m=new T$vs(),T$x=new T$vs();T$vs.subtract(T$v.tempCenter,T$v.tempSize,T$m),T$vs.add(T$v.tempCenter,T$v.tempSize,T$x),T$s.exactBox=new T$kL(T$m,T$x),T$vs.scale(T$v.tempSize,T$v.relax,T$v.tempSize);var T$w=new T$vs(),T$O=new T$vs();T$vs.subtract(T$v.tempCenter,T$v.tempSize,T$w),T$vs.add(T$v.tempCenter,T$v.tempSize,T$O),T$s.relaxBox=new T$kL(T$w,T$O);}return T$s;},T$L.addObject=function(T$L){(T$L._treeNode=this)._objects.push(T$L);},T$L.removeObject=function(T$L){if(T$L._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var T$s=this._objects.indexOf(T$L);return-1!==T$s&&(this._objects.splice(T$s,1),!0);},T$L.clearObject=function(){this._objects.length=0;},T$L.addNodeUp=function(T$L,T$s){this._parent&&1!==Collision.boxContainsBox(this._exactBox,T$L.boundingBox)?this._parent.addNodeUp(T$L,T$s-1):this.addNodeDown(T$L,T$s);},T$L.addNodeDown=function(T$L,T$s){if(T$s<this._scene.treeLevel){var T$m=this.inChildIndex(T$L.boundingBoxCenter),T$x=this.addChild(T$m);1===Collision.boxContainsBox(T$x._relaxBox,T$L.boundingBox)?T$x.addNodeDown(T$L,++T$s):this.addObject(T$L);}else this.addObject(T$L);},T$L.inChildIndex=function(T$L){return 4*(T$L.z<this._boundingBoxCenter.z?0:1)+2*(T$L.y<this._boundingBoxCenter.y?0:1)+(T$L.x<this._boundingBoxCenter.x?0:1);},T$L.updateObject=function(T$L){1===Collision.boxContainsBox(this._relaxBox,T$L.boundingBox)?(this.removeObject(T$L),T$L._treeNode=null,this.addNodeDown(T$L,this._currentDepth)):this._parent&&(this.removeObject(T$L),T$L._treeNode=null,this._parent.addNodeUp(T$L,this._currentDepth-1));},T$L.cullingObjects=function(T$L,T$s,T$m,T$x,T$w){var T$O,T$v=0,T$y=0,T$F=0,T$o=this._scene._dynamicBatchManager;for(T$v=0,T$O=this._objects.length;T$v<T$O;T$v++){var T$V=this._objects[T$v];if(T$G.isVisible(T$V._owner.layer.mask)&&T$V.enable){if(T$s&&(T$f.treeSpriteCollision+=1,0===T$L.containsBoundSphere(T$V.boundingSphere)))continue;T$V._renderUpdate(T$w),T$V._distanceForSort=T$vs.distance(T$V.boundingSphere.center,T$x)+T$V.sortingFudge;var T$C=T$V._renderElements;for(T$y=0,T$F=T$C.length;T$y<T$F;T$y++){var T$E=T$C[T$y],T$r=T$E._staticBatch;if(T$r&&T$r._material===T$E._material)T$r._addBatchRenderElement(T$E);else{var T$u=T$E.renderObj;T$u.triangleCount<10&&1===T$u._vertexBufferCount&&T$u._getIndexBuffer()&&T$E._material.renderQueue<2&&T$E._canDynamicBatch&&!T$V._owner.isStatic?T$o._addPrepareRenderElement(T$E):this._scene.getRenderQueue(T$E._material.renderQueue)._addRenderElement(T$E);}}}}for(T$v=0;T$v<8;T$v++){var T$T=this._children[T$v];if(null!=T$T){var T$j=T$s;if(T$s){var T$D=T$L.containsBoundBox(T$T._relaxBox);if(T$f.treeNodeCollision+=1,0===T$D)continue;T$j=2===T$D;}T$T.cullingObjects(T$L,T$j,T$m,T$x,T$w);}}},T$L.cullingShadowObjects=function(T$L,T$s,T$m,T$x,T$w){var T$O,T$v=0,T$y=0,T$F=0;this._scene._dynamicBatchManager;for(T$v=0,T$O=this._objects.length;T$v<T$O;T$v++){var T$o=this._objects[T$v];if(T$o.castShadow&&T$G.isVisible(T$o._owner.layer.mask)&&T$o.enable){if(T$m&&0===T$L[0].containsBoundSphere(T$o.boundingSphere))continue;for(var T$V=1,T$C=T$L.length;T$V<T$C;T$V++){var T$E=T$s[T$V-1];if(0!==T$L[T$V].containsBoundSphere(T$o.boundingSphere)){var T$r=T$o._renderElements;for(T$y=0,T$F=T$r.length;T$y<T$F;T$y++)T$E._addRenderElement(T$r[T$y]);}}}}for(T$v=0;T$v<8;T$v++){var T$u=this._children[T$v];if(null!=T$u){var T$T=T$m;if(T$m){var T$j=T$L[0].containsBoundBox(T$u._relaxBox);if(0===T$j)continue;T$T=2===T$j;}T$u.cullingShadowObjects(T$L,T$s,T$T,T$x,T$w);}}},T$L.cullingShadowObjectsOnePSSM=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v,T$y=T$s[0],T$F=0,T$o=0,T$V=0;for(T$F=0,T$v=this._objects.length;T$F<T$v;T$F++){var T$C=this._objects[T$F];if(T$C.castShadow&&T$G.isVisible(T$C._owner.layer.mask)&&T$C.enable){if(T$x&&0===T$L.containsBoundSphere(T$C.boundingSphere))continue;T$C._renderUpdate(T$m);var T$E=T$C._renderElements;for(T$o=0,T$V=T$E.length;T$o<T$V;T$o++)T$y._addRenderElement(T$E[T$o]);}}for(T$F=0;T$F<8;T$F++){var T$r=this._children[T$F];if(null!=T$r){var T$u=T$x;if(T$x){var T$T=T$L.containsBoundBox(T$r._relaxBox);if(0===T$T)continue;T$u=2===T$T;}T$r.cullingShadowObjectsOnePSSM(T$L,T$s,T$m,T$u,T$w,T$O);}}},T$L.renderBoudingBox=function(T$L){this._renderBoudingBox(T$L);for(var T$s=0;T$s<8;++T$s){var T$m=this._children[T$s];T$m&&T$m.renderBoudingBox(T$L);}},T$L.buildAllChild=function(T$L){if(T$L<this._scene.treeLevel)for(var T$s=0;T$s<8;T$s++){this.addChild(T$s).buildAllChild(T$L+1);}},T$L._renderBoudingBox=function(T$L){},T$u(0,T$L,"exactBox",function(){return this._exactBox;},function(T$L){this._exactBox=T$L,T$vs.add(T$L.min,T$L.max,this._boundingBoxCenter),T$vs.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter);}),T$u(0,T$L,"relaxBox",function(){return this._relaxBox;},function(T$L){(this._relaxBox=T$L).getCorners(this._corners),T$ML.createfromPoints(this._corners,this._boundingSphere);}),T$v.debugMode=!1,T$v.relax=1.15,T$v.CHILDNUM=8,T$C(T$v,["tempVector0",function(){return this.tempVector0=new T$vs();},"tempSize",function(){return this.tempSize=new T$vs();},"tempCenter",function(){return this.tempCenter=new T$vs();},"_octreeSplit",function(){return this._octreeSplit=[new T$vs(.25,.25,.25),new T$vs(.75,.25,.25),new T$vs(.25,.75,.25),new T$vs(.75,.75,.25),new T$vs(.25,.25,.75),new T$vs(.75,.25,.75),new T$vs(.25,.75,.75),new T$vs(.75,.75,.75)];}]),T$v;}(),T$B=(function(){function T$L(){}T$r(T$L,"laya.d3.core.scene.SceneManager");}(),function(){function T$L(T$L,T$s,T$m,T$x){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===T$L&&(T$L=1),void 0===T$s&&(T$s=1),void 0===T$m&&(T$m=1),void 0===T$x&&(T$x=1),this._r=T$L,this._g=T$s,this._b=T$m,this._a=T$x;}return T$r(T$L,"laya.d3.core.trail.module.Color",null,"Color$1"),T$L.prototype.cloneTo=function(T$L){T$L._r=this._r,T$L._g=this._g,T$L._b=this._b,T$L._a=this._a;},T$C(T$L,["RED",function(){return this.RED=new T$L(1,0,0,1);},"GREEN",function(){return this.GREEN=new T$L(0,1,0,1);},"BLUE",function(){return this.BLUE=new T$L(0,0,1,1);},"CYAN",function(){return this.CYAN=new T$L(0,1,1,1);},"YELLOW",function(){return this.YELLOW=new T$L(1,.92,.016,1);},"MAGENTA",function(){return this.MAGENTA=new T$L(1,0,1,1);},"GRAY",function(){return this.GRAY=new T$L(.5,.5,.5,1);},"WHITE",function(){return this.WHITE=new T$L(1,1,1,1);},"BLACK",function(){return this.BLACK=new T$L(0,0,0,1);}]),T$L;}()),T$M=(function(){function T$L(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[];}T$r(T$L,"laya.d3.core.trail.module.Gradient");var T$s=T$L.prototype;T$s.setKeys=function(T$L,T$s){var T$m,T$x;this._colorKeys=T$L;for(var T$w=this.index=0;T$w<T$L.length;T$w++){var T$O=(T$m=T$L[T$w]).color;this._colorKeyData[this.index++]=T$O._r,this._colorKeyData[this.index++]=T$O._g,this._colorKeyData[this.index++]=T$O._b,this._colorKeyData[this.index++]=T$m.time;}this._alphaKeys=T$s;for(var T$v=this.index=0;T$v<T$s.length;T$v++)T$x=T$s[T$v],this._alphaKeyData[this.index++]=T$x.alpha,this._alphaKeyData[this.index++]=T$x.time;},T$s.cloneTo=function(T$L){var T$s=0,T$m=0,T$x=this.colorKeys,T$w=[];for(T$s=0,T$m=T$x.length;T$s<T$m;T$s++){var T$O=new T$z();T$x[T$s].cloneTo(T$O),T$w.push(T$O);}var T$v=this.alphaKeys,T$y=[];for(T$s=0,T$m=T$v.length;T$s<T$m;T$s++){var T$F=new T$M();T$v[T$s].cloneTo(T$F),T$y.push(T$F);}T$L.setKeys(T$w,T$y);},T$u(0,T$s,"mode",function(){return this._mode;},function(T$L){this._mode=T$L;}),T$u(0,T$s,"colorKeys",function(){return this._colorKeys;},function(T$L){this._colorKeys=T$L;for(var T$s=this.index=0;T$s<T$L.length;T$s++){var T$m=T$L[T$s],T$x=T$m.color;this._colorKeyData[this.index++]=T$x._r,this._colorKeyData[this.index++]=T$x._g,this._colorKeyData[this.index++]=T$x._b,this._colorKeyData[this.index++]=T$m.time;}}),T$u(0,T$s,"alphaKeys",function(){return this._alphaKeys;},function(T$L){this._alphaKeys=T$L;for(var T$s=this.index=0;T$s<T$L.length;T$s++){var T$m=T$L[T$s];this._alphaKeyData[this.index++]=T$m.alpha,this._alphaKeyData[this.index++]=T$m.time;}});}(),function(){function T$L(T$L,T$s){this._alpha=NaN,this._time=NaN,void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=0),this._alpha=T$L,this._time=T$s;}T$r(T$L,"laya.d3.core.trail.module.GradientAlphaKey");var T$s=T$L.prototype;return T$s.cloneTo=function(T$L){T$L.alpha=this.alpha,T$L.time=this.time;},T$u(0,T$s,"alpha",function(){return this._alpha;},function(T$L){this._alpha=T$L;}),T$u(0,T$s,"time",function(){return this._time;},function(T$L){this._time=T$L;}),T$L;}()),T$z=function(){function T$L(T$L,T$s){this._color=null,this._time=NaN,void 0===T$s&&(T$s=0),this._color=T$L||new T$B(),this._time=T$s;}T$r(T$L,"laya.d3.core.trail.module.GradientColorKey");var T$s=T$L.prototype;return T$s.cloneTo=function(T$L){this.color.cloneTo(T$L.color),T$L.time=this.time;},T$u(0,T$s,"color",function(){return this._color;},function(T$L){this._color=T$L;}),T$u(0,T$s,"time",function(){return this._time;},function(T$L){this._time=T$L;}),T$L;}(),T$t=(function(){function T$L(){}T$r(T$L,"laya.d3.core.trail.module.GradientMode"),T$L.Blend=0,T$L.Fixed=1;}(),function(){function T$L(){}T$r(T$L,"laya.d3.core.trail.module.TextureMode"),T$L.Stretch=0,T$L.Tile=1;}(),function(){function T$L(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN;}T$r(T$L,"laya.d3.core.trail.module.TrailKeyFrame"),T$L.prototype.cloneTo=function(T$L){T$L.time=this.time,T$L.inTangent=this.inTangent,T$L.outTangent=this.outTangent,T$L.value=this.value;};}(),function(){function T$s(T$L){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new T$vs(),this._curPosition=new T$vs(),this._delVector3=new T$vs(),this._lastFixedVertexPosition=new T$vs(),this._pointAtoBVector3=new T$vs(),this._pointA=new T$vs(),this._pointB=new T$vs(),this._owner=T$L,this._id=T$s.renderElementCount++,0==this._id?T$L._owner.transform.position.cloneTo(this._lastPosition):T$L._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new T$Zs(T$t.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new T$Zs(T$t.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2);}T$r(T$s,"laya.d3.core.trail.TrailRenderElement");var T$L=T$s.prototype;T$H.imps(T$L,{"laya.d3.core.render.IRenderable":!0}),T$L._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1);},T$L._addTrailByFirstPosition=function(T$L,T$s){T$vs.subtract(T$s,T$L,this._delVector3),T$vs.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),T$vs.normalize(this._pointAtoBVector3,this._pointAtoBVector3),T$vs.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(T$L),T$L.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0;},T$L._addTrailByNextPosition=function(T$L){T$vs.subtract(T$L,this._lastFixedVertexPosition,this._delVector3),T$vs.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),T$vs.normalize(this._pointAtoBVector3,this._pointAtoBVector3),T$vs.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=T$vs.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=T$zL.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(T$L),T$L.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(T$L),this._virtualVerticesCount=2);},T$L._updateVerticesByPosition=function(T$L){this._pointe=T$L.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0;},T$L._updateVertexBuffer2=function(){var T$L,T$s=0,T$m=0,T$x=0;for(T$x=0,T$L=(this._verticesCount+this._virtualVerticesCount)/2;T$x<T$L;T$x++)T$m=0==this._owner.textureMode?(this._VerticesToTailLength[T$x]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[T$x],this._vertices2[T$s++]=1-T$m,this._vertices2[T$s++]=1-T$m;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount);},T$L._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0;},T$L._updateDisappear=function(){var T$L,T$s=0;for(T$s=this._curDisappearIndex,T$L=(this._verticesCount+this._virtualVerticesCount)/2;T$s<T$L;T$s++)this._owner._curtime-this._everyGroupVertexBirthTime[T$s]>=this._owner.time+T$zL.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0));},T$L._beforeRender=function(T$L){return this._camera=T$L.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),T$vs.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0));},T$L._render=function(T$L){this._isDead||(T$U.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),T$f.drawCall++,T$f.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2);},T$L._getVertexBuffer=function(T$L){return void 0===T$L&&(T$L=0),0===T$L?this._vertexBuffer1:1===T$L?this._vertexBuffer2:null;},T$L._getVertexBuffers=function(){return this._vertexBuffers;},T$L._getIndexBuffer=function(){return null;},T$L.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition);},T$L._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null;},T$u(0,T$L,"_vertexBufferCount",function(){return this._vertexBuffers.length;}),T$u(0,T$L,"triangleCount",function(){return 0;}),T$s.renderElementCount=0;}(),function(){function T$L(){}T$r(T$L,"laya.d3.core.trail.VertexTrail");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration1;}),T$u(1,T$L,"vertexDeclaration1",function(){return T$L._vertexDeclaration1;}),T$u(1,T$L,"vertexDeclaration2",function(){return T$L._vertexDeclaration2;}),T$C(T$L,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new T$OL(32,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",41),new T$vL(24,"single",33),new T$vL(28,"single",40)]);},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new T$OL(4,[new T$vL(0,"single",38)]);}]),T$L;}()),T$LL=function(){function T$S(T$L){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=T$L;}T$r(T$S,"laya.d3.graphics.DynamicBatch");var T$L=T$S.prototype;return T$H.imps(T$L,{"laya.d3.core.render.IRenderable":!0}),T$L._getVertexBuffer=function(T$L){return void 0===T$L&&(T$L=0),0===T$L?this._vertexBuffer:null;},T$L._getIndexBuffer=function(){return this._indexBuffer;},T$L._getCombineRenderElementFromPool=function(T$L,T$s,T$m){var T$x=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return T$x||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=T$x=new T$q(),T$x._sprite3D=new T$Ks()),T$x._sprite3D._render._renderUpdate(T$m),T$x;},T$L._getRenderElement=function(T$L,T$s,T$m){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*T$S.maxVertexCount),this._indexDatas=new Uint16Array(T$S.maxIndexCount),this._vertexBuffer=T$Zs.create(this._vertexDeclaration,T$S.maxVertexCount,35048),this._indexBuffer=T$ps.create("ushort",T$S.maxIndexCount,35048));for(var T$x=this._merageElements.length=0,T$w=0,T$O=0,T$v=this._combineRenderElements.length;T$O<T$v;T$O++){var T$y=this._combineRenderElements[T$O],T$F=T$y.getDynamicBatchBakedVertexs(0),T$o=T$y.getBakedIndices(),T$V=T$y._sprite3D.transform._isFrontFaceInvert,T$C=T$x/(this._vertexDeclaration.vertexStride/4),T$E=T$w,T$r=T$E+T$o.length;T$y._tempBatchIndexStart=T$E,T$y._tempBatchIndexEnd=T$r,this._indexDatas.set(T$o,T$w);var T$u=0;if(T$V)for(T$u=T$E;T$u<T$r;T$u+=3){this._indexDatas[T$u]=T$C+this._indexDatas[T$u];var T$T=this._indexDatas[T$u+1],T$j=this._indexDatas[T$u+2];this._indexDatas[T$u+1]=T$C+T$j,this._indexDatas[T$u+2]=T$C+T$T;}else for(T$u=T$E;T$u<T$r;T$u+=3)this._indexDatas[T$u]=T$C+this._indexDatas[T$u],this._indexDatas[T$u+1]=T$C+this._indexDatas[T$u+1],this._indexDatas[T$u+2]=T$C+this._indexDatas[T$u+2];T$w+=T$o.length,this._vertexDatas.set(T$F,T$x),T$x+=T$F.length;}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),T$O=this._combineRenderElementPoolIndex=0,T$v=this._materials.length;T$O<T$v;T$O++){var T$D=this._getCombineRenderElementFromPool(T$L,T$s,T$m);T$D._type=2,T$D._staticBatch=null;var T$e=(T$D.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[T$O]]._tempBatchIndexStart,T$b=T$O+1===this._materialToRenderElementsOffsets.length?T$w:this._combineRenderElements[this._materialToRenderElementsOffsets[T$O+1]]._tempBatchIndexStart;T$D._tempBatchIndexStart=T$e,T$D._tempBatchIndexEnd=T$b,T$D._material=this._materials[T$O],this._merageElements.push(T$D);}},T$L._addCombineRenderObjTest=function(T$L){var T$s=T$L.renderObj,T$m=this._currentCombineIndexCount+T$s._getIndexBuffer().indexCount,T$x=this._currentCombineVertexCount+T$s._getVertexBuffer().vertexCount;return!(T$S.maxVertexCount<T$x||T$S.maxIndexCount<T$m);},T$L._addCombineRenderObj=function(T$L){var T$s=T$L.renderObj;this._combineRenderElements.push(T$L),this._currentCombineIndexCount=this._currentCombineIndexCount+T$s._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+T$s._getVertexBuffer().vertexCount;},T$L._addCombineMaterial=function(T$L){this._materials.push(T$L);},T$L._addMaterialToRenderElementOffset=function(T$L){this._materialToRenderElementsOffsets.push(T$L);},T$L._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0;},T$L._addToRenderQueue=function(T$L,T$s,T$m,T$x){this._getRenderElement(T$s,T$m,T$x);for(var T$w=0,T$O=this._materials.length;T$w<T$O;T$w++)T$L.getRenderQueue(this._materials[T$w].renderQueue)._addDynamicBatchElement(this._merageElements[T$w]);},T$L._beforeRender=function(T$L){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0;},T$L._render=function(T$L){var T$s=T$L._batchIndexEnd-T$L._batchIndexStart;T$U.mainContext.drawElements(4,T$s,5123,2*T$L._batchIndexStart),T$f.drawCall++,T$f.trianglesFaces+=T$s/3;},T$L._getVertexBuffers=function(){return null;},T$u(0,T$L,"_vertexBufferCount",function(){return 1;}),T$u(0,T$L,"triangleCount",function(){return this._indexBuffer.indexCount/3;}),T$u(0,T$L,"combineRenderElementsCount",function(){return this._combineRenderElements.length;}),T$S.maxVertexCount=2e4,T$S.maxIndexCount=4e4,T$S.maxCombineTriangleCount=10,T$S;}(),T$sL=function(){function T$S(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[];}T$r(T$S,"laya.d3.graphics.DynamicBatchManager");var T$L=T$S.prototype;return T$L.getDynamicBatch=function(T$L,T$s){var T$m,T$x=T$L.id.toString()+T$s;return this._dynamicBatches[T$x]?T$m=this._dynamicBatches[T$x]:this._dynamicBatches[T$x]=T$m=new T$LL(T$L),T$m;},T$L._garbageCollection=function(){for(var T$L in this._dynamicBatches)0===this._dynamicBatches[T$L].combineRenderElementsCount&&delete this._dynamicBatches[T$L];},T$L._addPrepareRenderElement=function(T$L){this._prepareDynamicBatchCombineElements.push(T$L);},T$L._finishCombineDynamicBatch=function(T$L){var T$s,T$m,T$x;this._prepareDynamicBatchCombineElements.sort(T$S._sortPrepareDynamicBatch);for(var T$w,T$O,T$v,T$y,T$F,T$o=-1,T$V=!0,T$C=0,T$E=-1,T$r=0,T$u=this._prepareDynamicBatchCombineElements.length;T$r<T$u;T$r++){var T$T=(T$O=this._prepareDynamicBatchCombineElements[T$r]).renderObj._getVertexBuffer(0).vertexDeclaration,T$j=T$m!==T$T;T$j&&(T$C=0,T$m=T$T);var T$D=T$C!==T$o;if(T$D&&(T$o=T$C),(T$j||T$D)&&(T$v=this.getDynamicBatch(T$T,T$C),T$s=null),T$V){if(T$v._addCombineRenderObjTest(T$O)){if(T$s!==(T$w=T$O._material))T$y&&(T$L.getRenderQueue(T$F._material.renderQueue)._addRenderElement(T$F),T$F=T$y=null,T$E=-1),T$y=T$w,T$E=T$v.combineRenderElementsCount,T$F=T$O,T$s=T$w;else if(T$y){var T$e=T$F.renderObj,T$b=T$O.renderObj;T$e._getVertexBuffer().vertexCount+T$b._getVertexBuffer().vertexCount>T$LL.maxVertexCount||T$e._getIndexBuffer().indexCount+T$b._getIndexBuffer().indexCount>T$LL.maxIndexCount?(T$L.getRenderQueue(T$F._material.renderQueue)._addRenderElement(T$F),T$y=T$w,T$E=T$v.combineRenderElementsCount,T$F=T$O):(T$v._addCombineMaterial(T$y),T$v._addMaterialToRenderElementOffset(T$E),T$v._addCombineRenderObj(T$F),T$F=T$y=null,T$E=-1,T$v._addCombineRenderObj(T$O));}else T$v._addCombineRenderObj(T$O);T$V=!0;}else T$y&&(T$L.getRenderQueue(T$F._material.renderQueue)._addRenderElement(T$F),T$F=T$y=null,T$E=-1),T$C++,T$V=!1;}else T$x=this._prepareDynamicBatchCombineElements[T$r-1],T$v._addMaterialToRenderElementOffset(T$v.combineRenderElementsCount),T$s=T$x._material,T$v._addCombineMaterial(T$s),T$v._addCombineRenderObj(T$x),T$V=!0,T$s!==(T$w=T$O._material)?(T$y=T$w,T$E=T$v.combineRenderElementsCount,T$F=T$O):T$v._addCombineRenderObj(T$O),T$s=T$w;}T$y&&(T$L.getRenderQueue(T$F._material.renderQueue)._addRenderElement(T$F),T$F=T$y=null,T$E=-1),this._prepareDynamicBatchCombineElements.length=0;},T$L._clearRenderElements=function(){for(var T$L in this._dynamicBatches)this._dynamicBatches[T$L]._clearRenderElements();},T$L._addToRenderQueue=function(T$L,T$s,T$m,T$x){for(var T$w in this._dynamicBatches){var T$O=this._dynamicBatches[T$w];0<T$O.combineRenderElementsCount&&T$O._addToRenderQueue(T$L,T$s,T$m,T$x);}},T$L.dispose=function(){this._dynamicBatches=null;},T$S._sortPrepareDynamicBatch=function(T$L,T$s){return T$L._mainSortID-T$s._mainSortID;},T$S;}(),T$mL=function(){function T$L(){}return T$r(T$L,"laya.d3.graphics.FrustumCulling"),T$L.renderShadowObjectCulling=function(T$L,T$s,T$m,T$x,T$w){var T$O=0,T$v=0,T$y=0,T$F=0;for(T$O=0,T$y=T$m.length;T$O<T$y;T$O++){var T$o=T$m[T$O];T$o&&T$o._clearRenderElements();}var T$V,T$C,T$E,T$r=T$L._cullingRenders;if(1<T$w){for(T$O=0,T$y=T$L._cullingRendersLength;T$O<T$y;T$O++)if((T$V=T$r[T$O]).castShadow&&T$G.isVisible(T$V._owner.layer.mask)&&T$V.enable)for(var T$u=1,T$T=T$s.length;T$u<T$T;T$u++)if(T$C=T$m[T$u-1],0!==T$s[T$u].containsBoundSphere(T$V.boundingSphere))for(T$v=0,T$F=(T$E=T$V._renderElements).length;T$v<T$F;T$v++)T$C._addRenderElement(T$E[T$v]);}else for(T$O=0,T$y=T$L._cullingRendersLength;T$O<T$y;T$O++)if((T$V=T$r[T$O]).castShadow&&T$G.isVisible(T$V._owner.layer.mask)&&T$V.enable&&0!==T$s[0].containsBoundSphere(T$V.boundingSphere))for(T$V._renderUpdate(T$x),T$C=T$m[0],T$v=0,T$F=(T$E=T$V._renderElements).length;T$v<T$F;T$v++)T$C._addRenderElement(T$E[T$v]);},T$L.renderShadowObjectCullingOctree=function(T$L,T$s,T$m,T$x,T$w){for(var T$O=0,T$v=T$m.length;T$O<T$v;T$O++){var T$y=T$m[T$O];T$y&&T$y._clearRenderElements();}1<T$w?T$L.treeRoot.cullingShadowObjects(T$s,T$m,!0,0,T$L):T$L.treeRoot.cullingShadowObjectsOnePSSM(T$s[0],T$m,T$x,!0,0,T$L);},T$L.renderObjectCulling=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v=0,T$y=0,T$F=0,T$o=0,T$V=T$s._quenes,T$C=T$s._dynamicBatchManager,T$E=T$s._cullingRenders;for(T$v=0,T$y=T$V.length;T$v<T$y;T$v++){var T$r=T$V[T$v];T$r&&T$r._clearRenderElements();}var T$u=T$xL._staticBatchManagers;for(T$v=0,T$y=T$u.length;T$v<T$y;T$v++)T$u[T$v]._clearRenderElements();T$C._clearRenderElements();var T$T=T$m.transform.position;for(T$v=0,T$y=T$s._cullingRendersLength;T$v<T$y;T$v++){var T$j=T$E[T$v];if(T$G.isVisible(T$j._owner.layer.mask)&&T$j.enable&&0!==T$L.containsBoundSphere(T$j.boundingSphere)&&T$j._renderUpdate(T$O)){T$j._distanceForSort=T$vs.distance(T$j.boundingSphere.center,T$T)+T$j.sortingFudge;var T$D=T$j._renderElements;for(T$F=0,T$o=T$D.length;T$F<T$o;T$F++){var T$e=T$D[T$F],T$b=T$e._staticBatch;if(T$b&&T$b._material===T$e._material)T$b._addBatchRenderElement(T$e);else{var T$S=T$e.renderObj;T$S.triangleCount<10&&1===T$S._vertexBufferCount&&T$S._getIndexBuffer()&&T$e._material.renderQueue<2&&T$e._canDynamicBatch&&!T$j._owner.isStatic?T$C._addPrepareRenderElement(T$e):T$s.getRenderQueue(T$e._material.renderQueue)._addRenderElement(T$e);}}}}for(T$v=0,T$y=T$u.length;T$v<T$y;T$v++)T$u[T$v]._addToRenderQueue(T$s,T$x,T$w,T$O);T$C._finishCombineDynamicBatch(T$s),T$C._addToRenderQueue(T$s,T$x,T$w,T$O);},T$L.renderObjectCullingOctree=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v=0,T$y=0,T$F=T$s._quenes,T$o=T$s._dynamicBatchManager;for(T$v=0,T$y=T$F.length;T$v<T$y;T$v++){var T$V=T$F[T$v];T$V&&T$V._clearRenderElements();}var T$C=T$xL._staticBatchManagers;for(T$v=0,T$y=T$C.length;T$v<T$y;T$v++)T$C[T$v]._clearRenderElements();for(T$o._clearRenderElements(),T$s._cullingRenders.length=0,T$s.treeRoot.cullingObjects(T$L,!0,0,T$m.transform.position,T$O),T$v=0,T$y=T$C.length;T$v<T$y;T$v++)T$C[T$v]._addToRenderQueue(T$s,T$x,T$w,T$O);T$o._finishCombineDynamicBatch(T$s),T$o._addToRenderQueue(T$s,T$x,T$w,T$O);},T$L.renderObjectCullingNoBoundFrustum=function(T$L,T$s,T$m,T$x,T$w){var T$O=0,T$v=0,T$y=0,T$F=0,T$o=T$L._quenes,T$V=T$L._dynamicBatchManager,T$C=T$L._cullingRenders;for(T$O=0,T$v=T$o.length;T$O<T$v;T$O++){var T$E=T$o[T$O];T$E&&T$E._clearRenderElements();}var T$r=T$xL._staticBatchManagers;for(T$O=0,T$v=T$r.length;T$O<T$v;T$O++)T$r[T$O]._clearRenderElements();T$V._clearRenderElements();var T$u=T$s.transform.position;for(T$O=0,T$v=T$L._cullingRendersLength;T$O<T$v;T$O++){var T$T=T$C[T$O];if(T$G.isVisible(T$T._owner.layer.mask)&&T$T.enable){T$T._renderUpdate(T$w),T$T._distanceForSort=T$vs.distance(T$T.boundingSphere.center,T$u)+T$T.sortingFudge;var T$j=T$T._renderElements;for(T$y=0,T$F=T$j.length;T$y<T$F;T$y++){var T$D=T$j[T$y],T$e=T$D._staticBatch;if(T$e&&T$e._material===T$D._material)T$e._addBatchRenderElement(T$D);else{var T$b=T$D.renderObj;T$b.triangleCount<10&&1===T$b._vertexBufferCount&&T$b._getIndexBuffer()&&T$D._material.renderQueue<2&&T$D._canDynamicBatch&&!T$T._owner.isStatic?T$V._addPrepareRenderElement(T$D):T$L.getRenderQueue(T$D._material.renderQueue)._addRenderElement(T$D);}}}}for(T$O=0,T$v=T$r.length;T$O<T$v;T$O++)T$r[T$O]._addToRenderQueue(T$L,T$m,T$x,T$w);T$V._finishCombineDynamicBatch(T$L),T$V._addToRenderQueue(T$L,T$m,T$x,T$w);},T$L;}(),T$xL=function(){function T$O(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={};}T$r(T$O,"laya.d3.graphics.StaticBatchManager");var T$L=T$O.prototype;return T$L._finishInit=function(){for(var T$L in this._staticBatches)this._staticBatches[T$L]._finishInit();this._initBatchRenderElements.length=0;},T$L._initStaticBatchs=function(T$L){throw new Error("StaticBatchManager:must override this function.");},T$L._addInitBatchSprite=function(T$L){for(var T$s=T$L._render._renderElements,T$m=0,T$x=T$s.length;T$m<T$x;T$m++)this._initBatchRenderElements.push(T$s[T$m]);},T$L._clearRenderElements=function(){for(var T$L in this._staticBatches)this._staticBatches[T$L]._clearRenderElements();},T$L._garbageCollection=function(T$L){var T$s=T$L._staticBatch,T$m=T$s._initBatchRenderElements,T$x=T$m.indexOf(T$L);T$m.splice(T$x,1),0===T$m.length&&(T$s.dispose(),delete this._staticBatches[T$s._key]);},T$L._addToRenderQueue=function(T$L,T$s,T$m,T$x){for(var T$w in this._staticBatches){var T$O=this._staticBatches[T$w];0<T$O._batchRenderElements.length&&T$O._updateToRenderQueue(T$L,T$x);}},T$L.dispose=function(){this._staticBatches=null;},T$O._addToStaticBatchQueue=function(T$L){T$L instanceof laya.d3.core.RenderableSprite3D&&T$L._addToInitStaticBatchManager();for(var T$s=0,T$m=T$L.numChildren;T$s<T$m;T$s++)T$O._addToStaticBatchQueue(T$L._childs[T$s]);},T$O.combine=function(T$L,T$s){var T$m,T$x=0,T$w=0;if(T$s)for(T$x=0,T$w=T$s.length;T$x<T$w;T$x++){T$s[T$x]._addToInitStaticBatchManager();}else T$L&&T$O._addToStaticBatchQueue(T$L);for(T$x=0,T$w=T$O._staticBatchManagers.length;T$x<T$w;T$x++)(T$m=T$O._staticBatchManagers[T$x])._initStaticBatchs(T$L),T$m._finishInit();},T$O._staticBatchManagers=[],T$O;}(),T$wL=function(){function T$L(T$L,T$s,T$m){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=T$L,this._manager=T$s,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=T$m;}T$r(T$L,"laya.d3.graphics.StaticBatch");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),T$s._binarySearch=function(T$L){for(var T$s=0,T$m=this._batchRenderElements.length-1,T$x=0;T$s<=T$m;)T$x=Math.floor((T$s+T$m)/2),this._compareBatchRenderElement(this._batchRenderElements[T$x],T$L)?T$m=T$x-1:T$s=T$x+1;return T$s;},T$s._compareBatchRenderElement=function(T$L,T$s){throw new Error("StaticBatch:must override this function.");},T$s._getVertexDecLightMap=function(T$L){return T$L===T$pL.vertexDeclaration?T$GL.vertexDeclaration:T$L===T$$L.vertexDeclaration?T$hL.vertexDeclaration:T$L===T$_L.vertexDeclaration?T$SL.vertexDeclaration:T$L===T$XL.vertexDeclaration?null:T$L===T$TL.vertexDeclaration?T$jL.vertexDeclaration:T$L===T$WL.vertexDeclaration?T$AL.vertexDeclaration:T$L===T$UL.vertexDeclaration?T$cL.vertexDeclaration:T$L===T$ZL.vertexDeclaration?T$RL.vertexDeclaration:T$L===T$$L.vertexDeclaration?T$hL.vertexDeclaration:T$L===T$QL.vertexDeclaration?T$HL.vertexDeclaration:T$L===T$XL.vertexDeclaration?null:T$L===T$TL.vertexDeclaration?T$jL.vertexDeclaration:T$L===T$dL.vertexDeclaration?T$gL.vertexDeclaration:T$L===T$UL.vertexDeclaration?T$cL.vertexDeclaration:T$L;},T$s._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.");},T$s._addBatchRenderElement=function(T$L){this._batchRenderElements.splice(this._binarySearch(T$L),0,T$L);},T$s._updateToRenderQueue=function(T$L,T$s){this._combineRenderElementPoolIndex=0,this._getRenderElement(T$L.getRenderQueue(this._material.renderQueue)._renderElements,T$L,T$s);},T$s._getRenderElement=function(T$L,T$s,T$m){throw new Error("StaticBatch:must override this function.");},T$s._finishInit=function(){throw new Error("StaticBatch:must override this function.");},T$s._clearRenderElements=function(){this._batchRenderElements.length=0;},T$s.dispose=function(){},T$s._getVertexBuffer=function(T$L){return void 0===T$L&&(T$L=0),null;},T$s._getIndexBuffer=function(){return null;},T$s._beforeRender=function(T$L){return!0;},T$s._render=function(T$L){},T$s._getVertexBuffers=function(){return null;},T$u(0,T$s,"_vertexBufferCount",function(){return 1;}),T$u(0,T$s,"triangleCount",function(){return 0;}),T$L.combine=function(T$L){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),T$xL.combine(T$L);},T$L.maxBatchVertexCount=65535,T$L;}(),T$OL=function(){function T$v(T$L,T$s){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++T$v._uniqueIDCounter,this._id>T$v.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",T$v.maxVertexDeclaration);this._shaderValues=new T$Es(),this._vertexElementsDic={},this._vertexStride=T$L,this._vertexElements=T$s;for(var T$m=0;T$m<T$s.length;T$m++){var T$x=T$s[T$m],T$w=T$x.elementUsage;this._vertexElementsDic[T$w]=T$x;var T$O=[T$v._getTypeSize(T$x.elementFormat)/4,5126,!1,this._vertexStride,T$x.offset];switch(this._shaderValues.setValue(T$w,T$O),T$w){case 1:this._addShaderDefine(T$fs.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(T$fs.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(T$fs.SHADERDEFINE_UV1);}}}T$r(T$v,"laya.d3.graphics.VertexDeclaration");var T$L=T$v.prototype;return T$L._addShaderDefine=function(T$L){this._shaderDefineValue|=T$L;},T$L._removeShaderDefine=function(T$L){this._shaderDefineValue&=~T$L;},T$L.getVertexElements=function(){return this._vertexElements.slice();},T$L.getVertexElementByUsage=function(T$L){return this._vertexElementsDic[T$L];},T$L.unBinding=function(){},T$u(0,T$L,"shaderDefineValue",function(){return this._shaderDefineValue;}),T$u(0,T$L,"id",function(){return this._id;}),T$u(0,T$L,"vertexStride",function(){return this._vertexStride;}),T$u(0,T$L,"shaderValues",function(){return this._shaderValues;}),T$v._getTypeSize=function(T$L){switch(T$L){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8;}return 0;},T$v.getVertexStride=function(T$L){for(var T$s=0,T$m=0;T$m<T$L.Length;T$m++){var T$x=T$L[T$m],T$w=T$x.offset+T$v._getTypeSize(T$x.elementFormat);T$s<T$w&&(T$s=T$w);}return T$s;},T$v._maxVertexDeclarationBit=1e3,T$v._uniqueIDCounter=1,T$C(T$v,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647);}]),T$v;}(),T$vL=function(){function T$L(T$L,T$s,T$m){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=T$L,this.elementFormat=T$s,this.elementUsage=T$m;}return T$r(T$L,"laya.d3.graphics.VertexElement"),T$L;}(),T$yL=(function(){function T$L(){}T$r(T$L,"laya.d3.graphics.VertexElementFormat"),T$L.Single="single",T$L.Vector2="vector2",T$L.Vector3="vector3",T$L.Vector4="vector4",T$L.Color="color",T$L.Byte4="byte4",T$L.Short2="short2",T$L.Short4="short4",T$L.NormalizedShort2="normalizedshort2",T$L.NormalizedShort4="normalizedshort4",T$L.HalfVector2="halfvector2",T$L.HalfVector4="halfvector4";}(),function(){function T$L(){}T$r(T$L,"laya.d3.graphics.VertexElementUsage"),T$L.POSITION0=0,T$L.COLOR0=1,T$L.TEXTURECOORDINATE0=2,T$L.NORMAL0=3,T$L.BINORMAL0=4,T$L.TANGENT0=5,T$L.BLENDINDICES0=6,T$L.BLENDWEIGHT0=7,T$L.DEPTH0=8,T$L.FOG0=9,T$L.POINTSIZE0=10,T$L.SAMPLE0=11,T$L.TESSELLATEFACTOR0=12,T$L.COLOR1=13,T$L.NEXTTEXTURECOORDINATE0=14,T$L.TEXTURECOORDINATE1=15,T$L.NEXTTEXTURECOORDINATE1=16,T$L.CORNERTEXTURECOORDINATE0=17,T$L.VELOCITY0=18,T$L.STARTCOLOR0=19,T$L.STARTSIZE=20,T$L.AGEADDSCALE0=21,T$L.STARTROTATION=22,T$L.ENDCOLOR0=23,T$L.STARTLIFETIME=24,T$L.TIME0=33,T$L.SHAPEPOSITIONSTARTLIFETIME=30,T$L.DIRECTIONTIME=32,T$L.SIZEROTATION0=27,T$L.RADIUS0=28,T$L.RADIAN0=29,T$L.STARTSPEED=31,T$L.RANDOM0=34,T$L.RANDOM1=35,T$L.SIMULATIONWORLDPOSTION=36,T$L.SIMULATIONWORLDROTATION=37,T$L.TEXTURECOORDINATE0X=38,T$L.TEXTURECOORDINATE0X1=39,T$L.TEXTURECOORDINATE0Y=40,T$L.OFFSETVECTOR=41;}(),function(){function T$L(T$L,T$s,T$m){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=T$L,this._textureCoordinate0=T$s,this._time=T$m;}T$r(T$L,"laya.d3.graphics.VertexGlitter");var T$s=T$L.prototype;T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"textureCoordinate",function(){return this._textureCoordinate0;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"time",function(){return this._time;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(24,[new T$vL(0,"vector3",0),new T$vL(12,"vector2",2),new T$vL(20,"single",33)]);}]);}(),function(){function T$L(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=T$L,this._position=T$s,this._velocity=T$m,this._startColor=T$x,this._endColor=T$w,this._sizeRotation=T$O,this._radius=T$v,this._radian=T$y,this._ageAddScale=T$F,this._time=T$o;}T$r(T$L,"laya.d3.graphics.VertexParticle");var T$s=T$L.prototype;T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"endColor",function(){return this._endColor;}),T$u(0,T$s,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate;}),T$u(0,T$s,"sizeRotation",function(){return this._sizeRotation;}),T$u(0,T$s,"velocity",function(){return this._velocity;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"startColor",function(){return this._startColor;}),T$u(0,T$s,"radius",function(){return this._radius;}),T$u(0,T$s,"radian",function(){return this._radian;}),T$u(0,T$s,"ageAddScale",function(){return this._ageAddScale;}),T$u(0,T$s,"time",function(){return this._time;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(116,[new T$vL(0,"vector4",17),new T$vL(16,"vector3",0),new T$vL(28,"vector3",18),new T$vL(40,"vector4",19),new T$vL(56,"vector4",23),new T$vL(72,"vector3",27),new T$vL(84,"vector2",28),new T$vL(92,"vector4",29),new T$vL(108,"single",24),new T$vL(112,"single",33)]);}]);}(),function(){function T$L(T$L){this._position=null,this._position=T$L;}T$r(T$L,"laya.d3.graphics.VertexPosition");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(12,[new T$vL(0,"vector3",0)]);}]),T$L;}()),T$FL=function(){function T$L(T$L,T$s){this._position=null,this._normal=null,this._position=T$L,this._normal=T$s;}T$r(T$L,"laya.d3.graphics.VertexPositionNormal");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(24,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3)]);}]),T$L;}(),T$oL=function(){function T$L(T$L,T$s,T$m){this._position=null,this._normal=null,this._color=null,this._position=T$L,this._normal=T$s,this._color=T$m;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalColor");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"color",function(){return this._color;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(40,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector4",1)]);}]),T$L;}(),T$VL=function(){function T$L(T$L,T$s,T$m,T$x,T$w){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=T$L,this._normal=T$s,this._color=T$m,this._blendIndex=T$x,this._blendWeight=T$w;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalColorSkin");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"blendWeight",function(){return this._blendWeight;}),T$u(0,T$s,"color",function(){return this._color;}),T$u(0,T$s,"blendIndex",function(){return this._blendIndex;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(72,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector4",1),new T$vL(40,"vector4",7),new T$vL(56,"vector4",6)]);}]),T$L;}(),T$CL=function(){function T$L(T$L,T$s,T$m,T$x,T$w,T$O){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$L,this._normal=T$s,this._color=T$m,this._tangent=T$x,this._blendIndex=T$w,this._blendWeight=T$O;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"blendWeight",function(){return this._blendWeight;}),T$u(0,T$s,"color",function(){return this._color;}),T$u(0,T$s,"blendIndex",function(){return this._blendIndex;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(88,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector4",1),new T$vL(40,"vector4",7),new T$vL(56,"vector4",6),new T$vL(72,"vector4",5)]);}]),T$L;}(),T$EL=function(){function T$L(T$L,T$s,T$m,T$x,T$w,T$O){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$L,this._normal=T$s,this._color=T$m,this._tangent=T$x,this._blendIndex=T$w,this._blendWeight=T$O;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"blendWeight",function(){return this._blendWeight;}),T$u(0,T$s,"color",function(){return this._color;}),T$u(0,T$s,"blendIndex",function(){return this._blendIndex;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(84,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector4",1),new T$vL(40,"vector4",7),new T$vL(56,"vector4",6),new T$vL(72,"vector3",5)]);}]),T$L;}(),T$rL=function(){function T$L(T$L,T$s,T$m,T$x){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=T$L,this._normal=T$s,this._color=T$m,this._tangent=T$x;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalColorSTangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"color",function(){return this._color;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(56,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector4",1),new T$vL(40,"vector4",5)]);}]),T$L;}(),T$uL=function(){function T$L(T$L,T$s,T$m,T$x){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=T$L,this._normal=T$s,this._color=T$m,this._tangent=T$x;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalColorTangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"color",function(){return this._color;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(52,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector4",1),new T$vL(40,"vector3",5)]);}]),T$L;}(),T$TL=function(){function T$L(T$L,T$s,T$m,T$x){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=T$L,this._normal=T$s,this._color=T$m,this._textureCoordinate=T$x;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalColorTexture");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"textureCoordinate",function(){return this._textureCoordinate;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"color",function(){return this._color;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(48,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector4",1),new T$vL(40,"vector2",2)]);}]),T$L;}(),T$jL=function(){function T$L(T$L,T$s,T$m,T$x,T$w){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=T$L,this._normal=T$s,this._color=T$m,this._textureCoordinate0=T$x,this._textureCoordinate1=T$w;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"color",function(){return this._color;}),T$u(0,T$s,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(0,T$s,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(56,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector4",1),new T$vL(40,"vector2",2),new T$vL(48,"vector2",15)]);}]),T$L;}(),T$DL=function(){function T$L(T$L,T$s,T$m,T$x,T$w,T$O,T$v){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=T$L,this._normal=T$s,this._color=T$m,this._textureCoordinate0=T$x,this._textureCoordinate1=T$w,this._blendIndex=T$O,this._blendWeight=T$v;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"blendWeight",function(){return this._blendWeight;}),T$u(0,T$s,"color",function(){return this._color;}),T$u(0,T$s,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(0,T$s,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$u(0,T$s,"blendIndex",function(){return this._blendIndex;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(88,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector4",1),new T$vL(40,"vector2",2),new T$vL(48,"vector2",15),new T$vL(56,"vector4",7),new T$vL(72,"vector4",6)]);}]),T$L;}(),T$eL=function(){function T$L(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$L,this._normal=T$s,this._color=T$m,this._textureCoordinate0=T$x,this._textureCoordinate1=T$w,this._tangent=T$O,this._blendIndex=T$v,this._blendWeight=T$y;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"blendWeight",function(){return this._blendWeight;}),T$u(0,T$s,"color",function(){return this._color;}),T$u(0,T$s,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(0,T$s,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$u(0,T$s,"blendIndex",function(){return this._blendIndex;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(104,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector4",1),new T$vL(40,"vector2",2),new T$vL(48,"vector2",15),new T$vL(56,"vector4",7),new T$vL(72,"vector4",6),new T$vL(88,"vector4",5)]);}]),T$L;}(),T$bL=function(){function T$L(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$s.VertexPositionNormalColorTexture0SkinTangent=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){this._position=T$L,this._normal=T$s,this._color=T$m,this._textureCoordinate0=T$x,this._textureCoordinate1=T$w,this._tangent=T$O,this._blendIndex=T$v,this._blendWeight=T$y;},T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"blendWeight",function(){return this._blendWeight;}),T$u(0,T$s,"color",function(){return this._color;}),T$u(0,T$s,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(0,T$s,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$u(0,T$s,"blendIndex",function(){return this._blendIndex;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(100,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector4",1),new T$vL(40,"vector2",2),new T$vL(48,"vector2",15),new T$vL(56,"vector4",7),new T$vL(72,"vector4",6),new T$vL(88,"vector3",5)]);}]),T$L;}(),T$SL=function(){function T$L(T$L,T$s,T$m,T$x,T$w,T$O){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=T$L,this._normal=T$s,this._color=T$m,this._textureCoordinate0=T$x,this._textureCoordinate1=T$w,this._tangent=T$O;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"color",function(){return this._color;}),T$u(0,T$s,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(0,T$s,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(72,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector4",1),new T$vL(40,"vector2",2),new T$vL(48,"vector2",15),new T$vL(56,"vector4",5)]);}]),T$L;}(),T$HL=function(){function T$L(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$s.VertexPositionNormalColorTexture0Tangent=function(T$L,T$s,T$m,T$x,T$w,T$O){this._position=T$L,this._normal=T$s,this._color=T$m,this._textureCoordinate0=T$x,this._textureCoordinate1=T$w,this._tangent=T$O;},T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"color",function(){return this._color;}),T$u(0,T$s,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(0,T$s,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(68,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector4",1),new T$vL(40,"vector2",2),new T$vL(48,"vector2",15),new T$vL(56,"vector3",5)]);}]),T$L;}(),T$YL=function(){function T$L(T$L,T$s,T$m,T$x,T$w,T$O){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=T$L,this._normal=T$s,this._color=T$m,this._textureCoordinate=T$x,this._blendIndex=T$w,this._blendWeight=T$O;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"textureCoordinate",function(){return this._textureCoordinate;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"blendWeight",function(){return this._blendWeight;}),T$u(0,T$s,"color",function(){return this._color;}),T$u(0,T$s,"blendIndex",function(){return this._blendIndex;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(80,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector4",1),new T$vL(40,"vector2",2),new T$vL(48,"vector4",7),new T$vL(64,"vector4",6)]);}]),T$L;}(),T$aL=function(){function T$L(T$L,T$s,T$m,T$x,T$w,T$O,T$v){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$L,this._normal=T$s,this._color=T$m,this._textureCoordinate=T$x,this._tangent=T$w,this._blendIndex=T$O,this._blendWeight=T$v;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"textureCoordinate",function(){return this._textureCoordinate;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"blendWeight",function(){return this._blendWeight;}),T$u(0,T$s,"color",function(){return this._color;}),T$u(0,T$s,"blendIndex",function(){return this._blendIndex;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(96,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector4",1),new T$vL(40,"vector2",2),new T$vL(48,"vector4",7),new T$vL(64,"vector4",6),new T$vL(80,"vector4",5)]);}]),T$L;}(),T$fL=function(){function T$L(T$L,T$s,T$m,T$x,T$w,T$O,T$v){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$L,this._normal=T$s,this._color=T$m,this._textureCoordinate=T$x,this._tangent=T$w,this._blendIndex=T$O,this._blendWeight=T$v;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"textureCoordinate",function(){return this._textureCoordinate;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"blendWeight",function(){return this._blendWeight;}),T$u(0,T$s,"color",function(){return this._color;}),T$u(0,T$s,"blendIndex",function(){return this._blendIndex;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(92,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector4",1),new T$vL(40,"vector2",2),new T$vL(48,"vector4",7),new T$vL(64,"vector4",6),new T$vL(80,"vector3",5)]);}]),T$L;}(),T$_L=function(){function T$L(T$L,T$s,T$m,T$x,T$w){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=T$L,this._normal=T$s,this._color=T$m,this._textureCoordinate=T$x,this._tangent=T$w;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"textureCoordinate",function(){return this._textureCoordinate;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"color",function(){return this._color;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(64,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector4",1),new T$vL(40,"vector2",2),new T$vL(48,"vector4",5)]);}]),T$L;}(),T$QL=function(){function T$L(T$L,T$s,T$m,T$x,T$w){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=T$L,this._normal=T$s,this._color=T$m,this._textureCoordinate=T$x,this._tangent=T$w;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"textureCoordinate",function(){return this._textureCoordinate;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"color",function(){return this._color;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(60,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector4",1),new T$vL(40,"vector2",2),new T$vL(48,"vector3",5)]);}]),T$L;}(),T$NL=function(){function T$L(T$L,T$s,T$m){this._position=null,this._normal=null,this._tangent=null,this._position=T$L,this._normal=T$s,this._tangent=T$m;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalSTangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(40,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector4",5)]);}]),T$L;}(),T$iL=function(){function T$L(T$L,T$s,T$m){this._position=null,this._normal=null,this._tangent=null,this._position=T$L,this._normal=T$s,this._tangent=T$m;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalTangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(36,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector3",5)]);}]),T$L;}(),T$UL=function(){function T$L(T$L,T$s,T$m){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=T$L,this._normal=T$s,this._textureCoordinate=T$m;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalTexture");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"textureCoordinate",function(){return this._textureCoordinate;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(32,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector2",2)]);}]),T$L;}(),T$cL=function(){function T$L(T$L,T$s,T$m,T$x){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=T$L,this._normal=T$s,this._textureCoordinate0=T$m,this._textureCoordinate1=T$x;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(0,T$s,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(40,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector2",2),new T$vL(32,"vector2",15)]);}]),T$L;}(),T$hL=function(){function T$L(T$L,T$s,T$m,T$x,T$w,T$O){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=T$L,this._normal=T$s,this._textureCoordinate0=T$m,this._textureCoordinate1=T$x,this._blendIndex=T$w,this._blendWeight=T$O;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(0,T$s,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$u(0,T$s,"blendIndex",function(){return this._blendIndex;}),T$u(0,T$s,"blendWeight",function(){return this._blendWeight;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(72,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector2",2),new T$vL(32,"vector2",15),new T$vL(40,"vector4",7),new T$vL(56,"vector4",6)]);}]),T$L;}(),T$GL=function(){function T$L(T$L,T$s,T$m,T$x,T$w,T$O,T$v){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$L,this._normal=T$s,this._textureCoordinate0=T$m,this._textureCoordinate1=T$x,this._tangent=T$w,this._blendIndex=T$O,this._blendWeight=T$v;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(0,T$s,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$u(0,T$s,"blendIndex",function(){return this._blendIndex;}),T$u(0,T$s,"blendWeight",function(){return this._blendWeight;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(88,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector2",2),new T$vL(32,"vector2",15),new T$vL(40,"vector4",7),new T$vL(56,"vector4",6),new T$vL(72,"vector4",5)]);}]),T$L;}(),T$RL=function(){function T$L(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$s.VertexPositionNormalTexture0SkinTangent=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){this._position=T$L,this._normal=T$s,this._textureCoordinate0=T$m,this._textureCoordinate1=T$x,this._tangent=T$w,this._blendIndex=T$O,this._blendWeight=T$v;},T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(0,T$s,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$u(0,T$s,"blendIndex",function(){return this._blendIndex;}),T$u(0,T$s,"blendWeight",function(){return this._blendWeight;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(84,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector2",2),new T$vL(32,"vector2",15),new T$vL(40,"vector4",7),new T$vL(56,"vector4",6),new T$vL(72,"vector3",5)]);}]),T$L;}(),T$AL=function(){function T$L(T$L,T$s,T$m,T$x,T$w){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=T$L,this._normal=T$s,this._textureCoordinate0=T$m,this._textureCoordinate1=T$x,this._tangent=T$w;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(0,T$s,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(56,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector2",2),new T$vL(32,"vector2",15),new T$vL(40,"vector4",5)]);}]),T$L;}(),T$gL=function(){function T$L(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$s.VertexPositionNormalTexture0Tangent=function(T$L,T$s,T$m,T$x,T$w){this._position=T$L,this._normal=T$s,this._textureCoordinate0=T$m,this._textureCoordinate1=T$x,this._tangent=T$w;},T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(0,T$s,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(52,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector2",2),new T$vL(32,"vector2",15),new T$vL(40,"vector3",5)]);}]),T$L;}(),T$$L=function(){function T$L(T$L,T$s,T$m,T$x,T$w){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=T$L,this._normal=T$s,this._textureCoordinate=T$m,this._blendIndex=T$x,this._blendWeight=T$w;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalTextureSkin");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"textureCoordinate",function(){return this._textureCoordinate;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"blendIndex",function(){return this._blendIndex;}),T$u(0,T$s,"blendWeight",function(){return this._blendWeight;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(64,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector2",2),new T$vL(32,"vector4",7),new T$vL(48,"vector4",6)]);}]),T$L;}(),T$pL=function(){function T$L(T$L,T$s,T$m,T$x,T$w,T$O){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$L,this._normal=T$s,this._textureCoordinate=T$m,this._tangent=T$x,this._blendIndex=T$w,this._blendWeight=T$O;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"textureCoordinate",function(){return this._textureCoordinate;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"blendIndex",function(){return this._blendIndex;}),T$u(0,T$s,"blendWeight",function(){return this._blendWeight;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(80,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector2",2),new T$vL(32,"vector4",7),new T$vL(48,"vector4",6),new T$vL(64,"vector4",5)]);}]),T$L;}(),T$ZL=function(){function T$L(T$L,T$s,T$m,T$x,T$w,T$O){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$L,this._normal=T$s,this._textureCoordinate=T$m,this._tangent=T$x,this._blendIndex=T$w,this._blendWeight=T$O;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"textureCoordinate",function(){return this._textureCoordinate;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"blendIndex",function(){return this._blendIndex;}),T$u(0,T$s,"blendWeight",function(){return this._blendWeight;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(76,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector2",2),new T$vL(32,"vector4",7),new T$vL(48,"vector4",6),new T$vL(64,"vector3",5)]);}]),T$L;}(),T$WL=function(){function T$L(T$L,T$s,T$m,T$x){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=T$L,this._normal=T$s,this._textureCoordinate=T$m,this._tangent=T$x;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"textureCoordinate",function(){return this._textureCoordinate;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(48,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector2",2),new T$vL(32,"vector4",5)]);}]),T$L;}(),T$dL=function(){function T$L(T$L,T$s,T$m,T$x){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=T$L,this._normal=T$s,this._textureCoordinate=T$m,this._tangent=T$x;}T$r(T$L,"laya.d3.graphics.VertexPositionNormalTextureTangent");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"textureCoordinate",function(){return this._textureCoordinate;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(44,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector2",2),new T$vL(32,"vector3",5)]);}]),T$L;}(),T$XL=function(){function T$L(T$L,T$s,T$m){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=T$L,this._normal=T$s,this._textureCoordinate=T$m;}T$r(T$L,"laya.d3.graphics.VertexPositionNTBTexture");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"textureCoordinate",function(){return this._textureCoordinate;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(56,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector3",5),new T$vL(36,"vector3",4),new T$vL(48,"vector2",2)]);}]),T$L;}(),T$IL=function(){function T$L(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=T$L,this._normal=T$s,this._textureCoordinate0=T$x,this._textureCoordinate1=T$w,this._tangent=T$O,T$m=T$m,this._blendIndex=T$v,this._blendWeight=T$y;}T$r(T$L,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"tangent",function(){return this._tangent;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(0,T$s,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$u(0,T$s,"blendIndex",function(){return this._blendIndex;}),T$u(0,T$s,"blendWeight",function(){return this._blendWeight;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(96,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector3",5),new T$vL(36,"vector3",4),new T$vL(48,"vector2",2),new T$vL(56,"vector2",15),new T$vL(64,"vector4",7),new T$vL(80,"vector4",6)]);}]),T$L;}(),T$nL=function(){function T$L(T$L,T$s,T$m){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=T$L,this._normal=T$s,this._textureCoordinate=T$m;}T$r(T$L,"laya.d3.graphics.VertexPositionNTBTextureSkin");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"textureCoordinate",function(){return this._textureCoordinate;}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(88,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector3",5),new T$vL(36,"vector3",4),new T$vL(48,"vector2",2),new T$vL(56,"vector4",7),new T$vL(72,"vector4",6)]);}]),T$L;}(),T$JL=(function(){function T$L(T$L,T$s,T$m,T$x){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=T$L,this._normal=T$s,this._textureCoord0=T$m,this._textureCoord1=T$x;}T$r(T$L,"laya.d3.graphics.VertexPositionTerrain");var T$s=T$L.prototype;T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"normal",function(){return this._normal;}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"textureCoord0",function(){return this._textureCoord0;}),T$u(0,T$s,"textureCoord1",function(){return this._textureCoord1;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(40,[new T$vL(0,"vector3",0),new T$vL(12,"vector3",3),new T$vL(24,"vector2",2),new T$vL(32,"vector2",15)]);}]);}(),function(){function T$L(T$L,T$s){this._position=null,this._textureCoordinate0=null,this._position=T$L,this._textureCoordinate0=T$s;}T$r(T$L,"laya.d3.graphics.VertexPositionTexture0");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"position",function(){return this._position;}),T$u(0,T$s,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(20,[new T$vL(0,"vector3",0),new T$vL(12,"vector2",2)]);}]),T$L;}()),T$lL=(function(){function T$L(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o,T$V,T$C,T$E,T$r){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=T$L,this._positionStartLifeTime=T$s,this._velocity=T$m,this._startColor=T$x,this._startSize=T$w,this._startRotation0=T$O,this._startRotation1=T$v,this._startRotation2=T$y,this._startLifeTime=T$F,this._time=T$o,this._startSpeed=T$V,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=T$r;}T$r(T$L,"laya.d3.graphics.VertexShurikenParticleBillboard");var T$s=T$L.prototype;T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate;}),T$u(0,T$s,"random1",function(){return this._randoms1;}),T$u(0,T$s,"startRotation2",function(){return this._startRotation2;}),T$u(0,T$s,"positionStartLifeTime",function(){return this._positionStartLifeTime;}),T$u(0,T$s,"velocity",function(){return this._velocity;}),T$u(0,T$s,"random0",function(){return this._randoms0;}),T$u(0,T$s,"startSize",function(){return this._startSize;}),T$u(0,T$s,"startColor",function(){return this._startColor;}),T$u(0,T$s,"startRotation0",function(){return this._startRotation0;}),T$u(0,T$s,"startRotation1",function(){return this._startRotation1;}),T$u(0,T$s,"startLifeTime",function(){return this._startLifeTime;}),T$u(0,T$s,"time",function(){return this._time;}),T$u(0,T$s,"startSpeed",function(){return this._startSpeed;}),T$u(0,T$s,"simulationWorldPostion",function(){return this._simulationWorldPostion;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(152,[new T$vL(0,"vector4",17),new T$vL(16,"vector4",30),new T$vL(32,"vector4",32),new T$vL(48,"vector4",19),new T$vL(64,"vector3",20),new T$vL(76,"vector3",22),new T$vL(88,"single",31),new T$vL(92,"vector4",34),new T$vL(108,"vector4",35),new T$vL(124,"vector3",36),new T$vL(136,"vector4",37)]);}]);}(),function(){function T$L(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o,T$V,T$C,T$E,T$r){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=T$L,this._positionStartLifeTime=T$s,this._velocity=T$m,this._startColor=T$x,this._startSize=T$w,this._startRotation0=T$O,this._startRotation1=T$v,this._startRotation2=T$y,this._startLifeTime=T$F,this._time=T$o,this._startSpeed=T$V,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=T$r;}T$r(T$L,"laya.d3.graphics.VertexShurikenParticleMesh");var T$s=T$L.prototype;T$H.imps(T$s,{"laya.d3.graphics.IVertex":!0}),T$u(0,T$s,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate;}),T$u(0,T$s,"velocity",function(){return this._velocity;}),T$u(0,T$s,"position",function(){return this._positionStartLifeTime;}),T$u(0,T$s,"random0",function(){return this._randoms0;}),T$u(0,T$s,"startSize",function(){return this._startSize;}),T$u(0,T$s,"startColor",function(){return this._startColor;}),T$u(0,T$s,"startRotation0",function(){return this._startRotation0;}),T$u(0,T$s,"startRotation1",function(){return this._startRotation1;}),T$u(0,T$s,"random1",function(){return this._randoms1;}),T$u(0,T$s,"startRotation2",function(){return this._startRotation2;}),T$u(0,T$s,"startLifeTime",function(){return this._startLifeTime;}),T$u(0,T$s,"time",function(){return this._time;}),T$u(0,T$s,"startSpeed",function(){return this._startSpeed;}),T$u(0,T$s,"simulationWorldPostion",function(){return this._simulationWorldPostion;}),T$u(0,T$s,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$u(1,T$L,"vertexDeclaration",function(){return T$L._vertexDeclaration;}),T$C(T$L,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$OL(172,[new T$vL(0,"vector3",0),new T$vL(12,"vector4",1),new T$vL(28,"vector2",2),new T$vL(36,"vector4",30),new T$vL(52,"vector4",32),new T$vL(68,"vector4",19),new T$vL(84,"vector3",20),new T$vL(96,"vector3",22),new T$vL(108,"single",31),new T$vL(112,"vector4",34),new T$vL(128,"vector4",35),new T$vL(144,"vector3",36),new T$vL(156,"vector4",37)]);}]);}(),function(){function T$b(T$L,T$s,T$m,T$x,T$w,T$O){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=T$m,this._materials=T$x,this._subMeshes=T$w,this._materialMap=T$O,this._version=T$s,this._onLoaded(T$L);}T$r(T$b,"laya.d3.loaders.LoadModelV01");var T$L=T$b.prototype;return T$L._onLoaded=function(T$L){this._readData=T$L,this.READ_BLOCK();for(var T$s=0;T$s<this._BLOCK.count;T$s++){var T$m=this._readData.getUint16(),T$x=this._strings[T$m],T$w=this["READ_"+T$x];if(null==T$w)throw new Error("model file err,no this function:"+T$m+" "+T$x);if(!T$w.call(this))break;}return this._mesh;},T$L.onError=function(){},T$L._readString=function(){return this._strings[this._readData.getUint16()];},T$L.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0;},T$L.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0;},T$L.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var T$L=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var T$s=0;T$s<this._STRINGS.size;T$s++)this._strings[T$s]=this._readData.readUTFString();return this._readData.pos=T$L,!0;},T$L.READ_MATERIAL=function(){var T$L=this._readData.getUint16(),T$s=(this._readString(),this._readString());return this._materials[T$L]="null"!==T$s?T$D.getRes(this._materialMap[T$s]):new T$is(),!0;},T$L.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var T$L,T$s=this._readData.__getBuffer(),T$m=0,T$x=this._readData.getUint32(),T$w=this._readData.getUint32(),T$O=(new Float32Array(T$s.slice(T$x+this._DATA.offset,T$x+this._DATA.offset+T$w)),this._readData.getUint32()),T$v=this._readData.getUint32(),T$y=new Float32Array(T$s.slice(T$O+this._DATA.offset,T$O+this._DATA.offset+T$v));for(this.mesh._inverseBindPoses=[],T$m=0,T$L=T$y.length;T$m<T$L;T$m+=16){var T$F=new T$Ls(T$y[T$m+0],T$y[T$m+1],T$y[T$m+2],T$y[T$m+3],T$y[T$m+4],T$y[T$m+5],T$y[T$m+6],T$y[T$m+7],T$y[T$m+8],T$y[T$m+9],T$y[T$m+10],T$y[T$m+11],T$y[T$m+12],T$y[T$m+13],T$y[T$m+14],T$y[T$m+15]);this.mesh._inverseBindPoses.push(T$F);}break;default:throw new Error("LoadModel:unknown version.");}return!0;},T$L.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var T$L=this._readString();this._shaderAttributes=T$L.match(T$b._attrReg);var T$s=this._readData.getUint32(),T$m=this._readData.getUint32(),T$x=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),T$w=this._readData.getUint32(),T$O=this._readData.getUint32(),T$v=this._readData.getUint32(),T$y=this._readData.__getBuffer(),T$F=new T$os(this._mesh),T$o=this._getVertexDeclaration(),T$V=T$Zs.create(T$o,T$w/T$o.vertexStride,35044,!0),T$C=T$x+this._DATA.offset,T$E=T$y.slice(T$C,T$C+T$w);T$V.setData(new Float32Array(T$E));for(var T$r=(T$F._vertexBuffer=T$V).vertexDeclaration.getVertexElements(),T$u=0;T$u<T$r.length;T$u++)T$F._bufferUsage[T$r[T$u].elementUsage]=T$V;var T$T=T$ps.create("ushort",T$m/2,35044,!0),T$j=T$s+this._DATA.offset,T$D=T$y.slice(T$j,T$j+T$m);T$T.setData(new Uint16Array(T$D)),T$F._indexBuffer=T$T;var T$e=T$y.slice(T$O+this._DATA.offset,T$O+this._DATA.offset+T$v);return T$F._boneIndicesList[0]=new Uint8Array(T$e),this._subMeshes.push(T$F),!0;},T$L.READ_DATAAREA=function(){return!1;},T$L._getVertexDeclaration=function(){for(var T$L,T$s=!1,T$m=!1,T$x=!1,T$w=!1,T$O=!1,T$v=!1,T$y=!1,T$F=!1,T$o=!1,T$V=0;T$V<this._shaderAttributes.length;T$V+=8)switch(this._shaderAttributes[T$V]){case"POSITION":T$s=!0;break;case"NORMAL":T$m=!0;break;case"COLOR":T$x=!0;break;case"UV":T$w=!0;break;case"UV1":T$O=!0;break;case"BLENDWEIGHT":T$y=!0;break;case"BLENDINDICES":T$F=!0;break;case"TANGENT":T$v=!0;break;case"BINORMAL":T$o=!0;}return T$s&&T$m&&T$x&&T$w&&T$O&&T$y&&T$F&&T$v?T$L=T$bL.vertexDeclaration:T$s&&T$m&&T$x&&T$w&&T$O&&T$y&&T$F?T$L=T$DL.vertexDeclaration:T$s&&T$m&&T$w&&T$O&&T$y&&T$F&&T$v?T$L=T$RL.vertexDeclaration:T$s&&T$m&&T$w&&T$O&&T$y&&T$F?T$L=T$hL.vertexDeclaration:T$s&&T$m&&T$x&&T$w&&T$y&&T$F&&T$v?T$L=T$fL.vertexDeclaration:T$s&&T$m&&T$x&&T$w&&T$y&&T$F?T$L=T$YL.vertexDeclaration:T$s&&T$m&&T$v&&T$o&&T$w&&T$y&&T$F?T$L=T$nL.vertexDeclaration:T$s&&T$m&&T$w&&T$y&&T$F&&T$v?T$L=T$ZL.vertexDeclaration:T$s&&T$m&&T$w&&T$y&&T$F?T$L=T$$L.vertexDeclaration:T$s&&T$m&&T$x&&T$y&&T$F&&T$v?T$L=T$EL.vertexDeclaration:T$s&&T$m&&T$x&&T$y&&T$F?T$L=T$VL.vertexDeclaration:T$s&&T$m&&T$x&&T$w&&T$O&&T$v?T$L=T$HL.vertexDeclaration:T$s&&T$m&&T$x&&T$w&&T$O?T$L=T$jL.vertexDeclaration:T$s&&T$m&&T$w&&T$O&&T$v?T$L=T$gL.vertexDeclaration:T$s&&T$m&&T$w&&T$O?T$L=T$cL.vertexDeclaration:T$s&&T$m&&T$x&&T$w&&T$v?T$L=T$QL.vertexDeclaration:T$s&&T$m&&T$w&&T$v&&T$o?T$L=T$XL.vertexDeclaration:T$s&&T$m&&T$x&&T$w?T$L=T$TL.vertexDeclaration:T$s&&T$m&&T$w&&T$v?T$L=T$dL.vertexDeclaration:T$s&&T$m&&T$w?T$L=T$UL.vertexDeclaration:T$s&&T$m&&T$x&&T$v?T$L=T$uL.vertexDeclaration:T$s&&T$m&&T$x&&(T$L=T$oL.vertexDeclaration),T$L;},T$u(0,T$L,"mesh",function(){return this._mesh;}),T$b._attrReg=new RegExp("(\\w+)|([:,;])","g"),T$b;}()),T$qL=function(){function T$a(){}return T$r(T$a,"laya.d3.loaders.LoadModelV02"),T$a.parse=function(T$L,T$s,T$m,T$x,T$w,T$O){T$a._mesh=T$m,T$a._materials=T$x,T$a._subMeshes=T$w,T$a._materialMap=T$O,T$a._version=T$s,T$a._readData=T$L,T$a.READ_DATA(),T$a.READ_BLOCK(),T$a.READ_STRINGS();for(var T$v=0,T$y=T$a._BLOCK.count;T$v<T$y;T$v++){T$a._readData.pos=T$a._BLOCK.blockStarts[T$v];var T$F=T$a._readData.getUint16(),T$o=T$a._strings[T$F],T$V=T$a["READ_"+T$o];if(null==T$V)throw new Error("model file err,no this function:"+T$F+" "+T$o);T$V.call();}T$a._strings.length=0,T$a._readData=null,T$a._version=null,T$a._mesh=null,T$a._materials=null,T$a._subMeshes=null,T$a._materialMap=null;},T$a._readString=function(){return T$a._strings[T$a._readData.getUint16()];},T$a.READ_DATA=function(){T$a._DATA.offset=T$a._readData.getUint32(),T$a._DATA.size=T$a._readData.getUint32();},T$a.READ_BLOCK=function(){for(var T$L=T$a._BLOCK.count=T$a._readData.getUint16(),T$s=T$a._BLOCK.blockStarts=[],T$m=T$a._BLOCK.blockLengths=[],T$x=0;T$x<T$L;T$x++)T$s.push(T$a._readData.getUint32()),T$m.push(T$a._readData.getUint32());},T$a.READ_STRINGS=function(){var T$L=T$a._readData.getUint32(),T$s=T$a._readData.getUint16(),T$m=T$a._readData.pos;T$a._readData.pos=T$L+T$a._DATA.offset;for(var T$x=0;T$x<T$s;T$x++)T$a._strings[T$x]=T$a._readData.readUTFString();T$a._readData.pos=T$m;},T$a.READ_MATERIAL=function(){T$a._readString(),T$a._readString();var T$L=T$a._readString();return""!==T$L&&T$a._materials.push(T$D.getRes(T$a._materialMap[T$L])),!0;},T$a.READ_MESH=function(){T$a._readString();var T$L,T$s=T$a._readData.__getBuffer(),T$m=0,T$x=T$a._readData.getInt16(),T$w=T$a._DATA.offset;for(T$m=0;T$m<T$x;T$m++){var T$O=T$w+T$a._readData.getUint32(),T$v=T$a._readData.getUint32(),T$y=new Float32Array(T$s.slice(T$O,T$O+T$v)),T$F=T$a._readString().match(T$a._attrReg),T$o=T$a._getVertexDeclaration(T$F),T$V=T$Zs.create(T$o,4*T$y.length/T$o.vertexStride,35044,!0);T$V.setData(T$y),T$a._mesh._vertexBuffers.push(T$V);}var T$C=T$w+T$a._readData.getUint32(),T$E=T$a._readData.getUint32(),T$r=new Uint16Array(T$s.slice(T$C,T$C+T$E)),T$u=T$ps.create("ushort",T$E/2,35044,!0);T$u.setData(T$r),T$a._mesh._indexBuffer=T$u;var T$T=T$a._mesh._boneNames=[],T$j=T$a._readData.getUint16();for(T$T.length=T$j,T$m=0;T$m<T$j;T$m++)T$T[T$m]=T$a._strings[T$a._readData.getUint16()];var T$D=T$a._readData.getUint32(),T$e=T$a._readData.getUint32(),T$b=(new Float32Array(T$s.slice(T$w+T$D,T$w+T$D+T$e)),T$a._readData.getUint32()),T$S=T$a._readData.getUint32(),T$H=new Float32Array(T$s.slice(T$w+T$b,T$w+T$b+T$S));for(T$a._mesh._inverseBindPoses=[],T$m=0,T$L=T$H.length;T$m<T$L;T$m+=16){var T$Y=new T$Ls(T$H[T$m+0],T$H[T$m+1],T$H[T$m+2],T$H[T$m+3],T$H[T$m+4],T$H[T$m+5],T$H[T$m+6],T$H[T$m+7],T$H[T$m+8],T$H[T$m+9],T$H[T$m+10],T$H[T$m+11],T$H[T$m+12],T$H[T$m+13],T$H[T$m+14],T$H[T$m+15]);T$a._mesh._inverseBindPoses.push(T$Y);}return T$a._mesh._skinnedDatas=new Float32Array(16*T$H.length),!0;},T$a.READ_SUBMESH=function(){var T$L=T$a._readData.__getBuffer(),T$s=new T$os(T$a._mesh),T$m=T$a._readData.getInt16(),T$x=T$a._readData.getUint32(),T$w=T$a._readData.getUint32();T$s._vertexBuffer=T$a._mesh._vertexBuffers[T$m],T$s._vertexStart=T$x,T$s._vertexCount=T$w;var T$O=T$a._readData.getUint32(),T$v=T$a._readData.getUint32(),T$y=T$a._mesh._indexBuffer;T$s._indexBuffer=T$y,T$s._indexStart=T$O,T$s._indexCount=T$v,T$s._indices=new Uint16Array(T$y.getData().buffer,2*T$O,T$v);var T$F=T$a._DATA.offset,T$o=T$s._subIndexBufferStart,T$V=T$s._subIndexBufferCount,T$C=T$s._boneIndicesList,T$E=T$a._readData.getUint16();T$o.length=T$E,T$V.length=T$E,T$C.length=T$E;for(var T$r=0;T$r<T$E;T$r++){T$o[T$r]=T$a._readData.getUint32(),T$V[T$r]=T$a._readData.getUint32();var T$u=T$a._readData.getUint32(),T$T=T$a._readData.getUint32();T$s._boneIndicesList[T$r]=new Uint8Array(T$L.slice(T$F+T$u,T$F+T$u+T$T));}return T$a._subMeshes.push(T$s),!0;},T$a._getVertexDeclaration=function(T$L){for(var T$s,T$m=!1,T$x=!1,T$w=!1,T$O=!1,T$v=!1,T$y=!1,T$F=!1,T$o=!1,T$V=!1,T$C=0;T$C<T$L.length;T$C++)switch(T$L[T$C]){case"POSITION":T$m=!0;break;case"NORMAL":T$x=!0;break;case"COLOR":T$w=!0;break;case"UV":T$O=!0;break;case"UV1":T$v=!0;break;case"BLENDWEIGHT":T$F=!0;break;case"BLENDINDICES":T$o=!0;break;case"TANGENT":T$y=!0;break;case"BINORMAL":T$V=!0;}return T$m&&T$x&&T$w&&T$O&&T$v&&T$F&&T$o&&T$y?T$s=T$bL.vertexDeclaration:T$m&&T$x&&T$w&&T$O&&T$v&&T$F&&T$o?T$s=T$DL.vertexDeclaration:T$m&&T$x&&T$O&&T$v&&T$F&&T$o&&T$y?T$s=T$RL.vertexDeclaration:T$m&&T$x&&T$O&&T$v&&T$F&&T$o?T$s=T$hL.vertexDeclaration:T$m&&T$x&&T$w&&T$O&&T$F&&T$o&&T$y?T$s=T$fL.vertexDeclaration:T$m&&T$x&&T$w&&T$O&&T$F&&T$o?T$s=T$YL.vertexDeclaration:T$m&&T$x&&T$O&&T$F&&T$o&&T$y?T$s=T$ZL.vertexDeclaration:T$m&&T$x&&T$O&&T$F&&T$o?T$s=T$$L.vertexDeclaration:T$m&&T$x&&T$w&&T$F&&T$o&&T$y?T$s=T$EL.vertexDeclaration:T$m&&T$x&&T$w&&T$F&&T$o?T$s=T$VL.vertexDeclaration:T$m&&T$x&&T$w&&T$O&&T$v&&T$y?T$s=T$HL.vertexDeclaration:T$m&&T$x&&T$w&&T$O&&T$v?T$s=T$jL.vertexDeclaration:T$m&&T$x&&T$O&&T$v&&T$y?T$s=T$gL.vertexDeclaration:T$m&&T$x&&T$O&&T$v?T$s=T$cL.vertexDeclaration:T$m&&T$x&&T$w&&T$O&&T$y?T$s=T$QL.vertexDeclaration:T$m&&T$x&&T$O&&T$y&&T$V?T$s=T$XL.vertexDeclaration:T$m&&T$x&&T$w&&T$O?T$s=T$TL.vertexDeclaration:T$m&&T$x&&T$O&&T$y?T$s=T$dL.vertexDeclaration:T$m&&T$x&&T$O?T$s=T$UL.vertexDeclaration:T$m&&T$x&&T$w&&T$y?T$s=T$uL.vertexDeclaration:T$m&&T$x&&T$w&&(T$s=T$oL.vertexDeclaration),T$s;},T$a._attrReg=new RegExp("(\\w+)|([:,;])","g"),T$a._strings=[],T$a._readData=null,T$a._version=null,T$a._mesh=null,T$a._materials=null,T$a._subMeshes=null,T$a._materialMap=null,T$C(T$a,["_BLOCK",function(){return this._BLOCK={count:0};},"_DATA",function(){return this._DATA={offset:0,size:0};}]),T$a;}(),T$KL=function(){function T$Y(){}return T$r(T$Y,"laya.d3.loaders.LoadModelV03"),T$Y.parse=function(T$L,T$s,T$m,T$x,T$w){T$Y._mesh=T$m,T$Y._subMeshes=T$x,T$Y._materialMap=T$w,T$Y._version=T$s,T$Y._readData=T$L,T$Y.READ_DATA(),T$Y.READ_BLOCK(),T$Y.READ_STRINGS();for(var T$O=0,T$v=T$Y._BLOCK.count;T$O<T$v;T$O++){T$Y._readData.pos=T$Y._BLOCK.blockStarts[T$O];var T$y=T$Y._readData.getUint16(),T$F=T$Y._strings[T$y],T$o=T$Y["READ_"+T$F];if(null==T$o)throw new Error("model file err,no this function:"+T$y+" "+T$F);T$o.call();}T$Y._strings.length=0,T$Y._readData=null,T$Y._version=null,T$Y._mesh=null,T$Y._subMeshes=null,T$Y._materialMap=null;},T$Y._readString=function(){return T$Y._strings[T$Y._readData.getUint16()];},T$Y.READ_DATA=function(){T$Y._DATA.offset=T$Y._readData.getUint32(),T$Y._DATA.size=T$Y._readData.getUint32();},T$Y.READ_BLOCK=function(){for(var T$L=T$Y._BLOCK.count=T$Y._readData.getUint16(),T$s=T$Y._BLOCK.blockStarts=[],T$m=T$Y._BLOCK.blockLengths=[],T$x=0;T$x<T$L;T$x++)T$s.push(T$Y._readData.getUint32()),T$m.push(T$Y._readData.getUint32());},T$Y.READ_STRINGS=function(){var T$L=T$Y._readData.getUint32(),T$s=T$Y._readData.getUint16(),T$m=T$Y._readData.pos;T$Y._readData.pos=T$L+T$Y._DATA.offset;for(var T$x=0;T$x<T$s;T$x++)T$Y._strings[T$x]=T$Y._readData.readUTFString();T$Y._readData.pos=T$m;},T$Y.READ_MESH=function(){var T$L,T$s=T$Y._readString(),T$m=T$Y._readData.__getBuffer(),T$x=0,T$w=T$Y._readData.getInt16(),T$O=T$Y._DATA.offset;for(T$x=0;T$x<T$w;T$x++){var T$v,T$y=T$O+T$Y._readData.getUint32(),T$F=T$Y._readData.getUint32(),T$o=new Float32Array(T$m.slice(T$y,T$y+T$F)),T$V=T$Y._readString();switch(T$Y._version){case"LAYAMODEL:03":T$v=T$Y._vertexDeclarationMap_Discard[T$V];break;case"LAYAMODEL:0301":T$v=T$Y._vertexDeclarationMap[T$V];break;default:throw new Error("LoadModelV03: unknown version.");}if(!T$v)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+T$Y._version+"  bufferAttribute="+T$V+"  name="+T$s+"  url="+(T$Y._mesh?T$Y._mesh.url:"null"));var T$C=T$Zs.create(T$v,4*T$o.length/T$v.vertexStride,35044,!0,T$Y._mesh._url+"_"+T$x);T$C.setData(T$o),T$Y._mesh._vertexBuffers.push(T$C);}var T$E=T$O+T$Y._readData.getUint32(),T$r=T$Y._readData.getUint32(),T$u=new Uint16Array(T$m.slice(T$E,T$E+T$r)),T$T=T$ps.create("ushort",T$r/2,35044,!0,T$Y._mesh._url);T$T.setData(T$u),T$Y._mesh._indexBuffer=T$T;var T$j=T$Y._mesh._boneNames=[],T$D=T$Y._readData.getUint16();for(T$j.length=T$D,T$x=0;T$x<T$D;T$x++)T$j[T$x]=T$Y._strings[T$Y._readData.getUint16()];T$Y._readData.pos+=8;var T$e=T$Y._readData.getUint32(),T$b=T$Y._readData.getUint32(),T$S=new Float32Array(T$m.slice(T$O+T$e,T$O+T$e+T$b));for(T$Y._mesh._inverseBindPoses=[],T$x=0,T$L=T$S.length;T$x<T$L;T$x+=16){var T$H=new T$Ls(T$S[T$x+0],T$S[T$x+1],T$S[T$x+2],T$S[T$x+3],T$S[T$x+4],T$S[T$x+5],T$S[T$x+6],T$S[T$x+7],T$S[T$x+8],T$S[T$x+9],T$S[T$x+10],T$S[T$x+11],T$S[T$x+12],T$S[T$x+13],T$S[T$x+14],T$S[T$x+15]);T$Y._mesh._inverseBindPoses.push(T$H);}return T$Y._mesh._skinnedDatas=new Float32Array(16*T$S.length),!0;},T$Y.READ_SUBMESH=function(){var T$L=T$Y._readData.__getBuffer(),T$s=new T$os(T$Y._mesh),T$m=T$Y._readData.getInt16(),T$x=T$Y._readData.getUint32(),T$w=T$Y._readData.getUint32();T$s._vertexBuffer=T$Y._mesh._vertexBuffers[T$m],T$s._vertexStart=T$x,T$s._vertexCount=T$w;var T$O=T$Y._readData.getUint32(),T$v=T$Y._readData.getUint32(),T$y=T$Y._mesh._indexBuffer;T$s._indexBuffer=T$y,T$s._indexStart=T$O,T$s._indexCount=T$v,T$s._indices=new Uint16Array(T$y.getData().buffer,2*T$O,T$v);var T$F=T$Y._DATA.offset,T$o=T$s._subIndexBufferStart,T$V=T$s._subIndexBufferCount,T$C=T$s._boneIndicesList,T$E=T$Y._readData.getUint16();T$o.length=T$E,T$V.length=T$E,T$C.length=T$E;for(var T$r=0;T$r<T$E;T$r++){T$o[T$r]=T$Y._readData.getUint32(),T$V[T$r]=T$Y._readData.getUint32();var T$u=T$Y._readData.getUint32(),T$T=T$Y._readData.getUint32();T$C[T$r]=new Uint8Array(T$L.slice(T$F+T$u,T$F+T$u+T$T));}return T$Y._subMeshes.push(T$s),!0;},T$Y._strings=[],T$Y._readData=null,T$Y._version=null,T$Y._mesh=null,T$Y._subMeshes=null,T$Y._materialMap=null,T$C(T$Y,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":T$bL.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":T$DL.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":T$IL.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":T$RL.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":T$hL.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":T$fL.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":T$YL.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":T$ZL.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":T$$L.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":T$EL.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":T$VL.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":T$HL.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":T$jL.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":T$gL.vertexDeclaration,"POSITION,NORMAL,UV,UV1":T$cL.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":T$QL.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":T$XL.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":T$TL.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":T$dL.vertexDeclaration,"POSITION,NORMAL,UV":T$UL.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":T$uL.vertexDeclaration,"POSITION,NORMAL,COLOR":T$oL.vertexDeclaration,"POSITION,NORMAL,TANGENT":T$iL.vertexDeclaration,"POSITION,NORMAL":T$FL.vertexDeclaration,"POSITION,UV":T$JL.vertexDeclaration,POSITION:T$yL.vertexDeclaration};},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":T$eL.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":T$DL.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":T$IL.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":T$GL.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":T$hL.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":T$aL.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":T$YL.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":T$pL.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":T$$L.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":T$CL.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":T$VL.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":T$SL.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":T$jL.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":T$AL.vertexDeclaration,"POSITION,NORMAL,UV,UV1":T$cL.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":T$_L.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":T$XL.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":T$TL.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":T$WL.vertexDeclaration,"POSITION,NORMAL,UV":T$UL.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":T$rL.vertexDeclaration,"POSITION,NORMAL,COLOR":T$oL.vertexDeclaration,"POSITION,NORMAL,TANGENT":T$NL.vertexDeclaration,"POSITION,NORMAL":T$FL.vertexDeclaration,"POSITION,UV":T$JL.vertexDeclaration,POSITION:T$yL.vertexDeclaration};},"_BLOCK",function(){return this._BLOCK={count:0};},"_DATA",function(){return this._DATA={offset:0,size:0};}]),T$Y;}(),T$PL=function(){function T$y(){}return T$r(T$y,"laya.d3.loaders.MeshReader"),T$y.read=function(T$L,T$s,T$m,T$x,T$w){var T$O=new T$Y(T$L);T$O.pos=0;var T$v=T$O.readUTFString();switch(T$v){case"LAYAMODEL:01":case"LAYASKINANI:01":T$y._readVersion01(T$O,T$v,T$s,T$m,T$x,T$w);break;case"LAYAMODEL:02":T$qL.parse(T$O,T$v,T$s,T$m,T$x,T$w);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":T$KL.parse(T$O,T$v,T$s,T$x,T$w);break;default:throw new Error("MeshReader: unknown mesh version.");}T$s._setSubMeshes(T$x);},T$y._readVersion01=function(T$L,T$s,T$m,T$x,T$w,T$O){new T$lL(T$L,T$s,T$m,T$x,T$w,T$O);},T$y;}(),T$kL=function(){function T$L(T$L,T$s){this.min=null,this.max=null,this.min=T$L,this.max=T$s;}T$r(T$L,"laya.d3.math.BoundBox");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.core.IClone":!0}),T$s.getCorners=function(T$L){T$L.length=8;var T$s=this.min.elements,T$m=this.max.elements,T$x=T$s[0],T$w=T$s[1],T$O=T$s[2],T$v=T$m[0],T$y=T$m[1],T$F=T$m[2];T$L[0]=new T$vs(T$x,T$y,T$F),T$L[1]=new T$vs(T$v,T$y,T$F),T$L[2]=new T$vs(T$v,T$w,T$F),T$L[3]=new T$vs(T$x,T$w,T$F),T$L[4]=new T$vs(T$x,T$y,T$O),T$L[5]=new T$vs(T$v,T$y,T$O),T$L[6]=new T$vs(T$v,T$w,T$O),T$L[7]=new T$vs(T$x,T$w,T$O);},T$s.toDefault=function(){this.min.toDefault(),this.max.toDefault();},T$s.cloneTo=function(T$L){var T$s=T$L;this.min.cloneTo(T$s.min),this.max.cloneTo(T$s.max);},T$s.clone=function(){var T$L=new this.constructor(new T$vs(),new T$vs());return this.cloneTo(T$L),T$L;},T$L.createfromPoints=function(T$L,T$s){if(null==T$L)throw new Error("points");var T$m=T$s.min,T$x=T$s.max,T$w=T$m.elements;T$w[0]=Number.MAX_VALUE,T$w[1]=Number.MAX_VALUE,T$w[2]=Number.MAX_VALUE;var T$O=T$x.elements;T$O[0]=-Number.MAX_VALUE,T$O[1]=-Number.MAX_VALUE,T$O[2]=-Number.MAX_VALUE;for(var T$v=0,T$y=T$L.length;T$v<T$y;++T$v)T$vs.min(T$m,T$L[T$v],T$m),T$vs.max(T$x,T$L[T$v],T$x);},T$L.merge=function(T$L,T$s,T$m){T$vs.min(T$L.min,T$s.min,T$m.min),T$vs.max(T$L.max,T$s.max,T$m.max);},T$L;}(),T$BL=function(){function T$o(T$L){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=T$L,this._near=new T$ss(new T$vs()),this._far=new T$ss(new T$vs()),this._left=new T$ss(new T$vs()),this._right=new T$ss(new T$vs()),this._top=new T$ss(new T$vs()),this._bottom=new T$ss(new T$vs()),T$o._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom);}T$r(T$o,"laya.d3.math.BoundFrustum");var T$L=T$o.prototype;return T$L.equalsBoundFrustum=function(T$L){return this._matrix.equalsOtherMatrix(T$L.matrix);},T$L.equalsObj=function(T$L){if(T$L instanceof laya.d3.math.BoundFrustum){var T$s=T$L;return this.equalsBoundFrustum(T$s);}return!1;},T$L.getPlane=function(T$L){switch(T$L){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null;}},T$L.getCorners=function(T$L){T$o._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(T$L[0]),T$o._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(T$L[1]),T$o._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(T$L[2]),T$o._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(T$L[3]),T$o._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(T$L[4]),T$o._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(T$L[5]),T$o._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(T$L[6]),T$o._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(T$L[7]);},T$L.containsPoint=function(T$L){for(var T$s=T$ss.PlaneIntersectionType_Front,T$m=T$ss.PlaneIntersectionType_Front,T$x=0;T$x<6;T$x++){switch(T$x){case 0:T$m=Collision.intersectsPlaneAndPoint(this._near,T$L);break;case 1:T$m=Collision.intersectsPlaneAndPoint(this._far,T$L);break;case 2:T$m=Collision.intersectsPlaneAndPoint(this._left,T$L);break;case 3:T$m=Collision.intersectsPlaneAndPoint(this._right,T$L);break;case 4:T$m=Collision.intersectsPlaneAndPoint(this._top,T$L);break;case 5:T$m=Collision.intersectsPlaneAndPoint(this._bottom,T$L);}switch(T$m){case T$ss.PlaneIntersectionType_Back:return 0;case T$ss.PlaneIntersectionType_Intersecting:T$s=T$ss.PlaneIntersectionType_Intersecting;}}switch(T$s){case T$ss.PlaneIntersectionType_Intersecting:return 2;default:return 1;}},T$L.containsBoundBox=function(T$L){for(var T$s,T$m=T$o._tempV30,T$x=T$o._tempV31,T$w=1,T$O=0;T$O<6;T$O++){if(T$s=this.getPlane(T$O),this._getBoxToPlanePVertexNVertex(T$L,T$s.normal,T$m,T$x),Collision.intersectsPlaneAndPoint(T$s,T$m)===T$ss.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(T$s,T$x)===T$ss.PlaneIntersectionType_Back&&(T$w=2);}return T$w;},T$L.containsBoundSphere=function(T$L){for(var T$s=T$ss.PlaneIntersectionType_Front,T$m=T$ss.PlaneIntersectionType_Front,T$x=0;T$x<6;T$x++){switch(T$x){case 0:T$m=Collision.intersectsPlaneAndSphere(this._near,T$L);break;case 1:T$m=Collision.intersectsPlaneAndSphere(this._far,T$L);break;case 2:T$m=Collision.intersectsPlaneAndSphere(this._left,T$L);break;case 3:T$m=Collision.intersectsPlaneAndSphere(this._right,T$L);break;case 4:T$m=Collision.intersectsPlaneAndSphere(this._top,T$L);break;case 5:T$m=Collision.intersectsPlaneAndSphere(this._bottom,T$L);}switch(T$m){case T$ss.PlaneIntersectionType_Back:return 0;case T$ss.PlaneIntersectionType_Intersecting:T$s=T$ss.PlaneIntersectionType_Intersecting;}}switch(T$s){case T$ss.PlaneIntersectionType_Intersecting:return 2;default:return 1;}},T$L._getBoxToPlanePVertexNVertex=function(T$L,T$s,T$m,T$x){var T$w=T$L.min,T$O=T$w.elements,T$v=T$L.max,T$y=T$v.elements,T$F=T$s.elements,T$o=T$F[0],T$V=T$F[1],T$C=T$F[2];T$w.cloneTo(T$m);var T$E=T$m.elements;0<=T$o&&(T$E[0]=T$y[0]),0<=T$V&&(T$E[1]=T$y[1]),0<=T$C&&(T$E[2]=T$y[2]),T$v.cloneTo(T$x);var T$r=T$x.elements;0<=T$o&&(T$r[0]=T$O[0]),0<=T$V&&(T$r[1]=T$O[1]),0<=T$C&&(T$r[2]=T$O[2]);},T$u(0,T$L,"top",function(){return this._top;}),T$u(0,T$L,"matrix",function(){return this._matrix;},function(T$L){this._matrix=T$L,T$o._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom);}),T$u(0,T$L,"near",function(){return this._near;}),T$u(0,T$L,"far",function(){return this._far;}),T$u(0,T$L,"left",function(){return this._left;}),T$u(0,T$L,"right",function(){return this._right;}),T$u(0,T$L,"bottom",function(){return this._bottom;}),T$o._getPlanesFromMatrix=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){var T$y=T$L.elements,T$F=T$y[0],T$o=T$y[1],T$V=T$y[2],T$C=T$y[3],T$E=T$y[4],T$r=T$y[5],T$u=T$y[6],T$T=T$y[7],T$j=T$y[8],T$D=T$y[9],T$e=T$y[10],T$b=T$y[11],T$S=T$y[12],T$H=T$y[13],T$Y=T$y[14],T$a=T$y[15],T$f=T$s.normal.elements;T$f[0]=T$C+T$V,T$f[1]=T$T+T$u,T$f[2]=T$b+T$e,T$s.distance=T$a+T$Y,T$s.normalize();var T$_=T$m.normal.elements;T$_[0]=T$C-T$V,T$_[1]=T$T-T$u,T$_[2]=T$b-T$e,T$m.distance=T$a-T$Y,T$m.normalize();var T$Q=T$x.normal.elements;T$Q[0]=T$C+T$F,T$Q[1]=T$T+T$E,T$Q[2]=T$b+T$j,T$x.distance=T$a+T$S,T$x.normalize();var T$N=T$w.normal.elements;T$N[0]=T$C-T$F,T$N[1]=T$T-T$E,T$N[2]=T$b-T$j,T$w.distance=T$a-T$S,T$w.normalize();var T$i=T$O.normal.elements;T$i[0]=T$C-T$o,T$i[1]=T$T-T$r,T$i[2]=T$b-T$D,T$O.distance=T$a-T$H,T$O.normalize();var T$U=T$v.normal.elements;T$U[0]=T$C+T$o,T$U[1]=T$T+T$r,T$U[2]=T$b+T$D,T$v.distance=T$a+T$H,T$v.normalize();},T$o._get3PlaneInterPoint=function(T$L,T$s,T$m){var T$x=T$L.normal,T$w=T$s.normal,T$O=T$m.normal;T$vs.cross(T$w,T$O,T$o._tempV30),T$vs.cross(T$O,T$x,T$o._tempV31),T$vs.cross(T$x,T$w,T$o._tempV32);var T$v=T$vs.dot(T$x,T$o._tempV30),T$y=T$vs.dot(T$w,T$o._tempV31),T$F=T$vs.dot(T$O,T$o._tempV32);return T$vs.scale(T$o._tempV30,-T$L.distance/T$v,T$o._tempV33),T$vs.scale(T$o._tempV31,-T$s.distance/T$y,T$o._tempV34),T$vs.scale(T$o._tempV32,-T$m.distance/T$F,T$o._tempV35),T$vs.add(T$o._tempV33,T$o._tempV34,T$o._tempV36),T$vs.add(T$o._tempV35,T$o._tempV36,T$o._tempV37),T$o._tempV37;},T$C(T$o,["_tempV30",function(){return this._tempV30=new T$vs();},"_tempV31",function(){return this._tempV31=new T$vs();},"_tempV32",function(){return this._tempV32=new T$vs();},"_tempV33",function(){return this._tempV33=new T$vs();},"_tempV34",function(){return this._tempV34=new T$vs();},"_tempV35",function(){return this._tempV35=new T$vs();},"_tempV36",function(){return this._tempV36=new T$vs();},"_tempV37",function(){return this._tempV37=new T$vs();}]),T$o;}(),T$ML=function(){function T$V(T$L,T$s){this.center=null,this.radius=NaN,this.center=T$L,this.radius=T$s;}T$r(T$V,"laya.d3.math.BoundSphere");var T$L=T$V.prototype;return T$H.imps(T$L,{"laya.d3.core.IClone":!0}),T$L.toDefault=function(){this.center.toDefault(),this.radius=0;},T$L.intersectsRayDistance=function(T$L){return Collision.intersectsRayAndSphereRD(T$L,this);},T$L.intersectsRayPoint=function(T$L,T$s){return Collision.intersectsRayAndSphereRP(T$L,this,T$s);},T$L.cloneTo=function(T$L){var T$s=T$L;this.center.cloneTo(T$s.center),T$s.radius=this.radius;},T$L.clone=function(){var T$L=new this.constructor(new T$vs(),new T$vs());return this.cloneTo(T$L),T$L;},T$V.createFromSubPoints=function(T$L,T$s,T$m,T$x){if(null==T$L)throw new Error("points");if(T$s<0||T$s>=T$L.length)throw new Error("start"+T$s+"Must be in the range [0, "+(T$L.length-1)+"]");if(T$m<0||T$s+T$m>T$L.length)throw new Error("count"+T$m+"Must be in the range <= "+T$L.length+"}");var T$w=T$s+T$m,T$O=T$V._tempVector3;T$O.elements[0]=0,T$O.elements[1]=0,T$O.elements[2]=0;for(var T$v=T$s;T$v<T$w;++T$v)T$vs.add(T$L[T$v],T$O,T$O);var T$y=T$x.center;T$vs.scale(T$O,1/T$m,T$y);var T$F=0;for(T$v=T$s;T$v<T$w;++T$v){var T$o=T$vs.distanceSquared(T$y,T$L[T$v]);T$F<T$o&&(T$F=T$o);}T$x.radius=Math.sqrt(T$F);},T$V.createfromPoints=function(T$L,T$s){if(null==T$L)throw new Error("points");T$V.createFromSubPoints(T$L,0,T$L.length,T$s);},T$C(T$V,["_tempVector3",function(){return this._tempVector3=new T$vs();}]),T$V;}(),T$zL=(function(){function T$L(){}T$r(T$L,"laya.d3.math.ContainmentType"),T$L.Disjoint=0,T$L.Contains=1,T$L.Intersects=2;}(),function(){function T$m(){}return T$r(T$m,"laya.d3.math.MathUtils3D"),T$m.isZero=function(T$L){return Math.abs(T$L)<T$m.zeroTolerance;},T$m.nearEqual=function(T$L,T$s){return!!T$m.isZero(T$L-T$s);},T$m.fastInvSqrt=function(T$L){return T$m.isZero(T$L)?T$L:1/Math.sqrt(T$L);},T$C(T$m,["zeroTolerance",function(){return this.zeroTolerance=1e-6;},"MaxValue",function(){return this.MaxValue=340282347e30;},"MinValue",function(){return this.MinValue=-340282347e30;}]),T$m;}()),T$tL=function(){function T$F(){var T$L=this.elements=new Float32Array(9);T$L[0]=1,T$L[1]=0,T$L[2]=0,T$L[3]=0,T$L[4]=1,T$L[5]=0,T$L[6]=0,T$L[7]=0,T$L[8]=1;}T$r(T$F,"laya.d3.math.Matrix3x3");var T$L=T$F.prototype;return T$H.imps(T$L,{"laya.d3.core.IClone":!0}),T$L.determinant=function(){var T$L=this.elements,T$s=T$L[0],T$m=T$L[1],T$x=T$L[2],T$w=T$L[3],T$O=T$L[4],T$v=T$L[5],T$y=T$L[6],T$F=T$L[7],T$o=T$L[8];return T$s*(T$o*T$O-T$v*T$F)+T$m*(-T$o*T$w+T$v*T$y)+T$x*(T$F*T$w-T$O*T$y);},T$L.translate=function(T$L,T$s){var T$m=T$s.elements,T$x=this.elements,T$w=T$L.elements,T$O=T$x[0],T$v=T$x[1],T$y=T$x[2],T$F=T$x[3],T$o=T$x[4],T$V=T$x[5],T$C=T$x[6],T$E=T$x[7],T$r=T$x[8],T$u=T$w[0],T$T=T$w[1];T$m[0]=T$O,T$m[1]=T$v,T$m[2]=T$y,T$m[3]=T$F,T$m[4]=T$o,T$m[5]=T$V,T$m[6]=T$u*T$O+T$T*T$F+T$C,T$m[7]=T$u*T$v+T$T*T$o+T$E,T$m[8]=T$u*T$y+T$T*T$V+T$r;},T$L.rotate=function(T$L,T$s){var T$m=T$s.elements,T$x=this.elements,T$w=T$x[0],T$O=T$x[1],T$v=T$x[2],T$y=T$x[3],T$F=T$x[4],T$o=T$x[5],T$V=T$x[6],T$C=T$x[7],T$E=T$x[8],T$r=Math.sin(T$L),T$u=Math.cos(T$L);T$m[0]=T$u*T$w+T$r*T$y,T$m[1]=T$u*T$O+T$r*T$F,T$m[2]=T$u*T$v+T$r*T$o,T$m[3]=T$u*T$y-T$r*T$w,T$m[4]=T$u*T$F-T$r*T$O,T$m[5]=T$u*T$o-T$r*T$v,T$m[6]=T$V,T$m[7]=T$C,T$m[8]=T$E;},T$L.scale=function(T$L,T$s){var T$m=T$s.elements,T$x=this.elements,T$w=T$L.elements,T$O=T$w[0],T$v=T$w[1];T$m[0]=T$O*T$x[0],T$m[1]=T$O*T$x[1],T$m[2]=T$O*T$x[2],T$m[3]=T$v*T$x[3],T$m[4]=T$v*T$x[4],T$m[5]=T$v*T$x[5],T$m[6]=T$x[6],T$m[7]=T$x[7],T$m[8]=T$x[8];},T$L.invert=function(T$L){var T$s=T$L.elements,T$m=this.elements,T$x=T$m[0],T$w=T$m[1],T$O=T$m[2],T$v=T$m[3],T$y=T$m[4],T$F=T$m[5],T$o=T$m[6],T$V=T$m[7],T$C=T$m[8],T$E=T$C*T$y-T$F*T$V,T$r=-T$C*T$v+T$F*T$o,T$u=T$V*T$v-T$y*T$o,T$T=T$x*T$E+T$w*T$r+T$O*T$u;T$T||(T$L=null),T$T=1/T$T,T$s[0]=T$E*T$T,T$s[1]=(-T$C*T$w+T$O*T$V)*T$T,T$s[2]=(T$F*T$w-T$O*T$y)*T$T,T$s[3]=T$r*T$T,T$s[4]=(T$C*T$x-T$O*T$o)*T$T,T$s[5]=(-T$F*T$x+T$O*T$v)*T$T,T$s[6]=T$u*T$T,T$s[7]=(-T$V*T$x+T$w*T$o)*T$T,T$s[8]=(T$y*T$x-T$w*T$v)*T$T;},T$L.transpose=function(T$L){var T$s=T$L.elements,T$m=this.elements;if(T$L===this){var T$x=T$m[1],T$w=T$m[2],T$O=T$m[5];T$s[1]=T$m[3],T$s[2]=T$m[6],T$s[3]=T$x,T$s[5]=T$m[7],T$s[6]=T$w,T$s[7]=T$O;}else T$s[0]=T$m[0],T$s[1]=T$m[3],T$s[2]=T$m[6],T$s[3]=T$m[1],T$s[4]=T$m[4],T$s[5]=T$m[7],T$s[6]=T$m[2],T$s[7]=T$m[5],T$s[8]=T$m[8];},T$L.identity=function(){var T$L=this.elements;T$L[0]=1,T$L[1]=0,T$L[2]=0,T$L[3]=0,T$L[4]=1,T$L[5]=0,T$L[6]=0,T$L[7]=0,T$L[8]=1;},T$L.cloneTo=function(T$L){var T$s,T$m,T$x;if((T$m=this.elements)!==(T$x=T$L.elements))for(T$s=0;T$s<9;++T$s)T$x[T$s]=T$m[T$s];},T$L.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$F.createFromTranslation=function(T$L,T$s){T$s.elements;var T$m=T$L.elements;T$s[0]=1,T$s[1]=0,T$s[2]=0,T$s[3]=0,T$s[4]=1,T$s[5]=0,T$s[6]=T$m[0],T$s[7]=T$m[1],T$s[8]=1;},T$F.createFromRotation=function(T$L,T$s){var T$m=T$s.elements,T$x=Math.sin(T$L),T$w=Math.cos(T$L);T$m[0]=T$w,T$m[1]=T$x,T$m[2]=0,T$m[3]=-T$x,T$m[4]=T$w,T$m[5]=0,T$m[6]=0,T$m[7]=0,T$m[8]=1;},T$F.createFromScaling=function(T$L,T$s){var T$m=T$s.elements,T$x=T$L.elements;T$m[0]=T$x[0],T$m[1]=0,T$m[2]=0,T$m[3]=0,T$m[4]=T$x[1],T$m[5]=0,T$m[6]=0,T$m[7]=0,T$m[8]=1;},T$F.createFromMatrix4x4=function(T$L,T$s){T$s[0]=T$L[0],T$s[1]=T$L[1],T$s[2]=T$L[2],T$s[3]=T$L[4],T$s[4]=T$L[5],T$s[5]=T$L[6],T$s[6]=T$L[8],T$s[7]=T$L[9],T$s[8]=T$L[10];},T$F.multiply=function(T$L,T$s,T$m){var T$x=T$m.elements,T$w=T$L.elements,T$O=T$s.elements,T$v=T$w[0],T$y=T$w[1],T$F=T$w[2],T$o=T$w[3],T$V=T$w[4],T$C=T$w[5],T$E=T$w[6],T$r=T$w[7],T$u=T$w[8],T$T=T$O[0],T$j=T$O[1],T$D=T$O[2],T$e=T$O[3],T$b=T$O[4],T$S=T$O[5],T$H=T$O[6],T$Y=T$O[7],T$a=T$O[8];T$x[0]=T$T*T$v+T$j*T$o+T$D*T$E,T$x[1]=T$T*T$y+T$j*T$V+T$D*T$r,T$x[2]=T$T*T$F+T$j*T$C+T$D*T$u,T$x[3]=T$e*T$v+T$b*T$o+T$S*T$E,T$x[4]=T$e*T$y+T$b*T$V+T$S*T$r,T$x[5]=T$e*T$F+T$b*T$C+T$S*T$u,T$x[6]=T$H*T$v+T$Y*T$o+T$a*T$E,T$x[7]=T$H*T$y+T$Y*T$V+T$a*T$r,T$x[8]=T$H*T$F+T$Y*T$C+T$a*T$u;},T$F.lookAt=function(T$L,T$s,T$m,T$x){T$vs.subtract(T$L,T$s,T$F._tempV30),T$vs.normalize(T$F._tempV30,T$F._tempV30),T$vs.cross(T$m,T$F._tempV30,T$F._tempV31),T$vs.normalize(T$F._tempV31,T$F._tempV31),T$vs.cross(T$F._tempV30,T$F._tempV31,T$F._tempV32);var T$w=T$F._tempV30.elements,T$O=T$F._tempV31.elements,T$v=T$F._tempV32.elements,T$y=T$x.elements;T$y[0]=T$O[0],T$y[3]=T$O[1],T$y[6]=T$O[2],T$y[1]=T$v[0],T$y[4]=T$v[1],T$y[7]=T$v[2],T$y[2]=T$w[0],T$y[5]=T$w[1],T$y[8]=T$w[2];},T$F.DEFAULT=new T$F(),T$C(T$F,["_tempV30",function(){return this._tempV30=new T$vs();},"_tempV31",function(){return this._tempV31=new T$vs();},"_tempV32",function(){return this._tempV32=new T$vs();}]),T$F;}(),T$Ls=function(){function T$_(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o,T$V,T$C,T$E,T$r,T$u,T$T){void 0===T$L&&(T$L=1),void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0),void 0===T$x&&(T$x=0),void 0===T$w&&(T$w=0),void 0===T$O&&(T$O=1),void 0===T$v&&(T$v=0),void 0===T$y&&(T$y=0),void 0===T$F&&(T$F=0),void 0===T$o&&(T$o=0),void 0===T$V&&(T$V=1),void 0===T$C&&(T$C=0),void 0===T$E&&(T$E=0),void 0===T$r&&(T$r=0),void 0===T$u&&(T$u=0),void 0===T$T&&(T$T=1);var T$j=this.elements=new Float32Array(16);T$j[0]=T$L,T$j[1]=T$s,T$j[2]=T$m,T$j[3]=T$x,T$j[4]=T$w,T$j[5]=T$O,T$j[6]=T$v,T$j[7]=T$y,T$j[8]=T$F,T$j[9]=T$o,T$j[10]=T$V,T$j[11]=T$C,T$j[12]=T$E,T$j[13]=T$r,T$j[14]=T$u,T$j[15]=T$T;}T$r(T$_,"laya.d3.math.Matrix4x4");var T$L=T$_.prototype;return T$H.imps(T$L,{"laya.d3.core.IClone":!0}),T$L.getElementByRowColumn=function(T$L,T$s){if(T$L<0||3<T$L)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(T$s<0||3<T$s)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*T$L+T$s];},T$L.setElementByRowColumn=function(T$L,T$s,T$m){if(T$L<0||3<T$L)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(T$s<0||3<T$s)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*T$L+T$s]=T$m;},T$L.equalsOtherMatrix=function(T$L){var T$s=this.elements,T$m=T$L.elements;return T$zL.nearEqual(T$s[0],T$m[0])&&T$zL.nearEqual(T$s[1],T$m[1])&&T$zL.nearEqual(T$s[2],T$m[2])&&T$zL.nearEqual(T$s[3],T$m[3])&&T$zL.nearEqual(T$s[4],T$m[4])&&T$zL.nearEqual(T$s[5],T$m[5])&&T$zL.nearEqual(T$s[6],T$m[6])&&T$zL.nearEqual(T$s[7],T$m[7])&&T$zL.nearEqual(T$s[8],T$m[8])&&T$zL.nearEqual(T$s[9],T$m[9])&&T$zL.nearEqual(T$s[10],T$m[10])&&T$zL.nearEqual(T$s[11],T$m[11])&&T$zL.nearEqual(T$s[12],T$m[12])&&T$zL.nearEqual(T$s[13],T$m[13])&&T$zL.nearEqual(T$s[14],T$m[14])&&T$zL.nearEqual(T$s[15],T$m[15]);},T$L.decomposeTransRotScale=function(T$L,T$s,T$m){var T$x=T$_._tempMatrix4x4;return this.decomposeTransRotMatScale(T$L,T$x,T$m)?(T$ms.createFromMatrix4x4(T$x,T$s),!0):(T$s.identity(),!1);},T$L.decomposeTransRotMatScale=function(T$L,T$s,T$m){var T$x=this.elements,T$w=T$L.elements,T$O=T$s.elements,T$v=T$m.elements;T$w[0]=T$x[12],T$w[1]=T$x[13],T$w[2]=T$x[14];var T$y=T$x[0],T$F=T$x[1],T$o=T$x[2],T$V=T$x[4],T$C=T$x[5],T$E=T$x[6],T$r=T$x[8],T$u=T$x[9],T$T=T$x[10],T$j=T$v[0]=Math.sqrt(T$y*T$y+T$F*T$F+T$o*T$o),T$D=T$v[1]=Math.sqrt(T$V*T$V+T$C*T$C+T$E*T$E),T$e=T$v[2]=Math.sqrt(T$r*T$r+T$u*T$u+T$T*T$T);if(T$zL.isZero(T$j)||T$zL.isZero(T$D)||T$zL.isZero(T$e))return T$O[1]=T$O[2]=T$O[3]=T$O[4]=T$O[6]=T$O[7]=T$O[8]=T$O[9]=T$O[11]=T$O[12]=T$O[13]=T$O[14]=0,T$O[0]=T$O[5]=T$O[10]=T$O[15]=1,!1;var T$b=T$_._tempVector0,T$S=T$b.elements;T$S[0]=T$r/T$e,T$S[1]=T$u/T$e,T$S[2]=T$T/T$e;var T$H=T$_._tempVector1,T$Y=T$H.elements;T$Y[0]=T$y/T$j,T$Y[1]=T$F/T$j,T$Y[2]=T$o/T$j;var T$a=T$_._tempVector2;T$vs.cross(T$b,T$H,T$a);var T$f=T$_._tempVector1;return T$vs.cross(T$a,T$b,T$f),T$O[3]=T$O[7]=T$O[11]=T$O[12]=T$O[13]=T$O[14]=0,T$O[15]=1,T$O[0]=T$f.x,T$O[1]=T$f.y,T$O[2]=T$f.z,T$O[4]=T$a.x,T$O[5]=T$a.y,T$O[6]=T$a.z,T$O[8]=T$b.x,T$O[9]=T$b.y,T$O[10]=T$b.z,T$O[0]*T$y+T$O[1]*T$F+T$O[2]*T$o<0&&(T$v[0]=-T$j),T$O[4]*T$V+T$O[5]*T$C+T$O[6]*T$E<0&&(T$v[1]=-T$D),T$O[8]*T$r+T$O[9]*T$u+T$O[10]*T$T<0&&(T$v[2]=-T$e),!0;},T$L.decomposeYawPitchRoll=function(T$L){var T$s=T$L.elements,T$m=Math.asin(-this.elements[9]);T$s[1]=T$m,Math.cos(T$m)>T$zL.zeroTolerance?(T$s[2]=Math.atan2(this.elements[1],this.elements[5]),T$s[0]=Math.atan2(this.elements[8],this.elements[10])):(T$s[2]=Math.atan2(-this.elements[4],this.elements[0]),T$s[0]=0);},T$L.normalize=function(){var T$L=this.elements,T$s=T$L[0],T$m=T$L[1],T$x=T$L[2],T$w=Math.sqrt(T$s*T$s+T$m*T$m+T$x*T$x);if(!T$w)return T$L[0]=0,T$L[1]=0,void(T$L[2]=0);1!=T$w&&(T$w=1/T$w,T$L[0]=T$s*T$w,T$L[1]=T$m*T$w,T$L[2]=T$x*T$w);},T$L.transpose=function(){var T$L,T$s;return T$s=(T$L=this.elements)[1],T$L[1]=T$L[4],T$L[4]=T$s,T$s=T$L[2],T$L[2]=T$L[8],T$L[8]=T$s,T$s=T$L[3],T$L[3]=T$L[12],T$L[12]=T$s,T$s=T$L[6],T$L[6]=T$L[9],T$L[9]=T$s,T$s=T$L[7],T$L[7]=T$L[13],T$L[13]=T$s,T$s=T$L[11],T$L[11]=T$L[14],T$L[14]=T$s,this;},T$L.invert=function(T$L){var T$s=this.elements,T$m=T$L.elements,T$x=T$s[0],T$w=T$s[1],T$O=T$s[2],T$v=T$s[3],T$y=T$s[4],T$F=T$s[5],T$o=T$s[6],T$V=T$s[7],T$C=T$s[8],T$E=T$s[9],T$r=T$s[10],T$u=T$s[11],T$T=T$s[12],T$j=T$s[13],T$D=T$s[14],T$e=T$s[15],T$b=T$x*T$F-T$w*T$y,T$S=T$x*T$o-T$O*T$y,T$H=T$x*T$V-T$v*T$y,T$Y=T$w*T$o-T$O*T$F,T$a=T$w*T$V-T$v*T$F,T$f=T$O*T$V-T$v*T$o,T$_=T$C*T$j-T$E*T$T,T$Q=T$C*T$D-T$r*T$T,T$N=T$C*T$e-T$u*T$T,T$i=T$E*T$D-T$r*T$j,T$U=T$E*T$e-T$u*T$j,T$c=T$r*T$e-T$u*T$D,T$h=T$b*T$c-T$S*T$U+T$H*T$i+T$Y*T$N-T$a*T$Q+T$f*T$_;0!==Math.abs(T$h)&&(T$h=1/T$h,T$m[0]=(T$F*T$c-T$o*T$U+T$V*T$i)*T$h,T$m[1]=(T$O*T$U-T$w*T$c-T$v*T$i)*T$h,T$m[2]=(T$j*T$f-T$D*T$a+T$e*T$Y)*T$h,T$m[3]=(T$r*T$a-T$E*T$f-T$u*T$Y)*T$h,T$m[4]=(T$o*T$N-T$y*T$c-T$V*T$Q)*T$h,T$m[5]=(T$x*T$c-T$O*T$N+T$v*T$Q)*T$h,T$m[6]=(T$D*T$H-T$T*T$f-T$e*T$S)*T$h,T$m[7]=(T$C*T$f-T$r*T$H+T$u*T$S)*T$h,T$m[8]=(T$y*T$U-T$F*T$N+T$V*T$_)*T$h,T$m[9]=(T$w*T$N-T$x*T$U-T$v*T$_)*T$h,T$m[10]=(T$T*T$a-T$j*T$H+T$e*T$b)*T$h,T$m[11]=(T$E*T$H-T$C*T$a-T$u*T$b)*T$h,T$m[12]=(T$F*T$Q-T$y*T$i-T$o*T$_)*T$h,T$m[13]=(T$x*T$i-T$w*T$Q+T$O*T$_)*T$h,T$m[14]=(T$j*T$S-T$T*T$Y-T$D*T$b)*T$h,T$m[15]=(T$C*T$Y-T$E*T$S+T$r*T$b)*T$h);},T$L.identity=function(){var T$L=this.elements;T$L[1]=T$L[2]=T$L[3]=T$L[4]=T$L[6]=T$L[7]=T$L[8]=T$L[9]=T$L[11]=T$L[12]=T$L[13]=T$L[14]=0,T$L[0]=T$L[5]=T$L[10]=T$L[15]=1;},T$L.cloneTo=function(T$L){var T$s,T$m,T$x;if((T$m=this.elements)!==(T$x=T$L.elements))for(T$s=0;T$s<16;++T$s)T$x[T$s]=T$m[T$s];},T$L.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$L.getTranslationVector=function(T$L){var T$s=this.elements,T$m=T$L.elements;T$m[0]=T$s[12],T$m[1]=T$s[13],T$m[2]=T$s[14];},T$L.setTranslationVector=function(T$L){var T$s=this.elements,T$m=T$L.elements;T$s[12]=T$m[0],T$s[13]=T$m[1],T$s[14]=T$m[2];},T$L.getForward=function(T$L){var T$s=this.elements,T$m=T$L.elements;T$m[0]=-T$s[8],T$m[1]=-T$s[9],T$m[2]=-T$s[10];},T$L.setForward=function(T$L){var T$s=this.elements,T$m=T$L.elements;T$s[8]=-T$m[0],T$s[9]=-T$m[1],T$s[10]=-T$m[2];},T$_.createRotationX=function(T$L,T$s){var T$m=T$s.elements,T$x=Math.sin(T$L),T$w=Math.cos(T$L);T$m[1]=T$m[2]=T$m[3]=T$m[4]=T$m[7]=T$m[8]=T$m[11]=T$m[12]=T$m[13]=T$m[14]=0,T$m[0]=T$m[15]=1,T$m[5]=T$m[10]=T$w,T$m[6]=T$x,T$m[9]=-T$x;},T$_.createRotationY=function(T$L,T$s){var T$m=T$s.elements,T$x=Math.sin(T$L),T$w=Math.cos(T$L);T$m[1]=T$m[3]=T$m[4]=T$m[6]=T$m[7]=T$m[9]=T$m[11]=T$m[12]=T$m[13]=T$m[14]=0,T$m[5]=T$m[15]=1,T$m[0]=T$m[10]=T$w,T$m[2]=-T$x,T$m[8]=T$x;},T$_.createRotationZ=function(T$L,T$s){var T$m=T$s.elements,T$x=Math.sin(T$L),T$w=Math.cos(T$L);T$m[2]=T$m[3]=T$m[6]=T$m[7]=T$m[8]=T$m[9]=T$m[11]=T$m[12]=T$m[13]=T$m[14]=0,T$m[10]=T$m[15]=1,T$m[0]=T$m[5]=T$w,T$m[1]=T$x,T$m[4]=-T$x;},T$_.createRotationYawPitchRoll=function(T$L,T$s,T$m,T$x){T$ms.createFromYawPitchRoll(T$L,T$s,T$m,T$_._tempQuaternion),T$_.createRotationQuaternion(T$_._tempQuaternion,T$x);},T$_.createRotationAxis=function(T$L,T$s,T$m){var T$x=T$L.elements,T$w=T$x[0],T$O=T$x[1],T$v=T$x[2],T$y=Math.cos(T$s),T$F=Math.sin(T$s),T$o=T$w*T$w,T$V=T$O*T$O,T$C=T$v*T$v,T$E=T$w*T$O,T$r=T$w*T$v,T$u=T$O*T$v,T$T=T$m.elements;T$T[3]=T$T[7]=T$T[11]=T$T[12]=T$T[13]=T$T[14]=0,T$T[15]=1,T$T[0]=T$o+T$y*(1-T$o),T$T[1]=T$E-T$y*T$E+T$F*T$v,T$T[2]=T$r-T$y*T$r-T$F*T$O,T$T[4]=T$E-T$y*T$E-T$F*T$v,T$T[5]=T$V+T$y*(1-T$V),T$T[6]=T$u-T$y*T$u+T$F*T$w,T$T[8]=T$r-T$y*T$r+T$F*T$O,T$T[9]=T$u-T$y*T$u-T$F*T$w,T$T[10]=T$C+T$y*(1-T$C);},T$_.createRotationQuaternion=function(T$L,T$s){var T$m=T$L.elements,T$x=T$s.elements,T$w=T$m[0],T$O=T$m[1],T$v=T$m[2],T$y=T$m[3],T$F=T$w*T$w,T$o=T$O*T$O,T$V=T$v*T$v,T$C=T$w*T$O,T$E=T$v*T$y,T$r=T$v*T$w,T$u=T$O*T$y,T$T=T$O*T$v,T$j=T$w*T$y;T$x[3]=T$x[7]=T$x[11]=T$x[12]=T$x[13]=T$x[14]=0,T$x[15]=1,T$x[0]=1-2*(T$o+T$V),T$x[1]=2*(T$C+T$E),T$x[2]=2*(T$r-T$u),T$x[4]=2*(T$C-T$E),T$x[5]=1-2*(T$V+T$F),T$x[6]=2*(T$T+T$j),T$x[8]=2*(T$r+T$u),T$x[9]=2*(T$T-T$j),T$x[10]=1-2*(T$o+T$F);},T$_.createTranslate=function(T$L,T$s){var T$m=T$L.elements,T$x=T$s.elements;T$x[4]=T$x[8]=T$x[1]=T$x[9]=T$x[2]=T$x[6]=T$x[3]=T$x[7]=T$x[11]=0,T$x[0]=T$x[5]=T$x[10]=T$x[15]=1,T$x[12]=T$m[0],T$x[13]=T$m[1],T$x[14]=T$m[2];},T$_.createScaling=function(T$L,T$s){var T$m=T$L.elements,T$x=T$s.elements;T$x[0]=T$m[0],T$x[5]=T$m[1],T$x[10]=T$m[2],T$x[1]=T$x[4]=T$x[8]=T$x[12]=T$x[9]=T$x[13]=T$x[2]=T$x[6]=T$x[14]=T$x[3]=T$x[7]=T$x[11]=0,T$x[15]=1;},T$_.multiply=function(T$L,T$s,T$m){var T$x,T$w,T$O,T$v,T$y,T$F,T$o,T$V;for(T$w=T$m.elements,T$O=T$L.elements,T$w===(T$v=T$s.elements)&&(T$v=T$v.slice()),T$x=0;T$x<4;T$x++)T$y=T$O[T$x],T$F=T$O[T$x+4],T$o=T$O[T$x+8],T$V=T$O[T$x+12],T$w[T$x]=T$y*T$v[0]+T$F*T$v[1]+T$o*T$v[2]+T$V*T$v[3],T$w[T$x+4]=T$y*T$v[4]+T$F*T$v[5]+T$o*T$v[6]+T$V*T$v[7],T$w[T$x+8]=T$y*T$v[8]+T$F*T$v[9]+T$o*T$v[10]+T$V*T$v[11],T$w[T$x+12]=T$y*T$v[12]+T$F*T$v[13]+T$o*T$v[14]+T$V*T$v[15];},T$_.createFromQuaternion=function(T$L,T$s){var T$m=T$s.elements,T$x=T$L.elements,T$w=T$x[0],T$O=T$x[1],T$v=T$x[2],T$y=T$x[3],T$F=T$w+T$w,T$o=T$O+T$O,T$V=T$v+T$v,T$C=T$w*T$F,T$E=T$O*T$F,T$r=T$O*T$o,T$u=T$v*T$F,T$T=T$v*T$o,T$j=T$v*T$V,T$D=T$y*T$F,T$e=T$y*T$o,T$b=T$y*T$V;T$m[0]=1-T$r-T$j,T$m[1]=T$E+T$b,T$m[2]=T$u-T$e,T$m[3]=0,T$m[4]=T$E-T$b,T$m[5]=1-T$C-T$j,T$m[6]=T$T+T$D,T$m[7]=0,T$m[8]=T$u+T$e,T$m[9]=T$T-T$D,T$m[10]=1-T$C-T$r,T$m[11]=0,T$m[12]=0,T$m[13]=0,T$m[14]=0,T$m[15]=1;},T$_.createAffineTransformation=function(T$L,T$s,T$m,T$x){var T$w=T$L.elements,T$O=T$s.elements,T$v=T$m.elements,T$y=T$x.elements,T$F=T$O[0],T$o=T$O[1],T$V=T$O[2],T$C=T$O[3],T$E=T$F+T$F,T$r=T$o+T$o,T$u=T$V+T$V,T$T=T$F*T$E,T$j=T$F*T$r,T$D=T$F*T$u,T$e=T$o*T$r,T$b=T$o*T$u,T$S=T$V*T$u,T$H=T$C*T$E,T$Y=T$C*T$r,T$a=T$C*T$u,T$f=T$v[0],T$_=T$v[1],T$Q=T$v[2];T$y[0]=(1-(T$e+T$S))*T$f,T$y[1]=(T$j+T$a)*T$f,T$y[2]=(T$D-T$Y)*T$f,T$y[3]=0,T$y[4]=(T$j-T$a)*T$_,T$y[5]=(1-(T$T+T$S))*T$_,T$y[6]=(T$b+T$H)*T$_,T$y[7]=0,T$y[8]=(T$D+T$Y)*T$Q,T$y[9]=(T$b-T$H)*T$Q,T$y[10]=(1-(T$T+T$e))*T$Q,T$y[11]=0,T$y[12]=T$w[0],T$y[13]=T$w[1],T$y[14]=T$w[2],T$y[15]=1;},T$_.createLookAt=function(T$L,T$s,T$m,T$x){var T$w=T$x.elements,T$O=T$_._tempVector0,T$v=T$_._tempVector1,T$y=T$_._tempVector2;T$vs.subtract(T$L,T$s,T$y),T$vs.normalize(T$y,T$y),T$vs.cross(T$m,T$y,T$O),T$vs.normalize(T$O,T$O),T$vs.cross(T$y,T$O,T$v),T$x.identity(),T$w[0]=T$O.x,T$w[4]=T$O.y,T$w[8]=T$O.z,T$w[1]=T$v.x,T$w[5]=T$v.y,T$w[9]=T$v.z,T$w[2]=T$y.x,T$w[6]=T$y.y,T$w[10]=T$y.z,T$w[12]=-T$vs.dot(T$O,T$L),T$w[13]=-T$vs.dot(T$v,T$L),T$w[14]=-T$vs.dot(T$y,T$L);},T$_.createPerspective=function(T$L,T$s,T$m,T$x,T$w){var T$O=T$w.elements,T$v=1/Math.tan(T$L/2),T$y=1/(T$m-T$x);T$O[0]=T$v/T$s,T$O[5]=T$v,T$O[10]=(T$x+T$m)*T$y,T$O[11]=-1,T$O[14]=2*T$x*T$m*T$y,T$O[1]=T$O[2]=T$O[3]=T$O[4]=T$O[6]=T$O[7]=T$O[8]=T$O[9]=T$O[12]=T$O[13]=T$O[15]=0;},T$_.createOrthoOffCenterRH=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){var T$y=T$v.elements,T$F=1/(T$L-T$s),T$o=1/(T$m-T$x),T$V=1/(T$w-T$O);T$y[1]=T$y[2]=T$y[3]=T$y[4]=T$y[6]=T$y[7]=T$y[8]=T$y[9]=T$y[11]=0,T$y[15]=1,T$y[0]=-2*T$F,T$y[5]=-2*T$o,T$y[10]=2*T$V,T$y[12]=(T$L+T$s)*T$F,T$y[13]=(T$x+T$m)*T$o,T$y[14]=(T$O+T$w)*T$V;},T$_.translation=function(T$L,T$s){var T$m=T$L.elements,T$x=T$s.elements;T$x[0]=T$x[5]=T$x[10]=T$x[15]=1,T$x[12]=T$m[0],T$x[13]=T$m[1],T$x[14]=T$m[2];},T$C(T$_,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new T$_();},"_tempVector0",function(){return this._tempVector0=new T$vs();},"_tempVector1",function(){return this._tempVector1=new T$vs();},"_tempVector2",function(){return this._tempVector2=new T$vs();},"_tempQuaternion",function(){return this._tempQuaternion=new T$ms();},"DEFAULT",function(){return this.DEFAULT=new T$_();},"ZERO",function(){return this.ZERO=new T$_(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);}]),T$_;}(),T$ss=(function(){function T$b(T$L,T$s){this.extents=null,this.transformation=null,this.extents=T$L,this.transformation=T$s;}T$r(T$b,"laya.d3.math.OrientedBoundBox");var T$L=T$b.prototype;T$L.getCorners=function(T$L){var T$s=T$b._tempV30.elements,T$m=T$b._tempV31.elements,T$x=T$b._tempV32.elements,T$w=this.extents.elements;T$s[0]=T$w[0],T$s[1]=T$s[2]=0,T$m[1]=T$w[1],T$m[0]=T$m[2]=0,T$x[2]=T$w[2],T$x[0]=T$x[1]=0,T$vs.TransformNormal(T$b._tempV30,this.transformation,T$b._tempV30),T$vs.TransformNormal(T$b._tempV31,this.transformation,T$b._tempV31),T$vs.TransformNormal(T$b._tempV32,this.transformation,T$b._tempV32);var T$O=T$b._tempV33;this.transformation.getTranslationVector(T$O),T$L.length=8,T$vs.add(T$O,T$b._tempV30,T$b._tempV34),T$vs.add(T$b._tempV34,T$b._tempV31,T$b._tempV34),T$vs.add(T$b._tempV34,T$b._tempV32,T$L[0]),T$vs.add(T$O,T$b._tempV30,T$b._tempV34),T$vs.add(T$b._tempV34,T$b._tempV31,T$b._tempV34),T$vs.subtract(T$b._tempV34,T$b._tempV32,T$L[1]),T$vs.subtract(T$O,T$b._tempV30,T$b._tempV34),T$vs.add(T$b._tempV34,T$b._tempV31,T$b._tempV34),T$vs.subtract(T$b._tempV34,T$b._tempV32,T$L[2]),T$vs.subtract(T$O,T$b._tempV30,T$b._tempV34),T$vs.add(T$b._tempV34,T$b._tempV31,T$b._tempV34),T$vs.add(T$b._tempV34,T$b._tempV32,T$L[3]),T$vs.add(T$O,T$b._tempV30,T$b._tempV34),T$vs.subtract(T$b._tempV34,T$b._tempV31,T$b._tempV34),T$vs.add(T$b._tempV34,T$b._tempV32,T$L[4]),T$vs.add(T$O,T$b._tempV30,T$b._tempV34),T$vs.subtract(T$b._tempV34,T$b._tempV31,T$b._tempV34),T$vs.subtract(T$b._tempV34,T$b._tempV32,T$L[5]),T$vs.subtract(T$O,T$b._tempV30,T$b._tempV34),T$vs.subtract(T$b._tempV34,T$b._tempV31,T$b._tempV34),T$vs.subtract(T$b._tempV34,T$b._tempV32,T$L[6]),T$vs.subtract(T$O,T$b._tempV30,T$b._tempV34),T$vs.subtract(T$b._tempV34,T$b._tempV31,T$b._tempV34),T$vs.add(T$b._tempV34,T$b._tempV32,T$L[7]);},T$L.transform=function(T$L){T$Ls.multiply(this.transformation,T$L,this.transformation);},T$L.scale=function(T$L){T$vs.multiply(this.extents,T$L,this.extents);},T$L.translate=function(T$L){this.transformation.getTranslationVector(T$b._tempV30),T$vs.add(T$b._tempV30,T$L,T$b._tempV31),this.transformation.setTranslationVector(T$b._tempV31);},T$L.Size=function(T$L){T$vs.scale(this.extents,2,T$L);},T$L.getSize=function(T$L){var T$s=this.extents.elements;T$b._tempV30.x=T$s[0],T$b._tempV31.y=T$s[1],T$b._tempV32.z=T$s[2],T$vs.TransformNormal(T$b._tempV30,this.transformation,T$b._tempV30),T$vs.TransformNormal(T$b._tempV31,this.transformation,T$b._tempV31),T$vs.TransformNormal(T$b._tempV31,this.transformation,T$b._tempV32);var T$m=T$L.elements;T$m[0]=T$vs.scalarLength(T$b._tempV30),T$m[1]=T$vs.scalarLength(T$b._tempV31),T$m[2]=T$vs.scalarLength(T$b._tempV32);},T$L.getSizeSquared=function(T$L){var T$s=this.extents.elements;T$b._tempV30.x=T$s[0],T$b._tempV31.y=T$s[1],T$b._tempV32.z=T$s[2],T$vs.TransformNormal(T$b._tempV30,this.transformation,T$b._tempV30),T$vs.TransformNormal(T$b._tempV31,this.transformation,T$b._tempV31),T$vs.TransformNormal(T$b._tempV31,this.transformation,T$b._tempV32);var T$m=T$L.elements;T$m[0]=T$vs.scalarLengthSquared(T$b._tempV30),T$m[1]=T$vs.scalarLengthSquared(T$b._tempV31),T$m[2]=T$vs.scalarLengthSquared(T$b._tempV32);},T$L.getCenter=function(T$L){this.transformation.getTranslationVector(T$L);},T$L.containsPoint=function(T$L){var T$s=this.extents.elements,T$m=T$s[0],T$x=T$s[1],T$w=T$s[2];this.transformation.invert(T$b._tempM0),T$vs.transformCoordinate(T$L,T$b._tempM0,T$b._tempV30);var T$O=T$b._tempV30.elements,T$v=Math.abs(T$O[0]),T$y=Math.abs(T$O[1]),T$F=Math.abs(T$O[2]);return T$zL.nearEqual(T$v,T$m)&&T$zL.nearEqual(T$y,T$x)&&T$zL.nearEqual(T$F,T$w)?2:T$v<T$m&&T$y<T$x&&T$F<T$w?1:0;},T$L.containsPoints=function(T$L){var T$s=this.extents.elements,T$m=T$s[0],T$x=T$s[1],T$w=T$s[2];this.transformation.invert(T$b._tempM0);for(var T$O=!0,T$v=!1,T$y=0;T$y<T$L.length;T$y++){T$vs.transformCoordinate(T$L[T$y],T$b._tempM0,T$b._tempV30);var T$F=T$b._tempV30.elements,T$o=Math.abs(T$F[0]),T$V=Math.abs(T$F[1]),T$C=Math.abs(T$F[2]);T$zL.nearEqual(T$o,T$m)&&T$zL.nearEqual(T$V,T$x)&&T$zL.nearEqual(T$C,T$w)&&(T$v=!0),T$o<T$m&&T$V<T$x&&T$C<T$w?T$v=!0:T$O=!1;}return T$O?1:T$v?2:0;},T$L.containsSphere=function(T$L,T$s){void 0===T$s&&(T$s=!1);var T$m=this.extents.elements,T$x=T$m[0],T$w=T$m[1],T$O=T$m[2],T$v=T$L.radius;this.transformation.invert(T$b._tempM0),T$vs.transformCoordinate(T$L.center,T$b._tempM0,T$b._tempV30);var T$y=NaN;if(T$y=T$s?T$v:(T$vs.scale(T$vs.UnitX,T$v,T$b._tempV31),T$vs.TransformNormal(T$b._tempV31,T$b._tempM0,T$b._tempV31),T$vs.scalarLength(T$b._tempV31)),T$vs.scale(this.extents,-1,T$b._tempV32),T$vs.Clamp(T$b._tempV30,T$b._tempV32,this.extents,T$b._tempV33),T$y*T$y<T$vs.distanceSquared(T$b._tempV30,T$b._tempV33))return 0;var T$F=T$b._tempV30.elements,T$o=T$F[0],T$V=T$F[1],T$C=T$F[2],T$E=T$b._tempV32.elements,T$r=T$E[0],T$u=T$E[1],T$T=T$E[2];return T$r+T$y<=T$o&&T$o<=T$x-T$y&&T$y<T$x-T$r&&T$u+T$y<=T$V&&T$V<=T$w-T$y&&T$y<T$w-T$u&&T$T+T$y<=T$C&&T$C<=T$O-T$y&&T$y<T$O-T$T?1:2;},T$L.containsOrientedBoundBox=function(T$L){var T$s=0,T$m=0;T$L.getCorners(T$b._corners);var T$x=this.containsPoints(T$b._corners);if(0!=T$x)return T$x;var T$w=this.extents.elements;T$L.extents.cloneTo(T$b._tempV35);var T$O=T$b._tempV35.elements;T$b._getRows(this.transformation,T$b._rows1),T$b._getRows(T$L.transformation,T$b._rows2);var T$v=NaN;for(T$s=0;T$s<4;T$s++)for(T$m=0;T$m<4;T$m++)3==T$s||3==T$m?(T$b._tempM0.setElementByRowColumn(T$s,T$m,0),T$b._tempM1.setElementByRowColumn(T$s,T$m,0)):(T$v=T$vs.dot(T$b._rows1[T$s],T$b._rows2[T$m]),T$b._tempM0.setElementByRowColumn(T$s,T$m,T$v),T$b._tempM1.setElementByRowColumn(T$s,T$m,Math.abs(T$v)));T$L.getCenter(T$b._tempV34),this.getCenter(T$b._tempV36),T$vs.subtract(T$b._tempV34,T$b._tempV36,T$b._tempV30);var T$y=T$b._tempV31.elements;T$y[0]=T$vs.dot(T$b._tempV30,T$b._rows1[0]),T$y[1]=T$vs.dot(T$b._tempV30,T$b._rows1[1]),T$y[2]=T$vs.dot(T$b._tempV30,T$b._rows1[2]);var T$F=T$b._tempV32.elements,T$o=T$b._tempV33.elements;for(T$s=0;T$s<3;T$s++)if(T$F[0]=T$b._tempM1.getElementByRowColumn(T$s,0),T$F[1]=T$b._tempM1.getElementByRowColumn(T$s,1),T$F[2]=T$b._tempM1.getElementByRowColumn(T$s,2),T$w[T$s]+T$vs.dot(T$b._tempV35,T$b._tempV32)<Math.abs(T$y[T$s]))return 0;for(T$m=0;T$m<3;T$m++)if(T$F[0]=T$b._tempM1.getElementByRowColumn(0,T$m),T$F[1]=T$b._tempM1.getElementByRowColumn(1,T$m),T$F[2]=T$b._tempM1.getElementByRowColumn(2,T$m),T$o[0]=T$b._tempM0.getElementByRowColumn(0,T$m),T$o[1]=T$b._tempM0.getElementByRowColumn(1,T$m),T$o[2]=T$b._tempM0.getElementByRowColumn(2,T$m),T$vs.dot(this.extents,T$b._tempV32)+T$O[T$m]<Math.abs(T$vs.dot(T$b._tempV31,T$b._tempV33)))return 0;for(T$s=0;T$s<3;T$s++)for(T$m=0;T$m<3;T$m++){var T$V=(T$s+1)%3,T$C=(T$s+2)%3,T$E=(T$m+1)%3,T$r=(T$m+2)%3;if(T$w[T$V]*T$b._tempM1.getElementByRowColumn(T$C,T$m)+T$w[T$C]*T$b._tempM1.getElementByRowColumn(T$V,T$m)+(T$O[T$E]*T$b._tempM1.getElementByRowColumn(T$s,T$r)+T$O[T$r]*T$b._tempM1.getElementByRowColumn(T$s,T$E))<Math.abs(T$y[T$C]*T$b._tempM0.getElementByRowColumn(T$V,T$m)-T$y[T$V]*T$b._tempM0.getElementByRowColumn(T$C,T$m)))return 0;}return 2;},T$L.containsLine=function(T$L,T$s){T$b._corners[0]=T$L,T$b._corners[1]=T$s;var T$m=this.containsPoints(T$b._corners);if(0!=T$m)return T$m;var T$x=this.extents.elements,T$w=T$x[0],T$O=T$x[1],T$v=T$x[2];this.transformation.invert(T$b._tempM0),T$vs.transformCoordinate(T$L,T$b._tempM0,T$b._tempV30),T$vs.transformCoordinate(T$s,T$b._tempM0,T$b._tempV31),T$vs.add(T$b._tempV30,T$b._tempV31,T$b._tempV32),T$vs.scale(T$b._tempV32,.5,T$b._tempV32),T$vs.subtract(T$b._tempV30,T$b._tempV32,T$b._tempV33);var T$y=T$b._tempV33.elements,T$F=T$y[0],T$o=T$y[1],T$V=T$y[2],T$C=T$b._tempV34.elements,T$E=T$C[0]=Math.abs(T$y[0]),T$r=T$C[1]=Math.abs(T$y[1]),T$u=T$C[2]=Math.abs(T$y[2]),T$T=T$b._tempV32.elements,T$j=T$T[0],T$D=T$T[1],T$e=T$T[2];return Math.abs(T$j)>T$w+T$E?0:Math.abs(T$D)>T$O+T$r?0:Math.abs(T$e)>T$v+T$u?0:Math.abs(T$D*T$V-T$e*T$o)>T$O*T$u+T$v*T$r?0:Math.abs(T$j*T$V-T$e*T$F)>T$w*T$u+T$v*T$E?0:Math.abs(T$j*T$o-T$D*T$F)>T$w*T$r+T$O*T$E?0:2;},T$L.containsBoundBox=function(T$L){var T$s=0,T$m=0,T$x=T$L.min,T$w=T$L.max;T$L.getCorners(T$b._corners);var T$O=this.containsPoints(T$b._corners);if(0!=T$O)return T$O;T$vs.subtract(T$w,T$x,T$b._tempV30),T$vs.scale(T$b._tempV30,.5,T$b._tempV30),T$vs.add(T$x,T$b._tempV30,T$b._tempV30),T$vs.subtract(T$w,T$b._tempV30,T$b._tempV31);var T$v=this.extents.elements,T$y=T$b._tempV31.elements;T$b._getRows(this.transformation,T$b._rows1),this.transformation.invert(T$b._tempM0);for(T$s=0;T$s<3;T$s++)for(T$m=0;T$m<3;T$m++)T$b._tempM1.setElementByRowColumn(T$s,T$m,Math.abs(T$b._tempM0.getElementByRowColumn(T$s,T$m)));this.getCenter(T$b._tempV35),T$vs.subtract(T$b._tempV30,T$b._tempV35,T$b._tempV32);var T$F=T$b._tempV31.elements;T$F[0]=T$vs.dot(T$b._tempV32,T$b._rows1[0]),T$F[1]=T$vs.dot(T$b._tempV32,T$b._rows1[1]),T$F[2]=T$vs.dot(T$b._tempV32,T$b._rows1[2]);var T$o=T$b._tempV33.elements,T$V=T$b._tempV34.elements;for(T$s=0;T$s<3;T$s++)if(T$o[0]=T$b._tempM1.getElementByRowColumn(T$s,0),T$o[1]=T$b._tempM1.getElementByRowColumn(T$s,1),T$o[2]=T$b._tempM1.getElementByRowColumn(T$s,2),T$v[T$s]+T$vs.dot(T$b._tempV31,T$b._tempV33)<Math.abs(T$F[T$s]))return 0;for(T$m=0;T$m<3;T$m++)if(T$o[0]=T$b._tempM1.getElementByRowColumn(0,T$m),T$o[1]=T$b._tempM1.getElementByRowColumn(1,T$m),T$o[2]=T$b._tempM1.getElementByRowColumn(2,T$m),T$V[0]=T$b._tempM0.getElementByRowColumn(0,T$m),T$V[1]=T$b._tempM0.getElementByRowColumn(1,T$m),T$V[2]=T$b._tempM0.getElementByRowColumn(2,T$m),T$vs.dot(this.extents,T$b._tempV33)+T$y[T$m]<Math.abs(T$vs.dot(T$b._tempV31,T$b._tempV34)))return 0;for(T$s=0;T$s<3;T$s++)for(T$m=0;T$m<3;T$m++){var T$C=(T$s+1)%3,T$E=(T$s+2)%3,T$r=(T$m+1)%3,T$u=(T$m+2)%3;if(T$v[T$C]*T$b._tempM1.getElementByRowColumn(T$E,T$m)+T$v[T$E]*T$b._tempM1.getElementByRowColumn(T$C,T$m)+(T$y[T$r]*T$b._tempM1.getElementByRowColumn(T$s,T$u)+T$y[T$u]*T$b._tempM1.getElementByRowColumn(T$s,T$r))<Math.abs(T$F[T$E]*T$b._tempM0.getElementByRowColumn(T$C,T$m)-T$F[T$C]*T$b._tempM0.getElementByRowColumn(T$E,T$m)))return 0;}return 2;},T$L.intersectsRay=function(T$L,T$s){T$vs.scale(this.extents,-1,T$b._tempV30),this.transformation.invert(T$b._tempM0),T$vs.TransformNormal(T$L.direction,T$b._tempM0,T$b._ray.direction),T$vs.transformCoordinate(T$L.origin,T$b._tempM0,T$b._ray.origin),T$b._boxBound1.min=T$b._tempV30,T$b._boxBound1.max=this.extents;var T$m=Collision.intersectsRayAndBoxRP(T$b._ray,T$b._boxBound1,T$s);return-1!==T$m&&T$vs.transformCoordinate(T$s,this.transformation,T$s),T$m;},T$L._getLocalCorners=function(T$L){T$L.length=8;var T$s=this.extents.elements;T$b._tempV30.x=T$s[0],T$b._tempV31.y=T$s[1],T$b._tempV32.z=T$s[2],T$vs.add(T$b._tempV30,T$b._tempV31,T$b._tempV33),T$vs.add(T$b._tempV33,T$b._tempV32,T$L[0]),T$vs.add(T$b._tempV30,T$b._tempV31,T$b._tempV33),T$vs.subtract(T$b._tempV33,T$b._tempV32,T$L[1]),T$vs.subtract(T$b._tempV31,T$b._tempV30,T$b._tempV33),T$vs.subtract(T$b._tempV33,T$b._tempV30,T$L[2]),T$vs.subtract(T$b._tempV31,T$b._tempV30,T$b._tempV33),T$vs.add(T$b._tempV33,T$b._tempV32,T$L[3]),T$vs.subtract(T$b._tempV30,T$b._tempV31,T$b._tempV33),T$vs.add(T$b._tempV33,T$b._tempV32,T$L[4]),T$vs.subtract(T$b._tempV30,T$b._tempV31,T$b._tempV33),T$vs.subtract(T$b._tempV33,T$b._tempV32,T$L[5]),T$vs.scale(T$L[0],-1,T$L[6]),T$vs.subtract(T$b._tempV32,T$b._tempV30,T$b._tempV33),T$vs.subtract(T$b._tempV33,T$b._tempV31,T$L[7]);},T$L.equals=function(T$L){return this.extents==T$L.extents&&this.transformation==T$L.transformation;},T$L.cloneTo=function(T$L){var T$s=T$L;this.extents.cloneTo(T$s.extents),this.transformation.cloneTo(T$s.transformation);},T$b.createByBoundBox=function(T$L,T$s){var T$m=T$L.min,T$x=T$L.max;T$vs.subtract(T$x,T$m,T$b._tempV30),T$vs.scale(T$b._tempV30,.5,T$b._tempV30),T$vs.add(T$m,T$b._tempV30,T$b._tempV31),T$vs.subtract(T$x,T$b._tempV31,T$b._tempV32),T$Ls.translation(T$b._tempV31,T$b._tempM0);var T$w=T$b._tempV32.clone(),T$O=T$b._tempM0.clone();T$s.extents=T$w,T$s.transformation=T$O;},T$b.createByMinAndMaxVertex=function(T$L,T$s){return T$vs.subtract(T$s,T$L,T$b._tempV30),T$vs.scale(T$b._tempV30,.5,T$b._tempV30),T$vs.add(T$L,T$b._tempV30,T$b._tempV31),T$vs.subtract(T$s,T$b._tempV31,T$b._tempV32),T$Ls.translation(T$b._tempV31,T$b._tempM0),new T$b(T$b._tempV32,T$b._tempM0);},T$b._getRows=function(T$L,T$s){T$s.length=3;var T$m=T$L.elements,T$x=T$s[0].elements;T$x[0]=T$m[0],T$x[1]=T$m[1],T$x[2]=T$m[2];var T$w=T$s[1].elements;T$w[0]=T$m[4],T$w[1]=T$m[5],T$w[2]=T$m[6];var T$O=T$s[2].elements;T$O[0]=T$m[8],T$O[1]=T$m[9],T$O[2]=T$m[10];},T$b.getObbtoObbMatrix4x4=function(T$L,T$s,T$m,T$x){var T$w=T$L.transformation,T$O=T$s.transformation;if(T$m){T$b._getRows(T$w,T$b._rows1),T$b._getRows(T$O,T$b._rows2);for(var T$v=0;T$v<3;T$v++)for(var T$y=0;T$y<3;T$y++)T$x.setElementByRowColumn(T$v,T$y,T$vs.dot(T$b._rows2[T$v],T$b._rows1[T$y]));T$s.getCenter(T$b._tempV30),T$L.getCenter(T$b._tempV31),T$vs.subtract(T$b._tempV30,T$b._tempV31,T$b._tempV32);var T$F=T$x.elements;T$F[12]=T$vs.dot(T$b._tempV32,T$b._rows1[0]),T$F[13]=T$vs.dot(T$b._tempV32,T$b._rows1[1]),T$F[14]=T$vs.dot(T$b._tempV32,T$b._rows1[2]),T$F[15]=1;}else T$w.invert(T$b._tempM0),T$Ls.multiply(T$O,T$b._tempM0,T$x);},T$b.merge=function(T$L,T$s,T$m){var T$x=T$L.extents,T$w=T$L.transformation;T$b.getObbtoObbMatrix4x4(T$L,T$s,T$m,T$b._tempM0),T$s._getLocalCorners(T$b._corners),T$vs.transformCoordinate(T$b._corners[0],T$b._tempM0,T$b._corners[0]),T$vs.transformCoordinate(T$b._corners[1],T$b._tempM0,T$b._corners[1]),T$vs.transformCoordinate(T$b._corners[2],T$b._tempM0,T$b._corners[2]),T$vs.transformCoordinate(T$b._corners[3],T$b._tempM0,T$b._corners[3]),T$vs.transformCoordinate(T$b._corners[4],T$b._tempM0,T$b._corners[4]),T$vs.transformCoordinate(T$b._corners[5],T$b._tempM0,T$b._corners[5]),T$vs.transformCoordinate(T$b._corners[6],T$b._tempM0,T$b._corners[6]),T$vs.transformCoordinate(T$b._corners[7],T$b._tempM0,T$b._corners[7]),T$vs.scale(T$x,-1,T$b._boxBound1.min),T$x.cloneTo(T$b._boxBound1.max),T$kL.createfromPoints(T$b._corners,T$b._boxBound2),T$kL.merge(T$b._boxBound2,T$b._boxBound1,T$b._boxBound3);var T$O=T$b._boxBound3.min,T$v=T$b._boxBound3.max;T$vs.subtract(T$v,T$O,T$b._tempV30),T$vs.scale(T$b._tempV30,.5,T$b._tempV30),T$vs.add(T$O,T$b._tempV30,T$b._tempV32),T$vs.subtract(T$v,T$b._tempV32,T$x),T$vs.transformCoordinate(T$b._tempV32,T$w,T$b._tempV33);},T$C(T$b,["_tempV30",function(){return this._tempV30=new T$vs();},"_tempV31",function(){return this._tempV31=new T$vs();},"_tempV32",function(){return this._tempV32=new T$vs();},"_tempV33",function(){return this._tempV33=new T$vs();},"_tempV34",function(){return this._tempV34=new T$vs();},"_tempV35",function(){return this._tempV35=new T$vs();},"_tempV36",function(){return this._tempV36=new T$vs();},"_tempM0",function(){return this._tempM0=new T$Ls();},"_tempM1",function(){return this._tempM1=new T$Ls();},"_corners",function(){return this._corners=[new T$vs(),new T$vs(),new T$vs(),new T$vs(),new T$vs(),new T$vs(),new T$vs(),new T$vs()];},"_rows1",function(){return this._rows1=[new T$vs(),new T$vs(),new T$vs()];},"_rows2",function(){return this._rows2=[new T$vs(),new T$vs(),new T$vs()];},"_ray",function(){return this._ray=new T$ws(new T$vs(),new T$vs());},"_boxBound1",function(){return this._boxBound1=new T$kL(new T$vs(),new T$vs());},"_boxBound2",function(){return this._boxBound2=new T$kL(new T$vs(),new T$vs());},"_boxBound3",function(){return this._boxBound3=new T$kL(new T$vs(),new T$vs());}]);}(),function(){function T$H(T$L,T$s){this.normal=null,this.distance=NaN,void 0===T$s&&(T$s=0),this.normal=T$L,this.distance=T$s;}return T$r(T$H,"laya.d3.math.Plane"),T$H.prototype.normalize=function(){var T$L=this.normal.elements,T$s=T$L[0],T$m=T$L[1],T$x=T$L[2],T$w=1/Math.sqrt(T$s*T$s+T$m*T$m+T$x*T$x);T$L[0]=T$s*T$w,T$L[1]=T$m*T$w,T$L[2]=T$x*T$w,this.distance*=T$w;},T$H.createPlaneBy3P=function(T$L,T$s,T$m){var T$x=T$L.elements,T$w=T$s.elements,T$O=T$m.elements,T$v=T$w[0]-T$x[0],T$y=T$w[1]-T$x[1],T$F=T$w[2]-T$x[2],T$o=T$O[0]-T$x[0],T$V=T$O[1]-T$x[1],T$C=T$O[2]-T$x[2],T$E=T$y*T$C-T$F*T$V,T$r=T$F*T$o-T$v*T$C,T$u=T$v*T$V-T$y*T$o,T$T=1/Math.sqrt(T$E*T$E+T$r*T$r+T$u*T$u),T$j=T$E*T$T,T$D=T$r*T$T,T$e=T$u*T$T,T$b=T$H._TEMPVec3.elements;T$b[0]=T$j,T$b[1]=T$D,T$b[2]=T$e;var T$S=-(T$j*T$x[0]+T$D*T$x[1]+T$e*T$x[2]);return new T$H(T$H._TEMPVec3,T$S);},T$H.PlaneIntersectionType_Back=0,T$H.PlaneIntersectionType_Front=1,T$H.PlaneIntersectionType_Intersecting=2,T$C(T$H,["_TEMPVec3",function(){return this._TEMPVec3=new T$vs();}]),T$H;}()),T$ms=function(){function T$w(T$L,T$s,T$m,T$x){this.elements=new Float32Array(4),void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0),void 0===T$x&&(T$x=1),this.elements[0]=T$L,this.elements[1]=T$s,this.elements[2]=T$m,this.elements[3]=T$x;}T$r(T$w,"laya.d3.math.Quaternion");var T$L=T$w.prototype;return T$H.imps(T$L,{"laya.d3.core.IClone":!0}),T$L.scaling=function(T$L,T$s){var T$m=T$s.elements,T$x=this.elements;T$m[0]=T$x[0]*T$L,T$m[1]=T$x[1]*T$L,T$m[2]=T$x[2]*T$L,T$m[3]=T$x[3]*T$L;},T$L.normalize=function(T$L){var T$s=T$L.elements,T$m=this.elements,T$x=T$m[0],T$w=T$m[1],T$O=T$m[2],T$v=T$m[3],T$y=T$x*T$x+T$w*T$w+T$O*T$O+T$v*T$v;0<T$y&&(T$y=1/Math.sqrt(T$y),T$s[0]=T$x*T$y,T$s[1]=T$w*T$y,T$s[2]=T$O*T$y,T$s[3]=T$v*T$y);},T$L.length=function(){var T$L=this.elements,T$s=T$L[0],T$m=T$L[1],T$x=T$L[2],T$w=T$L[3];return Math.sqrt(T$s*T$s+T$m*T$m+T$x*T$x+T$w*T$w);},T$L.rotateX=function(T$L,T$s){var T$m=T$s.elements,T$x=this.elements;T$L*=.5;var T$w=T$x[0],T$O=T$x[1],T$v=T$x[2],T$y=T$x[3],T$F=Math.sin(T$L),T$o=Math.cos(T$L);T$m[0]=T$w*T$o+T$y*T$F,T$m[1]=T$O*T$o+T$v*T$F,T$m[2]=T$v*T$o-T$O*T$F,T$m[3]=T$y*T$o-T$w*T$F;},T$L.rotateY=function(T$L,T$s){var T$m=T$s.elements,T$x=this.elements;T$L*=.5;var T$w=T$x[0],T$O=T$x[1],T$v=T$x[2],T$y=T$x[3],T$F=Math.sin(T$L),T$o=Math.cos(T$L);T$m[0]=T$w*T$o-T$v*T$F,T$m[1]=T$O*T$o+T$y*T$F,T$m[2]=T$v*T$o+T$w*T$F,T$m[3]=T$y*T$o-T$O*T$F;},T$L.rotateZ=function(T$L,T$s){var T$m=T$s.elements,T$x=this.elements;T$L*=.5;var T$w=T$x[0],T$O=T$x[1],T$v=T$x[2],T$y=T$x[3],T$F=Math.sin(T$L),T$o=Math.cos(T$L);T$m[0]=T$w*T$o+T$O*T$F,T$m[1]=T$O*T$o-T$w*T$F,T$m[2]=T$v*T$o+T$y*T$F,T$m[3]=T$y*T$o-T$v*T$F;},T$L.getYawPitchRoll=function(T$L){T$vs.transformQuat(T$vs.ForwardRH,this,T$w.TEMPVector31),T$vs.transformQuat(T$vs.Up,this,T$w.TEMPVector32);var T$s=T$w.TEMPVector32.elements;T$w.angleTo(T$vs.ZERO,T$w.TEMPVector31,T$w.TEMPVector33);var T$m=T$w.TEMPVector33.elements;T$m[0]==Math.PI/2?(T$m[1]=T$w.arcTanAngle(T$s[2],T$s[0]),T$m[2]=0):T$m[0]==-Math.PI/2?(T$m[1]=T$w.arcTanAngle(-T$s[2],-T$s[0]),T$m[2]=0):(T$Ls.createRotationY(-T$m[1],T$w.TEMPMatrix0),T$Ls.createRotationX(-T$m[0],T$w.TEMPMatrix1),T$vs.transformCoordinate(T$w.TEMPVector32,T$w.TEMPMatrix0,T$w.TEMPVector32),T$vs.transformCoordinate(T$w.TEMPVector32,T$w.TEMPMatrix1,T$w.TEMPVector32),T$m[2]=T$w.arcTanAngle(T$s[1],-T$s[0])),T$m[1]<=-Math.PI&&(T$m[1]=Math.PI),T$m[2]<=-Math.PI&&(T$m[2]=Math.PI),T$m[1]>=Math.PI&&T$m[2]>=Math.PI&&(T$m[1]=0,T$m[2]=0,T$m[0]=Math.PI-T$m[0]);var T$x=T$L.elements;T$x[0]=T$m[1],T$x[1]=T$m[0],T$x[2]=T$m[2];},T$L.invert=function(T$L){var T$s=T$L.elements,T$m=this.elements,T$x=T$m[0],T$w=T$m[1],T$O=T$m[2],T$v=T$m[3],T$y=T$x*T$x+T$w*T$w+T$O*T$O+T$v*T$v,T$F=T$y?1/T$y:0;T$s[0]=-T$x*T$F,T$s[1]=-T$w*T$F,T$s[2]=-T$O*T$F,T$s[3]=T$v*T$F;},T$L.identity=function(){var T$L=this.elements;T$L[0]=0,T$L[1]=0,T$L[2]=0,T$L[3]=1;},T$L.fromArray=function(T$L,T$s){void 0===T$s&&(T$s=0),this.elements[0]=T$L[T$s+0],this.elements[1]=T$L[T$s+1],this.elements[2]=T$L[T$s+2],this.elements[3]=T$L[T$s+3];},T$L.cloneTo=function(T$L){var T$s,T$m,T$x;if((T$m=this.elements)!==(T$x=T$L.elements))for(T$s=0;T$s<4;++T$s)T$x[T$s]=T$m[T$s];},T$L.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$L.equals=function(T$L){var T$s=this.elements,T$m=T$L.elements;return T$zL.nearEqual(T$s[0],T$m[0])&&T$zL.nearEqual(T$s[1],T$m[1])&&T$zL.nearEqual(T$s[2],T$m[2])&&T$zL.nearEqual(T$s[3],T$m[3]);},T$L.lengthSquared=function(){var T$L=this.elements[0],T$s=this.elements[1],T$m=this.elements[2],T$x=this.elements[3];return T$L*T$L+T$s*T$s+T$m*T$m+T$x*T$x;},T$u(0,T$L,"x",function(){return this.elements[0];}),T$u(0,T$L,"y",function(){return this.elements[1];}),T$u(0,T$L,"z",function(){return this.elements[2];}),T$u(0,T$L,"w",function(){return this.elements[3];}),T$w.createFromYawPitchRoll=function(T$L,T$s,T$m,T$x){var T$w=.5*T$m,T$O=.5*T$s,T$v=.5*T$L,T$y=Math.sin(T$w),T$F=Math.cos(T$w),T$o=Math.sin(T$O),T$V=Math.cos(T$O),T$C=Math.sin(T$v),T$E=Math.cos(T$v),T$r=T$x.elements;T$r[0]=T$E*T$o*T$F+T$C*T$V*T$y,T$r[1]=T$C*T$V*T$F-T$E*T$o*T$y,T$r[2]=T$E*T$V*T$y-T$C*T$o*T$F,T$r[3]=T$E*T$V*T$F+T$C*T$o*T$y;},T$w.multiply=function(T$L,T$s,T$m){var T$x=T$L.elements,T$w=T$s.elements,T$O=T$m.elements,T$v=T$x[0],T$y=T$x[1],T$F=T$x[2],T$o=T$x[3],T$V=T$w[0],T$C=T$w[1],T$E=T$w[2],T$r=T$w[3],T$u=T$y*T$E-T$F*T$C,T$T=T$F*T$V-T$v*T$E,T$j=T$v*T$C-T$y*T$V,T$D=T$v*T$V+T$y*T$C+T$F*T$E;T$O[0]=T$v*T$r+T$V*T$o+T$u,T$O[1]=T$y*T$r+T$C*T$o+T$T,T$O[2]=T$F*T$r+T$E*T$o+T$j,T$O[3]=T$o*T$r-T$D;},T$w.arcTanAngle=function(T$L,T$s){return 0==T$L?1==T$s?Math.PI/2:-Math.PI/2:0<T$L?Math.atan(T$s/T$L):T$L<0?0<T$s?Math.atan(T$s/T$L)+Math.PI:Math.atan(T$s/T$L)-Math.PI:0;},T$w.angleTo=function(T$L,T$s,T$m){T$vs.subtract(T$s,T$L,T$w.TEMPVector30),T$vs.normalize(T$w.TEMPVector30,T$w.TEMPVector30),T$m.elements[0]=Math.asin(T$w.TEMPVector30.y),T$m.elements[1]=T$w.arcTanAngle(-T$w.TEMPVector30.z,-T$w.TEMPVector30.x);},T$w.createFromAxisAngle=function(T$L,T$s,T$m){var T$x=T$m.elements,T$w=T$L.elements;T$s*=.5;var T$O=Math.sin(T$s);T$x[0]=T$O*T$w[0],T$x[1]=T$O*T$w[1],T$x[2]=T$O*T$w[2],T$x[3]=Math.cos(T$s);},T$w.createFromMatrix3x3=function(T$L,T$s){var T$m,T$x=T$s.elements,T$w=T$L.elements,T$O=T$w[0]+T$w[4]+T$w[8];if(0<T$O)T$m=Math.sqrt(T$O+1),T$x[3]=.5*T$m,T$m=.5/T$m,T$x[0]=(T$w[5]-T$w[7])*T$m,T$x[1]=(T$w[6]-T$w[2])*T$m,T$x[2]=(T$w[1]-T$w[3])*T$m;else{var T$v=0;T$w[4]>T$w[0]&&(T$v=1),T$w[8]>T$w[3*T$v+T$v]&&(T$v=2);var T$y=(T$v+1)%3,T$F=(T$v+2)%3;T$m=Math.sqrt(T$w[3*T$v+T$v]-T$w[3*T$y+T$y]-T$w[3*T$F+T$F]+1),T$x[T$v]=.5*T$m,T$m=.5/T$m,T$x[3]=(T$w[3*T$y+T$F]-T$w[3*T$F+T$y])*T$m,T$x[T$y]=(T$w[3*T$y+T$v]+T$w[3*T$v+T$y])*T$m,T$x[T$F]=(T$w[3*T$F+T$v]+T$w[3*T$v+T$F])*T$m;}},T$w.createFromMatrix4x4=function(T$L,T$s){var T$m,T$x,T$w=T$L.elements,T$O=T$s.elements,T$v=T$w[0]+T$w[5]+T$w[10];0<T$v?(T$m=Math.sqrt(T$v+1),T$O[3]=.5*T$m,T$m=.5/T$m,T$O[0]=(T$w[6]-T$w[9])*T$m,T$O[1]=(T$w[8]-T$w[2])*T$m,T$O[2]=(T$w[1]-T$w[4])*T$m):T$w[0]>=T$w[5]&&T$w[0]>=T$w[10]?(T$x=.5/(T$m=Math.sqrt(1+T$w[0]-T$w[5]-T$w[10])),T$O[0]=.5*T$m,T$O[1]=(T$w[1]+T$w[4])*T$x,T$O[2]=(T$w[2]+T$w[8])*T$x,T$O[3]=(T$w[6]-T$w[9])*T$x):T$w[5]>T$w[10]?(T$x=.5/(T$m=Math.sqrt(1+T$w[5]-T$w[0]-T$w[10])),T$O[0]=(T$w[4]+T$w[1])*T$x,T$O[1]=.5*T$m,T$O[2]=(T$w[9]+T$w[6])*T$x,T$O[3]=(T$w[8]-T$w[2])*T$x):(T$x=.5/(T$m=Math.sqrt(1+T$w[10]-T$w[0]-T$w[5])),T$O[0]=(T$w[8]+T$w[2])*T$x,T$O[1]=(T$w[9]+T$w[6])*T$x,T$O[2]=.5*T$m,T$O[3]=(T$w[1]-T$w[4])*T$x);},T$w.slerp=function(T$L,T$s,T$m,T$x){var T$w,T$O,T$v,T$y,T$F,T$o=T$L.elements,T$V=T$s.elements,T$C=T$x.elements,T$E=T$o[0],T$r=T$o[1],T$u=T$o[2],T$T=T$o[3],T$j=T$V[0],T$D=T$V[1],T$e=T$V[2],T$b=T$V[3];return(T$O=T$E*T$j+T$r*T$D+T$u*T$e+T$T*T$b)<0&&(T$O=-T$O,T$j=-T$j,T$D=-T$D,T$e=-T$e,T$b=-T$b),T$F=1e-6<1-T$O?(T$w=Math.acos(T$O),T$v=Math.sin(T$w),T$y=Math.sin((1-T$m)*T$w)/T$v,Math.sin(T$m*T$w)/T$v):(T$y=1-T$m,T$m),T$C[0]=T$y*T$E+T$F*T$j,T$C[1]=T$y*T$r+T$F*T$D,T$C[2]=T$y*T$u+T$F*T$e,T$C[3]=T$y*T$T+T$F*T$b,T$C;},T$w.lerp=function(T$L,T$s,T$m,T$x){var T$w=T$x.elements,T$O=T$L.elements,T$v=T$s.elements,T$y=T$O[0],T$F=T$O[1],T$o=T$O[2],T$V=T$O[3];T$w[0]=T$y+T$m*(T$v[0]-T$y),T$w[1]=T$F+T$m*(T$v[1]-T$F),T$w[2]=T$o+T$m*(T$v[2]-T$o),T$w[3]=T$V+T$m*(T$v[3]-T$V);},T$w.add=function(T$L,T$s,T$m){var T$x=T$m.elements,T$w=T$L.elements,T$O=T$s.elements;T$x[0]=T$w[0]+T$O[0],T$x[1]=T$w[1]+T$O[1],T$x[2]=T$w[2]+T$O[2],T$x[3]=T$w[3]+T$O[3];},T$w.dot=function(T$L,T$s){var T$m=T$L.elements,T$x=T$s.elements;return T$m[0]*T$x[0]+T$m[1]*T$x[1]+T$m[2]*T$x[2]+T$m[3]*T$x[3];},T$w.rotationLookAt=function(T$L,T$s,T$m){T$w.lookAt(T$vs.ZERO,T$L,T$s,T$m);},T$w.lookAt=function(T$L,T$s,T$m,T$x){T$tL.lookAt(T$L,T$s,T$m,T$w._tempMatrix3x3),T$w.rotationMatrix(T$w._tempMatrix3x3,T$x);},T$w.invert=function(T$L,T$s){var T$m=T$L.elements,T$x=T$s.elements,T$w=T$L.lengthSquared();T$zL.isZero(T$w)||(T$w=1/T$w,T$x[0]=-T$m[0]*T$w,T$x[1]=-T$m[1]*T$w,T$x[2]=-T$m[2]*T$w,T$x[3]=T$m[3]*T$w);},T$w.rotationMatrix=function(T$L,T$s){var T$m=T$L.elements,T$x=T$m[0],T$w=T$m[1],T$O=T$m[2],T$v=T$m[3],T$y=T$m[4],T$F=T$m[5],T$o=T$m[6],T$V=T$m[7],T$C=T$m[8],T$E=T$s.elements,T$r=NaN,T$u=NaN,T$T=T$x+T$y+T$C;0<T$T?(T$r=Math.sqrt(T$T+1),T$E[3]=.5*T$r,T$r=.5/T$r,T$E[0]=(T$F-T$V)*T$r,T$E[1]=(T$o-T$O)*T$r,T$E[2]=(T$w-T$v)*T$r):T$y<=T$x&&T$C<=T$x?(T$u=.5/(T$r=Math.sqrt(1+T$x-T$y-T$C)),T$E[0]=.5*T$r,T$E[1]=(T$w+T$v)*T$u,T$E[2]=(T$O+T$o)*T$u,T$E[3]=(T$F-T$V)*T$u):T$C<T$y?(T$u=.5/(T$r=Math.sqrt(1+T$y-T$x-T$C)),T$E[0]=(T$v+T$w)*T$u,T$E[1]=.5*T$r,T$E[2]=(T$V+T$F)*T$u,T$E[3]=(T$o-T$O)*T$u):(T$u=.5/(T$r=Math.sqrt(1+T$C-T$x-T$y)),T$E[0]=(T$o+T$O)*T$u,T$E[1]=(T$V+T$F)*T$u,T$E[2]=.5*T$r,T$E[3]=(T$w-T$v)*T$u);},T$w.DEFAULT=new T$w(),T$C(T$w,["TEMPVector30",function(){return this.TEMPVector30=new T$vs();},"TEMPVector31",function(){return this.TEMPVector31=new T$vs();},"TEMPVector32",function(){return this.TEMPVector32=new T$vs();},"TEMPVector33",function(){return this.TEMPVector33=new T$vs();},"TEMPMatrix0",function(){return this.TEMPMatrix0=new T$Ls();},"TEMPMatrix1",function(){return this.TEMPMatrix1=new T$Ls();},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new T$tL();},"NAN",function(){return this.NAN=new T$w(NaN,NaN,NaN,NaN);}]),T$w;}(),T$xs=function(){function T$L(T$L){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=T$L,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1;}T$r(T$L,"laya.d3.math.Rand");var T$s=T$L.prototype;return T$s.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3];},T$s.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607);},T$s.getSignedFloat=function(){return 2*this.getFloat()-1;},T$u(0,T$s,"seed",function(){return this.seeds[0];},function(T$L){this.seeds[0]=T$L,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1;}),T$L.getFloatFromInt=function(T$L){return 1/8388607*(8388607&T$L);},T$L.getByteFromInt=function(T$L){return(8388607&T$L)>>>15;},T$L;}(),T$ws=(function(){function T$w(T$L){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(T$L instanceof Array)||4!==T$L.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|T$L[0],this._state0L=0|T$L[1],this._state1U=0|T$L[2],this._state1L=0|T$L[3];}T$r(T$w,"laya.d3.math.RandX");var T$L=T$w.prototype;T$L.randomint=function(){var T$L=this._state0U,T$s=this._state0L,T$m=this._state1U,T$x=this._state1L,T$w=(T$x>>>0)+(T$s>>>0),T$O=T$m+T$L+(T$w/2>>>31)>>>0,T$v=T$w>>>0,T$y=0,T$F=0;T$y=(T$L^=T$y=T$L<<23|(-512&T$s)>>>9)^(this._state0U=T$m),T$F=(T$s^=T$F=T$s<<23)^(this._state0L=T$x);T$y^=T$L>>>18,T$F^=T$s>>>18|(262143&T$L)<<14;return T$y^=T$m>>>5,T$F^=T$x>>>5|(31&T$m)<<27,this._state1U=T$y,this._state1L=T$F,[T$O,T$v];},T$L.random=function(){var T$L=this.randomint(),T$s=T$L[0],T$m=1023<<20|T$s>>>12,T$x=0|(T$L[1]>>>12|(4095&T$s)<<20);return T$w._CONVERTION_BUFFER.setUint32(0,T$m,!1),T$w._CONVERTION_BUFFER.setUint32(4,T$x,!1),T$xs._CONVERTION_BUFFER.getFloat64(0,!1)-1;},T$C(T$w,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8));},"defaultRand",function(){return this.defaultRand=new T$xs([0,Date.now()/65536,0,Date.now()%65536]);}]);}(),function(){function T$L(T$L,T$s){this.origin=null,this.direction=null,this.origin=T$L,this.direction=T$s;}return T$r(T$L,"laya.d3.math.Ray"),T$L;}()),T$Os=function(){function T$L(T$L,T$s){this.elements=new Float32Array(2),void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=0);var T$m=this.elements;T$m[0]=T$L,T$m[1]=T$s;}T$r(T$L,"laya.d3.math.Vector2");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.core.IClone":!0}),T$s.fromArray=function(T$L,T$s){void 0===T$s&&(T$s=0),this.elements[0]=T$L[T$s+0],this.elements[1]=T$L[T$s+1];},T$s.cloneTo=function(T$L){var T$s=T$L.elements,T$m=this.elements;T$s[0]=T$m[0],T$s[1]=T$m[1];},T$s.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$u(0,T$s,"x",function(){return this.elements[0];},function(T$L){this.elements[0]=T$L;}),T$u(0,T$s,"y",function(){return this.elements[1];},function(T$L){this.elements[1]=T$L;}),T$L.scale=function(T$L,T$s,T$m){var T$x=T$m.elements,T$w=T$L.elements;T$x[0]=T$w[0]*T$s,T$x[1]=T$w[1]*T$s;},T$C(T$L,["ZERO",function(){return this.ZERO=new T$L(0,0);},"ONE",function(){return this.ONE=new T$L(1,1);}]),T$L;}(),T$vs=function(){function T$V(T$L,T$s,T$m){this.elements=new Float32Array(3),void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0);var T$x=this.elements;T$x[0]=T$L,T$x[1]=T$s,T$x[2]=T$m;}T$r(T$V,"laya.d3.math.Vector3");var T$L=T$V.prototype;return T$H.imps(T$L,{"laya.d3.core.IClone":!0}),T$L.fromArray=function(T$L,T$s){void 0===T$s&&(T$s=0),this.elements[0]=T$L[T$s+0],this.elements[1]=T$L[T$s+1],this.elements[2]=T$L[T$s+2];},T$L.cloneTo=function(T$L){var T$s=T$L.elements,T$m=this.elements;T$s[0]=T$m[0],T$s[1]=T$m[1],T$s[2]=T$m[2];},T$L.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$L.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0;},T$L.reset=function(T$L,T$s,T$m){this.elements[0]=T$L,this.elements[1]=T$s,this.elements[2]=T$m;},T$u(0,T$L,"x",function(){return this.elements[0];},function(T$L){this.elements[0]=T$L;}),T$u(0,T$L,"y",function(){return this.elements[1];},function(T$L){this.elements[1]=T$L;}),T$u(0,T$L,"z",function(){return this.elements[2];},function(T$L){this.elements[2]=T$L;}),T$V.distanceSquared=function(T$L,T$s){var T$m=T$L.elements,T$x=T$s.elements,T$w=T$m[0]-T$x[0],T$O=T$m[1]-T$x[1],T$v=T$m[2]-T$x[2];return T$w*T$w+T$O*T$O+T$v*T$v;},T$V.distance=function(T$L,T$s){var T$m=T$L.elements,T$x=T$s.elements,T$w=T$m[0]-T$x[0],T$O=T$m[1]-T$x[1],T$v=T$m[2]-T$x[2];return Math.sqrt(T$w*T$w+T$O*T$O+T$v*T$v);},T$V.min=function(T$L,T$s,T$m){var T$x=T$m.elements,T$w=T$L.elements,T$O=T$s.elements;T$x[0]=Math.min(T$w[0],T$O[0]),T$x[1]=Math.min(T$w[1],T$O[1]),T$x[2]=Math.min(T$w[2],T$O[2]);},T$V.max=function(T$L,T$s,T$m){var T$x=T$m.elements,T$w=T$L.elements,T$O=T$s.elements;T$x[0]=Math.max(T$w[0],T$O[0]),T$x[1]=Math.max(T$w[1],T$O[1]),T$x[2]=Math.max(T$w[2],T$O[2]);},T$V.transformQuat=function(T$L,T$s,T$m){var T$x=T$m.elements,T$w=T$L.elements,T$O=T$s.elements,T$v=T$w[0],T$y=T$w[1],T$F=T$w[2],T$o=T$O[0],T$V=T$O[1],T$C=T$O[2],T$E=T$O[3],T$r=T$E*T$v+T$V*T$F-T$C*T$y,T$u=T$E*T$y+T$C*T$v-T$o*T$F,T$T=T$E*T$F+T$o*T$y-T$V*T$v,T$j=-T$o*T$v-T$V*T$y-T$C*T$F;T$x[0]=T$r*T$E+T$j*-T$o+T$u*-T$C-T$T*-T$V,T$x[1]=T$u*T$E+T$j*-T$V+T$T*-T$o-T$r*-T$C,T$x[2]=T$T*T$E+T$j*-T$C+T$r*-T$V-T$u*-T$o;},T$V.scalarLength=function(T$L){var T$s=T$L.elements,T$m=T$s[0],T$x=T$s[1],T$w=T$s[2];return Math.sqrt(T$m*T$m+T$x*T$x+T$w*T$w);},T$V.scalarLengthSquared=function(T$L){var T$s=T$L.elements,T$m=T$s[0],T$x=T$s[1],T$w=T$s[2];return T$m*T$m+T$x*T$x+T$w*T$w;},T$V.normalize=function(T$L,T$s){var T$m=T$L.elements,T$x=T$s.elements,T$w=T$m[0],T$O=T$m[1],T$v=T$m[2],T$y=T$w*T$w+T$O*T$O+T$v*T$v;0<T$y&&(T$y=1/Math.sqrt(T$y),T$x[0]=T$m[0]*T$y,T$x[1]=T$m[1]*T$y,T$x[2]=T$m[2]*T$y);},T$V.multiply=function(T$L,T$s,T$m){var T$x=T$m.elements,T$w=T$L.elements,T$O=T$s.elements;T$x[0]=T$w[0]*T$O[0],T$x[1]=T$w[1]*T$O[1],T$x[2]=T$w[2]*T$O[2];},T$V.scale=function(T$L,T$s,T$m){var T$x=T$m.elements,T$w=T$L.elements;T$x[0]=T$w[0]*T$s,T$x[1]=T$w[1]*T$s,T$x[2]=T$w[2]*T$s;},T$V.lerp=function(T$L,T$s,T$m,T$x){var T$w=T$x.elements,T$O=T$L.elements,T$v=T$s.elements,T$y=T$O[0],T$F=T$O[1],T$o=T$O[2];T$w[0]=T$y+T$m*(T$v[0]-T$y),T$w[1]=T$F+T$m*(T$v[1]-T$F),T$w[2]=T$o+T$m*(T$v[2]-T$o);},T$V.transformV3ToV3=function(T$L,T$s,T$m){var T$x=T$V._tempVector4;T$V.transformV3ToV4(T$L,T$s,T$x);var T$w=T$x.elements,T$O=T$m.elements;T$O[0]=T$w[0],T$O[1]=T$w[1],T$O[2]=T$w[2];},T$V.transformV3ToV4=function(T$L,T$s,T$m){var T$x=T$L.elements,T$w=T$x[0],T$O=T$x[1],T$v=T$x[2],T$y=T$s.elements,T$F=T$m.elements;T$F[0]=T$w*T$y[0]+T$O*T$y[4]+T$v*T$y[8]+T$y[12],T$F[1]=T$w*T$y[1]+T$O*T$y[5]+T$v*T$y[9]+T$y[13],T$F[2]=T$w*T$y[2]+T$O*T$y[6]+T$v*T$y[10]+T$y[14],T$F[3]=T$w*T$y[3]+T$O*T$y[7]+T$v*T$y[11]+T$y[15];},T$V.TransformNormal=function(T$L,T$s,T$m){var T$x=T$L.elements,T$w=T$x[0],T$O=T$x[1],T$v=T$x[2],T$y=T$s.elements,T$F=T$m.elements;T$F[0]=T$w*T$y[0]+T$O*T$y[4]+T$v*T$y[8],T$F[1]=T$w*T$y[1]+T$O*T$y[5]+T$v*T$y[9],T$F[2]=T$w*T$y[2]+T$O*T$y[6]+T$v*T$y[10];},T$V.transformCoordinate=function(T$L,T$s,T$m){var T$x=T$V._tempVector4.elements,T$w=T$L.elements,T$O=T$w[0],T$v=T$w[1],T$y=T$w[2],T$F=T$s.elements;T$x[0]=T$O*T$F[0]+T$v*T$F[4]+T$y*T$F[8]+T$F[12],T$x[1]=T$O*T$F[1]+T$v*T$F[5]+T$y*T$F[9]+T$F[13],T$x[2]=T$O*T$F[2]+T$v*T$F[6]+T$y*T$F[10]+T$F[14],T$x[3]=1/(T$O*T$F[3]+T$v*T$F[7]+T$y*T$F[11]+T$F[15]);var T$o=T$m.elements;T$o[0]=T$x[0]*T$x[3],T$o[1]=T$x[1]*T$x[3],T$o[2]=T$x[2]*T$x[3];},T$V.Clamp=function(T$L,T$s,T$m,T$x){var T$w=T$L.elements,T$O=T$w[0],T$v=T$w[1],T$y=T$w[2],T$F=T$s.elements,T$o=T$F[0],T$V=T$F[1],T$C=T$F[2],T$E=T$m.elements,T$r=T$E[0],T$u=T$E[1],T$T=T$E[2],T$j=T$x.elements;T$O=(T$O=T$r<T$O?T$r:T$O)<T$o?T$o:T$O,T$v=(T$v=T$u<T$v?T$u:T$v)<T$V?T$V:T$v,T$y=(T$y=T$T<T$y?T$T:T$y)<T$C?T$C:T$y,T$j[0]=T$O,T$j[1]=T$v,T$j[2]=T$y;},T$V.add=function(T$L,T$s,T$m){var T$x=T$m.elements,T$w=T$L.elements,T$O=T$s.elements;T$x[0]=T$w[0]+T$O[0],T$x[1]=T$w[1]+T$O[1],T$x[2]=T$w[2]+T$O[2];},T$V.subtract=function(T$L,T$s,T$m){var T$x=T$m.elements,T$w=T$L.elements,T$O=T$s.elements;T$x[0]=T$w[0]-T$O[0],T$x[1]=T$w[1]-T$O[1],T$x[2]=T$w[2]-T$O[2];},T$V.cross=function(T$L,T$s,T$m){var T$x=T$L.elements,T$w=T$s.elements,T$O=T$m.elements,T$v=T$x[0],T$y=T$x[1],T$F=T$x[2],T$o=T$w[0],T$V=T$w[1],T$C=T$w[2];T$O[0]=T$y*T$C-T$F*T$V,T$O[1]=T$F*T$o-T$v*T$C,T$O[2]=T$v*T$V-T$y*T$o;},T$V.dot=function(T$L,T$s){var T$m=T$L.elements,T$x=T$s.elements;return T$m[0]*T$x[0]+T$m[1]*T$x[1]+T$m[2]*T$x[2];},T$V.equals=function(T$L,T$s){var T$m=T$L.elements,T$x=T$s.elements;return T$zL.nearEqual(Math.abs(T$m[0]),Math.abs(T$x[0]))&&T$zL.nearEqual(Math.abs(T$m[1]),Math.abs(T$x[1]))&&T$zL.nearEqual(Math.abs(T$m[2]),Math.abs(T$x[2]));},T$V.ZERO=new T$V(0,0,0),T$V.ONE=new T$V(1,1,1),T$V.NegativeUnitX=new T$V(-1,0,0),T$V.UnitX=new T$V(1,0,0),T$V.UnitY=new T$V(0,1,0),T$V.UnitZ=new T$V(0,0,1),T$V.ForwardRH=new T$V(0,0,-1),T$V.ForwardLH=new T$V(0,0,1),T$V.Up=new T$V(0,1,0),T$V.NAN=new T$V(NaN,NaN,NaN),T$C(T$V,["_tempVector4",function(){return this._tempVector4=new T$ys();}]),T$V;}(),T$ys=function(){function T$L(T$L,T$s,T$m,T$x){this.elements=new Float32Array(4),void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0),void 0===T$x&&(T$x=0);var T$w=this.elements;T$w[0]=T$L,T$w[1]=T$s,T$w[2]=T$m,T$w[3]=T$x;}T$r(T$L,"laya.d3.math.Vector4");var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.core.IClone":!0}),T$s.fromArray=function(T$L,T$s){void 0===T$s&&(T$s=0),this.elements[0]=T$L[T$s+0],this.elements[1]=T$L[T$s+1],this.elements[2]=T$L[T$s+2],this.elements[3]=T$L[T$s+3];},T$s.cloneTo=function(T$L){var T$s=T$L.elements,T$m=this.elements;T$s[0]=T$m[0],T$s[1]=T$m[1],T$s[2]=T$m[2],T$s[3]=T$m[3];},T$s.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$s.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);},T$s.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w;},T$u(0,T$s,"x",function(){return this.elements[0];},function(T$L){this.elements[0]=T$L;}),T$u(0,T$s,"y",function(){return this.elements[1];},function(T$L){this.elements[1]=T$L;}),T$u(0,T$s,"z",function(){return this.elements[2];},function(T$L){this.elements[2]=T$L;}),T$u(0,T$s,"w",function(){return this.elements[3];},function(T$L){this.elements[3]=T$L;}),T$L.lerp=function(T$L,T$s,T$m,T$x){var T$w=T$x.elements,T$O=T$L.elements,T$v=T$s.elements,T$y=T$O[0],T$F=T$O[1],T$o=T$O[2],T$V=T$O[3];T$w[0]=T$y+T$m*(T$v[0]-T$y),T$w[1]=T$F+T$m*(T$v[1]-T$F),T$w[2]=T$o+T$m*(T$v[2]-T$o),T$w[3]=T$V+T$m*(T$v[3]-T$V);},T$L.transformByM4x4=function(T$L,T$s,T$m){var T$x=T$L.elements,T$w=T$x[0],T$O=T$x[1],T$v=T$x[2],T$y=T$x[3],T$F=T$s.elements,T$o=T$m.elements;T$o[0]=T$w*T$F[0]+T$O*T$F[4]+T$v*T$F[8]+T$y*T$F[12],T$o[1]=T$w*T$F[1]+T$O*T$F[5]+T$v*T$F[9]+T$y*T$F[13],T$o[2]=T$w*T$F[2]+T$O*T$F[6]+T$v*T$F[10]+T$y*T$F[14],T$o[3]=T$w*T$F[3]+T$O*T$F[7]+T$v*T$F[11]+T$y*T$F[15];},T$L.equals=function(T$L,T$s){var T$m=T$L.elements,T$x=T$s.elements;return T$zL.nearEqual(Math.abs(T$m[0]),Math.abs(T$x[0]))&&T$zL.nearEqual(Math.abs(T$m[1]),Math.abs(T$x[1]))&&T$zL.nearEqual(Math.abs(T$m[2]),Math.abs(T$x[2]))&&T$zL.nearEqual(Math.abs(T$m[3]),Math.abs(T$x[3]));},T$L.normalize=function(T$L,T$s){var T$m=T$L.elements,T$x=T$s.elements,T$w=T$L.length();0<T$w&&(T$x[0]=T$m[0]*T$w,T$x[1]=T$m[1]*T$w,T$x[2]=T$m[2]*T$w,T$x[3]=T$m[3]*T$w);},T$L.add=function(T$L,T$s,T$m){var T$x=T$m.elements,T$w=T$L.elements,T$O=T$s.elements;T$x[0]=T$w[0]+T$O[0],T$x[1]=T$w[1]+T$O[1],T$x[2]=T$w[2]+T$O[2],T$x[3]=T$w[3]+T$O[3];},T$L.subtract=function(T$L,T$s,T$m){var T$x=T$m.elements,T$w=T$L.elements,T$O=T$s.elements;T$x[0]=T$w[0]-T$O[0],T$x[1]=T$w[1]-T$O[1],T$x[2]=T$w[2]-T$O[2],T$x[3]=T$w[3]-T$O[3];},T$L.multiply=function(T$L,T$s,T$m){var T$x=T$m.elements,T$w=T$L.elements,T$O=T$s.elements;T$x[0]=T$w[0]*T$O[0],T$x[1]=T$w[1]*T$O[1],T$x[2]=T$w[2]*T$O[2],T$x[3]=T$w[3]*T$O[3];},T$L.scale=function(T$L,T$s,T$m){var T$x=T$m.elements,T$w=T$L.elements;T$x[0]=T$w[0]*T$s,T$x[1]=T$w[1]*T$s,T$x[2]=T$w[2]*T$s,T$x[3]=T$w[3]*T$s;},T$L.Clamp=function(T$L,T$s,T$m,T$x){var T$w=T$L.elements,T$O=T$w[0],T$v=T$w[1],T$y=T$w[2],T$F=T$w[3],T$o=T$s.elements,T$V=T$o[0],T$C=T$o[1],T$E=T$o[2],T$r=T$o[3],T$u=T$m.elements,T$T=T$u[0],T$j=T$u[1],T$D=T$u[2],T$e=T$u[3],T$b=T$x.elements;T$O=(T$O=T$T<T$O?T$T:T$O)<T$V?T$V:T$O,T$v=(T$v=T$j<T$v?T$j:T$v)<T$C?T$C:T$v,T$y=(T$y=T$D<T$y?T$D:T$y)<T$E?T$E:T$y,T$F=(T$F=T$e<T$F?T$e:T$F)<T$r?T$r:T$F,T$b[0]=T$O,T$b[1]=T$v,T$b[2]=T$y,T$b[3]=T$F;},T$L.distanceSquared=function(T$L,T$s){var T$m=T$L.elements,T$x=T$s.elements,T$w=T$m[0]-T$x[0],T$O=T$m[1]-T$x[1],T$v=T$m[2]-T$x[2],T$y=T$m[3]-T$x[3];return T$w*T$w+T$O*T$O+T$v*T$v+T$y*T$y;},T$L.distance=function(T$L,T$s){var T$m=T$L.elements,T$x=T$s.elements,T$w=T$m[0]-T$x[0],T$O=T$m[1]-T$x[1],T$v=T$m[2]-T$x[2],T$y=T$m[3]-T$x[3];return Math.sqrt(T$w*T$w+T$O*T$O+T$v*T$v+T$y*T$y);},T$L.dot=function(T$L,T$s){var T$m=T$L.elements,T$x=T$s.elements;return T$m[0]*T$x[0]+T$m[1]*T$x[1]+T$m[2]*T$x[2]+T$m[3]*T$x[3];},T$L.min=function(T$L,T$s,T$m){var T$x=T$m.elements,T$w=T$L.elements,T$O=T$s.elements;T$x[0]=Math.min(T$w[0],T$O[0]),T$x[1]=Math.min(T$w[1],T$O[1]),T$x[2]=Math.min(T$w[2],T$O[2]),T$x[3]=Math.min(T$w[3],T$O[3]);},T$L.max=function(T$L,T$s,T$m){var T$x=T$m.elements,T$w=T$L.elements,T$O=T$s.elements;T$x[0]=Math.max(T$w[0],T$O[0]),T$x[1]=Math.max(T$w[1],T$O[1]),T$x[2]=Math.max(T$w[2],T$O[2]),T$x[3]=Math.max(T$w[3],T$O[3]);},T$C(T$L,["ZERO",function(){return this.ZERO=new T$L();},"ONE",function(){return this.ONE=new T$L(1,1,1,1);},"UnitX",function(){return this.UnitX=new T$L(1,0,0,0);},"UnitY",function(){return this.UnitY=new T$L(0,1,0,0);},"UnitZ",function(){return this.UnitZ=new T$L(0,0,1,0);},"UnitW",function(){return this.UnitW=new T$L(0,0,0,1);}]),T$L;}(),T$Fs=function(){function T$O(T$L,T$s,T$m,T$x){this.minDepth=0,this.maxDepth=1,this.x=T$L,this.y=T$s,this.width=T$m,this.height=T$x;}T$r(T$O,"laya.d3.math.Viewport");var T$L=T$O.prototype;return T$L.project=function(T$L,T$s,T$m){T$vs.transformV3ToV3(T$L,T$s,T$m);var T$x=T$L.elements,T$w=T$s.elements,T$O=T$m.elements,T$v=T$x[0]*T$w[3]+T$x[1]*T$w[7]+T$x[2]*T$w[11]+T$w[15];1!==T$v&&(T$O[0]=T$O[0]/T$v,T$O[1]=T$O[1]/T$v,T$O[2]=T$O[2]/T$v),T$O[0]=.5*(T$O[0]+1)*this.width+this.x,T$O[1]=.5*(1-T$O[1])*this.height+this.y,T$O[2]=T$O[2]*(this.maxDepth-this.minDepth)+this.minDepth;},T$L.unprojectFromMat=function(T$L,T$s,T$m){var T$x=T$L.elements,T$w=T$s.elements,T$O=T$m.elements;T$O[0]=(T$x[0]-this.x)/this.width*2-1,T$O[1]=-((T$x[1]-this.y)/this.height*2-1);var T$v=(this.maxDepth-this.minDepth)/2;T$O[2]=(T$x[2]-this.minDepth-T$v)/T$v;var T$y=T$O[0]*T$w[3]+T$O[1]*T$w[7]+T$O[2]*T$w[11]+T$w[15];T$vs.transformV3ToV3(T$m,T$s,T$m),1!==T$y&&(T$O[0]=T$O[0]/T$y,T$O[1]=T$O[1]/T$y,T$O[2]=T$O[2]/T$y);},T$L.unprojectFromWVP=function(T$L,T$s,T$m,T$x,T$w){T$Ls.multiply(T$s,T$m,T$O._tempMatrix4x4),T$x&&T$Ls.multiply(T$O._tempMatrix4x4,T$x,T$O._tempMatrix4x4),T$O._tempMatrix4x4.invert(T$O._tempMatrix4x4),this.unprojectFromMat(T$L,T$O._tempMatrix4x4,T$w);},T$C(T$O,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new T$Ls();}]),T$O;}(),T$os=function(){function T$i(T$L){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=T$L,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[];}T$r(T$i,"laya.d3.resource.models.SubMesh");var T$L=T$i.prototype;return T$H.imps(T$L,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),T$L._getVertexBuffer=function(T$L){return void 0===T$L&&(T$L=0),0===T$L?this._vertexBuffer:null;},T$L._getIndexBuffer=function(){return this._indexBuffer;},T$L._getStaticBatchBakedVertexs=function(T$L,T$s){var T$m,T$x,T$w=this._vertexBuffer,T$O=T$w.vertexDeclaration,T$v=T$O.getVertexElementByUsage(0).offset/4,T$y=T$O.getVertexElementByUsage(3).offset/4,T$F=T$s.meshRender.lightmapScaleOffset,T$o=0,T$V=0,T$C=0,T$E=0,T$r=0,T$u=0;if(T$F){if(T$x=T$O.getVertexElementByUsage(15))T$C=T$O.vertexStride/4,T$m=0<this._vertexCount?T$w.getData().slice(this._vertexStart*T$C,(this._vertexStart+this._vertexCount)*T$C):T$w.getData().slice(),T$E=T$x.offset/4;else{T$C=(T$u=T$O.vertexStride/4)+2,T$m=this._vertexCount?new Float32Array(this._vertexCount*(T$w.vertexDeclaration.vertexStride/4+2)):new Float32Array(T$w.vertexCount*(T$w.vertexDeclaration.vertexStride/4+2)),T$E=(T$r=T$O.getVertexElementByUsage(2).offset/4)+2;var T$T=T$w.getData();for(T$o=0,T$V=T$T.length/T$u;T$o<T$V;T$o++){var T$j=0;T$j=0<this._vertexCount?(this._vertexStart+T$o)*T$u:T$o*T$u;var T$D=T$o*T$C,T$e=0;for(T$e=0;T$e<T$E;T$e++)T$m[T$D+T$e]=T$T[T$j+T$e];for(T$e=T$E;T$e<T$u;T$e++)T$m[T$D+T$e+2]=T$T[T$j+T$e];}}}else T$C=T$O.vertexStride/4,T$m=this._vertexCount?T$w.getData().slice(this._vertexStart*T$C,(this._vertexStart+this._vertexCount)*T$C):T$w.getData().slice();if(T$L){var T$b=T$L.worldMatrix,T$S=T$i._tempMatrix4x40;T$b.invert(T$S);var T$H=T$i._tempMatrix4x41,T$Y=T$s.transform.worldMatrix;T$Ls.multiply(T$S,T$Y,T$H);}else T$H=T$s.transform.worldMatrix;var T$a=T$i._tempQuaternion0;for(T$H.decomposeTransRotScale(T$i._tempVector30,T$a,T$i._tempVector31),T$o=0,T$V=T$m.length/T$C;T$o<T$V;T$o++){var T$f=T$o*T$C+T$v,T$_=T$o*T$C+T$y;if(T$js.transformVector3ArrayToVector3ArrayCoordinate(T$m,T$f,T$H,T$m,T$f),T$js.transformVector3ArrayByQuat(T$m,T$_,T$a,T$m,T$_),T$F){var T$Q=T$o*T$C+T$E;if(T$x)T$js.transformLightingMapTexcoordByUV1Array(T$m,T$Q,T$F,T$m,T$Q);else{var T$N=T$o*T$u+T$r;T$js.transformLightingMapTexcoordByUV0Array(T$T,T$N,T$F,T$m,T$Q);}}}return T$m;},T$L._getVertexBuffers=function(){return null;},T$L._beforeRender=function(T$L){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0;},T$L._render=function(T$L){var T$s,T$m=0,T$x=T$L.renderElement;if(1<this._indexCount){var T$w=this._boneIndicesList.length;if(1<T$w){for(var T$O=0;T$O<T$w;T$O++)(T$s=T$x._skinAnimationDatas||this._skinAnimationDatas)&&(T$x._shaderValue.setValue(0,T$s[T$O]),T$L._shader.uploadRenderElementUniforms(T$x._shaderValue.data)),T$U.mainContext.drawElements(4,this._subIndexBufferCount[T$O],5123,2*this._subIndexBufferStart[T$O]);T$f.drawCall+=T$w;}else(T$s=T$x._skinAnimationDatas||this._skinAnimationDatas)&&(T$x._shaderValue.setValue(0,T$s[0]),T$L._shader.uploadRenderElementUniforms(T$x._shaderValue.data)),T$U.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),T$f.drawCall++;T$m=this._indexCount;}else T$m=this._indexBuffer.indexCount,(T$s=T$x._skinAnimationDatas||this._skinAnimationDatas)&&(T$x._shaderValue.setValue(0,T$s[0]),T$L._shader.uploadRenderElementUniforms(T$x._shaderValue.data)),T$U.mainContext.drawElements(4,T$m,5123,0),T$f.drawCall++;T$f.trianglesFaces+=T$m/3;},T$L.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData();},T$L.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null;},T$u(0,T$L,"_vertexBufferCount",function(){return 1;}),T$u(0,T$L,"triangleCount",function(){return this._indexBuffer.indexCount/3;}),T$C(T$i,["_tempVector30",function(){return this._tempVector30=new T$vs();},"_tempVector31",function(){return this._tempVector31=new T$vs();},"_tempQuaternion0",function(){return this._tempQuaternion0=new T$ms();},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new T$Ls();},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new T$Ls();}]),T$i;}(),T$Vs=function(){function T$L(T$L){this.defineCounter=0,this.defines=null,T$L?(this.defineCounter=T$L.defineCounter,this.defines=T$L.defines.slice()):(this.defineCounter=0,this.defines=[]);}return T$r(T$L,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),T$L.prototype.registerDefine=function(T$L){var T$s=Math.pow(2,this.defineCounter++);return this.defines[T$s]=T$L,T$s;},T$L;}(),T$Cs=function(){function T$L(){}return T$r(T$L,"laya.d3.shader.ShaderInit3D"),T$L.__init__=function(){var T$L,T$s;T$fs._globalRegDefine("HIGHPRECISION",T$fs.SHADERDEFINE_HIGHPRECISION),T$fs._globalRegDefine("FOG",T$fs.SHADERDEFINE_FOG),T$fs._globalRegDefine("DIRECTIONLIGHT",T$fs.SHADERDEFINE_DIRECTIONLIGHT),T$fs._globalRegDefine("POINTLIGHT",T$fs.SHADERDEFINE_POINTLIGHT),T$fs._globalRegDefine("SPOTLIGHT",T$fs.SHADERDEFINE_SPOTLIGHT),T$fs._globalRegDefine("UV",T$fs.SHADERDEFINE_UV0),T$fs._globalRegDefine("COLOR",T$fs.SHADERDEFINE_COLOR),T$fs._globalRegDefine("UV1",T$fs.SHADERDEFINE_UV1),T$fs._globalRegDefine("CASTSHADOW",T$rs.SHADERDEFINE_CAST_SHADOW),T$fs._globalRegDefine("SHADOWMAP_PSSM1",T$rs.SHADERDEFINE_SHADOW_PSSM1),T$fs._globalRegDefine("SHADOWMAP_PSSM2",T$rs.SHADERDEFINE_SHADOW_PSSM2),T$fs._globalRegDefine("SHADOWMAP_PSSM3",T$rs.SHADERDEFINE_SHADOW_PSSM3),T$fs._globalRegDefine("SHADOWMAP_PCF_NO",T$rs.SHADERDEFINE_SHADOW_PCF_NO),T$fs._globalRegDefine("SHADOWMAP_PCF1",T$rs.SHADERDEFINE_SHADOW_PCF1),T$fs._globalRegDefine("SHADOWMAP_PCF2",T$rs.SHADERDEFINE_SHADOW_PCF2),T$fs._globalRegDefine("SHADOWMAP_PCF3",T$rs.SHADERDEFINE_SHADOW_PCF3),T$fs._globalRegDefine("DEPTHFOG",T$fs.SAHDERDEFINE_DEPTHFOG),T$gs.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),T$gs.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),T$L={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},T$s={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var T$m=T$gs.nameKey.add("SIMPLE");shaderCompile=T$fs.add(T$m,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',T$L,T$s),T$$s.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),T$$s.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),T$$s.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),T$$s.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),T$$s.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),T$$s.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),T$$s.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),T$$s.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),T$$s.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG");},T$L;}(),T$Es=function(){function T$L(){this._data=null,this._data=[];}T$r(T$L,"laya.d3.shader.ValusArray");var T$s=T$L.prototype;return T$s.setValue=function(T$L,T$s){this._data[T$L]=T$s;},T$u(0,T$s,"data",function(){return this._data;}),T$L;}(),T$rs=function(){function T$L(){}return T$L.SHADERDEFINE_RECEIVE_SHADOW=1,T$L.SHADERDEFINE_CAST_SHADOW=512,T$L.SHADERDEFINE_SHADOW_PSSM1=1024,T$L.SHADERDEFINE_SHADOW_PSSM2=2048,T$L.SHADERDEFINE_SHADOW_PSSM3=4096,T$L.SHADERDEFINE_SHADOW_PCF_NO=8192,T$L.SHADERDEFINE_SHADOW_PCF1=16384,T$L.SHADERDEFINE_SHADOW_PCF2=32768,T$L.SHADERDEFINE_SHADOW_PCF3=65536,T$L.MAX_PSSM_COUNT=3,T$L;}(),T$us=function(){function T$K(){}return T$r(T$K,"laya.d3.utils.Picker"),T$K.calculateCursorRay=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v=T$L.elements[0],T$y=T$L.elements[1],T$F=T$K._tempVector30,T$o=T$F.elements;T$o[0]=T$v,T$o[1]=T$y,T$o[2]=T$s.minDepth;var T$V=T$K._tempVector31,T$C=T$V.elements;T$C[0]=T$v,T$C[1]=T$y,T$C[2]=T$s.maxDepth;var T$E=T$O.origin,T$r=T$K._tempVector32;T$s.unprojectFromWVP(T$F,T$m,T$x,T$w,T$E),T$s.unprojectFromWVP(T$V,T$m,T$x,T$w,T$r);var T$u=T$O.direction.elements;T$u[0]=T$r.x-T$E.x,T$u[1]=T$r.y-T$E.y,T$u[2]=T$r.z-T$E.z,T$vs.normalize(T$O.direction,T$O.direction);},T$K.rayIntersectsPositionsAndIndices=function(T$L,T$s,T$m,T$x,T$w){for(var T$O=T$m.vertexStride/4,T$v=T$m.getVertexElementByUsage(0).offset/4,T$y=Number.MAX_VALUE,T$F=-1,T$o=-1,T$V=-1,T$C=0;T$C<T$x.length;T$C+=3){var T$E=T$K._tempVector35,T$r=T$E.elements,T$u=T$x[T$C]*T$O,T$T=T$u+T$v;T$r[0]=T$s[T$T],T$r[1]=T$s[1+T$T],T$r[2]=T$s[2+T$T];var T$j=T$K._tempVector36,T$D=T$j.elements,T$e=T$x[T$C+1]*T$O,T$b=T$e+T$v;T$D[0]=T$s[T$b],T$D[1]=T$s[1+T$b],T$D[2]=T$s[2+T$b];var T$S=T$K._tempVector37,T$H=T$S.elements,T$Y=T$x[T$C+2]*T$O,T$a=T$Y+T$v;T$H[0]=T$s[T$a],T$H[1]=T$s[1+T$a],T$H[2]=T$s[2+T$a];var T$f=laya.d3.utils.Picker.rayIntersectsTriangle(T$L,T$E,T$j,T$S);!isNaN(T$f)&&T$f<T$y&&(T$y=T$f,T$F=T$u,T$o=T$e,T$V=T$Y);}if(T$y===Number.MAX_VALUE)return T$w.position.toDefault(),T$w.distance=Number.MAX_VALUE,T$w.trianglePositions[0].toDefault(),T$w.trianglePositions[1].toDefault(),T$w.trianglePositions[2].toDefault(),T$w.triangleNormals[0].toDefault(),T$w.triangleNormals[1].toDefault(),T$w.triangleNormals[2].toDefault(),!1;T$w.distance=T$y,T$vs.scale(T$L.direction,T$y,T$w.position),T$vs.add(T$L.origin,T$w.position,T$w.position);var T$_=T$w.trianglePositions,T$Q=T$_[0],T$N=T$_[1],T$i=T$_[2],T$U=T$Q.elements,T$c=T$N.elements,T$h=T$i.elements,T$G=T$F+T$v;T$U[0]=T$s[T$G],T$U[1]=T$s[T$G+1],T$U[2]=T$s[T$G+2];var T$R=T$o+T$v;T$c[0]=T$s[T$R],T$c[1]=T$s[T$R+1],T$c[2]=T$s[T$R+2];var T$A=T$V+T$v;T$h[0]=T$s[T$A],T$h[1]=T$s[T$A+1],T$h[2]=T$s[T$A+2];var T$g=T$m.getVertexElementByUsage(3);if(T$g){var T$$=T$g.offset/4,T$p=T$w.triangleNormals,T$Z=T$p[0],T$W=T$p[1],T$d=T$p[2],T$X=T$Z.elements,T$I=T$W.elements,T$n=T$d.elements,T$J=T$F+T$$;T$X[0]=T$s[T$J],T$X[1]=T$s[T$J+1],T$X[2]=T$s[T$J+2];var T$l=T$o+T$$;T$I[0]=T$s[T$l],T$I[1]=T$s[T$l+1],T$I[2]=T$s[T$l+2];var T$q=T$V+T$$;T$n[0]=T$s[T$q],T$n[1]=T$s[T$q+1],T$n[2]=T$s[T$q+2];}return!0;},T$K.rayIntersectsTriangle=function(T$L,T$s,T$m,T$x){var T$w=T$K._tempVector30,T$O=T$K._tempVector31;T$vs.subtract(T$m,T$s,T$w),T$vs.subtract(T$x,T$s,T$O);var T$v,T$y=T$K._tempVector32;if(T$vs.cross(T$L.direction,T$O,T$y),(T$v=T$vs.dot(T$w,T$y))>-Number.MIN_VALUE&&T$v<Number.MIN_VALUE)return Number.NaN;var T$F,T$o=1/T$v,T$V=T$K._tempVector33;if(T$vs.subtract(T$L.origin,T$s,T$V),T$F=T$vs.dot(T$V,T$y),(T$F*=T$o)<0||1<T$F)return Number.NaN;var T$C,T$E,T$r=T$K._tempVector34;return T$vs.cross(T$V,T$w,T$r),T$C=T$vs.dot(T$L.direction,T$r),(T$C*=T$o)<0||1<T$F+T$C?Number.NaN:(T$E=T$vs.dot(T$O,T$r),(T$E*=T$o)<0?Number.NaN:T$E);},T$C(T$K,["_tempVector30",function(){return this._tempVector30=new T$vs();},"_tempVector31",function(){return this._tempVector31=new T$vs();},"_tempVector32",function(){return this._tempVector32=new T$vs();},"_tempVector33",function(){return this._tempVector33=new T$vs();},"_tempVector34",function(){return this._tempVector34=new T$vs();},"_tempVector35",function(){return this._tempVector35=new T$vs();},"_tempVector36",function(){return this._tempVector36=new T$vs();},"_tempVector37",function(){return this._tempVector37=new T$vs();}]),T$K;}(),T$Ts=(function(){function T$L(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new T$vs(),new T$vs(),new T$vs()],this.trianglePositions.length=3,this.triangleNormals=[new T$vs(),new T$vs(),new T$vs()],this.triangleNormals.length=3,this.position=new T$vs();}T$r(T$L,"laya.d3.utils.RaycastHit"),T$L.prototype.cloneTo=function(T$L){T$L.distance=this.distance,this.trianglePositions[0].cloneTo(T$L.trianglePositions[0]),this.trianglePositions[1].cloneTo(T$L.trianglePositions[1]),this.trianglePositions[2].cloneTo(T$L.trianglePositions[2]),this.triangleNormals[0].cloneTo(T$L.triangleNormals[0]),this.triangleNormals[1].cloneTo(T$L.triangleNormals[1]),this.triangleNormals[2].cloneTo(T$L.triangleNormals[2]),this.position.cloneTo(T$L.position),T$L.sprite3D=this.sprite3D;};}(),function(){function T$L(T$L,T$s){this._width=0,this._height=0,this._width=T$L,this._height=T$s;}T$r(T$L,"laya.d3.utils.Size");var T$s=T$L.prototype;return T$u(0,T$s,"width",function(){return-1===this._width?T$P.clientWidth:this._width;}),T$u(0,T$s,"height",function(){return-1===this._height?T$P.clientHeight:this._height;}),T$u(1,T$L,"fullScreen",function(){return new T$L(-1,-1);}),T$L;}()),T$js=function(){function T$G(){}return T$r(T$G,"laya.d3.utils.Utils3D"),T$G._rotationTransformScaleSkinAnimation=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o,T$V,T$C){var T$E,T$r,T$u,T$T,T$j,T$D=T$G._tempArray16_0,T$e=T$G._tempArray16_1,T$b=T$G._tempArray16_2,T$S=T$x+T$x,T$H=T$w+T$w,T$Y=T$O+T$O,T$a=T$x*T$S,T$f=T$w*T$S,T$_=T$w*T$H,T$Q=T$O*T$S,T$N=T$O*T$H,T$i=T$O*T$Y,T$U=T$v*T$S,T$c=T$v*T$H,T$h=T$v*T$Y;for(T$D[15]=1,T$D[0]=1-T$_-T$i,T$D[1]=T$f+T$h,T$D[2]=T$Q-T$c,T$D[4]=T$f-T$h,T$D[5]=1-T$a-T$i,T$D[6]=T$N+T$U,T$D[8]=T$Q+T$c,T$D[9]=T$N-T$U,T$D[10]=1-T$a-T$_,T$e[15]=1,T$e[0]=T$y,T$e[5]=T$F,T$e[10]=T$o,T$E=0;T$E<4;T$E++)T$r=T$D[T$E],T$u=T$D[T$E+4],T$T=T$D[T$E+8],T$j=T$D[T$E+12],T$b[T$E]=T$r,T$b[T$E+4]=T$u,T$b[T$E+8]=T$T,T$b[T$E+12]=T$r*T$L+T$u*T$s+T$T*T$m+T$j;for(T$E=0;T$E<4;T$E++)T$r=T$b[T$E],T$u=T$b[T$E+4],T$T=T$b[T$E+8],T$j=T$b[T$E+12],T$V[T$E+T$C]=T$r*T$e[0]+T$u*T$e[1]+T$T*T$e[2]+T$j*T$e[3],T$V[T$E+T$C+4]=T$r*T$e[4]+T$u*T$e[5]+T$T*T$e[6]+T$j*T$e[7],T$V[T$E+T$C+8]=T$r*T$e[8]+T$u*T$e[9]+T$T*T$e[10]+T$j*T$e[11],T$V[T$E+T$C+12]=T$r*T$e[12]+T$u*T$e[13]+T$T*T$e[14]+T$j*T$e[15];},T$G._createNodeByJson=function(T$L,T$s,T$m,T$x){if(!T$m)switch(T$s.type){case"Sprite3D":T$m=new T$As();break;case"MeshSprite3D":T$m=new T$Ks();break;case"SkinnedMeshSprite3D":T$m=new SkinnedMeshSprite3D();break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":T$m=new ShuriKenParticle3D();break;case"TrailSprite3D":T$m=new TrailSprite3D();break;case"Terrain":T$m=new Terrain();break;case"Camera":T$m=new T$qs();break;case"DirectionLight":T$m=new DirectionLight();break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.");}var T$w=T$s.props;if(T$w)for(var T$O in T$w)T$m[T$O]=T$w[T$O];var T$v=T$s.customProps;T$v&&(T$m instanceof laya.d3.core.Sprite3D?(T$m._parseBaseCustomProps(T$v),T$m._parseCustomProps(T$L,T$x,T$v,T$s),T$m._parseCustomComponent(T$L,T$x,T$s.components)):T$m._parseCustomProps(T$L,T$x,T$v,T$s));var T$y=T$s.child;if(T$y)for(var T$F=0,T$o=T$y.length;T$F<T$o;T$F++){var T$V=T$G._createNodeByJson(T$L,T$y[T$F],null,T$x);T$m.addChild(T$V);}return T$m;},T$G._computeBoneAndAnimationDatasByBindPoseMatrxix=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v,T$y,T$F=0,T$o=0,T$V=T$L.length;for(T$v=0;T$v<T$V;T$F+=T$L[T$v].keyframeWidth,T$o+=16,T$v++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(T$s[T$F+0],T$s[T$F+1],T$s[T$F+2],T$s[T$F+3],T$s[T$F+4],T$s[T$F+5],T$s[T$F+6],T$s[T$F+7],T$s[T$F+8],T$s[T$F+9],T$x,T$o),0!=T$v&&(T$y=16*T$L[T$v].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(T$x,T$y,T$x,T$o,T$x,T$o));var T$C=T$m.length;for(T$v=0;T$v<T$C;T$v++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(T$x,16*T$O[T$v],T$m[T$v],T$w,16*T$v);},T$G._computeAnimationDatasByArrayAndMatrixFast=function(T$L,T$s,T$m,T$x){for(var T$w=0,T$O=T$L.length;T$w<T$O;T$w++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(T$s,16*T$x[T$w],T$L[T$w],T$m,16*T$w);},T$G._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(T$L,T$s,T$m,T$x,T$w){var T$O,T$v,T$y=0,T$F=0,T$o=T$L.length;for(T$O=0;T$O<T$o;T$y+=T$L[T$O].keyframeWidth,T$F+=16,T$O++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(T$s[T$y+7],T$s[T$y+8],T$s[T$y+9],T$s[T$y+3],T$s[T$y+4],T$s[T$y+5],T$s[T$y+6],T$s[T$y+0],T$s[T$y+1],T$s[T$y+2],T$x,T$F),0!=T$O&&(T$v=16*T$L[T$O].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(T$x,T$v,T$x,T$F,T$x,T$F));var T$V=T$m.length;for(T$O=0;T$O<T$V;T$O++){var T$C=16*T$O;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(T$x,T$C,T$m[T$O],T$w,T$C);}},T$G._computeAnimationDatasByArrayAndMatrixFastOld=function(T$L,T$s,T$m){for(var T$x=T$L.length,T$w=0;T$w<T$x;T$w++){var T$O=16*T$w;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(T$s,T$O,T$L[T$w],T$m,T$O);}},T$G._computeRootAnimationData=function(T$L,T$s,T$m){for(var T$x=0,T$w=0,T$O=0,T$v=T$L.length;T$x<T$v;T$w+=T$L[T$x].keyframeWidth,T$O+=16,T$x++)laya.d3.utils.Utils3D.createAffineTransformationArray(T$s[T$w+0],T$s[T$w+1],T$s[T$w+2],T$s[T$w+3],T$s[T$w+4],T$s[T$w+5],T$s[T$w+6],T$s[T$w+7],T$s[T$w+8],T$s[T$w+9],T$m,T$O);},T$G.transformVector3ArrayByQuat=function(T$L,T$s,T$m,T$x,T$w){var T$O=T$m.elements,T$v=T$L[T$s],T$y=T$L[T$s+1],T$F=T$L[T$s+2],T$o=T$O[0],T$V=T$O[1],T$C=T$O[2],T$E=T$O[3],T$r=T$E*T$v+T$V*T$F-T$C*T$y,T$u=T$E*T$y+T$C*T$v-T$o*T$F,T$T=T$E*T$F+T$o*T$y-T$V*T$v,T$j=-T$o*T$v-T$V*T$y-T$C*T$F;T$x[T$w]=T$r*T$E+T$j*-T$o+T$u*-T$C-T$T*-T$V,T$x[T$w+1]=T$u*T$E+T$j*-T$V+T$T*-T$o-T$r*-T$C,T$x[T$w+2]=T$T*T$E+T$j*-T$C+T$r*-T$V-T$u*-T$o;},T$G.mulMatrixByArray=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v,T$y,T$F,T$o,T$V;if(T$w===T$m){for(T$m=T$G._tempArray16_3,T$v=0;T$v<16;++T$v)T$m[T$v]=T$w[T$O+T$v];T$x=0;}for(T$v=0;T$v<4;T$v++)T$y=T$L[T$s+T$v],T$F=T$L[T$s+T$v+4],T$o=T$L[T$s+T$v+8],T$V=T$L[T$s+T$v+12],T$w[T$O+T$v]=T$y*T$m[T$x+0]+T$F*T$m[T$x+1]+T$o*T$m[T$x+2]+T$V*T$m[T$x+3],T$w[T$O+T$v+4]=T$y*T$m[T$x+4]+T$F*T$m[T$x+5]+T$o*T$m[T$x+6]+T$V*T$m[T$x+7],T$w[T$O+T$v+8]=T$y*T$m[T$x+8]+T$F*T$m[T$x+9]+T$o*T$m[T$x+10]+T$V*T$m[T$x+11],T$w[T$O+T$v+12]=T$y*T$m[T$x+12]+T$F*T$m[T$x+13]+T$o*T$m[T$x+14]+T$V*T$m[T$x+15];},T$G.mulMatrixByArrayFast=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v,T$y,T$F,T$o,T$V;for(T$v=0;T$v<4;T$v++)T$y=T$L[T$s+T$v],T$F=T$L[T$s+T$v+4],T$o=T$L[T$s+T$v+8],T$V=T$L[T$s+T$v+12],T$w[T$O+T$v]=T$y*T$m[T$x+0]+T$F*T$m[T$x+1]+T$o*T$m[T$x+2]+T$V*T$m[T$x+3],T$w[T$O+T$v+4]=T$y*T$m[T$x+4]+T$F*T$m[T$x+5]+T$o*T$m[T$x+6]+T$V*T$m[T$x+7],T$w[T$O+T$v+8]=T$y*T$m[T$x+8]+T$F*T$m[T$x+9]+T$o*T$m[T$x+10]+T$V*T$m[T$x+11],T$w[T$O+T$v+12]=T$y*T$m[T$x+12]+T$F*T$m[T$x+13]+T$o*T$m[T$x+14]+T$V*T$m[T$x+15];},T$G.mulMatrixByArrayAndMatrixFast=function(T$L,T$s,T$m,T$x,T$w){var T$O,T$v,T$y,T$F,T$o,T$V=T$m.elements,T$C=T$V[0],T$E=T$V[1],T$r=T$V[2],T$u=T$V[3],T$T=T$V[4],T$j=T$V[5],T$D=T$V[6],T$e=T$V[7],T$b=T$V[8],T$S=T$V[9],T$H=T$V[10],T$Y=T$V[11],T$a=T$V[12],T$f=T$V[13],T$_=T$V[14],T$Q=T$V[15],T$N=T$s,T$i=T$s+4,T$U=T$s+8,T$c=T$s+12,T$h=T$w,T$G=T$w+4,T$R=T$w+8,T$A=T$w+12;for(T$O=0;T$O<4;T$O++)T$v=T$L[T$N+T$O],T$y=T$L[T$i+T$O],T$F=T$L[T$U+T$O],T$o=T$L[T$c+T$O],T$x[T$h+T$O]=T$v*T$C+T$y*T$E+T$F*T$r+T$o*T$u,T$x[T$G+T$O]=T$v*T$T+T$y*T$j+T$F*T$D+T$o*T$e,T$x[T$R+T$O]=T$v*T$b+T$y*T$S+T$F*T$H+T$o*T$Y,T$x[T$A+T$O]=T$v*T$a+T$y*T$f+T$F*T$_+T$o*T$Q;},T$G.createAffineTransformationArray=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o,T$V,T$C){var T$E=T$x+T$x,T$r=T$w+T$w,T$u=T$O+T$O,T$T=T$x*T$E,T$j=T$x*T$r,T$D=T$x*T$u,T$e=T$w*T$r,T$b=T$w*T$u,T$S=T$O*T$u,T$H=T$v*T$E,T$Y=T$v*T$r,T$a=T$v*T$u;T$V[T$C+0]=(1-(T$e+T$S))*T$y,T$V[T$C+1]=(T$j+T$a)*T$y,T$V[T$C+2]=(T$D-T$Y)*T$y,T$V[T$C+3]=0,T$V[T$C+4]=(T$j-T$a)*T$F,T$V[T$C+5]=(1-(T$T+T$S))*T$F,T$V[T$C+6]=(T$b+T$H)*T$F,T$V[T$C+7]=0,T$V[T$C+8]=(T$D+T$Y)*T$o,T$V[T$C+9]=(T$b-T$H)*T$o,T$V[T$C+10]=(1-(T$T+T$e))*T$o,T$V[T$C+11]=0,T$V[T$C+12]=T$L,T$V[T$C+13]=T$s,T$V[T$C+14]=T$m,T$V[T$C+15]=1;},T$G.transformVector3ArrayToVector3ArrayCoordinate=function(T$L,T$s,T$m,T$x,T$w){var T$O=T$G._tempArray4_0,T$v=T$L[T$s+0],T$y=T$L[T$s+1],T$F=T$L[T$s+2],T$o=T$m.elements;T$O[0]=T$v*T$o[0]+T$y*T$o[4]+T$F*T$o[8]+T$o[12],T$O[1]=T$v*T$o[1]+T$y*T$o[5]+T$F*T$o[9]+T$o[13],T$O[2]=T$v*T$o[2]+T$y*T$o[6]+T$F*T$o[10]+T$o[14],T$O[3]=1/(T$v*T$o[3]+T$y*T$o[7]+T$F*T$o[11]+T$o[15]),T$x[T$w+0]=T$O[0]*T$O[3],T$x[T$w+1]=T$O[1]*T$O[3],T$x[T$w+2]=T$O[2]*T$O[3];},T$G.transformLightingMapTexcoordByUV0Array=function(T$L,T$s,T$m,T$x,T$w){var T$O=T$m.elements;T$x[T$w+0]=T$L[T$s+0]*T$O[0]+T$O[2],T$x[T$w+1]=(T$L[T$s+1]-1)*T$O[1]+T$O[3];},T$G.transformLightingMapTexcoordByUV1Array=function(T$L,T$s,T$m,T$x,T$w){var T$O=T$m.elements;T$x[T$w+0]=T$L[T$s+0]*T$O[0]+T$O[2],T$x[T$w+1]=1+T$L[T$s+1]*T$O[1]+T$O[3];},T$G.getURLVerion=function(T$L){var T$s=T$L.indexOf("?");return 0<=T$s?T$L.substr(T$s):null;},T$G._quaternionCreateFromYawPitchRollArray=function(T$L,T$s,T$m,T$x){var T$w=.5*T$m,T$O=.5*T$s,T$v=.5*T$L,T$y=Math.sin(T$w),T$F=Math.cos(T$w),T$o=Math.sin(T$O),T$V=Math.cos(T$O),T$C=Math.sin(T$v),T$E=Math.cos(T$v);T$x[0]=T$E*T$o*T$F+T$C*T$V*T$y,T$x[1]=T$C*T$V*T$F-T$E*T$o*T$y,T$x[2]=T$E*T$V*T$y-T$C*T$o*T$F,T$x[3]=T$E*T$V*T$F+T$C*T$o*T$y;},T$G._createAffineTransformationArray=function(T$L,T$s,T$m,T$x){var T$w=T$s[0],T$O=T$s[1],T$v=T$s[2],T$y=T$s[3],T$F=T$w+T$w,T$o=T$O+T$O,T$V=T$v+T$v,T$C=T$w*T$F,T$E=T$w*T$o,T$r=T$w*T$V,T$u=T$O*T$o,T$T=T$O*T$V,T$j=T$v*T$V,T$D=T$y*T$F,T$e=T$y*T$o,T$b=T$y*T$V,T$S=T$m[0],T$H=T$m[1],T$Y=T$m[2];T$x[0]=(1-(T$u+T$j))*T$S,T$x[1]=(T$E+T$b)*T$S,T$x[2]=(T$r-T$e)*T$S,T$x[3]=0,T$x[4]=(T$E-T$b)*T$H,T$x[5]=(1-(T$C+T$j))*T$H,T$x[6]=(T$T+T$D)*T$H,T$x[7]=0,T$x[8]=(T$r+T$e)*T$Y,T$x[9]=(T$T-T$D)*T$Y,T$x[10]=(1-(T$C+T$u))*T$Y,T$x[11]=0,T$x[12]=T$L[0],T$x[13]=T$L[1],T$x[14]=T$L[2],T$x[15]=1;},T$G._mulMatrixArray=function(T$L,T$s,T$m,T$x){var T$w,T$O,T$v,T$y,T$F,T$o=T$s.elements,T$V=T$o[0],T$C=T$o[1],T$E=T$o[2],T$r=T$o[3],T$u=T$o[4],T$T=T$o[5],T$j=T$o[6],T$D=T$o[7],T$e=T$o[8],T$b=T$o[9],T$S=T$o[10],T$H=T$o[11],T$Y=T$o[12],T$a=T$o[13],T$f=T$o[14],T$_=T$o[15],T$Q=T$x,T$N=T$x+4,T$i=T$x+8,T$U=T$x+12;for(T$w=0;T$w<4;T$w++)T$O=T$L[T$w],T$v=T$L[T$w+4],T$y=T$L[T$w+8],T$F=T$L[T$w+12],T$m[T$Q+T$w]=T$O*T$V+T$v*T$C+T$y*T$E+T$F*T$r,T$m[T$N+T$w]=T$O*T$u+T$v*T$T+T$y*T$j+T$F*T$D,T$m[T$i+T$w]=T$O*T$e+T$v*T$b+T$y*T$S+T$F*T$H,T$m[T$U+T$w]=T$O*T$Y+T$v*T$a+T$y*T$f+T$F*T$_;},T$G.getYawPitchRoll=function(T$L,T$s){T$G.transformQuat(T$vs.ForwardRH,T$L,T$ms.TEMPVector31),T$G.transformQuat(T$vs.Up,T$L,T$ms.TEMPVector32);var T$m=T$ms.TEMPVector32.elements;T$G.angleTo(T$vs.ZERO,T$ms.TEMPVector31,T$ms.TEMPVector33);var T$x=T$ms.TEMPVector33.elements;T$x[0]==Math.PI/2?(T$x[1]=T$G.arcTanAngle(T$m[2],T$m[0]),T$x[2]=0):T$x[0]==-Math.PI/2?(T$x[1]=T$G.arcTanAngle(-T$m[2],-T$m[0]),T$x[2]=0):(T$Ls.createRotationY(-T$x[1],T$ms.TEMPMatrix0),T$Ls.createRotationX(-T$x[0],T$ms.TEMPMatrix1),T$vs.transformCoordinate(T$ms.TEMPVector32,T$ms.TEMPMatrix0,T$ms.TEMPVector32),T$vs.transformCoordinate(T$ms.TEMPVector32,T$ms.TEMPMatrix1,T$ms.TEMPVector32),T$x[2]=T$G.arcTanAngle(T$m[1],-T$m[0])),T$x[1]<=-Math.PI&&(T$x[1]=Math.PI),T$x[2]<=-Math.PI&&(T$x[2]=Math.PI),T$x[1]>=Math.PI&&T$x[2]>=Math.PI&&(T$x[1]=0,T$x[2]=0,T$x[0]=Math.PI-T$x[0]),T$s[0]=T$x[1],T$s[1]=T$x[0],T$s[2]=T$x[2];},T$G.arcTanAngle=function(T$L,T$s){return 0==T$L?1==T$s?Math.PI/2:-Math.PI/2:0<T$L?Math.atan(T$s/T$L):T$L<0?0<T$s?Math.atan(T$s/T$L)+Math.PI:Math.atan(T$s/T$L)-Math.PI:0;},T$G.angleTo=function(T$L,T$s,T$m){T$vs.subtract(T$s,T$L,T$ms.TEMPVector30),T$vs.normalize(T$ms.TEMPVector30,T$ms.TEMPVector30),T$m.elements[0]=Math.asin(T$ms.TEMPVector30.y),T$m.elements[1]=T$G.arcTanAngle(-T$ms.TEMPVector30.z,-T$ms.TEMPVector30.x);},T$G.transformQuat=function(T$L,T$s,T$m){var T$x=T$m.elements,T$w=T$L.elements,T$O=T$s,T$v=T$w[0],T$y=T$w[1],T$F=T$w[2],T$o=T$O[0],T$V=T$O[1],T$C=T$O[2],T$E=T$O[3],T$r=T$E*T$v+T$V*T$F-T$C*T$y,T$u=T$E*T$y+T$C*T$v-T$o*T$F,T$T=T$E*T$F+T$o*T$y-T$V*T$v,T$j=-T$o*T$v-T$V*T$y-T$C*T$F;T$x[0]=T$r*T$E+T$j*-T$o+T$u*-T$C-T$T*-T$V,T$x[1]=T$u*T$E+T$j*-T$V+T$T*-T$o-T$r*-T$C,T$x[2]=T$T*T$E+T$j*-T$C+T$r*-T$V-T$u*-T$o;},T$G.quaterionNormalize=function(T$L,T$s){var T$m=T$L[0],T$x=T$L[1],T$w=T$L[2],T$O=T$L[3],T$v=T$m*T$m+T$x*T$x+T$w*T$w+T$O*T$O;0<T$v&&(T$v=1/Math.sqrt(T$v),T$s[0]=T$m*T$v,T$s[1]=T$x*T$v,T$s[2]=T$w*T$v,T$s[3]=T$O*T$v);},T$G.matrix4x4MultiplyFFF=function(T$L,T$s,T$m){var T$x,T$w,T$O,T$v,T$y;if(T$m===T$s)for(T$s=new Float32Array(16),T$x=0;T$x<16;++T$x)T$s[T$x]=T$m[T$x];for(T$x=0;T$x<4;T$x++)T$w=T$L[T$x],T$O=T$L[T$x+4],T$v=T$L[T$x+8],T$y=T$L[T$x+12],T$m[T$x]=T$w*T$s[0]+T$O*T$s[1]+T$v*T$s[2]+T$y*T$s[3],T$m[T$x+4]=T$w*T$s[4]+T$O*T$s[5]+T$v*T$s[6]+T$y*T$s[7],T$m[T$x+8]=T$w*T$s[8]+T$O*T$s[9]+T$v*T$s[10]+T$y*T$s[11],T$m[T$x+12]=T$w*T$s[12]+T$O*T$s[13]+T$v*T$s[14]+T$y*T$s[15];},T$G.matrix4x4MultiplyMFM=function(T$L,T$s,T$m){T$G.matrix4x4MultiplyFFF(T$L.elements,T$s,T$m.elements);},T$C(T$G,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"};},"_tempVector3_0",function(){return this._tempVector3_0=new T$vs();},"_tempVector3_1",function(){return this._tempVector3_1=new T$vs();},"_tempVector3_2",function(){return this._tempVector3_2=new T$vs();},"_tempVector3_3",function(){return this._tempVector3_3=new T$vs();},"_tempVector3_4",function(){return this._tempVector3_4=new T$vs();},"_tempVector3_5",function(){return this._tempVector3_5=new T$vs();},"_tempVector3_6",function(){return this._tempVector3_6=new T$vs();},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4);},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16);},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16);},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16);},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16);}]),T$G;}(),T$Ds=function(){function T$c(){}return T$r(T$c,"Laya3D"),T$c._cancelLoadByUrl=function(T$L){T$H.loader.cancelLoadByUrl(T$L),T$c._innerFirstLevelLoaderManager.cancelLoadByUrl(T$L),T$c._innerSecondLevelLoaderManager.cancelLoadByUrl(T$L),T$c._innerThirdLevelLoaderManager.cancelLoadByUrl(T$L),T$c._innerFourthLevelLoaderManager.cancelLoadByUrl(T$L);},T$c._changeWebGLSize=function(T$L,T$s){T$U.onStageResize(T$L,T$s),T$P.clientWidth=T$L,T$P.clientHeight=T$s;},T$c.__init__=function(){var T$L=T$s.createMap;T$L.lh=[T$As,"SPRITE3DHIERARCHY"],T$L.ls=[T$Rs,"SPRITE3DHIERARCHY"],T$L.lm=[T$Xs,"MESH"],T$L.lmat=[T$$s,"MATERIAL"],T$L.jpg=[T$ns,"nativeimage"],T$L.jpeg=[T$ns,"nativeimage"],T$L.png=[T$ns,"nativeimage"],T$L.pkm=[T$ns,"arraybuffer"],T$L.raw=[T$Ws,"arraybuffer"],T$L.mipmaps=[T$Ws,"arraybuffer"],T$D.parserMap.SPRITE3DHIERARCHY=T$c._loadHierarchy,T$D.parserMap.MESH=T$c._loadMesh,T$D.parserMap.MATERIAL=T$c._loadMaterial,T$D.parserMap.TEXTURECUBE=T$c._loadTextureCube,T$D.parserMap.TERRAIN=T$c._loadTerrain,T$c._innerFirstLevelLoaderManager.on("error",null,T$c._eventLoadManagerError),T$c._innerSecondLevelLoaderManager.on("error",null,T$c._eventLoadManagerError),T$c._innerThirdLevelLoaderManager.on("error",null,T$c._eventLoadManagerError),T$c._innerFourthLevelLoaderManager.on("error",null,T$c._eventLoadManagerError);},T$c.READ_BLOCK=function(){return T$c._readData.pos+=4,!0;},T$c.READ_DATA=function(){return T$c._DATA.offset=T$c._readData.getUint32(),T$c._DATA.size=T$c._readData.getUint32(),!0;},T$c.READ_STRINGS=function(){var T$L=[],T$s={offset:0,size:0};T$s.offset=T$c._readData.getUint16(),T$s.size=T$c._readData.getUint16();T$c._readData.pos;T$c._readData.pos=T$s.offset+T$c._DATA.offset;for(var T$m=0;T$m<T$s.size;T$m++){var T$x=T$c._readData.readUTFString();-1===T$x.lastIndexOf(".lmat")&&-1===T$x.lastIndexOf(".lpbr")||T$L.push(T$x);}return T$L;},T$c.formatRelativePath=function(T$L,T$s){var T$m;if("."===T$s.charAt(0)){for(var T$x=(T$L+T$s).split("/"),T$w=0,T$O=T$x.length;T$w<T$O;T$w++)if(".."==T$x[T$w]){var T$v=T$w-1;0<T$v&&".."!==T$x[T$v]&&(T$x.splice(T$v,2),T$w-=2);}T$m=T$x.join("/");}else T$m=T$L+T$s;return null!=T$i.customFormat&&(T$m=T$i.customFormat(T$m,null)),T$m;},T$c._eventLoadManagerError=function(T$L){T$H.loader.event("error",T$L);},T$c._addHierarchyInnerUrls=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v=T$c.formatRelativePath(T$x,T$w);T$m&&(T$v+=T$m),T$L.push({url:T$v,clas:T$O}),T$s[T$w]=T$v;},T$c._getSprite3DHierarchyInnerUrls=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){var T$y,T$F=0,T$o=0;switch(T$L.type){case"Scene":var T$V=T$L.customProps.lightmaps;for(T$F=0,T$o=T$V.length;T$F<T$o;T$F++){var T$C=T$V[T$F].replace(".exr",".png");T$c._addHierarchyInnerUrls(T$x,T$w,T$O,T$v,T$C,T$ns);}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var T$E;if(T$L.instanceParams)(T$E=T$L.instanceParams.loadPath)&&T$c._addHierarchyInnerUrls(T$s,T$w,T$O,T$v,T$E,T$Xs);else{(T$E=(T$y=T$L.customProps).meshPath)&&T$c._addHierarchyInnerUrls(T$s,T$w,T$O,T$v,T$E,T$Xs);var T$r=T$y.materials;if(T$r)for(T$F=0,T$o=T$r.length;T$F<T$o;T$F++){for(var T$u=T$r[T$F],T$T=T$u.type.split("."),T$j=T$h.window,T$D=0,T$e=T$T.length;T$D<T$e;++T$D){T$j=T$j[this.clasPaths[T$D]];}if("function"!=typeof T$j)throw"_getSprite3DHierarchyInnerUrls 错误: "+T$u.type+" 不是类";T$c._addHierarchyInnerUrls(T$m,T$w,T$O,T$v,T$u.path,T$j);}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var T$b=(T$y=T$L.customProps).meshPath;T$b&&T$c._addHierarchyInnerUrls(T$s,T$w,T$O,T$v,T$b,T$Xs);var T$S=T$y.material;if(T$S){T$T=T$S.type.split("."),T$j=T$h.window;for(T$D=0,T$e=T$T.length;T$D<T$e;++T$D){T$j=T$j[this.clasPaths[T$D]];}T$c._addHierarchyInnerUrls(T$m,T$w,T$O,T$v,T$S.path,T$j);}else{var T$H=T$y.materialPath;if(T$H)T$c._addHierarchyInnerUrls(T$m,T$w,T$O,T$v,T$H,ShurikenParticleMaterial);else{var T$Y=T$y.texturePath;T$Y&&T$c._addHierarchyInnerUrls(T$x,T$w,T$O,T$v,T$Y,T$ns);}}break;case"Terrain":T$c._addHierarchyInnerUrls(T$x,T$w,T$O,T$v,T$L.customProps.dataPath,TerrainRes);}var T$a=T$L.components;for(var T$f in T$a){var T$_=T$a[T$f];switch(T$f){case"Animator":var T$Q=T$_.avatarPath;if(T$Q)T$c._addHierarchyInnerUrls(T$x,T$w,T$O,T$v,T$Q,Avatar);else{var T$N=T$_.avatar;T$N&&T$c._addHierarchyInnerUrls(T$x,T$w,T$O,T$v,T$N.path,Avatar);}var T$i=T$_.clipPaths;for(T$F=0,T$o=T$i.length;T$F<T$o;T$F++)T$c._addHierarchyInnerUrls(T$x,T$w,T$O,T$v,T$i[T$F],AnimationClip);}}var T$U=T$L.child;for(T$F=0,T$o=T$U.length;T$F<T$o;T$F++)T$c._getSprite3DHierarchyInnerUrls(T$U[T$F],T$s,T$m,T$x,T$w,T$O,T$v);},T$c._loadHierarchy=function(T$L){T$L.on("loaded",null,T$c._onHierarchylhLoaded,[T$L,T$L._class._getGroup()]),T$L.load(T$L.url,"json",!1,null,!0);},T$c._onHierarchylhLoaded=function(T$L,T$s,T$m){if(T$L._class.destroyed)T$L.endLoad();else{var T$x=T$L.url,T$w=T$js.getURLVerion(T$x),T$O=T$i.getPath(T$x),T$v=[],T$y=[],T$F=[],T$o={};T$c._getSprite3DHierarchyInnerUrls(T$m,T$v,T$y,T$F,T$o,T$w,T$O);var T$V=T$v.length+T$y.length+T$F.length,T$C=T$V+1,T$E=1/T$C;if(T$c._onProcessChange(T$L,0,T$E,1),0<T$F.length){var T$r=T$V/T$C,T$u=T$N.create(null,T$c._onProcessChange,[T$L,T$E,T$r],!1);T$c._innerFourthLevelLoaderManager.create(T$F,T$N.create(null,T$c._onHierarchyInnerForthLevResouLoaded,[T$L,T$s,T$u,T$m,T$o,T$v,T$y,T$E+T$r*T$F.length,T$r]),T$u,null,null,1,!0,T$s);}else T$c._onHierarchyInnerForthLevResouLoaded(T$L,T$s,null,T$m,T$o,T$v,T$y,T$E,T$r);}},T$c._onHierarchyInnerForthLevResouLoaded=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F){if(T$L._class.destroyed)T$L.endLoad();else if(T$m&&T$m.recover(),0<T$v.length){var T$o=T$N.create(null,T$c._onProcessChange,[T$L,T$y,T$F],!1);T$c._innerSecondLevelLoaderManager.create(T$v,T$N.create(null,T$c._onHierarchyInnerSecondLevResouLoaded,[T$L,T$s,T$o,T$x,T$w,T$O,T$y+T$F*T$v.length,T$F]),T$m,null,null,1,!0,T$s);}else T$c._onHierarchyInnerSecondLevResouLoaded(T$L,T$s,null,T$x,T$w,T$O,T$y,T$F);},T$c._onHierarchyInnerSecondLevResouLoaded=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y){if(T$L._class.destroyed)T$L.endLoad();else if(T$m&&T$m.recover(),0<T$O.length){var T$F=T$N.create(null,T$c._onProcessChange,[T$L,T$v,T$y],!1);T$c._innerFirstLevelLoaderManager.create(T$O,T$N.create(null,T$c._onHierarchyInnerFirstLevResouLoaded,[T$L,T$F,T$x,T$w]),T$m,null,null,1,!0,T$s);}else T$c._onHierarchyInnerFirstLevResouLoaded(T$L,null,T$x,T$w);},T$c._onHierarchyInnerFirstLevResouLoaded=function(T$L,T$s,T$m,T$x){T$s&&T$s.recover(),T$L.endLoad([T$m,T$x]);},T$c._loadTerrain=function(T$L){T$L.on("loaded",null,T$c._onTerrainLtLoaded,[T$L,T$L._class._getGroup()]),T$L.load(T$L.url,"json",!1,null,!0);},T$c._onTerrainLtLoaded=function(T$L,T$s,T$m){if(T$L._class.destroyed)T$L.endLoad();else{var T$x,T$w,T$O=T$L.url,T$v=T$js.getURLVerion(T$O),T$y=T$i.getPath(T$O),T$F=[],T$o={},T$V=0,T$C=0,T$E=T$m.heightData;T$x=T$E.url,T$w=T$c.formatRelativePath(T$y,T$x),T$v&&(T$w+=T$v),T$x=T$o[T$x]=T$w;var T$r=T$m.detailTexture;for(T$V=0,T$C=T$r.length;T$V<T$C;T$V++)T$F.push({url:T$r[T$V].diffuse});var T$u=T$m.normalMap;for(T$V=0,T$C=T$u.length;T$V<T$C;T$V++)T$F.push({url:T$u[T$V]});var T$T=T$m.alphaMap;for(T$V=0,T$C=T$T.length;T$V<T$C;T$V++)T$F.push({url:T$T[T$V],params:[!1,!1,6408,!0]});for(T$V=0,T$C=T$F.length;T$V<T$C;T$V++){var T$j=T$F[T$V].url;T$w=T$c.formatRelativePath(T$y,T$j),T$v&&(T$w+=T$v),T$F[T$V].url=T$w,T$o[T$j]=T$w;}var T$D=T$F.length,T$e=T$D+2,T$b=1/T$e;T$c._onProcessChange(T$L,0,T$b,1);var T$S={heightMapLoaded:!1,texturesLoaded:!1},T$H=T$N.create(null,T$c._onProcessChange,[T$L,T$b,T$b],!1);T$c._innerFourthLevelLoaderManager.create(T$x,T$N.create(null,T$c._onTerrainHeightMapLoaded,[T$L,T$H,T$m,T$o,T$S]),T$H,null,[T$E.numX,T$E.numZ,T$E.bitType,T$E.value],1,!0,T$s);var T$Y=T$N.create(null,T$c._onProcessChange,[T$L,2*T$b,T$D/T$e],!1);T$c._innerFourthLevelLoaderManager.create(T$F,T$N.create(null,T$c._onTerrainTexturesLoaded,[T$L,T$Y,T$m,T$o,T$S]),T$Y,null,null,1,!0,T$s);}},T$c._onTerrainHeightMapLoaded=function(T$L,T$s,T$m,T$x,T$w){T$w.heightMapLoaded=!0,T$w.texturesLoaded&&(T$L.endLoad([T$m,T$x]),T$s.recover());},T$c._onTerrainTexturesLoaded=function(T$L,T$s,T$m,T$x,T$w){T$w.texturesLoaded=!0,T$w.heightMapLoaded&&(T$L.endLoad([T$m,T$x]),T$s.recover());},T$c._loadMesh=function(T$L){T$L.on("loaded",null,T$c._onMeshLmLoaded,[T$L,T$L._class._getGroup()]),T$L.load(T$L.url,"arraybuffer",!1,null,!0);},T$c._onMeshLmLoaded=function(T$L,T$s,T$m){if(T$L._class.destroyed)T$L.endLoad();else{var T$x,T$w,T$O,T$v=T$L.url,T$y=T$js.getURLVerion(T$v),T$F=T$i.getPath(T$v),T$o={},T$V=0,T$C=0;switch((T$c._readData=new T$Y(T$m)).pos=0,T$c._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var T$E=T$c._readData.getUint32();T$c._readData.pos=T$c._readData.pos+4,T$C=T$c._readData.getUint16(),T$c._readData.pos=T$c._readData.pos+8*T$C;var T$r=T$c._readData.getUint32();for(T$C=T$c._readData.getUint16(),T$c._readData.pos=T$E+T$r,T$x=[],T$V=0;T$V<T$C;T$V++){var T$u=T$c._readData.readUTFString();-1!==T$u.lastIndexOf(".lmat")&&T$x.push(T$u);}break;default:for(T$c.READ_BLOCK(),T$V=0;T$V<2;T$V++){var T$T=T$c._readData.getUint16(),T$j=T$c._strings[T$T],T$D=T$c["READ_"+T$j];if(null==T$D)throw new Error("model file err,no this function:"+T$T+" "+T$j);1===T$V?T$x=T$D.call():T$D.call();}}for(T$V=0,T$O=T$x.length;T$V<T$O;T$V++){var T$e=T$x[T$V];T$w=T$c.formatRelativePath(T$F,T$e),T$y&&(T$w+=T$y),T$x[T$V]=T$w,T$o[T$e]=T$w;}if(0<T$x.length){T$c._onProcessChange(T$L,0,.5,1);var T$b=T$N.create(null,T$c._onProcessChange,[T$L,.5,.5],!1);T$c._innerSecondLevelLoaderManager.create(T$x,T$N.create(null,T$c._onMeshMateialLoaded,[T$L,T$b,T$m,T$o]),T$b,null,null,1,!0,T$s);}else T$L.endLoad([T$m,T$o]);}},T$c._onMeshMateialLoaded=function(T$L,T$s,T$m,T$x){T$L.endLoad([T$m,T$x]),T$s.recover();},T$c._getMaterialTexturePath=function(T$L,T$s,T$m){var T$x=T$L.length-4;return T$L.indexOf(".dds")!=T$x&&T$L.indexOf(".tga")!=T$x&&T$L.indexOf(".exr")!=T$x&&T$L.indexOf(".DDS")!=T$x&&T$L.indexOf(".TGA")!=T$x&&T$L.indexOf(".EXR")!=T$x||(T$L=T$L.substr(0,T$x)+".png"),T$L=T$c.formatRelativePath(T$m,T$L),T$s&&(T$L+=T$s),T$L;},T$c._loadMaterial=function(T$L){T$L.on("loaded",null,T$c._onMaterilLmatLoaded,[T$L,T$L._class._getGroup()]),T$L.load(T$L.url,"json",!1,null,!0);},T$c._onMaterilLmatLoaded=function(T$L,T$s,T$m){if(T$L._class.destroyed)T$L.endLoad();else{var T$x,T$w=T$L.url,T$O=T$js.getURLVerion(T$w),T$v=T$i.getPath(T$w),T$y=[],T$F={},T$o=T$m.customProps,T$V=T$m.version;if(T$V)switch(T$V){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var T$C=T$m.props.textures,T$E=0,T$r=T$C.length;T$E<T$r;T$E++){var T$u=T$C[T$E],T$T=T$u.path;if(T$T){var T$j=T$T.length-4;T$T.indexOf(".exr")!=T$j&&T$T.indexOf(".EXR")!=T$j||(T$T=T$T.substr(0,T$j)+".png"),T$x=T$c.formatRelativePath(T$v,T$T),T$O&&(T$x+=T$O),T$y.push({url:T$x,params:T$u.params}),T$F[T$T]=T$x;}}break;default:throw new Error("Laya3D:unkonwn version.");}else{var T$D=T$o.diffuseTexture.texture2D;if(T$D&&(T$x=T$c._getMaterialTexturePath(T$D,T$O,T$v),T$y.push(T$x),T$F[T$D]=T$x),T$o.normalTexture){var T$e=T$o.normalTexture.texture2D;T$e&&(T$x=T$c._getMaterialTexturePath(T$e,T$O,T$v),T$y.push(T$x),T$F[T$e]=T$x);}if(T$o.specularTexture){var T$b=T$o.specularTexture.texture2D;T$b&&(T$x=T$c._getMaterialTexturePath(T$b,T$O,T$v),T$y.push(T$x),T$F[T$b]=T$x);}if(T$o.emissiveTexture){var T$S=T$o.emissiveTexture.texture2D;T$S&&(T$x=T$c._getMaterialTexturePath(T$S,T$O,T$v),T$y.push(T$x),T$F[T$S]=T$x);}if(T$o.ambientTexture){var T$H=T$o.ambientTexture.texture2D;T$H&&(T$x=T$c._getMaterialTexturePath(T$H,T$O,T$v),T$y.push(T$x),T$F[T$H]=T$x);}if(T$o.reflectTexture){var T$Y=T$o.reflectTexture.texture2D;T$Y&&(T$x=T$c._getMaterialTexturePath(T$Y,T$O,T$v),T$y.push(T$x),T$F[T$Y]=T$x);}}var T$a=T$y.length,T$f=T$a+1,T$_=1/T$f;if(T$c._onProcessChange(T$L,0,T$_,1),0<T$a){var T$Q=T$N.create(null,T$c._onProcessChange,[T$L,T$_,T$a/T$f],!1);T$c._innerFourthLevelLoaderManager.create(T$y,T$N.create(null,T$c._onMateialTexturesLoaded,[T$L,T$Q,T$m,T$F]),T$Q,T$ns,null,1,!0,T$s);}else T$c._onMateialTexturesLoaded(T$L,null,T$m,null);}},T$c._onMateialTexturesLoaded=function(T$L,T$s,T$m,T$x){T$L.endLoad([T$m,T$x]),T$s&&T$s.recover();},T$c._loadTextureCube=function(T$L){T$L.on("loaded",null,T$c._onTextureCubeLtcLoaded,[T$L]),T$L.load(T$L.url,"json",!1,null,!0);},T$c._onTextureCubeLtcLoaded=function(T$L,T$s){if(T$L._class.destroyed)T$L.endLoad();else{var T$m=T$i.getPath(T$L.url),T$x=[T$c.formatRelativePath(T$m,T$s.px),T$c.formatRelativePath(T$m,T$s.nx),T$c.formatRelativePath(T$m,T$s.py),T$c.formatRelativePath(T$m,T$s.ny),T$c.formatRelativePath(T$m,T$s.pz),T$c.formatRelativePath(T$m,T$s.nz)];T$c._onProcessChange(T$L,0,1/7,1);var T$w=T$N.create(null,T$c._onProcessChange,[T$L,1/7,6/7],!1);T$c._innerFourthLevelLoaderManager.load(T$x,T$N.create(null,T$c._onTextureCubeImagesLoaded,[T$L,T$x,T$w]),T$w,"nativeimage");}},T$c._onTextureCubeImagesLoaded=function(T$L,T$s,T$m){var T$x=[];T$x.length=6;for(var T$w=0;T$w<6;T$w++){var T$O=T$s[T$w];T$x[T$w]=T$D.getRes(T$O),T$D.clearRes(T$O);}T$L.endLoad(T$x),T$m.recover();},T$c._onProcessChange=function(T$L,T$s,T$m,T$x){(T$x=T$s+T$x*T$m)<1&&T$L.event("progress",T$x);},T$c.init=function(T$L,T$s,T$m,T$x,T$w,T$O){if(void 0===T$m&&(T$m=!1),void 0===T$x&&(T$x=!1),void 0===T$w&&(T$w=!0),void 0===T$O&&(T$O=!0),T$e.update3DLoop=function(){},T$e.cancelLoadByUrl=function(T$L){T$c._cancelLoadByUrl(T$L);},T$F.isAntialias=T$m,T$F.isAlpha=T$x,T$F.premultipliedAlpha=T$w,T$F.isStencil=T$O,!T$U.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");T$e.changeWebGLSize=T$c._changeWebGLSize,T$T.is3DMode=!0,T$H.init(T$L,T$s),T$G.__init__(),T$Cs.__init__(),T$Ks.__init__(),T$d.__init__(),T$c.__init__(),T$v.maxTextureCount=2,(T$c.debugMode||T$k.debugMode)&&(T$c._debugPhasorSprite=new T$l());},T$c.HIERARCHY="SPRITE3DHIERARCHY",T$c.MESH="MESH",T$c.MATERIAL="MATERIAL",T$c.PBRMATERIAL="PBRMTL",T$c.TEXTURECUBE="TEXTURECUBE",T$c.TERRAIN="TERRAIN",T$c._readData=null,T$c._debugPhasorSprite=null,T$c.debugMode=!1,T$C(T$c,["_DATA",function(){return this._DATA={offset:0,size:0};},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"];},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new T$s();},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new T$s();},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new T$s();},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new T$s();}]),T$c;}(),T$es=function(T$L){function T$w(T$L){T$w.__super.call(this),this._owner=T$L,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0;}T$r(T$w,"laya.d3.animation.AnimationTransform3D",T$O);var T$s=T$w.prototype;return T$s._getlocalMatrix=function(){return this._localUpdate&&(T$js._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix;},T$s._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var T$L=0,T$s=this._childs.length;T$L<T$s;T$L++)this._childs[T$L]._onWorldTransform();}},T$s._setWorldMatrixAndUpdate=function(T$L){if(this._worldMatrix=T$L,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var T$s=this._getlocalMatrix(),T$m=0;T$m<16;++T$m)this._worldMatrix[T$m]=T$s[T$m];else T$js.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1;},T$s._setWorldMatrixNoUpdate=function(T$L){this._worldMatrix=T$L;},T$s._setWorldMatrixIgnoreUpdate=function(T$L){this._worldMatrix=T$L,this._worldUpdate=!1;},T$s.getLocalPosition=function(){return this._localPosition;},T$s.setLocalPosition=function(T$L){if(this._parent)this._localPosition=T$L,this._localUpdate=!0,this._onWorldTransform();else{var T$s=this._entity.owner._transform,T$m=this._entity.localPosition,T$x=T$m.elements;T$x[0]=T$L[0],T$x[1]=T$L[1],T$x[2]=T$L[2],T$s.localPosition=T$m;}},T$s.getLocalRotation=function(){if(this._localQuaternionUpdate){var T$L=this._localRotationEuler;T$js._quaternionCreateFromYawPitchRollArray(T$L[1]/T$w._angleToRandin,T$L[0]/T$w._angleToRandin,T$L[2]/T$w._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1;}return this._localRotation;},T$s.setLocalRotation=function(T$L){if(this._parent)this._localRotation=T$L,T$js.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var T$s=this._entity.owner._transform,T$m=this._entity.localRotation,T$x=T$m.elements;T$x[0]=T$L[0],T$x[1]=T$L[1],T$x[2]=T$L[2],T$x[3]=T$L[3],T$s.localRotation=T$m;}},T$s.getLocalScale=function(){return this._localScale;},T$s.setLocalScale=function(T$L){if(this._parent)this._localScale=T$L,this._localUpdate=!0,this._onWorldTransform();else{var T$s=this._entity.owner._transform,T$m=this._entity.localScale,T$x=T$m.elements;T$x[0]=T$L[0],T$x[1]=T$L[1],T$x[2]=T$L[2],T$s.localScale=T$m;}},T$s.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){T$js.getYawPitchRoll(this._localRotation,T$w._tempVector3);var T$L=T$w._tempVector3,T$s=this._localRotationEuler;T$s[0]=T$L[1]*T$w._angleToRandin,T$s[1]=T$L[0]*T$w._angleToRandin,T$s[2]=T$L[2]*T$w._angleToRandin,this._locaEulerlUpdate=!1;}return this._localRotationEuler;},T$s.setLocalRotationEuler=function(T$L){if(this._parent)T$js._quaternionCreateFromYawPitchRollArray(T$L[1]/T$w._angleToRandin,T$L[0]/T$w._angleToRandin,T$L[2]/T$w._angleToRandin,this._localRotation),this._localRotationEuler=T$L,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var T$s=this._entity.owner._transform,T$m=this._entity.localRotationEuler,T$x=T$m.elements;T$x[0]=T$L[0],T$x[1]=T$L[1],T$x[2]=T$L[2],T$s.localRotationEuler=T$m;}},T$s.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)T$js.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var T$L=this._getlocalMatrix(),T$s=0;T$s<16;++T$s)this._worldMatrix[T$s]=T$L[T$s];this._worldUpdate=!1;}return this._worldMatrix;},T$s.setParent=function(T$L){if(this._parent!==T$L){if(this._parent){var T$s=this._parent._childs,T$m=T$s.indexOf(this);T$s.splice(T$m,1);}T$L&&(T$L._childs.push(this),T$L&&this._onWorldTransform()),this._parent=T$L;}},T$C(T$w,["_tempVector3",function(){return this._tempVector3=new Float32Array(3);},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI;}]),T$w;}(),T$bs=function(T$L){function T$s(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,T$s.__super.call(this),this._destroyed=!1,this._id=T$s._uniqueIDCounter,T$s._uniqueIDCounter++;}T$r(T$s,"laya.d3.component.Component3D",T$O);var T$m=T$s.prototype;return T$H.imps(T$m,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),T$m._initialize=function(T$L){this._owner=T$L,this._enable=!0,this.started=!1,this._load(T$L);},T$m._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0;},T$m._load=function(T$L){},T$m._start=function(T$L){},T$m._update=function(T$L){},T$m._lateUpdate=function(T$L){},T$m._preRenderUpdate=function(T$L){},T$m._postRenderUpdate=function(T$L){},T$m._unload=function(T$L){this.offAll();},T$m._cloneTo=function(T$L){},T$u(0,T$m,"id",function(){return this._id;}),T$u(0,T$m,"destroyed",function(){return this._destroyed;}),T$u(0,T$m,"owner",function(){return this._owner;}),T$u(0,T$m,"enable",function(){return this._enable;},function(T$L){this._enable!==T$L&&(this._enable=T$L,this.event("enablechanged",this._enable));}),T$u(0,T$m,"isSingleton",function(){return T$s._isSingleton;}),T$s._isSingleton=!0,T$s._uniqueIDCounter=1,T$s;}(),T$Ss=function(T$L){function T$s(){this._destroyed=!1,T$s.__super.call(this),this._destroyed=!1;}T$r(T$s,"laya.d3.core.GeometryFilter",T$O);var T$m=T$s.prototype;return T$H.imps(T$m,{"laya.resource.IDestroy":!0}),T$m._destroy=function(){this.offAll(),this._destroyed=!0;},T$u(0,T$m,"_isAsyncLoaded",function(){return!0;}),T$u(0,T$m,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.");}),T$u(0,T$m,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.");}),T$u(0,T$m,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.");}),T$u(0,T$m,"destroyed",function(){return this._destroyed;}),T$s;}(),T$Hs=function(T$L){function T$x(T$L){T$x.__super.call(this),this._id=++T$x._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new T$kL(new T$vs(),new T$vs()),this._boundingBoxCenter=new T$vs(),this._boundingSphere=new T$ML(new T$vs(),0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=T$L,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange);}T$r(T$x,"laya.d3.core.render.BaseRender",T$O);var T$s=T$x.prototype;return T$H.imps(T$s,{"laya.resource.IDestroy":!0}),T$s._changeMaterialReference=function(T$L,T$s){T$L&&T$L._removeReference(),T$s._addReference();},T$s._getInstanceMaterial=function(T$L,T$s){var T$m=new T$L.constructor();return T$L.cloneTo(T$m),T$m.name=T$m.name+"(Instance)",this._materialsInstance[T$s]=!0,this._changeMaterialReference(this._materials[T$s],T$m),this._materials[T$s]=T$m;},T$s._setShaderValuelightMap=function(T$L){this._setShaderValueTexture(3,T$L);},T$s._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0;},T$s._renderRenderableBoundBox=function(){var T$L=T$Ds._debugPhasorSprite,T$s=this.boundingBox,T$m=T$x._tempBoundBoxCorners;T$s.getCorners(T$m),T$L.line(T$m[0],T$x._greenColor,T$m[1],T$x._greenColor),T$L.line(T$m[2],T$x._greenColor,T$m[3],T$x._greenColor),T$L.line(T$m[4],T$x._greenColor,T$m[5],T$x._greenColor),T$L.line(T$m[6],T$x._greenColor,T$m[7],T$x._greenColor),T$L.line(T$m[0],T$x._greenColor,T$m[3],T$x._greenColor),T$L.line(T$m[1],T$x._greenColor,T$m[2],T$x._greenColor),T$L.line(T$m[2],T$x._greenColor,T$m[6],T$x._greenColor),T$L.line(T$m[3],T$x._greenColor,T$m[7],T$x._greenColor),T$L.line(T$m[0],T$x._greenColor,T$m[4],T$x._greenColor),T$L.line(T$m[1],T$x._greenColor,T$m[5],T$x._greenColor),T$L.line(T$m[4],T$x._greenColor,T$m[7],T$x._greenColor),T$L.line(T$m[5],T$x._greenColor,T$m[6],T$x._greenColor);},T$s._calculateBoundingSphere=function(){throw"BaseRender: must override it.";},T$s._calculateBoundingBox=function(){throw"BaseRender: must override it.";},T$s._setShaderValueTexture=function(T$L,T$s){this._owner._shaderValues.setValue(T$L,T$s);},T$s._setShaderValueMatrix4x4=function(T$L,T$s){this._owner._shaderValues.setValue(T$L,T$s?T$s.elements:null);},T$s._setShaderValueColor=function(T$L,T$s){this._owner._shaderValues.setValue(T$L,T$s?T$s.elements:null);},T$s._setShaderValueBuffer=function(T$L,T$s){this._owner._shaderValues.setValue(T$L,T$s);},T$s._setShaderValueInt=function(T$L,T$s){this._owner._shaderValues.setValue(T$L,T$s);},T$s._setShaderValueBool=function(T$L,T$s){this._owner._shaderValues.setValue(T$L,T$s);},T$s._setShaderValueNumber=function(T$L,T$s){this._owner._shaderValues.setValue(T$L,T$s);},T$s._setShaderValueVector2=function(T$L,T$s){this._owner._shaderValues.setValue(T$L,T$s?T$s.elements:null);},T$s._addShaderDefine=function(T$L){this._owner._shaderDefineValue|=T$L;},T$s._removeShaderDefine=function(T$L){this._owner._shaderDefineValue&=~T$L;},T$s._renderUpdate=function(T$L){return!0;},T$s._applyLightMapParams=function(){if(0<=this._lightmapIndex){var T$L=this._owner.scene;if(T$L){var T$s=T$L.getlightmaps()[this._lightmapIndex];T$s?(this._addShaderDefine(T$ls.SAHDERDEFINE_LIGHTMAP),T$s.loaded?this._setShaderValuelightMap(T$s):T$s.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(T$ls.SAHDERDEFINE_LIGHTMAP);}else this._removeShaderDefine(T$ls.SAHDERDEFINE_LIGHTMAP);}else this._removeShaderDefine(T$ls.SAHDERDEFINE_LIGHTMAP);},T$s._updateOctreeNode=function(){var T$L=this._treeNode;T$L&&this._octreeNodeNeedChange&&(T$L.updateObject(this),this._octreeNodeNeedChange=!1);},T$s._destroy=function(){this.offAll();var T$L=0,T$s=0;for(T$L=0,T$s=this._renderElements.length;T$L<T$s;T$L++)this._renderElements[T$L]._destroy();for(T$L=0,T$s=this._materials.length;T$L<T$s;T$L++)this._materials[T$L]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0;},T$u(0,T$s,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere;}),T$u(0,T$s,"id",function(){return this._id;}),T$u(0,T$s,"material",function(){var T$L=this._materials[0];if(T$L&&!this._materialsInstance[0]){var T$s=this._getInstanceMaterial(T$L,0);this.event("materialchanged",[this,0,T$s]);}return this._materials[0];},function(T$L){this.sharedMaterial=T$L;}),T$u(0,T$s,"sharedMaterial",function(){return this._materials[0];},function(T$L){var T$s=this._materials[0];T$s!==T$L&&(this._materials[0]=T$L,this._materialsInstance[0]=!1,this._changeMaterialReference(T$s,T$L),this.event("materialchanged",[this,0,T$L]));}),T$u(0,T$s,"lightmapIndex",function(){return this._lightmapIndex;},function(T$L){this._lightmapIndex=T$L,this._applyLightMapParams();}),T$u(0,T$s,"lightmapScaleOffset",function(){return this._lightmapScaleOffset;},function(T$L){this._lightmapScaleOffset=T$L,this._setShaderValueColor(2,T$L),this._addShaderDefine(T$ls.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV);}),T$u(0,T$s,"enable",function(){return this._enable;},function(T$L){this._enable=T$L,this.event("enablechanged",[this,T$L]);}),T$u(0,T$s,"materials",function(){for(var T$L=0,T$s=this._materials.length;T$L<T$s;T$L++)if(!this._materialsInstance[T$L]){var T$m=this._getInstanceMaterial(this._materials[T$L],T$L);this.event("materialchanged",[this,T$L,T$m]);}return this._materials.slice();},function(T$L){this.sharedMaterials=T$L;}),T$u(0,T$s,"sharedMaterials",function(){return this._materials.slice();},function(T$L){if(!T$L)throw new Error("MeshRender: shadredMaterials value can't be null.");var T$s=T$L.length;this._materialsInstance.length=T$s;for(var T$m=0;T$m<T$s;T$m++){var T$x=this._materials[T$m];T$x!==T$L[T$m]&&(this._materialsInstance[T$m]=!1,this._changeMaterialReference(T$x,T$L[T$m]),this.event("materialchanged",[this,T$m,T$L[T$m]]));}this._materials=T$L;}),T$u(0,T$s,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox;}),T$u(0,T$s,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var T$L=this.boundingBox;T$vs.add(T$L.min,T$L.max,this._boundingBoxCenter),T$vs.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1;}return this._boundingBoxCenter;}),T$u(0,T$s,"receiveShadow",function(){return this._receiveShadow;},function(T$L){this._receiveShadow!==T$L&&((this._receiveShadow=T$L)?this._addShaderDefine(T$rs.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(T$rs.SHADERDEFINE_RECEIVE_SHADOW));}),T$u(0,T$s,"destroyed",function(){return this._destroyed;}),T$x._uniqueIDCounter=0,T$C(T$x,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new T$vs(),new T$vs(),new T$vs(),new T$vs(),new T$vs(),new T$vs(),new T$vs(),new T$vs()];},"_greenColor",function(){return this._greenColor=new T$ys(0,1,0,1);}]),T$x;}(),T$Ys=function(T$L){function T$y(T$L){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,T$y.__super.call(this),this._localPosition=new T$vs(),this._localRotation=new T$ms(0,0,0,1),this._localScale=new T$vs(1,1,1),this._localRotationEuler=new T$vs(),this._localMatrix=new T$Ls(),this._position=new T$vs(),this._rotation=new T$ms(0,0,0,1),this._scale=new T$vs(1,1,1),this._worldMatrix=new T$Ls(),this._forward=new T$vs(),this._up=new T$vs(),this._right=new T$vs(),this._owner=T$L,this._childs=[];}T$r(T$y,"laya.d3.core.Transform3D",T$O);var T$s=T$y.prototype;return T$s._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)T$Ls.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var T$L=T$y._tempVector30;T$vs.multiply(this.pivot,this._localScale,T$L);var T$s=T$y._tempVector31;T$vs.subtract(T$L,this.pivot,T$s);var T$m=T$y._tempVector32,T$x=this.localRotation;T$vs.transformQuat(T$L,T$x,T$m),T$vs.subtract(T$m,T$L,T$m);var T$w=T$y._tempVector33;T$vs.subtract(this._localPosition,T$s,T$w),T$vs.subtract(T$w,T$m,T$w),T$Ls.createAffineTransformation(T$w,T$x,this._localScale,this._localMatrix);}},T$s._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var T$L=0,T$s=this._childs.length;T$L<T$s;T$L++)this._childs[T$L]._onWorldPositionRotationTransform();}},T$s._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var T$L=0,T$s=this._childs.length;T$L<T$s;T$L++)this._childs[T$L]._onWorldPositionScaleTransform();}},T$s._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var T$L=0,T$s=this._childs.length;T$L<T$s;T$L++)this._childs[T$L]._onWorldPositionTransform();}},T$s._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var T$L=0,T$s=this._childs.length;T$L<T$s;T$L++)this._childs[T$L]._onWorldPositionRotationTransform();}},T$s._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var T$L=0,T$s=this._childs.length;T$L<T$s;T$L++)this._childs[T$L]._onWorldPositionScaleTransform();}},T$s._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var T$L=0,T$s=this._childs.length;T$L<T$s;T$L++)this._childs[T$L]._onWorldTransform();}},T$s.translate=function(T$L,T$s){void 0===T$s&&(T$s=!0),T$s?(T$Ls.createFromQuaternion(this.localRotation,T$y._tempMatrix0),T$vs.transformCoordinate(T$L,T$y._tempMatrix0,T$y._tempVector30),T$vs.add(this.localPosition,T$y._tempVector30,this._localPosition),this.localPosition=this._localPosition):(T$vs.add(this.position,T$L,this._position),this.position=this._position);},T$s.rotate=function(T$L,T$s,T$m){var T$x;void 0===T$s&&(T$s=!0),void 0===T$m&&(T$m=!0),T$x=T$m?T$L:(T$vs.scale(T$L,Math.PI/180,T$y._tempVector30),T$y._tempVector30),T$ms.createFromYawPitchRoll(T$x.y,T$x.x,T$x.z,T$y._tempQuaternion0),T$s?(T$ms.multiply(this._localRotation,T$y._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(T$ms.multiply(T$y._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation);},T$s.lookAt=function(T$L,T$s,T$m){void 0===T$m&&(T$m=!1);var T$x,T$w=T$L.elements;if(T$m){if(T$x=this._localPosition.elements,Math.abs(T$x[0]-T$w[0])<T$zL.zeroTolerance&&Math.abs(T$x[1]-T$w[1])<T$zL.zeroTolerance&&Math.abs(T$x[2]-T$w[2])<T$zL.zeroTolerance)return;T$ms.lookAt(this._localPosition,T$L,T$s,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation;}else{var T$O=this.position;if(T$x=T$O.elements,Math.abs(T$x[0]-T$w[0])<T$zL.zeroTolerance&&Math.abs(T$x[1]-T$w[1])<T$zL.zeroTolerance&&Math.abs(T$x[2]-T$w[2])<T$zL.zeroTolerance)return;T$ms.lookAt(T$O,T$L,T$s,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation;}},T$u(0,T$s,"_isFrontFaceInvert",function(){var T$L=this.scale,T$s=T$L.x<0;return T$L.y<0&&(T$s=!T$s),T$L.z<0&&(T$s=!T$s),T$s;}),T$u(0,T$s,"owner",function(){return this._owner;}),T$u(0,T$s,"localRotation",function(){if(this._localQuaternionUpdate){var T$L=this._localRotationEuler.elements;T$ms.createFromYawPitchRoll(T$L[1]/T$y._angleToRandin,T$L[0]/T$y._angleToRandin,T$L[2]/T$y._angleToRandin,this._localRotation);}return this._localRotation;},function(T$L){this._localRotation=T$L,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform();}),T$u(0,T$s,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?T$Ls.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix;},function(T$L){null===this._parent?T$L.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),T$Ls.multiply(this._localMatrix,T$L,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=T$L,this._worldUpdate=!1;}),T$u(0,T$s,"worldNeedUpdate",function(){return this._worldUpdate;}),T$u(0,T$s,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix;},function(T$L){this._localMatrix=T$L,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform();}),T$u(0,T$s,"dummy",function(){return this._dummy;},function(T$L){this._dummy!==T$L&&(this._dummy&&(this._dummy._entity=null),T$L&&(T$L._entity=this),this._dummy=T$L);}),T$u(0,T$s,"localPosition",function(){return this._localPosition;},function(T$L){this._localPosition=T$L,this._localUpdate=!0,this._onWorldPositionTransform();}),T$u(0,T$s,"position",function(){if(this._positionUpdate){if(null!=this._parent){var T$L=this._parent.position;T$vs.multiply(this._localPosition,this._parent.scale,T$y._tempVector30),T$vs.transformQuat(T$y._tempVector30,this._parent.rotation,T$y._tempVector30),T$vs.add(T$L,T$y._tempVector30,this._position);}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1;}return this._position;},function(T$L){if(null!=this._parent){T$vs.subtract(T$L,this._parent.position,this._localPosition);var T$s=this._parent.scale.elements,T$m=T$s[0],T$x=T$s[1],T$w=T$s[2];if(1!==T$m||1!==T$x||1!==T$w){var T$O=T$y._tempVector30,T$v=T$O.elements;T$v[0]=1/T$m,T$v[1]=1/T$x,T$v[2]=1/T$w,T$vs.multiply(this._localPosition,T$O,this._localPosition);}this._parent.rotation.invert(T$y._tempQuaternion0),T$vs.transformQuat(this._localPosition,T$y._tempQuaternion0,this._localPosition);}else T$L.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=T$L,this._positionUpdate=!1;}),T$u(0,T$s,"localScale",function(){return this._localScale;},function(T$L){this._localScale=T$L,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform();}),T$u(0,T$s,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(T$y._tempVector30);var T$L=T$y._tempVector30.elements,T$s=this._localRotationEuler.elements;T$s[0]=T$L[1]*T$y._angleToRandin,T$s[1]=T$L[0]*T$y._angleToRandin,T$s[2]=T$L[2]*T$y._angleToRandin;}return this._localRotationEuler;},function(T$L){this._localRotationEuler=T$L,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform();}),T$u(0,T$s,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?T$ms.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation;},function(T$L){null!=this._parent?(this._parent.rotation.invert(T$y._tempQuaternion0),T$ms.multiply(T$L,T$y._tempQuaternion0,this._localRotation)):T$L.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=T$L,this._rotationUpdate=!1;}),T$u(0,T$s,"scale",function(){return this._scaleUpdate&&(null!==this._parent?T$vs.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale;},function(T$L){if(null!==this._parent){var T$s=this._parent.scale.elements,T$m=T$y._tempVector30.elements;T$m[0]=1/T$s[0],T$m[1]=1/T$s[1],T$m[2]=1/T$s[2],T$vs.multiply(T$L,T$y._tempVector30,this._localScale);}else T$L.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=T$L,this._scaleUpdate=!1;}),T$u(0,T$s,"rotationEuler",null,function(T$L){T$ms.createFromYawPitchRoll(T$L.y,T$L.x,T$L.z,this._rotation),this.rotation=this._rotation;}),T$u(0,T$s,"forward",function(){var T$L=this.worldMatrix.elements;return this._forward.elements[0]=-T$L[8],this._forward.elements[1]=-T$L[9],this._forward.elements[2]=-T$L[10],this._forward;}),T$u(0,T$s,"up",function(){var T$L=this.worldMatrix.elements;return this._up.elements[0]=T$L[4],this._up.elements[1]=T$L[5],this._up.elements[2]=T$L[6],this._up;}),T$u(0,T$s,"right",function(){var T$L=this.worldMatrix.elements;return this._right.elements[0]=T$L[0],this._right.elements[1]=T$L[1],this._right.elements[2]=T$L[2],this._right;}),T$u(0,T$s,"parent",function(){return this._parent;},function(T$L){if(this._parent!==T$L){if(this._parent){var T$s=this._parent._childs,T$m=T$s.indexOf(this);T$s.splice(T$m,1);}T$L&&(T$L._childs.push(this),T$L&&this._onWorldTransform()),this._parent=T$L;}}),T$C(T$y,["_tempVector30",function(){return this._tempVector30=new T$vs();},"_tempVector31",function(){return this._tempVector31=new T$vs();},"_tempVector32",function(){return this._tempVector32=new T$vs();},"_tempVector33",function(){return this._tempVector33=new T$vs();},"_tempQuaternion0",function(){return this._tempQuaternion0=new T$ms();},"_tempMatrix0",function(){return this._tempMatrix0=new T$Ls();},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI;}]),T$y;}(),T$as=(function(T$L){function T$s(){this._rotation=0,this._matNeedUpdte=!1,T$s.__super.call(this),this._matrix=new T$Ls(),this._offset=new T$Os(),this._tiling=new T$Os(1,1);}T$r(T$s,"laya.d3.core.TransformUV",T$O);var T$m=T$s.prototype;T$H.imps(T$m,{"laya.d3.core.IClone":!0}),T$m._updateMatrix=function(){T$s._tempOffsetV3.elements[0]=this._offset.x,T$s._tempOffsetV3.elements[1]=this._offset.y,T$ms.createFromYawPitchRoll(0,0,this._rotation,T$s._tempRotationQua),T$s._tempTitlingV3.elements[0]=this._tiling.x,T$s._tempTitlingV3.elements[1]=this._tiling.y,T$Ls.createAffineTransformation(T$s._tempOffsetV3,T$s._tempRotationQua,T$s._tempTitlingV3,this._matrix);},T$m.cloneTo=function(T$L){T$L._matrix=this._matrix.clone(),T$L._offset=this._offset.clone(),T$L._rotation=this._rotation,T$L._tiling=this._tiling.clone();},T$m.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$u(0,T$m,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix;}),T$u(0,T$m,"tiling",function(){return this._tiling;},function(T$L){this._tiling=T$L,this._matNeedUpdte=!0;}),T$u(0,T$m,"offset",function(){return this._offset;},function(T$L){this._offset=T$L,this._matNeedUpdte=!0;}),T$u(0,T$m,"rotation",function(){return this._rotation;},function(T$L){this._rotation=T$L,this._matNeedUpdte=!0;}),T$C(T$s,["_tempOffsetV3",function(){return this._tempOffsetV3=new T$vs(0,0,0);},"_tempRotationQua",function(){return this._tempRotationQua=new T$ms();},"_tempTitlingV3",function(){return this._tempTitlingV3=new T$vs(1,1,1);}]);}(),function(T$m){function T$L(){this.x=NaN,this.y=NaN,this.z=NaN,T$L.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1;}T$r(T$L,"laya.d3.core.particleShuriKen.module.shape.BoxShape",T$m);var T$s=T$L.prototype;T$s._getShapeBoundBox=function(T$L){var T$s=T$L.min.elements;T$s[0]=.5*-this.x,T$s[1]=.5*-this.y,T$s[2]=.5*-this.z;var T$m=T$L.max.elements;T$m[0]=.5*this.x,T$m[1]=.5*this.y,T$m[2]=.5*this.z;},T$s._getSpeedBoundBox=function(T$L){var T$s=T$L.min.elements;T$s[0]=0,T$s[1]=0,T$s[2]=0;var T$m=T$L.max.elements;T$m[0]=0,T$m[1]=1,T$m[2]=0;},T$s.generatePositionAndDirection=function(T$L,T$s,T$m,T$x){var T$w=T$L.elements,T$O=T$s.elements;T$m?(T$m.seed=T$x[16],T$n._randomPointInsideHalfUnitBox(T$L,T$m),T$x[16]=T$m.seed):T$n._randomPointInsideHalfUnitBox(T$L),T$w[0]=this.x*T$w[0],T$w[1]=this.y*T$w[1],T$w[2]=this.z*T$w[2],this.randomDirection?T$m?(T$m.seed=T$x[17],T$n._randomPointUnitSphere(T$s,T$m),T$x[17]=T$m.seed):T$n._randomPointUnitSphere(T$s):(T$O[0]=0,T$O[1]=0,T$O[2]=1);},T$s.cloneTo=function(T$L){T$m.prototype.cloneTo.call(this,T$L);var T$s=T$L;T$s.x=this.x,T$s.y=this.y,T$s.z=this.z,T$s.randomDirection=this.randomDirection;};}(T$Z),function(T$m){function T$v(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,T$v.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1;}T$r(T$v,"laya.d3.core.particleShuriKen.module.shape.CircleShape",T$m);var T$L=T$v.prototype;T$L._getShapeBoundBox=function(T$L){var T$s=T$L.min.elements;T$s[0]=T$s[2]=-this.radius,T$s[1]=0;var T$m=T$L.max.elements;T$m[0]=T$m[2]=this.radius,T$m[1]=0;},T$L._getSpeedBoundBox=function(T$L){var T$s=T$L.min.elements;T$s[0]=T$s[1]=-1,T$s[2]=0;var T$m=T$L.max.elements;T$m[0]=T$m[1]=1,T$m[2]=0;},T$L.generatePositionAndDirection=function(T$L,T$s,T$m,T$x){var T$w=T$L.elements,T$O=T$v._tempPositionPoint.elements;T$m?(T$m.seed=T$x[16],this.emitFromEdge?T$n._randomPointUnitArcCircle(this.arc,T$v._tempPositionPoint,T$m):T$n._randomPointInsideUnitArcCircle(this.arc,T$v._tempPositionPoint,T$m),T$x[16]=T$m.seed):this.emitFromEdge?T$n._randomPointUnitArcCircle(this.arc,T$v._tempPositionPoint):T$n._randomPointInsideUnitArcCircle(this.arc,T$v._tempPositionPoint),T$w[0]=-T$O[0],T$w[1]=T$O[1],T$w[2]=0,T$vs.scale(T$L,this.radius,T$L),this.randomDirection?T$m?(T$m.seed=T$x[17],T$n._randomPointUnitSphere(T$s,T$m),T$x[17]=T$m.seed):T$n._randomPointUnitSphere(T$s):T$L.cloneTo(T$s);},T$L.cloneTo=function(T$L){T$m.prototype.cloneTo.call(this,T$L);var T$s=T$L;T$s.radius=this.radius,T$s.arc=this.arc,T$s.emitFromEdge=this.emitFromEdge,T$s.randomDirection=this.randomDirection;},T$C(T$v,["_tempPositionPoint",function(){return this._tempPositionPoint=new T$Os();}]);}(T$Z),function(T$m){function T$E(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,T$E.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1;}T$r(T$E,"laya.d3.core.particleShuriKen.module.shape.ConeShape",T$m);var T$L=T$E.prototype;T$L._getShapeBoundBox=function(T$L){var T$s=this.radius+this.length*Math.sin(this.angle),T$m=this.length*Math.cos(this.angle),T$x=T$L.min.elements;T$x[0]=T$x[1]=-T$s,T$x[2]=0;var T$w=T$L.max.elements;T$w[0]=T$w[1]=T$s,T$w[2]=T$m;},T$L._getSpeedBoundBox=function(T$L){var T$s=Math.sin(this.angle),T$m=T$L.min.elements;T$m[0]=T$m[1]=-T$s,T$m[2]=0;var T$x=T$L.max.elements;T$x[0]=T$m[1]=T$s,T$x[2]=1;},T$L.generatePositionAndDirection=function(T$L,T$s,T$m,T$x){var T$w,T$O=T$L.elements,T$v=T$s.elements,T$y=T$E._tempPositionPoint.elements,T$F=NaN,T$o=NaN,T$V=Math.cos(this.angle),T$C=Math.sin(this.angle);switch(this.emitType){case 0:T$m?(T$m.seed=T$x[16],T$n._randomPointInsideUnitCircle(T$E._tempPositionPoint,T$m),T$x[16]=T$m.seed):T$n._randomPointInsideUnitCircle(T$E._tempPositionPoint),T$F=T$y[0],T$o=T$y[1],T$O[0]=T$F*this.radius,T$O[1]=T$o*this.radius,T$O[2]=0,this.randomDirection?(T$m?(T$m.seed=T$x[17],T$n._randomPointInsideUnitCircle(T$E._tempDirectionPoint,T$m),T$x[17]=T$m.seed):T$n._randomPointInsideUnitCircle(T$E._tempDirectionPoint),T$w=T$E._tempDirectionPoint.elements,T$v[0]=T$w[0]*T$C,T$v[1]=T$w[1]*T$C):(T$v[0]=T$F*T$C,T$v[1]=T$o*T$C),T$v[2]=T$V;break;case 1:T$m?(T$m.seed=T$x[16],T$n._randomPointUnitCircle(T$E._tempPositionPoint,T$m),T$x[16]=T$m.seed):T$n._randomPointUnitCircle(T$E._tempPositionPoint),T$F=T$y[0],T$o=T$y[1],T$O[0]=T$F*this.radius,T$O[1]=T$o*this.radius,T$O[2]=0,this.randomDirection?(T$m?(T$m.seed=T$x[17],T$n._randomPointInsideUnitCircle(T$E._tempDirectionPoint,T$m),T$x[17]=T$m.seed):T$n._randomPointInsideUnitCircle(T$E._tempDirectionPoint),T$w=T$E._tempDirectionPoint.elements,T$v[0]=T$w[0]*T$C,T$v[1]=T$w[1]*T$C):(T$v[0]=T$F*T$C,T$v[1]=T$o*T$C),T$v[2]=T$V;break;case 2:T$m?(T$m.seed=T$x[16],T$n._randomPointInsideUnitCircle(T$E._tempPositionPoint,T$m)):T$n._randomPointInsideUnitCircle(T$E._tempPositionPoint),T$F=T$y[0],T$o=T$y[1],T$O[0]=T$F*this.radius,T$O[1]=T$o*this.radius,T$v[T$O[2]=0]=T$F*T$C,T$v[1]=T$o*T$C,T$v[2]=T$V,T$vs.normalize(T$s,T$s),T$m?(T$vs.scale(T$s,this.length*T$m.getFloat(),T$s),T$x[16]=T$m.seed):T$vs.scale(T$s,this.length*Math.random(),T$s),T$vs.add(T$L,T$s,T$L),this.randomDirection&&(T$m?(T$m.seed=T$x[17],T$n._randomPointUnitSphere(T$s,T$m),T$x[17]=T$m.seed):T$n._randomPointUnitSphere(T$s));break;case 3:T$m?(T$m.seed=T$x[16],T$n._randomPointUnitCircle(T$E._tempPositionPoint,T$m)):T$n._randomPointUnitCircle(T$E._tempPositionPoint),T$F=T$y[0],T$o=T$y[1],T$O[0]=T$F*this.radius,T$O[1]=T$o*this.radius,T$v[T$O[2]=0]=T$F*T$C,T$v[1]=T$o*T$C,T$v[2]=T$V,T$vs.normalize(T$s,T$s),T$m?(T$vs.scale(T$s,this.length*T$m.getFloat(),T$s),T$x[16]=T$m.seed):T$vs.scale(T$s,this.length*Math.random(),T$s),T$vs.add(T$L,T$s,T$L),this.randomDirection&&(T$m?(T$m.seed=T$x[17],T$n._randomPointUnitSphere(T$s,T$m),T$x[17]=T$m.seed):T$n._randomPointUnitSphere(T$s));break;default:throw new Error("ConeShape:emitType is invalid.");}},T$L.cloneTo=function(T$L){T$m.prototype.cloneTo.call(this,T$L);var T$s=T$L;T$s.angle=this.angle,T$s.radius=this.radius,T$s.length=this.length,T$s.emitType=this.emitType,T$s.randomDirection=this.randomDirection;},T$C(T$E,["_tempPositionPoint",function(){return this._tempPositionPoint=new T$Os();},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new T$Os();}]);}(T$Z),function(T$m){function T$L(){this.radius=NaN,this.emitFromShell=!1,T$L.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1;}T$r(T$L,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",T$m);var T$s=T$L.prototype;T$s._getShapeBoundBox=function(T$L){var T$s=T$L.min.elements;T$s[0]=T$s[1]=T$s[2]=-this.radius;var T$m=T$L.max.elements;T$m[0]=T$m[1]=this.radius,T$m[2]=0;},T$s._getSpeedBoundBox=function(T$L){var T$s=T$L.min.elements;T$s[0]=T$s[1]=-1,T$s[2]=0;var T$m=T$L.max.elements;T$m[0]=T$m[1]=T$m[2]=1;},T$s.generatePositionAndDirection=function(T$L,T$s,T$m,T$x){var T$w=T$L.elements;T$m?(T$m.seed=T$x[16],this.emitFromShell?T$n._randomPointUnitSphere(T$L,T$m):T$n._randomPointInsideUnitSphere(T$L,T$m),T$x[16]=T$m.seed):this.emitFromShell?T$n._randomPointUnitSphere(T$L):T$n._randomPointInsideUnitSphere(T$L),T$vs.scale(T$L,this.radius,T$L);var T$O=T$w[2];T$O<0&&(T$w[2]=-1*T$O),this.randomDirection?T$m?(T$m.seed=T$x[17],T$n._randomPointUnitSphere(T$s,T$m),T$x[17]=T$m.seed):T$n._randomPointUnitSphere(T$s):T$L.cloneTo(T$s);},T$s.cloneTo=function(T$L){T$m.prototype.cloneTo.call(this,T$L);var T$s=T$L;T$s.radius=this.radius,T$s.emitFromShell=this.emitFromShell,T$s.randomDirection=this.randomDirection;};}(T$Z),function(T$m){function T$L(){this.radius=NaN,this.emitFromShell=!1,T$L.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1;}T$r(T$L,"laya.d3.core.particleShuriKen.module.shape.SphereShape",T$m);var T$s=T$L.prototype;T$s._getShapeBoundBox=function(T$L){var T$s=T$L.min.elements;T$s[0]=T$s[1]=T$s[2]=-this.radius;var T$m=T$L.max.elements;T$m[0]=T$m[1]=T$m[2]=this.radius;},T$s._getSpeedBoundBox=function(T$L){var T$s=T$L.min.elements;T$s[0]=T$s[1]=T$s[2]=-1;var T$m=T$L.max.elements;T$m[0]=T$m[1]=T$m[2]=1;},T$s.generatePositionAndDirection=function(T$L,T$s,T$m,T$x){T$m?(T$m.seed=T$x[16],this.emitFromShell?T$n._randomPointUnitSphere(T$L,T$m):T$n._randomPointInsideUnitSphere(T$L,T$m),T$x[16]=T$m.seed):this.emitFromShell?T$n._randomPointUnitSphere(T$L):T$n._randomPointInsideUnitSphere(T$L),T$vs.scale(T$L,this.radius,T$L),this.randomDirection?T$m?(T$m.seed=T$x[17],T$n._randomPointUnitSphere(T$s,T$m),T$x[17]=T$m.seed):T$n._randomPointUnitSphere(T$s):T$L.cloneTo(T$s);},T$s.cloneTo=function(T$L){T$m.prototype.cloneTo.call(this,T$L);var T$s=T$L;T$s.radius=this.radius,T$s.emitFromShell=this.emitFromShell,T$s.randomDirection=this.randomDirection;};}(T$Z),function(T$L){function T$s(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,T$s.__super.call(this);}return T$r(T$s,"laya.d3.core.render.SubMeshRenderElement",T$q),T$s;}()),T$fs=function(T$L){function T$j(T$L,T$s,T$m,T$x,T$w,T$O){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=T$L,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[T$rs.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[T$ls.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[T$ls.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[T$is.SHADERDEFINE_ALPHATEST]="ALPHATEST";T$j.__super.call(this,T$L,T$s,T$m,null,{}),this._attributeMap=T$x;var T$v;for(T$v in T$w){var T$y=T$w[T$v];switch(T$y[1]){case 0:this._renderElementUniformMap[T$v]=T$y[0];break;case 1:this._materialUniformMap[T$v]=T$y[0];break;case 2:this._spriteUniformMap[T$v]=T$y[0];break;case 3:this._cameraUniformMap[T$v]=T$y[0];break;case 4:this._sceneUniformMap[T$v]=T$y[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.");}}}T$r(T$j,"laya.d3.shader.ShaderCompile3D",T$b);var T$s=T$j.prototype;return T$s._definesToNameDic=function(T$L,T$s){for(var T$m={},T$x=1,T$w=0;T$w<32&&!(T$L<(T$x=1<<T$w));T$w++)if(T$L&T$x){var T$O=T$s[T$x];T$O&&(T$m[T$O]="");}return T$m;},T$s.withCompile=function(T$L,T$s,T$m,T$x){var T$w,T$O,T$v;if(T$O=this.sharders[T$L]){if(T$v=T$O[T$s]){if(T$w=T$v[T$m])return T$w;}else T$v=T$O[T$s]=[];}else T$v=(T$O=this.sharders[T$L]=[])[T$s]=[];var T$y,T$F=this._definesToNameDic(T$L,T$j._globalInt2name),T$o=this._definesToNameDic(T$s,this._spriteInt2name),T$V=this._definesToNameDic(T$m,this._materialInt2name),T$C={},T$E="";if(T$F)for(T$y in T$F)T$E+="#define "+T$y+"\n",T$C[T$y]=!0;if(T$o)for(T$y in T$o)T$E+="#define "+T$y+"\n",T$C[T$y]=!0;if(T$V)for(T$y in T$V)T$E+="#define "+T$y+"\n",T$C[T$y]=!0;var T$r=T$gs.nameKey.getName(this._name)+" compile ("+T$L+","+T$s+","+T$m+")",T$u=this._VS.toscript(T$C,[]),T$T=this._PS.toscript(T$C,[]);T$h.now();if(T$w=T$gs.create(T$E+T$u.join("\n"),T$E+T$T.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,T$x,T$r),T$v[T$m]=T$w,laya.d3.shader.ShaderCompile3D.debugMode)T$h.now();return T$w;},T$s.precompileShaderWithShaderDefine=function(T$L,T$s,T$m){this.withCompile(T$L,T$s,T$m,!0);},T$s.addMaterialDefines=function(T$L){var T$s=T$L.defines;for(var T$m in T$s){var T$x=T$s[T$m],T$w=parseInt(T$m);this._materialInt2name[T$w]=T$x,this._materialName2Int[T$x]=T$w;}},T$s.addSpriteDefines=function(T$L){var T$s=T$L.defines;for(var T$m in T$s){var T$x=T$s[T$m],T$w=parseInt(T$m);this._spriteInt2name[T$w]=T$x,this._spriteName2Int[T$x]=T$w;}},T$s.getMaterialDefineByName=function(T$L){return this._materialName2Int[T$L];},T$s.registerMaterialDefine=function(T$L){var T$s=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[T$s]=T$L,this._materialName2Int[T$L]=T$s;},T$s.registerSpriteDefine=function(T$L){var T$s=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[T$s]=T$L,this._spriteName2Int[T$L]=T$s;},T$j._globalRegDefine=function(T$L,T$s){T$j._globalInt2name[T$s]=T$L;},T$j.add=function(T$L,T$s,T$m,T$x,T$w){return laya.d3.shader.ShaderCompile3D._preCompileShader[T$L]=new T$j(T$L,T$s,T$m,T$x,T$w,T$b.includes);},T$j.get=function(T$L){return laya.d3.shader.ShaderCompile3D._preCompileShader[T$gs.nameKey.getID(T$L)];},T$j._preCompileShader={},T$j._globalInt2name=[],T$j.debugMode=!1,T$j.SHADERDEFINE_HIGHPRECISION=1,T$j.SHADERDEFINE_FOG=4,T$j.SHADERDEFINE_DIRECTIONLIGHT=8,T$j.SHADERDEFINE_POINTLIGHT=16,T$j.SHADERDEFINE_SPOTLIGHT=32,T$j.SHADERDEFINE_UV0=64,T$j.SHADERDEFINE_COLOR=128,T$j.SHADERDEFINE_UV1=256,T$j.SAHDERDEFINE_DEPTHFOG=131072,T$j;}(),T$_s=function(T$L){function T$u(){T$u.__super.call(this);}T$r(T$u,"laya.d3.graphics.MeshSprite3DStaticBatchManager",T$xL);var T$s=T$u.prototype;return T$s._getStaticBatch=function(T$L,T$s,T$m,T$x){var T$w,T$O;return T$O=T$L?T$L.id.toString()+T$m.id.toString()+T$s.id.toString()+T$x.toString():T$m.id.toString()+T$s.id.toString()+T$x.toString(),this._staticBatches[T$O]?T$w=this._staticBatches[T$O]:this._staticBatches[T$O]=T$w=new T$Qs(T$O,this,T$L,T$s,T$m),T$w;},T$s._initStaticBatchs=function(T$L){var T$s,T$m;this._initBatchRenderElements.sort(T$u._sortPrepareStaticBatch);for(var T$x,T$w=!1,T$O=0,T$v=0,T$y=this._initBatchRenderElements.length;T$v<T$y;T$v++){var T$F,T$o=this._initBatchRenderElements[T$v],T$V=T$o.renderObj._getVertexBuffer(0);T$o._sprite3D;if(T$m===T$V.vertexDeclaration&&T$s===T$o._material){if(T$w)T$x._addCombineBatchRenderObjTest(T$o)?(T$F=T$o._staticBatch)!==T$x&&(T$F&&T$F._deleteCombineBatchRenderObj(T$o),T$x._addCombineBatchRenderObj(T$o)):(T$w=!1,T$O++);else{var T$C=this._initBatchRenderElements[T$v-1],T$E=T$C.renderObj,T$r=T$o.renderObj;T$w=!(65535<T$E._getVertexBuffer().vertexCount+T$r._getVertexBuffer().vertexCount)&&(T$x=this._getStaticBatch(T$L,T$m,T$s,T$O),(T$F=T$C._staticBatch)!==T$x&&(T$F&&T$F._deleteCombineBatchRenderObj(T$C),T$x._addCombineBatchRenderObj(T$C)),(T$F=T$o._staticBatch)!==T$x&&(T$F&&T$F._deleteCombineBatchRenderObj(T$o),T$x._addCombineBatchRenderObj(T$o)),!0);}}else T$w=!1,T$O=0;T$s=T$o._material,T$m=T$V.vertexDeclaration;}},T$u._sortPrepareStaticBatch=function(T$L,T$s){var T$m=T$L._render,T$x=T$s._render,T$w=T$m.lightmapIndex-T$x.lightmapIndex;if(0!=T$w)return T$w;var T$O=T$m.receiveShadow-T$x.receiveShadow;if(0!=T$O)return T$O;var T$v=T$L._mainSortID-T$s._mainSortID;return 0==T$v?T$L.renderObj.triangleCount-T$s.renderObj.triangleCount:T$v;},T$u;}(),T$Qs=function(T$L){function T$O(T$L,T$s,T$m,T$x,T$w){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,T$O.__super.call(this,T$L,T$s,T$m),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=T$x,this._material=T$w;}T$r(T$O,"laya.d3.graphics.SubMeshStaticBatch",T$wL);var T$s=T$O.prototype;return T$s._compareBatchRenderElement=function(T$L,T$s){return T$L._batchIndexStart>T$s._batchIndexStart;},T$s._addCombineBatchRenderObjTest=function(T$L){var T$s=T$L.renderObj._vertexCount;return!(65535<(0<T$s?this._currentCombineVertexCount+T$s:this._currentCombineVertexCount+T$L.renderObj._getVertexBuffer().vertexCount));},T$s._addCombineBatchRenderObj=function(T$L){var T$s=T$L.renderObj,T$m=T$s._vertexCount;this._initBatchRenderElements.push(T$L),T$L._staticBatch=this,0<T$m?(this._currentCombineIndexCount+=T$s._indexCount,this._currentCombineVertexCount+=T$m):(this._currentCombineIndexCount=this._currentCombineIndexCount+T$s._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+T$s._getVertexBuffer().vertexCount),this._needFinishCombine=!0;},T$s._deleteCombineBatchRenderObj=function(T$L){var T$s=T$L.renderObj,T$m=this._initBatchRenderElements.indexOf(T$L);if(-1!==T$m){this._initBatchRenderElements.splice(T$m,1),T$L._staticBatch=null;var T$x=T$s._vertexCount;0<T$x?(this._currentCombineIndexCount=this._currentCombineIndexCount-T$s._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-T$x):(this._currentCombineIndexCount=this._currentCombineIndexCount-T$s._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-T$s._getVertexBuffer().vertexCount),this._needFinishCombine=!0;}},T$s._finishInit=function(){if(this._needFinishCombine){var T$L=0,T$s=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var T$m=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),T$x=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=T$Zs.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=T$ps.create("ushort",this._currentCombineIndexCount,35044);for(var T$w=0,T$O=this._initBatchRenderElements.length;T$w<T$O;T$w++){var T$v=this._initBatchRenderElements[T$w],T$y=T$v.renderObj,T$F=T$y._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,T$v._sprite3D),T$o=T$y.getIndices(),T$V=T$v._sprite3D.transform._isFrontFaceInvert,T$C=T$L/(this._vertexDeclaration.vertexStride/4)-T$y._vertexStart,T$E=T$s,T$r=T$E+T$o.length;T$v._batchIndexStart=T$E,T$v._batchIndexEnd=T$r,T$x.set(T$o,T$s);var T$u=0;if(T$V)for(T$u=T$E;T$u<T$r;T$u+=3){T$x[T$u]=T$C+T$x[T$u];var T$T=T$x[T$u+1],T$j=T$x[T$u+2];T$x[T$u+1]=T$C+T$j,T$x[T$u+2]=T$C+T$T;}else for(T$u=T$E;T$u<T$r;T$u+=3)T$x[T$u]=T$C+T$x[T$u],T$x[T$u+1]=T$C+T$x[T$u+1],T$x[T$u+2]=T$C+T$x[T$u+2];T$s+=T$o.length,T$m.set(T$F,T$L),T$L+=T$F.length;}this._vertexBuffer.setData(T$m),this._indexBuffer.setData(T$x),this._needFinishCombine=!1;}},T$s._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new T$as());},T$s._getRenderElement=function(T$L,T$s,T$m){for(var T$x,T$w,T$O=this._batchRenderElements.length,T$v=!0,T$y=0;T$y<T$O;T$y++){var T$F,T$o,T$V=(T$w=this._batchRenderElements[T$y])._sprite3D._render;if(0!==T$y&&(T$v=(T$F=(T$x=this._batchRenderElements[T$y-1])._sprite3D._render).lightmapIndex!==T$V.lightmapIndex||T$F.receiveShadow!==T$V.receiveShadow||T$x._batchIndexEnd!==T$w._batchIndexStart),T$v){(T$o=this._getCombineRenderElementFromPool()).renderObj=this,T$o._material=this._material,T$o._batchIndexStart=T$w._batchIndexStart,T$o._batchIndexEnd=T$w._batchIndexEnd;var T$C=T$V.lightmapIndex,T$E=T$C+1,T$r=this._batchOwnerIndices[T$E];T$r||(T$r=this._batchOwnerIndices[T$E]=[]);var T$u,T$T=T$r[T$w._render.receiveShadow?1:0];void 0===T$T?(T$r[T$V.receiveShadow?1:0]=this._batchOwners.length,(T$u=new T$Ks(null,"StaticBatchMeshSprite3D"))._scene=T$s,T$u._transform=this._rootOwner?this._rootOwner._transform:null,T$u._render.lightmapIndex=T$C,T$u._render.receiveShadow=T$w._render.receiveShadow,this._batchOwners.push(T$u)):T$u=this._batchOwners[T$T],T$u._render._renderUpdate(T$m),T$o._sprite3D=T$u,T$L.push(T$o);}else T$o._batchIndexEnd=T$w._batchIndexEnd;}},T$s._beforeRender=function(T$L){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0;},T$s._render=function(T$L){var T$s=T$L.renderElement,T$m=T$s._batchIndexStart,T$x=T$s._batchIndexEnd-T$m;T$U.mainContext.drawElements(4,T$x,5123,2*T$m),T$f.drawCall++,T$f.trianglesFaces+=T$x/3;},T$s.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy();},T$s._getVertexBuffer=function(T$L){return void 0===T$L&&(T$L=0),this._vertexBuffer;},T$O;}(),T$Ns=function(T$L){function T$s(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,T$s.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[];}T$r(T$s,"laya.d3.core.ComponentNode",T$o);var T$m=T$s.prototype;return T$m.addComponent=function(T$L){var T$s,T$m=this._componentsMap.indexOf(T$L);if(-1===T$m)T$s=[],this._componentsMap.push(T$L),this._typeComponentsIndices.push(T$s);else if(T$s=this._typeComponentsIndices[T$m],this._components[T$s[0]].isSingleton)throw new Error("无法单实例创建"+T$L+"组件，"+T$L+"组件已存在！");var T$x=T$w.getInstance(T$L);return T$s.push(this._components.length),this._components.push(T$x),T$x instanceof laya.d3.component.Script&&this._scripts.push(T$x),T$x._initialize(this),T$x;},T$m._removeComponent=function(T$L,T$s){var T$m=this._typeComponentsIndices[T$L],T$x=T$m[T$s],T$w=this._components[T$x];this._components.splice(T$x,1),T$w instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(T$w),1),T$m.splice(T$s,1),0===T$m.length&&(this._typeComponentsIndices.splice(T$L,1),this._componentsMap.splice(T$L,1));for(var T$O=0,T$v=this._componentsMap.length;T$O<T$v;T$O++)for(var T$y=(T$m=this._typeComponentsIndices[T$O]).length-1;0<=T$y;T$y--){var T$F=T$m[T$y];if(!(T$x<T$F))break;T$m[T$y]=--T$F;}T$w._destroy();},T$m.getComponentByType=function(T$L,T$s){void 0===T$s&&(T$s=0);var T$m=this._componentsMap.indexOf(T$L);return-1===T$m?null:this._components[this._typeComponentsIndices[T$m][T$s]];},T$m.getComponentsByType=function(T$L,T$s){var T$m=this._componentsMap.indexOf(T$L);if(-1!==T$m){var T$x=this._typeComponentsIndices[T$m],T$w=T$x.length;T$s.length=T$w;for(var T$O=0;T$O<T$w;T$O++)T$s[T$O]=this._components[T$x[T$O]];}else T$s.length=0;},T$m.getComponentByIndex=function(T$L){return this._components[T$L];},T$m.removeComponentByType=function(T$L,T$s){void 0===T$s&&(T$s=0);var T$m=this._componentsMap.indexOf(T$L);-1!==T$m&&this._removeComponent(T$m,T$s);},T$m.removeComponentsByType=function(T$L){var T$s=this._componentsMap.indexOf(T$L);if(-1!==T$s)for(var T$m=this._typeComponentsIndices[T$s],T$x=0,T$w=T$m.length;T$x<T$w;T$m.length<T$w?T$w--:T$x++)this._removeComponent(T$s,T$x);},T$m.removeAllComponent=function(){for(var T$L=0,T$s=this._componentsMap.length;T$L<T$s;this._componentsMap.length<T$s?T$s--:T$L++)this.removeComponentsByType(this._componentsMap[T$L]);},T$m._updateComponents=function(T$L){for(var T$s=0,T$m=this._components.length;T$s<T$m;T$s++){var T$x=this._components[T$s];!T$x.started&&(T$x._start(T$L),T$x.started=!0),T$x.enable&&T$x._update(T$L);}},T$m._lateUpdateComponents=function(T$L){for(var T$s=0;T$s<this._components.length;T$s++){var T$m=this._components[T$s];!T$m.started&&(T$m._start(T$L),T$m.started=!0),T$m.enable&&T$m._lateUpdate(T$L);}},T$m._preRenderUpdateComponents=function(T$L){for(var T$s=0;T$s<this._components.length;T$s++){var T$m=this._components[T$s];!T$m.started&&(T$m._start(T$L),T$m.started=!0),T$m.enable&&T$m._preRenderUpdate(T$L);}},T$m._postRenderUpdateComponents=function(T$L){for(var T$s=0;T$s<this._components.length;T$s++){var T$m=this._components[T$s];!T$m.started&&(T$m._start(T$L),T$m.started=!0),T$m.enable&&T$m._postRenderUpdate(T$L);}},T$s;}(),T$is=function(T$x){function T$L(){T$L.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new T$Es(),this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new T$ys(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0;}T$r(T$L,"laya.d3.core.material.BaseMaterial",T$x);var T$s=T$L.prototype;return T$H.imps(T$s,{"laya.d3.core.IClone":!0}),T$s._addShaderDefine=function(T$L){this._shaderDefineValue|=T$L;},T$s._removeShaderDefine=function(T$L){this._shaderDefineValue&=~T$L;},T$s._addDisablePublicShaderDefine=function(T$L){this._disablePublicShaderDefine|=T$L;},T$s._removeDisablePublicShaderDefine=function(T$L){this._disablePublicShaderDefine&=~T$L;},T$s._setBuffer=function(T$L,T$s){this._shaderValues.setValue(T$L,T$s),this._values[T$L]=T$s;},T$s._getBuffer=function(T$L){return this._values[T$L];},T$s._setMatrix4x4=function(T$L,T$s){this._shaderValues.setValue(T$L,T$s?T$s.elements:null),this._values[T$L]=T$s;},T$s._getMatrix4x4=function(T$L){return this._values[T$L];},T$s._setInt=function(T$L,T$s){this._shaderValues.setValue(T$L,T$s),this._values[T$L]=T$s;},T$s._getInt=function(T$L){return this._values[T$L];},T$s._setNumber=function(T$L,T$s){this._shaderValues.setValue(T$L,T$s),this._values[T$L]=T$s;},T$s._getNumber=function(T$L){return this._values[T$L];},T$s._setBool=function(T$L,T$s){this._shaderValues.setValue(T$L,T$s),this._values[T$L]=T$s;},T$s._getBool=function(T$L){return this._values[T$L];},T$s._setVector2=function(T$L,T$s){this._shaderValues.setValue(T$L,T$s?T$s.elements:null),this._values[T$L]=T$s;},T$s._getVector2=function(T$L){return this._values[T$L];},T$s._setColor=function(T$L,T$s){this._shaderValues.setValue(T$L,T$s?T$s.elements:null),this._values[T$L]=T$s;},T$s._getColor=function(T$L){return this._values[T$L];},T$s._setTexture=function(T$L,T$s){var T$m=this._values[T$L];this._values[T$L]=T$s,this._shaderValues.setValue(T$L,T$s),0<this.referenceCount&&(T$m&&T$m._removeReference(),T$s&&T$s._addReference());},T$s._getTexture=function(T$L){return this._values[T$L];},T$s._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data);},T$s._getShader=function(T$L,T$s,T$m){var T$x=(T$L|T$s)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(T$x,T$m,this._shaderDefineValue),this._shader;},T$s._setRenderStateBlendDepth=function(){var T$L=T$U.mainContext;switch(T$c.setDepthMask(T$L,this.depthWrite),0===this.depthTest?T$c.setDepthTest(T$L,!1):(T$c.setDepthTest(T$L,!0),T$c.setDepthFunc(T$L,this.depthTest)),this.blend){case 0:T$c.setBlend(T$L,!1);break;case 1:T$c.setBlend(T$L,!0),T$c.setBlendFunc(T$L,this.srcBlend,this.dstBlend);break;case 2:T$c.setBlend(T$L,!0);}},T$s._setRenderStateFrontFace=function(T$L,T$s){var T$m=T$U.mainContext,T$x=0;switch(this.cull){case 0:T$c.setCullFace(T$m,!1);break;case 1:T$c.setCullFace(T$m,!0),T$x=T$L?T$s&&T$s._isFrontFaceInvert?2305:2304:T$s&&T$s._isFrontFaceInvert?2304:2305,T$c.setFrontFace(T$m,T$x);break;case 2:T$c.setCullFace(T$m,!0),T$x=T$L?T$s&&T$s._isFrontFaceInvert?2304:2305:T$s&&T$s._isFrontFaceInvert?2305:2304,T$c.setFrontFace(T$m,T$x);}},T$s.onAsynLoaded=function(T$L,T$s,T$m){var T$x=T$s[0],T$w=T$s[1];switch(T$x.version){case"LAYAMATERIAL:01":var T$O=0,T$v=0,T$y=T$x.props;for(var T$F in T$y)switch(T$F){case"vectors":var T$o=T$y[T$F];for(T$O=0,T$v=T$o.length;T$O<T$v;T$O++){var T$V=T$o[T$O],T$C=T$V.value;switch(T$C.length){case 2:this[T$V.name]=new T$Os(T$C[0],T$C[1]);break;case 3:this[T$V.name]=new T$vs(T$C[0],T$C[1],T$C[2]);break;case 4:this[T$V.name]=new T$ys(T$C[0],T$C[1],T$C[2],T$C[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.");}}break;case"textures":var T$E=T$y[T$F];for(T$O=0,T$v=T$E.length;T$O<T$v;T$O++){var T$r=T$E[T$O],T$u=T$r.path;T$u&&(this[T$r.name]=T$D.getRes(T$w[T$u]));}break;case"defines":var T$T=T$y[T$F];for(T$O=0,T$v=T$T.length;T$O<T$v;T$O++){var T$j=this._shaderCompile.getMaterialDefineByName(T$T[T$O]);this._addShaderDefine(T$j);}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[T$F]=T$y[T$F];break;case"renderQueue":switch(T$y[T$F]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3;}break;default:this[T$F]=T$y[T$F];}break;case"LAYAMATERIAL:02":for(T$F in T$y=T$x.props)switch(T$F){case"vectors":for(T$O=0,T$v=(T$o=T$y[T$F]).length;T$O<T$v;T$O++)switch((T$C=(T$V=T$o[T$O]).value).length){case 2:this[T$V.name]=new T$Os(T$C[0],T$C[1]);break;case 3:this[T$V.name]=new T$vs(T$C[0],T$C[1],T$C[2]);break;case 4:this[T$V.name]=new T$ys(T$C[0],T$C[1],T$C[2],T$C[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.");}break;case"textures":for(T$O=0,T$v=(T$E=T$y[T$F]).length;T$O<T$v;T$O++)(T$u=(T$r=T$E[T$O]).path)&&(this[T$r.name]=T$D.getRes(T$w[T$u]));break;case"defines":for(T$O=0,T$v=(T$T=T$y[T$F]).length;T$O<T$v;T$O++)T$j=this._shaderCompile.getMaterialDefineByName(T$T[T$O]),this._addShaderDefine(T$j);break;default:this[T$F]=T$y[T$F];}break;default:throw new Error("BaseMaterial:unkonwn version.");}this._endLoaded();},T$s._addReference=function(){T$x.prototype._addReference.call(this);for(var T$L=0,T$s=this._values.length;T$L<T$s;T$L++){var T$m=this._values[T$L];T$m&&T$m instanceof laya.d3.resource.BaseTexture&&T$m._addReference();}},T$s._removeReference=function(){T$x.prototype._removeReference.call(this);for(var T$L=0,T$s=this._values.length;T$L<T$s;T$L++){var T$m=this._values[T$L];T$m&&T$m instanceof laya.d3.resource.BaseTexture&&T$m._removeReference();}},T$s.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null;},T$s.setShaderName=function(T$L){var T$s=T$gs.nameKey.getID(T$L);if(-1===T$s)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=T$fs._preCompileShader[T$s];},T$s.cloneTo=function(T$L){var T$s=T$L;T$s.name=this.name,T$s.cull=this.cull,T$s.blend=this.blend,T$s.srcBlend=this.srcBlend,T$s.dstBlend=this.dstBlend,T$s.srcBlendRGB=this.srcBlendRGB,T$s.dstBlendRGB=this.dstBlendRGB,T$s.srcBlendAlpha=this.srcBlendAlpha,T$s.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(T$s.blendConstColor),T$s.blendEquation=this.blendEquation,T$s.blendEquationRGB=this.blendEquationRGB,T$s.blendEquationAlpha=this.blendEquationAlpha,T$s.depthTest=this.depthTest,T$s.depthWrite=this.depthWrite,T$s.renderQueue=this.renderQueue,T$s._shader=this._shader,T$s._disablePublicShaderDefine=this._disablePublicShaderDefine,T$s._shaderDefineValue=this._shaderDefineValue;var T$m,T$x=0,T$w=T$s._shaderValues;T$s._shaderValues.data.length=this._shaderValues.data.length;var T$O=this._values.length,T$v=T$s._values;for(T$x=0,T$m=T$v.length=T$O;T$x<T$m;T$x++){var T$y=this._values[T$x];if(T$y)if("number"==typeof T$y)T$v[T$x]=T$y,T$w.data[T$x]=T$y;else if("number"==typeof T$y&&Math.floor(T$y)==T$y)T$v[T$x]=T$y,T$w.data[T$x]=T$y;else if("boolean"==typeof T$y)T$v[T$x]=T$y,T$w.data[T$x]=T$y;else if(T$y instanceof laya.d3.math.Vector2){var T$F=T$v[T$x]||(T$v[T$x]=new T$Os());T$y.cloneTo(T$F),T$w.data[T$x]=T$F.elements;}else if(T$y instanceof laya.d3.math.Vector3){var T$o=T$v[T$x]||(T$v[T$x]=new T$vs());T$y.cloneTo(T$o),T$w.data[T$x]=T$o.elements;}else if(T$y instanceof laya.d3.math.Vector4){var T$V=T$v[T$x]||(T$v[T$x]=new T$ys());T$y.cloneTo(T$V),T$w.data[T$x]=T$V.elements;}else if(T$y instanceof laya.d3.math.Matrix4x4){var T$C=T$v[T$x]||(T$v[T$x]=new T$Ls());T$y.cloneTo(T$C),T$w.data[T$x]=T$C.elements;}else T$y instanceof laya.d3.resource.BaseTexture&&(T$v[T$x]=T$y,T$w.data[T$x]=T$y);}},T$s.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$u(0,T$s,"alphaTestValue",function(){return this._getNumber(0);},function(T$L){this._setNumber(0,T$L);}),T$u(0,T$s,"alphaTest",function(){return this._alphaTest;},function(T$L){(this._alphaTest=T$L)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST);}),T$L.__init__=function(){T$L.SHADERDEFINE_ALPHATEST=T$L.shaderDefines.registerDefine("ALPHATEST");},T$L.RENDERQUEUE_OPAQUE=2e3,T$L.RENDERQUEUE_ALPHATEST=2450,T$L.RENDERQUEUE_TRANSPARENT=3e3,T$L.CULL_NONE=0,T$L.CULL_FRONT=1,T$L.CULL_BACK=2,T$L.BLEND_DISABLE=0,T$L.BLEND_ENABLE_ALL=1,T$L.BLEND_ENABLE_SEPERATE=2,T$L.BLENDPARAM_ZERO=0,T$L.BLENDPARAM_ONE=1,T$L.BLENDPARAM_SRC_COLOR=768,T$L.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,T$L.BLENDPARAM_DST_COLOR=774,T$L.BLENDPARAM_ONE_MINUS_DST_COLOR=775,T$L.BLENDPARAM_SRC_ALPHA=770,T$L.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,T$L.BLENDPARAM_DST_ALPHA=772,T$L.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,T$L.BLENDPARAM_SRC_ALPHA_SATURATE=776,T$L.BLENDEQUATION_ADD=0,T$L.BLENDEQUATION_SUBTRACT=1,T$L.BLENDEQUATION_REVERSE_SUBTRACT=2,T$L.DEPTHTEST_OFF=0,T$L.DEPTHTEST_NEVER=512,T$L.DEPTHTEST_LESS=513,T$L.DEPTHTEST_EQUAL=514,T$L.DEPTHTEST_LEQUAL=515,T$L.DEPTHTEST_GREATER=516,T$L.DEPTHTEST_NOTEQUAL=517,T$L.DEPTHTEST_GEQUAL=518,T$L.DEPTHTEST_ALWAYS=519,T$L.SHADERDEFINE_ALPHATEST=1,T$L.ALPHATESTVALUE=0,T$C(T$L,["shaderDefines",function(){return this.shaderDefines=new T$Vs();}]),T$L;}(T$j),T$Us=function(T$L){function T$s(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,T$s.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1;}T$r(T$s,"laya.d3.resource.BaseTexture",T$j);var T$m=T$s.prototype;return T$u(0,T$m,"width",function(){return this._width;}),T$u(0,T$m,"repeat",function(){return this._repeat;},function(T$L){if(this._repeat!==T$L&&(this._repeat=T$L,this._source)){var T$s=T$U.mainContext;T$c.bindTexture(T$s,this._type,this._source),T$S.isPOT(this._width,this._height)&&this._repeat?(T$s.texParameteri(this._type,10242,10497),T$s.texParameteri(this._type,10243,10497)):(T$s.texParameteri(this._type,10242,33071),T$s.texParameteri(this._type,10243,33071));}}),T$u(0,T$m,"height",function(){return this._height;}),T$u(0,T$m,"magFifter",function(){return this._magFifter;},function(T$L){(this._magFifter=T$L)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(T$L);}),T$u(0,T$m,"wrapModeV",function(){return this._wrapModeV;}),T$u(0,T$m,"size",function(){return this._size;}),T$u(0,T$m,"wrapModeU",function(){return this._wrapModeU;}),T$u(0,T$m,"mipmap",function(){return this._mipmap;},function(T$L){this._mipmap=T$L,this._mipmap!=T$L&&this._conchTexture&&this._conchTexture.setMipMap(T$L);}),T$u(0,T$m,"minFifter",function(){return this._minFifter;},function(T$L){this._minFifter=T$L,this._minFifter!=T$L&&this._conchTexture&&this._conchTexture.setMinFifter(T$L);}),T$u(0,T$m,"format",function(){return this._format;}),T$u(0,T$m,"source",function(){return this.activeResource(),this._source;}),T$u(0,T$m,"defaulteTexture",function(){return T$Is.grayTexture;}),T$s.WARPMODE_REPEAT=0,T$s.WARPMODE_CLAMP=1,T$s;}(),T$cs=function(T$L){function T$s(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,T$s.__super.call(this),this._boundingBoxCorners=T$x(8,null);}T$r(T$s,"laya.d3.resource.models.BaseMesh",T$j);var T$m=T$s.prototype;return T$m._getPositions=function(){throw new Error("未Override,请重载该属性！");},T$m._generateBoundingObject=function(){this._boundingSphere=new T$ML(new T$vs(),0),T$ML.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new T$kL(new T$vs(),new T$vs()),T$kL.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners);},T$m.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！");},T$m.getRenderElement=function(T$L){throw new Error("未Override,请重载该属性！");},T$u(0,T$m,"subMeshCount",function(){return this._subMeshCount;}),T$u(0,T$m,"boundingBox",function(){return this._boundingBox;}),T$u(0,T$m,"boundingBoxCorners",function(){return this._boundingBoxCorners;}),T$u(0,T$m,"boundingSphere",function(){return this._boundingSphere;}),T$s;}(),T$hs=(function(T$L){function T$s(){T$s.__super.call(this);}T$r(T$s,"laya.d3.component.Script",T$bs);var T$m=T$s.prototype;T$m.onTriggerEnter=function(T$L){},T$m.onTriggerExit=function(T$L){},T$m.onTriggerStay=function(T$L){},T$u(0,T$m,"isSingleton",function(){return T$s._isSingleton;}),T$s._isSingleton=!1;}(),function(T$L){function T$s(T$L){this._owner=null,this._sharedMesh=null,T$s.__super.call(this),this._owner=T$L;}T$r(T$s,"laya.d3.core.MeshFilter",T$L);var T$m=T$s.prototype;return T$m._sharedMeshLoaded=function(){this.event("loaded");},T$m._destroy=function(){T$L.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null);},T$u(0,T$m,"sharedMesh",function(){return this._sharedMesh;},function(T$L){var T$s=this._sharedMesh;T$s&&T$s._removeReference(),(this._sharedMesh=T$L)._addReference(),this.event("meshchanged",[this,T$s,T$L]),T$L.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded);}),T$u(0,T$m,"_isAsyncLoaded",function(){return this._sharedMesh.loaded;}),T$u(0,T$m,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners;}),T$u(0,T$m,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere;}),T$u(0,T$m,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox;}),T$s;}(T$Ss)),T$Gs=function(T$L){function T$s(T$L){T$s.__super.call(this,T$L),T$L.meshFilter.on("meshchanged",this,this._onMeshChanged);}T$r(T$s,"laya.d3.core.MeshRender",T$Hs);var T$m=T$s.prototype;return T$m._onMeshChanged=function(T$L,T$s,T$m){T$m.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:T$m.once("loaded",this,this._onMeshLoaed);},T$m._onMeshLoaed=function(T$L,T$s){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0;},T$m._calculateBoundingSphereByInitSphere=function(T$L){var T$s=NaN,T$m=this._owner.transform,T$x=T$m.scale.elements,T$w=Math.abs(T$x[0]),T$O=Math.abs(T$x[1]),T$v=Math.abs(T$x[2]);T$s=T$O<=T$w&&T$v<=T$w?T$w:T$v<=T$O?T$O:T$v,T$vs.transformCoordinate(T$L.center,T$m.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=T$L.radius*T$s;},T$m._calculateBoundBoxByInitCorners=function(T$L){for(var T$s=this._owner.transform.worldMatrix,T$m=0;T$m<8;T$m++)T$vs.transformCoordinate(T$L[T$m],T$s,T$Hs._tempBoundBoxCorners[T$m]);T$kL.createfromPoints(T$Hs._tempBoundBoxCorners,this._boundingBox);},T$m._calculateBoundingSphere=function(){var T$L=this._owner.meshFilter.sharedMesh;null==T$L||null==T$L.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(T$L.boundingSphere);},T$m._calculateBoundingBox=function(){var T$L=this._owner.meshFilter.sharedMesh;null==T$L||null==T$L.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(T$L.boundingBoxCorners);},T$m._renderUpdate=function(T$L){var T$s=this._owner.transform;if(T$s){this._setShaderValueMatrix4x4(0,T$s.worldMatrix);var T$m=this._owner.getProjectionViewWorldMatrix(T$L);this._setShaderValueMatrix4x4(1,T$m);}else this._setShaderValueMatrix4x4(0,T$Ls.DEFAULT),this._setShaderValueMatrix4x4(1,T$L);return T$Ds.debugMode&&this._renderRenderableBoundBox(),!0;},T$s;}(),T$Rs=function(T$s){function T$x(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,T$x.__super.call(this),this._renderState=new T$P(),this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new T$Es(),this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new T$sL(),this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new T$vs(.7,.7,.7),this.ambientColor=new T$vs(.212,.227,.259),T$U.shaderHighPrecision&&this.addShaderDefine(T$fs.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[];}T$r(T$x,"laya.d3.core.scene.Scene",T$s);var T$L=T$x.prototype;return T$H.imps(T$L,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),T$L._setUrl=function(T$L){this._url=T$L;},T$L._getGroup=function(){return this._group;},T$L._setGroup=function(T$L){this._group=T$L;},T$L._display=function(){T$H.stage._scenes.push(this),T$H.stage._scenes.sort(T$x._sortScenes);for(var T$L=0,T$s=this._childs.length;T$L<T$s;T$L++){var T$m=this._childs[T$L];T$m.active&&T$m._activeHierarchy();}},T$L._unDisplay=function(){var T$L=T$H.stage._scenes;T$L.splice(T$L.indexOf(this),1);for(var T$s=0,T$m=this._childs.length;T$s<T$m;T$s++){var T$x=this._childs[T$s];T$x.active&&T$x._inActiveHierarchy();}},T$L._addChild3D=function(T$L){T$L.transform._onWorldTransform(),T$L._setBelongScene(this),this.displayedInStage&&T$L.active&&T$L._activeHierarchy();},T$L._removeChild3D=function(T$L){T$L.transform.parent=null,this.displayedInStage&&T$L.active&&T$L._inActiveHierarchy(),T$L._setUnBelongScene();},T$L.initOctree=function(T$L,T$s,T$m,T$x,T$w){void 0===T$w&&(T$w=6),this.treeSize=new T$vs(T$L,T$s,T$m),this.treeLevel=T$w,this.treeRoot=new T$k(this,0),this.treeRoot.init(T$x,this.treeSize);},T$L._prepareUpdateToRenderState=function(T$L,T$s){T$s.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,T$s.scene=this;},T$L._prepareSceneToRender=function(T$L){var T$s=this._lights.length;if(0<T$s)for(var T$m=0,T$x=0;T$x<T$s&&!(this._lights[T$x]._prepareToScene(T$L)&&++T$m>=this._enableLightCount);T$x++);},T$L._updateChilds=function(T$L){for(var T$s=0,T$m=this._childs.length;T$s<T$m;++T$s)this._childs[T$s]._update(T$L);},T$L._preRenderScene=function(T$L,T$s,T$m){var T$x,T$w=T$s._viewMatrix,T$O=T$s._projectionMatrix,T$v=T$s._projectionViewMatrix,T$y=0,T$F=T$s.camera;for(T$F.useOcclusionCulling?this.treeRoot?T$mL.renderObjectCullingOctree(T$m,this,T$F,T$w,T$O,T$v):T$mL.renderObjectCulling(T$m,this,T$F,T$w,T$O,T$v):T$mL.renderObjectCullingNoBoundFrustum(this,T$F,T$w,T$O,T$v),T$y=0,T$x=this._quenes.length;T$y<T$x;T$y++)this._quenes[T$y]&&this._quenes[T$y]._preRender(T$s);},T$L._clear=function(T$L,T$s){var T$m=T$s._viewport,T$x=T$s.camera,T$w=T$m.x,T$O=T$x.renderTargetSize.height-T$m.y-T$m.height,T$v=T$m.width,T$y=T$m.height;T$L.viewport(T$w,T$O,T$v,T$y);var T$F=256,T$o=T$x.renderTarget;switch(T$x.clearFlag){case 0:var T$V=T$x.clearColor;if(T$V){T$L.enable(3089),T$L.scissor(T$w,T$O,T$v,T$y);var T$C=T$V.elements;T$L.clearColor(T$C[0],T$C[1],T$C[2],T$C[3]),T$F|=16384;}if(T$o)switch(T$V||(T$F=16384),T$o.depthStencilFormat){case 33189:T$F|=256;break;case 36168:T$F|=1024;break;case 34041:T$F|=256,T$F|=1024;}T$L.clear(T$F),T$V&&T$L.disable(3089);break;case 1:case 2:if(T$o)switch(T$F=16384,T$o.depthStencilFormat){case 33189:T$F|=256;break;case 36168:T$F|=1024;break;case 34041:T$F|=256,T$F|=1024;}T$L.clear(T$F);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.");}},T$L._renderScene=function(T$L,T$s){var T$m,T$x,T$w=T$s.camera,T$O=0;for(T$O=0;T$O<2;T$O++)(T$x=this._quenes[T$O])&&(T$w.renderTarget?T$x._render(T$s,!0):T$x._render(T$s,!1));if(1===T$w.clearFlag){var T$v=T$w.sky;T$v&&(T$c.setCullFace(T$L,!1),T$c.setDepthFunc(T$L,515),T$c.setDepthMask(T$L,!1),T$v._render(T$s),T$c.setDepthFunc(T$L,513),T$c.setDepthMask(T$L,!0));}for(T$O=2,T$m=this._quenes.length;T$O<T$m;T$O++)(T$x=this._quenes[T$O])&&(T$x._sortAlpha(T$s.camera.transform.position),T$w.renderTarget?T$x._render(T$s,!0):T$x._render(T$s,!1));},T$L._set3DRenderConfig=function(T$L){T$L.disable(3042),T$c._blend=!1,T$L.blendFunc(770,771),T$c._sFactor=770,T$c._dFactor=771,T$L.disable(2929),T$c._depthTest=!1,T$L.enable(2884),T$c._cullFace=!0,T$L.depthMask(1),T$c._depthMask=!0,T$L.frontFace(2304),T$c._frontFace=2304;},T$L._set2DRenderConfig=function(T$L){T$c.setBlend(T$L,!0),T$c.setBlendFunc(T$L,1,771),T$c.setDepthTest(T$L,!1),T$c.setCullFace(T$L,!1),T$c.setDepthMask(T$L,!0),T$c.setFrontFace(T$L,2305),T$L.viewport(0,0,T$V.width,T$V.height);},T$L._parseCustomProps=function(T$L,T$s,T$m,T$x){var T$w=T$x.customProps.lightmaps,T$O=T$w.length,T$v=this._lightmaps;T$v.length=T$O;for(var T$y=0;T$y<T$O;T$y++)T$v[T$y]=T$D.getRes(T$s[T$w[T$y].replace(".exr",".png")]);this.setlightmaps(T$v);var T$F=T$x.customProps.ambientColor;T$F&&(this.ambientColor=new T$vs(T$F[0],T$F[1],T$F[2]));var T$o=T$x.customProps.fogColor;T$o&&(this.fogColor=new T$vs(T$o[0],T$o[1],T$o[2]));},T$L._addLight=function(T$L){this._lights.indexOf(T$L)<0&&this._lights.push(T$L);},T$L._removeLight=function(T$L){var T$s=this._lights.indexOf(T$L);0<=T$s&&this._lights.splice(T$s,1);},T$L._updateScene=function(){var T$L=this._renderState;this._prepareUpdateToRenderState(T$U.mainContext,T$L),this._updateComponents(T$L),this._updateChilds(T$L),this._lateUpdateComponents(T$L),this._time+=T$L.elapsedTime/1e3,this._shaderValues.setValue(22,this._time);},T$L._updateSceneConch=function(){var T$L=this._renderState;this._prepareUpdateToRenderState(T$U.mainContext,T$L),this._updateComponents(T$L),this._lateUpdateComponents(T$L),this._prepareSceneToRender(T$L);for(var T$s=0,T$m=this._cameraPool.length;T$s<T$m;T$s++){var T$x=this._cameraPool[T$s];(T$L.camera=T$x)._prepareCameraToRender();}},T$L._preRenderShadow=function(T$L,T$s,T$m,T$x,T$w){this.treeRoot?T$mL.renderShadowObjectCullingOctree(this,T$s,T$m,T$x,T$w):T$mL.renderShadowObjectCulling(this,T$s,T$m,T$x,T$w);for(var T$O=0,T$v=T$m.length;T$O<T$v;T$O++)T$m[T$O]&&T$m[T$O]._preRender(T$L);},T$L._renderShadowMap=function(T$L,T$s,T$m){var T$x=this.parallelSplitShadowMaps[0];T$x._calcAllLightCameraInfo(T$m);var T$w,T$O,T$v,T$y=T$x.PSSMNum;if(this._preRenderShadow(T$s,T$x._lightCulling,T$x._shadowQuenes,T$x._lightVPMatrix[0],T$y),this.addShaderDefine(T$rs.SHADERDEFINE_CAST_SHADOW),1<T$y)for(var T$F=0;T$F<T$y;T$F++)T$w=T$x.getRenderTarget(T$F+1),T$x.beginRenderTarget(T$F+1),T$L.clearColor(1,1,1,1),T$L.clear(16640),T$L.viewport(0,0,T$w.width,T$w.height),T$s.camera=T$v=T$x.getLightCamera(T$F),T$v._prepareCameraToRender(),T$v._prepareCameraViewProject(T$v.viewMatrix,T$v.projectionMatrix),T$s._projectionViewMatrix=T$x._lightVPMatrix[T$F+1],(T$O=T$x._shadowQuenes[T$F])._preRender(T$s),T$O._renderShadow(T$s,!1),T$x.endRenderTarget(T$F+1);else T$w=T$x.getRenderTarget(1),T$x.beginRenderTarget(1),T$L.clearColor(1,1,1,1),T$L.clear(16640),T$L.viewport(0,0,T$w.width,T$w.height),T$s.camera=T$v=T$x.getLightCamera(0),T$v._prepareCameraToRender(),T$v._prepareCameraViewProject(T$v.viewMatrix,T$v.projectionMatrix),T$s._projectionViewMatrix=T$x._lightVPMatrix[0],(T$O=T$x._shadowQuenes[0])._preRender(T$s),T$O._renderShadow(T$s,!0),T$x.endRenderTarget(1);this.removeShaderDefine(T$rs.SHADERDEFINE_CAST_SHADOW);},T$L.addTreeNode=function(T$L){this.treeRoot.addTreeNode(T$L);},T$L.removeTreeNode=function(T$L){this.treeSize&&T$L._treeNode&&T$L._treeNode.removeObject(T$L);},T$L.setlightmaps=function(T$L){this._lightmaps=T$L;for(var T$s=0,T$m=this._renderableSprite3Ds.length;T$s<T$m;T$s++)this._renderableSprite3Ds[T$s]._render._applyLightMapParams();},T$L.getlightmaps=function(){return this._lightmaps;},T$L.addChildAt=function(T$L,T$s){if(!(T$L instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(T$L&&T$L.__className));if(!T$L||this.destroyed||T$L===this)return T$L;if(T$L.zOrder&&this._set$P("hasZorder",!0),0<=T$s&&T$s<=this._childs.length){if(T$L._parent===this){var T$m=this.getChildIndex(T$L);this._childs.splice(T$m,1),this._childs.splice(T$s,0,T$L),this.conchModel&&(this.conchModel.removeChild(T$L.conchModel),this.conchModel.addChildAt(T$L.conchModel,T$s)),this._childChanged();}else T$L.parent&&T$L.parent.removeChild(T$L),this._childs===T$o.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(T$s,0,T$L),this.conchModel&&this.conchModel.addChildAt(T$L.conchModel,T$s),(T$L.parent=this)._addChild3D(T$L);return T$L;}throw new Error("appendChildAt:The index is out of bounds");},T$L.addChild=function(T$L){if(!(T$L instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!T$L||this.destroyed||T$L===this)return T$L;if(T$L.zOrder&&this._set$P("hasZorder",!0),T$L._parent===this){var T$s=this.getChildIndex(T$L);T$s!==this._childs.length-1&&(this._childs.splice(T$s,1),this._childs.push(T$L),this.conchModel&&(this.conchModel.removeChild(T$L.conchModel),this.conchModel.addChildAt(T$L.conchModel,this._childs.length-1)),this._childChanged());}else T$L.parent&&T$L.parent.removeChild(T$L),this._childs===T$o.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(T$L),this.conchModel&&this.conchModel.addChildAt(T$L.conchModel,this._childs.length-1),(T$L.parent=this)._childChanged(),this._addChild3D(T$L);return T$L;},T$L.removeChildAt=function(T$L){var T$s=this.getChildAt(T$L);return T$s&&(this._removeChild3D(T$s),this._childs.splice(T$L,1),this.conchModel&&this.conchModel.removeChild(T$s.conchModel),T$s.parent=null),T$s;},T$L.removeChildren=function(T$L,T$s){if(void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=2147483647),this._childs&&0<this._childs.length){var T$m=this._childs;if(0===T$L&&T$O<=T$s){var T$x=T$m;this._childs=T$o.ARRAY_EMPTY;}else T$x=T$m.splice(T$L,T$s-T$L);for(var T$w=0,T$O=T$x.length;T$w<T$O;T$w++)this._removeChild3D(T$x[T$w]),T$x[T$w].parent=null,this.conchModel&&this.conchModel.removeChild(T$x[T$w].conchModel);}return this;},T$L.addFrustumCullingObject=function(T$L){this.treeRoot?this.addTreeNode(T$L):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(T$L):this._cullingRenders[this._cullingRendersLength]=T$L,T$L._indexInSceneFrustumCullingObjects=this._cullingRendersLength++);},T$L.removeFrustumCullingObject=function(T$L){if(this.treeRoot)this.removeTreeNode(T$L);else{this._cullingRendersLength--;var T$s=T$L._indexInSceneFrustumCullingObjects;if(T$s!==this._cullingRendersLength){var T$m=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[T$s]=T$m)._indexInSceneFrustumCullingObjects=T$s,T$L._indexInSceneFrustumCullingObjects=-1;}}},T$L.getRenderQueue=function(T$L){return T$L<3e3?this._quenes[1]||(this._quenes[1]=new T$K(this)):this._quenes[2]||(this._quenes[2]=new T$K(this));},T$L.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new T$K(this);},T$L.addShaderDefine=function(T$L){this._shaderDefineValue|=T$L;},T$L.removeShaderDefine=function(T$L){this._shaderDefineValue&=~T$L;},T$L.addScript=function(T$L){return this._addComponent(T$L);},T$L.getScriptByType=function(T$L,T$s){return void 0===T$s&&(T$s=0),this._getComponentByType(T$L,T$s);},T$L.getScriptsByType=function(T$L,T$s){this._getComponentsByType(T$L,T$s);},T$L.getScriptByIndex=function(T$L){return this._getComponentByIndex(T$L);},T$L.removeScriptByType=function(T$L,T$s){void 0===T$s&&(T$s=0),this._removeComponentByType(T$L,T$s);},T$L.removeScriptsByType=function(T$L){this._removeComponentByType(T$L);},T$L.removeAllScript=function(){this._removeAllComponent();},T$L.render=function(T$L,T$s,T$m){(T$T._context.ctx._renderKey=0)<this._childs.length&&T$L.addRenderObject(this);},T$L.renderSubmit=function(){var T$L=T$U.mainContext,T$s=this._renderState;this._set3DRenderConfig(T$L),this._prepareSceneToRender(this._renderState);var T$m,T$x=0,T$w=0;if(T$Ds.debugMode||T$k.debugMode)for(T$x=0,T$w=this._cameraPool.length;T$x<T$w;T$x++)T$m=this._cameraPool[T$x],T$Ds._debugPhasorSprite.begin(1,T$m),T$m.activeInHierarchy&&T$m._renderCamera(T$L,T$s,this),T$Ds._debugPhasorSprite.end();else for(T$x=0,T$w=this._cameraPool.length;T$x<T$w;T$x++)(T$m=this._cameraPool[T$x]).activeInHierarchy&&T$m._renderCamera(T$L,T$s,this);return this._set2DRenderConfig(T$L),1;},T$L.onAsynLoaded=function(T$L,T$s,T$m){var T$x=T$s[0];if("Scene"!==T$x.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var T$w=T$s[1];T$js._createNodeByJson(this,T$x,this,T$w),this.event("hierarchyloaded",[this]),this.__loaded=!0;},T$L.destroy=function(T$L){void 0===T$L&&(T$L=!0),this.destroyed||(T$s.prototype.destroy.call(this,T$L),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,T$D.clearRes(this.url),this.loaded||T$Ds._cancelLoadByUrl(this.url));},T$L.getRenderType=function(){return 0;},T$L.releaseRender=function(){},T$L._addComponent=function(T$L){var T$s,T$m=this._componentsMap.indexOf(T$L);if(-1===T$m)T$s=[],this._componentsMap.push(T$L),this._typeComponentsIndices.push(T$s);else if(T$s=this._typeComponentsIndices[T$m],this._components[T$s[0]].isSingleton)throw new Error("无法单实例创建"+T$L+"组件，"+T$L+"组件已存在！");var T$x=T$w.getInstance(T$L);T$s.push(this._components.length),this._components.push(T$x);return T$x._initialize(this),T$x;},T$L._removeComponent=function(T$L,T$s){var T$m=this._typeComponentsIndices[T$L],T$x=T$m[T$s],T$w=this._components[T$x];this._components.splice(T$x,1),T$m.splice(T$s,1),0===T$m.length&&(this._typeComponentsIndices.splice(T$L,1),this._componentsMap.splice(T$L,1));for(var T$O=0,T$v=this._componentsMap.length;T$O<T$v;T$O++)for(var T$y=(T$m=this._typeComponentsIndices[T$O]).length-1;0<=T$y;T$y--){var T$F=T$m[T$y];if(!(T$x<T$F))break;T$m[T$y]=--T$F;}T$w._destroy();},T$L._getComponentByType=function(T$L,T$s){void 0===T$s&&(T$s=0);var T$m=this._componentsMap.indexOf(T$L);return-1===T$m?null:this._components[this._typeComponentsIndices[T$m][T$s]];},T$L._getComponentsByType=function(T$L,T$s){var T$m=this._componentsMap.indexOf(T$L);if(-1!==T$m){var T$x=this._typeComponentsIndices[T$m],T$w=T$x.length;T$s.length=T$w;for(var T$O=0;T$O<T$w;T$O++)T$s[T$O]=this._components[T$x[T$O]];}else T$s.length=0;},T$L._getComponentByIndex=function(T$L){return this._components[T$L];},T$L._removeComponentByType=function(T$L,T$s){void 0===T$s&&(T$s=0);var T$m=this._componentsMap.indexOf(T$L);-1!==T$m&&this._removeComponent(T$m,T$s);},T$L._removeComponentsByType=function(T$L){var T$s=this._componentsMap.indexOf(T$L);if(-1!==T$s)for(var T$m=this._typeComponentsIndices[T$s],T$x=0,T$w=T$m.length;T$x<T$w;T$m.length<T$w?T$w--:T$x++)this._removeComponent(T$s,T$x);},T$L._removeAllComponent=function(){for(var T$L=0,T$s=this._componentsMap.length;T$L<T$s;this._componentsMap.length<T$s?T$s--:T$L++)this._removeComponentsByType(this._componentsMap[T$L]);},T$L._updateComponents=function(T$L){for(var T$s=0,T$m=this._components.length;T$s<T$m;T$s++){var T$x=this._components[T$s];!T$x.started&&(T$x._start(T$L),T$x.started=!0),T$x.enable&&T$x._update(T$L);}},T$L._lateUpdateComponents=function(T$L){for(var T$s=0;T$s<this._components.length;T$s++){var T$m=this._components[T$s];!T$m.started&&(T$m._start(T$L),T$m.started=!0),T$m.enable&&T$m._lateUpdate(T$L);}},T$L._preRenderUpdateComponents=function(T$L){for(var T$s=0;T$s<this._components.length;T$s++){var T$m=this._components[T$s];!T$m.started&&(T$m._start(T$L),T$m.started=!0),T$m.enable&&T$m._preRenderUpdate(T$L);}},T$L._postRenderUpdateComponents=function(T$L){for(var T$s=0;T$s<this._components.length;T$s++){var T$m=this._components[T$s];!T$m.started&&(T$m._start(T$L),T$m.started=!0),T$m.enable&&T$m._postRenderUpdate(T$L);}},T$u(0,T$L,"_loaded",null,function(T$L){this.__loaded=T$L;}),T$u(0,T$L,"fogColor",function(){return this._fogColor;},function(T$L){this._fogColor=T$L,this._shaderValues.setValue(0,T$L.elements);}),T$u(0,T$L,"enableFog",function(){return this._enableFog;},function(T$L){this._enableFog!==T$L&&((this._enableFog=T$L)?(this.addShaderDefine(T$fs.SHADERDEFINE_FOG),this.removeShaderDefine(T$fs.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(T$fs.SHADERDEFINE_FOG));}),T$u(0,T$L,"url",function(){return this._url;}),T$u(0,T$L,"loaded",function(){return this.__loaded;}),T$u(0,T$L,"enableDepthFog",function(){return this._enableDepthFog;},function(T$L){this._enableDepthFog!=T$L&&((this._enableDepthFog=T$L)?(this.addShaderDefine(T$fs.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(T$fs.SHADERDEFINE_FOG)):this.removeShaderDefine(T$fs.SAHDERDEFINE_DEPTHFOG));}),T$u(0,T$L,"fogStart",function(){return this._fogStart;},function(T$L){this._fogStart=T$L,this._shaderValues.setValue(1,T$L);}),T$u(0,T$L,"fogRange",function(){return this._fogRange;},function(T$L){this._fogRange=T$L,this._shaderValues.setValue(2,T$L);}),T$u(0,T$L,"ambientColor",function(){return this._ambientColor;},function(T$L){this._ambientColor=T$L,this._shaderValues.setValue(21,T$L.elements);}),T$u(0,T$L,"scene",function(){return this;}),T$u(0,T$L,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice();}),T$x._sortScenes=function(T$L,T$s){if(T$L.parent!==T$H.stage||T$s.parent!==T$H.stage)return T$L.parent!==T$H.stage&&T$s.parent!==T$H.stage?T$x._sortScenes(T$L.parent,T$s.parent):T$L.parent===T$H.stage?-1:1;var T$m=T$H.stage._childs;return T$m.indexOf(T$L)-T$m.indexOf(T$s);},T$x.load=function(T$L){return T$H.loader.create(T$L,null,null,T$x);},T$x.FOGCOLOR=0,T$x.FOGSTART=1,T$x.FOGRANGE=2,T$x.LIGHTDIRECTION=3,T$x.LIGHTDIRCOLOR=4,T$x.POINTLIGHTPOS=5,T$x.POINTLIGHTRANGE=6,T$x.POINTLIGHTATTENUATION=7,T$x.POINTLIGHTCOLOR=8,T$x.SPOTLIGHTPOS=9,T$x.SPOTLIGHTDIRECTION=10,T$x.SPOTLIGHTSPOT=11,T$x.SPOTLIGHTRANGE=12,T$x.SPOTLIGHTATTENUATION=13,T$x.SPOTLIGHTCOLOR=14,T$x.SHADOWDISTANCE=15,T$x.SHADOWLIGHTVIEWPROJECT=16,T$x.SHADOWMAPPCFOFFSET=17,T$x.SHADOWMAPTEXTURE1=18,T$x.SHADOWMAPTEXTURE2=19,T$x.SHADOWMAPTEXTURE3=20,T$x.AMBIENTCOLOR=21,T$x.TIME=22,T$x;}(T$a),T$As=function(T$L){function T$s(T$L){T$s.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new T$Ls(),this._shaderValues=new T$Es(),this._colliders=[],this._id=++T$s._uniqueIDCounter,this._transform=new T$Ys(this),this.name=T$L||"Sprite3D-"+T$s._nameNumberCounter++,this.layer=T$G.currentCreationLayer,this.active=!0;}T$r(T$s,"laya.d3.core.Sprite3D",T$Ns);var T$m=T$s.prototype;return T$H.imps(T$m,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),T$m._setUrl=function(T$L){this._url=T$L;},T$m._getGroup=function(){return this._group;},T$m._setGroup=function(T$L){this._group=T$L;},T$m._addChild3D=function(T$L){T$L.transform.parent=this.transform,this._hierarchyAnimator&&(!T$L._hierarchyAnimator&&T$L._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(T$L,!0,[T$L.name])),this._scene&&(T$L._setBelongScene(this._scene),this._activeInHierarchy&&T$L._active&&T$L._activeHierarchy());},T$m._removeChild3D=function(T$L){T$L.transform.parent=null,this._scene&&(this._activeInHierarchy&&T$L._active&&T$L._inActiveHierarchy(),T$L._setUnBelongScene()),this._hierarchyAnimator&&(T$L._hierarchyAnimator==this._hierarchyAnimator&&T$L._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(T$L,!1,[T$L.name]));},T$m._parseBaseCustomProps=function(T$L){var T$s=this.transform.localPosition;T$L.translate?(T$s.fromArray(T$L.translate),T$s.x*=100,T$s.y*=100,T$s.z*=100):T$s.elements.fill(0),this.transform.localPosition=T$s;var T$m=this.transform.localRotation;T$L.rotation?T$m.fromArray(T$L.rotation):T$m.fromArray([0,0,0,-1]),this.transform.localRotation=T$m;var T$x=this.transform.localScale;T$L.scale?T$x.fromArray(T$L.scale):T$x.elements.fill(1),this.transform.localScale=T$x;var T$w=T$L.layer;null!=T$w&&(this.layer=T$G.getLayerByNumber(T$w));},T$m._parseCustomComponent=function(T$L,T$s,T$m){for(var T$x in T$m){var T$w=T$m[T$x];switch(T$x){case"Animator":var T$O=this.addComponent(Animator);if(T$w.avatarPath)T$O.avatar=T$D.getRes(T$s[T$w.avatarPath]);else{var T$v=T$w.avatar;if(T$v){T$O.avatar=T$D.getRes(T$s[T$v.path]);var T$y=T$v.linkSprites;T$y&&T$L.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[T$O,T$y]);}}for(var T$F=T$w.clipPaths,T$o=T$F.length,T$V=0;T$V<T$o;T$V++)T$O.addClip(T$D.getRes(T$s[T$F[T$V]]));T$O.clip=T$D.getRes(T$s[T$F[0]]);var T$C=T$w.playOnWake;void 0!==T$C&&(T$O.playOnWake=T$C);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var T$E=this.addComponent(SphereCollider);T$E.isTrigger=T$w.isTrigger;var T$r=T$E.center;T$r.fromArray(T$w.center),T$E.center=T$r,T$E.radius=T$w.radius;break;case"BoxCollider":var T$u=this.addComponent(BoxCollider);T$u.isTrigger=T$w.isTrigger,T$u.center.fromArray(T$w.center);var T$T=T$u.size;T$T.fromArray(T$w.size),T$u.size=T$T;break;case"MeshCollider":this.addComponent(MeshCollider);}}},T$m._onRootNodeHierarchyLoaded=function(T$L,T$s){for(var T$m in T$s){for(var T$x=this,T$w=T$s[T$m],T$O=0,T$v=T$w.length;T$O<T$v;T$O++){var T$y=T$w[T$O];if(""===T$y)break;if(!(T$x=T$x.getChildByName(T$y)))break;}T$x&&T$L.linkSprite3DToAvatarNode(T$m,T$x);}},T$m._setHierarchyAnimator=function(T$L,T$s){this._changeHierarchyAnimator(T$L);for(var T$m=0,T$x=this._childs.length;T$m<T$x;T$m++){var T$w=this._childs[T$m];T$w._hierarchyAnimator==T$s&&T$w._setHierarchyAnimator(T$L,T$s);}},T$m._clearHierarchyAnimator=function(T$L,T$s){this._changeHierarchyAnimator(T$s);for(var T$m=0,T$x=this._childs.length;T$m<T$x;T$m++){var T$w=this._childs[T$m];T$w._hierarchyAnimator==T$L&&T$w._clearHierarchyAnimator(T$L,T$s);}},T$m._getAnimatorToLinkSprite3D=function(T$L,T$s,T$m){var T$x=this.getComponentByType(Animator);if(T$x&&(T$x.avatar?T$x.avatar._version||T$L._setAnimatorToLinkAvatar(T$x,T$s):T$L._setAnimatorToLinkSprite3DNoAvatar(T$x,T$s,T$m)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){T$m.unshift(this._parent.name);var T$w=this._parent;T$w._hierarchyAnimator&&T$w._getAnimatorToLinkSprite3D(T$L,T$s,T$m);}},T$m._setAnimatorToLinkSprite3DNoAvatar=function(T$L,T$s,T$m){var T$x=0,T$w=0;for(T$x=0,T$w=T$L.getClipCount();T$x<T$w;T$x++)T$L._handleSpriteOwnersBySprite(T$x,T$s,T$m,this);for(T$x=0,T$w=this._childs.length;T$x<T$w;T$x++){var T$O=this._childs[T$x],T$v=T$m.length;T$m.push(T$O.name),T$O._setAnimatorToLinkSprite3DNoAvatar(T$L,T$s,T$m),T$m.splice(T$v,1);}},T$m._changeHierarchyAnimator=function(T$L){this._hierarchyAnimator=T$L;},T$m._isLinkSpriteToAnimationNode=function(T$L,T$s,T$m){var T$x=T$L._avatarNodes.indexOf(T$s),T$w=T$L._cacheSpriteToNodesMap;if(T$m)this._transform.dummy=T$s.transform,T$L._cacheNodesToSpriteMap[T$x]=T$w.length,T$w.push(T$x);else{this._transform.dummy=null;var T$O=T$L._cacheNodesToSpriteMap[T$x];T$L._cacheNodesToSpriteMap[T$x]=null,T$w.splice(T$O,1);}},T$m._setBelongScene=function(T$L){this._scene=T$L;for(var T$s=0,T$m=this._childs.length;T$s<T$m;T$s++)this._childs[T$s]._setBelongScene(T$L);},T$m._setUnBelongScene=function(){this._scene=null;for(var T$L=0,T$s=this._childs.length;T$L<T$s;T$L++)this._childs[T$L]._setUnBelongScene();},T$m._activeHierarchy=function(){var T$L=0,T$s=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),T$L=0,T$s=this._colliders.length;T$L<T$s;T$L++)this._layer._addCollider(this._colliders[T$L]);for(this.event("activeinhierarchychanged",!0),T$L=0,T$s=this._childs.length;T$L<T$s;T$L++){var T$m=this._childs[T$L];T$m._active&&T$m._activeHierarchy();}},T$m._inActiveHierarchy=function(){var T$L=0,T$s=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),T$L=0,T$s=this._colliders.length;T$L<T$s;T$L++){var T$m=this._colliders[T$L];T$m._clearCollsionMap(),this._layer._removeCollider(T$m);}for(this.event("activeinhierarchychanged",!1),T$L=0,T$s=this._childs.length;T$L<T$s;T$L++){var T$x=this._childs[T$L];T$x._active&&T$x._inActiveHierarchy();}},T$m.addComponent=function(T$L){var T$s,T$m=this._componentsMap.indexOf(T$L);if(-1===T$m)T$s=[],this._componentsMap.push(T$L),this._typeComponentsIndices.push(T$s);else if(T$s=this._typeComponentsIndices[T$m],this._components[T$s[0]].isSingleton)throw new Error("无法单实例创建"+T$L+"组件，"+T$L+"组件已存在！");var T$x=T$w.getInstance(T$L);return T$s.push(this._components.length),this._components.push(T$x),T$x instanceof laya.d3.component.Script&&this._scripts.push(T$x),T$x._initialize(this),T$x;},T$m._removeComponent=function(T$L,T$s){var T$m,T$x=0,T$w=this._typeComponentsIndices[T$L],T$O=T$w[T$s],T$v=this._components[T$O];for(T$v instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(T$v),1),T$w.splice(T$s,1),0===T$w.length&&(this._typeComponentsIndices.splice(T$L,1),this._componentsMap.splice(T$L,1)),T$x=0,T$m=this._componentsMap.length;T$x<T$m;T$x++)for(var T$y=(T$w=this._typeComponentsIndices[T$x]).length-1;0<=T$y;T$y--){var T$F=T$w[T$y];if(!(T$O<T$F))break;T$w[T$y]=--T$F;}T$v._destroy();},T$m._clearSelfRenderObjects=function(){},T$m._addSelfRenderObjects=function(){},T$m._parseCustomProps=function(T$L,T$s,T$m,T$x){},T$m._updateChilds=function(T$L){var T$s=this._childs.length;if(0!==T$s)for(var T$m=0;T$m<T$s;++T$m)this._childs[T$m]._update(T$L);},T$m._getSortID=function(T$L,T$s){return 1e3*T$s.id+T$L._getVertexBuffer().vertexDeclaration.id;},T$m._update=function(T$L){(T$L.owner=this)._activeInHierarchy&&(this._updateComponents(T$L),this._lateUpdateComponents(T$L),T$f.spriteCount++,this._childs.length&&this._updateChilds(T$L));},T$m.getProjectionViewWorldMatrix=function(T$L){return T$Ls.multiply(T$L,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix;},T$m.loadHierarchy=function(T$L){this.addChild(laya.d3.core.Sprite3D.load(T$L));},T$m.addChildAt=function(T$L,T$s){if(!(T$L instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!T$L||this.destroyed||T$L===this)return T$L;if(T$L.zOrder&&this._set$P("hasZorder",!0),0<=T$s&&T$s<=this._childs.length){if(T$L._parent===this){var T$m=this.getChildIndex(T$L);this._childs.splice(T$m,1),this._childs.splice(T$s,0,T$L),this.conchModel&&(this.conchModel.removeChild(T$L.conchModel),this.conchModel.addChildAt(T$L.conchModel,T$s)),this._childChanged();}else T$L.parent&&T$L.parent.removeChild(T$L),this._childs===T$o.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(T$s,0,T$L),this.conchModel&&this.conchModel.addChildAt(T$L.conchModel,T$s),(T$L.parent=this)._addChild3D(T$L);return T$L;}throw new Error("appendChildAt:The index is out of bounds");},T$m.addChild=function(T$L){if(!(T$L instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!T$L||this.destroyed||T$L===this)return T$L;if(T$L.zOrder&&this._set$P("hasZorder",!0),T$L._parent===this){var T$s=this.getChildIndex(T$L);T$s!==this._childs.length-1&&(this._childs.splice(T$s,1),this._childs.push(T$L),this.conchModel&&(this.conchModel.removeChild(T$L.conchModel),this.conchModel.addChildAt(T$L.conchModel,this._childs.length-1)),this._childChanged());}else T$L.parent&&T$L.parent.removeChild(T$L),this._childs===T$o.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(T$L),this.conchModel&&this.conchModel.addChildAt(T$L.conchModel,this._childs.length-1),(T$L.parent=this)._childChanged(),this._addChild3D(T$L);return T$L;},T$m.removeChildAt=function(T$L){var T$s=this.getChildAt(T$L);return T$s&&(this._removeChild3D(T$s),this._childs.splice(T$L,1),this.conchModel&&this.conchModel.removeChild(T$s.conchModel),T$s.parent=null),T$s;},T$m.removeChildren=function(T$L,T$s){if(void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=2147483647),this._childs&&0<this._childs.length){var T$m=this._childs;if(0===T$L&&T$O<=T$s){var T$x=T$m;this._childs=T$o.ARRAY_EMPTY;}else T$x=T$m.splice(T$L,T$s-T$L);for(var T$w=0,T$O=T$x.length;T$w<T$O;T$w++)this._removeChild3D(T$x[T$w]),T$x[T$w].parent=null,this.conchModel&&this.conchModel.removeChild(T$x[T$w].conchModel);}return this;},T$m.onAsynLoaded=function(T$L,T$s,T$m){var T$x=T$s[0];if("Sprite3D"!==T$x.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var T$w=T$s[1];T$js._createNodeByJson(this,T$x,this,T$w),this.event("hierarchyloaded",[this]),this.__loaded=!0;},T$m.cloneTo=function(T$L){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var T$s=T$L;T$s.name=this.name,T$s._destroyed=this._destroyed,T$s.timer=this.timer,T$s._$P=this._$P,T$s.active=this._active;var T$m=T$s.transform.localPosition;this.transform.localPosition.cloneTo(T$m),T$s.transform.localPosition=T$m;var T$x=T$s.transform.localRotation;this.transform.localRotation.cloneTo(T$x),T$s.transform.localRotation=T$x;var T$w=T$s.transform.localScale;this.transform.localScale.cloneTo(T$w),T$s.transform.localScale=T$w,T$s.isStatic=this.isStatic;var T$O=0,T$v=0;for(T$O=0,T$v=this._componentsMap.length;T$O<T$v;T$O++){var T$y=T$s.addComponent(this._componentsMap[T$O]);this._components[T$O]._cloneTo(T$y);}for(T$O=0,T$v=this._childs.length;T$O<T$v;T$O++)T$s.addChild(this._childs[T$O].clone());var T$F=T$s.getComponentByType(Animator);if(T$F){var T$o=T$F._linkSpritesData;if(T$o)for(var T$V in T$o){for(var T$C=T$o[T$V],T$E=T$s,T$r=0,T$u=T$C.length;T$r<T$u&&(T$E=T$E.getChildByName(T$C[T$r]));T$r++);if(T$E){var T$T=T$F._avatarNodeMap[T$V];T$E._isLinkSpriteToAnimationNode(T$F,T$T,!0);}}}},T$m.clone=function(){var T$L=new this.constructor();return this.cloneTo(T$L),T$L;},T$m.destroy=function(T$L){if(void 0===T$L&&(T$L=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,T$L);var T$s,T$m=0;for(T$m=0,T$s=this._components.length;T$m<T$s;T$m++)this._components[T$m]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,T$D.clearRes(this.url),this.loaded||T$Ds._cancelLoadByUrl(this.url);}},T$m._handleSpriteToAvatar=function(T$L,T$s){T$L._avatarNodes;var T$m=T$L._avatarNodeMap[this.name];T$m&&T$m.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(T$L,T$m,T$s);},T$m._setAnimatorToLinkAvatar=function(T$L,T$s){this._handleSpriteToAvatar(T$L,T$s);for(var T$m=0,T$x=this._childs.length;T$m<T$x;T$m++){this._childs[T$m]._setAnimatorToLinkAvatar(T$L,T$s);}},T$u(0,T$m,"activeInHierarchy",function(){return this._activeInHierarchy;}),T$u(0,T$m,"_loaded",null,function(T$L){this.__loaded=T$L;}),T$u(0,T$m,"active",function(){return this._active;},function(T$L){this._active!==T$L&&(this._active=T$L,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(T$L?this._activeHierarchy():this._inActiveHierarchy()));}),T$u(0,T$m,"componentsCount",function(){return this._components.length;}),T$u(0,T$m,"loaded",function(){return this.__loaded;}),T$u(0,T$m,"id",function(){return this._id;}),T$u(0,T$m,"url",function(){return this._url;}),T$u(0,T$m,"layer",function(){return this._layer;},function(T$L){if(this._layer!==T$L){if(!T$L)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var T$s=0,T$m=this._colliders.length;if(this._layer)for(T$s=0;T$s<T$m;T$s++)this._layer._removeCollider(this._colliders[T$s]);for(T$s=0;T$s<T$m;T$s++)T$L._addCollider(this._colliders[T$s]);}this._layer=T$L,this.event("layerchanged",T$L);}}),T$u(0,T$m,"scene",function(){return this._scene;}),T$u(0,T$m,"transform",function(){return this._transform;}),T$s.instantiate=function(T$L,T$s,T$m,T$x,T$w){void 0===T$m&&(T$m=!0);var T$O=T$L.clone();T$s&&T$s.addChild(T$O);var T$v=T$O.transform;if(T$m){var T$y=T$v.worldMatrix;T$L.transform.worldMatrix.cloneTo(T$y),T$v.worldMatrix=T$y;}else T$x&&(T$v.position=T$x),T$w&&(T$v.rotation=T$w);return T$O;},T$s.load=function(T$L){return T$H.loader.create(T$L,null,null,T$s);},T$s.WORLDMATRIX=0,T$s.MVPMATRIX=1,T$s._uniqueIDCounter=0,T$s._nameNumberCounter=0,T$s;}(),T$gs=function(T$L){function T$V(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],T$V.__super.call(this),!T$L||!T$s)throw"Shader Error";this._id=++T$V._count,this._vs=T$L,this._ps=T$s,this._attributeMap=T$m,this._sceneUniformMap=T$x,this._cameraUniformMap=T$w,this._spriteUniformMap=T$O,this._materialUniformMap=T$v,this._renderElementUniformMap=T$y,this._precompile=T$F,this._define=T$o,this._precompile&&T$V.extCompileObj&&T$V.extCompileFunc?T$V.extCompileFunc.call(T$V.extCompileObj,T$L,T$s,T$o):this.recreateResource();}T$r(T$V,"laya.d3.shader.Shader3D",T$m);var T$s=T$V.prototype;return T$s.recreateResource=function(){T$h.now();this._compile(),this.completeCreate(),this.memorySize=0;},T$s.disposeResource=function(){T$U.mainContext.deleteShader(this._vshader),T$U.mainContext.deleteShader(this._pshader),T$U.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0;},T$s._compile=function(){if(!T$U.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var T$L=[this._vs,this._ps],T$s=T$U.mainContext;if(this._program=T$s.createProgram(),this._vshader=T$V._createShader(T$s,T$L[0],35633),this._pshader=T$V._createShader(T$s,T$L[1],35632),T$s.attachShader(this._program,this._vshader),T$s.attachShader(this._program,this._pshader),T$s.linkProgram(this._program),!T$T.isConchApp&&T$fs.debugMode&&!T$s.getProgramParameter(this._program,35714))throw T$s.getProgramInfoLog(this._program);var T$m,T$x=0,T$w=0,T$O=0;for(T$O=T$T.isConchApp?T$s.getProgramParameterEx(this._vs,this._ps,"",35721):T$s.getProgramParameter(this._program,35721),T$x=0;T$x<T$O;T$x++){var T$v=null;T$m={vartype:"attribute",ivartype:0,attrib:T$v=T$T.isConchApp?T$s.getActiveAttribEx(this._vs,this._ps,"",T$x):T$s.getActiveAttrib(this._program,T$x),location:T$s.getAttribLocation(this._program,T$v.name),name:T$v.name,type:T$v.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(T$m);}var T$y=0;for(T$y=T$T.isConchApp?T$s.getProgramParameterEx(this._vs,this._ps,"",35718):T$s.getProgramParameter(this._program,35718),T$x=0;T$x<T$y;T$x++){var T$F=null;T$F=T$T.isConchApp?T$s.getActiveUniformEx(this._vs,this._ps,"",T$x):T$s.getActiveUniform(this._program,T$x),0<(T$m={vartype:"uniform",ivartype:1,attrib:T$v,location:T$s.getUniformLocation(this._program,T$F.name),name:T$F.name,type:T$F.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(T$m.name=T$m.name.substr(0,T$m.name.length-3),T$m.isArray=!0,T$m.location=T$s.getUniformLocation(this._program,T$m.name)),this._uniformParams.push(T$m);}for(T$x=0,T$w=this._attributeParams.length;T$x<T$w;T$x++)(T$m=this._attributeParams[T$x]).indexOfParams=T$x,T$m.index=1,T$m.value=[T$m.location,null],T$m.codename=T$m.name,T$m.name=null!=this._attributeMap[T$m.codename]?this._attributeMap[T$m.codename]:T$m.codename,this._attributeParamsMap.push(T$m.name),this._attributeParamsMap.push(T$m),T$m._this=this,T$m.uploadedValue=[],T$m.fun=this._attribute;for(T$x=0,T$w=this._uniformParams.length;T$x<T$w;T$x++)switch((T$m=this._uniformParams[T$x]).indexOfParams=T$x,T$m.index=1,T$m.value=[T$m.location,null],T$m.codename=T$m.name,null!=this._sceneUniformMap[T$m.codename]?(T$m.name=this._sceneUniformMap[T$m.codename],this._sceneUniformParamsMap.push(T$m.name),this._sceneUniformParamsMap.push(T$m)):null!=this._cameraUniformMap[T$m.codename]?(T$m.name=this._cameraUniformMap[T$m.codename],this._cameraUniformParamsMap.push(T$m.name),this._cameraUniformParamsMap.push(T$m)):null!=this._spriteUniformMap[T$m.codename]?(T$m.name=this._spriteUniformMap[T$m.codename],this._spriteUniformParamsMap.push(T$m.name),this._spriteUniformParamsMap.push(T$m)):null!=this._materialUniformMap[T$m.codename]?(T$m.name=this._materialUniformMap[T$m.codename],this._materialUniformParamsMap.push(T$m.name),this._materialUniformParamsMap.push(T$m)):null!=this._renderElementUniformMap[T$m.codename]?(T$m.name=this._renderElementUniformMap[T$m.codename],this._renderElementUniformParamsMap.push(T$m.name),this._renderElementUniformParamsMap.push(T$m)):console.log("Shader:can't find uinform name:"+T$m.codename+" in shader file."),T$m._this=this,T$m.uploadedValue=[],T$m.type){case 5124:T$m.fun=T$m.isArray?this._uniform1iv:this._uniform1i;break;case 5126:T$m.fun=T$m.isArray?this._uniform1fv:this._uniform1f;break;case 35664:T$m.fun=T$m.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:T$m.fun=T$m.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:T$m.fun=T$m.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:T$m.fun=this._uniform_sampler2D;break;case 35680:T$m.fun=this._uniform_samplerCube;break;case 35676:T$m.fun=this._uniformMatrix4fv;break;case 35670:T$m.fun=this._uniform1i;break;case 35674:T$m.fun=this._uinformMatrix2fv;break;case 35675:T$m.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!");}}},T$s._attribute=function(T$L,T$s){var T$m=T$U.mainContext,T$x=T$y._enableAtributes,T$w=T$L.location;return T$x[T$w]||T$m.enableVertexAttribArray(T$w),T$m.vertexAttribPointer(T$w,T$s[0],T$s[1],T$s[2],T$s[3],T$s[4]),T$x[T$w]=T$y._bindVertexBuffer,1;},T$s._uniform1f=function(T$L,T$s){var T$m=T$L.uploadedValue;return T$m[0]!==T$s?(T$U.mainContext.uniform1f(T$L.location,T$m[0]=T$s),1):0;},T$s._uniform1fv=function(T$L,T$s){if(T$s.length<4){var T$m=T$L.uploadedValue;return T$m[0]!==T$s[0]||T$m[1]!==T$s[1]||T$m[2]!==T$s[2]||T$m[3]!==T$s[3]?(T$U.mainContext.uniform1fv(T$L.location,T$s),T$m[0]=T$s[0],T$m[1]=T$s[1],T$m[2]=T$s[2],T$m[3]=T$s[3],1):0;}return T$U.mainContext.uniform1fv(T$L.location,T$s),1;},T$s._uniform_vec2=function(T$L,T$s){var T$m=T$L.uploadedValue;return T$m[0]!==T$s[0]||T$m[1]!==T$s[1]?(T$U.mainContext.uniform2f(T$L.location,T$m[0]=T$s[0],T$m[1]=T$s[1]),1):0;},T$s._uniform_vec2v=function(T$L,T$s){if(T$s.length<2){var T$m=T$L.uploadedValue;return T$m[0]!==T$s[0]||T$m[1]!==T$s[1]||T$m[2]!==T$s[2]||T$m[3]!==T$s[3]?(T$U.mainContext.uniform2fv(T$L.location,T$s),T$m[0]=T$s[0],T$m[1]=T$s[1],T$m[2]=T$s[2],T$m[3]=T$s[3],1):0;}return T$U.mainContext.uniform2fv(T$L.location,T$s),1;},T$s._uniform_vec3=function(T$L,T$s){var T$m=T$L.uploadedValue;return T$m[0]!==T$s[0]||T$m[1]!==T$s[1]||T$m[2]!==T$s[2]?(T$U.mainContext.uniform3f(T$L.location,T$m[0]=T$s[0],T$m[1]=T$s[1],T$m[2]=T$s[2]),1):0;},T$s._uniform_vec3v=function(T$L,T$s){return T$U.mainContext.uniform3fv(T$L.location,T$s),1;},T$s._uniform_vec4=function(T$L,T$s){var T$m=T$L.uploadedValue;return T$m[0]!==T$s[0]||T$m[1]!==T$s[1]||T$m[2]!==T$s[2]||T$m[3]!==T$s[3]?(T$U.mainContext.uniform4f(T$L.location,T$m[0]=T$s[0],T$m[1]=T$s[1],T$m[2]=T$s[2],T$m[3]=T$s[3]),1):0;},T$s._uniform_vec4v=function(T$L,T$s){return T$U.mainContext.uniform4fv(T$L.location,T$s),1;},T$s._uniformMatrix2fv=function(T$L,T$s){return T$U.mainContext.uniformMatrix2fv(T$L.location,!1,T$s),1;},T$s._uniformMatrix3fv=function(T$L,T$s){return T$U.mainContext.uniformMatrix3fv(T$L.location,!1,T$s),1;},T$s._uniformMatrix4fv=function(T$L,T$s){return T$U.mainContext.uniformMatrix4fv(T$L.location,!1,T$s),1;},T$s._uinformMatrix2fv=function(T$L,T$s){return T$U.mainContext.uniformMatrix2fv(T$L.location,!1,T$s),1;},T$s._uinformMatrix3fv=function(T$L,T$s){return T$U.mainContext.uniformMatrix3fv(T$L.location,!1,T$s),1;},T$s._uniform1i=function(T$L,T$s){var T$m=T$L.uploadedValue;return T$m[0]!==T$s?(T$U.mainContext.uniform1i(T$L.location,T$m[0]=T$s),1):0;},T$s._uniform1iv=function(T$L,T$s){return T$U.mainContext.uniform1iv(T$L.location,T$s),1;},T$s._uniform_ivec2=function(T$L,T$s){var T$m=T$L.uploadedValue;return T$m[0]!==T$s[0]||T$m[1]!==T$s[1]?(T$U.mainContext.uniform2i(T$L.location,T$m[0]=T$s[0],T$m[1]=T$s[1]),1):0;},T$s._uniform_ivec2v=function(T$L,T$s){return T$U.mainContext.uniform2iv(T$L.location,T$s),1;},T$s._uniform_vec3i=function(T$L,T$s){var T$m=T$L.uploadedValue;return T$m[0]!==T$s[0]||T$m[1]!==T$s[1]||T$m[2]!==T$s[2]?(T$U.mainContext.uniform3i(T$L.location,T$m[0]=T$s[0],T$m[1]=T$s[1],T$m[2]=T$s[2]),1):0;},T$s._uniform_vec3vi=function(T$L,T$s){return T$U.mainContext.uniform3iv(T$L.location,T$s),1;},T$s._uniform_vec4i=function(T$L,T$s){var T$m=T$L.uploadedValue;return T$m[0]!==T$s[0]||T$m[1]!==T$s[1]||T$m[2]!==T$s[2]||T$m[3]!==T$s[3]?(T$U.mainContext.uniform4i(T$L.location,T$m[0]=T$s[0],T$m[1]=T$s[1],T$m[2]=T$s[2],T$m[3]=T$s[3]),1):0;},T$s._uniform_vec4vi=function(T$L,T$s){return T$U.mainContext.uniform4iv(T$L.location,T$s),1;},T$s._uniform_sampler2D=function(T$L,T$s){var T$m=T$s.source||T$s.defaulteTexture.source,T$x=T$U.mainContext,T$w=T$L.uploadedValue;if(null!=T$w[0])return T$x.activeTexture(T$V._TEXTURES[T$w[0]]),T$m&&T$c.bindTexture(T$x,3553,T$m),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return T$w[0]=this._curActTexIndex,T$x.uniform1i(T$L.location,this._curActTexIndex),T$x.activeTexture(T$V._TEXTURES[this._curActTexIndex]),T$m&&T$c.bindTexture(T$x,3553,T$m),this._curActTexIndex++,1;},T$s._uniform_samplerCube=function(T$L,T$s){var T$m=T$s.source||T$s.defaulteTexture.source,T$x=T$U.mainContext,T$w=T$L.uploadedValue;if(null!=T$w[0])return T$x.activeTexture(T$V._TEXTURES[T$w[0]]),T$m?T$c.bindTexture(T$x,34067,T$m):T$c.bindTexture(T$x,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return T$w[0]=this._curActTexIndex,T$x.uniform1i(T$L.location,this._curActTexIndex),T$x.activeTexture(T$V._TEXTURES[this._curActTexIndex]),T$m?T$c.bindTexture(T$x,34067,T$m):T$c.bindTexture(T$x,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1;},T$s._noSetValue=function(T$L){console.log("no....:"+T$L.name);},T$s.bind=function(){return T$m.activeShader=this,(T$m.bindShader=this).activeResource(),T$c.UseProgram(this._program);},T$s.uploadAttributes=function(T$L,T$s){for(var T$m,T$x,T$w=0,T$O=0,T$v=this._attributeParamsMap.length;T$O<T$v;T$O+=2)T$x=this._attributeParamsMap[T$O+1],null!=(T$m=T$L[this._attributeParamsMap[T$O]])&&(T$s&&T$s[T$x.name]&&T$s[T$x.name].bind(),T$w+=T$x.fun.call(this,T$x,T$m));T$f.shaderCall+=T$w;},T$s.uploadAttributesX=function(T$L,T$s){for(var T$m,T$x,T$w=0,T$O=0,T$v=this._attributeParamsMap.length;T$O<T$v;T$O+=2)T$x=this._attributeParamsMap[T$O+1],null!=(T$m=T$L[this._attributeParamsMap[T$O]])&&(T$s._bind(),T$w+=T$x.fun.call(this,T$x,T$m));T$f.shaderCall+=T$w;},T$s.uploadSceneUniforms=function(T$L){for(var T$s,T$m,T$x=0,T$w=0,T$O=this._sceneUniformParamsMap.length;T$w<T$O;T$w+=2)T$m=this._sceneUniformParamsMap[T$w+1],null!=(T$s=T$L[this._sceneUniformParamsMap[T$w]])&&(T$x+=T$m.fun.call(this,T$m,T$s));T$f.shaderCall+=T$x;},T$s.uploadCameraUniforms=function(T$L){for(var T$s,T$m,T$x=0,T$w=0,T$O=this._cameraUniformParamsMap.length;T$w<T$O;T$w+=2)T$m=this._cameraUniformParamsMap[T$w+1],null!=(T$s=T$L[this._cameraUniformParamsMap[T$w]])&&(T$x+=T$m.fun.call(this,T$m,T$s));T$f.shaderCall+=T$x;},T$s.uploadSpriteUniforms=function(T$L){for(var T$s,T$m,T$x=0,T$w=0,T$O=this._spriteUniformParamsMap.length;T$w<T$O;T$w+=2)T$m=this._spriteUniformParamsMap[T$w+1],null!=(T$s=T$L[this._spriteUniformParamsMap[T$w]])&&(T$x+=T$m.fun.call(this,T$m,T$s));T$f.shaderCall+=T$x;},T$s.uploadMaterialUniforms=function(T$L){for(var T$s,T$m,T$x=0,T$w=0,T$O=this._materialUniformParamsMap.length;T$w<T$O;T$w+=2)T$m=this._materialUniformParamsMap[T$w+1],null!=(T$s=T$L[this._materialUniformParamsMap[T$w]])&&(T$x+=T$m.fun.call(this,T$m,T$s));T$f.shaderCall+=T$x;},T$s.uploadRenderElementUniforms=function(T$L){for(var T$s,T$m,T$x=0,T$w=0,T$O=this._renderElementUniformParamsMap.length;T$w<T$O;T$w+=2)T$m=this._renderElementUniformParamsMap[T$w+1],null!=(T$s=T$L[this._renderElementUniformParamsMap[T$w]])&&(T$x+=T$m.fun.call(this,T$m,T$s));T$f.shaderCall+=T$x;},T$V.create=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o){return new T$V(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o);},T$V.addInclude=function(T$L,T$s){T$b.addInclude(T$L,T$s);},T$V._createShader=function(T$L,T$s,T$m){var T$x=T$L.createShader(T$m);if(T$L.shaderSource(T$x,T$s),T$L.compileShader(T$x),T$fs.debugMode&&!T$L.getShaderParameter(T$x,35713))throw T$L.getShaderInfoLog(T$x);return T$x;},T$V.PERIOD_RENDERELEMENT=0,T$V.PERIOD_MATERIAL=1,T$V.PERIOD_SPRITE=2,T$V.PERIOD_CAMERA=3,T$V.PERIOD_SCENE=4,T$V._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],T$V._count=0,T$V._preCompile=!1,T$V.extCompileFunc=null,T$V.extCompileObj=null,T$C(T$V,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680};},"nameKey",function(){return this.nameKey=new T$_();}]),T$V;}(),T$$s=function(T$y){function T$F(){this._transformUV=null,T$F.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new T$vs(.6,.6,.6)),this._setColor(10,new T$vs(1,1,1)),this._setColor(11,new T$ys(1,1,1,8)),this._setColor(12,new T$vs(1,1,1)),this._setColor(7,new T$ys(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new T$ys(1,1,0,0)),this.renderMode=1;}T$r(T$F,"laya.d3.core.material.StandardMaterial",T$y);var T$L=T$F.prototype;return T$L.disableLight=function(){this._addDisablePublicShaderDefine(T$fs.SHADERDEFINE_POINTLIGHT|T$fs.SHADERDEFINE_SPOTLIGHT|T$fs.SHADERDEFINE_DIRECTIONLIGHT);},T$L.disableFog=function(){this._addDisablePublicShaderDefine(T$fs.SHADERDEFINE_FOG);},T$L.onAsynLoaded=function(T$L,T$s,T$m){var T$x=T$s[0];if(T$x.version)T$y.prototype.onAsynLoaded.call(this,T$L,T$s,T$m);else{var T$w=T$s[1],T$O=T$x.props;for(var T$v in T$O)this[T$v]=T$O[T$v];T$F._parseStandardMaterial(T$w,this,T$x),this._endLoaded();}},T$L.cloneTo=function(T$L){T$y.prototype.cloneTo.call(this,T$L);var T$s=T$L;this._transformUV&&(T$s._transformUV=this._transformUV.clone());},T$u(0,T$L,"ambientColor",function(){return this._getColor(9);},function(T$L){this._setColor(9,T$L);}),T$u(0,T$L,"ambientTexture",function(){return this._getTexture(5);},function(T$L){T$L?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,T$L);}),T$u(0,T$L,"renderMode",null,function(T$L){switch(T$L){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(T$F.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(T$F.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(T$F.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(T$F.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$F.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$F.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$F.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$F.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$F.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$F.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$F.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$F.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$F.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$F.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$F.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$F.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.");}this._conchMaterial&&this._conchMaterial.setRenderMode(T$L);}),T$u(0,T$L,"reflectColor",function(){return this._getColor(12);},function(T$L){this._setColor(12,T$L);}),T$u(0,T$L,"tilingOffset",function(){return this._getColor(15);},function(T$L){if(T$L){var T$s=T$L.elements;1!=T$s[0]||1!=T$s[1]||0!=T$s[2]||0!=T$s[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,T$L);}),T$u(0,T$L,"albedo",function(){return this._getColor(7);},function(T$L){this._setColor(7,T$L);}),T$u(0,T$L,"diffuseColor",function(){return this._getColor(10);},function(T$L){this._setColor(10,T$L);}),T$u(0,T$L,"albedoColor",function(){return this._getColor(7);},function(T$L){this._setColor(7,T$L);}),T$u(0,T$L,"specularColor",function(){return this._getColor(11);},function(T$L){this._setColor(11,T$L);}),T$u(0,T$L,"diffuseTexture",function(){return this._getTexture(1);},function(T$L){T$L?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,T$L);}),T$u(0,T$L,"normalTexture",function(){return this._getTexture(2);},function(T$L){T$L?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,T$L);}),T$u(0,T$L,"specularTexture",function(){return this._getTexture(3);},function(T$L){T$L?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,T$L);}),T$u(0,T$L,"emissiveTexture",function(){return this._getTexture(4);},function(T$L){T$L?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,T$L);}),T$u(0,T$L,"reflectTexture",function(){return this._getTexture(6);},function(T$L){T$L?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,T$L);}),T$u(0,T$L,"transformUV",function(){return this._transformUV;},function(T$L){this._transformUV=T$L,this._setMatrix4x4(13,T$L.matrix),T$L?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,T$L.matrix.elements,0);}),T$F.__init__=function(){T$F.SHADERDEFINE_DIFFUSEMAP=T$F.shaderDefines.registerDefine("DIFFUSEMAP"),T$F.SHADERDEFINE_NORMALMAP=T$F.shaderDefines.registerDefine("NORMALMAP"),T$F.SHADERDEFINE_SPECULARMAP=T$F.shaderDefines.registerDefine("SPECULARMAP"),T$F.SHADERDEFINE_EMISSIVEMAP=T$F.shaderDefines.registerDefine("EMISSIVEMAP"),T$F.SHADERDEFINE_AMBIENTMAP=T$F.shaderDefines.registerDefine("AMBIENTMAP"),T$F.SHADERDEFINE_REFLECTMAP=T$F.shaderDefines.registerDefine("REFLECTMAP"),T$F.SHADERDEFINE_UVTRANSFORM=T$F.shaderDefines.registerDefine("UVTRANSFORM"),T$F.SHADERDEFINE_TILINGOFFSET=T$F.shaderDefines.registerDefine("TILINGOFFSET"),T$F.SHADERDEFINE_ADDTIVEFOG=T$F.shaderDefines.registerDefine("ADDTIVEFOG");},T$F.load=function(T$L){return T$H.loader.create(T$L,null,null,T$F);},T$F._parseStandardMaterial=function(T$L,T$s,T$m){var T$x=T$m.customProps,T$w=T$x.ambientColor;T$s.ambientColor=new T$vs(T$w[0],T$w[1],T$w[2]);var T$O=T$x.diffuseColor;T$s.diffuseColor=new T$vs(T$O[0],T$O[1],T$O[2]);var T$v=T$x.specularColor;T$s.specularColor=new T$ys(T$v[0],T$v[1],T$v[2],T$v[3]);var T$y=T$x.reflectColor;T$s.reflectColor=new T$vs(T$y[0],T$y[1],T$y[2]);var T$F=T$x.albedoColor;T$F&&(T$s.albedo=new T$ys(T$F[0],T$F[1],T$F[2],T$F[3]));var T$o=T$x.diffuseTexture.texture2D;T$o&&(T$s.diffuseTexture=T$D.getRes(T$L[T$o]));var T$V=T$x.normalTexture.texture2D;T$V&&(T$s.normalTexture=T$D.getRes(T$L[T$V]));var T$C=T$x.specularTexture.texture2D;T$C&&(T$s.specularTexture=T$D.getRes(T$L[T$C]));var T$E=T$x.emissiveTexture.texture2D;T$E&&(T$s.emissiveTexture=T$D.getRes(T$L[T$E]));var T$r=T$x.ambientTexture.texture2D;T$r&&(T$s.ambientTexture=T$D.getRes(T$L[T$r]));var T$u=T$x.reflectTexture.texture2D;T$u&&(T$s.reflectTexture=T$D.getRes(T$L[T$u]));},T$F.RENDERMODE_OPAQUE=1,T$F.RENDERMODE_OPAQUEDOUBLEFACE=2,T$F.RENDERMODE_CUTOUT=3,T$F.RENDERMODE_CUTOUTDOUBLEFACE=4,T$F.RENDERMODE_TRANSPARENT=13,T$F.RENDERMODE_TRANSPARENTDOUBLEFACE=14,T$F.RENDERMODE_ADDTIVE=15,T$F.RENDERMODE_ADDTIVEDOUBLEFACE=16,T$F.RENDERMODE_DEPTHREAD_TRANSPARENT=5,T$F.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,T$F.RENDERMODE_DEPTHREAD_ADDTIVE=7,T$F.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,T$F.RENDERMODE_NONDEPTH_TRANSPARENT=9,T$F.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,T$F.RENDERMODE_NONDEPTH_ADDTIVE=11,T$F.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,T$F.SHADERDEFINE_DIFFUSEMAP=0,T$F.SHADERDEFINE_NORMALMAP=0,T$F.SHADERDEFINE_SPECULARMAP=0,T$F.SHADERDEFINE_EMISSIVEMAP=0,T$F.SHADERDEFINE_AMBIENTMAP=0,T$F.SHADERDEFINE_REFLECTMAP=0,T$F.SHADERDEFINE_UVTRANSFORM=0,T$F.SHADERDEFINE_TILINGOFFSET=0,T$F.SHADERDEFINE_ADDTIVEFOG=0,T$F.DIFFUSETEXTURE=1,T$F.NORMALTEXTURE=2,T$F.SPECULARTEXTURE=3,T$F.EMISSIVETEXTURE=4,T$F.AMBIENTTEXTURE=5,T$F.REFLECTTEXTURE=6,T$F.ALBEDO=7,T$F.UVANIAGE=8,T$F.MATERIALAMBIENT=9,T$F.MATERIALDIFFUSE=10,T$F.MATERIALSPECULAR=11,T$F.MATERIALREFLECT=12,T$F.UVMATRIX=13,T$F.UVAGE=14,T$F.TILINGOFFSET=15,T$C(T$F,["defaultMaterial",function(){var T$L=new T$F();return T$L.lock=!0,this.defaultMaterial=T$L;},"shaderDefines",function(){return this.shaderDefines=new T$Vs(T$is.shaderDefines);}]),T$F;}(T$is),T$ps=function(T$L){function T$v(T$L,T$s,T$m,T$x,T$w){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===T$m&&(T$m=35044),void 0===T$x&&(T$x=!1),T$v.__super.call(this),this._indexType=T$L,this._indexCount=T$s,this._bufferUsage=T$m,this._bufferType=34963,this._canRead=T$x;var T$O;if("ushort"==T$L)this._indexTypeByteCount=2;else{if("ubyte"!=T$L)throw new Error("unidentification index type.");this._indexTypeByteCount=1;}T$O=this._indexTypeByteCount*T$s,this._byteLength=T$O,this._bind(),T$y._gl.bufferData(this._bufferType,T$O,this._bufferUsage),this.uri=T$w,T$x?("ushort"==T$L?this._buffer=new Uint16Array(T$s):"ubyte"==T$L&&(this._buffer=new Uint8Array(T$s)),this.memorySize=2*T$O):this.memorySize=T$O;}T$r(T$v,"laya.d3.graphics.IndexBuffer3D",T$L);var T$s=T$v.prototype;return T$s.setData=function(T$L,T$s,T$m,T$x){void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0),void 0===T$x&&(T$x=4294967295);var T$w=0;if("ushort"==this._indexType?(T$w=2,0===T$m&&4294967295===T$x||(T$L=new Uint16Array(T$L.buffer,T$m*T$w,T$x))):"ubyte"==this._indexType&&(T$w=1,0===T$m&&4294967295===T$x||(T$L=new Uint8Array(T$L.buffer,T$m*T$w,T$x))),this._bind(),T$y._gl.bufferSubData(this._bufferType,T$s*T$w,T$L),this._canRead)if(0!==T$s||0!==T$m||4294967295!==T$x){var T$O=this._buffer.length-T$s;T$O<T$x&&(T$x=T$O);for(var T$v=0;T$v<T$x;T$v++)this._buffer[T$s+T$v]=T$L[T$v];}else this._buffer=T$L;},T$s.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!");},T$s.disposeResource=function(){T$L.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0;},T$u(0,T$s,"indexType",function(){return this._indexType;}),T$u(0,T$s,"indexTypeByteCount",function(){return this._indexTypeByteCount;}),T$u(0,T$s,"indexCount",function(){return this._indexCount;}),T$u(0,T$s,"canRead",function(){return this._canRead;}),T$v.INDEXTYPE_UBYTE="ubyte",T$v.INDEXTYPE_USHORT="ushort",T$v.create=function(T$L,T$s,T$m,T$x,T$w){return void 0===T$m&&(T$m=35044),void 0===T$x&&(T$x=!1),new T$v(T$L,T$s,T$m,T$x,T$w);},T$v;}(T$y),T$Zs=function(T$O){function T$v(T$L,T$s,T$m,T$x,T$w){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===T$x&&(T$x=!1),T$v.__super.call(this),this._vertexDeclaration=T$L,this._vertexCount=T$s,this._bufferUsage=T$m,this._bufferType=34962,this._canRead=T$x,this.uri=T$w,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*T$s,this._bind(),T$y._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),T$x&&(this._buffer=new Float32Array(this._byteLength/4));}T$r(T$v,"laya.d3.graphics.VertexBuffer3D",T$O);var T$L=T$v.prototype;return T$L.bindWithIndexBuffer=function(T$L){T$L&&T$L._bind(),this._bind();},T$L.setData=function(T$L,T$s,T$m,T$x){if(void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0),void 0===T$x&&(T$x=4294967295),0===T$m&&4294967295===T$x||(T$L=new Float32Array(T$L.buffer,4*T$m,T$x)),this._bind(),T$y._gl.bufferSubData(this._bufferType,4*T$s,T$L),this._canRead)if(0!==T$s||0!==T$m||4294967295!==T$x){var T$w=this._buffer.length-T$s;T$w<T$x&&(T$x=T$w);for(var T$O=0;T$O<T$x;T$O++)this._buffer[T$s+T$O]=T$L[T$O];}else this._buffer=T$L;},T$L.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!");},T$L.disposeResource=function(){for(var T$L=T$U.mainContext,T$s=this._vertexDeclaration.getVertexElements(),T$m=T$y._enableAtributes,T$x=0,T$w=T$s.length;T$x<T$w;T$x++)T$m[T$x]===this._glBuffer&&(T$L.disableVertexAttribArray(T$x),T$m[T$x]=null);T$O.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0;},T$u(0,T$L,"vertexDeclaration",function(){return this._vertexDeclaration;}),T$u(0,T$L,"vertexCount",function(){return this._vertexCount;}),T$u(0,T$L,"canRead",function(){return this._canRead;}),T$v.create=function(T$L,T$s,T$m,T$x,T$w){return void 0===T$m&&(T$m=35044),void 0===T$x&&(T$x=!1),new T$v(T$L,T$s,T$m,T$x,T$w);},T$v;}(T$y),T$Ws=function(T$L){function T$b(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,T$b.__super.call(this),this._type=3553;}T$r(T$b,"laya.d3.resource.DataTexture2D",T$Us);var T$s=T$b.prototype;return T$s.genDebugMipmaps=function(){var T$L=[];return T$L.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),T$L.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),T$L.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),T$L.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),T$L.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),T$L.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),T$L.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),T$L.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),T$L.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),T$L.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),T$L;},T$s._onTextureLoaded=function(T$L){},T$s._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var T$L=T$U.mainContext,T$s=this._source=T$L.createTexture(),T$m=this._width,T$x=this._height,T$w=T$c.curBindTexTarget,T$O=T$c.curBindTexValue,T$v=!1;if(T$c.bindTexture(T$L,this._type,T$s),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var T$y=0;T$L.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var T$F=0;T$F<this._mipmaps.length;T$F++){if(this._mipmaps[T$F].byteLength!=T$o*T$V*4)throw"mipmap size error  level:"+T$F;T$L.texSubImage2D(this._type,0,T$b.simLodRect[T$y++],T$b.simLodRect[T$y++],T$b.simLodRect[T$y++],T$b.simLodRect[T$y++],6408,5121,new Uint8Array(this._mipmaps[T$F]));}this.minFifter=9729,this.magFifter=9729;}else{var T$o=this._width,T$V=this._height;for(T$y=0,T$L.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),T$F=0;T$F<this._mipmaps.length;T$F++){if(this._mipmaps[T$F].byteLength!=T$o*T$V*4)throw"mipmap size error  level:"+T$F;T$L.texImage2D(this._type,T$F,6408,T$o,T$V,0,6408,5121,new Uint8Array(this._mipmaps[T$F])),(T$o/=2)<1&&(T$o=1),(T$V/=2)<1&&(T$V=1),this.minFifter=9987,this.magFifter=9729;}}this.mipmap=!1;}else if(this._image)6407==this._format&&T$L.pixelStorei(T$L.UNPACK_ALIGNMENT,1),T$L.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var T$C=0,T$E=!1,T$r=!1;this._buffer.byteLength==4*T$m*T$x?(T$C=6408,T$E=!0):this._buffer.byteLength==3*T$m*T$x?(T$C=6407,T$r=!0):T$C=this._format,T$E||T$r?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),T$r&&T$L.pixelStorei(T$L.UNPACK_ALIGNMENT,1),T$L.texImage2D(this._type,0,T$C,T$m,T$x,0,T$C,5121,this._buffer)):T$L&&T$C==T$L.ALPHA?(T$L.texImage2D(3553,0,T$C,T$m,T$x,0,T$C,T$L.UNSIGNED_BYTE,this._buffer),T$v=!0):0!=T$C&&(T$L.compressedTexImage2D(3553,0,T$C,T$m,T$x,0,this._buffer),T$v=!0);}var T$u=this._minFifter,T$T=this._magFifter,T$j=0==this._wrapModeU?10497:33071,T$D=0==this._wrapModeV?10497:33071,T$e=T$S.isPOT(T$m,T$x);T$e?(this._mipmap||this._mipmaps?-1!==T$u||(T$u=9987):-1!==T$u||(T$u=9729),-1!==T$T||(T$T=9729),T$L.texParameteri(this._type,10241,T$u),T$L.texParameteri(this._type,10240,T$T),T$L.texParameteri(this._type,10242,T$j),T$L.texParameteri(this._type,10243,T$D),this._mipmap&&T$L.generateMipmap(this._type)):(-1!==T$u||(T$u=9729),-1!==T$T||(T$T=9729),T$L.texParameteri(this._type,10241,T$u),T$L.texParameteri(this._type,10240,T$T),T$L.texParameteri(this._type,10242,33071),T$L.texParameteri(this._type,10243,33071)),T$w&&T$O&&T$c.bindTexture(T$L,T$w,T$O),this.memorySize=T$v?this._buffer.length:T$e?T$m*T$x*4*(1+1/3):T$m*T$x*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1;},T$s.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate();}else{this._recreateLock=!0;}},T$s.onAsynLoaded=function(T$L,T$s,T$m){var T$x;T$m&&(T$x=T$m[0].call(this,T$s)),T$x&&(this._width=T$x.width,this._height=T$x.height,this._buffer=T$x.data),this._src=T$L,this._size=new T$Ts(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded();},T$s.getPixels=function(){return new Uint8Array(this._buffer);},T$s.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(T$U.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0);},T$u(0,T$s,"src",function(){return this._src;}),T$b.create=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){if(void 0===T$x&&(T$x=9729),void 0===T$w&&(T$w=9729),void 0===T$O&&(T$O=!0),!T$L||T$L.byteLength<T$s*T$m*4)throw"DataTexture2D create error";var T$y=new T$b();return T$y.uri=T$v,T$y._buffer=T$L,T$y._width=T$s,T$y._height=T$m,T$y._mipmap=T$O,T$y._magFifter=T$x,T$y._minFifter=T$w,T$y._size=new T$Ts(T$y._width,T$y._height),T$y._conchTexture?alert("怎么给runtime传递datatexture数据"):T$y.activeResource(),T$y;},T$b.load=function(T$L,T$s,T$m,T$x,T$w){if(void 0===T$s&&(T$s=0),void 0===T$m&&(T$m=0),void 0===T$x&&(T$x=9729),void 0===T$w&&(T$w=9729),"mipmaps"===T$Q.getFileExtension(T$L)){var T$O=T$H.loader.create(T$L,null,null,T$b,[function(T$L){this._mipmaps=[];var T$s=new Uint32Array(T$L);this._width=T$s[0];var T$m=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,T$m=1024),this._width!=T$m)throw"现在只支持512x256的环境贴图。当前的是"+T$s[0];this._height=T$s[1];for(var T$x=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,T$w=this._height,T$O=8;;){var T$v=T$x*T$w*4;if(T$O+T$v>T$L.byteLength)throw"load mipmaps data size error ";var T$y=new Uint8Array(T$L,T$O,T$v);if(this._mipmaps.push(T$y),T$O+=T$v,1==T$x&&1==T$w)break;(T$x/=2)<1&&(T$x=1),(T$w/=2)<1&&(T$w=1);}return null;}]);if(laya.d3.resource.DataTexture2D.lodasatlas){T$O.simLodInfo=new Float32Array(40);for(var T$v=0;T$v<T$O.simLodInfo.length;)T$O.simLodInfo[T$v]=(T$b.simLodRect[T$v]+.5)/1024,T$v++,T$O.simLodInfo[T$v]=(T$b.simLodRect[T$v]+.5)/256,T$v++,T$O.simLodInfo[T$v]=Math.max(T$b.simLodRect[T$v]-1,.1)/1024,T$v++,T$O.simLodInfo[T$v]=Math.max(T$b.simLodRect[T$v]-1.5,.1)/256,T$v++;}return T$O;}if("number"==typeof T$s)return T$H.loader.create(T$L,null,null,T$b,[function(T$L){return this._width=T$s,this._height=T$m,this._buffer=T$L,null;}]);if("function"==typeof T$s)return T$H.loader.create(T$L,null,null,T$b,[T$s]);throw new Error("unknown params.");},T$b.lodasatlas=!1,T$C(T$b,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1]);}]),T$b;}(),T$ds=function(T$L){function T$s(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,T$s.__super.call(this);}T$r(T$s,"laya.d3.resource.models.PrimitiveMesh",T$cs);var T$m=T$s.prototype;return T$H.imps(T$m,{"laya.d3.core.render.IRenderable":!0}),T$m._getVertexBuffer=function(T$L){return void 0===T$L&&(T$L=0),0===T$L?this._vertexBuffer:null;},T$m._getVertexBuffers=function(){return null;},T$m._getIndexBuffer=function(){return this._indexBuffer;},T$m._getPositions=function(){var T$L,T$s=[],T$m=this._vertexBuffer.vertexDeclaration.getVertexElements(),T$x=0;for(T$x=0;T$x<T$m.length;T$x++){var T$w=T$m[T$x];if("vector3"===T$w.elementFormat&&0===T$w.elementUsage){T$L=T$w;break;}}var T$O=this._vertexBuffer.getData();for(T$x=0;T$x<T$O.length;T$x+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var T$v=T$x+T$L.offset/4,T$y=new T$vs(T$O[T$v+0],T$O[T$v+1],T$O[T$v+2]);T$s.push(T$y);}return T$s;},T$m.getRenderElement=function(T$L){return this;},T$m.getRenderElementsCount=function(){return 1;},T$m.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0;},T$m._beforeRender=function(T$L){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0;},T$m._render=function(T$L){T$U.mainContext.drawElements(4,this._numberIndices,5123,0),T$f.drawCall++,T$f.trianglesFaces+=this._numberIndices/3;},T$u(0,T$m,"_vertexBufferCount",function(){return 1;}),T$u(0,T$m,"triangleCount",function(){return this._indexBuffer.indexCount/3;}),T$s;}(),T$Xs=function(T$L){function T$s(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,T$s.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[];}T$r(T$s,"laya.d3.resource.models.Mesh",T$cs);var T$m=T$s.prototype;return T$m._getPositions=function(){var T$L,T$s,T$m,T$x,T$w,T$O=[],T$v=0,T$y=0,T$F=0;if(0!==this._vertexBuffers.length){var T$o=this._vertexBuffers.length;for(T$v=0;T$v<T$o;T$v++){for(T$m=(T$L=this._vertexBuffers[T$v]).vertexDeclaration.getVertexElements(),T$y=0;T$y<T$m.length;T$y++)if("vector3"===(T$x=T$m[T$y]).elementFormat&&0===T$x.elementUsage){T$s=T$x;break;}for(T$w=T$L.getData(),T$y=0;T$y<T$w.length;T$y+=T$L.vertexDeclaration.vertexStride/4)T$F=T$y+T$s.offset/4,T$O.push(new T$vs(T$w[T$F+0],T$w[T$F+1],T$w[T$F+2]));}}else{var T$V=this._subMeshes.length;for(T$v=0;T$v<T$V;T$v++){for(T$m=(T$L=this._subMeshes[T$v]._getVertexBuffer()).vertexDeclaration.getVertexElements(),T$y=0;T$y<T$m.length;T$y++)if("vector3"===(T$x=T$m[T$y]).elementFormat&&0===T$x.elementUsage){T$s=T$x;break;}for(T$w=T$L.getData(),T$y=0;T$y<T$w.length;T$y+=T$L.vertexDeclaration.vertexStride/4)T$F=T$y+T$s.offset/4,T$O.push(new T$vs(T$w[T$F+0],T$w[T$F+1],T$w[T$F+2]));}}return T$O;},T$m._setSubMeshes=function(T$L){this._subMeshes=T$L,this._subMeshCount=T$L.length;for(var T$s=0;T$s<this._subMeshCount;T$s++)T$L[T$s]._indexInMesh=T$s;this._positions=this._getPositions(),this._generateBoundingObject();},T$m.onAsynLoaded=function(T$L,T$s,T$m){var T$x=T$s[0],T$w=T$s[1];T$PL.read(T$x,this,this._materials,this._subMeshes,T$w),this.completeCreate(),this._endLoaded();},T$m.getSubMesh=function(T$L){return this._subMeshes[T$L];},T$m.getSubMeshCount=function(){return this._subMeshes.length;},T$m.getRenderElementsCount=function(){return this._subMeshes.length;},T$m.getRenderElement=function(T$L){return this._subMeshes[T$L];},T$m.disposeResource=function(){for(var T$L=0;T$L<this._subMeshes.length;T$L++)this._subMeshes[T$L].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null;},T$u(0,T$m,"materials",function(){return this._materials.slice();}),T$u(0,T$m,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses;}),T$s.load=function(T$L){return T$H.loader.create(T$L,null,null,T$s);},T$s;}(),T$Is=(function(T$L){function T$o(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===T$m&&(T$m=6408),void 0===T$x&&(T$x=5121),void 0===T$w&&(T$w=33189),void 0===T$O&&(T$O=!1),void 0===T$v&&(T$v=!1),void 0===T$y&&(T$y=-1),void 0===T$F&&(T$F=-1),T$o.__super.call(this),this._type=3553,this._width=T$L,this._height=T$s,this._size=new T$Ts(T$L,T$s),this._surfaceFormat=T$m,this._surfaceType=T$x,this._depthStencilFormat=T$w,T$T.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=T$O,this._repeat=T$v,this._minFifter=T$y,this._magFifter=T$F,this.activeResource(),this._alreadyResolved=!0;}T$r(T$o,"laya.d3.resource.RenderTexture",T$Us);var T$s=T$o.prototype;T$s.recreateResource=function(){var T$L=T$U.mainContext;this._frameBuffer=T$L.createFramebuffer(),this._source=T$L.createTexture();var T$s=T$c.curBindTexTarget,T$m=T$c.curBindTexValue;T$c.bindTexture(T$L,this._type,this._source),T$L.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var T$x=this._minFifter,T$w=this._magFifter,T$O=this._repeat?10497:33071;if(T$S.isPOT(this._width,this._height)?(this._mipmap?-1!==T$x||(T$x=9987):-1!==T$x||(T$x=9729),-1!==T$w||(T$w=9729),T$L.texParameteri(this._type,10241,T$x),T$L.texParameteri(this._type,10240,T$w),T$L.texParameteri(this._type,10242,T$O),T$L.texParameteri(this._type,10243,T$O),this._mipmap&&T$L.generateMipmap(this._type)):(-1!==T$x||(T$x=9729),-1!==T$w||(T$w=9729),T$L.texParameteri(this._type,10241,T$x),T$L.texParameteri(this._type,10240,T$w),T$L.texParameteri(this._type,10242,33071),T$L.texParameteri(this._type,10243,33071)),T$s&&T$m&&T$c.bindTexture(T$L,T$s,T$m),T$L.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=T$L.createRenderbuffer(),T$L.bindRenderbuffer(36161,this._depthStencilBuffer),T$L.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),T$L.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:T$L.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:T$L.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:T$L.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer);}T$L.framebufferTexture2D(36160,36064,3553,this._source,0),T$L.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate();},T$s.start=function(){T$U.mainContext.bindFramebuffer(36160,this.frameBuffer),(T$o._currentRenderTarget=this)._alreadyResolved=!1;},T$s.end=function(){T$U.mainContext.bindFramebuffer(36160,null),T$o._currentRenderTarget=null,this._alreadyResolved=!0;},T$s.getData=function(T$L,T$s,T$m,T$x){var T$w=T$U.mainContext;if(T$w.bindFramebuffer(36160,this._frameBuffer),!(36053===T$w.checkFramebufferStatus(36160)))return T$w.bindFramebuffer(36160,null),null;var T$O=new Uint8Array(this._width*this._height*4);return T$w.readPixels(T$L,T$s,T$m,T$x,this._surfaceFormat,this._surfaceType,T$O),T$w.bindFramebuffer(36160,null),T$O;},T$s.disposeResource=function(){if(this._frameBuffer){var T$L=T$U.mainContext;T$L.deleteTexture(this._source),T$L.deleteFramebuffer(this._frameBuffer),T$L.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0;}},T$u(0,T$s,"surfaceFormat",function(){return this._surfaceFormat;}),T$u(0,T$s,"surfaceType",function(){return this._surfaceType;}),T$u(0,T$s,"depthStencilFormat",function(){return this._depthStencilFormat;}),T$u(0,T$s,"source",function(){return this._alreadyResolved?T$H.superGet(T$Us,this,"source"):null;}),T$u(0,T$s,"depthStencilBuffer",function(){return this._depthStencilBuffer;}),T$u(0,T$s,"frameBuffer",function(){return this._frameBuffer;}),T$o._currentRenderTarget=null;}(),function(T$L){function T$s(T$L){this._color=null,this._pixels=null,T$s.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new T$Ts(this.width,this.height),this._color=T$L,this._pixels=new Uint8Array([255*T$L.x,255*T$L.y,255*T$L.z,255*T$L.w]),this.uri="SolidColorTexture2D_"+this.id;}T$r(T$s,"laya.d3.resource.SolidColorTexture2D",T$Us);var T$m=T$s.prototype;return T$m._createWebGlTexture=function(){var T$L=T$U.mainContext,T$s=this._source=T$L.createTexture(),T$m=this._width,T$x=this._height,T$w=T$c.curBindTexTarget,T$O=T$c.curBindTexValue;T$c.bindTexture(T$L,this._type,T$s),T$L.texImage2D(this._type,0,6408,T$m,T$x,0,6408,5121,this._pixels);var T$v=this._minFifter,T$y=this._magFifter,T$F=this._repeat?10497:33071,T$o=T$S.isPOT(T$m,T$x);T$o?(this._mipmap?-1!==T$v||(T$v=9987):-1!==T$v||(T$v=9729),-1!==T$y||(T$y=9729),T$L.texParameteri(this._type,10241,T$v),T$L.texParameteri(this._type,10240,T$y),T$L.texParameteri(this._type,10242,T$F),T$L.texParameteri(this._type,10243,T$F),this._mipmap&&T$L.generateMipmap(this._type)):(-1!==T$v||(T$v=9729),-1!==T$y||(T$y=9729),T$L.texParameteri(this._type,10241,T$v),T$L.texParameteri(this._type,10240,T$y),T$L.texParameteri(this._type,10242,33071),T$L.texParameteri(this._type,10243,33071)),T$w&&T$O&&T$c.bindTexture(T$L,T$w,T$O),this.memorySize=T$o?T$m*T$x*4*(1+1/3):T$m*T$x*4;},T$m.recreateResource=function(){this._createWebGlTexture(),this.completeCreate();},T$m.disposeResource=function(){this._source&&(T$U.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0);},T$C(T$s,["magentaTexture",function(){var T$L=new T$s(new T$ys(1,0,1,1));return T$L.lock=!0,this.magentaTexture=T$L;},"grayTexture",function(){var T$L=new T$s(new T$ys(.5,.5,.5,1));return T$L.lock=!0,this.grayTexture=T$L;}]),T$s;}()),T$ns=function(T$L){function T$w(T$L,T$s,T$m,T$x){this._canRead=!1,this._image=null,this._pixels=null,void 0===T$L&&(T$L=!1),void 0===T$s&&(T$s=!0),void 0===T$m&&(T$m=6408),void 0===T$x&&(T$x=!0),T$w.__super.call(this),this._type=3553,this._repeat=T$s,this._canRead=T$L,this._format=T$m,this._mipmap=T$x;}T$r(T$w,"laya.d3.resource.Texture2D",T$Us);var T$s=T$w.prototype;return T$s._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var T$L=T$U.mainContext,T$s=this._source=T$L.createTexture(),T$m=this._width,T$x=this._height,T$w=T$c.curBindTexTarget,T$O=T$c.curBindTexValue;switch(T$c.bindTexture(T$L,this._type,T$s),this._format){case 6407:case 6408:this._canRead?T$L.texImage2D(this._type,0,this._format,T$m,T$x,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?T$L.texImage2D(this._type,0,this._image._format,T$m,T$x,0,this._image._format,5121,this._image.atlasSource):T$L.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case T$U.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:T$L.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format);}var T$v=this._minFifter,T$y=this._magFifter,T$F=this._repeat?10497:33071,T$o=0==this._wrapModeU?10497:33071,T$V=0==this._wrapModeV?10497:33071,T$C=T$S.isPOT(T$m,T$x);T$C?(this._mipmap?-1!==T$v||(T$v=9987):-1!==T$v||(T$v=9729),-1!==T$y||(T$y=9729),T$L.texParameteri(this._type,10241,T$v),T$L.texParameteri(this._type,10240,T$y),T$L.texParameteri(this._type,10242,T$F),T$L.texParameteri(this._type,10243,T$F),T$L.texParameteri(this._type,10242,T$o),T$L.texParameteri(this._type,10243,T$V),this._mipmap&&T$L.generateMipmap(this._type)):(-1!==T$v||(T$v=9729),-1!==T$y||(T$y=9729),T$L.texParameteri(this._type,10241,T$v),T$L.texParameteri(this._type,10240,T$y),T$L.texParameteri(this._type,10242,33071),T$L.texParameteri(this._type,10243,33071)),T$w&&T$O&&T$c.bindTexture(T$L,T$w,T$O),this._image.onload=null,this._image=null,this.memorySize=T$C?T$m*T$x*4*(1+1/3):T$m*T$x*4;},T$s.recreateResource=function(){this._createWebGlTexture(),this.completeCreate();},T$s.onAsynLoaded=function(T$L,T$s,T$m){if(T$m){var T$x=T$m[0];void 0!==T$x&&(this._canRead=T$x);var T$w=T$m[1];void 0!==T$w&&(this._repeat=T$w);var T$O=T$m[2];void 0!==T$O&&(this._format=T$O);var T$v=T$m[3];void 0!==T$v&&(this._mipmap=T$v);var T$y=T$m.wrapModeU;void 0!==T$y&&(this._wrapModeU=T$y);var T$F=T$m.wrapModeV;void 0!==T$F&&(this._wrapModeV=T$F);}switch(this._format){case 6407:case 6408:var T$o=(this._image=T$s).width,T$V=T$s.height;this._width=T$o,this._height=T$V,this._size=new T$Ts(T$o,T$V),this._canRead&&(T$T.isConchApp?T$s instanceof T$E.HTMLElement&&(this._pixels=new Uint8Array(T$s.getImageData(0,0,T$o,T$V))):(T$h.canvas.size(T$o,T$V),T$h.canvas.clear(),T$h.context.drawImage(T$s,0,0,T$o,T$V),this._pixels=new Uint8Array(T$h.context.getImageData(0,0,T$o,T$V).data.buffer)));break;case T$U.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var T$C=new T$Y(T$s);T$C.readUTFBytes(4),T$C.readUTFBytes(2),T$C.getInt16();T$C.endian="bigEndian",this._width=T$C.getInt16(),this._height=T$C.getInt16(),this._size=new T$Ts(this._width,this._height);T$C.getInt16(),T$C.getInt16();this._image=new Uint8Array(T$s,T$C.pos);}this.recreateResource(),this._endLoaded();},T$s.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.");},T$s.disposeResource=function(){this._source&&(T$U.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0);},T$u(0,T$s,"_src",function(){return this.url;}),T$u(0,T$s,"src",function(){return this.url;}),T$w.load=function(T$L){return T$H.loader.create(T$L,null,null,T$w);},T$w;}(),T$Js=function(T$s){function T$m(T$L,T$s){T$m.__super.call(this),void 0===T$L&&(T$L=.3),void 0===T$s&&(T$s=1e3),this._tempVector3=new T$vs(),this._position=new T$vs(),this._up=new T$vs(),this._forward=new T$vs(),this._right=new T$vs(),this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=T$Ts.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=T$L,this._farPlane=T$s,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),T$H.stage.on("resize",this,this._onScreenSizeChanged);}T$r(T$m,"laya.d3.core.BaseCamera",T$s);var T$L=T$m.prototype;return T$L._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var T$L=this.scene._cameraPool,T$s=T$L.length-1,T$m=0;T$m<T$s;T$m++)if(T$L[T$m].renderingOrder>T$L[T$s].renderingOrder){var T$x=T$L[T$m];T$L[T$m]=T$L[T$s],T$L[T$s]=T$x;}},T$L._calculateProjectionMatrix=function(){},T$L._onScreenSizeChanged=function(){this._calculateProjectionMatrix();},T$L._prepareCameraToRender=function(){T$G._currentCameraCullingMask=this.cullingMask;var T$L=this._shaderValues;T$L.setValue(0,this.transform.position.elements),T$L.setValue(5,this.forward.elements),T$L.setValue(6,this.up.elements);},T$L._prepareCameraViewProject=function(T$L,T$s){var T$m=this._shaderValues;T$m.setValue(1,T$L.elements),T$m.setValue(2,T$s.elements);},T$L._renderCamera=function(T$L,T$s,T$m){},T$L.addLayer=function(T$L){29!==T$L.number&&30!=T$L.number&&(this.cullingMask=this.cullingMask|T$L.mask);},T$L.removeLayer=function(T$L){29!==T$L.number&&30!=T$L.number&&(this.cullingMask=this.cullingMask&~T$L.mask);},T$L.addAllLayers=function(){this.cullingMask=2147483647;},T$L.removeAllLayers=function(){this.cullingMask=0|T$G.getLayerByNumber(29).mask|T$G.getLayerByNumber(30).mask;},T$L.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix();},T$L.moveForward=function(T$L){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=T$L,this.transform.translate(this._tempVector3);},T$L.moveRight=function(T$L){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=T$L,this.transform.translate(this._tempVector3);},T$L.moveVertical=function(T$L){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=T$L,this.transform.translate(this._tempVector3,!1);},T$L._addSelfRenderObjects=function(){var T$L=this.scene._cameraPool,T$s=T$L.length;if(0<T$s){for(var T$m=T$s-1;0<=T$m;T$m--)if(this.renderingOrder<=T$L[T$m].renderingOrder){T$L.splice(T$m+1,0,this);break;}}else T$L.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel);},T$L._clearSelfRenderObjects=function(){var T$L=this.scene._cameraPool;T$L.splice(T$L.indexOf(this),1);},T$L.destroy=function(T$L){void 0===T$L&&(T$L=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,T$H.stage.off("resize",this,this._onScreenSizeChanged),T$s.prototype.destroy.call(this,T$L);},T$u(0,T$L,"sky",function(){return this._sky;},function(T$L){(this._sky=T$L)._ownerCamera=this;}),T$u(0,T$L,"forward",function(){var T$L=this.transform.worldMatrix.elements,T$s=this._forward.elements;return T$s[0]=-T$L[8],T$s[1]=-T$L[9],T$s[2]=-T$L[10],this._forward;}),T$u(0,T$L,"position",function(){var T$L=this.transform.worldMatrix.elements,T$s=this._position.elements;return T$s[0]=T$L[12],T$s[1]=T$L[13],T$s[2]=T$L[14],this._position;}),T$u(0,T$L,"renderTarget",function(){return this._renderTarget;},function(T$L){null!=(this._renderTarget=T$L)&&(this._renderTargetSize=T$L.size);}),T$u(0,T$L,"up",function(){var T$L=this.transform.worldMatrix.elements,T$s=this._up.elements;return T$s[0]=T$L[4],T$s[1]=T$L[5],T$s[2]=T$L[6],this._up;}),T$u(0,T$L,"right",function(){var T$L=this.transform.worldMatrix.elements,T$s=this._right.elements;return T$s[0]=T$L[0],T$s[1]=T$L[1],T$s[2]=T$L[2],this._right;}),T$u(0,T$L,"renderTargetSize",function(){return this._renderTargetSize;},function(T$L){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=T$L,this._calculateProjectionMatrix();}),T$u(0,T$L,"fieldOfView",function(){return this._fieldOfView;},function(T$L){this._fieldOfView=T$L,this._calculateProjectionMatrix();}),T$u(0,T$L,"nearPlane",function(){return this._nearPlane;},function(T$L){this._nearPlane=T$L,this._calculateProjectionMatrix();}),T$u(0,T$L,"farPlane",function(){return this._farPlane;},function(T$L){this._farPlane=T$L,this._calculateProjectionMatrix();}),T$u(0,T$L,"orthographic",function(){return this._orthographic;},function(T$L){this._orthographic=T$L,this._calculateProjectionMatrix();}),T$u(0,T$L,"orthographicVerticalSize",function(){return this._orthographicVerticalSize;},function(T$L){this._orthographicVerticalSize=T$L,this._calculateProjectionMatrix();}),T$u(0,T$L,"renderingOrder",function(){return this._renderingOrder;},function(T$L){this._renderingOrder=T$L,this._sortCamerasByRenderingOrder();}),T$m.CAMERAPOS=0,T$m.VIEWMATRIX=1,T$m.PROJECTMATRIX=2,T$m.VPMATRIX=3,T$m.VPMATRIX_NO_TRANSLATE=4,T$m.CAMERADIRECTION=5,T$m.CAMERAUP=6,T$m.ENVIRONMENTDIFFUSE=7,T$m.ENVIRONMENTSPECULAR=8,T$m.SIMLODINFO=9,T$m.DIFFUSEIRRADMATR=10,T$m.DIFFUSEIRRADMATG=11,T$m.DIFFUSEIRRADMATB=12,T$m.HDREXPOSURE=13,T$m.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",T$m.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",T$m.CLEARFLAG_SOLIDCOLOR=0,T$m.CLEARFLAG_SKY=1,T$m.CLEARFLAG_DEPTHONLY=2,T$m.CLEARFLAG_NONE=3,T$C(T$m,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new T$Ls(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1);},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new T$Ls();},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new T$Ls();}]),T$m;}(T$As),T$ls=function(T$m){function T$s(T$L){this._render=null,this._geometryFilter=null,T$s.__super.call(this,T$L);}T$r(T$s,"laya.d3.core.RenderableSprite3D",T$m);var T$L=T$s.prototype;return T$L._addToInitStaticBatchManager=function(){},T$L._setBelongScene=function(T$L){T$m.prototype._setBelongScene.call(this,T$L),T$L._renderableSprite3Ds.push(this),this._render._applyLightMapParams();},T$L._setUnBelongScene=function(){var T$L=this._scene._renderableSprite3Ds,T$s=T$L.indexOf(this);T$L.splice(T$s,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),T$m.prototype._setUnBelongScene.call(this);},T$L._update=function(T$L){(T$L.owner=this)._activeInHierarchy&&(this._updateComponents(T$L),this._render._updateOctreeNode(),this._lateUpdateComponents(T$L),T$f.spriteCount++,this._childs.length&&this._updateChilds(T$L));},T$L.destroy=function(T$L){void 0===T$L&&(T$L=!0),T$m.prototype.destroy.call(this,T$L),this._render._destroy(),this._render=null;},T$s.__init__=function(){T$s.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=T$s.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),T$s.SAHDERDEFINE_LIGHTMAP=T$s.shaderDefines.registerDefine("LIGHTMAP");},T$s.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,T$s.SAHDERDEFINE_LIGHTMAP=4,T$s.LIGHTMAPSCALEOFFSET=2,T$s.LIGHTMAP=3,T$C(T$s,["shaderDefines",function(){return this.shaderDefines=new T$Vs();}]),T$s;}(T$As),T$qs=(function(T$L){function T$x(T$L,T$s,T$m){this._long=NaN,this._width=NaN,this._height=NaN,void 0===T$L&&(T$L=1),void 0===T$s&&(T$s=1),void 0===T$m&&(T$m=1),T$x.__super.call(this),this._long=T$L,this._width=T$s,this._height=T$m,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject();}T$r(T$x,"laya.d3.resource.models.BoxMesh",T$ds);var T$s=T$x.prototype;T$s.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var T$L=T$UL.vertexDeclaration,T$s=(T$L.vertexStride,this._long/2),T$m=this._height/2,T$x=this._width/2,T$w=new Float32Array([-T$s,T$m,-T$x,0,1,0,0,0,T$s,T$m,-T$x,0,1,0,1,0,T$s,T$m,T$x,0,1,0,1,1,-T$s,T$m,T$x,0,1,0,0,1,-T$s,-T$m,-T$x,0,-1,0,0,1,T$s,-T$m,-T$x,0,-1,0,1,1,T$s,-T$m,T$x,0,-1,0,1,0,-T$s,-T$m,T$x,0,-1,0,0,0,-T$s,T$m,-T$x,-1,0,0,0,0,-T$s,T$m,T$x,-1,0,0,1,0,-T$s,-T$m,T$x,-1,0,0,1,1,-T$s,-T$m,-T$x,-1,0,0,0,1,T$s,T$m,-T$x,1,0,0,1,0,T$s,T$m,T$x,1,0,0,0,0,T$s,-T$m,T$x,1,0,0,0,1,T$s,-T$m,-T$x,1,0,0,1,1,-T$s,T$m,T$x,0,0,1,0,0,T$s,T$m,T$x,0,0,1,1,0,T$s,-T$m,T$x,0,0,1,1,1,-T$s,-T$m,T$x,0,0,1,0,1,-T$s,T$m,-T$x,0,0,-1,1,0,T$s,T$m,-T$x,0,0,-1,0,0,T$s,-T$m,-T$x,0,0,-1,0,1,-T$s,-T$m,-T$x,0,0,-1,1,1]),T$O=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new T$Zs(T$L,this._numberVertices,35044,!0),this._indexBuffer=new T$ps("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(T$w),this._indexBuffer.setData(T$O),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate();},T$u(0,T$s,"long",function(){return this._long;},function(T$L){this._long!==T$L&&(this._long=T$L,this.releaseResource(),this.activeResource());}),T$u(0,T$s,"width",function(){return this._width;},function(T$L){this._width!==T$L&&(this._width=T$L,this.releaseResource(),this.activeResource());}),T$u(0,T$s,"height",function(){return this._height;},function(T$L){this._height!==T$L&&(this._height=T$L,this.releaseResource(),this.activeResource());});}(),function(T$L){function T$w(T$L,T$s,T$m,T$x){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===T$L&&(T$L=10),void 0===T$s&&(T$s=10),void 0===T$m&&(T$m=10),void 0===T$x&&(T$x=10),T$w.__super.call(this),this._long=T$L,this._width=T$s,this._stacks=T$m,this._slices=T$x,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject();}T$r(T$w,"laya.d3.resource.models.PlaneMesh",T$ds);var T$s=T$w.prototype;T$s.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var T$L=new Uint16Array(this._numberIndices),T$s=T$UL.vertexDeclaration,T$m=T$s.vertexStride/4,T$x=new Float32Array(this._numberVertices*T$m),T$w=this._long/2,T$O=this._width/2,T$v=this._long/this._stacks,T$y=this._width/this._slices,T$F=0,T$o=0;T$o<=this._slices;T$o++)for(var T$V=0;T$V<=this._stacks;T$V++)T$x[T$F++]=T$V*T$v-T$w,T$x[T$F++]=0,T$x[T$F++]=T$o*T$y-T$O,T$x[T$F++]=0,T$x[T$F++]=1,T$x[T$F++]=0,T$x[T$F++]=1*T$V/this._stacks,T$x[T$F++]=1*T$o/this._slices;var T$C=0;for(T$o=0;T$o<this._slices;T$o++)for(T$V=0;T$V<this._stacks;T$V++)T$L[T$C++]=(T$o+1)*(this._stacks+1)+T$V,T$L[T$C++]=T$o*(this._stacks+1)+T$V,T$L[T$C++]=(T$o+1)*(this._stacks+1)+T$V+1,T$L[T$C++]=T$o*(this._stacks+1)+T$V,T$L[T$C++]=T$o*(this._stacks+1)+T$V+1,T$L[T$C++]=(T$o+1)*(this._stacks+1)+T$V+1;this._vertexBuffer=new T$Zs(T$s,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new T$ps("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(T$x),this._indexBuffer.setData(T$L),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate();},T$u(0,T$s,"long",function(){return this._long;},function(T$L){this._long!==T$L&&(this._long=T$L,this.releaseResource(),this.activeResource());}),T$u(0,T$s,"width",function(){return this._width;},function(T$L){this._width!==T$L&&(this._width=T$L,this.releaseResource(),this.activeResource());}),T$u(0,T$s,"stacks",function(){return this._stacks;},function(T$L){this._stacks!==T$L&&(this._stacks=T$L,this.releaseResource(),this.activeResource());}),T$u(0,T$s,"slices",function(){return this._slices;},function(T$L){this._slices!==T$L&&(this._slices=T$L,this.releaseResource(),this.activeResource());});}(),function(T$L){function T$v(T$L,T$s,T$m){void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=.3),void 0===T$m&&(T$m=1e3),this._viewMatrix=new T$Ls(),this._projectionMatrix=new T$Ls(),this._projectionViewMatrix=new T$Ls(),this._viewport=new T$Fs(0,0,0,0),this._normalizedViewport=new T$Fs(0,0,1,1),this._aspectRatio=T$L,this._boundFrustumUpdate=!0,this._boundFrustum=new T$BL(T$Ls.DEFAULT),T$v.__super.call(this,T$s,T$m),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged);}T$r(T$v,"laya.d3.core.Camera",T$Js);var T$s=T$v.prototype;return T$s._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0;},T$s._parseCustomProps=function(T$L,T$s,T$m,T$x){var T$w=T$m.clearColor;this.clearColor=new T$ys(T$w[0],T$w[1],T$w[2],T$w[3]);var T$O=T$m.viewport;this.normalizedViewport=new T$Fs(T$O[0],T$O[1],T$O[2],T$O[3]);},T$s._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var T$L=this.orthographicVerticalSize*this.aspectRatio*.5,T$s=.5*this.orthographicVerticalSize;T$Ls.createOrthoOffCenterRH(-T$L,T$L,-T$s,T$s,this.nearPlane,this.farPlane,this._projectionMatrix);}else T$Ls.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0;},T$s._update=function(T$L){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,T$L);},T$s._renderCamera=function(T$L,T$s,T$m){var T$x,T$w;T$m.parallelSplitShadowMaps[0]&&T$m._renderShadowMap(T$L,T$s,this),(T$s.camera=this)._prepareCameraToRender(),T$m._preRenderUpdateComponents(T$s),T$x=T$s._viewMatrix=this.viewMatrix;var T$O=this._renderTarget;T$O?(T$O.start(),T$Ls.multiply(T$Js._invertYScaleMatrix,this._projectionMatrix,T$Js._invertYProjectionMatrix),T$Ls.multiply(T$Js._invertYScaleMatrix,this.projectionViewMatrix,T$Js._invertYProjectionViewMatrix),T$w=T$s._projectionMatrix=T$Js._invertYProjectionMatrix,T$s._projectionViewMatrix=T$Js._invertYProjectionViewMatrix):(T$w=T$s._projectionMatrix=this._projectionMatrix,T$s._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(T$x,T$w),T$s._viewport=this.viewport,T$m._preRenderScene(T$L,T$s,this.boundFrustum),T$m._clear(T$L,T$s),T$m._renderScene(T$L,T$s),T$m._postRenderUpdateComponents(T$s),T$O&&T$O.end();},T$s.viewportPointToRay=function(T$L,T$s){T$us.calculateCursorRay(T$L,this.viewport,this._projectionMatrix,this.viewMatrix,null,T$s);},T$s.normalizedViewportPointToRay=function(T$L,T$s){var T$m=T$v._tempVector20,T$x=this.viewport,T$w=T$L.elements,T$O=T$m.elements;T$O[0]=T$w[0]*T$x.width,T$O[1]=T$w[1]*T$x.height,T$us.calculateCursorRay(T$m,this.viewport,this._projectionMatrix,this.viewMatrix,null,T$s);},T$s.worldToViewportPoint=function(T$L,T$s){T$Ls.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(T$L,this._projectionViewMatrix,T$s);var T$m=T$s.elements;T$m[0]=T$m[0]/T$H.stage.clientScaleX,T$m[1]=T$m[1]/T$H.stage.clientScaleY;},T$s.worldToNormalizedViewportPoint=function(T$L,T$s){T$Ls.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(T$L,this._projectionViewMatrix,T$s);var T$m=T$s.elements;T$m[0]=T$m[0]/T$H.stage.clientScaleX,T$m[1]=T$m[1]/T$H.stage.clientScaleY;},T$s.convertScreenCoordToOrthographicCoord=function(T$L,T$s){if(this._orthographic){var T$m=T$P.clientWidth,T$x=T$P.clientHeight,T$w=this.orthographicVerticalSize*this.aspectRatio/T$m,T$O=this.orthographicVerticalSize/T$x,T$v=T$L.elements,T$y=T$s.elements;return T$y[0]=(-T$m/2+T$v[0])*T$w,T$y[1]=(T$x/2-T$v[1])*T$O,T$y[2]=(this.nearPlane-this.farPlane)*(T$v[2]+1)/2-this.nearPlane,T$vs.transformCoordinate(T$s,this.transform.worldMatrix,T$s),!0;}return!1;},T$u(0,T$s,"projectionViewMatrix",function(){return T$Ls.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix;}),T$u(0,T$s,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var T$L=this.viewport;return T$L.width/T$L.height;},function(T$L){if(T$L<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=T$L,this._calculateProjectionMatrix();}),T$u(0,T$s,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum;}),T$u(0,T$s,"needViewport",function(){var T$L=this.normalizedViewport;return 0===T$L.x&&0===T$L.y&&1===T$L.width&&1===T$L.height;}),T$u(0,T$s,"viewport",function(){if(this._viewportExpressedInClipSpace){var T$L=this._normalizedViewport,T$s=this.renderTargetSize,T$m=T$s.width,T$x=T$s.height;this._viewport.x=T$L.x*T$m,this._viewport.y=T$L.y*T$x,this._viewport.width=T$L.width*T$m,this._viewport.height=T$L.height*T$x;}return this._viewport;},function(T$L){if(null!=this.renderTarget&&(T$L.x<0||T$L.y<0||0==T$L.width||0==T$L.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=T$L,this._calculateProjectionMatrix();}),T$u(0,T$s,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var T$L=this._viewport,T$s=this.renderTargetSize,T$m=T$s.width,T$x=T$s.height;this._normalizedViewport.x=T$L.x/T$m,this._normalizedViewport.y=T$L.y/T$x,this._normalizedViewport.width=T$L.width/T$m,this._normalizedViewport.height=T$L.height/T$x;}return this._normalizedViewport;},function(T$L){T$L.x<0&&(T$L.x=0,console.warn("Camera: viewport.x must large than 0.0.")),T$L.y<0&&(T$L.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<T$L.x+T$L.width&&(T$L.width=1-T$L.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<T$L.y+T$L.height&&(T$L.height=1-T$L.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=T$L,this._calculateProjectionMatrix();}),T$u(0,T$s,"projectionMatrix",function(){return this._projectionMatrix;},function(T$L){this._projectionMatrix=T$L,this._useUserProjectionMatrix=!0;}),T$u(0,T$s,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix;}),T$C(T$v,["_tempVector20",function(){return this._tempVector20=new T$Os();}]),T$v;}()),T$Ks=function(T$m){function T$x(T$L,T$s){T$x.__super.call(this,T$s),this._geometryFilter=new T$hs(this),this._render=new T$Gs(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),T$L&&(this._geometryFilter.sharedMesh=T$L)instanceof laya.d3.resource.models.Mesh&&(T$L.loaded?this._render.sharedMaterials=T$L.materials:T$L.once("loaded",this,this._applyMeshMaterials));}T$r(T$x,"laya.d3.core.MeshSprite3D",T$m);var T$L=T$x.prototype;return T$L._changeRenderObjectByMesh=function(T$L){var T$s=this._render._renderElements,T$m=T$s[T$L];T$m||(T$m=T$s[T$L]=new T$as()),T$m._render=this._render;var T$x=this._render.sharedMaterials[T$L];T$x||(T$x=T$$s.defaultMaterial);var T$w=this._geometryFilter.sharedMesh.getRenderElement(T$L);return T$m._mainSortID=this._getSortID(T$w,T$x),T$m._sprite3D=this,T$m.renderObj=T$w,T$m._material=T$x,T$m;},T$L._changeRenderObjectByMaterial=function(T$L,T$s){var T$m=this._render._renderElements[T$L];T$s||(T$s=T$$s.defaultMaterial);var T$x=this._geometryFilter.sharedMesh.getRenderElement(T$L);return T$m._mainSortID=this._getSortID(T$x,T$s),T$m._sprite3D=this,T$m.renderObj=T$x,T$m._material=T$s,T$m;},T$L._changeRenderObjectsByMesh=function(){var T$L=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=T$L;for(var T$s=0;T$s<T$L;T$s++)this._changeRenderObjectByMesh(T$s);},T$L._onMeshChanged=function(T$L){var T$s=T$L.sharedMesh;T$s.loaded?this._changeRenderObjectsByMesh():T$s.once("loaded",this,this._onMeshLoaded);},T$L._onMeshLoaded=function(T$L){T$L===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh();},T$L._onMaterialChanged=function(T$L,T$s,T$m){T$s<this._render._renderElements.length&&this._changeRenderObjectByMaterial(T$s,T$m);},T$L._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render);},T$L._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render);},T$L._parseCustomProps=function(T$L,T$s,T$m,T$x){var T$w=this.meshRender,T$O=T$m.lightmapIndex;null!=T$O&&(T$w.lightmapIndex=T$O);var T$v,T$y,T$F=T$m.lightmapScaleOffset;if(T$F&&(T$w.lightmapScaleOffset=new T$ys(T$F[0],T$F[1],T$F[2],T$F[3])),T$x.instanceParams)(T$v=T$x.instanceParams.loadPath)&&(T$y=T$D.getRes(T$s[T$v]),(this.meshFilter.sharedMesh=T$y).loaded?T$w.sharedMaterials=T$y.materials:T$y.once("loaded",this,this._applyMeshMaterials));else{(T$v=T$m.meshPath)&&(T$y=T$D.getRes(T$s[T$v]),this.meshFilter.sharedMesh=T$y);var T$o=T$m.materials;if(T$o){var T$V=T$w.sharedMaterials,T$C=T$o.length;T$V.length=T$C;for(var T$E=0;T$E<T$C;T$E++)T$V[T$E]=T$D.getRes(T$s[T$o[T$E].path]);T$w.sharedMaterials=T$V;}}},T$L._applyMeshMaterials=function(T$L){for(var T$s=this._render.sharedMaterials,T$m=T$L.materials,T$x=0,T$w=T$m.length;T$x<T$w;T$x++)T$s[T$x]||(T$s[T$x]=T$m[T$x]);this._render.sharedMaterials=T$s;},T$L._addToInitStaticBatchManager=function(){T$x._staticBatchManager._addInitBatchSprite(this);},T$L.cloneTo=function(T$L){var T$s=T$L;T$s._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var T$m=this._render,T$x=T$s._render;T$x.enable=T$m.enable,T$x.sharedMaterials=T$m.sharedMaterials,T$x.castShadow=T$m.castShadow;var T$w=T$m.lightmapScaleOffset;T$w&&(T$x.lightmapScaleOffset=T$w.clone()),T$x.lightmapIndex=T$m.lightmapIndex,T$x.receiveShadow=T$m.receiveShadow,T$x.sortingFudge=T$m.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,T$L);},T$L.destroy=function(T$L){if(void 0===T$L&&(T$L=!0),!this.destroyed){var T$s=this.meshFilter.sharedMesh;null!=T$s&&(T$s.loaded||T$s.off("loaded",this,this._applyMeshMaterials)),T$m.prototype.destroy.call(this,T$L),this._geometryFilter._destroy();}},T$u(0,T$L,"meshFilter",function(){return this._geometryFilter;}),T$u(0,T$L,"meshRender",function(){return this._render;}),T$x.__init__=function(){T$xL._staticBatchManagers.push(T$x._staticBatchManager);},T$x.load=function(T$L){return T$H.loader.create(T$L,null,null,T$x);},T$C(T$x,["_staticBatchManager",function(){return this._staticBatchManager=new T$_s();}]),T$x;}(T$ls);}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$L,T$s){"use strict";for(var T$m in Object.defineProperty(T$s,"__esModule",{value:!0}),Laya){var T$x=Laya[T$m];T$x&&T$x.__isclass&&(T$s[T$m]=T$x);}}),function(T$L,T$s,T$wL){T$wL.un,T$wL.uns;var T$m=T$wL.static,T$x=T$wL.class,T$O=T$wL.getset,T$T=T$wL.__newvec,T$y=laya.maths.Bezier,T$C=laya.utils.Browser,T$UL=laya.utils.Byte,T$w=(laya.events.Event,laya.events.EventDispatcher),T$v=laya.display.Graphics,T$F=(laya.resource.HTMLCanvas,laya.utils.Handler),T$o=laya.net.Loader,T$E=laya.maths.MathUtil,T$cL=laya.maths.Matrix,T$j=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),T$V=(laya.renders.RenderContext,laya.resource.Resource),T$r=laya.utils.RunDriver,T$OL=laya.display.Sprite,T$u=laya.utils.Stat,T$hL=laya.resource.Texture,T$D=(laya.net.URL,laya.utils.Utils),T$c=function(){function T$L(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0;}return T$x(T$L,"laya.ani.AnimationContent"),T$L;}(),T$h=function(){function T$L(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0;}return T$x(T$L,"laya.ani.AnimationNodeContent"),T$L;}(),T$b=function(){function T$L(){}return T$x(T$L,"laya.ani.AnimationParser01"),T$L.parse=function(T$L,T$s){var T$m=T$s.__getBuffer(),T$x=0,T$w=0,T$O=0,T$v=0,T$y=0,T$F=0,T$o=0,T$V=T$s.readUTFString();T$L._aniClassName=T$V;var T$C,T$E=T$s.readUTFString().split("\n"),T$r=T$s.getUint8(),T$u=T$s.getUint32(),T$T=T$s.getUint32();0<T$u&&(T$C=T$m.slice(T$u,T$T));var T$j=new T$UL(T$C);for(0<T$T&&(T$L._publicExtData=T$m.slice(T$T,T$m.byteLength)),T$L._useParent=!!T$s.getUint8(),T$L._anis.length=T$r,T$x=0;T$x<T$r;T$x++){var T$D=T$L._anis[T$x]=new T$c();T$D.nodes=new Array();var T$e=T$D.name=T$E[T$s.getUint16()];T$L._aniMap[T$e]=T$x,T$D.bone3DMap={},T$D.playTime=T$s.getFloat32(),T$D.playTime<=0&&console.error("播放时间不能为0  url="+T$L.url+" name="+T$D.name);var T$b=T$D.nodes.length=T$s.getUint8();for(T$w=T$D.totalKeyframeDatasLength=0;T$w<T$b;T$w++){var T$S=T$D.nodes[T$w]=new T$h();T$S.childs=[];var T$H=T$s.getInt16();0<=T$H&&(T$S.name=T$E[T$H],T$D.bone3DMap[T$S.name]=T$w),T$S.keyFrame=new Array(),T$S.parentIndex=T$s.getInt16(),-1==T$S.parentIndex?T$S.parent=null:T$S.parent=T$D.nodes[T$S.parentIndex],T$S.lerpType=T$s.getUint8();var T$Y=T$s.getUint32();T$j.pos=T$Y;var T$a=T$S.keyframeWidth=T$j.getUint16();if(T$D.totalKeyframeDatasLength+=T$a,0===T$S.lerpType||1===T$S.lerpType)for(T$S.interpolationMethod=[],T$S.interpolationMethod.length=T$a,T$O=0;T$O<T$a;T$O++)T$S.interpolationMethod[T$O]=T$A.interpolation[T$j.getUint8()];null!=T$S.parent&&T$S.parent.childs.push(T$S);var T$f=T$s.getUint16();0<T$f&&(T$S.extenData=T$m.slice(T$s.pos,T$s.pos+T$f),T$s.pos+=T$f);var T$_,T$Q=T$s.getUint16(),T$N=0;for(T$O=0,T$v=T$S.keyFrame.length=T$Q;T$O<T$v;T$O++){if((T$_=T$S.keyFrame[T$O]=new T$G()).duration=T$s.getFloat32(),T$_.startTime=T$N,2===T$S.lerpType){T$_.interpolationData=[];var T$i,T$U=T$s.getUint8();switch(T$i=T$s.getFloat32()){case 254:for(T$_.interpolationData.length=T$a,T$o=0;T$o<T$a;T$o++)T$_.interpolationData[T$o]=0;break;case 255:for(T$_.interpolationData.length=T$a,T$o=0;T$o<T$a;T$o++)T$_.interpolationData[T$o]=5;break;default:for(T$_.interpolationData.push(T$i),T$F=1;T$F<T$U;T$F++)T$_.interpolationData.push(T$s.getFloat32());}}for(T$_.data=new Float32Array(T$a),T$y=0;T$y<T$a;T$y++)T$_.data[T$y]=T$s.getFloat32(),-1e-8<T$_.data[T$y]&&T$_.data[T$y]<1e-8&&(T$_.data[T$y]=0);T$N+=T$_.duration;}T$_.startTime=T$D.playTime,T$S.playTime=T$D.playTime,T$L._calculateKeyFrame(T$S,T$Q,T$a);}}},T$L;}(),T$S=function(){function T$H(){}return T$x(T$H,"laya.ani.AnimationParser02"),T$H.READ_DATA=function(){T$H._DATA.offset=T$H._reader.getUint32(),T$H._DATA.size=T$H._reader.getUint32();},T$H.READ_BLOCK=function(){for(var T$L=T$H._BLOCK.count=T$H._reader.getUint16(),T$s=T$H._BLOCK.blockStarts=[],T$m=T$H._BLOCK.blockLengths=[],T$x=0;T$x<T$L;T$x++)T$s.push(T$H._reader.getUint32()),T$m.push(T$H._reader.getUint32());},T$H.READ_STRINGS=function(){var T$L=T$H._reader.getUint32(),T$s=T$H._reader.getUint16(),T$m=T$H._reader.pos;T$H._reader.pos=T$L+T$H._DATA.offset;for(var T$x=0;T$x<T$s;T$x++)T$H._strings[T$x]=T$H._reader.readUTFString();T$H._reader.pos=T$m;},T$H.parse=function(T$L,T$s){T$H._templet=T$L;(T$H._reader=T$s).__getBuffer();T$H.READ_DATA(),T$H.READ_BLOCK(),T$H.READ_STRINGS();for(var T$m=0,T$x=T$H._BLOCK.count;T$m<T$x;T$m++){var T$w=T$s.getUint16(),T$O=T$H._strings[T$w],T$v=T$H["READ_"+T$O];if(null==T$v)throw new Error("model file err,no this function:"+T$w+" "+T$O);T$v.call();}},T$H.READ_ANIMATIONS=function(){var T$L=T$H._reader,T$s=T$L.__getBuffer(),T$m=0,T$x=0,T$w=0,T$O=0,T$v=T$L.getUint16(),T$y=[];for(T$y.length=T$v,T$m=0;T$m<T$v;T$m++)T$y[T$m]=T$A.interpolation[T$L.getByte()];var T$F=T$L.getUint8();for(T$H._templet._anis.length=T$F,T$m=0;T$m<T$F;T$m++){var T$o=T$H._templet._anis[T$m]={};T$o.nodes=new Array();var T$V=T$o.name=T$H._strings[T$L.getUint16()];T$H._templet._aniMap[T$V]=T$m,T$o.bone3DMap={},T$o.playTime=T$L.getFloat32();var T$C=T$o.nodes.length=T$L.getInt16();for(T$x=T$o.totalKeyframeDatasLength=0;T$x<T$C;T$x++){var T$E=T$o.nodes[T$x]={};T$E.keyframeWidth=T$v,T$E.childs=[];var T$r=T$L.getUint16();0<=T$r&&(T$E.name=T$H._strings[T$r],T$o.bone3DMap[T$E.name]=T$x),T$E.keyFrame=new Array(),T$E.parentIndex=T$L.getInt16(),-1==T$E.parentIndex?T$E.parent=null:T$E.parent=T$o.nodes[T$E.parentIndex],T$o.totalKeyframeDatasLength+=T$v,T$E.interpolationMethod=T$y,null!=T$E.parent&&T$E.parent.childs.push(T$E);var T$u=T$L.getUint16(),T$T=null,T$j=null;for(T$w=0,T$O=T$E.keyFrame.length=T$u;T$w<T$O;T$w++){(T$T=T$E.keyFrame[T$w]={}).startTime=T$L.getFloat32(),T$j&&(T$j.duration=T$T.startTime-T$j.startTime);var T$D=T$H._DATA.offset,T$e=T$L.getUint32(),T$b=4*T$v,T$S=T$s.slice(T$D+T$e,T$D+T$e+T$b);T$T.data=new Float32Array(T$S),T$j=T$T;}T$T.duration=0,T$E.playTime=T$o.playTime,T$H._templet._calculateKeyFrame(T$E,T$u,T$v);}}},T$H._templet=null,T$H._reader=null,T$H._strings=[],T$m(T$H,["_BLOCK",function(){return this._BLOCK={count:0};},"_DATA",function(){return this._DATA={offset:0,size:0};}]),T$H;}(),T$GL=(function(){function T$L(){}T$x(T$L,"laya.ani.AnimationState"),T$L.stopped=0,T$L.paused=1,T$L.playing=2;}(),function(){function T$w(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new T$lL(),this.resultMatrix=new T$cL(),this._children=[];}T$x(T$w,"laya.ani.bone.Bone");var T$L=T$w.prototype;return T$L.setTempMatrix=function(T$L){this._tempMatrix=T$L;var T$s,T$m=0;for(T$m=0,T$s=this._children.length;T$m<T$s;T$m++)this._children[T$m].setTempMatrix(this._tempMatrix);},T$L.update=function(T$L){var T$s;if(this.rotation=this.transform.skX,T$L)T$s=this.resultTransform.getMatrix(),T$cL.mul(T$s,T$L,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone){if(this.inheritRotation&&this.inheritScale)T$s=this.resultTransform.getMatrix(),T$cL.mul(T$s,this.parentBone.resultMatrix,this.resultMatrix);else{var T$m=this.parentBone,T$x=NaN,T$w=NaN,T$O=NaN,T$v=this.parentBone.resultMatrix;T$s=this.resultTransform.getMatrix();var T$y=T$v.a*T$s.tx+T$v.c*T$s.ty+T$v.tx,T$F=T$v.b*T$s.tx+T$v.d*T$s.ty+T$v.ty,T$o=new T$cL();this.inheritRotation?(T$x=Math.atan2(T$m.resultMatrix.b,T$m.resultMatrix.a),T$w=Math.cos(T$x),T$O=Math.sin(T$x),T$o.setTo(T$w,T$O,-T$O,T$w,0,0),T$cL.mul(this._tempMatrix,T$o,T$cL.TEMP),T$cL.TEMP.copyTo(T$o),T$s=this.resultTransform.getMatrix(),T$cL.mul(T$s,T$o,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,T$s=this.resultTransform.getMatrix(),T$cL.TEMP.identity(),T$cL.TEMP.d=this.d,T$cL.mul(T$s,T$cL.TEMP,this.resultMatrix)),this.resultMatrix.tx=T$y,this.resultMatrix.ty=T$F;}}else(T$s=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var T$V,T$C=0;for(T$C=0,T$V=this._children.length;T$C<T$V;T$C++)this._children[T$C].update();},T$L.updateChild=function(){var T$L,T$s=0;for(T$s=0,T$L=this._children.length;T$s<T$L;T$s++)this._children[T$s].update();},T$L.setRotation=function(T$L){this._sprite&&(this._sprite.rotation=180*T$L/Math.PI);},T$L.updateDraw=function(T$L,T$s){T$w.ShowBones&&!T$w.ShowBones[this.name]||(this._sprite||(this._sprite=new T$OL(),this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),T$wL.stage.addChild(this._sprite)),this._sprite.x=T$L+this.resultMatrix.tx,this._sprite.y=T$s+this.resultMatrix.ty);var T$m,T$x=0;for(T$x=0,T$m=this._children.length;T$x<T$m;T$x++)this._children[T$x].updateDraw(T$L,T$s);},T$L.addChild=function(T$L){this._children.push(T$L),T$L.parentBone=this;},T$L.findBone=function(T$L){if(this.name==T$L)return this;var T$s,T$m,T$x=0;for(T$x=0,T$s=this._children.length;T$x<T$s;T$x++)if(T$m=this._children[T$x].findBone(T$L))return T$m;return null;},T$L.localToWorld=function(T$L){var T$s=T$L[0],T$m=T$L[1];T$L[0]=T$s*this.resultMatrix.a+T$m*this.resultMatrix.c+this.resultMatrix.tx,T$L[1]=T$s*this.resultMatrix.b+T$m*this.resultMatrix.d+this.resultMatrix.ty;},T$w.ShowBones={},T$w;}()),T$RL=function(){function T$T(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null;}T$x(T$T,"laya.ani.bone.BoneSlot");var T$L=T$T.prototype;return T$L.showSlotData=function(T$L,T$s){void 0===T$s&&(T$s=!0),this.currSlotData=T$L,T$s&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null;},T$L.showDisplayByName=function(T$L){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(T$L));},T$L.replaceDisplayByName=function(T$L,T$s){if(this.currSlotData){var T$m;T$m=this.currSlotData.getDisplayByName(T$L);var T$x;T$x=this.currSlotData.getDisplayByName(T$s),this.replaceDisplayByIndex(T$m,T$x);}},T$L.replaceDisplayByIndex=function(T$L,T$s){this.currSlotData&&(this._replaceDic[T$L]=T$s,this.displayIndex==T$L&&this.showDisplayByIndex(T$L));},T$L.showDisplayByIndex=function(T$L){if(null!=this._replaceDic[T$L]&&(T$L=this._replaceDic[T$L]),this.currSlotData&&-1<T$L&&T$L<this.currSlotData.displayArr.length){if(this.displayIndex=T$L,this.currDisplayData=this.currSlotData.displayArr[T$L],this.currDisplayData){var T$s=this.currDisplayData.name;this.currTexture=this.templet.getTexture(T$s),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!T$j.isConchApp||T$j.isConchApp&&"0.9.15"<T$OL.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture));}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null;},T$L.replaceSkin=function(T$L){this._diyTexture=T$L,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null);},T$L.setParentMatrix=function(T$L){this._parentMatrix=T$L;},T$L.draw=function(T$L,T$s,T$m,T$x){if(void 0===T$m&&(T$m=!1),void 0===T$x&&(T$x=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var T$w,T$O=this.currTexture;switch(this._diyTexture&&(T$O=this._diyTexture),this.currDisplayData.type){case 0:if(T$L){var T$v=this.getDisplayMatrix();if(this._parentMatrix){var T$y=!1;if(T$v){var T$F;if(T$cL.mul(T$v,this._parentMatrix,T$cL.TEMP),T$F=T$m?(null==this._resultMatrix&&(this._resultMatrix=new T$cL()),this._resultMatrix):new T$cL(),!T$j.isWebGL&&this.currDisplayData.uvs||T$j.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var T$o=T$T._tempMatrix;T$o.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(T$o.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(T$y=!0,T$o.rotate(-Math.PI/2)),T$cL.mul(T$o,T$cL.TEMP,T$F);}else T$cL.TEMP.copyTo(T$F);T$y?T$L.drawTexture(T$O,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,T$F):T$L.drawTexture(T$O,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,T$F);}}}break;case 1:if(null==(T$w=T$m?(null==this._skinSprite&&(this._skinSprite=T$T.createSkinMesh()),this._skinSprite):T$T.createSkinMesh()))return;var T$V;if(null==this.currDisplayData.bones){var T$C,T$E=this.currDisplayData.weights;this.deformData&&(T$E=this.deformData),T$C=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=T$a.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=T$a.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=T$E;this.currDisplayData.triangles.length;T$V=this.currDisplayData.triangles,T$w.init2(T$O,null,T$V,this._mVerticleArr,T$C);var T$r,T$u=this.getDisplayMatrix();if(this._parentMatrix)if(T$u)T$cL.mul(T$u,this._parentMatrix,T$cL.TEMP),T$r=T$m?(null==this._resultMatrix&&(this._resultMatrix=new T$cL()),this._resultMatrix):new T$cL(),T$cL.TEMP.copyTo(T$r),T$w.transform=T$r;}else this.skinMesh(T$s,T$w,T$x);T$L.drawSkin(T$w);break;case 2:if(null==(T$w=T$m?(null==this._skinSprite&&(this._skinSprite=T$T.createSkinMesh()),this._skinSprite):T$T.createSkinMesh()))return;this.skinMesh(T$s,T$w,T$x),T$L.drawSkin(T$w);}}},T$L.skinMesh=function(T$L,T$s,T$m){var T$x,T$w=this.currTexture,T$O=this.currDisplayData.bones;T$x=this._diyTexture?(T$w=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=T$a.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=T$a.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var T$v,T$y,T$F=this.currDisplayData.weights,T$o=this.currDisplayData.triangles,T$V=0,T$C=0,T$E=0,T$r=NaN,T$u=NaN,T$T=0,T$j=0,T$D=[],T$e=0,T$b=0;if(this.deformData&&0<this.deformData.length){var T$S=0;for(T$e=0,T$b=T$O.length;T$e<T$b;){for(T$E=T$O[T$e++]+T$e,T$C=T$V=0;T$e<T$E;T$e++)T$y=T$L[T$O[T$e]],T$r=T$F[T$T]+this.deformData[T$S++],T$u=T$F[T$T+1]+this.deformData[T$S++],T$j=T$F[T$T+2],T$V+=(T$r*T$y.a+T$u*T$y.c+T$y.tx)*T$j,T$C+=(T$r*T$y.b+T$u*T$y.d+T$y.ty)*T$j,T$T+=3;T$D.push(T$V,T$C);}}else for(T$e=0,T$b=T$O.length;T$e<T$b;){for(T$E=T$O[T$e++]+T$e,T$C=T$V=0;T$e<T$E;T$e++)T$y=T$L[T$O[T$e]],T$r=T$F[T$T],T$u=T$F[T$T+1],T$j=T$F[T$T+2],T$V+=(T$r*T$y.a+T$u*T$y.c+T$y.tx)*T$j,T$C+=(T$r*T$y.b+T$u*T$y.d+T$y.ty)*T$j,T$T+=3;T$D.push(T$V,T$C);}this._mVerticleArr=T$D,T$v=T$o,T$s.init2(T$w,null,T$v,this._mVerticleArr,T$x);},T$L.drawBonePoint=function(T$L){T$L&&this._parentMatrix&&T$L.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000");},T$L.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null;},T$L.getMatrix=function(){return this._resultMatrix;},T$L.copy=function(){var T$L=new T$T();return T$L.type="copy",T$L.name=this.name,T$L.attachmentName=this.attachmentName,T$L.srcDisplayIndex=this.srcDisplayIndex,T$L.parent=this.parent,T$L.displayIndex=this.displayIndex,T$L.templet=this.templet,T$L.currSlotData=this.currSlotData,T$L.currTexture=this.currTexture,T$L.currDisplayData=this.currDisplayData,T$L;},T$T.createSkinMesh=function(){return T$j.isWebGL||T$j.isConchApp?T$r.skinAniSprite():(T$j.isWebGL,null);},T$m(T$T,["_tempMatrix",function(){return this._tempMatrix=new T$cL();}]),T$T;}(),T$AL=function(){function T$L(){this.skinName=null,this.deformSlotDataList=[];}return T$x(T$L,"laya.ani.bone.DeformAniData"),T$L;}(),T$gL=function(){function T$L(){this.deformSlotDisplayList=[];}return T$x(T$L,"laya.ani.bone.DeformSlotData"),T$L;}(),T$$L=function(){function T$L(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[];}T$x(T$L,"laya.ani.bone.DeformSlotDisplayData");var T$s=T$L.prototype;return T$s.binarySearch1=function(T$L,T$s){var T$m=0,T$x=T$L.length-2;if(0==T$x)return 1;for(var T$w=T$x>>>1;;){if(T$L[Math.floor(T$w+1)]<=T$s?T$m=T$w+1:T$x=T$w,T$m==T$x)return T$m+1;T$w=T$m+T$x>>>1;}return 0;},T$s.apply=function(T$L,T$s,T$m){if(void 0===T$m&&(T$m=1),T$L+=.05,!(this.timeList.length<=0)){var T$x=0;if(!(T$L<this.timeList[0])){var T$w=this.vectices[0].length,T$O=[],T$v=this.binarySearch1(this.timeList,T$L);if(this.frameIndex=T$v,T$L>=this.timeList[this.timeList.length-1]){var T$y=this.vectices[this.vectices.length-1];if(T$m<1)for(T$x=0;T$x<T$w;T$x++)T$O[T$x]+=(T$y[T$x]-T$O[T$x])*T$m;else for(T$x=0;T$x<T$w;T$x++)T$O[T$x]=T$y[T$x];this.deformData=T$O;}else{this.tweenKeyList[this.frameIndex];var T$F=this.vectices[this.frameIndex-1],T$o=this.vectices[this.frameIndex],T$V=this.timeList[this.frameIndex-1],T$C=this.timeList[this.frameIndex];T$m=this.tweenKeyList[T$v-1]?(T$L-T$V)/(T$C-T$V):0;var T$E=NaN;for(T$x=0;T$x<T$w;T$x++)T$E=T$F[T$x],T$O[T$x]=T$E+(T$o[T$x]-T$E)*T$m;this.deformData=T$O;}}}},T$L;}(),T$pL=function(){function T$L(){this.time=NaN,this.drawOrder=[];}return T$x(T$L,"laya.ani.bone.DrawOrderData"),T$L;}(),T$ZL=function(){function T$L(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN;}return T$x(T$L,"laya.ani.bone.EventData"),T$L;}(),T$e=function(){function T$xL(T$L,T$s){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=T$L,this._targetBone=T$s[T$L.targetBoneIndex],this.isSpine=T$L.isSpine,null==this._bones&&(this._bones=[]);for(var T$m=this._bones.length=0,T$x=T$L.boneIndexs.length;T$m<T$x;T$m++)this._bones.push(T$s[T$L.boneIndexs[T$m]]);this.name=T$L.name,this.mix=T$L.mix,this.bendDirection=T$L.bendDirection;}T$x(T$xL,"laya.ani.bone.IkConstraint");var T$L=T$xL.prototype;return T$L.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix);}},T$L._applyIk1=function(T$L,T$s,T$m,T$x){var T$w=T$L.parentBone,T$O=1/(T$w.resultMatrix.a*T$w.resultMatrix.d-T$w.resultMatrix.b*T$w.resultMatrix.c),T$v=T$s-T$w.resultMatrix.tx,T$y=T$m-T$w.resultMatrix.ty,T$F=(T$v*T$w.resultMatrix.d-T$y*T$w.resultMatrix.c)*T$O-T$L.transform.x,T$o=(T$y*T$w.resultMatrix.a-T$v*T$w.resultMatrix.b)*T$O-T$L.transform.y,T$V=Math.atan2(T$o,T$F)*T$xL.radDeg-0-T$L.transform.skX;T$L.transform.scX<0&&(T$V+=180),180<T$V?T$V-=360:T$V<-180&&(T$V+=360),T$L.transform.skX=T$L.transform.skY=T$L.transform.skX+T$V*T$x,T$L.update();},T$L.updatePos=function(T$L,T$s){this._sp&&this._sp.pos(T$L,T$s);},T$L._applyIk2=function(T$L,T$s,T$m,T$x,T$w,T$O){if(0!=T$O){var T$v=T$L.resultTransform.x,T$y=T$L.resultTransform.y,T$F=T$L.transform.scX,T$o=T$L.transform.scY,T$V=T$s.transform.scX,T$C=0,T$E=0,T$r=0;T$r=T$F<0?(T$F=-T$F,T$C=180,-1):(T$C=0,1),T$o<0&&(T$o=-T$o,T$r=-T$r),T$E=T$V<0?(T$V=-T$V,180):0;var T$u=T$s.resultTransform.x,T$T=NaN,T$j=NaN,T$D=NaN,T$e=T$L.resultMatrix.a,T$b=T$L.resultMatrix.c,T$S=T$L.resultMatrix.b,T$H=T$L.resultMatrix.d,T$Y=Math.abs(T$F-T$o)<=1e-4;T$D=T$Y?(T$j=T$e*T$u+T$b*(T$T=T$s.resultTransform.y)+T$L.resultMatrix.tx,T$S*T$u+T$H*T$T+T$L.resultMatrix.ty):(T$T=0,T$j=T$e*T$u+T$L.resultMatrix.tx,T$S*T$u+T$L.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new T$OL(),T$wL.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(T$m,T$x,15,"#ffff00"),this._sp.graphics.drawCircle(T$j,T$D,15,"#ff00ff")),T$L.setRotation(Math.atan2(T$D-T$L.resultMatrix.ty,T$j-T$L.resultMatrix.tx));var T$a=T$L.parentBone;T$e=T$a.resultMatrix.a,T$b=T$a.resultMatrix.c,T$S=T$a.resultMatrix.b;var T$f=1/(T$e*(T$H=T$a.resultMatrix.d)-T$b*T$S),T$_=T$m-T$a.resultMatrix.tx,T$Q=T$x-T$a.resultMatrix.ty,T$N=(T$_*T$H-T$Q*T$b)*T$f-T$v,T$i=(T$Q*T$e-T$_*T$S)*T$f-T$y,T$U=((T$_=T$j-T$a.resultMatrix.tx)*T$H-(T$Q=T$D-T$a.resultMatrix.ty)*T$b)*T$f-T$v,T$c=(T$Q*T$e-T$_*T$S)*T$f-T$y,T$h=Math.sqrt(T$U*T$U+T$c*T$c),T$G=T$s.length*T$V,T$R=NaN,T$A=NaN;if(T$Y){var T$g=(T$N*T$N+T$i*T$i-T$h*T$h-(T$G*=T$F)*T$G)/(2*T$h*T$G);T$g<-1?T$g=-1:1<T$g&&(T$g=1),T$A=Math.acos(T$g)*T$w,T$e=T$h+T$G*T$g,T$b=T$G*Math.sin(T$A),T$R=Math.atan2(T$i*T$e-T$N*T$b,T$N*T$e+T$i*T$b);}else{var T$$=(T$e=T$F*T$G)*T$e,T$p=(T$b=T$o*T$G)*T$b,T$Z=T$N*T$N+T$i*T$i,T$W=Math.atan2(T$i,T$N),T$d=-2*T$p*T$h,T$X=T$p-T$$;if(0<(T$H=T$d*T$d-4*T$X*(T$S=T$p*T$h*T$h+T$$*T$Z-T$$*T$p))){var T$I=Math.sqrt(T$H);T$d<0&&(T$I=-T$I);var T$n=(T$I=-(T$d+T$I)/2)/T$X,T$J=T$S/T$I,T$l=Math.abs(T$n)<Math.abs(T$J)?T$n:T$J;T$l*T$l<=T$Z&&(T$Q=Math.sqrt(T$Z-T$l*T$l)*T$w,T$R=T$W-Math.atan2(T$Q,T$l),T$A=Math.atan2(T$Q/T$o,(T$l-T$h)/T$F));}var T$q=0,T$K=Number.MAX_VALUE,T$P=0,T$k=0,T$B=0,T$M=0,T$z=0,T$t=0;T$M<(T$H=(T$_=T$h+T$e)*T$_)&&(T$B=0,T$M=T$H,T$z=T$_),(T$H=(T$_=T$h-T$e)*T$_)<T$K&&(T$q=Math.PI,T$K=T$H,T$P=T$_);var T$LL=Math.acos(-T$e*T$h/(T$$-T$p));(T$H=(T$_=T$e*Math.cos(T$LL)+T$h)*T$_+(T$Q=T$b*Math.sin(T$LL))*T$Q)<T$K&&(T$q=T$LL,T$K=T$H,T$P=T$_,T$k=T$Q),T$M<T$H&&(T$B=T$LL,T$M=T$H,T$z=T$_,T$t=T$Q),T$A=T$Z<=(T$K+T$M)/2?(T$R=T$W-Math.atan2(T$k*T$w,T$P),T$q*T$w):(T$R=T$W-Math.atan2(T$t*T$w,T$z),T$B*T$w);}var T$sL=Math.atan2(T$T,T$u)*T$r,T$mL=T$L.resultTransform.skX;180<(T$R=(T$R-T$sL)*T$xL.radDeg+T$C-T$mL)?T$R-=360:T$R<-180&&(T$R+=360),T$L.resultTransform.x=T$v,T$L.resultTransform.y=T$y,T$L.resultTransform.skX=T$L.resultTransform.skY=T$mL+T$R*T$O,T$mL=T$s.resultTransform.skX,180<(T$A=((T$A+T$sL)*T$xL.radDeg-0)*T$r+T$E-(T$mL%=360))?T$A-=360:T$A<-180&&(T$A+=360),T$s.resultTransform.x=T$u,T$s.resultTransform.y=T$T,T$s.resultTransform.skX=T$s.resultTransform.skY=T$s.resultTransform.skY+T$A*T$O,T$L.update();}},T$L._applyIk3=function(T$L,T$s,T$m,T$x,T$w,T$O){if(0!=T$O){var T$v,T$y,T$F=T$s.resultMatrix.a*T$s.length,T$o=T$s.resultMatrix.b*T$s.length,T$V=T$F*T$F+T$o*T$o,T$C=Math.sqrt(T$V),T$E=T$L.resultMatrix.tx,T$r=T$L.resultMatrix.ty,T$u=T$s.resultMatrix.tx,T$T=T$s.resultMatrix.ty,T$j=T$u-T$E,T$D=T$T-T$r,T$e=T$j*T$j+T$D*T$D,T$b=Math.sqrt(T$e),T$S=(T$j=T$m-T$L.resultMatrix.tx)*T$j+(T$D=T$x-T$L.resultMatrix.ty)*T$D,T$H=Math.sqrt(T$S);if(T$C+T$b<=T$H||T$H+T$C<=T$b||T$H+T$b<=T$C){var T$Y=NaN;T$u=T$E+(T$Y=T$C+T$b<=T$H?1:-1)*(T$m-T$E)*T$b/T$H,T$T=T$r+T$Y*(T$x-T$r)*T$b/T$H;}else{var T$a=(T$e-T$V+T$S)/(2*T$S),T$f=Math.sqrt(T$e-T$a*T$a*T$S)/T$H,T$_=T$E+T$j*T$a,T$Q=T$r+T$D*T$a,T$N=-T$D*T$f,T$i=T$j*T$f;T$T=0<T$w?(T$u=T$_-T$N,T$Q-T$i):(T$u=T$_+T$N,T$Q+T$i);}T$v=T$u,T$y=T$T,this.isDebug&&(this._sp||(this._sp=new T$OL(),T$wL.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(T$E,T$r,15,"#ff00ff"),this._sp.graphics.drawCircle(T$m,T$x,15,"#ffff00"),this._sp.graphics.drawCircle(T$v,T$y,15,"#ff00ff"));var T$U,T$c;T$U=Math.atan2(T$y-T$L.resultMatrix.ty,T$v-T$L.resultMatrix.tx),T$L.setRotation(T$U),(T$c=T$xL._tempMatrix).identity(),T$c.rotate(T$U),T$c.scale(T$L.resultMatrix.getScaleX(),T$L.resultMatrix.getScaleY()),T$c.translate(T$L.resultMatrix.tx,T$L.resultMatrix.ty),T$c.copyTo(T$L.resultMatrix),T$L.updateChild();var T$h,T$G;T$h=Math.atan2(T$x-T$y,T$m-T$v),T$s.setRotation(T$h),(T$G=T$xL._tempMatrix).identity(),T$G.rotate(T$h),T$G.scale(T$s.resultMatrix.getScaleX(),T$s.resultMatrix.getScaleY()),T$G.translate(T$v,T$y),T$c.copyTo(T$s.resultMatrix),T$s.updateChild();}},T$m(T$xL,["radDeg",function(){return this.radDeg=180/Math.PI;},"degRad",function(){return this.degRad=Math.PI/180;},"_tempMatrix",function(){return this._tempMatrix=new T$cL();}]),T$xL;}(),T$WL=function(){function T$L(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[];}return T$x(T$L,"laya.ani.bone.IkConstraintData"),T$L;}(),T$H=function(){function T$G(T$L,T$s){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=T$L,this.position=T$L.position,this.spacing=T$L.spacing,this.rotateMix=T$L.rotateMix,this.translateMix=T$L.translateMix,this.bones=[];for(var T$m=this.data.bones,T$x=0,T$w=T$m.length;T$x<T$w;T$x++)this.bones.push(T$s[T$m[T$x]]);}T$x(T$G,"laya.ani.bone.PathConstraint");var T$L=T$G.prototype;return T$L.apply=function(T$L,T$s){if(this.target){var T$m=this.translateMix,T$x=this.translateMix,T$w=0<T$x,T$O=this.data.spacingMode,T$v="length"==T$O,T$y=this.data.rotateMode,T$F="tangent"==T$y,T$o="chainScale"==T$y,T$V=[],T$C=this.bones.length,T$E=T$F?T$C:T$C+1,T$r=[];(this._spaces=T$r)[0]=this.position;var T$u=this.spacing;if(T$o||T$v)for(var T$T=0,T$j=T$E-1;T$T<T$j;){var T$D=this.bones[T$T],T$e=T$D.length,T$b=T$e*T$D.resultMatrix.a,T$S=T$e*T$D.resultMatrix.b;T$e=Math.sqrt(T$b*T$b+T$S*T$S),T$o&&(T$V[T$T]=T$e),T$r[++T$T]=T$v?Math.max(0,T$e+T$u):T$u;}else for(T$T=1;T$T<T$E;T$T++)T$r[T$T]=T$u;var T$H=this.computeWorldPositions(this.target,T$L,T$s,T$E,T$F,"percent"==this.data.positionMode,"percent"==T$O);if(this._debugKey){for(T$T=0;T$T<T$H.length;T$T++)T$s.drawCircle(T$H[T$T++],T$H[T$T++],5,"#00ff00");var T$Y=[];for(T$T=0;T$T<T$H.length;T$T++)T$Y.push(T$H[T$T++],T$H[T$T++]);T$s.drawLines(0,0,T$Y,"#ff0000");}var T$a=T$H[0],T$f=T$H[1],T$_=this.data.offsetRotation,T$Q="chain"==T$y&&0==T$_,T$N=NaN;for(T$T=0,T$N=3;T$T<T$C;T$T++,T$N+=3){(T$D=this.bones[T$T]).resultMatrix.tx+=(T$a-T$D.resultMatrix.tx)*T$m,T$D.resultMatrix.ty+=(T$f-T$D.resultMatrix.ty)*T$m;var T$i=(T$b=T$H[T$N])-T$a,T$U=(T$S=T$H[T$N+1])-T$f;if(T$o&&0!=(T$e=T$V[T$T])){var T$c=(Math.sqrt(T$i*T$i+T$U*T$U)/T$e-1)*T$x+1;T$D.resultMatrix.a*=T$c,T$D.resultMatrix.c*=T$c;}if(T$a=T$b,T$f=T$S,T$w){var T$h=T$D.resultMatrix.a,T$G=T$D.resultMatrix.c,T$R=T$D.resultMatrix.b,T$A=T$D.resultMatrix.d,T$g=NaN,T$$=NaN,T$p=NaN;T$g=T$F?T$H[T$N-1]:0==T$r[T$T+1]?T$H[T$N+2]:Math.atan2(T$U,T$i),T$g-=Math.atan2(T$R,T$h)-T$_/180*Math.PI,T$Q&&(T$$=Math.cos(T$g),T$p=Math.sin(T$g),T$a+=((T$e=T$D.length)*(T$$*T$h-T$p*T$R)-T$i)*T$x,T$f+=(T$e*(T$p*T$h+T$$*T$R)-T$U)*T$x),T$g>Math.PI?T$g-=2*Math.PI:T$g<-Math.PI&&(T$g+=2*Math.PI),T$g*=T$x,T$$=Math.cos(T$g),T$p=Math.sin(T$g),T$D.resultMatrix.a=T$$*T$h-T$p*T$R,T$D.resultMatrix.c=T$$*T$G-T$p*T$A,T$D.resultMatrix.b=T$p*T$h+T$$*T$R,T$D.resultMatrix.d=T$p*T$G+T$$*T$A;}}}},T$L.computeWorldVertices2=function(T$L,T$s,T$m,T$x,T$w,T$O){var T$v,T$y,T$F=T$L.currDisplayData.bones,T$o=T$L.currDisplayData.weights,T$V=T$L.currDisplayData.triangles,T$C=0,T$E=0,T$r=0,T$u=0,T$T=0,T$j=0,T$D=0,T$e=0,T$b=0,T$S=0,T$H=0;if(null!=T$F){for(T$C=0;T$C<T$m;T$C+=2)T$E+=(T$u=T$F[T$E])+1,T$r+=T$u;var T$Y=T$s;for(T$T=T$O,T$j=3*T$r;T$T<T$x;T$T+=2){for(T$e=T$D=0,T$u=T$F[T$E++],T$u+=T$E;T$E<T$u;T$E++,T$j+=3){T$v=T$Y[T$F[T$E]].resultMatrix,T$b=T$o[T$j],T$S=T$o[T$j+1];var T$a=T$o[T$j+2];T$D+=(T$b*T$v.a+T$S*T$v.c+T$v.tx)*T$a,T$e+=(T$b*T$v.b+T$S*T$v.d+T$v.ty)*T$a;}T$w[T$T]=T$D,T$w[T$T+1]=T$e;}}else{var T$f,T$_;if(T$V||(T$V=T$o),T$L.deformData&&(T$V=T$L.deformData),T$f=T$L.parent,T$s)for(T$H=T$s.length,T$C=0;T$C<T$H;T$C++)if(T$s[T$C].name==T$f){T$y=T$s[T$C];break;}T$y&&(T$_=T$y.resultMatrix),T$_||(T$_=T$G._tempMt);var T$Q=T$_.tx,T$N=T$_.ty,T$i=T$_.a,T$U=T$_.b,T$c=T$_.c,T$h=T$_.d;for(T$y&&(T$h*=T$y.d),T$E=T$m,T$T=T$O;T$T<T$x;T$E+=2,T$T+=2)T$b=T$V[T$E],T$S=T$V[T$E+1],T$w[T$T]=T$b*T$i+T$S*T$U+T$Q,T$w[T$T+1]=-(T$b*T$c+T$S*T$h+T$N);}},T$L.computeWorldPositions=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v){T$L.currDisplayData.bones,T$L.currDisplayData.weights,T$L.currDisplayData.triangles;var T$y=[],T$F=0,T$o=T$L.currDisplayData.verLen,T$V=this.position,T$C=this._spaces,T$E=[],T$r=[],T$u=T$o/6,T$T=-1,T$j=NaN,T$D=0,T$e=0,T$b=NaN,T$S=NaN,T$H=NaN,T$Y=NaN;if(T$u--,T$o-=4,this.computeWorldVertices2(T$L,T$s,2,T$o,T$y,0),this._debugKey)for(T$F=0;T$F<T$y.length;)T$m.drawCircle(T$y[T$F++],T$y[T$F++],10,"#ff0000");T$E=T$y,this._curves.length=T$u;var T$a=this._curves,T$f=T$E[T$j=0],T$_=T$E[1],T$Q=0,T$N=0,T$i=0,T$U=0,T$c=0,T$h=0,T$G=NaN,T$R=NaN,T$A=NaN,T$g=NaN,T$$=NaN,T$p=NaN,T$Z=NaN,T$W=NaN,T$d=0;for(T$F=0,T$d=2;T$F<T$u;T$F++,T$d+=6)T$Q=T$E[T$d],T$N=T$E[T$d+1],T$i=T$E[T$d+2],T$U=T$E[T$d+3],T$$=2*(T$G=.1875*(T$f-2*T$Q+T$i))+(T$A=.09375*(3*(T$Q-T$i)-T$f+(T$c=T$E[T$d+4]))),T$p=2*(T$R=.1875*(T$_-2*T$N+T$U))+(T$g=.09375*(3*(T$N-T$U)-T$_+(T$h=T$E[T$d+5]))),T$Z=.75*(T$Q-T$f)+T$G+.16666667*T$A,T$W=.75*(T$N-T$_)+T$R+.16666667*T$g,T$j+=Math.sqrt(T$Z*T$Z+T$W*T$W),T$Z+=T$$,T$W+=T$p,T$$+=T$A,T$p+=T$g,T$j+=Math.sqrt(T$Z*T$Z+T$W*T$W),T$Z+=T$$,T$W+=T$p,T$j+=Math.sqrt(T$Z*T$Z+T$W*T$W),T$Z+=T$$+T$A,T$W+=T$p+T$g,T$j+=Math.sqrt(T$Z*T$Z+T$W*T$W),T$a[T$F]=T$j,T$f=T$c,T$_=T$h;if(T$O&&(T$V*=T$j),T$v)for(T$F=0;T$F<T$x;T$F++)T$C[T$F]*=T$j;var T$X=this._segments,T$I=0,T$n=0;for(T$n=T$e=T$D=T$F=0;T$F<T$x;T$F++,T$D+=3)if((T$b=T$V+=T$S=T$C[T$F])<0)this.addBeforePosition(T$b,T$E,0,T$r,T$D);else if(T$j<T$b)this.addAfterPosition(T$b-T$j,T$E,T$o-4,T$r,T$D);else{for(;;T$e++)if(!((T$Y=T$a[T$e])<T$b)){0==T$e?T$b/=T$Y:T$b=(T$b-(T$H=T$a[T$e-1]))/(T$Y-T$H);break;}if(T$e!=T$T){var T$J=6*(T$T=T$e);for(T$f=T$E[T$J],T$_=T$E[T$J+1],T$Q=T$E[T$J+2],T$N=T$E[T$J+3],T$i=T$E[T$J+4],T$U=T$E[T$J+5],T$$=2*(T$G=.03*(T$f-2*T$Q+T$i))+(T$A=.006*(3*(T$Q-T$i)-T$f+(T$c=T$E[T$J+6]))),T$p=2*(T$R=.03*(T$_-2*T$N+T$U))+(T$g=.006*(3*(T$N-T$U)-T$_+(T$h=T$E[T$J+7]))),T$Z=.3*(T$Q-T$f)+T$G+.16666667*T$A,T$W=.3*(T$N-T$_)+T$R+.16666667*T$g,T$I=Math.sqrt(T$Z*T$Z+T$W*T$W),T$X[0]=T$I,T$J=1;T$J<8;T$J++)T$Z+=T$$,T$W+=T$p,T$$+=T$A,T$p+=T$g,T$I+=Math.sqrt(T$Z*T$Z+T$W*T$W),T$X[T$J]=T$I;T$Z+=T$$,T$W+=T$p,T$I+=Math.sqrt(T$Z*T$Z+T$W*T$W),T$X[8]=T$I,T$Z+=T$$+T$A,T$W+=T$p+T$g,T$I+=Math.sqrt(T$Z*T$Z+T$W*T$W),T$X[9]=T$I,T$n=0;}for(T$b*=T$I;;T$n++)if(!((T$Y=T$X[T$n])<T$b)){0==T$n?T$b/=T$Y:T$b=T$n+(T$b-(T$H=T$X[T$n-1]))/(T$Y-T$H);break;}this.addCurvePosition(.1*T$b,T$f,T$_,T$Q,T$N,T$i,T$U,T$c,T$h,T$r,T$D,T$w||0<T$F&&0==T$S);}return T$r;},T$L.addBeforePosition=function(T$L,T$s,T$m,T$x,T$w){var T$O=T$s[T$m],T$v=T$s[T$m+1],T$y=T$s[T$m+2]-T$O,T$F=T$s[T$m+3]-T$v,T$o=Math.atan2(T$F,T$y);T$x[T$w]=T$O+T$L*Math.cos(T$o),T$x[T$w+1]=T$v+T$L*Math.sin(T$o),T$x[T$w+2]=T$o;},T$L.addAfterPosition=function(T$L,T$s,T$m,T$x,T$w){var T$O=T$s[T$m+2],T$v=T$s[T$m+3],T$y=T$O-T$s[T$m],T$F=T$v-T$s[T$m+1],T$o=Math.atan2(T$F,T$y);T$x[T$w]=T$O+T$L*Math.cos(T$o),T$x[T$w+1]=T$v+T$L*Math.sin(T$o),T$x[T$w+2]=T$o;},T$L.addCurvePosition=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o,T$V,T$C){0==T$L&&(T$L=1e-4);var T$E=T$L*T$L,T$r=T$E*T$L,T$u=1-T$L,T$T=T$u*T$u,T$j=T$T*T$u,T$D=T$u*T$L,T$e=3*T$D,T$b=T$u*T$e,T$S=T$e*T$L,T$H=T$s*T$j+T$x*T$b+T$O*T$S+T$y*T$r,T$Y=T$m*T$j+T$w*T$b+T$v*T$S+T$F*T$r;T$o[T$V]=T$H,T$o[T$V+1]=T$Y,T$o[T$V+2]=T$C?Math.atan2(T$Y-(T$m*T$T+T$w*T$D*2+T$v*T$E),T$H-(T$s*T$T+T$x*T$D*2+T$O*T$E)):0;},T$G.NONE=-1,T$G.BEFORE=-2,T$G.AFTER=-3,T$m(T$G,["_tempMt",function(){return this._tempMt=new T$cL();}]),T$G;}(),T$dL=function(){function T$L(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[];}return T$x(T$L,"laya.ani.bone.PathConstraintData"),T$L;}(),T$XL=function(){function T$L(){this.name=null,this.slotArr=[];}return T$x(T$L,"laya.ani.bone.SkinData"),T$L;}(),T$IL=function(){function T$L(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0;}T$x(T$L,"laya.ani.bone.SkinSlotDisplayData");var T$s=T$L.prototype;return T$s.createTexture=function(T$L){return this.texture||(this.texture=new T$hL(T$L.bitmap,this.uvs),T$L.bitmap.alphaTexture&&(this.texture.alphaTexture=new T$hL(T$L.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=T$L.height,this.texture.height=T$L.width,this.texture.offsetX=-T$L.offsetX,this.texture.offsetY=-T$L.offsetY,this.texture.sourceWidth=T$L.sourceHeight,this.texture.sourceHeight=T$L.sourceWidth):(this.texture.width=T$L.width,this.texture.height=T$L.height,this.texture.offsetX=-T$L.offsetX,this.texture.offsetY=-T$L.offsetY,this.texture.sourceWidth=T$L.sourceWidth,this.texture.sourceHeight=T$L.sourceHeight),T$j.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture;},T$s.destory=function(){this.texture&&this.texture.destroy();},T$L;}(),T$nL=function(){function T$L(){this.name=null,this.displayArr=[];}return T$x(T$L,"laya.ani.bone.SlotData"),T$L.prototype.getDisplayByName=function(T$L){for(var T$s=0,T$m=this.displayArr.length;T$s<T$m;T$s++)if(this.displayArr[T$s].attachmentName==T$L)return T$s;return-1;},T$L;}(),T$Y=function(){function T$L(T$L,T$s){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=T$T(2,0),this._data=T$L,null==this._bones&&(this._bones=[]),this.target=T$s[T$L.targetIndex];var T$m,T$x=0;for(T$x=0,T$m=T$L.boneIndexs.length;T$x<T$m;T$x++)this._bones.push(T$s[T$L.boneIndexs[T$x]]);this.rotateMix=T$L.rotateMix,this.translateMix=T$L.translateMix,this.scaleMix=T$L.scaleMix,this.shearMix=T$L.shearMix;}return T$x(T$L,"laya.ani.bone.TfConstraint"),T$L.prototype.apply=function(){for(var T$L,T$s=this.target.resultMatrix.a,T$m=this.target.resultMatrix.b,T$x=this.target.resultMatrix.c,T$w=this.target.resultMatrix.d,T$O=0,T$v=this._bones.length;T$O<T$v;T$O++){if(T$L=this._bones[T$O],0<this.rotateMix){var T$y=T$L.resultMatrix.a,T$F=T$L.resultMatrix.b,T$o=T$L.resultMatrix.c,T$V=T$L.resultMatrix.d,T$C=Math.atan2(T$x,T$s)-Math.atan2(T$o,T$y)+this._data.offsetRotation*Math.PI/180;T$C>Math.PI?T$C-=2*Math.PI:T$C<-Math.PI&&(T$C+=2*Math.PI),T$C*=this.rotateMix;var T$E=Math.cos(T$C),T$r=Math.sin(T$C);T$L.resultMatrix.a=T$E*T$y-T$r*T$o,T$L.resultMatrix.b=T$E*T$F-T$r*T$V,T$L.resultMatrix.c=T$r*T$y+T$E*T$o,T$L.resultMatrix.d=T$r*T$F+T$E*T$V;}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),T$L.resultMatrix.tx+=(this._temp[0]-T$L.resultMatrix.tx)*this.translateMix,T$L.resultMatrix.ty+=(this._temp[1]-T$L.resultMatrix.ty)*this.translateMix,T$L.updateChild()),0<this.scaleMix){var T$u=Math.sqrt(T$L.resultMatrix.a*T$L.resultMatrix.a+T$L.resultMatrix.c*T$L.resultMatrix.c),T$T=Math.sqrt(T$s*T$s+T$x*T$x),T$j=1e-5<T$u?(T$u+(T$T-T$u+this._data.offsetScaleX)*this.scaleMix)/T$u:0;T$L.resultMatrix.a*=T$j,T$L.resultMatrix.c*=T$j,T$u=Math.sqrt(T$L.resultMatrix.b*T$L.resultMatrix.b+T$L.resultMatrix.d*T$L.resultMatrix.d),T$T=Math.sqrt(T$m*T$m+T$w*T$w),T$j=1e-5<T$u?(T$u+(T$T-T$u+this._data.offsetScaleY)*this.scaleMix)/T$u:0,T$L.resultMatrix.b*=T$j,T$L.resultMatrix.d*=T$j;}if(0<this.shearMix){T$F=T$L.resultMatrix.b,T$V=T$L.resultMatrix.d;var T$D=Math.atan2(T$V,T$F);(T$C=Math.atan2(T$w,T$m)-Math.atan2(T$x,T$s)-(T$D-Math.atan2(T$L.resultMatrix.c,T$L.resultMatrix.a)))>Math.PI?T$C-=2*Math.PI:T$C<-Math.PI&&(T$C+=2*Math.PI),T$C=T$D+(T$C+this._data.offsetShearY*Math.PI/180)*this.shearMix,T$j=Math.sqrt(T$F*T$F+T$V*T$V),T$L.resultMatrix.b=Math.cos(T$C)*T$j,T$L.resultMatrix.d=Math.sin(T$C)*T$j;}}},T$L;}(),T$JL=function(){function T$L(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[];}return T$x(T$L,"laya.ani.bone.TfConstraintData"),T$L;}(),T$lL=function(){function T$L(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null;}T$x(T$L,"laya.ani.bone.Transform");var T$s=T$L.prototype;return T$s.initData=function(T$L){null!=T$L.x&&(this.x=T$L.x),null!=T$L.y&&(this.y=T$L.y),null!=T$L.skX&&(this.skX=T$L.skX),null!=T$L.skY&&(this.skY=T$L.skY),null!=T$L.scX&&(this.scX=T$L.scX),null!=T$L.scY&&(this.scY=T$L.scY);},T$s.getMatrix=function(){var T$L;return(T$L=this.mMatrix?this.mMatrix:this.mMatrix=new T$cL()).identity(),T$L.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(T$L,this.skewX*Math.PI/180,this.skewY*Math.PI/180),T$L.rotate(this.skX*Math.PI/180),T$L.translate(this.x,this.y),T$L;},T$s.skew=function(T$L,T$s,T$m){var T$x=Math.sin(T$m),T$w=Math.cos(T$m),T$O=Math.sin(T$s),T$v=Math.cos(T$s);return T$L.setTo(T$L.a*T$v-T$L.b*T$x,T$L.a*T$O+T$L.b*T$w,T$L.c*T$v-T$L.d*T$x,T$L.c*T$O+T$L.d*T$w,T$L.tx*T$v-T$L.ty*T$x,T$L.tx*T$O+T$L.ty*T$w),T$L;},T$L;}(),T$a=function(){function T$L(){}return T$x(T$L,"laya.ani.bone.UVTools"),T$L.getRelativeUV=function(T$L,T$s,T$m){var T$x=T$L[0],T$w=T$L[2]-T$L[0],T$O=T$L[1],T$v=T$L[5]-T$L[1];T$m||(T$m=[]),T$m.length=T$s.length;var T$y,T$F=0;T$y=T$m.length;var T$o=1/T$w,T$V=1/T$v;for(T$F=0;T$F<T$y;T$F+=2)T$m[T$F]=(T$s[T$F]-T$x)*T$o,T$m[T$F+1]=(T$s[T$F+1]-T$O)*T$V;return T$m;},T$L.getAbsoluteUV=function(T$L,T$s,T$m){if(0==T$L[0]&&0==T$L[1]&&1==T$L[4]&&1==T$L[5])return T$m?(T$D.copyArray(T$m,T$s),T$m):T$s;var T$x=T$L[0],T$w=T$L[2]-T$L[0],T$O=T$L[1],T$v=T$L[5]-T$L[1];T$m||(T$m=[]),T$m.length=T$s.length;var T$y,T$F=0;for(T$y=T$m.length,T$F=0;T$F<T$y;T$F+=2)T$m[T$F]=T$s[T$F]*T$w+T$x,T$m[T$F+1]=T$s[T$F+1]*T$v+T$O;return T$m;},T$L;}(),T$G=function(){function T$L(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null;}return T$x(T$L,"laya.ani.KeyFramesContent"),T$L;}(),T$f=function(){function T$V(){}return T$x(T$V,"laya.ani.math.BezierLerp"),T$V.getBezierRate=function(T$L,T$s,T$m,T$x,T$w){var T$O=T$V._getBezierParamKey(T$s,T$m,T$x,T$w),T$v=100*T$O+T$L;if(T$V._bezierResultCache[T$v])return T$V._bezierResultCache[T$v];var T$y,T$F=T$V._getBezierPoints(T$s,T$m,T$x,T$w,T$O),T$o=0;for(T$y=T$F.length,T$o=0;T$o<T$y;T$o+=2)if(T$L<=T$F[T$o])return T$V._bezierResultCache[T$v]=T$F[T$o+1],T$F[T$o+1];return T$V._bezierResultCache[T$v]=1;},T$V._getBezierParamKey=function(T$L,T$s,T$m,T$x){return 100*(100*(100*(100*T$L+T$s)+T$m)+T$x);},T$V._getBezierPoints=function(T$L,T$s,T$m,T$x,T$w){return T$V._bezierPointsCache[T$w]?T$V._bezierPointsCache[T$w]:(T$O=[0,0,T$L,T$s,T$m,T$x,1,1],T$v=new T$y().getBezierPoints(T$O,100,3),T$V._bezierPointsCache[T$w]=T$v);var T$O,T$v;},T$V._bezierResultCache={},T$V._bezierPointsCache={},T$V;}(),T$_=function(T$L){function T$s(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,T$s.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1;}T$x(T$s,"laya.ani.AnimationPlayer",T$w);var T$m=T$s.prototype;return T$wL.imps(T$m,{"laya.resource.IDestroy":!0}),T$m._onTempletLoadedComputeFullKeyframeIndices=function(T$L,T$s,T$m){this._templet===T$m&&this._cachePlayRate===T$L&&this._cacheFrameRate===T$s&&this._computeFullKeyframeIndices();},T$m._computeFullKeyframeIndices=function(){for(var T$L=this._fullFrames=[],T$s=this._templet,T$m=this._cacheFrameRateInterval*this._cachePlayRate,T$x=0,T$w=T$s.getAnimationCount();T$x<T$w;T$x++){for(var T$O=[],T$v=0,T$y=T$s.getAnimation(T$x).nodes.length;T$v<T$y;T$v++){for(var T$F=T$s.getAnimation(T$x).nodes[T$v],T$o=Math.floor(T$F.playTime/T$m+.01),T$V=new Uint16Array(T$o+1),T$C=-1,T$E=0,T$r=T$F.keyFrame.length;T$E<T$r;T$E++){var T$u=T$F.keyFrame[T$E],T$T=T$u.startTime,T$j=T$T+T$u.duration+T$m;do{for(var T$D=Math.floor(T$T/T$m+.5),T$e=T$C+1;T$e<T$D;T$e++)T$V[T$e]=T$E;T$V[T$C=T$D]=T$E,T$T+=T$m;}while(T$T<=T$j);}T$O.push(T$V);}T$L.push(T$O);}},T$m._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration();},T$m._calculatePlayDuration=function(){if(0!==this.state){var T$L=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=T$L),this._playEnd>T$L&&(this._playEnd=T$L),this._playDuration=this._playEnd-this._playStart;}},T$m._setPlayParams=function(T$L,T$s){this._currentTime=T$L,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/T$s+.01),0),this._currentFrameTime=this._currentKeyframeIndex*T$s;},T$m._setPlayParamsWhenStop=function(T$L,T$s){this._currentTime=T$L,this._currentKeyframeIndex=Math.max(Math.floor(T$L/T$s+.01),0),this._currentFrameTime=this._currentKeyframeIndex*T$s,this._currentAnimationClipIndex=-1;},T$m._update=function(T$L){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var T$s=this._cacheFrameRateInterval*this._cachePlayRate,T$m=0;this._startUpdateLoopCount!==T$u.loopCount&&(T$m=T$L*this.playbackRate,this._elapsedPlaybackTime+=T$m);var T$x=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=T$x)return this._setPlayParamsWhenStop(T$x,T$s),void this.event("stopped");if(T$m+=this._currentTime,0<T$x){if(T$x<=T$m)do{if(T$m-=T$x,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(T$x,T$s),this._stopWhenCircleFinish=!1,void this.event("stopped");T$m<T$x&&(this._setPlayParams(T$m,T$s),this.event("complete"));}while(T$x<=T$m);else this._setPlayParams(T$m,T$s);}else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(T$x,T$s),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete");}}},T$m._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0;},T$m.play=function(T$L,T$s,T$m,T$x,T$w){if(void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=1),void 0===T$m&&(T$m=2147483647),void 0===T$x&&(T$x=0),void 0===T$w&&(T$w=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(T$m<0||T$x<0||T$w<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==T$w&&T$w<T$x)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=T$s,this._overallDuration=T$m,this._playStart=T$x,this._playEnd=T$w,this._paused=!1,this._currentAnimationClipIndex=T$L,this._currentKeyframeIndex=0,this._startUpdateLoopCount=T$u.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0);},T$m.playByFrame=function(T$L,T$s,T$m,T$x,T$w,T$O){void 0===T$L&&(T$L=0),void 0===T$s&&(T$s=1),void 0===T$m&&(T$m=2147483647),void 0===T$x&&(T$x=0),void 0===T$w&&(T$w=0),void 0===T$O&&(T$O=30);var T$v=1e3/T$O;this.play(T$L,T$s,T$m,T$x*T$v,T$w*T$v);},T$m.stop=function(T$L){void 0===T$L&&(T$L=!0),T$L?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0;},T$O(0,T$m,"playEnd",function(){return this._playEnd;}),T$O(0,T$m,"templet",function(){return this._templet;},function(T$L){0===!this.state&&this.stop(!0),this._templet!==T$L&&((this._templet=T$L).loaded?this._computeFullKeyframeIndices():T$L.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]));}),T$O(0,T$m,"playStart",function(){return this._playStart;}),T$O(0,T$m,"playDuration",function(){return this._playDuration;}),T$O(0,T$m,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2;}),T$O(0,T$m,"currentKeyframeIndex",function(){return this._currentKeyframeIndex;}),T$O(0,T$m,"overallDuration",function(){return this._overallDuration;}),T$O(0,T$m,"currentFrameTime",function(){return this._currentFrameTime;}),T$O(0,T$m,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex;}),T$O(0,T$m,"currentPlayTime",function(){return this._currentTime+this._playStart;}),T$O(0,T$m,"cachePlayRate",function(){return this._cachePlayRate;},function(T$L){this._cachePlayRate!==T$L&&(this._cachePlayRate=T$L,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[T$L,this._cacheFrameRate])));}),T$O(0,T$m,"cacheFrameRate",function(){return this._cacheFrameRate;},function(T$L){this._cacheFrameRate!==T$L&&(this._cacheFrameRate=T$L,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,T$L])));}),T$O(0,T$m,"currentTime",null,function(T$L){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(T$L<this._playStart||T$L>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=T$u.loopCount;var T$s=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=T$L,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/T$s),0),this._currentFrameTime=this._currentKeyframeIndex*T$s;}}),T$O(0,T$m,"paused",function(){return this._paused;},function(T$L){(this._paused=T$L)&&this.event("paused");}),T$O(0,T$m,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval;}),T$O(0,T$m,"destroyed",function(){return this._destroyed;}),T$s;}(),T$R=function(T$L){function T$s(){T$s.__super.call(this),T$j.isConchNode&&(this.drawSkin=function(T$L){T$L.transform||(T$L.transform=T$cL.EMPTY),this._addCmd([T$L]),this.setSkinMesh&&this.setSkinMesh(T$L._ps,T$L.mVBData,T$L.mEleNum,0,T$L.mTexture,T$L.transform);});}return T$x(T$s,"laya.ani.GraphicsAni",T$v),T$s.prototype.drawSkin=function(T$L){var T$s=[T$L];this._saveToCmd(T$j._context._drawSkin,T$s);},T$s.create=function(){return T$s._caches.pop()||new T$s();},T$s.recycle=function(T$L){T$L.clear(),T$s._caches.push(T$L);},T$s._caches=[],T$s;}(),T$A=function(T$L){function T$e(){this._aniMap={},this.unfixedLastAniIndex=-1,T$e.__super.call(this),this._anis=new Array();}T$x(T$e,"laya.ani.AnimationTemplet",T$V);var T$s=T$e.prototype;return T$s.parse=function(T$L){var T$s=new T$UL(T$L);this._aniVersion=T$s.readUTFString(),T$b.parse(this,T$s);},T$s._calculateKeyFrame=function(T$L,T$s,T$m){var T$x=T$L.keyFrame;T$x[T$s]=T$x[0];for(var T$w=0;T$w<T$s;T$w++){var T$O=T$x[T$w];T$O.nextData=0===T$O.duration?T$O.data:T$x[T$w+1].data;}T$x.length--;},T$s.onAsynLoaded=function(T$L,T$s,T$m){var T$x=new T$UL(T$s);switch(this._aniVersion=T$x.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":T$S.parse(this,T$x);break;default:T$b.parse(this,T$x);}this._endLoaded();},T$s.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null;},T$s.getAnimationCount=function(){return this._anis.length;},T$s.getAnimation=function(T$L){return this._anis[T$L];},T$s.getAniDuration=function(T$L){return this._anis[T$L].playTime;},T$s.getNodes=function(T$L){return this._anis[T$L].nodes;},T$s.getNodeIndexWithName=function(T$L,T$s){return this._anis[T$L].bone3DMap[T$s];},T$s.getNodeCount=function(T$L){return this._anis[T$L].nodes.length;},T$s.getTotalkeyframesLength=function(T$L){return this._anis[T$L].totalKeyframeDatasLength;},T$s.getPublicExtData=function(){return this._publicExtData;},T$s.getAnimationDataWithCache=function(T$L,T$s,T$m,T$x){var T$w=T$s[T$m];if(T$w){var T$O=T$w[T$L];return T$O?T$O[T$x]:null;}return null;},T$s.setAnimationDataWithCache=function(T$L,T$s,T$m,T$x,T$w){var T$O=T$s[T$m]||(T$s[T$m]={});(T$O[T$L]||(T$O[T$L]=[]))[T$x]=T$w;},T$s.getOriginalData=function(T$L,T$s,T$m,T$x,T$w){for(var T$O=this._anis[T$L].nodes,T$v=0,T$y=0,T$F=T$O.length,T$o=0;T$y<T$F;T$y++){var T$V,T$C=T$O[T$y];T$V=T$C.keyFrame[T$m[T$y][T$x]],T$C.dataOffset=T$o;var T$E=T$w-T$V.startTime,T$r=T$C.lerpType;if(T$r)switch(T$r){case 0:case 1:for(T$v=0;T$v<T$C.keyframeWidth;)T$v+=T$C.interpolationMethod[T$v](T$C,T$v,T$s,T$o+T$v,T$V.data,T$E,null,T$V.duration,T$V.nextData);break;case 2:var T$u=T$V.interpolationData,T$T=T$u.length,T$j=0;for(T$v=0;T$v<T$T;){var T$D=T$u[T$v];switch(T$D){case 6:case 7:T$v+=T$e.interpolation[T$D](T$C,T$j,T$s,T$o+T$j,T$V.data,T$E,null,T$V.duration,T$V.nextData,T$u,T$v+1);break;default:T$v+=T$e.interpolation[T$D](T$C,T$j,T$s,T$o+T$j,T$V.data,T$E,null,T$V.duration,T$V.nextData);}T$j++;}}else for(T$v=0;T$v<T$C.keyframeWidth;)T$v+=T$C.interpolationMethod[T$v](T$C,T$v,T$s,T$o+T$v,T$V.data,T$E,null,T$V.duration,T$V.nextData);T$o+=T$C.keyframeWidth;}},T$s.getNodesCurrentFrameIndex=function(T$L,T$s){var T$m=this._anis[T$L].nodes;T$L!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(T$m.length),this.unfixedCurrentTimes=new Float32Array(T$m.length),this.unfixedLastAniIndex=T$L);for(var T$x=0,T$w=T$m.length;T$x<T$w;T$x++){var T$O=T$m[T$x];for(T$s<this.unfixedCurrentTimes[T$x]&&(this.unfixedCurrentFrameIndexes[T$x]=0),this.unfixedCurrentTimes[T$x]=T$s;this.unfixedCurrentFrameIndexes[T$x]<T$O.keyFrame.length&&!(T$O.keyFrame[this.unfixedCurrentFrameIndexes[T$x]].startTime>this.unfixedCurrentTimes[T$x]);)this.unfixedCurrentFrameIndexes[T$x]++;this.unfixedCurrentFrameIndexes[T$x]--;}return this.unfixedCurrentFrameIndexes;},T$s.getOriginalDataUnfixedRate=function(T$L,T$s,T$m){var T$x=this._anis[T$L].nodes;T$L!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(T$x.length),this.unfixedCurrentTimes=new Float32Array(T$x.length),this.unfixedKeyframes=T$T(T$x.length),this.unfixedLastAniIndex=T$L);for(var T$w=0,T$O=0,T$v=T$x.length,T$y=0;T$O<T$v;T$O++){var T$F=T$x[T$O];for(T$m<this.unfixedCurrentTimes[T$O]&&(this.unfixedCurrentFrameIndexes[T$O]=0),this.unfixedCurrentTimes[T$O]=T$m;this.unfixedCurrentFrameIndexes[T$O]<T$F.keyFrame.length&&!(T$F.keyFrame[this.unfixedCurrentFrameIndexes[T$O]].startTime>this.unfixedCurrentTimes[T$O]);)this.unfixedKeyframes[T$O]=T$F.keyFrame[this.unfixedCurrentFrameIndexes[T$O]],this.unfixedCurrentFrameIndexes[T$O]++;var T$o=this.unfixedKeyframes[T$O];T$F.dataOffset=T$y;var T$V=T$m-T$o.startTime;if(T$F.lerpType)switch(T$F.lerpType){case 0:case 1:for(T$w=0;T$w<T$F.keyframeWidth;)T$w+=T$F.interpolationMethod[T$w](T$F,T$w,T$s,T$y+T$w,T$o.data,T$V,null,T$o.duration,T$o.nextData);break;case 2:var T$C=T$o.interpolationData,T$E=T$C.length,T$r=0;for(T$w=0;T$w<T$E;){var T$u=T$C[T$w];switch(T$u){case 6:case 7:T$w+=T$e.interpolation[T$u](T$F,T$r,T$s,T$y+T$r,T$o.data,T$V,null,T$o.duration,T$o.nextData,T$C,T$w+1);break;default:T$w+=T$e.interpolation[T$u](T$F,T$r,T$s,T$y+T$r,T$o.data,T$V,null,T$o.duration,T$o.nextData);}T$r++;}}else for(T$w=0;T$w<T$F.keyframeWidth;)T$w+=T$F.interpolationMethod[T$w](T$F,T$w,T$s,T$y+T$w,T$o.data,T$V,null,T$o.duration,T$o.nextData);T$y+=T$F.keyframeWidth;}},T$e._LinearInterpolation_0=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o){var T$V=0===T$y?0:T$O/T$y;return T$m[T$x]=(1-T$V)*T$w[T$s]+T$V*T$F[T$s],1;},T$e._QuaternionInterpolation_1=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o){var T$V=0===T$y?0:T$O/T$y;return T$E.slerpQuaternionArray(T$w,T$s,T$F,T$s,T$V,T$m,T$x),4;},T$e._AngleInterpolation_2=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o){return 0;},T$e._RadiansInterpolation_3=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o){return 0;},T$e._Matrix4x4Interpolation_4=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o){for(var T$V=0;T$V<16;T$V++,T$s++)T$m[T$x+T$V]=T$w[T$s]+T$O*T$v[T$s];return 16;},T$e._NoInterpolation_5=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o){return T$m[T$x]=T$w[T$s],1;},T$e._BezierInterpolation_6=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o,T$V){return void 0===T$V&&(T$V=0),T$m[T$x]=T$w[T$s]+(T$F[T$s]-T$w[T$s])*T$f.getBezierRate(T$O/T$y,T$o[T$V],T$o[T$V+1],T$o[T$V+2],T$o[T$V+3]),5;},T$e._BezierInterpolation_7=function(T$L,T$s,T$m,T$x,T$w,T$O,T$v,T$y,T$F,T$o,T$V){return void 0===T$V&&(T$V=0),T$m[T$x]=T$o[T$V+4]+T$o[T$V+5]*T$f.getBezierRate((.001*T$O+T$o[T$V+6])/T$o[T$V+7],T$o[T$V],T$o[T$V+1],T$o[T$V+2],T$o[T$V+3]),9;},T$e.load=function(T$L){return T$wL.loader.create(T$L,null,null,T$e);},T$e.interpolation=[T$e._LinearInterpolation_0,T$e._QuaternionInterpolation_1,T$e._AngleInterpolation_2,T$e._RadiansInterpolation_3,T$e._Matrix4x4Interpolation_4,T$e._NoInterpolation_5,T$e._BezierInterpolation_6,T$e._BezierInterpolation_7],T$e;}(),T$Q=function(T$s){function T$m(T$L,T$s){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,T$m.__super.call(this),void 0===T$s&&(T$s=0),T$L&&this.init(T$L,T$s);}T$x(T$m,"laya.ani.bone.Skeleton",T$s);var T$L=T$m.prototype;return T$L.init=function(T$L,T$s){void 0===T$s&&(T$s=0);var T$m,T$x,T$w,T$O=0,T$v=0;if(1==T$s)for(this._graphicsCache=[],T$O=0,T$v=T$L.getAnimationCount();T$O<T$v;T$O++)this._graphicsCache.push([]);if(this._yReverseMatrix=T$L.yReverseMatrix,this._aniMode=T$s,this._templet=T$L,this._player=new T$_(),this._player.cacheFrameRate=T$L.rate,this._player.templet=T$L,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=T$L.mBoneArr,this._rootBone=T$L.mRootBone,this._aniSectionDic=T$L.aniSectionDic,0<T$L.ikArr.length)for(this._ikArr=[],T$O=0,T$v=T$L.ikArr.length;T$O<T$v;T$O++)this._ikArr.push(new T$e(T$L.ikArr[T$O],this._boneList));if(0<T$L.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),T$O=0,T$v=T$L.pathArr.length;T$O<T$v;T$O++)T$m=T$L.pathArr[T$O],T$x=new T$H(T$m,this._boneList),(T$w=this._boneSlotDic[T$m.name])&&((T$x=new T$H(T$m,this._boneList)).target=T$w),this._pathDic[T$m.name]=T$x;if(0<T$L.tfArr.length)for(this._tfArr=[],T$O=0,T$v=T$L.tfArr.length;T$O<T$v;T$O++)this._tfArr.push(new T$Y(T$L.tfArr[T$O],this._boneList));if(0<T$L.skinDataArray.length){var T$y=this._templet.skinDataArray[this._skinIndex];this._skinName=T$y.name;}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause);},T$L.load=function(T$L,T$s,T$m){},T$L._onLoaded=function(){},T$L._parseComplete=function(){var T$L=T$N.TEMPLET_DICTIONARY[this._aniPath];T$L&&(this.init(T$L,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this);},T$L._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败");},T$L._onPlay=function(){this.event("played");},T$L._onStop=function(){var T$L,T$s=this._templet.eventAniArr[this._aniClipIndex];if(T$s&&this._eventIndex<T$s.length)for(;this._eventIndex<T$s.length;this._eventIndex++)(T$L=T$s[this._eventIndex]).time>=this._player.playStart&&T$L.time<=this._player.playEnd&&this.event("label",T$L);this._eventIndex=0,this._drawOrder=null,this.event("stopped");},T$L._onPause=function(){this.event("paused");},T$L._parseSrcBoneMatrix=function(){var T$L=0,T$s=0;for(T$s=this._templet.srcBoneMatrixArr.length,T$L=0;T$L<T$s;T$L++)this._boneMatrixArray.push(new T$cL());if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var T$m,T$x,T$w=this._templet.boneSlotArray;for(T$L=0,T$s=T$w.length;T$L<T$s;T$L++)T$m=T$w[T$L],null==(T$x=this._bindBoneBoneSlotDic[T$m.parent])&&(this._bindBoneBoneSlotDic[T$m.parent]=T$x=[]),this._boneSlotDic[T$m.name]=T$m=T$m.copy(),T$x.push(T$m),this._boneSlotArray.push(T$m);}},T$L._emitMissedEvents=function(T$L,T$s,T$m){void 0===T$m&&(T$m=0);var T$x=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(T$x){var T$w,T$O,T$v=0;for(T$w=T$x.length,T$v=T$m;T$v<T$w;T$v++)(T$O=T$x[T$v]).time>=this._player.playStart&&T$O.time<=this._player.playEnd&&this.event("label",T$O);}},T$L._update=function(T$L){if(void 0===T$L&&(T$L=!0),!(this._pause||T$L&&this._indexControl)){var T$s=this.timer.currTimer,T$m=this._player.currentKeyframeIndex,T$x=T$s-this._lastTime;if(T$L?this._player._update(T$x):T$m=-1,this._lastTime=T$s,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<T$x&&this._clipIndex==T$m&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var T$w;this._lastUpdateAniClipIndex=this._aniClipIndex,T$m>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var T$O,T$v=this._templet.eventAniArr[this._aniClipIndex];if(T$v&&this._eventIndex<T$v.length&&((T$w=T$v[this._eventIndex]).time>=this._player.playStart&&T$w.time<=this._player.playEnd?this._player.currentPlayTime>=T$w.time&&(this.event("label",T$w),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(T$O=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=T$O&&(this.graphics=T$O));var T$y=0,T$F=0;for(T$F=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,T$F-1)&&0<T$F;)T$F--;if(T$F<this._clipIndex)for(T$y=T$F;T$y<this._clipIndex;T$y++)this._createGraphics(T$y);}else if(1==this._aniMode){if(T$O=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=T$O&&(this.graphics=T$O));for(T$F=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,T$F-1)&&0<T$F;)T$F--;if(T$F<this._clipIndex)for(T$y=T$F;T$y<this._clipIndex;T$y++)this._createGraphics(T$y);}this._createGraphics();}}},T$L._createGraphics=function(T$L){void 0===T$L&&(T$L=-1),-1==T$L&&(T$L=this._clipIndex);var T$s,T$m,T$x=T$L*this._player.cacheFrameRateInterval,T$w=this._templet.drawOrderAniArr[this._aniClipIndex];if(T$w&&0<T$w.length)for(this._drawOrderIndex=0,T$s=T$w[this._drawOrderIndex];T$x>=T$s.time&&(this._drawOrder=T$s.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=T$w.length));)T$s=T$w[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=T$R.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=T$R.create(),T$m=this.graphics;var T$O=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],T$L,T$x);var T$v,T$y,T$F,T$o,T$V=this._aniSectionDic[this._aniClipIndex],T$C=0,T$E=0,T$r=0,T$u=0,T$T=0,T$j=this._templet.srcBoneMatrixArr.length;for(T$T=T$V[T$E=0];T$E<T$j;T$E++)T$o=this._boneList[T$E],T$F=this._templet.srcBoneMatrixArr[T$E],T$o.resultTransform.scX=T$F.scX*this._curOriginalData[T$C++],T$o.resultTransform.skX=T$F.skX+this._curOriginalData[T$C++],T$o.resultTransform.skY=T$F.skY+this._curOriginalData[T$C++],T$o.resultTransform.scY=T$F.scY*this._curOriginalData[T$C++],T$o.resultTransform.x=T$F.x+this._curOriginalData[T$C++],T$o.resultTransform.y=T$F.y+this._curOriginalData[T$C++],8===this._templet.tMatrixDataLen&&(T$o.resultTransform.skewX=T$F.skewX+this._curOriginalData[T$C++],T$o.resultTransform.skewY=T$F.skewY+this._curOriginalData[T$C++]);var T$D,T$e={},T$b={};for(T$T+=T$V[1];T$E<T$T;T$E++)T$e[(T$D=T$O[T$E]).name]=this._curOriginalData[T$C++],T$b[T$D.name]=this._curOriginalData[T$C++],this._curOriginalData[T$C++],this._curOriginalData[T$C++],this._curOriginalData[T$C++],this._curOriginalData[T$C++];var T$S,T$H,T$Y={},T$a={};for(T$T+=T$V[2];T$E<T$T;T$E++)T$Y[(T$D=T$O[T$E]).name]=this._curOriginalData[T$C++],T$a[T$D.name]=this._curOriginalData[T$C++],this._curOriginalData[T$C++],this._curOriginalData[T$C++],this._curOriginalData[T$C++],this._curOriginalData[T$C++];if(this._pathDic)for(T$T+=T$V[3];T$E<T$T;T$E++){if(T$D=T$O[T$E],T$S=this._pathDic[T$D.name])switch(new T$UL(T$D.extenData).getByte()){case 1:T$S.position=this._curOriginalData[T$C++];break;case 2:T$S.spacing=this._curOriginalData[T$C++];break;case 3:T$S.rotateMix=this._curOriginalData[T$C++],T$S.translateMix=this._curOriginalData[T$C++];}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(T$cL.TEMP.identity()),this._ikArr)for(T$E=0,T$T=this._ikArr.length;T$E<T$T;T$E++)T$H=this._ikArr[T$E],T$Y.hasOwnProperty(T$H.name)&&(T$H.bendDirection=T$Y[T$H.name]),T$a.hasOwnProperty(T$H.name)&&(T$H.mix=T$a[T$H.name]),T$H.apply();if(this._pathDic)for(var T$f in this._pathDic)(T$S=this._pathDic[T$f]).apply(this._boneList,T$m);if(this._tfArr)for(T$E=0,T$u=this._tfArr.length;T$E<T$u;T$E++)this._tfArr[T$E].apply();for(T$E=0,T$u=this._boneList.length;T$E<T$u;T$E++)if(T$o=this._boneList[T$E],T$y=this._bindBoneBoneSlotDic[T$o.name],T$o.resultMatrix.copyTo(this._boneMatrixArray[T$E]),T$y)for(T$r=0,T$T=T$y.length;T$r<T$T;T$r++)(T$v=T$y[T$r])&&T$v.setParentMatrix(T$o.resultMatrix);var T$_,T$Q,T$N,T$i,T$U={},T$c=this._templet.deformAniArr;if(T$c&&0<T$c.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,T$E=0,T$T=this._boneSlotArray.length;T$E<T$T;T$E++)(T$v=this._boneSlotArray[T$E]).deformData=null;var T$h,T$G=T$c[this._aniClipIndex];for(T$h in T$_=T$G.default,this._setDeform(T$_,T$U,this._boneSlotArray,T$x),T$G)"default"!=T$h&&T$h!=this._skinName&&(T$_=T$G[T$h],this._setDeform(T$_,T$U,this._boneSlotArray,T$x));T$_=T$G[this._skinName],this._setDeform(T$_,T$U,this._boneSlotArray,T$x);}if(this._drawOrder)for(T$E=0,T$T=this._drawOrder.length;T$E<T$T;T$E++)T$Q=T$e[(T$v=this._boneSlotArray[this._drawOrder[T$E]]).name],T$N=T$b[T$v.name],isNaN(T$N)||(T$m.save(),T$m.alpha(T$N)),isNaN(T$Q)||-2==T$Q||(this._templet.attachmentNames?T$v.showDisplayByName(this._templet.attachmentNames[T$Q]):T$v.showDisplayByIndex(T$Q)),T$U[this._drawOrder[T$E]]?(T$i=T$U[this._drawOrder[T$E]],T$v.currDisplayData&&T$i[T$v.currDisplayData.attachmentName]?T$v.deformData=T$i[T$v.currDisplayData.attachmentName]:T$v.deformData=null):T$v.deformData=null,isNaN(T$N)?T$v.draw(T$m,this._boneMatrixArray,2==this._aniMode):T$v.draw(T$m,this._boneMatrixArray,2==this._aniMode,T$N),isNaN(T$N)||T$m.restore();else for(T$E=0,T$T=this._boneSlotArray.length;T$E<T$T;T$E++)T$Q=T$e[(T$v=this._boneSlotArray[T$E]).name],T$N=T$b[T$v.name],isNaN(T$N)||(T$m.save(),T$m.alpha(T$N)),isNaN(T$Q)||-2==T$Q||(this._templet.attachmentNames?T$v.showDisplayByName(this._templet.attachmentNames[T$Q]):T$v.showDisplayByIndex(T$Q)),T$U[T$E]?(T$i=T$U[T$E],T$v.currDisplayData&&T$i[T$v.currDisplayData.attachmentName]?T$v.deformData=T$i[T$v.currDisplayData.attachmentName]:T$v.deformData=null):T$v.deformData=null,isNaN(T$N)?T$v.draw(T$m,this._boneMatrixArray,2==this._aniMode):T$v.draw(T$m,this._boneMatrixArray,2==this._aniMode,T$N),isNaN(T$N)||T$m.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,T$L,T$m):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,T$L,T$m);},T$L._setDeform=function(T$L,T$s,T$m,T$x){if(T$L){var T$w,T$O,T$v,T$y=0,T$F=0,T$o=0;if(T$L)for(T$y=0,T$F=T$L.deformSlotDataList.length;T$y<T$F;T$y++)for(T$w=T$L.deformSlotDataList[T$y],T$o=0;T$o<T$w.deformSlotDisplayList.length;T$o++)T$v=T$m[(T$O=T$w.deformSlotDisplayList[T$o]).slotIndex],T$O.apply(T$x,T$v),T$s[T$O.slotIndex]||(T$s[T$O.slotIndex]={}),T$s[T$O.slotIndex][T$O.attachment]=T$O.deformData;}},T$L.getAnimNum=function(){return this._templet.getAnimationCount();},T$L.getAniNameByIndex=function(T$L){return this._templet.getAniNameByIndex(T$L);},T$L.getSlotByName=function(T$L){return this._boneSlotDic[T$L];},T$L.showSkinByName=function(T$L,T$s){void 0===T$s&&(T$s=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(T$L),T$s);},T$L.showSkinByIndex=function(T$L,T$s){void 0===T$s&&(T$s=!0);for(var T$m=0;T$m<this._boneSlotArray.length;T$m++)this._boneSlotArray[T$m].showSlotData(null,T$s);if(this._templet.showSkinByIndex(this._boneSlotDic,T$L,T$s)){var T$x=this._templet.skinDataArray[T$L];this._skinIndex=T$L,this._skinName=T$x.name;}this._clearCache();},T$L.showSlotSkinByIndex=function(T$L,T$s){if(0!=this._aniMode){var T$m=this.getSlotByName(T$L);T$m&&T$m.showDisplayByIndex(T$s),this._clearCache();}},T$L.showSlotSkinByName=function(T$L,T$s){if(0!=this._aniMode){var T$m=this.getSlotByName(T$L);T$m&&T$m.showDisplayByName(T$s),this._clearCache();}},T$L.replaceSlotSkinName=function(T$L,T$s,T$m){if(0!=this._aniMode){var T$x=this.getSlotByName(T$L);T$x&&T$x.replaceDisplayByName(T$s,T$m),this._clearCache();}},T$L.replaceSlotSkinByIndex=function(T$L,T$s,T$m){if(0!=this._aniMode){var T$x=this.getSlotByName(T$L);T$x&&T$x.replaceDisplayByIndex(T$s,T$m),this._clearCache();}},T$L.setSlotSkin=function(T$L,T$s){if(0!=this._aniMode){var T$m=this.getSlotByName(T$L);T$m&&T$m.replaceSkin(T$s),this._clearCache();}},T$L._clearCache=function(){if(1==this._aniMode)for(var T$L=0,T$s=this._graphicsCache.length;T$L<T$s;T$L++){for(var T$m=0,T$x=this._graphicsCache[T$L].length;T$m<T$x;T$m++){var T$w=this._graphicsCache[T$L][T$m];T$w!=this.graphics&&T$R.recycle(T$w);}this._graphicsCache[T$L].length=0;}},T$L.play=function(T$L,T$s,T$m,T$x,T$w,T$O){void 0===T$m&&(T$m=!0),void 0===T$x&&(T$x=0),void 0===T$w&&(T$w=0),void 0===T$O&&(T$O=!0),this._indexControl=!1;var T$v=-1,T$y=NaN;if(T$y=T$s?2147483647:0,"string"==typeof T$L)for(var T$F=0,T$o=this._templet.getAnimationCount();T$F<T$o;T$F++){var T$V=this._templet.getAnimation(T$F);if(T$V&&T$L==T$V.name){T$v=T$F;break;}}else T$v=T$L;-1<T$v&&T$v<this.getAnimNum()&&(this._aniClipIndex=T$v,(T$m||this._pause||this._currAniIndex!=T$v)&&(this._currAniIndex=T$v,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(T$v)),this._drawOrder=null,this._eventIndex=0,this._player.play(T$v,this._player.playbackRate,T$y,T$x,T$w),T$O&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=T$C.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()));},T$L.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update));},T$L.playbackRate=function(T$L){this._player&&(this._player.playbackRate=T$L);},T$L.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update));},T$L.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=T$C.now(),this.timer.frameLoop(1,this,this._update,null,!0));},T$L._getGrahicsDataWithCache=function(T$L,T$s){return this._graphicsCache[T$L][T$s];},T$L._setGrahicsDataWithCache=function(T$L,T$s,T$m){this._graphicsCache[T$L][T$s]=T$m;},T$L.destroy=function(T$L){void 0===T$L&&(T$L=!0),T$s.prototype.destroy.call(this,T$L),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update);},T$O(0,T$L,"url",function(){return this._aniPath;},function(T$L){this.load(T$L);}),T$O(0,T$L,"index",function(){return this._index;},function(T$L){this.player&&(this._index=T$L,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1));}),T$O(0,T$L,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total;}),T$O(0,T$L,"templet",function(){return this._templet;}),T$O(0,T$L,"player",function(){return this._player;}),T$m.useSimpleMeshInCanvas=!1,T$m;}(T$OL),T$N=function(T$s){function T$w(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,T$w.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[];}T$x(T$w,"laya.ani.bone.Templet",T$s);var T$L=T$w.prototype;return T$L.getLoadList=function(){return this._loadList;},T$L.loadAni=function(T$L){this._skBufferUrl=T$L,T$wL.loader.load(T$L,T$F.create(this,this.onComplete),null,"arraybuffer");},T$L.onComplete=function(T$L){if(this._isDestroyed)this.destroy();else{var T$s=T$o.getRes(this._skBufferUrl);T$s?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,T$s)):this.event("error","load failed:"+this._skBufferUrl);}},T$L.parseData=function(T$L,T$s,T$m){void 0===T$m&&(T$m=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=T$L,this._mainTexture&&T$j.isWebGL&&T$L.bitmap&&(T$L.bitmap.enableMerageInAtlas=!1),this._rate=T$m,this.parse(T$s);},T$L.buildArmature=function(T$L){return void 0===T$L&&(T$L=0),new T$Q(this,T$L);},T$L.parse=function(T$L){T$s.prototype.parse.call(this,T$L),this._endLoaded(),this._aniVersion!=T$w.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+T$w.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0);},T$L._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var T$L=0;this._loadList=[];var T$s,T$m=new T$UL(this.getPublicExtData()),T$x=0,T$w=0,T$O=0,T$v=T$m.getInt32(),T$y=T$m.readUTFString(),T$F=T$y.split("\n");for(T$L=0;T$L<T$v;T$L++)T$s=this._path+T$F[2*T$L],T$y=T$F[2*T$L+1],T$m.getFloat32(),T$m.getFloat32(),T$x=T$m.getFloat32(),T$w=T$m.getFloat32(),T$O=T$m.getFloat32(),isNaN(T$O)?0:T$O,T$O=T$m.getFloat32(),isNaN(T$O)?0:T$O,T$O=T$m.getFloat32(),isNaN(T$O)?T$x:T$O,T$O=T$m.getFloat32(),isNaN(T$O)?T$w:T$O,-1==this._loadList.indexOf(T$s)&&this._loadList.push(T$s);this.event("inited",this);}},T$L._textureComplete=function(){for(var T$L,T$s,T$m=0,T$x=this._loadList.length;T$m<T$x;T$m++)T$s=this._loadList[T$m],T$L=this._textureDic[T$s]=T$o.getRes(T$s),T$j.isWebGL&&T$L&&T$L.bitmap&&(T$L.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData();},T$L._parsePublicExtData=function(){var T$L=0,T$s=0,T$m=0,T$x=0,T$w=0;for(T$L=0,T$w=this.getAnimationCount();T$L<T$w;T$L++)this._graphicsCache.push([]);var T$O;T$O="Dragon"!=this._aniClassName;var T$v,T$y,T$F=new T$UL(this.getPublicExtData()),T$o=0,T$V=0,T$C=0,T$E=0,T$r=0,T$u=0,T$T=0,T$j=0,T$D=0,T$e=T$F.getInt32(),T$b=T$F.readUTFString(),T$S=T$b.split("\n");for(T$L=0;T$L<T$e;T$L++){if(T$v=this._mainTexture,T$y=this._path+T$S[2*T$L],T$b=T$S[2*T$L+1],null==this._mainTexture&&(T$v=this._textureDic[T$y]),!T$v)return this.event("error",this),void(this.isParseFail=!0);T$o=T$F.getFloat32(),T$V=T$F.getFloat32(),T$C=T$F.getFloat32(),T$E=T$F.getFloat32(),T$D=T$F.getFloat32(),T$r=isNaN(T$D)?0:T$D,T$D=T$F.getFloat32(),T$u=isNaN(T$D)?0:T$D,T$D=T$F.getFloat32(),T$T=isNaN(T$D)?T$C:T$D,T$D=T$F.getFloat32(),T$j=isNaN(T$D)?T$E:T$D,this.subTextureDic[T$b]=T$hL.create(T$v,T$o,T$V,T$C,T$E,-T$r,-T$u,T$T,T$j),T$v.alphaTexture&&(this.subTextureDic[T$b].alphaTexture=T$hL.create(T$v.alphaTexture,T$o,T$V,T$C,T$E,-T$r,-T$u,T$T,T$j));}this._mainTexture=T$v;var T$H,T$Y,T$a,T$f,T$_,T$Q=T$F.getUint16();for(T$L=0;T$L<T$Q;T$L++)(T$H=[]).push(T$F.getUint16()),T$H.push(T$F.getUint16()),T$H.push(T$F.getUint16()),T$H.push(T$F.getUint16()),this.aniSectionDic[T$L]=T$H;var T$N,T$i=T$F.getInt16(),T$U={};for(T$L=0;T$L<T$i;T$L++)T$Y=new T$GL(),0==T$L?T$N=T$Y:T$Y.root=T$N,T$Y.d=T$O?-1:1,T$f=T$F.readUTFString(),T$_=T$F.readUTFString(),T$Y.length=T$F.getFloat32(),1==T$F.getByte()&&(T$Y.inheritRotation=!1),1==T$F.getByte()&&(T$Y.inheritScale=!1),T$Y.name=T$f,T$_&&((T$a=T$U[T$_])?T$a.addChild(T$Y):this.mRootBone=T$Y),T$U[T$f]=T$Y,this.mBoneArr.push(T$Y);this.tMatrixDataLen=T$F.getUint16();var T$c,T$h,T$G=T$F.getUint16(),T$R=Math.floor(T$G/this.tMatrixDataLen),T$A=this.srcBoneMatrixArr;for(T$L=0;T$L<T$R;T$L++)(T$c=new T$lL()).scX=T$F.getFloat32(),T$c.skX=T$F.getFloat32(),T$c.skY=T$F.getFloat32(),T$c.scY=T$F.getFloat32(),T$c.x=T$F.getFloat32(),T$c.y=T$F.getFloat32(),8===this.tMatrixDataLen&&(T$c.skewX=T$F.getFloat32(),T$c.skewY=T$F.getFloat32()),T$A.push(T$c),(T$Y=this.mBoneArr[T$L]).transform=T$c;var T$g,T$$=T$F.getUint16(),T$p=0;for(T$L=0;T$L<T$$;T$L++){for(T$h=new T$WL(),T$p=T$F.getUint16(),T$s=0;T$s<T$p;T$s++)T$h.boneNames.push(T$F.readUTFString()),T$h.boneIndexs.push(T$F.getInt16());T$h.name=T$F.readUTFString(),T$h.targetBoneName=T$F.readUTFString(),T$h.targetBoneIndex=T$F.getInt16(),T$h.bendDirection=T$F.getFloat32(),T$h.mix=T$F.getFloat32(),T$h.isSpine=T$O,this.ikArr.push(T$h);}var T$Z,T$W=T$F.getUint16(),T$d=0;for(T$L=0;T$L<T$W;T$L++){for(T$g=new T$JL(),T$d=T$F.getUint16(),T$s=0;T$s<T$d;T$s++)T$g.boneIndexs.push(T$F.getInt16());T$g.name=T$F.getUTFString(),T$g.targetIndex=T$F.getInt16(),T$g.rotateMix=T$F.getFloat32(),T$g.translateMix=T$F.getFloat32(),T$g.scaleMix=T$F.getFloat32(),T$g.shearMix=T$F.getFloat32(),T$g.offsetRotation=T$F.getFloat32(),T$g.offsetX=T$F.getFloat32(),T$g.offsetY=T$F.getFloat32(),T$g.offsetScaleX=T$F.getFloat32(),T$g.offsetScaleY=T$F.getFloat32(),T$g.offsetShearY=T$F.getFloat32(),this.tfArr.push(T$g);}var T$X=T$F.getUint16(),T$I=0;for(T$L=0;T$L<T$X;T$L++){for((T$Z=new T$dL()).name=T$F.readUTFString(),T$I=T$F.getUint16(),T$s=0;T$s<T$I;T$s++)T$Z.bones.push(T$F.getInt16());T$Z.target=T$F.readUTFString(),T$Z.positionMode=T$F.readUTFString(),T$Z.spacingMode=T$F.readUTFString(),T$Z.rotateMode=T$F.readUTFString(),T$Z.offsetRotation=T$F.getFloat32(),T$Z.position=T$F.getFloat32(),T$Z.spacing=T$F.getFloat32(),T$Z.rotateMix=T$F.getFloat32(),T$Z.translateMix=T$F.getFloat32(),this.pathArr.push(T$Z);}var T$n,T$J,T$l,T$q,T$K,T$P=0,T$k=0,T$B=0,T$M=NaN,T$z=0,T$t=T$F.getInt16();for(T$L=0;T$L<T$t;T$L++){var T$LL=T$F.getUint8(),T$sL={};this.deformAniArr.push(T$sL);for(var T$mL=0;T$mL<T$LL;T$mL++)for((T$n=new T$AL()).skinName=T$F.getUTFString(),T$sL[T$n.skinName]=T$n,T$P=T$F.getInt16(),T$s=0;T$s<T$P;T$s++)for(T$J=new T$gL(),T$n.deformSlotDataList.push(T$J),T$k=T$F.getInt16(),T$m=0;T$m<T$k;T$m++)for(T$l=new T$$L(),T$J.deformSlotDisplayList.push(T$l),T$l.slotIndex=T$F.getInt16(),T$l.attachment=T$F.getUTFString(),T$B=T$F.getInt16(),T$x=0;T$x<T$B;T$x++)for(1==T$F.getByte()?T$l.tweenKeyList.push(!0):T$l.tweenKeyList.push(!1),T$M=T$F.getFloat32(),T$l.timeList.push(T$M),T$q=[],T$l.vectices.push(T$q),T$z=T$F.getInt16(),T$w=0;T$w<T$z;T$w++)T$q.push(T$F.getFloat32());}var T$xL,T$wL,T$OL=T$F.getInt16(),T$vL=0,T$yL=0;for(T$L=0;T$L<T$OL;T$L++){for(T$vL=T$F.getInt16(),T$K=[],T$s=0;T$s<T$vL;T$s++){for((T$xL=new T$pL()).time=T$F.getFloat32(),T$yL=T$F.getInt16(),T$m=0;T$m<T$yL;T$m++)T$xL.drawOrder.push(T$F.getInt16());T$K.push(T$xL);}this.drawOrderAniArr.push(T$K);}var T$FL,T$oL=T$F.getInt16(),T$VL=0;for(T$L=0;T$L<T$oL;T$L++){for(T$VL=T$F.getInt16(),T$wL=[],T$s=0;T$s<T$VL;T$s++)(T$FL=new T$ZL()).name=T$F.getUTFString(),T$FL.intValue=T$F.getInt32(),T$FL.floatValue=T$F.getFloat32(),T$FL.stringValue=T$F.getUTFString(),T$FL.time=T$F.getFloat32(),T$wL.push(T$FL);this.eventAniArr.push(T$wL);}var T$CL=T$F.getInt16();if(0<T$CL)for(this.attachmentNames=[],T$L=0;T$L<T$CL;T$L++)this.attachmentNames.push(T$F.getUTFString());var T$EL,T$rL,T$uL=T$F.getInt16();for(T$L=0;T$L<T$uL;T$L++)(T$EL=new T$RL()).name=T$F.readUTFString(),T$EL.parent=T$F.readUTFString(),T$EL.attachmentName=T$F.readUTFString(),T$EL.srcDisplayIndex=T$EL.displayIndex=T$F.getInt16(),(T$EL.templet=this).boneSlotDic[T$EL.name]=T$EL,null==(T$rL=this.bindBoneBoneSlotDic[T$EL.parent])&&(this.bindBoneBoneSlotDic[T$EL.parent]=T$rL=[]),T$rL.push(T$EL),this.boneSlotArray.push(T$EL);var T$TL,T$jL,T$DL,T$eL=T$F.readUTFString().split("\n"),T$bL=0,T$SL=T$F.getUint8(),T$HL=0,T$YL=0,T$aL=0,T$fL=0,T$_L=0,T$QL=0,T$NL=0;for(T$L=0;T$L<T$SL;T$L++){for((T$TL=new T$XL()).name=T$eL[T$bL++],T$HL=T$F.getUint8(),T$s=0;T$s<T$HL;T$s++){for((T$jL=new T$nL()).name=T$eL[T$bL++],T$EL=this.boneSlotDic[T$jL.name],T$YL=T$F.getUint8(),T$m=0;T$m<T$YL;T$m++){if(T$DL=new T$IL(),this.skinSlotDisplayDataArr.push(T$DL),T$DL.name=T$eL[T$bL++],T$DL.attachmentName=T$eL[T$bL++],T$DL.transform=new T$lL(),T$DL.transform.scX=T$F.getFloat32(),T$DL.transform.skX=T$F.getFloat32(),T$DL.transform.skY=T$F.getFloat32(),T$DL.transform.scY=T$F.getFloat32(),T$DL.transform.x=T$F.getFloat32(),T$DL.transform.y=T$F.getFloat32(),T$jL.displayArr.push(T$DL),T$DL.width=T$F.getFloat32(),T$DL.height=T$F.getFloat32(),T$DL.type=T$F.getUint8(),T$DL.verLen=T$F.getUint16(),0<(T$i=T$F.getUint16()))for(T$DL.bones=[],T$x=0;T$x<T$i;T$x++){var T$iL=T$F.getUint16();T$DL.bones.push(T$iL);}if(0<(T$aL=T$F.getUint16()))for(T$DL.uvs=[],T$x=0;T$x<T$aL;T$x++)T$DL.uvs.push(T$F.getFloat32());if(0<(T$fL=T$F.getUint16()))for(T$DL.weights=[],T$x=0;T$x<T$fL;T$x++)T$DL.weights.push(T$F.getFloat32());if(0<(T$_L=T$F.getUint16()))for(T$DL.triangles=[],T$x=0;T$x<T$_L;T$x++)T$DL.triangles.push(T$F.getUint16());if(0<(T$QL=T$F.getUint16()))for(T$DL.vertices=[],T$x=0;T$x<T$QL;T$x++)T$DL.vertices.push(T$F.getFloat32());if(0<(T$NL=T$F.getUint16()))for(T$DL.lengths=[],T$x=0;T$x<T$NL;T$x++)T$DL.lengths.push(T$F.getFloat32());}T$TL.slotArr.push(T$jL);}this.skinDic[T$TL.name]=T$TL,this.skinDataArray.push(T$TL);}1==T$F.getUint8()?(this.yReverseMatrix=new T$cL(1,0,0,-1,0,0),T$N&&T$N.setTempMatrix(this.yReverseMatrix)):T$N&&T$N.setTempMatrix(new T$cL()),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this);},T$L.getTexture=function(T$L){var T$s=this.subTextureDic[T$L];return T$s||(T$s=this.subTextureDic[T$L.substr(0,T$L.length-1)]),null==T$s?this._mainTexture:T$s;},T$L.showSkinByIndex=function(T$L,T$s,T$m){if(void 0===T$m&&(T$m=!0),T$s<0&&T$s>=this.skinDataArray.length)return!1;var T$x,T$w,T$O=0,T$v=0,T$y=this.skinDataArray[T$s];if(T$y){for(T$O=0,T$v=T$y.slotArr.length;T$O<T$v;T$O++)(T$w=T$y.slotArr[T$O])&&(T$x=T$L[T$w.name])&&(T$x.showSlotData(T$w,T$m),T$m&&"undefined"!=T$x.attachmentName&&"null"!=T$x.attachmentName?T$x.showDisplayByName(T$x.attachmentName):T$x.showDisplayByIndex(T$x.displayIndex));return!0;}return!1;},T$L.getSkinIndexByName=function(T$L){for(var T$s=0,T$m=this.skinDataArray.length;T$s<T$m;T$s++)if(this.skinDataArray[T$s].name==T$L)return T$s;return-1;},T$L.getGrahicsDataWithCache=function(T$L,T$s){return this._graphicsCache[T$L][T$s];},T$L.setGrahicsDataWithCache=function(T$L,T$s,T$m){this._graphicsCache[T$L][T$s]=T$m;},T$L.destroy=function(){var T$L;for(var T$s in this._isDestroyed=!0,this.subTextureDic)(T$L=this.subTextureDic[T$s])&&T$L.destroy();for(T$s in this._textureDic)(T$L=this._textureDic[T$s])&&T$L.destroy();for(var T$m=0,T$x=this.skinSlotDisplayDataArr.length;T$m<T$x;T$m++)this.skinSlotDisplayDataArr[T$m].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete T$w.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this);},T$L.getAniNameByIndex=function(T$L){var T$s=this.getAnimation(T$L);return T$s?T$s.name:null;},T$O(0,T$L,"rate",function(){return this._rate;},function(T$L){this._rate=T$L;}),T$w.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",T$w.TEMPLET_DICTIONARY=null,T$w;}(T$A);}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$L,T$s){"use strict";for(var T$m in Object.defineProperty(T$s,"__esModule",{value:!0}),Laya){var T$x=Laya[T$m];T$x&&T$x.__isclass&&(T$s[T$m]=T$x);}});