var Laya=window.Laya=function(T$q,T$n){var T$J={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(T$n,T$C){return 1==arguments.length?T$J.__presubstr.call(this,T$n):T$J.__presubstr.call(this,T$n,0<T$C?T$C:this.length+T$C);},__init:function(T$n){T$n.forEach(function(T$n){T$n.__init$&&T$n.__init$();});},__isClass:function(T$n){return T$n&&(T$n.__isclass||T$n==Object||T$n==String||T$n==Array);},__newvec:function(T$n,T$C){var T$_=[];T$_.length=T$n;for(var T$E=0;T$E<T$n;T$E++)T$_[T$E]=T$C;return T$_;},__extend:function(T$n,T$C){for(var T$_ in T$C)if(T$C.hasOwnProperty(T$_)){var T$E=Object.getOwnPropertyDescriptor(T$C,T$_),T$y=T$E.get,T$p=T$E.set;T$y||T$p?T$y&&T$p?Object.defineProperty(T$n,T$_,T$E):(T$y&&Object.defineProperty(T$n,T$_,T$y),T$p&&Object.defineProperty(T$n,T$_,T$p)):T$n[T$_]=T$C[T$_];}function T$c(){T$J.un(this,"constructor",T$n);}T$c.prototype=T$C.prototype,T$n.prototype=new T$c(),T$J.un(T$n.prototype,"__imps",T$J.__copy({},T$C.prototype.__imps));},__copy:function(T$n,T$C){if(!T$C)return null;for(var T$_ in T$n=T$n||{},T$C)T$n[T$_]=T$C[T$_];return T$n;},__package:function(T$n,T$C){if(!T$J.__packages[T$n]){T$J.__packages[T$n]=!0;var T$_=T$q,T$E=T$n.split(".");if(1<T$E.length)for(var T$y=0,T$p=T$E.length-1;T$y<T$p;T$y++){var T$c=T$_[T$E[T$y]];T$_=T$c||(T$_[T$E[T$y]]={});}T$_[T$E[T$E.length-1]]||(T$_[T$E[T$E.length-1]]=T$C||{});}},__hasOwnProperty:function(T$n,T$C){return T$C=T$C||this,Object.hasOwnProperty.call(T$C,T$n)||function T$n(T$C,T$_){if(Object.hasOwnProperty.call(T$_.prototype,T$C))return!0;var T$E=T$_.prototype.__super;return null==T$E?null:T$n(T$C,T$E);}(T$n,T$C.__class);},__typeof:function(T$n,T$C){if(!T$n||!T$C)return!1;if(T$C===String)return"string"==typeof T$n;if(T$C===Number)return"number"==typeof T$n;if(T$C.__interface__)T$C=T$C.__interface__;else if("string"!=typeof T$C)return T$n instanceof T$C;return T$n.__imps&&T$n.__imps[T$C]||T$n.__class==T$C;},__as:function(T$n,T$C){return this.__typeof(T$n,T$C)?T$n:null;},__int:function(T$n){return T$n?parseInt(T$n):0;},interface:function(T$n,T$C){T$J.__package(T$n,{});var T$_=T$J.__internals,T$E=T$_[T$n]=T$_[T$n]||{self:T$n};if(T$C){var T$y=T$C.split(",");T$E.extend=[];for(var T$p=0;T$p<T$y.length;T$p++){var T$c=T$y[T$p];T$_[T$c]=T$_[T$c]||{self:T$c},T$E.extend.push(T$_[T$c]);}}var T$l=T$q,T$W=T$n.split(".");for(T$p=0;T$p<T$W.length-1;T$p++)T$l=T$l[T$W[T$p]];T$l[T$W[T$W.length-1]]={__interface__:T$n};},class:function(T$n,T$C,T$_,T$E){if(T$_&&T$J.__extend(T$n,T$_),T$C)if(T$J.__package(T$C,T$n),T$J.__classmap[T$C]=T$n,0<T$C.indexOf(".")){if(0==T$C.indexOf("laya.")){var T$y=T$C.split(".");T$E=T$E||T$y[T$y.length-1],T$J[T$E]&&console.log("Warning!,this class["+T$E+"] already exist:",T$J[T$E]),T$J[T$E]=T$n;}}else"Main"==T$C?T$q.Main=T$n:"MainWX"==T$C?T$q.MainWX=T$n:(T$J[T$C]&&console.log("Error!,this class["+T$C+"] already exist:",T$J[T$C]),T$J[T$C]=T$n);var T$p=T$J.un,T$c=T$n.prototype;T$p(T$c,"hasOwnProperty",T$J.__hasOwnProperty),T$p(T$c,"__class",T$n),T$p(T$c,"__super",T$_),T$p(T$c,"__className",T$C),T$p(T$n,"__super",T$_),T$p(T$n,"__className",T$C),T$p(T$n,"__isclass",!0),T$p(T$n,"super",function(T$n){this.__super.call(T$n);});},imps:function(T$n,T$C){if(!T$C)return null;var T$y=T$n.__imps||T$J.un(T$n,"__imps",{});function T$p(T$n){var T$C,T$_;if((T$C=T$J.__internals[T$n])&&(T$y[T$n]=!0,T$_=T$C.extend))for(var T$E=0;T$E<T$_.length;T$E++)T$p(T$_[T$E].self);}for(var T$_ in T$C)T$p(T$_);},superSet:function(T$n,T$C,T$_,T$E){var T$y=T$n.prototype["_$set_"+T$_];T$y&&T$y.call(T$C,T$E);},superGet:function(T$n,T$C,T$_){var T$E=T$n.prototype["_$get_"+T$_];return T$E?T$E.call(T$C):null;},getset:function(T$n,T$C,T$_,T$E,T$y){T$n?(T$E&&(T$C["_$GET_"+T$_]=T$E),T$y&&(T$C["_$SET_"+T$_]=T$y)):(T$E&&T$J.un(T$C,"_$get_"+T$_,T$E),T$y&&T$J.un(T$C,"_$set_"+T$_,T$y)),T$E&&T$y?Object.defineProperty(T$C,T$_,{get:T$E,set:T$y,enumerable:!1,configurable:!0}):(T$E&&Object.defineProperty(T$C,T$_,{get:T$E,enumerable:!1,configurable:!0}),T$y&&Object.defineProperty(T$C,T$_,{set:T$y,enumerable:!1,configurable:!0}));},static:function(T$_,T$E){for(var T$y=0,T$n=T$E.length;T$y<T$n;T$y+=2)if("length"==T$E[T$y])T$_.length=T$E[T$y+1].call(T$_);else{function T$C(){var T$C=T$E[T$y],T$n=T$E[T$y+1];Object.defineProperty(T$_,T$C,{get:function(){return delete this[T$C],this[T$C]=T$n.call(this);},set:function(T$n){delete this[T$C],this[T$C]=T$n;},enumerable:!0,configurable:!0});}T$C();}},un:function(T$n,T$C,T$_){return T$_||(T$_=T$n[T$C]),T$J.__propun.value=T$_,Object.defineProperty(T$n,T$C,T$J.__propun),T$_;},uns:function(T$C,T$n){T$n.forEach(function(T$n){T$J.un(T$C,T$n);});}};return T$q.console=T$q.console||{log:function(){}},T$q.trace=T$q.console.log,Error.prototype.throwError=function(){throw arguments;},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),T$J;}(window,document);!function(T$n,T$C,T$_){T$_.un,T$_.uns,T$_.static,T$_.class,T$_.getset,T$_.__newvec;}(window,document,Laya),function(T$c,T$C,T$T){T$T.un,T$T.uns;var T$W=T$T.static,T$J=T$T.class,T$b=T$T.getset;T$T.__newvec;T$T.interface("laya.runtime.IMarket"),T$T.interface("laya.filters.IFilter"),T$T.interface("laya.display.ILayout"),T$T.interface("laya.resource.IDispose"),T$T.interface("laya.runtime.IPlatform"),T$T.interface("laya.resource.IDestroy"),T$T.interface("laya.runtime.IConchNode"),T$T.interface("laya.filters.IFilterAction"),T$T.interface("laya.runtime.ICPlatformClass"),T$T.interface("laya.resource.ICreateResource"),T$T.interface("laya.runtime.IConchRenderObject"),T$T.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var T$w=function(){function T$p(){}return T$J(T$p,"laya.utils.RunDriver"),T$p.FILTER_ACTIONS=[],T$p.pixelRatio=-1,T$p._charSizeTestDiv=null,T$p.now=function(){return Date.now();},T$p.getWindow=function(){return T$c;},T$p.getPixelRatio=function(){if(T$p.pixelRatio<0){var T$n=T$e.context,T$C=T$n.backingStorePixelRatio||T$n.webkitBackingStorePixelRatio||T$n.mozBackingStorePixelRatio||T$n.msBackingStorePixelRatio||T$n.oBackingStorePixelRatio||T$n.backingStorePixelRatio||1;(T$p.pixelRatio=(T$e.window.devicePixelRatio||1)/T$C)<1&&(T$p.pixelRatio=1);}return T$p.pixelRatio;},T$p.getIncludeStr=function(T$n){return null;},T$p.createShaderCondition=function(T$n){var T$C="(function() {return "+T$n+";})";return T$T._runScript(T$C);},T$p.fontMap=[],T$p.measureText=function(T$n,T$C){var T$_=T$p.hanzi.test(T$n);if(T$_&&T$p.fontMap[T$C])return T$p.fontMap[T$C];var T$E=T$e.context;T$E.font=T$C;var T$y=T$E.measureText(T$n);return T$y||(T$y={width:16,height:16}),T$_&&(T$p.fontMap[T$C]=T$y),T$y;},T$p.getWebGLContext=function(T$n){},T$p.beginFlush=function(){},T$p.endFinish=function(){},T$p.addToAtlas=null,T$p.flashFlushImage=function(T$n){},T$p.drawToCanvas=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c=T$On.create("2D"),T$l=new T$X(T$_,T$E,T$c);return T$$.renders[T$C]._fun(T$n,T$l,T$y,T$p),T$c;},T$p.createParticleTemplate2D=null,T$p.createGLTextur=null,T$p.createWebGLContext2D=null,T$p.changeWebGLSize=function(T$n,T$C){},T$p.createRenderSprite=function(T$n,T$C){return new T$$(T$n,T$C);},T$p.createFilterAction=function(T$n){return new T$O();},T$p.createGraphics=function(){return new T$P();},T$p.clear=function(T$n){T$H._context.ctx.clear();},T$p.cancelLoadByUrl=function(T$n){},T$p.clearAtlas=function(T$n){},T$p.isAtlas=function(T$n){return!1;},T$p.addTextureToAtlas=function(T$n){},T$p.getTexturePixels=function(T$n,T$C,T$_,T$E,T$y){return null;},T$p.skinAniSprite=function(){return null;},T$p.update3DLoop=function(){},T$W(T$p,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$");}]),T$p;}(),T$E=(T$b(1,T$T,"alertGlobalError",null,function(T$n){var T$p=0;T$e.window.onerror=T$n?function(T$n,T$C,T$_,T$E,T$y){T$p++<5&&T$y&&alert(T$y.stack||T$y);}:null;}),T$T.init=function(T$n,T$C,T$_){for(var T$E=[],T$y=2,T$p=arguments.length;T$y<T$p;T$y++)T$E.push(arguments[T$y]);if(!T$T._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=T$T._arrayBufferSlice),T$T._isinit=!0,T$e.__init__(),T$i.__init__(),T$P.__init__(),T$T.timer=new T$v(),T$T.scaleTimer=new T$v(),T$T.loader=new T$Wn(),T$K.__init__(),T$y=0;for(var T$c=T$E.length;T$y<T$c;T$y++)T$E[T$y].enable&&T$E[T$y].enable();return T$x.__init__(),T$l.__init__(),T$f.__init__(),T$F.beginCheck(),T$T._currentStage=T$T.stage=new T$dn(),T$T.stage.conchModel&&T$T.stage.conchModel.setRootNode(),T$T._getUrlPath(),T$T.render=new T$H(0,0),T$T.stage.size(T$n,T$C),T$$.__init__(),T$j.__init__(),T$r.instance.__init__(T$T.stage,T$H.canvas),T$kn.__init__(),T$M.autoStopMusic=!0,T$N.__init__(),T$H.canvas;}},T$T._getUrlPath=function(){var T$n=T$e.window.location,T$C=T$n.pathname;T$C=T$C&&":"==T$C.charAt(2)?T$C.substring(1):T$C,T$g.rootPath=T$g.basePath=T$g.getPath("file:"==T$n.protocol?T$C:T$n.protocol+"//"+T$n.host+T$n.pathname);},T$T._arrayBufferSlice=function(T$n,T$C){var T$_=new Uint8Array(this,T$n,T$C-T$n),T$E=new Uint8Array(T$_.length);return T$E.set(T$_),T$E.buffer;},T$T._runScript=function(T$n){return T$e.window[T$T._evcode](T$n);},T$T.stage=null,T$T.timer=null,T$T.scaleTimer=null,T$T.loader=null,T$T.version="1.8.6",T$T.render=null,T$T._currentStage=null,T$T._isinit=!1,T$T.isDebug=!1,T$T.MiniAdpter={init:function(){T$c.navigator&&T$c.navigator.userAgent&&-1<T$c.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0");}},T$W(T$T,["conchMarket",function(){return this.conchMarket=T$c.conch?conchMarket:null;},"PlatformClass",function(){return this.PlatformClass=T$c.PlatformClass;},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al";}]),function(){function T$n(){}return T$J(T$n,"Config"),T$n.WebGLTextCacheCount=500,T$n.atlasEnable=!1,T$n.showCanvasMark=!1,T$n.animationInterval=50,T$n.isAntialias=!1,T$n.isAlpha=!1,T$n.premultipliedAlpha=!0,T$n.isStencil=!0,T$n.preserveDrawingBuffer=!1,T$n;}()),T$q=function(){function T$q(){this._events=null;}T$J(T$q,"laya.events.EventDispatcher");var T$n=T$q.prototype;return T$n.hasListener=function(T$n){return!!(this._events&&this._events[T$n]);},T$n.getListener=function(T$n){return this._events?this._events[T$n]:null;},T$n.event=function(T$n,T$C){if(!this._events||!this._events[T$n])return!1;var T$_=this._events[T$n];if(T$_.lock)T$_.queue||(T$_.queue=[]),T$_.queue.push(T$C);else{var T$E;for(T$_.lock=!0,T$_.cursor=T$_.head;T$_.cursor;)(T$E=T$_.cursor).recover?(T$_.head=T$_.tail=T$_.cursor=null,console.error("node is recover："+T$E.id)):(T$_.cursor=T$E.next,T$E.once&&T$q.delNode(T$_,T$E),T$E.method&&(null!=T$C?T$E.args?T$E.method.apply(T$E.caller,T$E.args.concat(T$C)):T$C instanceof Array?T$E.method.apply(T$E.caller,T$C):T$E.caller?T$E.method.call(T$E.caller,T$C):T$T.recordError("事件派发错误","node.caller:"+T$E.caller+"node.method:"+T$E.method+"data:"+T$C+"node.prev"+T$E.prev):T$E.method.apply(T$E.caller,T$E.args)),T$E.once&&T$q.recoverHandler(T$E));T$_.lock=!1,!T$_.head&&this._events&&this._events[T$n]==T$_&&delete this._events[T$n],T$_.queue&&T$_.queue.length&&this.event(T$n,T$_.queue.shift());}return!0;},T$n.on=function(T$n,T$C,T$_,T$E){return this._createListener(T$n,T$C,T$_,T$E,!1);},T$n.once=function(T$n,T$C,T$_,T$E){return this._createListener(T$n,T$C,T$_,T$E,!0);},T$n._createListener=function(T$n,T$C,T$_,T$E,T$y,T$p){void 0===T$p&&(T$p=!0),T$p&&this.off(T$n,T$C,T$_,T$y);var T$c=T$q.createHandler(T$C||this,T$_,T$E,T$y);this._events||(this._events={});var T$l=this._events,T$W=T$l[T$n];return T$W?T$W.tail?(T$c.prev=T$W.tail,T$W.tail.next=T$c,T$W.tail=T$c):T$W.head=T$W.tail=T$c:T$l[T$n]={head:T$c,tail:T$c,cursor:null,lock:!1},this;},T$n.off=function(T$n,T$C,T$_,T$E){if(void 0===T$E&&(T$E=!1),!this._events||!this._events[T$n])return this;for(var T$y=this._events[T$n],T$p=T$y.head;T$p;){if((!T$C||T$p.caller===T$C)&&T$p.method===T$_&&(!T$E||T$p.once)){T$q.delNode(T$y,T$p),T$y.cursor==T$p&&(T$y.cursor=T$p.next),T$q.recoverHandler(T$p);break;}T$p=T$p.next;}return this;},T$n.offAll=function(T$n){var T$C=this._events;if(!T$C)return this;if(T$n)this._recoverHandlers(T$C[T$n]),delete T$C[T$n];else{for(var T$_ in T$C)this._recoverHandlers(T$C[T$_]);this._events=null;}return this;},T$n._recoverHandlers=function(T$n){if(T$n){for(var T$C=T$n.head;T$C;){T$q.delNode(T$n,T$C);var T$_=T$C.next;T$q.recoverHandler(T$C),T$C=T$_;}T$n.cursor=null;}},T$n.isMouseEvent=function(T$n){return T$q.MOUSE_EVENTS[T$n];},T$q.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},T$q.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0});},T$q.delNode=function(T$n,T$C){T$C.prev?T$C.prev.next=T$C.next:T$n.head=T$C.next,T$C.next?T$C.next.prev=T$C.prev:T$n.tail=T$C.prev;},T$q.createHandler=function(T$n,T$C,T$_,T$E){var T$y=500<T$q._freeHandler.length?T$q._freeHandler.shift():null;if(T$y){if(T$y.recover)T$y.recover=!1,T$y.caller=T$n,T$y.method=T$C,T$y.args=T$_,T$y.once=T$E;else{var T$p="";try{arguments.propertyIsEnumerable.caller;}catch(T$n){T$p=T$n.stack;}var T$c=T$y.caller?(T$y.caller.__proto__&&T$y.caller.__proto__.constructor&&T$y.caller.__proto__.constructor.name)+"|"+T$y.caller.__className+"|"+T$y.caller.name:"",T$l=T$y.method?T$y.method.name:"";T$T.recordError("EventDispatcher重复创建","caller="+T$c+"  method="+T$l+"  stack="+T$p),T$y={id:++T$q._nodeCount,caller:T$n,method:T$C,args:T$_,once:T$E,recover:!1};}}else T$y={id:++T$q._nodeCount,caller:T$n,method:T$C,args:T$_,once:T$E,recover:!1};return T$y.prev=T$y.next=null,T$y;},T$q.recoverHandler=function(T$n){if(T$n.recover){if(T$q._errorCount<5){T$q._errorCount++;var T$C="";try{arguments.propertyIsEnumerable.caller;}catch(T$n){T$C=T$n.stack;}var T$_=T$n.caller?(T$n.caller.__proto__&&T$n.caller.__proto__.constructor&&T$n.caller.__proto__.constructor.name)+"|"+T$n.caller.__className+"|"+T$n.caller.name:"",T$E=T$n.method?T$n.method.name:"";T$T.recordError("EventDispatcher重复回收","id="+T$n.id+"  caller="+T$_+"  method="+T$E+"  stack="+T$C);}T$n.caller=T$n.method=T$n.args=T$n.prev=null;}else T$n.recover=!0,T$n.caller=T$n.method=T$n.args=T$n.prev=T$n.next=null,T$q._freeHandler&&T$q._freeHandler.length<3e3&&T$q._freeHandler.push(T$n);},T$q._freeHandler=[],T$q._nodeCount=0,T$q._errorCount=0,T$q;}(),T$a=function(){function T$y(T$n,T$C,T$_,T$E){this.once=!1,void(this._id=0)===T$E&&(T$E=!1),this.setTo(T$n,T$C,T$_,T$E);}T$J(T$y,"laya.utils.Handler");var T$n=T$y.prototype;return T$n.setTo=function(T$n,T$C,T$_,T$E){return this._id=T$y._gid++,this.caller=T$n,this.method=T$C,this.args=T$_,this.once=T$E,this;},T$n.run=function(){if(null==this.method)return null;var T$n=this._id,T$C=this.method.apply(this.caller,this.args);return this._id===T$n&&this.once&&this.recover(),T$C;},T$n.runWith=function(T$n){if(null==this.method)return null;var T$C=this._id;if(null==T$n)var T$_=this.method.apply(this.caller,this.args);else T$_=this.args||T$n.unshift?this.args?this.method.apply(this.caller,this.args.concat(T$n)):this.method.apply(this.caller,T$n):this.method.call(this.caller,T$n);return this._id===T$C&&this.once&&this.recover(),T$_;},T$n.clear=function(){return this.caller=null,this.method=null,this.args=null,this;},T$n.recover=function(){0<this._id&&(this._id=0,this.clear());},T$y.create=function(T$n,T$C,T$_,T$E){return void 0===T$E&&(T$E=!0),new T$y(T$n,T$C,T$_,T$E);},T$y._gid=1,T$y;}(),T$S=function(){function T$n(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0;}T$J(T$n,"laya.display.BitmapFont");var T$C=T$n.prototype;return T$C.loadFont=function(T$n,T$C){this._path=T$n,this._complete=T$C,T$T.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],T$a.create(this,this.onLoaded));},T$C.onLoaded=function(){this.parseFont(T$ln.getRes(this._path),T$ln.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null);},T$C.parseFont=function(T$n,T$C){if(null!=T$n&&null!=T$C){this._texture=T$C;var T$_=T$n.getElementsByTagName("info");if(!T$_[0].getAttributeNode)return this.parseFont2(T$n,T$C);this.fontSize=parseInt(T$_[0].getAttributeNode("size").nodeValue);var T$E,T$y=T$_[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(T$y[0]),parseInt(T$y[1]),parseInt(T$y[2]),parseInt(T$y[3])],T$E=T$n.getElementsByTagName("char");var T$p=0;for(T$p=0;T$p<T$E.length;T$p++){var T$c=T$E[T$p],T$l=parseInt(T$c.getAttributeNode("id").nodeValue),T$W=parseInt(T$c.getAttributeNode("xoffset").nodeValue)/1,T$q=parseInt(T$c.getAttributeNode("yoffset").nodeValue)/1,T$J=parseInt(T$c.getAttributeNode("xadvance").nodeValue)/1,T$j=new T$s();T$j.x=parseInt(T$c.getAttributeNode("x").nodeValue),T$j.y=parseInt(T$c.getAttributeNode("y").nodeValue),T$j.width=parseInt(T$c.getAttributeNode("width").nodeValue),T$j.height=parseInt(T$c.getAttributeNode("height").nodeValue);var T$P=T$Jn.create(T$C,T$j.x,T$j.y,T$j.width,T$j.height,T$W,T$q);this._maxWidth=Math.max(this._maxWidth,T$J+this.letterSpacing),this._fontCharDic[T$l]=T$P,this._fontWidthMap[T$l]=T$J;}}},T$C.parseFont2=function(T$n,T$C){if(null!=T$n&&null!=T$C){this._texture=T$C;var T$_=T$n.getElementsByTagName("info");this.fontSize=parseInt(T$_[0].attributes.size.nodeValue);var T$E=T$_[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(T$E[0]),parseInt(T$E[1]),parseInt(T$E[2]),parseInt(T$E[3])];var T$y=T$n.getElementsByTagName("char"),T$p=0;for(T$p=0;T$p<T$y.length;T$p++){var T$c=T$y[T$p].attributes,T$l=parseInt(T$c.id.nodeValue),T$W=parseInt(T$c.xoffset.nodeValue)/1,T$q=parseInt(T$c.yoffset.nodeValue)/1,T$J=parseInt(T$c.xadvance.nodeValue)/1,T$j=new T$s();T$j.x=parseInt(T$c.x.nodeValue),T$j.y=parseInt(T$c.y.nodeValue),T$j.width=parseInt(T$c.width.nodeValue),T$j.height=parseInt(T$c.height.nodeValue);var T$P=T$Jn.create(T$C,T$j.x,T$j.y,T$j.width,T$j.height,T$W,T$q);this._maxWidth=Math.max(this._maxWidth,T$J+this.letterSpacing),this._fontCharDic[T$l]=T$P,this._fontWidthMap[T$l]=T$J;}}},T$C.getCharTexture=function(T$n){return this._fontCharDic[T$n.charCodeAt(0)];},T$C.destroy=function(){if(this._texture){for(var T$n in this._fontCharDic){var T$C=this._fontCharDic[T$n];T$C&&T$C.destroy();}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null;}},T$C.setSpaceWidth=function(T$n){this._spaceWidth=T$n;},T$C.getCharWidth=function(T$n){var T$C=T$n.charCodeAt(0);return this._fontWidthMap[T$C]?this._fontWidthMap[T$C]+this.letterSpacing:" "==T$n?this._spaceWidth+this.letterSpacing:0;},T$C.getTextWidth=function(T$n){for(var T$C=0,T$_=0,T$E=T$n.length;T$_<T$E;T$_++)T$C+=this.getCharWidth(T$n.charAt(T$_));return T$C;},T$C.getMaxWidth=function(){return this._maxWidth;},T$C.getMaxHeight=function(){return this.fontSize;},T$C.drawText=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c,T$l=this.getTextWidth(T$n),T$W=0;"center"===T$y&&(T$W=(T$p-T$l)/2),"right"===T$y&&(T$W=T$p-T$l);for(var T$q=0,T$J=0,T$j=T$n.length;T$J<T$j;T$J++)(T$c=this.getCharTexture(T$n.charAt(T$J)))&&(T$C.graphics.drawTexture(T$c,T$_+T$q+T$W,T$E),T$q+=this.getCharWidth(T$n.charAt(T$J)));},T$n;}(),T$l=function(){function T$_(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=T$_._TF_EMPTY;}T$J(T$_,"laya.display.css.Style");var T$n=T$_.prototype;return T$n.getTransform=function(){return this._tf;},T$n.setTransform=function(T$n){this._tf="none"!==T$n&&T$n?T$n:T$_._TF_EMPTY;},T$n.setTranslateX=function(T$n){this._tf===T$_._TF_EMPTY&&(this._tf=new T$y()),this._tf.translateX=T$n;},T$n.setTranslateY=function(T$n){this._tf===T$_._TF_EMPTY&&(this._tf=new T$y()),this._tf.translateY=T$n;},T$n.setScaleX=function(T$n){this._tf===T$_._TF_EMPTY&&(this._tf=new T$y()),this._tf.scaleX=T$n;},T$n.setScale=function(T$n,T$C){this._tf===T$_._TF_EMPTY&&(this._tf=new T$y()),this._tf.scaleX=T$n,this._tf.scaleY=T$C;},T$n.setScaleY=function(T$n){this._tf===T$_._TF_EMPTY&&(this._tf=new T$y()),this._tf.scaleY=T$n;},T$n.setRotate=function(T$n){this._tf===T$_._TF_EMPTY&&(this._tf=new T$y()),this._tf.rotate=T$n;},T$n.setSkewX=function(T$n){this._tf===T$_._TF_EMPTY&&(this._tf=new T$y()),this._tf.skewX=T$n;},T$n.setSkewY=function(T$n){this._tf===T$_._TF_EMPTY&&(this._tf=new T$y()),this._tf.skewY=T$n;},T$n.destroy=function(){this.scrollRect=null;},T$n.render=function(T$n,T$C,T$_,T$E){},T$n.getCSSStyle=function(){return T$Cn.EMPTY;},T$n._enableLayout=function(){return!1;},T$b(0,T$n,"scaleX",function(){return this._tf.scaleX;},function(T$n){this.setScaleX(T$n);}),T$b(0,T$n,"transform",function(){return this.getTransform();},function(T$n){this.setTransform(T$n);}),T$b(0,T$n,"translateX",function(){return this._tf.translateX;},function(T$n){this.setTranslateX(T$n);}),T$b(0,T$n,"translateY",function(){return this._tf.translateY;},function(T$n){this.setTranslateY(T$n);}),T$b(0,T$n,"scaleY",function(){return this._tf.scaleY;},function(T$n){this.setScaleY(T$n);}),T$b(0,T$n,"block",function(){return 0!=(1&this._type);}),T$b(0,T$n,"skewY",function(){return this._tf.skewY;},function(T$n){this.setSkewY(T$n);}),T$b(0,T$n,"rotate",function(){return this._tf.rotate;},function(T$n){this.setRotate(T$n);}),T$b(0,T$n,"skewX",function(){return this._tf.skewX;},function(T$n){this.setSkewX(T$n);}),T$b(0,T$n,"paddingLeft",function(){return 0;}),T$b(0,T$n,"paddingTop",function(){return 0;}),T$b(0,T$n,"absolute",function(){return!0;}),T$_.__init__=function(){T$_._TF_EMPTY=new T$y(),T$_.EMPTY=new T$_();},T$_.EMPTY=null,T$_._TF_EMPTY=null,T$_;}(),T$x=function(){function T$C(T$n){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=T$o.create(T$C.defaultColor),this.family=T$C.defaultFamily,this.stroke=T$C._STROKE,this.size=T$C.defaultSize,T$n&&T$n!==T$C.EMPTY&&T$n.copyTo(this);}T$J(T$C,"laya.display.css.Font");var T$n=T$C.prototype;return T$n.set=function(T$n){this._text=null;for(var T$C=T$n.split(" "),T$_=0,T$E=T$C.length;T$_<T$E;T$_++){var T$y=T$C[T$_];switch(T$y){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue;}0<T$y.indexOf("px")&&(this.size=parseInt(T$y),this.family=T$C[T$_+1],T$_++);}},T$n.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family;},T$n.copyTo=function(T$n){T$n._type=this._type,T$n._text=this._text,T$n._weight=this._weight,T$n._color=this._color,T$n.family=this.family,T$n.stroke=this.stroke!=T$C._STROKE?this.stroke.slice():T$C._STROKE,T$n.indent=this.indent,T$n.size=this.size;},T$b(0,T$n,"password",function(){return 0!=(1024&this._type);},function(T$n){T$n?this._type|=1024:this._type&=-1025;}),T$b(0,T$n,"color",function(){return this._color.strColor;},function(T$n){this._color=T$o.create(T$n);}),T$b(0,T$n,"italic",function(){return 0!=(512&this._type);},function(T$n){T$n?this._type|=512:this._type&=-513;}),T$b(0,T$n,"bold",function(){return 0!=(2048&this._type);},function(T$n){T$n?this._type|=2048:this._type&=-2049;}),T$b(0,T$n,"weight",function(){return""+this._weight;},function(T$n){var T$C=0;switch(T$n){case"normal":break;case"bold":this.bold=!0,T$C=700;break;case"bolder":T$C=800;break;case"lighter":T$C=100;break;default:T$C=parseInt(T$n);}this._weight=T$C,this._text=null;}),T$b(0,T$n,"decoration",function(){return this._decoration?this._decoration.value:null;},function(T$n){var T$C=T$n.split(" ");switch(this._decoration||(this._decoration={}),T$C[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=T$C[0];}T$C[1]&&(this._decoration.color=T$o.create(T$C)),this._decoration.value=T$n;}),T$C.__init__=function(){T$C.EMPTY=new T$C(null);},T$C.EMPTY=null,T$C.defaultColor="#000000",T$C.defaultSize=12,T$C.defaultFamily="Arial",T$C.defaultFont="12px Arial",T$C._STROKE=[0,"#000000"],T$C._ITALIC=512,T$C._PASSWORD=1024,T$C._BOLD=2048,T$C;}(),T$y=function(){function T$n(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0;}return T$J(T$n,"laya.display.css.TransformInfo"),T$n;}(),T$P=function(){function T$j(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,T$H.isConchNode){this._nativeObj=new T$c._conchGraphics(),this.id=this._nativeObj.conchID;}}T$J(T$j,"laya.display.Graphics");var T$n=T$j.prototype;return T$n.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null;},T$n.clear=function(T$n){void 0===T$n&&(T$n=!1);var T$C=0,T$_=0;if(T$n){var T$E=this._one;if(this._cmds){for(T$_=this._cmds.length,T$C=0;T$C<T$_;T$C++)!(T$E=this._cmds[T$C])||T$E.callee!==T$H._context._drawTexture&&T$E.callee!==T$H._context._drawTextureWithTransform||(T$E[0]=null,T$j._cache.push(T$E));this._cmds.length=0;}else T$E&&(!T$E||T$E.callee!==T$H._context._drawTexture&&T$E.callee!==T$H._context._drawTextureWithTransform||(T$E[0]=null,T$j._cache.push(T$E)));}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(T$C=0,T$_=this._vectorgraphArray.length;T$C<T$_;T$C++)T$U.getInstance().deleteShape(this._vectorgraphArray[T$C]);this._vectorgraphArray.length=0;}},T$n._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset();},T$n._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new T$_(),this._graphicBounds._graphics=this);},T$n._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint();},T$n._isOnlyOne=function(){return!this._cmds||0===this._cmds.length;},T$n.getBounds=function(T$n){return void 0===T$n&&(T$n=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(T$n);},T$n.getBoundPoints=function(T$n){return void 0===T$n&&(T$n=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(T$n);},T$n._addCmd=function(T$n){this._cmds=this._cmds||[],T$n.callee=T$n.shift(),this._cmds.push(T$n);},T$n.setFilters=function(T$n){this._saveToCmd(T$H._context._setFilters,T$n);},T$n.drawTexture=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){if(void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0),void 0===T$E&&(T$E=0),void 0===T$y&&(T$y=0),void 0===T$c&&(T$c=1),!T$n||T$c<.01)return null;T$E||(T$E=T$n.sourceWidth),T$y||(T$y=T$n.sourceHeight),T$c=T$c<0?0:1<T$c?1:T$c;var T$l,T$W=!T$H.isWebGL&&(T$e.onFirefox||T$e.onEdge||T$e.onIE||T$e.onSafari)?.5:0,T$q=T$E/T$n.sourceWidth,T$J=T$y/T$n.sourceHeight;return T$E=T$n.width*T$q,T$y=T$n.height*T$J,T$n.loaded&&(T$E<=0||T$y<=0)?null:(T$C+=T$n.offsetX*T$q,T$_+=T$n.offsetY*T$J,this._sp&&(this._sp._renderType|=512),T$C-=T$W,T$_-=T$W,T$E+=2*T$W,T$y+=2*T$W,T$j._cache.length?((T$l=T$j._cache.pop())[0]=T$n,T$l[1]=T$C,T$l[2]=T$_,T$l[3]=T$E,T$l[4]=T$y,T$l[5]=T$p,T$l[6]=T$c):T$l=[T$n,T$C,T$_,T$E,T$y,T$p,T$c],T$l.callee=T$p||1!=T$c?T$H._context._drawTextureWithTransform:T$H._context._drawTexture,null!=this._one||T$p||1!=T$c?this._saveToCmd(T$l.callee,T$l):(this._one=T$l,this._render=this._renderOneImg),T$n.loaded||T$n.once("loaded",this,this._textureLoaded,[T$n,T$l]),this._repaint(),T$l);},T$n.cleanByTexture=function(T$n,T$C,T$_,T$E,T$y){if(void 0===T$E&&(T$E=0),void 0===T$y&&(T$y=0),!T$n)return this.clear();if(this._one&&this._render===this._renderOneImg){T$E||(T$E=T$n.sourceWidth),T$y||(T$y=T$n.sourceHeight);var T$p=T$E/T$n.sourceWidth,T$c=T$y/T$n.sourceHeight;T$E=T$n.width*T$p,T$y=T$n.height*T$c,T$C+=T$n.offsetX*T$p,T$_+=T$n.offsetY*T$c,this._one[0]=T$n,this._one[1]=T$C,this._one[2]=T$_,this._one[3]=T$E,this._one[4]=T$y,this._repaint();}else this.clear(),T$n&&this.drawTexture(T$n,T$C,T$_,T$E,T$y);},T$n.drawTextures=function(T$n,T$C){T$n&&this._saveToCmd(T$H._context._drawTextures,[T$n,T$C]);},T$n.fillTexture=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){if(void 0===T$E&&(T$E=0),void 0===T$y&&(T$y=0),void 0===T$p&&(T$p="repeat"),T$n){var T$l=[T$n,T$C,T$_,T$E,T$y,T$p,T$c||T$Y.EMPTY,{}];T$n.loaded||T$n.once("loaded",this,this._textureLoaded,[T$n,T$l]),this._saveToCmd(T$H._context._fillTexture,T$l);}},T$n._textureLoaded=function(T$n,T$C){T$C[3]=T$C[3]||T$n.width,T$C[4]=T$C[4]||T$n.height,this._repaint();},T$n.fillCircle=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){T$_.bitmap.enableMerageInAtlas=!1;var T$l=new Float32Array(2*(T$c+1)),T$W=new Float32Array(2*(T$c+1)),T$q=new Uint16Array(3*T$c),T$J=2*Math.PI/T$c,T$j=0;T$l[0]=T$E,T$l[1]=T$y,T$W[0]=T$E/T$_.width,T$W[1]=T$y/T$_.height;for(var T$P=2,T$x=0;T$x<T$c;T$x++){var T$b=T$p*Math.cos(T$j)+T$E,T$r=T$p*Math.sin(T$j)+T$y;T$l[T$P]=T$b,T$l[T$P+1]=T$r,T$W[T$P]=T$b/T$_.width,T$W[T$P+1]=T$r/T$_.height,T$j+=T$J,T$P+=2;}for(T$x=T$P=0;T$x<T$c;T$x++)T$q[T$P++]=0,T$q[T$P++]=T$x+1,T$q[T$P++]=T$c+1<=T$x+2?1:T$x+2;this.drawTriangles(T$_,T$n,T$C,T$l,T$W,T$q);},T$n.drawTriangles=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q){void 0===T$l&&(T$l=1),this._saveToCmd(T$H._context.drawTriangles,[T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q]);},T$n._saveToCmd=function(T$n,T$C){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=T$C,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(T$C)),T$C.callee=T$n,this._repaint(),T$C;},T$n.clipRect=function(T$n,T$C,T$_,T$E){this._saveToCmd(T$H._context._clipRect,[T$n,T$C,T$_,T$E]);},T$n.fillText=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){void 0===T$c&&(T$c=0),this._saveToCmd(T$H._context._fillText,[T$n,T$C,T$_,T$E||T$x.defaultFont,T$y,T$p]);},T$n.fillBorderText=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){this._saveToCmd(T$H._context._fillBorderText,[T$n,T$C,T$_,T$E||T$x.defaultFont,T$y,T$p,T$c,T$l]);},T$n.strokeText=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){this._saveToCmd(T$H._context._strokeText,[T$n,T$C,T$_,T$E||T$x.defaultFont,T$y,T$p,T$c]);},T$n.alpha=function(T$n){T$n=T$n<0?0:1<T$n?1:T$n,this._saveToCmd(T$H._context._alpha,[T$n]);},T$n.setAlpha=function(T$n){T$n=T$n<0?0:1<T$n?1:T$n,this._saveToCmd(T$H._context._setAlpha,[T$n]);},T$n.transform=function(T$n,T$C,T$_){void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0),this._saveToCmd(T$H._context._transform,[T$n,T$C,T$_]);},T$n.rotate=function(T$n,T$C,T$_){void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0),this._saveToCmd(T$H._context._rotate,[T$n,T$C,T$_]);},T$n.scale=function(T$n,T$C,T$_,T$E){void 0===T$_&&(T$_=0),void 0===T$E&&(T$E=0),this._saveToCmd(T$H._context._scale,[T$n,T$C,T$_,T$E]);},T$n.translate=function(T$n,T$C){this._saveToCmd(T$H._context._translate,[T$n,T$C]);},T$n.save=function(){this._saveToCmd(T$H._context._save,[]);},T$n.restore=function(){this._saveToCmd(T$H._context._restore,[]);},T$n.replaceText=function(T$n){this._repaint();var T$C=this._cmds;if(T$C){for(var T$_=T$C.length-1;-1<T$_;T$_--)if(this._isTextCmd(T$C[T$_].callee))return T$C[T$_][0].toUpperCase?T$C[T$_][0]=T$n:T$C[T$_][0].setText(T$n),!0;}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=T$n:this._one[0].setText(T$n),!0;return!1;},T$n._isTextCmd=function(T$n){return T$n===T$H._context._fillText||T$n===T$H._context._fillBorderText||T$n===T$H._context._strokeText;},T$n.replaceTextColor=function(T$n){this._repaint();var T$C=this._cmds;if(T$C)for(var T$_=T$C.length-1;-1<T$_;T$_--)this._isTextCmd(T$C[T$_].callee)&&(T$C[T$_][4]=T$n,T$C[T$_][0].toUpperCase||(T$C[T$_][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=T$n,this._one[0].toUpperCase||(this._one[0].changed=!0));},T$n.loadImage=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c=this;void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0),void 0===T$E&&(T$E=0),void 0===T$y&&(T$y=0);var T$l=T$ln.getRes(T$n);function T$W(T$n){T$n&&(T$c.drawTexture(T$n,T$C,T$_,T$E,T$y),null!=T$p&&T$p.call(T$c._sp,T$n));}T$l?T$W(T$l):T$T.loader.load(T$n,T$a.create(null,T$W),null,"image");},T$n._renderEmpty=function(T$n,T$C,T$_,T$E){},T$n._renderAll=function(T$n,T$C,T$_,T$E){for(var T$y,T$p=this._cmds,T$c=0,T$l=T$p.length;T$c<T$l;T$c++)(T$y=T$p[T$c]).callee.call(T$C,T$_,T$E,T$y);},T$n._renderOne=function(T$n,T$C,T$_,T$E){this._one.callee.call(T$C,T$_,T$E,this._one);},T$n._renderOneImg=function(T$n,T$C,T$_,T$E){this._one.callee.call(T$C,T$_,T$E,this._one),2305!==T$n._renderType&&(T$n._renderType|=1);},T$n.drawLine=function(T$n,T$C,T$_,T$E,T$y,T$p){void 0===T$p&&(T$p=1);var T$c=0;T$H.isWebGL&&(T$c=T$U.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(T$c));var T$l=T$p%2==0?0:.5,T$W=[T$n+T$l,T$C+T$l,T$_+T$l,T$E+T$l,T$y,T$p,T$c];this._saveToCmd(T$H._context._drawLine,T$W);},T$n.drawLines=function(T$n,T$C,T$_,T$E,T$y){void 0===T$y&&(T$y=1);var T$p=0;if(T$_&&!(T$_.length<4)){T$H.isWebGL&&(T$p=T$U.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(T$p));var T$c=T$y%2==0?0:.5,T$l=[T$n+T$c,T$C+T$c,T$_,T$E,T$y,T$p];this._saveToCmd(T$H._context._drawLines,T$l);}},T$n.drawCurves=function(T$n,T$C,T$_,T$E,T$y){void 0===T$y&&(T$y=1);var T$p=[T$n,T$C,T$_,T$E,T$y];this._saveToCmd(T$H._context._drawCurves,T$p);},T$n.drawRect=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){void 0===T$c&&(T$c=1);var T$l=T$p?T$c/2:0,T$W=T$p?T$c:0,T$q=[T$n+T$l,T$C+T$l,T$_-T$W,T$E-T$W,T$y,T$p,T$c];this._saveToCmd(T$H._context._drawRect,T$q);},T$n.drawCircle=function(T$n,T$C,T$_,T$E,T$y,T$p){void 0===T$p&&(T$p=1);var T$c=T$y?T$p/2:0,T$l=0;T$H.isWebGL&&(T$l=T$U.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(T$l));var T$W=[T$n,T$C,T$_-T$c,T$E,T$y,T$p,T$l];this._saveToCmd(T$H._context._drawCircle,T$W);},T$n.drawPie=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){void 0===T$l&&(T$l=1);var T$W=T$c?T$l/2:0,T$q=T$c?T$l:0,T$J=0;T$H.isWebGL&&(T$J=T$U.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(T$J));var T$j=[T$n+T$W,T$C+T$W,T$_-T$q,T$E,T$y,T$p,T$c,T$l,T$J];T$j[3]=T$z.toRadian(T$E),T$j[4]=T$z.toRadian(T$y),this._saveToCmd(T$H._context._drawPie,T$j);},T$n.drawPoly=function(T$n,T$C,T$_,T$E,T$y,T$p){void 0===T$p&&(T$p=1);var T$c=0,T$l=!1;T$H.isWebGL&&(T$c=T$U.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(T$c),T$l=!(6<T$_.length));var T$W=T$y?T$p%2==0?0:.5:0,T$q=[T$n+T$W,T$C+T$W,T$_,T$E,T$y,T$p,T$c,T$l];this._saveToCmd(T$H._context._drawPoly,T$q);},T$n.drawPath=function(T$n,T$C,T$_,T$E,T$y){var T$p=[T$n,T$C,T$_,T$E,T$y];this._saveToCmd(T$H._context._drawPath,T$p);},T$b(0,T$n,"cmds",function(){return this._cmds;},function(T$n){this._sp&&(this._sp._renderType|=512),this._cmds=T$n,this._render=this._renderAll,this._repaint();}),T$j.__init__=function(){if(T$H.isConchNode){for(var T$n=laya.display.Graphics.prototype,T$C=T$e.window.ConchGraphics.prototype,T$_=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],T$E=0,T$y=T$_.length;T$E<=T$y;T$E++){var T$p=T$_[T$E];T$n[T$p]=T$C[T$p];}T$n._saveToCmd=null,T$C.drawImageS&&(T$n.drawTextures=function(T$n,T$C){if(T$n&&T$n.loaded&&T$n.bitmap&&T$n.source){var T$_=T$n.uv,T$E=T$n.bitmap.width,T$y=T$n.bitmap.height;this.drawImageS(T$n.bitmap.source,T$_[0]*T$E,T$_[1]*T$y,(T$_[2]-T$_[0])*T$E,(T$_[5]-T$_[3])*T$y,T$n.offsetX,T$n.offsetY,T$n.width,T$n.height,T$C);}}),T$n.drawTexture=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){if(void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0),void 0===T$E&&(T$E=0),void 0===T$y&&(T$y=0),void 0===T$c&&(T$c=1),T$n)if(T$n.loaded){if(T$n.loaded&&T$n.bitmap&&T$n.source&&(T$E||(T$E=T$n.sourceWidth),T$y||(T$y=T$n.sourceHeight),T$c=T$c<0?0:1<T$c?1:T$c,T$E=T$E-T$n.sourceWidth+T$n.width,T$y=T$y-T$n.sourceHeight+T$n.height,!(T$E<=0||T$y<=0))){T$C+=T$n.offsetX,T$_+=T$n.offsetY;var T$l=T$n.uv,T$W=T$n.bitmap.width,T$q=T$n.bitmap.height;T$l[4]<T$l[0]&&T$l[5]<T$l[1]?this.drawImageM(T$n.bitmap.source,T$l[4]*T$W,T$l[5]*T$q,(T$l[0]-T$l[4])*T$W,(T$l[1]-T$l[5])*T$q,T$C,T$_,T$E,T$y,T$p,T$c):this.drawImageM(T$n.bitmap.source,T$l[0]*T$W,T$l[1]*T$q,(T$l[2]-T$l[0])*T$W,(T$l[5]-T$l[3])*T$q,T$C,T$_,T$E,T$y,T$p,T$c),this._repaint();}}else T$n.once("loaded",this,function(){this.drawTexture(T$n,T$C,T$_,T$E,T$y,T$p);});},T$n.fillTexture=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){if(void 0===T$E&&(T$E=0),void 0===T$y&&(T$y=0),void 0===T$p&&(T$p="repeat"),T$n&&T$n.loaded){var T$l,T$W=T$H._context.ctx,T$q=T$n.bitmap.width,T$J=T$n.bitmap.height,T$j=T$n.uv;T$l=T$n.uv!=T$Jn.DEF_UV?T$W.createPattern(T$n.bitmap.source,T$p,T$j[0]*T$q,T$j[1]*T$J,(T$j[2]-T$j[0])*T$q,(T$j[5]-T$j[3])*T$J):T$W.createPattern(T$n.bitmap.source,T$p);var T$P=0,T$x=0;T$c&&(T$C+=T$c.x%T$n.width,T$_+=T$c.y%T$n.height,T$P-=T$c.x%T$n.width,T$x-=T$c.y%T$n.height),this._fillImage(T$l,T$C,T$_,T$P,T$x,T$E,T$y);}};}},T$j._cache=[],T$j;}(),T$_=function(){function T$O(){this._cacheBoundsType=!1;}T$J(T$O,"laya.display.GraphicsBounds");var T$n=T$O.prototype;return T$n.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null;},T$n.reset=function(){this._temp&&(this._temp.length=0);},T$n.getBounds=function(T$n){return void 0===T$n&&(T$n=!1),(!this._bounds||!this._temp||this._temp.length<1||T$n!=this._cacheBoundsType)&&(this._bounds=T$s._getWrapRec(this.getBoundPoints(T$n),this._bounds)),this._cacheBoundsType=T$n,this._bounds;},T$n.getBoundPoints=function(T$n){return void 0===T$n&&(T$n=!1),(!this._temp||this._temp.length<1||T$n!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(T$n)),this._cacheBoundsType=T$n,this._rstBoundPoints=T$z.copyArray(this._rstBoundPoints,this._temp);},T$n._getCmdPoints=function(T$n){void 0===T$n&&(T$n=!1);var T$C,T$_,T$E=T$H._context,T$y=this._graphics.cmds;if((T$C=this._temp||(this._temp=[])).length=0,T$y||null==this._graphics._one||(T$O._tempCmds.length=0,T$O._tempCmds.push(this._graphics._one),T$y=T$O._tempCmds),!T$y)return T$C;(T$_=T$O._tempMatrixArrays).length=0;var T$p=T$O._initMatrix;T$p.identity();for(var T$c,T$l,T$W=T$O._tempMatrix,T$q=NaN,T$J=NaN,T$j=NaN,T$P=NaN,T$x=NaN,T$b=NaN,T$r=0,T$m=T$y.length;T$r<T$m;T$r++)if((T$c=T$y[T$r]).callee)switch(T$c.callee){case T$E._save:case 7:T$_.push(T$p),T$p=T$p.clone();break;case T$E._restore:case 8:T$p=T$_.pop();break;case T$E._scale:case 5:T$W.identity(),T$W.translate(-T$c[2],-T$c[3]),T$W.scale(T$c[0],T$c[1]),T$W.translate(T$c[2],T$c[3]),this._switchMatrix(T$p,T$W);break;case T$E._rotate:case 3:T$W.identity(),T$W.translate(-T$c[1],-T$c[2]),T$W.rotate(T$c[0]),T$W.translate(T$c[1],T$c[2]),this._switchMatrix(T$p,T$W);break;case T$E._translate:case 6:T$W.identity(),T$W.translate(T$c[0],T$c[1]),this._switchMatrix(T$p,T$W);break;case T$E._transform:case 4:T$W.identity(),T$W.translate(-T$c[1],-T$c[2]),T$W.concat(T$c[0]),T$W.translate(T$c[1],T$c[2]),this._switchMatrix(T$p,T$W);break;case 16:case 24:T$O._addPointArrToRst(T$C,T$s._getBoundPointS(T$c[0],T$c[1],T$c[2],T$c[3]),T$p);break;case 17:T$p.copyTo(T$W),T$W.concat(T$c[4]),T$O._addPointArrToRst(T$C,T$s._getBoundPointS(T$c[0],T$c[1],T$c[2],T$c[3]),T$W);break;case T$E._drawTexture:T$l=T$c[0],T$n?T$c[3]&&T$c[4]?T$O._addPointArrToRst(T$C,T$s._getBoundPointS(T$c[1],T$c[2],T$c[3],T$c[4]),T$p):(T$l=T$c[0],T$O._addPointArrToRst(T$C,T$s._getBoundPointS(T$c[1],T$c[2],T$l.width,T$l.height),T$p)):(T$q=(T$c[3]||T$l.sourceWidth)/T$l.width,T$J=(T$c[4]||T$l.sourceHeight)/T$l.height,T$j=T$q*T$l.sourceWidth,T$P=T$J*T$l.sourceHeight,T$x=0<T$l.offsetX?T$l.offsetX:0,T$b=0<T$l.offsetY?T$l.offsetY:0,T$x*=T$q,T$b*=T$J,T$O._addPointArrToRst(T$C,T$s._getBoundPointS(T$c[1]-T$x,T$c[2]-T$b,T$j,T$P),T$p));break;case T$E._fillTexture:T$c[3]&&T$c[4]?T$O._addPointArrToRst(T$C,T$s._getBoundPointS(T$c[1],T$c[2],T$c[3],T$c[4]),T$p):(T$l=T$c[0],T$O._addPointArrToRst(T$C,T$s._getBoundPointS(T$c[1],T$c[2],T$l.width,T$l.height),T$p));break;case T$E._drawTextureWithTransform:var T$d;T$d=T$c[5]?(T$p.copyTo(T$W),T$W.concat(T$c[5]),T$W):T$p,T$n?T$c[3]&&T$c[4]?T$O._addPointArrToRst(T$C,T$s._getBoundPointS(T$c[1],T$c[2],T$c[3],T$c[4]),T$d):(T$l=T$c[0],T$O._addPointArrToRst(T$C,T$s._getBoundPointS(T$c[1],T$c[2],T$l.width,T$l.height),T$d)):(T$l=T$c[0],T$q=(T$c[3]||T$l.sourceWidth)/T$l.width,T$J=(T$c[4]||T$l.sourceHeight)/T$l.height,T$j=T$q*T$l.sourceWidth,T$P=T$J*T$l.sourceHeight,T$x=0<T$l.offsetX?T$l.offsetX:0,T$b=0<T$l.offsetY?T$l.offsetY:0,T$x*=T$q,T$b*=T$J,T$O._addPointArrToRst(T$C,T$s._getBoundPointS(T$c[1]-T$x,T$c[2]-T$b,T$j,T$P),T$d));break;case T$E._drawRect:case 13:T$O._addPointArrToRst(T$C,T$s._getBoundPointS(T$c[0],T$c[1],T$c[2],T$c[3]),T$p);break;case T$E._drawCircle:case T$E._fillCircle:case 14:T$O._addPointArrToRst(T$C,T$s._getBoundPointS(T$c[0]-T$c[2],T$c[1]-T$c[2],T$c[2]+T$c[2],T$c[2]+T$c[2]),T$p);break;case T$E._drawLine:case 20:T$O._tempPoints.length=0;var T$a;T$a=.5*T$c[5],T$c[0]==T$c[2]?T$O._tempPoints.push(T$c[0]+T$a,T$c[1],T$c[2]+T$a,T$c[3],T$c[0]-T$a,T$c[1],T$c[2]-T$a,T$c[3]):T$c[1]==T$c[3]?T$O._tempPoints.push(T$c[0],T$c[1]+T$a,T$c[2],T$c[3]+T$a,T$c[0],T$c[1]-T$a,T$c[2],T$c[3]-T$a):T$O._tempPoints.push(T$c[0],T$c[1],T$c[2],T$c[3]),T$O._addPointArrToRst(T$C,T$O._tempPoints,T$p);break;case T$E._drawCurves:case 22:T$O._addPointArrToRst(T$C,T$A.I.getBezierPoints(T$c[2]),T$p,T$c[0],T$c[1]);break;case T$E._drawPoly:case T$E._drawLines:case 18:T$O._addPointArrToRst(T$C,T$c[2],T$p,T$c[0],T$c[1]);break;case T$E._drawPath:case 19:T$O._addPointArrToRst(T$C,this._getPathPoints(T$c[2]),T$p,T$c[0],T$c[1]);break;case T$E._drawPie:case 15:T$O._addPointArrToRst(T$C,this._getPiePoints(T$c[0],T$c[1],T$c[2],T$c[3],T$c[4]),T$p);}return 200<T$C.length?T$C=T$z.copyArray(T$C,T$s._getWrapRec(T$C)._getBoundPoints()):8<T$C.length&&(T$C=T$k.scanPList(T$C)),T$C;},T$n._switchMatrix=function(T$n,T$C){T$C.concat(T$n),T$C.copyTo(T$n);},T$n._getPiePoints=function(T$n,T$C,T$_,T$E,T$y){var T$p=T$O._tempPoints;T$O._tempPoints.length=0,T$p.push(T$n,T$C);var T$c=(T$y-T$E)%(2*Math.PI)/10,T$l=NaN,T$W=T$E;for(T$l=0;T$l<=10;T$l++)T$p.push(T$n+T$_*Math.cos(T$W),T$C+T$_*Math.sin(T$W)),T$W+=T$c;return T$p;},T$n._getPathPoints=function(T$n){var T$C,T$_,T$E=0,T$y=T$O._tempPoints;for(T$y.length=0,T$C=T$n.length,T$E=0;T$E<T$C;T$E++)1<(T$_=T$n[T$E]).length&&(T$y.push(T$_[1],T$_[2]),3<T$_.length&&T$y.push(T$_[3],T$_[4]));return T$y;},T$O._addPointArrToRst=function(T$n,T$C,T$_,T$E,T$y){void 0===T$E&&(T$E=0),void 0===T$y&&(T$y=0);var T$p,T$c=0;for(T$p=T$C.length,T$c=0;T$c<T$p;T$c+=2)T$O._addPointToRst(T$n,T$C[T$c]+T$E,T$C[T$c+1]+T$y,T$_);},T$O._addPointToRst=function(T$n,T$C,T$_,T$E){var T$y=T$Y.TEMP;T$y.setTo(T$C||0,T$_||0),T$E.transformPoint(T$y),T$n.push(T$y.x,T$y.y);},T$O._tempPoints=[],T$O._tempMatrixArrays=[],T$O._tempCmds=[],T$W(T$O,["_tempMatrix",function(){return this._tempMatrix=new T$B();},"_initMatrix",function(){return this._initMatrix=new T$B();}]),T$O;}(),T$p=function(){function T$n(){}T$J(T$n,"laya.events.Event");var T$C=T$n.prototype;return T$C.setTo=function(T$n,T$C,T$_){return this.type=T$n,this.currentTarget=T$C,this.target=T$_,this;},T$C.stopPropagation=function(){this._stoped=!0;},T$b(0,T$C,"stageY",function(){return T$T.stage.mouseY;}),T$b(0,T$C,"charCode",function(){return this.nativeEvent.charCode;}),T$b(0,T$C,"touches",function(){var T$n=this.nativeEvent.touches;if(T$n)for(var T$C=T$T.stage,T$_=0,T$E=T$n.length;T$_<T$E;T$_++){var T$y=T$n[T$_],T$p=T$Y.TEMP;T$p.setTo(T$y.clientX,T$y.clientY),T$C._canvasTransform.invertTransformPoint(T$p),T$C.transform.invertTransformPoint(T$p),T$y.stageX=T$p.x,T$y.stageY=T$p.y;}return T$n;}),T$b(0,T$C,"keyLocation",function(){return this.nativeEvent.keyLocation;}),T$b(0,T$C,"ctrlKey",function(){return this.nativeEvent.ctrlKey;}),T$b(0,T$C,"altKey",function(){return this.nativeEvent.altKey;}),T$b(0,T$C,"shiftKey",function(){return this.nativeEvent.shiftKey;}),T$b(0,T$C,"stageX",function(){return T$T.stage.mouseX;}),T$n.EMPTY=new T$n(),T$n.MOUSE_DOWN="mousedown",T$n.MOUSE_UP="mouseup",T$n.CLICK="click",T$n.RIGHT_MOUSE_DOWN="rightmousedown",T$n.RIGHT_MOUSE_UP="rightmouseup",T$n.RIGHT_CLICK="rightclick",T$n.MOUSE_MOVE="mousemove",T$n.MOUSE_OVER="mouseover",T$n.MOUSE_OUT="mouseout",T$n.MOUSE_WHEEL="mousewheel",T$n.ROLL_OVER="mouseover",T$n.ROLL_OUT="mouseout",T$n.DOUBLE_CLICK="doubleclick",T$n.CHANGE="change",T$n.CHANGED="changed",T$n.RESIZE="resize",T$n.ADDED="added",T$n.REMOVED="removed",T$n.DISPLAY="display",T$n.UNDISPLAY="undisplay",T$n.ERROR="error",T$n.COMPLETE="complete",T$n.LOADED="loaded",T$n.INITED="inited",T$n.PROGRESS="progress",T$n.INPUT="input",T$n.RENDER="render",T$n.OPEN="open",T$n.MESSAGE="message",T$n.CLOSE="close",T$n.KEY_DOWN="keydown",T$n.KEY_PRESS="keypress",T$n.KEY_UP="keyup",T$n.FRAME="enterframe",T$n.DRAG_START="dragstart",T$n.DRAG_MOVE="dragmove",T$n.DRAG_END="dragend",T$n.ENTER="enter",T$n.SELECT="select",T$n.BLUR="blur",T$n.FOCUS="focus",T$n.VISIBILITY_CHANGE="visibilitychange",T$n.FOCUS_CHANGE="focuschange",T$n.PLAYED="played",T$n.PAUSED="paused",T$n.STOPPED="stopped",T$n.START="start",T$n.END="end",T$n.ENABLE_CHANGED="enablechanged",T$n.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",T$n.COMPONENT_ADDED="componentadded",T$n.COMPONENT_REMOVED="componentremoved",T$n.LAYER_CHANGED="layerchanged",T$n.HIERARCHY_LOADED="hierarchyloaded",T$n.RECOVERED="recovered",T$n.RELEASED="released",T$n.LINK="link",T$n.LABEL="label",T$n.FULL_SCREEN_CHANGE="fullscreenchange",T$n.DEVICE_LOST="devicelost",T$n.MESH_CHANGED="meshchanged",T$n.MATERIAL_CHANGED="materialchanged",T$n.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",T$n.ANIMATION_CHANGED="animationchanged",T$n.TRIGGER_ENTER="triggerenter",T$n.TRIGGER_STAY="triggerstay",T$n.TRIGGER_EXIT="triggerexit",T$n.TRAIL_FILTER_CHANGE="trailfilterchange",T$n.DOMINO_FILTER_CHANGE="dominofilterchange",T$n;}(),T$j=(function(){function T$n(){}T$J(T$n,"laya.events.Keyboard"),T$n.NUMBER_0=48,T$n.NUMBER_1=49,T$n.NUMBER_2=50,T$n.NUMBER_3=51,T$n.NUMBER_4=52,T$n.NUMBER_5=53,T$n.NUMBER_6=54,T$n.NUMBER_7=55,T$n.NUMBER_8=56,T$n.NUMBER_9=57,T$n.A=65,T$n.B=66,T$n.C=67,T$n.D=68,T$n.E=69,T$n.F=70,T$n.G=71,T$n.H=72,T$n.I=73,T$n.J=74,T$n.K=75,T$n.L=76,T$n.M=77,T$n.N=78,T$n.O=79,T$n.P=80,T$n.Q=81,T$n.R=82,T$n.S=83,T$n.T=84,T$n.U=85,T$n.V=86,T$n.W=87,T$n.X=88,T$n.Y=89,T$n.Z=90,T$n.F1=112,T$n.F2=113,T$n.F3=114,T$n.F4=115,T$n.F5=116,T$n.F6=117,T$n.F7=118,T$n.F8=119,T$n.F9=120,T$n.F10=121,T$n.F11=122,T$n.F12=123,T$n.F13=124,T$n.F14=125,T$n.F15=126,T$n.NUMPAD=21,T$n.NUMPAD_0=96,T$n.NUMPAD_1=97,T$n.NUMPAD_2=98,T$n.NUMPAD_3=99,T$n.NUMPAD_4=100,T$n.NUMPAD_5=101,T$n.NUMPAD_6=102,T$n.NUMPAD_7=103,T$n.NUMPAD_8=104,T$n.NUMPAD_9=105,T$n.NUMPAD_ADD=107,T$n.NUMPAD_DECIMAL=110,T$n.NUMPAD_DIVIDE=111,T$n.NUMPAD_ENTER=108,T$n.NUMPAD_MULTIPLY=106,T$n.NUMPAD_SUBTRACT=109,T$n.SEMICOLON=186,T$n.EQUAL=187,T$n.COMMA=188,T$n.MINUS=189,T$n.PERIOD=190,T$n.SLASH=191,T$n.BACKQUOTE=192,T$n.LEFTBRACKET=219,T$n.BACKSLASH=220,T$n.RIGHTBRACKET=221,T$n.QUOTE=222,T$n.ALTERNATE=18,T$n.BACKSPACE=8,T$n.CAPS_LOCK=20,T$n.COMMAND=15,T$n.CONTROL=17,T$n.DELETE=46,T$n.ENTER=13,T$n.ESCAPE=27,T$n.PAGE_UP=33,T$n.PAGE_DOWN=34,T$n.END=35,T$n.HOME=36,T$n.LEFT=37,T$n.UP=38,T$n.RIGHT=39,T$n.DOWN=40,T$n.SHIFT=16,T$n.SPACE=32,T$n.TAB=9,T$n.INSERT=45;}(),function(){function T$y(){}return T$J(T$y,"laya.events.KeyBoardManager"),T$y.__init__=function(){T$y._addEvent("keydown"),T$y._addEvent("keypress"),T$y._addEvent("keyup");},T$y._addEvent=function(T$C){T$e.document.addEventListener(T$C,function(T$n){laya.events.KeyBoardManager._dispatch(T$n,T$C);},!0);},T$y._dispatch=function(T$n,T$C){if(T$y.enabled){T$y._event._stoped=!1,T$y._event.nativeEvent=T$n,T$y._event.keyCode=T$n.keyCode||T$n.which||T$n.charCode,"keydown"===T$C?T$y._pressKeys[T$y._event.keyCode]=!0:"keyup"===T$C&&(T$y._pressKeys[T$y._event.keyCode]=null);for(var T$_=T$T.stage.focus&&null!=T$T.stage.focus.event&&T$T.stage.focus.displayedInStage?T$T.stage.focus:T$T.stage,T$E=T$_;T$E;)T$E.event(T$C,T$y._event.setTo(T$C,T$E,T$_)),T$E=T$E.parent;}},T$y.hasKeyDown=function(T$n){return T$y._pressKeys[T$n];},T$y._pressKeys={},T$y.enabled=!0,T$W(T$y,["_event",function(){return this._event=new T$p();}]),T$y;}()),T$r=(function(){function T$n(){}T$J(T$n,"laya.events.KeyLocation"),T$n.STANDARD=0,T$n.LEFT=1,T$n.RIGHT=2,T$n.NUM_PAD=3;}(),function(){function T$q(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=T$e.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new T$p(),this._matrix=new T$B(),this._point=new T$Y(),this._rect=new T$s(),this._prePoint=new T$Y(),this._curTouchID=NaN;}T$J(T$q,"laya.events.MouseManager");var T$n=T$q.prototype;return T$n.__init__=function(T$n,T$C){var T$_=this;this._stage=T$n;var T$E=this,T$y=this._eventList;T$C.oncontextmenu=function(T$n){if(T$q.enabled)return!1;},T$C.addEventListener("mousedown",function(T$n){T$q.enabled&&(T$e.onIE||T$n.preventDefault(),T$y.push(T$n),T$E.mouseDownTime=T$e.now());}),T$C.addEventListener("mouseup",function(T$n){T$q.enabled&&(T$n.preventDefault(),T$y.push(T$n),T$E.mouseDownTime=-T$e.now());},!0),T$C.addEventListener("mousemove",function(T$n){if(T$q.enabled){T$n.preventDefault();var T$C=T$e.now();if(T$C-T$E._lastMoveTimer<10)return;T$E._lastMoveTimer=T$C,T$y.push(T$n);}},!0),T$C.addEventListener("mouseout",function(T$n){T$q.enabled&&T$y.push(T$n);}),T$C.addEventListener("mouseover",function(T$n){T$q.enabled&&T$y.push(T$n);}),T$C.addEventListener("touchstart",function(T$n){T$q.enabled&&(T$y.push(T$n),T$q._isFirstTouch||T$kn.isInputting||T$n.preventDefault(),T$E.mouseDownTime=T$e.now());}),T$C.addEventListener("touchend",function(T$n){T$q.enabled?(T$q._isFirstTouch||T$kn.isInputting||T$n.preventDefault(),T$q._isFirstTouch=!1,T$y.push(T$n),T$E.mouseDownTime=-T$e.now()):T$_._curTouchID=NaN;},!0),T$C.addEventListener("touchmove",function(T$n){T$q.enabled&&(T$n.preventDefault(),T$y.push(T$n));},!0),T$C.addEventListener("touchcancel",function(T$n){T$q.enabled?(T$n.preventDefault(),T$y.push(T$n)):T$_._curTouchID=NaN;},!0),T$C.addEventListener("mousewheel",function(T$n){T$q.enabled&&T$y.push(T$n);}),T$C.addEventListener("DOMMouseScroll",function(T$n){T$q.enabled&&T$y.push(T$n);});},T$n.initEvent=function(T$n,T$C){var T$_;this._event._stoped=!1,this._event.nativeEvent=T$C||T$n,this._target=null,this._point.setTo(T$n.pageX||T$n.clientX,T$n.pageY||T$n.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=T$n.identifier||0,this._tTouchID=this._event.touchId,(T$_=T$m.I._event)._stoped=!1,T$_.nativeEvent=this._event.nativeEvent,T$_.touchId=this._event.touchId;},T$n.checkMouseWheel=function(T$n){this._event.delta=T$n.wheelDelta?.025*T$n.wheelDelta:-T$n.detail;for(var T$C=T$m.I.getLastOvers(),T$_=0,T$E=T$C.length;T$_<T$E;T$_++){var T$y=T$C[T$_];T$y.event("mousewheel",this._event.setTo("mousewheel",T$y,this._target));}},T$n.onMouseMove=function(T$n){T$m.I.onMouseMove(T$n,this._tTouchID);},T$n.onMouseDown=function(T$n){if(T$kn.isInputting&&T$T.stage.focus&&T$T.stage.focus.focus&&!T$T.stage.focus.contains(this._target)){var T$C=T$T.stage.focus._tf||T$T.stage.focus,T$_=T$n._tf||T$n;T$_ instanceof laya.display.Input&&T$_.multiline==T$C.multiline?T$C._focusOut():T$C.focus=!1;}T$m.I.onMouseDown(T$n,this._tTouchID,this._isLeftMouse);},T$n.onMouseUp=function(T$n){T$m.I.onMouseUp(T$n,this._tTouchID,this._isLeftMouse);},T$n.check=function(T$n,T$C,T$_,T$E){this._point.setTo(T$C,T$_),T$n.fromParentPoint(this._point),T$C=this._point.x,T$_=this._point.y;var T$y=T$n.scrollRect;if(T$y&&(this._rect.setTo(T$y.x,T$y.y,T$y.width,T$y.height),!this._rect.contains(T$C,T$_)))return!1;if(!this.disableMouseEvent){if(T$n.hitTestPrior&&!T$n.mouseThrough&&!this.hitTest(T$n,T$C,T$_))return!1;for(var T$p=T$n._childs.length-1;-1<T$p;T$p--){var T$c=T$n._childs[T$p];if(!T$c.destroyed&&T$c.mouseEnabled&&T$c.visible&&this.check(T$c,T$C,T$_,T$E))return!0;}}var T$l=!(!T$n.hitTestPrior||T$n.mouseThrough||this.disableMouseEvent)||this.hitTest(T$n,T$C,T$_);return T$l?(this._target=T$n,T$E.call(this,T$n)):T$E===this.onMouseUp&&T$n===this._stage&&(this._target=this._stage,T$E.call(this,this._target)),T$l;},T$n.hitTest=function(T$n,T$C,T$_){var T$E=!1;if(T$n.scrollRect&&(T$C-=T$n.scrollRect.x,T$_-=T$n.scrollRect.y),T$n.hitArea instanceof laya.utils.HitArea)return T$n.hitArea.isHit(T$C,T$_);if(0<T$n.width&&0<T$n.height||T$n.mouseThrough||T$n.hitArea)if(T$n.mouseThrough)T$E=T$n.getGraphicBounds().contains(T$C,T$_);else{var T$y=this._rect;T$n.hitArea?T$y=T$n.hitArea:T$y.setTo(0,0,T$n.width,T$n.height),T$E=T$y.contains(T$C,T$_);}return T$E;},T$n.runEvent=function(){var T$n=this._eventList.length;if(T$n){this.mouseEventTime=T$e.now();var T$C,T$_=0,T$E=0,T$y=0;try{for(;T$_<T$n;){var T$p=this._eventList[T$_];switch("mousemove"!==T$p.type&&(this._prePoint.x=this._prePoint.y=-1e6),T$p.type){case"mousedown":this._touchIDs[0]=this._id++,T$q._isTouchRespond?T$q._isTouchRespond=!1:(this._isLeftMouse=0===T$p.button,this.initEvent(T$p),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===T$p.button,this.initEvent(T$p),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-T$p.clientX)+Math.abs(this._prePoint.y-T$p.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=T$p.clientX,this._prePoint.y=T$p.clientY,this.initEvent(T$p),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":T$q._isTouchRespond=!0,this._isLeftMouse=!0;var T$c=T$p.changedTouches;for(T$E=0,T$y=T$c.length;T$E<T$y;T$E++)T$C=T$c[T$E],(T$q.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=T$C.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[T$C.identifier]=this._id++,this.initEvent(T$C,T$p),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":T$q._isTouchRespond=!0,this._isLeftMouse=!0;var T$l=T$p.changedTouches;for(T$E=0,T$y=T$l.length;T$E<T$y;T$E++)if(T$C=T$l[T$E],T$q.multiTouchEnabled||T$C.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(T$C,T$p);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null);}break;case"touchmove":var T$W=T$p.changedTouches;for(T$E=0,T$y=T$W.length;T$E<T$y;T$E++)T$C=T$W[T$E],(T$q.multiTouchEnabled||T$C.identifier==this._curTouchID)&&(this.initEvent(T$C,T$p),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(T$p);break;case"mouseout":T$m.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage));}T$_++;}}catch(T$n){throw this._eventList.length=0,T$n;}this._eventList.length=0;}},T$q.enabled=!0,T$q.multiTouchEnabled=!0,T$q._isTouchRespond=!1,T$q._isFirstTouch=!0,T$W(T$q,["instance",function(){return this.instance=new T$q();}]),T$q;}()),T$m=function(){function T$b(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new T$p();}T$J(T$b,"laya.events.TouchManager");var T$n=T$b.prototype;return T$n._clearTempArrs=function(){T$b._oldArr.length=0,T$b._newArr.length=0,T$b._tEleArr.length=0;},T$n.getTouchFromArr=function(T$n,T$C){var T$_,T$E,T$y=0;for(T$_=T$C.length,T$y=0;T$y<T$_;T$y++)if((T$E=T$C[T$y]).id==T$n)return T$E;return null;},T$n.removeTouchFromArr=function(T$n,T$C){var T$_=0;for(T$_=T$C.length-1;0<=T$_;T$_--)T$C[T$_].id==T$n&&T$C.splice(T$_,1);},T$n.createTouchO=function(T$n,T$C){var T$_;return(T$_=T$L.getItem("TouchData")||{}).id=T$C,T$_.tar=T$n,T$_;},T$n.onMouseDown=function(T$n,T$C,T$_){var T$E,T$y,T$p,T$c;(void 0===T$_&&(T$_=!1),this.enable)&&(T$E=this.getTouchFromArr(T$C,this.preOvers),T$p=this.getEles(T$n,null,T$b._tEleArr),T$E?T$E.tar=T$n:(T$y=this.createTouchO(T$n,T$C),this.preOvers.push(T$y)),T$e.onMobile&&this.sendEvents(T$p,"mouseover",T$C),T$c=T$_?this.preDowns:this.preRightDowns,(T$E=this.getTouchFromArr(T$C,T$c))?T$E.tar=T$n:(T$y=this.createTouchO(T$n,T$C),T$c.push(T$y)),this.sendEvents(T$p,T$_?"mousedown":"rightmousedown",T$C),this._clearTempArrs());},T$n.sendEvents=function(T$n,T$C,T$_){void 0===T$_&&(T$_=0);var T$E,T$y,T$p,T$c=0;for(T$E=T$n.length,this._event._stoped=!1,T$y=T$n[0],T$c=0;T$c<T$E;T$c++){if((T$p=T$n[T$c]).destroyed)return;if(T$p.event(T$C,this._event.setTo(T$C,T$p,T$y)),this._event._stoped)break;}},T$n.getEles=function(T$n,T$C,T$_){for(T$_?T$_.length=0:T$_=[];T$n&&T$n!=T$C;)T$_.push(T$n),T$n=T$n.parent;return T$_;},T$n.checkMouseOutAndOverOfMove=function(T$n,T$C,T$_){if(void 0===T$_&&(T$_=0),T$C!=T$n){var T$E,T$y,T$p=0,T$c=0;if(T$C.contains(T$n))T$y=this.getEles(T$n,T$C,T$b._tEleArr),this.sendEvents(T$y,"mouseover",T$_);else if(T$n.contains(T$C))T$y=this.getEles(T$C,T$n,T$b._tEleArr),this.sendEvents(T$y,"mouseout",T$_);else{var T$l,T$W;(T$y=T$b._tEleArr).length=0,T$l=this.getEles(T$C,null,T$b._oldArr),T$W=this.getEles(T$n,null,T$b._newArr),T$c=T$l.length;var T$q=0;for(T$p=0;T$p<T$c;T$p++){if(T$E=T$l[T$p],0<=(T$q=T$W.indexOf(T$E))){T$W.splice(T$q,T$W.length-T$q);break;}T$y.push(T$E);}0<T$y.length&&this.sendEvents(T$y,"mouseout",T$_),0<T$W.length&&this.sendEvents(T$W,"mouseover",T$_);}}},T$n.onMouseMove=function(T$n,T$C){var T$_,T$E;this.enable&&((T$_=this.getTouchFromArr(T$C,this.preOvers))?(this.checkMouseOutAndOverOfMove(T$n,T$_.tar),T$_.tar=T$n,T$E=this.getEles(T$n,null,T$b._tEleArr)):(T$E=this.getEles(T$n,null,T$b._tEleArr),this.sendEvents(T$E,"mouseover",T$C),this.preOvers.push(this.createTouchO(T$n,T$C))),this.sendEvents(T$E,"mousemove",T$C),this._clearTempArrs());},T$n.getLastOvers=function(){return(T$b._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,T$b._tEleArr):(T$b._tEleArr.push(T$T.stage),T$b._tEleArr);},T$n.stageMouseOut=function(){var T$n;T$n=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(T$n,"mouseout",0);},T$n.onMouseUp=function(T$n,T$C,T$_){if(void 0===T$_&&(T$_=!1),this.enable){var T$E,T$y,T$p,T$c,T$l,T$W,T$q=0,T$J=0,T$j=T$e.onMobile;if(T$y=this.getEles(T$n,null,T$b._tEleArr),this.sendEvents(T$y,T$_?"mouseup":"rightmouseup",T$C),T$W=T$_?this.preDowns:this.preRightDowns,T$E=this.getTouchFromArr(T$C,T$W)){var T$P,T$x=T$e.now();if(T$P=T$x-this._lastClickTime<300,this._lastClickTime=T$x,T$n==T$E.tar)T$l=T$y;else for(T$p=this.getEles(T$E.tar,null,T$b._oldArr),(T$l=T$b._newArr).length=0,T$J=T$p.length,T$q=0;T$q<T$J;T$q++)T$c=T$p[T$q],0<=T$y.indexOf(T$c)&&T$l.push(T$c);0<T$l.length&&this.sendEvents(T$l,T$_?"click":"rightclick",T$C),T$_&&T$P&&this.sendEvents(T$l,"doubleclick",T$C),this.removeTouchFromArr(T$C,T$W),T$E.tar=null,T$L.recover("TouchData",T$E);}else;(T$E=this.getTouchFromArr(T$C,this.preOvers))&&T$j&&((T$l=this.getEles(T$E.tar,null,T$l))&&0<T$l.length&&this.sendEvents(T$l,"mouseout",T$C),this.removeTouchFromArr(T$C,this.preOvers),T$E.tar=null,T$L.recover("TouchData",T$E)),this._clearTempArrs();}},T$b._oldArr=[],T$b._newArr=[],T$b._tEleArr=[],T$W(T$b,["I",function(){return this.I=new T$b();}]),T$b;}(),T$d=function(){function T$n(){this._action=null;}T$J(T$n,"laya.filters.Filter");var T$C=T$n.prototype;return T$T.imps(T$C,{"laya.filters.IFilter":!0}),T$C.callNative=function(T$n){},T$b(0,T$C,"type",function(){return-1;}),T$b(0,T$C,"action",function(){return this._action;}),T$n.BLUR=16,T$n.COLOR=32,T$n.GLOW=8,T$n._filterStart=null,T$n._filterEnd=null,T$n._EndTarget=null,T$n._recycleScope=null,T$n._filter=null,T$n._useSrc=null,T$n._endSrc=null,T$n._useOut=null,T$n._endOut=null,T$n;}(),T$O=function(){function T$n(){this.data=null;}T$J(T$n,"laya.filters.ColorFilterAction");var T$C=T$n.prototype;return T$T.imps(T$C,{"laya.filters.IFilterAction":!0}),T$C.apply=function(T$n){var T$C=T$n.ctx.ctx,T$_=T$n.ctx.ctx.canvas;if(0==T$_.width||0==T$_.height)return T$_;for(var T$E,T$y=T$C.getImageData(0,0,T$_.width,T$_.height),T$p=T$y.data,T$c=0,T$l=T$p.length;T$c<T$l;T$c+=4)T$E=this.getColor(T$p[T$c],T$p[T$c+1],T$p[T$c+2],T$p[T$c+3]),0!=T$p[T$c+3]&&(T$p[T$c]=T$E[0],T$p[T$c+1]=T$E[1],T$p[T$c+2]=T$E[2],T$p[T$c+3]=T$E[3]);return T$C.putImageData(T$y,0,0),T$n;},T$C.getColor=function(T$n,T$C,T$_,T$E){var T$y=[];if(this.data._mat&&this.data._alpha){var T$p=this.data._mat,T$c=this.data._alpha;T$y[0]=T$p[0]*T$n+T$p[1]*T$C+T$p[2]*T$_+T$p[3]*T$E+T$c[0],T$y[1]=T$p[4]*T$n+T$p[5]*T$C+T$p[6]*T$_+T$p[7]*T$E+T$c[1],T$y[2]=T$p[8]*T$n+T$p[9]*T$C+T$p[10]*T$_+T$p[11]*T$E+T$c[2],T$y[3]=T$p[12]*T$n+T$p[13]*T$C+T$p[14]*T$_+T$p[15]*T$E+T$c[3];}return T$y;},T$n;}(),T$A=(function(){function T$n(){}T$J(T$n,"laya.maths.Arith"),T$n.formatR=function(T$n){return T$n>Math.PI&&(T$n-=2*Math.PI),T$n<-Math.PI&&(T$n+=2*Math.PI),T$n;},T$n.isPOT=function(T$n,T$C){return 0<T$n&&0==(T$n&T$n-1)&&0<T$C&&0==(T$C&T$C-1);},T$n.setMatToArray=function(T$n,T$C){T$n.a,T$n.b,T$n.c,T$n.d,T$n.tx,T$n.ty,T$C[0]=T$n.a,T$C[1]=T$n.b,T$C[4]=T$n.c,T$C[5]=T$n.d,T$C[12]=T$n.tx,T$C[13]=T$n.ty;};}(),function(){function T$n(){this._controlPoints=[new T$Y(),new T$Y(),new T$Y()],this._calFun=this.getPoint2;}T$J(T$n,"laya.maths.Bezier");var T$C=T$n.prototype;return T$C._switchPoint=function(T$n,T$C){var T$_=this._controlPoints.shift();T$_.setTo(T$n,T$C),this._controlPoints.push(T$_);},T$C.getPoint2=function(T$n,T$C){var T$_=this._controlPoints[0],T$E=this._controlPoints[1],T$y=this._controlPoints[2],T$p=Math.pow(1-T$n,2)*T$_.x+2*T$n*(1-T$n)*T$E.x+Math.pow(T$n,2)*T$y.x,T$c=Math.pow(1-T$n,2)*T$_.y+2*T$n*(1-T$n)*T$E.y+Math.pow(T$n,2)*T$y.y;T$C.push(T$p,T$c);},T$C.getPoint3=function(T$n,T$C){var T$_=this._controlPoints[0],T$E=this._controlPoints[1],T$y=this._controlPoints[2],T$p=this._controlPoints[3],T$c=Math.pow(1-T$n,3)*T$_.x+3*T$E.x*T$n*(1-T$n)*(1-T$n)+3*T$y.x*T$n*T$n*(1-T$n)+T$p.x*Math.pow(T$n,3),T$l=Math.pow(1-T$n,3)*T$_.y+3*T$E.y*T$n*(1-T$n)*(1-T$n)+3*T$y.y*T$n*T$n*(1-T$n)+T$p.y*Math.pow(T$n,3);T$C.push(T$c,T$l);},T$C.insertPoints=function(T$n,T$C){var T$_,T$E=NaN;for(T$_=1/(T$n=0<T$n?T$n:5),T$E=0;T$E<=1;T$E+=T$_)this._calFun(T$E,T$C);},T$C.getBezierPoints=function(T$n,T$C,T$_){void 0===T$C&&(T$C=5),void 0===T$_&&(T$_=2);var T$E,T$y,T$p=0;if((T$E=T$n.length)<2*(T$_+1))return[];switch(T$y=[],T$_){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[];}for(;this._controlPoints.length<=T$_;)this._controlPoints.push(new T$Y());for(T$p=0;T$p<2*T$_;T$p+=2)this._switchPoint(T$n[T$p],T$n[T$p+1]);for(T$p=2*T$_;T$p<T$E;T$p+=2)this._switchPoint(T$n[T$p],T$n[T$p+1]),T$p/2%T$_==0&&this.insertPoints(T$C,T$y);return T$y;},T$W(T$n,["I",function(){return this.I=new T$n();}]),T$n;}()),T$k=function(){function T$q(){}return T$J(T$q,"laya.maths.GrahamScan"),T$q.multiply=function(T$n,T$C,T$_){return(T$n.x-T$_.x)*(T$C.y-T$_.y)-(T$C.x-T$_.x)*(T$n.y-T$_.y);},T$q.dis=function(T$n,T$C){return(T$n.x-T$C.x)*(T$n.x-T$C.x)+(T$n.y-T$C.y)*(T$n.y-T$C.y);},T$q._getPoints=function(T$n,T$C,T$_){for(void 0===T$C&&(T$C=!1),T$q._mPointList||(T$q._mPointList=[]);T$q._mPointList.length<T$n;)T$q._mPointList.push(new T$Y());return T$_||(T$_=[]),T$_.length=0,T$C?T$q.getFrom(T$_,T$q._mPointList,T$n):T$q.getFromR(T$_,T$q._mPointList,T$n),T$_;},T$q.getFrom=function(T$n,T$C,T$_){var T$E=0;for(T$E=0;T$E<T$_;T$E++)T$n.push(T$C[T$E]);return T$n;},T$q.getFromR=function(T$n,T$C,T$_){var T$E=0;for(T$E=0;T$E<T$_;T$E++)T$n.push(T$C.pop());return T$n;},T$q.pListToPointList=function(T$n,T$C){void 0===T$C&&(T$C=!1);var T$_=0,T$E=T$n.length/2,T$y=T$q._getPoints(T$E,T$C,T$q._tempPointList);for(T$_=0;T$_<T$E;T$_++)T$y[T$_].setTo(T$n[T$_+T$_],T$n[T$_+T$_+1]);return T$y;},T$q.pointListToPlist=function(T$n){var T$C,T$_=0,T$E=T$n.length,T$y=T$q._temPList;for(T$_=T$y.length=0;T$_<T$E;T$_++)T$C=T$n[T$_],T$y.push(T$C.x,T$C.y);return T$y;},T$q.scanPList=function(T$n){return T$z.copyArray(T$n,T$q.pointListToPlist(T$q.scan(T$q.pListToPointList(T$n,!0))));},T$q.scan=function(T$n){var T$C,T$_,T$E,T$y=0,T$p=0,T$c=0,T$l=T$n.length,T$W={};for((T$_=T$q._temArr).length=0,T$y=(T$l=T$n.length)-1;0<=T$y;T$y--)T$E=(T$C=T$n[T$y]).x+"_"+T$C.y,T$W.hasOwnProperty(T$E)||(T$W[T$E]=!0,T$_.push(T$C));for(T$l=T$_.length,T$z.copyArray(T$n,T$_),T$y=1;T$y<T$l;T$y++)(T$n[T$y].y<T$n[T$c].y||T$n[T$y].y==T$n[T$c].y&&T$n[T$y].x<T$n[T$c].x)&&(T$c=T$y);for(T$C=T$n[0],T$n[0]=T$n[T$c],T$n[T$c]=T$C,T$y=1;T$y<T$l-1;T$y++){for(T$p=(T$c=T$y)+1;T$p<T$l;T$p++)(0<T$q.multiply(T$n[T$p],T$n[T$c],T$n[0])||0==T$q.multiply(T$n[T$p],T$n[T$c],T$n[0])&&T$q.dis(T$n[0],T$n[T$p])<T$q.dis(T$n[0],T$n[T$c]))&&(T$c=T$p);T$C=T$n[T$y],T$n[T$y]=T$n[T$c],T$n[T$c]=T$C;}if((T$_=T$q._temArr).length=0,T$n.length<3)return T$z.copyArray(T$_,T$n);for(T$_.push(T$n[0],T$n[1],T$n[2]),T$y=3;T$y<T$l;T$y++){for(;2<=T$_.length&&0<=T$q.multiply(T$n[T$y],T$_[T$_.length-1],T$_[T$_.length-2]);)T$_.pop();T$n[T$y]&&T$_.push(T$n[T$y]);}return T$_;},T$q._mPointList=null,T$q._tempPointList=[],T$q._temPList=[],T$q._temArr=[],T$q;}(),T$t=function(){function T$y(){}return T$J(T$y,"laya.maths.MathUtil"),T$y.subtractVector3=function(T$n,T$C,T$_){T$_[0]=T$n[0]-T$C[0],T$_[1]=T$n[1]-T$C[1],T$_[2]=T$n[2]-T$C[2];},T$y.lerp=function(T$n,T$C,T$_){return T$n*(1-T$_)+T$C*T$_;},T$y.scaleVector3=function(T$n,T$C,T$_){T$_[0]=T$n[0]*T$C,T$_[1]=T$n[1]*T$C,T$_[2]=T$n[2]*T$C;},T$y.lerpVector3=function(T$n,T$C,T$_,T$E){var T$y=T$n[0],T$p=T$n[1],T$c=T$n[2];T$E[0]=T$y+T$_*(T$C[0]-T$y),T$E[1]=T$p+T$_*(T$C[1]-T$p),T$E[2]=T$c+T$_*(T$C[2]-T$c);},T$y.lerpVector4=function(T$n,T$C,T$_,T$E){var T$y=T$n[0],T$p=T$n[1],T$c=T$n[2],T$l=T$n[3];T$E[0]=T$y+T$_*(T$C[0]-T$y),T$E[1]=T$p+T$_*(T$C[1]-T$p),T$E[2]=T$c+T$_*(T$C[2]-T$c),T$E[3]=T$l+T$_*(T$C[3]-T$l);},T$y.slerpQuaternionArray=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){var T$l,T$W,T$q,T$J,T$j,T$P=T$n[T$C+0],T$x=T$n[T$C+1],T$b=T$n[T$C+2],T$r=T$n[T$C+3],T$m=T$_[T$E+0],T$d=T$_[T$E+1],T$a=T$_[T$E+2],T$O=T$_[T$E+3];return(T$W=T$P*T$m+T$x*T$d+T$b*T$a+T$r*T$O)<0&&(T$W=-T$W,T$m=-T$m,T$d=-T$d,T$a=-T$a,T$O=-T$O),T$j=1e-6<1-T$W?(T$l=Math.acos(T$W),T$q=Math.sin(T$l),T$J=Math.sin((1-T$y)*T$l)/T$q,Math.sin(T$y*T$l)/T$q):(T$J=1-T$y,T$y),T$p[T$c+0]=T$J*T$P+T$j*T$m,T$p[T$c+1]=T$J*T$x+T$j*T$d,T$p[T$c+2]=T$J*T$b+T$j*T$a,T$p[T$c+3]=T$J*T$r+T$j*T$O,T$p;},T$y.getRotation=function(T$n,T$C,T$_,T$E){return Math.atan2(T$E-T$C,T$_-T$n)/Math.PI*180;},T$y.sortBigFirst=function(T$n,T$C){return T$n==T$C?0:T$n<T$C?1:-1;},T$y.sortSmallFirst=function(T$n,T$C){return T$n==T$C?0:T$n<T$C?-1:1;},T$y.sortNumBigFirst=function(T$n,T$C){return parseFloat(T$C)-parseFloat(T$n);},T$y.sortNumSmallFirst=function(T$n,T$C){return parseFloat(T$n)-parseFloat(T$C);},T$y.sortByKey=function(T$_,T$n,T$C){var T$E;return void 0===T$n&&(T$n=!1),void 0===T$C&&(T$C=!0),T$E=T$n?T$C?T$y.sortNumBigFirst:T$y.sortBigFirst:T$C?T$y.sortNumSmallFirst:T$y.sortSmallFirst,function(T$n,T$C){return T$E(T$n[T$_],T$C[T$_]);};},T$y;}(),T$B=function(){function T$_(T$n,T$C,T$_,T$E,T$y,T$p){this.inPool=!1,this.bTransform=!1,void 0===T$n&&(T$n=1),void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0),void 0===T$E&&(T$E=1),void 0===T$y&&(T$y=0),void 0===T$p&&(T$p=0),this.a=T$n,this.b=T$C,this.c=T$_,this.d=T$E,this.tx=T$y,this.ty=T$p,this._checkTransform();}T$J(T$_,"laya.maths.Matrix");var T$n=T$_.prototype;return T$n.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this;},T$n._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d;},T$n.setTranslate=function(T$n,T$C){return this.tx=T$n,this.ty=T$C,this;},T$n.translate=function(T$n,T$C){return this.tx+=T$n,this.ty+=T$C,this;},T$n.scale=function(T$n,T$C){this.a*=T$n,this.d*=T$C,this.c*=T$n,this.b*=T$C,this.tx*=T$n,this.ty*=T$C,this.bTransform=!0;},T$n.rotate=function(T$n){var T$C=Math.cos(T$n),T$_=Math.sin(T$n),T$E=this.a,T$y=this.c,T$p=this.tx;this.a=T$E*T$C-this.b*T$_,this.b=T$E*T$_+this.b*T$C,this.c=T$y*T$C-this.d*T$_,this.d=T$y*T$_+this.d*T$C,this.tx=T$p*T$C-this.ty*T$_,this.ty=T$p*T$_+this.ty*T$C,this.bTransform=!0;},T$n.skew=function(T$n,T$C){var T$_=Math.tan(T$n),T$E=Math.tan(T$C),T$y=this.a,T$p=this.b;return this.a+=T$E*this.c,this.b+=T$E*this.d,this.c+=T$_*T$y,this.d+=T$_*T$p,this;},T$n.invertTransformPoint=function(T$n){var T$C=this.a,T$_=this.b,T$E=this.c,T$y=this.d,T$p=this.tx,T$c=T$C*T$y-T$_*T$E,T$l=T$y/T$c,T$W=-T$_/T$c,T$q=-T$E/T$c,T$J=T$C/T$c,T$j=(T$E*this.ty-T$y*T$p)/T$c,T$P=-(T$C*this.ty-T$_*T$p)/T$c;return T$n.setTo(T$l*T$n.x+T$q*T$n.y+T$j,T$W*T$n.x+T$J*T$n.y+T$P);},T$n.transformPoint=function(T$n){return T$n.setTo(this.a*T$n.x+this.c*T$n.y+this.tx,this.b*T$n.x+this.d*T$n.y+this.ty);},T$n.transformPointN=function(T$n){return T$n.setTo(this.a*T$n.x+this.c*T$n.y,this.b*T$n.x+this.d*T$n.y);},T$n.transformPointArray=function(T$n,T$C){for(var T$_=T$n.length,T$E=0;T$E<T$_;T$E+=2){var T$y=T$n[T$E],T$p=T$n[T$E+1];T$C[T$E]=this.a*T$y+this.c*T$p+this.tx,T$C[T$E+1]=this.b*T$y+this.d*T$p+this.ty;}return T$C;},T$n.transformPointArrayScale=function(T$n,T$C){for(var T$_=T$n.length,T$E=0;T$E<T$_;T$E+=2){var T$y=T$n[T$E],T$p=T$n[T$E+1];T$C[T$E]=this.a*T$y+this.c*T$p,T$C[T$E+1]=this.b*T$y+this.d*T$p;}return T$C;},T$n.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b);},T$n.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d);},T$n.invert=function(){var T$n=this.a,T$C=this.b,T$_=this.c,T$E=this.d,T$y=this.tx,T$p=T$n*T$E-T$C*T$_;return this.a=T$E/T$p,this.b=-T$C/T$p,this.c=-T$_/T$p,this.d=T$n/T$p,this.tx=(T$_*this.ty-T$E*T$y)/T$p,this.ty=-(T$n*this.ty-T$C*T$y)/T$p,this;},T$n.setTo=function(T$n,T$C,T$_,T$E,T$y,T$p){return this.a=T$n,this.b=T$C,this.c=T$_,this.d=T$E,this.tx=T$y,this.ty=T$p,this;},T$n.concat=function(T$n){var T$C=this.a,T$_=this.c,T$E=this.tx;return this.a=T$C*T$n.a+this.b*T$n.c,this.b=T$C*T$n.b+this.b*T$n.d,this.c=T$_*T$n.a+this.d*T$n.c,this.d=T$_*T$n.b+this.d*T$n.d,this.tx=T$E*T$n.a+this.ty*T$n.c+T$n.tx,this.ty=T$E*T$n.b+this.ty*T$n.d+T$n.ty,this;},T$n.scaleEx=function(T$n,T$C){var T$_=this.a,T$E=this.b,T$y=this.c,T$p=this.d;0!==T$E||0!==T$y?(this.a=T$n*T$_,this.b=T$n*T$E,this.c=T$C*T$y):(this.a=T$n*T$_,this.b=0*T$p,this.c=0*T$_),this.d=T$C*T$p,this.bTransform=!0;},T$n.rotateEx=function(T$n){var T$C=Math.cos(T$n),T$_=Math.sin(T$n),T$E=this.a,T$y=this.b,T$p=this.c,T$c=this.d;0!==T$y||0!==T$p?(this.a=T$C*T$E+T$_*T$p,this.b=T$C*T$y+T$_*T$c,this.c=-T$_*T$E+T$C*T$p,this.d=-T$_*T$y+T$C*T$c):(this.a=T$C*T$E,this.b=T$_*T$c,this.c=-T$_*T$E,this.d=T$C*T$c),this.bTransform=!0;},T$n.clone=function(){var T$n=T$_.create();return T$n.a=this.a,T$n.b=this.b,T$n.c=this.c,T$n.d=this.d,T$n.tx=this.tx,T$n.ty=this.ty,T$n.bTransform=this.bTransform,T$n;},T$n.copyTo=function(T$n){return T$n.a=this.a,T$n.b=this.b,T$n.c=this.c,T$n.d=this.d,T$n.tx=this.tx,T$n.ty=this.ty,T$n.bTransform=this.bTransform,T$n;},T$n.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty;},T$n.destroy=function(){if(!this.inPool){var T$n=T$_._cache;this.inPool=!0,T$n._length||(T$n._length=0),(T$n[T$n._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1;}},T$_.mul=function(T$n,T$C,T$_){var T$E=T$n.a,T$y=T$n.b,T$p=T$n.c,T$c=T$n.d,T$l=T$n.tx,T$W=T$n.ty,T$q=T$C.a,T$J=T$C.b,T$j=T$C.c,T$P=T$C.d,T$x=T$C.tx,T$b=T$C.ty;return 0!==T$J||0!==T$j?(T$_.a=T$E*T$q+T$y*T$j,T$_.b=T$E*T$J+T$y*T$P,T$_.c=T$p*T$q+T$c*T$j,T$_.d=T$p*T$J+T$c*T$P,T$_.tx=T$q*T$l+T$j*T$W+T$x,T$_.ty=T$J*T$l+T$P*T$W+T$b):(T$_.a=T$E*T$q,T$_.b=T$y*T$P,T$_.c=T$p*T$q,T$_.d=T$c*T$P,T$_.tx=T$q*T$l+T$x,T$_.ty=T$P*T$W+T$b),T$_;},T$_.mul16=function(T$n,T$C,T$_){var T$E=T$n.a,T$y=T$n.b,T$p=T$n.c,T$c=T$n.d,T$l=T$n.tx,T$W=T$n.ty,T$q=T$C.a,T$J=T$C.b,T$j=T$C.c,T$P=T$C.d,T$x=T$C.tx,T$b=T$C.ty;return 0!==T$J||0!==T$j?(T$_[0]=T$E*T$q+T$y*T$j,T$_[1]=T$E*T$J+T$y*T$P,T$_[4]=T$p*T$q+T$c*T$j,T$_[5]=T$p*T$J+T$c*T$P,T$_[12]=T$q*T$l+T$j*T$W+T$x,T$_[13]=T$J*T$l+T$P*T$W+T$b):(T$_[0]=T$E*T$q,T$_[1]=T$y*T$P,T$_[4]=T$p*T$q,T$_[5]=T$c*T$P,T$_[12]=T$q*T$l+T$x,T$_[13]=T$P*T$W+T$b),T$_;},T$_.mulPre=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){var T$W=T$n.a,T$q=T$n.b,T$J=T$n.c,T$j=T$n.d,T$P=T$n.tx,T$x=T$n.ty;return 0!==T$_||0!==T$E?(T$l.a=T$W*T$C+T$q*T$E,T$l.b=T$W*T$_+T$q*T$y,T$l.c=T$J*T$C+T$j*T$E,T$l.d=T$J*T$_+T$j*T$y,T$l.tx=T$C*T$P+T$E*T$x+T$p,T$l.ty=T$_*T$P+T$y*T$x+T$c):(T$l.a=T$W*T$C,T$l.b=T$q*T$y,T$l.c=T$J*T$C,T$l.d=T$j*T$y,T$l.tx=T$C*T$P+T$p,T$l.ty=T$y*T$x+T$c),T$l;},T$_.mulPos=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){var T$W=T$n.a,T$q=T$n.b,T$J=T$n.c,T$j=T$n.d,T$P=T$n.tx,T$x=T$n.ty;return 0!==T$q||0!==T$J?(T$l.a=T$C*T$W+T$_*T$J,T$l.b=T$C*T$q+T$_*T$j,T$l.c=T$E*T$W+T$y*T$J,T$l.d=T$E*T$q+T$y*T$j,T$l.tx=T$W*T$p+T$J*T$c+T$P,T$l.ty=T$q*T$p+T$j*T$c+T$x):(T$l.a=T$C*T$W,T$l.b=T$_*T$j,T$l.c=T$E*T$W,T$l.d=T$y*T$j,T$l.tx=T$W*T$p+T$P,T$l.ty=T$j*T$c+T$x),T$l;},T$_.preMul=function(T$n,T$C,T$_){var T$E=T$n.a,T$y=T$n.b,T$p=T$n.c,T$c=T$n.d,T$l=T$C.a,T$W=T$C.b,T$q=T$C.c,T$J=T$C.d,T$j=T$C.tx,T$P=T$C.ty;return T$_.a=T$l*T$E,T$_.b=T$_.c=0,T$_.d=T$J*T$c,T$_.tx=T$j*T$E+T$n.tx,T$_.ty=T$P*T$c+T$n.ty,0===T$W&&0===T$q&&0===T$y&&0===T$p||(T$_.a+=T$W*T$p,T$_.d+=T$q*T$y,T$_.b+=T$l*T$y+T$W*T$c,T$_.c+=T$q*T$E+T$J*T$p,T$_.tx+=T$P*T$p,T$_.ty+=T$j*T$y),T$_;},T$_.preMulXY=function(T$n,T$C,T$_,T$E){var T$y=T$n.a,T$p=T$n.b,T$c=T$n.c,T$l=T$n.d;return T$E.a=T$y,T$E.b=T$p,T$E.c=T$c,T$E.d=T$l,T$E.tx=T$C*T$y+T$n.tx+T$_*T$c,T$E.ty=T$_*T$l+T$n.ty+T$C*T$p,T$E;},T$_.create=function(){var T$n=T$_._cache,T$C=T$n._length?T$n[--T$n._length]:new T$_();return T$C.inPool=!1,T$C;},T$_.EMPTY=new T$_(),T$_.TEMP=new T$_(),T$_._cache=[],T$_;}(),T$Y=function(){function T$n(T$n,T$C){void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=0),this.x=T$n,this.y=T$C;}T$J(T$n,"laya.maths.Point");var T$C=T$n.prototype;return T$C.setTo=function(T$n,T$C){return this.x=T$n,this.y=T$C,this;},T$C.distance=function(T$n,T$C){return Math.sqrt((this.x-T$n)*(this.x-T$n)+(this.y-T$C)*(this.y-T$C));},T$C.toString=function(){return this.x+","+this.y;},T$C.normalize=function(){var T$n=Math.sqrt(this.x*this.x+this.y*this.y);if(0<T$n){var T$C=1/T$n;this.x*=T$C,this.y*=T$C;}},T$n.TEMP=new T$n(),T$n.EMPTY=new T$n(),T$n;}(),T$s=function(){function T$q(T$n,T$C,T$_,T$E){void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0),void 0===T$E&&(T$E=0),this.x=T$n,this.y=T$C,this.width=T$_,this.height=T$E;}T$J(T$q,"laya.maths.Rectangle");var T$n=T$q.prototype;return T$n.setTo=function(T$n,T$C,T$_,T$E){return this.x=T$n,this.y=T$C,this.width=T$_,this.height=T$E,this;},T$n.copyFrom=function(T$n){return this.x=T$n.x,this.y=T$n.y,this.width=T$n.width,this.height=T$n.height,this;},T$n.contains=function(T$n,T$C){return!(this.width<=0||this.height<=0)&&T$n>=this.x&&T$n<this.right&&T$C>=this.y&&T$C<this.bottom;},T$n.intersects=function(T$n){return!(T$n.x>this.x+this.width||T$n.x+T$n.width<this.x||T$n.y>this.y+this.height||T$n.y+T$n.height<this.y);},T$n.intersection=function(T$n,T$C){return this.intersects(T$n)?(T$C||(T$C=new T$q()),T$C.x=Math.max(this.x,T$n.x),T$C.y=Math.max(this.y,T$n.y),T$C.width=Math.min(this.right,T$n.right)-T$C.x,T$C.height=Math.min(this.bottom,T$n.bottom)-T$C.y,T$C):null;},T$n.union=function(T$n,T$C){return T$C||(T$C=new T$q()),this.clone(T$C),T$n.width<=0||T$n.height<=0?T$C:(T$C.addPoint(T$n.x,T$n.y),T$C.addPoint(T$n.right,T$n.bottom),this);},T$n.clone=function(T$n){return T$n||(T$n=new T$q()),T$n.x=this.x,T$n.y=this.y,T$n.width=this.width,T$n.height=this.height,T$n;},T$n.toString=function(){return this.x+","+this.y+","+this.width+","+this.height;},T$n.equals=function(T$n){return!(!T$n||T$n.x!==this.x||T$n.y!==this.y||T$n.width!==this.width||T$n.height!==this.height);},T$n.addPoint=function(T$n,T$C){return this.x>T$n&&(this.width+=this.x-T$n,this.x=T$n),this.y>T$C&&(this.height+=this.y-T$C,this.y=T$C),this.width<T$n-this.x&&(this.width=T$n-this.x),this.height<T$C-this.y&&(this.height=T$C-this.y),this;},T$n._getBoundPoints=function(){var T$n=T$q._temB;return(T$n.length=0)==this.width||0==this.height||T$n.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),T$n;},T$n.isEmpty=function(){return this.width<=0||this.height<=0;},T$b(0,T$n,"right",function(){return this.x+this.width;}),T$b(0,T$n,"bottom",function(){return this.y+this.height;}),T$q._getBoundPointS=function(T$n,T$C,T$_,T$E){var T$y=T$q._temA;return(T$y.length=0)==T$_||0==T$E||T$y.push(T$n,T$C,T$n+T$_,T$C,T$n,T$C+T$E,T$n+T$_,T$C+T$E),T$y;},T$q._getWrapRec=function(T$n,T$C){if(!T$n||T$n.length<1)return T$C?T$C.setTo(0,0,0,0):T$q.TEMP.setTo(0,0,0,0);T$C=T$C||new T$q();var T$_,T$E,T$y,T$p,T$c,T$l=T$n.length,T$W=T$Y.TEMP;for(T$y=T$c=-(T$E=T$p=99999),T$_=0;T$_<T$l;T$_+=2)T$W.x=T$n[T$_],T$W.y=T$n[T$_+1],T$E=T$E<T$W.x?T$E:T$W.x,T$p=T$p<T$W.y?T$p:T$W.y,T$y=T$y>T$W.x?T$y:T$W.x,T$c=T$c>T$W.y?T$c:T$W.y;return T$C.setTo(T$E,T$p,T$y-T$E,T$c-T$p);},T$q.EMPTY=new T$q(),T$q.TEMP=new T$q(),T$q._temB=[],T$q._temA=[],T$q;}(),T$M=function(){function T$W(){}return T$J(T$W,"laya.media.SoundManager"),T$b(1,T$W,"useAudioMusic",function(){return T$W._useAudioMusic;},function(T$n){T$W._useAudioMusic=T$n,T$W._musicClass=T$n?T$_n:null;}),T$b(1,T$W,"autoStopMusic",function(){return T$W._autoStopMusic;},function(T$n){T$T.stage.off("blur",null,T$W._stageOnBlur),T$T.stage.off("focus",null,T$W._stageOnFocus),T$T.stage.off("visibilitychange",null,T$W._visibilityChange),(T$W._autoStopMusic=T$n)&&(T$T.stage.on("blur",null,T$W._stageOnBlur),T$T.stage.on("focus",null,T$W._stageOnFocus),T$T.stage.on("visibilitychange",null,T$W._visibilityChange));}),T$b(1,T$W,"muted",function(){return T$W._muted;},function(T$n){T$n!=T$W._muted&&(T$n&&T$W.stopAllSound(),T$W.musicMuted=T$n,T$W._muted=T$n);}),T$b(1,T$W,"musicMuted",function(){return T$W._musicMuted;},function(T$n){T$n!=T$W._musicMuted&&(T$n?(T$W._tMusic&&T$W._musicChannel&&!T$W._musicChannel.isStopped?T$W._musicChannel.pause():T$W._musicChannel=null,T$W._musicMuted=T$n):(T$W._musicMuted=T$n,T$W._tMusic&&T$W._musicChannel&&T$W._musicChannel.resume()));}),T$b(1,T$W,"soundMuted",function(){return T$W._soundMuted;},function(T$n){T$W._soundMuted=T$n;}),T$W.addChannel=function(T$n){0<=T$W._channels.indexOf(T$n)||(T$W._channels.push(T$n),T$W.autoReleaseSound&&0!=T$W._notUsedCount&&T$W._notUsedUrls[T$n.url]&&(delete T$W._notUsedUrls[T$n.url],0==--T$W._notUsedCount&&T$T.timer.clear(T$W,T$W.disposeSoundIfNotUsed)));},T$W.removeChannel=function(T$n){var T$C=T$W._channels,T$_=T$C.indexOf(T$n);if(-1!=T$_&&(T$C.splice(T$_,1),T$W.autoReleaseSound)){var T$E=T$n.url,T$y=T$W.defaultIntervals[T$E]||2e4;if(0<T$y){var T$p=!0;for(T$_=T$C.length-1;0<=T$_;T$_--)if(T$C[T$_].url==T$E){T$p=!1;break;}T$p&&(T$W._notUsedUrls[T$E]=Date.now()+T$y,0==T$W._notUsedCount++&&T$T.timer.loop(1e4,T$W,T$W.disposeSoundIfNotUsed));}}},T$W.disposeSoundIfNotUsed=function(){var T$n=T$W._notUsedUrls;if(0!=T$W._notUsedCount){var T$C=Date.now();for(var T$_ in T$n)T$C>=T$n[T$_]&&(delete T$n[T$_],--T$W._notUsedCount,T$W.destroySound(T$_));if(0!=T$W._notUsedCount)return;}T$T.timer.clear(T$W,T$W.disposeSoundIfNotUsed);},T$W._visibilityChange=function(){T$T.stage.isVisibility?T$W._stageOnFocus():T$W._stageOnBlur();},T$W._stageOnBlur=function(){T$W._isActive=!1,T$W._musicChannel&&(T$W._musicChannel.isStopped||(T$W._blurPaused=!0,T$W._musicChannel.pause())),T$W.stopAllSound(),T$T.stage.once("mousedown",null,T$W._stageOnFocus);},T$W._recoverWebAudio=function(){T$pn.ctx&&"running"!=T$pn.ctx.state&&T$pn.ctx.resume&&T$pn.ctx.resume();},T$W._stageOnFocus=function(){if(T$W._isActive=!0,T$W._recoverWebAudio(),T$T.stage.off("mousedown",null,T$W._stageOnFocus),T$W._blurPaused){var T$n=T$W._musicChannel;T$n&&T$W._music&&T$n.isStopped&&(T$W._blurPaused=!1,T$W._music._disposed?T$W.playMusic(T$n.url,T$n.loops,T$n.startHandler,T$n.completeHandler,T$n.startTime):T$n.audioBuffer?T$n.resume():T$W._music.play(T$n.startTime,T$n.loops,T$n.startHandler,T$n));}},T$W.playSound=function(T$n,T$C,T$_,T$E,T$y,T$p){if(void 0===T$C&&(T$C=1),void 0===T$p&&(T$p=0),!T$n)return null;if(T$W._muted)return null;if(T$W._recoverWebAudio(),T$n==T$W._tMusic){if(T$W._musicMuted)return null;}else{if(!T$W._isActive)return null;if(T$W._soundMuted)return null;}var T$c,T$l=T$W._pool[T$n];return T$y||(T$y=T$W._soundClass),T$l||((T$l=new T$y()).load(T$n),T$W._pool[T$n]=T$l),(T$c=T$l.play(T$p,T$C,T$_))?(T$n==T$W._tMusic&&(T$W._music=T$l,T$W._isActive||(T$W._blurPaused=!0,T$c.pause())),T$c.url=T$n,T$c.volume=T$n==T$W._tMusic?T$W.musicVolume:T$W.soundVolume,T$c.completeHandler=T$E,T$c):null;},T$W.destroySound=function(T$n){var T$C=T$W._pool[T$n];T$C&&(delete T$W._pool[T$n],T$C.dispose());},T$W.playMusic=function(T$n,T$C,T$_,T$E,T$y){return void 0===T$C&&(T$C=0),void 0===T$y&&(T$y=0),T$W._tMusic=T$n,T$W._musicChannel&&T$W._musicChannel.stop(),T$W._musicChannel=T$W.playSound(T$n,T$C,T$_,T$E,null,T$y);},T$W.stopSound=function(T$n){for(var T$C,T$_=T$W._channels.length-1;0<=T$_;T$_--)(T$C=T$W._channels[T$_]).url==T$n&&T$C.stop();},T$W.stopAll=function(){T$W._tMusic=null;var T$n=0;for(T$n=T$W._channels.length-1;0<=T$n;T$n--)T$W._channels[T$n].stop();},T$W.stopAllSound=function(){var T$n,T$C=0;for(T$C=T$W._channels.length-1;0<=T$C;T$C--)(T$n=T$W._channels[T$C]).url!=T$W._tMusic&&T$n.stop();},T$W.stopMusic=function(){T$W._musicChannel&&T$W._musicChannel.stop(),T$W._tMusic=null;},T$W.setSoundVolume=function(T$n,T$C){if(T$C)T$W._setVolume(T$C,T$n);else{T$W.soundVolume=T$n;var T$_,T$E=0;for(T$E=T$W._channels.length-1;0<=T$E;T$E--)(T$_=T$W._channels[T$E]).url!=T$W._tMusic&&(T$_.volume=T$n);}},T$W.setMusicVolume=function(T$n){T$W.musicVolume=T$n,T$W._setVolume(T$W._tMusic,T$n);},T$W._setVolume=function(T$n,T$C){for(var T$_,T$E=T$W._channels.length-1;0<=T$E;T$E--)(T$_=T$W._channels[T$E]).url==T$n&&(T$_.volume=T$C);},T$W.musicVolume=1,T$W.soundVolume=1,T$W.playbackRate=1,T$W._useAudioMusic=!0,T$W._muted=!1,T$W._soundMuted=!1,T$W._musicMuted=!1,T$W._tMusic=null,T$W._musicChannel=null,T$W._music=null,T$W._channels=[],T$W._autoStopMusic=!1,T$W._blurPaused=!1,T$W._isActive=!0,T$W._soundClass=null,T$W._musicClass=null,T$W.autoReleaseSound=!0,T$W._pool={},T$W.defaultIntervals={},T$W._notUsedUrls={},T$W._notUsedCount=0,T$W;}(),T$N=function(){var T$n;function T$_(){}return T$J(T$_,"laya.net.LocalStorage"),T$_.__init__=function(){T$_._baseClass||(T$_._baseClass=T$n).init(),T$_.items=T$_._baseClass.items,T$_.support=T$_._baseClass.support;},T$_.setItem=function(T$n,T$C){T$_._baseClass.setItem(T$n,T$C);},T$_.getItem=function(T$n){return T$_._baseClass.getItem(T$n);},T$_.setJSON=function(T$n,T$C){T$_._baseClass.setJSON(T$n,T$C);},T$_.getJSON=function(T$n){return T$_._baseClass.getJSON(T$n);},T$_.removeItem=function(T$n){T$_._baseClass.removeItem(T$n);},T$_.clear=function(){T$_._baseClass.clear();},T$_._baseClass=null,T$_.items=null,T$_.support=!1,T$_.__init$=function(){T$n=function(){function T$_(){}return T$J(T$_,""),T$_.init=function(){try{T$_.support=!0,T$_.items=T$c.localStorage,T$_.setItem("laya","1"),T$_.removeItem("laya");}catch(T$n){T$_.support=!1;}T$_.support||console.log("LocalStorage is not supprot or browser is private mode.");},T$_.setItem=function(T$n,T$C){try{T$_.support&&T$_.items.setItem(T$n,T$C);}catch(T$n){console.warn("set localStorage failed",T$n);}},T$_.getItem=function(T$n){return T$_.support?T$_.items.getItem(T$n):null;},T$_.setJSON=function(T$n,T$C){try{T$_.support&&T$_.items.setItem(T$n,JSON.stringify(T$C));}catch(T$n){console.warn("set localStorage failed",T$n);}},T$_.getJSON=function(T$n){return JSON.parse(T$_.support?T$_.items.getItem(T$n):null);},T$_.removeItem=function(T$n){T$_.support&&T$_.items.removeItem(T$n);},T$_.clear=function(){T$_.support&&T$_.items.clear();},T$_.items=null,T$_.support=!1,T$_;}();},T$_;}(),T$V=(function(){function T$E(){}T$J(T$E,"laya.net.ResourceVersion"),T$E.enable=function(T$n,T$C,T$_){void 0===T$_&&(T$_=2),laya.net.ResourceVersion.type=T$_,T$T.loader.load(T$n,T$a.create(null,T$E.onManifestLoaded,[T$C]),null,"json"),T$g.customFormat=T$E.addVersionPrefix;},T$E.onManifestLoaded=function(T$n,T$C){T$E.manifest=T$C,T$n.run(),T$C||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。");},T$E.addVersionPrefix=function(T$n){return T$E.manifest&&T$E.manifest[T$n]?2==T$E.type?T$E.manifest[T$n]:T$E.manifest[T$n]+"/"+T$n:T$n;},T$E.FOLDER_VERSION=1,T$E.FILENAME_VERSION=2,T$E.manifest=null,T$E.type=1;}(),function(){function T$n(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null;}T$J(T$n,"laya.net.TTFLoader");var T$C=T$n.prototype;return T$C.load=function(T$n){var T$C=(this._url=T$n).split(".ttf")[0].split("/");this.fontName=T$C[T$C.length-1],T$e.window.conch?this._loadConch():T$e.window.FontFace?this._loadWithFontFace():this._loadWithCSS();},T$C._loadConch=function(){this._http=new T$cn(),this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer");},T$C._onHttpLoaded=function(T$n){T$e.window.conch.setFontFaceFromBuffer(this.fontName,T$n),this._clearHttp(),this._complete();},T$C._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null);},T$C._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null);},T$C._complete=function(){T$T.timer.clear(this,this._complete),T$T.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null);},T$C._checkComplete=function(){T$w.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete();},T$C._loadWithFontFace=function(){var T$n=new T$e.window.FontFace(this.fontName,"url('"+this._url+"')");T$e.window.document.fonts.add(T$n);var T$C=this;T$n.loaded.then(function(){T$C._complete();}),T$n.load();},T$C._createDiv=function(){this._div=T$e.createElement("div"),this._div.innerHTML="laya";var T$n=this._div.style;T$n.fontFamily=this.fontName,T$n.position="absolute",T$n.left="-100px",T$n.top="-100px",T$e.document.body.appendChild(this._div);},T$C._loadWithCSS=function(){var T$n=this,T$C=T$e.createElement("style");T$C.type="text/css",T$e.document.body.appendChild(T$C),T$C.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=T$w.measureText("LayaTTFFont",this._fontTxt).width;var T$_=this;T$C.onload=function(){T$T.timer.once(1e4,T$_,T$n._complete);},T$T.timer.loop(20,this,this._checkComplete),this._createDiv();},T$n._testString="LayaTTFFont",T$n;}()),T$g=function(){function T$E(T$n){this._url=null,this._path=null,this._url=T$E.formatURL(T$n),this._path=T$E.getPath(T$n);}T$J(T$E,"laya.net.URL");var T$n=T$E.prototype;return T$b(0,T$n,"path",function(){return this._path;}),T$b(0,T$n,"url",function(){return this._url;}),T$E.formatURL=function(T$n,T$C){if(!T$n)return"null path";if(0<T$n.indexOf(":"))return T$n;null!=T$E.customFormat&&(T$n=T$E.customFormat(T$n,T$C));var T$_=T$n.charAt(0);if("."===T$_)return T$E.formatRelativePath((T$C||T$E.basePath)+T$n);if("~"===T$_)return T$E.rootPath+T$n.substring(1);if("d"===T$_){if(0===T$n.indexOf("data:image"))return T$n;}else if("/"===T$_)return T$n;return(T$C||T$E.basePath)+T$n;},T$E.formatRelativePath=function(T$n){for(var T$C=T$n.split("/"),T$_=0,T$E=T$C.length;T$_<T$E;T$_++)".."==T$C[T$_]&&(T$C.splice(T$_-1,2),T$_-=2);return T$C.join("/");},T$E.isAbsolute=function(T$n){return 0<T$n.indexOf(":")||"/"==T$n.charAt(0);},T$E.getPath=function(T$n){var T$C=T$n.lastIndexOf("/");return 0<T$C?T$n.substr(0,T$C+1):"";},T$E.getFileName=function(T$n){var T$C=T$n.lastIndexOf("/");return 0<T$C?T$n.substr(T$C+1):T$n;},T$E.version={},T$E.basePath="",T$E.rootPath="",T$E.customFormat=function(T$n){var T$C=T$E.version[T$n];return!T$H.isConchApp&&T$C&&(T$n+="?v="+T$C),T$n;},T$E;}(),T$H=function(){function T$y(T$n,T$C){this._timeId=0;var T$_=T$y._mainCanvas.source.style;T$_.position="absolute",T$_.top=T$_.left="0px",T$_.background="#000000",T$y._mainCanvas.source.id="layaCanvas";var T$E=laya.renders.Render.isWebGL;T$y._mainCanvas.source.width=T$n,T$y._mainCanvas.source.height=T$C,T$E&&T$y.WebGL.init(T$y._mainCanvas,T$n,T$C),T$e.container.appendChild(T$y._mainCanvas.source),(T$y._context=new T$X(T$n,T$C,T$E?null:T$y._mainCanvas)).ctx.setIsMainContext(),T$e.window.requestAnimationFrame(function T$n(T$C){T$e.window.requestAnimationFrame(T$n);T$T.stage._loop();}),T$T.stage.on("visibilitychange",this,this._onVisibilitychange);}T$J(T$y,"laya.renders.Render");var T$n=T$y.prototype;return T$n._onVisibilitychange=function(){T$T.stage.isVisibility?0!=this._timeId&&T$e.window.clearInterval(this._timeId):this._timeId=T$e.window.setInterval(this._enterFrame,1e3);},T$n._enterFrame=function(T$n){T$T.stage._loop();},T$b(1,T$y,"context",function(){return T$y._context;}),T$b(1,T$y,"canvas",function(){return T$y._mainCanvas.source;}),T$y._context=null,T$y._mainCanvas=null,T$y.WebGL=null,T$y.isConchNode=!1,T$y.isConchApp=!1,T$y.isConchWebGL=!1,T$y.isWebGL=!1,T$y.is3DMode=!1,T$y.optimizeTextureMemory=function(T$n,T$C){return!0;},T$y.__init$=function(){T$c.ConchRenderType=T$c.ConchRenderType||1,T$c.ConchRenderType|=T$c.conch?4:0,T$y.isConchNode=5==(5&T$c.ConchRenderType),T$y.isConchApp=4==(4&T$c.ConchRenderType),T$y.isConchWebGL=6==T$c.ConchRenderType;},T$y;}(),T$X=function(){function T$c(T$n,T$C,T$_){this.x=0,this.y=0,this._drawTexture=function(T$n,T$C,T$_){T$_[0].loaded&&this.ctx.drawTexture(T$_[0],T$_[1],T$_[2],T$_[3],T$_[4],T$n,T$C);},this._fillTexture=function(T$n,T$C,T$_){T$_[0].loaded&&this.ctx.fillTexture(T$_[0],T$_[1]+T$n,T$_[2]+T$C,T$_[3],T$_[4],T$_[5],T$_[6],T$_[7]);},this._drawTextureWithTransform=function(T$n,T$C,T$_){T$_[0].loaded&&this.ctx.drawTextureWithTransform(T$_[0],T$_[1],T$_[2],T$_[3],T$_[4],T$_[5],T$n,T$C,T$_[6]);},this._fillQuadrangle=function(T$n,T$C,T$_){this.ctx.fillQuadrangle(T$_[0],T$_[1],T$_[2],T$_[3],T$_[4]);},this._drawRect=function(T$n,T$C,T$_){var T$E=this.ctx;null!=T$_[4]&&(T$E.fillStyle=T$_[4],T$E.fillRect(T$n+T$_[0],T$C+T$_[1],T$_[2],T$_[3],null)),null!=T$_[5]&&(T$E.strokeStyle=T$_[5],T$E.lineWidth=T$_[6],T$E.strokeRect(T$n+T$_[0],T$C+T$_[1],T$_[2],T$_[3],T$_[6]));},this._drawPie=function(T$n,T$C,T$_){var T$E=this.ctx;T$H.isWebGL&&T$E.setPathId(T$_[8]),T$E.beginPath(),T$H.isWebGL?(T$E.movePath(T$_[0]+T$n,T$_[1]+T$C),T$E.moveTo(0,0)):T$E.moveTo(T$n+T$_[0],T$C+T$_[1]),T$E.arc(T$n+T$_[0],T$C+T$_[1],T$_[2],T$_[3],T$_[4]),T$E.closePath(),this._fillAndStroke(T$_[5],T$_[6],T$_[7],!0);},this._clipRect=function(T$n,T$C,T$_){this.ctx.clipRect(T$n+T$_[0],T$C+T$_[1],T$_[2],T$_[3]);},this._fillRect=function(T$n,T$C,T$_){this.ctx.fillRect(T$n+T$_[0],T$C+T$_[1],T$_[2],T$_[3],T$_[4]);},this._drawCircle=function(T$n,T$C,T$_){var T$E=this.ctx;T$H.isWebGL&&T$E.setPathId(T$_[6]),T$h.drawCall++,T$E.beginPath(),T$H.isWebGL&&T$E.movePath(T$_[0]+T$n,T$_[1]+T$C),T$E.arc(T$_[0]+T$n,T$_[1]+T$C,T$_[2],0,T$c.PI2),T$E.closePath(),this._fillAndStroke(T$_[3],T$_[4],T$_[5],!0);},this._fillCircle=function(T$n,T$C,T$_){T$h.drawCall++;var T$E=this.ctx;T$E.beginPath(),T$E.fillStyle=T$_[3],T$E.arc(T$_[0]+T$n,T$_[1]+T$C,T$_[2],0,T$c.PI2),T$E.fill();},this._setShader=function(T$n,T$C,T$_){this.ctx.setShader(T$_[0]);},this._drawLine=function(T$n,T$C,T$_){var T$E=this.ctx;T$H.isWebGL&&T$E.setPathId(T$_[6]),T$E.beginPath(),T$E.strokeStyle=T$_[4],T$E.lineWidth=T$_[5],T$H.isWebGL?(T$E.movePath(T$n,T$C),T$E.moveTo(T$_[0],T$_[1]),T$E.lineTo(T$_[2],T$_[3])):(T$E.moveTo(T$n+T$_[0],T$C+T$_[1]),T$E.lineTo(T$n+T$_[2],T$C+T$_[3])),T$E.stroke();},this._drawLines=function(T$n,T$C,T$_){var T$E=this.ctx;T$H.isWebGL&&T$E.setPathId(T$_[5]),T$E.beginPath(),T$n+=T$_[0],T$C+=T$_[1],T$H.isWebGL&&T$E.movePath(T$n,T$C),T$E.strokeStyle=T$_[3],T$E.lineWidth=T$_[4];var T$y=T$_[2],T$p=2,T$c=T$y.length;if(T$H.isWebGL)for(T$E.moveTo(T$y[0],T$y[1]);T$p<T$c;)T$E.lineTo(T$y[T$p++],T$y[T$p++]);else for(T$E.moveTo(T$n+T$y[0],T$C+T$y[1]);T$p<T$c;)T$E.lineTo(T$n+T$y[T$p++],T$C+T$y[T$p++]);T$E.stroke();},this._drawLinesWebGL=function(T$n,T$C,T$_){this.ctx.drawLines(T$n+this.x+T$_[0],T$C+this.y+T$_[1],T$_[2],T$_[3],T$_[4]);},this._drawCurves=function(T$n,T$C,T$_){this.ctx.drawCurves(T$n,T$C,T$_);},this._draw=function(T$n,T$C,T$_){T$_[0].call(null,this,T$n,T$C);},this._transformByMatrix=function(T$n,T$C,T$_){this.ctx.transformByMatrix(T$_[0]);},this._setTransform=function(T$n,T$C,T$_){this.ctx.setTransform(T$_[0],T$_[1],T$_[2],T$_[3],T$_[4],T$_[5]);},this._setTransformByMatrix=function(T$n,T$C,T$_){this.ctx.setTransformByMatrix(T$_[0]);},this._save=function(T$n,T$C,T$_){this.ctx.save();},this._restore=function(T$n,T$C,T$_){this.ctx.restore();},this._translate=function(T$n,T$C,T$_){this.ctx.translate(T$_[0],T$_[1]);},this._transform=function(T$n,T$C,T$_){this.ctx.translate(T$_[1]+T$n,T$_[2]+T$C);var T$E=T$_[0];this.ctx.transform(T$E.a,T$E.b,T$E.c,T$E.d,T$E.tx,T$E.ty),this.ctx.translate(-T$n-T$_[1],-T$C-T$_[2]);},this._rotate=function(T$n,T$C,T$_){this.ctx.translate(T$_[1]+T$n,T$_[2]+T$C),this.ctx.rotate(T$_[0]),this.ctx.translate(-T$n-T$_[1],-T$C-T$_[2]);},this._scale=function(T$n,T$C,T$_){this.ctx.translate(T$_[2]+T$n,T$_[3]+T$C),this.ctx.scale(T$_[0],T$_[1]),this.ctx.translate(-T$n-T$_[2],-T$C-T$_[3]);},this._alpha=function(T$n,T$C,T$_){this.ctx.globalAlpha*=T$_[0];},this._setAlpha=function(T$n,T$C,T$_){this.ctx.globalAlpha=T$_[0];},this._fillText=function(T$n,T$C,T$_){this.ctx.fillText(T$_[0],T$_[1]+T$n,T$_[2]+T$C,T$_[3],T$_[4],T$_[5]);},this._strokeText=function(T$n,T$C,T$_){this.ctx.strokeText(T$_[0],T$_[1]+T$n,T$_[2]+T$C,T$_[3],T$_[4],T$_[5],T$_[6]);},this._fillBorderText=function(T$n,T$C,T$_){this.ctx.fillBorderText(T$_[0],T$_[1]+T$n,T$_[2]+T$C,T$_[3],T$_[4],T$_[5],T$_[6],T$_[7]);},this._blendMode=function(T$n,T$C,T$_){this.ctx.globalCompositeOperation=T$_[0];},this._beginClip=function(T$n,T$C,T$_){this.ctx.beginClip&&this.ctx.beginClip(T$n+T$_[0],T$C+T$_[1],T$_[2],T$_[3]);},this._setIBVB=function(T$n,T$C,T$_){this.ctx.setIBVB(T$_[0]+T$n,T$_[1]+T$C,T$_[2],T$_[3],T$_[4],T$_[5],T$_[6],T$_[7]);},this._fillTrangles=function(T$n,T$C,T$_){this.ctx.fillTrangles(T$_[0],T$_[1]+T$n,T$_[2]+T$C,T$_[3],T$_[4]);},this._drawPath=function(T$n,T$C,T$_){var T$E=this.ctx;T$H.isWebGL&&T$E.setPathId(-1),T$E.beginPath(),T$n+=T$_[0],T$C+=T$_[1],T$H.isWebGL&&T$E.movePath(T$n,T$C);for(var T$y=T$_[2],T$p=0,T$c=T$y.length;T$p<T$c;T$p++){var T$l=T$y[T$p];switch(T$l[0]){case"moveTo":T$H.isWebGL?T$E.moveTo(T$l[1],T$l[2]):T$E.moveTo(T$n+T$l[1],T$C+T$l[2]);break;case"lineTo":T$H.isWebGL?T$E.lineTo(T$l[1],T$l[2]):T$E.lineTo(T$n+T$l[1],T$C+T$l[2]);break;case"arcTo":T$H.isWebGL?T$E.arcTo(T$l[1],T$l[2],T$l[3],T$l[4],T$l[5]):T$E.arcTo(T$n+T$l[1],T$C+T$l[2],T$n+T$l[3],T$C+T$l[4],T$l[5]);break;case"closePath":T$E.closePath();}}var T$W=T$_[3];null!=T$W&&(T$E.fillStyle=T$W.fillStyle,T$E.fill());var T$q=T$_[4];null!=T$q&&(T$E.strokeStyle=T$q.strokeStyle,T$E.lineWidth=T$q.lineWidth||1,T$E.lineJoin=T$q.lineJoin,T$E.lineCap=T$q.lineCap,T$E.miterLimit=T$q.miterLimit,T$E.stroke());},this.drawPoly=function(T$n,T$C,T$_){this.ctx.drawPoly(T$n+this.x+T$_[0],T$C+this.y+T$_[1],T$_[2],T$_[3],T$_[4],T$_[5],T$_[6]);},this._drawPoly=function(T$n,T$C,T$_){var T$E=this.ctx,T$y=T$_[2],T$p=2,T$c=T$y.length;if(T$H.isWebGL)for(T$E.setPathId(T$_[6]),T$E.beginPath(),T$n+=T$_[0],T$C+=T$_[1],T$E.movePath(T$n,T$C),T$E.moveTo(T$y[0],T$y[1]);T$p<T$c;)T$E.lineTo(T$y[T$p++],T$y[T$p++]);else for(T$E.beginPath(),T$n+=T$_[0],T$C+=T$_[1],T$E.moveTo(T$n+T$y[0],T$C+T$y[1]);T$p<T$c;)T$E.lineTo(T$n+T$y[T$p++],T$C+T$y[T$p++]);T$E.closePath(),this._fillAndStroke(T$_[3],T$_[4],T$_[5],T$_[7]);},this._drawSkin=function(T$n,T$C,T$_){var T$E=T$_[0];if(T$E){var T$y=this.ctx;T$E.render(T$y,T$n,T$C);}},this._drawParticle=function(T$n,T$C,T$_){this.ctx.drawParticle(T$n+this.x,T$C+this.y,T$_[0]);},this._setFilters=function(T$n,T$C,T$_){this.ctx.setFilters(T$_);},T$_?this.ctx=T$_.getContext("2d"):(T$_=T$On.create("3D"),this.ctx=T$w.createWebGLContext2D(T$_),T$_._setContext(this.ctx)),T$_.size(T$n,T$C),this.canvas=T$_;}T$J(T$c,"laya.renders.RenderContext");var T$n=T$c.prototype;return T$n.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null);},T$n.drawTexture=function(T$n,T$C,T$_,T$E,T$y){T$n.loaded&&this.ctx.drawTexture(T$n,T$C,T$_,T$E,T$y,this.x,this.y);},T$n._drawTextures=function(T$n,T$C,T$_){T$_[0].loaded&&this.ctx.drawTextures(T$_[0],T$_[1],T$n+this.x,T$C+this.y);},T$n.drawTextureWithTransform=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){T$n.loaded&&this.ctx.drawTextureWithTransform(T$n,T$C,T$_,T$E,T$y,T$p,this.x,this.y,T$c);},T$n.fillQuadrangle=function(T$n,T$C,T$_,T$E,T$y){this.ctx.fillQuadrangle(T$n,T$C,T$_,T$E,T$y);},T$n.drawCanvas=function(T$n,T$C,T$_,T$E,T$y){this.ctx.drawCanvas(T$n,T$C+this.x,T$_+this.y,T$E,T$y);},T$n.drawRect=function(T$n,T$C,T$_,T$E,T$y,T$p){void 0===T$p&&(T$p=1);var T$c=this.ctx;T$c.strokeStyle=T$y,T$c.lineWidth=T$p,T$c.strokeRect(T$n+this.x,T$C+this.y,T$_,T$E,T$p);},T$n._fillAndStroke=function(T$n,T$C,T$_,T$E){void 0===T$E&&(T$E=!1);var T$y=this.ctx;null!=T$n&&(T$y.fillStyle=T$n,T$H.isWebGL?T$y.fill(T$E):T$y.fill()),null!=T$C&&0<T$_&&(T$y.strokeStyle=T$C,T$y.lineWidth=T$_,T$y.stroke());},T$n.clipRect=function(T$n,T$C,T$_,T$E){this.ctx.clipRect(T$n+this.x,T$C+this.y,T$_,T$E);},T$n.fillRect=function(T$n,T$C,T$_,T$E,T$y){this.ctx.fillRect(T$n+this.x,T$C+this.y,T$_,T$E,T$y);},T$n.drawCircle=function(T$n,T$C,T$_,T$E,T$y){void 0===T$y&&(T$y=1),T$h.drawCall++;var T$p=this.ctx;T$p.beginPath(),T$p.strokeStyle=T$E,T$p.lineWidth=T$y,T$p.arc(T$n+this.x,T$C+this.y,T$_,0,T$c.PI2),T$p.stroke();},T$n.drawTriangles=function(T$n,T$C,T$_){if(T$H.isWebGL)this.ctx.drawTriangles(T$_[0],T$n+T$_[1],T$C+T$_[2],T$_[3],T$_[4],T$_[5],T$_[6],T$_[7],T$_[8],T$_[9]);else{var T$E=T$_[5],T$y=0,T$p=T$E.length,T$c=this.ctx;for(T$y=0;T$y<T$p;T$y+=3){var T$l=2*T$E[T$y],T$W=2*T$E[T$y+1],T$q=2*T$E[T$y+2];T$c.drawTriangle(T$_[0],T$_[3],T$_[4],T$l,T$W,T$q,T$_[6],!0);}}},T$n.fillCircle=function(T$n,T$C,T$_,T$E){T$h.drawCall++;var T$y=this.ctx;T$y.beginPath(),T$y.fillStyle=T$E,T$y.arc(T$n+this.x,T$C+this.y,T$_,0,T$c.PI2),T$y.fill();},T$n.setShader=function(T$n){this.ctx.setShader(T$n);},T$n.drawLine=function(T$n,T$C,T$_,T$E,T$y,T$p){void 0===T$p&&(T$p=1);var T$c=this.ctx;T$c.beginPath(),T$c.strokeStyle=T$y,T$c.lineWidth=T$p,T$c.moveTo(this.x+T$n,this.y+T$C),T$c.lineTo(this.x+T$_,this.y+T$E),T$c.stroke();},T$n.clear=function(){this.ctx.clear();},T$n.transformByMatrix=function(T$n){this.ctx.transformByMatrix(T$n);},T$n.setTransform=function(T$n,T$C,T$_,T$E,T$y,T$p){this.ctx.setTransform(T$n,T$C,T$_,T$E,T$y,T$p);},T$n.setTransformByMatrix=function(T$n){this.ctx.setTransformByMatrix(T$n);},T$n.save=function(){this.ctx.save();},T$n.restore=function(){this.ctx.restore();},T$n.translate=function(T$n,T$C){this.ctx.translate(T$n,T$C);},T$n.transform=function(T$n,T$C,T$_,T$E,T$y,T$p){this.ctx.transform(T$n,T$C,T$_,T$E,T$y,T$p);},T$n.rotate=function(T$n){this.ctx.rotate(T$n);},T$n.scale=function(T$n,T$C){this.ctx.scale(T$n,T$C);},T$n.alpha=function(T$n){this.ctx.globalAlpha*=T$n;},T$n.setAlpha=function(T$n){this.ctx.globalAlpha=T$n;},T$n.fillWords=function(T$n,T$C,T$_,T$E,T$y,T$p){void 0===T$p&&(T$p=0),this.ctx.fillWords(T$n,T$C,T$_,T$E,T$y,T$p);},T$n.fillBorderWords=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){this.ctx.fillBorderWords(T$n,T$C,T$_,T$E,T$y,T$p,T$c);},T$n.fillText=function(T$n,T$C,T$_,T$E,T$y,T$p){this.ctx.fillText(T$n,T$C+this.x,T$_+this.y,T$E,T$y,T$p);},T$n.strokeText=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){this.ctx.strokeText(T$n,T$C+this.x,T$_+this.y,T$E,T$y,T$p,T$c);},T$n.blendMode=function(T$n){this.ctx.globalCompositeOperation=T$n;},T$n.flush=function(){this.ctx.flush&&this.ctx.flush();},T$n.addRenderObject=function(T$n){this.ctx.addRenderObject(T$n);},T$n.beginClip=function(T$n,T$C,T$_,T$E){this.ctx.beginClip&&this.ctx.beginClip(T$n,T$C,T$_,T$E);},T$n.endClip=function(){this.ctx.endClip&&this.ctx.endClip();},T$n.fillTrangles=function(T$n,T$C,T$_){this.ctx.fillTrangles(T$_[0],T$_[1],T$_[2],T$_[3],4<T$_.length?T$_[4]:null);},T$c.PI2=2*Math.PI,T$c;}(),T$$=function(){function T$c(T$n,T$C){switch(this._next=T$C||T$c.NORENDER,T$n){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=T$d._filter);case 69905:return void(this._fun=T$c._initRenderFun);}this.onCreate(T$n);}T$J(T$c,"laya.renders.RenderSprite");var T$n=T$c.prototype;return T$n.onCreate=function(T$n){},T$n._style=function(T$n,T$C,T$_,T$E){T$n._style.render(T$n,T$C,T$_,T$E);var T$y=this._next;T$y._fun.call(T$y,T$n,T$C,T$_,T$E);},T$n._no=function(T$n,T$C,T$_,T$E){},T$n._custom=function(T$n,T$C,T$_,T$E){T$n.customRender(T$C,T$_,T$E);var T$y=T$n._style._tf;this._next._fun.call(this._next,T$n,T$C,T$_-T$y.translateX,T$E-T$y.translateY);},T$n._clip=function(T$n,T$C,T$_,T$E){var T$y=this._next;if(T$y!=T$c.NORENDER){var T$p=T$n._style.scrollRect;T$C.ctx.save(),T$C.ctx.clipRect(T$_,T$E,T$p.width,T$p.height),T$y._fun.call(T$y,T$n,T$C,T$_-T$p.x,T$E-T$p.y),T$C.ctx.restore();}},T$n._blend=function(T$n,T$C,T$_,T$E){var T$y=T$n._style;T$y.blendMode&&(T$C.ctx.globalCompositeOperation=T$y.blendMode);var T$p=this._next;T$p._fun.call(T$p,T$n,T$C,T$_,T$E),T$C.ctx.globalCompositeOperation="source-over";},T$n._mask=function(T$n,T$C,T$_,T$E){var T$y=this._next;T$y._fun.call(T$y,T$n,T$C,T$_,T$E);var T$p=T$n.mask;T$p&&(T$C.ctx.globalCompositeOperation="destination-in",(0<T$p.numChildren||!T$p.graphics._isOnlyOne())&&(T$p.cacheAsBitmap=!0),T$p.render(T$C,T$_-T$n.pivotX,T$E-T$n.pivotY)),T$C.ctx.globalCompositeOperation="source-over";},T$n._graphics=function(T$n,T$C,T$_,T$E){var T$y=T$n._style._tf;T$n._graphics&&T$n._graphics._render(T$n,T$C,T$_-T$y.translateX,T$E-T$y.translateY);var T$p=this._next;T$p._fun.call(T$p,T$n,T$C,T$_,T$E);},T$n._image=function(T$n,T$C,T$_,T$E){var T$y=T$n._style;T$C.ctx.drawTexture2(T$_,T$E,T$y._tf.translateX,T$y._tf.translateY,T$n.transform,T$y.alpha,T$y.blendMode,T$n._graphics._one);},T$n._image2=function(T$n,T$C,T$_,T$E){var T$y=T$n._style._tf;T$C.ctx.drawTexture2(T$_,T$E,T$y.translateX,T$y.translateY,T$n.transform,1,null,T$n._graphics._one);},T$n._alpha=function(T$n,T$C,T$_,T$E){var T$y;if(.01<(T$y=T$n._style.alpha)||T$n._needRepaint()){var T$p=T$C.ctx.globalAlpha;T$C.ctx.globalAlpha*=T$y;var T$c=this._next;T$c._fun.call(T$c,T$n,T$C,T$_,T$E),T$C.ctx.globalAlpha=T$p;}},T$n._transform=function(T$n,T$C,T$_,T$E){var T$y=T$n.transform,T$p=this._next;T$y&&T$p!=T$c.NORENDER?(T$C.save(),T$C.transform(T$y.a,T$y.b,T$y.c,T$y.d,T$y.tx+T$_,T$y.ty+T$E),T$p._fun.call(T$p,T$n,T$C,0,0),T$C.restore()):T$p._fun.call(T$p,T$n,T$C,T$_,T$E);},T$n._childs=function(T$n,T$C,T$_,T$E){var T$y=T$n._style,T$p=T$y._tf;if(T$_=T$_-T$p.translateX+T$y.paddingLeft,T$E=T$E-T$p.translateY+T$y.paddingTop,T$y._calculation){var T$c=T$n._getWords();if(T$c){var T$l=T$y;T$l&&(T$l.stroke?T$C.fillBorderWords(T$c,T$_,T$E,T$l.font,T$l.color,T$l.strokeColor,T$l.stroke):T$C.fillWords(T$c,T$_,T$E,T$l.font,T$l.color,"none"!=T$l.textDecoration&&T$l.underLine?1:0));}}var T$W,T$q=T$n._childs,T$J=T$q.length;if(T$n.viewport||T$n.optimizeScrollRect&&T$n._style.scrollRect){var T$j=T$n.viewport||T$n._style.scrollRect,T$P=T$j.x,T$x=T$j.y,T$b=T$j.right,T$r=T$j.bottom,T$m=NaN,T$d=NaN;for(T$a=0;T$a<T$J;++T$a)(T$W=T$q[T$a]).visible&&(T$m=T$W._x)<T$b&&T$m+T$W.width>T$P&&(T$d=T$W._y)<T$r&&T$d+T$W.height>T$x&&T$W.render(T$C,T$_,T$E);}else for(var T$a=0;T$a<T$J;++T$a)(T$W=T$q[T$a])._style.visible&&T$W.render(T$C,T$_,T$E);},T$n._canvas=function(T$n,T$C,T$_,T$E){var T$y=T$n._$P.cacheCanvas;if(T$y){"bitmap"===T$y.type?T$h.canvasBitmap++:T$h.canvasNormal++;var T$p=T$y.ctx;if(T$n._needRepaint()||!T$p)this._canvas_repaint(T$n,T$C,T$_,T$E);else{var T$c=T$y._cacheRec;T$C.drawCanvas(T$p.canvas,T$_+T$c.x,T$E+T$c.y,T$c.width,T$c.height);}}else this._next._fun.call(this._next,T$n,T$C,T$_,T$E);},T$n._canvas_repaint=function(T$n,T$C,T$_,T$E){var T$y=T$n._$P.cacheCanvas,T$p=this._next;if(T$y){var T$c,T$l,T$W,T$q,T$J=T$y.ctx,T$j=T$n._needRepaint()||!T$J,T$P=T$y.type;if("bitmap"===T$P?T$h.canvasBitmap++:T$h.canvasNormal++,T$j){var T$x,T$b;T$y._cacheRec||(T$y._cacheRec=new T$s()),T$H.isWebGL&&"bitmap"!==T$P?T$y._cacheRec.setTo(-T$n.pivotX,-T$n.pivotY,1,1):((T$q=T$n.getSelfBounds()).x=T$q.x-T$n.pivotX,T$q.y=T$q.y-T$n.pivotY,T$q.x=T$q.x-16,T$q.y=T$q.y-16,T$q.width=T$q.width+32,T$q.height=T$q.height+32,T$q.x=Math.floor(T$q.x+T$_)-T$_,T$q.y=Math.floor(T$q.y+T$E)-T$E,T$q.width=Math.floor(T$q.width),T$q.height=Math.floor(T$q.height),T$y._cacheRec.copyFrom(T$q)),T$q=T$y._cacheRec;var T$r,T$m=T$H.isWebGL?1:T$e.pixelRatio*T$T.stage.clientScaleX,T$d=T$H.isWebGL?1:T$e.pixelRatio*T$T.stage.clientScaleY;if(!T$H.isWebGL){var T$a,T$O=1,T$A=1;for(T$a=T$n;T$a&&T$a!=T$T.stage;)T$O*=T$a.scaleX,T$A*=T$a.scaleY,T$a=T$a.parent;T$H.isWebGL?(T$O<1&&(T$m*=T$O),T$A<1&&(T$d*=T$A)):(1<T$O&&(T$m*=T$O),1<T$A&&(T$d*=T$A));}if(T$n.scrollRect){var T$k=T$n.scrollRect;T$q.x-=T$k.x,T$q.y-=T$k.y;}if(T$x=T$q.width*T$m,T$b=T$q.height*T$d,T$l=T$q.x,T$W=T$q.y,T$H.isWebGL&&"bitmap"===T$P&&(2048<T$x||2048<T$b))return console.warn("cache bitmap size larger than 2048,cache ignored"),T$y.ctx&&(T$L.recover("RenderContext",T$y.ctx),T$y.ctx.canvas.size(0,0),T$y.ctx=null),void T$p._fun.call(T$p,T$n,T$C,T$_,T$E);if(T$J||(T$J=T$y.ctx=T$L.getItem("RenderContext")||new T$X(T$x,T$b,T$On.create("AUTO"))),T$J.ctx.sprite=T$n,(T$c=T$J.canvas).clear(),(T$c.width!=T$x||T$c.height!=T$b)&&T$c.size(T$x,T$b),"bitmap"===T$P?T$c.context.asBitmap=!0:"normal"===T$P&&(T$c.context.asBitmap=!1),1!=T$m||1!=T$d){var T$t=T$J.ctx;T$t.save(),T$t.scale(T$m,T$d),!T$H.isConchWebGL&&T$H.isConchApp&&(T$r=T$n._$P.cf)&&T$t.setFilterMatrix&&T$t.setFilterMatrix(T$r._mat,T$r._alpha),T$p._fun.call(T$p,T$n,T$J,-T$l,-T$W),T$t.restore(),T$H.isConchApp&&!T$H.isConchWebGL||T$n._applyFilters();}else T$t=T$J.ctx,!T$H.isConchWebGL&&T$H.isConchApp&&(T$r=T$n._$P.cf)&&T$t.setFilterMatrix&&T$t.setFilterMatrix(T$r._mat,T$r._alpha),T$p._fun.call(T$p,T$n,T$J,-T$l,-T$W),T$H.isConchApp&&!T$H.isConchWebGL||T$n._applyFilters();T$n._$P.staticCache&&(T$y.reCache=!1),T$h.canvasReCache++;}else T$l=(T$q=T$y._cacheRec).x,T$W=T$q.y,T$c=T$J.canvas;T$C.drawCanvas(T$c,T$_+T$l,T$E+T$W,T$q.width,T$q.height);}else T$p._fun.call(T$p,T$n,T$J,T$_,T$E);},T$c.__init__=function(){var T$n,T$C,T$_=0;for(T$C=T$w.createRenderSprite(69905,null),T$n=T$c.renders.length=4096,T$_=0;T$_<T$n;T$_++)T$c.renders[T$_]=T$C;T$c.renders[0]=T$w.createRenderSprite(0,null),function(T$n,T$C){for(var T$_=0,T$E=0;T$E<T$n.length;T$E++)T$_|=T$n[T$E],T$c.renders[T$_]=T$C;}([1,512,4,2],new T$c(1,null)),T$c.renders[513]=T$w.createRenderSprite(513,null),T$c.renders[517]=new T$c(517,null);},T$c._initRenderFun=function(T$n,T$C,T$_,T$E){var T$y=T$n._renderType;(T$c.renders[T$y]=T$c._getTypeRender(T$y))._fun(T$n,T$C,T$_,T$E);},T$c._getTypeRender=function(T$n){for(var T$C=null,T$_=2048;1<T$_;)T$_&T$n&&(T$C=T$w.createRenderSprite(T$_,T$C)),T$_>>=1;return T$C;},T$c.IMAGE=1,T$c.ALPHA=2,T$c.TRANSFORM=4,T$c.BLEND=8,T$c.CANVAS=16,T$c.FILTERS=32,T$c.MASK=64,T$c.CLIP=128,T$c.STYLE=256,T$c.GRAPHICS=512,T$c.CUSTOM=1024,T$c.CHILDS=2048,T$c.INIT=69905,T$c.renders=[],T$c.NORENDER=new T$c(0,null),T$c;}(),T$i=function(){function T$l(){this._repaint=!1;}T$J(T$l,"laya.resource.Context");var T$n=T$l.prototype;return T$n.replaceReset=function(){var T$n,T$C,T$_=0;for(T$n=T$l.replaceKeys.length,T$_=0;T$_<T$n;T$_++)T$C=T$l.replaceKeys[T$_],this[T$l.newKeys[T$_]]=this[T$C];},T$n.replaceResotre=function(){this.__restore(),this.__reset();},T$n.setIsMainContext=function(){},T$n.drawTextures=function(T$n,T$C,T$_,T$E){T$h.drawCall+=T$C.length/2;for(var T$y=T$n.width,T$p=T$n.height,T$c=0,T$l=T$C.length;T$c<T$l;T$c+=2)this.drawTexture(T$n,T$C[T$c],T$C[T$c+1],T$y,T$p,T$_,T$E);},T$n.drawCanvas=function(T$n,T$C,T$_,T$E,T$y){T$h.drawCall++,this.drawImage(T$n.source,T$C,T$_,T$E,T$y);},T$n.fillRect=function(T$n,T$C,T$_,T$E,T$y){T$h.drawCall++,T$y&&(this.fillStyle=T$y),this.__fillRect(T$n,T$C,T$_,T$E);},T$n.fillText=function(T$n,T$C,T$_,T$E,T$y,T$p){T$h.drawCall++,3<arguments.length&&null!=T$E&&(this.font=T$E,this.fillStyle=T$y,this.textAlign=T$p,this.textBaseline="top"),this.__fillText(T$n,T$C,T$_);},T$n.fillBorderText=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){T$h.drawCall++,this.font=T$E,this.fillStyle=T$y,this.textBaseline="top",this.strokeStyle=T$p,this.lineWidth=T$c,this.textAlign=T$l,this.__strokeText(T$n,T$C,T$_),this.__fillText(T$n,T$C,T$_);},T$n.strokeText=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){T$h.drawCall++,3<arguments.length&&null!=T$E&&(this.font=T$E,this.strokeStyle=T$y,this.lineWidth=T$p,this.textAlign=T$c,this.textBaseline="top"),this.__strokeText(T$n,T$C,T$_);},T$n.transformByMatrix=function(T$n){this.transform(T$n.a,T$n.b,T$n.c,T$n.d,T$n.tx,T$n.ty);},T$n.setTransformByMatrix=function(T$n){this.setTransform(T$n.a,T$n.b,T$n.c,T$n.d,T$n.tx,T$n.ty);},T$n.clipRect=function(T$n,T$C,T$_,T$E){T$h.drawCall++,this.beginPath(),this.rect(T$n,T$C,T$_,T$E),this.clip();},T$n.drawTexture=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){T$h.drawCall++;var T$l=T$n.uv,T$W=T$n.bitmap.width,T$q=T$n.bitmap.height;this.drawImage(T$n.source,T$l[0]*T$W,T$l[1]*T$q,(T$l[2]-T$l[0])*T$W,(T$l[5]-T$l[3])*T$q,T$C+T$p,T$_+T$c,T$E,T$y);},T$n.drawTextureWithTransform=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W){T$h.drawCall++;var T$q=T$n.uv,T$J=T$n.bitmap.width,T$j=T$n.bitmap.height;this.save(),1!=T$W&&(this.globalAlpha*=T$W),T$p?(this.transform(T$p.a,T$p.b,T$p.c,T$p.d,T$p.tx+T$c,T$p.ty+T$l),this.drawImage(T$n.source,T$q[0]*T$J,T$q[1]*T$j,(T$q[2]-T$q[0])*T$J,(T$q[5]-T$q[3])*T$j,T$C,T$_,T$E,T$y)):this.drawImage(T$n.source,T$q[0]*T$J,T$q[1]*T$j,(T$q[2]-T$q[0])*T$J,(T$q[5]-T$q[3])*T$j,T$C+T$c,T$_+T$l,T$E,T$y),this.restore();},T$n.drawTexture2=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){var T$W=T$l[0];if(T$W.loaded&&T$W.bitmap&&T$W.source){T$h.drawCall++;var T$q=1!==T$p;if(T$q){var T$J=this.globalAlpha;this.globalAlpha*=T$p;}var T$j=T$W.uv,T$P=T$W.bitmap.width,T$x=T$W.bitmap.height;T$y?(this.save(),this.transform(T$y.a,T$y.b,T$y.c,T$y.d,T$y.tx+T$n,T$y.ty+T$C),this.drawImage(T$W.source,T$j[0]*T$P,T$j[1]*T$x,(T$j[2]-T$j[0])*T$P,(T$j[5]-T$j[3])*T$x,T$l[1]-T$_,T$l[2]-T$E,T$l[3],T$l[4]),this.restore()):this.drawImage(T$W.source,T$j[0]*T$P,T$j[1]*T$x,(T$j[2]-T$j[0])*T$P,(T$j[5]-T$j[3])*T$x,T$l[1]-T$_+T$n,T$l[2]-T$E+T$C,T$l[3],T$l[4]),T$q&&(this.globalAlpha=T$J);}},T$n.fillTexture=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){if(!T$l.pat){if(T$n.uv!=T$Jn.DEF_UV){var T$W=new T$On("2D");T$W.getContext("2d"),T$W.size(T$n.width,T$n.height),T$W.context.drawTexture(T$n,0,0,T$n.width,T$n.height,0,0),T$n=new T$Jn(T$W);}T$l.pat=this.createPattern(T$n.bitmap.source,T$p);}var T$q=T$C,T$J=T$_,T$j=0,T$P=0;T$c&&(T$q+=T$c.x%T$n.width,T$J+=T$c.y%T$n.height,T$j-=T$c.x%T$n.width,T$P-=T$c.y%T$n.height),this.translate(T$q,T$J),this.fillRect(T$j,T$P,T$E,T$y,T$l.pat),this.translate(-T$q,-T$J);},T$n.drawTriangle=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){var T$W=T$n.bitmap,T$q=T$W.source,T$J=T$n.width,T$j=T$n.height,T$P=T$W.width,T$x=T$W.height,T$b=T$_[T$E]*T$P,T$r=T$_[T$y]*T$P,T$m=T$_[T$p]*T$P,T$d=T$_[T$E+1]*T$x,T$a=T$_[T$y+1]*T$x,T$O=T$_[T$p+1]*T$x,T$A=T$C[T$E],T$k=T$C[T$y],T$t=T$C[T$p],T$T=T$C[T$E+1],T$Y=T$C[T$y+1],T$s=T$C[T$p+1];if(T$l){var T$N=(T$A+T$k+T$t)/3,T$S=(T$T+T$Y+T$s)/3,T$M=T$A-T$N,T$w=T$T-T$S,T$B=Math.sqrt(T$M*T$M+T$w*T$w);T$A=T$N+T$M/T$B*(T$B+1),T$T=T$S+T$w/T$B*(T$B+1),T$w=T$Y-T$S,T$k=T$N+(T$M=T$k-T$N)/(T$B=Math.sqrt(T$M*T$M+T$w*T$w))*(T$B+1),T$Y=T$S+T$w/T$B*(T$B+1),T$w=T$s-T$S,T$t=T$N+(T$M=T$t-T$N)/(T$B=Math.sqrt(T$M*T$M+T$w*T$w))*(T$B+1),T$s=T$S+T$w/T$B*(T$B+1);}this.save(),T$c&&this.transform(T$c.a,T$c.b,T$c.c,T$c.d,T$c.tx,T$c.ty),this.beginPath(),this.moveTo(T$A,T$T),this.lineTo(T$k,T$Y),this.lineTo(T$t,T$s),this.closePath(),this.clip();var T$V=1/(T$b*T$a+T$d*T$m+T$r*T$O-T$a*T$m-T$d*T$r-T$b*T$O),T$g=T$A*T$a+T$d*T$t+T$k*T$O-T$a*T$t-T$d*T$k-T$A*T$O,T$H=T$b*T$k+T$A*T$m+T$r*T$t-T$k*T$m-T$A*T$r-T$b*T$t,T$X=T$b*T$a*T$t+T$d*T$k*T$m+T$A*T$r*T$O-T$A*T$a*T$m-T$d*T$r*T$t-T$b*T$k*T$O,T$$=T$T*T$a+T$d*T$s+T$Y*T$O-T$a*T$s-T$d*T$Y-T$T*T$O,T$i=T$b*T$Y+T$T*T$m+T$r*T$s-T$Y*T$m-T$T*T$r-T$b*T$s,T$f=T$b*T$a*T$s+T$d*T$Y*T$m+T$T*T$r*T$O-T$T*T$a*T$m-T$d*T$r*T$s-T$b*T$Y*T$O;this.transform(T$g*T$V,T$$*T$V,T$H*T$V,T$i*T$V,T$X*T$V,T$f*T$V),this.drawImage(T$q,T$n.uv[0]*T$P,T$n.uv[1]*T$x,T$J,T$j,T$n.uv[0]*T$P,T$n.uv[1]*T$x,T$J,T$j),this.restore();},T$n.flush=function(){return 0;},T$n.fillWords=function(T$n,T$C,T$_,T$E,T$y,T$p){T$E&&(this.font=T$E),T$y&&(this.fillStyle=T$y);this.textBaseline="top",this.textAlign="left";for(var T$c=0,T$l=T$n.length;T$c<T$l;T$c++){var T$W=T$n[T$c];if(this.__fillText(T$W.char,T$W.x+T$C,T$W.y+T$_),1===T$p){var T$q=T$W.height,T$J=.5*T$W.style.letterSpacing;T$J||(T$J=0),this.beginPath(),this.strokeStyle=T$y,this.lineWidth=1,this.moveTo(T$C+T$W.x-T$J+.5,T$_+T$W.y+T$q+.5),this.lineTo(T$C+T$W.x+T$W.width+T$J+.5,T$_+T$W.y+T$q+.5),this.stroke();}}},T$n.fillBorderWords=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){T$E&&(this.font=T$E),T$y&&(this.fillStyle=T$y),this.textBaseline="top",this.lineWidth=T$c,this.textAlign="left",this.strokeStyle=T$p;for(var T$l=0,T$W=T$n.length;T$l<T$W;T$l++){var T$q=T$n[T$l];this.__strokeText(T$q.char,T$q.x+T$C,T$q.y+T$_),this.__fillText(T$q.char,T$q.x+T$C,T$q.y+T$_);}},T$n.destroy=function(){this.canvas.width=this.canvas.height=0;},T$n.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1;},T$n.drawCurves=function(T$n,T$C,T$_){this.beginPath(),this.strokeStyle=T$_[3],this.lineWidth=T$_[4];var T$E=T$_[2];T$n+=T$_[0],T$C+=T$_[1],this.moveTo(T$n+T$E[0],T$C+T$E[1]);for(var T$y=2,T$p=T$E.length;T$y<T$p;)this.quadraticCurveTo(T$n+T$E[T$y++],T$C+T$E[T$y++],T$n+T$E[T$y++],T$C+T$E[T$y++]);this.stroke();},T$l.__init__=function(T$C){var T$_=laya.resource.Context.prototype;if(!(T$C=T$C||CanvasRenderingContext2D.prototype).inited){T$C.inited=!0,T$C.__fillText=T$C.fillText,T$C.__fillRect=T$C.fillRect,T$C.__strokeText=T$C.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(T$n){T$C[T$n]=T$_[T$n];});}},T$l.replaceCanvasGetSet=function(T$n,T$C){var T$_=Object.getOwnPropertyDescriptor(T$n,T$C);if(!T$_||!T$_.configurable)return!1;var T$E,T$y={};for(T$E in T$_)"set"!=T$E&&(T$y[T$E]=T$_[T$E]);var T$p=T$_.set;return T$y.set=function(T$n){T$p.call(this,T$n);var T$C=this.getContext("2d");T$C&&"__reset"in T$C&&T$C.__reset();},Object.defineProperty(T$n,T$C,T$y),!0;},T$l.replaceGetSet=function(T$n,T$C){var T$_=Object.getOwnPropertyDescriptor(T$n,T$C);if(!T$_||!T$_.configurable)return!1;var T$E,T$y={};for(T$E in T$_)"set"!=T$E&&(T$y[T$E]=T$_[T$E]);var T$p=T$_.set,T$c="___"+T$C+"__";return T$l.newKeys.push(T$c),T$y.set=function(T$n){T$n!=this[T$c]&&(this[T$c]=T$n,T$p.call(this,T$n));},Object.defineProperty(T$n,T$C,T$y),!0;},T$l._default=new T$l(),T$l.newKeys=[],T$W(T$l,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"];}]),T$l;}(),T$f=function(){function T$p(T$n){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++T$p._uniqueIDCounter,this._name=T$n||"Content Manager",T$p._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,T$p._resourceManagers.push(this),this._resources=[],this._records={};}T$J(T$p,"laya.resource.ResourceManager");var T$n=T$p.prototype;return T$T.imps(T$n,{"laya.resource.IDispose":!0}),T$n.getResourceByIndex=function(T$n){return this._resources[T$n];},T$n.getResourcesLength=function(){return this._resources.length;},T$n.addResource=function(T$n){return T$n.resourceManager&&T$n.resourceManager.removeResource(T$n),-1===this._resources.indexOf(T$n)&&((T$n._resourceManager=this)._resources.push(T$n),this.addRecord(T$n.uri,T$n.__className,T$n.memorySize),this.addSize(T$n.memorySize),!0);},T$n.removeResource=function(T$n){var T$C=this._resources.indexOf(T$n);return-1!==T$C&&(this._resources.splice(T$C,1),T$n._resourceManager=null,this._memorySize-=T$n.memorySize,this.addRecord(T$n.uri,T$n.__className,-T$n.memorySize),!0);},T$n.unload=function(){for(var T$n=this._resources.slice(0,this._resources.length),T$C=0;T$C<T$n.length;T$C++){T$n[T$C].destroy();}T$n.length=0;},T$n.dispose=function(){if(this===T$p._systemResourceManager)throw new Error("systemResourceManager不能被释放！");T$p._resourceManagers.splice(T$p._resourceManagers.indexOf(this),1),T$p._isResourceManagersSorted=!1;for(var T$n=this._resources.slice(0,this._resources.length),T$C=0;T$C<T$n.length;T$C++){var T$_=T$n[T$C];T$_.resourceManager.removeResource(T$_),T$_.destroy();}T$n.length=0;},T$n.addSize=function(T$n){T$n&&(this.autoRelease&&0<T$n&&this._memorySize+T$n>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=T$n);},T$n.addRecord=function(T$n,T$C,T$_){DEBUG&&T$_&&!T$n&&console.error(T$n,T$C,T$_);},T$n.garbageCollection=function(T$n){var T$C=this._resources;(T$C=T$C.slice()).sort(function(T$n,T$C){if(!T$n||!T$C)throw new Error("a或b不能为空！");return T$n.released&&T$C.released?0:T$n.released?1:T$C.released?-1:T$n._lastUseFrameCount-T$C._lastUseFrameCount;});for(var T$_=T$h.loopCount,T$E=0,T$y=T$C.length;T$E<T$y;T$E++){var T$p=T$C[T$E];if(!(1<T$_-T$p._lastUseFrameCount))return void(this._memorySize>=T$n&&(this._isOverflow=!0));if(T$p.releaseResource(),this._memorySize<T$n)return void(this._isOverflow=!1);}},T$b(0,T$n,"id",function(){return this._id;}),T$b(0,T$n,"name",function(){return this._name;},function(T$n){!T$n&&""===T$n||this._name===T$n||(this._name=T$n,T$p._isResourceManagersSorted=!1);}),T$b(0,T$n,"memorySize",function(){return this._memorySize;}),T$b(0,T$n,"records",function(){return this._records;}),T$b(1,T$p,"systemResourceManager",function(){return T$p._systemResourceManager;}),T$p.__init__=function(){T$p.currentResourceManager=T$p.systemResourceManager;},T$p.getLoadedResourceManagerByIndex=function(T$n){return T$p._resourceManagers[T$n];},T$p.getLoadedResourceManagersCount=function(){return T$p._resourceManagers.length;},T$p.recreateContentManagers=function(T$n){void 0===T$n&&(T$n=!1);for(var T$C=T$p.currentResourceManager,T$_=0;T$_<T$p._resourceManagers.length;T$_++){T$p.currentResourceManager=T$p._resourceManagers[T$_];for(var T$E=0;T$E<T$p.currentResourceManager._resources.length;T$E++)T$p.currentResourceManager._resources[T$E].releaseResource(T$n),T$p.currentResourceManager._resources[T$E].activeResource(T$n);}T$p.currentResourceManager=T$C;},T$p.releaseContentManagers=function(T$n){void 0===T$n&&(T$n=!1);for(var T$C=T$p.currentResourceManager,T$_=0;T$_<T$p._resourceManagers.length;T$_++){T$p.currentResourceManager=T$p._resourceManagers[T$_];for(var T$E=0;T$E<T$p.currentResourceManager._resources.length;T$E++){var T$y=T$p.currentResourceManager._resources[T$E];!T$y.released&&T$y.releaseResource(T$n);}}T$p.currentResourceManager=T$C;},T$p._uniqueIDCounter=0,T$p._isResourceManagersSorted=!1,T$p._resourceManagers=[],T$W(T$p,["_systemResourceManager",function(){return this._systemResourceManager=new T$p("System Resource Manager");},"currentResourceManager",function(){return this.currentResourceManager=T$p._systemResourceManager;}]),T$p;}(),T$e=(function(){function T$n(){}T$J(T$n,"laya.system.System"),T$n.changeDefinition=function(T$n,T$C){T$T[T$n]=T$C;var T$_=T$n+"=classObj";T$T._runScript(T$_);},T$n.__init__=function(){T$H.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice());};}(),function(){function T$_(){}return T$J(T$_,"laya.utils.Browser"),T$b(1,T$_,"pixelRatio",function(){return T$_.__init__(),-1<T$_.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:T$w.getPixelRatio();}),T$b(1,T$_,"height",function(){return T$_.__init__(),(T$T.stage&&T$T.stage.canvasRotation?T$_.clientWidth:T$_.clientHeight)*T$_.pixelRatio;}),T$b(1,T$_,"clientWidth",function(){return T$_.__init__(),T$_.window.innerWidth||T$_.document.body.clientWidth;}),T$b(1,T$_,"window",function(){return T$_.__init__(),T$_._window;}),T$b(1,T$_,"clientHeight",function(){return T$_.__init__(),T$_.window.innerHeight||T$_.document.body.clientHeight||T$_.document.documentElement.clientHeight;}),T$b(1,T$_,"width",function(){return T$_.__init__(),(T$T.stage&&T$T.stage.canvasRotation?T$_.clientHeight:T$_.clientWidth)*T$_.pixelRatio;}),T$b(1,T$_,"container",function(){return T$_.__init__(),T$_._container||((T$_._container=T$_.createElement("div")).id="layaContainer",T$_.document.body.appendChild(T$_._container)),T$_._container;},function(T$n){T$_._container=T$n;}),T$b(1,T$_,"document",function(){return T$_.__init__(),T$_._document;}),T$_.__init__=function(){if(!T$_._window){T$_._window=T$w.getWindow(),T$_._document=T$_.window.document,T$_._window.addEventListener("message",function(T$n){laya.utils.Browser._onMessage(T$n);},!1),T$_.document.__createElement=T$_.document.createElement,T$c.requestAnimationFrame=T$c.requestAnimationFrame||T$c.webkitRequestAnimationFrame||T$c.mozRequestAnimationFrame||T$c.oRequestAnimationFrame||T$c.msRequestAnimationFrame||function(T$n){return T$c.setTimeout(T$n,1e3/60);};var T$n=T$c.document.body.style;T$n["-webkit-user-select"]="none",T$n["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",T$_.userAgent=T$_.window.navigator.userAgent,T$_.onIOS=!!(T$_.u=T$_.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),T$_.onMobile=-1<T$_.u.indexOf("Mobile"),T$_.onIPhone=-1<T$_.u.indexOf("iPhone"),T$_.onMac=-1<T$_.u.indexOf("Mac OS X"),T$_.onIPad=-1<T$_.u.indexOf("iPad"),T$_.onAndroid=-1<T$_.u.indexOf("Android")||-1<T$_.u.indexOf("Adr"),T$_.onWP=-1<T$_.u.indexOf("Windows Phone"),T$_.onQQBrowser=-1<T$_.u.indexOf("QQBrowser"),T$_.onMQQBrowser=-1<T$_.u.indexOf("MQQBrowser")||-1<T$_.u.indexOf("Mobile")&&-1<T$_.u.indexOf("QQ"),T$_.onIE=!!T$_.window.ActiveXObject||"ActiveXObject"in T$_.window,T$_.onWeiXin=-1<T$_.u.indexOf("MicroMessenger"),T$_.onPC=!T$_.onMobile,T$_.onSafari=-1<T$_.u.indexOf("Safari"),T$_.onFirefox=-1<T$_.u.indexOf("Firefox"),T$_.onEdge=-1<T$_.u.indexOf("Edge"),T$_.onMiniGame=-1<T$_.u.indexOf("MiniGame"),T$_.onLimixiu=-1<T$_.u.indexOf("limixiu"),T$_.httpProtocol="http:"==T$_.window.location.protocol,T$_.onMiniGame&&null==T$_.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),T$_.webAudioEnabled=!!(T$_.window.AudioContext||T$_.window.webkitAudioContext||T$_.window.mozAudioContext),T$_.soundType=T$_.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",T$yn=T$_.webAudioEnabled?T$pn:T$_n,T$_.webAudioEnabled&&T$pn.initWebAudio(),T$_n._initMusicAudio(),T$_.enableTouch="ontouchstart"in T$c||T$c.DocumentTouch&&T$C instanceof DocumentTouch,T$c.focus(),T$M._soundClass=T$yn,T$M._musicClass=T$_n,T$H._mainCanvas=T$H._mainCanvas||T$On.create("2D"),T$_.canvas||(T$_.canvas=T$On.create("2D"),T$_.context=T$_.canvas.getContext("2d"));}},T$_._onMessage=function(T$n){if(T$n.data&&"size"==T$n.data.name){if(T$_.window.innerWidth=T$n.data.width,T$_.window.innerHeight=T$n.data.height,T$_.window.__innerHeight=T$n.data.clientHeight,!T$_.document.createEvent)return void console.warn("no document.createEvent");var T$C=T$_.document.createEvent("HTMLEvents");return T$C.initEvent("resize",!1,!1),void T$_.window.dispatchEvent(T$C);}},T$_.createElement=function(T$n){return T$_.__init__(),T$_.document.__createElement(T$n);},T$_.getElementById=function(T$n){return T$_.__init__(),T$_.document.getElementById(T$n);},T$_.removeElement=function(T$n){T$n&&T$n.parentNode&&T$n.parentNode.removeChild(T$n);},T$_.now=function(){return T$w.now();},T$_._window=null,T$_._document=null,T$_._container=null,T$_.userAgent=null,T$_.u=null,T$_.onIOS=!1,T$_.onMac=!1,T$_.onMobile=!1,T$_.onIPhone=!1,T$_.onIPad=!1,T$_.onAndroid=!1,T$_.onWP=!1,T$_.onQQBrowser=!1,T$_.onMQQBrowser=!1,T$_.onSafari=!1,T$_.onFirefox=!1,T$_.onEdge=!1,T$_.onIE=!1,T$_.onWeiXin=!1,T$_.onMiniGame=!1,T$_.onLimixiu=!1,T$_.onPC=!1,T$_.httpProtocol=!1,T$_.webAudioEnabled=!1,T$_.soundType=null,T$_.enableTouch=!1,T$_.canvas=null,T$_.context=null,T$_.__init$=function(){},T$_;}()),T$G=function(){function T$C(T$n){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,T$n?(this._u8d_=new Uint8Array(T$n),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_);}T$J(T$C,"laya.utils.Byte");var T$n=T$C.prototype;return T$n.___resizeBuffer=function(T$C){try{var T$n=new Uint8Array(T$C);null!=this._u8d_&&(this._u8d_.length<=T$C?T$n.set(this._u8d_):T$n.set(this._u8d_.subarray(0,T$C))),this._u8d_=T$n,this._d_=new DataView(T$n.buffer);}catch(T$n){throw"___resizeBuffer err:"+T$C;}},T$n.getString=function(){return this.rUTF(this.getUint16());},T$n.getFloat32Array=function(T$n,T$C){var T$_=T$n+T$C;T$_=T$_>this._length?this._length:T$_;var T$E=new Float32Array(this._d_.buffer.slice(T$n,T$_));return this._pos_=T$_,T$E;},T$n.getUint8Array=function(T$n,T$C){var T$_=T$n+T$C;T$_=T$_>this._length?this._length:T$_;var T$E=new Uint8Array(this._d_.buffer.slice(T$n,T$_));return this._pos_=T$_,T$E;},T$n.getInt16Array=function(T$n,T$C){var T$_=T$n+T$C;T$_=T$_>this._length?this._length:T$_;var T$E=new Int16Array(this._d_.buffer.slice(T$n,T$_));return this._pos_=T$_,T$E;},T$n.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var T$n=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,T$n;},T$n.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var T$n=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,T$n;},T$n.writeFloat32=function(T$n){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,T$n,this._xd_),this._pos_+=4;},T$n.writeFloat64=function(T$n){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,T$n,this._xd_),this._pos_+=8;},T$n.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var T$n=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,T$n;},T$n.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var T$n=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,T$n;},T$n.writeInt32=function(T$n){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,T$n,this._xd_),this._pos_+=4;},T$n.writeUint32=function(T$n){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,T$n,this._xd_),this._pos_+=4;},T$n.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var T$n=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,T$n;},T$n.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var T$n=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,T$n;},T$n.writeUint16=function(T$n){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,T$n,this._xd_),this._pos_+=2;},T$n.writeInt16=function(T$n){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,T$n,this._xd_),this._pos_+=2;},T$n.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++);},T$n.writeUint8=function(T$n){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,T$n),this._pos_++;},T$n._getUInt8=function(T$n){return this._d_.getUint8(T$n);},T$n._getUint16=function(T$n){return this._d_.getUint16(T$n,this._xd_);},T$n._getMatrix=function(){return new T$B(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32());},T$n.rUTF=function(T$n){for(var T$C=[],T$_=this._pos_+T$n,T$E=0,T$y=0,T$p=0,T$c=String.fromCharCode,T$l=this._u8d_;this._pos_<T$_;)(T$E=T$l[this._pos_++])<128?0!=T$E&&T$C.push(T$c(T$E)):T$E<224?T$C.push(T$c((63&T$E)<<6|127&T$l[this._pos_++])):T$E<240?(T$y=T$l[this._pos_++],T$C.push(T$c((31&T$E)<<12|(127&T$y)<<6|127&T$l[this._pos_++]))):(T$y=T$l[this._pos_++],T$p=T$l[this._pos_++],T$C.push(T$c((15&T$E)<<18|(127&T$y)<<12|T$p<<6&127|127&T$l[this._pos_++]))),0;return T$C.join("");},T$n.getCustomString=function(T$n){for(var T$C=[],T$_=0,T$E=0,T$y=0,T$p=String.fromCharCode,T$c=this._u8d_;0<T$n;)if((T$E=T$c[this._pos_])<128)T$C.push(T$p(T$E)),this._pos_++,T$n--;else for(T$_=T$E-128,this._pos_++,T$n-=T$_;0<T$_;)T$E=T$c[this._pos_++],T$y=T$c[this._pos_++],T$C.push(T$p(T$y<<8|T$E)),T$_--;return T$C.join("");},T$n.clear=function(){this._pos_=0,this.length=0;},T$n.__getBuffer=function(){return this._d_.buffer;},T$n.writeUTFBytes=function(T$n){for(var T$C=0,T$_=(T$n+="").length;T$C<T$_;T$C++){var T$E=T$n.charCodeAt(T$C);T$E<=127?this.writeByte(T$E):T$E<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|T$E>>6,128|63&T$E],this._pos_),this._pos_+=2):T$E<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|T$E>>12,128|T$E>>6&63,128|63&T$E],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|T$E>>18,128|T$E>>12&63,128|T$E>>6&63,128|63&T$E],this._pos_),this._pos_+=4);}},T$n.writeUTFString=function(T$n){var T$C=this.pos;this.writeUint16(1),this.writeUTFBytes(T$n);var T$_=this.pos-T$C-2;if(65536<=T$_)throw"writeUTFString byte len more than 65536";this._d_.setUint16(T$C,T$_,this._xd_);},T$n.readUTFString=function(){return this.readUTFBytes(this.getUint16());},T$n.getUTFString=function(){return this.readUTFString();},T$n.readUTFBytes=function(T$n){if(void 0===T$n&&(T$n=-1),0==T$n)return"";var T$C=this.bytesAvailable;if(T$C<T$n)throw"readUTFBytes error - Out of bounds";return T$n=0<T$n?T$n:T$C,this.rUTF(T$n);},T$n.getUTFBytes=function(T$n){return void 0===T$n&&(T$n=-1),this.readUTFBytes(T$n);},T$n.writeByte=function(T$n){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,T$n),this._pos_+=1;},T$n.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++);},T$n.getByte=function(){return this.readByte();},T$n.ensureWrite=function(T$n){this._length<T$n&&(this._length=T$n),this._allocated_<T$n&&(this.length=T$n);},T$n.writeArrayBuffer=function(T$n,T$C,T$_){if(void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0),T$C<0||T$_<0)throw"writeArrayBuffer error - Out of bounds";0==T$_&&(T$_=T$n.byteLength-T$C),this.ensureWrite(this._pos_+T$_);var T$E=new Uint8Array(T$n);this._u8d_.set(T$E.subarray(T$C,T$C+T$_),this._pos_),this._pos_+=T$_;},T$b(0,T$n,"buffer",function(){var T$n=this._d_.buffer;return T$n.byteLength==this.length?T$n:T$n.slice(0,this.length);}),T$b(0,T$n,"endian",function(){return this._xd_?"littleEndian":"bigEndian";},function(T$n){this._xd_="littleEndian"==T$n;}),T$b(0,T$n,"length",function(){return this._length;},function(T$n){this._allocated_<T$n?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(T$n,2*this._allocated_))):this._allocated_>T$n&&this.___resizeBuffer(this._allocated_=T$n),this._length=T$n;}),T$b(0,T$n,"pos",function(){return this._pos_;},function(T$n){this._pos_=T$n;}),T$b(0,T$n,"bytesAvailable",function(){return this._length-this._pos_;}),T$C.getSystemEndian=function(){if(!T$C._sysEndian){var T$n=new ArrayBuffer(2);new DataView(T$n).setInt16(0,256,!0),T$C._sysEndian=256===new Int16Array(T$n)[0]?"littleEndian":"bigEndian";}return T$C._sysEndian;},T$C.BIG_ENDIAN="bigEndian",T$C.LITTLE_ENDIAN="littleEndian",T$C._sysEndian=null,T$C;}(),T$F=function(){function T$y(){}return T$J(T$y,"laya.utils.CacheManager"),T$y.regCacheByFunction=function(T$n,T$C){var T$_;T$y.unRegCacheByFunction(T$n,T$C),T$_={tryDispose:T$n,getCacheList:T$C},T$y._cacheList.push(T$_);},T$y.unRegCacheByFunction=function(T$n,T$C){var T$_,T$E=0;for(T$_=T$y._cacheList.length,T$E=0;T$E<T$_;T$E++)if(T$y._cacheList[T$E].tryDispose==T$n&&T$y._cacheList[T$E].getCacheList==T$C)return void T$y._cacheList.splice(T$E,1);},T$y.forceDispose=function(){var T$n=0,T$C=T$y._cacheList.length;for(T$n=0;T$n<T$C;T$n++)T$y._cacheList[T$n].tryDispose(!0);},T$y.beginCheck=function(T$n){void 0===T$n&&(T$n=15e3),T$T.timer.loop(T$n,null,T$y._checkLoop);},T$y.stopCheck=function(){T$T.timer.clear(null,T$y._checkLoop);},T$y._checkLoop=function(){var T$n=T$y._cacheList;if(!(T$n.length<1)){var T$C,T$_=T$e.now(),T$E=0;for(T$C=T$E=T$n.length;0<T$E&&(T$n[T$y._index=++T$y._index%T$C].tryDispose(!1),!(T$e.now()-T$_>T$y.loopTimeLimit));)T$E--;}},T$y.loopTimeLimit=2,T$y._cacheList=[],T$y._index=0,T$y;}(),T$u=function(){function T$x(){}return T$J(T$x,"laya.utils.ClassUtils"),T$x.regClass=function(T$n,T$C){T$x._classMap[T$n]=T$C;},T$x.getRegClass=function(T$n){return T$x._classMap[T$n];},T$x.getInstance=function(T$n){var T$C=T$x.getClass(T$n);return T$C?new T$C():(console.warn("[error] Undefined class:",T$n),null);},T$x.createByJson=function(T$n,T$C,T$_,T$E,T$y){"string"==typeof T$n&&(T$n=JSON.parse(T$n));var T$p=T$n.props;if(!T$C&&!(T$C=T$y?T$y.runWith(T$n):T$x.getInstance(T$p.runtime||T$n.type)))return null;var T$c=T$n.child;if(T$c)for(var T$l=0,T$W=T$c.length;T$l<T$W;T$l++){var T$q=T$c[T$l];if("render"!==T$q.props.name&&"render"!==T$q.props.renderType||!T$C._$set_itemRender){if("Graphic"==T$q.type)T$x.addGraphicsToSprite(T$q,T$C);else if(T$x.isDrawType(T$q.type))T$x.addGraphicToSprite(T$q,T$C,!0);else{var T$J=T$x.createByJson(T$q,null,T$_,T$E,T$y);"Script"==T$q.type?T$J.hasOwnProperty("owner")?T$J.owner=T$C:T$J.hasOwnProperty("target")&&(T$J.target=T$C):"mask"==T$q.props.renderType?T$C.mask=T$J:T$C.addChild(T$J);}}else T$C.itemRender=T$q;}if(T$p)for(var T$j in T$p){var T$P=T$p[T$j];"var"===T$j&&T$_?T$_[T$P]=T$C:T$P instanceof Array&&"function"==typeof T$C[T$j]?T$C[T$j].apply(T$C,T$P):T$C[T$j]=T$P;}return T$E&&T$n.customProps&&T$E.runWith([T$C,T$n]),T$C.created&&T$C.created(),T$C;},T$x.addGraphicsToSprite=function(T$n,T$C){var T$_;if((T$_=T$n.child)&&!(T$_.length<1)){var T$E;T$E=T$x._getGraphicsFromSprite(T$n,T$C);var T$y=0,T$p=0;T$n.props&&(T$y=T$x._getObjVar(T$n.props,"x",0),T$p=T$x._getObjVar(T$n.props,"y",0)),0!=T$y&&0!=T$p&&T$E.translate(T$y,T$p);var T$c,T$l=0;for(T$c=T$_.length,T$l=0;T$l<T$c;T$l++)T$x._addGraphicToGraphics(T$_[T$l],T$E);0!=T$y&&0!=T$p&&T$E.translate(-T$y,-T$p);}},T$x.addGraphicToSprite=function(T$n,T$C,T$_){var T$E;void 0===T$_&&(T$_=!1),T$E=T$_?T$x._getGraphicsFromSprite(T$n,T$C):T$C.graphics,T$x._addGraphicToGraphics(T$n,T$E);},T$x._getGraphicsFromSprite=function(T$n,T$C){var T$_,T$E;if(!T$n||!T$n.props)return T$C.graphics;switch(T$E=T$n.props.renderType){case"hit":case"unHit":var T$y;T$C.hitArea||(T$C.hitArea=new T$Z()),(T$y=T$C.hitArea)[T$E]||(T$y[T$E]=new T$P()),T$_=T$y[T$E];}return T$_||(T$_=T$C.graphics),T$_;},T$x._getTransformData=function(T$n){var T$C;(T$n.hasOwnProperty("pivotX")||T$n.hasOwnProperty("pivotY"))&&(T$C=T$C||new T$B()).translate(-T$x._getObjVar(T$n,"pivotX",0),-T$x._getObjVar(T$n,"pivotY",0));var T$_=T$x._getObjVar(T$n,"scaleX",1),T$E=T$x._getObjVar(T$n,"scaleY",1),T$y=T$x._getObjVar(T$n,"rotation",0);T$x._getObjVar(T$n,"skewX",0),T$x._getObjVar(T$n,"skewY",0);return 1==T$_&&1==T$E&&0==T$y||((T$C=T$C||new T$B()).scale(T$_,T$E),T$C.rotate(.0174532922222222*T$y)),T$C;},T$x._addGraphicToGraphics=function(T$n,T$C){var T$_,T$E;if((T$_=T$n.props)&&(T$E=T$x.DrawTypeDic[T$n.type])){var T$y,T$p;T$y=T$C;var T$c=T$x._getParams(T$_,T$E[1],T$E[2],T$E[3]);((T$p=T$x._tM)||1!=T$x._alpha)&&(T$y.save(),T$p&&T$y.transform(T$p),1!=T$x._alpha&&T$y.alpha(T$x._alpha)),T$y[T$E[0]].apply(T$y,T$c),(T$p||1!=T$x._alpha)&&T$y.restore();}},T$x._adptLineData=function(T$n){return T$n[2]=parseFloat(T$n[0])+parseFloat(T$n[2]),T$n[3]=parseFloat(T$n[1])+parseFloat(T$n[3]),T$n;},T$x._adptTextureData=function(T$n){return T$n[0]=T$ln.getRes(T$n[0]),T$n;},T$x._adptLinesData=function(T$n){return T$n[2]=T$x._getPointListByStr(T$n[2]),T$n;},T$x.isDrawType=function(T$n){return"Image"!=T$n&&T$x.DrawTypeDic.hasOwnProperty(T$n);},T$x._getParams=function(T$n,T$C,T$_,T$E){var T$y;void 0===T$_&&(T$_=0),(T$y=T$x._temParam).length=T$C.length;var T$p,T$c,T$l=0;for(T$p=T$C.length,T$l=0;T$l<T$p;T$l++)T$y[T$l]=T$x._getObjVar(T$n,T$C[T$l][0],T$C[T$l][1]);return T$x._alpha=T$x._getObjVar(T$n,"alpha",1),T$c=T$x._getTransformData(T$n),T$x._tM=T$c?(T$_||(T$_=0),T$c.translate(T$y[T$_],T$y[T$_+1]),T$y[T$_]=T$y[T$_+1]=0,T$c):null,T$E&&T$x[T$E]&&(T$y=T$x[T$E](T$y)),T$y;},T$x._getPointListByStr=function(T$n){var T$C,T$_,T$E=0;for(T$_=(T$C=T$n.split(",")).length,T$E=0;T$E<T$_;T$E++)T$C[T$E]=parseFloat(T$C[T$E]);return T$C;},T$x._getObjVar=function(T$n,T$C,T$_){return T$n.hasOwnProperty(T$C)?T$n[T$C]:T$_;},T$x._temParam=[],T$x._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},T$x.getClass=function(T$n){var T$C=T$x._classMap[T$n]||T$n;return"string"==typeof T$C?T$T.__classmap[T$C]:T$C;},T$x._tM=null,T$x._alpha=NaN,T$W(T$x,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]};}]),T$x;}(),T$o=function(){function T$p(T$n){if(this._color=[],"string"==typeof T$n){null===(this.strColor=T$n)&&(T$n="#000000"),"#"==T$n.charAt(0)&&(T$n=T$n.substr(1));var T$C=T$n.length;if(3==T$C||4==T$C){for(var T$_="",T$E=0;T$E<T$C;T$E++)T$_+=T$n[T$E]+T$n[T$E];T$n=T$_;}var T$y=this.numColor=parseInt(T$n,16);if(8==T$n.length)return void(this._color=[parseInt(T$n.substr(0,2),16)/255,((16711680&T$y)>>16)/255,((65280&T$y)>>8)/255,(255&T$y)/255]);}else T$y=this.numColor=T$n,this.strColor=T$z.toHexColor(T$y);this._color=[((16711680&T$y)>>16)/255,((65280&T$y)>>8)/255,(255&T$y)/255,1],this._color.__id=++T$p._COLODID;}return T$J(T$p,"laya.utils.Color"),T$p._initDefault=function(){for(var T$n in T$p._DEFAULT={},T$p._COLOR_MAP)T$p._SAVE[T$n]=T$p._DEFAULT[T$n]=new T$p(T$p._COLOR_MAP[T$n]);return T$p._DEFAULT;},T$p._initSaveMap=function(){for(var T$n in T$p._SAVE_SIZE=0,T$p._SAVE={},T$p._DEFAULT)T$p._SAVE[T$n]=T$p._DEFAULT[T$n];},T$p.create=function(T$n){var T$C=T$p._SAVE[T$n+""];return null!=T$C?T$C:(T$p._SAVE_SIZE<1e3||T$p._initSaveMap(),T$p._SAVE[T$n+""]=new T$p(T$n));},T$p._SAVE={},T$p._SAVE_SIZE=0,T$p._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},T$p._DEFAULT=T$p._initDefault(),T$p._COLODID=1,T$p;}(),T$Q=(function(){function T$n(){this._values=[],this._keys=[];}T$J(T$n,"laya.utils.Dictionary");var T$C=T$n.prototype;T$C.set=function(T$n,T$C){var T$_=this.indexOf(T$n);0<=T$_?this._values[T$_]=T$C:(this._keys.push(T$n),this._values.push(T$C));},T$C.indexOf=function(T$n){var T$C=this._keys.indexOf(T$n);return 0<=T$C?T$C:(T$n="string"==typeof T$n?Number(T$n):"number"==typeof T$n?T$n.toString():T$n,this._keys.indexOf(T$n));},T$C.get=function(T$n){var T$C=this.indexOf(T$n);return T$C<0?null:this._values[T$C];},T$C.remove=function(T$n){var T$C=this.indexOf(T$n);return 0<=T$C&&(this._keys.splice(T$C,1),this._values.splice(T$C,1),!0);},T$C.clear=function(){this._values.length=0,this._keys.length=0;},T$b(0,T$C,"values",function(){return this._values;}),T$b(0,T$C,"keys",function(){return this._keys;});}(),function(){function T$n(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0;}T$J(T$n,"laya.utils.Dragging");var T$C=T$n.prototype;return T$C.start=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){void 0===T$l&&(T$l=.92),this.clearTimer(),this.target=T$n,this.area=T$C,this.hasInertia=T$_,this.elasticDistance=T$C?T$E:0,this.elasticBackTime=T$y,this.data=T$p,this._disableMouseEvent=T$c,this.ratio=T$l,1!=T$n.globalScaleX||1!=T$n.globalScaleY?this._parent=T$n.parent:this._parent=T$T.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,T$T.stage.on("mouseup",this,this.onStageMouseUp),T$T.stage.on("mouseout",this,this.onStageMouseUp),T$T.timer.frameLoop(1,this,this.loop);},T$C.clearTimer=function(){T$T.timer.clear(this,this.loop),T$T.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null);},T$C.stop=function(){this._dragging&&(T$r.instance.disableMouseEvent=!1,T$T.stage.off("mouseup",this,this.onStageMouseUp),T$T.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear());},T$C.loop=function(){var T$n=this._parent.getMousePoint(),T$C=T$n.x,T$_=T$n.y,T$E=T$C-this._lastX,T$y=T$_-this._lastY;if(this._clickOnly){if(!(1<Math.abs(T$E*T$T.stage._canvasTransform.getScaleX())||1<Math.abs(T$y*T$T.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),T$r.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1);}else this._offsets.push(T$E,T$y);0==T$E&&0==T$y||(this._lastX=T$C,this._lastY=T$_,this.target.x+=T$E*this._elasticRateX,this.target.y+=T$y*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data));},T$C.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var T$n=this.area.x-this.target.x;else T$n=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-T$n/this.elasticDistance),this.target.y<this.area.y)var T$C=this.area.y-this.target.y;else T$C=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-T$C/this.elasticDistance);}},T$C.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height);},T$C.onStageMouseUp=function(T$n){if(T$r.instance.disableMouseEvent=!1,T$T.stage.off("mouseup",this,this.onStageMouseUp),T$T.stage.off("mouseout",this,this.onStageMouseUp),T$T.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var T$C=this._offsets.length,T$_=Math.min(T$C,6),T$E=this._offsets.length-T$_,T$y=T$C-1;T$E<T$y;T$y--)this._offsetY+=this._offsets[T$y--],this._offsetX+=this._offsets[T$y];this._offsetX=this._offsetX/T$_*2,this._offsetY=this._offsetY/T$_*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),T$T.timer.frameLoop(1,this,this.tweenMove);}else 0<this.elasticDistance?this.checkElastic():this.clear();},T$C.checkElastic=function(){var T$n=NaN,T$C=NaN;if(this.target.x<this.area.x?T$n=this.area.x:this.target.x>this.area.x+this.area.width&&(T$n=this.area.x+this.area.width),this.target.y<this.area.y?T$C=this.area.y:this.target.y>this.area.y+this.area.height&&(T$C=this.area.y+this.area.height),isNaN(T$n)&&isNaN(T$C))this.clear();else{var T$_={};isNaN(T$n)||(T$_.x=T$n),isNaN(T$C)||(T$_.y=T$C),this._tween=T$R.to(this.target,T$_,this.elasticBackTime,T$I.sineOut,T$a.create(this,this.clear),0,!1,!1);}},T$C.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(T$T.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear());},T$C.clear=function(){if(this.target){this.clearTimer();var T$n=this.target;this.target=null,this._parent=null,T$n.event("dragend",this.data);}},T$n;}()),T$I=function(){function T$l(){}return T$J(T$l,"laya.utils.Ease"),T$l.linearNone=function(T$n,T$C,T$_,T$E){return T$_*T$n/T$E+T$C;},T$l.linearIn=function(T$n,T$C,T$_,T$E){return T$_*T$n/T$E+T$C;},T$l.linearInOut=function(T$n,T$C,T$_,T$E){return T$_*T$n/T$E+T$C;},T$l.linearOut=function(T$n,T$C,T$_,T$E){return T$_*T$n/T$E+T$C;},T$l.bounceIn=function(T$n,T$C,T$_,T$E){return T$_-T$l.bounceOut(T$E-T$n,0,T$_,T$E)+T$C;},T$l.bounceInOut=function(T$n,T$C,T$_,T$E){return T$n<.5*T$E?.5*T$l.bounceIn(2*T$n,0,T$_,T$E)+T$C:.5*T$l.bounceOut(2*T$n-T$E,0,T$_,T$E)+.5*T$_+T$C;},T$l.bounceOut=function(T$n,T$C,T$_,T$E){return(T$n/=T$E)<1/2.75?T$_*(7.5625*T$n*T$n)+T$C:T$n<2/2.75?T$_*(7.5625*(T$n-=1.5/2.75)*T$n+.75)+T$C:T$n<2.5/2.75?T$_*(7.5625*(T$n-=2.25/2.75)*T$n+.9375)+T$C:T$_*(7.5625*(T$n-=2.625/2.75)*T$n+.984375)+T$C;},T$l.backIn=function(T$n,T$C,T$_,T$E,T$y){return void 0===T$y&&(T$y=1.70158),T$_*(T$n/=T$E)*T$n*((T$y+1)*T$n-T$y)+T$C;},T$l.backInOut=function(T$n,T$C,T$_,T$E,T$y){return void 0===T$y&&(T$y=1.70158),(T$n/=.5*T$E)<1?.5*T$_*(T$n*T$n*((1+(T$y*=1.525))*T$n-T$y))+T$C:T$_/2*((T$n-=2)*T$n*((1+(T$y*=1.525))*T$n+T$y)+2)+T$C;},T$l.backOut=function(T$n,T$C,T$_,T$E,T$y){return void 0===T$y&&(T$y=1.70158),T$_*((T$n=T$n/T$E-1)*T$n*((T$y+1)*T$n+T$y)+1)+T$C;},T$l.elasticIn=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c;return void 0===T$y&&(T$y=0),void 0===T$p&&(T$p=0),0==T$n?T$C:1==(T$n/=T$E)?T$C+T$_:(T$p||(T$p=.3*T$E),T$c=!T$y||0<T$_&&T$y<T$_||T$_<0&&T$y<-T$_?(T$y=T$_,T$p/4):T$p/T$l.PI2*Math.asin(T$_/T$y),-T$y*Math.pow(2,10*(T$n-=1))*Math.sin((T$n*T$E-T$c)*T$l.PI2/T$p)+T$C);},T$l.elasticInOut=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c;return void 0===T$y&&(T$y=0),void 0===T$p&&(T$p=0),0==T$n?T$C:2==(T$n/=.5*T$E)?T$C+T$_:(T$p||(T$p=T$E*(.3*1.5)),T$c=!T$y||0<T$_&&T$y<T$_||T$_<0&&T$y<-T$_?(T$y=T$_,T$p/4):T$p/T$l.PI2*Math.asin(T$_/T$y),T$n<1?T$y*Math.pow(2,10*(T$n-=1))*Math.sin((T$n*T$E-T$c)*T$l.PI2/T$p)*-.5+T$C:T$y*Math.pow(2,-10*(T$n-=1))*Math.sin((T$n*T$E-T$c)*T$l.PI2/T$p)*.5+T$_+T$C);},T$l.elasticOut=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c;return void 0===T$y&&(T$y=0),void 0===T$p&&(T$p=0),0==T$n?T$C:1==(T$n/=T$E)?T$C+T$_:(T$p||(T$p=.3*T$E),T$c=!T$y||0<T$_&&T$y<T$_||T$_<0&&T$y<-T$_?(T$y=T$_,T$p/4):T$p/T$l.PI2*Math.asin(T$_/T$y),T$y*Math.pow(2,-10*T$n)*Math.sin((T$n*T$E-T$c)*T$l.PI2/T$p)+T$_+T$C);},T$l.strongIn=function(T$n,T$C,T$_,T$E){return T$_*(T$n/=T$E)*T$n*T$n*T$n*T$n+T$C;},T$l.strongInOut=function(T$n,T$C,T$_,T$E){return(T$n/=.5*T$E)<1?.5*T$_*T$n*T$n*T$n*T$n*T$n+T$C:.5*T$_*((T$n-=2)*T$n*T$n*T$n*T$n+2)+T$C;},T$l.strongOut=function(T$n,T$C,T$_,T$E){return T$_*((T$n=T$n/T$E-1)*T$n*T$n*T$n*T$n+1)+T$C;},T$l.sineInOut=function(T$n,T$C,T$_,T$E){return .5*-T$_*(Math.cos(Math.PI*T$n/T$E)-1)+T$C;},T$l.sineIn=function(T$n,T$C,T$_,T$E){return-T$_*Math.cos(T$n/T$E*T$l.HALF_PI)+T$_+T$C;},T$l.sineOut=function(T$n,T$C,T$_,T$E){return T$_*Math.sin(T$n/T$E*T$l.HALF_PI)+T$C;},T$l.quintIn=function(T$n,T$C,T$_,T$E){return T$_*(T$n/=T$E)*T$n*T$n*T$n*T$n+T$C;},T$l.quintInOut=function(T$n,T$C,T$_,T$E){return(T$n/=.5*T$E)<1?.5*T$_*T$n*T$n*T$n*T$n*T$n+T$C:.5*T$_*((T$n-=2)*T$n*T$n*T$n*T$n+2)+T$C;},T$l.quintOut=function(T$n,T$C,T$_,T$E){return T$_*((T$n=T$n/T$E-1)*T$n*T$n*T$n*T$n+1)+T$C;},T$l.quartIn=function(T$n,T$C,T$_,T$E){return T$_*(T$n/=T$E)*T$n*T$n*T$n+T$C;},T$l.quartInOut=function(T$n,T$C,T$_,T$E){return(T$n/=.5*T$E)<1?.5*T$_*T$n*T$n*T$n*T$n+T$C:.5*-T$_*((T$n-=2)*T$n*T$n*T$n-2)+T$C;},T$l.quartOut=function(T$n,T$C,T$_,T$E){return-T$_*((T$n=T$n/T$E-1)*T$n*T$n*T$n-1)+T$C;},T$l.cubicIn=function(T$n,T$C,T$_,T$E){return T$_*(T$n/=T$E)*T$n*T$n+T$C;},T$l.cubicInOut=function(T$n,T$C,T$_,T$E){return(T$n/=.5*T$E)<1?.5*T$_*T$n*T$n*T$n+T$C:.5*T$_*((T$n-=2)*T$n*T$n+2)+T$C;},T$l.cubicOut=function(T$n,T$C,T$_,T$E){return T$_*((T$n=T$n/T$E-1)*T$n*T$n+1)+T$C;},T$l.quadIn=function(T$n,T$C,T$_,T$E){return T$_*(T$n/=T$E)*T$n+T$C;},T$l.quadInOut=function(T$n,T$C,T$_,T$E){return(T$n/=.5*T$E)<1?.5*T$_*T$n*T$n+T$C:.5*-T$_*(--T$n*(T$n-2)-1)+T$C;},T$l.quadOut=function(T$n,T$C,T$_,T$E){return-T$_*(T$n/=T$E)*(T$n-2)+T$C;},T$l.expoIn=function(T$n,T$C,T$_,T$E){return 0==T$n?T$C:T$_*Math.pow(2,10*(T$n/T$E-1))+T$C-.001*T$_;},T$l.expoInOut=function(T$n,T$C,T$_,T$E){return 0==T$n?T$C:T$n==T$E?T$C+T$_:(T$n/=.5*T$E)<1?.5*T$_*Math.pow(2,10*(T$n-1))+T$C:.5*T$_*(2-Math.pow(2,-10*--T$n))+T$C;},T$l.expoOut=function(T$n,T$C,T$_,T$E){return T$n==T$E?T$C+T$_:T$_*(1-Math.pow(2,-10*T$n/T$E))+T$C;},T$l.circIn=function(T$n,T$C,T$_,T$E){return-T$_*(Math.sqrt(1-(T$n/=T$E)*T$n)-1)+T$C;},T$l.circInOut=function(T$n,T$C,T$_,T$E){return(T$n/=.5*T$E)<1?.5*-T$_*(Math.sqrt(1-T$n*T$n)-1)+T$C:.5*T$_*(Math.sqrt(1-(T$n-=2)*T$n)+1)+T$C;},T$l.circOut=function(T$n,T$C,T$_,T$E){return T$_*Math.sqrt(1-(T$n=T$n/T$E-1)*T$n)+T$C;},T$l.HALF_PI=.5*Math.PI,T$l.PI2=2*Math.PI,T$l;}(),T$Z=function(){function T$j(){this._hit=null,this._unHit=null;}T$J(T$j,"laya.utils.HitArea");var T$n=T$j.prototype;return T$n.isHit=function(T$n,T$C){return!!T$j.isHitGraphic(T$n,T$C,this.hit)&&!T$j.isHitGraphic(T$n,T$C,this.unHit);},T$n.contains=function(T$n,T$C){return this.isHit(T$n,T$C);},T$b(0,T$n,"hit",function(){return this._hit||(this._hit=new T$P()),this._hit;},function(T$n){this._hit=T$n;}),T$b(0,T$n,"unHit",function(){return this._unHit||(this._unHit=new T$P()),this._unHit;},function(T$n){this._unHit=T$n;}),T$j.isHitGraphic=function(T$n,T$C,T$_){if(!T$_)return!1;var T$E;if(!(T$E=T$_.cmds)&&T$_._one&&((T$E=T$j._cmds).length=1,T$E[0]=T$_._one),!T$E)return!1;var T$y,T$p,T$c=0;for(T$y=T$E.length,T$c=0;T$c<T$y;T$c++)if(T$p=T$E[T$c]){var T$l=T$H._context;switch(T$p.callee){case T$l._translate:case 6:T$n-=T$p[0],T$C-=T$p[1];}if(T$j.isHitCmd(T$n,T$C,T$p))return!0;}return!1;},T$j.isHitCmd=function(T$n,T$C,T$_){if(!T$_)return!1;var T$E=T$H._context,T$y=!1;switch(T$_.callee){case T$E._drawRect:case 13:T$j._rec.setTo(T$_[0],T$_[1],T$_[2],T$_[3]),T$y=T$j._rec.contains(T$n,T$C);break;case T$E._drawCircle:case T$E._fillCircle:case 14:T$y=(T$n-=T$_[0])*T$n+(T$C-=T$_[1])*T$C<T$_[2]*T$_[2];break;case T$E._drawPoly:case 18:T$n-=T$_[0],T$C-=T$_[1],T$y=T$j.ptInPolygon(T$n,T$C,T$_[2]);}return T$y;},T$j.ptInPolygon=function(T$n,T$C,T$_){var T$E;(T$E=T$j._ptPoint).setTo(T$n,T$C);var T$y,T$p=0,T$c=NaN,T$l=NaN,T$W=NaN,T$q=NaN;T$y=T$_.length;for(var T$J=0;T$J<T$y;T$J+=2){if(T$c=T$_[T$J],T$l=T$_[T$J+1],T$W=T$_[(T$J+2)%T$y],T$l!=(T$q=T$_[(T$J+3)%T$y]))if(!(T$E.y<Math.min(T$l,T$q)))if(!(T$E.y>=Math.max(T$l,T$q)))(T$E.y-T$l)*(T$W-T$c)/(T$q-T$l)+T$c>T$E.x&&T$p++;}return T$p%2==1;},T$j._cmds=[],T$W(T$j,["_rec",function(){return this._rec=new T$s();},"_ptPoint",function(){return this._ptPoint=new T$Y();}]),T$j;}(),T$L=(function(){function T$y(T$n,T$C,T$_,T$E){this.char=T$n,this.charNum=T$n.charCodeAt(0),this._x=this._y=0,this.width=T$C,this.height=T$_,this.style=T$E,this.isWord=!T$y._isWordRegExp.test(T$n);}T$J(T$y,"laya.utils.HTMLChar");var T$n=T$y.prototype;T$T.imps(T$n,{"laya.display.ILayout":!0}),T$n.setSprite=function(T$n){this._sprite=T$n;},T$n.getSprite=function(){return this._sprite;},T$n._isChar=function(){return!0;},T$n._getCSSStyle=function(){return this.style;},T$b(0,T$n,"width",function(){return this._w;},function(T$n){this._w=T$n;}),T$b(0,T$n,"x",function(){return this._x;},function(T$n){this._sprite&&(this._sprite.x=T$n),this._x=T$n;}),T$b(0,T$n,"y",function(){return this._y;},function(T$n){this._sprite&&(this._sprite.y=T$n),this._y=T$n;}),T$b(0,T$n,"height",function(){return this._h;},function(T$n){this._h=T$n;}),T$y._isWordRegExp=new RegExp("[\\w.]","");}(),function(){function T$C(){}T$J(T$C,"laya.utils.Log"),T$C.enable=function(){T$C._logdiv||(T$C._logdiv=T$e.window.document.createElement("div"),T$e.window.document.body.appendChild(T$C._logdiv),T$C._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;");},T$C.toggle=function(){var T$n=T$C._logdiv.style;"1px"==T$n.width?T$n.width=T$n.height="50%":T$n.width=T$n.height="1px";},T$C.print=function(T$n){T$C._logdiv&&(T$C.maxCount<=T$C._count&&T$C.clear(),T$C._count++,T$C._logdiv.innerText+=T$n+"\n",T$C._logdiv.scrollTop=T$C._logdiv.scrollHeight);},T$C.clear=function(){T$C._logdiv.innerText="",T$C._count=0;},T$C._logdiv=null,T$C._count=0,T$C.maxCount=20;}(),function(){function T$C(){}T$J(T$C,"laya.utils.Mouse"),T$b(1,T$C,"cursor",function(){return T$C._style.cursor;},function(T$n){T$C._style.cursor=T$n;}),T$C.hide=function(){"none"!=T$C.cursor&&(T$C._preCursor=T$C.cursor,T$C.cursor="none");},T$C.show=function(){"none"==T$C.cursor&&(T$C.cursor=T$C._preCursor?T$C._preCursor:"auto");},T$C._preCursor=null,T$W(T$C,["_style",function(){return this._style=T$e.document.body.style;}]);}(),function(){function T$p(){}return T$J(T$p,"laya.utils.Pool"),T$p.getPoolBySign=function(T$n){return T$p._poolDic[T$n]||(T$p._poolDic[T$n]=[]);},T$p.clearBySign=function(T$n){T$p._poolDic[T$n]&&(T$p._poolDic[T$n].length=0);},T$p.recover=function(T$n,T$C){T$C.__InPool||(T$C.__InPool=!0,T$p.getPoolBySign(T$n).push(T$C));},T$p.getItemByClass=function(T$n,T$C){var T$_=T$p.getPoolBySign(T$n),T$E=T$_.length?T$_.pop():new T$C();return T$E.__InPool=!1,T$E;},T$p.getItemByCreateFun=function(T$n,T$C,T$_){var T$E=T$p.getPoolBySign(T$n),T$y=T$E.length?T$E.pop():T$C.call(T$_);return T$y.__InPool=!1,T$y;},T$p.getItem=function(T$n){var T$C=T$p.getPoolBySign(T$n),T$_=T$C.length?T$C.pop():null;return T$_&&(T$_.__InPool=!1),T$_;},T$p._poolDic={},T$p.InPoolSign="__InPool",T$p;}()),T$h=function(){function T$W(){}return T$J(T$W,"laya.utils.Stat"),T$b(1,T$W,"onclick",null,function(T$n){T$W._sp&&T$W._sp.on("click",T$W._sp,T$n),T$W._canvas&&(T$W._canvas.source.onclick=T$n,T$W._canvas.source.style.pointerEvents="");}),T$W.show=function(T$n,T$C,T$_){if(void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0),!T$H.isConchApp||T$H.isConchWebGL){if(T$H.isConchWebGL||T$e.onMiniGame||T$e.onLimixiu||(T$W._useCanvas=!0),T$W._show=!0,T$W._fpsData.length=60,T$W._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},T$W._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},T$W._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},T$W._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},T$H.isWebGL){if(T$W._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},T$H.is3DMode){if(T$W._view[0].title="FPS(3D)",T$W._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},T$W._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},T$W._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==T$_){var T$E=8;T$W._view[T$E++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},T$W._view[T$E++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},T$W._view[T$E++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},T$W._view[T$E++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},T$W._view[T$E++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},T$W._view[T$E++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},T$W._view[T$E++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},T$W._view[T$E++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},T$W._view[T$E++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1};}else if(2==T$_){T$E=8;T$W._view[T$E++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},T$W._view[T$E++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},T$W._view[T$E++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},T$W._view[T$E++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},T$W._view[T$E++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},T$W._view[T$E++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},T$W._view[T$E++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2};}}else T$W._view[0].title="FPS(WebGL)",T$W._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};}else T$W._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};T$W._useCanvas?T$W.createUIPre(T$n,T$C):T$W.createUI(T$n,T$C),T$W.enable();}else T$e.window.conch.showFPS&&T$e.window.conch.showFPS(T$n,T$C);},T$W.createUIPre=function(T$n,T$C){var T$_=T$e.pixelRatio;T$W._width=170*T$_,T$W._vx=75*T$_,T$W._height=T$_*(12*T$W._view.length+3*T$_)+4,T$W._fontSize=12*T$_;for(var T$E=0;T$E<T$W._view.length;T$E++)T$W._view[T$E].x=4,T$W._view[T$E].y=T$E*T$W._fontSize+2*T$_;T$W._canvas||((T$W._canvas=new T$On("2D")).size(T$W._width,T$W._height),(T$W._ctx=T$W._canvas.getContext("2d")).textBaseline="top",T$W._ctx.font=T$W._fontSize+"px Sans-serif",T$W._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+T$n+"px;top:"+T$C+"px;width:"+T$W._width/T$_+"px;height:"+T$W._height/T$_+"px;"),T$W._first=!0,T$W.loop(),T$W._first=!1,T$e.container.appendChild(T$W._canvas.source);},T$W.createUI=function(T$n,T$C){var T$_=T$W._sp,T$E=T$e.pixelRatio;T$_||(T$_=new T$jn(),(T$W._leftText=new T$mn()).pos(5,5),T$W._leftText.color="#ffffff",T$_.addChild(T$W._leftText),(T$W._txt=new T$mn()).pos(80*T$E,5),T$W._txt.color="#ffffff",T$_.addChild(T$W._txt),T$W._sp=T$_),T$_.pos(T$n,T$C);for(var T$y="",T$p=0;T$p<T$W._view.length;T$p++){T$y+=T$W._view[T$p].title+"\n";}T$W._leftText.text=T$y;var T$c=170*T$E,T$l=T$E*(12*T$W._view.length+3*T$E)+4;T$W._txt.fontSize=T$W._fontSize*T$E,T$W._leftText.fontSize=T$W._fontSize*T$E,T$_.size(T$c,T$l),T$_.graphics.clear(),T$_.graphics.setAlpha(.5),T$_.graphics.drawRect(0,0,T$c,T$l,"#999999"),T$_.graphics.setAlpha(1),T$W.loop();},T$W.enable=function(){T$T.timer.frameLoop(1,T$W,T$W.loop);},T$W.hide=function(){T$W._show=!1,T$T.timer.clear(T$W,T$W.loop),T$W._canvas&&T$e.removeElement(T$W._canvas.source);},T$W.clear=function(){T$W.trianglesFaces=T$W.drawCall=T$W.shaderCall=T$W.spriteCount=T$W.spriteRenderUseCacheCount=T$W.treeNodeCollision=T$W.treeSpriteCollision=T$W.canvasNormal=T$W.canvasBitmap=T$W.canvasReCache=0;},T$W.loop=function(){T$W._count++;var T$n=T$e.now();if(!(T$n-T$W._timer<1e3)){var T$C=T$W._count;if(T$W.FPS=Math.round(1e3*T$C/(T$n-T$W._timer)),T$W._show){T$W.trianglesFaces=Math.round(T$W.trianglesFaces/T$C),T$W.spriteCount=T$W._useCanvas?(T$W.drawCall=Math.round(T$W.drawCall/T$C)-2,T$W.shaderCall=Math.round(T$W.shaderCall/T$C),Math.round(T$W.spriteCount/T$C)-1):(T$W.drawCall=Math.round(T$W.drawCall/T$C)-2,T$W.shaderCall=Math.round(T$W.shaderCall/T$C)-4,Math.round(T$W.spriteCount/T$C)-4),T$W.spriteRenderUseCacheCount=Math.round(T$W.spriteRenderUseCacheCount/T$C),T$W.canvasNormal=Math.round(T$W.canvasNormal/T$C),T$W.canvasBitmap=Math.round(T$W.canvasBitmap/T$C),T$W.canvasReCache=Math.ceil(T$W.canvasReCache/T$C),T$W.treeNodeCollision=Math.round(T$W.treeNodeCollision/T$C),T$W.treeSpriteCollision=Math.round(T$W.treeSpriteCollision/T$C);var T$_=0<T$W.FPS?Math.floor(1e3/T$W.FPS).toString():" ";T$W._fpsStr=T$W.FPS+(T$W.renderSlow?" slow":"")+" "+T$_,T$W._spriteStr=T$W.spriteCount+(T$W.spriteRenderUseCacheCount?"/"+T$W.spriteRenderUseCacheCount:""),T$W._canvasStr=T$W.canvasReCache+"/"+T$W.canvasNormal+"/"+T$W.canvasBitmap,T$W.currentMemorySize=T$f.systemResourceManager.memorySize,T$W._useCanvas?T$W.renderInfoPre():T$W.renderInfo(),T$W.clear();}T$W._count=0,T$W._timer=T$n;}},T$W.renderInfoPre=function(){if(T$W._canvas){var T$n=T$W._ctx;T$n.clearRect(T$W._first?0:T$W._vx,0,T$W._width,T$W._height);for(var T$C=T$H.WebGL.mainContext,T$_=0;T$_<T$W._view.length;T$_++){var T$E=T$W._view[T$_];T$W._first&&(T$n.fillStyle="white",T$n.fillText(T$E.title,T$E.x,T$E.y,null,null,null)),T$n.fillStyle=T$E.color;var T$y=-1;if((T$E=T$W._view[T$_]).varying){if(T$C)switch(T$E.varying){case 1:T$y=T$C.getParameter(T$C[T$E.value]);break;case 2:T$y=T$C.getExtension(T$E.value);}}else T$y=T$W[T$E.value];"M"==T$E.units&&(T$y=Math.floor(T$y/1048576*100)/100+" M"),"K"==T$E.units&&(T$y=Math.floor(T$y/1024*100)/100+" K"),"string"==T$E.units&&(T$y=T$y.match(/\d+\.?\d/i)),T$n.fillText(T$y+"",T$E.x+T$W._vx,T$E.y,null,null,null);}}},T$W.renderInfo=function(){for(var T$n="",T$C=T$H.WebGL.mainContext,T$_=0;T$_<T$W._view.length;T$_++){var T$E=T$W._view[T$_],T$y=-1;if(T$E.varying){if(T$C)switch(T$E.varying){case 1:T$y=T$C.getParameter(T$C[T$E.value]);break;case 2:T$y=T$C.getExtension(T$E.value);}}else T$y=T$W[T$E.value];"M"==T$E.units&&(T$y=Math.floor(T$y/1048576*100)/100+" M"),"K"==T$E.units&&(T$y=Math.floor(T$y/1024*100)/100+" K"),"string"==T$E.units&&(T$y=T$y.match(/\d+\.?\d/i)),T$n+=T$y+"\n";}T$W._txt.text=T$n;},T$W.FPS=0,T$W.loopCount=0,T$W.shaderCall=0,T$W.drawCall=0,T$W.trianglesFaces=0,T$W.spriteCount=0,T$W.spriteRenderUseCacheCount=0,T$W.treeNodeCollision=0,T$W.treeSpriteCollision=0,T$W.canvasNormal=0,T$W.canvasBitmap=0,T$W.canvasReCache=0,T$W.renderSlow=!1,T$W.currentMemorySize=0,T$W._fpsStr=null,T$W._canvasStr=null,T$W._spriteStr=null,T$W._fpsData=[],T$W._timer=0,T$W._count=0,T$W._view=[],T$W._fontSize=12,T$W._txt=null,T$W._leftText=null,T$W._sp=null,T$W._show=!1,T$W._useCanvas=!1,T$W._canvas=null,T$W._ctx=null,T$W._first=!1,T$W._vx=NaN,T$W._width=0,T$W._height=100,T$W;}(),T$v=(function(){function T$n(){this._strsToID={},this._idToStrs=[],this._length=0;}T$J(T$n,"laya.utils.StringKey");var T$C=T$n.prototype;T$C.add=function(T$n){var T$C=this._strsToID[T$n];return null!=T$C?T$C:(this._idToStrs[this._length]=T$n,this._strsToID[T$n]=this._length++);},T$C.getID=function(T$n){var T$C=this._strsToID[T$n];return null==T$C?-1:T$C;},T$C.getName=function(T$n){var T$C=this._idToStrs[T$n];return null==T$C?void 0:T$C;};}(),function(){var T$q;function T$n(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init();}T$J(T$n,"laya.utils.Timer");var T$C=T$n.prototype;return T$C._init=function(){T$T.timer&&T$T.timer.frameLoop(1,this,this._update);},T$C._now=function(){return Date.now();},T$C._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var T$n=this.currFrame=this.currFrame+this.scale,T$C=this._now();this._delta=(T$C-this._lastTimer)*this.scale;var T$_=this.currTimer=this.currTimer+this._delta;T$T.isDebug&&6e4<Math.abs(T$C-this._lastTimer)&&console.error("系统时间错误！"+(T$C-this._lastTimer)),this._lastTimer=T$C;var T$E=this._handlers;for(T$c=this._count=0,T$l=T$E.length;T$c<T$l;T$c++)if(null!==(T$W=T$E[T$c]).method){var T$y=T$W.userFrame?T$n:T$_;if(T$y>=T$W.exeTime)if(T$W.repeat){if(T$W.jumpFrame)for(;T$y>=T$W.exeTime;)T$W.exeTime+=T$W.delay,T$W.run(!1);else T$W.exeTime+=T$W.delay,T$W.run(!1),T$y>T$W.exeTime&&(T$W.exeTime+=Math.ceil((T$y-T$W.exeTime)/T$W.delay)*T$W.delay);}else T$W.run(!0);}else this._count++;(30<this._count||T$n%200==0)&&this._clearHandlers();for(var T$p=this._laters,T$c=0,T$l=T$p.length-1;T$c<=T$l;T$c++){var T$W=T$p[T$c];this._isIgnoreRecover(T$W)||(null!==T$W.method&&(delete this._map[T$W.key],T$W.run(!1)),this._recoverHandler(T$W)),T$c===T$l&&(T$l=T$p.length-1);}T$p.length=0;}},T$C._clearHandlers=function(){for(var T$n=this._handlers,T$C=0,T$_=T$n.length;T$C<T$_;T$C++){var T$E=T$n[T$C];null!==T$E.method?this._temp.push(T$E):this._isIgnoreRecover(T$E)?this._temp.push(T$E):this._recoverHandler(T$E);}this._handlers=this._temp,this._temp=T$n,this._temp.length=0;},T$C._recoverHandler=function(T$n){this._map[T$n.key]==T$n&&delete this._map[T$n.key],T$n.recover();},T$C._create=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){if(!T$_)return T$y.apply(T$E,T$p),null;if(T$c){var T$W=this._getHandler(T$E,T$y);if(T$W)return T$W.repeat=T$C,T$W.userFrame=T$n,T$W.delay=T$_,T$W.ignoreRecover=T$l,T$W.caller=T$E,T$W.method=T$y,T$W.args=T$p,T$W.exeTime=T$_+(T$n?this.currFrame:this.currTimer+this._now()-this._lastTimer),T$W;}return(T$W=T$q.create()).repeat=T$C,T$W.userFrame=T$n,T$W.delay=T$_,T$W.ignoreRecover=T$l,T$W.caller=T$E,T$W.method=T$y,T$W.args=T$p,T$W.exeTime=T$_+(T$n?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(T$W),this._handlers.push(T$W),T$W;},T$C._indexHandler=function(T$n){var T$C=T$n.caller,T$_=T$n.method,T$E=T$C?T$C.$_GID||(T$C.$_GID=T$z.getGID()):0,T$y=T$_.$_TID||(T$_.$_TID=this._mid++);T$n.key=T$E+"_"+T$y,this._map[T$n.key]=T$n;},T$C.once=function(T$n,T$C,T$_,T$E,T$y){void 0===T$y&&(T$y=!0),this._create(!1,!1,T$n,T$C,T$_,T$E,T$y,!1);},T$C.loop=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){void 0===T$y&&(T$y=!0),void 0===T$p&&(T$p=!1),void 0===T$c&&(T$c=!1);var T$l=this._create(!1,!0,T$n,T$C,T$_,T$E,T$y,T$c);T$l&&(T$l.jumpFrame=T$p);},T$C.frameOnce=function(T$n,T$C,T$_,T$E,T$y){void 0===T$y&&(T$y=!0),this._create(!0,!1,T$n,T$C,T$_,T$E,T$y,!1);},T$C.frameLoop=function(T$n,T$C,T$_,T$E,T$y,T$p){void 0===T$y&&(T$y=!0),void 0===T$p&&(T$p=!1),this._create(!0,!0,T$n,T$C,T$_,T$E,T$y,T$p);},T$C.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+T$q._freeCount;},T$C.clear=function(T$n,T$C){var T$_=this._getHandler(T$n,T$C);return!(!T$_||this._isIgnoreRecover(T$_))&&(delete this._map[T$_.key],T$_.key=null,T$_.clear(),!0);},T$C.clearAll=function(T$n){if(T$n)for(var T$C=0,T$_=this._handlers.length;T$C<T$_;T$C++){var T$E=this._handlers[T$C];T$E.caller===T$n&&(this._isIgnoreRecover(T$E)||(delete this._map[T$E.key],T$E.key=null,T$E.clear()));}},T$C._getHandler=function(T$n,T$C){var T$_=T$n?T$n.$_GID||(T$n.$_GID=T$z.getGID()):0,T$E=T$C.$_TID||(T$C.$_TID=this._mid++);return this._map[T$_+"_"+T$E];},T$C._isIgnoreRecover=function(T$n){if(T$n.ignoreRecover||T$n.caller&&"IgnoreRecover"==T$n.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var T$C="";try{arguments.propertyIsEnumerable.caller;}catch(T$n){T$C=T$n.stack;}T$T.recordError("报错：核心定时器销毁忽略  "+T$C);}return!0;}return!1;},T$C.hasHandler=function(T$n,T$C){return this._map[T$n.$_GID+"_"+T$C.$_TID];},T$C.callLater=function(T$n,T$C,T$_){if(null==this._getHandler(T$n,T$C)){var T$E=T$q.create();T$E.caller=T$n,T$E.method=T$C,T$E.args=T$_,this._indexHandler(T$E),this._laters.push(T$E);}},T$C.runCallLater=function(T$n,T$C){var T$_=this._getHandler(T$n,T$C);T$_&&null!=T$_.method&&(this._isIgnoreRecover(T$_)||(delete this._map[T$_.key],T$_.run(!0)));},T$C.runTimer=function(T$n,T$C){this.runCallLater(T$n,T$C);},T$b(0,T$C,"delta",function(){return this._delta;}),T$n.__init$=function(){T$q=function(){function T$C(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1;}T$J(T$C,"");var T$n=T$C.prototype;return T$n.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1;},T$n.recover=function(){this.clear(),this.args=T$C._freeHandler,T$C._freeHandler=this,T$C._freeCount++;},T$n.run=function(T$n){var T$C=this.caller;if(T$C&&T$C.destroyed)return this.clear();var T$_=this.method,T$E=this.args;T$n&&this.clear(),null!=T$_&&(T$E?T$_.apply(T$C,T$E):T$_.call(T$C));},T$C._freeHandler=null,T$C._freeCount=0,T$C.create=function(){var T$n=T$C._freeHandler;return T$n?(T$C._freeHandler=T$n.args,--T$C._freeCount,T$n.args=null,T$n):new T$C();},T$C;}();},T$n;}()),T$R=function(){function T$j(){this.gid=0;}T$J(T$j,"laya.utils.Tween");var T$n=T$j.prototype;return T$n.to=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){return void 0===T$p&&(T$p=0),void 0===T$c&&(T$c=!1),this._create(T$n,T$C,T$_,T$E,T$y,T$p,T$c,!0,!1,!0);},T$n.from=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){return void 0===T$p&&(T$p=0),void 0===T$c&&(T$c=!1),this._create(T$n,T$C,T$_,T$E,T$y,T$p,T$c,!1,!1,!0);},T$n._create=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q){if(!T$n)throw new Error("Tween:target is null");this._target=T$n,this._duration=T$_,this._ease=T$E||T$C.ease||T$j.easeNone,this._complete=T$y||T$C.complete,this._delay=T$p,this._props=[],this._usedTimer=0,this._startTimer=T$e.now(),this._usedPool=T$W,this._delayParam=null,this.update=T$C.update;var T$J=T$n.$_GID||(T$n.$_GID=T$z.getGID());return T$j.tweenMap[T$J]?(T$c&&T$j.clearTween(T$n),T$j.tweenMap[T$J].push(this)):T$j.tweenMap[T$J]=[this],T$q?T$p<=0?this.firstStart(T$n,T$C,T$l):(this._delayParam=[T$n,T$C,T$l],T$T.scaleTimer.once(T$p,this,this.firstStart,this._delayParam)):this._initProps(T$n,T$C,T$l),this;},T$n.firstStart=function(T$n,T$C,T$_){this._delayParam=null,T$n.destroyed?this.clear():(this._initProps(T$n,T$C,T$_),this._beginLoop());},T$n._initProps=function(T$n,T$C,T$_){for(var T$E in T$C)if("number"==typeof T$n[T$E]){var T$y=T$_?T$n[T$E]:T$C[T$E],T$p=T$_?T$C[T$E]:T$n[T$E];this._props.push([T$E,T$y,T$p-T$y]),T$_||(T$n[T$E]=T$y);}},T$n._beginLoop=function(){T$T.scaleTimer.frameLoop(1,this,this._doEase);},T$n._doEase=function(){this._updateEase(T$e.now());},T$n._updateEase=function(T$n){var T$C=this._target;if(T$C){if(T$C.destroyed)return T$j.clearTween(T$C);var T$_=this._usedTimer=T$n-this._startTimer-this._delay;if(!(T$_<0)){if(T$_>=this._duration)return this.complete();for(var T$E=0<T$_?this._ease(T$_,0,1,this._duration):0,T$y=this._props,T$p=0,T$c=T$y.length;T$p<T$c;T$p++){var T$l=T$y[T$p];T$C[T$l[0]]=T$l[1]+T$E*T$l[2];}this.update&&this.update.run();}}},T$n.complete=function(){if(this._target){T$T.scaleTimer.runTimer(this,this.firstStart);for(var T$n=this._target,T$C=this._props,T$_=this._complete,T$E=0,T$y=T$C.length;T$E<T$y;T$E++){var T$p=T$C[T$E];T$n[T$p[0]]=T$p[1]+T$p[2];}this.update&&this.update.run(),this.clear(),T$_&&T$_.run();}},T$n.pause=function(){T$T.scaleTimer.clear(this,this._beginLoop),T$T.scaleTimer.clear(this,this._doEase),T$T.scaleTimer.clear(this,this.firstStart);var T$n;(T$n=T$e.now()-this._startTimer-this._delay)<0&&(this._usedTimer=T$n);},T$n.setStartTime=function(T$n){this._startTimer=T$n;},T$n.clear=function(){this._target&&(this._remove(),this._clear());},T$n._clear=function(){this.pause(),T$T.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,T$L.recover("tween",this));},T$n.recover=function(){this._usedPool=!0,this._clear();},T$n._remove=function(){var T$n=T$j.tweenMap[this._target.$_GID];if(T$n)for(var T$C=0,T$_=T$n.length;T$C<T$_;T$C++)if(T$n[T$C]===this){T$n.splice(T$C,1);break;}},T$n.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=T$e.now(),this._delayParam)T$T.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var T$n=this._props,T$C=0,T$_=T$n.length;T$C<T$_;T$C++){var T$E=T$n[T$C];this._target[T$E[0]]=T$E[1];}T$T.scaleTimer.once(this._delay,this,this._beginLoop);}},T$n.resume=function(){this._usedTimer>=this._duration||(this._startTimer=T$e.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?T$T.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop());},T$b(0,T$n,"progress",null,function(T$n){var T$C=T$n*this._duration;this._startTimer=T$e.now()-this._delay-T$C;}),T$j.to=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){return void 0===T$p&&(T$p=0),void 0===T$c&&(T$c=!1),void 0===T$l&&(T$l=!0),T$L.getItemByClass("tween",T$j)._create(T$n,T$C,T$_,T$E,T$y,T$p,T$c,!0,T$l,!0);},T$j.from=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){return void 0===T$p&&(T$p=0),void 0===T$c&&(T$c=!1),void 0===T$l&&(T$l=!0),T$L.getItemByClass("tween",T$j)._create(T$n,T$C,T$_,T$E,T$y,T$p,T$c,!1,T$l,!0);},T$j.clearAll=function(T$n){if(T$n&&T$n.$_GID){var T$C=T$j.tweenMap[T$n.$_GID];if(T$C){for(var T$_=0,T$E=T$C.length;T$_<T$E;T$_++)T$C[T$_]._clear();T$C.length=0;}}},T$j.clear=function(T$n){T$n.clear();},T$j.clearTween=function(T$n){T$j.clearAll(T$n);},T$j.easeNone=function(T$n,T$C,T$_,T$E){return T$_*T$n/T$E+T$C;},T$j.tweenMap={},T$j;}(),T$z=function(){function T$l(){}return T$J(T$l,"laya.utils.Utils"),T$l.toRadian=function(T$n){return T$n*T$l._pi2;},T$l.toAngle=function(T$n){return T$n*T$l._pi;},T$l.toHexColor=function(T$n){if(T$n<0||isNaN(T$n))return null;for(var T$C=T$n.toString(16);T$C.length<6;)T$C="0"+T$C;return"#"+T$C;},T$l.getGID=function(){return T$l._gid++;},T$l.concatArray=function(T$n,T$C){if(!T$C)return T$n;if(!T$n)return T$C;var T$_=0,T$E=T$C.length;for(T$_=0;T$_<T$E;T$_++)T$n.push(T$C[T$_]);return T$n;},T$l.clearArray=function(T$n){return T$n&&(T$n.length=0),T$n;},T$l.copyArray=function(T$n,T$C){if(T$n||(T$n=[]),!T$C)return T$n;T$n.length=T$C.length;var T$_=0,T$E=T$C.length;for(T$_=0;T$_<T$E;T$_++)T$n[T$_]=T$C[T$_];return T$n;},T$l.getGlobalRecByPoints=function(T$n,T$C,T$_,T$E,T$y){var T$p,T$c;return T$p=new T$Y(T$C,T$_),T$p=T$n.localToGlobal(T$p),T$c=new T$Y(T$E,T$y),T$c=T$n.localToGlobal(T$c),T$s._getWrapRec([T$p.x,T$p.y,T$c.x,T$c.y]);},T$l.getGlobalPosAndScale=function(T$n){return T$l.getGlobalRecByPoints(T$n,0,0,1,1);},T$l.bind=function(T$n,T$C){return T$n.bind(T$C);},T$l.measureText=function(T$n,T$C){return T$w.measureText(T$n,T$C);},T$l.contextMeasureText=function(T$n){var T$C=T$e.context.measureText(T$n);return T$C||(T$C={width:16,height:16}),T$C;},T$l.updateOrder=function(T$n){if(!T$n||T$n.length<2)return!1;for(var T$C,T$_=1,T$E=0,T$y=T$n.length,T$p=NaN;T$_<T$y;){for(T$C=T$n[T$E=T$_],T$p=T$n[T$E]._zOrder;-1<--T$E&&T$n[T$E]._zOrder>T$p;)T$n[T$E+1]=T$n[T$E];T$n[T$E+1]=T$C,T$_++;}var T$c=T$C.parent.conchModel;if(T$c)if(null!=T$c.updateZOrder)T$c.updateZOrder();else{for(T$_=0;T$_<T$y;T$_++)T$c.removeChild(T$n[T$_].conchModel);for(T$_=0;T$_<T$y;T$_++)T$c.addChildAt(T$n[T$_].conchModel,T$_);}return!0;},T$l.transPointList=function(T$n,T$C,T$_){var T$E=0,T$y=T$n.length;for(T$E=0;T$E<T$y;T$E+=2)T$n[T$E]+=T$C,T$n[T$E+1]+=T$_;},T$l.parseInt=function(T$n,T$C){void 0===T$C&&(T$C=0);var T$_=T$e.window.parseInt(T$n,T$C);return isNaN(T$_)?0:T$_;},T$l.getFileExtension=function(T$n){T$l._extReg.lastIndex=T$n.lastIndexOf(".");var T$C=T$l._extReg.exec(T$n);return T$C&&1<T$C.length?T$C[1].toLowerCase():null;},T$l.getTransformRelativeToWindow=function(T$n,T$C,T$_){var T$E=T$T.stage,T$y=laya.utils.Utils.getGlobalPosAndScale(T$n),T$p=T$E._canvasTransform.clone(),T$c=T$p.tx,T$l=T$p.ty;T$p.rotate(-Math.PI/180*T$T.stage.canvasDegree),T$p.scale(T$T.stage.clientScaleX,T$T.stage.clientScaleY);var T$W=T$T.stage.canvasDegree%180!=0,T$q=NaN,T$J=NaN;T$W?(T$q=T$_+T$y.y,T$J=T$C+T$y.x,T$q*=T$p.d,T$J*=T$p.a,90==T$T.stage.canvasDegree?(T$q=T$c-T$q,T$J+=T$l):(T$q+=T$c,T$J=T$l-T$J)):(T$q=T$C+T$y.x,T$J=T$_+T$y.y,T$q*=T$p.a,T$J*=T$p.d,T$q+=T$c,T$J+=T$l);var T$j=NaN,T$P=NaN;return T$P=T$W?(T$j=T$p.d*T$y.height,T$p.a*T$y.width):(T$j=T$p.a*T$y.width,T$p.d*T$y.height),{x:T$q,y:T$J,scaleX:T$j,scaleY:T$P};},T$l.fitDOMElementInArea=function(T$n,T$C,T$_,T$E,T$y,T$p){T$n._fitLayaAirInitialized||(T$n._fitLayaAirInitialized=!0,T$n.style.transformOrigin=T$n.style.webKittransformOrigin="left top",T$n.style.position="absolute");var T$c=T$l.getTransformRelativeToWindow(T$C,T$_,T$E);T$n.style.transform=T$n.style.webkitTransform="scale("+T$c.scaleX+","+T$c.scaleY+") rotate("+T$T.stage.canvasDegree+"deg)",T$n.style.width=T$y+"px",T$n.style.height=T$p+"px",T$n.style.left=T$c.x+"px",T$n.style.top=T$c.y+"px";},T$l.isOkTextureList=function(T$n){if(!T$n)return!1;var T$C,T$_=0,T$E=T$n.length;for(T$_=0;T$_<T$E;T$_++)if(!(T$C=T$n[T$_])||!T$C.source)return!1;return!0;},T$l.isOKCmdList=function(T$n){if(!T$n)return!1;var T$C,T$_,T$E=0,T$y=T$n.length,T$p=T$H._context;for(T$E=0;T$E<T$y;T$E++)switch((T$C=T$n[T$E]).callee){case T$p._drawTexture:case T$p._fillTexture:case T$p._drawTextureWithTransform:if(!(T$_=T$C[0])||!T$_.source)return!1;}return!0;},T$l._gid=1,T$l._pi=180/Math.PI,T$l._pi2=Math.PI/180,T$l._extReg=/\.(\w+)\??/g,T$l.parseXMLFromString=function(T$n){var T$C;if(T$n=T$n.replace(/>\s+</g,"><"),-1<(T$C=new DOMParser().parseFromString(T$n,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(T$C.firstChild.firstChild.textContent);return T$C;},T$l;}(),T$U=function(){function T$n(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],T$H.isWebGL&&T$F.regCacheByFunction(T$z.bind(this.startDispose,this),T$z.bind(this.getCacheList,this));}T$J(T$n,"laya.utils.VectorGraphManager");var T$C=T$n.prototype;return T$C.getId=function(){return this._id++;},T$C.addShape=function(T$n,T$C){this.shapeDic[T$n]=T$C,this.useDic[T$n]||(this.useDic[T$n]=!0);},T$C.addLine=function(T$n,T$C){this.shapeLineDic[T$n]=T$C,this.shapeLineDic[T$n]||(this.shapeLineDic[T$n]=!0);},T$C.getShape=function(T$n){this._checkKey&&null!=this.useDic[T$n]&&(this.useDic[T$n]=!0);},T$C.deleteShape=function(T$n){this.shapeDic[T$n]&&(this.shapeDic[T$n]=null,delete this.shapeDic[T$n]),this.shapeLineDic[T$n]&&(this.shapeLineDic[T$n]=null,delete this.shapeLineDic[T$n]),null!=this.useDic[T$n]&&delete this.useDic[T$n];},T$C.getCacheList=function(){var T$n,T$C=[];for(T$n in this.shapeDic)T$C.push(this.shapeDic[T$n]);for(T$n in this.shapeLineDic)T$C.push(this.shapeLineDic[T$n]);return T$C;},T$C.startDispose=function(T$n){var T$C;for(T$C in this.useDic)this.useDic[T$C]=!1;this._checkKey=!0;},T$C.endDispose=function(){if(this._checkKey){var T$n;for(T$n in this.useDic)this.useDic[T$n]||this.deleteShape(T$n);this._checkKey=!1;}},T$n.getInstance=function(){return T$n.instance=T$n.instance||new T$n();},T$n.instance=null,T$n;}(),T$K=function(){function T$E(){this._obj=null,this._obj=T$E.supportWeakMap?new T$e.window.WeakMap():{},T$E.supportWeakMap||T$E._maps.push(this);}T$J(T$E,"laya.utils.WeakObject");var T$n=T$E.prototype;return T$n.set=function(T$n,T$C){if(null!=T$n)if(T$E.supportWeakMap){var T$_=T$n;"string"!=typeof T$n&&"number"!=typeof T$n||(T$_=T$E._keys[T$n])||(T$_=T$E._keys[T$n]={k:T$n}),this._obj.set(T$_,T$C);}else"string"==typeof T$n||"number"==typeof T$n?this._obj[T$n]=T$C:(T$n.$_GID||(T$n.$_GID=T$z.getGID()),this._obj[T$n.$_GID]=T$C);},T$n.get=function(T$n){if(null==T$n)return null;if(T$E.supportWeakMap){var T$C="string"==typeof T$n||"number"==typeof T$n?T$E._keys[T$n]:T$n;return T$C?this._obj.get(T$C):null;}return"string"==typeof T$n||"number"==typeof T$n?this._obj[T$n]:this._obj[T$n.$_GID];},T$n.del=function(T$n){if(null!=T$n)if(T$E.supportWeakMap){var T$C="string"==typeof T$n||"number"==typeof T$n?T$E._keys[T$n]:T$n;if(!T$C)return;this._obj.delete(T$C);}else"string"==typeof T$n||"number"==typeof T$n?delete this._obj[T$n]:delete this._obj[this._obj.$_GID];},T$n.has=function(T$n){if(null==T$n)return!1;if(T$E.supportWeakMap){var T$C="string"==typeof T$n||"number"==typeof T$n?T$E._keys[T$n]:T$n;return this._obj.has(T$C);}return"string"==typeof T$n||"number"==typeof T$n?null!=this._obj[T$n]:null!=this._obj[this._obj.$_GID];},T$E.__init__=function(){(T$E.supportWeakMap=null!=T$e.window.WeakMap)||T$T.timer.loop(T$E.delInterval,null,T$E.clearCache);},T$E.clearCache=function(){for(var T$n=0,T$C=T$E._maps.length;T$n<T$C;T$n++){T$E._maps[T$n]._obj={};}},T$E.supportWeakMap=!1,T$E.delInterval=3e5,T$E._keys={},T$E._maps=[],T$W(T$E,["I",function(){return this.I=new T$E();}]),T$E;}(),T$D=function(){function T$n(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null;}T$J(T$n,"laya.utils.WordText");var T$C=T$n.prototype;return T$C.setText=function(T$n){this.changed=!0,this._text=T$n;},T$C.toString=function(){return this._text;},T$C.charCodeAt=function(T$n){return this._text?this._text.charCodeAt(T$n):NaN;},T$C.charAt=function(T$n){return this._text?this._text.charAt(T$n):null;},T$b(0,T$C,"length",function(){return this._text?this._text.length:0;}),T$n;}(),T$nn=function(T$n){function T$c(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,T$c.__super.call(this),this._childs=T$c.ARRAY_EMPTY,this._$P=T$c.PROP_EMPTY,this.timer=T$T.scaleTimer,this.conchModel=T$H.isConchNode?this.createConchModel():null;}T$J(T$c,"laya.display.Node",T$q);var T$C=T$c.prototype;return T$C._setBit=function(T$n,T$C){1==T$n&&this._getBit(T$n)!=T$C&&this._updateDisplayedInstage();T$C?this._bits|=T$n:this._bits&=~T$n;},T$C._getBit=function(T$n){return 0!=(this._bits&T$n);},T$C._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1);},T$C._setUpNoticeType=function(T$n){var T$C=this;for(T$C._setBit(T$n,!0),T$C=T$C.parent;T$C;){if(T$C._getBit(T$n))return;T$C._setBit(T$n,!0),T$C=T$C.parent;}},T$C.on=function(T$n,T$C,T$_,T$E){return"display"!==T$n&&"undisplay"!==T$n||this._getBit(1)||this._setUpNoticeType(1),this._createListener(T$n,T$C,T$_,T$E,!1);},T$C.once=function(T$n,T$C,T$_,T$E){return"display"!==T$n&&"undisplay"!==T$n||this._getBit(1)||this._setUpNoticeType(1),this._createListener(T$n,T$C,T$_,T$E,!0);},T$C.createConchModel=function(){return null;},T$C.destroy=function(T$n){void 0===T$n&&(T$n=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(T$n?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this);},T$C.destroyChildren=function(){if(this._childs)for(var T$n=this._childs.length-1;-1<T$n;T$n--)this._childs[T$n].destroy(!0);},T$C.addChild=function(T$n){if(!T$n||this.destroyed||T$n===this)return T$n;if(T$n.zOrder&&this._set$P("hasZorder",!0),T$n._parent===this){var T$C=this.getChildIndex(T$n);T$C!==this._childs.length-1&&(this._childs.splice(T$C,1),this._childs.push(T$n),this.conchModel&&(this.conchModel.removeChild(T$n.conchModel),this.conchModel.addChildAt(T$n.conchModel,this._childs.length-1)),this._childChanged());}else T$n.parent&&T$n.parent.removeChild(T$n),this._childs===T$c.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(T$n),this.conchModel&&this.conchModel.addChildAt(T$n.conchModel,this._childs.length-1),(T$n.parent=this)._childChanged();return T$n;},T$C.addChildren=function(T$n){for(var T$C=arguments,T$_=0,T$E=T$C.length;T$_<T$E;)this.addChild(T$C[T$_++]);},T$C.addChildAt=function(T$n,T$C){if(!T$n||this.destroyed||T$n===this)return T$n;if(T$n.zOrder&&this._set$P("hasZorder",!0),0<=T$C&&T$C<=this._childs.length){if(T$n._parent===this){var T$_=this.getChildIndex(T$n);this._childs.splice(T$_,1),this._childs.splice(T$C,0,T$n),this.conchModel&&(this.conchModel.removeChild(T$n.conchModel),this.conchModel.addChildAt(T$n.conchModel,T$C)),this._childChanged();}else T$n.parent&&T$n.parent.removeChild(T$n),this._childs===T$c.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(T$C,0,T$n),this.conchModel&&this.conchModel.addChildAt(T$n.conchModel,T$C),T$n.parent=this;return T$n;}throw new Error("appendChildAt:The index is out of bounds");},T$C.getChildIndex=function(T$n){return this._childs.indexOf(T$n);},T$C.getChildByName=function(T$n){var T$C=this._childs;if(T$C)for(var T$_=0,T$E=T$C.length;T$_<T$E;T$_++){var T$y=T$C[T$_];if(T$y.name===T$n)return T$y;}return null;},T$C._get$P=function(T$n){return this._$P[T$n];},T$C._set$P=function(T$n,T$C){return this.destroyed||(this._$P===T$c.PROP_EMPTY&&(this._$P={}),this._$P[T$n]=T$C),T$C;},T$C.getChildAt=function(T$n){return this._childs[T$n];},T$C.setChildIndex=function(T$n,T$C){var T$_=this._childs;if(T$C<0||T$C>=T$_.length)throw new Error("setChildIndex:The index is out of bounds.");var T$E=this.getChildIndex(T$n);if(T$E<0)throw new Error("setChildIndex:node is must child of this object.");return T$_.splice(T$E,1),T$_.splice(T$C,0,T$n),this.conchModel&&(this.conchModel.removeChild(T$n.conchModel),this.conchModel.addChildAt(T$n.conchModel,T$C)),this._childChanged(),T$n;},T$C._childChanged=function(T$n){},T$C.removeChild=function(T$n){if(!this._childs)return T$n;var T$C=this._childs.indexOf(T$n);return this.removeChildAt(T$C);},T$C.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this;},T$C.removeChildByName=function(T$n){var T$C=this.getChildByName(T$n);return T$C&&this.removeChild(T$C),T$C;},T$C.removeChildAt=function(T$n){var T$C=this.getChildAt(T$n);if(T$C){for(var T$_=this._childs.length-1,T$E=T$n;T$E<T$_;++T$E)this._childs[T$E]=this._childs[T$E+1];this._childs.length=T$_,this.conchModel&&this.conchModel.removeChild(T$C.conchModel),T$C.parent=null;}return T$C;},T$C.removeChildren=function(T$n,T$C){if(void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=2147483647),this._childs&&0<this._childs.length){var T$_=this._childs;if(0===T$n&&T$p<=T$C){var T$E=T$_;this._childs=T$c.ARRAY_EMPTY;}else T$E=T$_.splice(T$n,T$C-T$n);for(var T$y=0,T$p=T$E.length;T$y<T$p;T$y++)T$E[T$y].parent=null,this.conchModel&&this.conchModel.removeChild(T$E[T$y].conchModel);}return this;},T$C.replaceChild=function(T$n,T$C){var T$_=this._childs.indexOf(T$C);return-1<T$_?(this._childs.splice(T$_,1,T$n),this.conchModel&&(this.conchModel.removeChild(T$C.conchModel),this.conchModel.addChildAt(T$n.conchModel,T$_)),T$C.parent=null,T$n.parent=this,T$n):null;},T$C._updateDisplayedInstage=function(){var T$n;T$n=this;var T$C=T$T.stage;for(this._displayedInStage=!1;T$n;){if(T$n._getBit(1)){this._displayedInStage=T$n._displayedInStage;break;}if(T$n==T$C||T$n._displayedInStage){this._displayedInStage=!0;break;}T$n=T$n.parent;}},T$C._setDisplay=function(T$n){this._displayedInStage!==T$n&&((this._displayedInStage=T$n)?this.event("display"):this.event("undisplay"));},T$C._displayChild=function(T$n,T$C){var T$_=T$n._childs;if(T$_)for(var T$E=0;T$E<T$_.length;T$E++){var T$y=T$_[T$E];T$y&&T$y._getBit(1)&&(0<T$y._childs.length?this._displayChild(T$y,T$C):T$y._setDisplay(T$C));}T$n._setDisplay(T$C);},T$C.contains=function(T$n){if(T$n===this)return!0;for(;T$n;){if(T$n.parent===this)return!0;T$n=T$n.parent;}return!1;},T$C.timerLoop=function(T$n,T$C,T$_,T$E,T$y,T$p){void 0===T$y&&(T$y=!0),void 0===T$p&&(T$p=!1),this.timer.loop(T$n,T$C,T$_,T$E,T$y,T$p);},T$C.timerOnce=function(T$n,T$C,T$_,T$E,T$y){void 0===T$y&&(T$y=!0),this.timer._create(!1,!1,T$n,T$C,T$_,T$E,T$y);},T$C.frameLoop=function(T$n,T$C,T$_,T$E,T$y){void 0===T$y&&(T$y=!0),this.timer._create(!0,!0,T$n,T$C,T$_,T$E,T$y);},T$C.frameOnce=function(T$n,T$C,T$_,T$E,T$y){void 0===T$y&&(T$y=!0),this.timer._create(!0,!1,T$n,T$C,T$_,T$E,T$y);},T$C.clearTimer=function(T$n,T$C){this.timer.clear(T$n,T$C);},T$b(0,T$C,"numChildren",function(){return this._childs.length;}),T$b(0,T$C,"destroyed",function(){return this._destroyed;}),T$b(0,T$C,"parent",function(){return this._parent;},function(T$n){this._parent!==T$n&&(T$n?(this._parent=T$n,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),T$n.displayedInStage&&this._displayChild(this,!0)),T$n._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=T$n));}),T$b(0,T$C,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage;}),T$c.ARRAY_EMPTY=[],T$c.PROP_EMPTY={},T$c.NOTICE_DISPLAY=1,T$c.MOUSEENABLE=2,T$c;}(),T$Cn=function(T$n){function T$P(T$n){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,T$P.__super.call(this),this._padding=T$P._PADDING,this._spacing=T$P._SPACING,this._aligns=T$P._ALIGNS,this._font=T$x.EMPTY,this._ower=T$n;}T$J(T$P,"laya.display.css.CSSStyle",T$n);var T$C=T$P.prototype;return T$C.destroy=function(){this._ower=null,this._font=null,this._rect=null;},T$C.inherit=function(T$n){this._font=T$n._font,this._spacing=T$n._spacing===T$P._SPACING?T$P._SPACING:T$n._spacing.slice(),this.lineHeight=T$n.lineHeight;},T$C._widthAuto=function(){return 0!=(262144&this._type);},T$C.widthed=function(T$n){return 0!=(8&this._type);},T$C._calculation=function(T$n,T$C){if(T$C.indexOf("%")<0)return!1;var T$E=this._ower,T$y=T$E.parent,T$p=this._rect;function T$c(T$n,T$C,T$_){return T$n*T$_[0]+T$C*T$_[1]+T$_[2];}function T$_(T$n){var T$C=T$y.width,T$_=T$E.width;T$p.width&&(T$E.width=T$c(T$C,T$_,T$p.width)),T$p.height&&(T$E.height=T$c(T$C,T$_,T$p.height)),T$p.left&&(T$E.x=T$c(T$C,T$_,T$p.left)),T$p.top&&(T$E.y=T$c(T$C,T$_,T$p.top));}null===T$p&&(T$y._getCSSStyle()._type|=524288,T$y.on("resize",this,T$_),this._rect=T$p={input:{}});var T$l=T$C.split(" ");return T$l[0]=parseFloat(T$l[0])/100,1==T$l.length?T$l[1]=T$l[2]=0:(T$l[1]=parseFloat(T$l[1])/100,T$l[2]=parseFloat(T$l[2])),T$p[T$n]=T$l,T$p.input[T$n]=T$C,T$_(),!0;},T$C.heighted=function(T$n){return 0!=(8192&this._type);},T$C.size=function(T$n,T$C){var T$_=this._ower,T$E=!1;-1!==T$n&&T$n!=this._ower.width&&(this._type|=8,this._ower.width=T$n,T$E=!0),-1!==T$C&&T$C!=this._ower.height&&(this._type|=8192,this._ower.height=T$C,T$E=!0),T$E&&(T$_._layoutLater(),524288&this._type&&T$_.event("resize",this));},T$C._getAlign=function(){return this._aligns[0];},T$C._getValign=function(){return this._aligns[1];},T$C._getCssFloat=function(){return 0!=(32768&this._type)?32768:0;},T$C._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new T$x(this._font));},T$C.render=function(T$n,T$C,T$_,T$E){var T$y=T$n.width,T$p=T$n.height;T$_-=T$n.pivotX,T$E-=T$n.pivotY,this._bgground&&null!=this._bgground.color&&T$C.ctx.fillRect(T$_,T$E,T$y,T$p,this._bgground.color),this._border&&this._border.color&&T$C.drawRect(T$_,T$E,T$y,T$p,this._border.color.strColor,this._border.size);},T$C.getCSSStyle=function(){return this;},T$C.cssText=function(T$n){this.attrs(T$P.parseOneCSS(T$n,";"));},T$C.attrs=function(T$n){if(T$n)for(var T$C=0,T$_=T$n.length;T$C<T$_;T$C++){var T$E=T$n[T$C];this[T$E[0]]=T$E[1];}},T$C.setTransform=function(T$n){"none"===T$n?this._tf=T$l._TF_EMPTY:this.attrs(T$P.parseOneCSS(T$n,","));},T$C.translate=function(T$n,T$C){this._tf===T$l._TF_EMPTY&&(this._tf=new T$y()),this._tf.translateX=T$n,this._tf.translateY=T$C;},T$C.scale=function(T$n,T$C){this._tf===T$l._TF_EMPTY&&(this._tf=new T$y()),this._tf.scaleX=T$n,this._tf.scaleY=T$C;},T$C._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type);},T$b(0,T$C,"block",T$n.prototype._$get_block,function(T$n){T$n?this._type|=1:this._type&=-2;}),T$b(0,T$C,"valign",function(){return T$P._valigndef[this._aligns[1]];},function(T$n){this._aligns===T$P._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=T$P._valigndef[T$n];}),T$b(0,T$C,"height",null,function(T$n){if(this._type|=8192,"string"==typeof T$n){if(this._calculation("height",T$n))return;T$n=parseInt(T$n);}this.size(-1,T$n);}),T$b(0,T$C,"width",null,function(T$n){if(this._type|=8,"string"==typeof T$n){var T$C=T$n.indexOf("auto");if(0<=T$C&&(this._type|=262144,T$n=T$n.substr(0,T$C)),this._calculation("width",T$n))return;T$n=parseInt(T$n);}this.size(T$n,-1);}),T$b(0,T$C,"fontWeight",function(){return this._font.weight;},function(T$n){this._createFont().weight=T$n;}),T$b(0,T$C,"left",null,function(T$n){var T$C=this._ower;if("string"==typeof T$n){if("center"===T$n?T$n="50% -50% 0":"right"===T$n&&(T$n="100% -100% 0"),this._calculation("left",T$n))return;T$n=parseInt(T$n);}T$C.x=T$n;}),T$b(0,T$C,"_translate",null,function(T$n){this.translate(T$n[0],T$n[1]);}),T$b(0,T$C,"absolute",function(){return 0!=(4&this._type);}),T$b(0,T$C,"top",null,function(T$n){var T$C=this._ower;if("string"==typeof T$n){if("middle"===T$n?T$n="50% -50% 0":"bottom"===T$n&&(T$n="100% -100% 0"),this._calculation("top",T$n))return;T$n=parseInt(T$n);}T$C.y=T$n;}),T$b(0,T$C,"align",function(){return T$P._aligndef[this._aligns[0]];},function(T$n){this._aligns===T$P._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=T$P._aligndef[T$n];}),T$b(0,T$C,"bold",function(){return this._font.bold;},function(T$n){this._createFont().bold=T$n;}),T$b(0,T$C,"padding",function(){return this._padding;},function(T$n){this._padding=T$n;}),T$b(0,T$C,"leading",function(){return this._spacing[1];},function(T$n){"string"==typeof T$n&&(T$n=parseInt(T$n+"")),this._spacing===T$P._SPACING&&(this._spacing=[0,0]),this._spacing[1]=T$n;}),T$b(0,T$C,"lineElement",function(){return 0!=(65536&this._type);},function(T$n){T$n?this._type|=65536:this._type&=-65537;}),T$b(0,T$C,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left";},function(T$n){this.lineElement=!1,"right"===T$n?this._type|=32768:this._type&=-32769;}),T$b(0,T$C,"textDecoration",function(){return this._font.decoration;},function(T$n){this._createFont().decoration=T$n;}),T$b(0,T$C,"whiteSpace",function(){return 131072&this._type?"nowrap":"";},function(T$n){"nowrap"===T$n&&(this._type|=131072),"none"===T$n&&(this._type&=-131073);}),T$b(0,T$C,"background",null,function(T$n){T$n?(this._bgground||(this._bgground={}),this._bgground.color=T$n,this._ower.conchModel&&this._ower.conchModel.bgColor(T$n),this._type|=16384,this._ower._renderType|=256):this._bgground=null;}),T$b(0,T$C,"wordWrap",function(){return 0==(131072&this._type);},function(T$n){T$n?this._type&=-131073:this._type|=131072;}),T$b(0,T$C,"color",function(){return this._font.color;},function(T$n){this._createFont().color=T$n;}),T$b(0,T$C,"password",function(){return this._font.password;},function(T$n){this._createFont().password=T$n;}),T$b(0,T$C,"backgroundColor",function(){return this._bgground?this._bgground.color:null;},function(T$n){"none"===T$n?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=T$n),this._ower.conchModel&&this._ower.conchModel.bgColor(T$n),this._ower._renderType|=256;}),T$b(0,T$C,"font",function(){return this._font.toString();},function(T$n){this._createFont().set(T$n);}),T$b(0,T$C,"weight",null,function(T$n){this._createFont().weight=T$n;}),T$b(0,T$C,"letterSpacing",function(){return this._spacing[0];},function(T$n){"string"==typeof T$n&&(T$n=parseInt(T$n+"")),this._spacing===T$P._SPACING&&(this._spacing=[0,0]),this._spacing[0]=T$n;}),T$b(0,T$C,"fontSize",function(){return this._font.size;},function(T$n){this._createFont().size=T$n;}),T$b(0,T$C,"italic",function(){return this._font.italic;},function(T$n){this._createFont().italic=T$n;}),T$b(0,T$C,"fontFamily",function(){return this._font.family;},function(T$n){this._createFont().family=T$n;}),T$b(0,T$C,"stroke",function(){return this._font.stroke[0];},function(T$n){this._createFont().stroke===T$x._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=T$n;}),T$b(0,T$C,"strokeColor",function(){return this._font.stroke[1];},function(T$n){this._createFont().stroke===T$x._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=T$n;}),T$b(0,T$C,"border",function(){return this._border?this._border.value:"";},function(T$n){if("none"!=T$n){this._border||(this._border={});var T$C=(this._border.value=T$n).split(" ");if(this._border.color=T$o.create(T$C[T$C.length-1]),1==T$C.length)return this._border.size=1,void(this._border.type="solid");var T$_=0;0<T$C[0].indexOf("px")?(this._border.size=parseInt(T$C[0]),T$_++):this._border.size=1,this._border.type=T$C[T$_],this._ower._renderType|=256;}else this._border=null;}),T$b(0,T$C,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null;},function(T$n){T$n?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==T$n?null:T$o.create(T$n),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null;}),T$b(0,T$C,"position",function(){return 4&this._type?"absolute":"";},function(T$n){"absolute"==T$n?this._type|=4:this._type&=-5;}),T$b(0,T$C,"display",null,function(T$n){switch(T$n){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater();}}),T$b(0,T$C,"paddingLeft",function(){return this.padding[3];}),T$b(0,T$C,"paddingTop",function(){return this.padding[0];}),T$b(0,T$C,"_scale",null,function(T$n){this._ower.scale(T$n[0],T$n[1]);}),T$b(0,T$C,"_rotate",null,function(T$n){this._ower.rotation=T$n;}),T$P.parseOneCSS=function(T$n,T$C){for(var T$_,T$E=[],T$y=T$n.split(T$C),T$p=0,T$c=T$y.length;T$p<T$c;T$p++){var T$l=T$y[T$p],T$W=T$l.indexOf(":"),T$q=T$l.substr(0,T$W).replace(/^\s+|\s+$/g,"");if(0!=T$q.length){var T$J=T$l.substr(T$W+1).replace(/^\s+|\s+$/g,""),T$j=[T$q,T$J];switch(T$q){case"italic":case"bold":T$j[1]="true"==T$J;break;case"line-height":T$j[0]="lineHeight",T$j[1]=parseInt(T$J);break;case"font-size":T$j[0]="fontSize",T$j[1]=parseInt(T$J);break;case"padding":1<(T$_=T$J.split(" ")).length||(T$_[1]=T$_[2]=T$_[3]=T$_[0]),T$j[1]=[parseInt(T$_[0]),parseInt(T$_[1]),parseInt(T$_[2]),parseInt(T$_[3])];break;case"rotate":T$j[0]="_rotate",T$j[1]=parseFloat(T$J);break;case"scale":T$_=T$J.split(" "),T$j[0]="_scale",T$j[1]=[parseFloat(T$_[0]),parseFloat(T$_[1])];break;case"translate":T$_=T$J.split(" "),T$j[0]="_translate",T$j[1]=[parseInt(T$_[0]),parseInt(T$_[1])];break;default:(T$j[0]=T$P._CSSTOVALUE[T$q])||(T$j[0]=T$q);}T$E.push(T$j);}}return T$E;},T$P.parseCSS=function(T$n,T$C){for(var T$_;null!=(T$_=T$P._parseCSSRegExp.exec(T$n));)T$P.styleSheets[T$_[1]]=T$P.parseOneCSS(T$_[2],";");},T$P.EMPTY=new T$P(null),T$P._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},T$P._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),T$P._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},T$P._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},T$P.styleSheets={},T$P.ALIGN_CENTER=1,T$P.ALIGN_RIGHT=2,T$P.VALIGN_MIDDLE=1,T$P.VALIGN_BOTTOM=2,T$P._CSS_BLOCK=1,T$P._DISPLAY_NONE=2,T$P._ABSOLUTE=4,T$P._WIDTH_SET=8,T$P._PADDING=[0,0,0,0],T$P._RECT=[-1,-1,-1,-1],T$P._SPACING=[0,0],T$P._ALIGNS=[0,0,0],T$P.ADDLAYOUTED=512,T$P._NEWFONT=4096,T$P._HEIGHT_SET=8192,T$P._BACKGROUND_SET=16384,T$P._FLOAT_RIGHT=32768,T$P._LINE_ELEMENT=65536,T$P._NOWARP=131072,T$P._WIDTHAUTO=262144,T$P._LISTERRESZIE=524288,T$P;}(T$l),T$_n=function(T$n){function T$c(){this.url=null,this.audio=null,this.loaded=!1,T$c.__super.call(this);}T$J(T$c,"laya.media.h5audio.AudioSound",T$q);var T$C=T$c.prototype;return T$C.dispose=function(){var T$n=T$c._audioCache[this.url];T$n&&(T$n.src="",delete T$c._audioCache[this.url]);},T$C.load=function(T$n){var T$C;if(T$n=T$g.formatURL(T$n),(this.url=T$n)==T$M._tMusic?(T$c._initMusicAudio(),(T$C=T$c._musicAudio).src!=T$n&&(T$c._audioCache[T$C.src]=null,T$C=null)):T$C=T$c._audioCache[T$n],T$C&&2<=T$C.readyState)this.event("complete");else{T$C||(T$C=T$n==T$M._tMusic?(T$c._initMusicAudio(),T$c._musicAudio):T$e.createElement("audio"),(T$c._audioCache[T$n]=T$C).src=T$n),T$C.addEventListener("canplaythrough",T$E),T$C.addEventListener("error",T$y);var T$_=this;(this.audio=T$C).load?T$C.load():T$y();}function T$E(){T$p(),T$_.loaded=!0,T$_.event("complete");}function T$y(){T$C.load=null,T$p(),T$_.event("error");}function T$p(){T$C.removeEventListener("canplaythrough",T$E),T$C.removeEventListener("error",T$y);}},T$C.play=function(T$n,T$C,T$_){if(void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=0),!this.url)return null;var T$E,T$y;if(!(T$E=this.url==T$M._tMusic?T$c._musicAudio:T$c._audioCache[this.url]))return null;T$y=T$L.getItem("audio:"+this.url),T$H.isConchApp?T$y||((T$y=T$e.createElement("audio")).src=this.url):this.url==T$M._tMusic?(T$c._initMusicAudio(),(T$y=T$c._musicAudio).src=this.url):T$y=T$y||T$E.cloneNode(!0);var T$p=new T$Pn(T$y);return T$p.url=this.url,T$p.loops=T$C,T$p.startTime=T$n,T$p.startHandler=T$_,T$p.play(!1),T$M.addChannel(T$p),T$p;},T$b(0,T$C,"duration",function(){var T$n;return(T$n=T$c._audioCache[this.url])?T$n.duration:0;}),T$c._initMusicAudio=function(){T$c._musicAudio||(T$c._musicAudio||(T$c._musicAudio=T$e.createElement("audio")),T$H.isConchApp||T$e.document.addEventListener("mousedown",T$c._makeMusicOK));},T$c._makeMusicOK=function(){T$e.document.removeEventListener("mousedown",T$c._makeMusicOK),T$c._musicAudio.src?T$c._musicAudio.play():(T$c._musicAudio.src="",T$c._musicAudio.load());},T$c._audioCache={},T$c._musicAudio=null,T$c;}(),T$En=function(T$n){function T$C(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,T$C.__super.call(this);}T$J(T$C,"laya.media.SoundChannel",T$q);var T$_=T$C.prototype;return T$_.play=function(){},T$_.stop=function(){},T$_.pause=function(){},T$_.resume=function(){},T$_.__runComplete=function(T$n){T$n&&T$n.run();},T$b(0,T$_,"volume",function(){return 1;},function(T$n){}),T$b(0,T$_,"position",function(){return 0;}),T$b(0,T$_,"duration",function(){return 0;}),T$C;}(),T$yn=function(T$n){function T$C(){T$C.__super.call(this);}T$J(T$C,"laya.media.Sound",T$q);var T$_=T$C.prototype;return T$_.load=function(T$n){},T$_.play=function(T$n,T$C,T$_){return void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=0),null;},T$_.dispose=function(){},T$b(0,T$_,"duration",function(){return 0;}),T$C;}(),T$pn=function(T$n){function T$y(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,T$y.__super.call(this);}T$J(T$y,"laya.media.webaudio.WebAudioSound",T$q);var T$C=T$y.prototype;return T$C.load=function(T$n){this.url=T$n,this.audioBuffer=T$y._dataCache[T$n],this.audioBuffer?this._loaded(this.audioBuffer):(T$y.e.on("loaded:"+T$n,this,this._loaded),T$y.e.on("err:"+T$n,this,this._err),T$y.__loadingSound[T$n]||(T$y.__loadingSound[T$n]=!0,T$T.loader.load(T$n,T$a.create(this,this.onloaded),null,T$ln.BUFFER,4,!1,null,!0)));},T$C.onloaded=function(T$n){T$n||this._err(),this._disposed?this._removeLoadEvents():(this.data=T$n,T$y.buffs.push({buffer:this.data,url:this.url}),T$y.decode());},T$C._err=function(){if(this._removeLoadEvents(),T$y.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var T$n,T$C,T$_,T$E=0;for(T$n=(T$C=this.__toPlays).length,T$E=0;T$E<T$n;T$E++)(T$_=T$C[T$E])[3]&&!T$_[3].isStopped&&T$_[3].event("error");this.__toPlays.length=0;}},T$C._loaded=function(T$n){this._removeLoadEvents(),this._disposed||(this.audioBuffer=T$n,this.loaded=!0,this.event("complete"));},T$C._removeLoadEvents=function(){T$y.e.off("loaded:"+this.url,this,this._loaded),T$y.e.off("err:"+this.url,this,this._err);},T$C.__playAfterLoaded=function(){if(this.__toPlays){var T$n,T$C,T$_,T$E=0;for(T$n=(T$C=this.__toPlays).length,T$E=0;T$E<T$n;T$E++)(T$_=T$C[T$E])[3]&&!T$_[3].isStopped&&this.play(T$_[0],T$_[1],T$_[2],T$_[3]);this.__toPlays.length=0;}},T$C.play=function(T$n,T$C,T$_,T$E){return void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=0),T$E=T$E||new T$xn(),this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([T$n,T$C,T$_,T$E]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),T$E.url=this.url,T$E.loops=T$C,T$E.audioBuffer=this.audioBuffer,T$E.startTime=T$n,T$E.startHandler=T$_,T$E.play(!1),T$M.addChannel(T$E),T$E;},T$C.dispose=function(){this._disposed=!0,delete T$y._dataCache[this.url],delete T$y.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[];},T$b(0,T$C,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0;}),T$y.decode=function(){if(!(T$y.buffs.length<=0||T$y.isDecoding))if(T$y.isDecoding=!0,(T$y.tInfo=T$y.buffs.shift())&&T$y.tInfo.buffer&&T$y.tInfo.buffer.byteLength)try{T$y.ctx.decodeAudioData(T$y.tInfo.buffer,T$y._done,T$y._fail);}catch(T$n){console.error("decodeAudioData error  byteLength:"+T$y.tInfo.buffer.byteLength+"  url:"+T$y.tInfo.url);}else T$y._fail();},T$y._done=function(T$n){T$y.e.event("loaded:"+T$y.tInfo.url,T$n),T$y._dataCache[T$y.tInfo.url]=T$n,T$y.isDecoding=!1,T$y.decode();},T$y._fail=function(){T$y.e.event("err:"+T$y.tInfo.url,null),T$y.isDecoding=!1,T$y.decode();},T$y._playEmptySound=function(){if(null!=T$y.ctx){if(T$y._emptySource&&(T$y._emptySource.stop(),T$y._emptySource.disconnect(0),!T$xn._tryCleanFailed))try{T$y._emptySource.buffer=null;}catch(T$n){T$xn._tryCleanFailed=!0;}var T$n=T$y.ctx.createBufferSource();T$n.buffer=T$y._miniBuffer,T$n.connect(T$y.ctx.destination),T$n.start(0,0,0),T$y._emptySource=T$n;}},T$y._unlock=function(){T$y._unlocked||(T$y._playEmptySound(),"running"==T$y.ctx.state?(T$e.document.removeEventListener("mousedown",T$y._unlock,!0),T$e.document.removeEventListener("touchend",T$y._unlock,!0),T$e.document.removeEventListener("touchstart",T$y._unlock,!0),T$y._unlocked=!0):"suspended"==T$y.ctx.state&&T$M._recoverWebAudio());},T$y.initWebAudio=function(){"running"!=T$y.ctx.state&&(T$y._unlock(),T$e.document.addEventListener("mousedown",T$y._unlock,!0),T$e.document.addEventListener("touchend",T$y._unlock,!0),T$e.document.addEventListener("touchstart",T$y._unlock,!0));},T$y._emptySource=null,T$y._dataCache={},T$y.buffs=[],T$y.isDecoding=!1,T$y._unlocked=!1,T$y.tInfo=null,T$y.__loadingSound={},T$W(T$y,["window",function(){return this.window=T$e.window;},"webAudioEnabled",function(){return this.webAudioEnabled=T$y.window.AudioContext||T$y.window.webkitAudioContext||T$y.window.mozAudioContext;},"ctx",function(){return this.ctx=T$y.webAudioEnabled?new(T$y.window.AudioContext||T$y.window.webkitAudioContext||T$y.window.mozAudioContext)():void 0;},"_miniBuffer",function(){return this._miniBuffer=T$y.ctx.createBuffer(1,1,22050);},"e",function(){return this.e=new T$q();}]),T$y;}(),T$cn=function(T$n){function T$C(){this._responseType=null,this._data=null,T$C.__super.call(this),this._http=new T$e.window.XMLHttpRequest();}T$J(T$C,"laya.net.HttpRequest",T$q);var T$_=T$C.prototype;return T$_.send=function(T$n,T$C,T$_,T$E,T$y){void 0===T$_&&(T$_="get"),void 0===T$E&&(T$E="text"),this._responseType=T$E,this._data=null;var T$p=this,T$c=this._http;if(T$c.open(T$_,T$n,!0),T$y)for(var T$l=0;T$l<T$y.length;T$l++)T$c.setRequestHeader(T$y[T$l++],T$y[T$l]);else T$H.isConchApp||(T$C&&"string"!=typeof T$C?T$c.setRequestHeader("Content-Type","application/json"):T$c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));T$c.responseType="arraybuffer"!==T$E?"text":"arraybuffer",T$c.onerror=function(T$n){T$p._onError(T$n);},T$c.onabort=function(T$n){T$p._onAbort(T$n);},T$c.onprogress=function(T$n){T$p._onProgress(T$n);},T$c.onload=function(T$n){T$p._onLoad(T$n);},T$c.send(T$C);},T$_._onProgress=function(T$n){T$n&&T$n.lengthComputable&&this.event("progress",T$n.loaded/T$n.total);},T$_._onAbort=function(T$n){this.error("Request was aborted by user");},T$_._onError=function(T$n){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText);},T$_._onLoad=function(T$n){var T$C=this._http,T$_=void 0!==T$C.status?T$C.status:200;200===T$_||204===T$_||0===T$_?this.complete():this.error("["+T$C.status+"]"+T$C.statusText+":"+T$C.responseURL);},T$_.error=function(T$n){this.clear(),this.event("error",T$n);},T$_.complete=function(){this.clear();var T$C=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=T$z.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText;}catch(T$n){T$C=!1,this.error(T$n.message);}T$C&&this.event("complete",this._data instanceof Array?[this._data]:this._data);},T$_.clear=function(){var T$n=this._http;T$n.onerror=T$n.onabort=T$n.onprogress=T$n.onload=null;},T$b(0,T$_,"url",function(){return this._http.responseURL;}),T$b(0,T$_,"http",function(){return this._http;}),T$b(0,T$_,"data",function(){return this._data;}),T$C;}(),T$ln=function(T$n){function T$N(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,T$N.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1;}T$J(T$N,"laya.net.Loader",T$q);var T$C=T$N.prototype;return T$C.load=function(T$n,T$C,T$_,T$E,T$y){if(T$n&&""!=T$n||console.error("Loader 加载的url不合法 "+T$n),void 0===T$_&&(T$_=!0),void 0===T$y&&(T$y=!1),0===(this._url=T$n).indexOf("data:image")?this._type=T$C="image":this._type=T$C||(T$C=this.getTypeFromUrl(T$n)),this._cache=T$_,this._data=null,!T$y&&T$N.loadedMap[T$n])return this._data=T$N.loadedMap[T$n],this.event("progress",1),void this.event("complete",this._data);if(T$E&&T$N.setGroup(T$n,T$E),null!=T$N.parserMap[T$C])return this._customParse=!0,void(T$N.parserMap[T$C]instanceof laya.utils.Handler?T$N.parserMap[T$C].runWith(this):T$N.parserMap[T$C].call(null,this));if("image"===T$C||"htmlimage"===T$C||"nativeimage"===T$C)return this._loadImage(T$n);if("ttf"===T$C)return this._loadTTF(T$n);switch(T$C){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:T$C;}T$N.preLoadedMap[T$n]?this.onLoaded(T$N.preLoadedMap[T$n]):T$c.resMgrLoad(T$n,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime);},T$C.getTypeFromUrl=function(T$n){var T$C=T$z.getFileExtension(T$n);return T$C?T$N.typeMap[T$C]:(console.warn("Not recognize the resources suffix",T$n),"text");},T$C._loadTTF=function(T$n){T$n=T$g.formatURL(T$n);var T$C=new T$V();T$C.complete=T$a.create(this,this.onLoaded),T$C.load(T$n);},T$C._loadImage=function(T$n){T$c.imgMgrLoad(T$n,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime);},T$C._loadImageComplete=function(T$n,T$C,T$_){if(null!=T$_){if(T$_ instanceof ArrayBuffer){var T$E=new DataView(T$_),T$y=new laya.webgl.resource.WebGLImage(new Uint8Array(T$_,8),T$n,0,!1,T$E.getUint32(0),T$E.getUint32(4));this.onLoaded(T$y);}else if(T$_ instanceof T$Jn)T$N.imgMgrSet[T$n]=T$C,T$c.imgMgrLock(T$n,T$N.imgMgrSet[T$n]),this._url=T$n,this.complete(T$_);else{var T$p=-1!=T$n.indexOf(".png",T$n.length-4)?6408:6407;T$y=new laya.webgl.resource.WebGLImage(T$_,T$n,T$p,!1,T$_.width,T$_.height);this.onLoaded(T$y);}}else this.event("error","Load image failed");},T$C.imageCancel=function(T$n,T$C,T$_){T$c.imgMgrCancel&&T$c.imgMgrCancel(T$n,this._onImageCallback);},T$C._loadSound=function(T$n){var T$C=new T$M._soundClass(),T$_=this;function T$E(){T$C.offAll();}T$C.on("complete",this,function(){T$E(),T$_.onLoaded(T$C);}),T$C.on("error",this,function(){T$E(),T$C.dispose(),T$_.event("error","Load sound failed");}),T$C.load(T$n);},T$C.onProgress=function(T$n){"atlas"===this._type?this.event("progress",.3*T$n):this.event("progress",T$n);},T$C.onError=function(T$n){this.event("error",T$n);},T$C._loadedComplete=function(T$n,T$C,T$_){if(null!=T$_)switch(this._type){case"atlas":case"plf":case"json":var T$E=new T$G(T$_);this.onLoaded(JSON.parse(T$E.readUTFBytes()));break;case"font":T$E=new T$G(T$_);this.onLoaded(T$z.parseXMLFromString(T$E.readUTFBytes()));break;default:this.onLoaded(T$_);}else this.event("error",T$n);},T$C.onLoaded=function(T$n){var T$C=this._type;if("plf"==T$C)this.parsePLFData(T$n),this.complete(T$n);else if("image"===T$C){var T$_=new T$Jn(T$n);T$_.url=this._url,this.complete(T$_);}else if("sound"===T$C||"htmlimage"===T$C||"nativeimage"===T$C)this.complete(T$n);else if("atlas"===T$C){if(!T$n.src&&!T$n._setContext){if(!this._data){if((this._data=T$n).meta&&T$n.meta.image)for(var T$E=T$n.meta.image.split(","),T$y=0<=this._url.indexOf("/")?"/":"\\",T$p=this._url.lastIndexOf(T$y),T$c=0<=T$p?this._url.substr(0,T$p+1):"",T$l=0,T$W=T$E.length;T$l<T$W;T$l++)T$E[T$l]=T$c+T$E[T$l];else T$E=[this._url.replace(".json",".png")];T$E.reverse(),T$n.toLoads=T$E,T$n.pics=[];}return this.event("progress",.3+1/T$E.length*.6),this._loadImage(T$E.pop());}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(T$n),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var T$q=this._data.frames,T$J=this._url.split("?")[0],T$j=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:T$J.substring(0,T$J.lastIndexOf("."))+"/",T$P=this._data.pics,T$x=T$g.formatURL(this._url),T$b=T$N.atlasMap[T$x]||(T$N.atlasMap[T$x]=[]);T$b.dir=T$j;var T$r=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var T$m in T$r=parseFloat(this._data.meta.scale),T$q){var T$d,T$a=T$q[T$m],T$O=T$P[T$a.frame.idx?T$a.frame.idx:0],T$A=T$g.formatURL(T$j+T$m);T$O.scaleRate=T$r,T$d=T$Jn.create(T$O,T$a.frame.x,T$a.frame.y,T$a.frame.w,T$a.frame.h,T$a.spriteSourceSize.x,T$a.spriteSourceSize.y,T$a.sourceSize.w,T$a.sourceSize.h),T$N.cacheRes(T$A,T$d),T$N.keepCache(this._url,T$j+T$m),T$d.url=T$A,T$b.push(T$A);}else for(T$m in T$q)T$O=T$P[(T$a=T$q[T$m]).frame.idx?T$a.frame.idx:0],T$A=T$g.formatURL(T$j+T$m),T$N.cacheRes(T$A,T$Jn.create(T$O,T$a.frame.x,T$a.frame.y,T$a.frame.w,T$a.frame.h,T$a.spriteSourceSize.x,T$a.spriteSourceSize.y,T$a.sourceSize.w,T$a.sourceSize.h)),T$N.loadedMap[T$A].url=T$A,T$N.keepCache(this._url,T$j+T$m),T$b.push(T$A);delete this._data.pics,this.complete(this._data);}else if("font"==T$C){if(!T$n.src)return this._data=T$n,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var T$k=new T$S();T$k.parseFont(this._data,T$n);var T$t=this._url.split(".fnt")[0].split("/"),T$T=T$t[T$t.length-1];T$mn.registerBitmapFont(T$T,T$k),this._data=T$k,this.complete(this._data);}else if("pkm"==T$C){var T$Y=T$tn.create(T$n,this._url),T$s=new T$Jn(T$Y);T$s.url=this._url,this.complete(T$s);}else this.complete(T$n);},T$C.parsePLFData=function(T$n){var T$C,T$_,T$E;for(T$C in T$n)switch(T$E=T$n[T$C],T$C){case"json":case"text":for(T$_ in T$E)T$N.preLoadedMap[T$g.formatURL(T$_)]=T$E[T$_];break;default:for(T$_ in T$E)T$N.preLoadedMap[T$g.formatURL(T$_)]=T$E[T$_];}},T$C.complete=function(T$n){this._data=T$n,this._customParse?this.event("loaded",T$n instanceof Array?[T$n]:T$n):(T$N._loaders.push(this),T$N._isWorking||T$N.checkNext());},T$C.endLoad=function(T$n){T$n&&(this._data=T$n),this._cache&&T$N.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data);},T$b(0,T$C,"url",function(){return this._url;}),T$b(0,T$C,"data",function(){return this._data;}),T$b(0,T$C,"cache",function(){return this._cache;}),T$b(0,T$C,"type",function(){return this._type;}),T$N.checkNext=function(){T$N._isWorking=!0;for(var T$n=T$e.now();T$N._startIndex<T$N._loaders.length;)if(T$e.now(),T$N._loaders[T$N._startIndex].endLoad(),T$N._startIndex++,T$e.now()-T$n>T$N.maxTimeOut)return console.warn("loader callback cost a long time:"+(T$e.now()-T$n)+" url="+T$N._loaders[T$N._startIndex-1].url),void T$T.timer.frameOnce(1,null,T$N.checkNext);T$N._loaders.length=0,T$N._startIndex=0,T$N._isWorking=!1;},T$N.clearRes=function(T$n,T$C){if(null!=T$n){void 0===T$C&&(T$C=!1),T$n=T$g.formatURL(T$n);var T$_=T$N.getAtlas(T$n);if(T$_){for(var T$E=0,T$y=T$_.length;T$E<T$y;T$E++){var T$p=T$_[T$E],T$c=T$N.getRes(T$p);delete T$N.loadedMap[T$p],T$N.clearCache(T$n.substring(T$g.basePath.length),T$p.substring(T$g.basePath.length)),T$c&&T$c.destroy(T$C);}T$_.length=0,delete T$N.atlasMap[T$n],delete T$N.loadedMap[T$n];}else{var T$l=T$N.loadedMap[T$n];T$l&&(delete T$N.loadedMap[T$n],T$l instanceof laya.resource.Texture&&T$l.bitmap&&T$l.destroy(T$C));}}},T$N.clearTextureRes=function(T$n){T$n=T$g.formatURL(T$n);var T$C=laya.net.Loader.getAtlas(T$n),T$_=T$C&&0<T$C.length?laya.net.Loader.getRes(T$C[0]):laya.net.Loader.getRes(T$n);T$_&&T$_.bitmap&&(T$H.isConchApp&&!T$H.isConchWebGL?T$_.bitmap.source.releaseTexture&&T$_.bitmap.source.releaseTexture():null==T$_.bitmap._atlaser&&T$_.bitmap.releaseResource(!0));},T$N.getRes=function(T$n){return T$N.loadedMap[T$g.formatURL(T$n)];},T$N.getAtlas=function(T$n){return T$N.atlasMap[T$g.formatURL(T$n)];},T$N.cacheRes=function(T$n,T$C){T$n=T$g.formatURL(T$n),null!=T$N.loadedMap[T$n]?console.warn("Resources already exist,is repeated loading:",T$n):T$N.loadedMap[T$n]=T$C;},T$N.setGroup=function(T$n,T$C){T$N.groupMap[T$C]||(T$N.groupMap[T$C]=[]),T$N.groupMap[T$C].push(T$n);},T$N.clearResByGroup=function(T$n){if(T$N.groupMap[T$n]){var T$C=T$N.groupMap[T$n],T$_=0,T$E=T$C.length;for(T$_=0;T$_<T$E;T$_++)T$N.clearRes(T$C[T$_]);T$C.length=0;}},T$N.keepCache=function(T$n,T$C){if(T$n&&T$C){var T$_=T$N.cacheSet[T$C];T$_?-1==T$_.indexOf(T$n)&&T$_.push(T$n):T$N.cacheSet[T$C]=[T$n];}},T$N.clearCache=function(T$n,T$C){if(T$n&&T$C){var T$_=T$N.cacheSet[T$C];if(T$_){var T$E=T$_.indexOf(T$n);if(-1!==T$E){var T$y=T$_.length-1;0==T$y?(delete T$N.cacheSet[T$C],0<T$N.imgMgrSet[T$C]?T$c.imgMgrFree(T$C,T$N.imgMgrSet[T$C]):T$N.clearRes(T$C,!0)):(T$_[T$E]=T$_[T$y],T$_.length=T$y);}}}},T$N.saveObject=function(T$n,T$C,T$_){if(T$C&&T$n){var T$E=T$N.objectSet[T$n];T$E?(console.warn("Loader.saveObject: "+T$n),T$E[0]=T$C,T$E[1]=T$_):T$N.objectSet[T$n]=[T$C,T$_,[]];}},T$N.findObject=function(T$n){if(T$n){var T$C=T$N.objectSet[T$n];if(T$C)return T$C[0];}return null;},T$N.keepObject=function(T$n,T$C){if(T$n&&T$C){var T$_=T$N.objectSet[T$C];T$_&&-1===T$_[2].indexOf(T$n)&&T$_[2].push(T$n);}},T$N.clearObject=function(T$n,T$C){if(T$n&&T$C){var T$_=T$N.objectSet[T$C];if(T$_){var T$E=T$_[2],T$y=T$E.indexOf(T$n);if(-1!==T$y){var T$p=T$E.length-1;0==T$p?(delete T$N.objectSet[T$C],T$_[1]&&T$_[1].call(null,T$_[0])):(T$E[T$y]=T$E[T$p],T$E.length=T$p);}}}},T$N.TEXT="text",T$N.JSON="json",T$N.XML="xml",T$N.BUFFER="arraybuffer",T$N.IMAGE="image",T$N.SOUND="sound",T$N.ATLAS="atlas",T$N.FONT="font",T$N.TTF="ttf",T$N.PLF="plf",T$N.PKM="pkm",T$N.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},T$N.parserMap={},T$N.groupMap={},T$N.maxTimeOut=100,T$N.loadedMap={},T$N.preLoadedMap={},T$N.atlasMap={},T$N._loaders=[],T$N._isWorking=!1,T$N._startIndex=0,T$N.imgCache={},T$N.cacheSet={},T$N.objectSet={},T$N.imgMgrSet={},T$N;}(),T$Wn=function(T$n){var T$P;function T$x(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},T$x.__super.call(this);for(var T$n=0;T$n<this._maxPriority;T$n++)this._resInfos[T$n]=[];}T$J(T$x,"laya.net.LoaderManager",T$q);var T$C=T$x.prototype;return T$C.create=function(T$n,T$_,T$C,T$E,T$y,T$p,T$c,T$l){if(null==T$p&&(T$p=2),null==T$c&&(T$c=!0),T$n instanceof Array){var T$W=T$n,T$q=T$W.length,T$J=0;if(T$C)var T$j=T$a.create(T$C.caller,T$C.method,T$C.args,!1);for(var T$P=0;T$P<T$q;T$P++){var T$x=T$W[T$P];"string"==typeof T$x&&(T$x=T$W[T$P]={url:T$x}),T$x.progress=0;}for(T$P=0;T$P<T$q;T$P++){T$x=T$W[T$P];var T$b=T$C?T$a.create(null,T$d,[T$x],!1):null,T$r=T$C||T$_?T$a.create(null,T$m,[T$x]):null;this._create(T$x.url,T$r,T$b,T$x.clas||T$E,T$x.params||T$y,null!=T$x.priority&&0<=T$x.priority?T$x.priority:T$p,T$c,T$x.group||T$l);}function T$m(T$n,T$C){T$J++,T$n.progress=1,T$J===T$q&&T$_&&T$_.run();}function T$d(T$n,T$C){T$n.progress=T$C;for(var T$_=0,T$E=0;T$E<T$q;T$E++){T$_+=T$W[T$E].progress;}var T$y=T$_/T$q;T$j.runWith(T$y);}return!0;}return this._create(T$n,T$_,T$C,T$E,T$y,T$p,T$c,T$l);},T$C._create=function(T$C,T$_,T$n,T$E,T$y,T$p,T$c,T$l){T$C&&""!=T$C||console.error("加载的url不合法 "+T$C),null==T$p&&(T$p=2),null==T$c&&(T$c=!0);var T$W=T$g.formatURL(T$C),T$q=this.getRes(T$W);if(T$q)!T$q.hasOwnProperty("loaded")||T$q.loaded?(T$n&&T$n.runWith(1),T$_&&T$_.run()):T$_&&T$T.loader._createListener(T$C,T$_.caller,T$_.method,T$_.args,!0,!1);else{var T$J=T$z.getFileExtension(T$C),T$j=T$x.createMap[T$J];if(!T$j)throw new Error("LoaderManager:unknown file("+T$C+") extension with: "+T$J+".");T$E||(T$E=T$j[0]);var T$P=T$j[1];if("atlas"==T$J)this.load(T$C,T$_,T$n,T$P,T$p,T$c);else{T$E===T$Jn&&(T$P="htmlimage"),(T$q=T$E?new T$E():null).hasOwnProperty("_loaded")&&(T$q._loaded=!1),T$q._setUrl(T$C),T$l&&T$q._setGroup(T$l),this._createLoad(T$q,T$C,T$a.create(null,function(T$n){T$q&&!T$q.destroyed&&T$n&&T$q.onAsynLoaded.call(T$q,T$C,T$n,T$y),T$_&&T$_.run();T$T.loader.event(T$C);}),T$n,T$P,T$p,!1,T$l,!0),T$c&&this.cacheRes(T$W,T$q);}}return T$q;},T$C.load=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){T$n&&""!=T$n||console.error("加载的url不合法 "+T$n);var T$W=this;if(null==T$y&&(T$y=2),null==T$p&&(T$p=!0),void 0===T$l&&(T$l=!1),T$n instanceof Array)return this._loadAssets(T$n,T$C,T$_,T$E,T$y,T$p,T$c);var T$q=T$ln.getRes(T$n);if(null!=T$q)T$T.timer.frameOnce(1,null,function(){T$_&&T$_.runWith(1),T$C&&T$C.runWith(T$q),T$W._loaderCount||T$W.event("complete");});else{var T$J=T$x._resMap[T$n];T$J?(T$C&&T$J._createListener("complete",T$C.caller,T$C.method,T$C.args,!1,!1),T$_&&T$J._createListener("progress",T$_.caller,T$_.method,T$_.args,!1,!1)):((T$J=this._infoPool.length?this._infoPool.pop():new T$P()).url=T$n,T$J.clas=null,T$J.type=T$E,T$J.cache=T$p,T$J.group=T$c,T$J.ignoreCache=T$l,T$J.priority=T$y,T$C&&T$J.on("complete",T$C.caller,T$C.method,T$C.args),T$_&&T$J.on("progress",T$_.caller,T$_.method,T$_.args),T$x._resMap[T$n]=T$J,T$y=T$y<this._maxPriority?0<=T$y?T$y:0:this._maxPriority-1,this._resInfos[T$y].push(T$J),this._next());}return this;},T$C.cancel=function(T$n,T$C,T$_){if(T$q=T$x._resMap[T$n]){T$C&&T$q.off("complete",T$C.caller,T$C.method,!1),T$_&&T$q.off("progress",T$_.caller,T$_.method,!1);var T$E=T$q.getListener("complete"),T$y=T$q.getListener("progress");if(!(T$E&&T$E.head||T$y&&T$y.head)){if(T$q.loader){var T$p=T$q.loader;T$p.imageCancel(T$n),T$p.offAll(),T$p._data=null,T$p._customParse=!1,T$p._url=null,T$p._class=null,T$p._type=null,this._loaders.push(T$p),this._loaderCount--,delete this._loaderMap[T$q.url];}for(var T$c=0;T$c<this._maxPriority;T$c++)for(var T$l=this._resInfos[T$c],T$W=T$l.length-1;-1<T$W;T$W--){var T$q;(T$q=T$l[T$W])&&T$q.url===T$n&&(T$l[T$W]=null,T$q.destroy(),T$q.offAll(),this._infoPool.push(T$q));}delete T$x._resMap[T$n],this._next();}}},T$C._createLoad=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W){var T$q=this;if(null==T$p&&(T$p=2),null==T$c&&(T$c=!0),void 0===T$W&&(T$W=!1),T$C instanceof Array)return this._loadAssets(T$C,T$_,T$E,T$y,T$p,T$c,T$l);var T$J=T$ln.getRes(T$C);if(null!=T$J)T$T.timer.frameOnce(1,null,function(){T$E&&T$E.runWith(1),T$_&&T$_.runWith(T$J),T$q._loaderCount||T$q.event("complete");});else{var T$j=T$x._resMap[T$C];T$j?(T$_&&T$j._createListener("complete",T$_.caller,T$_.method,T$_.args,!1,!1),T$E&&T$j._createListener("progress",T$E.caller,T$E.method,T$E.args,!1,!1)):((T$j=this._infoPool.length?this._infoPool.pop():new T$P()).url=T$C,T$j.clas=T$n,T$j.type=T$y,T$j.cache=T$c,T$j.group=T$l,T$j.ignoreCache=T$W,T$j.priority=T$p,T$_&&T$j.on("complete",T$_.caller,T$_.method,T$_.args),T$E&&T$j.on("progress",T$E.caller,T$E.method,T$E.args),T$x._resMap[T$C]=T$j,T$p=T$p<this._maxPriority?0<=T$p?T$p:0:this._maxPriority-1,this._resInfos[T$p].push(T$j),this._next());}return this;},T$C._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var T$n=0;T$n<this._maxPriority;T$n++)for(var T$C=this._resInfos[T$n];0<T$C.length;){var T$_=T$C.shift();if(T$_)return this._doLoad(T$_);}this._loaderCount||this.event("complete");}},T$C._doLoad=function(T$C){var T$_=this._loaders.length?this._loaders.pop():new T$ln();this._loaderCount++,(this._loaderMap[T$C.url]=T$_).on("complete",null,T$y),T$_.on("progress",null,function(T$n){T$C.event("progress",T$n);}),T$_.on("error",null,function(T$n){T$y(null);}),T$C.loader=T$_;var T$E=this;function T$y(T$n){T$_.offAll(),T$_._data=null,T$_._customParse=!1,T$_._url=null,T$_._class=null,T$_._type=null,T$E._loaders.push(T$_),T$E._loaderCount--,delete T$E._loaderMap[T$C.url],T$E._endLoad(T$C,T$n instanceof Array?[T$n]:T$n),T$E._next();}T$_._class=T$C.clas,1<=T$C.priority?(T$_.priority=T$C.priority,T$_.realTime=!1):(T$_.priority=0,T$_.realTime=!0),T$_.load(T$C.url,T$C.type,T$C.cache,T$C.group,T$C.ignoreCache);},T$C._endLoad=function(T$n,T$C){var T$_=T$n.url;if(null==T$C){var T$E=this._failRes[T$_]||0;if(T$E<this.retryNum)return console.warn("[warn]Retry to load:",T$_),this._failRes[T$_]=T$E+1,void T$T.timer.once(this.retryDelay,this,this._addReTry,[T$n],!1);console.warn("[error]Failed to load:",T$_),this.event("error",T$_);}this._failRes[T$_]&&(this._failRes[T$_]=0),delete T$x._resMap[T$_],T$n.event("complete",T$C),T$n.destroy(),T$n.offAll(),this._infoPool.push(T$n);},T$C._addReTry=function(T$n){this._resInfos[this._maxPriority-1].push(T$n),this._next();},T$C.clearRes=function(T$n,T$C){void 0===T$C&&(T$C=!1),T$ln.clearRes(T$n,T$C);},T$C.getRes=function(T$n){return T$ln.getRes(T$n);},T$C.cacheRes=function(T$n,T$C){T$ln.cacheRes(T$n,T$C);},T$C.clearTextureRes=function(T$n){T$ln.clearTextureRes(T$n);},T$C.setGroup=function(T$n,T$C){T$ln.setGroup(T$n,T$C);},T$C.clearResByGroup=function(T$n){T$ln.clearResByGroup(T$n);},T$C.clearUnLoaded=function(){for(var T$n=0;T$n<this._maxPriority;T$n++){for(var T$C=this._resInfos[T$n],T$_=T$C.length-1;-1<T$_;T$_--){var T$E=T$C[T$_];T$E&&(T$E.destroy(),T$E.offAll(),this._infoPool.push(T$E));}T$C.length=0;}this._loaderCount=0,T$x._resMap={};},T$C.cancelLoadByUrls=function(T$n){if(T$n)for(var T$C=0,T$_=T$n.length;T$C<T$_;T$C++)this.cancelLoadByUrl(T$n[T$C]);},T$C.cancelLoadByUrl=function(T$n){for(var T$C=0;T$C<this._maxPriority;T$C++)for(var T$_=this._resInfos[T$C],T$E=T$_.length-1;-1<T$E;T$E--){var T$y=T$_[T$E];T$y&&T$y.url===T$n&&(T$_[T$E]=null,T$y.destroy(),T$y.offAll(),this._infoPool.push(T$y));}T$x._resMap[T$n]&&delete T$x._resMap[T$n];},T$C._loadAssets=function(T$n,T$_,T$c,T$C,T$E,T$y,T$p){null==T$E&&(T$E=2),null==T$y&&(T$y=!0);for(var T$l=T$n.length,T$W=0,T$q=0,T$J=[],T$j=!0,T$P=0;T$P<T$l;T$P++){var T$x=T$n[T$P];if(!T$x)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+T$n);"string"==typeof T$x&&(T$x={url:T$x,type:T$C,size:1,priority:T$E}),T$x.size||(T$x.size=1),T$x.progress=0,T$q+=T$x.size,T$J.push(T$x);var T$b=T$c?T$a.create(null,T$d,[T$x],!1):null,T$r=T$_||T$c?T$a.create(null,T$m,[T$x]):null;this.load(T$x.url,T$r,T$b,T$x.type,null!=T$x.priority&&0<=T$x.priority?T$x.priority:2,T$y,T$x.group||T$p);}function T$m(T$n,T$C){T$W++,T$n.progress=1,T$C||(T$j=!1),T$W===T$l&&T$_&&T$_.runWith(T$j);}function T$d(T$n,T$C){if(null!=T$c){T$n.progress=T$C;for(var T$_=0,T$E=0;T$E<T$J.length;T$E++){var T$y=T$J[T$E];T$_+=T$y.size*T$y.progress;}var T$p=T$_/T$q;T$c.runWith(T$p);}}return this;},T$x.cacheRes=function(T$n,T$C){T$ln.cacheRes(T$n,T$C);},T$x._resMap={},T$W(T$x,["createMap",function(){return this.createMap={atlas:[null,"atlas"]};}]),T$x.__init$=function(){T$P=function(T$n){function T$C(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,T$C.__super.call(this);}return T$J(T$C,"",T$q),T$C.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1;},T$C;}();},T$x;}(),T$qn=(function(T$n){function T$y(T$n){T$y.__super.call(this),T$n||(T$n=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var T$C=0,T$_=0,T$E=0;T$E<20;T$E++)T$E%5!=4?this._mat[T$C++]=T$n[T$E]:this._alpha[T$_++]=T$n[T$E];this._action=T$w.createFilterAction(32),this._action.data=this;}T$J(T$y,"laya.filters.ColorFilter",T$d);var T$C=T$y.prototype;T$T.imps(T$C,{"laya.filters.IFilter":!0}),T$C.callNative=function(T$n){T$n._$P.cf=this;T$n.conchModel&&T$n.conchModel.setFilterMatrix&&T$n.conchModel.setFilterMatrix(this._mat,this._alpha);},T$b(0,T$C,"type",function(){return 32;}),T$b(0,T$C,"action",function(){return this._action;});}(),function(T$n){function T$E(T$n,T$C,T$_){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===T$C&&(T$C=0),T$E.__super.call(this),this._byteClass=T$_||T$G,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,T$n&&0<T$C&&T$C<65535&&this.connect(T$n,T$C);}T$J(T$E,"laya.net.Socket",T$q);var T$C=T$E.prototype;T$C.connect=function(T$n,T$C){var T$_="ws://"+T$n+":"+T$C;T$_="https:"==T$e.window.location.protocol?"wss://"+T$n+":"+T$C:"ws://"+T$n+":"+T$C,this.connectByUrl(T$_);},T$C.connectByUrl=function(T$n){var T$C=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new T$e.window.WebSocket(T$n,this.protocols):this._socket=new T$e.window.WebSocket(T$n),this._socket.binaryType="arraybuffer",this._output=new this._byteClass(),this._output.endian=this.endian,this._input=new this._byteClass(),this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(T$n){T$C._onOpen(T$n);},this._socket.onmessage=function(T$n){T$C._onMessage(T$n);},this._socket.onclose=function(T$n){T$C._onClose(T$n);},this._socket.onerror=function(T$n){T$C._onError(T$n);};},T$C.cleanSocket=function(){try{this._socket.close();}catch(T$n){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null;},T$C.close=function(){if(null!=this._socket)try{this._socket.close();}catch(T$n){}},T$C._onOpen=function(T$n){this._connected=!0,this.event("open",T$n);},T$C._onMessage=function(T$n){if(T$n&&T$n.data){var T$C=T$n.data;if(this.disableInput&&T$C)this.event("message",T$C);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var T$_=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,T$C&&("string"==typeof T$C?this._input.writeUTFBytes(T$C):this._input.writeArrayBuffer(T$C),this._addInputPosition=this._input.pos,this._input.pos=T$_),this.event("message",T$C);}}},T$C._onClose=function(T$n){this._connected=!1,this.event("close",T$n);},T$C._onError=function(T$n){this.event("error",T$n);},T$C.send=function(T$n){this._socket.send(T$n);},T$C.flush=function(){if(this._output&&0<this._output.length){var T$C;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length));}catch(T$n){T$C=T$n;}this._output.endian=this.endian,this._output.clear(),T$C&&this.event("error",T$C);}},T$b(0,T$C,"input",function(){return this._input;}),T$b(0,T$C,"output",function(){return this._output;}),T$b(0,T$C,"connected",function(){return this._connected;}),T$b(0,T$C,"endian",function(){return this._endian;},function(T$n){this._endian=T$n,null!=this._input&&(this._input.endian=T$n),null!=this._output&&(this._output.endian=T$n);}),T$E.LITTLE_ENDIAN="littleEndian",T$E.BIG_ENDIAN="bigEndian";}(),function(T$n){function T$l(){T$l.__super.call(this),this._$1__id=++T$l._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(T$l._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,T$f.currentResourceManager&&T$f.currentResourceManager.addResource(this);}T$J(T$l,"laya.resource.Resource",T$q);var T$C=T$l.prototype;return T$T.imps(T$C,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),T$C._setUrl=function(T$n){var T$C;this._url!==T$n&&(this._url&&((T$C=T$l._urlResourcesMap[this._url]).splice(T$C.indexOf(this),1),0===T$C.length&&delete T$l._urlResourcesMap[this._url]),T$n&&((T$C=T$l._urlResourcesMap[T$n])||(T$l._urlResourcesMap[T$n]=T$C=[]),T$C.push(this)),this._url=T$n);},T$C._getGroup=function(){return this._group;},T$C._setGroup=function(T$n){var T$C;this._group!==T$n&&(this._group&&((T$C=T$l._groupResourcesMap[this._group]).splice(T$C.indexOf(this),1),0===T$C.length&&delete T$l._groupResourcesMap[this._group]),T$n&&((T$C=T$l._groupResourcesMap[T$n])||(T$l._groupResourcesMap[T$n]=T$C=[]),T$C.push(this)),this._group=T$n);},T$C._addReference=function(){this._referenceCount++;},T$C._removeReference=function(){this._referenceCount--;},T$C._clearReference=function(){this._referenceCount=0;},T$C._endLoaded=function(){this.__loaded=!0,this.event("loaded",this);},T$C.recreateResource=function(){this.completeCreate();},T$C.disposeResource=function(){},T$C.activeResource=function(T$n){void 0===T$n&&(T$n=!1),this._lastUseFrameCount=T$h.loopCount,!this._destroyed&&this.__loaded&&(this._released||T$n)&&this.recreateResource();},T$C.releaseResource=function(T$n){return void 0===T$n&&(T$n=!0),!(!T$n&&this.lock)&&!(this._released&&!T$n)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0);},T$C.onAsynLoaded=function(T$n,T$C,T$_){throw new Error("Resource: must override this function!");},T$C.destroy=function(){var T$n;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete T$l._idResourcesMap[this.id],this._url&&((T$n=T$l._urlResourcesMap[this._url])&&(T$n.splice(T$n.indexOf(this),1),0===T$n.length&&delete T$l._urlResourcesMap[this.url]),T$ln.clearRes(this._url),this.__loaded||T$w.cancelLoadByUrl(this._url)),this._group&&((T$n=T$l._groupResourcesMap[this._group]).splice(T$n.indexOf(this),1),0===T$n.length&&delete T$l._groupResourcesMap[this.url]));},T$C.completeCreate=function(){this._released=!1,this.event("recovered",this);},T$C.dispose=function(){this.destroy();},T$b(0,T$C,"memorySize",function(){return this._memorySize;},function(T$n){var T$C=T$n-this._memorySize;this._memorySize=T$n,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,T$C),this.resourceManager&&this.resourceManager.addSize(T$C);}),T$b(0,T$C,"_loaded",null,function(T$n){this.__loaded=T$n;}),T$b(0,T$C,"loaded",function(){return this.__loaded;}),T$b(0,T$C,"id",function(){return this._$1__id;}),T$b(0,T$C,"destroyed",function(){return this._destroyed;}),T$b(0,T$C,"group",function(){return this._getGroup();},function(T$n){this._setGroup(T$n);}),T$b(0,T$C,"resourceManager",function(){return this._resourceManager;}),T$b(0,T$C,"url",function(){return this._url;}),T$b(0,T$C,"released",function(){return this._released;}),T$b(0,T$C,"referenceCount",function(){return this._referenceCount;}),T$l.getResourceByID=function(T$n){return T$l._idResourcesMap[T$n];},T$l.getResourceByURL=function(T$n,T$C){return void 0===T$C&&(T$C=0),null==T$l._urlResourcesMap[T$n]?null:T$l._urlResourcesMap[T$n][T$C];},T$l.getResourceCountByURL=function(T$n){return T$l._urlResourcesMap[T$n].length;},T$l.destroyUnusedResources=function(T$n){var T$C;if(T$n){var T$_=T$l._groupResourcesMap[T$n];if(T$_)for(var T$E=T$_.slice(),T$y=0,T$p=T$E.length;T$y<T$p;T$y++)(T$C=T$E[T$y]).lock||0!==T$C._referenceCount||T$C.destroy();}else for(var T$c in T$l._idResourcesMap)(T$C=T$l._idResourcesMap[T$c]).lock||0!==T$C._referenceCount||T$C.destroy();},T$l._uniqueIDCounter=0,T$l._idResourcesMap={},T$l._urlResourcesMap={},T$l._groupResourcesMap={},T$l;}()),T$Jn=function(T$n){function T$N(T$n,T$C){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,T$N.__super.call(this),T$n&&null!=T$n._addReference&&T$n._addReference(),this.setTo(T$n,T$C);}T$J(T$N,"laya.resource.Texture",T$q);var T$C=T$N.prototype;return T$C._setUrl=function(T$n){this.url=T$n;},T$C.setTo=function(T$n,T$C){if(T$n instanceof T$c.HTMLElement){var T$_=T$On.create("2D",T$n);this.bitmap=T$_;}else this.bitmap=T$n;if(this.uv=T$C||T$N.DEF_UV,T$n){this._w=T$n.width,this._h=T$n.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var T$E=this;if(this._loaded)T$w.addToAtlas&&T$w.addToAtlas(T$E);else{var T$y=T$n;T$y instanceof laya.resource.HTMLImage&&T$y.image&&T$y.image.addEventListener("load",function(T$n){T$w.addToAtlas&&T$w.addToAtlas(T$E);},!1);}}},T$C.active=function(){this.bitmap&&this.bitmap.activeResource();},T$C.destroy=function(T$n){if(void 0===T$n&&(T$n=!1),this.alphaTexture&&(this.alphaTexture.destroy(T$n),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var T$C=this.bitmap;T$n?(T$H.isConchApp&&T$C.source&&T$C.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,T$C.dispose(),T$C._clearReference()):(T$C._removeReference(),0==T$C.referenceCount&&(T$H.isConchApp&&T$C.source&&T$C.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,T$C.dispose())),this.url&&this===T$T.loader.getRes(this.url)&&T$T.loader.clearRes(this.url,T$n),this._loaded=!1;}},T$C.load=function(T$n){var T$C=this;this._loaded=!1,T$n=T$g.customFormat(T$n);var T$_=this.bitmap||(this.bitmap=T$tn.create(T$n));T$_.uri=T$n,T$_&&T$_._addReference();var T$E=this;T$_.onload=function(){T$_.onload=null,T$E._loaded=!0,T$C.sourceWidth=T$C._w=T$_.width,T$C.sourceHeight=T$C._h=T$_.height,T$E.event("loaded",this),T$w.addToAtlas&&T$w.addToAtlas(T$E);};},T$C.addTextureToAtlas=function(T$n){T$w.addTextureToAtlas(this);},T$C.getPixels=function(T$n,T$C,T$_,T$E){if(T$H.isConchApp){var T$y=this.bitmap;if(T$y.source&&T$y.source.getImageData){var T$p=T$y.source.getImageData(T$n,T$C,T$_,T$E),T$c=new Uint8Array(T$p);return Array.from(T$c);}return null;}return T$H.isWebGL?T$w.getTexturePixels(this,T$n,T$C,T$_,T$E):(T$e.canvas.size(T$_,T$E),T$e.canvas.clear(),T$e.context.drawTexture(this,-T$n,-T$C,this.width,this.height,0,0),T$e.context.getImageData(0,0,T$_,T$E).data);},T$C.onAsynLoaded=function(T$n,T$C){if(T$C){if("function"!=typeof T$C._addReference)throw new Error("bitmap._addReference is not a function. "+T$C.className+" "+typeof T$C._addReference+" "+T$C.constructor);T$C._addReference();}this.setTo(T$C,this.uv),this._loaded&&this.event("loaded",this);},T$b(0,T$C,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null;}),T$b(0,T$C,"loaded",function(){return this._loaded;}),T$b(0,T$C,"released",function(){return!this.bitmap||this.bitmap.released;}),T$b(0,T$C,"width",function(){return this._w?this._w:this.uv&&this.uv!==T$N.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width;},function(T$n){this._w=T$n,this.sourceWidth||(this.sourceWidth=T$n);}),T$b(0,T$C,"repeat",function(){return!T$H.isWebGL||!this.bitmap||this.bitmap.repeat;},function(T$n){T$n&&T$H.isWebGL&&this.bitmap&&(this.bitmap.repeat=T$n)&&(this.bitmap.enableMerageInAtlas=!1);}),T$b(0,T$C,"height",function(){return this._h?this._h:this.uv&&this.uv!==T$N.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height;},function(T$n){this._h=T$n,this.sourceHeight||(this.sourceHeight=T$n);}),T$b(0,T$C,"isLinearSampling",function(){return!T$H.isWebGL||9728!=this.bitmap.minFifter;},function(T$n){!T$n&&T$H.isWebGL&&(T$n||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1));}),T$N.moveUV=function(T$n,T$C,T$_){for(var T$E=0;T$E<8;T$E+=2)T$_[T$E]+=T$n,T$_[T$E+1]+=T$C;return T$_;},T$N.create=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W){void 0===T$p&&(T$p=0),void 0===T$c&&(T$c=0),void 0===T$l&&(T$l=0),void 0===T$W&&(T$W=0);var T$q=T$n instanceof laya.resource.Texture,T$J=T$q?T$n.uv:T$N.DEF_UV,T$j=T$q?T$n.bitmap:T$n,T$P=T$w.isAtlas(T$j);if(T$P){var T$x=T$j._atlaser,T$b=T$n._atlasID;if(-1==T$b)throw new Error("create texture error");T$j=T$x._inAtlasTextureBitmapValue[T$b],T$J=T$x._inAtlasTextureOriUVValue[T$b];}var T$r=new T$N(T$j,null);T$j.width&&T$C+T$E>T$j.width&&(T$E=T$j.width-T$C),T$j.height&&T$_+T$y>T$j.height&&(T$y=T$j.height-T$_),T$r.width=T$E,T$r.height=T$y,T$r.offsetX=T$p,T$r.offsetY=T$c,T$r.sourceWidth=T$l||T$E,T$r.sourceHeight=T$W||T$y;var T$m=1/T$j.width,T$d=1/T$j.height;T$C*=T$m,T$_*=T$d,T$E*=T$m,T$y*=T$d;var T$a=T$r.uv[0],T$O=T$r.uv[1],T$A=T$r.uv[4],T$k=T$r.uv[5],T$t=T$A-T$a,T$T=T$k-T$O,T$Y=T$N.moveUV(T$J[0],T$J[1],[T$C,T$_,T$C+T$E,T$_,T$C+T$E,T$_+T$y,T$C,T$_+T$y]);T$r.uv=[T$a+T$Y[0]*T$t,T$O+T$Y[1]*T$T,T$A-(1-T$Y[2])*T$t,T$O+T$Y[3]*T$T,T$A-(1-T$Y[4])*T$t,T$k-(1-T$Y[5])*T$T,T$a+T$Y[6]*T$t,T$k-(1-T$Y[7])*T$T],T$P&&T$r.addTextureToAtlas();var T$s=T$j.scaleRate;return T$s&&1!=T$s?(T$r.sourceWidth/=T$s,T$r.sourceHeight/=T$s,T$r.width/=T$s,T$r.height/=T$s,T$r.scaleRate=T$s,T$r.offsetX/=T$s,T$r.offsetY/=T$s):T$r.scaleRate=1,T$r;},T$N.createFromTexture=function(T$n,T$C,T$_,T$E,T$y){var T$p=T$n.scaleRate;1!=T$p&&(T$C*=T$p,T$_*=T$p,T$E*=T$p,T$y*=T$p);var T$c=T$s.TEMP.setTo(T$C-T$n.offsetX,T$_-T$n.offsetY,T$E,T$y),T$l=T$c.intersection(T$N._rect1.setTo(0,0,T$n.width,T$n.height),T$N._rect2);if(!T$l)return null;var T$W=T$N.create(T$n,T$l.x,T$l.y,T$l.width,T$l.height,T$l.x-T$c.x,T$l.y-T$c.y,T$E,T$y);if(T$W.bitmap&&T$W.bitmap._removeReference)return T$W.bitmap._removeReference(),T$W;var T$q="bitmap:"+(T$W.bitmap?T$W.bitmap.constructor?T$W.bitmap.constructor.name:T$W.bitmap.__className:"")+", url:"+(T$n.url+" | "+(T$W.bitmap?T$W.bitmap.url:T$n.url))+", x="+T$C+",y="+T$_+",width="+T$E+",height="+T$y+", result="+(T$l?T$l.x+","+T$l.y+","+T$l.width+","+T$l.height:"null")+", rect="+T$c.x+","+T$c.y+","+T$c.width+","+T$c.height;throw new Error("报错：bitmap._removeReference is not a function  "+T$q);},T$N.DEF_UV=[0,0,1,0,1,1,0,1],T$N.INV_UV=[0,1,1,1,1,0,0,0],T$N._rect1=new T$s(),T$N._rect2=new T$s(),T$N;}(),T$n=function(T$n){var T$l;function T$p(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,T$p.__super.call(this);}T$J(T$p,"laya.utils.TimeLine",T$q);var T$C=T$p.prototype;return T$C.to=function(T$n,T$C,T$_,T$E,T$y){return void 0===T$y&&(T$y=0),this._create(T$n,T$C,T$_,T$E,T$y,!0);},T$C.from=function(T$n,T$C,T$_,T$E,T$y){return void 0===T$y&&(T$y=0),this._create(T$n,T$C,T$_,T$E,T$y,!1);},T$C._create=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c=T$L.getItemByClass("tweenData",T$l);return T$c.isTo=T$p,T$c.type=0,T$c.target=T$n,T$c.duration=T$_,T$c.data=T$C,T$c.startTime=this._startTime+T$y,T$c.endTime=T$c.startTime+T$c.duration,T$c.ease=T$E,this._startTime=Math.max(T$c.endTime,this._startTime),this._tweenDataList.push(T$c),this._startTimeSort=!0,this._endTimeSort=!0,this;},T$C.addLabel=function(T$n,T$C){var T$_=T$L.getItemByClass("tweenData",T$l);return T$_.type=1,T$_.data=T$n,T$_.endTime=T$_.startTime=this._startTime+T$C,this._labelDic||(this._labelDic={}),this._labelDic[T$n]=T$_,this._tweenDataList.push(T$_),this;},T$C.removeLabel=function(T$n){if(this._labelDic&&this._labelDic[T$n]){var T$C=this._labelDic[T$n];if(T$C){var T$_=this._tweenDataList.indexOf(T$C);-1<T$_&&this._tweenDataList.splice(T$_,1);}delete this._labelDic[T$n];}},T$C.gotoTime=function(T$n){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var T$C,T$_,T$E,T$y;for(var T$p in this._firstTweenDic)if(T$_=this._firstTweenDic[T$p])for(var T$c in T$_)T$_.diyTarget.hasOwnProperty(T$c)&&(T$_.diyTarget[T$c]=T$_[T$c]);for(T$p in this._tweenDic)(T$C=this._tweenDic[T$p]).clear(),delete this._tweenDic[T$p];if(this._index=0,this._gidIndex=0,this._currTime=T$n,this._lastTime=T$e.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=T$E=this._tweenDataList.concat(),T$E.sort(function(T$n,T$C){return T$n.endTime>T$C.endTime?1:T$n.endTime<T$C.endTime?-1:0;});}else T$E=this._endTweenDataList;for(var T$l=0,T$W=T$E.length;T$l<T$W;T$l++)if(0==(T$y=T$E[T$l]).type){if(!(T$n>=T$y.endTime))break;this._index=Math.max(this._index,T$l+1);var T$q=T$y.data;if(T$y.isTo)for(var T$J in T$q)T$y.target[T$J]=T$q[T$J];}for(T$l=0,T$W=this._tweenDataList.length;T$l<T$W;T$l++)0==(T$y=this._tweenDataList[T$l]).type&&T$n>=T$y.startTime&&T$n<T$y.endTime&&(this._index=Math.max(this._index,T$l+1),this._gidIndex++,(T$C=T$L.getItemByClass("tween",T$R))._create(T$y.target,T$y.data,T$y.duration,T$y.ease,T$a.create(this,this._animComplete,[this._gidIndex]),0,!1,T$y.isTo,!0,!1),T$C.setStartTime(this._currTime-(T$n-T$y.startTime)),T$C._updateEase(this._currTime),T$C.gid=this._gidIndex,this._tweenDic[this._gidIndex]=T$C);}},T$C.gotoLabel=function(T$n){if(null!=this._labelDic){var T$C=this._labelDic[T$n];T$C&&this.gotoTime(T$C.startTime);}},T$C.pause=function(){T$T.timer.clear(this,this._update);},T$C.resume=function(){this.play(this._currTime,this._loopKey);},T$C.play=function(T$n,T$C){if(void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(T$n,T$C){return T$n.startTime>T$C.startTime?1:T$n.startTime<T$C.startTime?-1:0;});for(var T$_=0,T$E=this._tweenDataList.length;T$_<T$E;T$_++){var T$y=this._tweenDataList[T$_];if(null!=T$y&&0==T$y.type){var T$p=T$y.target,T$c=T$p.$_GID||(T$p.$_GID=T$z.getGID()),T$l=null;for(var T$W in null==this._firstTweenDic[T$c]?((T$l={}).diyTarget=T$p,this._firstTweenDic[T$c]=T$l):T$l=this._firstTweenDic[T$c],T$y.data)null==T$l[T$W]&&(T$l[T$W]=T$p[T$W]);}}}"string"==typeof T$n?this.gotoLabel(T$n):this.gotoTime(T$n),this._loopKey=T$C,this._lastTime=T$e.now(),T$T.timer.frameLoop(1,this,this._update);}},T$C._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var T$n in this._tweenDic)(T$C=this._tweenDic[T$n]).complete();return this._complete(),void this.pause();}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0);}var T$C,T$_=T$e.now(),T$E=T$_-this._lastTime,T$y=this._currTime+=T$E*this.scale;for(T$n in this._lastTime=T$_,this._tweenDic)(T$C=this._tweenDic[T$n])._updateEase(T$y);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var T$p=this._tweenDataList[this._index];T$y>=T$p.startTime&&(this._index++,0==T$p.type?(this._gidIndex++,(T$C=T$L.getItemByClass("tween",T$R))._create(T$p.target,T$p.data,T$p.duration,T$p.ease,T$a.create(this,this._animComplete,[this._gidIndex]),0,!1,T$p.isTo,!0,!1),T$C.setStartTime(T$y),T$C.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=T$C)._updateEase(T$y)):this.event("label",T$p.data));}},T$C._animComplete=function(T$n){this._tweenDic[T$n]&&delete this._tweenDic[T$n];},T$C._complete=function(){this.event("complete");},T$C.reset=function(){var T$n;if(this._labelDic)for(T$n in this._labelDic)delete this._labelDic[T$n];for(T$n in this._tweenDic)this._tweenDic[T$n].clear(),delete this._tweenDic[T$n];for(T$n in this._firstTweenDic)delete this._firstTweenDic[T$n];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var T$C,T$_=0;for(T$C=this._tweenDataList.length,T$_=0;T$_<T$C;T$_++)this._tweenDataList[T$_]&&this._tweenDataList[T$_].destroy();}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,T$T.timer.clear(this,this._update);},T$C.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null;},T$b(0,T$C,"index",function(){return this._frameIndex;},function(T$n){this._frameIndex=T$n,this.gotoTime(this._frameIndex/this._frameRate*1e3);}),T$b(0,T$C,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total;}),T$p.to=function(T$n,T$C,T$_,T$E,T$y){return void 0===T$y&&(T$y=0),new T$p().to(T$n,T$C,T$_,T$E,T$y);},T$p.from=function(T$n,T$C,T$_,T$E,T$y){return void 0===T$y&&(T$y=0),new T$p().from(T$n,T$C,T$_,T$E,T$y);},T$p.__init$=function(){T$l=function(){function T$n(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null;}return T$J(T$n,""),T$n.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,T$L.recover("tweenData",this);},T$n;}();},T$p;}(),T$jn=function(T$y){function T$_(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,T$_.__super.call(this),this._style=T$l.EMPTY;}T$J(T$_,"laya.display.Sprite",T$y);var T$n=T$_.prototype;return T$T.imps(T$n,{"laya.display.ILayout":!0}),T$n.createConchModel=function(){return new ConchNode();},T$n.destroy=function(T$n){if(void 0===T$n&&(T$n=!0),this._releaseMem(),!this._destroyed){this.filters=null;var T$C=this.mask;T$C&&(this.mask=null,T$C.destroy(T$n));}T$y.prototype.destroy.call(this,T$n),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null;},T$n.updateZOrder=function(){T$z.updateOrder(this._childs)&&this.repaint();},T$n.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1;},T$n.setBounds=function(T$n){this._set$P("uBounds",T$n);},T$n.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new T$s()),T$s._getWrapRec(this._boundPointsToParent(),this._$P.mBounds);},T$n.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new T$s()),T$s._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds));},T$n._boundPointsToParent=function(T$n){void 0===T$n&&(T$n=!1);var T$C=0,T$_=0;this._style&&(T$C=this._style._tf.translateX,T$_=this._style._tf.translateY,T$n=T$n||0!==this._style._tf.rotate,this._style.scrollRect&&(T$C+=this._style.scrollRect.x,T$_+=this._style.scrollRect.y));var T$E=this._getBoundPointsM(T$n);if(!T$E||T$E.length<1)return T$E;if(8!=T$E.length&&(T$E=T$n?T$k.scanPList(T$E):T$s._getWrapRec(T$E,T$s.TEMP)._getBoundPoints()),!this.transform)return T$z.transPointList(T$E,this._x-T$C,this._y-T$_),T$E;var T$y=T$Y.TEMP,T$p=0,T$c=T$E.length;for(T$p=0;T$p<T$c;T$p+=2)T$y.x=T$E[T$p],T$y.y=T$E[T$p+1],this.toParentPoint(T$y),T$E[T$p]=T$y.x,T$E[T$p+1]=T$y.y;return T$E;},T$n.getGraphicBounds=function(T$n){return void 0===T$n&&(T$n=!1),this._graphics?this._graphics.getBounds(T$n):T$s.TEMP.setTo(0,0,0,0);},T$n._getBoundPointsM=function(T$n){if(void 0===T$n&&(T$n=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var T$C=T$z.clearArray(this._$P.temBM),T$_=T$s.TEMP;return T$_.copyFrom(this.scrollRect),T$z.concatArray(T$C,T$_._getBoundPoints()),T$C;}for(var T$E,T$y,T$p,T$c=this._graphics?this._graphics.getBoundPoints():T$z.clearArray(this._$P.temBM),T$l=0,T$W=(T$p=this._childs).length;T$l<T$W;T$l++)(T$E=T$p[T$l])instanceof laya.display.Sprite&&1==T$E.visible&&(T$y=T$E._boundPointsToParent(T$n))&&(T$c=T$c?T$z.concatArray(T$c,T$y):T$y);return T$c;},T$n.getStyle=function(){return this._style===T$l.EMPTY&&(this._style=new T$l()),this._style;},T$n.setStyle=function(T$n){this._style=T$n;},T$n._adjustTransform=function(){this._tfChanged=!1;var T$n,T$C=this._style._tf,T$_=T$C.scaleX,T$E=T$C.scaleY;if(T$C.rotate||1!==T$_||1!==T$E||T$C.skewX||T$C.skewY){(T$n=this._transform||(this._transform=T$B.create())).bTransform=!0;var T$y=.0174532922222222*(T$C.rotate-T$C.skewX),T$p=.0174532922222222*(T$C.rotate+T$C.skewY),T$c=Math.cos(T$p),T$l=Math.sin(T$p),T$W=Math.sin(T$y),T$q=Math.cos(T$y);return T$n.a=T$_*T$c,T$n.b=T$_*T$l,T$n.c=-T$E*T$W,T$n.d=T$E*T$q,T$n.tx=T$n.ty=0,T$n;}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,T$n;},T$n.pos=function(T$n,T$C,T$_){if(void 0===T$_&&(T$_=!1),this._x!==T$n||this._y!==T$C){if(this.destroyed)return this;if(T$_){this._x=T$n,this._y=T$C,this.conchModel&&this.conchModel.pos(this._x,this._y);var T$E=this._parent;T$E&&0===T$E._repaint&&(T$E._repaint=1,T$E.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint());}else this.x=T$n,this.y=T$C;}return this;},T$n.pivot=function(T$n,T$C){return this.pivotX=T$n,this.pivotY=T$C,this;},T$n.size=function(T$n,T$C){return this.width=T$n,this.height=T$C,this;},T$n.scale=function(T$n,T$C,T$_){void 0===T$_&&(T$_=!1);var T$E=this.getStyle(),T$y=T$E._tf;if(T$y.scaleX!=T$n||T$y.scaleY!=T$C){if(this.destroyed)return this;if(T$_){T$E.setScale(T$n,T$C),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(T$n,T$C),this._renderType|=4;var T$p=this._parent;T$p&&0===T$p._repaint&&(T$p._repaint=1,T$p.parentRepaint());}else this.scaleX=T$n,this.scaleY=T$C;}return this;},T$n.skew=function(T$n,T$C){return this.skewX=T$n,this.skewY=T$C,this;},T$n.render=function(T$n,T$C,T$_){T$h.spriteCount++,T$$.renders[this._renderType]._fun(this,T$n,T$C+this._x,T$_+this._y),this._repaint=0;},T$n.drawToCanvas=function(T$n,T$C,T$_,T$E){if(T$H.isConchNode){var T$y=T$On.create("2D");return new T$X(T$n,T$C,T$y).ctx.setCanvasType(1),this.conchModel.drawToCanvas(T$y.source,T$_,T$E),T$y;}return T$w.drawToCanvas(this,this._renderType,T$n,T$C,T$_,T$E);},T$n.customRender=function(T$n,T$C,T$_){this._renderType|=1024;},T$n._applyFilters=function(){var T$n;if(!T$H.isWebGL&&(T$n=this._$P.filters)&&!(T$n.length<1))for(var T$C=0,T$_=T$n.length;T$C<T$_;T$C++)T$n[T$C].action.apply(this._$P.cacheCanvas);},T$n._isHaveGlowFilter=function(){var T$n,T$C=0;if(this.filters)for(T$C=0;T$C<this.filters.length;T$C++)if(8==this.filters[T$C].type)return!0;for(T$C=0,T$n=this._childs.length;T$C<T$n;T$C++)if(this._childs[T$C]._isHaveGlowFilter())return!0;return!1;},T$n.localToGlobal=function(T$n,T$C){void 0===T$C&&(T$C=!1),!0===T$C&&(T$n=new T$Y(T$n.x,T$n.y));for(var T$_=this;T$_&&T$_!=T$T.stage;)T$n=T$_.toParentPoint(T$n),T$_=T$_.parent;return T$n;},T$n.globalToLocal=function(T$n,T$C){void 0===T$C&&(T$C=!1),T$C&&(T$n=new T$Y(T$n.x,T$n.y));for(var T$_=this,T$E=[];T$_&&T$_!=T$T.stage;)T$E.push(T$_),T$_=T$_.parent;for(var T$y=T$E.length-1;0<=T$y;)T$n=(T$_=T$E[T$y]).fromParentPoint(T$n),T$y--;return T$n;},T$n.toParentPoint=function(T$n){if(!T$n)return T$n;T$n.x-=this.pivotX,T$n.y-=this.pivotY,this.transform&&this._transform.transformPoint(T$n),T$n.x+=this._x,T$n.y+=this._y;var T$C=this._style.scrollRect;return T$C&&(T$n.x-=T$C.x,T$n.y-=T$C.y),T$n;},T$n.fromParentPoint=function(T$n){if(!T$n)return T$n;T$n.x-=this._x,T$n.y-=this._y;var T$C=this._style.scrollRect;return T$C&&(T$n.x+=T$C.x,T$n.y+=T$C.y),this.transform&&this._transform.invertTransformPoint(T$n),T$n.x+=this.pivotX,T$n.y+=this.pivotY,T$n;},T$n.on=function(T$n,T$C,T$_,T$E){return 1!==this._mouseEnableState&&this.isMouseEvent(T$n)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(T$n,T$C,T$_,T$E,!1)):T$y.prototype.on.call(this,T$n,T$C,T$_,T$E);},T$n.once=function(T$n,T$C,T$_,T$E){return 1!==this._mouseEnableState&&this.isMouseEvent(T$n)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(T$n,T$C,T$_,T$E,!0)):T$y.prototype.once.call(this,T$n,T$C,T$_,T$E);},T$n._$2__onDisplay=function(){if(1!==this._mouseEnableState){var T$n=this;for(T$n=T$n.parent;T$n&&1!==T$n._mouseEnableState&&!T$n._getBit(2);)T$n.mouseEnabled=!0,T$n._setBit(2,!0),T$n=T$n.parent;}},T$n.loadImage=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c=this;return void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0),void 0===T$E&&(T$E=0),void 0===T$y&&(T$y=0),this.graphics.loadImage(T$n,T$C,T$_,T$E,T$y,function(T$n){T$c.destroyed||(T$c.size(T$C+(T$E||T$n.width),T$_+(T$y||T$n.height)),T$c.repaint(),T$p&&T$p.runWith(T$n));}),this;},T$n.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint();},T$n._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache;},T$n._childChanged=function(T$n){this._childs.length?this._renderType|=2048:this._renderType&=-2049,T$n&&this._get$P("hasZorder")&&T$T.timer.callLater(this,this.updateZOrder),this.repaint();},T$n.parentRepaint=function(){var T$n=this._parent;T$n&&0===T$n._repaint&&(T$n._repaint=1,T$n.parentRepaint());},T$n.startDrag=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){void 0===T$C&&(T$C=!1),void 0===T$_&&(T$_=0),void 0===T$E&&(T$E=300),void 0===T$p&&(T$p=!1),void 0===T$c&&(T$c=.92),this._$P.dragging||this._set$P("dragging",new T$Q()),this._$P.dragging.start(this,T$n,T$C,T$_,T$E,T$y,T$p,T$c);},T$n.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop();},T$n._releaseMem=function(){if(this._$P){var T$n=this._$P.cacheCanvas;T$n&&T$n.ctx&&(T$L.recover("RenderContext",T$n.ctx),T$n.ctx.canvas.size(0,0),T$n.ctx=null);var T$C=this._$P._filterCache;T$C&&(T$C.destroy(),T$C.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null;}},T$n._setDisplay=function(T$n){T$n||this._releaseMem(),T$y.prototype._setDisplay.call(this,T$n);},T$n.hitTestPoint=function(T$n,T$C){var T$_=this.globalToLocal(T$Y.TEMP.setTo(T$n,T$C));return T$n=T$_.x,T$C=T$_.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?T$s.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(T$n,T$C);},T$n.getMousePoint=function(){return this.globalToLocal(T$Y.TEMP.setTo(T$T.stage.mouseX,T$T.stage.mouseY));},T$n._getWords=function(){return null;},T$n._addChildsToLayout=function(T$n){var T$C=this._getWords();if(null==T$C&&0==this._childs.length)return!1;if(T$C)for(var T$_=0,T$E=T$C.length;T$_<T$E;T$_++)T$n.push(T$C[T$_]);T$_=0;for(var T$y=this._childs.length;T$_<T$y;++T$_){var T$p=this._childs[T$_];T$p._style._enableLayout()&&T$p._addToLayout(T$n);}return!0;},T$n._addToLayout=function(T$n){this._style.absolute||(this._style.block?T$n.push(this):this._addChildsToLayout(T$n)&&(this.x=this.y=0));},T$n._isChar=function(){return!1;},T$n._getCSSStyle=function(){return this._style.getCSSStyle();},T$n._setAttributes=function(T$n,T$C){switch(T$n){case"x":this.x=parseFloat(T$C);break;case"y":this.y=parseFloat(T$C);break;case"width":this.width=parseFloat(T$C);break;case"height":this.height=parseFloat(T$C);break;default:this[T$n]=T$C;}},T$n._layoutLater=function(){this.parent&&this.parent._layoutLater();},T$b(0,T$n,"optimizeScrollRect",function(){return this._optimizeScrollRect;},function(T$n){this._optimizeScrollRect!=T$n&&(this._optimizeScrollRect=T$n,this.conchModel&&this.conchModel.optimizeScrollRect(T$n));}),T$b(0,T$n,"customRenderEnable",null,function(T$n){if(T$n&&(this._renderType|=1024,T$H.isConchNode)){T$_.CustomList.push(this);var T$C=new T$On("2d");T$C._setContext(new CanvasRenderingContext2D()),this.customContext=new T$X(0,0,T$C),T$C.context.setCanvasType&&T$C.context.setCanvasType(2),this.conchModel.custom(T$C.context);}}),T$b(0,T$n,"cacheAsBitmap",function(){return"none"!==this.cacheAs;},function(T$n){this.cacheAs=T$n?this._$P.hasFilter?"none":"normal":"none";}),T$b(0,T$n,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type;},function(T$n){var T$C=this._$P.cacheCanvas;if(T$n!==(T$C?T$C.type:"none")){if("none"!==T$n)this._getBit(1)||this._setUpNoticeType(1),T$C||(T$C=this._set$P("cacheCanvas",T$L.getItemByClass("cacheCanvas",Object))),T$C.type=T$n,T$C.reCache=!0,this._renderType|=16,"bitmap"==T$n&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(T$C){var T$_=T$C;T$_&&T$_.ctx&&(T$L.recover("RenderContext",T$_.ctx),T$_.ctx.canvas.size(0,0),T$_.ctx=null),T$L.recover("cacheCanvas",T$C);}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0);}this.repaint();}}),T$b(0,T$n,"zOrder",function(){return this._zOrder;},function(T$n){this._zOrder!=T$n&&(this._zOrder=T$n,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(T$n),this._parent&&(T$n&&this._parent._set$P("hasZorder",!0),T$T.timer.callLater(this._parent,this.updateZOrder)));}),T$b(0,T$n,"rotation",function(){return this._style._tf.rotate;},function(T$n){var T$C=this.getStyle();if(T$C._tf.rotate!==T$n){T$C.setRotate(T$n),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(T$n),this._renderType|=4;var T$_=this._parent;T$_&&0===T$_._repaint&&(T$_._repaint=1,T$_.parentRepaint());}}),T$b(0,T$n,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width;},function(T$n){this._width!==T$n&&(this._width=T$n,this.conchModel&&this.conchModel.size(T$n,this._height),this.repaint());}),T$b(0,T$n,"x",function(){return this._x;},function(T$n){if(this._x!==T$n){if(this.destroyed)return;this._x=T$n,this.conchModel&&this.conchModel.pos(T$n,this._y);var T$C=this._parent;T$C&&0===T$C._repaint&&(T$C._repaint=1,T$C.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint());}}),T$b(0,T$n,"globalScaleY",function(){for(var T$n=1,T$C=this;T$C&&T$C!==T$T.stage;)T$n*=T$C.scaleY,T$C=T$C.parent;return T$n;}),T$b(0,T$n,"hitArea",function(){return this._$P.hitArea;},function(T$n){this._set$P("hitArea",T$n);}),T$b(0,T$n,"staticCache",function(){return this._$P.staticCache;},function(T$n){this._set$P("staticCache",T$n),T$n||this.reCache();}),T$b(0,T$n,"texture",function(){return this._texture;},function(T$n){this._texture!=T$n&&(this._texture=T$n,this.graphics.cleanByTexture(T$n,0,0));}),T$b(0,T$n,"y",function(){return this._y;},function(T$n){if(this._y!==T$n){if(this.destroyed)return;this._y=T$n,this.conchModel&&this.conchModel.pos(this._x,T$n);var T$C=this._parent;T$C&&0===T$C._repaint&&(T$C._repaint=1,T$C.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint());}}),T$b(0,T$n,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height;},function(T$n){this._height!==T$n&&(this._height=T$n,this.conchModel&&this.conchModel.size(this._width,T$n),this.repaint());}),T$b(0,T$n,"blendMode",function(){return this._style.blendMode;},function(T$n){this.getStyle().blendMode=T$n,this.conchModel&&this.conchModel.blendMode(T$n),T$n&&"source-over"!=T$n?this._renderType|=8:this._renderType&=-9,this.parentRepaint();}),T$b(0,T$n,"scaleX",function(){return this._style._tf.scaleX;},function(T$n){var T$C=this.getStyle();if(T$C._tf.scaleX!==T$n){T$C.setScaleX(T$n),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(T$n,T$C._tf.scaleY),this._renderType|=4;var T$_=this._parent;T$_&&0===T$_._repaint&&(T$_._repaint=1,T$_.parentRepaint());}}),T$b(0,T$n,"scaleY",function(){return this._style._tf.scaleY;},function(T$n){var T$C=this.getStyle();if(T$C._tf.scaleY!==T$n){T$C.setScaleY(T$n),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(T$C._tf.scaleX,T$n),this._renderType|=4;var T$_=this._parent;T$_&&0===T$_._repaint&&(T$_._repaint=1,T$_.parentRepaint());}}),T$b(0,T$n,"stage",function(){return T$T.stage;}),T$b(0,T$n,"skewX",function(){return this._style._tf.skewX;},function(T$n){var T$C=this.getStyle();if(T$C._tf.skewX!==T$n){T$C.setSkewX(T$n),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(T$n,T$C._tf.skewY),this._renderType|=4;var T$_=this._parent;T$_&&0===T$_._repaint&&(T$_._repaint=1,T$_.parentRepaint());}}),T$b(0,T$n,"scrollRect",function(){return this._style.scrollRect;},function(T$n){this.getStyle().scrollRect=T$n,this.repaint(),T$n?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(T$n.x,T$n.y,T$n.width,T$n.height)):(this._renderType&=-129,this.conchModel&&(T$_.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)));}),T$b(0,T$n,"skewY",function(){return this._style._tf.skewY;},function(T$n){var T$C=this.getStyle();if(T$C._tf.skewY!==T$n){T$C.setSkewY(T$n),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(T$C._tf.skewX,T$n),this._renderType|=4;var T$_=this._parent;T$_&&0===T$_._repaint&&(T$_._repaint=1,T$_.parentRepaint());}}),T$b(0,T$n,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform;},function(T$n){this._tfChanged=!1,(this._transform=T$n)&&(this._x=T$n.tx,this._y=T$n.ty,T$n.tx=T$n.ty=0,this.conchModel&&this.conchModel.transform(T$n.a,T$n.b,T$n.c,T$n.d,this._x,this._y)),T$n?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint();}),T$b(0,T$n,"pivotX",function(){return this._style._tf.translateX;},function(T$n){this.getStyle().setTranslateX(T$n),this.conchModel&&this.conchModel.pivot(T$n,this._style._tf.translateY),this.repaint();}),T$b(0,T$n,"pivotY",function(){return this._style._tf.translateY;},function(T$n){this.getStyle().setTranslateY(T$n),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,T$n),this.repaint();}),T$b(0,T$n,"alpha",function(){return this._style.alpha;},function(T$n){this._style&&this._style.alpha!==T$n&&(T$n=T$n<0?0:1<T$n?1:T$n,this.getStyle().alpha=T$n,this.conchModel&&this.conchModel.alpha(T$n),1!==T$n?this._renderType|=2:this._renderType&=-3,this.parentRepaint());}),T$b(0,T$n,"visible",function(){return this._style.visible;},function(T$n){this._style&&this._style.visible!==T$n&&(this.getStyle().visible=T$n,this.conchModel&&this.conchModel.visible(T$n),this.parentRepaint());}),T$b(0,T$n,"graphics",function(){return this._graphics||(this.graphics=T$w.createGraphics());},function(T$n){this._graphics&&(this._graphics._sp=null),(this._graphics=T$n)?(this._renderType&=-2,this._renderType|=512,(T$n._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(T$_.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint();}),T$b(0,T$n,"filters",function(){return this._$P.filters;},function(T$n){T$n&&0===T$n.length&&(T$n=null),this._$P.filters!=T$n&&(this._set$P("filters",T$n?T$n.slice():null),T$H.isConchApp&&(this.conchModel&&(T$_.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),T$H.isWebGL&&(T$n&&T$n.length?this._renderType|=32:this._renderType&=-33),T$n&&0<T$n.length?(this._getBit(1)||this._setUpNoticeType(1),T$H.isWebGL&&1==T$n.length&&T$n[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(T$H.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint());}),T$b(0,T$n,"parent",T$y.prototype._$get_parent,function(T$n){T$T.superSet(T$nn,this,"parent",T$n),T$n&&this._getBit(2)&&this._$2__onDisplay();}),T$b(0,T$n,"mask",function(){return this._$P._mask;},function(T$n){T$n&&this.mask&&this.mask._$P.maskParent||(T$n?(this.cacheAs="bitmap",this._set$P("_mask",T$n),T$n._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",T$n),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(T$n?T$n.conchModel:null),this._renderType|=64,this.parentRepaint());}),T$b(0,T$n,"mouseEnabled",function(){return 1<this._mouseEnableState;},function(T$n){this._mouseEnableState=T$n?2:1;}),T$b(0,T$n,"globalScaleX",function(){for(var T$n=1,T$C=this;T$C&&T$C!==T$T.stage;)T$n*=T$C.scaleX,T$C=T$C.parent;return T$n;}),T$b(0,T$n,"mouseX",function(){return this.getMousePoint().x;}),T$b(0,T$n,"mouseY",function(){return this.getMousePoint().y;}),T$_.fromImage=function(T$n){return new T$_().loadImage(T$n);},T$_._cachePool=[],T$_.CustomList=[],T$W(T$_,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=T$c.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):"";}]),T$_;}(T$nn),T$Pn=function(T$n){function T$C(T$n){this._audio=null,this._onEnd=null,this._resumePlay=null,T$C.__super.call(this),this._onEnd=T$z.bind(this.__onEnd,this),this._resumePlay=T$z.bind(this.__resumePlay,this),T$n.addEventListener("ended",this._onEnd),this._audio=T$n;}T$J(T$C,"laya.media.h5audio.AudioSoundChannel",T$En);var T$_=T$C.prototype;return T$_.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(T$T.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0);},T$_.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,T$e.container.appendChild(this._audio),this._audio.play();}catch(T$n){this.event("error");}},T$_.play=function(T$n){this.isStopped=!1;try{this._audio.playbackRate=T$M.playbackRate,this._audio.currentTime=this.startTime;}catch(T$n){return void this._audio.addEventListener("canplay",this._resumePlay);}T$M.addChannel(this),T$e.container.appendChild(this._audio),!T$n&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play();},T$_.stop=function(){this.isStopped=!0,T$M.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&T$H.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),T$e.onIE||this._audio!=T$_n._musicAudio&&T$L.recover("audio:"+this.url,this._audio),T$e.removeElement(this._audio),this._audio=null);},T$_.pause=function(){this.isStopped=!0,T$M.removeChannel(this),"pause"in this._audio&&this._audio.pause();},T$_.resume=function(){this._audio&&(this.isStopped=!1,T$M.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play());},T$b(0,T$_,"position",function(){return this._audio?this._audio.currentTime:0;}),T$b(0,T$_,"duration",function(){return this._audio?this._audio.duration:0;}),T$b(0,T$_,"volume",function(){return this._audio?this._audio.volume:1;},function(T$n){this._audio&&(this._audio.volume=T$n);}),T$C;}(),T$xn=function(T$n){function T$C(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=T$pn.ctx,T$C.__super.call(this),this._onPlayEnd=T$z.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode();}T$J(T$C,"laya.media.webaudio.WebAudioSoundChannel",T$En);var T$_=T$C.prototype;return T$_.play=function(T$n){if(T$M.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var T$C=this.context,T$_=this.gain,T$E=T$C.createBufferSource();(this.bufferSource=T$E).buffer=this.audioBuffer,T$E.connect(T$_),T$_&&T$_.disconnect(),T$_.connect(T$C.destination),T$E.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=T$e.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(T$E.loop=!0),T$E.playbackRate.setTargetAtTime?T$E.playbackRate.setTargetAtTime(T$M.playbackRate,this.context.currentTime,.1):T$E.playbackRate.value=T$M.playbackRate,T$E.start(0,this.startTime),!T$n&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0;}},T$_.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(T$T.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0);},T$_._clearBufferSource=function(){if(this.bufferSource){var T$n=this.bufferSource;T$n.stop?T$n.stop(0):T$n.noteOff(0),T$n.disconnect(0),T$n.onended=null,T$C._tryCleanFailed||this._tryClearBuffer(T$n),this.bufferSource=null;}},T$_._tryClearBuffer=function(T$n){try{T$n.buffer=null;}catch(T$n){T$C._tryCleanFailed=!0;}},T$_.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,T$M.removeChannel(this),this.startHandler=null,this.completeHandler=null;},T$_.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,T$M.removeChannel(this);},T$_.resume=function(){this.startTime=this._pauseTime,this.play(!1);},T$b(0,T$_,"position",function(){return this.bufferSource?(T$e.now()-this._startTime)/1e3+this.startTime:0;}),T$b(0,T$_,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0;}),T$b(0,T$_,"volume",function(){return this._volume;},function(T$n){this.isStopped||(this._volume=T$n,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(T$n,this.context.currentTime,.1):this.gain.gain.value=T$n);}),T$C._tryCleanFailed=!1,T$C;}(),T$bn=function(T$n){function T$C(){T$C.__super.call(this),this._w=0,this._h=0;}T$J(T$C,"laya.resource.Bitmap",T$qn);var T$_=T$C.prototype;return T$b(0,T$_,"width",function(){return this._w;}),T$b(0,T$_,"height",function(){return this._h;}),T$b(0,T$_,"source",function(){return this._source;}),T$C;}(),T$rn=function(T$C){function T$n(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,T$n.__super.call(this),this._interval=T$E.animationInterval,this._setUpNoticeType(1);}T$J(T$n,"laya.display.AnimationPlayerBase",T$C);var T$_=T$n.prototype;return T$_.play=function(T$n,T$C,T$_,T$E){void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=!0),void 0===T$_&&(T$_=""),void 0===T$E&&(T$E=!0),this._isPlaying=!0,this.index="string"==typeof T$n?this._getFrameByLabel(T$n):T$n,this.loop=T$C,this._actionName=T$_,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0);},T$_._getFrameByLabel=function(T$n){var T$C=0;for(T$C=0;T$C<this._count;T$C++)if(this._labels[T$C]&&0<=this._labels[T$C].indexOf(T$n))return T$C;return 0;},T$_._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete");}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete");}this.index=this._index;},T$_._setControlNode=function(T$n){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=T$n)&&T$n!=this&&(T$n.on("display",this,this._checkResumePlaying),T$n.on("undisplay",this,this._checkResumePlaying));},T$_._setDisplay=function(T$n){T$C.prototype._setDisplay.call(this,T$n),this._checkResumePlaying();},T$_._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop));},T$_.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop);},T$_.addLabel=function(T$n,T$C){this._labels||(this._labels={}),this._labels[T$C]||(this._labels[T$C]=[]),this._labels[T$C].push(T$n);},T$_.removeLabel=function(T$n){if(T$n){if(this._labels)for(var T$C in this._labels)this._removeLabelFromLabelList(this._labels[T$C],T$n);}else this._labels=null;},T$_._removeLabelFromLabelList=function(T$n,T$C){if(T$n)for(var T$_=T$n.length-1;0<=T$_;T$_--)T$n[T$_]==T$C&&T$n.splice(T$_,1);},T$_.gotoAndStop=function(T$n){this.index="string"==typeof T$n?this._getFrameByLabel(T$n):T$n,this.stop();},T$_._displayToIndex=function(T$n){},T$_.clear=function(){this.stop(),this._labels=null;},T$b(0,T$_,"interval",function(){return this._interval;},function(T$n){this._interval!=T$n&&(this._frameRateChanged=!0,this._interval=T$n,this._isPlaying&&0<T$n&&this.timerLoop(T$n,this,this._frameLoop,null,!0,!0));}),T$b(0,T$_,"isPlaying",function(){return this._isPlaying;}),T$b(0,T$_,"index",function(){return this._index;},function(T$n){if(this._index=T$n,this._displayToIndex(T$n),this._labels&&this._labels[T$n])for(var T$C=this._labels[T$n],T$_=0,T$E=T$C.length;T$_<T$E;T$_++)this.event("label",T$C[T$_]);}),T$b(0,T$_,"count",function(){return this._count;}),T$n.WRAP_POSITIVE=0,T$n.WRAP_REVERSE=1,T$n.WRAP_PINGPONG=2,T$n;}(T$jn),T$mn=function(T$C){function T$x(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,T$x.__super.call(this),this.overflow=T$x.VISIBLE,this._style=new T$Cn(this),this._style.wordWrap=!1;}T$J(T$x,"laya.display.Text",T$C);var T$n=T$x.prototype;return T$n.destroy=function(T$n){void 0===T$n&&(T$n=!0),T$C.prototype.destroy.call(this,T$n),this._lines=null,this._words&&(this._words.length=0,this._words=null);},T$n._getBoundPointsM=function(T$n){void 0===T$n&&(T$n=!1);var T$C=T$s.TEMP;return T$C.setTo(0,0,this.width,this.height),T$C._getBoundPoints();},T$n.getGraphicBounds=function(T$n){void 0===T$n&&(T$n=!1);var T$C=T$s.TEMP;return T$C.setTo(0,0,this.width,this.height),T$C;},T$n._getCSSStyle=function(){return this._style;},T$n.lang=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q,T$J){if(T$n=T$x.langPacks&&T$x.langPacks[T$n]?T$x.langPacks[T$n]:T$n,arguments.length<2)this._text=T$n;else{for(var T$j=0,T$P=arguments.length;T$j<T$P;T$j++)T$n=T$n.replace("{"+T$j+"}",arguments[T$j+1]);this._text=T$n;}},T$n._isPassWordMode=function(){var T$n=this._style.password;return"prompt"in this&&this.prompt==this._text&&(T$n=!1),T$n;},T$n._getPassWordTxt=function(T$n){var T$C;T$C="";for(var T$_=T$n.length;0<T$_;T$_--)T$C+="●";return T$C;},T$n.renderText=function(T$n,T$C){var T$_=this.graphics;T$_.clear(!0);var T$E=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(T$e.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);T$e.context.font=T$E;var T$y=this.padding,T$p=T$y[3],T$c="left",T$l=this._lines,T$W=this.leading+this._charSize.height,T$q=this._currBitmapFont;T$q&&(T$W=this.leading+T$q.getMaxHeight());var T$J=T$y[0];if(!T$q&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(T$c="right",T$p=this._width-T$y[1]):"center"==this.align&&(T$c="center",T$p=.5*this._width+T$y[3]-T$y[1])),0<this._height){var T$j=this._textHeight>this._height?"top":this.valign;"middle"===T$j?T$J=.5*(this._height-T$C*T$W)+T$y[0]-T$y[2]:"bottom"===T$j&&(T$J=this._height-T$C*T$W-T$y[2]);}var T$P=this._style;if(T$q&&T$q.autoScaleSize)var T$x=T$q.fontSize/this.fontSize;if(this._clipPoint)if(T$_.save(),T$q&&T$q.autoScaleSize){var T$b=0,T$r=0;T$b=this._width?this._width-T$y[3]-T$y[1]:this._textWidth,T$r=this._height?this._height-T$y[0]-T$y[2]:this._textHeight,T$b*=T$x,T$r*=T$x,T$_.clipRect(T$y[3],T$y[0],T$b,T$r);}else T$_.clipRect(T$y[3],T$y[0],this._width?this._width-T$y[3]-T$y[1]:this._textWidth,this._height?this._height-T$y[0]-T$y[2]:this._textHeight);var T$m=T$P.password;"prompt"in this&&this.prompt==this._text&&(T$m=!1);for(var T$d=0,T$a=0,T$O=Math.min(this._lines.length,T$C+T$n)||1,T$A=T$n;T$A<T$O;T$A++){var T$k,T$t=T$l[T$A];if(T$m){var T$T=T$t.length;T$t="";for(var T$Y=T$T;0<T$Y;T$Y--)T$t+="●";}if(T$d=T$p-(this._clipPoint?this._clipPoint.x:0),T$a=T$J+T$W*T$A-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(T$c,T$d,T$a,T$A),T$q){var T$s=this.width;T$q.autoScaleSize&&(T$s=this.width*T$x),T$q.drawText(T$t,this,T$d,T$a,this.align,T$s);}else T$H.isWebGL?(this._words||(this._words=[]),(T$k=this._words.length>T$A-T$n?this._words[T$A-T$n]:new T$D()).setText(T$t)):T$k=T$t,T$P.stroke?T$_.fillBorderText(T$k,T$d,T$a,T$E,this.color,T$P.strokeColor,T$P.stroke,T$c):T$_.fillText(T$k,T$d,T$a,T$E,this.color,T$c);}if(T$q&&T$q.autoScaleSize){var T$N=1/T$x;this.scale(T$N,T$N);}this._clipPoint&&T$_.restore(),this._startX=T$p,this._startY=T$J;},T$n.drawUnderline=function(T$n,T$C,T$_,T$E){var T$y=this._lineWidths[T$E];switch(T$n){case"center":T$C-=T$y/2;break;case"right":T$C-=T$y;}T$_+=this._charSize.height,this._graphics.drawLine(T$C,T$_,T$C+T$y,T$_,this.underlineColor||this.color,1);},T$n.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);T$e.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new T$Y(0,0)):this._clipPoint=null;var T$n=this._lines.length;if(this.overflow!=T$x.VISIBLE){var T$C=this.overflow==T$x.HIDDEN?Math.floor:Math.ceil;T$n=Math.min(T$n,T$C((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)));}var T$_=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(T$_,T$n),this.repaint();},T$n.evalTextSize=function(){var T$n,T$C=NaN;T$n=Math.max.apply(this,this._lineWidths),T$C=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],T$n==this._textWidth&&T$C==this._textHeight||(this._textWidth=T$n,this._textHeight=T$C,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight));},T$n.checkEnabledViewportOrNot=function(){return this.overflow==T$x.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height);},T$n.changeText=function(T$n){this._text!==T$n&&(this.lang(T$n+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset());},T$n.parseLines=function(T$n){var T$C=this.wordWrap||this.overflow==T$x.HIDDEN;if(T$C)var T$_=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var T$E=T$z.contextMeasureText(T$x._testWord);T$H.isConchApp&&0===T$E.width&&0===T$E.height&&(T$E=T$z.contextMeasureText("W")),this._charSize.width=T$E.width,this._charSize.height=T$E.height||this.fontSize;}for(var T$y=T$n.replace(/\r\n/g,"\n").split("\n"),T$p=0,T$c=T$y.length;T$p<T$c;T$p++){var T$l=T$y[T$p];T$C?this.parseLine(T$l,T$_):(this._lineWidths.push(this.getTextWidth(T$l)),this._lines.push(T$l));}},T$n.parseLine=function(T$n,T$C){T$e.context;var T$_,T$E=this._lines,T$y=0,T$p=NaN,T$c=NaN,T$l=0;if((T$p=this.getTextWidth(T$n))<=T$C)return T$E.push(T$n),void this._lineWidths.push(T$p);T$p=this._charSize.width,0==(T$y=Math.floor(T$C/T$p))&&(T$y=1),T$c=T$p=this.getTextWidth(T$n.substring(0,T$y));for(var T$W=T$y,T$q=T$n.length;T$W<T$q;T$W++)if(T$C<(T$c+=T$p=this.getTextWidth(T$n.charAt(T$W))))if(this.wordWrap){var T$J=T$n.substring(T$l,T$W);if(T$J.charCodeAt(T$J.length-1)<255?(T$_=/(?:\w|-)+$/.exec(T$J))&&(T$W=T$_.index+T$l,0==T$_.index?T$W+=T$J.length:T$J=T$n.substring(T$l,T$W)):T$x.RightToLeft&&(T$_=/([\u0600-\u06FF])+$/.exec(T$J))&&(T$W=T$_.index+T$l,0==T$_.index?T$W+=T$J.length:T$J=T$n.substring(T$l,T$W)),T$E.push(T$J),this._lineWidths.push(T$c-T$p),!((T$l=T$W)+T$y<T$q)){T$E.push(T$n.substring(T$l,T$q)),this._lineWidths.push(this.getTextWidth(T$E[T$E.length-1])),T$l=-1;break;}T$W+=T$y,T$c=T$p=this.getTextWidth(T$n.substring(T$l,T$W)),T$W--;}else if(this.overflow==T$x.HIDDEN)return T$E.push(T$n.substring(0,T$W)),void this._lineWidths.push(this.getTextWidth(T$E[T$E.length-1]));this.wordWrap&&-1!=T$l&&(T$E.push(T$n.substring(T$l,T$q)),this._lineWidths.push(this.getTextWidth(T$E[T$E.length-1])));},T$n.getTextWidth=function(T$n){return this._currBitmapFont?this._currBitmapFont.getTextWidth(T$n):T$z.contextMeasureText(T$n).width;},T$n.getWordWrapWidth=function(){var T$n=this.padding,T$C=NaN;return(T$C=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(T$C=this.wordWrap?100:T$e.width),T$C<=0&&(T$C=100),T$C-T$n[3]-T$n[1];},T$n.getCharPoint=function(T$n,T$C){this._isChanged&&T$T.timer.runCallLater(this,this.typeset);for(var T$_=0,T$E=this._lines,T$y=0,T$p=0,T$c=T$E.length;T$p<T$c;T$p++){if(T$n<(T$_+=T$E[T$p].length)){var T$l=T$p;break;}T$y=T$_;}var T$W=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;T$e.context.font=T$W;var T$q=this.getTextWidth(this._text.substring(T$y,T$n));return(T$C||new T$Y()).setTo(this._startX+T$q-(this._clipPoint?this._clipPoint.x:0),this._startY+T$l*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0));},T$b(0,T$n,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3];},function(T$n){T$n!=this._width&&(T$T.superSet(T$jn,this,"width",T$n),this.isChanged=!0);}),T$b(0,T$n,"textWidth",function(){return this._isChanged&&T$T.timer.runCallLater(this,this.typeset),this._textWidth;}),T$b(0,T$n,"height",function(){return this._height?this._height:this.textHeight;},function(T$n){T$n!=this._height&&(T$T.superSet(T$jn,this,"height",T$n),this.isChanged=!0);}),T$b(0,T$n,"textHeight",function(){return this._isChanged&&T$T.timer.runCallLater(this,this.typeset),this._textHeight;}),T$b(0,T$n,"padding",function(){return this._getCSSStyle().padding;},function(T$n){this._getCSSStyle().padding=T$n,this.isChanged=!0;}),T$b(0,T$n,"bold",function(){return this._getCSSStyle().bold;},function(T$n){this._getCSSStyle().bold=T$n,this.isChanged=!0;}),T$b(0,T$n,"text",function(){return this._text||"";},function(T$n){this._text!==T$n&&(this.lang(T$n+""),this.isChanged=!0,this.event("change"));}),T$b(0,T$n,"color",function(){return this._getCSSStyle().color;},function(T$n){this._getCSSStyle().color!=T$n&&(this._getCSSStyle().color=T$n,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0);}),T$b(0,T$n,"font",function(){return this._getCSSStyle().fontFamily;},function(T$n){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),T$x._bitmapFonts&&T$x._bitmapFonts[T$n]&&(this._currBitmapFont=T$x._bitmapFonts[T$n]),this._getCSSStyle().fontFamily=T$n,this.isChanged=!0;}),T$b(0,T$n,"fontSize",function(){return this._getCSSStyle().fontSize;},function(T$n){this._getCSSStyle().fontSize=T$n,this.isChanged=!0;}),T$b(0,T$n,"italic",function(){return this._getCSSStyle().italic;},function(T$n){this._getCSSStyle().italic=T$n,this.isChanged=!0;}),T$b(0,T$n,"align",function(){return this._getCSSStyle().align;},function(T$n){this._getCSSStyle().align=T$n,this.isChanged=!0;}),T$b(0,T$n,"valign",function(){return this._getCSSStyle().valign;},function(T$n){this._getCSSStyle().valign=T$n,this.isChanged=!0;}),T$b(0,T$n,"wordWrap",function(){return this._getCSSStyle().wordWrap;},function(T$n){this._getCSSStyle().wordWrap=T$n,this.isChanged=!0;}),T$b(0,T$n,"leading",function(){return this._getCSSStyle().leading;},function(T$n){this._getCSSStyle().leading=T$n,this.isChanged=!0;}),T$b(0,T$n,"bgColor",function(){return this._getCSSStyle().backgroundColor;},function(T$n){this._getCSSStyle().backgroundColor=T$n,this.isChanged=!0;}),T$b(0,T$n,"borderColor",function(){return this._getCSSStyle().borderColor;},function(T$n){this._getCSSStyle().borderColor=T$n,this.isChanged=!0;}),T$b(0,T$n,"stroke",function(){return this._getCSSStyle().stroke;},function(T$n){this._getCSSStyle().stroke=T$n,this.isChanged=!0;}),T$b(0,T$n,"strokeColor",function(){return this._getCSSStyle().strokeColor;},function(T$n){this._getCSSStyle().strokeColor=T$n,this.isChanged=!0;}),T$b(0,T$n,"isChanged",null,function(T$n){this._isChanged!==T$n&&(this._isChanged=T$n)&&T$T.timer.callLater(this,this.typeset);}),T$b(0,T$n,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0;},function(T$n){if(!(this.overflow!=T$x.SCROLL||this.textWidth<this._width)&&this._clipPoint){T$n=T$n<this.padding[3]?this.padding[3]:T$n;var T$C=this._textWidth-this._width;T$n=T$C<T$n?T$C:T$n;var T$_=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=T$n,this.renderText(this._lastVisibleLineIndex,T$_);}}),T$b(0,T$n,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0;},function(T$n){if(!(this.overflow!=T$x.SCROLL||this.textHeight<this._height)&&this._clipPoint){T$n=T$n<this.padding[0]?this.padding[0]:T$n;var T$C=this._textHeight-this._height,T$_=(T$n=T$C<T$n?T$C:T$n)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=T$_;var T$E=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=T$n,this.renderText(T$_,T$E);}}),T$b(0,T$n,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width;}),T$b(0,T$n,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height;}),T$b(0,T$n,"lines",function(){return this._isChanged&&this.typeset(),this._lines;}),T$b(0,T$n,"underlineColor",function(){return this._underlineColor;},function(T$n){this._underlineColor=T$n,this._isChanged=!0,this.typeset();}),T$x.registerBitmapFont=function(T$n,T$C){T$x._bitmapFonts||(T$x._bitmapFonts={}),T$x._bitmapFonts[T$n]=T$C;},T$x.unregisterBitmapFont=function(T$n,T$C){if(void 0===T$C&&(T$C=!0),T$x._bitmapFonts&&T$x._bitmapFonts[T$n]){var T$_=T$x._bitmapFonts[T$n];T$C&&T$_.destroy(),delete T$x._bitmapFonts[T$n];}},T$x.setTextRightToLeft=function(){var T$n;(T$n=T$e.canvas.source.style).display="none",T$n.position="absolute",T$n.direction="rtl",T$H._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,T$e.document.body.appendChild(T$e.canvas.source);},T$x.supportFont=function(T$n){T$e.context.font="10px sans-serif";var T$C=T$z.contextMeasureText("abcji").width;T$e.context.font="10px "+T$n;var T$_=T$z.contextMeasureText("abcji").width;return console.log(T$C,T$_),T$C!==T$_;},T$x._testWord="游",T$x.langPacks=null,T$x.VISIBLE="visible",T$x.SCROLL="scroll",T$x.HIDDEN="hidden",T$x.CharacterCache=!0,T$x.RightToLeft=!1,T$x._bitmapFonts=null,T$W(T$x,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"};}]),T$x;}(T$jn),T$dn=function(T$j){function T$c(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",T$c.__super.call(this),this.offset=new T$Y(),this._canvasTransform=new T$B(),this._previousOrientation=T$e.window.orientation;var T$C=this;this.transform=T$B.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var T$n=T$e.window,T$_=this;T$n.addEventListener("focus",function(){T$C._isFocused=!0,T$_.event("focus"),T$_.event("focuschange");}),T$n.addEventListener("blur",function(){T$C._isFocused=!1,T$_.event("blur"),T$_.event("focuschange"),T$_._isInputting()&&(T$kn.inputElement.target.focus=!1);});var T$E="visibilityState",T$y="visibilitychange",T$p=T$n.document;void 0!==T$p.hidden?(T$y="visibilitychange",T$E="visibilityState"):void 0!==T$p.mozHidden?(T$y="mozvisibilitychange",T$E="mozVisibilityState"):void 0!==T$p.msHidden?(T$y="msvisibilitychange",T$E="msVisibilityState"):void 0!==T$p.webkitHidden&&(T$y="webkitvisibilitychange",T$E="webkitVisibilityState"),T$n.document.addEventListener(T$y,function(){"hidden"==T$e.document[T$E]?T$_._setStageVisible(!1):T$_._setStageVisible(!0);}),T$n.document.addEventListener("qbrowserVisibilityChange",function(T$n){T$_._setStageVisible(!T$n.hidden);}),T$n.addEventListener("resize",function(){var T$n=T$e.window.orientation;null!=T$n&&T$n!=T$C._previousOrientation&&T$_._isInputting()&&(T$kn.inputElement.target.focus=!1),T$C._previousOrientation=T$n,T$_._isInputting()||T$_._resetCanvas();}),T$n.addEventListener("orientationchange",function(T$n){T$_._resetCanvas();}),this.on("mousemove",this,this._onmouseMove),T$e.onMobile&&this.on("mousedown",this,this._onmouseMove);}T$J(T$c,"laya.display.Stage",T$j);var T$n=T$c.prototype;return T$n._setStageVisible=function(T$n){this._isVisibility!=T$n&&(this._isVisibility=T$n,this._isVisibility||this._isInputting()&&(T$kn.inputElement.target.focus=!1),this.event("visibilitychange"));},T$n._isInputting=function(){return T$e.onMobile&&T$kn.isInputting;},T$n._changeCanvasSize=function(){this.setScreenSize(T$e.clientWidth*T$e.pixelRatio,T$e.clientHeight*T$e.pixelRatio);},T$n._resetCanvas=function(){if(this.screenAdaptationEnabled){var T$n=T$H._mainCanvas;T$n.source.style;T$n.size(1,1),T$T.timer.once(100,this,this._changeCanvasSize);}},T$n.setScreenSize=function(T$n,T$C){var T$_=!1;if("none"!==this._screenMode&&(T$_=(T$n/T$C<1?"vertical":"horizontal")!==this._screenMode)){var T$E=T$C;T$C=T$n,T$n=T$E;}this.canvasRotation=T$_;var T$y=T$H._mainCanvas,T$p=T$y.source.style,T$c=this._canvasTransform.identity(),T$l=this._scaleMode,T$W=T$n/this.designWidth,T$q=T$C/this.designHeight,T$J=this.designWidth,T$j=this.designHeight,T$P=T$n,T$x=T$C,T$b=T$e.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,T$l){case"noscale":T$W=T$q=1,T$P=this.designWidth,T$x=this.designHeight;break;case"showall":T$W=T$q=Math.min(T$W,T$q),T$J=T$P=Math.round(this.designWidth*T$W),T$j=T$x=Math.round(this.designHeight*T$q);break;case"noborder":T$W=T$q=Math.max(T$W,T$q),T$P=Math.round(this.designWidth*T$W),T$x=Math.round(this.designHeight*T$q);break;case"full":T$W=T$q=1,this._width=T$J=T$n,this._height=T$j=T$C;break;case"fixedwidth":T$q=T$W,this._height=T$j=Math.round(T$C/T$W);break;case"fixedheight":T$W=T$q,this._width=T$J=Math.round(T$n/T$q);break;case"fixedauto":T$n/T$C<this.designWidth/this.designHeight?(T$q=T$W,this._height=T$j=Math.round(T$C/T$W)):(T$W=T$q,this._width=T$J=Math.round(T$n/T$q));}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,T$J=T$J+1&2147483646,T$j=T$j+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),T$W*=this.scaleX,T$q*=this.scaleY,1===T$W&&1===T$q?this.transform.identity():(this.transform.a=this._formatData(T$W/(T$P/T$J)),this.transform.d=this._formatData(T$q/(T$x/T$j)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),T$y.size(T$J,T$j),T$w.changeWebGLSize(T$J,T$j),T$c.scale(T$P/T$J/T$b,T$x/T$j/T$b),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(T$n-T$P)/T$b:this.offset.x=.5*(T$n-T$P)/T$b,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(T$C-T$x)/T$b:this.offset.y=.5*(T$C-T$x)/T$b,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),T$c.translate(this.offset.x,this.offset.y),this.canvasDegree=0,T$_&&("horizontal"===this._screenMode?(T$c.rotate(Math.PI/2),T$c.translate(T$C/T$b,0),this.canvasDegree=90):(T$c.rotate(-Math.PI/2),T$c.translate(0,T$n/T$b),this.canvasDegree=-90)),T$c.a=this._formatData(T$c.a),T$c.d=this._formatData(T$c.d),T$c.tx=this._formatData(T$c.tx),T$c.ty=this._formatData(T$c.ty),T$p.transformOrigin=T$p.webkitTransformOrigin=T$p.msTransformOrigin=T$p.mozTransformOrigin=T$p.oTransformOrigin="0px 0px 0px",T$p.transform=T$p.webkitTransform=T$p.msTransform=T$p.mozTransform=T$p.oTransform="matrix("+T$c.toString()+")",T$c.translate(parseInt(T$p.left)||0,parseInt(T$p.top)||0),this.visible=!0,this._repaint=1,this.event("resize");},T$n._formatData=function(T$n){return Math.abs(T$n)<1e-6?0:Math.abs(1-T$n)<.001?0<T$n?1:-1:T$n;},T$n.getMousePoint=function(){return T$Y.TEMP.setTo(this.mouseX,this.mouseY);},T$n.repaint=function(){this._repaint=1;},T$n.parentRepaint=function(){},T$n._loop=function(){return this.render(T$H.context,0,0),!0;},T$n._onmouseMove=function(T$n){this._mouseMoveTime=T$e.now();},T$n.getTimeFromFrameStart=function(){return T$e.now()-this._frameStartTime;},T$n.render=function(T$n,T$C,T$_){if("sleep"===this._frameRate&&!T$H.isConchApp){var T$E=T$e.now();if(!(1e3<=T$E-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(T$h.loopCount++,T$r.instance.runEvent(),T$T.timer._update()));this._frameStartTime=T$E;}if(this._renderCount++,T$H.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=T$e.now();var T$y="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),T$p=this._renderCount%2==0;if(T$h.renderSlow=!T$y,T$y||T$p||T$H.isConchApp){var T$c;T$h.loopCount++,T$r.instance.runEvent(),T$T.timer._update(),T$w.update3DLoop();var T$l=0,T$W=0;if(T$H.isConchNode)for(T$l=0,T$W=this._scenes.length;T$l<T$W;T$l++)(T$c=this._scenes[T$l])&&T$c._updateSceneConch();else for(T$l=0,T$W=this._scenes.length;T$l<T$W;T$l++)(T$c=this._scenes[T$l])&&T$c._updateScene();if(T$H.isConchNode){var T$q=T$jn.CustomList;for(T$l=0,T$W=T$q.length;T$l<T$W;T$l++){var T$J=T$q[T$l];T$J.customRender(T$J.customContext,0,0);}return;}}T$H.isConchNode||this.renderingEnabled&&(T$y||!T$p||T$H.isConchWebGL)&&(T$H.isWebGL?T$H.WebGL.mainContext&&!T$H.WebGL.mainContext.isContextLost()&&(T$n.clear(),T$j.prototype.render.call(this,T$n,T$C,T$_),T$h._show&&T$h._sp&&T$h._sp.render(T$n,T$C,T$_),T$w.clear(this._bgColor),T$w.beginFlush(),T$n.flush(),T$w.endFinish(),T$U.instance&&T$U.getInstance().endDispose()):(T$w.clear(this._bgColor),T$j.prototype.render.call(this,T$n,T$C,T$_),T$h._show&&T$h._sp&&T$h._sp.render(T$n,T$C,T$_)));}else this._renderCount%5==0&&(T$h.loopCount++,T$r.instance.runEvent(),T$T.timer._update());},T$n._requestFullscreen=function(){var T$n=T$e.document.documentElement;T$n.requestFullscreen?T$n.requestFullscreen():T$n.mozRequestFullScreen?T$n.mozRequestFullScreen():T$n.webkitRequestFullscreen?T$n.webkitRequestFullscreen():T$n.msRequestFullscreen&&T$n.msRequestFullscreen();},T$n._fullScreenChanged=function(){T$T.stage.event("fullscreenchange");},T$n.exitFullscreen=function(){var T$n=T$e.document;T$n.exitFullscreen?T$n.exitFullscreen():T$n.mozCancelFullScreen?T$n.mozCancelFullScreen():T$n.webkitExitFullscreen&&T$n.webkitExitFullscreen();},T$b(0,T$n,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1;}),T$b(0,T$n,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight;}),T$b(0,T$n,"frameRate",function(){return this._frameRate;},function(T$n){if(this._frameRate=T$n,T$H.isConchApp)switch(this._frameRate){case"slow":T$e.window.conch&&T$e.window.conchConfig.setSlowFrame&&T$e.window.conchConfig.setSlowFrame(!0);break;case"fast":T$e.window.conch&&T$e.window.conchConfig.setSlowFrame&&T$e.window.conchConfig.setSlowFrame(!1);break;case"mouse":T$e.window.conch&&T$e.window.conchConfig.setMouseFrame&&T$e.window.conchConfig.setMouseFrame(2e3);break;case"sleep":T$e.window.conch&&T$e.window.conchConfig.setLimitFPS&&T$e.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.");}}),T$b(0,T$n,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1;}),T$b(0,T$n,"width",T$j.prototype._$get_width,function(T$n){this.designWidth=T$n,T$T.superSet(T$jn,this,"width",T$n),T$T.timer.callLater(this,this._changeCanvasSize);}),T$b(0,T$n,"alignH",function(){return this._alignH;},function(T$n){this._alignH=T$n,T$T.timer.callLater(this,this._changeCanvasSize);}),T$b(0,T$n,"isFocused",function(){return this._isFocused;}),T$b(0,T$n,"height",T$j.prototype._$get_height,function(T$n){this.designHeight=T$n,T$T.superSet(T$jn,this,"height",T$n),T$T.timer.callLater(this,this._changeCanvasSize);}),T$b(0,T$n,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||T$B.create();},T$j.prototype._$set_transform),T$b(0,T$n,"isVisibility",function(){return this._isVisibility;}),T$b(0,T$n,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth;}),T$b(0,T$n,"scaleMode",function(){return this._scaleMode;},function(T$n){this._scaleMode=T$n,T$T.timer.callLater(this,this._changeCanvasSize);}),T$b(0,T$n,"alignV",function(){return this._alignV;},function(T$n){this._alignV=T$n,T$T.timer.callLater(this,this._changeCanvasSize);}),T$b(0,T$n,"bgColor",function(){return this._bgColor;},function(T$n){this._bgColor=T$n,this.conchModel&&this.conchModel.bgColor(T$n),T$H.isWebGL&&(T$n?T$c._wgColor=T$o.create(T$n)._color:T$e.onMiniGame||(T$c._wgColor=null)),T$e.onLimixiu?T$c._wgColor=T$o.create(T$n)._color:T$H.canvas.style.background=T$n||"none";}),T$b(0,T$n,"mouseX",function(){return Math.round(T$r.instance.mouseX/this.clientScaleX);}),T$b(0,T$n,"mouseY",function(){return Math.round(T$r.instance.mouseY/this.clientScaleY);}),T$b(0,T$n,"screenMode",function(){return this._screenMode;},function(T$n){this._screenMode=T$n;}),T$b(0,T$n,"visible",T$j.prototype._$get_visible,function(T$n){this.visible!==T$n&&(T$T.superSet(T$jn,this,"visible",T$n),T$H._mainCanvas.source.style.visibility=T$n?"visible":"hidden");}),T$b(0,T$n,"fullScreenEnabled",null,function(T$n){var T$C=T$e.document,T$_=T$H.canvas;T$n?(T$_.addEventListener("mousedown",this._requestFullscreen),T$_.addEventListener("touchstart",this._requestFullscreen),T$C.addEventListener("fullscreenchange",this._fullScreenChanged),T$C.addEventListener("mozfullscreenchange",this._fullScreenChanged),T$C.addEventListener("webkitfullscreenchange",this._fullScreenChanged),T$C.addEventListener("msfullscreenchange",this._fullScreenChanged)):(T$_.removeEventListener("mousedown",this._requestFullscreen),T$_.removeEventListener("touchstart",this._requestFullscreen),T$C.removeEventListener("fullscreenchange",this._fullScreenChanged),T$C.removeEventListener("mozfullscreenchange",this._fullScreenChanged),T$C.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),T$C.removeEventListener("msfullscreenchange",this._fullScreenChanged));}),T$c.SCALE_NOSCALE="noscale",T$c.SCALE_EXACTFIT="exactfit",T$c.SCALE_SHOWALL="showall",T$c.SCALE_NOBORDER="noborder",T$c.SCALE_FULL="full",T$c.SCALE_FIXED_WIDTH="fixedwidth",T$c.SCALE_FIXED_HEIGHT="fixedheight",T$c.SCALE_FIXED_AUTO="fixedauto",T$c.ALIGN_LEFT="left",T$c.ALIGN_RIGHT="right",T$c.ALIGN_CENTER="center",T$c.ALIGN_TOP="top",T$c.ALIGN_MIDDLE="middle",T$c.ALIGN_BOTTOM="bottom",T$c.SCREEN_NONE="none",T$c.SCREEN_HORIZONTAL="horizontal",T$c.SCREEN_VERTICAL="vertical",T$c.FRAME_FAST="fast",T$c.FRAME_SLOW="slow",T$c.FRAME_MOUSE="mouse",T$c.FRAME_SLEEP="sleep",T$c.FRAME_MOUSE_THREDHOLD=2e3,T$W(T$c,["_wgColor",function(){return this._wgColor=[0,0,0,1];}]),T$c;}(T$jn),T$an=(function(T$n){function T$C(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,T$C.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange);}T$J(T$C,"laya.media.SoundNode",T$jn);var T$_=T$C.prototype;T$_._onParentChange=function(){this.target=this.parent;},T$_.play=function(T$n,T$C){void 0===T$n&&(T$n=1),isNaN(T$n)&&(T$n=1),this.url&&(this.stop(),this._channel=T$M.playSound(this.url,T$n,null,T$C));},T$_.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null;},T$_._setPlayAction=function(T$n,T$C,T$_,T$E){void 0===T$E&&(T$E=!0),this[T$_]&&T$n&&(T$E?T$n.on(T$C,this,this[T$_]):T$n.off(T$C,this,this[T$_]));},T$_._setPlayActions=function(T$n,T$C,T$_,T$E){if(void 0===T$E&&(T$E=!0),T$n&&T$C){var T$y,T$p=T$C.split(","),T$c=0;for(T$y=T$p.length,T$c=0;T$c<T$y;T$c++)this._setPlayAction(T$n,T$p[T$c],T$_,T$E);}},T$b(0,T$_,"playEvent",null,function(T$n){(this._playEvents=T$n)&&this._tar&&this._setPlayActions(this._tar,T$n,"play");}),T$b(0,T$_,"target",null,function(T$n){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=T$n,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0));}),T$b(0,T$_,"stopEvent",null,function(T$n){(this._stopEvents=T$n)&&this._tar&&this._setPlayActions(this._tar,T$n,"stop");});}(),function(T$n){function T$C(){this._src=null,this._onload=null,this._onerror=null,T$C.__super.call(this);}T$J(T$C,"laya.resource.FileBitmap",T$bn);var T$_=T$C.prototype;return T$b(0,T$_,"src",function(){return this._src;},function(T$n){this._src=T$n;}),T$b(0,T$_,"onload",null,function(T$n){}),T$b(0,T$_,"onerror",null,function(T$n){}),T$C;}()),T$On=function(T$n){function T$_(T$n,T$C){this._is2D=!1,T$_.__super.call(this);var T$E=this;if(this._source=this,"2D"===T$n||"AUTO"===T$n&&!T$H.isWebGL){this._is2D=!0,this._source=T$C||T$e.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var T$y=this;T$y.getContext=function(T$n,T$C){if(T$E._ctx)return T$E._ctx;var T$_=T$E._ctx=T$E._source.getContext(T$n,T$C);return T$_&&(T$_._canvas=T$y,T$H.isFlash||T$e.onLimixiu||(T$_.size=function(T$n,T$C){})),T$_;};}this.uri="HTMLCanvas_"+this.id,this.lock=!0;}T$J(T$_,"laya.resource.HTMLCanvas",T$bn);var T$C=T$_.prototype;return T$C.clear=function(){this._ctx&&this._ctx.clear();},T$C.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this);},T$C.release=function(){},T$C._setContext=function(T$n){this._ctx=T$n;},T$C.getContext=function(T$n,T$C){return this._ctx?this._ctx:this._ctx=T$_._createContext(this);},T$C.getMemSize=function(){return 0;},T$C.size=function(T$n,T$C){(this._w!=T$n||this._h!=T$C||this._source&&(this._source.width!=T$n||this._source.height!=T$C))&&(this._w=T$n,this._h=T$C,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(T$n,T$C),this._source&&(this._source.height=T$C,this._source.width=T$n));},T$C.getCanvas=function(){return this._source;},T$C.toBase64=function(T$n,T$C,T$_){if(this._source)if(T$H.isConchApp&&this._source.toBase64)this._source.toBase64(T$n,T$C,T$_);else{var T$E=this._source.toDataURL(T$n,T$C);T$_.call(this,T$E);}},T$b(0,T$C,"context",function(){return this._ctx;}),T$b(0,T$C,"asBitmap",null,function(T$n){}),T$_.create=function(T$n,T$C){return new T$_(T$n,T$C);},T$_.TYPE2D="2D",T$_.TYPE3D="3D",T$_.TYPEAUTO="AUTO",T$_._createContext=null,T$_;}(),T$An=(function(T$n){function T$W(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){throw T$W.__super.call(this),new Error("不允许new！");}T$J(T$W,"laya.resource.HTMLSubImage",T$bn),T$W.create=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){return void 0===T$l&&(T$l=!1),new T$W(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l);};}(),function(T$n){function T$j(){this._frames=null,this._url=null,T$j.__super.call(this),this._setControlNode(this);}T$J(T$j,"laya.display.Animation",T$n);var T$C=T$j.prototype;T$C.destroy=function(T$n){void 0===T$n&&(T$n=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,T$n),this._frames=null,this._labels=null;},T$C.play=function(T$n,T$C,T$_,T$E){void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=!0),void 0===T$_&&(T$_=""),void 0===T$E&&(T$E=!0),T$_&&this._setFramesFromCache(T$_,T$E),this._isPlaying=!0,this.index="string"==typeof T$n?this._getFrameByLabel(T$n):T$n,this.loop=T$C,this._actionName=T$_,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0);},T$C._setFramesFromCache=function(T$n,T$C){var T$_;return void 0===T$C&&(T$C=!1),this._url&&(T$n=this._url+"#"+T$n),T$n&&T$j.framesMap[T$n]?((T$_=T$j.framesMap[T$n])instanceof Array?(this._frames=T$j.framesMap[T$n],this._count=this._frames.length):(T$_.nodeRoot&&(T$j.framesMap[T$n]=this._parseGraphicAnimationByData(T$_),T$_=T$j.framesMap[T$n]),this._frames=T$_.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=T$_.interval),this._labels=this._copyLabels(T$_.labels)),!0):(T$C&&console.log("ani not found:",T$n),!1);},T$C._copyLabels=function(T$n){if(!T$n)return null;var T$C,T$_;for(T$_ in T$C={},T$n)T$C[T$_]=T$z.copyArray([],T$n[T$_]);return T$C;},T$C._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&T$n.prototype._frameLoop.call(this);},T$C._displayToIndex=function(T$n){this._frames&&(this.graphics=this._frames[T$n]);},T$C.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null;},T$C.loadImages=function(T$n,T$C){return void 0===T$C&&(T$C=""),this._url="",this._setFramesFromCache(T$C)||(this.frames=T$j.framesMap[T$C]?T$j.framesMap[T$C]:T$j.createFrames(T$n,T$C)),this;},T$C.loadAtlas=function(T$C,T$_,T$E){void 0===T$E&&(T$E=""),this._url="";var T$y=this;function T$n(T$n){T$C===T$n&&(T$y.frames=T$j.framesMap[T$E]?T$j.framesMap[T$E]:T$j.createFrames(T$C,T$E),T$_&&T$_.run());}return T$y._setFramesFromCache(T$E)||(T$ln.getAtlas(T$C)?T$n(T$C):T$T.loader.load(T$C,T$a.create(null,T$n,[T$C]),null,"atlas")),this;},T$C.loadAnimation=function(T$n,T$C,T$_){this._url=T$n;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,T$C&&T$C.run()):!T$_||T$ln.getAtlas(T$_)?this._loadAnimationData(T$n,T$C,T$_):T$T.loader.load(T$_,T$a.create(this,this._loadAnimationData,[T$n,T$C,T$_]),null,"atlas"),this;},T$C._loadAnimationData=function(T$l,T$W,T$n){var T$q=this;if(!T$n||T$ln.getAtlas(T$n)){var T$J=this;T$ln.getRes(T$l)?T$C(T$l):T$T.loader.load(T$l,T$a.create(null,T$C,[T$l]),null,"json"),T$ln.clearRes(T$l);}else console.warn("atlas load fail:"+T$n);function T$C(T$n){if(T$ln.getRes(T$n)&&T$l===T$n){var T$C;if(T$j.framesMap[T$l+"#"])T$J._setFramesFromCache(T$q._actionName,!0),T$q.index=0,T$q._checkResumePlaying();else{var T$_=T$J._parseGraphicAnimation(T$ln.getRes(T$l));if(!T$_)return;var T$E,T$y=T$_.animationList,T$p=0,T$c=T$y.length;for(T$p=0;T$p<T$c;T$p++)T$C=T$y[T$p],T$j.framesMap[T$l+"#"+T$C.name]=T$C,T$E||(T$E=T$C);T$E&&(T$j.framesMap[T$l+"#"]=T$E,T$J._setFramesFromCache(T$q._actionName,!0),T$q.index=0),T$q._checkResumePlaying();}T$W&&T$W.run();}}},T$C._parseGraphicAnimation=function(T$n){return T$Tn.parseAnimationData(T$n);},T$C._parseGraphicAnimationByData=function(T$n){return T$Tn.parseAnimationByData(T$n);},T$b(0,T$C,"frames",function(){return this._frames;},function(T$n){(this._frames=T$n)&&(this._count=T$n.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index);}),T$b(0,T$C,"autoPlay",null,function(T$n){T$n?this.play():this.stop();}),T$b(0,T$C,"source",null,function(T$n){-1<T$n.indexOf(".ani")?this.loadAnimation(T$n):-1<T$n.indexOf(".json")||-1<T$n.indexOf("als")||-1<T$n.indexOf("atlas")?this.loadAtlas(T$n):this.loadImages(T$n.split(","));}),T$b(0,T$C,"autoAnimation",null,function(T$n){this.play(0,!0,T$n,!1);}),T$j.createFrames=function(T$n,T$C){var T$_,T$E,T$y=0,T$p=0;if("string"==typeof T$n){var T$c=T$ln.getAtlas(T$n);if(T$c&&T$c.length)for(T$_=[],T$y=0,T$p=T$c.length;T$y<T$p;T$y++)(T$E=new T$w.createGraphics()).drawTexture(T$ln.getRes(T$c[T$y]),0,0),T$_.push(T$E);}else if(T$n instanceof Array)for(T$_=[],T$y=0,T$p=T$n.length;T$y<T$p;T$y++)(T$E=new T$w.createGraphics()).loadImage(T$n[T$y],0,0),T$_.push(T$E);return T$C&&(T$j.framesMap[T$C]=T$_),T$_;},T$j.clearCache=function(T$n){var T$C,T$_=T$j.framesMap,T$E=T$n+"#";for(T$C in T$_)T$C!==T$n&&0!=T$C.indexOf(T$E)||delete T$j.framesMap[T$C];},T$j.framesMap={};}(T$rn),function(T$n){function T$p(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,T$p.__super.call(this),null==T$p._sortIndexFun&&(T$p._sortIndexFun=T$t.sortByKey("index",!1,!0));}T$J(T$p,"laya.display.FrameAnimation",T$n);var T$C=T$p.prototype;return T$C._setUp=function(T$n,T$C){this._labels=null,this._animationNewFrames=null,this._targetDic=T$n,this._animationData=T$C,this.interval=1e3/T$C.frameRate,T$C.parsed?(this._count=T$C.count,this._labels=T$C.labels,this._animationNewFrames=T$C.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),T$C.parsed=!0,T$C.labels=this._labels,T$C.count=this._count,T$C.animationNewFrames=this._animationNewFrames;},T$C.clear=function(){T$n.prototype.clear.call(this),this._targetDic=null,this._animationData=null;},T$C._displayToIndex=function(T$n){if(this._animationData){T$n<0&&(T$n=0),T$n>this._count&&(T$n=this._count);var T$C=this._animationData.nodes,T$_=0,T$E=T$C.length;for(T$_=0;T$_<T$E;T$_++)this._displayNodeToFrame(T$C[T$_],T$n);}},T$C._displayNodeToFrame=function(T$n,T$C,T$_){T$_||(T$_=this._targetDic);var T$E=T$_[T$n.target];if(T$E){var T$y,T$p,T$c,T$l=T$n.frames,T$W=T$n.keys,T$q=0,T$J=T$W.length;for(T$q=0;T$q<T$J;T$q++)T$c=(T$p=T$l[T$y=T$W[T$q]]).length>T$C?T$p[T$C]:T$p[T$p.length-1],T$E[T$y]=T$c;}},T$C._calculateDatas=function(){if(this._animationData){var T$n,T$C=this._animationData.nodes,T$_=0,T$E=T$C.length;for(T$_=this._count=0;T$_<T$E;T$_++)T$n=T$C[T$_],this._calculateNodeKeyFrames(T$n);this._count+=1;}},T$C._calculateNodeKeyFrames=function(T$n){var T$C,T$_,T$E=T$n.keyframes,T$y=T$n.target;for(T$C in T$n.frames||(T$n.frames={}),T$n.keys?T$n.keys.length=0:T$n.keys=[],T$n.initValues||(T$n.initValues={}),T$E)T$_=T$E[T$C],T$n.frames[T$C]||(T$n.frames[T$C]=[]),this._targetDic&&this._targetDic[T$y]&&(T$n.initValues[T$C]=this._targetDic[T$y][T$C]),T$_.sort(T$p._sortIndexFun),T$n.keys.push(T$C),this._calculateNodePropFrames(T$_,T$n.frames[T$C],T$C,T$y);},T$C.resetToInitState=function(){if(this._targetDic&&this._animationData){var T$n,T$C,T$_=this._animationData.nodes,T$E=0,T$y=T$_.length;for(T$E=0;T$E<T$y;T$E++)if(T$C=(T$n=T$_[T$E]).initValues){var T$p,T$c=this._targetDic[T$n.target];if(T$c)for(T$p in T$C)T$c[T$p]=T$C[T$p];}}},T$C._calculateNodePropFrames=function(T$n,T$C,T$_,T$E){var T$y=0,T$p=T$n.length-1;if(0<T$p){for(T$C.length=T$n[T$p].index+1,T$y=0;T$y<T$p;T$y++)this._dealKeyFrame(T$n[T$y]),this._calculateFrameValues(T$n[T$y],T$n[T$y+1],T$C);this._dealKeyFrame(T$n[T$y]);}0==T$p&&(T$C[T$n[0].index]=T$n[0].value,this._animationNewFrames&&(this._animationNewFrames[T$n[0].index]=!0));},T$C._dealKeyFrame=function(T$n){T$n.label&&""!=T$n.label&&this.addLabel(T$n.label,T$n.index);},T$C._calculateFrameValues=function(T$n,T$C,T$_){var T$E,T$y=0,T$p=T$n.index,T$c=T$C.index,T$l=T$n.value,T$W=T$C.value-T$n.value,T$q=T$c-T$p;if(T$c>this._count&&(this._count=T$c),T$n.tween)for(null==(T$E=T$I[T$n.tweenMethod])&&(T$E=T$I.linearNone),T$y=T$p;T$y<T$c;T$y++)T$_[T$y]=T$E(T$y-T$p,T$l,T$W,T$q),this._animationNewFrames&&(this._animationNewFrames[T$y]=!0);else for(T$y=T$p;T$y<T$c;T$y++)T$_[T$y]=T$l;this._animationNewFrames&&(this._animationNewFrames[T$n.index]=!0,this._animationNewFrames[T$C.index]=!0),T$_[T$C.index]=T$C.value;},T$p._sortIndexFun=null,T$p;}(T$rn)),T$kn=function(T$C){function T$y(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",T$y.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=T$mn.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay);}T$J(T$y,"laya.display.Input",T$C);var T$n=T$y.prototype;return T$n.setSelection=function(T$n,T$C){this.focus=!0,laya.display.Input.inputElement.selectionStart=T$n,laya.display.Input.inputElement.selectionEnd=T$C;},T$n._onUnDisplay=function(T$n){this.focus=!1;},T$n._onMouseDown=function(T$n){this.focus=!0;},T$n._syncInputTransform=function(){var T$n=this.nativeInput,T$C=T$z.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),T$_=this._width-this.padding[1]-this.padding[3],T$E=this._height-this.padding[0]-this.padding[2];T$H.isConchApp?(T$n.setScale(T$C.scaleX,T$C.scaleY),T$n.setSize(T$_,T$E),T$n.setPos(T$C.x,T$C.y)):(T$y.inputContainer.style.transform=T$y.inputContainer.style.webkitTransform="scale("+T$C.scaleX+","+T$C.scaleY+") rotate("+T$T.stage.canvasDegree+"deg)",T$n.style.width=T$_+"px",T$n.style.height=T$E+"px",T$y.inputContainer.style.left=T$C.x+"px",T$y.inputContainer.style.top=T$C.y+"px");},T$n.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select();},T$n._setInputMethod=function(){T$y.input.parentElement&&T$y.inputContainer.removeChild(T$y.input),T$y.area.parentElement&&T$y.inputContainer.removeChild(T$y.area),T$y.inputElement=this._multiline?T$y.area:T$y.input,T$y.inputContainer.appendChild(T$y.inputElement),T$mn.RightToLeft&&(T$y.inputElement.style.direction="rtl");},T$n._focusIn=function(){laya.display.Input.isInputting=!0;var T$n=this.nativeInput;this._focus=!0;var T$C=T$n.style;T$C.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),T$n.readOnly=!this._editable,T$H.isConchApp&&(T$n.setType(this._type),T$n.setForbidEdit(!this._editable)),T$n.maxLength=this._maxChars;this.padding;if(T$n.type=this._type,T$n.value=this._content,T$n.placeholder=this._prompt,T$T.stage.off("keydown",this,this._onKeyDown),T$T.stage.on("keydown",this,this._onKeyDown),(T$T.stage.focus=this).event("focus"),T$e.onPC&&T$n.focus(),!T$e.onMiniGame){this._text;this._text=null;}this.typeset(),T$n.setColor(this._originColor),T$n.setFontSize(this.fontSize),T$n.setFontFace(T$e.onIPhone&&T$mn._fontFamilyMap[this.font]||this.font),T$H.isConchApp&&T$n.setMultiAble&&T$n.setMultiAble(this._multiline),T$C.lineHeight=this.leading+this.fontSize+"px",T$C.fontStyle=this.italic?"italic":"normal",T$C.fontWeight=this.bold?"bold":"normal",T$C.textAlign=this.align,T$C.padding="0 0",this._syncInputTransform(),!T$H.isConchApp&&T$e.onPC&&T$T.timer.frameLoop(1,this,this._syncInputTransform);},T$n._setPromptColor=function(){(T$y.promptStyleDOM=T$e.getElementById("promptStyle"))||((T$y.promptStyleDOM=T$e.createElement("style")).setAttribute("id","promptStyle"),T$e.document.head.appendChild(T$y.promptStyleDOM)),T$y.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}";},T$n._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(T$T.superSet(T$mn,this,"text",this._content),T$T.superSet(T$mn,this,"color",this._originColor)):(T$T.superSet(T$mn,this,"text",this._prompt),T$T.superSet(T$mn,this,"color",this._promptColor)),T$T.stage.off("keydown",this,this._onKeyDown),T$T.stage.focus=null,this.event("blur"),T$H.isConchApp&&this.nativeInput.blur(),T$e.onPC&&T$T.timer.clear(this,this._syncInputTransform);},T$n._onKeyDown=function(T$n){13===T$n.keyCode&&(T$e.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"));},T$n.changeText=function(T$n){this._content=T$n,this._focus?(this.nativeInput.value=T$n||"",this.event("change")):T$C.prototype.changeText.call(this,T$n);},T$b(0,T$n,"color",T$C.prototype._$get_color,function(T$n){this._focus&&this.nativeInput.setColor(T$n),T$T.superSet(T$mn,this,"color",this._content?T$n:this._promptColor),this._originColor=T$n;}),T$b(0,T$n,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0;},function(T$n){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。");}),T$b(0,T$n,"multiline",function(){return this._multiline;},function(T$n){this._multiline=T$n,this.valign=T$n?"top":"middle";}),T$b(0,T$n,"maxChars",function(){return this._maxChars;},function(T$n){T$n<=0&&(T$n=1e5),this._maxChars=T$n;}),T$b(0,T$n,"text",function(){return this._focus?this.nativeInput.value:this._content||"";},function(T$n){T$T.superSet(T$mn,this,"color",this._originColor),T$n+="",this._focus?(this.nativeInput.value=T$n||"",this.event("change")):(this._multiline||(T$n=T$n.replace(/\r?\n/g,"")),(this._content=T$n)?T$T.superSet(T$mn,this,"text",T$n):(T$T.superSet(T$mn,this,"text",this._prompt),T$T.superSet(T$mn,this,"color",this.promptColor)));}),T$b(0,T$n,"nativeInput",function(){return this._multiline?T$y.area:T$y.input;}),T$b(0,T$n,"prompt",function(){return this._prompt;},function(T$n){!this._text&&T$n&&T$T.superSet(T$mn,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?T$T.superSet(T$mn,this,"text",this._text==this._prompt?T$n:this._text):T$T.superSet(T$mn,this,"text",T$n),this._prompt=T$mn.langPacks&&T$mn.langPacks[T$n]?T$mn.langPacks[T$n]:T$n;}),T$b(0,T$n,"focus",function(){return this._focus;},function(T$n){var T$C=this.nativeInput;this._focus!==T$n&&(T$n?(T$C.target?T$C.target._focusOut():this._setInputMethod(),(T$C.target=this)._focusIn()):(T$C.target=null,this._focusOut(),T$e.document.body.scrollTop=0,T$C.blur(),T$H.isConchApp?T$C.setPos(-1e4,-1e4):T$y.inputContainer.contains(T$C)&&T$y.inputContainer.removeChild(T$C)));}),T$b(0,T$n,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:"";},function(T$n){T$n?(-1<(T$n="[^"+T$n+"]").indexOf("^^")&&(T$n=T$n.replace("^^","")),this._restrictPattern=new RegExp(T$n,"g")):this._restrictPattern=null;}),T$b(0,T$n,"editable",function(){return this._editable;},function(T$n){this._editable=T$n,T$H.isConchApp&&T$y.input.setForbidEdit(!T$n);}),T$b(0,T$n,"promptColor",function(){return this._promptColor;},function(T$n){this._promptColor=T$n,this._content||T$T.superSet(T$mn,this,"color",T$n);}),T$b(0,T$n,"type",function(){return this._type;},function(T$n){this._getCSSStyle().password="password"==T$n,this._type=T$n,T$H.isConchApp&&this.nativeInput.setType(T$n);}),T$b(0,T$n,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0;},function(T$n){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。");}),T$b(0,T$n,"asPassword",function(){return this._getCSSStyle().password;},function(T$n){this._getCSSStyle().password=T$n,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0;}),T$y.__init__=function(){T$y._createInputElement(),T$e.onMobile&&T$H.canvas.addEventListener(T$y.IOS_IFRAME?T$e.onMiniGame?"touchend":"click":"touchend",T$y._popupInputMethod);},T$y._popupInputMethod=function(T$n){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus();},T$y._createInputElement=function(){T$y._initInput(T$y.area=T$e.createElement("textarea")),T$y._initInput(T$y.input=T$e.createElement("input")),(T$y.inputContainer=T$e.createElement("div")).style.position="absolute",T$y.inputContainer.style.zIndex=1e5,T$e.container.appendChild(T$y.inputContainer),T$y.inputContainer.setPos=function(T$n,T$C){T$y.inputContainer.style.left=T$n+"px",T$y.inputContainer.style.top=T$C+"px";};},T$y._initInput=function(T$C){var T$n=T$C.style;T$n.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",T$n.resize="none",T$n.backgroundColor="transparent",T$n.border="none",T$n.outline="none",T$n.zIndex=1,T$C.addEventListener("input",T$y._processInputting),T$C.addEventListener("mousemove",T$y._stopEvent),T$C.addEventListener("mousedown",T$y._stopEvent),T$C.addEventListener("touchmove",T$y._stopEvent),T$C.setFontFace=function(T$n){T$C.style.fontFamily=T$n;},T$H.isConchApp||(T$C.setColor=function(T$n){T$C.style.color=T$n;},T$C.setFontSize=function(T$n){T$C.style.fontSize=T$n+"px";});},T$y._processInputting=function(T$n){var T$C=laya.display.Input.inputElement.target;if(T$C){var T$_=laya.display.Input.inputElement.value;T$C._restrictPattern&&(T$_=T$_.replace(/\u2006|\x27/g,""),T$C._restrictPattern.test(T$_)&&(T$_=T$_.replace(T$C._restrictPattern,""),laya.display.Input.inputElement.value=T$_)),T$C._text=T$_,T$C.event("input");}},T$y._stopEvent=function(T$n){"touchmove"==T$n.type&&T$n.preventDefault(),T$n.stopPropagation&&T$n.stopPropagation();},T$y.TYPE_TEXT="text",T$y.TYPE_PASSWORD="password",T$y.TYPE_EMAIL="email",T$y.TYPE_URL="url",T$y.TYPE_NUMBER="number",T$y.TYPE_RANGE="range",T$y.TYPE_DATE="date",T$y.TYPE_MONTH="month",T$y.TYPE_WEEK="week",T$y.TYPE_TIME="time",T$y.TYPE_DATE_TIME="datetime",T$y.TYPE_DATE_TIME_LOCAL="datetime-local",T$y.TYPE_SEARCH="search",T$y.input=null,T$y.area=null,T$y.inputElement=null,T$y.inputContainer=null,T$y.confirmButton=null,T$y.promptStyleDOM=null,T$y.inputHeight=45,T$y.isInputting=!1,T$y.stageMatrix=null,T$W(T$y,["IOS_IFRAME",function(){return this.IOS_IFRAME=T$e.onIOS&&T$e.window.top!=T$e.window.self;}]),T$y;}(T$mn),T$tn=function(T$n){function T$_(T$n,T$C){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,T$_.__super.call(this),T$n&&this._init_(T$n,T$C);}T$J(T$_,"laya.resource.HTMLImage",T$an);var T$C=T$_.prototype;return T$C._init_=function(T$n,T$C){this._src=T$n,this._source=new T$e.window.Image(),T$C&&(T$C.onload&&(this.onload=T$C.onload),T$C.onerror&&(this.onerror=T$C.onerror),T$C.onCreate&&T$C.onCreate(this)),0!=T$n.indexOf("data:image")&&(this._source.crossOrigin=""),T$n&&(this._source.src=T$n);},T$C.recreateResource=function(){var T$n=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate();}else{this._recreateLock=!0;var T$C=this;this._source=new T$e.window.Image(),this._source.crossOrigin="",this._source.onload=function(){if(T$C._needReleaseAgain)return T$C._needReleaseAgain=!1,T$C._source.onload=null,void(T$C._source=null);T$C._source.onload=null,T$C.memorySize=T$n._w*T$n._h*4,T$C._recreateLock=!1,T$C.completeCreate();},this._source.src=this._src;}},T$C.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0);},T$C.onresize=function(){this._w=this._source.width,this._h=this._source.height;},T$b(0,T$C,"onload",null,function(T$n){var T$C=this;this._onload=T$n,this._source&&(this._source.onload=null!=this._onload?function(){T$C.onresize(),T$C._onload();}:null);}),T$b(0,T$C,"onerror",null,function(T$n){var T$C=this;this._onerror=T$n,this._source&&(this._source.onerror=null!=this._onerror?function(){T$C._onerror();}:null);}),T$b(0,T$C,"enableMerageInAtlas",function(){return this._enableMerageInAtlas;},function(T$n){this._enableMerageInAtlas=T$n,T$H.isConchApp&&this._source&&(this._source.enableMerageInAtlas=T$n);}),T$_.create=function(T$n,T$C){return new T$_(T$n,T$C);},T$_;}(),T$Tn=(function(T$p){function T$n(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,T$n.__super.call(this);}T$J(T$n,"laya.display.EffectAnimation",T$p);var T$C=T$n.prototype;T$C._onOtherBegin=function(T$n){T$n!=this&&this.stop();},T$C.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction));},T$C._onPlayAction=function(){this.play(0,!1);},T$C.play=function(T$n,T$C,T$_,T$E){void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=!0),void 0===T$_&&(T$_=""),void 0===T$E&&(T$E=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,T$n,T$C,T$_,T$E));},T$C._recordInitData=function(){if(this._aniKeys){var T$n,T$C,T$_=0;for(T$n=this._aniKeys.length,T$_=0;T$_<T$n;T$_++)T$C=this._aniKeys[T$_],this._initData[T$C]=this._target[T$C];}},T$C._displayToIndex=function(T$n){if(this._animationData){T$n<0&&(T$n=0),T$n>this._count&&(T$n=this._count);var T$C=this._animationData.nodes,T$_=0,T$E=T$C.length;for(T$E=1<T$E?1:T$E,T$_=0;T$_<T$E;T$_++)this._displayNodeToFrame(T$C[T$_],T$n);}},T$C._displayNodeToFrame=function(T$n,T$C,T$_){if(this._target){var T$E;T$E=this._target;var T$y,T$p,T$c,T$l,T$W=T$n.frames,T$q=T$n.keys,T$J=0,T$j=T$q.length;T$l=T$n.secondFrames;var T$P,T$x,T$b,T$r,T$m=0;for(T$J=0;T$J<T$j;T$J++)T$p=T$W[T$y=T$q[T$J]],T$c=-1==(T$m=T$l[T$y])?this._initData[T$y]:T$C<T$m?(T$b=(T$x=T$n.keyframes[T$y])[0]).tween?(null==(T$P=T$I[T$b.tweenMethod])&&(T$P=T$I.linearNone),T$r=T$x[1],T$P(T$C,this._initData[T$y],T$r.value-this._initData[T$y],T$r.index)):this._initData[T$y]:T$p.length>T$C?T$p[T$C]:T$p[T$p.length-1],T$E[T$y]=T$c;}},T$C._calculateNodeKeyFrames=function(T$n){T$p.prototype._calculateNodeKeyFrames.call(this,T$n);var T$C,T$_,T$E,T$y=T$n.keyframes;T$n.target;for(T$C in T$E={},T$n.secondFrames=T$E,T$y)(T$_=T$y[T$C]).length<=1?T$E[T$C]=-1:T$E[T$C]=T$_[1].index;},T$b(0,T$C,"target",function(){return this._target;},function(T$n){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=T$n,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent();}),T$b(0,T$C,"playEvent",null,function(T$n){(this._playEvents=T$n)&&this.addEvent();}),T$b(0,T$C,"effectData",null,function(T$n){var T$C;T$n&&(T$C=T$n.animations)&&T$C[0]&&(this._setUp({},T$C[0]),T$C[0].nodes&&T$C[0].nodes[0]&&(this._aniKeys=T$C[0].nodes[0].keys));}),T$b(0,T$C,"effectClass",null,function(T$n){var T$C,T$_;(this._effectClass=T$u.getClass(T$n),this._effectClass)&&(T$C=this._effectClass.uiView)&&(T$_=T$C.animations)&&T$_[0]&&(this._setUp({},T$_[0]),T$_[0].nodes&&T$_[0].nodes[0]&&(this._aniKeys=T$_[0].nodes[0].keys));}),T$n.EffectAnimationBegin="effectanimationbegin";}(T$An),function(T$C){var T$S;function T$M(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,T$M.__super.call(this);}T$J(T$M,"laya.utils.GraphicAnimation",T$C);var T$n=T$M.prototype;return T$n._parseNodeList=function(T$n){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[T$n.compId]=T$n.props,T$n.compId&&this._nodeList.push(T$n.compId);var T$C=T$n.child;if(T$C){var T$_=0,T$E=T$C.length;for(T$_=0;T$_<T$E;T$_++)this._parseNodeList(T$C[T$_]);}},T$n._calGraphicData=function(T$n){var T$C;if(this._setUp(null,T$n),this._createGraphicData(),this._nodeIDAniDic)for(T$C in this._nodeIDAniDic)this._nodeIDAniDic[T$C]=null;},T$n._createGraphicData=function(){var T$n,T$C=[],T$_=0,T$E=this.count,T$y=this._animationNewFrames;for(T$y||(T$y=[]),T$_=0;T$_<T$E;T$_++)!T$y[T$_]&&T$n||(T$n=this._createFrameGraphic(T$_)),T$C.push(T$n);this._gList=T$C;},T$n._createFrameGraphic=function(T$n){var T$C=T$w.createGraphics();return T$M._rootMatrix||(T$M._rootMatrix=new T$B()),this._updateNodeGraphic(this._rootNode,T$n,T$M._rootMatrix,T$C),T$C;},T$n._updateNodeGraphic=function(T$n,T$C,T$_,T$E,T$y){var T$p;void 0===T$y&&(T$y=1);var T$c,T$l,T$W,T$q=(T$p=this._nodeGDic[T$n.compId]=this._getNodeGraphicData(T$n.compId,T$C,this._nodeGDic[T$n.compId])).alpha*T$y;if(!(T$q<.01)&&(T$p.resultTransform||(T$p.resultTransform=T$B.create()),T$c=T$p.resultTransform,T$B.mul(T$p.transform,T$_,T$c),T$p.skin&&(T$l=this._getTextureByUrl(T$p.skin))&&(T$c._checkTransform()?(T$E.drawTexture(T$l,0,0,T$p.width,T$p.height,T$c,T$q),T$p.resultTransform=null):T$E.drawTexture(T$l,T$c.tx,T$c.ty,T$p.width,T$p.height,null,T$q)),T$W=T$n.child)){var T$J,T$j=0;for(T$J=T$W.length,T$j=0;T$j<T$J;T$j++)this._updateNodeGraphic(T$W[T$j],T$C,T$c,T$E,T$q);}},T$n._updateNoChilds=function(T$n,T$C){if(T$n.skin){var T$_=this._getTextureByUrl(T$n.skin);if(T$_){var T$E=T$n.transform;T$E._checkTransform();!T$E.bTransform?T$C.drawTexture(T$_,T$E.tx,T$E.ty,T$n.width,T$n.height,null,T$n.alpha):T$C.drawTexture(T$_,0,0,T$n.width,T$n.height,T$E.clone(),T$n.alpha);}}},T$n._updateNodeGraphic2=function(T$n,T$C,T$_){var T$E;if(T$E=this._nodeGDic[T$n.compId]=this._getNodeGraphicData(T$n.compId,T$C,this._nodeGDic[T$n.compId]),T$n.child){var T$y=T$E.transform;T$y._checkTransform();var T$p,T$c;T$c=(T$p=!T$y.bTransform)&&(0!=T$y.tx||0!=T$y.ty);var T$l,T$W,T$q;if((T$l=T$y.bTransform||1!=T$E.alpha)&&T$_.save(),1!=T$E.alpha&&T$_.alpha(T$E.alpha),T$p?T$c&&T$_.translate(T$y.tx,T$y.ty):T$_.transform(T$y.clone()),T$W=T$n.child,T$E.skin&&(T$q=this._getTextureByUrl(T$E.skin))&&T$_.drawTexture(T$q,0,0,T$E.width,T$E.height),T$W){var T$J,T$j=0;for(T$J=T$W.length,T$j=0;T$j<T$J;T$j++)this._updateNodeGraphic2(T$W[T$j],T$C,T$_);}T$l?T$_.restore():T$p?T$c&&T$_.translate(-T$y.tx,-T$y.ty):T$_.transform(T$y.clone().invert());}else this._updateNoChilds(T$E,T$_);},T$n._calculateNodeKeyFrames=function(T$n){T$C.prototype._calculateNodeKeyFrames.call(this,T$n),this._nodeIDAniDic[T$n.target]=T$n;},T$n.getNodeDataByID=function(T$n){return this._nodeIDAniDic[T$n];},T$n._getParams=function(T$n,T$C,T$_,T$E){var T$y=T$M._temParam;T$y.length=T$C.length;var T$p=0,T$c=T$C.length;for(T$p=0;T$p<T$c;T$p++)T$y[T$p]=this._getObjVar(T$n,T$C[T$p][0],T$_,T$C[T$p][1],T$E);return T$y;},T$n._getObjVar=function(T$n,T$C,T$_,T$E,T$y){if(T$n.hasOwnProperty(T$C)){var T$p=T$n[T$C];if(T$_>=T$p.length&&(T$_=T$p.length-1),null!=T$n[T$C][T$_])return T$n[T$C][T$_];}return T$y.hasOwnProperty(T$C)?T$y[T$C]:T$E;},T$n._getNodeGraphicData=function(T$n,T$C,T$_){T$_||(T$_=T$S.create()),T$_.transform?T$_.transform.identity():T$_.transform=T$B.create();var T$E=this.getNodeDataByID(T$n);if(!T$E)return T$_;var T$y,T$p,T$c=T$E.frames,T$l=this._getParams(T$c,T$M._drawTextureCmd,T$C,this._nodeDefaultProps[T$n]),T$W=T$l[0],T$q=NaN,T$J=NaN,T$j=T$l[5],T$P=T$l[6],T$x=T$l[13],T$b=T$l[14],T$r=T$l[7],T$m=T$l[8],T$d=T$l[9],T$a=T$l[11],T$O=T$l[12];T$q=T$l[3],T$J=T$l[4],0!=T$q&&0!=T$J||(T$W=null),-1==T$q&&(T$q=0),-1==T$J&&(T$J=0),T$_.skin=T$W,T$_.width=T$q,T$_.height=T$J,T$W&&((T$y=this._getTextureByUrl(T$W))?(T$q||(T$q=T$y.sourceWidth),T$J||(T$J=T$y.sourceHeight)):console.warn("lost skin:",T$W,",you may load pics first")),T$_.alpha=T$l[10],T$p=T$_.transform,0!=T$x&&(T$j=T$x*T$q),0!=T$b&&(T$P=T$b*T$J),0==T$j&&0==T$P||T$p.translate(-T$j,-T$P);var T$A=null;if(T$d||1!==T$r||1!==T$m||T$a||T$O){(T$A=T$M._tempMt).identity(),T$A.bTransform=!0;var T$k=.0174532922222222*(T$d-T$a),T$t=.0174532922222222*(T$d+T$O),T$T=Math.cos(T$t),T$Y=Math.sin(T$t),T$s=Math.sin(T$k),T$N=Math.cos(T$k);T$A.a=T$r*T$T,T$A.b=T$r*T$Y,T$A.c=-T$m*T$s,T$A.d=T$m*T$N,T$A.tx=T$A.ty=0;}return T$A&&(T$p=T$B.mul(T$p,T$A,T$p)),T$p.translate(T$l[1],T$l[2]),T$_;},T$n._getTextureByUrl=function(T$n){return T$ln.getRes(T$n);},T$n.setAniData=function(T$n,T$C){if(T$n.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=T$n,this._parseNodeList(T$n);var T$_,T$E={},T$y=[],T$p=T$n.animations,T$c=0,T$l=T$p.length;for(T$c=0;T$c<T$l;T$c++)if(T$_=T$p[T$c],this._labels=null,(!T$C||T$C==T$_.name)&&T$_){try{this._calGraphicData(T$_);}catch(T$n){console.warn("parse animation fail:"+T$_.name+",empty animation created"),this._gList=[];}var T$W={};T$W.interval=1e3/T$_.frameRate,T$W.frames=this._gList,T$W.labels=this._labels,T$W.name=T$_.name,T$y.push(T$W),T$E[T$_.name]=T$W;}this.animationList=T$y,this.animationDic=T$E;}T$M._temParam.length=0;},T$n.parseByData=function(T$n){var T$C,T$_;T$C=T$n.nodeRoot,T$_=T$n.aniO,delete T$n.nodeRoot,delete T$n.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=T$C,this._parseNodeList(T$C),this._labels=null;try{this._calGraphicData(T$_);}catch(T$n){console.warn("parse animation fail:"+T$_.name+",empty animation created"),this._gList=[];}var T$E=T$n;return T$E.interval=1e3/T$_.frameRate,T$E.frames=this._gList,T$E.labels=this._labels,T$E.name=T$_.name,T$E;},T$n.setUpAniData=function(T$n){if(T$n.animations){var T$C,T$_={},T$E=[],T$y=T$n.animations,T$p=0,T$c=T$y.length;for(T$p=0;T$p<T$c;T$p++)if(T$C=T$y[T$p]){var T$l={};T$l.name=T$C.name,T$l.aniO=T$C,T$l.nodeRoot=T$n,T$E.push(T$l),T$_[T$C.name]=T$l;}this.animationList=T$E,this.animationDic=T$_;}},T$n._clear=function(){var T$n,T$C;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(T$n in this._nodeGDic)(T$C=this._nodeGDic[T$n])&&T$C.recover();this._nodeGDic=null;},T$M.parseAnimationByData=function(T$n){var T$C;return T$M._I||(T$M._I=new T$M()),T$C=T$M._I.parseByData(T$n),T$M._I._clear(),T$C;},T$M.parseAnimationData=function(T$n){var T$C;return T$M._I||(T$M._I=new T$M()),T$M._I.setUpAniData(T$n),(T$C={}).animationList=T$M._I.animationList,T$C.animationDic=T$M._I.animationDic,T$M._I._clear(),T$C;},T$M._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],T$M._temParam=[],T$M._I=null,T$M._rootMatrix=null,T$W(T$M,["_tempMt",function(){return this._tempMt=new T$B();}]),T$M.__init$=function(){T$S=function(){function T$n(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1;}return T$J(T$n,""),T$n.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),T$L.recover("GraphicNode",this);},T$n.create=function(){return T$L.getItemByClass("GraphicNode",T$n);},T$n;}();},T$M;}(T$An));T$T.__init([T$q,T$Wn,T$H,T$e,T$v,T$N,T$n,T$Tn]);}(window,document,Laya),function(T$n,T$C,T$_){T$_.un,T$_.uns,T$_.static;var T$E=T$_.class;T$_.getset,T$_.__newvec;new(function(){function T$n(){}return T$E(T$n,"LayaMain"),T$n;}())();}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$n,T$C){"use strict";for(var T$_ in Object.defineProperty(T$C,"__esModule",{value:!0}),Laya){var T$E=Laya[T$_];T$E&&T$E.__isclass&&(T$C[T$_]=T$E);}}),function(T$n,T$C,T$t){T$t.un,T$t.uns;var T$c=T$t.static,T$P=T$t.class,T$E=T$t.getset,T$p=T$t.__newvec,T$J=laya.maths.Arith,T$j=laya.maths.Bezier,T$_=laya.resource.Bitmap,T$x=laya.utils.Browser,T$W=laya.utils.Byte,T$b=laya.utils.Color,T$T=(laya.filters.ColorFilter,T$t.Config),T$y=laya.resource.Context,T$Y=(laya.events.Event,laya.filters.Filter),T$l=laya.display.Graphics,T$q=laya.resource.HTMLCanvas,T$r=(laya.utils.HTMLChar,laya.resource.HTMLImage),T$m=laya.resource.HTMLSubImage,T$s=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),T$N=laya.maths.Point,T$S=laya.maths.Rectangle,T$d=laya.renders.Render,T$a=(laya.renders.RenderContext,laya.renders.RenderSprite),T$O=laya.resource.Resource,T$A=laya.resource.ResourceManager,T$k=laya.utils.RunDriver,T$M=laya.display.Sprite,T$w=laya.display.Stage,T$B=laya.utils.Stat,T$V=laya.utils.StringKey,T$g=(laya.display.css.Style,laya.system.System),T$H=laya.display.Text,T$X=laya.resource.Texture,T$$=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),T$i=laya.utils.VectorGraphManager;laya.utils.WordText;T$t.interface("laya.webgl.shapes.IShape"),T$t.interface("laya.webgl.submit.ISubmit"),T$t.interface("laya.webgl.text.ICharSegment"),T$t.interface("laya.webgl.canvas.save.ISaveData"),T$t.interface("laya.webgl.resource.IMergeAtlasBitmap"),T$t.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var T$f=function(){function T$n(){}T$P(T$n,"laya.filters.webgl.FilterActionGL");var T$C=T$n.prototype;return T$t.imps(T$C,{"laya.filters.IFilterActionGL":!0}),T$C.setValue=function(T$n){},T$C.setValueMix=function(T$n){},T$C.apply3d=function(T$n,T$C,T$_,T$E,T$y){return null;},T$C.apply=function(T$n){return null;},T$E(0,T$C,"typeMix",function(){return 0;}),T$n;}(),T$e=function(){function T$n(){}return T$P(T$n,"laya.webgl.shader.ShaderValue"),T$n;}(),T$G=function(){var T$E,T$y;function T$n(T$n,T$C,T$_){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new T$y(),void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0),this._cells=null,this._rowInfo=null,this._init(T$n,T$C),this._atlasID=T$_;}T$P(T$n,"laya.webgl.atlas.AtlasGrid");var T$C=T$n.prototype;return T$C.getAltasID=function(){return this._atlasID;},T$C.setAltasID=function(T$n){0<=T$n&&(this._atlasID=T$n);},T$C.addTex=function(T$n,T$C,T$_){var T$E=this._get(T$C,T$_);return 0==T$E.ret||(this._fill(T$E.x,T$E.y,T$C,T$_,T$n),this._texCount++),T$E;},T$C._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null);},T$C._init=function(T$n,T$C){if(this._width=T$n,this._height=T$C,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=T$p(this._height);for(var T$_=0;T$_<this._height;T$_++)this._rowInfo[T$_]=new T$E();return this._clear(),!0;},T$C._get=function(T$n,T$C){var T$_=new T$u();if(T$n>=this._failSize.width&&T$C>=this._failSize.height)return T$_;for(var T$E=-1,T$y=-1,T$p=this._width,T$c=this._height,T$l=this._cells,T$W=0;T$W<T$c;T$W++)if(!(this._rowInfo[T$W].spaceCount<T$n))for(var T$q=0;T$q<T$p;){var T$J=3*(T$W*T$p+T$q);if(0!=T$l[T$J]||T$l[1+T$J]<T$n||T$l[2+T$J]<T$C)T$q+=T$l[1+T$J];else{T$E=T$q,T$y=T$W;for(var T$j=0;T$j<T$n;T$j++)if(T$l[3*T$j+T$J+2]<T$C){T$E=-1;break;}if(!(T$E<0))return T$_.ret=!0,T$_.x=T$E,T$_.y=T$y,T$_;T$q+=T$l[1+T$J];}}return T$_;},T$C._fill=function(T$n,T$C,T$_,T$E,T$y){var T$p=this._width,T$c=this._height;this._check(T$n+T$_<=T$p&&T$C+T$E<=T$c);for(var T$l=T$C;T$l<T$E+T$C;++T$l){this._check(this._rowInfo[T$l].spaceCount>=T$_),this._rowInfo[T$l].spaceCount-=T$_;for(var T$W=0;T$W<T$_;T$W++){var T$q=3*(T$n+T$l*T$p+T$W);this._check(0==this._cells[T$q]),this._cells[T$q]=T$y,this._cells[1+T$q]=T$_,this._cells[2+T$q]=T$E;}}if(0<T$n)for(T$l=0;T$l<T$E;++T$l){var T$J=0;for(T$W=T$n-1;0<=T$W&&0==this._cells[3*((T$C+T$l)*T$p+T$W)];--T$W,++T$J);for(T$W=T$J;0<T$W;--T$W)this._cells[3*((T$C+T$l)*T$p+T$n-T$W)+1]=T$W,this._check(0<T$W);}if(0<T$C)for(T$W=T$n;T$W<T$n+T$_;++T$W){for(T$J=0,T$l=T$C-1;0<=T$l&&0==this._cells[3*(T$W+T$l*T$p)];--T$l,T$J++);for(T$l=T$J;0<T$l;--T$l)this._cells[3*(T$W+(T$C-T$l)*T$p)+2]=T$l,this._check(0<T$l);}},T$C._check=function(T$n){0==T$n&&console.log("xtexMerger 错误啦");},T$C._clear=function(){for(var T$n=this._texCount=0;T$n<this._height;T$n++)this._rowInfo[T$n].spaceCount=this._width;for(var T$C=0;T$C<this._height;T$C++)for(var T$_=0;T$_<this._width;T$_++){var T$E=3*(T$C*this._width+T$_);this._cells[T$E]=0,this._cells[1+T$E]=this._width-T$_,this._cells[2+T$E]=this._width-T$C;}this._failSize.width=this._width+1,this._failSize.height=this._height+1;},T$n.__init$=function(){T$E=function(){function T$n(){this.spaceCount=0;}return T$P(T$n,""),T$n;}(),T$y=function(){function T$n(){this.width=0,this.height=0;}return T$P(T$n,""),T$n;}();},T$n;}(),T$F=function(){function T$d(T$n,T$C,T$_,T$E){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=T$n,this._height=T$C,this._gridSize=T$_,this._maxAtlaserCount=T$E,this._gridNumX=T$n/T$_,this._gridNumY=T$C/T$_,this._curAtlasIndex=0,this._atlaserArray=[];}T$P(T$d,"laya.webgl.atlas.AtlasResourceManager");var T$n=T$d.prototype;return T$n.setAtlasParam=function(T$n,T$C,T$_,T$E){if(1==this._setAtlasParam)return T$d._sid_=0,this._width=T$n,this._height=T$C,this._gridSize=T$_,this._maxAtlaserCount=T$E,this._gridNumX=T$n/T$_,this._gridNumY=T$C/T$_,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1;},T$n.pushData=function(T$n){var T$C,T$_=T$n.bitmap,T$E=-1,T$y=null,T$p=0,T$c=0;for(T$p=0,T$C=this._atlaserArray.length;T$p<T$C&&(T$c=(this._curAtlasIndex+T$p)%T$C,-1==(T$E=(T$y=this._atlaserArray[T$c]).findBitmapIsExist(T$_)));T$p++);if(-1!=T$E){var T$l=T$y.InAtlasWebGLImagesOffsetValue[T$E];return T$b=T$l[0],T$r=T$l[1],T$y.addToAtlas(T$n,T$b,T$r),!0;}this._setAtlasParam=!1;for(var T$W=Math.ceil((T$n.bitmap.width+2)/this._gridSize),T$q=Math.ceil((T$n.bitmap.height+2)/this._gridSize),T$J=!1,T$j=0;T$j<2;T$j++){var T$P=this._maxAtlaserCount;for(T$p=0;T$p<T$P;T$p++){T$c=(this._curAtlasIndex+T$p)%T$P,this._atlaserArray.length-1>=T$c||this._atlaserArray.push(new T$Sn(this._gridNumX,this._gridNumY,this._width,this._height,T$d._sid_++));var T$x=this._atlaserArray[T$c],T$b=0,T$r=0,T$m=T$x.addTex(1,T$W,T$q);if(T$m.ret){T$b=T$m.x*this._gridSize+1,T$r=T$m.y*this._gridSize+1,T$_.lock=!0,T$x.addToAtlasTexture(T$_,T$b,T$r),T$x.addToAtlas(T$n,T$b,T$r),T$J=!0,this._curAtlasIndex=T$c;break;}}if(T$J)break;this._atlaserArray.push(new T$Sn(this._gridNumX,this._gridNumY,this._width,this._height,T$d._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1;}return T$J||console.log(">>>AtlasManager pushData error"),T$J;},T$n.addToAtlas=function(T$n){laya.webgl.atlas.AtlasResourceManager.instance.pushData(T$n);},T$n.garbageCollection=function(){if(!0===this._needGC){for(var T$n=this._atlaserArray.length-this._maxAtlaserCount,T$C=0;T$C<T$n;T$C++)this._atlaserArray[T$C].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+T$n),this._atlaserArray.splice(0,T$n),this._needGC=!1;}return!0;},T$n.freeAll=function(){for(var T$n=0,T$C=this._atlaserArray.length;T$n<T$C;T$n++)this._atlaserArray[T$n].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0;},T$n.getAtlaserCount=function(){return this._atlaserArray.length;},T$n.getAtlaserByIndex=function(T$n){return this._atlaserArray[T$n];},T$E(1,T$d,"instance",function(){return T$d._Instance||(T$d._Instance=new T$d(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),T$d._Instance;}),T$E(1,T$d,"enabled",function(){return T$T.atlasEnable;}),T$E(1,T$d,"atlasLimitWidth",function(){return T$d._atlasLimitWidth;},function(T$n){T$d._atlasLimitWidth=T$n;}),T$E(1,T$d,"atlasLimitHeight",function(){return T$d._atlasLimitHeight;},function(T$n){T$d._atlasLimitHeight=T$n;}),T$d._enable=function(){T$T.atlasEnable=!0;},T$d._disable=function(){T$T.atlasEnable=!1;},T$d.__init__=function(){T$d.atlasTextureWidth=2048,T$d.atlasTextureHeight=2048,T$d.maxTextureCount=6,T$d.atlasLimitWidth=512,T$d.atlasLimitHeight=512;},T$d._atlasLimitWidth=0,T$d._atlasLimitHeight=0,T$d.gridSize=16,T$d.atlasTextureWidth=0,T$d.atlasTextureHeight=0,T$d.maxTextureCount=0,T$d._atlasRestore=0,T$d.BOARDER_TYPE_NO=0,T$d.BOARDER_TYPE_RIGHT=1,T$d.BOARDER_TYPE_LEFT=2,T$d.BOARDER_TYPE_BOTTOM=4,T$d.BOARDER_TYPE_TOP=8,T$d.BOARDER_TYPE_ALL=15,T$d._sid_=0,T$d._Instance=null,T$d;}(),T$u=function(){function T$n(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0;}return T$P(T$n,"laya.webgl.atlas.MergeFillInfo"),T$n;}(),T$o=function(){function T$C(){}return T$P(T$C,"laya.webgl.canvas.BlendMode"),T$C._init_=function(T$n){T$C.fns=[T$C.BlendNormal,T$C.BlendAdd,T$C.BlendMultiply,T$C.BlendScreen,T$C.BlendOverlay,T$C.BlendLight,T$C.BlendMask,T$C.BlendDestinationOut],T$C.targetFns=[T$C.BlendNormalTarget,T$C.BlendAddTarget,T$C.BlendMultiplyTarget,T$C.BlendScreenTarget,T$C.BlendOverlayTarget,T$C.BlendLightTarget,T$C.BlendMask,T$C.BlendDestinationOut];},T$C.BlendNormal=function(T$n){T$n.blendFunc(1,771);},T$C.BlendAdd=function(T$n){T$n.blendFunc(1,772);},T$C.BlendMultiply=function(T$n){T$n.blendFunc(774,771);},T$C.BlendScreen=function(T$n){T$n.blendFunc(1,1);},T$C.BlendOverlay=function(T$n){T$n.blendFunc(1,769);},T$C.BlendLight=function(T$n){T$n.blendFunc(1,1);},T$C.BlendNormalTarget=function(T$n){T$n.blendFunc(1,771);},T$C.BlendAddTarget=function(T$n){T$n.blendFunc(1,772);},T$C.BlendMultiplyTarget=function(T$n){T$n.blendFunc(774,771);},T$C.BlendScreenTarget=function(T$n){T$n.blendFunc(1,1);},T$C.BlendOverlayTarget=function(T$n){T$n.blendFunc(1,769);},T$C.BlendLightTarget=function(T$n){T$n.blendFunc(1,1);},T$C.BlendMask=function(T$n){T$n.blendFunc(0,770);},T$C.BlendDestinationOut=function(T$n){T$n.blendFunc(0,0);},T$C.activeBlendFunction=null,T$C.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],T$C.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},T$C.NORMAL="normal",T$C.ADD="add",T$C.MULTIPLY="multiply",T$C.SCREEN="screen",T$C.LIGHT="light",T$C.OVERLAY="overlay",T$C.DESTINATIONOUT="destination-out",T$C.fns=[],T$C.targetFns=[],T$C;}(),T$Q=function(){function T$_(T$n){this._color=T$b.create("black"),this.setValue(T$n);}T$P(T$_,"laya.webgl.canvas.DrawStyle");var T$n=T$_.prototype;return T$n.setValue=function(T$n){if(T$n){if("string"==typeof T$n)return void(this._color=T$b.create(T$n));if(T$n instanceof laya.utils.Color)return void(this._color=T$n);}},T$n.reset=function(){this._color=T$b.create("black");},T$n.equal=function(T$n){return"string"==typeof T$n?this._color.strColor===T$n:T$n instanceof laya.utils.Color&&this._color.numColor===T$n.numColor;},T$n.toColorStr=function(){return this._color.strColor;},T$_.create=function(T$n){var T$C;if(T$n&&("string"==typeof T$n?T$C=T$b.create(T$n):T$n instanceof laya.utils.Color&&(T$C=T$n),T$C))return T$C._drawStyle||(T$C._drawStyle=new T$_(T$n));return laya.webgl.canvas.DrawStyle.DEFAULT;},T$c(T$_,["DEFAULT",function(){return this.DEFAULT=new T$_("#000000");}]),T$_;}(),T$I=function(){function T$n(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];T$An.mainContext;this.ib=T$Kn.create(35048),this.vb=T$Dn.create(5);}T$P(T$n,"laya.webgl.canvas.Path");var T$C=T$n.prototype;return T$C.addPoint=function(T$n,T$C){this.tempArray.push(T$n,T$C);},T$C.getEndPointX=function(){return this.tempArray[this.tempArray.length-2];},T$C.getEndPointY=function(){return this.tempArray[this.tempArray.length-1];},T$C.polygon=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c;return this.geomatrys.push(this._curGeomatry=T$c=new T$Vn(T$n,T$C,T$_,T$E,T$y,T$p)),T$E||(T$c.fill=!1),null==T$p&&(T$c.borderWidth=0),T$c;},T$C.setGeomtry=function(T$n){this.geomatrys.push(this._curGeomatry=T$n);},T$C.drawLine=function(T$n,T$C,T$_,T$E,T$y){var T$p;return this.closePath?this.geomatrys.push(this._curGeomatry=T$p=new T$Bn(T$n,T$C,T$_,T$E,T$y)):this.geomatrys.push(this._curGeomatry=T$p=new T$wn(T$n,T$C,T$_,T$E,T$y)),T$p.fill=!1,T$p;},T$C.update=function(){var T$n=this.ib._byteLength,T$C=this.geomatrys.length;this.offset=T$n;for(var T$_=this.geoStart;T$_<T$C;T$_++)this.geomatrys[T$_].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=T$C,this.count=(this.ib._byteLength-T$n)/T$rn.BYTES_PIDX;},T$C.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0;},T$C.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null;},T$n;}(),T$Z=function(){function T$l(){}T$P(T$l,"laya.webgl.canvas.save.SaveBase");var T$n=T$l.prototype;return T$t.imps(T$n,{"laya.webgl.canvas.save.ISaveData":!0}),T$n.isSaveMark=function(){return!1;},T$n.restore=function(T$n){this._dataObj[this._valueName]=this._value,(T$l._cache[T$l._cache._length++]=this)._newSubmit&&(T$n._curSubmit=T$pn.RENDERBASE,T$n._renderKey=0);},T$l._createArray=function(){var T$n=[];return T$n._length=0,T$n;},T$l._init=function(){var T$n=T$l._namemap={};return T$n[1]="ALPHA",T$n[2]="fillStyle",T$n[8]="font",T$n[256]="lineWidth",T$n[512]="strokeStyle",T$n[8192]="_mergeID",T$n[1024]=T$n[2048]=T$n[4096]=[],T$n[16384]="textBaseline",T$n[32768]="textAlign",T$n[65536]="_nBlendType",T$n[1048576]="shader",T$n[2097152]="filters",T$n;},T$l.save=function(T$n,T$C,T$_,T$E){if((T$n._saveMark._saveuse&T$C)!==T$C){T$n._saveMark._saveuse|=T$C;var T$y=T$l._cache,T$p=0<T$y._length?T$y[--T$y._length]:new T$l();T$p._value=T$_[T$p._valueName=T$l._namemap[T$C]],T$p._dataObj=T$_,T$p._newSubmit=T$E;var T$c=T$n._save;T$c[T$c._length++]=T$p;}},T$l._cache=laya.webgl.canvas.save.SaveBase._createArray(),T$l._namemap=T$l._init(),T$l;}(),T$L=function(){function T$p(){this._clipRect=new T$S();}T$P(T$p,"laya.webgl.canvas.save.SaveClipRect");var T$n=T$p.prototype;return T$t.imps(T$n,{"laya.webgl.canvas.save.ISaveData":!0}),T$n.isSaveMark=function(){return!1;},T$n.restore=function(T$n){T$n._clipRect=this._clipSaveRect,(T$p._cache[T$p._cache._length++]=this)._submitScissor.submitLength=T$n._submits._length-this._submitScissor.submitIndex,T$n._curSubmit=T$pn.RENDERBASE,T$n._renderKey=0;},T$p.save=function(T$n,T$C){if(131072!=(131072&T$n._saveMark._saveuse)){T$n._saveMark._saveuse|=131072;var T$_=T$p._cache,T$E=0<T$_._length?T$_[--T$_._length]:new T$p();T$E._clipSaveRect=T$n._clipRect,T$n._clipRect=T$E._clipRect.copyFrom(T$n._clipRect),T$E._submitScissor=T$C;var T$y=T$n._save;T$y[T$y._length++]=T$E;}},T$c(T$p,["_cache",function(){return this._cache=T$Z._createArray();}]),T$p;}(),T$h=function(){function T$x(){this._contextX=0,this._contextY=0,this._clipRect=new T$S(),this._rect=new T$S(),this._matrix=new T$s();}T$P(T$x,"laya.webgl.canvas.save.SaveClipRectStencil");var T$n=T$x.prototype;return T$t.imps(T$n,{"laya.webgl.canvas.save.ISaveData":!0}),T$n.isSaveMark=function(){return!1;},T$n.restore=function(T$n){T$Jn.restore(T$n,this._rect,this._saveMatrix,this._contextX,this._contextY),T$n._clipRect=this._clipSaveRect,T$n._curMat=this._saveMatrix,T$n._x=this._contextX,T$n._y=this._contextY,T$x._cache[T$x._cache._length++]=this,T$n._curSubmit=T$pn.RENDERBASE;},T$x.save=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q){if(262144!=(262144&T$n._saveMark._saveuse)){T$n._saveMark._saveuse|=262144;var T$J=T$x._cache,T$j=0<T$J._length?T$J[--T$J._length]:new T$x();T$j._clipSaveRect=T$n._clipRect,T$j._clipRect.setTo(T$c,T$l,T$W,T$q),T$n._clipRect=T$j._clipRect,T$j._rect.x=T$_,T$j._rect.y=T$E,T$j._rect.width=T$y,T$j._rect.height=T$p,T$j._contextX=T$n._x,T$j._contextY=T$n._y,T$j._saveMatrix=T$n._curMat,T$n._curMat.copyTo(T$j._matrix),T$n._curMat=T$j._matrix,T$j._submitStencil=T$C;var T$P=T$n._save;T$P[T$P._length++]=T$j;}},T$c(T$x,["_cache",function(){return this._cache=T$Z._createArray();}]),T$x;}(),T$v=function(){function T$E(){this._saveuse=0;}T$P(T$E,"laya.webgl.canvas.save.SaveMark");var T$n=T$E.prototype;return T$t.imps(T$n,{"laya.webgl.canvas.save.ISaveData":!0}),T$n.isSaveMark=function(){return!0;},T$n.restore=function(T$n){T$n._saveMark=this._preSaveMark,T$E._no[T$E._no._length++]=this;},T$E.Create=function(T$n){var T$C=T$E._no,T$_=0<T$C._length?T$C[--T$C._length]:new T$E();return T$_._saveuse=0,T$_._preSaveMark=T$n._saveMark,T$n._saveMark=T$_;},T$c(T$E,["_no",function(){return this._no=T$Z._createArray();}]),T$E;}(),T$R=function(){function T$p(){this._matrix=new T$s();}T$P(T$p,"laya.webgl.canvas.save.SaveTransform");var T$n=T$p.prototype;return T$t.imps(T$n,{"laya.webgl.canvas.save.ISaveData":!0}),T$n.isSaveMark=function(){return!1;},T$n.restore=function(T$n){T$n._curMat=this._savematrix,T$p._no[T$p._no._length++]=this;},T$p.save=function(T$n){var T$C=T$n._saveMark;if(2048!=(2048&T$C._saveuse)){T$C._saveuse|=2048;var T$_=T$p._no,T$E=0<T$_._length?T$_[--T$_._length]:new T$p();T$E._savematrix=T$n._curMat,T$n._curMat=T$n._curMat.copyTo(T$E._matrix);var T$y=T$n._save;T$y[T$y._length++]=T$E;}},T$c(T$p,["_no",function(){return this._no=T$Z._createArray();}]),T$p;}(),T$z=function(){function T$y(){}T$P(T$y,"laya.webgl.canvas.save.SaveTranslate");var T$n=T$y.prototype;return T$t.imps(T$n,{"laya.webgl.canvas.save.ISaveData":!0}),T$n.isSaveMark=function(){return!1;},T$n.restore=function(T$n){T$n._curMat;T$n._x=this._x,T$n._y=this._y,T$y._no[T$y._no._length++]=this;},T$y.save=function(T$n){var T$C=T$y._no,T$_=0<T$C._length?T$C[--T$C._length]:new T$y();T$_._x=T$n._x,T$_._y=T$n._y;var T$E=T$n._save;T$E[T$E._length++]=T$_;},T$c(T$y,["_no",function(){return this._no=T$Z._createArray();}]),T$y;}(),T$U=function(){function T$n(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new T$S();}T$P(T$n,"laya.webgl.resource.RenderTargetMAX");var T$C=T$n.prototype;return T$C.setSP=function(T$n){this._sp=T$n;},T$C.size=function(T$n,T$C){var T$_=this;this._width!==T$n||this._height!==T$C?(this.repaint=!0,this._width=T$n,this._height=T$C,this.target?this.target.size(T$n,T$C):this.target=T$in.create(T$n,T$C),this.target.hasListener("recovered")||this.target.on("recovered",this,function(T$n){T$t.timer.callLater(T$_._sp,T$_._sp.repaint);})):this.target.size(T$n,T$C);},T$C._flushToTarget=function(T$n,T$C){if(!T$C._destroy){var T$_=T$an.worldScissorTest,T$E=T$an.worldClipRect;T$an.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,T$an.worldScissorTest=!1,T$An.mainContext.disable(3089);var T$y=T$an.worldAlpha,T$p=T$an.worldMatrix4,T$c=T$an.worldMatrix,T$l=T$an.worldFilters,T$W=T$an.worldShaderDefines;if(T$an.worldMatrix=T$s.EMPTY,T$an.restoreTempArray(),T$an.worldMatrix4=T$an.TEMPMAT4_ARRAY,T$an.worldAlpha=1,T$an.worldFilters=null,T$an.worldShaderDefines=null,T$$n.activeShader=null,T$C.start(),T$T.showCanvasMark?T$C.clear(0,1,0,.3):T$C.clear(0,0,0,0),T$n.flush(),T$C.end(),T$$n.activeShader=null,T$an.worldAlpha=T$y,T$an.worldMatrix4=T$p,T$an.worldMatrix=T$c,T$an.worldFilters=T$l,T$an.worldShaderDefines=T$W,T$an.worldScissorTest=T$_){var T$q=T$an.height-T$E.y-T$E.height;T$An.mainContext.scissor(T$E.x,T$q,T$E.width,T$E.height),T$An.mainContext.enable(3089);}T$an.worldClipRect=T$E;}},T$C.flush=function(T$n){this.repaint&&(this._flushToTarget(T$n,this.target),this.repaint=!1);},T$C.drawTo=function(T$n,T$C,T$_,T$E,T$y){T$n.drawTexture(this.target.getTexture(),T$C,T$_,T$E,T$y,0,0);},T$C.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null);},T$n;}(),T$K=function(){function T$n(){this.ALPHA=1,this.shaderType=0,this.defines=new T$Mn();}return T$P(T$n,"laya.webgl.shader.d2.Shader2D"),T$n.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null;},T$n.__init__=function(){var T$n,T$C;T$vn.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),T$vn.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),T$vn.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),T$vn.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),T$vn.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),T$vn.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),T$vn.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),T$vn.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),T$n="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",T$C='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',T$vn.preCompile2D(0,1,T$n,T$C,null),T$n="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",T$C='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',T$vn.preCompile2D(0,2,T$n,T$C,null),T$n="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",T$C="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",T$vn.preCompile2D(0,4,T$n,T$C,null),T$n="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",T$C='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',T$vn.preCompile2D(0,256,T$n,T$C,null),T$n="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",T$C="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",T$vn.preCompile2D(0,512,T$n,T$C,null);},T$n;}(),T$D=function(){function T$C(T$n,T$C,T$_){this._value=0,this._name2int=T$n,this._int2name=T$C,this._int2nameMap=T$_;}T$P(T$C,"laya.webgl.shader.ShaderDefines");var T$n=T$C.prototype;return T$n.add=function(T$n){return"string"==typeof T$n&&(T$n=this._name2int[T$n]),this._value|=T$n,this._value;},T$n.addInt=function(T$n){return this._value|=T$n,this._value;},T$n.remove=function(T$n){return"string"==typeof T$n&&(T$n=this._name2int[T$n]),this._value&=~T$n,this._value;},T$n.isDefine=function(T$n){return(this._value&T$n)===T$n;},T$n.getValue=function(){return this._value;},T$n.setValue=function(T$n){this._value=T$n;},T$n.toNameDic=function(){var T$n=this._int2nameMap[this._value];return T$n||T$C._toText(this._value,this._int2name,this._int2nameMap);},T$C._reg=function(T$n,T$C,T$_,T$E){T$E[T$_[T$n]=T$C]=T$n;},T$C._toText=function(T$n,T$C,T$_){var T$E=T$_[T$n];if(T$E)return T$E;for(var T$y={},T$p=1,T$c=0;T$c<32&&!(T$n<(T$p=1<<T$c));T$c++)if(T$n&T$p){var T$l=T$C[T$p];T$l&&(T$y[T$l]="");}return T$_[T$n]=T$y;},T$C._toInt=function(T$n,T$C){for(var T$_=T$n.split("."),T$E=0,T$y=0,T$p=T$_.length;T$y<T$p;T$y++){var T$c=T$C[T$_[T$y]];if(!T$c)throw new Error("Defines to int err:"+T$n+"/"+T$_[T$y]);T$E|=T$c;}return T$E;},T$C;}(),T$nn=function(){function T$c(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new T$s();}T$P(T$c,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var T$n=T$c.prototype;return T$n.init=function(T$n,T$C,T$_){if(T$C)this._vs=T$C;else{this._vs=[];var T$E=T$n.width,T$y=T$n.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(T$E,0,1,0,1,1,1,1),this._vs.push(T$E,T$y,1,1,1,1,1,1),this._vs.push(0,T$y,0,1,1,1,1,1);}T$_?this._ps=T$_:(T$c._defaultPS||(T$c._defaultPS=[]).push(0,1,3,3,1,2),this._ps=T$c._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=T$n;},T$n.init2=function(T$n,T$C,T$_,T$E,T$y){this.transform&&(this.transform=null),T$_?this._ps=T$_:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=T$E,this._uvs=T$y,this.mEleNum=this._ps.length,this.mTexture=T$n,(T$d.isConchNode||T$d.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs));},T$n._initMyData=function(){var T$n=0,T$C=0,T$_=4*this._verticles.length;this._vs=T$c._tempVS;var T$E=!1;if(T$d.isConchNode||T$d.isConchApp?(this._vs.length=T$_,T$E=!0):this._vs.length<T$_&&(this._vs.length=T$_,T$E=!0),T$c._tVSLen=T$_,T$E)for(;T$n<T$_;)this._vs[T$n]=this._verticles[T$C],this._vs[T$n+1]=this._verticles[T$C+1],this._vs[T$n+2]=this._uvs[T$C],this._vs[T$n+3]=this._uvs[T$C+1],this._vs[T$n+4]=1,this._vs[T$n+5]=1,this._vs[T$n+6]=1,this._vs[T$n+7]=1,T$n+=8,T$C+=2;else for(;T$n<T$_;)this._vs[T$n]=this._verticles[T$C],this._vs[T$n+1]=this._verticles[T$C+1],this._vs[T$n+2]=this._uvs[T$C],this._vs[T$n+3]=this._uvs[T$C+1],T$n+=8,T$C+=2;},T$n.getData2=function(T$n,T$C,T$_){var T$E;this.mVBBuffer=T$n,this.mIBBuffer=T$C,this._initMyData(),T$n.appendEx2(this._vs,Float32Array,T$c._tVSLen,4),this._indexStart=T$C._byteLength,(T$E=T$c._tempIB).length<this._ps.length&&(T$E.length=this._ps.length);for(var T$y=0,T$p=this._ps.length;T$y<T$p;T$y++)T$E[T$y]=this._ps[T$y]+T$_;T$C.appendEx2(T$E,Uint16Array,this._ps.length,2);},T$n.getData=function(T$n,T$C,T$_){if(this.mVBBuffer=T$n,this.mIBBuffer=T$C,T$n.append(this.mVBData),this._indexStart=T$C._byteLength,this.mIBData.start!=T$_){for(var T$E=0,T$y=this._ps.length;T$E<T$y;T$E++)this.mIBData[T$E]=this._ps[T$E]+T$_;this.mIBData.start=T$_;}T$C.append(this.mIBData);},T$n.render=function(T$n,T$C,T$_){if(T$d.isWebGL&&this.mTexture){T$n._renderKey=0,T$n._shader2D.glTexture=null,T$Cn.getInstance().addSkinMesh(this);var T$E=T$pn.createShape(T$n,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,T$Yn.create(512,0));this.transform||(this.transform=T$s.EMPTY),this.transform.translate(T$C,T$_),T$s.mul(this.transform,T$n._curMat,this._tempMatrix),this.transform.translate(-T$C,-T$_);var T$y=T$E.shaderValue,T$p=T$y.u_mmat2||T$an.getMatrArray();T$an.mat2MatArray(this._tempMatrix,T$p),T$y.textureHost=this.mTexture,T$y.offsetX=0,T$y.offsetY=0,T$y.u_mmat2=T$p,T$y.ALPHA=T$n._shader2D.ALPHA,T$n._submits[T$n._submits._length++]=T$E;}else T$d.isConchApp&&this.mTexture&&(this.transform||(this.transform=T$s.EMPTY),T$n.setSkinMesh&&T$n.setSkinMesh(T$C,T$_,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform));},T$c._tempVS=[],T$c._tempIB=[],T$c._defaultPS=null,T$c._tVSLen=0,T$c;}(),T$Cn=function(){function T$n(){this.ib=null,this.vb=null;T$An.mainContext;this.ib=T$Kn.create(35048),this.vb=T$Dn.create(8);}T$P(T$n,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var T$C=T$n.prototype;return T$C.addSkinMesh=function(T$n){T$n.getData2(this.vb,this.ib,this.vb._byteLength/32);},T$C.reset=function(){this.vb.clear(),this.ib.clear();},T$n.getInstance=function(){return T$n.instance=T$n.instance||new T$n();},T$n.instance=null,T$n;}(),T$_n=function(){function T$n(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===T$W&&(T$W=0),this.x=T$n,this.y=T$C,this.width=T$_,this.height=T$E,this.edges=T$y,this.color=T$p,this.borderWidth=T$c,this.borderColor=T$l;}T$P(T$n,"laya.webgl.shapes.BasePoly");var T$C=T$n.prototype;return T$t.imps(T$C,{"laya.webgl.shapes.IShape":!0}),T$C.getData=function(T$n,T$C,T$_){},T$C.rebuild=function(T$n){},T$C.setMatrix=function(T$n){},T$C.needUpdate=function(T$n){return!0;},T$C.sector=function(T$n,T$C,T$_){var T$E=this.x,T$y=this.y,T$p=this.edges,T$c=(this.r1-this.r0)/T$p,T$l=this.width,T$W=this.height,T$q=this.color,T$J=(T$q>>16&255)/255,T$j=(T$q>>8&255)/255,T$P=(255&T$q)/255;T$n.push(T$E,T$y,T$J,T$j,T$P);for(var T$x=0;T$x<T$p+1;T$x++)T$n.push(T$E+Math.sin(T$c*T$x+this.r0)*T$l,T$y+Math.cos(T$c*T$x+this.r0)*T$W),T$n.push(T$J,T$j,T$P);for(T$x=0;T$x<T$p;T$x++)T$C.push(T$_,T$_+T$x+1,T$_+T$x+2);},T$C.createLine2=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c,T$l,T$W,T$q,T$J,T$j,T$P,T$x,T$b,T$r,T$m,T$d,T$a,T$O,T$A,T$k,T$t,T$T,T$Y,T$s,T$N=T$n.concat(),T$S=T$y,T$M=this.borderColor,T$w=(T$M>>16&255)/255,T$B=(T$M>>8&255)/255,T$V=(255&T$M)/255,T$g=T$N.length/2,T$H=T$E,T$X=T$_/2;T$W=T$N[0],T$q=T$N[1],T$r=T$W-(T$J=T$N[2]),T$b=(T$b=-(T$q-(T$j=T$N[3])))/(T$s=Math.sqrt(T$b*T$b+T$r*T$r))*T$X,T$r=T$r/T$s*T$X,T$S.push(T$W-T$b+this.x,T$q-T$r+this.y,T$w,T$B,T$V,T$W+T$b+this.x,T$q+T$r+this.y,T$w,T$B,T$V);for(var T$$=1;T$$<T$g-1;T$$++)T$W=T$N[2*(T$$-1)],T$q=T$N[2*(T$$-1)+1],T$J=T$N[2*T$$],T$j=T$N[2*T$$+1],T$P=T$N[2*(T$$+1)],T$x=T$N[2*(T$$+1)+1],T$r=T$W-T$J,T$d=T$J-T$P,T$A=(-(T$b=(T$b=-(T$q-T$j))/(T$s=Math.sqrt(T$b*T$b+T$r*T$r))*T$X)+T$W)*(-(T$r=T$r/T$s*T$X)+T$j)-(-T$b+T$J)*(-T$r+T$q),T$T=(-(T$m=(T$m=-(T$j-T$x))/(T$s=Math.sqrt(T$m*T$m+T$d*T$d))*T$X)+T$P)*(-(T$d=T$d/T$s*T$X)+T$j)-(-T$m+T$J)*(-T$d+T$x),T$Y=(T$a=-T$r+T$q-(-T$r+T$j))*(T$t=-T$m+T$J-(-T$m+T$P))-(T$k=-T$d+T$x-(-T$d+T$j))*(T$O=-T$b+T$J-(-T$b+T$W)),Math.abs(T$Y)<.1?(T$Y+=10.1,T$S.push(T$J-T$b+this.x,T$j-T$r+this.y,T$w,T$B,T$V,T$J+T$b+this.x,T$j+T$r+this.y,T$w,T$B,T$V)):(((T$c=(T$O*T$T-T$t*T$A)/T$Y)-T$J)*(T$c-T$J)+((T$l=(T$k*T$A-T$a*T$T)/T$Y)-T$j)+(T$l-T$j),T$S.push(T$c+this.x,T$l+this.y,T$w,T$B,T$V,T$J-(T$c-T$J)+this.x,T$j-(T$l-T$j)+this.y,T$w,T$B,T$V));T$W=T$N[T$N.length-4],T$q=T$N[T$N.length-3],T$r=T$W-(T$J=T$N[T$N.length-2]),T$b=(T$b=-(T$q-(T$j=T$N[T$N.length-1])))/(T$s=Math.sqrt(T$b*T$b+T$r*T$r))*T$X,T$r=T$r/T$s*T$X,T$S.push(T$J-T$b+this.x,T$j-T$r+this.y,T$w,T$B,T$V,T$J+T$b+this.x,T$j+T$r+this.y,T$w,T$B,T$V);var T$i=T$p;for(T$$=1;T$$<T$i;T$$++)T$C.push(T$H+2*(T$$-1),T$H+2*(T$$-1)+1,T$H+2*T$$+1,T$H+2*T$$+1,T$H+2*T$$,T$H+2*(T$$-1));return T$S;},T$C.createLine=function(T$n,T$C,T$_,T$E){var T$y=T$n.concat(),T$p=T$n,T$c=this.borderColor,T$l=(T$c>>16&255)/255,T$W=(T$c>>8&255)/255,T$q=(255&T$c)/255;T$y.splice(0,5);var T$J,T$j,T$P,T$x,T$b,T$r,T$m,T$d,T$a,T$O,T$A,T$k,T$t,T$T,T$Y,T$s,T$N,T$S,T$M,T$w,T$B=T$y.length/5,T$V=T$E,T$g=T$_/2;T$P=T$y[0],T$x=T$y[1],T$O=T$P-(T$b=T$y[5]),T$a=(T$a=-(T$x-(T$r=T$y[6])))/(T$w=Math.sqrt(T$a*T$a+T$O*T$O))*T$g,T$O=T$O/T$w*T$g,T$p.push(T$P-T$a,T$x-T$O,T$l,T$W,T$q,T$P+T$a,T$x+T$O,T$l,T$W,T$q);for(var T$H=1;T$H<T$B-1;T$H++)T$P=T$y[5*(T$H-1)],T$x=T$y[5*(T$H-1)+1],T$b=T$y[5*T$H],T$r=T$y[5*T$H+1],T$m=T$y[5*(T$H+1)],T$d=T$y[5*(T$H+1)+1],T$O=T$P-T$b,T$k=T$b-T$m,T$Y=(-(T$a=(T$a=-(T$x-T$r))/(T$w=Math.sqrt(T$a*T$a+T$O*T$O))*T$g)+T$P)*(-(T$O=T$O/T$w*T$g)+T$r)-(-T$a+T$b)*(-T$O+T$x),T$S=(-(T$A=(T$A=-(T$r-T$d))/(T$w=Math.sqrt(T$A*T$A+T$k*T$k))*T$g)+T$m)*(-(T$k=T$k/T$w*T$g)+T$r)-(-T$A+T$b)*(-T$k+T$d),T$M=(T$t=-T$O+T$x-(-T$O+T$r))*(T$N=-T$A+T$b-(-T$A+T$m))-(T$s=-T$k+T$d-(-T$k+T$r))*(T$T=-T$a+T$b-(-T$a+T$P)),Math.abs(T$M)<.1?(T$M+=10.1,T$p.push(T$b-T$a,T$r-T$O,T$l,T$W,T$q,T$b+T$a,T$r+T$O,T$l,T$W,T$q)):(((T$J=(T$T*T$S-T$N*T$Y)/T$M)-T$b)*(T$J-T$b)+((T$j=(T$s*T$Y-T$t*T$S)/T$M)-T$r)+(T$j-T$r),T$p.push(T$J,T$j,T$l,T$W,T$q,T$b-(T$J-T$b),T$r-(T$j-T$r),T$l,T$W,T$q));T$P=T$y[T$y.length-10],T$x=T$y[T$y.length-9],T$O=T$P-(T$b=T$y[T$y.length-5]),T$a=(T$a=-(T$x-(T$r=T$y[T$y.length-4])))/(T$w=Math.sqrt(T$a*T$a+T$O*T$O))*T$g,T$O=T$O/T$w*T$g,T$p.push(T$b-T$a,T$r-T$O,T$l,T$W,T$q,T$b+T$a,T$r+T$O,T$l,T$W,T$q);var T$X=this.edges+1;for(T$H=1;T$H<T$X;T$H++)T$C.push(T$V+2*(T$H-1),T$V+2*(T$H-1)+1,T$V+2*T$H+1,T$V+2*T$H+1,T$V+2*T$H,T$V+2*(T$H-1));return T$p;},T$C.createLoopLine=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c=T$n.concat(),T$l=T$y||T$n,T$W=this.borderColor,T$q=(T$W>>16&255)/255,T$J=(T$W>>8&255)/255,T$j=(255&T$W)/255;T$c.splice(0,5);var T$P=[T$c[0],T$c[1]],T$x=[T$c[T$c.length-5],T$c[T$c.length-4]],T$b=T$x[0]+.5*(T$P[0]-T$x[0]),T$r=T$x[1]+.5*(T$P[1]-T$x[1]);T$c.unshift(T$b,T$r,0,0,0),T$c.push(T$b,T$r,0,0,0);var T$m,T$d,T$a,T$O,T$A,T$k,T$t,T$T,T$Y,T$s,T$N,T$S,T$M,T$w,T$B,T$V,T$g,T$H,T$X,T$$,T$i=T$c.length/5,T$f=T$E,T$e=T$_/2;T$a=T$c[0],T$O=T$c[1],T$s=T$a-(T$A=T$c[5]),T$Y=(T$Y=-(T$O-(T$k=T$c[6])))/(T$$=Math.sqrt(T$Y*T$Y+T$s*T$s))*T$e,T$s=T$s/T$$*T$e,T$l.push(T$a-T$Y,T$O-T$s,T$q,T$J,T$j,T$a+T$Y,T$O+T$s,T$q,T$J,T$j);for(var T$G=1;T$G<T$i-1;T$G++)T$a=T$c[5*(T$G-1)],T$O=T$c[5*(T$G-1)+1],T$A=T$c[5*T$G],T$k=T$c[5*T$G+1],T$t=T$c[5*(T$G+1)],T$T=T$c[5*(T$G+1)+1],T$s=T$a-T$A,T$S=T$A-T$t,T$B=(-(T$Y=(T$Y=-(T$O-T$k))/(T$$=Math.sqrt(T$Y*T$Y+T$s*T$s))*T$e)+T$a)*(-(T$s=T$s/T$$*T$e)+T$k)-(-T$Y+T$A)*(-T$s+T$O),T$H=(-(T$N=(T$N=-(T$k-T$T))/(T$$=Math.sqrt(T$N*T$N+T$S*T$S))*T$e)+T$t)*(-(T$S=T$S/T$$*T$e)+T$k)-(-T$N+T$A)*(-T$S+T$T),T$X=(T$M=-T$s+T$O-(-T$s+T$k))*(T$g=-T$N+T$A-(-T$N+T$t))-(T$V=-T$S+T$T-(-T$S+T$k))*(T$w=-T$Y+T$A-(-T$Y+T$a)),Math.abs(T$X)<.1?(T$X+=10.1,T$l.push(T$A-T$Y,T$k-T$s,T$q,T$J,T$j,T$A+T$Y,T$k+T$s,T$q,T$J,T$j)):(((T$m=(T$w*T$H-T$g*T$B)/T$X)-T$A)*(T$m-T$A)+((T$d=(T$V*T$B-T$M*T$H)/T$X)-T$k)+(T$d-T$k),T$l.push(T$m,T$d,T$q,T$J,T$j,T$A-(T$m-T$A),T$k-(T$d-T$k),T$q,T$J,T$j));T$p&&(T$C=T$p);var T$F=this.edges+1;for(T$G=1;T$G<T$F;T$G++)T$C.push(T$f+2*(T$G-1),T$f+2*(T$G-1)+1,T$f+2*T$G+1,T$f+2*T$G+1,T$f+2*T$G,T$f+2*(T$G-1));return T$C.push(T$f+2*(T$G-1),T$f+2*(T$G-1)+1,T$f+1,T$f+1,T$f,T$f+2*(T$G-1)),T$l;},T$n;}(),T$En=function(){function T$r(){}return T$P(T$r,"laya.webgl.shapes.Earcut"),T$r.earcut=function(T$n,T$C,T$_){T$_=T$_||2;var T$E,T$y,T$p,T$c,T$l,T$W,T$q,T$J=T$C&&T$C.length,T$j=T$J?T$C[0]*T$_:T$n.length,T$P=T$r.linkedList(T$n,0,T$j,T$_,!0),T$x=[];if(!T$P)return T$x;if(T$J&&(T$P=T$r.eliminateHoles(T$n,T$C,T$P,T$_)),T$n.length>80*T$_){T$E=T$p=T$n[0],T$y=T$c=T$n[1];for(var T$b=T$_;T$b<T$j;T$b+=T$_)(T$l=T$n[T$b])<T$E&&(T$E=T$l),(T$W=T$n[T$b+1])<T$y&&(T$y=T$W),T$p<T$l&&(T$p=T$l),T$c<T$W&&(T$c=T$W);T$q=0!==(T$q=Math.max(T$p-T$E,T$c-T$y))?1/T$q:0;}return T$r.earcutLinked(T$P,T$x,T$_,T$E,T$y,T$q),T$x;},T$r.linkedList=function(T$n,T$C,T$_,T$E,T$y){var T$p,T$c;if(T$y===0<T$r.signedArea(T$n,T$C,T$_,T$E))for(T$p=T$C;T$p<T$_;T$p+=T$E)T$c=T$r.insertNode(T$p,T$n[T$p],T$n[T$p+1],T$c);else for(T$p=T$_-T$E;T$C<=T$p;T$p-=T$E)T$c=T$r.insertNode(T$p,T$n[T$p],T$n[T$p+1],T$c);return T$c&&T$r.equals(T$c,T$c.next)&&(T$r.removeNode(T$c),T$c=T$c.next),T$c;},T$r.filterPoints=function(T$n,T$C){if(!T$n)return T$n;T$C||(T$C=T$n);var T$_,T$E=T$n;do{if(T$_=!1,T$E.steiner||!T$r.equals(T$E,T$E.next)&&0!==T$r.area(T$E.prev,T$E,T$E.next))T$E=T$E.next;else{if(T$r.removeNode(T$E),(T$E=T$C=T$E.prev)===T$E.next)break;T$_=!0;}}while(T$_||T$E!==T$C);return T$C;},T$r.earcutLinked=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){if(T$n){!T$c&&T$p&&T$r.indexCurve(T$n,T$E,T$y,T$p);for(var T$l,T$W,T$q=T$n;T$n.prev!==T$n.next;)if(T$l=T$n.prev,T$W=T$n.next,T$p?T$r.isEarHashed(T$n,T$E,T$y,T$p):T$r.isEar(T$n))T$C.push(T$l.i/T$_),T$C.push(T$n.i/T$_),T$C.push(T$W.i/T$_),T$r.removeNode(T$n),T$n=T$W.next,T$q=T$W.next;else if((T$n=T$W)===T$q){T$c?1===T$c?(T$n=T$r.cureLocalIntersections(T$n,T$C,T$_),T$r.earcutLinked(T$n,T$C,T$_,T$E,T$y,T$p,2)):2===T$c&&T$r.splitEarcut(T$n,T$C,T$_,T$E,T$y,T$p):T$r.earcutLinked(T$r.filterPoints(T$n,null),T$C,T$_,T$E,T$y,T$p,1);break;}}},T$r.isEar=function(T$n){var T$C=T$n.prev,T$_=T$n,T$E=T$n.next;if(0<=T$r.area(T$C,T$_,T$E))return!1;for(var T$y=T$n.next.next;T$y!==T$n.prev;){if(T$r.pointInTriangle(T$C.x,T$C.y,T$_.x,T$_.y,T$E.x,T$E.y,T$y.x,T$y.y)&&0<=T$r.area(T$y.prev,T$y,T$y.next))return!1;T$y=T$y.next;}return!0;},T$r.isEarHashed=function(T$n,T$C,T$_,T$E){var T$y=T$n.prev,T$p=T$n,T$c=T$n.next;if(0<=T$r.area(T$y,T$p,T$c))return!1;for(var T$l=T$y.x<T$p.x?T$y.x<T$c.x?T$y.x:T$c.x:T$p.x<T$c.x?T$p.x:T$c.x,T$W=T$y.y<T$p.y?T$y.y<T$c.y?T$y.y:T$c.y:T$p.y<T$c.y?T$p.y:T$c.y,T$q=T$y.x>T$p.x?T$y.x>T$c.x?T$y.x:T$c.x:T$p.x>T$c.x?T$p.x:T$c.x,T$J=T$y.y>T$p.y?T$y.y>T$c.y?T$y.y:T$c.y:T$p.y>T$c.y?T$p.y:T$c.y,T$j=T$r.zOrder(T$l,T$W,T$C,T$_,T$E),T$P=T$r.zOrder(T$q,T$J,T$C,T$_,T$E),T$x=T$n.nextZ;T$x&&T$x.z<=T$P;){if(T$x!==T$n.prev&&T$x!==T$n.next&&T$r.pointInTriangle(T$y.x,T$y.y,T$p.x,T$p.y,T$c.x,T$c.y,T$x.x,T$x.y)&&0<=T$r.area(T$x.prev,T$x,T$x.next))return!1;T$x=T$x.nextZ;}for(T$x=T$n.prevZ;T$x&&T$x.z>=T$j;){if(T$x!==T$n.prev&&T$x!==T$n.next&&T$r.pointInTriangle(T$y.x,T$y.y,T$p.x,T$p.y,T$c.x,T$c.y,T$x.x,T$x.y)&&0<=T$r.area(T$x.prev,T$x,T$x.next))return!1;T$x=T$x.prevZ;}return!0;},T$r.cureLocalIntersections=function(T$n,T$C,T$_){var T$E=T$n;do{var T$y=T$E.prev,T$p=T$E.next.next;!T$r.equals(T$y,T$p)&&T$r.intersects(T$y,T$E,T$E.next,T$p)&&T$r.locallyInside(T$y,T$p)&&T$r.locallyInside(T$p,T$y)&&(T$C.push(T$y.i/T$_),T$C.push(T$E.i/T$_),T$C.push(T$p.i/T$_),T$r.removeNode(T$E),T$r.removeNode(T$E.next),T$E=T$n=T$p),T$E=T$E.next;}while(T$E!==T$n);return T$E;},T$r.splitEarcut=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c=T$n;do{for(var T$l=T$c.next.next;T$l!==T$c.prev;){if(T$c.i!==T$l.i&&T$r.isValidDiagonal(T$c,T$l)){var T$W=T$r.splitPolygon(T$c,T$l);return T$c=T$r.filterPoints(T$c,T$c.next),T$W=T$r.filterPoints(T$W,T$W.next),T$r.earcutLinked(T$c,T$C,T$_,T$E,T$y,T$p),void T$r.earcutLinked(T$W,T$C,T$_,T$E,T$y,T$p);}T$l=T$l.next;}T$c=T$c.next;}while(T$c!==T$n);},T$r.eliminateHoles=function(T$n,T$C,T$_,T$E){var T$y,T$p,T$c,T$l,T$W,T$q=[];for(T$y=0,T$p=T$C.length;T$y<T$p;T$y++)T$c=T$C[T$y]*T$E,T$l=T$y<T$p-1?T$C[T$y+1]*T$E:T$n.length,(T$W=T$r.linkedList(T$n,T$c,T$l,T$E,!1))===T$W.next&&(T$W.steiner=!0),T$q.push(T$r.getLeftmost(T$W));for(T$q.sort(T$r.compareX),T$y=0;T$y<T$q.length;T$y++)T$r.eliminateHole(T$q[T$y],T$_),T$_=T$r.filterPoints(T$_,T$_.next);return T$_;},T$r.compareX=function(T$n,T$C){return T$n.x-T$C.x;},T$r.eliminateHole=function(T$n,T$C){if(T$C=T$r.findHoleBridge(T$n,T$C)){var T$_=T$r.splitPolygon(T$C,T$n);T$r.filterPoints(T$_,T$_.next);}},T$r.findHoleBridge=function(T$n,T$C){var T$_,T$E=T$C,T$y=T$n.x,T$p=T$n.y,T$c=-1/0;do{if(T$p<=T$E.y&&T$p>=T$E.next.y&&T$E.next.y!==T$E.y){var T$l=T$E.x+(T$p-T$E.y)*(T$E.next.x-T$E.x)/(T$E.next.y-T$E.y);if(T$l<=T$y&&T$c<T$l){if((T$c=T$l)===T$y){if(T$p===T$E.y)return T$E;if(T$p===T$E.next.y)return T$E.next;}T$_=T$E.x<T$E.next.x?T$E:T$E.next;}}T$E=T$E.next;}while(T$E!==T$C);if(!T$_)return null;if(T$y===T$c)return T$_.prev;var T$W,T$q=T$_,T$J=T$_.x,T$j=T$_.y,T$P=1/0;for(T$E=T$_.next;T$E!==T$q;)T$y>=T$E.x&&T$E.x>=T$J&&T$y!==T$E.x&&T$r.pointInTriangle(T$p<T$j?T$y:T$c,T$p,T$J,T$j,T$p<T$j?T$c:T$y,T$p,T$E.x,T$E.y)&&((T$W=Math.abs(T$p-T$E.y)/(T$y-T$E.x))<T$P||T$W===T$P&&T$E.x>T$_.x)&&T$r.locallyInside(T$E,T$n)&&(T$_=T$E,T$P=T$W),T$E=T$E.next;return T$_;},T$r.indexCurve=function(T$n,T$C,T$_,T$E){for(var T$y=T$n;null===T$y.z&&(T$y.z=T$r.zOrder(T$y.x,T$y.y,T$C,T$_,T$E)),T$y.prevZ=T$y.prev,T$y.nextZ=T$y.next,(T$y=T$y.next)!==T$n;);T$y.prevZ.nextZ=null,T$y.prevZ=null,T$r.sortLinked(T$y);},T$r.sortLinked=function(T$n){var T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q=1;do{for(T$_=T$n,T$p=T$n=null,T$c=0;T$_;){for(T$c++,T$E=T$_,T$C=T$l=0;T$C<T$q&&(T$l++,T$E=T$E.nextZ);T$C++);for(T$W=T$q;0<T$l||0<T$W&&T$E;)0!==T$l&&(0===T$W||!T$E||T$_.z<=T$E.z)?(T$_=(T$y=T$_).nextZ,T$l--):(T$E=(T$y=T$E).nextZ,T$W--),T$p?T$p.nextZ=T$y:T$n=T$y,T$y.prevZ=T$p,T$p=T$y;T$_=T$E;}T$p.nextZ=null,T$q*=2;}while(1<T$c);return T$n;},T$r.zOrder=function(T$n,T$C,T$_,T$E,T$y){return(T$n=1431655765&((T$n=858993459&((T$n=252645135&((T$n=16711935&((T$n=32767*(T$n-T$_)*T$y)|T$n<<8))|T$n<<4))|T$n<<2))|T$n<<1))|(T$C=1431655765&((T$C=858993459&((T$C=252645135&((T$C=16711935&((T$C=32767*(T$C-T$E)*T$y)|T$C<<8))|T$C<<4))|T$C<<2))|T$C<<1))<<1;},T$r.getLeftmost=function(T$n){for(var T$C=T$n,T$_=T$n;T$C.x<T$_.x&&(T$_=T$C),(T$C=T$C.next)!==T$n;);return T$_;},T$r.pointInTriangle=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){return 0<=(T$y-T$c)*(T$C-T$l)-(T$n-T$c)*(T$p-T$l)&&0<=(T$n-T$c)*(T$E-T$l)-(T$_-T$c)*(T$C-T$l)&&0<=(T$_-T$c)*(T$p-T$l)-(T$y-T$c)*(T$E-T$l);},T$r.isValidDiagonal=function(T$n,T$C){return T$n.next.i!==T$C.i&&T$n.prev.i!==T$C.i&&!T$r.intersectsPolygon(T$n,T$C)&&T$r.locallyInside(T$n,T$C)&&T$r.locallyInside(T$C,T$n)&&T$r.middleInside(T$n,T$C);},T$r.area=function(T$n,T$C,T$_){return(T$C.y-T$n.y)*(T$_.x-T$C.x)-(T$C.x-T$n.x)*(T$_.y-T$C.y);},T$r.equals=function(T$n,T$C){return T$n.x===T$C.x&&T$n.y===T$C.y;},T$r.intersects=function(T$n,T$C,T$_,T$E){return!!(T$r.equals(T$n,T$C)&&T$r.equals(T$_,T$E)||T$r.equals(T$n,T$E)&&T$r.equals(T$_,T$C))||0<T$r.area(T$n,T$C,T$_)!=0<T$r.area(T$n,T$C,T$E)&&0<T$r.area(T$_,T$E,T$n)!=0<T$r.area(T$_,T$E,T$C);},T$r.intersectsPolygon=function(T$n,T$C){var T$_=T$n;do{if(T$_.i!==T$n.i&&T$_.next.i!==T$n.i&&T$_.i!==T$C.i&&T$_.next.i!==T$C.i&&T$r.intersects(T$_,T$_.next,T$n,T$C))return!0;T$_=T$_.next;}while(T$_!==T$n);return!1;},T$r.locallyInside=function(T$n,T$C){return T$r.area(T$n.prev,T$n,T$n.next)<0?0<=T$r.area(T$n,T$C,T$n.next)&&0<=T$r.area(T$n,T$n.prev,T$C):T$r.area(T$n,T$C,T$n.prev)<0||T$r.area(T$n,T$n.next,T$C)<0;},T$r.middleInside=function(T$n,T$C){for(var T$_=T$n,T$E=!1,T$y=(T$n.x+T$C.x)/2,T$p=(T$n.y+T$C.y)/2;T$_.y>T$p!=T$_.next.y>T$p&&T$_.next.y!==T$_.y&&T$y<(T$_.next.x-T$_.x)*(T$p-T$_.y)/(T$_.next.y-T$_.y)+T$_.x&&(T$E=!T$E),(T$_=T$_.next)!==T$n;);return T$E;},T$r.splitPolygon=function(T$n,T$C){var T$_=new T$yn(T$n.i,T$n.x,T$n.y),T$E=new T$yn(T$C.i,T$C.x,T$C.y),T$y=T$n.next,T$p=T$C.prev;return(T$n.next=T$C).prev=T$n,(T$_.next=T$y).prev=T$_,(T$E.next=T$_).prev=T$E,(T$p.next=T$E).prev=T$p,T$E;},T$r.insertNode=function(T$n,T$C,T$_,T$E){var T$y=new T$yn(T$n,T$C,T$_);return T$E?(T$y.next=T$E.next,(T$y.prev=T$E).next.prev=T$y,T$E.next=T$y):(T$y.prev=T$y).next=T$y,T$y;},T$r.removeNode=function(T$n){T$n.next.prev=T$n.prev,T$n.prev.next=T$n.next,T$n.prevZ&&(T$n.prevZ.nextZ=T$n.nextZ),T$n.nextZ&&(T$n.nextZ.prevZ=T$n.prevZ);},T$r.signedArea=function(T$n,T$C,T$_,T$E){for(var T$y=0,T$p=T$C,T$c=T$_-T$E;T$p<T$_;T$p+=T$E)T$y+=(T$n[T$c]-T$n[T$p])*(T$n[T$p+1]+T$n[T$c+1]),T$c=T$p;return T$y;},T$r;}(),T$yn=function(){function T$n(T$n,T$C,T$_){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=T$n,this.x=T$C,this.y=T$_,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1;}return T$P(T$n,"laya.webgl.shapes.EarcutNode"),T$n;}(),T$pn=(function(){function T$n(T$n,T$C,T$_,T$E,T$y,T$p,T$c){this.lineWidth=T$n,this.lineColor=T$C,this.lineAlpha=T$_,this.fillColor=T$E,this.fillAlpha=T$y,this.shape=T$c,this.fill=T$p;}T$P(T$n,"laya.webgl.shapes.GeometryData");var T$C=T$n.prototype;T$C.clone=function(){return new T$n(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape);},T$C.getIndexData=function(){return null;},T$C.getVertexData=function(){return null;},T$C.destroy=function(){this.shape=null;};}(),function(){function T$n(T$n){if(T$n instanceof Float32Array)this.points=T$n;else if(T$n instanceof Array){T$n.length;this.points=new Float32Array(T$n);}}T$P(T$n,"laya.webgl.shapes.Vertex");var T$C=T$n.prototype;T$t.imps(T$C,{"laya.webgl.shapes.IShape":!0}),T$C.getData=function(T$n,T$C,T$_){},T$C.needUpdate=function(T$n){return!1;},T$C.rebuild=function(T$n){},T$C.setMatrix=function(T$n){};}(),function(){function T$W(T$n){void 0===T$n&&(T$n=1e4),this._renderType=T$n;}T$P(T$W,"laya.webgl.submit.Submit");var T$n=T$W.prototype;return T$t.imps(T$n,{"laya.webgl.submit.ISubmit":!0}),T$n.releaseRender=function(){var T$n=T$W._cache;(T$n[T$n._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null;},T$n.getRenderType=function(){return this._renderType;},T$n.renderSubmit=function(){if(0===this._numEle)return 1;var T$n=this.shaderValue.textureHost;if(T$n){var T$C=T$n.source;if(!T$n.bitmap||!T$C)return 1;this.shaderValue.texture=T$C,T$n.alphaTexture&&T$n.alphaTexture.source&&(this.shaderValue.texture1=T$n.alphaTexture.source);}this._vb.bind_upload(this._ib);var T$_=T$An.mainContext;return this.shaderValue.upload(),T$o.activeBlendFunction!==this._blendFn&&(T$_.enable(3042),this._blendFn(T$_),T$o.activeBlendFunction=this._blendFn),T$B.drawCall++,T$B.trianglesFaces+=this._numEle/3,T$_.drawElements(4,this._numEle,5123,this._startIdx),1;},T$W.__init__=function(){var T$n=T$W.RENDERBASE=new T$W(-1);T$n.shaderValue=new T$Yn(0,0),T$n.shaderValue.ALPHA=-1234;},T$W.createSubmit=function(T$n,T$C,T$_,T$E,T$y){var T$p=T$W._cache._length?T$W._cache[--T$W._cache._length]:new T$W();null==T$_&&((T$_=T$p._selfVb||(T$p._selfVb=T$Dn.create(-1))).clear(),T$E=0),T$p._ib=T$C,T$p._vb=T$_,T$p._startIdx=T$E*T$rn.BYTES_PIDX,T$p._numEle=0;var T$c=T$n._nBlendType;T$p._blendFn=T$n._targets?T$o.targetFns[T$c]:T$o.fns[T$c],T$p.shaderValue=T$y,T$p.shaderValue.setValue(T$n._shader2D);var T$l=T$n._shader2D.filters;return T$l&&T$p.shaderValue.setFilters(T$l),T$p;},T$W.createShape=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c=T$W._cache._length?T$W._cache[--T$W._cache._length]:new T$W();T$c._ib=T$C,T$c._vb=T$_,T$c._numEle=T$E,T$c._startIdx=T$y,T$c.shaderValue=T$p,T$c.shaderValue.setValue(T$n._shader2D);var T$l=T$n._nBlendType;return T$c._blendFn=T$n._targets?T$o.targetFns[T$l]:T$o.fns[T$l],T$c;},T$W.TYPE_2D=1e4,T$W.TYPE_CANVAS=10003,T$W.TYPE_CMDSETRT=10004,T$W.TYPE_CUSTOM=10005,T$W.TYPE_BLURRT=10006,T$W.TYPE_CMDDESTORYPRERT=10007,T$W.TYPE_DISABLESTENCIL=10008,T$W.TYPE_OTHERIBVB=10009,T$W.TYPE_PRIMITIVE=10010,T$W.TYPE_RT=10011,T$W.TYPE_BLUR_RT=10012,T$W.TYPE_TARGET=10013,T$W.TYPE_CHANGE_VALUE=10014,T$W.TYPE_SHAPE=10015,T$W.TYPE_TEXTURE=10016,T$W.TYPE_FILLTEXTURE=10017,T$W.RENDERBASE=null,T$W._cache=((T$W._cache=[])._length=0,T$W._cache),T$W;}()),T$cn=function(){function T$E(){this.fun=null,this.args=null;}T$P(T$E,"laya.webgl.submit.SubmitCMD");var T$n=T$E.prototype;return T$t.imps(T$n,{"laya.webgl.submit.ISubmit":!0}),T$n.renderSubmit=function(){return this.fun.apply(null,this.args),1;},T$n.getRenderType=function(){return 0;},T$n.releaseRender=function(){var T$n=T$E._cache;T$n[T$n._length++]=this;},T$E.create=function(T$n,T$C){var T$_=T$E._cache._length?T$E._cache[--T$E._cache._length]:new T$E();return T$_.fun=T$C,T$_.args=T$n,T$_;},T$E._cache=((T$E._cache=[])._length=0,T$E._cache),T$E;}(),T$ln=function(){function T$C(){this.variables={};}T$P(T$C,"laya.webgl.submit.SubmitCMDScope");var T$n=T$C.prototype;return T$n.getValue=function(T$n){return this.variables[T$n];},T$n.addValue=function(T$n,T$C){return this.variables[T$n]=T$C;},T$n.setValue=function(T$n,T$C){return this.variables.hasOwnProperty(T$n)?this.variables[T$n]=T$C:null;},T$n.clear=function(){for(var T$n in this.variables)delete this.variables[T$n];},T$n.recycle=function(){this.clear(),T$C.POOL.push(this);},T$C.create=function(){var T$n=T$C.POOL.pop();return T$n||(T$n=new T$C()),T$n;},T$C.POOL=[],T$C;}(),T$Wn=function(){function T$j(){this.offset=0,this.startIndex=0,this._mat=T$s.create();}T$P(T$j,"laya.webgl.submit.SubmitOtherIBVB");var T$n=T$j.prototype;return T$t.imps(T$n,{"laya.webgl.submit.ISubmit":!0}),T$n.releaseRender=function(){var T$n=T$j._cache;(T$n[T$n._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null;},T$n.getRenderType=function(){return 10009;},T$n.renderSubmit=function(){var T$n=this._shaderValue.textureHost;if(T$n){var T$C=T$n.source;if(!T$n.bitmap||!T$C)return 1;this._shaderValue.texture=T$C;}this._vb.bind_upload(this._ib);var T$_=T$an.worldMatrix4,T$E=T$s.TEMP;T$s.mulPre(this._mat,T$_[0],T$_[1],T$_[4],T$_[5],T$_[12],T$_[13],T$E);var T$y=T$an.worldMatrix4=T$j.tempMatrix4;T$y[0]=T$E.a,T$y[1]=T$E.b,T$y[4]=T$E.c,T$y[5]=T$E.d,T$y[12]=T$E.tx,T$y[13]=T$E.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var T$p=T$An.mainContext;return T$o.activeBlendFunction!==this._blendFn&&(T$p.enable(3042),this._blendFn(T$p),T$o.activeBlendFunction=this._blendFn),T$B.drawCall++,T$B.trianglesFaces+=this._numEle/3,T$p.drawElements(4,this._numEle,5123,this.startIndex),T$an.worldMatrix4=T$_,T$$n.activeShader=null,1;},T$j.create=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W){void 0===T$W&&(T$W=0);var T$q=T$j._cache._length?T$j._cache[--T$j._cache._length]:new T$j();T$q._ib=T$_,T$q._vb=T$C,T$q._numEle=T$E,T$q._shader=T$y,T$q._shaderValue=T$p;var T$J=T$n._nBlendType;switch(T$q._blendFn=T$n._targets?T$o.targetFns[T$J]:T$o.fns[T$J],T$W){case 0:T$q.offset=0,T$q.startIndex=T$l/(T$rn.BYTES_PE*T$C.vertexStride)*1.5,T$q.startIndex*=T$rn.BYTES_PIDX;break;case 1:T$q.startIndex=T$c,T$q.offset=T$l;}return T$q;},T$j._cache=((T$j._cache=[])._length=0,T$j._cache),T$j.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T$j;}(),T$qn=function(){function T$_(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new T$S(),this.screenRect=new T$S();}T$P(T$_,"laya.webgl.submit.SubmitScissor");var T$n=T$_.prototype;return T$t.imps(T$n,{"laya.webgl.submit.ISubmit":!0}),T$n._scissor=function(T$n,T$C,T$_,T$E){var T$y=T$an.worldMatrix4,T$p=T$y[0],T$c=T$y[5],T$l=T$y[12],T$W=T$y[13];if(T$E*=T$c,(T$_*=T$p)<1||T$E<1)return!1;var T$q=(T$n=T$n*T$p+T$l)+T$_,T$J=(T$C=T$C*T$c+T$W)+T$E;T$n<0&&(T$_=T$q-(T$n=0)),T$C<0&&(T$E=T$J-(T$C=0));var T$j=T$an.worldClipRect;if(T$n=Math.max(T$n,T$j.x),T$C=Math.max(T$C,T$j.y),T$_=Math.min(T$q,T$j.right)-T$n,T$E=Math.min(T$J,T$j.bottom)-T$C,T$_<1||T$E<1)return!1;var T$P=T$an.worldScissorTest;return this.screenRect.copyFrom(T$j),T$j.x=T$n,T$j.y=T$C,T$j.width=T$_,T$j.height=T$E,T$an.worldScissorTest=!0,T$C=T$an.height-T$C-T$E,T$An.mainContext.scissor(T$n,T$C,T$_,T$E),T$An.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),T$P?(T$C=T$an.height-this.screenRect.y-this.screenRect.height,T$An.mainContext.scissor(this.screenRect.x,T$C,this.screenRect.width,this.screenRect.height),T$An.mainContext.enable(3089)):(T$An.mainContext.disable(3089),T$an.worldScissorTest=!1),T$j.copyFrom(this.screenRect),!0;},T$n._scissorWithTagart=function(T$n,T$C,T$_,T$E){if(T$_<1||T$E<1)return!1;var T$y=T$n+T$_,T$p=T$C+T$E;T$n<0&&(T$_=T$y-(T$n=0)),T$C<0&&(T$E=T$p-(T$C=0));var T$c=T$an.worldClipRect;if(T$n=Math.max(T$n,T$c.x),T$C=Math.max(T$C,T$c.y),T$_=Math.min(T$y,T$c.right)-T$n,T$E=Math.min(T$p,T$c.bottom)-T$C,T$_<1||T$E<1)return!1;var T$l=T$an.worldScissorTest;return this.screenRect.copyFrom(T$c),T$an.worldScissorTest=!0,T$c.x=T$n,T$c.y=T$C,T$c.width=T$_,T$c.height=T$E,T$C=T$an.height-T$C-T$E,T$An.mainContext.scissor(T$n,T$C,T$_,T$E),T$An.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),T$l?(T$C=T$an.height-this.screenRect.y-this.screenRect.height,T$An.mainContext.scissor(this.screenRect.x,T$C,this.screenRect.width,this.screenRect.height),T$An.mainContext.enable(3089)):(T$An.mainContext.disable(3089),T$an.worldScissorTest=!1),T$c.copyFrom(this.screenRect),!0;},T$n.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1;},T$n.getRenderType=function(){return 0;},T$n.releaseRender=function(){var T$n=T$_._cache;(T$n[T$n._length++]=this).context=null;},T$_.create=function(T$n){var T$C=T$_._cache._length?T$_._cache[--T$_._cache._length]:new T$_();return T$C.context=T$n,T$C;},T$_._cache=((T$_._cache=[])._length=0,T$_._cache),T$_;}(),T$Jn=function(){function T$W(){this.step=0,this.blendMode=null,this.level=0;}T$P(T$W,"laya.webgl.submit.SubmitStencil");var T$n=T$W.prototype;return T$t.imps(T$n,{"laya.webgl.submit.ISubmit":!0}),T$n.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8();}return 1;},T$n.getRenderType=function(){return 0;},T$n.releaseRender=function(){var T$n=T$W._cache;T$n[T$n._length++]=this;},T$n.do1=function(){var T$n=T$An.mainContext;T$n.enable(2960),T$n.clear(1024),T$n.colorMask(!1,!1,!1,!1),T$n.stencilFunc(514,this.level,255),T$n.stencilOp(7680,7680,7682);},T$n.do2=function(){var T$n=T$An.mainContext;T$n.stencilFunc(514,this.level+1,255),T$n.colorMask(!0,!0,!0,!0),T$n.stencilOp(7680,7680,7680);},T$n.do3=function(){var T$n=T$An.mainContext;T$n.colorMask(!0,!0,!0,!0),T$n.stencilOp(7680,7680,7680),T$n.clear(1024),T$n.disable(2960);},T$n.do4=function(){var T$n=T$An.mainContext;0==this.level&&(T$n.enable(2960),T$n.clear(1024)),T$n.colorMask(!1,!1,!1,!1),T$n.stencilFunc(519,0,255),T$n.stencilOp(7680,7680,7682);},T$n.do5=function(){var T$n=T$An.mainContext;T$n.stencilFunc(514,this.level,255),T$n.colorMask(!0,!0,!0,!0),T$n.stencilOp(7680,7680,7680);},T$n.do6=function(){var T$n=T$An.mainContext;T$o.targetFns[T$o.TOINT[this.blendMode]](T$n);},T$n.do7=function(){var T$n=T$An.mainContext;T$n.colorMask(!1,!1,!1,!1),T$n.stencilOp(7680,7680,7683);},T$n.do8=function(){var T$n=T$An.mainContext;T$n.colorMask(!0,!0,!0,!0),T$n.stencilFunc(514,this.level,255),T$n.stencilOp(7680,7680,7680);},T$W.restore=function(T$n,T$C,T$_,T$E,T$y){var T$p;if((T$n._renderKey=0)<T$W._mask&&T$W._mask--,0==T$W._mask)T$p=laya.webgl.submit.SubmitStencil.create(3),T$n.addRenderObject(T$p),T$n._curSubmit=T$pn.RENDERBASE;else{T$p=laya.webgl.submit.SubmitStencil.create(7),T$n.addRenderObject(T$p);var T$c=T$n._vb;T$c._byteLength;if(T$mn.fillRectImgVb(T$c,null,T$C.x,T$C.y,T$C.width,T$C.height,T$X.DEF_UV,T$_,T$E,T$y,0,0)){T$n._shader2D.glTexture=null;var T$l=T$n._curSubmit=T$pn.createSubmit(T$n,T$n._ib,T$c,(T$c._byteLength-64)/32*3,T$Yn.create(2,0));T$l.shaderValue.ALPHA=1,T$n._submits[T$n._submits._length++]=T$l,T$n._curSubmit._numEle+=6,T$n._curSubmit=T$pn.RENDERBASE;}else alert("clipRect calc stencil rect error");T$p=laya.webgl.submit.SubmitStencil.create(8),T$n.addRenderObject(T$p);}},T$W.restore2=function(T$n,T$C){var T$_;(T$n._renderKey=0)<T$W._mask&&T$W._mask--,0==T$W._mask?(T$_=laya.webgl.submit.SubmitStencil.create(3),T$n.addRenderObject(T$_),T$n._curSubmit=T$pn.RENDERBASE):(T$_=laya.webgl.submit.SubmitStencil.create(7),T$n.addRenderObject(T$_),T$n._submits[T$n._submits._length++]=T$C,T$_=laya.webgl.submit.SubmitStencil.create(8),T$n.addRenderObject(T$_));},T$W.create=function(T$n){var T$C=T$W._cache._length?T$W._cache[--T$W._cache._length]:new T$W();return 5==(T$C.step=T$n)&&++T$W._mask,T$C.level=T$W._mask,T$C;},T$W._cache=((T$W._cache=[])._length=0,T$W._cache),T$W._mask=0,T$W;}(),T$jn=function(){function T$l(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null;}T$P(T$l,"laya.webgl.submit.SubmitTarget");var T$n=T$l.prototype;return T$t.imps(T$n,{"laya.webgl.submit.ISubmit":!0}),T$n.renderSubmit=function(){this._vb.bind_upload(this._ib);var T$n=this.scope.getValue(this.proName);return T$n&&(this.shaderValue.texture=T$n.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[T$n.width,T$n.height]),this.shaderValue.upload(),this.blend(),T$B.drawCall++,T$B.trianglesFaces+=this._numEle/3,T$An.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1;},T$n.blend=function(){if(T$o.activeBlendFunction!==T$o.fns[this.blendType]){var T$n=T$An.mainContext;T$n.enable(3042),T$o.fns[this.blendType](T$n),T$o.activeBlendFunction=T$o.fns[this.blendType];}},T$n.getRenderType=function(){return 0;},T$n.releaseRender=function(){var T$n=T$l._cache;(T$n[T$n._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null;},T$l.create=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c=T$l._cache._length?T$l._cache[--T$l._cache._length]:new T$l();return T$c._ib=T$C,T$c._vb=T$_,T$c.proName=T$p,T$c._startIdx=T$E*T$rn.BYTES_PIDX,T$c._numEle=0,T$c.blendType=T$n._nBlendType,T$c.shaderValue=T$y,T$c.shaderValue.setValue(T$n._shader2D),T$c;},T$l._cache=((T$l._cache=[])._length=0,T$l._cache),T$l;}(),T$Pn=function(){function T$n(){this._sourceStr=null;}T$P(T$n,"laya.webgl.text.CharSegment");var T$C=T$n.prototype;return T$t.imps(T$C,{"laya.webgl.text.ICharSegment":!0}),T$C.textToSpit=function(T$n){this._sourceStr=T$n;},T$C.getChar=function(T$n){return this._sourceStr.charAt(T$n);},T$C.getCharCode=function(T$n){return this._sourceStr.charCodeAt(T$n);},T$C.length=function(){return this._sourceStr.length;},T$n;}(),T$xn=function(){var T$n;function T$B(){}return T$P(T$B,"laya.webgl.text.DrawText"),T$B.__init__=function(){T$B._charsTemp=new Array(),T$B._drawValue=new T$n(),T$B._charSeg=new T$Pn();},T$B.customCharSeg=function(T$n){T$B._charSeg=T$n;},T$B.getChar=function(T$n,T$C,T$_){var T$E=T$Zn.createOneChar(T$n,T$_);return-1!=T$C&&(T$B._charsCache[T$C]=T$E),T$E;},T$B._drawSlow=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q,T$J,T$j,T$P,T$x,T$b){var T$r,T$m,T$d=T$B._drawValue.value(T$p,T$l,T$W,T$q,T$P,T$x,T$b),T$a=0,T$O=0,T$A=T$B._charsTemp,T$k=0,T$t=NaN;if(T$E)for(T$A.length=T$E.length,T$a=0,T$O=T$E.length;T$a<T$O;T$a++)(T$m=T$E[T$a])&&(T$t=T$m.charNum+T$d.txtID,T$A[T$a]=T$r=T$B._charsCache[T$t]||T$B.getChar(T$m.char,T$t,T$d),T$r.active());else{var T$T=T$_ instanceof laya.utils.WordText?T$_.toString():T$_;if(T$H.CharacterCache){T$B._charSeg.textToSpit(T$T);var T$Y=T$B._charSeg.length();for(T$a=0,T$O=T$A.length=T$Y;T$a<T$O;T$a++)T$t=T$B._charSeg.getCharCode(T$a)+T$d.txtID,T$A[T$a]=T$r=T$B._charsCache[T$t]||T$B.getChar(T$B._charSeg.getChar(T$a),T$t,T$d),T$r.active(),T$k+=T$r.cw;}else T$A.length=0,(T$r=T$B.getChar(T$T,-1,T$d)).active(),T$k+=T$r.cw,T$A[0]=T$r;}var T$s=0;null!==T$c&&"left"!==T$c&&(T$s=-("center"==T$c?T$k/2:T$k));var T$N,T$S,T$M=NaN,T$w=0;if(T$E)for(T$a=0,T$O=T$A.length;T$a<T$O;T$a++)T$r=T$A[T$a],T$m=T$E[T$a],T$r&&T$m&&!T$r.isSpace&&(T$M=T$r.borderSize,T$N=T$r.texture,T$C._drawText(T$N,T$J+T$s+T$m.x*T$P-T$M,T$j+T$m.y*T$x-T$M,T$N.width,T$N.height,T$y,0,0,0,0));else{for(T$a=0,T$O=T$A.length;T$a<T$O;T$a++)(T$r=T$A[T$a])&&!T$r.isSpace&&(T$M=T$r.borderSize,T$N=T$r.texture,T$C._drawText(T$N,T$J+T$s-T$M,T$j-T$M,T$N.width,T$N.height,T$y,0,0,0,0),T$n&&((T$S=T$n[T$w++])||(T$S=T$n[T$w-1]=[]),T$S[0]=T$N,T$S[1]=T$s-T$M,T$S[2]=-T$M)),T$s+=T$r.cw;T$n&&(T$n.length=T$w);}},T$B._drawFast=function(T$n,T$C,T$_,T$E,T$y){for(var T$p,T$c,T$l=0,T$W=T$n.length;T$l<T$W;T$l++)(T$p=(T$c=T$n[T$l])[0]).active(),T$C._drawText(T$p,T$E+T$c[1],T$y+T$c[2],T$p.width,T$p.height,T$_,0,0,0,0);},T$B.drawText=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q,T$J,T$j){if(void 0===T$j&&(T$j=0),!(T$C&&0===T$C.length||T$_&&0===T$_.length)){var T$P=T$E.a,T$x=T$E.d;(0!==T$E.b||0!==T$E.c)&&(T$P=T$x=1);var T$b=1!==T$P||1!==T$x;if(T$b&&T$t.stage.transform){var T$r=T$t.stage.transform;T$b=T$r.a===T$P&&T$r.d===T$x;}else T$b=!1;if(T$b){var T$m=(T$E=T$E.copyTo(T$Tn._tmpMatrix)).tx,T$d=T$E.ty;T$E.scale(1/T$P,1/T$x),T$E._checkTransform(),T$q*=T$P,T$J*=T$x,T$q+=T$m-T$E.tx,T$J+=T$d-T$E.ty;}else T$P=T$x=1;if(T$_)T$B._drawSlow(null,T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q,T$J,T$P,T$x,T$j);else{if(null===T$C.toUpperCase){var T$a=T$P+1e5*T$x,T$O=T$C;return void(T$O.changed||T$O.id!==T$a?(T$O.id=T$a,T$O.changed=!1,T$B._drawSlow(T$O.save,T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q,T$J,T$P,T$x,T$j)):T$B._drawFast(T$O.save,T$n,T$E,T$q,T$J));}var T$A=T$C+T$y.toString()+T$c+T$l+T$W+T$P+T$x+T$p,T$k=T$B._textsCache[T$A];T$H.CharacterCache?T$k?T$B._drawFast(T$k,T$n,T$E,T$q,T$J):(T$B._textsCache.__length||(T$B._textsCache.__length=0),T$B._textsCache.__length>T$T.WebGLTextCacheCount&&((T$B._textsCache={}).__length=0,T$B._curPoolIndex=0),T$B._textCachesPool[T$B._curPoolIndex]?(T$k=T$B._textsCache[T$A]=T$B._textCachesPool[T$B._curPoolIndex]).length=0:T$B._textCachesPool[T$B._curPoolIndex]=T$k=T$B._textsCache[T$A]=[],T$B._textsCache.__length++,T$B._curPoolIndex++,T$B._drawSlow(T$k,T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q,T$J,T$P,T$x,T$j)):T$B._drawSlow(T$k,T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q,T$J,T$P,T$x,T$j);}}},T$B._charsTemp=null,T$B._textCachesPool=[],T$B._curPoolIndex=0,T$B._charsCache={},T$B._textsCache={},T$B._drawValue=null,T$B.d=[],T$B._charSeg=null,T$B.__init$=function(){T$n=function(){function T$W(){}return T$P(T$W,""),T$W.prototype.value=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){this.font=T$n,this.fillColor=T$C,this.borderColor=T$_,this.lineWidth=T$E,this.scaleX=T$y,this.scaleY=T$p,this.underLine=T$c;var T$l=T$n.toString()+T$y+T$p+T$E+(T$C?T$C.toLowerCase():" ")+(T$_?T$_.toLowerCase():" ")+T$c;return this.txtID=T$W._keymap[T$l],this.txtID||(this.txtID=1e-7*++T$W._keymapCount,T$W._keymap[T$l]=this.txtID),this;},T$W.clear=function(){T$W._keymap={},T$W._keymapCount=1;},T$W._keymap={},T$W._keymapCount=1,T$W;}();},T$B;}(),T$bn=function(){function T$y(T$n){this._index=0,this._size=14,this._italic=-2,T$y._cache2=T$y._cache2||[],this.setFont(T$n||"14px Arial");}T$P(T$y,"laya.webgl.text.FontInContext");var T$n=T$y.prototype;return T$n.setFont=function(T$n){var T$C=T$y._cache2[T$n];if(T$C)this._words=T$C[0],this._size=T$C[1];else{this._words=T$n.split(" ");for(var T$_=0,T$E=this._words.length;T$_<T$E;T$_++)if(0<this._words[T$_].indexOf("px")){this._index=T$_;break;}this._size=parseInt(this._words[this._index]),T$y._cache2[T$n]=[this._words,this._size];}this._text=null,this._italic=-2;},T$n.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic;},T$n.hasType=function(T$n){for(var T$C=0,T$_=this._words.length;T$C<T$_;T$C++)if(this._words[T$C]===T$n)return T$C;return-1;},T$n.removeType=function(T$n){for(var T$C=0,T$_=this._words.length;T$C<T$_;T$C++)if(this._words[T$C]===T$n){this._words.splice(T$C,1),this._index>T$C&&this._index--;break;}this._text=null,this._italic=-2;},T$n.copyTo=function(T$n){return T$n._text=this._text,T$n._size=this._size,T$n._index=this._index,T$n._words=this._words.slice(),T$n._italic=-2,T$n;},T$n.toString=function(){return this._text?this._text:this._text=this._words.join(" ");},T$E(0,T$n,"size",function(){return this._size;},function(T$n){this._size=T$n,this._words[this._index]=T$n+"px",this._text=null;}),T$y.create=function(T$n){var T$C=T$y._cache[T$n];return T$C||(T$C=T$y._cache[T$n]=new T$y(T$n));},T$y.EMPTY=new T$y(),T$y._cache={},T$y._cache2=null,T$y;}(),T$rn=function(){function T$n(){}return T$P(T$n,"laya.webgl.utils.CONST3D2D"),T$n.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T$n.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],T$n.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],T$n._TMPARRAY=[],T$n._OFFSETX=0,T$n._OFFSETY=0,T$c(T$n,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT;},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT;}]),T$n;}(),T$mn=function(){function T$b(){}return T$P(T$b,"laya.webgl.utils.GlUtils"),T$b.make2DProjection=function(T$n,T$C,T$_){return[2/T$n,0,0,0,0,-2/T$C,0,0,0,0,2/T$_,0,-1,1,0,1];},T$b.fillIBQuadrangle=function(T$n,T$C){if(65535/4<T$C)throw Error("IBQuadrangle count:"+T$C+" must<:"+Math.floor(65535/4));T$C=Math.floor(T$C),T$n._resizeBuffer(6*(T$C+1)*2,!1),T$n.byteLength=T$n.bufferLength;for(var T$_=T$n.getUint16Array(),T$E=0,T$y=0;T$y<T$C;T$y++)T$_[T$E++]=4*T$y,T$_[T$E++]=4*T$y+2,T$_[T$E++]=4*T$y+1,T$_[T$E++]=4*T$y,T$_[T$E++]=4*T$y+3,T$_[T$E++]=4*T$y+2;return T$n.setNeedUpload(),!0;},T$b.expandIBQuadrangle=function(T$n,T$C){T$n.bufferLength>=6*T$C*2||T$b.fillIBQuadrangle(T$n,T$C);},T$b.mathCeilPowerOfTwo=function(T$n){return T$n--,T$n|=T$n>>1,T$n|=T$n>>2,T$n|=T$n>>4,T$n|=T$n>>8,T$n|=T$n>>16,++T$n;},T$b.fillQuadrangleImgVb=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){var T$W=16+(T$n._byteLength>>2);T$n.byteLength=T$W<<2;var T$q=T$n.getFloat32Array();T$q[(T$W-=16)+2]=T$y[0],T$q[T$W+3]=T$y[1],T$q[T$W+6]=T$y[2],T$q[T$W+7]=T$y[3],T$q[T$W+10]=T$y[4],T$q[T$W+11]=T$y[5],T$q[T$W+14]=T$y[6],T$q[T$W+15]=T$y[7];var T$J=T$p.a,T$j=T$p.b,T$P=T$p.c,T$x=T$p.d;if(1!==T$J||0!==T$j||0!==T$P||1!==T$x){T$p.bTransform=!0;var T$b=T$p.tx+T$c,T$r=T$p.ty+T$l;T$q[T$W]=(T$E[0]+T$C)*T$J+(T$E[1]+T$_)*T$P+T$b,T$q[T$W+1]=(T$E[0]+T$C)*T$j+(T$E[1]+T$_)*T$x+T$r,T$q[T$W+4]=(T$E[2]+T$C)*T$J+(T$E[3]+T$_)*T$P+T$b,T$q[T$W+5]=(T$E[2]+T$C)*T$j+(T$E[3]+T$_)*T$x+T$r,T$q[T$W+8]=(T$E[4]+T$C)*T$J+(T$E[5]+T$_)*T$P+T$b,T$q[T$W+9]=(T$E[4]+T$C)*T$j+(T$E[5]+T$_)*T$x+T$r,T$q[T$W+12]=(T$E[6]+T$C)*T$J+(T$E[7]+T$_)*T$P+T$b,T$q[T$W+13]=(T$E[6]+T$C)*T$j+(T$E[7]+T$_)*T$x+T$r;}else T$p.bTransform=!1,T$C+=T$p.tx+T$c,T$_+=T$p.ty+T$l,T$q[T$W]=T$C+T$E[0],T$q[T$W+1]=T$_+T$E[1],T$q[T$W+4]=T$C+T$E[2],T$q[T$W+5]=T$_+T$E[3],T$q[T$W+8]=T$C+T$E[4],T$q[T$W+9]=T$_+T$E[5],T$q[T$W+12]=T$C+T$E[6],T$q[T$W+13]=T$_+T$E[7];return T$n._upload=!0;},T$b.fillTranglesVB=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){var T$l=(T$n._byteLength>>2)+T$E.length;T$n.byteLength=T$l<<2;var T$W=T$n.getFloat32Array();T$l-=T$E.length;for(var T$q=T$E.length,T$J=T$y.a,T$j=T$y.b,T$P=T$y.c,T$x=T$y.d,T$b=0;T$b<T$q;T$b+=4)if(T$W[T$l+T$b+2]=T$E[T$b+2],T$W[T$l+T$b+3]=T$E[T$b+3],1!==T$J||0!==T$j||0!==T$P||1!==T$x){T$y.bTransform=!0;var T$r=T$y.tx+T$p,T$m=T$y.ty+T$c;T$W[T$l+T$b]=(T$E[T$b]+T$C)*T$J+(T$E[T$b+1]+T$_)*T$P+T$r,T$W[T$l+T$b+1]=(T$E[T$b]+T$C)*T$j+(T$E[T$b+1]+T$_)*T$x+T$m;}else T$y.bTransform=!1,T$C+=T$y.tx+T$p,T$_+=T$y.ty+T$c,T$W[T$l+T$b]=T$C+T$E[T$b],T$W[T$l+T$b+1]=T$_+T$E[T$b+1];return T$n._upload=!0;},T$b.copyPreImgVb=function(T$n,T$C,T$_){var T$E=T$n._byteLength>>2;T$n.byteLength=T$E+16<<2;for(var T$y=T$n.getFloat32Array(),T$p=0,T$c=T$E-16;T$p<4;T$p++)T$y[T$E]=T$y[T$c]+T$C,++T$c,T$y[++T$E]=T$y[T$c]+T$_,++T$c,T$y[++T$E]=T$y[T$c],++T$c,T$y[++T$E]=T$y[T$c],++T$E,++T$c;T$n._upload=!0;},T$b.fillRectImgVb=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q,T$J,T$j,T$P){void 0===T$P&&(T$P=!1);var T$x,T$b,T$r,T$m,T$d,T$a,T$O,T$A,T$k,T$t,T$T,T$Y,T$s,T$N,T$S,T$M,T$w=1,T$B=T$l.a,T$V=T$l.b,T$g=T$l.c,T$H=T$l.d,T$X=T$C&&T$C.width<99999999;if(1!==T$B||0!==T$V||0!==T$g||1!==T$H?(T$l.bTransform=!0,0===T$V&&0===T$g&&(T$w=23,T$k=T$y+T$_,T$t=T$p+T$E,T$x=T$B*T$_+(T$T=T$l.tx+T$W),T$r=T$B*T$k+T$T,T$b=T$H*T$E+(T$Y=T$l.ty+T$q),T$m=T$H*T$t+T$Y)):(T$w=23,T$l.bTransform=!1,T$r=(T$x=T$_+T$l.tx+T$W)+T$y,T$m=(T$b=T$E+T$l.ty+T$q)+T$p),T$X&&(T$d=T$C.x,T$a=T$C.y,T$O=T$C.width+T$d,T$A=T$C.height+T$a),1!==T$w){if(Math.min(T$x,T$r)>=T$O)return!1;if(Math.min(T$b,T$m)>=T$A)return!1;if(Math.max(T$r,T$x)<=T$d)return!1;if(Math.max(T$m,T$b)<=T$a)return!1;}var T$$=T$n._byteLength>>2;T$n.byteLength=16+T$$<<2;var T$i=T$n.getFloat32Array();switch(T$i[2+T$$]=T$c[0],T$i[3+T$$]=T$c[1],T$i[6+T$$]=T$c[2],T$i[7+T$$]=T$c[3],T$i[10+T$$]=T$c[4],T$i[11+T$$]=T$c[5],T$i[14+T$$]=T$c[6],T$i[15+T$$]=T$c[7],T$w){case 1:T$T=T$l.tx+T$W,T$Y=T$l.ty+T$q;var T$f=T$B*T$_,T$e=T$g*T$E,T$G=T$H*T$E,T$F=T$V*T$_,T$u=T$B*(T$k=T$y+T$_),T$o=T$g*(T$t=T$p+T$E),T$Q=T$H*T$t,T$I=T$V*T$k;T$P?(T$s=T$f+T$e+T$T,T$S=Math.round(T$s)-T$s,T$N=T$G+T$F+T$Y,T$M=Math.round(T$N)-T$N,T$i[T$$]=T$s+T$S,T$i[1+T$$]=T$N+T$M,T$i[4+T$$]=T$u+T$e+T$T+T$S,T$i[5+T$$]=T$G+T$I+T$Y+T$M,T$i[8+T$$]=T$u+T$o+T$T+T$S,T$i[9+T$$]=T$Q+T$I+T$Y+T$M,T$i[12+T$$]=T$f+T$o+T$T+T$S,T$i[13+T$$]=T$Q+T$F+T$Y+T$M):(T$i[T$$]=T$f+T$e+T$T,T$i[1+T$$]=T$G+T$F+T$Y,T$i[4+T$$]=T$u+T$e+T$T,T$i[5+T$$]=T$G+T$I+T$Y,T$i[8+T$$]=T$u+T$o+T$T,T$i[9+T$$]=T$Q+T$I+T$Y,T$i[12+T$$]=T$f+T$o+T$T,T$i[13+T$$]=T$Q+T$F+T$Y);break;case 23:T$P?(T$s=T$x+T$J,T$S=Math.round(T$s)-T$s,T$N=T$b,T$M=Math.round(T$N)-T$N,T$i[T$$]=T$s+T$S,T$i[1+T$$]=T$N+T$M,T$i[4+T$$]=T$r+T$J+T$S,T$i[5+T$$]=T$b+T$M,T$i[8+T$$]=T$r+T$S,T$i[9+T$$]=T$m+T$M,T$i[12+T$$]=T$x+T$S,T$i[13+T$$]=T$m+T$M):(T$i[T$$]=T$x+T$J,T$i[1+T$$]=T$b,T$i[4+T$$]=T$r+T$J,T$i[5+T$$]=T$b,T$i[8+T$$]=T$r,T$i[9+T$$]=T$m,T$i[12+T$$]=T$x,T$i[13+T$$]=T$m);}return T$n._upload=!0;},T$b.fillLineVb=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){var T$W=.5*T$c,T$q=T$b._fillLineArray,T$J=-(T$E-T$p),T$j=T$_-T$y,T$P=Math.sqrt(T$J*T$J+T$j*T$j);T$J/=T$P,T$j/=T$P,T$J*=T$W,T$j*=T$W,T$q[0]=T$_-T$J,T$q[1]=T$E-T$j,T$q[4]=T$_+T$J,T$q[5]=T$E+T$j,T$q[8]=T$y+T$J,T$q[9]=T$p+T$j,T$q[12]=T$y-T$J,T$q[13]=T$p-T$j,T$l&&T$l.transformPointArray(T$q,T$q);var T$x=16+(T$n._byteLength>>2);return T$n.byteLength=T$x<<2,T$n.insertData(T$q,T$x-16),!0;},T$b._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T$b;}(),T$dn=(function(){function T$W(){}T$P(T$W,"laya.webgl.utils.MatirxArray"),T$W.ArrayMul=function(T$n,T$C,T$_){if(T$n){if(T$C)for(var T$E=NaN,T$y=NaN,T$p=NaN,T$c=NaN,T$l=0;T$l<4;T$l++)T$E=T$n[T$l],T$y=T$n[T$l+4],T$p=T$n[T$l+8],T$c=T$n[T$l+12],T$_[T$l]=T$E*T$C[0]+T$y*T$C[1]+T$p*T$C[2]+T$c*T$C[3],T$_[T$l+4]=T$E*T$C[4]+T$y*T$C[5]+T$p*T$C[6]+T$c*T$C[7],T$_[T$l+8]=T$E*T$C[8]+T$y*T$C[9]+T$p*T$C[10]+T$c*T$C[11],T$_[T$l+12]=T$E*T$C[12]+T$y*T$C[13]+T$p*T$C[14]+T$c*T$C[15];else T$W.copyArray(T$n,T$_);}else T$W.copyArray(T$C,T$_);},T$W.copyArray=function(T$n,T$C){if(T$n&&T$C)for(var T$_=0;T$_<T$n.length;T$_++)T$C[T$_]=T$n[T$_];};}(),function(){function T$C(T$n,T$C,T$_){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=T$n,this._vb=new T$Dn(T$n,35048),T$C&&this._vb._resizeBuffer(T$C,!1),this._ib=new T$Kn(),T$_&&this._ib._resizeBuffer(T$_,!1);}T$P(T$C,"laya.webgl.utils.Mesh2D");var T$n=T$C.prototype;return T$n.cloneWithNewVB=function(){var T$n=new T$C(this._stride,0,0);return T$n._ib=this._ib,T$n._quadNum=this._quadNum,T$n._attribInfo=this._attribInfo,T$n;},T$n.cloneWithNewVBIB=function(){var T$n=new T$C(this._stride,0,0);return T$n._attribInfo=this._attribInfo,T$n;},T$n.getVBW=function(){return this._vb.setNeedUpload(),this._vb;},T$n.getVBR=function(){return this._vb;},T$n.getIBR=function(){return this._ib;},T$n.getIBW=function(){return this._ib.setNeedUpload(),this._ib;},T$n.createQuadIB=function(T$n){this._quadNum=T$n,this._ib._resizeBuffer(6*T$n*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var T$C=this._ib.getUint16Array(),T$_=0,T$E=0,T$y=0;T$y<T$n;T$y++)T$C[T$_++]=T$E,T$C[T$_++]=T$E+2,T$C[T$_++]=T$E+1,T$C[T$_++]=T$E,T$C[T$_++]=T$E+3,T$C[T$_++]=T$E+2,T$E+=4;this._ib.setNeedUpload();},T$n.setAttributes=function(T$n){if(this._attribInfo=T$n,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!";},T$n.getEleNum=function(){return this._ib.getBuffer().byteLength/2;},T$n.releaseMesh=function(){},T$n.destroy=function(){},T$n.clearVB=function(){this._vb.clear();},T$C._gvaoid=0,T$C;}()),T$an=function(){function T$y(){}return T$P(T$y,"laya.webgl.utils.RenderState2D"),T$y.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];},T$y.mat2MatArray=function(T$n,T$C){var T$_=T$n,T$E=T$C;return T$E[0]=T$_.a,T$E[1]=T$_.b,T$E[2]=T$y.EMPTYMAT4_ARRAY[2],T$E[3]=T$y.EMPTYMAT4_ARRAY[3],T$E[4]=T$_.c,T$E[5]=T$_.d,T$E[6]=T$y.EMPTYMAT4_ARRAY[6],T$E[7]=T$y.EMPTYMAT4_ARRAY[7],T$E[8]=T$y.EMPTYMAT4_ARRAY[8],T$E[9]=T$y.EMPTYMAT4_ARRAY[9],T$E[10]=T$y.EMPTYMAT4_ARRAY[10],T$E[11]=T$y.EMPTYMAT4_ARRAY[11],T$E[12]=T$_.tx,T$E[13]=T$_.ty,T$E[14]=T$y.EMPTYMAT4_ARRAY[14],T$E[15]=T$y.EMPTYMAT4_ARRAY[15],T$C;},T$y.restoreTempArray=function(){T$y.TEMPMAT4_ARRAY[0]=1,T$y.TEMPMAT4_ARRAY[1]=0,T$y.TEMPMAT4_ARRAY[4]=0,T$y.TEMPMAT4_ARRAY[5]=1,T$y.TEMPMAT4_ARRAY[12]=0,T$y.TEMPMAT4_ARRAY[13]=0;},T$y.clear=function(){T$y.worldScissorTest=!1,T$y.worldShaderDefines=null,T$y.worldFilters=null,T$y.worldAlpha=1,T$y.worldClipRect.x=T$y.worldClipRect.y=0,T$y.worldClipRect.width=T$y.width,T$y.worldClipRect.height=T$y.height,T$y.curRenderTarget=null;},T$y._MAXSIZE=99999999,T$y.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T$y.worldMatrix4=T$y.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T$y.worldAlpha=1,T$y.worldScissorTest=!1,T$y.worldFilters=null,T$y.worldShaderDefines=null,T$y.curRenderTarget=null,T$y.width=0,T$y.height=0,T$c(T$y,["worldMatrix",function(){return this.worldMatrix=new T$s();},"worldClipRect",function(){return this.worldClipRect=new T$S(0,0,99999999,99999999);}]),T$y;}(),T$On=function(){var T$a,T$_;function T$O(T$n,T$C,T$_,T$E,T$y){var T$p=this;function T$c(T$n){var T$C=[],T$_=new T$a(T$C);return T$p._compileToTree(T$_,T$n.split("\n"),0,T$C,T$y),T$_;}var T$l=T$x.now();this._VS=T$c(T$C),this._PS=T$c(T$_),this._nameMap=T$E,2<T$x.now()-T$l&&console.log("ShaderCompile use time:"+(T$x.now()-T$l)+"  size:"+T$C.length+"/"+T$_.length);}T$P(T$O,"laya.webgl.utils.ShaderCompile");var T$n=T$O.prototype;return T$n._compileToTree=function(T$n,T$C,T$_,T$E,T$y){var T$p,T$c,T$l,T$W,T$q,T$J,T$j,T$P=0,T$x=0,T$b=0,T$r=0;for(T$x=T$_;T$x<T$C.length;T$x++)if(!((T$l=T$C[T$x]).length<1)&&0!==(T$P=T$l.indexOf("//"))){if(0<=T$P&&(T$l=T$l.substr(0,T$P)),T$p=T$j||new T$a(T$E),T$j=null,T$p.text=T$l,T$p.noCompile=!0,0<=(T$P=T$l.indexOf("#"))){for(T$W="#",T$r=T$P+1,T$b=T$l.length;T$r<T$b;T$r++){var T$m=T$l.charAt(T$r);if(" "===T$m||"\t"===T$m||"\r"===T$m||"\n"===T$m||"?"===T$m)break;T$W+=T$m;}switch(T$p.name=T$W){case"#ifdef":case"#ifndef":if(T$p.src=T$l,T$p.noCompile=null!=T$l.match(/[!&|()=<>]/),T$p.noCompile?console.log("function():Boolean{return "+T$l.substr(T$P+T$p.name.length)+"}"):(T$J=T$l.replace(/^\s*/,"").split(/\s+/),T$p.setCondition(T$J[1],"#ifdef"===T$W?1:2),T$p.text="//"+T$p.text),T$p.setParent(T$n),T$n=T$p,T$y)for(T$J=T$l.substr(T$r).split(T$O._splitToWordExps3),T$r=0;T$r<T$J.length;T$r++)(T$l=T$J[T$r]).length&&(T$y[T$l]=!0);continue;case"#if":if(T$p.src=T$l,T$p.noCompile=!0,T$p.setParent(T$n),T$n=T$p,T$y)for(T$J=T$l.substr(T$r).split(T$O._splitToWordExps3),T$r=0;T$r<T$J.length;T$r++)(T$l=T$J[T$r]).length&&"defined"!=T$l&&(T$y[T$l]=!0);continue;case"#else":T$p.src=T$l,T$c=(T$n=T$n.parent).childs[T$n.childs.length-1],T$p.noCompile=T$c.noCompile,T$p.noCompile||(T$p.condition=T$c.condition,T$p.conditionType=1==T$c.conditionType?2:1,T$p.text="//"+T$p.text+" "+T$c.text+" "+T$p.conditionType),T$p.setParent(T$n),T$n=T$p;continue;case"#endif":T$c=(T$n=T$n.parent).childs[T$n.childs.length-1],T$p.noCompile=T$c.noCompile,T$p.noCompile||(T$p.text="//"+T$p.text),T$p.setParent(T$n);continue;case"#include":T$J=T$O.splitToWords(T$l,null);var T$d=T$O.includes[T$J[1]];if(!T$d)throw"ShaderCompile error no this include file:"+T$J[1];if((T$P=T$J[0].indexOf("?"))<0){T$p.setParent(T$n),T$l=T$d.getWith("with"==T$J[2]?T$J[3]:null),this._compileToTree(T$p,T$l.split("\n"),0,T$E,T$y),T$p.text="";continue;}T$p.setCondition(T$J[0].substr(T$P+1),1),T$p.text=T$d.getWith("with"==T$J[2]?T$J[3]:null);break;case"#import":T$q=(T$J=T$O.splitToWords(T$l,null))[1],T$E.push({node:T$p,file:T$O.includes[T$q],ofs:T$p.text.length});continue;}}else{if((T$c=T$n.childs[T$n.childs.length-1])&&!T$c.name){0<T$E.length&&T$O.splitToWords(T$l,T$c),T$j=T$p,T$c.text+="\n"+T$l;continue;}0<T$E.length&&T$O.splitToWords(T$l,T$p);}T$p.setParent(T$n);}},T$n.createShader=function(T$n,T$C,T$_){var T$E={},T$y="";if(T$n)for(var T$p in T$n)T$y+="#define "+T$p+"\n",T$E[T$p]=!0;var T$c=this._VS.toscript(T$E,[]),T$l=this._PS.toscript(T$E,[]);return(T$_||T$vn.create)(T$y+T$c.join("\n"),T$y+T$l.join("\n"),T$C,this._nameMap);},T$O._parseOne=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c={type:T$O.shaderParamsMap[T$_[T$E+1]],name:T$_[T$E+2],size:isNaN(parseInt(T$_[T$E+3]))?1:parseInt(T$_[T$E+3])};return T$p&&("attribute"==T$y?T$n.push(T$c):T$C.push(T$c)),":"==T$_[T$E+3]&&(T$c.type=T$_[T$E+4],T$E+=2),T$E+=2;},T$O.addInclude=function(T$n,T$C){if(!T$C||0===T$C.length)throw new Error("add shader include file err:"+T$n);if(T$O.includes[T$n])throw new Error("add shader include file err, has add:"+T$n);T$O.includes[T$n]=new T$_(T$C);},T$O.preGetParams=function(T$n,T$C){var T$_=[T$n,T$C],T$E={},T$y=[],T$p=[],T$c={},T$l=[];T$E.attributes=T$y,T$E.uniforms=T$p,T$E.defines=T$c;for(var T$W=0,T$q=0,T$J=0;T$J<2;T$J++){T$_[T$J]=T$_[T$J].replace(T$O._removeAnnotation,"");var T$j,T$P=T$_[T$J].match(T$O._reg);for(T$W=0,T$q=T$P.length;T$W<T$q;T$W++){var T$x=T$P[T$W];if("attribute"==T$x||"uniform"==T$x)T$W=T$O._parseOne(T$y,T$p,T$P,T$W,T$x,!0);else{if("#define"==T$x){T$l[T$x=T$P[++T$W]]=1;continue;}if("#ifdef"==T$x){T$c[T$j=T$P[++T$W]]=T$c[T$j]||[];for(T$W++;T$W<T$q;T$W++)if("attribute"==(T$x=T$P[T$W])||"uniform"==T$x)T$W=T$O._parseOne(T$y,T$p,T$P,T$W,T$x,T$l[T$j]);else if("#else"==T$x)for(T$W++;T$W<T$q;T$W++)if("attribute"==(T$x=T$P[T$W])||"uniform"==T$x)T$W=T$O._parseOne(T$y,T$p,T$P,T$W,T$x,!T$l[T$j]);else if("#endif"==T$x)break;}}}}return T$E;},T$O.splitToWords=function(T$n,T$C){for(var T$_,T$E,T$y=[],T$p=-1,T$c=0,T$l=T$n.length;T$c<T$l;T$c++)if(T$_=T$n.charAt(T$c),0<=" \t=+-*/&%!<>()'\",;".indexOf(T$_)){if(0<=T$p&&1<T$c-T$p&&(T$E=T$n.substr(T$p,T$c-T$p),T$y.push(T$E)),'"'==T$_||"'"==T$_){var T$W=T$n.indexOf(T$_,T$c+1);if(T$W<0)throw"Sharder err:"+T$n;T$y.push(T$n.substr(T$c+1,T$W-T$c-1)),T$c=T$W,T$p=-1;continue;}"("==T$_&&T$C&&0<T$y.length&&(T$E=T$y[T$y.length-1]+";","vec4;main;".indexOf(T$E)<0&&(T$C.useFuns+=T$E)),T$p=-1;}else T$p<0&&(T$p=T$c);return T$p<T$l&&1<T$l-T$p&&(T$E=T$n.substr(T$p,T$l-T$p),T$y.push(T$E)),T$y;},T$O.IFDEF_NO=0,T$O.IFDEF_YES=1,T$O.IFDEF_ELSE=2,T$O.IFDEF_PARENT=3,T$O._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),T$O._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),T$O._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),T$O.includes={},T$c(T$O,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680};},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g");}]),T$O.__init$=function(){T$a=function(){function T$_(T$n){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=T$n;}T$P(T$_,"");var T$n=T$_.prototype;return T$n.setParent=function(T$n){T$n.childs.push(this),this.z=T$n.z+1,this.parent=T$n;},T$n.setCondition=function(T$n,T$C){T$n&&(this.conditionType=T$C,T$n=T$n.replace(/(\s*$)/g,""),this.condition=function(){return this[T$n];},this.condition.__condition=T$n);},T$n.toscript=function(T$n,T$C){return this._toscript(T$n,T$C,++T$_.__id);},T$n._toscript=function(T$E,T$y,T$p){if(this.childs.length<1&&!this.text)return T$y;T$y.length;if(this.condition){var T$n=!!this.condition.call(T$E);if(2===this.conditionType&&(T$n=!T$n),!T$n)return T$y;}if(this.text&&T$y.push(this.text),0<this.childs.length&&this.childs.forEach(function(T$n,T$C,T$_){T$n._toscript(T$E,T$y,T$p);}),0<this.includefiles.length&&0<this.useFuns.length)for(var T$C,T$_=0,T$c=this.includefiles.length;T$_<T$c;T$_++)this.includefiles[T$_].curUseID!=T$p&&0<(T$C=this.includefiles[T$_].file.getFunsScript(this.useFuns)).length&&(this.includefiles[T$_].curUseID=T$p,T$y[0]=T$C+T$y[0]);return T$y;},T$_.__id=1,T$_;}(),T$_=function(){function T$n(T$n){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=T$n;for(var T$C=0,T$_=0,T$E=0;!((T$C=T$n.indexOf("#begin",T$C))<0);){for(T$E=T$C+5;!((T$E=T$n.indexOf("#end",T$E))<0)&&"i"===T$n.charAt(T$E+4);)T$E+=5;if(T$E<0)throw"add include err,no #end:"+T$n;T$_=T$n.indexOf("\n",T$C);var T$y=T$O.splitToWords(T$n.substr(T$C,T$_-T$C),null);"code"==T$y[1]?this.codes[T$y[2]]=T$n.substr(T$_+1,T$E-T$_-1):"function"==T$y[1]&&(T$_=T$n.indexOf("function",T$C),T$_+="function".length,this.funs[T$y[3]]=T$n.substr(T$_+1,T$E-T$_-1),this.funnames+=T$y[3]+";"),T$C=T$E+1;}}T$P(T$n,"");var T$C=T$n.prototype;return T$C.getWith=function(T$n){var T$C=T$n?this.codes[T$n]:this.script;if(!T$C)throw"get with error:"+T$n;return T$C;},T$C.getFunsScript=function(T$n){var T$C="";for(var T$_ in this.funs)0<=T$n.indexOf(T$_+";")&&(T$C+=this.funs[T$_]);return T$C;},T$n;}();},T$O;}(),T$An=function(){function T$c(){}return T$P(T$c,"laya.webgl.WebGL"),T$c._uint8ArraySlice=function(){for(var T$n=this.length,T$C=new Uint8Array(this.length),T$_=0;T$_<T$n;T$_++)T$C[T$_]=this[T$_];return T$C;},T$c._float32ArraySlice=function(){for(var T$n=this.length,T$C=new Float32Array(this.length),T$_=0;T$_<T$n;T$_++)T$C[T$_]=this[T$_];return T$C;},T$c._uint16ArraySlice=function(T$n){var T$C,T$_=arguments,T$E=0,T$y=0;if(0===T$_.length)for(T$E=this.length,T$C=new Uint16Array(T$E),T$y=0;T$y<T$E;T$y++)T$C[T$y]=this[T$y];else if(2===T$_.length){var T$p=T$_[0],T$c=T$_[1];if(T$p<T$c)for(T$E=T$c-T$p,T$C=new Uint16Array(T$E),T$y=T$p;T$y<T$c;T$y++)T$C[T$y-T$p]=this[T$y];else T$C=new Uint16Array(0);}return T$C;},T$c.expandContext=function(){var T$n=T$y.prototype,T$C=CanvasRenderingContext2D.prototype;T$C.fillTrangles=T$n.fillTrangles,T$Rn.__int__(null),T$C.setIBVB=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q){void 0===T$W&&(T$W=0),void 0===T$q&&(T$q=0),null===T$_&&(this._ib=this._ib||T$Kn.QuadrangleIB,T$_=this._ib,T$mn.expandIBQuadrangle(T$_,T$E._byteLength/64+8)),this._setIBVB(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q);},T$C.fillTrangles=function(T$n,T$C,T$_,T$E,T$y){this._curMat=this._curMat||T$s.create(),this._vb=this._vb||T$Dn.create(),this._ib||(this._ib=T$Kn.create(),T$mn.fillIBQuadrangle(this._ib,T$c/4));var T$p=this._vb,T$c=T$E.length>>4;T$mn.fillTranglesVB(T$p,T$C,T$_,T$E,T$y||this._curMat,0,0),T$mn.expandIBQuadrangle(this._ib,T$p._byteLength/64+8);var T$l=new T$Yn(1,0);T$l.textureHost=T$n;var T$W=new T$Un("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");T$p._vertType=3,this._setIBVB(T$C,T$_,this._ib,T$p,6*T$c,T$y,T$W,T$l,0,0);};},T$c.enable=function(){if(T$x.__init__(),T$d.isConchApp&&!T$d.isConchWebGL)return T$k.skinAniSprite=function(){return new T$nn();},T$c.expandContext(),!1;if(T$k.getWebGLContext=function(T$n){for(var T$C,T$_=["webgl","experimental-webgl","webkit-3d","moz-webgl"],T$E=0;T$E<T$_.length;T$E++){try{T$C=T$n.getContext(T$_[T$E],{stencil:T$T.isStencil,alpha:T$T.isAlpha,antialias:T$T.isAntialias,premultipliedAlpha:T$T.premultipliedAlpha,preserveDrawingBuffer:T$T.preserveDrawingBuffer});}catch(T$n){}if(T$C)return T$C;}return null;},null==(T$c.mainContext=T$c.mainContext||T$k.getWebGLContext(T$d._mainCanvas)))return!1;if(T$d.isWebGL)return!0;T$r.create=function(T$n,T$C){return new T$nC(T$n,T$C);},T$m.create=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){return new T$hn(T$n,T$C,T$_,T$E,T$y,T$p,T$c);},T$d.WebGL=T$c,T$d.isWebGL=!0,T$xn.__init__(),T$k.createRenderSprite=function(T$n,T$C){return new T$sn(T$n,T$C);},T$k.createWebGLContext2D=function(T$n){return new T$Tn(T$n);},T$k.changeWebGLSize=function(T$n,T$C){laya.webgl.WebGL.onStageResize(T$n,T$C);},T$k.createGraphics=function(){return new T$tn();};var T$n=T$k.createFilterAction;return T$k.createFilterAction=T$n||function(T$n){return new T$Nn();},T$k.clear=function(T$n){T$an.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var T$C=T$d.context.ctx,T$_=0==T$C._submits._length||T$T.preserveDrawingBuffer?T$b.create(T$n)._color:T$w._wgColor;T$_&&T$C.clearBG(T$_[0],T$_[1],T$_[2],T$_[3]),T$an.clear();},T$k.addToAtlas=function(T$n,T$C){void 0===T$C&&(T$C=!1);var T$_=T$n.bitmap;T$d.optimizeTextureMemory(T$n.url,T$n)?T$t.__typeof(T$_,"laya.webgl.resource.IMergeAtlasBitmap")&&T$_.allowMerageInAtlas&&T$_.on("recovered",T$n,T$n.addTextureToAtlas):T$_.enableMerageInAtlas=!1;},T$k.isAtlas=function(T$n){return T$n instanceof laya.webgl.atlas.AtlasWebGLCanvas;},T$F._enable(),T$k.beginFlush=function(){for(var T$n=T$F.instance,T$C=T$n.getAtlaserCount(),T$_=0;T$_<T$C;T$_++){var T$E=T$n.getAtlaserByIndex(T$_).texture;T$E._flashCacheImageNeedFlush&&T$k.flashFlushImage(T$E);}},T$k.drawToCanvas=function(T$n,T$C,T$_,T$E,T$y,T$p){(T$_<=0||T$E<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),T$_|=0,T$E|=0,T$y|=0,T$p|=0;var T$c=T$in.create(T$_,T$E,6408,5121,0,!1);T$c.start(),T$c.clear(0,0,0,0),T$d.context.clear(),T$a.renders[T$C]._fun(T$n,T$d.context,T$y,T$an.height-T$E+T$p),T$d.context.flush(),T$c.end();var T$l=T$c.getData(0,0,T$_,T$E);if(T$c.recycle(),T$l.byteLength==T$_*T$E*4){var T$W=new T$In();T$W._canvas=T$x.createElement("canvas"),T$W.size(T$_,T$E);var T$q=T$W._canvas.getContext("2d");T$x.canvas.size(T$_,T$E);var T$J=T$x.context,T$j=T$J.createImageData(T$_,T$E);return T$j.data.set(new Uint8ClampedArray(T$l.buffer)),T$W._imgData=T$j,T$J.putImageData(T$j,0,0),T$q.save(),T$q.translate(0,T$E),T$q.scale(1,-1),T$q.drawImage(T$x.canvas.source,0,0),T$q.restore(),T$W;}console.log("drawToCanvas error: w:"+T$_+",h:"+T$E+",datalen:"+T$l.byteLength);},T$k.createFilterAction=function(T$n){var T$C;switch(T$n){case 32:T$C=new T$Nn();}return T$C;},T$k.addTextureToAtlas=function(T$n){T$n._uvID++,T$F._atlasRestore++,T$n.bitmap.enableMerageInAtlas&&T$F.instance.addToAtlas(T$n);},T$k.getTexturePixels=function(T$n,T$C,T$_,T$E,T$y){T$d.context.ctx.clear();var T$p=new T$M();T$p.graphics.drawTexture(T$n,-T$C,-T$_);var T$c=T$in.create(T$E,T$y);T$c.start(),T$c.clear(0,0,0,0),T$p.render(T$d.context,0,0),T$d.context.ctx.flush(),T$c.end();for(var T$l=T$c.getData(0,0,T$E,T$y),T$W=[],T$q=0,T$J=T$y-1;0<=T$J;T$J--)for(var T$j=0;T$j<T$E;T$j++)T$q=4*(T$J*T$E+T$j),T$W.push(T$l[T$q]),T$W.push(T$l[T$q+1]),T$W.push(T$l[T$q+2]),T$W.push(T$l[T$q+3]);return T$W;},T$k.skinAniSprite=function(){return new T$nn();},T$q.create=function(T$n,T$C){var T$_=new T$In();return T$_._imgData=T$C,T$_.flipY=!1,T$_;},T$Y._filterStart=function(T$n,T$C,T$_,T$E,T$y){var T$p=T$n.getValue("bounds"),T$c=T$in.create(T$p.width,T$p.height);if(T$c.start(),T$c.clear(0,0,0,0),T$n.addValue("src",T$c),T$n.addValue("ScissorTest",T$an.worldScissorTest),T$an.worldScissorTest){var T$l=new T$S();T$l.copyFrom(T$_.ctx._clipRect),T$n.addValue("clipRect",T$l),T$an.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089);}},T$Y._filterEnd=function(T$n,T$C,T$_,T$E,T$y){var T$p=T$n.getValue("bounds");T$n.getValue("src").end();var T$c=T$in.create(T$p.width,T$p.height);T$c.start(),T$c.clear(0,0,0,0),T$n.addValue("out",T$c),T$C._set$P("_filterCache",T$c),T$C._set$P("_isHaveGlowFilter",T$n.getValue("_isHaveGlowFilter"));},T$Y._EndTarget=function(T$n,T$C){if(T$n.getValue("src").recycle(),T$n.getValue("out").end(),T$n.getValue("ScissorTest")){T$an.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),T$C.ctx.save();var T$_=T$n.getValue("clipRect");T$C.ctx.clipRect(T$_.x,T$_.y,T$_.width,T$_.height);}},T$Y._useSrc=function(T$n){var T$C=T$n.getValue("out");T$C.end(),(T$C=T$n.getValue("src")).start(),T$C.clear(0,0,0,0);},T$Y._endSrc=function(T$n){T$n.getValue("src").end();},T$Y._useOut=function(T$n){var T$C=T$n.getValue("src");T$C.end(),(T$C=T$n.getValue("out")).start(),T$C.clear(0,0,0,0);},T$Y._endOut=function(T$n){T$n.getValue("out").end();},T$Y._recycleScope=function(T$n){T$n.recycle();},T$Y._filter=function(T$n,T$C,T$_,T$E){var T$y=this._next;if(T$y){var T$p,T$c,T$l=T$n.filters,T$W=T$l.length;if(1==T$W&&32==T$l[0].type)return T$C.ctx.save(),T$C.ctx.setFilters([T$l[0]]),T$y._fun.call(T$y,T$n,T$C,T$_,T$E),void T$C.ctx.restore();var T$q=T$ln.create(),T$J=T$N.TEMP,T$j=T$C.ctx._getTransformMatrix(),T$P=T$s.create();T$j.copyTo(T$P);var T$x=0,T$b=0,T$r=!1,T$m=T$n._$P._filterCache?T$n._$P._filterCache:null;if(!T$m||T$n._repaint){T$r=T$n._isHaveGlowFilter(),T$q.addValue("_isHaveGlowFilter",T$r),T$r&&(T$x=50,T$b=25),(T$c=new T$S()).copyFrom(T$n.getSelfBounds()),T$c.x+=T$n.x,T$c.y+=T$n.y,T$c.x-=T$n.pivotX+4,T$c.y-=T$n.pivotY+4;var T$d=T$c.x,T$a=T$c.y;if(T$c.width+=T$x+8,T$c.height+=T$x+8,T$J.x=T$c.x*T$P.a+T$c.y*T$P.c,T$J.y=T$c.y*T$P.d+T$c.x*T$P.b,T$c.x=T$J.x,T$c.y=T$J.y,T$J.x=T$c.width*T$P.a+T$c.height*T$P.c,T$J.y=T$c.height*T$P.d+T$c.width*T$P.b,T$c.width=T$J.x,T$c.height=T$J.y,T$c.width<=0||T$c.height<=0)return;T$m&&T$m.recycle(),T$q.addValue("bounds",T$c);var T$O=T$cn.create([T$q,T$n,T$C,0,0],T$Y._filterStart);T$C.addRenderObject(T$O),T$C.ctx._renderKey=0,T$C.ctx._shader2D.glTexture=null;var T$A=T$n.x-T$d+T$b,T$k=T$n.y-T$a+T$b;T$y._fun.call(T$y,T$n,T$C,T$A,T$k),T$O=T$cn.create([T$q,T$n,T$C,0,0],T$Y._filterEnd),T$C.addRenderObject(T$O);for(var T$t=0;T$t<T$W;T$t++){0!=T$t&&(T$O=T$cn.create([T$q],T$Y._useSrc),T$C.addRenderObject(T$O),T$p=T$Yn.create(1,0),T$s.TEMP.identity(),T$C.ctx.drawTarget(T$q,0,0,T$c.width,T$c.height,T$s.TEMP,"out",T$p,null,T$o.TOINT.overlay),T$O=T$cn.create([T$q],T$Y._useOut),T$C.addRenderObject(T$O)),T$l[T$t].action.apply3d(T$q,T$n,T$C,0,0);}T$O=T$cn.create([T$q,T$C],T$Y._EndTarget),T$C.addRenderObject(T$O);}else{if((T$r=!!T$n._$P._isHaveGlowFilter&&T$n._$P._isHaveGlowFilter)&&(T$x=50,T$b=25),(T$c=T$n.getBounds()).width<=0||T$c.height<=0)return;T$c.width+=T$x,T$c.height+=T$x,T$J.x=T$c.x*T$P.a+T$c.y*T$P.c,T$J.y=T$c.y*T$P.d+T$c.x*T$P.b,T$c.x=T$J.x,T$c.y=T$J.y,T$J.x=T$c.width*T$P.a+T$c.height*T$P.c,T$J.y=T$c.height*T$P.d+T$c.width*T$P.b,T$c.width=T$J.x,T$c.height=T$J.y,T$q.addValue("out",T$m);}T$_=T$_-T$b-T$n.x,T$E=T$E-T$b-T$n.y,T$J.setTo(T$_,T$E),T$P.transformPoint(T$J),T$_=T$J.x+T$c.x,T$E=T$J.y+T$c.y,T$p=T$Yn.create(1,0),T$s.TEMP.identity(),T$C.ctx.drawTarget(T$q,T$_,T$E,T$c.width,T$c.height,T$s.TEMP,"out",T$p,null,T$o.TOINT.overlay),T$O=T$cn.create([T$q],T$Y._recycleScope),T$C.addRenderObject(T$O),T$P.destroy();}},Float32Array.prototype.slice||(Float32Array.prototype.slice=T$c._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=T$c._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=T$c._uint8ArraySlice),!0;},T$c.onStageResize=function(T$n,T$C){null!=T$c.mainContext&&(T$c.mainContext.viewport(0,0,T$n,T$C),T$an.width=T$n,T$an.height=T$C);},T$c.onInvalidGLRes=function(){T$F.instance.freeAll(),T$A.releaseContentManagers(!0),T$c.doNodeRepaint(T$t.stage),T$c.mainContext.viewport(0,0,T$an.width,T$an.height),T$t.stage.event("devicelost");},T$c.doNodeRepaint=function(T$n){0==T$n.numChildren&&T$n.repaint();for(var T$C=0;T$C<T$n.numChildren;T$C++)T$c.doNodeRepaint(T$n.getChildAt(T$C));},T$c.init=function(T$n,T$C,T$_){T$c.mainCanvas=T$n,T$q._createContext=function(T$n){return new T$Tn(T$n);},T$In._createContext=function(T$n){return new T$Tn(T$n);};var T$E=laya.webgl.WebGL.mainContext;if(null!=T$E.getShaderPrecisionFormat){var T$y=T$E.getShaderPrecisionFormat(35633,36338),T$p=T$E.getShaderPrecisionFormat(35632,36338);T$c.shaderHighPrecision=!(!T$y.precision||!T$p.precision);}else T$c.shaderHighPrecision=!1;if(T$c.compressAstc=T$E.getExtension("WEBGL_compressed_texture_astc"),T$c.compressAtc=T$E.getExtension("WEBGL_compressed_texture_atc"),T$c.compressEtc=T$E.getExtension("WEBGL_compressed_texture_etc"),T$c.compressEtc1=T$E.getExtension("WEBGL_compressed_texture_etc1"),T$c.compressPvrtc=T$E.getExtension("WEBGL_compressed_texture_pvrtc"),T$c.compressS3tc=T$E.getExtension("WEBGL_compressed_texture_s3tc"),T$c.compressS3tc_srgb=T$E.getExtension("WEBGL_compressed_texture_s3tc_srgb"),T$c.compressAstc=T$c.compressAstc?T$c.compressAstc:{},T$c.compressAtc=T$c.compressAtc?T$c.compressAtc:{},T$c.compressEtc=T$c.compressEtc?T$c.compressEtc:{},T$c.compressEtc1=T$c.compressEtc1?T$c.compressEtc1:{},T$c.compressPvrtc=T$c.compressPvrtc?T$c.compressPvrtc:{},T$c.compressS3tc=T$c.compressS3tc?T$c.compressS3tc:{},T$c.compressS3tc_srgb=T$c.compressS3tc_srgb?T$c.compressS3tc_srgb:{},T$E.deleteTexture1=T$E.deleteTexture,T$E.deleteTexture=function(T$n){T$n==T$kn.curBindTexValue&&(T$kn.curBindTexValue=null),T$E.deleteTexture1(T$n);},T$c.onStageResize(T$C,T$_),null==T$c.mainContext)throw new Error("webGL getContext err!");T$g.__init__(),T$F.__init__(),T$Mn.__init__(),T$pn.__init__(),T$Tn.__init__(),T$Yn.__init__(),T$K.__init__(),T$Rn.__int__(T$E),T$o._init_(T$E),T$d.isConchApp&&conch.setOnInvalidGLRes(T$c.onInvalidGLRes);},T$c.mainCanvas=null,T$c.antialias=!0,T$c.shaderHighPrecision=!1,T$c._bg_null=[0,0,0,0],T$c;}(),T$kn=function(){function T$E(){}return T$P(T$E,"laya.webgl.WebGLContext"),T$E.UseProgram=function(T$n){return T$E._useProgram!==T$n&&(T$An.mainContext.useProgram(T$n),T$E._useProgram=T$n,!0);},T$E.setDepthTest=function(T$n,T$C){T$C!==T$E._depthTest&&((T$E._depthTest=T$C)?T$n.enable(2929):T$n.disable(2929));},T$E.setDepthMask=function(T$n,T$C){T$C!==T$E._depthMask&&(T$E._depthMask=T$C,T$n.depthMask(T$C));},T$E.setDepthFunc=function(T$n,T$C){T$C!==T$E._depthFunc&&(T$E._depthFunc=T$C,T$n.depthFunc(T$C));},T$E.setBlend=function(T$n,T$C){T$C!==T$E._blend&&((T$E._blend=T$C)?T$n.enable(3042):T$n.disable(3042));},T$E.setBlendFunc=function(T$n,T$C,T$_){(T$C!==T$E._sFactor||T$_!==T$E._dFactor)&&(T$E._sFactor=T$C,T$E._dFactor=T$_,T$n.blendFunc(T$C,T$_));},T$E.setCullFace=function(T$n,T$C){T$C!==T$E._cullFace&&((T$E._cullFace=T$C)?T$n.enable(2884):T$n.disable(2884));},T$E.setFrontFace=function(T$n,T$C){T$C!==T$E._frontFace&&(T$E._frontFace=T$C,T$n.frontFace(T$C));},T$E.bindTexture=function(T$n,T$C,T$_){T$n.bindTexture(T$C,T$_),T$E.curBindTexTarget=T$C,T$E.curBindTexValue=T$_;},T$E.DEPTH_BUFFER_BIT=256,T$E.STENCIL_BUFFER_BIT=1024,T$E.COLOR_BUFFER_BIT=16384,T$E.POINTS=0,T$E.LINES=1,T$E.LINE_LOOP=2,T$E.LINE_STRIP=3,T$E.TRIANGLES=4,T$E.TRIANGLE_STRIP=5,T$E.TRIANGLE_FAN=6,T$E.ZERO=0,T$E.ONE=1,T$E.SRC_COLOR=768,T$E.ONE_MINUS_SRC_COLOR=769,T$E.SRC_ALPHA=770,T$E.ONE_MINUS_SRC_ALPHA=771,T$E.DST_ALPHA=772,T$E.ONE_MINUS_DST_ALPHA=773,T$E.DST_COLOR=774,T$E.ONE_MINUS_DST_COLOR=775,T$E.SRC_ALPHA_SATURATE=776,T$E.FUNC_ADD=32774,T$E.BLEND_EQUATION=32777,T$E.BLEND_EQUATION_RGB=32777,T$E.BLEND_EQUATION_ALPHA=34877,T$E.FUNC_SUBTRACT=32778,T$E.FUNC_REVERSE_SUBTRACT=32779,T$E.BLEND_DST_RGB=32968,T$E.BLEND_SRC_RGB=32969,T$E.BLEND_DST_ALPHA=32970,T$E.BLEND_SRC_ALPHA=32971,T$E.CONSTANT_COLOR=32769,T$E.ONE_MINUS_CONSTANT_COLOR=32770,T$E.CONSTANT_ALPHA=32771,T$E.ONE_MINUS_CONSTANT_ALPHA=32772,T$E.BLEND_COLOR=32773,T$E.ARRAY_BUFFER=34962,T$E.ELEMENT_ARRAY_BUFFER=34963,T$E.ARRAY_BUFFER_BINDING=34964,T$E.ELEMENT_ARRAY_BUFFER_BINDING=34965,T$E.STREAM_DRAW=35040,T$E.STATIC_DRAW=35044,T$E.DYNAMIC_DRAW=35048,T$E.BUFFER_SIZE=34660,T$E.BUFFER_USAGE=34661,T$E.CURRENT_VERTEX_ATTRIB=34342,T$E.FRONT=1028,T$E.BACK=1029,T$E.CULL_FACE=2884,T$E.FRONT_AND_BACK=1032,T$E.BLEND=3042,T$E.DITHER=3024,T$E.STENCIL_TEST=2960,T$E.DEPTH_TEST=2929,T$E.SCISSOR_TEST=3089,T$E.POLYGON_OFFSET_FILL=32823,T$E.SAMPLE_ALPHA_TO_COVERAGE=32926,T$E.SAMPLE_COVERAGE=32928,T$E.NO_ERROR=0,T$E.INVALID_ENUM=1280,T$E.INVALID_VALUE=1281,T$E.INVALID_OPERATION=1282,T$E.OUT_OF_MEMORY=1285,T$E.CW=2304,T$E.CCW=2305,T$E.LINE_WIDTH=2849,T$E.ALIASED_POINT_SIZE_RANGE=33901,T$E.ALIASED_LINE_WIDTH_RANGE=33902,T$E.CULL_FACE_MODE=2885,T$E.FRONT_FACE=2886,T$E.DEPTH_RANGE=2928,T$E.DEPTH_WRITEMASK=2930,T$E.DEPTH_CLEAR_VALUE=2931,T$E.DEPTH_FUNC=2932,T$E.STENCIL_CLEAR_VALUE=2961,T$E.STENCIL_FUNC=2962,T$E.STENCIL_FAIL=2964,T$E.STENCIL_PASS_DEPTH_FAIL=2965,T$E.STENCIL_PASS_DEPTH_PASS=2966,T$E.STENCIL_REF=2967,T$E.STENCIL_VALUE_MASK=2963,T$E.STENCIL_WRITEMASK=2968,T$E.STENCIL_BACK_FUNC=34816,T$E.STENCIL_BACK_FAIL=34817,T$E.STENCIL_BACK_PASS_DEPTH_FAIL=34818,T$E.STENCIL_BACK_PASS_DEPTH_PASS=34819,T$E.STENCIL_BACK_REF=36003,T$E.STENCIL_BACK_VALUE_MASK=36004,T$E.STENCIL_BACK_WRITEMASK=36005,T$E.VIEWPORT=2978,T$E.SCISSOR_BOX=3088,T$E.COLOR_CLEAR_VALUE=3106,T$E.COLOR_WRITEMASK=3107,T$E.UNPACK_ALIGNMENT=3317,T$E.PACK_ALIGNMENT=3333,T$E.MAX_TEXTURE_SIZE=3379,T$E.MAX_VIEWPORT_DIMS=3386,T$E.SUBPIXEL_BITS=3408,T$E.RED_BITS=3410,T$E.GREEN_BITS=3411,T$E.BLUE_BITS=3412,T$E.ALPHA_BITS=3413,T$E.DEPTH_BITS=3414,T$E.STENCIL_BITS=3415,T$E.POLYGON_OFFSET_UNITS=10752,T$E.POLYGON_OFFSET_FACTOR=32824,T$E.TEXTURE_BINDING_2D=32873,T$E.SAMPLE_BUFFERS=32936,T$E.SAMPLES=32937,T$E.SAMPLE_COVERAGE_VALUE=32938,T$E.SAMPLE_COVERAGE_INVERT=32939,T$E.NUM_COMPRESSED_TEXTURE_FORMATS=34466,T$E.COMPRESSED_TEXTURE_FORMATS=34467,T$E.DONT_CARE=4352,T$E.FASTEST=4353,T$E.NICEST=4354,T$E.GENERATE_MIPMAP_HINT=33170,T$E.BYTE=5120,T$E.UNSIGNED_BYTE=5121,T$E.SHORT=5122,T$E.UNSIGNED_SHORT=5123,T$E.INT=5124,T$E.UNSIGNED_INT=5125,T$E.FLOAT=5126,T$E.DEPTH_COMPONENT=6402,T$E.ALPHA=6406,T$E.RGB=6407,T$E.RGBA=6408,T$E.LUMINANCE=6409,T$E.LUMINANCE_ALPHA=6410,T$E.UNSIGNED_SHORT_4_4_4_4=32819,T$E.UNSIGNED_SHORT_5_5_5_1=32820,T$E.UNSIGNED_SHORT_5_6_5=33635,T$E.FRAGMENT_SHADER=35632,T$E.VERTEX_SHADER=35633,T$E.MAX_VERTEX_ATTRIBS=34921,T$E.MAX_VERTEX_UNIFORM_VECTORS=36347,T$E.MAX_VARYING_VECTORS=36348,T$E.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,T$E.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,T$E.MAX_TEXTURE_IMAGE_UNITS=34930,T$E.MAX_FRAGMENT_UNIFORM_VECTORS=36349,T$E.SHADER_TYPE=35663,T$E.DELETE_STATUS=35712,T$E.LINK_STATUS=35714,T$E.VALIDATE_STATUS=35715,T$E.ATTACHED_SHADERS=35717,T$E.ACTIVE_UNIFORMS=35718,T$E.ACTIVE_ATTRIBUTES=35721,T$E.SHADING_LANGUAGE_VERSION=35724,T$E.CURRENT_PROGRAM=35725,T$E.NEVER=512,T$E.LESS=513,T$E.EQUAL=514,T$E.LEQUAL=515,T$E.GREATER=516,T$E.NOTEQUAL=517,T$E.GEQUAL=518,T$E.ALWAYS=519,T$E.KEEP=7680,T$E.REPLACE=7681,T$E.INCR=7682,T$E.DECR=7683,T$E.INVERT=5386,T$E.INCR_WRAP=34055,T$E.DECR_WRAP=34056,T$E.VENDOR=7936,T$E.RENDERER=7937,T$E.VERSION=7938,T$E.NEAREST=9728,T$E.LINEAR=9729,T$E.NEAREST_MIPMAP_NEAREST=9984,T$E.LINEAR_MIPMAP_NEAREST=9985,T$E.NEAREST_MIPMAP_LINEAR=9986,T$E.LINEAR_MIPMAP_LINEAR=9987,T$E.TEXTURE_MAG_FILTER=10240,T$E.TEXTURE_MIN_FILTER=10241,T$E.TEXTURE_WRAP_S=10242,T$E.TEXTURE_WRAP_T=10243,T$E.TEXTURE_2D=3553,T$E.TEXTURE=5890,T$E.TEXTURE_CUBE_MAP=34067,T$E.TEXTURE_BINDING_CUBE_MAP=34068,T$E.TEXTURE_CUBE_MAP_POSITIVE_X=34069,T$E.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,T$E.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,T$E.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,T$E.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,T$E.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,T$E.MAX_CUBE_MAP_TEXTURE_SIZE=34076,T$E.TEXTURE0=33984,T$E.TEXTURE1=33985,T$E.TEXTURE2=33986,T$E.TEXTURE3=33987,T$E.TEXTURE4=33988,T$E.TEXTURE5=33989,T$E.TEXTURE6=33990,T$E.TEXTURE7=33991,T$E.TEXTURE8=33992,T$E.TEXTURE9=33993,T$E.TEXTURE10=33994,T$E.TEXTURE11=33995,T$E.TEXTURE12=33996,T$E.TEXTURE13=33997,T$E.TEXTURE14=33998,T$E.TEXTURE15=33999,T$E.TEXTURE16=34e3,T$E.TEXTURE17=34001,T$E.TEXTURE18=34002,T$E.TEXTURE19=34003,T$E.TEXTURE20=34004,T$E.TEXTURE21=34005,T$E.TEXTURE22=34006,T$E.TEXTURE23=34007,T$E.TEXTURE24=34008,T$E.TEXTURE25=34009,T$E.TEXTURE26=34010,T$E.TEXTURE27=34011,T$E.TEXTURE28=34012,T$E.TEXTURE29=34013,T$E.TEXTURE30=34014,T$E.TEXTURE31=34015,T$E.ACTIVE_TEXTURE=34016,T$E.REPEAT=10497,T$E.CLAMP_TO_EDGE=33071,T$E.MIRRORED_REPEAT=33648,T$E.FLOAT_VEC2=35664,T$E.FLOAT_VEC3=35665,T$E.FLOAT_VEC4=35666,T$E.INT_VEC2=35667,T$E.INT_VEC3=35668,T$E.INT_VEC4=35669,T$E.BOOL=35670,T$E.BOOL_VEC2=35671,T$E.BOOL_VEC3=35672,T$E.BOOL_VEC4=35673,T$E.FLOAT_MAT2=35674,T$E.FLOAT_MAT3=35675,T$E.FLOAT_MAT4=35676,T$E.SAMPLER_2D=35678,T$E.SAMPLER_CUBE=35680,T$E.VERTEX_ATTRIB_ARRAY_ENABLED=34338,T$E.VERTEX_ATTRIB_ARRAY_SIZE=34339,T$E.VERTEX_ATTRIB_ARRAY_STRIDE=34340,T$E.VERTEX_ATTRIB_ARRAY_TYPE=34341,T$E.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,T$E.VERTEX_ATTRIB_ARRAY_POINTER=34373,T$E.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,T$E.COMPILE_STATUS=35713,T$E.LOW_FLOAT=36336,T$E.MEDIUM_FLOAT=36337,T$E.HIGH_FLOAT=36338,T$E.LOW_INT=36339,T$E.MEDIUM_INT=36340,T$E.HIGH_INT=36341,T$E.FRAMEBUFFER=36160,T$E.RENDERBUFFER=36161,T$E.RGBA4=32854,T$E.RGB5_A1=32855,T$E.RGB565=36194,T$E.DEPTH_COMPONENT16=33189,T$E.STENCIL_INDEX=6401,T$E.STENCIL_INDEX8=36168,T$E.DEPTH_STENCIL=34041,T$E.RENDERBUFFER_WIDTH=36162,T$E.RENDERBUFFER_HEIGHT=36163,T$E.RENDERBUFFER_INTERNAL_FORMAT=36164,T$E.RENDERBUFFER_RED_SIZE=36176,T$E.RENDERBUFFER_GREEN_SIZE=36177,T$E.RENDERBUFFER_BLUE_SIZE=36178,T$E.RENDERBUFFER_ALPHA_SIZE=36179,T$E.RENDERBUFFER_DEPTH_SIZE=36180,T$E.RENDERBUFFER_STENCIL_SIZE=36181,T$E.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,T$E.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,T$E.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,T$E.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,T$E.COLOR_ATTACHMENT0=36064,T$E.DEPTH_ATTACHMENT=36096,T$E.STENCIL_ATTACHMENT=36128,T$E.DEPTH_STENCIL_ATTACHMENT=33306,T$E.NONE=0,T$E.FRAMEBUFFER_COMPLETE=36053,T$E.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,T$E.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,T$E.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,T$E.FRAMEBUFFER_UNSUPPORTED=36061,T$E.FRAMEBUFFER_BINDING=36006,T$E.RENDERBUFFER_BINDING=36007,T$E.MAX_RENDERBUFFER_SIZE=34024,T$E.INVALID_FRAMEBUFFER_OPERATION=1286,T$E.UNPACK_FLIP_Y_WEBGL=37440,T$E.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,T$E.CONTEXT_LOST_WEBGL=37442,T$E.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,T$E.BROWSER_DEFAULT_WEBGL=37444,T$E._useProgram=null,T$E._depthTest=!0,T$E._depthMask=!0,T$E._blend=!1,T$E._cullFace=!1,T$E.curBindTexTarget=null,T$E.curBindTexValue=null,T$c(T$E,["_depthFunc",function(){return this._depthFunc=513;},"_sFactor",function(){return this._sFactor=1;},"_dFactor",function(){return this._dFactor=0;},"_frontFace",function(){return this._frontFace=2305;}]),T$E;}(),T$tn=function(T$n){function T$C(){T$C.__super.call(this);}T$P(T$C,"laya.webgl.display.GraphicsGL",T$l);var T$_=T$C.prototype;return T$_.setShader=function(T$n){this._saveToCmd(T$d.context._setShader,[T$n]);},T$_.setIBVB=function(T$n,T$C,T$_,T$E,T$y,T$p){this._saveToCmd(T$d.context._setIBVB,[T$n,T$C,T$_,T$E,T$y,T$p]);},T$_.drawParticle=function(T$n,T$C,T$_){var T$E=T$k.createParticleTemplate2D(T$_);T$E.x=T$n,T$E.y=T$C,this._saveToCmd(T$d.context._drawParticle,[T$E]);},T$C;}(),T$Tn=function(T$n){var T$_;function T$G(T$n){this._x=0,this._y=0,this._id=++T$G._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,T$G.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=T$G.MAXCLIPRECT,this.mOutPoint,this._canvas=T$n,this._canvas._addReference(),T$G._contextcount++,T$d.isFlash?(this._ib=T$Kn.create(35044),T$mn.fillIBQuadrangle(this._ib,16)):this._ib=T$Kn.QuadrangleIB,this.clear();}T$P(T$G,"laya.webgl.canvas.WebGLContext2D",T$y);var T$C=T$G.prototype;return T$C.setIsMainContext=function(){this._isMain=!0;},T$C.clearBG=function(T$n,T$C,T$_,T$E){var T$y=T$An.mainContext;T$y.clearColor(T$n,T$C,T$_,T$E),T$y.clear(16384);},T$C._getSubmits=function(){return this._submits;},T$C._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var T$n=0,T$C=this._submits._length;T$n<T$C;T$n++)this._submits[T$n].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null);}},T$C.destroy=function(){--T$G._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=T$Kn.QuadrangleIB&&this._ib.releaseResource();},T$C.clear=function(){this._submits||(this._other=T$_.DEFAULT,this._curMat=T$s.create(),this._vb=T$Dn.create(-1),this._submits=[],this._save=[T$v.Create(this)],this._save.length=10,this._shader2D=new T$K(),this._triangleMesh=T$Xn.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=T$_.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=T$G.MAXCLIPRECT,this._curSubmit=T$pn.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=T$Q.DEFAULT;for(var T$n=0,T$C=this._submits._length;T$n<T$C;T$n++)this._submits[T$n].releaseRender(),this._submits[T$n]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1;},T$C.size=function(T$n,T$C){if(this._width!=T$n||this._height!=T$C)if(0==T$n||0==T$C){0!=this._vb._byteLength&&(this._width=T$n,this._height=T$C,this._vb.clear(),this._vb.upload());for(var T$_=0,T$E=this._submits._length;T$_<T$E;T$_++)this._submits[T$_].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null;}else this._width=T$n,this._height=T$C,this._targets&&this._targets.size(T$n,T$C),this._canvas.memorySize-=this._canvas.memorySize;0===T$n&&0===T$C&&this._releaseMem();},T$C._getTransformMatrix=function(){return this._curMat;},T$C.translate=function(T$n,T$C){0===T$n&&0===T$C||(T$z.save(this),this._curMat.bTransform&&(T$R.save(this),this._curMat.transformPointN(T$N.TEMP.setTo(T$n,T$C)),T$n=T$N.TEMP.x,T$C=T$N.TEMP.y),this._x+=T$n,this._y+=T$C);},T$C.save=function(){this._save[this._save._length++]=T$v.Create(this);},T$C.restore=function(){var T$n=this._save._length;if(!(T$n<1))for(var T$C=T$n-1;0<=T$C;T$C--){var T$_=this._save[T$C];if(T$_.restore(this),T$_.isSaveMark())return void(this._save._length=T$C);}},T$C._fillText=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q){void 0===T$q&&(T$q=0);var T$J=this._shader2D,T$j=this._curSubmit.shaderValue,T$P=T$y?T$bn.create(T$y):this._other.font;if(T$F.enabled)T$J.ALPHA!==T$j.ALPHA&&(T$J.glTexture=null),T$xn.drawText(this,T$n,T$C,this._curMat,T$P,T$W||this._other.textAlign,T$p,T$c,T$l,T$_,T$E,T$q);else{this._shader2D.defines.getValue();var T$x=T$p?T$b.create(T$p)._color:T$J.colorAdd;T$J.ALPHA===T$j.ALPHA&&T$x===T$J.colorAdd&&T$j.colorAdd===T$J.colorAdd||(T$J.glTexture=null,T$J.colorAdd=T$x),T$xn.drawText(this,T$n,T$C,this._curMat,T$P,T$W||this._other.textAlign,T$p,T$c,T$l,T$_,T$E,T$q);}},T$C.fillWords=function(T$n,T$C,T$_,T$E,T$y,T$p){this._fillText(null,T$n,T$C,T$_,T$E,T$y,null,-1,null,T$p);},T$C.fillBorderWords=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){this._fillBorderText(null,T$n,T$C,T$_,T$E,T$y,T$p,T$c,null);},T$C.fillText=function(T$n,T$C,T$_,T$E,T$y,T$p){this._fillText(T$n,null,T$C,T$_,T$E,T$y,null,-1,T$p);},T$C.strokeText=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){this._fillText(T$n,null,T$C,T$_,T$E,null,T$y,T$p||1,T$c);},T$C.fillBorderText=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){this._fillBorderText(T$n,null,T$C,T$_,T$E,T$y,T$p,T$c,T$l);},T$C._fillBorderText=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W){if(!T$F.enabled)return this._fillText(T$n,T$C,T$_,T$E,T$y,null,T$c,T$l||1,T$W),void this._fillText(T$n,T$C,T$_,T$E,T$y,T$p,null,-1,T$W);var T$q=this._shader2D,T$J=this._curSubmit.shaderValue;T$q.ALPHA!==T$J.ALPHA&&(T$q.glTexture=null);var T$j=T$y?(T$G._fontTemp.setFont(T$y),T$G._fontTemp):this._other.font;T$xn.drawText(this,T$n,T$C,this._curMat,T$j,T$W||this._other.textAlign,T$p,T$c,T$l||1,T$_,T$E,0);},T$C.fillRect=function(T$n,T$C,T$_,T$E,T$y){var T$p=this._vb;if(T$mn.fillRectImgVb(T$p,this._clipRect,T$n,T$C,T$_,T$E,T$X.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var T$c=this._shader2D.fillStyle;T$y&&(this._shader2D.fillStyle=T$Q.create(T$y));var T$l=this._shader2D,T$W=this._curSubmit.shaderValue;if(T$l.fillStyle!==T$W.fillStyle||T$l.ALPHA!==T$W.ALPHA){T$l.glTexture=null;var T$q=this._curSubmit=T$pn.createSubmit(this,this._ib,T$p,(T$p._byteLength-64)/32*3,T$Yn.create(2,0));T$q.shaderValue.color=T$l.fillStyle._color._color,T$q.shaderValue.ALPHA=T$l.ALPHA,this._submits[this._submits._length++]=T$q;}this._curSubmit._numEle+=6,this._shader2D.fillStyle=T$c;}},T$C.fillTexture=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){if(T$n.loaded&&T$n.bitmap&&T$n.source){var T$W=this._vb,T$q=T$n.bitmap.width,T$J=T$n.bitmap.height,T$j=T$n.uv,T$P=T$c.x%T$n.width,T$x=T$c.y%T$n.height;if(T$q!=T$l.w||T$J!=T$l.h){if(!T$l.w&&!T$l.h)switch(T$l.oy=T$l.ox=0,T$p){case"repeat":T$l.width=T$E,T$l.height=T$y;break;case"repeat-x":T$l.width=T$E,T$x<0?T$n.height+T$x>T$y?T$l.height=T$y:T$l.height=T$n.height+T$x:(T$l.oy=T$x,T$n.height+T$x>T$y?T$l.height=T$y-T$x:T$l.height=T$n.height);break;case"repeat-y":T$P<0?T$n.width+T$P>T$E?T$l.width=T$E:T$l.width=T$n.width+T$P:(T$l.ox=T$P,T$n.width+T$P>T$E?T$l.width=T$E-T$P:T$l.width=T$n.width),T$l.height=T$y;break;case"no-repeat":T$P<0?T$n.width+T$P>T$E?T$l.width=T$E:T$l.width=T$n.width+T$P:(T$l.ox=T$P,T$n.width+T$P>T$E?T$l.width=T$E-T$P:T$l.width=T$n.width),T$x<0?T$n.height+T$x>T$y?T$l.height=T$y:T$l.height=T$n.height+T$x:(T$l.oy=T$x,T$n.height+T$x>T$y?T$l.height=T$y-T$x:T$l.height=T$n.height);break;default:T$l.width=T$E,T$l.height=T$y;}T$l.w=T$q,T$l.h=T$J,T$l.uv=[0,0,T$l.width/T$q,0,T$l.width/T$q,T$l.height/T$J,0,T$l.height/T$J];}if(T$C+=T$l.ox,T$_+=T$l.oy,T$P-=T$l.ox,T$x-=T$l.oy,T$mn.fillRectImgVb(T$W,this._clipRect,T$C,T$_,T$l.width,T$l.height,T$l.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var T$b=T$Hn.create(this,this._ib,T$W,(T$W._byteLength-64)/32*3,T$Yn.create(256,0)),T$r=(this._submits[this._submits._length++]=T$b).shaderValue;T$r.textureHost=T$n;var T$m=T$j[0]*T$q,T$d=T$j[1]*T$J,T$a=(T$j[2]-T$j[0])*T$q,T$O=(T$j[5]-T$j[3])*T$J,T$A=-T$P/T$q,T$k=-T$x/T$J;T$r.u_TexRange[0]=T$m/T$q,T$r.u_TexRange[1]=T$a/T$q,T$r.u_TexRange[2]=T$d/T$J,T$r.u_TexRange[3]=T$O/T$J,T$r.u_offset[0]=T$A,T$r.u_offset[1]=T$k,T$F.enabled&&!this._isMain&&T$b.addTexture(T$n,(T$W._byteLength>>2)-16),(this._curSubmit=T$b)._renderType=10017,T$b._numEle+=6;}}else this.sprite&&T$t.timer.callLater(this,this._repaintSprite);},T$C.setShader=function(T$n){T$Z.save(this,1048576,this._shader2D,!0),this._shader2D.shader=T$n;},T$C.setFilters=function(T$n){T$Z.save(this,2097152,this._shader2D,!0),this._shader2D.filters=T$n,this._curSubmit=T$pn.RENDERBASE,this._renderKey=0,this._drawCount++;},T$C.drawTexture=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){this._drawTextureM(T$n,T$C,T$_,T$E,T$y,T$p,T$c,null,1);},T$C.addTextureVb=function(T$n,T$C,T$_){var T$E=this._curSubmit._vb||this._vb,T$y=T$E._byteLength>>2;T$E.byteLength=T$y+16<<2;for(var T$p=T$E.getFloat32Array(),T$c=0;T$c<16;T$c+=4)T$p[T$y++]=T$n[T$c]+T$C,T$p[T$y++]=T$n[T$c+1]+T$_,T$p[T$y++]=T$n[T$c+2],T$p[T$y++]=T$n[T$c+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),T$E._upload=!0;},T$C.willDrawTexture=function(T$n,T$C){if(!(T$n.loaded&&T$n.bitmap&&T$n.source))return this.sprite&&T$t.timer.callLater(this,this._repaintSprite),0;var T$_=T$n.bitmap,T$E=T$_.id+this._shader2D.ALPHA*T$C+10016;if(T$E==this._renderKey)return T$E;var T$y=this._shader2D,T$p=T$y.ALPHA,T$c=this._curSubmit.shaderValue;T$y.ALPHA*=T$C,this._renderKey=T$E,this._drawCount++,T$y.glTexture=T$_;var T$l=this._vb,T$W=null,T$q=T$l._byteLength/32*3,T$J=T$c.textureHost&&T$c.textureHost==T$n&&T$c.textureHost.alphaTexture==T$n.alphaTexture;return T$W=T$Hn.create(this,this._ib,T$l,T$q,T$Yn.create(1,0)),(this._submits[this._submits._length++]=T$W).shaderValue.textureHost=T$n,T$W._renderType=10016,T$W._preIsSameTextureShader=10016===this._curSubmit._renderType&&T$y.ALPHA===T$c.ALPHA&&T$J,this._curSubmit=T$W,T$y.ALPHA=T$p,T$E;},T$C.drawTextures=function(T$n,T$C,T$_,T$E){if(T$n.loaded&&T$n.bitmap&&T$n.source){var T$y=this._clipRect;if(this._clipRect=T$G.MAXCLIPRECT,this._drawTextureM(T$n,T$C[0],T$C[1],T$n.width,T$n.height,T$_,T$E,null,1)){if(this._clipRect=T$y,T$B.drawCall++,!(T$C.length<4)){for(var T$p=this._curSubmit._vb||this._vb,T$c=this._curMat.a,T$l=this._curMat.d,T$W=2,T$q=T$C.length;T$W<T$q;T$W+=2)T$mn.copyPreImgVb(T$p,(T$C[T$W]-T$C[T$W-2])*T$c,(T$C[T$W+1]-T$C[T$W-1])*T$l),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle);}}else alert("drawTextures err");}else this.sprite&&T$t.timer.callLater(this,this._repaintSprite);},T$C._drawTextureM=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W){if(!T$n.loaded||!T$n.source)return this.sprite&&T$t.timer.callLater(this,this._repaintSprite),!1;var T$q=this._curSubmit._vb||this._vb,T$J=T$n.bitmap;T$C+=T$p,T$_+=T$c,this._drawCount++;var T$j=T$J.id+this._shader2D.ALPHA*T$W+10016;if(T$j!=this._renderKey){this._renderKey=T$j;var T$P=this._curSubmit.shaderValue,T$x=this._shader2D,T$b=T$x.ALPHA;T$x.ALPHA*=T$W,T$x.glTexture=T$J;var T$r=this._vb,T$m=null,T$d=T$r._byteLength/32*3,T$a=T$P.textureHost&&T$P.textureHost==T$n&&T$P.textureHost.alphaTexture==T$n.alphaTexture;T$m=T$Hn.create(this,this._ib,T$r,T$d,T$Yn.create(1,0)),(this._submits[this._submits._length++]=T$m).shaderValue.textureHost=T$n,T$m._renderType=10016,T$m._preIsSameTextureShader=10016===this._curSubmit._renderType&&T$x.ALPHA===T$P.ALPHA&&T$a,this._curSubmit=T$m,T$q=this._curSubmit._vb||this._vb,T$x.ALPHA=T$b;}return!!T$mn.fillRectImgVb(T$q,this._clipRect,T$C,T$_,T$E||T$n.width,T$y||T$n.height,T$n.uv,T$l||this._curMat,this._x,this._y,0,0)&&(T$F.enabled&&!this._isMain&&this._curSubmit.addTexture(T$n,(T$q._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0);},T$C._repaintSprite=function(){this.sprite&&this.sprite.repaint();},T$C._drawText=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q){var T$J=T$n.bitmap;this._drawCount++;var T$j=T$J.id+this._shader2D.ALPHA+10016;if(T$j!=this._renderKey){this._renderKey=T$j;var T$P=this._curSubmit.shaderValue,T$x=this._shader2D;T$x.glTexture=T$J;var T$b=this._vb,T$r=null,T$m=T$b._byteLength/32*3,T$d=T$P.textureHost&&T$P.textureHost==T$n&&T$P.textureHost.alphaTexture==T$n.alphaTexture;(T$r=T$F.enabled?T$Hn.create(this,this._ib,T$b,T$m,T$Yn.create(1,0)):T$Hn.create(this,this._ib,T$b,T$m,T$zn.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&T$x.ALPHA===T$P.ALPHA&&T$d,(this._submits[this._submits._length++]=T$r).shaderValue.textureHost=T$n,T$r._renderType=10016,this._curSubmit=T$r;}T$n.active();var T$a=this._curSubmit._vb||this._vb;T$mn.fillRectImgVb(T$a,this._clipRect,T$C+T$c,T$_+T$l,T$E||T$n.width,T$y||T$n.height,T$n.uv,T$p||this._curMat,this._x,this._y,T$W,T$q,!0)&&(T$F.enabled&&!this._isMain&&this._curSubmit.addTexture(T$n,(T$a._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle));},T$C.drawTextureWithTransform=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W){if(T$p){var T$q=this._curMat,T$J=this._x,T$j=this._y;(0!==T$c||0!==T$l)&&(this._x=T$c*T$q.a+T$l*T$q.c,this._y=T$l*T$q.d+T$c*T$q.b),T$p&&T$q.bTransform?(T$s.mul(T$p,T$q,T$G._tmpMatrix),(T$p=T$G._tmpMatrix)._checkTransform()):(this._x+=T$q.tx,this._y+=T$q.ty),this._drawTextureM(T$n,T$C,T$_,T$E,T$y,0,0,T$p,T$W),this._x=T$J,this._y=T$j;}else this._drawTextureM(T$n,T$C,T$_,T$E,T$y,T$c,T$l,null,T$W);},T$C.fillQuadrangle=function(T$n,T$C,T$_,T$E,T$y){var T$p=this._curSubmit,T$c=this._vb,T$l=this._shader2D,T$W=T$p.shaderValue;if(this._renderKey=0,T$n.bitmap){var T$q=T$n.bitmap;T$l.glTexture==T$q&&T$l.ALPHA===T$W.ALPHA||(T$l.glTexture=T$q,(T$p=this._curSubmit=T$pn.createSubmit(this,this._ib,T$c,T$c._byteLength/32*3,T$Yn.create(1,0))).shaderValue.glTexture=T$q,this._submits[this._submits._length++]=T$p),T$mn.fillQuadrangleImgVb(T$c,T$C,T$_,T$E,T$n.uv,T$y||this._curMat,this._x,this._y);}else T$p.shaderValue.fillStyle&&T$p.shaderValue.fillStyle.equal(T$n)&&T$l.ALPHA===T$W.ALPHA||(T$l.glTexture=null,(T$p=this._curSubmit=T$pn.createSubmit(this,this._ib,T$c,T$c._byteLength/32*3,T$Yn.create(2,0))).shaderValue.defines.add(2),T$p.shaderValue.fillStyle=T$Q.create(T$n),this._submits[this._submits._length++]=T$p),T$mn.fillQuadrangleImgVb(T$c,T$C,T$_,T$E,T$X.DEF_UV,T$y||this._curMat,this._x,this._y);T$p._numEle+=6;},T$C.drawTexture2=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){if(0!=T$p){var T$W=this._curMat;if(this._x=T$n*T$W.a+T$C*T$W.c,this._y=T$C*T$W.d+T$n*T$W.b,T$y&&(T$y=T$W.bTransform||T$y.bTransform?(T$s.mul(T$y,T$W,T$G._tmpMatrix),T$G._tmpMatrix):(this._x+=T$y.tx+T$W.tx,this._y+=T$y.ty+T$W.ty,T$s.EMPTY)),1!==T$p||T$c){var T$q=this._shader2D.ALPHA,T$J=this._nBlendType;this._shader2D.ALPHA=T$p,T$c&&(this._nBlendType=T$o.TOINT(T$c)),this._drawTextureM(T$l[0],T$l[1]-T$_,T$l[2]-T$E,T$l[3],T$l[4],0,0,T$y,1),this._shader2D.ALPHA=T$q,this._nBlendType=T$J;}else this._drawTextureM(T$l[0],T$l[1]-T$_,T$l[2]-T$E,T$l[3],T$l[4],0,0,T$y,1);this._x=this._y=0;}},T$C.drawCanvas=function(T$n,T$C,T$_,T$E,T$y){var T$p=T$n.context;if(this._renderKey=0,T$p._targets)this._submits[this._submits._length++]=T$gn.create(T$p,0,null),this._curSubmit=T$pn.RENDERBASE,T$p._targets.drawTo(this,T$C,T$_,T$E,T$y);else{var T$c=this._submits[this._submits._length++]=T$gn.create(T$p,this._shader2D.ALPHA,this._shader2D.filters),T$l=T$E/T$n.width,T$W=T$y/T$n.height,T$q=T$c._matrix;this._curMat.copyTo(T$q),1!=T$l&&1!=T$W&&T$q.scale(T$l,T$W);var T$J=T$q.tx,T$j=T$q.ty;T$q.tx=T$q.ty=0,T$q.transformPoint(T$N.TEMP.setTo(T$C,T$_)),T$q.translate(T$N.TEMP.x+T$J,T$N.TEMP.y+T$j),this._curSubmit=T$pn.RENDERBASE;}T$T.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=T$p._targets?"yellow":"green",this.strokeRect(T$C-1,T$_-1,T$E+2,T$y+2,1),this.strokeRect(T$C,T$_,T$E,T$y,1),this.restore());},T$C.drawTarget=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q){void 0===T$q&&(T$q=-1);var T$J=this._vb;if(T$mn.fillRectImgVb(T$J,this._clipRect,T$C,T$_,T$E,T$y,T$W||T$X.DEF_UV,T$p||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var T$j=this._curSubmit=T$jn.create(this,this._ib,T$J,(T$J._byteLength-64)/32*3,T$l,T$c);T$j.blendType=-1==T$q?this._nBlendType:T$q,T$j.scope=T$n,this._submits[this._submits._length++]=T$j,this._curSubmit._numEle+=6;}},T$C.mixRGBandAlpha=function(T$n){return this._mixRGBandAlpha(T$n,this._shader2D.ALPHA);},T$C._mixRGBandAlpha=function(T$n,T$C){var T$_=(4278190080&T$n)>>>24;return 0!=T$_?T$_*=T$C:T$_=255*T$C,16777215&T$n|T$_<<24;},T$C.drawTriangles=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q){if(!T$n.loaded||!T$n.source)return this.sprite&&T$t.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;T$n.bitmap;var T$J=this._mixRGBandAlpha(4294967295,T$l),T$j=(T$E.length,T$p.length);this._renderKey=-1;var T$P=this._curSubmit=T$Hn.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,T$Yn.create(1,0));return T$P.shaderValue.textureHost=T$n,T$P._renderType=10016,this._submits[this._submits._length++]=T$P,T$c?(T$G._tmpMatrix.a=T$c.a,T$G._tmpMatrix.b=T$c.b,T$G._tmpMatrix.c=T$c.c,T$G._tmpMatrix.d=T$c.d,T$G._tmpMatrix.tx=T$c.tx+T$C,T$G._tmpMatrix.ty=T$c.ty+T$_,T$s.mul(T$G._tmpMatrix,this._curMat,T$G._tmpMatrix)):(T$G._tmpMatrix.a=this._curMat.a,T$G._tmpMatrix.b=this._curMat.b,T$G._tmpMatrix.c=this._curMat.c,T$G._tmpMatrix.d=this._curMat.d,T$G._tmpMatrix.tx=this._curMat.tx+T$C,T$G._tmpMatrix.ty=this._curMat.ty+T$_),this._triangleMesh.addData(T$E,T$y,T$p,T$G._tmpMatrix,T$J,this),this._curSubmit._numEle+=T$j,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0;},T$C.transform=function(T$n,T$C,T$_,T$E,T$y,T$p){T$R.save(this),T$s.mul(T$s.TEMP.setTo(T$n,T$C,T$_,T$E,T$y,T$p),this._curMat,this._curMat),this._curMat._checkTransform();},T$C.setTransformByMatrix=function(T$n){T$n.copyTo(this._curMat);},T$C.transformByMatrix=function(T$n){T$R.save(this),T$s.mul(T$n,this._curMat,this._curMat),this._curMat._checkTransform();},T$C.rotate=function(T$n){T$R.save(this),this._curMat.rotateEx(T$n);},T$C.scale=function(T$n,T$C){T$R.save(this),this._curMat.scaleEx(T$n,T$C);},T$C.clipRect=function(T$n,T$C,T$_,T$E){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var T$y=T$Jn.create(4);this.addRenderObject(T$y);var T$p=this._vb,T$c=T$p._byteLength>>2;if(T$mn.fillRectImgVb(T$p,null,T$n,T$C,T$_,T$E,T$X.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var T$l=this._curSubmit=T$pn.createSubmit(this,this._ib,T$p,(T$p._byteLength-64)/32*3,T$Yn.create(2,0));T$l.shaderValue.ALPHA=1,this._submits[this._submits._length++]=T$l,this._curSubmit._numEle+=6;}else alert("clipRect calc stencil rect error");var T$W=T$Jn.create(5);this.addRenderObject(T$W);var T$q=T$p.getFloat32Array(),T$J=Math.min(Math.min(Math.min(T$q[0+T$c],T$q[4+T$c]),T$q[8+T$c]),T$q[12+T$c]),T$j=Math.max(Math.max(Math.max(T$q[0+T$c],T$q[4+T$c]),T$q[8+T$c]),T$q[12+T$c]),T$P=Math.min(Math.min(Math.min(T$q[1+T$c],T$q[5+T$c]),T$q[9+T$c]),T$q[13+T$c]),T$x=Math.max(Math.max(Math.max(T$q[1+T$c],T$q[5+T$c]),T$q[9+T$c]),T$q[13+T$c]);T$h.save(this,T$W,T$n,T$C,T$_,T$E,T$J,T$P,T$j-T$J,T$x-T$P),this._curSubmit=T$pn.RENDERBASE;}else{T$_*=this._curMat.a,T$E*=this._curMat.d;var T$b=T$N.TEMP;this._curMat.transformPoint(T$b.setTo(T$n,T$C)),T$_<0&&(T$b.x=T$b.x+T$_,T$_=-T$_),T$E<0&&(T$b.y=T$b.y+T$E,T$E=-T$E),this._renderKey=0;var T$r=this._curSubmit=T$qn.create(this);(this._submits[this._submits._length++]=T$r).submitIndex=this._submits._length,T$r.submitLength=9999999,T$L.save(this,T$r);var T$m=this._clipRect,T$d=T$m.x,T$a=T$m.y,T$O=T$b.x+T$_,T$A=T$b.y+T$E;T$d<T$b.x&&(T$m.x=T$b.x),T$a<T$b.y&&(T$m.y=T$b.y),T$m.width=Math.min(T$O,T$d+T$m.width)-T$m.x,T$m.height=Math.min(T$A,T$a+T$m.height)-T$m.y,this._shader2D.glTexture=null,T$r.clipRect.copyFrom(T$m),this._curSubmit=T$pn.RENDERBASE;}},T$C.setIBVB=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q,T$J){if(void 0===T$W&&(T$W=0),void 0===T$q&&(T$q=0),void 0===T$J&&(T$J=0),null===T$_){if(T$d.isFlash){var T$j=T$E;T$j._selfIB||(T$j._selfIB=T$Kn.create(35044)),T$j._selfIB.clear(),T$_=T$j._selfIB;}else T$_=this._ib;T$mn.expandIBQuadrangle(T$_,T$E._byteLength/(4*T$E.vertexStride*4));}if(!T$l||!T$c)throw Error("setIBVB must input:shader shaderValues");var T$P=T$Wn.create(this,T$E,T$_,T$y,T$c,T$l,T$W,T$q,T$J);T$p||(T$p=T$s.EMPTY),T$p.translate(T$n,T$C),T$s.mul(T$p,this._curMat,T$P._mat),T$p.translate(-T$n,-T$C),this._submits[this._submits._length++]=T$P,this._curSubmit=T$pn.RENDERBASE,this._renderKey=0;},T$C.addRenderObject=function(T$n){this._submits[this._submits._length++]=T$n;},T$C.fillTrangles=function(T$n,T$C,T$_,T$E,T$y){var T$p=this._curSubmit,T$c=this._vb,T$l=this._shader2D,T$W=T$p.shaderValue,T$q=T$E.length>>4,T$J=T$n.bitmap;this._renderKey=0,T$l.glTexture==T$J&&T$l.ALPHA===T$W.ALPHA||((T$p=this._curSubmit=T$pn.createSubmit(this,this._ib,T$c,T$c._byteLength/32*3,T$Yn.create(1,0))).shaderValue.textureHost=T$n,this._submits[this._submits._length++]=T$p),T$mn.fillTranglesVB(T$c,T$C,T$_,T$E,T$y||this._curMat,this._x,this._y),T$p._numEle+=6*T$q;},T$C.submitElement=function(T$n,T$C){var T$_=this._submits;for(T$C<0&&(T$C=T$_._length);T$n<T$C;)T$n+=T$_[T$n].renderSubmit();},T$C.finish=function(){T$An.mainContext.finish();},T$C.flush=function(){var T$n=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(T$n>this._ib.bufferLength/12&&T$mn.expandIBQuadrangle(this._ib,T$n),!this._isMain&&T$F.enabled&&T$F._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=T$F._atlasRestore;for(var T$C=this._submits,T$_=0,T$E=T$C._length;T$_<T$E;T$_++){var T$y=T$C[T$_];10016===T$y.getRenderType()&&T$y.checkTexture();}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),T$Cn.instance&&T$Cn.getInstance().reset();var T$p;for(T$_=0,T$p=this.meshlist.length;T$_<T$p;T$_++){var T$c=this.meshlist[T$_];T$c.canReuse?T$c.releaseMesh():T$c.destroy();}return this.meshlist.length=0,this._curSubmit=T$pn.RENDERBASE,this._renderKey=0,this._triangleMesh=T$Xn.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length;},T$C.setPathId=function(T$n){if(this.mId=T$n,-1!=this.mId){this.mHaveKey=!1;var T$C=T$i.getInstance();T$C.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,T$C.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0);}},T$C.movePath=function(T$n,T$C){var T$_=T$n,T$E=T$C;T$n=this._curMat.a*T$_+this._curMat.c*T$E+this._curMat.tx,T$C=this._curMat.b*T$_+this._curMat.d*T$E+this._curMat.ty,this.mX+=T$n,this.mY+=T$C;},T$C.beginPath=function(){var T$n=this._getPath();T$n.tempArray.length=0,T$n.closePath=!1,this.mX=0,this.mY=0;},T$C.closePath=function(){this._path.closePath=!0;},T$C.fill=function(T$n){void 0===T$n&&(T$n=!1);var T$C=this._getPath();this.drawPoly(0,0,T$C.tempArray,this.fillStyle._color.numColor,0,0,T$n);},T$C.stroke=function(){var T$n=this._getPath();if(0<this.lineWidth){if(-1==this.mId)T$n.drawLine(0,0,T$n.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var T$C=T$i.getInstance().shapeLineDic[this.mId];T$C.rebuild(T$n.tempArray),T$n.setGeomtry(T$C);}else T$i.getInstance().addLine(this.mId,T$n.drawLine(0,0,T$n.tempArray,this.lineWidth,this.strokeStyle._color.numColor));T$n.update();var T$_=[this.mX,this.mY],T$E=T$pn.createShape(this,T$n.ib,T$n.vb,T$n.count,T$n.offset,T$Yn.create(4,0));T$E.shaderValue.ALPHA=this._shader2D.ALPHA,T$E.shaderValue.u_pos=T$_,T$E.shaderValue.u_mmat2=T$an.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=T$E,this._renderKey=-1;}},T$C.line=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c=this._curSubmit,T$l=this._vb;if(T$mn.fillLineVb(T$l,this._clipRect,T$n,T$C,T$_,T$E,T$y,T$p)){this._renderKey=0;var T$W=this._shader2D,T$q=T$c.shaderValue;T$W.strokeStyle===T$q.strokeStyle&&T$W.ALPHA===T$q.ALPHA||(T$W.glTexture=null,(T$c=this._curSubmit=T$pn.createSubmit(this,this._ib,T$l,(T$l._byteLength-64)/32*3,T$Yn.create(2,0))).shaderValue.strokeStyle=T$W.strokeStyle,T$c.shaderValue.mainID=2,T$c.shaderValue.ALPHA=T$W.ALPHA,this._submits[this._submits._length++]=T$c),T$c._numEle+=6;}},T$C.moveTo=function(T$n,T$C,T$_){void 0===T$_&&(T$_=!0);var T$E=this._getPath();if(T$_){var T$y=T$n,T$p=T$C;T$n=this._curMat.a*T$y+this._curMat.c*T$p,T$C=this._curMat.b*T$y+this._curMat.d*T$p;}T$E.addPoint(T$n,T$C);},T$C.lineTo=function(T$n,T$C,T$_){void 0===T$_&&(T$_=!0);var T$E=this._getPath();if(T$_){var T$y=T$n,T$p=T$C;T$n=this._curMat.a*T$y+this._curMat.c*T$p,T$C=this._curMat.b*T$y+this._curMat.d*T$p;}T$E.addPoint(T$n,T$C);},T$C.drawCurves=function(T$n,T$C,T$_){this.setPathId(-1),this.beginPath(),this.strokeStyle=T$_[3],this.lineWidth=T$_[4];var T$E=T$_[2];T$n+=T$_[0],T$C+=T$_[1],this.movePath(T$n,T$C),this.moveTo(T$E[0],T$E[1]);for(var T$y=2,T$p=T$E.length;T$y<T$p;)this.quadraticCurveTo(T$E[T$y++],T$E[T$y++],T$E[T$y++],T$E[T$y++]);this.stroke();},T$C.arcTo=function(T$n,T$C,T$_,T$E,T$y){if(-1==this.mId||!this.mHaveKey){var T$p=0,T$c=0,T$l=0,T$W=this._getPath();this._curMat.copyTo(T$G._tmpMatrix),T$G._tmpMatrix.tx=T$G._tmpMatrix.ty=0,T$G._tempPoint.setTo(T$W.getEndPointX(),T$W.getEndPointY()),T$G._tmpMatrix.invertTransformPoint(T$G._tempPoint);var T$q=T$G._tempPoint.x-T$n,T$J=T$G._tempPoint.y-T$C,T$j=Math.sqrt(T$q*T$q+T$J*T$J);if(!(T$j<=1e-6)){var T$P=T$q/T$j,T$x=T$J/T$j,T$b=T$_-T$n,T$r=T$E-T$C,T$m=T$b*T$b+T$r*T$r,T$d=Math.sqrt(T$m);if(!(T$d<=1e-6)){var T$a=T$b/T$d,T$O=T$r/T$d,T$A=T$P+T$a,T$k=T$x+T$O,T$t=Math.sqrt(T$A*T$A+T$k*T$k);if(!(T$t<=1e-6)){var T$T=T$A/T$t,T$Y=T$k/T$t,T$s=Math.acos(T$T*T$P+T$Y*T$x),T$N=Math.PI/2-T$s,T$S=(T$j=T$y/Math.tan(T$N))*T$P+T$n,T$M=T$j*T$x+T$C,T$w=Math.sqrt(T$j*T$j+T$y*T$y),T$B=T$n+T$T*T$w,T$V=T$C+T$Y*T$w,T$g=0,T$H=0;if(0<=T$P*T$O-T$x*T$a){var T$X=2*T$N/T$G.SEGNUM;T$g=Math.sin(T$X),T$H=Math.cos(T$X);}else T$X=2*-T$N/T$G.SEGNUM,T$g=Math.sin(T$X),T$H=Math.cos(T$X);T$c=this._curMat.a*T$S+this._curMat.c*T$M,T$l=this._curMat.b*T$S+this._curMat.d*T$M,T$c==this._path.getEndPointX()&&T$l==this._path.getEndPointY()||T$W.addPoint(T$c,T$l);var T$$=T$S-T$B,T$i=T$M-T$V;for(T$p=0;T$p<T$G.SEGNUM;T$p++){var T$f=T$$*T$H+T$i*T$g,T$e=-T$$*T$g+T$i*T$H;T$c=T$f+T$B,T$l=T$e+T$V,T$n=this._curMat.a*T$c+this._curMat.c*T$l,T$l=T$C=this._curMat.b*T$c+this._curMat.d*T$l,(T$c=T$n)==this._path.getEndPointX()&&T$l==this._path.getEndPointY()||T$W.addPoint(T$c,T$l),T$$=T$f,T$i=T$e;}}}}}},T$C.arc=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){if(void 0===T$p&&(T$p=!1),void 0===T$c&&(T$c=!0),-1!=this.mId){var T$l=T$i.getInstance().shapeDic[this.mId];if(T$l&&this.mHaveKey&&!T$l.needUpdate(this._curMat))return;T$C=T$n=0;}var T$W,T$q=0,T$J=0,T$j=0,T$P=0,T$x=0,T$b=0,T$r=0;if(T$J=T$y-T$E,T$p){if(Math.abs(T$J)>=2*Math.PI)T$J=2*-Math.PI;else for(;0<T$J;)T$J-=2*Math.PI;}else if(Math.abs(T$J)>=2*Math.PI)T$J=2*Math.PI;else for(;T$J<0;)T$J+=2*Math.PI;T$W=T$J/(T$r=T$_<101?Math.max(10,T$J*T$_/5):T$_<201?Math.max(10,T$J*T$_/20):Math.max(10,T$J*T$_/40))/2,T$j=Math.abs(4/3*(1-Math.cos(T$W))/Math.sin(T$W)),T$p&&(T$j=-T$j);var T$m=this._getPath(),T$d=NaN,T$a=NaN;for(T$b=0;T$b<=T$r;T$b++)T$q=T$E+T$J*(T$b/T$r),T$P=T$n+Math.cos(T$q)*T$_,T$x=T$C+Math.sin(T$q)*T$_,T$c&&(T$d=T$P,T$a=T$x,T$P=this._curMat.a*T$d+this._curMat.c*T$a,T$x=this._curMat.b*T$d+this._curMat.d*T$a),T$P==this._path.getEndPointX()&&T$x==this._path.getEndPointY()||T$m.addPoint(T$P,T$x);T$P=T$n+Math.cos(T$y)*T$_,T$x=T$C+Math.sin(T$y)*T$_,T$c&&(T$d=T$P,T$a=T$x,T$P=this._curMat.a*T$d+this._curMat.c*T$a,T$x=this._curMat.b*T$d+this._curMat.d*T$a),T$P==this._path.getEndPointX()&&T$x==this._path.getEndPointY()||T$m.addPoint(T$P,T$x);},T$C.quadraticCurveTo=function(T$n,T$C,T$_,T$E){var T$y=T$j.I,T$p=T$_,T$c=T$E;T$_=this._curMat.a*T$p+this._curMat.c*T$c,T$E=this._curMat.b*T$p+this._curMat.d*T$c,T$p=T$n,T$c=T$C,T$n=this._curMat.a*T$p+this._curMat.c*T$c,T$C=this._curMat.b*T$p+this._curMat.d*T$c;for(var T$l=T$y.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),T$n,T$C,T$_,T$E],30,2),T$W=0,T$q=T$l.length/2;T$W<T$q;T$W++)this.lineTo(T$l[2*T$W],T$l[2*T$W+1],!1);this.lineTo(T$_,T$E,!1);},T$C.rect=function(T$n,T$C,T$_,T$E){this._other=this._other.make(),this._other.path||(this._other.path=new T$I()),this._other.path.rect(T$n,T$C,T$_,T$E);},T$C.strokeRect=function(T$n,T$C,T$_,T$E,T$y){var T$p=.5*T$y;this.line(T$n-T$p,T$C,T$n+T$_+T$p,T$C,T$y,this._curMat),this.line(T$n+T$_,T$C,T$n+T$_,T$C+T$E,T$y,this._curMat),this.line(T$n,T$C,T$n,T$C+T$E,T$y,this._curMat),this.line(T$n-T$p,T$C+T$E,T$n+T$_+T$p,T$C+T$E,T$y,this._curMat);},T$C.clip=function(){},T$C.drawPoly=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){void 0===T$c&&(T$c=!1),this._renderKey=0,this._shader2D.glTexture=null;var T$l=this._getPath();if(-1==this.mId)T$l.polygon(T$n,T$C,T$_,T$E,T$y||1,T$p);else if(this.mHaveKey){var T$W=T$i.getInstance().shapeDic[this.mId];T$W.setMatrix(this._curMat),T$W.rebuild(T$l.tempArray),T$l.setGeomtry(T$W);}else{var T$q=T$l.polygon(T$n,T$C,T$_,T$E,T$y||1,T$p);T$i.getInstance().addShape(this.mId,T$q),T$q.setMatrix(this._curMat);}T$l.update();var T$J,T$j=[this.mX,this.mY];if((T$J=T$pn.createShape(this,T$l.ib,T$l.vb,T$l.count,T$l.offset,T$Yn.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,T$J.shaderValue.u_pos=T$j,T$J.shaderValue.u_mmat2=T$an.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=T$J,0<T$y){if(this.mHaveLineKey){var T$P=T$i.getInstance().shapeLineDic[this.mId];T$P.rebuild(T$l.tempArray),T$l.setGeomtry(T$P);}else T$i.getInstance().addShape(this.mId,T$l.drawLine(T$n,T$C,T$_,T$y,T$p));T$l.update(),(T$J=T$pn.createShape(this,T$l.ib,T$l.vb,T$l.count,T$l.offset,T$Yn.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,T$J.shaderValue.u_mmat2=T$an.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=T$J;}},T$C.drawParticle=function(T$n,T$C,T$_){T$_.x=T$n,T$_.y=T$C,this._submits[this._submits._length++]=T$_;},T$C._getPath=function(){return this._path||(this._path=new T$I());},T$E(0,T$C,"globalCompositeOperation",function(){return T$o.NAMES[this._nBlendType];},function(T$n){var T$C=T$o.TOINT[T$n];null==T$C||this._nBlendType===T$C||(T$Z.save(this,65536,this,!0),this._curSubmit=T$pn.RENDERBASE,this._renderKey=0,this._nBlendType=T$C);}),T$E(0,T$C,"strokeStyle",function(){return this._shader2D.strokeStyle;},function(T$n){this._shader2D.strokeStyle.equal(T$n)||(T$Z.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=T$Q.create(T$n));}),T$E(0,T$C,"globalAlpha",function(){return this._shader2D.ALPHA;},function(T$n){(T$n=Math.floor(1e3*T$n)/1e3)!=this._shader2D.ALPHA&&(T$Z.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=T$n);}),T$E(0,T$C,"asBitmap",null,function(T$n){if(T$n){if(this._targets||(this._targets=new T$U()),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height);}else this._targets=null;}),T$E(0,T$C,"fillStyle",function(){return this._shader2D.fillStyle;},function(T$n){this._shader2D.fillStyle.equal(T$n)||(T$Z.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=T$Q.create(T$n));}),T$E(0,T$C,"textAlign",function(){return this._other.textAlign;},function(T$n){this._other.textAlign===T$n||(this._other=this._other.make(),T$Z.save(this,32768,this._other,!1),this._other.textAlign=T$n);}),T$E(0,T$C,"lineWidth",function(){return this._other.lineWidth;},function(T$n){this._other.lineWidth===T$n||(this._other=this._other.make(),T$Z.save(this,256,this._other,!1),this._other.lineWidth=T$n);}),T$E(0,T$C,"textBaseline",function(){return this._other.textBaseline;},function(T$n){this._other.textBaseline===T$n||(this._other=this._other.make(),T$Z.save(this,16384,this._other,!1),this._other.textBaseline=T$n);}),T$E(0,T$C,"font",null,function(T$n){T$n!=this._other.font.toString()&&(this._other=this._other.make(),T$Z.save(this,8,this._other,!1),this._other.font===T$bn.EMPTY?this._other.font=new T$bn(T$n):this._other.font.setFont(T$n));}),T$G.__init__=function(){T$_.DEFAULT=new T$_();},T$G._tempPoint=new T$N(),T$G._SUBMITVBSIZE=32e3,T$G._MAXSIZE=99999999,T$G._RECTVBSIZE=16,T$G.MAXCLIPRECT=new T$S(0,0,99999999,99999999),T$G._COUNT=0,T$G._tmpMatrix=new T$s(),T$G.SEGNUM=32,T$G._contextcount=0,T$c(T$G,["_fontTemp",function(){return this._fontTemp=new T$bn();},"_drawStyleTemp",function(){return this._drawStyleTemp=new T$Q(null);}]),T$G.__init$=function(){T$_=function(){function T$n(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=T$bn.EMPTY;}T$P(T$n,"");var T$C=T$n.prototype;return T$C.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=T$bn.EMPTY;},T$C.make=function(){return this===T$n.DEFAULT?new T$n():this;},T$n.DEFAULT=null,T$n;}();},T$G;}(),T$Yn=function(T$n){function T$E(T$n,T$C){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,T$E.__super.call(this),this.defines=new T$Mn(),this.position=T$E._POSITION,this.mainID=T$n,this.subID=T$C,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=T$n|T$C,this._inClassCache=T$E._cache[this._cacheID],0<T$n&&!this._inClassCache&&(this._inClassCache=T$E._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear();}T$P(T$E,"laya.webgl.shader.d2.value.Value2D",T$e);var T$C=T$E.prototype;return T$C.setValue=function(T$n){},T$C.refresh=function(){var T$n=this.size;return T$n[0]=T$an.width,T$n[1]=T$an.height,this.alpha=this.ALPHA*T$an.worldAlpha,this.mmat=T$an.worldMatrix4,this;},T$C._ShaderWithCompile=function(){return T$vn.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,T$Un.create);},T$C._withWorldShaderDefines=function(){var T$n=T$an.worldShaderDefines,T$C=T$vn.sharders[this.mainID|this.defines._value|T$n.getValue()];if(!T$C){var T$_,T$E={};for(T$_ in this.defines.toNameDic())T$E[T$_]="";for(T$_ in T$n.toNameDic())T$E[T$_]="";T$C=T$vn.withCompile2D(0,this.mainID,T$E,this.mainID|this.defines._value|T$n.getValue(),T$Un.create);}var T$y=T$an.worldFilters;if(!T$y)return T$C;for(var T$p,T$c=T$y.length,T$l=0;T$l<T$c;T$l++)(T$p=T$y[T$l])&&T$p.action.setValue(this);return T$C;},T$C.upload=function(){var T$n=T$an;this.alpha=this.ALPHA*T$n.worldAlpha,T$an.worldMatrix4!==T$an.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),T$An.shaderHighPrecision&&this.defines.add(1024);var T$C,T$_=T$n.worldShaderDefines?this._withWorldShaderDefines():T$vn.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=T$n.width,this.size[1]=T$n.height,this.mmat=T$n.worldMatrix4,T$$n.activeShader!==T$_?T$_._shaderValueWidth!==T$n.width||T$_._shaderValueHeight!==T$n.height?(T$_._shaderValueWidth=T$n.width,T$_._shaderValueHeight=T$n.height):T$C=T$_._params2dQuick2||T$_._make2dQuick2():T$_._shaderValueWidth!==T$n.width||T$_._shaderValueHeight!==T$n.height?(T$_._shaderValueWidth=T$n.width,T$_._shaderValueHeight=T$n.height):T$C=T$_._params2dQuick1||T$_._make2dQuick1(),T$_.upload(this,T$C);},T$C.setFilters=function(T$n){if(this.filters=T$n)for(var T$C,T$_=T$n.length,T$E=0;T$E<T$_;T$E++)(T$C=T$n[T$E])&&(this.defines.add(T$C.type),T$C.action.setValue(this));},T$C.clear=function(){this.defines.setValue(this.subID);},T$C.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear();},T$E._initone=function(T$n,T$C){T$E._typeClass[T$n]=T$C,T$E._cache[T$n]=[],T$E._cache[T$n]._length=0;},T$E.__init__=function(){T$E._POSITION=[2,5126,!1,4*T$rn.BYTES_PE,0],T$E._TEXCOORD=[2,5126,!1,4*T$rn.BYTES_PE,2*T$rn.BYTES_PE],T$E._initone(2,T$Gn),T$E._initone(4,T$on),T$E._initone(256,T$Fn),T$E._initone(512,T$en),T$E._initone(1,T$un),T$E._initone(65,T$zn),T$E._initone(9,T$un);},T$E.create=function(T$n,T$C){var T$_=T$E._cache[T$n|T$C];return T$_._length?T$_[--T$_._length]:new T$E._typeClass[T$n|T$C](T$C);},T$E._POSITION=null,T$E._TEXCOORD=null,T$E._cache=[],T$E._typeClass=[],T$E.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T$E;}(),T$sn=function(T$n){function T$m(T$n,T$C){T$m.__super.call(this,T$n,T$C);}T$P(T$m,"laya.webgl.utils.RenderSprite3D",T$a);var T$C=T$m.prototype;return T$C.onCreate=function(T$n){switch(T$n){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform);}},T$C._mask=function(T$n,T$C,T$_,T$E){var T$y,T$p,T$c=this._next,T$l=T$n.mask;if(T$l){T$C.ctx.save();var T$W=T$C.ctx.globalCompositeOperation,T$q=new T$S();if(T$q.copyFrom(T$l.getBounds()),T$q.width=Math.round(T$q.width),T$q.height=Math.round(T$q.height),T$q.x=Math.round(T$q.x),T$q.y=Math.round(T$q.y),0<T$q.width&&0<T$q.height){var T$J=T$n._style._tf,T$j=T$ln.create();T$j.addValue("bounds",T$q),T$y=T$cn.create([T$j,T$C],laya.webgl.utils.RenderSprite3D.tmpTarget),T$C.addRenderObject(T$y),T$l.render(T$C,-T$q.x,-T$q.y),T$y=T$cn.create([T$j],laya.webgl.utils.RenderSprite3D.endTmpTarget),T$C.addRenderObject(T$y),T$C.ctx.save(),T$C.clipRect(T$_-T$J.translateX+T$q.x,T$E-T$J.translateY+T$q.y,T$q.width,T$q.height),T$c._fun.call(T$c,T$n,T$C,T$_,T$E),T$C.ctx.restore(),T$p=T$Jn.create(6),T$W=T$C.ctx.globalCompositeOperation,T$p.blendMode="mask",T$C.addRenderObject(T$p),T$s.TEMP.identity();var T$P=T$Yn.create(1,0),T$x=T$X.INV_UV,T$b=T$q.width,T$r=T$q.height;(T$q.width<32||T$q.height<32)&&((T$x=T$m.tempUV)[0]=0,T$x[1]=0,T$x[2]=32<=T$q.width?1:T$q.width/32,T$x[3]=0,T$x[4]=32<=T$q.width?1:T$q.width/32,T$x[5]=32<=T$q.height?1:T$q.height/32,T$x[6]=0,T$x[7]=32<=T$q.height?1:T$q.height/32,T$q.width=32<=T$q.width?T$q.width:32,T$q.height=32<=T$q.height?T$q.height:32,T$x[1]*=-1,T$x[3]*=-1,T$x[5]*=-1,T$x[7]*=-1,T$x[1]+=1,T$x[3]+=1,T$x[5]+=1,T$x[7]+=1),T$C.ctx.drawTarget(T$j,T$_+T$q.x-T$J.translateX,T$E+T$q.y-T$J.translateY,T$b,T$r,T$s.TEMP,"tmpTarget",T$P,T$x,6),T$y=T$cn.create([T$j],laya.webgl.utils.RenderSprite3D.recycleTarget),T$C.addRenderObject(T$y),(T$p=T$Jn.create(6)).blendMode=T$W,T$C.addRenderObject(T$p);}T$C.ctx.restore();}else T$c._fun.call(T$c,T$n,T$C,T$_,T$E);},T$C._blend=function(T$n,T$C,T$_,T$E){var T$y=T$n._style,T$p=this._next;T$y.blendMode?(T$C.ctx.save(),T$C.ctx.globalCompositeOperation=T$y.blendMode,T$p._fun.call(T$p,T$n,T$C,T$_,T$E),T$C.ctx.restore()):T$p._fun.call(T$p,T$n,T$C,T$_,T$E);},T$C._transform=function(T$n,T$C,T$_,T$E){var T$y=T$n.transform,T$p=this._next;if(T$y&&T$p!=T$a.NORENDER){var T$c=T$C.ctx;T$n._style;T$y.tx=T$_,T$y.ty=T$E;var T$l=T$c._getTransformMatrix(),T$W=T$l.clone();T$s.mul(T$y,T$l,T$l),T$l._checkTransform(),T$y.tx=T$y.ty=0,T$p._fun.call(T$p,T$n,T$C,0,0),T$W.copyTo(T$l),T$W.destroy();}else T$p._fun.call(T$p,T$n,T$C,T$_,T$E);},T$m.tmpTarget=function(T$n,T$C){var T$_=T$n.getValue("bounds"),T$E=T$in.create(T$_.width,T$_.height);T$E.start(),T$E.clear(0,0,0,0),T$n.addValue("tmpTarget",T$E);},T$m.endTmpTarget=function(T$n){T$n.getValue("tmpTarget").end();},T$m.recycleTarget=function(T$n){T$n.getValue("tmpTarget").recycle(),T$n.recycle();},T$c(T$m,["tempUV",function(){return this.tempUV=new Array(8);}]),T$m;}(),T$Nn=function(T$n){function T$C(){this.data=null,T$C.__super.call(this);}T$P(T$C,"laya.filters.webgl.ColorFilterActionGL",T$f);var T$_=T$C.prototype;return T$t.imps(T$_,{"laya.filters.IFilterActionGL":!0}),T$_.setValue=function(T$n){T$n.colorMat=this.data._mat,T$n.colorAlpha=this.data._alpha;},T$_.apply3d=function(T$n,T$C,T$_,T$E,T$y){var T$p=T$n.getValue("bounds"),T$c=T$Yn.create(1,0);T$c.setFilters([this.data]);var T$l=T$s.TEMP;T$l.identity(),T$_.ctx.drawTarget(T$n,0,0,T$p.width,T$p.height,T$l,"src",T$c);},T$C;}(),T$Sn=function(T$n){function T$p(T$n,T$C,T$_,T$E,T$y){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,T$p.__super.call(this,T$n,T$C,T$y),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new T$Qn(),this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=T$_,this._atlasCanvas.height=T$E,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0;}T$P(T$p,"laya.webgl.atlas.Atlaser",T$G);var T$C=T$p.prototype;return T$C.computeUVinAtlasTexture=function(T$n,T$C,T$_,T$E){var T$y=T$F.atlasTextureWidth,T$p=T$F.atlasTextureHeight,T$c=T$_/T$y,T$l=T$E/T$p,T$W=(T$_+T$n.bitmap.width)/T$y,T$q=(T$E+T$n.bitmap.height)/T$p,T$J=T$n.bitmap.width/T$y,T$j=T$n.bitmap.height/T$p;T$n.uv=[T$c+T$C[0]*T$J,T$l+T$C[1]*T$j,T$W-(1-T$C[2])*T$J,T$l+T$C[3]*T$j,T$W-(1-T$C[4])*T$J,T$q-(1-T$C[5])*T$j,T$c+T$C[6]*T$J,T$q-(1-T$C[7])*T$j];},T$C.findBitmapIsExist=function(T$n){if(T$n instanceof laya.webgl.resource.WebGLImage){var T$C=T$n,T$_=T$C.url,T$E=this._InAtlasWebGLImagesKey[T$_||T$C.id];if(T$E)return T$E.offsetInfoID;}return-1;},T$C.addToAtlasTexture=function(T$n,T$C,T$_){if(T$n instanceof laya.webgl.resource.WebGLImage){var T$E=T$n,T$y=T$E.url;this._InAtlasWebGLImagesKey[T$y||T$E.id]={bitmap:T$n,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([T$C,T$_]);}this._atlasCanvas.texSubImage2D(T$C,T$_,T$n.atlasSource),T$n.clearAtlasSource();},T$C.addToAtlas=function(T$n,T$C,T$_){T$n._atlasID=this._inAtlasTextureKey.length;var T$E=T$n.uv.slice(),T$y=T$n.bitmap;this._inAtlasTextureKey.push(T$n),this._inAtlasTextureOriUVValue.push(T$E),this._inAtlasTextureBitmapValue.push(T$y),this.computeUVinAtlasTexture(T$n,T$E,T$C,T$_),T$n.bitmap=this._atlasCanvas;},T$C.clear=function(){for(var T$n=0,T$C=this._inAtlasTextureKey.length;T$n<T$C;T$n++)this._inAtlasTextureKey[T$n].bitmap=this._inAtlasTextureBitmapValue[T$n],this._inAtlasTextureKey[T$n].uv=this._inAtlasTextureOriUVValue[T$n],this._inAtlasTextureKey[T$n]._atlasID=-1,this._inAtlasTextureKey[T$n].bitmap.lock=!1,this._inAtlasTextureKey[T$n].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0;},T$C.dispose=function(){this.clear(),this._atlasCanvas.destroy();},T$E(0,T$C,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue;}),T$E(0,T$C,"texture",function(){return this._atlasCanvas;}),T$E(0,T$C,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey;}),T$p;}(),T$Mn=function(T$n){function T$_(){T$_.__super.call(this,T$_.__name2int,T$_.__int2name,T$_.__int2nameMap);}return T$P(T$_,"laya.webgl.shader.d2.ShaderDefines2D",T$D),T$_.__init__=function(){T$_.reg("TEXTURE2D",1),T$_.reg("COLOR2D",2),T$_.reg("PRIMITIVE",4),T$_.reg("GLOW_FILTER",8),T$_.reg("BLUR_FILTER",16),T$_.reg("COLOR_FILTER",32),T$_.reg("COLOR_ADD",64),T$_.reg("WORLDMAT",128),T$_.reg("FILLTEXTURE",256),T$_.reg("FSHIGHPRECISION",1024),T$_.reg("TXTALPHA",2048),T$_.reg("TXTCOMPRESS",4096);},T$_.reg=function(T$n,T$C){T$D._reg(T$n,T$C,T$_.__name2int,T$_.__int2name);},T$_.toText=function(T$n,T$C,T$_){return T$D._toText(T$n,T$C,T$_);},T$_.toInt=function(T$n){return T$D._toInt(T$n,T$_.__name2int);},T$_.TEXTURE2D=1,T$_.COLOR2D=2,T$_.PRIMITIVE=4,T$_.FILTERGLOW=8,T$_.FILTERBLUR=16,T$_.FILTERCOLOR=32,T$_.COLORADD=64,T$_.WORLDMAT=128,T$_.FILLTEXTURE=256,T$_.SKINMESH=512,T$_.SHADERDEFINE_FSHIGHPRECISION=1024,T$_.TXTALPHA=2048,T$_.TXTCOMPRESS=4096,T$_.__name2int={},T$_.__int2name=[],T$_.__int2nameMap=[],T$_;}(),T$wn=(function(T$n){function T$l(T$n,T$C,T$_,T$E,T$y,T$p,T$c){T$l.__super.call(this,T$n,T$C,T$_,T$E,40,T$y,T$p,T$c);}T$P(T$l,"laya.webgl.shapes.Ellipse",T$_n);}(),function(T$n){function T$p(T$n,T$C,T$_,T$E,T$y){this._points=[],this.rebuild(T$_),T$p.__super.call(this,T$n,T$C,0,0,0,T$y,T$E,T$y,0);}T$P(T$p,"laya.webgl.shapes.Line",T$_n);var T$C=T$p.prototype;return T$C.rebuild=function(T$n){var T$C=T$n.length;T$C!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(T$C/2-1)),this.mFloat32Array=new Float32Array(5*T$C)),this._points.length=0;for(var T$_=NaN,T$E=NaN,T$y=-1,T$p=-1,T$c=T$n.length/2,T$l=0;T$l<T$c;T$l++)T$_=T$n[2*T$l],T$E=T$n[2*T$l+1],(.01<Math.abs(T$y-T$_)||.01<Math.abs(T$p-T$E))&&this._points.push(T$_,T$E),T$y=T$_,T$p=T$E;},T$C.getData=function(T$n,T$C,T$_){var T$E=[],T$y=[];0<this.borderWidth&&this.createLine2(this._points,T$E,this.borderWidth,T$_,T$y,this._points.length/2),this.mUint16Array.set(T$E,0),this.mFloat32Array.set(T$y,0),T$n.append(this.mUint16Array),T$C.append(this.mFloat32Array);},T$p;}()),T$Bn=function(T$n){function T$j(T$n,T$C,T$_,T$E,T$y){this._points=[];for(var T$p=NaN,T$c=NaN,T$l=-1,T$W=-1,T$q=T$_.length/2-1,T$J=0;T$J<T$q;T$J++)T$p=T$_[2*T$J],T$c=T$_[2*T$J+1],(.01<Math.abs(T$l-T$p)||.01<Math.abs(T$W-T$c))&&this._points.push(T$p,T$c),T$l=T$p,T$W=T$c;T$p=T$_[2*T$q],T$c=T$_[2*T$q+1],T$l=this._points[0],T$W=this._points[1],(.01<Math.abs(T$l-T$p)||.01<Math.abs(T$W-T$c))&&this._points.push(T$p,T$c),T$j.__super.call(this,T$n,T$C,0,0,this._points.length/2,0,T$E,T$y);}T$P(T$j,"laya.webgl.shapes.LoopLine",T$_n);var T$C=T$j.prototype;return T$C.getData=function(T$n,T$C,T$_){if(0<this.borderWidth){for(var T$E=this.color,T$y=(T$E>>16&255)/255,T$p=(T$E>>8&255)/255,T$c=(255&T$E)/255,T$l=[],T$W=0,T$q=0,T$J=[],T$j=Math.floor(this._points.length/2),T$P=0;T$P<T$j;T$P++)T$W=this._points[2*T$P],T$q=this._points[2*T$P+1],T$l.push(this.x+T$W,this.y+T$q,T$y,T$p,T$c);this.createLoopLine(T$l,T$J,this.borderWidth,T$_+T$l.length/5),T$n.append(new Uint16Array(T$J)),T$C.append(new Float32Array(T$l));}},T$C.createLoopLine=function(T$n,T$C,T$_,T$E,T$y,T$p){T$n.length;var T$c=T$n.concat(),T$l=T$y||T$n,T$W=this.borderColor,T$q=(T$W>>16&255)/255,T$J=(T$W>>8&255)/255,T$j=(255&T$W)/255,T$P=[T$c[0],T$c[1]],T$x=[T$c[T$c.length-5],T$c[T$c.length-4]],T$b=T$x[0]+.5*(T$P[0]-T$x[0]),T$r=T$x[1]+.5*(T$P[1]-T$x[1]);T$c.unshift(T$b,T$r,0,0,0),T$c.push(T$b,T$r,0,0,0);var T$m,T$d,T$a,T$O,T$A,T$k,T$t,T$T,T$Y,T$s,T$N,T$S,T$M,T$w,T$B,T$V,T$g,T$H,T$X,T$$,T$i=T$c.length/5,T$f=T$E,T$e=T$_/2;T$a=T$c[0],T$O=T$c[1],T$s=T$a-(T$A=T$c[5]),T$Y=(T$Y=-(T$O-(T$k=T$c[6])))/(T$$=Math.sqrt(T$Y*T$Y+T$s*T$s))*T$e,T$s=T$s/T$$*T$e,T$l.push(T$a-T$Y,T$O-T$s,T$q,T$J,T$j,T$a+T$Y,T$O+T$s,T$q,T$J,T$j);for(var T$G=1;T$G<T$i-1;T$G++)T$a=T$c[5*(T$G-1)],T$O=T$c[5*(T$G-1)+1],T$A=T$c[5*T$G],T$k=T$c[5*T$G+1],T$t=T$c[5*(T$G+1)],T$T=T$c[5*(T$G+1)+1],T$s=T$a-T$A,T$S=T$A-T$t,T$B=(-(T$Y=(T$Y=-(T$O-T$k))/(T$$=Math.sqrt(T$Y*T$Y+T$s*T$s))*T$e)+T$a)*(-(T$s=T$s/T$$*T$e)+T$k)-(-T$Y+T$A)*(-T$s+T$O),T$H=(-(T$N=(T$N=-(T$k-T$T))/(T$$=Math.sqrt(T$N*T$N+T$S*T$S))*T$e)+T$t)*(-(T$S=T$S/T$$*T$e)+T$k)-(-T$N+T$A)*(-T$S+T$T),T$X=(T$M=-T$s+T$O-(-T$s+T$k))*(T$g=-T$N+T$A-(-T$N+T$t))-(T$V=-T$S+T$T-(-T$S+T$k))*(T$w=-T$Y+T$A-(-T$Y+T$a)),Math.abs(T$X)<.1?(T$X+=10.1,T$l.push(T$A-T$Y,T$k-T$s,T$q,T$J,T$j,T$A+T$Y,T$k+T$s,T$q,T$J,T$j)):(((T$m=(T$w*T$H-T$g*T$B)/T$X)-T$A)*(T$m-T$A)+((T$d=(T$V*T$B-T$M*T$H)/T$X)-T$k)+(T$d-T$k),T$l.push(T$m,T$d,T$q,T$J,T$j,T$A-(T$m-T$A),T$k-(T$d-T$k),T$q,T$J,T$j));T$p&&(T$C=T$p);var T$F=this.edges+1;for(T$G=1;T$G<T$F;T$G++)T$C.push(T$f+2*(T$G-1),T$f+2*(T$G-1)+1,T$f+2*T$G+1,T$f+2*T$G+1,T$f+2*T$G,T$f+2*(T$G-1));return T$C.push(T$f+2*(T$G-1),T$f+2*(T$G-1)+1,T$f+1,T$f+1,T$f,T$f+2*(T$G-1)),T$l;},T$j;}(),T$Vn=function(T$n){function T$c(T$n,T$C,T$_,T$E,T$y,T$p){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=T$s.create(),this._points=T$_.slice(0,T$_.length),T$c.__super.call(this,T$n,T$C,0,0,this._points.length/2,T$E,T$y,T$p);}T$P(T$c,"laya.webgl.shapes.Polygon",T$_n);var T$C=T$c.prototype;return T$C.rebuild=function(T$n){this._repaint||(this._points.length=0,this._points=this._points.concat(T$n));},T$C.setMatrix=function(T$n){T$n.copyTo(this._mat);},T$C.needUpdate=function(T$n){return this._repaint=this._mat.a==T$n.a&&this._mat.b==T$n.b&&this._mat.c==T$n.c&&this._mat.d==T$n.d&&this._mat.tx==T$n.tx&&this._mat.ty==T$n.ty,!this._repaint;},T$C.getData=function(T$n,T$C,T$_){var T$E,T$y=0,T$p=this._points,T$c=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=T$_){for(this._start=T$_,T$E=[],T$c=this.earcutTriangles.length,T$y=0;T$y<T$c;T$y++)T$E.push(this.earcutTriangles[T$y]+T$_);this.mUint16Array=new Uint16Array(T$E);}}else{this._start=T$_,T$E=[];var T$l=[],T$W=[],T$q=this.color,T$J=(T$q>>16&255)/255,T$j=(T$q>>8&255)/255,T$P=(255&T$q)/255;for(T$c=Math.floor(T$p.length/2),T$y=0;T$y<T$c;T$y++)T$l.push(this.x+T$p[2*T$y],this.y+T$p[2*T$y+1],T$J,T$j,T$P),T$W.push(this.x+T$p[2*T$y],this.y+T$p[2*T$y+1]);for(this.earcutTriangles=T$En.earcut(T$W,null,2),T$c=this.earcutTriangles.length,T$y=0;T$y<T$c;T$y++)T$E.push(this.earcutTriangles[T$y]+T$_);this.mUint16Array=new Uint16Array(T$E),this.mFloat32Array=new Float32Array(T$l);}T$n.append(this.mUint16Array),T$C.append(this.mFloat32Array);},T$c;}(),T$gn=function(T$n){function T$p(){this._matrix=new T$s(),this._matrix4=T$rn.defaultMatrix4.concat(),T$p.__super.call(this,1e4),this.shaderValue=new T$Yn(0,0);}T$P(T$p,"laya.webgl.submit.SubmitCanvas",T$pn);var T$C=T$p.prototype;return T$C.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var T$n=T$an.worldAlpha,T$C=T$an.worldMatrix4,T$_=T$an.worldMatrix,T$E=T$an.worldFilters,T$y=T$an.worldShaderDefines,T$p=this.shaderValue,T$c=this._matrix,T$l=this._matrix4,T$W=T$s.TEMP;return T$s.mul(T$c,T$_,T$W),T$l[0]=T$W.a,T$l[1]=T$W.b,T$l[4]=T$W.c,T$l[5]=T$W.d,T$l[12]=T$W.tx,T$l[13]=T$W.ty,T$an.worldMatrix=T$W.clone(),T$an.worldMatrix4=T$l,T$an.worldAlpha=T$an.worldAlpha*T$p.alpha,T$p.filters&&T$p.filters.length&&(T$an.worldFilters=T$p.filters,T$an.worldShaderDefines=T$p.defines),this._ctx_src.flush(),T$an.worldAlpha=T$n,T$an.worldMatrix4=T$C,T$an.worldMatrix.destroy(),T$an.worldMatrix=T$_,T$an.worldFilters=T$E,T$an.worldShaderDefines=T$y,1;},T$C.releaseRender=function(){var T$n=T$p._cache;this._ctx_src=null,T$n[T$n._length++]=this;},T$C.getRenderType=function(){return 10003;},T$p.create=function(T$n,T$C,T$_){var T$E=T$p._cache._length?T$p._cache[--T$p._cache._length]:new T$p();T$E._ctx_src=T$n;var T$y=T$E.shaderValue;return T$y.alpha=T$C,T$y.defines.setValue(0),T$_&&T$_.length&&T$y.setFilters(T$_),T$E;},T$p._cache=((T$p._cache=[])._length=0,T$p._cache),T$p;}(),T$Hn=function(T$n){function T$q(T$n){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array(),this._texsID=new Array(),this._vbPos=new Array(),void 0===T$n&&(T$n=1e4),T$q.__super.call(this,T$n);}T$P(T$q,"laya.webgl.submit.SubmitTexture",T$pn);var T$C=T$q.prototype;return T$C.releaseRender=function(){var T$n=T$q._cache;(T$n[T$n._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0;},T$C.addTexture=function(T$n,T$C){this._texsID[this._texs.length]=T$n._uvID,this._texs.push(T$n),this._vbPos.push(T$C);},T$C.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var T$n=this.shaderValue.textureHost.bitmap;if(null!==T$n)for(var T$C=this._vb.getFloat32Array(),T$_=0,T$E=this._texs.length;T$_<T$E;T$_++){var T$y=this._texs[T$_];T$y.active();var T$p=T$y.uv;if(this._texsID[T$_]!==T$y._uvID){this._texsID[T$_]=T$y._uvID;var T$c=this._vbPos[T$_];T$C[T$c+2]=T$p[0],T$C[T$c+3]=T$p[1],T$C[T$c+6]=T$p[2],T$C[T$c+7]=T$p[3],T$C[T$c+10]=T$p[4],T$C[T$c+11]=T$p[5],T$C[T$c+14]=T$p[6],T$C[T$c+15]=T$p[7],this._vb.setNeedUpload();}T$y.bitmap!==T$n&&(this._isSameTexture=!1);}}},T$C.renderSubmit=function(){if(0===this._numEle)return T$q._shaderSet=!1,1;var T$n=this.shaderValue.textureHost;if(T$n){var T$C=T$n.source;if(!T$n.bitmap||!T$C)return T$q._shaderSet=!1,1;this.shaderValue.texture=T$C,T$n.alphaTexture&&T$n.alphaTexture.source&&(this.shaderValue.texture1=T$n.alphaTexture.source);}this._vb.bind_upload(this._ib);var T$_=T$An.mainContext;if(T$o.activeBlendFunction!==this._blendFn&&(T$_.enable(3042),this._blendFn(T$_),T$o.activeBlendFunction=this._blendFn),T$B.drawCall++,T$B.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&T$$n.activeShader&&T$q._shaderSet?(T$$n.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&T$$n.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),T$q._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var T$E=T$n.bitmap,T$y=0,T$p=T$$n.activeShader,T$c=0,T$l=this._texs.length;T$c<T$l;T$c++){var T$W=this._texs[T$c];T$W.bitmap===T$E&&T$c+1!==T$l||(T$p.uploadTexture2D(T$W.source),T$_.drawElements(4,6*(T$c-T$y+1),5123,this._startIdx+6*T$y*T$rn.BYTES_PIDX),T$E=T$W.bitmap,T$y=T$c);}else T$_.drawElements(4,this._numEle,5123,this._startIdx);return 1;},T$q.create=function(T$n,T$C,T$_,T$E,T$y){var T$p=T$q._cache._length?T$q._cache[--T$q._cache._length]:new T$q();null==T$_&&((T$_=T$p._selfVb||(T$p._selfVb=T$Dn.create(-1))).clear(),T$E=0),T$p._ib=T$C,T$p._vb=T$_,T$p._startIdx=T$E*T$rn.BYTES_PIDX,T$p._numEle=0;var T$c=T$n._nBlendType;T$p._blendFn=T$n._targets?T$o.targetFns[T$c]:T$o.fns[T$c],T$p.shaderValue=T$y,T$p.shaderValue.setValue(T$n._shader2D);var T$l=T$n._shader2D.filters;return T$l&&T$p.shaderValue.setFilters(T$l),T$p;},T$q._cache=((T$q._cache=[])._length=0,T$q._cache),T$q._shaderSet=!0,T$q;}(),T$Xn=function(T$n){function T$d(){T$d.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo);}T$P(T$d,"laya.webgl.utils.MeshTexture",T$dn);var T$C=T$d.prototype;return T$C.addData=function(T$n,T$C,T$_,T$E,T$y,T$p){for(var T$c=T$n.length/2,T$l=this._vb.needSize(T$c*T$d.const_stride)>>2,T$W=this._vb.getFloat32Array(),T$q=0,T$J=0;T$J<T$c;T$J++){var T$j=T$n[T$q],T$P=T$n[T$q+1],T$x=T$j*T$E.a+T$P*T$E.c+T$E.tx,T$b=T$j*T$E.b+T$P*T$E.d+T$E.ty;T$W[T$l++]=T$x,T$W[T$l++]=T$b,T$W[T$l++]=T$C[T$q],T$W[T$l++]=T$C[T$q+1],T$q+=2;}this._vb.setNeedUpload();var T$r=this.vertNum;if(0<T$r){(T$c=T$_.length)>T$d.tmpIdx.length&&(T$d.tmpIdx=new Uint16Array(T$c));for(var T$m=0;T$m<T$c;T$m++)T$d.tmpIdx[T$m]=T$_[T$m]+T$r;this._ib.appendU16Array(T$d.tmpIdx,T$_.length);}else this._ib.append(T$_);this._ib.setNeedUpload(),this.vertNum+=T$c,this.indexNum+=T$_.length;},T$C.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this);},T$C.destroy=function(){this._ib.destroy(),this._vb.destroy();},T$d.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new T$d();},T$d.const_stride=16,T$d._POOL=[],T$c(T$d,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8];},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4);}]),T$d;}(),T$$n=function(T$n){function T$C(){T$C.__super.call(this),this.lock=!0;}return T$P(T$C,"laya.webgl.shader.BaseShader",T$O),T$C.activeShader=null,T$C.bindShader=null,T$C;}(),T$in=function(T$C){function T$J(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===T$_&&(T$_=6408),void 0===T$E&&(T$E=5121),void 0===T$y&&(T$y=34041),void 0===T$p&&(T$p=!1),void 0===T$c&&(T$c=!1),void 0===T$l&&(T$l=-1),void 0===T$W&&(T$W=-1),this._type=1,this._w=T$n,this._h=T$C,this._surfaceFormat=T$_,this._surfaceType=T$E,this._depthStencilFormat=T$y,T$d.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=T$p,this._repeat=T$c,this._minFifter=T$l,this._magFifter=T$W,this._createWebGLRenderTarget(),this.bitmap.lock=!0,T$J.__super.call(this,this.bitmap,T$X.INV_UV);}T$P(T$J,"laya.webgl.resource.RenderTarget2D",T$C);var T$n=T$J.prototype;return T$t.imps(T$n,{"laya.resource.IDispose":!0}),T$n.getType=function(){return this._type;},T$n.getTexture=function(){return this;},T$n.size=function(T$n,T$C){this._w==T$n&&this._h==T$C||(this._w=T$n,this._h=T$C,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget());},T$n.release=function(){this.destroy();},T$n.recycle=function(){T$J.POOL.push(this);},T$n.start=function(){var T$n=T$An.mainContext;return this._preRenderTarget=T$an.curRenderTarget,T$an.curRenderTarget=this,T$n.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(T$n.viewport(0,0,this._w,this._h),this._svWidth=T$an.width,this._svHeight=T$an.height,T$an.width=this._w,T$an.height=this._h,T$$n.activeShader=null),this;},T$n.clear=function(T$n,T$C,T$_,T$E){void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0),void 0===T$E&&(T$E=1);var T$y=T$An.mainContext;T$y.clearColor(T$n,T$C,T$_,T$E);var T$p=16384;switch(this._depthStencilFormat){case 33189:T$p|=256;break;case 36168:T$p|=1024;break;case 34041:T$p|=256,T$p|=1024;}T$y.clear(T$p);},T$n.end=function(){var T$n=T$An.mainContext;T$n.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,T$an.curRenderTarget=this._preRenderTarget,1==this._type?(T$n.viewport(0,0,this._svWidth,this._svHeight),T$an.width=this._svWidth,T$an.height=this._svHeight,T$$n.activeShader=null):T$n.viewport(0,0,T$t.stage.width,T$t.stage.height);},T$n.getData=function(T$n,T$C,T$_,T$E){var T$y=T$An.mainContext;if(T$y.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===T$y.checkFramebufferStatus(36160)))return T$y.bindFramebuffer(36160,null),null;var T$p=new Uint8Array(this._w*this._h*4);return T$y.readPixels(T$n,T$C,T$_,T$E,this._surfaceFormat,this._surfaceType,T$p),T$y.bindFramebuffer(36160,null),T$p;},T$n.destroy=function(T$n){void 0===T$n&&(T$n=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,T$C.prototype.destroy.call(this));},T$n.dispose=function(){},T$n._createWebGLRenderTarget=function(){this.bitmap=new T$Ln(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(T$n){this.event("recovered");});},T$E(0,T$n,"surfaceFormat",function(){return this._surfaceFormat;}),T$E(0,T$n,"magFifter",function(){return this._magFifter;}),T$E(0,T$n,"surfaceType",function(){return this._surfaceType;}),T$E(0,T$n,"mipMap",function(){return this._mipMap;}),T$E(0,T$n,"depthStencilFormat",function(){return this._depthStencilFormat;}),T$E(0,T$n,"minFifter",function(){return this._minFifter;}),T$E(0,T$n,"source",function(){return this._alreadyResolved?T$t.superGet(T$X,this,"source"):null;}),T$J.create=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W){void 0===T$_&&(T$_=6408),void 0===T$E&&(T$E=5121),void 0===T$y&&(T$y=34041),void 0===T$p&&(T$p=!1),void 0===T$c&&(T$c=!1),void 0===T$l&&(T$l=-1),void 0===T$W&&(T$W=-1);var T$q=T$J.POOL.pop();return T$q||(T$q=new T$J(T$n,T$C)),T$q.bitmap&&T$q._w==T$n&&T$q._h==T$C&&T$q._surfaceFormat==T$_&&T$q._surfaceType==T$E&&T$q._depthStencilFormat==T$y&&T$q._mipMap==T$p&&T$q._repeat==T$c&&T$q._minFifter==T$l&&T$q._magFifter==T$W||(T$q._w=T$n,T$q._h=T$C,T$q._surfaceFormat=T$_,T$q._surfaceType=T$E,T$q._depthStencilFormat=T$y,T$d.isConchWebGL&&34041===T$q._depthStencilFormat&&(T$q._depthStencilFormat=33189),T$q._mipMap=T$p,T$q._repeat=T$c,T$q._minFifter=T$l,T$q._magFifter=T$W,T$q.release(),T$q._createWebGLRenderTarget()),T$q;},T$J.TYPE2D=1,T$J.TYPE3D=2,T$J.POOL=[],T$J;}(T$X),T$fn=function(T$n){function T$C(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,T$C.__super.call(this),T$C._gl=T$An.mainContext;}T$P(T$C,"laya.webgl.utils.Buffer",T$O);var T$_=T$C.prototype;return T$_._bind=function(){this.activeResource(),T$C._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(T$C._bindVertexBuffer=this._glBuffer),T$C._gl.bindBuffer(this._bufferType,T$C._bindActive[this._bufferType]=this._glBuffer),T$$n.activeShader=null);},T$_.recreateResource=function(){this._glBuffer||(this._glBuffer=T$C._gl.createBuffer()),this.completeCreate();},T$_.disposeResource=function(){this._glBuffer&&(T$An.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0;},T$E(0,T$_,"bufferUsage",function(){return this._bufferUsage;}),T$C._gl=null,T$C._bindActive={},T$C._bindVertexBuffer=null,T$C._enableAtributes=[],T$C;}(),T$en=function(T$n){function T$_(T$n){this.texcoord=null,this.offsetX=300,this.offsetY=0,T$_.__super.call(this,512,0);var T$C=8*T$rn.BYTES_PE;this.position=[2,5126,!1,T$C,0],this.texcoord=[2,5126,!1,T$C,2*T$rn.BYTES_PE],this.color=[4,5126,!1,T$C,4*T$rn.BYTES_PE];}return T$P(T$_,"laya.webgl.shader.d2.skinAnishader.SkinSV",T$Yn),T$_;}(),T$Gn=function(T$n){function T$C(T$n){T$C.__super.call(this,2,0),this.color=[];}return T$P(T$C,"laya.webgl.shader.d2.value.Color2dSV",T$Yn),T$C.prototype.setValue=function(T$n){T$n.fillStyle&&(this.color=T$n.fillStyle._color._color),T$n.strokeStyle&&(this.color=T$n.strokeStyle._color._color);},T$C;}(),T$Fn=function(T$n){function T$C(T$n){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=T$Yn._TEXCOORD,T$C.__super.call(this,256,0);}T$P(T$C,"laya.webgl.shader.d2.value.FillTextureSV",T$Yn);var T$_=T$C.prototype;return T$_.setValue=function(T$n){this.ALPHA=T$n.ALPHA,T$n.filters&&this.setFilters(T$n.filters);},T$_.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0);},T$C;}(),T$un=function(T$n){function T$C(T$n){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=T$Yn._TEXCOORD,void 0===T$n&&(T$n=0),T$C.__super.call(this,1,T$n);}T$P(T$C,"laya.webgl.shader.d2.value.TextureSV",T$Yn);var T$_=T$C.prototype;return T$_.setValue=function(T$n){this.ALPHA=T$n.ALPHA,T$n.filters&&this.setFilters(T$n.filters);},T$_.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0);},T$C;}(),T$on=function(T$n){function T$C(T$n){this.a_color=null,this.u_pos=[0,0],T$C.__super.call(this,4,0),this.position=[2,5126,!1,5*T$rn.BYTES_PE,0],this.a_color=[3,5126,!1,5*T$rn.BYTES_PE,2*T$rn.BYTES_PE];}return T$P(T$C,"laya.webgl.shader.d2.value.PrimitiveSV",T$Yn),T$C;}(),T$Qn=function(T$n){function T$C(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,T$C.__super.call(this);}T$P(T$C,"laya.webgl.atlas.AtlasWebGLCanvas",T$n);var T$_=T$C.prototype;return T$_.recreateResource=function(){var T$n=T$An.mainContext,T$C=this._source=T$n.createTexture(),T$_=T$kn.curBindTexTarget,T$E=T$kn.curBindTexValue;T$kn.bindTexture(T$n,3553,T$C),T$n.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),T$n.texParameteri(3553,10241,9729),T$n.texParameteri(3553,10240,9729),T$n.texParameteri(3553,10242,33071),T$n.texParameteri(3553,10243,33071),T$_&&T$E&&T$kn.bindTexture(T$n,T$_,T$E),this.memorySize=this._w*this._h*4,this.completeCreate();},T$_.disposeResource=function(){this._source&&(T$An.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0);},T$_.texSubImage2D=function(T$n,T$C,T$_){if(T$d.isFlash){this._flashCacheImage||(this._flashCacheImage=T$r.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var T$E=T$_.bitmapdata;this._flashCacheImage._image.copyPixels(T$E,0,0,T$E.width,T$E.height,T$n,T$C),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0);}else{var T$y=T$An.mainContext,T$p=T$kn.curBindTexTarget,T$c=T$kn.curBindTexValue;T$kn.bindTexture(T$y,3553,this._source),T$y.pixelStorei(37441,!0),0<=T$n-1&&T$y.texSubImage2D(3553,0,T$n-1,T$C,6408,5121,T$_),T$n+1<=this._w&&T$y.texSubImage2D(3553,0,T$n+1,T$C,6408,5121,T$_),0<=T$C-1&&T$y.texSubImage2D(3553,0,T$n,T$C-1,6408,5121,T$_),T$C+1<=this._h&&T$y.texSubImage2D(3553,0,T$n,T$C+1,6408,5121,T$_),T$y.texSubImage2D(3553,0,T$n,T$C,6408,5121,T$_),T$y.pixelStorei(37441,!1),T$p&&T$c&&T$kn.bindTexture(T$y,T$p,T$c);}},T$_.texSubImage2DPixel=function(T$n,T$C,T$_,T$E,T$y){var T$p=T$An.mainContext,T$c=T$kn.curBindTexTarget,T$l=T$kn.curBindTexValue;T$kn.bindTexture(T$p,3553,this._source);var T$W=new Uint8Array(T$y.data);T$p.pixelStorei(37441,!0),T$p.texSubImage2D(3553,0,T$n,T$C,T$_,T$E,6408,5121,T$W),T$p.pixelStorei(37441,!1),T$c&&T$l&&T$kn.bindTexture(T$p,T$c,T$l);},T$E(0,T$_,"width",T$n.prototype._$get_width,function(T$n){this._w=T$n;}),T$E(0,T$_,"height",T$n.prototype._$get_height,function(T$n){this._h=T$n;}),T$C;}(T$_),T$In=function(T$n){function T$y(){this.flipY=!0,this.alwaysChange=!1,T$y.__super.call(this);}T$P(T$y,"laya.webgl.resource.WebGLCanvas",T$_);var T$C=T$y.prototype;return T$C.getCanvas=function(){return this._canvas;},T$C.clear=function(){this._ctx&&this._ctx.clear();},T$C.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this);},T$C._setContext=function(T$n){this._ctx=T$n;},T$C.getContext=function(T$n,T$C){return this._ctx?this._ctx:this._ctx=T$y._createContext(this);},T$C.size=function(T$n,T$C){this._w==T$n&&this._h==T$C||(this._w=T$n,this._h=T$C,this._ctx&&this._ctx.size(T$n,T$C),this._canvas&&(this._canvas.height=T$C,this._canvas.width=T$n));},T$C.activeResource=function(T$n){void 0===T$n&&(T$n=!1),this._source||this.recreateResource();},T$C.recreateResource=function(){this.createWebGlTexture(),this.completeCreate();},T$C.disposeResource=function(){this._source&&!this.iscpuSource&&(T$An.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0);},T$C.createWebGlTexture=function(){var T$n=T$An.mainContext;this._canvas;var T$C=this._source=T$n.createTexture();this.iscpuSource=!1;var T$_=T$kn.curBindTexTarget,T$E=T$kn.curBindTexValue;T$kn.bindTexture(T$n,3553,T$C),T$n.pixelStorei(37440,this.flipY?1:0),T$y.premulAlpha&&T$n.pixelStorei(37441,!0),T$n.texImage2D(3553,0,6408,6408,5121,this._imgData),T$y.premulAlpha&&T$n.pixelStorei(37441,!1),T$n.texParameteri(3553,10240,9729),T$n.texParameteri(3553,10241,9729),T$n.texParameteri(3553,10242,33071),T$n.texParameteri(3553,10243,33071),T$n.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,T$_&&T$E&&T$kn.bindTexture(T$n,T$_,T$E);},T$C.reloadCanvasData=function(){var T$n=T$An.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var T$C=T$kn.curBindTexTarget,T$_=T$kn.curBindTexValue;T$kn.bindTexture(T$n,3553,this._source),T$y.premulAlpha&&T$n.pixelStorei(37441,!0),T$n.texImage2D(3553,0,6408,6408,5121,this._imgData),T$y.premulAlpha&&T$n.pixelStorei(37441,!1),T$n.pixelStorei(37440,0),T$C&&T$_&&T$kn.bindTexture(T$n,T$C,T$_);},T$C.texSubImage2D=function(T$n,T$C,T$_){var T$E=T$An.mainContext,T$y=T$kn.curBindTexTarget,T$p=T$kn.curBindTexValue;T$kn.bindTexture(T$E,3553,this._source),T$E.pixelStorei(37441,!0),T$E.texSubImage2D(3553,0,T$C,T$_,6408,5121,T$n._source),T$E.pixelStorei(37441,!1),T$y&&T$p&&T$kn.bindTexture(T$E,T$y,T$p);},T$C.toBase64=function(T$n,T$C,T$_){var T$E=null;this._canvas&&(T$E=this._canvas.toDataURL(T$n,T$C)),T$_.call(this,T$E);},T$E(0,T$C,"context",function(){return this._ctx;}),T$E(0,T$C,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source;}),T$E(0,T$C,"asBitmap",null,function(T$n){this._ctx&&(this._ctx.asBitmap=T$n);}),T$y._createContext=null,T$y.premulAlpha=!1,T$y;}(),T$Zn=function(T$n){function T$p(T$n,T$C){this.CborderSize=12,T$p.__super.call(this),this.char=T$n,this.isSpace=" "===T$n,this.xs=T$C.scaleX,this.ys=T$C.scaleY,this.font=T$C.font.toString(),this.fontSize=T$C.font.size,this.fillColor=T$C.fillColor,this.borderColor=T$C.borderColor,this.lineWidth=T$C.lineWidth,this.underLine=T$C.underLine;var T$_,T$E=T$d.isConchApp;T$E?((T$_=ConchTextCanvas)._source=ConchTextCanvas,T$_._source.canvas=ConchTextCanvas):T$_=T$x.canvas.source,this.canvas=T$_,this._enableMerageInAtlas=!0,this._ctx=T$E?T$_:this.canvas.getContext("2d",void 0);var T$y=T$$.measureText(this.char,this.font);this.cw=T$y.width*this.xs,this.ch=(T$y.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new T$X(this);}T$P(T$p,"laya.webgl.resource.WebGLCharImage",T$_);var T$C=T$p.prototype;return T$t.imps(T$C,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),T$C.active=function(){this.texture.active();},T$C.recreateResource=function(){var T$n=T$d.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),T$n){var T$C=this.fontSize;1==this.xs&&1==this.ys||(T$C=parseInt(T$C*(this.xs>this.ys?this.xs:this.ys)+""));var T$_="normal 100 "+this.font;T$_=T$_.replace(T$p._fontSizeReg,T$C),this.borderColor&&(T$_+=" 1 "+this.borderColor),this._ctx.font=T$_,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null);}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,T$H.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var T$E=this._ctx.measureText(this.char);T$E||(T$E={width:16});var T$y=T$E.width+1;this._ctx.lineTo(T$y,this.fontSize+1),this._ctx.stroke();}this._ctx.restore();}this.borderSize=this.CborderSize,this.completeCreate();},T$C.onresize=function(T$n,T$C){this._w=T$n,this._h=T$C,this._allowMerageInAtlas=!0;},T$C.clearAtlasSource=function(){},T$E(0,T$C,"allowMerageInAtlas",function(){return this._allowMerageInAtlas;}),T$E(0,T$C,"atlasSource",function(){return this.canvas;}),T$E(0,T$C,"enableMerageInAtlas",function(){return this._enableMerageInAtlas;},function(T$n){this._enableMerageInAtlas=T$n;}),T$p.createOneChar=function(T$n,T$C){return new T$p(T$n,T$C);},T$p._fontSizeReg=new RegExp("\\d+(?=px)","g"),T$p;}(),T$Ln=function(T$n){function T$q(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W){void 0===T$_&&(T$_=6408),void 0===T$E&&(T$E=5121),void 0===T$y&&(T$y=34041),void 0===T$p&&(T$p=!1),void 0===T$c&&(T$c=!1),void 0===T$l&&(T$l=-1),void 0===T$W&&(T$W=1),T$q.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=T$n,this._h=T$C,this._surfaceFormat=T$_,this._surfaceType=T$E,this._depthStencilFormat=T$y,this._mipMap=T$p,this._repeat=T$c,this._minFifter=T$l,this._magFifter=T$W;}T$P(T$q,"laya.webgl.resource.WebGLRenderTarget",T$_);var T$C=T$q.prototype;return T$C.recreateResource=function(){var T$n=T$An.mainContext;this._frameBuffer||(this._frameBuffer=T$n.createFramebuffer()),this._source||(this._source=T$n.createTexture());var T$C=T$kn.curBindTexTarget,T$_=T$kn.curBindTexValue;T$kn.bindTexture(T$n,3553,this._source),T$n.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var T$E=this._minFifter,T$y=this._magFifter,T$p=this._repeat?10497:33071,T$c=T$J.isPOT(this._w,this._h);if(T$c?(this._mipMap?-1!==T$E||(T$E=9987):-1!==T$E||(T$E=9729),-1!==T$y||(T$y=9729),T$n.texParameteri(3553,10241,T$E),T$n.texParameteri(3553,10240,T$y),T$n.texParameteri(3553,10242,T$p),T$n.texParameteri(3553,10243,T$p),this._mipMap&&T$n.generateMipmap(3553)):(-1!==T$E||(T$E=9729),-1!==T$y||(T$y=9729),T$n.texParameteri(3553,10241,T$E),T$n.texParameteri(3553,10240,T$y),T$n.texParameteri(3553,10242,33071),T$n.texParameteri(3553,10243,33071)),T$n.bindFramebuffer(36160,this._frameBuffer),T$n.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=T$n.createRenderbuffer()),T$n.bindRenderbuffer(36161,this._depthStencilBuffer),T$n.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:T$n.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:T$n.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:T$n.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer);}T$n.bindFramebuffer(36160,null),T$C&&T$_&&T$kn.bindTexture(T$n,T$C,T$_),T$n.bindRenderbuffer(36161,null),T$c&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate();},T$C.disposeResource=function(){this._frameBuffer&&(T$An.mainContext.deleteTexture(this._source),T$An.mainContext.deleteFramebuffer(this._frameBuffer),T$An.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0,this.uri=null);},T$E(0,T$C,"depthStencilBuffer",function(){return this._depthStencilBuffer;}),T$E(0,T$C,"frameBuffer",function(){return this._frameBuffer;}),T$q;}(),T$hn=function(T$n){function T$l(T$n,T$C,T$_,T$E,T$y,T$p,T$c){this.offsetX=0,this.offsetY=0,T$l.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=T$p,this.canvas=T$n,this._ctx=T$n.getContext("2d",void 0),this._w=T$E,this._h=T$y,this.offsetX=T$C,this.offsetY=T$_,this.src=T$c,this._enableMerageInAtlas=!0,T$F.enabled&&this._w<T$F.atlasLimitWidth&&this._h<T$F.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1;}T$P(T$l,"laya.webgl.resource.WebGLSubImage",T$_);var T$C=T$l.prototype;return T$t.imps(T$C,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),T$C.size=function(T$n,T$C){this._w=T$n,this._h=T$C,this._ctx&&this._ctx.size(T$n,T$C),this.canvas&&(this.canvas.height=T$C,this.canvas.width=T$n);},T$C.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate();},T$C.createWebGlTexture=function(){var T$n=T$An.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var T$C=this._source=T$n.createTexture(),T$_=T$kn.curBindTexTarget,T$E=T$kn.curBindTexValue;T$kn.bindTexture(T$n,3553,T$C),T$n.pixelStorei(37441,!0),T$n.texImage2D(3553,0,6408,6408,5121,this.canvas),T$n.pixelStorei(37441,!1);var T$y=this.minFifter,T$p=this.magFifter,T$c=this.repeat?10497:33071,T$l=T$J.isPOT(this.width,this.height);T$l?(this.mipmap?-1!==T$y||(T$y=9987):-1!==T$y||(T$y=9729),-1!==T$p||(T$p=9729),T$n.texParameteri(3553,10240,T$p),T$n.texParameteri(3553,10241,T$y),T$n.texParameteri(3553,10242,T$c),T$n.texParameteri(3553,10243,T$c),this.mipmap&&T$n.generateMipmap(3553)):(-1!==T$y||(T$y=9729),-1!==T$p||(T$p=9729),T$n.texParameteri(3553,10241,T$y),T$n.texParameteri(3553,10240,T$p),T$n.texParameteri(3553,10242,33071),T$n.texParameteri(3553,10243,33071)),T$_&&T$E&&T$kn.bindTexture(T$n,T$_,T$E),this.canvas=null,T$l&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4;},T$C.disposeResource=function(){T$F.enabled&&this._allowMerageInAtlas||!this._source||(T$An.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0);},T$C.clearAtlasSource=function(){},T$E(0,T$C,"allowMerageInAtlas",function(){return this._allowMerageInAtlas;}),T$E(0,T$C,"atlasSource",function(){return this.canvas;}),T$E(0,T$C,"enableMerageInAtlas",function(){return this._allowMerageInAtlas;},function(T$n){this._allowMerageInAtlas=T$n;}),T$l;}(),T$vn=function(T$n){function T$q(T$n,T$C,T$_,T$E){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,T$q.__super.call(this),!T$n||!T$C)throw"Shader Error";this._id=++T$q._count,this._vs=T$n,this._ps=T$C,this._nameMap=T$E||{},null!=T$_&&(T$q.sharders[T$_]=this);}T$P(T$q,"laya.webgl.shader.Shader",T$$n);var T$C=T$q.prototype;return T$C.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0;},T$C.disposeResource=function(){T$An.mainContext.deleteShader(this._vshader),T$An.mainContext.deleteShader(this._pshader),T$An.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0;},T$C._compile=function(){if(!T$An.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var T$n=[this._vs,this._ps],T$C=T$An.mainContext;if(this._program=T$C.createProgram(),this._vshader=T$q._createShader(T$C,T$n[0],35633),this._pshader=T$q._createShader(T$C,T$n[1],35632),T$C.attachShader(this._program,this._vshader),T$C.attachShader(this._program,this._pshader),T$C.linkProgram(this._program),!T$d.isConchApp&&!T$C.getProgramParameter(this._program,35714))throw T$C.getProgramInfoLog(this._program);var T$_,T$E,T$y=0,T$p=0;for(T$p=T$d.isConchApp?T$C.getProgramParameterEx(this._vs,this._ps,"",35721):T$C.getProgramParameter(this._program,35721),T$y=0;T$y<T$p;T$y++){var T$c=null;T$_={vartype:"attribute",glfun:null,ivartype:0,attrib:T$c=T$d.isConchApp?T$C.getActiveAttribEx(this._vs,this._ps,"",T$y):T$C.getActiveAttrib(this._program,T$y),location:T$C.getAttribLocation(this._program,T$c.name),name:T$c.name,type:T$c.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(T$_);}var T$l=0;for(T$l=T$d.isConchApp?T$C.getProgramParameterEx(this._vs,this._ps,"",35718):T$C.getProgramParameter(this._program,35718),T$y=0;T$y<T$l;T$y++){var T$W=null;T$W=T$d.isConchApp?T$C.getActiveUniformEx(this._vs,this._ps,"",T$y):T$C.getActiveUniform(this._program,T$y),0<(T$_={vartype:"uniform",glfun:null,ivartype:1,attrib:T$c,location:T$C.getUniformLocation(this._program,T$W.name),name:T$W.name,type:T$W.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(T$_.name=T$_.name.substr(0,T$_.name.length-3),T$_.isArray=!0,T$_.location=T$C.getUniformLocation(this._program,T$_.name)),this._params.push(T$_);}for(T$y=0,T$E=this._params.length;T$y<T$E;T$y++)if((T$_=this._params[T$y]).indexOfParams=T$y,T$_.index=1,T$_.value=[T$_.location,null],T$_.codename=T$_.name,T$_.name=this._nameMap[T$_.codename]?this._nameMap[T$_.codename]:T$_.codename,(this._paramsMap[T$_.name]=T$_)._this=this,T$_.uploadedValue=[],"attribute"!==T$_.vartype)switch(T$_.type){case 5124:T$_.fun=T$_.isArray?this._uniform1iv:this._uniform1i;break;case 5126:T$_.fun=T$_.isArray?this._uniform1fv:this._uniform1f;break;case 35664:T$_.fun=T$_.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:T$_.fun=T$_.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:T$_.fun=T$_.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:T$_.fun=this._uniform_sampler2D;break;case 35680:T$_.fun=this._uniform_samplerCube;break;case 35676:T$_.glfun=T$C.uniformMatrix4fv,T$_.fun=this._uniformMatrix4fv;break;case 35670:T$_.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!");}else T$_.fun=this._attribute;}},T$C.getUniform=function(T$n){return this._paramsMap[T$n];},T$C._attribute=function(T$n,T$C){var T$_=T$An.mainContext,T$E=T$fn._enableAtributes,T$y=T$n.location;return T$E[T$y]||T$_.enableVertexAttribArray(T$y),T$_.vertexAttribPointer(T$y,T$C[0],T$C[1],T$C[2],T$C[3],T$C[4]+this._offset),T$E[T$y]=T$fn._bindVertexBuffer,1;},T$C._uniform1f=function(T$n,T$C){var T$_=T$n.uploadedValue;return T$_[0]!==T$C?(T$An.mainContext.uniform1f(T$n.location,T$_[0]=T$C),1):0;},T$C._uniform1fv=function(T$n,T$C){if(T$C.length<4){var T$_=T$n.uploadedValue;return T$_[0]!==T$C[0]||T$_[1]!==T$C[1]||T$_[2]!==T$C[2]||T$_[3]!==T$C[3]?(T$An.mainContext.uniform1fv(T$n.location,T$C),T$_[0]=T$C[0],T$_[1]=T$C[1],T$_[2]=T$C[2],T$_[3]=T$C[3],1):0;}return T$An.mainContext.uniform1fv(T$n.location,T$C),1;},T$C._uniform_vec2=function(T$n,T$C){var T$_=T$n.uploadedValue;return T$_[0]!==T$C[0]||T$_[1]!==T$C[1]?(T$An.mainContext.uniform2f(T$n.location,T$_[0]=T$C[0],T$_[1]=T$C[1]),1):0;},T$C._uniform_vec2v=function(T$n,T$C){if(T$C.length<2){var T$_=T$n.uploadedValue;return T$_[0]!==T$C[0]||T$_[1]!==T$C[1]||T$_[2]!==T$C[2]||T$_[3]!==T$C[3]?(T$An.mainContext.uniform2fv(T$n.location,T$C),T$_[0]=T$C[0],T$_[1]=T$C[1],T$_[2]=T$C[2],T$_[3]=T$C[3],1):0;}return T$An.mainContext.uniform2fv(T$n.location,T$C),1;},T$C._uniform_vec3=function(T$n,T$C){var T$_=T$n.uploadedValue;return T$_[0]!==T$C[0]||T$_[1]!==T$C[1]||T$_[2]!==T$C[2]?(T$An.mainContext.uniform3f(T$n.location,T$_[0]=T$C[0],T$_[1]=T$C[1],T$_[2]=T$C[2]),1):0;},T$C._uniform_vec3v=function(T$n,T$C){return T$An.mainContext.uniform3fv(T$n.location,T$C),1;},T$C._uniform_vec4=function(T$n,T$C){var T$_=T$n.uploadedValue;return T$_[0]!==T$C[0]||T$_[1]!==T$C[1]||T$_[2]!==T$C[2]||T$_[3]!==T$C[3]?(T$An.mainContext.uniform4f(T$n.location,T$_[0]=T$C[0],T$_[1]=T$C[1],T$_[2]=T$C[2],T$_[3]=T$C[3]),1):0;},T$C._uniform_vec4v=function(T$n,T$C){return T$An.mainContext.uniform4fv(T$n.location,T$C),1;},T$C._uniformMatrix2fv=function(T$n,T$C){return T$An.mainContext.uniformMatrix2fv(T$n.location,!1,T$C),1;},T$C._uniformMatrix3fv=function(T$n,T$C){return T$An.mainContext.uniformMatrix3fv(T$n.location,!1,T$C),1;},T$C._uniformMatrix4fv=function(T$n,T$C){return T$An.mainContext.uniformMatrix4fv(T$n.location,!1,T$C),1;},T$C._uniform1i=function(T$n,T$C){var T$_=T$n.uploadedValue;return T$_[0]!==T$C?(T$An.mainContext.uniform1i(T$n.location,T$_[0]=T$C),1):0;},T$C._uniform1iv=function(T$n,T$C){return T$An.mainContext.uniform1iv(T$n.location,T$C),1;},T$C._uniform_ivec2=function(T$n,T$C){var T$_=T$n.uploadedValue;return T$_[0]!==T$C[0]||T$_[1]!==T$C[1]?(T$An.mainContext.uniform2i(T$n.location,T$_[0]=T$C[0],T$_[1]=T$C[1]),1):0;},T$C._uniform_ivec2v=function(T$n,T$C){return T$An.mainContext.uniform2iv(T$n.location,T$C),1;},T$C._uniform_vec3i=function(T$n,T$C){var T$_=T$n.uploadedValue;return T$_[0]!==T$C[0]||T$_[1]!==T$C[1]||T$_[2]!==T$C[2]?(T$An.mainContext.uniform3i(T$n.location,T$_[0]=T$C[0],T$_[1]=T$C[1],T$_[2]=T$C[2]),1):0;},T$C._uniform_vec3vi=function(T$n,T$C){return T$An.mainContext.uniform3iv(T$n.location,T$C),1;},T$C._uniform_vec4i=function(T$n,T$C){var T$_=T$n.uploadedValue;return T$_[0]!==T$C[0]||T$_[1]!==T$C[1]||T$_[2]!==T$C[2]||T$_[3]!==T$C[3]?(T$An.mainContext.uniform4i(T$n.location,T$_[0]=T$C[0],T$_[1]=T$C[1],T$_[2]=T$C[2],T$_[3]=T$C[3]),1):0;},T$C._uniform_vec4vi=function(T$n,T$C){return T$An.mainContext.uniform4iv(T$n.location,T$C),1;},T$C._uniform_sampler2D=function(T$n,T$C){var T$_=T$An.mainContext,T$E=T$n.uploadedValue;return null==T$E[0]?(T$E[0]=this._curActTexIndex,T$_.uniform1i(T$n.location,this._curActTexIndex),T$_.activeTexture(T$q._TEXTURES[this._curActTexIndex]),T$kn.bindTexture(T$_,3553,T$C),this._curActTexIndex++,1):(T$_.activeTexture(T$q._TEXTURES[T$E[0]]),T$kn.bindTexture(T$_,3553,T$C),0);},T$C._uniform_samplerCube=function(T$n,T$C){var T$_=T$An.mainContext,T$E=T$n.uploadedValue;return null==T$E[0]?(T$E[0]=this._curActTexIndex,T$_.uniform1i(T$n.location,this._curActTexIndex),T$_.activeTexture(T$q._TEXTURES[this._curActTexIndex]),T$kn.bindTexture(T$_,34067,T$C),this._curActTexIndex++,1):(T$_.activeTexture(T$q._TEXTURES[T$E[0]]),T$kn.bindTexture(T$_,34067,T$C),0);},T$C._noSetValue=function(T$n){console.log("no....:"+T$n.name);},T$C.uploadOne=function(T$n,T$C){this.activeResource(),T$kn.UseProgram(this._program);var T$_=this._paramsMap[T$n];T$_.fun.call(this,T$_,T$C);},T$C.uploadTexture2D=function(T$n){T$B.shaderCall++;var T$C=T$An.mainContext;T$C.activeTexture(33984),T$kn.bindTexture(T$C,3553,T$n);},T$C.uploadTexture2D1=function(T$n){T$B.shaderCall++;var T$C=T$An.mainContext;T$C.activeTexture(33985),T$kn.bindTexture(T$C,3553,T$n);},T$C.upload=function(T$n,T$C){T$$n.activeShader=T$$n.bindShader=this,this._lastUseFrameCount===T$B.loopCount||this.activeResource(),T$kn.UseProgram(this._program),this._reCompile?(T$C=this._params,this._reCompile=!1):T$C=T$C||this._params;T$An.mainContext;for(var T$_,T$E,T$y=T$C.length,T$p=0,T$c=0;T$c<T$y;T$c++)null!==(T$E=T$n[(T$_=T$C[T$c]).name])&&(T$p+=T$_.fun.call(this,T$_,T$E));T$B.shaderCall+=T$p;},T$C.uploadArray=function(T$n,T$C,T$_){T$$n.activeShader=this,(T$$n.bindShader=this).activeResource(),T$kn.UseProgram(this._program);this._params;for(var T$E,T$y,T$p=0,T$c=T$C-2;0<=T$c;T$c-=2)(T$y=this._paramsMap[T$n[T$c]])&&null!=(T$E=T$n[T$c+1])&&(T$_&&T$_[T$y.name]&&T$_[T$y.name].bind(),T$p+=T$y.fun.call(this,T$y,T$E));T$B.shaderCall+=T$p;},T$C.getParams=function(){return this._params;},T$q.getShader=function(T$n){return T$q.sharders[T$n];},T$q.create=function(T$n,T$C,T$_,T$E){return new T$q(T$n,T$C,T$_,T$E);},T$q.withCompile=function(T$n,T$C,T$_,T$E){if(T$_&&T$q.sharders[T$_])return T$q.sharders[T$_];var T$y=T$q._preCompileShader[2e-4*T$n];if(!T$y)throw new Error("withCompile shader err!"+T$n);return T$y.createShader(T$C,T$_,T$E);},T$q.withCompile2D=function(T$n,T$C,T$_,T$E,T$y){if(T$E&&T$q.sharders[T$E])return T$q.sharders[T$E];var T$p=T$q._preCompileShader[2e-4*T$n+T$C];if(!T$p)throw new Error("withCompile shader err!"+T$n+" "+T$C);return T$p.createShader(T$_,T$E,T$y);},T$q.addInclude=function(T$n,T$C){T$On.addInclude(T$n,T$C);},T$q.preCompile=function(T$n,T$C,T$_,T$E){var T$y=2e-4*T$n;T$q._preCompileShader[T$y]=new T$On(T$y,T$C,T$_,T$E);},T$q.preCompile2D=function(T$n,T$C,T$_,T$E,T$y){var T$p=2e-4*T$n+T$C;T$q._preCompileShader[T$p]=new T$On(T$p,T$_,T$E,T$y);},T$q._createShader=function(T$n,T$C,T$_){var T$E=T$n.createShader(T$_);return T$n.shaderSource(T$E,T$C),T$n.compileShader(T$E),T$E;},T$q._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],T$q._count=0,T$q._preCompileShader={},T$q.SHADERNAME2ID=2e-4,T$q.sharders=((T$q.sharders=[]).length=32,T$q.sharders),T$c(T$q,["nameKey",function(){return this.nameKey=new T$V();}]),T$q;}(),T$Rn=function(T$n){function T$C(){this._maxsize=0,this._upload=!0,this._uploadSize=0,T$C.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id;}T$P(T$C,"laya.webgl.utils.Buffer2D",T$n);var T$_=T$C.prototype;return T$_.needSize=function(T$n){var T$C=this._byteLength;if(T$n){var T$_=this._byteLength+T$n;T$_<=this._buffer.byteLength||this._resizeBuffer(T$_<<1,!0),this._byteLength=T$_;}return T$C;},T$_._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),T$B.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,T$fn._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),T$fn._gl.bufferSubData(this._bufferType,0,this._buffer);},T$_._bufferSubData=function(T$n,T$C,T$_){if(void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0),this._maxsize=Math.max(this._maxsize,this._byteLength),T$B.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,T$fn._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),T$C||T$_){var T$E=this._buffer.slice(T$C,T$_);T$fn._gl.bufferSubData(this._bufferType,T$n,T$E);}else T$fn._gl.bufferSubData(this._bufferType,T$n,this._buffer);},T$_._checkArrayUse=function(){},T$_._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0);},T$_._bind_subUpload=function(T$n,T$C,T$_){return void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(T$n,T$C,T$_),!0);},T$_._resizeBuffer=function(T$n,T$C){if(T$n<this._buffer.byteLength)return this;if(this.memorySize=T$n,T$C&&this._buffer&&0<this._buffer.byteLength){var T$_=new ArrayBuffer(T$n);new Uint8Array(T$_).set(new Uint8Array(this._buffer),0),this._buffer=T$_;}else this._buffer=new ArrayBuffer(T$n);return this._checkArrayUse(),this._upload=!0,this;},T$_.append=function(T$n){this._upload=!0;var T$C,T$_;T$C=T$n.byteLength,T$n instanceof Uint8Array?(this._resizeBuffer(this._byteLength+T$C,!0),T$_=new Uint8Array(this._buffer,this._byteLength)):T$n instanceof Uint16Array?(this._resizeBuffer(this._byteLength+T$C,!0),T$_=new Uint16Array(this._buffer,this._byteLength)):T$n instanceof Float32Array&&(this._resizeBuffer(this._byteLength+T$C,!0),T$_=new Float32Array(this._buffer,this._byteLength)),T$_.set(T$n,0),this._byteLength+=T$C,this._checkArrayUse();},T$_.appendU16Array=function(T$n,T$C){this._resizeBuffer(this._byteLength+2*T$C,!0);for(var T$_=new Uint16Array(this._buffer,this._byteLength,T$C),T$E=0;T$E<T$C;T$E++)T$_[T$E]=T$n[T$E];this._byteLength+=2*T$C,this._checkArrayUse();},T$_.appendEx=function(T$n,T$C){this._upload=!0;var T$_;T$_=T$n.byteLength,this._resizeBuffer(this._byteLength+T$_,!0),new T$C(this._buffer,this._byteLength).set(T$n,0),this._byteLength+=T$_,this._checkArrayUse();},T$_.appendEx2=function(T$n,T$C,T$_,T$E){void 0===T$E&&(T$E=1),this._upload=!0;var T$y,T$p;T$y=T$_*T$E,this._resizeBuffer(this._byteLength+T$y,!0),T$p=new T$C(this._buffer,this._byteLength);var T$c=0;for(T$c=0;T$c<T$_;T$c++)T$p[T$c]=T$n[T$c];this._byteLength+=T$y,this._checkArrayUse();},T$_.getBuffer=function(){return this._buffer;},T$_.setNeedUpload=function(){this._upload=!0;},T$_.getNeedUpload=function(){return this._upload;},T$_.upload=function(){var T$n=this._bind_upload();return T$fn._gl.bindBuffer(this._bufferType,null),T$fn._bindActive[this._bufferType]=null,T$$n.activeShader=null,T$n;},T$_.subUpload=function(T$n,T$C,T$_){void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0);var T$E=this._bind_subUpload();return T$fn._gl.bindBuffer(this._bufferType,null),T$fn._bindActive[this._bufferType]=null,T$$n.activeShader=null,T$E;},T$_.disposeResource=function(){T$n.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0;},T$_.clear=function(){this._byteLength=0,this._upload=!0;},T$E(0,T$_,"bufferLength",function(){return this._buffer.byteLength;}),T$E(0,T$_,"byteLength",null,function(T$n){this._byteLength!==T$n&&(T$n<=this._buffer.byteLength||this._resizeBuffer(2*T$n+256,!0),this._byteLength=T$n);}),T$C.__int__=function(T$n){T$Kn.QuadrangleIB=T$Kn.create(35044),T$mn.fillIBQuadrangle(T$Kn.QuadrangleIB,16);},T$C.FLOAT32=4,T$C.SHORT=2,T$C;}(T$fn),T$zn=(function(T$C){function T$_(T$n){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,T$_.__super.call(this,9);}T$P(T$_,"laya.webgl.shader.d2.value.GlowSV",T$C);var T$n=T$_.prototype;T$n.setValue=function(T$n){T$C.prototype.setValue.call(this,T$n);},T$n.clear=function(){T$C.prototype.clear.call(this);};}(T$un),function(T$n){function T$C(T$n){T$C.__super.call(this,64),this.defines.add(64);}T$P(T$C,"laya.webgl.shader.d2.value.TextSV",T$n);var T$_=T$C.prototype;return T$_.release=function(){(T$C.pool[T$C._length++]=this).clear();},T$_.clear=function(){T$n.prototype.clear.call(this);},T$C.create=function(){return T$C._length?T$C.pool[--T$C._length]:new T$C(null);},T$C.pool=[],T$C._length=0,T$C;}(T$un)),T$Un=function(T$n){function T$y(T$n,T$C,T$_,T$E){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,T$y.__super.call(this,T$n,T$C,T$_,T$E);}T$P(T$y,"laya.webgl.shader.d2.Shader2X",T$n);var T$C=T$y.prototype;return T$C.upload2dQuick1=function(T$n){this.upload(T$n,this._params2dQuick1||this._make2dQuick1());},T$C._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var T$n,T$C=this._params,T$_=0,T$E=T$C.length;T$_<T$E;T$_++)T$n=T$C[T$_],(T$d.isFlash||"size"!==T$n.name&&"position"!==T$n.name&&"texcoord"!==T$n.name)&&this._params2dQuick1.push(T$n);}return this._params2dQuick1;},T$C.disposeResource=function(){T$n.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null;},T$C.upload2dQuick2=function(T$n){this.upload(T$n,this._params2dQuick2||this._make2dQuick2());},T$C._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var T$n,T$C=this._params,T$_=0,T$E=T$C.length;T$_<T$E;T$_++)T$n=T$C[T$_],(T$d.isFlash||"size"!==T$n.name)&&this._params2dQuick2.push(T$n);}return this._params2dQuick2;},T$y.create=function(T$n,T$C,T$_,T$E){return new T$y(T$n,T$C,T$_,T$E);},T$y;}(T$vn),T$Kn=function(T$n){function T$C(T$n){this._uint8Array=null,this._uint16Array=null,void 0===T$n&&(T$n=35044),T$C.__super.call(this),this._bufferUsage=T$n,this._bufferType=34963,T$d.isFlash||(this._buffer=new ArrayBuffer(8));}T$P(T$C,"laya.webgl.utils.IndexBuffer2D",T$Rn);var T$_=T$C.prototype;return T$_._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer));},T$_.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer));},T$_.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer));},T$_.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null;},T$C.QuadrangleIB=null,T$C.create=function(T$n){return void 0===T$n&&(T$n=35044),new T$C(T$n);},T$C;}(),T$Dn=function(T$n){function T$_(T$n,T$C){this._floatArray32=null,this._vertexStride=0,T$_.__super.call(this),this._vertexStride=T$n,this._bufferUsage=T$C,this._bufferType=34962,T$d.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array();}T$P(T$_,"laya.webgl.utils.VertexBuffer2D",T$n);var T$C=T$_.prototype;return T$C.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer));},T$C.bind=function(T$n){T$n&&T$n._bind(),this._bind();},T$C.insertData=function(T$n,T$C){this.getFloat32Array().set(T$n,T$C),this._upload=!0;},T$C.bind_upload=function(T$n){T$n._bind_upload()||T$n._bind(),this._bind_upload()||this._bind();},T$C._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer));},T$C.disposeResource=function(){T$n.prototype.disposeResource.call(this);},T$C.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null;},T$E(0,T$C,"vertexStride",function(){return this._vertexStride;}),T$_.create=function(T$n,T$C){return void 0===T$C&&(T$C=35048),new T$_(T$n,T$C);},T$_;}(T$Rn),T$nC=function(T$n){function T$l(T$n,T$C,T$_,T$E,T$y,T$p){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===T$_&&(T$_=6408),void 0===T$E&&(T$E=!0),T$l.__super.call(this,T$n,T$C),T$n){if(this._format=T$_,this._mipmap=T$E,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof T$n)this._url=T$n,this._src=T$n,this._image=new T$x.window.Image(),T$C&&(T$C.onload&&(this.onload=T$C.onload),T$C.onerror&&(this.onerror=T$C.onerror),T$C.onCreate&&T$C.onCreate(this)),this._image.crossOrigin=T$n&&0==T$n.indexOf("data:")?null:"",T$n&&(this._image.src=T$n);else if(T$n instanceof ArrayBuffer){this._src=T$C,this._url=this._src;var T$c=new T$W(T$n);T$c.readUTFBytes(4),T$c.readUTFBytes(2),T$c.getInt16();T$c.endian="bigEndian",this._w=T$c.getInt16(),this._h=T$c.getInt16();T$c.getInt16(),T$c.getInt16();this._image=new Uint8Array(T$n,T$c.pos),this._format=T$An.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,T$F.enabled&&this._w<T$F.atlasLimitWidth&&this._h<T$F.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1;}else{if(!(T$n instanceof Uint8Array))return this._src=T$C,this._url=this._src,this._image=T$n.source||T$n,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=T$C,this._url=this._src,this._w=T$y,this._h=T$p,this._image=T$n,this._format=0===T$_?T$n.byteLength/(T$y*T$p)==4?6408:6407:T$_;}this._$5__enableMerageInAtlas=!0;}}T$P(T$l,"laya.webgl.resource.WebGLImage",T$r);var T$C=T$l.prototype;return T$t.imps(T$C,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),T$C._init_=function(T$n,T$C){},T$C._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var T$n=T$An.mainContext,T$C=this._source=T$n.createTexture(),T$_=T$kn.curBindTexTarget,T$E=T$kn.curBindTexValue;T$kn.bindTexture(T$n,3553,T$C);var T$y=this.minFifter,T$p=this.magFifter,T$c=this.repeat?10497:33071,T$l=T$J.isPOT(this._w,this._h),T$W=!1;switch(T$l?(this.mipmap?-1!==T$y||(T$y=9987):-1!==T$y||(T$y=9729),-1!==T$p||(T$p=9729),T$n.texParameteri(3553,10241,T$y),T$n.texParameteri(3553,10240,T$p),T$n.texParameteri(3553,10242,T$c),T$n.texParameteri(3553,10243,T$c),this.mipmap&&T$n.generateMipmap(3553)):(-1!==T$y||(T$y=9729),-1!==T$p||(T$p=9729),T$n.texParameteri(3553,10241,T$y),T$n.texParameteri(3553,10240,T$p),T$n.texParameteri(3553,10242,33071),T$n.texParameteri(3553,10243,33071)),T$n.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&T$n.pixelStorei(T$n.UNPACK_ALIGNMENT,1),T$n.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&T$n.pixelStorei(T$n.UNPACK_ALIGNMENT,1),T$n.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:T$W=!0,T$n.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case T$An.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:T$W=!0,T$n.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format);}T$n.pixelStorei(37441,!1),T$_&&T$E&&T$kn.bindTexture(T$n,T$_,T$E),this.uri||(this.uri=this._url),T$W?this.memorySize=this._image.length:T$l&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1;},T$C.recreateResource=function(){var T$n=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate();}else{this._recreateLock=!0;var T$C=this;this._image=new T$x.window.Image(),this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(T$C._needReleaseAgain)return T$C._needReleaseAgain=!1,T$C._image.onload=null,void(T$C._image=null);T$C._allowMerageInAtlas&&T$C._enableMerageInAtlas?(T$n.memorySize=0,T$n._recreateLock=!1):T$C._createWebGlTexture(),T$C.completeCreate();},this._image.src=this._src;}},T$C.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&T$An.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0;},T$C.onresize=function(){this._w=this._image.width,this._h=this._image.height,T$F.enabled&&this._w<T$F.atlasLimitWidth&&this._h<T$F.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1;},T$C.clearAtlasSource=function(){this._image=null;},T$E(0,T$C,"format",function(){return this._format;}),T$E(0,T$C,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas;},function(T$n){this._$5__enableMerageInAtlas=T$n;}),T$E(0,T$C,"mipmap",function(){return this._mipmap;}),T$E(0,T$C,"allowMerageInAtlas",function(){return this._allowMerageInAtlas;}),T$E(0,T$C,"atlasSource",function(){return this._image;}),T$E(0,T$C,"onload",null,function(T$n){var T$C=this;this._onload=T$n,this._image&&(this._image.onload=null!=this._onload?function(){T$C.onresize(),T$C._onload();}:null);}),T$E(0,T$C,"onerror",null,function(T$n){var T$C=this;this._onerror=T$n,this._image&&(this._image.onerror=null!=this._onerror?function(){T$C._onerror();}:null);}),T$l;}();T$t.__init([T$xn,T$G,T$Tn,T$On]);}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$n,T$C){"use strict";for(var T$_ in Object.defineProperty(T$C,"__esModule",{value:!0}),Laya){var T$E=Laya[T$_];T$E&&T$E.__isclass&&(T$C[T$_]=T$E);}}),function(T$p,T$n,T$E){T$E.un,T$E.uns;var T$y=T$E.static,T$c=T$E.class,T$l=T$E.getset,T$W=(T$E.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),T$b=laya.utils.ClassUtils,T$j=(laya.events.Event,laya.utils.HTMLChar),T$q=laya.net.Loader,T$J=(laya.display.Node,laya.maths.Rectangle),T$P=laya.renders.Render,T$x=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),T$r=laya.utils.Stat,T$$=laya.display.Text,T$m=laya.resource.Texture,T$d=laya.net.URL,T$a=laya.utils.Utils,T$O=function(){function T$x(){}return T$c(T$x,"laya.html.utils.HTMLParse"),T$x.parse=function(T$n,T$C,T$_){T$C=(T$C="<root>"+(T$C=T$C.replace(/<br>/g,"<br/>"))+"</root>").replace(T$x.spacePattern,T$x.char255);var T$E=T$a.parseXMLFromString(T$C);T$x._parseXML(T$n,T$E.childNodes[0].childNodes,T$_);},T$x._parseXML=function(T$n,T$C,T$_,T$E){var T$y=0,T$p=0;if(T$C.join||T$C.item)for(T$y=0,T$p=T$C.length;T$y<T$p;++T$y)T$x._parseXML(T$n,T$C[T$y],T$_,T$E);else{var T$c,T$l,T$W;if(3==T$C.nodeType)return void(T$n instanceof laya.html.dom.HTMLDivElement?(null==T$C.nodeName&&(T$C.nodeName="#text"),T$l=T$C.nodeName.toLowerCase(),0<(T$W=T$C.textContent.replace(/^\s+|\s+$/g,"")).length&&(T$c=T$b.getInstance(T$l))&&(T$n.addChild(T$c),T$c.innerTEXT=T$W.replace(T$x.char255AndOneSpacePattern," "))):0<(T$W=T$C.textContent.replace(/^\s+|\s+$/g,"")).length&&(T$n.innerTEXT=T$W.replace(T$x.char255AndOneSpacePattern," ")));if("#comment"==(T$l=T$C.nodeName.toLowerCase()))return;if(T$c=T$b.getInstance(T$l)){(T$c=T$n.addChild(T$c)).URI=T$_,T$c.href=T$E;var T$q=T$C.attributes;if(T$q&&0<T$q.length)for(T$y=0,T$p=T$q.length;T$y<T$p;++T$y){var T$J=T$q[T$y],T$j=T$J.nodeName,T$P=T$J.value;T$c._setAttributes(T$j,T$P);}T$x._parseXML(T$c,T$C.childNodes,T$_,T$c.href);}else T$x._parseXML(T$n,T$C.childNodes,T$_,T$E);}},T$x.char255=String.fromCharCode(255),T$x.spacePattern=/&nbsp;|&#160;/g,T$x.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),T$x;}(),T$A=function(){function T$X(){}return T$c(T$X,"laya.html.utils.Layout"),T$X.later=function(T$n){null==T$X._will&&(T$X._will=[],T$E.stage.frameLoop(1,null,function(){if(!(T$X._will.length<1)){for(var T$n=0;T$n<T$X._will.length;T$n++)laya.html.utils.Layout.layout(T$X._will[T$n]);T$X._will.length=0;}})),T$X._will.push(T$n);},T$X.layout=function(T$n){if(!T$n||!T$n._style)return null;if(0==(512&T$n._style._type))return null;T$n.getStyle()._type&=-513;var T$C=T$X._multiLineLayout(T$n);return T$P.isConchApp&&T$n.layaoutCallNative&&T$n.layaoutCallNative(),T$C;},T$X._multiLineLayout=function(T$n){if(T$$.RightToLeft)return T$X._multiLineLayout2(T$n);var T$C=new Array();T$n._addChildsToLayout(T$C);var T$_,T$E,T$y,T$p,T$c,T$l=0,T$W=T$C.length,T$q=T$n._getCSSStyle(),T$J=T$q.letterSpacing,T$j=T$q.leading,T$P=T$q.lineHeight,T$x=T$q._widthAuto()||!T$q.wordWrap,T$b=T$x?999999:T$n.width,T$r=(T$n.height,0),T$m=T$q.italic?T$q.fontSize/3:0,T$d=T$q._getAlign(),T$a=T$q._getValign(),T$O=0!==T$a||0!==T$d||0!=T$P,T$A=0,T$k=0,T$t=0,T$T=0,T$Y=new Array(),T$s=T$Y[0]=new T$i(),T$N=!1,T$S=!1;T$s.h=0,T$q.italic&&(T$b-=T$q.fontSize/3);var T$M=0,T$w=!0;function T$B(){T$s.y=T$k,T$k+=T$s.h+T$j,0==T$s.h&&(T$k+=T$P),T$s.mWidth=T$M,T$M=0,T$s=new T$i(),T$Y.push(T$s),T$s.h=0,T$N=!(T$w=!(T$A=0));}for(T$l=0;T$l<T$W;T$l++)if(null!=(T$_=T$C[T$l])){if(T$w=!1,T$_ instanceof laya.html.dom.HTMLBrElement)T$B(),T$s.y=T$k;else{if(T$_._isChar()){if((T$p=T$_).isWord)T$N=T$S||"\n"===T$p.char,T$s.wordStartIndex=T$s.elements.length;else{if(T$t=T$p.width+T$p.style.letterSpacin,0<T$Y.length&&T$b<T$A+T$t&&0<T$s.wordStartIndex){var T$V;T$V=T$s.elements.length-T$s.wordStartIndex+1,T$s.elements.length=T$s.wordStartIndex,T$l-=T$V,T$B();continue;}T$N=!1,T$M+=T$p.width;}T$t=T$p.width+T$J,T$T=T$p.height,T$S=!1,(T$N=T$N||T$b<T$A+T$t)&&T$B(),T$s.minTextHeight=Math.min(T$s.minTextHeight,T$_.height);}else T$E=T$_._getCSSStyle(),T$c=T$_,T$y=T$E.padding,0===T$E._getCssFloat()||(T$O=!0),T$N=T$S||T$E.lineElement,T$t=T$c.width*T$c._style._tf.scaleX+T$y[1]+T$y[3]+T$J,T$T=T$c.height*T$c._style._tf.scaleY+T$y[0]+T$y[2],T$S=T$E.lineElement,(T$N=T$N||T$b<T$A+T$t&&T$E.wordWrap)&&T$B();T$s.elements.push(T$_),T$s.h=Math.max(T$s.h,T$T),T$_.x=T$A,T$_.y=T$k,T$A+=T$t,T$s.w=T$A-T$J,T$s.y=T$k,T$r=Math.max(T$A+T$m,T$r);}}else T$w||(T$A+=T$X.DIV_ELEMENT_PADDING),T$s.wordStartIndex=T$s.elements.length;if(T$k=T$s.y+T$s.h,T$O){var T$g=0,T$H=T$b;for(T$x&&0<T$n.width&&(T$H=T$n.width),T$l=0,T$W=T$Y.length;T$l<T$W;T$l++)T$Y[T$l].updatePos(0,T$H,T$l,T$g,T$d,T$a,T$P),T$g+=Math.max(T$P,T$Y[T$l].h+T$j);T$k=T$g;}return T$x&&(T$n.width=T$r),T$k>T$n.height&&(T$n.height=T$k),[T$r,T$k];},T$X._multiLineLayout2=function(T$n){var T$C=new Array();T$n._addChildsToLayout(T$C);var T$_,T$E,T$y,T$p,T$c,T$l=0,T$W=T$C.length,T$q=T$n._getCSSStyle(),T$J=T$q.letterSpacing,T$j=T$q.leading,T$P=T$q.lineHeight,T$x=T$q._widthAuto()||!T$q.wordWrap,T$b=T$x?999999:T$n.width,T$r=(T$n.height,0),T$m=T$q.italic?T$q.fontSize/3:0,T$d=2-T$q._getAlign(),T$a=T$q._getValign(),T$O=0!==T$a||0!=T$d||0!=T$P,T$A=0,T$k=0,T$t=0,T$T=0,T$Y=new Array(),T$s=T$Y[0]=new T$i(),T$N=!1,T$S=!1;T$s.h=0,T$q.italic&&(T$b-=T$q.fontSize/3);var T$M=0,T$w=!0;function T$B(){T$s.y=T$k,T$k+=T$s.h+T$j,0==T$s.h&&(T$k+=T$P),T$s.mWidth=T$M,T$M=0,T$s=new T$i(),T$Y.push(T$s),T$s.h=0,T$N=!(T$w=!(T$A=0));}for(T$l=0;T$l<T$W;T$l++)if(null!=(T$_=T$C[T$l])){if(T$w=!1,T$_ instanceof laya.html.dom.HTMLBrElement)T$B(),T$s.y=T$k;else{if(T$_._isChar()){if((T$p=T$_).isWord)T$N=T$S||"\n"===T$p.char,T$s.wordStartIndex=T$s.elements.length;else{if(0<T$Y.length&&T$b<T$A+T$t&&0<T$s.wordStartIndex){var T$V;T$V=T$s.elements.length-T$s.wordStartIndex+1,T$s.elements.length=T$s.wordStartIndex,T$l-=T$V,T$B();continue;}T$N=!1,T$M+=T$p.width;}T$t=T$p.width+T$J,T$T=T$p.height,T$S=!1,(T$N=T$N||T$b<T$A+T$t)&&T$B(),T$s.minTextHeight=Math.min(T$s.minTextHeight,T$_.height);}else T$E=T$_._getCSSStyle(),T$c=T$_,T$y=T$E.padding,0===T$E._getCssFloat()||(T$O=!0),T$N=T$S||T$E.lineElement,T$t=T$c.width*T$c._style._tf.scaleX+T$y[1]+T$y[3]+T$J,T$T=T$c.height*T$c._style._tf.scaleY+T$y[0]+T$y[2],T$S=T$E.lineElement,(T$N=T$N||T$b<T$A+T$t&&T$E.wordWrap)&&T$B();T$s.elements.push(T$_),T$s.h=Math.max(T$s.h,T$T),T$_.x=T$A,T$_.y=T$k,T$A+=T$t,T$s.w=T$A-T$J,T$s.y=T$k,T$r=Math.max(T$A+T$m,T$r);}}else T$w||(T$A+=T$X.DIV_ELEMENT_PADDING),T$s.wordStartIndex=T$s.elements.length;if(T$k=T$s.y+T$s.h,T$O){var T$g=0,T$H=T$b;for(T$l=0,T$W=T$Y.length;T$l<T$W;T$l++)T$Y[T$l].updatePos(0,T$H,T$l,T$g,T$d,T$a,T$P),T$g+=Math.max(T$P,T$Y[T$l].h+T$j);T$k=T$g;}for(T$x&&(T$n.width=T$r),T$k>T$n.height&&(T$n.height=T$k),T$l=0,T$W=T$Y.length;T$l<T$W;T$l++)T$Y[T$l].revertOrder(T$b);return[T$r,T$k];},T$X._will=null,T$X.DIV_ELEMENT_PADDING=0,T$X;}(),T$i=function(){function T$n(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array();}T$c(T$n,"laya.html.utils.LayoutLine");var T$C=T$n.prototype;return T$C.updatePos=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){var T$l,T$W=0;0<this.elements.length&&(T$W=(T$l=this.elements[this.elements.length-1]).x+T$l.width-this.elements[0].x);var T$q=0,T$J=NaN;1===T$y&&(T$q=(T$C-T$W)/2),2===T$y&&(T$q=T$C-T$W),0===T$c||0!=T$p||(T$p=1);for(var T$j=0,T$P=this.elements.length;T$j<T$P;T$j++){var T$x=(T$l=this.elements[T$j])._getCSSStyle();switch(0!==T$q&&(T$l.x+=T$q),T$x._getValign()){case 0:T$l.y=T$E;break;case 1:var T$b=0;99999!=this.minTextHeight&&(T$b=this.minTextHeight);var T$r=(T$b+T$c)/2;T$r=Math.max(T$r,this.h),T$J=(laya.html.dom.HTMLImageElement,T$E+T$r-T$l.height),T$l.y=T$J;break;case 2:T$l.y=T$E+(T$c-T$l.height);}}},T$C.revertOrder=function(T$n){var T$C;if(0<this.elements.length){var T$_,T$E=0;for(T$_=this.elements.length,T$E=0;T$E<T$_;T$E++)(T$C=this.elements[T$E]).x=T$n-T$C.x-T$C.width;}},T$n;}(),T$k=function(T$_){function T$C(){this.URI=null,this._href=null,T$C.__super.call(this),this._text=T$C._EMPTYTEXT,this.setStyle(new T$W(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0;}T$c(T$C,"laya.html.dom.HTMLElement",T$_);var T$n=T$C.prototype;return T$n.layaoutCallNative=function(){var T$n=0;if(this._childs&&0<(T$n=this._childs.length))for(var T$C=0;T$C<T$n;T$C++)this._childs[T$C].layaoutCallNative&&this._childs[T$C].layaoutCallNative();var T$_=this._getWords();T$_?laya.html.dom.HTMLElement.fillWords(this,T$_,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear();},T$n.appendChild=function(T$n){return this.addChild(T$n);},T$n._getWords2=function(){var T$n=this._text.text;if(!T$n||0===T$n.length)return null;var T$C,T$_,T$E=0,T$y=0;if(this._text.drawWords)T$_=this._text.drawWords;else{for(T$y=(T$C=T$n.split(" ")).length-1,T$_=[],T$E=0;T$E<T$y;T$E++)T$_.push(T$C[T$E]," ");0<=T$y&&T$_.push(T$C[T$y]),this._text.drawWords=T$_;}var T$p,T$c=this._text.words;if(T$c&&T$c.length===T$_.length)return T$c;null===T$c&&(this._text.words=T$c=[]),T$c.length=T$_.length;var T$l=this.style,T$W=T$l.font;for(T$E=0,T$y=T$_.length;T$E<T$y;T$E++){T$p=T$a.measureText(T$_[T$E],T$W);var T$q=T$c[T$E]=new T$j(T$_[T$E],T$p.width,T$p.height||T$l.fontSize,T$l);if(1<T$q.char.length&&(T$q.charNum=T$q.char),this.href){var T$J=new T$x();this.addChild(T$J),T$q.setSprite(T$J);}}return T$c;},T$n._getWords=function(){if(!T$$.CharacterCache)return this._getWords2();var T$n=this._text.text;if(!T$n||0===T$n.length)return null;var T$C,T$_=this._text.words;if(T$_&&T$_.length===T$n.length)return T$_;null===T$_&&(this._text.words=T$_=[]),T$_.length=T$n.length;for(var T$E=this.style,T$y=T$E.font,T$p=0,T$c=T$n.length;T$p<T$c;T$p++)if(T$C=T$a.measureText(T$n.charAt(T$p),T$y)){var T$l=T$_[T$p]=new T$j(T$n.charAt(T$p),T$C.width,T$C.height||T$E.fontSize,T$E);if(this.href){var T$W=new T$x();this.addChild(T$W),T$l.setSprite(T$W);}}else console.warn("_getWords size is null"+T$n.charAt(T$p),T$y);return T$_;},T$n.showLinkSprite=function(){var T$n=this._text.words;if(T$n)for(var T$C,T$_,T$E=[],T$y=0;T$y<T$n.length;T$y++)T$_=T$n[T$y],(T$C=new T$x()).graphics.drawRect(0,0,T$_.width,T$_.height,"#ff0000"),T$C.width=T$_.width,T$C.height=T$_.height,this.addChild(T$C),T$E.push(T$C);},T$n._layoutLater=function(){var T$n=this.style;512&T$n._type||(T$n.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&T$n.block?(T$A.later(this),T$n._type|=512):this.parent&&this.parent._layoutLater());},T$n._setAttributes=function(T$n,T$C){switch(T$n){case"style":return void this.style.cssText(T$C);case"class":return void(this.className=T$C);}T$_.prototype._setAttributes.call(this,T$n,T$C);},T$n.updateHref=function(){if(null!=this._href){var T$n=this._getWords();if(T$n)for(var T$C,T$_,T$E=0;T$E<T$n.length;T$E++)(T$_=(T$C=T$n[T$E]).getSprite())&&(T$_.size(T$C.width,T$C.height),T$_.on("click",this,this.onLinkHandler));}},T$n.onLinkHandler=function(T$n){switch(T$n.type){case"click":for(var T$C=this;T$C;)T$C.event("link",[this.href]),T$C=T$C.parent;}},T$n.formatURL=function(T$n){return this.URI?T$d.formatURL(T$n,this.URI?this.URI.path:null):T$n;},T$l(0,T$n,"href",function(){return this._href;},function(T$n){null!=(this._href=T$n)&&(this._getCSSStyle().underLine=1,this.updateHref());}),T$l(0,T$n,"color",null,function(T$n){this.style.color=T$n;}),T$l(0,T$n,"onClick",null,function(T$n){T$E._runScript("fn=function(event){"+T$n+";}"),this.on("click",this,void 0);}),T$l(0,T$n,"id",null,function(T$n){T$t.document.setElementById(T$n,this);}),T$l(0,T$n,"innerTEXT",function(){return this._text.text;},function(T$n){this.text=T$n;}),T$l(0,T$n,"style",function(){return this._style;}),T$l(0,T$n,"text",function(){return this._text.text;},function(T$n){this._text==T$C._EMPTYTEXT?this._text={text:T$n,words:null}:(this._text.text=T$n,this._text.words&&(this._text.words.length=0)),T$P.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref();}),T$l(0,T$n,"parent",T$_.prototype._$get_parent,function(T$n){if(T$n instanceof laya.html.dom.HTMLElement){var T$C=T$n;this.URI||(this.URI=T$C.URI),this.style.inherit(T$C.style);}T$E.superSet(T$x,this,"parent",T$n);}),T$l(0,T$n,"className",null,function(T$n){this.style.attrs(T$t.document.styleSheets["."+T$n]);}),T$C.fillWords=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){T$n.graphics.clear();for(var T$l=0,T$W=T$C.length;T$l<T$W;T$l++){var T$q=T$C[T$l];T$n.graphics.fillText(T$q.char,T$q.x+T$_,T$q.y+T$E,T$y,T$p,"left",T$c);}},T$C._EMPTYTEXT={text:null,words:null},T$C;}(T$x),T$C=(function(T$n){function T$C(){T$C.__super.call(this),this.style.lineElement=!0,this.style.block=!0;}T$c(T$C,"laya.html.dom.HTMLBrElement",T$k);}(),function(T$n){function T$C(){this.contextHeight=NaN,this.contextWidth=NaN,T$C.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200;}T$c(T$C,"laya.html.dom.HTMLDivElement",T$n);var T$_=T$C.prototype;return T$_.appendHTML=function(T$n){T$O.parse(this,T$n,this.URI),this.layout();},T$_._addChildsToLayout=function(T$C){var T$n=this._getWords();if(null==T$n&&0==this._childs.length)return!1;T$n&&T$n.forEach(function(T$n){T$C.push(T$n);});for(var T$_=!0,T$E=0,T$y=this._childs.length;T$E<T$y;T$E++){var T$p=this._childs[T$E];T$_?T$_=!1:T$C.push(null),T$p._addToLayout(T$C);}return!0;},T$_._addToLayout=function(T$n){this.layout();},T$_.layout=function(){if(this.style){this.style._type|=512;var T$n=T$A.layout(this);if(T$n){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new T$J());var T$C=this._$P.mHtmlBounds;T$C.x=T$C.y=0,T$C.width=this.contextWidth=T$n[0],T$C.height=this.contextHeight=T$n[1],this.setBounds(T$C);}}},T$l(0,T$_,"height",function(){return this._height?this._height:this.contextHeight;},T$n.prototype._$set_height),T$l(0,T$_,"innerHTML",null,function(T$n){this.destroyChildren(),this.appendHTML(T$n);}),T$l(0,T$_,"width",function(){return this._width?this._width:this.contextWidth;},function(T$n){var T$C=!1;T$C=0===T$n?T$n!=this._width:T$n!=this.width,T$E.superSet(T$k,this,"width",T$n),T$C&&this.layout();}),T$C;}(T$k)),T$t=function(T$n){function T$C(){this.all=new Array(),this.styleSheets=T$W.styleSheets,T$C.__super.call(this);}T$c(T$C,"laya.html.dom.HTMLDocument",T$k);var T$_=T$C.prototype;return T$_.getElementById=function(T$n){return this.all[T$n];},T$_.setElementById=function(T$n,T$C){this.all[T$n]=T$C;},T$y(T$C,["document",function(){return this.document=new T$C();}]),T$C;}();(function(T$n){function T$C(){this._tex=null,this._url=null,this._renderArgs=[],T$C.__super.call(this),this.style.block=!0;}T$c(T$C,"laya.html.dom.HTMLImageElement",T$k);var T$_=T$C.prototype;T$_._addToLayout=function(T$n){!this._style.absolute&&T$n.push(this);},T$_.render=function(T$n,T$C,T$_){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(T$r.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,T$n.ctx.drawTexture2(T$C,T$_,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs));},T$_.layaoutCallNative=function(){var T$n=0;if(this._childs&&0<(T$n=this._childs.length))for(var T$C=0;T$C<T$n;T$C++)this._childs[T$C].layaoutCallNative&&this._childs[T$C].layaoutCallNative();},T$l(0,T$_,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width;},function(T$n){this._width!==T$n&&(this._width=T$n,this._style.width=T$n,this.repaint());}),T$l(0,T$_,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height;},function(T$n){this._height!==T$n&&(this._height=T$n,this._style.height=T$n,this.repaint());}),T$_.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),T$q.clearCache(this,this._url),this._tex=null),T$k.prototype.destroy.call(this);},T$_.onloaded=function(){var T$n=this._style;T$n&&!T$n.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),T$n&&!T$n.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),T$P.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint();},T$_._loadImageComplete=function(T$n,T$C,T$_){if(!this._destroyed)if(null!=T$_){if(T$_ instanceof ArrayBuffer){var T$E=new DataView(T$_);new laya.webgl.resource.WebGLImage(new Uint8Array(T$_,8),T$n,0,!1,T$E.getUint32(0),T$E.getUint32(4));this.onloaded();}else if(T$_ instanceof T$m)T$q.imgMgrSet[T$n]=T$C,T$p.imgMgrLock(T$n,T$q.imgMgrSet[T$n]),this._url=T$n,this._tex=T$_,T$q.keepCache(this,T$n),T$q.cacheRes(T$n,this._tex),this.onloaded();else{var T$y=-1!=T$n.indexOf(".png",T$n.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(T$_,T$n,T$y,!1,T$_.width,T$_.height);this.onloaded();}}else this.event("error","Load image failed");},T$l(0,T$_,"src",null,function(T$n){(T$n=this.formatURL(T$n),this._url!=T$n)&&(null!=this._tex&&(T$q.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=T$n,(this._tex=T$q.getRes(T$n))?(T$q.keepCache(this,T$n),this.onloaded()):T$p.imgMgrLoad(T$n,this._loadImageComplete.bind(this),2,!1));});})(),function(T$n){function T$C(){this.type=null,T$C.__super.call(this),this.visible=!1;}T$c(T$C,"laya.html.dom.HTMLLinkElement",T$n);var T$_=T$C.prototype;T$_._onload=function(T$n){switch(this.type){case"text/css":T$W.parseCSS(T$n,this.URI);}},T$l(0,T$_,"href",T$n.prototype._$get_href,function(T$n){var T$C=this;T$n=this.formatURL(T$n),this.URI=new T$d(T$n);var T$_=new T$q();T$_.once("complete",null,function(T$n){T$C._onload(T$n);}),T$_.load(T$n,"text");}),T$C._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g");}(T$k),function(T$n){function T$C(){T$C.__super.call(this),this.visible=!1;}T$c(T$C,"laya.html.dom.HTMLStyleElement",T$n),T$l(0,T$C.prototype,"text",T$n.prototype._$get_text,function(T$n){T$W.parseCSS(T$n,null);});}(T$k),function(T$n){function T$C(){T$C.__super.call(this),this._getCSSStyle().valign="middle";}T$c(T$C,"laya.html.dom.HTMLIframeElement",T$n),T$l(0,T$C.prototype,"href",T$n.prototype._$get_href,function(T$_){var T$E=this;T$_=this.formatURL(T$_);var T$n=new T$q();T$n.once("complete",null,function(T$n){var T$C=T$E.URI;T$E.URI=new T$d(T$_),T$E.innerHTML=T$n,!T$C||(T$E.URI=T$C);}),T$n.load(T$_,"text");});}(T$C);}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$n,T$C){"use strict";for(var T$_ in Object.defineProperty(T$C,"__esModule",{value:!0}),Laya){var T$E=Laya[T$_];T$E&&T$E.__isclass&&(T$C[T$_]=T$E);}}),function(T$y,T$n,T$r){T$r.un,T$r.uns;var T$E=T$r.static,T$p=T$r.class,T$c=T$r.getset,T$_=(T$r.__newvec,laya.display.Animation),T$m=(laya.utils.Browser,laya.utils.ClassUtils),T$l=laya.filters.ColorFilter,T$W=laya.utils.Ease,T$q=laya.events.Event,T$J=(laya.events.EventDispatcher,laya.display.css.Font),T$j=laya.display.FrameAnimation,T$C=laya.display.Graphics,T$P=laya.utils.Handler,T$x=laya.display.Input,T$a=laya.net.Loader,T$b=(laya.display.Node,laya.maths.Point),T$d=laya.maths.Rectangle,T$O=laya.renders.Render,T$A=laya.display.Sprite,T$k=laya.display.Text,T$t=laya.resource.Texture,T$T=laya.utils.Tween,T$Y=laya.utils.Utils,T$s=laya.utils.WeakObject;T$r.interface("laya.ui.IItem"),T$r.interface("laya.ui.ISelect"),T$r.interface("laya.ui.IRender"),T$r.interface("laya.ui.IComponent"),T$r.interface("laya.ui.IBox","IComponent");var T$N=function(){function T$n(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN;}return T$p(T$n,"laya.ui.LayoutStyle"),T$E(T$n,["EMPTY",function(){return this.EMPTY=new T$n();}]),T$n;}(),T$S=function(){function T$n(){}return T$p(T$n,"laya.ui.Styles"),T$n.labelColor="#000000",T$n.buttonStateNum=3,T$n.scrollBarMinNum=15,T$n.scrollBarDelayTime=500,T$E(T$n,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0];},"labelPadding",function(){return this.labelPadding=[2,2,2,2];},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3];},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"];},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"];}]),T$n;}(),T$M=function(){function T$y(){}return T$p(T$y,"laya.ui.UIUtils"),T$y.fillArray=function(T$n,T$C,T$_){var T$E=T$n.concat();if(T$C)for(var T$y=T$C.split(","),T$p=0,T$c=Math.min(T$E.length,T$y.length);T$p<T$c;T$p++){var T$l=T$y[T$p];T$E[T$p]="true"==T$l||"false"!=T$l&&T$l,null!=T$_&&(T$E[T$p]=T$_(T$l));}return T$E;},T$y.toColor=function(T$n){return T$Y.toHexColor(T$n);},T$y.gray=function(T$n,T$C){void 0===T$C&&(T$C=!0),T$C?T$y.addFilter(T$n,T$y.grayFilter):T$y.clearFilter(T$n,T$l);},T$y.addFilter=function(T$n,T$C){var T$_=T$n.filters||[];T$_.push(T$C),T$n.filters=T$_;},T$y.clearFilter=function(T$n,T$C){var T$_=T$n.filters;if(null!=T$_&&0<T$_.length){for(var T$E=T$_.length-1;-1<T$E;T$E--){var T$y=T$_[T$E];T$r.__typeof(T$y,T$C)&&T$_.splice(T$E,1);}T$n.filters=T$_;}},T$y._getReplaceStr=function(T$n){return T$y.escapeSequence[T$n];},T$y.adptString=function(T$n){return T$n.replace(/\\(\w)/g,T$y._getReplaceStr);},T$y.getBindFun=function(T$n){var T$C=T$y._funMap.get(T$n);if(null==T$C){var T$_='"'+T$n+'"',T$E="(function(data){if(data==null)return;with(data){try{\nreturn "+(T$_=T$_.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";T$C=T$r._runScript(T$E),T$y._funMap.set(T$n,T$C);}return T$C;},T$E(T$y,["grayFilter",function(){return this.grayFilter=new T$l([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0]);},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"};},"_funMap",function(){return this._funMap=new T$s();}]),T$y;}(),T$w=function(){function T$n(){}return T$p(T$n,"UIConfig"),T$n.touchScrollEnable=!0,T$n.mouseWheelEnable=!0,T$n.showButtons=!0,T$n.popupBgColor="#000000",T$n.popupBgAlpha=.5,T$n.closeDialogOnSide=!0,T$n;}(),T$B=function(T$_){function T$d(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,T$d.__super.call(this),this._weakKeys=[];}T$p(T$d,"laya.ui.AutoBitmap",T$_);var T$n=T$d.prototype;return T$n.destroy=function(){if(T$a.clearObject(this,this._weakKey),this._weakKeys){for(var T$n=0,T$C=this._weakKeys.length;T$n<T$C;++T$n)T$a.clearObject(this,this._weakKeys[T$n]);this._weakKeys=null;}T$_.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null;},T$n._setChanged=function(){this._isChanged||(this._isChanged=!0,T$r.timer.callLater(this,this.changeSource));},T$n.changeSource=function(){this._isChanged=!1;var T$n=this._source;if(T$n&&T$n.bitmap){var T$C=this.width,T$_=this.height,T$E=this._sizeGrid,T$y=T$n.sourceWidth,T$p=T$n.sourceHeight;if(!T$E||T$y===T$C&&T$p===T$_)this.cleanByTexture(T$n,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,T$C,T$_);else{T$a.clearObject(this,this._weakKey),T$n.$_GID||(T$n.$_GID=T$Y.getGID());var T$c=T$n.$_GID+"."+T$C+"."+T$_+"."+T$E.join("."),T$l=T$a.findObject(T$c);if(T$Y.isOKCmdList(T$l))return this._weakKey=T$c,T$a.keepObject(this,this._weakKey),void(this.cmds=T$l);this.clear();var T$W,T$q,T$J=T$E[0],T$j=T$E[1],T$P=T$E[2],T$x=T$E[3],T$b=T$E[4],T$r=!1;if(T$C==T$y&&(T$x=T$j=0),T$_==T$p&&(T$J=T$P=0),T$C<T$x+T$j){var T$m=T$C;T$r=!0,T$C=T$x+T$j,this.save(),this.clipRect(0,0,T$m,T$_);}T$x&&T$J&&(T$W=T$d.getTexture(T$n,0,0,T$x,T$J),T$q=this._weakKeys[0],T$W?(T$q!=T$W.weakKey&&(T$a.clearObject(this,T$q),T$a.keepObject(this,T$W.weakKey),this._weakKeys[0]=T$W.weakKey),this.drawTexture(T$W,0,0,T$x,T$J)):(T$a.clearObject(this,T$q),this._weakKeys[0]="")),T$j&&T$J&&(T$W=T$d.getTexture(T$n,T$y-T$j,0,T$j,T$J),T$q=this._weakKeys[1],T$W?(T$q!=T$W.weakKey&&(T$a.clearObject(this,T$q),T$a.keepObject(this,T$W.weakKey),this._weakKeys[1]=T$W.weakKey),this.drawTexture(T$W,T$C-T$j,0,T$j,T$J)):(T$a.clearObject(this,T$q),this._weakKeys[1]="")),T$x&&T$P&&(T$W=T$d.getTexture(T$n,0,T$p-T$P,T$x,T$P),T$q=this._weakKeys[2],T$W?(T$q!=T$W.weakKey&&(T$a.clearObject(this,T$q),T$a.keepObject(this,T$W.weakKey),this._weakKeys[2]=T$W.weakKey),this.drawTexture(T$W,0,T$_-T$P,T$x,T$P)):(T$a.clearObject(this,T$q),this._weakKeys[2]="")),T$j&&T$P&&(T$W=T$d.getTexture(T$n,T$y-T$j,T$p-T$P,T$j,T$P),T$q=this._weakKeys[3],T$W?(T$q!=T$W.weakKey&&(T$a.clearObject(this,T$q),T$a.keepObject(this,T$W.weakKey),this._weakKeys[3]=T$W.weakKey),this.drawTexture(T$W,T$C-T$j,T$_-T$P,T$j,T$P)):(T$a.clearObject(this,T$q),this._weakKeys[3]="")),T$J&&(T$W=T$d.getTexture(T$n,T$x,0,T$y-T$x-T$j,T$J),T$q=this._weakKeys[4],T$W?(T$q!=T$W.weakKey&&(T$a.clearObject(this,T$q),T$a.keepObject(this,T$W.weakKey),this._weakKeys[4]=T$W.weakKey),this.drawBitmap(T$b,T$W,T$x,0,T$C-T$x-T$j,T$J)):(T$a.clearObject(this,T$q),this._weakKeys[4]="")),T$P&&(T$W=T$d.getTexture(T$n,T$x,T$p-T$P,T$y-T$x-T$j,T$P),T$q=this._weakKeys[5],T$W?(T$q!=T$W.weakKey&&(T$a.clearObject(this,T$q),T$a.keepObject(this,T$W.weakKey),this._weakKeys[5]=T$W.weakKey),this.drawBitmap(T$b,T$W,T$x,T$_-T$P,T$C-T$x-T$j,T$P)):(T$a.clearObject(this,T$q),this._weakKeys[5]="")),T$x&&(T$W=T$d.getTexture(T$n,0,T$J,T$x,T$p-T$J-T$P),T$q=this._weakKeys[6],T$W?(T$q!=T$W.weakKey&&(T$a.clearObject(this,T$q),T$a.keepObject(this,T$W.weakKey),this._weakKeys[6]=T$W.weakKey),this.drawBitmap(T$b,T$W,0,T$J,T$x,T$_-T$J-T$P)):(T$a.clearObject(this,T$q),this._weakKeys[6]="")),T$j&&(T$W=T$d.getTexture(T$n,T$y-T$j,T$J,T$j,T$p-T$J-T$P),T$q=this._weakKeys[7],T$W?(T$q!=T$W.weakKey&&(T$a.clearObject(this,T$q),T$a.keepObject(this,T$W.weakKey),this._weakKeys[7]=T$W.weakKey),this.drawBitmap(T$b,T$W,T$C-T$j,T$J,T$j,T$_-T$J-T$P)):(T$a.clearObject(this,T$q),this._weakKeys[7]="")),T$W=T$d.getTexture(T$n,T$x,T$J,T$y-T$x-T$j,T$p-T$J-T$P),T$q=this._weakKeys[8],T$W?(T$q!=T$W.weakKey&&(T$a.clearObject(this,T$q),T$a.keepObject(this,T$W.weakKey),this._weakKeys[8]=T$W.weakKey),this.drawBitmap(T$b,T$W,T$x,T$J,T$C-T$x-T$j,T$_-T$J-T$P)):(T$a.clearObject(this,T$q),this._weakKeys[8]=""),T$r&&this.restore(),this.autoCacheCmd&&!T$O.isConchApp&&(T$a.saveObject(T$c,this.cmds,null),this._weakKey=T$c,T$a.keepObject(this,this._weakKey));}this._repaint();}},T$n.drawBitmap=function(T$n,T$C,T$_,T$E,T$y,T$p){void 0===T$y&&(T$y=0),void 0===T$p&&(T$p=0),T$y<.1||T$p<.1||(!T$n||T$C.width==T$y&&T$C.height==T$p?this.drawTexture(T$C,T$_,T$E,T$y,T$p):this.fillTexture(T$C,T$_,T$E,T$y,T$p));},T$n.clear=function(T$n){void 0===T$n&&(T$n=!0),T$_.prototype.clear.call(this,!1);},T$c(0,T$n,"sizeGrid",function(){return this._sizeGrid;},function(T$n){this._sizeGrid=T$n,this._setChanged();}),T$c(0,T$n,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0;},function(T$n){this._width!=T$n&&(this._width=T$n,this._setChanged());}),T$c(0,T$n,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0;},function(T$n){this._height!=T$n&&(this._height=T$n,this._setChanged());}),T$c(0,T$n,"source",function(){return this._source;},function(T$n){T$n?(this._source=T$n,this._setChanged()):(this._source=null,this.clear());}),T$d.getTexture=function(T$n,T$C,T$_,T$E,T$y){T$E<=0&&(T$E=1),T$y<=0&&(T$y=1),T$n.$_GID||(T$n.$_GID=T$Y.getGID());var T$p=T$n.$_GID+"."+T$C+"."+T$_+"."+T$E+"."+T$y,T$c=T$a.findObject(T$p);if((!T$c||!T$c.source)&&(T$c=T$t.createFromTexture(T$n,T$C,T$_,T$E,T$y))){if(T$n.alphaTexture){var T$l=T$n.width/T$n.alphaTexture.width;T$c.alphaTexture=T$t.createFromTexture(T$n.alphaTexture,T$C/T$l,T$_/T$l,T$E/T$l,T$y/T$l);}T$a.saveObject(T$p,T$c),T$c.weakKey=T$p;}return T$c;},T$d;}(T$C),T$V=(function(T$n){function T$C(){T$C.__super.call(this);}T$p(T$C,"laya.ui.UIEvent",T$q),T$C.SHOW_TIP="showtip",T$C.HIDE_TIP="hidetip";}(),function(T$C){function T$n(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,T$n.__super.call(this),this._layout=T$N.EMPTY,this.preinitialize(),this.createChildren(),this.initialize();}T$p(T$n,"laya.ui.Component",T$C);var T$_=T$n.prototype;return T$r.imps(T$_,{"laya.ui.IComponent":!0}),T$_.destroy=function(T$n){void 0===T$n&&(T$n=!0),T$C.prototype.destroy.call(this,T$n),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null;},T$_.preinitialize=function(){},T$_.createChildren=function(){},T$_.initialize=function(){},T$_.callLater=function(T$n,T$C){T$r.timer.callLater(this,T$n,T$C);},T$_.runCallLater=function(T$n){T$r.timer.runCallLater(this,T$n);},T$_.commitMeasure=function(){},T$_.changeSize=function(){this.event("resize");},T$_.getLayout=function(){return this._layout===T$N.EMPTY&&(this._layout=new T$N()),this._layout;},T$_._setLayoutEnabled=function(T$n){this._layout&&this._layout.enable!=T$n&&(this._layout.enable=T$n,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded());},T$_.onRemoved=function(){this.parent.off("resize",this,this.onCompResize);},T$_.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY();},T$_.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY());},T$_.resetLayoutX=function(){var T$n=this._layout;if(isNaN(T$n.anchorX)||(this.pivotX=T$n.anchorX*this.width),this.layoutEnabled){var T$C=this.parent;T$C&&(isNaN(T$n.centerX)?isNaN(T$n.left)?isNaN(T$n.right)||(this.x=Math.round(T$C.width-this.displayWidth-T$n.right+this.pivotX*this.scaleX)):(this.x=Math.round(T$n.left+this.pivotX*this.scaleX),isNaN(T$n.right)||(this.width=(T$C._width-T$n.left-T$n.right)/(this.scaleX||.01))):this.x=Math.round(.5*(T$C.width-this.displayWidth)+T$n.centerX+this.pivotX*this.scaleX));}},T$_.resetLayoutY=function(){var T$n=this._layout;if(isNaN(T$n.anchorY)||(this.pivotY=T$n.anchorY*this.height),this.layoutEnabled){var T$C=this.parent;T$C&&(isNaN(T$n.centerY)?isNaN(T$n.top)?isNaN(T$n.bottom)||(this.y=Math.round(T$C.height-this.displayHeight-T$n.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(T$n.top+this.pivotY*this.scaleY),isNaN(T$n.bottom)||(this.height=(T$C._height-T$n.top-T$n.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(T$C.height-this.displayHeight)+T$n.centerY+this.pivotY*this.scaleY));}},T$_.onMouseOver=function(T$n){T$r.stage.event("showtip",this._toolTip);},T$_.onMouseOut=function(T$n){T$r.stage.event("hidetip",this._toolTip);},T$c(0,T$_,"displayWidth",function(){return this.width*this.scaleX;}),T$c(0,T$_,"width",function(){return this._width?this._width:this.measureWidth;},function(T$n){this._width!=T$n&&(this._width=T$n,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX());}),T$c(0,T$_,"measureWidth",function(){var T$n=0;this.commitMeasure();for(var T$C=this.numChildren-1;-1<T$C;T$C--){var T$_=this.getChildAt(T$C);T$_.visible&&(T$n=Math.max(T$_.x+T$_.width*T$_.scaleX,T$n));}return T$n;}),T$c(0,T$_,"displayHeight",function(){return this.height*this.scaleY;}),T$c(0,T$_,"height",function(){return this._height?this._height:this.measureHeight;},function(T$n){this._height!=T$n&&(this._height=T$n,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY());}),T$c(0,T$_,"dataSource",function(){return this._dataSource;},function(T$n){for(var T$C in this._dataSource=T$n,this._dataSource)this.hasOwnProperty(T$C)&&"function"!=typeof this[T$C]&&(this[T$C]=this._dataSource[T$C]);}),T$c(0,T$_,"scaleY",T$C.prototype._$get_scaleY,function(T$n){T$r.superGet(T$A,this,"scaleY")!=T$n&&(T$r.superSet(T$A,this,"scaleY",T$n),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY());}),T$c(0,T$_,"measureHeight",function(){var T$n=0;this.commitMeasure();for(var T$C=this.numChildren-1;-1<T$C;T$C--){var T$_=this.getChildAt(T$C);T$_.visible&&(T$n=Math.max(T$_.y+T$_.height*T$_.scaleY,T$n));}return T$n;}),T$c(0,T$_,"scaleX",T$C.prototype._$get_scaleX,function(T$n){T$r.superGet(T$A,this,"scaleX")!=T$n&&(T$r.superSet(T$A,this,"scaleX",T$n),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX());}),T$c(0,T$_,"top",function(){return this._layout.top;},function(T$n){T$n!=this._layout.top&&(this.getLayout().top=T$n,this._setLayoutEnabled(!0)),this.resetLayoutY();}),T$c(0,T$_,"bottom",function(){return this._layout.bottom;},function(T$n){T$n!=this._layout.bottom&&(this.getLayout().bottom=T$n,this._setLayoutEnabled(!0)),this.resetLayoutY();}),T$c(0,T$_,"left",function(){return this._layout.left;},function(T$n){T$n!=this._layout.left&&(this.getLayout().left=T$n,this._setLayoutEnabled(!0)),this.resetLayoutX();}),T$c(0,T$_,"right",function(){return this._layout.right;},function(T$n){T$n!=this._layout.right&&(this.getLayout().right=T$n,this._setLayoutEnabled(!0)),this.resetLayoutX();}),T$c(0,T$_,"centerX",function(){return this._layout.centerX;},function(T$n){T$n!=this._layout.centerX&&(this.getLayout().centerX=T$n,this._setLayoutEnabled(!0)),this.resetLayoutX();}),T$c(0,T$_,"centerY",function(){return this._layout.centerY;},function(T$n){T$n!=this._layout.centerY&&(this.getLayout().centerY=T$n,this._setLayoutEnabled(!0)),this.resetLayoutY();}),T$c(0,T$_,"anchorX",function(){return this._layout.anchorX;},function(T$n){T$n!=this._layout.anchorX&&(this.getLayout().anchorX=T$n,this._setLayoutEnabled(!0)),this.resetLayoutX();}),T$c(0,T$_,"anchorY",function(){return this._layout.anchorY;},function(T$n){T$n!=this._layout.anchorY&&(this.getLayout().anchorY=T$n,this._setLayoutEnabled(!0)),this.resetLayoutY();}),T$c(0,T$_,"tag",function(){return this._tag;},function(T$n){this._tag=T$n;}),T$c(0,T$_,"toolTip",function(){return this._toolTip;},function(T$n){this._toolTip!=T$n&&(null!=(this._toolTip=T$n)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)));}),T$c(0,T$_,"comXml",function(){return this._comXml;},function(T$n){this._comXml=T$n;}),T$c(0,T$_,"gray",function(){return this._gray;},function(T$n){T$n!==this._gray&&(this._gray=T$n,T$M.gray(this,T$n));}),T$c(0,T$_,"disabled",function(){return this._disabled;},function(T$n){T$n!==this._disabled&&(this.gray=this._disabled=T$n,this.mouseEnabled=!T$n);}),T$n;}(T$A)),T$g=function(T$n){function T$C(){this.lockLayer=null,this.popupEffect=function(T$n){T$n.scale(1,1),T$T.from(T$n,{x:T$r.stage.width/2,y:T$r.stage.height/2,scaleX:0,scaleY:0},300,T$W.backOut,T$P.create(this,this.doOpen,[T$n]));},this.closeEffect=function(T$n,T$C){T$T.to(T$n,{x:T$r.stage.width/2,y:T$r.stage.height/2,scaleX:0,scaleY:0},300,T$W.strongOut,T$P.create(this,this.doClose,[T$n,T$C]));},T$C.__super.call(this),this.maskLayer=new T$A(),this.popupEffectHandler=T$P.create(this,this.popupEffect,null,!1),this.closeEffectHandler=T$P.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,T$r.stage.addChild(this),T$r.stage.on("resize",this,this._onResize),T$w.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null);}T$p(T$C,"laya.ui.DialogManager",T$A);var T$_=T$C.prototype;return T$_._closeOnSide=function(){var T$n=this.getChildAt(this.numChildren-1);T$n instanceof laya.ui.Dialog&&T$n.close("side");},T$_.setLockView=function(T$n){this.lockLayer||(this.lockLayer=new T$H(),this.lockLayer.mouseEnabled=!0,this.lockLayer.size(T$r.stage.width,T$r.stage.height)),this.lockLayer.removeChildren(),T$n&&(T$n.centerX=T$n.centerY=0,this.lockLayer.addChild(T$n));},T$_._onResize=function(T$n){var T$C=this.maskLayer.width=T$r.stage.width,T$_=this.maskLayer.height=T$r.stage.height;this.lockLayer&&this.lockLayer.size(T$C,T$_),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,T$C,T$_,T$w.popupBgColor),this.maskLayer.alpha=T$w.popupBgAlpha;for(var T$E=this.numChildren-1;-1<T$E;T$E--){var T$y=this.getChildAt(T$E);T$y.popupCenter&&this._centerDialog(T$y);}},T$_._centerDialog=function(T$n){T$n.x=Math.round((T$r.stage.width-T$n.width>>1)+T$n.pivotX),T$n.y=Math.round((T$r.stage.height-T$n.height>>1)+T$n.pivotY);},T$_.open=function(T$n,T$C,T$_){void 0===T$C&&(T$C=!1),void 0===T$_&&(T$_=!1),T$C&&this._closeAll(),T$n.popupCenter&&this._centerDialog(T$n),this.addChild(T$n),(T$n.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),T$_&&null!=T$n.popupEffect?T$n.popupEffect.runWith(T$n):this.doOpen(T$n),this.event("open");},T$_.doOpen=function(T$n){T$n.onOpened();},T$_.lock=function(T$n){this.lockLayer&&(T$n?this.addChild(this.lockLayer):this.lockLayer.removeSelf());},T$_.close=function(T$n,T$C,T$_){void 0===T$_&&(T$_=!1),T$_&&null!=T$n.closeEffect?T$n.closeEffect.runWith([T$n,T$C]):this.doClose(T$n,T$C),this.event("close");},T$_.doClose=function(T$n,T$C){T$n.removeSelf(),T$n.isModal&&this._checkMask(),T$n.closeHandler&&T$n.closeHandler.runWith(T$C),T$n.onClosed(T$C);},T$_.closeAll=function(){this._closeAll(),this.event("close");},T$_._closeAll=function(){for(var T$n=this.numChildren-1;-1<T$n;T$n--){var T$C=this.getChildAt(T$n);T$C&&null!=T$C.close&&this.doClose(T$C);}},T$_.getDialogsByGroup=function(T$n){for(var T$C=[],T$_=this.numChildren-1;-1<T$_;T$_--){var T$E=this.getChildAt(T$_);T$E&&T$E.group===T$n&&T$C.push(T$E);}return T$C;},T$_.closeByGroup=function(T$n){for(var T$C=[],T$_=this.numChildren-1;-1<T$_;T$_--){var T$E=this.getChildAt(T$_);T$E&&T$E.group===T$n&&(T$E.close(),T$C.push(T$E));}return T$C;},T$_._checkMask=function(){this.maskLayer.removeSelf();for(var T$n=this.numChildren-1;-1<T$n;T$n--){var T$C=this.getChildAt(T$n);if(T$C&&T$C.isModal)return void this.addChildAt(this.maskLayer,T$n);}},T$C;}(),T$H=function(T$n){function T$C(){T$C.__super.call(this);}T$p(T$C,"laya.ui.Box",T$n);var T$_=T$C.prototype;return T$r.imps(T$_,{"laya.ui.IBox":!0}),T$c(0,T$_,"dataSource",T$n.prototype._$get_dataSource,function(T$n){for(var T$C in this._dataSource=T$n){var T$_=this.getChildByName(T$C);T$_?T$_.dataSource=T$n[T$C]:this.hasOwnProperty(T$C)&&"function"!=typeof this[T$C]&&(this[T$C]=T$n[T$C]);}}),T$C;}(T$V),T$X=function(T$C){function T$_(T$n,T$C){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,T$_.__super.call(this),this._labelColors=T$S.buttonLabelColors,this._stateNum=T$S.buttonStateNum,void 0===T$C&&(T$C=""),this.skin=T$n,this.label=T$C;}T$p(T$_,"laya.ui.Button",T$C);var T$n=T$_.prototype;return T$r.imps(T$n,{"laya.ui.ISelect":!0}),T$n.destroy=function(T$n){this.clearEvent(),T$a.clearCache(this,this._skin),T$a.clearObject(this,this._weakKey),void 0===T$n&&(T$n=!0),T$C.prototype.destroy.call(this,T$n),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(T$n),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null;},T$n.clearEvent=function(){this._skin&&T$y.atalsNotify&&T$y.atalsNotify.off(this._skin,this,this._setBtnSource);},T$n.createChildren=function(){this.graphics=this._bitmap=new T$B();},T$n.createText=function(){this._text||(this._text=new T$k(),this._text.overflow=T$k.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height);},T$n.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1);},T$n.onMouse=function(T$n){if(!1!==this.toggle||!this._selected)return"click"===T$n.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=T$_.stateMap[T$n.type]));},T$n.changeClips=function(){var T$n=T$a.getRes(this._skin);if(T$n)if(this._skin&&""!=this._skin){T$a.clearObject(this,this._weakKey);var T$C=T$n.sourceWidth,T$_=T$n.sourceHeight/this._stateNum;T$n.$_GID||(T$n.$_GID=T$Y.getGID());var T$E=T$n.$_GID+"-"+this._stateNum,T$y=T$a.findObject(T$E);if(T$Y.isOkTextureList(T$y)||(T$y=null),T$y)this._weakKey=T$E,T$a.keepObject(this,this._weakKey),this._sources=T$y;else{if(this._sources=[],1===this._stateNum)this._sources.push(T$n);else for(var T$p=0;T$p<this._stateNum;T$p++){var T$c=T$t.createFromTexture(T$n,0,T$_*T$p,T$C,T$_);if(T$n.alphaTexture){var T$l=T$n.width/T$n.alphaTexture.width;T$c.alphaTexture=T$t.createFromTexture(T$n.alphaTexture,0/T$l,T$_*T$p/T$l,T$C/T$l,T$_/T$l);}this._sources.push(T$c);}T$a.saveObject(T$E,this._sources),this._weakKey=T$E,T$a.keepObject(this,this._weakKey);}this._autoSize?(this._bitmap.width=this._width||T$C,this._bitmap.height=this._height||T$_,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=T$C);}else console.warn("lose skin ",this._skin,this.name,this.__className);},T$n.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var T$n=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[T$n]),this.label&&(this._text.color=this._labelColors[T$n],this._strokeColors&&(this._text.strokeColor=this._strokeColors[T$n]));},T$n._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState));},T$c(0,T$n,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor;},function(T$n){this.createText(),this._text.strokeColor=T$n;}),T$c(0,T$n,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height;}),T$c(0,T$n,"skin",function(){return this._skin;},function(T$n){if(this._skin!=T$n)if(this.clearEvent(),T$a.clearCache(this,this._skin),this._skin=T$n,T$a.keepCache(this,this._skin),T$a.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var T$C=T$y.resAtalsObj&&T$y.resAtalsObj[this._skin];T$C?(T$y.atalsNotify&&T$y.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=T$C.sourceW),0==this.height&&(this.height=T$C.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className);}}),T$n._setBtnSource=function(T$n,T$C){T$n===this._skin&&T$C&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent());},T$c(0,T$n,"state",function(){return this._state;},function(T$n){this._state!=T$n&&(this._state=T$n,this._setStateChanged());}),T$c(0,T$n,"text",function(){return this.createText(),this._text;}),T$c(0,T$n,"stateNum",function(){return this._stateNum;},function(T$n){"string"==typeof T$n&&(T$n=parseInt(T$n)),this._stateNum!=T$n&&(this._stateNum=T$n<1?1:3<T$n?3:T$n,this.callLater(this.changeClips));}),T$c(0,T$n,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):"";},function(T$n){this._strokeColors=T$M.fillArray(T$S.buttonLabelColors,T$n,String),this._setStateChanged();}),T$c(0,T$n,"labelColors",function(){return this._labelColors.join(",");},function(T$n){this._labelColors=T$M.fillArray(T$S.buttonLabelColors,T$n,String),this._setStateChanged();}),T$c(0,T$n,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0));}),T$c(0,T$n,"label",function(){return this._text?this._text.text:null;},function(T$n){(this._text||T$n)&&(this.createText(),this._text.text!=T$n&&(T$n&&!this._text.parent&&this.addChild(this._text),this._text.text=(T$n+"").replace(/\\n/g,"\n"),this._setStateChanged()));}),T$c(0,T$n,"selected",function(){return this._selected;},function(T$n){this._selected!=T$n&&(this._selected=T$n,this.state=this._selected?2:0,this.event("change"));}),T$c(0,T$n,"labelPadding",function(){return this.createText(),this._text.padding.join(",");},function(T$n){this.createText(),this._text.padding=T$M.fillArray(T$S.labelPadding,T$n,Number);}),T$c(0,T$n,"labelSize",function(){return this.createText(),this._text.fontSize;},function(T$n){this.createText(),this._text.fontSize=T$n;}),T$c(0,T$n,"labelStroke",function(){return this.createText(),this._text.stroke;},function(T$n){this.createText(),this._text.stroke=T$n;}),T$c(0,T$n,"labelBold",function(){return this.createText(),this._text.bold;},function(T$n){this.createText(),this._text.bold=T$n;}),T$c(0,T$n,"labelFont",function(){return this.createText(),this._text.font;},function(T$n){this.createText(),this._text.font=T$n;}),T$c(0,T$n,"labelAlign",function(){return this.createText(),this._text.align;},function(T$n){this.createText(),this._text.align=T$n;}),T$c(0,T$n,"clickHandler",function(){return this._clickHandler;},function(T$n){this._clickHandler=T$n;}),T$c(0,T$n,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null;},function(T$n){this._bitmap.sizeGrid=T$M.fillArray(T$S.defaultSizeGrid,T$n,Number);}),T$c(0,T$n,"width",T$C.prototype._$get_width,function(T$n){T$r.superSet(T$V,this,"width",T$n),this._autoSize&&(this._bitmap.width=T$n,this._text&&(this._text.width=T$n));}),T$c(0,T$n,"height",T$C.prototype._$get_height,function(T$n){T$r.superSet(T$V,this,"height",T$n),this._autoSize&&(this._bitmap.height=T$n,this._text&&(this._text.height=T$n));}),T$c(0,T$n,"dataSource",T$C.prototype._$get_dataSource,function(T$n){"number"==typeof(this._dataSource=T$n)||"string"==typeof T$n?this.label=T$n+"":T$r.superSet(T$V,this,"dataSource",T$n);}),T$c(0,T$n,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null;},function(T$n){this._bitmap._offset=T$n?T$M.fillArray([1,1],T$n,Number):[];}),T$E(T$_,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0};}]),T$_;}(T$V),T$$=function(T$C){function T$E(T$n,T$C,T$_){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,T$E.__super.call(this),void 0===T$C&&(T$C=1),void 0===T$_&&(T$_=1),this._clipX=T$C,this._clipY=T$_,this.skin=T$n;}T$p(T$E,"laya.ui.Clip",T$C);var T$n=T$E.prototype;return T$n.destroy=function(T$n){this.clearEvent(),this.clearLoad(),T$a.clearCache(this,this._skin),T$a.clearObject(this,this._weakKey),void 0===T$n&&(T$n=!0),T$C.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null;},T$n.dispose=function(){this.destroy(!0),T$r.loader.clearRes(this._skin);},T$n.createChildren=function(){this.graphics=this._bitmap=new T$B();},T$n._onDisplay=function(T$n){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play();},T$n.changeClip=function(){if(this._clipChanged=!1,this._skin){var T$n=T$a.getRes(this._skin);if(T$n)this.loadComplete(this._skin,T$n);else{if(T$y.resAtalsObj&&T$y.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=T$P.create(this,this.loadComplete,[this._skin]),this._progress=null,T$r.loader.load(this._skin,this._complete,this._progress);}}},T$n.loadComplete=function(T$n,T$C){if(T$n===this._skin&&T$C){T$a.clearObject(this,this._weakKey);var T$_=this._clipWidth||Math.ceil(T$C.sourceWidth/this._clipX),T$E=this._clipHeight||Math.ceil(T$C.sourceHeight/this._clipY),T$y=this._skin+T$_+T$E,T$p=T$a.findObject(T$y);if(T$Y.isOkTextureList(T$p)||(T$p=null),T$p)this._weakKey=T$y,T$a.keepObject(this,this._weakKey),this._sources=T$p;else{this._sources=[];for(var T$c=0;T$c<this._clipY;T$c++)for(var T$l=0;T$l<this._clipX;T$l++){var T$W=T$t.createFromTexture(T$C,T$_*T$l,T$E*T$c,T$_,T$E);if(T$C.alphaTexture){var T$q=T$C.width/T$C.alphaTexture.width;T$W.alphaTexture=T$t.createFromTexture(T$C.alphaTexture,T$_*T$l/T$q,T$E*T$c/T$q,T$_/T$q,T$E/T$q);}this._sources.push(T$W);}T$a.saveObject(T$y,this._sources),this._weakKey=T$y,T$a.keepObject(this,this._weakKey);}this.index=this._index,this.event("loaded"),this.onCompResize();}},T$n.play=function(T$n,T$C){void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=-1),this._isPlaying=!0,this.index=T$n,this._toIndex=T$C,this._index++,T$r.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay);},T$n._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index);},T$n.stop=function(){this._isPlaying=!1,T$r.timer.clear(this,this._loop),this.event("complete");},T$n._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip));},T$c(0,T$n,"interval",function(){return this._interval;},function(T$n){this._interval!=T$n&&(this._interval=T$n,this._isPlaying&&this.play());}),T$n.clearEvent=function(){this._skin&&T$y.atalsNotify&&T$y.atalsNotify.off(this._skin,this,this._setBtnSource);},T$n.clearLoad=function(){this._skin&&((this._complete||this._progress)&&T$r.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null);},T$c(0,T$n,"skin",function(){return this._skin;},function(T$n){if(this._skin!=T$n)if(this.clearLoad(),this.clearEvent(),T$a.clearCache(this,this._skin),this._skin=T$n){T$a.keepCache(this,this._skin);var T$C=T$a.getRes(T$n),T$_=T$y.resAtalsObj&&T$y.resAtalsObj[this._skin];!T$C&&T$_?T$y.atalsNotify&&T$y.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged();}else this._bitmap.source=null;}),T$n._setBtnSource=function(T$n,T$C){T$n===this._skin&&T$C&&(this.loadComplete(T$n,T$C),this.clearEvent());},T$c(0,T$n,"sources",function(){return this._sources;},function(T$n){this._sources=T$n,this.index=this._index,this.event("loaded");}),T$c(0,T$n,"clipX",function(){return this._clipX;},function(T$n){this._clipX=T$n||1,this._setClipChanged();}),T$c(0,T$n,"clipY",function(){return this._clipY;},function(T$n){this._clipY=T$n||1,this._setClipChanged();}),T$c(0,T$n,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0;}),T$c(0,T$n,"clipWidth",function(){return this._clipWidth;},function(T$n){this._clipWidth=T$n,this._setClipChanged();}),T$c(0,T$n,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null;},function(T$n){this._bitmap.sizeGrid=T$M.fillArray(T$S.defaultSizeGrid,T$n,Number);}),T$c(0,T$n,"group",function(){return this._group;},function(T$n){T$n&&this._skin&&T$a.setGroup(this._skin,T$n),this._group=T$n;}),T$c(0,T$n,"clipHeight",function(){return this._clipHeight;},function(T$n){this._clipHeight=T$n,this._setClipChanged();}),T$c(0,T$n,"width",T$C.prototype._$get_width,function(T$n){T$r.superSet(T$V,this,"width",T$n),this._bitmap.width=T$n;}),T$c(0,T$n,"height",T$C.prototype._$get_height,function(T$n){T$r.superSet(T$V,this,"height",T$n),this._bitmap.height=T$n;}),T$c(0,T$n,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width;}),T$c(0,T$n,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height;}),T$c(0,T$n,"index",function(){return this._index;},function(T$n){this._index=T$n,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[T$n]),this.event("change");}),T$c(0,T$n,"autoPlay",function(){return this._autoPlay;},function(T$n){this._autoPlay!=T$n&&((this._autoPlay=T$n)?this.play():this.stop());}),T$c(0,T$n,"isPlaying",function(){return this._isPlaying;},function(T$n){this._isPlaying=T$n;}),T$c(0,T$n,"dataSource",T$C.prototype._$get_dataSource,function(T$n){"number"==typeof(this._dataSource=T$n)&&Math.floor(T$n)==T$n||"string"==typeof T$n?this.index=parseInt(T$n):T$r.superSet(T$V,this,"dataSource",T$n);}),T$c(0,T$n,"bitmap",function(){return this._bitmap;}),T$E;}(T$V),T$i=function(T$C){function T$n(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,T$n.__super.call(this);}T$p(T$n,"laya.ui.ColorPicker",T$C);var T$_=T$n.prototype;return T$_.destroy=function(T$n){void 0===T$n&&(T$n=!0),T$C.prototype.destroy.call(this,T$n),this._colorPanel&&this._colorPanel.destroy(T$n),this._colorButton&&this._colorButton.destroy(T$n),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null;},T$_.createChildren=function(){this.addChild(this._colorButton=new T$X()),this._colorPanel=new T$H(),this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new T$A()),this._colorPanel.addChild(this._colorBlock=new T$A()),this._colorPanel.addChild(this._colorInput=new T$x());},T$_.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor;},T$_.onPanelMouseDown=function(T$n){T$n.stopPropagation();},T$_.changePanel=function(){this._panelChanged=!1;var T$n=this._colorPanel.graphics;T$n.clear(),T$n.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(T$n=this._colorTiles.graphics).clear();for(var T$C=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],T$_=0;T$_<12;T$_++)for(var T$E=0;T$E<20;T$E++){var T$y=0;T$y=0===T$E?T$C[T$_]:1===T$E?0:51*(((3*T$_+T$E/6)%3<<0)+3*(T$_/6<<0))<<16|T$E%6*51<<8|(T$_<<0)%6*51;var T$p=T$M.toColor(T$y);this._colors.push(T$p);var T$c=T$E*this._gridSize,T$l=T$_*this._gridSize;T$n.drawRect(T$c,T$l,this._gridSize,this._gridSize,T$p,"#000000");}},T$_.onColorButtonClick=function(T$n){this._colorPanel.parent?this.close():this.open();},T$_.open=function(){var T$n=this.localToGlobal(new T$b()),T$C=T$n.x+this._colorPanel.width<=T$r.stage.width?T$n.x:T$r.stage.width-this._colorPanel.width,T$_=T$n.y+this._colorButton.height;T$_=T$_+this._colorPanel.height<=T$r.stage.height?T$_:T$n.y-this._colorPanel.height,this._colorPanel.pos(T$C,T$_),this._colorPanel.zOrder=1001,T$r._currentStage.addChild(this._colorPanel),T$r.stage.on("mousedown",this,this.removeColorBox);},T$_.close=function(){T$r.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf();},T$_.removeColorBox=function(T$n){this.close();},T$_.onColorFieldKeyDown=function(T$n){13==T$n.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),T$n.stopPropagation());},T$_.onColorInputChange=function(T$n){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF");},T$_.onColorTilesClick=function(T$n){this.selectedColor=this.getColorByMouse(),this.close();},T$_.onColorTilesMouseMove=function(T$n){this._colorInput.focus=!1;var T$C=this.getColorByMouse();this._colorInput.text=T$C,this.drawBlock(T$C);},T$_.getColorByMouse=function(){var T$n=this._colorTiles.getMousePoint(),T$C=Math.floor(T$n.x/this._gridSize),T$_=Math.floor(T$n.y/this._gridSize);return this._colors[20*T$_+T$C];},T$_.drawBlock=function(T$n){var T$C=this._colorBlock.graphics;T$C.clear();var T$_=T$n||"#ffffff";T$C.drawRect(0,0,50,20,T$_,this._borderColor),T$n||T$C.drawLine(0,0,50,20,"#ff0000");},T$_.changeColor=function(){var T$n=this.graphics;T$n.clear();var T$C=this._selectedColor||"#000000";T$n.drawRect(0,0,this._colorButton.width,this._colorButton.height,T$C);},T$_._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel));},T$c(0,T$_,"inputBgColor",function(){return this._inputBgColor;},function(T$n){this._inputBgColor=T$n,this._setPanelChanged();}),T$c(0,T$_,"selectedColor",function(){return this._selectedColor;},function(T$n){this._selectedColor!=T$n&&(this._selectedColor=this._colorInput.text=T$n,this.drawBlock(T$n),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",T$q.EMPTY.setTo("change",this,this)));}),T$c(0,T$_,"skin",function(){return this._colorButton.skin;},function(T$n){this._colorButton.skin=T$n,this.changeColor();}),T$c(0,T$_,"bgColor",function(){return this._bgColor;},function(T$n){this._bgColor=T$n,this._setPanelChanged();}),T$c(0,T$_,"borderColor",function(){return this._borderColor;},function(T$n){this._borderColor=T$n,this._setPanelChanged();}),T$c(0,T$_,"inputColor",function(){return this._inputColor;},function(T$n){this._inputColor=T$n,this._setPanelChanged();}),T$n;}(T$V),T$f=function(T$C){function T$_(T$n,T$C){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,T$_.__super.call(this),this._itemColors=T$S.comboBoxItemColors,this.skin=T$n,this.labels=T$C;}T$p(T$_,"laya.ui.ComboBox",T$C);var T$n=T$_.prototype;return T$n.destroy=function(T$n){void 0===T$n&&(T$n=!0),T$C.prototype.destroy.call(this,T$n),this._button&&this._button.destroy(T$n),this._list&&this._list.destroy(T$n),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null;},T$n.createChildren=function(){this.addChild(this._button=new T$X()),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown);},T$n._createList=function(){this._list=new T$h(),this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list);},T$n._setListEvent=function(T$n){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=T$P.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown);},T$n.onListDown=function(T$n){T$n.stopPropagation();},T$n.onScrollBarDown=function(T$n){T$n.stopPropagation();},T$n.onButtonMouseDown=function(T$n){this.callLater(this.switchTo,[!this._isOpen]);},T$n.changeList=function(){this._listChanged=!1;var T$n=this.width-2,T$C=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:T$n,height:this._itemHeight,fontSize:this._itemSize,color:T$C}}]},this._list.repeatY=this._visibleNum,this._list.refresh();},T$n.onlistItemMouse=function(T$n,T$C){var T$_=T$n.type;if("mouseover"===T$_||"mouseout"===T$_){if(this._isCustomList)return;var T$E=this._list.getCell(T$C);if(!T$E)return;var T$y=T$E.getChildByName("label");T$y&&("mouseover"===T$_?(T$y.bgColor=this._itemColors[0],T$y.color=this._itemColors[1]):(T$y.bgColor=null,T$y.color=this._itemColors[2]));}else"click"===T$_&&(this.selectedIndex=T$C,this.isOpen=!1);},T$n.switchTo=function(T$n){this.isOpen=T$n;},T$n.changeOpen=function(){this.isOpen=!this._isOpen;},T$n.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var T$n=this._list.graphics;T$n.clear(),T$n.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3]);}for(var T$C=this._list.array||[],T$_=T$C.length=0,T$E=this._labels.length;T$_<T$E;T$_++)T$C.push({label:this._labels[T$_]});this._list.height=this._listHeight,this._list.array=T$C;},T$n.changeSelected=function(){this._button.label=this.selectedLabel;},T$n._onStageMouseWheel=function(T$n){this._list&&!this._list.contains(T$n.target)&&this.removeList(null);},T$n.removeList=function(T$n){T$r.stage.off("mousedown",this,this.removeList),T$r.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1;},T$c(0,T$n,"selectedIndex",function(){return this._selectedIndex;},function(T$n){this._selectedIndex!=T$n&&(this._selectedIndex=T$n,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[T$q.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex));}),T$c(0,T$n,"measureHeight",function(){return this._button.height;}),T$c(0,T$n,"skin",function(){return this._button.skin;},function(T$n){this._button.skin!=T$n&&(this._button.skin=T$n,this._listChanged=!0);}),T$c(0,T$n,"measureWidth",function(){return this._button.width;}),T$c(0,T$n,"width",T$C.prototype._$get_width,function(T$n){T$r.superSet(T$V,this,"width",T$n),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0;}),T$c(0,T$n,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null;},function(T$n){this.selectedIndex=this._labels.indexOf(T$n);}),T$c(0,T$n,"labels",function(){return this._labels.join(",");},function(T$n){0<this._labels.length&&(this.selectedIndex=-1),T$n?this._labels=T$n.split(","):this._labels.length=0,this._itemChanged=!0;}),T$c(0,T$n,"height",T$C.prototype._$get_height,function(T$n){T$r.superSet(T$V,this,"height",T$n),this._button.height=this._height;}),T$c(0,T$n,"selectHandler",function(){return this._selectHandler;},function(T$n){this._selectHandler=T$n;}),T$c(0,T$n,"visibleNum",function(){return this._visibleNum;},function(T$n){this._visibleNum=T$n,this._listChanged=!0;}),T$c(0,T$n,"labelBold",function(){return this._button.text.bold;},function(T$n){this._button.text.bold=T$n;}),T$c(0,T$n,"itemColors",function(){return String(this._itemColors);},function(T$n){this._itemColors=T$M.fillArray(this._itemColors,T$n,String),this._listChanged=!0;}),T$c(0,T$n,"itemSize",function(){return this._itemSize;},function(T$n){this._itemSize=T$n,this._listChanged=!0;}),T$c(0,T$n,"scrollBar",function(){return this.list.scrollBar;}),T$c(0,T$n,"isOpen",function(){return this._isOpen;},function(T$n){if(this._isOpen!=T$n)if(this._isOpen=T$n,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var T$C=this.localToGlobal(T$b.TEMP.setTo(0,0)),T$_=T$C.y+this._button.height;T$_=T$_+this._listHeight<=T$r.stage.height?T$_:T$C.y-this._listHeight,this._list.pos(T$C.x,T$_),this._list.zOrder=1001,T$r._currentStage.addChild(this._list),T$r.stage.once("mousedown",this,this.removeList),T$r.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex;}else this._list&&this._list.removeSelf();}),T$c(0,T$n,"scrollBarSkin",function(){return this._scrollBarSkin;},function(T$n){this._scrollBarSkin=T$n;}),T$c(0,T$n,"sizeGrid",function(){return this._button.sizeGrid;},function(T$n){this._button.sizeGrid=T$n;}),T$c(0,T$n,"button",function(){return this._button;}),T$c(0,T$n,"list",function(){return this._list||this._createList(),this._list;},function(T$n){T$n&&(T$n.removeSelf(),this._isCustomList=!0,this._list=T$n,this._setListEvent(T$n),this._itemHeight=T$n.getCell(0).height+T$n.spaceY);}),T$c(0,T$n,"dataSource",T$C.prototype._$get_dataSource,function(T$n){"number"==typeof(this._dataSource=T$n)&&Math.floor(T$n)==T$n||"string"==typeof T$n?this.selectedIndex=parseInt(T$n):T$n instanceof Array?this.labels=T$n.join(","):T$r.superSet(T$V,this,"dataSource",T$n);}),T$c(0,T$n,"labelColors",function(){return this._button.labelColors;},function(T$n){this._button.labelColors!=T$n&&(this._button.labelColors=T$n);}),T$c(0,T$n,"labelPadding",function(){return this._button.text.padding.join(",");},function(T$n){this._button.text.padding=T$M.fillArray(T$S.labelPadding,T$n,Number);}),T$c(0,T$n,"labelSize",function(){return this._button.text.fontSize;},function(T$n){this._button.text.fontSize=T$n;}),T$c(0,T$n,"labelFont",function(){return this._button.text.font;},function(T$n){this._button.text.font=T$n;}),T$c(0,T$n,"stateNum",function(){return this._button.stateNum;},function(T$n){this._button.stateNum=T$n;}),T$_;}(T$V),T$e=function(T$C){function T$_(T$n){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,T$_.__super.call(this),this._showButtons=T$w.showButtons,this._touchScrollEnable=T$w.touchScrollEnable,this._mouseWheelEnable=T$w.mouseWheelEnable,this.skin=T$n,this.max=1;}T$p(T$_,"laya.ui.ScrollBar",T$C);var T$n=T$_.prototype;return T$n.destroy=function(T$n){void 0===T$n&&(T$n=!0),this.stopScroll(),this.target=null,T$C.prototype.destroy.call(this,T$n),this.upButton&&this.upButton.destroy(T$n),this.downButton&&this.downButton.destroy(T$n),this.slider&&this.slider.destroy(T$n),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null;},T$n.createChildren=function(){this.addChild(this.slider=new T$G()),this.addChild(this.upButton=new T$X()),this.addChild(this.downButton=new T$X());},T$n.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown);},T$n.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value);},T$n.onButtonMouseDown=function(T$n){var T$C=T$n.currentTarget===this.upButton;this.slide(T$C),T$r.timer.once(T$S.scrollBarDelayTime,this,this.startLoop,[T$C]),T$r.stage.once("mouseup",this,this.onStageMouseUp);},T$n.startLoop=function(T$n){T$r.timer.frameLoop(1,this,this.slide,[T$n]);},T$n.slide=function(T$n){T$n?this.value-=this._scrollSize:this.value+=this._scrollSize;},T$n.onStageMouseUp=function(T$n){T$r.timer.clear(this,this.startLoop),T$r.timer.clear(this,this.slide);},T$n.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint();},T$n.changeSize=function(){T$C.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value);},T$n.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition();},T$n.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width;},T$n.setScroll=function(T$n,T$C,T$_){this.runCallLater(this.changeSize),this.slider.setSlider(T$n,T$C,T$_),this.slider.bar.visible=0<T$C,!this._hide&&this.autoHide&&(this.visible=!1);},T$n.onTargetMouseWheel=function(T$n){this.value-=T$n.delta*this._scrollSize,this.target=this._target;},T$n.onTargetMouseDown=function(T$n){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new T$b()),this._lastPoint.setTo(T$r.stage.mouseX,T$r.stage.mouseY),T$r.timer.clear(this,this.tweenMove),T$T.clearTween(this),T$r.stage.once("mouseup",this,this.onStageMouseUp2),T$r.stage.once("mouseout",this,this.onStageMouseUp2),T$r.timer.frameLoop(1,this,this.loop);},T$n.loop=function(){var T$n=T$r.stage.mouseY,T$C=T$r.stage.mouseX;if(this._lastOffset=this.isVertical?T$n-this._lastPoint.y:T$C-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?T$r.stage._canvasTransform.getScaleY():T$r.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start");}this._offsets.push(this._lastOffset),this._lastPoint.x=T$C,this._lastPoint.y=T$n,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset);},T$n.onStageMouseUp2=function(T$n){if(T$r.stage.off("mouseup",this,this.onStageMouseUp2),T$r.stage.off("mouseout",this,this.onStageMouseUp2),T$r.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?T$T.to(this,{value:this.min},this.elasticBackTime,T$W.sineOut,T$P.create(this,this.elasticOver)):this._value>this.max&&T$T.to(this,{value:this.max},this.elasticBackTime,T$W.sineOut,T$P.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?T$r.stage.mouseY-this._lastPoint.y:T$r.stage.mouseX-this._lastPoint.x);for(var T$C=0,T$_=Math.min(this._offsets.length,3),T$E=0;T$E<T$_;T$E++)T$C+=this._offsets[this._offsets.length-1-T$E];if(this._lastOffset=T$C/T$_,(T$C=Math.abs(this._lastOffset))<2)return void this.event("end");60<T$C&&(this._lastOffset=0<this._lastOffset?60:-60);var T$y=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));T$r.timer.frameLoop(1,this,this.tweenMove,[T$y]);}},T$n.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&T$T.to(this,{alpha:0},500),this.event("end");},T$n.tweenMove=function(T$n){this._lastOffset*=this.rollRatio;var T$C=NaN;if(0<T$n&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,T$C=.5*-(this.min-T$n-this.value),this._lastOffset>T$C&&(this._lastOffset=T$C)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,T$C=.5*-(this.max+T$n-this.value),this._lastOffset<T$C&&(this._lastOffset=T$C))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(T$r.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?T$T.to(this,{value:this.min},this.elasticBackTime,T$W.sineOut,T$P.create(this,this.elasticOver)):this._value>this.max?T$T.to(this,{value:this.max},this.elasticBackTime,T$W.sineOut,T$P.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&T$T.to(this,{alpha:0},500);}},T$n.stopScroll=function(){this.onStageMouseUp2(null),T$r.timer.clear(this,this.tweenMove),T$T.clearTween(this);},T$c(0,T$n,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height;}),T$c(0,T$n,"skin",function(){return this._skin;},function(T$n){this._skin!=T$n&&(this._skin=T$n,this.slider.skin=this._skin,this.callLater(this.changeScrollBar));}),T$c(0,T$n,"max",function(){return this.slider.max;},function(T$n){this.slider.max=T$n;}),T$c(0,T$n,"showButtons",function(){return this._showButtons;},function(T$n){this._showButtons=T$n,this.callLater(this.changeScrollBar);}),T$c(0,T$n,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100;}),T$c(0,T$n,"min",function(){return this.slider.min;},function(T$n){this.slider.min=T$n;}),T$c(0,T$n,"value",function(){return this._value;},function(T$n){T$n!==this._value&&(this._value=T$n,this._isElastic||(this.slider._value!=T$n&&(this.slider._value=T$n,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value));}),T$c(0,T$n,"isVertical",function(){return this.slider.isVertical;},function(T$n){this.slider.isVertical=T$n;}),T$c(0,T$n,"sizeGrid",function(){return this.slider.sizeGrid;},function(T$n){this.slider.sizeGrid=T$n;}),T$c(0,T$n,"scrollSize",function(){return this._scrollSize;},function(T$n){this._scrollSize=T$n;}),T$c(0,T$n,"dataSource",T$C.prototype._$get_dataSource,function(T$n){"number"==typeof(this._dataSource=T$n)||"string"==typeof T$n?this.value=Number(T$n):T$r.superSet(T$V,this,"dataSource",T$n);}),T$c(0,T$n,"thumbPercent",function(){return this._thumbPercent;},function(T$n){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),T$n=1<=T$n?.99:T$n,this._thumbPercent=T$n,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*T$n,T$S.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*T$n,T$S.scrollBarMinNum));}),T$c(0,T$n,"target",function(){return this._target;},function(T$n){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=T$n)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown));}),T$c(0,T$n,"hide",function(){return this._hide;},function(T$n){this._hide=T$n,this.visible=!T$n;}),T$c(0,T$n,"touchScrollEnable",function(){return this._touchScrollEnable;},function(T$n){this._touchScrollEnable=T$n,this.target=this._target;}),T$c(0,T$n,"mouseWheelEnable",function(){return this._mouseWheelEnable;},function(T$n){this._mouseWheelEnable=T$n,this.target=this._target;}),T$c(0,T$n,"tick",function(){return this.slider.tick;},function(T$n){this.slider.tick=T$n;}),T$_;}(T$V),T$G=function(T$C){function T$_(T$n){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,T$_.__super.call(this),this.skin=T$n;}T$p(T$_,"laya.ui.Slider",T$C);var T$n=T$_.prototype;return T$n.destroy=function(T$n){void 0===T$n&&(T$n=!0),T$C.prototype.destroy.call(this,T$n),this._bg&&this._bg.destroy(T$n),this._bar&&this._bar.destroy(T$n),this._progress&&this._progress.destroy(T$n),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null;},T$n.createChildren=function(){this.addChild(this._bg=new T$F()),this.addChild(this._bar=new T$X());},T$n.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0;},T$n.onBarMouseDown=function(T$n){this._globalSacle||(this._globalSacle=new T$b()),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=T$r.stage.mouseX,this._ty=T$r.stage.mouseY,T$r.stage.on("mousemove",this,this.mouseMove),T$r.stage.once("mouseup",this,this.mouseUp),T$r.stage.once("mouseout",this,this.mouseUp),this.showValueText();},T$n.showValueText=function(){if(this.showLabel){var T$n=laya.ui.Slider.label;this.addChild(T$n),T$n.textField.changeText(this._value+""),this.isVertical?(T$n.x=this._bar.x+20,T$n.y=.5*(this._bar.height-T$n.height)+this._bar.y):(T$n.y=this._bar.y-20,T$n.x=.5*(this._bar.width-T$n.width)+this._bar.x);}},T$n.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf();},T$n.mouseUp=function(T$n){T$r.stage.off("mousemove",this,this.mouseMove),T$r.stage.off("mouseup",this,this.mouseUp),T$r.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText();},T$n.mouseMove=function(T$n){var T$C=this._value;this.isVertical?(this._bar.y+=(T$r.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(T$r.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=T$r.stage.mouseX,this._ty=T$r.stage.mouseY;var T$_=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*T$_)/T$_,this._value!=T$C&&this.sendChangeEvent(),this.showValueText();},T$n.sendChangeEvent=function(T$n){void 0===T$n&&(T$n="change"),this.event(T$n),this.changeHandler&&this.changeHandler.runWith(this._value);},T$n.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height));},T$n.changeSize=function(){T$C.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue();},T$n.setSlider=function(T$n,T$C,T$_){this._value=-1,this._min=T$n,this._max=T$n<T$C?T$C:T$n,this.value=T$_<T$n?T$n:T$C<T$_?T$C:T$_;},T$n.changeValue=function(){var T$n=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*T$n)/T$n,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var T$C=this._max-this._min;0===T$C&&(T$C=1),this.isVertical?(this._bar.y=(this._value-this._min)/T$C*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/T$C*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width));},T$n.onBgMouseDown=function(T$n){var T$C=this._bg.getMousePoint();this.isVertical?this.value=T$C.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=T$C.x/(this.width-this._bar.width)*(this._max-this._min)+this._min;},T$c(0,T$n,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height);}),T$c(0,T$n,"skin",function(){return this._skin;},function(T$n){if(this._skin!=T$n){this._skin=T$n,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var T$C=this._skin.replace(".png","$progress.png");T$a.getRes(T$C)&&(this._progress||(this.addChild(this._progress=new T$F()),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=T$C),this.setBarPoint(),this.callLater(this.changeValue);}}),T$c(0,T$n,"allowClickBack",function(){return this._allowClickBack;},function(T$n){this._allowClickBack!=T$n&&((this._allowClickBack=T$n)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown));}),T$c(0,T$n,"max",function(){return this._max;},function(T$n){this._max!=T$n&&(this._max=T$n,this.callLater(this.changeValue));}),T$c(0,T$n,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width);}),T$c(0,T$n,"tick",function(){return this._tick;},function(T$n){this._tick!=T$n&&(this._tick=T$n,this.callLater(this.changeValue));}),T$c(0,T$n,"sizeGrid",function(){return this._bg.sizeGrid;},function(T$n){this._bg.sizeGrid=T$n,this._bar.sizeGrid=T$n,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid);}),T$c(0,T$n,"min",function(){return this._min;},function(T$n){this._min!=T$n&&(this._min=T$n,this.callLater(this.changeValue));}),T$c(0,T$n,"value",function(){return this._value;},function(T$n){if(this._value!=T$n){var T$C=this._value;this._value=T$n,this.changeValue(),this._value!=T$C&&this.sendChangeEvent();}}),T$c(0,T$n,"dataSource",T$C.prototype._$get_dataSource,function(T$n){"number"==typeof(this._dataSource=T$n)||"string"==typeof T$n?this.value=Number(T$n):T$r.superSet(T$V,this,"dataSource",T$n);}),T$c(0,T$n,"bar",function(){return this._bar;}),T$E(T$_,["label",function(){return this.label=new T$u();}]),T$_;}(T$V),T$F=function(T$C){function T$_(T$n){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,T$_.__super.call(this),this.skin=T$n;}T$p(T$_,"laya.ui.Image",T$C);var T$n=T$_.prototype;return T$n.destroy=function(T$n){void 0===T$n&&(T$n=!0),T$C.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,T$a.clearCache(this,this._skin);},T$n.dispose=function(){this.destroy(!0),T$a.clearCache(this,this._skin),this.clearEvent();},T$n.createChildren=function(){this.graphics=this._bitmap=new T$B();},T$n.setSource=function(T$n,T$C){this.destroyed||T$n===this._skin&&T$C&&(this.source=T$C,this.onCompResize(),this.clearEvent());},T$n.clearEvent=function(){this._skin&&T$y.atalsNotify&&T$y.atalsNotify.off(this._skin,this,this.setSource);},T$n.clearLoad=function(){this._skin&&((this._complete||this._progress)&&T$r.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null);},T$c(0,T$n,"source",function(){return this._bitmap.source;},function(T$n){this._bitmap&&(this._bitmap.source=T$n,this.event("loaded"),this.repaint());}),T$c(0,T$n,"dataSource",T$C.prototype._$get_dataSource,function(T$n){"string"==typeof(this._dataSource=T$n)?this.skin=T$n:T$r.superSet(T$V,this,"dataSource",T$n);}),T$c(0,T$n,"measureHeight",function(){return this._bitmap.height;}),T$c(0,T$n,"skin",function(){return this._skin;},function(T$n){if(this._skin!=T$n)if(T$a.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=T$n){T$a.keepCache(this,this._skin);var T$C=T$a.getRes(T$n),T$_=T$y.resAtalsObj&&T$y.resAtalsObj[this._skin];T$C?(this.source=T$C,this.onCompResize()):T$_?(T$y.atalsNotify&&T$y.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=T$_.sourceW),0==this.height&&(this.height=T$_.sourceH)):(this._complete=T$P.create(this,this.setSource,[this._skin]),this._progress=null,T$r.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group));}else this.source=null;}),T$c(0,T$n,"group",function(){return this._group;},function(T$n){T$n&&this._skin&&T$a.setGroup(this._skin,T$n),this._group=T$n;}),T$c(0,T$n,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null;},function(T$n){this._bitmap.sizeGrid=T$M.fillArray(T$S.defaultSizeGrid,T$n,Number);}),T$c(0,T$n,"measureWidth",function(){return this._bitmap.width;}),T$c(0,T$n,"width",T$C.prototype._$get_width,function(T$n){T$r.superSet(T$V,this,"width",T$n),this._bitmap.width=0==T$n?1e-7:T$n;}),T$c(0,T$n,"height",T$C.prototype._$get_height,function(T$n){T$r.superSet(T$V,this,"height",T$n),this._bitmap.height=0==T$n?1e-7:T$n;}),T$_;}(T$V),T$u=function(T$C){function T$_(T$n){this._tf=null,T$_.__super.call(this),void 0===T$n&&(T$n=""),T$J.defaultColor=T$S.labelColor,this.text=T$n;}T$p(T$_,"laya.ui.Label",T$C);var T$n=T$_.prototype;return T$n.destroy=function(T$n){void 0===T$n&&(T$n=!0),T$C.prototype.destroy.call(this,T$n),this._tf=null;},T$n.createChildren=function(){this.addChild(this._tf=new T$k());},T$n.changeText=function(T$n){this._tf.changeText(T$n);},T$c(0,T$n,"padding",function(){return this._tf.padding.join(",");},function(T$n){this._tf.padding=T$M.fillArray(T$S.labelPadding,T$n,Number);}),T$c(0,T$n,"bold",function(){return this._tf.bold;},function(T$n){this._tf.bold=T$n;}),T$c(0,T$n,"align",function(){return this._tf.align;},function(T$n){this._tf.align=T$n;}),T$c(0,T$n,"text",function(){return this._tf.text;},function(T$n){this._tf.text!=T$n&&(T$n&&(T$n=T$M.adptString(T$n+"")),this._tf.text=T$n,this.event("change"),this._width&&this._height||this.onCompResize());}),T$c(0,T$n,"italic",function(){return this._tf.italic;},function(T$n){this._tf.italic=T$n;}),T$c(0,T$n,"wordWrap",function(){return this._tf.wordWrap;},function(T$n){this._tf.wordWrap=T$n;}),T$c(0,T$n,"font",function(){return this._tf.font;},function(T$n){this._tf.font=T$n;}),T$c(0,T$n,"dataSource",T$C.prototype._$get_dataSource,function(T$n){"number"==typeof(this._dataSource=T$n)||"string"==typeof T$n?this.text=T$n+"":T$r.superSet(T$V,this,"dataSource",T$n);}),T$c(0,T$n,"color",function(){return this._tf.color;},function(T$n){this._tf.color=T$n;}),T$c(0,T$n,"valign",function(){return this._tf.valign;},function(T$n){this._tf.valign=T$n;}),T$c(0,T$n,"leading",function(){return this._tf.leading;},function(T$n){this._tf.leading=T$n;}),T$c(0,T$n,"fontSize",function(){return this._tf.fontSize;},function(T$n){this._tf.fontSize=T$n;}),T$c(0,T$n,"bgColor",function(){return this._tf.bgColor;},function(T$n){this._tf.bgColor=T$n;}),T$c(0,T$n,"borderColor",function(){return this._tf.borderColor;},function(T$n){this._tf.borderColor=T$n;}),T$c(0,T$n,"stroke",function(){return this._tf.stroke;},function(T$n){this._tf.stroke=T$n;}),T$c(0,T$n,"strokeColor",function(){return this._tf.strokeColor;},function(T$n){this._tf.strokeColor=T$n;}),T$c(0,T$n,"textField",function(){return this._tf;}),T$c(0,T$n,"measureWidth",function(){return this._tf.width;}),T$c(0,T$n,"measureHeight",function(){return this._tf.height;}),T$c(0,T$n,"width",function(){return this._width||this._tf.text?T$r.superGet(T$V,this,"width"):0;},function(T$n){T$r.superSet(T$V,this,"width",T$n),this._tf.width=T$n;}),T$c(0,T$n,"height",function(){return this._height||this._tf.text?T$r.superGet(T$V,this,"height"):0;},function(T$n){T$r.superSet(T$V,this,"height",T$n),this._tf.height=T$n;}),T$c(0,T$n,"overflow",function(){return this._tf.overflow;},function(T$n){this._tf.overflow=T$n;}),T$c(0,T$n,"underline",function(){return this._tf.underline;},function(T$n){this._tf.underline=T$n;}),T$c(0,T$n,"underlineColor",function(){return this._tf.underlineColor;},function(T$n){this._tf.underlineColor=T$n;}),T$_;}(T$V),T$o=function(T$C){function T$_(T$n){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,T$_.__super.call(this),this.skin=T$n;}T$p(T$_,"laya.ui.ProgressBar",T$C);var T$n=T$_.prototype;return T$n.destroy=function(T$n){void 0===T$n&&(T$n=!0),T$C.prototype.destroy.call(this,T$n),this._bg&&this._bg.destroy(T$n),this._bar&&this._bar.destroy(T$n),this._bg=this._bar=null,this.changeHandler=null;},T$n.createChildren=function(){this.addChild(this._bg=new T$F()),this.addChild(this._bar=new T$F());},T$n.changeValue=function(){if(this.sizeGrid){var T$n=this.sizeGrid.split(","),T$C=Number(T$n[3]),T$_=Number(T$n[1]),T$E=(this.width-T$C-T$_)*this._value;this._bar.width=T$C+T$_+T$E,this._bar.visible=this._bar.width>T$C+T$_;}else this._bar.width=this.width*this._value;},T$c(0,T$n,"measureHeight",function(){return this._bg.height;}),T$c(0,T$n,"skin",function(){return this._skin;},function(T$n){this._skin!=T$n&&(this._skin=T$n,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue));}),T$c(0,T$n,"measureWidth",function(){return this._bg.width;}),T$c(0,T$n,"height",T$C.prototype._$get_height,function(T$n){T$r.superSet(T$V,this,"height",T$n),this._bg.height=this._height,this._bar.height=this._height;}),T$c(0,T$n,"bar",function(){return this._bar;}),T$c(0,T$n,"value",function(){return this._value;},function(T$n){this._value!=T$n&&(T$n=1<T$n?1:T$n<0?0:T$n,this._value=T$n,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(T$n));}),T$c(0,T$n,"bg",function(){return this._bg;}),T$c(0,T$n,"sizeGrid",function(){return this._bg.sizeGrid;},function(T$n){this._bg.sizeGrid=this._bar.sizeGrid=T$n;}),T$c(0,T$n,"width",T$C.prototype._$get_width,function(T$n){T$r.superSet(T$V,this,"width",T$n),this._bg.width=this._width,this.callLater(this.changeValue);}),T$c(0,T$n,"dataSource",T$C.prototype._$get_dataSource,function(T$n){"number"==typeof(this._dataSource=T$n)||"string"==typeof T$n?this.value=Number(T$n):T$r.superSet(T$V,this,"dataSource",T$n);}),T$_;}(T$V),T$Q=(function(T$n){function T$_(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,T$_.__super.call(this),this._tipBox=new T$V(),this._tipBox.addChild(this._tipText=new T$k()),this._tipText.x=this._tipText.y=5,this._tipText.color=T$_.tipTextColor,this._defaultTipHandler=this._showDefaultTip,T$r.stage.on("showtip",this,this._onStageShowTip),T$r.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100;}T$p(T$_,"laya.ui.TipManager",T$V);var T$C=T$_.prototype;T$C._onStageHideTip=function(T$n){T$r.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf();},T$C._onStageShowTip=function(T$n){T$r.timer.once(T$_.tipDelay,this,this._showTip,[T$n],!0);},T$C._showTip=function(T$n){if("string"==typeof T$n){var T$C=String(T$n);Boolean(T$C)&&this._defaultTipHandler(T$C);}else T$n instanceof laya.utils.Handler?T$n.run():"function"==typeof T$n&&T$n.apply();T$r.stage.on("mousemove",this,this._onStageMouseMove),T$r.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null);},T$C._onStageMouseDown=function(T$n){this.closeAll();},T$C._onStageMouseMove=function(T$n){this._showToStage(this,T$_.offsetX,T$_.offsetY);},T$C._showToStage=function(T$n,T$C,T$_){void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0);var T$E=T$n.getBounds();T$n.x=T$r.stage.mouseX+T$C,T$n.y=T$r.stage.mouseY+T$_,T$n.x+T$E.width>T$r.stage.width&&(T$n.x-=T$E.width+T$C),T$n.y+T$E.height>T$r.stage.height&&(T$n.y-=T$E.height+T$_);},T$C.closeAll=function(){T$r.timer.clear(this,this._showTip),T$r.stage.off("mousemove",this,this._onStageMouseMove),T$r.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren();},T$C.showDislayTip=function(T$n){this.addChild(T$n),this._showToStage(this),T$r._currentStage.addChild(this);},T$C._showDefaultTip=function(T$n){this._tipText.text=T$n;var T$C=this._tipBox.graphics;T$C.clear(),T$C.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,T$_.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),T$r._currentStage.addChild(this);},T$c(0,T$C,"defaultTipHandler",function(){return this._defaultTipHandler;},function(T$n){this._defaultTipHandler=T$n;}),T$_.offsetX=10,T$_.offsetY=15,T$_.tipTextColor="#ffffff",T$_.tipBackColor="#111111",T$_.tipDelay=200;}(),function(T$n){var T$x;function T$b(){this._idMap=null,this._aniList=null,this._watchMap={},T$b.__super.call(this);}T$p(T$b,"laya.ui.View",T$H);var T$C=T$b.prototype;return T$C.createView=function(T$n){if(T$n.animations&&!this._idMap&&(this._idMap={}),T$b.createComp(T$n,this,this),T$n.animations){var T$C,T$_,T$E=[],T$y=T$n.animations,T$p=0,T$c=T$y.length;for(T$p=0;T$p<T$c;T$p++){switch(T$C=new T$j(),T$_=T$y[T$p],T$C._setUp(this._idMap,T$_),(this[T$_.name]=T$C)._setControlNode(this),T$_.action){case 1:T$C.play(0,!1);break;case 2:T$C.play(0,!0);}T$E.push(T$C);}this._aniList=T$E;}0<this._width&&null==T$n.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0);},T$C.onEvent=function(T$n,T$C){},T$C.loadUI=function(T$n){var T$C=T$b.uiMap[T$n];T$C&&this.createView(T$C);},T$C.destroy=function(T$n){void 0===T$n&&(T$n=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,T$n);},T$C.changeData=function(T$n){var T$C=this._watchMap[T$n];if(T$C){console.log("change",T$n);for(var T$_=0,T$E=T$C.length;T$_<T$E;T$_++){T$C[T$_].exe(this);}}},T$b._regs=function(){for(var T$n in T$b.uiClassMap)T$m.regClass(T$n,T$b.uiClassMap[T$n]);},T$b.createComp=function(T$n,T$C,T$_,T$E){if(!(T$C=T$C||T$b.getCompInstance(T$n)))return console.warn("can not create:"+T$n.type),null;var T$y=T$n.child;if(T$y)for(var T$p=T$C instanceof laya.ui.List,T$c=0,T$l=T$y.length;T$c<T$l;T$c++){var T$W=T$y[T$c];if(!T$C.hasOwnProperty("itemRender")||"render"!=T$W.props.name&&"render"!==T$W.props.renderType){if("Graphic"==T$W.type)T$m.addGraphicsToSprite(T$W,T$C);else if(T$m.isDrawType(T$W.type))T$m.addGraphicToSprite(T$W,T$C,!0);else{if(T$p){var T$q=[],T$J=T$b.createComp(T$W,null,T$_,T$q);T$q.length&&(T$J._$bindData=T$q);}else T$J=T$b.createComp(T$W,null,T$_,T$E);"Script"==T$W.type?"owner"in T$J?T$J.owner=T$C:"target"in T$J&&(T$J.target=T$C):"mask"==T$W.props.renderType||"mask"==T$W.props.name?T$C.mask=T$J:T$J instanceof laya.display.Sprite&&T$C.addChild(T$J);}}else T$C.itemRender=T$W;}var T$j=T$n.props;for(var T$P in T$j){var T$x=T$j[T$P];T$b.eventDic[T$P]?T$x&&T$_&&T$C.on(T$P,T$_,T$_.onEvent,[T$x]):T$b.setCompValue(T$C,T$P,T$x,T$_,T$E);}return T$r.__typeof(T$C,"laya.ui.IItem")&&T$C.initItems(),T$n.compId&&T$_&&T$_._idMap&&(T$_._idMap[T$n.compId]=T$C),T$C;},T$b.setCompValue=function(T$n,T$C,T$_,T$E,T$y){if("string"==typeof T$_&&-1<T$_.indexOf("${")){if(T$b._sheet||(T$b._sheet=T$m.getClass("laya.data.Table")),!T$b._sheet)return void console.warn("Can not find class Sheet");if(T$y)T$y.push(T$n,T$C,T$_);else if(T$E){-1==T$_.indexOf("].")&&(T$_=T$_.replace(".","[0]."));var T$p,T$c,T$l=new T$x(T$n,T$C,T$_);T$l.exe(T$E);for(var T$W=T$_.replace(/\[.*?\]\./g,".");null!=(T$p=T$b._parseWatchData.exec(T$W));){for(var T$q=T$p[1];null!=(T$c=T$b._parseKeyWord.exec(T$q));){var T$J=T$c[0],T$j=T$E._watchMap[T$J]||(T$E._watchMap[T$J]=[]);T$j.push(T$l),T$b._sheet.I.notifer.on(T$J,T$E,T$E.changeData,[T$J]);}(T$j=T$E._watchMap[T$q]||(T$E._watchMap[T$q]=[])).push(T$l),T$b._sheet.I.notifer.on(T$q,T$E,T$E.changeData,[T$q]);}}}else if("var"===T$C&&T$E)T$E[T$_]=T$n;else if("onClick"==T$C){var T$P=T$r._runScript("(function(){"+T$_+"})");T$n.on("click",T$E,T$P);}else T$n[T$C]="true"===T$_||"false"!==T$_&&T$_;},T$b.getCompInstance=function(T$n){var T$C,T$_=T$n.props?T$n.props.runtime:null;return T$C=T$_?T$b.viewClassMap[T$_]||T$b.uiClassMap[T$_]||T$r.__classmap[T$_]:T$b.uiClassMap[T$n.type],T$n.props&&T$n.props.hasOwnProperty("renderType")&&"instance"==T$n.props.renderType?T$C.instance:T$C?new T$C():null;},T$b.regComponent=function(T$n,T$C){T$b.uiClassMap[T$n]=T$C,T$m.regClass(T$n,T$C);},T$b.regViewRuntime=function(T$n,T$C){T$b.viewClassMap[T$n]=T$C;},T$b.uiMap={},T$b.viewClassMap={},T$b._sheet=null,T$E(T$b,["uiClassMap",function(){return this.uiClassMap={ViewStack:T$nn,LinkButton:T$X,TextArea:T$qn,ColorPicker:T$i,Box:T$H,Button:T$X,CheckBox:T$I,Clip:T$$,ComboBox:T$f,Component:T$V,HScrollBar:T$v,HSlider:T$z,Image:T$F,Label:T$u,List:T$h,Panel:T$R,ProgressBar:T$o,Radio:T$K,RadioGroup:T$ln,ScrollBar:T$e,Slider:T$G,Tab:T$Wn,TextInput:T$_n,View:T$b,VScrollBar:T$Cn,VSlider:T$En,Tree:T$D,HBox:T$pn,VBox:T$cn,Sprite:T$A,Animation:T$_,Text:T$k,FontClip:T$L};},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0};},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g;},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g;}]),T$b.__init$=function(){T$b._regs(),T$x=function(){function T$n(T$n,T$C,T$_){this.comp=null,this.prop=null,this.value=null,this.comp=T$n,this.prop=T$C,this.value=T$_;}return T$p(T$n,""),T$n.prototype.exe=function(T$n){var T$C=T$M.getBindFun(this.value);this.comp[this.prop]=T$C.call(this,T$n);},T$n;}();},T$b;}()),T$I=function(T$n){function T$_(T$n,T$C){void 0===T$C&&(T$C=""),T$_.__super.call(this,T$n,T$C);}T$p(T$_,"laya.ui.CheckBox",T$n);var T$C=T$_.prototype;return T$C.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1;},T$C.initialize=function(){T$n.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0;},T$c(0,T$C,"dataSource",T$n.prototype._$get_dataSource,function(T$n){"boolean"==typeof(this._dataSource=T$n)?this.selected=T$n:"string"==typeof T$n?this.selected="true"===T$n:T$r.superSet(T$X,this,"dataSource",T$n);}),T$_;}(T$X),T$Z=function(T$n){function T$C(){this._space=0,this._align="none",this._itemChanged=!1,T$C.__super.call(this);}T$p(T$C,"laya.ui.LayoutBox",T$H);var T$_=T$C.prototype;return T$_.addChild=function(T$n){return T$n.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,T$n);},T$_.onResize=function(T$n){this._setItemChanged();},T$_.addChildAt=function(T$n,T$C){return T$n.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,T$n,T$C);},T$_.removeChild=function(T$n){return T$n.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,T$n);},T$_.removeChildAt=function(T$n){return this.getChildAt(T$n).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,T$n);},T$_.refresh=function(){this._setItemChanged();},T$_.changeItems=function(){this._itemChanged=!1;},T$_.sortItem=function(T$n){T$n&&T$n.sort(function(T$n,T$C){return T$n.y-T$C.y;});},T$_._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems));},T$c(0,T$_,"space",function(){return this._space;},function(T$n){this._space=T$n,this._setItemChanged();}),T$c(0,T$_,"align",function(){return this._align;},function(T$n){this._align=T$n,this._setItemChanged();}),T$C;}(),T$L=function(T$C){function T$_(T$n,T$C){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,T$_.__super.call(this),T$n&&(this.skin=T$n),T$C&&(this.sheet=T$C);}T$p(T$_,"laya.ui.FontClip",T$C);var T$n=T$_.prototype;return T$n.createChildren=function(){this._bitmap=new T$B(),this.on("loaded",this,this._onClipLoaded);},T$n._onClipLoaded=function(){this.callLater(this.changeValue);},T$n.changeValue=function(){var T$n;if(this._sources&&this._valueArr&&(this.graphics.clear(!0),T$n=this._sources[0])){var T$C="horizontal"===this._direction;T$C?(this._wordsW=this._valueArr.length*(T$n.sourceWidth+this.spaceX),this._wordsH=T$n.sourceHeight):(this._wordsW=T$n.sourceWidth,this._wordsH=(T$n.sourceHeight+this.spaceY)*this._valueArr.length);var T$_=0;if(this._width)switch(this._align){case"center":T$_=.5*(this._width-this._wordsW);break;case"right":T$_=this._width-this._wordsW;break;default:T$_=0;}for(var T$E=0,T$y=this._valueArr.length;T$E<T$y;T$E++){var T$p=this._indexMap[this._valueArr.charAt(T$E)];this.sources[T$p]&&(T$n=this.sources[T$p],T$C?this.graphics.drawTexture(T$n,T$_+T$E*(T$n.sourceWidth+this.spaceX),0,T$n.sourceWidth,T$n.sourceHeight):this.graphics.drawTexture(T$n,0+T$_,T$E*(T$n.sourceHeight+this.spaceY),T$n.sourceWidth,T$n.sourceHeight));}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize));}},T$n.destroy=function(T$n){void 0===T$n&&(T$n=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),T$C.prototype.destroy.call(this,T$n);},T$c(0,T$n,"sheet",function(){return this._sheet;},function(T$n){T$n+="";var T$C=(this._sheet=T$n).split(" ");this._clipX=String(T$C[0]).length,this.clipY=T$C.length,this._indexMap={};for(var T$_=0;T$_<this._clipY;T$_++)for(var T$E=T$C[T$_].split(""),T$y=0,T$p=T$E.length;T$y<T$p;T$y++)this._indexMap[T$E[T$y]]=T$_*this._clipX+T$y;}),T$c(0,T$n,"height",T$C.prototype._$get_height,function(T$n){T$r.superSet(T$$,this,"height",T$n),this.callLater(this.changeValue);}),T$c(0,T$n,"direction",function(){return this._direction;},function(T$n){this._direction=T$n,this.callLater(this.changeValue);}),T$c(0,T$n,"value",function(){return this._valueArr?this._valueArr:"";},function(T$n){T$n+="",this._valueArr=T$n,this.callLater(this.changeValue);}),T$c(0,T$n,"width",T$C.prototype._$get_width,function(T$n){T$r.superSet(T$$,this,"width",T$n),this.callLater(this.changeValue);}),T$c(0,T$n,"spaceX",function(){return this._spaceX;},function(T$n){this._spaceX=T$n,"horizontal"===this._direction&&this.callLater(this.changeValue);}),T$c(0,T$n,"spaceY",function(){return this._spaceY;},function(T$n){this._spaceY=T$n,"horizontal"!==this._direction&&this.callLater(this.changeValue);}),T$c(0,T$n,"align",function(){return this._align;},function(T$n){this._align=T$n,this.callLater(this.changeValue);}),T$c(0,T$n,"measureWidth",function(){return this._wordsW;}),T$c(0,T$n,"measureHeight",function(){return this._wordsH;}),T$_;}(T$$),T$h=function(T$n){function T$C(){this.selectHandler=null,this.renderHandler=null,this.renderTwHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this._twSwitch=!0,this._twDone=!0,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new T$b(),T$C.__super.call(this);}T$p(T$C,"laya.ui.List",T$n);var T$_=T$C.prototype;return T$r.imps(T$_,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),T$_.destroy=function(T$n){void 0===T$n&&(T$n=!0),this._content&&this._content.destroy(T$n),this._scrollBar&&this._scrollBar.destroy(T$n),laya.ui.Component.prototype.destroy.call(this,T$n),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this._twSwitch=null,this._twDone=null,this.selectHandler=this.renderHandler=this.mouseHandler=this.renderTwHandler=null;},T$_.createChildren=function(){this.addChild(this._content=new T$H());},T$_.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=T$r.superGet(T$H,this,"cacheAs")),T$r.superSet(T$H,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd);},T$_.onScrollEnd=function(){T$r.superSet(T$H,this,"cacheAs",this._$P.cacheAs);},T$_._removePreScrollBar=function(){var T$n=this.removeChildByName("scrollBar");T$n&&T$n.destroy(!0);},T$_.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var T$n=this._getOneCell(),T$C=T$n.width+this._spaceX||1,T$_=T$n.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/T$C):Math.ceil(this._width/T$C)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/T$_):Math.round(this._height/T$_));var T$E=this._width?this._width:T$C*this.repeatX-this._spaceX,T$y=this._height?this._height:T$_*this.repeatY-this._spaceY;this._cellSize=this._isVertical?T$_:T$C,this._cellOffset=this._isVertical?T$_*Math.max(this._repeatY2,this._repeatY)-T$y-this._spaceY:T$C*Math.max(this._repeatX2,this._repeatX)-T$E-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=T$y:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=T$E),this.setContentSize(T$E,T$y);var T$p=this._isVertical?this.repeatX:this.repeatY,T$c=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,T$p,T$c),this._createdLine=T$c,this._array&&(this.array=this._array,this.runCallLater(this.renderItems));}},T$_._getOneCell=function(){if(0===this._cells.length){var T$n=this.createItem();if(this._offset.setTo(T$n.x,T$n.y),this.cacheContent)return T$n;this._cells.push(T$n);}return this._cells[0];},T$_._createItems=function(T$n,T$C,T$_){var T$E=this._content,T$y=this._getOneCell(),T$p=T$y.width+this._spaceX,T$c=T$y.height+this._spaceY;if(this.cacheContent){var T$l=new T$H();T$l.cacheAsBitmap=!0,T$l.pos((this._isVertical?0:T$n)*T$p,(this._isVertical?T$n:0)*T$c),this._content.addChild(T$l),this._content.optimizeScrollRect=!0,T$E=T$l;}else{for(var T$W=[],T$q=this._cells.length-1;-1<T$q;T$q--){var T$J=this._cells[T$q];T$J.removeSelf(),T$W.push(T$J);}this._cells.length=0;}for(var T$j=T$n;T$j<T$_;T$j++)for(var T$P=0;T$P<T$C;T$P++)(T$y=T$W&&T$W.length?T$W.pop():this.createItem()).x=(this._isVertical?T$P:T$j)*T$p-T$E.x,T$y.y=(this._isVertical?T$j:T$P)*T$c-T$E.y,T$y.name="item"+(T$j*T$C+T$P),T$E.addChild(T$y),this.addCell(T$y);},T$_.createItem=function(){var T$n=[];if("function"==typeof this._itemRender)var T$C=new this._itemRender();else T$C=T$Q.createComp(this._itemRender,null,null,T$n);if(0==T$n.length&&T$C._watchMap){var T$_=T$C._watchMap;for(var T$E in T$_)for(var T$y=T$_[T$E],T$p=0;T$p<T$y.length;T$p++){var T$c=T$y[T$p];T$n.push(T$c.comp,T$c.prop,T$c.value);}}return T$n.length&&(T$C._$bindData=T$n),T$C;},T$_.addCell=function(T$n){T$n.on("click",this,this.onCellMouse),T$n.on("rightclick",this,this.onCellMouse),T$n.on("mouseover",this,this.onCellMouse),T$n.on("mouseout",this,this.onCellMouse),T$n.on("mousedown",this,this.onCellMouse),T$n.on("mouseup",this,this.onCellMouse),this._cells.push(T$n);},T$_.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var T$n=0,T$C=T$n=0;T$C<1e4;T$C++){var T$_=this.getChildByName("item"+T$C);if(!T$_)break;this.addCell(T$_),T$n++;}this.repeatY=T$n;}},T$_.setContentSize=function(T$n,T$C){this._content.width=T$n,this._content.height=T$C,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new T$d()),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,T$n,T$C),this._content.scrollRect=this._content.scrollRect),this.event("resize");},T$_.onCellMouse=function(T$n){"mousedown"===T$n.type&&(this._isMoved=!1);var T$C=T$n.currentTarget,T$_=this._startIndex+this._cells.indexOf(T$C);T$_<0||("click"===T$n.type||"rightclick"===T$n.type?this.selectEnable&&!this._isMoved?this.selectedIndex=T$_:this.changeCellState(T$C,!0,0):"mouseover"!==T$n.type&&"mouseout"!==T$n.type||this._selectedIndex===T$_||this.changeCellState(T$C,"mouseover"===T$n.type,0),this.mouseHandler&&this.mouseHandler.runWith([T$n,T$_]));},T$_.changeCellState=function(T$n,T$C,T$_){var T$E=T$n.getChildByName("selectBox");T$E&&(this.selectEnable=!0,T$E.visible=T$C,T$E.index=T$_);},T$_.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange);},T$_.onScrollBarChange=function(T$n){this.runCallLater(this.changeCells);var T$C=this._scrollBar.value,T$_=this._isVertical?this.repeatX:this.repeatY,T$E=this._isVertical?this.repeatY:this.repeatX,T$y=Math.floor(T$C/this._cellSize);if(this.cacheContent)T$c=T$E+1,this._createdLine-T$y<T$c&&(this._createItems(this._createdLine,T$_,this._createdLine+T$c),this.renderItems(this._createdLine*T$_,0),this._createdLine+=T$c);else{var T$p=T$y*T$_,T$c=0;if(T$p>this._startIndex){T$c=T$p-this._startIndex;var T$l=!0,T$W=this._startIndex+T$_*(T$E+1);this._isMoved=!0;}else T$p<this._startIndex&&(T$c=this._startIndex-T$p,T$l=!1,T$W=this._startIndex-1,this._isMoved=!0);for(var T$q=0;T$q<T$c;T$q++){if(T$l){var T$J=this._cells.shift();this._cells[this._cells.length]=T$J;var T$j=T$W+T$q;}else T$J=this._cells.pop(),this._cells.unshift(T$J),T$j=T$W-T$q;var T$P=Math.floor(T$j/T$_)*this._cellSize;this._isVertical?T$J.y=T$P:T$J.x=T$P,this.renderItem(T$J,T$j);}this._startIndex=T$p,this.changeSelectStatus();}var T$x=this._content.scrollRect;this._isVertical?(T$x.y=T$C-this._offset.y,T$x.x=-this._offset.x):(T$x.y=-this._offset.y,T$x.x=T$C-this._offset.x),this._content.scrollRect=T$x;},T$_.posCell=function(T$n,T$C){if(this._scrollBar){var T$_=this._isVertical?this.repeatX:this.repeatY,T$E=(this._isVertical?this.repeatY:this.repeatX,Math.floor(T$C/T$_)*this._cellSize);this._isVertical?T$n.y=T$E:T$n.x=T$E;}},T$_.changeSelectStatus=function(){for(var T$n=0,T$C=this._cells.length;T$n<T$C;T$n++)this.changeCellState(this._cells[T$n],this._selectedIndex===this._startIndex+T$n,1);},T$_.renderItems=function(T$n,T$C){void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=0);for(var T$_=T$n,T$E=T$C||this._cells.length;T$_<T$E;T$_++)this.renderItem(this._cells[T$_],this._startIndex+T$_);this.changeSelectStatus(),this._twDone=!0;},T$_.renderItem=function(T$n,T$C){this._array&&0<=T$C&&T$C<this._array.length?(T$n.visible=!0,T$n._$bindData?(T$n._dataSource=this._array[T$C],this._bindData(T$n,this._array[T$C])):T$n.dataSource=this._array[T$C],this.cacheContent||this.posCell(T$n,T$C),this.hasListener("render")&&this.event("render",[T$n,T$C]),this.renderHandler&&this.renderHandler.runWith([T$n,T$C]),this.renderTwHandler&&this.renderTwHandler.runWith([T$n,T$C])):(T$n.visible=!1,T$n.dataSource=null);},T$_._bindData=function(T$n,T$C){for(var T$_=T$n._$bindData,T$E=0,T$y=T$_.length;T$E<T$y;T$E++){var T$p=T$_[T$E++],T$c=T$_[T$E++],T$l=T$_[T$E],T$W=T$M.getBindFun(T$l);T$p[T$c]=T$W.call(this,T$C);}},T$_.refresh=function(){this.array=this._array;},T$_.getItem=function(T$n){return-1<T$n&&T$n<this._array.length?this._array[T$n]:null;},T$_.changeItem=function(T$n,T$C){-1<T$n&&T$n<this._array.length&&(this._array[T$n]=T$C,T$n>=this._startIndex&&T$n<this._startIndex+this._cells.length&&this.renderItem(this.getCell(T$n),T$n));},T$_.setItem=function(T$n,T$C){this.changeItem(T$n,T$C);},T$_.addItem=function(T$n){this._array.push(T$n),this.array=this._array;},T$_.addItemAt=function(T$n,T$C){this._array.splice(T$C,0,T$n),this.array=this._array;},T$_.deleteItem=function(T$n){this._array.splice(T$n,1),this.array=this._array;},T$_.getCell=function(T$n){return this.runCallLater(this.changeCells),-1<T$n&&this._cells?this._cells[(T$n-this._startIndex)%this._cells.length]:null;},T$_.scrollTo=function(T$n){if(this._scrollBar){var T$C=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(T$n/T$C)*this._cellSize;}else this.startIndex=T$n;},T$_.tweenTo=function(T$n,T$C,T$_){if(void 0===T$C&&(T$C=200),this._scrollBar){var T$E=this._isVertical?this.repeatX:this.repeatY;T$T.to(this._scrollBar,{value:Math.floor(T$n/T$E)*this._cellSize},T$C,null,T$_,0,!0);}else this.startIndex=T$n,T$_&&T$_.run();},T$_._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells));},T$_.commitMeasure=function(){this.runCallLater(this.changeCells);},T$c(0,T$_,"cacheAs",T$n.prototype._$get_cacheAs,function(T$n){T$r.superSet(T$H,this,"cacheAs",T$n),this._scrollBar&&(this._$P.cacheAs=null,"none"!==T$n?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart));}),T$c(0,T$_,"content",function(){return this._content;}),T$c(0,T$_,"height",T$n.prototype._$get_height,function(T$n){T$n!=this._height&&(T$r.superSet(T$H,this,"height",T$n),this._setCellChanged());}),T$c(0,T$_,"itemRender",function(){return this._itemRender;},function(T$n){if(this._itemRender!=T$n){this._itemRender=T$n;for(var T$C=this._cells.length-1;-1<T$C;T$C--)this._cells[T$C].destroy();this._cells.length=0,this._setCellChanged();}}),T$c(0,T$_,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null;},function(T$n){this._removePreScrollBar();var T$C=new T$Cn();T$C.name="scrollBar",T$C.right=0,T$n&&" "!=T$n&&(T$C.skin=T$n),this.scrollBar=T$C,this.addChild(T$C),this._setCellChanged();}),T$c(0,T$_,"page",function(){return this._page;},function(T$n){this._page=T$n,this._array&&(this._page=0<T$n?T$n:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY);}),T$c(0,T$_,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null;},function(T$n){this._removePreScrollBar();var T$C=new T$v();T$C.name="scrollBar",T$C.bottom=0,T$n&&" "!=T$n&&(T$C.skin=T$n),this.scrollBar=T$C,this.addChild(T$C),this._setCellChanged();}),T$c(0,T$_,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1;},function(T$n){this._repeatX=T$n,this._setCellChanged();}),T$c(0,T$_,"scrollBar",function(){return this._scrollBar;},function(T$n){this._scrollBar!=T$n&&(this._scrollBar=T$n)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange));}),T$c(0,T$_,"width",T$n.prototype._$get_width,function(T$n){T$n!=this._width&&(T$r.superSet(T$H,this,"width",T$n),this._setCellChanged());}),T$c(0,T$_,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1;},function(T$n){this._repeatY=T$n,this._setCellChanged();}),T$c(0,T$_,"spaceX",function(){return this._spaceX;},function(T$n){this._spaceX=T$n,this._setCellChanged();}),T$c(0,T$_,"spaceY",function(){return this._spaceY;},function(T$n){this._spaceY=T$n,this._setCellChanged();}),T$c(0,T$_,"selectedIndex",function(){return this._selectedIndex;},function(T$n){this._selectedIndex!=T$n&&(this._selectedIndex=T$n,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(T$n),this.startIndex=this._startIndex);}),T$c(0,T$_,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null;},function(T$n){this.selectedIndex=this._array.indexOf(T$n);}),T$c(0,T$_,"length",function(){return this._array?this._array.length:0;}),T$c(0,T$_,"selection",function(){return this.getCell(this._selectedIndex);},function(T$n){this.selectedIndex=this._startIndex+this._cells.indexOf(T$n);}),T$c(0,T$_,"startIndex",function(){return this._startIndex;},function(T$n){this._startIndex=0<T$n?T$n:0,this.callLater(this.renderItems);}),T$c(0,T$_,"twSwitch",function(){return this._twSwitch;},function(T$n){this._twSwitch=T$n;}),T$c(0,T$_,"twDone",function(){return this._twDone;},function(T$n){this._twDone=T$n;}),T$c(0,T$_,"array",function(){return this._array;},function(T$n){this.runCallLater(this.changeCells),this._array=T$n||[];var T$C=this._array.length;if(this.totalPage=Math.ceil(T$C/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<T$C?this._selectedIndex:T$C-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var T$_=this._isVertical?this.repeatX:this.repeatY,T$E=this._isVertical?this.repeatY:this.repeatX,T$y=Math.ceil(T$C/T$_);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=T$E/T$y,this._scrollBar.setScroll(0,(T$y-T$E)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content;}}),T$c(0,T$_,"dataSource",T$n.prototype._$get_dataSource,function(T$n){"number"==typeof(this._dataSource=T$n)&&Math.floor(T$n)==T$n||"string"==typeof T$n?this.selectedIndex=parseInt(T$n):T$n instanceof Array?this.array=T$n:T$r.superSet(T$H,this,"dataSource",T$n);}),T$c(0,T$_,"cells",function(){return this.runCallLater(this.changeCells),this._cells;}),T$C;}(T$H),T$v=function(T$n){function T$C(){T$C.__super.call(this);}return T$p(T$C,"laya.ui.HScrollBar",T$n),T$C.prototype.initialize=function(){T$n.prototype.initialize.call(this),this.slider.isVertical=!1;},T$C;}(T$e),T$R=function(T$n){function T$C(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,T$C.__super.call(this),this.width=this.height=100;}T$p(T$C,"laya.ui.Panel",T$n);var T$_=T$C.prototype;return T$_.destroy=function(T$n){void 0===T$n&&(T$n=!0),laya.ui.Component.prototype.destroy.call(this,T$n),this._content&&this._content.destroy(T$n),this._vScrollBar&&this._vScrollBar.destroy(T$n),this._hScrollBar&&this._hScrollBar.destroy(T$n),this._vScrollBar=null,this._hScrollBar=null,this._content=null;},T$_.destroyChildren=function(){this._content.destroyChildren();},T$_.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new T$H());},T$_.addChild=function(T$n){return T$n.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(T$n);},T$_.onResize=function(){this._setScrollChanged();},T$_.addChildAt=function(T$n,T$C){return T$n.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(T$n,T$C);},T$_.removeChild=function(T$n){return T$n.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(T$n);},T$_.removeChildAt=function(T$n){return this.getChildAt(T$n).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(T$n);},T$_.removeChildren=function(T$n,T$C){return void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=2147483647),this._content.removeChildren(T$n,T$C),this._setScrollChanged(),this;},T$_.getChildAt=function(T$n){return this._content.getChildAt(T$n);},T$_.getChildByName=function(T$n){return this._content.getChildByName(T$n);},T$_.getChildIndex=function(T$n){return this._content.getChildIndex(T$n);},T$_.changeScroll=function(){this._scrollChanged=!1;var T$n=this.contentWidth||1,T$C=this.contentHeight||1,T$_=this._vScrollBar,T$E=this._hScrollBar,T$y=T$_&&T$C>this._height,T$p=T$E&&T$n>this._width,T$c=T$y?this._width-T$_.width:this._width,T$l=T$p?this._height-T$E.height:this._height;T$_&&(T$_.x=this._width-T$_.width,T$_.y=0,T$_.height=this._height-(T$p?T$E.height:0),T$_.scrollSize=Math.max(.033*this._height,1),T$_.thumbPercent=T$l/T$C,T$_.setScroll(0,T$C-T$l,T$_.value)),T$E&&(T$E.x=0,T$E.y=this._height-T$E.height,T$E.width=this._width-(T$y?T$_.width:0),T$E.scrollSize=Math.max(.033*this._width,1),T$E.thumbPercent=T$c/T$n,T$E.setScroll(0,T$n-T$c,T$E.value));},T$_.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height);},T$_.setContentSize=function(T$n,T$C){var T$_=this._content;T$_.width=T$n,T$_.height=T$C,T$_.scrollRect||(T$_.scrollRect=new T$d()),T$_.scrollRect.setTo(0,0,T$n,T$C),T$_.scrollRect=T$_.scrollRect;},T$_.onScrollBarChange=function(T$n){var T$C=this._content.scrollRect;if(T$C){var T$_=Math.round(T$n.value);T$n.isVertical?T$C.y=T$_:T$C.x=T$_,this._content.scrollRect=T$C;}},T$_.scrollTo=function(T$n,T$C){void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=0),this.vScrollBar&&(this.vScrollBar.value=T$C),this.hScrollBar&&(this.hScrollBar.value=T$n);},T$_.refresh=function(){this.changeScroll();},T$_.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=T$r.superGet(T$H,this,"cacheAs")),T$r.superSet(T$H,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd);},T$_.onScrollEnd=function(){T$r.superSet(T$H,this,"cacheAs",this._$P.cacheAs);},T$_._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll));},T$c(0,T$_,"numChildren",function(){return this._content.numChildren;}),T$c(0,T$_,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null;},function(T$n){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new T$v()),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=T$n;}),T$c(0,T$_,"contentWidth",function(){for(var T$n=0,T$C=this._content.numChildren-1;-1<T$C;T$C--){var T$_=this._content.getChildAt(T$C);T$n=Math.max(T$_.x+T$_.width*T$_.scaleX,T$n);}return T$n;}),T$c(0,T$_,"contentHeight",function(){for(var T$n=0,T$C=this._content.numChildren-1;-1<T$C;T$C--){var T$_=this._content.getChildAt(T$C);T$n=Math.max(T$_.y+T$_.height*T$_.scaleY,T$n);}return T$n;}),T$c(0,T$_,"width",T$n.prototype._$get_width,function(T$n){T$r.superSet(T$H,this,"width",T$n),this._setScrollChanged();}),T$c(0,T$_,"hScrollBar",function(){return this._hScrollBar;}),T$c(0,T$_,"content",function(){return this._content;}),T$c(0,T$_,"height",T$n.prototype._$get_height,function(T$n){T$r.superSet(T$H,this,"height",T$n),this._setScrollChanged();}),T$c(0,T$_,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null;},function(T$n){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new T$Cn()),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=T$n;}),T$c(0,T$_,"vScrollBar",function(){return this._vScrollBar;}),T$c(0,T$_,"cacheAs",T$n.prototype._$get_cacheAs,function(T$n){T$r.superSet(T$H,this,"cacheAs",T$n),this._$P.cacheAs=null,"none"!==T$n?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart));}),T$C;}(T$H),T$z=function(T$n){function T$C(T$n){T$C.__super.call(this,T$n),this.isVertical=!1;}return T$p(T$C,"laya.ui.HSlider",T$G),T$C;}(),T$U=function(T$n){function T$_(T$n,T$C){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,T$_.__super.call(this),this.skin=T$C,this.labels=T$n;}T$p(T$_,"laya.ui.UIGroup",T$n);var T$C=T$_.prototype;return T$r.imps(T$C,{"laya.ui.IItem":!0}),T$C.preinitialize=function(){this.mouseEnabled=!0;},T$C.destroy=function(T$n){void 0===T$n&&(T$n=!0),laya.ui.Component.prototype.destroy.call(this,T$n),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null;},T$C.addItem=function(T$n,T$C){void 0===T$C&&(T$C=!0);var T$_=T$n,T$E=this._items.length;if(T$_.name="item"+T$E,this.addChild(T$_),this.initItems(),T$C&&0<T$E){var T$y=this._items[T$E-1];"horizontal"==this._direction?T$_.x=T$y.x+T$y.width+this._space:T$_.y=T$y.y+T$y.height+this._space;}else T$C&&(T$_.x=0,T$_.y=0);return T$E;},T$C.delItem=function(T$n,T$C){void 0===T$C&&(T$C=!0);var T$_=this._items.indexOf(T$n);if(-1!=T$_){var T$E=T$n;this.removeChild(T$E);for(var T$y=T$_+1,T$p=this._items.length;T$y<T$p;T$y++){var T$c=this._items[T$y];T$c.name="item"+(T$y-1),T$C&&("horizontal"==this._direction?T$c.x-=T$E.width+this._space:T$c.y-=T$E.height+this._space);}if(this.initItems(),-1<this._selectedIndex){var T$l;T$l=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=T$l;}}},T$C.initItems=function(){this._items||(this._items=[]);for(var T$n=this._items.length=0;T$n<1e4;T$n++){var T$C=this.getChildByName("item"+T$n);if(null==T$C)break;this._items.push(T$C),T$C.selected=T$n===this._selectedIndex,T$C.clickHandler=T$P.create(this,this.itemClick,[T$n],!1);}},T$C.itemClick=function(T$n){this.selectedIndex=T$n;},T$C.setSelect=function(T$n,T$C){this._items&&-1<T$n&&T$n<this._items.length&&(this._items[T$n].selected=T$C);},T$C.createItem=function(T$n,T$C){return null;},T$C.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var T$n=0,T$C=0,T$_=this._items.length;T$C<T$_;T$C++){var T$E=this._items[T$C];this._skin&&(T$E.skin=this._skin),this._labelColors&&(T$E.labelColors=this._labelColors),this._labelSize&&(T$E.labelSize=this._labelSize),this._labelStroke&&(T$E.labelStroke=this._labelStroke),this._labelStrokeColor&&(T$E.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(T$E.strokeColors=this._strokeColors),this._labelBold&&(T$E.labelBold=this._labelBold),this._labelPadding&&(T$E.labelPadding=this._labelPadding),this._labelAlign&&(T$E.labelAlign=this._labelAlign),this._stateNum&&(T$E.stateNum=this._stateNum),this._labelFont&&(T$E.labelFont=this._labelFont),"horizontal"===this._direction?(T$E.y=0,T$E.x=T$n,T$n+=T$E.width+this._space):(T$E.x=0,T$E.y=T$n,T$n+=T$E.height+this._space);}this.changeSize();},T$C.commitMeasure=function(){this.runCallLater(this.changeLabels);},T$C._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels));},T$c(0,T$C,"labelStrokeColor",function(){return this._labelStrokeColor;},function(T$n){this._labelStrokeColor!=T$n&&(this._labelStrokeColor=T$n,this._setLabelChanged());}),T$c(0,T$C,"skin",function(){return this._skin;},function(T$n){this._skin!=T$n&&(this._skin=T$n,this._setLabelChanged());}),T$c(0,T$C,"selectedIndex",function(){return this._selectedIndex;},function(T$n){this._selectedIndex!=T$n&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=T$n,this.setSelect(T$n,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex));}),T$c(0,T$C,"labels",function(){return this._labels;},function(T$n){if(this._labels!=T$n){if(this._labels=T$n,this.removeChildren(),this._setLabelChanged(),this._labels)for(var T$C=this._labels.split(","),T$_=0,T$E=T$C.length;T$_<T$E;T$_++){var T$y=this.createItem(this._skin,T$C[T$_]);T$y.name="item"+T$_,this.addChild(T$y);}this.initItems();}}),T$c(0,T$C,"strokeColors",function(){return this._strokeColors;},function(T$n){this._strokeColors!=T$n&&(this._strokeColors=T$n,this._setLabelChanged());}),T$c(0,T$C,"labelColors",function(){return this._labelColors;},function(T$n){this._labelColors!=T$n&&(this._labelColors=T$n,this._setLabelChanged());}),T$c(0,T$C,"labelStroke",function(){return this._labelStroke;},function(T$n){this._labelStroke!=T$n&&(this._labelStroke=T$n,this._setLabelChanged());}),T$c(0,T$C,"labelSize",function(){return this._labelSize;},function(T$n){this._labelSize!=T$n&&(this._labelSize=T$n,this._setLabelChanged());}),T$c(0,T$C,"stateNum",function(){return this._stateNum;},function(T$n){this._stateNum!=T$n&&(this._stateNum=T$n,this._setLabelChanged());}),T$c(0,T$C,"labelBold",function(){return this._labelBold;},function(T$n){this._labelBold!=T$n&&(this._labelBold=T$n,this._setLabelChanged());}),T$c(0,T$C,"labelFont",function(){return this._labelFont;},function(T$n){this._labelFont!=T$n&&(this._labelFont=T$n,this._setLabelChanged());}),T$c(0,T$C,"labelPadding",function(){return this._labelPadding;},function(T$n){this._labelPadding!=T$n&&(this._labelPadding=T$n,this._setLabelChanged());}),T$c(0,T$C,"direction",function(){return this._direction;},function(T$n){this._direction=T$n,this._setLabelChanged();}),T$c(0,T$C,"space",function(){return this._space;},function(T$n){this._space=T$n,this._setLabelChanged();}),T$c(0,T$C,"items",function(){return this._items;}),T$c(0,T$C,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null;},function(T$n){this.selectedIndex=this._items.indexOf(T$n);}),T$c(0,T$C,"dataSource",T$n.prototype._$get_dataSource,function(T$n){"number"==typeof(this._dataSource=T$n)&&Math.floor(T$n)==T$n||"string"==typeof T$n?this.selectedIndex=parseInt(T$n):T$n instanceof Array?this.labels=T$n.join(","):T$r.superSet(T$H,this,"dataSource",T$n);}),T$_;}(T$H),T$K=function(T$C){function T$_(T$n,T$C){this._value=null,void 0===T$C&&(T$C=""),T$_.__super.call(this,T$n,T$C);}T$p(T$_,"laya.ui.Radio",T$C);var T$n=T$_.prototype;return T$n.destroy=function(T$n){void 0===T$n&&(T$n=!0),T$C.prototype.destroy.call(this,T$n),this._value=null;},T$n.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1;},T$n.initialize=function(){T$C.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick);},T$n.onClick=function(T$n){this.selected=!0;},T$c(0,T$n,"value",function(){return null!=this._value?this._value:this.label;},function(T$n){this._value=T$n;}),T$_;}(T$X),T$D=function(T$n){function T$C(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,T$C.__super.call(this),this.width=this.height=200;}T$p(T$C,"laya.ui.Tree",T$n);var T$_=T$C.prototype;return T$r.imps(T$_,{"laya.ui.IRender":!0}),T$_.destroy=function(T$n){void 0===T$n&&(T$n=!0),laya.ui.Component.prototype.destroy.call(this,T$n),this._list&&this._list.destroy(T$n),this._list=null,this._source=null,this._renderHandler=null;},T$_.createChildren=function(){this.addChild(this._list=new T$h()),this._list.renderHandler=T$P.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange);},T$_.onListChange=function(T$n){this.event("change");},T$_.getArray=function(){var T$n,T$C=[];for(var T$_ in this._source)T$n=this._source[T$_],this.getParentOpenStatus(T$n)&&(T$n.x=this._spaceLeft*this.getDepth(T$n),T$C.push(T$n));return T$C;},T$_.getDepth=function(T$n,T$C){return void 0===T$C&&(T$C=0),null==T$n.nodeParent?T$C:this.getDepth(T$n.nodeParent,T$C+1);},T$_.getParentOpenStatus=function(T$n){var T$C=T$n.nodeParent;return null==T$C||!!T$C.isOpen&&(null==T$C.nodeParent||this.getParentOpenStatus(T$C));},T$_.renderItem=function(T$n,T$C){var T$_=T$n.dataSource;if(T$_){T$n.left=T$_.x;var T$E=T$n.getChildByName("arrow");T$E&&(T$_.hasChild?(T$E.visible=!0,T$E.index=T$_.isOpen?1:0,T$E.tag=T$C,T$E.off("click",this,this.onArrowClick),T$E.on("click",this,this.onArrowClick)):T$E.visible=!1);var T$y=T$n.getChildByName("folder");T$y&&(2==T$y.clipY?T$y.index=T$_.isDirectory?0:1:T$y.index=T$_.isDirectory?T$_.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([T$n,T$C]);}},T$_.onArrowClick=function(T$n){var T$C=T$n.currentTarget.tag;this._list.array[T$C].isOpen=!this._list.array[T$C].isOpen,this.event("open"),this._list.array=this.getArray();},T$_.setItemState=function(T$n,T$C){this._list.array[T$n]&&(this._list.array[T$n].isOpen=T$C,this._list.array=this.getArray());},T$_.fresh=function(){this._list.array=this.getArray(),this.repaint();},T$_.parseXml=function(T$n,T$C,T$_,T$E){var T$y,T$p=T$n.childNodes,T$c=T$p.length;if(!T$E){T$y={};var T$l,T$W=T$n.attributes;for(var T$q in T$W){var T$J=(T$l=T$W[T$q]).nodeName,T$j=T$l.nodeValue;T$y[T$J]="true"==T$j||"false"!=T$j&&T$j;}T$y.nodeParent=T$_,0<T$c&&(T$y.isDirectory=!0),T$y.hasChild=0<T$c,T$C.push(T$y);}for(var T$P=0;T$P<T$c;T$P++){var T$x=T$p[T$P];this.parseXml(T$x,T$C,T$y,!1);}},T$_.parseOpenStatus=function(T$n,T$C){for(var T$_=0,T$E=T$C.length;T$_<T$E;T$_++){var T$y=T$C[T$_];if(T$y.isDirectory)for(var T$p=0,T$c=T$n.length;T$p<T$c;T$p++){var T$l=T$n[T$p];if(T$l.isDirectory&&this.isSameParent(T$l,T$y)&&T$y.label==T$l.label){T$y.isOpen=T$l.isOpen;break;}}}},T$_.isSameParent=function(T$n,T$C){return null==T$n.nodeParent&&null==T$C.nodeParent||null!=T$n.nodeParent&&null!=T$C.nodeParent&&T$n.nodeParent.label==T$C.nodeParent.label&&this.isSameParent(T$n.nodeParent,T$C.nodeParent);},T$_.filter=function(T$n){if(Boolean(T$n)){var T$C=[];this.getFilterSource(this._source,T$C,T$n),this._list.array=T$C;}else this._list.array=this.getArray();},T$_.getFilterSource=function(T$n,T$C,T$_){var T$E;for(var T$y in T$_=T$_.toLocaleLowerCase(),T$n)!(T$E=T$n[T$y]).isDirectory&&-1<String(T$E.label).toLowerCase().indexOf(T$_)&&(T$E.x=0,T$C.push(T$E)),T$E.child&&0<T$E.child.length&&this.getFilterSource(T$E.child,T$C,T$_);},T$c(0,T$_,"spaceBottom",function(){return this._list.spaceY;},function(T$n){this._list.spaceY=T$n;}),T$c(0,T$_,"keepStatus",function(){return this._keepStatus;},function(T$n){this._keepStatus=T$n;}),T$c(0,T$_,"itemRender",function(){return this._list.itemRender;},function(T$n){this._list.itemRender=T$n;}),T$c(0,T$_,"array",function(){return this._list.array;},function(T$n){this._keepStatus&&this._list.array&&T$n&&this.parseOpenStatus(this._list.array,T$n),this._source=T$n,this._list.array=this.getArray();}),T$c(0,T$_,"mouseHandler",function(){return this._list.mouseHandler;},function(T$n){this._list.mouseHandler=T$n;}),T$c(0,T$_,"dataSource",T$n.prototype._$get_dataSource,function(T$n){this._dataSource=T$n,T$r.superSet(T$H,this,"dataSource",T$n);}),T$c(0,T$_,"source",function(){return this._source;}),T$c(0,T$_,"scrollBar",function(){return this._list.scrollBar;}),T$c(0,T$_,"list",function(){return this._list;}),T$c(0,T$_,"scrollBarSkin",function(){return this._list.vScrollBarSkin;},function(T$n){this._list.vScrollBarSkin=T$n;}),T$c(0,T$_,"renderHandler",function(){return this._renderHandler;},function(T$n){this._renderHandler=T$n;}),T$c(0,T$_,"selectedIndex",function(){return this._list.selectedIndex;},function(T$n){this._list.selectedIndex=T$n;}),T$c(0,T$_,"spaceLeft",function(){return this._spaceLeft;},function(T$n){this._spaceLeft=T$n;}),T$c(0,T$_,"selectedItem",function(){return this._list.selectedItem;},function(T$n){this._list.selectedItem=T$n;}),T$c(0,T$_,"width",T$n.prototype._$get_width,function(T$n){T$r.superSet(T$H,this,"width",T$n),this._list.width=T$n;}),T$c(0,T$_,"height",T$n.prototype._$get_height,function(T$n){T$r.superSet(T$H,this,"height",T$n),this._list.height=T$n;}),T$c(0,T$_,"xml",null,function(T$n){var T$C=[];this.parseXml(T$n.childNodes[0],T$C,null,!0),this.array=T$C;}),T$c(0,T$_,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null;}),T$C;}(T$H),T$nn=function(T$n){function T$C(){this._items=null,this._selectedIndex=0,T$C.__super.call(this),this._setIndexHandler=T$P.create(this,this.setIndex,null,!1);}T$p(T$C,"laya.ui.ViewStack",T$n);var T$_=T$C.prototype;return T$r.imps(T$_,{"laya.ui.IItem":!0}),T$_.setItems=function(T$n){this.removeChildren();for(var T$C=0,T$_=0,T$E=T$n.length;T$_<T$E;T$_++){var T$y=T$n[T$_];T$y&&(T$y.name="item"+T$C,this.addChild(T$y),T$C++);}this.initItems();},T$_.addItem=function(T$n){T$n.name="item"+this._items.length,this.addChild(T$n),this.initItems();},T$_.initItems=function(){this._items=[];for(var T$n=0;T$n<1e4;T$n++){var T$C=this.getChildByName("item"+T$n);if(null==T$C)break;this._items.push(T$C),T$C.visible=T$n==this._selectedIndex;}},T$_.setSelect=function(T$n,T$C){this._items&&-1<T$n&&T$n<this._items.length&&(this._items[T$n].visible=T$C);},T$_.setIndex=function(T$n){this.selectedIndex=T$n;},T$c(0,T$_,"dataSource",T$n.prototype._$get_dataSource,function(T$n){if("number"==typeof(this._dataSource=T$n)&&Math.floor(T$n)==T$n||"string"==typeof T$n)this.selectedIndex=parseInt(T$n);else for(var T$C in this._dataSource)this.hasOwnProperty(T$C)&&(this[T$C]=this._dataSource[T$C]);}),T$c(0,T$_,"selectedIndex",function(){return this._selectedIndex;},function(T$n){this._selectedIndex!=T$n&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=T$n,this.setSelect(this._selectedIndex,!0));}),T$c(0,T$_,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null;},function(T$n){this.selectedIndex=this._items.indexOf(T$n);}),T$c(0,T$_,"items",function(){return this._items;}),T$c(0,T$_,"setIndexHandler",function(){return this._setIndexHandler;},function(T$n){this._setIndexHandler=T$n;}),T$C;}(T$H),T$Cn=function(T$n){function T$C(){T$C.__super.call(this);}return T$p(T$C,"laya.ui.VScrollBar",T$e),T$C;}(),T$_n=function(T$C){function T$_(T$n){this._bg=null,this._skin=null,T$_.__super.call(this),void 0===T$n&&(T$n=""),this.text=T$n,this.skin=this.skin;}T$p(T$_,"laya.ui.TextInput",T$C);var T$n=T$_.prototype;return T$n.preinitialize=function(){this.mouseEnabled=!0;},T$n.destroy=function(T$n){T$a.clearCache(this,this._skin),void 0===T$n&&(T$n=!0),T$C.prototype.destroy.call(this,T$n),this._bg&&this._bg.destroy(),this._bg=null;},T$n.createChildren=function(){this.addChild(this._tf=new T$x()),this._tf.padding=T$S.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus);},T$n._onFocus=function(){this.event("focus",this);},T$n._onBlur=function(){this.event("blur",this);},T$n._onInput=function(){this.event("input",this);},T$n._onEnter=function(){this.event("enter",this);},T$n.initialize=function(){this.width=128,this.height=22;},T$n.select=function(){this._tf.select();},T$n.setSelection=function(T$n,T$C){this._tf.setSelection(T$n,T$C);},T$c(0,T$n,"text",T$C.prototype._$get_text,function(T$n){this._tf.text!=T$n&&(T$n+="",this._tf.text=T$n,this.event("change"));}),T$c(0,T$n,"bg",function(){return this._bg;},function(T$n){this.graphics=this._bg=T$n;}),T$c(0,T$n,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster;},function(T$n){this._tf.inputElementYAdjuster=T$n;}),T$c(0,T$n,"multiline",function(){return this._tf.multiline;},function(T$n){this._tf.multiline=T$n;}),T$c(0,T$n,"skin",function(){return this._skin;},function(T$n){this._skin!=T$n&&(T$a.clearCache(this,this._skin),this._skin=T$n,this._bg||(this.graphics=this._bg=new T$B()),T$a.keepCache(this,this._skin),this._bg.source=T$a.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height));}),T$c(0,T$n,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null;},function(T$n){this._bg||(this.graphics=this._bg=new T$B()),this._bg.sizeGrid=T$M.fillArray(T$S.defaultSizeGrid,T$n,Number);}),T$c(0,T$n,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster;},function(T$n){this._tf.inputElementXAdjuster=T$n;}),T$c(0,T$n,"width",T$C.prototype._$get_width,function(T$n){T$r.superSet(T$u,this,"width",T$n),this._bg&&(this._bg.width=T$n);}),T$c(0,T$n,"height",T$C.prototype._$get_height,function(T$n){T$r.superSet(T$u,this,"height",T$n),this._bg&&(this._bg.height=T$n);}),T$c(0,T$n,"editable",function(){return this._tf.editable;},function(T$n){this._tf.editable=T$n;}),T$c(0,T$n,"restrict",function(){return this._tf.restrict;},function(T$n){this._tf.restrict=T$n;}),T$c(0,T$n,"prompt",function(){return this._tf.prompt;},function(T$n){this._tf.prompt=T$n;}),T$c(0,T$n,"promptColor",function(){return this._tf.promptColor;},function(T$n){this._tf.promptColor=T$n;}),T$c(0,T$n,"maxChars",function(){return this._tf.maxChars;},function(T$n){this._tf.maxChars=T$n;}),T$c(0,T$n,"focus",function(){return this._tf.focus;},function(T$n){this._tf.focus=T$n;}),T$c(0,T$n,"type",function(){return this._tf.type;},function(T$n){this._tf.type=T$n;}),T$c(0,T$n,"asPassword",function(){return this._tf.asPassword;},function(T$n){this._tf.asPassword=T$n;}),T$_;}(T$u),T$En=function(T$n){function T$C(){T$C.__super.call(this);}return T$p(T$C,"laya.ui.VSlider",T$G),T$C;}(),T$yn=function(T$n){function T$E(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,T$E.__super.call(this);}T$p(T$E,"laya.ui.Dialog",T$n);var T$C=T$E.prototype;return T$C.initialize=function(){this.popupEffect=T$E.manager.popupEffectHandler,this.closeEffect=T$E.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick);},T$C._dealDragArea=function(){var T$n=this.getChildByName("drag");T$n&&(this.dragArea=T$n.x+","+T$n.y+","+T$n.width+","+T$n.height,T$n.removeSelf());},T$C._onClick=function(T$n){var T$C=T$n.target;if(T$C)switch(T$C.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(T$C.name);}},T$C.show=function(T$n,T$C){void 0===T$n&&(T$n=!1),void 0===T$C&&(T$C=!0),this._open(!1,T$n,T$C);},T$C.popup=function(T$n,T$C){void 0===T$n&&(T$n=!1),void 0===T$C&&(T$C=!0),this._open(!0,T$n,T$C);},T$C._open=function(T$n,T$C,T$_){T$E.manager.lock(!1),this.isModal=T$n,T$E.manager.open(this,T$C,T$_);},T$C.onOpened=function(){},T$C.close=function(T$n,T$C){void 0===T$C&&(T$C=!0),T$E.manager.close(this,T$n,T$C);},T$C.onClosed=function(T$n){},T$C._onMouseDown=function(T$n){var T$C=this.getMousePoint();this._dragArea.contains(T$C.x,T$C.y)?this.startDrag():this.stopDrag();},T$c(0,T$C,"dragArea",function(){return this._dragArea?this._dragArea.toString():null;},function(T$n){if(T$n){var T$C=T$M.fillArray([0,0,0,0],T$n,Number);this._dragArea=new T$d(T$C[0],T$C[1],T$C[2],T$C[3]),this.on("mousedown",this,this._onMouseDown);}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown);}),T$c(0,T$C,"isPopup",function(){return null!=this.parent;}),T$c(0,T$C,"zOrder",T$n.prototype._$get_zOrder,function(T$n){T$r.superSet(T$Q,this,"zOrder",T$n),T$E.manager._checkMask();}),T$c(1,T$E,"manager",function(){return T$E._manager=T$E._manager||new T$g();},function(T$n){T$E._manager=T$n;}),T$E.setLockView=function(T$n){T$E.manager.setLockView(T$n);},T$E.lock=function(T$n){T$E.manager.lock(T$n);},T$E.closeAll=function(){T$E.manager.closeAll();},T$E.getDialogsByGroup=function(T$n){return T$E.manager.getDialogsByGroup(T$n);},T$E.closeByGroup=function(T$n){return T$E.manager.closeByGroup(T$n);},T$E.CLOSE="close",T$E.CANCEL="cancel",T$E.SURE="sure",T$E.NO="no",T$E.OK="ok",T$E.YES="yes",T$E._manager=null,T$E;}(T$Q),T$pn=function(T$n){function T$C(){T$C.__super.call(this);}T$p(T$C,"laya.ui.HBox",T$n);var T$_=T$C.prototype;return T$_.sortItem=function(T$n){T$n&&T$n.sort(function(T$n,T$C){return T$n.x-T$C.x;});},T$_.changeItems=function(){this._itemChanged=!1;for(var T$n=[],T$C=0,T$_=0,T$E=this.numChildren;T$_<T$E;T$_++){var T$y=this.getChildAt(T$_);T$y&&T$y.layoutEnabled&&(T$n.push(T$y),T$C=this._height?this._height:Math.max(T$C,T$y.height*T$y.scaleY));}this.sortItem(T$n);var T$p=0;for(T$_=0,T$E=T$n.length;T$_<T$E;T$_++)(T$y=T$n[T$_]).x=T$p,T$p+=T$y.width*T$y.scaleX+this._space,"top"==this._align?T$y.y=0:"middle"==this._align?T$y.y=.5*(T$C-T$y.height*T$y.scaleY):"bottom"==this._align&&(T$y.y=T$C-T$y.height*T$y.scaleY);this.changeSize();},T$c(0,T$_,"height",T$n.prototype._$get_height,function(T$n){this._height!=T$n&&(T$r.superSet(T$Z,this,"height",T$n),this.callLater(this.changeItems));}),T$C.NONE="none",T$C.TOP="top",T$C.MIDDLE="middle",T$C.BOTTOM="bottom",T$C;}(T$Z),T$cn=function(T$n){function T$C(){T$C.__super.call(this);}T$p(T$C,"laya.ui.VBox",T$n);var T$_=T$C.prototype;return T$_.changeItems=function(){this._itemChanged=!1;for(var T$n=[],T$C=0,T$_=0,T$E=this.numChildren;T$_<T$E;T$_++){var T$y=this.getChildAt(T$_);T$y&&T$y.layoutEnabled&&(T$n.push(T$y),T$C=this._width?this._width:Math.max(T$C,T$y.width*T$y.scaleX));}this.sortItem(T$n);var T$p=0;for(T$_=0,T$E=T$n.length;T$_<T$E;T$_++)(T$y=T$n[T$_]).y=T$p,T$p+=T$y.height*T$y.scaleY+this._space,"left"==this._align?T$y.x=0:"center"==this._align?T$y.x=.5*(T$C-T$y.width*T$y.scaleX):"right"==this._align&&(T$y.x=T$C-T$y.width*T$y.scaleX);this.changeSize();},T$c(0,T$_,"width",T$n.prototype._$get_width,function(T$n){this._width!=T$n&&(T$r.superSet(T$Z,this,"width",T$n),this.callLater(this.changeItems));}),T$C.NONE="none",T$C.LEFT="left",T$C.CENTER="center",T$C.RIGHT="right",T$C;}(T$Z),T$ln=function(T$n){function T$C(){T$C.__super.call(this);}return T$p(T$C,"laya.ui.RadioGroup",T$U),T$C.prototype.createItem=function(T$n,T$C){return new T$K(T$n,T$C);},T$C;}(),T$Wn=function(T$n){function T$C(){T$C.__super.call(this);}return T$p(T$C,"laya.ui.Tab",T$U),T$C.prototype.createItem=function(T$n,T$C){return new T$X(T$n,T$C);},T$C;}(),T$qn=function(T$C){function T$_(T$n){this._vScrollBar=null,this._hScrollBar=null,void 0===T$n&&(T$n=""),T$_.__super.call(this,T$n);}T$p(T$_,"laya.ui.TextArea",T$C);var T$n=T$_.prototype;return T$n.destroy=function(T$n){void 0===T$n&&(T$n=!0),T$C.prototype.destroy.call(this,T$n),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null;},T$n.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0;},T$n.onVBarChanged=function(T$n){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value);},T$n.onHBarChanged=function(T$n){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value);},T$n.changeScroll=function(){var T$n=this._vScrollBar&&0<this._tf.maxScrollY,T$C=this._hScrollBar&&0<this._tf.maxScrollX,T$_=T$n?this._width-this._vScrollBar.width:this._width,T$E=T$C?this._height-this._hScrollBar.height:this._height,T$y=this._tf.padding||T$S.labelPadding;this._tf.width=T$_,this._tf.height=T$E,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-T$y[2],this._vScrollBar.y=T$y[1],this._vScrollBar.height=this._height-(T$C?this._hScrollBar.height:0)-T$y[1]-T$y[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=T$E/Math.max(this._tf.textHeight,T$E),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=T$n),this._hScrollBar&&(this._hScrollBar.x=T$y[0],this._hScrollBar.y=this._height-this._hScrollBar.height-T$y[3],this._hScrollBar.width=this._width-(T$n?this._vScrollBar.width:0)-T$y[0]-T$y[2],this._hScrollBar.scrollSize=Math.max(.033*T$_,1),this._hScrollBar.thumbPercent=T$_/Math.max(this._tf.textWidth,T$_),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=T$C);},T$n.scrollTo=function(T$n){this.commitMeasure(),this._tf.scrollY=T$n;},T$c(0,T$n,"scrollY",function(){return this._tf.scrollY;}),T$c(0,T$n,"width",T$C.prototype._$get_width,function(T$n){T$r.superSet(T$_n,this,"width",T$n),this.callLater(this.changeScroll);}),T$c(0,T$n,"hScrollBar",function(){return this._hScrollBar;}),T$c(0,T$n,"height",T$C.prototype._$get_height,function(T$n){T$r.superSet(T$_n,this,"height",T$n),this.callLater(this.changeScroll);}),T$c(0,T$n,"maxScrollX",function(){return this._tf.maxScrollX;}),T$c(0,T$n,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null;},function(T$n){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new T$Cn()),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=T$n;}),T$c(0,T$n,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null;},function(T$n){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new T$v()),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=T$n;}),T$c(0,T$n,"vScrollBar",function(){return this._vScrollBar;}),T$c(0,T$n,"maxScrollY",function(){return this._tf.maxScrollY;}),T$c(0,T$n,"scrollX",function(){return this._tf.scrollX;}),T$_;}(T$_n);!function(T$n){function T$C(){this._uiView=null,this.isCloseOther=!1,T$C.__super.call(this);}T$p(T$C,"laya.ui.AsynDialog",T$yn);var T$_=T$C.prototype;T$_.createView=function(T$n){this._uiView=T$n;},T$_._open=function(T$n,T$C,T$_){this.isModal=T$n,this.isCloseOther=T$C,T$yn.manager.lock(!0),this._uiView?this.onCreated():this.onOpen();},T$_.onCreated=function(){this.createUI(),this.onOpen();},T$_.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea();},T$_.onOpen=function(){T$yn.manager.open(this,this.isCloseOther),T$yn.manager.lock(!1);},T$_.close=function(T$n,T$C){void 0===T$C&&(T$C=!0),T$yn.manager.close(this),this.onClose();},T$_.onClose=function(){},T$_.destroy=function(T$n){void 0===T$n&&(T$n=!0),laya.ui.View.prototype.destroy.call(this,T$n),this._uiView=null,this.onDestroy();},T$_.onDestroy=function(){};}();T$r.__init([T$Q]);}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$n,T$C){"use strict";for(var T$_ in Object.defineProperty(T$C,"__esModule",{value:!0}),Laya){var T$E=Laya[T$_];T$E&&T$E.__isclass&&(T$C[T$_]=T$E);}}),function(T$P,T$n,T$k){T$k.un,T$k.uns;var T$j=T$k.static,T$x=T$k.class,T$b=T$k.getset,T$E=T$k.__newvec,T$A=laya.maths.Arith,T$c=laya.webgl.atlas.AtlasResourceManager,T$_=laya.webgl.shader.BaseShader,T$V=laya.utils.Browser,T$l=laya.webgl.utils.Buffer,T$t=laya.utils.Byte,T$y=laya.utils.ClassUtils,T$W=T$k.Config,T$p=(laya.events.Event,laya.events.EventDispatcher),T$S=laya.utils.Handler,T$d=laya.net.Loader,T$C=laya.net.LoaderManager,T$q=(laya.maths.MathUtil,laya.display.Node),T$r=laya.renders.Render,T$J=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),T$m=laya.resource.Resource,T$a=laya.utils.RunDriver,T$O=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),T$T=laya.display.Sprite,T$Y=laya.utils.Stat,T$s=laya.utils.StringKey,T$M=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),T$N=laya.utils.Utils,T$w=laya.webgl.WebGL,T$B=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;T$k.interface("laya.d3.core.IClone"),T$k.interface("laya.d3.graphics.IVertex"),T$k.interface("laya.d3.core.render.IUpdate"),T$k.interface("laya.d3.core.scene.ITreeNode"),T$k.interface("laya.d3.core.render.IRenderable");(function(){function T$X(){}T$x(T$X,"laya.d3.animation.AnimationClipParser01"),T$X.READ_DATA=function(){T$X._DATA.offset=T$X._reader.getUint32(),T$X._DATA.size=T$X._reader.getUint32();},T$X.READ_BLOCK=function(){for(var T$n=T$X._BLOCK.count=T$X._reader.getUint16(),T$C=T$X._BLOCK.blockStarts=[],T$_=T$X._BLOCK.blockLengths=[],T$E=0;T$E<T$n;T$E++)T$C.push(T$X._reader.getUint32()),T$_.push(T$X._reader.getUint32());},T$X.READ_STRINGS=function(){var T$n=T$X._reader.getUint32(),T$C=T$X._reader.getUint16(),T$_=T$X._reader.pos;T$X._reader.pos=T$n+T$X._DATA.offset;for(var T$E=0;T$E<T$C;T$E++)T$X._strings[T$E]=T$X._reader.readUTFString();T$X._reader.pos=T$_;},T$X.parse=function(T$n,T$C){T$X._animationClip=T$n;(T$X._reader=T$C).__getBuffer();T$X.READ_DATA(),T$X.READ_BLOCK(),T$X.READ_STRINGS();for(var T$_=0,T$E=T$X._BLOCK.count;T$_<T$E;T$_++){var T$y=T$C.getUint16(),T$p=T$X._strings[T$y],T$c=T$X["READ_"+T$p];if(null==T$c)throw new Error("model file err,no this function:"+T$y+" "+T$p);T$c.call();}},T$X.READ_ANIMATIONS=function(){var T$n,T$C=0,T$_=0,T$E=T$X._reader,T$y=T$E.__getBuffer(),T$p=[],T$c=T$E.getUint8();for(T$p.length=T$c,T$C=0;T$C<T$c;T$C++)T$p[T$C]=T$E.getUint16();var T$l=[],T$W=T$E.getUint16();for(T$l.length=T$W,T$C=0;T$C<T$W;T$C++)T$l[T$C]=T$E.getFloat32();var T$q=T$X._animationClip;T$q.name=T$X._strings[T$E.getUint16()];var T$J=T$q._duration=T$E.getFloat32();T$q.islooping=!!T$E.getByte(),T$q._frameRate=T$E.getInt16();var T$j=T$E.getInt16(),T$P=T$q._nodes=new Array();T$P.length=T$j,(T$q._publicClipDatas=[]).length=T$j;var T$x=T$q._nodesMap={},T$b=0,T$r=0;for(T$C=0;T$C<T$j;T$C++){T$n=T$P[T$C]=new T$o();var T$m=T$E.getUint16(),T$d=T$n.path=[];for(T$d.length=T$m,T$_=0;T$_<T$m;T$_++)T$d[T$_]=T$X._strings[T$E.getUint16()];var T$a=T$d.join("/"),T$O=T$x[T$a];T$O||(T$x[T$a]=T$O=[]),T$O.push(T$n);var T$A=T$E.getInt16();-1!==T$A&&(T$n.componentType=T$X._strings[T$A]);var T$k=T$F._propertyIndexDic[T$X._strings[T$E.getUint16()]];if(null==T$k)throw new Error("AnimationClipParser01:unknown property name.");var T$t=T$k<4,T$T=!T$t||T$t&&""===T$d[0];(T$n._cacheProperty=T$T)?T$b++:T$r++,T$n.propertyNameID=T$k;var T$Y=T$p[T$E.getUint8()];T$n.keyFrameWidth=T$Y/4;var T$s=T$n.keyFrames=[],T$N=T$s.length=T$E.getUint16(),T$S=null,T$M=NaN;for(T$_=0;T$_<T$N;T$_++){var T$w=T$s[T$_]=new T$u();T$M=T$w.startTime=T$l[T$E.getUint16()];var T$B=T$E.pos;T$w.inTangent=new Float32Array(T$y.slice(T$B,T$B+T$Y)),T$E.pos+=T$Y,T$B=T$E.pos,T$w.outTangent=new Float32Array(T$y.slice(T$B,T$B+T$Y)),T$E.pos+=T$Y,T$B=T$E.pos,T$w.data=new Float32Array(T$y.slice(T$B,T$B+T$Y)),T$E.pos+=T$Y,T$S&&(T$S.next=T$w,T$S.duration=T$M-T$S.startTime),T$S=T$w;}T$w.next=null,T$w.duration=T$J-T$M;}var T$V=T$q._nodeToCachePropertyMap=new Int32Array(T$j),T$g=T$q._cachePropertyMap=new Int32Array(T$b),T$H=T$q._unCachePropertyMap=new Int32Array(T$r);for(T$b=T$r=0,T$C=0;T$C<T$j;T$C++)(T$n=T$P[T$C])._cacheProperty?(T$V[T$C]=T$b,T$g[T$b++]=T$C):T$H[T$r++]=T$C;},T$X._animationClip=null,T$X._reader=null,T$X._strings=[],T$j(T$X,["_BLOCK",function(){return this._BLOCK={count:0};},"_DATA",function(){return this._DATA={offset:0,size:0};}]);})(),function(){function T$e(){}T$x(T$e,"laya.d3.animation.AnimationClipParser02"),T$e.READ_DATA=function(){T$e._DATA.offset=T$e._reader.getUint32(),T$e._DATA.size=T$e._reader.getUint32();},T$e.READ_BLOCK=function(){for(var T$n=T$e._BLOCK.count=T$e._reader.getUint16(),T$C=T$e._BLOCK.blockStarts=[],T$_=T$e._BLOCK.blockLengths=[],T$E=0;T$E<T$n;T$E++)T$C.push(T$e._reader.getUint32()),T$_.push(T$e._reader.getUint32());},T$e.READ_STRINGS=function(){var T$n=T$e._reader.getUint32(),T$C=T$e._reader.getUint16(),T$_=T$e._reader.pos;T$e._reader.pos=T$n+T$e._DATA.offset;for(var T$E=0;T$E<T$C;T$E++)T$e._strings[T$E]=T$e._reader.readUTFString();T$e._reader.pos=T$_;},T$e.parse=function(T$n,T$C){T$e._animationClip=T$n;(T$e._reader=T$C).__getBuffer();T$e.READ_DATA(),T$e.READ_BLOCK(),T$e.READ_STRINGS();for(var T$_=0,T$E=T$e._BLOCK.count;T$_<T$E;T$_++){var T$y=T$C.getUint16(),T$p=T$e._strings[T$y],T$c=T$e["READ_"+T$p];if(null==T$c)throw new Error("model file err,no this function:"+T$y+" "+T$p);T$c.call();}},T$e.READ_ANIMATIONS=function(){var T$n,T$C=0,T$_=0,T$E=T$e._reader,T$y=T$E.__getBuffer(),T$p=[],T$c=T$E.getUint8();for(T$p.length=T$c,T$C=0;T$C<T$c;T$C++)T$p[T$C]=T$E.getUint16();var T$l=[],T$W=T$E.getUint16();for(T$l.length=T$W,T$C=0;T$C<T$W;T$C++)T$l[T$C]=T$E.getFloat32();var T$q=T$e._animationClip;T$q.name=T$e._strings[T$E.getUint16()];var T$J=T$q._duration=T$E.getFloat32();T$q.islooping=!!T$E.getByte(),T$q._frameRate=T$E.getInt16();var T$j=T$E.getInt16(),T$P=T$q._nodes=new Array();T$P.length=T$j,(T$q._publicClipDatas=[]).length=T$j;var T$x=T$q._nodesMap={},T$b=0,T$r=0;for(T$C=0;T$C<T$j;T$C++){T$n=T$P[T$C]=new T$o();var T$m=T$E.getUint16(),T$d=T$n.path=[];for(T$d.length=T$m,T$_=0;T$_<T$m;T$_++)T$d[T$_]=T$e._strings[T$E.getUint16()];var T$a=T$d.join("/"),T$O=T$x[T$a];T$O||(T$x[T$a]=T$O=[]),T$O.push(T$n);var T$A=T$E.getInt16();-1!==T$A&&(T$n.componentType=T$e._strings[T$A]);var T$k=T$F._propertyIndexDic[T$e._strings[T$E.getUint16()]];if(null==T$k)throw new Error("AnimationClipParser02:unknown property name.");var T$t=T$k<4,T$T=!T$t||T$t&&""===T$d[0];(T$n._cacheProperty=T$T)?T$b++:T$r++,T$n.propertyNameID=T$k;var T$Y=T$p[T$E.getUint8()];T$n.keyFrameWidth=T$Y/4;var T$s=T$n.keyFrames=[],T$N=T$s.length=T$E.getUint16(),T$S=null,T$M=NaN;for(T$_=0;T$_<T$N;T$_++){var T$w=T$s[T$_]=new T$u();T$M=T$w.startTime=T$l[T$E.getUint16()];var T$B=T$E.pos;T$w.inTangent=new Float32Array(T$y.slice(T$B,T$B+T$Y)),T$E.pos+=T$Y,T$B=T$E.pos,T$w.outTangent=new Float32Array(T$y.slice(T$B,T$B+T$Y)),T$E.pos+=T$Y,T$B=T$E.pos,T$w.data=new Float32Array(T$y.slice(T$B,T$B+T$Y)),T$E.pos+=T$Y,T$S&&(T$S.next=T$w,T$S.duration=T$M-T$S.startTime),T$S=T$w;}T$w.next=null,T$w.duration=T$J-T$M;}var T$V=T$E.getUint16();for(T$C=0;T$C<T$V;T$C++){var T$g,T$H=new T$G();T$H.time=T$E.getFloat32(),T$H.eventName=T$e._strings[T$E.getUint16()];var T$X=T$E.getUint16();for(0<T$X&&(T$H.params=T$g=[]),T$_=0;T$_<T$X;T$_++){switch(T$E.getByte()){case 0:T$g.push(!!T$E.getByte());break;case 1:T$g.push(T$E.getInt32());break;case 2:T$g.push(T$E.getFloat32());break;case 3:T$g.push(T$e._strings[T$E.getUint16()]);break;default:throw new Error("unknown type.");}}T$q.addEvent(T$H);}var T$$=T$q._nodeToCachePropertyMap=new Int32Array(T$j),T$i=T$q._cachePropertyMap=new Int32Array(T$b),T$f=T$q._unCachePropertyMap=new Int32Array(T$r);for(T$b=T$r=0,T$C=0;T$C<T$j;T$C++)(T$n=T$P[T$C])._cacheProperty?(T$$[T$C]=T$b,T$i[T$b++]=T$C):T$f[T$r++]=T$C;},T$e._animationClip=null,T$e._reader=null,T$e._strings=[],T$j(T$e,["_BLOCK",function(){return this._BLOCK={count:0};},"_DATA",function(){return this._DATA={offset:0,size:0};}]);}();var T$G=function(){function T$n(){this.time=NaN,this.eventName=null,this.params=null;}return T$x(T$n,"laya.d3.animation.AnimationEvent"),T$n;}(),T$F=function(){function T$E(){this._childs=[],this.transform=new T$aC(this);}T$x(T$E,"laya.d3.animation.AnimationNode");var T$n=T$E.prototype;return T$k.imps(T$n,{"laya.d3.core.IClone":!0}),T$n.addChild=function(T$n){T$n._parent=this,T$n.transform.setParent(this.transform),this._childs.push(T$n);},T$n.removeChild=function(T$n){var T$C=this._childs.indexOf(T$n);-1!==T$C&&this._childs.splice(T$C,1);},T$n.getChildByName=function(T$n){for(var T$C=0,T$_=this._childs.length;T$C<T$_;T$C++){var T$E=this._childs[T$C];if(T$E.name===T$n)return T$E;}return null;},T$n.getChildByIndex=function(T$n){return this._childs[T$n];},T$n.getChildCount=function(){return this._childs.length;},T$n.cloneTo=function(T$n){var T$C=T$n;T$C.name=this.name;for(var T$_=0,T$E=this._childs.length;T$_<T$E;T$_++){var T$y=this._childs[T$_],T$p=T$y.clone();T$C.addChild(T$p);var T$c=T$y.transform,T$l=T$p.transform;T$l.setLocalPosition(T$c.getLocalPosition()),T$l.setLocalRotation(T$c.getLocalRotation()),T$l.setLocalScale(T$c.getLocalScale()),T$l._localRotationEuler=T$c._localRotationEuler,T$l._setWorldMatrixIgnoreUpdate(T$c.getWorldMatrix());}},T$n.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$E.__init__=function(){T$E.registerAnimationNodeProperty("localPosition",T$E._getLocalPosition,T$E._setLocalPosition),T$E.registerAnimationNodeProperty("localRotation",T$E._getLocalRotation,T$E._setLocalRotation),T$E.registerAnimationNodeProperty("localScale",T$E._getLocalScale,T$E._setLocalScale),T$E.registerAnimationNodeProperty("localRotationEuler",T$E._getLocalRotationEuler,T$E._setLocalRotationEuler),T$E.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",T$E._getParticleRenderSharedMaterialTintColor,T$E._setParticleRenderSharedMaterialTintColor),T$E.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",T$E._getMeshRenderSharedMaterialTilingOffset,T$E._setMeshRenderSharedMaterialTilingOffset),T$E.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",T$E._getMeshRenderSharedMaterialAlbedo,T$E._setMeshRenderSharedMaterialAlbedo),T$E.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",T$E._getSkinnedMeshRenderSharedMaterialTilingOffset,T$E._setSkinnedMeshRenderSharedMaterialTilingOffset),T$E.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",T$E._getSkinnedMeshRenderSharedMaterialAlbedo,T$E._setSkinnedMeshRenderSharedMaterialAlbedo),T$E.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",T$E._getMeshRenderSharedMaterialAlbedo,T$E._setMeshRenderSharedMaterialAlbedo),T$E.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",T$E._getSkinnedMeshRenderSharedMaterialAlbedo,T$E._setSkinnedMeshRenderSharedMaterialAlbedo),T$E.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",T$E._getMeshRenderSharedMaterialIntensity,T$E._setMeshRenderSharedMaterialIntensity),T$E.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",T$E._getMeshRenderSharedMaterialAlpha,T$E._setMeshRenderSharedMaterialAlpha),T$E.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",T$E._getMeshRenderSharedMaterialAlphaColor,T$E._setMeshRenderSharedMaterialAlphaColor),T$E.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",T$E._getMeshRenderSharedMaterialBaseColor,T$E._setMeshRenderSharedMaterialBaseColor),T$E.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",T$E._getMeshRenderSharedMaterialDissolve,T$E._setMeshRenderSharedMaterialDissolve),T$E.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",T$E._getMeshRenderSharedMaterialDissolveSpeed,T$E._setMeshRenderSharedMaterialDissolveSpeed),T$E.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",T$E._getMeshRenderSharedMaterialMMultiplier,T$E._setMeshRenderSharedMaterialMMultiplier),T$E.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",T$E._getMeshRenderSharedMaterialBaseScrollSpeedX,T$E._setMeshRenderSharedMaterialBaseScrollSpeedX),T$E.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",T$E._getMeshRenderSharedMaterialBaseScrollSpeedY,T$E._setMeshRenderSharedMaterialBaseScrollSpeedY),T$E.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",T$E._getMeshRenderSharedMaterialSecondScrollSpeedX,T$E._setMeshRenderSharedMaterialSecondScrollSpeedX),T$E.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",T$E._getMeshRenderSharedMaterialSecondScrollSpeedY,T$E._setMeshRenderSharedMaterialSecondScrollSpeedY),T$E.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",T$E._getMeshRenderSharedMaterialDetailTilingOffset,T$E._setMeshRenderSharedMaterialDetailTilingOffset),T$E.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",T$E._getMeshRenderSharedMaterialDissolveTilingOffset,T$E._setMeshRenderSharedMaterialDissolveTilingOffset),T$E.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",T$E._getMeshRenderSharedMaterialMaskTilingOffset,T$E._setMeshRenderSharedMaterialMaskTilingOffset);},T$E.registerAnimationNodeProperty=function(T$n,T$C,T$_){if(T$E._propertyIndexDic[T$n])throw new Error("AnimationNode: this propertyName has registered.");T$E._propertyIndexDic[T$n]=T$E._propertyIDCounter,T$E._propertyGetFuncs[T$E._propertyIDCounter]=T$C,T$E._propertySetFuncs[T$E._propertyIDCounter]=T$_,T$E._propertyIDCounter++;},T$E._getLocalPosition=function(T$n,T$C){return T$n?T$n.transform.getLocalPosition():T$C._transform.localPosition.elements;},T$E._setLocalPosition=function(T$n,T$C,T$_){if(T$n)T$n.transform.setLocalPosition(T$_);else{var T$E=T$C._transform,T$y=T$E.localPosition;T$y.elements=T$_,T$E.localPosition=T$y;}},T$E._getLocalRotation=function(T$n,T$C){return T$n?T$n.transform.getLocalRotation():T$C._transform.localRotation.elements;},T$E._setLocalRotation=function(T$n,T$C,T$_){if(T$n)T$n.transform.setLocalRotation(T$_);else{var T$E=T$C._transform,T$y=T$E.localRotation;T$y.elements=T$_,T$E.localRotation=T$y;}},T$E._getLocalScale=function(T$n,T$C){return T$n?T$n.transform.getLocalScale():T$C._transform.localScale.elements;},T$E._setLocalScale=function(T$n,T$C,T$_){if(T$n)T$n.transform.setLocalScale(T$_);else{var T$E=T$C._transform,T$y=T$E.localScale;T$y.elements=T$_,T$E.localScale=T$y;}},T$E._getLocalRotationEuler=function(T$n,T$C){return T$n?T$n.transform.getLocalRotationEuler():T$C._transform.localRotationEuler.elements;},T$E._setLocalRotationEuler=function(T$n,T$C,T$_){if(T$n)T$n.transform.setLocalRotationEuler(T$_);else{var T$E=T$C._transform,T$y=T$E.localRotationEuler;T$y.elements=T$_,T$E.localRotationEuler=T$y;}},T$E._getMeshRenderSharedMaterialTilingOffset=function(T$n,T$C){if(T$n){var T$_=T$n.transform._entity;return T$_?T$_.owner.meshRender.sharedMaterial.tilingOffset.elements:null;}return T$C.meshRender.sharedMaterial.tilingOffset.elements;},T$E._setMeshRenderSharedMaterialTilingOffset=function(T$n,T$C,T$_){var T$E,T$y;if(T$n){var T$p=T$n.transform._entity;T$p&&((T$y=(T$E=T$p.owner.meshRender.material).tilingOffset).elements=T$_,T$E.tilingOffset=T$y);}else(T$y=(T$E=T$C.meshRender.material).tilingOffset).elements=T$_,T$E.tilingOffset=T$y;},T$E._getMeshRenderSharedMaterialAlbedo=function(T$n,T$C){if(T$n){var T$_=T$n.transform._entity;return T$_?T$_.owner.meshRender.sharedMaterial.albedoColor.elements:null;}return T$C.meshRender.sharedMaterial.albedoColor.elements;},T$E._setMeshRenderSharedMaterialAlbedo=function(T$n,T$C,T$_){var T$E,T$y;if(T$n){var T$p=T$n.transform._entity;T$p&&((T$y=(T$E=T$p.owner.meshRender.material).albedoColor).elements=T$_,T$E.albedoColor=T$y);}else(T$y=(T$E=T$C.meshRender.material).albedoColor).elements=T$_,T$E.albedoColor=T$y;},T$E._getSkinnedMeshRenderSharedMaterialTilingOffset=function(T$n,T$C){if(T$n){var T$_=T$n.transform._entity;return T$_?T$_.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null;}return T$C.skinnedMeshRender.sharedMaterial.tilingOffset.elements;},T$E._setSkinnedMeshRenderSharedMaterialTilingOffset=function(T$n,T$C,T$_){var T$E,T$y;if(T$n){var T$p=T$n.transform._entity;T$p&&((T$y=(T$E=T$p.owner.skinnedMeshRender.material).tilingOffset).elements=T$_,T$E.tilingOffset=T$y);}else(T$y=(T$E=T$C.skinnedMeshRender.material).tilingOffset).elements=T$_,T$E.tilingOffset=T$y;},T$E._getSkinnedMeshRenderSharedMaterialAlbedo=function(T$n,T$C){if(T$n){var T$_=T$n.transform._entity;return T$_?T$_.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null;}return T$C.skinnedMeshRender.sharedMaterial.albedoColor.elements;},T$E._setSkinnedMeshRenderSharedMaterialAlbedo=function(T$n,T$C,T$_){var T$E,T$y;if(T$n){var T$p=T$n.transform._entity;T$p&&((T$y=(T$E=T$p.owner.skinnedMeshRender.material).albedoColor).elements=T$_,T$E.albedoColor=T$y);}else(T$y=(T$E=T$C.skinnedMeshRender.material).albedoColor).elements=T$_,T$E.albedoColor=T$y;},T$E._getParticleRenderSharedMaterialTintColor=function(T$n,T$C){if(T$n){var T$_=T$n.transform._entity;return T$_?T$_.owner.particleRender.sharedMaterial.tintColor.elements:null;}return T$C.particleRender.sharedMaterial.tintColor.elements;},T$E._setParticleRenderSharedMaterialTintColor=function(T$n,T$C,T$_){var T$E,T$y;if(T$n){var T$p=T$n.transform._entity;T$p&&((T$y=(T$E=T$p.owner.particleRender.material).tintColor).elements=T$_,T$E.tintColor=T$y);}else(T$y=(T$E=T$C.particleRender.material).tintColor).elements=T$_,T$E.tintColor=T$y;},T$E._getMeshRenderSharedMaterialAlphaColor=function(T$n,T$C){if(T$n){var T$_=T$n.transform._entity;return T$_?T$_.owner.meshRender.sharedMaterial.alphaColor.elements:null;}return T$C.meshRender.sharedMaterial.alphaColor.elements;},T$E._setMeshRenderSharedMaterialAlphaColor=function(T$n,T$C,T$_){var T$E,T$y;if(T$n){var T$p=T$n.transform._entity;T$p&&((T$y=(T$E=T$p.owner.meshRender.material).alphaColor).elements=T$_,T$E.alphaColor=T$y);}else(T$y=(T$E=T$C.meshRender.material).alphaColor).elements=T$_,T$E.alphaColor=T$y;},T$E._getMeshRenderSharedMaterialBaseColor=function(T$n,T$C){if(T$n){var T$_=T$n.transform._entity;return T$_?T$_.owner.meshRender.sharedMaterial.baseColor.elements:null;}return T$C.meshRender.sharedMaterial.baseColor.elements;},T$E._setMeshRenderSharedMaterialBaseColor=function(T$n,T$C,T$_){var T$E,T$y;if(T$n){var T$p=T$n.transform._entity;T$p&&((T$y=(T$E=T$p.owner.meshRender.material).baseColor).elements=T$_,T$E.baseColor=T$y);}else(T$y=(T$E=T$C.meshRender.material).baseColor).elements=T$_,T$E.baseColor=T$y;},T$E._getMeshRenderSharedMaterialDissolve=function(T$n,T$C){if(T$n){var T$_=T$n.transform._entity;return T$_?T$_.owner.meshRender.sharedMaterial.dissolve:0;}return T$C.meshRender.sharedMaterial.dissolve;},T$E._setMeshRenderSharedMaterialDissolve=function(T$n,T$C,T$_){if(T$n){var T$E=T$n.transform._entity;T$E&&(T$E.owner.meshRender.material.dissolve=T$_[0]);}else T$C.meshRender.material.dissolve=T$_[0];},T$E._getMeshRenderSharedMaterialDissolveSpeed=function(T$n,T$C){if(T$n){var T$_=T$n.transform._entity;return T$_?T$_.owner.meshRender.sharedMaterial.dissolveSpeed:0;}return T$C.meshRender.sharedMaterial.dissolveSpeed;},T$E._setMeshRenderSharedMaterialDissolveSpeed=function(T$n,T$C,T$_){if(T$n){var T$E=T$n.transform._entity;T$E&&(T$E.owner.meshRender.material.dissolveSpeed=T$_[0]);}else T$C.meshRender.material.dissolveSpeed=T$_[0];},T$E._getMeshRenderSharedMaterialMMultiplier=function(T$n,T$C){if(T$n){var T$_=T$n.transform._entity;return T$_?T$_.owner.meshRender.sharedMaterial.mMultiplier:0;}return T$C.meshRender.sharedMaterial.mMultiplier;},T$E._setMeshRenderSharedMaterialMMultiplier=function(T$n,T$C,T$_){if(T$n){var T$E=T$n.transform._entity;T$E&&(T$E.owner.meshRender.material.mMultiplier=T$_[0]);}else T$C.meshRender.material.mMultiplier=T$_[0];},T$E._getMeshRenderSharedMaterialBaseScrollSpeedX=function(T$n,T$C){if(T$n){var T$_=T$n.transform._entity;return T$_?T$_.owner.meshRender.sharedMaterial.baseScrollSpeedX:0;}return T$C.meshRender.sharedMaterial.baseScrollSpeedX;},T$E._setMeshRenderSharedMaterialBaseScrollSpeedX=function(T$n,T$C,T$_){if(T$n){var T$E=T$n.transform._entity;T$E&&(T$E.owner.meshRender.material.baseScrollSpeedX=T$_[0]);}else T$C.meshRender.material.baseScrollSpeedX=T$_[0];},T$E._getMeshRenderSharedMaterialBaseScrollSpeedY=function(T$n,T$C){if(T$n){var T$_=T$n.transform._entity;return T$_?T$_.owner.meshRender.sharedMaterial.baseScrollSpeedY:0;}return T$C.meshRender.sharedMaterial.baseScrollSpeedY;},T$E._setMeshRenderSharedMaterialBaseScrollSpeedY=function(T$n,T$C,T$_){if(T$n){var T$E=T$n.transform._entity;T$E&&(T$E.owner.meshRender.material.baseScrollSpeedY=T$_[0]);}else T$C.meshRender.material.baseScrollSpeedY=T$_[0];},T$E._getMeshRenderSharedMaterialSecondScrollSpeedX=function(T$n,T$C){if(T$n){var T$_=T$n.transform._entity;return T$_?T$_.owner.meshRender.sharedMaterial.secondScrollSpeedX:0;}return T$C.meshRender.sharedMaterial.secondScrollSpeedX;},T$E._setMeshRenderSharedMaterialSecondScrollSpeedX=function(T$n,T$C,T$_){if(T$n){var T$E=T$n.transform._entity;T$E&&(T$E.owner.meshRender.material.secondScrollSpeedX=T$_[0]);}else T$C.meshRender.material.secondScrollSpeedX=T$_[0];},T$E._getMeshRenderSharedMaterialSecondScrollSpeedY=function(T$n,T$C){if(T$n){var T$_=T$n.transform._entity;return T$_?T$_.owner.meshRender.sharedMaterial.secondScrollSpeedY:0;}return T$C.meshRender.sharedMaterial.secondScrollSpeedY;},T$E._setMeshRenderSharedMaterialSecondScrollSpeedY=function(T$n,T$C,T$_){if(T$n){var T$E=T$n.transform._entity;T$E&&(T$E.owner.meshRender.material.secondScrollSpeedY=T$_[0]);}else T$C.meshRender.material.secondScrollSpeedY=T$_[0];},T$E._getMeshRenderSharedMaterialAlpha=function(T$n,T$C){if(T$n){var T$_=T$n.transform._entity;return T$_?T$_.owner.meshRender.sharedMaterial.alpha:0;}return T$C.meshRender.sharedMaterial.alpha;},T$E._setMeshRenderSharedMaterialAlpha=function(T$n,T$C,T$_){if(T$n){var T$E=T$n.transform._entity;T$E&&(T$E.owner.meshRender.material.alpha=T$_[0]);}else T$C.meshRender.material.alpha=T$_[0];},T$E._getMeshRenderSharedMaterialIntensity=function(T$n,T$C){if(T$n){var T$_=T$n.transform._entity;return T$_?T$_.owner.meshRender.sharedMaterial.intensity:0;}return T$C.meshRender.sharedMaterial.intensity;},T$E._setMeshRenderSharedMaterialIntensity=function(T$n,T$C,T$_){if(T$n){var T$E=T$n.transform._entity;T$E&&(T$E.owner.meshRender.material.intensity=T$_[0]);}else T$C.meshRender.material.intensity=T$_[0];},T$E._getMeshRenderSharedMaterialDetailTilingOffset=function(T$n,T$C){if(T$n){var T$_=T$n.transform._entity;return T$_?T$_.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null;}return T$C.meshRender.sharedMaterial.detailTilingOffset.elements;},T$E._setMeshRenderSharedMaterialDetailTilingOffset=function(T$n,T$C,T$_){var T$E,T$y;if(T$n){var T$p=T$n.transform._entity;T$p&&((T$y=(T$E=T$p.owner.meshRender.material).detailTilingOffset).elements=T$_,T$E.detailTilingOffset=T$y);}else(T$y=(T$E=T$C.meshRender.material).detailTilingOffset).elements=T$_,T$E.detailTilingOffset=T$y;},T$E._getMeshRenderSharedMaterialDissolveTilingOffset=function(T$n,T$C){if(T$n){var T$_=T$n.transform._entity;return T$_?T$_.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null;}return T$C.meshRender.sharedMaterial.dissolveTilingOffset.elements;},T$E._setMeshRenderSharedMaterialDissolveTilingOffset=function(T$n,T$C,T$_){var T$E,T$y;if(T$n){var T$p=T$n.transform._entity;T$p&&((T$y=(T$E=T$p.owner.meshRender.material).dissolveTilingOffset).elements=T$_,T$E.dissolveTilingOffset=T$y);}else(T$y=(T$E=T$C.meshRender.material).dissolveTilingOffset).elements=T$_,T$E.dissolveTilingOffset=T$y;},T$E._getMeshRenderSharedMaterialMaskTilingOffset=function(T$n,T$C){if(T$n){var T$_=T$n.transform._entity;return T$_?T$_.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null;}return T$C.meshRender.sharedMaterial.maskTilingOffset.elements;},T$E._setMeshRenderSharedMaterialMaskTilingOffset=function(T$n,T$C,T$_){var T$E,T$y;if(T$n){var T$p=T$n.transform._entity;T$p&&((T$y=(T$E=T$p.owner.meshRender.material).maskTilingOffset).elements=T$_,T$E.maskTilingOffset=T$y);}else(T$y=(T$E=T$C.meshRender.material).maskTilingOffset).elements=T$_,T$E.maskTilingOffset=T$y;},T$E._propertyIDCounter=0,T$E._propertyIndexDic={},T$E._propertySetFuncs=[],T$E._propertyGetFuncs=[],T$E;}(),T$u=function(){function T$n(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null;}return T$x(T$n,"laya.d3.animation.Keyframe"),T$n;}(),T$o=function(){function T$n(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null;}return T$x(T$n,"laya.d3.animation.KeyframeNode"),T$n;}(),T$g=(function(){function T$n(){this._tempVector30=new T$cC(),this._tempVector31=new T$cC(),this._tempVector32=new T$cC(),this._a=new T$cC(),this._b=new T$cC(),this._c=new T$cC(),this._d=new T$cC();}T$x(T$n,"laya.d3.core.glitter.SplineCurvePositionVelocity");var T$C=T$n.prototype;T$C.Init=function(T$n,T$C,T$_,T$E){T$n.cloneTo(this._d),T$C.cloneTo(this._c),T$cC.scale(T$n,2,this._a),T$cC.scale(T$_,2,this._tempVector30),T$cC.subtract(this._a,this._tempVector30,this._a),T$cC.add(this._a,T$C,this._a),T$cC.add(this._a,T$E,this._a),T$cC.scale(T$_,3,this._b),T$cC.scale(T$n,3,this._tempVector30),T$cC.subtract(this._b,this._tempVector30,this._b),T$cC.subtract(this._b,T$E,this._b),T$cC.scale(T$C,2,this._tempVector30),T$cC.subtract(this._b,this._tempVector30,this._b);},T$C.Slerp=function(T$n,T$C){T$cC.scale(this._a,T$n*T$n*T$n,this._tempVector30),T$cC.scale(this._b,T$n*T$n,this._tempVector31),T$cC.scale(this._c,T$n,this._tempVector32),T$cC.add(this._tempVector30,this._tempVector31,T$C),T$cC.add(T$C,this._tempVector32,T$C),T$cC.add(T$C,this._d,T$C);};}(),function(){function T$i(T$n,T$C,T$_,T$E){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=T$n,this._h=T$C,this._minHeight=T$_,this._maxHeight=T$E;}T$x(T$i,"laya.d3.core.HeightMap");var T$n=T$i.prototype;T$n._inBounds=function(T$n,T$C){return 0<=T$n&&T$n<this._h&&0<=T$C&&T$C<this._w;},T$n.getHeight=function(T$n,T$C){return this._inBounds(T$n,T$C)?this._datas[T$n][T$C]:NaN;},T$b(0,T$n,"width",function(){return this._w;}),T$b(0,T$n,"height",function(){return this._h;}),T$b(0,T$n,"maxHeight",function(){return this._maxHeight;}),T$b(0,T$n,"minHeight",function(){return this._minHeight;}),T$i.creatFromMesh=function(T$n,T$C,T$_,T$E){for(var T$y=[],T$p=[],T$c=T$n.getSubMeshCount(),T$l=0;T$l<T$c;T$l++){for(var T$W=T$n.getSubMesh(T$l),T$q=T$W._getVertexBuffer(),T$J=T$q.getData(),T$j=[],T$P=0;T$P<T$J.length;T$P+=T$q.vertexDeclaration.vertexStride/4){var T$x=new T$cC(T$J[T$P+0],T$J[T$P+1],T$J[T$P+2]);T$j.push(T$x);}T$y.push(T$j);var T$b=T$W._getIndexBuffer();T$p.push(T$b.getData());}var T$r=T$n.boundingBox,T$m=T$r.min.x,T$d=T$r.min.z,T$a=T$r.max.x,T$O=T$r.max.z,T$A=T$r.min.y,T$k=T$r.max.y,T$t=T$a-T$m,T$T=T$O-T$d,T$Y=T$E.elements[0]=T$t/(T$C-1),T$s=T$E.elements[1]=T$T/(T$_-1),T$N=new T$i(T$C,T$_,T$A,T$k),T$S=T$i._tempRay,T$M=T$S.direction.elements;T$M[0]=0,T$M[1]=-1,T$M[2]=0;var T$w=T$k+.1;T$S.origin.elements[1]=T$w;for(var T$B=0;T$B<T$_;T$B++){var T$V=T$d+T$B*T$s;T$N._datas[T$B]=[];for(var T$g=0;T$g<T$C;T$g++){var T$H=T$m+T$g*T$Y,T$X=T$S.origin.elements;T$X[0]=T$H,T$X[2]=T$V;var T$$=T$i._getPosition(T$S,T$y,T$p);T$N._datas[T$B][T$g]=T$$===Number.MAX_VALUE?NaN:T$w-T$$;}}return T$N;},T$i.createFromImage=function(T$n,T$C,T$_){for(var T$E=T$n.width,T$y=T$n.height,T$p=new T$i(T$E,T$y,T$C,T$_),T$c=(T$_-T$C)/254,T$l=T$n.getPixels(),T$W=0,T$q=0;T$q<T$y;T$q++)for(var T$J=T$p._datas[T$q]=[],T$j=0;T$j<T$E;T$j++){var T$P=T$l[T$W++],T$x=T$l[T$W++],T$b=T$l[T$W++],T$r=T$l[T$W++];T$J[T$j]=255==T$P&&255==T$x&&255==T$b&&255==T$r?NaN:(T$P+T$x+T$b)/3*T$c+T$C;}return T$p;},T$i._getPosition=function(T$n,T$C,T$_){for(var T$E=Number.MAX_VALUE,T$y=0;T$y<T$C.length;T$y++)for(var T$p=T$C[T$y],T$c=T$_[T$y],T$l=0;T$l<T$c.length;T$l+=3){var T$W=T$p[T$c[T$l+0]],T$q=T$p[T$c[T$l+1]],T$J=T$p[T$c[T$l+2]],T$j=T$bC.rayIntersectsTriangle(T$n,T$W,T$q,T$J);!isNaN(T$j)&&T$j<T$E&&(T$E=T$j);}return T$E;},T$j(T$i,["_tempRay",function(){return this._tempRay=new T$yC(new T$cC(),new T$cC());}]);}(),function(){function T$y(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[];}T$x(T$y,"laya.d3.core.Layer");var T$n=T$y.prototype;return T$n._binarySearchIndex=function(){for(var T$n=0,T$C=T$y._collsionTestList.length-1,T$_=0;T$n<=T$C;){T$_=Math.floor((T$n+T$C)/2);var T$E=T$y._collsionTestList[T$_];if(T$E==this._number)return T$_;T$E>this._number?T$C=T$_-1:T$n=T$_+1;}return T$n;},T$n._addCollider=function(T$n){0===this._colliders.length&&T$y._collsionTestList.splice(this._binarySearchIndex(),0,this._number),T$n._isRigidbody?(this._colliders.unshift(T$n),this._nonRigidbodyOffset++):this._colliders.push(T$n);},T$n._removeCollider=function(T$n){var T$C=this._colliders.indexOf(T$n);T$C<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(T$C,1),0===this._colliders.length&&T$y._collsionTestList.splice(T$y._collsionTestList.indexOf(this._number),1);},T$b(0,T$n,"number",function(){return this._number;}),T$b(0,T$n,"visible",function(){return this._visible;},function(T$n){this._visible=T$n,T$y._visibleLayers=T$n?T$y._visibleLayers|this.mask:T$y._visibleLayers&~this.mask;}),T$b(0,T$n,"mask",function(){return this._mask;}),T$b(1,T$y,"visibleLayers",function(){return T$y._visibleLayers;},function(T$n){T$y._visibleLayers=T$n;for(var T$C=0,T$_=T$y._layerList.length;T$C<T$_;T$C++){var T$E=T$y._layerList[T$C];T$E._visible=0!=(T$E._mask&T$y._visibleLayers);}}),T$y.__init__=function(){T$y._layerList.length=31;for(var T$n=0;T$n<31;T$n++){var T$C=new T$y();T$y._layerList[T$n]=T$C,0===T$n?(T$C.name="Default Layer",T$C.visible=!0):(T$C.name="Layer-"+T$n,T$C.visible=!1),T$C._number=T$n,T$C._mask=Math.pow(2,T$n);}T$y.currentCreationLayer=T$y._layerList[0];},T$y.getLayerByNumber=function(T$n){if(T$n<0||30<T$n)throw new Error("无法返回指定Layer，该number超出范围！");return T$y._layerList[T$n];},T$y.getLayerByName=function(T$n){for(var T$C=0;T$C<31;T$C++)if(T$y._layerList[T$C].name===T$n)return T$y._layerList[T$C];throw new Error("无法返回指定Layer,该name不存在");},T$y.isVisible=function(T$n){return 0!=(T$n&T$y._currentCameraCullingMask&T$y._visibleLayers);},T$y._layerList=[],T$y._visibleLayers=2147483647,T$y._collsionTestList=[],T$y._currentCameraCullingMask=2147483647,T$y.maxCount=31,T$y.currentCreationLayer=null,T$y;}()),T$H=(function(){function T$n(T$n,T$C,T$_){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=T$n,this._minCount=T$C,this._maxCount=T$_;}T$x(T$n,"laya.d3.core.particleShuriKen.module.Burst");var T$C=T$n.prototype;T$k.imps(T$C,{"laya.d3.core.IClone":!0}),T$C.cloneTo=function(T$n){var T$C=T$n;T$C._time=this._time,T$C._minCount=this._minCount,T$C._maxCount=this._maxCount;},T$C.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$b(0,T$C,"time",function(){return this._time;}),T$b(0,T$C,"minCount",function(){return this._minCount;}),T$b(0,T$C,"maxCount",function(){return this._maxCount;});}(),function(){function T$n(T$n){this._color=null,this.enbale=!1,this._color=T$n;}T$x(T$n,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var T$C=T$n.prototype;T$C.cloneTo=function(T$n){var T$C=T$n;this._color.cloneTo(T$C._color),T$C.enbale=this.enbale;},T$C.clone=function(){var T$n;switch(this._color.type){case 0:T$n=T$$.createByConstant(this._color.constant.clone());break;case 1:T$n=T$$.createByGradient(this._color.gradient.clone());break;case 2:T$n=T$$.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:T$n=T$$.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone());}var T$C=new this.constructor(T$n);return T$C.enbale=this.enbale,T$C;},T$b(0,T$C,"color",function(){return this._color;});}(),function(){function T$n(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[];}T$x(T$n,"laya.d3.core.particleShuriKen.module.Emission");var T$C=T$n.prototype;T$k.imps(T$C,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),T$C._destroy=function(){this._bursts=null,this._destroyed=!0;},T$C.getBurstsCount=function(){return this._bursts.length;},T$C.getBurstByIndex=function(T$n){return this._bursts[T$n];},T$C.addBurst=function(T$n){var T$C=this._bursts.length;if(0<T$C)for(var T$_=0;T$_<T$C;T$_++)this._bursts[T$_].time>T$n.time&&this._bursts.splice(T$_,0,T$n);this._bursts.push(T$n);},T$C.removeBurst=function(T$n){var T$C=this._bursts.indexOf(T$n);-1!==T$C&&this._bursts.splice(T$C,1);},T$C.removeBurstByIndex=function(T$n){this._bursts.splice(T$n,1);},T$C.clearBurst=function(){this._bursts.length=0;},T$C.cloneTo=function(T$n){var T$C=T$n,T$_=T$C._bursts;T$_.length=this._bursts.length;for(var T$E=0,T$y=this._bursts.length;T$E<T$y;T$E++){var T$p=T$_[T$E];T$p?this._bursts[T$E].cloneTo(T$p):T$_[T$E]=this._bursts[T$E].clone();}T$C._emissionRate=this._emissionRate,T$C.enbale=this.enbale;},T$C.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$b(0,T$C,"destroyed",function(){return this._destroyed;}),T$b(0,T$C,"emissionRate",function(){return this._emissionRate;},function(T$n){if(T$n<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=T$n;});}(),function(){function T$E(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null;}T$x(T$E,"laya.d3.core.particleShuriKen.module.FrameOverTime");var T$n=T$E.prototype;return T$k.imps(T$n,{"laya.d3.core.IClone":!0}),T$n.cloneTo=function(T$n){var T$C=T$n;T$C._type=this._type,T$C._constant=this._constant,this._overTime.cloneTo(T$C._overTime),T$C._constantMin=this._constantMin,T$C._constantMax=this._constantMax,this._overTimeMin.cloneTo(T$C._overTimeMin),this._overTimeMax.cloneTo(T$C._overTimeMax);},T$n.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$b(0,T$n,"frameOverTimeData",function(){return this._overTime;}),T$b(0,T$n,"constant",function(){return this._constant;}),T$b(0,T$n,"type",function(){return this._type;}),T$b(0,T$n,"frameOverTimeDataMin",function(){return this._overTimeMin;}),T$b(0,T$n,"constantMin",function(){return this._constantMin;}),T$b(0,T$n,"frameOverTimeDataMax",function(){return this._overTimeMax;}),T$b(0,T$n,"constantMax",function(){return this._constantMax;}),T$E.createByConstant=function(T$n){var T$C=new T$E();return T$C._type=0,T$C._constant=T$n,T$C;},T$E.createByOverTime=function(T$n){var T$C=new T$E();return T$C._type=1,T$C._overTime=T$n,T$C;},T$E.createByRandomTwoConstant=function(T$n,T$C){var T$_=new T$E();return T$_._type=2,T$_._constantMin=T$n,T$_._constantMax=T$C,T$_;},T$E.createByRandomTwoOverTime=function(T$n,T$C){var T$_=new T$E();return T$_._type=3,T$_._overTimeMin=T$n,T$_._overTimeMax=T$C,T$_;},T$E;}()),T$X=function(){function T$q(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null;}T$x(T$q,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var T$n=T$q.prototype;return T$k.imps(T$n,{"laya.d3.core.IClone":!0}),T$n.cloneTo=function(T$n){var T$C=T$n;T$C._type=this._type,T$C._separateAxes=this._separateAxes,T$C._constant=this._constant,this._constantSeparate.cloneTo(T$C._constantSeparate),this._gradient.cloneTo(T$C._gradient),this._gradientX.cloneTo(T$C._gradientX),this._gradientY.cloneTo(T$C._gradientY),this._gradientZ.cloneTo(T$C._gradientZ),T$C._constantMin=this._constantMin,T$C._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(T$C._constantMinSeparate),this._constantMaxSeparate.cloneTo(T$C._constantMaxSeparate),this._gradientMin.cloneTo(T$C._gradientMin),this._gradientMax.cloneTo(T$C._gradientMax),this._gradientXMin.cloneTo(T$C._gradientXMin),this._gradientXMax.cloneTo(T$C._gradientXMax),this._gradientYMin.cloneTo(T$C._gradientYMin),this._gradientYMax.cloneTo(T$C._gradientYMax),this._gradientZMin.cloneTo(T$C._gradientZMin),this._gradientZMax.cloneTo(T$C._gradientZMax);},T$n.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$b(0,T$n,"gradientZ",function(){return this._gradientZ;}),T$b(0,T$n,"constant",function(){return this._constant;}),T$b(0,T$n,"gradient",function(){return this._gradient;}),T$b(0,T$n,"separateAxes",function(){return this._separateAxes;}),T$b(0,T$n,"type",function(){return this._type;}),T$b(0,T$n,"constantSeparate",function(){return this._constantSeparate;}),T$b(0,T$n,"gradientX",function(){return this._gradientX;}),T$b(0,T$n,"gradientY",function(){return this._gradientY;}),T$b(0,T$n,"gradientW",function(){return this._gradientW;}),T$b(0,T$n,"gradientMin",function(){return this._gradientMin;}),T$b(0,T$n,"constantMin",function(){return this._constantMin;}),T$b(0,T$n,"gradientMax",function(){return this._gradientMax;}),T$b(0,T$n,"constantMax",function(){return this._constantMax;}),T$b(0,T$n,"gradientWMin",function(){return this._gradientWMin;}),T$b(0,T$n,"constantMinSeparate",function(){return this._constantMinSeparate;}),T$b(0,T$n,"constantMaxSeparate",function(){return this._constantMaxSeparate;}),T$b(0,T$n,"gradientXMin",function(){return this._gradientXMin;}),T$b(0,T$n,"gradientXMax",function(){return this._gradientXMax;}),T$b(0,T$n,"gradientWMax",function(){return this._gradientWMax;}),T$b(0,T$n,"gradientYMin",function(){return this._gradientYMin;}),T$b(0,T$n,"gradientYMax",function(){return this._gradientYMax;}),T$b(0,T$n,"gradientZMin",function(){return this._gradientZMin;}),T$b(0,T$n,"gradientZMax",function(){return this._gradientZMax;}),T$q.createByConstant=function(T$n){var T$C=new T$q();return T$C._type=0,T$C._separateAxes=!1,T$C._constant=T$n,T$C;},T$q.createByConstantSeparate=function(T$n){var T$C=new T$q();return T$C._type=0,T$C._separateAxes=!0,T$C._constantSeparate=T$n,T$C;},T$q.createByGradient=function(T$n){var T$C=new T$q();return T$C._type=1,T$C._separateAxes=!1,T$C._gradient=T$n,T$C;},T$q.createByGradientSeparate=function(T$n,T$C,T$_,T$E){var T$y=new T$q();return T$y._type=1,T$y._separateAxes=!0,T$y._gradientX=T$n,T$y._gradientY=T$C,T$y._gradientZ=T$_,T$y._gradientW=T$E,T$y;},T$q.createByRandomTwoConstant=function(T$n,T$C){var T$_=new T$q();return T$_._type=2,T$_._separateAxes=!1,T$_._constantMin=T$n,T$_._constantMax=T$C,T$_;},T$q.createByRandomTwoConstantSeparate=function(T$n,T$C){var T$_=new T$q();return T$_._type=2,T$_._separateAxes=!0,T$_._constantMinSeparate=T$n,T$_._constantMaxSeparate=T$C,T$_;},T$q.createByRandomTwoGradient=function(T$n,T$C){var T$_=new T$q();return T$_._type=3,T$_._separateAxes=!1,T$_._gradientMin=T$n,T$_._gradientMax=T$C,T$_;},T$q.createByRandomTwoGradientSeparate=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){var T$W=new T$q();return T$W._type=3,T$W._separateAxes=!0,T$W._gradientXMin=T$n,T$W._gradientXMax=T$C,T$W._gradientYMin=T$_,T$W._gradientYMax=T$E,T$W._gradientZMin=T$y,T$W._gradientZMax=T$p,T$W._gradientWMin=T$c,T$W._gradientWMax=T$l,T$W;},T$q;}(),T$$=function(){function T$E(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null;}T$x(T$E,"laya.d3.core.particleShuriKen.module.GradientColor");var T$n=T$E.prototype;return T$k.imps(T$n,{"laya.d3.core.IClone":!0}),T$n.cloneTo=function(T$n){var T$C=T$n;T$C._type=this._type,this._constant.cloneTo(T$C._constant),this._constantMin.cloneTo(T$C._constantMin),this._constantMax.cloneTo(T$C._constantMax),this._gradient.cloneTo(T$C._gradient),this._gradientMin.cloneTo(T$C._gradientMin),this._gradientMax.cloneTo(T$C._gradientMax);},T$n.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$b(0,T$n,"gradient",function(){return this._gradient;}),T$b(0,T$n,"constant",function(){return this._constant;}),T$b(0,T$n,"type",function(){return this._type;}),T$b(0,T$n,"gradientMin",function(){return this._gradientMin;}),T$b(0,T$n,"constantMin",function(){return this._constantMin;}),T$b(0,T$n,"gradientMax",function(){return this._gradientMax;}),T$b(0,T$n,"constantMax",function(){return this._constantMax;}),T$E.createByConstant=function(T$n){var T$C=new T$E();return T$C._type=0,T$C._constant=T$n,T$C;},T$E.createByGradient=function(T$n){var T$C=new T$E();return T$C._type=1,T$C._gradient=T$n,T$C;},T$E.createByRandomTwoConstant=function(T$n,T$C){var T$_=new T$E();return T$_._type=2,T$_._constantMin=T$n,T$_._constantMax=T$C,T$_;},T$E.createByRandomTwoGradient=function(T$n,T$C){var T$_=new T$E();return T$_._type=3,T$_._gradientMin=T$n,T$_._gradientMax=T$C,T$_;},T$E;}(),T$i=(function(){function T$n(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16);}T$x(T$n,"laya.d3.core.particleShuriKen.module.GradientDataColor");var T$C=T$n.prototype;T$k.imps(T$C,{"laya.d3.core.IClone":!0}),T$C.addAlpha=function(T$n,T$C){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==T$n&&(T$n=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=T$n,this._alphaElements[this._alphaCurrentLength++]=T$C):DEBUG;},T$C.addRGB=function(T$n,T$C){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==T$n&&(T$n=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=T$n,this._rgbElements[this._rgbCurrentLength++]=T$C.x,this._rgbElements[this._rgbCurrentLength++]=T$C.y,this._rgbElements[this._rgbCurrentLength++]=T$C.z):DEBUG;},T$C.cloneTo=function(T$n){var T$C=T$n,T$_=0,T$E=0;T$C._alphaCurrentLength=this._alphaCurrentLength;var T$y=T$C._alphaElements;for(T$y.length=this._alphaElements.length,T$_=0,T$E=this._alphaElements.length;T$_<T$E;T$_++)T$y[T$_]=this._alphaElements[T$_];T$C._rgbCurrentLength=this._rgbCurrentLength;var T$p=T$C._rgbElements;for(T$p.length=this._rgbElements.length,T$_=0,T$E=this._rgbElements.length;T$_<T$E;T$_++)T$p[T$_]=this._rgbElements[T$_];},T$C.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$b(0,T$C,"alphaGradientCount",function(){return this._alphaCurrentLength/2;}),T$b(0,T$C,"rgbGradientCount",function(){return this._rgbCurrentLength/4;});}(),function(){function T$n(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8);}T$x(T$n,"laya.d3.core.particleShuriKen.module.GradientDataInt");var T$C=T$n.prototype;T$k.imps(T$C,{"laya.d3.core.IClone":!0}),T$C.add=function(T$n,T$C){this._currentLength<8?(6===this._currentLength&&1!==T$n&&(T$n=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=T$n,this._elements[this._currentLength++]=T$C):console.log("Warning:data count must lessEqual than 4");},T$C.cloneTo=function(T$n){var T$C=T$n;T$C._currentLength=this._currentLength;var T$_=T$C._elements;T$_.length=this._elements.length;for(var T$E=0,T$y=this._elements.length;T$E<T$y;T$E++)T$_[T$E]=this._elements[T$E];},T$C.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$b(0,T$C,"gradientCount",function(){return this._currentLength/2;});}(),function(){function T$n(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8);}T$x(T$n,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var T$C=T$n.prototype;T$k.imps(T$C,{"laya.d3.core.IClone":!0}),T$C.add=function(T$n,T$C){this._currentLength<8?(6===this._currentLength&&1!==T$n&&(T$n=1,DEBUG),this._elements[this._currentLength++]=T$n,this._elements[this._currentLength++]=T$C):DEBUG;},T$C.getKeyByIndex=function(T$n){return this._elements[2*T$n];},T$C.getValueByIndex=function(T$n){return this._elements[2*T$n+1];},T$C.getAverageValue=function(){for(var T$n=0,T$C=this._currentLength-2;T$n<T$C;T$n+=2){this._elements[T$n+1];this._elements[T$n+3],this._elements[T$n+2]-this._elements[T$n];}return 0;},T$C.cloneTo=function(T$n){var T$C=T$n;T$C._currentLength=this._currentLength;var T$_=T$C._elements;T$_.length=this._elements.length;for(var T$E=0,T$y=this._elements.length;T$E<T$y;T$E++)T$_[T$E]=this._elements[T$E];},T$C.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$b(0,T$C,"gradientCount",function(){return this._currentLength/2;});}(),function(){function T$n(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12);}T$x(T$n,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var T$C=T$n.prototype;T$k.imps(T$C,{"laya.d3.core.IClone":!0}),T$C.add=function(T$n,T$C){this._currentLength<8?(6===this._currentLength&&1!==T$n&&(T$n=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=T$n,this._elements[this._currentLength++]=T$C.x,this._elements[this._currentLength++]=T$C.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4");},T$C.cloneTo=function(T$n){var T$C=T$n;T$C._currentLength=this._currentLength;var T$_=T$C._elements;T$_.length=this._elements.length;for(var T$E=0,T$y=this._elements.length;T$E<T$y;T$E++)T$_[T$E]=this._elements[T$E];},T$C.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$b(0,T$C,"gradientCount",function(){return this._currentLength/3;});}(),function(){function T$l(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null;}T$x(T$l,"laya.d3.core.particleShuriKen.module.GradientSize");var T$n=T$l.prototype;return T$k.imps(T$n,{"laya.d3.core.IClone":!0}),T$n.getMaxSizeInGradient=function(){var T$n=0,T$C=0,T$_=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(T$n=0,T$C=this._gradientX.gradientCount;T$n<T$C;T$n++)T$_=Math.max(T$_,this._gradientX.getValueByIndex(T$n));for(T$n=0,T$C=this._gradientY.gradientCount;T$n<T$C;T$n++)T$_=Math.max(T$_,this._gradientY.getValueByIndex(T$n));}else for(T$n=0,T$C=this._gradient.gradientCount;T$n<T$C;T$n++)T$_=Math.max(T$_,this._gradient.getValueByIndex(T$n));break;case 1:T$_=this._separateAxes?(T$_=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),T$_=Math.max(T$_,this._constantMinSeparate.y),Math.max(T$_,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(T$n=0,T$C=this._gradientXMin.gradientCount;T$n<T$C;T$n++)T$_=Math.max(T$_,this._gradientXMin.getValueByIndex(T$n));for(T$n=0,T$C=this._gradientXMax.gradientCount;T$n<T$C;T$n++)T$_=Math.max(T$_,this._gradientXMax.getValueByIndex(T$n));for(T$n=0,T$C=this._gradientYMin.gradientCount;T$n<T$C;T$n++)T$_=Math.max(T$_,this._gradientYMin.getValueByIndex(T$n));for(T$n=0,T$C=this._gradientZMax.gradientCount;T$n<T$C;T$n++)T$_=Math.max(T$_,this._gradientZMax.getValueByIndex(T$n));}else{for(T$n=0,T$C=this._gradientMin.gradientCount;T$n<T$C;T$n++)T$_=Math.max(T$_,this._gradientMin.getValueByIndex(T$n));for(T$n=0,T$C=this._gradientMax.gradientCount;T$n<T$C;T$n++)T$_=Math.max(T$_,this._gradientMax.getValueByIndex(T$n));}}return T$_;},T$n.cloneTo=function(T$n){var T$C=T$n;T$C._type=this._type,T$C._separateAxes=this._separateAxes,this._gradient.cloneTo(T$C._gradient),this._gradientX.cloneTo(T$C._gradientX),this._gradientY.cloneTo(T$C._gradientY),this._gradientZ.cloneTo(T$C._gradientZ),T$C._constantMin=this._constantMin,T$C._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(T$C._constantMinSeparate),this._constantMaxSeparate.cloneTo(T$C._constantMaxSeparate),this._gradientMin.cloneTo(T$C._gradientMin),this._gradientMax.cloneTo(T$C._gradientMax),this._gradientXMin.cloneTo(T$C._gradientXMin),this._gradientXMax.cloneTo(T$C._gradientXMax),this._gradientYMin.cloneTo(T$C._gradientYMin),this._gradientYMax.cloneTo(T$C._gradientYMax),this._gradientZMin.cloneTo(T$C._gradientZMin),this._gradientZMax.cloneTo(T$C._gradientZMax);},T$n.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$b(0,T$n,"gradientZ",function(){return this._gradientZ;}),T$b(0,T$n,"gradient",function(){return this._gradient;}),T$b(0,T$n,"separateAxes",function(){return this._separateAxes;}),T$b(0,T$n,"type",function(){return this._type;}),T$b(0,T$n,"gradientMin",function(){return this._gradientMin;}),T$b(0,T$n,"constantMin",function(){return this._constantMin;}),T$b(0,T$n,"gradientX",function(){return this._gradientX;}),T$b(0,T$n,"gradientY",function(){return this._gradientY;}),T$b(0,T$n,"gradientMax",function(){return this._gradientMax;}),T$b(0,T$n,"constantMax",function(){return this._constantMax;}),T$b(0,T$n,"constantMinSeparate",function(){return this._constantMinSeparate;}),T$b(0,T$n,"constantMaxSeparate",function(){return this._constantMaxSeparate;}),T$b(0,T$n,"gradientXMin",function(){return this._gradientXMin;}),T$b(0,T$n,"gradientXMax",function(){return this._gradientXMax;}),T$b(0,T$n,"gradientYMin",function(){return this._gradientYMin;}),T$b(0,T$n,"gradientYMax",function(){return this._gradientYMax;}),T$b(0,T$n,"gradientZMin",function(){return this._gradientZMin;}),T$b(0,T$n,"gradientZMax",function(){return this._gradientZMax;}),T$l.createByGradient=function(T$n){var T$C=new T$l();return T$C._type=0,T$C._separateAxes=!1,T$C._gradient=T$n,T$C;},T$l.createByGradientSeparate=function(T$n,T$C,T$_){var T$E=new T$l();return T$E._type=0,T$E._separateAxes=!0,T$E._gradientX=T$n,T$E._gradientY=T$C,T$E._gradientZ=T$_,T$E;},T$l.createByRandomTwoConstant=function(T$n,T$C){var T$_=new T$l();return T$_._type=1,T$_._separateAxes=!1,T$_._constantMin=T$n,T$_._constantMax=T$C,T$_;},T$l.createByRandomTwoConstantSeparate=function(T$n,T$C){var T$_=new T$l();return T$_._type=1,T$_._separateAxes=!0,T$_._constantMinSeparate=T$n,T$_._constantMaxSeparate=T$C,T$_;},T$l.createByRandomTwoGradient=function(T$n,T$C){var T$_=new T$l();return T$_._type=2,T$_._separateAxes=!1,T$_._gradientMin=T$n,T$_._gradientMax=T$C,T$_;},T$l.createByRandomTwoGradientSeparate=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c=new T$l();return T$c._type=2,T$c._separateAxes=!0,T$c._gradientXMin=T$n,T$c._gradientXMax=T$C,T$c._gradientYMin=T$_,T$c._gradientYMax=T$E,T$c._gradientZMin=T$y,T$c._gradientZMax=T$p,T$c;},T$l;}()),T$f=function(){function T$l(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null;}T$x(T$l,"laya.d3.core.particleShuriKen.module.GradientVelocity");var T$n=T$l.prototype;return T$k.imps(T$n,{"laya.d3.core.IClone":!0}),T$n.cloneTo=function(T$n){var T$C=T$n;T$C._type=this._type,this._constant.cloneTo(T$C._constant),this._gradientX.cloneTo(T$C._gradientX),this._gradientY.cloneTo(T$C._gradientY),this._gradientZ.cloneTo(T$C._gradientZ),this._constantMin.cloneTo(T$C._constantMin),this._constantMax.cloneTo(T$C._constantMax),this._gradientXMin.cloneTo(T$C._gradientXMin),this._gradientXMax.cloneTo(T$C._gradientXMax),this._gradientYMin.cloneTo(T$C._gradientYMin),this._gradientYMax.cloneTo(T$C._gradientYMax),this._gradientZMin.cloneTo(T$C._gradientZMin),this._gradientZMax.cloneTo(T$C._gradientZMax);},T$n.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$b(0,T$n,"gradientZ",function(){return this._gradientZ;}),T$b(0,T$n,"constant",function(){return this._constant;}),T$b(0,T$n,"type",function(){return this._type;}),T$b(0,T$n,"gradientXMax",function(){return this._gradientXMax;}),T$b(0,T$n,"constantMin",function(){return this._constantMin;}),T$b(0,T$n,"gradientX",function(){return this._gradientX;}),T$b(0,T$n,"gradientY",function(){return this._gradientY;}),T$b(0,T$n,"gradientXMin",function(){return this._gradientXMin;}),T$b(0,T$n,"constantMax",function(){return this._constantMax;}),T$b(0,T$n,"gradientYMin",function(){return this._gradientYMin;}),T$b(0,T$n,"gradientYMax",function(){return this._gradientYMax;}),T$b(0,T$n,"gradientZMin",function(){return this._gradientZMin;}),T$b(0,T$n,"gradientZMax",function(){return this._gradientZMax;}),T$l.createByConstant=function(T$n){var T$C=new T$l();return T$C._type=0,T$C._constant=T$n,T$C;},T$l.createByGradient=function(T$n,T$C,T$_){var T$E=new T$l();return T$E._type=1,T$E._gradientX=T$n,T$E._gradientY=T$C,T$E._gradientZ=T$_,T$E;},T$l.createByRandomTwoConstant=function(T$n,T$C){var T$_=new T$l();return T$_._type=2,T$_._constantMin=T$n,T$_._constantMax=T$C,T$_;},T$l.createByRandomTwoGradient=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c=new T$l();return T$c._type=3,T$c._gradientXMin=T$n,T$c._gradientXMax=T$C,T$c._gradientYMin=T$_,T$c._gradientYMax=T$E,T$c._gradientZMin=T$y,T$c._gradientZMax=T$p,T$c;},T$l;}(),T$e=(function(){function T$n(T$n){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=T$n;}T$x(T$n,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var T$C=T$n.prototype;T$k.imps(T$C,{"laya.d3.core.IClone":!0}),T$C.cloneTo=function(T$n){var T$C=T$n;this._angularVelocity.cloneTo(T$C._angularVelocity),T$C.enbale=this.enbale;},T$C.clone=function(){var T$n;switch(this._angularVelocity.type){case 0:T$n=this._angularVelocity.separateAxes?T$X.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):T$X.createByConstant(this._angularVelocity.constant);break;case 1:T$n=this._angularVelocity.separateAxes?T$X.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):T$X.createByGradient(this._angularVelocity.gradient.clone());break;case 2:T$n=this._angularVelocity.separateAxes?T$X.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):T$X.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:T$n=this._angularVelocity.separateAxes?T$X.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):T$X.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone());}var T$C=new this.constructor(T$n);return T$C.enbale=this.enbale,T$C;},T$b(0,T$C,"angularVelocity",function(){return this._angularVelocity;});}(),function(){function T$n(){this.enable=!1,this.randomDirection=!1;}T$x(T$n,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.core.IClone":!0}),T$C._getShapeBoundBox=function(T$n){throw new Error("BaseShape: must override it.");},T$C._getSpeedBoundBox=function(T$n){throw new Error("BaseShape: must override it.");},T$C.generatePositionAndDirection=function(T$n,T$C,T$_,T$E){throw new Error("BaseShape: must override it.");},T$C._calculateProceduralBounds=function(T$n,T$C,T$_){this._getShapeBoundBox(T$n);var T$E=T$n.min,T$y=T$n.max;T$cC.multiply(T$E,T$C,T$E),T$cC.multiply(T$y,T$C,T$y);var T$p=new T$Rn(new T$cC(),new T$cC());this.randomDirection?(T$p.min=new T$cC(-1,-1,-1),T$p.max=new T$cC(1,1,1)):this._getSpeedBoundBox(T$p);var T$c=new T$Rn(new T$cC(),new T$cC()),T$l=T$c.min,T$W=T$c.max;T$cC.scale(T$p.min,T$_.y,T$l),T$cC.scale(T$p.max,T$_.y,T$W),T$cC.add(T$n.min,T$l,T$l),T$cC.add(T$n.max,T$W,T$W),T$cC.min(T$n.min,T$l,T$n.min),T$cC.max(T$n.max,T$l,T$n.max);var T$q=new T$Rn(new T$cC(),new T$cC()),T$J=T$q.min,T$j=T$q.max;T$cC.scale(T$p.min,T$_.x,T$J),T$cC.scale(T$p.max,T$_.x,T$j),T$cC.min(T$q.min,T$j,T$l),T$cC.max(T$q.min,T$j,T$W),T$cC.min(T$n.min,T$l,T$n.min),T$cC.max(T$n.max,T$l,T$n.max);},T$C.cloneTo=function(T$n){T$n.enable=this.enable;},T$C.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$n;}()),T$Q=function(){function T$p(){}return T$x(T$p,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),T$p._randomPointUnitArcCircle=function(T$n,T$C,T$_){var T$E=T$C.elements,T$y=NaN;T$y=T$_?T$_.getFloat()*T$n:Math.random()*T$n,T$E[0]=Math.cos(T$y),T$E[1]=Math.sin(T$y);},T$p._randomPointInsideUnitArcCircle=function(T$n,T$C,T$_){var T$E=T$C.elements;T$p._randomPointUnitArcCircle(T$n,T$C,T$_);var T$y=NaN;T$y=T$_?Math.pow(T$_.getFloat(),.5):Math.pow(Math.random(),.5),T$E[0]=T$E[0]*T$y,T$E[1]=T$E[1]*T$y;},T$p._randomPointUnitCircle=function(T$n,T$C){var T$_=T$n.elements,T$E=NaN;T$E=T$C?T$C.getFloat()*Math.PI*2:Math.random()*Math.PI*2,T$_[0]=Math.cos(T$E),T$_[1]=Math.sin(T$E);},T$p._randomPointInsideUnitCircle=function(T$n,T$C){var T$_=T$n.elements;T$p._randomPointUnitCircle(T$n);var T$E=NaN;T$E=T$C?Math.pow(T$C.getFloat(),.5):Math.pow(Math.random(),.5),T$_[0]=T$_[0]*T$E,T$_[1]=T$_[1]*T$E;},T$p._randomPointUnitSphere=function(T$n,T$C){var T$_=T$n.elements,T$E=NaN,T$y=NaN;T$y=T$C?(T$E=T$_[2]=2*T$C.getFloat()-1,T$C.getFloat()*Math.PI*2):(T$E=T$_[2]=2*Math.random()-1,Math.random()*Math.PI*2);var T$p=Math.sqrt(1-T$E*T$E);T$_[0]=T$p*Math.cos(T$y),T$_[1]=T$p*Math.sin(T$y);},T$p._randomPointInsideUnitSphere=function(T$n,T$C){var T$_=T$n.elements;T$p._randomPointUnitSphere(T$n);var T$E=NaN;T$E=T$C?Math.pow(T$C.getFloat(),1/3):Math.pow(Math.random(),1/3),T$_[0]=T$_[0]*T$E,T$_[1]=T$_[1]*T$E,T$_[2]=T$_[2]*T$E;},T$p._randomPointInsideHalfUnitBox=function(T$n,T$C){var T$_=T$n.elements;T$C?(T$_[0]=T$C.getFloat()-.5,T$_[1]=T$C.getFloat()-.5,T$_[2]=T$C.getFloat()-.5):(T$_[0]=Math.random()-.5,T$_[1]=Math.random()-.5,T$_[2]=Math.random()-.5);},T$p;}(),T$I=(function(){function T$n(T$n){this._size=null,this.enbale=!1,this._size=T$n;}T$x(T$n,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var T$C=T$n.prototype;T$k.imps(T$C,{"laya.d3.core.IClone":!0}),T$C.cloneTo=function(T$n){var T$C=T$n;this._size.cloneTo(T$C._size),T$C.enbale=this.enbale;},T$C.clone=function(){var T$n;switch(this._size.type){case 0:T$n=this._size.separateAxes?T$i.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):T$i.createByGradient(this._size.gradient.clone());break;case 1:T$n=this._size.separateAxes?T$i.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):T$i.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:T$n=this._size.separateAxes?T$i.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):T$i.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone());}var T$C=new this.constructor(T$n);return T$C.enbale=this.enbale,T$C;},T$b(0,T$C,"size",function(){return this._size;});}(),function(){function T$E(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN;}T$x(T$E,"laya.d3.core.particleShuriKen.module.StartFrame");var T$n=T$E.prototype;return T$k.imps(T$n,{"laya.d3.core.IClone":!0}),T$n.cloneTo=function(T$n){var T$C=T$n;T$C._type=this._type,T$C._constant=this._constant,T$C._constantMin=this._constantMin,T$C._constantMax=this._constantMax;},T$n.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$b(0,T$n,"constant",function(){return this._constant;}),T$b(0,T$n,"type",function(){return this._type;}),T$b(0,T$n,"constantMin",function(){return this._constantMin;}),T$b(0,T$n,"constantMax",function(){return this._constantMax;}),T$E.createByConstant=function(T$n){var T$C=new T$E();return T$C._type=0,T$C._constant=T$n,T$C;},T$E.createByRandomTwoConstant=function(T$n,T$C){var T$_=new T$E();return T$_._type=1,T$_._constantMin=T$n,T$_._constantMax=T$C,T$_;},T$E;}()),T$Z=(function(){function T$n(T$n,T$C){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new T$pC(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=T$n,this._startFrame=T$C;}T$x(T$n,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var T$C=T$n.prototype;T$k.imps(T$C,{"laya.d3.core.IClone":!0}),T$C.cloneTo=function(T$n){var T$C=T$n;this.tiles.cloneTo(T$C.tiles),T$C.type=this.type,T$C.randomRow=this.randomRow,this._frame.cloneTo(T$C._frame),this._startFrame.cloneTo(T$C._startFrame),T$C.cycles=this.cycles,T$C.enableUVChannels=this.enableUVChannels,T$C.enable=this.enable;},T$C.clone=function(){var T$n,T$C;switch(this._frame.type){case 0:T$n=T$H.createByConstant(this._frame.constant);break;case 1:T$n=T$H.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:T$n=T$H.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:T$n=T$H.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone());}switch(this._startFrame.type){case 0:T$C=T$I.createByConstant(this._startFrame.constant);break;case 1:T$C=T$I.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax);}var T$_=new this.constructor(T$n,T$C);return this.tiles.cloneTo(T$_.tiles),T$_.type=this.type,T$_.randomRow=this.randomRow,T$_.cycles=this.cycles,T$_.enableUVChannels=this.enableUVChannels,T$_.enable=this.enable,T$_;},T$b(0,T$C,"frame",function(){return this._frame;}),T$b(0,T$C,"startFrame",function(){return this._startFrame;});}(),function(){function T$n(T$n){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=T$n;}T$x(T$n,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var T$C=T$n.prototype;T$k.imps(T$C,{"laya.d3.core.IClone":!0}),T$C.cloneTo=function(T$n){var T$C=T$n;this._velocity.cloneTo(T$C._velocity),T$C.enbale=this.enbale,T$C.space=this.space;},T$C.clone=function(){var T$n;switch(this._velocity.type){case 0:T$n=T$f.createByConstant(this._velocity.constant.clone());break;case 1:T$n=T$f.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:T$n=T$f.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:T$n=T$f.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone());}var T$C=new this.constructor(T$n);return T$C.enbale=this.enbale,T$C.space=this.space,T$C;},T$b(0,T$C,"velocity",function(){return this._velocity;});}(),function(){function T$n(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new T$PC(),this._vb=T$eC.create(T$n._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=T$fC.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=T$$C.nameKey.getID("LINE"),this._shaderCompile=T$YC._preCompileShader[this._sharderNameID];}T$x(T$n,"laya.d3.core.PhasorSpriter3D");var T$C=T$n.prototype;return T$C.line=function(T$n,T$C,T$_,T$E){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(T$n.x,T$n.y,T$n.z,T$C.x,T$C.y,T$C.z,T$C.w),this.addVertex(T$_.x,T$_.y,T$_.z,T$E.x,T$E.y,T$E.z,T$E.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this;},T$C.circle=function(T$n,T$C,T$_,T$E,T$y,T$p){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*T$C,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/T$C,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*T$n,Math.cos(this._tempNumver0)*T$n,0,T$_,T$E,T$y,T$p),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this;},T$C.plane=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=T$E/2,this._tempNumver1=T$y/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(T$n-this._tempNumver0,T$C+this._tempNumver1,T$_,T$p,T$c,T$l,T$W),this.addVertex(T$n+this._tempNumver0,T$C+this._tempNumver1,T$_,T$p,T$c,T$l,T$W),this.addVertex(T$n-this._tempNumver0,T$C-this._tempNumver1,T$_,T$p,T$c,T$l,T$W),this.addVertex(T$n+this._tempNumver0,T$C-this._tempNumver1,T$_,T$p,T$c,T$l,T$W),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this;},T$C.box=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=T$E/2,this._tempNumver1=T$y/2,this._tempNumver2=T$p/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(T$n-this._tempNumver0,T$C+this._tempNumver1,T$_+this._tempNumver2,T$c,T$l,T$W,T$q),this.addVertex(T$n+this._tempNumver0,T$C+this._tempNumver1,T$_+this._tempNumver2,T$c,T$l,T$W,T$q),this.addVertex(T$n-this._tempNumver0,T$C-this._tempNumver1,T$_+this._tempNumver2,T$c,T$l,T$W,T$q),this.addVertex(T$n+this._tempNumver0,T$C-this._tempNumver1,T$_+this._tempNumver2,T$c,T$l,T$W,T$q),this.addVertex(T$n+this._tempNumver0,T$C+this._tempNumver1,T$_-this._tempNumver2,T$c,T$l,T$W,T$q),this.addVertex(T$n-this._tempNumver0,T$C+this._tempNumver1,T$_-this._tempNumver2,T$c,T$l,T$W,T$q),this.addVertex(T$n+this._tempNumver0,T$C-this._tempNumver1,T$_-this._tempNumver2,T$c,T$l,T$W,T$q),this.addVertex(T$n-this._tempNumver0,T$C-this._tempNumver1,T$_-this._tempNumver2,T$c,T$l,T$W,T$q),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this;},T$C.cone=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*T$_+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*T$_>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/T$_,this.addVertexIndex(0,T$C,0,T$E,T$y,T$p,T$c,this._tempUint0),this.addVertexIndex(0,0,0,T$E,T$y,T$p,T$c,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<T$_;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(T$n*this._tempNumver2,0,T$n*this._tempNumver3,T$E,T$y,T$p,T$c,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==T$_-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(T$n*this._tempNumver2,0,T$n*this._tempNumver3,T$E,T$y,T$p,T$c,this._tempUint0+(this._tempInt0+T$_)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==T$_-1?this.addIndexes(this._tempUint1+T$_+2):this.addIndexes(this._tempUint1+this._tempInt0+T$_+1),this.addIndexes(this._tempUint1+this._tempInt0+T$_),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this;},T$C.boundingBoxLine=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(T$n,T$y,T$p,T$c,T$l,T$W,T$q),this.addVertex(T$E,T$y,T$p,T$c,T$l,T$W,T$q),this.addVertex(T$n,T$C,T$p,T$c,T$l,T$W,T$q),this.addVertex(T$E,T$C,T$p,T$c,T$l,T$W,T$q),this.addVertex(T$E,T$y,T$_,T$c,T$l,T$W,T$q),this.addVertex(T$n,T$y,T$_,T$c,T$l,T$W,T$q),this.addVertex(T$E,T$C,T$_,T$c,T$l,T$W,T$q),this.addVertex(T$n,T$C,T$_,T$c,T$l,T$W,T$q),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this;},T$C.addVertex=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=T$n,this._vbData[this._posInVBData+1]=T$C,this._vbData[this._posInVBData+2]=T$_,this._vbData[this._posInVBData+3]=T$E,this._vbData[this._posInVBData+4]=T$y,this._vbData[this._posInVBData+5]=T$p,this._vbData[this._posInVBData+6]=T$c,this._posInVBData+=this._floatSizePerVer,this;},T$C.addVertexIndex=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){return this._hasBegun||this.addVertexIndexException(),this._vbData[T$l]=T$n,this._vbData[T$l+1]=T$C,this._vbData[T$l+2]=T$_,this._vbData[T$l+3]=T$E,this._vbData[T$l+4]=T$y,this._vbData[T$l+5]=T$p,this._vbData[T$l+6]=T$c,(T$l+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=T$l),this;},T$C.addIndexes=function(T$n){var T$C=arguments;this._hasBegun||this.addVertexIndexException();for(var T$_=0;T$_<T$C.length;T$_++)this._ibData[this._posInIBData]=T$C[T$_],this._posInIBData++;return this;},T$C.begin=function(T$n,T$C){return this._hasBegun&&this.beginException0(),1!==T$n&&4!==T$n&&this.beginException1(),this._primitiveType=T$n,this._camera=T$C,this._hasBegun=!0,this;},T$C.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this;},T$C.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(T$n._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),T$Y.drawCall++,T$w.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0);},T$C.addVertexIndexException=function(){throw new Error("请先调用begin()函数");},T$C.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！");},T$C.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！");},T$C.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！");},T$C.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！");},T$C.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！");},T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(28,[new T$cn(0,"vector3",0),new T$cn(12,"vector4",1)]);}]),T$n;}()),T$L=function(){function T$n(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++T$n._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new T$PC();}T$x(T$n,"laya.d3.core.render.RenderElement");var T$C=T$n.prototype;return T$C.getDynamicBatchBakedVertexs=function(T$n){for(var T$C=this._renderObj._getVertexBuffer(T$n),T$_=T$C.getData().slice(),T$E=T$C.vertexDeclaration,T$y=T$E.getVertexElementByUsage(0).offset/4,T$p=T$E.getVertexElementByUsage(3).offset/4,T$c=this._sprite3D.transform,T$l=T$c.worldMatrix,T$W=T$c.rotation,T$q=T$E.vertexStride/4,T$J=0,T$j=T$_.length;T$J<T$j;T$J+=T$q){var T$P=T$J+T$y,T$x=T$J+T$p;T$mC.transformVector3ArrayToVector3ArrayCoordinate(T$_,T$P,T$l,T$_,T$P),T$mC.transformVector3ArrayByQuat(T$_,T$x,T$W,T$_,T$x);}return T$_;},T$C.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData();},T$C._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this);},T$b(0,T$C,"id",function(){return this._id;}),T$b(0,T$C,"renderObj",function(){return this._renderObj;},function(T$n){this._renderObj!==T$n&&(this._renderObj=T$n);}),T$n._uniqueIDCounter=0,T$n;}(),T$h=function(){function T$C(T$n){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++T$C._uniqueIDCounter,this._needSort=!1,this._scene=T$n,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={};}T$x(T$C,"laya.d3.core.render.RenderQueue");var T$n=T$C.prototype;return T$n._sortOpaqueFunc=function(T$n,T$C){if(T$n._render&&T$C._render){var T$_=T$n._material.renderQueue-T$C._material.renderQueue;return 0==T$_?T$n._render._distanceForSort-T$C._render._distanceForSort:T$_;}return 0;},T$n._sortAlphaFunc=function(T$n,T$C){if(T$n._render&&T$C._render){var T$_=T$n._material.renderQueue-T$C._material.renderQueue;return 0==T$_?T$C._render._distanceForSort-T$n._render._distanceForSort:T$_;}return 0;},T$n._begainRenderElement=function(T$n,T$C,T$_){return!!T$C._beforeRender(T$n);},T$n._sortAlpha=function(T$n){T$C._cameraPosition=T$n,this._finalElements.sort(this._sortAlphaFunc);},T$n._sortOpaque=function(T$n){T$C._cameraPosition=T$n,this._finalElements.sort(this._sortOpaqueFunc);},T$n._preRender=function(T$n){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements);},T$n._render=function(T$n,T$C){for(var T$_,T$E,T$y,T$p,T$c,T$l,T$W=T$Y.loopCount,T$q=this._scene,T$J=T$n.camera,T$j=(T$J.id,!1),T$P=0,T$x=this._finalElements.length;T$P<T$x;T$P++){var T$b,T$r,T$m,T$d=this._finalElements[T$P];if(null!=T$d._onPreRenderFunction&&T$d._onPreRenderFunction.call(T$d._sprite3D,T$n),0===T$d._type){if(T$n.owner=T$m=T$d._sprite3D,T$n.renderElement=T$d,T$m._preRenderUpdateComponents(T$n),T$b=T$d.renderObj,T$r=T$d._material,this._begainRenderElement(T$n,T$b,T$r)){if(T$_=T$b._getVertexBuffers(),!(T$y=(T$E=T$b._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[T$E.id]){this._errorRecord[T$E.id]=1;var T$a="vertexBuffer:"+("("+T$E._destroyed+","+T$E._released+","+T$E._referenceCount+","+T$E._buffer+")")+", material:"+(T$r?T$r.__className+"("+T$r._destroyed+","+T$r._released+")":"null")+", owner:"+(T$m?T$m.__className+"("+T$m._destroyed+","+T$m._activeInHierarchy+","+T$m._displayedInStage+")":"null")+", renderObj:"+(T$b?T$b.__className+"("+T$b._destroyed+","+T$b._released+","+T$b._referenceCount+")":"")+", parent:, url:"+(T$m?T$m.url:"")+", disposeStack:"+T$E.disposeStack;T$k.recordError("报错：unknown vertexDeclaration  "+T$a);}continue;}if(T$j=(T$p=T$n._shader=T$r._getShader(T$q._shaderDefineValue,T$y.shaderDefineValue,T$m._shaderDefineValue)).bind()||T$W!==T$p._uploadLoopCount,T$_){if(T$p._uploadVertexBuffer!==T$_||T$j){for(var T$O=0;T$O<T$_.length;T$O++){var T$A=T$_[T$O];T$p.uploadAttributesX(T$A.vertexDeclaration.shaderValues.data,T$A);}T$p._uploadVertexBuffer=T$_;}}else(T$p._uploadVertexBuffer!==T$E||T$j)&&(T$p.uploadAttributes(T$y.shaderValues.data,null),T$p._uploadVertexBuffer=T$E);(T$p._uploadScene!==T$q||T$j)&&(T$p.uploadSceneUniforms(T$q._shaderValues.data),T$p._uploadScene=T$q),(T$J!==T$p._uploadCamera||T$p._uploadSprite3D!==T$m||T$j)&&(T$p.uploadSpriteUniforms(T$m._shaderValues.data),T$p._uploadSprite3D=T$m),(T$J!==T$p._uploadCamera||T$j)&&(T$p.uploadCameraUniforms(T$J._shaderValues.data),T$p._uploadCamera=T$J),(T$p._uploadMaterial!==T$r||T$j)&&(T$r._upload(),T$p._uploadMaterial=T$r),T$c!==T$r?(T$r._setRenderStateBlendDepth(),T$r._setRenderStateFrontFace(T$C,T$m.transform),T$c=T$r,T$l=T$m):T$l!==T$m&&(T$r._setRenderStateFrontFace(T$C,T$m.transform),T$l=T$m),T$b._render(T$n),T$p._uploadLoopCount=T$W;}T$m._postRenderUpdateComponents(T$n);}else if(2===T$d._type){T$d.renderObj;T$n.owner=T$m=T$d._sprite3D,T$n.renderElement=T$d,T$n._batchIndexStart=T$d._tempBatchIndexStart,T$n._batchIndexEnd=T$d._tempBatchIndexEnd,T$b=T$d.renderObj,T$r=T$d._material,this._begainRenderElement(T$n,T$b,T$r)&&(T$y=(T$E=T$b._getVertexBuffer(0)).vertexDeclaration,T$j=(T$p=T$n._shader=T$r._getShader(T$q._shaderDefineValue,T$y.shaderDefineValue,T$m._shaderDefineValue)).bind()||T$W!==T$p._uploadLoopCount,(T$p._uploadVertexBuffer!==T$E||T$j)&&(T$p.uploadAttributes(T$y.shaderValues.data,null),T$p._uploadVertexBuffer=T$E),(T$p._uploadScene!==T$q||T$j)&&(T$p.uploadSceneUniforms(T$q._shaderValues.data),T$p._uploadScene=T$q),(T$J!==T$p._uploadCamera||T$p._uploadSprite3D!==T$m||T$j)&&(T$p.uploadSpriteUniforms(T$m._shaderValues.data),T$p._uploadSprite3D=T$m),(T$J!==T$p._uploadCamera||T$j)&&(T$p.uploadCameraUniforms(T$J._shaderValues.data),T$p._uploadCamera=T$J),(T$p._uploadMaterial!==T$r||T$j)&&(T$r._upload(),T$p._uploadMaterial=T$r),T$c!==T$r?(T$r._setRenderStateBlendDepth(),T$r._setRenderStateFrontFace(T$C,T$m.transform),T$c=T$r,T$l=T$m):T$l!==T$m&&(T$r._setRenderStateFrontFace(T$C,T$m.transform),T$l=T$m),T$b._render(T$n),T$p._uploadLoopCount=T$W);}}},T$n._renderShadow=function(T$n,T$C){for(var T$_,T$E,T$y,T$p,T$c,T$l=T$Y.loopCount,T$W=this._scene,T$q=T$n.camera,T$J=!1,T$j=0,T$P=this._finalElements.length;T$j<T$P;T$j++){var T$x,T$b,T$r,T$m=this._finalElements[T$j];0===T$m._type&&(T$n.owner=T$r=T$m._sprite3D,T$C||T$r._projectionViewWorldUpdateCamera===T$q&&T$r._projectionViewWorldUpdateLoopCount===T$Y.loopCount||(T$r._render._renderUpdate(T$n._projectionViewMatrix),T$r._projectionViewWorldUpdateLoopCount=T$Y.loopCount,T$r._projectionViewWorldUpdateCamera=T$q),T$n.renderElement=T$m,T$r._preRenderUpdateComponents(T$n),T$x=T$m.renderObj,T$b=T$m._material,this._begainRenderElement(T$n,T$x,null)&&(T$E=(T$_=T$x._getVertexBuffer(0)).vertexDeclaration,T$J=(T$y=T$n._shader=T$b._getShader(T$W._shaderDefineValue,T$E.shaderDefineValue,T$r._shaderDefineValue)).bind()||T$l!==T$y._uploadLoopCount,(T$y._uploadVertexBuffer!==T$_||T$J)&&(T$y.uploadAttributes(T$E.shaderValues.data,null),T$y._uploadVertexBuffer=T$_),(T$q!==T$y._uploadCamera||T$y._uploadSprite3D!==T$r||T$J)&&(T$y.uploadSpriteUniforms(T$r._shaderValues.data),T$y._uploadSprite3D=T$r),(T$q!==T$y._uploadCamera||T$J)&&(T$y.uploadCameraUniforms(T$q._shaderValues.data),T$y._uploadCamera=T$q),(T$y._uploadMaterial!==T$b||T$J)&&(T$b._upload(),T$y._uploadMaterial=T$b),T$y._uploadRenderElement,T$p!==T$b?(T$b._setRenderStateFrontFace(!1,T$r.transform),T$p=T$b,T$c=T$r):T$c!==T$r&&(T$b._setRenderStateFrontFace(!1,T$r.transform),T$c=T$r),T$x._render(T$n),T$y._uploadLoopCount=T$l),T$r._postRenderUpdateComponents(T$n));}},T$n._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0;},T$n._addRenderElement=function(T$n){this._renderElements.push(T$n),this._needSort=!0;},T$n._addDynamicBatchElement=function(T$n){this._dynamicBatchCombineRenderElements.push(T$n);},T$b(0,T$n,"id",function(){return this._id;}),T$C._uniqueIDCounter=0,T$C._cameraPosition=null,T$C;}(),T$v=function(){function T$n(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null;}return T$x(T$n,"laya.d3.core.render.RenderState"),T$n.clientWidth=0,T$n.clientHeight=0,T$n;}(),T$R=function(){function T$c(T$n,T$C){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new T$Un(new T$cC(),0),this._corners=[new T$cC(),new T$cC(),new T$cC(),new T$cC(),new T$cC(),new T$cC(),new T$cC(),new T$cC()],this._boundingBoxCenter=new T$cC(),this._children=T$E(8),this._objects=[],this._tempBoundBoxCorners=[new T$cC(),new T$cC(),new T$cC(),new T$cC(),new T$cC(),new T$cC(),new T$cC(),new T$cC()],this._scene=T$n,this._currentDepth=T$C;}T$x(T$c,"laya.d3.core.scene.OctreeNode");var T$n=T$c.prototype;return T$k.imps(T$n,{"laya.d3.core.scene.ITreeNode":!0}),T$n.init=function(T$n,T$C){var T$_=new T$cC(),T$E=new T$cC();T$cC.scale(T$C,-.5,T$_),T$cC.scale(T$C,.5,T$E),T$cC.add(T$_,T$n,T$_),T$cC.add(T$E,T$n,T$E),this.exactBox=new T$Rn(T$_,T$E),this.relaxBox=new T$Rn(T$_,T$E);},T$n.addTreeNode=function(T$n){1===Collision.boxContainsBox(this._relaxBox,T$n.boundingBox)?this.addNodeDown(T$n,0):this.addObject(T$n);},T$n.addChild=function(T$n){var T$C=this._children[T$n];if(null==T$C){T$C=new T$c(this._scene,this._currentDepth+1),(this._children[T$n]=T$C)._parent=this,T$cC.subtract(this._exactBox.max,this._exactBox.min,T$c.tempSize),T$cC.multiply(T$c.tempSize,T$c._octreeSplit[T$n],T$c.tempCenter),T$cC.add(this._exactBox.min,T$c.tempCenter,T$c.tempCenter),T$cC.scale(T$c.tempSize,.25,T$c.tempSize);var T$_=new T$cC(),T$E=new T$cC();T$cC.subtract(T$c.tempCenter,T$c.tempSize,T$_),T$cC.add(T$c.tempCenter,T$c.tempSize,T$E),T$C.exactBox=new T$Rn(T$_,T$E),T$cC.scale(T$c.tempSize,T$c.relax,T$c.tempSize);var T$y=new T$cC(),T$p=new T$cC();T$cC.subtract(T$c.tempCenter,T$c.tempSize,T$y),T$cC.add(T$c.tempCenter,T$c.tempSize,T$p),T$C.relaxBox=new T$Rn(T$y,T$p);}return T$C;},T$n.addObject=function(T$n){(T$n._treeNode=this)._objects.push(T$n);},T$n.removeObject=function(T$n){if(T$n._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var T$C=this._objects.indexOf(T$n);return-1!==T$C&&(this._objects.splice(T$C,1),!0);},T$n.clearObject=function(){this._objects.length=0;},T$n.addNodeUp=function(T$n,T$C){this._parent&&1!==Collision.boxContainsBox(this._exactBox,T$n.boundingBox)?this._parent.addNodeUp(T$n,T$C-1):this.addNodeDown(T$n,T$C);},T$n.addNodeDown=function(T$n,T$C){if(T$C<this._scene.treeLevel){var T$_=this.inChildIndex(T$n.boundingBoxCenter),T$E=this.addChild(T$_);1===Collision.boxContainsBox(T$E._relaxBox,T$n.boundingBox)?T$E.addNodeDown(T$n,++T$C):this.addObject(T$n);}else this.addObject(T$n);},T$n.inChildIndex=function(T$n){return 4*(T$n.z<this._boundingBoxCenter.z?0:1)+2*(T$n.y<this._boundingBoxCenter.y?0:1)+(T$n.x<this._boundingBoxCenter.x?0:1);},T$n.updateObject=function(T$n){1===Collision.boxContainsBox(this._relaxBox,T$n.boundingBox)?(this.removeObject(T$n),T$n._treeNode=null,this.addNodeDown(T$n,this._currentDepth)):this._parent&&(this.removeObject(T$n),T$n._treeNode=null,this._parent.addNodeUp(T$n,this._currentDepth-1));},T$n.cullingObjects=function(T$n,T$C,T$_,T$E,T$y){var T$p,T$c=0,T$l=0,T$W=0,T$q=this._scene._dynamicBatchManager;for(T$c=0,T$p=this._objects.length;T$c<T$p;T$c++){var T$J=this._objects[T$c];if(T$g.isVisible(T$J._owner.layer.mask)&&T$J.enable){if(T$C&&(T$Y.treeSpriteCollision+=1,0===T$n.containsBoundSphere(T$J.boundingSphere)))continue;T$J._renderUpdate(T$y),T$J._distanceForSort=T$cC.distance(T$J.boundingSphere.center,T$E)+T$J.sortingFudge;var T$j=T$J._renderElements;for(T$l=0,T$W=T$j.length;T$l<T$W;T$l++){var T$P=T$j[T$l],T$x=T$P._staticBatch;if(T$x&&T$x._material===T$P._material)T$x._addBatchRenderElement(T$P);else{var T$b=T$P.renderObj;T$b.triangleCount<10&&1===T$b._vertexBufferCount&&T$b._getIndexBuffer()&&T$P._material.renderQueue<2&&T$P._canDynamicBatch&&!T$J._owner.isStatic?T$q._addPrepareRenderElement(T$P):this._scene.getRenderQueue(T$P._material.renderQueue)._addRenderElement(T$P);}}}}for(T$c=0;T$c<8;T$c++){var T$r=this._children[T$c];if(null!=T$r){var T$m=T$C;if(T$C){var T$d=T$n.containsBoundBox(T$r._relaxBox);if(T$Y.treeNodeCollision+=1,0===T$d)continue;T$m=2===T$d;}T$r.cullingObjects(T$n,T$m,T$_,T$E,T$y);}}},T$n.cullingShadowObjects=function(T$n,T$C,T$_,T$E,T$y){var T$p,T$c=0,T$l=0,T$W=0;this._scene._dynamicBatchManager;for(T$c=0,T$p=this._objects.length;T$c<T$p;T$c++){var T$q=this._objects[T$c];if(T$q.castShadow&&T$g.isVisible(T$q._owner.layer.mask)&&T$q.enable){if(T$_&&0===T$n[0].containsBoundSphere(T$q.boundingSphere))continue;for(var T$J=1,T$j=T$n.length;T$J<T$j;T$J++){var T$P=T$C[T$J-1];if(0!==T$n[T$J].containsBoundSphere(T$q.boundingSphere)){var T$x=T$q._renderElements;for(T$l=0,T$W=T$x.length;T$l<T$W;T$l++)T$P._addRenderElement(T$x[T$l]);}}}}for(T$c=0;T$c<8;T$c++){var T$b=this._children[T$c];if(null!=T$b){var T$r=T$_;if(T$_){var T$m=T$n[0].containsBoundBox(T$b._relaxBox);if(0===T$m)continue;T$r=2===T$m;}T$b.cullingShadowObjects(T$n,T$C,T$r,T$E,T$y);}}},T$n.cullingShadowObjectsOnePSSM=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c,T$l=T$C[0],T$W=0,T$q=0,T$J=0;for(T$W=0,T$c=this._objects.length;T$W<T$c;T$W++){var T$j=this._objects[T$W];if(T$j.castShadow&&T$g.isVisible(T$j._owner.layer.mask)&&T$j.enable){if(T$E&&0===T$n.containsBoundSphere(T$j.boundingSphere))continue;T$j._renderUpdate(T$_);var T$P=T$j._renderElements;for(T$q=0,T$J=T$P.length;T$q<T$J;T$q++)T$l._addRenderElement(T$P[T$q]);}}for(T$W=0;T$W<8;T$W++){var T$x=this._children[T$W];if(null!=T$x){var T$b=T$E;if(T$E){var T$r=T$n.containsBoundBox(T$x._relaxBox);if(0===T$r)continue;T$b=2===T$r;}T$x.cullingShadowObjectsOnePSSM(T$n,T$C,T$_,T$b,T$y,T$p);}}},T$n.renderBoudingBox=function(T$n){this._renderBoudingBox(T$n);for(var T$C=0;T$C<8;++T$C){var T$_=this._children[T$C];T$_&&T$_.renderBoudingBox(T$n);}},T$n.buildAllChild=function(T$n){if(T$n<this._scene.treeLevel)for(var T$C=0;T$C<8;T$C++){this.addChild(T$C).buildAllChild(T$n+1);}},T$n._renderBoudingBox=function(T$n){},T$b(0,T$n,"exactBox",function(){return this._exactBox;},function(T$n){this._exactBox=T$n,T$cC.add(T$n.min,T$n.max,this._boundingBoxCenter),T$cC.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter);}),T$b(0,T$n,"relaxBox",function(){return this._relaxBox;},function(T$n){(this._relaxBox=T$n).getCorners(this._corners),T$Un.createfromPoints(this._corners,this._boundingSphere);}),T$c.debugMode=!1,T$c.relax=1.15,T$c.CHILDNUM=8,T$j(T$c,["tempVector0",function(){return this.tempVector0=new T$cC();},"tempSize",function(){return this.tempSize=new T$cC();},"tempCenter",function(){return this.tempCenter=new T$cC();},"_octreeSplit",function(){return this._octreeSplit=[new T$cC(.25,.25,.25),new T$cC(.75,.25,.25),new T$cC(.25,.75,.25),new T$cC(.75,.75,.25),new T$cC(.25,.25,.75),new T$cC(.75,.25,.75),new T$cC(.25,.75,.75),new T$cC(.75,.75,.75)];}]),T$c;}(),T$z=(function(){function T$n(){}T$x(T$n,"laya.d3.core.scene.SceneManager");}(),function(){function T$n(T$n,T$C,T$_,T$E){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===T$n&&(T$n=1),void 0===T$C&&(T$C=1),void 0===T$_&&(T$_=1),void 0===T$E&&(T$E=1),this._r=T$n,this._g=T$C,this._b=T$_,this._a=T$E;}return T$x(T$n,"laya.d3.core.trail.module.Color",null,"Color$1"),T$n.prototype.cloneTo=function(T$n){T$n._r=this._r,T$n._g=this._g,T$n._b=this._b,T$n._a=this._a;},T$j(T$n,["RED",function(){return this.RED=new T$n(1,0,0,1);},"GREEN",function(){return this.GREEN=new T$n(0,1,0,1);},"BLUE",function(){return this.BLUE=new T$n(0,0,1,1);},"CYAN",function(){return this.CYAN=new T$n(0,1,1,1);},"YELLOW",function(){return this.YELLOW=new T$n(1,.92,.016,1);},"MAGENTA",function(){return this.MAGENTA=new T$n(1,0,1,1);},"GRAY",function(){return this.GRAY=new T$n(.5,.5,.5,1);},"WHITE",function(){return this.WHITE=new T$n(1,1,1,1);},"BLACK",function(){return this.BLACK=new T$n(0,0,0,1);}]),T$n;}()),T$U=(function(){function T$n(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[];}T$x(T$n,"laya.d3.core.trail.module.Gradient");var T$C=T$n.prototype;T$C.setKeys=function(T$n,T$C){var T$_,T$E;this._colorKeys=T$n;for(var T$y=this.index=0;T$y<T$n.length;T$y++){var T$p=(T$_=T$n[T$y]).color;this._colorKeyData[this.index++]=T$p._r,this._colorKeyData[this.index++]=T$p._g,this._colorKeyData[this.index++]=T$p._b,this._colorKeyData[this.index++]=T$_.time;}this._alphaKeys=T$C;for(var T$c=this.index=0;T$c<T$C.length;T$c++)T$E=T$C[T$c],this._alphaKeyData[this.index++]=T$E.alpha,this._alphaKeyData[this.index++]=T$E.time;},T$C.cloneTo=function(T$n){var T$C=0,T$_=0,T$E=this.colorKeys,T$y=[];for(T$C=0,T$_=T$E.length;T$C<T$_;T$C++){var T$p=new T$K();T$E[T$C].cloneTo(T$p),T$y.push(T$p);}var T$c=this.alphaKeys,T$l=[];for(T$C=0,T$_=T$c.length;T$C<T$_;T$C++){var T$W=new T$U();T$c[T$C].cloneTo(T$W),T$l.push(T$W);}T$n.setKeys(T$y,T$l);},T$b(0,T$C,"mode",function(){return this._mode;},function(T$n){this._mode=T$n;}),T$b(0,T$C,"colorKeys",function(){return this._colorKeys;},function(T$n){this._colorKeys=T$n;for(var T$C=this.index=0;T$C<T$n.length;T$C++){var T$_=T$n[T$C],T$E=T$_.color;this._colorKeyData[this.index++]=T$E._r,this._colorKeyData[this.index++]=T$E._g,this._colorKeyData[this.index++]=T$E._b,this._colorKeyData[this.index++]=T$_.time;}}),T$b(0,T$C,"alphaKeys",function(){return this._alphaKeys;},function(T$n){this._alphaKeys=T$n;for(var T$C=this.index=0;T$C<T$n.length;T$C++){var T$_=T$n[T$C];this._alphaKeyData[this.index++]=T$_.alpha,this._alphaKeyData[this.index++]=T$_.time;}});}(),function(){function T$n(T$n,T$C){this._alpha=NaN,this._time=NaN,void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=0),this._alpha=T$n,this._time=T$C;}T$x(T$n,"laya.d3.core.trail.module.GradientAlphaKey");var T$C=T$n.prototype;return T$C.cloneTo=function(T$n){T$n.alpha=this.alpha,T$n.time=this.time;},T$b(0,T$C,"alpha",function(){return this._alpha;},function(T$n){this._alpha=T$n;}),T$b(0,T$C,"time",function(){return this._time;},function(T$n){this._time=T$n;}),T$n;}()),T$K=function(){function T$n(T$n,T$C){this._color=null,this._time=NaN,void 0===T$C&&(T$C=0),this._color=T$n||new T$z(),this._time=T$C;}T$x(T$n,"laya.d3.core.trail.module.GradientColorKey");var T$C=T$n.prototype;return T$C.cloneTo=function(T$n){this.color.cloneTo(T$n.color),T$n.time=this.time;},T$b(0,T$C,"color",function(){return this._color;},function(T$n){this._color=T$n;}),T$b(0,T$C,"time",function(){return this._time;},function(T$n){this._time=T$n;}),T$n;}(),T$D=(function(){function T$n(){}T$x(T$n,"laya.d3.core.trail.module.GradientMode"),T$n.Blend=0,T$n.Fixed=1;}(),function(){function T$n(){}T$x(T$n,"laya.d3.core.trail.module.TextureMode"),T$n.Stretch=0,T$n.Tile=1;}(),function(){function T$n(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN;}T$x(T$n,"laya.d3.core.trail.module.TrailKeyFrame"),T$n.prototype.cloneTo=function(T$n){T$n.time=this.time,T$n.inTangent=this.inTangent,T$n.outTangent=this.outTangent,T$n.value=this.value;};}(),function(){function T$C(T$n){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new T$cC(),this._curPosition=new T$cC(),this._delVector3=new T$cC(),this._lastFixedVertexPosition=new T$cC(),this._pointAtoBVector3=new T$cC(),this._pointA=new T$cC(),this._pointB=new T$cC(),this._owner=T$n,this._id=T$C.renderElementCount++,0==this._id?T$n._owner.transform.position.cloneTo(this._lastPosition):T$n._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new T$eC(T$D.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new T$eC(T$D.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2);}T$x(T$C,"laya.d3.core.trail.TrailRenderElement");var T$n=T$C.prototype;T$k.imps(T$n,{"laya.d3.core.render.IRenderable":!0}),T$n._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1);},T$n._addTrailByFirstPosition=function(T$n,T$C){T$cC.subtract(T$C,T$n,this._delVector3),T$cC.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),T$cC.normalize(this._pointAtoBVector3,this._pointAtoBVector3),T$cC.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(T$n),T$n.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0;},T$n._addTrailByNextPosition=function(T$n){T$cC.subtract(T$n,this._lastFixedVertexPosition,this._delVector3),T$cC.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),T$cC.normalize(this._pointAtoBVector3,this._pointAtoBVector3),T$cC.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=T$cC.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=T$Kn.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(T$n),T$n.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(T$n),this._virtualVerticesCount=2);},T$n._updateVerticesByPosition=function(T$n){this._pointe=T$n.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0;},T$n._updateVertexBuffer2=function(){var T$n,T$C=0,T$_=0,T$E=0;for(T$E=0,T$n=(this._verticesCount+this._virtualVerticesCount)/2;T$E<T$n;T$E++)T$_=0==this._owner.textureMode?(this._VerticesToTailLength[T$E]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[T$E],this._vertices2[T$C++]=1-T$_,this._vertices2[T$C++]=1-T$_;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount);},T$n._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0;},T$n._updateDisappear=function(){var T$n,T$C=0;for(T$C=this._curDisappearIndex,T$n=(this._verticesCount+this._virtualVerticesCount)/2;T$C<T$n;T$C++)this._owner._curtime-this._everyGroupVertexBirthTime[T$C]>=this._owner.time+T$Kn.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0));},T$n._beforeRender=function(T$n){return this._camera=T$n.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),T$cC.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0));},T$n._render=function(T$n){this._isDead||(T$w.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),T$Y.drawCall++,T$Y.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2);},T$n._getVertexBuffer=function(T$n){return void 0===T$n&&(T$n=0),0===T$n?this._vertexBuffer1:1===T$n?this._vertexBuffer2:null;},T$n._getVertexBuffers=function(){return this._vertexBuffers;},T$n._getIndexBuffer=function(){return null;},T$n.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition);},T$n._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null;},T$b(0,T$n,"_vertexBufferCount",function(){return this._vertexBuffers.length;}),T$b(0,T$n,"triangleCount",function(){return 0;}),T$C.renderElementCount=0;}(),function(){function T$n(){}T$x(T$n,"laya.d3.core.trail.VertexTrail");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration1;}),T$b(1,T$n,"vertexDeclaration1",function(){return T$n._vertexDeclaration1;}),T$b(1,T$n,"vertexDeclaration2",function(){return T$n._vertexDeclaration2;}),T$j(T$n,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new T$pn(32,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",41),new T$cn(24,"single",33),new T$cn(28,"single",40)]);},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new T$pn(4,[new T$cn(0,"single",38)]);}]),T$n;}()),T$nn=function(){function T$A(T$n){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=T$n;}T$x(T$A,"laya.d3.graphics.DynamicBatch");var T$n=T$A.prototype;return T$k.imps(T$n,{"laya.d3.core.render.IRenderable":!0}),T$n._getVertexBuffer=function(T$n){return void 0===T$n&&(T$n=0),0===T$n?this._vertexBuffer:null;},T$n._getIndexBuffer=function(){return this._indexBuffer;},T$n._getCombineRenderElementFromPool=function(T$n,T$C,T$_){var T$E=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return T$E||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=T$E=new T$L(),T$E._sprite3D=new T$hC()),T$E._sprite3D._render._renderUpdate(T$_),T$E;},T$n._getRenderElement=function(T$n,T$C,T$_){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*T$A.maxVertexCount),this._indexDatas=new Uint16Array(T$A.maxIndexCount),this._vertexBuffer=T$eC.create(this._vertexDeclaration,T$A.maxVertexCount,35048),this._indexBuffer=T$fC.create("ushort",T$A.maxIndexCount,35048));for(var T$E=this._merageElements.length=0,T$y=0,T$p=0,T$c=this._combineRenderElements.length;T$p<T$c;T$p++){var T$l=this._combineRenderElements[T$p],T$W=T$l.getDynamicBatchBakedVertexs(0),T$q=T$l.getBakedIndices(),T$J=T$l._sprite3D.transform._isFrontFaceInvert,T$j=T$E/(this._vertexDeclaration.vertexStride/4),T$P=T$y,T$x=T$P+T$q.length;T$l._tempBatchIndexStart=T$P,T$l._tempBatchIndexEnd=T$x,this._indexDatas.set(T$q,T$y);var T$b=0;if(T$J)for(T$b=T$P;T$b<T$x;T$b+=3){this._indexDatas[T$b]=T$j+this._indexDatas[T$b];var T$r=this._indexDatas[T$b+1],T$m=this._indexDatas[T$b+2];this._indexDatas[T$b+1]=T$j+T$m,this._indexDatas[T$b+2]=T$j+T$r;}else for(T$b=T$P;T$b<T$x;T$b+=3)this._indexDatas[T$b]=T$j+this._indexDatas[T$b],this._indexDatas[T$b+1]=T$j+this._indexDatas[T$b+1],this._indexDatas[T$b+2]=T$j+this._indexDatas[T$b+2];T$y+=T$q.length,this._vertexDatas.set(T$W,T$E),T$E+=T$W.length;}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),T$p=this._combineRenderElementPoolIndex=0,T$c=this._materials.length;T$p<T$c;T$p++){var T$d=this._getCombineRenderElementFromPool(T$n,T$C,T$_);T$d._type=2,T$d._staticBatch=null;var T$a=(T$d.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[T$p]]._tempBatchIndexStart,T$O=T$p+1===this._materialToRenderElementsOffsets.length?T$y:this._combineRenderElements[this._materialToRenderElementsOffsets[T$p+1]]._tempBatchIndexStart;T$d._tempBatchIndexStart=T$a,T$d._tempBatchIndexEnd=T$O,T$d._material=this._materials[T$p],this._merageElements.push(T$d);}},T$n._addCombineRenderObjTest=function(T$n){var T$C=T$n.renderObj,T$_=this._currentCombineIndexCount+T$C._getIndexBuffer().indexCount,T$E=this._currentCombineVertexCount+T$C._getVertexBuffer().vertexCount;return!(T$A.maxVertexCount<T$E||T$A.maxIndexCount<T$_);},T$n._addCombineRenderObj=function(T$n){var T$C=T$n.renderObj;this._combineRenderElements.push(T$n),this._currentCombineIndexCount=this._currentCombineIndexCount+T$C._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+T$C._getVertexBuffer().vertexCount;},T$n._addCombineMaterial=function(T$n){this._materials.push(T$n);},T$n._addMaterialToRenderElementOffset=function(T$n){this._materialToRenderElementsOffsets.push(T$n);},T$n._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0;},T$n._addToRenderQueue=function(T$n,T$C,T$_,T$E){this._getRenderElement(T$C,T$_,T$E);for(var T$y=0,T$p=this._materials.length;T$y<T$p;T$y++)T$n.getRenderQueue(this._materials[T$y].renderQueue)._addDynamicBatchElement(this._merageElements[T$y]);},T$n._beforeRender=function(T$n){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0;},T$n._render=function(T$n){var T$C=T$n._batchIndexEnd-T$n._batchIndexStart;T$w.mainContext.drawElements(4,T$C,5123,2*T$n._batchIndexStart),T$Y.drawCall++,T$Y.trianglesFaces+=T$C/3;},T$n._getVertexBuffers=function(){return null;},T$b(0,T$n,"_vertexBufferCount",function(){return 1;}),T$b(0,T$n,"triangleCount",function(){return this._indexBuffer.indexCount/3;}),T$b(0,T$n,"combineRenderElementsCount",function(){return this._combineRenderElements.length;}),T$A.maxVertexCount=2e4,T$A.maxIndexCount=4e4,T$A.maxCombineTriangleCount=10,T$A;}(),T$Cn=function(){function T$A(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[];}T$x(T$A,"laya.d3.graphics.DynamicBatchManager");var T$n=T$A.prototype;return T$n.getDynamicBatch=function(T$n,T$C){var T$_,T$E=T$n.id.toString()+T$C;return this._dynamicBatches[T$E]?T$_=this._dynamicBatches[T$E]:this._dynamicBatches[T$E]=T$_=new T$nn(T$n),T$_;},T$n._garbageCollection=function(){for(var T$n in this._dynamicBatches)0===this._dynamicBatches[T$n].combineRenderElementsCount&&delete this._dynamicBatches[T$n];},T$n._addPrepareRenderElement=function(T$n){this._prepareDynamicBatchCombineElements.push(T$n);},T$n._finishCombineDynamicBatch=function(T$n){var T$C,T$_,T$E;this._prepareDynamicBatchCombineElements.sort(T$A._sortPrepareDynamicBatch);for(var T$y,T$p,T$c,T$l,T$W,T$q=-1,T$J=!0,T$j=0,T$P=-1,T$x=0,T$b=this._prepareDynamicBatchCombineElements.length;T$x<T$b;T$x++){var T$r=(T$p=this._prepareDynamicBatchCombineElements[T$x]).renderObj._getVertexBuffer(0).vertexDeclaration,T$m=T$_!==T$r;T$m&&(T$j=0,T$_=T$r);var T$d=T$j!==T$q;if(T$d&&(T$q=T$j),(T$m||T$d)&&(T$c=this.getDynamicBatch(T$r,T$j),T$C=null),T$J){if(T$c._addCombineRenderObjTest(T$p)){if(T$C!==(T$y=T$p._material))T$l&&(T$n.getRenderQueue(T$W._material.renderQueue)._addRenderElement(T$W),T$W=T$l=null,T$P=-1),T$l=T$y,T$P=T$c.combineRenderElementsCount,T$W=T$p,T$C=T$y;else if(T$l){var T$a=T$W.renderObj,T$O=T$p.renderObj;T$a._getVertexBuffer().vertexCount+T$O._getVertexBuffer().vertexCount>T$nn.maxVertexCount||T$a._getIndexBuffer().indexCount+T$O._getIndexBuffer().indexCount>T$nn.maxIndexCount?(T$n.getRenderQueue(T$W._material.renderQueue)._addRenderElement(T$W),T$l=T$y,T$P=T$c.combineRenderElementsCount,T$W=T$p):(T$c._addCombineMaterial(T$l),T$c._addMaterialToRenderElementOffset(T$P),T$c._addCombineRenderObj(T$W),T$W=T$l=null,T$P=-1,T$c._addCombineRenderObj(T$p));}else T$c._addCombineRenderObj(T$p);T$J=!0;}else T$l&&(T$n.getRenderQueue(T$W._material.renderQueue)._addRenderElement(T$W),T$W=T$l=null,T$P=-1),T$j++,T$J=!1;}else T$E=this._prepareDynamicBatchCombineElements[T$x-1],T$c._addMaterialToRenderElementOffset(T$c.combineRenderElementsCount),T$C=T$E._material,T$c._addCombineMaterial(T$C),T$c._addCombineRenderObj(T$E),T$J=!0,T$C!==(T$y=T$p._material)?(T$l=T$y,T$P=T$c.combineRenderElementsCount,T$W=T$p):T$c._addCombineRenderObj(T$p),T$C=T$y;}T$l&&(T$n.getRenderQueue(T$W._material.renderQueue)._addRenderElement(T$W),T$W=T$l=null,T$P=-1),this._prepareDynamicBatchCombineElements.length=0;},T$n._clearRenderElements=function(){for(var T$n in this._dynamicBatches)this._dynamicBatches[T$n]._clearRenderElements();},T$n._addToRenderQueue=function(T$n,T$C,T$_,T$E){for(var T$y in this._dynamicBatches){var T$p=this._dynamicBatches[T$y];0<T$p.combineRenderElementsCount&&T$p._addToRenderQueue(T$n,T$C,T$_,T$E);}},T$n.dispose=function(){this._dynamicBatches=null;},T$A._sortPrepareDynamicBatch=function(T$n,T$C){return T$n._mainSortID-T$C._mainSortID;},T$A;}(),T$_n=function(){function T$n(){}return T$x(T$n,"laya.d3.graphics.FrustumCulling"),T$n.renderShadowObjectCulling=function(T$n,T$C,T$_,T$E,T$y){var T$p=0,T$c=0,T$l=0,T$W=0;for(T$p=0,T$l=T$_.length;T$p<T$l;T$p++){var T$q=T$_[T$p];T$q&&T$q._clearRenderElements();}var T$J,T$j,T$P,T$x=T$n._cullingRenders;if(1<T$y){for(T$p=0,T$l=T$n._cullingRendersLength;T$p<T$l;T$p++)if((T$J=T$x[T$p]).castShadow&&T$g.isVisible(T$J._owner.layer.mask)&&T$J.enable)for(var T$b=1,T$r=T$C.length;T$b<T$r;T$b++)if(T$j=T$_[T$b-1],0!==T$C[T$b].containsBoundSphere(T$J.boundingSphere))for(T$c=0,T$W=(T$P=T$J._renderElements).length;T$c<T$W;T$c++)T$j._addRenderElement(T$P[T$c]);}else for(T$p=0,T$l=T$n._cullingRendersLength;T$p<T$l;T$p++)if((T$J=T$x[T$p]).castShadow&&T$g.isVisible(T$J._owner.layer.mask)&&T$J.enable&&0!==T$C[0].containsBoundSphere(T$J.boundingSphere))for(T$J._renderUpdate(T$E),T$j=T$_[0],T$c=0,T$W=(T$P=T$J._renderElements).length;T$c<T$W;T$c++)T$j._addRenderElement(T$P[T$c]);},T$n.renderShadowObjectCullingOctree=function(T$n,T$C,T$_,T$E,T$y){for(var T$p=0,T$c=T$_.length;T$p<T$c;T$p++){var T$l=T$_[T$p];T$l&&T$l._clearRenderElements();}1<T$y?T$n.treeRoot.cullingShadowObjects(T$C,T$_,!0,0,T$n):T$n.treeRoot.cullingShadowObjectsOnePSSM(T$C[0],T$_,T$E,!0,0,T$n);},T$n.renderObjectCulling=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c=0,T$l=0,T$W=0,T$q=0,T$J=T$C._quenes,T$j=T$C._dynamicBatchManager,T$P=T$C._cullingRenders;for(T$c=0,T$l=T$J.length;T$c<T$l;T$c++){var T$x=T$J[T$c];T$x&&T$x._clearRenderElements();}var T$b=T$En._staticBatchManagers;for(T$c=0,T$l=T$b.length;T$c<T$l;T$c++)T$b[T$c]._clearRenderElements();T$j._clearRenderElements();var T$r=T$_.transform.position;for(T$c=0,T$l=T$C._cullingRendersLength;T$c<T$l;T$c++){var T$m=T$P[T$c];if(T$g.isVisible(T$m._owner.layer.mask)&&T$m.enable&&0!==T$n.containsBoundSphere(T$m.boundingSphere)&&T$m._renderUpdate(T$p)){T$m._distanceForSort=T$cC.distance(T$m.boundingSphere.center,T$r)+T$m.sortingFudge;var T$d=T$m._renderElements;for(T$W=0,T$q=T$d.length;T$W<T$q;T$W++){var T$a=T$d[T$W],T$O=T$a._staticBatch;if(T$O&&T$O._material===T$a._material)T$O._addBatchRenderElement(T$a);else{var T$A=T$a.renderObj;T$A.triangleCount<10&&1===T$A._vertexBufferCount&&T$A._getIndexBuffer()&&T$a._material.renderQueue<2&&T$a._canDynamicBatch&&!T$m._owner.isStatic?T$j._addPrepareRenderElement(T$a):T$C.getRenderQueue(T$a._material.renderQueue)._addRenderElement(T$a);}}}}for(T$c=0,T$l=T$b.length;T$c<T$l;T$c++)T$b[T$c]._addToRenderQueue(T$C,T$E,T$y,T$p);T$j._finishCombineDynamicBatch(T$C),T$j._addToRenderQueue(T$C,T$E,T$y,T$p);},T$n.renderObjectCullingOctree=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c=0,T$l=0,T$W=T$C._quenes,T$q=T$C._dynamicBatchManager;for(T$c=0,T$l=T$W.length;T$c<T$l;T$c++){var T$J=T$W[T$c];T$J&&T$J._clearRenderElements();}var T$j=T$En._staticBatchManagers;for(T$c=0,T$l=T$j.length;T$c<T$l;T$c++)T$j[T$c]._clearRenderElements();for(T$q._clearRenderElements(),T$C._cullingRenders.length=0,T$C.treeRoot.cullingObjects(T$n,!0,0,T$_.transform.position,T$p),T$c=0,T$l=T$j.length;T$c<T$l;T$c++)T$j[T$c]._addToRenderQueue(T$C,T$E,T$y,T$p);T$q._finishCombineDynamicBatch(T$C),T$q._addToRenderQueue(T$C,T$E,T$y,T$p);},T$n.renderObjectCullingNoBoundFrustum=function(T$n,T$C,T$_,T$E,T$y){var T$p=0,T$c=0,T$l=0,T$W=0,T$q=T$n._quenes,T$J=T$n._dynamicBatchManager,T$j=T$n._cullingRenders;for(T$p=0,T$c=T$q.length;T$p<T$c;T$p++){var T$P=T$q[T$p];T$P&&T$P._clearRenderElements();}var T$x=T$En._staticBatchManagers;for(T$p=0,T$c=T$x.length;T$p<T$c;T$p++)T$x[T$p]._clearRenderElements();T$J._clearRenderElements();var T$b=T$C.transform.position;for(T$p=0,T$c=T$n._cullingRendersLength;T$p<T$c;T$p++){var T$r=T$j[T$p];if(T$g.isVisible(T$r._owner.layer.mask)&&T$r.enable){T$r._renderUpdate(T$y),T$r._distanceForSort=T$cC.distance(T$r.boundingSphere.center,T$b)+T$r.sortingFudge;var T$m=T$r._renderElements;for(T$l=0,T$W=T$m.length;T$l<T$W;T$l++){var T$d=T$m[T$l],T$a=T$d._staticBatch;if(T$a&&T$a._material===T$d._material)T$a._addBatchRenderElement(T$d);else{var T$O=T$d.renderObj;T$O.triangleCount<10&&1===T$O._vertexBufferCount&&T$O._getIndexBuffer()&&T$d._material.renderQueue<2&&T$d._canDynamicBatch&&!T$r._owner.isStatic?T$J._addPrepareRenderElement(T$d):T$n.getRenderQueue(T$d._material.renderQueue)._addRenderElement(T$d);}}}}for(T$p=0,T$c=T$x.length;T$p<T$c;T$p++)T$x[T$p]._addToRenderQueue(T$n,T$_,T$E,T$y);T$J._finishCombineDynamicBatch(T$n),T$J._addToRenderQueue(T$n,T$_,T$E,T$y);},T$n;}(),T$En=function(){function T$p(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={};}T$x(T$p,"laya.d3.graphics.StaticBatchManager");var T$n=T$p.prototype;return T$n._finishInit=function(){for(var T$n in this._staticBatches)this._staticBatches[T$n]._finishInit();this._initBatchRenderElements.length=0;},T$n._initStaticBatchs=function(T$n){throw new Error("StaticBatchManager:must override this function.");},T$n._addInitBatchSprite=function(T$n){for(var T$C=T$n._render._renderElements,T$_=0,T$E=T$C.length;T$_<T$E;T$_++)this._initBatchRenderElements.push(T$C[T$_]);},T$n._clearRenderElements=function(){for(var T$n in this._staticBatches)this._staticBatches[T$n]._clearRenderElements();},T$n._garbageCollection=function(T$n){var T$C=T$n._staticBatch,T$_=T$C._initBatchRenderElements,T$E=T$_.indexOf(T$n);T$_.splice(T$E,1),0===T$_.length&&(T$C.dispose(),delete this._staticBatches[T$C._key]);},T$n._addToRenderQueue=function(T$n,T$C,T$_,T$E){for(var T$y in this._staticBatches){var T$p=this._staticBatches[T$y];0<T$p._batchRenderElements.length&&T$p._updateToRenderQueue(T$n,T$E);}},T$n.dispose=function(){this._staticBatches=null;},T$p._addToStaticBatchQueue=function(T$n){T$n instanceof laya.d3.core.RenderableSprite3D&&T$n._addToInitStaticBatchManager();for(var T$C=0,T$_=T$n.numChildren;T$C<T$_;T$C++)T$p._addToStaticBatchQueue(T$n._childs[T$C]);},T$p.combine=function(T$n,T$C){var T$_,T$E=0,T$y=0;if(T$C)for(T$E=0,T$y=T$C.length;T$E<T$y;T$E++){T$C[T$E]._addToInitStaticBatchManager();}else T$n&&T$p._addToStaticBatchQueue(T$n);for(T$E=0,T$y=T$p._staticBatchManagers.length;T$E<T$y;T$E++)(T$_=T$p._staticBatchManagers[T$E])._initStaticBatchs(T$n),T$_._finishInit();},T$p._staticBatchManagers=[],T$p;}(),T$yn=function(){function T$n(T$n,T$C,T$_){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=T$n,this._manager=T$C,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=T$_;}T$x(T$n,"laya.d3.graphics.StaticBatch");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),T$C._binarySearch=function(T$n){for(var T$C=0,T$_=this._batchRenderElements.length-1,T$E=0;T$C<=T$_;)T$E=Math.floor((T$C+T$_)/2),this._compareBatchRenderElement(this._batchRenderElements[T$E],T$n)?T$_=T$E-1:T$C=T$E+1;return T$C;},T$C._compareBatchRenderElement=function(T$n,T$C){throw new Error("StaticBatch:must override this function.");},T$C._getVertexDecLightMap=function(T$n){return T$n===T$fn.vertexDeclaration?T$gn.vertexDeclaration:T$n===T$in.vertexDeclaration?T$Vn.vertexDeclaration:T$n===T$sn.vertexDeclaration?T$An.vertexDeclaration:T$n===T$un.vertexDeclaration?null:T$n===T$rn.vertexDeclaration?T$mn.vertexDeclaration:T$n===T$Gn.vertexDeclaration?T$Xn.vertexDeclaration:T$n===T$wn.vertexDeclaration?T$Bn.vertexDeclaration:T$n===T$en.vertexDeclaration?T$Hn.vertexDeclaration:T$n===T$in.vertexDeclaration?T$Vn.vertexDeclaration:T$n===T$Nn.vertexDeclaration?T$kn.vertexDeclaration:T$n===T$un.vertexDeclaration?null:T$n===T$rn.vertexDeclaration?T$mn.vertexDeclaration:T$n===T$Fn.vertexDeclaration?T$$n.vertexDeclaration:T$n===T$wn.vertexDeclaration?T$Bn.vertexDeclaration:T$n;},T$C._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.");},T$C._addBatchRenderElement=function(T$n){this._batchRenderElements.splice(this._binarySearch(T$n),0,T$n);},T$C._updateToRenderQueue=function(T$n,T$C){this._combineRenderElementPoolIndex=0,this._getRenderElement(T$n.getRenderQueue(this._material.renderQueue)._renderElements,T$n,T$C);},T$C._getRenderElement=function(T$n,T$C,T$_){throw new Error("StaticBatch:must override this function.");},T$C._finishInit=function(){throw new Error("StaticBatch:must override this function.");},T$C._clearRenderElements=function(){this._batchRenderElements.length=0;},T$C.dispose=function(){},T$C._getVertexBuffer=function(T$n){return void 0===T$n&&(T$n=0),null;},T$C._getIndexBuffer=function(){return null;},T$C._beforeRender=function(T$n){return!0;},T$C._render=function(T$n){},T$C._getVertexBuffers=function(){return null;},T$b(0,T$C,"_vertexBufferCount",function(){return 1;}),T$b(0,T$C,"triangleCount",function(){return 0;}),T$n.combine=function(T$n){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),T$En.combine(T$n);},T$n.maxBatchVertexCount=65535,T$n;}(),T$pn=function(){function T$c(T$n,T$C){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++T$c._uniqueIDCounter,this._id>T$c.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",T$c.maxVertexDeclaration);this._shaderValues=new T$PC(),this._vertexElementsDic={},this._vertexStride=T$n,this._vertexElements=T$C;for(var T$_=0;T$_<T$C.length;T$_++){var T$E=T$C[T$_],T$y=T$E.elementUsage;this._vertexElementsDic[T$y]=T$E;var T$p=[T$c._getTypeSize(T$E.elementFormat)/4,5126,!1,this._vertexStride,T$E.offset];switch(this._shaderValues.setValue(T$y,T$p),T$y){case 1:this._addShaderDefine(T$YC.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(T$YC.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(T$YC.SHADERDEFINE_UV1);}}}T$x(T$c,"laya.d3.graphics.VertexDeclaration");var T$n=T$c.prototype;return T$n._addShaderDefine=function(T$n){this._shaderDefineValue|=T$n;},T$n._removeShaderDefine=function(T$n){this._shaderDefineValue&=~T$n;},T$n.getVertexElements=function(){return this._vertexElements.slice();},T$n.getVertexElementByUsage=function(T$n){return this._vertexElementsDic[T$n];},T$n.unBinding=function(){},T$b(0,T$n,"shaderDefineValue",function(){return this._shaderDefineValue;}),T$b(0,T$n,"id",function(){return this._id;}),T$b(0,T$n,"vertexStride",function(){return this._vertexStride;}),T$b(0,T$n,"shaderValues",function(){return this._shaderValues;}),T$c._getTypeSize=function(T$n){switch(T$n){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8;}return 0;},T$c.getVertexStride=function(T$n){for(var T$C=0,T$_=0;T$_<T$n.Length;T$_++){var T$E=T$n[T$_],T$y=T$E.offset+T$c._getTypeSize(T$E.elementFormat);T$C<T$y&&(T$C=T$y);}return T$C;},T$c._maxVertexDeclarationBit=1e3,T$c._uniqueIDCounter=1,T$j(T$c,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647);}]),T$c;}(),T$cn=function(){function T$n(T$n,T$C,T$_){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=T$n,this.elementFormat=T$C,this.elementUsage=T$_;}return T$x(T$n,"laya.d3.graphics.VertexElement"),T$n;}(),T$ln=(function(){function T$n(){}T$x(T$n,"laya.d3.graphics.VertexElementFormat"),T$n.Single="single",T$n.Vector2="vector2",T$n.Vector3="vector3",T$n.Vector4="vector4",T$n.Color="color",T$n.Byte4="byte4",T$n.Short2="short2",T$n.Short4="short4",T$n.NormalizedShort2="normalizedshort2",T$n.NormalizedShort4="normalizedshort4",T$n.HalfVector2="halfvector2",T$n.HalfVector4="halfvector4";}(),function(){function T$n(){}T$x(T$n,"laya.d3.graphics.VertexElementUsage"),T$n.POSITION0=0,T$n.COLOR0=1,T$n.TEXTURECOORDINATE0=2,T$n.NORMAL0=3,T$n.BINORMAL0=4,T$n.TANGENT0=5,T$n.BLENDINDICES0=6,T$n.BLENDWEIGHT0=7,T$n.DEPTH0=8,T$n.FOG0=9,T$n.POINTSIZE0=10,T$n.SAMPLE0=11,T$n.TESSELLATEFACTOR0=12,T$n.COLOR1=13,T$n.NEXTTEXTURECOORDINATE0=14,T$n.TEXTURECOORDINATE1=15,T$n.NEXTTEXTURECOORDINATE1=16,T$n.CORNERTEXTURECOORDINATE0=17,T$n.VELOCITY0=18,T$n.STARTCOLOR0=19,T$n.STARTSIZE=20,T$n.AGEADDSCALE0=21,T$n.STARTROTATION=22,T$n.ENDCOLOR0=23,T$n.STARTLIFETIME=24,T$n.TIME0=33,T$n.SHAPEPOSITIONSTARTLIFETIME=30,T$n.DIRECTIONTIME=32,T$n.SIZEROTATION0=27,T$n.RADIUS0=28,T$n.RADIAN0=29,T$n.STARTSPEED=31,T$n.RANDOM0=34,T$n.RANDOM1=35,T$n.SIMULATIONWORLDPOSTION=36,T$n.SIMULATIONWORLDROTATION=37,T$n.TEXTURECOORDINATE0X=38,T$n.TEXTURECOORDINATE0X1=39,T$n.TEXTURECOORDINATE0Y=40,T$n.OFFSETVECTOR=41;}(),function(){function T$n(T$n,T$C,T$_){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=T$n,this._textureCoordinate0=T$C,this._time=T$_;}T$x(T$n,"laya.d3.graphics.VertexGlitter");var T$C=T$n.prototype;T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"textureCoordinate",function(){return this._textureCoordinate0;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"time",function(){return this._time;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(24,[new T$cn(0,"vector3",0),new T$cn(12,"vector2",2),new T$cn(20,"single",33)]);}]);}(),function(){function T$n(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=T$n,this._position=T$C,this._velocity=T$_,this._startColor=T$E,this._endColor=T$y,this._sizeRotation=T$p,this._radius=T$c,this._radian=T$l,this._ageAddScale=T$W,this._time=T$q;}T$x(T$n,"laya.d3.graphics.VertexParticle");var T$C=T$n.prototype;T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"endColor",function(){return this._endColor;}),T$b(0,T$C,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate;}),T$b(0,T$C,"sizeRotation",function(){return this._sizeRotation;}),T$b(0,T$C,"velocity",function(){return this._velocity;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"startColor",function(){return this._startColor;}),T$b(0,T$C,"radius",function(){return this._radius;}),T$b(0,T$C,"radian",function(){return this._radian;}),T$b(0,T$C,"ageAddScale",function(){return this._ageAddScale;}),T$b(0,T$C,"time",function(){return this._time;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(116,[new T$cn(0,"vector4",17),new T$cn(16,"vector3",0),new T$cn(28,"vector3",18),new T$cn(40,"vector4",19),new T$cn(56,"vector4",23),new T$cn(72,"vector3",27),new T$cn(84,"vector2",28),new T$cn(92,"vector4",29),new T$cn(108,"single",24),new T$cn(112,"single",33)]);}]);}(),function(){function T$n(T$n){this._position=null,this._position=T$n;}T$x(T$n,"laya.d3.graphics.VertexPosition");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(12,[new T$cn(0,"vector3",0)]);}]),T$n;}()),T$Wn=function(){function T$n(T$n,T$C){this._position=null,this._normal=null,this._position=T$n,this._normal=T$C;}T$x(T$n,"laya.d3.graphics.VertexPositionNormal");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(24,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3)]);}]),T$n;}(),T$qn=function(){function T$n(T$n,T$C,T$_){this._position=null,this._normal=null,this._color=null,this._position=T$n,this._normal=T$C,this._color=T$_;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalColor");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"color",function(){return this._color;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(40,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector4",1)]);}]),T$n;}(),T$Jn=function(){function T$n(T$n,T$C,T$_,T$E,T$y){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=T$n,this._normal=T$C,this._color=T$_,this._blendIndex=T$E,this._blendWeight=T$y;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalColorSkin");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"blendWeight",function(){return this._blendWeight;}),T$b(0,T$C,"color",function(){return this._color;}),T$b(0,T$C,"blendIndex",function(){return this._blendIndex;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(72,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector4",1),new T$cn(40,"vector4",7),new T$cn(56,"vector4",6)]);}]),T$n;}(),T$jn=function(){function T$n(T$n,T$C,T$_,T$E,T$y,T$p){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$n,this._normal=T$C,this._color=T$_,this._tangent=T$E,this._blendIndex=T$y,this._blendWeight=T$p;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"blendWeight",function(){return this._blendWeight;}),T$b(0,T$C,"color",function(){return this._color;}),T$b(0,T$C,"blendIndex",function(){return this._blendIndex;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(88,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector4",1),new T$cn(40,"vector4",7),new T$cn(56,"vector4",6),new T$cn(72,"vector4",5)]);}]),T$n;}(),T$Pn=function(){function T$n(T$n,T$C,T$_,T$E,T$y,T$p){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$n,this._normal=T$C,this._color=T$_,this._tangent=T$E,this._blendIndex=T$y,this._blendWeight=T$p;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"blendWeight",function(){return this._blendWeight;}),T$b(0,T$C,"color",function(){return this._color;}),T$b(0,T$C,"blendIndex",function(){return this._blendIndex;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(84,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector4",1),new T$cn(40,"vector4",7),new T$cn(56,"vector4",6),new T$cn(72,"vector3",5)]);}]),T$n;}(),T$xn=function(){function T$n(T$n,T$C,T$_,T$E){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=T$n,this._normal=T$C,this._color=T$_,this._tangent=T$E;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalColorSTangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"color",function(){return this._color;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(56,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector4",1),new T$cn(40,"vector4",5)]);}]),T$n;}(),T$bn=function(){function T$n(T$n,T$C,T$_,T$E){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=T$n,this._normal=T$C,this._color=T$_,this._tangent=T$E;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalColorTangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"color",function(){return this._color;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(52,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector4",1),new T$cn(40,"vector3",5)]);}]),T$n;}(),T$rn=function(){function T$n(T$n,T$C,T$_,T$E){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=T$n,this._normal=T$C,this._color=T$_,this._textureCoordinate=T$E;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalColorTexture");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"textureCoordinate",function(){return this._textureCoordinate;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"color",function(){return this._color;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(48,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector4",1),new T$cn(40,"vector2",2)]);}]),T$n;}(),T$mn=function(){function T$n(T$n,T$C,T$_,T$E,T$y){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=T$n,this._normal=T$C,this._color=T$_,this._textureCoordinate0=T$E,this._textureCoordinate1=T$y;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"color",function(){return this._color;}),T$b(0,T$C,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(0,T$C,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(56,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector4",1),new T$cn(40,"vector2",2),new T$cn(48,"vector2",15)]);}]),T$n;}(),T$dn=function(){function T$n(T$n,T$C,T$_,T$E,T$y,T$p,T$c){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=T$n,this._normal=T$C,this._color=T$_,this._textureCoordinate0=T$E,this._textureCoordinate1=T$y,this._blendIndex=T$p,this._blendWeight=T$c;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"blendWeight",function(){return this._blendWeight;}),T$b(0,T$C,"color",function(){return this._color;}),T$b(0,T$C,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(0,T$C,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$b(0,T$C,"blendIndex",function(){return this._blendIndex;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(88,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector4",1),new T$cn(40,"vector2",2),new T$cn(48,"vector2",15),new T$cn(56,"vector4",7),new T$cn(72,"vector4",6)]);}]),T$n;}(),T$an=function(){function T$n(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$n,this._normal=T$C,this._color=T$_,this._textureCoordinate0=T$E,this._textureCoordinate1=T$y,this._tangent=T$p,this._blendIndex=T$c,this._blendWeight=T$l;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"blendWeight",function(){return this._blendWeight;}),T$b(0,T$C,"color",function(){return this._color;}),T$b(0,T$C,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(0,T$C,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$b(0,T$C,"blendIndex",function(){return this._blendIndex;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(104,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector4",1),new T$cn(40,"vector2",2),new T$cn(48,"vector2",15),new T$cn(56,"vector4",7),new T$cn(72,"vector4",6),new T$cn(88,"vector4",5)]);}]),T$n;}(),T$On=function(){function T$n(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$C.VertexPositionNormalColorTexture0SkinTangent=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){this._position=T$n,this._normal=T$C,this._color=T$_,this._textureCoordinate0=T$E,this._textureCoordinate1=T$y,this._tangent=T$p,this._blendIndex=T$c,this._blendWeight=T$l;},T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"blendWeight",function(){return this._blendWeight;}),T$b(0,T$C,"color",function(){return this._color;}),T$b(0,T$C,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(0,T$C,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$b(0,T$C,"blendIndex",function(){return this._blendIndex;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(100,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector4",1),new T$cn(40,"vector2",2),new T$cn(48,"vector2",15),new T$cn(56,"vector4",7),new T$cn(72,"vector4",6),new T$cn(88,"vector3",5)]);}]),T$n;}(),T$An=function(){function T$n(T$n,T$C,T$_,T$E,T$y,T$p){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=T$n,this._normal=T$C,this._color=T$_,this._textureCoordinate0=T$E,this._textureCoordinate1=T$y,this._tangent=T$p;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"color",function(){return this._color;}),T$b(0,T$C,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(0,T$C,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(72,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector4",1),new T$cn(40,"vector2",2),new T$cn(48,"vector2",15),new T$cn(56,"vector4",5)]);}]),T$n;}(),T$kn=function(){function T$n(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$C.VertexPositionNormalColorTexture0Tangent=function(T$n,T$C,T$_,T$E,T$y,T$p){this._position=T$n,this._normal=T$C,this._color=T$_,this._textureCoordinate0=T$E,this._textureCoordinate1=T$y,this._tangent=T$p;},T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"color",function(){return this._color;}),T$b(0,T$C,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(0,T$C,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(68,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector4",1),new T$cn(40,"vector2",2),new T$cn(48,"vector2",15),new T$cn(56,"vector3",5)]);}]),T$n;}(),T$tn=function(){function T$n(T$n,T$C,T$_,T$E,T$y,T$p){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=T$n,this._normal=T$C,this._color=T$_,this._textureCoordinate=T$E,this._blendIndex=T$y,this._blendWeight=T$p;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"textureCoordinate",function(){return this._textureCoordinate;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"blendWeight",function(){return this._blendWeight;}),T$b(0,T$C,"color",function(){return this._color;}),T$b(0,T$C,"blendIndex",function(){return this._blendIndex;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(80,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector4",1),new T$cn(40,"vector2",2),new T$cn(48,"vector4",7),new T$cn(64,"vector4",6)]);}]),T$n;}(),T$Tn=function(){function T$n(T$n,T$C,T$_,T$E,T$y,T$p,T$c){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$n,this._normal=T$C,this._color=T$_,this._textureCoordinate=T$E,this._tangent=T$y,this._blendIndex=T$p,this._blendWeight=T$c;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"textureCoordinate",function(){return this._textureCoordinate;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"blendWeight",function(){return this._blendWeight;}),T$b(0,T$C,"color",function(){return this._color;}),T$b(0,T$C,"blendIndex",function(){return this._blendIndex;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(96,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector4",1),new T$cn(40,"vector2",2),new T$cn(48,"vector4",7),new T$cn(64,"vector4",6),new T$cn(80,"vector4",5)]);}]),T$n;}(),T$Yn=function(){function T$n(T$n,T$C,T$_,T$E,T$y,T$p,T$c){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$n,this._normal=T$C,this._color=T$_,this._textureCoordinate=T$E,this._tangent=T$y,this._blendIndex=T$p,this._blendWeight=T$c;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"textureCoordinate",function(){return this._textureCoordinate;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"blendWeight",function(){return this._blendWeight;}),T$b(0,T$C,"color",function(){return this._color;}),T$b(0,T$C,"blendIndex",function(){return this._blendIndex;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(92,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector4",1),new T$cn(40,"vector2",2),new T$cn(48,"vector4",7),new T$cn(64,"vector4",6),new T$cn(80,"vector3",5)]);}]),T$n;}(),T$sn=function(){function T$n(T$n,T$C,T$_,T$E,T$y){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=T$n,this._normal=T$C,this._color=T$_,this._textureCoordinate=T$E,this._tangent=T$y;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"textureCoordinate",function(){return this._textureCoordinate;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"color",function(){return this._color;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(64,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector4",1),new T$cn(40,"vector2",2),new T$cn(48,"vector4",5)]);}]),T$n;}(),T$Nn=function(){function T$n(T$n,T$C,T$_,T$E,T$y){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=T$n,this._normal=T$C,this._color=T$_,this._textureCoordinate=T$E,this._tangent=T$y;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"textureCoordinate",function(){return this._textureCoordinate;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"color",function(){return this._color;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(60,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector4",1),new T$cn(40,"vector2",2),new T$cn(48,"vector3",5)]);}]),T$n;}(),T$Sn=function(){function T$n(T$n,T$C,T$_){this._position=null,this._normal=null,this._tangent=null,this._position=T$n,this._normal=T$C,this._tangent=T$_;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalSTangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(40,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector4",5)]);}]),T$n;}(),T$Mn=function(){function T$n(T$n,T$C,T$_){this._position=null,this._normal=null,this._tangent=null,this._position=T$n,this._normal=T$C,this._tangent=T$_;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalTangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(36,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector3",5)]);}]),T$n;}(),T$wn=function(){function T$n(T$n,T$C,T$_){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=T$n,this._normal=T$C,this._textureCoordinate=T$_;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalTexture");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"textureCoordinate",function(){return this._textureCoordinate;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(32,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector2",2)]);}]),T$n;}(),T$Bn=function(){function T$n(T$n,T$C,T$_,T$E){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=T$n,this._normal=T$C,this._textureCoordinate0=T$_,this._textureCoordinate1=T$E;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(0,T$C,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(40,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector2",2),new T$cn(32,"vector2",15)]);}]),T$n;}(),T$Vn=function(){function T$n(T$n,T$C,T$_,T$E,T$y,T$p){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=T$n,this._normal=T$C,this._textureCoordinate0=T$_,this._textureCoordinate1=T$E,this._blendIndex=T$y,this._blendWeight=T$p;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(0,T$C,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$b(0,T$C,"blendIndex",function(){return this._blendIndex;}),T$b(0,T$C,"blendWeight",function(){return this._blendWeight;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(72,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector2",2),new T$cn(32,"vector2",15),new T$cn(40,"vector4",7),new T$cn(56,"vector4",6)]);}]),T$n;}(),T$gn=function(){function T$n(T$n,T$C,T$_,T$E,T$y,T$p,T$c){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$n,this._normal=T$C,this._textureCoordinate0=T$_,this._textureCoordinate1=T$E,this._tangent=T$y,this._blendIndex=T$p,this._blendWeight=T$c;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(0,T$C,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$b(0,T$C,"blendIndex",function(){return this._blendIndex;}),T$b(0,T$C,"blendWeight",function(){return this._blendWeight;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(88,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector2",2),new T$cn(32,"vector2",15),new T$cn(40,"vector4",7),new T$cn(56,"vector4",6),new T$cn(72,"vector4",5)]);}]),T$n;}(),T$Hn=function(){function T$n(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$C.VertexPositionNormalTexture0SkinTangent=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){this._position=T$n,this._normal=T$C,this._textureCoordinate0=T$_,this._textureCoordinate1=T$E,this._tangent=T$y,this._blendIndex=T$p,this._blendWeight=T$c;},T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(0,T$C,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$b(0,T$C,"blendIndex",function(){return this._blendIndex;}),T$b(0,T$C,"blendWeight",function(){return this._blendWeight;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(84,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector2",2),new T$cn(32,"vector2",15),new T$cn(40,"vector4",7),new T$cn(56,"vector4",6),new T$cn(72,"vector3",5)]);}]),T$n;}(),T$Xn=function(){function T$n(T$n,T$C,T$_,T$E,T$y){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=T$n,this._normal=T$C,this._textureCoordinate0=T$_,this._textureCoordinate1=T$E,this._tangent=T$y;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(0,T$C,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(56,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector2",2),new T$cn(32,"vector2",15),new T$cn(40,"vector4",5)]);}]),T$n;}(),T$$n=function(){function T$n(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$C.VertexPositionNormalTexture0Tangent=function(T$n,T$C,T$_,T$E,T$y){this._position=T$n,this._normal=T$C,this._textureCoordinate0=T$_,this._textureCoordinate1=T$E,this._tangent=T$y;},T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(0,T$C,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(52,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector2",2),new T$cn(32,"vector2",15),new T$cn(40,"vector3",5)]);}]),T$n;}(),T$in=function(){function T$n(T$n,T$C,T$_,T$E,T$y){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=T$n,this._normal=T$C,this._textureCoordinate=T$_,this._blendIndex=T$E,this._blendWeight=T$y;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalTextureSkin");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"textureCoordinate",function(){return this._textureCoordinate;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"blendIndex",function(){return this._blendIndex;}),T$b(0,T$C,"blendWeight",function(){return this._blendWeight;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(64,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector2",2),new T$cn(32,"vector4",7),new T$cn(48,"vector4",6)]);}]),T$n;}(),T$fn=function(){function T$n(T$n,T$C,T$_,T$E,T$y,T$p){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$n,this._normal=T$C,this._textureCoordinate=T$_,this._tangent=T$E,this._blendIndex=T$y,this._blendWeight=T$p;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"textureCoordinate",function(){return this._textureCoordinate;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"blendIndex",function(){return this._blendIndex;}),T$b(0,T$C,"blendWeight",function(){return this._blendWeight;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(80,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector2",2),new T$cn(32,"vector4",7),new T$cn(48,"vector4",6),new T$cn(64,"vector4",5)]);}]),T$n;}(),T$en=function(){function T$n(T$n,T$C,T$_,T$E,T$y,T$p){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$n,this._normal=T$C,this._textureCoordinate=T$_,this._tangent=T$E,this._blendIndex=T$y,this._blendWeight=T$p;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"textureCoordinate",function(){return this._textureCoordinate;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"blendIndex",function(){return this._blendIndex;}),T$b(0,T$C,"blendWeight",function(){return this._blendWeight;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(76,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector2",2),new T$cn(32,"vector4",7),new T$cn(48,"vector4",6),new T$cn(64,"vector3",5)]);}]),T$n;}(),T$Gn=function(){function T$n(T$n,T$C,T$_,T$E){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=T$n,this._normal=T$C,this._textureCoordinate=T$_,this._tangent=T$E;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"textureCoordinate",function(){return this._textureCoordinate;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(48,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector2",2),new T$cn(32,"vector4",5)]);}]),T$n;}(),T$Fn=function(){function T$n(T$n,T$C,T$_,T$E){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=T$n,this._normal=T$C,this._textureCoordinate=T$_,this._tangent=T$E;}T$x(T$n,"laya.d3.graphics.VertexPositionNormalTextureTangent");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"textureCoordinate",function(){return this._textureCoordinate;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(44,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector2",2),new T$cn(32,"vector3",5)]);}]),T$n;}(),T$un=function(){function T$n(T$n,T$C,T$_){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=T$n,this._normal=T$C,this._textureCoordinate=T$_;}T$x(T$n,"laya.d3.graphics.VertexPositionNTBTexture");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"textureCoordinate",function(){return this._textureCoordinate;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(56,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector3",5),new T$cn(36,"vector3",4),new T$cn(48,"vector2",2)]);}]),T$n;}(),T$on=function(){function T$n(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=T$n,this._normal=T$C,this._textureCoordinate0=T$E,this._textureCoordinate1=T$y,this._tangent=T$p,T$_=T$_,this._blendIndex=T$c,this._blendWeight=T$l;}T$x(T$n,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"tangent",function(){return this._tangent;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(0,T$C,"textureCoordinate1",function(){return this._textureCoordinate1;}),T$b(0,T$C,"blendIndex",function(){return this._blendIndex;}),T$b(0,T$C,"blendWeight",function(){return this._blendWeight;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(96,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector3",5),new T$cn(36,"vector3",4),new T$cn(48,"vector2",2),new T$cn(56,"vector2",15),new T$cn(64,"vector4",7),new T$cn(80,"vector4",6)]);}]),T$n;}(),T$Qn=function(){function T$n(T$n,T$C,T$_){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=T$n,this._normal=T$C,this._textureCoordinate=T$_;}T$x(T$n,"laya.d3.graphics.VertexPositionNTBTextureSkin");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"textureCoordinate",function(){return this._textureCoordinate;}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(88,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector3",5),new T$cn(36,"vector3",4),new T$cn(48,"vector2",2),new T$cn(56,"vector4",7),new T$cn(72,"vector4",6)]);}]),T$n;}(),T$In=(function(){function T$n(T$n,T$C,T$_,T$E){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=T$n,this._normal=T$C,this._textureCoord0=T$_,this._textureCoord1=T$E;}T$x(T$n,"laya.d3.graphics.VertexPositionTerrain");var T$C=T$n.prototype;T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"normal",function(){return this._normal;}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"textureCoord0",function(){return this._textureCoord0;}),T$b(0,T$C,"textureCoord1",function(){return this._textureCoord1;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(40,[new T$cn(0,"vector3",0),new T$cn(12,"vector3",3),new T$cn(24,"vector2",2),new T$cn(32,"vector2",15)]);}]);}(),function(){function T$n(T$n,T$C){this._position=null,this._textureCoordinate0=null,this._position=T$n,this._textureCoordinate0=T$C;}T$x(T$n,"laya.d3.graphics.VertexPositionTexture0");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"position",function(){return this._position;}),T$b(0,T$C,"textureCoordinate0",function(){return this._textureCoordinate0;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(20,[new T$cn(0,"vector3",0),new T$cn(12,"vector2",2)]);}]),T$n;}()),T$Zn=(function(){function T$n(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q,T$J,T$j,T$P,T$x){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=T$n,this._positionStartLifeTime=T$C,this._velocity=T$_,this._startColor=T$E,this._startSize=T$y,this._startRotation0=T$p,this._startRotation1=T$c,this._startRotation2=T$l,this._startLifeTime=T$W,this._time=T$q,this._startSpeed=T$J,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=T$x;}T$x(T$n,"laya.d3.graphics.VertexShurikenParticleBillboard");var T$C=T$n.prototype;T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate;}),T$b(0,T$C,"random1",function(){return this._randoms1;}),T$b(0,T$C,"startRotation2",function(){return this._startRotation2;}),T$b(0,T$C,"positionStartLifeTime",function(){return this._positionStartLifeTime;}),T$b(0,T$C,"velocity",function(){return this._velocity;}),T$b(0,T$C,"random0",function(){return this._randoms0;}),T$b(0,T$C,"startSize",function(){return this._startSize;}),T$b(0,T$C,"startColor",function(){return this._startColor;}),T$b(0,T$C,"startRotation0",function(){return this._startRotation0;}),T$b(0,T$C,"startRotation1",function(){return this._startRotation1;}),T$b(0,T$C,"startLifeTime",function(){return this._startLifeTime;}),T$b(0,T$C,"time",function(){return this._time;}),T$b(0,T$C,"startSpeed",function(){return this._startSpeed;}),T$b(0,T$C,"simulationWorldPostion",function(){return this._simulationWorldPostion;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(152,[new T$cn(0,"vector4",17),new T$cn(16,"vector4",30),new T$cn(32,"vector4",32),new T$cn(48,"vector4",19),new T$cn(64,"vector3",20),new T$cn(76,"vector3",22),new T$cn(88,"single",31),new T$cn(92,"vector4",34),new T$cn(108,"vector4",35),new T$cn(124,"vector3",36),new T$cn(136,"vector4",37)]);}]);}(),function(){function T$n(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q,T$J,T$j,T$P,T$x){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=T$n,this._positionStartLifeTime=T$C,this._velocity=T$_,this._startColor=T$E,this._startSize=T$y,this._startRotation0=T$p,this._startRotation1=T$c,this._startRotation2=T$l,this._startLifeTime=T$W,this._time=T$q,this._startSpeed=T$J,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=T$x;}T$x(T$n,"laya.d3.graphics.VertexShurikenParticleMesh");var T$C=T$n.prototype;T$k.imps(T$C,{"laya.d3.graphics.IVertex":!0}),T$b(0,T$C,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate;}),T$b(0,T$C,"velocity",function(){return this._velocity;}),T$b(0,T$C,"position",function(){return this._positionStartLifeTime;}),T$b(0,T$C,"random0",function(){return this._randoms0;}),T$b(0,T$C,"startSize",function(){return this._startSize;}),T$b(0,T$C,"startColor",function(){return this._startColor;}),T$b(0,T$C,"startRotation0",function(){return this._startRotation0;}),T$b(0,T$C,"startRotation1",function(){return this._startRotation1;}),T$b(0,T$C,"random1",function(){return this._randoms1;}),T$b(0,T$C,"startRotation2",function(){return this._startRotation2;}),T$b(0,T$C,"startLifeTime",function(){return this._startLifeTime;}),T$b(0,T$C,"time",function(){return this._time;}),T$b(0,T$C,"startSpeed",function(){return this._startSpeed;}),T$b(0,T$C,"simulationWorldPostion",function(){return this._simulationWorldPostion;}),T$b(0,T$C,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$b(1,T$n,"vertexDeclaration",function(){return T$n._vertexDeclaration;}),T$j(T$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$pn(172,[new T$cn(0,"vector3",0),new T$cn(12,"vector4",1),new T$cn(28,"vector2",2),new T$cn(36,"vector4",30),new T$cn(52,"vector4",32),new T$cn(68,"vector4",19),new T$cn(84,"vector3",20),new T$cn(96,"vector3",22),new T$cn(108,"single",31),new T$cn(112,"vector4",34),new T$cn(128,"vector4",35),new T$cn(144,"vector3",36),new T$cn(156,"vector4",37)]);}]);}(),function(){function T$O(T$n,T$C,T$_,T$E,T$y,T$p){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=T$_,this._materials=T$E,this._subMeshes=T$y,this._materialMap=T$p,this._version=T$C,this._onLoaded(T$n);}T$x(T$O,"laya.d3.loaders.LoadModelV01");var T$n=T$O.prototype;return T$n._onLoaded=function(T$n){this._readData=T$n,this.READ_BLOCK();for(var T$C=0;T$C<this._BLOCK.count;T$C++){var T$_=this._readData.getUint16(),T$E=this._strings[T$_],T$y=this["READ_"+T$E];if(null==T$y)throw new Error("model file err,no this function:"+T$_+" "+T$E);if(!T$y.call(this))break;}return this._mesh;},T$n.onError=function(){},T$n._readString=function(){return this._strings[this._readData.getUint16()];},T$n.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0;},T$n.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0;},T$n.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var T$n=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var T$C=0;T$C<this._STRINGS.size;T$C++)this._strings[T$C]=this._readData.readUTFString();return this._readData.pos=T$n,!0;},T$n.READ_MATERIAL=function(){var T$n=this._readData.getUint16(),T$C=(this._readString(),this._readString());return this._materials[T$n]="null"!==T$C?T$d.getRes(this._materialMap[T$C]):new T$MC(),!0;},T$n.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var T$n,T$C=this._readData.__getBuffer(),T$_=0,T$E=this._readData.getUint32(),T$y=this._readData.getUint32(),T$p=(new Float32Array(T$C.slice(T$E+this._DATA.offset,T$E+this._DATA.offset+T$y)),this._readData.getUint32()),T$c=this._readData.getUint32(),T$l=new Float32Array(T$C.slice(T$p+this._DATA.offset,T$p+this._DATA.offset+T$c));for(this.mesh._inverseBindPoses=[],T$_=0,T$n=T$l.length;T$_<T$n;T$_+=16){var T$W=new T$nC(T$l[T$_+0],T$l[T$_+1],T$l[T$_+2],T$l[T$_+3],T$l[T$_+4],T$l[T$_+5],T$l[T$_+6],T$l[T$_+7],T$l[T$_+8],T$l[T$_+9],T$l[T$_+10],T$l[T$_+11],T$l[T$_+12],T$l[T$_+13],T$l[T$_+14],T$l[T$_+15]);this.mesh._inverseBindPoses.push(T$W);}break;default:throw new Error("LoadModel:unknown version.");}return!0;},T$n.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var T$n=this._readString();this._shaderAttributes=T$n.match(T$O._attrReg);var T$C=this._readData.getUint32(),T$_=this._readData.getUint32(),T$E=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),T$y=this._readData.getUint32(),T$p=this._readData.getUint32(),T$c=this._readData.getUint32(),T$l=this._readData.__getBuffer(),T$W=new T$qC(this._mesh),T$q=this._getVertexDeclaration(),T$J=T$eC.create(T$q,T$y/T$q.vertexStride,35044,!0),T$j=T$E+this._DATA.offset,T$P=T$l.slice(T$j,T$j+T$y);T$J.setData(new Float32Array(T$P));for(var T$x=(T$W._vertexBuffer=T$J).vertexDeclaration.getVertexElements(),T$b=0;T$b<T$x.length;T$b++)T$W._bufferUsage[T$x[T$b].elementUsage]=T$J;var T$r=T$fC.create("ushort",T$_/2,35044,!0),T$m=T$C+this._DATA.offset,T$d=T$l.slice(T$m,T$m+T$_);T$r.setData(new Uint16Array(T$d)),T$W._indexBuffer=T$r;var T$a=T$l.slice(T$p+this._DATA.offset,T$p+this._DATA.offset+T$c);return T$W._boneIndicesList[0]=new Uint8Array(T$a),this._subMeshes.push(T$W),!0;},T$n.READ_DATAAREA=function(){return!1;},T$n._getVertexDeclaration=function(){for(var T$n,T$C=!1,T$_=!1,T$E=!1,T$y=!1,T$p=!1,T$c=!1,T$l=!1,T$W=!1,T$q=!1,T$J=0;T$J<this._shaderAttributes.length;T$J+=8)switch(this._shaderAttributes[T$J]){case"POSITION":T$C=!0;break;case"NORMAL":T$_=!0;break;case"COLOR":T$E=!0;break;case"UV":T$y=!0;break;case"UV1":T$p=!0;break;case"BLENDWEIGHT":T$l=!0;break;case"BLENDINDICES":T$W=!0;break;case"TANGENT":T$c=!0;break;case"BINORMAL":T$q=!0;}return T$C&&T$_&&T$E&&T$y&&T$p&&T$l&&T$W&&T$c?T$n=T$On.vertexDeclaration:T$C&&T$_&&T$E&&T$y&&T$p&&T$l&&T$W?T$n=T$dn.vertexDeclaration:T$C&&T$_&&T$y&&T$p&&T$l&&T$W&&T$c?T$n=T$Hn.vertexDeclaration:T$C&&T$_&&T$y&&T$p&&T$l&&T$W?T$n=T$Vn.vertexDeclaration:T$C&&T$_&&T$E&&T$y&&T$l&&T$W&&T$c?T$n=T$Yn.vertexDeclaration:T$C&&T$_&&T$E&&T$y&&T$l&&T$W?T$n=T$tn.vertexDeclaration:T$C&&T$_&&T$c&&T$q&&T$y&&T$l&&T$W?T$n=T$Qn.vertexDeclaration:T$C&&T$_&&T$y&&T$l&&T$W&&T$c?T$n=T$en.vertexDeclaration:T$C&&T$_&&T$y&&T$l&&T$W?T$n=T$in.vertexDeclaration:T$C&&T$_&&T$E&&T$l&&T$W&&T$c?T$n=T$Pn.vertexDeclaration:T$C&&T$_&&T$E&&T$l&&T$W?T$n=T$Jn.vertexDeclaration:T$C&&T$_&&T$E&&T$y&&T$p&&T$c?T$n=T$kn.vertexDeclaration:T$C&&T$_&&T$E&&T$y&&T$p?T$n=T$mn.vertexDeclaration:T$C&&T$_&&T$y&&T$p&&T$c?T$n=T$$n.vertexDeclaration:T$C&&T$_&&T$y&&T$p?T$n=T$Bn.vertexDeclaration:T$C&&T$_&&T$E&&T$y&&T$c?T$n=T$Nn.vertexDeclaration:T$C&&T$_&&T$y&&T$c&&T$q?T$n=T$un.vertexDeclaration:T$C&&T$_&&T$E&&T$y?T$n=T$rn.vertexDeclaration:T$C&&T$_&&T$y&&T$c?T$n=T$Fn.vertexDeclaration:T$C&&T$_&&T$y?T$n=T$wn.vertexDeclaration:T$C&&T$_&&T$E&&T$c?T$n=T$bn.vertexDeclaration:T$C&&T$_&&T$E&&(T$n=T$qn.vertexDeclaration),T$n;},T$b(0,T$n,"mesh",function(){return this._mesh;}),T$O._attrReg=new RegExp("(\\w+)|([:,;])","g"),T$O;}()),T$Ln=function(){function T$T(){}return T$x(T$T,"laya.d3.loaders.LoadModelV02"),T$T.parse=function(T$n,T$C,T$_,T$E,T$y,T$p){T$T._mesh=T$_,T$T._materials=T$E,T$T._subMeshes=T$y,T$T._materialMap=T$p,T$T._version=T$C,T$T._readData=T$n,T$T.READ_DATA(),T$T.READ_BLOCK(),T$T.READ_STRINGS();for(var T$c=0,T$l=T$T._BLOCK.count;T$c<T$l;T$c++){T$T._readData.pos=T$T._BLOCK.blockStarts[T$c];var T$W=T$T._readData.getUint16(),T$q=T$T._strings[T$W],T$J=T$T["READ_"+T$q];if(null==T$J)throw new Error("model file err,no this function:"+T$W+" "+T$q);T$J.call();}T$T._strings.length=0,T$T._readData=null,T$T._version=null,T$T._mesh=null,T$T._materials=null,T$T._subMeshes=null,T$T._materialMap=null;},T$T._readString=function(){return T$T._strings[T$T._readData.getUint16()];},T$T.READ_DATA=function(){T$T._DATA.offset=T$T._readData.getUint32(),T$T._DATA.size=T$T._readData.getUint32();},T$T.READ_BLOCK=function(){for(var T$n=T$T._BLOCK.count=T$T._readData.getUint16(),T$C=T$T._BLOCK.blockStarts=[],T$_=T$T._BLOCK.blockLengths=[],T$E=0;T$E<T$n;T$E++)T$C.push(T$T._readData.getUint32()),T$_.push(T$T._readData.getUint32());},T$T.READ_STRINGS=function(){var T$n=T$T._readData.getUint32(),T$C=T$T._readData.getUint16(),T$_=T$T._readData.pos;T$T._readData.pos=T$n+T$T._DATA.offset;for(var T$E=0;T$E<T$C;T$E++)T$T._strings[T$E]=T$T._readData.readUTFString();T$T._readData.pos=T$_;},T$T.READ_MATERIAL=function(){T$T._readString(),T$T._readString();var T$n=T$T._readString();return""!==T$n&&T$T._materials.push(T$d.getRes(T$T._materialMap[T$n])),!0;},T$T.READ_MESH=function(){T$T._readString();var T$n,T$C=T$T._readData.__getBuffer(),T$_=0,T$E=T$T._readData.getInt16(),T$y=T$T._DATA.offset;for(T$_=0;T$_<T$E;T$_++){var T$p=T$y+T$T._readData.getUint32(),T$c=T$T._readData.getUint32(),T$l=new Float32Array(T$C.slice(T$p,T$p+T$c)),T$W=T$T._readString().match(T$T._attrReg),T$q=T$T._getVertexDeclaration(T$W),T$J=T$eC.create(T$q,4*T$l.length/T$q.vertexStride,35044,!0);T$J.setData(T$l),T$T._mesh._vertexBuffers.push(T$J);}var T$j=T$y+T$T._readData.getUint32(),T$P=T$T._readData.getUint32(),T$x=new Uint16Array(T$C.slice(T$j,T$j+T$P)),T$b=T$fC.create("ushort",T$P/2,35044,!0);T$b.setData(T$x),T$T._mesh._indexBuffer=T$b;var T$r=T$T._mesh._boneNames=[],T$m=T$T._readData.getUint16();for(T$r.length=T$m,T$_=0;T$_<T$m;T$_++)T$r[T$_]=T$T._strings[T$T._readData.getUint16()];var T$d=T$T._readData.getUint32(),T$a=T$T._readData.getUint32(),T$O=(new Float32Array(T$C.slice(T$y+T$d,T$y+T$d+T$a)),T$T._readData.getUint32()),T$A=T$T._readData.getUint32(),T$k=new Float32Array(T$C.slice(T$y+T$O,T$y+T$O+T$A));for(T$T._mesh._inverseBindPoses=[],T$_=0,T$n=T$k.length;T$_<T$n;T$_+=16){var T$t=new T$nC(T$k[T$_+0],T$k[T$_+1],T$k[T$_+2],T$k[T$_+3],T$k[T$_+4],T$k[T$_+5],T$k[T$_+6],T$k[T$_+7],T$k[T$_+8],T$k[T$_+9],T$k[T$_+10],T$k[T$_+11],T$k[T$_+12],T$k[T$_+13],T$k[T$_+14],T$k[T$_+15]);T$T._mesh._inverseBindPoses.push(T$t);}return T$T._mesh._skinnedDatas=new Float32Array(16*T$k.length),!0;},T$T.READ_SUBMESH=function(){var T$n=T$T._readData.__getBuffer(),T$C=new T$qC(T$T._mesh),T$_=T$T._readData.getInt16(),T$E=T$T._readData.getUint32(),T$y=T$T._readData.getUint32();T$C._vertexBuffer=T$T._mesh._vertexBuffers[T$_],T$C._vertexStart=T$E,T$C._vertexCount=T$y;var T$p=T$T._readData.getUint32(),T$c=T$T._readData.getUint32(),T$l=T$T._mesh._indexBuffer;T$C._indexBuffer=T$l,T$C._indexStart=T$p,T$C._indexCount=T$c,T$C._indices=new Uint16Array(T$l.getData().buffer,2*T$p,T$c);var T$W=T$T._DATA.offset,T$q=T$C._subIndexBufferStart,T$J=T$C._subIndexBufferCount,T$j=T$C._boneIndicesList,T$P=T$T._readData.getUint16();T$q.length=T$P,T$J.length=T$P,T$j.length=T$P;for(var T$x=0;T$x<T$P;T$x++){T$q[T$x]=T$T._readData.getUint32(),T$J[T$x]=T$T._readData.getUint32();var T$b=T$T._readData.getUint32(),T$r=T$T._readData.getUint32();T$C._boneIndicesList[T$x]=new Uint8Array(T$n.slice(T$W+T$b,T$W+T$b+T$r));}return T$T._subMeshes.push(T$C),!0;},T$T._getVertexDeclaration=function(T$n){for(var T$C,T$_=!1,T$E=!1,T$y=!1,T$p=!1,T$c=!1,T$l=!1,T$W=!1,T$q=!1,T$J=!1,T$j=0;T$j<T$n.length;T$j++)switch(T$n[T$j]){case"POSITION":T$_=!0;break;case"NORMAL":T$E=!0;break;case"COLOR":T$y=!0;break;case"UV":T$p=!0;break;case"UV1":T$c=!0;break;case"BLENDWEIGHT":T$W=!0;break;case"BLENDINDICES":T$q=!0;break;case"TANGENT":T$l=!0;break;case"BINORMAL":T$J=!0;}return T$_&&T$E&&T$y&&T$p&&T$c&&T$W&&T$q&&T$l?T$C=T$On.vertexDeclaration:T$_&&T$E&&T$y&&T$p&&T$c&&T$W&&T$q?T$C=T$dn.vertexDeclaration:T$_&&T$E&&T$p&&T$c&&T$W&&T$q&&T$l?T$C=T$Hn.vertexDeclaration:T$_&&T$E&&T$p&&T$c&&T$W&&T$q?T$C=T$Vn.vertexDeclaration:T$_&&T$E&&T$y&&T$p&&T$W&&T$q&&T$l?T$C=T$Yn.vertexDeclaration:T$_&&T$E&&T$y&&T$p&&T$W&&T$q?T$C=T$tn.vertexDeclaration:T$_&&T$E&&T$p&&T$W&&T$q&&T$l?T$C=T$en.vertexDeclaration:T$_&&T$E&&T$p&&T$W&&T$q?T$C=T$in.vertexDeclaration:T$_&&T$E&&T$y&&T$W&&T$q&&T$l?T$C=T$Pn.vertexDeclaration:T$_&&T$E&&T$y&&T$W&&T$q?T$C=T$Jn.vertexDeclaration:T$_&&T$E&&T$y&&T$p&&T$c&&T$l?T$C=T$kn.vertexDeclaration:T$_&&T$E&&T$y&&T$p&&T$c?T$C=T$mn.vertexDeclaration:T$_&&T$E&&T$p&&T$c&&T$l?T$C=T$$n.vertexDeclaration:T$_&&T$E&&T$p&&T$c?T$C=T$Bn.vertexDeclaration:T$_&&T$E&&T$y&&T$p&&T$l?T$C=T$Nn.vertexDeclaration:T$_&&T$E&&T$p&&T$l&&T$J?T$C=T$un.vertexDeclaration:T$_&&T$E&&T$y&&T$p?T$C=T$rn.vertexDeclaration:T$_&&T$E&&T$p&&T$l?T$C=T$Fn.vertexDeclaration:T$_&&T$E&&T$p?T$C=T$wn.vertexDeclaration:T$_&&T$E&&T$y&&T$l?T$C=T$bn.vertexDeclaration:T$_&&T$E&&T$y&&(T$C=T$qn.vertexDeclaration),T$C;},T$T._attrReg=new RegExp("(\\w+)|([:,;])","g"),T$T._strings=[],T$T._readData=null,T$T._version=null,T$T._mesh=null,T$T._materials=null,T$T._subMeshes=null,T$T._materialMap=null,T$j(T$T,["_BLOCK",function(){return this._BLOCK={count:0};},"_DATA",function(){return this._DATA={offset:0,size:0};}]),T$T;}(),T$hn=function(){function T$t(){}return T$x(T$t,"laya.d3.loaders.LoadModelV03"),T$t.parse=function(T$n,T$C,T$_,T$E,T$y){T$t._mesh=T$_,T$t._subMeshes=T$E,T$t._materialMap=T$y,T$t._version=T$C,T$t._readData=T$n,T$t.READ_DATA(),T$t.READ_BLOCK(),T$t.READ_STRINGS();for(var T$p=0,T$c=T$t._BLOCK.count;T$p<T$c;T$p++){T$t._readData.pos=T$t._BLOCK.blockStarts[T$p];var T$l=T$t._readData.getUint16(),T$W=T$t._strings[T$l],T$q=T$t["READ_"+T$W];if(null==T$q)throw new Error("model file err,no this function:"+T$l+" "+T$W);T$q.call();}T$t._strings.length=0,T$t._readData=null,T$t._version=null,T$t._mesh=null,T$t._subMeshes=null,T$t._materialMap=null;},T$t._readString=function(){return T$t._strings[T$t._readData.getUint16()];},T$t.READ_DATA=function(){T$t._DATA.offset=T$t._readData.getUint32(),T$t._DATA.size=T$t._readData.getUint32();},T$t.READ_BLOCK=function(){for(var T$n=T$t._BLOCK.count=T$t._readData.getUint16(),T$C=T$t._BLOCK.blockStarts=[],T$_=T$t._BLOCK.blockLengths=[],T$E=0;T$E<T$n;T$E++)T$C.push(T$t._readData.getUint32()),T$_.push(T$t._readData.getUint32());},T$t.READ_STRINGS=function(){var T$n=T$t._readData.getUint32(),T$C=T$t._readData.getUint16(),T$_=T$t._readData.pos;T$t._readData.pos=T$n+T$t._DATA.offset;for(var T$E=0;T$E<T$C;T$E++)T$t._strings[T$E]=T$t._readData.readUTFString();T$t._readData.pos=T$_;},T$t.READ_MESH=function(){var T$n,T$C=T$t._readString(),T$_=T$t._readData.__getBuffer(),T$E=0,T$y=T$t._readData.getInt16(),T$p=T$t._DATA.offset;for(T$E=0;T$E<T$y;T$E++){var T$c,T$l=T$p+T$t._readData.getUint32(),T$W=T$t._readData.getUint32(),T$q=new Float32Array(T$_.slice(T$l,T$l+T$W)),T$J=T$t._readString();switch(T$t._version){case"LAYAMODEL:03":T$c=T$t._vertexDeclarationMap_Discard[T$J];break;case"LAYAMODEL:0301":T$c=T$t._vertexDeclarationMap[T$J];break;default:throw new Error("LoadModelV03: unknown version.");}if(!T$c)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+T$t._version+"  bufferAttribute="+T$J+"  name="+T$C+"  url="+(T$t._mesh?T$t._mesh.url:"null"));var T$j=T$eC.create(T$c,4*T$q.length/T$c.vertexStride,35044,!0,T$t._mesh._url+"_"+T$E);T$j.setData(T$q),T$t._mesh._vertexBuffers.push(T$j);}var T$P=T$p+T$t._readData.getUint32(),T$x=T$t._readData.getUint32(),T$b=new Uint16Array(T$_.slice(T$P,T$P+T$x)),T$r=T$fC.create("ushort",T$x/2,35044,!0,T$t._mesh._url);T$r.setData(T$b),T$t._mesh._indexBuffer=T$r;var T$m=T$t._mesh._boneNames=[],T$d=T$t._readData.getUint16();for(T$m.length=T$d,T$E=0;T$E<T$d;T$E++)T$m[T$E]=T$t._strings[T$t._readData.getUint16()];T$t._readData.pos+=8;var T$a=T$t._readData.getUint32(),T$O=T$t._readData.getUint32(),T$A=new Float32Array(T$_.slice(T$p+T$a,T$p+T$a+T$O));for(T$t._mesh._inverseBindPoses=[],T$E=0,T$n=T$A.length;T$E<T$n;T$E+=16){var T$k=new T$nC(T$A[T$E+0],T$A[T$E+1],T$A[T$E+2],T$A[T$E+3],T$A[T$E+4],T$A[T$E+5],T$A[T$E+6],T$A[T$E+7],T$A[T$E+8],T$A[T$E+9],T$A[T$E+10],T$A[T$E+11],T$A[T$E+12],T$A[T$E+13],T$A[T$E+14],T$A[T$E+15]);T$t._mesh._inverseBindPoses.push(T$k);}return T$t._mesh._skinnedDatas=new Float32Array(16*T$A.length),!0;},T$t.READ_SUBMESH=function(){var T$n=T$t._readData.__getBuffer(),T$C=new T$qC(T$t._mesh),T$_=T$t._readData.getInt16(),T$E=T$t._readData.getUint32(),T$y=T$t._readData.getUint32();T$C._vertexBuffer=T$t._mesh._vertexBuffers[T$_],T$C._vertexStart=T$E,T$C._vertexCount=T$y;var T$p=T$t._readData.getUint32(),T$c=T$t._readData.getUint32(),T$l=T$t._mesh._indexBuffer;T$C._indexBuffer=T$l,T$C._indexStart=T$p,T$C._indexCount=T$c,T$C._indices=new Uint16Array(T$l.getData().buffer,2*T$p,T$c);var T$W=T$t._DATA.offset,T$q=T$C._subIndexBufferStart,T$J=T$C._subIndexBufferCount,T$j=T$C._boneIndicesList,T$P=T$t._readData.getUint16();T$q.length=T$P,T$J.length=T$P,T$j.length=T$P;for(var T$x=0;T$x<T$P;T$x++){T$q[T$x]=T$t._readData.getUint32(),T$J[T$x]=T$t._readData.getUint32();var T$b=T$t._readData.getUint32(),T$r=T$t._readData.getUint32();T$j[T$x]=new Uint8Array(T$n.slice(T$W+T$b,T$W+T$b+T$r));}return T$t._subMeshes.push(T$C),!0;},T$t._strings=[],T$t._readData=null,T$t._version=null,T$t._mesh=null,T$t._subMeshes=null,T$t._materialMap=null,T$j(T$t,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":T$On.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":T$dn.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":T$on.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":T$Hn.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":T$Vn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":T$Yn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":T$tn.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":T$en.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":T$in.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":T$Pn.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":T$Jn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":T$kn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":T$mn.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":T$$n.vertexDeclaration,"POSITION,NORMAL,UV,UV1":T$Bn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":T$Nn.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":T$un.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":T$rn.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":T$Fn.vertexDeclaration,"POSITION,NORMAL,UV":T$wn.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":T$bn.vertexDeclaration,"POSITION,NORMAL,COLOR":T$qn.vertexDeclaration,"POSITION,NORMAL,TANGENT":T$Mn.vertexDeclaration,"POSITION,NORMAL":T$Wn.vertexDeclaration,"POSITION,UV":T$In.vertexDeclaration,POSITION:T$ln.vertexDeclaration};},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":T$an.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":T$dn.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":T$on.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":T$gn.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":T$Vn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":T$Tn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":T$tn.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":T$fn.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":T$in.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":T$jn.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":T$Jn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":T$An.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":T$mn.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":T$Xn.vertexDeclaration,"POSITION,NORMAL,UV,UV1":T$Bn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":T$sn.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":T$un.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":T$rn.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":T$Gn.vertexDeclaration,"POSITION,NORMAL,UV":T$wn.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":T$xn.vertexDeclaration,"POSITION,NORMAL,COLOR":T$qn.vertexDeclaration,"POSITION,NORMAL,TANGENT":T$Sn.vertexDeclaration,"POSITION,NORMAL":T$Wn.vertexDeclaration,"POSITION,UV":T$In.vertexDeclaration,POSITION:T$ln.vertexDeclaration};},"_BLOCK",function(){return this._BLOCK={count:0};},"_DATA",function(){return this._DATA={offset:0,size:0};}]),T$t;}(),T$vn=function(){function T$l(){}return T$x(T$l,"laya.d3.loaders.MeshReader"),T$l.read=function(T$n,T$C,T$_,T$E,T$y){var T$p=new T$t(T$n);T$p.pos=0;var T$c=T$p.readUTFString();switch(T$c){case"LAYAMODEL:01":case"LAYASKINANI:01":T$l._readVersion01(T$p,T$c,T$C,T$_,T$E,T$y);break;case"LAYAMODEL:02":T$Ln.parse(T$p,T$c,T$C,T$_,T$E,T$y);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":T$hn.parse(T$p,T$c,T$C,T$E,T$y);break;default:throw new Error("MeshReader: unknown mesh version.");}T$C._setSubMeshes(T$E);},T$l._readVersion01=function(T$n,T$C,T$_,T$E,T$y,T$p){new T$Zn(T$n,T$C,T$_,T$E,T$y,T$p);},T$l;}(),T$Rn=function(){function T$n(T$n,T$C){this.min=null,this.max=null,this.min=T$n,this.max=T$C;}T$x(T$n,"laya.d3.math.BoundBox");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.core.IClone":!0}),T$C.getCorners=function(T$n){T$n.length=8;var T$C=this.min.elements,T$_=this.max.elements,T$E=T$C[0],T$y=T$C[1],T$p=T$C[2],T$c=T$_[0],T$l=T$_[1],T$W=T$_[2];T$n[0]=new T$cC(T$E,T$l,T$W),T$n[1]=new T$cC(T$c,T$l,T$W),T$n[2]=new T$cC(T$c,T$y,T$W),T$n[3]=new T$cC(T$E,T$y,T$W),T$n[4]=new T$cC(T$E,T$l,T$p),T$n[5]=new T$cC(T$c,T$l,T$p),T$n[6]=new T$cC(T$c,T$y,T$p),T$n[7]=new T$cC(T$E,T$y,T$p);},T$C.toDefault=function(){this.min.toDefault(),this.max.toDefault();},T$C.cloneTo=function(T$n){var T$C=T$n;this.min.cloneTo(T$C.min),this.max.cloneTo(T$C.max);},T$C.clone=function(){var T$n=new this.constructor(new T$cC(),new T$cC());return this.cloneTo(T$n),T$n;},T$n.createfromPoints=function(T$n,T$C){if(null==T$n)throw new Error("points");var T$_=T$C.min,T$E=T$C.max,T$y=T$_.elements;T$y[0]=Number.MAX_VALUE,T$y[1]=Number.MAX_VALUE,T$y[2]=Number.MAX_VALUE;var T$p=T$E.elements;T$p[0]=-Number.MAX_VALUE,T$p[1]=-Number.MAX_VALUE,T$p[2]=-Number.MAX_VALUE;for(var T$c=0,T$l=T$n.length;T$c<T$l;++T$c)T$cC.min(T$_,T$n[T$c],T$_),T$cC.max(T$E,T$n[T$c],T$E);},T$n.merge=function(T$n,T$C,T$_){T$cC.min(T$n.min,T$C.min,T$_.min),T$cC.max(T$n.max,T$C.max,T$_.max);},T$n;}(),T$zn=function(){function T$q(T$n){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=T$n,this._near=new T$CC(new T$cC()),this._far=new T$CC(new T$cC()),this._left=new T$CC(new T$cC()),this._right=new T$CC(new T$cC()),this._top=new T$CC(new T$cC()),this._bottom=new T$CC(new T$cC()),T$q._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom);}T$x(T$q,"laya.d3.math.BoundFrustum");var T$n=T$q.prototype;return T$n.equalsBoundFrustum=function(T$n){return this._matrix.equalsOtherMatrix(T$n.matrix);},T$n.equalsObj=function(T$n){if(T$n instanceof laya.d3.math.BoundFrustum){var T$C=T$n;return this.equalsBoundFrustum(T$C);}return!1;},T$n.getPlane=function(T$n){switch(T$n){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null;}},T$n.getCorners=function(T$n){T$q._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(T$n[0]),T$q._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(T$n[1]),T$q._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(T$n[2]),T$q._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(T$n[3]),T$q._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(T$n[4]),T$q._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(T$n[5]),T$q._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(T$n[6]),T$q._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(T$n[7]);},T$n.containsPoint=function(T$n){for(var T$C=T$CC.PlaneIntersectionType_Front,T$_=T$CC.PlaneIntersectionType_Front,T$E=0;T$E<6;T$E++){switch(T$E){case 0:T$_=Collision.intersectsPlaneAndPoint(this._near,T$n);break;case 1:T$_=Collision.intersectsPlaneAndPoint(this._far,T$n);break;case 2:T$_=Collision.intersectsPlaneAndPoint(this._left,T$n);break;case 3:T$_=Collision.intersectsPlaneAndPoint(this._right,T$n);break;case 4:T$_=Collision.intersectsPlaneAndPoint(this._top,T$n);break;case 5:T$_=Collision.intersectsPlaneAndPoint(this._bottom,T$n);}switch(T$_){case T$CC.PlaneIntersectionType_Back:return 0;case T$CC.PlaneIntersectionType_Intersecting:T$C=T$CC.PlaneIntersectionType_Intersecting;}}switch(T$C){case T$CC.PlaneIntersectionType_Intersecting:return 2;default:return 1;}},T$n.containsBoundBox=function(T$n){for(var T$C,T$_=T$q._tempV30,T$E=T$q._tempV31,T$y=1,T$p=0;T$p<6;T$p++){if(T$C=this.getPlane(T$p),this._getBoxToPlanePVertexNVertex(T$n,T$C.normal,T$_,T$E),Collision.intersectsPlaneAndPoint(T$C,T$_)===T$CC.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(T$C,T$E)===T$CC.PlaneIntersectionType_Back&&(T$y=2);}return T$y;},T$n.containsBoundSphere=function(T$n){for(var T$C=T$CC.PlaneIntersectionType_Front,T$_=T$CC.PlaneIntersectionType_Front,T$E=0;T$E<6;T$E++){switch(T$E){case 0:T$_=Collision.intersectsPlaneAndSphere(this._near,T$n);break;case 1:T$_=Collision.intersectsPlaneAndSphere(this._far,T$n);break;case 2:T$_=Collision.intersectsPlaneAndSphere(this._left,T$n);break;case 3:T$_=Collision.intersectsPlaneAndSphere(this._right,T$n);break;case 4:T$_=Collision.intersectsPlaneAndSphere(this._top,T$n);break;case 5:T$_=Collision.intersectsPlaneAndSphere(this._bottom,T$n);}switch(T$_){case T$CC.PlaneIntersectionType_Back:return 0;case T$CC.PlaneIntersectionType_Intersecting:T$C=T$CC.PlaneIntersectionType_Intersecting;}}switch(T$C){case T$CC.PlaneIntersectionType_Intersecting:return 2;default:return 1;}},T$n._getBoxToPlanePVertexNVertex=function(T$n,T$C,T$_,T$E){var T$y=T$n.min,T$p=T$y.elements,T$c=T$n.max,T$l=T$c.elements,T$W=T$C.elements,T$q=T$W[0],T$J=T$W[1],T$j=T$W[2];T$y.cloneTo(T$_);var T$P=T$_.elements;0<=T$q&&(T$P[0]=T$l[0]),0<=T$J&&(T$P[1]=T$l[1]),0<=T$j&&(T$P[2]=T$l[2]),T$c.cloneTo(T$E);var T$x=T$E.elements;0<=T$q&&(T$x[0]=T$p[0]),0<=T$J&&(T$x[1]=T$p[1]),0<=T$j&&(T$x[2]=T$p[2]);},T$b(0,T$n,"top",function(){return this._top;}),T$b(0,T$n,"matrix",function(){return this._matrix;},function(T$n){this._matrix=T$n,T$q._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom);}),T$b(0,T$n,"near",function(){return this._near;}),T$b(0,T$n,"far",function(){return this._far;}),T$b(0,T$n,"left",function(){return this._left;}),T$b(0,T$n,"right",function(){return this._right;}),T$b(0,T$n,"bottom",function(){return this._bottom;}),T$q._getPlanesFromMatrix=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){var T$l=T$n.elements,T$W=T$l[0],T$q=T$l[1],T$J=T$l[2],T$j=T$l[3],T$P=T$l[4],T$x=T$l[5],T$b=T$l[6],T$r=T$l[7],T$m=T$l[8],T$d=T$l[9],T$a=T$l[10],T$O=T$l[11],T$A=T$l[12],T$k=T$l[13],T$t=T$l[14],T$T=T$l[15],T$Y=T$C.normal.elements;T$Y[0]=T$j+T$J,T$Y[1]=T$r+T$b,T$Y[2]=T$O+T$a,T$C.distance=T$T+T$t,T$C.normalize();var T$s=T$_.normal.elements;T$s[0]=T$j-T$J,T$s[1]=T$r-T$b,T$s[2]=T$O-T$a,T$_.distance=T$T-T$t,T$_.normalize();var T$N=T$E.normal.elements;T$N[0]=T$j+T$W,T$N[1]=T$r+T$P,T$N[2]=T$O+T$m,T$E.distance=T$T+T$A,T$E.normalize();var T$S=T$y.normal.elements;T$S[0]=T$j-T$W,T$S[1]=T$r-T$P,T$S[2]=T$O-T$m,T$y.distance=T$T-T$A,T$y.normalize();var T$M=T$p.normal.elements;T$M[0]=T$j-T$q,T$M[1]=T$r-T$x,T$M[2]=T$O-T$d,T$p.distance=T$T-T$k,T$p.normalize();var T$w=T$c.normal.elements;T$w[0]=T$j+T$q,T$w[1]=T$r+T$x,T$w[2]=T$O+T$d,T$c.distance=T$T+T$k,T$c.normalize();},T$q._get3PlaneInterPoint=function(T$n,T$C,T$_){var T$E=T$n.normal,T$y=T$C.normal,T$p=T$_.normal;T$cC.cross(T$y,T$p,T$q._tempV30),T$cC.cross(T$p,T$E,T$q._tempV31),T$cC.cross(T$E,T$y,T$q._tempV32);var T$c=T$cC.dot(T$E,T$q._tempV30),T$l=T$cC.dot(T$y,T$q._tempV31),T$W=T$cC.dot(T$p,T$q._tempV32);return T$cC.scale(T$q._tempV30,-T$n.distance/T$c,T$q._tempV33),T$cC.scale(T$q._tempV31,-T$C.distance/T$l,T$q._tempV34),T$cC.scale(T$q._tempV32,-T$_.distance/T$W,T$q._tempV35),T$cC.add(T$q._tempV33,T$q._tempV34,T$q._tempV36),T$cC.add(T$q._tempV35,T$q._tempV36,T$q._tempV37),T$q._tempV37;},T$j(T$q,["_tempV30",function(){return this._tempV30=new T$cC();},"_tempV31",function(){return this._tempV31=new T$cC();},"_tempV32",function(){return this._tempV32=new T$cC();},"_tempV33",function(){return this._tempV33=new T$cC();},"_tempV34",function(){return this._tempV34=new T$cC();},"_tempV35",function(){return this._tempV35=new T$cC();},"_tempV36",function(){return this._tempV36=new T$cC();},"_tempV37",function(){return this._tempV37=new T$cC();}]),T$q;}(),T$Un=function(){function T$J(T$n,T$C){this.center=null,this.radius=NaN,this.center=T$n,this.radius=T$C;}T$x(T$J,"laya.d3.math.BoundSphere");var T$n=T$J.prototype;return T$k.imps(T$n,{"laya.d3.core.IClone":!0}),T$n.toDefault=function(){this.center.toDefault(),this.radius=0;},T$n.intersectsRayDistance=function(T$n){return Collision.intersectsRayAndSphereRD(T$n,this);},T$n.intersectsRayPoint=function(T$n,T$C){return Collision.intersectsRayAndSphereRP(T$n,this,T$C);},T$n.cloneTo=function(T$n){var T$C=T$n;this.center.cloneTo(T$C.center),T$C.radius=this.radius;},T$n.clone=function(){var T$n=new this.constructor(new T$cC(),new T$cC());return this.cloneTo(T$n),T$n;},T$J.createFromSubPoints=function(T$n,T$C,T$_,T$E){if(null==T$n)throw new Error("points");if(T$C<0||T$C>=T$n.length)throw new Error("start"+T$C+"Must be in the range [0, "+(T$n.length-1)+"]");if(T$_<0||T$C+T$_>T$n.length)throw new Error("count"+T$_+"Must be in the range <= "+T$n.length+"}");var T$y=T$C+T$_,T$p=T$J._tempVector3;T$p.elements[0]=0,T$p.elements[1]=0,T$p.elements[2]=0;for(var T$c=T$C;T$c<T$y;++T$c)T$cC.add(T$n[T$c],T$p,T$p);var T$l=T$E.center;T$cC.scale(T$p,1/T$_,T$l);var T$W=0;for(T$c=T$C;T$c<T$y;++T$c){var T$q=T$cC.distanceSquared(T$l,T$n[T$c]);T$W<T$q&&(T$W=T$q);}T$E.radius=Math.sqrt(T$W);},T$J.createfromPoints=function(T$n,T$C){if(null==T$n)throw new Error("points");T$J.createFromSubPoints(T$n,0,T$n.length,T$C);},T$j(T$J,["_tempVector3",function(){return this._tempVector3=new T$cC();}]),T$J;}(),T$Kn=(function(){function T$n(){}T$x(T$n,"laya.d3.math.ContainmentType"),T$n.Disjoint=0,T$n.Contains=1,T$n.Intersects=2;}(),function(){function T$_(){}return T$x(T$_,"laya.d3.math.MathUtils3D"),T$_.isZero=function(T$n){return Math.abs(T$n)<T$_.zeroTolerance;},T$_.nearEqual=function(T$n,T$C){return!!T$_.isZero(T$n-T$C);},T$_.fastInvSqrt=function(T$n){return T$_.isZero(T$n)?T$n:1/Math.sqrt(T$n);},T$j(T$_,["zeroTolerance",function(){return this.zeroTolerance=1e-6;},"MaxValue",function(){return this.MaxValue=340282347e30;},"MinValue",function(){return this.MinValue=-340282347e30;}]),T$_;}()),T$Dn=function(){function T$W(){var T$n=this.elements=new Float32Array(9);T$n[0]=1,T$n[1]=0,T$n[2]=0,T$n[3]=0,T$n[4]=1,T$n[5]=0,T$n[6]=0,T$n[7]=0,T$n[8]=1;}T$x(T$W,"laya.d3.math.Matrix3x3");var T$n=T$W.prototype;return T$k.imps(T$n,{"laya.d3.core.IClone":!0}),T$n.determinant=function(){var T$n=this.elements,T$C=T$n[0],T$_=T$n[1],T$E=T$n[2],T$y=T$n[3],T$p=T$n[4],T$c=T$n[5],T$l=T$n[6],T$W=T$n[7],T$q=T$n[8];return T$C*(T$q*T$p-T$c*T$W)+T$_*(-T$q*T$y+T$c*T$l)+T$E*(T$W*T$y-T$p*T$l);},T$n.translate=function(T$n,T$C){var T$_=T$C.elements,T$E=this.elements,T$y=T$n.elements,T$p=T$E[0],T$c=T$E[1],T$l=T$E[2],T$W=T$E[3],T$q=T$E[4],T$J=T$E[5],T$j=T$E[6],T$P=T$E[7],T$x=T$E[8],T$b=T$y[0],T$r=T$y[1];T$_[0]=T$p,T$_[1]=T$c,T$_[2]=T$l,T$_[3]=T$W,T$_[4]=T$q,T$_[5]=T$J,T$_[6]=T$b*T$p+T$r*T$W+T$j,T$_[7]=T$b*T$c+T$r*T$q+T$P,T$_[8]=T$b*T$l+T$r*T$J+T$x;},T$n.rotate=function(T$n,T$C){var T$_=T$C.elements,T$E=this.elements,T$y=T$E[0],T$p=T$E[1],T$c=T$E[2],T$l=T$E[3],T$W=T$E[4],T$q=T$E[5],T$J=T$E[6],T$j=T$E[7],T$P=T$E[8],T$x=Math.sin(T$n),T$b=Math.cos(T$n);T$_[0]=T$b*T$y+T$x*T$l,T$_[1]=T$b*T$p+T$x*T$W,T$_[2]=T$b*T$c+T$x*T$q,T$_[3]=T$b*T$l-T$x*T$y,T$_[4]=T$b*T$W-T$x*T$p,T$_[5]=T$b*T$q-T$x*T$c,T$_[6]=T$J,T$_[7]=T$j,T$_[8]=T$P;},T$n.scale=function(T$n,T$C){var T$_=T$C.elements,T$E=this.elements,T$y=T$n.elements,T$p=T$y[0],T$c=T$y[1];T$_[0]=T$p*T$E[0],T$_[1]=T$p*T$E[1],T$_[2]=T$p*T$E[2],T$_[3]=T$c*T$E[3],T$_[4]=T$c*T$E[4],T$_[5]=T$c*T$E[5],T$_[6]=T$E[6],T$_[7]=T$E[7],T$_[8]=T$E[8];},T$n.invert=function(T$n){var T$C=T$n.elements,T$_=this.elements,T$E=T$_[0],T$y=T$_[1],T$p=T$_[2],T$c=T$_[3],T$l=T$_[4],T$W=T$_[5],T$q=T$_[6],T$J=T$_[7],T$j=T$_[8],T$P=T$j*T$l-T$W*T$J,T$x=-T$j*T$c+T$W*T$q,T$b=T$J*T$c-T$l*T$q,T$r=T$E*T$P+T$y*T$x+T$p*T$b;T$r||(T$n=null),T$r=1/T$r,T$C[0]=T$P*T$r,T$C[1]=(-T$j*T$y+T$p*T$J)*T$r,T$C[2]=(T$W*T$y-T$p*T$l)*T$r,T$C[3]=T$x*T$r,T$C[4]=(T$j*T$E-T$p*T$q)*T$r,T$C[5]=(-T$W*T$E+T$p*T$c)*T$r,T$C[6]=T$b*T$r,T$C[7]=(-T$J*T$E+T$y*T$q)*T$r,T$C[8]=(T$l*T$E-T$y*T$c)*T$r;},T$n.transpose=function(T$n){var T$C=T$n.elements,T$_=this.elements;if(T$n===this){var T$E=T$_[1],T$y=T$_[2],T$p=T$_[5];T$C[1]=T$_[3],T$C[2]=T$_[6],T$C[3]=T$E,T$C[5]=T$_[7],T$C[6]=T$y,T$C[7]=T$p;}else T$C[0]=T$_[0],T$C[1]=T$_[3],T$C[2]=T$_[6],T$C[3]=T$_[1],T$C[4]=T$_[4],T$C[5]=T$_[7],T$C[6]=T$_[2],T$C[7]=T$_[5],T$C[8]=T$_[8];},T$n.identity=function(){var T$n=this.elements;T$n[0]=1,T$n[1]=0,T$n[2]=0,T$n[3]=0,T$n[4]=1,T$n[5]=0,T$n[6]=0,T$n[7]=0,T$n[8]=1;},T$n.cloneTo=function(T$n){var T$C,T$_,T$E;if((T$_=this.elements)!==(T$E=T$n.elements))for(T$C=0;T$C<9;++T$C)T$E[T$C]=T$_[T$C];},T$n.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$W.createFromTranslation=function(T$n,T$C){T$C.elements;var T$_=T$n.elements;T$C[0]=1,T$C[1]=0,T$C[2]=0,T$C[3]=0,T$C[4]=1,T$C[5]=0,T$C[6]=T$_[0],T$C[7]=T$_[1],T$C[8]=1;},T$W.createFromRotation=function(T$n,T$C){var T$_=T$C.elements,T$E=Math.sin(T$n),T$y=Math.cos(T$n);T$_[0]=T$y,T$_[1]=T$E,T$_[2]=0,T$_[3]=-T$E,T$_[4]=T$y,T$_[5]=0,T$_[6]=0,T$_[7]=0,T$_[8]=1;},T$W.createFromScaling=function(T$n,T$C){var T$_=T$C.elements,T$E=T$n.elements;T$_[0]=T$E[0],T$_[1]=0,T$_[2]=0,T$_[3]=0,T$_[4]=T$E[1],T$_[5]=0,T$_[6]=0,T$_[7]=0,T$_[8]=1;},T$W.createFromMatrix4x4=function(T$n,T$C){T$C[0]=T$n[0],T$C[1]=T$n[1],T$C[2]=T$n[2],T$C[3]=T$n[4],T$C[4]=T$n[5],T$C[5]=T$n[6],T$C[6]=T$n[8],T$C[7]=T$n[9],T$C[8]=T$n[10];},T$W.multiply=function(T$n,T$C,T$_){var T$E=T$_.elements,T$y=T$n.elements,T$p=T$C.elements,T$c=T$y[0],T$l=T$y[1],T$W=T$y[2],T$q=T$y[3],T$J=T$y[4],T$j=T$y[5],T$P=T$y[6],T$x=T$y[7],T$b=T$y[8],T$r=T$p[0],T$m=T$p[1],T$d=T$p[2],T$a=T$p[3],T$O=T$p[4],T$A=T$p[5],T$k=T$p[6],T$t=T$p[7],T$T=T$p[8];T$E[0]=T$r*T$c+T$m*T$q+T$d*T$P,T$E[1]=T$r*T$l+T$m*T$J+T$d*T$x,T$E[2]=T$r*T$W+T$m*T$j+T$d*T$b,T$E[3]=T$a*T$c+T$O*T$q+T$A*T$P,T$E[4]=T$a*T$l+T$O*T$J+T$A*T$x,T$E[5]=T$a*T$W+T$O*T$j+T$A*T$b,T$E[6]=T$k*T$c+T$t*T$q+T$T*T$P,T$E[7]=T$k*T$l+T$t*T$J+T$T*T$x,T$E[8]=T$k*T$W+T$t*T$j+T$T*T$b;},T$W.lookAt=function(T$n,T$C,T$_,T$E){T$cC.subtract(T$n,T$C,T$W._tempV30),T$cC.normalize(T$W._tempV30,T$W._tempV30),T$cC.cross(T$_,T$W._tempV30,T$W._tempV31),T$cC.normalize(T$W._tempV31,T$W._tempV31),T$cC.cross(T$W._tempV30,T$W._tempV31,T$W._tempV32);var T$y=T$W._tempV30.elements,T$p=T$W._tempV31.elements,T$c=T$W._tempV32.elements,T$l=T$E.elements;T$l[0]=T$p[0],T$l[3]=T$p[1],T$l[6]=T$p[2],T$l[1]=T$c[0],T$l[4]=T$c[1],T$l[7]=T$c[2],T$l[2]=T$y[0],T$l[5]=T$y[1],T$l[8]=T$y[2];},T$W.DEFAULT=new T$W(),T$j(T$W,["_tempV30",function(){return this._tempV30=new T$cC();},"_tempV31",function(){return this._tempV31=new T$cC();},"_tempV32",function(){return this._tempV32=new T$cC();}]),T$W;}(),T$nC=function(){function T$s(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q,T$J,T$j,T$P,T$x,T$b,T$r){void 0===T$n&&(T$n=1),void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0),void 0===T$E&&(T$E=0),void 0===T$y&&(T$y=0),void 0===T$p&&(T$p=1),void 0===T$c&&(T$c=0),void 0===T$l&&(T$l=0),void 0===T$W&&(T$W=0),void 0===T$q&&(T$q=0),void 0===T$J&&(T$J=1),void 0===T$j&&(T$j=0),void 0===T$P&&(T$P=0),void 0===T$x&&(T$x=0),void 0===T$b&&(T$b=0),void 0===T$r&&(T$r=1);var T$m=this.elements=new Float32Array(16);T$m[0]=T$n,T$m[1]=T$C,T$m[2]=T$_,T$m[3]=T$E,T$m[4]=T$y,T$m[5]=T$p,T$m[6]=T$c,T$m[7]=T$l,T$m[8]=T$W,T$m[9]=T$q,T$m[10]=T$J,T$m[11]=T$j,T$m[12]=T$P,T$m[13]=T$x,T$m[14]=T$b,T$m[15]=T$r;}T$x(T$s,"laya.d3.math.Matrix4x4");var T$n=T$s.prototype;return T$k.imps(T$n,{"laya.d3.core.IClone":!0}),T$n.getElementByRowColumn=function(T$n,T$C){if(T$n<0||3<T$n)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(T$C<0||3<T$C)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*T$n+T$C];},T$n.setElementByRowColumn=function(T$n,T$C,T$_){if(T$n<0||3<T$n)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(T$C<0||3<T$C)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*T$n+T$C]=T$_;},T$n.equalsOtherMatrix=function(T$n){var T$C=this.elements,T$_=T$n.elements;return T$Kn.nearEqual(T$C[0],T$_[0])&&T$Kn.nearEqual(T$C[1],T$_[1])&&T$Kn.nearEqual(T$C[2],T$_[2])&&T$Kn.nearEqual(T$C[3],T$_[3])&&T$Kn.nearEqual(T$C[4],T$_[4])&&T$Kn.nearEqual(T$C[5],T$_[5])&&T$Kn.nearEqual(T$C[6],T$_[6])&&T$Kn.nearEqual(T$C[7],T$_[7])&&T$Kn.nearEqual(T$C[8],T$_[8])&&T$Kn.nearEqual(T$C[9],T$_[9])&&T$Kn.nearEqual(T$C[10],T$_[10])&&T$Kn.nearEqual(T$C[11],T$_[11])&&T$Kn.nearEqual(T$C[12],T$_[12])&&T$Kn.nearEqual(T$C[13],T$_[13])&&T$Kn.nearEqual(T$C[14],T$_[14])&&T$Kn.nearEqual(T$C[15],T$_[15]);},T$n.decomposeTransRotScale=function(T$n,T$C,T$_){var T$E=T$s._tempMatrix4x4;return this.decomposeTransRotMatScale(T$n,T$E,T$_)?(T$_C.createFromMatrix4x4(T$E,T$C),!0):(T$C.identity(),!1);},T$n.decomposeTransRotMatScale=function(T$n,T$C,T$_){var T$E=this.elements,T$y=T$n.elements,T$p=T$C.elements,T$c=T$_.elements;T$y[0]=T$E[12],T$y[1]=T$E[13],T$y[2]=T$E[14];var T$l=T$E[0],T$W=T$E[1],T$q=T$E[2],T$J=T$E[4],T$j=T$E[5],T$P=T$E[6],T$x=T$E[8],T$b=T$E[9],T$r=T$E[10],T$m=T$c[0]=Math.sqrt(T$l*T$l+T$W*T$W+T$q*T$q),T$d=T$c[1]=Math.sqrt(T$J*T$J+T$j*T$j+T$P*T$P),T$a=T$c[2]=Math.sqrt(T$x*T$x+T$b*T$b+T$r*T$r);if(T$Kn.isZero(T$m)||T$Kn.isZero(T$d)||T$Kn.isZero(T$a))return T$p[1]=T$p[2]=T$p[3]=T$p[4]=T$p[6]=T$p[7]=T$p[8]=T$p[9]=T$p[11]=T$p[12]=T$p[13]=T$p[14]=0,T$p[0]=T$p[5]=T$p[10]=T$p[15]=1,!1;var T$O=T$s._tempVector0,T$A=T$O.elements;T$A[0]=T$x/T$a,T$A[1]=T$b/T$a,T$A[2]=T$r/T$a;var T$k=T$s._tempVector1,T$t=T$k.elements;T$t[0]=T$l/T$m,T$t[1]=T$W/T$m,T$t[2]=T$q/T$m;var T$T=T$s._tempVector2;T$cC.cross(T$O,T$k,T$T);var T$Y=T$s._tempVector1;return T$cC.cross(T$T,T$O,T$Y),T$p[3]=T$p[7]=T$p[11]=T$p[12]=T$p[13]=T$p[14]=0,T$p[15]=1,T$p[0]=T$Y.x,T$p[1]=T$Y.y,T$p[2]=T$Y.z,T$p[4]=T$T.x,T$p[5]=T$T.y,T$p[6]=T$T.z,T$p[8]=T$O.x,T$p[9]=T$O.y,T$p[10]=T$O.z,T$p[0]*T$l+T$p[1]*T$W+T$p[2]*T$q<0&&(T$c[0]=-T$m),T$p[4]*T$J+T$p[5]*T$j+T$p[6]*T$P<0&&(T$c[1]=-T$d),T$p[8]*T$x+T$p[9]*T$b+T$p[10]*T$r<0&&(T$c[2]=-T$a),!0;},T$n.decomposeYawPitchRoll=function(T$n){var T$C=T$n.elements,T$_=Math.asin(-this.elements[9]);T$C[1]=T$_,Math.cos(T$_)>T$Kn.zeroTolerance?(T$C[2]=Math.atan2(this.elements[1],this.elements[5]),T$C[0]=Math.atan2(this.elements[8],this.elements[10])):(T$C[2]=Math.atan2(-this.elements[4],this.elements[0]),T$C[0]=0);},T$n.normalize=function(){var T$n=this.elements,T$C=T$n[0],T$_=T$n[1],T$E=T$n[2],T$y=Math.sqrt(T$C*T$C+T$_*T$_+T$E*T$E);if(!T$y)return T$n[0]=0,T$n[1]=0,void(T$n[2]=0);1!=T$y&&(T$y=1/T$y,T$n[0]=T$C*T$y,T$n[1]=T$_*T$y,T$n[2]=T$E*T$y);},T$n.transpose=function(){var T$n,T$C;return T$C=(T$n=this.elements)[1],T$n[1]=T$n[4],T$n[4]=T$C,T$C=T$n[2],T$n[2]=T$n[8],T$n[8]=T$C,T$C=T$n[3],T$n[3]=T$n[12],T$n[12]=T$C,T$C=T$n[6],T$n[6]=T$n[9],T$n[9]=T$C,T$C=T$n[7],T$n[7]=T$n[13],T$n[13]=T$C,T$C=T$n[11],T$n[11]=T$n[14],T$n[14]=T$C,this;},T$n.invert=function(T$n){var T$C=this.elements,T$_=T$n.elements,T$E=T$C[0],T$y=T$C[1],T$p=T$C[2],T$c=T$C[3],T$l=T$C[4],T$W=T$C[5],T$q=T$C[6],T$J=T$C[7],T$j=T$C[8],T$P=T$C[9],T$x=T$C[10],T$b=T$C[11],T$r=T$C[12],T$m=T$C[13],T$d=T$C[14],T$a=T$C[15],T$O=T$E*T$W-T$y*T$l,T$A=T$E*T$q-T$p*T$l,T$k=T$E*T$J-T$c*T$l,T$t=T$y*T$q-T$p*T$W,T$T=T$y*T$J-T$c*T$W,T$Y=T$p*T$J-T$c*T$q,T$s=T$j*T$m-T$P*T$r,T$N=T$j*T$d-T$x*T$r,T$S=T$j*T$a-T$b*T$r,T$M=T$P*T$d-T$x*T$m,T$w=T$P*T$a-T$b*T$m,T$B=T$x*T$a-T$b*T$d,T$V=T$O*T$B-T$A*T$w+T$k*T$M+T$t*T$S-T$T*T$N+T$Y*T$s;0!==Math.abs(T$V)&&(T$V=1/T$V,T$_[0]=(T$W*T$B-T$q*T$w+T$J*T$M)*T$V,T$_[1]=(T$p*T$w-T$y*T$B-T$c*T$M)*T$V,T$_[2]=(T$m*T$Y-T$d*T$T+T$a*T$t)*T$V,T$_[3]=(T$x*T$T-T$P*T$Y-T$b*T$t)*T$V,T$_[4]=(T$q*T$S-T$l*T$B-T$J*T$N)*T$V,T$_[5]=(T$E*T$B-T$p*T$S+T$c*T$N)*T$V,T$_[6]=(T$d*T$k-T$r*T$Y-T$a*T$A)*T$V,T$_[7]=(T$j*T$Y-T$x*T$k+T$b*T$A)*T$V,T$_[8]=(T$l*T$w-T$W*T$S+T$J*T$s)*T$V,T$_[9]=(T$y*T$S-T$E*T$w-T$c*T$s)*T$V,T$_[10]=(T$r*T$T-T$m*T$k+T$a*T$O)*T$V,T$_[11]=(T$P*T$k-T$j*T$T-T$b*T$O)*T$V,T$_[12]=(T$W*T$N-T$l*T$M-T$q*T$s)*T$V,T$_[13]=(T$E*T$M-T$y*T$N+T$p*T$s)*T$V,T$_[14]=(T$m*T$A-T$r*T$t-T$d*T$O)*T$V,T$_[15]=(T$j*T$t-T$P*T$A+T$x*T$O)*T$V);},T$n.identity=function(){var T$n=this.elements;T$n[1]=T$n[2]=T$n[3]=T$n[4]=T$n[6]=T$n[7]=T$n[8]=T$n[9]=T$n[11]=T$n[12]=T$n[13]=T$n[14]=0,T$n[0]=T$n[5]=T$n[10]=T$n[15]=1;},T$n.cloneTo=function(T$n){var T$C,T$_,T$E;if((T$_=this.elements)!==(T$E=T$n.elements))for(T$C=0;T$C<16;++T$C)T$E[T$C]=T$_[T$C];},T$n.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$n.getTranslationVector=function(T$n){var T$C=this.elements,T$_=T$n.elements;T$_[0]=T$C[12],T$_[1]=T$C[13],T$_[2]=T$C[14];},T$n.setTranslationVector=function(T$n){var T$C=this.elements,T$_=T$n.elements;T$C[12]=T$_[0],T$C[13]=T$_[1],T$C[14]=T$_[2];},T$n.getForward=function(T$n){var T$C=this.elements,T$_=T$n.elements;T$_[0]=-T$C[8],T$_[1]=-T$C[9],T$_[2]=-T$C[10];},T$n.setForward=function(T$n){var T$C=this.elements,T$_=T$n.elements;T$C[8]=-T$_[0],T$C[9]=-T$_[1],T$C[10]=-T$_[2];},T$s.createRotationX=function(T$n,T$C){var T$_=T$C.elements,T$E=Math.sin(T$n),T$y=Math.cos(T$n);T$_[1]=T$_[2]=T$_[3]=T$_[4]=T$_[7]=T$_[8]=T$_[11]=T$_[12]=T$_[13]=T$_[14]=0,T$_[0]=T$_[15]=1,T$_[5]=T$_[10]=T$y,T$_[6]=T$E,T$_[9]=-T$E;},T$s.createRotationY=function(T$n,T$C){var T$_=T$C.elements,T$E=Math.sin(T$n),T$y=Math.cos(T$n);T$_[1]=T$_[3]=T$_[4]=T$_[6]=T$_[7]=T$_[9]=T$_[11]=T$_[12]=T$_[13]=T$_[14]=0,T$_[5]=T$_[15]=1,T$_[0]=T$_[10]=T$y,T$_[2]=-T$E,T$_[8]=T$E;},T$s.createRotationZ=function(T$n,T$C){var T$_=T$C.elements,T$E=Math.sin(T$n),T$y=Math.cos(T$n);T$_[2]=T$_[3]=T$_[6]=T$_[7]=T$_[8]=T$_[9]=T$_[11]=T$_[12]=T$_[13]=T$_[14]=0,T$_[10]=T$_[15]=1,T$_[0]=T$_[5]=T$y,T$_[1]=T$E,T$_[4]=-T$E;},T$s.createRotationYawPitchRoll=function(T$n,T$C,T$_,T$E){T$_C.createFromYawPitchRoll(T$n,T$C,T$_,T$s._tempQuaternion),T$s.createRotationQuaternion(T$s._tempQuaternion,T$E);},T$s.createRotationAxis=function(T$n,T$C,T$_){var T$E=T$n.elements,T$y=T$E[0],T$p=T$E[1],T$c=T$E[2],T$l=Math.cos(T$C),T$W=Math.sin(T$C),T$q=T$y*T$y,T$J=T$p*T$p,T$j=T$c*T$c,T$P=T$y*T$p,T$x=T$y*T$c,T$b=T$p*T$c,T$r=T$_.elements;T$r[3]=T$r[7]=T$r[11]=T$r[12]=T$r[13]=T$r[14]=0,T$r[15]=1,T$r[0]=T$q+T$l*(1-T$q),T$r[1]=T$P-T$l*T$P+T$W*T$c,T$r[2]=T$x-T$l*T$x-T$W*T$p,T$r[4]=T$P-T$l*T$P-T$W*T$c,T$r[5]=T$J+T$l*(1-T$J),T$r[6]=T$b-T$l*T$b+T$W*T$y,T$r[8]=T$x-T$l*T$x+T$W*T$p,T$r[9]=T$b-T$l*T$b-T$W*T$y,T$r[10]=T$j+T$l*(1-T$j);},T$s.createRotationQuaternion=function(T$n,T$C){var T$_=T$n.elements,T$E=T$C.elements,T$y=T$_[0],T$p=T$_[1],T$c=T$_[2],T$l=T$_[3],T$W=T$y*T$y,T$q=T$p*T$p,T$J=T$c*T$c,T$j=T$y*T$p,T$P=T$c*T$l,T$x=T$c*T$y,T$b=T$p*T$l,T$r=T$p*T$c,T$m=T$y*T$l;T$E[3]=T$E[7]=T$E[11]=T$E[12]=T$E[13]=T$E[14]=0,T$E[15]=1,T$E[0]=1-2*(T$q+T$J),T$E[1]=2*(T$j+T$P),T$E[2]=2*(T$x-T$b),T$E[4]=2*(T$j-T$P),T$E[5]=1-2*(T$J+T$W),T$E[6]=2*(T$r+T$m),T$E[8]=2*(T$x+T$b),T$E[9]=2*(T$r-T$m),T$E[10]=1-2*(T$q+T$W);},T$s.createTranslate=function(T$n,T$C){var T$_=T$n.elements,T$E=T$C.elements;T$E[4]=T$E[8]=T$E[1]=T$E[9]=T$E[2]=T$E[6]=T$E[3]=T$E[7]=T$E[11]=0,T$E[0]=T$E[5]=T$E[10]=T$E[15]=1,T$E[12]=T$_[0],T$E[13]=T$_[1],T$E[14]=T$_[2];},T$s.createScaling=function(T$n,T$C){var T$_=T$n.elements,T$E=T$C.elements;T$E[0]=T$_[0],T$E[5]=T$_[1],T$E[10]=T$_[2],T$E[1]=T$E[4]=T$E[8]=T$E[12]=T$E[9]=T$E[13]=T$E[2]=T$E[6]=T$E[14]=T$E[3]=T$E[7]=T$E[11]=0,T$E[15]=1;},T$s.multiply=function(T$n,T$C,T$_){var T$E,T$y,T$p,T$c,T$l,T$W,T$q,T$J;for(T$y=T$_.elements,T$p=T$n.elements,T$y===(T$c=T$C.elements)&&(T$c=T$c.slice()),T$E=0;T$E<4;T$E++)T$l=T$p[T$E],T$W=T$p[T$E+4],T$q=T$p[T$E+8],T$J=T$p[T$E+12],T$y[T$E]=T$l*T$c[0]+T$W*T$c[1]+T$q*T$c[2]+T$J*T$c[3],T$y[T$E+4]=T$l*T$c[4]+T$W*T$c[5]+T$q*T$c[6]+T$J*T$c[7],T$y[T$E+8]=T$l*T$c[8]+T$W*T$c[9]+T$q*T$c[10]+T$J*T$c[11],T$y[T$E+12]=T$l*T$c[12]+T$W*T$c[13]+T$q*T$c[14]+T$J*T$c[15];},T$s.createFromQuaternion=function(T$n,T$C){var T$_=T$C.elements,T$E=T$n.elements,T$y=T$E[0],T$p=T$E[1],T$c=T$E[2],T$l=T$E[3],T$W=T$y+T$y,T$q=T$p+T$p,T$J=T$c+T$c,T$j=T$y*T$W,T$P=T$p*T$W,T$x=T$p*T$q,T$b=T$c*T$W,T$r=T$c*T$q,T$m=T$c*T$J,T$d=T$l*T$W,T$a=T$l*T$q,T$O=T$l*T$J;T$_[0]=1-T$x-T$m,T$_[1]=T$P+T$O,T$_[2]=T$b-T$a,T$_[3]=0,T$_[4]=T$P-T$O,T$_[5]=1-T$j-T$m,T$_[6]=T$r+T$d,T$_[7]=0,T$_[8]=T$b+T$a,T$_[9]=T$r-T$d,T$_[10]=1-T$j-T$x,T$_[11]=0,T$_[12]=0,T$_[13]=0,T$_[14]=0,T$_[15]=1;},T$s.createAffineTransformation=function(T$n,T$C,T$_,T$E){var T$y=T$n.elements,T$p=T$C.elements,T$c=T$_.elements,T$l=T$E.elements,T$W=T$p[0],T$q=T$p[1],T$J=T$p[2],T$j=T$p[3],T$P=T$W+T$W,T$x=T$q+T$q,T$b=T$J+T$J,T$r=T$W*T$P,T$m=T$W*T$x,T$d=T$W*T$b,T$a=T$q*T$x,T$O=T$q*T$b,T$A=T$J*T$b,T$k=T$j*T$P,T$t=T$j*T$x,T$T=T$j*T$b,T$Y=T$c[0],T$s=T$c[1],T$N=T$c[2];T$l[0]=(1-(T$a+T$A))*T$Y,T$l[1]=(T$m+T$T)*T$Y,T$l[2]=(T$d-T$t)*T$Y,T$l[3]=0,T$l[4]=(T$m-T$T)*T$s,T$l[5]=(1-(T$r+T$A))*T$s,T$l[6]=(T$O+T$k)*T$s,T$l[7]=0,T$l[8]=(T$d+T$t)*T$N,T$l[9]=(T$O-T$k)*T$N,T$l[10]=(1-(T$r+T$a))*T$N,T$l[11]=0,T$l[12]=T$y[0],T$l[13]=T$y[1],T$l[14]=T$y[2],T$l[15]=1;},T$s.createLookAt=function(T$n,T$C,T$_,T$E){var T$y=T$E.elements,T$p=T$s._tempVector0,T$c=T$s._tempVector1,T$l=T$s._tempVector2;T$cC.subtract(T$n,T$C,T$l),T$cC.normalize(T$l,T$l),T$cC.cross(T$_,T$l,T$p),T$cC.normalize(T$p,T$p),T$cC.cross(T$l,T$p,T$c),T$E.identity(),T$y[0]=T$p.x,T$y[4]=T$p.y,T$y[8]=T$p.z,T$y[1]=T$c.x,T$y[5]=T$c.y,T$y[9]=T$c.z,T$y[2]=T$l.x,T$y[6]=T$l.y,T$y[10]=T$l.z,T$y[12]=-T$cC.dot(T$p,T$n),T$y[13]=-T$cC.dot(T$c,T$n),T$y[14]=-T$cC.dot(T$l,T$n);},T$s.createPerspective=function(T$n,T$C,T$_,T$E,T$y){var T$p=T$y.elements,T$c=1/Math.tan(T$n/2),T$l=1/(T$_-T$E);T$p[0]=T$c/T$C,T$p[5]=T$c,T$p[10]=(T$E+T$_)*T$l,T$p[11]=-1,T$p[14]=2*T$E*T$_*T$l,T$p[1]=T$p[2]=T$p[3]=T$p[4]=T$p[6]=T$p[7]=T$p[8]=T$p[9]=T$p[12]=T$p[13]=T$p[15]=0;},T$s.createOrthoOffCenterRH=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){var T$l=T$c.elements,T$W=1/(T$n-T$C),T$q=1/(T$_-T$E),T$J=1/(T$y-T$p);T$l[1]=T$l[2]=T$l[3]=T$l[4]=T$l[6]=T$l[7]=T$l[8]=T$l[9]=T$l[11]=0,T$l[15]=1,T$l[0]=-2*T$W,T$l[5]=-2*T$q,T$l[10]=2*T$J,T$l[12]=(T$n+T$C)*T$W,T$l[13]=(T$E+T$_)*T$q,T$l[14]=(T$p+T$y)*T$J;},T$s.translation=function(T$n,T$C){var T$_=T$n.elements,T$E=T$C.elements;T$E[0]=T$E[5]=T$E[10]=T$E[15]=1,T$E[12]=T$_[0],T$E[13]=T$_[1],T$E[14]=T$_[2];},T$j(T$s,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new T$s();},"_tempVector0",function(){return this._tempVector0=new T$cC();},"_tempVector1",function(){return this._tempVector1=new T$cC();},"_tempVector2",function(){return this._tempVector2=new T$cC();},"_tempQuaternion",function(){return this._tempQuaternion=new T$_C();},"DEFAULT",function(){return this.DEFAULT=new T$s();},"ZERO",function(){return this.ZERO=new T$s(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);}]),T$s;}(),T$CC=(function(){function T$O(T$n,T$C){this.extents=null,this.transformation=null,this.extents=T$n,this.transformation=T$C;}T$x(T$O,"laya.d3.math.OrientedBoundBox");var T$n=T$O.prototype;T$n.getCorners=function(T$n){var T$C=T$O._tempV30.elements,T$_=T$O._tempV31.elements,T$E=T$O._tempV32.elements,T$y=this.extents.elements;T$C[0]=T$y[0],T$C[1]=T$C[2]=0,T$_[1]=T$y[1],T$_[0]=T$_[2]=0,T$E[2]=T$y[2],T$E[0]=T$E[1]=0,T$cC.TransformNormal(T$O._tempV30,this.transformation,T$O._tempV30),T$cC.TransformNormal(T$O._tempV31,this.transformation,T$O._tempV31),T$cC.TransformNormal(T$O._tempV32,this.transformation,T$O._tempV32);var T$p=T$O._tempV33;this.transformation.getTranslationVector(T$p),T$n.length=8,T$cC.add(T$p,T$O._tempV30,T$O._tempV34),T$cC.add(T$O._tempV34,T$O._tempV31,T$O._tempV34),T$cC.add(T$O._tempV34,T$O._tempV32,T$n[0]),T$cC.add(T$p,T$O._tempV30,T$O._tempV34),T$cC.add(T$O._tempV34,T$O._tempV31,T$O._tempV34),T$cC.subtract(T$O._tempV34,T$O._tempV32,T$n[1]),T$cC.subtract(T$p,T$O._tempV30,T$O._tempV34),T$cC.add(T$O._tempV34,T$O._tempV31,T$O._tempV34),T$cC.subtract(T$O._tempV34,T$O._tempV32,T$n[2]),T$cC.subtract(T$p,T$O._tempV30,T$O._tempV34),T$cC.add(T$O._tempV34,T$O._tempV31,T$O._tempV34),T$cC.add(T$O._tempV34,T$O._tempV32,T$n[3]),T$cC.add(T$p,T$O._tempV30,T$O._tempV34),T$cC.subtract(T$O._tempV34,T$O._tempV31,T$O._tempV34),T$cC.add(T$O._tempV34,T$O._tempV32,T$n[4]),T$cC.add(T$p,T$O._tempV30,T$O._tempV34),T$cC.subtract(T$O._tempV34,T$O._tempV31,T$O._tempV34),T$cC.subtract(T$O._tempV34,T$O._tempV32,T$n[5]),T$cC.subtract(T$p,T$O._tempV30,T$O._tempV34),T$cC.subtract(T$O._tempV34,T$O._tempV31,T$O._tempV34),T$cC.subtract(T$O._tempV34,T$O._tempV32,T$n[6]),T$cC.subtract(T$p,T$O._tempV30,T$O._tempV34),T$cC.subtract(T$O._tempV34,T$O._tempV31,T$O._tempV34),T$cC.add(T$O._tempV34,T$O._tempV32,T$n[7]);},T$n.transform=function(T$n){T$nC.multiply(this.transformation,T$n,this.transformation);},T$n.scale=function(T$n){T$cC.multiply(this.extents,T$n,this.extents);},T$n.translate=function(T$n){this.transformation.getTranslationVector(T$O._tempV30),T$cC.add(T$O._tempV30,T$n,T$O._tempV31),this.transformation.setTranslationVector(T$O._tempV31);},T$n.Size=function(T$n){T$cC.scale(this.extents,2,T$n);},T$n.getSize=function(T$n){var T$C=this.extents.elements;T$O._tempV30.x=T$C[0],T$O._tempV31.y=T$C[1],T$O._tempV32.z=T$C[2],T$cC.TransformNormal(T$O._tempV30,this.transformation,T$O._tempV30),T$cC.TransformNormal(T$O._tempV31,this.transformation,T$O._tempV31),T$cC.TransformNormal(T$O._tempV31,this.transformation,T$O._tempV32);var T$_=T$n.elements;T$_[0]=T$cC.scalarLength(T$O._tempV30),T$_[1]=T$cC.scalarLength(T$O._tempV31),T$_[2]=T$cC.scalarLength(T$O._tempV32);},T$n.getSizeSquared=function(T$n){var T$C=this.extents.elements;T$O._tempV30.x=T$C[0],T$O._tempV31.y=T$C[1],T$O._tempV32.z=T$C[2],T$cC.TransformNormal(T$O._tempV30,this.transformation,T$O._tempV30),T$cC.TransformNormal(T$O._tempV31,this.transformation,T$O._tempV31),T$cC.TransformNormal(T$O._tempV31,this.transformation,T$O._tempV32);var T$_=T$n.elements;T$_[0]=T$cC.scalarLengthSquared(T$O._tempV30),T$_[1]=T$cC.scalarLengthSquared(T$O._tempV31),T$_[2]=T$cC.scalarLengthSquared(T$O._tempV32);},T$n.getCenter=function(T$n){this.transformation.getTranslationVector(T$n);},T$n.containsPoint=function(T$n){var T$C=this.extents.elements,T$_=T$C[0],T$E=T$C[1],T$y=T$C[2];this.transformation.invert(T$O._tempM0),T$cC.transformCoordinate(T$n,T$O._tempM0,T$O._tempV30);var T$p=T$O._tempV30.elements,T$c=Math.abs(T$p[0]),T$l=Math.abs(T$p[1]),T$W=Math.abs(T$p[2]);return T$Kn.nearEqual(T$c,T$_)&&T$Kn.nearEqual(T$l,T$E)&&T$Kn.nearEqual(T$W,T$y)?2:T$c<T$_&&T$l<T$E&&T$W<T$y?1:0;},T$n.containsPoints=function(T$n){var T$C=this.extents.elements,T$_=T$C[0],T$E=T$C[1],T$y=T$C[2];this.transformation.invert(T$O._tempM0);for(var T$p=!0,T$c=!1,T$l=0;T$l<T$n.length;T$l++){T$cC.transformCoordinate(T$n[T$l],T$O._tempM0,T$O._tempV30);var T$W=T$O._tempV30.elements,T$q=Math.abs(T$W[0]),T$J=Math.abs(T$W[1]),T$j=Math.abs(T$W[2]);T$Kn.nearEqual(T$q,T$_)&&T$Kn.nearEqual(T$J,T$E)&&T$Kn.nearEqual(T$j,T$y)&&(T$c=!0),T$q<T$_&&T$J<T$E&&T$j<T$y?T$c=!0:T$p=!1;}return T$p?1:T$c?2:0;},T$n.containsSphere=function(T$n,T$C){void 0===T$C&&(T$C=!1);var T$_=this.extents.elements,T$E=T$_[0],T$y=T$_[1],T$p=T$_[2],T$c=T$n.radius;this.transformation.invert(T$O._tempM0),T$cC.transformCoordinate(T$n.center,T$O._tempM0,T$O._tempV30);var T$l=NaN;if(T$l=T$C?T$c:(T$cC.scale(T$cC.UnitX,T$c,T$O._tempV31),T$cC.TransformNormal(T$O._tempV31,T$O._tempM0,T$O._tempV31),T$cC.scalarLength(T$O._tempV31)),T$cC.scale(this.extents,-1,T$O._tempV32),T$cC.Clamp(T$O._tempV30,T$O._tempV32,this.extents,T$O._tempV33),T$l*T$l<T$cC.distanceSquared(T$O._tempV30,T$O._tempV33))return 0;var T$W=T$O._tempV30.elements,T$q=T$W[0],T$J=T$W[1],T$j=T$W[2],T$P=T$O._tempV32.elements,T$x=T$P[0],T$b=T$P[1],T$r=T$P[2];return T$x+T$l<=T$q&&T$q<=T$E-T$l&&T$l<T$E-T$x&&T$b+T$l<=T$J&&T$J<=T$y-T$l&&T$l<T$y-T$b&&T$r+T$l<=T$j&&T$j<=T$p-T$l&&T$l<T$p-T$r?1:2;},T$n.containsOrientedBoundBox=function(T$n){var T$C=0,T$_=0;T$n.getCorners(T$O._corners);var T$E=this.containsPoints(T$O._corners);if(0!=T$E)return T$E;var T$y=this.extents.elements;T$n.extents.cloneTo(T$O._tempV35);var T$p=T$O._tempV35.elements;T$O._getRows(this.transformation,T$O._rows1),T$O._getRows(T$n.transformation,T$O._rows2);var T$c=NaN;for(T$C=0;T$C<4;T$C++)for(T$_=0;T$_<4;T$_++)3==T$C||3==T$_?(T$O._tempM0.setElementByRowColumn(T$C,T$_,0),T$O._tempM1.setElementByRowColumn(T$C,T$_,0)):(T$c=T$cC.dot(T$O._rows1[T$C],T$O._rows2[T$_]),T$O._tempM0.setElementByRowColumn(T$C,T$_,T$c),T$O._tempM1.setElementByRowColumn(T$C,T$_,Math.abs(T$c)));T$n.getCenter(T$O._tempV34),this.getCenter(T$O._tempV36),T$cC.subtract(T$O._tempV34,T$O._tempV36,T$O._tempV30);var T$l=T$O._tempV31.elements;T$l[0]=T$cC.dot(T$O._tempV30,T$O._rows1[0]),T$l[1]=T$cC.dot(T$O._tempV30,T$O._rows1[1]),T$l[2]=T$cC.dot(T$O._tempV30,T$O._rows1[2]);var T$W=T$O._tempV32.elements,T$q=T$O._tempV33.elements;for(T$C=0;T$C<3;T$C++)if(T$W[0]=T$O._tempM1.getElementByRowColumn(T$C,0),T$W[1]=T$O._tempM1.getElementByRowColumn(T$C,1),T$W[2]=T$O._tempM1.getElementByRowColumn(T$C,2),T$y[T$C]+T$cC.dot(T$O._tempV35,T$O._tempV32)<Math.abs(T$l[T$C]))return 0;for(T$_=0;T$_<3;T$_++)if(T$W[0]=T$O._tempM1.getElementByRowColumn(0,T$_),T$W[1]=T$O._tempM1.getElementByRowColumn(1,T$_),T$W[2]=T$O._tempM1.getElementByRowColumn(2,T$_),T$q[0]=T$O._tempM0.getElementByRowColumn(0,T$_),T$q[1]=T$O._tempM0.getElementByRowColumn(1,T$_),T$q[2]=T$O._tempM0.getElementByRowColumn(2,T$_),T$cC.dot(this.extents,T$O._tempV32)+T$p[T$_]<Math.abs(T$cC.dot(T$O._tempV31,T$O._tempV33)))return 0;for(T$C=0;T$C<3;T$C++)for(T$_=0;T$_<3;T$_++){var T$J=(T$C+1)%3,T$j=(T$C+2)%3,T$P=(T$_+1)%3,T$x=(T$_+2)%3;if(T$y[T$J]*T$O._tempM1.getElementByRowColumn(T$j,T$_)+T$y[T$j]*T$O._tempM1.getElementByRowColumn(T$J,T$_)+(T$p[T$P]*T$O._tempM1.getElementByRowColumn(T$C,T$x)+T$p[T$x]*T$O._tempM1.getElementByRowColumn(T$C,T$P))<Math.abs(T$l[T$j]*T$O._tempM0.getElementByRowColumn(T$J,T$_)-T$l[T$J]*T$O._tempM0.getElementByRowColumn(T$j,T$_)))return 0;}return 2;},T$n.containsLine=function(T$n,T$C){T$O._corners[0]=T$n,T$O._corners[1]=T$C;var T$_=this.containsPoints(T$O._corners);if(0!=T$_)return T$_;var T$E=this.extents.elements,T$y=T$E[0],T$p=T$E[1],T$c=T$E[2];this.transformation.invert(T$O._tempM0),T$cC.transformCoordinate(T$n,T$O._tempM0,T$O._tempV30),T$cC.transformCoordinate(T$C,T$O._tempM0,T$O._tempV31),T$cC.add(T$O._tempV30,T$O._tempV31,T$O._tempV32),T$cC.scale(T$O._tempV32,.5,T$O._tempV32),T$cC.subtract(T$O._tempV30,T$O._tempV32,T$O._tempV33);var T$l=T$O._tempV33.elements,T$W=T$l[0],T$q=T$l[1],T$J=T$l[2],T$j=T$O._tempV34.elements,T$P=T$j[0]=Math.abs(T$l[0]),T$x=T$j[1]=Math.abs(T$l[1]),T$b=T$j[2]=Math.abs(T$l[2]),T$r=T$O._tempV32.elements,T$m=T$r[0],T$d=T$r[1],T$a=T$r[2];return Math.abs(T$m)>T$y+T$P?0:Math.abs(T$d)>T$p+T$x?0:Math.abs(T$a)>T$c+T$b?0:Math.abs(T$d*T$J-T$a*T$q)>T$p*T$b+T$c*T$x?0:Math.abs(T$m*T$J-T$a*T$W)>T$y*T$b+T$c*T$P?0:Math.abs(T$m*T$q-T$d*T$W)>T$y*T$x+T$p*T$P?0:2;},T$n.containsBoundBox=function(T$n){var T$C=0,T$_=0,T$E=T$n.min,T$y=T$n.max;T$n.getCorners(T$O._corners);var T$p=this.containsPoints(T$O._corners);if(0!=T$p)return T$p;T$cC.subtract(T$y,T$E,T$O._tempV30),T$cC.scale(T$O._tempV30,.5,T$O._tempV30),T$cC.add(T$E,T$O._tempV30,T$O._tempV30),T$cC.subtract(T$y,T$O._tempV30,T$O._tempV31);var T$c=this.extents.elements,T$l=T$O._tempV31.elements;T$O._getRows(this.transformation,T$O._rows1),this.transformation.invert(T$O._tempM0);for(T$C=0;T$C<3;T$C++)for(T$_=0;T$_<3;T$_++)T$O._tempM1.setElementByRowColumn(T$C,T$_,Math.abs(T$O._tempM0.getElementByRowColumn(T$C,T$_)));this.getCenter(T$O._tempV35),T$cC.subtract(T$O._tempV30,T$O._tempV35,T$O._tempV32);var T$W=T$O._tempV31.elements;T$W[0]=T$cC.dot(T$O._tempV32,T$O._rows1[0]),T$W[1]=T$cC.dot(T$O._tempV32,T$O._rows1[1]),T$W[2]=T$cC.dot(T$O._tempV32,T$O._rows1[2]);var T$q=T$O._tempV33.elements,T$J=T$O._tempV34.elements;for(T$C=0;T$C<3;T$C++)if(T$q[0]=T$O._tempM1.getElementByRowColumn(T$C,0),T$q[1]=T$O._tempM1.getElementByRowColumn(T$C,1),T$q[2]=T$O._tempM1.getElementByRowColumn(T$C,2),T$c[T$C]+T$cC.dot(T$O._tempV31,T$O._tempV33)<Math.abs(T$W[T$C]))return 0;for(T$_=0;T$_<3;T$_++)if(T$q[0]=T$O._tempM1.getElementByRowColumn(0,T$_),T$q[1]=T$O._tempM1.getElementByRowColumn(1,T$_),T$q[2]=T$O._tempM1.getElementByRowColumn(2,T$_),T$J[0]=T$O._tempM0.getElementByRowColumn(0,T$_),T$J[1]=T$O._tempM0.getElementByRowColumn(1,T$_),T$J[2]=T$O._tempM0.getElementByRowColumn(2,T$_),T$cC.dot(this.extents,T$O._tempV33)+T$l[T$_]<Math.abs(T$cC.dot(T$O._tempV31,T$O._tempV34)))return 0;for(T$C=0;T$C<3;T$C++)for(T$_=0;T$_<3;T$_++){var T$j=(T$C+1)%3,T$P=(T$C+2)%3,T$x=(T$_+1)%3,T$b=(T$_+2)%3;if(T$c[T$j]*T$O._tempM1.getElementByRowColumn(T$P,T$_)+T$c[T$P]*T$O._tempM1.getElementByRowColumn(T$j,T$_)+(T$l[T$x]*T$O._tempM1.getElementByRowColumn(T$C,T$b)+T$l[T$b]*T$O._tempM1.getElementByRowColumn(T$C,T$x))<Math.abs(T$W[T$P]*T$O._tempM0.getElementByRowColumn(T$j,T$_)-T$W[T$j]*T$O._tempM0.getElementByRowColumn(T$P,T$_)))return 0;}return 2;},T$n.intersectsRay=function(T$n,T$C){T$cC.scale(this.extents,-1,T$O._tempV30),this.transformation.invert(T$O._tempM0),T$cC.TransformNormal(T$n.direction,T$O._tempM0,T$O._ray.direction),T$cC.transformCoordinate(T$n.origin,T$O._tempM0,T$O._ray.origin),T$O._boxBound1.min=T$O._tempV30,T$O._boxBound1.max=this.extents;var T$_=Collision.intersectsRayAndBoxRP(T$O._ray,T$O._boxBound1,T$C);return-1!==T$_&&T$cC.transformCoordinate(T$C,this.transformation,T$C),T$_;},T$n._getLocalCorners=function(T$n){T$n.length=8;var T$C=this.extents.elements;T$O._tempV30.x=T$C[0],T$O._tempV31.y=T$C[1],T$O._tempV32.z=T$C[2],T$cC.add(T$O._tempV30,T$O._tempV31,T$O._tempV33),T$cC.add(T$O._tempV33,T$O._tempV32,T$n[0]),T$cC.add(T$O._tempV30,T$O._tempV31,T$O._tempV33),T$cC.subtract(T$O._tempV33,T$O._tempV32,T$n[1]),T$cC.subtract(T$O._tempV31,T$O._tempV30,T$O._tempV33),T$cC.subtract(T$O._tempV33,T$O._tempV30,T$n[2]),T$cC.subtract(T$O._tempV31,T$O._tempV30,T$O._tempV33),T$cC.add(T$O._tempV33,T$O._tempV32,T$n[3]),T$cC.subtract(T$O._tempV30,T$O._tempV31,T$O._tempV33),T$cC.add(T$O._tempV33,T$O._tempV32,T$n[4]),T$cC.subtract(T$O._tempV30,T$O._tempV31,T$O._tempV33),T$cC.subtract(T$O._tempV33,T$O._tempV32,T$n[5]),T$cC.scale(T$n[0],-1,T$n[6]),T$cC.subtract(T$O._tempV32,T$O._tempV30,T$O._tempV33),T$cC.subtract(T$O._tempV33,T$O._tempV31,T$n[7]);},T$n.equals=function(T$n){return this.extents==T$n.extents&&this.transformation==T$n.transformation;},T$n.cloneTo=function(T$n){var T$C=T$n;this.extents.cloneTo(T$C.extents),this.transformation.cloneTo(T$C.transformation);},T$O.createByBoundBox=function(T$n,T$C){var T$_=T$n.min,T$E=T$n.max;T$cC.subtract(T$E,T$_,T$O._tempV30),T$cC.scale(T$O._tempV30,.5,T$O._tempV30),T$cC.add(T$_,T$O._tempV30,T$O._tempV31),T$cC.subtract(T$E,T$O._tempV31,T$O._tempV32),T$nC.translation(T$O._tempV31,T$O._tempM0);var T$y=T$O._tempV32.clone(),T$p=T$O._tempM0.clone();T$C.extents=T$y,T$C.transformation=T$p;},T$O.createByMinAndMaxVertex=function(T$n,T$C){return T$cC.subtract(T$C,T$n,T$O._tempV30),T$cC.scale(T$O._tempV30,.5,T$O._tempV30),T$cC.add(T$n,T$O._tempV30,T$O._tempV31),T$cC.subtract(T$C,T$O._tempV31,T$O._tempV32),T$nC.translation(T$O._tempV31,T$O._tempM0),new T$O(T$O._tempV32,T$O._tempM0);},T$O._getRows=function(T$n,T$C){T$C.length=3;var T$_=T$n.elements,T$E=T$C[0].elements;T$E[0]=T$_[0],T$E[1]=T$_[1],T$E[2]=T$_[2];var T$y=T$C[1].elements;T$y[0]=T$_[4],T$y[1]=T$_[5],T$y[2]=T$_[6];var T$p=T$C[2].elements;T$p[0]=T$_[8],T$p[1]=T$_[9],T$p[2]=T$_[10];},T$O.getObbtoObbMatrix4x4=function(T$n,T$C,T$_,T$E){var T$y=T$n.transformation,T$p=T$C.transformation;if(T$_){T$O._getRows(T$y,T$O._rows1),T$O._getRows(T$p,T$O._rows2);for(var T$c=0;T$c<3;T$c++)for(var T$l=0;T$l<3;T$l++)T$E.setElementByRowColumn(T$c,T$l,T$cC.dot(T$O._rows2[T$c],T$O._rows1[T$l]));T$C.getCenter(T$O._tempV30),T$n.getCenter(T$O._tempV31),T$cC.subtract(T$O._tempV30,T$O._tempV31,T$O._tempV32);var T$W=T$E.elements;T$W[12]=T$cC.dot(T$O._tempV32,T$O._rows1[0]),T$W[13]=T$cC.dot(T$O._tempV32,T$O._rows1[1]),T$W[14]=T$cC.dot(T$O._tempV32,T$O._rows1[2]),T$W[15]=1;}else T$y.invert(T$O._tempM0),T$nC.multiply(T$p,T$O._tempM0,T$E);},T$O.merge=function(T$n,T$C,T$_){var T$E=T$n.extents,T$y=T$n.transformation;T$O.getObbtoObbMatrix4x4(T$n,T$C,T$_,T$O._tempM0),T$C._getLocalCorners(T$O._corners),T$cC.transformCoordinate(T$O._corners[0],T$O._tempM0,T$O._corners[0]),T$cC.transformCoordinate(T$O._corners[1],T$O._tempM0,T$O._corners[1]),T$cC.transformCoordinate(T$O._corners[2],T$O._tempM0,T$O._corners[2]),T$cC.transformCoordinate(T$O._corners[3],T$O._tempM0,T$O._corners[3]),T$cC.transformCoordinate(T$O._corners[4],T$O._tempM0,T$O._corners[4]),T$cC.transformCoordinate(T$O._corners[5],T$O._tempM0,T$O._corners[5]),T$cC.transformCoordinate(T$O._corners[6],T$O._tempM0,T$O._corners[6]),T$cC.transformCoordinate(T$O._corners[7],T$O._tempM0,T$O._corners[7]),T$cC.scale(T$E,-1,T$O._boxBound1.min),T$E.cloneTo(T$O._boxBound1.max),T$Rn.createfromPoints(T$O._corners,T$O._boxBound2),T$Rn.merge(T$O._boxBound2,T$O._boxBound1,T$O._boxBound3);var T$p=T$O._boxBound3.min,T$c=T$O._boxBound3.max;T$cC.subtract(T$c,T$p,T$O._tempV30),T$cC.scale(T$O._tempV30,.5,T$O._tempV30),T$cC.add(T$p,T$O._tempV30,T$O._tempV32),T$cC.subtract(T$c,T$O._tempV32,T$E),T$cC.transformCoordinate(T$O._tempV32,T$y,T$O._tempV33);},T$j(T$O,["_tempV30",function(){return this._tempV30=new T$cC();},"_tempV31",function(){return this._tempV31=new T$cC();},"_tempV32",function(){return this._tempV32=new T$cC();},"_tempV33",function(){return this._tempV33=new T$cC();},"_tempV34",function(){return this._tempV34=new T$cC();},"_tempV35",function(){return this._tempV35=new T$cC();},"_tempV36",function(){return this._tempV36=new T$cC();},"_tempM0",function(){return this._tempM0=new T$nC();},"_tempM1",function(){return this._tempM1=new T$nC();},"_corners",function(){return this._corners=[new T$cC(),new T$cC(),new T$cC(),new T$cC(),new T$cC(),new T$cC(),new T$cC(),new T$cC()];},"_rows1",function(){return this._rows1=[new T$cC(),new T$cC(),new T$cC()];},"_rows2",function(){return this._rows2=[new T$cC(),new T$cC(),new T$cC()];},"_ray",function(){return this._ray=new T$yC(new T$cC(),new T$cC());},"_boxBound1",function(){return this._boxBound1=new T$Rn(new T$cC(),new T$cC());},"_boxBound2",function(){return this._boxBound2=new T$Rn(new T$cC(),new T$cC());},"_boxBound3",function(){return this._boxBound3=new T$Rn(new T$cC(),new T$cC());}]);}(),function(){function T$k(T$n,T$C){this.normal=null,this.distance=NaN,void 0===T$C&&(T$C=0),this.normal=T$n,this.distance=T$C;}return T$x(T$k,"laya.d3.math.Plane"),T$k.prototype.normalize=function(){var T$n=this.normal.elements,T$C=T$n[0],T$_=T$n[1],T$E=T$n[2],T$y=1/Math.sqrt(T$C*T$C+T$_*T$_+T$E*T$E);T$n[0]=T$C*T$y,T$n[1]=T$_*T$y,T$n[2]=T$E*T$y,this.distance*=T$y;},T$k.createPlaneBy3P=function(T$n,T$C,T$_){var T$E=T$n.elements,T$y=T$C.elements,T$p=T$_.elements,T$c=T$y[0]-T$E[0],T$l=T$y[1]-T$E[1],T$W=T$y[2]-T$E[2],T$q=T$p[0]-T$E[0],T$J=T$p[1]-T$E[1],T$j=T$p[2]-T$E[2],T$P=T$l*T$j-T$W*T$J,T$x=T$W*T$q-T$c*T$j,T$b=T$c*T$J-T$l*T$q,T$r=1/Math.sqrt(T$P*T$P+T$x*T$x+T$b*T$b),T$m=T$P*T$r,T$d=T$x*T$r,T$a=T$b*T$r,T$O=T$k._TEMPVec3.elements;T$O[0]=T$m,T$O[1]=T$d,T$O[2]=T$a;var T$A=-(T$m*T$E[0]+T$d*T$E[1]+T$a*T$E[2]);return new T$k(T$k._TEMPVec3,T$A);},T$k.PlaneIntersectionType_Back=0,T$k.PlaneIntersectionType_Front=1,T$k.PlaneIntersectionType_Intersecting=2,T$j(T$k,["_TEMPVec3",function(){return this._TEMPVec3=new T$cC();}]),T$k;}()),T$_C=function(){function T$y(T$n,T$C,T$_,T$E){this.elements=new Float32Array(4),void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0),void 0===T$E&&(T$E=1),this.elements[0]=T$n,this.elements[1]=T$C,this.elements[2]=T$_,this.elements[3]=T$E;}T$x(T$y,"laya.d3.math.Quaternion");var T$n=T$y.prototype;return T$k.imps(T$n,{"laya.d3.core.IClone":!0}),T$n.scaling=function(T$n,T$C){var T$_=T$C.elements,T$E=this.elements;T$_[0]=T$E[0]*T$n,T$_[1]=T$E[1]*T$n,T$_[2]=T$E[2]*T$n,T$_[3]=T$E[3]*T$n;},T$n.normalize=function(T$n){var T$C=T$n.elements,T$_=this.elements,T$E=T$_[0],T$y=T$_[1],T$p=T$_[2],T$c=T$_[3],T$l=T$E*T$E+T$y*T$y+T$p*T$p+T$c*T$c;0<T$l&&(T$l=1/Math.sqrt(T$l),T$C[0]=T$E*T$l,T$C[1]=T$y*T$l,T$C[2]=T$p*T$l,T$C[3]=T$c*T$l);},T$n.length=function(){var T$n=this.elements,T$C=T$n[0],T$_=T$n[1],T$E=T$n[2],T$y=T$n[3];return Math.sqrt(T$C*T$C+T$_*T$_+T$E*T$E+T$y*T$y);},T$n.rotateX=function(T$n,T$C){var T$_=T$C.elements,T$E=this.elements;T$n*=.5;var T$y=T$E[0],T$p=T$E[1],T$c=T$E[2],T$l=T$E[3],T$W=Math.sin(T$n),T$q=Math.cos(T$n);T$_[0]=T$y*T$q+T$l*T$W,T$_[1]=T$p*T$q+T$c*T$W,T$_[2]=T$c*T$q-T$p*T$W,T$_[3]=T$l*T$q-T$y*T$W;},T$n.rotateY=function(T$n,T$C){var T$_=T$C.elements,T$E=this.elements;T$n*=.5;var T$y=T$E[0],T$p=T$E[1],T$c=T$E[2],T$l=T$E[3],T$W=Math.sin(T$n),T$q=Math.cos(T$n);T$_[0]=T$y*T$q-T$c*T$W,T$_[1]=T$p*T$q+T$l*T$W,T$_[2]=T$c*T$q+T$y*T$W,T$_[3]=T$l*T$q-T$p*T$W;},T$n.rotateZ=function(T$n,T$C){var T$_=T$C.elements,T$E=this.elements;T$n*=.5;var T$y=T$E[0],T$p=T$E[1],T$c=T$E[2],T$l=T$E[3],T$W=Math.sin(T$n),T$q=Math.cos(T$n);T$_[0]=T$y*T$q+T$p*T$W,T$_[1]=T$p*T$q-T$y*T$W,T$_[2]=T$c*T$q+T$l*T$W,T$_[3]=T$l*T$q-T$c*T$W;},T$n.getYawPitchRoll=function(T$n){T$cC.transformQuat(T$cC.ForwardRH,this,T$y.TEMPVector31),T$cC.transformQuat(T$cC.Up,this,T$y.TEMPVector32);var T$C=T$y.TEMPVector32.elements;T$y.angleTo(T$cC.ZERO,T$y.TEMPVector31,T$y.TEMPVector33);var T$_=T$y.TEMPVector33.elements;T$_[0]==Math.PI/2?(T$_[1]=T$y.arcTanAngle(T$C[2],T$C[0]),T$_[2]=0):T$_[0]==-Math.PI/2?(T$_[1]=T$y.arcTanAngle(-T$C[2],-T$C[0]),T$_[2]=0):(T$nC.createRotationY(-T$_[1],T$y.TEMPMatrix0),T$nC.createRotationX(-T$_[0],T$y.TEMPMatrix1),T$cC.transformCoordinate(T$y.TEMPVector32,T$y.TEMPMatrix0,T$y.TEMPVector32),T$cC.transformCoordinate(T$y.TEMPVector32,T$y.TEMPMatrix1,T$y.TEMPVector32),T$_[2]=T$y.arcTanAngle(T$C[1],-T$C[0])),T$_[1]<=-Math.PI&&(T$_[1]=Math.PI),T$_[2]<=-Math.PI&&(T$_[2]=Math.PI),T$_[1]>=Math.PI&&T$_[2]>=Math.PI&&(T$_[1]=0,T$_[2]=0,T$_[0]=Math.PI-T$_[0]);var T$E=T$n.elements;T$E[0]=T$_[1],T$E[1]=T$_[0],T$E[2]=T$_[2];},T$n.invert=function(T$n){var T$C=T$n.elements,T$_=this.elements,T$E=T$_[0],T$y=T$_[1],T$p=T$_[2],T$c=T$_[3],T$l=T$E*T$E+T$y*T$y+T$p*T$p+T$c*T$c,T$W=T$l?1/T$l:0;T$C[0]=-T$E*T$W,T$C[1]=-T$y*T$W,T$C[2]=-T$p*T$W,T$C[3]=T$c*T$W;},T$n.identity=function(){var T$n=this.elements;T$n[0]=0,T$n[1]=0,T$n[2]=0,T$n[3]=1;},T$n.fromArray=function(T$n,T$C){void 0===T$C&&(T$C=0),this.elements[0]=T$n[T$C+0],this.elements[1]=T$n[T$C+1],this.elements[2]=T$n[T$C+2],this.elements[3]=T$n[T$C+3];},T$n.cloneTo=function(T$n){var T$C,T$_,T$E;if((T$_=this.elements)!==(T$E=T$n.elements))for(T$C=0;T$C<4;++T$C)T$E[T$C]=T$_[T$C];},T$n.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$n.equals=function(T$n){var T$C=this.elements,T$_=T$n.elements;return T$Kn.nearEqual(T$C[0],T$_[0])&&T$Kn.nearEqual(T$C[1],T$_[1])&&T$Kn.nearEqual(T$C[2],T$_[2])&&T$Kn.nearEqual(T$C[3],T$_[3]);},T$n.lengthSquared=function(){var T$n=this.elements[0],T$C=this.elements[1],T$_=this.elements[2],T$E=this.elements[3];return T$n*T$n+T$C*T$C+T$_*T$_+T$E*T$E;},T$b(0,T$n,"x",function(){return this.elements[0];}),T$b(0,T$n,"y",function(){return this.elements[1];}),T$b(0,T$n,"z",function(){return this.elements[2];}),T$b(0,T$n,"w",function(){return this.elements[3];}),T$y.createFromYawPitchRoll=function(T$n,T$C,T$_,T$E){var T$y=.5*T$_,T$p=.5*T$C,T$c=.5*T$n,T$l=Math.sin(T$y),T$W=Math.cos(T$y),T$q=Math.sin(T$p),T$J=Math.cos(T$p),T$j=Math.sin(T$c),T$P=Math.cos(T$c),T$x=T$E.elements;T$x[0]=T$P*T$q*T$W+T$j*T$J*T$l,T$x[1]=T$j*T$J*T$W-T$P*T$q*T$l,T$x[2]=T$P*T$J*T$l-T$j*T$q*T$W,T$x[3]=T$P*T$J*T$W+T$j*T$q*T$l;},T$y.multiply=function(T$n,T$C,T$_){var T$E=T$n.elements,T$y=T$C.elements,T$p=T$_.elements,T$c=T$E[0],T$l=T$E[1],T$W=T$E[2],T$q=T$E[3],T$J=T$y[0],T$j=T$y[1],T$P=T$y[2],T$x=T$y[3],T$b=T$l*T$P-T$W*T$j,T$r=T$W*T$J-T$c*T$P,T$m=T$c*T$j-T$l*T$J,T$d=T$c*T$J+T$l*T$j+T$W*T$P;T$p[0]=T$c*T$x+T$J*T$q+T$b,T$p[1]=T$l*T$x+T$j*T$q+T$r,T$p[2]=T$W*T$x+T$P*T$q+T$m,T$p[3]=T$q*T$x-T$d;},T$y.arcTanAngle=function(T$n,T$C){return 0==T$n?1==T$C?Math.PI/2:-Math.PI/2:0<T$n?Math.atan(T$C/T$n):T$n<0?0<T$C?Math.atan(T$C/T$n)+Math.PI:Math.atan(T$C/T$n)-Math.PI:0;},T$y.angleTo=function(T$n,T$C,T$_){T$cC.subtract(T$C,T$n,T$y.TEMPVector30),T$cC.normalize(T$y.TEMPVector30,T$y.TEMPVector30),T$_.elements[0]=Math.asin(T$y.TEMPVector30.y),T$_.elements[1]=T$y.arcTanAngle(-T$y.TEMPVector30.z,-T$y.TEMPVector30.x);},T$y.createFromAxisAngle=function(T$n,T$C,T$_){var T$E=T$_.elements,T$y=T$n.elements;T$C*=.5;var T$p=Math.sin(T$C);T$E[0]=T$p*T$y[0],T$E[1]=T$p*T$y[1],T$E[2]=T$p*T$y[2],T$E[3]=Math.cos(T$C);},T$y.createFromMatrix3x3=function(T$n,T$C){var T$_,T$E=T$C.elements,T$y=T$n.elements,T$p=T$y[0]+T$y[4]+T$y[8];if(0<T$p)T$_=Math.sqrt(T$p+1),T$E[3]=.5*T$_,T$_=.5/T$_,T$E[0]=(T$y[5]-T$y[7])*T$_,T$E[1]=(T$y[6]-T$y[2])*T$_,T$E[2]=(T$y[1]-T$y[3])*T$_;else{var T$c=0;T$y[4]>T$y[0]&&(T$c=1),T$y[8]>T$y[3*T$c+T$c]&&(T$c=2);var T$l=(T$c+1)%3,T$W=(T$c+2)%3;T$_=Math.sqrt(T$y[3*T$c+T$c]-T$y[3*T$l+T$l]-T$y[3*T$W+T$W]+1),T$E[T$c]=.5*T$_,T$_=.5/T$_,T$E[3]=(T$y[3*T$l+T$W]-T$y[3*T$W+T$l])*T$_,T$E[T$l]=(T$y[3*T$l+T$c]+T$y[3*T$c+T$l])*T$_,T$E[T$W]=(T$y[3*T$W+T$c]+T$y[3*T$c+T$W])*T$_;}},T$y.createFromMatrix4x4=function(T$n,T$C){var T$_,T$E,T$y=T$n.elements,T$p=T$C.elements,T$c=T$y[0]+T$y[5]+T$y[10];0<T$c?(T$_=Math.sqrt(T$c+1),T$p[3]=.5*T$_,T$_=.5/T$_,T$p[0]=(T$y[6]-T$y[9])*T$_,T$p[1]=(T$y[8]-T$y[2])*T$_,T$p[2]=(T$y[1]-T$y[4])*T$_):T$y[0]>=T$y[5]&&T$y[0]>=T$y[10]?(T$E=.5/(T$_=Math.sqrt(1+T$y[0]-T$y[5]-T$y[10])),T$p[0]=.5*T$_,T$p[1]=(T$y[1]+T$y[4])*T$E,T$p[2]=(T$y[2]+T$y[8])*T$E,T$p[3]=(T$y[6]-T$y[9])*T$E):T$y[5]>T$y[10]?(T$E=.5/(T$_=Math.sqrt(1+T$y[5]-T$y[0]-T$y[10])),T$p[0]=(T$y[4]+T$y[1])*T$E,T$p[1]=.5*T$_,T$p[2]=(T$y[9]+T$y[6])*T$E,T$p[3]=(T$y[8]-T$y[2])*T$E):(T$E=.5/(T$_=Math.sqrt(1+T$y[10]-T$y[0]-T$y[5])),T$p[0]=(T$y[8]+T$y[2])*T$E,T$p[1]=(T$y[9]+T$y[6])*T$E,T$p[2]=.5*T$_,T$p[3]=(T$y[1]-T$y[4])*T$E);},T$y.slerp=function(T$n,T$C,T$_,T$E){var T$y,T$p,T$c,T$l,T$W,T$q=T$n.elements,T$J=T$C.elements,T$j=T$E.elements,T$P=T$q[0],T$x=T$q[1],T$b=T$q[2],T$r=T$q[3],T$m=T$J[0],T$d=T$J[1],T$a=T$J[2],T$O=T$J[3];return(T$p=T$P*T$m+T$x*T$d+T$b*T$a+T$r*T$O)<0&&(T$p=-T$p,T$m=-T$m,T$d=-T$d,T$a=-T$a,T$O=-T$O),T$W=1e-6<1-T$p?(T$y=Math.acos(T$p),T$c=Math.sin(T$y),T$l=Math.sin((1-T$_)*T$y)/T$c,Math.sin(T$_*T$y)/T$c):(T$l=1-T$_,T$_),T$j[0]=T$l*T$P+T$W*T$m,T$j[1]=T$l*T$x+T$W*T$d,T$j[2]=T$l*T$b+T$W*T$a,T$j[3]=T$l*T$r+T$W*T$O,T$j;},T$y.lerp=function(T$n,T$C,T$_,T$E){var T$y=T$E.elements,T$p=T$n.elements,T$c=T$C.elements,T$l=T$p[0],T$W=T$p[1],T$q=T$p[2],T$J=T$p[3];T$y[0]=T$l+T$_*(T$c[0]-T$l),T$y[1]=T$W+T$_*(T$c[1]-T$W),T$y[2]=T$q+T$_*(T$c[2]-T$q),T$y[3]=T$J+T$_*(T$c[3]-T$J);},T$y.add=function(T$n,T$C,T$_){var T$E=T$_.elements,T$y=T$n.elements,T$p=T$C.elements;T$E[0]=T$y[0]+T$p[0],T$E[1]=T$y[1]+T$p[1],T$E[2]=T$y[2]+T$p[2],T$E[3]=T$y[3]+T$p[3];},T$y.dot=function(T$n,T$C){var T$_=T$n.elements,T$E=T$C.elements;return T$_[0]*T$E[0]+T$_[1]*T$E[1]+T$_[2]*T$E[2]+T$_[3]*T$E[3];},T$y.rotationLookAt=function(T$n,T$C,T$_){T$y.lookAt(T$cC.ZERO,T$n,T$C,T$_);},T$y.lookAt=function(T$n,T$C,T$_,T$E){T$Dn.lookAt(T$n,T$C,T$_,T$y._tempMatrix3x3),T$y.rotationMatrix(T$y._tempMatrix3x3,T$E);},T$y.invert=function(T$n,T$C){var T$_=T$n.elements,T$E=T$C.elements,T$y=T$n.lengthSquared();T$Kn.isZero(T$y)||(T$y=1/T$y,T$E[0]=-T$_[0]*T$y,T$E[1]=-T$_[1]*T$y,T$E[2]=-T$_[2]*T$y,T$E[3]=T$_[3]*T$y);},T$y.rotationMatrix=function(T$n,T$C){var T$_=T$n.elements,T$E=T$_[0],T$y=T$_[1],T$p=T$_[2],T$c=T$_[3],T$l=T$_[4],T$W=T$_[5],T$q=T$_[6],T$J=T$_[7],T$j=T$_[8],T$P=T$C.elements,T$x=NaN,T$b=NaN,T$r=T$E+T$l+T$j;0<T$r?(T$x=Math.sqrt(T$r+1),T$P[3]=.5*T$x,T$x=.5/T$x,T$P[0]=(T$W-T$J)*T$x,T$P[1]=(T$q-T$p)*T$x,T$P[2]=(T$y-T$c)*T$x):T$l<=T$E&&T$j<=T$E?(T$b=.5/(T$x=Math.sqrt(1+T$E-T$l-T$j)),T$P[0]=.5*T$x,T$P[1]=(T$y+T$c)*T$b,T$P[2]=(T$p+T$q)*T$b,T$P[3]=(T$W-T$J)*T$b):T$j<T$l?(T$b=.5/(T$x=Math.sqrt(1+T$l-T$E-T$j)),T$P[0]=(T$c+T$y)*T$b,T$P[1]=.5*T$x,T$P[2]=(T$J+T$W)*T$b,T$P[3]=(T$q-T$p)*T$b):(T$b=.5/(T$x=Math.sqrt(1+T$j-T$E-T$l)),T$P[0]=(T$q+T$p)*T$b,T$P[1]=(T$J+T$W)*T$b,T$P[2]=.5*T$x,T$P[3]=(T$y-T$c)*T$b);},T$y.DEFAULT=new T$y(),T$j(T$y,["TEMPVector30",function(){return this.TEMPVector30=new T$cC();},"TEMPVector31",function(){return this.TEMPVector31=new T$cC();},"TEMPVector32",function(){return this.TEMPVector32=new T$cC();},"TEMPVector33",function(){return this.TEMPVector33=new T$cC();},"TEMPMatrix0",function(){return this.TEMPMatrix0=new T$nC();},"TEMPMatrix1",function(){return this.TEMPMatrix1=new T$nC();},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new T$Dn();},"NAN",function(){return this.NAN=new T$y(NaN,NaN,NaN,NaN);}]),T$y;}(),T$EC=function(){function T$n(T$n){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=T$n,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1;}T$x(T$n,"laya.d3.math.Rand");var T$C=T$n.prototype;return T$C.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3];},T$C.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607);},T$C.getSignedFloat=function(){return 2*this.getFloat()-1;},T$b(0,T$C,"seed",function(){return this.seeds[0];},function(T$n){this.seeds[0]=T$n,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1;}),T$n.getFloatFromInt=function(T$n){return 1/8388607*(8388607&T$n);},T$n.getByteFromInt=function(T$n){return(8388607&T$n)>>>15;},T$n;}(),T$yC=(function(){function T$y(T$n){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(T$n instanceof Array)||4!==T$n.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|T$n[0],this._state0L=0|T$n[1],this._state1U=0|T$n[2],this._state1L=0|T$n[3];}T$x(T$y,"laya.d3.math.RandX");var T$n=T$y.prototype;T$n.randomint=function(){var T$n=this._state0U,T$C=this._state0L,T$_=this._state1U,T$E=this._state1L,T$y=(T$E>>>0)+(T$C>>>0),T$p=T$_+T$n+(T$y/2>>>31)>>>0,T$c=T$y>>>0,T$l=0,T$W=0;T$l=(T$n^=T$l=T$n<<23|(-512&T$C)>>>9)^(this._state0U=T$_),T$W=(T$C^=T$W=T$C<<23)^(this._state0L=T$E);T$l^=T$n>>>18,T$W^=T$C>>>18|(262143&T$n)<<14;return T$l^=T$_>>>5,T$W^=T$E>>>5|(31&T$_)<<27,this._state1U=T$l,this._state1L=T$W,[T$p,T$c];},T$n.random=function(){var T$n=this.randomint(),T$C=T$n[0],T$_=1023<<20|T$C>>>12,T$E=0|(T$n[1]>>>12|(4095&T$C)<<20);return T$y._CONVERTION_BUFFER.setUint32(0,T$_,!1),T$y._CONVERTION_BUFFER.setUint32(4,T$E,!1),T$EC._CONVERTION_BUFFER.getFloat64(0,!1)-1;},T$j(T$y,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8));},"defaultRand",function(){return this.defaultRand=new T$EC([0,Date.now()/65536,0,Date.now()%65536]);}]);}(),function(){function T$n(T$n,T$C){this.origin=null,this.direction=null,this.origin=T$n,this.direction=T$C;}return T$x(T$n,"laya.d3.math.Ray"),T$n;}()),T$pC=function(){function T$n(T$n,T$C){this.elements=new Float32Array(2),void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=0);var T$_=this.elements;T$_[0]=T$n,T$_[1]=T$C;}T$x(T$n,"laya.d3.math.Vector2");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.core.IClone":!0}),T$C.fromArray=function(T$n,T$C){void 0===T$C&&(T$C=0),this.elements[0]=T$n[T$C+0],this.elements[1]=T$n[T$C+1];},T$C.cloneTo=function(T$n){var T$C=T$n.elements,T$_=this.elements;T$C[0]=T$_[0],T$C[1]=T$_[1];},T$C.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$b(0,T$C,"x",function(){return this.elements[0];},function(T$n){this.elements[0]=T$n;}),T$b(0,T$C,"y",function(){return this.elements[1];},function(T$n){this.elements[1]=T$n;}),T$n.scale=function(T$n,T$C,T$_){var T$E=T$_.elements,T$y=T$n.elements;T$E[0]=T$y[0]*T$C,T$E[1]=T$y[1]*T$C;},T$j(T$n,["ZERO",function(){return this.ZERO=new T$n(0,0);},"ONE",function(){return this.ONE=new T$n(1,1);}]),T$n;}(),T$cC=function(){function T$J(T$n,T$C,T$_){this.elements=new Float32Array(3),void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0);var T$E=this.elements;T$E[0]=T$n,T$E[1]=T$C,T$E[2]=T$_;}T$x(T$J,"laya.d3.math.Vector3");var T$n=T$J.prototype;return T$k.imps(T$n,{"laya.d3.core.IClone":!0}),T$n.fromArray=function(T$n,T$C){void 0===T$C&&(T$C=0),this.elements[0]=T$n[T$C+0],this.elements[1]=T$n[T$C+1],this.elements[2]=T$n[T$C+2];},T$n.cloneTo=function(T$n){var T$C=T$n.elements,T$_=this.elements;T$C[0]=T$_[0],T$C[1]=T$_[1],T$C[2]=T$_[2];},T$n.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$n.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0;},T$n.reset=function(T$n,T$C,T$_){this.elements[0]=T$n,this.elements[1]=T$C,this.elements[2]=T$_;},T$b(0,T$n,"x",function(){return this.elements[0];},function(T$n){this.elements[0]=T$n;}),T$b(0,T$n,"y",function(){return this.elements[1];},function(T$n){this.elements[1]=T$n;}),T$b(0,T$n,"z",function(){return this.elements[2];},function(T$n){this.elements[2]=T$n;}),T$J.distanceSquared=function(T$n,T$C){var T$_=T$n.elements,T$E=T$C.elements,T$y=T$_[0]-T$E[0],T$p=T$_[1]-T$E[1],T$c=T$_[2]-T$E[2];return T$y*T$y+T$p*T$p+T$c*T$c;},T$J.distance=function(T$n,T$C){var T$_=T$n.elements,T$E=T$C.elements,T$y=T$_[0]-T$E[0],T$p=T$_[1]-T$E[1],T$c=T$_[2]-T$E[2];return Math.sqrt(T$y*T$y+T$p*T$p+T$c*T$c);},T$J.min=function(T$n,T$C,T$_){var T$E=T$_.elements,T$y=T$n.elements,T$p=T$C.elements;T$E[0]=Math.min(T$y[0],T$p[0]),T$E[1]=Math.min(T$y[1],T$p[1]),T$E[2]=Math.min(T$y[2],T$p[2]);},T$J.max=function(T$n,T$C,T$_){var T$E=T$_.elements,T$y=T$n.elements,T$p=T$C.elements;T$E[0]=Math.max(T$y[0],T$p[0]),T$E[1]=Math.max(T$y[1],T$p[1]),T$E[2]=Math.max(T$y[2],T$p[2]);},T$J.transformQuat=function(T$n,T$C,T$_){var T$E=T$_.elements,T$y=T$n.elements,T$p=T$C.elements,T$c=T$y[0],T$l=T$y[1],T$W=T$y[2],T$q=T$p[0],T$J=T$p[1],T$j=T$p[2],T$P=T$p[3],T$x=T$P*T$c+T$J*T$W-T$j*T$l,T$b=T$P*T$l+T$j*T$c-T$q*T$W,T$r=T$P*T$W+T$q*T$l-T$J*T$c,T$m=-T$q*T$c-T$J*T$l-T$j*T$W;T$E[0]=T$x*T$P+T$m*-T$q+T$b*-T$j-T$r*-T$J,T$E[1]=T$b*T$P+T$m*-T$J+T$r*-T$q-T$x*-T$j,T$E[2]=T$r*T$P+T$m*-T$j+T$x*-T$J-T$b*-T$q;},T$J.scalarLength=function(T$n){var T$C=T$n.elements,T$_=T$C[0],T$E=T$C[1],T$y=T$C[2];return Math.sqrt(T$_*T$_+T$E*T$E+T$y*T$y);},T$J.scalarLengthSquared=function(T$n){var T$C=T$n.elements,T$_=T$C[0],T$E=T$C[1],T$y=T$C[2];return T$_*T$_+T$E*T$E+T$y*T$y;},T$J.normalize=function(T$n,T$C){var T$_=T$n.elements,T$E=T$C.elements,T$y=T$_[0],T$p=T$_[1],T$c=T$_[2],T$l=T$y*T$y+T$p*T$p+T$c*T$c;0<T$l&&(T$l=1/Math.sqrt(T$l),T$E[0]=T$_[0]*T$l,T$E[1]=T$_[1]*T$l,T$E[2]=T$_[2]*T$l);},T$J.multiply=function(T$n,T$C,T$_){var T$E=T$_.elements,T$y=T$n.elements,T$p=T$C.elements;T$E[0]=T$y[0]*T$p[0],T$E[1]=T$y[1]*T$p[1],T$E[2]=T$y[2]*T$p[2];},T$J.scale=function(T$n,T$C,T$_){var T$E=T$_.elements,T$y=T$n.elements;T$E[0]=T$y[0]*T$C,T$E[1]=T$y[1]*T$C,T$E[2]=T$y[2]*T$C;},T$J.lerp=function(T$n,T$C,T$_,T$E){var T$y=T$E.elements,T$p=T$n.elements,T$c=T$C.elements,T$l=T$p[0],T$W=T$p[1],T$q=T$p[2];T$y[0]=T$l+T$_*(T$c[0]-T$l),T$y[1]=T$W+T$_*(T$c[1]-T$W),T$y[2]=T$q+T$_*(T$c[2]-T$q);},T$J.transformV3ToV3=function(T$n,T$C,T$_){var T$E=T$J._tempVector4;T$J.transformV3ToV4(T$n,T$C,T$E);var T$y=T$E.elements,T$p=T$_.elements;T$p[0]=T$y[0],T$p[1]=T$y[1],T$p[2]=T$y[2];},T$J.transformV3ToV4=function(T$n,T$C,T$_){var T$E=T$n.elements,T$y=T$E[0],T$p=T$E[1],T$c=T$E[2],T$l=T$C.elements,T$W=T$_.elements;T$W[0]=T$y*T$l[0]+T$p*T$l[4]+T$c*T$l[8]+T$l[12],T$W[1]=T$y*T$l[1]+T$p*T$l[5]+T$c*T$l[9]+T$l[13],T$W[2]=T$y*T$l[2]+T$p*T$l[6]+T$c*T$l[10]+T$l[14],T$W[3]=T$y*T$l[3]+T$p*T$l[7]+T$c*T$l[11]+T$l[15];},T$J.TransformNormal=function(T$n,T$C,T$_){var T$E=T$n.elements,T$y=T$E[0],T$p=T$E[1],T$c=T$E[2],T$l=T$C.elements,T$W=T$_.elements;T$W[0]=T$y*T$l[0]+T$p*T$l[4]+T$c*T$l[8],T$W[1]=T$y*T$l[1]+T$p*T$l[5]+T$c*T$l[9],T$W[2]=T$y*T$l[2]+T$p*T$l[6]+T$c*T$l[10];},T$J.transformCoordinate=function(T$n,T$C,T$_){var T$E=T$J._tempVector4.elements,T$y=T$n.elements,T$p=T$y[0],T$c=T$y[1],T$l=T$y[2],T$W=T$C.elements;T$E[0]=T$p*T$W[0]+T$c*T$W[4]+T$l*T$W[8]+T$W[12],T$E[1]=T$p*T$W[1]+T$c*T$W[5]+T$l*T$W[9]+T$W[13],T$E[2]=T$p*T$W[2]+T$c*T$W[6]+T$l*T$W[10]+T$W[14],T$E[3]=1/(T$p*T$W[3]+T$c*T$W[7]+T$l*T$W[11]+T$W[15]);var T$q=T$_.elements;T$q[0]=T$E[0]*T$E[3],T$q[1]=T$E[1]*T$E[3],T$q[2]=T$E[2]*T$E[3];},T$J.Clamp=function(T$n,T$C,T$_,T$E){var T$y=T$n.elements,T$p=T$y[0],T$c=T$y[1],T$l=T$y[2],T$W=T$C.elements,T$q=T$W[0],T$J=T$W[1],T$j=T$W[2],T$P=T$_.elements,T$x=T$P[0],T$b=T$P[1],T$r=T$P[2],T$m=T$E.elements;T$p=(T$p=T$x<T$p?T$x:T$p)<T$q?T$q:T$p,T$c=(T$c=T$b<T$c?T$b:T$c)<T$J?T$J:T$c,T$l=(T$l=T$r<T$l?T$r:T$l)<T$j?T$j:T$l,T$m[0]=T$p,T$m[1]=T$c,T$m[2]=T$l;},T$J.add=function(T$n,T$C,T$_){var T$E=T$_.elements,T$y=T$n.elements,T$p=T$C.elements;T$E[0]=T$y[0]+T$p[0],T$E[1]=T$y[1]+T$p[1],T$E[2]=T$y[2]+T$p[2];},T$J.subtract=function(T$n,T$C,T$_){var T$E=T$_.elements,T$y=T$n.elements,T$p=T$C.elements;T$E[0]=T$y[0]-T$p[0],T$E[1]=T$y[1]-T$p[1],T$E[2]=T$y[2]-T$p[2];},T$J.cross=function(T$n,T$C,T$_){var T$E=T$n.elements,T$y=T$C.elements,T$p=T$_.elements,T$c=T$E[0],T$l=T$E[1],T$W=T$E[2],T$q=T$y[0],T$J=T$y[1],T$j=T$y[2];T$p[0]=T$l*T$j-T$W*T$J,T$p[1]=T$W*T$q-T$c*T$j,T$p[2]=T$c*T$J-T$l*T$q;},T$J.dot=function(T$n,T$C){var T$_=T$n.elements,T$E=T$C.elements;return T$_[0]*T$E[0]+T$_[1]*T$E[1]+T$_[2]*T$E[2];},T$J.equals=function(T$n,T$C){var T$_=T$n.elements,T$E=T$C.elements;return T$Kn.nearEqual(Math.abs(T$_[0]),Math.abs(T$E[0]))&&T$Kn.nearEqual(Math.abs(T$_[1]),Math.abs(T$E[1]))&&T$Kn.nearEqual(Math.abs(T$_[2]),Math.abs(T$E[2]));},T$J.ZERO=new T$J(0,0,0),T$J.ONE=new T$J(1,1,1),T$J.NegativeUnitX=new T$J(-1,0,0),T$J.UnitX=new T$J(1,0,0),T$J.UnitY=new T$J(0,1,0),T$J.UnitZ=new T$J(0,0,1),T$J.ForwardRH=new T$J(0,0,-1),T$J.ForwardLH=new T$J(0,0,1),T$J.Up=new T$J(0,1,0),T$J.NAN=new T$J(NaN,NaN,NaN),T$j(T$J,["_tempVector4",function(){return this._tempVector4=new T$lC();}]),T$J;}(),T$lC=function(){function T$n(T$n,T$C,T$_,T$E){this.elements=new Float32Array(4),void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0),void 0===T$E&&(T$E=0);var T$y=this.elements;T$y[0]=T$n,T$y[1]=T$C,T$y[2]=T$_,T$y[3]=T$E;}T$x(T$n,"laya.d3.math.Vector4");var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.core.IClone":!0}),T$C.fromArray=function(T$n,T$C){void 0===T$C&&(T$C=0),this.elements[0]=T$n[T$C+0],this.elements[1]=T$n[T$C+1],this.elements[2]=T$n[T$C+2],this.elements[3]=T$n[T$C+3];},T$C.cloneTo=function(T$n){var T$C=T$n.elements,T$_=this.elements;T$C[0]=T$_[0],T$C[1]=T$_[1],T$C[2]=T$_[2],T$C[3]=T$_[3];},T$C.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$C.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);},T$C.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w;},T$b(0,T$C,"x",function(){return this.elements[0];},function(T$n){this.elements[0]=T$n;}),T$b(0,T$C,"y",function(){return this.elements[1];},function(T$n){this.elements[1]=T$n;}),T$b(0,T$C,"z",function(){return this.elements[2];},function(T$n){this.elements[2]=T$n;}),T$b(0,T$C,"w",function(){return this.elements[3];},function(T$n){this.elements[3]=T$n;}),T$n.lerp=function(T$n,T$C,T$_,T$E){var T$y=T$E.elements,T$p=T$n.elements,T$c=T$C.elements,T$l=T$p[0],T$W=T$p[1],T$q=T$p[2],T$J=T$p[3];T$y[0]=T$l+T$_*(T$c[0]-T$l),T$y[1]=T$W+T$_*(T$c[1]-T$W),T$y[2]=T$q+T$_*(T$c[2]-T$q),T$y[3]=T$J+T$_*(T$c[3]-T$J);},T$n.transformByM4x4=function(T$n,T$C,T$_){var T$E=T$n.elements,T$y=T$E[0],T$p=T$E[1],T$c=T$E[2],T$l=T$E[3],T$W=T$C.elements,T$q=T$_.elements;T$q[0]=T$y*T$W[0]+T$p*T$W[4]+T$c*T$W[8]+T$l*T$W[12],T$q[1]=T$y*T$W[1]+T$p*T$W[5]+T$c*T$W[9]+T$l*T$W[13],T$q[2]=T$y*T$W[2]+T$p*T$W[6]+T$c*T$W[10]+T$l*T$W[14],T$q[3]=T$y*T$W[3]+T$p*T$W[7]+T$c*T$W[11]+T$l*T$W[15];},T$n.equals=function(T$n,T$C){var T$_=T$n.elements,T$E=T$C.elements;return T$Kn.nearEqual(Math.abs(T$_[0]),Math.abs(T$E[0]))&&T$Kn.nearEqual(Math.abs(T$_[1]),Math.abs(T$E[1]))&&T$Kn.nearEqual(Math.abs(T$_[2]),Math.abs(T$E[2]))&&T$Kn.nearEqual(Math.abs(T$_[3]),Math.abs(T$E[3]));},T$n.normalize=function(T$n,T$C){var T$_=T$n.elements,T$E=T$C.elements,T$y=T$n.length();0<T$y&&(T$E[0]=T$_[0]*T$y,T$E[1]=T$_[1]*T$y,T$E[2]=T$_[2]*T$y,T$E[3]=T$_[3]*T$y);},T$n.add=function(T$n,T$C,T$_){var T$E=T$_.elements,T$y=T$n.elements,T$p=T$C.elements;T$E[0]=T$y[0]+T$p[0],T$E[1]=T$y[1]+T$p[1],T$E[2]=T$y[2]+T$p[2],T$E[3]=T$y[3]+T$p[3];},T$n.subtract=function(T$n,T$C,T$_){var T$E=T$_.elements,T$y=T$n.elements,T$p=T$C.elements;T$E[0]=T$y[0]-T$p[0],T$E[1]=T$y[1]-T$p[1],T$E[2]=T$y[2]-T$p[2],T$E[3]=T$y[3]-T$p[3];},T$n.multiply=function(T$n,T$C,T$_){var T$E=T$_.elements,T$y=T$n.elements,T$p=T$C.elements;T$E[0]=T$y[0]*T$p[0],T$E[1]=T$y[1]*T$p[1],T$E[2]=T$y[2]*T$p[2],T$E[3]=T$y[3]*T$p[3];},T$n.scale=function(T$n,T$C,T$_){var T$E=T$_.elements,T$y=T$n.elements;T$E[0]=T$y[0]*T$C,T$E[1]=T$y[1]*T$C,T$E[2]=T$y[2]*T$C,T$E[3]=T$y[3]*T$C;},T$n.Clamp=function(T$n,T$C,T$_,T$E){var T$y=T$n.elements,T$p=T$y[0],T$c=T$y[1],T$l=T$y[2],T$W=T$y[3],T$q=T$C.elements,T$J=T$q[0],T$j=T$q[1],T$P=T$q[2],T$x=T$q[3],T$b=T$_.elements,T$r=T$b[0],T$m=T$b[1],T$d=T$b[2],T$a=T$b[3],T$O=T$E.elements;T$p=(T$p=T$r<T$p?T$r:T$p)<T$J?T$J:T$p,T$c=(T$c=T$m<T$c?T$m:T$c)<T$j?T$j:T$c,T$l=(T$l=T$d<T$l?T$d:T$l)<T$P?T$P:T$l,T$W=(T$W=T$a<T$W?T$a:T$W)<T$x?T$x:T$W,T$O[0]=T$p,T$O[1]=T$c,T$O[2]=T$l,T$O[3]=T$W;},T$n.distanceSquared=function(T$n,T$C){var T$_=T$n.elements,T$E=T$C.elements,T$y=T$_[0]-T$E[0],T$p=T$_[1]-T$E[1],T$c=T$_[2]-T$E[2],T$l=T$_[3]-T$E[3];return T$y*T$y+T$p*T$p+T$c*T$c+T$l*T$l;},T$n.distance=function(T$n,T$C){var T$_=T$n.elements,T$E=T$C.elements,T$y=T$_[0]-T$E[0],T$p=T$_[1]-T$E[1],T$c=T$_[2]-T$E[2],T$l=T$_[3]-T$E[3];return Math.sqrt(T$y*T$y+T$p*T$p+T$c*T$c+T$l*T$l);},T$n.dot=function(T$n,T$C){var T$_=T$n.elements,T$E=T$C.elements;return T$_[0]*T$E[0]+T$_[1]*T$E[1]+T$_[2]*T$E[2]+T$_[3]*T$E[3];},T$n.min=function(T$n,T$C,T$_){var T$E=T$_.elements,T$y=T$n.elements,T$p=T$C.elements;T$E[0]=Math.min(T$y[0],T$p[0]),T$E[1]=Math.min(T$y[1],T$p[1]),T$E[2]=Math.min(T$y[2],T$p[2]),T$E[3]=Math.min(T$y[3],T$p[3]);},T$n.max=function(T$n,T$C,T$_){var T$E=T$_.elements,T$y=T$n.elements,T$p=T$C.elements;T$E[0]=Math.max(T$y[0],T$p[0]),T$E[1]=Math.max(T$y[1],T$p[1]),T$E[2]=Math.max(T$y[2],T$p[2]),T$E[3]=Math.max(T$y[3],T$p[3]);},T$j(T$n,["ZERO",function(){return this.ZERO=new T$n();},"ONE",function(){return this.ONE=new T$n(1,1,1,1);},"UnitX",function(){return this.UnitX=new T$n(1,0,0,0);},"UnitY",function(){return this.UnitY=new T$n(0,1,0,0);},"UnitZ",function(){return this.UnitZ=new T$n(0,0,1,0);},"UnitW",function(){return this.UnitW=new T$n(0,0,0,1);}]),T$n;}(),T$WC=function(){function T$p(T$n,T$C,T$_,T$E){this.minDepth=0,this.maxDepth=1,this.x=T$n,this.y=T$C,this.width=T$_,this.height=T$E;}T$x(T$p,"laya.d3.math.Viewport");var T$n=T$p.prototype;return T$n.project=function(T$n,T$C,T$_){T$cC.transformV3ToV3(T$n,T$C,T$_);var T$E=T$n.elements,T$y=T$C.elements,T$p=T$_.elements,T$c=T$E[0]*T$y[3]+T$E[1]*T$y[7]+T$E[2]*T$y[11]+T$y[15];1!==T$c&&(T$p[0]=T$p[0]/T$c,T$p[1]=T$p[1]/T$c,T$p[2]=T$p[2]/T$c),T$p[0]=.5*(T$p[0]+1)*this.width+this.x,T$p[1]=.5*(1-T$p[1])*this.height+this.y,T$p[2]=T$p[2]*(this.maxDepth-this.minDepth)+this.minDepth;},T$n.unprojectFromMat=function(T$n,T$C,T$_){var T$E=T$n.elements,T$y=T$C.elements,T$p=T$_.elements;T$p[0]=(T$E[0]-this.x)/this.width*2-1,T$p[1]=-((T$E[1]-this.y)/this.height*2-1);var T$c=(this.maxDepth-this.minDepth)/2;T$p[2]=(T$E[2]-this.minDepth-T$c)/T$c;var T$l=T$p[0]*T$y[3]+T$p[1]*T$y[7]+T$p[2]*T$y[11]+T$y[15];T$cC.transformV3ToV3(T$_,T$C,T$_),1!==T$l&&(T$p[0]=T$p[0]/T$l,T$p[1]=T$p[1]/T$l,T$p[2]=T$p[2]/T$l);},T$n.unprojectFromWVP=function(T$n,T$C,T$_,T$E,T$y){T$nC.multiply(T$C,T$_,T$p._tempMatrix4x4),T$E&&T$nC.multiply(T$p._tempMatrix4x4,T$E,T$p._tempMatrix4x4),T$p._tempMatrix4x4.invert(T$p._tempMatrix4x4),this.unprojectFromMat(T$n,T$p._tempMatrix4x4,T$y);},T$j(T$p,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new T$nC();}]),T$p;}(),T$qC=function(){function T$M(T$n){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=T$n,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[];}T$x(T$M,"laya.d3.resource.models.SubMesh");var T$n=T$M.prototype;return T$k.imps(T$n,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),T$n._getVertexBuffer=function(T$n){return void 0===T$n&&(T$n=0),0===T$n?this._vertexBuffer:null;},T$n._getIndexBuffer=function(){return this._indexBuffer;},T$n._getStaticBatchBakedVertexs=function(T$n,T$C){var T$_,T$E,T$y=this._vertexBuffer,T$p=T$y.vertexDeclaration,T$c=T$p.getVertexElementByUsage(0).offset/4,T$l=T$p.getVertexElementByUsage(3).offset/4,T$W=T$C.meshRender.lightmapScaleOffset,T$q=0,T$J=0,T$j=0,T$P=0,T$x=0,T$b=0;if(T$W){if(T$E=T$p.getVertexElementByUsage(15))T$j=T$p.vertexStride/4,T$_=0<this._vertexCount?T$y.getData().slice(this._vertexStart*T$j,(this._vertexStart+this._vertexCount)*T$j):T$y.getData().slice(),T$P=T$E.offset/4;else{T$j=(T$b=T$p.vertexStride/4)+2,T$_=this._vertexCount?new Float32Array(this._vertexCount*(T$y.vertexDeclaration.vertexStride/4+2)):new Float32Array(T$y.vertexCount*(T$y.vertexDeclaration.vertexStride/4+2)),T$P=(T$x=T$p.getVertexElementByUsage(2).offset/4)+2;var T$r=T$y.getData();for(T$q=0,T$J=T$r.length/T$b;T$q<T$J;T$q++){var T$m=0;T$m=0<this._vertexCount?(this._vertexStart+T$q)*T$b:T$q*T$b;var T$d=T$q*T$j,T$a=0;for(T$a=0;T$a<T$P;T$a++)T$_[T$d+T$a]=T$r[T$m+T$a];for(T$a=T$P;T$a<T$b;T$a++)T$_[T$d+T$a+2]=T$r[T$m+T$a];}}}else T$j=T$p.vertexStride/4,T$_=this._vertexCount?T$y.getData().slice(this._vertexStart*T$j,(this._vertexStart+this._vertexCount)*T$j):T$y.getData().slice();if(T$n){var T$O=T$n.worldMatrix,T$A=T$M._tempMatrix4x40;T$O.invert(T$A);var T$k=T$M._tempMatrix4x41,T$t=T$C.transform.worldMatrix;T$nC.multiply(T$A,T$t,T$k);}else T$k=T$C.transform.worldMatrix;var T$T=T$M._tempQuaternion0;for(T$k.decomposeTransRotScale(T$M._tempVector30,T$T,T$M._tempVector31),T$q=0,T$J=T$_.length/T$j;T$q<T$J;T$q++){var T$Y=T$q*T$j+T$c,T$s=T$q*T$j+T$l;if(T$mC.transformVector3ArrayToVector3ArrayCoordinate(T$_,T$Y,T$k,T$_,T$Y),T$mC.transformVector3ArrayByQuat(T$_,T$s,T$T,T$_,T$s),T$W){var T$N=T$q*T$j+T$P;if(T$E)T$mC.transformLightingMapTexcoordByUV1Array(T$_,T$N,T$W,T$_,T$N);else{var T$S=T$q*T$b+T$x;T$mC.transformLightingMapTexcoordByUV0Array(T$r,T$S,T$W,T$_,T$N);}}}return T$_;},T$n._getVertexBuffers=function(){return null;},T$n._beforeRender=function(T$n){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0;},T$n._render=function(T$n){var T$C,T$_=0,T$E=T$n.renderElement;if(1<this._indexCount){var T$y=this._boneIndicesList.length;if(1<T$y){for(var T$p=0;T$p<T$y;T$p++)(T$C=T$E._skinAnimationDatas||this._skinAnimationDatas)&&(T$E._shaderValue.setValue(0,T$C[T$p]),T$n._shader.uploadRenderElementUniforms(T$E._shaderValue.data)),T$w.mainContext.drawElements(4,this._subIndexBufferCount[T$p],5123,2*this._subIndexBufferStart[T$p]);T$Y.drawCall+=T$y;}else(T$C=T$E._skinAnimationDatas||this._skinAnimationDatas)&&(T$E._shaderValue.setValue(0,T$C[0]),T$n._shader.uploadRenderElementUniforms(T$E._shaderValue.data)),T$w.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),T$Y.drawCall++;T$_=this._indexCount;}else T$_=this._indexBuffer.indexCount,(T$C=T$E._skinAnimationDatas||this._skinAnimationDatas)&&(T$E._shaderValue.setValue(0,T$C[0]),T$n._shader.uploadRenderElementUniforms(T$E._shaderValue.data)),T$w.mainContext.drawElements(4,T$_,5123,0),T$Y.drawCall++;T$Y.trianglesFaces+=T$_/3;},T$n.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData();},T$n.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null;},T$b(0,T$n,"_vertexBufferCount",function(){return 1;}),T$b(0,T$n,"triangleCount",function(){return this._indexBuffer.indexCount/3;}),T$j(T$M,["_tempVector30",function(){return this._tempVector30=new T$cC();},"_tempVector31",function(){return this._tempVector31=new T$cC();},"_tempQuaternion0",function(){return this._tempQuaternion0=new T$_C();},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new T$nC();},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new T$nC();}]),T$M;}(),T$JC=function(){function T$n(T$n){this.defineCounter=0,this.defines=null,T$n?(this.defineCounter=T$n.defineCounter,this.defines=T$n.defines.slice()):(this.defineCounter=0,this.defines=[]);}return T$x(T$n,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),T$n.prototype.registerDefine=function(T$n){var T$C=Math.pow(2,this.defineCounter++);return this.defines[T$C]=T$n,T$C;},T$n;}(),T$jC=function(){function T$n(){}return T$x(T$n,"laya.d3.shader.ShaderInit3D"),T$n.__init__=function(){var T$n,T$C;T$YC._globalRegDefine("HIGHPRECISION",T$YC.SHADERDEFINE_HIGHPRECISION),T$YC._globalRegDefine("FOG",T$YC.SHADERDEFINE_FOG),T$YC._globalRegDefine("DIRECTIONLIGHT",T$YC.SHADERDEFINE_DIRECTIONLIGHT),T$YC._globalRegDefine("POINTLIGHT",T$YC.SHADERDEFINE_POINTLIGHT),T$YC._globalRegDefine("SPOTLIGHT",T$YC.SHADERDEFINE_SPOTLIGHT),T$YC._globalRegDefine("UV",T$YC.SHADERDEFINE_UV0),T$YC._globalRegDefine("COLOR",T$YC.SHADERDEFINE_COLOR),T$YC._globalRegDefine("UV1",T$YC.SHADERDEFINE_UV1),T$YC._globalRegDefine("CASTSHADOW",T$xC.SHADERDEFINE_CAST_SHADOW),T$YC._globalRegDefine("SHADOWMAP_PSSM1",T$xC.SHADERDEFINE_SHADOW_PSSM1),T$YC._globalRegDefine("SHADOWMAP_PSSM2",T$xC.SHADERDEFINE_SHADOW_PSSM2),T$YC._globalRegDefine("SHADOWMAP_PSSM3",T$xC.SHADERDEFINE_SHADOW_PSSM3),T$YC._globalRegDefine("SHADOWMAP_PCF_NO",T$xC.SHADERDEFINE_SHADOW_PCF_NO),T$YC._globalRegDefine("SHADOWMAP_PCF1",T$xC.SHADERDEFINE_SHADOW_PCF1),T$YC._globalRegDefine("SHADOWMAP_PCF2",T$xC.SHADERDEFINE_SHADOW_PCF2),T$YC._globalRegDefine("SHADOWMAP_PCF3",T$xC.SHADERDEFINE_SHADOW_PCF3),T$YC._globalRegDefine("DEPTHFOG",T$YC.SAHDERDEFINE_DEPTHFOG),T$$C.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),T$$C.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),T$n={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},T$C={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var T$_=T$$C.nameKey.add("SIMPLE");shaderCompile=T$YC.add(T$_,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',T$n,T$C),T$iC.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),T$iC.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),T$iC.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),T$iC.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),T$iC.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),T$iC.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),T$iC.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),T$iC.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),T$iC.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG");},T$n;}(),T$PC=function(){function T$n(){this._data=null,this._data=[];}T$x(T$n,"laya.d3.shader.ValusArray");var T$C=T$n.prototype;return T$C.setValue=function(T$n,T$C){this._data[T$n]=T$C;},T$b(0,T$C,"data",function(){return this._data;}),T$n;}(),T$xC=function(){function T$n(){}return T$n.SHADERDEFINE_RECEIVE_SHADOW=1,T$n.SHADERDEFINE_CAST_SHADOW=512,T$n.SHADERDEFINE_SHADOW_PSSM1=1024,T$n.SHADERDEFINE_SHADOW_PSSM2=2048,T$n.SHADERDEFINE_SHADOW_PSSM3=4096,T$n.SHADERDEFINE_SHADOW_PCF_NO=8192,T$n.SHADERDEFINE_SHADOW_PCF1=16384,T$n.SHADERDEFINE_SHADOW_PCF2=32768,T$n.SHADERDEFINE_SHADOW_PCF3=65536,T$n.MAX_PSSM_COUNT=3,T$n;}(),T$bC=function(){function T$h(){}return T$x(T$h,"laya.d3.utils.Picker"),T$h.calculateCursorRay=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c=T$n.elements[0],T$l=T$n.elements[1],T$W=T$h._tempVector30,T$q=T$W.elements;T$q[0]=T$c,T$q[1]=T$l,T$q[2]=T$C.minDepth;var T$J=T$h._tempVector31,T$j=T$J.elements;T$j[0]=T$c,T$j[1]=T$l,T$j[2]=T$C.maxDepth;var T$P=T$p.origin,T$x=T$h._tempVector32;T$C.unprojectFromWVP(T$W,T$_,T$E,T$y,T$P),T$C.unprojectFromWVP(T$J,T$_,T$E,T$y,T$x);var T$b=T$p.direction.elements;T$b[0]=T$x.x-T$P.x,T$b[1]=T$x.y-T$P.y,T$b[2]=T$x.z-T$P.z,T$cC.normalize(T$p.direction,T$p.direction);},T$h.rayIntersectsPositionsAndIndices=function(T$n,T$C,T$_,T$E,T$y){for(var T$p=T$_.vertexStride/4,T$c=T$_.getVertexElementByUsage(0).offset/4,T$l=Number.MAX_VALUE,T$W=-1,T$q=-1,T$J=-1,T$j=0;T$j<T$E.length;T$j+=3){var T$P=T$h._tempVector35,T$x=T$P.elements,T$b=T$E[T$j]*T$p,T$r=T$b+T$c;T$x[0]=T$C[T$r],T$x[1]=T$C[1+T$r],T$x[2]=T$C[2+T$r];var T$m=T$h._tempVector36,T$d=T$m.elements,T$a=T$E[T$j+1]*T$p,T$O=T$a+T$c;T$d[0]=T$C[T$O],T$d[1]=T$C[1+T$O],T$d[2]=T$C[2+T$O];var T$A=T$h._tempVector37,T$k=T$A.elements,T$t=T$E[T$j+2]*T$p,T$T=T$t+T$c;T$k[0]=T$C[T$T],T$k[1]=T$C[1+T$T],T$k[2]=T$C[2+T$T];var T$Y=laya.d3.utils.Picker.rayIntersectsTriangle(T$n,T$P,T$m,T$A);!isNaN(T$Y)&&T$Y<T$l&&(T$l=T$Y,T$W=T$b,T$q=T$a,T$J=T$t);}if(T$l===Number.MAX_VALUE)return T$y.position.toDefault(),T$y.distance=Number.MAX_VALUE,T$y.trianglePositions[0].toDefault(),T$y.trianglePositions[1].toDefault(),T$y.trianglePositions[2].toDefault(),T$y.triangleNormals[0].toDefault(),T$y.triangleNormals[1].toDefault(),T$y.triangleNormals[2].toDefault(),!1;T$y.distance=T$l,T$cC.scale(T$n.direction,T$l,T$y.position),T$cC.add(T$n.origin,T$y.position,T$y.position);var T$s=T$y.trianglePositions,T$N=T$s[0],T$S=T$s[1],T$M=T$s[2],T$w=T$N.elements,T$B=T$S.elements,T$V=T$M.elements,T$g=T$W+T$c;T$w[0]=T$C[T$g],T$w[1]=T$C[T$g+1],T$w[2]=T$C[T$g+2];var T$H=T$q+T$c;T$B[0]=T$C[T$H],T$B[1]=T$C[T$H+1],T$B[2]=T$C[T$H+2];var T$X=T$J+T$c;T$V[0]=T$C[T$X],T$V[1]=T$C[T$X+1],T$V[2]=T$C[T$X+2];var T$$=T$_.getVertexElementByUsage(3);if(T$$){var T$i=T$$.offset/4,T$f=T$y.triangleNormals,T$e=T$f[0],T$G=T$f[1],T$F=T$f[2],T$u=T$e.elements,T$o=T$G.elements,T$Q=T$F.elements,T$I=T$W+T$i;T$u[0]=T$C[T$I],T$u[1]=T$C[T$I+1],T$u[2]=T$C[T$I+2];var T$Z=T$q+T$i;T$o[0]=T$C[T$Z],T$o[1]=T$C[T$Z+1],T$o[2]=T$C[T$Z+2];var T$L=T$J+T$i;T$Q[0]=T$C[T$L],T$Q[1]=T$C[T$L+1],T$Q[2]=T$C[T$L+2];}return!0;},T$h.rayIntersectsTriangle=function(T$n,T$C,T$_,T$E){var T$y=T$h._tempVector30,T$p=T$h._tempVector31;T$cC.subtract(T$_,T$C,T$y),T$cC.subtract(T$E,T$C,T$p);var T$c,T$l=T$h._tempVector32;if(T$cC.cross(T$n.direction,T$p,T$l),(T$c=T$cC.dot(T$y,T$l))>-Number.MIN_VALUE&&T$c<Number.MIN_VALUE)return Number.NaN;var T$W,T$q=1/T$c,T$J=T$h._tempVector33;if(T$cC.subtract(T$n.origin,T$C,T$J),T$W=T$cC.dot(T$J,T$l),(T$W*=T$q)<0||1<T$W)return Number.NaN;var T$j,T$P,T$x=T$h._tempVector34;return T$cC.cross(T$J,T$y,T$x),T$j=T$cC.dot(T$n.direction,T$x),(T$j*=T$q)<0||1<T$W+T$j?Number.NaN:(T$P=T$cC.dot(T$p,T$x),(T$P*=T$q)<0?Number.NaN:T$P);},T$j(T$h,["_tempVector30",function(){return this._tempVector30=new T$cC();},"_tempVector31",function(){return this._tempVector31=new T$cC();},"_tempVector32",function(){return this._tempVector32=new T$cC();},"_tempVector33",function(){return this._tempVector33=new T$cC();},"_tempVector34",function(){return this._tempVector34=new T$cC();},"_tempVector35",function(){return this._tempVector35=new T$cC();},"_tempVector36",function(){return this._tempVector36=new T$cC();},"_tempVector37",function(){return this._tempVector37=new T$cC();}]),T$h;}(),T$rC=(function(){function T$n(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new T$cC(),new T$cC(),new T$cC()],this.trianglePositions.length=3,this.triangleNormals=[new T$cC(),new T$cC(),new T$cC()],this.triangleNormals.length=3,this.position=new T$cC();}T$x(T$n,"laya.d3.utils.RaycastHit"),T$n.prototype.cloneTo=function(T$n){T$n.distance=this.distance,this.trianglePositions[0].cloneTo(T$n.trianglePositions[0]),this.trianglePositions[1].cloneTo(T$n.trianglePositions[1]),this.trianglePositions[2].cloneTo(T$n.trianglePositions[2]),this.triangleNormals[0].cloneTo(T$n.triangleNormals[0]),this.triangleNormals[1].cloneTo(T$n.triangleNormals[1]),this.triangleNormals[2].cloneTo(T$n.triangleNormals[2]),this.position.cloneTo(T$n.position),T$n.sprite3D=this.sprite3D;};}(),function(){function T$n(T$n,T$C){this._width=0,this._height=0,this._width=T$n,this._height=T$C;}T$x(T$n,"laya.d3.utils.Size");var T$C=T$n.prototype;return T$b(0,T$C,"width",function(){return-1===this._width?T$v.clientWidth:this._width;}),T$b(0,T$C,"height",function(){return-1===this._height?T$v.clientHeight:this._height;}),T$b(1,T$n,"fullScreen",function(){return new T$n(-1,-1);}),T$n;}()),T$mC=function(){function T$g(){}return T$x(T$g,"laya.d3.utils.Utils3D"),T$g._rotationTransformScaleSkinAnimation=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q,T$J,T$j){var T$P,T$x,T$b,T$r,T$m,T$d=T$g._tempArray16_0,T$a=T$g._tempArray16_1,T$O=T$g._tempArray16_2,T$A=T$E+T$E,T$k=T$y+T$y,T$t=T$p+T$p,T$T=T$E*T$A,T$Y=T$y*T$A,T$s=T$y*T$k,T$N=T$p*T$A,T$S=T$p*T$k,T$M=T$p*T$t,T$w=T$c*T$A,T$B=T$c*T$k,T$V=T$c*T$t;for(T$d[15]=1,T$d[0]=1-T$s-T$M,T$d[1]=T$Y+T$V,T$d[2]=T$N-T$B,T$d[4]=T$Y-T$V,T$d[5]=1-T$T-T$M,T$d[6]=T$S+T$w,T$d[8]=T$N+T$B,T$d[9]=T$S-T$w,T$d[10]=1-T$T-T$s,T$a[15]=1,T$a[0]=T$l,T$a[5]=T$W,T$a[10]=T$q,T$P=0;T$P<4;T$P++)T$x=T$d[T$P],T$b=T$d[T$P+4],T$r=T$d[T$P+8],T$m=T$d[T$P+12],T$O[T$P]=T$x,T$O[T$P+4]=T$b,T$O[T$P+8]=T$r,T$O[T$P+12]=T$x*T$n+T$b*T$C+T$r*T$_+T$m;for(T$P=0;T$P<4;T$P++)T$x=T$O[T$P],T$b=T$O[T$P+4],T$r=T$O[T$P+8],T$m=T$O[T$P+12],T$J[T$P+T$j]=T$x*T$a[0]+T$b*T$a[1]+T$r*T$a[2]+T$m*T$a[3],T$J[T$P+T$j+4]=T$x*T$a[4]+T$b*T$a[5]+T$r*T$a[6]+T$m*T$a[7],T$J[T$P+T$j+8]=T$x*T$a[8]+T$b*T$a[9]+T$r*T$a[10]+T$m*T$a[11],T$J[T$P+T$j+12]=T$x*T$a[12]+T$b*T$a[13]+T$r*T$a[14]+T$m*T$a[15];},T$g._createNodeByJson=function(T$n,T$C,T$_,T$E){if(!T$_)switch(T$C.type){case"Sprite3D":T$_=new T$XC();break;case"MeshSprite3D":T$_=new T$hC();break;case"SkinnedMeshSprite3D":T$_=new SkinnedMeshSprite3D();break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":T$_=new ShuriKenParticle3D();break;case"TrailSprite3D":T$_=new TrailSprite3D();break;case"Terrain":T$_=new Terrain();break;case"Camera":T$_=new T$LC();break;case"DirectionLight":T$_=new DirectionLight();break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.");}var T$y=T$C.props;if(T$y)for(var T$p in T$y)T$_[T$p]=T$y[T$p];var T$c=T$C.customProps;T$c&&(T$_ instanceof laya.d3.core.Sprite3D?(T$_._parseBaseCustomProps(T$c),T$_._parseCustomProps(T$n,T$E,T$c,T$C),T$_._parseCustomComponent(T$n,T$E,T$C.components)):T$_._parseCustomProps(T$n,T$E,T$c,T$C));var T$l=T$C.child;if(T$l)for(var T$W=0,T$q=T$l.length;T$W<T$q;T$W++){var T$J=T$g._createNodeByJson(T$n,T$l[T$W],null,T$E);T$_.addChild(T$J);}return T$_;},T$g._computeBoneAndAnimationDatasByBindPoseMatrxix=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c,T$l,T$W=0,T$q=0,T$J=T$n.length;for(T$c=0;T$c<T$J;T$W+=T$n[T$c].keyframeWidth,T$q+=16,T$c++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(T$C[T$W+0],T$C[T$W+1],T$C[T$W+2],T$C[T$W+3],T$C[T$W+4],T$C[T$W+5],T$C[T$W+6],T$C[T$W+7],T$C[T$W+8],T$C[T$W+9],T$E,T$q),0!=T$c&&(T$l=16*T$n[T$c].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(T$E,T$l,T$E,T$q,T$E,T$q));var T$j=T$_.length;for(T$c=0;T$c<T$j;T$c++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(T$E,16*T$p[T$c],T$_[T$c],T$y,16*T$c);},T$g._computeAnimationDatasByArrayAndMatrixFast=function(T$n,T$C,T$_,T$E){for(var T$y=0,T$p=T$n.length;T$y<T$p;T$y++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(T$C,16*T$E[T$y],T$n[T$y],T$_,16*T$y);},T$g._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(T$n,T$C,T$_,T$E,T$y){var T$p,T$c,T$l=0,T$W=0,T$q=T$n.length;for(T$p=0;T$p<T$q;T$l+=T$n[T$p].keyframeWidth,T$W+=16,T$p++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(T$C[T$l+7],T$C[T$l+8],T$C[T$l+9],T$C[T$l+3],T$C[T$l+4],T$C[T$l+5],T$C[T$l+6],T$C[T$l+0],T$C[T$l+1],T$C[T$l+2],T$E,T$W),0!=T$p&&(T$c=16*T$n[T$p].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(T$E,T$c,T$E,T$W,T$E,T$W));var T$J=T$_.length;for(T$p=0;T$p<T$J;T$p++){var T$j=16*T$p;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(T$E,T$j,T$_[T$p],T$y,T$j);}},T$g._computeAnimationDatasByArrayAndMatrixFastOld=function(T$n,T$C,T$_){for(var T$E=T$n.length,T$y=0;T$y<T$E;T$y++){var T$p=16*T$y;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(T$C,T$p,T$n[T$y],T$_,T$p);}},T$g._computeRootAnimationData=function(T$n,T$C,T$_){for(var T$E=0,T$y=0,T$p=0,T$c=T$n.length;T$E<T$c;T$y+=T$n[T$E].keyframeWidth,T$p+=16,T$E++)laya.d3.utils.Utils3D.createAffineTransformationArray(T$C[T$y+0],T$C[T$y+1],T$C[T$y+2],T$C[T$y+3],T$C[T$y+4],T$C[T$y+5],T$C[T$y+6],T$C[T$y+7],T$C[T$y+8],T$C[T$y+9],T$_,T$p);},T$g.transformVector3ArrayByQuat=function(T$n,T$C,T$_,T$E,T$y){var T$p=T$_.elements,T$c=T$n[T$C],T$l=T$n[T$C+1],T$W=T$n[T$C+2],T$q=T$p[0],T$J=T$p[1],T$j=T$p[2],T$P=T$p[3],T$x=T$P*T$c+T$J*T$W-T$j*T$l,T$b=T$P*T$l+T$j*T$c-T$q*T$W,T$r=T$P*T$W+T$q*T$l-T$J*T$c,T$m=-T$q*T$c-T$J*T$l-T$j*T$W;T$E[T$y]=T$x*T$P+T$m*-T$q+T$b*-T$j-T$r*-T$J,T$E[T$y+1]=T$b*T$P+T$m*-T$J+T$r*-T$q-T$x*-T$j,T$E[T$y+2]=T$r*T$P+T$m*-T$j+T$x*-T$J-T$b*-T$q;},T$g.mulMatrixByArray=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c,T$l,T$W,T$q,T$J;if(T$y===T$_){for(T$_=T$g._tempArray16_3,T$c=0;T$c<16;++T$c)T$_[T$c]=T$y[T$p+T$c];T$E=0;}for(T$c=0;T$c<4;T$c++)T$l=T$n[T$C+T$c],T$W=T$n[T$C+T$c+4],T$q=T$n[T$C+T$c+8],T$J=T$n[T$C+T$c+12],T$y[T$p+T$c]=T$l*T$_[T$E+0]+T$W*T$_[T$E+1]+T$q*T$_[T$E+2]+T$J*T$_[T$E+3],T$y[T$p+T$c+4]=T$l*T$_[T$E+4]+T$W*T$_[T$E+5]+T$q*T$_[T$E+6]+T$J*T$_[T$E+7],T$y[T$p+T$c+8]=T$l*T$_[T$E+8]+T$W*T$_[T$E+9]+T$q*T$_[T$E+10]+T$J*T$_[T$E+11],T$y[T$p+T$c+12]=T$l*T$_[T$E+12]+T$W*T$_[T$E+13]+T$q*T$_[T$E+14]+T$J*T$_[T$E+15];},T$g.mulMatrixByArrayFast=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c,T$l,T$W,T$q,T$J;for(T$c=0;T$c<4;T$c++)T$l=T$n[T$C+T$c],T$W=T$n[T$C+T$c+4],T$q=T$n[T$C+T$c+8],T$J=T$n[T$C+T$c+12],T$y[T$p+T$c]=T$l*T$_[T$E+0]+T$W*T$_[T$E+1]+T$q*T$_[T$E+2]+T$J*T$_[T$E+3],T$y[T$p+T$c+4]=T$l*T$_[T$E+4]+T$W*T$_[T$E+5]+T$q*T$_[T$E+6]+T$J*T$_[T$E+7],T$y[T$p+T$c+8]=T$l*T$_[T$E+8]+T$W*T$_[T$E+9]+T$q*T$_[T$E+10]+T$J*T$_[T$E+11],T$y[T$p+T$c+12]=T$l*T$_[T$E+12]+T$W*T$_[T$E+13]+T$q*T$_[T$E+14]+T$J*T$_[T$E+15];},T$g.mulMatrixByArrayAndMatrixFast=function(T$n,T$C,T$_,T$E,T$y){var T$p,T$c,T$l,T$W,T$q,T$J=T$_.elements,T$j=T$J[0],T$P=T$J[1],T$x=T$J[2],T$b=T$J[3],T$r=T$J[4],T$m=T$J[5],T$d=T$J[6],T$a=T$J[7],T$O=T$J[8],T$A=T$J[9],T$k=T$J[10],T$t=T$J[11],T$T=T$J[12],T$Y=T$J[13],T$s=T$J[14],T$N=T$J[15],T$S=T$C,T$M=T$C+4,T$w=T$C+8,T$B=T$C+12,T$V=T$y,T$g=T$y+4,T$H=T$y+8,T$X=T$y+12;for(T$p=0;T$p<4;T$p++)T$c=T$n[T$S+T$p],T$l=T$n[T$M+T$p],T$W=T$n[T$w+T$p],T$q=T$n[T$B+T$p],T$E[T$V+T$p]=T$c*T$j+T$l*T$P+T$W*T$x+T$q*T$b,T$E[T$g+T$p]=T$c*T$r+T$l*T$m+T$W*T$d+T$q*T$a,T$E[T$H+T$p]=T$c*T$O+T$l*T$A+T$W*T$k+T$q*T$t,T$E[T$X+T$p]=T$c*T$T+T$l*T$Y+T$W*T$s+T$q*T$N;},T$g.createAffineTransformationArray=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q,T$J,T$j){var T$P=T$E+T$E,T$x=T$y+T$y,T$b=T$p+T$p,T$r=T$E*T$P,T$m=T$E*T$x,T$d=T$E*T$b,T$a=T$y*T$x,T$O=T$y*T$b,T$A=T$p*T$b,T$k=T$c*T$P,T$t=T$c*T$x,T$T=T$c*T$b;T$J[T$j+0]=(1-(T$a+T$A))*T$l,T$J[T$j+1]=(T$m+T$T)*T$l,T$J[T$j+2]=(T$d-T$t)*T$l,T$J[T$j+3]=0,T$J[T$j+4]=(T$m-T$T)*T$W,T$J[T$j+5]=(1-(T$r+T$A))*T$W,T$J[T$j+6]=(T$O+T$k)*T$W,T$J[T$j+7]=0,T$J[T$j+8]=(T$d+T$t)*T$q,T$J[T$j+9]=(T$O-T$k)*T$q,T$J[T$j+10]=(1-(T$r+T$a))*T$q,T$J[T$j+11]=0,T$J[T$j+12]=T$n,T$J[T$j+13]=T$C,T$J[T$j+14]=T$_,T$J[T$j+15]=1;},T$g.transformVector3ArrayToVector3ArrayCoordinate=function(T$n,T$C,T$_,T$E,T$y){var T$p=T$g._tempArray4_0,T$c=T$n[T$C+0],T$l=T$n[T$C+1],T$W=T$n[T$C+2],T$q=T$_.elements;T$p[0]=T$c*T$q[0]+T$l*T$q[4]+T$W*T$q[8]+T$q[12],T$p[1]=T$c*T$q[1]+T$l*T$q[5]+T$W*T$q[9]+T$q[13],T$p[2]=T$c*T$q[2]+T$l*T$q[6]+T$W*T$q[10]+T$q[14],T$p[3]=1/(T$c*T$q[3]+T$l*T$q[7]+T$W*T$q[11]+T$q[15]),T$E[T$y+0]=T$p[0]*T$p[3],T$E[T$y+1]=T$p[1]*T$p[3],T$E[T$y+2]=T$p[2]*T$p[3];},T$g.transformLightingMapTexcoordByUV0Array=function(T$n,T$C,T$_,T$E,T$y){var T$p=T$_.elements;T$E[T$y+0]=T$n[T$C+0]*T$p[0]+T$p[2],T$E[T$y+1]=(T$n[T$C+1]-1)*T$p[1]+T$p[3];},T$g.transformLightingMapTexcoordByUV1Array=function(T$n,T$C,T$_,T$E,T$y){var T$p=T$_.elements;T$E[T$y+0]=T$n[T$C+0]*T$p[0]+T$p[2],T$E[T$y+1]=1+T$n[T$C+1]*T$p[1]+T$p[3];},T$g.getURLVerion=function(T$n){var T$C=T$n.indexOf("?");return 0<=T$C?T$n.substr(T$C):null;},T$g._quaternionCreateFromYawPitchRollArray=function(T$n,T$C,T$_,T$E){var T$y=.5*T$_,T$p=.5*T$C,T$c=.5*T$n,T$l=Math.sin(T$y),T$W=Math.cos(T$y),T$q=Math.sin(T$p),T$J=Math.cos(T$p),T$j=Math.sin(T$c),T$P=Math.cos(T$c);T$E[0]=T$P*T$q*T$W+T$j*T$J*T$l,T$E[1]=T$j*T$J*T$W-T$P*T$q*T$l,T$E[2]=T$P*T$J*T$l-T$j*T$q*T$W,T$E[3]=T$P*T$J*T$W+T$j*T$q*T$l;},T$g._createAffineTransformationArray=function(T$n,T$C,T$_,T$E){var T$y=T$C[0],T$p=T$C[1],T$c=T$C[2],T$l=T$C[3],T$W=T$y+T$y,T$q=T$p+T$p,T$J=T$c+T$c,T$j=T$y*T$W,T$P=T$y*T$q,T$x=T$y*T$J,T$b=T$p*T$q,T$r=T$p*T$J,T$m=T$c*T$J,T$d=T$l*T$W,T$a=T$l*T$q,T$O=T$l*T$J,T$A=T$_[0],T$k=T$_[1],T$t=T$_[2];T$E[0]=(1-(T$b+T$m))*T$A,T$E[1]=(T$P+T$O)*T$A,T$E[2]=(T$x-T$a)*T$A,T$E[3]=0,T$E[4]=(T$P-T$O)*T$k,T$E[5]=(1-(T$j+T$m))*T$k,T$E[6]=(T$r+T$d)*T$k,T$E[7]=0,T$E[8]=(T$x+T$a)*T$t,T$E[9]=(T$r-T$d)*T$t,T$E[10]=(1-(T$j+T$b))*T$t,T$E[11]=0,T$E[12]=T$n[0],T$E[13]=T$n[1],T$E[14]=T$n[2],T$E[15]=1;},T$g._mulMatrixArray=function(T$n,T$C,T$_,T$E){var T$y,T$p,T$c,T$l,T$W,T$q=T$C.elements,T$J=T$q[0],T$j=T$q[1],T$P=T$q[2],T$x=T$q[3],T$b=T$q[4],T$r=T$q[5],T$m=T$q[6],T$d=T$q[7],T$a=T$q[8],T$O=T$q[9],T$A=T$q[10],T$k=T$q[11],T$t=T$q[12],T$T=T$q[13],T$Y=T$q[14],T$s=T$q[15],T$N=T$E,T$S=T$E+4,T$M=T$E+8,T$w=T$E+12;for(T$y=0;T$y<4;T$y++)T$p=T$n[T$y],T$c=T$n[T$y+4],T$l=T$n[T$y+8],T$W=T$n[T$y+12],T$_[T$N+T$y]=T$p*T$J+T$c*T$j+T$l*T$P+T$W*T$x,T$_[T$S+T$y]=T$p*T$b+T$c*T$r+T$l*T$m+T$W*T$d,T$_[T$M+T$y]=T$p*T$a+T$c*T$O+T$l*T$A+T$W*T$k,T$_[T$w+T$y]=T$p*T$t+T$c*T$T+T$l*T$Y+T$W*T$s;},T$g.getYawPitchRoll=function(T$n,T$C){T$g.transformQuat(T$cC.ForwardRH,T$n,T$_C.TEMPVector31),T$g.transformQuat(T$cC.Up,T$n,T$_C.TEMPVector32);var T$_=T$_C.TEMPVector32.elements;T$g.angleTo(T$cC.ZERO,T$_C.TEMPVector31,T$_C.TEMPVector33);var T$E=T$_C.TEMPVector33.elements;T$E[0]==Math.PI/2?(T$E[1]=T$g.arcTanAngle(T$_[2],T$_[0]),T$E[2]=0):T$E[0]==-Math.PI/2?(T$E[1]=T$g.arcTanAngle(-T$_[2],-T$_[0]),T$E[2]=0):(T$nC.createRotationY(-T$E[1],T$_C.TEMPMatrix0),T$nC.createRotationX(-T$E[0],T$_C.TEMPMatrix1),T$cC.transformCoordinate(T$_C.TEMPVector32,T$_C.TEMPMatrix0,T$_C.TEMPVector32),T$cC.transformCoordinate(T$_C.TEMPVector32,T$_C.TEMPMatrix1,T$_C.TEMPVector32),T$E[2]=T$g.arcTanAngle(T$_[1],-T$_[0])),T$E[1]<=-Math.PI&&(T$E[1]=Math.PI),T$E[2]<=-Math.PI&&(T$E[2]=Math.PI),T$E[1]>=Math.PI&&T$E[2]>=Math.PI&&(T$E[1]=0,T$E[2]=0,T$E[0]=Math.PI-T$E[0]),T$C[0]=T$E[1],T$C[1]=T$E[0],T$C[2]=T$E[2];},T$g.arcTanAngle=function(T$n,T$C){return 0==T$n?1==T$C?Math.PI/2:-Math.PI/2:0<T$n?Math.atan(T$C/T$n):T$n<0?0<T$C?Math.atan(T$C/T$n)+Math.PI:Math.atan(T$C/T$n)-Math.PI:0;},T$g.angleTo=function(T$n,T$C,T$_){T$cC.subtract(T$C,T$n,T$_C.TEMPVector30),T$cC.normalize(T$_C.TEMPVector30,T$_C.TEMPVector30),T$_.elements[0]=Math.asin(T$_C.TEMPVector30.y),T$_.elements[1]=T$g.arcTanAngle(-T$_C.TEMPVector30.z,-T$_C.TEMPVector30.x);},T$g.transformQuat=function(T$n,T$C,T$_){var T$E=T$_.elements,T$y=T$n.elements,T$p=T$C,T$c=T$y[0],T$l=T$y[1],T$W=T$y[2],T$q=T$p[0],T$J=T$p[1],T$j=T$p[2],T$P=T$p[3],T$x=T$P*T$c+T$J*T$W-T$j*T$l,T$b=T$P*T$l+T$j*T$c-T$q*T$W,T$r=T$P*T$W+T$q*T$l-T$J*T$c,T$m=-T$q*T$c-T$J*T$l-T$j*T$W;T$E[0]=T$x*T$P+T$m*-T$q+T$b*-T$j-T$r*-T$J,T$E[1]=T$b*T$P+T$m*-T$J+T$r*-T$q-T$x*-T$j,T$E[2]=T$r*T$P+T$m*-T$j+T$x*-T$J-T$b*-T$q;},T$g.quaterionNormalize=function(T$n,T$C){var T$_=T$n[0],T$E=T$n[1],T$y=T$n[2],T$p=T$n[3],T$c=T$_*T$_+T$E*T$E+T$y*T$y+T$p*T$p;0<T$c&&(T$c=1/Math.sqrt(T$c),T$C[0]=T$_*T$c,T$C[1]=T$E*T$c,T$C[2]=T$y*T$c,T$C[3]=T$p*T$c);},T$g.matrix4x4MultiplyFFF=function(T$n,T$C,T$_){var T$E,T$y,T$p,T$c,T$l;if(T$_===T$C)for(T$C=new Float32Array(16),T$E=0;T$E<16;++T$E)T$C[T$E]=T$_[T$E];for(T$E=0;T$E<4;T$E++)T$y=T$n[T$E],T$p=T$n[T$E+4],T$c=T$n[T$E+8],T$l=T$n[T$E+12],T$_[T$E]=T$y*T$C[0]+T$p*T$C[1]+T$c*T$C[2]+T$l*T$C[3],T$_[T$E+4]=T$y*T$C[4]+T$p*T$C[5]+T$c*T$C[6]+T$l*T$C[7],T$_[T$E+8]=T$y*T$C[8]+T$p*T$C[9]+T$c*T$C[10]+T$l*T$C[11],T$_[T$E+12]=T$y*T$C[12]+T$p*T$C[13]+T$c*T$C[14]+T$l*T$C[15];},T$g.matrix4x4MultiplyMFM=function(T$n,T$C,T$_){T$g.matrix4x4MultiplyFFF(T$n.elements,T$C,T$_.elements);},T$j(T$g,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"};},"_tempVector3_0",function(){return this._tempVector3_0=new T$cC();},"_tempVector3_1",function(){return this._tempVector3_1=new T$cC();},"_tempVector3_2",function(){return this._tempVector3_2=new T$cC();},"_tempVector3_3",function(){return this._tempVector3_3=new T$cC();},"_tempVector3_4",function(){return this._tempVector3_4=new T$cC();},"_tempVector3_5",function(){return this._tempVector3_5=new T$cC();},"_tempVector3_6",function(){return this._tempVector3_6=new T$cC();},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4);},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16);},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16);},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16);},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16);}]),T$g;}(),T$dC=function(){function T$B(){}return T$x(T$B,"Laya3D"),T$B._cancelLoadByUrl=function(T$n){T$k.loader.cancelLoadByUrl(T$n),T$B._innerFirstLevelLoaderManager.cancelLoadByUrl(T$n),T$B._innerSecondLevelLoaderManager.cancelLoadByUrl(T$n),T$B._innerThirdLevelLoaderManager.cancelLoadByUrl(T$n),T$B._innerFourthLevelLoaderManager.cancelLoadByUrl(T$n);},T$B._changeWebGLSize=function(T$n,T$C){T$w.onStageResize(T$n,T$C),T$v.clientWidth=T$n,T$v.clientHeight=T$C;},T$B.__init__=function(){var T$n=T$C.createMap;T$n.lh=[T$XC,"SPRITE3DHIERARCHY"],T$n.ls=[T$HC,"SPRITE3DHIERARCHY"],T$n.lm=[T$uC,"MESH"],T$n.lmat=[T$iC,"MATERIAL"],T$n.jpg=[T$QC,"nativeimage"],T$n.jpeg=[T$QC,"nativeimage"],T$n.png=[T$QC,"nativeimage"],T$n.pkm=[T$QC,"arraybuffer"],T$n.raw=[T$GC,"arraybuffer"],T$n.mipmaps=[T$GC,"arraybuffer"],T$d.parserMap.SPRITE3DHIERARCHY=T$B._loadHierarchy,T$d.parserMap.MESH=T$B._loadMesh,T$d.parserMap.MATERIAL=T$B._loadMaterial,T$d.parserMap.TEXTURECUBE=T$B._loadTextureCube,T$d.parserMap.TERRAIN=T$B._loadTerrain,T$B._innerFirstLevelLoaderManager.on("error",null,T$B._eventLoadManagerError),T$B._innerSecondLevelLoaderManager.on("error",null,T$B._eventLoadManagerError),T$B._innerThirdLevelLoaderManager.on("error",null,T$B._eventLoadManagerError),T$B._innerFourthLevelLoaderManager.on("error",null,T$B._eventLoadManagerError);},T$B.READ_BLOCK=function(){return T$B._readData.pos+=4,!0;},T$B.READ_DATA=function(){return T$B._DATA.offset=T$B._readData.getUint32(),T$B._DATA.size=T$B._readData.getUint32(),!0;},T$B.READ_STRINGS=function(){var T$n=[],T$C={offset:0,size:0};T$C.offset=T$B._readData.getUint16(),T$C.size=T$B._readData.getUint16();T$B._readData.pos;T$B._readData.pos=T$C.offset+T$B._DATA.offset;for(var T$_=0;T$_<T$C.size;T$_++){var T$E=T$B._readData.readUTFString();-1===T$E.lastIndexOf(".lmat")&&-1===T$E.lastIndexOf(".lpbr")||T$n.push(T$E);}return T$n;},T$B.formatRelativePath=function(T$n,T$C){var T$_;if("."===T$C.charAt(0)){for(var T$E=(T$n+T$C).split("/"),T$y=0,T$p=T$E.length;T$y<T$p;T$y++)if(".."==T$E[T$y]){var T$c=T$y-1;0<T$c&&".."!==T$E[T$c]&&(T$E.splice(T$c,2),T$y-=2);}T$_=T$E.join("/");}else T$_=T$n+T$C;return null!=T$M.customFormat&&(T$_=T$M.customFormat(T$_,null)),T$_;},T$B._eventLoadManagerError=function(T$n){T$k.loader.event("error",T$n);},T$B._addHierarchyInnerUrls=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c=T$B.formatRelativePath(T$E,T$y);T$_&&(T$c+=T$_),T$n.push({url:T$c,clas:T$p}),T$C[T$y]=T$c;},T$B._getSprite3DHierarchyInnerUrls=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){var T$l,T$W=0,T$q=0;switch(T$n.type){case"Scene":var T$J=T$n.customProps.lightmaps;for(T$W=0,T$q=T$J.length;T$W<T$q;T$W++){var T$j=T$J[T$W].replace(".exr",".png");T$B._addHierarchyInnerUrls(T$E,T$y,T$p,T$c,T$j,T$QC);}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var T$P;if(T$n.instanceParams)(T$P=T$n.instanceParams.loadPath)&&T$B._addHierarchyInnerUrls(T$C,T$y,T$p,T$c,T$P,T$uC);else{(T$P=(T$l=T$n.customProps).meshPath)&&T$B._addHierarchyInnerUrls(T$C,T$y,T$p,T$c,T$P,T$uC);var T$x=T$l.materials;if(T$x)for(T$W=0,T$q=T$x.length;T$W<T$q;T$W++){for(var T$b=T$x[T$W],T$r=T$b.type.split("."),T$m=T$V.window,T$d=0,T$a=T$r.length;T$d<T$a;++T$d){T$m=T$m[this.clasPaths[T$d]];}if("function"!=typeof T$m)throw"_getSprite3DHierarchyInnerUrls 错误: "+T$b.type+" 不是类";T$B._addHierarchyInnerUrls(T$_,T$y,T$p,T$c,T$b.path,T$m);}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var T$O=(T$l=T$n.customProps).meshPath;T$O&&T$B._addHierarchyInnerUrls(T$C,T$y,T$p,T$c,T$O,T$uC);var T$A=T$l.material;if(T$A){T$r=T$A.type.split("."),T$m=T$V.window;for(T$d=0,T$a=T$r.length;T$d<T$a;++T$d){T$m=T$m[this.clasPaths[T$d]];}T$B._addHierarchyInnerUrls(T$_,T$y,T$p,T$c,T$A.path,T$m);}else{var T$k=T$l.materialPath;if(T$k)T$B._addHierarchyInnerUrls(T$_,T$y,T$p,T$c,T$k,ShurikenParticleMaterial);else{var T$t=T$l.texturePath;T$t&&T$B._addHierarchyInnerUrls(T$E,T$y,T$p,T$c,T$t,T$QC);}}break;case"Terrain":T$B._addHierarchyInnerUrls(T$E,T$y,T$p,T$c,T$n.customProps.dataPath,TerrainRes);}var T$T=T$n.components;for(var T$Y in T$T){var T$s=T$T[T$Y];switch(T$Y){case"Animator":var T$N=T$s.avatarPath;if(T$N)T$B._addHierarchyInnerUrls(T$E,T$y,T$p,T$c,T$N,Avatar);else{var T$S=T$s.avatar;T$S&&T$B._addHierarchyInnerUrls(T$E,T$y,T$p,T$c,T$S.path,Avatar);}var T$M=T$s.clipPaths;for(T$W=0,T$q=T$M.length;T$W<T$q;T$W++)T$B._addHierarchyInnerUrls(T$E,T$y,T$p,T$c,T$M[T$W],AnimationClip);}}var T$w=T$n.child;for(T$W=0,T$q=T$w.length;T$W<T$q;T$W++)T$B._getSprite3DHierarchyInnerUrls(T$w[T$W],T$C,T$_,T$E,T$y,T$p,T$c);},T$B._loadHierarchy=function(T$n){T$n.on("loaded",null,T$B._onHierarchylhLoaded,[T$n,T$n._class._getGroup()]),T$n.load(T$n.url,"json",!1,null,!0);},T$B._onHierarchylhLoaded=function(T$n,T$C,T$_){if(T$n._class.destroyed)T$n.endLoad();else{var T$E=T$n.url,T$y=T$mC.getURLVerion(T$E),T$p=T$M.getPath(T$E),T$c=[],T$l=[],T$W=[],T$q={};T$B._getSprite3DHierarchyInnerUrls(T$_,T$c,T$l,T$W,T$q,T$y,T$p);var T$J=T$c.length+T$l.length+T$W.length,T$j=T$J+1,T$P=1/T$j;if(T$B._onProcessChange(T$n,0,T$P,1),0<T$W.length){var T$x=T$J/T$j,T$b=T$S.create(null,T$B._onProcessChange,[T$n,T$P,T$x],!1);T$B._innerFourthLevelLoaderManager.create(T$W,T$S.create(null,T$B._onHierarchyInnerForthLevResouLoaded,[T$n,T$C,T$b,T$_,T$q,T$c,T$l,T$P+T$x*T$W.length,T$x]),T$b,null,null,1,!0,T$C);}else T$B._onHierarchyInnerForthLevResouLoaded(T$n,T$C,null,T$_,T$q,T$c,T$l,T$P,T$x);}},T$B._onHierarchyInnerForthLevResouLoaded=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W){if(T$n._class.destroyed)T$n.endLoad();else if(T$_&&T$_.recover(),0<T$c.length){var T$q=T$S.create(null,T$B._onProcessChange,[T$n,T$l,T$W],!1);T$B._innerSecondLevelLoaderManager.create(T$c,T$S.create(null,T$B._onHierarchyInnerSecondLevResouLoaded,[T$n,T$C,T$q,T$E,T$y,T$p,T$l+T$W*T$c.length,T$W]),T$_,null,null,1,!0,T$C);}else T$B._onHierarchyInnerSecondLevResouLoaded(T$n,T$C,null,T$E,T$y,T$p,T$l,T$W);},T$B._onHierarchyInnerSecondLevResouLoaded=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l){if(T$n._class.destroyed)T$n.endLoad();else if(T$_&&T$_.recover(),0<T$p.length){var T$W=T$S.create(null,T$B._onProcessChange,[T$n,T$c,T$l],!1);T$B._innerFirstLevelLoaderManager.create(T$p,T$S.create(null,T$B._onHierarchyInnerFirstLevResouLoaded,[T$n,T$W,T$E,T$y]),T$_,null,null,1,!0,T$C);}else T$B._onHierarchyInnerFirstLevResouLoaded(T$n,null,T$E,T$y);},T$B._onHierarchyInnerFirstLevResouLoaded=function(T$n,T$C,T$_,T$E){T$C&&T$C.recover(),T$n.endLoad([T$_,T$E]);},T$B._loadTerrain=function(T$n){T$n.on("loaded",null,T$B._onTerrainLtLoaded,[T$n,T$n._class._getGroup()]),T$n.load(T$n.url,"json",!1,null,!0);},T$B._onTerrainLtLoaded=function(T$n,T$C,T$_){if(T$n._class.destroyed)T$n.endLoad();else{var T$E,T$y,T$p=T$n.url,T$c=T$mC.getURLVerion(T$p),T$l=T$M.getPath(T$p),T$W=[],T$q={},T$J=0,T$j=0,T$P=T$_.heightData;T$E=T$P.url,T$y=T$B.formatRelativePath(T$l,T$E),T$c&&(T$y+=T$c),T$E=T$q[T$E]=T$y;var T$x=T$_.detailTexture;for(T$J=0,T$j=T$x.length;T$J<T$j;T$J++)T$W.push({url:T$x[T$J].diffuse});var T$b=T$_.normalMap;for(T$J=0,T$j=T$b.length;T$J<T$j;T$J++)T$W.push({url:T$b[T$J]});var T$r=T$_.alphaMap;for(T$J=0,T$j=T$r.length;T$J<T$j;T$J++)T$W.push({url:T$r[T$J],params:[!1,!1,6408,!0]});for(T$J=0,T$j=T$W.length;T$J<T$j;T$J++){var T$m=T$W[T$J].url;T$y=T$B.formatRelativePath(T$l,T$m),T$c&&(T$y+=T$c),T$W[T$J].url=T$y,T$q[T$m]=T$y;}var T$d=T$W.length,T$a=T$d+2,T$O=1/T$a;T$B._onProcessChange(T$n,0,T$O,1);var T$A={heightMapLoaded:!1,texturesLoaded:!1},T$k=T$S.create(null,T$B._onProcessChange,[T$n,T$O,T$O],!1);T$B._innerFourthLevelLoaderManager.create(T$E,T$S.create(null,T$B._onTerrainHeightMapLoaded,[T$n,T$k,T$_,T$q,T$A]),T$k,null,[T$P.numX,T$P.numZ,T$P.bitType,T$P.value],1,!0,T$C);var T$t=T$S.create(null,T$B._onProcessChange,[T$n,2*T$O,T$d/T$a],!1);T$B._innerFourthLevelLoaderManager.create(T$W,T$S.create(null,T$B._onTerrainTexturesLoaded,[T$n,T$t,T$_,T$q,T$A]),T$t,null,null,1,!0,T$C);}},T$B._onTerrainHeightMapLoaded=function(T$n,T$C,T$_,T$E,T$y){T$y.heightMapLoaded=!0,T$y.texturesLoaded&&(T$n.endLoad([T$_,T$E]),T$C.recover());},T$B._onTerrainTexturesLoaded=function(T$n,T$C,T$_,T$E,T$y){T$y.texturesLoaded=!0,T$y.heightMapLoaded&&(T$n.endLoad([T$_,T$E]),T$C.recover());},T$B._loadMesh=function(T$n){T$n.on("loaded",null,T$B._onMeshLmLoaded,[T$n,T$n._class._getGroup()]),T$n.load(T$n.url,"arraybuffer",!1,null,!0);},T$B._onMeshLmLoaded=function(T$n,T$C,T$_){if(T$n._class.destroyed)T$n.endLoad();else{var T$E,T$y,T$p,T$c=T$n.url,T$l=T$mC.getURLVerion(T$c),T$W=T$M.getPath(T$c),T$q={},T$J=0,T$j=0;switch((T$B._readData=new T$t(T$_)).pos=0,T$B._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var T$P=T$B._readData.getUint32();T$B._readData.pos=T$B._readData.pos+4,T$j=T$B._readData.getUint16(),T$B._readData.pos=T$B._readData.pos+8*T$j;var T$x=T$B._readData.getUint32();for(T$j=T$B._readData.getUint16(),T$B._readData.pos=T$P+T$x,T$E=[],T$J=0;T$J<T$j;T$J++){var T$b=T$B._readData.readUTFString();-1!==T$b.lastIndexOf(".lmat")&&T$E.push(T$b);}break;default:for(T$B.READ_BLOCK(),T$J=0;T$J<2;T$J++){var T$r=T$B._readData.getUint16(),T$m=T$B._strings[T$r],T$d=T$B["READ_"+T$m];if(null==T$d)throw new Error("model file err,no this function:"+T$r+" "+T$m);1===T$J?T$E=T$d.call():T$d.call();}}for(T$J=0,T$p=T$E.length;T$J<T$p;T$J++){var T$a=T$E[T$J];T$y=T$B.formatRelativePath(T$W,T$a),T$l&&(T$y+=T$l),T$E[T$J]=T$y,T$q[T$a]=T$y;}if(0<T$E.length){T$B._onProcessChange(T$n,0,.5,1);var T$O=T$S.create(null,T$B._onProcessChange,[T$n,.5,.5],!1);T$B._innerSecondLevelLoaderManager.create(T$E,T$S.create(null,T$B._onMeshMateialLoaded,[T$n,T$O,T$_,T$q]),T$O,null,null,1,!0,T$C);}else T$n.endLoad([T$_,T$q]);}},T$B._onMeshMateialLoaded=function(T$n,T$C,T$_,T$E){T$n.endLoad([T$_,T$E]),T$C.recover();},T$B._getMaterialTexturePath=function(T$n,T$C,T$_){var T$E=T$n.length-4;return T$n.indexOf(".dds")!=T$E&&T$n.indexOf(".tga")!=T$E&&T$n.indexOf(".exr")!=T$E&&T$n.indexOf(".DDS")!=T$E&&T$n.indexOf(".TGA")!=T$E&&T$n.indexOf(".EXR")!=T$E||(T$n=T$n.substr(0,T$E)+".png"),T$n=T$B.formatRelativePath(T$_,T$n),T$C&&(T$n+=T$C),T$n;},T$B._loadMaterial=function(T$n){T$n.on("loaded",null,T$B._onMaterilLmatLoaded,[T$n,T$n._class._getGroup()]),T$n.load(T$n.url,"json",!1,null,!0);},T$B._onMaterilLmatLoaded=function(T$n,T$C,T$_){if(T$n._class.destroyed)T$n.endLoad();else{var T$E,T$y=T$n.url,T$p=T$mC.getURLVerion(T$y),T$c=T$M.getPath(T$y),T$l=[],T$W={},T$q=T$_.customProps,T$J=T$_.version;if(T$J)switch(T$J){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var T$j=T$_.props.textures,T$P=0,T$x=T$j.length;T$P<T$x;T$P++){var T$b=T$j[T$P],T$r=T$b.path;if(T$r){var T$m=T$r.length-4;T$r.indexOf(".exr")!=T$m&&T$r.indexOf(".EXR")!=T$m||(T$r=T$r.substr(0,T$m)+".png"),T$E=T$B.formatRelativePath(T$c,T$r),T$p&&(T$E+=T$p),T$l.push({url:T$E,params:T$b.params}),T$W[T$r]=T$E;}}break;default:throw new Error("Laya3D:unkonwn version.");}else{var T$d=T$q.diffuseTexture.texture2D;if(T$d&&(T$E=T$B._getMaterialTexturePath(T$d,T$p,T$c),T$l.push(T$E),T$W[T$d]=T$E),T$q.normalTexture){var T$a=T$q.normalTexture.texture2D;T$a&&(T$E=T$B._getMaterialTexturePath(T$a,T$p,T$c),T$l.push(T$E),T$W[T$a]=T$E);}if(T$q.specularTexture){var T$O=T$q.specularTexture.texture2D;T$O&&(T$E=T$B._getMaterialTexturePath(T$O,T$p,T$c),T$l.push(T$E),T$W[T$O]=T$E);}if(T$q.emissiveTexture){var T$A=T$q.emissiveTexture.texture2D;T$A&&(T$E=T$B._getMaterialTexturePath(T$A,T$p,T$c),T$l.push(T$E),T$W[T$A]=T$E);}if(T$q.ambientTexture){var T$k=T$q.ambientTexture.texture2D;T$k&&(T$E=T$B._getMaterialTexturePath(T$k,T$p,T$c),T$l.push(T$E),T$W[T$k]=T$E);}if(T$q.reflectTexture){var T$t=T$q.reflectTexture.texture2D;T$t&&(T$E=T$B._getMaterialTexturePath(T$t,T$p,T$c),T$l.push(T$E),T$W[T$t]=T$E);}}var T$T=T$l.length,T$Y=T$T+1,T$s=1/T$Y;if(T$B._onProcessChange(T$n,0,T$s,1),0<T$T){var T$N=T$S.create(null,T$B._onProcessChange,[T$n,T$s,T$T/T$Y],!1);T$B._innerFourthLevelLoaderManager.create(T$l,T$S.create(null,T$B._onMateialTexturesLoaded,[T$n,T$N,T$_,T$W]),T$N,T$QC,null,1,!0,T$C);}else T$B._onMateialTexturesLoaded(T$n,null,T$_,null);}},T$B._onMateialTexturesLoaded=function(T$n,T$C,T$_,T$E){T$n.endLoad([T$_,T$E]),T$C&&T$C.recover();},T$B._loadTextureCube=function(T$n){T$n.on("loaded",null,T$B._onTextureCubeLtcLoaded,[T$n]),T$n.load(T$n.url,"json",!1,null,!0);},T$B._onTextureCubeLtcLoaded=function(T$n,T$C){if(T$n._class.destroyed)T$n.endLoad();else{var T$_=T$M.getPath(T$n.url),T$E=[T$B.formatRelativePath(T$_,T$C.px),T$B.formatRelativePath(T$_,T$C.nx),T$B.formatRelativePath(T$_,T$C.py),T$B.formatRelativePath(T$_,T$C.ny),T$B.formatRelativePath(T$_,T$C.pz),T$B.formatRelativePath(T$_,T$C.nz)];T$B._onProcessChange(T$n,0,1/7,1);var T$y=T$S.create(null,T$B._onProcessChange,[T$n,1/7,6/7],!1);T$B._innerFourthLevelLoaderManager.load(T$E,T$S.create(null,T$B._onTextureCubeImagesLoaded,[T$n,T$E,T$y]),T$y,"nativeimage");}},T$B._onTextureCubeImagesLoaded=function(T$n,T$C,T$_){var T$E=[];T$E.length=6;for(var T$y=0;T$y<6;T$y++){var T$p=T$C[T$y];T$E[T$y]=T$d.getRes(T$p),T$d.clearRes(T$p);}T$n.endLoad(T$E),T$_.recover();},T$B._onProcessChange=function(T$n,T$C,T$_,T$E){(T$E=T$C+T$E*T$_)<1&&T$n.event("progress",T$E);},T$B.init=function(T$n,T$C,T$_,T$E,T$y,T$p){if(void 0===T$_&&(T$_=!1),void 0===T$E&&(T$E=!1),void 0===T$y&&(T$y=!0),void 0===T$p&&(T$p=!0),T$a.update3DLoop=function(){},T$a.cancelLoadByUrl=function(T$n){T$B._cancelLoadByUrl(T$n);},T$W.isAntialias=T$_,T$W.isAlpha=T$E,T$W.premultipliedAlpha=T$y,T$W.isStencil=T$p,!T$w.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");T$a.changeWebGLSize=T$B._changeWebGLSize,T$r.is3DMode=!0,T$k.init(T$n,T$C),T$g.__init__(),T$jC.__init__(),T$hC.__init__(),T$F.__init__(),T$B.__init__(),T$c.maxTextureCount=2,(T$B.debugMode||T$R.debugMode)&&(T$B._debugPhasorSprite=new T$Z());},T$B.HIERARCHY="SPRITE3DHIERARCHY",T$B.MESH="MESH",T$B.MATERIAL="MATERIAL",T$B.PBRMATERIAL="PBRMTL",T$B.TEXTURECUBE="TEXTURECUBE",T$B.TERRAIN="TERRAIN",T$B._readData=null,T$B._debugPhasorSprite=null,T$B.debugMode=!1,T$j(T$B,["_DATA",function(){return this._DATA={offset:0,size:0};},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"];},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new T$C();},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new T$C();},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new T$C();},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new T$C();}]),T$B;}(),T$aC=function(T$n){function T$y(T$n){T$y.__super.call(this),this._owner=T$n,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0;}T$x(T$y,"laya.d3.animation.AnimationTransform3D",T$p);var T$C=T$y.prototype;return T$C._getlocalMatrix=function(){return this._localUpdate&&(T$mC._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix;},T$C._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var T$n=0,T$C=this._childs.length;T$n<T$C;T$n++)this._childs[T$n]._onWorldTransform();}},T$C._setWorldMatrixAndUpdate=function(T$n){if(this._worldMatrix=T$n,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var T$C=this._getlocalMatrix(),T$_=0;T$_<16;++T$_)this._worldMatrix[T$_]=T$C[T$_];else T$mC.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1;},T$C._setWorldMatrixNoUpdate=function(T$n){this._worldMatrix=T$n;},T$C._setWorldMatrixIgnoreUpdate=function(T$n){this._worldMatrix=T$n,this._worldUpdate=!1;},T$C.getLocalPosition=function(){return this._localPosition;},T$C.setLocalPosition=function(T$n){if(this._parent)this._localPosition=T$n,this._localUpdate=!0,this._onWorldTransform();else{var T$C=this._entity.owner._transform,T$_=this._entity.localPosition,T$E=T$_.elements;T$E[0]=T$n[0],T$E[1]=T$n[1],T$E[2]=T$n[2],T$C.localPosition=T$_;}},T$C.getLocalRotation=function(){if(this._localQuaternionUpdate){var T$n=this._localRotationEuler;T$mC._quaternionCreateFromYawPitchRollArray(T$n[1]/T$y._angleToRandin,T$n[0]/T$y._angleToRandin,T$n[2]/T$y._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1;}return this._localRotation;},T$C.setLocalRotation=function(T$n){if(this._parent)this._localRotation=T$n,T$mC.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var T$C=this._entity.owner._transform,T$_=this._entity.localRotation,T$E=T$_.elements;T$E[0]=T$n[0],T$E[1]=T$n[1],T$E[2]=T$n[2],T$E[3]=T$n[3],T$C.localRotation=T$_;}},T$C.getLocalScale=function(){return this._localScale;},T$C.setLocalScale=function(T$n){if(this._parent)this._localScale=T$n,this._localUpdate=!0,this._onWorldTransform();else{var T$C=this._entity.owner._transform,T$_=this._entity.localScale,T$E=T$_.elements;T$E[0]=T$n[0],T$E[1]=T$n[1],T$E[2]=T$n[2],T$C.localScale=T$_;}},T$C.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){T$mC.getYawPitchRoll(this._localRotation,T$y._tempVector3);var T$n=T$y._tempVector3,T$C=this._localRotationEuler;T$C[0]=T$n[1]*T$y._angleToRandin,T$C[1]=T$n[0]*T$y._angleToRandin,T$C[2]=T$n[2]*T$y._angleToRandin,this._locaEulerlUpdate=!1;}return this._localRotationEuler;},T$C.setLocalRotationEuler=function(T$n){if(this._parent)T$mC._quaternionCreateFromYawPitchRollArray(T$n[1]/T$y._angleToRandin,T$n[0]/T$y._angleToRandin,T$n[2]/T$y._angleToRandin,this._localRotation),this._localRotationEuler=T$n,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var T$C=this._entity.owner._transform,T$_=this._entity.localRotationEuler,T$E=T$_.elements;T$E[0]=T$n[0],T$E[1]=T$n[1],T$E[2]=T$n[2],T$C.localRotationEuler=T$_;}},T$C.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)T$mC.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var T$n=this._getlocalMatrix(),T$C=0;T$C<16;++T$C)this._worldMatrix[T$C]=T$n[T$C];this._worldUpdate=!1;}return this._worldMatrix;},T$C.setParent=function(T$n){if(this._parent!==T$n){if(this._parent){var T$C=this._parent._childs,T$_=T$C.indexOf(this);T$C.splice(T$_,1);}T$n&&(T$n._childs.push(this),T$n&&this._onWorldTransform()),this._parent=T$n;}},T$j(T$y,["_tempVector3",function(){return this._tempVector3=new Float32Array(3);},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI;}]),T$y;}(),T$OC=function(T$n){function T$C(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,T$C.__super.call(this),this._destroyed=!1,this._id=T$C._uniqueIDCounter,T$C._uniqueIDCounter++;}T$x(T$C,"laya.d3.component.Component3D",T$p);var T$_=T$C.prototype;return T$k.imps(T$_,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),T$_._initialize=function(T$n){this._owner=T$n,this._enable=!0,this.started=!1,this._load(T$n);},T$_._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0;},T$_._load=function(T$n){},T$_._start=function(T$n){},T$_._update=function(T$n){},T$_._lateUpdate=function(T$n){},T$_._preRenderUpdate=function(T$n){},T$_._postRenderUpdate=function(T$n){},T$_._unload=function(T$n){this.offAll();},T$_._cloneTo=function(T$n){},T$b(0,T$_,"id",function(){return this._id;}),T$b(0,T$_,"destroyed",function(){return this._destroyed;}),T$b(0,T$_,"owner",function(){return this._owner;}),T$b(0,T$_,"enable",function(){return this._enable;},function(T$n){this._enable!==T$n&&(this._enable=T$n,this.event("enablechanged",this._enable));}),T$b(0,T$_,"isSingleton",function(){return T$C._isSingleton;}),T$C._isSingleton=!0,T$C._uniqueIDCounter=1,T$C;}(),T$AC=function(T$n){function T$C(){this._destroyed=!1,T$C.__super.call(this),this._destroyed=!1;}T$x(T$C,"laya.d3.core.GeometryFilter",T$p);var T$_=T$C.prototype;return T$k.imps(T$_,{"laya.resource.IDestroy":!0}),T$_._destroy=function(){this.offAll(),this._destroyed=!0;},T$b(0,T$_,"_isAsyncLoaded",function(){return!0;}),T$b(0,T$_,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.");}),T$b(0,T$_,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.");}),T$b(0,T$_,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.");}),T$b(0,T$_,"destroyed",function(){return this._destroyed;}),T$C;}(),T$kC=function(T$n){function T$E(T$n){T$E.__super.call(this),this._id=++T$E._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new T$Rn(new T$cC(),new T$cC()),this._boundingBoxCenter=new T$cC(),this._boundingSphere=new T$Un(new T$cC(),0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=T$n,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange);}T$x(T$E,"laya.d3.core.render.BaseRender",T$p);var T$C=T$E.prototype;return T$k.imps(T$C,{"laya.resource.IDestroy":!0}),T$C._changeMaterialReference=function(T$n,T$C){T$n&&T$n._removeReference(),T$C._addReference();},T$C._getInstanceMaterial=function(T$n,T$C){var T$_=new T$n.constructor();return T$n.cloneTo(T$_),T$_.name=T$_.name+"(Instance)",this._materialsInstance[T$C]=!0,this._changeMaterialReference(this._materials[T$C],T$_),this._materials[T$C]=T$_;},T$C._setShaderValuelightMap=function(T$n){this._setShaderValueTexture(3,T$n);},T$C._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0;},T$C._renderRenderableBoundBox=function(){var T$n=T$dC._debugPhasorSprite,T$C=this.boundingBox,T$_=T$E._tempBoundBoxCorners;T$C.getCorners(T$_),T$n.line(T$_[0],T$E._greenColor,T$_[1],T$E._greenColor),T$n.line(T$_[2],T$E._greenColor,T$_[3],T$E._greenColor),T$n.line(T$_[4],T$E._greenColor,T$_[5],T$E._greenColor),T$n.line(T$_[6],T$E._greenColor,T$_[7],T$E._greenColor),T$n.line(T$_[0],T$E._greenColor,T$_[3],T$E._greenColor),T$n.line(T$_[1],T$E._greenColor,T$_[2],T$E._greenColor),T$n.line(T$_[2],T$E._greenColor,T$_[6],T$E._greenColor),T$n.line(T$_[3],T$E._greenColor,T$_[7],T$E._greenColor),T$n.line(T$_[0],T$E._greenColor,T$_[4],T$E._greenColor),T$n.line(T$_[1],T$E._greenColor,T$_[5],T$E._greenColor),T$n.line(T$_[4],T$E._greenColor,T$_[7],T$E._greenColor),T$n.line(T$_[5],T$E._greenColor,T$_[6],T$E._greenColor);},T$C._calculateBoundingSphere=function(){throw"BaseRender: must override it.";},T$C._calculateBoundingBox=function(){throw"BaseRender: must override it.";},T$C._setShaderValueTexture=function(T$n,T$C){this._owner._shaderValues.setValue(T$n,T$C);},T$C._setShaderValueMatrix4x4=function(T$n,T$C){this._owner._shaderValues.setValue(T$n,T$C?T$C.elements:null);},T$C._setShaderValueColor=function(T$n,T$C){this._owner._shaderValues.setValue(T$n,T$C?T$C.elements:null);},T$C._setShaderValueBuffer=function(T$n,T$C){this._owner._shaderValues.setValue(T$n,T$C);},T$C._setShaderValueInt=function(T$n,T$C){this._owner._shaderValues.setValue(T$n,T$C);},T$C._setShaderValueBool=function(T$n,T$C){this._owner._shaderValues.setValue(T$n,T$C);},T$C._setShaderValueNumber=function(T$n,T$C){this._owner._shaderValues.setValue(T$n,T$C);},T$C._setShaderValueVector2=function(T$n,T$C){this._owner._shaderValues.setValue(T$n,T$C?T$C.elements:null);},T$C._addShaderDefine=function(T$n){this._owner._shaderDefineValue|=T$n;},T$C._removeShaderDefine=function(T$n){this._owner._shaderDefineValue&=~T$n;},T$C._renderUpdate=function(T$n){return!0;},T$C._applyLightMapParams=function(){if(0<=this._lightmapIndex){var T$n=this._owner.scene;if(T$n){var T$C=T$n.getlightmaps()[this._lightmapIndex];T$C?(this._addShaderDefine(T$ZC.SAHDERDEFINE_LIGHTMAP),T$C.loaded?this._setShaderValuelightMap(T$C):T$C.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(T$ZC.SAHDERDEFINE_LIGHTMAP);}else this._removeShaderDefine(T$ZC.SAHDERDEFINE_LIGHTMAP);}else this._removeShaderDefine(T$ZC.SAHDERDEFINE_LIGHTMAP);},T$C._updateOctreeNode=function(){var T$n=this._treeNode;T$n&&this._octreeNodeNeedChange&&(T$n.updateObject(this),this._octreeNodeNeedChange=!1);},T$C._destroy=function(){this.offAll();var T$n=0,T$C=0;for(T$n=0,T$C=this._renderElements.length;T$n<T$C;T$n++)this._renderElements[T$n]._destroy();for(T$n=0,T$C=this._materials.length;T$n<T$C;T$n++)this._materials[T$n]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0;},T$b(0,T$C,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere;}),T$b(0,T$C,"id",function(){return this._id;}),T$b(0,T$C,"material",function(){var T$n=this._materials[0];if(T$n&&!this._materialsInstance[0]){var T$C=this._getInstanceMaterial(T$n,0);this.event("materialchanged",[this,0,T$C]);}return this._materials[0];},function(T$n){this.sharedMaterial=T$n;}),T$b(0,T$C,"sharedMaterial",function(){return this._materials[0];},function(T$n){var T$C=this._materials[0];T$C!==T$n&&(this._materials[0]=T$n,this._materialsInstance[0]=!1,this._changeMaterialReference(T$C,T$n),this.event("materialchanged",[this,0,T$n]));}),T$b(0,T$C,"lightmapIndex",function(){return this._lightmapIndex;},function(T$n){this._lightmapIndex=T$n,this._applyLightMapParams();}),T$b(0,T$C,"lightmapScaleOffset",function(){return this._lightmapScaleOffset;},function(T$n){this._lightmapScaleOffset=T$n,this._setShaderValueColor(2,T$n),this._addShaderDefine(T$ZC.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV);}),T$b(0,T$C,"enable",function(){return this._enable;},function(T$n){this._enable=T$n,this.event("enablechanged",[this,T$n]);}),T$b(0,T$C,"materials",function(){for(var T$n=0,T$C=this._materials.length;T$n<T$C;T$n++)if(!this._materialsInstance[T$n]){var T$_=this._getInstanceMaterial(this._materials[T$n],T$n);this.event("materialchanged",[this,T$n,T$_]);}return this._materials.slice();},function(T$n){this.sharedMaterials=T$n;}),T$b(0,T$C,"sharedMaterials",function(){return this._materials.slice();},function(T$n){if(!T$n)throw new Error("MeshRender: shadredMaterials value can't be null.");var T$C=T$n.length;this._materialsInstance.length=T$C;for(var T$_=0;T$_<T$C;T$_++){var T$E=this._materials[T$_];T$E!==T$n[T$_]&&(this._materialsInstance[T$_]=!1,this._changeMaterialReference(T$E,T$n[T$_]),this.event("materialchanged",[this,T$_,T$n[T$_]]));}this._materials=T$n;}),T$b(0,T$C,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox;}),T$b(0,T$C,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var T$n=this.boundingBox;T$cC.add(T$n.min,T$n.max,this._boundingBoxCenter),T$cC.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1;}return this._boundingBoxCenter;}),T$b(0,T$C,"receiveShadow",function(){return this._receiveShadow;},function(T$n){this._receiveShadow!==T$n&&((this._receiveShadow=T$n)?this._addShaderDefine(T$xC.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(T$xC.SHADERDEFINE_RECEIVE_SHADOW));}),T$b(0,T$C,"destroyed",function(){return this._destroyed;}),T$E._uniqueIDCounter=0,T$j(T$E,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new T$cC(),new T$cC(),new T$cC(),new T$cC(),new T$cC(),new T$cC(),new T$cC(),new T$cC()];},"_greenColor",function(){return this._greenColor=new T$lC(0,1,0,1);}]),T$E;}(),T$tC=function(T$n){function T$l(T$n){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,T$l.__super.call(this),this._localPosition=new T$cC(),this._localRotation=new T$_C(0,0,0,1),this._localScale=new T$cC(1,1,1),this._localRotationEuler=new T$cC(),this._localMatrix=new T$nC(),this._position=new T$cC(),this._rotation=new T$_C(0,0,0,1),this._scale=new T$cC(1,1,1),this._worldMatrix=new T$nC(),this._forward=new T$cC(),this._up=new T$cC(),this._right=new T$cC(),this._owner=T$n,this._childs=[];}T$x(T$l,"laya.d3.core.Transform3D",T$p);var T$C=T$l.prototype;return T$C._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)T$nC.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var T$n=T$l._tempVector30;T$cC.multiply(this.pivot,this._localScale,T$n);var T$C=T$l._tempVector31;T$cC.subtract(T$n,this.pivot,T$C);var T$_=T$l._tempVector32,T$E=this.localRotation;T$cC.transformQuat(T$n,T$E,T$_),T$cC.subtract(T$_,T$n,T$_);var T$y=T$l._tempVector33;T$cC.subtract(this._localPosition,T$C,T$y),T$cC.subtract(T$y,T$_,T$y),T$nC.createAffineTransformation(T$y,T$E,this._localScale,this._localMatrix);}},T$C._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var T$n=0,T$C=this._childs.length;T$n<T$C;T$n++)this._childs[T$n]._onWorldPositionRotationTransform();}},T$C._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var T$n=0,T$C=this._childs.length;T$n<T$C;T$n++)this._childs[T$n]._onWorldPositionScaleTransform();}},T$C._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var T$n=0,T$C=this._childs.length;T$n<T$C;T$n++)this._childs[T$n]._onWorldPositionTransform();}},T$C._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var T$n=0,T$C=this._childs.length;T$n<T$C;T$n++)this._childs[T$n]._onWorldPositionRotationTransform();}},T$C._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var T$n=0,T$C=this._childs.length;T$n<T$C;T$n++)this._childs[T$n]._onWorldPositionScaleTransform();}},T$C._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var T$n=0,T$C=this._childs.length;T$n<T$C;T$n++)this._childs[T$n]._onWorldTransform();}},T$C.translate=function(T$n,T$C){void 0===T$C&&(T$C=!0),T$C?(T$nC.createFromQuaternion(this.localRotation,T$l._tempMatrix0),T$cC.transformCoordinate(T$n,T$l._tempMatrix0,T$l._tempVector30),T$cC.add(this.localPosition,T$l._tempVector30,this._localPosition),this.localPosition=this._localPosition):(T$cC.add(this.position,T$n,this._position),this.position=this._position);},T$C.rotate=function(T$n,T$C,T$_){var T$E;void 0===T$C&&(T$C=!0),void 0===T$_&&(T$_=!0),T$E=T$_?T$n:(T$cC.scale(T$n,Math.PI/180,T$l._tempVector30),T$l._tempVector30),T$_C.createFromYawPitchRoll(T$E.y,T$E.x,T$E.z,T$l._tempQuaternion0),T$C?(T$_C.multiply(this._localRotation,T$l._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(T$_C.multiply(T$l._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation);},T$C.lookAt=function(T$n,T$C,T$_){void 0===T$_&&(T$_=!1);var T$E,T$y=T$n.elements;if(T$_){if(T$E=this._localPosition.elements,Math.abs(T$E[0]-T$y[0])<T$Kn.zeroTolerance&&Math.abs(T$E[1]-T$y[1])<T$Kn.zeroTolerance&&Math.abs(T$E[2]-T$y[2])<T$Kn.zeroTolerance)return;T$_C.lookAt(this._localPosition,T$n,T$C,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation;}else{var T$p=this.position;if(T$E=T$p.elements,Math.abs(T$E[0]-T$y[0])<T$Kn.zeroTolerance&&Math.abs(T$E[1]-T$y[1])<T$Kn.zeroTolerance&&Math.abs(T$E[2]-T$y[2])<T$Kn.zeroTolerance)return;T$_C.lookAt(T$p,T$n,T$C,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation;}},T$b(0,T$C,"_isFrontFaceInvert",function(){var T$n=this.scale,T$C=T$n.x<0;return T$n.y<0&&(T$C=!T$C),T$n.z<0&&(T$C=!T$C),T$C;}),T$b(0,T$C,"owner",function(){return this._owner;}),T$b(0,T$C,"localRotation",function(){if(this._localQuaternionUpdate){var T$n=this._localRotationEuler.elements;T$_C.createFromYawPitchRoll(T$n[1]/T$l._angleToRandin,T$n[0]/T$l._angleToRandin,T$n[2]/T$l._angleToRandin,this._localRotation);}return this._localRotation;},function(T$n){this._localRotation=T$n,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform();}),T$b(0,T$C,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?T$nC.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix;},function(T$n){null===this._parent?T$n.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),T$nC.multiply(this._localMatrix,T$n,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=T$n,this._worldUpdate=!1;}),T$b(0,T$C,"worldNeedUpdate",function(){return this._worldUpdate;}),T$b(0,T$C,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix;},function(T$n){this._localMatrix=T$n,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform();}),T$b(0,T$C,"dummy",function(){return this._dummy;},function(T$n){this._dummy!==T$n&&(this._dummy&&(this._dummy._entity=null),T$n&&(T$n._entity=this),this._dummy=T$n);}),T$b(0,T$C,"localPosition",function(){return this._localPosition;},function(T$n){this._localPosition=T$n,this._localUpdate=!0,this._onWorldPositionTransform();}),T$b(0,T$C,"position",function(){if(this._positionUpdate){if(null!=this._parent){var T$n=this._parent.position;T$cC.multiply(this._localPosition,this._parent.scale,T$l._tempVector30),T$cC.transformQuat(T$l._tempVector30,this._parent.rotation,T$l._tempVector30),T$cC.add(T$n,T$l._tempVector30,this._position);}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1;}return this._position;},function(T$n){if(null!=this._parent){T$cC.subtract(T$n,this._parent.position,this._localPosition);var T$C=this._parent.scale.elements,T$_=T$C[0],T$E=T$C[1],T$y=T$C[2];if(1!==T$_||1!==T$E||1!==T$y){var T$p=T$l._tempVector30,T$c=T$p.elements;T$c[0]=1/T$_,T$c[1]=1/T$E,T$c[2]=1/T$y,T$cC.multiply(this._localPosition,T$p,this._localPosition);}this._parent.rotation.invert(T$l._tempQuaternion0),T$cC.transformQuat(this._localPosition,T$l._tempQuaternion0,this._localPosition);}else T$n.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=T$n,this._positionUpdate=!1;}),T$b(0,T$C,"localScale",function(){return this._localScale;},function(T$n){this._localScale=T$n,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform();}),T$b(0,T$C,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(T$l._tempVector30);var T$n=T$l._tempVector30.elements,T$C=this._localRotationEuler.elements;T$C[0]=T$n[1]*T$l._angleToRandin,T$C[1]=T$n[0]*T$l._angleToRandin,T$C[2]=T$n[2]*T$l._angleToRandin;}return this._localRotationEuler;},function(T$n){this._localRotationEuler=T$n,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform();}),T$b(0,T$C,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?T$_C.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation;},function(T$n){null!=this._parent?(this._parent.rotation.invert(T$l._tempQuaternion0),T$_C.multiply(T$n,T$l._tempQuaternion0,this._localRotation)):T$n.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=T$n,this._rotationUpdate=!1;}),T$b(0,T$C,"scale",function(){return this._scaleUpdate&&(null!==this._parent?T$cC.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale;},function(T$n){if(null!==this._parent){var T$C=this._parent.scale.elements,T$_=T$l._tempVector30.elements;T$_[0]=1/T$C[0],T$_[1]=1/T$C[1],T$_[2]=1/T$C[2],T$cC.multiply(T$n,T$l._tempVector30,this._localScale);}else T$n.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=T$n,this._scaleUpdate=!1;}),T$b(0,T$C,"rotationEuler",null,function(T$n){T$_C.createFromYawPitchRoll(T$n.y,T$n.x,T$n.z,this._rotation),this.rotation=this._rotation;}),T$b(0,T$C,"forward",function(){var T$n=this.worldMatrix.elements;return this._forward.elements[0]=-T$n[8],this._forward.elements[1]=-T$n[9],this._forward.elements[2]=-T$n[10],this._forward;}),T$b(0,T$C,"up",function(){var T$n=this.worldMatrix.elements;return this._up.elements[0]=T$n[4],this._up.elements[1]=T$n[5],this._up.elements[2]=T$n[6],this._up;}),T$b(0,T$C,"right",function(){var T$n=this.worldMatrix.elements;return this._right.elements[0]=T$n[0],this._right.elements[1]=T$n[1],this._right.elements[2]=T$n[2],this._right;}),T$b(0,T$C,"parent",function(){return this._parent;},function(T$n){if(this._parent!==T$n){if(this._parent){var T$C=this._parent._childs,T$_=T$C.indexOf(this);T$C.splice(T$_,1);}T$n&&(T$n._childs.push(this),T$n&&this._onWorldTransform()),this._parent=T$n;}}),T$j(T$l,["_tempVector30",function(){return this._tempVector30=new T$cC();},"_tempVector31",function(){return this._tempVector31=new T$cC();},"_tempVector32",function(){return this._tempVector32=new T$cC();},"_tempVector33",function(){return this._tempVector33=new T$cC();},"_tempQuaternion0",function(){return this._tempQuaternion0=new T$_C();},"_tempMatrix0",function(){return this._tempMatrix0=new T$nC();},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI;}]),T$l;}(),T$TC=(function(T$n){function T$C(){this._rotation=0,this._matNeedUpdte=!1,T$C.__super.call(this),this._matrix=new T$nC(),this._offset=new T$pC(),this._tiling=new T$pC(1,1);}T$x(T$C,"laya.d3.core.TransformUV",T$p);var T$_=T$C.prototype;T$k.imps(T$_,{"laya.d3.core.IClone":!0}),T$_._updateMatrix=function(){T$C._tempOffsetV3.elements[0]=this._offset.x,T$C._tempOffsetV3.elements[1]=this._offset.y,T$_C.createFromYawPitchRoll(0,0,this._rotation,T$C._tempRotationQua),T$C._tempTitlingV3.elements[0]=this._tiling.x,T$C._tempTitlingV3.elements[1]=this._tiling.y,T$nC.createAffineTransformation(T$C._tempOffsetV3,T$C._tempRotationQua,T$C._tempTitlingV3,this._matrix);},T$_.cloneTo=function(T$n){T$n._matrix=this._matrix.clone(),T$n._offset=this._offset.clone(),T$n._rotation=this._rotation,T$n._tiling=this._tiling.clone();},T$_.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$b(0,T$_,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix;}),T$b(0,T$_,"tiling",function(){return this._tiling;},function(T$n){this._tiling=T$n,this._matNeedUpdte=!0;}),T$b(0,T$_,"offset",function(){return this._offset;},function(T$n){this._offset=T$n,this._matNeedUpdte=!0;}),T$b(0,T$_,"rotation",function(){return this._rotation;},function(T$n){this._rotation=T$n,this._matNeedUpdte=!0;}),T$j(T$C,["_tempOffsetV3",function(){return this._tempOffsetV3=new T$cC(0,0,0);},"_tempRotationQua",function(){return this._tempRotationQua=new T$_C();},"_tempTitlingV3",function(){return this._tempTitlingV3=new T$cC(1,1,1);}]);}(),function(T$_){function T$n(){this.x=NaN,this.y=NaN,this.z=NaN,T$n.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1;}T$x(T$n,"laya.d3.core.particleShuriKen.module.shape.BoxShape",T$_);var T$C=T$n.prototype;T$C._getShapeBoundBox=function(T$n){var T$C=T$n.min.elements;T$C[0]=.5*-this.x,T$C[1]=.5*-this.y,T$C[2]=.5*-this.z;var T$_=T$n.max.elements;T$_[0]=.5*this.x,T$_[1]=.5*this.y,T$_[2]=.5*this.z;},T$C._getSpeedBoundBox=function(T$n){var T$C=T$n.min.elements;T$C[0]=0,T$C[1]=0,T$C[2]=0;var T$_=T$n.max.elements;T$_[0]=0,T$_[1]=1,T$_[2]=0;},T$C.generatePositionAndDirection=function(T$n,T$C,T$_,T$E){var T$y=T$n.elements,T$p=T$C.elements;T$_?(T$_.seed=T$E[16],T$Q._randomPointInsideHalfUnitBox(T$n,T$_),T$E[16]=T$_.seed):T$Q._randomPointInsideHalfUnitBox(T$n),T$y[0]=this.x*T$y[0],T$y[1]=this.y*T$y[1],T$y[2]=this.z*T$y[2],this.randomDirection?T$_?(T$_.seed=T$E[17],T$Q._randomPointUnitSphere(T$C,T$_),T$E[17]=T$_.seed):T$Q._randomPointUnitSphere(T$C):(T$p[0]=0,T$p[1]=0,T$p[2]=1);},T$C.cloneTo=function(T$n){T$_.prototype.cloneTo.call(this,T$n);var T$C=T$n;T$C.x=this.x,T$C.y=this.y,T$C.z=this.z,T$C.randomDirection=this.randomDirection;};}(T$e),function(T$_){function T$c(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,T$c.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1;}T$x(T$c,"laya.d3.core.particleShuriKen.module.shape.CircleShape",T$_);var T$n=T$c.prototype;T$n._getShapeBoundBox=function(T$n){var T$C=T$n.min.elements;T$C[0]=T$C[2]=-this.radius,T$C[1]=0;var T$_=T$n.max.elements;T$_[0]=T$_[2]=this.radius,T$_[1]=0;},T$n._getSpeedBoundBox=function(T$n){var T$C=T$n.min.elements;T$C[0]=T$C[1]=-1,T$C[2]=0;var T$_=T$n.max.elements;T$_[0]=T$_[1]=1,T$_[2]=0;},T$n.generatePositionAndDirection=function(T$n,T$C,T$_,T$E){var T$y=T$n.elements,T$p=T$c._tempPositionPoint.elements;T$_?(T$_.seed=T$E[16],this.emitFromEdge?T$Q._randomPointUnitArcCircle(this.arc,T$c._tempPositionPoint,T$_):T$Q._randomPointInsideUnitArcCircle(this.arc,T$c._tempPositionPoint,T$_),T$E[16]=T$_.seed):this.emitFromEdge?T$Q._randomPointUnitArcCircle(this.arc,T$c._tempPositionPoint):T$Q._randomPointInsideUnitArcCircle(this.arc,T$c._tempPositionPoint),T$y[0]=-T$p[0],T$y[1]=T$p[1],T$y[2]=0,T$cC.scale(T$n,this.radius,T$n),this.randomDirection?T$_?(T$_.seed=T$E[17],T$Q._randomPointUnitSphere(T$C,T$_),T$E[17]=T$_.seed):T$Q._randomPointUnitSphere(T$C):T$n.cloneTo(T$C);},T$n.cloneTo=function(T$n){T$_.prototype.cloneTo.call(this,T$n);var T$C=T$n;T$C.radius=this.radius,T$C.arc=this.arc,T$C.emitFromEdge=this.emitFromEdge,T$C.randomDirection=this.randomDirection;},T$j(T$c,["_tempPositionPoint",function(){return this._tempPositionPoint=new T$pC();}]);}(T$e),function(T$_){function T$P(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,T$P.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1;}T$x(T$P,"laya.d3.core.particleShuriKen.module.shape.ConeShape",T$_);var T$n=T$P.prototype;T$n._getShapeBoundBox=function(T$n){var T$C=this.radius+this.length*Math.sin(this.angle),T$_=this.length*Math.cos(this.angle),T$E=T$n.min.elements;T$E[0]=T$E[1]=-T$C,T$E[2]=0;var T$y=T$n.max.elements;T$y[0]=T$y[1]=T$C,T$y[2]=T$_;},T$n._getSpeedBoundBox=function(T$n){var T$C=Math.sin(this.angle),T$_=T$n.min.elements;T$_[0]=T$_[1]=-T$C,T$_[2]=0;var T$E=T$n.max.elements;T$E[0]=T$_[1]=T$C,T$E[2]=1;},T$n.generatePositionAndDirection=function(T$n,T$C,T$_,T$E){var T$y,T$p=T$n.elements,T$c=T$C.elements,T$l=T$P._tempPositionPoint.elements,T$W=NaN,T$q=NaN,T$J=Math.cos(this.angle),T$j=Math.sin(this.angle);switch(this.emitType){case 0:T$_?(T$_.seed=T$E[16],T$Q._randomPointInsideUnitCircle(T$P._tempPositionPoint,T$_),T$E[16]=T$_.seed):T$Q._randomPointInsideUnitCircle(T$P._tempPositionPoint),T$W=T$l[0],T$q=T$l[1],T$p[0]=T$W*this.radius,T$p[1]=T$q*this.radius,T$p[2]=0,this.randomDirection?(T$_?(T$_.seed=T$E[17],T$Q._randomPointInsideUnitCircle(T$P._tempDirectionPoint,T$_),T$E[17]=T$_.seed):T$Q._randomPointInsideUnitCircle(T$P._tempDirectionPoint),T$y=T$P._tempDirectionPoint.elements,T$c[0]=T$y[0]*T$j,T$c[1]=T$y[1]*T$j):(T$c[0]=T$W*T$j,T$c[1]=T$q*T$j),T$c[2]=T$J;break;case 1:T$_?(T$_.seed=T$E[16],T$Q._randomPointUnitCircle(T$P._tempPositionPoint,T$_),T$E[16]=T$_.seed):T$Q._randomPointUnitCircle(T$P._tempPositionPoint),T$W=T$l[0],T$q=T$l[1],T$p[0]=T$W*this.radius,T$p[1]=T$q*this.radius,T$p[2]=0,this.randomDirection?(T$_?(T$_.seed=T$E[17],T$Q._randomPointInsideUnitCircle(T$P._tempDirectionPoint,T$_),T$E[17]=T$_.seed):T$Q._randomPointInsideUnitCircle(T$P._tempDirectionPoint),T$y=T$P._tempDirectionPoint.elements,T$c[0]=T$y[0]*T$j,T$c[1]=T$y[1]*T$j):(T$c[0]=T$W*T$j,T$c[1]=T$q*T$j),T$c[2]=T$J;break;case 2:T$_?(T$_.seed=T$E[16],T$Q._randomPointInsideUnitCircle(T$P._tempPositionPoint,T$_)):T$Q._randomPointInsideUnitCircle(T$P._tempPositionPoint),T$W=T$l[0],T$q=T$l[1],T$p[0]=T$W*this.radius,T$p[1]=T$q*this.radius,T$c[T$p[2]=0]=T$W*T$j,T$c[1]=T$q*T$j,T$c[2]=T$J,T$cC.normalize(T$C,T$C),T$_?(T$cC.scale(T$C,this.length*T$_.getFloat(),T$C),T$E[16]=T$_.seed):T$cC.scale(T$C,this.length*Math.random(),T$C),T$cC.add(T$n,T$C,T$n),this.randomDirection&&(T$_?(T$_.seed=T$E[17],T$Q._randomPointUnitSphere(T$C,T$_),T$E[17]=T$_.seed):T$Q._randomPointUnitSphere(T$C));break;case 3:T$_?(T$_.seed=T$E[16],T$Q._randomPointUnitCircle(T$P._tempPositionPoint,T$_)):T$Q._randomPointUnitCircle(T$P._tempPositionPoint),T$W=T$l[0],T$q=T$l[1],T$p[0]=T$W*this.radius,T$p[1]=T$q*this.radius,T$c[T$p[2]=0]=T$W*T$j,T$c[1]=T$q*T$j,T$c[2]=T$J,T$cC.normalize(T$C,T$C),T$_?(T$cC.scale(T$C,this.length*T$_.getFloat(),T$C),T$E[16]=T$_.seed):T$cC.scale(T$C,this.length*Math.random(),T$C),T$cC.add(T$n,T$C,T$n),this.randomDirection&&(T$_?(T$_.seed=T$E[17],T$Q._randomPointUnitSphere(T$C,T$_),T$E[17]=T$_.seed):T$Q._randomPointUnitSphere(T$C));break;default:throw new Error("ConeShape:emitType is invalid.");}},T$n.cloneTo=function(T$n){T$_.prototype.cloneTo.call(this,T$n);var T$C=T$n;T$C.angle=this.angle,T$C.radius=this.radius,T$C.length=this.length,T$C.emitType=this.emitType,T$C.randomDirection=this.randomDirection;},T$j(T$P,["_tempPositionPoint",function(){return this._tempPositionPoint=new T$pC();},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new T$pC();}]);}(T$e),function(T$_){function T$n(){this.radius=NaN,this.emitFromShell=!1,T$n.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1;}T$x(T$n,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",T$_);var T$C=T$n.prototype;T$C._getShapeBoundBox=function(T$n){var T$C=T$n.min.elements;T$C[0]=T$C[1]=T$C[2]=-this.radius;var T$_=T$n.max.elements;T$_[0]=T$_[1]=this.radius,T$_[2]=0;},T$C._getSpeedBoundBox=function(T$n){var T$C=T$n.min.elements;T$C[0]=T$C[1]=-1,T$C[2]=0;var T$_=T$n.max.elements;T$_[0]=T$_[1]=T$_[2]=1;},T$C.generatePositionAndDirection=function(T$n,T$C,T$_,T$E){var T$y=T$n.elements;T$_?(T$_.seed=T$E[16],this.emitFromShell?T$Q._randomPointUnitSphere(T$n,T$_):T$Q._randomPointInsideUnitSphere(T$n,T$_),T$E[16]=T$_.seed):this.emitFromShell?T$Q._randomPointUnitSphere(T$n):T$Q._randomPointInsideUnitSphere(T$n),T$cC.scale(T$n,this.radius,T$n);var T$p=T$y[2];T$p<0&&(T$y[2]=-1*T$p),this.randomDirection?T$_?(T$_.seed=T$E[17],T$Q._randomPointUnitSphere(T$C,T$_),T$E[17]=T$_.seed):T$Q._randomPointUnitSphere(T$C):T$n.cloneTo(T$C);},T$C.cloneTo=function(T$n){T$_.prototype.cloneTo.call(this,T$n);var T$C=T$n;T$C.radius=this.radius,T$C.emitFromShell=this.emitFromShell,T$C.randomDirection=this.randomDirection;};}(T$e),function(T$_){function T$n(){this.radius=NaN,this.emitFromShell=!1,T$n.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1;}T$x(T$n,"laya.d3.core.particleShuriKen.module.shape.SphereShape",T$_);var T$C=T$n.prototype;T$C._getShapeBoundBox=function(T$n){var T$C=T$n.min.elements;T$C[0]=T$C[1]=T$C[2]=-this.radius;var T$_=T$n.max.elements;T$_[0]=T$_[1]=T$_[2]=this.radius;},T$C._getSpeedBoundBox=function(T$n){var T$C=T$n.min.elements;T$C[0]=T$C[1]=T$C[2]=-1;var T$_=T$n.max.elements;T$_[0]=T$_[1]=T$_[2]=1;},T$C.generatePositionAndDirection=function(T$n,T$C,T$_,T$E){T$_?(T$_.seed=T$E[16],this.emitFromShell?T$Q._randomPointUnitSphere(T$n,T$_):T$Q._randomPointInsideUnitSphere(T$n,T$_),T$E[16]=T$_.seed):this.emitFromShell?T$Q._randomPointUnitSphere(T$n):T$Q._randomPointInsideUnitSphere(T$n),T$cC.scale(T$n,this.radius,T$n),this.randomDirection?T$_?(T$_.seed=T$E[17],T$Q._randomPointUnitSphere(T$C,T$_),T$E[17]=T$_.seed):T$Q._randomPointUnitSphere(T$C):T$n.cloneTo(T$C);},T$C.cloneTo=function(T$n){T$_.prototype.cloneTo.call(this,T$n);var T$C=T$n;T$C.radius=this.radius,T$C.emitFromShell=this.emitFromShell,T$C.randomDirection=this.randomDirection;};}(T$e),function(T$n){function T$C(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,T$C.__super.call(this);}return T$x(T$C,"laya.d3.core.render.SubMeshRenderElement",T$L),T$C;}()),T$YC=function(T$n){function T$m(T$n,T$C,T$_,T$E,T$y,T$p){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=T$n,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[T$xC.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[T$ZC.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[T$ZC.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[T$MC.SHADERDEFINE_ALPHATEST]="ALPHATEST";T$m.__super.call(this,T$n,T$C,T$_,null,{}),this._attributeMap=T$E;var T$c;for(T$c in T$y){var T$l=T$y[T$c];switch(T$l[1]){case 0:this._renderElementUniformMap[T$c]=T$l[0];break;case 1:this._materialUniformMap[T$c]=T$l[0];break;case 2:this._spriteUniformMap[T$c]=T$l[0];break;case 3:this._cameraUniformMap[T$c]=T$l[0];break;case 4:this._sceneUniformMap[T$c]=T$l[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.");}}}T$x(T$m,"laya.d3.shader.ShaderCompile3D",T$O);var T$C=T$m.prototype;return T$C._definesToNameDic=function(T$n,T$C){for(var T$_={},T$E=1,T$y=0;T$y<32&&!(T$n<(T$E=1<<T$y));T$y++)if(T$n&T$E){var T$p=T$C[T$E];T$p&&(T$_[T$p]="");}return T$_;},T$C.withCompile=function(T$n,T$C,T$_,T$E){var T$y,T$p,T$c;if(T$p=this.sharders[T$n]){if(T$c=T$p[T$C]){if(T$y=T$c[T$_])return T$y;}else T$c=T$p[T$C]=[];}else T$c=(T$p=this.sharders[T$n]=[])[T$C]=[];var T$l,T$W=this._definesToNameDic(T$n,T$m._globalInt2name),T$q=this._definesToNameDic(T$C,this._spriteInt2name),T$J=this._definesToNameDic(T$_,this._materialInt2name),T$j={},T$P="";if(T$W)for(T$l in T$W)T$P+="#define "+T$l+"\n",T$j[T$l]=!0;if(T$q)for(T$l in T$q)T$P+="#define "+T$l+"\n",T$j[T$l]=!0;if(T$J)for(T$l in T$J)T$P+="#define "+T$l+"\n",T$j[T$l]=!0;var T$x=T$$C.nameKey.getName(this._name)+" compile ("+T$n+","+T$C+","+T$_+")",T$b=this._VS.toscript(T$j,[]),T$r=this._PS.toscript(T$j,[]);T$V.now();if(T$y=T$$C.create(T$P+T$b.join("\n"),T$P+T$r.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,T$E,T$x),T$c[T$_]=T$y,laya.d3.shader.ShaderCompile3D.debugMode)T$V.now();return T$y;},T$C.precompileShaderWithShaderDefine=function(T$n,T$C,T$_){this.withCompile(T$n,T$C,T$_,!0);},T$C.addMaterialDefines=function(T$n){var T$C=T$n.defines;for(var T$_ in T$C){var T$E=T$C[T$_],T$y=parseInt(T$_);this._materialInt2name[T$y]=T$E,this._materialName2Int[T$E]=T$y;}},T$C.addSpriteDefines=function(T$n){var T$C=T$n.defines;for(var T$_ in T$C){var T$E=T$C[T$_],T$y=parseInt(T$_);this._spriteInt2name[T$y]=T$E,this._spriteName2Int[T$E]=T$y;}},T$C.getMaterialDefineByName=function(T$n){return this._materialName2Int[T$n];},T$C.registerMaterialDefine=function(T$n){var T$C=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[T$C]=T$n,this._materialName2Int[T$n]=T$C;},T$C.registerSpriteDefine=function(T$n){var T$C=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[T$C]=T$n,this._spriteName2Int[T$n]=T$C;},T$m._globalRegDefine=function(T$n,T$C){T$m._globalInt2name[T$C]=T$n;},T$m.add=function(T$n,T$C,T$_,T$E,T$y){return laya.d3.shader.ShaderCompile3D._preCompileShader[T$n]=new T$m(T$n,T$C,T$_,T$E,T$y,T$O.includes);},T$m.get=function(T$n){return laya.d3.shader.ShaderCompile3D._preCompileShader[T$$C.nameKey.getID(T$n)];},T$m._preCompileShader={},T$m._globalInt2name=[],T$m.debugMode=!1,T$m.SHADERDEFINE_HIGHPRECISION=1,T$m.SHADERDEFINE_FOG=4,T$m.SHADERDEFINE_DIRECTIONLIGHT=8,T$m.SHADERDEFINE_POINTLIGHT=16,T$m.SHADERDEFINE_SPOTLIGHT=32,T$m.SHADERDEFINE_UV0=64,T$m.SHADERDEFINE_COLOR=128,T$m.SHADERDEFINE_UV1=256,T$m.SAHDERDEFINE_DEPTHFOG=131072,T$m;}(),T$sC=function(T$n){function T$b(){T$b.__super.call(this);}T$x(T$b,"laya.d3.graphics.MeshSprite3DStaticBatchManager",T$En);var T$C=T$b.prototype;return T$C._getStaticBatch=function(T$n,T$C,T$_,T$E){var T$y,T$p;return T$p=T$n?T$n.id.toString()+T$_.id.toString()+T$C.id.toString()+T$E.toString():T$_.id.toString()+T$C.id.toString()+T$E.toString(),this._staticBatches[T$p]?T$y=this._staticBatches[T$p]:this._staticBatches[T$p]=T$y=new T$NC(T$p,this,T$n,T$C,T$_),T$y;},T$C._initStaticBatchs=function(T$n){var T$C,T$_;this._initBatchRenderElements.sort(T$b._sortPrepareStaticBatch);for(var T$E,T$y=!1,T$p=0,T$c=0,T$l=this._initBatchRenderElements.length;T$c<T$l;T$c++){var T$W,T$q=this._initBatchRenderElements[T$c],T$J=T$q.renderObj._getVertexBuffer(0);T$q._sprite3D;if(T$_===T$J.vertexDeclaration&&T$C===T$q._material){if(T$y)T$E._addCombineBatchRenderObjTest(T$q)?(T$W=T$q._staticBatch)!==T$E&&(T$W&&T$W._deleteCombineBatchRenderObj(T$q),T$E._addCombineBatchRenderObj(T$q)):(T$y=!1,T$p++);else{var T$j=this._initBatchRenderElements[T$c-1],T$P=T$j.renderObj,T$x=T$q.renderObj;T$y=!(65535<T$P._getVertexBuffer().vertexCount+T$x._getVertexBuffer().vertexCount)&&(T$E=this._getStaticBatch(T$n,T$_,T$C,T$p),(T$W=T$j._staticBatch)!==T$E&&(T$W&&T$W._deleteCombineBatchRenderObj(T$j),T$E._addCombineBatchRenderObj(T$j)),(T$W=T$q._staticBatch)!==T$E&&(T$W&&T$W._deleteCombineBatchRenderObj(T$q),T$E._addCombineBatchRenderObj(T$q)),!0);}}else T$y=!1,T$p=0;T$C=T$q._material,T$_=T$J.vertexDeclaration;}},T$b._sortPrepareStaticBatch=function(T$n,T$C){var T$_=T$n._render,T$E=T$C._render,T$y=T$_.lightmapIndex-T$E.lightmapIndex;if(0!=T$y)return T$y;var T$p=T$_.receiveShadow-T$E.receiveShadow;if(0!=T$p)return T$p;var T$c=T$n._mainSortID-T$C._mainSortID;return 0==T$c?T$n.renderObj.triangleCount-T$C.renderObj.triangleCount:T$c;},T$b;}(),T$NC=function(T$n){function T$p(T$n,T$C,T$_,T$E,T$y){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,T$p.__super.call(this,T$n,T$C,T$_),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=T$E,this._material=T$y;}T$x(T$p,"laya.d3.graphics.SubMeshStaticBatch",T$yn);var T$C=T$p.prototype;return T$C._compareBatchRenderElement=function(T$n,T$C){return T$n._batchIndexStart>T$C._batchIndexStart;},T$C._addCombineBatchRenderObjTest=function(T$n){var T$C=T$n.renderObj._vertexCount;return!(65535<(0<T$C?this._currentCombineVertexCount+T$C:this._currentCombineVertexCount+T$n.renderObj._getVertexBuffer().vertexCount));},T$C._addCombineBatchRenderObj=function(T$n){var T$C=T$n.renderObj,T$_=T$C._vertexCount;this._initBatchRenderElements.push(T$n),T$n._staticBatch=this,0<T$_?(this._currentCombineIndexCount+=T$C._indexCount,this._currentCombineVertexCount+=T$_):(this._currentCombineIndexCount=this._currentCombineIndexCount+T$C._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+T$C._getVertexBuffer().vertexCount),this._needFinishCombine=!0;},T$C._deleteCombineBatchRenderObj=function(T$n){var T$C=T$n.renderObj,T$_=this._initBatchRenderElements.indexOf(T$n);if(-1!==T$_){this._initBatchRenderElements.splice(T$_,1),T$n._staticBatch=null;var T$E=T$C._vertexCount;0<T$E?(this._currentCombineIndexCount=this._currentCombineIndexCount-T$C._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-T$E):(this._currentCombineIndexCount=this._currentCombineIndexCount-T$C._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-T$C._getVertexBuffer().vertexCount),this._needFinishCombine=!0;}},T$C._finishInit=function(){if(this._needFinishCombine){var T$n=0,T$C=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var T$_=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),T$E=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=T$eC.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=T$fC.create("ushort",this._currentCombineIndexCount,35044);for(var T$y=0,T$p=this._initBatchRenderElements.length;T$y<T$p;T$y++){var T$c=this._initBatchRenderElements[T$y],T$l=T$c.renderObj,T$W=T$l._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,T$c._sprite3D),T$q=T$l.getIndices(),T$J=T$c._sprite3D.transform._isFrontFaceInvert,T$j=T$n/(this._vertexDeclaration.vertexStride/4)-T$l._vertexStart,T$P=T$C,T$x=T$P+T$q.length;T$c._batchIndexStart=T$P,T$c._batchIndexEnd=T$x,T$E.set(T$q,T$C);var T$b=0;if(T$J)for(T$b=T$P;T$b<T$x;T$b+=3){T$E[T$b]=T$j+T$E[T$b];var T$r=T$E[T$b+1],T$m=T$E[T$b+2];T$E[T$b+1]=T$j+T$m,T$E[T$b+2]=T$j+T$r;}else for(T$b=T$P;T$b<T$x;T$b+=3)T$E[T$b]=T$j+T$E[T$b],T$E[T$b+1]=T$j+T$E[T$b+1],T$E[T$b+2]=T$j+T$E[T$b+2];T$C+=T$q.length,T$_.set(T$W,T$n),T$n+=T$W.length;}this._vertexBuffer.setData(T$_),this._indexBuffer.setData(T$E),this._needFinishCombine=!1;}},T$C._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new T$TC());},T$C._getRenderElement=function(T$n,T$C,T$_){for(var T$E,T$y,T$p=this._batchRenderElements.length,T$c=!0,T$l=0;T$l<T$p;T$l++){var T$W,T$q,T$J=(T$y=this._batchRenderElements[T$l])._sprite3D._render;if(0!==T$l&&(T$c=(T$W=(T$E=this._batchRenderElements[T$l-1])._sprite3D._render).lightmapIndex!==T$J.lightmapIndex||T$W.receiveShadow!==T$J.receiveShadow||T$E._batchIndexEnd!==T$y._batchIndexStart),T$c){(T$q=this._getCombineRenderElementFromPool()).renderObj=this,T$q._material=this._material,T$q._batchIndexStart=T$y._batchIndexStart,T$q._batchIndexEnd=T$y._batchIndexEnd;var T$j=T$J.lightmapIndex,T$P=T$j+1,T$x=this._batchOwnerIndices[T$P];T$x||(T$x=this._batchOwnerIndices[T$P]=[]);var T$b,T$r=T$x[T$y._render.receiveShadow?1:0];void 0===T$r?(T$x[T$J.receiveShadow?1:0]=this._batchOwners.length,(T$b=new T$hC(null,"StaticBatchMeshSprite3D"))._scene=T$C,T$b._transform=this._rootOwner?this._rootOwner._transform:null,T$b._render.lightmapIndex=T$j,T$b._render.receiveShadow=T$y._render.receiveShadow,this._batchOwners.push(T$b)):T$b=this._batchOwners[T$r],T$b._render._renderUpdate(T$_),T$q._sprite3D=T$b,T$n.push(T$q);}else T$q._batchIndexEnd=T$y._batchIndexEnd;}},T$C._beforeRender=function(T$n){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0;},T$C._render=function(T$n){var T$C=T$n.renderElement,T$_=T$C._batchIndexStart,T$E=T$C._batchIndexEnd-T$_;T$w.mainContext.drawElements(4,T$E,5123,2*T$_),T$Y.drawCall++,T$Y.trianglesFaces+=T$E/3;},T$C.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy();},T$C._getVertexBuffer=function(T$n){return void 0===T$n&&(T$n=0),this._vertexBuffer;},T$p;}(),T$SC=function(T$n){function T$C(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,T$C.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[];}T$x(T$C,"laya.d3.core.ComponentNode",T$q);var T$_=T$C.prototype;return T$_.addComponent=function(T$n){var T$C,T$_=this._componentsMap.indexOf(T$n);if(-1===T$_)T$C=[],this._componentsMap.push(T$n),this._typeComponentsIndices.push(T$C);else if(T$C=this._typeComponentsIndices[T$_],this._components[T$C[0]].isSingleton)throw new Error("无法单实例创建"+T$n+"组件，"+T$n+"组件已存在！");var T$E=T$y.getInstance(T$n);return T$C.push(this._components.length),this._components.push(T$E),T$E instanceof laya.d3.component.Script&&this._scripts.push(T$E),T$E._initialize(this),T$E;},T$_._removeComponent=function(T$n,T$C){var T$_=this._typeComponentsIndices[T$n],T$E=T$_[T$C],T$y=this._components[T$E];this._components.splice(T$E,1),T$y instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(T$y),1),T$_.splice(T$C,1),0===T$_.length&&(this._typeComponentsIndices.splice(T$n,1),this._componentsMap.splice(T$n,1));for(var T$p=0,T$c=this._componentsMap.length;T$p<T$c;T$p++)for(var T$l=(T$_=this._typeComponentsIndices[T$p]).length-1;0<=T$l;T$l--){var T$W=T$_[T$l];if(!(T$E<T$W))break;T$_[T$l]=--T$W;}T$y._destroy();},T$_.getComponentByType=function(T$n,T$C){void 0===T$C&&(T$C=0);var T$_=this._componentsMap.indexOf(T$n);return-1===T$_?null:this._components[this._typeComponentsIndices[T$_][T$C]];},T$_.getComponentsByType=function(T$n,T$C){var T$_=this._componentsMap.indexOf(T$n);if(-1!==T$_){var T$E=this._typeComponentsIndices[T$_],T$y=T$E.length;T$C.length=T$y;for(var T$p=0;T$p<T$y;T$p++)T$C[T$p]=this._components[T$E[T$p]];}else T$C.length=0;},T$_.getComponentByIndex=function(T$n){return this._components[T$n];},T$_.removeComponentByType=function(T$n,T$C){void 0===T$C&&(T$C=0);var T$_=this._componentsMap.indexOf(T$n);-1!==T$_&&this._removeComponent(T$_,T$C);},T$_.removeComponentsByType=function(T$n){var T$C=this._componentsMap.indexOf(T$n);if(-1!==T$C)for(var T$_=this._typeComponentsIndices[T$C],T$E=0,T$y=T$_.length;T$E<T$y;T$_.length<T$y?T$y--:T$E++)this._removeComponent(T$C,T$E);},T$_.removeAllComponent=function(){for(var T$n=0,T$C=this._componentsMap.length;T$n<T$C;this._componentsMap.length<T$C?T$C--:T$n++)this.removeComponentsByType(this._componentsMap[T$n]);},T$_._updateComponents=function(T$n){for(var T$C=0,T$_=this._components.length;T$C<T$_;T$C++){var T$E=this._components[T$C];!T$E.started&&(T$E._start(T$n),T$E.started=!0),T$E.enable&&T$E._update(T$n);}},T$_._lateUpdateComponents=function(T$n){for(var T$C=0;T$C<this._components.length;T$C++){var T$_=this._components[T$C];!T$_.started&&(T$_._start(T$n),T$_.started=!0),T$_.enable&&T$_._lateUpdate(T$n);}},T$_._preRenderUpdateComponents=function(T$n){for(var T$C=0;T$C<this._components.length;T$C++){var T$_=this._components[T$C];!T$_.started&&(T$_._start(T$n),T$_.started=!0),T$_.enable&&T$_._preRenderUpdate(T$n);}},T$_._postRenderUpdateComponents=function(T$n){for(var T$C=0;T$C<this._components.length;T$C++){var T$_=this._components[T$C];!T$_.started&&(T$_._start(T$n),T$_.started=!0),T$_.enable&&T$_._postRenderUpdate(T$n);}},T$C;}(),T$MC=function(T$E){function T$n(){T$n.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new T$PC(),this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new T$lC(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0;}T$x(T$n,"laya.d3.core.material.BaseMaterial",T$E);var T$C=T$n.prototype;return T$k.imps(T$C,{"laya.d3.core.IClone":!0}),T$C._addShaderDefine=function(T$n){this._shaderDefineValue|=T$n;},T$C._removeShaderDefine=function(T$n){this._shaderDefineValue&=~T$n;},T$C._addDisablePublicShaderDefine=function(T$n){this._disablePublicShaderDefine|=T$n;},T$C._removeDisablePublicShaderDefine=function(T$n){this._disablePublicShaderDefine&=~T$n;},T$C._setBuffer=function(T$n,T$C){this._shaderValues.setValue(T$n,T$C),this._values[T$n]=T$C;},T$C._getBuffer=function(T$n){return this._values[T$n];},T$C._setMatrix4x4=function(T$n,T$C){this._shaderValues.setValue(T$n,T$C?T$C.elements:null),this._values[T$n]=T$C;},T$C._getMatrix4x4=function(T$n){return this._values[T$n];},T$C._setInt=function(T$n,T$C){this._shaderValues.setValue(T$n,T$C),this._values[T$n]=T$C;},T$C._getInt=function(T$n){return this._values[T$n];},T$C._setNumber=function(T$n,T$C){this._shaderValues.setValue(T$n,T$C),this._values[T$n]=T$C;},T$C._getNumber=function(T$n){return this._values[T$n];},T$C._setBool=function(T$n,T$C){this._shaderValues.setValue(T$n,T$C),this._values[T$n]=T$C;},T$C._getBool=function(T$n){return this._values[T$n];},T$C._setVector2=function(T$n,T$C){this._shaderValues.setValue(T$n,T$C?T$C.elements:null),this._values[T$n]=T$C;},T$C._getVector2=function(T$n){return this._values[T$n];},T$C._setColor=function(T$n,T$C){this._shaderValues.setValue(T$n,T$C?T$C.elements:null),this._values[T$n]=T$C;},T$C._getColor=function(T$n){return this._values[T$n];},T$C._setTexture=function(T$n,T$C){var T$_=this._values[T$n];this._values[T$n]=T$C,this._shaderValues.setValue(T$n,T$C),0<this.referenceCount&&(T$_&&T$_._removeReference(),T$C&&T$C._addReference());},T$C._getTexture=function(T$n){return this._values[T$n];},T$C._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data);},T$C._getShader=function(T$n,T$C,T$_){var T$E=(T$n|T$C)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(T$E,T$_,this._shaderDefineValue),this._shader;},T$C._setRenderStateBlendDepth=function(){var T$n=T$w.mainContext;switch(T$B.setDepthMask(T$n,this.depthWrite),0===this.depthTest?T$B.setDepthTest(T$n,!1):(T$B.setDepthTest(T$n,!0),T$B.setDepthFunc(T$n,this.depthTest)),this.blend){case 0:T$B.setBlend(T$n,!1);break;case 1:T$B.setBlend(T$n,!0),T$B.setBlendFunc(T$n,this.srcBlend,this.dstBlend);break;case 2:T$B.setBlend(T$n,!0);}},T$C._setRenderStateFrontFace=function(T$n,T$C){var T$_=T$w.mainContext,T$E=0;switch(this.cull){case 0:T$B.setCullFace(T$_,!1);break;case 1:T$B.setCullFace(T$_,!0),T$E=T$n?T$C&&T$C._isFrontFaceInvert?2305:2304:T$C&&T$C._isFrontFaceInvert?2304:2305,T$B.setFrontFace(T$_,T$E);break;case 2:T$B.setCullFace(T$_,!0),T$E=T$n?T$C&&T$C._isFrontFaceInvert?2304:2305:T$C&&T$C._isFrontFaceInvert?2305:2304,T$B.setFrontFace(T$_,T$E);}},T$C.onAsynLoaded=function(T$n,T$C,T$_){var T$E=T$C[0],T$y=T$C[1];switch(T$E.version){case"LAYAMATERIAL:01":var T$p=0,T$c=0,T$l=T$E.props;for(var T$W in T$l)switch(T$W){case"vectors":var T$q=T$l[T$W];for(T$p=0,T$c=T$q.length;T$p<T$c;T$p++){var T$J=T$q[T$p],T$j=T$J.value;switch(T$j.length){case 2:this[T$J.name]=new T$pC(T$j[0],T$j[1]);break;case 3:this[T$J.name]=new T$cC(T$j[0],T$j[1],T$j[2]);break;case 4:this[T$J.name]=new T$lC(T$j[0],T$j[1],T$j[2],T$j[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.");}}break;case"textures":var T$P=T$l[T$W];for(T$p=0,T$c=T$P.length;T$p<T$c;T$p++){var T$x=T$P[T$p],T$b=T$x.path;T$b&&(this[T$x.name]=T$d.getRes(T$y[T$b]));}break;case"defines":var T$r=T$l[T$W];for(T$p=0,T$c=T$r.length;T$p<T$c;T$p++){var T$m=this._shaderCompile.getMaterialDefineByName(T$r[T$p]);this._addShaderDefine(T$m);}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[T$W]=T$l[T$W];break;case"renderQueue":switch(T$l[T$W]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3;}break;default:this[T$W]=T$l[T$W];}break;case"LAYAMATERIAL:02":for(T$W in T$l=T$E.props)switch(T$W){case"vectors":for(T$p=0,T$c=(T$q=T$l[T$W]).length;T$p<T$c;T$p++)switch((T$j=(T$J=T$q[T$p]).value).length){case 2:this[T$J.name]=new T$pC(T$j[0],T$j[1]);break;case 3:this[T$J.name]=new T$cC(T$j[0],T$j[1],T$j[2]);break;case 4:this[T$J.name]=new T$lC(T$j[0],T$j[1],T$j[2],T$j[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.");}break;case"textures":for(T$p=0,T$c=(T$P=T$l[T$W]).length;T$p<T$c;T$p++)(T$b=(T$x=T$P[T$p]).path)&&(this[T$x.name]=T$d.getRes(T$y[T$b]));break;case"defines":for(T$p=0,T$c=(T$r=T$l[T$W]).length;T$p<T$c;T$p++)T$m=this._shaderCompile.getMaterialDefineByName(T$r[T$p]),this._addShaderDefine(T$m);break;default:this[T$W]=T$l[T$W];}break;default:throw new Error("BaseMaterial:unkonwn version.");}this._endLoaded();},T$C._addReference=function(){T$E.prototype._addReference.call(this);for(var T$n=0,T$C=this._values.length;T$n<T$C;T$n++){var T$_=this._values[T$n];T$_&&T$_ instanceof laya.d3.resource.BaseTexture&&T$_._addReference();}},T$C._removeReference=function(){T$E.prototype._removeReference.call(this);for(var T$n=0,T$C=this._values.length;T$n<T$C;T$n++){var T$_=this._values[T$n];T$_&&T$_ instanceof laya.d3.resource.BaseTexture&&T$_._removeReference();}},T$C.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null;},T$C.setShaderName=function(T$n){var T$C=T$$C.nameKey.getID(T$n);if(-1===T$C)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=T$YC._preCompileShader[T$C];},T$C.cloneTo=function(T$n){var T$C=T$n;T$C.name=this.name,T$C.cull=this.cull,T$C.blend=this.blend,T$C.srcBlend=this.srcBlend,T$C.dstBlend=this.dstBlend,T$C.srcBlendRGB=this.srcBlendRGB,T$C.dstBlendRGB=this.dstBlendRGB,T$C.srcBlendAlpha=this.srcBlendAlpha,T$C.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(T$C.blendConstColor),T$C.blendEquation=this.blendEquation,T$C.blendEquationRGB=this.blendEquationRGB,T$C.blendEquationAlpha=this.blendEquationAlpha,T$C.depthTest=this.depthTest,T$C.depthWrite=this.depthWrite,T$C.renderQueue=this.renderQueue,T$C._shader=this._shader,T$C._disablePublicShaderDefine=this._disablePublicShaderDefine,T$C._shaderDefineValue=this._shaderDefineValue;var T$_,T$E=0,T$y=T$C._shaderValues;T$C._shaderValues.data.length=this._shaderValues.data.length;var T$p=this._values.length,T$c=T$C._values;for(T$E=0,T$_=T$c.length=T$p;T$E<T$_;T$E++){var T$l=this._values[T$E];if(T$l)if("number"==typeof T$l)T$c[T$E]=T$l,T$y.data[T$E]=T$l;else if("number"==typeof T$l&&Math.floor(T$l)==T$l)T$c[T$E]=T$l,T$y.data[T$E]=T$l;else if("boolean"==typeof T$l)T$c[T$E]=T$l,T$y.data[T$E]=T$l;else if(T$l instanceof laya.d3.math.Vector2){var T$W=T$c[T$E]||(T$c[T$E]=new T$pC());T$l.cloneTo(T$W),T$y.data[T$E]=T$W.elements;}else if(T$l instanceof laya.d3.math.Vector3){var T$q=T$c[T$E]||(T$c[T$E]=new T$cC());T$l.cloneTo(T$q),T$y.data[T$E]=T$q.elements;}else if(T$l instanceof laya.d3.math.Vector4){var T$J=T$c[T$E]||(T$c[T$E]=new T$lC());T$l.cloneTo(T$J),T$y.data[T$E]=T$J.elements;}else if(T$l instanceof laya.d3.math.Matrix4x4){var T$j=T$c[T$E]||(T$c[T$E]=new T$nC());T$l.cloneTo(T$j),T$y.data[T$E]=T$j.elements;}else T$l instanceof laya.d3.resource.BaseTexture&&(T$c[T$E]=T$l,T$y.data[T$E]=T$l);}},T$C.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$b(0,T$C,"alphaTestValue",function(){return this._getNumber(0);},function(T$n){this._setNumber(0,T$n);}),T$b(0,T$C,"alphaTest",function(){return this._alphaTest;},function(T$n){(this._alphaTest=T$n)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST);}),T$n.__init__=function(){T$n.SHADERDEFINE_ALPHATEST=T$n.shaderDefines.registerDefine("ALPHATEST");},T$n.RENDERQUEUE_OPAQUE=2e3,T$n.RENDERQUEUE_ALPHATEST=2450,T$n.RENDERQUEUE_TRANSPARENT=3e3,T$n.CULL_NONE=0,T$n.CULL_FRONT=1,T$n.CULL_BACK=2,T$n.BLEND_DISABLE=0,T$n.BLEND_ENABLE_ALL=1,T$n.BLEND_ENABLE_SEPERATE=2,T$n.BLENDPARAM_ZERO=0,T$n.BLENDPARAM_ONE=1,T$n.BLENDPARAM_SRC_COLOR=768,T$n.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,T$n.BLENDPARAM_DST_COLOR=774,T$n.BLENDPARAM_ONE_MINUS_DST_COLOR=775,T$n.BLENDPARAM_SRC_ALPHA=770,T$n.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,T$n.BLENDPARAM_DST_ALPHA=772,T$n.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,T$n.BLENDPARAM_SRC_ALPHA_SATURATE=776,T$n.BLENDEQUATION_ADD=0,T$n.BLENDEQUATION_SUBTRACT=1,T$n.BLENDEQUATION_REVERSE_SUBTRACT=2,T$n.DEPTHTEST_OFF=0,T$n.DEPTHTEST_NEVER=512,T$n.DEPTHTEST_LESS=513,T$n.DEPTHTEST_EQUAL=514,T$n.DEPTHTEST_LEQUAL=515,T$n.DEPTHTEST_GREATER=516,T$n.DEPTHTEST_NOTEQUAL=517,T$n.DEPTHTEST_GEQUAL=518,T$n.DEPTHTEST_ALWAYS=519,T$n.SHADERDEFINE_ALPHATEST=1,T$n.ALPHATESTVALUE=0,T$j(T$n,["shaderDefines",function(){return this.shaderDefines=new T$JC();}]),T$n;}(T$m),T$wC=function(T$n){function T$C(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,T$C.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1;}T$x(T$C,"laya.d3.resource.BaseTexture",T$m);var T$_=T$C.prototype;return T$b(0,T$_,"width",function(){return this._width;}),T$b(0,T$_,"repeat",function(){return this._repeat;},function(T$n){if(this._repeat!==T$n&&(this._repeat=T$n,this._source)){var T$C=T$w.mainContext;T$B.bindTexture(T$C,this._type,this._source),T$A.isPOT(this._width,this._height)&&this._repeat?(T$C.texParameteri(this._type,10242,10497),T$C.texParameteri(this._type,10243,10497)):(T$C.texParameteri(this._type,10242,33071),T$C.texParameteri(this._type,10243,33071));}}),T$b(0,T$_,"height",function(){return this._height;}),T$b(0,T$_,"magFifter",function(){return this._magFifter;},function(T$n){(this._magFifter=T$n)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(T$n);}),T$b(0,T$_,"wrapModeV",function(){return this._wrapModeV;}),T$b(0,T$_,"size",function(){return this._size;}),T$b(0,T$_,"wrapModeU",function(){return this._wrapModeU;}),T$b(0,T$_,"mipmap",function(){return this._mipmap;},function(T$n){this._mipmap=T$n,this._mipmap!=T$n&&this._conchTexture&&this._conchTexture.setMipMap(T$n);}),T$b(0,T$_,"minFifter",function(){return this._minFifter;},function(T$n){this._minFifter=T$n,this._minFifter!=T$n&&this._conchTexture&&this._conchTexture.setMinFifter(T$n);}),T$b(0,T$_,"format",function(){return this._format;}),T$b(0,T$_,"source",function(){return this.activeResource(),this._source;}),T$b(0,T$_,"defaulteTexture",function(){return T$oC.grayTexture;}),T$C.WARPMODE_REPEAT=0,T$C.WARPMODE_CLAMP=1,T$C;}(),T$BC=function(T$n){function T$C(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,T$C.__super.call(this),this._boundingBoxCorners=T$E(8,null);}T$x(T$C,"laya.d3.resource.models.BaseMesh",T$m);var T$_=T$C.prototype;return T$_._getPositions=function(){throw new Error("未Override,请重载该属性！");},T$_._generateBoundingObject=function(){this._boundingSphere=new T$Un(new T$cC(),0),T$Un.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new T$Rn(new T$cC(),new T$cC()),T$Rn.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners);},T$_.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！");},T$_.getRenderElement=function(T$n){throw new Error("未Override,请重载该属性！");},T$b(0,T$_,"subMeshCount",function(){return this._subMeshCount;}),T$b(0,T$_,"boundingBox",function(){return this._boundingBox;}),T$b(0,T$_,"boundingBoxCorners",function(){return this._boundingBoxCorners;}),T$b(0,T$_,"boundingSphere",function(){return this._boundingSphere;}),T$C;}(),T$VC=(function(T$n){function T$C(){T$C.__super.call(this);}T$x(T$C,"laya.d3.component.Script",T$OC);var T$_=T$C.prototype;T$_.onTriggerEnter=function(T$n){},T$_.onTriggerExit=function(T$n){},T$_.onTriggerStay=function(T$n){},T$b(0,T$_,"isSingleton",function(){return T$C._isSingleton;}),T$C._isSingleton=!1;}(),function(T$n){function T$C(T$n){this._owner=null,this._sharedMesh=null,T$C.__super.call(this),this._owner=T$n;}T$x(T$C,"laya.d3.core.MeshFilter",T$n);var T$_=T$C.prototype;return T$_._sharedMeshLoaded=function(){this.event("loaded");},T$_._destroy=function(){T$n.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null);},T$b(0,T$_,"sharedMesh",function(){return this._sharedMesh;},function(T$n){var T$C=this._sharedMesh;T$C&&T$C._removeReference(),(this._sharedMesh=T$n)._addReference(),this.event("meshchanged",[this,T$C,T$n]),T$n.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded);}),T$b(0,T$_,"_isAsyncLoaded",function(){return this._sharedMesh.loaded;}),T$b(0,T$_,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners;}),T$b(0,T$_,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere;}),T$b(0,T$_,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox;}),T$C;}(T$AC)),T$gC=function(T$n){function T$C(T$n){T$C.__super.call(this,T$n),T$n.meshFilter.on("meshchanged",this,this._onMeshChanged);}T$x(T$C,"laya.d3.core.MeshRender",T$kC);var T$_=T$C.prototype;return T$_._onMeshChanged=function(T$n,T$C,T$_){T$_.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:T$_.once("loaded",this,this._onMeshLoaed);},T$_._onMeshLoaed=function(T$n,T$C){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0;},T$_._calculateBoundingSphereByInitSphere=function(T$n){var T$C=NaN,T$_=this._owner.transform,T$E=T$_.scale.elements,T$y=Math.abs(T$E[0]),T$p=Math.abs(T$E[1]),T$c=Math.abs(T$E[2]);T$C=T$p<=T$y&&T$c<=T$y?T$y:T$c<=T$p?T$p:T$c,T$cC.transformCoordinate(T$n.center,T$_.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=T$n.radius*T$C;},T$_._calculateBoundBoxByInitCorners=function(T$n){for(var T$C=this._owner.transform.worldMatrix,T$_=0;T$_<8;T$_++)T$cC.transformCoordinate(T$n[T$_],T$C,T$kC._tempBoundBoxCorners[T$_]);T$Rn.createfromPoints(T$kC._tempBoundBoxCorners,this._boundingBox);},T$_._calculateBoundingSphere=function(){var T$n=this._owner.meshFilter.sharedMesh;null==T$n||null==T$n.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(T$n.boundingSphere);},T$_._calculateBoundingBox=function(){var T$n=this._owner.meshFilter.sharedMesh;null==T$n||null==T$n.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(T$n.boundingBoxCorners);},T$_._renderUpdate=function(T$n){var T$C=this._owner.transform;if(T$C){this._setShaderValueMatrix4x4(0,T$C.worldMatrix);var T$_=this._owner.getProjectionViewWorldMatrix(T$n);this._setShaderValueMatrix4x4(1,T$_);}else this._setShaderValueMatrix4x4(0,T$nC.DEFAULT),this._setShaderValueMatrix4x4(1,T$n);return T$dC.debugMode&&this._renderRenderableBoundBox(),!0;},T$C;}(),T$HC=function(T$C){function T$E(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,T$E.__super.call(this),this._renderState=new T$v(),this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new T$PC(),this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new T$Cn(),this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new T$cC(.7,.7,.7),this.ambientColor=new T$cC(.212,.227,.259),T$w.shaderHighPrecision&&this.addShaderDefine(T$YC.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[];}T$x(T$E,"laya.d3.core.scene.Scene",T$C);var T$n=T$E.prototype;return T$k.imps(T$n,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),T$n._setUrl=function(T$n){this._url=T$n;},T$n._getGroup=function(){return this._group;},T$n._setGroup=function(T$n){this._group=T$n;},T$n._display=function(){T$k.stage._scenes.push(this),T$k.stage._scenes.sort(T$E._sortScenes);for(var T$n=0,T$C=this._childs.length;T$n<T$C;T$n++){var T$_=this._childs[T$n];T$_.active&&T$_._activeHierarchy();}},T$n._unDisplay=function(){var T$n=T$k.stage._scenes;T$n.splice(T$n.indexOf(this),1);for(var T$C=0,T$_=this._childs.length;T$C<T$_;T$C++){var T$E=this._childs[T$C];T$E.active&&T$E._inActiveHierarchy();}},T$n._addChild3D=function(T$n){T$n.transform._onWorldTransform(),T$n._setBelongScene(this),this.displayedInStage&&T$n.active&&T$n._activeHierarchy();},T$n._removeChild3D=function(T$n){T$n.transform.parent=null,this.displayedInStage&&T$n.active&&T$n._inActiveHierarchy(),T$n._setUnBelongScene();},T$n.initOctree=function(T$n,T$C,T$_,T$E,T$y){void 0===T$y&&(T$y=6),this.treeSize=new T$cC(T$n,T$C,T$_),this.treeLevel=T$y,this.treeRoot=new T$R(this,0),this.treeRoot.init(T$E,this.treeSize);},T$n._prepareUpdateToRenderState=function(T$n,T$C){T$C.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,T$C.scene=this;},T$n._prepareSceneToRender=function(T$n){var T$C=this._lights.length;if(0<T$C)for(var T$_=0,T$E=0;T$E<T$C&&!(this._lights[T$E]._prepareToScene(T$n)&&++T$_>=this._enableLightCount);T$E++);},T$n._updateChilds=function(T$n){for(var T$C=0,T$_=this._childs.length;T$C<T$_;++T$C)this._childs[T$C]._update(T$n);},T$n._preRenderScene=function(T$n,T$C,T$_){var T$E,T$y=T$C._viewMatrix,T$p=T$C._projectionMatrix,T$c=T$C._projectionViewMatrix,T$l=0,T$W=T$C.camera;for(T$W.useOcclusionCulling?this.treeRoot?T$_n.renderObjectCullingOctree(T$_,this,T$W,T$y,T$p,T$c):T$_n.renderObjectCulling(T$_,this,T$W,T$y,T$p,T$c):T$_n.renderObjectCullingNoBoundFrustum(this,T$W,T$y,T$p,T$c),T$l=0,T$E=this._quenes.length;T$l<T$E;T$l++)this._quenes[T$l]&&this._quenes[T$l]._preRender(T$C);},T$n._clear=function(T$n,T$C){var T$_=T$C._viewport,T$E=T$C.camera,T$y=T$_.x,T$p=T$E.renderTargetSize.height-T$_.y-T$_.height,T$c=T$_.width,T$l=T$_.height;T$n.viewport(T$y,T$p,T$c,T$l);var T$W=256,T$q=T$E.renderTarget;switch(T$E.clearFlag){case 0:var T$J=T$E.clearColor;if(T$J){T$n.enable(3089),T$n.scissor(T$y,T$p,T$c,T$l);var T$j=T$J.elements;T$n.clearColor(T$j[0],T$j[1],T$j[2],T$j[3]),T$W|=16384;}if(T$q)switch(T$J||(T$W=16384),T$q.depthStencilFormat){case 33189:T$W|=256;break;case 36168:T$W|=1024;break;case 34041:T$W|=256,T$W|=1024;}T$n.clear(T$W),T$J&&T$n.disable(3089);break;case 1:case 2:if(T$q)switch(T$W=16384,T$q.depthStencilFormat){case 33189:T$W|=256;break;case 36168:T$W|=1024;break;case 34041:T$W|=256,T$W|=1024;}T$n.clear(T$W);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.");}},T$n._renderScene=function(T$n,T$C){var T$_,T$E,T$y=T$C.camera,T$p=0;for(T$p=0;T$p<2;T$p++)(T$E=this._quenes[T$p])&&(T$y.renderTarget?T$E._render(T$C,!0):T$E._render(T$C,!1));if(1===T$y.clearFlag){var T$c=T$y.sky;T$c&&(T$B.setCullFace(T$n,!1),T$B.setDepthFunc(T$n,515),T$B.setDepthMask(T$n,!1),T$c._render(T$C),T$B.setDepthFunc(T$n,513),T$B.setDepthMask(T$n,!0));}for(T$p=2,T$_=this._quenes.length;T$p<T$_;T$p++)(T$E=this._quenes[T$p])&&(T$E._sortAlpha(T$C.camera.transform.position),T$y.renderTarget?T$E._render(T$C,!0):T$E._render(T$C,!1));},T$n._set3DRenderConfig=function(T$n){T$n.disable(3042),T$B._blend=!1,T$n.blendFunc(770,771),T$B._sFactor=770,T$B._dFactor=771,T$n.disable(2929),T$B._depthTest=!1,T$n.enable(2884),T$B._cullFace=!0,T$n.depthMask(1),T$B._depthMask=!0,T$n.frontFace(2304),T$B._frontFace=2304;},T$n._set2DRenderConfig=function(T$n){T$B.setBlend(T$n,!0),T$B.setBlendFunc(T$n,1,771),T$B.setDepthTest(T$n,!1),T$B.setCullFace(T$n,!1),T$B.setDepthMask(T$n,!0),T$B.setFrontFace(T$n,2305),T$n.viewport(0,0,T$J.width,T$J.height);},T$n._parseCustomProps=function(T$n,T$C,T$_,T$E){var T$y=T$E.customProps.lightmaps,T$p=T$y.length,T$c=this._lightmaps;T$c.length=T$p;for(var T$l=0;T$l<T$p;T$l++)T$c[T$l]=T$d.getRes(T$C[T$y[T$l].replace(".exr",".png")]);this.setlightmaps(T$c);var T$W=T$E.customProps.ambientColor;T$W&&(this.ambientColor=new T$cC(T$W[0],T$W[1],T$W[2]));var T$q=T$E.customProps.fogColor;T$q&&(this.fogColor=new T$cC(T$q[0],T$q[1],T$q[2]));},T$n._addLight=function(T$n){this._lights.indexOf(T$n)<0&&this._lights.push(T$n);},T$n._removeLight=function(T$n){var T$C=this._lights.indexOf(T$n);0<=T$C&&this._lights.splice(T$C,1);},T$n._updateScene=function(){var T$n=this._renderState;this._prepareUpdateToRenderState(T$w.mainContext,T$n),this._updateComponents(T$n),this._updateChilds(T$n),this._lateUpdateComponents(T$n),this._time+=T$n.elapsedTime/1e3,this._shaderValues.setValue(22,this._time);},T$n._updateSceneConch=function(){var T$n=this._renderState;this._prepareUpdateToRenderState(T$w.mainContext,T$n),this._updateComponents(T$n),this._lateUpdateComponents(T$n),this._prepareSceneToRender(T$n);for(var T$C=0,T$_=this._cameraPool.length;T$C<T$_;T$C++){var T$E=this._cameraPool[T$C];(T$n.camera=T$E)._prepareCameraToRender();}},T$n._preRenderShadow=function(T$n,T$C,T$_,T$E,T$y){this.treeRoot?T$_n.renderShadowObjectCullingOctree(this,T$C,T$_,T$E,T$y):T$_n.renderShadowObjectCulling(this,T$C,T$_,T$E,T$y);for(var T$p=0,T$c=T$_.length;T$p<T$c;T$p++)T$_[T$p]&&T$_[T$p]._preRender(T$n);},T$n._renderShadowMap=function(T$n,T$C,T$_){var T$E=this.parallelSplitShadowMaps[0];T$E._calcAllLightCameraInfo(T$_);var T$y,T$p,T$c,T$l=T$E.PSSMNum;if(this._preRenderShadow(T$C,T$E._lightCulling,T$E._shadowQuenes,T$E._lightVPMatrix[0],T$l),this.addShaderDefine(T$xC.SHADERDEFINE_CAST_SHADOW),1<T$l)for(var T$W=0;T$W<T$l;T$W++)T$y=T$E.getRenderTarget(T$W+1),T$E.beginRenderTarget(T$W+1),T$n.clearColor(1,1,1,1),T$n.clear(16640),T$n.viewport(0,0,T$y.width,T$y.height),T$C.camera=T$c=T$E.getLightCamera(T$W),T$c._prepareCameraToRender(),T$c._prepareCameraViewProject(T$c.viewMatrix,T$c.projectionMatrix),T$C._projectionViewMatrix=T$E._lightVPMatrix[T$W+1],(T$p=T$E._shadowQuenes[T$W])._preRender(T$C),T$p._renderShadow(T$C,!1),T$E.endRenderTarget(T$W+1);else T$y=T$E.getRenderTarget(1),T$E.beginRenderTarget(1),T$n.clearColor(1,1,1,1),T$n.clear(16640),T$n.viewport(0,0,T$y.width,T$y.height),T$C.camera=T$c=T$E.getLightCamera(0),T$c._prepareCameraToRender(),T$c._prepareCameraViewProject(T$c.viewMatrix,T$c.projectionMatrix),T$C._projectionViewMatrix=T$E._lightVPMatrix[0],(T$p=T$E._shadowQuenes[0])._preRender(T$C),T$p._renderShadow(T$C,!0),T$E.endRenderTarget(1);this.removeShaderDefine(T$xC.SHADERDEFINE_CAST_SHADOW);},T$n.addTreeNode=function(T$n){this.treeRoot.addTreeNode(T$n);},T$n.removeTreeNode=function(T$n){this.treeSize&&T$n._treeNode&&T$n._treeNode.removeObject(T$n);},T$n.setlightmaps=function(T$n){this._lightmaps=T$n;for(var T$C=0,T$_=this._renderableSprite3Ds.length;T$C<T$_;T$C++)this._renderableSprite3Ds[T$C]._render._applyLightMapParams();},T$n.getlightmaps=function(){return this._lightmaps;},T$n.addChildAt=function(T$n,T$C){if(!(T$n instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(T$n&&T$n.__className));if(!T$n||this.destroyed||T$n===this)return T$n;if(T$n.zOrder&&this._set$P("hasZorder",!0),0<=T$C&&T$C<=this._childs.length){if(T$n._parent===this){var T$_=this.getChildIndex(T$n);this._childs.splice(T$_,1),this._childs.splice(T$C,0,T$n),this.conchModel&&(this.conchModel.removeChild(T$n.conchModel),this.conchModel.addChildAt(T$n.conchModel,T$C)),this._childChanged();}else T$n.parent&&T$n.parent.removeChild(T$n),this._childs===T$q.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(T$C,0,T$n),this.conchModel&&this.conchModel.addChildAt(T$n.conchModel,T$C),(T$n.parent=this)._addChild3D(T$n);return T$n;}throw new Error("appendChildAt:The index is out of bounds");},T$n.addChild=function(T$n){if(!(T$n instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!T$n||this.destroyed||T$n===this)return T$n;if(T$n.zOrder&&this._set$P("hasZorder",!0),T$n._parent===this){var T$C=this.getChildIndex(T$n);T$C!==this._childs.length-1&&(this._childs.splice(T$C,1),this._childs.push(T$n),this.conchModel&&(this.conchModel.removeChild(T$n.conchModel),this.conchModel.addChildAt(T$n.conchModel,this._childs.length-1)),this._childChanged());}else T$n.parent&&T$n.parent.removeChild(T$n),this._childs===T$q.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(T$n),this.conchModel&&this.conchModel.addChildAt(T$n.conchModel,this._childs.length-1),(T$n.parent=this)._childChanged(),this._addChild3D(T$n);return T$n;},T$n.removeChildAt=function(T$n){var T$C=this.getChildAt(T$n);return T$C&&(this._removeChild3D(T$C),this._childs.splice(T$n,1),this.conchModel&&this.conchModel.removeChild(T$C.conchModel),T$C.parent=null),T$C;},T$n.removeChildren=function(T$n,T$C){if(void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=2147483647),this._childs&&0<this._childs.length){var T$_=this._childs;if(0===T$n&&T$p<=T$C){var T$E=T$_;this._childs=T$q.ARRAY_EMPTY;}else T$E=T$_.splice(T$n,T$C-T$n);for(var T$y=0,T$p=T$E.length;T$y<T$p;T$y++)this._removeChild3D(T$E[T$y]),T$E[T$y].parent=null,this.conchModel&&this.conchModel.removeChild(T$E[T$y].conchModel);}return this;},T$n.addFrustumCullingObject=function(T$n){this.treeRoot?this.addTreeNode(T$n):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(T$n):this._cullingRenders[this._cullingRendersLength]=T$n,T$n._indexInSceneFrustumCullingObjects=this._cullingRendersLength++);},T$n.removeFrustumCullingObject=function(T$n){if(this.treeRoot)this.removeTreeNode(T$n);else{this._cullingRendersLength--;var T$C=T$n._indexInSceneFrustumCullingObjects;if(T$C!==this._cullingRendersLength){var T$_=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[T$C]=T$_)._indexInSceneFrustumCullingObjects=T$C,T$n._indexInSceneFrustumCullingObjects=-1;}}},T$n.getRenderQueue=function(T$n){return T$n<3e3?this._quenes[1]||(this._quenes[1]=new T$h(this)):this._quenes[2]||(this._quenes[2]=new T$h(this));},T$n.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new T$h(this);},T$n.addShaderDefine=function(T$n){this._shaderDefineValue|=T$n;},T$n.removeShaderDefine=function(T$n){this._shaderDefineValue&=~T$n;},T$n.addScript=function(T$n){return this._addComponent(T$n);},T$n.getScriptByType=function(T$n,T$C){return void 0===T$C&&(T$C=0),this._getComponentByType(T$n,T$C);},T$n.getScriptsByType=function(T$n,T$C){this._getComponentsByType(T$n,T$C);},T$n.getScriptByIndex=function(T$n){return this._getComponentByIndex(T$n);},T$n.removeScriptByType=function(T$n,T$C){void 0===T$C&&(T$C=0),this._removeComponentByType(T$n,T$C);},T$n.removeScriptsByType=function(T$n){this._removeComponentByType(T$n);},T$n.removeAllScript=function(){this._removeAllComponent();},T$n.render=function(T$n,T$C,T$_){(T$r._context.ctx._renderKey=0)<this._childs.length&&T$n.addRenderObject(this);},T$n.renderSubmit=function(){var T$n=T$w.mainContext,T$C=this._renderState;this._set3DRenderConfig(T$n),this._prepareSceneToRender(this._renderState);var T$_,T$E=0,T$y=0;if(T$dC.debugMode||T$R.debugMode)for(T$E=0,T$y=this._cameraPool.length;T$E<T$y;T$E++)T$_=this._cameraPool[T$E],T$dC._debugPhasorSprite.begin(1,T$_),T$_.activeInHierarchy&&T$_._renderCamera(T$n,T$C,this),T$dC._debugPhasorSprite.end();else for(T$E=0,T$y=this._cameraPool.length;T$E<T$y;T$E++)(T$_=this._cameraPool[T$E]).activeInHierarchy&&T$_._renderCamera(T$n,T$C,this);return this._set2DRenderConfig(T$n),1;},T$n.onAsynLoaded=function(T$n,T$C,T$_){var T$E=T$C[0];if("Scene"!==T$E.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var T$y=T$C[1];T$mC._createNodeByJson(this,T$E,this,T$y),this.event("hierarchyloaded",[this]),this.__loaded=!0;},T$n.destroy=function(T$n){void 0===T$n&&(T$n=!0),this.destroyed||(T$C.prototype.destroy.call(this,T$n),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,T$d.clearRes(this.url),this.loaded||T$dC._cancelLoadByUrl(this.url));},T$n.getRenderType=function(){return 0;},T$n.releaseRender=function(){},T$n._addComponent=function(T$n){var T$C,T$_=this._componentsMap.indexOf(T$n);if(-1===T$_)T$C=[],this._componentsMap.push(T$n),this._typeComponentsIndices.push(T$C);else if(T$C=this._typeComponentsIndices[T$_],this._components[T$C[0]].isSingleton)throw new Error("无法单实例创建"+T$n+"组件，"+T$n+"组件已存在！");var T$E=T$y.getInstance(T$n);T$C.push(this._components.length),this._components.push(T$E);return T$E._initialize(this),T$E;},T$n._removeComponent=function(T$n,T$C){var T$_=this._typeComponentsIndices[T$n],T$E=T$_[T$C],T$y=this._components[T$E];this._components.splice(T$E,1),T$_.splice(T$C,1),0===T$_.length&&(this._typeComponentsIndices.splice(T$n,1),this._componentsMap.splice(T$n,1));for(var T$p=0,T$c=this._componentsMap.length;T$p<T$c;T$p++)for(var T$l=(T$_=this._typeComponentsIndices[T$p]).length-1;0<=T$l;T$l--){var T$W=T$_[T$l];if(!(T$E<T$W))break;T$_[T$l]=--T$W;}T$y._destroy();},T$n._getComponentByType=function(T$n,T$C){void 0===T$C&&(T$C=0);var T$_=this._componentsMap.indexOf(T$n);return-1===T$_?null:this._components[this._typeComponentsIndices[T$_][T$C]];},T$n._getComponentsByType=function(T$n,T$C){var T$_=this._componentsMap.indexOf(T$n);if(-1!==T$_){var T$E=this._typeComponentsIndices[T$_],T$y=T$E.length;T$C.length=T$y;for(var T$p=0;T$p<T$y;T$p++)T$C[T$p]=this._components[T$E[T$p]];}else T$C.length=0;},T$n._getComponentByIndex=function(T$n){return this._components[T$n];},T$n._removeComponentByType=function(T$n,T$C){void 0===T$C&&(T$C=0);var T$_=this._componentsMap.indexOf(T$n);-1!==T$_&&this._removeComponent(T$_,T$C);},T$n._removeComponentsByType=function(T$n){var T$C=this._componentsMap.indexOf(T$n);if(-1!==T$C)for(var T$_=this._typeComponentsIndices[T$C],T$E=0,T$y=T$_.length;T$E<T$y;T$_.length<T$y?T$y--:T$E++)this._removeComponent(T$C,T$E);},T$n._removeAllComponent=function(){for(var T$n=0,T$C=this._componentsMap.length;T$n<T$C;this._componentsMap.length<T$C?T$C--:T$n++)this._removeComponentsByType(this._componentsMap[T$n]);},T$n._updateComponents=function(T$n){for(var T$C=0,T$_=this._components.length;T$C<T$_;T$C++){var T$E=this._components[T$C];!T$E.started&&(T$E._start(T$n),T$E.started=!0),T$E.enable&&T$E._update(T$n);}},T$n._lateUpdateComponents=function(T$n){for(var T$C=0;T$C<this._components.length;T$C++){var T$_=this._components[T$C];!T$_.started&&(T$_._start(T$n),T$_.started=!0),T$_.enable&&T$_._lateUpdate(T$n);}},T$n._preRenderUpdateComponents=function(T$n){for(var T$C=0;T$C<this._components.length;T$C++){var T$_=this._components[T$C];!T$_.started&&(T$_._start(T$n),T$_.started=!0),T$_.enable&&T$_._preRenderUpdate(T$n);}},T$n._postRenderUpdateComponents=function(T$n){for(var T$C=0;T$C<this._components.length;T$C++){var T$_=this._components[T$C];!T$_.started&&(T$_._start(T$n),T$_.started=!0),T$_.enable&&T$_._postRenderUpdate(T$n);}},T$b(0,T$n,"_loaded",null,function(T$n){this.__loaded=T$n;}),T$b(0,T$n,"fogColor",function(){return this._fogColor;},function(T$n){this._fogColor=T$n,this._shaderValues.setValue(0,T$n.elements);}),T$b(0,T$n,"enableFog",function(){return this._enableFog;},function(T$n){this._enableFog!==T$n&&((this._enableFog=T$n)?(this.addShaderDefine(T$YC.SHADERDEFINE_FOG),this.removeShaderDefine(T$YC.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(T$YC.SHADERDEFINE_FOG));}),T$b(0,T$n,"url",function(){return this._url;}),T$b(0,T$n,"loaded",function(){return this.__loaded;}),T$b(0,T$n,"enableDepthFog",function(){return this._enableDepthFog;},function(T$n){this._enableDepthFog!=T$n&&((this._enableDepthFog=T$n)?(this.addShaderDefine(T$YC.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(T$YC.SHADERDEFINE_FOG)):this.removeShaderDefine(T$YC.SAHDERDEFINE_DEPTHFOG));}),T$b(0,T$n,"fogStart",function(){return this._fogStart;},function(T$n){this._fogStart=T$n,this._shaderValues.setValue(1,T$n);}),T$b(0,T$n,"fogRange",function(){return this._fogRange;},function(T$n){this._fogRange=T$n,this._shaderValues.setValue(2,T$n);}),T$b(0,T$n,"ambientColor",function(){return this._ambientColor;},function(T$n){this._ambientColor=T$n,this._shaderValues.setValue(21,T$n.elements);}),T$b(0,T$n,"scene",function(){return this;}),T$b(0,T$n,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice();}),T$E._sortScenes=function(T$n,T$C){if(T$n.parent!==T$k.stage||T$C.parent!==T$k.stage)return T$n.parent!==T$k.stage&&T$C.parent!==T$k.stage?T$E._sortScenes(T$n.parent,T$C.parent):T$n.parent===T$k.stage?-1:1;var T$_=T$k.stage._childs;return T$_.indexOf(T$n)-T$_.indexOf(T$C);},T$E.load=function(T$n){return T$k.loader.create(T$n,null,null,T$E);},T$E.FOGCOLOR=0,T$E.FOGSTART=1,T$E.FOGRANGE=2,T$E.LIGHTDIRECTION=3,T$E.LIGHTDIRCOLOR=4,T$E.POINTLIGHTPOS=5,T$E.POINTLIGHTRANGE=6,T$E.POINTLIGHTATTENUATION=7,T$E.POINTLIGHTCOLOR=8,T$E.SPOTLIGHTPOS=9,T$E.SPOTLIGHTDIRECTION=10,T$E.SPOTLIGHTSPOT=11,T$E.SPOTLIGHTRANGE=12,T$E.SPOTLIGHTATTENUATION=13,T$E.SPOTLIGHTCOLOR=14,T$E.SHADOWDISTANCE=15,T$E.SHADOWLIGHTVIEWPROJECT=16,T$E.SHADOWMAPPCFOFFSET=17,T$E.SHADOWMAPTEXTURE1=18,T$E.SHADOWMAPTEXTURE2=19,T$E.SHADOWMAPTEXTURE3=20,T$E.AMBIENTCOLOR=21,T$E.TIME=22,T$E;}(T$T),T$XC=function(T$n){function T$C(T$n){T$C.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new T$nC(),this._shaderValues=new T$PC(),this._colliders=[],this._id=++T$C._uniqueIDCounter,this._transform=new T$tC(this),this.name=T$n||"Sprite3D-"+T$C._nameNumberCounter++,this.layer=T$g.currentCreationLayer,this.active=!0;}T$x(T$C,"laya.d3.core.Sprite3D",T$SC);var T$_=T$C.prototype;return T$k.imps(T$_,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),T$_._setUrl=function(T$n){this._url=T$n;},T$_._getGroup=function(){return this._group;},T$_._setGroup=function(T$n){this._group=T$n;},T$_._addChild3D=function(T$n){T$n.transform.parent=this.transform,this._hierarchyAnimator&&(!T$n._hierarchyAnimator&&T$n._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(T$n,!0,[T$n.name])),this._scene&&(T$n._setBelongScene(this._scene),this._activeInHierarchy&&T$n._active&&T$n._activeHierarchy());},T$_._removeChild3D=function(T$n){T$n.transform.parent=null,this._scene&&(this._activeInHierarchy&&T$n._active&&T$n._inActiveHierarchy(),T$n._setUnBelongScene()),this._hierarchyAnimator&&(T$n._hierarchyAnimator==this._hierarchyAnimator&&T$n._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(T$n,!1,[T$n.name]));},T$_._parseBaseCustomProps=function(T$n){var T$C=this.transform.localPosition;T$n.translate?(T$C.fromArray(T$n.translate),T$C.x*=100,T$C.y*=100,T$C.z*=100):T$C.elements.fill(0),this.transform.localPosition=T$C;var T$_=this.transform.localRotation;T$n.rotation?T$_.fromArray(T$n.rotation):T$_.fromArray([0,0,0,-1]),this.transform.localRotation=T$_;var T$E=this.transform.localScale;T$n.scale?T$E.fromArray(T$n.scale):T$E.elements.fill(1),this.transform.localScale=T$E;var T$y=T$n.layer;null!=T$y&&(this.layer=T$g.getLayerByNumber(T$y));},T$_._parseCustomComponent=function(T$n,T$C,T$_){for(var T$E in T$_){var T$y=T$_[T$E];switch(T$E){case"Animator":var T$p=this.addComponent(Animator);if(T$y.avatarPath)T$p.avatar=T$d.getRes(T$C[T$y.avatarPath]);else{var T$c=T$y.avatar;if(T$c){T$p.avatar=T$d.getRes(T$C[T$c.path]);var T$l=T$c.linkSprites;T$l&&T$n.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[T$p,T$l]);}}for(var T$W=T$y.clipPaths,T$q=T$W.length,T$J=0;T$J<T$q;T$J++)T$p.addClip(T$d.getRes(T$C[T$W[T$J]]));T$p.clip=T$d.getRes(T$C[T$W[0]]);var T$j=T$y.playOnWake;void 0!==T$j&&(T$p.playOnWake=T$j);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var T$P=this.addComponent(SphereCollider);T$P.isTrigger=T$y.isTrigger;var T$x=T$P.center;T$x.fromArray(T$y.center),T$P.center=T$x,T$P.radius=T$y.radius;break;case"BoxCollider":var T$b=this.addComponent(BoxCollider);T$b.isTrigger=T$y.isTrigger,T$b.center.fromArray(T$y.center);var T$r=T$b.size;T$r.fromArray(T$y.size),T$b.size=T$r;break;case"MeshCollider":this.addComponent(MeshCollider);}}},T$_._onRootNodeHierarchyLoaded=function(T$n,T$C){for(var T$_ in T$C){for(var T$E=this,T$y=T$C[T$_],T$p=0,T$c=T$y.length;T$p<T$c;T$p++){var T$l=T$y[T$p];if(""===T$l)break;if(!(T$E=T$E.getChildByName(T$l)))break;}T$E&&T$n.linkSprite3DToAvatarNode(T$_,T$E);}},T$_._setHierarchyAnimator=function(T$n,T$C){this._changeHierarchyAnimator(T$n);for(var T$_=0,T$E=this._childs.length;T$_<T$E;T$_++){var T$y=this._childs[T$_];T$y._hierarchyAnimator==T$C&&T$y._setHierarchyAnimator(T$n,T$C);}},T$_._clearHierarchyAnimator=function(T$n,T$C){this._changeHierarchyAnimator(T$C);for(var T$_=0,T$E=this._childs.length;T$_<T$E;T$_++){var T$y=this._childs[T$_];T$y._hierarchyAnimator==T$n&&T$y._clearHierarchyAnimator(T$n,T$C);}},T$_._getAnimatorToLinkSprite3D=function(T$n,T$C,T$_){var T$E=this.getComponentByType(Animator);if(T$E&&(T$E.avatar?T$E.avatar._version||T$n._setAnimatorToLinkAvatar(T$E,T$C):T$n._setAnimatorToLinkSprite3DNoAvatar(T$E,T$C,T$_)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){T$_.unshift(this._parent.name);var T$y=this._parent;T$y._hierarchyAnimator&&T$y._getAnimatorToLinkSprite3D(T$n,T$C,T$_);}},T$_._setAnimatorToLinkSprite3DNoAvatar=function(T$n,T$C,T$_){var T$E=0,T$y=0;for(T$E=0,T$y=T$n.getClipCount();T$E<T$y;T$E++)T$n._handleSpriteOwnersBySprite(T$E,T$C,T$_,this);for(T$E=0,T$y=this._childs.length;T$E<T$y;T$E++){var T$p=this._childs[T$E],T$c=T$_.length;T$_.push(T$p.name),T$p._setAnimatorToLinkSprite3DNoAvatar(T$n,T$C,T$_),T$_.splice(T$c,1);}},T$_._changeHierarchyAnimator=function(T$n){this._hierarchyAnimator=T$n;},T$_._isLinkSpriteToAnimationNode=function(T$n,T$C,T$_){var T$E=T$n._avatarNodes.indexOf(T$C),T$y=T$n._cacheSpriteToNodesMap;if(T$_)this._transform.dummy=T$C.transform,T$n._cacheNodesToSpriteMap[T$E]=T$y.length,T$y.push(T$E);else{this._transform.dummy=null;var T$p=T$n._cacheNodesToSpriteMap[T$E];T$n._cacheNodesToSpriteMap[T$E]=null,T$y.splice(T$p,1);}},T$_._setBelongScene=function(T$n){this._scene=T$n;for(var T$C=0,T$_=this._childs.length;T$C<T$_;T$C++)this._childs[T$C]._setBelongScene(T$n);},T$_._setUnBelongScene=function(){this._scene=null;for(var T$n=0,T$C=this._childs.length;T$n<T$C;T$n++)this._childs[T$n]._setUnBelongScene();},T$_._activeHierarchy=function(){var T$n=0,T$C=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),T$n=0,T$C=this._colliders.length;T$n<T$C;T$n++)this._layer._addCollider(this._colliders[T$n]);for(this.event("activeinhierarchychanged",!0),T$n=0,T$C=this._childs.length;T$n<T$C;T$n++){var T$_=this._childs[T$n];T$_._active&&T$_._activeHierarchy();}},T$_._inActiveHierarchy=function(){var T$n=0,T$C=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),T$n=0,T$C=this._colliders.length;T$n<T$C;T$n++){var T$_=this._colliders[T$n];T$_._clearCollsionMap(),this._layer._removeCollider(T$_);}for(this.event("activeinhierarchychanged",!1),T$n=0,T$C=this._childs.length;T$n<T$C;T$n++){var T$E=this._childs[T$n];T$E._active&&T$E._inActiveHierarchy();}},T$_.addComponent=function(T$n){var T$C,T$_=this._componentsMap.indexOf(T$n);if(-1===T$_)T$C=[],this._componentsMap.push(T$n),this._typeComponentsIndices.push(T$C);else if(T$C=this._typeComponentsIndices[T$_],this._components[T$C[0]].isSingleton)throw new Error("无法单实例创建"+T$n+"组件，"+T$n+"组件已存在！");var T$E=T$y.getInstance(T$n);return T$C.push(this._components.length),this._components.push(T$E),T$E instanceof laya.d3.component.Script&&this._scripts.push(T$E),T$E._initialize(this),T$E;},T$_._removeComponent=function(T$n,T$C){var T$_,T$E=0,T$y=this._typeComponentsIndices[T$n],T$p=T$y[T$C],T$c=this._components[T$p];for(T$c instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(T$c),1),T$y.splice(T$C,1),0===T$y.length&&(this._typeComponentsIndices.splice(T$n,1),this._componentsMap.splice(T$n,1)),T$E=0,T$_=this._componentsMap.length;T$E<T$_;T$E++)for(var T$l=(T$y=this._typeComponentsIndices[T$E]).length-1;0<=T$l;T$l--){var T$W=T$y[T$l];if(!(T$p<T$W))break;T$y[T$l]=--T$W;}T$c._destroy();},T$_._clearSelfRenderObjects=function(){},T$_._addSelfRenderObjects=function(){},T$_._parseCustomProps=function(T$n,T$C,T$_,T$E){},T$_._updateChilds=function(T$n){var T$C=this._childs.length;if(0!==T$C)for(var T$_=0;T$_<T$C;++T$_)this._childs[T$_]._update(T$n);},T$_._getSortID=function(T$n,T$C){return 1e3*T$C.id+T$n._getVertexBuffer().vertexDeclaration.id;},T$_._update=function(T$n){(T$n.owner=this)._activeInHierarchy&&(this._updateComponents(T$n),this._lateUpdateComponents(T$n),T$Y.spriteCount++,this._childs.length&&this._updateChilds(T$n));},T$_.getProjectionViewWorldMatrix=function(T$n){return T$nC.multiply(T$n,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix;},T$_.loadHierarchy=function(T$n){this.addChild(laya.d3.core.Sprite3D.load(T$n));},T$_.addChildAt=function(T$n,T$C){if(!(T$n instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!T$n||this.destroyed||T$n===this)return T$n;if(T$n.zOrder&&this._set$P("hasZorder",!0),0<=T$C&&T$C<=this._childs.length){if(T$n._parent===this){var T$_=this.getChildIndex(T$n);this._childs.splice(T$_,1),this._childs.splice(T$C,0,T$n),this.conchModel&&(this.conchModel.removeChild(T$n.conchModel),this.conchModel.addChildAt(T$n.conchModel,T$C)),this._childChanged();}else T$n.parent&&T$n.parent.removeChild(T$n),this._childs===T$q.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(T$C,0,T$n),this.conchModel&&this.conchModel.addChildAt(T$n.conchModel,T$C),(T$n.parent=this)._addChild3D(T$n);return T$n;}throw new Error("appendChildAt:The index is out of bounds");},T$_.addChild=function(T$n){if(!(T$n instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!T$n||this.destroyed||T$n===this)return T$n;if(T$n.zOrder&&this._set$P("hasZorder",!0),T$n._parent===this){var T$C=this.getChildIndex(T$n);T$C!==this._childs.length-1&&(this._childs.splice(T$C,1),this._childs.push(T$n),this.conchModel&&(this.conchModel.removeChild(T$n.conchModel),this.conchModel.addChildAt(T$n.conchModel,this._childs.length-1)),this._childChanged());}else T$n.parent&&T$n.parent.removeChild(T$n),this._childs===T$q.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(T$n),this.conchModel&&this.conchModel.addChildAt(T$n.conchModel,this._childs.length-1),(T$n.parent=this)._childChanged(),this._addChild3D(T$n);return T$n;},T$_.removeChildAt=function(T$n){var T$C=this.getChildAt(T$n);return T$C&&(this._removeChild3D(T$C),this._childs.splice(T$n,1),this.conchModel&&this.conchModel.removeChild(T$C.conchModel),T$C.parent=null),T$C;},T$_.removeChildren=function(T$n,T$C){if(void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=2147483647),this._childs&&0<this._childs.length){var T$_=this._childs;if(0===T$n&&T$p<=T$C){var T$E=T$_;this._childs=T$q.ARRAY_EMPTY;}else T$E=T$_.splice(T$n,T$C-T$n);for(var T$y=0,T$p=T$E.length;T$y<T$p;T$y++)this._removeChild3D(T$E[T$y]),T$E[T$y].parent=null,this.conchModel&&this.conchModel.removeChild(T$E[T$y].conchModel);}return this;},T$_.onAsynLoaded=function(T$n,T$C,T$_){var T$E=T$C[0];if("Sprite3D"!==T$E.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var T$y=T$C[1];T$mC._createNodeByJson(this,T$E,this,T$y),this.event("hierarchyloaded",[this]),this.__loaded=!0;},T$_.cloneTo=function(T$n){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var T$C=T$n;T$C.name=this.name,T$C._destroyed=this._destroyed,T$C.timer=this.timer,T$C._$P=this._$P,T$C.active=this._active;var T$_=T$C.transform.localPosition;this.transform.localPosition.cloneTo(T$_),T$C.transform.localPosition=T$_;var T$E=T$C.transform.localRotation;this.transform.localRotation.cloneTo(T$E),T$C.transform.localRotation=T$E;var T$y=T$C.transform.localScale;this.transform.localScale.cloneTo(T$y),T$C.transform.localScale=T$y,T$C.isStatic=this.isStatic;var T$p=0,T$c=0;for(T$p=0,T$c=this._componentsMap.length;T$p<T$c;T$p++){var T$l=T$C.addComponent(this._componentsMap[T$p]);this._components[T$p]._cloneTo(T$l);}for(T$p=0,T$c=this._childs.length;T$p<T$c;T$p++)T$C.addChild(this._childs[T$p].clone());var T$W=T$C.getComponentByType(Animator);if(T$W){var T$q=T$W._linkSpritesData;if(T$q)for(var T$J in T$q){for(var T$j=T$q[T$J],T$P=T$C,T$x=0,T$b=T$j.length;T$x<T$b&&(T$P=T$P.getChildByName(T$j[T$x]));T$x++);if(T$P){var T$r=T$W._avatarNodeMap[T$J];T$P._isLinkSpriteToAnimationNode(T$W,T$r,!0);}}}},T$_.clone=function(){var T$n=new this.constructor();return this.cloneTo(T$n),T$n;},T$_.destroy=function(T$n){if(void 0===T$n&&(T$n=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,T$n);var T$C,T$_=0;for(T$_=0,T$C=this._components.length;T$_<T$C;T$_++)this._components[T$_]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,T$d.clearRes(this.url),this.loaded||T$dC._cancelLoadByUrl(this.url);}},T$_._handleSpriteToAvatar=function(T$n,T$C){T$n._avatarNodes;var T$_=T$n._avatarNodeMap[this.name];T$_&&T$_.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(T$n,T$_,T$C);},T$_._setAnimatorToLinkAvatar=function(T$n,T$C){this._handleSpriteToAvatar(T$n,T$C);for(var T$_=0,T$E=this._childs.length;T$_<T$E;T$_++){this._childs[T$_]._setAnimatorToLinkAvatar(T$n,T$C);}},T$b(0,T$_,"activeInHierarchy",function(){return this._activeInHierarchy;}),T$b(0,T$_,"_loaded",null,function(T$n){this.__loaded=T$n;}),T$b(0,T$_,"active",function(){return this._active;},function(T$n){this._active!==T$n&&(this._active=T$n,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(T$n?this._activeHierarchy():this._inActiveHierarchy()));}),T$b(0,T$_,"componentsCount",function(){return this._components.length;}),T$b(0,T$_,"loaded",function(){return this.__loaded;}),T$b(0,T$_,"id",function(){return this._id;}),T$b(0,T$_,"url",function(){return this._url;}),T$b(0,T$_,"layer",function(){return this._layer;},function(T$n){if(this._layer!==T$n){if(!T$n)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var T$C=0,T$_=this._colliders.length;if(this._layer)for(T$C=0;T$C<T$_;T$C++)this._layer._removeCollider(this._colliders[T$C]);for(T$C=0;T$C<T$_;T$C++)T$n._addCollider(this._colliders[T$C]);}this._layer=T$n,this.event("layerchanged",T$n);}}),T$b(0,T$_,"scene",function(){return this._scene;}),T$b(0,T$_,"transform",function(){return this._transform;}),T$C.instantiate=function(T$n,T$C,T$_,T$E,T$y){void 0===T$_&&(T$_=!0);var T$p=T$n.clone();T$C&&T$C.addChild(T$p);var T$c=T$p.transform;if(T$_){var T$l=T$c.worldMatrix;T$n.transform.worldMatrix.cloneTo(T$l),T$c.worldMatrix=T$l;}else T$E&&(T$c.position=T$E),T$y&&(T$c.rotation=T$y);return T$p;},T$C.load=function(T$n){return T$k.loader.create(T$n,null,null,T$C);},T$C.WORLDMATRIX=0,T$C.MVPMATRIX=1,T$C._uniqueIDCounter=0,T$C._nameNumberCounter=0,T$C;}(),T$$C=function(T$n){function T$J(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],T$J.__super.call(this),!T$n||!T$C)throw"Shader Error";this._id=++T$J._count,this._vs=T$n,this._ps=T$C,this._attributeMap=T$_,this._sceneUniformMap=T$E,this._cameraUniformMap=T$y,this._spriteUniformMap=T$p,this._materialUniformMap=T$c,this._renderElementUniformMap=T$l,this._precompile=T$W,this._define=T$q,this._precompile&&T$J.extCompileObj&&T$J.extCompileFunc?T$J.extCompileFunc.call(T$J.extCompileObj,T$n,T$C,T$q):this.recreateResource();}T$x(T$J,"laya.d3.shader.Shader3D",T$_);var T$C=T$J.prototype;return T$C.recreateResource=function(){T$V.now();this._compile(),this.completeCreate(),this.memorySize=0;},T$C.disposeResource=function(){T$w.mainContext.deleteShader(this._vshader),T$w.mainContext.deleteShader(this._pshader),T$w.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0;},T$C._compile=function(){if(!T$w.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var T$n=[this._vs,this._ps],T$C=T$w.mainContext;if(this._program=T$C.createProgram(),this._vshader=T$J._createShader(T$C,T$n[0],35633),this._pshader=T$J._createShader(T$C,T$n[1],35632),T$C.attachShader(this._program,this._vshader),T$C.attachShader(this._program,this._pshader),T$C.linkProgram(this._program),!T$r.isConchApp&&T$YC.debugMode&&!T$C.getProgramParameter(this._program,35714))throw T$C.getProgramInfoLog(this._program);var T$_,T$E=0,T$y=0,T$p=0;for(T$p=T$r.isConchApp?T$C.getProgramParameterEx(this._vs,this._ps,"",35721):T$C.getProgramParameter(this._program,35721),T$E=0;T$E<T$p;T$E++){var T$c=null;T$_={vartype:"attribute",ivartype:0,attrib:T$c=T$r.isConchApp?T$C.getActiveAttribEx(this._vs,this._ps,"",T$E):T$C.getActiveAttrib(this._program,T$E),location:T$C.getAttribLocation(this._program,T$c.name),name:T$c.name,type:T$c.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(T$_);}var T$l=0;for(T$l=T$r.isConchApp?T$C.getProgramParameterEx(this._vs,this._ps,"",35718):T$C.getProgramParameter(this._program,35718),T$E=0;T$E<T$l;T$E++){var T$W=null;T$W=T$r.isConchApp?T$C.getActiveUniformEx(this._vs,this._ps,"",T$E):T$C.getActiveUniform(this._program,T$E),0<(T$_={vartype:"uniform",ivartype:1,attrib:T$c,location:T$C.getUniformLocation(this._program,T$W.name),name:T$W.name,type:T$W.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(T$_.name=T$_.name.substr(0,T$_.name.length-3),T$_.isArray=!0,T$_.location=T$C.getUniformLocation(this._program,T$_.name)),this._uniformParams.push(T$_);}for(T$E=0,T$y=this._attributeParams.length;T$E<T$y;T$E++)(T$_=this._attributeParams[T$E]).indexOfParams=T$E,T$_.index=1,T$_.value=[T$_.location,null],T$_.codename=T$_.name,T$_.name=null!=this._attributeMap[T$_.codename]?this._attributeMap[T$_.codename]:T$_.codename,this._attributeParamsMap.push(T$_.name),this._attributeParamsMap.push(T$_),T$_._this=this,T$_.uploadedValue=[],T$_.fun=this._attribute;for(T$E=0,T$y=this._uniformParams.length;T$E<T$y;T$E++)switch((T$_=this._uniformParams[T$E]).indexOfParams=T$E,T$_.index=1,T$_.value=[T$_.location,null],T$_.codename=T$_.name,null!=this._sceneUniformMap[T$_.codename]?(T$_.name=this._sceneUniformMap[T$_.codename],this._sceneUniformParamsMap.push(T$_.name),this._sceneUniformParamsMap.push(T$_)):null!=this._cameraUniformMap[T$_.codename]?(T$_.name=this._cameraUniformMap[T$_.codename],this._cameraUniformParamsMap.push(T$_.name),this._cameraUniformParamsMap.push(T$_)):null!=this._spriteUniformMap[T$_.codename]?(T$_.name=this._spriteUniformMap[T$_.codename],this._spriteUniformParamsMap.push(T$_.name),this._spriteUniformParamsMap.push(T$_)):null!=this._materialUniformMap[T$_.codename]?(T$_.name=this._materialUniformMap[T$_.codename],this._materialUniformParamsMap.push(T$_.name),this._materialUniformParamsMap.push(T$_)):null!=this._renderElementUniformMap[T$_.codename]?(T$_.name=this._renderElementUniformMap[T$_.codename],this._renderElementUniformParamsMap.push(T$_.name),this._renderElementUniformParamsMap.push(T$_)):console.log("Shader:can't find uinform name:"+T$_.codename+" in shader file."),T$_._this=this,T$_.uploadedValue=[],T$_.type){case 5124:T$_.fun=T$_.isArray?this._uniform1iv:this._uniform1i;break;case 5126:T$_.fun=T$_.isArray?this._uniform1fv:this._uniform1f;break;case 35664:T$_.fun=T$_.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:T$_.fun=T$_.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:T$_.fun=T$_.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:T$_.fun=this._uniform_sampler2D;break;case 35680:T$_.fun=this._uniform_samplerCube;break;case 35676:T$_.fun=this._uniformMatrix4fv;break;case 35670:T$_.fun=this._uniform1i;break;case 35674:T$_.fun=this._uinformMatrix2fv;break;case 35675:T$_.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!");}}},T$C._attribute=function(T$n,T$C){var T$_=T$w.mainContext,T$E=T$l._enableAtributes,T$y=T$n.location;return T$E[T$y]||T$_.enableVertexAttribArray(T$y),T$_.vertexAttribPointer(T$y,T$C[0],T$C[1],T$C[2],T$C[3],T$C[4]),T$E[T$y]=T$l._bindVertexBuffer,1;},T$C._uniform1f=function(T$n,T$C){var T$_=T$n.uploadedValue;return T$_[0]!==T$C?(T$w.mainContext.uniform1f(T$n.location,T$_[0]=T$C),1):0;},T$C._uniform1fv=function(T$n,T$C){if(T$C.length<4){var T$_=T$n.uploadedValue;return T$_[0]!==T$C[0]||T$_[1]!==T$C[1]||T$_[2]!==T$C[2]||T$_[3]!==T$C[3]?(T$w.mainContext.uniform1fv(T$n.location,T$C),T$_[0]=T$C[0],T$_[1]=T$C[1],T$_[2]=T$C[2],T$_[3]=T$C[3],1):0;}return T$w.mainContext.uniform1fv(T$n.location,T$C),1;},T$C._uniform_vec2=function(T$n,T$C){var T$_=T$n.uploadedValue;return T$_[0]!==T$C[0]||T$_[1]!==T$C[1]?(T$w.mainContext.uniform2f(T$n.location,T$_[0]=T$C[0],T$_[1]=T$C[1]),1):0;},T$C._uniform_vec2v=function(T$n,T$C){if(T$C.length<2){var T$_=T$n.uploadedValue;return T$_[0]!==T$C[0]||T$_[1]!==T$C[1]||T$_[2]!==T$C[2]||T$_[3]!==T$C[3]?(T$w.mainContext.uniform2fv(T$n.location,T$C),T$_[0]=T$C[0],T$_[1]=T$C[1],T$_[2]=T$C[2],T$_[3]=T$C[3],1):0;}return T$w.mainContext.uniform2fv(T$n.location,T$C),1;},T$C._uniform_vec3=function(T$n,T$C){var T$_=T$n.uploadedValue;return T$_[0]!==T$C[0]||T$_[1]!==T$C[1]||T$_[2]!==T$C[2]?(T$w.mainContext.uniform3f(T$n.location,T$_[0]=T$C[0],T$_[1]=T$C[1],T$_[2]=T$C[2]),1):0;},T$C._uniform_vec3v=function(T$n,T$C){return T$w.mainContext.uniform3fv(T$n.location,T$C),1;},T$C._uniform_vec4=function(T$n,T$C){var T$_=T$n.uploadedValue;return T$_[0]!==T$C[0]||T$_[1]!==T$C[1]||T$_[2]!==T$C[2]||T$_[3]!==T$C[3]?(T$w.mainContext.uniform4f(T$n.location,T$_[0]=T$C[0],T$_[1]=T$C[1],T$_[2]=T$C[2],T$_[3]=T$C[3]),1):0;},T$C._uniform_vec4v=function(T$n,T$C){return T$w.mainContext.uniform4fv(T$n.location,T$C),1;},T$C._uniformMatrix2fv=function(T$n,T$C){return T$w.mainContext.uniformMatrix2fv(T$n.location,!1,T$C),1;},T$C._uniformMatrix3fv=function(T$n,T$C){return T$w.mainContext.uniformMatrix3fv(T$n.location,!1,T$C),1;},T$C._uniformMatrix4fv=function(T$n,T$C){return T$w.mainContext.uniformMatrix4fv(T$n.location,!1,T$C),1;},T$C._uinformMatrix2fv=function(T$n,T$C){return T$w.mainContext.uniformMatrix2fv(T$n.location,!1,T$C),1;},T$C._uinformMatrix3fv=function(T$n,T$C){return T$w.mainContext.uniformMatrix3fv(T$n.location,!1,T$C),1;},T$C._uniform1i=function(T$n,T$C){var T$_=T$n.uploadedValue;return T$_[0]!==T$C?(T$w.mainContext.uniform1i(T$n.location,T$_[0]=T$C),1):0;},T$C._uniform1iv=function(T$n,T$C){return T$w.mainContext.uniform1iv(T$n.location,T$C),1;},T$C._uniform_ivec2=function(T$n,T$C){var T$_=T$n.uploadedValue;return T$_[0]!==T$C[0]||T$_[1]!==T$C[1]?(T$w.mainContext.uniform2i(T$n.location,T$_[0]=T$C[0],T$_[1]=T$C[1]),1):0;},T$C._uniform_ivec2v=function(T$n,T$C){return T$w.mainContext.uniform2iv(T$n.location,T$C),1;},T$C._uniform_vec3i=function(T$n,T$C){var T$_=T$n.uploadedValue;return T$_[0]!==T$C[0]||T$_[1]!==T$C[1]||T$_[2]!==T$C[2]?(T$w.mainContext.uniform3i(T$n.location,T$_[0]=T$C[0],T$_[1]=T$C[1],T$_[2]=T$C[2]),1):0;},T$C._uniform_vec3vi=function(T$n,T$C){return T$w.mainContext.uniform3iv(T$n.location,T$C),1;},T$C._uniform_vec4i=function(T$n,T$C){var T$_=T$n.uploadedValue;return T$_[0]!==T$C[0]||T$_[1]!==T$C[1]||T$_[2]!==T$C[2]||T$_[3]!==T$C[3]?(T$w.mainContext.uniform4i(T$n.location,T$_[0]=T$C[0],T$_[1]=T$C[1],T$_[2]=T$C[2],T$_[3]=T$C[3]),1):0;},T$C._uniform_vec4vi=function(T$n,T$C){return T$w.mainContext.uniform4iv(T$n.location,T$C),1;},T$C._uniform_sampler2D=function(T$n,T$C){var T$_=T$C.source||T$C.defaulteTexture.source,T$E=T$w.mainContext,T$y=T$n.uploadedValue;if(null!=T$y[0])return T$E.activeTexture(T$J._TEXTURES[T$y[0]]),T$_&&T$B.bindTexture(T$E,3553,T$_),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return T$y[0]=this._curActTexIndex,T$E.uniform1i(T$n.location,this._curActTexIndex),T$E.activeTexture(T$J._TEXTURES[this._curActTexIndex]),T$_&&T$B.bindTexture(T$E,3553,T$_),this._curActTexIndex++,1;},T$C._uniform_samplerCube=function(T$n,T$C){var T$_=T$C.source||T$C.defaulteTexture.source,T$E=T$w.mainContext,T$y=T$n.uploadedValue;if(null!=T$y[0])return T$E.activeTexture(T$J._TEXTURES[T$y[0]]),T$_?T$B.bindTexture(T$E,34067,T$_):T$B.bindTexture(T$E,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return T$y[0]=this._curActTexIndex,T$E.uniform1i(T$n.location,this._curActTexIndex),T$E.activeTexture(T$J._TEXTURES[this._curActTexIndex]),T$_?T$B.bindTexture(T$E,34067,T$_):T$B.bindTexture(T$E,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1;},T$C._noSetValue=function(T$n){console.log("no....:"+T$n.name);},T$C.bind=function(){return T$_.activeShader=this,(T$_.bindShader=this).activeResource(),T$B.UseProgram(this._program);},T$C.uploadAttributes=function(T$n,T$C){for(var T$_,T$E,T$y=0,T$p=0,T$c=this._attributeParamsMap.length;T$p<T$c;T$p+=2)T$E=this._attributeParamsMap[T$p+1],null!=(T$_=T$n[this._attributeParamsMap[T$p]])&&(T$C&&T$C[T$E.name]&&T$C[T$E.name].bind(),T$y+=T$E.fun.call(this,T$E,T$_));T$Y.shaderCall+=T$y;},T$C.uploadAttributesX=function(T$n,T$C){for(var T$_,T$E,T$y=0,T$p=0,T$c=this._attributeParamsMap.length;T$p<T$c;T$p+=2)T$E=this._attributeParamsMap[T$p+1],null!=(T$_=T$n[this._attributeParamsMap[T$p]])&&(T$C._bind(),T$y+=T$E.fun.call(this,T$E,T$_));T$Y.shaderCall+=T$y;},T$C.uploadSceneUniforms=function(T$n){for(var T$C,T$_,T$E=0,T$y=0,T$p=this._sceneUniformParamsMap.length;T$y<T$p;T$y+=2)T$_=this._sceneUniformParamsMap[T$y+1],null!=(T$C=T$n[this._sceneUniformParamsMap[T$y]])&&(T$E+=T$_.fun.call(this,T$_,T$C));T$Y.shaderCall+=T$E;},T$C.uploadCameraUniforms=function(T$n){for(var T$C,T$_,T$E=0,T$y=0,T$p=this._cameraUniformParamsMap.length;T$y<T$p;T$y+=2)T$_=this._cameraUniformParamsMap[T$y+1],null!=(T$C=T$n[this._cameraUniformParamsMap[T$y]])&&(T$E+=T$_.fun.call(this,T$_,T$C));T$Y.shaderCall+=T$E;},T$C.uploadSpriteUniforms=function(T$n){for(var T$C,T$_,T$E=0,T$y=0,T$p=this._spriteUniformParamsMap.length;T$y<T$p;T$y+=2)T$_=this._spriteUniformParamsMap[T$y+1],null!=(T$C=T$n[this._spriteUniformParamsMap[T$y]])&&(T$E+=T$_.fun.call(this,T$_,T$C));T$Y.shaderCall+=T$E;},T$C.uploadMaterialUniforms=function(T$n){for(var T$C,T$_,T$E=0,T$y=0,T$p=this._materialUniformParamsMap.length;T$y<T$p;T$y+=2)T$_=this._materialUniformParamsMap[T$y+1],null!=(T$C=T$n[this._materialUniformParamsMap[T$y]])&&(T$E+=T$_.fun.call(this,T$_,T$C));T$Y.shaderCall+=T$E;},T$C.uploadRenderElementUniforms=function(T$n){for(var T$C,T$_,T$E=0,T$y=0,T$p=this._renderElementUniformParamsMap.length;T$y<T$p;T$y+=2)T$_=this._renderElementUniformParamsMap[T$y+1],null!=(T$C=T$n[this._renderElementUniformParamsMap[T$y]])&&(T$E+=T$_.fun.call(this,T$_,T$C));T$Y.shaderCall+=T$E;},T$J.create=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q){return new T$J(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q);},T$J.addInclude=function(T$n,T$C){T$O.addInclude(T$n,T$C);},T$J._createShader=function(T$n,T$C,T$_){var T$E=T$n.createShader(T$_);if(T$n.shaderSource(T$E,T$C),T$n.compileShader(T$E),T$YC.debugMode&&!T$n.getShaderParameter(T$E,35713))throw T$n.getShaderInfoLog(T$E);return T$E;},T$J.PERIOD_RENDERELEMENT=0,T$J.PERIOD_MATERIAL=1,T$J.PERIOD_SPRITE=2,T$J.PERIOD_CAMERA=3,T$J.PERIOD_SCENE=4,T$J._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],T$J._count=0,T$J._preCompile=!1,T$J.extCompileFunc=null,T$J.extCompileObj=null,T$j(T$J,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680};},"nameKey",function(){return this.nameKey=new T$s();}]),T$J;}(),T$iC=function(T$l){function T$W(){this._transformUV=null,T$W.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new T$cC(.6,.6,.6)),this._setColor(10,new T$cC(1,1,1)),this._setColor(11,new T$lC(1,1,1,8)),this._setColor(12,new T$cC(1,1,1)),this._setColor(7,new T$lC(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new T$lC(1,1,0,0)),this.renderMode=1;}T$x(T$W,"laya.d3.core.material.StandardMaterial",T$l);var T$n=T$W.prototype;return T$n.disableLight=function(){this._addDisablePublicShaderDefine(T$YC.SHADERDEFINE_POINTLIGHT|T$YC.SHADERDEFINE_SPOTLIGHT|T$YC.SHADERDEFINE_DIRECTIONLIGHT);},T$n.disableFog=function(){this._addDisablePublicShaderDefine(T$YC.SHADERDEFINE_FOG);},T$n.onAsynLoaded=function(T$n,T$C,T$_){var T$E=T$C[0];if(T$E.version)T$l.prototype.onAsynLoaded.call(this,T$n,T$C,T$_);else{var T$y=T$C[1],T$p=T$E.props;for(var T$c in T$p)this[T$c]=T$p[T$c];T$W._parseStandardMaterial(T$y,this,T$E),this._endLoaded();}},T$n.cloneTo=function(T$n){T$l.prototype.cloneTo.call(this,T$n);var T$C=T$n;this._transformUV&&(T$C._transformUV=this._transformUV.clone());},T$b(0,T$n,"ambientColor",function(){return this._getColor(9);},function(T$n){this._setColor(9,T$n);}),T$b(0,T$n,"ambientTexture",function(){return this._getTexture(5);},function(T$n){T$n?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,T$n);}),T$b(0,T$n,"renderMode",null,function(T$n){switch(T$n){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(T$W.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(T$W.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(T$W.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(T$W.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$W.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$W.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$W.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$W.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$W.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$W.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$W.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$W.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$W.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$W.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$W.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$W.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.");}this._conchMaterial&&this._conchMaterial.setRenderMode(T$n);}),T$b(0,T$n,"reflectColor",function(){return this._getColor(12);},function(T$n){this._setColor(12,T$n);}),T$b(0,T$n,"tilingOffset",function(){return this._getColor(15);},function(T$n){if(T$n){var T$C=T$n.elements;1!=T$C[0]||1!=T$C[1]||0!=T$C[2]||0!=T$C[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,T$n);}),T$b(0,T$n,"albedo",function(){return this._getColor(7);},function(T$n){this._setColor(7,T$n);}),T$b(0,T$n,"diffuseColor",function(){return this._getColor(10);},function(T$n){this._setColor(10,T$n);}),T$b(0,T$n,"albedoColor",function(){return this._getColor(7);},function(T$n){this._setColor(7,T$n);}),T$b(0,T$n,"specularColor",function(){return this._getColor(11);},function(T$n){this._setColor(11,T$n);}),T$b(0,T$n,"diffuseTexture",function(){return this._getTexture(1);},function(T$n){T$n?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,T$n);}),T$b(0,T$n,"normalTexture",function(){return this._getTexture(2);},function(T$n){T$n?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,T$n);}),T$b(0,T$n,"specularTexture",function(){return this._getTexture(3);},function(T$n){T$n?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,T$n);}),T$b(0,T$n,"emissiveTexture",function(){return this._getTexture(4);},function(T$n){T$n?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,T$n);}),T$b(0,T$n,"reflectTexture",function(){return this._getTexture(6);},function(T$n){T$n?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,T$n);}),T$b(0,T$n,"transformUV",function(){return this._transformUV;},function(T$n){this._transformUV=T$n,this._setMatrix4x4(13,T$n.matrix),T$n?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,T$n.matrix.elements,0);}),T$W.__init__=function(){T$W.SHADERDEFINE_DIFFUSEMAP=T$W.shaderDefines.registerDefine("DIFFUSEMAP"),T$W.SHADERDEFINE_NORMALMAP=T$W.shaderDefines.registerDefine("NORMALMAP"),T$W.SHADERDEFINE_SPECULARMAP=T$W.shaderDefines.registerDefine("SPECULARMAP"),T$W.SHADERDEFINE_EMISSIVEMAP=T$W.shaderDefines.registerDefine("EMISSIVEMAP"),T$W.SHADERDEFINE_AMBIENTMAP=T$W.shaderDefines.registerDefine("AMBIENTMAP"),T$W.SHADERDEFINE_REFLECTMAP=T$W.shaderDefines.registerDefine("REFLECTMAP"),T$W.SHADERDEFINE_UVTRANSFORM=T$W.shaderDefines.registerDefine("UVTRANSFORM"),T$W.SHADERDEFINE_TILINGOFFSET=T$W.shaderDefines.registerDefine("TILINGOFFSET"),T$W.SHADERDEFINE_ADDTIVEFOG=T$W.shaderDefines.registerDefine("ADDTIVEFOG");},T$W.load=function(T$n){return T$k.loader.create(T$n,null,null,T$W);},T$W._parseStandardMaterial=function(T$n,T$C,T$_){var T$E=T$_.customProps,T$y=T$E.ambientColor;T$C.ambientColor=new T$cC(T$y[0],T$y[1],T$y[2]);var T$p=T$E.diffuseColor;T$C.diffuseColor=new T$cC(T$p[0],T$p[1],T$p[2]);var T$c=T$E.specularColor;T$C.specularColor=new T$lC(T$c[0],T$c[1],T$c[2],T$c[3]);var T$l=T$E.reflectColor;T$C.reflectColor=new T$cC(T$l[0],T$l[1],T$l[2]);var T$W=T$E.albedoColor;T$W&&(T$C.albedo=new T$lC(T$W[0],T$W[1],T$W[2],T$W[3]));var T$q=T$E.diffuseTexture.texture2D;T$q&&(T$C.diffuseTexture=T$d.getRes(T$n[T$q]));var T$J=T$E.normalTexture.texture2D;T$J&&(T$C.normalTexture=T$d.getRes(T$n[T$J]));var T$j=T$E.specularTexture.texture2D;T$j&&(T$C.specularTexture=T$d.getRes(T$n[T$j]));var T$P=T$E.emissiveTexture.texture2D;T$P&&(T$C.emissiveTexture=T$d.getRes(T$n[T$P]));var T$x=T$E.ambientTexture.texture2D;T$x&&(T$C.ambientTexture=T$d.getRes(T$n[T$x]));var T$b=T$E.reflectTexture.texture2D;T$b&&(T$C.reflectTexture=T$d.getRes(T$n[T$b]));},T$W.RENDERMODE_OPAQUE=1,T$W.RENDERMODE_OPAQUEDOUBLEFACE=2,T$W.RENDERMODE_CUTOUT=3,T$W.RENDERMODE_CUTOUTDOUBLEFACE=4,T$W.RENDERMODE_TRANSPARENT=13,T$W.RENDERMODE_TRANSPARENTDOUBLEFACE=14,T$W.RENDERMODE_ADDTIVE=15,T$W.RENDERMODE_ADDTIVEDOUBLEFACE=16,T$W.RENDERMODE_DEPTHREAD_TRANSPARENT=5,T$W.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,T$W.RENDERMODE_DEPTHREAD_ADDTIVE=7,T$W.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,T$W.RENDERMODE_NONDEPTH_TRANSPARENT=9,T$W.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,T$W.RENDERMODE_NONDEPTH_ADDTIVE=11,T$W.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,T$W.SHADERDEFINE_DIFFUSEMAP=0,T$W.SHADERDEFINE_NORMALMAP=0,T$W.SHADERDEFINE_SPECULARMAP=0,T$W.SHADERDEFINE_EMISSIVEMAP=0,T$W.SHADERDEFINE_AMBIENTMAP=0,T$W.SHADERDEFINE_REFLECTMAP=0,T$W.SHADERDEFINE_UVTRANSFORM=0,T$W.SHADERDEFINE_TILINGOFFSET=0,T$W.SHADERDEFINE_ADDTIVEFOG=0,T$W.DIFFUSETEXTURE=1,T$W.NORMALTEXTURE=2,T$W.SPECULARTEXTURE=3,T$W.EMISSIVETEXTURE=4,T$W.AMBIENTTEXTURE=5,T$W.REFLECTTEXTURE=6,T$W.ALBEDO=7,T$W.UVANIAGE=8,T$W.MATERIALAMBIENT=9,T$W.MATERIALDIFFUSE=10,T$W.MATERIALSPECULAR=11,T$W.MATERIALREFLECT=12,T$W.UVMATRIX=13,T$W.UVAGE=14,T$W.TILINGOFFSET=15,T$j(T$W,["defaultMaterial",function(){var T$n=new T$W();return T$n.lock=!0,this.defaultMaterial=T$n;},"shaderDefines",function(){return this.shaderDefines=new T$JC(T$MC.shaderDefines);}]),T$W;}(T$MC),T$fC=function(T$n){function T$c(T$n,T$C,T$_,T$E,T$y){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===T$_&&(T$_=35044),void 0===T$E&&(T$E=!1),T$c.__super.call(this),this._indexType=T$n,this._indexCount=T$C,this._bufferUsage=T$_,this._bufferType=34963,this._canRead=T$E;var T$p;if("ushort"==T$n)this._indexTypeByteCount=2;else{if("ubyte"!=T$n)throw new Error("unidentification index type.");this._indexTypeByteCount=1;}T$p=this._indexTypeByteCount*T$C,this._byteLength=T$p,this._bind(),T$l._gl.bufferData(this._bufferType,T$p,this._bufferUsage),this.uri=T$y,T$E?("ushort"==T$n?this._buffer=new Uint16Array(T$C):"ubyte"==T$n&&(this._buffer=new Uint8Array(T$C)),this.memorySize=2*T$p):this.memorySize=T$p;}T$x(T$c,"laya.d3.graphics.IndexBuffer3D",T$n);var T$C=T$c.prototype;return T$C.setData=function(T$n,T$C,T$_,T$E){void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0),void 0===T$E&&(T$E=4294967295);var T$y=0;if("ushort"==this._indexType?(T$y=2,0===T$_&&4294967295===T$E||(T$n=new Uint16Array(T$n.buffer,T$_*T$y,T$E))):"ubyte"==this._indexType&&(T$y=1,0===T$_&&4294967295===T$E||(T$n=new Uint8Array(T$n.buffer,T$_*T$y,T$E))),this._bind(),T$l._gl.bufferSubData(this._bufferType,T$C*T$y,T$n),this._canRead)if(0!==T$C||0!==T$_||4294967295!==T$E){var T$p=this._buffer.length-T$C;T$p<T$E&&(T$E=T$p);for(var T$c=0;T$c<T$E;T$c++)this._buffer[T$C+T$c]=T$n[T$c];}else this._buffer=T$n;},T$C.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!");},T$C.disposeResource=function(){T$n.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0;},T$b(0,T$C,"indexType",function(){return this._indexType;}),T$b(0,T$C,"indexTypeByteCount",function(){return this._indexTypeByteCount;}),T$b(0,T$C,"indexCount",function(){return this._indexCount;}),T$b(0,T$C,"canRead",function(){return this._canRead;}),T$c.INDEXTYPE_UBYTE="ubyte",T$c.INDEXTYPE_USHORT="ushort",T$c.create=function(T$n,T$C,T$_,T$E,T$y){return void 0===T$_&&(T$_=35044),void 0===T$E&&(T$E=!1),new T$c(T$n,T$C,T$_,T$E,T$y);},T$c;}(T$l),T$eC=function(T$p){function T$c(T$n,T$C,T$_,T$E,T$y){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===T$E&&(T$E=!1),T$c.__super.call(this),this._vertexDeclaration=T$n,this._vertexCount=T$C,this._bufferUsage=T$_,this._bufferType=34962,this._canRead=T$E,this.uri=T$y,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*T$C,this._bind(),T$l._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),T$E&&(this._buffer=new Float32Array(this._byteLength/4));}T$x(T$c,"laya.d3.graphics.VertexBuffer3D",T$p);var T$n=T$c.prototype;return T$n.bindWithIndexBuffer=function(T$n){T$n&&T$n._bind(),this._bind();},T$n.setData=function(T$n,T$C,T$_,T$E){if(void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0),void 0===T$E&&(T$E=4294967295),0===T$_&&4294967295===T$E||(T$n=new Float32Array(T$n.buffer,4*T$_,T$E)),this._bind(),T$l._gl.bufferSubData(this._bufferType,4*T$C,T$n),this._canRead)if(0!==T$C||0!==T$_||4294967295!==T$E){var T$y=this._buffer.length-T$C;T$y<T$E&&(T$E=T$y);for(var T$p=0;T$p<T$E;T$p++)this._buffer[T$C+T$p]=T$n[T$p];}else this._buffer=T$n;},T$n.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!");},T$n.disposeResource=function(){for(var T$n=T$w.mainContext,T$C=this._vertexDeclaration.getVertexElements(),T$_=T$l._enableAtributes,T$E=0,T$y=T$C.length;T$E<T$y;T$E++)T$_[T$E]===this._glBuffer&&(T$n.disableVertexAttribArray(T$E),T$_[T$E]=null);T$p.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0;},T$b(0,T$n,"vertexDeclaration",function(){return this._vertexDeclaration;}),T$b(0,T$n,"vertexCount",function(){return this._vertexCount;}),T$b(0,T$n,"canRead",function(){return this._canRead;}),T$c.create=function(T$n,T$C,T$_,T$E,T$y){return void 0===T$_&&(T$_=35044),void 0===T$E&&(T$E=!1),new T$c(T$n,T$C,T$_,T$E,T$y);},T$c;}(T$l),T$GC=function(T$n){function T$O(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,T$O.__super.call(this),this._type=3553;}T$x(T$O,"laya.d3.resource.DataTexture2D",T$wC);var T$C=T$O.prototype;return T$C.genDebugMipmaps=function(){var T$n=[];return T$n.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),T$n.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),T$n.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),T$n.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),T$n.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),T$n.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),T$n.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),T$n.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),T$n.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),T$n.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),T$n;},T$C._onTextureLoaded=function(T$n){},T$C._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var T$n=T$w.mainContext,T$C=this._source=T$n.createTexture(),T$_=this._width,T$E=this._height,T$y=T$B.curBindTexTarget,T$p=T$B.curBindTexValue,T$c=!1;if(T$B.bindTexture(T$n,this._type,T$C),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var T$l=0;T$n.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var T$W=0;T$W<this._mipmaps.length;T$W++){if(this._mipmaps[T$W].byteLength!=T$q*T$J*4)throw"mipmap size error  level:"+T$W;T$n.texSubImage2D(this._type,0,T$O.simLodRect[T$l++],T$O.simLodRect[T$l++],T$O.simLodRect[T$l++],T$O.simLodRect[T$l++],6408,5121,new Uint8Array(this._mipmaps[T$W]));}this.minFifter=9729,this.magFifter=9729;}else{var T$q=this._width,T$J=this._height;for(T$l=0,T$n.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),T$W=0;T$W<this._mipmaps.length;T$W++){if(this._mipmaps[T$W].byteLength!=T$q*T$J*4)throw"mipmap size error  level:"+T$W;T$n.texImage2D(this._type,T$W,6408,T$q,T$J,0,6408,5121,new Uint8Array(this._mipmaps[T$W])),(T$q/=2)<1&&(T$q=1),(T$J/=2)<1&&(T$J=1),this.minFifter=9987,this.magFifter=9729;}}this.mipmap=!1;}else if(this._image)6407==this._format&&T$n.pixelStorei(T$n.UNPACK_ALIGNMENT,1),T$n.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var T$j=0,T$P=!1,T$x=!1;this._buffer.byteLength==4*T$_*T$E?(T$j=6408,T$P=!0):this._buffer.byteLength==3*T$_*T$E?(T$j=6407,T$x=!0):T$j=this._format,T$P||T$x?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),T$x&&T$n.pixelStorei(T$n.UNPACK_ALIGNMENT,1),T$n.texImage2D(this._type,0,T$j,T$_,T$E,0,T$j,5121,this._buffer)):T$n&&T$j==T$n.ALPHA?(T$n.texImage2D(3553,0,T$j,T$_,T$E,0,T$j,T$n.UNSIGNED_BYTE,this._buffer),T$c=!0):0!=T$j&&(T$n.compressedTexImage2D(3553,0,T$j,T$_,T$E,0,this._buffer),T$c=!0);}var T$b=this._minFifter,T$r=this._magFifter,T$m=0==this._wrapModeU?10497:33071,T$d=0==this._wrapModeV?10497:33071,T$a=T$A.isPOT(T$_,T$E);T$a?(this._mipmap||this._mipmaps?-1!==T$b||(T$b=9987):-1!==T$b||(T$b=9729),-1!==T$r||(T$r=9729),T$n.texParameteri(this._type,10241,T$b),T$n.texParameteri(this._type,10240,T$r),T$n.texParameteri(this._type,10242,T$m),T$n.texParameteri(this._type,10243,T$d),this._mipmap&&T$n.generateMipmap(this._type)):(-1!==T$b||(T$b=9729),-1!==T$r||(T$r=9729),T$n.texParameteri(this._type,10241,T$b),T$n.texParameteri(this._type,10240,T$r),T$n.texParameteri(this._type,10242,33071),T$n.texParameteri(this._type,10243,33071)),T$y&&T$p&&T$B.bindTexture(T$n,T$y,T$p),this.memorySize=T$c?this._buffer.length:T$a?T$_*T$E*4*(1+1/3):T$_*T$E*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1;},T$C.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate();}else{this._recreateLock=!0;}},T$C.onAsynLoaded=function(T$n,T$C,T$_){var T$E;T$_&&(T$E=T$_[0].call(this,T$C)),T$E&&(this._width=T$E.width,this._height=T$E.height,this._buffer=T$E.data),this._src=T$n,this._size=new T$rC(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded();},T$C.getPixels=function(){return new Uint8Array(this._buffer);},T$C.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(T$w.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0);},T$b(0,T$C,"src",function(){return this._src;}),T$O.create=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){if(void 0===T$E&&(T$E=9729),void 0===T$y&&(T$y=9729),void 0===T$p&&(T$p=!0),!T$n||T$n.byteLength<T$C*T$_*4)throw"DataTexture2D create error";var T$l=new T$O();return T$l.uri=T$c,T$l._buffer=T$n,T$l._width=T$C,T$l._height=T$_,T$l._mipmap=T$p,T$l._magFifter=T$E,T$l._minFifter=T$y,T$l._size=new T$rC(T$l._width,T$l._height),T$l._conchTexture?alert("怎么给runtime传递datatexture数据"):T$l.activeResource(),T$l;},T$O.load=function(T$n,T$C,T$_,T$E,T$y){if(void 0===T$C&&(T$C=0),void 0===T$_&&(T$_=0),void 0===T$E&&(T$E=9729),void 0===T$y&&(T$y=9729),"mipmaps"===T$N.getFileExtension(T$n)){var T$p=T$k.loader.create(T$n,null,null,T$O,[function(T$n){this._mipmaps=[];var T$C=new Uint32Array(T$n);this._width=T$C[0];var T$_=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,T$_=1024),this._width!=T$_)throw"现在只支持512x256的环境贴图。当前的是"+T$C[0];this._height=T$C[1];for(var T$E=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,T$y=this._height,T$p=8;;){var T$c=T$E*T$y*4;if(T$p+T$c>T$n.byteLength)throw"load mipmaps data size error ";var T$l=new Uint8Array(T$n,T$p,T$c);if(this._mipmaps.push(T$l),T$p+=T$c,1==T$E&&1==T$y)break;(T$E/=2)<1&&(T$E=1),(T$y/=2)<1&&(T$y=1);}return null;}]);if(laya.d3.resource.DataTexture2D.lodasatlas){T$p.simLodInfo=new Float32Array(40);for(var T$c=0;T$c<T$p.simLodInfo.length;)T$p.simLodInfo[T$c]=(T$O.simLodRect[T$c]+.5)/1024,T$c++,T$p.simLodInfo[T$c]=(T$O.simLodRect[T$c]+.5)/256,T$c++,T$p.simLodInfo[T$c]=Math.max(T$O.simLodRect[T$c]-1,.1)/1024,T$c++,T$p.simLodInfo[T$c]=Math.max(T$O.simLodRect[T$c]-1.5,.1)/256,T$c++;}return T$p;}if("number"==typeof T$C)return T$k.loader.create(T$n,null,null,T$O,[function(T$n){return this._width=T$C,this._height=T$_,this._buffer=T$n,null;}]);if("function"==typeof T$C)return T$k.loader.create(T$n,null,null,T$O,[T$C]);throw new Error("unknown params.");},T$O.lodasatlas=!1,T$j(T$O,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1]);}]),T$O;}(),T$FC=function(T$n){function T$C(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,T$C.__super.call(this);}T$x(T$C,"laya.d3.resource.models.PrimitiveMesh",T$BC);var T$_=T$C.prototype;return T$k.imps(T$_,{"laya.d3.core.render.IRenderable":!0}),T$_._getVertexBuffer=function(T$n){return void 0===T$n&&(T$n=0),0===T$n?this._vertexBuffer:null;},T$_._getVertexBuffers=function(){return null;},T$_._getIndexBuffer=function(){return this._indexBuffer;},T$_._getPositions=function(){var T$n,T$C=[],T$_=this._vertexBuffer.vertexDeclaration.getVertexElements(),T$E=0;for(T$E=0;T$E<T$_.length;T$E++){var T$y=T$_[T$E];if("vector3"===T$y.elementFormat&&0===T$y.elementUsage){T$n=T$y;break;}}var T$p=this._vertexBuffer.getData();for(T$E=0;T$E<T$p.length;T$E+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var T$c=T$E+T$n.offset/4,T$l=new T$cC(T$p[T$c+0],T$p[T$c+1],T$p[T$c+2]);T$C.push(T$l);}return T$C;},T$_.getRenderElement=function(T$n){return this;},T$_.getRenderElementsCount=function(){return 1;},T$_.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0;},T$_._beforeRender=function(T$n){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0;},T$_._render=function(T$n){T$w.mainContext.drawElements(4,this._numberIndices,5123,0),T$Y.drawCall++,T$Y.trianglesFaces+=this._numberIndices/3;},T$b(0,T$_,"_vertexBufferCount",function(){return 1;}),T$b(0,T$_,"triangleCount",function(){return this._indexBuffer.indexCount/3;}),T$C;}(),T$uC=function(T$n){function T$C(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,T$C.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[];}T$x(T$C,"laya.d3.resource.models.Mesh",T$BC);var T$_=T$C.prototype;return T$_._getPositions=function(){var T$n,T$C,T$_,T$E,T$y,T$p=[],T$c=0,T$l=0,T$W=0;if(0!==this._vertexBuffers.length){var T$q=this._vertexBuffers.length;for(T$c=0;T$c<T$q;T$c++){for(T$_=(T$n=this._vertexBuffers[T$c]).vertexDeclaration.getVertexElements(),T$l=0;T$l<T$_.length;T$l++)if("vector3"===(T$E=T$_[T$l]).elementFormat&&0===T$E.elementUsage){T$C=T$E;break;}for(T$y=T$n.getData(),T$l=0;T$l<T$y.length;T$l+=T$n.vertexDeclaration.vertexStride/4)T$W=T$l+T$C.offset/4,T$p.push(new T$cC(T$y[T$W+0],T$y[T$W+1],T$y[T$W+2]));}}else{var T$J=this._subMeshes.length;for(T$c=0;T$c<T$J;T$c++){for(T$_=(T$n=this._subMeshes[T$c]._getVertexBuffer()).vertexDeclaration.getVertexElements(),T$l=0;T$l<T$_.length;T$l++)if("vector3"===(T$E=T$_[T$l]).elementFormat&&0===T$E.elementUsage){T$C=T$E;break;}for(T$y=T$n.getData(),T$l=0;T$l<T$y.length;T$l+=T$n.vertexDeclaration.vertexStride/4)T$W=T$l+T$C.offset/4,T$p.push(new T$cC(T$y[T$W+0],T$y[T$W+1],T$y[T$W+2]));}}return T$p;},T$_._setSubMeshes=function(T$n){this._subMeshes=T$n,this._subMeshCount=T$n.length;for(var T$C=0;T$C<this._subMeshCount;T$C++)T$n[T$C]._indexInMesh=T$C;this._positions=this._getPositions(),this._generateBoundingObject();},T$_.onAsynLoaded=function(T$n,T$C,T$_){var T$E=T$C[0],T$y=T$C[1];T$vn.read(T$E,this,this._materials,this._subMeshes,T$y),this.completeCreate(),this._endLoaded();},T$_.getSubMesh=function(T$n){return this._subMeshes[T$n];},T$_.getSubMeshCount=function(){return this._subMeshes.length;},T$_.getRenderElementsCount=function(){return this._subMeshes.length;},T$_.getRenderElement=function(T$n){return this._subMeshes[T$n];},T$_.disposeResource=function(){for(var T$n=0;T$n<this._subMeshes.length;T$n++)this._subMeshes[T$n].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null;},T$b(0,T$_,"materials",function(){return this._materials.slice();}),T$b(0,T$_,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses;}),T$C.load=function(T$n){return T$k.loader.create(T$n,null,null,T$C);},T$C;}(),T$oC=(function(T$n){function T$q(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===T$_&&(T$_=6408),void 0===T$E&&(T$E=5121),void 0===T$y&&(T$y=33189),void 0===T$p&&(T$p=!1),void 0===T$c&&(T$c=!1),void 0===T$l&&(T$l=-1),void 0===T$W&&(T$W=-1),T$q.__super.call(this),this._type=3553,this._width=T$n,this._height=T$C,this._size=new T$rC(T$n,T$C),this._surfaceFormat=T$_,this._surfaceType=T$E,this._depthStencilFormat=T$y,T$r.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=T$p,this._repeat=T$c,this._minFifter=T$l,this._magFifter=T$W,this.activeResource(),this._alreadyResolved=!0;}T$x(T$q,"laya.d3.resource.RenderTexture",T$wC);var T$C=T$q.prototype;T$C.recreateResource=function(){var T$n=T$w.mainContext;this._frameBuffer=T$n.createFramebuffer(),this._source=T$n.createTexture();var T$C=T$B.curBindTexTarget,T$_=T$B.curBindTexValue;T$B.bindTexture(T$n,this._type,this._source),T$n.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var T$E=this._minFifter,T$y=this._magFifter,T$p=this._repeat?10497:33071;if(T$A.isPOT(this._width,this._height)?(this._mipmap?-1!==T$E||(T$E=9987):-1!==T$E||(T$E=9729),-1!==T$y||(T$y=9729),T$n.texParameteri(this._type,10241,T$E),T$n.texParameteri(this._type,10240,T$y),T$n.texParameteri(this._type,10242,T$p),T$n.texParameteri(this._type,10243,T$p),this._mipmap&&T$n.generateMipmap(this._type)):(-1!==T$E||(T$E=9729),-1!==T$y||(T$y=9729),T$n.texParameteri(this._type,10241,T$E),T$n.texParameteri(this._type,10240,T$y),T$n.texParameteri(this._type,10242,33071),T$n.texParameteri(this._type,10243,33071)),T$C&&T$_&&T$B.bindTexture(T$n,T$C,T$_),T$n.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=T$n.createRenderbuffer(),T$n.bindRenderbuffer(36161,this._depthStencilBuffer),T$n.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),T$n.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:T$n.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:T$n.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:T$n.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer);}T$n.framebufferTexture2D(36160,36064,3553,this._source,0),T$n.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate();},T$C.start=function(){T$w.mainContext.bindFramebuffer(36160,this.frameBuffer),(T$q._currentRenderTarget=this)._alreadyResolved=!1;},T$C.end=function(){T$w.mainContext.bindFramebuffer(36160,null),T$q._currentRenderTarget=null,this._alreadyResolved=!0;},T$C.getData=function(T$n,T$C,T$_,T$E){var T$y=T$w.mainContext;if(T$y.bindFramebuffer(36160,this._frameBuffer),!(36053===T$y.checkFramebufferStatus(36160)))return T$y.bindFramebuffer(36160,null),null;var T$p=new Uint8Array(this._width*this._height*4);return T$y.readPixels(T$n,T$C,T$_,T$E,this._surfaceFormat,this._surfaceType,T$p),T$y.bindFramebuffer(36160,null),T$p;},T$C.disposeResource=function(){if(this._frameBuffer){var T$n=T$w.mainContext;T$n.deleteTexture(this._source),T$n.deleteFramebuffer(this._frameBuffer),T$n.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0;}},T$b(0,T$C,"surfaceFormat",function(){return this._surfaceFormat;}),T$b(0,T$C,"surfaceType",function(){return this._surfaceType;}),T$b(0,T$C,"depthStencilFormat",function(){return this._depthStencilFormat;}),T$b(0,T$C,"source",function(){return this._alreadyResolved?T$k.superGet(T$wC,this,"source"):null;}),T$b(0,T$C,"depthStencilBuffer",function(){return this._depthStencilBuffer;}),T$b(0,T$C,"frameBuffer",function(){return this._frameBuffer;}),T$q._currentRenderTarget=null;}(),function(T$n){function T$C(T$n){this._color=null,this._pixels=null,T$C.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new T$rC(this.width,this.height),this._color=T$n,this._pixels=new Uint8Array([255*T$n.x,255*T$n.y,255*T$n.z,255*T$n.w]),this.uri="SolidColorTexture2D_"+this.id;}T$x(T$C,"laya.d3.resource.SolidColorTexture2D",T$wC);var T$_=T$C.prototype;return T$_._createWebGlTexture=function(){var T$n=T$w.mainContext,T$C=this._source=T$n.createTexture(),T$_=this._width,T$E=this._height,T$y=T$B.curBindTexTarget,T$p=T$B.curBindTexValue;T$B.bindTexture(T$n,this._type,T$C),T$n.texImage2D(this._type,0,6408,T$_,T$E,0,6408,5121,this._pixels);var T$c=this._minFifter,T$l=this._magFifter,T$W=this._repeat?10497:33071,T$q=T$A.isPOT(T$_,T$E);T$q?(this._mipmap?-1!==T$c||(T$c=9987):-1!==T$c||(T$c=9729),-1!==T$l||(T$l=9729),T$n.texParameteri(this._type,10241,T$c),T$n.texParameteri(this._type,10240,T$l),T$n.texParameteri(this._type,10242,T$W),T$n.texParameteri(this._type,10243,T$W),this._mipmap&&T$n.generateMipmap(this._type)):(-1!==T$c||(T$c=9729),-1!==T$l||(T$l=9729),T$n.texParameteri(this._type,10241,T$c),T$n.texParameteri(this._type,10240,T$l),T$n.texParameteri(this._type,10242,33071),T$n.texParameteri(this._type,10243,33071)),T$y&&T$p&&T$B.bindTexture(T$n,T$y,T$p),this.memorySize=T$q?T$_*T$E*4*(1+1/3):T$_*T$E*4;},T$_.recreateResource=function(){this._createWebGlTexture(),this.completeCreate();},T$_.disposeResource=function(){this._source&&(T$w.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0);},T$j(T$C,["magentaTexture",function(){var T$n=new T$C(new T$lC(1,0,1,1));return T$n.lock=!0,this.magentaTexture=T$n;},"grayTexture",function(){var T$n=new T$C(new T$lC(.5,.5,.5,1));return T$n.lock=!0,this.grayTexture=T$n;}]),T$C;}()),T$QC=function(T$n){function T$y(T$n,T$C,T$_,T$E){this._canRead=!1,this._image=null,this._pixels=null,void 0===T$n&&(T$n=!1),void 0===T$C&&(T$C=!0),void 0===T$_&&(T$_=6408),void 0===T$E&&(T$E=!0),T$y.__super.call(this),this._type=3553,this._repeat=T$C,this._canRead=T$n,this._format=T$_,this._mipmap=T$E;}T$x(T$y,"laya.d3.resource.Texture2D",T$wC);var T$C=T$y.prototype;return T$C._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var T$n=T$w.mainContext,T$C=this._source=T$n.createTexture(),T$_=this._width,T$E=this._height,T$y=T$B.curBindTexTarget,T$p=T$B.curBindTexValue;switch(T$B.bindTexture(T$n,this._type,T$C),this._format){case 6407:case 6408:this._canRead?T$n.texImage2D(this._type,0,this._format,T$_,T$E,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?T$n.texImage2D(this._type,0,this._image._format,T$_,T$E,0,this._image._format,5121,this._image.atlasSource):T$n.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case T$w.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:T$n.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format);}var T$c=this._minFifter,T$l=this._magFifter,T$W=this._repeat?10497:33071,T$q=0==this._wrapModeU?10497:33071,T$J=0==this._wrapModeV?10497:33071,T$j=T$A.isPOT(T$_,T$E);T$j?(this._mipmap?-1!==T$c||(T$c=9987):-1!==T$c||(T$c=9729),-1!==T$l||(T$l=9729),T$n.texParameteri(this._type,10241,T$c),T$n.texParameteri(this._type,10240,T$l),T$n.texParameteri(this._type,10242,T$W),T$n.texParameteri(this._type,10243,T$W),T$n.texParameteri(this._type,10242,T$q),T$n.texParameteri(this._type,10243,T$J),this._mipmap&&T$n.generateMipmap(this._type)):(-1!==T$c||(T$c=9729),-1!==T$l||(T$l=9729),T$n.texParameteri(this._type,10241,T$c),T$n.texParameteri(this._type,10240,T$l),T$n.texParameteri(this._type,10242,33071),T$n.texParameteri(this._type,10243,33071)),T$y&&T$p&&T$B.bindTexture(T$n,T$y,T$p),this._image.onload=null,this._image=null,this.memorySize=T$j?T$_*T$E*4*(1+1/3):T$_*T$E*4;},T$C.recreateResource=function(){this._createWebGlTexture(),this.completeCreate();},T$C.onAsynLoaded=function(T$n,T$C,T$_){if(T$_){var T$E=T$_[0];void 0!==T$E&&(this._canRead=T$E);var T$y=T$_[1];void 0!==T$y&&(this._repeat=T$y);var T$p=T$_[2];void 0!==T$p&&(this._format=T$p);var T$c=T$_[3];void 0!==T$c&&(this._mipmap=T$c);var T$l=T$_.wrapModeU;void 0!==T$l&&(this._wrapModeU=T$l);var T$W=T$_.wrapModeV;void 0!==T$W&&(this._wrapModeV=T$W);}switch(this._format){case 6407:case 6408:var T$q=(this._image=T$C).width,T$J=T$C.height;this._width=T$q,this._height=T$J,this._size=new T$rC(T$q,T$J),this._canRead&&(T$r.isConchApp?T$C instanceof T$P.HTMLElement&&(this._pixels=new Uint8Array(T$C.getImageData(0,0,T$q,T$J))):(T$V.canvas.size(T$q,T$J),T$V.canvas.clear(),T$V.context.drawImage(T$C,0,0,T$q,T$J),this._pixels=new Uint8Array(T$V.context.getImageData(0,0,T$q,T$J).data.buffer)));break;case T$w.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var T$j=new T$t(T$C);T$j.readUTFBytes(4),T$j.readUTFBytes(2),T$j.getInt16();T$j.endian="bigEndian",this._width=T$j.getInt16(),this._height=T$j.getInt16(),this._size=new T$rC(this._width,this._height);T$j.getInt16(),T$j.getInt16();this._image=new Uint8Array(T$C,T$j.pos);}this.recreateResource(),this._endLoaded();},T$C.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.");},T$C.disposeResource=function(){this._source&&(T$w.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0);},T$b(0,T$C,"_src",function(){return this.url;}),T$b(0,T$C,"src",function(){return this.url;}),T$y.load=function(T$n){return T$k.loader.create(T$n,null,null,T$y);},T$y;}(),T$IC=function(T$C){function T$_(T$n,T$C){T$_.__super.call(this),void 0===T$n&&(T$n=.3),void 0===T$C&&(T$C=1e3),this._tempVector3=new T$cC(),this._position=new T$cC(),this._up=new T$cC(),this._forward=new T$cC(),this._right=new T$cC(),this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=T$rC.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=T$n,this._farPlane=T$C,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),T$k.stage.on("resize",this,this._onScreenSizeChanged);}T$x(T$_,"laya.d3.core.BaseCamera",T$C);var T$n=T$_.prototype;return T$n._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var T$n=this.scene._cameraPool,T$C=T$n.length-1,T$_=0;T$_<T$C;T$_++)if(T$n[T$_].renderingOrder>T$n[T$C].renderingOrder){var T$E=T$n[T$_];T$n[T$_]=T$n[T$C],T$n[T$C]=T$E;}},T$n._calculateProjectionMatrix=function(){},T$n._onScreenSizeChanged=function(){this._calculateProjectionMatrix();},T$n._prepareCameraToRender=function(){T$g._currentCameraCullingMask=this.cullingMask;var T$n=this._shaderValues;T$n.setValue(0,this.transform.position.elements),T$n.setValue(5,this.forward.elements),T$n.setValue(6,this.up.elements);},T$n._prepareCameraViewProject=function(T$n,T$C){var T$_=this._shaderValues;T$_.setValue(1,T$n.elements),T$_.setValue(2,T$C.elements);},T$n._renderCamera=function(T$n,T$C,T$_){},T$n.addLayer=function(T$n){29!==T$n.number&&30!=T$n.number&&(this.cullingMask=this.cullingMask|T$n.mask);},T$n.removeLayer=function(T$n){29!==T$n.number&&30!=T$n.number&&(this.cullingMask=this.cullingMask&~T$n.mask);},T$n.addAllLayers=function(){this.cullingMask=2147483647;},T$n.removeAllLayers=function(){this.cullingMask=0|T$g.getLayerByNumber(29).mask|T$g.getLayerByNumber(30).mask;},T$n.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix();},T$n.moveForward=function(T$n){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=T$n,this.transform.translate(this._tempVector3);},T$n.moveRight=function(T$n){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=T$n,this.transform.translate(this._tempVector3);},T$n.moveVertical=function(T$n){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=T$n,this.transform.translate(this._tempVector3,!1);},T$n._addSelfRenderObjects=function(){var T$n=this.scene._cameraPool,T$C=T$n.length;if(0<T$C){for(var T$_=T$C-1;0<=T$_;T$_--)if(this.renderingOrder<=T$n[T$_].renderingOrder){T$n.splice(T$_+1,0,this);break;}}else T$n.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel);},T$n._clearSelfRenderObjects=function(){var T$n=this.scene._cameraPool;T$n.splice(T$n.indexOf(this),1);},T$n.destroy=function(T$n){void 0===T$n&&(T$n=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,T$k.stage.off("resize",this,this._onScreenSizeChanged),T$C.prototype.destroy.call(this,T$n);},T$b(0,T$n,"sky",function(){return this._sky;},function(T$n){(this._sky=T$n)._ownerCamera=this;}),T$b(0,T$n,"forward",function(){var T$n=this.transform.worldMatrix.elements,T$C=this._forward.elements;return T$C[0]=-T$n[8],T$C[1]=-T$n[9],T$C[2]=-T$n[10],this._forward;}),T$b(0,T$n,"position",function(){var T$n=this.transform.worldMatrix.elements,T$C=this._position.elements;return T$C[0]=T$n[12],T$C[1]=T$n[13],T$C[2]=T$n[14],this._position;}),T$b(0,T$n,"renderTarget",function(){return this._renderTarget;},function(T$n){null!=(this._renderTarget=T$n)&&(this._renderTargetSize=T$n.size);}),T$b(0,T$n,"up",function(){var T$n=this.transform.worldMatrix.elements,T$C=this._up.elements;return T$C[0]=T$n[4],T$C[1]=T$n[5],T$C[2]=T$n[6],this._up;}),T$b(0,T$n,"right",function(){var T$n=this.transform.worldMatrix.elements,T$C=this._right.elements;return T$C[0]=T$n[0],T$C[1]=T$n[1],T$C[2]=T$n[2],this._right;}),T$b(0,T$n,"renderTargetSize",function(){return this._renderTargetSize;},function(T$n){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=T$n,this._calculateProjectionMatrix();}),T$b(0,T$n,"fieldOfView",function(){return this._fieldOfView;},function(T$n){this._fieldOfView=T$n,this._calculateProjectionMatrix();}),T$b(0,T$n,"nearPlane",function(){return this._nearPlane;},function(T$n){this._nearPlane=T$n,this._calculateProjectionMatrix();}),T$b(0,T$n,"farPlane",function(){return this._farPlane;},function(T$n){this._farPlane=T$n,this._calculateProjectionMatrix();}),T$b(0,T$n,"orthographic",function(){return this._orthographic;},function(T$n){this._orthographic=T$n,this._calculateProjectionMatrix();}),T$b(0,T$n,"orthographicVerticalSize",function(){return this._orthographicVerticalSize;},function(T$n){this._orthographicVerticalSize=T$n,this._calculateProjectionMatrix();}),T$b(0,T$n,"renderingOrder",function(){return this._renderingOrder;},function(T$n){this._renderingOrder=T$n,this._sortCamerasByRenderingOrder();}),T$_.CAMERAPOS=0,T$_.VIEWMATRIX=1,T$_.PROJECTMATRIX=2,T$_.VPMATRIX=3,T$_.VPMATRIX_NO_TRANSLATE=4,T$_.CAMERADIRECTION=5,T$_.CAMERAUP=6,T$_.ENVIRONMENTDIFFUSE=7,T$_.ENVIRONMENTSPECULAR=8,T$_.SIMLODINFO=9,T$_.DIFFUSEIRRADMATR=10,T$_.DIFFUSEIRRADMATG=11,T$_.DIFFUSEIRRADMATB=12,T$_.HDREXPOSURE=13,T$_.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",T$_.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",T$_.CLEARFLAG_SOLIDCOLOR=0,T$_.CLEARFLAG_SKY=1,T$_.CLEARFLAG_DEPTHONLY=2,T$_.CLEARFLAG_NONE=3,T$j(T$_,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new T$nC(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1);},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new T$nC();},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new T$nC();}]),T$_;}(T$XC),T$ZC=function(T$_){function T$C(T$n){this._render=null,this._geometryFilter=null,T$C.__super.call(this,T$n);}T$x(T$C,"laya.d3.core.RenderableSprite3D",T$_);var T$n=T$C.prototype;return T$n._addToInitStaticBatchManager=function(){},T$n._setBelongScene=function(T$n){T$_.prototype._setBelongScene.call(this,T$n),T$n._renderableSprite3Ds.push(this),this._render._applyLightMapParams();},T$n._setUnBelongScene=function(){var T$n=this._scene._renderableSprite3Ds,T$C=T$n.indexOf(this);T$n.splice(T$C,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),T$_.prototype._setUnBelongScene.call(this);},T$n._update=function(T$n){(T$n.owner=this)._activeInHierarchy&&(this._updateComponents(T$n),this._render._updateOctreeNode(),this._lateUpdateComponents(T$n),T$Y.spriteCount++,this._childs.length&&this._updateChilds(T$n));},T$n.destroy=function(T$n){void 0===T$n&&(T$n=!0),T$_.prototype.destroy.call(this,T$n),this._render._destroy(),this._render=null;},T$C.__init__=function(){T$C.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=T$C.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),T$C.SAHDERDEFINE_LIGHTMAP=T$C.shaderDefines.registerDefine("LIGHTMAP");},T$C.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,T$C.SAHDERDEFINE_LIGHTMAP=4,T$C.LIGHTMAPSCALEOFFSET=2,T$C.LIGHTMAP=3,T$j(T$C,["shaderDefines",function(){return this.shaderDefines=new T$JC();}]),T$C;}(T$XC),T$LC=(function(T$n){function T$E(T$n,T$C,T$_){this._long=NaN,this._width=NaN,this._height=NaN,void 0===T$n&&(T$n=1),void 0===T$C&&(T$C=1),void 0===T$_&&(T$_=1),T$E.__super.call(this),this._long=T$n,this._width=T$C,this._height=T$_,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject();}T$x(T$E,"laya.d3.resource.models.BoxMesh",T$FC);var T$C=T$E.prototype;T$C.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var T$n=T$wn.vertexDeclaration,T$C=(T$n.vertexStride,this._long/2),T$_=this._height/2,T$E=this._width/2,T$y=new Float32Array([-T$C,T$_,-T$E,0,1,0,0,0,T$C,T$_,-T$E,0,1,0,1,0,T$C,T$_,T$E,0,1,0,1,1,-T$C,T$_,T$E,0,1,0,0,1,-T$C,-T$_,-T$E,0,-1,0,0,1,T$C,-T$_,-T$E,0,-1,0,1,1,T$C,-T$_,T$E,0,-1,0,1,0,-T$C,-T$_,T$E,0,-1,0,0,0,-T$C,T$_,-T$E,-1,0,0,0,0,-T$C,T$_,T$E,-1,0,0,1,0,-T$C,-T$_,T$E,-1,0,0,1,1,-T$C,-T$_,-T$E,-1,0,0,0,1,T$C,T$_,-T$E,1,0,0,1,0,T$C,T$_,T$E,1,0,0,0,0,T$C,-T$_,T$E,1,0,0,0,1,T$C,-T$_,-T$E,1,0,0,1,1,-T$C,T$_,T$E,0,0,1,0,0,T$C,T$_,T$E,0,0,1,1,0,T$C,-T$_,T$E,0,0,1,1,1,-T$C,-T$_,T$E,0,0,1,0,1,-T$C,T$_,-T$E,0,0,-1,1,0,T$C,T$_,-T$E,0,0,-1,0,0,T$C,-T$_,-T$E,0,0,-1,0,1,-T$C,-T$_,-T$E,0,0,-1,1,1]),T$p=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new T$eC(T$n,this._numberVertices,35044,!0),this._indexBuffer=new T$fC("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(T$y),this._indexBuffer.setData(T$p),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate();},T$b(0,T$C,"long",function(){return this._long;},function(T$n){this._long!==T$n&&(this._long=T$n,this.releaseResource(),this.activeResource());}),T$b(0,T$C,"width",function(){return this._width;},function(T$n){this._width!==T$n&&(this._width=T$n,this.releaseResource(),this.activeResource());}),T$b(0,T$C,"height",function(){return this._height;},function(T$n){this._height!==T$n&&(this._height=T$n,this.releaseResource(),this.activeResource());});}(),function(T$n){function T$y(T$n,T$C,T$_,T$E){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===T$n&&(T$n=10),void 0===T$C&&(T$C=10),void 0===T$_&&(T$_=10),void 0===T$E&&(T$E=10),T$y.__super.call(this),this._long=T$n,this._width=T$C,this._stacks=T$_,this._slices=T$E,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject();}T$x(T$y,"laya.d3.resource.models.PlaneMesh",T$FC);var T$C=T$y.prototype;T$C.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var T$n=new Uint16Array(this._numberIndices),T$C=T$wn.vertexDeclaration,T$_=T$C.vertexStride/4,T$E=new Float32Array(this._numberVertices*T$_),T$y=this._long/2,T$p=this._width/2,T$c=this._long/this._stacks,T$l=this._width/this._slices,T$W=0,T$q=0;T$q<=this._slices;T$q++)for(var T$J=0;T$J<=this._stacks;T$J++)T$E[T$W++]=T$J*T$c-T$y,T$E[T$W++]=0,T$E[T$W++]=T$q*T$l-T$p,T$E[T$W++]=0,T$E[T$W++]=1,T$E[T$W++]=0,T$E[T$W++]=1*T$J/this._stacks,T$E[T$W++]=1*T$q/this._slices;var T$j=0;for(T$q=0;T$q<this._slices;T$q++)for(T$J=0;T$J<this._stacks;T$J++)T$n[T$j++]=(T$q+1)*(this._stacks+1)+T$J,T$n[T$j++]=T$q*(this._stacks+1)+T$J,T$n[T$j++]=(T$q+1)*(this._stacks+1)+T$J+1,T$n[T$j++]=T$q*(this._stacks+1)+T$J,T$n[T$j++]=T$q*(this._stacks+1)+T$J+1,T$n[T$j++]=(T$q+1)*(this._stacks+1)+T$J+1;this._vertexBuffer=new T$eC(T$C,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new T$fC("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(T$E),this._indexBuffer.setData(T$n),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate();},T$b(0,T$C,"long",function(){return this._long;},function(T$n){this._long!==T$n&&(this._long=T$n,this.releaseResource(),this.activeResource());}),T$b(0,T$C,"width",function(){return this._width;},function(T$n){this._width!==T$n&&(this._width=T$n,this.releaseResource(),this.activeResource());}),T$b(0,T$C,"stacks",function(){return this._stacks;},function(T$n){this._stacks!==T$n&&(this._stacks=T$n,this.releaseResource(),this.activeResource());}),T$b(0,T$C,"slices",function(){return this._slices;},function(T$n){this._slices!==T$n&&(this._slices=T$n,this.releaseResource(),this.activeResource());});}(),function(T$n){function T$c(T$n,T$C,T$_){void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=.3),void 0===T$_&&(T$_=1e3),this._viewMatrix=new T$nC(),this._projectionMatrix=new T$nC(),this._projectionViewMatrix=new T$nC(),this._viewport=new T$WC(0,0,0,0),this._normalizedViewport=new T$WC(0,0,1,1),this._aspectRatio=T$n,this._boundFrustumUpdate=!0,this._boundFrustum=new T$zn(T$nC.DEFAULT),T$c.__super.call(this,T$C,T$_),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged);}T$x(T$c,"laya.d3.core.Camera",T$IC);var T$C=T$c.prototype;return T$C._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0;},T$C._parseCustomProps=function(T$n,T$C,T$_,T$E){var T$y=T$_.clearColor;this.clearColor=new T$lC(T$y[0],T$y[1],T$y[2],T$y[3]);var T$p=T$_.viewport;this.normalizedViewport=new T$WC(T$p[0],T$p[1],T$p[2],T$p[3]);},T$C._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var T$n=this.orthographicVerticalSize*this.aspectRatio*.5,T$C=.5*this.orthographicVerticalSize;T$nC.createOrthoOffCenterRH(-T$n,T$n,-T$C,T$C,this.nearPlane,this.farPlane,this._projectionMatrix);}else T$nC.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0;},T$C._update=function(T$n){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,T$n);},T$C._renderCamera=function(T$n,T$C,T$_){var T$E,T$y;T$_.parallelSplitShadowMaps[0]&&T$_._renderShadowMap(T$n,T$C,this),(T$C.camera=this)._prepareCameraToRender(),T$_._preRenderUpdateComponents(T$C),T$E=T$C._viewMatrix=this.viewMatrix;var T$p=this._renderTarget;T$p?(T$p.start(),T$nC.multiply(T$IC._invertYScaleMatrix,this._projectionMatrix,T$IC._invertYProjectionMatrix),T$nC.multiply(T$IC._invertYScaleMatrix,this.projectionViewMatrix,T$IC._invertYProjectionViewMatrix),T$y=T$C._projectionMatrix=T$IC._invertYProjectionMatrix,T$C._projectionViewMatrix=T$IC._invertYProjectionViewMatrix):(T$y=T$C._projectionMatrix=this._projectionMatrix,T$C._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(T$E,T$y),T$C._viewport=this.viewport,T$_._preRenderScene(T$n,T$C,this.boundFrustum),T$_._clear(T$n,T$C),T$_._renderScene(T$n,T$C),T$_._postRenderUpdateComponents(T$C),T$p&&T$p.end();},T$C.viewportPointToRay=function(T$n,T$C){T$bC.calculateCursorRay(T$n,this.viewport,this._projectionMatrix,this.viewMatrix,null,T$C);},T$C.normalizedViewportPointToRay=function(T$n,T$C){var T$_=T$c._tempVector20,T$E=this.viewport,T$y=T$n.elements,T$p=T$_.elements;T$p[0]=T$y[0]*T$E.width,T$p[1]=T$y[1]*T$E.height,T$bC.calculateCursorRay(T$_,this.viewport,this._projectionMatrix,this.viewMatrix,null,T$C);},T$C.worldToViewportPoint=function(T$n,T$C){T$nC.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(T$n,this._projectionViewMatrix,T$C);var T$_=T$C.elements;T$_[0]=T$_[0]/T$k.stage.clientScaleX,T$_[1]=T$_[1]/T$k.stage.clientScaleY;},T$C.worldToNormalizedViewportPoint=function(T$n,T$C){T$nC.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(T$n,this._projectionViewMatrix,T$C);var T$_=T$C.elements;T$_[0]=T$_[0]/T$k.stage.clientScaleX,T$_[1]=T$_[1]/T$k.stage.clientScaleY;},T$C.convertScreenCoordToOrthographicCoord=function(T$n,T$C){if(this._orthographic){var T$_=T$v.clientWidth,T$E=T$v.clientHeight,T$y=this.orthographicVerticalSize*this.aspectRatio/T$_,T$p=this.orthographicVerticalSize/T$E,T$c=T$n.elements,T$l=T$C.elements;return T$l[0]=(-T$_/2+T$c[0])*T$y,T$l[1]=(T$E/2-T$c[1])*T$p,T$l[2]=(this.nearPlane-this.farPlane)*(T$c[2]+1)/2-this.nearPlane,T$cC.transformCoordinate(T$C,this.transform.worldMatrix,T$C),!0;}return!1;},T$b(0,T$C,"projectionViewMatrix",function(){return T$nC.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix;}),T$b(0,T$C,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var T$n=this.viewport;return T$n.width/T$n.height;},function(T$n){if(T$n<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=T$n,this._calculateProjectionMatrix();}),T$b(0,T$C,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum;}),T$b(0,T$C,"needViewport",function(){var T$n=this.normalizedViewport;return 0===T$n.x&&0===T$n.y&&1===T$n.width&&1===T$n.height;}),T$b(0,T$C,"viewport",function(){if(this._viewportExpressedInClipSpace){var T$n=this._normalizedViewport,T$C=this.renderTargetSize,T$_=T$C.width,T$E=T$C.height;this._viewport.x=T$n.x*T$_,this._viewport.y=T$n.y*T$E,this._viewport.width=T$n.width*T$_,this._viewport.height=T$n.height*T$E;}return this._viewport;},function(T$n){if(null!=this.renderTarget&&(T$n.x<0||T$n.y<0||0==T$n.width||0==T$n.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=T$n,this._calculateProjectionMatrix();}),T$b(0,T$C,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var T$n=this._viewport,T$C=this.renderTargetSize,T$_=T$C.width,T$E=T$C.height;this._normalizedViewport.x=T$n.x/T$_,this._normalizedViewport.y=T$n.y/T$E,this._normalizedViewport.width=T$n.width/T$_,this._normalizedViewport.height=T$n.height/T$E;}return this._normalizedViewport;},function(T$n){T$n.x<0&&(T$n.x=0,console.warn("Camera: viewport.x must large than 0.0.")),T$n.y<0&&(T$n.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<T$n.x+T$n.width&&(T$n.width=1-T$n.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<T$n.y+T$n.height&&(T$n.height=1-T$n.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=T$n,this._calculateProjectionMatrix();}),T$b(0,T$C,"projectionMatrix",function(){return this._projectionMatrix;},function(T$n){this._projectionMatrix=T$n,this._useUserProjectionMatrix=!0;}),T$b(0,T$C,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix;}),T$j(T$c,["_tempVector20",function(){return this._tempVector20=new T$pC();}]),T$c;}()),T$hC=function(T$_){function T$E(T$n,T$C){T$E.__super.call(this,T$C),this._geometryFilter=new T$VC(this),this._render=new T$gC(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),T$n&&(this._geometryFilter.sharedMesh=T$n)instanceof laya.d3.resource.models.Mesh&&(T$n.loaded?this._render.sharedMaterials=T$n.materials:T$n.once("loaded",this,this._applyMeshMaterials));}T$x(T$E,"laya.d3.core.MeshSprite3D",T$_);var T$n=T$E.prototype;return T$n._changeRenderObjectByMesh=function(T$n){var T$C=this._render._renderElements,T$_=T$C[T$n];T$_||(T$_=T$C[T$n]=new T$TC()),T$_._render=this._render;var T$E=this._render.sharedMaterials[T$n];T$E||(T$E=T$iC.defaultMaterial);var T$y=this._geometryFilter.sharedMesh.getRenderElement(T$n);return T$_._mainSortID=this._getSortID(T$y,T$E),T$_._sprite3D=this,T$_.renderObj=T$y,T$_._material=T$E,T$_;},T$n._changeRenderObjectByMaterial=function(T$n,T$C){var T$_=this._render._renderElements[T$n];T$C||(T$C=T$iC.defaultMaterial);var T$E=this._geometryFilter.sharedMesh.getRenderElement(T$n);return T$_._mainSortID=this._getSortID(T$E,T$C),T$_._sprite3D=this,T$_.renderObj=T$E,T$_._material=T$C,T$_;},T$n._changeRenderObjectsByMesh=function(){var T$n=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=T$n;for(var T$C=0;T$C<T$n;T$C++)this._changeRenderObjectByMesh(T$C);},T$n._onMeshChanged=function(T$n){var T$C=T$n.sharedMesh;T$C.loaded?this._changeRenderObjectsByMesh():T$C.once("loaded",this,this._onMeshLoaded);},T$n._onMeshLoaded=function(T$n){T$n===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh();},T$n._onMaterialChanged=function(T$n,T$C,T$_){T$C<this._render._renderElements.length&&this._changeRenderObjectByMaterial(T$C,T$_);},T$n._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render);},T$n._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render);},T$n._parseCustomProps=function(T$n,T$C,T$_,T$E){var T$y=this.meshRender,T$p=T$_.lightmapIndex;null!=T$p&&(T$y.lightmapIndex=T$p);var T$c,T$l,T$W=T$_.lightmapScaleOffset;if(T$W&&(T$y.lightmapScaleOffset=new T$lC(T$W[0],T$W[1],T$W[2],T$W[3])),T$E.instanceParams)(T$c=T$E.instanceParams.loadPath)&&(T$l=T$d.getRes(T$C[T$c]),(this.meshFilter.sharedMesh=T$l).loaded?T$y.sharedMaterials=T$l.materials:T$l.once("loaded",this,this._applyMeshMaterials));else{(T$c=T$_.meshPath)&&(T$l=T$d.getRes(T$C[T$c]),this.meshFilter.sharedMesh=T$l);var T$q=T$_.materials;if(T$q){var T$J=T$y.sharedMaterials,T$j=T$q.length;T$J.length=T$j;for(var T$P=0;T$P<T$j;T$P++)T$J[T$P]=T$d.getRes(T$C[T$q[T$P].path]);T$y.sharedMaterials=T$J;}}},T$n._applyMeshMaterials=function(T$n){for(var T$C=this._render.sharedMaterials,T$_=T$n.materials,T$E=0,T$y=T$_.length;T$E<T$y;T$E++)T$C[T$E]||(T$C[T$E]=T$_[T$E]);this._render.sharedMaterials=T$C;},T$n._addToInitStaticBatchManager=function(){T$E._staticBatchManager._addInitBatchSprite(this);},T$n.cloneTo=function(T$n){var T$C=T$n;T$C._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var T$_=this._render,T$E=T$C._render;T$E.enable=T$_.enable,T$E.sharedMaterials=T$_.sharedMaterials,T$E.castShadow=T$_.castShadow;var T$y=T$_.lightmapScaleOffset;T$y&&(T$E.lightmapScaleOffset=T$y.clone()),T$E.lightmapIndex=T$_.lightmapIndex,T$E.receiveShadow=T$_.receiveShadow,T$E.sortingFudge=T$_.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,T$n);},T$n.destroy=function(T$n){if(void 0===T$n&&(T$n=!0),!this.destroyed){var T$C=this.meshFilter.sharedMesh;null!=T$C&&(T$C.loaded||T$C.off("loaded",this,this._applyMeshMaterials)),T$_.prototype.destroy.call(this,T$n),this._geometryFilter._destroy();}},T$b(0,T$n,"meshFilter",function(){return this._geometryFilter;}),T$b(0,T$n,"meshRender",function(){return this._render;}),T$E.__init__=function(){T$En._staticBatchManagers.push(T$E._staticBatchManager);},T$E.load=function(T$n){return T$k.loader.create(T$n,null,null,T$E);},T$j(T$E,["_staticBatchManager",function(){return this._staticBatchManager=new T$sC();}]),T$E;}(T$ZC);}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$n,T$C){"use strict";for(var T$_ in Object.defineProperty(T$C,"__esModule",{value:!0}),Laya){var T$E=Laya[T$_];T$E&&T$E.__isclass&&(T$C[T$_]=T$E);}}),function(T$n,T$C,T$yn){T$yn.un,T$yn.uns;var T$_=T$yn.static,T$E=T$yn.class,T$p=T$yn.getset,T$r=T$yn.__newvec,T$l=laya.maths.Bezier,T$j=laya.utils.Browser,T$wn=laya.utils.Byte,T$y=(laya.events.Event,laya.events.EventDispatcher),T$c=laya.display.Graphics,T$W=(laya.resource.HTMLCanvas,laya.utils.Handler),T$q=laya.net.Loader,T$P=laya.maths.MathUtil,T$Bn=laya.maths.Matrix,T$m=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),T$J=(laya.renders.RenderContext,laya.resource.Resource),T$x=laya.utils.RunDriver,T$pn=laya.display.Sprite,T$b=laya.utils.Stat,T$Vn=laya.resource.Texture,T$d=(laya.net.URL,laya.utils.Utils),T$B=function(){function T$n(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0;}return T$E(T$n,"laya.ani.AnimationContent"),T$n;}(),T$V=function(){function T$n(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0;}return T$E(T$n,"laya.ani.AnimationNodeContent"),T$n;}(),T$O=function(){function T$n(){}return T$E(T$n,"laya.ani.AnimationParser01"),T$n.parse=function(T$n,T$C){var T$_=T$C.__getBuffer(),T$E=0,T$y=0,T$p=0,T$c=0,T$l=0,T$W=0,T$q=0,T$J=T$C.readUTFString();T$n._aniClassName=T$J;var T$j,T$P=T$C.readUTFString().split("\n"),T$x=T$C.getUint8(),T$b=T$C.getUint32(),T$r=T$C.getUint32();0<T$b&&(T$j=T$_.slice(T$b,T$r));var T$m=new T$wn(T$j);for(0<T$r&&(T$n._publicExtData=T$_.slice(T$r,T$_.byteLength)),T$n._useParent=!!T$C.getUint8(),T$n._anis.length=T$x,T$E=0;T$E<T$x;T$E++){var T$d=T$n._anis[T$E]=new T$B();T$d.nodes=new Array();var T$a=T$d.name=T$P[T$C.getUint16()];T$n._aniMap[T$a]=T$E,T$d.bone3DMap={},T$d.playTime=T$C.getFloat32(),T$d.playTime<=0&&console.error("播放时间不能为0  url="+T$n.url+" name="+T$d.name);var T$O=T$d.nodes.length=T$C.getUint8();for(T$y=T$d.totalKeyframeDatasLength=0;T$y<T$O;T$y++){var T$A=T$d.nodes[T$y]=new T$V();T$A.childs=[];var T$k=T$C.getInt16();0<=T$k&&(T$A.name=T$P[T$k],T$d.bone3DMap[T$A.name]=T$y),T$A.keyFrame=new Array(),T$A.parentIndex=T$C.getInt16(),-1==T$A.parentIndex?T$A.parent=null:T$A.parent=T$d.nodes[T$A.parentIndex],T$A.lerpType=T$C.getUint8();var T$t=T$C.getUint32();T$m.pos=T$t;var T$T=T$A.keyframeWidth=T$m.getUint16();if(T$d.totalKeyframeDatasLength+=T$T,0===T$A.lerpType||1===T$A.lerpType)for(T$A.interpolationMethod=[],T$A.interpolationMethod.length=T$T,T$p=0;T$p<T$T;T$p++)T$A.interpolationMethod[T$p]=T$X.interpolation[T$m.getUint8()];null!=T$A.parent&&T$A.parent.childs.push(T$A);var T$Y=T$C.getUint16();0<T$Y&&(T$A.extenData=T$_.slice(T$C.pos,T$C.pos+T$Y),T$C.pos+=T$Y);var T$s,T$N=T$C.getUint16(),T$S=0;for(T$p=0,T$c=T$A.keyFrame.length=T$N;T$p<T$c;T$p++){if((T$s=T$A.keyFrame[T$p]=new T$g()).duration=T$C.getFloat32(),T$s.startTime=T$S,2===T$A.lerpType){T$s.interpolationData=[];var T$M,T$w=T$C.getUint8();switch(T$M=T$C.getFloat32()){case 254:for(T$s.interpolationData.length=T$T,T$q=0;T$q<T$T;T$q++)T$s.interpolationData[T$q]=0;break;case 255:for(T$s.interpolationData.length=T$T,T$q=0;T$q<T$T;T$q++)T$s.interpolationData[T$q]=5;break;default:for(T$s.interpolationData.push(T$M),T$W=1;T$W<T$w;T$W++)T$s.interpolationData.push(T$C.getFloat32());}}for(T$s.data=new Float32Array(T$T),T$l=0;T$l<T$T;T$l++)T$s.data[T$l]=T$C.getFloat32(),-1e-8<T$s.data[T$l]&&T$s.data[T$l]<1e-8&&(T$s.data[T$l]=0);T$S+=T$s.duration;}T$s.startTime=T$d.playTime,T$A.playTime=T$d.playTime,T$n._calculateKeyFrame(T$A,T$N,T$T);}}},T$n;}(),T$A=function(){function T$k(){}return T$E(T$k,"laya.ani.AnimationParser02"),T$k.READ_DATA=function(){T$k._DATA.offset=T$k._reader.getUint32(),T$k._DATA.size=T$k._reader.getUint32();},T$k.READ_BLOCK=function(){for(var T$n=T$k._BLOCK.count=T$k._reader.getUint16(),T$C=T$k._BLOCK.blockStarts=[],T$_=T$k._BLOCK.blockLengths=[],T$E=0;T$E<T$n;T$E++)T$C.push(T$k._reader.getUint32()),T$_.push(T$k._reader.getUint32());},T$k.READ_STRINGS=function(){var T$n=T$k._reader.getUint32(),T$C=T$k._reader.getUint16(),T$_=T$k._reader.pos;T$k._reader.pos=T$n+T$k._DATA.offset;for(var T$E=0;T$E<T$C;T$E++)T$k._strings[T$E]=T$k._reader.readUTFString();T$k._reader.pos=T$_;},T$k.parse=function(T$n,T$C){T$k._templet=T$n;(T$k._reader=T$C).__getBuffer();T$k.READ_DATA(),T$k.READ_BLOCK(),T$k.READ_STRINGS();for(var T$_=0,T$E=T$k._BLOCK.count;T$_<T$E;T$_++){var T$y=T$C.getUint16(),T$p=T$k._strings[T$y],T$c=T$k["READ_"+T$p];if(null==T$c)throw new Error("model file err,no this function:"+T$y+" "+T$p);T$c.call();}},T$k.READ_ANIMATIONS=function(){var T$n=T$k._reader,T$C=T$n.__getBuffer(),T$_=0,T$E=0,T$y=0,T$p=0,T$c=T$n.getUint16(),T$l=[];for(T$l.length=T$c,T$_=0;T$_<T$c;T$_++)T$l[T$_]=T$X.interpolation[T$n.getByte()];var T$W=T$n.getUint8();for(T$k._templet._anis.length=T$W,T$_=0;T$_<T$W;T$_++){var T$q=T$k._templet._anis[T$_]={};T$q.nodes=new Array();var T$J=T$q.name=T$k._strings[T$n.getUint16()];T$k._templet._aniMap[T$J]=T$_,T$q.bone3DMap={},T$q.playTime=T$n.getFloat32();var T$j=T$q.nodes.length=T$n.getInt16();for(T$E=T$q.totalKeyframeDatasLength=0;T$E<T$j;T$E++){var T$P=T$q.nodes[T$E]={};T$P.keyframeWidth=T$c,T$P.childs=[];var T$x=T$n.getUint16();0<=T$x&&(T$P.name=T$k._strings[T$x],T$q.bone3DMap[T$P.name]=T$E),T$P.keyFrame=new Array(),T$P.parentIndex=T$n.getInt16(),-1==T$P.parentIndex?T$P.parent=null:T$P.parent=T$q.nodes[T$P.parentIndex],T$q.totalKeyframeDatasLength+=T$c,T$P.interpolationMethod=T$l,null!=T$P.parent&&T$P.parent.childs.push(T$P);var T$b=T$n.getUint16(),T$r=null,T$m=null;for(T$y=0,T$p=T$P.keyFrame.length=T$b;T$y<T$p;T$y++){(T$r=T$P.keyFrame[T$y]={}).startTime=T$n.getFloat32(),T$m&&(T$m.duration=T$r.startTime-T$m.startTime);var T$d=T$k._DATA.offset,T$a=T$n.getUint32(),T$O=4*T$c,T$A=T$C.slice(T$d+T$a,T$d+T$a+T$O);T$r.data=new Float32Array(T$A),T$m=T$r;}T$r.duration=0,T$P.playTime=T$q.playTime,T$k._templet._calculateKeyFrame(T$P,T$b,T$c);}}},T$k._templet=null,T$k._reader=null,T$k._strings=[],T$_(T$k,["_BLOCK",function(){return this._BLOCK={count:0};},"_DATA",function(){return this._DATA={offset:0,size:0};}]),T$k;}(),T$gn=(function(){function T$n(){}T$E(T$n,"laya.ani.AnimationState"),T$n.stopped=0,T$n.paused=1,T$n.playing=2;}(),function(){function T$y(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new T$Zn(),this.resultMatrix=new T$Bn(),this._children=[];}T$E(T$y,"laya.ani.bone.Bone");var T$n=T$y.prototype;return T$n.setTempMatrix=function(T$n){this._tempMatrix=T$n;var T$C,T$_=0;for(T$_=0,T$C=this._children.length;T$_<T$C;T$_++)this._children[T$_].setTempMatrix(this._tempMatrix);},T$n.update=function(T$n){var T$C;if(this.rotation=this.transform.skX,T$n)T$C=this.resultTransform.getMatrix(),T$Bn.mul(T$C,T$n,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone){if(this.inheritRotation&&this.inheritScale)T$C=this.resultTransform.getMatrix(),T$Bn.mul(T$C,this.parentBone.resultMatrix,this.resultMatrix);else{var T$_=this.parentBone,T$E=NaN,T$y=NaN,T$p=NaN,T$c=this.parentBone.resultMatrix;T$C=this.resultTransform.getMatrix();var T$l=T$c.a*T$C.tx+T$c.c*T$C.ty+T$c.tx,T$W=T$c.b*T$C.tx+T$c.d*T$C.ty+T$c.ty,T$q=new T$Bn();this.inheritRotation?(T$E=Math.atan2(T$_.resultMatrix.b,T$_.resultMatrix.a),T$y=Math.cos(T$E),T$p=Math.sin(T$E),T$q.setTo(T$y,T$p,-T$p,T$y,0,0),T$Bn.mul(this._tempMatrix,T$q,T$Bn.TEMP),T$Bn.TEMP.copyTo(T$q),T$C=this.resultTransform.getMatrix(),T$Bn.mul(T$C,T$q,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,T$C=this.resultTransform.getMatrix(),T$Bn.TEMP.identity(),T$Bn.TEMP.d=this.d,T$Bn.mul(T$C,T$Bn.TEMP,this.resultMatrix)),this.resultMatrix.tx=T$l,this.resultMatrix.ty=T$W;}}else(T$C=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var T$J,T$j=0;for(T$j=0,T$J=this._children.length;T$j<T$J;T$j++)this._children[T$j].update();},T$n.updateChild=function(){var T$n,T$C=0;for(T$C=0,T$n=this._children.length;T$C<T$n;T$C++)this._children[T$C].update();},T$n.setRotation=function(T$n){this._sprite&&(this._sprite.rotation=180*T$n/Math.PI);},T$n.updateDraw=function(T$n,T$C){T$y.ShowBones&&!T$y.ShowBones[this.name]||(this._sprite||(this._sprite=new T$pn(),this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),T$yn.stage.addChild(this._sprite)),this._sprite.x=T$n+this.resultMatrix.tx,this._sprite.y=T$C+this.resultMatrix.ty);var T$_,T$E=0;for(T$E=0,T$_=this._children.length;T$E<T$_;T$E++)this._children[T$E].updateDraw(T$n,T$C);},T$n.addChild=function(T$n){this._children.push(T$n),T$n.parentBone=this;},T$n.findBone=function(T$n){if(this.name==T$n)return this;var T$C,T$_,T$E=0;for(T$E=0,T$C=this._children.length;T$E<T$C;T$E++)if(T$_=this._children[T$E].findBone(T$n))return T$_;return null;},T$n.localToWorld=function(T$n){var T$C=T$n[0],T$_=T$n[1];T$n[0]=T$C*this.resultMatrix.a+T$_*this.resultMatrix.c+this.resultMatrix.tx,T$n[1]=T$C*this.resultMatrix.b+T$_*this.resultMatrix.d+this.resultMatrix.ty;},T$y.ShowBones={},T$y;}()),T$Hn=function(){function T$r(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null;}T$E(T$r,"laya.ani.bone.BoneSlot");var T$n=T$r.prototype;return T$n.showSlotData=function(T$n,T$C){void 0===T$C&&(T$C=!0),this.currSlotData=T$n,T$C&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null;},T$n.showDisplayByName=function(T$n){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(T$n));},T$n.replaceDisplayByName=function(T$n,T$C){if(this.currSlotData){var T$_;T$_=this.currSlotData.getDisplayByName(T$n);var T$E;T$E=this.currSlotData.getDisplayByName(T$C),this.replaceDisplayByIndex(T$_,T$E);}},T$n.replaceDisplayByIndex=function(T$n,T$C){this.currSlotData&&(this._replaceDic[T$n]=T$C,this.displayIndex==T$n&&this.showDisplayByIndex(T$n));},T$n.showDisplayByIndex=function(T$n){if(null!=this._replaceDic[T$n]&&(T$n=this._replaceDic[T$n]),this.currSlotData&&-1<T$n&&T$n<this.currSlotData.displayArr.length){if(this.displayIndex=T$n,this.currDisplayData=this.currSlotData.displayArr[T$n],this.currDisplayData){var T$C=this.currDisplayData.name;this.currTexture=this.templet.getTexture(T$C),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!T$m.isConchApp||T$m.isConchApp&&"0.9.15"<T$pn.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture));}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null;},T$n.replaceSkin=function(T$n){this._diyTexture=T$n,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null);},T$n.setParentMatrix=function(T$n){this._parentMatrix=T$n;},T$n.draw=function(T$n,T$C,T$_,T$E){if(void 0===T$_&&(T$_=!1),void 0===T$E&&(T$E=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var T$y,T$p=this.currTexture;switch(this._diyTexture&&(T$p=this._diyTexture),this.currDisplayData.type){case 0:if(T$n){var T$c=this.getDisplayMatrix();if(this._parentMatrix){var T$l=!1;if(T$c){var T$W;if(T$Bn.mul(T$c,this._parentMatrix,T$Bn.TEMP),T$W=T$_?(null==this._resultMatrix&&(this._resultMatrix=new T$Bn()),this._resultMatrix):new T$Bn(),!T$m.isWebGL&&this.currDisplayData.uvs||T$m.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var T$q=T$r._tempMatrix;T$q.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(T$q.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(T$l=!0,T$q.rotate(-Math.PI/2)),T$Bn.mul(T$q,T$Bn.TEMP,T$W);}else T$Bn.TEMP.copyTo(T$W);T$l?T$n.drawTexture(T$p,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,T$W):T$n.drawTexture(T$p,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,T$W);}}}break;case 1:if(null==(T$y=T$_?(null==this._skinSprite&&(this._skinSprite=T$r.createSkinMesh()),this._skinSprite):T$r.createSkinMesh()))return;var T$J;if(null==this.currDisplayData.bones){var T$j,T$P=this.currDisplayData.weights;this.deformData&&(T$P=this.deformData),T$j=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=T$T.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=T$T.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=T$P;this.currDisplayData.triangles.length;T$J=this.currDisplayData.triangles,T$y.init2(T$p,null,T$J,this._mVerticleArr,T$j);var T$x,T$b=this.getDisplayMatrix();if(this._parentMatrix)if(T$b)T$Bn.mul(T$b,this._parentMatrix,T$Bn.TEMP),T$x=T$_?(null==this._resultMatrix&&(this._resultMatrix=new T$Bn()),this._resultMatrix):new T$Bn(),T$Bn.TEMP.copyTo(T$x),T$y.transform=T$x;}else this.skinMesh(T$C,T$y,T$E);T$n.drawSkin(T$y);break;case 2:if(null==(T$y=T$_?(null==this._skinSprite&&(this._skinSprite=T$r.createSkinMesh()),this._skinSprite):T$r.createSkinMesh()))return;this.skinMesh(T$C,T$y,T$E),T$n.drawSkin(T$y);}}},T$n.skinMesh=function(T$n,T$C,T$_){var T$E,T$y=this.currTexture,T$p=this.currDisplayData.bones;T$E=this._diyTexture?(T$y=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=T$T.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=T$T.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var T$c,T$l,T$W=this.currDisplayData.weights,T$q=this.currDisplayData.triangles,T$J=0,T$j=0,T$P=0,T$x=NaN,T$b=NaN,T$r=0,T$m=0,T$d=[],T$a=0,T$O=0;if(this.deformData&&0<this.deformData.length){var T$A=0;for(T$a=0,T$O=T$p.length;T$a<T$O;){for(T$P=T$p[T$a++]+T$a,T$j=T$J=0;T$a<T$P;T$a++)T$l=T$n[T$p[T$a]],T$x=T$W[T$r]+this.deformData[T$A++],T$b=T$W[T$r+1]+this.deformData[T$A++],T$m=T$W[T$r+2],T$J+=(T$x*T$l.a+T$b*T$l.c+T$l.tx)*T$m,T$j+=(T$x*T$l.b+T$b*T$l.d+T$l.ty)*T$m,T$r+=3;T$d.push(T$J,T$j);}}else for(T$a=0,T$O=T$p.length;T$a<T$O;){for(T$P=T$p[T$a++]+T$a,T$j=T$J=0;T$a<T$P;T$a++)T$l=T$n[T$p[T$a]],T$x=T$W[T$r],T$b=T$W[T$r+1],T$m=T$W[T$r+2],T$J+=(T$x*T$l.a+T$b*T$l.c+T$l.tx)*T$m,T$j+=(T$x*T$l.b+T$b*T$l.d+T$l.ty)*T$m,T$r+=3;T$d.push(T$J,T$j);}this._mVerticleArr=T$d,T$c=T$q,T$C.init2(T$y,null,T$c,this._mVerticleArr,T$E);},T$n.drawBonePoint=function(T$n){T$n&&this._parentMatrix&&T$n.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000");},T$n.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null;},T$n.getMatrix=function(){return this._resultMatrix;},T$n.copy=function(){var T$n=new T$r();return T$n.type="copy",T$n.name=this.name,T$n.attachmentName=this.attachmentName,T$n.srcDisplayIndex=this.srcDisplayIndex,T$n.parent=this.parent,T$n.displayIndex=this.displayIndex,T$n.templet=this.templet,T$n.currSlotData=this.currSlotData,T$n.currTexture=this.currTexture,T$n.currDisplayData=this.currDisplayData,T$n;},T$r.createSkinMesh=function(){return T$m.isWebGL||T$m.isConchApp?T$x.skinAniSprite():(T$m.isWebGL,null);},T$_(T$r,["_tempMatrix",function(){return this._tempMatrix=new T$Bn();}]),T$r;}(),T$Xn=function(){function T$n(){this.skinName=null,this.deformSlotDataList=[];}return T$E(T$n,"laya.ani.bone.DeformAniData"),T$n;}(),T$$n=function(){function T$n(){this.deformSlotDisplayList=[];}return T$E(T$n,"laya.ani.bone.DeformSlotData"),T$n;}(),T$in=function(){function T$n(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[];}T$E(T$n,"laya.ani.bone.DeformSlotDisplayData");var T$C=T$n.prototype;return T$C.binarySearch1=function(T$n,T$C){var T$_=0,T$E=T$n.length-2;if(0==T$E)return 1;for(var T$y=T$E>>>1;;){if(T$n[Math.floor(T$y+1)]<=T$C?T$_=T$y+1:T$E=T$y,T$_==T$E)return T$_+1;T$y=T$_+T$E>>>1;}return 0;},T$C.apply=function(T$n,T$C,T$_){if(void 0===T$_&&(T$_=1),T$n+=.05,!(this.timeList.length<=0)){var T$E=0;if(!(T$n<this.timeList[0])){var T$y=this.vectices[0].length,T$p=[],T$c=this.binarySearch1(this.timeList,T$n);if(this.frameIndex=T$c,T$n>=this.timeList[this.timeList.length-1]){var T$l=this.vectices[this.vectices.length-1];if(T$_<1)for(T$E=0;T$E<T$y;T$E++)T$p[T$E]+=(T$l[T$E]-T$p[T$E])*T$_;else for(T$E=0;T$E<T$y;T$E++)T$p[T$E]=T$l[T$E];this.deformData=T$p;}else{this.tweenKeyList[this.frameIndex];var T$W=this.vectices[this.frameIndex-1],T$q=this.vectices[this.frameIndex],T$J=this.timeList[this.frameIndex-1],T$j=this.timeList[this.frameIndex];T$_=this.tweenKeyList[T$c-1]?(T$n-T$J)/(T$j-T$J):0;var T$P=NaN;for(T$E=0;T$E<T$y;T$E++)T$P=T$W[T$E],T$p[T$E]=T$P+(T$q[T$E]-T$P)*T$_;this.deformData=T$p;}}}},T$n;}(),T$fn=function(){function T$n(){this.time=NaN,this.drawOrder=[];}return T$E(T$n,"laya.ani.bone.DrawOrderData"),T$n;}(),T$en=function(){function T$n(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN;}return T$E(T$n,"laya.ani.bone.EventData"),T$n;}(),T$a=function(){function T$En(T$n,T$C){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=T$n,this._targetBone=T$C[T$n.targetBoneIndex],this.isSpine=T$n.isSpine,null==this._bones&&(this._bones=[]);for(var T$_=this._bones.length=0,T$E=T$n.boneIndexs.length;T$_<T$E;T$_++)this._bones.push(T$C[T$n.boneIndexs[T$_]]);this.name=T$n.name,this.mix=T$n.mix,this.bendDirection=T$n.bendDirection;}T$E(T$En,"laya.ani.bone.IkConstraint");var T$n=T$En.prototype;return T$n.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix);}},T$n._applyIk1=function(T$n,T$C,T$_,T$E){var T$y=T$n.parentBone,T$p=1/(T$y.resultMatrix.a*T$y.resultMatrix.d-T$y.resultMatrix.b*T$y.resultMatrix.c),T$c=T$C-T$y.resultMatrix.tx,T$l=T$_-T$y.resultMatrix.ty,T$W=(T$c*T$y.resultMatrix.d-T$l*T$y.resultMatrix.c)*T$p-T$n.transform.x,T$q=(T$l*T$y.resultMatrix.a-T$c*T$y.resultMatrix.b)*T$p-T$n.transform.y,T$J=Math.atan2(T$q,T$W)*T$En.radDeg-0-T$n.transform.skX;T$n.transform.scX<0&&(T$J+=180),180<T$J?T$J-=360:T$J<-180&&(T$J+=360),T$n.transform.skX=T$n.transform.skY=T$n.transform.skX+T$J*T$E,T$n.update();},T$n.updatePos=function(T$n,T$C){this._sp&&this._sp.pos(T$n,T$C);},T$n._applyIk2=function(T$n,T$C,T$_,T$E,T$y,T$p){if(0!=T$p){var T$c=T$n.resultTransform.x,T$l=T$n.resultTransform.y,T$W=T$n.transform.scX,T$q=T$n.transform.scY,T$J=T$C.transform.scX,T$j=0,T$P=0,T$x=0;T$x=T$W<0?(T$W=-T$W,T$j=180,-1):(T$j=0,1),T$q<0&&(T$q=-T$q,T$x=-T$x),T$P=T$J<0?(T$J=-T$J,180):0;var T$b=T$C.resultTransform.x,T$r=NaN,T$m=NaN,T$d=NaN,T$a=T$n.resultMatrix.a,T$O=T$n.resultMatrix.c,T$A=T$n.resultMatrix.b,T$k=T$n.resultMatrix.d,T$t=Math.abs(T$W-T$q)<=1e-4;T$d=T$t?(T$m=T$a*T$b+T$O*(T$r=T$C.resultTransform.y)+T$n.resultMatrix.tx,T$A*T$b+T$k*T$r+T$n.resultMatrix.ty):(T$r=0,T$m=T$a*T$b+T$n.resultMatrix.tx,T$A*T$b+T$n.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new T$pn(),T$yn.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(T$_,T$E,15,"#ffff00"),this._sp.graphics.drawCircle(T$m,T$d,15,"#ff00ff")),T$n.setRotation(Math.atan2(T$d-T$n.resultMatrix.ty,T$m-T$n.resultMatrix.tx));var T$T=T$n.parentBone;T$a=T$T.resultMatrix.a,T$O=T$T.resultMatrix.c,T$A=T$T.resultMatrix.b;var T$Y=1/(T$a*(T$k=T$T.resultMatrix.d)-T$O*T$A),T$s=T$_-T$T.resultMatrix.tx,T$N=T$E-T$T.resultMatrix.ty,T$S=(T$s*T$k-T$N*T$O)*T$Y-T$c,T$M=(T$N*T$a-T$s*T$A)*T$Y-T$l,T$w=((T$s=T$m-T$T.resultMatrix.tx)*T$k-(T$N=T$d-T$T.resultMatrix.ty)*T$O)*T$Y-T$c,T$B=(T$N*T$a-T$s*T$A)*T$Y-T$l,T$V=Math.sqrt(T$w*T$w+T$B*T$B),T$g=T$C.length*T$J,T$H=NaN,T$X=NaN;if(T$t){var T$$=(T$S*T$S+T$M*T$M-T$V*T$V-(T$g*=T$W)*T$g)/(2*T$V*T$g);T$$<-1?T$$=-1:1<T$$&&(T$$=1),T$X=Math.acos(T$$)*T$y,T$a=T$V+T$g*T$$,T$O=T$g*Math.sin(T$X),T$H=Math.atan2(T$M*T$a-T$S*T$O,T$S*T$a+T$M*T$O);}else{var T$i=(T$a=T$W*T$g)*T$a,T$f=(T$O=T$q*T$g)*T$O,T$e=T$S*T$S+T$M*T$M,T$G=Math.atan2(T$M,T$S),T$F=-2*T$f*T$V,T$u=T$f-T$i;if(0<(T$k=T$F*T$F-4*T$u*(T$A=T$f*T$V*T$V+T$i*T$e-T$i*T$f))){var T$o=Math.sqrt(T$k);T$F<0&&(T$o=-T$o);var T$Q=(T$o=-(T$F+T$o)/2)/T$u,T$I=T$A/T$o,T$Z=Math.abs(T$Q)<Math.abs(T$I)?T$Q:T$I;T$Z*T$Z<=T$e&&(T$N=Math.sqrt(T$e-T$Z*T$Z)*T$y,T$H=T$G-Math.atan2(T$N,T$Z),T$X=Math.atan2(T$N/T$q,(T$Z-T$V)/T$W));}var T$L=0,T$h=Number.MAX_VALUE,T$v=0,T$R=0,T$z=0,T$U=0,T$K=0,T$D=0;T$U<(T$k=(T$s=T$V+T$a)*T$s)&&(T$z=0,T$U=T$k,T$K=T$s),(T$k=(T$s=T$V-T$a)*T$s)<T$h&&(T$L=Math.PI,T$h=T$k,T$v=T$s);var T$nn=Math.acos(-T$a*T$V/(T$i-T$f));(T$k=(T$s=T$a*Math.cos(T$nn)+T$V)*T$s+(T$N=T$O*Math.sin(T$nn))*T$N)<T$h&&(T$L=T$nn,T$h=T$k,T$v=T$s,T$R=T$N),T$U<T$k&&(T$z=T$nn,T$U=T$k,T$K=T$s,T$D=T$N),T$X=T$e<=(T$h+T$U)/2?(T$H=T$G-Math.atan2(T$R*T$y,T$v),T$L*T$y):(T$H=T$G-Math.atan2(T$D*T$y,T$K),T$z*T$y);}var T$Cn=Math.atan2(T$r,T$b)*T$x,T$_n=T$n.resultTransform.skX;180<(T$H=(T$H-T$Cn)*T$En.radDeg+T$j-T$_n)?T$H-=360:T$H<-180&&(T$H+=360),T$n.resultTransform.x=T$c,T$n.resultTransform.y=T$l,T$n.resultTransform.skX=T$n.resultTransform.skY=T$_n+T$H*T$p,T$_n=T$C.resultTransform.skX,180<(T$X=((T$X+T$Cn)*T$En.radDeg-0)*T$x+T$P-(T$_n%=360))?T$X-=360:T$X<-180&&(T$X+=360),T$C.resultTransform.x=T$b,T$C.resultTransform.y=T$r,T$C.resultTransform.skX=T$C.resultTransform.skY=T$C.resultTransform.skY+T$X*T$p,T$n.update();}},T$n._applyIk3=function(T$n,T$C,T$_,T$E,T$y,T$p){if(0!=T$p){var T$c,T$l,T$W=T$C.resultMatrix.a*T$C.length,T$q=T$C.resultMatrix.b*T$C.length,T$J=T$W*T$W+T$q*T$q,T$j=Math.sqrt(T$J),T$P=T$n.resultMatrix.tx,T$x=T$n.resultMatrix.ty,T$b=T$C.resultMatrix.tx,T$r=T$C.resultMatrix.ty,T$m=T$b-T$P,T$d=T$r-T$x,T$a=T$m*T$m+T$d*T$d,T$O=Math.sqrt(T$a),T$A=(T$m=T$_-T$n.resultMatrix.tx)*T$m+(T$d=T$E-T$n.resultMatrix.ty)*T$d,T$k=Math.sqrt(T$A);if(T$j+T$O<=T$k||T$k+T$j<=T$O||T$k+T$O<=T$j){var T$t=NaN;T$b=T$P+(T$t=T$j+T$O<=T$k?1:-1)*(T$_-T$P)*T$O/T$k,T$r=T$x+T$t*(T$E-T$x)*T$O/T$k;}else{var T$T=(T$a-T$J+T$A)/(2*T$A),T$Y=Math.sqrt(T$a-T$T*T$T*T$A)/T$k,T$s=T$P+T$m*T$T,T$N=T$x+T$d*T$T,T$S=-T$d*T$Y,T$M=T$m*T$Y;T$r=0<T$y?(T$b=T$s-T$S,T$N-T$M):(T$b=T$s+T$S,T$N+T$M);}T$c=T$b,T$l=T$r,this.isDebug&&(this._sp||(this._sp=new T$pn(),T$yn.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(T$P,T$x,15,"#ff00ff"),this._sp.graphics.drawCircle(T$_,T$E,15,"#ffff00"),this._sp.graphics.drawCircle(T$c,T$l,15,"#ff00ff"));var T$w,T$B;T$w=Math.atan2(T$l-T$n.resultMatrix.ty,T$c-T$n.resultMatrix.tx),T$n.setRotation(T$w),(T$B=T$En._tempMatrix).identity(),T$B.rotate(T$w),T$B.scale(T$n.resultMatrix.getScaleX(),T$n.resultMatrix.getScaleY()),T$B.translate(T$n.resultMatrix.tx,T$n.resultMatrix.ty),T$B.copyTo(T$n.resultMatrix),T$n.updateChild();var T$V,T$g;T$V=Math.atan2(T$E-T$l,T$_-T$c),T$C.setRotation(T$V),(T$g=T$En._tempMatrix).identity(),T$g.rotate(T$V),T$g.scale(T$C.resultMatrix.getScaleX(),T$C.resultMatrix.getScaleY()),T$g.translate(T$c,T$l),T$B.copyTo(T$C.resultMatrix),T$C.updateChild();}},T$_(T$En,["radDeg",function(){return this.radDeg=180/Math.PI;},"degRad",function(){return this.degRad=Math.PI/180;},"_tempMatrix",function(){return this._tempMatrix=new T$Bn();}]),T$En;}(),T$Gn=function(){function T$n(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[];}return T$E(T$n,"laya.ani.bone.IkConstraintData"),T$n;}(),T$k=function(){function T$g(T$n,T$C){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=T$n,this.position=T$n.position,this.spacing=T$n.spacing,this.rotateMix=T$n.rotateMix,this.translateMix=T$n.translateMix,this.bones=[];for(var T$_=this.data.bones,T$E=0,T$y=T$_.length;T$E<T$y;T$E++)this.bones.push(T$C[T$_[T$E]]);}T$E(T$g,"laya.ani.bone.PathConstraint");var T$n=T$g.prototype;return T$n.apply=function(T$n,T$C){if(this.target){var T$_=this.translateMix,T$E=this.translateMix,T$y=0<T$E,T$p=this.data.spacingMode,T$c="length"==T$p,T$l=this.data.rotateMode,T$W="tangent"==T$l,T$q="chainScale"==T$l,T$J=[],T$j=this.bones.length,T$P=T$W?T$j:T$j+1,T$x=[];(this._spaces=T$x)[0]=this.position;var T$b=this.spacing;if(T$q||T$c)for(var T$r=0,T$m=T$P-1;T$r<T$m;){var T$d=this.bones[T$r],T$a=T$d.length,T$O=T$a*T$d.resultMatrix.a,T$A=T$a*T$d.resultMatrix.b;T$a=Math.sqrt(T$O*T$O+T$A*T$A),T$q&&(T$J[T$r]=T$a),T$x[++T$r]=T$c?Math.max(0,T$a+T$b):T$b;}else for(T$r=1;T$r<T$P;T$r++)T$x[T$r]=T$b;var T$k=this.computeWorldPositions(this.target,T$n,T$C,T$P,T$W,"percent"==this.data.positionMode,"percent"==T$p);if(this._debugKey){for(T$r=0;T$r<T$k.length;T$r++)T$C.drawCircle(T$k[T$r++],T$k[T$r++],5,"#00ff00");var T$t=[];for(T$r=0;T$r<T$k.length;T$r++)T$t.push(T$k[T$r++],T$k[T$r++]);T$C.drawLines(0,0,T$t,"#ff0000");}var T$T=T$k[0],T$Y=T$k[1],T$s=this.data.offsetRotation,T$N="chain"==T$l&&0==T$s,T$S=NaN;for(T$r=0,T$S=3;T$r<T$j;T$r++,T$S+=3){(T$d=this.bones[T$r]).resultMatrix.tx+=(T$T-T$d.resultMatrix.tx)*T$_,T$d.resultMatrix.ty+=(T$Y-T$d.resultMatrix.ty)*T$_;var T$M=(T$O=T$k[T$S])-T$T,T$w=(T$A=T$k[T$S+1])-T$Y;if(T$q&&0!=(T$a=T$J[T$r])){var T$B=(Math.sqrt(T$M*T$M+T$w*T$w)/T$a-1)*T$E+1;T$d.resultMatrix.a*=T$B,T$d.resultMatrix.c*=T$B;}if(T$T=T$O,T$Y=T$A,T$y){var T$V=T$d.resultMatrix.a,T$g=T$d.resultMatrix.c,T$H=T$d.resultMatrix.b,T$X=T$d.resultMatrix.d,T$$=NaN,T$i=NaN,T$f=NaN;T$$=T$W?T$k[T$S-1]:0==T$x[T$r+1]?T$k[T$S+2]:Math.atan2(T$w,T$M),T$$-=Math.atan2(T$H,T$V)-T$s/180*Math.PI,T$N&&(T$i=Math.cos(T$$),T$f=Math.sin(T$$),T$T+=((T$a=T$d.length)*(T$i*T$V-T$f*T$H)-T$M)*T$E,T$Y+=(T$a*(T$f*T$V+T$i*T$H)-T$w)*T$E),T$$>Math.PI?T$$-=2*Math.PI:T$$<-Math.PI&&(T$$+=2*Math.PI),T$$*=T$E,T$i=Math.cos(T$$),T$f=Math.sin(T$$),T$d.resultMatrix.a=T$i*T$V-T$f*T$H,T$d.resultMatrix.c=T$i*T$g-T$f*T$X,T$d.resultMatrix.b=T$f*T$V+T$i*T$H,T$d.resultMatrix.d=T$f*T$g+T$i*T$X;}}}},T$n.computeWorldVertices2=function(T$n,T$C,T$_,T$E,T$y,T$p){var T$c,T$l,T$W=T$n.currDisplayData.bones,T$q=T$n.currDisplayData.weights,T$J=T$n.currDisplayData.triangles,T$j=0,T$P=0,T$x=0,T$b=0,T$r=0,T$m=0,T$d=0,T$a=0,T$O=0,T$A=0,T$k=0;if(null!=T$W){for(T$j=0;T$j<T$_;T$j+=2)T$P+=(T$b=T$W[T$P])+1,T$x+=T$b;var T$t=T$C;for(T$r=T$p,T$m=3*T$x;T$r<T$E;T$r+=2){for(T$a=T$d=0,T$b=T$W[T$P++],T$b+=T$P;T$P<T$b;T$P++,T$m+=3){T$c=T$t[T$W[T$P]].resultMatrix,T$O=T$q[T$m],T$A=T$q[T$m+1];var T$T=T$q[T$m+2];T$d+=(T$O*T$c.a+T$A*T$c.c+T$c.tx)*T$T,T$a+=(T$O*T$c.b+T$A*T$c.d+T$c.ty)*T$T;}T$y[T$r]=T$d,T$y[T$r+1]=T$a;}}else{var T$Y,T$s;if(T$J||(T$J=T$q),T$n.deformData&&(T$J=T$n.deformData),T$Y=T$n.parent,T$C)for(T$k=T$C.length,T$j=0;T$j<T$k;T$j++)if(T$C[T$j].name==T$Y){T$l=T$C[T$j];break;}T$l&&(T$s=T$l.resultMatrix),T$s||(T$s=T$g._tempMt);var T$N=T$s.tx,T$S=T$s.ty,T$M=T$s.a,T$w=T$s.b,T$B=T$s.c,T$V=T$s.d;for(T$l&&(T$V*=T$l.d),T$P=T$_,T$r=T$p;T$r<T$E;T$P+=2,T$r+=2)T$O=T$J[T$P],T$A=T$J[T$P+1],T$y[T$r]=T$O*T$M+T$A*T$w+T$N,T$y[T$r+1]=-(T$O*T$B+T$A*T$V+T$S);}},T$n.computeWorldPositions=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c){T$n.currDisplayData.bones,T$n.currDisplayData.weights,T$n.currDisplayData.triangles;var T$l=[],T$W=0,T$q=T$n.currDisplayData.verLen,T$J=this.position,T$j=this._spaces,T$P=[],T$x=[],T$b=T$q/6,T$r=-1,T$m=NaN,T$d=0,T$a=0,T$O=NaN,T$A=NaN,T$k=NaN,T$t=NaN;if(T$b--,T$q-=4,this.computeWorldVertices2(T$n,T$C,2,T$q,T$l,0),this._debugKey)for(T$W=0;T$W<T$l.length;)T$_.drawCircle(T$l[T$W++],T$l[T$W++],10,"#ff0000");T$P=T$l,this._curves.length=T$b;var T$T=this._curves,T$Y=T$P[T$m=0],T$s=T$P[1],T$N=0,T$S=0,T$M=0,T$w=0,T$B=0,T$V=0,T$g=NaN,T$H=NaN,T$X=NaN,T$$=NaN,T$i=NaN,T$f=NaN,T$e=NaN,T$G=NaN,T$F=0;for(T$W=0,T$F=2;T$W<T$b;T$W++,T$F+=6)T$N=T$P[T$F],T$S=T$P[T$F+1],T$M=T$P[T$F+2],T$w=T$P[T$F+3],T$i=2*(T$g=.1875*(T$Y-2*T$N+T$M))+(T$X=.09375*(3*(T$N-T$M)-T$Y+(T$B=T$P[T$F+4]))),T$f=2*(T$H=.1875*(T$s-2*T$S+T$w))+(T$$=.09375*(3*(T$S-T$w)-T$s+(T$V=T$P[T$F+5]))),T$e=.75*(T$N-T$Y)+T$g+.16666667*T$X,T$G=.75*(T$S-T$s)+T$H+.16666667*T$$,T$m+=Math.sqrt(T$e*T$e+T$G*T$G),T$e+=T$i,T$G+=T$f,T$i+=T$X,T$f+=T$$,T$m+=Math.sqrt(T$e*T$e+T$G*T$G),T$e+=T$i,T$G+=T$f,T$m+=Math.sqrt(T$e*T$e+T$G*T$G),T$e+=T$i+T$X,T$G+=T$f+T$$,T$m+=Math.sqrt(T$e*T$e+T$G*T$G),T$T[T$W]=T$m,T$Y=T$B,T$s=T$V;if(T$p&&(T$J*=T$m),T$c)for(T$W=0;T$W<T$E;T$W++)T$j[T$W]*=T$m;var T$u=this._segments,T$o=0,T$Q=0;for(T$Q=T$a=T$d=T$W=0;T$W<T$E;T$W++,T$d+=3)if((T$O=T$J+=T$A=T$j[T$W])<0)this.addBeforePosition(T$O,T$P,0,T$x,T$d);else if(T$m<T$O)this.addAfterPosition(T$O-T$m,T$P,T$q-4,T$x,T$d);else{for(;;T$a++)if(!((T$t=T$T[T$a])<T$O)){0==T$a?T$O/=T$t:T$O=(T$O-(T$k=T$T[T$a-1]))/(T$t-T$k);break;}if(T$a!=T$r){var T$I=6*(T$r=T$a);for(T$Y=T$P[T$I],T$s=T$P[T$I+1],T$N=T$P[T$I+2],T$S=T$P[T$I+3],T$M=T$P[T$I+4],T$w=T$P[T$I+5],T$i=2*(T$g=.03*(T$Y-2*T$N+T$M))+(T$X=.006*(3*(T$N-T$M)-T$Y+(T$B=T$P[T$I+6]))),T$f=2*(T$H=.03*(T$s-2*T$S+T$w))+(T$$=.006*(3*(T$S-T$w)-T$s+(T$V=T$P[T$I+7]))),T$e=.3*(T$N-T$Y)+T$g+.16666667*T$X,T$G=.3*(T$S-T$s)+T$H+.16666667*T$$,T$o=Math.sqrt(T$e*T$e+T$G*T$G),T$u[0]=T$o,T$I=1;T$I<8;T$I++)T$e+=T$i,T$G+=T$f,T$i+=T$X,T$f+=T$$,T$o+=Math.sqrt(T$e*T$e+T$G*T$G),T$u[T$I]=T$o;T$e+=T$i,T$G+=T$f,T$o+=Math.sqrt(T$e*T$e+T$G*T$G),T$u[8]=T$o,T$e+=T$i+T$X,T$G+=T$f+T$$,T$o+=Math.sqrt(T$e*T$e+T$G*T$G),T$u[9]=T$o,T$Q=0;}for(T$O*=T$o;;T$Q++)if(!((T$t=T$u[T$Q])<T$O)){0==T$Q?T$O/=T$t:T$O=T$Q+(T$O-(T$k=T$u[T$Q-1]))/(T$t-T$k);break;}this.addCurvePosition(.1*T$O,T$Y,T$s,T$N,T$S,T$M,T$w,T$B,T$V,T$x,T$d,T$y||0<T$W&&0==T$A);}return T$x;},T$n.addBeforePosition=function(T$n,T$C,T$_,T$E,T$y){var T$p=T$C[T$_],T$c=T$C[T$_+1],T$l=T$C[T$_+2]-T$p,T$W=T$C[T$_+3]-T$c,T$q=Math.atan2(T$W,T$l);T$E[T$y]=T$p+T$n*Math.cos(T$q),T$E[T$y+1]=T$c+T$n*Math.sin(T$q),T$E[T$y+2]=T$q;},T$n.addAfterPosition=function(T$n,T$C,T$_,T$E,T$y){var T$p=T$C[T$_+2],T$c=T$C[T$_+3],T$l=T$p-T$C[T$_],T$W=T$c-T$C[T$_+1],T$q=Math.atan2(T$W,T$l);T$E[T$y]=T$p+T$n*Math.cos(T$q),T$E[T$y+1]=T$c+T$n*Math.sin(T$q),T$E[T$y+2]=T$q;},T$n.addCurvePosition=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q,T$J,T$j){0==T$n&&(T$n=1e-4);var T$P=T$n*T$n,T$x=T$P*T$n,T$b=1-T$n,T$r=T$b*T$b,T$m=T$r*T$b,T$d=T$b*T$n,T$a=3*T$d,T$O=T$b*T$a,T$A=T$a*T$n,T$k=T$C*T$m+T$E*T$O+T$p*T$A+T$l*T$x,T$t=T$_*T$m+T$y*T$O+T$c*T$A+T$W*T$x;T$q[T$J]=T$k,T$q[T$J+1]=T$t,T$q[T$J+2]=T$j?Math.atan2(T$t-(T$_*T$r+T$y*T$d*2+T$c*T$P),T$k-(T$C*T$r+T$E*T$d*2+T$p*T$P)):0;},T$g.NONE=-1,T$g.BEFORE=-2,T$g.AFTER=-3,T$_(T$g,["_tempMt",function(){return this._tempMt=new T$Bn();}]),T$g;}(),T$Fn=function(){function T$n(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[];}return T$E(T$n,"laya.ani.bone.PathConstraintData"),T$n;}(),T$un=function(){function T$n(){this.name=null,this.slotArr=[];}return T$E(T$n,"laya.ani.bone.SkinData"),T$n;}(),T$on=function(){function T$n(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0;}T$E(T$n,"laya.ani.bone.SkinSlotDisplayData");var T$C=T$n.prototype;return T$C.createTexture=function(T$n){return this.texture||(this.texture=new T$Vn(T$n.bitmap,this.uvs),T$n.bitmap.alphaTexture&&(this.texture.alphaTexture=new T$Vn(T$n.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=T$n.height,this.texture.height=T$n.width,this.texture.offsetX=-T$n.offsetX,this.texture.offsetY=-T$n.offsetY,this.texture.sourceWidth=T$n.sourceHeight,this.texture.sourceHeight=T$n.sourceWidth):(this.texture.width=T$n.width,this.texture.height=T$n.height,this.texture.offsetX=-T$n.offsetX,this.texture.offsetY=-T$n.offsetY,this.texture.sourceWidth=T$n.sourceWidth,this.texture.sourceHeight=T$n.sourceHeight),T$m.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture;},T$C.destory=function(){this.texture&&this.texture.destroy();},T$n;}(),T$Qn=function(){function T$n(){this.name=null,this.displayArr=[];}return T$E(T$n,"laya.ani.bone.SlotData"),T$n.prototype.getDisplayByName=function(T$n){for(var T$C=0,T$_=this.displayArr.length;T$C<T$_;T$C++)if(this.displayArr[T$C].attachmentName==T$n)return T$C;return-1;},T$n;}(),T$t=function(){function T$n(T$n,T$C){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=T$r(2,0),this._data=T$n,null==this._bones&&(this._bones=[]),this.target=T$C[T$n.targetIndex];var T$_,T$E=0;for(T$E=0,T$_=T$n.boneIndexs.length;T$E<T$_;T$E++)this._bones.push(T$C[T$n.boneIndexs[T$E]]);this.rotateMix=T$n.rotateMix,this.translateMix=T$n.translateMix,this.scaleMix=T$n.scaleMix,this.shearMix=T$n.shearMix;}return T$E(T$n,"laya.ani.bone.TfConstraint"),T$n.prototype.apply=function(){for(var T$n,T$C=this.target.resultMatrix.a,T$_=this.target.resultMatrix.b,T$E=this.target.resultMatrix.c,T$y=this.target.resultMatrix.d,T$p=0,T$c=this._bones.length;T$p<T$c;T$p++){if(T$n=this._bones[T$p],0<this.rotateMix){var T$l=T$n.resultMatrix.a,T$W=T$n.resultMatrix.b,T$q=T$n.resultMatrix.c,T$J=T$n.resultMatrix.d,T$j=Math.atan2(T$E,T$C)-Math.atan2(T$q,T$l)+this._data.offsetRotation*Math.PI/180;T$j>Math.PI?T$j-=2*Math.PI:T$j<-Math.PI&&(T$j+=2*Math.PI),T$j*=this.rotateMix;var T$P=Math.cos(T$j),T$x=Math.sin(T$j);T$n.resultMatrix.a=T$P*T$l-T$x*T$q,T$n.resultMatrix.b=T$P*T$W-T$x*T$J,T$n.resultMatrix.c=T$x*T$l+T$P*T$q,T$n.resultMatrix.d=T$x*T$W+T$P*T$J;}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),T$n.resultMatrix.tx+=(this._temp[0]-T$n.resultMatrix.tx)*this.translateMix,T$n.resultMatrix.ty+=(this._temp[1]-T$n.resultMatrix.ty)*this.translateMix,T$n.updateChild()),0<this.scaleMix){var T$b=Math.sqrt(T$n.resultMatrix.a*T$n.resultMatrix.a+T$n.resultMatrix.c*T$n.resultMatrix.c),T$r=Math.sqrt(T$C*T$C+T$E*T$E),T$m=1e-5<T$b?(T$b+(T$r-T$b+this._data.offsetScaleX)*this.scaleMix)/T$b:0;T$n.resultMatrix.a*=T$m,T$n.resultMatrix.c*=T$m,T$b=Math.sqrt(T$n.resultMatrix.b*T$n.resultMatrix.b+T$n.resultMatrix.d*T$n.resultMatrix.d),T$r=Math.sqrt(T$_*T$_+T$y*T$y),T$m=1e-5<T$b?(T$b+(T$r-T$b+this._data.offsetScaleY)*this.scaleMix)/T$b:0,T$n.resultMatrix.b*=T$m,T$n.resultMatrix.d*=T$m;}if(0<this.shearMix){T$W=T$n.resultMatrix.b,T$J=T$n.resultMatrix.d;var T$d=Math.atan2(T$J,T$W);(T$j=Math.atan2(T$y,T$_)-Math.atan2(T$E,T$C)-(T$d-Math.atan2(T$n.resultMatrix.c,T$n.resultMatrix.a)))>Math.PI?T$j-=2*Math.PI:T$j<-Math.PI&&(T$j+=2*Math.PI),T$j=T$d+(T$j+this._data.offsetShearY*Math.PI/180)*this.shearMix,T$m=Math.sqrt(T$W*T$W+T$J*T$J),T$n.resultMatrix.b=Math.cos(T$j)*T$m,T$n.resultMatrix.d=Math.sin(T$j)*T$m;}}},T$n;}(),T$In=function(){function T$n(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[];}return T$E(T$n,"laya.ani.bone.TfConstraintData"),T$n;}(),T$Zn=function(){function T$n(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null;}T$E(T$n,"laya.ani.bone.Transform");var T$C=T$n.prototype;return T$C.initData=function(T$n){null!=T$n.x&&(this.x=T$n.x),null!=T$n.y&&(this.y=T$n.y),null!=T$n.skX&&(this.skX=T$n.skX),null!=T$n.skY&&(this.skY=T$n.skY),null!=T$n.scX&&(this.scX=T$n.scX),null!=T$n.scY&&(this.scY=T$n.scY);},T$C.getMatrix=function(){var T$n;return(T$n=this.mMatrix?this.mMatrix:this.mMatrix=new T$Bn()).identity(),T$n.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(T$n,this.skewX*Math.PI/180,this.skewY*Math.PI/180),T$n.rotate(this.skX*Math.PI/180),T$n.translate(this.x,this.y),T$n;},T$C.skew=function(T$n,T$C,T$_){var T$E=Math.sin(T$_),T$y=Math.cos(T$_),T$p=Math.sin(T$C),T$c=Math.cos(T$C);return T$n.setTo(T$n.a*T$c-T$n.b*T$E,T$n.a*T$p+T$n.b*T$y,T$n.c*T$c-T$n.d*T$E,T$n.c*T$p+T$n.d*T$y,T$n.tx*T$c-T$n.ty*T$E,T$n.tx*T$p+T$n.ty*T$y),T$n;},T$n;}(),T$T=function(){function T$n(){}return T$E(T$n,"laya.ani.bone.UVTools"),T$n.getRelativeUV=function(T$n,T$C,T$_){var T$E=T$n[0],T$y=T$n[2]-T$n[0],T$p=T$n[1],T$c=T$n[5]-T$n[1];T$_||(T$_=[]),T$_.length=T$C.length;var T$l,T$W=0;T$l=T$_.length;var T$q=1/T$y,T$J=1/T$c;for(T$W=0;T$W<T$l;T$W+=2)T$_[T$W]=(T$C[T$W]-T$E)*T$q,T$_[T$W+1]=(T$C[T$W+1]-T$p)*T$J;return T$_;},T$n.getAbsoluteUV=function(T$n,T$C,T$_){if(0==T$n[0]&&0==T$n[1]&&1==T$n[4]&&1==T$n[5])return T$_?(T$d.copyArray(T$_,T$C),T$_):T$C;var T$E=T$n[0],T$y=T$n[2]-T$n[0],T$p=T$n[1],T$c=T$n[5]-T$n[1];T$_||(T$_=[]),T$_.length=T$C.length;var T$l,T$W=0;for(T$l=T$_.length,T$W=0;T$W<T$l;T$W+=2)T$_[T$W]=T$C[T$W]*T$y+T$E,T$_[T$W+1]=T$C[T$W+1]*T$c+T$p;return T$_;},T$n;}(),T$g=function(){function T$n(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null;}return T$E(T$n,"laya.ani.KeyFramesContent"),T$n;}(),T$Y=function(){function T$J(){}return T$E(T$J,"laya.ani.math.BezierLerp"),T$J.getBezierRate=function(T$n,T$C,T$_,T$E,T$y){var T$p=T$J._getBezierParamKey(T$C,T$_,T$E,T$y),T$c=100*T$p+T$n;if(T$J._bezierResultCache[T$c])return T$J._bezierResultCache[T$c];var T$l,T$W=T$J._getBezierPoints(T$C,T$_,T$E,T$y,T$p),T$q=0;for(T$l=T$W.length,T$q=0;T$q<T$l;T$q+=2)if(T$n<=T$W[T$q])return T$J._bezierResultCache[T$c]=T$W[T$q+1],T$W[T$q+1];return T$J._bezierResultCache[T$c]=1;},T$J._getBezierParamKey=function(T$n,T$C,T$_,T$E){return 100*(100*(100*(100*T$n+T$C)+T$_)+T$E);},T$J._getBezierPoints=function(T$n,T$C,T$_,T$E,T$y){return T$J._bezierPointsCache[T$y]?T$J._bezierPointsCache[T$y]:(T$p=[0,0,T$n,T$C,T$_,T$E,1,1],T$c=new T$l().getBezierPoints(T$p,100,3),T$J._bezierPointsCache[T$y]=T$c);var T$p,T$c;},T$J._bezierResultCache={},T$J._bezierPointsCache={},T$J;}(),T$s=function(T$n){function T$C(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,T$C.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1;}T$E(T$C,"laya.ani.AnimationPlayer",T$y);var T$_=T$C.prototype;return T$yn.imps(T$_,{"laya.resource.IDestroy":!0}),T$_._onTempletLoadedComputeFullKeyframeIndices=function(T$n,T$C,T$_){this._templet===T$_&&this._cachePlayRate===T$n&&this._cacheFrameRate===T$C&&this._computeFullKeyframeIndices();},T$_._computeFullKeyframeIndices=function(){for(var T$n=this._fullFrames=[],T$C=this._templet,T$_=this._cacheFrameRateInterval*this._cachePlayRate,T$E=0,T$y=T$C.getAnimationCount();T$E<T$y;T$E++){for(var T$p=[],T$c=0,T$l=T$C.getAnimation(T$E).nodes.length;T$c<T$l;T$c++){for(var T$W=T$C.getAnimation(T$E).nodes[T$c],T$q=Math.floor(T$W.playTime/T$_+.01),T$J=new Uint16Array(T$q+1),T$j=-1,T$P=0,T$x=T$W.keyFrame.length;T$P<T$x;T$P++){var T$b=T$W.keyFrame[T$P],T$r=T$b.startTime,T$m=T$r+T$b.duration+T$_;do{for(var T$d=Math.floor(T$r/T$_+.5),T$a=T$j+1;T$a<T$d;T$a++)T$J[T$a]=T$P;T$J[T$j=T$d]=T$P,T$r+=T$_;}while(T$r<=T$m);}T$p.push(T$J);}T$n.push(T$p);}},T$_._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration();},T$_._calculatePlayDuration=function(){if(0!==this.state){var T$n=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=T$n),this._playEnd>T$n&&(this._playEnd=T$n),this._playDuration=this._playEnd-this._playStart;}},T$_._setPlayParams=function(T$n,T$C){this._currentTime=T$n,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/T$C+.01),0),this._currentFrameTime=this._currentKeyframeIndex*T$C;},T$_._setPlayParamsWhenStop=function(T$n,T$C){this._currentTime=T$n,this._currentKeyframeIndex=Math.max(Math.floor(T$n/T$C+.01),0),this._currentFrameTime=this._currentKeyframeIndex*T$C,this._currentAnimationClipIndex=-1;},T$_._update=function(T$n){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var T$C=this._cacheFrameRateInterval*this._cachePlayRate,T$_=0;this._startUpdateLoopCount!==T$b.loopCount&&(T$_=T$n*this.playbackRate,this._elapsedPlaybackTime+=T$_);var T$E=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=T$E)return this._setPlayParamsWhenStop(T$E,T$C),void this.event("stopped");if(T$_+=this._currentTime,0<T$E){if(T$E<=T$_)do{if(T$_-=T$E,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(T$E,T$C),this._stopWhenCircleFinish=!1,void this.event("stopped");T$_<T$E&&(this._setPlayParams(T$_,T$C),this.event("complete"));}while(T$E<=T$_);else this._setPlayParams(T$_,T$C);}else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(T$E,T$C),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete");}}},T$_._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0;},T$_.play=function(T$n,T$C,T$_,T$E,T$y){if(void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=1),void 0===T$_&&(T$_=2147483647),void 0===T$E&&(T$E=0),void 0===T$y&&(T$y=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(T$_<0||T$E<0||T$y<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==T$y&&T$y<T$E)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=T$C,this._overallDuration=T$_,this._playStart=T$E,this._playEnd=T$y,this._paused=!1,this._currentAnimationClipIndex=T$n,this._currentKeyframeIndex=0,this._startUpdateLoopCount=T$b.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0);},T$_.playByFrame=function(T$n,T$C,T$_,T$E,T$y,T$p){void 0===T$n&&(T$n=0),void 0===T$C&&(T$C=1),void 0===T$_&&(T$_=2147483647),void 0===T$E&&(T$E=0),void 0===T$y&&(T$y=0),void 0===T$p&&(T$p=30);var T$c=1e3/T$p;this.play(T$n,T$C,T$_,T$E*T$c,T$y*T$c);},T$_.stop=function(T$n){void 0===T$n&&(T$n=!0),T$n?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0;},T$p(0,T$_,"playEnd",function(){return this._playEnd;}),T$p(0,T$_,"templet",function(){return this._templet;},function(T$n){0===!this.state&&this.stop(!0),this._templet!==T$n&&((this._templet=T$n).loaded?this._computeFullKeyframeIndices():T$n.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]));}),T$p(0,T$_,"playStart",function(){return this._playStart;}),T$p(0,T$_,"playDuration",function(){return this._playDuration;}),T$p(0,T$_,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2;}),T$p(0,T$_,"currentKeyframeIndex",function(){return this._currentKeyframeIndex;}),T$p(0,T$_,"overallDuration",function(){return this._overallDuration;}),T$p(0,T$_,"currentFrameTime",function(){return this._currentFrameTime;}),T$p(0,T$_,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex;}),T$p(0,T$_,"currentPlayTime",function(){return this._currentTime+this._playStart;}),T$p(0,T$_,"cachePlayRate",function(){return this._cachePlayRate;},function(T$n){this._cachePlayRate!==T$n&&(this._cachePlayRate=T$n,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[T$n,this._cacheFrameRate])));}),T$p(0,T$_,"cacheFrameRate",function(){return this._cacheFrameRate;},function(T$n){this._cacheFrameRate!==T$n&&(this._cacheFrameRate=T$n,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,T$n])));}),T$p(0,T$_,"currentTime",null,function(T$n){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(T$n<this._playStart||T$n>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=T$b.loopCount;var T$C=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=T$n,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/T$C),0),this._currentFrameTime=this._currentKeyframeIndex*T$C;}}),T$p(0,T$_,"paused",function(){return this._paused;},function(T$n){(this._paused=T$n)&&this.event("paused");}),T$p(0,T$_,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval;}),T$p(0,T$_,"destroyed",function(){return this._destroyed;}),T$C;}(),T$H=function(T$n){function T$C(){T$C.__super.call(this),T$m.isConchNode&&(this.drawSkin=function(T$n){T$n.transform||(T$n.transform=T$Bn.EMPTY),this._addCmd([T$n]),this.setSkinMesh&&this.setSkinMesh(T$n._ps,T$n.mVBData,T$n.mEleNum,0,T$n.mTexture,T$n.transform);});}return T$E(T$C,"laya.ani.GraphicsAni",T$c),T$C.prototype.drawSkin=function(T$n){var T$C=[T$n];this._saveToCmd(T$m._context._drawSkin,T$C);},T$C.create=function(){return T$C._caches.pop()||new T$C();},T$C.recycle=function(T$n){T$n.clear(),T$C._caches.push(T$n);},T$C._caches=[],T$C;}(),T$X=function(T$n){function T$a(){this._aniMap={},this.unfixedLastAniIndex=-1,T$a.__super.call(this),this._anis=new Array();}T$E(T$a,"laya.ani.AnimationTemplet",T$J);var T$C=T$a.prototype;return T$C.parse=function(T$n){var T$C=new T$wn(T$n);this._aniVersion=T$C.readUTFString(),T$O.parse(this,T$C);},T$C._calculateKeyFrame=function(T$n,T$C,T$_){var T$E=T$n.keyFrame;T$E[T$C]=T$E[0];for(var T$y=0;T$y<T$C;T$y++){var T$p=T$E[T$y];T$p.nextData=0===T$p.duration?T$p.data:T$E[T$y+1].data;}T$E.length--;},T$C.onAsynLoaded=function(T$n,T$C,T$_){var T$E=new T$wn(T$C);switch(this._aniVersion=T$E.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":T$A.parse(this,T$E);break;default:T$O.parse(this,T$E);}this._endLoaded();},T$C.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null;},T$C.getAnimationCount=function(){return this._anis.length;},T$C.getAnimation=function(T$n){return this._anis[T$n];},T$C.getAniDuration=function(T$n){return this._anis[T$n].playTime;},T$C.getNodes=function(T$n){return this._anis[T$n].nodes;},T$C.getNodeIndexWithName=function(T$n,T$C){return this._anis[T$n].bone3DMap[T$C];},T$C.getNodeCount=function(T$n){return this._anis[T$n].nodes.length;},T$C.getTotalkeyframesLength=function(T$n){return this._anis[T$n].totalKeyframeDatasLength;},T$C.getPublicExtData=function(){return this._publicExtData;},T$C.getAnimationDataWithCache=function(T$n,T$C,T$_,T$E){var T$y=T$C[T$_];if(T$y){var T$p=T$y[T$n];return T$p?T$p[T$E]:null;}return null;},T$C.setAnimationDataWithCache=function(T$n,T$C,T$_,T$E,T$y){var T$p=T$C[T$_]||(T$C[T$_]={});(T$p[T$n]||(T$p[T$n]=[]))[T$E]=T$y;},T$C.getOriginalData=function(T$n,T$C,T$_,T$E,T$y){for(var T$p=this._anis[T$n].nodes,T$c=0,T$l=0,T$W=T$p.length,T$q=0;T$l<T$W;T$l++){var T$J,T$j=T$p[T$l];T$J=T$j.keyFrame[T$_[T$l][T$E]],T$j.dataOffset=T$q;var T$P=T$y-T$J.startTime,T$x=T$j.lerpType;if(T$x)switch(T$x){case 0:case 1:for(T$c=0;T$c<T$j.keyframeWidth;)T$c+=T$j.interpolationMethod[T$c](T$j,T$c,T$C,T$q+T$c,T$J.data,T$P,null,T$J.duration,T$J.nextData);break;case 2:var T$b=T$J.interpolationData,T$r=T$b.length,T$m=0;for(T$c=0;T$c<T$r;){var T$d=T$b[T$c];switch(T$d){case 6:case 7:T$c+=T$a.interpolation[T$d](T$j,T$m,T$C,T$q+T$m,T$J.data,T$P,null,T$J.duration,T$J.nextData,T$b,T$c+1);break;default:T$c+=T$a.interpolation[T$d](T$j,T$m,T$C,T$q+T$m,T$J.data,T$P,null,T$J.duration,T$J.nextData);}T$m++;}}else for(T$c=0;T$c<T$j.keyframeWidth;)T$c+=T$j.interpolationMethod[T$c](T$j,T$c,T$C,T$q+T$c,T$J.data,T$P,null,T$J.duration,T$J.nextData);T$q+=T$j.keyframeWidth;}},T$C.getNodesCurrentFrameIndex=function(T$n,T$C){var T$_=this._anis[T$n].nodes;T$n!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(T$_.length),this.unfixedCurrentTimes=new Float32Array(T$_.length),this.unfixedLastAniIndex=T$n);for(var T$E=0,T$y=T$_.length;T$E<T$y;T$E++){var T$p=T$_[T$E];for(T$C<this.unfixedCurrentTimes[T$E]&&(this.unfixedCurrentFrameIndexes[T$E]=0),this.unfixedCurrentTimes[T$E]=T$C;this.unfixedCurrentFrameIndexes[T$E]<T$p.keyFrame.length&&!(T$p.keyFrame[this.unfixedCurrentFrameIndexes[T$E]].startTime>this.unfixedCurrentTimes[T$E]);)this.unfixedCurrentFrameIndexes[T$E]++;this.unfixedCurrentFrameIndexes[T$E]--;}return this.unfixedCurrentFrameIndexes;},T$C.getOriginalDataUnfixedRate=function(T$n,T$C,T$_){var T$E=this._anis[T$n].nodes;T$n!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(T$E.length),this.unfixedCurrentTimes=new Float32Array(T$E.length),this.unfixedKeyframes=T$r(T$E.length),this.unfixedLastAniIndex=T$n);for(var T$y=0,T$p=0,T$c=T$E.length,T$l=0;T$p<T$c;T$p++){var T$W=T$E[T$p];for(T$_<this.unfixedCurrentTimes[T$p]&&(this.unfixedCurrentFrameIndexes[T$p]=0),this.unfixedCurrentTimes[T$p]=T$_;this.unfixedCurrentFrameIndexes[T$p]<T$W.keyFrame.length&&!(T$W.keyFrame[this.unfixedCurrentFrameIndexes[T$p]].startTime>this.unfixedCurrentTimes[T$p]);)this.unfixedKeyframes[T$p]=T$W.keyFrame[this.unfixedCurrentFrameIndexes[T$p]],this.unfixedCurrentFrameIndexes[T$p]++;var T$q=this.unfixedKeyframes[T$p];T$W.dataOffset=T$l;var T$J=T$_-T$q.startTime;if(T$W.lerpType)switch(T$W.lerpType){case 0:case 1:for(T$y=0;T$y<T$W.keyframeWidth;)T$y+=T$W.interpolationMethod[T$y](T$W,T$y,T$C,T$l+T$y,T$q.data,T$J,null,T$q.duration,T$q.nextData);break;case 2:var T$j=T$q.interpolationData,T$P=T$j.length,T$x=0;for(T$y=0;T$y<T$P;){var T$b=T$j[T$y];switch(T$b){case 6:case 7:T$y+=T$a.interpolation[T$b](T$W,T$x,T$C,T$l+T$x,T$q.data,T$J,null,T$q.duration,T$q.nextData,T$j,T$y+1);break;default:T$y+=T$a.interpolation[T$b](T$W,T$x,T$C,T$l+T$x,T$q.data,T$J,null,T$q.duration,T$q.nextData);}T$x++;}}else for(T$y=0;T$y<T$W.keyframeWidth;)T$y+=T$W.interpolationMethod[T$y](T$W,T$y,T$C,T$l+T$y,T$q.data,T$J,null,T$q.duration,T$q.nextData);T$l+=T$W.keyframeWidth;}},T$a._LinearInterpolation_0=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q){var T$J=0===T$l?0:T$p/T$l;return T$_[T$E]=(1-T$J)*T$y[T$C]+T$J*T$W[T$C],1;},T$a._QuaternionInterpolation_1=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q){var T$J=0===T$l?0:T$p/T$l;return T$P.slerpQuaternionArray(T$y,T$C,T$W,T$C,T$J,T$_,T$E),4;},T$a._AngleInterpolation_2=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q){return 0;},T$a._RadiansInterpolation_3=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q){return 0;},T$a._Matrix4x4Interpolation_4=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q){for(var T$J=0;T$J<16;T$J++,T$C++)T$_[T$E+T$J]=T$y[T$C]+T$p*T$c[T$C];return 16;},T$a._NoInterpolation_5=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q){return T$_[T$E]=T$y[T$C],1;},T$a._BezierInterpolation_6=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q,T$J){return void 0===T$J&&(T$J=0),T$_[T$E]=T$y[T$C]+(T$W[T$C]-T$y[T$C])*T$Y.getBezierRate(T$p/T$l,T$q[T$J],T$q[T$J+1],T$q[T$J+2],T$q[T$J+3]),5;},T$a._BezierInterpolation_7=function(T$n,T$C,T$_,T$E,T$y,T$p,T$c,T$l,T$W,T$q,T$J){return void 0===T$J&&(T$J=0),T$_[T$E]=T$q[T$J+4]+T$q[T$J+5]*T$Y.getBezierRate((.001*T$p+T$q[T$J+6])/T$q[T$J+7],T$q[T$J],T$q[T$J+1],T$q[T$J+2],T$q[T$J+3]),9;},T$a.load=function(T$n){return T$yn.loader.create(T$n,null,null,T$a);},T$a.interpolation=[T$a._LinearInterpolation_0,T$a._QuaternionInterpolation_1,T$a._AngleInterpolation_2,T$a._RadiansInterpolation_3,T$a._Matrix4x4Interpolation_4,T$a._NoInterpolation_5,T$a._BezierInterpolation_6,T$a._BezierInterpolation_7],T$a;}(),T$N=function(T$C){function T$_(T$n,T$C){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,T$_.__super.call(this),void 0===T$C&&(T$C=0),T$n&&this.init(T$n,T$C);}T$E(T$_,"laya.ani.bone.Skeleton",T$C);var T$n=T$_.prototype;return T$n.init=function(T$n,T$C){void 0===T$C&&(T$C=0);var T$_,T$E,T$y,T$p=0,T$c=0;if(1==T$C)for(this._graphicsCache=[],T$p=0,T$c=T$n.getAnimationCount();T$p<T$c;T$p++)this._graphicsCache.push([]);if(this._yReverseMatrix=T$n.yReverseMatrix,this._aniMode=T$C,this._templet=T$n,this._player=new T$s(),this._player.cacheFrameRate=T$n.rate,this._player.templet=T$n,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=T$n.mBoneArr,this._rootBone=T$n.mRootBone,this._aniSectionDic=T$n.aniSectionDic,0<T$n.ikArr.length)for(this._ikArr=[],T$p=0,T$c=T$n.ikArr.length;T$p<T$c;T$p++)this._ikArr.push(new T$a(T$n.ikArr[T$p],this._boneList));if(0<T$n.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),T$p=0,T$c=T$n.pathArr.length;T$p<T$c;T$p++)T$_=T$n.pathArr[T$p],T$E=new T$k(T$_,this._boneList),(T$y=this._boneSlotDic[T$_.name])&&((T$E=new T$k(T$_,this._boneList)).target=T$y),this._pathDic[T$_.name]=T$E;if(0<T$n.tfArr.length)for(this._tfArr=[],T$p=0,T$c=T$n.tfArr.length;T$p<T$c;T$p++)this._tfArr.push(new T$t(T$n.tfArr[T$p],this._boneList));if(0<T$n.skinDataArray.length){var T$l=this._templet.skinDataArray[this._skinIndex];this._skinName=T$l.name;}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause);},T$n.load=function(T$n,T$C,T$_){},T$n._onLoaded=function(){},T$n._parseComplete=function(){var T$n=T$S.TEMPLET_DICTIONARY[this._aniPath];T$n&&(this.init(T$n,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this);},T$n._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败");},T$n._onPlay=function(){this.event("played");},T$n._onStop=function(){var T$n,T$C=this._templet.eventAniArr[this._aniClipIndex];if(T$C&&this._eventIndex<T$C.length)for(;this._eventIndex<T$C.length;this._eventIndex++)(T$n=T$C[this._eventIndex]).time>=this._player.playStart&&T$n.time<=this._player.playEnd&&this.event("label",T$n);this._eventIndex=0,this._drawOrder=null,this.event("stopped");},T$n._onPause=function(){this.event("paused");},T$n._parseSrcBoneMatrix=function(){var T$n=0,T$C=0;for(T$C=this._templet.srcBoneMatrixArr.length,T$n=0;T$n<T$C;T$n++)this._boneMatrixArray.push(new T$Bn());if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var T$_,T$E,T$y=this._templet.boneSlotArray;for(T$n=0,T$C=T$y.length;T$n<T$C;T$n++)T$_=T$y[T$n],null==(T$E=this._bindBoneBoneSlotDic[T$_.parent])&&(this._bindBoneBoneSlotDic[T$_.parent]=T$E=[]),this._boneSlotDic[T$_.name]=T$_=T$_.copy(),T$E.push(T$_),this._boneSlotArray.push(T$_);}},T$n._emitMissedEvents=function(T$n,T$C,T$_){void 0===T$_&&(T$_=0);var T$E=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(T$E){var T$y,T$p,T$c=0;for(T$y=T$E.length,T$c=T$_;T$c<T$y;T$c++)(T$p=T$E[T$c]).time>=this._player.playStart&&T$p.time<=this._player.playEnd&&this.event("label",T$p);}},T$n._update=function(T$n){if(void 0===T$n&&(T$n=!0),!(this._pause||T$n&&this._indexControl)){var T$C=this.timer.currTimer,T$_=this._player.currentKeyframeIndex,T$E=T$C-this._lastTime;if(T$n?this._player._update(T$E):T$_=-1,this._lastTime=T$C,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<T$E&&this._clipIndex==T$_&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var T$y;this._lastUpdateAniClipIndex=this._aniClipIndex,T$_>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var T$p,T$c=this._templet.eventAniArr[this._aniClipIndex];if(T$c&&this._eventIndex<T$c.length&&((T$y=T$c[this._eventIndex]).time>=this._player.playStart&&T$y.time<=this._player.playEnd?this._player.currentPlayTime>=T$y.time&&(this.event("label",T$y),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(T$p=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=T$p&&(this.graphics=T$p));var T$l=0,T$W=0;for(T$W=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,T$W-1)&&0<T$W;)T$W--;if(T$W<this._clipIndex)for(T$l=T$W;T$l<this._clipIndex;T$l++)this._createGraphics(T$l);}else if(1==this._aniMode){if(T$p=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=T$p&&(this.graphics=T$p));for(T$W=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,T$W-1)&&0<T$W;)T$W--;if(T$W<this._clipIndex)for(T$l=T$W;T$l<this._clipIndex;T$l++)this._createGraphics(T$l);}this._createGraphics();}}},T$n._createGraphics=function(T$n){void 0===T$n&&(T$n=-1),-1==T$n&&(T$n=this._clipIndex);var T$C,T$_,T$E=T$n*this._player.cacheFrameRateInterval,T$y=this._templet.drawOrderAniArr[this._aniClipIndex];if(T$y&&0<T$y.length)for(this._drawOrderIndex=0,T$C=T$y[this._drawOrderIndex];T$E>=T$C.time&&(this._drawOrder=T$C.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=T$y.length));)T$C=T$y[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=T$H.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=T$H.create(),T$_=this.graphics;var T$p=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],T$n,T$E);var T$c,T$l,T$W,T$q,T$J=this._aniSectionDic[this._aniClipIndex],T$j=0,T$P=0,T$x=0,T$b=0,T$r=0,T$m=this._templet.srcBoneMatrixArr.length;for(T$r=T$J[T$P=0];T$P<T$m;T$P++)T$q=this._boneList[T$P],T$W=this._templet.srcBoneMatrixArr[T$P],T$q.resultTransform.scX=T$W.scX*this._curOriginalData[T$j++],T$q.resultTransform.skX=T$W.skX+this._curOriginalData[T$j++],T$q.resultTransform.skY=T$W.skY+this._curOriginalData[T$j++],T$q.resultTransform.scY=T$W.scY*this._curOriginalData[T$j++],T$q.resultTransform.x=T$W.x+this._curOriginalData[T$j++],T$q.resultTransform.y=T$W.y+this._curOriginalData[T$j++],8===this._templet.tMatrixDataLen&&(T$q.resultTransform.skewX=T$W.skewX+this._curOriginalData[T$j++],T$q.resultTransform.skewY=T$W.skewY+this._curOriginalData[T$j++]);var T$d,T$a={},T$O={};for(T$r+=T$J[1];T$P<T$r;T$P++)T$a[(T$d=T$p[T$P]).name]=this._curOriginalData[T$j++],T$O[T$d.name]=this._curOriginalData[T$j++],this._curOriginalData[T$j++],this._curOriginalData[T$j++],this._curOriginalData[T$j++],this._curOriginalData[T$j++];var T$A,T$k,T$t={},T$T={};for(T$r+=T$J[2];T$P<T$r;T$P++)T$t[(T$d=T$p[T$P]).name]=this._curOriginalData[T$j++],T$T[T$d.name]=this._curOriginalData[T$j++],this._curOriginalData[T$j++],this._curOriginalData[T$j++],this._curOriginalData[T$j++],this._curOriginalData[T$j++];if(this._pathDic)for(T$r+=T$J[3];T$P<T$r;T$P++){if(T$d=T$p[T$P],T$A=this._pathDic[T$d.name])switch(new T$wn(T$d.extenData).getByte()){case 1:T$A.position=this._curOriginalData[T$j++];break;case 2:T$A.spacing=this._curOriginalData[T$j++];break;case 3:T$A.rotateMix=this._curOriginalData[T$j++],T$A.translateMix=this._curOriginalData[T$j++];}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(T$Bn.TEMP.identity()),this._ikArr)for(T$P=0,T$r=this._ikArr.length;T$P<T$r;T$P++)T$k=this._ikArr[T$P],T$t.hasOwnProperty(T$k.name)&&(T$k.bendDirection=T$t[T$k.name]),T$T.hasOwnProperty(T$k.name)&&(T$k.mix=T$T[T$k.name]),T$k.apply();if(this._pathDic)for(var T$Y in this._pathDic)(T$A=this._pathDic[T$Y]).apply(this._boneList,T$_);if(this._tfArr)for(T$P=0,T$b=this._tfArr.length;T$P<T$b;T$P++)this._tfArr[T$P].apply();for(T$P=0,T$b=this._boneList.length;T$P<T$b;T$P++)if(T$q=this._boneList[T$P],T$l=this._bindBoneBoneSlotDic[T$q.name],T$q.resultMatrix.copyTo(this._boneMatrixArray[T$P]),T$l)for(T$x=0,T$r=T$l.length;T$x<T$r;T$x++)(T$c=T$l[T$x])&&T$c.setParentMatrix(T$q.resultMatrix);var T$s,T$N,T$S,T$M,T$w={},T$B=this._templet.deformAniArr;if(T$B&&0<T$B.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,T$P=0,T$r=this._boneSlotArray.length;T$P<T$r;T$P++)(T$c=this._boneSlotArray[T$P]).deformData=null;var T$V,T$g=T$B[this._aniClipIndex];for(T$V in T$s=T$g.default,this._setDeform(T$s,T$w,this._boneSlotArray,T$E),T$g)"default"!=T$V&&T$V!=this._skinName&&(T$s=T$g[T$V],this._setDeform(T$s,T$w,this._boneSlotArray,T$E));T$s=T$g[this._skinName],this._setDeform(T$s,T$w,this._boneSlotArray,T$E);}if(this._drawOrder)for(T$P=0,T$r=this._drawOrder.length;T$P<T$r;T$P++)T$N=T$a[(T$c=this._boneSlotArray[this._drawOrder[T$P]]).name],T$S=T$O[T$c.name],isNaN(T$S)||(T$_.save(),T$_.alpha(T$S)),isNaN(T$N)||-2==T$N||(this._templet.attachmentNames?T$c.showDisplayByName(this._templet.attachmentNames[T$N]):T$c.showDisplayByIndex(T$N)),T$w[this._drawOrder[T$P]]?(T$M=T$w[this._drawOrder[T$P]],T$c.currDisplayData&&T$M[T$c.currDisplayData.attachmentName]?T$c.deformData=T$M[T$c.currDisplayData.attachmentName]:T$c.deformData=null):T$c.deformData=null,isNaN(T$S)?T$c.draw(T$_,this._boneMatrixArray,2==this._aniMode):T$c.draw(T$_,this._boneMatrixArray,2==this._aniMode,T$S),isNaN(T$S)||T$_.restore();else for(T$P=0,T$r=this._boneSlotArray.length;T$P<T$r;T$P++)T$N=T$a[(T$c=this._boneSlotArray[T$P]).name],T$S=T$O[T$c.name],isNaN(T$S)||(T$_.save(),T$_.alpha(T$S)),isNaN(T$N)||-2==T$N||(this._templet.attachmentNames?T$c.showDisplayByName(this._templet.attachmentNames[T$N]):T$c.showDisplayByIndex(T$N)),T$w[T$P]?(T$M=T$w[T$P],T$c.currDisplayData&&T$M[T$c.currDisplayData.attachmentName]?T$c.deformData=T$M[T$c.currDisplayData.attachmentName]:T$c.deformData=null):T$c.deformData=null,isNaN(T$S)?T$c.draw(T$_,this._boneMatrixArray,2==this._aniMode):T$c.draw(T$_,this._boneMatrixArray,2==this._aniMode,T$S),isNaN(T$S)||T$_.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,T$n,T$_):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,T$n,T$_);},T$n._setDeform=function(T$n,T$C,T$_,T$E){if(T$n){var T$y,T$p,T$c,T$l=0,T$W=0,T$q=0;if(T$n)for(T$l=0,T$W=T$n.deformSlotDataList.length;T$l<T$W;T$l++)for(T$y=T$n.deformSlotDataList[T$l],T$q=0;T$q<T$y.deformSlotDisplayList.length;T$q++)T$c=T$_[(T$p=T$y.deformSlotDisplayList[T$q]).slotIndex],T$p.apply(T$E,T$c),T$C[T$p.slotIndex]||(T$C[T$p.slotIndex]={}),T$C[T$p.slotIndex][T$p.attachment]=T$p.deformData;}},T$n.getAnimNum=function(){return this._templet.getAnimationCount();},T$n.getAniNameByIndex=function(T$n){return this._templet.getAniNameByIndex(T$n);},T$n.getSlotByName=function(T$n){return this._boneSlotDic[T$n];},T$n.showSkinByName=function(T$n,T$C){void 0===T$C&&(T$C=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(T$n),T$C);},T$n.showSkinByIndex=function(T$n,T$C){void 0===T$C&&(T$C=!0);for(var T$_=0;T$_<this._boneSlotArray.length;T$_++)this._boneSlotArray[T$_].showSlotData(null,T$C);if(this._templet.showSkinByIndex(this._boneSlotDic,T$n,T$C)){var T$E=this._templet.skinDataArray[T$n];this._skinIndex=T$n,this._skinName=T$E.name;}this._clearCache();},T$n.showSlotSkinByIndex=function(T$n,T$C){if(0!=this._aniMode){var T$_=this.getSlotByName(T$n);T$_&&T$_.showDisplayByIndex(T$C),this._clearCache();}},T$n.showSlotSkinByName=function(T$n,T$C){if(0!=this._aniMode){var T$_=this.getSlotByName(T$n);T$_&&T$_.showDisplayByName(T$C),this._clearCache();}},T$n.replaceSlotSkinName=function(T$n,T$C,T$_){if(0!=this._aniMode){var T$E=this.getSlotByName(T$n);T$E&&T$E.replaceDisplayByName(T$C,T$_),this._clearCache();}},T$n.replaceSlotSkinByIndex=function(T$n,T$C,T$_){if(0!=this._aniMode){var T$E=this.getSlotByName(T$n);T$E&&T$E.replaceDisplayByIndex(T$C,T$_),this._clearCache();}},T$n.setSlotSkin=function(T$n,T$C){if(0!=this._aniMode){var T$_=this.getSlotByName(T$n);T$_&&T$_.replaceSkin(T$C),this._clearCache();}},T$n._clearCache=function(){if(1==this._aniMode)for(var T$n=0,T$C=this._graphicsCache.length;T$n<T$C;T$n++){for(var T$_=0,T$E=this._graphicsCache[T$n].length;T$_<T$E;T$_++){var T$y=this._graphicsCache[T$n][T$_];T$y!=this.graphics&&T$H.recycle(T$y);}this._graphicsCache[T$n].length=0;}},T$n.play=function(T$n,T$C,T$_,T$E,T$y,T$p){void 0===T$_&&(T$_=!0),void 0===T$E&&(T$E=0),void 0===T$y&&(T$y=0),void 0===T$p&&(T$p=!0),this._indexControl=!1;var T$c=-1,T$l=NaN;if(T$l=T$C?2147483647:0,"string"==typeof T$n)for(var T$W=0,T$q=this._templet.getAnimationCount();T$W<T$q;T$W++){var T$J=this._templet.getAnimation(T$W);if(T$J&&T$n==T$J.name){T$c=T$W;break;}}else T$c=T$n;-1<T$c&&T$c<this.getAnimNum()&&(this._aniClipIndex=T$c,(T$_||this._pause||this._currAniIndex!=T$c)&&(this._currAniIndex=T$c,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(T$c)),this._drawOrder=null,this._eventIndex=0,this._player.play(T$c,this._player.playbackRate,T$l,T$E,T$y),T$p&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=T$j.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()));},T$n.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update));},T$n.playbackRate=function(T$n){this._player&&(this._player.playbackRate=T$n);},T$n.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update));},T$n.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=T$j.now(),this.timer.frameLoop(1,this,this._update,null,!0));},T$n._getGrahicsDataWithCache=function(T$n,T$C){return this._graphicsCache[T$n][T$C];},T$n._setGrahicsDataWithCache=function(T$n,T$C,T$_){this._graphicsCache[T$n][T$C]=T$_;},T$n.destroy=function(T$n){void 0===T$n&&(T$n=!0),T$C.prototype.destroy.call(this,T$n),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update);},T$p(0,T$n,"url",function(){return this._aniPath;},function(T$n){this.load(T$n);}),T$p(0,T$n,"index",function(){return this._index;},function(T$n){this.player&&(this._index=T$n,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1));}),T$p(0,T$n,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total;}),T$p(0,T$n,"templet",function(){return this._templet;}),T$p(0,T$n,"player",function(){return this._player;}),T$_.useSimpleMeshInCanvas=!1,T$_;}(T$pn),T$S=function(T$C){function T$y(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,T$y.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[];}T$E(T$y,"laya.ani.bone.Templet",T$C);var T$n=T$y.prototype;return T$n.getLoadList=function(){return this._loadList;},T$n.loadAni=function(T$n){this._skBufferUrl=T$n,T$yn.loader.load(T$n,T$W.create(this,this.onComplete),null,"arraybuffer");},T$n.onComplete=function(T$n){if(this._isDestroyed)this.destroy();else{var T$C=T$q.getRes(this._skBufferUrl);T$C?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,T$C)):this.event("error","load failed:"+this._skBufferUrl);}},T$n.parseData=function(T$n,T$C,T$_){void 0===T$_&&(T$_=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=T$n,this._mainTexture&&T$m.isWebGL&&T$n.bitmap&&(T$n.bitmap.enableMerageInAtlas=!1),this._rate=T$_,this.parse(T$C);},T$n.buildArmature=function(T$n){return void 0===T$n&&(T$n=0),new T$N(this,T$n);},T$n.parse=function(T$n){T$C.prototype.parse.call(this,T$n),this._endLoaded(),this._aniVersion!=T$y.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+T$y.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0);},T$n._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var T$n=0;this._loadList=[];var T$C,T$_=new T$wn(this.getPublicExtData()),T$E=0,T$y=0,T$p=0,T$c=T$_.getInt32(),T$l=T$_.readUTFString(),T$W=T$l.split("\n");for(T$n=0;T$n<T$c;T$n++)T$C=this._path+T$W[2*T$n],T$l=T$W[2*T$n+1],T$_.getFloat32(),T$_.getFloat32(),T$E=T$_.getFloat32(),T$y=T$_.getFloat32(),T$p=T$_.getFloat32(),isNaN(T$p)?0:T$p,T$p=T$_.getFloat32(),isNaN(T$p)?0:T$p,T$p=T$_.getFloat32(),isNaN(T$p)?T$E:T$p,T$p=T$_.getFloat32(),isNaN(T$p)?T$y:T$p,-1==this._loadList.indexOf(T$C)&&this._loadList.push(T$C);this.event("inited",this);}},T$n._textureComplete=function(){for(var T$n,T$C,T$_=0,T$E=this._loadList.length;T$_<T$E;T$_++)T$C=this._loadList[T$_],T$n=this._textureDic[T$C]=T$q.getRes(T$C),T$m.isWebGL&&T$n&&T$n.bitmap&&(T$n.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData();},T$n._parsePublicExtData=function(){var T$n=0,T$C=0,T$_=0,T$E=0,T$y=0;for(T$n=0,T$y=this.getAnimationCount();T$n<T$y;T$n++)this._graphicsCache.push([]);var T$p;T$p="Dragon"!=this._aniClassName;var T$c,T$l,T$W=new T$wn(this.getPublicExtData()),T$q=0,T$J=0,T$j=0,T$P=0,T$x=0,T$b=0,T$r=0,T$m=0,T$d=0,T$a=T$W.getInt32(),T$O=T$W.readUTFString(),T$A=T$O.split("\n");for(T$n=0;T$n<T$a;T$n++){if(T$c=this._mainTexture,T$l=this._path+T$A[2*T$n],T$O=T$A[2*T$n+1],null==this._mainTexture&&(T$c=this._textureDic[T$l]),!T$c)return this.event("error",this),void(this.isParseFail=!0);T$q=T$W.getFloat32(),T$J=T$W.getFloat32(),T$j=T$W.getFloat32(),T$P=T$W.getFloat32(),T$d=T$W.getFloat32(),T$x=isNaN(T$d)?0:T$d,T$d=T$W.getFloat32(),T$b=isNaN(T$d)?0:T$d,T$d=T$W.getFloat32(),T$r=isNaN(T$d)?T$j:T$d,T$d=T$W.getFloat32(),T$m=isNaN(T$d)?T$P:T$d,this.subTextureDic[T$O]=T$Vn.create(T$c,T$q,T$J,T$j,T$P,-T$x,-T$b,T$r,T$m),T$c.alphaTexture&&(this.subTextureDic[T$O].alphaTexture=T$Vn.create(T$c.alphaTexture,T$q,T$J,T$j,T$P,-T$x,-T$b,T$r,T$m));}this._mainTexture=T$c;var T$k,T$t,T$T,T$Y,T$s,T$N=T$W.getUint16();for(T$n=0;T$n<T$N;T$n++)(T$k=[]).push(T$W.getUint16()),T$k.push(T$W.getUint16()),T$k.push(T$W.getUint16()),T$k.push(T$W.getUint16()),this.aniSectionDic[T$n]=T$k;var T$S,T$M=T$W.getInt16(),T$w={};for(T$n=0;T$n<T$M;T$n++)T$t=new T$gn(),0==T$n?T$S=T$t:T$t.root=T$S,T$t.d=T$p?-1:1,T$Y=T$W.readUTFString(),T$s=T$W.readUTFString(),T$t.length=T$W.getFloat32(),1==T$W.getByte()&&(T$t.inheritRotation=!1),1==T$W.getByte()&&(T$t.inheritScale=!1),T$t.name=T$Y,T$s&&((T$T=T$w[T$s])?T$T.addChild(T$t):this.mRootBone=T$t),T$w[T$Y]=T$t,this.mBoneArr.push(T$t);this.tMatrixDataLen=T$W.getUint16();var T$B,T$V,T$g=T$W.getUint16(),T$H=Math.floor(T$g/this.tMatrixDataLen),T$X=this.srcBoneMatrixArr;for(T$n=0;T$n<T$H;T$n++)(T$B=new T$Zn()).scX=T$W.getFloat32(),T$B.skX=T$W.getFloat32(),T$B.skY=T$W.getFloat32(),T$B.scY=T$W.getFloat32(),T$B.x=T$W.getFloat32(),T$B.y=T$W.getFloat32(),8===this.tMatrixDataLen&&(T$B.skewX=T$W.getFloat32(),T$B.skewY=T$W.getFloat32()),T$X.push(T$B),(T$t=this.mBoneArr[T$n]).transform=T$B;var T$$,T$i=T$W.getUint16(),T$f=0;for(T$n=0;T$n<T$i;T$n++){for(T$V=new T$Gn(),T$f=T$W.getUint16(),T$C=0;T$C<T$f;T$C++)T$V.boneNames.push(T$W.readUTFString()),T$V.boneIndexs.push(T$W.getInt16());T$V.name=T$W.readUTFString(),T$V.targetBoneName=T$W.readUTFString(),T$V.targetBoneIndex=T$W.getInt16(),T$V.bendDirection=T$W.getFloat32(),T$V.mix=T$W.getFloat32(),T$V.isSpine=T$p,this.ikArr.push(T$V);}var T$e,T$G=T$W.getUint16(),T$F=0;for(T$n=0;T$n<T$G;T$n++){for(T$$=new T$In(),T$F=T$W.getUint16(),T$C=0;T$C<T$F;T$C++)T$$.boneIndexs.push(T$W.getInt16());T$$.name=T$W.getUTFString(),T$$.targetIndex=T$W.getInt16(),T$$.rotateMix=T$W.getFloat32(),T$$.translateMix=T$W.getFloat32(),T$$.scaleMix=T$W.getFloat32(),T$$.shearMix=T$W.getFloat32(),T$$.offsetRotation=T$W.getFloat32(),T$$.offsetX=T$W.getFloat32(),T$$.offsetY=T$W.getFloat32(),T$$.offsetScaleX=T$W.getFloat32(),T$$.offsetScaleY=T$W.getFloat32(),T$$.offsetShearY=T$W.getFloat32(),this.tfArr.push(T$$);}var T$u=T$W.getUint16(),T$o=0;for(T$n=0;T$n<T$u;T$n++){for((T$e=new T$Fn()).name=T$W.readUTFString(),T$o=T$W.getUint16(),T$C=0;T$C<T$o;T$C++)T$e.bones.push(T$W.getInt16());T$e.target=T$W.readUTFString(),T$e.positionMode=T$W.readUTFString(),T$e.spacingMode=T$W.readUTFString(),T$e.rotateMode=T$W.readUTFString(),T$e.offsetRotation=T$W.getFloat32(),T$e.position=T$W.getFloat32(),T$e.spacing=T$W.getFloat32(),T$e.rotateMix=T$W.getFloat32(),T$e.translateMix=T$W.getFloat32(),this.pathArr.push(T$e);}var T$Q,T$I,T$Z,T$L,T$h,T$v=0,T$R=0,T$z=0,T$U=NaN,T$K=0,T$D=T$W.getInt16();for(T$n=0;T$n<T$D;T$n++){var T$nn=T$W.getUint8(),T$Cn={};this.deformAniArr.push(T$Cn);for(var T$_n=0;T$_n<T$nn;T$_n++)for((T$Q=new T$Xn()).skinName=T$W.getUTFString(),T$Cn[T$Q.skinName]=T$Q,T$v=T$W.getInt16(),T$C=0;T$C<T$v;T$C++)for(T$I=new T$$n(),T$Q.deformSlotDataList.push(T$I),T$R=T$W.getInt16(),T$_=0;T$_<T$R;T$_++)for(T$Z=new T$in(),T$I.deformSlotDisplayList.push(T$Z),T$Z.slotIndex=T$W.getInt16(),T$Z.attachment=T$W.getUTFString(),T$z=T$W.getInt16(),T$E=0;T$E<T$z;T$E++)for(1==T$W.getByte()?T$Z.tweenKeyList.push(!0):T$Z.tweenKeyList.push(!1),T$U=T$W.getFloat32(),T$Z.timeList.push(T$U),T$L=[],T$Z.vectices.push(T$L),T$K=T$W.getInt16(),T$y=0;T$y<T$K;T$y++)T$L.push(T$W.getFloat32());}var T$En,T$yn,T$pn=T$W.getInt16(),T$cn=0,T$ln=0;for(T$n=0;T$n<T$pn;T$n++){for(T$cn=T$W.getInt16(),T$h=[],T$C=0;T$C<T$cn;T$C++){for((T$En=new T$fn()).time=T$W.getFloat32(),T$ln=T$W.getInt16(),T$_=0;T$_<T$ln;T$_++)T$En.drawOrder.push(T$W.getInt16());T$h.push(T$En);}this.drawOrderAniArr.push(T$h);}var T$Wn,T$qn=T$W.getInt16(),T$Jn=0;for(T$n=0;T$n<T$qn;T$n++){for(T$Jn=T$W.getInt16(),T$yn=[],T$C=0;T$C<T$Jn;T$C++)(T$Wn=new T$en()).name=T$W.getUTFString(),T$Wn.intValue=T$W.getInt32(),T$Wn.floatValue=T$W.getFloat32(),T$Wn.stringValue=T$W.getUTFString(),T$Wn.time=T$W.getFloat32(),T$yn.push(T$Wn);this.eventAniArr.push(T$yn);}var T$jn=T$W.getInt16();if(0<T$jn)for(this.attachmentNames=[],T$n=0;T$n<T$jn;T$n++)this.attachmentNames.push(T$W.getUTFString());var T$Pn,T$xn,T$bn=T$W.getInt16();for(T$n=0;T$n<T$bn;T$n++)(T$Pn=new T$Hn()).name=T$W.readUTFString(),T$Pn.parent=T$W.readUTFString(),T$Pn.attachmentName=T$W.readUTFString(),T$Pn.srcDisplayIndex=T$Pn.displayIndex=T$W.getInt16(),(T$Pn.templet=this).boneSlotDic[T$Pn.name]=T$Pn,null==(T$xn=this.bindBoneBoneSlotDic[T$Pn.parent])&&(this.bindBoneBoneSlotDic[T$Pn.parent]=T$xn=[]),T$xn.push(T$Pn),this.boneSlotArray.push(T$Pn);var T$rn,T$mn,T$dn,T$an=T$W.readUTFString().split("\n"),T$On=0,T$An=T$W.getUint8(),T$kn=0,T$tn=0,T$Tn=0,T$Yn=0,T$sn=0,T$Nn=0,T$Sn=0;for(T$n=0;T$n<T$An;T$n++){for((T$rn=new T$un()).name=T$an[T$On++],T$kn=T$W.getUint8(),T$C=0;T$C<T$kn;T$C++){for((T$mn=new T$Qn()).name=T$an[T$On++],T$Pn=this.boneSlotDic[T$mn.name],T$tn=T$W.getUint8(),T$_=0;T$_<T$tn;T$_++){if(T$dn=new T$on(),this.skinSlotDisplayDataArr.push(T$dn),T$dn.name=T$an[T$On++],T$dn.attachmentName=T$an[T$On++],T$dn.transform=new T$Zn(),T$dn.transform.scX=T$W.getFloat32(),T$dn.transform.skX=T$W.getFloat32(),T$dn.transform.skY=T$W.getFloat32(),T$dn.transform.scY=T$W.getFloat32(),T$dn.transform.x=T$W.getFloat32(),T$dn.transform.y=T$W.getFloat32(),T$mn.displayArr.push(T$dn),T$dn.width=T$W.getFloat32(),T$dn.height=T$W.getFloat32(),T$dn.type=T$W.getUint8(),T$dn.verLen=T$W.getUint16(),0<(T$M=T$W.getUint16()))for(T$dn.bones=[],T$E=0;T$E<T$M;T$E++){var T$Mn=T$W.getUint16();T$dn.bones.push(T$Mn);}if(0<(T$Tn=T$W.getUint16()))for(T$dn.uvs=[],T$E=0;T$E<T$Tn;T$E++)T$dn.uvs.push(T$W.getFloat32());if(0<(T$Yn=T$W.getUint16()))for(T$dn.weights=[],T$E=0;T$E<T$Yn;T$E++)T$dn.weights.push(T$W.getFloat32());if(0<(T$sn=T$W.getUint16()))for(T$dn.triangles=[],T$E=0;T$E<T$sn;T$E++)T$dn.triangles.push(T$W.getUint16());if(0<(T$Nn=T$W.getUint16()))for(T$dn.vertices=[],T$E=0;T$E<T$Nn;T$E++)T$dn.vertices.push(T$W.getFloat32());if(0<(T$Sn=T$W.getUint16()))for(T$dn.lengths=[],T$E=0;T$E<T$Sn;T$E++)T$dn.lengths.push(T$W.getFloat32());}T$rn.slotArr.push(T$mn);}this.skinDic[T$rn.name]=T$rn,this.skinDataArray.push(T$rn);}1==T$W.getUint8()?(this.yReverseMatrix=new T$Bn(1,0,0,-1,0,0),T$S&&T$S.setTempMatrix(this.yReverseMatrix)):T$S&&T$S.setTempMatrix(new T$Bn()),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this);},T$n.getTexture=function(T$n){var T$C=this.subTextureDic[T$n];return T$C||(T$C=this.subTextureDic[T$n.substr(0,T$n.length-1)]),null==T$C?this._mainTexture:T$C;},T$n.showSkinByIndex=function(T$n,T$C,T$_){if(void 0===T$_&&(T$_=!0),T$C<0&&T$C>=this.skinDataArray.length)return!1;var T$E,T$y,T$p=0,T$c=0,T$l=this.skinDataArray[T$C];if(T$l){for(T$p=0,T$c=T$l.slotArr.length;T$p<T$c;T$p++)(T$y=T$l.slotArr[T$p])&&(T$E=T$n[T$y.name])&&(T$E.showSlotData(T$y,T$_),T$_&&"undefined"!=T$E.attachmentName&&"null"!=T$E.attachmentName?T$E.showDisplayByName(T$E.attachmentName):T$E.showDisplayByIndex(T$E.displayIndex));return!0;}return!1;},T$n.getSkinIndexByName=function(T$n){for(var T$C=0,T$_=this.skinDataArray.length;T$C<T$_;T$C++)if(this.skinDataArray[T$C].name==T$n)return T$C;return-1;},T$n.getGrahicsDataWithCache=function(T$n,T$C){return this._graphicsCache[T$n][T$C];},T$n.setGrahicsDataWithCache=function(T$n,T$C,T$_){this._graphicsCache[T$n][T$C]=T$_;},T$n.destroy=function(){var T$n;for(var T$C in this._isDestroyed=!0,this.subTextureDic)(T$n=this.subTextureDic[T$C])&&T$n.destroy();for(T$C in this._textureDic)(T$n=this._textureDic[T$C])&&T$n.destroy();for(var T$_=0,T$E=this.skinSlotDisplayDataArr.length;T$_<T$E;T$_++)this.skinSlotDisplayDataArr[T$_].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete T$y.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this);},T$n.getAniNameByIndex=function(T$n){var T$C=this.getAnimation(T$n);return T$C?T$C.name:null;},T$p(0,T$n,"rate",function(){return this._rate;},function(T$n){this._rate=T$n;}),T$y.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",T$y.TEMPLET_DICTIONARY=null,T$y;}(T$X);}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$n,T$C){"use strict";for(var T$_ in Object.defineProperty(T$C,"__esModule",{value:!0}),Laya){var T$E=Laya[T$_];T$E&&T$E.__isclass&&(T$C[T$_]=T$E);}});