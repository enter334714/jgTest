var ba=wx['$b'];(function(window,document,a){var b=a['un'],c=a['uns'],d=a['static'],e=a['class'],f=a['getset'],g=a['__newvec'],h=laya['utils']['Browser'],i=laya['events']['Event'],j=laya['events']['EventDispatcher'],k=laya['resource']['HTMLImage'],l=laya['utils']['Handler'],m=laya['display']['Input'],n=laya['net']['Loader'],o=laya['maths']['Matrix'],p=laya['renders']['Render'],q=laya['utils']['RunDriver'],r=laya['media']['Sound'],s=laya['media']['SoundChannel'],t=laya['media']['SoundManager'],u=laya['display']['Stage'],v=laya['net']['URL'],w=laya['utils']['Utils'],x=function(){function E(){}return e(E,ba[0x29e]),E['getJson']=function(F){return JSON['parse'](F);},E['init']=function(F,G){F===void 0x0&&(F=![]),G===void 0x0&&(G=![]);if(E['_inited'])return;E['window']=window;if(E['window']['navigator']['userAgent']['indexOf'](ba[0x29f])<0x0)return;E['_inited']=!![],E['isZiYu']=G,E['isPosMsgYu']=F,E['EnvConfig']={},!E['isZiYu']&&(B['setNativeFileDir'](ba[0x2a0]),B['existDir'](B['fileNativeDir'],l['create'](E,E['onMkdirCallBack']))),E['window']['focus']=function(){},a[ba[0x2a1]]=function(){},E['window']['logtime']=function(H){},E['window']['alertTimeLog']=function(H){},E['window']['resetShareInfo']=function(){},E['window']['CanvasRenderingContext2D']=function(){},E['window']['CanvasRenderingContext2D']['prototype']=E['window']['wx']['createCanvas']()['getContext'](ba[0x2a2])['__proto__'],E['window']['document']['body']['appendChild']=function(){},E['EnvConfig']['pixelRatioInt']=0x0,q['getPixelRatio']=E['pixelRatio'],E['_preCreateElement']=h['createElement'],h[ba[0x2a3]]=E['createElement'],q['createShaderCondition']=E['createShaderCondition'],w['parseXMLFromString']=E['parseXMLFromString'],m[ba[0x2a4]]=z[ba[0x2a5]],E['EnvConfig']['load']=n['prototype']['load'],n['prototype']['load']=A['prototype']['load'],E['isZiYu']&&F&&wx['onMessage'](function(H){H[ba[0x2a6]]&&(B['ziyuFileData'][H['url']]=H['data']);});},E['onMkdirCallBack']=function(F,G){if(!F)B['filesListObj']=JSON['parse'](G['data']);},E['pixelRatio']=function(){if(!E['EnvConfig']['pixelRatioInt'])try{var F=wx['getSystemInfoSync']();return E['EnvConfig']['pixelRatioInt']=F['pixelRatio'],F=F,F['pixelRatio'];}catch(G){}return E['EnvConfig']['pixelRatioInt'];},E['createElement']=function(F){if(F==ba[0x2a7]){var G;return E['idx']==0x1?E['isZiYu']?(G=sharedCanvas,G['style']={}):G=window['canvas']:G=window['wx']['createCanvas'](),E['idx']++,G;}else{if(F==ba[0x2a8]||F==ba[0x2a9])return E['onCreateInput'](F);else{if(F==ba[0x2aa]){var H=E['_preCreateElement'](F);return H['contains']=function(I){return null;},H['removeChild']=function(I){},H;}else return E['_preCreateElement'](F);}}},E['onCreateInput']=function(F){var G=E['_preCreateElement'](F);return G['focus']=z['wxinputFocus'],G['blur']=z['wxinputblur'],G['style']={},G['value']=0x0,G['parentElement']={},G['placeholder']={},G['type']={},G['setColor']=function(H){},G['setType']=function(H){},G['setFontFace']=function(H){},G['addEventListener']=function(H){},G['contains']=function(H){return null;},G['removeChild']=function(H){},G;},E['createShaderCondition']=function(F){var G=this,H=function(){var I=F;return G[F['replace'](ba[0x2ab],'')];};return H;},E['EnvConfig']=null,E['window']=null,E['_preCreateElement']=null,E['_inited']=![],E['wxRequest']=null,E['B_HGF']=null,E['version']=ba[0x2ac],E['isZiYu']=![],E['isPosMsgYu']=![],E['parseXMLFromString']=function(F){var G,H;F=F['replace'](/>\s+</g,ba[0x2ad]);try{G=new window['Parser']['DOMParser']()['parseFromString'](F,ba[0x2ae]);}catch(I){throw ba[0x2af];}return G;},E['idx']=0x1,E;}(),y=function(){function E(){}e(E,ba[0x2b0]);var F=E['prototype'];return F['_loadImage']=function(G){var H=this,I=![];G['indexOf'](ba[0x2b1])==-0x1&&(I=!![],G=v['formatURL'](G));if(!B['getFileInfo'](G)){if(G['indexOf'](ba[0x2b2])!=-0x1||G['indexOf'](ba[0x2b3])!=-0x1)B['downImg'](G,new l(E,E['onDownImgCallBack'],[G,H]),G);else E['onCreateImage'](G,H,!![]);}else E['onCreateImage'](G,H,!I);},E['onDownImgCallBack']=function(G,H,I){if(!I)E['onCreateImage'](G,H);else H['onError'](null);},E['onCreateImage']=function(G,H,I){I===void 0x0&&(I=![]);var J;if(!I){var K=B['getFileInfo'](G),L=K['md5'];J=B['getFileNativePath'](L);}else J=G;if(H['imgCache']==null)H['imgCache']={};var M;function N(){M['onload']=null,M['onerror']=null,delete H['imgCache'][G];};var O=function(){N(),H['onLoaded'](M);},P=function(){N(),H['event'](ba[0x2b4],ba[0x2b5]);};H['_type']==ba[0x2b6]?(M=new h['window']['Image'](),M['crossOrigin']='',M['onload']=O,M['onerror']=P,M['src']=J,H['imgCache'][G]=M):new k['create'](J,{'onload':O,'onerror':P,'onCreate':function(Q){M=Q,H['imgCache'][G]=Q;}});},E;}(),z=function(){function E(){}return e(E,ba[0x2b7]),E['_createInputElement']=function(){m[ba[0x2b8]](m[ba[0x2b9]]=h['createElement'](ba[0x2ba])),m[ba[0x2bb]](m[ba[0x2bc]]=h['createElement'](ba[0x2bd])),m[ba[0x2be]]=h['createElement'](ba[0x2bf]),m[ba[0x2c0]]['style']['position']=ba[0x2c1],m[ba[0x2c2]]['style']['zIndex']=0x186a0,h['container']['appendChild'](m[ba[0x2c3]]),m[ba[0x2c4]]['setPos']=function(F,G){m[ba[0x2c5]]['style']['left']=F+ba[0x2c6],m[ba[0x2c7]]['style']['top']=G+ba[0x2c8];},a['stage']['on'](ba[0x2c9],null,E['_onStageResize']),wx['onWindowResize']&&wx['onWindowResize'](function(F){window['dispatchEvent']&&window['dispatchEvent'](ba[0x2ca]);}),t['_soundClass']=C,t['_musicClass']=C;},E['_onStageResize']=function(){var F=a['stage']['_canvasTransform']['identity']();F['scale'](h['width']/p['canvas']['width']/q['getPixelRatio'](),h['height']/p['canvas']['height']/q['getPixelRatio']());},E['wxinputFocus']=function(F){var G=m[ba[0x2cb]]['target'];if(G&&!G['editable'])return;x['window']['wx']['offKeyboardConfirm'](),x['window']['wx']['offKeyboardInput'](),x['window']['wx']['showKeyboard']({'defaultValue':G['text'],'maxLength':G['maxChars'],'multiple':G['multiline'],'confirmHold':!![],'confirmType':ba[0x2cc],'success':function(H){},'fail':function(H){}}),x['window']['wx']['onKeyboardConfirm'](function(H){var I=H?H['value']:'';G['text']=I,G['event'](ba[0x2cd]),laya['wx']['mini']['MiniInput']['inputEnter']();}),x['window']['wx']['onKeyboardInput'](function(H){var I=H?H['value']:'';if(!G['multiline']){if(I['indexOf']('\x0a')!=-0x1){laya['wx']['mini']['MiniInput']['inputEnter']();return;}}G['text']=I,G['event'](ba[0x2ce]);});},E['inputEnter']=function(){m[ba[0x2cf]]['target']['focus']=![];},E['wxinputblur']=function(){E['hideKeyboard']();},E['hideKeyboard']=function(){x['window']['wx']['offKeyboardConfirm'](),x['window']['wx']['offKeyboardInput'](),x['window']['wx']['hideKeyboard']({'success':function(F){console['log'](ba[0x2d0]);},'fail':function(F){console['log'](ba[0x2d1]+(F?F['errMsg']:''));}});},E;}(),A=function(){function E(){}e(E,ba[0x2d2]);var F=E['prototype'];return F['load']=function(G,H,I,J,K){I===void 0x0&&(I=!![]),K===void 0x0&&(K=![]);var L=this;L['_url']=G;if(G['indexOf'](ba[0x2d3])===0x0)L['_type']=H=ba[0x2d4];else L['_type']=H||(H=L['getTypeFromUrl'](G));L['_cache']=I,L['_data']=null;var M=ba[0x2d5];if(G['indexOf'](ba[0x2d6])!=-0x1)M=ba[0x2d7];else H==ba[0x2d8]&&(M='');;var N=w['getFileExtension'](G);if(E['_fileTypeArr']['indexOf'](N)!=-0x1)x['EnvConfig']['load']['call'](this,G,H,I,J,K);else{if(!B['getFileInfo'](G)){if(G['indexOf'](ba[0x2d9])!=-0x1){if(x['isZiYu']){var O=B['ziyuFileData'][G];L['onLoaded'](O);return;}else{cosnole['log'](ba[0x2da]),B['read'](G,M,new l(E,E['onReadNativeCallBack'],[M,G,H,I,J,K,L]));return;}}if(v['rootPath']=='')var P=G;else P=G['split'](v['rootPath'])[0x0];G['indexOf'](ba[0x2db])!=-0x1||G['indexOf'](ba[0x2dc])!=-0x1?x['EnvConfig']['load']['call'](L,G,H,I,J,K):B['readFile'](P,M,new l(E,E['onReadNativeCallBack'],[M,G,H,I,J,K,L]),G);}else x['EnvConfig']['load']['call'](this,G,H,I,J,K);}},F['resMgrLoad']=function(G,H,I,J,K,L,M){I===void 0x0&&(I=0x0),J===void 0x0&&(J=![]),K===void 0x0&&(K=![]),L===void 0x0&&(L=0x0),M===void 0x0&&(M=0x3),G['indexOf'](ba[0x2dd])!=-0x1&&console['log'](ba[0x2de],G),x['EnvConfig']['resMgrLoad'](G,(N,O,P)=>{E['prototype']['resMgrLoadCallBack'](N,O,P,H);},I,J,K,L,M);},F['resMgrLoadCallBack']=function(G,H,I,J){console['log'](ba[0x2df],G,I,B['fileNativeDir']+ba[0x2e0]+B['fileListName']),J(G,H,I);},F['clearRes']=function(G,H){H===void 0x0&&(H=![]);var I=this;I['clearRes'](G,H);var J=B['getFileInfo'](G);if(J&&(G['indexOf'](ba[0x2e1])!=-0x1||G['indexOf'](ba[0x2e2])!=-0x1)){var K=J['md5'],L=B['getFileNativePath'](K);B['remove'](L);}},E['onReadNativeCallBack']=function(G,H,I,J,K,L,M,N,O){J===void 0x0&&(J=!![]),L===void 0x0&&(L=![]),N===void 0x0&&(N=0x0);if(!N){var P;if(I==ba[0x2e3]||I==ba[0x2e4])P=x['getJson'](O['data']);else I==ba[0x2e5]?P=w['parseXMLFromString'](O['data']):P=O['data'];M['onLoaded'](P),!x['isZiYu']&&x['isPosMsgYu']&&I!=ba[0x2e6]&&wx['postMessage']({'url':H,'data':P,'isLoad':!![]});}else N==0x1&&x['EnvConfig']['load']['call'](M,H,I,J,K,L);},d(E,[ba[0x2e7],function(){return this['_fileTypeArr']=[ba[0x2e8],ba[0x2e9],ba[0x2ea],ba[0x2eb],ba[0x2ec]];}]),E;}(),B=function(E){function F(){F['__super']['call'](this);;}return e(F,ba[0x2ed],E),F['isLoadFile']=function(G){return F['_fileTypeArr']['indexOf'](G)!=-0x1?!![]:![];},F['getFileInfo']=function(G){var H=G['split'](ba[0x2ee])[0x0],I=F['filesListObj'][H];if(I==null)return null;else return I;return null;},F['onFileUpdate']=function(G,H){var I=G['split'](ba[0x2ef]),J=I[I['length']-0x1],K=F['getFileInfo'](H);if(K==null)F['onSaveFile'](H,J);else{if(K['readyUrl']!=H)F['remove'](J,H);}},F['exits']=function(G,H){var I=F['getFileNativePath'](G);F['fs']['getFileInfo']({'filePath':I,'success':function(J){H!=null&&H['runWith']([0x0,J]);},'fail':function(J){H!=null&&H['runWith']([0x1,J]);}});},F['read']=function(G,H,I,J){H===void 0x0&&(H=ba[0x2f0]),J===void 0x0&&(J='');var K;J!=''?K=F['getFileNativePath'](G):K=G,F['fs']['readFile']({'filePath':K,'encoding':H,'success':function(L){I!=null&&I['runWith']([0x0,L]);},'fail':function(L){if(L&&J!='')F['down'](J,H,I,J);else I!=null&&I['runWith']([0x1]);}});},F['readNativeFile']=function(G,H){F['fs']['readFile']({'filePath':G,'encoding':'','success':function(I){H!=null&&H['runWith']([0x0]);},'fail':function(I){H!=null&&H['runWith']([0x1]);}});},F['down']=function(G,H,I,J){H===void 0x0&&(H=ba[0x2f1]),J===void 0x0&&(J='');var K=F['getFileNativePath'](J),L=F['wxdown']({'url':G,'filePath':K,'success':function(M){if(M['statusCode']===0xc8)F['readFile'](M['filePath'],H,I,J);},'fail':function(M){I!=null&&I['runWith']([0x1,M]);}});L['onProgressUpdate'](function(M){I!=null&&I['runWith']([0x2,M['progress']]);});},F['readFile']=function(G,H,I,J){H===void 0x0&&(H=ba[0x2f2]),J===void 0x0&&(J=''),F['fs']['readFile']({'filePath':G,'encoding':H,'success':function(K){if(G['indexOf'](ba[0x2f3])!=-0x1||G['indexOf'](ba[0x2f4])!=-0x1)F['onFileUpdate'](G,J);I!=null&&I['runWith']([0x0,K]);},'fail':function(K){if(K)I!=null&&I['runWith']([0x1,K]);}});},F['downImg']=function(G,H,I){I===void 0x0&&(I='');var J=F['wxdown']({'url':G,'success':function(K){K['statusCode']===0xc8&&F['copyFile'](K['tempFilePath'],I,H);},'fail':function(K){H!=null&&H['runWith']([0x1,K]);}});},F['copyFile']=function(G,H,I){var J=G['split'](ba[0x2f5]),K=J[J['length']-0x1],L=H['split'](ba[0x2f6])[0x0],M=F['getFileInfo'](H),N=F['getFileNativePath'](K);F['fs']['copyFile']({'srcPath':G,'destPath':N,'success':function(O){if(!M)F['onSaveFile'](H,K),I!=null&&I['runWith']([0x0]);else{if(M['readyUrl']!=H)F['remove'](K,H,I);}},'fail':function(O){I!=null&&I['runWith']([0x1,O]);}});},F['getFileNativePath']=function(G){return laya['wx']['mini']['MiniFileMgr']['fileNativeDir']+ba[0x2f7]+G;},F['remove']=function(G,H,I){H===void 0x0&&(H='');var J=F['getFileInfo'](H),K=F['getFileNativePath'](J['md5']);a['loader']['clearRes'](J['readyUrl']),F['fs']['unlink']({'filePath':K,'success':function(L){if(H!='')F['onSaveFile'](H,G);I!=null&&I['runWith']([0x0]);},'fail':function(L){}});},F['onSaveFile']=function(G,H){var I=G['split'](ba[0x2f8])[0x0];F['filesListObj'][I]={'md5':H,'readyUrl':G},F['fs']['writeFile']({'filePath':F['fileNativeDir']+ba[0x2f9]+F['fileListName'],'encoding':ba[0x2fa],'data':JSON['stringify'](F['filesListObj']),'success':function(J){console['log'](ba[0x2fb],J);},'fail':function(J){console['log'](ba[0x2fc],J);}});},F['existDir']=function(G,H){F['fs']['mkdir']({'dirPath':G,'success':function(I){H!=null&&H['runWith']([0x0,{'data':JSON['stringify']({})}]);},'fail':function(I){if(I['errMsg']['indexOf'](ba[0x2fd])!=-0x1)F['readSync'](F['fileListName'],ba[0x2fe],H);else H!=null&&H['runWith']([0x1,I]);}});},F['readSync']=function(G,H,I,J){H===void 0x0&&(H=ba[0x2ff]),J===void 0x0&&(J='');var K=F['getFileNativePath'](G),L;try{L=F['fs']['readFileSync'](K),I!=null&&I['runWith']([0x0,{'data':L}]);}catch(M){I!=null&&I['runWith']([0x1]);}},F['readCache']=function(){},F['writeCache']=function(G){var H=readyUrl['split'](ba[0x300])[0x0];F['filesListObj'][H]={'md5':md5Name,'readyUrl':readyUrl},F['fs']['writeFile']({'filePath':F['fileNativeDir']+ba[0x301]+F['fileListName'],'encoding':ba[0x302],'data':JSON['stringify'](F['filesListObj']),'success':function(I){},'fail':function(I){}});},F['setNativeFileDir']=function(G){F['fileNativeDir']=wx['env']['USER_DATA_PATH']+G;},F['filesListObj']={},F['fileNativeDir']=null,F['fileListName']=ba[0x303],F['ziyuFileData']={},d(F,[ba[0x304],function(){return this['_fileTypeArr']=[ba[0x305],ba[0x306],ba[0x307],ba[0x308],ba[0x309],ba[0x30a],ba[0x30b],ba[0x30c],ba[0x30d],ba[0x30e],ba[0x30f],ba[0x310],ba[0x311],ba[0x312],ba[0x313],ba[0x314]];},ba[0x315],function(){return this['fs']=wx['getFileSystemManager']();},ba[0x316],function(){return this['wxdown']=wx['downloadFile'];}]),F;}(j),C=function(E){function F(){this['_sound']=null,this['url']=null,this['loaded']=![],F['__super']['call'](this),this['_sound']=F['_createSound']();}e(F,ba[0x317],E);var G=F['prototype'];return G['load']=function(H){var I=this;H=v['formatURL'](H),this['url']=H;if(F['_audioCache'][H]){this['event'](ba[0x318]);return;}function J(){if(F['_null']!=undefined)I['_sound']['onCanplay'](F['_null']),I['_sound']['onError'](F['_null']);else try{I['_sound']['onCanplay'](null),I['_sound']['onError'](null),F['_null']=null;}catch(O){console['warn'](ba[0x319]+O),I['_sound']['onCanplay'](M),I['_sound']['onError'](M),F['_null']=M;}}function K(){J(),N['loaded']=!![],N['event'](ba[0x31a]),F['_audioCache'][N['url']]=N;}function L(O){console['error'](ba[0x31b]+O['errCode']+ba[0x31c]+O['errMsg']),J(),N['event'](ba[0x31d]);}function M(){}this['_sound']['onCanplay'](K),this['_sound']['onError'](L),this['_sound']['src']=H;var N=this;},G['play']=function(H,I){H===void 0x0&&(H=0x0),I===void 0x0&&(I=0x0);var J;if(this['url']==t['_tMusic']){if(!F['_musicAudio'])F['_musicAudio']=F['_createSound']();J=F['_musicAudio'];}else J=F['_createSound']();J['src']=this['url'];var K=new D(J);return K['url']=this['url'],K['loops']=I,K['startTime']=H,K['play'](),t['addChannel'](K),K;},G['dispose']=function(){var H=F['_audioCache'][this['url']];H&&(H['src']='',delete F['_audioCache'][this['url']]);},f(0x0,G,ba[0x31e],function(){return this['_sound']['duration'];}),F['_createSound']=function(){return F['_id']++,x['window']['wx']['createInnerAudioContext']();},F['_musicAudio']=null,F['_id']=0x0,F['_audioCache']={},F['_null']=undefined,F;}(j),D=function(E){function F(H){this['_audio']=null,this['_onEnd']=null,F['__super']['call'](this),this['_audio']=H,this['_onEnd']=w['bind'](this['__onEnd'],this),H['onEnded'](this['_onEnd']);}e(F,ba[0x31f],E);var G=F['prototype'];return G['__onEnd']=function(){if(this['loops']==0x1){this['completeHandler']&&(a['timer']['once'](0xa,this,this['__runComplete'],[this['completeHandler']],![]),this['completeHandler']=null);this['stop'](),this['event'](ba[0x320]);return;}this['loops']>0x0&&this['loops']--,this['startTime']=0x0,this['play']();},G['__onNull']=function(){},G['play']=function(){this['isStopped']=![],t['addChannel'](this);if(this['_audio'])this['_audio']['play']();},G['stop']=function(){this['isStopped']=!![],t['removeChannel'](this),this['completeHandler']=null;if(!this['_audio'])return;this['_audio']['stop']();if(F['_null']!=undefined)this['_audio']['onEnded'](F['_null']);else try{this['_audio']['onEnded'](null),F['_null']=null;}catch(H){console['warn'](ba[0x321]+H),this['_audio']['onEnded'](w['bind'](this['__onNull'],this)),F['_null']=w['bind'](this['__onNull'],this);}this['_audio']=null;},G['pause']=function(){this['isStopped']=!![],this['_audio']['pause']();},G['resume']=function(){if(!this['_audio'])return;this['isStopped']=![],t['addChannel'](this),this['_audio']['play']();},f(0x0,G,ba[0x322],function(){if(!this['_audio'])return 0x0;return this['_audio']['currentTime'];}),f(0x0,G,ba[0x323],function(){if(!this['_audio'])return 0x0;return this['_audio']['duration'];}),f(0x0,G,ba[0x324],function(){return 0x1;},function(H){}),F['_null']=undefined,F;}(s);}(window,document,Laya));typeof define===ba[0x325]&&define['amd']&&define(ba[0x326],[ba[0x327],ba[0x328]],function(require,exports){'use strict';Object['defineProperty'](exports,ba[0x329],{'value':!![]});for(var a in Laya){var b=Laya[a];b&&b['__isclass']&&(exports[a]=b);}});