var Laya=window.Laya=function(H$j,H$a){var H$k={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(H$a,H$b){return 1==arguments.length?H$k.__presubstr.call(this,H$a):H$k.__presubstr.call(this,H$a,0<H$b?H$b:this.length+H$b)},__init:function(H$a){H$a.forEach(function(H$a){H$a.__init$&&H$a.__init$()})},__isClass:function(H$a){return H$a&&(H$a.__isclass||H$a==Object||H$a==String||H$a==Array)},__newvec:function(H$a,H$b){var H$c=[];H$c.length=H$a;for(var H$d=0;H$d<H$a;H$d++)H$c[H$d]=H$b;return H$c},__extend:function(H$a,H$b){for(var H$c in H$b)if(H$b.hasOwnProperty(H$c)){var H$d=Object.getOwnPropertyDescriptor(H$b,H$c),H$e=H$d.get,H$f=H$d.set;H$e||H$f?H$e&&H$f?Object.defineProperty(H$a,H$c,H$d):(H$e&&Object.defineProperty(H$a,H$c,H$e),H$f&&Object.defineProperty(H$a,H$c,H$f)):H$a[H$c]=H$b[H$c]}function H$g(){H$k.un(this,"constructor",H$a)}H$g.prototype=H$b.prototype,H$a.prototype=new H$g,H$k.un(H$a.prototype,"__imps",H$k.__copy({},H$b.prototype.__imps))},__copy:function(H$a,H$b){if(!H$b)return null;for(var H$c in H$a=H$a||{},H$b)H$a[H$c]=H$b[H$c];return H$a},__package:function(H$a,H$b){if(!H$k.__packages[H$a]){H$k.__packages[H$a]=!0;var H$c=H$j,H$d=H$a.split(".");if(1<H$d.length)for(var H$e=0,H$f=H$d.length-1;H$e<H$f;H$e++){var H$g=H$c[H$d[H$e]];H$c=H$g||(H$c[H$d[H$e]]={})}H$c[H$d[H$d.length-1]]||(H$c[H$d[H$d.length-1]]=H$b||{})}},__hasOwnProperty:function(H$a,H$b){return H$b=H$b||this,Object.hasOwnProperty.call(H$b,H$a)||function H$a(H$b,H$c){if(Object.hasOwnProperty.call(H$c.prototype,H$b))return!0;var H$d=H$c.prototype.__super;return null==H$d?null:H$a(H$b,H$d)}(H$a,H$b.__class)},__typeof:function(H$a,H$b){if(!H$a||!H$b)return!1;if(H$b===String)return"string"==typeof H$a;if(H$b===Number)return"number"==typeof H$a;if(H$b.__interface__)H$b=H$b.__interface__;else if("string"!=typeof H$b)return H$a instanceof H$b;return H$a.__imps&&H$a.__imps[H$b]||H$a.__class==H$b},__as:function(H$a,H$b){return this.__typeof(H$a,H$b)?H$a:null},__int:function(H$a){return H$a?parseInt(H$a):0},interface:function(H$a,H$b){H$k.__package(H$a,{});var H$c=H$k.__internals,H$d=H$c[H$a]=H$c[H$a]||{self:H$a};if(H$b){var H$e=H$b.split(",");H$d.extend=[];for(var H$f=0;H$f<H$e.length;H$f++){var H$g=H$e[H$f];H$c[H$g]=H$c[H$g]||{self:H$g},H$d.extend.push(H$c[H$g])}}var H$h=H$j,H$i=H$a.split(".");for(H$f=0;H$f<H$i.length-1;H$f++)H$h=H$h[H$i[H$f]];H$h[H$i[H$i.length-1]]={__interface__:H$a}},class:function(H$a,H$b,H$c,H$d){if(H$c&&H$k.__extend(H$a,H$c),H$b)if(H$k.__package(H$b,H$a),H$k.__classmap[H$b]=H$a,0<H$b.indexOf(".")){if(0==H$b.indexOf("laya.")){var H$e=H$b.split(".");H$d=H$d||H$e[H$e.length-1],H$k[H$d]&&console.log("Warning!,this class["+H$d+"] already exist:",H$k[H$d]),H$k[H$d]=H$a}}else"Main"==H$b?H$j.Main=H$a:"MainWX"==H$b?H$j.MainWX=H$a:(H$k[H$b]&&console.log("Error!,this class["+H$b+"] already exist:",H$k[H$b]),H$k[H$b]=H$a);var H$f=H$k.un,H$g=H$a.prototype;H$f(H$g,"hasOwnProperty",H$k.__hasOwnProperty),H$f(H$g,"__class",H$a),H$f(H$g,"__super",H$c),H$f(H$g,"__className",H$b),H$f(H$a,"__super",H$c),H$f(H$a,"__className",H$b),H$f(H$a,"__isclass",!0),H$f(H$a,"super",function(H$a){this.__super.call(H$a)})},imps:function(H$a,H$b){if(!H$b)return null;var H$e=H$a.__imps||H$k.un(H$a,"__imps",{});function H$f(H$a){var H$b,H$c;if((H$b=H$k.__internals[H$a])&&(H$e[H$a]=!0,H$c=H$b.extend))for(var H$d=0;H$d<H$c.length;H$d++)H$f(H$c[H$d].self)}for(var H$c in H$b)H$f(H$c)},superSet:function(H$a,H$b,H$c,H$d){var H$e=H$a.prototype["_$set_"+H$c];H$e&&H$e.call(H$b,H$d)},superGet:function(H$a,H$b,H$c){var H$d=H$a.prototype["_$get_"+H$c];return H$d?H$d.call(H$b):null},getset:function(H$a,H$b,H$c,H$d,H$e){H$a?(H$d&&(H$b["_$GET_"+H$c]=H$d),H$e&&(H$b["_$SET_"+H$c]=H$e)):(H$d&&H$k.un(H$b,"_$get_"+H$c,H$d),H$e&&H$k.un(H$b,"_$set_"+H$c,H$e)),H$d&&H$e?Object.defineProperty(H$b,H$c,{get:H$d,set:H$e,enumerable:!1,configurable:!0}):(H$d&&Object.defineProperty(H$b,H$c,{get:H$d,enumerable:!1,configurable:!0}),H$e&&Object.defineProperty(H$b,H$c,{set:H$e,enumerable:!1,configurable:!0}))},static:function(H$c,H$d){for(var H$e=0,H$a=H$d.length;H$e<H$a;H$e+=2)if("length"==H$d[H$e])H$c.length=H$d[H$e+1].call(H$c);else{function H$b(){var H$b=H$d[H$e],H$a=H$d[H$e+1];Object.defineProperty(H$c,H$b,{get:function(){return delete this[H$b],this[H$b]=H$a.call(this)},set:function(H$a){delete this[H$b],this[H$b]=H$a},enumerable:!0,configurable:!0})}H$b()}},un:function(H$a,H$b,H$c){return H$c||(H$c=H$a[H$b]),H$k.__propun.value=H$c,Object.defineProperty(H$a,H$b,H$k.__propun),H$c},uns:function(H$b,H$a){H$a.forEach(function(H$a){H$k.un(H$b,H$a)})}};return H$j.console=H$j.console||{log:function(){}},H$j.trace=H$j.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),H$k}(window,document);!function(H$a,H$b,H$c){H$c.un,H$c.uns,H$c.static,H$c.class,H$c.getset,H$c.__newvec}(window,document,Laya),function(H$g,H$b,H$x){H$x.un,H$x.uns;var H$i=H$x.static,H$k=H$x.class,H$o=H$x.getset;H$x.__newvec;H$x.interface("laya.runtime.IMarket"),H$x.interface("laya.filters.IFilter"),H$x.interface("laya.display.ILayout"),H$x.interface("laya.resource.IDispose"),H$x.interface("laya.runtime.IPlatform"),H$x.interface("laya.resource.IDestroy"),H$x.interface("laya.runtime.IConchNode"),H$x.interface("laya.filters.IFilterAction"),H$x.interface("laya.runtime.ICPlatformClass"),H$x.interface("laya.resource.ICreateResource"),H$x.interface("laya.runtime.IConchRenderObject"),H$x.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var H$D=function(){function H$f(){}return H$k(H$f,"laya.utils.RunDriver"),H$f.FILTER_ACTIONS=[],H$f.pixelRatio=-1,H$f._charSizeTestDiv=null,H$f.now=function(){return Date.now()},H$f.getWindow=function(){return H$g},H$f.getPixelRatio=function(){if(H$f.pixelRatio<0){var H$a=H$M.context,H$b=H$a.backingStorePixelRatio||H$a.webkitBackingStorePixelRatio||H$a.mozBackingStorePixelRatio||H$a.msBackingStorePixelRatio||H$a.oBackingStorePixelRatio||H$a.backingStorePixelRatio||1;(H$f.pixelRatio=(H$M.window.devicePixelRatio||1)/H$b)<1&&(H$f.pixelRatio=1)}return H$f.pixelRatio},H$f.getIncludeStr=function(H$a){return null},H$f.createShaderCondition=function(H$a){var H$b="(function() {return "+H$a+";})";return H$x._runScript(H$b)},H$f.fontMap=[],H$f.measureText=function(H$a,H$b){var H$c=H$f.hanzi.test(H$a);if(H$c&&H$f.fontMap[H$b])return H$f.fontMap[H$b];var H$d=H$M.context;H$d.font=H$b;var H$e=H$d.measureText(H$a);return H$c&&(H$f.fontMap[H$b]=H$e),H$e},H$f.getWebGLContext=function(H$a){},H$f.beginFlush=function(){},H$f.endFinish=function(){},H$f.addToAtlas=null,H$f.flashFlushImage=function(H$a){},H$f.drawToCanvas=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g=H$ta.create("2D"),H$h=new H$I(H$c,H$d,H$g);return H$J.renders[H$b]._fun(H$a,H$h,H$e,H$f),H$g},H$f.createParticleTemplate2D=null,H$f.createGLTextur=null,H$f.createWebGLContext2D=null,H$f.changeWebGLSize=function(H$a,H$b){},H$f.createRenderSprite=function(H$a,H$b){return new H$J(H$a,H$b)},H$f.createFilterAction=function(H$a){return new H$t},H$f.createGraphics=function(){return new H$m},H$f.clear=function(H$a){H$H._context.ctx.clear()},H$f.cancelLoadByUrl=function(H$a){},H$f.clearAtlas=function(H$a){},H$f.isAtlas=function(H$a){return!1},H$f.addTextureToAtlas=function(H$a){},H$f.getTexturePixels=function(H$a,H$b,H$c,H$d,H$e){return null},H$f.skinAniSprite=function(){return null},H$f.update3DLoop=function(){},H$i(H$f,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),H$f}(),H$d=(H$o(1,H$x,"alertGlobalError",null,function(H$a){var H$f=0;H$M.window.onerror=H$a?function(H$a,H$b,H$c,H$d,H$e){H$f++<5&&H$e&&alert(H$e.stack||H$e)}:null}),H$x.init=function(H$a,H$b,H$c){for(var H$d=[],H$e=2,H$f=arguments.length;H$e<H$f;H$e++)H$d.push(arguments[H$e]);if(!H$x._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=H$x._arrayBufferSlice),H$x._isinit=!0,H$M.__init__(),H$K.__init__(),H$m.__init__(),H$x.timer=new H$W,H$x.scaleTimer=new H$W,H$x.loader=new H$ia,H$$.__init__(),H$e=0;for(var H$g=H$d.length;H$e<H$g;H$e++)H$d[H$e].enable&&H$d[H$e].enable();return H$n.__init__(),H$h.__init__(),H$L.__init__(),H$O.beginCheck(),H$x._currentStage=H$x.stage=new H$ra,H$x.stage.conchModel&&H$x.stage.conchModel.setRootNode(),H$x._getUrlPath(),H$x.render=new H$H(0,0),H$x.stage.size(H$a,H$b),H$J.__init__(),H$l.__init__(),H$p.instance.__init__(H$x.stage,H$H.canvas),H$va.__init__(),H$C.autoStopMusic=!0,H$A.__init__(),H$H.canvas}},H$x._getUrlPath=function(){var H$a=H$M.window.location,H$b=H$a.pathname;H$b=H$b&&":"==H$b.charAt(2)?H$b.substring(1):H$b,H$G.rootPath=H$G.basePath=H$G.getPath("file:"==H$a.protocol?H$b:H$a.protocol+"//"+H$a.host+H$a.pathname)},H$x._arrayBufferSlice=function(H$a,H$b){var H$c=new Uint8Array(this,H$a,H$b-H$a),H$d=new Uint8Array(H$c.length);return H$d.set(H$c),H$d.buffer},H$x._runScript=function(H$a){return H$M.window[H$x._evcode](H$a)},H$x.stage=null,H$x.timer=null,H$x.scaleTimer=null,H$x.loader=null,H$x.version="1.8.6",H$x.render=null,H$x._currentStage=null,H$x._isinit=!1,H$x.isDebug=!1,H$x.MiniAdpter={init:function(){H$g.navigator&&H$g.navigator.userAgent&&-1<H$g.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},H$i(H$x,["conchMarket",function(){return this.conchMarket=H$g.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=H$g.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function H$a(){}return H$k(H$a,"Config"),H$a.WebGLTextCacheCount=500,H$a.atlasEnable=!1,H$a.showCanvasMark=!1,H$a.animationInterval=50,H$a.isAntialias=!1,H$a.isAlpha=!1,H$a.premultipliedAlpha=!0,H$a.isStencil=!0,H$a.preserveDrawingBuffer=!1,H$a}()),H$j=function(){function H$j(){this._events=null}H$k(H$j,"laya.events.EventDispatcher");var H$a=H$j.prototype;return H$a.hasListener=function(H$a){return!!(this._events&&this._events[H$a])},H$a.event=function(H$a,H$b){if(!this._events||!this._events[H$a])return!1;var H$c=this._events[H$a];if(H$c.lock)H$c.queue||(H$c.queue=[]),H$c.queue.push(H$b);else{var H$d;for(H$c.lock=!0,H$c.cursor=H$c.head;H$c.cursor;)H$d=H$c.cursor,H$c.cursor=H$d.next,H$d.once&&H$j.delNode(H$c,H$d),null!=H$b?H$d.args?H$d.method.apply(H$d.caller,H$d.args.concat(H$b)):H$b instanceof Array?H$d.method.apply(H$d.caller,H$b):H$d.method.call(H$d.caller,H$b):H$d.method.apply(H$d.caller,H$d.args),H$d.once&&H$j.recoverHandler(H$d);H$c.lock=!1,!H$c.head&&this._events&&this._events[H$a]==H$c&&delete this._events[H$a],H$c.queue&&H$c.queue.length&&this.event(H$a,H$c.queue.shift())}return!0},H$a.on=function(H$a,H$b,H$c,H$d){return this._createListener(H$a,H$b,H$c,H$d,!1)},H$a.once=function(H$a,H$b,H$c,H$d){return this._createListener(H$a,H$b,H$c,H$d,!0)},H$a._createListener=function(H$a,H$b,H$c,H$d,H$e,H$f){void 0===H$f&&(H$f=!0),H$f&&this.off(H$a,H$b,H$c,H$e);var H$g=H$j.createHandler(H$b||this,H$c,H$d,H$e);this._events||(this._events={});var H$h=this._events,H$i=H$h[H$a];return H$i?H$i.tail?(H$g.prev=H$i.tail,H$i.tail.next=H$g,H$i.tail=H$g):H$i.head=H$i.tail=H$g:H$h[H$a]={head:H$g,tail:H$g,cursor:null,lock:!1},this},H$a.off=function(H$a,H$b,H$c,H$d){if(void 0===H$d&&(H$d=!1),!this._events||!this._events[H$a])return this;for(var H$e=this._events[H$a],H$f=H$e.head;H$f;){if((!H$b||H$f.caller===H$b)&&H$f.method===H$c&&(!H$d||H$f.once)){H$j.delNode(H$e,H$f),H$e.cursor==H$f&&(H$e.cursor=H$f.next),H$j.recoverHandler(H$f);break}H$f=H$f.next}return this},H$a.offAll=function(H$a){var H$b=this._events;if(!H$b)return this;if(H$a)this._recoverHandlers(H$b[H$a]),delete H$b[H$a];else{for(var H$c in H$b)this._recoverHandlers(H$b[H$c]);this._events=null}return this},H$a._recoverHandlers=function(H$a){if(H$a){for(var H$b=H$a.head;H$b;){H$j.delNode(H$a,H$b);var H$c=H$b.next;H$j.recoverHandler(H$b),H$b=H$c}H$a.cursor=null}},H$a.isMouseEvent=function(H$a){return H$j.MOUSE_EVENTS[H$a]},H$j.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},H$j.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},H$j.delNode=function(H$a,H$b){H$b.prev?H$b.prev.next=H$b.next:H$a.head=H$b.next,H$b.next?H$b.next.prev=H$b.prev:H$a.tail=H$b.prev},H$j.createHandler=function(H$a,H$b,H$c,H$d){var H$e=H$j._freeHandler;return H$e?(H$j._freeCount--,H$j._freeHandler=H$e.next,H$e.caller=H$a,H$e.method=H$b,H$e.args=H$c,H$e.once=H$d):H$e={caller:H$a,method:H$b,args:H$c,once:H$d},H$e.prev=H$e.next=null,H$e},H$j.recoverHandler=function(H$a){H$a.caller=H$a.method=H$a.args=H$a.prev=null,H$a.next=H$j._freeHandler,H$j._freeHandler=H$a,H$j._freeCount++},H$j._freeHandler=null,H$j._freeCount=0,H$j}(),H$s=function(){function H$e(H$a,H$b,H$c,H$d){this.once=!1,void(this._id=0)===H$d&&(H$d=!1),this.setTo(H$a,H$b,H$c,H$d)}H$k(H$e,"laya.utils.Handler");var H$a=H$e.prototype;return H$a.setTo=function(H$a,H$b,H$c,H$d){return this._id=H$e._gid++,this.caller=H$a,this.method=H$b,this.args=H$c,this.once=H$d,this},H$a.run=function(){if(null==this.method)return null;var H$a=this._id,H$b=this.method.apply(this.caller,this.args);return this._id===H$a&&this.once&&this.recover(),H$b},H$a.runWith=function(H$a){if(null==this.method)return null;var H$b=this._id;if(null==H$a)var H$c=this.method.apply(this.caller,this.args);else H$c=this.args||H$a.unshift?this.args?this.method.apply(this.caller,this.args.concat(H$a)):this.method.apply(this.caller,H$a):this.method.call(this.caller,H$a);return this._id===H$b&&this.once&&this.recover(),H$c},H$a.clear=function(){return this.caller=null,this.method=null,this.args=null,this},H$a.recover=function(){0<this._id&&(this._id=0,this.clear())},H$e.create=function(H$a,H$b,H$c,H$d){return void 0===H$d&&(H$d=!0),new H$e(H$a,H$b,H$c,H$d)},H$e._gid=1,H$e}(),H$B=function(){function H$a(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}H$k(H$a,"laya.display.BitmapFont");var H$b=H$a.prototype;return H$b.loadFont=function(H$a,H$b){this._path=H$a,this._complete=H$b,H$x.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],H$s.create(this,this.onLoaded))},H$b.onLoaded=function(){this.parseFont(H$ha.getRes(this._path),H$ha.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},H$b.parseFont=function(H$a,H$b){if(null!=H$a&&null!=H$b){this._texture=H$b;var H$c=H$a.getElementsByTagName("info");if(!H$c[0].getAttributeNode)return this.parseFont2(H$a,H$b);this.fontSize=parseInt(H$c[0].getAttributeNode("size").nodeValue);var H$d,H$e=H$c[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(H$e[0]),parseInt(H$e[1]),parseInt(H$e[2]),parseInt(H$e[3])],H$d=H$a.getElementsByTagName("char");var H$f=0;for(H$f=0;H$f<H$d.length;H$f++){var H$g=H$d[H$f],H$h=parseInt(H$g.getAttributeNode("id").nodeValue),H$i=parseInt(H$g.getAttributeNode("xoffset").nodeValue)/1,H$j=parseInt(H$g.getAttributeNode("yoffset").nodeValue)/1,H$k=parseInt(H$g.getAttributeNode("xadvance").nodeValue)/1,H$l=new H$z;H$l.x=parseInt(H$g.getAttributeNode("x").nodeValue),H$l.y=parseInt(H$g.getAttributeNode("y").nodeValue),H$l.width=parseInt(H$g.getAttributeNode("width").nodeValue),H$l.height=parseInt(H$g.getAttributeNode("height").nodeValue);var H$m=H$ka.create(H$b,H$l.x,H$l.y,H$l.width,H$l.height,H$i,H$j);this._maxWidth=Math.max(this._maxWidth,H$k+this.letterSpacing),this._fontCharDic[H$h]=H$m,this._fontWidthMap[H$h]=H$k}}},H$b.parseFont2=function(H$a,H$b){if(null!=H$a&&null!=H$b){this._texture=H$b;var H$c=H$a.getElementsByTagName("info");this.fontSize=parseInt(H$c[0].attributes.size.nodeValue);var H$d=H$c[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(H$d[0]),parseInt(H$d[1]),parseInt(H$d[2]),parseInt(H$d[3])];var H$e=H$a.getElementsByTagName("char"),H$f=0;for(H$f=0;H$f<H$e.length;H$f++){var H$g=H$e[H$f].attributes,H$h=parseInt(H$g.id.nodeValue),H$i=parseInt(H$g.xoffset.nodeValue)/1,H$j=parseInt(H$g.yoffset.nodeValue)/1,H$k=parseInt(H$g.xadvance.nodeValue)/1,H$l=new H$z;H$l.x=parseInt(H$g.x.nodeValue),H$l.y=parseInt(H$g.y.nodeValue),H$l.width=parseInt(H$g.width.nodeValue),H$l.height=parseInt(H$g.height.nodeValue);var H$m=H$ka.create(H$b,H$l.x,H$l.y,H$l.width,H$l.height,H$i,H$j);this._maxWidth=Math.max(this._maxWidth,H$k+this.letterSpacing),this._fontCharDic[H$h]=H$m,this._fontWidthMap[H$h]=H$k}}},H$b.getCharTexture=function(H$a){return this._fontCharDic[H$a.charCodeAt(0)]},H$b.destroy=function(){if(this._texture){for(var H$a in this._fontCharDic){var H$b=this._fontCharDic[H$a];H$b&&H$b.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},H$b.setSpaceWidth=function(H$a){this._spaceWidth=H$a},H$b.getCharWidth=function(H$a){var H$b=H$a.charCodeAt(0);return this._fontWidthMap[H$b]?this._fontWidthMap[H$b]+this.letterSpacing:" "==H$a?this._spaceWidth+this.letterSpacing:0},H$b.getTextWidth=function(H$a){for(var H$b=0,H$c=0,H$d=H$a.length;H$c<H$d;H$c++)H$b+=this.getCharWidth(H$a.charAt(H$c));return H$b},H$b.getMaxWidth=function(){return this._maxWidth},H$b.getMaxHeight=function(){return this.fontSize},H$b.drawText=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g,H$h=this.getTextWidth(H$a),H$i=0;"center"===H$e&&(H$i=(H$f-H$h)/2),"right"===H$e&&(H$i=H$f-H$h);for(var H$j=0,H$k=0,H$l=H$a.length;H$k<H$l;H$k++)(H$g=this.getCharTexture(H$a.charAt(H$k)))&&(H$b.graphics.drawTexture(H$g,H$c+H$j+H$i,H$d),H$j+=this.getCharWidth(H$a.charAt(H$k)))},H$a}(),H$h=function(){function H$c(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=H$c._TF_EMPTY}H$k(H$c,"laya.display.css.Style");var H$a=H$c.prototype;return H$a.getTransform=function(){return this._tf},H$a.setTransform=function(H$a){this._tf="none"!==H$a&&H$a?H$a:H$c._TF_EMPTY},H$a.setTranslateX=function(H$a){this._tf===H$c._TF_EMPTY&&(this._tf=new H$e),this._tf.translateX=H$a},H$a.setTranslateY=function(H$a){this._tf===H$c._TF_EMPTY&&(this._tf=new H$e),this._tf.translateY=H$a},H$a.setScaleX=function(H$a){this._tf===H$c._TF_EMPTY&&(this._tf=new H$e),this._tf.scaleX=H$a},H$a.setScale=function(H$a,H$b){this._tf===H$c._TF_EMPTY&&(this._tf=new H$e),this._tf.scaleX=H$a,this._tf.scaleY=H$b},H$a.setScaleY=function(H$a){this._tf===H$c._TF_EMPTY&&(this._tf=new H$e),this._tf.scaleY=H$a},H$a.setRotate=function(H$a){this._tf===H$c._TF_EMPTY&&(this._tf=new H$e),this._tf.rotate=H$a},H$a.setSkewX=function(H$a){this._tf===H$c._TF_EMPTY&&(this._tf=new H$e),this._tf.skewX=H$a},H$a.setSkewY=function(H$a){this._tf===H$c._TF_EMPTY&&(this._tf=new H$e),this._tf.skewY=H$a},H$a.destroy=function(){this.scrollRect=null},H$a.render=function(H$a,H$b,H$c,H$d){},H$a.getCSSStyle=function(){return H$ba.EMPTY},H$a._enableLayout=function(){return!1},H$o(0,H$a,"scaleX",function(){return this._tf.scaleX},function(H$a){this.setScaleX(H$a)}),H$o(0,H$a,"transform",function(){return this.getTransform()},function(H$a){this.setTransform(H$a)}),H$o(0,H$a,"translateX",function(){return this._tf.translateX},function(H$a){this.setTranslateX(H$a)}),H$o(0,H$a,"translateY",function(){return this._tf.translateY},function(H$a){this.setTranslateY(H$a)}),H$o(0,H$a,"scaleY",function(){return this._tf.scaleY},function(H$a){this.setScaleY(H$a)}),H$o(0,H$a,"block",function(){return 0!=(1&this._type)}),H$o(0,H$a,"skewY",function(){return this._tf.skewY},function(H$a){this.setSkewY(H$a)}),H$o(0,H$a,"rotate",function(){return this._tf.rotate},function(H$a){this.setRotate(H$a)}),H$o(0,H$a,"skewX",function(){return this._tf.skewX},function(H$a){this.setSkewX(H$a)}),H$o(0,H$a,"paddingLeft",function(){return 0}),H$o(0,H$a,"paddingTop",function(){return 0}),H$o(0,H$a,"absolute",function(){return!0}),H$c.__init__=function(){H$c._TF_EMPTY=new H$e,H$c.EMPTY=new H$c},H$c.EMPTY=null,H$c._TF_EMPTY=null,H$c}(),H$n=function(){function H$b(H$a){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=H$Q.create(H$b.defaultColor),this.family=H$b.defaultFamily,this.stroke=H$b._STROKE,this.size=H$b.defaultSize,H$a&&H$a!==H$b.EMPTY&&H$a.copyTo(this)}H$k(H$b,"laya.display.css.Font");var H$a=H$b.prototype;return H$a.set=function(H$a){this._text=null;for(var H$b=H$a.split(" "),H$c=0,H$d=H$b.length;H$c<H$d;H$c++){var H$e=H$b[H$c];switch(H$e){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<H$e.indexOf("px")&&(this.size=parseInt(H$e),this.family=H$b[H$c+1],H$c++)}},H$a.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},H$a.copyTo=function(H$a){H$a._type=this._type,H$a._text=this._text,H$a._weight=this._weight,H$a._color=this._color,H$a.family=this.family,H$a.stroke=this.stroke!=H$b._STROKE?this.stroke.slice():H$b._STROKE,H$a.indent=this.indent,H$a.size=this.size},H$o(0,H$a,"password",function(){return 0!=(1024&this._type)},function(H$a){H$a?this._type|=1024:this._type&=-1025}),H$o(0,H$a,"color",function(){return this._color.strColor},function(H$a){this._color=H$Q.create(H$a)}),H$o(0,H$a,"italic",function(){return 0!=(512&this._type)},function(H$a){H$a?this._type|=512:this._type&=-513}),H$o(0,H$a,"bold",function(){return 0!=(2048&this._type)},function(H$a){H$a?this._type|=2048:this._type&=-2049}),H$o(0,H$a,"weight",function(){return""+this._weight},function(H$a){var H$b=0;switch(H$a){case"normal":break;case"bold":this.bold=!0,H$b=700;break;case"bolder":H$b=800;break;case"lighter":H$b=100;break;default:H$b=parseInt(H$a)}this._weight=H$b,this._text=null}),H$o(0,H$a,"decoration",function(){return this._decoration?this._decoration.value:null},function(H$a){var H$b=H$a.split(" ");switch(this._decoration||(this._decoration={}),H$b[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=H$b[0]}H$b[1]&&(this._decoration.color=H$Q.create(H$b)),this._decoration.value=H$a}),H$b.__init__=function(){H$b.EMPTY=new H$b(null)},H$b.EMPTY=null,H$b.defaultColor="#000000",H$b.defaultSize=12,H$b.defaultFamily="Arial",H$b.defaultFont="12px Arial",H$b._STROKE=[0,"#000000"],H$b._ITALIC=512,H$b._PASSWORD=1024,H$b._BOLD=2048,H$b}(),H$e=function(){function H$a(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return H$k(H$a,"laya.display.css.TransformInfo"),H$a}(),H$m=function(){function H$l(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,H$H.isConchNode){this._nativeObj=new H$g._conchGraphics,this.id=this._nativeObj.conchID}}H$k(H$l,"laya.display.Graphics");var H$a=H$l.prototype;return H$a.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},H$a.clear=function(H$a){void 0===H$a&&(H$a=!1);var H$b=0,H$c=0;if(H$a){var H$d=this._one;if(this._cmds){for(H$c=this._cmds.length,H$b=0;H$b<H$c;H$b++)!(H$d=this._cmds[H$b])||H$d.callee!==H$H._context._drawTexture&&H$d.callee!==H$H._context._drawTextureWithTransform||(H$d[0]=null,H$l._cache.push(H$d));this._cmds.length=0}else H$d&&(!H$d||H$d.callee!==H$H._context._drawTexture&&H$d.callee!==H$H._context._drawTextureWithTransform||(H$d[0]=null,H$l._cache.push(H$d)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(H$b=0,H$c=this._vectorgraphArray.length;H$b<H$c;H$b++)H$Z.getInstance().deleteShape(this._vectorgraphArray[H$b]);this._vectorgraphArray.length=0}},H$a._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},H$a._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new H$c,this._graphicBounds._graphics=this)},H$a._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},H$a._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},H$a.getBounds=function(H$a){return void 0===H$a&&(H$a=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(H$a)},H$a.getBoundPoints=function(H$a){return void 0===H$a&&(H$a=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(H$a)},H$a._addCmd=function(H$a){this._cmds=this._cmds||[],H$a.callee=H$a.shift(),this._cmds.push(H$a)},H$a.setFilters=function(H$a){this._saveToCmd(H$H._context._setFilters,H$a)},H$a.drawTexture=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){if(void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0),void 0===H$d&&(H$d=0),void 0===H$e&&(H$e=0),void 0===H$g&&(H$g=1),!H$a||H$g<.01)return null;H$d||(H$d=H$a.sourceWidth),H$e||(H$e=H$a.sourceHeight),H$g=H$g<0?0:1<H$g?1:H$g;var H$h,H$i=!H$H.isWebGL&&(H$M.onFirefox||H$M.onEdge||H$M.onIE||H$M.onSafari)?.5:0,H$j=H$d/H$a.sourceWidth,H$k=H$e/H$a.sourceHeight;return H$d=H$a.width*H$j,H$e=H$a.height*H$k,H$a.loaded&&(H$d<=0||H$e<=0)?null:(H$b+=H$a.offsetX*H$j,H$c+=H$a.offsetY*H$k,this._sp&&(this._sp._renderType|=512),H$b-=H$i,H$c-=H$i,H$d+=2*H$i,H$e+=2*H$i,H$l._cache.length?((H$h=H$l._cache.pop())[0]=H$a,H$h[1]=H$b,H$h[2]=H$c,H$h[3]=H$d,H$h[4]=H$e,H$h[5]=H$f,H$h[6]=H$g):H$h=[H$a,H$b,H$c,H$d,H$e,H$f,H$g],H$h.callee=H$f||1!=H$g?H$H._context._drawTextureWithTransform:H$H._context._drawTexture,null!=this._one||H$f||1!=H$g?this._saveToCmd(H$h.callee,H$h):(this._one=H$h,this._render=this._renderOneImg),H$a.loaded||H$a.once("loaded",this,this._textureLoaded,[H$a,H$h]),this._repaint(),H$h)},H$a.cleanByTexture=function(H$a,H$b,H$c,H$d,H$e){if(void 0===H$d&&(H$d=0),void 0===H$e&&(H$e=0),!H$a)return this.clear();if(this._one&&this._render===this._renderOneImg){H$d||(H$d=H$a.sourceWidth),H$e||(H$e=H$a.sourceHeight);var H$f=H$d/H$a.sourceWidth,H$g=H$e/H$a.sourceHeight;H$d=H$a.width*H$f,H$e=H$a.height*H$g,H$b+=H$a.offsetX*H$f,H$c+=H$a.offsetY*H$g,this._one[0]=H$a,this._one[1]=H$b,this._one[2]=H$c,this._one[3]=H$d,this._one[4]=H$e,this._repaint()}else this.clear(),H$a&&this.drawTexture(H$a,H$b,H$c,H$d,H$e)},H$a.drawTextures=function(H$a,H$b){H$a&&this._saveToCmd(H$H._context._drawTextures,[H$a,H$b])},H$a.fillTexture=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){if(void 0===H$d&&(H$d=0),void 0===H$e&&(H$e=0),void 0===H$f&&(H$f="repeat"),H$a){var H$h=[H$a,H$b,H$c,H$d,H$e,H$f,H$g||H$y.EMPTY,{}];H$a.loaded||H$a.once("loaded",this,this._textureLoaded,[H$a,H$h]),this._saveToCmd(H$H._context._fillTexture,H$h)}},H$a._textureLoaded=function(H$a,H$b){H$b[3]=H$b[3]||H$a.width,H$b[4]=H$b[4]||H$a.height,this._repaint()},H$a.fillCircle=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){H$c.bitmap.enableMerageInAtlas=!1;var H$h=new Float32Array(2*(H$g+1)),H$i=new Float32Array(2*(H$g+1)),H$j=new Uint16Array(3*H$g),H$k=2*Math.PI/H$g,H$l=0;H$h[0]=H$d,H$h[1]=H$e,H$i[0]=H$d/H$c.width,H$i[1]=H$e/H$c.height;for(var H$m=2,H$n=0;H$n<H$g;H$n++){var H$o=H$f*Math.cos(H$l)+H$d,H$p=H$f*Math.sin(H$l)+H$e;H$h[H$m]=H$o,H$h[H$m+1]=H$p,H$i[H$m]=H$o/H$c.width,H$i[H$m+1]=H$p/H$c.height,H$l+=H$k,H$m+=2}for(H$n=H$m=0;H$n<H$g;H$n++)H$j[H$m++]=0,H$j[H$m++]=H$n+1,H$j[H$m++]=H$g+1<=H$n+2?1:H$n+2;this.drawTriangles(H$c,H$a,H$b,H$h,H$i,H$j)},H$a.drawTriangles=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j){void 0===H$h&&(H$h=1),this._saveToCmd(H$H._context.drawTriangles,[H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j])},H$a._saveToCmd=function(H$a,H$b){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=H$b,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(H$b)),H$b.callee=H$a,this._repaint(),H$b},H$a.clipRect=function(H$a,H$b,H$c,H$d){this._saveToCmd(H$H._context._clipRect,[H$a,H$b,H$c,H$d])},H$a.fillText=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){void 0===H$g&&(H$g=0),this._saveToCmd(H$H._context._fillText,[H$a,H$b,H$c,H$d||H$n.defaultFont,H$e,H$f])},H$a.fillBorderText=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){this._saveToCmd(H$H._context._fillBorderText,[H$a,H$b,H$c,H$d||H$n.defaultFont,H$e,H$f,H$g,H$h])},H$a.strokeText=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){this._saveToCmd(H$H._context._strokeText,[H$a,H$b,H$c,H$d||H$n.defaultFont,H$e,H$f,H$g])},H$a.alpha=function(H$a){H$a=H$a<0?0:1<H$a?1:H$a,this._saveToCmd(H$H._context._alpha,[H$a])},H$a.setAlpha=function(H$a){H$a=H$a<0?0:1<H$a?1:H$a,this._saveToCmd(H$H._context._setAlpha,[H$a])},H$a.transform=function(H$a,H$b,H$c){void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0),this._saveToCmd(H$H._context._transform,[H$a,H$b,H$c])},H$a.rotate=function(H$a,H$b,H$c){void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0),this._saveToCmd(H$H._context._rotate,[H$a,H$b,H$c])},H$a.scale=function(H$a,H$b,H$c,H$d){void 0===H$c&&(H$c=0),void 0===H$d&&(H$d=0),this._saveToCmd(H$H._context._scale,[H$a,H$b,H$c,H$d])},H$a.translate=function(H$a,H$b){this._saveToCmd(H$H._context._translate,[H$a,H$b])},H$a.save=function(){this._saveToCmd(H$H._context._save,[])},H$a.restore=function(){this._saveToCmd(H$H._context._restore,[])},H$a.replaceText=function(H$a){this._repaint();var H$b=this._cmds;if(H$b){for(var H$c=H$b.length-1;-1<H$c;H$c--)if(this._isTextCmd(H$b[H$c].callee))return H$b[H$c][0].toUpperCase?H$b[H$c][0]=H$a:H$b[H$c][0].setText(H$a),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=H$a:this._one[0].setText(H$a),!0;return!1},H$a._isTextCmd=function(H$a){return H$a===H$H._context._fillText||H$a===H$H._context._fillBorderText||H$a===H$H._context._strokeText},H$a.replaceTextColor=function(H$a){this._repaint();var H$b=this._cmds;if(H$b)for(var H$c=H$b.length-1;-1<H$c;H$c--)this._isTextCmd(H$b[H$c].callee)&&(H$b[H$c][4]=H$a,H$b[H$c][0].toUpperCase||(H$b[H$c][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=H$a,this._one[0].toUpperCase||(this._one[0].changed=!0))},H$a.loadImage=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g=this;void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0),void 0===H$d&&(H$d=0),void 0===H$e&&(H$e=0);var H$h=H$ha.getRes(H$a);function H$i(H$a){H$a&&(H$g.drawTexture(H$a,H$b,H$c,H$d,H$e),null!=H$f&&H$f.call(H$g._sp,H$a))}H$h?H$i(H$h):H$x.loader.load(H$a,H$s.create(null,H$i),null,"image")},H$a._renderEmpty=function(H$a,H$b,H$c,H$d){},H$a._renderAll=function(H$a,H$b,H$c,H$d){for(var H$e,H$f=this._cmds,H$g=0,H$h=H$f.length;H$g<H$h;H$g++)(H$e=H$f[H$g]).callee.call(H$b,H$c,H$d,H$e)},H$a._renderOne=function(H$a,H$b,H$c,H$d){this._one.callee.call(H$b,H$c,H$d,this._one)},H$a._renderOneImg=function(H$a,H$b,H$c,H$d){this._one.callee.call(H$b,H$c,H$d,this._one),2305!==H$a._renderType&&(H$a._renderType|=1)},H$a.drawLine=function(H$a,H$b,H$c,H$d,H$e,H$f){void 0===H$f&&(H$f=1);var H$g=0;H$H.isWebGL&&(H$g=H$Z.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(H$g));var H$h=H$f%2==0?0:.5,H$i=[H$a+H$h,H$b+H$h,H$c+H$h,H$d+H$h,H$e,H$f,H$g];this._saveToCmd(H$H._context._drawLine,H$i)},H$a.drawLines=function(H$a,H$b,H$c,H$d,H$e){void 0===H$e&&(H$e=1);var H$f=0;if(H$c&&!(H$c.length<4)){H$H.isWebGL&&(H$f=H$Z.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(H$f));var H$g=H$e%2==0?0:.5,H$h=[H$a+H$g,H$b+H$g,H$c,H$d,H$e,H$f];this._saveToCmd(H$H._context._drawLines,H$h)}},H$a.drawCurves=function(H$a,H$b,H$c,H$d,H$e){void 0===H$e&&(H$e=1);var H$f=[H$a,H$b,H$c,H$d,H$e];this._saveToCmd(H$H._context._drawCurves,H$f)},H$a.drawRect=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){void 0===H$g&&(H$g=1);var H$h=H$f?H$g/2:0,H$i=H$f?H$g:0,H$j=[H$a+H$h,H$b+H$h,H$c-H$i,H$d-H$i,H$e,H$f,H$g];this._saveToCmd(H$H._context._drawRect,H$j)},H$a.drawCircle=function(H$a,H$b,H$c,H$d,H$e,H$f){void 0===H$f&&(H$f=1);var H$g=H$e?H$f/2:0,H$h=0;H$H.isWebGL&&(H$h=H$Z.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(H$h));var H$i=[H$a,H$b,H$c-H$g,H$d,H$e,H$f,H$h];this._saveToCmd(H$H._context._drawCircle,H$i)},H$a.drawPie=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){void 0===H$h&&(H$h=1);var H$i=H$g?H$h/2:0,H$j=H$g?H$h:0,H$k=0;H$H.isWebGL&&(H$k=H$Z.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(H$k));var H$l=[H$a+H$i,H$b+H$i,H$c-H$j,H$d,H$e,H$f,H$g,H$h,H$k];H$l[3]=H$Y.toRadian(H$d),H$l[4]=H$Y.toRadian(H$e),this._saveToCmd(H$H._context._drawPie,H$l)},H$a.drawPoly=function(H$a,H$b,H$c,H$d,H$e,H$f){void 0===H$f&&(H$f=1);var H$g=0,H$h=!1;H$H.isWebGL&&(H$g=H$Z.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(H$g),H$h=!(6<H$c.length));var H$i=H$e?H$f%2==0?0:.5:0,H$j=[H$a+H$i,H$b+H$i,H$c,H$d,H$e,H$f,H$g,H$h];this._saveToCmd(H$H._context._drawPoly,H$j)},H$a.drawPath=function(H$a,H$b,H$c,H$d,H$e){var H$f=[H$a,H$b,H$c,H$d,H$e];this._saveToCmd(H$H._context._drawPath,H$f)},H$o(0,H$a,"cmds",function(){return this._cmds},function(H$a){this._sp&&(this._sp._renderType|=512),this._cmds=H$a,this._render=this._renderAll,this._repaint()}),H$l.__init__=function(){if(H$H.isConchNode){for(var H$a=laya.display.Graphics.prototype,H$b=H$M.window.ConchGraphics.prototype,H$c=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],H$d=0,H$e=H$c.length;H$d<=H$e;H$d++){var H$f=H$c[H$d];H$a[H$f]=H$b[H$f]}H$a._saveToCmd=null,H$b.drawImageS&&(H$a.drawTextures=function(H$a,H$b){if(H$a&&H$a.loaded&&H$a.bitmap&&H$a.source){var H$c=H$a.uv,H$d=H$a.bitmap.width,H$e=H$a.bitmap.height;this.drawImageS(H$a.bitmap.source,H$c[0]*H$d,H$c[1]*H$e,(H$c[2]-H$c[0])*H$d,(H$c[5]-H$c[3])*H$e,H$a.offsetX,H$a.offsetY,H$a.width,H$a.height,H$b)}}),H$a.drawTexture=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){if(void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0),void 0===H$d&&(H$d=0),void 0===H$e&&(H$e=0),void 0===H$g&&(H$g=1),H$a)if(H$a.loaded){if(H$a.loaded&&H$a.bitmap&&H$a.source&&(H$d||(H$d=H$a.sourceWidth),H$e||(H$e=H$a.sourceHeight),H$g=H$g<0?0:1<H$g?1:H$g,H$d=H$d-H$a.sourceWidth+H$a.width,H$e=H$e-H$a.sourceHeight+H$a.height,!(H$d<=0||H$e<=0))){H$b+=H$a.offsetX,H$c+=H$a.offsetY;var H$h=H$a.uv,H$i=H$a.bitmap.width,H$j=H$a.bitmap.height;H$h[4]<H$h[0]&&H$h[5]<H$h[1]?this.drawImageM(H$a.bitmap.source,H$h[4]*H$i,H$h[5]*H$j,(H$h[0]-H$h[4])*H$i,(H$h[1]-H$h[5])*H$j,H$b,H$c,H$d,H$e,H$f,H$g):this.drawImageM(H$a.bitmap.source,H$h[0]*H$i,H$h[1]*H$j,(H$h[2]-H$h[0])*H$i,(H$h[5]-H$h[3])*H$j,H$b,H$c,H$d,H$e,H$f,H$g),this._repaint()}}else H$a.once("loaded",this,function(){this.drawTexture(H$a,H$b,H$c,H$d,H$e,H$f)})},H$a.fillTexture=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){if(void 0===H$d&&(H$d=0),void 0===H$e&&(H$e=0),void 0===H$f&&(H$f="repeat"),H$a&&H$a.loaded){var H$h,H$i=H$H._context.ctx,H$j=H$a.bitmap.width,H$k=H$a.bitmap.height,H$l=H$a.uv;H$h=H$a.uv!=H$ka.DEF_UV?H$i.createPattern(H$a.bitmap.source,H$f,H$l[0]*H$j,H$l[1]*H$k,(H$l[2]-H$l[0])*H$j,(H$l[5]-H$l[3])*H$k):H$i.createPattern(H$a.bitmap.source,H$f);var H$m=0,H$n=0;H$g&&(H$b+=H$g.x%H$a.width,H$c+=H$g.y%H$a.height,H$m-=H$g.x%H$a.width,H$n-=H$g.y%H$a.height),this._fillImage(H$h,H$b,H$c,H$m,H$n,H$d,H$e)}}}},H$l._cache=[],H$l}(),H$c=function(){function H$t(){this._cacheBoundsType=!1}H$k(H$t,"laya.display.GraphicsBounds");var H$a=H$t.prototype;return H$a.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},H$a.reset=function(){this._temp&&(this._temp.length=0)},H$a.getBounds=function(H$a){return void 0===H$a&&(H$a=!1),(!this._bounds||!this._temp||this._temp.length<1||H$a!=this._cacheBoundsType)&&(this._bounds=H$z._getWrapRec(this.getBoundPoints(H$a),this._bounds)),this._cacheBoundsType=H$a,this._bounds},H$a.getBoundPoints=function(H$a){return void 0===H$a&&(H$a=!1),(!this._temp||this._temp.length<1||H$a!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(H$a)),this._cacheBoundsType=H$a,this._rstBoundPoints=H$Y.copyArray(this._rstBoundPoints,this._temp)},H$a._getCmdPoints=function(H$a){void 0===H$a&&(H$a=!1);var H$b,H$c,H$d=H$H._context,H$e=this._graphics.cmds;if((H$b=this._temp||(this._temp=[])).length=0,H$e||null==this._graphics._one||(H$t._tempCmds.length=0,H$t._tempCmds.push(this._graphics._one),H$e=H$t._tempCmds),!H$e)return H$b;(H$c=H$t._tempMatrixArrays).length=0;var H$f=H$t._initMatrix;H$f.identity();for(var H$g,H$h,H$i=H$t._tempMatrix,H$j=NaN,H$k=NaN,H$l=NaN,H$m=NaN,H$n=NaN,H$o=NaN,H$p=0,H$q=H$e.length;H$p<H$q;H$p++)if((H$g=H$e[H$p]).callee)switch(H$g.callee){case H$d._save:case 7:H$c.push(H$f),H$f=H$f.clone();break;case H$d._restore:case 8:H$f=H$c.pop();break;case H$d._scale:case 5:H$i.identity(),H$i.translate(-H$g[2],-H$g[3]),H$i.scale(H$g[0],H$g[1]),H$i.translate(H$g[2],H$g[3]),this._switchMatrix(H$f,H$i);break;case H$d._rotate:case 3:H$i.identity(),H$i.translate(-H$g[1],-H$g[2]),H$i.rotate(H$g[0]),H$i.translate(H$g[1],H$g[2]),this._switchMatrix(H$f,H$i);break;case H$d._translate:case 6:H$i.identity(),H$i.translate(H$g[0],H$g[1]),this._switchMatrix(H$f,H$i);break;case H$d._transform:case 4:H$i.identity(),H$i.translate(-H$g[1],-H$g[2]),H$i.concat(H$g[0]),H$i.translate(H$g[1],H$g[2]),this._switchMatrix(H$f,H$i);break;case 16:case 24:H$t._addPointArrToRst(H$b,H$z._getBoundPointS(H$g[0],H$g[1],H$g[2],H$g[3]),H$f);break;case 17:H$f.copyTo(H$i),H$i.concat(H$g[4]),H$t._addPointArrToRst(H$b,H$z._getBoundPointS(H$g[0],H$g[1],H$g[2],H$g[3]),H$i);break;case H$d._drawTexture:H$h=H$g[0],H$a?H$g[3]&&H$g[4]?H$t._addPointArrToRst(H$b,H$z._getBoundPointS(H$g[1],H$g[2],H$g[3],H$g[4]),H$f):(H$h=H$g[0],H$t._addPointArrToRst(H$b,H$z._getBoundPointS(H$g[1],H$g[2],H$h.width,H$h.height),H$f)):(H$j=(H$g[3]||H$h.sourceWidth)/H$h.width,H$k=(H$g[4]||H$h.sourceHeight)/H$h.height,H$l=H$j*H$h.sourceWidth,H$m=H$k*H$h.sourceHeight,H$n=0<H$h.offsetX?H$h.offsetX:0,H$o=0<H$h.offsetY?H$h.offsetY:0,H$n*=H$j,H$o*=H$k,H$t._addPointArrToRst(H$b,H$z._getBoundPointS(H$g[1]-H$n,H$g[2]-H$o,H$l,H$m),H$f));break;case H$d._fillTexture:H$g[3]&&H$g[4]?H$t._addPointArrToRst(H$b,H$z._getBoundPointS(H$g[1],H$g[2],H$g[3],H$g[4]),H$f):(H$h=H$g[0],H$t._addPointArrToRst(H$b,H$z._getBoundPointS(H$g[1],H$g[2],H$h.width,H$h.height),H$f));break;case H$d._drawTextureWithTransform:var H$r;H$r=H$g[5]?(H$f.copyTo(H$i),H$i.concat(H$g[5]),H$i):H$f,H$a?H$g[3]&&H$g[4]?H$t._addPointArrToRst(H$b,H$z._getBoundPointS(H$g[1],H$g[2],H$g[3],H$g[4]),H$r):(H$h=H$g[0],H$t._addPointArrToRst(H$b,H$z._getBoundPointS(H$g[1],H$g[2],H$h.width,H$h.height),H$r)):(H$h=H$g[0],H$j=(H$g[3]||H$h.sourceWidth)/H$h.width,H$k=(H$g[4]||H$h.sourceHeight)/H$h.height,H$l=H$j*H$h.sourceWidth,H$m=H$k*H$h.sourceHeight,H$n=0<H$h.offsetX?H$h.offsetX:0,H$o=0<H$h.offsetY?H$h.offsetY:0,H$n*=H$j,H$o*=H$k,H$t._addPointArrToRst(H$b,H$z._getBoundPointS(H$g[1]-H$n,H$g[2]-H$o,H$l,H$m),H$r));break;case H$d._drawRect:case 13:H$t._addPointArrToRst(H$b,H$z._getBoundPointS(H$g[0],H$g[1],H$g[2],H$g[3]),H$f);break;case H$d._drawCircle:case H$d._fillCircle:case 14:H$t._addPointArrToRst(H$b,H$z._getBoundPointS(H$g[0]-H$g[2],H$g[1]-H$g[2],H$g[2]+H$g[2],H$g[2]+H$g[2]),H$f);break;case H$d._drawLine:case 20:H$t._tempPoints.length=0;var H$s;H$s=.5*H$g[5],H$g[0]==H$g[2]?H$t._tempPoints.push(H$g[0]+H$s,H$g[1],H$g[2]+H$s,H$g[3],H$g[0]-H$s,H$g[1],H$g[2]-H$s,H$g[3]):H$g[1]==H$g[3]?H$t._tempPoints.push(H$g[0],H$g[1]+H$s,H$g[2],H$g[3]+H$s,H$g[0],H$g[1]-H$s,H$g[2],H$g[3]-H$s):H$t._tempPoints.push(H$g[0],H$g[1],H$g[2],H$g[3]),H$t._addPointArrToRst(H$b,H$t._tempPoints,H$f);break;case H$d._drawCurves:case 22:H$t._addPointArrToRst(H$b,H$u.I.getBezierPoints(H$g[2]),H$f,H$g[0],H$g[1]);break;case H$d._drawPoly:case H$d._drawLines:case 18:H$t._addPointArrToRst(H$b,H$g[2],H$f,H$g[0],H$g[1]);break;case H$d._drawPath:case 19:H$t._addPointArrToRst(H$b,this._getPathPoints(H$g[2]),H$f,H$g[0],H$g[1]);break;case H$d._drawPie:case 15:H$t._addPointArrToRst(H$b,this._getPiePoints(H$g[0],H$g[1],H$g[2],H$g[3],H$g[4]),H$f)}return 200<H$b.length?H$b=H$Y.copyArray(H$b,H$z._getWrapRec(H$b)._getBoundPoints()):8<H$b.length&&(H$b=H$v.scanPList(H$b)),H$b},H$a._switchMatrix=function(H$a,H$b){H$b.concat(H$a),H$b.copyTo(H$a)},H$a._getPiePoints=function(H$a,H$b,H$c,H$d,H$e){var H$f=H$t._tempPoints;H$t._tempPoints.length=0,H$f.push(H$a,H$b);var H$g=(H$e-H$d)%(2*Math.PI)/10,H$h=NaN,H$i=H$d;for(H$h=0;H$h<=10;H$h++)H$f.push(H$a+H$c*Math.cos(H$i),H$b+H$c*Math.sin(H$i)),H$i+=H$g;return H$f},H$a._getPathPoints=function(H$a){var H$b,H$c,H$d=0,H$e=H$t._tempPoints;for(H$e.length=0,H$b=H$a.length,H$d=0;H$d<H$b;H$d++)1<(H$c=H$a[H$d]).length&&(H$e.push(H$c[1],H$c[2]),3<H$c.length&&H$e.push(H$c[3],H$c[4]));return H$e},H$t._addPointArrToRst=function(H$a,H$b,H$c,H$d,H$e){void 0===H$d&&(H$d=0),void 0===H$e&&(H$e=0);var H$f,H$g=0;for(H$f=H$b.length,H$g=0;H$g<H$f;H$g+=2)H$t._addPointToRst(H$a,H$b[H$g]+H$d,H$b[H$g+1]+H$e,H$c)},H$t._addPointToRst=function(H$a,H$b,H$c,H$d){var H$e=H$y.TEMP;H$e.setTo(H$b||0,H$c||0),H$d.transformPoint(H$e),H$a.push(H$e.x,H$e.y)},H$t._tempPoints=[],H$t._tempMatrixArrays=[],H$t._tempCmds=[],H$i(H$t,["_tempMatrix",function(){return this._tempMatrix=new H$E},"_initMatrix",function(){return this._initMatrix=new H$E}]),H$t}(),H$f=function(){function H$a(){}H$k(H$a,"laya.events.Event");var H$b=H$a.prototype;return H$b.setTo=function(H$a,H$b,H$c){return this.type=H$a,this.currentTarget=H$b,this.target=H$c,this},H$b.stopPropagation=function(){this._stoped=!0},H$o(0,H$b,"stageY",function(){return H$x.stage.mouseY}),H$o(0,H$b,"charCode",function(){return this.nativeEvent.charCode}),H$o(0,H$b,"touches",function(){var H$a=this.nativeEvent.touches;if(H$a)for(var H$b=H$x.stage,H$c=0,H$d=H$a.length;H$c<H$d;H$c++){var H$e=H$a[H$c],H$f=H$y.TEMP;H$f.setTo(H$e.clientX,H$e.clientY),H$b._canvasTransform.invertTransformPoint(H$f),H$b.transform.invertTransformPoint(H$f),H$e.stageX=H$f.x,H$e.stageY=H$f.y}return H$a}),H$o(0,H$b,"keyLocation",function(){return this.nativeEvent.keyLocation}),H$o(0,H$b,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),H$o(0,H$b,"altKey",function(){return this.nativeEvent.altKey}),H$o(0,H$b,"shiftKey",function(){return this.nativeEvent.shiftKey}),H$o(0,H$b,"stageX",function(){return H$x.stage.mouseX}),H$a.EMPTY=new H$a,H$a.MOUSE_DOWN="mousedown",H$a.MOUSE_UP="mouseup",H$a.CLICK="click",H$a.RIGHT_MOUSE_DOWN="rightmousedown",H$a.RIGHT_MOUSE_UP="rightmouseup",H$a.RIGHT_CLICK="rightclick",H$a.MOUSE_MOVE="mousemove",H$a.MOUSE_OVER="mouseover",H$a.MOUSE_OUT="mouseout",H$a.MOUSE_WHEEL="mousewheel",H$a.ROLL_OVER="mouseover",H$a.ROLL_OUT="mouseout",H$a.DOUBLE_CLICK="doubleclick",H$a.CHANGE="change",H$a.CHANGED="changed",H$a.RESIZE="resize",H$a.ADDED="added",H$a.REMOVED="removed",H$a.DISPLAY="display",H$a.UNDISPLAY="undisplay",H$a.ERROR="error",H$a.COMPLETE="complete",H$a.LOADED="loaded",H$a.INITED="inited",H$a.PROGRESS="progress",H$a.INPUT="input",H$a.RENDER="render",H$a.OPEN="open",H$a.MESSAGE="message",H$a.CLOSE="close",H$a.KEY_DOWN="keydown",H$a.KEY_PRESS="keypress",H$a.KEY_UP="keyup",H$a.FRAME="enterframe",H$a.DRAG_START="dragstart",H$a.DRAG_MOVE="dragmove",H$a.DRAG_END="dragend",H$a.ENTER="enter",H$a.SELECT="select",H$a.BLUR="blur",H$a.FOCUS="focus",H$a.VISIBILITY_CHANGE="visibilitychange",H$a.FOCUS_CHANGE="focuschange",H$a.PLAYED="played",H$a.PAUSED="paused",H$a.STOPPED="stopped",H$a.START="start",H$a.END="end",H$a.ENABLE_CHANGED="enablechanged",H$a.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",H$a.COMPONENT_ADDED="componentadded",H$a.COMPONENT_REMOVED="componentremoved",H$a.LAYER_CHANGED="layerchanged",H$a.HIERARCHY_LOADED="hierarchyloaded",H$a.RECOVERED="recovered",H$a.RELEASED="released",H$a.LINK="link",H$a.LABEL="label",H$a.FULL_SCREEN_CHANGE="fullscreenchange",H$a.DEVICE_LOST="devicelost",H$a.MESH_CHANGED="meshchanged",H$a.MATERIAL_CHANGED="materialchanged",H$a.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",H$a.ANIMATION_CHANGED="animationchanged",H$a.TRIGGER_ENTER="triggerenter",H$a.TRIGGER_STAY="triggerstay",H$a.TRIGGER_EXIT="triggerexit",H$a.TRAIL_FILTER_CHANGE="trailfilterchange",H$a.DOMINO_FILTER_CHANGE="dominofilterchange",H$a}(),H$l=(function(){function H$a(){}H$k(H$a,"laya.events.Keyboard"),H$a.NUMBER_0=48,H$a.NUMBER_1=49,H$a.NUMBER_2=50,H$a.NUMBER_3=51,H$a.NUMBER_4=52,H$a.NUMBER_5=53,H$a.NUMBER_6=54,H$a.NUMBER_7=55,H$a.NUMBER_8=56,H$a.NUMBER_9=57,H$a.A=65,H$a.B=66,H$a.C=67,H$a.D=68,H$a.E=69,H$a.F=70,H$a.G=71,H$a.H=72,H$a.I=73,H$a.J=74,H$a.K=75,H$a.L=76,H$a.M=77,H$a.N=78,H$a.O=79,H$a.P=80,H$a.Q=81,H$a.R=82,H$a.S=83,H$a.T=84,H$a.U=85,H$a.V=86,H$a.W=87,H$a.X=88,H$a.Y=89,H$a.Z=90,H$a.F1=112,H$a.F2=113,H$a.F3=114,H$a.F4=115,H$a.F5=116,H$a.F6=117,H$a.F7=118,H$a.F8=119,H$a.F9=120,H$a.F10=121,H$a.F11=122,H$a.F12=123,H$a.F13=124,H$a.F14=125,H$a.F15=126,H$a.NUMPAD=21,H$a.NUMPAD_0=96,H$a.NUMPAD_1=97,H$a.NUMPAD_2=98,H$a.NUMPAD_3=99,H$a.NUMPAD_4=100,H$a.NUMPAD_5=101,H$a.NUMPAD_6=102,H$a.NUMPAD_7=103,H$a.NUMPAD_8=104,H$a.NUMPAD_9=105,H$a.NUMPAD_ADD=107,H$a.NUMPAD_DECIMAL=110,H$a.NUMPAD_DIVIDE=111,H$a.NUMPAD_ENTER=108,H$a.NUMPAD_MULTIPLY=106,H$a.NUMPAD_SUBTRACT=109,H$a.SEMICOLON=186,H$a.EQUAL=187,H$a.COMMA=188,H$a.MINUS=189,H$a.PERIOD=190,H$a.SLASH=191,H$a.BACKQUOTE=192,H$a.LEFTBRACKET=219,H$a.BACKSLASH=220,H$a.RIGHTBRACKET=221,H$a.QUOTE=222,H$a.ALTERNATE=18,H$a.BACKSPACE=8,H$a.CAPS_LOCK=20,H$a.COMMAND=15,H$a.CONTROL=17,H$a.DELETE=46,H$a.ENTER=13,H$a.ESCAPE=27,H$a.PAGE_UP=33,H$a.PAGE_DOWN=34,H$a.END=35,H$a.HOME=36,H$a.LEFT=37,H$a.UP=38,H$a.RIGHT=39,H$a.DOWN=40,H$a.SHIFT=16,H$a.SPACE=32,H$a.TAB=9,H$a.INSERT=45}(),function(){function H$e(){}return H$k(H$e,"laya.events.KeyBoardManager"),H$e.__init__=function(){H$e._addEvent("keydown"),H$e._addEvent("keypress"),H$e._addEvent("keyup")},H$e._addEvent=function(H$b){H$M.document.addEventListener(H$b,function(H$a){laya.events.KeyBoardManager._dispatch(H$a,H$b)},!0)},H$e._dispatch=function(H$a,H$b){if(H$e.enabled){H$e._event._stoped=!1,H$e._event.nativeEvent=H$a,H$e._event.keyCode=H$a.keyCode||H$a.which||H$a.charCode,"keydown"===H$b?H$e._pressKeys[H$e._event.keyCode]=!0:"keyup"===H$b&&(H$e._pressKeys[H$e._event.keyCode]=null);for(var H$c=H$x.stage.focus&&null!=H$x.stage.focus.event&&H$x.stage.focus.displayedInStage?H$x.stage.focus:H$x.stage,H$d=H$c;H$d;)H$d.event(H$b,H$e._event.setTo(H$b,H$d,H$c)),H$d=H$d.parent}},H$e.hasKeyDown=function(H$a){return H$e._pressKeys[H$a]},H$e._pressKeys={},H$e.enabled=!0,H$i(H$e,["_event",function(){return this._event=new H$f}]),H$e}()),H$p=(function(){function H$a(){}H$k(H$a,"laya.events.KeyLocation"),H$a.STANDARD=0,H$a.LEFT=1,H$a.RIGHT=2,H$a.NUM_PAD=3}(),function(){function H$j(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=H$M.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new H$f,this._matrix=new H$E,this._point=new H$y,this._rect=new H$z,this._prePoint=new H$y,this._curTouchID=NaN}H$k(H$j,"laya.events.MouseManager");var H$a=H$j.prototype;return H$a.__init__=function(H$a,H$b){var H$c=this;this._stage=H$a;var H$d=this,H$e=this._eventList;H$b.oncontextmenu=function(H$a){if(H$j.enabled)return!1},H$b.addEventListener("mousedown",function(H$a){H$j.enabled&&(H$M.onIE||H$a.preventDefault(),H$e.push(H$a),H$d.mouseDownTime=H$M.now())}),H$b.addEventListener("mouseup",function(H$a){H$j.enabled&&(H$a.preventDefault(),H$e.push(H$a),H$d.mouseDownTime=-H$M.now())},!0),H$b.addEventListener("mousemove",function(H$a){if(H$j.enabled){H$a.preventDefault();var H$b=H$M.now();if(H$b-H$d._lastMoveTimer<10)return;H$d._lastMoveTimer=H$b,H$e.push(H$a)}},!0),H$b.addEventListener("mouseout",function(H$a){H$j.enabled&&H$e.push(H$a)}),H$b.addEventListener("mouseover",function(H$a){H$j.enabled&&H$e.push(H$a)}),H$b.addEventListener("touchstart",function(H$a){H$j.enabled&&(H$e.push(H$a),H$j._isFirstTouch||H$va.isInputting||H$a.preventDefault(),H$d.mouseDownTime=H$M.now())}),H$b.addEventListener("touchend",function(H$a){H$j.enabled?(H$j._isFirstTouch||H$va.isInputting||H$a.preventDefault(),H$j._isFirstTouch=!1,H$e.push(H$a),H$d.mouseDownTime=-H$M.now()):H$c._curTouchID=NaN},!0),H$b.addEventListener("touchmove",function(H$a){H$j.enabled&&(H$a.preventDefault(),H$e.push(H$a))},!0),H$b.addEventListener("touchcancel",function(H$a){H$j.enabled?(H$a.preventDefault(),H$e.push(H$a)):H$c._curTouchID=NaN},!0),H$b.addEventListener("mousewheel",function(H$a){H$j.enabled&&H$e.push(H$a)}),H$b.addEventListener("DOMMouseScroll",function(H$a){H$j.enabled&&H$e.push(H$a)})},H$a.initEvent=function(H$a,H$b){var H$c;this._event._stoped=!1,this._event.nativeEvent=H$b||H$a,this._target=null,this._point.setTo(H$a.pageX||H$a.clientX,H$a.pageY||H$a.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=H$a.identifier||0,this._tTouchID=this._event.touchId,(H$c=H$q.I._event)._stoped=!1,H$c.nativeEvent=this._event.nativeEvent,H$c.touchId=this._event.touchId},H$a.checkMouseWheel=function(H$a){this._event.delta=H$a.wheelDelta?.025*H$a.wheelDelta:-H$a.detail;for(var H$b=H$q.I.getLastOvers(),H$c=0,H$d=H$b.length;H$c<H$d;H$c++){var H$e=H$b[H$c];H$e.event("mousewheel",this._event.setTo("mousewheel",H$e,this._target))}},H$a.onMouseMove=function(H$a){H$q.I.onMouseMove(H$a,this._tTouchID)},H$a.onMouseDown=function(H$a){if(H$va.isInputting&&H$x.stage.focus&&H$x.stage.focus.focus&&!H$x.stage.focus.contains(this._target)){var H$b=H$x.stage.focus._tf||H$x.stage.focus,H$c=H$a._tf||H$a;H$c instanceof laya.display.Input&&H$c.multiline==H$b.multiline?H$b._focusOut():H$b.focus=!1}H$q.I.onMouseDown(H$a,this._tTouchID,this._isLeftMouse)},H$a.onMouseUp=function(H$a){H$q.I.onMouseUp(H$a,this._tTouchID,this._isLeftMouse)},H$a.check=function(H$a,H$b,H$c,H$d){this._point.setTo(H$b,H$c),H$a.fromParentPoint(this._point),H$b=this._point.x,H$c=this._point.y;var H$e=H$a.scrollRect;if(H$e&&(this._rect.setTo(H$e.x,H$e.y,H$e.width,H$e.height),!this._rect.contains(H$b,H$c)))return!1;if(!this.disableMouseEvent){if(H$a.hitTestPrior&&!H$a.mouseThrough&&!this.hitTest(H$a,H$b,H$c))return!1;for(var H$f=H$a._childs.length-1;-1<H$f;H$f--){var H$g=H$a._childs[H$f];if(!H$g.destroyed&&H$g.mouseEnabled&&H$g.visible&&this.check(H$g,H$b,H$c,H$d))return!0}}var H$h=!(!H$a.hitTestPrior||H$a.mouseThrough||this.disableMouseEvent)||this.hitTest(H$a,H$b,H$c);return H$h?(this._target=H$a,H$d.call(this,H$a)):H$d===this.onMouseUp&&H$a===this._stage&&(this._target=this._stage,H$d.call(this,this._target)),H$h},H$a.hitTest=function(H$a,H$b,H$c){var H$d=!1;if(H$a.scrollRect&&(H$b-=H$a.scrollRect.x,H$c-=H$a.scrollRect.y),H$a.hitArea instanceof laya.utils.HitArea)return H$a.hitArea.isHit(H$b,H$c);if(0<H$a.width&&0<H$a.height||H$a.mouseThrough||H$a.hitArea)if(H$a.mouseThrough)H$d=H$a.getGraphicBounds().contains(H$b,H$c);else{var H$e=this._rect;H$a.hitArea?H$e=H$a.hitArea:H$e.setTo(0,0,H$a.width,H$a.height),H$d=H$e.contains(H$b,H$c)}return H$d},H$a.runEvent=function(){var H$a=this._eventList.length;if(H$a){this.mouseEventTime=H$M.now();var H$b,H$c=0,H$d=0,H$e=0;try{for(;H$c<H$a;){var H$f=this._eventList[H$c];switch("mousemove"!==H$f.type&&(this._prePoint.x=this._prePoint.y=-1e6),H$f.type){case"mousedown":this._touchIDs[0]=this._id++,H$j._isTouchRespond?H$j._isTouchRespond=!1:(this._isLeftMouse=0===H$f.button,this.initEvent(H$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===H$f.button,this.initEvent(H$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-H$f.clientX)+Math.abs(this._prePoint.y-H$f.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=H$f.clientX,this._prePoint.y=H$f.clientY,this.initEvent(H$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":H$j._isTouchRespond=!0,this._isLeftMouse=!0;var H$g=H$f.changedTouches;for(H$d=0,H$e=H$g.length;H$d<H$e;H$d++)H$b=H$g[H$d],(H$j.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=H$b.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[H$b.identifier]=this._id++,this.initEvent(H$b,H$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":H$j._isTouchRespond=!0,this._isLeftMouse=!0;var H$h=H$f.changedTouches;for(H$d=0,H$e=H$h.length;H$d<H$e;H$d++)if(H$b=H$h[H$d],H$j.multiTouchEnabled||H$b.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(H$b,H$f);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var H$i=H$f.changedTouches;for(H$d=0,H$e=H$i.length;H$d<H$e;H$d++)H$b=H$i[H$d],(H$j.multiTouchEnabled||H$b.identifier==this._curTouchID)&&(this.initEvent(H$b,H$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(H$f);break;case"mouseout":H$q.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}H$c++}}catch(H$a){throw this._eventList.length=0,H$a}this._eventList.length=0}},H$j.enabled=!0,H$j.multiTouchEnabled=!0,H$j._isTouchRespond=!1,H$j._isFirstTouch=!0,H$i(H$j,["instance",function(){return this.instance=new H$j}]),H$j}()),H$q=function(){function H$o(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new H$f}H$k(H$o,"laya.events.TouchManager");var H$a=H$o.prototype;return H$a._clearTempArrs=function(){H$o._oldArr.length=0,H$o._newArr.length=0,H$o._tEleArr.length=0},H$a.getTouchFromArr=function(H$a,H$b){var H$c,H$d,H$e=0;for(H$c=H$b.length,H$e=0;H$e<H$c;H$e++)if((H$d=H$b[H$e]).id==H$a)return H$d;return null},H$a.removeTouchFromArr=function(H$a,H$b){var H$c=0;for(H$c=H$b.length-1;0<=H$c;H$c--)H$b[H$c].id==H$a&&H$b.splice(H$c,1)},H$a.createTouchO=function(H$a,H$b){var H$c;return(H$c=H$U.getItem("TouchData")||{}).id=H$b,H$c.tar=H$a,H$c},H$a.onMouseDown=function(H$a,H$b,H$c){var H$d,H$e,H$f,H$g;(void 0===H$c&&(H$c=!1),this.enable)&&(H$d=this.getTouchFromArr(H$b,this.preOvers),H$f=this.getEles(H$a,null,H$o._tEleArr),H$d?H$d.tar=H$a:(H$e=this.createTouchO(H$a,H$b),this.preOvers.push(H$e)),H$M.onMobile&&this.sendEvents(H$f,"mouseover",H$b),H$g=H$c?this.preDowns:this.preRightDowns,(H$d=this.getTouchFromArr(H$b,H$g))?H$d.tar=H$a:(H$e=this.createTouchO(H$a,H$b),H$g.push(H$e)),this.sendEvents(H$f,H$c?"mousedown":"rightmousedown",H$b),this._clearTempArrs())},H$a.sendEvents=function(H$a,H$b,H$c){void 0===H$c&&(H$c=0);var H$d,H$e,H$f,H$g=0;for(H$d=H$a.length,this._event._stoped=!1,H$e=H$a[0],H$g=0;H$g<H$d;H$g++){if((H$f=H$a[H$g]).destroyed)return;if(H$f.event(H$b,this._event.setTo(H$b,H$f,H$e)),this._event._stoped)break}},H$a.getEles=function(H$a,H$b,H$c){for(H$c?H$c.length=0:H$c=[];H$a&&H$a!=H$b;)H$c.push(H$a),H$a=H$a.parent;return H$c},H$a.checkMouseOutAndOverOfMove=function(H$a,H$b,H$c){if(void 0===H$c&&(H$c=0),H$b!=H$a){var H$d,H$e,H$f=0,H$g=0;if(H$b.contains(H$a))H$e=this.getEles(H$a,H$b,H$o._tEleArr),this.sendEvents(H$e,"mouseover",H$c);else if(H$a.contains(H$b))H$e=this.getEles(H$b,H$a,H$o._tEleArr),this.sendEvents(H$e,"mouseout",H$c);else{var H$h,H$i;(H$e=H$o._tEleArr).length=0,H$h=this.getEles(H$b,null,H$o._oldArr),H$i=this.getEles(H$a,null,H$o._newArr),H$g=H$h.length;var H$j=0;for(H$f=0;H$f<H$g;H$f++){if(H$d=H$h[H$f],0<=(H$j=H$i.indexOf(H$d))){H$i.splice(H$j,H$i.length-H$j);break}H$e.push(H$d)}0<H$e.length&&this.sendEvents(H$e,"mouseout",H$c),0<H$i.length&&this.sendEvents(H$i,"mouseover",H$c)}}},H$a.onMouseMove=function(H$a,H$b){var H$c,H$d;this.enable&&((H$c=this.getTouchFromArr(H$b,this.preOvers))?(this.checkMouseOutAndOverOfMove(H$a,H$c.tar),H$c.tar=H$a,H$d=this.getEles(H$a,null,H$o._tEleArr)):(H$d=this.getEles(H$a,null,H$o._tEleArr),this.sendEvents(H$d,"mouseover",H$b),this.preOvers.push(this.createTouchO(H$a,H$b))),this.sendEvents(H$d,"mousemove",H$b),this._clearTempArrs())},H$a.getLastOvers=function(){return(H$o._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,H$o._tEleArr):(H$o._tEleArr.push(H$x.stage),H$o._tEleArr)},H$a.stageMouseOut=function(){var H$a;H$a=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(H$a,"mouseout",0)},H$a.onMouseUp=function(H$a,H$b,H$c){if(void 0===H$c&&(H$c=!1),this.enable){var H$d,H$e,H$f,H$g,H$h,H$i,H$j=0,H$k=0,H$l=H$M.onMobile;if(H$e=this.getEles(H$a,null,H$o._tEleArr),this.sendEvents(H$e,H$c?"mouseup":"rightmouseup",H$b),H$i=H$c?this.preDowns:this.preRightDowns,H$d=this.getTouchFromArr(H$b,H$i)){var H$m,H$n=H$M.now();if(H$m=H$n-this._lastClickTime<300,this._lastClickTime=H$n,H$a==H$d.tar)H$h=H$e;else for(H$f=this.getEles(H$d.tar,null,H$o._oldArr),(H$h=H$o._newArr).length=0,H$k=H$f.length,H$j=0;H$j<H$k;H$j++)H$g=H$f[H$j],0<=H$e.indexOf(H$g)&&H$h.push(H$g);0<H$h.length&&this.sendEvents(H$h,H$c?"click":"rightclick",H$b),H$c&&H$m&&this.sendEvents(H$h,"doubleclick",H$b),this.removeTouchFromArr(H$b,H$i),H$d.tar=null,H$U.recover("TouchData",H$d)}else;(H$d=this.getTouchFromArr(H$b,this.preOvers))&&H$l&&((H$h=this.getEles(H$d.tar,null,H$h))&&0<H$h.length&&this.sendEvents(H$h,"mouseout",H$b),this.removeTouchFromArr(H$b,this.preOvers),H$d.tar=null,H$U.recover("TouchData",H$d)),this._clearTempArrs()}},H$o._oldArr=[],H$o._newArr=[],H$o._tEleArr=[],H$i(H$o,["I",function(){return this.I=new H$o}]),H$o}(),H$r=function(){function H$a(){this._action=null}H$k(H$a,"laya.filters.Filter");var H$b=H$a.prototype;return H$x.imps(H$b,{"laya.filters.IFilter":!0}),H$b.callNative=function(H$a){},H$o(0,H$b,"type",function(){return-1}),H$o(0,H$b,"action",function(){return this._action}),H$a.BLUR=16,H$a.COLOR=32,H$a.GLOW=8,H$a._filterStart=null,H$a._filterEnd=null,H$a._EndTarget=null,H$a._recycleScope=null,H$a._filter=null,H$a._useSrc=null,H$a._endSrc=null,H$a._useOut=null,H$a._endOut=null,H$a}(),H$t=function(){function H$a(){this.data=null}H$k(H$a,"laya.filters.ColorFilterAction");var H$b=H$a.prototype;return H$x.imps(H$b,{"laya.filters.IFilterAction":!0}),H$b.apply=function(H$a){var H$b=H$a.ctx.ctx,H$c=H$a.ctx.ctx.canvas;if(0==H$c.width||0==H$c.height)return H$c;for(var H$d,H$e=H$b.getImageData(0,0,H$c.width,H$c.height),H$f=H$e.data,H$g=0,H$h=H$f.length;H$g<H$h;H$g+=4)H$d=this.getColor(H$f[H$g],H$f[H$g+1],H$f[H$g+2],H$f[H$g+3]),0!=H$f[H$g+3]&&(H$f[H$g]=H$d[0],H$f[H$g+1]=H$d[1],H$f[H$g+2]=H$d[2],H$f[H$g+3]=H$d[3]);return H$b.putImageData(H$e,0,0),H$a},H$b.getColor=function(H$a,H$b,H$c,H$d){var H$e=[];if(this.data._mat&&this.data._alpha){var H$f=this.data._mat,H$g=this.data._alpha;H$e[0]=H$f[0]*H$a+H$f[1]*H$b+H$f[2]*H$c+H$f[3]*H$d+H$g[0],H$e[1]=H$f[4]*H$a+H$f[5]*H$b+H$f[6]*H$c+H$f[7]*H$d+H$g[1],H$e[2]=H$f[8]*H$a+H$f[9]*H$b+H$f[10]*H$c+H$f[11]*H$d+H$g[2],H$e[3]=H$f[12]*H$a+H$f[13]*H$b+H$f[14]*H$c+H$f[15]*H$d+H$g[3]}return H$e},H$a}(),H$u=(function(){function H$a(){}H$k(H$a,"laya.maths.Arith"),H$a.formatR=function(H$a){return H$a>Math.PI&&(H$a-=2*Math.PI),H$a<-Math.PI&&(H$a+=2*Math.PI),H$a},H$a.isPOT=function(H$a,H$b){return 0<H$a&&0==(H$a&H$a-1)&&0<H$b&&0==(H$b&H$b-1)},H$a.setMatToArray=function(H$a,H$b){H$a.a,H$a.b,H$a.c,H$a.d,H$a.tx,H$a.ty,H$b[0]=H$a.a,H$b[1]=H$a.b,H$b[4]=H$a.c,H$b[5]=H$a.d,H$b[12]=H$a.tx,H$b[13]=H$a.ty}}(),function(){function H$a(){this._controlPoints=[new H$y,new H$y,new H$y],this._calFun=this.getPoint2}H$k(H$a,"laya.maths.Bezier");var H$b=H$a.prototype;return H$b._switchPoint=function(H$a,H$b){var H$c=this._controlPoints.shift();H$c.setTo(H$a,H$b),this._controlPoints.push(H$c)},H$b.getPoint2=function(H$a,H$b){var H$c=this._controlPoints[0],H$d=this._controlPoints[1],H$e=this._controlPoints[2],H$f=Math.pow(1-H$a,2)*H$c.x+2*H$a*(1-H$a)*H$d.x+Math.pow(H$a,2)*H$e.x,H$g=Math.pow(1-H$a,2)*H$c.y+2*H$a*(1-H$a)*H$d.y+Math.pow(H$a,2)*H$e.y;H$b.push(H$f,H$g)},H$b.getPoint3=function(H$a,H$b){var H$c=this._controlPoints[0],H$d=this._controlPoints[1],H$e=this._controlPoints[2],H$f=this._controlPoints[3],H$g=Math.pow(1-H$a,3)*H$c.x+3*H$d.x*H$a*(1-H$a)*(1-H$a)+3*H$e.x*H$a*H$a*(1-H$a)+H$f.x*Math.pow(H$a,3),H$h=Math.pow(1-H$a,3)*H$c.y+3*H$d.y*H$a*(1-H$a)*(1-H$a)+3*H$e.y*H$a*H$a*(1-H$a)+H$f.y*Math.pow(H$a,3);H$b.push(H$g,H$h)},H$b.insertPoints=function(H$a,H$b){var H$c,H$d=NaN;for(H$c=1/(H$a=0<H$a?H$a:5),H$d=0;H$d<=1;H$d+=H$c)this._calFun(H$d,H$b)},H$b.getBezierPoints=function(H$a,H$b,H$c){void 0===H$b&&(H$b=5),void 0===H$c&&(H$c=2);var H$d,H$e,H$f=0;if((H$d=H$a.length)<2*(H$c+1))return[];switch(H$e=[],H$c){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=H$c;)this._controlPoints.push(new H$y);for(H$f=0;H$f<2*H$c;H$f+=2)this._switchPoint(H$a[H$f],H$a[H$f+1]);for(H$f=2*H$c;H$f<H$d;H$f+=2)this._switchPoint(H$a[H$f],H$a[H$f+1]),H$f/2%H$c==0&&this.insertPoints(H$b,H$e);return H$e},H$i(H$a,["I",function(){return this.I=new H$a}]),H$a}()),H$v=function(){function H$j(){}return H$k(H$j,"laya.maths.GrahamScan"),H$j.multiply=function(H$a,H$b,H$c){return(H$a.x-H$c.x)*(H$b.y-H$c.y)-(H$b.x-H$c.x)*(H$a.y-H$c.y)},H$j.dis=function(H$a,H$b){return(H$a.x-H$b.x)*(H$a.x-H$b.x)+(H$a.y-H$b.y)*(H$a.y-H$b.y)},H$j._getPoints=function(H$a,H$b,H$c){for(void 0===H$b&&(H$b=!1),H$j._mPointList||(H$j._mPointList=[]);H$j._mPointList.length<H$a;)H$j._mPointList.push(new H$y);return H$c||(H$c=[]),H$c.length=0,H$b?H$j.getFrom(H$c,H$j._mPointList,H$a):H$j.getFromR(H$c,H$j._mPointList,H$a),H$c},H$j.getFrom=function(H$a,H$b,H$c){var H$d=0;for(H$d=0;H$d<H$c;H$d++)H$a.push(H$b[H$d]);return H$a},H$j.getFromR=function(H$a,H$b,H$c){var H$d=0;for(H$d=0;H$d<H$c;H$d++)H$a.push(H$b.pop());return H$a},H$j.pListToPointList=function(H$a,H$b){void 0===H$b&&(H$b=!1);var H$c=0,H$d=H$a.length/2,H$e=H$j._getPoints(H$d,H$b,H$j._tempPointList);for(H$c=0;H$c<H$d;H$c++)H$e[H$c].setTo(H$a[H$c+H$c],H$a[H$c+H$c+1]);return H$e},H$j.pointListToPlist=function(H$a){var H$b,H$c=0,H$d=H$a.length,H$e=H$j._temPList;for(H$c=H$e.length=0;H$c<H$d;H$c++)H$b=H$a[H$c],H$e.push(H$b.x,H$b.y);return H$e},H$j.scanPList=function(H$a){return H$Y.copyArray(H$a,H$j.pointListToPlist(H$j.scan(H$j.pListToPointList(H$a,!0))))},H$j.scan=function(H$a){var H$b,H$c,H$d,H$e=0,H$f=0,H$g=0,H$h=H$a.length,H$i={};for((H$c=H$j._temArr).length=0,H$e=(H$h=H$a.length)-1;0<=H$e;H$e--)H$d=(H$b=H$a[H$e]).x+"_"+H$b.y,H$i.hasOwnProperty(H$d)||(H$i[H$d]=!0,H$c.push(H$b));for(H$h=H$c.length,H$Y.copyArray(H$a,H$c),H$e=1;H$e<H$h;H$e++)(H$a[H$e].y<H$a[H$g].y||H$a[H$e].y==H$a[H$g].y&&H$a[H$e].x<H$a[H$g].x)&&(H$g=H$e);for(H$b=H$a[0],H$a[0]=H$a[H$g],H$a[H$g]=H$b,H$e=1;H$e<H$h-1;H$e++){for(H$f=(H$g=H$e)+1;H$f<H$h;H$f++)(0<H$j.multiply(H$a[H$f],H$a[H$g],H$a[0])||0==H$j.multiply(H$a[H$f],H$a[H$g],H$a[0])&&H$j.dis(H$a[0],H$a[H$f])<H$j.dis(H$a[0],H$a[H$g]))&&(H$g=H$f);H$b=H$a[H$e],H$a[H$e]=H$a[H$g],H$a[H$g]=H$b}if((H$c=H$j._temArr).length=0,H$a.length<3)return H$Y.copyArray(H$c,H$a);for(H$c.push(H$a[0],H$a[1],H$a[2]),H$e=3;H$e<H$h;H$e++){for(;2<=H$c.length&&0<=H$j.multiply(H$a[H$e],H$c[H$c.length-1],H$c[H$c.length-2]);)H$c.pop();H$a[H$e]&&H$c.push(H$a[H$e])}return H$c},H$j._mPointList=null,H$j._tempPointList=[],H$j._temPList=[],H$j._temArr=[],H$j}(),H$w=function(){function H$e(){}return H$k(H$e,"laya.maths.MathUtil"),H$e.subtractVector3=function(H$a,H$b,H$c){H$c[0]=H$a[0]-H$b[0],H$c[1]=H$a[1]-H$b[1],H$c[2]=H$a[2]-H$b[2]},H$e.lerp=function(H$a,H$b,H$c){return H$a*(1-H$c)+H$b*H$c},H$e.scaleVector3=function(H$a,H$b,H$c){H$c[0]=H$a[0]*H$b,H$c[1]=H$a[1]*H$b,H$c[2]=H$a[2]*H$b},H$e.lerpVector3=function(H$a,H$b,H$c,H$d){var H$e=H$a[0],H$f=H$a[1],H$g=H$a[2];H$d[0]=H$e+H$c*(H$b[0]-H$e),H$d[1]=H$f+H$c*(H$b[1]-H$f),H$d[2]=H$g+H$c*(H$b[2]-H$g)},H$e.lerpVector4=function(H$a,H$b,H$c,H$d){var H$e=H$a[0],H$f=H$a[1],H$g=H$a[2],H$h=H$a[3];H$d[0]=H$e+H$c*(H$b[0]-H$e),H$d[1]=H$f+H$c*(H$b[1]-H$f),H$d[2]=H$g+H$c*(H$b[2]-H$g),H$d[3]=H$h+H$c*(H$b[3]-H$h)},H$e.slerpQuaternionArray=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){var H$h,H$i,H$j,H$k,H$l,H$m=H$a[H$b+0],H$n=H$a[H$b+1],H$o=H$a[H$b+2],H$p=H$a[H$b+3],H$q=H$c[H$d+0],H$r=H$c[H$d+1],H$s=H$c[H$d+2],H$t=H$c[H$d+3];return(H$i=H$m*H$q+H$n*H$r+H$o*H$s+H$p*H$t)<0&&(H$i=-H$i,H$q=-H$q,H$r=-H$r,H$s=-H$s,H$t=-H$t),H$l=1e-6<1-H$i?(H$h=Math.acos(H$i),H$j=Math.sin(H$h),H$k=Math.sin((1-H$e)*H$h)/H$j,Math.sin(H$e*H$h)/H$j):(H$k=1-H$e,H$e),H$f[H$g+0]=H$k*H$m+H$l*H$q,H$f[H$g+1]=H$k*H$n+H$l*H$r,H$f[H$g+2]=H$k*H$o+H$l*H$s,H$f[H$g+3]=H$k*H$p+H$l*H$t,H$f},H$e.getRotation=function(H$a,H$b,H$c,H$d){return Math.atan2(H$d-H$b,H$c-H$a)/Math.PI*180},H$e.sortBigFirst=function(H$a,H$b){return H$a==H$b?0:H$a<H$b?1:-1},H$e.sortSmallFirst=function(H$a,H$b){return H$a==H$b?0:H$a<H$b?-1:1},H$e.sortNumBigFirst=function(H$a,H$b){return parseFloat(H$b)-parseFloat(H$a)},H$e.sortNumSmallFirst=function(H$a,H$b){return parseFloat(H$a)-parseFloat(H$b)},H$e.sortByKey=function(H$c,H$a,H$b){var H$d;return void 0===H$a&&(H$a=!1),void 0===H$b&&(H$b=!0),H$d=H$a?H$b?H$e.sortNumBigFirst:H$e.sortBigFirst:H$b?H$e.sortNumSmallFirst:H$e.sortSmallFirst,function(H$a,H$b){return H$d(H$a[H$c],H$b[H$c])}},H$e}(),H$E=function(){function H$c(H$a,H$b,H$c,H$d,H$e,H$f){this.inPool=!1,this.bTransform=!1,void 0===H$a&&(H$a=1),void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0),void 0===H$d&&(H$d=1),void 0===H$e&&(H$e=0),void 0===H$f&&(H$f=0),this.a=H$a,this.b=H$b,this.c=H$c,this.d=H$d,this.tx=H$e,this.ty=H$f,this._checkTransform()}H$k(H$c,"laya.maths.Matrix");var H$a=H$c.prototype;return H$a.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},H$a._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},H$a.setTranslate=function(H$a,H$b){return this.tx=H$a,this.ty=H$b,this},H$a.translate=function(H$a,H$b){return this.tx+=H$a,this.ty+=H$b,this},H$a.scale=function(H$a,H$b){this.a*=H$a,this.d*=H$b,this.c*=H$a,this.b*=H$b,this.tx*=H$a,this.ty*=H$b,this.bTransform=!0},H$a.rotate=function(H$a){var H$b=Math.cos(H$a),H$c=Math.sin(H$a),H$d=this.a,H$e=this.c,H$f=this.tx;this.a=H$d*H$b-this.b*H$c,this.b=H$d*H$c+this.b*H$b,this.c=H$e*H$b-this.d*H$c,this.d=H$e*H$c+this.d*H$b,this.tx=H$f*H$b-this.ty*H$c,this.ty=H$f*H$c+this.ty*H$b,this.bTransform=!0},H$a.skew=function(H$a,H$b){var H$c=Math.tan(H$a),H$d=Math.tan(H$b),H$e=this.a,H$f=this.b;return this.a+=H$d*this.c,this.b+=H$d*this.d,this.c+=H$c*H$e,this.d+=H$c*H$f,this},H$a.invertTransformPoint=function(H$a){var H$b=this.a,H$c=this.b,H$d=this.c,H$e=this.d,H$f=this.tx,H$g=H$b*H$e-H$c*H$d,H$h=H$e/H$g,H$i=-H$c/H$g,H$j=-H$d/H$g,H$k=H$b/H$g,H$l=(H$d*this.ty-H$e*H$f)/H$g,H$m=-(H$b*this.ty-H$c*H$f)/H$g;return H$a.setTo(H$h*H$a.x+H$j*H$a.y+H$l,H$i*H$a.x+H$k*H$a.y+H$m)},H$a.transformPoint=function(H$a){return H$a.setTo(this.a*H$a.x+this.c*H$a.y+this.tx,this.b*H$a.x+this.d*H$a.y+this.ty)},H$a.transformPointN=function(H$a){return H$a.setTo(this.a*H$a.x+this.c*H$a.y,this.b*H$a.x+this.d*H$a.y)},H$a.transformPointArray=function(H$a,H$b){for(var H$c=H$a.length,H$d=0;H$d<H$c;H$d+=2){var H$e=H$a[H$d],H$f=H$a[H$d+1];H$b[H$d]=this.a*H$e+this.c*H$f+this.tx,H$b[H$d+1]=this.b*H$e+this.d*H$f+this.ty}return H$b},H$a.transformPointArrayScale=function(H$a,H$b){for(var H$c=H$a.length,H$d=0;H$d<H$c;H$d+=2){var H$e=H$a[H$d],H$f=H$a[H$d+1];H$b[H$d]=this.a*H$e+this.c*H$f,H$b[H$d+1]=this.b*H$e+this.d*H$f}return H$b},H$a.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},H$a.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},H$a.invert=function(){var H$a=this.a,H$b=this.b,H$c=this.c,H$d=this.d,H$e=this.tx,H$f=H$a*H$d-H$b*H$c;return this.a=H$d/H$f,this.b=-H$b/H$f,this.c=-H$c/H$f,this.d=H$a/H$f,this.tx=(H$c*this.ty-H$d*H$e)/H$f,this.ty=-(H$a*this.ty-H$b*H$e)/H$f,this},H$a.setTo=function(H$a,H$b,H$c,H$d,H$e,H$f){return this.a=H$a,this.b=H$b,this.c=H$c,this.d=H$d,this.tx=H$e,this.ty=H$f,this},H$a.concat=function(H$a){var H$b=this.a,H$c=this.c,H$d=this.tx;return this.a=H$b*H$a.a+this.b*H$a.c,this.b=H$b*H$a.b+this.b*H$a.d,this.c=H$c*H$a.a+this.d*H$a.c,this.d=H$c*H$a.b+this.d*H$a.d,this.tx=H$d*H$a.a+this.ty*H$a.c+H$a.tx,this.ty=H$d*H$a.b+this.ty*H$a.d+H$a.ty,this},H$a.scaleEx=function(H$a,H$b){var H$c=this.a,H$d=this.b,H$e=this.c,H$f=this.d;0!==H$d||0!==H$e?(this.a=H$a*H$c,this.b=H$a*H$d,this.c=H$b*H$e):(this.a=H$a*H$c,this.b=0*H$f,this.c=0*H$c),this.d=H$b*H$f,this.bTransform=!0},H$a.rotateEx=function(H$a){var H$b=Math.cos(H$a),H$c=Math.sin(H$a),H$d=this.a,H$e=this.b,H$f=this.c,H$g=this.d;0!==H$e||0!==H$f?(this.a=H$b*H$d+H$c*H$f,this.b=H$b*H$e+H$c*H$g,this.c=-H$c*H$d+H$b*H$f,this.d=-H$c*H$e+H$b*H$g):(this.a=H$b*H$d,this.b=H$c*H$g,this.c=-H$c*H$d,this.d=H$b*H$g),this.bTransform=!0},H$a.clone=function(){var H$a=H$c.create();return H$a.a=this.a,H$a.b=this.b,H$a.c=this.c,H$a.d=this.d,H$a.tx=this.tx,H$a.ty=this.ty,H$a.bTransform=this.bTransform,H$a},H$a.copyTo=function(H$a){return H$a.a=this.a,H$a.b=this.b,H$a.c=this.c,H$a.d=this.d,H$a.tx=this.tx,H$a.ty=this.ty,H$a.bTransform=this.bTransform,H$a},H$a.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},H$a.destroy=function(){if(!this.inPool){var H$a=H$c._cache;this.inPool=!0,H$a._length||(H$a._length=0),(H$a[H$a._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},H$c.mul=function(H$a,H$b,H$c){var H$d=H$a.a,H$e=H$a.b,H$f=H$a.c,H$g=H$a.d,H$h=H$a.tx,H$i=H$a.ty,H$j=H$b.a,H$k=H$b.b,H$l=H$b.c,H$m=H$b.d,H$n=H$b.tx,H$o=H$b.ty;return 0!==H$k||0!==H$l?(H$c.a=H$d*H$j+H$e*H$l,H$c.b=H$d*H$k+H$e*H$m,H$c.c=H$f*H$j+H$g*H$l,H$c.d=H$f*H$k+H$g*H$m,H$c.tx=H$j*H$h+H$l*H$i+H$n,H$c.ty=H$k*H$h+H$m*H$i+H$o):(H$c.a=H$d*H$j,H$c.b=H$e*H$m,H$c.c=H$f*H$j,H$c.d=H$g*H$m,H$c.tx=H$j*H$h+H$n,H$c.ty=H$m*H$i+H$o),H$c},H$c.mul16=function(H$a,H$b,H$c){var H$d=H$a.a,H$e=H$a.b,H$f=H$a.c,H$g=H$a.d,H$h=H$a.tx,H$i=H$a.ty,H$j=H$b.a,H$k=H$b.b,H$l=H$b.c,H$m=H$b.d,H$n=H$b.tx,H$o=H$b.ty;return 0!==H$k||0!==H$l?(H$c[0]=H$d*H$j+H$e*H$l,H$c[1]=H$d*H$k+H$e*H$m,H$c[4]=H$f*H$j+H$g*H$l,H$c[5]=H$f*H$k+H$g*H$m,H$c[12]=H$j*H$h+H$l*H$i+H$n,H$c[13]=H$k*H$h+H$m*H$i+H$o):(H$c[0]=H$d*H$j,H$c[1]=H$e*H$m,H$c[4]=H$f*H$j,H$c[5]=H$g*H$m,H$c[12]=H$j*H$h+H$n,H$c[13]=H$m*H$i+H$o),H$c},H$c.mulPre=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){var H$i=H$a.a,H$j=H$a.b,H$k=H$a.c,H$l=H$a.d,H$m=H$a.tx,H$n=H$a.ty;return 0!==H$c||0!==H$d?(H$h.a=H$i*H$b+H$j*H$d,H$h.b=H$i*H$c+H$j*H$e,H$h.c=H$k*H$b+H$l*H$d,H$h.d=H$k*H$c+H$l*H$e,H$h.tx=H$b*H$m+H$d*H$n+H$f,H$h.ty=H$c*H$m+H$e*H$n+H$g):(H$h.a=H$i*H$b,H$h.b=H$j*H$e,H$h.c=H$k*H$b,H$h.d=H$l*H$e,H$h.tx=H$b*H$m+H$f,H$h.ty=H$e*H$n+H$g),H$h},H$c.mulPos=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){var H$i=H$a.a,H$j=H$a.b,H$k=H$a.c,H$l=H$a.d,H$m=H$a.tx,H$n=H$a.ty;return 0!==H$j||0!==H$k?(H$h.a=H$b*H$i+H$c*H$k,H$h.b=H$b*H$j+H$c*H$l,H$h.c=H$d*H$i+H$e*H$k,H$h.d=H$d*H$j+H$e*H$l,H$h.tx=H$i*H$f+H$k*H$g+H$m,H$h.ty=H$j*H$f+H$l*H$g+H$n):(H$h.a=H$b*H$i,H$h.b=H$c*H$l,H$h.c=H$d*H$i,H$h.d=H$e*H$l,H$h.tx=H$i*H$f+H$m,H$h.ty=H$l*H$g+H$n),H$h},H$c.preMul=function(H$a,H$b,H$c){var H$d=H$a.a,H$e=H$a.b,H$f=H$a.c,H$g=H$a.d,H$h=H$b.a,H$i=H$b.b,H$j=H$b.c,H$k=H$b.d,H$l=H$b.tx,H$m=H$b.ty;return H$c.a=H$h*H$d,H$c.b=H$c.c=0,H$c.d=H$k*H$g,H$c.tx=H$l*H$d+H$a.tx,H$c.ty=H$m*H$g+H$a.ty,0===H$i&&0===H$j&&0===H$e&&0===H$f||(H$c.a+=H$i*H$f,H$c.d+=H$j*H$e,H$c.b+=H$h*H$e+H$i*H$g,H$c.c+=H$j*H$d+H$k*H$f,H$c.tx+=H$m*H$f,H$c.ty+=H$l*H$e),H$c},H$c.preMulXY=function(H$a,H$b,H$c,H$d){var H$e=H$a.a,H$f=H$a.b,H$g=H$a.c,H$h=H$a.d;return H$d.a=H$e,H$d.b=H$f,H$d.c=H$g,H$d.d=H$h,H$d.tx=H$b*H$e+H$a.tx+H$c*H$g,H$d.ty=H$c*H$h+H$a.ty+H$b*H$f,H$d},H$c.create=function(){var H$a=H$c._cache,H$b=H$a._length?H$a[--H$a._length]:new H$c;return H$b.inPool=!1,H$b},H$c.EMPTY=new H$c,H$c.TEMP=new H$c,H$c._cache=[],H$c}(),H$y=function(){function H$a(H$a,H$b){void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=0),this.x=H$a,this.y=H$b}H$k(H$a,"laya.maths.Point");var H$b=H$a.prototype;return H$b.setTo=function(H$a,H$b){return this.x=H$a,this.y=H$b,this},H$b.distance=function(H$a,H$b){return Math.sqrt((this.x-H$a)*(this.x-H$a)+(this.y-H$b)*(this.y-H$b))},H$b.toString=function(){return this.x+","+this.y},H$b.normalize=function(){var H$a=Math.sqrt(this.x*this.x+this.y*this.y);if(0<H$a){var H$b=1/H$a;this.x*=H$b,this.y*=H$b}},H$a.TEMP=new H$a,H$a.EMPTY=new H$a,H$a}(),H$z=function(){function H$j(H$a,H$b,H$c,H$d){void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0),void 0===H$d&&(H$d=0),this.x=H$a,this.y=H$b,this.width=H$c,this.height=H$d}H$k(H$j,"laya.maths.Rectangle");var H$a=H$j.prototype;return H$a.setTo=function(H$a,H$b,H$c,H$d){return this.x=H$a,this.y=H$b,this.width=H$c,this.height=H$d,this},H$a.copyFrom=function(H$a){return this.x=H$a.x,this.y=H$a.y,this.width=H$a.width,this.height=H$a.height,this},H$a.contains=function(H$a,H$b){return!(this.width<=0||this.height<=0)&&(H$a>=this.x&&H$a<this.right&&H$b>=this.y&&H$b<this.bottom)},H$a.intersects=function(H$a){return!(H$a.x>this.x+this.width||H$a.x+H$a.width<this.x||H$a.y>this.y+this.height||H$a.y+H$a.height<this.y)},H$a.intersection=function(H$a,H$b){return this.intersects(H$a)?(H$b||(H$b=new H$j),H$b.x=Math.max(this.x,H$a.x),H$b.y=Math.max(this.y,H$a.y),H$b.width=Math.min(this.right,H$a.right)-H$b.x,H$b.height=Math.min(this.bottom,H$a.bottom)-H$b.y,H$b):null},H$a.union=function(H$a,H$b){return H$b||(H$b=new H$j),this.clone(H$b),H$a.width<=0||H$a.height<=0?H$b:(H$b.addPoint(H$a.x,H$a.y),H$b.addPoint(H$a.right,H$a.bottom),this)},H$a.clone=function(H$a){return H$a||(H$a=new H$j),H$a.x=this.x,H$a.y=this.y,H$a.width=this.width,H$a.height=this.height,H$a},H$a.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},H$a.equals=function(H$a){return!(!H$a||H$a.x!==this.x||H$a.y!==this.y||H$a.width!==this.width||H$a.height!==this.height)},H$a.addPoint=function(H$a,H$b){return this.x>H$a&&(this.width+=this.x-H$a,this.x=H$a),this.y>H$b&&(this.height+=this.y-H$b,this.y=H$b),this.width<H$a-this.x&&(this.width=H$a-this.x),this.height<H$b-this.y&&(this.height=H$b-this.y),this},H$a._getBoundPoints=function(){var H$a=H$j._temB;return(H$a.length=0)==this.width||0==this.height||H$a.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),H$a},H$a.isEmpty=function(){return this.width<=0||this.height<=0},H$o(0,H$a,"right",function(){return this.x+this.width}),H$o(0,H$a,"bottom",function(){return this.y+this.height}),H$j._getBoundPointS=function(H$a,H$b,H$c,H$d){var H$e=H$j._temA;return(H$e.length=0)==H$c||0==H$d||H$e.push(H$a,H$b,H$a+H$c,H$b,H$a,H$b+H$d,H$a+H$c,H$b+H$d),H$e},H$j._getWrapRec=function(H$a,H$b){if(!H$a||H$a.length<1)return H$b?H$b.setTo(0,0,0,0):H$j.TEMP.setTo(0,0,0,0);H$b=H$b||new H$j;var H$c,H$d,H$e,H$f,H$g,H$h=H$a.length,H$i=H$y.TEMP;for(H$e=H$g=-(H$d=H$f=99999),H$c=0;H$c<H$h;H$c+=2)H$i.x=H$a[H$c],H$i.y=H$a[H$c+1],H$d=H$d<H$i.x?H$d:H$i.x,H$f=H$f<H$i.y?H$f:H$i.y,H$e=H$e>H$i.x?H$e:H$i.x,H$g=H$g>H$i.y?H$g:H$i.y;return H$b.setTo(H$d,H$f,H$e-H$d,H$g-H$f)},H$j.EMPTY=new H$j,H$j.TEMP=new H$j,H$j._temB=[],H$j._temA=[],H$j}(),H$C=function(){function H$i(){}return H$k(H$i,"laya.media.SoundManager"),H$o(1,H$i,"useAudioMusic",function(){return H$i._useAudioMusic},function(H$a){H$i._useAudioMusic=H$a,H$i._musicClass=H$a?H$ca:null}),H$o(1,H$i,"autoStopMusic",function(){return H$i._autoStopMusic},function(H$a){H$x.stage.off("blur",null,H$i._stageOnBlur),H$x.stage.off("focus",null,H$i._stageOnFocus),H$x.stage.off("visibilitychange",null,H$i._visibilityChange),(H$i._autoStopMusic=H$a)&&(H$x.stage.on("blur",null,H$i._stageOnBlur),H$x.stage.on("focus",null,H$i._stageOnFocus),H$x.stage.on("visibilitychange",null,H$i._visibilityChange))}),H$o(1,H$i,"muted",function(){return H$i._muted},function(H$a){H$a!=H$i._muted&&(H$a&&H$i.stopAllSound(),H$i.musicMuted=H$a,H$i._muted=H$a)}),H$o(1,H$i,"musicMuted",function(){return H$i._musicMuted},function(H$a){H$a!=H$i._musicMuted&&(H$a?(H$i._tMusic&&H$i._musicChannel&&!H$i._musicChannel.isStopped?H$i._musicChannel.pause():H$i._musicChannel=null,H$i._musicMuted=H$a):(H$i._musicMuted=H$a,H$i._tMusic&&H$i._musicChannel&&H$i._musicChannel.resume()))}),H$o(1,H$i,"soundMuted",function(){return H$i._soundMuted},function(H$a){H$i._soundMuted=H$a}),H$i.addChannel=function(H$a){0<=H$i._channels.indexOf(H$a)||(H$i._channels.push(H$a),H$i.autoReleaseSound&&0!=H$i._notUsedCount&&H$i._notUsedUrls[H$a.url]&&(delete H$i._notUsedUrls[H$a.url],0==--H$i._notUsedCount&&H$x.timer.clear(H$i,H$i.disposeSoundIfNotUsed)))},H$i.removeChannel=function(H$a){var H$b=H$i._channels,H$c=H$b.indexOf(H$a);if(-1!=H$c&&(H$b.splice(H$c,1),H$i.autoReleaseSound)){var H$d=H$a.url,H$e=H$i.defaultIntervals[H$d]||2e4;if(0<H$e){var H$f=!0;for(H$c=H$b.length-1;0<=H$c;H$c--)if(H$b[H$c].url==H$d){H$f=!1;break}H$f&&(H$i._notUsedUrls[H$d]=Date.now()+H$e,0==H$i._notUsedCount++&&H$x.timer.loop(1e4,H$i,H$i.disposeSoundIfNotUsed))}}},H$i.disposeSoundIfNotUsed=function(){var H$a=H$i._notUsedUrls;if(0!=H$i._notUsedCount){var H$b=Date.now();for(var H$c in H$a)H$b>=H$a[H$c]&&(delete H$a[H$c],--H$i._notUsedCount,H$i.destroySound(H$c));if(0!=H$i._notUsedCount)return}H$x.timer.clear(H$i,H$i.disposeSoundIfNotUsed)},H$i._visibilityChange=function(){H$x.stage.isVisibility?H$i._stageOnFocus():H$i._stageOnBlur()},H$i._stageOnBlur=function(){H$i._isActive=!1,H$i._musicChannel&&(H$i._musicChannel.isStopped||(H$i._blurPaused=!0,H$i._musicChannel.pause())),H$i.stopAllSound(),H$x.stage.once("mousedown",null,H$i._stageOnFocus)},H$i._recoverWebAudio=function(){H$fa.ctx&&"running"!=H$fa.ctx.state&&H$fa.ctx.resume&&H$fa.ctx.resume()},H$i._stageOnFocus=function(){if(H$i._isActive=!0,H$i._recoverWebAudio(),H$x.stage.off("mousedown",null,H$i._stageOnFocus),H$i._blurPaused){var H$a=H$i._musicChannel;H$a&&H$i._music&&H$a.isStopped&&(H$i._blurPaused=!1,H$i._music._disposed?H$i.playMusic(H$a.url,H$a.loops,H$a.startHandler,H$a.completeHandler,H$a.startTime):H$a.audioBuffer?H$a.resume():H$i._music.play(H$a.startTime,H$a.loops,H$a.startHandler,H$a))}},H$i.playSound=function(H$a,H$b,H$c,H$d,H$e,H$f){if(void 0===H$b&&(H$b=1),void 0===H$f&&(H$f=0),!H$a)return null;if(H$i._muted)return null;if(H$i._recoverWebAudio(),H$a==H$i._tMusic){if(H$i._musicMuted)return null}else{if(!H$i._isActive)return null;if(H$i._soundMuted)return null}var H$g,H$h=H$i._pool[H$a];return H$e||(H$e=H$i._soundClass),H$h||((H$h=new H$e).load(H$a),H$i._pool[H$a]=H$h),(H$g=H$h.play(H$f,H$b,H$c))?(H$a==H$i._tMusic&&(H$i._music=H$h,H$i._isActive||(H$i._blurPaused=!0,H$g.pause())),H$g.url=H$a,H$g.volume=H$a==H$i._tMusic?H$i.musicVolume:H$i.soundVolume,H$g.completeHandler=H$d,H$g):null},H$i.destroySound=function(H$a){var H$b=H$i._pool[H$a];H$b&&(delete H$i._pool[H$a],H$b.dispose())},H$i.playMusic=function(H$a,H$b,H$c,H$d,H$e){return void 0===H$b&&(H$b=0),void 0===H$e&&(H$e=0),H$i._tMusic=H$a,H$i._musicChannel&&H$i._musicChannel.stop(),H$i._musicChannel=H$i.playSound(H$a,H$b,H$c,H$d,null,H$e)},H$i.stopSound=function(H$a){for(var H$b,H$c=H$i._channels.length-1;0<=H$c;H$c--)(H$b=H$i._channels[H$c]).url==H$a&&H$b.stop()},H$i.stopAll=function(){H$i._tMusic=null;var H$a=0;for(H$a=H$i._channels.length-1;0<=H$a;H$a--)H$i._channels[H$a].stop()},H$i.stopAllSound=function(){var H$a,H$b=0;for(H$b=H$i._channels.length-1;0<=H$b;H$b--)(H$a=H$i._channels[H$b]).url!=H$i._tMusic&&H$a.stop()},H$i.stopMusic=function(){H$i._musicChannel&&H$i._musicChannel.stop(),H$i._tMusic=null},H$i.setSoundVolume=function(H$a,H$b){if(H$b)H$i._setVolume(H$b,H$a);else{H$i.soundVolume=H$a;var H$c,H$d=0;for(H$d=H$i._channels.length-1;0<=H$d;H$d--)(H$c=H$i._channels[H$d]).url!=H$i._tMusic&&(H$c.volume=H$a)}},H$i.setMusicVolume=function(H$a){H$i.musicVolume=H$a,H$i._setVolume(H$i._tMusic,H$a)},H$i._setVolume=function(H$a,H$b){for(var H$c,H$d=H$i._channels.length-1;0<=H$d;H$d--)(H$c=H$i._channels[H$d]).url==H$a&&(H$c.volume=H$b)},H$i.musicVolume=1,H$i.soundVolume=1,H$i.playbackRate=1,H$i._useAudioMusic=!0,H$i._muted=!1,H$i._soundMuted=!1,H$i._musicMuted=!1,H$i._tMusic=null,H$i._musicChannel=null,H$i._music=null,H$i._channels=[],H$i._autoStopMusic=!1,H$i._blurPaused=!1,H$i._isActive=!0,H$i._soundClass=null,H$i._musicClass=null,H$i.autoReleaseSound=!0,H$i._pool={},H$i.defaultIntervals={},H$i._notUsedUrls={},H$i._notUsedCount=0,H$i}(),H$A=function(){var H$a;function H$c(){}return H$k(H$c,"laya.net.LocalStorage"),H$c.__init__=function(){H$c._baseClass||(H$c._baseClass=H$a).init(),H$c.items=H$c._baseClass.items,H$c.support=H$c._baseClass.support},H$c.setItem=function(H$a,H$b){H$c._baseClass.setItem(H$a,H$b)},H$c.getItem=function(H$a){return H$c._baseClass.getItem(H$a)},H$c.setJSON=function(H$a,H$b){H$c._baseClass.setJSON(H$a,H$b)},H$c.getJSON=function(H$a){return H$c._baseClass.getJSON(H$a)},H$c.removeItem=function(H$a){H$c._baseClass.removeItem(H$a)},H$c.clear=function(){H$c._baseClass.clear()},H$c._baseClass=null,H$c.items=null,H$c.support=!1,H$c.__init$=function(){H$a=function(){function H$c(){}return H$k(H$c,""),H$c.init=function(){try{H$c.support=!0,H$c.items=H$g.localStorage,H$c.setItem("laya","1"),H$c.removeItem("laya")}catch(H$a){H$c.support=!1}H$c.support||console.log("LocalStorage is not supprot or browser is private mode.")},H$c.setItem=function(H$a,H$b){try{H$c.support&&H$c.items.setItem(H$a,H$b)}catch(H$a){console.warn("set localStorage failed",H$a)}},H$c.getItem=function(H$a){return H$c.support?H$c.items.getItem(H$a):null},H$c.setJSON=function(H$a,H$b){try{H$c.support&&H$c.items.setItem(H$a,JSON.stringify(H$b))}catch(H$a){console.warn("set localStorage failed",H$a)}},H$c.getJSON=function(H$a){return JSON.parse(H$c.support?H$c.items.getItem(H$a):null)},H$c.removeItem=function(H$a){H$c.support&&H$c.items.removeItem(H$a)},H$c.clear=function(){H$c.support&&H$c.items.clear()},H$c.items=null,H$c.support=!1,H$c}()},H$c}(),H$F=(function(){function H$d(){}H$k(H$d,"laya.net.ResourceVersion"),H$d.enable=function(H$a,H$b,H$c){void 0===H$c&&(H$c=2),laya.net.ResourceVersion.type=H$c,H$x.loader.load(H$a,H$s.create(null,H$d.onManifestLoaded,[H$b]),null,"json"),H$G.customFormat=H$d.addVersionPrefix},H$d.onManifestLoaded=function(H$a,H$b){H$d.manifest=H$b,H$a.run(),H$b||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},H$d.addVersionPrefix=function(H$a){return H$d.manifest&&H$d.manifest[H$a]?2==H$d.type?H$d.manifest[H$a]:H$d.manifest[H$a]+"/"+H$a:H$a},H$d.FOLDER_VERSION=1,H$d.FILENAME_VERSION=2,H$d.manifest=null,H$d.type=1}(),function(){function H$a(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}H$k(H$a,"laya.net.TTFLoader");var H$b=H$a.prototype;return H$b.load=function(H$a){var H$b=(this._url=H$a).split(".ttf")[0].split("/");this.fontName=H$b[H$b.length-1],H$M.window.conch?this._loadConch():H$M.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},H$b._loadConch=function(){this._http=new H$ga,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},H$b._onHttpLoaded=function(H$a){H$M.window.conch.setFontFaceFromBuffer(this.fontName,H$a),this._clearHttp(),this._complete()},H$b._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},H$b._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},H$b._complete=function(){H$x.timer.clear(this,this._complete),H$x.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},H$b._checkComplete=function(){H$D.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},H$b._loadWithFontFace=function(){var H$a=new H$M.window.FontFace(this.fontName,"url('"+this._url+"')");H$M.window.document.fonts.add(H$a);var H$b=this;H$a.loaded.then(function(){H$b._complete()}),H$a.load()},H$b._createDiv=function(){this._div=H$M.createElement("div"),this._div.innerHTML="laya";var H$a=this._div.style;H$a.fontFamily=this.fontName,H$a.position="absolute",H$a.left="-100px",H$a.top="-100px",H$M.document.body.appendChild(this._div)},H$b._loadWithCSS=function(){var H$a=this,H$b=H$M.createElement("style");H$b.type="text/css",H$M.document.body.appendChild(H$b),H$b.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=H$D.measureText("LayaTTFFont",this._fontTxt).width;var H$c=this;H$b.onload=function(){H$x.timer.once(1e4,H$c,H$a._complete)},H$x.timer.loop(20,this,this._checkComplete),this._createDiv()},H$a._testString="LayaTTFFont",H$a}()),H$G=function(){function H$d(H$a){this._url=null,this._path=null,this._url=H$d.formatURL(H$a),this._path=H$d.getPath(H$a)}H$k(H$d,"laya.net.URL");var H$a=H$d.prototype;return H$o(0,H$a,"path",function(){return this._path}),H$o(0,H$a,"url",function(){return this._url}),H$d.formatURL=function(H$a,H$b){if(!H$a)return"null path";if(0<H$a.indexOf(":"))return H$a;null!=H$d.customFormat&&(H$a=H$d.customFormat(H$a,H$b));var H$c=H$a.charAt(0);if("."===H$c)return H$d.formatRelativePath((H$b||H$d.basePath)+H$a);if("~"===H$c)return H$d.rootPath+H$a.substring(1);if("d"===H$c){if(0===H$a.indexOf("data:image"))return H$a}else if("/"===H$c)return H$a;return(H$b||H$d.basePath)+H$a},H$d.formatRelativePath=function(H$a){for(var H$b=H$a.split("/"),H$c=0,H$d=H$b.length;H$c<H$d;H$c++)".."==H$b[H$c]&&(H$b.splice(H$c-1,2),H$c-=2);return H$b.join("/")},H$d.isAbsolute=function(H$a){return 0<H$a.indexOf(":")||"/"==H$a.charAt(0)},H$d.getPath=function(H$a){var H$b=H$a.lastIndexOf("/");return 0<H$b?H$a.substr(0,H$b+1):""},H$d.getFileName=function(H$a){var H$b=H$a.lastIndexOf("/");return 0<H$b?H$a.substr(H$b+1):H$a},H$d.version={},H$d.basePath="",H$d.rootPath="",H$d.customFormat=function(H$a){var H$b=H$d.version[H$a];return!H$H.isConchApp&&H$b&&(H$a+="?v="+H$b),H$a},H$d}(),H$H=function(){function H$e(H$a,H$b){this._timeId=0;var H$c=H$e._mainCanvas.source.style;H$c.position="absolute",H$c.top=H$c.left="0px",H$c.background="#000000",H$e._mainCanvas.source.id="layaCanvas";var H$d=laya.renders.Render.isWebGL;H$e._mainCanvas.source.width=H$a,H$e._mainCanvas.source.height=H$b,H$d&&H$e.WebGL.init(H$e._mainCanvas,H$a,H$b),H$M.container.appendChild(H$e._mainCanvas.source),(H$e._context=new H$I(H$a,H$b,H$d?null:H$e._mainCanvas)).ctx.setIsMainContext(),H$M.window.requestAnimationFrame(function H$a(H$b){H$M.window.requestAnimationFrame(H$a);H$x.stage._loop()}),H$x.stage.on("visibilitychange",this,this._onVisibilitychange)}H$k(H$e,"laya.renders.Render");var H$a=H$e.prototype;return H$a._onVisibilitychange=function(){H$x.stage.isVisibility?0!=this._timeId&&H$M.window.clearInterval(this._timeId):this._timeId=H$M.window.setInterval(this._enterFrame,1e3)},H$a._enterFrame=function(H$a){H$x.stage._loop()},H$o(1,H$e,"context",function(){return H$e._context}),H$o(1,H$e,"canvas",function(){return H$e._mainCanvas.source}),H$e._context=null,H$e._mainCanvas=null,H$e.WebGL=null,H$e.isConchNode=!1,H$e.isConchApp=!1,H$e.isConchWebGL=!1,H$e.isWebGL=!1,H$e.is3DMode=!1,H$e.optimizeTextureMemory=function(H$a,H$b){return!0},H$e.__init$=function(){H$g.ConchRenderType=H$g.ConchRenderType||1,H$g.ConchRenderType|=H$g.conch?4:0,H$e.isConchNode=5==(5&H$g.ConchRenderType),H$e.isConchApp=4==(4&H$g.ConchRenderType),H$e.isConchWebGL=6==H$g.ConchRenderType},H$e}(),H$I=function(){function H$g(H$a,H$b,H$c){this.x=0,this.y=0,this._drawTexture=function(H$a,H$b,H$c){H$c[0].loaded&&this.ctx.drawTexture(H$c[0],H$c[1],H$c[2],H$c[3],H$c[4],H$a,H$b)},this._fillTexture=function(H$a,H$b,H$c){H$c[0].loaded&&this.ctx.fillTexture(H$c[0],H$c[1]+H$a,H$c[2]+H$b,H$c[3],H$c[4],H$c[5],H$c[6],H$c[7])},this._drawTextureWithTransform=function(H$a,H$b,H$c){H$c[0].loaded&&this.ctx.drawTextureWithTransform(H$c[0],H$c[1],H$c[2],H$c[3],H$c[4],H$c[5],H$a,H$b,H$c[6])},this._fillQuadrangle=function(H$a,H$b,H$c){this.ctx.fillQuadrangle(H$c[0],H$c[1],H$c[2],H$c[3],H$c[4])},this._drawRect=function(H$a,H$b,H$c){var H$d=this.ctx;null!=H$c[4]&&(H$d.fillStyle=H$c[4],H$d.fillRect(H$a+H$c[0],H$b+H$c[1],H$c[2],H$c[3],null)),null!=H$c[5]&&(H$d.strokeStyle=H$c[5],H$d.lineWidth=H$c[6],H$d.strokeRect(H$a+H$c[0],H$b+H$c[1],H$c[2],H$c[3],H$c[6]))},this._drawPie=function(H$a,H$b,H$c){var H$d=this.ctx;H$H.isWebGL&&H$d.setPathId(H$c[8]),H$d.beginPath(),H$H.isWebGL?(H$d.movePath(H$c[0]+H$a,H$c[1]+H$b),H$d.moveTo(0,0)):H$d.moveTo(H$a+H$c[0],H$b+H$c[1]),H$d.arc(H$a+H$c[0],H$b+H$c[1],H$c[2],H$c[3],H$c[4]),H$d.closePath(),this._fillAndStroke(H$c[5],H$c[6],H$c[7],!0)},this._clipRect=function(H$a,H$b,H$c){this.ctx.clipRect(H$a+H$c[0],H$b+H$c[1],H$c[2],H$c[3])},this._fillRect=function(H$a,H$b,H$c){this.ctx.fillRect(H$a+H$c[0],H$b+H$c[1],H$c[2],H$c[3],H$c[4])},this._drawCircle=function(H$a,H$b,H$c){var H$d=this.ctx;H$H.isWebGL&&H$d.setPathId(H$c[6]),H$V.drawCall++,H$d.beginPath(),H$H.isWebGL&&H$d.movePath(H$c[0]+H$a,H$c[1]+H$b),H$d.arc(H$c[0]+H$a,H$c[1]+H$b,H$c[2],0,H$g.PI2),H$d.closePath(),this._fillAndStroke(H$c[3],H$c[4],H$c[5],!0)},this._fillCircle=function(H$a,H$b,H$c){H$V.drawCall++;var H$d=this.ctx;H$d.beginPath(),H$d.fillStyle=H$c[3],H$d.arc(H$c[0]+H$a,H$c[1]+H$b,H$c[2],0,H$g.PI2),H$d.fill()},this._setShader=function(H$a,H$b,H$c){this.ctx.setShader(H$c[0])},this._drawLine=function(H$a,H$b,H$c){var H$d=this.ctx;H$H.isWebGL&&H$d.setPathId(H$c[6]),H$d.beginPath(),H$d.strokeStyle=H$c[4],H$d.lineWidth=H$c[5],H$H.isWebGL?(H$d.movePath(H$a,H$b),H$d.moveTo(H$c[0],H$c[1]),H$d.lineTo(H$c[2],H$c[3])):(H$d.moveTo(H$a+H$c[0],H$b+H$c[1]),H$d.lineTo(H$a+H$c[2],H$b+H$c[3])),H$d.stroke()},this._drawLines=function(H$a,H$b,H$c){var H$d=this.ctx;H$H.isWebGL&&H$d.setPathId(H$c[5]),H$d.beginPath(),H$a+=H$c[0],H$b+=H$c[1],H$H.isWebGL&&H$d.movePath(H$a,H$b),H$d.strokeStyle=H$c[3],H$d.lineWidth=H$c[4];var H$e=H$c[2],H$f=2,H$g=H$e.length;if(H$H.isWebGL)for(H$d.moveTo(H$e[0],H$e[1]);H$f<H$g;)H$d.lineTo(H$e[H$f++],H$e[H$f++]);else for(H$d.moveTo(H$a+H$e[0],H$b+H$e[1]);H$f<H$g;)H$d.lineTo(H$a+H$e[H$f++],H$b+H$e[H$f++]);H$d.stroke()},this._drawLinesWebGL=function(H$a,H$b,H$c){this.ctx.drawLines(H$a+this.x+H$c[0],H$b+this.y+H$c[1],H$c[2],H$c[3],H$c[4])},this._drawCurves=function(H$a,H$b,H$c){this.ctx.drawCurves(H$a,H$b,H$c)},this._draw=function(H$a,H$b,H$c){H$c[0].call(null,this,H$a,H$b)},this._transformByMatrix=function(H$a,H$b,H$c){this.ctx.transformByMatrix(H$c[0])},this._setTransform=function(H$a,H$b,H$c){this.ctx.setTransform(H$c[0],H$c[1],H$c[2],H$c[3],H$c[4],H$c[5])},this._setTransformByMatrix=function(H$a,H$b,H$c){this.ctx.setTransformByMatrix(H$c[0])},this._save=function(H$a,H$b,H$c){this.ctx.save()},this._restore=function(H$a,H$b,H$c){this.ctx.restore()},this._translate=function(H$a,H$b,H$c){this.ctx.translate(H$c[0],H$c[1])},this._transform=function(H$a,H$b,H$c){this.ctx.translate(H$c[1]+H$a,H$c[2]+H$b);var H$d=H$c[0];this.ctx.transform(H$d.a,H$d.b,H$d.c,H$d.d,H$d.tx,H$d.ty),this.ctx.translate(-H$a-H$c[1],-H$b-H$c[2])},this._rotate=function(H$a,H$b,H$c){this.ctx.translate(H$c[1]+H$a,H$c[2]+H$b),this.ctx.rotate(H$c[0]),this.ctx.translate(-H$a-H$c[1],-H$b-H$c[2])},this._scale=function(H$a,H$b,H$c){this.ctx.translate(H$c[2]+H$a,H$c[3]+H$b),this.ctx.scale(H$c[0],H$c[1]),this.ctx.translate(-H$a-H$c[2],-H$b-H$c[3])},this._alpha=function(H$a,H$b,H$c){this.ctx.globalAlpha*=H$c[0]},this._setAlpha=function(H$a,H$b,H$c){this.ctx.globalAlpha=H$c[0]},this._fillText=function(H$a,H$b,H$c){this.ctx.fillText(H$c[0],H$c[1]+H$a,H$c[2]+H$b,H$c[3],H$c[4],H$c[5])},this._strokeText=function(H$a,H$b,H$c){this.ctx.strokeText(H$c[0],H$c[1]+H$a,H$c[2]+H$b,H$c[3],H$c[4],H$c[5],H$c[6])},this._fillBorderText=function(H$a,H$b,H$c){this.ctx.fillBorderText(H$c[0],H$c[1]+H$a,H$c[2]+H$b,H$c[3],H$c[4],H$c[5],H$c[6],H$c[7])},this._blendMode=function(H$a,H$b,H$c){this.ctx.globalCompositeOperation=H$c[0]},this._beginClip=function(H$a,H$b,H$c){this.ctx.beginClip&&this.ctx.beginClip(H$a+H$c[0],H$b+H$c[1],H$c[2],H$c[3])},this._setIBVB=function(H$a,H$b,H$c){this.ctx.setIBVB(H$c[0]+H$a,H$c[1]+H$b,H$c[2],H$c[3],H$c[4],H$c[5],H$c[6],H$c[7])},this._fillTrangles=function(H$a,H$b,H$c){this.ctx.fillTrangles(H$c[0],H$c[1]+H$a,H$c[2]+H$b,H$c[3],H$c[4])},this._drawPath=function(H$a,H$b,H$c){var H$d=this.ctx;H$H.isWebGL&&H$d.setPathId(-1),H$d.beginPath(),H$a+=H$c[0],H$b+=H$c[1],H$H.isWebGL&&H$d.movePath(H$a,H$b);for(var H$e=H$c[2],H$f=0,H$g=H$e.length;H$f<H$g;H$f++){var H$h=H$e[H$f];switch(H$h[0]){case"moveTo":H$H.isWebGL?H$d.moveTo(H$h[1],H$h[2]):H$d.moveTo(H$a+H$h[1],H$b+H$h[2]);break;case"lineTo":H$H.isWebGL?H$d.lineTo(H$h[1],H$h[2]):H$d.lineTo(H$a+H$h[1],H$b+H$h[2]);break;case"arcTo":H$H.isWebGL?H$d.arcTo(H$h[1],H$h[2],H$h[3],H$h[4],H$h[5]):H$d.arcTo(H$a+H$h[1],H$b+H$h[2],H$a+H$h[3],H$b+H$h[4],H$h[5]);break;case"closePath":H$d.closePath()}}var H$i=H$c[3];null!=H$i&&(H$d.fillStyle=H$i.fillStyle,H$d.fill());var H$j=H$c[4];null!=H$j&&(H$d.strokeStyle=H$j.strokeStyle,H$d.lineWidth=H$j.lineWidth||1,H$d.lineJoin=H$j.lineJoin,H$d.lineCap=H$j.lineCap,H$d.miterLimit=H$j.miterLimit,H$d.stroke())},this.drawPoly=function(H$a,H$b,H$c){this.ctx.drawPoly(H$a+this.x+H$c[0],H$b+this.y+H$c[1],H$c[2],H$c[3],H$c[4],H$c[5],H$c[6])},this._drawPoly=function(H$a,H$b,H$c){var H$d=this.ctx,H$e=H$c[2],H$f=2,H$g=H$e.length;if(H$H.isWebGL)for(H$d.setPathId(H$c[6]),H$d.beginPath(),H$a+=H$c[0],H$b+=H$c[1],H$d.movePath(H$a,H$b),H$d.moveTo(H$e[0],H$e[1]);H$f<H$g;)H$d.lineTo(H$e[H$f++],H$e[H$f++]);else for(H$d.beginPath(),H$a+=H$c[0],H$b+=H$c[1],H$d.moveTo(H$a+H$e[0],H$b+H$e[1]);H$f<H$g;)H$d.lineTo(H$a+H$e[H$f++],H$b+H$e[H$f++]);H$d.closePath(),this._fillAndStroke(H$c[3],H$c[4],H$c[5],H$c[7])},this._drawSkin=function(H$a,H$b,H$c){var H$d=H$c[0];if(H$d){var H$e=this.ctx;H$d.render(H$e,H$a,H$b)}},this._drawParticle=function(H$a,H$b,H$c){this.ctx.drawParticle(H$a+this.x,H$b+this.y,H$c[0])},this._setFilters=function(H$a,H$b,H$c){this.ctx.setFilters(H$c)},H$c?this.ctx=H$c.getContext("2d"):(H$c=H$ta.create("3D"),this.ctx=H$D.createWebGLContext2D(H$c),H$c._setContext(this.ctx)),H$c.size(H$a,H$b),this.canvas=H$c}H$k(H$g,"laya.renders.RenderContext");var H$a=H$g.prototype;return H$a.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},H$a.drawTexture=function(H$a,H$b,H$c,H$d,H$e){H$a.loaded&&this.ctx.drawTexture(H$a,H$b,H$c,H$d,H$e,this.x,this.y)},H$a._drawTextures=function(H$a,H$b,H$c){H$c[0].loaded&&this.ctx.drawTextures(H$c[0],H$c[1],H$a+this.x,H$b+this.y)},H$a.drawTextureWithTransform=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){H$a.loaded&&this.ctx.drawTextureWithTransform(H$a,H$b,H$c,H$d,H$e,H$f,this.x,this.y,H$g)},H$a.fillQuadrangle=function(H$a,H$b,H$c,H$d,H$e){this.ctx.fillQuadrangle(H$a,H$b,H$c,H$d,H$e)},H$a.drawCanvas=function(H$a,H$b,H$c,H$d,H$e){this.ctx.drawCanvas(H$a,H$b+this.x,H$c+this.y,H$d,H$e)},H$a.drawRect=function(H$a,H$b,H$c,H$d,H$e,H$f){void 0===H$f&&(H$f=1);var H$g=this.ctx;H$g.strokeStyle=H$e,H$g.lineWidth=H$f,H$g.strokeRect(H$a+this.x,H$b+this.y,H$c,H$d,H$f)},H$a._fillAndStroke=function(H$a,H$b,H$c,H$d){void 0===H$d&&(H$d=!1);var H$e=this.ctx;null!=H$a&&(H$e.fillStyle=H$a,H$H.isWebGL?H$e.fill(H$d):H$e.fill()),null!=H$b&&0<H$c&&(H$e.strokeStyle=H$b,H$e.lineWidth=H$c,H$e.stroke())},H$a.clipRect=function(H$a,H$b,H$c,H$d){this.ctx.clipRect(H$a+this.x,H$b+this.y,H$c,H$d)},H$a.fillRect=function(H$a,H$b,H$c,H$d,H$e){this.ctx.fillRect(H$a+this.x,H$b+this.y,H$c,H$d,H$e)},H$a.drawCircle=function(H$a,H$b,H$c,H$d,H$e){void 0===H$e&&(H$e=1),H$V.drawCall++;var H$f=this.ctx;H$f.beginPath(),H$f.strokeStyle=H$d,H$f.lineWidth=H$e,H$f.arc(H$a+this.x,H$b+this.y,H$c,0,H$g.PI2),H$f.stroke()},H$a.drawTriangles=function(H$a,H$b,H$c){if(H$H.isWebGL)this.ctx.drawTriangles(H$c[0],H$a+H$c[1],H$b+H$c[2],H$c[3],H$c[4],H$c[5],H$c[6],H$c[7],H$c[8],H$c[9]);else{var H$d=H$c[5],H$e=0,H$f=H$d.length,H$g=this.ctx;for(H$e=0;H$e<H$f;H$e+=3){var H$h=2*H$d[H$e],H$i=2*H$d[H$e+1],H$j=2*H$d[H$e+2];H$g.drawTriangle(H$c[0],H$c[3],H$c[4],H$h,H$i,H$j,H$c[6],!0)}}},H$a.fillCircle=function(H$a,H$b,H$c,H$d){H$V.drawCall++;var H$e=this.ctx;H$e.beginPath(),H$e.fillStyle=H$d,H$e.arc(H$a+this.x,H$b+this.y,H$c,0,H$g.PI2),H$e.fill()},H$a.setShader=function(H$a){this.ctx.setShader(H$a)},H$a.drawLine=function(H$a,H$b,H$c,H$d,H$e,H$f){void 0===H$f&&(H$f=1);var H$g=this.ctx;H$g.beginPath(),H$g.strokeStyle=H$e,H$g.lineWidth=H$f,H$g.moveTo(this.x+H$a,this.y+H$b),H$g.lineTo(this.x+H$c,this.y+H$d),H$g.stroke()},H$a.clear=function(){this.ctx.clear()},H$a.transformByMatrix=function(H$a){this.ctx.transformByMatrix(H$a)},H$a.setTransform=function(H$a,H$b,H$c,H$d,H$e,H$f){this.ctx.setTransform(H$a,H$b,H$c,H$d,H$e,H$f)},H$a.setTransformByMatrix=function(H$a){this.ctx.setTransformByMatrix(H$a)},H$a.save=function(){this.ctx.save()},H$a.restore=function(){this.ctx.restore()},H$a.translate=function(H$a,H$b){this.ctx.translate(H$a,H$b)},H$a.transform=function(H$a,H$b,H$c,H$d,H$e,H$f){this.ctx.transform(H$a,H$b,H$c,H$d,H$e,H$f)},H$a.rotate=function(H$a){this.ctx.rotate(H$a)},H$a.scale=function(H$a,H$b){this.ctx.scale(H$a,H$b)},H$a.alpha=function(H$a){this.ctx.globalAlpha*=H$a},H$a.setAlpha=function(H$a){this.ctx.globalAlpha=H$a},H$a.fillWords=function(H$a,H$b,H$c,H$d,H$e,H$f){void 0===H$f&&(H$f=0),this.ctx.fillWords(H$a,H$b,H$c,H$d,H$e,H$f)},H$a.fillBorderWords=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){this.ctx.fillBorderWords(H$a,H$b,H$c,H$d,H$e,H$f,H$g)},H$a.fillText=function(H$a,H$b,H$c,H$d,H$e,H$f){this.ctx.fillText(H$a,H$b+this.x,H$c+this.y,H$d,H$e,H$f)},H$a.strokeText=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){this.ctx.strokeText(H$a,H$b+this.x,H$c+this.y,H$d,H$e,H$f,H$g)},H$a.blendMode=function(H$a){this.ctx.globalCompositeOperation=H$a},H$a.flush=function(){this.ctx.flush&&this.ctx.flush()},H$a.addRenderObject=function(H$a){this.ctx.addRenderObject(H$a)},H$a.beginClip=function(H$a,H$b,H$c,H$d){this.ctx.beginClip&&this.ctx.beginClip(H$a,H$b,H$c,H$d)},H$a.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},H$a.fillTrangles=function(H$a,H$b,H$c){this.ctx.fillTrangles(H$c[0],H$c[1],H$c[2],H$c[3],4<H$c.length?H$c[4]:null)},H$g.PI2=2*Math.PI,H$g}(),H$J=function(){function H$g(H$a,H$b){switch(this._next=H$b||H$g.NORENDER,H$a){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=H$r._filter);case 69905:return void(this._fun=H$g._initRenderFun)}this.onCreate(H$a)}H$k(H$g,"laya.renders.RenderSprite");var H$a=H$g.prototype;return H$a.onCreate=function(H$a){},H$a._style=function(H$a,H$b,H$c,H$d){H$a._style.render(H$a,H$b,H$c,H$d);var H$e=this._next;H$e._fun.call(H$e,H$a,H$b,H$c,H$d)},H$a._no=function(H$a,H$b,H$c,H$d){},H$a._custom=function(H$a,H$b,H$c,H$d){H$a.customRender(H$b,H$c,H$d);var H$e=H$a._style._tf;this._next._fun.call(this._next,H$a,H$b,H$c-H$e.translateX,H$d-H$e.translateY)},H$a._clip=function(H$a,H$b,H$c,H$d){var H$e=this._next;if(H$e!=H$g.NORENDER){var H$f=H$a._style.scrollRect;H$b.ctx.save(),H$b.ctx.clipRect(H$c,H$d,H$f.width,H$f.height),H$e._fun.call(H$e,H$a,H$b,H$c-H$f.x,H$d-H$f.y),H$b.ctx.restore()}},H$a._blend=function(H$a,H$b,H$c,H$d){var H$e=H$a._style;H$e.blendMode&&(H$b.ctx.globalCompositeOperation=H$e.blendMode);var H$f=this._next;H$f._fun.call(H$f,H$a,H$b,H$c,H$d),H$b.ctx.globalCompositeOperation="source-over"},H$a._mask=function(H$a,H$b,H$c,H$d){var H$e=this._next;H$e._fun.call(H$e,H$a,H$b,H$c,H$d);var H$f=H$a.mask;H$f&&(H$b.ctx.globalCompositeOperation="destination-in",(0<H$f.numChildren||!H$f.graphics._isOnlyOne())&&(H$f.cacheAsBitmap=!0),H$f.render(H$b,H$c-H$a.pivotX,H$d-H$a.pivotY)),H$b.ctx.globalCompositeOperation="source-over"},H$a._graphics=function(H$a,H$b,H$c,H$d){var H$e=H$a._style._tf;H$a._graphics&&H$a._graphics._render(H$a,H$b,H$c-H$e.translateX,H$d-H$e.translateY);var H$f=this._next;H$f._fun.call(H$f,H$a,H$b,H$c,H$d)},H$a._image=function(H$a,H$b,H$c,H$d){var H$e=H$a._style;H$b.ctx.drawTexture2(H$c,H$d,H$e._tf.translateX,H$e._tf.translateY,H$a.transform,H$e.alpha,H$e.blendMode,H$a._graphics._one)},H$a._image2=function(H$a,H$b,H$c,H$d){var H$e=H$a._style._tf;H$b.ctx.drawTexture2(H$c,H$d,H$e.translateX,H$e.translateY,H$a.transform,1,null,H$a._graphics._one)},H$a._alpha=function(H$a,H$b,H$c,H$d){var H$e;if(.01<(H$e=H$a._style.alpha)||H$a._needRepaint()){var H$f=H$b.ctx.globalAlpha;H$b.ctx.globalAlpha*=H$e;var H$g=this._next;H$g._fun.call(H$g,H$a,H$b,H$c,H$d),H$b.ctx.globalAlpha=H$f}},H$a._transform=function(H$a,H$b,H$c,H$d){var H$e=H$a.transform,H$f=this._next;H$e&&H$f!=H$g.NORENDER?(H$b.save(),H$b.transform(H$e.a,H$e.b,H$e.c,H$e.d,H$e.tx+H$c,H$e.ty+H$d),H$f._fun.call(H$f,H$a,H$b,0,0),H$b.restore()):H$f._fun.call(H$f,H$a,H$b,H$c,H$d)},H$a._childs=function(H$a,H$b,H$c,H$d){var H$e=H$a._style,H$f=H$e._tf;if(H$c=H$c-H$f.translateX+H$e.paddingLeft,H$d=H$d-H$f.translateY+H$e.paddingTop,H$e._calculation){var H$g=H$a._getWords();if(H$g){var H$h=H$e;H$h&&(H$h.stroke?H$b.fillBorderWords(H$g,H$c,H$d,H$h.font,H$h.color,H$h.strokeColor,H$h.stroke):H$b.fillWords(H$g,H$c,H$d,H$h.font,H$h.color,"none"!=H$h.textDecoration&&H$h.underLine?1:0))}}var H$i,H$j=H$a._childs,H$k=H$j.length;if(H$a.viewport||H$a.optimizeScrollRect&&H$a._style.scrollRect){var H$l=H$a.viewport||H$a._style.scrollRect,H$m=H$l.x,H$n=H$l.y,H$o=H$l.right,H$p=H$l.bottom,H$q=NaN,H$r=NaN;for(H$s=0;H$s<H$k;++H$s)(H$i=H$j[H$s]).visible&&(H$q=H$i._x)<H$o&&H$q+H$i.width>H$m&&(H$r=H$i._y)<H$p&&H$r+H$i.height>H$n&&H$i.render(H$b,H$c,H$d)}else for(var H$s=0;H$s<H$k;++H$s)(H$i=H$j[H$s])._style.visible&&H$i.render(H$b,H$c,H$d)},H$a._canvas=function(H$a,H$b,H$c,H$d){var H$e=H$a._$P.cacheCanvas;if(H$e){"bitmap"===H$e.type?H$V.canvasBitmap++:H$V.canvasNormal++;var H$f=H$e.ctx;if(H$a._needRepaint()||!H$f)this._canvas_repaint(H$a,H$b,H$c,H$d);else{var H$g=H$e._cacheRec;H$b.drawCanvas(H$f.canvas,H$c+H$g.x,H$d+H$g.y,H$g.width,H$g.height)}}else this._next._fun.call(this._next,H$a,H$b,H$c,H$d)},H$a._canvas_repaint=function(H$a,H$b,H$c,H$d){var H$e=H$a._$P.cacheCanvas,H$f=this._next;if(H$e){var H$g,H$h,H$i,H$j,H$k=H$e.ctx,H$l=H$a._needRepaint()||!H$k,H$m=H$e.type;if("bitmap"===H$m?H$V.canvasBitmap++:H$V.canvasNormal++,H$l){var H$n,H$o;H$e._cacheRec||(H$e._cacheRec=new H$z),H$H.isWebGL&&"bitmap"!==H$m?H$e._cacheRec.setTo(-H$a.pivotX,-H$a.pivotY,1,1):((H$j=H$a.getSelfBounds()).x=H$j.x-H$a.pivotX,H$j.y=H$j.y-H$a.pivotY,H$j.x=H$j.x-16,H$j.y=H$j.y-16,H$j.width=H$j.width+32,H$j.height=H$j.height+32,H$j.x=Math.floor(H$j.x+H$c)-H$c,H$j.y=Math.floor(H$j.y+H$d)-H$d,H$j.width=Math.floor(H$j.width),H$j.height=Math.floor(H$j.height),H$e._cacheRec.copyFrom(H$j)),H$j=H$e._cacheRec;var H$p,H$q=H$H.isWebGL?1:H$M.pixelRatio*H$x.stage.clientScaleX,H$r=H$H.isWebGL?1:H$M.pixelRatio*H$x.stage.clientScaleY;if(!H$H.isWebGL){var H$s,H$t=1,H$u=1;for(H$s=H$a;H$s&&H$s!=H$x.stage;)H$t*=H$s.scaleX,H$u*=H$s.scaleY,H$s=H$s.parent;H$H.isWebGL?(H$t<1&&(H$q*=H$t),H$u<1&&(H$r*=H$u)):(1<H$t&&(H$q*=H$t),1<H$u&&(H$r*=H$u))}if(H$a.scrollRect){var H$v=H$a.scrollRect;H$j.x-=H$v.x,H$j.y-=H$v.y}if(H$n=H$j.width*H$q,H$o=H$j.height*H$r,H$h=H$j.x,H$i=H$j.y,H$H.isWebGL&&"bitmap"===H$m&&(2048<H$n||2048<H$o))return console.warn("cache bitmap size larger than 2048,cache ignored"),H$e.ctx&&(H$U.recover("RenderContext",H$e.ctx),H$e.ctx.canvas.size(0,0),H$e.ctx=null),void H$f._fun.call(H$f,H$a,H$b,H$c,H$d);if(H$k||(H$k=H$e.ctx=H$U.getItem("RenderContext")||new H$I(H$n,H$o,H$ta.create("AUTO"))),H$k.ctx.sprite=H$a,(H$g=H$k.canvas).clear(),(H$g.width!=H$n||H$g.height!=H$o)&&H$g.size(H$n,H$o),"bitmap"===H$m?H$g.context.asBitmap=!0:"normal"===H$m&&(H$g.context.asBitmap=!1),1!=H$q||1!=H$r){var H$w=H$k.ctx;H$w.save(),H$w.scale(H$q,H$r),!H$H.isConchWebGL&&H$H.isConchApp&&(H$p=H$a._$P.cf)&&H$w.setFilterMatrix&&H$w.setFilterMatrix(H$p._mat,H$p._alpha),H$f._fun.call(H$f,H$a,H$k,-H$h,-H$i),H$w.restore(),H$H.isConchApp&&!H$H.isConchWebGL||H$a._applyFilters()}else H$w=H$k.ctx,!H$H.isConchWebGL&&H$H.isConchApp&&(H$p=H$a._$P.cf)&&H$w.setFilterMatrix&&H$w.setFilterMatrix(H$p._mat,H$p._alpha),H$f._fun.call(H$f,H$a,H$k,-H$h,-H$i),H$H.isConchApp&&!H$H.isConchWebGL||H$a._applyFilters();H$a._$P.staticCache&&(H$e.reCache=!1),H$V.canvasReCache++}else H$h=(H$j=H$e._cacheRec).x,H$i=H$j.y,H$g=H$k.canvas;H$b.drawCanvas(H$g,H$c+H$h,H$d+H$i,H$j.width,H$j.height)}else H$f._fun.call(H$f,H$a,H$k,H$c,H$d)},H$g.__init__=function(){var H$a,H$b,H$c=0;for(H$b=H$D.createRenderSprite(69905,null),H$a=H$g.renders.length=4096,H$c=0;H$c<H$a;H$c++)H$g.renders[H$c]=H$b;H$g.renders[0]=H$D.createRenderSprite(0,null),function(H$a,H$b){for(var H$c=0,H$d=0;H$d<H$a.length;H$d++)H$c|=H$a[H$d],H$g.renders[H$c]=H$b}([1,512,4,2],new H$g(1,null)),H$g.renders[513]=H$D.createRenderSprite(513,null),H$g.renders[517]=new H$g(517,null)},H$g._initRenderFun=function(H$a,H$b,H$c,H$d){var H$e=H$a._renderType;(H$g.renders[H$e]=H$g._getTypeRender(H$e))._fun(H$a,H$b,H$c,H$d)},H$g._getTypeRender=function(H$a){for(var H$b=null,H$c=2048;1<H$c;)H$c&H$a&&(H$b=H$D.createRenderSprite(H$c,H$b)),H$c>>=1;return H$b},H$g.IMAGE=1,H$g.ALPHA=2,H$g.TRANSFORM=4,H$g.BLEND=8,H$g.CANVAS=16,H$g.FILTERS=32,H$g.MASK=64,H$g.CLIP=128,H$g.STYLE=256,H$g.GRAPHICS=512,H$g.CUSTOM=1024,H$g.CHILDS=2048,H$g.INIT=69905,H$g.renders=[],H$g.NORENDER=new H$g(0,null),H$g}(),H$K=function(){function H$h(){this._repaint=!1}H$k(H$h,"laya.resource.Context");var H$a=H$h.prototype;return H$a.replaceReset=function(){var H$a,H$b,H$c=0;for(H$a=H$h.replaceKeys.length,H$c=0;H$c<H$a;H$c++)H$b=H$h.replaceKeys[H$c],this[H$h.newKeys[H$c]]=this[H$b]},H$a.replaceResotre=function(){this.__restore(),this.__reset()},H$a.setIsMainContext=function(){},H$a.drawTextures=function(H$a,H$b,H$c,H$d){H$V.drawCall+=H$b.length/2;for(var H$e=H$a.width,H$f=H$a.height,H$g=0,H$h=H$b.length;H$g<H$h;H$g+=2)this.drawTexture(H$a,H$b[H$g],H$b[H$g+1],H$e,H$f,H$c,H$d)},H$a.drawCanvas=function(H$a,H$b,H$c,H$d,H$e){H$V.drawCall++,this.drawImage(H$a.source,H$b,H$c,H$d,H$e)},H$a.fillRect=function(H$a,H$b,H$c,H$d,H$e){H$V.drawCall++,H$e&&(this.fillStyle=H$e),this.__fillRect(H$a,H$b,H$c,H$d)},H$a.fillText=function(H$a,H$b,H$c,H$d,H$e,H$f){H$V.drawCall++,3<arguments.length&&null!=H$d&&(this.font=H$d,this.fillStyle=H$e,this.textAlign=H$f,this.textBaseline="top"),this.__fillText(H$a,H$b,H$c)},H$a.fillBorderText=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){H$V.drawCall++,this.font=H$d,this.fillStyle=H$e,this.textBaseline="top",this.strokeStyle=H$f,this.lineWidth=H$g,this.textAlign=H$h,this.__strokeText(H$a,H$b,H$c),this.__fillText(H$a,H$b,H$c)},H$a.strokeText=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){H$V.drawCall++,3<arguments.length&&null!=H$d&&(this.font=H$d,this.strokeStyle=H$e,this.lineWidth=H$f,this.textAlign=H$g,this.textBaseline="top"),this.__strokeText(H$a,H$b,H$c)},H$a.transformByMatrix=function(H$a){this.transform(H$a.a,H$a.b,H$a.c,H$a.d,H$a.tx,H$a.ty)},H$a.setTransformByMatrix=function(H$a){this.setTransform(H$a.a,H$a.b,H$a.c,H$a.d,H$a.tx,H$a.ty)},H$a.clipRect=function(H$a,H$b,H$c,H$d){H$V.drawCall++,this.beginPath(),this.rect(H$a,H$b,H$c,H$d),this.clip()},H$a.drawTexture=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){H$V.drawCall++;var H$h=H$a.uv,H$i=H$a.bitmap.width,H$j=H$a.bitmap.height;this.drawImage(H$a.source,H$h[0]*H$i,H$h[1]*H$j,(H$h[2]-H$h[0])*H$i,(H$h[5]-H$h[3])*H$j,H$b+H$f,H$c+H$g,H$d,H$e)},H$a.drawTextureWithTransform=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i){H$V.drawCall++;var H$j=H$a.uv,H$k=H$a.bitmap.width,H$l=H$a.bitmap.height;this.save(),1!=H$i&&(this.globalAlpha*=H$i),H$f?(this.transform(H$f.a,H$f.b,H$f.c,H$f.d,H$f.tx+H$g,H$f.ty+H$h),this.drawImage(H$a.source,H$j[0]*H$k,H$j[1]*H$l,(H$j[2]-H$j[0])*H$k,(H$j[5]-H$j[3])*H$l,H$b,H$c,H$d,H$e)):this.drawImage(H$a.source,H$j[0]*H$k,H$j[1]*H$l,(H$j[2]-H$j[0])*H$k,(H$j[5]-H$j[3])*H$l,H$b+H$g,H$c+H$h,H$d,H$e),this.restore()},H$a.drawTexture2=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){var H$i=H$h[0];if(H$i.loaded&&H$i.bitmap&&H$i.source){H$V.drawCall++;var H$j=1!==H$f;if(H$j){var H$k=this.globalAlpha;this.globalAlpha*=H$f}var H$l=H$i.uv,H$m=H$i.bitmap.width,H$n=H$i.bitmap.height;H$e?(this.save(),this.transform(H$e.a,H$e.b,H$e.c,H$e.d,H$e.tx+H$a,H$e.ty+H$b),this.drawImage(H$i.source,H$l[0]*H$m,H$l[1]*H$n,(H$l[2]-H$l[0])*H$m,(H$l[5]-H$l[3])*H$n,H$h[1]-H$c,H$h[2]-H$d,H$h[3],H$h[4]),this.restore()):this.drawImage(H$i.source,H$l[0]*H$m,H$l[1]*H$n,(H$l[2]-H$l[0])*H$m,(H$l[5]-H$l[3])*H$n,H$h[1]-H$c+H$a,H$h[2]-H$d+H$b,H$h[3],H$h[4]),H$j&&(this.globalAlpha=H$k)}},H$a.fillTexture=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){if(!H$h.pat){if(H$a.uv!=H$ka.DEF_UV){var H$i=new H$ta("2D");H$i.getContext("2d"),H$i.size(H$a.width,H$a.height),H$i.context.drawTexture(H$a,0,0,H$a.width,H$a.height,0,0),H$a=new H$ka(H$i)}H$h.pat=this.createPattern(H$a.bitmap.source,H$f)}var H$j=H$b,H$k=H$c,H$l=0,H$m=0;H$g&&(H$j+=H$g.x%H$a.width,H$k+=H$g.y%H$a.height,H$l-=H$g.x%H$a.width,H$m-=H$g.y%H$a.height),this.translate(H$j,H$k),this.fillRect(H$l,H$m,H$d,H$e,H$h.pat),this.translate(-H$j,-H$k)},H$a.drawTriangle=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){var H$i=H$a.bitmap,H$j=H$i.source,H$k=H$a.width,H$l=H$a.height,H$m=H$i.width,H$n=H$i.height,H$o=H$c[H$d]*H$m,H$p=H$c[H$e]*H$m,H$q=H$c[H$f]*H$m,H$r=H$c[H$d+1]*H$n,H$s=H$c[H$e+1]*H$n,H$t=H$c[H$f+1]*H$n,H$u=H$b[H$d],H$v=H$b[H$e],H$w=H$b[H$f],H$x=H$b[H$d+1],H$y=H$b[H$e+1],H$z=H$b[H$f+1];if(H$h){var H$A=(H$u+H$v+H$w)/3,H$B=(H$x+H$y+H$z)/3,H$C=H$u-H$A,H$D=H$x-H$B,H$E=Math.sqrt(H$C*H$C+H$D*H$D);H$u=H$A+H$C/H$E*(H$E+1),H$x=H$B+H$D/H$E*(H$E+1),H$D=H$y-H$B,H$v=H$A+(H$C=H$v-H$A)/(H$E=Math.sqrt(H$C*H$C+H$D*H$D))*(H$E+1),H$y=H$B+H$D/H$E*(H$E+1),H$D=H$z-H$B,H$w=H$A+(H$C=H$w-H$A)/(H$E=Math.sqrt(H$C*H$C+H$D*H$D))*(H$E+1),H$z=H$B+H$D/H$E*(H$E+1)}this.save(),H$g&&this.transform(H$g.a,H$g.b,H$g.c,H$g.d,H$g.tx,H$g.ty),this.beginPath(),this.moveTo(H$u,H$x),this.lineTo(H$v,H$y),this.lineTo(H$w,H$z),this.closePath(),this.clip();var H$F=1/(H$o*H$s+H$r*H$q+H$p*H$t-H$s*H$q-H$r*H$p-H$o*H$t),H$G=H$u*H$s+H$r*H$w+H$v*H$t-H$s*H$w-H$r*H$v-H$u*H$t,H$H=H$o*H$v+H$u*H$q+H$p*H$w-H$v*H$q-H$u*H$p-H$o*H$w,H$I=H$o*H$s*H$w+H$r*H$v*H$q+H$u*H$p*H$t-H$u*H$s*H$q-H$r*H$p*H$w-H$o*H$v*H$t,H$J=H$x*H$s+H$r*H$z+H$y*H$t-H$s*H$z-H$r*H$y-H$x*H$t,H$K=H$o*H$y+H$x*H$q+H$p*H$z-H$y*H$q-H$x*H$p-H$o*H$z,H$L=H$o*H$s*H$z+H$r*H$y*H$q+H$x*H$p*H$t-H$x*H$s*H$q-H$r*H$p*H$z-H$o*H$y*H$t;this.transform(H$G*H$F,H$J*H$F,H$H*H$F,H$K*H$F,H$I*H$F,H$L*H$F),this.drawImage(H$j,H$a.uv[0]*H$m,H$a.uv[1]*H$n,H$k,H$l,H$a.uv[0]*H$m,H$a.uv[1]*H$n,H$k,H$l),this.restore()},H$a.flush=function(){return 0},H$a.fillWords=function(H$a,H$b,H$c,H$d,H$e,H$f){H$d&&(this.font=H$d),H$e&&(this.fillStyle=H$e);this.textBaseline="top",this.textAlign="left";for(var H$g=0,H$h=H$a.length;H$g<H$h;H$g++){var H$i=H$a[H$g];if(this.__fillText(H$i.char,H$i.x+H$b,H$i.y+H$c),1===H$f){var H$j=H$i.height,H$k=.5*H$i.style.letterSpacing;H$k||(H$k=0),this.beginPath(),this.strokeStyle=H$e,this.lineWidth=1,this.moveTo(H$b+H$i.x-H$k+.5,H$c+H$i.y+H$j+.5),this.lineTo(H$b+H$i.x+H$i.width+H$k+.5,H$c+H$i.y+H$j+.5),this.stroke()}}},H$a.fillBorderWords=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){H$d&&(this.font=H$d),H$e&&(this.fillStyle=H$e),this.textBaseline="top",this.lineWidth=H$g,this.textAlign="left",this.strokeStyle=H$f;for(var H$h=0,H$i=H$a.length;H$h<H$i;H$h++){var H$j=H$a[H$h];this.__strokeText(H$j.char,H$j.x+H$b,H$j.y+H$c),this.__fillText(H$j.char,H$j.x+H$b,H$j.y+H$c)}},H$a.destroy=function(){this.canvas.width=this.canvas.height=0},H$a.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},H$a.drawCurves=function(H$a,H$b,H$c){this.beginPath(),this.strokeStyle=H$c[3],this.lineWidth=H$c[4];var H$d=H$c[2];H$a+=H$c[0],H$b+=H$c[1],this.moveTo(H$a+H$d[0],H$b+H$d[1]);for(var H$e=2,H$f=H$d.length;H$e<H$f;)this.quadraticCurveTo(H$a+H$d[H$e++],H$b+H$d[H$e++],H$a+H$d[H$e++],H$b+H$d[H$e++]);this.stroke()},H$h.__init__=function(H$b){var H$c=laya.resource.Context.prototype;if(!(H$b=H$b||CanvasRenderingContext2D.prototype).inited){H$b.inited=!0,H$b.__fillText=H$b.fillText,H$b.__fillRect=H$b.fillRect,H$b.__strokeText=H$b.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(H$a){H$b[H$a]=H$c[H$a]})}},H$h.replaceCanvasGetSet=function(H$a,H$b){var H$c=Object.getOwnPropertyDescriptor(H$a,H$b);if(!H$c||!H$c.configurable)return!1;var H$d,H$e={};for(H$d in H$c)"set"!=H$d&&(H$e[H$d]=H$c[H$d]);var H$f=H$c.set;return H$e.set=function(H$a){H$f.call(this,H$a);var H$b=this.getContext("2d");H$b&&"__reset"in H$b&&H$b.__reset()},Object.defineProperty(H$a,H$b,H$e),!0},H$h.replaceGetSet=function(H$a,H$b){var H$c=Object.getOwnPropertyDescriptor(H$a,H$b);if(!H$c||!H$c.configurable)return!1;var H$d,H$e={};for(H$d in H$c)"set"!=H$d&&(H$e[H$d]=H$c[H$d]);var H$f=H$c.set,H$g="___"+H$b+"__";return H$h.newKeys.push(H$g),H$e.set=function(H$a){H$a!=this[H$g]&&(this[H$g]=H$a,H$f.call(this,H$a))},Object.defineProperty(H$a,H$b,H$e),!0},H$h._default=new H$h,H$h.newKeys=[],H$i(H$h,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),H$h}(),H$L=function(){function H$f(H$a){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++H$f._uniqueIDCounter,this._name=H$a||"Content Manager",H$f._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,H$f._resourceManagers.push(this),this._resources=[],this._records={}}H$k(H$f,"laya.resource.ResourceManager");var H$a=H$f.prototype;return H$x.imps(H$a,{"laya.resource.IDispose":!0}),H$a.getResourceByIndex=function(H$a){return this._resources[H$a]},H$a.getResourcesLength=function(){return this._resources.length},H$a.addResource=function(H$a){return H$a.resourceManager&&H$a.resourceManager.removeResource(H$a),-1===this._resources.indexOf(H$a)&&((H$a._resourceManager=this)._resources.push(H$a),this.addRecord(H$a.uri,H$a.__className,H$a.memorySize),this.addSize(H$a.memorySize),!0)},H$a.removeResource=function(H$a){var H$b=this._resources.indexOf(H$a);return-1!==H$b&&(this._resources.splice(H$b,1),H$a._resourceManager=null,this._memorySize-=H$a.memorySize,this.addRecord(H$a.uri,H$a.__className,-H$a.memorySize),!0)},H$a.unload=function(){for(var H$a=this._resources.slice(0,this._resources.length),H$b=0;H$b<H$a.length;H$b++){H$a[H$b].destroy()}H$a.length=0},H$a.dispose=function(){if(this===H$f._systemResourceManager)throw new Error("systemResourceManager不能被释放！");H$f._resourceManagers.splice(H$f._resourceManagers.indexOf(this),1),H$f._isResourceManagersSorted=!1;for(var H$a=this._resources.slice(0,this._resources.length),H$b=0;H$b<H$a.length;H$b++){var H$c=H$a[H$b];H$c.resourceManager.removeResource(H$c),H$c.destroy()}H$a.length=0},H$a.addSize=function(H$a){H$a&&(this.autoRelease&&0<H$a&&this._memorySize+H$a>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=H$a)},H$a.addRecord=function(H$a,H$b,H$c){DEBUG&&H$c&&!H$a&&console.error(H$a,H$b,H$c),H$a&&(this._records.hasOwnProperty(H$b+"|"+H$a)||(this._records[H$b+"|"+H$a]=0),this._records[H$b+"|"+H$a]+=H$c,DEBUG&&this._records[H$b+"|"+H$a]<0&&console.error(H$a,H$b,this._records[H$b+"|"+H$a]))},H$a.garbageCollection=function(H$a){var H$b=this._resources;(H$b=H$b.slice()).sort(function(H$a,H$b){if(!H$a||!H$b)throw new Error("a或b不能为空！");return H$a.released&&H$b.released?0:H$a.released?1:H$b.released?-1:H$a._lastUseFrameCount-H$b._lastUseFrameCount});for(var H$c=H$V.loopCount,H$d=0,H$e=H$b.length;H$d<H$e;H$d++){var H$f=H$b[H$d];if(!(1<H$c-H$f._lastUseFrameCount))return void(this._memorySize>=H$a&&(this._isOverflow=!0));if(H$f.releaseResource(),this._memorySize<H$a)return void(this._isOverflow=!1)}},H$o(0,H$a,"id",function(){return this._id}),H$o(0,H$a,"name",function(){return this._name},function(H$a){!H$a&&""===H$a||this._name===H$a||(this._name=H$a,H$f._isResourceManagersSorted=!1)}),H$o(0,H$a,"memorySize",function(){return this._memorySize}),H$o(0,H$a,"records",function(){return this._records}),H$o(1,H$f,"systemResourceManager",function(){return H$f._systemResourceManager}),H$f.__init__=function(){H$f.currentResourceManager=H$f.systemResourceManager},H$f.getLoadedResourceManagerByIndex=function(H$a){return H$f._resourceManagers[H$a]},H$f.getLoadedResourceManagersCount=function(){return H$f._resourceManagers.length},H$f.recreateContentManagers=function(H$a){void 0===H$a&&(H$a=!1);for(var H$b=H$f.currentResourceManager,H$c=0;H$c<H$f._resourceManagers.length;H$c++){H$f.currentResourceManager=H$f._resourceManagers[H$c];for(var H$d=0;H$d<H$f.currentResourceManager._resources.length;H$d++)H$f.currentResourceManager._resources[H$d].releaseResource(H$a),H$f.currentResourceManager._resources[H$d].activeResource(H$a)}H$f.currentResourceManager=H$b},H$f.releaseContentManagers=function(H$a){void 0===H$a&&(H$a=!1);for(var H$b=H$f.currentResourceManager,H$c=0;H$c<H$f._resourceManagers.length;H$c++){H$f.currentResourceManager=H$f._resourceManagers[H$c];for(var H$d=0;H$d<H$f.currentResourceManager._resources.length;H$d++){var H$e=H$f.currentResourceManager._resources[H$d];!H$e.released&&H$e.releaseResource(H$a)}}H$f.currentResourceManager=H$b},H$f._uniqueIDCounter=0,H$f._isResourceManagersSorted=!1,H$f._resourceManagers=[],H$i(H$f,["_systemResourceManager",function(){return this._systemResourceManager=new H$f("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=H$f._systemResourceManager}]),H$f}(),H$M=(function(){function H$a(){}H$k(H$a,"laya.system.System"),H$a.changeDefinition=function(H$a,H$b){H$x[H$a]=H$b;var H$c=H$a+"=classObj";H$x._runScript(H$c)},H$a.__init__=function(){H$H.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function H$c(){}return H$k(H$c,"laya.utils.Browser"),H$o(1,H$c,"pixelRatio",function(){return H$c.__init__(),-1<H$c.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:H$D.getPixelRatio()}),H$o(1,H$c,"height",function(){return H$c.__init__(),(H$x.stage&&H$x.stage.canvasRotation?H$c.clientWidth:H$c.clientHeight)*H$c.pixelRatio}),H$o(1,H$c,"clientWidth",function(){return H$c.__init__(),H$c.window.innerWidth||H$c.document.body.clientWidth}),H$o(1,H$c,"window",function(){return H$c.__init__(),H$c._window}),H$o(1,H$c,"clientHeight",function(){return H$c.__init__(),H$c.window.innerHeight||H$c.document.body.clientHeight||H$c.document.documentElement.clientHeight}),H$o(1,H$c,"width",function(){return H$c.__init__(),(H$x.stage&&H$x.stage.canvasRotation?H$c.clientHeight:H$c.clientWidth)*H$c.pixelRatio}),H$o(1,H$c,"container",function(){return H$c.__init__(),H$c._container||((H$c._container=H$c.createElement("div")).id="layaContainer",H$c.document.body.appendChild(H$c._container)),H$c._container},function(H$a){H$c._container=H$a}),H$o(1,H$c,"document",function(){return H$c.__init__(),H$c._document}),H$c.__init__=function(){if(!H$c._window){H$c._window=H$D.getWindow(),H$c._document=H$c.window.document,H$c._window.addEventListener("message",function(H$a){laya.utils.Browser._onMessage(H$a)},!1),H$c.document.__createElement=H$c.document.createElement,H$g.requestAnimationFrame=H$g.requestAnimationFrame||H$g.webkitRequestAnimationFrame||H$g.mozRequestAnimationFrame||H$g.oRequestAnimationFrame||H$g.msRequestAnimationFrame||function(H$a){return H$g.setTimeout(H$a,1e3/60)};var H$a=H$g.document.body.style;H$a["-webkit-user-select"]="none",H$a["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",H$c.userAgent=H$c.window.navigator.userAgent,H$c.onIOS=!!(H$c.u=H$c.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),H$c.onMobile=-1<H$c.u.indexOf("Mobile"),H$c.onIPhone=-1<H$c.u.indexOf("iPhone"),H$c.onMac=-1<H$c.u.indexOf("Mac OS X"),H$c.onIPad=-1<H$c.u.indexOf("iPad"),H$c.onAndroid=-1<H$c.u.indexOf("Android")||-1<H$c.u.indexOf("Adr"),H$c.onWP=-1<H$c.u.indexOf("Windows Phone"),H$c.onQQBrowser=-1<H$c.u.indexOf("QQBrowser"),H$c.onMQQBrowser=-1<H$c.u.indexOf("MQQBrowser")||-1<H$c.u.indexOf("Mobile")&&-1<H$c.u.indexOf("QQ"),H$c.onIE=!!H$c.window.ActiveXObject||"ActiveXObject"in H$c.window,H$c.onWeiXin=-1<H$c.u.indexOf("MicroMessenger"),H$c.onPC=!H$c.onMobile,H$c.onSafari=-1<H$c.u.indexOf("Safari"),H$c.onFirefox=-1<H$c.u.indexOf("Firefox"),H$c.onEdge=-1<H$c.u.indexOf("Edge"),H$c.onMiniGame=-1<H$c.u.indexOf("MiniGame"),H$c.onLimixiu=-1<H$c.u.indexOf("limixiu"),H$c.httpProtocol="http:"==H$c.window.location.protocol,H$c.onMiniGame&&null==H$c.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),H$c.webAudioEnabled=!!(H$c.window.AudioContext||H$c.window.webkitAudioContext||H$c.window.mozAudioContext),H$c.soundType=H$c.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",H$ea=H$c.webAudioEnabled?H$fa:H$ca,H$c.webAudioEnabled&&H$fa.initWebAudio(),H$ca._initMusicAudio(),H$c.enableTouch="ontouchstart"in H$g||H$g.DocumentTouch&&H$b instanceof DocumentTouch,H$g.focus(),H$C._soundClass=H$ea,H$C._musicClass=H$ca,H$H._mainCanvas=H$H._mainCanvas||H$ta.create("2D"),H$c.canvas||(H$c.canvas=H$ta.create("2D"),H$c.context=H$c.canvas.getContext("2d"))}},H$c._onMessage=function(H$a){if(H$a.data&&"size"==H$a.data.name){if(H$c.window.innerWidth=H$a.data.width,H$c.window.innerHeight=H$a.data.height,H$c.window.__innerHeight=H$a.data.clientHeight,!H$c.document.createEvent)return void console.warn("no document.createEvent");var H$b=H$c.document.createEvent("HTMLEvents");return H$b.initEvent("resize",!1,!1),void H$c.window.dispatchEvent(H$b)}},H$c.createElement=function(H$a){return H$c.__init__(),H$c.document.__createElement(H$a)},H$c.getElementById=function(H$a){return H$c.__init__(),H$c.document.getElementById(H$a)},H$c.removeElement=function(H$a){H$a&&H$a.parentNode&&H$a.parentNode.removeChild(H$a)},H$c.now=function(){return H$D.now()},H$c._window=null,H$c._document=null,H$c._container=null,H$c.userAgent=null,H$c.u=null,H$c.onIOS=!1,H$c.onMac=!1,H$c.onMobile=!1,H$c.onIPhone=!1,H$c.onIPad=!1,H$c.onAndroid=!1,H$c.onWP=!1,H$c.onQQBrowser=!1,H$c.onMQQBrowser=!1,H$c.onSafari=!1,H$c.onFirefox=!1,H$c.onEdge=!1,H$c.onIE=!1,H$c.onWeiXin=!1,H$c.onMiniGame=!1,H$c.onLimixiu=!1,H$c.onPC=!1,H$c.httpProtocol=!1,H$c.webAudioEnabled=!1,H$c.soundType=null,H$c.enableTouch=!1,H$c.canvas=null,H$c.context=null,H$c.__init$=function(){},H$c}()),H$N=function(){function H$b(H$a){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,H$a?(this._u8d_=new Uint8Array(H$a),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}H$k(H$b,"laya.utils.Byte");var H$a=H$b.prototype;return H$a.___resizeBuffer=function(H$b){try{var H$a=new Uint8Array(H$b);null!=this._u8d_&&(this._u8d_.length<=H$b?H$a.set(this._u8d_):H$a.set(this._u8d_.subarray(0,H$b))),this._u8d_=H$a,this._d_=new DataView(H$a.buffer)}catch(H$a){throw"___resizeBuffer err:"+H$b}},H$a.getString=function(){return this.rUTF(this.getUint16())},H$a.getFloat32Array=function(H$a,H$b){var H$c=H$a+H$b;H$c=H$c>this._length?this._length:H$c;var H$d=new Float32Array(this._d_.buffer.slice(H$a,H$c));return this._pos_=H$c,H$d},H$a.getUint8Array=function(H$a,H$b){var H$c=H$a+H$b;H$c=H$c>this._length?this._length:H$c;var H$d=new Uint8Array(this._d_.buffer.slice(H$a,H$c));return this._pos_=H$c,H$d},H$a.getInt16Array=function(H$a,H$b){var H$c=H$a+H$b;H$c=H$c>this._length?this._length:H$c;var H$d=new Int16Array(this._d_.buffer.slice(H$a,H$c));return this._pos_=H$c,H$d},H$a.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var H$a=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,H$a},H$a.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var H$a=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,H$a},H$a.writeFloat32=function(H$a){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,H$a,this._xd_),this._pos_+=4},H$a.writeFloat64=function(H$a){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,H$a,this._xd_),this._pos_+=8},H$a.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var H$a=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,H$a},H$a.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var H$a=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,H$a},H$a.writeInt32=function(H$a){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,H$a,this._xd_),this._pos_+=4},H$a.writeUint32=function(H$a){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,H$a,this._xd_),this._pos_+=4},H$a.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var H$a=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,H$a},H$a.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var H$a=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,H$a},H$a.writeUint16=function(H$a){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,H$a,this._xd_),this._pos_+=2},H$a.writeInt16=function(H$a){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,H$a,this._xd_),this._pos_+=2},H$a.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},H$a.writeUint8=function(H$a){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,H$a),this._pos_++},H$a._getUInt8=function(H$a){return this._d_.getUint8(H$a)},H$a._getUint16=function(H$a){return this._d_.getUint16(H$a,this._xd_)},H$a._getMatrix=function(){return new H$E(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},H$a.rUTF=function(H$a){for(var H$b=[],H$c=this._pos_+H$a,H$d=0,H$e=0,H$f=0,H$g=String.fromCharCode,H$h=this._u8d_;this._pos_<H$c;)(H$d=H$h[this._pos_++])<128?0!=H$d&&H$b.push(H$g(H$d)):H$d<224?H$b.push(H$g((63&H$d)<<6|127&H$h[this._pos_++])):H$d<240?(H$e=H$h[this._pos_++],H$b.push(H$g((31&H$d)<<12|(127&H$e)<<6|127&H$h[this._pos_++]))):(H$e=H$h[this._pos_++],H$f=H$h[this._pos_++],H$b.push(H$g((15&H$d)<<18|(127&H$e)<<12|H$f<<6&127|127&H$h[this._pos_++]))),0;return H$b.join("")},H$a.getCustomString=function(H$a){for(var H$b=[],H$c=0,H$d=0,H$e=0,H$f=String.fromCharCode,H$g=this._u8d_;0<H$a;)if((H$d=H$g[this._pos_])<128)H$b.push(H$f(H$d)),this._pos_++,H$a--;else for(H$c=H$d-128,this._pos_++,H$a-=H$c;0<H$c;)H$d=H$g[this._pos_++],H$e=H$g[this._pos_++],H$b.push(H$f(H$e<<8|H$d)),H$c--;return H$b.join("")},H$a.clear=function(){this._pos_=0,this.length=0},H$a.__getBuffer=function(){return this._d_.buffer},H$a.writeUTFBytes=function(H$a){for(var H$b=0,H$c=(H$a+="").length;H$b<H$c;H$b++){var H$d=H$a.charCodeAt(H$b);H$d<=127?this.writeByte(H$d):H$d<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|H$d>>6,128|63&H$d],this._pos_),this._pos_+=2):H$d<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|H$d>>12,128|H$d>>6&63,128|63&H$d],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|H$d>>18,128|H$d>>12&63,128|H$d>>6&63,128|63&H$d],this._pos_),this._pos_+=4)}},H$a.writeUTFString=function(H$a){var H$b=this.pos;this.writeUint16(1),this.writeUTFBytes(H$a);var H$c=this.pos-H$b-2;if(65536<=H$c)throw"writeUTFString byte len more than 65536";this._d_.setUint16(H$b,H$c,this._xd_)},H$a.readUTFString=function(){return this.readUTFBytes(this.getUint16())},H$a.getUTFString=function(){return this.readUTFString()},H$a.readUTFBytes=function(H$a){if(void 0===H$a&&(H$a=-1),0==H$a)return"";var H$b=this.bytesAvailable;if(H$b<H$a)throw"readUTFBytes error - Out of bounds";return H$a=0<H$a?H$a:H$b,this.rUTF(H$a)},H$a.getUTFBytes=function(H$a){return void 0===H$a&&(H$a=-1),this.readUTFBytes(H$a)},H$a.writeByte=function(H$a){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,H$a),this._pos_+=1},H$a.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},H$a.getByte=function(){return this.readByte()},H$a.ensureWrite=function(H$a){this._length<H$a&&(this._length=H$a),this._allocated_<H$a&&(this.length=H$a)},H$a.writeArrayBuffer=function(H$a,H$b,H$c){if(void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0),H$b<0||H$c<0)throw"writeArrayBuffer error - Out of bounds";0==H$c&&(H$c=H$a.byteLength-H$b),this.ensureWrite(this._pos_+H$c);var H$d=new Uint8Array(H$a);this._u8d_.set(H$d.subarray(H$b,H$b+H$c),this._pos_),this._pos_+=H$c},H$o(0,H$a,"buffer",function(){var H$a=this._d_.buffer;return H$a.byteLength==this.length?H$a:H$a.slice(0,this.length)}),H$o(0,H$a,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(H$a){this._xd_="littleEndian"==H$a}),H$o(0,H$a,"length",function(){return this._length},function(H$a){this._allocated_<H$a?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(H$a,2*this._allocated_))):this._allocated_>H$a&&this.___resizeBuffer(this._allocated_=H$a),this._length=H$a}),H$o(0,H$a,"pos",function(){return this._pos_},function(H$a){this._pos_=H$a}),H$o(0,H$a,"bytesAvailable",function(){return this._length-this._pos_}),H$b.getSystemEndian=function(){if(!H$b._sysEndian){var H$a=new ArrayBuffer(2);new DataView(H$a).setInt16(0,256,!0),H$b._sysEndian=256===new Int16Array(H$a)[0]?"littleEndian":"bigEndian"}return H$b._sysEndian},H$b.BIG_ENDIAN="bigEndian",H$b.LITTLE_ENDIAN="littleEndian",H$b._sysEndian=null,H$b}(),H$O=function(){function H$e(){}return H$k(H$e,"laya.utils.CacheManager"),H$e.regCacheByFunction=function(H$a,H$b){var H$c;H$e.unRegCacheByFunction(H$a,H$b),H$c={tryDispose:H$a,getCacheList:H$b},H$e._cacheList.push(H$c)},H$e.unRegCacheByFunction=function(H$a,H$b){var H$c,H$d=0;for(H$c=H$e._cacheList.length,H$d=0;H$d<H$c;H$d++)if(H$e._cacheList[H$d].tryDispose==H$a&&H$e._cacheList[H$d].getCacheList==H$b)return void H$e._cacheList.splice(H$d,1)},H$e.forceDispose=function(){var H$a=0,H$b=H$e._cacheList.length;for(H$a=0;H$a<H$b;H$a++)H$e._cacheList[H$a].tryDispose(!0)},H$e.beginCheck=function(H$a){void 0===H$a&&(H$a=15e3),H$x.timer.loop(H$a,null,H$e._checkLoop)},H$e.stopCheck=function(){H$x.timer.clear(null,H$e._checkLoop)},H$e._checkLoop=function(){var H$a=H$e._cacheList;if(!(H$a.length<1)){var H$b,H$c=H$M.now(),H$d=0;for(H$b=H$d=H$a.length;0<H$d&&(H$a[H$e._index=++H$e._index%H$b].tryDispose(!1),!(H$M.now()-H$c>H$e.loopTimeLimit));)H$d--}},H$e.loopTimeLimit=2,H$e._cacheList=[],H$e._index=0,H$e}(),H$P=function(){function H$n(){}return H$k(H$n,"laya.utils.ClassUtils"),H$n.regClass=function(H$a,H$b){H$n._classMap[H$a]=H$b},H$n.getRegClass=function(H$a){return H$n._classMap[H$a]},H$n.getInstance=function(H$a){var H$b=H$n.getClass(H$a);return H$b?new H$b:(console.warn("[error] Undefined class:",H$a),null)},H$n.createByJson=function(H$a,H$b,H$c,H$d,H$e){"string"==typeof H$a&&(H$a=JSON.parse(H$a));var H$f=H$a.props;if(!H$b&&!(H$b=H$e?H$e.runWith(H$a):H$n.getInstance(H$f.runtime||H$a.type)))return null;var H$g=H$a.child;if(H$g)for(var H$h=0,H$i=H$g.length;H$h<H$i;H$h++){var H$j=H$g[H$h];if("render"!==H$j.props.name&&"render"!==H$j.props.renderType||!H$b._$set_itemRender)if("Graphic"==H$j.type)H$n.addGraphicsToSprite(H$j,H$b);else if(H$n.isDrawType(H$j.type))H$n.addGraphicToSprite(H$j,H$b,!0);else{var H$k=H$n.createByJson(H$j,null,H$c,H$d,H$e);"Script"==H$j.type?H$k.hasOwnProperty("owner")?H$k.owner=H$b:H$k.hasOwnProperty("target")&&(H$k.target=H$b):"mask"==H$j.props.renderType?H$b.mask=H$k:H$b.addChild(H$k)}else H$b.itemRender=H$j}if(H$f)for(var H$l in H$f){var H$m=H$f[H$l];"var"===H$l&&H$c?H$c[H$m]=H$b:H$m instanceof Array&&"function"==typeof H$b[H$l]?H$b[H$l].apply(H$b,H$m):H$b[H$l]=H$m}return H$d&&H$a.customProps&&H$d.runWith([H$b,H$a]),H$b.created&&H$b.created(),H$b},H$n.addGraphicsToSprite=function(H$a,H$b){var H$c;if((H$c=H$a.child)&&!(H$c.length<1)){var H$d;H$d=H$n._getGraphicsFromSprite(H$a,H$b);var H$e=0,H$f=0;H$a.props&&(H$e=H$n._getObjVar(H$a.props,"x",0),H$f=H$n._getObjVar(H$a.props,"y",0)),0!=H$e&&0!=H$f&&H$d.translate(H$e,H$f);var H$g,H$h=0;for(H$g=H$c.length,H$h=0;H$h<H$g;H$h++)H$n._addGraphicToGraphics(H$c[H$h],H$d);0!=H$e&&0!=H$f&&H$d.translate(-H$e,-H$f)}},H$n.addGraphicToSprite=function(H$a,H$b,H$c){var H$d;void 0===H$c&&(H$c=!1),H$d=H$c?H$n._getGraphicsFromSprite(H$a,H$b):H$b.graphics,H$n._addGraphicToGraphics(H$a,H$d)},H$n._getGraphicsFromSprite=function(H$a,H$b){var H$c,H$d;if(!H$a||!H$a.props)return H$b.graphics;switch(H$d=H$a.props.renderType){case"hit":case"unHit":var H$e;H$b.hitArea||(H$b.hitArea=new H$T),(H$e=H$b.hitArea)[H$d]||(H$e[H$d]=new H$m),H$c=H$e[H$d]}return H$c||(H$c=H$b.graphics),H$c},H$n._getTransformData=function(H$a){var H$b;(H$a.hasOwnProperty("pivotX")||H$a.hasOwnProperty("pivotY"))&&(H$b=H$b||new H$E).translate(-H$n._getObjVar(H$a,"pivotX",0),-H$n._getObjVar(H$a,"pivotY",0));var H$c=H$n._getObjVar(H$a,"scaleX",1),H$d=H$n._getObjVar(H$a,"scaleY",1),H$e=H$n._getObjVar(H$a,"rotation",0);H$n._getObjVar(H$a,"skewX",0),H$n._getObjVar(H$a,"skewY",0);return 1==H$c&&1==H$d&&0==H$e||((H$b=H$b||new H$E).scale(H$c,H$d),H$b.rotate(.0174532922222222*H$e)),H$b},H$n._addGraphicToGraphics=function(H$a,H$b){var H$c,H$d;if((H$c=H$a.props)&&(H$d=H$n.DrawTypeDic[H$a.type])){var H$e,H$f;H$e=H$b;var H$g=H$n._getParams(H$c,H$d[1],H$d[2],H$d[3]);((H$f=H$n._tM)||1!=H$n._alpha)&&(H$e.save(),H$f&&H$e.transform(H$f),1!=H$n._alpha&&H$e.alpha(H$n._alpha)),H$e[H$d[0]].apply(H$e,H$g),(H$f||1!=H$n._alpha)&&H$e.restore()}},H$n._adptLineData=function(H$a){return H$a[2]=parseFloat(H$a[0])+parseFloat(H$a[2]),H$a[3]=parseFloat(H$a[1])+parseFloat(H$a[3]),H$a},H$n._adptTextureData=function(H$a){return H$a[0]=H$ha.getRes(H$a[0]),H$a},H$n._adptLinesData=function(H$a){return H$a[2]=H$n._getPointListByStr(H$a[2]),H$a},H$n.isDrawType=function(H$a){return"Image"!=H$a&&H$n.DrawTypeDic.hasOwnProperty(H$a)},H$n._getParams=function(H$a,H$b,H$c,H$d){var H$e;void 0===H$c&&(H$c=0),(H$e=H$n._temParam).length=H$b.length;var H$f,H$g,H$h=0;for(H$f=H$b.length,H$h=0;H$h<H$f;H$h++)H$e[H$h]=H$n._getObjVar(H$a,H$b[H$h][0],H$b[H$h][1]);return H$n._alpha=H$n._getObjVar(H$a,"alpha",1),H$g=H$n._getTransformData(H$a),H$n._tM=H$g?(H$c||(H$c=0),H$g.translate(H$e[H$c],H$e[H$c+1]),H$e[H$c]=H$e[H$c+1]=0,H$g):null,H$d&&H$n[H$d]&&(H$e=H$n[H$d](H$e)),H$e},H$n._getPointListByStr=function(H$a){var H$b,H$c,H$d=0;for(H$c=(H$b=H$a.split(",")).length,H$d=0;H$d<H$c;H$d++)H$b[H$d]=parseFloat(H$b[H$d]);return H$b},H$n._getObjVar=function(H$a,H$b,H$c){return H$a.hasOwnProperty(H$b)?H$a[H$b]:H$c},H$n._temParam=[],H$n._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},H$n.getClass=function(H$a){var H$b=H$n._classMap[H$a]||H$a;return"string"==typeof H$b?H$x.__classmap[H$b]:H$b},H$n._tM=null,H$n._alpha=NaN,H$i(H$n,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),H$n}(),H$Q=function(){function H$f(H$a){if(this._color=[],"string"==typeof H$a){null===(this.strColor=H$a)&&(H$a="#000000"),"#"==H$a.charAt(0)&&(H$a=H$a.substr(1));var H$b=H$a.length;if(3==H$b||4==H$b){for(var H$c="",H$d=0;H$d<H$b;H$d++)H$c+=H$a[H$d]+H$a[H$d];H$a=H$c}var H$e=this.numColor=parseInt(H$a,16);if(8==H$a.length)return void(this._color=[parseInt(H$a.substr(0,2),16)/255,((16711680&H$e)>>16)/255,((65280&H$e)>>8)/255,(255&H$e)/255])}else H$e=this.numColor=H$a,this.strColor=H$Y.toHexColor(H$e);this._color=[((16711680&H$e)>>16)/255,((65280&H$e)>>8)/255,(255&H$e)/255,1],this._color.__id=++H$f._COLODID}return H$k(H$f,"laya.utils.Color"),H$f._initDefault=function(){for(var H$a in H$f._DEFAULT={},H$f._COLOR_MAP)H$f._SAVE[H$a]=H$f._DEFAULT[H$a]=new H$f(H$f._COLOR_MAP[H$a]);return H$f._DEFAULT},H$f._initSaveMap=function(){for(var H$a in H$f._SAVE_SIZE=0,H$f._SAVE={},H$f._DEFAULT)H$f._SAVE[H$a]=H$f._DEFAULT[H$a]},H$f.create=function(H$a){var H$b=H$f._SAVE[H$a+""];return null!=H$b?H$b:(H$f._SAVE_SIZE<1e3||H$f._initSaveMap(),H$f._SAVE[H$a+""]=new H$f(H$a))},H$f._SAVE={},H$f._SAVE_SIZE=0,H$f._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},H$f._DEFAULT=H$f._initDefault(),H$f._COLODID=1,H$f}(),H$R=(function(){function H$a(){this._values=[],this._keys=[]}H$k(H$a,"laya.utils.Dictionary");var H$b=H$a.prototype;H$b.set=function(H$a,H$b){var H$c=this.indexOf(H$a);0<=H$c?this._values[H$c]=H$b:(this._keys.push(H$a),this._values.push(H$b))},H$b.indexOf=function(H$a){var H$b=this._keys.indexOf(H$a);return 0<=H$b?H$b:(H$a="string"==typeof H$a?Number(H$a):"number"==typeof H$a?H$a.toString():H$a,this._keys.indexOf(H$a))},H$b.get=function(H$a){var H$b=this.indexOf(H$a);return H$b<0?null:this._values[H$b]},H$b.remove=function(H$a){var H$b=this.indexOf(H$a);return 0<=H$b&&(this._keys.splice(H$b,1),this._values.splice(H$b,1),!0)},H$b.clear=function(){this._values.length=0,this._keys.length=0},H$o(0,H$b,"values",function(){return this._values}),H$o(0,H$b,"keys",function(){return this._keys})}(),function(){function H$a(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}H$k(H$a,"laya.utils.Dragging");var H$b=H$a.prototype;return H$b.start=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){void 0===H$h&&(H$h=.92),this.clearTimer(),this.target=H$a,this.area=H$b,this.hasInertia=H$c,this.elasticDistance=H$b?H$d:0,this.elasticBackTime=H$e,this.data=H$f,this._disableMouseEvent=H$g,this.ratio=H$h,1!=H$a.globalScaleX||1!=H$a.globalScaleY?this._parent=H$a.parent:this._parent=H$x.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,H$x.stage.on("mouseup",this,this.onStageMouseUp),H$x.stage.on("mouseout",this,this.onStageMouseUp),H$x.timer.frameLoop(1,this,this.loop)},H$b.clearTimer=function(){H$x.timer.clear(this,this.loop),H$x.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},H$b.stop=function(){this._dragging&&(H$p.instance.disableMouseEvent=!1,H$x.stage.off("mouseup",this,this.onStageMouseUp),H$x.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},H$b.loop=function(){var H$a=this._parent.getMousePoint(),H$b=H$a.x,H$c=H$a.y,H$d=H$b-this._lastX,H$e=H$c-this._lastY;if(this._clickOnly){if(!(1<Math.abs(H$d*H$x.stage._canvasTransform.getScaleX())||1<Math.abs(H$e*H$x.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),H$p.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(H$d,H$e);0==H$d&&0==H$e||(this._lastX=H$b,this._lastY=H$c,this.target.x+=H$d*this._elasticRateX,this.target.y+=H$e*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},H$b.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var H$a=this.area.x-this.target.x;else H$a=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-H$a/this.elasticDistance),this.target.y<this.area.y)var H$b=this.area.y-this.target.y;else H$b=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-H$b/this.elasticDistance)}},H$b.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},H$b.onStageMouseUp=function(H$a){if(H$p.instance.disableMouseEvent=!1,H$x.stage.off("mouseup",this,this.onStageMouseUp),H$x.stage.off("mouseout",this,this.onStageMouseUp),H$x.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var H$b=this._offsets.length,H$c=Math.min(H$b,6),H$d=this._offsets.length-H$c,H$e=H$b-1;H$d<H$e;H$e--)this._offsetY+=this._offsets[H$e--],this._offsetX+=this._offsets[H$e];this._offsetX=this._offsetX/H$c*2,this._offsetY=this._offsetY/H$c*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),H$x.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},H$b.checkElastic=function(){var H$a=NaN,H$b=NaN;if(this.target.x<this.area.x?H$a=this.area.x:this.target.x>this.area.x+this.area.width&&(H$a=this.area.x+this.area.width),this.target.y<this.area.y?H$b=this.area.y:this.target.y>this.area.y+this.area.height&&(H$b=this.area.y+this.area.height),isNaN(H$a)&&isNaN(H$b))this.clear();else{var H$c={};isNaN(H$a)||(H$c.x=H$a),isNaN(H$b)||(H$c.y=H$b),this._tween=H$X.to(this.target,H$c,this.elasticBackTime,H$S.sineOut,H$s.create(this,this.clear),0,!1,!1)}},H$b.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(H$x.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},H$b.clear=function(){if(this.target){this.clearTimer();var H$a=this.target;this.target=null,this._parent=null,H$a.event("dragend",this.data)}},H$a}()),H$S=function(){function H$h(){}return H$k(H$h,"laya.utils.Ease"),H$h.linearNone=function(H$a,H$b,H$c,H$d){return H$c*H$a/H$d+H$b},H$h.linearIn=function(H$a,H$b,H$c,H$d){return H$c*H$a/H$d+H$b},H$h.linearInOut=function(H$a,H$b,H$c,H$d){return H$c*H$a/H$d+H$b},H$h.linearOut=function(H$a,H$b,H$c,H$d){return H$c*H$a/H$d+H$b},H$h.bounceIn=function(H$a,H$b,H$c,H$d){return H$c-H$h.bounceOut(H$d-H$a,0,H$c,H$d)+H$b},H$h.bounceInOut=function(H$a,H$b,H$c,H$d){return H$a<.5*H$d?.5*H$h.bounceIn(2*H$a,0,H$c,H$d)+H$b:.5*H$h.bounceOut(2*H$a-H$d,0,H$c,H$d)+.5*H$c+H$b},H$h.bounceOut=function(H$a,H$b,H$c,H$d){return(H$a/=H$d)<1/2.75?H$c*(7.5625*H$a*H$a)+H$b:H$a<2/2.75?H$c*(7.5625*(H$a-=1.5/2.75)*H$a+.75)+H$b:H$a<2.5/2.75?H$c*(7.5625*(H$a-=2.25/2.75)*H$a+.9375)+H$b:H$c*(7.5625*(H$a-=2.625/2.75)*H$a+.984375)+H$b},H$h.backIn=function(H$a,H$b,H$c,H$d,H$e){return void 0===H$e&&(H$e=1.70158),H$c*(H$a/=H$d)*H$a*((H$e+1)*H$a-H$e)+H$b},H$h.backInOut=function(H$a,H$b,H$c,H$d,H$e){return void 0===H$e&&(H$e=1.70158),(H$a/=.5*H$d)<1?.5*H$c*(H$a*H$a*((1+(H$e*=1.525))*H$a-H$e))+H$b:H$c/2*((H$a-=2)*H$a*((1+(H$e*=1.525))*H$a+H$e)+2)+H$b},H$h.backOut=function(H$a,H$b,H$c,H$d,H$e){return void 0===H$e&&(H$e=1.70158),H$c*((H$a=H$a/H$d-1)*H$a*((H$e+1)*H$a+H$e)+1)+H$b},H$h.elasticIn=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g;return void 0===H$e&&(H$e=0),void 0===H$f&&(H$f=0),0==H$a?H$b:1==(H$a/=H$d)?H$b+H$c:(H$f||(H$f=.3*H$d),H$g=!H$e||0<H$c&&H$e<H$c||H$c<0&&H$e<-H$c?(H$e=H$c,H$f/4):H$f/H$h.PI2*Math.asin(H$c/H$e),-H$e*Math.pow(2,10*(H$a-=1))*Math.sin((H$a*H$d-H$g)*H$h.PI2/H$f)+H$b)},H$h.elasticInOut=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g;return void 0===H$e&&(H$e=0),void 0===H$f&&(H$f=0),0==H$a?H$b:2==(H$a/=.5*H$d)?H$b+H$c:(H$f||(H$f=H$d*(.3*1.5)),H$g=!H$e||0<H$c&&H$e<H$c||H$c<0&&H$e<-H$c?(H$e=H$c,H$f/4):H$f/H$h.PI2*Math.asin(H$c/H$e),H$a<1?H$e*Math.pow(2,10*(H$a-=1))*Math.sin((H$a*H$d-H$g)*H$h.PI2/H$f)*-.5+H$b:H$e*Math.pow(2,-10*(H$a-=1))*Math.sin((H$a*H$d-H$g)*H$h.PI2/H$f)*.5+H$c+H$b)},H$h.elasticOut=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g;return void 0===H$e&&(H$e=0),void 0===H$f&&(H$f=0),0==H$a?H$b:1==(H$a/=H$d)?H$b+H$c:(H$f||(H$f=.3*H$d),H$g=!H$e||0<H$c&&H$e<H$c||H$c<0&&H$e<-H$c?(H$e=H$c,H$f/4):H$f/H$h.PI2*Math.asin(H$c/H$e),H$e*Math.pow(2,-10*H$a)*Math.sin((H$a*H$d-H$g)*H$h.PI2/H$f)+H$c+H$b)},H$h.strongIn=function(H$a,H$b,H$c,H$d){return H$c*(H$a/=H$d)*H$a*H$a*H$a*H$a+H$b},H$h.strongInOut=function(H$a,H$b,H$c,H$d){return(H$a/=.5*H$d)<1?.5*H$c*H$a*H$a*H$a*H$a*H$a+H$b:.5*H$c*((H$a-=2)*H$a*H$a*H$a*H$a+2)+H$b},H$h.strongOut=function(H$a,H$b,H$c,H$d){return H$c*((H$a=H$a/H$d-1)*H$a*H$a*H$a*H$a+1)+H$b},H$h.sineInOut=function(H$a,H$b,H$c,H$d){return.5*-H$c*(Math.cos(Math.PI*H$a/H$d)-1)+H$b},H$h.sineIn=function(H$a,H$b,H$c,H$d){return-H$c*Math.cos(H$a/H$d*H$h.HALF_PI)+H$c+H$b},H$h.sineOut=function(H$a,H$b,H$c,H$d){return H$c*Math.sin(H$a/H$d*H$h.HALF_PI)+H$b},H$h.quintIn=function(H$a,H$b,H$c,H$d){return H$c*(H$a/=H$d)*H$a*H$a*H$a*H$a+H$b},H$h.quintInOut=function(H$a,H$b,H$c,H$d){return(H$a/=.5*H$d)<1?.5*H$c*H$a*H$a*H$a*H$a*H$a+H$b:.5*H$c*((H$a-=2)*H$a*H$a*H$a*H$a+2)+H$b},H$h.quintOut=function(H$a,H$b,H$c,H$d){return H$c*((H$a=H$a/H$d-1)*H$a*H$a*H$a*H$a+1)+H$b},H$h.quartIn=function(H$a,H$b,H$c,H$d){return H$c*(H$a/=H$d)*H$a*H$a*H$a+H$b},H$h.quartInOut=function(H$a,H$b,H$c,H$d){return(H$a/=.5*H$d)<1?.5*H$c*H$a*H$a*H$a*H$a+H$b:.5*-H$c*((H$a-=2)*H$a*H$a*H$a-2)+H$b},H$h.quartOut=function(H$a,H$b,H$c,H$d){return-H$c*((H$a=H$a/H$d-1)*H$a*H$a*H$a-1)+H$b},H$h.cubicIn=function(H$a,H$b,H$c,H$d){return H$c*(H$a/=H$d)*H$a*H$a+H$b},H$h.cubicInOut=function(H$a,H$b,H$c,H$d){return(H$a/=.5*H$d)<1?.5*H$c*H$a*H$a*H$a+H$b:.5*H$c*((H$a-=2)*H$a*H$a+2)+H$b},H$h.cubicOut=function(H$a,H$b,H$c,H$d){return H$c*((H$a=H$a/H$d-1)*H$a*H$a+1)+H$b},H$h.quadIn=function(H$a,H$b,H$c,H$d){return H$c*(H$a/=H$d)*H$a+H$b},H$h.quadInOut=function(H$a,H$b,H$c,H$d){return(H$a/=.5*H$d)<1?.5*H$c*H$a*H$a+H$b:.5*-H$c*(--H$a*(H$a-2)-1)+H$b},H$h.quadOut=function(H$a,H$b,H$c,H$d){return-H$c*(H$a/=H$d)*(H$a-2)+H$b},H$h.expoIn=function(H$a,H$b,H$c,H$d){return 0==H$a?H$b:H$c*Math.pow(2,10*(H$a/H$d-1))+H$b-.001*H$c},H$h.expoInOut=function(H$a,H$b,H$c,H$d){return 0==H$a?H$b:H$a==H$d?H$b+H$c:(H$a/=.5*H$d)<1?.5*H$c*Math.pow(2,10*(H$a-1))+H$b:.5*H$c*(2-Math.pow(2,-10*--H$a))+H$b},H$h.expoOut=function(H$a,H$b,H$c,H$d){return H$a==H$d?H$b+H$c:H$c*(1-Math.pow(2,-10*H$a/H$d))+H$b},H$h.circIn=function(H$a,H$b,H$c,H$d){return-H$c*(Math.sqrt(1-(H$a/=H$d)*H$a)-1)+H$b},H$h.circInOut=function(H$a,H$b,H$c,H$d){return(H$a/=.5*H$d)<1?.5*-H$c*(Math.sqrt(1-H$a*H$a)-1)+H$b:.5*H$c*(Math.sqrt(1-(H$a-=2)*H$a)+1)+H$b},H$h.circOut=function(H$a,H$b,H$c,H$d){return H$c*Math.sqrt(1-(H$a=H$a/H$d-1)*H$a)+H$b},H$h.HALF_PI=.5*Math.PI,H$h.PI2=2*Math.PI,H$h}(),H$T=function(){function H$l(){this._hit=null,this._unHit=null}H$k(H$l,"laya.utils.HitArea");var H$a=H$l.prototype;return H$a.isHit=function(H$a,H$b){return!!H$l.isHitGraphic(H$a,H$b,this.hit)&&!H$l.isHitGraphic(H$a,H$b,this.unHit)},H$a.contains=function(H$a,H$b){return this.isHit(H$a,H$b)},H$o(0,H$a,"hit",function(){return this._hit||(this._hit=new H$m),this._hit},function(H$a){this._hit=H$a}),H$o(0,H$a,"unHit",function(){return this._unHit||(this._unHit=new H$m),this._unHit},function(H$a){this._unHit=H$a}),H$l.isHitGraphic=function(H$a,H$b,H$c){if(!H$c)return!1;var H$d;if(!(H$d=H$c.cmds)&&H$c._one&&((H$d=H$l._cmds).length=1,H$d[0]=H$c._one),!H$d)return!1;var H$e,H$f,H$g=0;for(H$e=H$d.length,H$g=0;H$g<H$e;H$g++)if(H$f=H$d[H$g]){var H$h=H$H._context;switch(H$f.callee){case H$h._translate:case 6:H$a-=H$f[0],H$b-=H$f[1]}if(H$l.isHitCmd(H$a,H$b,H$f))return!0}return!1},H$l.isHitCmd=function(H$a,H$b,H$c){if(!H$c)return!1;var H$d=H$H._context,H$e=!1;switch(H$c.callee){case H$d._drawRect:case 13:H$l._rec.setTo(H$c[0],H$c[1],H$c[2],H$c[3]),H$e=H$l._rec.contains(H$a,H$b);break;case H$d._drawCircle:case H$d._fillCircle:case 14:H$e=(H$a-=H$c[0])*H$a+(H$b-=H$c[1])*H$b<H$c[2]*H$c[2];break;case H$d._drawPoly:case 18:H$a-=H$c[0],H$b-=H$c[1],H$e=H$l.ptInPolygon(H$a,H$b,H$c[2])}return H$e},H$l.ptInPolygon=function(H$a,H$b,H$c){var H$d;(H$d=H$l._ptPoint).setTo(H$a,H$b);var H$e,H$f=0,H$g=NaN,H$h=NaN,H$i=NaN,H$j=NaN;H$e=H$c.length;for(var H$k=0;H$k<H$e;H$k+=2){if(H$g=H$c[H$k],H$h=H$c[H$k+1],H$i=H$c[(H$k+2)%H$e],H$h!=(H$j=H$c[(H$k+3)%H$e]))if(!(H$d.y<Math.min(H$h,H$j)))if(!(H$d.y>=Math.max(H$h,H$j)))(H$d.y-H$h)*(H$i-H$g)/(H$j-H$h)+H$g>H$d.x&&H$f++}return H$f%2==1},H$l._cmds=[],H$i(H$l,["_rec",function(){return this._rec=new H$z},"_ptPoint",function(){return this._ptPoint=new H$y}]),H$l}(),H$U=(function(){function H$e(H$a,H$b,H$c,H$d){this.char=H$a,this.charNum=H$a.charCodeAt(0),this._x=this._y=0,this.width=H$b,this.height=H$c,this.style=H$d,this.isWord=!H$e._isWordRegExp.test(H$a)}H$k(H$e,"laya.utils.HTMLChar");var H$a=H$e.prototype;H$x.imps(H$a,{"laya.display.ILayout":!0}),H$a.setSprite=function(H$a){this._sprite=H$a},H$a.getSprite=function(){return this._sprite},H$a._isChar=function(){return!0},H$a._getCSSStyle=function(){return this.style},H$o(0,H$a,"width",function(){return this._w},function(H$a){this._w=H$a}),H$o(0,H$a,"x",function(){return this._x},function(H$a){this._sprite&&(this._sprite.x=H$a),this._x=H$a}),H$o(0,H$a,"y",function(){return this._y},function(H$a){this._sprite&&(this._sprite.y=H$a),this._y=H$a}),H$o(0,H$a,"height",function(){return this._h},function(H$a){this._h=H$a}),H$e._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function H$b(){}H$k(H$b,"laya.utils.Log"),H$b.enable=function(){H$b._logdiv||(H$b._logdiv=H$M.window.document.createElement("div"),H$M.window.document.body.appendChild(H$b._logdiv),H$b._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},H$b.toggle=function(){var H$a=H$b._logdiv.style;"1px"==H$a.width?H$a.width=H$a.height="50%":H$a.width=H$a.height="1px"},H$b.print=function(H$a){H$b._logdiv&&(H$b.maxCount<=H$b._count&&H$b.clear(),H$b._count++,H$b._logdiv.innerText+=H$a+"\n",H$b._logdiv.scrollTop=H$b._logdiv.scrollHeight)},H$b.clear=function(){H$b._logdiv.innerText="",H$b._count=0},H$b._logdiv=null,H$b._count=0,H$b.maxCount=20}(),function(){function H$b(){}H$k(H$b,"laya.utils.Mouse"),H$o(1,H$b,"cursor",function(){return H$b._style.cursor},function(H$a){H$b._style.cursor=H$a}),H$b.hide=function(){"none"!=H$b.cursor&&(H$b._preCursor=H$b.cursor,H$b.cursor="none")},H$b.show=function(){"none"==H$b.cursor&&(H$b.cursor=H$b._preCursor?H$b._preCursor:"auto")},H$b._preCursor=null,H$i(H$b,["_style",function(){return this._style=H$M.document.body.style}])}(),function(){function H$f(){}return H$k(H$f,"laya.utils.Pool"),H$f.getPoolBySign=function(H$a){return H$f._poolDic[H$a]||(H$f._poolDic[H$a]=[])},H$f.clearBySign=function(H$a){H$f._poolDic[H$a]&&(H$f._poolDic[H$a].length=0)},H$f.recover=function(H$a,H$b){H$b.__InPool||(H$b.__InPool=!0,H$f.getPoolBySign(H$a).push(H$b))},H$f.getItemByClass=function(H$a,H$b){var H$c=H$f.getPoolBySign(H$a),H$d=H$c.length?H$c.pop():new H$b;return H$d.__InPool=!1,H$d},H$f.getItemByCreateFun=function(H$a,H$b,H$c){var H$d=H$f.getPoolBySign(H$a),H$e=H$d.length?H$d.pop():H$b.call(H$c);return H$e.__InPool=!1,H$e},H$f.getItem=function(H$a){var H$b=H$f.getPoolBySign(H$a),H$c=H$b.length?H$b.pop():null;return H$c&&(H$c.__InPool=!1),H$c},H$f._poolDic={},H$f.InPoolSign="__InPool",H$f}()),H$V=function(){function H$i(){}return H$k(H$i,"laya.utils.Stat"),H$o(1,H$i,"onclick",null,function(H$a){H$i._sp&&H$i._sp.on("click",H$i._sp,H$a),H$i._canvas&&(H$i._canvas.source.onclick=H$a,H$i._canvas.source.style.pointerEvents="")}),H$i.show=function(H$a,H$b,H$c){if(void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0),!H$H.isConchApp||H$H.isConchWebGL){if(H$H.isConchWebGL||H$M.onMiniGame||H$M.onLimixiu||(H$i._useCanvas=!0),H$i._show=!0,H$i._fpsData.length=60,H$i._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},H$i._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},H$i._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},H$i._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},H$H.isWebGL)if(H$i._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},H$H.is3DMode){if(H$i._view[0].title="FPS(3D)",H$i._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},H$i._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},H$i._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==H$c){var H$d=8;H$i._view[H$d++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},H$i._view[H$d++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},H$i._view[H$d++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},H$i._view[H$d++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},H$i._view[H$d++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},H$i._view[H$d++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},H$i._view[H$d++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},H$i._view[H$d++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},H$i._view[H$d++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==H$c){H$d=8;H$i._view[H$d++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},H$i._view[H$d++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},H$i._view[H$d++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},H$i._view[H$d++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},H$i._view[H$d++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},H$i._view[H$d++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},H$i._view[H$d++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else H$i._view[0].title="FPS(WebGL)",H$i._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else H$i._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};H$i._useCanvas?H$i.createUIPre(H$a,H$b):H$i.createUI(H$a,H$b),H$i.enable()}else H$M.window.conch.showFPS&&H$M.window.conch.showFPS(H$a,H$b)},H$i.createUIPre=function(H$a,H$b){var H$c=H$M.pixelRatio;H$i._width=170*H$c,H$i._vx=75*H$c,H$i._height=H$c*(12*H$i._view.length+3*H$c)+4,H$i._fontSize=12*H$c;for(var H$d=0;H$d<H$i._view.length;H$d++)H$i._view[H$d].x=4,H$i._view[H$d].y=H$d*H$i._fontSize+2*H$c;H$i._canvas||((H$i._canvas=new H$ta("2D")).size(H$i._width,H$i._height),(H$i._ctx=H$i._canvas.getContext("2d")).textBaseline="top",H$i._ctx.font=H$i._fontSize+"px Sans-serif",H$i._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+H$a+"px;top:"+H$b+"px;width:"+H$i._width/H$c+"px;height:"+H$i._height/H$c+"px;"),H$i._first=!0,H$i.loop(),H$i._first=!1,H$M.container.appendChild(H$i._canvas.source)},H$i.createUI=function(H$a,H$b){var H$c=H$i._sp,H$d=H$M.pixelRatio;H$c||(H$c=new H$la,(H$i._leftText=new H$qa).pos(5,5),H$i._leftText.color="#ffffff",H$c.addChild(H$i._leftText),(H$i._txt=new H$qa).pos(80*H$d,5),H$i._txt.color="#ffffff",H$c.addChild(H$i._txt),H$i._sp=H$c),H$c.pos(H$a,H$b);for(var H$e="",H$f=0;H$f<H$i._view.length;H$f++){H$e+=H$i._view[H$f].title+"\n"}H$i._leftText.text=H$e;var H$g=170*H$d,H$h=H$d*(12*H$i._view.length+3*H$d)+4;H$i._txt.fontSize=H$i._fontSize*H$d,H$i._leftText.fontSize=H$i._fontSize*H$d,H$c.size(H$g,H$h),H$c.graphics.clear(),H$c.graphics.setAlpha(.5),H$c.graphics.drawRect(0,0,H$g,H$h,"#999999"),H$c.graphics.setAlpha(1),H$i.loop()},H$i.enable=function(){H$x.timer.frameLoop(1,H$i,H$i.loop)},H$i.hide=function(){H$i._show=!1,H$x.timer.clear(H$i,H$i.loop),H$i._canvas&&H$M.removeElement(H$i._canvas.source)},H$i.clear=function(){H$i.trianglesFaces=H$i.drawCall=H$i.shaderCall=H$i.spriteCount=H$i.spriteRenderUseCacheCount=H$i.treeNodeCollision=H$i.treeSpriteCollision=H$i.canvasNormal=H$i.canvasBitmap=H$i.canvasReCache=0},H$i.loop=function(){H$i._count++;var H$a=H$M.now();if(!(H$a-H$i._timer<1e3)){var H$b=H$i._count;if(H$i.FPS=Math.round(1e3*H$b/(H$a-H$i._timer)),H$i._show){H$i.trianglesFaces=Math.round(H$i.trianglesFaces/H$b),H$i.spriteCount=H$i._useCanvas?(H$i.drawCall=Math.round(H$i.drawCall/H$b)-2,H$i.shaderCall=Math.round(H$i.shaderCall/H$b),Math.round(H$i.spriteCount/H$b)-1):(H$i.drawCall=Math.round(H$i.drawCall/H$b)-2,H$i.shaderCall=Math.round(H$i.shaderCall/H$b)-4,Math.round(H$i.spriteCount/H$b)-4),H$i.spriteRenderUseCacheCount=Math.round(H$i.spriteRenderUseCacheCount/H$b),H$i.canvasNormal=Math.round(H$i.canvasNormal/H$b),H$i.canvasBitmap=Math.round(H$i.canvasBitmap/H$b),H$i.canvasReCache=Math.ceil(H$i.canvasReCache/H$b),H$i.treeNodeCollision=Math.round(H$i.treeNodeCollision/H$b),H$i.treeSpriteCollision=Math.round(H$i.treeSpriteCollision/H$b);var H$c=0<H$i.FPS?Math.floor(1e3/H$i.FPS).toString():" ";H$i._fpsStr=H$i.FPS+(H$i.renderSlow?" slow":"")+" "+H$c,H$i._spriteStr=H$i.spriteCount+(H$i.spriteRenderUseCacheCount?"/"+H$i.spriteRenderUseCacheCount:""),H$i._canvasStr=H$i.canvasReCache+"/"+H$i.canvasNormal+"/"+H$i.canvasBitmap,H$i.currentMemorySize=H$L.systemResourceManager.memorySize,H$i._useCanvas?H$i.renderInfoPre():H$i.renderInfo(),H$i.clear()}H$i._count=0,H$i._timer=H$a}},H$i.renderInfoPre=function(){if(H$i._canvas){var H$a=H$i._ctx;H$a.clearRect(H$i._first?0:H$i._vx,0,H$i._width,H$i._height);for(var H$b=H$H.WebGL.mainContext,H$c=0;H$c<H$i._view.length;H$c++){var H$d=H$i._view[H$c];H$i._first&&(H$a.fillStyle="white",H$a.fillText(H$d.title,H$d.x,H$d.y,null,null,null)),H$a.fillStyle=H$d.color;var H$e=-1;if((H$d=H$i._view[H$c]).varying){if(H$b)switch(H$d.varying){case 1:H$e=H$b.getParameter(H$b[H$d.value]);break;case 2:H$e=H$b.getExtension(H$d.value)}}else H$e=H$i[H$d.value];"M"==H$d.units&&(H$e=Math.floor(H$e/1048576*100)/100+" M"),"K"==H$d.units&&(H$e=Math.floor(H$e/1024*100)/100+" K"),"string"==H$d.units&&(H$e=H$e.match(/\d+\.?\d/i)),H$a.fillText(H$e+"",H$d.x+H$i._vx,H$d.y,null,null,null)}}},H$i.renderInfo=function(){for(var H$a="",H$b=H$H.WebGL.mainContext,H$c=0;H$c<H$i._view.length;H$c++){var H$d=H$i._view[H$c],H$e=-1;if(H$d.varying){if(H$b)switch(H$d.varying){case 1:H$e=H$b.getParameter(H$b[H$d.value]);break;case 2:H$e=H$b.getExtension(H$d.value)}}else H$e=H$i[H$d.value];"M"==H$d.units&&(H$e=Math.floor(H$e/1048576*100)/100+" M"),"K"==H$d.units&&(H$e=Math.floor(H$e/1024*100)/100+" K"),"string"==H$d.units&&(H$e=H$e.match(/\d+\.?\d/i)),H$a+=H$e+"\n"}H$i._txt.text=H$a},H$i.FPS=0,H$i.loopCount=0,H$i.shaderCall=0,H$i.drawCall=0,H$i.trianglesFaces=0,H$i.spriteCount=0,H$i.spriteRenderUseCacheCount=0,H$i.treeNodeCollision=0,H$i.treeSpriteCollision=0,H$i.canvasNormal=0,H$i.canvasBitmap=0,H$i.canvasReCache=0,H$i.renderSlow=!1,H$i.currentMemorySize=0,H$i._fpsStr=null,H$i._canvasStr=null,H$i._spriteStr=null,H$i._fpsData=[],H$i._timer=0,H$i._count=0,H$i._view=[],H$i._fontSize=12,H$i._txt=null,H$i._leftText=null,H$i._sp=null,H$i._show=!1,H$i._useCanvas=!1,H$i._canvas=null,H$i._ctx=null,H$i._first=!1,H$i._vx=NaN,H$i._width=0,H$i._height=100,H$i}(),H$W=(function(){function H$a(){this._strsToID={},this._idToStrs=[],this._length=0}H$k(H$a,"laya.utils.StringKey");var H$b=H$a.prototype;H$b.add=function(H$a){var H$b=this._strsToID[H$a];return null!=H$b?H$b:(this._idToStrs[this._length]=H$a,this._strsToID[H$a]=this._length++)},H$b.getID=function(H$a){var H$b=this._strsToID[H$a];return null==H$b?-1:H$b},H$b.getName=function(H$a){var H$b=this._idToStrs[H$a];return null==H$b?void 0:H$b}}(),function(){var H$j;function H$a(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}H$k(H$a,"laya.utils.Timer");var H$b=H$a.prototype;return H$b._init=function(){H$x.timer&&H$x.timer.frameLoop(1,this,this._update)},H$b._now=function(){return Date.now()},H$b._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var H$a=this.currFrame=this.currFrame+this.scale,H$b=this._now();this._delta=(H$b-this._lastTimer)*this.scale;var H$c=this.currTimer=this.currTimer+this._delta;H$x.isDebug&&6e4<Math.abs(H$b-this._lastTimer)&&console.error("系统时间错误！"+(H$b-this._lastTimer)),this._lastTimer=H$b;var H$d=this._handlers;for(H$g=this._count=0,H$h=H$d.length;H$g<H$h;H$g++)if(null!==(H$i=H$d[H$g]).method){var H$e=H$i.userFrame?H$a:H$c;if(H$e>=H$i.exeTime)if(H$i.repeat)if(H$i.jumpFrame)for(;H$e>=H$i.exeTime;)H$i.exeTime+=H$i.delay,H$i.run(!1);else H$i.exeTime+=H$i.delay,H$i.run(!1),H$e>H$i.exeTime&&(H$i.exeTime+=Math.ceil((H$e-H$i.exeTime)/H$i.delay)*H$i.delay);else H$i.run(!0)}else this._count++;(30<this._count||H$a%200==0)&&this._clearHandlers();for(var H$f=this._laters,H$g=0,H$h=H$f.length-1;H$g<=H$h;H$g++){var H$i=H$f[H$g];this._isIgnoreRecover(H$i)||(null!==H$i.method&&(delete this._map[H$i.key],H$i.run(!1)),this._recoverHandler(H$i)),H$g===H$h&&(H$h=H$f.length-1)}H$f.length=0}},H$b._clearHandlers=function(){for(var H$a=this._handlers,H$b=0,H$c=H$a.length;H$b<H$c;H$b++){var H$d=H$a[H$b];null!==H$d.method?this._temp.push(H$d):this._isIgnoreRecover(H$d)?this._temp.push(H$d):this._recoverHandler(H$d)}this._handlers=this._temp,this._temp=H$a,this._temp.length=0},H$b._recoverHandler=function(H$a){this._map[H$a.key]==H$a&&delete this._map[H$a.key],H$a.recover()},H$b._create=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){if(!H$c)return H$e.apply(H$d,H$f),null;if(H$g){var H$i=this._getHandler(H$d,H$e);if(H$i)return H$i.repeat=H$b,H$i.userFrame=H$a,H$i.delay=H$c,H$i.ignoreRecover=H$h,H$i.caller=H$d,H$i.method=H$e,H$i.args=H$f,H$i.exeTime=H$c+(H$a?this.currFrame:this.currTimer+this._now()-this._lastTimer),H$i}return(H$i=H$j.create()).repeat=H$b,H$i.userFrame=H$a,H$i.delay=H$c,H$i.ignoreRecover=H$h,H$i.caller=H$d,H$i.method=H$e,H$i.args=H$f,H$i.exeTime=H$c+(H$a?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(H$i),this._handlers.push(H$i),H$i},H$b._indexHandler=function(H$a){var H$b=H$a.caller,H$c=H$a.method,H$d=H$b?H$b.$_GID||(H$b.$_GID=H$Y.getGID()):0,H$e=H$c.$_TID||(H$c.$_TID=this._mid++);H$a.key=H$d+"_"+H$e,this._map[H$a.key]=H$a},H$b.once=function(H$a,H$b,H$c,H$d,H$e){void 0===H$e&&(H$e=!0),this._create(!1,!1,H$a,H$b,H$c,H$d,H$e,!1)},H$b.loop=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){void 0===H$e&&(H$e=!0),void 0===H$f&&(H$f=!1),void 0===H$g&&(H$g=!1);var H$h=this._create(!1,!0,H$a,H$b,H$c,H$d,H$e,H$g);H$h&&(H$h.jumpFrame=H$f)},H$b.frameOnce=function(H$a,H$b,H$c,H$d,H$e){void 0===H$e&&(H$e=!0),this._create(!0,!1,H$a,H$b,H$c,H$d,H$e,!1)},H$b.frameLoop=function(H$a,H$b,H$c,H$d,H$e,H$f){void 0===H$e&&(H$e=!0),void 0===H$f&&(H$f=!1),this._create(!0,!0,H$a,H$b,H$c,H$d,H$e,H$f)},H$b.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+H$j._freeCount},H$b.clear=function(H$a,H$b){var H$c=this._getHandler(H$a,H$b);return!(!H$c||this._isIgnoreRecover(H$c))&&(delete this._map[H$c.key],H$c.key=null,H$c.clear(),!0)},H$b.clearAll=function(H$a){if(H$a)for(var H$b=0,H$c=this._handlers.length;H$b<H$c;H$b++){var H$d=this._handlers[H$b];H$d.caller===H$a&&(this._isIgnoreRecover(H$d)||(delete this._map[H$d.key],H$d.key=null,H$d.clear()))}},H$b._getHandler=function(H$a,H$b){var H$c=H$a?H$a.$_GID||(H$a.$_GID=H$Y.getGID()):0,H$d=H$b.$_TID||(H$b.$_TID=this._mid++);return this._map[H$c+"_"+H$d]},H$b._isIgnoreRecover=function(H$a){if(H$a.ignoreRecover||H$a.caller&&"IgnoreRecover"==H$a.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var H$b="";try{arguments.propertyIsEnumerable.caller}catch(H$a){H$b=H$a.stack}H$x.recordError("报错：核心定时器销毁忽略  "+H$b)}return!0}return!1},H$b.hasHandler=function(H$a,H$b){return this._map[H$a.$_GID+"_"+H$b.$_TID]},H$b.callLater=function(H$a,H$b,H$c){if(null==this._getHandler(H$a,H$b)){var H$d=H$j.create();H$d.caller=H$a,H$d.method=H$b,H$d.args=H$c,this._indexHandler(H$d),this._laters.push(H$d)}},H$b.runCallLater=function(H$a,H$b){var H$c=this._getHandler(H$a,H$b);H$c&&null!=H$c.method&&(this._isIgnoreRecover(H$c)||(delete this._map[H$c.key],H$c.run(!0)))},H$b.runTimer=function(H$a,H$b){this.runCallLater(H$a,H$b)},H$o(0,H$b,"delta",function(){return this._delta}),H$a.__init$=function(){H$j=function(){function H$b(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}H$k(H$b,"");var H$a=H$b.prototype;return H$a.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},H$a.recover=function(){this.clear(),this.args=H$b._freeHandler,H$b._freeHandler=this,H$b._freeCount++},H$a.run=function(H$a){var H$b=this.caller;if(H$b&&H$b.destroyed)return this.clear();var H$c=this.method,H$d=this.args;H$a&&this.clear(),null!=H$c&&(H$d?H$c.apply(H$b,H$d):H$c.call(H$b))},H$b._freeHandler=null,H$b._freeCount=0,H$b.create=function(){var H$a=H$b._freeHandler;return H$a?(H$b._freeHandler=H$a.args,--H$b._freeCount,H$a.args=null,H$a):new H$b},H$b}()},H$a}()),H$X=function(){function H$l(){this.gid=0}H$k(H$l,"laya.utils.Tween");var H$a=H$l.prototype;return H$a.to=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){return void 0===H$f&&(H$f=0),void 0===H$g&&(H$g=!1),this._create(H$a,H$b,H$c,H$d,H$e,H$f,H$g,!0,!1,!0)},H$a.from=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){return void 0===H$f&&(H$f=0),void 0===H$g&&(H$g=!1),this._create(H$a,H$b,H$c,H$d,H$e,H$f,H$g,!1,!1,!0)},H$a._create=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j){if(!H$a)throw new Error("Tween:target is null");this._target=H$a,this._duration=H$c,this._ease=H$d||H$b.ease||H$l.easeNone,this._complete=H$e||H$b.complete,this._delay=H$f,this._props=[],this._usedTimer=0,this._startTimer=H$M.now(),this._usedPool=H$i,this._delayParam=null,this.update=H$b.update;var H$k=H$a.$_GID||(H$a.$_GID=H$Y.getGID());return H$l.tweenMap[H$k]?(H$g&&H$l.clearTween(H$a),H$l.tweenMap[H$k].push(this)):H$l.tweenMap[H$k]=[this],H$j?H$f<=0?this.firstStart(H$a,H$b,H$h):(this._delayParam=[H$a,H$b,H$h],H$x.scaleTimer.once(H$f,this,this.firstStart,this._delayParam)):this._initProps(H$a,H$b,H$h),this},H$a.firstStart=function(H$a,H$b,H$c){this._delayParam=null,H$a.destroyed?this.clear():(this._initProps(H$a,H$b,H$c),this._beginLoop())},H$a._initProps=function(H$a,H$b,H$c){for(var H$d in H$b)if("number"==typeof H$a[H$d]){var H$e=H$c?H$a[H$d]:H$b[H$d],H$f=H$c?H$b[H$d]:H$a[H$d];this._props.push([H$d,H$e,H$f-H$e]),H$c||(H$a[H$d]=H$e)}},H$a._beginLoop=function(){H$x.scaleTimer.frameLoop(1,this,this._doEase)},H$a._doEase=function(){this._updateEase(H$M.now())},H$a._updateEase=function(H$a){var H$b=this._target;if(H$b){if(H$b.destroyed)return H$l.clearTween(H$b);var H$c=this._usedTimer=H$a-this._startTimer-this._delay;if(!(H$c<0)){if(H$c>=this._duration)return this.complete();for(var H$d=0<H$c?this._ease(H$c,0,1,this._duration):0,H$e=this._props,H$f=0,H$g=H$e.length;H$f<H$g;H$f++){var H$h=H$e[H$f];H$b[H$h[0]]=H$h[1]+H$d*H$h[2]}this.update&&this.update.run()}}},H$a.complete=function(){if(this._target){H$x.scaleTimer.runTimer(this,this.firstStart);for(var H$a=this._target,H$b=this._props,H$c=this._complete,H$d=0,H$e=H$b.length;H$d<H$e;H$d++){var H$f=H$b[H$d];H$a[H$f[0]]=H$f[1]+H$f[2]}this.update&&this.update.run(),this.clear(),H$c&&H$c.run()}},H$a.pause=function(){H$x.scaleTimer.clear(this,this._beginLoop),H$x.scaleTimer.clear(this,this._doEase),H$x.scaleTimer.clear(this,this.firstStart);var H$a;(H$a=H$M.now()-this._startTimer-this._delay)<0&&(this._usedTimer=H$a)},H$a.setStartTime=function(H$a){this._startTimer=H$a},H$a.clear=function(){this._target&&(this._remove(),this._clear())},H$a._clear=function(){this.pause(),H$x.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,H$U.recover("tween",this))},H$a.recover=function(){this._usedPool=!0,this._clear()},H$a._remove=function(){var H$a=H$l.tweenMap[this._target.$_GID];if(H$a)for(var H$b=0,H$c=H$a.length;H$b<H$c;H$b++)if(H$a[H$b]===this){H$a.splice(H$b,1);break}},H$a.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=H$M.now(),this._delayParam)H$x.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var H$a=this._props,H$b=0,H$c=H$a.length;H$b<H$c;H$b++){var H$d=H$a[H$b];this._target[H$d[0]]=H$d[1]}H$x.scaleTimer.once(this._delay,this,this._beginLoop)}},H$a.resume=function(){this._usedTimer>=this._duration||(this._startTimer=H$M.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?H$x.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},H$o(0,H$a,"progress",null,function(H$a){var H$b=H$a*this._duration;this._startTimer=H$M.now()-this._delay-H$b}),H$l.to=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){return void 0===H$f&&(H$f=0),void 0===H$g&&(H$g=!1),void 0===H$h&&(H$h=!0),H$U.getItemByClass("tween",H$l)._create(H$a,H$b,H$c,H$d,H$e,H$f,H$g,!0,H$h,!0)},H$l.from=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){return void 0===H$f&&(H$f=0),void 0===H$g&&(H$g=!1),void 0===H$h&&(H$h=!0),H$U.getItemByClass("tween",H$l)._create(H$a,H$b,H$c,H$d,H$e,H$f,H$g,!1,H$h,!0)},H$l.clearAll=function(H$a){if(H$a&&H$a.$_GID){var H$b=H$l.tweenMap[H$a.$_GID];if(H$b){for(var H$c=0,H$d=H$b.length;H$c<H$d;H$c++)H$b[H$c]._clear();H$b.length=0}}},H$l.clear=function(H$a){H$a.clear()},H$l.clearTween=function(H$a){H$l.clearAll(H$a)},H$l.easeNone=function(H$a,H$b,H$c,H$d){return H$c*H$a/H$d+H$b},H$l.tweenMap={},H$l}(),H$Y=function(){function H$h(){}return H$k(H$h,"laya.utils.Utils"),H$h.toRadian=function(H$a){return H$a*H$h._pi2},H$h.toAngle=function(H$a){return H$a*H$h._pi},H$h.toHexColor=function(H$a){if(H$a<0||isNaN(H$a))return null;for(var H$b=H$a.toString(16);H$b.length<6;)H$b="0"+H$b;return"#"+H$b},H$h.getGID=function(){return H$h._gid++},H$h.concatArray=function(H$a,H$b){if(!H$b)return H$a;if(!H$a)return H$b;var H$c=0,H$d=H$b.length;for(H$c=0;H$c<H$d;H$c++)H$a.push(H$b[H$c]);return H$a},H$h.clearArray=function(H$a){return H$a&&(H$a.length=0),H$a},H$h.copyArray=function(H$a,H$b){if(H$a||(H$a=[]),!H$b)return H$a;H$a.length=H$b.length;var H$c=0,H$d=H$b.length;for(H$c=0;H$c<H$d;H$c++)H$a[H$c]=H$b[H$c];return H$a},H$h.getGlobalRecByPoints=function(H$a,H$b,H$c,H$d,H$e){var H$f,H$g;return H$f=new H$y(H$b,H$c),H$f=H$a.localToGlobal(H$f),H$g=new H$y(H$d,H$e),H$g=H$a.localToGlobal(H$g),H$z._getWrapRec([H$f.x,H$f.y,H$g.x,H$g.y])},H$h.getGlobalPosAndScale=function(H$a){return H$h.getGlobalRecByPoints(H$a,0,0,1,1)},H$h.bind=function(H$a,H$b){return H$a.bind(H$b)},H$h.measureText=function(H$a,H$b){return H$D.measureText(H$a,H$b)},H$h.updateOrder=function(H$a){if(!H$a||H$a.length<2)return!1;for(var H$b,H$c=1,H$d=0,H$e=H$a.length,H$f=NaN;H$c<H$e;){for(H$b=H$a[H$d=H$c],H$f=H$a[H$d]._zOrder;-1<--H$d&&H$a[H$d]._zOrder>H$f;)H$a[H$d+1]=H$a[H$d];H$a[H$d+1]=H$b,H$c++}var H$g=H$b.parent.conchModel;if(H$g)if(null!=H$g.updateZOrder)H$g.updateZOrder();else{for(H$c=0;H$c<H$e;H$c++)H$g.removeChild(H$a[H$c].conchModel);for(H$c=0;H$c<H$e;H$c++)H$g.addChildAt(H$a[H$c].conchModel,H$c)}return!0},H$h.transPointList=function(H$a,H$b,H$c){var H$d=0,H$e=H$a.length;for(H$d=0;H$d<H$e;H$d+=2)H$a[H$d]+=H$b,H$a[H$d+1]+=H$c},H$h.parseInt=function(H$a,H$b){void 0===H$b&&(H$b=0);var H$c=H$M.window.parseInt(H$a,H$b);return isNaN(H$c)?0:H$c},H$h.getFileExtension=function(H$a){H$h._extReg.lastIndex=H$a.lastIndexOf(".");var H$b=H$h._extReg.exec(H$a);return H$b&&1<H$b.length?H$b[1].toLowerCase():null},H$h.getTransformRelativeToWindow=function(H$a,H$b,H$c){var H$d=H$x.stage,H$e=laya.utils.Utils.getGlobalPosAndScale(H$a),H$f=H$d._canvasTransform.clone(),H$g=H$f.tx,H$h=H$f.ty;H$f.rotate(-Math.PI/180*H$x.stage.canvasDegree),H$f.scale(H$x.stage.clientScaleX,H$x.stage.clientScaleY);var H$i=H$x.stage.canvasDegree%180!=0,H$j=NaN,H$k=NaN;H$i?(H$j=H$c+H$e.y,H$k=H$b+H$e.x,H$j*=H$f.d,H$k*=H$f.a,90==H$x.stage.canvasDegree?(H$j=H$g-H$j,H$k+=H$h):(H$j+=H$g,H$k=H$h-H$k)):(H$j=H$b+H$e.x,H$k=H$c+H$e.y,H$j*=H$f.a,H$k*=H$f.d,H$j+=H$g,H$k+=H$h);var H$l=NaN,H$m=NaN;return H$m=H$i?(H$l=H$f.d*H$e.height,H$f.a*H$e.width):(H$l=H$f.a*H$e.width,H$f.d*H$e.height),{x:H$j,y:H$k,scaleX:H$l,scaleY:H$m}},H$h.fitDOMElementInArea=function(H$a,H$b,H$c,H$d,H$e,H$f){H$a._fitLayaAirInitialized||(H$a._fitLayaAirInitialized=!0,H$a.style.transformOrigin=H$a.style.webKittransformOrigin="left top",H$a.style.position="absolute");var H$g=H$h.getTransformRelativeToWindow(H$b,H$c,H$d);H$a.style.transform=H$a.style.webkitTransform="scale("+H$g.scaleX+","+H$g.scaleY+") rotate("+H$x.stage.canvasDegree+"deg)",H$a.style.width=H$e+"px",H$a.style.height=H$f+"px",H$a.style.left=H$g.x+"px",H$a.style.top=H$g.y+"px"},H$h.isOkTextureList=function(H$a){if(!H$a)return!1;var H$b,H$c=0,H$d=H$a.length;for(H$c=0;H$c<H$d;H$c++)if(!(H$b=H$a[H$c])||!H$b.source)return!1;return!0},H$h.isOKCmdList=function(H$a){if(!H$a)return!1;var H$b,H$c,H$d=0,H$e=H$a.length,H$f=H$H._context;for(H$d=0;H$d<H$e;H$d++)switch((H$b=H$a[H$d]).callee){case H$f._drawTexture:case H$f._fillTexture:case H$f._drawTextureWithTransform:if(!(H$c=H$b[0])||!H$c.source)return!1}return!0},H$h._gid=1,H$h._pi=180/Math.PI,H$h._pi2=Math.PI/180,H$h._extReg=/\.(\w+)\??/g,H$h.parseXMLFromString=function(H$a){var H$b;if(H$a=H$a.replace(/>\s+</g,"><"),-1<(H$b=(new DOMParser).parseFromString(H$a,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(H$b.firstChild.firstChild.textContent);return H$b},H$h}(),H$Z=function(){function H$a(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],H$H.isWebGL&&H$O.regCacheByFunction(H$Y.bind(this.startDispose,this),H$Y.bind(this.getCacheList,this))}H$k(H$a,"laya.utils.VectorGraphManager");var H$b=H$a.prototype;return H$b.getId=function(){return this._id++},H$b.addShape=function(H$a,H$b){this.shapeDic[H$a]=H$b,this.useDic[H$a]||(this.useDic[H$a]=!0)},H$b.addLine=function(H$a,H$b){this.shapeLineDic[H$a]=H$b,this.shapeLineDic[H$a]||(this.shapeLineDic[H$a]=!0)},H$b.getShape=function(H$a){this._checkKey&&null!=this.useDic[H$a]&&(this.useDic[H$a]=!0)},H$b.deleteShape=function(H$a){this.shapeDic[H$a]&&(this.shapeDic[H$a]=null,delete this.shapeDic[H$a]),this.shapeLineDic[H$a]&&(this.shapeLineDic[H$a]=null,delete this.shapeLineDic[H$a]),null!=this.useDic[H$a]&&delete this.useDic[H$a]},H$b.getCacheList=function(){var H$a,H$b=[];for(H$a in this.shapeDic)H$b.push(this.shapeDic[H$a]);for(H$a in this.shapeLineDic)H$b.push(this.shapeLineDic[H$a]);return H$b},H$b.startDispose=function(H$a){var H$b;for(H$b in this.useDic)this.useDic[H$b]=!1;this._checkKey=!0},H$b.endDispose=function(){if(this._checkKey){var H$a;for(H$a in this.useDic)this.useDic[H$a]||this.deleteShape(H$a);this._checkKey=!1}},H$a.getInstance=function(){return H$a.instance=H$a.instance||new H$a},H$a.instance=null,H$a}(),H$$=function(){function H$d(){this._obj=null,this._obj=H$d.supportWeakMap?new H$M.window.WeakMap:{},H$d.supportWeakMap||H$d._maps.push(this)}H$k(H$d,"laya.utils.WeakObject");var H$a=H$d.prototype;return H$a.set=function(H$a,H$b){if(null!=H$a)if(H$d.supportWeakMap){var H$c=H$a;"string"!=typeof H$a&&"number"!=typeof H$a||(H$c=H$d._keys[H$a])||(H$c=H$d._keys[H$a]={k:H$a}),this._obj.set(H$c,H$b)}else"string"==typeof H$a||"number"==typeof H$a?this._obj[H$a]=H$b:(H$a.$_GID||(H$a.$_GID=H$Y.getGID()),this._obj[H$a.$_GID]=H$b)},H$a.get=function(H$a){if(null==H$a)return null;if(H$d.supportWeakMap){var H$b="string"==typeof H$a||"number"==typeof H$a?H$d._keys[H$a]:H$a;return H$b?this._obj.get(H$b):null}return"string"==typeof H$a||"number"==typeof H$a?this._obj[H$a]:this._obj[H$a.$_GID]},H$a.del=function(H$a){if(null!=H$a)if(H$d.supportWeakMap){var H$b="string"==typeof H$a||"number"==typeof H$a?H$d._keys[H$a]:H$a;if(!H$b)return;this._obj.delete(H$b)}else"string"==typeof H$a||"number"==typeof H$a?delete this._obj[H$a]:delete this._obj[this._obj.$_GID]},H$a.has=function(H$a){if(null==H$a)return!1;if(H$d.supportWeakMap){var H$b="string"==typeof H$a||"number"==typeof H$a?H$d._keys[H$a]:H$a;return this._obj.has(H$b)}return"string"==typeof H$a||"number"==typeof H$a?null!=this._obj[H$a]:null!=this._obj[this._obj.$_GID]},H$d.__init__=function(){(H$d.supportWeakMap=null!=H$M.window.WeakMap)||H$x.timer.loop(H$d.delInterval,null,H$d.clearCache)},H$d.clearCache=function(){for(var H$a=0,H$b=H$d._maps.length;H$a<H$b;H$a++){H$d._maps[H$a]._obj={}}},H$d.supportWeakMap=!1,H$d.delInterval=3e5,H$d._keys={},H$d._maps=[],H$i(H$d,["I",function(){return this.I=new H$d}]),H$d}(),H$_=function(){function H$a(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}H$k(H$a,"laya.utils.WordText");var H$b=H$a.prototype;return H$b.setText=function(H$a){this.changed=!0,this._text=H$a},H$b.toString=function(){return this._text},H$b.charCodeAt=function(H$a){return this._text?this._text.charCodeAt(H$a):NaN},H$b.charAt=function(H$a){return this._text?this._text.charAt(H$a):null},H$o(0,H$b,"length",function(){return this._text?this._text.length:0}),H$a}(),H$aa=function(H$a){function H$g(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,H$g.__super.call(this),this._childs=H$g.ARRAY_EMPTY,this._$P=H$g.PROP_EMPTY,this.timer=H$x.scaleTimer,this.conchModel=H$H.isConchNode?this.createConchModel():null}H$k(H$g,"laya.display.Node",H$j);var H$b=H$g.prototype;return H$b._setBit=function(H$a,H$b){1==H$a&&(this._getBit(H$a)!=H$b&&this._updateDisplayedInstage());H$b?this._bits|=H$a:this._bits&=~H$a},H$b._getBit=function(H$a){return 0!=(this._bits&H$a)},H$b._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},H$b._setUpNoticeType=function(H$a){var H$b=this;for(H$b._setBit(H$a,!0),H$b=H$b.parent;H$b;){if(H$b._getBit(H$a))return;H$b._setBit(H$a,!0),H$b=H$b.parent}},H$b.on=function(H$a,H$b,H$c,H$d){return"display"!==H$a&&"undisplay"!==H$a||this._getBit(1)||this._setUpNoticeType(1),this._createListener(H$a,H$b,H$c,H$d,!1)},H$b.once=function(H$a,H$b,H$c,H$d){return"display"!==H$a&&"undisplay"!==H$a||this._getBit(1)||this._setUpNoticeType(1),this._createListener(H$a,H$b,H$c,H$d,!0)},H$b.createConchModel=function(){return null},H$b.destroy=function(H$a){void 0===H$a&&(H$a=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(H$a?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},H$b.destroyChildren=function(){if(this._childs)for(var H$a=this._childs.length-1;-1<H$a;H$a--)this._childs[H$a].destroy(!0)},H$b.addChild=function(H$a){if(!H$a||this.destroyed||H$a===this)return H$a;if(H$a.zOrder&&this._set$P("hasZorder",!0),H$a._parent===this){var H$b=this.getChildIndex(H$a);H$b!==this._childs.length-1&&(this._childs.splice(H$b,1),this._childs.push(H$a),this.conchModel&&(this.conchModel.removeChild(H$a.conchModel),this.conchModel.addChildAt(H$a.conchModel,this._childs.length-1)),this._childChanged())}else H$a.parent&&H$a.parent.removeChild(H$a),this._childs===H$g.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(H$a),this.conchModel&&this.conchModel.addChildAt(H$a.conchModel,this._childs.length-1),(H$a.parent=this)._childChanged();return H$a},H$b.addChildren=function(H$a){for(var H$b=arguments,H$c=0,H$d=H$b.length;H$c<H$d;)this.addChild(H$b[H$c++])},H$b.addChildAt=function(H$a,H$b){if(!H$a||this.destroyed||H$a===this)return H$a;if(H$a.zOrder&&this._set$P("hasZorder",!0),0<=H$b&&H$b<=this._childs.length){if(H$a._parent===this){var H$c=this.getChildIndex(H$a);this._childs.splice(H$c,1),this._childs.splice(H$b,0,H$a),this.conchModel&&(this.conchModel.removeChild(H$a.conchModel),this.conchModel.addChildAt(H$a.conchModel,H$b)),this._childChanged()}else H$a.parent&&H$a.parent.removeChild(H$a),this._childs===H$g.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(H$b,0,H$a),this.conchModel&&this.conchModel.addChildAt(H$a.conchModel,H$b),H$a.parent=this;return H$a}throw new Error("appendChildAt:The index is out of bounds")},H$b.getChildIndex=function(H$a){return this._childs.indexOf(H$a)},H$b.getChildByName=function(H$a){var H$b=this._childs;if(H$b)for(var H$c=0,H$d=H$b.length;H$c<H$d;H$c++){var H$e=H$b[H$c];if(H$e.name===H$a)return H$e}return null},H$b._get$P=function(H$a){return this._$P[H$a]},H$b._set$P=function(H$a,H$b){return this.destroyed||(this._$P===H$g.PROP_EMPTY&&(this._$P={}),this._$P[H$a]=H$b),H$b},H$b.getChildAt=function(H$a){return this._childs[H$a]},H$b.setChildIndex=function(H$a,H$b){var H$c=this._childs;if(H$b<0||H$b>=H$c.length)throw new Error("setChildIndex:The index is out of bounds.");var H$d=this.getChildIndex(H$a);if(H$d<0)throw new Error("setChildIndex:node is must child of this object.");return H$c.splice(H$d,1),H$c.splice(H$b,0,H$a),this.conchModel&&(this.conchModel.removeChild(H$a.conchModel),this.conchModel.addChildAt(H$a.conchModel,H$b)),this._childChanged(),H$a},H$b._childChanged=function(H$a){},H$b.removeChild=function(H$a){if(!this._childs)return H$a;var H$b=this._childs.indexOf(H$a);return this.removeChildAt(H$b)},H$b.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},H$b.removeChildByName=function(H$a){var H$b=this.getChildByName(H$a);return H$b&&this.removeChild(H$b),H$b},H$b.removeChildAt=function(H$a){var H$b=this.getChildAt(H$a);if(H$b){for(var H$c=this._childs.length-1,H$d=H$a;H$d<H$c;++H$d)this._childs[H$d]=this._childs[H$d+1];this._childs.length=H$c,this.conchModel&&this.conchModel.removeChild(H$b.conchModel),H$b.parent=null}return H$b},H$b.removeChildren=function(H$a,H$b){if(void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=2147483647),this._childs&&0<this._childs.length){var H$c=this._childs;if(0===H$a&&H$f<=H$b){var H$d=H$c;this._childs=H$g.ARRAY_EMPTY}else H$d=H$c.splice(H$a,H$b-H$a);for(var H$e=0,H$f=H$d.length;H$e<H$f;H$e++)H$d[H$e].parent=null,this.conchModel&&this.conchModel.removeChild(H$d[H$e].conchModel)}return this},H$b.replaceChild=function(H$a,H$b){var H$c=this._childs.indexOf(H$b);return-1<H$c?(this._childs.splice(H$c,1,H$a),this.conchModel&&(this.conchModel.removeChild(H$b.conchModel),this.conchModel.addChildAt(H$a.conchModel,H$c)),H$b.parent=null,H$a.parent=this,H$a):null},H$b._updateDisplayedInstage=function(){var H$a;H$a=this;var H$b=H$x.stage;for(this._displayedInStage=!1;H$a;){if(H$a._getBit(1)){this._displayedInStage=H$a._displayedInStage;break}if(H$a==H$b||H$a._displayedInStage){this._displayedInStage=!0;break}H$a=H$a.parent}},H$b._setDisplay=function(H$a){this._displayedInStage!==H$a&&((this._displayedInStage=H$a)?this.event("display"):this.event("undisplay"))},H$b._displayChild=function(H$a,H$b){var H$c=H$a._childs;if(H$c)for(var H$d=0;H$d<H$c.length;H$d++){var H$e=H$c[H$d];H$e&&H$e._getBit(1)&&(0<H$e._childs.length?this._displayChild(H$e,H$b):H$e._setDisplay(H$b))}H$a._setDisplay(H$b)},H$b.contains=function(H$a){if(H$a===this)return!0;for(;H$a;){if(H$a.parent===this)return!0;H$a=H$a.parent}return!1},H$b.timerLoop=function(H$a,H$b,H$c,H$d,H$e,H$f){void 0===H$e&&(H$e=!0),void 0===H$f&&(H$f=!1),this.timer.loop(H$a,H$b,H$c,H$d,H$e,H$f)},H$b.timerOnce=function(H$a,H$b,H$c,H$d,H$e){void 0===H$e&&(H$e=!0),this.timer._create(!1,!1,H$a,H$b,H$c,H$d,H$e)},H$b.frameLoop=function(H$a,H$b,H$c,H$d,H$e){void 0===H$e&&(H$e=!0),this.timer._create(!0,!0,H$a,H$b,H$c,H$d,H$e)},H$b.frameOnce=function(H$a,H$b,H$c,H$d,H$e){void 0===H$e&&(H$e=!0),this.timer._create(!0,!1,H$a,H$b,H$c,H$d,H$e)},H$b.clearTimer=function(H$a,H$b){this.timer.clear(H$a,H$b)},H$o(0,H$b,"numChildren",function(){return this._childs.length}),H$o(0,H$b,"destroyed",function(){return this._destroyed}),H$o(0,H$b,"parent",function(){return this._parent},function(H$a){this._parent!==H$a&&(H$a?(this._parent=H$a,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),H$a.displayedInStage&&this._displayChild(this,!0)),H$a._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=H$a))}),H$o(0,H$b,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),H$g.ARRAY_EMPTY=[],H$g.PROP_EMPTY={},H$g.NOTICE_DISPLAY=1,H$g.MOUSEENABLE=2,H$g}(),H$ba=function(H$a){function H$m(H$a){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,H$m.__super.call(this),this._padding=H$m._PADDING,this._spacing=H$m._SPACING,this._aligns=H$m._ALIGNS,this._font=H$n.EMPTY,this._ower=H$a}H$k(H$m,"laya.display.css.CSSStyle",H$a);var H$b=H$m.prototype;return H$b.destroy=function(){this._ower=null,this._font=null,this._rect=null},H$b.inherit=function(H$a){this._font=H$a._font,this._spacing=H$a._spacing===H$m._SPACING?H$m._SPACING:H$a._spacing.slice(),this.lineHeight=H$a.lineHeight},H$b._widthAuto=function(){return 0!=(262144&this._type)},H$b.widthed=function(H$a){return 0!=(8&this._type)},H$b._calculation=function(H$a,H$b){if(H$b.indexOf("%")<0)return!1;var H$d=this._ower,H$e=H$d.parent,H$f=this._rect;function H$g(H$a,H$b,H$c){return H$a*H$c[0]+H$b*H$c[1]+H$c[2]}function H$c(H$a){var H$b=H$e.width,H$c=H$d.width;H$f.width&&(H$d.width=H$g(H$b,H$c,H$f.width)),H$f.height&&(H$d.height=H$g(H$b,H$c,H$f.height)),H$f.left&&(H$d.x=H$g(H$b,H$c,H$f.left)),H$f.top&&(H$d.y=H$g(H$b,H$c,H$f.top))}null===H$f&&(H$e._getCSSStyle()._type|=524288,H$e.on("resize",this,H$c),this._rect=H$f={input:{}});var H$h=H$b.split(" ");return H$h[0]=parseFloat(H$h[0])/100,1==H$h.length?H$h[1]=H$h[2]=0:(H$h[1]=parseFloat(H$h[1])/100,H$h[2]=parseFloat(H$h[2])),H$f[H$a]=H$h,H$f.input[H$a]=H$b,H$c(),!0},H$b.heighted=function(H$a){return 0!=(8192&this._type)},H$b.size=function(H$a,H$b){var H$c=this._ower,H$d=!1;-1!==H$a&&H$a!=this._ower.width&&(this._type|=8,this._ower.width=H$a,H$d=!0),-1!==H$b&&H$b!=this._ower.height&&(this._type|=8192,this._ower.height=H$b,H$d=!0),H$d&&(H$c._layoutLater(),524288&this._type&&H$c.event("resize",this))},H$b._getAlign=function(){return this._aligns[0]},H$b._getValign=function(){return this._aligns[1]},H$b._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},H$b._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new H$n(this._font))},H$b.render=function(H$a,H$b,H$c,H$d){var H$e=H$a.width,H$f=H$a.height;H$c-=H$a.pivotX,H$d-=H$a.pivotY,this._bgground&&null!=this._bgground.color&&H$b.ctx.fillRect(H$c,H$d,H$e,H$f,this._bgground.color),this._border&&this._border.color&&H$b.drawRect(H$c,H$d,H$e,H$f,this._border.color.strColor,this._border.size)},H$b.getCSSStyle=function(){return this},H$b.cssText=function(H$a){this.attrs(H$m.parseOneCSS(H$a,";"))},H$b.attrs=function(H$a){if(H$a)for(var H$b=0,H$c=H$a.length;H$b<H$c;H$b++){var H$d=H$a[H$b];this[H$d[0]]=H$d[1]}},H$b.setTransform=function(H$a){"none"===H$a?this._tf=H$h._TF_EMPTY:this.attrs(H$m.parseOneCSS(H$a,","))},H$b.translate=function(H$a,H$b){this._tf===H$h._TF_EMPTY&&(this._tf=new H$e),this._tf.translateX=H$a,this._tf.translateY=H$b},H$b.scale=function(H$a,H$b){this._tf===H$h._TF_EMPTY&&(this._tf=new H$e),this._tf.scaleX=H$a,this._tf.scaleY=H$b},H$b._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},H$o(0,H$b,"block",H$a.prototype._$get_block,function(H$a){H$a?this._type|=1:this._type&=-2}),H$o(0,H$b,"valign",function(){return H$m._valigndef[this._aligns[1]]},function(H$a){this._aligns===H$m._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=H$m._valigndef[H$a]}),H$o(0,H$b,"height",null,function(H$a){if(this._type|=8192,"string"==typeof H$a){if(this._calculation("height",H$a))return;H$a=parseInt(H$a)}this.size(-1,H$a)}),H$o(0,H$b,"width",null,function(H$a){if(this._type|=8,"string"==typeof H$a){var H$b=H$a.indexOf("auto");if(0<=H$b&&(this._type|=262144,H$a=H$a.substr(0,H$b)),this._calculation("width",H$a))return;H$a=parseInt(H$a)}this.size(H$a,-1)}),H$o(0,H$b,"fontWeight",function(){return this._font.weight},function(H$a){this._createFont().weight=H$a}),H$o(0,H$b,"left",null,function(H$a){var H$b=this._ower;if("string"==typeof H$a){if("center"===H$a?H$a="50% -50% 0":"right"===H$a&&(H$a="100% -100% 0"),this._calculation("left",H$a))return;H$a=parseInt(H$a)}H$b.x=H$a}),H$o(0,H$b,"_translate",null,function(H$a){this.translate(H$a[0],H$a[1])}),H$o(0,H$b,"absolute",function(){return 0!=(4&this._type)}),H$o(0,H$b,"top",null,function(H$a){var H$b=this._ower;if("string"==typeof H$a){if("middle"===H$a?H$a="50% -50% 0":"bottom"===H$a&&(H$a="100% -100% 0"),this._calculation("top",H$a))return;H$a=parseInt(H$a)}H$b.y=H$a}),H$o(0,H$b,"align",function(){return H$m._aligndef[this._aligns[0]]},function(H$a){this._aligns===H$m._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=H$m._aligndef[H$a]}),H$o(0,H$b,"bold",function(){return this._font.bold},function(H$a){this._createFont().bold=H$a}),H$o(0,H$b,"padding",function(){return this._padding},function(H$a){this._padding=H$a}),H$o(0,H$b,"leading",function(){return this._spacing[1]},function(H$a){"string"==typeof H$a&&(H$a=parseInt(H$a+"")),this._spacing===H$m._SPACING&&(this._spacing=[0,0]),this._spacing[1]=H$a}),H$o(0,H$b,"lineElement",function(){return 0!=(65536&this._type)},function(H$a){H$a?this._type|=65536:this._type&=-65537}),H$o(0,H$b,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(H$a){this.lineElement=!1,"right"===H$a?this._type|=32768:this._type&=-32769}),H$o(0,H$b,"textDecoration",function(){return this._font.decoration},function(H$a){this._createFont().decoration=H$a}),H$o(0,H$b,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(H$a){"nowrap"===H$a&&(this._type|=131072),"none"===H$a&&(this._type&=-131073)}),H$o(0,H$b,"background",null,function(H$a){H$a?(this._bgground||(this._bgground={}),this._bgground.color=H$a,this._ower.conchModel&&this._ower.conchModel.bgColor(H$a),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),H$o(0,H$b,"wordWrap",function(){return 0==(131072&this._type)},function(H$a){H$a?this._type&=-131073:this._type|=131072}),H$o(0,H$b,"color",function(){return this._font.color},function(H$a){this._createFont().color=H$a}),H$o(0,H$b,"password",function(){return this._font.password},function(H$a){this._createFont().password=H$a}),H$o(0,H$b,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(H$a){"none"===H$a?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=H$a),this._ower.conchModel&&this._ower.conchModel.bgColor(H$a),this._ower._renderType|=256}),H$o(0,H$b,"font",function(){return this._font.toString()},function(H$a){this._createFont().set(H$a)}),H$o(0,H$b,"weight",null,function(H$a){this._createFont().weight=H$a}),H$o(0,H$b,"letterSpacing",function(){return this._spacing[0]},function(H$a){"string"==typeof H$a&&(H$a=parseInt(H$a+"")),this._spacing===H$m._SPACING&&(this._spacing=[0,0]),this._spacing[0]=H$a}),H$o(0,H$b,"fontSize",function(){return this._font.size},function(H$a){this._createFont().size=H$a}),H$o(0,H$b,"italic",function(){return this._font.italic},function(H$a){this._createFont().italic=H$a}),H$o(0,H$b,"fontFamily",function(){return this._font.family},function(H$a){this._createFont().family=H$a}),H$o(0,H$b,"stroke",function(){return this._font.stroke[0]},function(H$a){this._createFont().stroke===H$n._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=H$a}),H$o(0,H$b,"strokeColor",function(){return this._font.stroke[1]},function(H$a){this._createFont().stroke===H$n._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=H$a}),H$o(0,H$b,"border",function(){return this._border?this._border.value:""},function(H$a){if("none"!=H$a){this._border||(this._border={});var H$b=(this._border.value=H$a).split(" ");if(this._border.color=H$Q.create(H$b[H$b.length-1]),1==H$b.length)return this._border.size=1,void(this._border.type="solid");var H$c=0;0<H$b[0].indexOf("px")?(this._border.size=parseInt(H$b[0]),H$c++):this._border.size=1,this._border.type=H$b[H$c],this._ower._renderType|=256}else this._border=null}),H$o(0,H$b,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(H$a){H$a?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==H$a?null:H$Q.create(H$a),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),H$o(0,H$b,"position",function(){return 4&this._type?"absolute":""},function(H$a){"absolute"==H$a?this._type|=4:this._type&=-5}),H$o(0,H$b,"display",null,function(H$a){switch(H$a){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),H$o(0,H$b,"paddingLeft",function(){return this.padding[3]}),H$o(0,H$b,"paddingTop",function(){return this.padding[0]}),H$o(0,H$b,"_scale",null,function(H$a){this._ower.scale(H$a[0],H$a[1])}),H$o(0,H$b,"_rotate",null,function(H$a){this._ower.rotation=H$a}),H$m.parseOneCSS=function(H$a,H$b){for(var H$c,H$d=[],H$e=H$a.split(H$b),H$f=0,H$g=H$e.length;H$f<H$g;H$f++){var H$h=H$e[H$f],H$i=H$h.indexOf(":"),H$j=H$h.substr(0,H$i).replace(/^\s+|\s+$/g,"");if(0!=H$j.length){var H$k=H$h.substr(H$i+1).replace(/^\s+|\s+$/g,""),H$l=[H$j,H$k];switch(H$j){case"italic":case"bold":H$l[1]="true"==H$k;break;case"line-height":H$l[0]="lineHeight",H$l[1]=parseInt(H$k);break;case"font-size":H$l[0]="fontSize",H$l[1]=parseInt(H$k);break;case"padding":1<(H$c=H$k.split(" ")).length||(H$c[1]=H$c[2]=H$c[3]=H$c[0]),H$l[1]=[parseInt(H$c[0]),parseInt(H$c[1]),parseInt(H$c[2]),parseInt(H$c[3])];break;case"rotate":H$l[0]="_rotate",H$l[1]=parseFloat(H$k);break;case"scale":H$c=H$k.split(" "),H$l[0]="_scale",H$l[1]=[parseFloat(H$c[0]),parseFloat(H$c[1])];break;case"translate":H$c=H$k.split(" "),H$l[0]="_translate",H$l[1]=[parseInt(H$c[0]),parseInt(H$c[1])];break;default:(H$l[0]=H$m._CSSTOVALUE[H$j])||(H$l[0]=H$j)}H$d.push(H$l)}}return H$d},H$m.parseCSS=function(H$a,H$b){for(var H$c;null!=(H$c=H$m._parseCSSRegExp.exec(H$a));)H$m.styleSheets[H$c[1]]=H$m.parseOneCSS(H$c[2],";")},H$m.EMPTY=new H$m(null),H$m._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},H$m._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),H$m._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},H$m._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},H$m.styleSheets={},H$m.ALIGN_CENTER=1,H$m.ALIGN_RIGHT=2,H$m.VALIGN_MIDDLE=1,H$m.VALIGN_BOTTOM=2,H$m._CSS_BLOCK=1,H$m._DISPLAY_NONE=2,H$m._ABSOLUTE=4,H$m._WIDTH_SET=8,H$m._PADDING=[0,0,0,0],H$m._RECT=[-1,-1,-1,-1],H$m._SPACING=[0,0],H$m._ALIGNS=[0,0,0],H$m.ADDLAYOUTED=512,H$m._NEWFONT=4096,H$m._HEIGHT_SET=8192,H$m._BACKGROUND_SET=16384,H$m._FLOAT_RIGHT=32768,H$m._LINE_ELEMENT=65536,H$m._NOWARP=131072,H$m._WIDTHAUTO=262144,H$m._LISTERRESZIE=524288,H$m}(H$h),H$ca=function(H$a){function H$g(){this.url=null,this.audio=null,this.loaded=!1,H$g.__super.call(this)}H$k(H$g,"laya.media.h5audio.AudioSound",H$j);var H$b=H$g.prototype;return H$b.dispose=function(){var H$a=H$g._audioCache[this.url];H$a&&(H$a.src="",delete H$g._audioCache[this.url])},H$b.load=function(H$a){var H$b;if(H$a=H$G.formatURL(H$a),(this.url=H$a)==H$C._tMusic?(H$g._initMusicAudio(),(H$b=H$g._musicAudio).src!=H$a&&(H$g._audioCache[H$b.src]=null,H$b=null)):H$b=H$g._audioCache[H$a],H$b&&2<=H$b.readyState)this.event("complete");else{H$b||(H$b=H$a==H$C._tMusic?(H$g._initMusicAudio(),H$g._musicAudio):H$M.createElement("audio"),(H$g._audioCache[H$a]=H$b).src=H$a),H$b.addEventListener("canplaythrough",H$d),H$b.addEventListener("error",H$e);var H$c=this;(this.audio=H$b).load?H$b.load():H$e()}function H$d(){H$f(),H$c.loaded=!0,H$c.event("complete")}function H$e(){H$b.load=null,H$f(),H$c.event("error")}function H$f(){H$b.removeEventListener("canplaythrough",H$d),H$b.removeEventListener("error",H$e)}},H$b.play=function(H$a,H$b,H$c){if(void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=0),!this.url)return null;var H$d,H$e;if(!(H$d=this.url==H$C._tMusic?H$g._musicAudio:H$g._audioCache[this.url]))return null;H$e=H$U.getItem("audio:"+this.url),H$H.isConchApp?H$e||((H$e=H$M.createElement("audio")).src=this.url):this.url==H$C._tMusic?(H$g._initMusicAudio(),(H$e=H$g._musicAudio).src=this.url):H$e=H$e||H$d.cloneNode(!0);var H$f=new H$ma(H$e);return H$f.url=this.url,H$f.loops=H$b,H$f.startTime=H$a,H$f.startHandler=H$c,H$f.play(!1),H$C.addChannel(H$f),H$f},H$o(0,H$b,"duration",function(){var H$a;return(H$a=H$g._audioCache[this.url])?H$a.duration:0}),H$g._initMusicAudio=function(){H$g._musicAudio||(H$g._musicAudio||(H$g._musicAudio=H$M.createElement("audio")),H$H.isConchApp||H$M.document.addEventListener("mousedown",H$g._makeMusicOK))},H$g._makeMusicOK=function(){H$M.document.removeEventListener("mousedown",H$g._makeMusicOK),H$g._musicAudio.src?H$g._musicAudio.play():(H$g._musicAudio.src="",H$g._musicAudio.load())},H$g._audioCache={},H$g._musicAudio=null,H$g}(),H$da=function(H$a){function H$b(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,H$b.__super.call(this)}H$k(H$b,"laya.media.SoundChannel",H$j);var H$c=H$b.prototype;return H$c.play=function(){},H$c.stop=function(){},H$c.pause=function(){},H$c.resume=function(){},H$c.__runComplete=function(H$a){H$a&&H$a.run()},H$o(0,H$c,"volume",function(){return 1},function(H$a){}),H$o(0,H$c,"position",function(){return 0}),H$o(0,H$c,"duration",function(){return 0}),H$b}(),H$ea=function(H$a){function H$b(){H$b.__super.call(this)}H$k(H$b,"laya.media.Sound",H$j);var H$c=H$b.prototype;return H$c.load=function(H$a){},H$c.play=function(H$a,H$b,H$c){return void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=0),null},H$c.dispose=function(){},H$o(0,H$c,"duration",function(){return 0}),H$b}(),H$fa=function(H$a){function H$e(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,H$e.__super.call(this)}H$k(H$e,"laya.media.webaudio.WebAudioSound",H$j);var H$b=H$e.prototype;return H$b.load=function(H$a){this.url=H$a,this.audioBuffer=H$e._dataCache[H$a],this.audioBuffer?this._loaded(this.audioBuffer):(H$e.e.on("loaded:"+H$a,this,this._loaded),H$e.e.on("err:"+H$a,this,this._err),H$e.__loadingSound[H$a]||(H$e.__loadingSound[H$a]=!0,H$x.loader.load(H$a,H$s.create(this,this.onloaded),null,H$ha.BUFFER,4,!1,null,!0)))},H$b.onloaded=function(H$a){H$a||this._err(),this._disposed?this._removeLoadEvents():(this.data=H$a,H$e.buffs.push({buffer:this.data,url:this.url}),H$e.decode())},H$b._err=function(){if(this._removeLoadEvents(),H$e.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var H$a,H$b,H$c,H$d=0;for(H$a=(H$b=this.__toPlays).length,H$d=0;H$d<H$a;H$d++)(H$c=H$b[H$d])[3]&&!H$c[3].isStopped&&H$c[3].event("error");this.__toPlays.length=0}},H$b._loaded=function(H$a){this._removeLoadEvents(),this._disposed||(this.audioBuffer=H$a,this.loaded=!0,this.event("complete"))},H$b._removeLoadEvents=function(){H$e.e.off("loaded:"+this.url,this,this._loaded),H$e.e.off("err:"+this.url,this,this._err)},H$b.__playAfterLoaded=function(){if(this.__toPlays){var H$a,H$b,H$c,H$d=0;for(H$a=(H$b=this.__toPlays).length,H$d=0;H$d<H$a;H$d++)(H$c=H$b[H$d])[3]&&!H$c[3].isStopped&&this.play(H$c[0],H$c[1],H$c[2],H$c[3]);this.__toPlays.length=0}},H$b.play=function(H$a,H$b,H$c,H$d){return void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=0),H$d=H$d||new H$na,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([H$a,H$b,H$c,H$d]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),H$d.url=this.url,H$d.loops=H$b,H$d.audioBuffer=this.audioBuffer,H$d.startTime=H$a,H$d.startHandler=H$c,H$d.play(!1),H$C.addChannel(H$d),H$d},H$b.dispose=function(){this._disposed=!0,delete H$e._dataCache[this.url],delete H$e.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},H$o(0,H$b,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),H$e.decode=function(){if(!(H$e.buffs.length<=0||H$e.isDecoding))if(H$e.isDecoding=!0,(H$e.tInfo=H$e.buffs.shift())&&H$e.tInfo.buffer&&H$e.tInfo.buffer.byteLength)try{H$e.ctx.decodeAudioData(H$e.tInfo.buffer,H$e._done,H$e._fail)}catch(H$a){console.error("decodeAudioData error  byteLength:"+H$e.tInfo.buffer.byteLength+"  url:"+H$e.tInfo.url)}else H$e._fail()},H$e._done=function(H$a){H$e.e.event("loaded:"+H$e.tInfo.url,H$a),H$e._dataCache[H$e.tInfo.url]=H$a,H$e.isDecoding=!1,H$e.decode()},H$e._fail=function(){H$e.e.event("err:"+H$e.tInfo.url,null),H$e.isDecoding=!1,H$e.decode()},H$e._playEmptySound=function(){if(null!=H$e.ctx){if(H$e._emptySource&&(H$e._emptySource.stop(),H$e._emptySource.disconnect(0),!H$na._tryCleanFailed))try{H$e._emptySource.buffer=null}catch(H$a){H$na._tryCleanFailed=!0}var H$a=H$e.ctx.createBufferSource();H$a.buffer=H$e._miniBuffer,H$a.connect(H$e.ctx.destination),H$a.start(0,0,0),H$e._emptySource=H$a}},H$e._unlock=function(){H$e._unlocked||(H$e._playEmptySound(),"running"==H$e.ctx.state?(H$M.document.removeEventListener("mousedown",H$e._unlock,!0),H$M.document.removeEventListener("touchend",H$e._unlock,!0),H$M.document.removeEventListener("touchstart",H$e._unlock,!0),H$e._unlocked=!0):"suspended"==H$e.ctx.state&&H$C._recoverWebAudio())},H$e.initWebAudio=function(){"running"!=H$e.ctx.state&&(H$e._unlock(),H$M.document.addEventListener("mousedown",H$e._unlock,!0),H$M.document.addEventListener("touchend",H$e._unlock,!0),H$M.document.addEventListener("touchstart",H$e._unlock,!0))},H$e._emptySource=null,H$e._dataCache={},H$e.buffs=[],H$e.isDecoding=!1,H$e._unlocked=!1,H$e.tInfo=null,H$e.__loadingSound={},H$i(H$e,["window",function(){return this.window=H$M.window},"webAudioEnabled",function(){return this.webAudioEnabled=H$e.window.AudioContext||H$e.window.webkitAudioContext||H$e.window.mozAudioContext},"ctx",function(){return this.ctx=H$e.webAudioEnabled?new(H$e.window.AudioContext||H$e.window.webkitAudioContext||H$e.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=H$e.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new H$j}]),H$e}(),H$ga=function(H$a){function H$b(){this._responseType=null,this._data=null,H$b.__super.call(this),this._http=new H$M.window.XMLHttpRequest}H$k(H$b,"laya.net.HttpRequest",H$j);var H$c=H$b.prototype;return H$c.send=function(H$a,H$b,H$c,H$d,H$e){void 0===H$c&&(H$c="get"),void 0===H$d&&(H$d="text"),this._responseType=H$d,this._data=null;var H$f=this,H$g=this._http;if(H$g.open(H$c,H$a,!0),H$e)for(var H$h=0;H$h<H$e.length;H$h++)H$g.setRequestHeader(H$e[H$h++],H$e[H$h]);else H$H.isConchApp||(H$b&&"string"!=typeof H$b?H$g.setRequestHeader("Content-Type","application/json"):H$g.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));H$g.responseType="arraybuffer"!==H$d?"text":"arraybuffer",H$g.onerror=function(H$a){H$f._onError(H$a)},H$g.onabort=function(H$a){H$f._onAbort(H$a)},H$g.onprogress=function(H$a){H$f._onProgress(H$a)},H$g.onload=function(H$a){H$f._onLoad(H$a)},H$g.send(H$b)},H$c._onProgress=function(H$a){H$a&&H$a.lengthComputable&&this.event("progress",H$a.loaded/H$a.total)},H$c._onAbort=function(H$a){this.error("Request was aborted by user")},H$c._onError=function(H$a){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},H$c._onLoad=function(H$a){var H$b=this._http,H$c=void 0!==H$b.status?H$b.status:200;200===H$c||204===H$c||0===H$c?this.complete():this.error("["+H$b.status+"]"+H$b.statusText+":"+H$b.responseURL)},H$c.error=function(H$a){this.clear(),this.event("error",H$a)},H$c.complete=function(){this.clear();var H$b=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=H$Y.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(H$a){H$b=!1,this.error(H$a.message)}H$b&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},H$c.clear=function(){var H$a=this._http;H$a.onerror=H$a.onabort=H$a.onprogress=H$a.onload=null},H$o(0,H$c,"url",function(){return this._http.responseURL}),H$o(0,H$c,"http",function(){return this._http}),H$o(0,H$c,"data",function(){return this._data}),H$b}(),H$ha=function(H$a){function H$A(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,H$A.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}H$k(H$A,"laya.net.Loader",H$j);var H$b=H$A.prototype;return H$b.load=function(H$a,H$b,H$c,H$d,H$e){if(H$a&&""!=H$a||console.error("Loader 加载的url不合法 "+H$a),void 0===H$c&&(H$c=!0),void 0===H$e&&(H$e=!1),0===(this._url=H$a).indexOf("data:image")?this._type=H$b="image":this._type=H$b||(H$b=this.getTypeFromUrl(H$a)),this._cache=H$c,this._data=null,!H$e&&H$A.loadedMap[H$a])return this._data=H$A.loadedMap[H$a],this.event("progress",1),void this.event("complete",this._data);if(H$d&&H$A.setGroup(H$a,H$d),null!=H$A.parserMap[H$b])return this._customParse=!0,void(H$A.parserMap[H$b]instanceof laya.utils.Handler?H$A.parserMap[H$b].runWith(this):H$A.parserMap[H$b].call(null,this));if("image"===H$b||"htmlimage"===H$b||"nativeimage"===H$b)return this._loadImage(H$a);if("ttf"===H$b)return this._loadTTF(H$a);switch(H$b){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:H$b}H$A.preLoadedMap[H$a]?this.onLoaded(H$A.preLoadedMap[H$a]):H$g.resMgrLoad(H$a,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},H$b.getTypeFromUrl=function(H$a){var H$b=H$Y.getFileExtension(H$a);return H$b?H$A.typeMap[H$b]:(console.warn("Not recognize the resources suffix",H$a),"text")},H$b._loadTTF=function(H$a){H$a=H$G.formatURL(H$a);var H$b=new H$F;H$b.complete=H$s.create(this,this.onLoaded),H$b.load(H$a)},H$b._loadImage=function(H$a){H$g.imgMgrLoad(H$a,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},H$b._loadImageComplete=function(H$a,H$b,H$c){if(null!=H$c)if(H$c instanceof ArrayBuffer){var H$d=new DataView(H$c),H$e=new laya.webgl.resource.WebGLImage(new Uint8Array(H$c,8),H$a,0,!1,H$d.getUint32(0),H$d.getUint32(4));this.onLoaded(H$e)}else if(H$c instanceof H$ka)H$A.imgMgrSet[H$a]=H$b,H$g.imgMgrLock(H$a,H$A.imgMgrSet[H$a]),this._url=H$a,this.complete(H$c);else{var H$f=-1!=H$a.indexOf(".png",H$a.length-4)?6408:6407;H$e=new laya.webgl.resource.WebGLImage(H$c,H$a,H$f,!1,H$c.width,H$c.height);this.onLoaded(H$e)}else this.event("error","Load image failed")},H$b._loadSound=function(H$a){var H$b=new H$C._soundClass,H$c=this;function H$d(){H$b.offAll()}H$b.on("complete",this,function(){H$d(),H$c.onLoaded(H$b)}),H$b.on("error",this,function(){H$d(),H$b.dispose(),H$c.event("error","Load sound failed")}),H$b.load(H$a)},H$b.onProgress=function(H$a){"atlas"===this._type?this.event("progress",.3*H$a):this.event("progress",H$a)},H$b.onError=function(H$a){this.event("error",H$a)},H$b._loadedComplete=function(H$a,H$b,H$c){if(null!=H$c)switch(this._type){case"atlas":case"plf":case"json":var H$d=new H$N(H$c);this.onLoaded(JSON.parse(H$d.readUTFBytes()));break;case"font":H$d=new H$N(H$c);this.onLoaded(H$Y.parseXMLFromString(H$d.readUTFBytes()));break;default:this.onLoaded(H$c)}else this.event("error",H$a)},H$b.onLoaded=function(H$a){var H$b=this._type;if("plf"==H$b)this.parsePLFData(H$a),this.complete(H$a);else if("image"===H$b){var H$c=new H$ka(H$a);H$c.url=this._url,this.complete(H$c)}else if("sound"===H$b||"htmlimage"===H$b||"nativeimage"===H$b)this.complete(H$a);else if("atlas"===H$b){if(!H$a.src&&!H$a._setContext){if(!this._data){if((this._data=H$a).meta&&H$a.meta.image)for(var H$d=H$a.meta.image.split(","),H$e=0<=this._url.indexOf("/")?"/":"\\",H$f=this._url.lastIndexOf(H$e),H$g=0<=H$f?this._url.substr(0,H$f+1):"",H$h=0,H$i=H$d.length;H$h<H$i;H$h++)H$d[H$h]=H$g+H$d[H$h];else H$d=[this._url.replace(".json",".png")];H$d.reverse(),H$a.toLoads=H$d,H$a.pics=[]}return this.event("progress",.3+1/H$d.length*.6),this._loadImage(H$d.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(H$a),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var H$j=this._data.frames,H$k=this._url.split("?")[0],H$l=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:H$k.substring(0,H$k.lastIndexOf("."))+"/",H$m=this._data.pics,H$n=H$G.formatURL(this._url),H$o=H$A.atlasMap[H$n]||(H$A.atlasMap[H$n]=[]);H$o.dir=H$l;var H$p=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var H$q in H$p=parseFloat(this._data.meta.scale),H$j){var H$r,H$s=H$j[H$q],H$t=H$m[H$s.frame.idx?H$s.frame.idx:0],H$u=H$G.formatURL(H$l+H$q);H$t.scaleRate=H$p,H$r=H$ka.create(H$t,H$s.frame.x,H$s.frame.y,H$s.frame.w,H$s.frame.h,H$s.spriteSourceSize.x,H$s.spriteSourceSize.y,H$s.sourceSize.w,H$s.sourceSize.h),H$A.cacheRes(H$u,H$r),H$A.keepCache(this._url,H$l+H$q),H$r.url=H$u,H$o.push(H$u)}else for(H$q in H$j)H$t=H$m[(H$s=H$j[H$q]).frame.idx?H$s.frame.idx:0],H$u=H$G.formatURL(H$l+H$q),H$A.cacheRes(H$u,H$ka.create(H$t,H$s.frame.x,H$s.frame.y,H$s.frame.w,H$s.frame.h,H$s.spriteSourceSize.x,H$s.spriteSourceSize.y,H$s.sourceSize.w,H$s.sourceSize.h)),H$A.loadedMap[H$u].url=H$u,H$A.keepCache(this._url,H$l+H$q),H$o.push(H$u);delete this._data.pics,this.complete(this._data)}else if("font"==H$b){if(!H$a.src)return this._data=H$a,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var H$v=new H$B;H$v.parseFont(this._data,H$a);var H$w=this._url.split(".fnt")[0].split("/"),H$x=H$w[H$w.length-1];H$qa.registerBitmapFont(H$x,H$v),this._data=H$v,this.complete(this._data)}else if("pkm"==H$b){var H$y=H$wa.create(H$a,this._url),H$z=new H$ka(H$y);H$z.url=this._url,this.complete(H$z)}else this.complete(H$a)},H$b.parsePLFData=function(H$a){var H$b,H$c,H$d;for(H$b in H$a)switch(H$d=H$a[H$b],H$b){case"json":case"text":for(H$c in H$d)H$A.preLoadedMap[H$G.formatURL(H$c)]=H$d[H$c];break;default:for(H$c in H$d)H$A.preLoadedMap[H$G.formatURL(H$c)]=H$d[H$c]}},H$b.complete=function(H$a){this._data=H$a,this._customParse?this.event("loaded",H$a instanceof Array?[H$a]:H$a):(H$A._loaders.push(this),H$A._isWorking||H$A.checkNext())},H$b.endLoad=function(H$a){H$a&&(this._data=H$a),this._cache&&H$A.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},H$o(0,H$b,"url",function(){return this._url}),H$o(0,H$b,"data",function(){return this._data}),H$o(0,H$b,"cache",function(){return this._cache}),H$o(0,H$b,"type",function(){return this._type}),H$A.checkNext=function(){H$A._isWorking=!0;for(var H$a=H$M.now();H$A._startIndex<H$A._loaders.length;)if(H$M.now(),H$A._loaders[H$A._startIndex].endLoad(),H$A._startIndex++,H$M.now()-H$a>H$A.maxTimeOut)return console.warn("loader callback cost a long time:"+(H$M.now()-H$a)+" url="+H$A._loaders[H$A._startIndex-1].url),void H$x.timer.frameOnce(1,null,H$A.checkNext);H$A._loaders.length=0,H$A._startIndex=0,H$A._isWorking=!1},H$A.clearRes=function(H$a,H$b){if(null!=H$a){void 0===H$b&&(H$b=!1),H$a=H$G.formatURL(H$a);var H$c=H$A.getAtlas(H$a);if(H$c){for(var H$d=0,H$e=H$c.length;H$d<H$e;H$d++){var H$f=H$c[H$d],H$g=H$A.getRes(H$f);delete H$A.loadedMap[H$f],H$A.clearCache(H$a.substring(H$G.basePath.length),H$f.substring(H$G.basePath.length)),H$g&&H$g.destroy(H$b)}H$c.length=0,delete H$A.atlasMap[H$a],delete H$A.loadedMap[H$a]}else{var H$h=H$A.loadedMap[H$a];H$h&&(delete H$A.loadedMap[H$a],H$h instanceof laya.resource.Texture&&H$h.bitmap&&H$h.destroy(H$b))}}},H$A.clearTextureRes=function(H$a){H$a=H$G.formatURL(H$a);var H$b=laya.net.Loader.getAtlas(H$a),H$c=H$b&&0<H$b.length?laya.net.Loader.getRes(H$b[0]):laya.net.Loader.getRes(H$a);H$c&&H$c.bitmap&&(H$H.isConchApp&&!H$H.isConchWebGL?H$c.bitmap.source.releaseTexture&&H$c.bitmap.source.releaseTexture():null==H$c.bitmap._atlaser&&H$c.bitmap.releaseResource(!0))},H$A.getRes=function(H$a){return H$A.loadedMap[H$G.formatURL(H$a)]},H$A.getAtlas=function(H$a){return H$A.atlasMap[H$G.formatURL(H$a)]},H$A.cacheRes=function(H$a,H$b){H$a=H$G.formatURL(H$a),null!=H$A.loadedMap[H$a]?console.warn("Resources already exist,is repeated loading:",H$a):H$A.loadedMap[H$a]=H$b},H$A.setGroup=function(H$a,H$b){H$A.groupMap[H$b]||(H$A.groupMap[H$b]=[]),H$A.groupMap[H$b].push(H$a)},H$A.clearResByGroup=function(H$a){if(H$A.groupMap[H$a]){var H$b=H$A.groupMap[H$a],H$c=0,H$d=H$b.length;for(H$c=0;H$c<H$d;H$c++)H$A.clearRes(H$b[H$c]);H$b.length=0}},H$A.keepCache=function(H$a,H$b){if(H$a&&H$b){var H$c=H$A.cacheSet[H$b];H$c?-1==H$c.indexOf(H$a)&&H$c.push(H$a):H$A.cacheSet[H$b]=[H$a]}},H$A.clearCache=function(H$a,H$b){if(H$a&&H$b){var H$c=H$A.cacheSet[H$b];if(H$c){var H$d=H$c.indexOf(H$a);if(-1!==H$d){var H$e=H$c.length-1;0==H$e?(delete H$A.cacheSet[H$b],0<H$A.imgMgrSet[H$b]?H$g.imgMgrFree(H$b,H$A.imgMgrSet[H$b]):H$A.clearRes(H$b,!0)):(H$c[H$d]=H$c[H$e],H$c.length=H$e)}}}},H$A.saveObject=function(H$a,H$b,H$c){if(H$b&&H$a){var H$d=H$A.objectSet[H$a];H$d?(console.warn("Loader.saveObject: "+H$a),H$d[0]=H$b,H$d[1]=H$c):H$A.objectSet[H$a]=[H$b,H$c,[]]}},H$A.findObject=function(H$a){if(H$a){var H$b=H$A.objectSet[H$a];if(H$b)return H$b[0]}return null},H$A.keepObject=function(H$a,H$b){if(H$a&&H$b){var H$c=H$A.objectSet[H$b];H$c&&-1===H$c[2].indexOf(H$a)&&H$c[2].push(H$a)}},H$A.clearObject=function(H$a,H$b){if(H$a&&H$b){var H$c=H$A.objectSet[H$b];if(H$c){var H$d=H$c[2],H$e=H$d.indexOf(H$a);if(-1!==H$e){var H$f=H$d.length-1;0==H$f?(delete H$A.objectSet[H$b],H$c[1]&&H$c[1].call(null,H$c[0])):(H$d[H$e]=H$d[H$f],H$d.length=H$f)}}}},H$A.TEXT="text",H$A.JSON="json",H$A.XML="xml",H$A.BUFFER="arraybuffer",H$A.IMAGE="image",H$A.SOUND="sound",H$A.ATLAS="atlas",H$A.FONT="font",H$A.TTF="ttf",H$A.PLF="plf",H$A.PKM="pkm",H$A.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},H$A.parserMap={},H$A.groupMap={},H$A.maxTimeOut=100,H$A.loadedMap={},H$A.preLoadedMap={},H$A.atlasMap={},H$A._loaders=[],H$A._isWorking=!1,H$A._startIndex=0,H$A.imgCache={},H$A.cacheSet={},H$A.objectSet={},H$A.imgMgrSet={},H$A}(),H$ia=function(H$a){var H$m;function H$n(){this.retryNum=3,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},H$n.__super.call(this);for(var H$a=0;H$a<this._maxPriority;H$a++)this._resInfos[H$a]=[]}H$k(H$n,"laya.net.LoaderManager",H$j);var H$b=H$n.prototype;return H$b.create=function(H$a,H$c,H$b,H$d,H$e,H$f,H$g,H$h){if(null==H$f&&(H$f=2),null==H$g&&(H$g=!0),H$a instanceof Array){var H$i=H$a,H$j=H$i.length,H$k=0;if(H$b)var H$l=H$s.create(H$b.caller,H$b.method,H$b.args,!1);for(var H$m=0;H$m<H$j;H$m++){var H$n=H$i[H$m];"string"==typeof H$n&&(H$n=H$i[H$m]={url:H$n}),H$n.progress=0}for(H$m=0;H$m<H$j;H$m++){H$n=H$i[H$m];var H$o=H$b?H$s.create(null,H$r,[H$n],!1):null,H$p=H$b||H$c?H$s.create(null,H$q,[H$n]):null;this._create(H$n.url,H$p,H$o,H$n.clas||H$d,H$n.params||H$e,null!=H$n.priority&&0<=H$n.priority?H$n.priority:H$f,H$g,H$n.group||H$h)}function H$q(H$a,H$b){H$k++,H$a.progress=1,H$k===H$j&&H$c&&H$c.run()}function H$r(H$a,H$b){H$a.progress=H$b;for(var H$c=0,H$d=0;H$d<H$j;H$d++){H$c+=H$i[H$d].progress}var H$e=H$c/H$j;H$l.runWith(H$e)}return!0}return this._create(H$a,H$c,H$b,H$d,H$e,H$f,H$g,H$h)},H$b._create=function(H$b,H$c,H$a,H$d,H$e,H$f,H$g,H$h){H$b&&""!=H$b||console.error("加载的url不合法 "+H$b),null==H$f&&(H$f=2),null==H$g&&(H$g=!0);var H$i=H$G.formatURL(H$b),H$j=this.getRes(H$i);if(H$j)!H$j.hasOwnProperty("loaded")||H$j.loaded?(H$a&&H$a.runWith(1),H$c&&H$c.run()):H$c&&H$x.loader._createListener(H$b,H$c.caller,H$c.method,H$c.args,!0,!1);else{var H$k=H$Y.getFileExtension(H$b),H$l=H$n.createMap[H$k];if(!H$l)throw new Error("LoaderManager:unknown file("+H$b+") extension with: "+H$k+".");H$d||(H$d=H$l[0]);var H$m=H$l[1];if("atlas"==H$k)this.load(H$b,H$c,H$a,H$m,H$f,H$g);else{H$d===H$ka&&(H$m="htmlimage"),(H$j=H$d?new H$d:null).hasOwnProperty("_loaded")&&(H$j._loaded=!1),H$j._setUrl(H$b),H$h&&H$j._setGroup(H$h),this._createLoad(H$j,H$b,H$s.create(null,function(H$a){H$j&&!H$j.destroyed&&H$a&&H$j.onAsynLoaded.call(H$j,H$b,H$a,H$e),H$c&&H$c.run();H$x.loader.event(H$b)}),H$a,H$m,H$f,!1,H$h,!0),H$g&&this.cacheRes(H$i,H$j)}}return H$j},H$b.load=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){H$a&&""!=H$a||console.error("加载的url不合法 "+H$a);var H$i=this;if(null==H$e&&(H$e=2),null==H$f&&(H$f=!0),void 0===H$h&&(H$h=!1),H$a instanceof Array)return this._loadAssets(H$a,H$b,H$c,H$d,H$e,H$f,H$g);var H$j=H$ha.getRes(H$a);if(null!=H$j)H$x.timer.frameOnce(1,null,function(){H$c&&H$c.runWith(1),H$b&&H$b.runWith(H$j),H$i._loaderCount||H$i.event("complete")});else{var H$k=H$n._resMap[H$a];H$k?(H$b&&H$k._createListener("complete",H$b.caller,H$b.method,H$b.args,!1,!1),H$c&&H$k._createListener("progress",H$c.caller,H$c.method,H$c.args,!1,!1)):((H$k=this._infoPool.length?this._infoPool.pop():new H$m).url=H$a,H$k.type=H$d,H$k.cache=H$f,H$k.group=H$g,H$k.ignoreCache=H$h,H$k.priority=H$e,H$b&&H$k.on("complete",H$b.caller,H$b.method,H$b.args),H$c&&H$k.on("progress",H$c.caller,H$c.method,H$c.args),H$n._resMap[H$a]=H$k,H$e=H$e<this._maxPriority?0<=H$e?H$e:0:this._maxPriority-1,this._resInfos[H$e].push(H$k),this._next())}return this},H$b._createLoad=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i){var H$j=this;if(null==H$f&&(H$f=2),null==H$g&&(H$g=!0),void 0===H$i&&(H$i=!1),H$b instanceof Array)return this._loadAssets(H$b,H$c,H$d,H$e,H$f,H$g,H$h);var H$k=H$ha.getRes(H$b);if(null!=H$k)H$x.timer.frameOnce(1,null,function(){H$d&&H$d.runWith(1),H$c&&H$c.runWith(H$k),H$j._loaderCount||H$j.event("complete")});else{var H$l=H$n._resMap[H$b];H$l?(H$c&&H$l._createListener("complete",H$c.caller,H$c.method,H$c.args,!1,!1),H$d&&H$l._createListener("progress",H$d.caller,H$d.method,H$d.args,!1,!1)):((H$l=this._infoPool.length?this._infoPool.pop():new H$m).url=H$b,H$l.clas=H$a,H$l.type=H$e,H$l.cache=H$g,H$l.group=H$h,H$l.ignoreCache=H$i,H$l.priority=H$f,H$c&&H$l.on("complete",H$c.caller,H$c.method,H$c.args),H$d&&H$l.on("progress",H$d.caller,H$d.method,H$d.args),H$n._resMap[H$b]=H$l,H$f=H$f<this._maxPriority?0<=H$f?H$f:0:this._maxPriority-1,this._resInfos[H$f].push(H$l),this._next())}return this},H$b._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var H$a=0;H$a<this._maxPriority;H$a++)for(var H$b=this._resInfos[H$a];0<H$b.length;){var H$c=H$b.shift();if(H$c)return this._doLoad(H$c)}this._loaderCount||this.event("complete")}},H$b._doLoad=function(H$b){this._loaderCount++;var H$c=this._loaders.length?this._loaders.pop():new H$ha;H$c.on("complete",null,H$e),H$c.on("progress",null,function(H$a){H$b.event("progress",H$a)}),H$c.on("error",null,function(H$a){H$e(null)});var H$d=this;function H$e(H$a){H$c.offAll(),H$c._data=null,H$c._customParse=!1,H$d._loaders.push(H$c),H$d._endLoad(H$b,H$a instanceof Array?[H$a]:H$a),H$d._loaderCount--,H$d._next()}H$c._class=H$b.clas,1<=H$b.priority?(H$c.priority=H$b.priority,H$c.realTime=!1):(H$c.priority=0,H$c.realTime=!0),H$c.load(H$b.url,H$b.type,H$b.cache,H$b.group,H$b.ignoreCache)},H$b._endLoad=function(H$a,H$b){var H$c=H$a.url;if(null==H$b){var H$d=this._failRes[H$c]||0;if(H$d<this.retryNum)return console.warn("[warn]Retry to load:",H$c),this._failRes[H$c]=H$d+1,void H$x.timer.once(this.retryDelay,this,this._addReTry,[H$a],!1);console.warn("[error]Failed to load:",H$c),this.event("error",H$c)}this._failRes[H$c]&&(this._failRes[H$c]=0),delete H$n._resMap[H$c],H$a.event("complete",H$b),H$a.offAll(),this._infoPool.push(H$a)},H$b._addReTry=function(H$a){this._resInfos[this._maxPriority-1].push(H$a),this._next()},H$b.clearRes=function(H$a,H$b){void 0===H$b&&(H$b=!1),H$ha.clearRes(H$a,H$b)},H$b.getRes=function(H$a){return H$ha.getRes(H$a)},H$b.cacheRes=function(H$a,H$b){H$ha.cacheRes(H$a,H$b)},H$b.clearTextureRes=function(H$a){H$ha.clearTextureRes(H$a)},H$b.setGroup=function(H$a,H$b){H$ha.setGroup(H$a,H$b)},H$b.clearResByGroup=function(H$a){H$ha.clearResByGroup(H$a)},H$b.clearUnLoaded=function(){for(var H$a=0;H$a<this._maxPriority;H$a++){for(var H$b=this._resInfos[H$a],H$c=H$b.length-1;-1<H$c;H$c--){var H$d=H$b[H$c];H$d&&(H$d.offAll(),this._infoPool.push(H$d))}H$b.length=0}this._loaderCount=0,H$n._resMap={}},H$b.cancelLoadByUrls=function(H$a){if(H$a)for(var H$b=0,H$c=H$a.length;H$b<H$c;H$b++)this.cancelLoadByUrl(H$a[H$b])},H$b.cancelLoadByUrl=function(H$a){for(var H$b=0;H$b<this._maxPriority;H$b++)for(var H$c=this._resInfos[H$b],H$d=H$c.length-1;-1<H$d;H$d--){var H$e=H$c[H$d];H$e&&H$e.url===H$a&&(H$c[H$d]=null,H$e.offAll(),this._infoPool.push(H$e))}H$n._resMap[H$a]&&delete H$n._resMap[H$a]},H$b._loadAssets=function(H$a,H$c,H$g,H$b,H$d,H$e,H$f){null==H$d&&(H$d=2),null==H$e&&(H$e=!0);for(var H$h=H$a.length,H$i=0,H$j=0,H$k=[],H$l=!0,H$m=0;H$m<H$h;H$m++){var H$n=H$a[H$m];if(!H$n)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+H$a);"string"==typeof H$n&&(H$n={url:H$n,type:H$b,size:1,priority:H$d}),H$n.size||(H$n.size=1),H$n.progress=0,H$j+=H$n.size,H$k.push(H$n);var H$o=H$g?H$s.create(null,H$r,[H$n],!1):null,H$p=H$c||H$g?H$s.create(null,H$q,[H$n]):null;this.load(H$n.url,H$p,H$o,H$n.type,null!=H$n.priority&&0<=H$n.priority?H$n.priority:2,H$e,H$n.group||H$f)}function H$q(H$a,H$b){H$i++,H$a.progress=1,H$b||(H$l=!1),H$i===H$h&&H$c&&H$c.runWith(H$l)}function H$r(H$a,H$b){if(null!=H$g){H$a.progress=H$b;for(var H$c=0,H$d=0;H$d<H$k.length;H$d++){var H$e=H$k[H$d];H$c+=H$e.size*H$e.progress}var H$f=H$c/H$j;H$g.runWith(H$f)}}return this},H$n.cacheRes=function(H$a,H$b){H$ha.cacheRes(H$a,H$b)},H$n._resMap={},H$i(H$n,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),H$n.__init$=function(){H$m=function(H$a){function H$b(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.priority=-1,H$b.__super.call(this)}return H$k(H$b,"",H$j),H$b}()},H$n}(),H$ja=(function(H$a){function H$e(H$a){H$e.__super.call(this),H$a||(H$a=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var H$b=0,H$c=0,H$d=0;H$d<20;H$d++)H$d%5!=4?this._mat[H$b++]=H$a[H$d]:this._alpha[H$c++]=H$a[H$d];this._action=H$D.createFilterAction(32),this._action.data=this}H$k(H$e,"laya.filters.ColorFilter",H$r);var H$b=H$e.prototype;H$x.imps(H$b,{"laya.filters.IFilter":!0}),H$b.callNative=function(H$a){H$a._$P.cf=this;H$a.conchModel&&H$a.conchModel.setFilterMatrix&&H$a.conchModel.setFilterMatrix(this._mat,this._alpha)},H$o(0,H$b,"type",function(){return 32}),H$o(0,H$b,"action",function(){return this._action})}(),function(H$a){function H$d(H$a,H$b,H$c){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===H$b&&(H$b=0),H$d.__super.call(this),this._byteClass=H$c||H$N,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,H$a&&0<H$b&&H$b<65535&&this.connect(H$a,H$b)}H$k(H$d,"laya.net.Socket",H$j);var H$b=H$d.prototype;H$b.connect=function(H$a,H$b){var H$c="ws://"+H$a+":"+H$b;H$c="https:"==H$M.window.location.protocol?"wss://"+H$a+":"+H$b:"ws://"+H$a+":"+H$b,this.connectByUrl(H$c)},H$b.connectByUrl=function(H$a){var H$b=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new H$M.window.WebSocket(H$a,this.protocols):this._socket=new H$M.window.WebSocket(H$a),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(H$a){H$b._onOpen(H$a)},this._socket.onmessage=function(H$a){H$b._onMessage(H$a)},this._socket.onclose=function(H$a){H$b._onClose(H$a)},this._socket.onerror=function(H$a){H$b._onError(H$a)}},H$b.cleanSocket=function(){try{this._socket.close()}catch(H$a){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},H$b.close=function(){if(null!=this._socket)try{this._socket.close()}catch(H$a){}},H$b._onOpen=function(H$a){this._connected=!0,this.event("open",H$a)},H$b._onMessage=function(H$a){if(H$a&&H$a.data){var H$b=H$a.data;if(this.disableInput&&H$b)this.event("message",H$b);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var H$c=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,H$b&&("string"==typeof H$b?this._input.writeUTFBytes(H$b):this._input.writeArrayBuffer(H$b),this._addInputPosition=this._input.pos,this._input.pos=H$c),this.event("message",H$b)}}},H$b._onClose=function(H$a){this._connected=!1,this.event("close",H$a)},H$b._onError=function(H$a){this.event("error",H$a)},H$b.send=function(H$a){this._socket.send(H$a)},H$b.flush=function(){if(this._output&&0<this._output.length){var H$b;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(H$a){H$b=H$a}this._output.endian=this.endian,this._output.clear(),H$b&&this.event("error",H$b)}},H$o(0,H$b,"input",function(){return this._input}),H$o(0,H$b,"output",function(){return this._output}),H$o(0,H$b,"connected",function(){return this._connected}),H$o(0,H$b,"endian",function(){return this._endian},function(H$a){this._endian=H$a,null!=this._input&&(this._input.endian=H$a),null!=this._output&&(this._output.endian=H$a)}),H$d.LITTLE_ENDIAN="littleEndian",H$d.BIG_ENDIAN="bigEndian"}(),function(H$a){function H$h(){H$h.__super.call(this),this._$1__id=++H$h._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(H$h._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,H$L.currentResourceManager&&H$L.currentResourceManager.addResource(this)}H$k(H$h,"laya.resource.Resource",H$j);var H$b=H$h.prototype;return H$x.imps(H$b,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),H$b._setUrl=function(H$a){var H$b;this._url!==H$a&&(this._url&&((H$b=H$h._urlResourcesMap[this._url]).splice(H$b.indexOf(this),1),0===H$b.length&&delete H$h._urlResourcesMap[this._url]),H$a&&((H$b=H$h._urlResourcesMap[H$a])||(H$h._urlResourcesMap[H$a]=H$b=[]),H$b.push(this)),this._url=H$a)},H$b._getGroup=function(){return this._group},H$b._setGroup=function(H$a){var H$b;this._group!==H$a&&(this._group&&((H$b=H$h._groupResourcesMap[this._group]).splice(H$b.indexOf(this),1),0===H$b.length&&delete H$h._groupResourcesMap[this._group]),H$a&&((H$b=H$h._groupResourcesMap[H$a])||(H$h._groupResourcesMap[H$a]=H$b=[]),H$b.push(this)),this._group=H$a)},H$b._addReference=function(){this._referenceCount++},H$b._removeReference=function(){this._referenceCount--},H$b._clearReference=function(){this._referenceCount=0},H$b._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},H$b.recreateResource=function(){this.completeCreate()},H$b.disposeResource=function(){},H$b.activeResource=function(H$a){void 0===H$a&&(H$a=!1),this._lastUseFrameCount=H$V.loopCount,!this._destroyed&&this.__loaded&&(this._released||H$a)&&this.recreateResource()},H$b.releaseResource=function(H$a){return void 0===H$a&&(H$a=!0),!(!H$a&&this.lock)&&(!(this._released&&!H$a)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},H$b.onAsynLoaded=function(H$a,H$b,H$c){throw new Error("Resource: must override this function!")},H$b.destroy=function(){var H$a;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete H$h._idResourcesMap[this.id],this._url&&((H$a=H$h._urlResourcesMap[this._url])&&(H$a.splice(H$a.indexOf(this),1),0===H$a.length&&delete H$h._urlResourcesMap[this.url]),H$ha.clearRes(this._url),this.__loaded||H$D.cancelLoadByUrl(this._url)),this._group&&((H$a=H$h._groupResourcesMap[this._group]).splice(H$a.indexOf(this),1),0===H$a.length&&delete H$h._groupResourcesMap[this.url]))},H$b.completeCreate=function(){this._released=!1,this.event("recovered",this)},H$b.dispose=function(){this.destroy()},H$o(0,H$b,"memorySize",function(){return this._memorySize},function(H$a){var H$b=H$a-this._memorySize;this._memorySize=H$a,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,H$b),this.resourceManager&&this.resourceManager.addSize(H$b)}),H$o(0,H$b,"_loaded",null,function(H$a){this.__loaded=H$a}),H$o(0,H$b,"loaded",function(){return this.__loaded}),H$o(0,H$b,"id",function(){return this._$1__id}),H$o(0,H$b,"destroyed",function(){return this._destroyed}),H$o(0,H$b,"group",function(){return this._getGroup()},function(H$a){this._setGroup(H$a)}),H$o(0,H$b,"resourceManager",function(){return this._resourceManager}),H$o(0,H$b,"url",function(){return this._url}),H$o(0,H$b,"released",function(){return this._released}),H$o(0,H$b,"referenceCount",function(){return this._referenceCount}),H$h.getResourceByID=function(H$a){return H$h._idResourcesMap[H$a]},H$h.getResourceByURL=function(H$a,H$b){return void 0===H$b&&(H$b=0),null==H$h._urlResourcesMap[H$a]?null:H$h._urlResourcesMap[H$a][H$b]},H$h.getResourceCountByURL=function(H$a){return H$h._urlResourcesMap[H$a].length},H$h.destroyUnusedResources=function(H$a){var H$b;if(H$a){var H$c=H$h._groupResourcesMap[H$a];if(H$c)for(var H$d=H$c.slice(),H$e=0,H$f=H$d.length;H$e<H$f;H$e++)(H$b=H$d[H$e]).lock||0!==H$b._referenceCount||H$b.destroy()}else for(var H$g in H$h._idResourcesMap)(H$b=H$h._idResourcesMap[H$g]).lock||0!==H$b._referenceCount||H$b.destroy()},H$h._uniqueIDCounter=0,H$h._idResourcesMap={},H$h._urlResourcesMap={},H$h._groupResourcesMap={},H$h}()),H$ka=function(H$a){function H$A(H$a,H$b){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,H$A.__super.call(this),H$a&&null!=H$a._addReference&&H$a._addReference(),this.setTo(H$a,H$b)}H$k(H$A,"laya.resource.Texture",H$j);var H$b=H$A.prototype;return H$b._setUrl=function(H$a){this.url=H$a},H$b.setTo=function(H$a,H$b){if(H$a instanceof H$g.HTMLElement){var H$c=H$ta.create("2D",H$a);this.bitmap=H$c}else this.bitmap=H$a;if(this.uv=H$b||H$A.DEF_UV,H$a){this._w=H$a.width,this._h=H$a.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var H$d=this;if(this._loaded)H$D.addToAtlas&&H$D.addToAtlas(H$d);else{var H$e=H$a;H$e instanceof laya.resource.HTMLImage&&H$e.image&&H$e.image.addEventListener("load",function(H$a){H$D.addToAtlas&&H$D.addToAtlas(H$d)},!1)}}},H$b.active=function(){this.bitmap&&this.bitmap.activeResource()},H$b.destroy=function(H$a){if(void 0===H$a&&(H$a=!1),this.alphaTexture&&(this.alphaTexture.destroy(H$a),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var H$b=this.bitmap;H$a?(H$H.isConchApp&&H$b.source&&H$b.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,H$b.dispose(),H$b._clearReference()):(H$b._removeReference(),0==H$b.referenceCount&&(H$H.isConchApp&&H$b.source&&H$b.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,H$b.dispose())),this.url&&this===H$x.loader.getRes(this.url)&&H$x.loader.clearRes(this.url,H$a),this._loaded=!1}},H$b.load=function(H$a){var H$b=this;this._loaded=!1,H$a=H$G.customFormat(H$a);var H$c=this.bitmap||(this.bitmap=H$wa.create(H$a));H$c.uri=H$a,H$c&&H$c._addReference();var H$d=this;H$c.onload=function(){H$c.onload=null,H$d._loaded=!0,H$b.sourceWidth=H$b._w=H$c.width,H$b.sourceHeight=H$b._h=H$c.height,H$d.event("loaded",this),H$D.addToAtlas&&H$D.addToAtlas(H$d)}},H$b.addTextureToAtlas=function(H$a){H$D.addTextureToAtlas(this)},H$b.getPixels=function(H$a,H$b,H$c,H$d){if(H$H.isConchApp){var H$e=this.bitmap;if(H$e.source&&H$e.source.getImageData){var H$f=H$e.source.getImageData(H$a,H$b,H$c,H$d),H$g=new Uint8Array(H$f);return Array.from(H$g)}return null}return H$H.isWebGL?H$D.getTexturePixels(this,H$a,H$b,H$c,H$d):(H$M.canvas.size(H$c,H$d),H$M.canvas.clear(),H$M.context.drawTexture(this,-H$a,-H$b,this.width,this.height,0,0),H$M.context.getImageData(0,0,H$c,H$d).data)},H$b.onAsynLoaded=function(H$a,H$b){if(H$b){if("function"!=typeof H$b._addReference)throw new Error("bitmap._addReference is not a function. "+H$b.className+" "+typeof H$b._addReference+" "+H$b.constructor);H$b._addReference()}this.setTo(H$b,this.uv),this._loaded&&this.event("loaded",this)},H$o(0,H$b,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),H$o(0,H$b,"loaded",function(){return this._loaded}),H$o(0,H$b,"released",function(){return!this.bitmap||this.bitmap.released}),H$o(0,H$b,"width",function(){return this._w?this._w:this.uv&&this.uv!==H$A.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(H$a){this._w=H$a,this.sourceWidth||(this.sourceWidth=H$a)}),H$o(0,H$b,"repeat",function(){return!H$H.isWebGL||!this.bitmap||this.bitmap.repeat},function(H$a){H$a&&H$H.isWebGL&&this.bitmap&&(this.bitmap.repeat=H$a)&&(this.bitmap.enableMerageInAtlas=!1)}),H$o(0,H$b,"height",function(){return this._h?this._h:this.uv&&this.uv!==H$A.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(H$a){this._h=H$a,this.sourceHeight||(this.sourceHeight=H$a)}),H$o(0,H$b,"isLinearSampling",function(){return!H$H.isWebGL||9728!=this.bitmap.minFifter},function(H$a){!H$a&&H$H.isWebGL&&(H$a||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),H$A.moveUV=function(H$a,H$b,H$c){for(var H$d=0;H$d<8;H$d+=2)H$c[H$d]+=H$a,H$c[H$d+1]+=H$b;return H$c},H$A.create=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i){void 0===H$f&&(H$f=0),void 0===H$g&&(H$g=0),void 0===H$h&&(H$h=0),void 0===H$i&&(H$i=0);var H$j=H$a instanceof laya.resource.Texture,H$k=H$j?H$a.uv:H$A.DEF_UV,H$l=H$j?H$a.bitmap:H$a,H$m=H$D.isAtlas(H$l);if(H$m){var H$n=H$l._atlaser,H$o=H$a._atlasID;if(-1==H$o)throw new Error("create texture error");H$l=H$n._inAtlasTextureBitmapValue[H$o],H$k=H$n._inAtlasTextureOriUVValue[H$o]}var H$p=new H$A(H$l,null);H$l.width&&H$b+H$d>H$l.width&&(H$d=H$l.width-H$b),H$l.height&&H$c+H$e>H$l.height&&(H$e=H$l.height-H$c),H$p.width=H$d,H$p.height=H$e,H$p.offsetX=H$f,H$p.offsetY=H$g,H$p.sourceWidth=H$h||H$d,H$p.sourceHeight=H$i||H$e;var H$q=1/H$l.width,H$r=1/H$l.height;H$b*=H$q,H$c*=H$r,H$d*=H$q,H$e*=H$r;var H$s=H$p.uv[0],H$t=H$p.uv[1],H$u=H$p.uv[4],H$v=H$p.uv[5],H$w=H$u-H$s,H$x=H$v-H$t,H$y=H$A.moveUV(H$k[0],H$k[1],[H$b,H$c,H$b+H$d,H$c,H$b+H$d,H$c+H$e,H$b,H$c+H$e]);H$p.uv=[H$s+H$y[0]*H$w,H$t+H$y[1]*H$x,H$u-(1-H$y[2])*H$w,H$t+H$y[3]*H$x,H$u-(1-H$y[4])*H$w,H$v-(1-H$y[5])*H$x,H$s+H$y[6]*H$w,H$v-(1-H$y[7])*H$x],H$m&&H$p.addTextureToAtlas();var H$z=H$l.scaleRate;return H$z&&1!=H$z?(H$p.sourceWidth/=H$z,H$p.sourceHeight/=H$z,H$p.width/=H$z,H$p.height/=H$z,H$p.scaleRate=H$z,H$p.offsetX/=H$z,H$p.offsetY/=H$z):H$p.scaleRate=1,H$p},H$A.createFromTexture=function(H$a,H$b,H$c,H$d,H$e){var H$f=H$a.scaleRate;1!=H$f&&(H$b*=H$f,H$c*=H$f,H$d*=H$f,H$e*=H$f);var H$g=H$z.TEMP.setTo(H$b-H$a.offsetX,H$c-H$a.offsetY,H$d,H$e),H$h=H$g.intersection(H$A._rect1.setTo(0,0,H$a.width,H$a.height),H$A._rect2);if(!H$h)return null;var H$i=H$A.create(H$a,H$h.x,H$h.y,H$h.width,H$h.height,H$h.x-H$g.x,H$h.y-H$g.y,H$d,H$e);if(H$i.bitmap&&H$i.bitmap._removeReference)return H$i.bitmap._removeReference(),H$i;var H$j="bitmap:"+(H$i.bitmap?H$i.bitmap.constructor?H$i.bitmap.constructor.name:H$i.bitmap.__className:"")+", url:"+(H$a.url+" | "+(H$i.bitmap?H$i.bitmap.url:H$a.url))+", x="+H$b+",y="+H$c+",width="+H$d+",height="+H$e+", result="+(H$h?H$h.x+","+H$h.y+","+H$h.width+","+H$h.height:"null")+", rect="+H$g.x+","+H$g.y+","+H$g.width+","+H$g.height;throw new Error("报错：bitmap._removeReference is not a function  "+H$j)},H$A.DEF_UV=[0,0,1,0,1,1,0,1],H$A.INV_UV=[0,1,1,1,1,0,0,0],H$A._rect1=new H$z,H$A._rect2=new H$z,H$A}(),H$a=function(H$a){var H$h;function H$f(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,H$f.__super.call(this)}H$k(H$f,"laya.utils.TimeLine",H$j);var H$b=H$f.prototype;return H$b.to=function(H$a,H$b,H$c,H$d,H$e){return void 0===H$e&&(H$e=0),this._create(H$a,H$b,H$c,H$d,H$e,!0)},H$b.from=function(H$a,H$b,H$c,H$d,H$e){return void 0===H$e&&(H$e=0),this._create(H$a,H$b,H$c,H$d,H$e,!1)},H$b._create=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g=H$U.getItemByClass("tweenData",H$h);return H$g.isTo=H$f,H$g.type=0,H$g.target=H$a,H$g.duration=H$c,H$g.data=H$b,H$g.startTime=this._startTime+H$e,H$g.endTime=H$g.startTime+H$g.duration,H$g.ease=H$d,this._startTime=Math.max(H$g.endTime,this._startTime),this._tweenDataList.push(H$g),this._startTimeSort=!0,this._endTimeSort=!0,this},H$b.addLabel=function(H$a,H$b){var H$c=H$U.getItemByClass("tweenData",H$h);return H$c.type=1,H$c.data=H$a,H$c.endTime=H$c.startTime=this._startTime+H$b,this._labelDic||(this._labelDic={}),this._labelDic[H$a]=H$c,this._tweenDataList.push(H$c),this},H$b.removeLabel=function(H$a){if(this._labelDic&&this._labelDic[H$a]){var H$b=this._labelDic[H$a];if(H$b){var H$c=this._tweenDataList.indexOf(H$b);-1<H$c&&this._tweenDataList.splice(H$c,1)}delete this._labelDic[H$a]}},H$b.gotoTime=function(H$a){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var H$b,H$c,H$d,H$e;for(var H$f in this._firstTweenDic)if(H$c=this._firstTweenDic[H$f])for(var H$g in H$c)H$c.diyTarget.hasOwnProperty(H$g)&&(H$c.diyTarget[H$g]=H$c[H$g]);for(H$f in this._tweenDic)(H$b=this._tweenDic[H$f]).clear(),delete this._tweenDic[H$f];if(this._index=0,this._gidIndex=0,this._currTime=H$a,this._lastTime=H$M.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=H$d=this._tweenDataList.concat(),H$d.sort(function(H$a,H$b){return H$a.endTime>H$b.endTime?1:H$a.endTime<H$b.endTime?-1:0})}else H$d=this._endTweenDataList;for(var H$h=0,H$i=H$d.length;H$h<H$i;H$h++)if(0==(H$e=H$d[H$h]).type){if(!(H$a>=H$e.endTime))break;this._index=Math.max(this._index,H$h+1);var H$j=H$e.data;if(H$e.isTo)for(var H$k in H$j)H$e.target[H$k]=H$j[H$k]}for(H$h=0,H$i=this._tweenDataList.length;H$h<H$i;H$h++)0==(H$e=this._tweenDataList[H$h]).type&&H$a>=H$e.startTime&&H$a<H$e.endTime&&(this._index=Math.max(this._index,H$h+1),this._gidIndex++,(H$b=H$U.getItemByClass("tween",H$X))._create(H$e.target,H$e.data,H$e.duration,H$e.ease,H$s.create(this,this._animComplete,[this._gidIndex]),0,!1,H$e.isTo,!0,!1),H$b.setStartTime(this._currTime-(H$a-H$e.startTime)),H$b._updateEase(this._currTime),H$b.gid=this._gidIndex,this._tweenDic[this._gidIndex]=H$b)}},H$b.gotoLabel=function(H$a){if(null!=this._labelDic){var H$b=this._labelDic[H$a];H$b&&this.gotoTime(H$b.startTime)}},H$b.pause=function(){H$x.timer.clear(this,this._update)},H$b.resume=function(){this.play(this._currTime,this._loopKey)},H$b.play=function(H$a,H$b){if(void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(H$a,H$b){return H$a.startTime>H$b.startTime?1:H$a.startTime<H$b.startTime?-1:0});for(var H$c=0,H$d=this._tweenDataList.length;H$c<H$d;H$c++){var H$e=this._tweenDataList[H$c];if(null!=H$e&&0==H$e.type){var H$f=H$e.target,H$g=H$f.$_GID||(H$f.$_GID=H$Y.getGID()),H$h=null;for(var H$i in null==this._firstTweenDic[H$g]?((H$h={}).diyTarget=H$f,this._firstTweenDic[H$g]=H$h):H$h=this._firstTweenDic[H$g],H$e.data)null==H$h[H$i]&&(H$h[H$i]=H$f[H$i])}}}"string"==typeof H$a?this.gotoLabel(H$a):this.gotoTime(H$a),this._loopKey=H$b,this._lastTime=H$M.now(),H$x.timer.frameLoop(1,this,this._update)}},H$b._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var H$a in this._tweenDic)(H$b=this._tweenDic[H$a]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var H$b,H$c=H$M.now(),H$d=H$c-this._lastTime,H$e=this._currTime+=H$d*this.scale;for(H$a in this._lastTime=H$c,this._tweenDic)(H$b=this._tweenDic[H$a])._updateEase(H$e);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var H$f=this._tweenDataList[this._index];H$e>=H$f.startTime&&(this._index++,0==H$f.type?(this._gidIndex++,(H$b=H$U.getItemByClass("tween",H$X))._create(H$f.target,H$f.data,H$f.duration,H$f.ease,H$s.create(this,this._animComplete,[this._gidIndex]),0,!1,H$f.isTo,!0,!1),H$b.setStartTime(H$e),H$b.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=H$b)._updateEase(H$e)):this.event("label",H$f.data))}},H$b._animComplete=function(H$a){this._tweenDic[H$a]&&delete this._tweenDic[H$a]},H$b._complete=function(){this.event("complete")},H$b.reset=function(){var H$a;if(this._labelDic)for(H$a in this._labelDic)delete this._labelDic[H$a];for(H$a in this._tweenDic)this._tweenDic[H$a].clear(),delete this._tweenDic[H$a];for(H$a in this._firstTweenDic)delete this._firstTweenDic[H$a];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var H$b,H$c=0;for(H$b=this._tweenDataList.length,H$c=0;H$c<H$b;H$c++)this._tweenDataList[H$c]&&this._tweenDataList[H$c].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,H$x.timer.clear(this,this._update)},H$b.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},H$o(0,H$b,"index",function(){return this._frameIndex},function(H$a){this._frameIndex=H$a,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),H$o(0,H$b,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),H$f.to=function(H$a,H$b,H$c,H$d,H$e){return void 0===H$e&&(H$e=0),(new H$f).to(H$a,H$b,H$c,H$d,H$e)},H$f.from=function(H$a,H$b,H$c,H$d,H$e){return void 0===H$e&&(H$e=0),(new H$f).from(H$a,H$b,H$c,H$d,H$e)},H$f.__init$=function(){H$h=function(){function H$a(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return H$k(H$a,""),H$a.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,H$U.recover("tweenData",this)},H$a}()},H$f}(),H$la=function(H$e){function H$c(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,H$c.__super.call(this),this._style=H$h.EMPTY}H$k(H$c,"laya.display.Sprite",H$e);var H$a=H$c.prototype;return H$x.imps(H$a,{"laya.display.ILayout":!0}),H$a.createConchModel=function(){return new ConchNode},H$a.destroy=function(H$a){if(void 0===H$a&&(H$a=!0),this._releaseMem(),!this._destroyed){this.filters=null;var H$b=this.mask;H$b&&(this.mask=null,H$b.destroy(H$a))}H$e.prototype.destroy.call(this,H$a),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},H$a.updateZOrder=function(){H$Y.updateOrder(this._childs)&&this.repaint()},H$a.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},H$a.setBounds=function(H$a){this._set$P("uBounds",H$a)},H$a.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new H$z),H$z._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},H$a.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new H$z),H$z._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},H$a._boundPointsToParent=function(H$a){void 0===H$a&&(H$a=!1);var H$b=0,H$c=0;this._style&&(H$b=this._style._tf.translateX,H$c=this._style._tf.translateY,H$a=H$a||0!==this._style._tf.rotate,this._style.scrollRect&&(H$b+=this._style.scrollRect.x,H$c+=this._style.scrollRect.y));var H$d=this._getBoundPointsM(H$a);if(!H$d||H$d.length<1)return H$d;if(8!=H$d.length&&(H$d=H$a?H$v.scanPList(H$d):H$z._getWrapRec(H$d,H$z.TEMP)._getBoundPoints()),!this.transform)return H$Y.transPointList(H$d,this._x-H$b,this._y-H$c),H$d;var H$e=H$y.TEMP,H$f=0,H$g=H$d.length;for(H$f=0;H$f<H$g;H$f+=2)H$e.x=H$d[H$f],H$e.y=H$d[H$f+1],this.toParentPoint(H$e),H$d[H$f]=H$e.x,H$d[H$f+1]=H$e.y;return H$d},H$a.getGraphicBounds=function(H$a){return void 0===H$a&&(H$a=!1),this._graphics?this._graphics.getBounds(H$a):H$z.TEMP.setTo(0,0,0,0)},H$a._getBoundPointsM=function(H$a){if(void 0===H$a&&(H$a=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var H$b=H$Y.clearArray(this._$P.temBM),H$c=H$z.TEMP;return H$c.copyFrom(this.scrollRect),H$Y.concatArray(H$b,H$c._getBoundPoints()),H$b}for(var H$d,H$e,H$f,H$g=this._graphics?this._graphics.getBoundPoints():H$Y.clearArray(this._$P.temBM),H$h=0,H$i=(H$f=this._childs).length;H$h<H$i;H$h++)(H$d=H$f[H$h])instanceof laya.display.Sprite&&1==H$d.visible&&(H$e=H$d._boundPointsToParent(H$a))&&(H$g=H$g?H$Y.concatArray(H$g,H$e):H$e);return H$g},H$a.getStyle=function(){return this._style===H$h.EMPTY&&(this._style=new H$h),this._style},H$a.setStyle=function(H$a){this._style=H$a},H$a._adjustTransform=function(){this._tfChanged=!1;var H$a,H$b=this._style._tf,H$c=H$b.scaleX,H$d=H$b.scaleY;if(H$b.rotate||1!==H$c||1!==H$d||H$b.skewX||H$b.skewY){(H$a=this._transform||(this._transform=H$E.create())).bTransform=!0;var H$e=.0174532922222222*(H$b.rotate-H$b.skewX),H$f=.0174532922222222*(H$b.rotate+H$b.skewY),H$g=Math.cos(H$f),H$h=Math.sin(H$f),H$i=Math.sin(H$e),H$j=Math.cos(H$e);return H$a.a=H$c*H$g,H$a.b=H$c*H$h,H$a.c=-H$d*H$i,H$a.d=H$d*H$j,H$a.tx=H$a.ty=0,H$a}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,H$a},H$a.pos=function(H$a,H$b,H$c){if(void 0===H$c&&(H$c=!1),this._x!==H$a||this._y!==H$b){if(this.destroyed)return this;if(H$c){this._x=H$a,this._y=H$b,this.conchModel&&this.conchModel.pos(this._x,this._y);var H$d=this._parent;H$d&&0===H$d._repaint&&(H$d._repaint=1,H$d.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=H$a,this.y=H$b}return this},H$a.pivot=function(H$a,H$b){return this.pivotX=H$a,this.pivotY=H$b,this},H$a.size=function(H$a,H$b){return this.width=H$a,this.height=H$b,this},H$a.scale=function(H$a,H$b,H$c){void 0===H$c&&(H$c=!1);var H$d=this.getStyle(),H$e=H$d._tf;if(H$e.scaleX!=H$a||H$e.scaleY!=H$b){if(this.destroyed)return this;if(H$c){H$d.setScale(H$a,H$b),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(H$a,H$b),this._renderType|=4;var H$f=this._parent;H$f&&0===H$f._repaint&&(H$f._repaint=1,H$f.parentRepaint())}else this.scaleX=H$a,this.scaleY=H$b}return this},H$a.skew=function(H$a,H$b){return this.skewX=H$a,this.skewY=H$b,this},H$a.render=function(H$a,H$b,H$c){H$V.spriteCount++,H$J.renders[this._renderType]._fun(this,H$a,H$b+this._x,H$c+this._y),this._repaint=0},H$a.drawToCanvas=function(H$a,H$b,H$c,H$d){if(H$H.isConchNode){var H$e=H$ta.create("2D");return new H$I(H$a,H$b,H$e).ctx.setCanvasType(1),this.conchModel.drawToCanvas(H$e.source,H$c,H$d),H$e}return H$D.drawToCanvas(this,this._renderType,H$a,H$b,H$c,H$d)},H$a.customRender=function(H$a,H$b,H$c){this._renderType|=1024},H$a._applyFilters=function(){var H$a;if(!H$H.isWebGL&&((H$a=this._$P.filters)&&!(H$a.length<1)))for(var H$b=0,H$c=H$a.length;H$b<H$c;H$b++)H$a[H$b].action.apply(this._$P.cacheCanvas)},H$a._isHaveGlowFilter=function(){var H$a,H$b=0;if(this.filters)for(H$b=0;H$b<this.filters.length;H$b++)if(8==this.filters[H$b].type)return!0;for(H$b=0,H$a=this._childs.length;H$b<H$a;H$b++)if(this._childs[H$b]._isHaveGlowFilter())return!0;return!1},H$a.localToGlobal=function(H$a,H$b){void 0===H$b&&(H$b=!1),!0===H$b&&(H$a=new H$y(H$a.x,H$a.y));for(var H$c=this;H$c&&H$c!=H$x.stage;)H$a=H$c.toParentPoint(H$a),H$c=H$c.parent;return H$a},H$a.globalToLocal=function(H$a,H$b){void 0===H$b&&(H$b=!1),H$b&&(H$a=new H$y(H$a.x,H$a.y));for(var H$c=this,H$d=[];H$c&&H$c!=H$x.stage;)H$d.push(H$c),H$c=H$c.parent;for(var H$e=H$d.length-1;0<=H$e;)H$a=(H$c=H$d[H$e]).fromParentPoint(H$a),H$e--;return H$a},H$a.toParentPoint=function(H$a){if(!H$a)return H$a;H$a.x-=this.pivotX,H$a.y-=this.pivotY,this.transform&&this._transform.transformPoint(H$a),H$a.x+=this._x,H$a.y+=this._y;var H$b=this._style.scrollRect;return H$b&&(H$a.x-=H$b.x,H$a.y-=H$b.y),H$a},H$a.fromParentPoint=function(H$a){if(!H$a)return H$a;H$a.x-=this._x,H$a.y-=this._y;var H$b=this._style.scrollRect;return H$b&&(H$a.x+=H$b.x,H$a.y+=H$b.y),this.transform&&this._transform.invertTransformPoint(H$a),H$a.x+=this.pivotX,H$a.y+=this.pivotY,H$a},H$a.on=function(H$a,H$b,H$c,H$d){return 1!==this._mouseEnableState&&this.isMouseEvent(H$a)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(H$a,H$b,H$c,H$d,!1)):H$e.prototype.on.call(this,H$a,H$b,H$c,H$d)},H$a.once=function(H$a,H$b,H$c,H$d){return 1!==this._mouseEnableState&&this.isMouseEvent(H$a)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(H$a,H$b,H$c,H$d,!0)):H$e.prototype.once.call(this,H$a,H$b,H$c,H$d)},H$a._$2__onDisplay=function(){if(1!==this._mouseEnableState){var H$a=this;for(H$a=H$a.parent;H$a&&1!==H$a._mouseEnableState&&!H$a._getBit(2);)H$a.mouseEnabled=!0,H$a._setBit(2,!0),H$a=H$a.parent}},H$a.loadImage=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g=this;return void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0),void 0===H$d&&(H$d=0),void 0===H$e&&(H$e=0),this.graphics.loadImage(H$a,H$b,H$c,H$d,H$e,function(H$a){H$g.destroyed||(H$g.size(H$b+(H$d||H$a.width),H$c+(H$e||H$a.height)),H$g.repaint(),H$f&&H$f.runWith(H$a))}),this},H$a.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},H$a._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},H$a._childChanged=function(H$a){this._childs.length?this._renderType|=2048:this._renderType&=-2049,H$a&&this._get$P("hasZorder")&&H$x.timer.callLater(this,this.updateZOrder),this.repaint()},H$a.parentRepaint=function(){var H$a=this._parent;H$a&&0===H$a._repaint&&(H$a._repaint=1,H$a.parentRepaint())},H$a.startDrag=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){void 0===H$b&&(H$b=!1),void 0===H$c&&(H$c=0),void 0===H$d&&(H$d=300),void 0===H$f&&(H$f=!1),void 0===H$g&&(H$g=.92),this._$P.dragging||this._set$P("dragging",new H$R),this._$P.dragging.start(this,H$a,H$b,H$c,H$d,H$e,H$f,H$g)},H$a.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},H$a._releaseMem=function(){if(this._$P){var H$a=this._$P.cacheCanvas;H$a&&H$a.ctx&&(H$U.recover("RenderContext",H$a.ctx),H$a.ctx.canvas.size(0,0),H$a.ctx=null);var H$b=this._$P._filterCache;H$b&&(H$b.destroy(),H$b.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},H$a._setDisplay=function(H$a){H$a||this._releaseMem(),H$e.prototype._setDisplay.call(this,H$a)},H$a.hitTestPoint=function(H$a,H$b){var H$c=this.globalToLocal(H$y.TEMP.setTo(H$a,H$b));return H$a=H$c.x,H$b=H$c.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?H$z.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(H$a,H$b)},H$a.getMousePoint=function(){return this.globalToLocal(H$y.TEMP.setTo(H$x.stage.mouseX,H$x.stage.mouseY))},H$a._getWords=function(){return null},H$a._addChildsToLayout=function(H$a){var H$b=this._getWords();if(null==H$b&&0==this._childs.length)return!1;if(H$b)for(var H$c=0,H$d=H$b.length;H$c<H$d;H$c++)H$a.push(H$b[H$c]);H$c=0;for(var H$e=this._childs.length;H$c<H$e;++H$c){var H$f=this._childs[H$c];H$f._style._enableLayout()&&H$f._addToLayout(H$a)}return!0},H$a._addToLayout=function(H$a){this._style.absolute||(this._style.block?H$a.push(this):this._addChildsToLayout(H$a)&&(this.x=this.y=0))},H$a._isChar=function(){return!1},H$a._getCSSStyle=function(){return this._style.getCSSStyle()},H$a._setAttributes=function(H$a,H$b){switch(H$a){case"x":this.x=parseFloat(H$b);break;case"y":this.y=parseFloat(H$b);break;case"width":this.width=parseFloat(H$b);break;case"height":this.height=parseFloat(H$b);break;default:this[H$a]=H$b}},H$a._layoutLater=function(){this.parent&&this.parent._layoutLater()},H$o(0,H$a,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(H$a){this._optimizeScrollRect!=H$a&&(this._optimizeScrollRect=H$a,this.conchModel&&this.conchModel.optimizeScrollRect(H$a))}),H$o(0,H$a,"customRenderEnable",null,function(H$a){if(H$a&&(this._renderType|=1024,H$H.isConchNode)){H$c.CustomList.push(this);var H$b=new H$ta("2d");H$b._setContext(new CanvasRenderingContext2D),this.customContext=new H$I(0,0,H$b),H$b.context.setCanvasType&&H$b.context.setCanvasType(2),this.conchModel.custom(H$b.context)}}),H$o(0,H$a,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(H$a){this.cacheAs=H$a?this._$P.hasFilter?"none":"normal":"none"}),H$o(0,H$a,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(H$a){var H$b=this._$P.cacheCanvas;if(H$a!==(H$b?H$b.type:"none")){if("none"!==H$a)this._getBit(1)||this._setUpNoticeType(1),H$b||(H$b=this._set$P("cacheCanvas",H$U.getItemByClass("cacheCanvas",Object))),H$b.type=H$a,H$b.reCache=!0,this._renderType|=16,"bitmap"==H$a&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(H$b){var H$c=H$b;H$c&&H$c.ctx&&(H$U.recover("RenderContext",H$c.ctx),H$c.ctx.canvas.size(0,0),H$c.ctx=null),H$U.recover("cacheCanvas",H$b)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),H$o(0,H$a,"zOrder",function(){return this._zOrder},function(H$a){this._zOrder!=H$a&&(this._zOrder=H$a,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(H$a),this._parent&&(H$a&&this._parent._set$P("hasZorder",!0),H$x.timer.callLater(this._parent,this.updateZOrder)))}),H$o(0,H$a,"rotation",function(){return this._style._tf.rotate},function(H$a){var H$b=this.getStyle();if(H$b._tf.rotate!==H$a){H$b.setRotate(H$a),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(H$a),this._renderType|=4;var H$c=this._parent;H$c&&0===H$c._repaint&&(H$c._repaint=1,H$c.parentRepaint())}}),H$o(0,H$a,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(H$a){this._width!==H$a&&(this._width=H$a,this.conchModel&&this.conchModel.size(H$a,this._height),this.repaint())}),H$o(0,H$a,"x",function(){return this._x},function(H$a){if(this._x!==H$a){if(this.destroyed)return;this._x=H$a,this.conchModel&&this.conchModel.pos(H$a,this._y);var H$b=this._parent;H$b&&0===H$b._repaint&&(H$b._repaint=1,H$b.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),H$o(0,H$a,"globalScaleY",function(){for(var H$a=1,H$b=this;H$b&&H$b!==H$x.stage;)H$a*=H$b.scaleY,H$b=H$b.parent;return H$a}),H$o(0,H$a,"hitArea",function(){return this._$P.hitArea},function(H$a){this._set$P("hitArea",H$a)}),H$o(0,H$a,"staticCache",function(){return this._$P.staticCache},function(H$a){this._set$P("staticCache",H$a),H$a||this.reCache()}),H$o(0,H$a,"texture",function(){return this._texture},function(H$a){this._texture!=H$a&&(this._texture=H$a,this.graphics.cleanByTexture(H$a,0,0))}),H$o(0,H$a,"y",function(){return this._y},function(H$a){if(this._y!==H$a){if(this.destroyed)return;this._y=H$a,this.conchModel&&this.conchModel.pos(this._x,H$a);var H$b=this._parent;H$b&&0===H$b._repaint&&(H$b._repaint=1,H$b.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),H$o(0,H$a,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(H$a){this._height!==H$a&&(this._height=H$a,this.conchModel&&this.conchModel.size(this._width,H$a),this.repaint())}),H$o(0,H$a,"blendMode",function(){return this._style.blendMode},function(H$a){this.getStyle().blendMode=H$a,this.conchModel&&this.conchModel.blendMode(H$a),H$a&&"source-over"!=H$a?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),H$o(0,H$a,"scaleX",function(){return this._style._tf.scaleX},function(H$a){var H$b=this.getStyle();if(H$b._tf.scaleX!==H$a){H$b.setScaleX(H$a),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(H$a,H$b._tf.scaleY),this._renderType|=4;var H$c=this._parent;H$c&&0===H$c._repaint&&(H$c._repaint=1,H$c.parentRepaint())}}),H$o(0,H$a,"scaleY",function(){return this._style._tf.scaleY},function(H$a){var H$b=this.getStyle();if(H$b._tf.scaleY!==H$a){H$b.setScaleY(H$a),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(H$b._tf.scaleX,H$a),this._renderType|=4;var H$c=this._parent;H$c&&0===H$c._repaint&&(H$c._repaint=1,H$c.parentRepaint())}}),H$o(0,H$a,"stage",function(){return H$x.stage}),H$o(0,H$a,"skewX",function(){return this._style._tf.skewX},function(H$a){var H$b=this.getStyle();if(H$b._tf.skewX!==H$a){H$b.setSkewX(H$a),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(H$a,H$b._tf.skewY),this._renderType|=4;var H$c=this._parent;H$c&&0===H$c._repaint&&(H$c._repaint=1,H$c.parentRepaint())}}),H$o(0,H$a,"scrollRect",function(){return this._style.scrollRect},function(H$a){this.getStyle().scrollRect=H$a,this.repaint(),H$a?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(H$a.x,H$a.y,H$a.width,H$a.height)):(this._renderType&=-129,this.conchModel&&(H$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),H$o(0,H$a,"skewY",function(){return this._style._tf.skewY},function(H$a){var H$b=this.getStyle();if(H$b._tf.skewY!==H$a){H$b.setSkewY(H$a),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(H$b._tf.skewX,H$a),this._renderType|=4;var H$c=this._parent;H$c&&0===H$c._repaint&&(H$c._repaint=1,H$c.parentRepaint())}}),H$o(0,H$a,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(H$a){this._tfChanged=!1,(this._transform=H$a)&&(this._x=H$a.tx,this._y=H$a.ty,H$a.tx=H$a.ty=0,this.conchModel&&this.conchModel.transform(H$a.a,H$a.b,H$a.c,H$a.d,this._x,this._y)),H$a?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),H$o(0,H$a,"pivotX",function(){return this._style._tf.translateX},function(H$a){this.getStyle().setTranslateX(H$a),this.conchModel&&this.conchModel.pivot(H$a,this._style._tf.translateY),this.repaint()}),H$o(0,H$a,"pivotY",function(){return this._style._tf.translateY},function(H$a){this.getStyle().setTranslateY(H$a),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,H$a),this.repaint()}),H$o(0,H$a,"alpha",function(){return this._style.alpha},function(H$a){this._style&&this._style.alpha!==H$a&&(H$a=H$a<0?0:1<H$a?1:H$a,this.getStyle().alpha=H$a,this.conchModel&&this.conchModel.alpha(H$a),1!==H$a?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),H$o(0,H$a,"visible",function(){return this._style.visible},function(H$a){this._style&&this._style.visible!==H$a&&(this.getStyle().visible=H$a,this.conchModel&&this.conchModel.visible(H$a),this.parentRepaint())}),H$o(0,H$a,"graphics",function(){return this._graphics||(this.graphics=H$D.createGraphics())},function(H$a){this._graphics&&(this._graphics._sp=null),(this._graphics=H$a)?(this._renderType&=-2,this._renderType|=512,(H$a._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(H$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),H$o(0,H$a,"filters",function(){return this._$P.filters},function(H$a){H$a&&0===H$a.length&&(H$a=null),this._$P.filters!=H$a&&(this._set$P("filters",H$a?H$a.slice():null),H$H.isConchApp&&(this.conchModel&&(H$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),H$H.isWebGL&&(H$a&&H$a.length?this._renderType|=32:this._renderType&=-33),H$a&&0<H$a.length?(this._getBit(1)||this._setUpNoticeType(1),H$H.isWebGL&&1==H$a.length&&H$a[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(H$H.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),H$o(0,H$a,"parent",H$e.prototype._$get_parent,function(H$a){H$x.superSet(H$aa,this,"parent",H$a),H$a&&this._getBit(2)&&this._$2__onDisplay()}),H$o(0,H$a,"mask",function(){return this._$P._mask},function(H$a){H$a&&this.mask&&this.mask._$P.maskParent||(H$a?(this.cacheAs="bitmap",this._set$P("_mask",H$a),H$a._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",H$a),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(H$a?H$a.conchModel:null),this._renderType|=64,this.parentRepaint())}),H$o(0,H$a,"mouseEnabled",function(){return 1<this._mouseEnableState},function(H$a){this._mouseEnableState=H$a?2:1}),H$o(0,H$a,"globalScaleX",function(){for(var H$a=1,H$b=this;H$b&&H$b!==H$x.stage;)H$a*=H$b.scaleX,H$b=H$b.parent;return H$a}),H$o(0,H$a,"mouseX",function(){return this.getMousePoint().x}),H$o(0,H$a,"mouseY",function(){return this.getMousePoint().y}),H$c.fromImage=function(H$a){return(new H$c).loadImage(H$a)},H$c._cachePool=[],H$c.CustomList=[],H$i(H$c,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=H$g.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),H$c}(H$aa),H$ma=function(H$a){function H$b(H$a){this._audio=null,this._onEnd=null,this._resumePlay=null,H$b.__super.call(this),this._onEnd=H$Y.bind(this.__onEnd,this),this._resumePlay=H$Y.bind(this.__resumePlay,this),H$a.addEventListener("ended",this._onEnd),this._audio=H$a}H$k(H$b,"laya.media.h5audio.AudioSoundChannel",H$da);var H$c=H$b.prototype;return H$c.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(H$x.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},H$c.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,H$M.container.appendChild(this._audio),this._audio.play()}catch(H$a){this.event("error")}},H$c.play=function(H$a){this.isStopped=!1;try{this._audio.playbackRate=H$C.playbackRate,this._audio.currentTime=this.startTime}catch(H$a){return void this._audio.addEventListener("canplay",this._resumePlay)}H$C.addChannel(this),H$M.container.appendChild(this._audio),!H$a&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},H$c.stop=function(){this.isStopped=!0,H$C.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&H$H.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),H$M.onIE||this._audio!=H$ca._musicAudio&&H$U.recover("audio:"+this.url,this._audio),H$M.removeElement(this._audio),this._audio=null)},H$c.pause=function(){this.isStopped=!0,H$C.removeChannel(this),"pause"in this._audio&&this._audio.pause()},H$c.resume=function(){this._audio&&(this.isStopped=!1,H$C.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},H$o(0,H$c,"position",function(){return this._audio?this._audio.currentTime:0}),H$o(0,H$c,"duration",function(){return this._audio?this._audio.duration:0}),H$o(0,H$c,"volume",function(){return this._audio?this._audio.volume:1},function(H$a){this._audio&&(this._audio.volume=H$a)}),H$b}(),H$na=function(H$a){function H$b(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=H$fa.ctx,H$b.__super.call(this),this._onPlayEnd=H$Y.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}H$k(H$b,"laya.media.webaudio.WebAudioSoundChannel",H$da);var H$c=H$b.prototype;return H$c.play=function(H$a){if(H$C.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var H$b=this.context,H$c=this.gain,H$d=H$b.createBufferSource();(this.bufferSource=H$d).buffer=this.audioBuffer,H$d.connect(H$c),H$c&&H$c.disconnect(),H$c.connect(H$b.destination),H$d.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=H$M.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(H$d.loop=!0),H$d.playbackRate.setTargetAtTime?H$d.playbackRate.setTargetAtTime(H$C.playbackRate,this.context.currentTime,.1):H$d.playbackRate.value=H$C.playbackRate,H$d.start(0,this.startTime),!H$a&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},H$c.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(H$x.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},H$c._clearBufferSource=function(){if(this.bufferSource){var H$a=this.bufferSource;H$a.stop?H$a.stop(0):H$a.noteOff(0),H$a.disconnect(0),H$a.onended=null,H$b._tryCleanFailed||this._tryClearBuffer(H$a),this.bufferSource=null}},H$c._tryClearBuffer=function(H$a){try{H$a.buffer=null}catch(H$a){H$b._tryCleanFailed=!0}},H$c.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,H$C.removeChannel(this),this.startHandler=null,this.completeHandler=null},H$c.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,H$C.removeChannel(this)},H$c.resume=function(){this.startTime=this._pauseTime,this.play(!1)},H$o(0,H$c,"position",function(){return this.bufferSource?(H$M.now()-this._startTime)/1e3+this.startTime:0}),H$o(0,H$c,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),H$o(0,H$c,"volume",function(){return this._volume},function(H$a){this.isStopped||(this._volume=H$a,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(H$a,this.context.currentTime,.1):this.gain.gain.value=H$a)}),H$b._tryCleanFailed=!1,H$b}(),H$oa=function(H$a){function H$b(){H$b.__super.call(this),this._w=0,this._h=0}H$k(H$b,"laya.resource.Bitmap",H$ja);var H$c=H$b.prototype;return H$o(0,H$c,"width",function(){return this._w}),H$o(0,H$c,"height",function(){return this._h}),H$o(0,H$c,"source",function(){return this._source}),H$b}(),H$pa=function(H$b){function H$a(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,H$a.__super.call(this),this._interval=H$d.animationInterval,this._setUpNoticeType(1)}H$k(H$a,"laya.display.AnimationPlayerBase",H$b);var H$c=H$a.prototype;return H$c.play=function(H$a,H$b,H$c,H$d){void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=!0),void 0===H$c&&(H$c=""),void 0===H$d&&(H$d=!0),this._isPlaying=!0,this.index="string"==typeof H$a?this._getFrameByLabel(H$a):H$a,this.loop=H$b,this._actionName=H$c,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},H$c._getFrameByLabel=function(H$a){var H$b=0;for(H$b=0;H$b<this._count;H$b++)if(this._labels[H$b]&&0<=this._labels[H$b].indexOf(H$a))return H$b;return 0},H$c._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},H$c._setControlNode=function(H$a){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=H$a)&&H$a!=this&&(H$a.on("display",this,this._checkResumePlaying),H$a.on("undisplay",this,this._checkResumePlaying))},H$c._setDisplay=function(H$a){H$b.prototype._setDisplay.call(this,H$a),this._checkResumePlaying()},H$c._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},H$c.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},H$c.addLabel=function(H$a,H$b){this._labels||(this._labels={}),this._labels[H$b]||(this._labels[H$b]=[]),this._labels[H$b].push(H$a)},H$c.removeLabel=function(H$a){if(H$a){if(this._labels)for(var H$b in this._labels)this._removeLabelFromLabelList(this._labels[H$b],H$a)}else this._labels=null},H$c._removeLabelFromLabelList=function(H$a,H$b){if(H$a)for(var H$c=H$a.length-1;0<=H$c;H$c--)H$a[H$c]==H$b&&H$a.splice(H$c,1)},H$c.gotoAndStop=function(H$a){this.index="string"==typeof H$a?this._getFrameByLabel(H$a):H$a,this.stop()},H$c._displayToIndex=function(H$a){},H$c.clear=function(){this.stop(),this._labels=null},H$o(0,H$c,"interval",function(){return this._interval},function(H$a){this._interval!=H$a&&(this._frameRateChanged=!0,this._interval=H$a,this._isPlaying&&0<H$a&&this.timerLoop(H$a,this,this._frameLoop,null,!0,!0))}),H$o(0,H$c,"isPlaying",function(){return this._isPlaying}),H$o(0,H$c,"index",function(){return this._index},function(H$a){if(this._index=H$a,this._displayToIndex(H$a),this._labels&&this._labels[H$a])for(var H$b=this._labels[H$a],H$c=0,H$d=H$b.length;H$c<H$d;H$c++)this.event("label",H$b[H$c])}),H$o(0,H$c,"count",function(){return this._count}),H$a.WRAP_POSITIVE=0,H$a.WRAP_REVERSE=1,H$a.WRAP_PINGPONG=2,H$a}(H$la),H$qa=function(H$b){function H$n(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,H$n.__super.call(this),this.overflow=H$n.VISIBLE,this._style=new H$ba(this),this._style.wordWrap=!1}H$k(H$n,"laya.display.Text",H$b);var H$a=H$n.prototype;return H$a.destroy=function(H$a){void 0===H$a&&(H$a=!0),H$b.prototype.destroy.call(this,H$a),this._lines=null,this._words&&(this._words.length=0,this._words=null)},H$a._getBoundPointsM=function(H$a){void 0===H$a&&(H$a=!1);var H$b=H$z.TEMP;return H$b.setTo(0,0,this.width,this.height),H$b._getBoundPoints()},H$a.getGraphicBounds=function(H$a){void 0===H$a&&(H$a=!1);var H$b=H$z.TEMP;return H$b.setTo(0,0,this.width,this.height),H$b},H$a._getCSSStyle=function(){return this._style},H$a.lang=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j,H$k){if(H$a=H$n.langPacks&&H$n.langPacks[H$a]?H$n.langPacks[H$a]:H$a,arguments.length<2)this._text=H$a;else{for(var H$l=0,H$m=arguments.length;H$l<H$m;H$l++)H$a=H$a.replace("{"+H$l+"}",arguments[H$l+1]);this._text=H$a}},H$a._isPassWordMode=function(){var H$a=this._style.password;return"prompt"in this&&this.prompt==this._text&&(H$a=!1),H$a},H$a._getPassWordTxt=function(H$a){var H$b;H$b="";for(var H$c=H$a.length;0<H$c;H$c--)H$b+="●";return H$b},H$a.renderText=function(H$a,H$b){var H$c=this.graphics;H$c.clear(!0);var H$d=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(H$M.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);H$M.context.font=H$d;var H$e=this.padding,H$f=H$e[3],H$g="left",H$h=this._lines,H$i=this.leading+this._charSize.height,H$j=this._currBitmapFont;H$j&&(H$i=this.leading+H$j.getMaxHeight());var H$k=H$e[0];if(!H$j&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(H$g="right",H$f=this._width-H$e[1]):"center"==this.align&&(H$g="center",H$f=.5*this._width+H$e[3]-H$e[1])),0<this._height){var H$l=this._textHeight>this._height?"top":this.valign;"middle"===H$l?H$k=.5*(this._height-H$b*H$i)+H$e[0]-H$e[2]:"bottom"===H$l&&(H$k=this._height-H$b*H$i-H$e[2])}var H$m=this._style;if(H$j&&H$j.autoScaleSize)var H$n=H$j.fontSize/this.fontSize;if(this._clipPoint)if(H$c.save(),H$j&&H$j.autoScaleSize){var H$o=0,H$p=0;H$o=this._width?this._width-H$e[3]-H$e[1]:this._textWidth,H$p=this._height?this._height-H$e[0]-H$e[2]:this._textHeight,H$o*=H$n,H$p*=H$n,H$c.clipRect(H$e[3],H$e[0],H$o,H$p)}else H$c.clipRect(H$e[3],H$e[0],this._width?this._width-H$e[3]-H$e[1]:this._textWidth,this._height?this._height-H$e[0]-H$e[2]:this._textHeight);var H$q=H$m.password;"prompt"in this&&this.prompt==this._text&&(H$q=!1);for(var H$r=0,H$s=0,H$t=Math.min(this._lines.length,H$b+H$a)||1,H$u=H$a;H$u<H$t;H$u++){var H$v,H$w=H$h[H$u];if(H$q){var H$x=H$w.length;H$w="";for(var H$y=H$x;0<H$y;H$y--)H$w+="●"}if(H$r=H$f-(this._clipPoint?this._clipPoint.x:0),H$s=H$k+H$i*H$u-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(H$g,H$r,H$s,H$u),H$j){var H$z=this.width;H$j.autoScaleSize&&(H$z=this.width*H$n),H$j.drawText(H$w,this,H$r,H$s,this.align,H$z)}else H$H.isWebGL?(this._words||(this._words=[]),(H$v=this._words.length>H$u-H$a?this._words[H$u-H$a]:new H$_).setText(H$w)):H$v=H$w,H$m.stroke?H$c.fillBorderText(H$v,H$r,H$s,H$d,this.color,H$m.strokeColor,H$m.stroke,H$g):H$c.fillText(H$v,H$r,H$s,H$d,this.color,H$g)}if(H$j&&H$j.autoScaleSize){var H$A=1/H$n;this.scale(H$A,H$A)}this._clipPoint&&H$c.restore(),this._startX=H$f,this._startY=H$k},H$a.drawUnderline=function(H$a,H$b,H$c,H$d){var H$e=this._lineWidths[H$d];switch(H$a){case"center":H$b-=H$e/2;break;case"right":H$b-=H$e}H$c+=this._charSize.height,this._graphics.drawLine(H$b,H$c,H$b+H$e,H$c,this.underlineColor||this.color,1)},H$a.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);H$M.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new H$y(0,0)):this._clipPoint=null;var H$a=this._lines.length;if(this.overflow!=H$n.VISIBLE){var H$b=this.overflow==H$n.HIDDEN?Math.floor:Math.ceil;H$a=Math.min(H$a,H$b((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var H$c=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(H$c,H$a),this.repaint()},H$a.evalTextSize=function(){var H$a,H$b=NaN;H$a=Math.max.apply(this,this._lineWidths),H$b=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],H$a==this._textWidth&&H$b==this._textHeight||(this._textWidth=H$a,this._textHeight=H$b,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},H$a.checkEnabledViewportOrNot=function(){return this.overflow==H$n.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},H$a.changeText=function(H$a){this._text!==H$a&&(this.lang(H$a+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},H$a.parseLines=function(H$a){var H$b=this.wordWrap||this.overflow==H$n.HIDDEN;if(H$b)var H$c=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var H$d=H$M.context.measureText(H$n._testWord);H$H.isConchApp&&0===H$d.width&&0===H$d.height&&(H$d=H$M.context.measureText("W")),this._charSize.width=H$d.width,this._charSize.height=H$d.height||this.fontSize}for(var H$e=H$a.replace(/\r\n/g,"\n").split("\n"),H$f=0,H$g=H$e.length;H$f<H$g;H$f++){var H$h=H$e[H$f];H$b?this.parseLine(H$h,H$c):(this._lineWidths.push(this.getTextWidth(H$h)),this._lines.push(H$h))}},H$a.parseLine=function(H$a,H$b){H$M.context;var H$c,H$d=this._lines,H$e=0,H$f=NaN,H$g=NaN,H$h=0;if((H$f=this.getTextWidth(H$a))<=H$b)return H$d.push(H$a),void this._lineWidths.push(H$f);H$f=this._charSize.width,0==(H$e=Math.floor(H$b/H$f))&&(H$e=1),H$g=H$f=this.getTextWidth(H$a.substring(0,H$e));for(var H$i=H$e,H$j=H$a.length;H$i<H$j;H$i++)if(H$b<(H$g+=H$f=this.getTextWidth(H$a.charAt(H$i))))if(this.wordWrap){var H$k=H$a.substring(H$h,H$i);if(H$k.charCodeAt(H$k.length-1)<255?(H$c=/(?:\w|-)+$/.exec(H$k))&&(H$i=H$c.index+H$h,0==H$c.index?H$i+=H$k.length:H$k=H$a.substring(H$h,H$i)):H$n.RightToLeft&&(H$c=/([\u0600-\u06FF])+$/.exec(H$k))&&(H$i=H$c.index+H$h,0==H$c.index?H$i+=H$k.length:H$k=H$a.substring(H$h,H$i)),H$d.push(H$k),this._lineWidths.push(H$g-H$f),!((H$h=H$i)+H$e<H$j)){H$d.push(H$a.substring(H$h,H$j)),this._lineWidths.push(this.getTextWidth(H$d[H$d.length-1])),H$h=-1;break}H$i+=H$e,H$g=H$f=this.getTextWidth(H$a.substring(H$h,H$i)),H$i--}else if(this.overflow==H$n.HIDDEN)return H$d.push(H$a.substring(0,H$i)),void this._lineWidths.push(this.getTextWidth(H$d[H$d.length-1]));this.wordWrap&&-1!=H$h&&(H$d.push(H$a.substring(H$h,H$j)),this._lineWidths.push(this.getTextWidth(H$d[H$d.length-1])))},H$a.getTextWidth=function(H$a){return this._currBitmapFont?this._currBitmapFont.getTextWidth(H$a):H$M.context.measureText(H$a).width},H$a.getWordWrapWidth=function(){var H$a=this.padding,H$b=NaN;return(H$b=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(H$b=this.wordWrap?100:H$M.width),H$b<=0&&(H$b=100),H$b-H$a[3]-H$a[1]},H$a.getCharPoint=function(H$a,H$b){this._isChanged&&H$x.timer.runCallLater(this,this.typeset);for(var H$c=0,H$d=this._lines,H$e=0,H$f=0,H$g=H$d.length;H$f<H$g;H$f++){if(H$a<(H$c+=H$d[H$f].length)){var H$h=H$f;break}H$e=H$c}var H$i=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;H$M.context.font=H$i;var H$j=this.getTextWidth(this._text.substring(H$e,H$a));return(H$b||new H$y).setTo(this._startX+H$j-(this._clipPoint?this._clipPoint.x:0),this._startY+H$h*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},H$o(0,H$a,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(H$a){H$a!=this._width&&(H$x.superSet(H$la,this,"width",H$a),this.isChanged=!0)}),H$o(0,H$a,"textWidth",function(){return this._isChanged&&H$x.timer.runCallLater(this,this.typeset),this._textWidth}),H$o(0,H$a,"height",function(){return this._height?this._height:this.textHeight},function(H$a){H$a!=this._height&&(H$x.superSet(H$la,this,"height",H$a),this.isChanged=!0)}),H$o(0,H$a,"textHeight",function(){return this._isChanged&&H$x.timer.runCallLater(this,this.typeset),this._textHeight}),H$o(0,H$a,"padding",function(){return this._getCSSStyle().padding},function(H$a){this._getCSSStyle().padding=H$a,this.isChanged=!0}),H$o(0,H$a,"bold",function(){return this._getCSSStyle().bold},function(H$a){this._getCSSStyle().bold=H$a,this.isChanged=!0}),H$o(0,H$a,"text",function(){return this._text||""},function(H$a){this._text!==H$a&&(this.lang(H$a+""),this.isChanged=!0,this.event("change"))}),H$o(0,H$a,"color",function(){return this._getCSSStyle().color},function(H$a){this._getCSSStyle().color!=H$a&&(this._getCSSStyle().color=H$a,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),H$o(0,H$a,"font",function(){return this._getCSSStyle().fontFamily},function(H$a){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),H$n._bitmapFonts&&H$n._bitmapFonts[H$a]&&(this._currBitmapFont=H$n._bitmapFonts[H$a]),this._getCSSStyle().fontFamily=H$a,this.isChanged=!0}),H$o(0,H$a,"fontSize",function(){return this._getCSSStyle().fontSize},function(H$a){this._getCSSStyle().fontSize=H$a,this.isChanged=!0}),H$o(0,H$a,"italic",function(){return this._getCSSStyle().italic},function(H$a){this._getCSSStyle().italic=H$a,this.isChanged=!0}),H$o(0,H$a,"align",function(){return this._getCSSStyle().align},function(H$a){this._getCSSStyle().align=H$a,this.isChanged=!0}),H$o(0,H$a,"valign",function(){return this._getCSSStyle().valign},function(H$a){this._getCSSStyle().valign=H$a,this.isChanged=!0}),H$o(0,H$a,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(H$a){this._getCSSStyle().wordWrap=H$a,this.isChanged=!0}),H$o(0,H$a,"leading",function(){return this._getCSSStyle().leading},function(H$a){this._getCSSStyle().leading=H$a,this.isChanged=!0}),H$o(0,H$a,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(H$a){this._getCSSStyle().backgroundColor=H$a,this.isChanged=!0}),H$o(0,H$a,"borderColor",function(){return this._getCSSStyle().borderColor},function(H$a){this._getCSSStyle().borderColor=H$a,this.isChanged=!0}),H$o(0,H$a,"stroke",function(){return this._getCSSStyle().stroke},function(H$a){this._getCSSStyle().stroke=H$a,this.isChanged=!0}),H$o(0,H$a,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(H$a){this._getCSSStyle().strokeColor=H$a,this.isChanged=!0}),H$o(0,H$a,"isChanged",null,function(H$a){this._isChanged!==H$a&&(this._isChanged=H$a)&&H$x.timer.callLater(this,this.typeset)}),H$o(0,H$a,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(H$a){if(!(this.overflow!=H$n.SCROLL||this.textWidth<this._width)&&this._clipPoint){H$a=H$a<this.padding[3]?this.padding[3]:H$a;var H$b=this._textWidth-this._width;H$a=H$b<H$a?H$b:H$a;var H$c=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=H$a,this.renderText(this._lastVisibleLineIndex,H$c)}}),H$o(0,H$a,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(H$a){if(!(this.overflow!=H$n.SCROLL||this.textHeight<this._height)&&this._clipPoint){H$a=H$a<this.padding[0]?this.padding[0]:H$a;var H$b=this._textHeight-this._height,H$c=(H$a=H$b<H$a?H$b:H$a)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=H$c;var H$d=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=H$a,this.renderText(H$c,H$d)}}),H$o(0,H$a,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),H$o(0,H$a,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),H$o(0,H$a,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),H$o(0,H$a,"underlineColor",function(){return this._underlineColor},function(H$a){this._underlineColor=H$a,this._isChanged=!0,this.typeset()}),H$n.registerBitmapFont=function(H$a,H$b){H$n._bitmapFonts||(H$n._bitmapFonts={}),H$n._bitmapFonts[H$a]=H$b},H$n.unregisterBitmapFont=function(H$a,H$b){if(void 0===H$b&&(H$b=!0),H$n._bitmapFonts&&H$n._bitmapFonts[H$a]){var H$c=H$n._bitmapFonts[H$a];H$b&&H$c.destroy(),delete H$n._bitmapFonts[H$a]}},H$n.setTextRightToLeft=function(){var H$a;(H$a=H$M.canvas.source.style).display="none",H$a.position="absolute",H$a.direction="rtl",H$H._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,H$M.document.body.appendChild(H$M.canvas.source)},H$n.supportFont=function(H$a){H$M.context.font="10px sans-serif";var H$b=H$M.context.measureText("abcji").width;H$M.context.font="10px "+H$a;var H$c=H$M.context.measureText("abcji").width;return console.log(H$b,H$c),H$b!==H$c},H$n._testWord="游",H$n.langPacks=null,H$n.VISIBLE="visible",H$n.SCROLL="scroll",H$n.HIDDEN="hidden",H$n.CharacterCache=!0,H$n.RightToLeft=!1,H$n._bitmapFonts=null,H$i(H$n,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),H$n}(H$la),H$ra=function(H$l){function H$g(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",H$g.__super.call(this),this.offset=new H$y,this._canvasTransform=new H$E,this._previousOrientation=H$M.window.orientation;var H$b=this;this.transform=H$E.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var H$a=H$M.window,H$c=this;H$a.addEventListener("focus",function(){H$b._isFocused=!0,H$c.event("focus"),H$c.event("focuschange")}),H$a.addEventListener("blur",function(){H$b._isFocused=!1,H$c.event("blur"),H$c.event("focuschange"),H$c._isInputting()&&(H$va.inputElement.target.focus=!1)});var H$d="visibilityState",H$e="visibilitychange",H$f=H$a.document;void 0!==H$f.hidden?(H$e="visibilitychange",H$d="visibilityState"):void 0!==H$f.mozHidden?(H$e="mozvisibilitychange",H$d="mozVisibilityState"):void 0!==H$f.msHidden?(H$e="msvisibilitychange",H$d="msVisibilityState"):void 0!==H$f.webkitHidden&&(H$e="webkitvisibilitychange",H$d="webkitVisibilityState"),H$a.document.addEventListener(H$e,function(){"hidden"==H$M.document[H$d]?H$c._setStageVisible(!1):H$c._setStageVisible(!0)}),H$a.document.addEventListener("qbrowserVisibilityChange",function(H$a){H$c._setStageVisible(!H$a.hidden)}),H$a.addEventListener("resize",function(){var H$a=H$M.window.orientation;null!=H$a&&H$a!=H$b._previousOrientation&&H$c._isInputting()&&(H$va.inputElement.target.focus=!1),H$b._previousOrientation=H$a,H$c._isInputting()||H$c._resetCanvas()}),H$a.addEventListener("orientationchange",function(H$a){H$c._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),H$M.onMobile&&this.on("mousedown",this,this._onmouseMove)}H$k(H$g,"laya.display.Stage",H$l);var H$a=H$g.prototype;return H$a._setStageVisible=function(H$a){this._isVisibility!=H$a&&(this._isVisibility=H$a,this._isVisibility||this._isInputting()&&(H$va.inputElement.target.focus=!1),this.event("visibilitychange"))},H$a._isInputting=function(){return H$M.onMobile&&H$va.isInputting},H$a._changeCanvasSize=function(){this.setScreenSize(H$M.clientWidth*H$M.pixelRatio,H$M.clientHeight*H$M.pixelRatio)},H$a._resetCanvas=function(){if(this.screenAdaptationEnabled){var H$a=H$H._mainCanvas;H$a.source.style;H$a.size(1,1),H$x.timer.once(100,this,this._changeCanvasSize)}},H$a.setScreenSize=function(H$a,H$b){var H$c=!1;if("none"!==this._screenMode&&(H$c=(H$a/H$b<1?"vertical":"horizontal")!==this._screenMode)){var H$d=H$b;H$b=H$a,H$a=H$d}this.canvasRotation=H$c;var H$e=H$H._mainCanvas,H$f=H$e.source.style,H$g=this._canvasTransform.identity(),H$h=this._scaleMode,H$i=H$a/this.designWidth,H$j=H$b/this.designHeight,H$k=this.designWidth,H$l=this.designHeight,H$m=H$a,H$n=H$b,H$o=H$M.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,H$h){case"noscale":H$i=H$j=1,H$m=this.designWidth,H$n=this.designHeight;break;case"showall":H$i=H$j=Math.min(H$i,H$j),H$k=H$m=Math.round(this.designWidth*H$i),H$l=H$n=Math.round(this.designHeight*H$j);break;case"noborder":H$i=H$j=Math.max(H$i,H$j),H$m=Math.round(this.designWidth*H$i),H$n=Math.round(this.designHeight*H$j);break;case"full":H$i=H$j=1,this._width=H$k=H$a,this._height=H$l=H$b;break;case"fixedwidth":H$j=H$i,this._height=H$l=Math.round(H$b/H$i);break;case"fixedheight":H$i=H$j,this._width=H$k=Math.round(H$a/H$j);break;case"fixedauto":H$a/H$b<this.designWidth/this.designHeight?(H$j=H$i,this._height=H$l=Math.round(H$b/H$i)):(H$i=H$j,this._width=H$k=Math.round(H$a/H$j))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,H$k=H$k+1&2147483646,H$l=H$l+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),H$i*=this.scaleX,H$j*=this.scaleY,1===H$i&&1===H$j?this.transform.identity():(this.transform.a=this._formatData(H$i/(H$m/H$k)),this.transform.d=this._formatData(H$j/(H$n/H$l)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),H$e.size(H$k,H$l),H$D.changeWebGLSize(H$k,H$l),H$g.scale(H$m/H$k/H$o,H$n/H$l/H$o),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(H$a-H$m)/H$o:this.offset.x=.5*(H$a-H$m)/H$o,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(H$b-H$n)/H$o:this.offset.y=.5*(H$b-H$n)/H$o,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),H$g.translate(this.offset.x,this.offset.y),this.canvasDegree=0,H$c&&("horizontal"===this._screenMode?(H$g.rotate(Math.PI/2),H$g.translate(H$b/H$o,0),this.canvasDegree=90):(H$g.rotate(-Math.PI/2),H$g.translate(0,H$a/H$o),this.canvasDegree=-90)),H$g.a=this._formatData(H$g.a),H$g.d=this._formatData(H$g.d),H$g.tx=this._formatData(H$g.tx),H$g.ty=this._formatData(H$g.ty),H$f.transformOrigin=H$f.webkitTransformOrigin=H$f.msTransformOrigin=H$f.mozTransformOrigin=H$f.oTransformOrigin="0px 0px 0px",H$f.transform=H$f.webkitTransform=H$f.msTransform=H$f.mozTransform=H$f.oTransform="matrix("+H$g.toString()+")",H$g.translate(parseInt(H$f.left)||0,parseInt(H$f.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},H$a._formatData=function(H$a){return Math.abs(H$a)<1e-6?0:Math.abs(1-H$a)<.001?0<H$a?1:-1:H$a},H$a.getMousePoint=function(){return H$y.TEMP.setTo(this.mouseX,this.mouseY)},H$a.repaint=function(){this._repaint=1},H$a.parentRepaint=function(){},H$a._loop=function(){return this.render(H$H.context,0,0),!0},H$a._onmouseMove=function(H$a){this._mouseMoveTime=H$M.now()},H$a.getTimeFromFrameStart=function(){return H$M.now()-this._frameStartTime},H$a.render=function(H$a,H$b,H$c){if("sleep"===this._frameRate&&!H$H.isConchApp){var H$d=H$M.now();if(!(1e3<=H$d-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(H$V.loopCount++,H$p.instance.runEvent(),H$x.timer._update()));this._frameStartTime=H$d}if(this._renderCount++,H$H.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=H$M.now();var H$e="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),H$f=this._renderCount%2==0;if(H$V.renderSlow=!H$e,H$e||H$f||H$H.isConchApp){var H$g;H$V.loopCount++,H$p.instance.runEvent(),H$x.timer._update(),H$D.update3DLoop();var H$h=0,H$i=0;if(H$H.isConchNode)for(H$h=0,H$i=this._scenes.length;H$h<H$i;H$h++)(H$g=this._scenes[H$h])&&H$g._updateSceneConch();else for(H$h=0,H$i=this._scenes.length;H$h<H$i;H$h++)(H$g=this._scenes[H$h])&&H$g._updateScene();if(H$H.isConchNode){var H$j=H$la.CustomList;for(H$h=0,H$i=H$j.length;H$h<H$i;H$h++){var H$k=H$j[H$h];H$k.customRender(H$k.customContext,0,0)}return}}H$H.isConchNode||this.renderingEnabled&&(H$e||!H$f||H$H.isConchWebGL)&&(H$H.isWebGL?H$H.WebGL.mainContext&&!H$H.WebGL.mainContext.isContextLost()&&(H$a.clear(),H$l.prototype.render.call(this,H$a,H$b,H$c),H$V._show&&H$V._sp&&H$V._sp.render(H$a,H$b,H$c),H$D.clear(this._bgColor),H$D.beginFlush(),H$a.flush(),H$D.endFinish(),H$Z.instance&&H$Z.getInstance().endDispose()):(H$D.clear(this._bgColor),H$l.prototype.render.call(this,H$a,H$b,H$c),H$V._show&&H$V._sp&&H$V._sp.render(H$a,H$b,H$c)))}else this._renderCount%5==0&&(H$V.loopCount++,H$p.instance.runEvent(),H$x.timer._update())},H$a._requestFullscreen=function(){var H$a=H$M.document.documentElement;H$a.requestFullscreen?H$a.requestFullscreen():H$a.mozRequestFullScreen?H$a.mozRequestFullScreen():H$a.webkitRequestFullscreen?H$a.webkitRequestFullscreen():H$a.msRequestFullscreen&&H$a.msRequestFullscreen()},H$a._fullScreenChanged=function(){H$x.stage.event("fullscreenchange")},H$a.exitFullscreen=function(){var H$a=H$M.document;H$a.exitFullscreen?H$a.exitFullscreen():H$a.mozCancelFullScreen?H$a.mozCancelFullScreen():H$a.webkitExitFullscreen&&H$a.webkitExitFullscreen()},H$o(0,H$a,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),H$o(0,H$a,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),H$o(0,H$a,"frameRate",function(){return this._frameRate},function(H$a){if(this._frameRate=H$a,H$H.isConchApp)switch(this._frameRate){case"slow":H$M.window.conch&&H$M.window.conchConfig.setSlowFrame&&H$M.window.conchConfig.setSlowFrame(!0);break;case"fast":H$M.window.conch&&H$M.window.conchConfig.setSlowFrame&&H$M.window.conchConfig.setSlowFrame(!1);break;case"mouse":H$M.window.conch&&H$M.window.conchConfig.setMouseFrame&&H$M.window.conchConfig.setMouseFrame(2e3);break;case"sleep":H$M.window.conch&&H$M.window.conchConfig.setLimitFPS&&H$M.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),H$o(0,H$a,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),H$o(0,H$a,"width",H$l.prototype._$get_width,function(H$a){this.designWidth=H$a,H$x.superSet(H$la,this,"width",H$a),H$x.timer.callLater(this,this._changeCanvasSize)}),H$o(0,H$a,"alignH",function(){return this._alignH},function(H$a){this._alignH=H$a,H$x.timer.callLater(this,this._changeCanvasSize)}),H$o(0,H$a,"isFocused",function(){return this._isFocused}),H$o(0,H$a,"height",H$l.prototype._$get_height,function(H$a){this.designHeight=H$a,H$x.superSet(H$la,this,"height",H$a),H$x.timer.callLater(this,this._changeCanvasSize)}),H$o(0,H$a,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||H$E.create()},H$l.prototype._$set_transform),H$o(0,H$a,"isVisibility",function(){return this._isVisibility}),H$o(0,H$a,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),H$o(0,H$a,"scaleMode",function(){return this._scaleMode},function(H$a){this._scaleMode=H$a,H$x.timer.callLater(this,this._changeCanvasSize)}),H$o(0,H$a,"alignV",function(){return this._alignV},function(H$a){this._alignV=H$a,H$x.timer.callLater(this,this._changeCanvasSize)}),H$o(0,H$a,"bgColor",function(){return this._bgColor},function(H$a){this._bgColor=H$a,this.conchModel&&this.conchModel.bgColor(H$a),H$H.isWebGL&&(H$a?H$g._wgColor=H$Q.create(H$a)._color:H$M.onMiniGame||(H$g._wgColor=null)),H$M.onLimixiu?H$g._wgColor=H$Q.create(H$a)._color:H$H.canvas.style.background=H$a||"none"}),H$o(0,H$a,"mouseX",function(){return Math.round(H$p.instance.mouseX/this.clientScaleX)}),H$o(0,H$a,"mouseY",function(){return Math.round(H$p.instance.mouseY/this.clientScaleY)}),H$o(0,H$a,"screenMode",function(){return this._screenMode},function(H$a){this._screenMode=H$a}),H$o(0,H$a,"visible",H$l.prototype._$get_visible,function(H$a){this.visible!==H$a&&(H$x.superSet(H$la,this,"visible",H$a),H$H._mainCanvas.source.style.visibility=H$a?"visible":"hidden")}),H$o(0,H$a,"fullScreenEnabled",null,function(H$a){var H$b=H$M.document,H$c=H$H.canvas;H$a?(H$c.addEventListener("mousedown",this._requestFullscreen),H$c.addEventListener("touchstart",this._requestFullscreen),H$b.addEventListener("fullscreenchange",this._fullScreenChanged),H$b.addEventListener("mozfullscreenchange",this._fullScreenChanged),H$b.addEventListener("webkitfullscreenchange",this._fullScreenChanged),H$b.addEventListener("msfullscreenchange",this._fullScreenChanged)):(H$c.removeEventListener("mousedown",this._requestFullscreen),H$c.removeEventListener("touchstart",this._requestFullscreen),H$b.removeEventListener("fullscreenchange",this._fullScreenChanged),H$b.removeEventListener("mozfullscreenchange",this._fullScreenChanged),H$b.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),H$b.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),H$g.SCALE_NOSCALE="noscale",H$g.SCALE_EXACTFIT="exactfit",H$g.SCALE_SHOWALL="showall",H$g.SCALE_NOBORDER="noborder",H$g.SCALE_FULL="full",H$g.SCALE_FIXED_WIDTH="fixedwidth",H$g.SCALE_FIXED_HEIGHT="fixedheight",H$g.SCALE_FIXED_AUTO="fixedauto",H$g.ALIGN_LEFT="left",H$g.ALIGN_RIGHT="right",H$g.ALIGN_CENTER="center",H$g.ALIGN_TOP="top",H$g.ALIGN_MIDDLE="middle",H$g.ALIGN_BOTTOM="bottom",H$g.SCREEN_NONE="none",H$g.SCREEN_HORIZONTAL="horizontal",H$g.SCREEN_VERTICAL="vertical",H$g.FRAME_FAST="fast",H$g.FRAME_SLOW="slow",H$g.FRAME_MOUSE="mouse",H$g.FRAME_SLEEP="sleep",H$g.FRAME_MOUSE_THREDHOLD=2e3,H$i(H$g,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),H$g}(H$la),H$sa=(function(H$a){function H$b(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,H$b.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}H$k(H$b,"laya.media.SoundNode",H$la);var H$c=H$b.prototype;H$c._onParentChange=function(){this.target=this.parent},H$c.play=function(H$a,H$b){void 0===H$a&&(H$a=1),isNaN(H$a)&&(H$a=1),this.url&&(this.stop(),this._channel=H$C.playSound(this.url,H$a,null,H$b))},H$c.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},H$c._setPlayAction=function(H$a,H$b,H$c,H$d){void 0===H$d&&(H$d=!0),this[H$c]&&H$a&&(H$d?H$a.on(H$b,this,this[H$c]):H$a.off(H$b,this,this[H$c]))},H$c._setPlayActions=function(H$a,H$b,H$c,H$d){if(void 0===H$d&&(H$d=!0),H$a&&H$b){var H$e,H$f=H$b.split(","),H$g=0;for(H$e=H$f.length,H$g=0;H$g<H$e;H$g++)this._setPlayAction(H$a,H$f[H$g],H$c,H$d)}},H$o(0,H$c,"playEvent",null,function(H$a){(this._playEvents=H$a)&&this._tar&&this._setPlayActions(this._tar,H$a,"play")}),H$o(0,H$c,"target",null,function(H$a){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=H$a,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),H$o(0,H$c,"stopEvent",null,function(H$a){(this._stopEvents=H$a)&&this._tar&&this._setPlayActions(this._tar,H$a,"stop")})}(),function(H$a){function H$b(){this._src=null,this._onload=null,this._onerror=null,H$b.__super.call(this)}H$k(H$b,"laya.resource.FileBitmap",H$oa);var H$c=H$b.prototype;return H$o(0,H$c,"src",function(){return this._src},function(H$a){this._src=H$a}),H$o(0,H$c,"onload",null,function(H$a){}),H$o(0,H$c,"onerror",null,function(H$a){}),H$b}()),H$ta=function(H$a){function H$c(H$a,H$b){this._is2D=!1,H$c.__super.call(this);var H$d=this;if(this._source=this,"2D"===H$a||"AUTO"===H$a&&!H$H.isWebGL){this._is2D=!0,this._source=H$b||H$M.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var H$e=this;H$e.getContext=function(H$a,H$b){if(H$d._ctx)return H$d._ctx;var H$c=H$d._ctx=H$d._source.getContext(H$a,H$b);return H$c&&(H$c._canvas=H$e,H$H.isFlash||H$M.onLimixiu||(H$c.size=function(H$a,H$b){})),H$c}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}H$k(H$c,"laya.resource.HTMLCanvas",H$oa);var H$b=H$c.prototype;return H$b.clear=function(){this._ctx&&this._ctx.clear()},H$b.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},H$b.release=function(){},H$b._setContext=function(H$a){this._ctx=H$a},H$b.getContext=function(H$a,H$b){return this._ctx?this._ctx:this._ctx=H$c._createContext(this)},H$b.getMemSize=function(){return 0},H$b.size=function(H$a,H$b){(this._w!=H$a||this._h!=H$b||this._source&&(this._source.width!=H$a||this._source.height!=H$b))&&(this._w=H$a,this._h=H$b,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(H$a,H$b),this._source&&(this._source.height=H$b,this._source.width=H$a))},H$b.getCanvas=function(){return this._source},H$b.toBase64=function(H$a,H$b,H$c){if(this._source)if(H$H.isConchApp&&this._source.toBase64)this._source.toBase64(H$a,H$b,H$c);else{var H$d=this._source.toDataURL(H$a,H$b);H$c.call(this,H$d)}},H$o(0,H$b,"context",function(){return this._ctx}),H$o(0,H$b,"asBitmap",null,function(H$a){}),H$c.create=function(H$a,H$b){return new H$c(H$a,H$b)},H$c.TYPE2D="2D",H$c.TYPE3D="3D",H$c.TYPEAUTO="AUTO",H$c._createContext=null,H$c}(),H$ua=(function(H$a){function H$i(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){throw H$i.__super.call(this),new Error("不允许new！")}H$k(H$i,"laya.resource.HTMLSubImage",H$oa),H$i.create=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){return void 0===H$h&&(H$h=!1),new H$i(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h)}}(),function(H$a){function H$l(){this._frames=null,this._url=null,H$l.__super.call(this),this._setControlNode(this)}H$k(H$l,"laya.display.Animation",H$a);var H$b=H$l.prototype;H$b.destroy=function(H$a){void 0===H$a&&(H$a=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,H$a),this._frames=null,this._labels=null},H$b.play=function(H$a,H$b,H$c,H$d){void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=!0),void 0===H$c&&(H$c=""),void 0===H$d&&(H$d=!0),H$c&&this._setFramesFromCache(H$c,H$d),this._isPlaying=!0,this.index="string"==typeof H$a?this._getFrameByLabel(H$a):H$a,this.loop=H$b,this._actionName=H$c,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},H$b._setFramesFromCache=function(H$a,H$b){var H$c;return void 0===H$b&&(H$b=!1),this._url&&(H$a=this._url+"#"+H$a),H$a&&H$l.framesMap[H$a]?((H$c=H$l.framesMap[H$a])instanceof Array?(this._frames=H$l.framesMap[H$a],this._count=this._frames.length):(H$c.nodeRoot&&(H$l.framesMap[H$a]=this._parseGraphicAnimationByData(H$c),H$c=H$l.framesMap[H$a]),this._frames=H$c.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=H$c.interval),this._labels=this._copyLabels(H$c.labels)),!0):(H$b&&console.log("ani not found:",H$a),!1)},H$b._copyLabels=function(H$a){if(!H$a)return null;var H$b,H$c;for(H$c in H$b={},H$a)H$b[H$c]=H$Y.copyArray([],H$a[H$c]);return H$b},H$b._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&H$a.prototype._frameLoop.call(this)},H$b._displayToIndex=function(H$a){this._frames&&(this.graphics=this._frames[H$a])},H$b.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},H$b.loadImages=function(H$a,H$b){return void 0===H$b&&(H$b=""),this._url="",this._setFramesFromCache(H$b)||(this.frames=H$l.framesMap[H$b]?H$l.framesMap[H$b]:H$l.createFrames(H$a,H$b)),this},H$b.loadAtlas=function(H$b,H$c,H$d){void 0===H$d&&(H$d=""),this._url="";var H$e=this;function H$a(H$a){H$b===H$a&&(H$e.frames=H$l.framesMap[H$d]?H$l.framesMap[H$d]:H$l.createFrames(H$b,H$d),H$c&&H$c.run())}return H$e._setFramesFromCache(H$d)||(H$ha.getAtlas(H$b)?H$a(H$b):H$x.loader.load(H$b,H$s.create(null,H$a,[H$b]),null,"atlas")),this},H$b.loadAnimation=function(H$a,H$b,H$c){this._url=H$a;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,H$b&&H$b.run()):!H$c||H$ha.getAtlas(H$c)?this._loadAnimationData(H$a,H$b,H$c):H$x.loader.load(H$c,H$s.create(this,this._loadAnimationData,[H$a,H$b,H$c]),null,"atlas"),this},H$b._loadAnimationData=function(H$h,H$i,H$a){var H$j=this;if(!H$a||H$ha.getAtlas(H$a)){var H$k=this;H$ha.getRes(H$h)?H$b(H$h):H$x.loader.load(H$h,H$s.create(null,H$b,[H$h]),null,"json"),H$ha.clearRes(H$h)}else console.warn("atlas load fail:"+H$a);function H$b(H$a){if(H$ha.getRes(H$a)&&H$h===H$a){var H$b;if(H$l.framesMap[H$h+"#"])H$k._setFramesFromCache(H$j._actionName,!0),H$j.index=0,H$j._checkResumePlaying();else{var H$c=H$k._parseGraphicAnimation(H$ha.getRes(H$h));if(!H$c)return;var H$d,H$e=H$c.animationList,H$f=0,H$g=H$e.length;for(H$f=0;H$f<H$g;H$f++)H$b=H$e[H$f],H$l.framesMap[H$h+"#"+H$b.name]=H$b,H$d||(H$d=H$b);H$d&&(H$l.framesMap[H$h+"#"]=H$d,H$k._setFramesFromCache(H$j._actionName,!0),H$j.index=0),H$j._checkResumePlaying()}H$i&&H$i.run()}}},H$b._parseGraphicAnimation=function(H$a){return H$xa.parseAnimationData(H$a)},H$b._parseGraphicAnimationByData=function(H$a){return H$xa.parseAnimationByData(H$a)},H$o(0,H$b,"frames",function(){return this._frames},function(H$a){(this._frames=H$a)&&(this._count=H$a.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),H$o(0,H$b,"autoPlay",null,function(H$a){H$a?this.play():this.stop()}),H$o(0,H$b,"source",null,function(H$a){-1<H$a.indexOf(".ani")?this.loadAnimation(H$a):-1<H$a.indexOf(".json")||-1<H$a.indexOf("als")||-1<H$a.indexOf("atlas")?this.loadAtlas(H$a):this.loadImages(H$a.split(","))}),H$o(0,H$b,"autoAnimation",null,function(H$a){this.play(0,!0,H$a,!1)}),H$l.createFrames=function(H$a,H$b){var H$c,H$d,H$e=0,H$f=0;if("string"==typeof H$a){var H$g=H$ha.getAtlas(H$a);if(H$g&&H$g.length)for(H$c=[],H$e=0,H$f=H$g.length;H$e<H$f;H$e++)(H$d=new H$D.createGraphics).drawTexture(H$ha.getRes(H$g[H$e]),0,0),H$c.push(H$d)}else if(H$a instanceof Array)for(H$c=[],H$e=0,H$f=H$a.length;H$e<H$f;H$e++)(H$d=new H$D.createGraphics).loadImage(H$a[H$e],0,0),H$c.push(H$d);return H$b&&(H$l.framesMap[H$b]=H$c),H$c},H$l.clearCache=function(H$a){var H$b,H$c=H$l.framesMap,H$d=H$a+"#";for(H$b in H$c)H$b!==H$a&&0!=H$b.indexOf(H$d)||delete H$l.framesMap[H$b]},H$l.framesMap={}}(H$pa),function(H$a){function H$f(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,H$f.__super.call(this),null==H$f._sortIndexFun&&(H$f._sortIndexFun=H$w.sortByKey("index",!1,!0))}H$k(H$f,"laya.display.FrameAnimation",H$a);var H$b=H$f.prototype;return H$b._setUp=function(H$a,H$b){this._labels=null,this._animationNewFrames=null,this._targetDic=H$a,this._animationData=H$b,this.interval=1e3/H$b.frameRate,H$b.parsed?(this._count=H$b.count,this._labels=H$b.labels,this._animationNewFrames=H$b.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),H$b.parsed=!0,H$b.labels=this._labels,H$b.count=this._count,H$b.animationNewFrames=this._animationNewFrames},H$b.clear=function(){H$a.prototype.clear.call(this),this._targetDic=null,this._animationData=null},H$b._displayToIndex=function(H$a){if(this._animationData){H$a<0&&(H$a=0),H$a>this._count&&(H$a=this._count);var H$b=this._animationData.nodes,H$c=0,H$d=H$b.length;for(H$c=0;H$c<H$d;H$c++)this._displayNodeToFrame(H$b[H$c],H$a)}},H$b._displayNodeToFrame=function(H$a,H$b,H$c){H$c||(H$c=this._targetDic);var H$d=H$c[H$a.target];if(H$d){var H$e,H$f,H$g,H$h=H$a.frames,H$i=H$a.keys,H$j=0,H$k=H$i.length;for(H$j=0;H$j<H$k;H$j++)H$g=(H$f=H$h[H$e=H$i[H$j]]).length>H$b?H$f[H$b]:H$f[H$f.length-1],H$d[H$e]=H$g}},H$b._calculateDatas=function(){if(this._animationData){var H$a,H$b=this._animationData.nodes,H$c=0,H$d=H$b.length;for(H$c=this._count=0;H$c<H$d;H$c++)H$a=H$b[H$c],this._calculateNodeKeyFrames(H$a);this._count+=1}},H$b._calculateNodeKeyFrames=function(H$a){var H$b,H$c,H$d=H$a.keyframes,H$e=H$a.target;for(H$b in H$a.frames||(H$a.frames={}),H$a.keys?H$a.keys.length=0:H$a.keys=[],H$a.initValues||(H$a.initValues={}),H$d)H$c=H$d[H$b],H$a.frames[H$b]||(H$a.frames[H$b]=[]),this._targetDic&&this._targetDic[H$e]&&(H$a.initValues[H$b]=this._targetDic[H$e][H$b]),H$c.sort(H$f._sortIndexFun),H$a.keys.push(H$b),this._calculateNodePropFrames(H$c,H$a.frames[H$b],H$b,H$e)},H$b.resetToInitState=function(){if(this._targetDic&&this._animationData){var H$a,H$b,H$c=this._animationData.nodes,H$d=0,H$e=H$c.length;for(H$d=0;H$d<H$e;H$d++)if(H$b=(H$a=H$c[H$d]).initValues){var H$f,H$g=this._targetDic[H$a.target];if(H$g)for(H$f in H$b)H$g[H$f]=H$b[H$f]}}},H$b._calculateNodePropFrames=function(H$a,H$b,H$c,H$d){var H$e=0,H$f=H$a.length-1;if(0<H$f){for(H$b.length=H$a[H$f].index+1,H$e=0;H$e<H$f;H$e++)this._dealKeyFrame(H$a[H$e]),this._calculateFrameValues(H$a[H$e],H$a[H$e+1],H$b);this._dealKeyFrame(H$a[H$e])}0==H$f&&(H$b[H$a[0].index]=H$a[0].value,this._animationNewFrames&&(this._animationNewFrames[H$a[0].index]=!0))},H$b._dealKeyFrame=function(H$a){H$a.label&&""!=H$a.label&&this.addLabel(H$a.label,H$a.index)},H$b._calculateFrameValues=function(H$a,H$b,H$c){var H$d,H$e=0,H$f=H$a.index,H$g=H$b.index,H$h=H$a.value,H$i=H$b.value-H$a.value,H$j=H$g-H$f;if(H$g>this._count&&(this._count=H$g),H$a.tween)for(null==(H$d=H$S[H$a.tweenMethod])&&(H$d=H$S.linearNone),H$e=H$f;H$e<H$g;H$e++)H$c[H$e]=H$d(H$e-H$f,H$h,H$i,H$j),this._animationNewFrames&&(this._animationNewFrames[H$e]=!0);else for(H$e=H$f;H$e<H$g;H$e++)H$c[H$e]=H$h;this._animationNewFrames&&(this._animationNewFrames[H$a.index]=!0,this._animationNewFrames[H$b.index]=!0),H$c[H$b.index]=H$b.value},H$f._sortIndexFun=null,H$f}(H$pa)),H$va=function(H$b){function H$e(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",H$e.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=H$qa.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}H$k(H$e,"laya.display.Input",H$b);var H$a=H$e.prototype;return H$a.setSelection=function(H$a,H$b){this.focus=!0,laya.display.Input.inputElement.selectionStart=H$a,laya.display.Input.inputElement.selectionEnd=H$b},H$a._onUnDisplay=function(H$a){this.focus=!1},H$a._onMouseDown=function(H$a){this.focus=!0},H$a._syncInputTransform=function(){var H$a=this.nativeInput,H$b=H$Y.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),H$c=this._width-this.padding[1]-this.padding[3],H$d=this._height-this.padding[0]-this.padding[2];H$H.isConchApp?(H$a.setScale(H$b.scaleX,H$b.scaleY),H$a.setSize(H$c,H$d),H$a.setPos(H$b.x,H$b.y)):(H$e.inputContainer.style.transform=H$e.inputContainer.style.webkitTransform="scale("+H$b.scaleX+","+H$b.scaleY+") rotate("+H$x.stage.canvasDegree+"deg)",H$a.style.width=H$c+"px",H$a.style.height=H$d+"px",H$e.inputContainer.style.left=H$b.x+"px",H$e.inputContainer.style.top=H$b.y+"px")},H$a.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},H$a._setInputMethod=function(){H$e.input.parentElement&&H$e.inputContainer.removeChild(H$e.input),H$e.area.parentElement&&H$e.inputContainer.removeChild(H$e.area),H$e.inputElement=this._multiline?H$e.area:H$e.input,H$e.inputContainer.appendChild(H$e.inputElement),H$qa.RightToLeft&&(H$e.inputElement.style.direction="rtl")},H$a._focusIn=function(){laya.display.Input.isInputting=!0;var H$a=this.nativeInput;this._focus=!0;var H$b=H$a.style;H$b.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),H$a.readOnly=!this._editable,H$H.isConchApp&&(H$a.setType(this._type),H$a.setForbidEdit(!this._editable)),H$a.maxLength=this._maxChars;this.padding;if(H$a.type=this._type,H$a.value=this._content,H$a.placeholder=this._prompt,H$x.stage.off("keydown",this,this._onKeyDown),H$x.stage.on("keydown",this,this._onKeyDown),(H$x.stage.focus=this).event("focus"),H$M.onPC&&H$a.focus(),!H$M.onMiniGame){this._text;this._text=null}this.typeset(),H$a.setColor(this._originColor),H$a.setFontSize(this.fontSize),H$a.setFontFace(H$M.onIPhone&&H$qa._fontFamilyMap[this.font]||this.font),H$H.isConchApp&&H$a.setMultiAble&&H$a.setMultiAble(this._multiline),H$b.lineHeight=this.leading+this.fontSize+"px",H$b.fontStyle=this.italic?"italic":"normal",H$b.fontWeight=this.bold?"bold":"normal",H$b.textAlign=this.align,H$b.padding="0 0",this._syncInputTransform(),!H$H.isConchApp&&H$M.onPC&&H$x.timer.frameLoop(1,this,this._syncInputTransform)},H$a._setPromptColor=function(){(H$e.promptStyleDOM=H$M.getElementById("promptStyle"))||((H$e.promptStyleDOM=H$M.createElement("style")).setAttribute("id","promptStyle"),H$M.document.head.appendChild(H$e.promptStyleDOM)),H$e.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},H$a._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(H$x.superSet(H$qa,this,"text",this._content),H$x.superSet(H$qa,this,"color",this._originColor)):(H$x.superSet(H$qa,this,"text",this._prompt),H$x.superSet(H$qa,this,"color",this._promptColor)),H$x.stage.off("keydown",this,this._onKeyDown),H$x.stage.focus=null,this.event("blur"),H$H.isConchApp&&this.nativeInput.blur(),H$M.onPC&&H$x.timer.clear(this,this._syncInputTransform)},H$a._onKeyDown=function(H$a){13===H$a.keyCode&&(H$M.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},H$a.changeText=function(H$a){this._content=H$a,this._focus?(this.nativeInput.value=H$a||"",this.event("change")):H$b.prototype.changeText.call(this,H$a)},H$o(0,H$a,"color",H$b.prototype._$get_color,function(H$a){this._focus&&this.nativeInput.setColor(H$a),H$x.superSet(H$qa,this,"color",this._content?H$a:this._promptColor),this._originColor=H$a}),H$o(0,H$a,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(H$a){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),H$o(0,H$a,"multiline",function(){return this._multiline},function(H$a){this._multiline=H$a,this.valign=H$a?"top":"middle"}),H$o(0,H$a,"maxChars",function(){return this._maxChars},function(H$a){H$a<=0&&(H$a=1e5),this._maxChars=H$a}),H$o(0,H$a,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(H$a){H$x.superSet(H$qa,this,"color",this._originColor),H$a+="",this._focus?(this.nativeInput.value=H$a||"",this.event("change")):(this._multiline||(H$a=H$a.replace(/\r?\n/g,"")),(this._content=H$a)?H$x.superSet(H$qa,this,"text",H$a):(H$x.superSet(H$qa,this,"text",this._prompt),H$x.superSet(H$qa,this,"color",this.promptColor)))}),H$o(0,H$a,"nativeInput",function(){return this._multiline?H$e.area:H$e.input}),H$o(0,H$a,"prompt",function(){return this._prompt},function(H$a){!this._text&&H$a&&H$x.superSet(H$qa,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?H$x.superSet(H$qa,this,"text",this._text==this._prompt?H$a:this._text):H$x.superSet(H$qa,this,"text",H$a),this._prompt=H$qa.langPacks&&H$qa.langPacks[H$a]?H$qa.langPacks[H$a]:H$a}),H$o(0,H$a,"focus",function(){return this._focus},function(H$a){var H$b=this.nativeInput;this._focus!==H$a&&(H$a?(H$b.target?H$b.target._focusOut():this._setInputMethod(),(H$b.target=this)._focusIn()):(H$b.target=null,this._focusOut(),H$M.document.body.scrollTop=0,H$b.blur(),H$H.isConchApp?H$b.setPos(-1e4,-1e4):H$e.inputContainer.contains(H$b)&&H$e.inputContainer.removeChild(H$b)))}),H$o(0,H$a,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(H$a){H$a?(-1<(H$a="[^"+H$a+"]").indexOf("^^")&&(H$a=H$a.replace("^^","")),this._restrictPattern=new RegExp(H$a,"g")):this._restrictPattern=null}),H$o(0,H$a,"editable",function(){return this._editable},function(H$a){this._editable=H$a,H$H.isConchApp&&H$e.input.setForbidEdit(!H$a)}),H$o(0,H$a,"promptColor",function(){return this._promptColor},function(H$a){this._promptColor=H$a,this._content||H$x.superSet(H$qa,this,"color",H$a)}),H$o(0,H$a,"type",function(){return this._type},function(H$a){this._getCSSStyle().password="password"==H$a,this._type=H$a,H$H.isConchApp&&this.nativeInput.setType(H$a)}),H$o(0,H$a,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(H$a){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),H$o(0,H$a,"asPassword",function(){return this._getCSSStyle().password},function(H$a){this._getCSSStyle().password=H$a,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),H$e.__init__=function(){H$e._createInputElement(),H$M.onMobile&&H$H.canvas.addEventListener(H$e.IOS_IFRAME?H$M.onMiniGame?"touchend":"click":"touchend",H$e._popupInputMethod)},H$e._popupInputMethod=function(H$a){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},H$e._createInputElement=function(){H$e._initInput(H$e.area=H$M.createElement("textarea")),H$e._initInput(H$e.input=H$M.createElement("input")),(H$e.inputContainer=H$M.createElement("div")).style.position="absolute",H$e.inputContainer.style.zIndex=1e5,H$M.container.appendChild(H$e.inputContainer),H$e.inputContainer.setPos=function(H$a,H$b){H$e.inputContainer.style.left=H$a+"px",H$e.inputContainer.style.top=H$b+"px"}},H$e._initInput=function(H$b){var H$a=H$b.style;H$a.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",H$a.resize="none",H$a.backgroundColor="transparent",H$a.border="none",H$a.outline="none",H$a.zIndex=1,H$b.addEventListener("input",H$e._processInputting),H$b.addEventListener("mousemove",H$e._stopEvent),H$b.addEventListener("mousedown",H$e._stopEvent),H$b.addEventListener("touchmove",H$e._stopEvent),H$b.setFontFace=function(H$a){H$b.style.fontFamily=H$a},H$H.isConchApp||(H$b.setColor=function(H$a){H$b.style.color=H$a},H$b.setFontSize=function(H$a){H$b.style.fontSize=H$a+"px"})},H$e._processInputting=function(H$a){var H$b=laya.display.Input.inputElement.target;if(H$b){var H$c=laya.display.Input.inputElement.value;H$b._restrictPattern&&(H$c=H$c.replace(/\u2006|\x27/g,""),H$b._restrictPattern.test(H$c)&&(H$c=H$c.replace(H$b._restrictPattern,""),laya.display.Input.inputElement.value=H$c)),H$b._text=H$c,H$b.event("input")}},H$e._stopEvent=function(H$a){"touchmove"==H$a.type&&H$a.preventDefault(),H$a.stopPropagation&&H$a.stopPropagation()},H$e.TYPE_TEXT="text",H$e.TYPE_PASSWORD="password",H$e.TYPE_EMAIL="email",H$e.TYPE_URL="url",H$e.TYPE_NUMBER="number",H$e.TYPE_RANGE="range",H$e.TYPE_DATE="date",H$e.TYPE_MONTH="month",H$e.TYPE_WEEK="week",H$e.TYPE_TIME="time",H$e.TYPE_DATE_TIME="datetime",H$e.TYPE_DATE_TIME_LOCAL="datetime-local",H$e.TYPE_SEARCH="search",H$e.input=null,H$e.area=null,H$e.inputElement=null,H$e.inputContainer=null,H$e.confirmButton=null,H$e.promptStyleDOM=null,H$e.inputHeight=45,H$e.isInputting=!1,H$e.stageMatrix=null,H$i(H$e,["IOS_IFRAME",function(){return this.IOS_IFRAME=H$M.onIOS&&H$M.window.top!=H$M.window.self}]),H$e}(H$qa),H$wa=function(H$a){function H$c(H$a,H$b){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,H$c.__super.call(this),H$a&&this._init_(H$a,H$b)}H$k(H$c,"laya.resource.HTMLImage",H$sa);var H$b=H$c.prototype;return H$b._init_=function(H$a,H$b){this._src=H$a,this._source=new H$M.window.Image,H$b&&(H$b.onload&&(this.onload=H$b.onload),H$b.onerror&&(this.onerror=H$b.onerror),H$b.onCreate&&H$b.onCreate(this)),0!=H$a.indexOf("data:image")&&(this._source.crossOrigin=""),H$a&&(this._source.src=H$a)},H$b.recreateResource=function(){var H$a=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var H$b=this;this._source=new H$M.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(H$b._needReleaseAgain)return H$b._needReleaseAgain=!1,H$b._source.onload=null,void(H$b._source=null);H$b._source.onload=null,H$b.memorySize=H$a._w*H$a._h*4,H$b._recreateLock=!1,H$b.completeCreate()},this._source.src=this._src}},H$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},H$b.onresize=function(){this._w=this._source.width,this._h=this._source.height},H$o(0,H$b,"onload",null,function(H$a){var H$b=this;this._onload=H$a,this._source&&(this._source.onload=null!=this._onload?function(){H$b.onresize(),H$b._onload()}:null)}),H$o(0,H$b,"onerror",null,function(H$a){var H$b=this;this._onerror=H$a,this._source&&(this._source.onerror=null!=this._onerror?function(){H$b._onerror()}:null)}),H$o(0,H$b,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(H$a){this._enableMerageInAtlas=H$a,H$H.isConchApp&&this._source&&(this._source.enableMerageInAtlas=H$a)}),H$c.create=function(H$a,H$b){return new H$c(H$a,H$b)},H$c}(),H$xa=(function(H$f){function H$a(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,H$a.__super.call(this)}H$k(H$a,"laya.display.EffectAnimation",H$f);var H$b=H$a.prototype;H$b._onOtherBegin=function(H$a){H$a!=this&&this.stop()},H$b.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},H$b._onPlayAction=function(){this.play(0,!1)},H$b.play=function(H$a,H$b,H$c,H$d){void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=!0),void 0===H$c&&(H$c=""),void 0===H$d&&(H$d=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,H$a,H$b,H$c,H$d))},H$b._recordInitData=function(){if(this._aniKeys){var H$a,H$b,H$c=0;for(H$a=this._aniKeys.length,H$c=0;H$c<H$a;H$c++)H$b=this._aniKeys[H$c],this._initData[H$b]=this._target[H$b]}},H$b._displayToIndex=function(H$a){if(this._animationData){H$a<0&&(H$a=0),H$a>this._count&&(H$a=this._count);var H$b=this._animationData.nodes,H$c=0,H$d=H$b.length;for(H$d=1<H$d?1:H$d,H$c=0;H$c<H$d;H$c++)this._displayNodeToFrame(H$b[H$c],H$a)}},H$b._displayNodeToFrame=function(H$a,H$b,H$c){if(this._target){var H$d;H$d=this._target;var H$e,H$f,H$g,H$h,H$i=H$a.frames,H$j=H$a.keys,H$k=0,H$l=H$j.length;H$h=H$a.secondFrames;var H$m,H$n,H$o,H$p,H$q=0;for(H$k=0;H$k<H$l;H$k++)H$f=H$i[H$e=H$j[H$k]],H$g=-1==(H$q=H$h[H$e])?this._initData[H$e]:H$b<H$q?(H$o=(H$n=H$a.keyframes[H$e])[0]).tween?(null==(H$m=H$S[H$o.tweenMethod])&&(H$m=H$S.linearNone),H$p=H$n[1],H$m(H$b,this._initData[H$e],H$p.value-this._initData[H$e],H$p.index)):this._initData[H$e]:H$f.length>H$b?H$f[H$b]:H$f[H$f.length-1],H$d[H$e]=H$g}},H$b._calculateNodeKeyFrames=function(H$a){H$f.prototype._calculateNodeKeyFrames.call(this,H$a);var H$b,H$c,H$d,H$e=H$a.keyframes;H$a.target;for(H$b in H$d={},H$a.secondFrames=H$d,H$e)(H$c=H$e[H$b]).length<=1?H$d[H$b]=-1:H$d[H$b]=H$c[1].index},H$o(0,H$b,"target",function(){return this._target},function(H$a){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=H$a,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),H$o(0,H$b,"playEvent",null,function(H$a){(this._playEvents=H$a)&&this.addEvent()}),H$o(0,H$b,"effectData",null,function(H$a){var H$b;H$a&&((H$b=H$a.animations)&&H$b[0]&&(this._setUp({},H$b[0]),H$b[0].nodes&&H$b[0].nodes[0]&&(this._aniKeys=H$b[0].nodes[0].keys)))}),H$o(0,H$b,"effectClass",null,function(H$a){var H$b,H$c;(this._effectClass=H$P.getClass(H$a),this._effectClass)&&((H$b=this._effectClass.uiView)&&(H$c=H$b.animations)&&H$c[0]&&(this._setUp({},H$c[0]),H$c[0].nodes&&H$c[0].nodes[0]&&(this._aniKeys=H$c[0].nodes[0].keys)))}),H$a.EffectAnimationBegin="effectanimationbegin"}(H$ua),function(H$b){var H$B;function H$C(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,H$C.__super.call(this)}H$k(H$C,"laya.utils.GraphicAnimation",H$b);var H$a=H$C.prototype;return H$a._parseNodeList=function(H$a){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[H$a.compId]=H$a.props,H$a.compId&&this._nodeList.push(H$a.compId);var H$b=H$a.child;if(H$b){var H$c=0,H$d=H$b.length;for(H$c=0;H$c<H$d;H$c++)this._parseNodeList(H$b[H$c])}},H$a._calGraphicData=function(H$a){var H$b;if(this._setUp(null,H$a),this._createGraphicData(),this._nodeIDAniDic)for(H$b in this._nodeIDAniDic)this._nodeIDAniDic[H$b]=null},H$a._createGraphicData=function(){var H$a,H$b=[],H$c=0,H$d=this.count,H$e=this._animationNewFrames;for(H$e||(H$e=[]),H$c=0;H$c<H$d;H$c++)!H$e[H$c]&&H$a||(H$a=this._createFrameGraphic(H$c)),H$b.push(H$a);this._gList=H$b},H$a._createFrameGraphic=function(H$a){var H$b=H$D.createGraphics();return H$C._rootMatrix||(H$C._rootMatrix=new H$E),this._updateNodeGraphic(this._rootNode,H$a,H$C._rootMatrix,H$b),H$b},H$a._updateNodeGraphic=function(H$a,H$b,H$c,H$d,H$e){var H$f;void 0===H$e&&(H$e=1);var H$g,H$h,H$i,H$j=(H$f=this._nodeGDic[H$a.compId]=this._getNodeGraphicData(H$a.compId,H$b,this._nodeGDic[H$a.compId])).alpha*H$e;if(!(H$j<.01)&&(H$f.resultTransform||(H$f.resultTransform=H$E.create()),H$g=H$f.resultTransform,H$E.mul(H$f.transform,H$c,H$g),H$f.skin&&(H$h=this._getTextureByUrl(H$f.skin))&&(H$g._checkTransform()?(H$d.drawTexture(H$h,0,0,H$f.width,H$f.height,H$g,H$j),H$f.resultTransform=null):H$d.drawTexture(H$h,H$g.tx,H$g.ty,H$f.width,H$f.height,null,H$j)),H$i=H$a.child)){var H$k,H$l=0;for(H$k=H$i.length,H$l=0;H$l<H$k;H$l++)this._updateNodeGraphic(H$i[H$l],H$b,H$g,H$d,H$j)}},H$a._updateNoChilds=function(H$a,H$b){if(H$a.skin){var H$c=this._getTextureByUrl(H$a.skin);if(H$c){var H$d=H$a.transform;H$d._checkTransform();!H$d.bTransform?H$b.drawTexture(H$c,H$d.tx,H$d.ty,H$a.width,H$a.height,null,H$a.alpha):H$b.drawTexture(H$c,0,0,H$a.width,H$a.height,H$d.clone(),H$a.alpha)}}},H$a._updateNodeGraphic2=function(H$a,H$b,H$c){var H$d;if(H$d=this._nodeGDic[H$a.compId]=this._getNodeGraphicData(H$a.compId,H$b,this._nodeGDic[H$a.compId]),H$a.child){var H$e=H$d.transform;H$e._checkTransform();var H$f,H$g;H$g=(H$f=!H$e.bTransform)&&(0!=H$e.tx||0!=H$e.ty);var H$h,H$i,H$j;if((H$h=H$e.bTransform||1!=H$d.alpha)&&H$c.save(),1!=H$d.alpha&&H$c.alpha(H$d.alpha),H$f?H$g&&H$c.translate(H$e.tx,H$e.ty):H$c.transform(H$e.clone()),H$i=H$a.child,H$d.skin&&(H$j=this._getTextureByUrl(H$d.skin))&&H$c.drawTexture(H$j,0,0,H$d.width,H$d.height),H$i){var H$k,H$l=0;for(H$k=H$i.length,H$l=0;H$l<H$k;H$l++)this._updateNodeGraphic2(H$i[H$l],H$b,H$c)}H$h?H$c.restore():H$f?H$g&&H$c.translate(-H$e.tx,-H$e.ty):H$c.transform(H$e.clone().invert())}else this._updateNoChilds(H$d,H$c)},H$a._calculateNodeKeyFrames=function(H$a){H$b.prototype._calculateNodeKeyFrames.call(this,H$a),this._nodeIDAniDic[H$a.target]=H$a},H$a.getNodeDataByID=function(H$a){return this._nodeIDAniDic[H$a]},H$a._getParams=function(H$a,H$b,H$c,H$d){var H$e=H$C._temParam;H$e.length=H$b.length;var H$f=0,H$g=H$b.length;for(H$f=0;H$f<H$g;H$f++)H$e[H$f]=this._getObjVar(H$a,H$b[H$f][0],H$c,H$b[H$f][1],H$d);return H$e},H$a._getObjVar=function(H$a,H$b,H$c,H$d,H$e){if(H$a.hasOwnProperty(H$b)){var H$f=H$a[H$b];if(H$c>=H$f.length&&(H$c=H$f.length-1),null!=H$a[H$b][H$c])return H$a[H$b][H$c]}return H$e.hasOwnProperty(H$b)?H$e[H$b]:H$d},H$a._getNodeGraphicData=function(H$a,H$b,H$c){H$c||(H$c=H$B.create()),H$c.transform?H$c.transform.identity():H$c.transform=H$E.create();var H$d=this.getNodeDataByID(H$a);if(!H$d)return H$c;var H$e,H$f,H$g=H$d.frames,H$h=this._getParams(H$g,H$C._drawTextureCmd,H$b,this._nodeDefaultProps[H$a]),H$i=H$h[0],H$j=NaN,H$k=NaN,H$l=H$h[5],H$m=H$h[6],H$n=H$h[13],H$o=H$h[14],H$p=H$h[7],H$q=H$h[8],H$r=H$h[9],H$s=H$h[11],H$t=H$h[12];H$j=H$h[3],H$k=H$h[4],0!=H$j&&0!=H$k||(H$i=null),-1==H$j&&(H$j=0),-1==H$k&&(H$k=0),H$c.skin=H$i,H$c.width=H$j,H$c.height=H$k,H$i&&((H$e=this._getTextureByUrl(H$i))?(H$j||(H$j=H$e.sourceWidth),H$k||(H$k=H$e.sourceHeight)):console.warn("lost skin:",H$i,",you may load pics first")),H$c.alpha=H$h[10],H$f=H$c.transform,0!=H$n&&(H$l=H$n*H$j),0!=H$o&&(H$m=H$o*H$k),0==H$l&&0==H$m||H$f.translate(-H$l,-H$m);var H$u=null;if(H$r||1!==H$p||1!==H$q||H$s||H$t){(H$u=H$C._tempMt).identity(),H$u.bTransform=!0;var H$v=.0174532922222222*(H$r-H$s),H$w=.0174532922222222*(H$r+H$t),H$x=Math.cos(H$w),H$y=Math.sin(H$w),H$z=Math.sin(H$v),H$A=Math.cos(H$v);H$u.a=H$p*H$x,H$u.b=H$p*H$y,H$u.c=-H$q*H$z,H$u.d=H$q*H$A,H$u.tx=H$u.ty=0}return H$u&&(H$f=H$E.mul(H$f,H$u,H$f)),H$f.translate(H$h[1],H$h[2]),H$c},H$a._getTextureByUrl=function(H$a){return H$ha.getRes(H$a)},H$a.setAniData=function(H$a,H$b){if(H$a.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=H$a,this._parseNodeList(H$a);var H$c,H$d={},H$e=[],H$f=H$a.animations,H$g=0,H$h=H$f.length;for(H$g=0;H$g<H$h;H$g++)if(H$c=H$f[H$g],this._labels=null,(!H$b||H$b==H$c.name)&&H$c){try{this._calGraphicData(H$c)}catch(H$a){console.warn("parse animation fail:"+H$c.name+",empty animation created"),this._gList=[]}var H$i={};H$i.interval=1e3/H$c.frameRate,H$i.frames=this._gList,H$i.labels=this._labels,H$i.name=H$c.name,H$e.push(H$i),H$d[H$c.name]=H$i}this.animationList=H$e,this.animationDic=H$d}H$C._temParam.length=0},H$a.parseByData=function(H$a){var H$b,H$c;H$b=H$a.nodeRoot,H$c=H$a.aniO,delete H$a.nodeRoot,delete H$a.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=H$b,this._parseNodeList(H$b),this._labels=null;try{this._calGraphicData(H$c)}catch(H$a){console.warn("parse animation fail:"+H$c.name+",empty animation created"),this._gList=[]}var H$d=H$a;return H$d.interval=1e3/H$c.frameRate,H$d.frames=this._gList,H$d.labels=this._labels,H$d.name=H$c.name,H$d},H$a.setUpAniData=function(H$a){if(H$a.animations){var H$b,H$c={},H$d=[],H$e=H$a.animations,H$f=0,H$g=H$e.length;for(H$f=0;H$f<H$g;H$f++)if(H$b=H$e[H$f]){var H$h={};H$h.name=H$b.name,H$h.aniO=H$b,H$h.nodeRoot=H$a,H$d.push(H$h),H$c[H$b.name]=H$h}this.animationList=H$d,this.animationDic=H$c}},H$a._clear=function(){var H$a,H$b;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(H$a in this._nodeGDic)(H$b=this._nodeGDic[H$a])&&H$b.recover();this._nodeGDic=null},H$C.parseAnimationByData=function(H$a){var H$b;return H$C._I||(H$C._I=new H$C),H$b=H$C._I.parseByData(H$a),H$C._I._clear(),H$b},H$C.parseAnimationData=function(H$a){var H$b;return H$C._I||(H$C._I=new H$C),H$C._I.setUpAniData(H$a),(H$b={}).animationList=H$C._I.animationList,H$b.animationDic=H$C._I.animationDic,H$C._I._clear(),H$b},H$C._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],H$C._temParam=[],H$C._I=null,H$C._rootMatrix=null,H$i(H$C,["_tempMt",function(){return this._tempMt=new H$E}]),H$C.__init$=function(){H$B=function(){function H$a(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return H$k(H$a,""),H$a.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),H$U.recover("GraphicNode",this)},H$a.create=function(){return H$U.getItemByClass("GraphicNode",H$a)},H$a}()},H$C}(H$ua));H$x.__init([H$j,H$ia,H$H,H$M,H$W,H$A,H$a,H$xa])}(window,document,Laya),function(H$a,H$b,H$c){H$c.un,H$c.uns,H$c.static;var H$d=H$c.class;H$c.getset,H$c.__newvec;new(function(){function H$a(){}return H$d(H$a,"LayaMain"),H$a}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H$a,H$b){"use strict";for(var H$c in Object.defineProperty(H$b,"__esModule",{value:!0}),Laya){var H$d=Laya[H$c];H$d&&H$d.__isclass&&(H$b[H$c]=H$d)}}),function(H$a,H$b,H$w){H$w.un,H$w.uns;var H$g=H$w.static,H$m=H$w.class,H$d=H$w.getset,H$f=H$w.__newvec,H$k=laya.maths.Arith,H$l=laya.maths.Bezier,H$c=laya.resource.Bitmap,H$n=laya.utils.Browser,H$i=laya.utils.Byte,H$o=laya.utils.Color,H$x=(laya.filters.ColorFilter,H$w.Config),H$e=laya.resource.Context,H$y=(laya.events.Event,laya.filters.Filter),H$h=laya.display.Graphics,H$j=laya.resource.HTMLCanvas,H$p=(laya.utils.HTMLChar,laya.resource.HTMLImage),H$q=laya.resource.HTMLSubImage,H$z=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),H$A=laya.maths.Point,H$B=laya.maths.Rectangle,H$r=laya.renders.Render,H$s=(laya.renders.RenderContext,laya.renders.RenderSprite),H$t=laya.resource.Resource,H$u=laya.resource.ResourceManager,H$v=laya.utils.RunDriver,H$C=laya.display.Sprite,H$D=laya.display.Stage,H$E=laya.utils.Stat,H$F=laya.utils.StringKey,H$G=(laya.display.css.Style,laya.system.System),H$H=laya.display.Text,H$I=laya.resource.Texture,H$J=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),H$K=laya.utils.VectorGraphManager;laya.utils.WordText;H$w.interface("laya.webgl.shapes.IShape"),H$w.interface("laya.webgl.submit.ISubmit"),H$w.interface("laya.webgl.text.ICharSegment"),H$w.interface("laya.webgl.canvas.save.ISaveData"),H$w.interface("laya.webgl.resource.IMergeAtlasBitmap"),H$w.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var H$L=function(){function H$a(){}H$m(H$a,"laya.filters.webgl.FilterActionGL");var H$b=H$a.prototype;return H$w.imps(H$b,{"laya.filters.IFilterActionGL":!0}),H$b.setValue=function(H$a){},H$b.setValueMix=function(H$a){},H$b.apply3d=function(H$a,H$b,H$c,H$d,H$e){return null},H$b.apply=function(H$a){return null},H$d(0,H$b,"typeMix",function(){return 0}),H$a}(),H$M=function(){function H$a(){}return H$m(H$a,"laya.webgl.shader.ShaderValue"),H$a}(),H$N=function(){var H$d,H$e;function H$a(H$a,H$b,H$c){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new H$e,void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0),this._cells=null,this._rowInfo=null,this._init(H$a,H$b),this._atlasID=H$c}H$m(H$a,"laya.webgl.atlas.AtlasGrid");var H$b=H$a.prototype;return H$b.getAltasID=function(){return this._atlasID},H$b.setAltasID=function(H$a){0<=H$a&&(this._atlasID=H$a)},H$b.addTex=function(H$a,H$b,H$c){var H$d=this._get(H$b,H$c);return 0==H$d.ret||(this._fill(H$d.x,H$d.y,H$b,H$c,H$a),this._texCount++),H$d},H$b._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},H$b._init=function(H$a,H$b){if(this._width=H$a,this._height=H$b,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=H$f(this._height);for(var H$c=0;H$c<this._height;H$c++)this._rowInfo[H$c]=new H$d;return this._clear(),!0},H$b._get=function(H$a,H$b){var H$c=new H$P;if(H$a>=this._failSize.width&&H$b>=this._failSize.height)return H$c;for(var H$d=-1,H$e=-1,H$f=this._width,H$g=this._height,H$h=this._cells,H$i=0;H$i<H$g;H$i++)if(!(this._rowInfo[H$i].spaceCount<H$a))for(var H$j=0;H$j<H$f;){var H$k=3*(H$i*H$f+H$j);if(0!=H$h[H$k]||H$h[1+H$k]<H$a||H$h[2+H$k]<H$b)H$j+=H$h[1+H$k];else{H$d=H$j,H$e=H$i;for(var H$l=0;H$l<H$a;H$l++)if(H$h[3*H$l+H$k+2]<H$b){H$d=-1;break}if(!(H$d<0))return H$c.ret=!0,H$c.x=H$d,H$c.y=H$e,H$c;H$j+=H$h[1+H$k]}}return H$c},H$b._fill=function(H$a,H$b,H$c,H$d,H$e){var H$f=this._width,H$g=this._height;this._check(H$a+H$c<=H$f&&H$b+H$d<=H$g);for(var H$h=H$b;H$h<H$d+H$b;++H$h){this._check(this._rowInfo[H$h].spaceCount>=H$c),this._rowInfo[H$h].spaceCount-=H$c;for(var H$i=0;H$i<H$c;H$i++){var H$j=3*(H$a+H$h*H$f+H$i);this._check(0==this._cells[H$j]),this._cells[H$j]=H$e,this._cells[1+H$j]=H$c,this._cells[2+H$j]=H$d}}if(0<H$a)for(H$h=0;H$h<H$d;++H$h){var H$k=0;for(H$i=H$a-1;0<=H$i&&0==this._cells[3*((H$b+H$h)*H$f+H$i)];--H$i,++H$k);for(H$i=H$k;0<H$i;--H$i)this._cells[3*((H$b+H$h)*H$f+H$a-H$i)+1]=H$i,this._check(0<H$i)}if(0<H$b)for(H$i=H$a;H$i<H$a+H$c;++H$i){for(H$k=0,H$h=H$b-1;0<=H$h&&0==this._cells[3*(H$i+H$h*H$f)];--H$h,H$k++);for(H$h=H$k;0<H$h;--H$h)this._cells[3*(H$i+(H$b-H$h)*H$f)+2]=H$h,this._check(0<H$h)}},H$b._check=function(H$a){0==H$a&&console.log("xtexMerger 错误啦")},H$b._clear=function(){for(var H$a=this._texCount=0;H$a<this._height;H$a++)this._rowInfo[H$a].spaceCount=this._width;for(var H$b=0;H$b<this._height;H$b++)for(var H$c=0;H$c<this._width;H$c++){var H$d=3*(H$b*this._width+H$c);this._cells[H$d]=0,this._cells[1+H$d]=this._width-H$c,this._cells[2+H$d]=this._width-H$b}this._failSize.width=this._width+1,this._failSize.height=this._height+1},H$a.__init$=function(){H$d=function(){function H$a(){this.spaceCount=0}return H$m(H$a,""),H$a}(),H$e=function(){function H$a(){this.width=0,this.height=0}return H$m(H$a,""),H$a}()},H$a}(),H$O=function(){function H$r(H$a,H$b,H$c,H$d){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=H$a,this._height=H$b,this._gridSize=H$c,this._maxAtlaserCount=H$d,this._gridNumX=H$a/H$c,this._gridNumY=H$b/H$c,this._curAtlasIndex=0,this._atlaserArray=[]}H$m(H$r,"laya.webgl.atlas.AtlasResourceManager");var H$a=H$r.prototype;return H$a.setAtlasParam=function(H$a,H$b,H$c,H$d){if(1==this._setAtlasParam)return H$r._sid_=0,this._width=H$a,this._height=H$b,this._gridSize=H$c,this._maxAtlaserCount=H$d,this._gridNumX=H$a/H$c,this._gridNumY=H$b/H$c,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},H$a.pushData=function(H$a){var H$b,H$c=H$a.bitmap,H$d=-1,H$e=null,H$f=0,H$g=0;for(H$f=0,H$b=this._atlaserArray.length;H$f<H$b&&(H$g=(this._curAtlasIndex+H$f)%H$b,-1==(H$d=(H$e=this._atlaserArray[H$g]).findBitmapIsExist(H$c)));H$f++);if(-1!=H$d){var H$h=H$e.InAtlasWebGLImagesOffsetValue[H$d];return H$o=H$h[0],H$p=H$h[1],H$e.addToAtlas(H$a,H$o,H$p),!0}this._setAtlasParam=!1;for(var H$i=Math.ceil((H$a.bitmap.width+2)/this._gridSize),H$j=Math.ceil((H$a.bitmap.height+2)/this._gridSize),H$k=!1,H$l=0;H$l<2;H$l++){var H$m=this._maxAtlaserCount;for(H$f=0;H$f<H$m;H$f++){H$g=(this._curAtlasIndex+H$f)%H$m,this._atlaserArray.length-1>=H$g||this._atlaserArray.push(new H$Ba(this._gridNumX,this._gridNumY,this._width,this._height,H$r._sid_++));var H$n=this._atlaserArray[H$g],H$o=0,H$p=0,H$q=H$n.addTex(1,H$i,H$j);if(H$q.ret){H$o=H$q.x*this._gridSize+1,H$p=H$q.y*this._gridSize+1,H$c.lock=!0,H$n.addToAtlasTexture(H$c,H$o,H$p),H$n.addToAtlas(H$a,H$o,H$p),H$k=!0,this._curAtlasIndex=H$g;break}}if(H$k)break;this._atlaserArray.push(new H$Ba(this._gridNumX,this._gridNumY,this._width,this._height,H$r._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return H$k||console.log(">>>AtlasManager pushData error"),H$k},H$a.addToAtlas=function(H$a){laya.webgl.atlas.AtlasResourceManager.instance.pushData(H$a)},H$a.garbageCollection=function(){if(!0===this._needGC){for(var H$a=this._atlaserArray.length-this._maxAtlaserCount,H$b=0;H$b<H$a;H$b++)this._atlaserArray[H$b].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+H$a),this._atlaserArray.splice(0,H$a),this._needGC=!1}return!0},H$a.freeAll=function(){for(var H$a=0,H$b=this._atlaserArray.length;H$a<H$b;H$a++)this._atlaserArray[H$a].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},H$a.getAtlaserCount=function(){return this._atlaserArray.length},H$a.getAtlaserByIndex=function(H$a){return this._atlaserArray[H$a]},H$d(1,H$r,"instance",function(){return H$r._Instance||(H$r._Instance=new H$r(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),H$r._Instance}),H$d(1,H$r,"enabled",function(){return H$x.atlasEnable}),H$d(1,H$r,"atlasLimitWidth",function(){return H$r._atlasLimitWidth},function(H$a){H$r._atlasLimitWidth=H$a}),H$d(1,H$r,"atlasLimitHeight",function(){return H$r._atlasLimitHeight},function(H$a){H$r._atlasLimitHeight=H$a}),H$r._enable=function(){H$x.atlasEnable=!0},H$r._disable=function(){H$x.atlasEnable=!1},H$r.__init__=function(){H$r.atlasTextureWidth=2048,H$r.atlasTextureHeight=2048,H$r.maxTextureCount=6,H$r.atlasLimitWidth=512,H$r.atlasLimitHeight=512},H$r._atlasLimitWidth=0,H$r._atlasLimitHeight=0,H$r.gridSize=16,H$r.atlasTextureWidth=0,H$r.atlasTextureHeight=0,H$r.maxTextureCount=0,H$r._atlasRestore=0,H$r.BOARDER_TYPE_NO=0,H$r.BOARDER_TYPE_RIGHT=1,H$r.BOARDER_TYPE_LEFT=2,H$r.BOARDER_TYPE_BOTTOM=4,H$r.BOARDER_TYPE_TOP=8,H$r.BOARDER_TYPE_ALL=15,H$r._sid_=0,H$r._Instance=null,H$r}(),H$P=function(){function H$a(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return H$m(H$a,"laya.webgl.atlas.MergeFillInfo"),H$a}(),H$Q=function(){function H$b(){}return H$m(H$b,"laya.webgl.canvas.BlendMode"),H$b._init_=function(H$a){H$b.fns=[H$b.BlendNormal,H$b.BlendAdd,H$b.BlendMultiply,H$b.BlendScreen,H$b.BlendOverlay,H$b.BlendLight,H$b.BlendMask,H$b.BlendDestinationOut],H$b.targetFns=[H$b.BlendNormalTarget,H$b.BlendAddTarget,H$b.BlendMultiplyTarget,H$b.BlendScreenTarget,H$b.BlendOverlayTarget,H$b.BlendLightTarget,H$b.BlendMask,H$b.BlendDestinationOut]},H$b.BlendNormal=function(H$a){H$a.blendFunc(1,771)},H$b.BlendAdd=function(H$a){H$a.blendFunc(1,772)},H$b.BlendMultiply=function(H$a){H$a.blendFunc(774,771)},H$b.BlendScreen=function(H$a){H$a.blendFunc(1,1)},H$b.BlendOverlay=function(H$a){H$a.blendFunc(1,769)},H$b.BlendLight=function(H$a){H$a.blendFunc(1,1)},H$b.BlendNormalTarget=function(H$a){H$a.blendFunc(1,771)},H$b.BlendAddTarget=function(H$a){H$a.blendFunc(1,772)},H$b.BlendMultiplyTarget=function(H$a){H$a.blendFunc(774,771)},H$b.BlendScreenTarget=function(H$a){H$a.blendFunc(1,1)},H$b.BlendOverlayTarget=function(H$a){H$a.blendFunc(1,769)},H$b.BlendLightTarget=function(H$a){H$a.blendFunc(1,1)},H$b.BlendMask=function(H$a){H$a.blendFunc(0,770)},H$b.BlendDestinationOut=function(H$a){H$a.blendFunc(0,0)},H$b.activeBlendFunction=null,H$b.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],H$b.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},H$b.NORMAL="normal",H$b.ADD="add",H$b.MULTIPLY="multiply",H$b.SCREEN="screen",H$b.LIGHT="light",H$b.OVERLAY="overlay",H$b.DESTINATIONOUT="destination-out",H$b.fns=[],H$b.targetFns=[],H$b}(),H$R=function(){function H$c(H$a){this._color=H$o.create("black"),this.setValue(H$a)}H$m(H$c,"laya.webgl.canvas.DrawStyle");var H$a=H$c.prototype;return H$a.setValue=function(H$a){if(H$a){if("string"==typeof H$a)return void(this._color=H$o.create(H$a));if(H$a instanceof laya.utils.Color)return void(this._color=H$a)}},H$a.reset=function(){this._color=H$o.create("black")},H$a.equal=function(H$a){return"string"==typeof H$a?this._color.strColor===H$a:H$a instanceof laya.utils.Color&&this._color.numColor===H$a.numColor},H$a.toColorStr=function(){return this._color.strColor},H$c.create=function(H$a){var H$b;if(H$a&&("string"==typeof H$a?H$b=H$o.create(H$a):H$a instanceof laya.utils.Color&&(H$b=H$a),H$b))return H$b._drawStyle||(H$b._drawStyle=new H$c(H$a));return laya.webgl.canvas.DrawStyle.DEFAULT},H$g(H$c,["DEFAULT",function(){return this.DEFAULT=new H$c("#000000")}]),H$c}(),H$S=function(){function H$a(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];H$ua.mainContext;this.ib=H$$a.create(35048),this.vb=H$_a.create(5)}H$m(H$a,"laya.webgl.canvas.Path");var H$b=H$a.prototype;return H$b.addPoint=function(H$a,H$b){this.tempArray.push(H$a,H$b)},H$b.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},H$b.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},H$b.polygon=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g;return this.geomatrys.push(this._curGeomatry=H$g=new H$Fa(H$a,H$b,H$c,H$d,H$e,H$f)),H$d||(H$g.fill=!1),null==H$f&&(H$g.borderWidth=0),H$g},H$b.setGeomtry=function(H$a){this.geomatrys.push(this._curGeomatry=H$a)},H$b.drawLine=function(H$a,H$b,H$c,H$d,H$e){var H$f;return this.closePath?this.geomatrys.push(this._curGeomatry=H$f=new H$Ea(H$a,H$b,H$c,H$d,H$e)):this.geomatrys.push(this._curGeomatry=H$f=new H$Da(H$a,H$b,H$c,H$d,H$e)),H$f.fill=!1,H$f},H$b.update=function(){var H$a=this.ib._byteLength,H$b=this.geomatrys.length;this.offset=H$a;for(var H$c=this.geoStart;H$c<H$b;H$c++)this.geomatrys[H$c].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=H$b,this.count=(this.ib._byteLength-H$a)/H$pa.BYTES_PIDX},H$b.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},H$b.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},H$a}(),H$T=function(){function H$h(){}H$m(H$h,"laya.webgl.canvas.save.SaveBase");var H$a=H$h.prototype;return H$w.imps(H$a,{"laya.webgl.canvas.save.ISaveData":!0}),H$a.isSaveMark=function(){return!1},H$a.restore=function(H$a){this._dataObj[this._valueName]=this._value,(H$h._cache[H$h._cache._length++]=this)._newSubmit&&(H$a._curSubmit=H$fa.RENDERBASE,H$a._renderKey=0)},H$h._createArray=function(){var H$a=[];return H$a._length=0,H$a},H$h._init=function(){var H$a=H$h._namemap={};return H$a[1]="ALPHA",H$a[2]="fillStyle",H$a[8]="font",H$a[256]="lineWidth",H$a[512]="strokeStyle",H$a[8192]="_mergeID",H$a[1024]=H$a[2048]=H$a[4096]=[],H$a[16384]="textBaseline",H$a[32768]="textAlign",H$a[65536]="_nBlendType",H$a[1048576]="shader",H$a[2097152]="filters",H$a},H$h.save=function(H$a,H$b,H$c,H$d){if((H$a._saveMark._saveuse&H$b)!==H$b){H$a._saveMark._saveuse|=H$b;var H$e=H$h._cache,H$f=0<H$e._length?H$e[--H$e._length]:new H$h;H$f._value=H$c[H$f._valueName=H$h._namemap[H$b]],H$f._dataObj=H$c,H$f._newSubmit=H$d;var H$g=H$a._save;H$g[H$g._length++]=H$f}},H$h._cache=laya.webgl.canvas.save.SaveBase._createArray(),H$h._namemap=H$h._init(),H$h}(),H$U=function(){function H$f(){this._clipRect=new H$B}H$m(H$f,"laya.webgl.canvas.save.SaveClipRect");var H$a=H$f.prototype;return H$w.imps(H$a,{"laya.webgl.canvas.save.ISaveData":!0}),H$a.isSaveMark=function(){return!1},H$a.restore=function(H$a){H$a._clipRect=this._clipSaveRect,(H$f._cache[H$f._cache._length++]=this)._submitScissor.submitLength=H$a._submits._length-this._submitScissor.submitIndex,H$a._curSubmit=H$fa.RENDERBASE,H$a._renderKey=0},H$f.save=function(H$a,H$b){if(131072!=(131072&H$a._saveMark._saveuse)){H$a._saveMark._saveuse|=131072;var H$c=H$f._cache,H$d=0<H$c._length?H$c[--H$c._length]:new H$f;H$d._clipSaveRect=H$a._clipRect,H$a._clipRect=H$d._clipRect.copyFrom(H$a._clipRect),H$d._submitScissor=H$b;var H$e=H$a._save;H$e[H$e._length++]=H$d}},H$g(H$f,["_cache",function(){return this._cache=H$T._createArray()}]),H$f}(),H$V=function(){function H$n(){this._contextX=0,this._contextY=0,this._clipRect=new H$B,this._rect=new H$B,this._matrix=new H$z}H$m(H$n,"laya.webgl.canvas.save.SaveClipRectStencil");var H$a=H$n.prototype;return H$w.imps(H$a,{"laya.webgl.canvas.save.ISaveData":!0}),H$a.isSaveMark=function(){return!1},H$a.restore=function(H$a){H$ka.restore(H$a,this._rect,this._saveMatrix,this._contextX,this._contextY),H$a._clipRect=this._clipSaveRect,H$a._curMat=this._saveMatrix,H$a._x=this._contextX,H$a._y=this._contextY,H$n._cache[H$n._cache._length++]=this,H$a._curSubmit=H$fa.RENDERBASE},H$n.save=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j){if(262144!=(262144&H$a._saveMark._saveuse)){H$a._saveMark._saveuse|=262144;var H$k=H$n._cache,H$l=0<H$k._length?H$k[--H$k._length]:new H$n;H$l._clipSaveRect=H$a._clipRect,H$l._clipRect.setTo(H$g,H$h,H$i,H$j),H$a._clipRect=H$l._clipRect,H$l._rect.x=H$c,H$l._rect.y=H$d,H$l._rect.width=H$e,H$l._rect.height=H$f,H$l._contextX=H$a._x,H$l._contextY=H$a._y,H$l._saveMatrix=H$a._curMat,H$a._curMat.copyTo(H$l._matrix),H$a._curMat=H$l._matrix,H$l._submitStencil=H$b;var H$m=H$a._save;H$m[H$m._length++]=H$l}},H$g(H$n,["_cache",function(){return this._cache=H$T._createArray()}]),H$n}(),H$W=function(){function H$d(){this._saveuse=0}H$m(H$d,"laya.webgl.canvas.save.SaveMark");var H$a=H$d.prototype;return H$w.imps(H$a,{"laya.webgl.canvas.save.ISaveData":!0}),H$a.isSaveMark=function(){return!0},H$a.restore=function(H$a){H$a._saveMark=this._preSaveMark,H$d._no[H$d._no._length++]=this},H$d.Create=function(H$a){var H$b=H$d._no,H$c=0<H$b._length?H$b[--H$b._length]:new H$d;return H$c._saveuse=0,H$c._preSaveMark=H$a._saveMark,H$a._saveMark=H$c},H$g(H$d,["_no",function(){return this._no=H$T._createArray()}]),H$d}(),H$X=function(){function H$f(){this._matrix=new H$z}H$m(H$f,"laya.webgl.canvas.save.SaveTransform");var H$a=H$f.prototype;return H$w.imps(H$a,{"laya.webgl.canvas.save.ISaveData":!0}),H$a.isSaveMark=function(){return!1},H$a.restore=function(H$a){H$a._curMat=this._savematrix,H$f._no[H$f._no._length++]=this},H$f.save=function(H$a){var H$b=H$a._saveMark;if(2048!=(2048&H$b._saveuse)){H$b._saveuse|=2048;var H$c=H$f._no,H$d=0<H$c._length?H$c[--H$c._length]:new H$f;H$d._savematrix=H$a._curMat,H$a._curMat=H$a._curMat.copyTo(H$d._matrix);var H$e=H$a._save;H$e[H$e._length++]=H$d}},H$g(H$f,["_no",function(){return this._no=H$T._createArray()}]),H$f}(),H$Y=function(){function H$e(){}H$m(H$e,"laya.webgl.canvas.save.SaveTranslate");var H$a=H$e.prototype;return H$w.imps(H$a,{"laya.webgl.canvas.save.ISaveData":!0}),H$a.isSaveMark=function(){return!1},H$a.restore=function(H$a){H$a._curMat;H$a._x=this._x,H$a._y=this._y,H$e._no[H$e._no._length++]=this},H$e.save=function(H$a){var H$b=H$e._no,H$c=0<H$b._length?H$b[--H$b._length]:new H$e;H$c._x=H$a._x,H$c._y=H$a._y;var H$d=H$a._save;H$d[H$d._length++]=H$c},H$g(H$e,["_no",function(){return this._no=H$T._createArray()}]),H$e}(),H$Z=function(){function H$a(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new H$B}H$m(H$a,"laya.webgl.resource.RenderTargetMAX");var H$b=H$a.prototype;return H$b.setSP=function(H$a){this._sp=H$a},H$b.size=function(H$a,H$b){var H$c=this;this._width!==H$a||this._height!==H$b?(this.repaint=!0,this._width=H$a,this._height=H$b,this.target?this.target.size(H$a,H$b):this.target=H$Ka.create(H$a,H$b),this.target.hasListener("recovered")||this.target.on("recovered",this,function(H$a){H$w.timer.callLater(H$c._sp,H$c._sp.repaint)})):this.target.size(H$a,H$b)},H$b._flushToTarget=function(H$a,H$b){if(!H$b._destroy){var H$c=H$sa.worldScissorTest,H$d=H$sa.worldClipRect;H$sa.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,H$sa.worldScissorTest=!1,H$ua.mainContext.disable(3089);var H$e=H$sa.worldAlpha,H$f=H$sa.worldMatrix4,H$g=H$sa.worldMatrix,H$h=H$sa.worldFilters,H$i=H$sa.worldShaderDefines;if(H$sa.worldMatrix=H$z.EMPTY,H$sa.restoreTempArray(),H$sa.worldMatrix4=H$sa.TEMPMAT4_ARRAY,H$sa.worldAlpha=1,H$sa.worldFilters=null,H$sa.worldShaderDefines=null,H$Ja.activeShader=null,H$b.start(),H$x.showCanvasMark?H$b.clear(0,1,0,.3):H$b.clear(0,0,0,0),H$a.flush(),H$b.end(),H$Ja.activeShader=null,H$sa.worldAlpha=H$e,H$sa.worldMatrix4=H$f,H$sa.worldMatrix=H$g,H$sa.worldFilters=H$h,H$sa.worldShaderDefines=H$i,H$sa.worldScissorTest=H$c){var H$j=H$sa.height-H$d.y-H$d.height;H$ua.mainContext.scissor(H$d.x,H$j,H$d.width,H$d.height),H$ua.mainContext.enable(3089)}H$sa.worldClipRect=H$d}},H$b.flush=function(H$a){this.repaint&&(this._flushToTarget(H$a,this.target),this.repaint=!1)},H$b.drawTo=function(H$a,H$b,H$c,H$d,H$e){H$a.drawTexture(this.target.getTexture(),H$b,H$c,H$d,H$e,0,0)},H$b.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},H$a}(),H$$=function(){function H$a(){this.ALPHA=1,this.shaderType=0,this.defines=new H$Ca}return H$m(H$a,"laya.webgl.shader.d2.Shader2D"),H$a.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},H$a.__init__=function(){var H$a,H$b;H$Wa.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),H$Wa.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),H$Wa.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),H$Wa.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),H$Wa.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),H$Wa.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),H$Wa.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),H$Wa.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),H$a="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",H$b='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',H$Wa.preCompile2D(0,1,H$a,H$b,null),H$a="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",H$b='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',H$Wa.preCompile2D(0,2,H$a,H$b,null),H$a="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",H$b="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",H$Wa.preCompile2D(0,4,H$a,H$b,null),H$a="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",H$b='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',H$Wa.preCompile2D(0,256,H$a,H$b,null),H$a="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",H$b="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",H$Wa.preCompile2D(0,512,H$a,H$b,null)},H$a}(),H$_=function(){function H$b(H$a,H$b,H$c){this._value=0,this._name2int=H$a,this._int2name=H$b,this._int2nameMap=H$c}H$m(H$b,"laya.webgl.shader.ShaderDefines");var H$a=H$b.prototype;return H$a.add=function(H$a){return"string"==typeof H$a&&(H$a=this._name2int[H$a]),this._value|=H$a,this._value},H$a.addInt=function(H$a){return this._value|=H$a,this._value},H$a.remove=function(H$a){return"string"==typeof H$a&&(H$a=this._name2int[H$a]),this._value&=~H$a,this._value},H$a.isDefine=function(H$a){return(this._value&H$a)===H$a},H$a.getValue=function(){return this._value},H$a.setValue=function(H$a){this._value=H$a},H$a.toNameDic=function(){var H$a=this._int2nameMap[this._value];return H$a||H$b._toText(this._value,this._int2name,this._int2nameMap)},H$b._reg=function(H$a,H$b,H$c,H$d){H$d[H$c[H$a]=H$b]=H$a},H$b._toText=function(H$a,H$b,H$c){var H$d=H$c[H$a];if(H$d)return H$d;for(var H$e={},H$f=1,H$g=0;H$g<32&&!(H$a<(H$f=1<<H$g));H$g++)if(H$a&H$f){var H$h=H$b[H$f];H$h&&(H$e[H$h]="")}return H$c[H$a]=H$e},H$b._toInt=function(H$a,H$b){for(var H$c=H$a.split("."),H$d=0,H$e=0,H$f=H$c.length;H$e<H$f;H$e++){var H$g=H$b[H$c[H$e]];if(!H$g)throw new Error("Defines to int err:"+H$a+"/"+H$c[H$e]);H$d|=H$g}return H$d},H$b}(),H$aa=function(){function H$g(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new H$z}H$m(H$g,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var H$a=H$g.prototype;return H$a.init=function(H$a,H$b,H$c){if(H$b)this._vs=H$b;else{this._vs=[];var H$d=H$a.width,H$e=H$a.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(H$d,0,1,0,1,1,1,1),this._vs.push(H$d,H$e,1,1,1,1,1,1),this._vs.push(0,H$e,0,1,1,1,1,1)}H$c?this._ps=H$c:(H$g._defaultPS||(H$g._defaultPS=[]).push(0,1,3,3,1,2),this._ps=H$g._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=H$a},H$a.init2=function(H$a,H$b,H$c,H$d,H$e){this.transform&&(this.transform=null),H$c?this._ps=H$c:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=H$d,this._uvs=H$e,this.mEleNum=this._ps.length,this.mTexture=H$a,(H$r.isConchNode||H$r.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},H$a._initMyData=function(){var H$a=0,H$b=0,H$c=4*this._verticles.length;this._vs=H$g._tempVS;var H$d=!1;if(H$r.isConchNode||H$r.isConchApp?(this._vs.length=H$c,H$d=!0):this._vs.length<H$c&&(this._vs.length=H$c,H$d=!0),H$g._tVSLen=H$c,H$d)for(;H$a<H$c;)this._vs[H$a]=this._verticles[H$b],this._vs[H$a+1]=this._verticles[H$b+1],this._vs[H$a+2]=this._uvs[H$b],this._vs[H$a+3]=this._uvs[H$b+1],this._vs[H$a+4]=1,this._vs[H$a+5]=1,this._vs[H$a+6]=1,this._vs[H$a+7]=1,H$a+=8,H$b+=2;else for(;H$a<H$c;)this._vs[H$a]=this._verticles[H$b],this._vs[H$a+1]=this._verticles[H$b+1],this._vs[H$a+2]=this._uvs[H$b],this._vs[H$a+3]=this._uvs[H$b+1],H$a+=8,H$b+=2},H$a.getData2=function(H$a,H$b,H$c){var H$d;this.mVBBuffer=H$a,this.mIBBuffer=H$b,this._initMyData(),H$a.appendEx2(this._vs,Float32Array,H$g._tVSLen,4),this._indexStart=H$b._byteLength,(H$d=H$g._tempIB).length<this._ps.length&&(H$d.length=this._ps.length);for(var H$e=0,H$f=this._ps.length;H$e<H$f;H$e++)H$d[H$e]=this._ps[H$e]+H$c;H$b.appendEx2(H$d,Uint16Array,this._ps.length,2)},H$a.getData=function(H$a,H$b,H$c){if(this.mVBBuffer=H$a,this.mIBBuffer=H$b,H$a.append(this.mVBData),this._indexStart=H$b._byteLength,this.mIBData.start!=H$c){for(var H$d=0,H$e=this._ps.length;H$d<H$e;H$d++)this.mIBData[H$d]=this._ps[H$d]+H$c;this.mIBData.start=H$c}H$b.append(this.mIBData)},H$a.render=function(H$a,H$b,H$c){if(H$r.isWebGL&&this.mTexture){H$a._renderKey=0,H$a._shader2D.glTexture=null,H$ba.getInstance().addSkinMesh(this);var H$d=H$fa.createShape(H$a,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,H$ya.create(512,0));this.transform||(this.transform=H$z.EMPTY),this.transform.translate(H$b,H$c),H$z.mul(this.transform,H$a._curMat,this._tempMatrix),this.transform.translate(-H$b,-H$c);var H$e=H$d.shaderValue,H$f=H$e.u_mmat2||H$sa.getMatrArray();H$sa.mat2MatArray(this._tempMatrix,H$f),H$e.textureHost=this.mTexture,H$e.offsetX=0,H$e.offsetY=0,H$e.u_mmat2=H$f,H$e.ALPHA=H$a._shader2D.ALPHA,H$a._submits[H$a._submits._length++]=H$d}else H$r.isConchApp&&this.mTexture&&(this.transform||(this.transform=H$z.EMPTY),H$a.setSkinMesh&&H$a.setSkinMesh(H$b,H$c,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},H$g._tempVS=[],H$g._tempIB=[],H$g._defaultPS=null,H$g._tVSLen=0,H$g}(),H$ba=function(){function H$a(){this.ib=null,this.vb=null;H$ua.mainContext;this.ib=H$$a.create(35048),this.vb=H$_a.create(8)}H$m(H$a,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var H$b=H$a.prototype;return H$b.addSkinMesh=function(H$a){H$a.getData2(this.vb,this.ib,this.vb._byteLength/32)},H$b.reset=function(){this.vb.clear(),this.ib.clear()},H$a.getInstance=function(){return H$a.instance=H$a.instance||new H$a},H$a.instance=null,H$a}(),H$ca=function(){function H$a(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===H$i&&(H$i=0),this.x=H$a,this.y=H$b,this.width=H$c,this.height=H$d,this.edges=H$e,this.color=H$f,this.borderWidth=H$g,this.borderColor=H$h}H$m(H$a,"laya.webgl.shapes.BasePoly");var H$b=H$a.prototype;return H$w.imps(H$b,{"laya.webgl.shapes.IShape":!0}),H$b.getData=function(H$a,H$b,H$c){},H$b.rebuild=function(H$a){},H$b.setMatrix=function(H$a){},H$b.needUpdate=function(H$a){return!0},H$b.sector=function(H$a,H$b,H$c){var H$d=this.x,H$e=this.y,H$f=this.edges,H$g=(this.r1-this.r0)/H$f,H$h=this.width,H$i=this.height,H$j=this.color,H$k=(H$j>>16&255)/255,H$l=(H$j>>8&255)/255,H$m=(255&H$j)/255;H$a.push(H$d,H$e,H$k,H$l,H$m);for(var H$n=0;H$n<H$f+1;H$n++)H$a.push(H$d+Math.sin(H$g*H$n+this.r0)*H$h,H$e+Math.cos(H$g*H$n+this.r0)*H$i),H$a.push(H$k,H$l,H$m);for(H$n=0;H$n<H$f;H$n++)H$b.push(H$c,H$c+H$n+1,H$c+H$n+2)},H$b.createLine2=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g,H$h,H$i,H$j,H$k,H$l,H$m,H$n,H$o,H$p,H$q,H$r,H$s,H$t,H$u,H$v,H$w,H$x,H$y,H$z,H$A=H$a.concat(),H$B=H$e,H$C=this.borderColor,H$D=(H$C>>16&255)/255,H$E=(H$C>>8&255)/255,H$F=(255&H$C)/255,H$G=H$A.length/2,H$H=H$d,H$I=H$c/2;H$i=H$A[0],H$j=H$A[1],H$p=H$i-(H$k=H$A[2]),H$o=(H$o=-(H$j-(H$l=H$A[3])))/(H$z=Math.sqrt(H$o*H$o+H$p*H$p))*H$I,H$p=H$p/H$z*H$I,H$B.push(H$i-H$o+this.x,H$j-H$p+this.y,H$D,H$E,H$F,H$i+H$o+this.x,H$j+H$p+this.y,H$D,H$E,H$F);for(var H$J=1;H$J<H$G-1;H$J++)H$i=H$A[2*(H$J-1)],H$j=H$A[2*(H$J-1)+1],H$k=H$A[2*H$J],H$l=H$A[2*H$J+1],H$m=H$A[2*(H$J+1)],H$n=H$A[2*(H$J+1)+1],H$p=H$i-H$k,H$r=H$k-H$m,H$u=(-(H$o=(H$o=-(H$j-H$l))/(H$z=Math.sqrt(H$o*H$o+H$p*H$p))*H$I)+H$i)*(-(H$p=H$p/H$z*H$I)+H$l)-(-H$o+H$k)*(-H$p+H$j),H$x=(-(H$q=(H$q=-(H$l-H$n))/(H$z=Math.sqrt(H$q*H$q+H$r*H$r))*H$I)+H$m)*(-(H$r=H$r/H$z*H$I)+H$l)-(-H$q+H$k)*(-H$r+H$n),H$y=(H$s=-H$p+H$j-(-H$p+H$l))*(H$w=-H$q+H$k-(-H$q+H$m))-(H$v=-H$r+H$n-(-H$r+H$l))*(H$t=-H$o+H$k-(-H$o+H$i)),Math.abs(H$y)<.1?(H$y+=10.1,H$B.push(H$k-H$o+this.x,H$l-H$p+this.y,H$D,H$E,H$F,H$k+H$o+this.x,H$l+H$p+this.y,H$D,H$E,H$F)):(((H$g=(H$t*H$x-H$w*H$u)/H$y)-H$k)*(H$g-H$k)+((H$h=(H$v*H$u-H$s*H$x)/H$y)-H$l)+(H$h-H$l),H$B.push(H$g+this.x,H$h+this.y,H$D,H$E,H$F,H$k-(H$g-H$k)+this.x,H$l-(H$h-H$l)+this.y,H$D,H$E,H$F));H$i=H$A[H$A.length-4],H$j=H$A[H$A.length-3],H$p=H$i-(H$k=H$A[H$A.length-2]),H$o=(H$o=-(H$j-(H$l=H$A[H$A.length-1])))/(H$z=Math.sqrt(H$o*H$o+H$p*H$p))*H$I,H$p=H$p/H$z*H$I,H$B.push(H$k-H$o+this.x,H$l-H$p+this.y,H$D,H$E,H$F,H$k+H$o+this.x,H$l+H$p+this.y,H$D,H$E,H$F);var H$K=H$f;for(H$J=1;H$J<H$K;H$J++)H$b.push(H$H+2*(H$J-1),H$H+2*(H$J-1)+1,H$H+2*H$J+1,H$H+2*H$J+1,H$H+2*H$J,H$H+2*(H$J-1));return H$B},H$b.createLine=function(H$a,H$b,H$c,H$d){var H$e=H$a.concat(),H$f=H$a,H$g=this.borderColor,H$h=(H$g>>16&255)/255,H$i=(H$g>>8&255)/255,H$j=(255&H$g)/255;H$e.splice(0,5);var H$k,H$l,H$m,H$n,H$o,H$p,H$q,H$r,H$s,H$t,H$u,H$v,H$w,H$x,H$y,H$z,H$A,H$B,H$C,H$D,H$E=H$e.length/5,H$F=H$d,H$G=H$c/2;H$m=H$e[0],H$n=H$e[1],H$t=H$m-(H$o=H$e[5]),H$s=(H$s=-(H$n-(H$p=H$e[6])))/(H$D=Math.sqrt(H$s*H$s+H$t*H$t))*H$G,H$t=H$t/H$D*H$G,H$f.push(H$m-H$s,H$n-H$t,H$h,H$i,H$j,H$m+H$s,H$n+H$t,H$h,H$i,H$j);for(var H$H=1;H$H<H$E-1;H$H++)H$m=H$e[5*(H$H-1)],H$n=H$e[5*(H$H-1)+1],H$o=H$e[5*H$H],H$p=H$e[5*H$H+1],H$q=H$e[5*(H$H+1)],H$r=H$e[5*(H$H+1)+1],H$t=H$m-H$o,H$v=H$o-H$q,H$y=(-(H$s=(H$s=-(H$n-H$p))/(H$D=Math.sqrt(H$s*H$s+H$t*H$t))*H$G)+H$m)*(-(H$t=H$t/H$D*H$G)+H$p)-(-H$s+H$o)*(-H$t+H$n),H$B=(-(H$u=(H$u=-(H$p-H$r))/(H$D=Math.sqrt(H$u*H$u+H$v*H$v))*H$G)+H$q)*(-(H$v=H$v/H$D*H$G)+H$p)-(-H$u+H$o)*(-H$v+H$r),H$C=(H$w=-H$t+H$n-(-H$t+H$p))*(H$A=-H$u+H$o-(-H$u+H$q))-(H$z=-H$v+H$r-(-H$v+H$p))*(H$x=-H$s+H$o-(-H$s+H$m)),Math.abs(H$C)<.1?(H$C+=10.1,H$f.push(H$o-H$s,H$p-H$t,H$h,H$i,H$j,H$o+H$s,H$p+H$t,H$h,H$i,H$j)):(((H$k=(H$x*H$B-H$A*H$y)/H$C)-H$o)*(H$k-H$o)+((H$l=(H$z*H$y-H$w*H$B)/H$C)-H$p)+(H$l-H$p),H$f.push(H$k,H$l,H$h,H$i,H$j,H$o-(H$k-H$o),H$p-(H$l-H$p),H$h,H$i,H$j));H$m=H$e[H$e.length-10],H$n=H$e[H$e.length-9],H$t=H$m-(H$o=H$e[H$e.length-5]),H$s=(H$s=-(H$n-(H$p=H$e[H$e.length-4])))/(H$D=Math.sqrt(H$s*H$s+H$t*H$t))*H$G,H$t=H$t/H$D*H$G,H$f.push(H$o-H$s,H$p-H$t,H$h,H$i,H$j,H$o+H$s,H$p+H$t,H$h,H$i,H$j);var H$I=this.edges+1;for(H$H=1;H$H<H$I;H$H++)H$b.push(H$F+2*(H$H-1),H$F+2*(H$H-1)+1,H$F+2*H$H+1,H$F+2*H$H+1,H$F+2*H$H,H$F+2*(H$H-1));return H$f},H$b.createLoopLine=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g=H$a.concat(),H$h=H$e||H$a,H$i=this.borderColor,H$j=(H$i>>16&255)/255,H$k=(H$i>>8&255)/255,H$l=(255&H$i)/255;H$g.splice(0,5);var H$m=[H$g[0],H$g[1]],H$n=[H$g[H$g.length-5],H$g[H$g.length-4]],H$o=H$n[0]+.5*(H$m[0]-H$n[0]),H$p=H$n[1]+.5*(H$m[1]-H$n[1]);H$g.unshift(H$o,H$p,0,0,0),H$g.push(H$o,H$p,0,0,0);var H$q,H$r,H$s,H$t,H$u,H$v,H$w,H$x,H$y,H$z,H$A,H$B,H$C,H$D,H$E,H$F,H$G,H$H,H$I,H$J,H$K=H$g.length/5,H$L=H$d,H$M=H$c/2;H$s=H$g[0],H$t=H$g[1],H$z=H$s-(H$u=H$g[5]),H$y=(H$y=-(H$t-(H$v=H$g[6])))/(H$J=Math.sqrt(H$y*H$y+H$z*H$z))*H$M,H$z=H$z/H$J*H$M,H$h.push(H$s-H$y,H$t-H$z,H$j,H$k,H$l,H$s+H$y,H$t+H$z,H$j,H$k,H$l);for(var H$N=1;H$N<H$K-1;H$N++)H$s=H$g[5*(H$N-1)],H$t=H$g[5*(H$N-1)+1],H$u=H$g[5*H$N],H$v=H$g[5*H$N+1],H$w=H$g[5*(H$N+1)],H$x=H$g[5*(H$N+1)+1],H$z=H$s-H$u,H$B=H$u-H$w,H$E=(-(H$y=(H$y=-(H$t-H$v))/(H$J=Math.sqrt(H$y*H$y+H$z*H$z))*H$M)+H$s)*(-(H$z=H$z/H$J*H$M)+H$v)-(-H$y+H$u)*(-H$z+H$t),H$H=(-(H$A=(H$A=-(H$v-H$x))/(H$J=Math.sqrt(H$A*H$A+H$B*H$B))*H$M)+H$w)*(-(H$B=H$B/H$J*H$M)+H$v)-(-H$A+H$u)*(-H$B+H$x),H$I=(H$C=-H$z+H$t-(-H$z+H$v))*(H$G=-H$A+H$u-(-H$A+H$w))-(H$F=-H$B+H$x-(-H$B+H$v))*(H$D=-H$y+H$u-(-H$y+H$s)),Math.abs(H$I)<.1?(H$I+=10.1,H$h.push(H$u-H$y,H$v-H$z,H$j,H$k,H$l,H$u+H$y,H$v+H$z,H$j,H$k,H$l)):(((H$q=(H$D*H$H-H$G*H$E)/H$I)-H$u)*(H$q-H$u)+((H$r=(H$F*H$E-H$C*H$H)/H$I)-H$v)+(H$r-H$v),H$h.push(H$q,H$r,H$j,H$k,H$l,H$u-(H$q-H$u),H$v-(H$r-H$v),H$j,H$k,H$l));H$f&&(H$b=H$f);var H$O=this.edges+1;for(H$N=1;H$N<H$O;H$N++)H$b.push(H$L+2*(H$N-1),H$L+2*(H$N-1)+1,H$L+2*H$N+1,H$L+2*H$N+1,H$L+2*H$N,H$L+2*(H$N-1));return H$b.push(H$L+2*(H$N-1),H$L+2*(H$N-1)+1,H$L+1,H$L+1,H$L,H$L+2*(H$N-1)),H$h},H$a}(),H$da=function(){function H$p(){}return H$m(H$p,"laya.webgl.shapes.Earcut"),H$p.earcut=function(H$a,H$b,H$c){H$c=H$c||2;var H$d,H$e,H$f,H$g,H$h,H$i,H$j,H$k=H$b&&H$b.length,H$l=H$k?H$b[0]*H$c:H$a.length,H$m=H$p.linkedList(H$a,0,H$l,H$c,!0),H$n=[];if(!H$m)return H$n;if(H$k&&(H$m=H$p.eliminateHoles(H$a,H$b,H$m,H$c)),H$a.length>80*H$c){H$d=H$f=H$a[0],H$e=H$g=H$a[1];for(var H$o=H$c;H$o<H$l;H$o+=H$c)(H$h=H$a[H$o])<H$d&&(H$d=H$h),(H$i=H$a[H$o+1])<H$e&&(H$e=H$i),H$f<H$h&&(H$f=H$h),H$g<H$i&&(H$g=H$i);H$j=0!==(H$j=Math.max(H$f-H$d,H$g-H$e))?1/H$j:0}return H$p.earcutLinked(H$m,H$n,H$c,H$d,H$e,H$j),H$n},H$p.linkedList=function(H$a,H$b,H$c,H$d,H$e){var H$f,H$g;if(H$e===0<H$p.signedArea(H$a,H$b,H$c,H$d))for(H$f=H$b;H$f<H$c;H$f+=H$d)H$g=H$p.insertNode(H$f,H$a[H$f],H$a[H$f+1],H$g);else for(H$f=H$c-H$d;H$b<=H$f;H$f-=H$d)H$g=H$p.insertNode(H$f,H$a[H$f],H$a[H$f+1],H$g);return H$g&&H$p.equals(H$g,H$g.next)&&(H$p.removeNode(H$g),H$g=H$g.next),H$g},H$p.filterPoints=function(H$a,H$b){if(!H$a)return H$a;H$b||(H$b=H$a);var H$c,H$d=H$a;do{if(H$c=!1,H$d.steiner||!H$p.equals(H$d,H$d.next)&&0!==H$p.area(H$d.prev,H$d,H$d.next))H$d=H$d.next;else{if(H$p.removeNode(H$d),(H$d=H$b=H$d.prev)===H$d.next)break;H$c=!0}}while(H$c||H$d!==H$b);return H$b},H$p.earcutLinked=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){if(H$a){!H$g&&H$f&&H$p.indexCurve(H$a,H$d,H$e,H$f);for(var H$h,H$i,H$j=H$a;H$a.prev!==H$a.next;)if(H$h=H$a.prev,H$i=H$a.next,H$f?H$p.isEarHashed(H$a,H$d,H$e,H$f):H$p.isEar(H$a))H$b.push(H$h.i/H$c),H$b.push(H$a.i/H$c),H$b.push(H$i.i/H$c),H$p.removeNode(H$a),H$a=H$i.next,H$j=H$i.next;else if((H$a=H$i)===H$j){H$g?1===H$g?(H$a=H$p.cureLocalIntersections(H$a,H$b,H$c),H$p.earcutLinked(H$a,H$b,H$c,H$d,H$e,H$f,2)):2===H$g&&H$p.splitEarcut(H$a,H$b,H$c,H$d,H$e,H$f):H$p.earcutLinked(H$p.filterPoints(H$a,null),H$b,H$c,H$d,H$e,H$f,1);break}}},H$p.isEar=function(H$a){var H$b=H$a.prev,H$c=H$a,H$d=H$a.next;if(0<=H$p.area(H$b,H$c,H$d))return!1;for(var H$e=H$a.next.next;H$e!==H$a.prev;){if(H$p.pointInTriangle(H$b.x,H$b.y,H$c.x,H$c.y,H$d.x,H$d.y,H$e.x,H$e.y)&&0<=H$p.area(H$e.prev,H$e,H$e.next))return!1;H$e=H$e.next}return!0},H$p.isEarHashed=function(H$a,H$b,H$c,H$d){var H$e=H$a.prev,H$f=H$a,H$g=H$a.next;if(0<=H$p.area(H$e,H$f,H$g))return!1;for(var H$h=H$e.x<H$f.x?H$e.x<H$g.x?H$e.x:H$g.x:H$f.x<H$g.x?H$f.x:H$g.x,H$i=H$e.y<H$f.y?H$e.y<H$g.y?H$e.y:H$g.y:H$f.y<H$g.y?H$f.y:H$g.y,H$j=H$e.x>H$f.x?H$e.x>H$g.x?H$e.x:H$g.x:H$f.x>H$g.x?H$f.x:H$g.x,H$k=H$e.y>H$f.y?H$e.y>H$g.y?H$e.y:H$g.y:H$f.y>H$g.y?H$f.y:H$g.y,H$l=H$p.zOrder(H$h,H$i,H$b,H$c,H$d),H$m=H$p.zOrder(H$j,H$k,H$b,H$c,H$d),H$n=H$a.nextZ;H$n&&H$n.z<=H$m;){if(H$n!==H$a.prev&&H$n!==H$a.next&&H$p.pointInTriangle(H$e.x,H$e.y,H$f.x,H$f.y,H$g.x,H$g.y,H$n.x,H$n.y)&&0<=H$p.area(H$n.prev,H$n,H$n.next))return!1;H$n=H$n.nextZ}for(H$n=H$a.prevZ;H$n&&H$n.z>=H$l;){if(H$n!==H$a.prev&&H$n!==H$a.next&&H$p.pointInTriangle(H$e.x,H$e.y,H$f.x,H$f.y,H$g.x,H$g.y,H$n.x,H$n.y)&&0<=H$p.area(H$n.prev,H$n,H$n.next))return!1;H$n=H$n.prevZ}return!0},H$p.cureLocalIntersections=function(H$a,H$b,H$c){var H$d=H$a;do{var H$e=H$d.prev,H$f=H$d.next.next;!H$p.equals(H$e,H$f)&&H$p.intersects(H$e,H$d,H$d.next,H$f)&&H$p.locallyInside(H$e,H$f)&&H$p.locallyInside(H$f,H$e)&&(H$b.push(H$e.i/H$c),H$b.push(H$d.i/H$c),H$b.push(H$f.i/H$c),H$p.removeNode(H$d),H$p.removeNode(H$d.next),H$d=H$a=H$f),H$d=H$d.next}while(H$d!==H$a);return H$d},H$p.splitEarcut=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g=H$a;do{for(var H$h=H$g.next.next;H$h!==H$g.prev;){if(H$g.i!==H$h.i&&H$p.isValidDiagonal(H$g,H$h)){var H$i=H$p.splitPolygon(H$g,H$h);return H$g=H$p.filterPoints(H$g,H$g.next),H$i=H$p.filterPoints(H$i,H$i.next),H$p.earcutLinked(H$g,H$b,H$c,H$d,H$e,H$f),void H$p.earcutLinked(H$i,H$b,H$c,H$d,H$e,H$f)}H$h=H$h.next}H$g=H$g.next}while(H$g!==H$a)},H$p.eliminateHoles=function(H$a,H$b,H$c,H$d){var H$e,H$f,H$g,H$h,H$i,H$j=[];for(H$e=0,H$f=H$b.length;H$e<H$f;H$e++)H$g=H$b[H$e]*H$d,H$h=H$e<H$f-1?H$b[H$e+1]*H$d:H$a.length,(H$i=H$p.linkedList(H$a,H$g,H$h,H$d,!1))===H$i.next&&(H$i.steiner=!0),H$j.push(H$p.getLeftmost(H$i));for(H$j.sort(H$p.compareX),H$e=0;H$e<H$j.length;H$e++)H$p.eliminateHole(H$j[H$e],H$c),H$c=H$p.filterPoints(H$c,H$c.next);return H$c},H$p.compareX=function(H$a,H$b){return H$a.x-H$b.x},H$p.eliminateHole=function(H$a,H$b){if(H$b=H$p.findHoleBridge(H$a,H$b)){var H$c=H$p.splitPolygon(H$b,H$a);H$p.filterPoints(H$c,H$c.next)}},H$p.findHoleBridge=function(H$a,H$b){var H$c,H$d=H$b,H$e=H$a.x,H$f=H$a.y,H$g=-1/0;do{if(H$f<=H$d.y&&H$f>=H$d.next.y&&H$d.next.y!==H$d.y){var H$h=H$d.x+(H$f-H$d.y)*(H$d.next.x-H$d.x)/(H$d.next.y-H$d.y);if(H$h<=H$e&&H$g<H$h){if((H$g=H$h)===H$e){if(H$f===H$d.y)return H$d;if(H$f===H$d.next.y)return H$d.next}H$c=H$d.x<H$d.next.x?H$d:H$d.next}}H$d=H$d.next}while(H$d!==H$b);if(!H$c)return null;if(H$e===H$g)return H$c.prev;var H$i,H$j=H$c,H$k=H$c.x,H$l=H$c.y,H$m=1/0;for(H$d=H$c.next;H$d!==H$j;)H$e>=H$d.x&&H$d.x>=H$k&&H$e!==H$d.x&&H$p.pointInTriangle(H$f<H$l?H$e:H$g,H$f,H$k,H$l,H$f<H$l?H$g:H$e,H$f,H$d.x,H$d.y)&&((H$i=Math.abs(H$f-H$d.y)/(H$e-H$d.x))<H$m||H$i===H$m&&H$d.x>H$c.x)&&H$p.locallyInside(H$d,H$a)&&(H$c=H$d,H$m=H$i),H$d=H$d.next;return H$c},H$p.indexCurve=function(H$a,H$b,H$c,H$d){for(var H$e=H$a;null===H$e.z&&(H$e.z=H$p.zOrder(H$e.x,H$e.y,H$b,H$c,H$d)),H$e.prevZ=H$e.prev,H$e.nextZ=H$e.next,(H$e=H$e.next)!==H$a;);H$e.prevZ.nextZ=null,H$e.prevZ=null,H$p.sortLinked(H$e)},H$p.sortLinked=function(H$a){var H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j=1;do{for(H$c=H$a,H$f=H$a=null,H$g=0;H$c;){for(H$g++,H$d=H$c,H$b=H$h=0;H$b<H$j&&(H$h++,H$d=H$d.nextZ);H$b++);for(H$i=H$j;0<H$h||0<H$i&&H$d;)0!==H$h&&(0===H$i||!H$d||H$c.z<=H$d.z)?(H$c=(H$e=H$c).nextZ,H$h--):(H$d=(H$e=H$d).nextZ,H$i--),H$f?H$f.nextZ=H$e:H$a=H$e,H$e.prevZ=H$f,H$f=H$e;H$c=H$d}H$f.nextZ=null,H$j*=2}while(1<H$g);return H$a},H$p.zOrder=function(H$a,H$b,H$c,H$d,H$e){return(H$a=1431655765&((H$a=858993459&((H$a=252645135&((H$a=16711935&((H$a=32767*(H$a-H$c)*H$e)|H$a<<8))|H$a<<4))|H$a<<2))|H$a<<1))|(H$b=1431655765&((H$b=858993459&((H$b=252645135&((H$b=16711935&((H$b=32767*(H$b-H$d)*H$e)|H$b<<8))|H$b<<4))|H$b<<2))|H$b<<1))<<1},H$p.getLeftmost=function(H$a){for(var H$b=H$a,H$c=H$a;H$b.x<H$c.x&&(H$c=H$b),(H$b=H$b.next)!==H$a;);return H$c},H$p.pointInTriangle=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){return 0<=(H$e-H$g)*(H$b-H$h)-(H$a-H$g)*(H$f-H$h)&&0<=(H$a-H$g)*(H$d-H$h)-(H$c-H$g)*(H$b-H$h)&&0<=(H$c-H$g)*(H$f-H$h)-(H$e-H$g)*(H$d-H$h)},H$p.isValidDiagonal=function(H$a,H$b){return H$a.next.i!==H$b.i&&H$a.prev.i!==H$b.i&&!H$p.intersectsPolygon(H$a,H$b)&&H$p.locallyInside(H$a,H$b)&&H$p.locallyInside(H$b,H$a)&&H$p.middleInside(H$a,H$b)},H$p.area=function(H$a,H$b,H$c){return(H$b.y-H$a.y)*(H$c.x-H$b.x)-(H$b.x-H$a.x)*(H$c.y-H$b.y)},H$p.equals=function(H$a,H$b){return H$a.x===H$b.x&&H$a.y===H$b.y},H$p.intersects=function(H$a,H$b,H$c,H$d){return!!(H$p.equals(H$a,H$b)&&H$p.equals(H$c,H$d)||H$p.equals(H$a,H$d)&&H$p.equals(H$c,H$b))||0<H$p.area(H$a,H$b,H$c)!=0<H$p.area(H$a,H$b,H$d)&&0<H$p.area(H$c,H$d,H$a)!=0<H$p.area(H$c,H$d,H$b)},H$p.intersectsPolygon=function(H$a,H$b){var H$c=H$a;do{if(H$c.i!==H$a.i&&H$c.next.i!==H$a.i&&H$c.i!==H$b.i&&H$c.next.i!==H$b.i&&H$p.intersects(H$c,H$c.next,H$a,H$b))return!0;H$c=H$c.next}while(H$c!==H$a);return!1},H$p.locallyInside=function(H$a,H$b){return H$p.area(H$a.prev,H$a,H$a.next)<0?0<=H$p.area(H$a,H$b,H$a.next)&&0<=H$p.area(H$a,H$a.prev,H$b):H$p.area(H$a,H$b,H$a.prev)<0||H$p.area(H$a,H$a.next,H$b)<0},H$p.middleInside=function(H$a,H$b){for(var H$c=H$a,H$d=!1,H$e=(H$a.x+H$b.x)/2,H$f=(H$a.y+H$b.y)/2;H$c.y>H$f!=H$c.next.y>H$f&&H$c.next.y!==H$c.y&&H$e<(H$c.next.x-H$c.x)*(H$f-H$c.y)/(H$c.next.y-H$c.y)+H$c.x&&(H$d=!H$d),(H$c=H$c.next)!==H$a;);return H$d},H$p.splitPolygon=function(H$a,H$b){var H$c=new H$ea(H$a.i,H$a.x,H$a.y),H$d=new H$ea(H$b.i,H$b.x,H$b.y),H$e=H$a.next,H$f=H$b.prev;return(H$a.next=H$b).prev=H$a,(H$c.next=H$e).prev=H$c,(H$d.next=H$c).prev=H$d,(H$f.next=H$d).prev=H$f,H$d},H$p.insertNode=function(H$a,H$b,H$c,H$d){var H$e=new H$ea(H$a,H$b,H$c);return H$d?(H$e.next=H$d.next,(H$e.prev=H$d).next.prev=H$e,H$d.next=H$e):(H$e.prev=H$e).next=H$e,H$e},H$p.removeNode=function(H$a){H$a.next.prev=H$a.prev,H$a.prev.next=H$a.next,H$a.prevZ&&(H$a.prevZ.nextZ=H$a.nextZ),H$a.nextZ&&(H$a.nextZ.prevZ=H$a.prevZ)},H$p.signedArea=function(H$a,H$b,H$c,H$d){for(var H$e=0,H$f=H$b,H$g=H$c-H$d;H$f<H$c;H$f+=H$d)H$e+=(H$a[H$g]-H$a[H$f])*(H$a[H$f+1]+H$a[H$g+1]),H$g=H$f;return H$e},H$p}(),H$ea=function(){function H$a(H$a,H$b,H$c){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=H$a,this.x=H$b,this.y=H$c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return H$m(H$a,"laya.webgl.shapes.EarcutNode"),H$a}(),H$fa=(function(){function H$a(H$a,H$b,H$c,H$d,H$e,H$f,H$g){this.lineWidth=H$a,this.lineColor=H$b,this.lineAlpha=H$c,this.fillColor=H$d,this.fillAlpha=H$e,this.shape=H$g,this.fill=H$f}H$m(H$a,"laya.webgl.shapes.GeometryData");var H$b=H$a.prototype;H$b.clone=function(){return new H$a(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},H$b.getIndexData=function(){return null},H$b.getVertexData=function(){return null},H$b.destroy=function(){this.shape=null}}(),function(){function H$a(H$a){if(H$a instanceof Float32Array)this.points=H$a;else if(H$a instanceof Array){H$a.length;this.points=new Float32Array(H$a)}}H$m(H$a,"laya.webgl.shapes.Vertex");var H$b=H$a.prototype;H$w.imps(H$b,{"laya.webgl.shapes.IShape":!0}),H$b.getData=function(H$a,H$b,H$c){},H$b.needUpdate=function(H$a){return!1},H$b.rebuild=function(H$a){},H$b.setMatrix=function(H$a){}}(),function(){function H$i(H$a){void 0===H$a&&(H$a=1e4),this._renderType=H$a}H$m(H$i,"laya.webgl.submit.Submit");var H$a=H$i.prototype;return H$w.imps(H$a,{"laya.webgl.submit.ISubmit":!0}),H$a.releaseRender=function(){var H$a=H$i._cache;(H$a[H$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},H$a.getRenderType=function(){return this._renderType},H$a.renderSubmit=function(){if(0===this._numEle)return 1;var H$a=this.shaderValue.textureHost;if(H$a){var H$b=H$a.source;if(!H$a.bitmap||!H$b)return 1;this.shaderValue.texture=H$b,H$a.alphaTexture&&H$a.alphaTexture.source&&(this.shaderValue.texture1=H$a.alphaTexture.source)}this._vb.bind_upload(this._ib);var H$c=H$ua.mainContext;return this.shaderValue.upload(),H$Q.activeBlendFunction!==this._blendFn&&(H$c.enable(3042),this._blendFn(H$c),H$Q.activeBlendFunction=this._blendFn),H$E.drawCall++,H$E.trianglesFaces+=this._numEle/3,H$c.drawElements(4,this._numEle,5123,this._startIdx),1},H$i.__init__=function(){var H$a=H$i.RENDERBASE=new H$i(-1);H$a.shaderValue=new H$ya(0,0),H$a.shaderValue.ALPHA=-1234},H$i.createSubmit=function(H$a,H$b,H$c,H$d,H$e){var H$f=H$i._cache._length?H$i._cache[--H$i._cache._length]:new H$i;null==H$c&&((H$c=H$f._selfVb||(H$f._selfVb=H$_a.create(-1))).clear(),H$d=0),H$f._ib=H$b,H$f._vb=H$c,H$f._startIdx=H$d*H$pa.BYTES_PIDX,H$f._numEle=0;var H$g=H$a._nBlendType;H$f._blendFn=H$a._targets?H$Q.targetFns[H$g]:H$Q.fns[H$g],H$f.shaderValue=H$e,H$f.shaderValue.setValue(H$a._shader2D);var H$h=H$a._shader2D.filters;return H$h&&H$f.shaderValue.setFilters(H$h),H$f},H$i.createShape=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g=H$i._cache._length?H$i._cache[--H$i._cache._length]:new H$i;H$g._ib=H$b,H$g._vb=H$c,H$g._numEle=H$d,H$g._startIdx=H$e,H$g.shaderValue=H$f,H$g.shaderValue.setValue(H$a._shader2D);var H$h=H$a._nBlendType;return H$g._blendFn=H$a._targets?H$Q.targetFns[H$h]:H$Q.fns[H$h],H$g},H$i.TYPE_2D=1e4,H$i.TYPE_CANVAS=10003,H$i.TYPE_CMDSETRT=10004,H$i.TYPE_CUSTOM=10005,H$i.TYPE_BLURRT=10006,H$i.TYPE_CMDDESTORYPRERT=10007,H$i.TYPE_DISABLESTENCIL=10008,H$i.TYPE_OTHERIBVB=10009,H$i.TYPE_PRIMITIVE=10010,H$i.TYPE_RT=10011,H$i.TYPE_BLUR_RT=10012,H$i.TYPE_TARGET=10013,H$i.TYPE_CHANGE_VALUE=10014,H$i.TYPE_SHAPE=10015,H$i.TYPE_TEXTURE=10016,H$i.TYPE_FILLTEXTURE=10017,H$i.RENDERBASE=null,H$i._cache=((H$i._cache=[])._length=0,H$i._cache),H$i}()),H$ga=function(){function H$d(){this.fun=null,this.args=null}H$m(H$d,"laya.webgl.submit.SubmitCMD");var H$a=H$d.prototype;return H$w.imps(H$a,{"laya.webgl.submit.ISubmit":!0}),H$a.renderSubmit=function(){return this.fun.apply(null,this.args),1},H$a.getRenderType=function(){return 0},H$a.releaseRender=function(){var H$a=H$d._cache;H$a[H$a._length++]=this},H$d.create=function(H$a,H$b){var H$c=H$d._cache._length?H$d._cache[--H$d._cache._length]:new H$d;return H$c.fun=H$b,H$c.args=H$a,H$c},H$d._cache=((H$d._cache=[])._length=0,H$d._cache),H$d}(),H$ha=function(){function H$b(){this.variables={}}H$m(H$b,"laya.webgl.submit.SubmitCMDScope");var H$a=H$b.prototype;return H$a.getValue=function(H$a){return this.variables[H$a]},H$a.addValue=function(H$a,H$b){return this.variables[H$a]=H$b},H$a.setValue=function(H$a,H$b){return this.variables.hasOwnProperty(H$a)?this.variables[H$a]=H$b:null},H$a.clear=function(){for(var H$a in this.variables)delete this.variables[H$a]},H$a.recycle=function(){this.clear(),H$b.POOL.push(this)},H$b.create=function(){var H$a=H$b.POOL.pop();return H$a||(H$a=new H$b),H$a},H$b.POOL=[],H$b}(),H$ia=function(){function H$l(){this.offset=0,this.startIndex=0,this._mat=H$z.create()}H$m(H$l,"laya.webgl.submit.SubmitOtherIBVB");var H$a=H$l.prototype;return H$w.imps(H$a,{"laya.webgl.submit.ISubmit":!0}),H$a.releaseRender=function(){var H$a=H$l._cache;(H$a[H$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},H$a.getRenderType=function(){return 10009},H$a.renderSubmit=function(){var H$a=this._shaderValue.textureHost;if(H$a){var H$b=H$a.source;if(!H$a.bitmap||!H$b)return 1;this._shaderValue.texture=H$b}this._vb.bind_upload(this._ib);var H$c=H$sa.worldMatrix4,H$d=H$z.TEMP;H$z.mulPre(this._mat,H$c[0],H$c[1],H$c[4],H$c[5],H$c[12],H$c[13],H$d);var H$e=H$sa.worldMatrix4=H$l.tempMatrix4;H$e[0]=H$d.a,H$e[1]=H$d.b,H$e[4]=H$d.c,H$e[5]=H$d.d,H$e[12]=H$d.tx,H$e[13]=H$d.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var H$f=H$ua.mainContext;return H$Q.activeBlendFunction!==this._blendFn&&(H$f.enable(3042),this._blendFn(H$f),H$Q.activeBlendFunction=this._blendFn),H$E.drawCall++,H$E.trianglesFaces+=this._numEle/3,H$f.drawElements(4,this._numEle,5123,this.startIndex),H$sa.worldMatrix4=H$c,H$Ja.activeShader=null,1},H$l.create=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i){void 0===H$i&&(H$i=0);var H$j=H$l._cache._length?H$l._cache[--H$l._cache._length]:new H$l;H$j._ib=H$c,H$j._vb=H$b,H$j._numEle=H$d,H$j._shader=H$e,H$j._shaderValue=H$f;var H$k=H$a._nBlendType;switch(H$j._blendFn=H$a._targets?H$Q.targetFns[H$k]:H$Q.fns[H$k],H$i){case 0:H$j.offset=0,H$j.startIndex=H$h/(H$pa.BYTES_PE*H$b.vertexStride)*1.5,H$j.startIndex*=H$pa.BYTES_PIDX;break;case 1:H$j.startIndex=H$g,H$j.offset=H$h}return H$j},H$l._cache=((H$l._cache=[])._length=0,H$l._cache),H$l.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H$l}(),H$ja=function(){function H$c(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new H$B,this.screenRect=new H$B}H$m(H$c,"laya.webgl.submit.SubmitScissor");var H$a=H$c.prototype;return H$w.imps(H$a,{"laya.webgl.submit.ISubmit":!0}),H$a._scissor=function(H$a,H$b,H$c,H$d){var H$e=H$sa.worldMatrix4,H$f=H$e[0],H$g=H$e[5],H$h=H$e[12],H$i=H$e[13];if(H$d*=H$g,(H$c*=H$f)<1||H$d<1)return!1;var H$j=(H$a=H$a*H$f+H$h)+H$c,H$k=(H$b=H$b*H$g+H$i)+H$d;H$a<0&&(H$c=H$j-(H$a=0)),H$b<0&&(H$d=H$k-(H$b=0));var H$l=H$sa.worldClipRect;if(H$a=Math.max(H$a,H$l.x),H$b=Math.max(H$b,H$l.y),H$c=Math.min(H$j,H$l.right)-H$a,H$d=Math.min(H$k,H$l.bottom)-H$b,H$c<1||H$d<1)return!1;var H$m=H$sa.worldScissorTest;return this.screenRect.copyFrom(H$l),H$l.x=H$a,H$l.y=H$b,H$l.width=H$c,H$l.height=H$d,H$sa.worldScissorTest=!0,H$b=H$sa.height-H$b-H$d,H$ua.mainContext.scissor(H$a,H$b,H$c,H$d),H$ua.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),H$m?(H$b=H$sa.height-this.screenRect.y-this.screenRect.height,H$ua.mainContext.scissor(this.screenRect.x,H$b,this.screenRect.width,this.screenRect.height),H$ua.mainContext.enable(3089)):(H$ua.mainContext.disable(3089),H$sa.worldScissorTest=!1),H$l.copyFrom(this.screenRect),!0},H$a._scissorWithTagart=function(H$a,H$b,H$c,H$d){if(H$c<1||H$d<1)return!1;var H$e=H$a+H$c,H$f=H$b+H$d;H$a<0&&(H$c=H$e-(H$a=0)),H$b<0&&(H$d=H$f-(H$b=0));var H$g=H$sa.worldClipRect;if(H$a=Math.max(H$a,H$g.x),H$b=Math.max(H$b,H$g.y),H$c=Math.min(H$e,H$g.right)-H$a,H$d=Math.min(H$f,H$g.bottom)-H$b,H$c<1||H$d<1)return!1;var H$h=H$sa.worldScissorTest;return this.screenRect.copyFrom(H$g),H$sa.worldScissorTest=!0,H$g.x=H$a,H$g.y=H$b,H$g.width=H$c,H$g.height=H$d,H$b=H$sa.height-H$b-H$d,H$ua.mainContext.scissor(H$a,H$b,H$c,H$d),H$ua.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),H$h?(H$b=H$sa.height-this.screenRect.y-this.screenRect.height,H$ua.mainContext.scissor(this.screenRect.x,H$b,this.screenRect.width,this.screenRect.height),H$ua.mainContext.enable(3089)):(H$ua.mainContext.disable(3089),H$sa.worldScissorTest=!1),H$g.copyFrom(this.screenRect),!0},H$a.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},H$a.getRenderType=function(){return 0},H$a.releaseRender=function(){var H$a=H$c._cache;(H$a[H$a._length++]=this).context=null},H$c.create=function(H$a){var H$b=H$c._cache._length?H$c._cache[--H$c._cache._length]:new H$c;return H$b.context=H$a,H$b},H$c._cache=((H$c._cache=[])._length=0,H$c._cache),H$c}(),H$ka=function(){function H$i(){this.step=0,this.blendMode=null,this.level=0}H$m(H$i,"laya.webgl.submit.SubmitStencil");var H$a=H$i.prototype;return H$w.imps(H$a,{"laya.webgl.submit.ISubmit":!0}),H$a.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},H$a.getRenderType=function(){return 0},H$a.releaseRender=function(){var H$a=H$i._cache;H$a[H$a._length++]=this},H$a.do1=function(){var H$a=H$ua.mainContext;H$a.enable(2960),H$a.clear(1024),H$a.colorMask(!1,!1,!1,!1),H$a.stencilFunc(514,this.level,255),H$a.stencilOp(7680,7680,7682)},H$a.do2=function(){var H$a=H$ua.mainContext;H$a.stencilFunc(514,this.level+1,255),H$a.colorMask(!0,!0,!0,!0),H$a.stencilOp(7680,7680,7680)},H$a.do3=function(){var H$a=H$ua.mainContext;H$a.colorMask(!0,!0,!0,!0),H$a.stencilOp(7680,7680,7680),H$a.clear(1024),H$a.disable(2960)},H$a.do4=function(){var H$a=H$ua.mainContext;0==this.level&&(H$a.enable(2960),H$a.clear(1024)),H$a.colorMask(!1,!1,!1,!1),H$a.stencilFunc(519,0,255),H$a.stencilOp(7680,7680,7682)},H$a.do5=function(){var H$a=H$ua.mainContext;H$a.stencilFunc(514,this.level,255),H$a.colorMask(!0,!0,!0,!0),H$a.stencilOp(7680,7680,7680)},H$a.do6=function(){var H$a=H$ua.mainContext;H$Q.targetFns[H$Q.TOINT[this.blendMode]](H$a)},H$a.do7=function(){var H$a=H$ua.mainContext;H$a.colorMask(!1,!1,!1,!1),H$a.stencilOp(7680,7680,7683)},H$a.do8=function(){var H$a=H$ua.mainContext;H$a.colorMask(!0,!0,!0,!0),H$a.stencilFunc(514,this.level,255),H$a.stencilOp(7680,7680,7680)},H$i.restore=function(H$a,H$b,H$c,H$d,H$e){var H$f;if((H$a._renderKey=0)<H$i._mask&&H$i._mask--,0==H$i._mask)H$f=laya.webgl.submit.SubmitStencil.create(3),H$a.addRenderObject(H$f),H$a._curSubmit=H$fa.RENDERBASE;else{H$f=laya.webgl.submit.SubmitStencil.create(7),H$a.addRenderObject(H$f);var H$g=H$a._vb;H$g._byteLength;if(H$qa.fillRectImgVb(H$g,null,H$b.x,H$b.y,H$b.width,H$b.height,H$I.DEF_UV,H$c,H$d,H$e,0,0)){H$a._shader2D.glTexture=null;var H$h=H$a._curSubmit=H$fa.createSubmit(H$a,H$a._ib,H$g,(H$g._byteLength-64)/32*3,H$ya.create(2,0));H$h.shaderValue.ALPHA=1,H$a._submits[H$a._submits._length++]=H$h,H$a._curSubmit._numEle+=6,H$a._curSubmit=H$fa.RENDERBASE}else alert("clipRect calc stencil rect error");H$f=laya.webgl.submit.SubmitStencil.create(8),H$a.addRenderObject(H$f)}},H$i.restore2=function(H$a,H$b){var H$c;(H$a._renderKey=0)<H$i._mask&&H$i._mask--,0==H$i._mask?(H$c=laya.webgl.submit.SubmitStencil.create(3),H$a.addRenderObject(H$c),H$a._curSubmit=H$fa.RENDERBASE):(H$c=laya.webgl.submit.SubmitStencil.create(7),H$a.addRenderObject(H$c),H$a._submits[H$a._submits._length++]=H$b,H$c=laya.webgl.submit.SubmitStencil.create(8),H$a.addRenderObject(H$c))},H$i.create=function(H$a){var H$b=H$i._cache._length?H$i._cache[--H$i._cache._length]:new H$i;return 5==(H$b.step=H$a)&&++H$i._mask,H$b.level=H$i._mask,H$b},H$i._cache=((H$i._cache=[])._length=0,H$i._cache),H$i._mask=0,H$i}(),H$la=function(){function H$h(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}H$m(H$h,"laya.webgl.submit.SubmitTarget");var H$a=H$h.prototype;return H$w.imps(H$a,{"laya.webgl.submit.ISubmit":!0}),H$a.renderSubmit=function(){this._vb.bind_upload(this._ib);var H$a=this.scope.getValue(this.proName);return H$a&&(this.shaderValue.texture=H$a.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[H$a.width,H$a.height]),this.shaderValue.upload(),this.blend(),H$E.drawCall++,H$E.trianglesFaces+=this._numEle/3,H$ua.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},H$a.blend=function(){if(H$Q.activeBlendFunction!==H$Q.fns[this.blendType]){var H$a=H$ua.mainContext;H$a.enable(3042),H$Q.fns[this.blendType](H$a),H$Q.activeBlendFunction=H$Q.fns[this.blendType]}},H$a.getRenderType=function(){return 0},H$a.releaseRender=function(){var H$a=H$h._cache;(H$a[H$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},H$h.create=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g=H$h._cache._length?H$h._cache[--H$h._cache._length]:new H$h;return H$g._ib=H$b,H$g._vb=H$c,H$g.proName=H$f,H$g._startIdx=H$d*H$pa.BYTES_PIDX,H$g._numEle=0,H$g.blendType=H$a._nBlendType,H$g.shaderValue=H$e,H$g.shaderValue.setValue(H$a._shader2D),H$g},H$h._cache=((H$h._cache=[])._length=0,H$h._cache),H$h}(),H$ma=function(){function H$a(){this._sourceStr=null}H$m(H$a,"laya.webgl.text.CharSegment");var H$b=H$a.prototype;return H$w.imps(H$b,{"laya.webgl.text.ICharSegment":!0}),H$b.textToSpit=function(H$a){this._sourceStr=H$a},H$b.getChar=function(H$a){return this._sourceStr.charAt(H$a)},H$b.getCharCode=function(H$a){return this._sourceStr.charCodeAt(H$a)},H$b.length=function(){return this._sourceStr.length},H$a}(),H$na=function(){var H$a;function H$E(){}return H$m(H$E,"laya.webgl.text.DrawText"),H$E.__init__=function(){H$E._charsTemp=new Array,H$E._drawValue=new H$a,H$E._charSeg=new H$ma},H$E.customCharSeg=function(H$a){H$E._charSeg=H$a},H$E.getChar=function(H$a,H$b,H$c){var H$d=H$Ta.createOneChar(H$a,H$c);return-1!=H$b&&(H$E._charsCache[H$b]=H$d),H$d},H$E._drawSlow=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j,H$k,H$l,H$m,H$n,H$o){var H$p,H$q,H$r=H$E._drawValue.value(H$f,H$h,H$i,H$j,H$m,H$n,H$o),H$s=0,H$t=0,H$u=H$E._charsTemp,H$v=0,H$w=NaN;if(H$d)for(H$u.length=H$d.length,H$s=0,H$t=H$d.length;H$s<H$t;H$s++)(H$q=H$d[H$s])&&(H$w=H$q.charNum+H$r.txtID,H$u[H$s]=H$p=H$E._charsCache[H$w]||H$E.getChar(H$q.char,H$w,H$r),H$p.active());else{var H$x=H$c instanceof laya.utils.WordText?H$c.toString():H$c;if(H$H.CharacterCache){H$E._charSeg.textToSpit(H$x);var H$y=H$E._charSeg.length();for(H$s=0,H$t=H$u.length=H$y;H$s<H$t;H$s++)H$w=H$E._charSeg.getCharCode(H$s)+H$r.txtID,H$u[H$s]=H$p=H$E._charsCache[H$w]||H$E.getChar(H$E._charSeg.getChar(H$s),H$w,H$r),H$p.active(),H$v+=H$p.cw}else H$u.length=0,(H$p=H$E.getChar(H$x,-1,H$r)).active(),H$v+=H$p.cw,H$u[0]=H$p}var H$z=0;null!==H$g&&"left"!==H$g&&(H$z=-("center"==H$g?H$v/2:H$v));var H$A,H$B,H$C=NaN,H$D=0;if(H$d)for(H$s=0,H$t=H$u.length;H$s<H$t;H$s++)H$p=H$u[H$s],H$q=H$d[H$s],H$p&&H$q&&!H$p.isSpace&&(H$C=H$p.borderSize,H$A=H$p.texture,H$b._drawText(H$A,H$k+H$z+H$q.x*H$m-H$C,H$l+H$q.y*H$n-H$C,H$A.width,H$A.height,H$e,0,0,0,0));else{for(H$s=0,H$t=H$u.length;H$s<H$t;H$s++)(H$p=H$u[H$s])&&!H$p.isSpace&&(H$C=H$p.borderSize,H$A=H$p.texture,H$b._drawText(H$A,H$k+H$z-H$C,H$l-H$C,H$A.width,H$A.height,H$e,0,0,0,0),H$a&&((H$B=H$a[H$D++])||(H$B=H$a[H$D-1]=[]),H$B[0]=H$A,H$B[1]=H$z-H$C,H$B[2]=-H$C)),H$z+=H$p.cw;H$a&&(H$a.length=H$D)}},H$E._drawFast=function(H$a,H$b,H$c,H$d,H$e){for(var H$f,H$g,H$h=0,H$i=H$a.length;H$h<H$i;H$h++)(H$f=(H$g=H$a[H$h])[0]).active(),H$b._drawText(H$f,H$d+H$g[1],H$e+H$g[2],H$f.width,H$f.height,H$c,0,0,0,0)},H$E.drawText=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j,H$k,H$l){if(void 0===H$l&&(H$l=0),!(H$b&&0===H$b.length||H$c&&0===H$c.length)){var H$m=H$d.a,H$n=H$d.d;(0!==H$d.b||0!==H$d.c)&&(H$m=H$n=1);var H$o=1!==H$m||1!==H$n;if(H$o&&H$w.stage.transform){var H$p=H$w.stage.transform;H$o=H$p.a===H$m&&H$p.d===H$n}else H$o=!1;if(H$o){var H$q=(H$d=H$d.copyTo(H$xa._tmpMatrix)).tx,H$r=H$d.ty;H$d.scale(1/H$m,1/H$n),H$d._checkTransform(),H$j*=H$m,H$k*=H$n,H$j+=H$q-H$d.tx,H$k+=H$r-H$d.ty}else H$m=H$n=1;if(H$c)H$E._drawSlow(null,H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j,H$k,H$m,H$n,H$l);else{if(null===H$b.toUpperCase){var H$s=H$m+1e5*H$n,H$t=H$b;return void(H$t.changed||H$t.id!==H$s?(H$t.id=H$s,H$t.changed=!1,H$E._drawSlow(H$t.save,H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j,H$k,H$m,H$n,H$l)):H$E._drawFast(H$t.save,H$a,H$d,H$j,H$k))}var H$u=H$b+H$e.toString()+H$g+H$h+H$i+H$m+H$n+H$f,H$v=H$E._textsCache[H$u];H$H.CharacterCache?H$v?H$E._drawFast(H$v,H$a,H$d,H$j,H$k):(H$E._textsCache.__length||(H$E._textsCache.__length=0),H$E._textsCache.__length>H$x.WebGLTextCacheCount&&((H$E._textsCache={}).__length=0,H$E._curPoolIndex=0),H$E._textCachesPool[H$E._curPoolIndex]?(H$v=H$E._textsCache[H$u]=H$E._textCachesPool[H$E._curPoolIndex]).length=0:H$E._textCachesPool[H$E._curPoolIndex]=H$v=H$E._textsCache[H$u]=[],H$E._textsCache.__length++,H$E._curPoolIndex++,H$E._drawSlow(H$v,H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j,H$k,H$m,H$n,H$l)):H$E._drawSlow(H$v,H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j,H$k,H$m,H$n,H$l)}}},H$E._charsTemp=null,H$E._textCachesPool=[],H$E._curPoolIndex=0,H$E._charsCache={},H$E._textsCache={},H$E._drawValue=null,H$E.d=[],H$E._charSeg=null,H$E.__init$=function(){H$a=function(){function H$i(){}return H$m(H$i,""),H$i.prototype.value=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){this.font=H$a,this.fillColor=H$b,this.borderColor=H$c,this.lineWidth=H$d,this.scaleX=H$e,this.scaleY=H$f,this.underLine=H$g;var H$h=H$a.toString()+H$e+H$f+H$d+(H$b?H$b.toLowerCase():" ")+(H$c?H$c.toLowerCase():" ")+H$g;return this.txtID=H$i._keymap[H$h],this.txtID||(this.txtID=1e-7*++H$i._keymapCount,H$i._keymap[H$h]=this.txtID),this},H$i.clear=function(){H$i._keymap={},H$i._keymapCount=1},H$i._keymap={},H$i._keymapCount=1,H$i}()},H$E}(),H$oa=function(){function H$e(H$a){this._index=0,this._size=14,this._italic=-2,H$e._cache2=H$e._cache2||[],this.setFont(H$a||"14px Arial")}H$m(H$e,"laya.webgl.text.FontInContext");var H$a=H$e.prototype;return H$a.setFont=function(H$a){var H$b=H$e._cache2[H$a];if(H$b)this._words=H$b[0],this._size=H$b[1];else{this._words=H$a.split(" ");for(var H$c=0,H$d=this._words.length;H$c<H$d;H$c++)if(0<this._words[H$c].indexOf("px")){this._index=H$c;break}this._size=parseInt(this._words[this._index]),H$e._cache2[H$a]=[this._words,this._size]}this._text=null,this._italic=-2},H$a.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},H$a.hasType=function(H$a){for(var H$b=0,H$c=this._words.length;H$b<H$c;H$b++)if(this._words[H$b]===H$a)return H$b;return-1},H$a.removeType=function(H$a){for(var H$b=0,H$c=this._words.length;H$b<H$c;H$b++)if(this._words[H$b]===H$a){this._words.splice(H$b,1),this._index>H$b&&this._index--;break}this._text=null,this._italic=-2},H$a.copyTo=function(H$a){return H$a._text=this._text,H$a._size=this._size,H$a._index=this._index,H$a._words=this._words.slice(),H$a._italic=-2,H$a},H$a.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},H$d(0,H$a,"size",function(){return this._size},function(H$a){this._size=H$a,this._words[this._index]=H$a+"px",this._text=null}),H$e.create=function(H$a){var H$b=H$e._cache[H$a];return H$b||(H$b=H$e._cache[H$a]=new H$e(H$a))},H$e.EMPTY=new H$e,H$e._cache={},H$e._cache2=null,H$e}(),H$pa=function(){function H$a(){}return H$m(H$a,"laya.webgl.utils.CONST3D2D"),H$a.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H$a.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],H$a.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],H$a._TMPARRAY=[],H$a._OFFSETX=0,H$a._OFFSETY=0,H$g(H$a,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),H$a}(),H$qa=function(){function H$o(){}return H$m(H$o,"laya.webgl.utils.GlUtils"),H$o.make2DProjection=function(H$a,H$b,H$c){return[2/H$a,0,0,0,0,-2/H$b,0,0,0,0,2/H$c,0,-1,1,0,1]},H$o.fillIBQuadrangle=function(H$a,H$b){if(65535/4<H$b)throw Error("IBQuadrangle count:"+H$b+" must<:"+Math.floor(65535/4));H$b=Math.floor(H$b),H$a._resizeBuffer(6*(H$b+1)*2,!1),H$a.byteLength=H$a.bufferLength;for(var H$c=H$a.getUint16Array(),H$d=0,H$e=0;H$e<H$b;H$e++)H$c[H$d++]=4*H$e,H$c[H$d++]=4*H$e+2,H$c[H$d++]=4*H$e+1,H$c[H$d++]=4*H$e,H$c[H$d++]=4*H$e+3,H$c[H$d++]=4*H$e+2;return H$a.setNeedUpload(),!0},H$o.expandIBQuadrangle=function(H$a,H$b){H$a.bufferLength>=6*H$b*2||H$o.fillIBQuadrangle(H$a,H$b)},H$o.mathCeilPowerOfTwo=function(H$a){return H$a--,H$a|=H$a>>1,H$a|=H$a>>2,H$a|=H$a>>4,H$a|=H$a>>8,H$a|=H$a>>16,++H$a},H$o.fillQuadrangleImgVb=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){var H$i=16+(H$a._byteLength>>2);H$a.byteLength=H$i<<2;var H$j=H$a.getFloat32Array();H$j[(H$i-=16)+2]=H$e[0],H$j[H$i+3]=H$e[1],H$j[H$i+6]=H$e[2],H$j[H$i+7]=H$e[3],H$j[H$i+10]=H$e[4],H$j[H$i+11]=H$e[5],H$j[H$i+14]=H$e[6],H$j[H$i+15]=H$e[7];var H$k=H$f.a,H$l=H$f.b,H$m=H$f.c,H$n=H$f.d;if(1!==H$k||0!==H$l||0!==H$m||1!==H$n){H$f.bTransform=!0;var H$o=H$f.tx+H$g,H$p=H$f.ty+H$h;H$j[H$i]=(H$d[0]+H$b)*H$k+(H$d[1]+H$c)*H$m+H$o,H$j[H$i+1]=(H$d[0]+H$b)*H$l+(H$d[1]+H$c)*H$n+H$p,H$j[H$i+4]=(H$d[2]+H$b)*H$k+(H$d[3]+H$c)*H$m+H$o,H$j[H$i+5]=(H$d[2]+H$b)*H$l+(H$d[3]+H$c)*H$n+H$p,H$j[H$i+8]=(H$d[4]+H$b)*H$k+(H$d[5]+H$c)*H$m+H$o,H$j[H$i+9]=(H$d[4]+H$b)*H$l+(H$d[5]+H$c)*H$n+H$p,H$j[H$i+12]=(H$d[6]+H$b)*H$k+(H$d[7]+H$c)*H$m+H$o,H$j[H$i+13]=(H$d[6]+H$b)*H$l+(H$d[7]+H$c)*H$n+H$p}else H$f.bTransform=!1,H$b+=H$f.tx+H$g,H$c+=H$f.ty+H$h,H$j[H$i]=H$b+H$d[0],H$j[H$i+1]=H$c+H$d[1],H$j[H$i+4]=H$b+H$d[2],H$j[H$i+5]=H$c+H$d[3],H$j[H$i+8]=H$b+H$d[4],H$j[H$i+9]=H$c+H$d[5],H$j[H$i+12]=H$b+H$d[6],H$j[H$i+13]=H$c+H$d[7];return H$a._upload=!0},H$o.fillTranglesVB=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){var H$h=(H$a._byteLength>>2)+H$d.length;H$a.byteLength=H$h<<2;var H$i=H$a.getFloat32Array();H$h-=H$d.length;for(var H$j=H$d.length,H$k=H$e.a,H$l=H$e.b,H$m=H$e.c,H$n=H$e.d,H$o=0;H$o<H$j;H$o+=4)if(H$i[H$h+H$o+2]=H$d[H$o+2],H$i[H$h+H$o+3]=H$d[H$o+3],1!==H$k||0!==H$l||0!==H$m||1!==H$n){H$e.bTransform=!0;var H$p=H$e.tx+H$f,H$q=H$e.ty+H$g;H$i[H$h+H$o]=(H$d[H$o]+H$b)*H$k+(H$d[H$o+1]+H$c)*H$m+H$p,H$i[H$h+H$o+1]=(H$d[H$o]+H$b)*H$l+(H$d[H$o+1]+H$c)*H$n+H$q}else H$e.bTransform=!1,H$b+=H$e.tx+H$f,H$c+=H$e.ty+H$g,H$i[H$h+H$o]=H$b+H$d[H$o],H$i[H$h+H$o+1]=H$c+H$d[H$o+1];return H$a._upload=!0},H$o.copyPreImgVb=function(H$a,H$b,H$c){var H$d=H$a._byteLength>>2;H$a.byteLength=H$d+16<<2;for(var H$e=H$a.getFloat32Array(),H$f=0,H$g=H$d-16;H$f<4;H$f++)H$e[H$d]=H$e[H$g]+H$b,++H$g,H$e[++H$d]=H$e[H$g]+H$c,++H$g,H$e[++H$d]=H$e[H$g],++H$g,H$e[++H$d]=H$e[H$g],++H$d,++H$g;H$a._upload=!0},H$o.fillRectImgVb=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j,H$k,H$l,H$m){void 0===H$m&&(H$m=!1);var H$n,H$o,H$p,H$q,H$r,H$s,H$t,H$u,H$v,H$w,H$x,H$y,H$z,H$A,H$B,H$C,H$D=1,H$E=H$h.a,H$F=H$h.b,H$G=H$h.c,H$H=H$h.d,H$I=H$b&&H$b.width<99999999;if(1!==H$E||0!==H$F||0!==H$G||1!==H$H?(H$h.bTransform=!0,0===H$F&&0===H$G&&(H$D=23,H$v=H$e+H$c,H$w=H$f+H$d,H$n=H$E*H$c+(H$x=H$h.tx+H$i),H$p=H$E*H$v+H$x,H$o=H$H*H$d+(H$y=H$h.ty+H$j),H$q=H$H*H$w+H$y)):(H$D=23,H$h.bTransform=!1,H$p=(H$n=H$c+H$h.tx+H$i)+H$e,H$q=(H$o=H$d+H$h.ty+H$j)+H$f),H$I&&(H$r=H$b.x,H$s=H$b.y,H$t=H$b.width+H$r,H$u=H$b.height+H$s),1!==H$D){if(Math.min(H$n,H$p)>=H$t)return!1;if(Math.min(H$o,H$q)>=H$u)return!1;if(Math.max(H$p,H$n)<=H$r)return!1;if(Math.max(H$q,H$o)<=H$s)return!1}var H$J=H$a._byteLength>>2;H$a.byteLength=16+H$J<<2;var H$K=H$a.getFloat32Array();switch(H$K[2+H$J]=H$g[0],H$K[3+H$J]=H$g[1],H$K[6+H$J]=H$g[2],H$K[7+H$J]=H$g[3],H$K[10+H$J]=H$g[4],H$K[11+H$J]=H$g[5],H$K[14+H$J]=H$g[6],H$K[15+H$J]=H$g[7],H$D){case 1:H$x=H$h.tx+H$i,H$y=H$h.ty+H$j;var H$L=H$E*H$c,H$M=H$G*H$d,H$N=H$H*H$d,H$O=H$F*H$c,H$P=H$E*(H$v=H$e+H$c),H$Q=H$G*(H$w=H$f+H$d),H$R=H$H*H$w,H$S=H$F*H$v;H$m?(H$z=H$L+H$M+H$x,H$B=Math.round(H$z)-H$z,H$A=H$N+H$O+H$y,H$C=Math.round(H$A)-H$A,H$K[H$J]=H$z+H$B,H$K[1+H$J]=H$A+H$C,H$K[4+H$J]=H$P+H$M+H$x+H$B,H$K[5+H$J]=H$N+H$S+H$y+H$C,H$K[8+H$J]=H$P+H$Q+H$x+H$B,H$K[9+H$J]=H$R+H$S+H$y+H$C,H$K[12+H$J]=H$L+H$Q+H$x+H$B,H$K[13+H$J]=H$R+H$O+H$y+H$C):(H$K[H$J]=H$L+H$M+H$x,H$K[1+H$J]=H$N+H$O+H$y,H$K[4+H$J]=H$P+H$M+H$x,H$K[5+H$J]=H$N+H$S+H$y,H$K[8+H$J]=H$P+H$Q+H$x,H$K[9+H$J]=H$R+H$S+H$y,H$K[12+H$J]=H$L+H$Q+H$x,H$K[13+H$J]=H$R+H$O+H$y);break;case 23:H$m?(H$z=H$n+H$k,H$B=Math.round(H$z)-H$z,H$A=H$o,H$C=Math.round(H$A)-H$A,H$K[H$J]=H$z+H$B,H$K[1+H$J]=H$A+H$C,H$K[4+H$J]=H$p+H$k+H$B,H$K[5+H$J]=H$o+H$C,H$K[8+H$J]=H$p+H$B,H$K[9+H$J]=H$q+H$C,H$K[12+H$J]=H$n+H$B,H$K[13+H$J]=H$q+H$C):(H$K[H$J]=H$n+H$k,H$K[1+H$J]=H$o,H$K[4+H$J]=H$p+H$k,H$K[5+H$J]=H$o,H$K[8+H$J]=H$p,H$K[9+H$J]=H$q,H$K[12+H$J]=H$n,H$K[13+H$J]=H$q)}return H$a._upload=!0},H$o.fillLineVb=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){var H$i=.5*H$g,H$j=H$o._fillLineArray,H$k=-(H$d-H$f),H$l=H$c-H$e,H$m=Math.sqrt(H$k*H$k+H$l*H$l);H$k/=H$m,H$l/=H$m,H$k*=H$i,H$l*=H$i,H$j[0]=H$c-H$k,H$j[1]=H$d-H$l,H$j[4]=H$c+H$k,H$j[5]=H$d+H$l,H$j[8]=H$e+H$k,H$j[9]=H$f+H$l,H$j[12]=H$e-H$k,H$j[13]=H$f-H$l,H$h&&H$h.transformPointArray(H$j,H$j);var H$n=16+(H$a._byteLength>>2);return H$a.byteLength=H$n<<2,H$a.insertData(H$j,H$n-16),!0},H$o._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],H$o}(),H$ra=(function(){function H$i(){}H$m(H$i,"laya.webgl.utils.MatirxArray"),H$i.ArrayMul=function(H$a,H$b,H$c){if(H$a)if(H$b)for(var H$d=NaN,H$e=NaN,H$f=NaN,H$g=NaN,H$h=0;H$h<4;H$h++)H$d=H$a[H$h],H$e=H$a[H$h+4],H$f=H$a[H$h+8],H$g=H$a[H$h+12],H$c[H$h]=H$d*H$b[0]+H$e*H$b[1]+H$f*H$b[2]+H$g*H$b[3],H$c[H$h+4]=H$d*H$b[4]+H$e*H$b[5]+H$f*H$b[6]+H$g*H$b[7],H$c[H$h+8]=H$d*H$b[8]+H$e*H$b[9]+H$f*H$b[10]+H$g*H$b[11],H$c[H$h+12]=H$d*H$b[12]+H$e*H$b[13]+H$f*H$b[14]+H$g*H$b[15];else H$i.copyArray(H$a,H$c);else H$i.copyArray(H$b,H$c)},H$i.copyArray=function(H$a,H$b){if(H$a&&H$b)for(var H$c=0;H$c<H$a.length;H$c++)H$b[H$c]=H$a[H$c]}}(),function(){function H$b(H$a,H$b,H$c){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=H$a,this._vb=new H$_a(H$a,35048),H$b&&this._vb._resizeBuffer(H$b,!1),this._ib=new H$$a,H$c&&this._ib._resizeBuffer(H$c,!1)}H$m(H$b,"laya.webgl.utils.Mesh2D");var H$a=H$b.prototype;return H$a.cloneWithNewVB=function(){var H$a=new H$b(this._stride,0,0);return H$a._ib=this._ib,H$a._quadNum=this._quadNum,H$a._attribInfo=this._attribInfo,H$a},H$a.cloneWithNewVBIB=function(){var H$a=new H$b(this._stride,0,0);return H$a._attribInfo=this._attribInfo,H$a},H$a.getVBW=function(){return this._vb.setNeedUpload(),this._vb},H$a.getVBR=function(){return this._vb},H$a.getIBR=function(){return this._ib},H$a.getIBW=function(){return this._ib.setNeedUpload(),this._ib},H$a.createQuadIB=function(H$a){this._quadNum=H$a,this._ib._resizeBuffer(6*H$a*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var H$b=this._ib.getUint16Array(),H$c=0,H$d=0,H$e=0;H$e<H$a;H$e++)H$b[H$c++]=H$d,H$b[H$c++]=H$d+2,H$b[H$c++]=H$d+1,H$b[H$c++]=H$d,H$b[H$c++]=H$d+3,H$b[H$c++]=H$d+2,H$d+=4;this._ib.setNeedUpload()},H$a.setAttributes=function(H$a){if(this._attribInfo=H$a,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},H$a.getEleNum=function(){return this._ib.getBuffer().byteLength/2},H$a.releaseMesh=function(){},H$a.destroy=function(){},H$a.clearVB=function(){this._vb.clear()},H$b._gvaoid=0,H$b}()),H$sa=function(){function H$e(){}return H$m(H$e,"laya.webgl.utils.RenderState2D"),H$e.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},H$e.mat2MatArray=function(H$a,H$b){var H$c=H$a,H$d=H$b;return H$d[0]=H$c.a,H$d[1]=H$c.b,H$d[2]=H$e.EMPTYMAT4_ARRAY[2],H$d[3]=H$e.EMPTYMAT4_ARRAY[3],H$d[4]=H$c.c,H$d[5]=H$c.d,H$d[6]=H$e.EMPTYMAT4_ARRAY[6],H$d[7]=H$e.EMPTYMAT4_ARRAY[7],H$d[8]=H$e.EMPTYMAT4_ARRAY[8],H$d[9]=H$e.EMPTYMAT4_ARRAY[9],H$d[10]=H$e.EMPTYMAT4_ARRAY[10],H$d[11]=H$e.EMPTYMAT4_ARRAY[11],H$d[12]=H$c.tx,H$d[13]=H$c.ty,H$d[14]=H$e.EMPTYMAT4_ARRAY[14],H$d[15]=H$e.EMPTYMAT4_ARRAY[15],H$b},H$e.restoreTempArray=function(){H$e.TEMPMAT4_ARRAY[0]=1,H$e.TEMPMAT4_ARRAY[1]=0,H$e.TEMPMAT4_ARRAY[4]=0,H$e.TEMPMAT4_ARRAY[5]=1,H$e.TEMPMAT4_ARRAY[12]=0,H$e.TEMPMAT4_ARRAY[13]=0},H$e.clear=function(){H$e.worldScissorTest=!1,H$e.worldShaderDefines=null,H$e.worldFilters=null,H$e.worldAlpha=1,H$e.worldClipRect.x=H$e.worldClipRect.y=0,H$e.worldClipRect.width=H$e.width,H$e.worldClipRect.height=H$e.height,H$e.curRenderTarget=null},H$e._MAXSIZE=99999999,H$e.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H$e.worldMatrix4=H$e.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H$e.worldAlpha=1,H$e.worldScissorTest=!1,H$e.worldFilters=null,H$e.worldShaderDefines=null,H$e.curRenderTarget=null,H$e.width=0,H$e.height=0,H$g(H$e,["worldMatrix",function(){return this.worldMatrix=new H$z},"worldClipRect",function(){return this.worldClipRect=new H$B(0,0,99999999,99999999)}]),H$e}(),H$ta=function(){var H$s,H$c;function H$t(H$a,H$b,H$c,H$d,H$e){var H$f=this;function H$g(H$a){var H$b=[],H$c=new H$s(H$b);return H$f._compileToTree(H$c,H$a.split("\n"),0,H$b,H$e),H$c}var H$h=H$n.now();this._VS=H$g(H$b),this._PS=H$g(H$c),this._nameMap=H$d,2<H$n.now()-H$h&&console.log("ShaderCompile use time:"+(H$n.now()-H$h)+"  size:"+H$b.length+"/"+H$c.length)}H$m(H$t,"laya.webgl.utils.ShaderCompile");var H$a=H$t.prototype;return H$a._compileToTree=function(H$a,H$b,H$c,H$d,H$e){var H$f,H$g,H$h,H$i,H$j,H$k,H$l,H$m=0,H$n=0,H$o=0,H$p=0;for(H$n=H$c;H$n<H$b.length;H$n++)if(!((H$h=H$b[H$n]).length<1)&&0!==(H$m=H$h.indexOf("//"))){if(0<=H$m&&(H$h=H$h.substr(0,H$m)),H$f=H$l||new H$s(H$d),H$l=null,H$f.text=H$h,H$f.noCompile=!0,0<=(H$m=H$h.indexOf("#"))){for(H$i="#",H$p=H$m+1,H$o=H$h.length;H$p<H$o;H$p++){var H$q=H$h.charAt(H$p);if(" "===H$q||"\t"===H$q||"\r"===H$q||"\n"===H$q||"?"===H$q)break;H$i+=H$q}switch(H$f.name=H$i){case"#ifdef":case"#ifndef":if(H$f.src=H$h,H$f.noCompile=null!=H$h.match(/[!&|()=<>]/),H$f.noCompile?console.log("function():Boolean{return "+H$h.substr(H$m+H$f.name.length)+"}"):(H$k=H$h.replace(/^\s*/,"").split(/\s+/),H$f.setCondition(H$k[1],"#ifdef"===H$i?1:2),H$f.text="//"+H$f.text),H$f.setParent(H$a),H$a=H$f,H$e)for(H$k=H$h.substr(H$p).split(H$t._splitToWordExps3),H$p=0;H$p<H$k.length;H$p++)(H$h=H$k[H$p]).length&&(H$e[H$h]=!0);continue;case"#if":if(H$f.src=H$h,H$f.noCompile=!0,H$f.setParent(H$a),H$a=H$f,H$e)for(H$k=H$h.substr(H$p).split(H$t._splitToWordExps3),H$p=0;H$p<H$k.length;H$p++)(H$h=H$k[H$p]).length&&"defined"!=H$h&&(H$e[H$h]=!0);continue;case"#else":H$f.src=H$h,H$g=(H$a=H$a.parent).childs[H$a.childs.length-1],H$f.noCompile=H$g.noCompile,H$f.noCompile||(H$f.condition=H$g.condition,H$f.conditionType=1==H$g.conditionType?2:1,H$f.text="//"+H$f.text+" "+H$g.text+" "+H$f.conditionType),H$f.setParent(H$a),H$a=H$f;continue;case"#endif":H$g=(H$a=H$a.parent).childs[H$a.childs.length-1],H$f.noCompile=H$g.noCompile,H$f.noCompile||(H$f.text="//"+H$f.text),H$f.setParent(H$a);continue;case"#include":H$k=H$t.splitToWords(H$h,null);var H$r=H$t.includes[H$k[1]];if(!H$r)throw"ShaderCompile error no this include file:"+H$k[1];if((H$m=H$k[0].indexOf("?"))<0){H$f.setParent(H$a),H$h=H$r.getWith("with"==H$k[2]?H$k[3]:null),this._compileToTree(H$f,H$h.split("\n"),0,H$d,H$e),H$f.text="";continue}H$f.setCondition(H$k[0].substr(H$m+1),1),H$f.text=H$r.getWith("with"==H$k[2]?H$k[3]:null);break;case"#import":H$j=(H$k=H$t.splitToWords(H$h,null))[1],H$d.push({node:H$f,file:H$t.includes[H$j],ofs:H$f.text.length});continue}}else{if((H$g=H$a.childs[H$a.childs.length-1])&&!H$g.name){0<H$d.length&&H$t.splitToWords(H$h,H$g),H$l=H$f,H$g.text+="\n"+H$h;continue}0<H$d.length&&H$t.splitToWords(H$h,H$f)}H$f.setParent(H$a)}},H$a.createShader=function(H$a,H$b,H$c){var H$d={},H$e="";if(H$a)for(var H$f in H$a)H$e+="#define "+H$f+"\n",H$d[H$f]=!0;var H$g=this._VS.toscript(H$d,[]),H$h=this._PS.toscript(H$d,[]);return(H$c||H$Wa.create)(H$e+H$g.join("\n"),H$e+H$h.join("\n"),H$b,this._nameMap)},H$t._parseOne=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g={type:H$t.shaderParamsMap[H$c[H$d+1]],name:H$c[H$d+2],size:isNaN(parseInt(H$c[H$d+3]))?1:parseInt(H$c[H$d+3])};return H$f&&("attribute"==H$e?H$a.push(H$g):H$b.push(H$g)),":"==H$c[H$d+3]&&(H$g.type=H$c[H$d+4],H$d+=2),H$d+=2},H$t.addInclude=function(H$a,H$b){if(!H$b||0===H$b.length)throw new Error("add shader include file err:"+H$a);if(H$t.includes[H$a])throw new Error("add shader include file err, has add:"+H$a);H$t.includes[H$a]=new H$c(H$b)},H$t.preGetParams=function(H$a,H$b){var H$c=[H$a,H$b],H$d={},H$e=[],H$f=[],H$g={},H$h=[];H$d.attributes=H$e,H$d.uniforms=H$f,H$d.defines=H$g;for(var H$i=0,H$j=0,H$k=0;H$k<2;H$k++){H$c[H$k]=H$c[H$k].replace(H$t._removeAnnotation,"");var H$l,H$m=H$c[H$k].match(H$t._reg);for(H$i=0,H$j=H$m.length;H$i<H$j;H$i++){var H$n=H$m[H$i];if("attribute"==H$n||"uniform"==H$n)H$i=H$t._parseOne(H$e,H$f,H$m,H$i,H$n,!0);else{if("#define"==H$n){H$h[H$n=H$m[++H$i]]=1;continue}if("#ifdef"==H$n){H$g[H$l=H$m[++H$i]]=H$g[H$l]||[];for(H$i++;H$i<H$j;H$i++)if("attribute"==(H$n=H$m[H$i])||"uniform"==H$n)H$i=H$t._parseOne(H$e,H$f,H$m,H$i,H$n,H$h[H$l]);else if("#else"==H$n)for(H$i++;H$i<H$j;H$i++)if("attribute"==(H$n=H$m[H$i])||"uniform"==H$n)H$i=H$t._parseOne(H$e,H$f,H$m,H$i,H$n,!H$h[H$l]);else if("#endif"==H$n)break}}}}return H$d},H$t.splitToWords=function(H$a,H$b){for(var H$c,H$d,H$e=[],H$f=-1,H$g=0,H$h=H$a.length;H$g<H$h;H$g++)if(H$c=H$a.charAt(H$g),0<=" \t=+-*/&%!<>()'\",;".indexOf(H$c)){if(0<=H$f&&1<H$g-H$f&&(H$d=H$a.substr(H$f,H$g-H$f),H$e.push(H$d)),'"'==H$c||"'"==H$c){var H$i=H$a.indexOf(H$c,H$g+1);if(H$i<0)throw"Sharder err:"+H$a;H$e.push(H$a.substr(H$g+1,H$i-H$g-1)),H$g=H$i,H$f=-1;continue}"("==H$c&&H$b&&0<H$e.length&&(H$d=H$e[H$e.length-1]+";","vec4;main;".indexOf(H$d)<0&&(H$b.useFuns+=H$d)),H$f=-1}else H$f<0&&(H$f=H$g);return H$f<H$h&&1<H$h-H$f&&(H$d=H$a.substr(H$f,H$h-H$f),H$e.push(H$d)),H$e},H$t.IFDEF_NO=0,H$t.IFDEF_YES=1,H$t.IFDEF_ELSE=2,H$t.IFDEF_PARENT=3,H$t._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),H$t._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),H$t._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),H$t.includes={},H$g(H$t,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),H$t.__init$=function(){H$s=function(){function H$c(H$a){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=H$a}H$m(H$c,"");var H$a=H$c.prototype;return H$a.setParent=function(H$a){H$a.childs.push(this),this.z=H$a.z+1,this.parent=H$a},H$a.setCondition=function(H$a,H$b){H$a&&(this.conditionType=H$b,H$a=H$a.replace(/(\s*$)/g,""),this.condition=function(){return this[H$a]},this.condition.__condition=H$a)},H$a.toscript=function(H$a,H$b){return this._toscript(H$a,H$b,++H$c.__id)},H$a._toscript=function(H$d,H$e,H$f){if(this.childs.length<1&&!this.text)return H$e;H$e.length;if(this.condition){var H$a=!!this.condition.call(H$d);if(2===this.conditionType&&(H$a=!H$a),!H$a)return H$e}if(this.text&&H$e.push(this.text),0<this.childs.length&&this.childs.forEach(function(H$a,H$b,H$c){H$a._toscript(H$d,H$e,H$f)}),0<this.includefiles.length&&0<this.useFuns.length)for(var H$b,H$c=0,H$g=this.includefiles.length;H$c<H$g;H$c++)this.includefiles[H$c].curUseID!=H$f&&0<(H$b=this.includefiles[H$c].file.getFunsScript(this.useFuns)).length&&(this.includefiles[H$c].curUseID=H$f,H$e[0]=H$b+H$e[0]);return H$e},H$c.__id=1,H$c}(),H$c=function(){function H$a(H$a){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=H$a;for(var H$b=0,H$c=0,H$d=0;!((H$b=H$a.indexOf("#begin",H$b))<0);){for(H$d=H$b+5;!((H$d=H$a.indexOf("#end",H$d))<0)&&"i"===H$a.charAt(H$d+4);)H$d+=5;if(H$d<0)throw"add include err,no #end:"+H$a;H$c=H$a.indexOf("\n",H$b);var H$e=H$t.splitToWords(H$a.substr(H$b,H$c-H$b),null);"code"==H$e[1]?this.codes[H$e[2]]=H$a.substr(H$c+1,H$d-H$c-1):"function"==H$e[1]&&(H$c=H$a.indexOf("function",H$b),H$c+="function".length,this.funs[H$e[3]]=H$a.substr(H$c+1,H$d-H$c-1),this.funnames+=H$e[3]+";"),H$b=H$d+1}}H$m(H$a,"");var H$b=H$a.prototype;return H$b.getWith=function(H$a){var H$b=H$a?this.codes[H$a]:this.script;if(!H$b)throw"get with error:"+H$a;return H$b},H$b.getFunsScript=function(H$a){var H$b="";for(var H$c in this.funs)0<=H$a.indexOf(H$c+";")&&(H$b+=this.funs[H$c]);return H$b},H$a}()},H$t}(),H$ua=function(){function H$g(){}return H$m(H$g,"laya.webgl.WebGL"),H$g._uint8ArraySlice=function(){for(var H$a=this.length,H$b=new Uint8Array(this.length),H$c=0;H$c<H$a;H$c++)H$b[H$c]=this[H$c];return H$b},H$g._float32ArraySlice=function(){for(var H$a=this.length,H$b=new Float32Array(this.length),H$c=0;H$c<H$a;H$c++)H$b[H$c]=this[H$c];return H$b},H$g._uint16ArraySlice=function(H$a){var H$b,H$c=arguments,H$d=0,H$e=0;if(0===H$c.length)for(H$d=this.length,H$b=new Uint16Array(H$d),H$e=0;H$e<H$d;H$e++)H$b[H$e]=this[H$e];else if(2===H$c.length){var H$f=H$c[0],H$g=H$c[1];if(H$f<H$g)for(H$d=H$g-H$f,H$b=new Uint16Array(H$d),H$e=H$f;H$e<H$g;H$e++)H$b[H$e-H$f]=this[H$e];else H$b=new Uint16Array(0)}return H$b},H$g.expandContext=function(){var H$a=H$e.prototype,H$b=CanvasRenderingContext2D.prototype;H$b.fillTrangles=H$a.fillTrangles,H$Xa.__int__(null),H$b.setIBVB=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j){void 0===H$i&&(H$i=0),void 0===H$j&&(H$j=0),null===H$c&&(this._ib=this._ib||H$$a.QuadrangleIB,H$c=this._ib,H$qa.expandIBQuadrangle(H$c,H$d._byteLength/64+8)),this._setIBVB(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j)},H$b.fillTrangles=function(H$a,H$b,H$c,H$d,H$e){this._curMat=this._curMat||H$z.create(),this._vb=this._vb||H$_a.create(),this._ib||(this._ib=H$$a.create(),H$qa.fillIBQuadrangle(this._ib,H$g/4));var H$f=this._vb,H$g=H$d.length>>4;H$qa.fillTranglesVB(H$f,H$b,H$c,H$d,H$e||this._curMat,0,0),H$qa.expandIBQuadrangle(this._ib,H$f._byteLength/64+8);var H$h=new H$ya(1,0);H$h.textureHost=H$a;var H$i=new H$Za("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");H$f._vertType=3,this._setIBVB(H$b,H$c,this._ib,H$f,6*H$g,H$e,H$i,H$h,0,0)}},H$g.enable=function(){if(H$n.__init__(),H$r.isConchApp&&!H$r.isConchWebGL)return H$v.skinAniSprite=function(){return new H$aa},H$g.expandContext(),!1;if(H$v.getWebGLContext=function(H$a){for(var H$b,H$c=["webgl","experimental-webgl","webkit-3d","moz-webgl"],H$d=0;H$d<H$c.length;H$d++){try{H$b=H$a.getContext(H$c[H$d],{stencil:H$x.isStencil,alpha:H$x.isAlpha,antialias:H$x.isAntialias,premultipliedAlpha:H$x.premultipliedAlpha,preserveDrawingBuffer:H$x.preserveDrawingBuffer})}catch(H$a){}if(H$b)return H$b}return null},null==(H$g.mainContext=H$v.getWebGLContext(H$r._mainCanvas)))return!1;if(H$r.isWebGL)return!0;H$p.create=function(H$a,H$b){return new H$ab(H$a,H$b)},H$q.create=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){return new H$Va(H$a,H$b,H$c,H$d,H$e,H$f,H$g)},H$r.WebGL=H$g,H$r.isWebGL=!0,H$na.__init__(),H$v.createRenderSprite=function(H$a,H$b){return new H$za(H$a,H$b)},H$v.createWebGLContext2D=function(H$a){return new H$xa(H$a)},H$v.changeWebGLSize=function(H$a,H$b){laya.webgl.WebGL.onStageResize(H$a,H$b)},H$v.createGraphics=function(){return new H$wa};var H$a=H$v.createFilterAction;return H$v.createFilterAction=H$a||function(H$a){return new H$Aa},H$v.clear=function(H$a){H$sa.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var H$b=H$r.context.ctx,H$c=0==H$b._submits._length||H$x.preserveDrawingBuffer?H$o.create(H$a)._color:H$D._wgColor;H$c&&H$b.clearBG(H$c[0],H$c[1],H$c[2],H$c[3]),H$sa.clear()},H$v.addToAtlas=function(H$a,H$b){void 0===H$b&&(H$b=!1);var H$c=H$a.bitmap;H$r.optimizeTextureMemory(H$a.url,H$a)?H$w.__typeof(H$c,"laya.webgl.resource.IMergeAtlasBitmap")&&H$c.allowMerageInAtlas&&H$c.on("recovered",H$a,H$a.addTextureToAtlas):H$c.enableMerageInAtlas=!1},H$v.isAtlas=function(H$a){return H$a instanceof laya.webgl.atlas.AtlasWebGLCanvas},H$O._enable(),H$v.beginFlush=function(){for(var H$a=H$O.instance,H$b=H$a.getAtlaserCount(),H$c=0;H$c<H$b;H$c++){var H$d=H$a.getAtlaserByIndex(H$c).texture;H$d._flashCacheImageNeedFlush&&H$v.flashFlushImage(H$d)}},H$v.drawToCanvas=function(H$a,H$b,H$c,H$d,H$e,H$f){(H$c<=0||H$d<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),H$c|=0,H$d|=0,H$e|=0,H$f|=0;var H$g=H$Ka.create(H$c,H$d,6408,5121,0,!1);H$g.start(),H$g.clear(0,0,0,0),H$r.context.clear(),H$s.renders[H$b]._fun(H$a,H$r.context,H$e,H$sa.height-H$d+H$f),H$r.context.flush(),H$g.end();var H$h=H$g.getData(0,0,H$c,H$d);if(H$g.recycle(),H$h.byteLength==H$c*H$d*4){var H$i=new H$Sa;H$i._canvas=H$n.createElement("canvas"),H$i.size(H$c,H$d);var H$j=H$i._canvas.getContext("2d");H$n.canvas.size(H$c,H$d);var H$k=H$n.context,H$l=H$k.createImageData(H$c,H$d);return H$l.data.set(new Uint8ClampedArray(H$h.buffer)),H$i._imgData=H$l,H$k.putImageData(H$l,0,0),H$j.save(),H$j.translate(0,H$d),H$j.scale(1,-1),H$j.drawImage(H$n.canvas.source,0,0),H$j.restore(),H$i}console.log("drawToCanvas error: w:"+H$c+",h:"+H$d+",datalen:"+H$h.byteLength)},H$v.createFilterAction=function(H$a){var H$b;switch(H$a){case 32:H$b=new H$Aa}return H$b},H$v.addTextureToAtlas=function(H$a){H$a._uvID++,H$O._atlasRestore++,H$a.bitmap.enableMerageInAtlas&&H$O.instance.addToAtlas(H$a)},H$v.getTexturePixels=function(H$a,H$b,H$c,H$d,H$e){H$r.context.ctx.clear();var H$f=new H$C;H$f.graphics.drawTexture(H$a,-H$b,-H$c);var H$g=H$Ka.create(H$d,H$e);H$g.start(),H$g.clear(0,0,0,0),H$f.render(H$r.context,0,0),H$r.context.ctx.flush(),H$g.end();for(var H$h=H$g.getData(0,0,H$d,H$e),H$i=[],H$j=0,H$k=H$e-1;0<=H$k;H$k--)for(var H$l=0;H$l<H$d;H$l++)H$j=4*(H$k*H$d+H$l),H$i.push(H$h[H$j]),H$i.push(H$h[H$j+1]),H$i.push(H$h[H$j+2]),H$i.push(H$h[H$j+3]);return H$i},H$v.skinAniSprite=function(){return new H$aa},H$j.create=function(H$a,H$b){var H$c=new H$Sa;return H$c._imgData=H$b,H$c.flipY=!1,H$c},H$y._filterStart=function(H$a,H$b,H$c,H$d,H$e){var H$f=H$a.getValue("bounds"),H$g=H$Ka.create(H$f.width,H$f.height);if(H$g.start(),H$g.clear(0,0,0,0),H$a.addValue("src",H$g),H$a.addValue("ScissorTest",H$sa.worldScissorTest),H$sa.worldScissorTest){var H$h=new H$B;H$h.copyFrom(H$c.ctx._clipRect),H$a.addValue("clipRect",H$h),H$sa.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},H$y._filterEnd=function(H$a,H$b,H$c,H$d,H$e){var H$f=H$a.getValue("bounds");H$a.getValue("src").end();var H$g=H$Ka.create(H$f.width,H$f.height);H$g.start(),H$g.clear(0,0,0,0),H$a.addValue("out",H$g),H$b._set$P("_filterCache",H$g),H$b._set$P("_isHaveGlowFilter",H$a.getValue("_isHaveGlowFilter"))},H$y._EndTarget=function(H$a,H$b){if(H$a.getValue("src").recycle(),H$a.getValue("out").end(),H$a.getValue("ScissorTest")){H$sa.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),H$b.ctx.save();var H$c=H$a.getValue("clipRect");H$b.ctx.clipRect(H$c.x,H$c.y,H$c.width,H$c.height)}},H$y._useSrc=function(H$a){var H$b=H$a.getValue("out");H$b.end(),(H$b=H$a.getValue("src")).start(),H$b.clear(0,0,0,0)},H$y._endSrc=function(H$a){H$a.getValue("src").end()},H$y._useOut=function(H$a){var H$b=H$a.getValue("src");H$b.end(),(H$b=H$a.getValue("out")).start(),H$b.clear(0,0,0,0)},H$y._endOut=function(H$a){H$a.getValue("out").end()},H$y._recycleScope=function(H$a){H$a.recycle()},H$y._filter=function(H$a,H$b,H$c,H$d){var H$e=this._next;if(H$e){var H$f,H$g,H$h=H$a.filters,H$i=H$h.length;if(1==H$i&&32==H$h[0].type)return H$b.ctx.save(),H$b.ctx.setFilters([H$h[0]]),H$e._fun.call(H$e,H$a,H$b,H$c,H$d),void H$b.ctx.restore();var H$j=H$ha.create(),H$k=H$A.TEMP,H$l=H$b.ctx._getTransformMatrix(),H$m=H$z.create();H$l.copyTo(H$m);var H$n=0,H$o=0,H$p=!1,H$q=H$a._$P._filterCache?H$a._$P._filterCache:null;if(!H$q||H$a._repaint){H$p=H$a._isHaveGlowFilter(),H$j.addValue("_isHaveGlowFilter",H$p),H$p&&(H$n=50,H$o=25),(H$g=new H$B).copyFrom(H$a.getSelfBounds()),H$g.x+=H$a.x,H$g.y+=H$a.y,H$g.x-=H$a.pivotX+4,H$g.y-=H$a.pivotY+4;var H$r=H$g.x,H$s=H$g.y;if(H$g.width+=H$n+8,H$g.height+=H$n+8,H$k.x=H$g.x*H$m.a+H$g.y*H$m.c,H$k.y=H$g.y*H$m.d+H$g.x*H$m.b,H$g.x=H$k.x,H$g.y=H$k.y,H$k.x=H$g.width*H$m.a+H$g.height*H$m.c,H$k.y=H$g.height*H$m.d+H$g.width*H$m.b,H$g.width=H$k.x,H$g.height=H$k.y,H$g.width<=0||H$g.height<=0)return;H$q&&H$q.recycle(),H$j.addValue("bounds",H$g);var H$t=H$ga.create([H$j,H$a,H$b,0,0],H$y._filterStart);H$b.addRenderObject(H$t),H$b.ctx._renderKey=0,H$b.ctx._shader2D.glTexture=null;var H$u=H$a.x-H$r+H$o,H$v=H$a.y-H$s+H$o;H$e._fun.call(H$e,H$a,H$b,H$u,H$v),H$t=H$ga.create([H$j,H$a,H$b,0,0],H$y._filterEnd),H$b.addRenderObject(H$t);for(var H$w=0;H$w<H$i;H$w++){0!=H$w&&(H$t=H$ga.create([H$j],H$y._useSrc),H$b.addRenderObject(H$t),H$f=H$ya.create(1,0),H$z.TEMP.identity(),H$b.ctx.drawTarget(H$j,0,0,H$g.width,H$g.height,H$z.TEMP,"out",H$f,null,H$Q.TOINT.overlay),H$t=H$ga.create([H$j],H$y._useOut),H$b.addRenderObject(H$t)),H$h[H$w].action.apply3d(H$j,H$a,H$b,0,0)}H$t=H$ga.create([H$j,H$b],H$y._EndTarget),H$b.addRenderObject(H$t)}else{if((H$p=!!H$a._$P._isHaveGlowFilter&&H$a._$P._isHaveGlowFilter)&&(H$n=50,H$o=25),(H$g=H$a.getBounds()).width<=0||H$g.height<=0)return;H$g.width+=H$n,H$g.height+=H$n,H$k.x=H$g.x*H$m.a+H$g.y*H$m.c,H$k.y=H$g.y*H$m.d+H$g.x*H$m.b,H$g.x=H$k.x,H$g.y=H$k.y,H$k.x=H$g.width*H$m.a+H$g.height*H$m.c,H$k.y=H$g.height*H$m.d+H$g.width*H$m.b,H$g.width=H$k.x,H$g.height=H$k.y,H$j.addValue("out",H$q)}H$c=H$c-H$o-H$a.x,H$d=H$d-H$o-H$a.y,H$k.setTo(H$c,H$d),H$m.transformPoint(H$k),H$c=H$k.x+H$g.x,H$d=H$k.y+H$g.y,H$f=H$ya.create(1,0),H$z.TEMP.identity(),H$b.ctx.drawTarget(H$j,H$c,H$d,H$g.width,H$g.height,H$z.TEMP,"out",H$f,null,H$Q.TOINT.overlay),H$t=H$ga.create([H$j],H$y._recycleScope),H$b.addRenderObject(H$t),H$m.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=H$g._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=H$g._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=H$g._uint8ArraySlice),!0},H$g.onStageResize=function(H$a,H$b){null!=H$g.mainContext&&(H$g.mainContext.viewport(0,0,H$a,H$b),H$sa.width=H$a,H$sa.height=H$b)},H$g.onInvalidGLRes=function(){H$O.instance.freeAll(),H$u.releaseContentManagers(!0),H$g.doNodeRepaint(H$w.stage),H$g.mainContext.viewport(0,0,H$sa.width,H$sa.height),H$w.stage.event("devicelost")},H$g.doNodeRepaint=function(H$a){0==H$a.numChildren&&H$a.repaint();for(var H$b=0;H$b<H$a.numChildren;H$b++)H$g.doNodeRepaint(H$a.getChildAt(H$b))},H$g.init=function(H$a,H$b,H$c){H$g.mainCanvas=H$a,H$j._createContext=function(H$a){return new H$xa(H$a)},H$Sa._createContext=function(H$a){return new H$xa(H$a)};var H$d=laya.webgl.WebGL.mainContext;if(null!=H$d.getShaderPrecisionFormat){var H$e=H$d.getShaderPrecisionFormat(35633,36338),H$f=H$d.getShaderPrecisionFormat(35632,36338);H$g.shaderHighPrecision=!(!H$e.precision||!H$f.precision)}else H$g.shaderHighPrecision=!1;if(H$d.deleteTexture1=H$d.deleteTexture,H$d.deleteTexture=function(H$a){H$a==H$va.curBindTexValue&&(H$va.curBindTexValue=null),H$d.deleteTexture1(H$a)},H$g.onStageResize(H$b,H$c),null==H$g.mainContext)throw new Error("webGL getContext err!");H$G.__init__(),H$O.__init__(),H$Ca.__init__(),H$fa.__init__(),H$xa.__init__(),H$ya.__init__(),H$$.__init__(),H$Xa.__int__(H$d),H$Q._init_(H$d),H$r.isConchApp&&conch.setOnInvalidGLRes(H$g.onInvalidGLRes)},H$g.mainCanvas=null,H$g.mainContext=null,H$g.antialias=!0,H$g.shaderHighPrecision=!1,H$g._bg_null=[0,0,0,0],H$g}(),H$va=function(){function H$d(){}return H$m(H$d,"laya.webgl.WebGLContext"),H$d.UseProgram=function(H$a){return H$d._useProgram!==H$a&&(H$ua.mainContext.useProgram(H$a),H$d._useProgram=H$a,!0)},H$d.setDepthTest=function(H$a,H$b){H$b!==H$d._depthTest&&((H$d._depthTest=H$b)?H$a.enable(2929):H$a.disable(2929))},H$d.setDepthMask=function(H$a,H$b){H$b!==H$d._depthMask&&(H$d._depthMask=H$b,H$a.depthMask(H$b))},H$d.setDepthFunc=function(H$a,H$b){H$b!==H$d._depthFunc&&(H$d._depthFunc=H$b,H$a.depthFunc(H$b))},H$d.setBlend=function(H$a,H$b){H$b!==H$d._blend&&((H$d._blend=H$b)?H$a.enable(3042):H$a.disable(3042))},H$d.setBlendFunc=function(H$a,H$b,H$c){(H$b!==H$d._sFactor||H$c!==H$d._dFactor)&&(H$d._sFactor=H$b,H$d._dFactor=H$c,H$a.blendFunc(H$b,H$c))},H$d.setCullFace=function(H$a,H$b){H$b!==H$d._cullFace&&((H$d._cullFace=H$b)?H$a.enable(2884):H$a.disable(2884))},H$d.setFrontFace=function(H$a,H$b){H$b!==H$d._frontFace&&(H$d._frontFace=H$b,H$a.frontFace(H$b))},H$d.bindTexture=function(H$a,H$b,H$c){H$a.bindTexture(H$b,H$c),H$d.curBindTexTarget=H$b,H$d.curBindTexValue=H$c},H$d.DEPTH_BUFFER_BIT=256,H$d.STENCIL_BUFFER_BIT=1024,H$d.COLOR_BUFFER_BIT=16384,H$d.POINTS=0,H$d.LINES=1,H$d.LINE_LOOP=2,H$d.LINE_STRIP=3,H$d.TRIANGLES=4,H$d.TRIANGLE_STRIP=5,H$d.TRIANGLE_FAN=6,H$d.ZERO=0,H$d.ONE=1,H$d.SRC_COLOR=768,H$d.ONE_MINUS_SRC_COLOR=769,H$d.SRC_ALPHA=770,H$d.ONE_MINUS_SRC_ALPHA=771,H$d.DST_ALPHA=772,H$d.ONE_MINUS_DST_ALPHA=773,H$d.DST_COLOR=774,H$d.ONE_MINUS_DST_COLOR=775,H$d.SRC_ALPHA_SATURATE=776,H$d.FUNC_ADD=32774,H$d.BLEND_EQUATION=32777,H$d.BLEND_EQUATION_RGB=32777,H$d.BLEND_EQUATION_ALPHA=34877,H$d.FUNC_SUBTRACT=32778,H$d.FUNC_REVERSE_SUBTRACT=32779,H$d.BLEND_DST_RGB=32968,H$d.BLEND_SRC_RGB=32969,H$d.BLEND_DST_ALPHA=32970,H$d.BLEND_SRC_ALPHA=32971,H$d.CONSTANT_COLOR=32769,H$d.ONE_MINUS_CONSTANT_COLOR=32770,H$d.CONSTANT_ALPHA=32771,H$d.ONE_MINUS_CONSTANT_ALPHA=32772,H$d.BLEND_COLOR=32773,H$d.ARRAY_BUFFER=34962,H$d.ELEMENT_ARRAY_BUFFER=34963,H$d.ARRAY_BUFFER_BINDING=34964,H$d.ELEMENT_ARRAY_BUFFER_BINDING=34965,H$d.STREAM_DRAW=35040,H$d.STATIC_DRAW=35044,H$d.DYNAMIC_DRAW=35048,H$d.BUFFER_SIZE=34660,H$d.BUFFER_USAGE=34661,H$d.CURRENT_VERTEX_ATTRIB=34342,H$d.FRONT=1028,H$d.BACK=1029,H$d.CULL_FACE=2884,H$d.FRONT_AND_BACK=1032,H$d.BLEND=3042,H$d.DITHER=3024,H$d.STENCIL_TEST=2960,H$d.DEPTH_TEST=2929,H$d.SCISSOR_TEST=3089,H$d.POLYGON_OFFSET_FILL=32823,H$d.SAMPLE_ALPHA_TO_COVERAGE=32926,H$d.SAMPLE_COVERAGE=32928,H$d.NO_ERROR=0,H$d.INVALID_ENUM=1280,H$d.INVALID_VALUE=1281,H$d.INVALID_OPERATION=1282,H$d.OUT_OF_MEMORY=1285,H$d.CW=2304,H$d.CCW=2305,H$d.LINE_WIDTH=2849,H$d.ALIASED_POINT_SIZE_RANGE=33901,H$d.ALIASED_LINE_WIDTH_RANGE=33902,H$d.CULL_FACE_MODE=2885,H$d.FRONT_FACE=2886,H$d.DEPTH_RANGE=2928,H$d.DEPTH_WRITEMASK=2930,H$d.DEPTH_CLEAR_VALUE=2931,H$d.DEPTH_FUNC=2932,H$d.STENCIL_CLEAR_VALUE=2961,H$d.STENCIL_FUNC=2962,H$d.STENCIL_FAIL=2964,H$d.STENCIL_PASS_DEPTH_FAIL=2965,H$d.STENCIL_PASS_DEPTH_PASS=2966,H$d.STENCIL_REF=2967,H$d.STENCIL_VALUE_MASK=2963,H$d.STENCIL_WRITEMASK=2968,H$d.STENCIL_BACK_FUNC=34816,H$d.STENCIL_BACK_FAIL=34817,H$d.STENCIL_BACK_PASS_DEPTH_FAIL=34818,H$d.STENCIL_BACK_PASS_DEPTH_PASS=34819,H$d.STENCIL_BACK_REF=36003,H$d.STENCIL_BACK_VALUE_MASK=36004,H$d.STENCIL_BACK_WRITEMASK=36005,H$d.VIEWPORT=2978,H$d.SCISSOR_BOX=3088,H$d.COLOR_CLEAR_VALUE=3106,H$d.COLOR_WRITEMASK=3107,H$d.UNPACK_ALIGNMENT=3317,H$d.PACK_ALIGNMENT=3333,H$d.MAX_TEXTURE_SIZE=3379,H$d.MAX_VIEWPORT_DIMS=3386,H$d.SUBPIXEL_BITS=3408,H$d.RED_BITS=3410,H$d.GREEN_BITS=3411,H$d.BLUE_BITS=3412,H$d.ALPHA_BITS=3413,H$d.DEPTH_BITS=3414,H$d.STENCIL_BITS=3415,H$d.POLYGON_OFFSET_UNITS=10752,H$d.POLYGON_OFFSET_FACTOR=32824,H$d.TEXTURE_BINDING_2D=32873,H$d.SAMPLE_BUFFERS=32936,H$d.SAMPLES=32937,H$d.SAMPLE_COVERAGE_VALUE=32938,H$d.SAMPLE_COVERAGE_INVERT=32939,H$d.NUM_COMPRESSED_TEXTURE_FORMATS=34466,H$d.COMPRESSED_TEXTURE_FORMATS=34467,H$d.DONT_CARE=4352,H$d.FASTEST=4353,H$d.NICEST=4354,H$d.GENERATE_MIPMAP_HINT=33170,H$d.BYTE=5120,H$d.UNSIGNED_BYTE=5121,H$d.SHORT=5122,H$d.UNSIGNED_SHORT=5123,H$d.INT=5124,H$d.UNSIGNED_INT=5125,H$d.FLOAT=5126,H$d.DEPTH_COMPONENT=6402,H$d.ALPHA=6406,H$d.RGB=6407,H$d.RGBA=6408,H$d.LUMINANCE=6409,H$d.LUMINANCE_ALPHA=6410,H$d.UNSIGNED_SHORT_4_4_4_4=32819,H$d.UNSIGNED_SHORT_5_5_5_1=32820,H$d.UNSIGNED_SHORT_5_6_5=33635,H$d.FRAGMENT_SHADER=35632,H$d.VERTEX_SHADER=35633,H$d.MAX_VERTEX_ATTRIBS=34921,H$d.MAX_VERTEX_UNIFORM_VECTORS=36347,H$d.MAX_VARYING_VECTORS=36348,H$d.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,H$d.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,H$d.MAX_TEXTURE_IMAGE_UNITS=34930,H$d.MAX_FRAGMENT_UNIFORM_VECTORS=36349,H$d.SHADER_TYPE=35663,H$d.DELETE_STATUS=35712,H$d.LINK_STATUS=35714,H$d.VALIDATE_STATUS=35715,H$d.ATTACHED_SHADERS=35717,H$d.ACTIVE_UNIFORMS=35718,H$d.ACTIVE_ATTRIBUTES=35721,H$d.SHADING_LANGUAGE_VERSION=35724,H$d.CURRENT_PROGRAM=35725,H$d.NEVER=512,H$d.LESS=513,H$d.EQUAL=514,H$d.LEQUAL=515,H$d.GREATER=516,H$d.NOTEQUAL=517,H$d.GEQUAL=518,H$d.ALWAYS=519,H$d.KEEP=7680,H$d.REPLACE=7681,H$d.INCR=7682,H$d.DECR=7683,H$d.INVERT=5386,H$d.INCR_WRAP=34055,H$d.DECR_WRAP=34056,H$d.VENDOR=7936,H$d.RENDERER=7937,H$d.VERSION=7938,H$d.NEAREST=9728,H$d.LINEAR=9729,H$d.NEAREST_MIPMAP_NEAREST=9984,H$d.LINEAR_MIPMAP_NEAREST=9985,H$d.NEAREST_MIPMAP_LINEAR=9986,H$d.LINEAR_MIPMAP_LINEAR=9987,H$d.TEXTURE_MAG_FILTER=10240,H$d.TEXTURE_MIN_FILTER=10241,H$d.TEXTURE_WRAP_S=10242,H$d.TEXTURE_WRAP_T=10243,H$d.TEXTURE_2D=3553,H$d.TEXTURE=5890,H$d.TEXTURE_CUBE_MAP=34067,H$d.TEXTURE_BINDING_CUBE_MAP=34068,H$d.TEXTURE_CUBE_MAP_POSITIVE_X=34069,H$d.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,H$d.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,H$d.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,H$d.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,H$d.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,H$d.MAX_CUBE_MAP_TEXTURE_SIZE=34076,H$d.TEXTURE0=33984,H$d.TEXTURE1=33985,H$d.TEXTURE2=33986,H$d.TEXTURE3=33987,H$d.TEXTURE4=33988,H$d.TEXTURE5=33989,H$d.TEXTURE6=33990,H$d.TEXTURE7=33991,H$d.TEXTURE8=33992,H$d.TEXTURE9=33993,H$d.TEXTURE10=33994,H$d.TEXTURE11=33995,H$d.TEXTURE12=33996,H$d.TEXTURE13=33997,H$d.TEXTURE14=33998,H$d.TEXTURE15=33999,H$d.TEXTURE16=34e3,H$d.TEXTURE17=34001,H$d.TEXTURE18=34002,H$d.TEXTURE19=34003,H$d.TEXTURE20=34004,H$d.TEXTURE21=34005,H$d.TEXTURE22=34006,H$d.TEXTURE23=34007,H$d.TEXTURE24=34008,H$d.TEXTURE25=34009,H$d.TEXTURE26=34010,H$d.TEXTURE27=34011,H$d.TEXTURE28=34012,H$d.TEXTURE29=34013,H$d.TEXTURE30=34014,H$d.TEXTURE31=34015,H$d.ACTIVE_TEXTURE=34016,H$d.REPEAT=10497,H$d.CLAMP_TO_EDGE=33071,H$d.MIRRORED_REPEAT=33648,H$d.FLOAT_VEC2=35664,H$d.FLOAT_VEC3=35665,H$d.FLOAT_VEC4=35666,H$d.INT_VEC2=35667,H$d.INT_VEC3=35668,H$d.INT_VEC4=35669,H$d.BOOL=35670,H$d.BOOL_VEC2=35671,H$d.BOOL_VEC3=35672,H$d.BOOL_VEC4=35673,H$d.FLOAT_MAT2=35674,H$d.FLOAT_MAT3=35675,H$d.FLOAT_MAT4=35676,H$d.SAMPLER_2D=35678,H$d.SAMPLER_CUBE=35680,H$d.VERTEX_ATTRIB_ARRAY_ENABLED=34338,H$d.VERTEX_ATTRIB_ARRAY_SIZE=34339,H$d.VERTEX_ATTRIB_ARRAY_STRIDE=34340,H$d.VERTEX_ATTRIB_ARRAY_TYPE=34341,H$d.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,H$d.VERTEX_ATTRIB_ARRAY_POINTER=34373,H$d.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,H$d.COMPILE_STATUS=35713,H$d.LOW_FLOAT=36336,H$d.MEDIUM_FLOAT=36337,H$d.HIGH_FLOAT=36338,H$d.LOW_INT=36339,H$d.MEDIUM_INT=36340,H$d.HIGH_INT=36341,H$d.FRAMEBUFFER=36160,H$d.RENDERBUFFER=36161,H$d.RGBA4=32854,H$d.RGB5_A1=32855,H$d.RGB565=36194,H$d.DEPTH_COMPONENT16=33189,H$d.STENCIL_INDEX=6401,H$d.STENCIL_INDEX8=36168,H$d.DEPTH_STENCIL=34041,H$d.RENDERBUFFER_WIDTH=36162,H$d.RENDERBUFFER_HEIGHT=36163,H$d.RENDERBUFFER_INTERNAL_FORMAT=36164,H$d.RENDERBUFFER_RED_SIZE=36176,H$d.RENDERBUFFER_GREEN_SIZE=36177,H$d.RENDERBUFFER_BLUE_SIZE=36178,H$d.RENDERBUFFER_ALPHA_SIZE=36179,H$d.RENDERBUFFER_DEPTH_SIZE=36180,H$d.RENDERBUFFER_STENCIL_SIZE=36181,H$d.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,H$d.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,H$d.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,H$d.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,H$d.COLOR_ATTACHMENT0=36064,H$d.DEPTH_ATTACHMENT=36096,H$d.STENCIL_ATTACHMENT=36128,H$d.DEPTH_STENCIL_ATTACHMENT=33306,H$d.NONE=0,H$d.FRAMEBUFFER_COMPLETE=36053,H$d.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,H$d.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,H$d.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,H$d.FRAMEBUFFER_UNSUPPORTED=36061,H$d.FRAMEBUFFER_BINDING=36006,H$d.RENDERBUFFER_BINDING=36007,H$d.MAX_RENDERBUFFER_SIZE=34024,H$d.INVALID_FRAMEBUFFER_OPERATION=1286,H$d.UNPACK_FLIP_Y_WEBGL=37440,H$d.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,H$d.CONTEXT_LOST_WEBGL=37442,H$d.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,H$d.BROWSER_DEFAULT_WEBGL=37444,H$d._useProgram=null,H$d._depthTest=!0,H$d._depthMask=!0,H$d._blend=!1,H$d._cullFace=!1,H$d.curBindTexTarget=null,H$d.curBindTexValue=null,H$g(H$d,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),H$d}(),H$wa=function(H$a){function H$b(){H$b.__super.call(this)}H$m(H$b,"laya.webgl.display.GraphicsGL",H$h);var H$c=H$b.prototype;return H$c.setShader=function(H$a){this._saveToCmd(H$r.context._setShader,[H$a])},H$c.setIBVB=function(H$a,H$b,H$c,H$d,H$e,H$f){this._saveToCmd(H$r.context._setIBVB,[H$a,H$b,H$c,H$d,H$e,H$f])},H$c.drawParticle=function(H$a,H$b,H$c){var H$d=H$v.createParticleTemplate2D(H$c);H$d.x=H$a,H$d.y=H$b,this._saveToCmd(H$r.context._drawParticle,[H$d])},H$b}(),H$xa=function(H$a){var H$c;function H$N(H$a){this._x=0,this._y=0,this._id=++H$N._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,H$N.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=H$N.MAXCLIPRECT,this.mOutPoint,this._canvas=H$a,this._canvas._addReference(),H$N._contextcount++,H$r.isFlash?(this._ib=H$$a.create(35044),H$qa.fillIBQuadrangle(this._ib,16)):this._ib=H$$a.QuadrangleIB,this.clear()}H$m(H$N,"laya.webgl.canvas.WebGLContext2D",H$e);var H$b=H$N.prototype;return H$b.setIsMainContext=function(){this._isMain=!0},H$b.clearBG=function(H$a,H$b,H$c,H$d){var H$e=H$ua.mainContext;H$e.clearColor(H$a,H$b,H$c,H$d),H$e.clear(16384)},H$b._getSubmits=function(){return this._submits},H$b._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var H$a=0,H$b=this._submits._length;H$a<H$b;H$a++)this._submits[H$a].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},H$b.destroy=function(){--H$N._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=H$$a.QuadrangleIB&&this._ib.releaseResource()},H$b.clear=function(){this._submits||(this._other=H$c.DEFAULT,this._curMat=H$z.create(),this._vb=H$_a.create(-1),this._submits=[],this._save=[H$W.Create(this)],this._save.length=10,this._shader2D=new H$$,this._triangleMesh=H$Ia.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=H$c.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=H$N.MAXCLIPRECT,this._curSubmit=H$fa.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=H$R.DEFAULT;for(var H$a=0,H$b=this._submits._length;H$a<H$b;H$a++)this._submits[H$a].releaseRender(),this._submits[H$a]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},H$b.size=function(H$a,H$b){if(this._width!=H$a||this._height!=H$b)if(0==H$a||0==H$b){0!=this._vb._byteLength&&(this._width=H$a,this._height=H$b,this._vb.clear(),this._vb.upload());for(var H$c=0,H$d=this._submits._length;H$c<H$d;H$c++)this._submits[H$c].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=H$a,this._height=H$b,this._targets&&this._targets.size(H$a,H$b),this._canvas.memorySize-=this._canvas.memorySize;0===H$a&&0===H$b&&this._releaseMem()},H$b._getTransformMatrix=function(){return this._curMat},H$b.translate=function(H$a,H$b){0===H$a&&0===H$b||(H$Y.save(this),this._curMat.bTransform&&(H$X.save(this),this._curMat.transformPointN(H$A.TEMP.setTo(H$a,H$b)),H$a=H$A.TEMP.x,H$b=H$A.TEMP.y),this._x+=H$a,this._y+=H$b)},H$b.save=function(){this._save[this._save._length++]=H$W.Create(this)},H$b.restore=function(){var H$a=this._save._length;if(!(H$a<1))for(var H$b=H$a-1;0<=H$b;H$b--){var H$c=this._save[H$b];if(H$c.restore(this),H$c.isSaveMark())return void(this._save._length=H$b)}},H$b._fillText=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j){void 0===H$j&&(H$j=0);var H$k=this._shader2D,H$l=this._curSubmit.shaderValue,H$m=H$e?H$oa.create(H$e):this._other.font;if(H$O.enabled)H$k.ALPHA!==H$l.ALPHA&&(H$k.glTexture=null),H$na.drawText(this,H$a,H$b,this._curMat,H$m,H$i||this._other.textAlign,H$f,H$g,H$h,H$c,H$d,H$j);else{this._shader2D.defines.getValue();var H$n=H$f?H$o.create(H$f)._color:H$k.colorAdd;H$k.ALPHA===H$l.ALPHA&&H$n===H$k.colorAdd&&H$l.colorAdd===H$k.colorAdd||(H$k.glTexture=null,H$k.colorAdd=H$n),H$na.drawText(this,H$a,H$b,this._curMat,H$m,H$i||this._other.textAlign,H$f,H$g,H$h,H$c,H$d,H$j)}},H$b.fillWords=function(H$a,H$b,H$c,H$d,H$e,H$f){this._fillText(null,H$a,H$b,H$c,H$d,H$e,null,-1,null,H$f)},H$b.fillBorderWords=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){this._fillBorderText(null,H$a,H$b,H$c,H$d,H$e,H$f,H$g,null)},H$b.fillText=function(H$a,H$b,H$c,H$d,H$e,H$f){this._fillText(H$a,null,H$b,H$c,H$d,H$e,null,-1,H$f)},H$b.strokeText=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){this._fillText(H$a,null,H$b,H$c,H$d,null,H$e,H$f||1,H$g)},H$b.fillBorderText=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){this._fillBorderText(H$a,null,H$b,H$c,H$d,H$e,H$f,H$g,H$h)},H$b._fillBorderText=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i){if(!H$O.enabled)return this._fillText(H$a,H$b,H$c,H$d,H$e,null,H$g,H$h||1,H$i),void this._fillText(H$a,H$b,H$c,H$d,H$e,H$f,null,-1,H$i);var H$j=this._shader2D,H$k=this._curSubmit.shaderValue;H$j.ALPHA!==H$k.ALPHA&&(H$j.glTexture=null);var H$l=H$e?(H$N._fontTemp.setFont(H$e),H$N._fontTemp):this._other.font;H$na.drawText(this,H$a,H$b,this._curMat,H$l,H$i||this._other.textAlign,H$f,H$g,H$h||1,H$c,H$d,0)},H$b.fillRect=function(H$a,H$b,H$c,H$d,H$e){var H$f=this._vb;if(H$qa.fillRectImgVb(H$f,this._clipRect,H$a,H$b,H$c,H$d,H$I.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var H$g=this._shader2D.fillStyle;H$e&&(this._shader2D.fillStyle=H$R.create(H$e));var H$h=this._shader2D,H$i=this._curSubmit.shaderValue;if(H$h.fillStyle!==H$i.fillStyle||H$h.ALPHA!==H$i.ALPHA){H$h.glTexture=null;var H$j=this._curSubmit=H$fa.createSubmit(this,this._ib,H$f,(H$f._byteLength-64)/32*3,H$ya.create(2,0));H$j.shaderValue.color=H$h.fillStyle._color._color,H$j.shaderValue.ALPHA=H$h.ALPHA,this._submits[this._submits._length++]=H$j}this._curSubmit._numEle+=6,this._shader2D.fillStyle=H$g}},H$b.fillTexture=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){if(H$a.loaded&&H$a.bitmap&&H$a.source){var H$i=this._vb,H$j=H$a.bitmap.width,H$k=H$a.bitmap.height,H$l=H$a.uv,H$m=H$g.x%H$a.width,H$n=H$g.y%H$a.height;if(H$j!=H$h.w||H$k!=H$h.h){if(!H$h.w&&!H$h.h)switch(H$h.oy=H$h.ox=0,H$f){case"repeat":H$h.width=H$d,H$h.height=H$e;break;case"repeat-x":H$h.width=H$d,H$n<0?H$a.height+H$n>H$e?H$h.height=H$e:H$h.height=H$a.height+H$n:(H$h.oy=H$n,H$a.height+H$n>H$e?H$h.height=H$e-H$n:H$h.height=H$a.height);break;case"repeat-y":H$m<0?H$a.width+H$m>H$d?H$h.width=H$d:H$h.width=H$a.width+H$m:(H$h.ox=H$m,H$a.width+H$m>H$d?H$h.width=H$d-H$m:H$h.width=H$a.width),H$h.height=H$e;break;case"no-repeat":H$m<0?H$a.width+H$m>H$d?H$h.width=H$d:H$h.width=H$a.width+H$m:(H$h.ox=H$m,H$a.width+H$m>H$d?H$h.width=H$d-H$m:H$h.width=H$a.width),H$n<0?H$a.height+H$n>H$e?H$h.height=H$e:H$h.height=H$a.height+H$n:(H$h.oy=H$n,H$a.height+H$n>H$e?H$h.height=H$e-H$n:H$h.height=H$a.height);break;default:H$h.width=H$d,H$h.height=H$e}H$h.w=H$j,H$h.h=H$k,H$h.uv=[0,0,H$h.width/H$j,0,H$h.width/H$j,H$h.height/H$k,0,H$h.height/H$k]}if(H$b+=H$h.ox,H$c+=H$h.oy,H$m-=H$h.ox,H$n-=H$h.oy,H$qa.fillRectImgVb(H$i,this._clipRect,H$b,H$c,H$h.width,H$h.height,H$h.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var H$o=H$Ha.create(this,this._ib,H$i,(H$i._byteLength-64)/32*3,H$ya.create(256,0)),H$p=(this._submits[this._submits._length++]=H$o).shaderValue;H$p.textureHost=H$a;var H$q=H$l[0]*H$j,H$r=H$l[1]*H$k,H$s=(H$l[2]-H$l[0])*H$j,H$t=(H$l[5]-H$l[3])*H$k,H$u=-H$m/H$j,H$v=-H$n/H$k;H$p.u_TexRange[0]=H$q/H$j,H$p.u_TexRange[1]=H$s/H$j,H$p.u_TexRange[2]=H$r/H$k,H$p.u_TexRange[3]=H$t/H$k,H$p.u_offset[0]=H$u,H$p.u_offset[1]=H$v,H$O.enabled&&!this._isMain&&H$o.addTexture(H$a,(H$i._byteLength>>2)-16),(this._curSubmit=H$o)._renderType=10017,H$o._numEle+=6}}else this.sprite&&H$w.timer.callLater(this,this._repaintSprite)},H$b.setShader=function(H$a){H$T.save(this,1048576,this._shader2D,!0),this._shader2D.shader=H$a},H$b.setFilters=function(H$a){H$T.save(this,2097152,this._shader2D,!0),this._shader2D.filters=H$a,this._curSubmit=H$fa.RENDERBASE,this._renderKey=0,this._drawCount++},H$b.drawTexture=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){this._drawTextureM(H$a,H$b,H$c,H$d,H$e,H$f,H$g,null,1)},H$b.addTextureVb=function(H$a,H$b,H$c){var H$d=this._curSubmit._vb||this._vb,H$e=H$d._byteLength>>2;H$d.byteLength=H$e+16<<2;for(var H$f=H$d.getFloat32Array(),H$g=0;H$g<16;H$g+=4)H$f[H$e++]=H$a[H$g]+H$b,H$f[H$e++]=H$a[H$g+1]+H$c,H$f[H$e++]=H$a[H$g+2],H$f[H$e++]=H$a[H$g+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),H$d._upload=!0},H$b.willDrawTexture=function(H$a,H$b){if(!(H$a.loaded&&H$a.bitmap&&H$a.source))return this.sprite&&H$w.timer.callLater(this,this._repaintSprite),0;var H$c=H$a.bitmap,H$d=H$c.id+this._shader2D.ALPHA*H$b+10016;if(H$d==this._renderKey)return H$d;var H$e=this._shader2D,H$f=H$e.ALPHA,H$g=this._curSubmit.shaderValue;H$e.ALPHA*=H$b,this._renderKey=H$d,this._drawCount++,H$e.glTexture=H$c;var H$h=this._vb,H$i=null,H$j=H$h._byteLength/32*3,H$k=H$g.textureHost&&H$g.textureHost==H$a&&H$g.textureHost.alphaTexture==H$a.alphaTexture;return H$i=H$Ha.create(this,this._ib,H$h,H$j,H$ya.create(1,0)),(this._submits[this._submits._length++]=H$i).shaderValue.textureHost=H$a,H$i._renderType=10016,H$i._preIsSameTextureShader=10016===this._curSubmit._renderType&&H$e.ALPHA===H$g.ALPHA&&H$k,this._curSubmit=H$i,H$e.ALPHA=H$f,H$d},H$b.drawTextures=function(H$a,H$b,H$c,H$d){if(H$a.loaded&&H$a.bitmap&&H$a.source){var H$e=this._clipRect;if(this._clipRect=H$N.MAXCLIPRECT,this._drawTextureM(H$a,H$b[0],H$b[1],H$a.width,H$a.height,H$c,H$d,null,1)){if(this._clipRect=H$e,H$E.drawCall++,!(H$b.length<4)){for(var H$f=this._curSubmit._vb||this._vb,H$g=this._curMat.a,H$h=this._curMat.d,H$i=2,H$j=H$b.length;H$i<H$j;H$i+=2)H$qa.copyPreImgVb(H$f,(H$b[H$i]-H$b[H$i-2])*H$g,(H$b[H$i+1]-H$b[H$i-1])*H$h),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&H$w.timer.callLater(this,this._repaintSprite)},H$b._drawTextureM=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i){if(!H$a.loaded||!H$a.source)return this.sprite&&H$w.timer.callLater(this,this._repaintSprite),!1;var H$j=this._curSubmit._vb||this._vb,H$k=H$a.bitmap;H$b+=H$f,H$c+=H$g,this._drawCount++;var H$l=H$k.id+this._shader2D.ALPHA*H$i+10016;if(H$l!=this._renderKey){this._renderKey=H$l;var H$m=this._curSubmit.shaderValue,H$n=this._shader2D,H$o=H$n.ALPHA;H$n.ALPHA*=H$i,H$n.glTexture=H$k;var H$p=this._vb,H$q=null,H$r=H$p._byteLength/32*3,H$s=H$m.textureHost&&H$m.textureHost==H$a&&H$m.textureHost.alphaTexture==H$a.alphaTexture;H$q=H$Ha.create(this,this._ib,H$p,H$r,H$ya.create(1,0)),(this._submits[this._submits._length++]=H$q).shaderValue.textureHost=H$a,H$q._renderType=10016,H$q._preIsSameTextureShader=10016===this._curSubmit._renderType&&H$n.ALPHA===H$m.ALPHA&&H$s,this._curSubmit=H$q,H$j=this._curSubmit._vb||this._vb,H$n.ALPHA=H$o}return!!H$qa.fillRectImgVb(H$j,this._clipRect,H$b,H$c,H$d||H$a.width,H$e||H$a.height,H$a.uv,H$h||this._curMat,this._x,this._y,0,0)&&(H$O.enabled&&!this._isMain&&this._curSubmit.addTexture(H$a,(H$j._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},H$b._repaintSprite=function(){this.sprite&&this.sprite.repaint()},H$b._drawText=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j){var H$k=H$a.bitmap;this._drawCount++;var H$l=H$k.id+this._shader2D.ALPHA+10016;if(H$l!=this._renderKey){this._renderKey=H$l;var H$m=this._curSubmit.shaderValue,H$n=this._shader2D;H$n.glTexture=H$k;var H$o=this._vb,H$p=null,H$q=H$o._byteLength/32*3,H$r=H$m.textureHost&&H$m.textureHost==H$a&&H$m.textureHost.alphaTexture==H$a.alphaTexture;(H$p=H$O.enabled?H$Ha.create(this,this._ib,H$o,H$q,H$ya.create(1,0)):H$Ha.create(this,this._ib,H$o,H$q,H$Ya.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&H$n.ALPHA===H$m.ALPHA&&H$r,(this._submits[this._submits._length++]=H$p).shaderValue.textureHost=H$a,H$p._renderType=10016,this._curSubmit=H$p}H$a.active();var H$s=this._curSubmit._vb||this._vb;H$qa.fillRectImgVb(H$s,this._clipRect,H$b+H$g,H$c+H$h,H$d||H$a.width,H$e||H$a.height,H$a.uv,H$f||this._curMat,this._x,this._y,H$i,H$j,!0)&&(H$O.enabled&&!this._isMain&&this._curSubmit.addTexture(H$a,(H$s._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},H$b.drawTextureWithTransform=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i){if(H$f){var H$j=this._curMat,H$k=this._x,H$l=this._y;(0!==H$g||0!==H$h)&&(this._x=H$g*H$j.a+H$h*H$j.c,this._y=H$h*H$j.d+H$g*H$j.b),H$f&&H$j.bTransform?(H$z.mul(H$f,H$j,H$N._tmpMatrix),(H$f=H$N._tmpMatrix)._checkTransform()):(this._x+=H$j.tx,this._y+=H$j.ty),this._drawTextureM(H$a,H$b,H$c,H$d,H$e,0,0,H$f,H$i),this._x=H$k,this._y=H$l}else this._drawTextureM(H$a,H$b,H$c,H$d,H$e,H$g,H$h,null,H$i)},H$b.fillQuadrangle=function(H$a,H$b,H$c,H$d,H$e){var H$f=this._curSubmit,H$g=this._vb,H$h=this._shader2D,H$i=H$f.shaderValue;if(this._renderKey=0,H$a.bitmap){var H$j=H$a.bitmap;H$h.glTexture==H$j&&H$h.ALPHA===H$i.ALPHA||(H$h.glTexture=H$j,(H$f=this._curSubmit=H$fa.createSubmit(this,this._ib,H$g,H$g._byteLength/32*3,H$ya.create(1,0))).shaderValue.glTexture=H$j,this._submits[this._submits._length++]=H$f),H$qa.fillQuadrangleImgVb(H$g,H$b,H$c,H$d,H$a.uv,H$e||this._curMat,this._x,this._y)}else H$f.shaderValue.fillStyle&&H$f.shaderValue.fillStyle.equal(H$a)&&H$h.ALPHA===H$i.ALPHA||(H$h.glTexture=null,(H$f=this._curSubmit=H$fa.createSubmit(this,this._ib,H$g,H$g._byteLength/32*3,H$ya.create(2,0))).shaderValue.defines.add(2),H$f.shaderValue.fillStyle=H$R.create(H$a),this._submits[this._submits._length++]=H$f),H$qa.fillQuadrangleImgVb(H$g,H$b,H$c,H$d,H$I.DEF_UV,H$e||this._curMat,this._x,this._y);H$f._numEle+=6},H$b.drawTexture2=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){if(0!=H$f){var H$i=this._curMat;if(this._x=H$a*H$i.a+H$b*H$i.c,this._y=H$b*H$i.d+H$a*H$i.b,H$e&&(H$e=H$i.bTransform||H$e.bTransform?(H$z.mul(H$e,H$i,H$N._tmpMatrix),H$N._tmpMatrix):(this._x+=H$e.tx+H$i.tx,this._y+=H$e.ty+H$i.ty,H$z.EMPTY)),1!==H$f||H$g){var H$j=this._shader2D.ALPHA,H$k=this._nBlendType;this._shader2D.ALPHA=H$f,H$g&&(this._nBlendType=H$Q.TOINT(H$g)),this._drawTextureM(H$h[0],H$h[1]-H$c,H$h[2]-H$d,H$h[3],H$h[4],0,0,H$e,1),this._shader2D.ALPHA=H$j,this._nBlendType=H$k}else this._drawTextureM(H$h[0],H$h[1]-H$c,H$h[2]-H$d,H$h[3],H$h[4],0,0,H$e,1);this._x=this._y=0}},H$b.drawCanvas=function(H$a,H$b,H$c,H$d,H$e){var H$f=H$a.context;if(this._renderKey=0,H$f._targets)this._submits[this._submits._length++]=H$Ga.create(H$f,0,null),this._curSubmit=H$fa.RENDERBASE,H$f._targets.drawTo(this,H$b,H$c,H$d,H$e);else{var H$g=this._submits[this._submits._length++]=H$Ga.create(H$f,this._shader2D.ALPHA,this._shader2D.filters),H$h=H$d/H$a.width,H$i=H$e/H$a.height,H$j=H$g._matrix;this._curMat.copyTo(H$j),1!=H$h&&1!=H$i&&H$j.scale(H$h,H$i);var H$k=H$j.tx,H$l=H$j.ty;H$j.tx=H$j.ty=0,H$j.transformPoint(H$A.TEMP.setTo(H$b,H$c)),H$j.translate(H$A.TEMP.x+H$k,H$A.TEMP.y+H$l),this._curSubmit=H$fa.RENDERBASE}H$x.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=H$f._targets?"yellow":"green",this.strokeRect(H$b-1,H$c-1,H$d+2,H$e+2,1),this.strokeRect(H$b,H$c,H$d,H$e,1),this.restore())},H$b.drawTarget=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j){void 0===H$j&&(H$j=-1);var H$k=this._vb;if(H$qa.fillRectImgVb(H$k,this._clipRect,H$b,H$c,H$d,H$e,H$i||H$I.DEF_UV,H$f||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var H$l=this._curSubmit=H$la.create(this,this._ib,H$k,(H$k._byteLength-64)/32*3,H$h,H$g);H$l.blendType=-1==H$j?this._nBlendType:H$j,H$l.scope=H$a,this._submits[this._submits._length++]=H$l,this._curSubmit._numEle+=6}},H$b.mixRGBandAlpha=function(H$a){return this._mixRGBandAlpha(H$a,this._shader2D.ALPHA)},H$b._mixRGBandAlpha=function(H$a,H$b){var H$c=(4278190080&H$a)>>>24;return 0!=H$c?H$c*=H$b:H$c=255*H$b,16777215&H$a|H$c<<24},H$b.drawTriangles=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j){if(!H$a.loaded||!H$a.source)return this.sprite&&H$w.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;H$a.bitmap;var H$k=this._mixRGBandAlpha(4294967295,H$h),H$l=(H$d.length,H$f.length);this._renderKey=-1;var H$m=this._curSubmit=H$Ha.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,H$ya.create(1,0));return H$m.shaderValue.textureHost=H$a,H$m._renderType=10016,this._submits[this._submits._length++]=H$m,H$g?(H$N._tmpMatrix.a=H$g.a,H$N._tmpMatrix.b=H$g.b,H$N._tmpMatrix.c=H$g.c,H$N._tmpMatrix.d=H$g.d,H$N._tmpMatrix.tx=H$g.tx+H$b,H$N._tmpMatrix.ty=H$g.ty+H$c,H$z.mul(H$N._tmpMatrix,this._curMat,H$N._tmpMatrix)):(H$N._tmpMatrix.a=this._curMat.a,H$N._tmpMatrix.b=this._curMat.b,H$N._tmpMatrix.c=this._curMat.c,H$N._tmpMatrix.d=this._curMat.d,H$N._tmpMatrix.tx=this._curMat.tx+H$b,H$N._tmpMatrix.ty=this._curMat.ty+H$c),this._triangleMesh.addData(H$d,H$e,H$f,H$N._tmpMatrix,H$k,this),this._curSubmit._numEle+=H$l,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},H$b.transform=function(H$a,H$b,H$c,H$d,H$e,H$f){H$X.save(this),H$z.mul(H$z.TEMP.setTo(H$a,H$b,H$c,H$d,H$e,H$f),this._curMat,this._curMat),this._curMat._checkTransform()},H$b.setTransformByMatrix=function(H$a){H$a.copyTo(this._curMat)},H$b.transformByMatrix=function(H$a){H$X.save(this),H$z.mul(H$a,this._curMat,this._curMat),this._curMat._checkTransform()},H$b.rotate=function(H$a){H$X.save(this),this._curMat.rotateEx(H$a)},H$b.scale=function(H$a,H$b){H$X.save(this),this._curMat.scaleEx(H$a,H$b)},H$b.clipRect=function(H$a,H$b,H$c,H$d){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var H$e=H$ka.create(4);this.addRenderObject(H$e);var H$f=this._vb,H$g=H$f._byteLength>>2;if(H$qa.fillRectImgVb(H$f,null,H$a,H$b,H$c,H$d,H$I.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var H$h=this._curSubmit=H$fa.createSubmit(this,this._ib,H$f,(H$f._byteLength-64)/32*3,H$ya.create(2,0));H$h.shaderValue.ALPHA=1,this._submits[this._submits._length++]=H$h,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var H$i=H$ka.create(5);this.addRenderObject(H$i);var H$j=H$f.getFloat32Array(),H$k=Math.min(Math.min(Math.min(H$j[0+H$g],H$j[4+H$g]),H$j[8+H$g]),H$j[12+H$g]),H$l=Math.max(Math.max(Math.max(H$j[0+H$g],H$j[4+H$g]),H$j[8+H$g]),H$j[12+H$g]),H$m=Math.min(Math.min(Math.min(H$j[1+H$g],H$j[5+H$g]),H$j[9+H$g]),H$j[13+H$g]),H$n=Math.max(Math.max(Math.max(H$j[1+H$g],H$j[5+H$g]),H$j[9+H$g]),H$j[13+H$g]);H$V.save(this,H$i,H$a,H$b,H$c,H$d,H$k,H$m,H$l-H$k,H$n-H$m),this._curSubmit=H$fa.RENDERBASE}else{H$c*=this._curMat.a,H$d*=this._curMat.d;var H$o=H$A.TEMP;this._curMat.transformPoint(H$o.setTo(H$a,H$b)),H$c<0&&(H$o.x=H$o.x+H$c,H$c=-H$c),H$d<0&&(H$o.y=H$o.y+H$d,H$d=-H$d),this._renderKey=0;var H$p=this._curSubmit=H$ja.create(this);(this._submits[this._submits._length++]=H$p).submitIndex=this._submits._length,H$p.submitLength=9999999,H$U.save(this,H$p);var H$q=this._clipRect,H$r=H$q.x,H$s=H$q.y,H$t=H$o.x+H$c,H$u=H$o.y+H$d;H$r<H$o.x&&(H$q.x=H$o.x),H$s<H$o.y&&(H$q.y=H$o.y),H$q.width=Math.min(H$t,H$r+H$q.width)-H$q.x,H$q.height=Math.min(H$u,H$s+H$q.height)-H$q.y,this._shader2D.glTexture=null,H$p.clipRect.copyFrom(H$q),this._curSubmit=H$fa.RENDERBASE}},H$b.setIBVB=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j,H$k){if(void 0===H$i&&(H$i=0),void 0===H$j&&(H$j=0),void 0===H$k&&(H$k=0),null===H$c){if(H$r.isFlash){var H$l=H$d;H$l._selfIB||(H$l._selfIB=H$$a.create(35044)),H$l._selfIB.clear(),H$c=H$l._selfIB}else H$c=this._ib;H$qa.expandIBQuadrangle(H$c,H$d._byteLength/(4*H$d.vertexStride*4))}if(!H$h||!H$g)throw Error("setIBVB must input:shader shaderValues");var H$m=H$ia.create(this,H$d,H$c,H$e,H$g,H$h,H$i,H$j,H$k);H$f||(H$f=H$z.EMPTY),H$f.translate(H$a,H$b),H$z.mul(H$f,this._curMat,H$m._mat),H$f.translate(-H$a,-H$b),this._submits[this._submits._length++]=H$m,this._curSubmit=H$fa.RENDERBASE,this._renderKey=0},H$b.addRenderObject=function(H$a){this._submits[this._submits._length++]=H$a},H$b.fillTrangles=function(H$a,H$b,H$c,H$d,H$e){var H$f=this._curSubmit,H$g=this._vb,H$h=this._shader2D,H$i=H$f.shaderValue,H$j=H$d.length>>4,H$k=H$a.bitmap;this._renderKey=0,H$h.glTexture==H$k&&H$h.ALPHA===H$i.ALPHA||((H$f=this._curSubmit=H$fa.createSubmit(this,this._ib,H$g,H$g._byteLength/32*3,H$ya.create(1,0))).shaderValue.textureHost=H$a,this._submits[this._submits._length++]=H$f),H$qa.fillTranglesVB(H$g,H$b,H$c,H$d,H$e||this._curMat,this._x,this._y),H$f._numEle+=6*H$j},H$b.submitElement=function(H$a,H$b){var H$c=this._submits;for(H$b<0&&(H$b=H$c._length);H$a<H$b;)H$a+=H$c[H$a].renderSubmit()},H$b.finish=function(){H$ua.mainContext.finish()},H$b.flush=function(){var H$a=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(H$a>this._ib.bufferLength/12&&H$qa.expandIBQuadrangle(this._ib,H$a),!this._isMain&&H$O.enabled&&H$O._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=H$O._atlasRestore;for(var H$b=this._submits,H$c=0,H$d=H$b._length;H$c<H$d;H$c++){var H$e=H$b[H$c];10016===H$e.getRenderType()&&H$e.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),H$ba.instance&&H$ba.getInstance().reset();var H$f;for(H$c=0,H$f=this.meshlist.length;H$c<H$f;H$c++){var H$g=this.meshlist[H$c];H$g.canReuse?H$g.releaseMesh():H$g.destroy()}return this.meshlist.length=0,this._curSubmit=H$fa.RENDERBASE,this._renderKey=0,this._triangleMesh=H$Ia.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},H$b.setPathId=function(H$a){if(this.mId=H$a,-1!=this.mId){this.mHaveKey=!1;var H$b=H$K.getInstance();H$b.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,H$b.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},H$b.movePath=function(H$a,H$b){var H$c=H$a,H$d=H$b;H$a=this._curMat.a*H$c+this._curMat.c*H$d+this._curMat.tx,H$b=this._curMat.b*H$c+this._curMat.d*H$d+this._curMat.ty,this.mX+=H$a,this.mY+=H$b},H$b.beginPath=function(){var H$a=this._getPath();H$a.tempArray.length=0,H$a.closePath=!1,this.mX=0,this.mY=0},H$b.closePath=function(){this._path.closePath=!0},H$b.fill=function(H$a){void 0===H$a&&(H$a=!1);var H$b=this._getPath();this.drawPoly(0,0,H$b.tempArray,this.fillStyle._color.numColor,0,0,H$a)},H$b.stroke=function(){var H$a=this._getPath();if(0<this.lineWidth){if(-1==this.mId)H$a.drawLine(0,0,H$a.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var H$b=H$K.getInstance().shapeLineDic[this.mId];H$b.rebuild(H$a.tempArray),H$a.setGeomtry(H$b)}else H$K.getInstance().addLine(this.mId,H$a.drawLine(0,0,H$a.tempArray,this.lineWidth,this.strokeStyle._color.numColor));H$a.update();var H$c=[this.mX,this.mY],H$d=H$fa.createShape(this,H$a.ib,H$a.vb,H$a.count,H$a.offset,H$ya.create(4,0));H$d.shaderValue.ALPHA=this._shader2D.ALPHA,H$d.shaderValue.u_pos=H$c,H$d.shaderValue.u_mmat2=H$sa.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=H$d,this._renderKey=-1}},H$b.line=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g=this._curSubmit,H$h=this._vb;if(H$qa.fillLineVb(H$h,this._clipRect,H$a,H$b,H$c,H$d,H$e,H$f)){this._renderKey=0;var H$i=this._shader2D,H$j=H$g.shaderValue;H$i.strokeStyle===H$j.strokeStyle&&H$i.ALPHA===H$j.ALPHA||(H$i.glTexture=null,(H$g=this._curSubmit=H$fa.createSubmit(this,this._ib,H$h,(H$h._byteLength-64)/32*3,H$ya.create(2,0))).shaderValue.strokeStyle=H$i.strokeStyle,H$g.shaderValue.mainID=2,H$g.shaderValue.ALPHA=H$i.ALPHA,this._submits[this._submits._length++]=H$g),H$g._numEle+=6}},H$b.moveTo=function(H$a,H$b,H$c){void 0===H$c&&(H$c=!0);var H$d=this._getPath();if(H$c){var H$e=H$a,H$f=H$b;H$a=this._curMat.a*H$e+this._curMat.c*H$f,H$b=this._curMat.b*H$e+this._curMat.d*H$f}H$d.addPoint(H$a,H$b)},H$b.lineTo=function(H$a,H$b,H$c){void 0===H$c&&(H$c=!0);var H$d=this._getPath();if(H$c){var H$e=H$a,H$f=H$b;H$a=this._curMat.a*H$e+this._curMat.c*H$f,H$b=this._curMat.b*H$e+this._curMat.d*H$f}H$d.addPoint(H$a,H$b)},H$b.drawCurves=function(H$a,H$b,H$c){this.setPathId(-1),this.beginPath(),this.strokeStyle=H$c[3],this.lineWidth=H$c[4];var H$d=H$c[2];H$a+=H$c[0],H$b+=H$c[1],this.movePath(H$a,H$b),this.moveTo(H$d[0],H$d[1]);for(var H$e=2,H$f=H$d.length;H$e<H$f;)this.quadraticCurveTo(H$d[H$e++],H$d[H$e++],H$d[H$e++],H$d[H$e++]);this.stroke()},H$b.arcTo=function(H$a,H$b,H$c,H$d,H$e){if(-1==this.mId||!this.mHaveKey){var H$f=0,H$g=0,H$h=0,H$i=this._getPath();this._curMat.copyTo(H$N._tmpMatrix),H$N._tmpMatrix.tx=H$N._tmpMatrix.ty=0,H$N._tempPoint.setTo(H$i.getEndPointX(),H$i.getEndPointY()),H$N._tmpMatrix.invertTransformPoint(H$N._tempPoint);var H$j=H$N._tempPoint.x-H$a,H$k=H$N._tempPoint.y-H$b,H$l=Math.sqrt(H$j*H$j+H$k*H$k);if(!(H$l<=1e-6)){var H$m=H$j/H$l,H$n=H$k/H$l,H$o=H$c-H$a,H$p=H$d-H$b,H$q=H$o*H$o+H$p*H$p,H$r=Math.sqrt(H$q);if(!(H$r<=1e-6)){var H$s=H$o/H$r,H$t=H$p/H$r,H$u=H$m+H$s,H$v=H$n+H$t,H$w=Math.sqrt(H$u*H$u+H$v*H$v);if(!(H$w<=1e-6)){var H$x=H$u/H$w,H$y=H$v/H$w,H$z=Math.acos(H$x*H$m+H$y*H$n),H$A=Math.PI/2-H$z,H$B=(H$l=H$e/Math.tan(H$A))*H$m+H$a,H$C=H$l*H$n+H$b,H$D=Math.sqrt(H$l*H$l+H$e*H$e),H$E=H$a+H$x*H$D,H$F=H$b+H$y*H$D,H$G=0,H$H=0;if(0<=H$m*H$t-H$n*H$s){var H$I=2*H$A/H$N.SEGNUM;H$G=Math.sin(H$I),H$H=Math.cos(H$I)}else H$I=2*-H$A/H$N.SEGNUM,H$G=Math.sin(H$I),H$H=Math.cos(H$I);H$g=this._curMat.a*H$B+this._curMat.c*H$C,H$h=this._curMat.b*H$B+this._curMat.d*H$C,H$g==this._path.getEndPointX()&&H$h==this._path.getEndPointY()||H$i.addPoint(H$g,H$h);var H$J=H$B-H$E,H$K=H$C-H$F;for(H$f=0;H$f<H$N.SEGNUM;H$f++){var H$L=H$J*H$H+H$K*H$G,H$M=-H$J*H$G+H$K*H$H;H$g=H$L+H$E,H$h=H$M+H$F,H$a=this._curMat.a*H$g+this._curMat.c*H$h,H$h=H$b=this._curMat.b*H$g+this._curMat.d*H$h,(H$g=H$a)==this._path.getEndPointX()&&H$h==this._path.getEndPointY()||H$i.addPoint(H$g,H$h),H$J=H$L,H$K=H$M}}}}}},H$b.arc=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){if(void 0===H$f&&(H$f=!1),void 0===H$g&&(H$g=!0),-1!=this.mId){var H$h=H$K.getInstance().shapeDic[this.mId];if(H$h&&this.mHaveKey&&!H$h.needUpdate(this._curMat))return;H$b=H$a=0}var H$i,H$j=0,H$k=0,H$l=0,H$m=0,H$n=0,H$o=0,H$p=0;if(H$k=H$e-H$d,H$f)if(Math.abs(H$k)>=2*Math.PI)H$k=2*-Math.PI;else for(;0<H$k;)H$k-=2*Math.PI;else if(Math.abs(H$k)>=2*Math.PI)H$k=2*Math.PI;else for(;H$k<0;)H$k+=2*Math.PI;H$i=H$k/(H$p=H$c<101?Math.max(10,H$k*H$c/5):H$c<201?Math.max(10,H$k*H$c/20):Math.max(10,H$k*H$c/40))/2,H$l=Math.abs(4/3*(1-Math.cos(H$i))/Math.sin(H$i)),H$f&&(H$l=-H$l);var H$q=this._getPath(),H$r=NaN,H$s=NaN;for(H$o=0;H$o<=H$p;H$o++)H$j=H$d+H$k*(H$o/H$p),H$m=H$a+Math.cos(H$j)*H$c,H$n=H$b+Math.sin(H$j)*H$c,H$g&&(H$r=H$m,H$s=H$n,H$m=this._curMat.a*H$r+this._curMat.c*H$s,H$n=this._curMat.b*H$r+this._curMat.d*H$s),H$m==this._path.getEndPointX()&&H$n==this._path.getEndPointY()||H$q.addPoint(H$m,H$n);H$m=H$a+Math.cos(H$e)*H$c,H$n=H$b+Math.sin(H$e)*H$c,H$g&&(H$r=H$m,H$s=H$n,H$m=this._curMat.a*H$r+this._curMat.c*H$s,H$n=this._curMat.b*H$r+this._curMat.d*H$s),H$m==this._path.getEndPointX()&&H$n==this._path.getEndPointY()||H$q.addPoint(H$m,H$n)},H$b.quadraticCurveTo=function(H$a,H$b,H$c,H$d){var H$e=H$l.I,H$f=H$c,H$g=H$d;H$c=this._curMat.a*H$f+this._curMat.c*H$g,H$d=this._curMat.b*H$f+this._curMat.d*H$g,H$f=H$a,H$g=H$b,H$a=this._curMat.a*H$f+this._curMat.c*H$g,H$b=this._curMat.b*H$f+this._curMat.d*H$g;for(var H$h=H$e.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),H$a,H$b,H$c,H$d],30,2),H$i=0,H$j=H$h.length/2;H$i<H$j;H$i++)this.lineTo(H$h[2*H$i],H$h[2*H$i+1],!1);this.lineTo(H$c,H$d,!1)},H$b.rect=function(H$a,H$b,H$c,H$d){this._other=this._other.make(),this._other.path||(this._other.path=new H$S),this._other.path.rect(H$a,H$b,H$c,H$d)},H$b.strokeRect=function(H$a,H$b,H$c,H$d,H$e){var H$f=.5*H$e;this.line(H$a-H$f,H$b,H$a+H$c+H$f,H$b,H$e,this._curMat),this.line(H$a+H$c,H$b,H$a+H$c,H$b+H$d,H$e,this._curMat),this.line(H$a,H$b,H$a,H$b+H$d,H$e,this._curMat),this.line(H$a-H$f,H$b+H$d,H$a+H$c+H$f,H$b+H$d,H$e,this._curMat)},H$b.clip=function(){},H$b.drawPoly=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){void 0===H$g&&(H$g=!1),this._renderKey=0,this._shader2D.glTexture=null;var H$h=this._getPath();if(-1==this.mId)H$h.polygon(H$a,H$b,H$c,H$d,H$e||1,H$f);else if(this.mHaveKey){var H$i=H$K.getInstance().shapeDic[this.mId];H$i.setMatrix(this._curMat),H$i.rebuild(H$h.tempArray),H$h.setGeomtry(H$i)}else{var H$j=H$h.polygon(H$a,H$b,H$c,H$d,H$e||1,H$f);H$K.getInstance().addShape(this.mId,H$j),H$j.setMatrix(this._curMat)}H$h.update();var H$k,H$l=[this.mX,this.mY];if((H$k=H$fa.createShape(this,H$h.ib,H$h.vb,H$h.count,H$h.offset,H$ya.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,H$k.shaderValue.u_pos=H$l,H$k.shaderValue.u_mmat2=H$sa.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=H$k,0<H$e){if(this.mHaveLineKey){var H$m=H$K.getInstance().shapeLineDic[this.mId];H$m.rebuild(H$h.tempArray),H$h.setGeomtry(H$m)}else H$K.getInstance().addShape(this.mId,H$h.drawLine(H$a,H$b,H$c,H$e,H$f));H$h.update(),(H$k=H$fa.createShape(this,H$h.ib,H$h.vb,H$h.count,H$h.offset,H$ya.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,H$k.shaderValue.u_mmat2=H$sa.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=H$k}},H$b.drawParticle=function(H$a,H$b,H$c){H$c.x=H$a,H$c.y=H$b,this._submits[this._submits._length++]=H$c},H$b._getPath=function(){return this._path||(this._path=new H$S)},H$d(0,H$b,"globalCompositeOperation",function(){return H$Q.NAMES[this._nBlendType]},function(H$a){var H$b=H$Q.TOINT[H$a];null==H$b||this._nBlendType===H$b||(H$T.save(this,65536,this,!0),this._curSubmit=H$fa.RENDERBASE,this._renderKey=0,this._nBlendType=H$b)}),H$d(0,H$b,"strokeStyle",function(){return this._shader2D.strokeStyle},function(H$a){this._shader2D.strokeStyle.equal(H$a)||(H$T.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=H$R.create(H$a))}),H$d(0,H$b,"globalAlpha",function(){return this._shader2D.ALPHA},function(H$a){(H$a=Math.floor(1e3*H$a)/1e3)!=this._shader2D.ALPHA&&(H$T.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=H$a)}),H$d(0,H$b,"asBitmap",null,function(H$a){if(H$a){if(this._targets||(this._targets=new H$Z),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),H$d(0,H$b,"fillStyle",function(){return this._shader2D.fillStyle},function(H$a){this._shader2D.fillStyle.equal(H$a)||(H$T.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=H$R.create(H$a))}),H$d(0,H$b,"textAlign",function(){return this._other.textAlign},function(H$a){this._other.textAlign===H$a||(this._other=this._other.make(),H$T.save(this,32768,this._other,!1),this._other.textAlign=H$a)}),H$d(0,H$b,"lineWidth",function(){return this._other.lineWidth},function(H$a){this._other.lineWidth===H$a||(this._other=this._other.make(),H$T.save(this,256,this._other,!1),this._other.lineWidth=H$a)}),H$d(0,H$b,"textBaseline",function(){return this._other.textBaseline},function(H$a){this._other.textBaseline===H$a||(this._other=this._other.make(),H$T.save(this,16384,this._other,!1),this._other.textBaseline=H$a)}),H$d(0,H$b,"font",null,function(H$a){H$a!=this._other.font.toString()&&(this._other=this._other.make(),H$T.save(this,8,this._other,!1),this._other.font===H$oa.EMPTY?this._other.font=new H$oa(H$a):this._other.font.setFont(H$a))}),H$N.__init__=function(){H$c.DEFAULT=new H$c},H$N._tempPoint=new H$A,H$N._SUBMITVBSIZE=32e3,H$N._MAXSIZE=99999999,H$N._RECTVBSIZE=16,H$N.MAXCLIPRECT=new H$B(0,0,99999999,99999999),H$N._COUNT=0,H$N._tmpMatrix=new H$z,H$N.SEGNUM=32,H$N._contextcount=0,H$g(H$N,["_fontTemp",function(){return this._fontTemp=new H$oa},"_drawStyleTemp",function(){return this._drawStyleTemp=new H$R(null)}]),H$N.__init$=function(){H$c=function(){function H$a(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=H$oa.EMPTY}H$m(H$a,"");var H$b=H$a.prototype;return H$b.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=H$oa.EMPTY},H$b.make=function(){return this===H$a.DEFAULT?new H$a:this},H$a.DEFAULT=null,H$a}()},H$N}(),H$ya=function(H$a){function H$d(H$a,H$b){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,H$d.__super.call(this),this.defines=new H$Ca,this.position=H$d._POSITION,this.mainID=H$a,this.subID=H$b,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=H$a|H$b,this._inClassCache=H$d._cache[this._cacheID],0<H$a&&!this._inClassCache&&(this._inClassCache=H$d._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}H$m(H$d,"laya.webgl.shader.d2.value.Value2D",H$M);var H$b=H$d.prototype;return H$b.setValue=function(H$a){},H$b.refresh=function(){var H$a=this.size;return H$a[0]=H$sa.width,H$a[1]=H$sa.height,this.alpha=this.ALPHA*H$sa.worldAlpha,this.mmat=H$sa.worldMatrix4,this},H$b._ShaderWithCompile=function(){return H$Wa.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,H$Za.create)},H$b._withWorldShaderDefines=function(){var H$a=H$sa.worldShaderDefines,H$b=H$Wa.sharders[this.mainID|this.defines._value|H$a.getValue()];if(!H$b){var H$c,H$d={};for(H$c in this.defines.toNameDic())H$d[H$c]="";for(H$c in H$a.toNameDic())H$d[H$c]="";H$b=H$Wa.withCompile2D(0,this.mainID,H$d,this.mainID|this.defines._value|H$a.getValue(),H$Za.create)}var H$e=H$sa.worldFilters;if(!H$e)return H$b;for(var H$f,H$g=H$e.length,H$h=0;H$h<H$g;H$h++)(H$f=H$e[H$h])&&H$f.action.setValue(this);return H$b},H$b.upload=function(){var H$a=H$sa;this.alpha=this.ALPHA*H$a.worldAlpha,H$sa.worldMatrix4!==H$sa.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),H$ua.shaderHighPrecision&&this.defines.add(1024);var H$b,H$c=H$a.worldShaderDefines?this._withWorldShaderDefines():H$Wa.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=H$a.width,this.size[1]=H$a.height,this.mmat=H$a.worldMatrix4,H$Ja.activeShader!==H$c?H$c._shaderValueWidth!==H$a.width||H$c._shaderValueHeight!==H$a.height?(H$c._shaderValueWidth=H$a.width,H$c._shaderValueHeight=H$a.height):H$b=H$c._params2dQuick2||H$c._make2dQuick2():H$c._shaderValueWidth!==H$a.width||H$c._shaderValueHeight!==H$a.height?(H$c._shaderValueWidth=H$a.width,H$c._shaderValueHeight=H$a.height):H$b=H$c._params2dQuick1||H$c._make2dQuick1(),H$c.upload(this,H$b)},H$b.setFilters=function(H$a){if(this.filters=H$a)for(var H$b,H$c=H$a.length,H$d=0;H$d<H$c;H$d++)(H$b=H$a[H$d])&&(this.defines.add(H$b.type),H$b.action.setValue(this))},H$b.clear=function(){this.defines.setValue(this.subID)},H$b.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},H$d._initone=function(H$a,H$b){H$d._typeClass[H$a]=H$b,H$d._cache[H$a]=[],H$d._cache[H$a]._length=0},H$d.__init__=function(){H$d._POSITION=[2,5126,!1,4*H$pa.BYTES_PE,0],H$d._TEXCOORD=[2,5126,!1,4*H$pa.BYTES_PE,2*H$pa.BYTES_PE],H$d._initone(2,H$Na),H$d._initone(4,H$Qa),H$d._initone(256,H$Oa),H$d._initone(512,H$Ma),H$d._initone(1,H$Pa),H$d._initone(65,H$Ya),H$d._initone(9,H$Pa)},H$d.create=function(H$a,H$b){var H$c=H$d._cache[H$a|H$b];return H$c._length?H$c[--H$c._length]:new H$d._typeClass[H$a|H$b](H$b)},H$d._POSITION=null,H$d._TEXCOORD=null,H$d._cache=[],H$d._typeClass=[],H$d.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H$d}(),H$za=function(H$a){function H$q(H$a,H$b){H$q.__super.call(this,H$a,H$b)}H$m(H$q,"laya.webgl.utils.RenderSprite3D",H$s);var H$b=H$q.prototype;return H$b.onCreate=function(H$a){switch(H$a){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},H$b._mask=function(H$a,H$b,H$c,H$d){var H$e,H$f,H$g=this._next,H$h=H$a.mask;if(H$h){H$b.ctx.save();var H$i=H$b.ctx.globalCompositeOperation,H$j=new H$B;if(H$j.copyFrom(H$h.getBounds()),H$j.width=Math.round(H$j.width),H$j.height=Math.round(H$j.height),H$j.x=Math.round(H$j.x),H$j.y=Math.round(H$j.y),0<H$j.width&&0<H$j.height){var H$k=H$a._style._tf,H$l=H$ha.create();H$l.addValue("bounds",H$j),H$e=H$ga.create([H$l,H$b],laya.webgl.utils.RenderSprite3D.tmpTarget),H$b.addRenderObject(H$e),H$h.render(H$b,-H$j.x,-H$j.y),H$e=H$ga.create([H$l],laya.webgl.utils.RenderSprite3D.endTmpTarget),H$b.addRenderObject(H$e),H$b.ctx.save(),H$b.clipRect(H$c-H$k.translateX+H$j.x,H$d-H$k.translateY+H$j.y,H$j.width,H$j.height),H$g._fun.call(H$g,H$a,H$b,H$c,H$d),H$b.ctx.restore(),H$f=H$ka.create(6),H$i=H$b.ctx.globalCompositeOperation,H$f.blendMode="mask",H$b.addRenderObject(H$f),H$z.TEMP.identity();var H$m=H$ya.create(1,0),H$n=H$I.INV_UV,H$o=H$j.width,H$p=H$j.height;(H$j.width<32||H$j.height<32)&&((H$n=H$q.tempUV)[0]=0,H$n[1]=0,H$n[2]=32<=H$j.width?1:H$j.width/32,H$n[3]=0,H$n[4]=32<=H$j.width?1:H$j.width/32,H$n[5]=32<=H$j.height?1:H$j.height/32,H$n[6]=0,H$n[7]=32<=H$j.height?1:H$j.height/32,H$j.width=32<=H$j.width?H$j.width:32,H$j.height=32<=H$j.height?H$j.height:32,H$n[1]*=-1,H$n[3]*=-1,H$n[5]*=-1,H$n[7]*=-1,H$n[1]+=1,H$n[3]+=1,H$n[5]+=1,H$n[7]+=1),H$b.ctx.drawTarget(H$l,H$c+H$j.x-H$k.translateX,H$d+H$j.y-H$k.translateY,H$o,H$p,H$z.TEMP,"tmpTarget",H$m,H$n,6),H$e=H$ga.create([H$l],laya.webgl.utils.RenderSprite3D.recycleTarget),H$b.addRenderObject(H$e),(H$f=H$ka.create(6)).blendMode=H$i,H$b.addRenderObject(H$f)}H$b.ctx.restore()}else H$g._fun.call(H$g,H$a,H$b,H$c,H$d)},H$b._blend=function(H$a,H$b,H$c,H$d){var H$e=H$a._style,H$f=this._next;H$e.blendMode?(H$b.ctx.save(),H$b.ctx.globalCompositeOperation=H$e.blendMode,H$f._fun.call(H$f,H$a,H$b,H$c,H$d),H$b.ctx.restore()):H$f._fun.call(H$f,H$a,H$b,H$c,H$d)},H$b._transform=function(H$a,H$b,H$c,H$d){var H$e=H$a.transform,H$f=this._next;if(H$e&&H$f!=H$s.NORENDER){var H$g=H$b.ctx;H$a._style;H$e.tx=H$c,H$e.ty=H$d;var H$h=H$g._getTransformMatrix(),H$i=H$h.clone();H$z.mul(H$e,H$h,H$h),H$h._checkTransform(),H$e.tx=H$e.ty=0,H$f._fun.call(H$f,H$a,H$b,0,0),H$i.copyTo(H$h),H$i.destroy()}else H$f._fun.call(H$f,H$a,H$b,H$c,H$d)},H$q.tmpTarget=function(H$a,H$b){var H$c=H$a.getValue("bounds"),H$d=H$Ka.create(H$c.width,H$c.height);H$d.start(),H$d.clear(0,0,0,0),H$a.addValue("tmpTarget",H$d)},H$q.endTmpTarget=function(H$a){H$a.getValue("tmpTarget").end()},H$q.recycleTarget=function(H$a){H$a.getValue("tmpTarget").recycle(),H$a.recycle()},H$g(H$q,["tempUV",function(){return this.tempUV=new Array(8)}]),H$q}(),H$Aa=function(H$a){function H$b(){this.data=null,H$b.__super.call(this)}H$m(H$b,"laya.filters.webgl.ColorFilterActionGL",H$L);var H$c=H$b.prototype;return H$w.imps(H$c,{"laya.filters.IFilterActionGL":!0}),H$c.setValue=function(H$a){H$a.colorMat=this.data._mat,H$a.colorAlpha=this.data._alpha},H$c.apply3d=function(H$a,H$b,H$c,H$d,H$e){var H$f=H$a.getValue("bounds"),H$g=H$ya.create(1,0);H$g.setFilters([this.data]);var H$h=H$z.TEMP;H$h.identity(),H$c.ctx.drawTarget(H$a,0,0,H$f.width,H$f.height,H$h,"src",H$g)},H$b}(),H$Ba=function(H$a){function H$f(H$a,H$b,H$c,H$d,H$e){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,H$f.__super.call(this,H$a,H$b,H$e),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new H$Ra,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=H$c,this._atlasCanvas.height=H$d,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}H$m(H$f,"laya.webgl.atlas.Atlaser",H$N);var H$b=H$f.prototype;return H$b.computeUVinAtlasTexture=function(H$a,H$b,H$c,H$d){var H$e=H$O.atlasTextureWidth,H$f=H$O.atlasTextureHeight,H$g=H$c/H$e,H$h=H$d/H$f,H$i=(H$c+H$a.bitmap.width)/H$e,H$j=(H$d+H$a.bitmap.height)/H$f,H$k=H$a.bitmap.width/H$e,H$l=H$a.bitmap.height/H$f;H$a.uv=[H$g+H$b[0]*H$k,H$h+H$b[1]*H$l,H$i-(1-H$b[2])*H$k,H$h+H$b[3]*H$l,H$i-(1-H$b[4])*H$k,H$j-(1-H$b[5])*H$l,H$g+H$b[6]*H$k,H$j-(1-H$b[7])*H$l]},H$b.findBitmapIsExist=function(H$a){if(H$a instanceof laya.webgl.resource.WebGLImage){var H$b=H$a,H$c=H$b.url,H$d=this._InAtlasWebGLImagesKey[H$c||H$b.id];if(H$d)return H$d.offsetInfoID}return-1},H$b.addToAtlasTexture=function(H$a,H$b,H$c){if(H$a instanceof laya.webgl.resource.WebGLImage){var H$d=H$a,H$e=H$d.url;this._InAtlasWebGLImagesKey[H$e||H$d.id]={bitmap:H$a,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([H$b,H$c])}this._atlasCanvas.texSubImage2D(H$b,H$c,H$a.atlasSource),H$a.clearAtlasSource()},H$b.addToAtlas=function(H$a,H$b,H$c){H$a._atlasID=this._inAtlasTextureKey.length;var H$d=H$a.uv.slice(),H$e=H$a.bitmap;this._inAtlasTextureKey.push(H$a),this._inAtlasTextureOriUVValue.push(H$d),this._inAtlasTextureBitmapValue.push(H$e),this.computeUVinAtlasTexture(H$a,H$d,H$b,H$c),H$a.bitmap=this._atlasCanvas},H$b.clear=function(){for(var H$a=0,H$b=this._inAtlasTextureKey.length;H$a<H$b;H$a++)this._inAtlasTextureKey[H$a].bitmap=this._inAtlasTextureBitmapValue[H$a],this._inAtlasTextureKey[H$a].uv=this._inAtlasTextureOriUVValue[H$a],this._inAtlasTextureKey[H$a]._atlasID=-1,this._inAtlasTextureKey[H$a].bitmap.lock=!1,this._inAtlasTextureKey[H$a].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},H$b.dispose=function(){this.clear(),this._atlasCanvas.destroy()},H$d(0,H$b,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),H$d(0,H$b,"texture",function(){return this._atlasCanvas}),H$d(0,H$b,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),H$f}(),H$Ca=function(H$a){function H$c(){H$c.__super.call(this,H$c.__name2int,H$c.__int2name,H$c.__int2nameMap)}return H$m(H$c,"laya.webgl.shader.d2.ShaderDefines2D",H$_),H$c.__init__=function(){H$c.reg("TEXTURE2D",1),H$c.reg("COLOR2D",2),H$c.reg("PRIMITIVE",4),H$c.reg("GLOW_FILTER",8),H$c.reg("BLUR_FILTER",16),H$c.reg("COLOR_FILTER",32),H$c.reg("COLOR_ADD",64),H$c.reg("WORLDMAT",128),H$c.reg("FILLTEXTURE",256),H$c.reg("FSHIGHPRECISION",1024),H$c.reg("TXTALPHA",2048),H$c.reg("TXTCOMPRESS",4096)},H$c.reg=function(H$a,H$b){H$_._reg(H$a,H$b,H$c.__name2int,H$c.__int2name)},H$c.toText=function(H$a,H$b,H$c){return H$_._toText(H$a,H$b,H$c)},H$c.toInt=function(H$a){return H$_._toInt(H$a,H$c.__name2int)},H$c.TEXTURE2D=1,H$c.COLOR2D=2,H$c.PRIMITIVE=4,H$c.FILTERGLOW=8,H$c.FILTERBLUR=16,H$c.FILTERCOLOR=32,H$c.COLORADD=64,H$c.WORLDMAT=128,H$c.FILLTEXTURE=256,H$c.SKINMESH=512,H$c.SHADERDEFINE_FSHIGHPRECISION=1024,H$c.TXTALPHA=2048,H$c.TXTCOMPRESS=4096,H$c.__name2int={},H$c.__int2name=[],H$c.__int2nameMap=[],H$c}(),H$Da=(function(H$a){function H$h(H$a,H$b,H$c,H$d,H$e,H$f,H$g){H$h.__super.call(this,H$a,H$b,H$c,H$d,40,H$e,H$f,H$g)}H$m(H$h,"laya.webgl.shapes.Ellipse",H$ca)}(),function(H$a){function H$f(H$a,H$b,H$c,H$d,H$e){this._points=[],this.rebuild(H$c),H$f.__super.call(this,H$a,H$b,0,0,0,H$e,H$d,H$e,0)}H$m(H$f,"laya.webgl.shapes.Line",H$ca);var H$b=H$f.prototype;return H$b.rebuild=function(H$a){var H$b=H$a.length;H$b!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(H$b/2-1)),this.mFloat32Array=new Float32Array(5*H$b)),this._points.length=0;for(var H$c=NaN,H$d=NaN,H$e=-1,H$f=-1,H$g=H$a.length/2,H$h=0;H$h<H$g;H$h++)H$c=H$a[2*H$h],H$d=H$a[2*H$h+1],(.01<Math.abs(H$e-H$c)||.01<Math.abs(H$f-H$d))&&this._points.push(H$c,H$d),H$e=H$c,H$f=H$d},H$b.getData=function(H$a,H$b,H$c){var H$d=[],H$e=[];0<this.borderWidth&&this.createLine2(this._points,H$d,this.borderWidth,H$c,H$e,this._points.length/2),this.mUint16Array.set(H$d,0),this.mFloat32Array.set(H$e,0),H$a.append(this.mUint16Array),H$b.append(this.mFloat32Array)},H$f}()),H$Ea=function(H$a){function H$l(H$a,H$b,H$c,H$d,H$e){this._points=[];for(var H$f=NaN,H$g=NaN,H$h=-1,H$i=-1,H$j=H$c.length/2-1,H$k=0;H$k<H$j;H$k++)H$f=H$c[2*H$k],H$g=H$c[2*H$k+1],(.01<Math.abs(H$h-H$f)||.01<Math.abs(H$i-H$g))&&this._points.push(H$f,H$g),H$h=H$f,H$i=H$g;H$f=H$c[2*H$j],H$g=H$c[2*H$j+1],H$h=this._points[0],H$i=this._points[1],(.01<Math.abs(H$h-H$f)||.01<Math.abs(H$i-H$g))&&this._points.push(H$f,H$g),H$l.__super.call(this,H$a,H$b,0,0,this._points.length/2,0,H$d,H$e)}H$m(H$l,"laya.webgl.shapes.LoopLine",H$ca);var H$b=H$l.prototype;return H$b.getData=function(H$a,H$b,H$c){if(0<this.borderWidth){for(var H$d=this.color,H$e=(H$d>>16&255)/255,H$f=(H$d>>8&255)/255,H$g=(255&H$d)/255,H$h=[],H$i=0,H$j=0,H$k=[],H$l=Math.floor(this._points.length/2),H$m=0;H$m<H$l;H$m++)H$i=this._points[2*H$m],H$j=this._points[2*H$m+1],H$h.push(this.x+H$i,this.y+H$j,H$e,H$f,H$g);this.createLoopLine(H$h,H$k,this.borderWidth,H$c+H$h.length/5),H$a.append(new Uint16Array(H$k)),H$b.append(new Float32Array(H$h))}},H$b.createLoopLine=function(H$a,H$b,H$c,H$d,H$e,H$f){H$a.length;var H$g=H$a.concat(),H$h=H$e||H$a,H$i=this.borderColor,H$j=(H$i>>16&255)/255,H$k=(H$i>>8&255)/255,H$l=(255&H$i)/255,H$m=[H$g[0],H$g[1]],H$n=[H$g[H$g.length-5],H$g[H$g.length-4]],H$o=H$n[0]+.5*(H$m[0]-H$n[0]),H$p=H$n[1]+.5*(H$m[1]-H$n[1]);H$g.unshift(H$o,H$p,0,0,0),H$g.push(H$o,H$p,0,0,0);var H$q,H$r,H$s,H$t,H$u,H$v,H$w,H$x,H$y,H$z,H$A,H$B,H$C,H$D,H$E,H$F,H$G,H$H,H$I,H$J,H$K=H$g.length/5,H$L=H$d,H$M=H$c/2;H$s=H$g[0],H$t=H$g[1],H$z=H$s-(H$u=H$g[5]),H$y=(H$y=-(H$t-(H$v=H$g[6])))/(H$J=Math.sqrt(H$y*H$y+H$z*H$z))*H$M,H$z=H$z/H$J*H$M,H$h.push(H$s-H$y,H$t-H$z,H$j,H$k,H$l,H$s+H$y,H$t+H$z,H$j,H$k,H$l);for(var H$N=1;H$N<H$K-1;H$N++)H$s=H$g[5*(H$N-1)],H$t=H$g[5*(H$N-1)+1],H$u=H$g[5*H$N],H$v=H$g[5*H$N+1],H$w=H$g[5*(H$N+1)],H$x=H$g[5*(H$N+1)+1],H$z=H$s-H$u,H$B=H$u-H$w,H$E=(-(H$y=(H$y=-(H$t-H$v))/(H$J=Math.sqrt(H$y*H$y+H$z*H$z))*H$M)+H$s)*(-(H$z=H$z/H$J*H$M)+H$v)-(-H$y+H$u)*(-H$z+H$t),H$H=(-(H$A=(H$A=-(H$v-H$x))/(H$J=Math.sqrt(H$A*H$A+H$B*H$B))*H$M)+H$w)*(-(H$B=H$B/H$J*H$M)+H$v)-(-H$A+H$u)*(-H$B+H$x),H$I=(H$C=-H$z+H$t-(-H$z+H$v))*(H$G=-H$A+H$u-(-H$A+H$w))-(H$F=-H$B+H$x-(-H$B+H$v))*(H$D=-H$y+H$u-(-H$y+H$s)),Math.abs(H$I)<.1?(H$I+=10.1,H$h.push(H$u-H$y,H$v-H$z,H$j,H$k,H$l,H$u+H$y,H$v+H$z,H$j,H$k,H$l)):(((H$q=(H$D*H$H-H$G*H$E)/H$I)-H$u)*(H$q-H$u)+((H$r=(H$F*H$E-H$C*H$H)/H$I)-H$v)+(H$r-H$v),H$h.push(H$q,H$r,H$j,H$k,H$l,H$u-(H$q-H$u),H$v-(H$r-H$v),H$j,H$k,H$l));H$f&&(H$b=H$f);var H$O=this.edges+1;for(H$N=1;H$N<H$O;H$N++)H$b.push(H$L+2*(H$N-1),H$L+2*(H$N-1)+1,H$L+2*H$N+1,H$L+2*H$N+1,H$L+2*H$N,H$L+2*(H$N-1));return H$b.push(H$L+2*(H$N-1),H$L+2*(H$N-1)+1,H$L+1,H$L+1,H$L,H$L+2*(H$N-1)),H$h},H$l}(),H$Fa=function(H$g){function H$h(H$a,H$b,H$c,H$d,H$e,H$f){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=H$g.create(),this._points=H$c.slice(0,H$c.length),H$h.__super.call(this,H$a,H$b,0,0,this._points.length/2,H$d,H$e,H$f)}H$m(H$h,"laya.webgl.shapes.Polygon",H$g);var H$a=H$h.prototype;return H$a.rebuild=function(H$a){this._repaint||(this._points.length=0,this._points=this._points.concat(H$a))},H$a.setMatrix=function(H$a){H$a.copyTo(this._mat)},H$a.needUpdate=function(H$a){return this._repaint=this._mat.a==H$a.a&&this._mat.b==H$a.b&&this._mat.c==H$a.c&&this._mat.d==H$a.d&&this._mat.tx==H$a.tx&&this._mat.ty==H$a.ty,!this._repaint},H$a.getData=function(H$a,H$b,H$c){var H$d,H$e=0,H$f=this._points,H$g=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=H$c){for(this._start=H$c,H$d=[],H$g=this.earcutTriangles.length,H$e=0;H$e<H$g;H$e++)H$d.push(this.earcutTriangles[H$e]+H$c);this.mUint16Array=new Uint16Array(H$d)}}else{this._start=H$c,H$d=[];var H$h=[],H$i=[],H$j=this.color,H$k=(H$j>>16&255)/255,H$l=(H$j>>8&255)/255,H$m=(255&H$j)/255;for(H$g=Math.floor(H$f.length/2),H$e=0;H$e<H$g;H$e++)H$h.push(this.x+H$f[2*H$e],this.y+H$f[2*H$e+1],H$k,H$l,H$m),H$i.push(this.x+H$f[2*H$e],this.y+H$f[2*H$e+1]);for(this.earcutTriangles=H$da.earcut(H$i,null,2),H$g=this.earcutTriangles.length,H$e=0;H$e<H$g;H$e++)H$d.push(this.earcutTriangles[H$e]+H$c);this.mUint16Array=new Uint16Array(H$d),this.mFloat32Array=new Float32Array(H$h)}H$a.append(this.mUint16Array),H$b.append(this.mFloat32Array)},H$h}(H$ca),H$Ga=function(H$a){function H$f(){this._matrix=new H$z,this._matrix4=H$pa.defaultMatrix4.concat(),H$f.__super.call(this,1e4),this.shaderValue=new H$ya(0,0)}H$m(H$f,"laya.webgl.submit.SubmitCanvas",H$fa);var H$b=H$f.prototype;return H$b.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var H$a=H$sa.worldAlpha,H$b=H$sa.worldMatrix4,H$c=H$sa.worldMatrix,H$d=H$sa.worldFilters,H$e=H$sa.worldShaderDefines,H$f=this.shaderValue,H$g=this._matrix,H$h=this._matrix4,H$i=H$z.TEMP;return H$z.mul(H$g,H$c,H$i),H$h[0]=H$i.a,H$h[1]=H$i.b,H$h[4]=H$i.c,H$h[5]=H$i.d,H$h[12]=H$i.tx,H$h[13]=H$i.ty,H$sa.worldMatrix=H$i.clone(),H$sa.worldMatrix4=H$h,H$sa.worldAlpha=H$sa.worldAlpha*H$f.alpha,H$f.filters&&H$f.filters.length&&(H$sa.worldFilters=H$f.filters,H$sa.worldShaderDefines=H$f.defines),this._ctx_src.flush(),H$sa.worldAlpha=H$a,H$sa.worldMatrix4=H$b,H$sa.worldMatrix.destroy(),H$sa.worldMatrix=H$c,H$sa.worldFilters=H$d,H$sa.worldShaderDefines=H$e,1},H$b.releaseRender=function(){var H$a=H$f._cache;this._ctx_src=null,H$a[H$a._length++]=this},H$b.getRenderType=function(){return 10003},H$f.create=function(H$a,H$b,H$c){var H$d=H$f._cache._length?H$f._cache[--H$f._cache._length]:new H$f;H$d._ctx_src=H$a;var H$e=H$d.shaderValue;return H$e.alpha=H$b,H$e.defines.setValue(0),H$c&&H$c.length&&H$e.setFilters(H$c),H$d},H$f._cache=((H$f._cache=[])._length=0,H$f._cache),H$f}(),H$Ha=function(H$a){function H$j(H$a){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===H$a&&(H$a=1e4),H$j.__super.call(this,H$a)}H$m(H$j,"laya.webgl.submit.SubmitTexture",H$fa);var H$b=H$j.prototype;return H$b.releaseRender=function(){var H$a=H$j._cache;(H$a[H$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},H$b.addTexture=function(H$a,H$b){this._texsID[this._texs.length]=H$a._uvID,this._texs.push(H$a),this._vbPos.push(H$b)},H$b.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var H$a=this.shaderValue.textureHost.bitmap;if(null!==H$a)for(var H$b=this._vb.getFloat32Array(),H$c=0,H$d=this._texs.length;H$c<H$d;H$c++){var H$e=this._texs[H$c];H$e.active();var H$f=H$e.uv;if(this._texsID[H$c]!==H$e._uvID){this._texsID[H$c]=H$e._uvID;var H$g=this._vbPos[H$c];H$b[H$g+2]=H$f[0],H$b[H$g+3]=H$f[1],H$b[H$g+6]=H$f[2],H$b[H$g+7]=H$f[3],H$b[H$g+10]=H$f[4],H$b[H$g+11]=H$f[5],H$b[H$g+14]=H$f[6],H$b[H$g+15]=H$f[7],this._vb.setNeedUpload()}H$e.bitmap!==H$a&&(this._isSameTexture=!1)}}},H$b.renderSubmit=function(){if(0===this._numEle)return H$j._shaderSet=!1,1;var H$a=this.shaderValue.textureHost;if(H$a){var H$b=H$a.source;if(!H$a.bitmap||!H$b)return H$j._shaderSet=!1,1;this.shaderValue.texture=H$b,H$a.alphaTexture&&H$a.alphaTexture.source&&(this.shaderValue.texture1=H$a.alphaTexture.source)}this._vb.bind_upload(this._ib);var H$c=H$ua.mainContext;if(H$Q.activeBlendFunction!==this._blendFn&&(H$c.enable(3042),this._blendFn(H$c),H$Q.activeBlendFunction=this._blendFn),H$E.drawCall++,H$E.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&H$Ja.activeShader&&H$j._shaderSet?(H$Ja.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&H$Ja.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),H$j._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var H$d=H$a.bitmap,H$e=0,H$f=H$Ja.activeShader,H$g=0,H$h=this._texs.length;H$g<H$h;H$g++){var H$i=this._texs[H$g];H$i.bitmap===H$d&&H$g+1!==H$h||(H$f.uploadTexture2D(H$i.source),H$c.drawElements(4,6*(H$g-H$e+1),5123,this._startIdx+6*H$e*H$pa.BYTES_PIDX),H$d=H$i.bitmap,H$e=H$g)}else H$c.drawElements(4,this._numEle,5123,this._startIdx);return 1},H$j.create=function(H$a,H$b,H$c,H$d,H$e){var H$f=H$j._cache._length?H$j._cache[--H$j._cache._length]:new H$j;null==H$c&&((H$c=H$f._selfVb||(H$f._selfVb=H$_a.create(-1))).clear(),H$d=0),H$f._ib=H$b,H$f._vb=H$c,H$f._startIdx=H$d*H$pa.BYTES_PIDX,H$f._numEle=0;var H$g=H$a._nBlendType;H$f._blendFn=H$a._targets?H$Q.targetFns[H$g]:H$Q.fns[H$g],H$f.shaderValue=H$e,H$f.shaderValue.setValue(H$a._shader2D);var H$h=H$a._shader2D.filters;return H$h&&H$f.shaderValue.setFilters(H$h),H$f},H$j._cache=((H$j._cache=[])._length=0,H$j._cache),H$j._shaderSet=!0,H$j}(),H$Ia=function(H$a){function H$r(){H$r.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}H$m(H$r,"laya.webgl.utils.MeshTexture",H$ra);var H$b=H$r.prototype;return H$b.addData=function(H$a,H$b,H$c,H$d,H$e,H$f){for(var H$g=H$a.length/2,H$h=this._vb.needSize(H$g*H$r.const_stride)>>2,H$i=this._vb.getFloat32Array(),H$j=0,H$k=0;H$k<H$g;H$k++){var H$l=H$a[H$j],H$m=H$a[H$j+1],H$n=H$l*H$d.a+H$m*H$d.c+H$d.tx,H$o=H$l*H$d.b+H$m*H$d.d+H$d.ty;H$i[H$h++]=H$n,H$i[H$h++]=H$o,H$i[H$h++]=H$b[H$j],H$i[H$h++]=H$b[H$j+1],H$j+=2}this._vb.setNeedUpload();var H$p=this.vertNum;if(0<H$p){(H$g=H$c.length)>H$r.tmpIdx.length&&(H$r.tmpIdx=new Uint16Array(H$g));for(var H$q=0;H$q<H$g;H$q++)H$r.tmpIdx[H$q]=H$c[H$q]+H$p;this._ib.appendU16Array(H$r.tmpIdx,H$c.length)}else this._ib.append(H$c);this._ib.setNeedUpload(),this.vertNum+=H$g,this.indexNum+=H$c.length},H$b.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},H$b.destroy=function(){this._ib.destroy(),this._vb.destroy()},H$r.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new H$r},H$r.const_stride=16,H$r._POOL=[],H$g(H$r,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),H$r}(),H$Ja=function(H$a){function H$b(){H$b.__super.call(this),this.lock=!0}return H$m(H$b,"laya.webgl.shader.BaseShader",H$t),H$b.activeShader=null,H$b.bindShader=null,H$b}(),H$Ka=function(H$b){function H$k(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===H$c&&(H$c=6408),void 0===H$d&&(H$d=5121),void 0===H$e&&(H$e=34041),void 0===H$f&&(H$f=!1),void 0===H$g&&(H$g=!1),void 0===H$h&&(H$h=-1),void 0===H$i&&(H$i=-1),this._type=1,this._w=H$a,this._h=H$b,this._surfaceFormat=H$c,this._surfaceType=H$d,this._depthStencilFormat=H$e,H$r.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=H$f,this._repeat=H$g,this._minFifter=H$h,this._magFifter=H$i,this._createWebGLRenderTarget(),this.bitmap.lock=!0,H$k.__super.call(this,this.bitmap,H$I.INV_UV)}H$m(H$k,"laya.webgl.resource.RenderTarget2D",H$b);var H$a=H$k.prototype;return H$w.imps(H$a,{"laya.resource.IDispose":!0}),H$a.getType=function(){return this._type},H$a.getTexture=function(){return this},H$a.size=function(H$a,H$b){this._w==H$a&&this._h==H$b||(this._w=H$a,this._h=H$b,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},H$a.release=function(){this.destroy()},H$a.recycle=function(){H$k.POOL.push(this)},H$a.start=function(){var H$a=H$ua.mainContext;return this._preRenderTarget=H$sa.curRenderTarget,H$sa.curRenderTarget=this,H$a.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(H$a.viewport(0,0,this._w,this._h),this._svWidth=H$sa.width,this._svHeight=H$sa.height,H$sa.width=this._w,H$sa.height=this._h,H$Ja.activeShader=null),this},H$a.clear=function(H$a,H$b,H$c,H$d){void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0),void 0===H$d&&(H$d=1);var H$e=H$ua.mainContext;H$e.clearColor(H$a,H$b,H$c,H$d);var H$f=16384;switch(this._depthStencilFormat){case 33189:H$f|=256;break;case 36168:H$f|=1024;break;case 34041:H$f|=256,H$f|=1024}H$e.clear(H$f)},H$a.end=function(){var H$a=H$ua.mainContext;H$a.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,H$sa.curRenderTarget=this._preRenderTarget,1==this._type?(H$a.viewport(0,0,this._svWidth,this._svHeight),H$sa.width=this._svWidth,H$sa.height=this._svHeight,H$Ja.activeShader=null):H$a.viewport(0,0,H$w.stage.width,H$w.stage.height)},H$a.getData=function(H$a,H$b,H$c,H$d){var H$e=H$ua.mainContext;if(H$e.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===H$e.checkFramebufferStatus(36160)))return H$e.bindFramebuffer(36160,null),null;var H$f=new Uint8Array(this._w*this._h*4);return H$e.readPixels(H$a,H$b,H$c,H$d,this._surfaceFormat,this._surfaceType,H$f),H$e.bindFramebuffer(36160,null),H$f},H$a.destroy=function(H$a){void 0===H$a&&(H$a=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,H$b.prototype.destroy.call(this))},H$a.dispose=function(){},H$a._createWebGLRenderTarget=function(){this.bitmap=new H$Ua(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(H$a){this.event("recovered")})},H$d(0,H$a,"surfaceFormat",function(){return this._surfaceFormat}),H$d(0,H$a,"magFifter",function(){return this._magFifter}),H$d(0,H$a,"surfaceType",function(){return this._surfaceType}),H$d(0,H$a,"mipMap",function(){return this._mipMap}),H$d(0,H$a,"depthStencilFormat",function(){return this._depthStencilFormat}),H$d(0,H$a,"minFifter",function(){return this._minFifter}),H$d(0,H$a,"source",function(){return this._alreadyResolved?H$w.superGet(H$I,this,"source"):null}),H$k.create=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i){void 0===H$c&&(H$c=6408),void 0===H$d&&(H$d=5121),void 0===H$e&&(H$e=34041),void 0===H$f&&(H$f=!1),void 0===H$g&&(H$g=!1),void 0===H$h&&(H$h=-1),void 0===H$i&&(H$i=-1);var H$j=H$k.POOL.pop();return H$j||(H$j=new H$k(H$a,H$b)),H$j.bitmap&&H$j._w==H$a&&H$j._h==H$b&&H$j._surfaceFormat==H$c&&H$j._surfaceType==H$d&&H$j._depthStencilFormat==H$e&&H$j._mipMap==H$f&&H$j._repeat==H$g&&H$j._minFifter==H$h&&H$j._magFifter==H$i||(H$j._w=H$a,H$j._h=H$b,H$j._surfaceFormat=H$c,H$j._surfaceType=H$d,H$j._depthStencilFormat=H$e,H$r.isConchWebGL&&34041===H$j._depthStencilFormat&&(H$j._depthStencilFormat=33189),H$j._mipMap=H$f,H$j._repeat=H$g,H$j._minFifter=H$h,H$j._magFifter=H$i,H$j.release(),H$j._createWebGLRenderTarget()),H$j},H$k.TYPE2D=1,H$k.TYPE3D=2,H$k.POOL=[],H$k}(H$I),H$La=function(H$a){function H$b(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,H$b.__super.call(this),H$b._gl=H$ua.mainContext}H$m(H$b,"laya.webgl.utils.Buffer",H$t);var H$c=H$b.prototype;return H$c._bind=function(){this.activeResource(),H$b._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(H$b._bindVertexBuffer=this._glBuffer),H$b._gl.bindBuffer(this._bufferType,H$b._bindActive[this._bufferType]=this._glBuffer),H$Ja.activeShader=null)},H$c.recreateResource=function(){this._glBuffer||(this._glBuffer=H$b._gl.createBuffer()),this.completeCreate()},H$c.disposeResource=function(){this._glBuffer&&(H$ua.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},H$d(0,H$c,"bufferUsage",function(){return this._bufferUsage}),H$b._gl=null,H$b._bindActive={},H$b._bindVertexBuffer=null,H$b._enableAtributes=[],H$b}(),H$Ma=function(H$a){function H$c(H$a){this.texcoord=null,this.offsetX=300,this.offsetY=0,H$c.__super.call(this,512,0);var H$b=8*H$pa.BYTES_PE;this.position=[2,5126,!1,H$b,0],this.texcoord=[2,5126,!1,H$b,2*H$pa.BYTES_PE],this.color=[4,5126,!1,H$b,4*H$pa.BYTES_PE]}return H$m(H$c,"laya.webgl.shader.d2.skinAnishader.SkinSV",H$ya),H$c}(),H$Na=function(H$a){function H$b(H$a){H$b.__super.call(this,2,0),this.color=[]}return H$m(H$b,"laya.webgl.shader.d2.value.Color2dSV",H$ya),H$b.prototype.setValue=function(H$a){H$a.fillStyle&&(this.color=H$a.fillStyle._color._color),H$a.strokeStyle&&(this.color=H$a.strokeStyle._color._color)},H$b}(),H$Oa=function(H$a){function H$b(H$a){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=H$ya._TEXCOORD,H$b.__super.call(this,256,0)}H$m(H$b,"laya.webgl.shader.d2.value.FillTextureSV",H$ya);var H$c=H$b.prototype;return H$c.setValue=function(H$a){this.ALPHA=H$a.ALPHA,H$a.filters&&this.setFilters(H$a.filters)},H$c.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},H$b}(),H$Pa=function(H$a){function H$b(H$a){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=H$ya._TEXCOORD,void 0===H$a&&(H$a=0),H$b.__super.call(this,1,H$a)}H$m(H$b,"laya.webgl.shader.d2.value.TextureSV",H$ya);var H$c=H$b.prototype;return H$c.setValue=function(H$a){this.ALPHA=H$a.ALPHA,H$a.filters&&this.setFilters(H$a.filters)},H$c.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},H$b}(),H$Qa=function(H$a){function H$b(H$a){this.a_color=null,this.u_pos=[0,0],H$b.__super.call(this,4,0),this.position=[2,5126,!1,5*H$pa.BYTES_PE,0],this.a_color=[3,5126,!1,5*H$pa.BYTES_PE,2*H$pa.BYTES_PE]}return H$m(H$b,"laya.webgl.shader.d2.value.PrimitiveSV",H$ya),H$b}(),H$Ra=function(H$a){function H$b(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,H$b.__super.call(this)}H$m(H$b,"laya.webgl.atlas.AtlasWebGLCanvas",H$a);var H$c=H$b.prototype;return H$c.recreateResource=function(){var H$a=H$ua.mainContext,H$b=this._source=H$a.createTexture(),H$c=H$va.curBindTexTarget,H$d=H$va.curBindTexValue;H$va.bindTexture(H$a,3553,H$b),H$a.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),H$a.texParameteri(3553,10241,9729),H$a.texParameteri(3553,10240,9729),H$a.texParameteri(3553,10242,33071),H$a.texParameteri(3553,10243,33071),H$c&&H$d&&H$va.bindTexture(H$a,H$c,H$d),this.memorySize=this._w*this._h*4,this.completeCreate()},H$c.disposeResource=function(){this._source&&(H$ua.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},H$c.texSubImage2D=function(H$a,H$b,H$c){if(H$r.isFlash){this._flashCacheImage||(this._flashCacheImage=H$p.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var H$d=H$c.bitmapdata;this._flashCacheImage._image.copyPixels(H$d,0,0,H$d.width,H$d.height,H$a,H$b),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var H$e=H$ua.mainContext,H$f=H$va.curBindTexTarget,H$g=H$va.curBindTexValue;H$va.bindTexture(H$e,3553,this._source),H$e.pixelStorei(37441,!0),0<=H$a-1&&H$e.texSubImage2D(3553,0,H$a-1,H$b,6408,5121,H$c),H$a+1<=this._w&&H$e.texSubImage2D(3553,0,H$a+1,H$b,6408,5121,H$c),0<=H$b-1&&H$e.texSubImage2D(3553,0,H$a,H$b-1,6408,5121,H$c),H$b+1<=this._h&&H$e.texSubImage2D(3553,0,H$a,H$b+1,6408,5121,H$c),H$e.texSubImage2D(3553,0,H$a,H$b,6408,5121,H$c),H$e.pixelStorei(37441,!1),H$f&&H$g&&H$va.bindTexture(H$e,H$f,H$g)}},H$c.texSubImage2DPixel=function(H$a,H$b,H$c,H$d,H$e){var H$f=H$ua.mainContext,H$g=H$va.curBindTexTarget,H$h=H$va.curBindTexValue;H$va.bindTexture(H$f,3553,this._source);var H$i=new Uint8Array(H$e.data);H$f.pixelStorei(37441,!0),H$f.texSubImage2D(3553,0,H$a,H$b,H$c,H$d,6408,5121,H$i),H$f.pixelStorei(37441,!1),H$g&&H$h&&H$va.bindTexture(H$f,H$g,H$h)},H$d(0,H$c,"width",H$a.prototype._$get_width,function(H$a){this._w=H$a}),H$d(0,H$c,"height",H$a.prototype._$get_height,function(H$a){this._h=H$a}),H$b}(H$c),H$Sa=function(H$a){function H$e(){this.flipY=!0,this.alwaysChange=!1,H$e.__super.call(this)}H$m(H$e,"laya.webgl.resource.WebGLCanvas",H$c);var H$b=H$e.prototype;return H$b.getCanvas=function(){return this._canvas},H$b.clear=function(){this._ctx&&this._ctx.clear()},H$b.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},H$b._setContext=function(H$a){this._ctx=H$a},H$b.getContext=function(H$a,H$b){return this._ctx?this._ctx:this._ctx=H$e._createContext(this)},H$b.size=function(H$a,H$b){this._w==H$a&&this._h==H$b||(this._w=H$a,this._h=H$b,this._ctx&&this._ctx.size(H$a,H$b),this._canvas&&(this._canvas.height=H$b,this._canvas.width=H$a))},H$b.activeResource=function(H$a){void 0===H$a&&(H$a=!1),this._source||this.recreateResource()},H$b.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},H$b.disposeResource=function(){this._source&&!this.iscpuSource&&(H$ua.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},H$b.createWebGlTexture=function(){var H$a=H$ua.mainContext;this._canvas;var H$b=this._source=H$a.createTexture();this.iscpuSource=!1;var H$c=H$va.curBindTexTarget,H$d=H$va.curBindTexValue;H$va.bindTexture(H$a,3553,H$b),H$a.pixelStorei(37440,this.flipY?1:0),H$e.premulAlpha&&H$a.pixelStorei(37441,!0),H$a.texImage2D(3553,0,6408,6408,5121,this._imgData),H$e.premulAlpha&&H$a.pixelStorei(37441,!1),H$a.texParameteri(3553,10240,9729),H$a.texParameteri(3553,10241,9729),H$a.texParameteri(3553,10242,33071),H$a.texParameteri(3553,10243,33071),H$a.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,H$c&&H$d&&H$va.bindTexture(H$a,H$c,H$d)},H$b.reloadCanvasData=function(){var H$a=H$ua.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var H$b=H$va.curBindTexTarget,H$c=H$va.curBindTexValue;H$va.bindTexture(H$a,3553,this._source),H$e.premulAlpha&&H$a.pixelStorei(37441,!0),H$a.texImage2D(3553,0,6408,6408,5121,this._imgData),H$e.premulAlpha&&H$a.pixelStorei(37441,!1),H$a.pixelStorei(37440,0),H$b&&H$c&&H$va.bindTexture(H$a,H$b,H$c)},H$b.texSubImage2D=function(H$a,H$b,H$c){var H$d=H$ua.mainContext,H$e=H$va.curBindTexTarget,H$f=H$va.curBindTexValue;H$va.bindTexture(H$d,3553,this._source),H$d.pixelStorei(37441,!0),H$d.texSubImage2D(3553,0,H$b,H$c,6408,5121,H$a._source),H$d.pixelStorei(37441,!1),H$e&&H$f&&H$va.bindTexture(H$d,H$e,H$f)},H$b.toBase64=function(H$a,H$b,H$c){var H$d=null;this._canvas&&(H$d=this._canvas.toDataURL(H$a,H$b)),H$c.call(this,H$d)},H$d(0,H$b,"context",function(){return this._ctx}),H$d(0,H$b,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),H$d(0,H$b,"asBitmap",null,function(H$a){this._ctx&&(this._ctx.asBitmap=H$a)}),H$e._createContext=null,H$e.premulAlpha=!1,H$e}(),H$Ta=function(H$a){function H$f(H$a,H$b){this.CborderSize=12,H$f.__super.call(this),this.char=H$a,this.isSpace=" "===H$a,this.xs=H$b.scaleX,this.ys=H$b.scaleY,this.font=H$b.font.toString(),this.fontSize=H$b.font.size,this.fillColor=H$b.fillColor,this.borderColor=H$b.borderColor,this.lineWidth=H$b.lineWidth,this.underLine=H$b.underLine;var H$c,H$d=H$r.isConchApp;H$d?((H$c=ConchTextCanvas)._source=ConchTextCanvas,H$c._source.canvas=ConchTextCanvas):H$c=H$n.canvas.source,this.canvas=H$c,this._enableMerageInAtlas=!0,this._ctx=H$d?H$c:this.canvas.getContext("2d",void 0);var H$e=H$J.measureText(this.char,this.font);this.cw=H$e.width*this.xs,this.ch=(H$e.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new H$I(this)}H$m(H$f,"laya.webgl.resource.WebGLCharImage",H$c);var H$b=H$f.prototype;return H$w.imps(H$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),H$b.active=function(){this.texture.active()},H$b.recreateResource=function(){var H$a=H$r.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),H$a){var H$b=this.fontSize;1==this.xs&&1==this.ys||(H$b=parseInt(H$b*(this.xs>this.ys?this.xs:this.ys)+""));var H$c="normal 100 "+this.font;H$c=H$c.replace(H$f._fontSizeReg,H$b),this.borderColor&&(H$c+=" 1 "+this.borderColor),this._ctx.font=H$c,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,H$H.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var H$d=this._ctx.measureText(this.char).width+1;this._ctx.lineTo(H$d,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},H$b.onresize=function(H$a,H$b){this._w=H$a,this._h=H$b,this._allowMerageInAtlas=!0},H$b.clearAtlasSource=function(){},H$d(0,H$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),H$d(0,H$b,"atlasSource",function(){return this.canvas}),H$d(0,H$b,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(H$a){this._enableMerageInAtlas=H$a}),H$f.createOneChar=function(H$a,H$b){return new H$f(H$a,H$b)},H$f._fontSizeReg=new RegExp("\\d+(?=px)","g"),H$f}(),H$Ua=function(H$a){function H$j(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i){void 0===H$c&&(H$c=6408),void 0===H$d&&(H$d=5121),void 0===H$e&&(H$e=34041),void 0===H$f&&(H$f=!1),void 0===H$g&&(H$g=!1),void 0===H$h&&(H$h=-1),void 0===H$i&&(H$i=1),H$j.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=H$a,this._h=H$b,this._surfaceFormat=H$c,this._surfaceType=H$d,this._depthStencilFormat=H$e,this._mipMap=H$f,this._repeat=H$g,this._minFifter=H$h,this._magFifter=H$i}H$m(H$j,"laya.webgl.resource.WebGLRenderTarget",H$c);var H$b=H$j.prototype;return H$b.recreateResource=function(){var H$a=H$ua.mainContext;this._frameBuffer||(this._frameBuffer=H$a.createFramebuffer()),this._source||(this._source=H$a.createTexture());var H$b=H$va.curBindTexTarget,H$c=H$va.curBindTexValue;H$va.bindTexture(H$a,3553,this._source),H$a.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var H$d=this._minFifter,H$e=this._magFifter,H$f=this._repeat?10497:33071,H$g=H$k.isPOT(this._w,this._h);if(H$g?(this._mipMap?-1!==H$d||(H$d=9987):-1!==H$d||(H$d=9729),-1!==H$e||(H$e=9729),H$a.texParameteri(3553,10241,H$d),H$a.texParameteri(3553,10240,H$e),H$a.texParameteri(3553,10242,H$f),H$a.texParameteri(3553,10243,H$f),this._mipMap&&H$a.generateMipmap(3553)):(-1!==H$d||(H$d=9729),-1!==H$e||(H$e=9729),H$a.texParameteri(3553,10241,H$d),H$a.texParameteri(3553,10240,H$e),H$a.texParameteri(3553,10242,33071),H$a.texParameteri(3553,10243,33071)),H$a.bindFramebuffer(36160,this._frameBuffer),H$a.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=H$a.createRenderbuffer()),H$a.bindRenderbuffer(36161,this._depthStencilBuffer),H$a.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:H$a.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:H$a.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:H$a.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}H$a.bindFramebuffer(36160,null),H$b&&H$c&&H$va.bindTexture(H$a,H$b,H$c),H$a.bindRenderbuffer(36161,null),H$g&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},H$b.disposeResource=function(){this._frameBuffer&&(H$ua.mainContext.deleteTexture(this._source),H$ua.mainContext.deleteFramebuffer(this._frameBuffer),H$ua.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},H$d(0,H$b,"depthStencilBuffer",function(){return this._depthStencilBuffer}),H$d(0,H$b,"frameBuffer",function(){return this._frameBuffer}),H$j}(),H$Va=function(H$a){function H$h(H$a,H$b,H$c,H$d,H$e,H$f,H$g){this.offsetX=0,this.offsetY=0,H$h.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=H$f,this.canvas=H$a,this._ctx=H$a.getContext("2d",void 0),this._w=H$d,this._h=H$e,this.offsetX=H$b,this.offsetY=H$c,this.src=H$g,this._enableMerageInAtlas=!0,H$O.enabled&&this._w<H$O.atlasLimitWidth&&this._h<H$O.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}H$m(H$h,"laya.webgl.resource.WebGLSubImage",H$c);var H$b=H$h.prototype;return H$w.imps(H$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),H$b.size=function(H$a,H$b){this._w=H$a,this._h=H$b,this._ctx&&this._ctx.size(H$a,H$b),this.canvas&&(this.canvas.height=H$b,this.canvas.width=H$a)},H$b.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},H$b.createWebGlTexture=function(){var H$a=H$ua.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var H$b=this._source=H$a.createTexture(),H$c=H$va.curBindTexTarget,H$d=H$va.curBindTexValue;H$va.bindTexture(H$a,3553,H$b),H$a.pixelStorei(37441,!0),H$a.texImage2D(3553,0,6408,6408,5121,this.canvas),H$a.pixelStorei(37441,!1);var H$e=this.minFifter,H$f=this.magFifter,H$g=this.repeat?10497:33071,H$h=H$k.isPOT(this.width,this.height);H$h?(this.mipmap?-1!==H$e||(H$e=9987):-1!==H$e||(H$e=9729),-1!==H$f||(H$f=9729),H$a.texParameteri(3553,10240,H$f),H$a.texParameteri(3553,10241,H$e),H$a.texParameteri(3553,10242,H$g),H$a.texParameteri(3553,10243,H$g),this.mipmap&&H$a.generateMipmap(3553)):(-1!==H$e||(H$e=9729),-1!==H$f||(H$f=9729),H$a.texParameteri(3553,10241,H$e),H$a.texParameteri(3553,10240,H$f),H$a.texParameteri(3553,10242,33071),H$a.texParameteri(3553,10243,33071)),H$c&&H$d&&H$va.bindTexture(H$a,H$c,H$d),this.canvas=null,H$h&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},H$b.disposeResource=function(){H$O.enabled&&this._allowMerageInAtlas||!this._source||(H$ua.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},H$b.clearAtlasSource=function(){},H$d(0,H$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),H$d(0,H$b,"atlasSource",function(){return this.canvas}),H$d(0,H$b,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(H$a){this._allowMerageInAtlas=H$a}),H$h}(),H$Wa=function(H$a){function H$j(H$a,H$b,H$c,H$d){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,H$j.__super.call(this),!H$a||!H$b)throw"Shader Error";this._id=++H$j._count,this._vs=H$a,this._ps=H$b,this._nameMap=H$d||{},null!=H$c&&(H$j.sharders[H$c]=this)}H$m(H$j,"laya.webgl.shader.Shader",H$Ja);var H$b=H$j.prototype;return H$b.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},H$b.disposeResource=function(){H$ua.mainContext.deleteShader(this._vshader),H$ua.mainContext.deleteShader(this._pshader),H$ua.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},H$b._compile=function(){if(!H$ua.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var H$a=[this._vs,this._ps],H$b=H$ua.mainContext;if(this._program=H$b.createProgram(),this._vshader=H$j._createShader(H$b,H$a[0],35633),this._pshader=H$j._createShader(H$b,H$a[1],35632),H$b.attachShader(this._program,this._vshader),H$b.attachShader(this._program,this._pshader),H$b.linkProgram(this._program),!H$r.isConchApp&&!H$b.getProgramParameter(this._program,35714))throw H$b.getProgramInfoLog(this._program);var H$c,H$d,H$e=0,H$f=0;for(H$f=H$r.isConchApp?H$b.getProgramParameterEx(this._vs,this._ps,"",35721):H$b.getProgramParameter(this._program,35721),H$e=0;H$e<H$f;H$e++){var H$g=null;H$c={vartype:"attribute",glfun:null,ivartype:0,attrib:H$g=H$r.isConchApp?H$b.getActiveAttribEx(this._vs,this._ps,"",H$e):H$b.getActiveAttrib(this._program,H$e),location:H$b.getAttribLocation(this._program,H$g.name),name:H$g.name,type:H$g.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(H$c)}var H$h=0;for(H$h=H$r.isConchApp?H$b.getProgramParameterEx(this._vs,this._ps,"",35718):H$b.getProgramParameter(this._program,35718),H$e=0;H$e<H$h;H$e++){var H$i=null;H$i=H$r.isConchApp?H$b.getActiveUniformEx(this._vs,this._ps,"",H$e):H$b.getActiveUniform(this._program,H$e),0<(H$c={vartype:"uniform",glfun:null,ivartype:1,attrib:H$g,location:H$b.getUniformLocation(this._program,H$i.name),name:H$i.name,type:H$i.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(H$c.name=H$c.name.substr(0,H$c.name.length-3),H$c.isArray=!0,H$c.location=H$b.getUniformLocation(this._program,H$c.name)),this._params.push(H$c)}for(H$e=0,H$d=this._params.length;H$e<H$d;H$e++)if((H$c=this._params[H$e]).indexOfParams=H$e,H$c.index=1,H$c.value=[H$c.location,null],H$c.codename=H$c.name,H$c.name=this._nameMap[H$c.codename]?this._nameMap[H$c.codename]:H$c.codename,(this._paramsMap[H$c.name]=H$c)._this=this,H$c.uploadedValue=[],"attribute"!==H$c.vartype)switch(H$c.type){case 5124:H$c.fun=H$c.isArray?this._uniform1iv:this._uniform1i;break;case 5126:H$c.fun=H$c.isArray?this._uniform1fv:this._uniform1f;break;case 35664:H$c.fun=H$c.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:H$c.fun=H$c.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:H$c.fun=H$c.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:H$c.fun=this._uniform_sampler2D;break;case 35680:H$c.fun=this._uniform_samplerCube;break;case 35676:H$c.glfun=H$b.uniformMatrix4fv,H$c.fun=this._uniformMatrix4fv;break;case 35670:H$c.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else H$c.fun=this._attribute}},H$b.getUniform=function(H$a){return this._paramsMap[H$a]},H$b._attribute=function(H$a,H$b){var H$c=H$ua.mainContext,H$d=H$La._enableAtributes,H$e=H$a.location;return H$d[H$e]||H$c.enableVertexAttribArray(H$e),H$c.vertexAttribPointer(H$e,H$b[0],H$b[1],H$b[2],H$b[3],H$b[4]+this._offset),H$d[H$e]=H$La._bindVertexBuffer,1},H$b._uniform1f=function(H$a,H$b){var H$c=H$a.uploadedValue;return H$c[0]!==H$b?(H$ua.mainContext.uniform1f(H$a.location,H$c[0]=H$b),1):0},H$b._uniform1fv=function(H$a,H$b){if(H$b.length<4){var H$c=H$a.uploadedValue;return H$c[0]!==H$b[0]||H$c[1]!==H$b[1]||H$c[2]!==H$b[2]||H$c[3]!==H$b[3]?(H$ua.mainContext.uniform1fv(H$a.location,H$b),H$c[0]=H$b[0],H$c[1]=H$b[1],H$c[2]=H$b[2],H$c[3]=H$b[3],1):0}return H$ua.mainContext.uniform1fv(H$a.location,H$b),1},H$b._uniform_vec2=function(H$a,H$b){var H$c=H$a.uploadedValue;return H$c[0]!==H$b[0]||H$c[1]!==H$b[1]?(H$ua.mainContext.uniform2f(H$a.location,H$c[0]=H$b[0],H$c[1]=H$b[1]),1):0},H$b._uniform_vec2v=function(H$a,H$b){if(H$b.length<2){var H$c=H$a.uploadedValue;return H$c[0]!==H$b[0]||H$c[1]!==H$b[1]||H$c[2]!==H$b[2]||H$c[3]!==H$b[3]?(H$ua.mainContext.uniform2fv(H$a.location,H$b),H$c[0]=H$b[0],H$c[1]=H$b[1],H$c[2]=H$b[2],H$c[3]=H$b[3],1):0}return H$ua.mainContext.uniform2fv(H$a.location,H$b),1},H$b._uniform_vec3=function(H$a,H$b){var H$c=H$a.uploadedValue;return H$c[0]!==H$b[0]||H$c[1]!==H$b[1]||H$c[2]!==H$b[2]?(H$ua.mainContext.uniform3f(H$a.location,H$c[0]=H$b[0],H$c[1]=H$b[1],H$c[2]=H$b[2]),1):0},H$b._uniform_vec3v=function(H$a,H$b){return H$ua.mainContext.uniform3fv(H$a.location,H$b),1},H$b._uniform_vec4=function(H$a,H$b){var H$c=H$a.uploadedValue;return H$c[0]!==H$b[0]||H$c[1]!==H$b[1]||H$c[2]!==H$b[2]||H$c[3]!==H$b[3]?(H$ua.mainContext.uniform4f(H$a.location,H$c[0]=H$b[0],H$c[1]=H$b[1],H$c[2]=H$b[2],H$c[3]=H$b[3]),1):0},H$b._uniform_vec4v=function(H$a,H$b){return H$ua.mainContext.uniform4fv(H$a.location,H$b),1},H$b._uniformMatrix2fv=function(H$a,H$b){return H$ua.mainContext.uniformMatrix2fv(H$a.location,!1,H$b),1},H$b._uniformMatrix3fv=function(H$a,H$b){return H$ua.mainContext.uniformMatrix3fv(H$a.location,!1,H$b),1},H$b._uniformMatrix4fv=function(H$a,H$b){return H$ua.mainContext.uniformMatrix4fv(H$a.location,!1,H$b),1},H$b._uniform1i=function(H$a,H$b){var H$c=H$a.uploadedValue;return H$c[0]!==H$b?(H$ua.mainContext.uniform1i(H$a.location,H$c[0]=H$b),1):0},H$b._uniform1iv=function(H$a,H$b){return H$ua.mainContext.uniform1iv(H$a.location,H$b),1},H$b._uniform_ivec2=function(H$a,H$b){var H$c=H$a.uploadedValue;return H$c[0]!==H$b[0]||H$c[1]!==H$b[1]?(H$ua.mainContext.uniform2i(H$a.location,H$c[0]=H$b[0],H$c[1]=H$b[1]),1):0},H$b._uniform_ivec2v=function(H$a,H$b){return H$ua.mainContext.uniform2iv(H$a.location,H$b),1},H$b._uniform_vec3i=function(H$a,H$b){var H$c=H$a.uploadedValue;return H$c[0]!==H$b[0]||H$c[1]!==H$b[1]||H$c[2]!==H$b[2]?(H$ua.mainContext.uniform3i(H$a.location,H$c[0]=H$b[0],H$c[1]=H$b[1],H$c[2]=H$b[2]),1):0},H$b._uniform_vec3vi=function(H$a,H$b){return H$ua.mainContext.uniform3iv(H$a.location,H$b),1},H$b._uniform_vec4i=function(H$a,H$b){var H$c=H$a.uploadedValue;return H$c[0]!==H$b[0]||H$c[1]!==H$b[1]||H$c[2]!==H$b[2]||H$c[3]!==H$b[3]?(H$ua.mainContext.uniform4i(H$a.location,H$c[0]=H$b[0],H$c[1]=H$b[1],H$c[2]=H$b[2],H$c[3]=H$b[3]),1):0},H$b._uniform_vec4vi=function(H$a,H$b){return H$ua.mainContext.uniform4iv(H$a.location,H$b),1},H$b._uniform_sampler2D=function(H$a,H$b){var H$c=H$ua.mainContext,H$d=H$a.uploadedValue;return null==H$d[0]?(H$d[0]=this._curActTexIndex,H$c.uniform1i(H$a.location,this._curActTexIndex),H$c.activeTexture(H$j._TEXTURES[this._curActTexIndex]),H$va.bindTexture(H$c,3553,H$b),this._curActTexIndex++,1):(H$c.activeTexture(H$j._TEXTURES[H$d[0]]),H$va.bindTexture(H$c,3553,H$b),0)},H$b._uniform_samplerCube=function(H$a,H$b){var H$c=H$ua.mainContext,H$d=H$a.uploadedValue;return null==H$d[0]?(H$d[0]=this._curActTexIndex,H$c.uniform1i(H$a.location,this._curActTexIndex),H$c.activeTexture(H$j._TEXTURES[this._curActTexIndex]),H$va.bindTexture(H$c,34067,H$b),this._curActTexIndex++,1):(H$c.activeTexture(H$j._TEXTURES[H$d[0]]),H$va.bindTexture(H$c,34067,H$b),0)},H$b._noSetValue=function(H$a){console.log("no....:"+H$a.name)},H$b.uploadOne=function(H$a,H$b){this.activeResource(),H$va.UseProgram(this._program);var H$c=this._paramsMap[H$a];H$c.fun.call(this,H$c,H$b)},H$b.uploadTexture2D=function(H$a){H$E.shaderCall++;var H$b=H$ua.mainContext;H$b.activeTexture(33984),H$va.bindTexture(H$b,3553,H$a)},H$b.uploadTexture2D1=function(H$a){H$E.shaderCall++;var H$b=H$ua.mainContext;H$b.activeTexture(33985),H$va.bindTexture(H$b,3553,H$a)},H$b.upload=function(H$a,H$b){H$Ja.activeShader=H$Ja.bindShader=this,this._lastUseFrameCount===H$E.loopCount||this.activeResource(),H$va.UseProgram(this._program),this._reCompile?(H$b=this._params,this._reCompile=!1):H$b=H$b||this._params;H$ua.mainContext;for(var H$c,H$d,H$e=H$b.length,H$f=0,H$g=0;H$g<H$e;H$g++)null!==(H$d=H$a[(H$c=H$b[H$g]).name])&&(H$f+=H$c.fun.call(this,H$c,H$d));H$E.shaderCall+=H$f},H$b.uploadArray=function(H$a,H$b,H$c){H$Ja.activeShader=this,(H$Ja.bindShader=this).activeResource(),H$va.UseProgram(this._program);this._params;for(var H$d,H$e,H$f=0,H$g=H$b-2;0<=H$g;H$g-=2)(H$e=this._paramsMap[H$a[H$g]])&&null!=(H$d=H$a[H$g+1])&&(H$c&&H$c[H$e.name]&&H$c[H$e.name].bind(),H$f+=H$e.fun.call(this,H$e,H$d));H$E.shaderCall+=H$f},H$b.getParams=function(){return this._params},H$j.getShader=function(H$a){return H$j.sharders[H$a]},H$j.create=function(H$a,H$b,H$c,H$d){return new H$j(H$a,H$b,H$c,H$d)},H$j.withCompile=function(H$a,H$b,H$c,H$d){if(H$c&&H$j.sharders[H$c])return H$j.sharders[H$c];var H$e=H$j._preCompileShader[2e-4*H$a];if(!H$e)throw new Error("withCompile shader err!"+H$a);return H$e.createShader(H$b,H$c,H$d)},H$j.withCompile2D=function(H$a,H$b,H$c,H$d,H$e){if(H$d&&H$j.sharders[H$d])return H$j.sharders[H$d];var H$f=H$j._preCompileShader[2e-4*H$a+H$b];if(!H$f)throw new Error("withCompile shader err!"+H$a+" "+H$b);return H$f.createShader(H$c,H$d,H$e)},H$j.addInclude=function(H$a,H$b){H$ta.addInclude(H$a,H$b)},H$j.preCompile=function(H$a,H$b,H$c,H$d){var H$e=2e-4*H$a;H$j._preCompileShader[H$e]=new H$ta(H$e,H$b,H$c,H$d)},H$j.preCompile2D=function(H$a,H$b,H$c,H$d,H$e){var H$f=2e-4*H$a+H$b;H$j._preCompileShader[H$f]=new H$ta(H$f,H$c,H$d,H$e)},H$j._createShader=function(H$a,H$b,H$c){var H$d=H$a.createShader(H$c);return H$a.shaderSource(H$d,H$b),H$a.compileShader(H$d),H$d},H$j._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],H$j._count=0,H$j._preCompileShader={},H$j.SHADERNAME2ID=2e-4,H$j.sharders=((H$j.sharders=[]).length=32,H$j.sharders),H$g(H$j,["nameKey",function(){return this.nameKey=new H$F}]),H$j}(),H$Xa=function(H$a){function H$b(){this._maxsize=0,this._upload=!0,this._uploadSize=0,H$b.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}H$m(H$b,"laya.webgl.utils.Buffer2D",H$a);var H$c=H$b.prototype;return H$c.needSize=function(H$a){var H$b=this._byteLength;if(H$a){var H$c=this._byteLength+H$a;H$c<=this._buffer.byteLength||this._resizeBuffer(H$c<<1,!0),this._byteLength=H$c}return H$b},H$c._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),H$E.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,H$La._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),H$La._gl.bufferSubData(this._bufferType,0,this._buffer)},H$c._bufferSubData=function(H$a,H$b,H$c){if(void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0),this._maxsize=Math.max(this._maxsize,this._byteLength),H$E.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,H$La._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),H$b||H$c){var H$d=this._buffer.slice(H$b,H$c);H$La._gl.bufferSubData(this._bufferType,H$a,H$d)}else H$La._gl.bufferSubData(this._bufferType,H$a,this._buffer)},H$c._checkArrayUse=function(){},H$c._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},H$c._bind_subUpload=function(H$a,H$b,H$c){return void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(H$a,H$b,H$c),!0)},H$c._resizeBuffer=function(H$a,H$b){if(H$a<this._buffer.byteLength)return this;if(this.memorySize=H$a,H$b&&this._buffer&&0<this._buffer.byteLength){var H$c=new ArrayBuffer(H$a);new Uint8Array(H$c).set(new Uint8Array(this._buffer),0),this._buffer=H$c}else this._buffer=new ArrayBuffer(H$a);return this._checkArrayUse(),this._upload=!0,this},H$c.append=function(H$a){this._upload=!0;var H$b,H$c;H$b=H$a.byteLength,H$a instanceof Uint8Array?(this._resizeBuffer(this._byteLength+H$b,!0),H$c=new Uint8Array(this._buffer,this._byteLength)):H$a instanceof Uint16Array?(this._resizeBuffer(this._byteLength+H$b,!0),H$c=new Uint16Array(this._buffer,this._byteLength)):H$a instanceof Float32Array&&(this._resizeBuffer(this._byteLength+H$b,!0),H$c=new Float32Array(this._buffer,this._byteLength)),H$c.set(H$a,0),this._byteLength+=H$b,this._checkArrayUse()},H$c.appendU16Array=function(H$a,H$b){this._resizeBuffer(this._byteLength+2*H$b,!0);for(var H$c=new Uint16Array(this._buffer,this._byteLength,H$b),H$d=0;H$d<H$b;H$d++)H$c[H$d]=H$a[H$d];this._byteLength+=2*H$b,this._checkArrayUse()},H$c.appendEx=function(H$a,H$b){this._upload=!0;var H$c;H$c=H$a.byteLength,this._resizeBuffer(this._byteLength+H$c,!0),new H$b(this._buffer,this._byteLength).set(H$a,0),this._byteLength+=H$c,this._checkArrayUse()},H$c.appendEx2=function(H$a,H$b,H$c,H$d){void 0===H$d&&(H$d=1),this._upload=!0;var H$e,H$f;H$e=H$c*H$d,this._resizeBuffer(this._byteLength+H$e,!0),H$f=new H$b(this._buffer,this._byteLength);var H$g=0;for(H$g=0;H$g<H$c;H$g++)H$f[H$g]=H$a[H$g];this._byteLength+=H$e,this._checkArrayUse()},H$c.getBuffer=function(){return this._buffer},H$c.setNeedUpload=function(){this._upload=!0},H$c.getNeedUpload=function(){return this._upload},H$c.upload=function(){var H$a=this._bind_upload();return H$La._gl.bindBuffer(this._bufferType,null),H$La._bindActive[this._bufferType]=null,H$Ja.activeShader=null,H$a},H$c.subUpload=function(H$a,H$b,H$c){void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0);var H$d=this._bind_subUpload();return H$La._gl.bindBuffer(this._bufferType,null),H$La._bindActive[this._bufferType]=null,H$Ja.activeShader=null,H$d},H$c.disposeResource=function(){H$a.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},H$c.clear=function(){this._byteLength=0,this._upload=!0},H$d(0,H$c,"bufferLength",function(){return this._buffer.byteLength}),H$d(0,H$c,"byteLength",null,function(H$a){this._byteLength!==H$a&&(H$a<=this._buffer.byteLength||this._resizeBuffer(2*H$a+256,!0),this._byteLength=H$a)}),H$b.__int__=function(H$a){H$$a.QuadrangleIB=H$$a.create(35044),H$qa.fillIBQuadrangle(H$$a.QuadrangleIB,16)},H$b.FLOAT32=4,H$b.SHORT=2,H$b}(H$La),H$Ya=(function(H$b){function H$c(H$a){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,H$c.__super.call(this,9)}H$m(H$c,"laya.webgl.shader.d2.value.GlowSV",H$b);var H$a=H$c.prototype;H$a.setValue=function(H$a){H$b.prototype.setValue.call(this,H$a)},H$a.clear=function(){H$b.prototype.clear.call(this)}}(H$Pa),function(H$a){function H$b(H$a){H$b.__super.call(this,64),this.defines.add(64)}H$m(H$b,"laya.webgl.shader.d2.value.TextSV",H$a);var H$c=H$b.prototype;return H$c.release=function(){(H$b.pool[H$b._length++]=this).clear()},H$c.clear=function(){H$a.prototype.clear.call(this)},H$b.create=function(){return H$b._length?H$b.pool[--H$b._length]:new H$b(null)},H$b.pool=[],H$b._length=0,H$b}(H$Pa)),H$Za=function(H$a){function H$e(H$a,H$b,H$c,H$d){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,H$e.__super.call(this,H$a,H$b,H$c,H$d)}H$m(H$e,"laya.webgl.shader.d2.Shader2X",H$a);var H$b=H$e.prototype;return H$b.upload2dQuick1=function(H$a){this.upload(H$a,this._params2dQuick1||this._make2dQuick1())},H$b._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var H$a,H$b=this._params,H$c=0,H$d=H$b.length;H$c<H$d;H$c++)H$a=H$b[H$c],(H$r.isFlash||"size"!==H$a.name&&"position"!==H$a.name&&"texcoord"!==H$a.name)&&this._params2dQuick1.push(H$a)}return this._params2dQuick1},H$b.disposeResource=function(){H$a.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},H$b.upload2dQuick2=function(H$a){this.upload(H$a,this._params2dQuick2||this._make2dQuick2())},H$b._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var H$a,H$b=this._params,H$c=0,H$d=H$b.length;H$c<H$d;H$c++)H$a=H$b[H$c],(H$r.isFlash||"size"!==H$a.name)&&this._params2dQuick2.push(H$a)}return this._params2dQuick2},H$e.create=function(H$a,H$b,H$c,H$d){return new H$e(H$a,H$b,H$c,H$d)},H$e}(H$Wa),H$$a=function(H$a){function H$b(H$a){this._uint8Array=null,this._uint16Array=null,void 0===H$a&&(H$a=35044),H$b.__super.call(this),this._bufferUsage=H$a,this._bufferType=34963,H$r.isFlash||(this._buffer=new ArrayBuffer(8))}H$m(H$b,"laya.webgl.utils.IndexBuffer2D",H$Xa);var H$c=H$b.prototype;return H$c._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},H$c.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},H$c.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},H$c.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},H$b.QuadrangleIB=null,H$b.create=function(H$a){return void 0===H$a&&(H$a=35044),new H$b(H$a)},H$b}(),H$_a=function(H$a){function H$c(H$a,H$b){this._floatArray32=null,this._vertexStride=0,H$c.__super.call(this),this._vertexStride=H$a,this._bufferUsage=H$b,this._bufferType=34962,H$r.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}H$m(H$c,"laya.webgl.utils.VertexBuffer2D",H$a);var H$b=H$c.prototype;return H$b.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},H$b.bind=function(H$a){H$a&&H$a._bind(),this._bind()},H$b.insertData=function(H$a,H$b){this.getFloat32Array().set(H$a,H$b),this._upload=!0},H$b.bind_upload=function(H$a){H$a._bind_upload()||H$a._bind(),this._bind_upload()||this._bind()},H$b._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},H$b.disposeResource=function(){H$a.prototype.disposeResource.call(this)},H$b.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},H$d(0,H$b,"vertexStride",function(){return this._vertexStride}),H$c.create=function(H$a,H$b){return void 0===H$b&&(H$b=35048),new H$c(H$a,H$b)},H$c}(H$Xa),H$ab=function(H$a){function H$h(H$a,H$b,H$c,H$d,H$e,H$f){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===H$c&&(H$c=6408),void 0===H$d&&(H$d=!0),H$h.__super.call(this,H$a,H$b),H$a){if(this._format=H$c,this._mipmap=H$d,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof H$a)this._url=H$a,this._src=H$a,this._image=new H$n.window.Image,H$b&&(H$b.onload&&(this.onload=H$b.onload),H$b.onerror&&(this.onerror=H$b.onerror),H$b.onCreate&&H$b.onCreate(this)),this._image.crossOrigin=H$a&&0==H$a.indexOf("data:")?null:"",H$a&&(this._image.src=H$a);else if(H$a instanceof ArrayBuffer){this._src=H$b,this._url=this._src;var H$g=new H$i(H$a);H$g.readUTFBytes(4),H$g.readUTFBytes(2),H$g.getInt16();H$g.endian="bigEndian",this._w=H$g.getInt16(),this._h=H$g.getInt16();H$g.getInt16(),H$g.getInt16();this._image=new Uint8Array(H$a,H$g.pos),this._format=H$ua.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,H$O.enabled&&this._w<H$O.atlasLimitWidth&&this._h<H$O.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(H$a instanceof Uint8Array))return this._src=H$b,this._url=this._src,this._image=H$a.source||H$a,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=H$b,this._url=this._src,this._w=H$e,this._h=H$f,this._image=H$a,this._format=0===H$c?H$a.byteLength/(H$e*H$f)==4?6408:6407:H$c}this._$5__enableMerageInAtlas=!0}}H$m(H$h,"laya.webgl.resource.WebGLImage",H$p);var H$b=H$h.prototype;return H$w.imps(H$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),H$b._init_=function(H$a,H$b){},H$b._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var H$a=H$ua.mainContext,H$b=this._source=H$a.createTexture(),H$c=H$va.curBindTexTarget,H$d=H$va.curBindTexValue;H$va.bindTexture(H$a,3553,H$b);var H$e=this.minFifter,H$f=this.magFifter,H$g=this.repeat?10497:33071,H$h=H$k.isPOT(this._w,this._h),H$i=!1;switch(H$h?(this.mipmap?-1!==H$e||(H$e=9987):-1!==H$e||(H$e=9729),-1!==H$f||(H$f=9729),H$a.texParameteri(3553,10241,H$e),H$a.texParameteri(3553,10240,H$f),H$a.texParameteri(3553,10242,H$g),H$a.texParameteri(3553,10243,H$g),this.mipmap&&H$a.generateMipmap(3553)):(-1!==H$e||(H$e=9729),-1!==H$f||(H$f=9729),H$a.texParameteri(3553,10241,H$e),H$a.texParameteri(3553,10240,H$f),H$a.texParameteri(3553,10242,33071),H$a.texParameteri(3553,10243,33071)),H$a.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&H$a.pixelStorei(H$a.UNPACK_ALIGNMENT,1),H$a.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&H$a.pixelStorei(H$a.UNPACK_ALIGNMENT,1),H$a.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:H$i=!0,H$a.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case H$ua.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:H$i=!0,H$a.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}H$a.pixelStorei(37441,!1),H$c&&H$d&&H$va.bindTexture(H$a,H$c,H$d),this.uri||(this.uri=this._url),H$i?this.memorySize=this._image.length:H$h&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},H$b.recreateResource=function(){var H$a=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var H$b=this;this._image=new H$n.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(H$b._needReleaseAgain)return H$b._needReleaseAgain=!1,H$b._image.onload=null,void(H$b._image=null);H$b._allowMerageInAtlas&&H$b._enableMerageInAtlas?(H$a.memorySize=0,H$a._recreateLock=!1):H$b._createWebGlTexture(),H$b.completeCreate()},this._image.src=this._src}},H$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&H$ua.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},H$b.onresize=function(){this._w=this._image.width,this._h=this._image.height,H$O.enabled&&this._w<H$O.atlasLimitWidth&&this._h<H$O.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},H$b.clearAtlasSource=function(){this._image=null},H$d(0,H$b,"format",function(){return this._format}),H$d(0,H$b,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(H$a){this._$5__enableMerageInAtlas=H$a}),H$d(0,H$b,"mipmap",function(){return this._mipmap}),H$d(0,H$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),H$d(0,H$b,"atlasSource",function(){return this._image}),H$d(0,H$b,"onload",null,function(H$a){var H$b=this;this._onload=H$a,this._image&&(this._image.onload=null!=this._onload?function(){H$b.onresize(),H$b._onload()}:null)}),H$d(0,H$b,"onerror",null,function(H$a){var H$b=this;this._onerror=H$a,this._image&&(this._image.onerror=null!=this._onerror?function(){H$b._onerror()}:null)}),H$h}();H$w.__init([H$na,H$N,H$xa,H$ta])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H$a,H$b){"use strict";for(var H$c in Object.defineProperty(H$b,"__esModule",{value:!0}),Laya){var H$d=Laya[H$c];H$d&&H$d.__isclass&&(H$b[H$c]=H$d)}}),function(H$f,H$a,H$d){H$d.un,H$d.uns;var H$e=H$d.static,H$g=H$d.class,H$h=H$d.getset,H$i=(H$d.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),H$o=laya.utils.ClassUtils,H$l=(laya.events.Event,laya.utils.HTMLChar),H$j=laya.net.Loader,H$k=(laya.display.Node,laya.maths.Rectangle),H$m=laya.renders.Render,H$n=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),H$p=laya.utils.Stat,H$J=laya.display.Text,H$q=laya.resource.Texture,H$r=laya.net.URL,H$s=laya.utils.Utils,H$t=function(){function H$n(){}return H$g(H$n,"laya.html.utils.HTMLParse"),H$n.parse=function(H$a,H$b,H$c){H$b=(H$b="<root>"+(H$b=H$b.replace(/<br>/g,"<br/>"))+"</root>").replace(H$n.spacePattern,H$n.char255);var H$d=H$s.parseXMLFromString(H$b);H$n._parseXML(H$a,H$d.childNodes[0].childNodes,H$c)},H$n._parseXML=function(H$a,H$b,H$c,H$d){var H$e=0,H$f=0;if(H$b.join||H$b.item)for(H$e=0,H$f=H$b.length;H$e<H$f;++H$e)H$n._parseXML(H$a,H$b[H$e],H$c,H$d);else{var H$g,H$h,H$i;if(3==H$b.nodeType)return void(H$a instanceof laya.html.dom.HTMLDivElement?(null==H$b.nodeName&&(H$b.nodeName="#text"),H$h=H$b.nodeName.toLowerCase(),0<(H$i=H$b.textContent.replace(/^\s+|\s+$/g,"")).length&&(H$g=H$o.getInstance(H$h))&&(H$a.addChild(H$g),H$g.innerTEXT=H$i.replace(H$n.char255AndOneSpacePattern," "))):0<(H$i=H$b.textContent.replace(/^\s+|\s+$/g,"")).length&&(H$a.innerTEXT=H$i.replace(H$n.char255AndOneSpacePattern," ")));if("#comment"==(H$h=H$b.nodeName.toLowerCase()))return;if(H$g=H$o.getInstance(H$h)){(H$g=H$a.addChild(H$g)).URI=H$c,H$g.href=H$d;var H$j=H$b.attributes;if(H$j&&0<H$j.length)for(H$e=0,H$f=H$j.length;H$e<H$f;++H$e){var H$k=H$j[H$e],H$l=H$k.nodeName,H$m=H$k.value;H$g._setAttributes(H$l,H$m)}H$n._parseXML(H$g,H$b.childNodes,H$c,H$g.href)}else H$n._parseXML(H$a,H$b.childNodes,H$c,H$d)}},H$n.char255=String.fromCharCode(255),H$n.spacePattern=/&nbsp;|&#160;/g,H$n.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),H$n}(),H$u=function(){function H$I(){}return H$g(H$I,"laya.html.utils.Layout"),H$I.later=function(H$a){null==H$I._will&&(H$I._will=[],H$d.stage.frameLoop(1,null,function(){if(!(H$I._will.length<1)){for(var H$a=0;H$a<H$I._will.length;H$a++)laya.html.utils.Layout.layout(H$I._will[H$a]);H$I._will.length=0}})),H$I._will.push(H$a)},H$I.layout=function(H$a){if(!H$a||!H$a._style)return null;if(0==(512&H$a._style._type))return null;H$a.getStyle()._type&=-513;var H$b=H$I._multiLineLayout(H$a);return H$m.isConchApp&&H$a.layaoutCallNative&&H$a.layaoutCallNative(),H$b},H$I._multiLineLayout=function(H$a){if(H$J.RightToLeft)return H$I._multiLineLayout2(H$a);var H$b=new Array;H$a._addChildsToLayout(H$b);var H$c,H$d,H$e,H$f,H$g,H$h=0,H$i=H$b.length,H$j=H$a._getCSSStyle(),H$k=H$j.letterSpacing,H$l=H$j.leading,H$m=H$j.lineHeight,H$n=H$j._widthAuto()||!H$j.wordWrap,H$o=H$n?999999:H$a.width,H$p=(H$a.height,0),H$q=H$j.italic?H$j.fontSize/3:0,H$r=H$j._getAlign(),H$s=H$j._getValign(),H$t=0!==H$s||0!==H$r||0!=H$m,H$u=0,H$v=0,H$w=0,H$x=0,H$y=new Array,H$z=H$y[0]=new H$K,H$A=!1,H$B=!1;H$z.h=0,H$j.italic&&(H$o-=H$j.fontSize/3);var H$C=0,H$D=!0;function H$E(){H$z.y=H$v,H$v+=H$z.h+H$l,0==H$z.h&&(H$v+=H$m),H$z.mWidth=H$C,H$C=0,H$z=new H$K,H$y.push(H$z),H$z.h=0,H$A=!(H$D=!(H$u=0))}for(H$h=0;H$h<H$i;H$h++)if(null!=(H$c=H$b[H$h]))if(H$D=!1,H$c instanceof laya.html.dom.HTMLBrElement)H$E(),H$z.y=H$v;else{if(H$c._isChar()){if((H$f=H$c).isWord)H$A=H$B||"\n"===H$f.char,H$z.wordStartIndex=H$z.elements.length;else{if(H$w=H$f.width+H$f.style.letterSpacin,0<H$y.length&&H$o<H$u+H$w&&0<H$z.wordStartIndex){var H$F;H$F=H$z.elements.length-H$z.wordStartIndex+1,H$z.elements.length=H$z.wordStartIndex,H$h-=H$F,H$E();continue}H$A=!1,H$C+=H$f.width}H$w=H$f.width+H$k,H$x=H$f.height,H$B=!1,(H$A=H$A||H$o<H$u+H$w)&&H$E(),H$z.minTextHeight=Math.min(H$z.minTextHeight,H$c.height)}else H$d=H$c._getCSSStyle(),H$g=H$c,H$e=H$d.padding,0===H$d._getCssFloat()||(H$t=!0),H$A=H$B||H$d.lineElement,H$w=H$g.width*H$g._style._tf.scaleX+H$e[1]+H$e[3]+H$k,H$x=H$g.height*H$g._style._tf.scaleY+H$e[0]+H$e[2],H$B=H$d.lineElement,(H$A=H$A||H$o<H$u+H$w&&H$d.wordWrap)&&H$E();H$z.elements.push(H$c),H$z.h=Math.max(H$z.h,H$x),H$c.x=H$u,H$c.y=H$v,H$u+=H$w,H$z.w=H$u-H$k,H$z.y=H$v,H$p=Math.max(H$u+H$q,H$p)}else H$D||(H$u+=H$I.DIV_ELEMENT_PADDING),H$z.wordStartIndex=H$z.elements.length;if(H$v=H$z.y+H$z.h,H$t){var H$G=0,H$H=H$o;for(H$n&&0<H$a.width&&(H$H=H$a.width),H$h=0,H$i=H$y.length;H$h<H$i;H$h++)H$y[H$h].updatePos(0,H$H,H$h,H$G,H$r,H$s,H$m),H$G+=Math.max(H$m,H$y[H$h].h+H$l);H$v=H$G}return H$n&&(H$a.width=H$p),H$v>H$a.height&&(H$a.height=H$v),[H$p,H$v]},H$I._multiLineLayout2=function(H$a){var H$b=new Array;H$a._addChildsToLayout(H$b);var H$c,H$d,H$e,H$f,H$g,H$h=0,H$i=H$b.length,H$j=H$a._getCSSStyle(),H$k=H$j.letterSpacing,H$l=H$j.leading,H$m=H$j.lineHeight,H$n=H$j._widthAuto()||!H$j.wordWrap,H$o=H$n?999999:H$a.width,H$p=(H$a.height,0),H$q=H$j.italic?H$j.fontSize/3:0,H$r=2-H$j._getAlign(),H$s=H$j._getValign(),H$t=0!==H$s||0!=H$r||0!=H$m,H$u=0,H$v=0,H$w=0,H$x=0,H$y=new Array,H$z=H$y[0]=new H$K,H$A=!1,H$B=!1;H$z.h=0,H$j.italic&&(H$o-=H$j.fontSize/3);var H$C=0,H$D=!0;function H$E(){H$z.y=H$v,H$v+=H$z.h+H$l,0==H$z.h&&(H$v+=H$m),H$z.mWidth=H$C,H$C=0,H$z=new H$K,H$y.push(H$z),H$z.h=0,H$A=!(H$D=!(H$u=0))}for(H$h=0;H$h<H$i;H$h++)if(null!=(H$c=H$b[H$h]))if(H$D=!1,H$c instanceof laya.html.dom.HTMLBrElement)H$E(),H$z.y=H$v;else{if(H$c._isChar()){if((H$f=H$c).isWord)H$A=H$B||"\n"===H$f.char,H$z.wordStartIndex=H$z.elements.length;else{if(0<H$y.length&&H$o<H$u+H$w&&0<H$z.wordStartIndex){var H$F;H$F=H$z.elements.length-H$z.wordStartIndex+1,H$z.elements.length=H$z.wordStartIndex,H$h-=H$F,H$E();continue}H$A=!1,H$C+=H$f.width}H$w=H$f.width+H$k,H$x=H$f.height,H$B=!1,(H$A=H$A||H$o<H$u+H$w)&&H$E(),H$z.minTextHeight=Math.min(H$z.minTextHeight,H$c.height)}else H$d=H$c._getCSSStyle(),H$g=H$c,H$e=H$d.padding,0===H$d._getCssFloat()||(H$t=!0),H$A=H$B||H$d.lineElement,H$w=H$g.width*H$g._style._tf.scaleX+H$e[1]+H$e[3]+H$k,H$x=H$g.height*H$g._style._tf.scaleY+H$e[0]+H$e[2],H$B=H$d.lineElement,(H$A=H$A||H$o<H$u+H$w&&H$d.wordWrap)&&H$E();H$z.elements.push(H$c),H$z.h=Math.max(H$z.h,H$x),H$c.x=H$u,H$c.y=H$v,H$u+=H$w,H$z.w=H$u-H$k,H$z.y=H$v,H$p=Math.max(H$u+H$q,H$p)}else H$D||(H$u+=H$I.DIV_ELEMENT_PADDING),H$z.wordStartIndex=H$z.elements.length;if(H$v=H$z.y+H$z.h,H$t){var H$G=0,H$H=H$o;for(H$h=0,H$i=H$y.length;H$h<H$i;H$h++)H$y[H$h].updatePos(0,H$H,H$h,H$G,H$r,H$s,H$m),H$G+=Math.max(H$m,H$y[H$h].h+H$l);H$v=H$G}for(H$n&&(H$a.width=H$p),H$v>H$a.height&&(H$a.height=H$v),H$h=0,H$i=H$y.length;H$h<H$i;H$h++)H$y[H$h].revertOrder(H$o);return[H$p,H$v]},H$I._will=null,H$I.DIV_ELEMENT_PADDING=0,H$I}(),H$K=function(){function H$a(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}H$g(H$a,"laya.html.utils.LayoutLine");var H$b=H$a.prototype;return H$b.updatePos=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){var H$h,H$i=0;0<this.elements.length&&(H$i=(H$h=this.elements[this.elements.length-1]).x+H$h.width-this.elements[0].x);var H$j=0,H$k=NaN;1===H$e&&(H$j=(H$b-H$i)/2),2===H$e&&(H$j=H$b-H$i),0===H$g||0!=H$f||(H$f=1);for(var H$l=0,H$m=this.elements.length;H$l<H$m;H$l++){var H$n=(H$h=this.elements[H$l])._getCSSStyle();switch(0!==H$j&&(H$h.x+=H$j),H$n._getValign()){case 0:H$h.y=H$d;break;case 1:var H$o=0;99999!=this.minTextHeight&&(H$o=this.minTextHeight);var H$p=(H$o+H$g)/2;H$p=Math.max(H$p,this.h),H$k=(laya.html.dom.HTMLImageElement,H$d+H$p-H$h.height),H$h.y=H$k;break;case 2:H$h.y=H$d+(H$g-H$h.height)}}},H$b.revertOrder=function(H$a){var H$b;if(0<this.elements.length){var H$c,H$d=0;for(H$c=this.elements.length,H$d=0;H$d<H$c;H$d++)(H$b=this.elements[H$d]).x=H$a-H$b.x-H$b.width}},H$a}(),H$v=function(H$c){function H$b(){this.URI=null,this._href=null,H$b.__super.call(this),this._text=H$b._EMPTYTEXT,this.setStyle(new H$i(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}H$g(H$b,"laya.html.dom.HTMLElement",H$c);var H$a=H$b.prototype;return H$a.layaoutCallNative=function(){var H$a=0;if(this._childs&&0<(H$a=this._childs.length))for(var H$b=0;H$b<H$a;H$b++)this._childs[H$b].layaoutCallNative&&this._childs[H$b].layaoutCallNative();var H$c=this._getWords();H$c?laya.html.dom.HTMLElement.fillWords(this,H$c,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},H$a.appendChild=function(H$a){return this.addChild(H$a)},H$a._getWords2=function(){var H$a=this._text.text;if(!H$a||0===H$a.length)return null;var H$b,H$c,H$d=0,H$e=0;if(this._text.drawWords)H$c=this._text.drawWords;else{for(H$e=(H$b=H$a.split(" ")).length-1,H$c=[],H$d=0;H$d<H$e;H$d++)H$c.push(H$b[H$d]," ");0<=H$e&&H$c.push(H$b[H$e]),this._text.drawWords=H$c}var H$f,H$g=this._text.words;if(H$g&&H$g.length===H$c.length)return H$g;null===H$g&&(this._text.words=H$g=[]),H$g.length=H$c.length;var H$h=this.style,H$i=H$h.font;for(H$d=0,H$e=H$c.length;H$d<H$e;H$d++){H$f=H$s.measureText(H$c[H$d],H$i);var H$j=H$g[H$d]=new H$l(H$c[H$d],H$f.width,H$f.height||H$h.fontSize,H$h);if(1<H$j.char.length&&(H$j.charNum=H$j.char),this.href){var H$k=new H$n;this.addChild(H$k),H$j.setSprite(H$k)}}return H$g},H$a._getWords=function(){if(!H$J.CharacterCache)return this._getWords2();var H$a=this._text.text;if(!H$a||0===H$a.length)return null;var H$b,H$c=this._text.words;if(H$c&&H$c.length===H$a.length)return H$c;null===H$c&&(this._text.words=H$c=[]),H$c.length=H$a.length;for(var H$d=this.style,H$e=H$d.font,H$f=0,H$g=H$a.length;H$f<H$g;H$f++)if(H$b=H$s.measureText(H$a.charAt(H$f),H$e)){var H$h=H$c[H$f]=new H$l(H$a.charAt(H$f),H$b.width,H$b.height||H$d.fontSize,H$d);if(this.href){var H$i=new H$n;this.addChild(H$i),H$h.setSprite(H$i)}}else console.warn("_getWords size is null"+H$a.charAt(H$f),H$e);return H$c},H$a.showLinkSprite=function(){var H$a=this._text.words;if(H$a)for(var H$b,H$c,H$d=[],H$e=0;H$e<H$a.length;H$e++)H$c=H$a[H$e],(H$b=new H$n).graphics.drawRect(0,0,H$c.width,H$c.height,"#ff0000"),H$b.width=H$c.width,H$b.height=H$c.height,this.addChild(H$b),H$d.push(H$b)},H$a._layoutLater=function(){var H$a=this.style;512&H$a._type||(H$a.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&H$a.block?(H$u.later(this),H$a._type|=512):this.parent&&this.parent._layoutLater())},H$a._setAttributes=function(H$a,H$b){switch(H$a){case"style":return void this.style.cssText(H$b);case"class":return void(this.className=H$b)}H$c.prototype._setAttributes.call(this,H$a,H$b)},H$a.updateHref=function(){if(null!=this._href){var H$a=this._getWords();if(H$a)for(var H$b,H$c,H$d=0;H$d<H$a.length;H$d++)(H$c=(H$b=H$a[H$d]).getSprite())&&(H$c.size(H$b.width,H$b.height),H$c.on("click",this,this.onLinkHandler))}},H$a.onLinkHandler=function(H$a){switch(H$a.type){case"click":for(var H$b=this;H$b;)H$b.event("link",[this.href]),H$b=H$b.parent}},H$a.formatURL=function(H$a){return this.URI?H$r.formatURL(H$a,this.URI?this.URI.path:null):H$a},H$h(0,H$a,"href",function(){return this._href},function(H$a){null!=(this._href=H$a)&&(this._getCSSStyle().underLine=1,this.updateHref())}),H$h(0,H$a,"color",null,function(H$a){this.style.color=H$a}),H$h(0,H$a,"onClick",null,function(H$a){H$d._runScript("fn=function(event){"+H$a+";}"),this.on("click",this,void 0)}),H$h(0,H$a,"id",null,function(H$a){H$w.document.setElementById(H$a,this)}),H$h(0,H$a,"innerTEXT",function(){return this._text.text},function(H$a){this.text=H$a}),H$h(0,H$a,"style",function(){return this._style}),H$h(0,H$a,"text",function(){return this._text.text},function(H$a){this._text==H$b._EMPTYTEXT?this._text={text:H$a,words:null}:(this._text.text=H$a,this._text.words&&(this._text.words.length=0)),H$m.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),H$h(0,H$a,"parent",H$c.prototype._$get_parent,function(H$a){if(H$a instanceof laya.html.dom.HTMLElement){var H$b=H$a;this.URI||(this.URI=H$b.URI),this.style.inherit(H$b.style)}H$d.superSet(H$n,this,"parent",H$a)}),H$h(0,H$a,"className",null,function(H$a){this.style.attrs(H$w.document.styleSheets["."+H$a])}),H$b.fillWords=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){H$a.graphics.clear();for(var H$h=0,H$i=H$b.length;H$h<H$i;H$h++){var H$j=H$b[H$h];H$a.graphics.fillText(H$j.char,H$j.x+H$c,H$j.y+H$d,H$e,H$f,"left",H$g)}},H$b._EMPTYTEXT={text:null,words:null},H$b}(H$n),H$b=(function(H$a){function H$b(){H$b.__super.call(this),this.style.lineElement=!0,this.style.block=!0}H$g(H$b,"laya.html.dom.HTMLBrElement",H$v)}(),function(H$a){function H$b(){this.contextHeight=NaN,this.contextWidth=NaN,H$b.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}H$g(H$b,"laya.html.dom.HTMLDivElement",H$a);var H$c=H$b.prototype;return H$c.appendHTML=function(H$a){H$t.parse(this,H$a,this.URI),this.layout()},H$c._addChildsToLayout=function(H$b){var H$a=this._getWords();if(null==H$a&&0==this._childs.length)return!1;H$a&&H$a.forEach(function(H$a){H$b.push(H$a)});for(var H$c=!0,H$d=0,H$e=this._childs.length;H$d<H$e;H$d++){var H$f=this._childs[H$d];H$c?H$c=!1:H$b.push(null),H$f._addToLayout(H$b)}return!0},H$c._addToLayout=function(H$a){this.layout()},H$c.layout=function(){if(this.style){this.style._type|=512;var H$a=H$u.layout(this);if(H$a){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new H$k);var H$b=this._$P.mHtmlBounds;H$b.x=H$b.y=0,H$b.width=this.contextWidth=H$a[0],H$b.height=this.contextHeight=H$a[1],this.setBounds(H$b)}}},H$h(0,H$c,"height",function(){return this._height?this._height:this.contextHeight},H$a.prototype._$set_height),H$h(0,H$c,"innerHTML",null,function(H$a){this.destroyChildren(),this.appendHTML(H$a)}),H$h(0,H$c,"width",function(){return this._width?this._width:this.contextWidth},function(H$a){var H$b=!1;H$b=0===H$a?H$a!=this._width:H$a!=this.width,H$d.superSet(H$v,this,"width",H$a),H$b&&this.layout()}),H$b}(H$v)),H$w=function(H$a){function H$b(){this.all=new Array,this.styleSheets=H$i.styleSheets,H$b.__super.call(this)}H$g(H$b,"laya.html.dom.HTMLDocument",H$v);var H$c=H$b.prototype;return H$c.getElementById=function(H$a){return this.all[H$a]},H$c.setElementById=function(H$a,H$b){this.all[H$a]=H$b},H$e(H$b,["document",function(){return this.document=new H$b}]),H$b}();(function(H$a){function H$b(){this._tex=null,this._url=null,this._renderArgs=[],H$b.__super.call(this),this.style.block=!0}H$g(H$b,"laya.html.dom.HTMLImageElement",H$v);var H$c=H$b.prototype;H$c._addToLayout=function(H$a){!this._style.absolute&&H$a.push(this)},H$c.render=function(H$a,H$b,H$c){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(H$p.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,H$a.ctx.drawTexture2(H$b,H$c,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},H$c.layaoutCallNative=function(){var H$a=0;if(this._childs&&0<(H$a=this._childs.length))for(var H$b=0;H$b<H$a;H$b++)this._childs[H$b].layaoutCallNative&&this._childs[H$b].layaoutCallNative()},H$h(0,H$c,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(H$a){this._width!==H$a&&(this._width=H$a,this._style.width=H$a,this.repaint())}),H$h(0,H$c,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(H$a){this._height!==H$a&&(this._height=H$a,this._style.height=H$a,this.repaint())}),H$c.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),H$j.clearCache(this,this._url),this._tex=null),H$v.prototype.destroy.call(this)},H$c.onloaded=function(){var H$a=this._style;H$a&&!H$a.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),H$a&&!H$a.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),H$m.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},H$c._loadImageComplete=function(H$a,H$b,H$c){if(!this._destroyed)if(null!=H$c)if(H$c instanceof ArrayBuffer){var H$d=new DataView(H$c);new laya.webgl.resource.WebGLImage(new Uint8Array(H$c,8),H$a,0,!1,H$d.getUint32(0),H$d.getUint32(4));this.onloaded()}else if(H$c instanceof H$q)H$j.imgMgrSet[H$a]=H$b,H$f.imgMgrLock(H$a,H$j.imgMgrSet[H$a]),this._url=H$a,this._tex=H$c,H$j.keepCache(this,H$a),H$j.cacheRes(H$a,this._tex),this.onloaded();else{var H$e=-1!=H$a.indexOf(".png",H$a.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(H$c,H$a,H$e,!1,H$c.width,H$c.height);this.onloaded()}else this.event("error","Load image failed")},H$h(0,H$c,"src",null,function(H$a){(H$a=this.formatURL(H$a),this._url!=H$a)&&(null!=this._tex&&(H$j.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=H$a,(this._tex=H$j.getRes(H$a))?(H$j.keepCache(this,H$a),this.onloaded()):H$f.imgMgrLoad(H$a,this._loadImageComplete.bind(this),2,!1))})})(),function(H$a){function H$b(){this.type=null,H$b.__super.call(this),this.visible=!1}H$g(H$b,"laya.html.dom.HTMLLinkElement",H$a);var H$c=H$b.prototype;H$c._onload=function(H$a){switch(this.type){case"text/css":H$i.parseCSS(H$a,this.URI)}},H$h(0,H$c,"href",H$a.prototype._$get_href,function(H$a){var H$b=this;H$a=this.formatURL(H$a),this.URI=new H$r(H$a);var H$c=new H$j;H$c.once("complete",null,function(H$a){H$b._onload(H$a)}),H$c.load(H$a,"text")}),H$b._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(H$v),function(H$a){function H$b(){H$b.__super.call(this),this.visible=!1}H$g(H$b,"laya.html.dom.HTMLStyleElement",H$a),H$h(0,H$b.prototype,"text",H$a.prototype._$get_text,function(H$a){H$i.parseCSS(H$a,null)})}(H$v),function(H$a){function H$b(){H$b.__super.call(this),this._getCSSStyle().valign="middle"}H$g(H$b,"laya.html.dom.HTMLIframeElement",H$a),H$h(0,H$b.prototype,"href",H$a.prototype._$get_href,function(H$c){var H$d=this;H$c=this.formatURL(H$c);var H$a=new H$j;H$a.once("complete",null,function(H$a){var H$b=H$d.URI;H$d.URI=new H$r(H$c),H$d.innerHTML=H$a,!H$b||(H$d.URI=H$b)}),H$a.load(H$c,"text")})}(H$b)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H$a,H$b){"use strict";for(var H$c in Object.defineProperty(H$b,"__esModule",{value:!0}),Laya){var H$d=Laya[H$c];H$d&&H$d.__isclass&&(H$b[H$c]=H$d)}}),function(H$a,H$b,H$p){H$p.un,H$p.uns;var H$d=H$p.static,H$f=H$p.class,H$e=H$p.getset,H$c=(H$p.__newvec,laya.display.Animation),H$q=(laya.utils.Browser,laya.utils.ClassUtils),H$g=laya.filters.ColorFilter,H$h=laya.utils.Ease,H$i=laya.events.Event,H$j=(laya.events.EventDispatcher,laya.display.css.Font),H$k=laya.display.FrameAnimation,H$l=laya.display.Graphics,H$m=laya.utils.Handler,H$n=laya.display.Input,H$s=laya.net.Loader,H$o=(laya.display.Node,laya.maths.Point),H$r=laya.maths.Rectangle,H$t=laya.renders.Render,H$u=laya.display.Sprite,H$v=laya.display.Text,H$w=laya.resource.Texture,H$x=laya.utils.Tween,H$y=laya.utils.Utils,H$z=laya.utils.WeakObject;H$p.interface("laya.ui.IItem"),H$p.interface("laya.ui.ISelect"),H$p.interface("laya.ui.IRender"),H$p.interface("laya.ui.IComponent"),H$p.interface("laya.ui.IBox","IComponent");var H$A=function(){function H$a(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return H$f(H$a,"laya.ui.LayoutStyle"),H$d(H$a,["EMPTY",function(){return this.EMPTY=new H$a}]),H$a}(),H$B=function(){function H$a(){}return H$f(H$a,"laya.ui.Styles"),H$a.labelColor="#000000",H$a.buttonStateNum=3,H$a.scrollBarMinNum=15,H$a.scrollBarDelayTime=500,H$d(H$a,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),H$a}(),H$C=function(){function H$e(){}return H$f(H$e,"laya.ui.UIUtils"),H$e.fillArray=function(H$a,H$b,H$c){var H$d=H$a.concat();if(H$b)for(var H$e=H$b.split(","),H$f=0,H$g=Math.min(H$d.length,H$e.length);H$f<H$g;H$f++){var H$h=H$e[H$f];H$d[H$f]="true"==H$h||"false"!=H$h&&H$h,null!=H$c&&(H$d[H$f]=H$c(H$h))}return H$d},H$e.toColor=function(H$a){return H$y.toHexColor(H$a)},H$e.gray=function(H$a,H$b){void 0===H$b&&(H$b=!0),H$b?H$e.addFilter(H$a,H$e.grayFilter):H$e.clearFilter(H$a,H$g)},H$e.addFilter=function(H$a,H$b){var H$c=H$a.filters||[];H$c.push(H$b),H$a.filters=H$c},H$e.clearFilter=function(H$a,H$b){var H$c=H$a.filters;if(null!=H$c&&0<H$c.length){for(var H$d=H$c.length-1;-1<H$d;H$d--){var H$e=H$c[H$d];H$p.__typeof(H$e,H$b)&&H$c.splice(H$d,1)}H$a.filters=H$c}},H$e._getReplaceStr=function(H$a){return H$e.escapeSequence[H$a]},H$e.adptString=function(H$a){return H$a.replace(/\\(\w)/g,H$e._getReplaceStr)},H$e.getBindFun=function(H$a){var H$b=H$e._funMap.get(H$a);if(null==H$b){var H$c='"'+H$a+'"',H$d="(function(data){if(data==null)return;with(data){try{\nreturn "+(H$c=H$c.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";H$b=H$p._runScript(H$d),H$e._funMap.set(H$a,H$b)}return H$b},H$d(H$e,["grayFilter",function(){return this.grayFilter=new H$g([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new H$z}]),H$e}(),H$D=function(){function H$a(){}return H$f(H$a,"UIConfig"),H$a.touchScrollEnable=!0,H$a.mouseWheelEnable=!0,H$a.showButtons=!0,H$a.popupBgColor="#000000",H$a.popupBgAlpha=.5,H$a.closeDialogOnSide=!0,H$a}(),H$E=function(H$c){function H$r(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,H$r.__super.call(this),this._weakKeys=[]}H$f(H$r,"laya.ui.AutoBitmap",H$c);var H$a=H$r.prototype;return H$a.destroy=function(){if(H$s.clearObject(this,this._weakKey),this._weakKeys){for(var H$a=0,H$b=this._weakKeys.length;H$a<H$b;++H$a)H$s.clearObject(this,this._weakKeys[H$a]);this._weakKeys=null}H$c.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},H$a._setChanged=function(){this._isChanged||(this._isChanged=!0,H$p.timer.callLater(this,this.changeSource))},H$a.changeSource=function(){this._isChanged=!1;var H$a=this._source;if(H$a&&H$a.bitmap){var H$b=this.width,H$c=this.height,H$d=this._sizeGrid,H$e=H$a.sourceWidth,H$f=H$a.sourceHeight;if(!H$d||H$e===H$b&&H$f===H$c)this.cleanByTexture(H$a,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,H$b,H$c);else{H$s.clearObject(this,this._weakKey),H$a.$_GID||(H$a.$_GID=H$y.getGID());var H$g=H$a.$_GID+"."+H$b+"."+H$c+"."+H$d.join("."),H$h=H$s.findObject(H$g);if(H$y.isOKCmdList(H$h))return this._weakKey=H$g,H$s.keepObject(this,this._weakKey),void(this.cmds=H$h);this.clear();var H$i,H$j,H$k=H$d[0],H$l=H$d[1],H$m=H$d[2],H$n=H$d[3],H$o=H$d[4],H$p=!1;if(H$b==H$e&&(H$n=H$l=0),H$c==H$f&&(H$k=H$m=0),H$b<H$n+H$l){var H$q=H$b;H$p=!0,H$b=H$n+H$l,this.save(),this.clipRect(0,0,H$q,H$c)}H$n&&H$k&&(H$i=H$r.getTexture(H$a,0,0,H$n,H$k),H$j=this._weakKeys[0],H$i?(H$j!=H$i.weakKey&&(H$s.clearObject(this,H$j),H$s.keepObject(this,H$i.weakKey),this._weakKeys[0]=H$i.weakKey),this.drawTexture(H$i,0,0,H$n,H$k)):(H$s.clearObject(this,H$j),this._weakKeys[0]="")),H$l&&H$k&&(H$i=H$r.getTexture(H$a,H$e-H$l,0,H$l,H$k),H$j=this._weakKeys[1],H$i?(H$j!=H$i.weakKey&&(H$s.clearObject(this,H$j),H$s.keepObject(this,H$i.weakKey),this._weakKeys[1]=H$i.weakKey),this.drawTexture(H$i,H$b-H$l,0,H$l,H$k)):(H$s.clearObject(this,H$j),this._weakKeys[1]="")),H$n&&H$m&&(H$i=H$r.getTexture(H$a,0,H$f-H$m,H$n,H$m),H$j=this._weakKeys[2],H$i?(H$j!=H$i.weakKey&&(H$s.clearObject(this,H$j),H$s.keepObject(this,H$i.weakKey),this._weakKeys[2]=H$i.weakKey),this.drawTexture(H$i,0,H$c-H$m,H$n,H$m)):(H$s.clearObject(this,H$j),this._weakKeys[2]="")),H$l&&H$m&&(H$i=H$r.getTexture(H$a,H$e-H$l,H$f-H$m,H$l,H$m),H$j=this._weakKeys[3],H$i?(H$j!=H$i.weakKey&&(H$s.clearObject(this,H$j),H$s.keepObject(this,H$i.weakKey),this._weakKeys[3]=H$i.weakKey),this.drawTexture(H$i,H$b-H$l,H$c-H$m,H$l,H$m)):(H$s.clearObject(this,H$j),this._weakKeys[3]="")),H$k&&(H$i=H$r.getTexture(H$a,H$n,0,H$e-H$n-H$l,H$k),H$j=this._weakKeys[4],H$i?(H$j!=H$i.weakKey&&(H$s.clearObject(this,H$j),H$s.keepObject(this,H$i.weakKey),this._weakKeys[4]=H$i.weakKey),this.drawBitmap(H$o,H$i,H$n,0,H$b-H$n-H$l,H$k)):(H$s.clearObject(this,H$j),this._weakKeys[4]="")),H$m&&(H$i=H$r.getTexture(H$a,H$n,H$f-H$m,H$e-H$n-H$l,H$m),H$j=this._weakKeys[5],H$i?(H$j!=H$i.weakKey&&(H$s.clearObject(this,H$j),H$s.keepObject(this,H$i.weakKey),this._weakKeys[5]=H$i.weakKey),this.drawBitmap(H$o,H$i,H$n,H$c-H$m,H$b-H$n-H$l,H$m)):(H$s.clearObject(this,H$j),this._weakKeys[5]="")),H$n&&(H$i=H$r.getTexture(H$a,0,H$k,H$n,H$f-H$k-H$m),H$j=this._weakKeys[6],H$i?(H$j!=H$i.weakKey&&(H$s.clearObject(this,H$j),H$s.keepObject(this,H$i.weakKey),this._weakKeys[6]=H$i.weakKey),this.drawBitmap(H$o,H$i,0,H$k,H$n,H$c-H$k-H$m)):(H$s.clearObject(this,H$j),this._weakKeys[6]="")),H$l&&(H$i=H$r.getTexture(H$a,H$e-H$l,H$k,H$l,H$f-H$k-H$m),H$j=this._weakKeys[7],H$i?(H$j!=H$i.weakKey&&(H$s.clearObject(this,H$j),H$s.keepObject(this,H$i.weakKey),this._weakKeys[7]=H$i.weakKey),this.drawBitmap(H$o,H$i,H$b-H$l,H$k,H$l,H$c-H$k-H$m)):(H$s.clearObject(this,H$j),this._weakKeys[7]="")),H$i=H$r.getTexture(H$a,H$n,H$k,H$e-H$n-H$l,H$f-H$k-H$m),H$j=this._weakKeys[8],H$i?(H$j!=H$i.weakKey&&(H$s.clearObject(this,H$j),H$s.keepObject(this,H$i.weakKey),this._weakKeys[8]=H$i.weakKey),this.drawBitmap(H$o,H$i,H$n,H$k,H$b-H$n-H$l,H$c-H$k-H$m)):(H$s.clearObject(this,H$j),this._weakKeys[8]=""),H$p&&this.restore(),this.autoCacheCmd&&!H$t.isConchApp&&(H$s.saveObject(H$g,this.cmds,null),this._weakKey=H$g,H$s.keepObject(this,this._weakKey))}this._repaint()}},H$a.drawBitmap=function(H$a,H$b,H$c,H$d,H$e,H$f){void 0===H$e&&(H$e=0),void 0===H$f&&(H$f=0),H$e<.1||H$f<.1||(!H$a||H$b.width==H$e&&H$b.height==H$f?this.drawTexture(H$b,H$c,H$d,H$e,H$f):this.fillTexture(H$b,H$c,H$d,H$e,H$f))},H$a.clear=function(H$a){void 0===H$a&&(H$a=!0),H$c.prototype.clear.call(this,!1)},H$e(0,H$a,"sizeGrid",function(){return this._sizeGrid},function(H$a){this._sizeGrid=H$a,this._setChanged()}),H$e(0,H$a,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(H$a){this._width!=H$a&&(this._width=H$a,this._setChanged())}),H$e(0,H$a,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(H$a){this._height!=H$a&&(this._height=H$a,this._setChanged())}),H$e(0,H$a,"source",function(){return this._source},function(H$a){H$a?(this._source=H$a,this._setChanged()):(this._source=null,this.clear())}),H$r.getTexture=function(H$a,H$b,H$c,H$d,H$e){H$d<=0&&(H$d=1),H$e<=0&&(H$e=1),H$a.$_GID||(H$a.$_GID=H$y.getGID());var H$f=H$a.$_GID+"."+H$b+"."+H$c+"."+H$d+"."+H$e,H$g=H$s.findObject(H$f);if((!H$g||!H$g.source)&&(H$g=H$w.createFromTexture(H$a,H$b,H$c,H$d,H$e))){if(H$a.alphaTexture){var H$h=H$a.width/H$a.alphaTexture.width;H$g.alphaTexture=H$w.createFromTexture(H$a.alphaTexture,H$b/H$h,H$c/H$h,H$d/H$h,H$e/H$h)}H$s.saveObject(H$f,H$g),H$g.weakKey=H$f}return H$g},H$r}(H$l),H$F=(function(H$a){function H$b(){H$b.__super.call(this)}H$f(H$b,"laya.ui.UIEvent",H$i),H$b.SHOW_TIP="showtip",H$b.HIDE_TIP="hidetip"}(),function(H$b){function H$a(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,H$a.__super.call(this),this._layout=H$A.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}H$f(H$a,"laya.ui.Component",H$b);var H$c=H$a.prototype;return H$p.imps(H$c,{"laya.ui.IComponent":!0}),H$c.destroy=function(H$a){void 0===H$a&&(H$a=!0),H$b.prototype.destroy.call(this,H$a),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},H$c.preinitialize=function(){},H$c.createChildren=function(){},H$c.initialize=function(){},H$c.callLater=function(H$a,H$b){H$p.timer.callLater(this,H$a,H$b)},H$c.runCallLater=function(H$a){H$p.timer.runCallLater(this,H$a)},H$c.commitMeasure=function(){},H$c.changeSize=function(){this.event("resize")},H$c.getLayout=function(){return this._layout===H$A.EMPTY&&(this._layout=new H$A),this._layout},H$c._setLayoutEnabled=function(H$a){this._layout&&this._layout.enable!=H$a&&(this._layout.enable=H$a,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},H$c.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},H$c.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},H$c.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},H$c.resetLayoutX=function(){var H$a=this._layout;if(isNaN(H$a.anchorX)||(this.pivotX=H$a.anchorX*this.width),this.layoutEnabled){var H$b=this.parent;H$b&&(isNaN(H$a.centerX)?isNaN(H$a.left)?isNaN(H$a.right)||(this.x=Math.round(H$b.width-this.displayWidth-H$a.right+this.pivotX*this.scaleX)):(this.x=Math.round(H$a.left+this.pivotX*this.scaleX),isNaN(H$a.right)||(this.width=(H$b._width-H$a.left-H$a.right)/(this.scaleX||.01))):this.x=Math.round(.5*(H$b.width-this.displayWidth)+H$a.centerX+this.pivotX*this.scaleX))}},H$c.resetLayoutY=function(){var H$a=this._layout;if(isNaN(H$a.anchorY)||(this.pivotY=H$a.anchorY*this.height),this.layoutEnabled){var H$b=this.parent;H$b&&(isNaN(H$a.centerY)?isNaN(H$a.top)?isNaN(H$a.bottom)||(this.y=Math.round(H$b.height-this.displayHeight-H$a.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(H$a.top+this.pivotY*this.scaleY),isNaN(H$a.bottom)||(this.height=(H$b._height-H$a.top-H$a.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(H$b.height-this.displayHeight)+H$a.centerY+this.pivotY*this.scaleY))}},H$c.onMouseOver=function(H$a){H$p.stage.event("showtip",this._toolTip)},H$c.onMouseOut=function(H$a){H$p.stage.event("hidetip",this._toolTip)},H$e(0,H$c,"displayWidth",function(){return this.width*this.scaleX}),H$e(0,H$c,"width",function(){return this._width?this._width:this.measureWidth},function(H$a){this._width!=H$a&&(this._width=H$a,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),H$e(0,H$c,"measureWidth",function(){var H$a=0;this.commitMeasure();for(var H$b=this.numChildren-1;-1<H$b;H$b--){var H$c=this.getChildAt(H$b);H$c.visible&&(H$a=Math.max(H$c.x+H$c.width*H$c.scaleX,H$a))}return H$a}),H$e(0,H$c,"displayHeight",function(){return this.height*this.scaleY}),H$e(0,H$c,"height",function(){return this._height?this._height:this.measureHeight},function(H$a){this._height!=H$a&&(this._height=H$a,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),H$e(0,H$c,"dataSource",function(){return this._dataSource},function(H$a){for(var H$b in this._dataSource=H$a,this._dataSource)this.hasOwnProperty(H$b)&&"function"!=typeof this[H$b]&&(this[H$b]=this._dataSource[H$b])}),H$e(0,H$c,"scaleY",H$b.prototype._$get_scaleY,function(H$a){H$p.superGet(H$u,this,"scaleY")!=H$a&&(H$p.superSet(H$u,this,"scaleY",H$a),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),H$e(0,H$c,"measureHeight",function(){var H$a=0;this.commitMeasure();for(var H$b=this.numChildren-1;-1<H$b;H$b--){var H$c=this.getChildAt(H$b);H$c.visible&&(H$a=Math.max(H$c.y+H$c.height*H$c.scaleY,H$a))}return H$a}),H$e(0,H$c,"scaleX",H$b.prototype._$get_scaleX,function(H$a){H$p.superGet(H$u,this,"scaleX")!=H$a&&(H$p.superSet(H$u,this,"scaleX",H$a),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),H$e(0,H$c,"top",function(){return this._layout.top},function(H$a){H$a!=this._layout.top&&(this.getLayout().top=H$a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),H$e(0,H$c,"bottom",function(){return this._layout.bottom},function(H$a){H$a!=this._layout.bottom&&(this.getLayout().bottom=H$a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),H$e(0,H$c,"left",function(){return this._layout.left},function(H$a){H$a!=this._layout.left&&(this.getLayout().left=H$a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),H$e(0,H$c,"right",function(){return this._layout.right},function(H$a){H$a!=this._layout.right&&(this.getLayout().right=H$a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),H$e(0,H$c,"centerX",function(){return this._layout.centerX},function(H$a){H$a!=this._layout.centerX&&(this.getLayout().centerX=H$a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),H$e(0,H$c,"centerY",function(){return this._layout.centerY},function(H$a){H$a!=this._layout.centerY&&(this.getLayout().centerY=H$a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),H$e(0,H$c,"anchorX",function(){return this._layout.anchorX},function(H$a){H$a!=this._layout.anchorX&&(this.getLayout().anchorX=H$a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),H$e(0,H$c,"anchorY",function(){return this._layout.anchorY},function(H$a){H$a!=this._layout.anchorY&&(this.getLayout().anchorY=H$a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),H$e(0,H$c,"tag",function(){return this._tag},function(H$a){this._tag=H$a}),H$e(0,H$c,"toolTip",function(){return this._toolTip},function(H$a){this._toolTip!=H$a&&(null!=(this._toolTip=H$a)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),H$e(0,H$c,"comXml",function(){return this._comXml},function(H$a){this._comXml=H$a}),H$e(0,H$c,"gray",function(){return this._gray},function(H$a){H$a!==this._gray&&(this._gray=H$a,H$C.gray(this,H$a))}),H$e(0,H$c,"disabled",function(){return this._disabled},function(H$a){H$a!==this._disabled&&(this.gray=this._disabled=H$a,this.mouseEnabled=!H$a)}),H$a}(H$u)),H$G=function(H$a){function H$b(){this.lockLayer=null,this.popupEffect=function(H$a){H$a.scale(1,1),H$x.from(H$a,{x:H$p.stage.width/2,y:H$p.stage.height/2,scaleX:0,scaleY:0},300,H$h.backOut,H$m.create(this,this.doOpen,[H$a]))},this.closeEffect=function(H$a,H$b){H$x.to(H$a,{x:H$p.stage.width/2,y:H$p.stage.height/2,scaleX:0,scaleY:0},300,H$h.strongOut,H$m.create(this,this.doClose,[H$a,H$b]))},H$b.__super.call(this),this.maskLayer=new H$u,this.popupEffectHandler=H$m.create(this,this.popupEffect,null,!1),this.closeEffectHandler=H$m.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,H$p.stage.addChild(this),H$p.stage.on("resize",this,this._onResize),H$D.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}H$f(H$b,"laya.ui.DialogManager",H$u);var H$c=H$b.prototype;return H$c._closeOnSide=function(){var H$a=this.getChildAt(this.numChildren-1);H$a instanceof laya.ui.Dialog&&H$a.close("side")},H$c.setLockView=function(H$a){this.lockLayer||(this.lockLayer=new H$H,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(H$p.stage.width,H$p.stage.height)),this.lockLayer.removeChildren(),H$a&&(H$a.centerX=H$a.centerY=0,this.lockLayer.addChild(H$a))},H$c._onResize=function(H$a){var H$b=this.maskLayer.width=H$p.stage.width,H$c=this.maskLayer.height=H$p.stage.height;this.lockLayer&&this.lockLayer.size(H$b,H$c),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,H$b,H$c,H$D.popupBgColor),this.maskLayer.alpha=H$D.popupBgAlpha;for(var H$d=this.numChildren-1;-1<H$d;H$d--){var H$e=this.getChildAt(H$d);H$e.popupCenter&&this._centerDialog(H$e)}},H$c._centerDialog=function(H$a){H$a.x=Math.round((H$p.stage.width-H$a.width>>1)+H$a.pivotX),H$a.y=Math.round((H$p.stage.height-H$a.height>>1)+H$a.pivotY)},H$c.open=function(H$a,H$b,H$c){void 0===H$b&&(H$b=!1),void 0===H$c&&(H$c=!1),H$b&&this._closeAll(),H$a.popupCenter&&this._centerDialog(H$a),this.addChild(H$a),(H$a.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),H$c&&null!=H$a.popupEffect?H$a.popupEffect.runWith(H$a):this.doOpen(H$a),this.event("open")},H$c.doOpen=function(H$a){H$a.onOpened()},H$c.lock=function(H$a){this.lockLayer&&(H$a?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},H$c.close=function(H$a,H$b,H$c){void 0===H$c&&(H$c=!1),H$c&&null!=H$a.closeEffect?H$a.closeEffect.runWith([H$a,H$b]):this.doClose(H$a,H$b),this.event("close")},H$c.doClose=function(H$a,H$b){H$a.removeSelf(),H$a.isModal&&this._checkMask(),H$a.closeHandler&&H$a.closeHandler.runWith(H$b),H$a.onClosed(H$b)},H$c.closeAll=function(){this._closeAll(),this.event("close")},H$c._closeAll=function(){for(var H$a=this.numChildren-1;-1<H$a;H$a--){var H$b=this.getChildAt(H$a);H$b&&null!=H$b.close&&this.doClose(H$b)}},H$c.getDialogsByGroup=function(H$a){for(var H$b=[],H$c=this.numChildren-1;-1<H$c;H$c--){var H$d=this.getChildAt(H$c);H$d&&H$d.group===H$a&&H$b.push(H$d)}return H$b},H$c.closeByGroup=function(H$a){for(var H$b=[],H$c=this.numChildren-1;-1<H$c;H$c--){var H$d=this.getChildAt(H$c);H$d&&H$d.group===H$a&&(H$d.close(),H$b.push(H$d))}return H$b},H$c._checkMask=function(){this.maskLayer.removeSelf();for(var H$a=this.numChildren-1;-1<H$a;H$a--){var H$b=this.getChildAt(H$a);if(H$b&&H$b.isModal)return void this.addChildAt(this.maskLayer,H$a)}},H$b}(),H$H=function(H$a){function H$b(){H$b.__super.call(this)}H$f(H$b,"laya.ui.Box",H$a);var H$c=H$b.prototype;return H$p.imps(H$c,{"laya.ui.IBox":!0}),H$e(0,H$c,"dataSource",H$a.prototype._$get_dataSource,function(H$a){for(var H$b in this._dataSource=H$a){var H$c=this.getChildByName(H$b);H$c?H$c.dataSource=H$a[H$b]:this.hasOwnProperty(H$b)&&"function"!=typeof this[H$b]&&(this[H$b]=H$a[H$b])}}),H$b}(H$F),H$I=function(H$b){function H$c(H$a,H$b){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,H$c.__super.call(this),this._labelColors=H$B.buttonLabelColors,this._stateNum=H$B.buttonStateNum,void 0===H$b&&(H$b=""),this.skin=H$a,this.label=H$b}H$f(H$c,"laya.ui.Button",H$b);var H$a=H$c.prototype;return H$p.imps(H$a,{"laya.ui.ISelect":!0}),H$a.destroy=function(H$a){H$s.clearCache(this,this._skin),H$s.clearObject(this,this._weakKey),void 0===H$a&&(H$a=!0),H$b.prototype.destroy.call(this,H$a),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(H$a),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},H$a.createChildren=function(){this.graphics=this._bitmap=new H$E},H$a.createText=function(){this._text||(this._text=new H$v,this._text.overflow=H$v.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},H$a.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},H$a.onMouse=function(H$a){if(!1!==this.toggle||!this._selected)return"click"===H$a.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=H$c.stateMap[H$a.type]))},H$a.changeClips=function(){var H$a=H$s.getRes(this._skin);if(H$a&&this._skin&&""!=this._skin){H$s.clearObject(this,this._weakKey);var H$b=H$a.sourceWidth,H$c=H$a.sourceHeight/this._stateNum;H$a.$_GID||(H$a.$_GID=H$y.getGID());var H$d=H$a.$_GID+"-"+this._stateNum,H$e=H$s.findObject(H$d);if(H$y.isOkTextureList(H$e)||(H$e=null),H$e)this._weakKey=H$d,H$s.keepObject(this,this._weakKey),this._sources=H$e;else{if(this._sources=[],1===this._stateNum)this._sources.push(H$a);else for(var H$f=0;H$f<this._stateNum;H$f++){var H$g=H$w.createFromTexture(H$a,0,H$c*H$f,H$b,H$c);if(H$a.alphaTexture){var H$h=H$a.width/H$a.alphaTexture.width;H$g.alphaTexture=H$w.createFromTexture(H$a.alphaTexture,0/H$h,H$c*H$f/H$h,H$b/H$h,H$c/H$h)}this._sources.push(H$g)}H$s.saveObject(H$d,this._sources),this._weakKey=H$d,H$s.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||H$b,this._bitmap.height=this._height||H$c,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=H$b)}else console.warn("lose skin ",this._skin,this.name,this.__className)},H$a.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var H$a=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[H$a]),this.label&&(this._text.color=this._labelColors[H$a],this._strokeColors&&(this._text.strokeColor=this._strokeColors[H$a]))},H$a._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},H$e(0,H$a,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(H$a){this.createText(),this._text.strokeColor=H$a}),H$e(0,H$a,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),H$e(0,H$a,"skin",function(){return this._skin},function(H$a){this._skin!=H$a&&(H$s.clearCache(this,this._skin),this._skin=H$a,H$s.keepCache(this,this._skin),this.callLater(this.changeClips),this._setStateChanged())}),H$e(0,H$a,"state",function(){return this._state},function(H$a){this._state!=H$a&&(this._state=H$a,this._setStateChanged())}),H$e(0,H$a,"text",function(){return this.createText(),this._text}),H$e(0,H$a,"stateNum",function(){return this._stateNum},function(H$a){"string"==typeof H$a&&(H$a=parseInt(H$a)),this._stateNum!=H$a&&(this._stateNum=H$a<1?1:3<H$a?3:H$a,this.callLater(this.changeClips))}),H$e(0,H$a,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(H$a){this._strokeColors=H$C.fillArray(H$B.buttonLabelColors,H$a,String),this._setStateChanged()}),H$e(0,H$a,"labelColors",function(){return this._labelColors.join(",")},function(H$a){this._labelColors=H$C.fillArray(H$B.buttonLabelColors,H$a,String),this._setStateChanged()}),H$e(0,H$a,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),H$e(0,H$a,"label",function(){return this._text?this._text.text:null},function(H$a){(this._text||H$a)&&(this.createText(),this._text.text!=H$a&&(H$a&&!this._text.parent&&this.addChild(this._text),this._text.text=(H$a+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),H$e(0,H$a,"selected",function(){return this._selected},function(H$a){this._selected!=H$a&&(this._selected=H$a,this.state=this._selected?2:0,this.event("change"))}),H$e(0,H$a,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(H$a){this.createText(),this._text.padding=H$C.fillArray(H$B.labelPadding,H$a,Number)}),H$e(0,H$a,"labelSize",function(){return this.createText(),this._text.fontSize},function(H$a){this.createText(),this._text.fontSize=H$a}),H$e(0,H$a,"labelStroke",function(){return this.createText(),this._text.stroke},function(H$a){this.createText(),this._text.stroke=H$a}),H$e(0,H$a,"labelBold",function(){return this.createText(),this._text.bold},function(H$a){this.createText(),this._text.bold=H$a}),H$e(0,H$a,"labelFont",function(){return this.createText(),this._text.font},function(H$a){this.createText(),this._text.font=H$a}),H$e(0,H$a,"labelAlign",function(){return this.createText(),this._text.align},function(H$a){this.createText(),this._text.align=H$a}),H$e(0,H$a,"clickHandler",function(){return this._clickHandler},function(H$a){this._clickHandler=H$a}),H$e(0,H$a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(H$a){this._bitmap.sizeGrid=H$C.fillArray(H$B.defaultSizeGrid,H$a,Number)}),H$e(0,H$a,"width",H$b.prototype._$get_width,function(H$a){H$p.superSet(H$F,this,"width",H$a),this._autoSize&&(this._bitmap.width=H$a,this._text&&(this._text.width=H$a))}),H$e(0,H$a,"height",H$b.prototype._$get_height,function(H$a){H$p.superSet(H$F,this,"height",H$a),this._autoSize&&(this._bitmap.height=H$a,this._text&&(this._text.height=H$a))}),H$e(0,H$a,"dataSource",H$b.prototype._$get_dataSource,function(H$a){"number"==typeof(this._dataSource=H$a)||"string"==typeof H$a?this.label=H$a+"":H$p.superSet(H$F,this,"dataSource",H$a)}),H$e(0,H$a,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(H$a){this._bitmap._offset=H$a?H$C.fillArray([1,1],H$a,Number):[]}),H$d(H$c,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),H$c}(H$F),H$J=function(H$b){function H$d(H$a,H$b,H$c){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._complete=null,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,H$d.__super.call(this),void 0===H$b&&(H$b=1),void 0===H$c&&(H$c=1),this._clipX=H$b,this._clipY=H$c,this.skin=H$a}H$f(H$d,"laya.ui.Clip",H$b);var H$a=H$d.prototype;return H$a.destroy=function(H$a){H$s.clearCache(this,this._skin),H$s.clearObject(this,this._weakKey),void 0===H$a&&(H$a=!0),H$b.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},H$a.dispose=function(){this.destroy(!0),H$p.loader.clearRes(this._skin)},H$a.createChildren=function(){this.graphics=this._bitmap=new H$E},H$a._onDisplay=function(H$a){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},H$a.changeClip=function(){if(this._clipChanged=!1,this._skin){var H$a=H$s.getRes(this._skin);H$a?this.loadComplete(this._skin,H$a):H$p.loader.load(this._skin,H$m.create(this,this.loadComplete,[this._skin]))}},H$a.loadComplete=function(H$a,H$b){if(H$a===this._skin&&H$b){H$s.clearObject(this,this._weakKey);var H$c=this._clipWidth||Math.ceil(H$b.sourceWidth/this._clipX),H$d=this._clipHeight||Math.ceil(H$b.sourceHeight/this._clipY),H$e=this._skin+H$c+H$d,H$f=H$s.findObject(H$e);if(H$y.isOkTextureList(H$f)||(H$f=null),H$f)this._weakKey=H$e,H$s.keepObject(this,this._weakKey),this._sources=H$f;else{this._sources=[];for(var H$g=0;H$g<this._clipY;H$g++)for(var H$h=0;H$h<this._clipX;H$h++){var H$i=H$w.createFromTexture(H$b,H$c*H$h,H$d*H$g,H$c,H$d);if(H$b.alphaTexture){var H$j=H$b.width/H$b.alphaTexture.width;H$i.alphaTexture=H$w.createFromTexture(H$b.alphaTexture,H$c*H$h/H$j,H$d*H$g/H$j,H$c/H$j,H$d/H$j)}this._sources.push(H$i)}H$s.saveObject(H$e,this._sources),this._weakKey=H$e,H$s.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},H$a.play=function(H$a,H$b){void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=-1),this._isPlaying=!0,this.index=H$a,this._toIndex=H$b,this._index++,H$p.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},H$a._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},H$a.stop=function(){this._isPlaying=!1,H$p.timer.clear(this,this._loop),this.event("complete")},H$a._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},H$e(0,H$a,"interval",function(){return this._interval},function(H$a){this._interval!=H$a&&(this._interval=H$a,this._isPlaying&&this.play())}),H$e(0,H$a,"skin",function(){return this._skin},function(H$a){this._skin!=H$a&&(H$s.clearCache(this,this._skin),(this._skin=H$a)?(H$s.keepCache(this,this._skin),this._setClipChanged()):this._bitmap.source=null)}),H$e(0,H$a,"sources",function(){return this._sources},function(H$a){this._sources=H$a,this.index=this._index,this.event("loaded")}),H$e(0,H$a,"clipX",function(){return this._clipX},function(H$a){this._clipX=H$a||1,this._setClipChanged()}),H$e(0,H$a,"clipY",function(){return this._clipY},function(H$a){this._clipY=H$a||1,this._setClipChanged()}),H$e(0,H$a,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),H$e(0,H$a,"clipWidth",function(){return this._clipWidth},function(H$a){this._clipWidth=H$a,this._setClipChanged()}),H$e(0,H$a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(H$a){this._bitmap.sizeGrid=H$C.fillArray(H$B.defaultSizeGrid,H$a,Number)}),H$e(0,H$a,"group",function(){return this._group},function(H$a){H$a&&this._skin&&H$s.setGroup(this._skin,H$a),this._group=H$a}),H$e(0,H$a,"clipHeight",function(){return this._clipHeight},function(H$a){this._clipHeight=H$a,this._setClipChanged()}),H$e(0,H$a,"width",H$b.prototype._$get_width,function(H$a){H$p.superSet(H$F,this,"width",H$a),this._bitmap.width=H$a}),H$e(0,H$a,"height",H$b.prototype._$get_height,function(H$a){H$p.superSet(H$F,this,"height",H$a),this._bitmap.height=H$a}),H$e(0,H$a,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),H$e(0,H$a,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),H$e(0,H$a,"index",function(){return this._index},function(H$a){this._index=H$a,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[H$a]),this.event("change")}),H$e(0,H$a,"autoPlay",function(){return this._autoPlay},function(H$a){this._autoPlay!=H$a&&((this._autoPlay=H$a)?this.play():this.stop())}),H$e(0,H$a,"isPlaying",function(){return this._isPlaying},function(H$a){this._isPlaying=H$a}),H$e(0,H$a,"dataSource",H$b.prototype._$get_dataSource,function(H$a){"number"==typeof(this._dataSource=H$a)&&Math.floor(H$a)==H$a||"string"==typeof H$a?this.index=parseInt(H$a):H$p.superSet(H$F,this,"dataSource",H$a)}),H$e(0,H$a,"bitmap",function(){return this._bitmap}),H$d}(H$F),H$K=function(H$b){function H$a(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,H$a.__super.call(this)}H$f(H$a,"laya.ui.ColorPicker",H$b);var H$c=H$a.prototype;return H$c.destroy=function(H$a){void 0===H$a&&(H$a=!0),H$b.prototype.destroy.call(this,H$a),this._colorPanel&&this._colorPanel.destroy(H$a),this._colorButton&&this._colorButton.destroy(H$a),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},H$c.createChildren=function(){this.addChild(this._colorButton=new H$I),this._colorPanel=new H$H,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new H$u),this._colorPanel.addChild(this._colorBlock=new H$u),this._colorPanel.addChild(this._colorInput=new H$n)},H$c.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},H$c.onPanelMouseDown=function(H$a){H$a.stopPropagation()},H$c.changePanel=function(){this._panelChanged=!1;var H$a=this._colorPanel.graphics;H$a.clear(),H$a.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(H$a=this._colorTiles.graphics).clear();for(var H$b=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],H$c=0;H$c<12;H$c++)for(var H$d=0;H$d<20;H$d++){var H$e=0;H$e=0===H$d?H$b[H$c]:1===H$d?0:51*(((3*H$c+H$d/6)%3<<0)+3*(H$c/6<<0))<<16|H$d%6*51<<8|(H$c<<0)%6*51;var H$f=H$C.toColor(H$e);this._colors.push(H$f);var H$g=H$d*this._gridSize,H$h=H$c*this._gridSize;H$a.drawRect(H$g,H$h,this._gridSize,this._gridSize,H$f,"#000000")}},H$c.onColorButtonClick=function(H$a){this._colorPanel.parent?this.close():this.open()},H$c.open=function(){var H$a=this.localToGlobal(new H$o),H$b=H$a.x+this._colorPanel.width<=H$p.stage.width?H$a.x:H$p.stage.width-this._colorPanel.width,H$c=H$a.y+this._colorButton.height;H$c=H$c+this._colorPanel.height<=H$p.stage.height?H$c:H$a.y-this._colorPanel.height,this._colorPanel.pos(H$b,H$c),this._colorPanel.zOrder=1001,H$p._currentStage.addChild(this._colorPanel),H$p.stage.on("mousedown",this,this.removeColorBox)},H$c.close=function(){H$p.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},H$c.removeColorBox=function(H$a){this.close()},H$c.onColorFieldKeyDown=function(H$a){13==H$a.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),H$a.stopPropagation())},H$c.onColorInputChange=function(H$a){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},H$c.onColorTilesClick=function(H$a){this.selectedColor=this.getColorByMouse(),this.close()},H$c.onColorTilesMouseMove=function(H$a){this._colorInput.focus=!1;var H$b=this.getColorByMouse();this._colorInput.text=H$b,this.drawBlock(H$b)},H$c.getColorByMouse=function(){var H$a=this._colorTiles.getMousePoint(),H$b=Math.floor(H$a.x/this._gridSize),H$c=Math.floor(H$a.y/this._gridSize);return this._colors[20*H$c+H$b]},H$c.drawBlock=function(H$a){var H$b=this._colorBlock.graphics;H$b.clear();var H$c=H$a||"#ffffff";H$b.drawRect(0,0,50,20,H$c,this._borderColor),H$a||H$b.drawLine(0,0,50,20,"#ff0000")},H$c.changeColor=function(){var H$a=this.graphics;H$a.clear();var H$b=this._selectedColor||"#000000";H$a.drawRect(0,0,this._colorButton.width,this._colorButton.height,H$b)},H$c._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},H$e(0,H$c,"inputBgColor",function(){return this._inputBgColor},function(H$a){this._inputBgColor=H$a,this._setPanelChanged()}),H$e(0,H$c,"selectedColor",function(){return this._selectedColor},function(H$a){this._selectedColor!=H$a&&(this._selectedColor=this._colorInput.text=H$a,this.drawBlock(H$a),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",H$i.EMPTY.setTo("change",this,this)))}),H$e(0,H$c,"skin",function(){return this._colorButton.skin},function(H$a){this._colorButton.skin=H$a,this.changeColor()}),H$e(0,H$c,"bgColor",function(){return this._bgColor},function(H$a){this._bgColor=H$a,this._setPanelChanged()}),H$e(0,H$c,"borderColor",function(){return this._borderColor},function(H$a){this._borderColor=H$a,this._setPanelChanged()}),H$e(0,H$c,"inputColor",function(){return this._inputColor},function(H$a){this._inputColor=H$a,this._setPanelChanged()}),H$a}(H$F),H$L=function(H$b){function H$c(H$a,H$b){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,H$c.__super.call(this),this._itemColors=H$B.comboBoxItemColors,this.skin=H$a,this.labels=H$b}H$f(H$c,"laya.ui.ComboBox",H$b);var H$a=H$c.prototype;return H$a.destroy=function(H$a){void 0===H$a&&(H$a=!0),H$b.prototype.destroy.call(this,H$a),this._button&&this._button.destroy(H$a),this._list&&this._list.destroy(H$a),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},H$a.createChildren=function(){this.addChild(this._button=new H$I),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},H$a._createList=function(){this._list=new H$V,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},H$a._setListEvent=function(H$a){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=H$m.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},H$a.onListDown=function(H$a){H$a.stopPropagation()},H$a.onScrollBarDown=function(H$a){H$a.stopPropagation()},H$a.onButtonMouseDown=function(H$a){this.callLater(this.switchTo,[!this._isOpen])},H$a.changeList=function(){this._listChanged=!1;var H$a=this.width-2,H$b=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:H$a,height:this._itemHeight,fontSize:this._itemSize,color:H$b}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},H$a.onlistItemMouse=function(H$a,H$b){var H$c=H$a.type;if("mouseover"===H$c||"mouseout"===H$c){if(this._isCustomList)return;var H$d=this._list.getCell(H$b);if(!H$d)return;var H$e=H$d.getChildByName("label");H$e&&("mouseover"===H$c?(H$e.bgColor=this._itemColors[0],H$e.color=this._itemColors[1]):(H$e.bgColor=null,H$e.color=this._itemColors[2]))}else"click"===H$c&&(this.selectedIndex=H$b,this.isOpen=!1)},H$a.switchTo=function(H$a){this.isOpen=H$a},H$a.changeOpen=function(){this.isOpen=!this._isOpen},H$a.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var H$a=this._list.graphics;H$a.clear(),H$a.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var H$b=this._list.array||[],H$c=H$b.length=0,H$d=this._labels.length;H$c<H$d;H$c++)H$b.push({label:this._labels[H$c]});this._list.height=this._listHeight,this._list.array=H$b},H$a.changeSelected=function(){this._button.label=this.selectedLabel},H$a._onStageMouseWheel=function(H$a){this._list&&!this._list.contains(H$a.target)&&this.removeList(null)},H$a.removeList=function(H$a){H$p.stage.off("mousedown",this,this.removeList),H$p.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},H$e(0,H$a,"selectedIndex",function(){return this._selectedIndex},function(H$a){this._selectedIndex!=H$a&&(this._selectedIndex=H$a,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[H$i.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),H$e(0,H$a,"measureHeight",function(){return this._button.height}),H$e(0,H$a,"skin",function(){return this._button.skin},function(H$a){this._button.skin!=H$a&&(this._button.skin=H$a,this._listChanged=!0)}),H$e(0,H$a,"measureWidth",function(){return this._button.width}),H$e(0,H$a,"width",H$b.prototype._$get_width,function(H$a){H$p.superSet(H$F,this,"width",H$a),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),H$e(0,H$a,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(H$a){this.selectedIndex=this._labels.indexOf(H$a)}),H$e(0,H$a,"labels",function(){return this._labels.join(",")},function(H$a){0<this._labels.length&&(this.selectedIndex=-1),H$a?this._labels=H$a.split(","):this._labels.length=0,this._itemChanged=!0}),H$e(0,H$a,"height",H$b.prototype._$get_height,function(H$a){H$p.superSet(H$F,this,"height",H$a),this._button.height=this._height}),H$e(0,H$a,"selectHandler",function(){return this._selectHandler},function(H$a){this._selectHandler=H$a}),H$e(0,H$a,"visibleNum",function(){return this._visibleNum},function(H$a){this._visibleNum=H$a,this._listChanged=!0}),H$e(0,H$a,"labelBold",function(){return this._button.text.bold},function(H$a){this._button.text.bold=H$a}),H$e(0,H$a,"itemColors",function(){return String(this._itemColors)},function(H$a){this._itemColors=H$C.fillArray(this._itemColors,H$a,String),this._listChanged=!0}),H$e(0,H$a,"itemSize",function(){return this._itemSize},function(H$a){this._itemSize=H$a,this._listChanged=!0}),H$e(0,H$a,"scrollBar",function(){return this.list.scrollBar}),H$e(0,H$a,"isOpen",function(){return this._isOpen},function(H$a){if(this._isOpen!=H$a)if(this._isOpen=H$a,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var H$b=this.localToGlobal(H$o.TEMP.setTo(0,0)),H$c=H$b.y+this._button.height;H$c=H$c+this._listHeight<=H$p.stage.height?H$c:H$b.y-this._listHeight,this._list.pos(H$b.x,H$c),this._list.zOrder=1001,H$p._currentStage.addChild(this._list),H$p.stage.once("mousedown",this,this.removeList),H$p.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),H$e(0,H$a,"scrollBarSkin",function(){return this._scrollBarSkin},function(H$a){this._scrollBarSkin=H$a}),H$e(0,H$a,"sizeGrid",function(){return this._button.sizeGrid},function(H$a){this._button.sizeGrid=H$a}),H$e(0,H$a,"button",function(){return this._button}),H$e(0,H$a,"list",function(){return this._list||this._createList(),this._list},function(H$a){H$a&&(H$a.removeSelf(),this._isCustomList=!0,this._list=H$a,this._setListEvent(H$a),this._itemHeight=H$a.getCell(0).height+H$a.spaceY)}),H$e(0,H$a,"dataSource",H$b.prototype._$get_dataSource,function(H$a){"number"==typeof(this._dataSource=H$a)&&Math.floor(H$a)==H$a||"string"==typeof H$a?this.selectedIndex=parseInt(H$a):H$a instanceof Array?this.labels=H$a.join(","):H$p.superSet(H$F,this,"dataSource",H$a)}),H$e(0,H$a,"labelColors",function(){return this._button.labelColors},function(H$a){this._button.labelColors!=H$a&&(this._button.labelColors=H$a)}),H$e(0,H$a,"labelPadding",function(){return this._button.text.padding.join(",")},function(H$a){this._button.text.padding=H$C.fillArray(H$B.labelPadding,H$a,Number)}),H$e(0,H$a,"labelSize",function(){return this._button.text.fontSize},function(H$a){this._button.text.fontSize=H$a}),H$e(0,H$a,"labelFont",function(){return this._button.text.font},function(H$a){this._button.text.font=H$a}),H$e(0,H$a,"stateNum",function(){return this._button.stateNum},function(H$a){this._button.stateNum=H$a}),H$c}(H$F),H$M=function(H$b){function H$c(H$a){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,H$c.__super.call(this),this._showButtons=H$D.showButtons,this._touchScrollEnable=H$D.touchScrollEnable,this._mouseWheelEnable=H$D.mouseWheelEnable,this.skin=H$a,this.max=1}H$f(H$c,"laya.ui.ScrollBar",H$b);var H$a=H$c.prototype;return H$a.destroy=function(H$a){void 0===H$a&&(H$a=!0),this.stopScroll(),this.target=null,H$b.prototype.destroy.call(this,H$a),this.upButton&&this.upButton.destroy(H$a),this.downButton&&this.downButton.destroy(H$a),this.slider&&this.slider.destroy(H$a),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},H$a.createChildren=function(){this.addChild(this.slider=new H$N),this.addChild(this.upButton=new H$I),this.addChild(this.downButton=new H$I)},H$a.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},H$a.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},H$a.onButtonMouseDown=function(H$a){var H$b=H$a.currentTarget===this.upButton;this.slide(H$b),H$p.timer.once(H$B.scrollBarDelayTime,this,this.startLoop,[H$b]),H$p.stage.once("mouseup",this,this.onStageMouseUp)},H$a.startLoop=function(H$a){H$p.timer.frameLoop(1,this,this.slide,[H$a])},H$a.slide=function(H$a){H$a?this.value-=this._scrollSize:this.value+=this._scrollSize},H$a.onStageMouseUp=function(H$a){H$p.timer.clear(this,this.startLoop),H$p.timer.clear(this,this.slide)},H$a.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},H$a.changeSize=function(){H$b.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},H$a.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},H$a.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},H$a.setScroll=function(H$a,H$b,H$c){this.runCallLater(this.changeSize),this.slider.setSlider(H$a,H$b,H$c),this.slider.bar.visible=0<H$b,!this._hide&&this.autoHide&&(this.visible=!1)},H$a.onTargetMouseWheel=function(H$a){this.value-=H$a.delta*this._scrollSize,this.target=this._target},H$a.onTargetMouseDown=function(H$a){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new H$o),this._lastPoint.setTo(H$p.stage.mouseX,H$p.stage.mouseY),H$p.timer.clear(this,this.tweenMove),H$x.clearTween(this),H$p.stage.once("mouseup",this,this.onStageMouseUp2),H$p.stage.once("mouseout",this,this.onStageMouseUp2),H$p.timer.frameLoop(1,this,this.loop)},H$a.loop=function(){var H$a=H$p.stage.mouseY,H$b=H$p.stage.mouseX;if(this._lastOffset=this.isVertical?H$a-this._lastPoint.y:H$b-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?H$p.stage._canvasTransform.getScaleY():H$p.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=H$b,this._lastPoint.y=H$a,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},H$a.onStageMouseUp2=function(H$a){if(H$p.stage.off("mouseup",this,this.onStageMouseUp2),H$p.stage.off("mouseout",this,this.onStageMouseUp2),H$p.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?H$x.to(this,{value:this.min},this.elasticBackTime,H$h.sineOut,H$m.create(this,this.elasticOver)):this._value>this.max&&H$x.to(this,{value:this.max},this.elasticBackTime,H$h.sineOut,H$m.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?H$p.stage.mouseY-this._lastPoint.y:H$p.stage.mouseX-this._lastPoint.x);for(var H$b=0,H$c=Math.min(this._offsets.length,3),H$d=0;H$d<H$c;H$d++)H$b+=this._offsets[this._offsets.length-1-H$d];if(this._lastOffset=H$b/H$c,(H$b=Math.abs(this._lastOffset))<2)return void this.event("end");60<H$b&&(this._lastOffset=0<this._lastOffset?60:-60);var H$e=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));H$p.timer.frameLoop(1,this,this.tweenMove,[H$e])}},H$a.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&H$x.to(this,{alpha:0},500),this.event("end")},H$a.tweenMove=function(H$a){this._lastOffset*=this.rollRatio;var H$b=NaN;if(0<H$a&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,H$b=.5*-(this.min-H$a-this.value),this._lastOffset>H$b&&(this._lastOffset=H$b)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,H$b=.5*-(this.max+H$a-this.value),this._lastOffset<H$b&&(this._lastOffset=H$b))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(H$p.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?H$x.to(this,{value:this.min},this.elasticBackTime,H$h.sineOut,H$m.create(this,this.elasticOver)):this._value>this.max?H$x.to(this,{value:this.max},this.elasticBackTime,H$h.sineOut,H$m.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&H$x.to(this,{alpha:0},500)}},H$a.stopScroll=function(){this.onStageMouseUp2(null),H$p.timer.clear(this,this.tweenMove),H$x.clearTween(this)},H$e(0,H$a,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),H$e(0,H$a,"skin",function(){return this._skin},function(H$a){this._skin!=H$a&&(this._skin=H$a,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),H$e(0,H$a,"max",function(){return this.slider.max},function(H$a){this.slider.max=H$a}),H$e(0,H$a,"showButtons",function(){return this._showButtons},function(H$a){this._showButtons=H$a,this.callLater(this.changeScrollBar)}),H$e(0,H$a,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),H$e(0,H$a,"min",function(){return this.slider.min},function(H$a){this.slider.min=H$a}),H$e(0,H$a,"value",function(){return this._value},function(H$a){H$a!==this._value&&(this._value=H$a,this._isElastic||(this.slider._value!=H$a&&(this.slider._value=H$a,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),H$e(0,H$a,"isVertical",function(){return this.slider.isVertical},function(H$a){this.slider.isVertical=H$a}),H$e(0,H$a,"sizeGrid",function(){return this.slider.sizeGrid},function(H$a){this.slider.sizeGrid=H$a}),H$e(0,H$a,"scrollSize",function(){return this._scrollSize},function(H$a){this._scrollSize=H$a}),H$e(0,H$a,"dataSource",H$b.prototype._$get_dataSource,function(H$a){"number"==typeof(this._dataSource=H$a)||"string"==typeof H$a?this.value=Number(H$a):H$p.superSet(H$F,this,"dataSource",H$a)}),H$e(0,H$a,"thumbPercent",function(){return this._thumbPercent},function(H$a){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),H$a=1<=H$a?.99:H$a,this._thumbPercent=H$a,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*H$a,H$B.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*H$a,H$B.scrollBarMinNum))}),H$e(0,H$a,"target",function(){return this._target},function(H$a){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=H$a)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),H$e(0,H$a,"hide",function(){return this._hide},function(H$a){this._hide=H$a,this.visible=!H$a}),H$e(0,H$a,"touchScrollEnable",function(){return this._touchScrollEnable},function(H$a){this._touchScrollEnable=H$a,this.target=this._target}),H$e(0,H$a,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(H$a){this._mouseWheelEnable=H$a,this.target=this._target}),H$e(0,H$a,"tick",function(){return this.slider.tick},function(H$a){this.slider.tick=H$a}),H$c}(H$F),H$N=function(H$b){function H$c(H$a){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,H$c.__super.call(this),this.skin=H$a}H$f(H$c,"laya.ui.Slider",H$b);var H$a=H$c.prototype;return H$a.destroy=function(H$a){void 0===H$a&&(H$a=!0),H$b.prototype.destroy.call(this,H$a),this._bg&&this._bg.destroy(H$a),this._bar&&this._bar.destroy(H$a),this._progress&&this._progress.destroy(H$a),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},H$a.createChildren=function(){this.addChild(this._bg=new H$O),this.addChild(this._bar=new H$I)},H$a.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},H$a.onBarMouseDown=function(H$a){this._globalSacle||(this._globalSacle=new H$o),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=H$p.stage.mouseX,this._ty=H$p.stage.mouseY,H$p.stage.on("mousemove",this,this.mouseMove),H$p.stage.once("mouseup",this,this.mouseUp),H$p.stage.once("mouseout",this,this.mouseUp),this.showValueText()},H$a.showValueText=function(){if(this.showLabel){var H$a=laya.ui.Slider.label;this.addChild(H$a),H$a.textField.changeText(this._value+""),this.isVertical?(H$a.x=this._bar.x+20,H$a.y=.5*(this._bar.height-H$a.height)+this._bar.y):(H$a.y=this._bar.y-20,H$a.x=.5*(this._bar.width-H$a.width)+this._bar.x)}},H$a.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},H$a.mouseUp=function(H$a){H$p.stage.off("mousemove",this,this.mouseMove),H$p.stage.off("mouseup",this,this.mouseUp),H$p.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},H$a.mouseMove=function(H$a){var H$b=this._value;this.isVertical?(this._bar.y+=(H$p.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(H$p.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=H$p.stage.mouseX,this._ty=H$p.stage.mouseY;var H$c=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*H$c)/H$c,this._value!=H$b&&this.sendChangeEvent(),this.showValueText()},H$a.sendChangeEvent=function(H$a){void 0===H$a&&(H$a="change"),this.event(H$a),this.changeHandler&&this.changeHandler.runWith(this._value)},H$a.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},H$a.changeSize=function(){H$b.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},H$a.setSlider=function(H$a,H$b,H$c){this._value=-1,this._min=H$a,this._max=H$a<H$b?H$b:H$a,this.value=H$c<H$a?H$a:H$b<H$c?H$b:H$c},H$a.changeValue=function(){var H$a=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*H$a)/H$a,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var H$b=this._max-this._min;0===H$b&&(H$b=1),this.isVertical?(this._bar.y=(this._value-this._min)/H$b*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/H$b*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},H$a.onBgMouseDown=function(H$a){var H$b=this._bg.getMousePoint();this.isVertical?this.value=H$b.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=H$b.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},H$e(0,H$a,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),H$e(0,H$a,"skin",function(){return this._skin},function(H$a){if(this._skin!=H$a){this._skin=H$a,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var H$b=this._skin.replace(".png","$progress.png");H$s.getRes(H$b)&&(this._progress||(this.addChild(this._progress=new H$O),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=H$b),this.setBarPoint(),this.callLater(this.changeValue)}}),H$e(0,H$a,"allowClickBack",function(){return this._allowClickBack},function(H$a){this._allowClickBack!=H$a&&((this._allowClickBack=H$a)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),H$e(0,H$a,"max",function(){return this._max},function(H$a){this._max!=H$a&&(this._max=H$a,this.callLater(this.changeValue))}),H$e(0,H$a,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),H$e(0,H$a,"tick",function(){return this._tick},function(H$a){this._tick!=H$a&&(this._tick=H$a,this.callLater(this.changeValue))}),H$e(0,H$a,"sizeGrid",function(){return this._bg.sizeGrid},function(H$a){this._bg.sizeGrid=H$a,this._bar.sizeGrid=H$a,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),H$e(0,H$a,"min",function(){return this._min},function(H$a){this._min!=H$a&&(this._min=H$a,this.callLater(this.changeValue))}),H$e(0,H$a,"value",function(){return this._value},function(H$a){if(this._value!=H$a){var H$b=this._value;this._value=H$a,this.changeValue(),this._value!=H$b&&this.sendChangeEvent()}}),H$e(0,H$a,"dataSource",H$b.prototype._$get_dataSource,function(H$a){"number"==typeof(this._dataSource=H$a)||"string"==typeof H$a?this.value=Number(H$a):H$p.superSet(H$F,this,"dataSource",H$a)}),H$e(0,H$a,"bar",function(){return this._bar}),H$d(H$c,["label",function(){return this.label=new H$P}]),H$c}(H$F),H$O=function(H$b){function H$c(H$a){this._bitmap=null,this._skin=null,this._group=null,H$c.__super.call(this),this.skin=H$a}H$f(H$c,"laya.ui.Image",H$b);var H$a=H$c.prototype;return H$a.destroy=function(H$a){void 0===H$a&&(H$a=!0),H$b.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,H$s.clearCache(this,this._skin)},H$a.dispose=function(){this.destroy(!0),H$s.clearCache(this,this._skin)},H$a.createChildren=function(){this.graphics=this._bitmap=new H$E},H$a.setSource=function(H$a,H$b){H$a===this._skin&&H$b&&(this.source=H$b,this.onCompResize())},H$e(0,H$a,"source",function(){return this._bitmap.source},function(H$a){this._bitmap&&(this._bitmap.source=H$a,this.event("loaded"),this.repaint())}),H$e(0,H$a,"dataSource",H$b.prototype._$get_dataSource,function(H$a){"string"==typeof(this._dataSource=H$a)?this.skin=H$a:H$p.superSet(H$F,this,"dataSource",H$a)}),H$e(0,H$a,"measureHeight",function(){return this._bitmap.height}),H$e(0,H$a,"skin",function(){return this._skin},function(H$a){if(this._skin!=H$a)if(H$s.clearCache(this,this._skin),this._skin=H$a){H$s.keepCache(this,this._skin);var H$b=H$s.getRes(H$a);H$b?(this.source=H$b,this.onCompResize()):H$p.loader.load(this._skin,H$m.create(this,this.setSource,[this._skin]),null,"image",1,!0,this._group)}else this.source=null}),H$e(0,H$a,"group",function(){return this._group},function(H$a){H$a&&this._skin&&H$s.setGroup(this._skin,H$a),this._group=H$a}),H$e(0,H$a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(H$a){this._bitmap.sizeGrid=H$C.fillArray(H$B.defaultSizeGrid,H$a,Number)}),H$e(0,H$a,"measureWidth",function(){return this._bitmap.width}),H$e(0,H$a,"width",H$b.prototype._$get_width,function(H$a){H$p.superSet(H$F,this,"width",H$a),this._bitmap.width=0==H$a?1e-7:H$a}),H$e(0,H$a,"height",H$b.prototype._$get_height,function(H$a){H$p.superSet(H$F,this,"height",H$a),this._bitmap.height=0==H$a?1e-7:H$a}),H$c}(H$F),H$P=function(H$b){function H$c(H$a){this._tf=null,H$c.__super.call(this),void 0===H$a&&(H$a=""),H$j.defaultColor=H$B.labelColor,this.text=H$a}H$f(H$c,"laya.ui.Label",H$b);var H$a=H$c.prototype;return H$a.destroy=function(H$a){void 0===H$a&&(H$a=!0),H$b.prototype.destroy.call(this,H$a),this._tf=null},H$a.createChildren=function(){this.addChild(this._tf=new H$v)},H$a.changeText=function(H$a){this._tf.changeText(H$a)},H$e(0,H$a,"padding",function(){return this._tf.padding.join(",")},function(H$a){this._tf.padding=H$C.fillArray(H$B.labelPadding,H$a,Number)}),H$e(0,H$a,"bold",function(){return this._tf.bold},function(H$a){this._tf.bold=H$a}),H$e(0,H$a,"align",function(){return this._tf.align},function(H$a){this._tf.align=H$a}),H$e(0,H$a,"text",function(){return this._tf.text},function(H$a){this._tf.text!=H$a&&(H$a&&(H$a=H$C.adptString(H$a+"")),this._tf.text=H$a,this.event("change"),this._width&&this._height||this.onCompResize())}),H$e(0,H$a,"italic",function(){return this._tf.italic},function(H$a){this._tf.italic=H$a}),H$e(0,H$a,"wordWrap",function(){return this._tf.wordWrap},function(H$a){this._tf.wordWrap=H$a}),H$e(0,H$a,"font",function(){return this._tf.font},function(H$a){this._tf.font=H$a}),H$e(0,H$a,"dataSource",H$b.prototype._$get_dataSource,function(H$a){"number"==typeof(this._dataSource=H$a)||"string"==typeof H$a?this.text=H$a+"":H$p.superSet(H$F,this,"dataSource",H$a)}),H$e(0,H$a,"color",function(){return this._tf.color},function(H$a){this._tf.color=H$a}),H$e(0,H$a,"valign",function(){return this._tf.valign},function(H$a){this._tf.valign=H$a}),H$e(0,H$a,"leading",function(){return this._tf.leading},function(H$a){this._tf.leading=H$a}),H$e(0,H$a,"fontSize",function(){return this._tf.fontSize},function(H$a){this._tf.fontSize=H$a}),H$e(0,H$a,"bgColor",function(){return this._tf.bgColor},function(H$a){this._tf.bgColor=H$a}),H$e(0,H$a,"borderColor",function(){return this._tf.borderColor},function(H$a){this._tf.borderColor=H$a}),H$e(0,H$a,"stroke",function(){return this._tf.stroke},function(H$a){this._tf.stroke=H$a}),H$e(0,H$a,"strokeColor",function(){return this._tf.strokeColor},function(H$a){this._tf.strokeColor=H$a}),H$e(0,H$a,"textField",function(){return this._tf}),H$e(0,H$a,"measureWidth",function(){return this._tf.width}),H$e(0,H$a,"measureHeight",function(){return this._tf.height}),H$e(0,H$a,"width",function(){return this._width||this._tf.text?H$p.superGet(H$F,this,"width"):0},function(H$a){H$p.superSet(H$F,this,"width",H$a),this._tf.width=H$a}),H$e(0,H$a,"height",function(){return this._height||this._tf.text?H$p.superGet(H$F,this,"height"):0},function(H$a){H$p.superSet(H$F,this,"height",H$a),this._tf.height=H$a}),H$e(0,H$a,"overflow",function(){return this._tf.overflow},function(H$a){this._tf.overflow=H$a}),H$e(0,H$a,"underline",function(){return this._tf.underline},function(H$a){this._tf.underline=H$a}),H$e(0,H$a,"underlineColor",function(){return this._tf.underlineColor},function(H$a){this._tf.underlineColor=H$a}),H$c}(H$F),H$Q=function(H$b){function H$c(H$a){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,H$c.__super.call(this),this.skin=H$a}H$f(H$c,"laya.ui.ProgressBar",H$b);var H$a=H$c.prototype;return H$a.destroy=function(H$a){void 0===H$a&&(H$a=!0),H$b.prototype.destroy.call(this,H$a),this._bg&&this._bg.destroy(H$a),this._bar&&this._bar.destroy(H$a),this._bg=this._bar=null,this.changeHandler=null},H$a.createChildren=function(){this.addChild(this._bg=new H$O),this.addChild(this._bar=new H$O)},H$a.changeValue=function(){if(this.sizeGrid){var H$a=this.sizeGrid.split(","),H$b=Number(H$a[3]),H$c=Number(H$a[1]),H$d=(this.width-H$b-H$c)*this._value;this._bar.width=H$b+H$c+H$d,this._bar.visible=this._bar.width>H$b+H$c}else this._bar.width=this.width*this._value},H$e(0,H$a,"measureHeight",function(){return this._bg.height}),H$e(0,H$a,"skin",function(){return this._skin},function(H$a){this._skin!=H$a&&(this._skin=H$a,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),H$e(0,H$a,"measureWidth",function(){return this._bg.width}),H$e(0,H$a,"height",H$b.prototype._$get_height,function(H$a){H$p.superSet(H$F,this,"height",H$a),this._bg.height=this._height,this._bar.height=this._height}),H$e(0,H$a,"bar",function(){return this._bar}),H$e(0,H$a,"value",function(){return this._value},function(H$a){this._value!=H$a&&(H$a=1<H$a?1:H$a<0?0:H$a,this._value=H$a,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(H$a))}),H$e(0,H$a,"bg",function(){return this._bg}),H$e(0,H$a,"sizeGrid",function(){return this._bg.sizeGrid},function(H$a){this._bg.sizeGrid=this._bar.sizeGrid=H$a}),H$e(0,H$a,"width",H$b.prototype._$get_width,function(H$a){H$p.superSet(H$F,this,"width",H$a),this._bg.width=this._width,this.callLater(this.changeValue)}),H$e(0,H$a,"dataSource",H$b.prototype._$get_dataSource,function(H$a){"number"==typeof(this._dataSource=H$a)||"string"==typeof H$a?this.value=Number(H$a):H$p.superSet(H$F,this,"dataSource",H$a)}),H$c}(H$F),H$R=(function(H$a){function H$c(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,H$c.__super.call(this),this._tipBox=new H$F,this._tipBox.addChild(this._tipText=new H$v),this._tipText.x=this._tipText.y=5,this._tipText.color=H$c.tipTextColor,this._defaultTipHandler=this._showDefaultTip,H$p.stage.on("showtip",this,this._onStageShowTip),H$p.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}H$f(H$c,"laya.ui.TipManager",H$F);var H$b=H$c.prototype;H$b._onStageHideTip=function(H$a){H$p.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},H$b._onStageShowTip=function(H$a){H$p.timer.once(H$c.tipDelay,this,this._showTip,[H$a],!0)},H$b._showTip=function(H$a){if("string"==typeof H$a){var H$b=String(H$a);Boolean(H$b)&&this._defaultTipHandler(H$b)}else H$a instanceof laya.utils.Handler?H$a.run():"function"==typeof H$a&&H$a.apply();H$p.stage.on("mousemove",this,this._onStageMouseMove),H$p.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},H$b._onStageMouseDown=function(H$a){this.closeAll()},H$b._onStageMouseMove=function(H$a){this._showToStage(this,H$c.offsetX,H$c.offsetY)},H$b._showToStage=function(H$a,H$b,H$c){void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0);var H$d=H$a.getBounds();H$a.x=H$p.stage.mouseX+H$b,H$a.y=H$p.stage.mouseY+H$c,H$a.x+H$d.width>H$p.stage.width&&(H$a.x-=H$d.width+H$b),H$a.y+H$d.height>H$p.stage.height&&(H$a.y-=H$d.height+H$c)},H$b.closeAll=function(){H$p.timer.clear(this,this._showTip),H$p.stage.off("mousemove",this,this._onStageMouseMove),H$p.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},H$b.showDislayTip=function(H$a){this.addChild(H$a),this._showToStage(this),H$p._currentStage.addChild(this)},H$b._showDefaultTip=function(H$a){this._tipText.text=H$a;var H$b=this._tipBox.graphics;H$b.clear(),H$b.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,H$c.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),H$p._currentStage.addChild(this)},H$e(0,H$b,"defaultTipHandler",function(){return this._defaultTipHandler},function(H$a){this._defaultTipHandler=H$a}),H$c.offsetX=10,H$c.offsetY=15,H$c.tipTextColor="#ffffff",H$c.tipBackColor="#111111",H$c.tipDelay=200}(),function(H$a){var H$n;function H$o(){this._idMap=null,this._aniList=null,this._watchMap={},H$o.__super.call(this)}H$f(H$o,"laya.ui.View",H$H);var H$b=H$o.prototype;return H$b.createView=function(H$a){if(H$a.animations&&!this._idMap&&(this._idMap={}),H$o.createComp(H$a,this,this),H$a.animations){var H$b,H$c,H$d=[],H$e=H$a.animations,H$f=0,H$g=H$e.length;for(H$f=0;H$f<H$g;H$f++){switch(H$b=new H$k,H$c=H$e[H$f],H$b._setUp(this._idMap,H$c),(this[H$c.name]=H$b)._setControlNode(this),H$c.action){case 1:H$b.play(0,!1);break;case 2:H$b.play(0,!0)}H$d.push(H$b)}this._aniList=H$d}0<this._width&&null==H$a.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},H$b.onEvent=function(H$a,H$b){},H$b.loadUI=function(H$a){var H$b=H$o.uiMap[H$a];H$b&&this.createView(H$b)},H$b.destroy=function(H$a){void 0===H$a&&(H$a=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,H$a)},H$b.changeData=function(H$a){var H$b=this._watchMap[H$a];if(H$b){console.log("change",H$a);for(var H$c=0,H$d=H$b.length;H$c<H$d;H$c++){H$b[H$c].exe(this)}}},H$o._regs=function(){for(var H$a in H$o.uiClassMap)H$q.regClass(H$a,H$o.uiClassMap[H$a])},H$o.createComp=function(H$a,H$b,H$c,H$d){if(!(H$b=H$b||H$o.getCompInstance(H$a)))return console.warn("can not create:"+H$a.type),null;var H$e=H$a.child;if(H$e)for(var H$f=H$b instanceof laya.ui.List,H$g=0,H$h=H$e.length;H$g<H$h;H$g++){var H$i=H$e[H$g];if(!H$b.hasOwnProperty("itemRender")||"render"!=H$i.props.name&&"render"!==H$i.props.renderType)if("Graphic"==H$i.type)H$q.addGraphicsToSprite(H$i,H$b);else if(H$q.isDrawType(H$i.type))H$q.addGraphicToSprite(H$i,H$b,!0);else{if(H$f){var H$j=[],H$k=H$o.createComp(H$i,null,H$c,H$j);H$j.length&&(H$k._$bindData=H$j)}else H$k=H$o.createComp(H$i,null,H$c,H$d);"Script"==H$i.type?"owner"in H$k?H$k.owner=H$b:"target"in H$k&&(H$k.target=H$b):"mask"==H$i.props.renderType||"mask"==H$i.props.name?H$b.mask=H$k:H$k instanceof laya.display.Sprite&&H$b.addChild(H$k)}else H$b.itemRender=H$i}var H$l=H$a.props;for(var H$m in H$l){var H$n=H$l[H$m];H$o.eventDic[H$m]?H$n&&H$c&&H$b.on(H$m,H$c,H$c.onEvent,[H$n]):H$o.setCompValue(H$b,H$m,H$n,H$c,H$d)}return H$p.__typeof(H$b,"laya.ui.IItem")&&H$b.initItems(),H$a.compId&&H$c&&H$c._idMap&&(H$c._idMap[H$a.compId]=H$b),H$b},H$o.setCompValue=function(H$a,H$b,H$c,H$d,H$e){if("string"==typeof H$c&&-1<H$c.indexOf("${")){if(H$o._sheet||(H$o._sheet=H$q.getClass("laya.data.Table")),!H$o._sheet)return void console.warn("Can not find class Sheet");if(H$e)H$e.push(H$a,H$b,H$c);else if(H$d){-1==H$c.indexOf("].")&&(H$c=H$c.replace(".","[0]."));var H$f,H$g,H$h=new H$n(H$a,H$b,H$c);H$h.exe(H$d);for(var H$i=H$c.replace(/\[.*?\]\./g,".");null!=(H$f=H$o._parseWatchData.exec(H$i));){for(var H$j=H$f[1];null!=(H$g=H$o._parseKeyWord.exec(H$j));){var H$k=H$g[0],H$l=H$d._watchMap[H$k]||(H$d._watchMap[H$k]=[]);H$l.push(H$h),H$o._sheet.I.notifer.on(H$k,H$d,H$d.changeData,[H$k])}(H$l=H$d._watchMap[H$j]||(H$d._watchMap[H$j]=[])).push(H$h),H$o._sheet.I.notifer.on(H$j,H$d,H$d.changeData,[H$j])}}}else if("var"===H$b&&H$d)H$d[H$c]=H$a;else if("onClick"==H$b){var H$m=H$p._runScript("(function(){"+H$c+"})");H$a.on("click",H$d,H$m)}else H$a[H$b]="true"===H$c||"false"!==H$c&&H$c},H$o.getCompInstance=function(H$a){var H$b,H$c=H$a.props?H$a.props.runtime:null;return H$b=H$c?H$o.viewClassMap[H$c]||H$o.uiClassMap[H$c]||H$p.__classmap[H$c]:H$o.uiClassMap[H$a.type],H$a.props&&H$a.props.hasOwnProperty("renderType")&&"instance"==H$a.props.renderType?H$b.instance:H$b?new H$b:null},H$o.regComponent=function(H$a,H$b){H$o.uiClassMap[H$a]=H$b,H$q.regClass(H$a,H$b)},H$o.regViewRuntime=function(H$a,H$b){H$o.viewClassMap[H$a]=H$b},H$o.uiMap={},H$o.viewClassMap={},H$o._sheet=null,H$d(H$o,["uiClassMap",function(){return this.uiClassMap={ViewStack:H$aa,LinkButton:H$I,TextArea:H$ja,ColorPicker:H$K,Box:H$H,Button:H$I,CheckBox:H$S,Clip:H$J,ComboBox:H$L,Component:H$F,HScrollBar:H$W,HSlider:H$Y,Image:H$O,Label:H$P,List:H$V,Panel:H$X,ProgressBar:H$Q,Radio:H$$,RadioGroup:H$ha,ScrollBar:H$M,Slider:H$N,Tab:H$ia,TextInput:H$ca,View:H$o,VScrollBar:H$ba,VSlider:H$da,Tree:H$_,HBox:H$fa,VBox:H$ga,Sprite:H$u,Animation:H$c,Text:H$v,FontClip:H$U}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),H$o.__init$=function(){H$o._regs(),H$n=function(){function H$a(H$a,H$b,H$c){this.comp=null,this.prop=null,this.value=null,this.comp=H$a,this.prop=H$b,this.value=H$c}return H$f(H$a,""),H$a.prototype.exe=function(H$a){var H$b=H$C.getBindFun(this.value);this.comp[this.prop]=H$b.call(this,H$a)},H$a}()},H$o}()),H$S=function(H$a){function H$c(H$a,H$b){void 0===H$b&&(H$b=""),H$c.__super.call(this,H$a,H$b)}H$f(H$c,"laya.ui.CheckBox",H$a);var H$b=H$c.prototype;return H$b.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},H$b.initialize=function(){H$a.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},H$e(0,H$b,"dataSource",H$a.prototype._$get_dataSource,function(H$a){"boolean"==typeof(this._dataSource=H$a)?this.selected=H$a:"string"==typeof H$a?this.selected="true"===H$a:H$p.superSet(H$I,this,"dataSource",H$a)}),H$c}(H$I),H$T=function(H$a){function H$b(){this._space=0,this._align="none",this._itemChanged=!1,H$b.__super.call(this)}H$f(H$b,"laya.ui.LayoutBox",H$H);var H$c=H$b.prototype;return H$c.addChild=function(H$a){return H$a.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,H$a)},H$c.onResize=function(H$a){this._setItemChanged()},H$c.addChildAt=function(H$a,H$b){return H$a.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,H$a,H$b)},H$c.removeChild=function(H$a){return H$a.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,H$a)},H$c.removeChildAt=function(H$a){return this.getChildAt(H$a).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,H$a)},H$c.refresh=function(){this._setItemChanged()},H$c.changeItems=function(){this._itemChanged=!1},H$c.sortItem=function(H$a){H$a&&H$a.sort(function(H$a,H$b){return H$a.y-H$b.y})},H$c._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},H$e(0,H$c,"space",function(){return this._space},function(H$a){this._space=H$a,this._setItemChanged()}),H$e(0,H$c,"align",function(){return this._align},function(H$a){this._align=H$a,this._setItemChanged()}),H$b}(),H$U=function(H$b){function H$c(H$a,H$b){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,H$c.__super.call(this),H$a&&(this.skin=H$a),H$b&&(this.sheet=H$b)}H$f(H$c,"laya.ui.FontClip",H$b);var H$a=H$c.prototype;return H$a.createChildren=function(){this._bitmap=new H$E,this.on("loaded",this,this._onClipLoaded)},H$a._onClipLoaded=function(){this.callLater(this.changeValue)},H$a.changeValue=function(){var H$a;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),H$a=this._sources[0]))){var H$b="horizontal"===this._direction;H$b?(this._wordsW=this._valueArr.length*(H$a.sourceWidth+this.spaceX),this._wordsH=H$a.sourceHeight):(this._wordsW=H$a.sourceWidth,this._wordsH=(H$a.sourceHeight+this.spaceY)*this._valueArr.length);var H$c=0;if(this._width)switch(this._align){case"center":H$c=.5*(this._width-this._wordsW);break;case"right":H$c=this._width-this._wordsW;break;default:H$c=0}for(var H$d=0,H$e=this._valueArr.length;H$d<H$e;H$d++){var H$f=this._indexMap[this._valueArr.charAt(H$d)];this.sources[H$f]&&(H$a=this.sources[H$f],H$b?this.graphics.drawTexture(H$a,H$c+H$d*(H$a.sourceWidth+this.spaceX),0,H$a.sourceWidth,H$a.sourceHeight):this.graphics.drawTexture(H$a,0+H$c,H$d*(H$a.sourceHeight+this.spaceY),H$a.sourceWidth,H$a.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},H$a.destroy=function(H$a){void 0===H$a&&(H$a=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),H$b.prototype.destroy.call(this,H$a)},H$e(0,H$a,"sheet",function(){return this._sheet},function(H$a){H$a+="";var H$b=(this._sheet=H$a).split(" ");this._clipX=String(H$b[0]).length,this.clipY=H$b.length,this._indexMap={};for(var H$c=0;H$c<this._clipY;H$c++)for(var H$d=H$b[H$c].split(""),H$e=0,H$f=H$d.length;H$e<H$f;H$e++)this._indexMap[H$d[H$e]]=H$c*this._clipX+H$e}),H$e(0,H$a,"height",H$b.prototype._$get_height,function(H$a){H$p.superSet(H$J,this,"height",H$a),this.callLater(this.changeValue)}),H$e(0,H$a,"direction",function(){return this._direction},function(H$a){this._direction=H$a,this.callLater(this.changeValue)}),H$e(0,H$a,"value",function(){return this._valueArr?this._valueArr:""},function(H$a){H$a+="",this._valueArr=H$a,this.callLater(this.changeValue)}),H$e(0,H$a,"width",H$b.prototype._$get_width,function(H$a){H$p.superSet(H$J,this,"width",H$a),this.callLater(this.changeValue)}),H$e(0,H$a,"spaceX",function(){return this._spaceX},function(H$a){this._spaceX=H$a,"horizontal"===this._direction&&this.callLater(this.changeValue)}),H$e(0,H$a,"spaceY",function(){return this._spaceY},function(H$a){this._spaceY=H$a,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),H$e(0,H$a,"align",function(){return this._align},function(H$a){this._align=H$a,this.callLater(this.changeValue)}),H$e(0,H$a,"measureWidth",function(){return this._wordsW}),H$e(0,H$a,"measureHeight",function(){return this._wordsH}),H$c}(H$J),H$V=function(H$a){function H$b(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new H$o,H$b.__super.call(this)}H$f(H$b,"laya.ui.List",H$a);var H$c=H$b.prototype;return H$p.imps(H$c,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),H$c.destroy=function(H$a){void 0===H$a&&(H$a=!0),this._content&&this._content.destroy(H$a),this._scrollBar&&this._scrollBar.destroy(H$a),laya.ui.Component.prototype.destroy.call(this,H$a),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},H$c.createChildren=function(){this.addChild(this._content=new H$H)},H$c.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=H$p.superGet(H$H,this,"cacheAs")),H$p.superSet(H$H,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},H$c.onScrollEnd=function(){H$p.superSet(H$H,this,"cacheAs",this._$P.cacheAs)},H$c._removePreScrollBar=function(){var H$a=this.removeChildByName("scrollBar");H$a&&H$a.destroy(!0)},H$c.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var H$a=this._getOneCell(),H$b=H$a.width+this._spaceX||1,H$c=H$a.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/H$b):Math.ceil(this._width/H$b)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/H$c):Math.round(this._height/H$c));var H$d=this._width?this._width:H$b*this.repeatX-this._spaceX,H$e=this._height?this._height:H$c*this.repeatY-this._spaceY;this._cellSize=this._isVertical?H$c:H$b,this._cellOffset=this._isVertical?H$c*Math.max(this._repeatY2,this._repeatY)-H$e-this._spaceY:H$b*Math.max(this._repeatX2,this._repeatX)-H$d-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=H$e:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=H$d),this.setContentSize(H$d,H$e);var H$f=this._isVertical?this.repeatX:this.repeatY,H$g=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,H$f,H$g),this._createdLine=H$g,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},H$c._getOneCell=function(){if(0===this._cells.length){var H$a=this.createItem();if(this._offset.setTo(H$a.x,H$a.y),this.cacheContent)return H$a;this._cells.push(H$a)}return this._cells[0]},H$c._createItems=function(H$a,H$b,H$c){var H$d=this._content,H$e=this._getOneCell(),H$f=H$e.width+this._spaceX,H$g=H$e.height+this._spaceY;if(this.cacheContent){var H$h=new H$H;H$h.cacheAsBitmap=!0,H$h.pos((this._isVertical?0:H$a)*H$f,(this._isVertical?H$a:0)*H$g),this._content.addChild(H$h),this._content.optimizeScrollRect=!0,H$d=H$h}else{for(var H$i=[],H$j=this._cells.length-1;-1<H$j;H$j--){var H$k=this._cells[H$j];H$k.removeSelf(),H$i.push(H$k)}this._cells.length=0}for(var H$l=H$a;H$l<H$c;H$l++)for(var H$m=0;H$m<H$b;H$m++)(H$e=H$i&&H$i.length?H$i.pop():this.createItem()).x=(this._isVertical?H$m:H$l)*H$f-H$d.x,H$e.y=(this._isVertical?H$l:H$m)*H$g-H$d.y,H$e.name="item"+(H$l*H$b+H$m),H$d.addChild(H$e),this.addCell(H$e)},H$c.createItem=function(){var H$a=[];if("function"==typeof this._itemRender)var H$b=new this._itemRender;else H$b=H$R.createComp(this._itemRender,null,null,H$a);if(0==H$a.length&&H$b._watchMap){var H$c=H$b._watchMap;for(var H$d in H$c)for(var H$e=H$c[H$d],H$f=0;H$f<H$e.length;H$f++){var H$g=H$e[H$f];H$a.push(H$g.comp,H$g.prop,H$g.value)}}return H$a.length&&(H$b._$bindData=H$a),H$b},H$c.addCell=function(H$a){H$a.on("click",this,this.onCellMouse),H$a.on("rightclick",this,this.onCellMouse),H$a.on("mouseover",this,this.onCellMouse),H$a.on("mouseout",this,this.onCellMouse),H$a.on("mousedown",this,this.onCellMouse),H$a.on("mouseup",this,this.onCellMouse),this._cells.push(H$a)},H$c.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var H$a=0,H$b=H$a=0;H$b<1e4;H$b++){var H$c=this.getChildByName("item"+H$b);if(!H$c)break;this.addCell(H$c),H$a++}this.repeatY=H$a}},H$c.setContentSize=function(H$a,H$b){this._content.width=H$a,this._content.height=H$b,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new H$r),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,H$a,H$b),this._content.scrollRect=this._content.scrollRect),this.event("resize")},H$c.onCellMouse=function(H$a){"mousedown"===H$a.type&&(this._isMoved=!1);var H$b=H$a.currentTarget,H$c=this._startIndex+this._cells.indexOf(H$b);H$c<0||("click"===H$a.type||"rightclick"===H$a.type?this.selectEnable&&!this._isMoved?this.selectedIndex=H$c:this.changeCellState(H$b,!0,0):"mouseover"!==H$a.type&&"mouseout"!==H$a.type||this._selectedIndex===H$c||this.changeCellState(H$b,"mouseover"===H$a.type,0),this.mouseHandler&&this.mouseHandler.runWith([H$a,H$c]))},H$c.changeCellState=function(H$a,H$b,H$c){var H$d=H$a.getChildByName("selectBox");H$d&&(this.selectEnable=!0,H$d.visible=H$b,H$d.index=H$c)},H$c.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},H$c.onScrollBarChange=function(H$a){this.runCallLater(this.changeCells);var H$b=this._scrollBar.value,H$c=this._isVertical?this.repeatX:this.repeatY,H$d=this._isVertical?this.repeatY:this.repeatX,H$e=Math.floor(H$b/this._cellSize);if(this.cacheContent)H$g=H$d+1,this._createdLine-H$e<H$g&&(this._createItems(this._createdLine,H$c,this._createdLine+H$g),this.renderItems(this._createdLine*H$c,0),this._createdLine+=H$g);else{var H$f=H$e*H$c,H$g=0;if(H$f>this._startIndex){H$g=H$f-this._startIndex;var H$h=!0,H$i=this._startIndex+H$c*(H$d+1);this._isMoved=!0}else H$f<this._startIndex&&(H$g=this._startIndex-H$f,H$h=!1,H$i=this._startIndex-1,this._isMoved=!0);for(var H$j=0;H$j<H$g;H$j++){if(H$h){var H$k=this._cells.shift();this._cells[this._cells.length]=H$k;var H$l=H$i+H$j}else H$k=this._cells.pop(),this._cells.unshift(H$k),H$l=H$i-H$j;var H$m=Math.floor(H$l/H$c)*this._cellSize;this._isVertical?H$k.y=H$m:H$k.x=H$m,this.renderItem(H$k,H$l)}this._startIndex=H$f,this.changeSelectStatus()}var H$n=this._content.scrollRect;this._isVertical?(H$n.y=H$b-this._offset.y,H$n.x=-this._offset.x):(H$n.y=-this._offset.y,H$n.x=H$b-this._offset.x),this._content.scrollRect=H$n},H$c.posCell=function(H$a,H$b){if(this._scrollBar){var H$c=this._isVertical?this.repeatX:this.repeatY,H$d=(this._isVertical?this.repeatY:this.repeatX,Math.floor(H$b/H$c)*this._cellSize);this._isVertical?H$a.y=H$d:H$a.x=H$d}},H$c.changeSelectStatus=function(){for(var H$a=0,H$b=this._cells.length;H$a<H$b;H$a++)this.changeCellState(this._cells[H$a],this._selectedIndex===this._startIndex+H$a,1)},H$c.renderItems=function(H$a,H$b){void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=0);for(var H$c=H$a,H$d=H$b||this._cells.length;H$c<H$d;H$c++)this.renderItem(this._cells[H$c],this._startIndex+H$c);this.changeSelectStatus()},H$c.renderItem=function(H$a,H$b){this._array&&0<=H$b&&H$b<this._array.length?(H$a.visible=!0,H$a._$bindData?(H$a._dataSource=this._array[H$b],this._bindData(H$a,this._array[H$b])):H$a.dataSource=this._array[H$b],this.cacheContent||this.posCell(H$a,H$b),this.hasListener("render")&&this.event("render",[H$a,H$b]),this.renderHandler&&this.renderHandler.runWith([H$a,H$b])):(H$a.visible=!1,H$a.dataSource=null)},H$c._bindData=function(H$a,H$b){for(var H$c=H$a._$bindData,H$d=0,H$e=H$c.length;H$d<H$e;H$d++){var H$f=H$c[H$d++],H$g=H$c[H$d++],H$h=H$c[H$d],H$i=H$C.getBindFun(H$h);H$f[H$g]=H$i.call(this,H$b)}},H$c.refresh=function(){this.array=this._array},H$c.getItem=function(H$a){return-1<H$a&&H$a<this._array.length?this._array[H$a]:null},H$c.changeItem=function(H$a,H$b){-1<H$a&&H$a<this._array.length&&(this._array[H$a]=H$b,H$a>=this._startIndex&&H$a<this._startIndex+this._cells.length&&this.renderItem(this.getCell(H$a),H$a))},H$c.setItem=function(H$a,H$b){this.changeItem(H$a,H$b)},H$c.addItem=function(H$a){this._array.push(H$a),this.array=this._array},H$c.addItemAt=function(H$a,H$b){this._array.splice(H$b,0,H$a),this.array=this._array},H$c.deleteItem=function(H$a){this._array.splice(H$a,1),this.array=this._array},H$c.getCell=function(H$a){return this.runCallLater(this.changeCells),-1<H$a&&this._cells?this._cells[(H$a-this._startIndex)%this._cells.length]:null},H$c.scrollTo=function(H$a){if(this._scrollBar){var H$b=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(H$a/H$b)*this._cellSize}else this.startIndex=H$a},H$c.tweenTo=function(H$a,H$b,H$c){if(void 0===H$b&&(H$b=200),this._scrollBar){var H$d=this._isVertical?this.repeatX:this.repeatY;H$x.to(this._scrollBar,{value:Math.floor(H$a/H$d)*this._cellSize},H$b,null,H$c,0,!0)}else this.startIndex=H$a,H$c&&H$c.run()},H$c._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},H$c.commitMeasure=function(){this.runCallLater(this.changeCells)},H$e(0,H$c,"cacheAs",H$a.prototype._$get_cacheAs,function(H$a){H$p.superSet(H$H,this,"cacheAs",H$a),this._scrollBar&&(this._$P.cacheAs=null,"none"!==H$a?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),H$e(0,H$c,"content",function(){return this._content}),H$e(0,H$c,"height",H$a.prototype._$get_height,function(H$a){H$a!=this._height&&(H$p.superSet(H$H,this,"height",H$a),this._setCellChanged())}),H$e(0,H$c,"itemRender",function(){return this._itemRender},function(H$a){if(this._itemRender!=H$a){this._itemRender=H$a;for(var H$b=this._cells.length-1;-1<H$b;H$b--)this._cells[H$b].destroy();this._cells.length=0,this._setCellChanged()}}),H$e(0,H$c,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(H$a){this._removePreScrollBar();var H$b=new H$ba;H$b.name="scrollBar",H$b.right=0,H$a&&" "!=H$a&&(H$b.skin=H$a),this.scrollBar=H$b,this.addChild(H$b),this._setCellChanged()}),H$e(0,H$c,"page",function(){return this._page},function(H$a){this._page=H$a,this._array&&(this._page=0<H$a?H$a:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),H$e(0,H$c,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(H$a){this._removePreScrollBar();var H$b=new H$W;H$b.name="scrollBar",H$b.bottom=0,H$a&&" "!=H$a&&(H$b.skin=H$a),this.scrollBar=H$b,this.addChild(H$b),this._setCellChanged()}),H$e(0,H$c,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(H$a){this._repeatX=H$a,this._setCellChanged()}),H$e(0,H$c,"scrollBar",function(){return this._scrollBar},function(H$a){this._scrollBar!=H$a&&(this._scrollBar=H$a)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),H$e(0,H$c,"width",H$a.prototype._$get_width,function(H$a){H$a!=this._width&&(H$p.superSet(H$H,this,"width",H$a),this._setCellChanged())}),H$e(0,H$c,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(H$a){this._repeatY=H$a,this._setCellChanged()}),H$e(0,H$c,"spaceX",function(){return this._spaceX},function(H$a){this._spaceX=H$a,this._setCellChanged()}),H$e(0,H$c,"spaceY",function(){return this._spaceY},function(H$a){this._spaceY=H$a,this._setCellChanged()}),H$e(0,H$c,"selectedIndex",function(){return this._selectedIndex},function(H$a){this._selectedIndex!=H$a&&(this._selectedIndex=H$a,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(H$a),this.startIndex=this._startIndex)}),H$e(0,H$c,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(H$a){this.selectedIndex=this._array.indexOf(H$a)}),H$e(0,H$c,"length",function(){return this._array?this._array.length:0}),H$e(0,H$c,"selection",function(){return this.getCell(this._selectedIndex)},function(H$a){this.selectedIndex=this._startIndex+this._cells.indexOf(H$a)}),H$e(0,H$c,"startIndex",function(){return this._startIndex},function(H$a){this._startIndex=0<H$a?H$a:0,this.callLater(this.renderItems)}),H$e(0,H$c,"array",function(){return this._array},function(H$a){this.runCallLater(this.changeCells),this._array=H$a||[];var H$b=this._array.length;if(this.totalPage=Math.ceil(H$b/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<H$b?this._selectedIndex:H$b-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var H$c=this._isVertical?this.repeatX:this.repeatY,H$d=this._isVertical?this.repeatY:this.repeatX,H$e=Math.ceil(H$b/H$c);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=H$d/H$e,this._scrollBar.setScroll(0,(H$e-H$d)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),H$e(0,H$c,"dataSource",H$a.prototype._$get_dataSource,function(H$a){"number"==typeof(this._dataSource=H$a)&&Math.floor(H$a)==H$a||"string"==typeof H$a?this.selectedIndex=parseInt(H$a):H$a instanceof Array?this.array=H$a:H$p.superSet(H$H,this,"dataSource",H$a)}),H$e(0,H$c,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),H$b}(H$H),H$W=function(H$a){function H$b(){H$b.__super.call(this)}return H$f(H$b,"laya.ui.HScrollBar",H$a),H$b.prototype.initialize=function(){H$a.prototype.initialize.call(this),this.slider.isVertical=!1},H$b}(H$M),H$X=function(H$a){function H$b(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,H$b.__super.call(this),this.width=this.height=100}H$f(H$b,"laya.ui.Panel",H$a);var H$c=H$b.prototype;return H$c.destroy=function(H$a){void 0===H$a&&(H$a=!0),laya.ui.Component.prototype.destroy.call(this,H$a),this._content&&this._content.destroy(H$a),this._vScrollBar&&this._vScrollBar.destroy(H$a),this._hScrollBar&&this._hScrollBar.destroy(H$a),this._vScrollBar=null,this._hScrollBar=null,this._content=null},H$c.destroyChildren=function(){this._content.destroyChildren()},H$c.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new H$H)},H$c.addChild=function(H$a){return H$a.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(H$a)},H$c.onResize=function(){this._setScrollChanged()},H$c.addChildAt=function(H$a,H$b){return H$a.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(H$a,H$b)},H$c.removeChild=function(H$a){return H$a.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(H$a)},H$c.removeChildAt=function(H$a){return this.getChildAt(H$a).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(H$a)},H$c.removeChildren=function(H$a,H$b){return void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=2147483647),this._content.removeChildren(H$a,H$b),this._setScrollChanged(),this},H$c.getChildAt=function(H$a){return this._content.getChildAt(H$a)},H$c.getChildByName=function(H$a){return this._content.getChildByName(H$a)},H$c.getChildIndex=function(H$a){return this._content.getChildIndex(H$a)},H$c.changeScroll=function(){this._scrollChanged=!1;var H$a=this.contentWidth||1,H$b=this.contentHeight||1,H$c=this._vScrollBar,H$d=this._hScrollBar,H$e=H$c&&H$b>this._height,H$f=H$d&&H$a>this._width,H$g=H$e?this._width-H$c.width:this._width,H$h=H$f?this._height-H$d.height:this._height;H$c&&(H$c.x=this._width-H$c.width,H$c.y=0,H$c.height=this._height-(H$f?H$d.height:0),H$c.scrollSize=Math.max(.033*this._height,1),H$c.thumbPercent=H$h/H$b,H$c.setScroll(0,H$b-H$h,H$c.value)),H$d&&(H$d.x=0,H$d.y=this._height-H$d.height,H$d.width=this._width-(H$e?H$c.width:0),H$d.scrollSize=Math.max(.033*this._width,1),H$d.thumbPercent=H$g/H$a,H$d.setScroll(0,H$a-H$g,H$d.value))},H$c.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},H$c.setContentSize=function(H$a,H$b){var H$c=this._content;H$c.width=H$a,H$c.height=H$b,H$c.scrollRect||(H$c.scrollRect=new H$r),H$c.scrollRect.setTo(0,0,H$a,H$b),H$c.scrollRect=H$c.scrollRect},H$c.onScrollBarChange=function(H$a){var H$b=this._content.scrollRect;if(H$b){var H$c=Math.round(H$a.value);H$a.isVertical?H$b.y=H$c:H$b.x=H$c,this._content.scrollRect=H$b}},H$c.scrollTo=function(H$a,H$b){void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=0),this.vScrollBar&&(this.vScrollBar.value=H$b),this.hScrollBar&&(this.hScrollBar.value=H$a)},H$c.refresh=function(){this.changeScroll()},H$c.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=H$p.superGet(H$H,this,"cacheAs")),H$p.superSet(H$H,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},H$c.onScrollEnd=function(){H$p.superSet(H$H,this,"cacheAs",this._$P.cacheAs)},H$c._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},H$e(0,H$c,"numChildren",function(){return this._content.numChildren}),H$e(0,H$c,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(H$a){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new H$W),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=H$a}),H$e(0,H$c,"contentWidth",function(){for(var H$a=0,H$b=this._content.numChildren-1;-1<H$b;H$b--){var H$c=this._content.getChildAt(H$b);H$a=Math.max(H$c.x+H$c.width*H$c.scaleX,H$a)}return H$a}),H$e(0,H$c,"contentHeight",function(){for(var H$a=0,H$b=this._content.numChildren-1;-1<H$b;H$b--){var H$c=this._content.getChildAt(H$b);H$a=Math.max(H$c.y+H$c.height*H$c.scaleY,H$a)}return H$a}),H$e(0,H$c,"width",H$a.prototype._$get_width,function(H$a){H$p.superSet(H$H,this,"width",H$a),this._setScrollChanged()}),H$e(0,H$c,"hScrollBar",function(){return this._hScrollBar}),H$e(0,H$c,"content",function(){return this._content}),H$e(0,H$c,"height",H$a.prototype._$get_height,function(H$a){H$p.superSet(H$H,this,"height",H$a),this._setScrollChanged()}),H$e(0,H$c,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(H$a){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new H$ba),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=H$a}),H$e(0,H$c,"vScrollBar",function(){return this._vScrollBar}),H$e(0,H$c,"cacheAs",H$a.prototype._$get_cacheAs,function(H$a){H$p.superSet(H$H,this,"cacheAs",H$a),this._$P.cacheAs=null,"none"!==H$a?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),H$b}(H$H),H$Y=function(H$a){function H$b(H$a){H$b.__super.call(this,H$a),this.isVertical=!1}return H$f(H$b,"laya.ui.HSlider",H$N),H$b}(),H$Z=function(H$a){function H$c(H$a,H$b){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,H$c.__super.call(this),this.skin=H$b,this.labels=H$a}H$f(H$c,"laya.ui.UIGroup",H$a);var H$b=H$c.prototype;return H$p.imps(H$b,{"laya.ui.IItem":!0}),H$b.preinitialize=function(){this.mouseEnabled=!0},H$b.destroy=function(H$a){void 0===H$a&&(H$a=!0),laya.ui.Component.prototype.destroy.call(this,H$a),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},H$b.addItem=function(H$a,H$b){void 0===H$b&&(H$b=!0);var H$c=H$a,H$d=this._items.length;if(H$c.name="item"+H$d,this.addChild(H$c),this.initItems(),H$b&&0<H$d){var H$e=this._items[H$d-1];"horizontal"==this._direction?H$c.x=H$e.x+H$e.width+this._space:H$c.y=H$e.y+H$e.height+this._space}else H$b&&(H$c.x=0,H$c.y=0);return H$d},H$b.delItem=function(H$a,H$b){void 0===H$b&&(H$b=!0);var H$c=this._items.indexOf(H$a);if(-1!=H$c){var H$d=H$a;this.removeChild(H$d);for(var H$e=H$c+1,H$f=this._items.length;H$e<H$f;H$e++){var H$g=this._items[H$e];H$g.name="item"+(H$e-1),H$b&&("horizontal"==this._direction?H$g.x-=H$d.width+this._space:H$g.y-=H$d.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var H$h;H$h=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=H$h}}},H$b.initItems=function(){this._items||(this._items=[]);for(var H$a=this._items.length=0;H$a<1e4;H$a++){var H$b=this.getChildByName("item"+H$a);if(null==H$b)break;this._items.push(H$b),H$b.selected=H$a===this._selectedIndex,H$b.clickHandler=H$m.create(this,this.itemClick,[H$a],!1)}},H$b.itemClick=function(H$a){this.selectedIndex=H$a},H$b.setSelect=function(H$a,H$b){this._items&&-1<H$a&&H$a<this._items.length&&(this._items[H$a].selected=H$b)},H$b.createItem=function(H$a,H$b){return null},H$b.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var H$a=0,H$b=0,H$c=this._items.length;H$b<H$c;H$b++){var H$d=this._items[H$b];this._skin&&(H$d.skin=this._skin),this._labelColors&&(H$d.labelColors=this._labelColors),this._labelSize&&(H$d.labelSize=this._labelSize),this._labelStroke&&(H$d.labelStroke=this._labelStroke),this._labelStrokeColor&&(H$d.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(H$d.strokeColors=this._strokeColors),this._labelBold&&(H$d.labelBold=this._labelBold),this._labelPadding&&(H$d.labelPadding=this._labelPadding),this._labelAlign&&(H$d.labelAlign=this._labelAlign),this._stateNum&&(H$d.stateNum=this._stateNum),this._labelFont&&(H$d.labelFont=this._labelFont),"horizontal"===this._direction?(H$d.y=0,H$d.x=H$a,H$a+=H$d.width+this._space):(H$d.x=0,H$d.y=H$a,H$a+=H$d.height+this._space)}this.changeSize()},H$b.commitMeasure=function(){this.runCallLater(this.changeLabels)},H$b._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},H$e(0,H$b,"labelStrokeColor",function(){return this._labelStrokeColor},function(H$a){this._labelStrokeColor!=H$a&&(this._labelStrokeColor=H$a,this._setLabelChanged())}),H$e(0,H$b,"skin",function(){return this._skin},function(H$a){this._skin!=H$a&&(this._skin=H$a,this._setLabelChanged())}),H$e(0,H$b,"selectedIndex",function(){return this._selectedIndex},function(H$a){this._selectedIndex!=H$a&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=H$a,this.setSelect(H$a,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),H$e(0,H$b,"labels",function(){return this._labels},function(H$a){if(this._labels!=H$a){if(this._labels=H$a,this.removeChildren(),this._setLabelChanged(),this._labels)for(var H$b=this._labels.split(","),H$c=0,H$d=H$b.length;H$c<H$d;H$c++){var H$e=this.createItem(this._skin,H$b[H$c]);H$e.name="item"+H$c,this.addChild(H$e)}this.initItems()}}),H$e(0,H$b,"strokeColors",function(){return this._strokeColors},function(H$a){this._strokeColors!=H$a&&(this._strokeColors=H$a,this._setLabelChanged())}),H$e(0,H$b,"labelColors",function(){return this._labelColors},function(H$a){this._labelColors!=H$a&&(this._labelColors=H$a,this._setLabelChanged())}),H$e(0,H$b,"labelStroke",function(){return this._labelStroke},function(H$a){this._labelStroke!=H$a&&(this._labelStroke=H$a,this._setLabelChanged())}),H$e(0,H$b,"labelSize",function(){return this._labelSize},function(H$a){this._labelSize!=H$a&&(this._labelSize=H$a,this._setLabelChanged())}),H$e(0,H$b,"stateNum",function(){return this._stateNum},function(H$a){this._stateNum!=H$a&&(this._stateNum=H$a,this._setLabelChanged())}),H$e(0,H$b,"labelBold",function(){return this._labelBold},function(H$a){this._labelBold!=H$a&&(this._labelBold=H$a,this._setLabelChanged())}),H$e(0,H$b,"labelFont",function(){return this._labelFont},function(H$a){this._labelFont!=H$a&&(this._labelFont=H$a,this._setLabelChanged())}),H$e(0,H$b,"labelPadding",function(){return this._labelPadding},function(H$a){this._labelPadding!=H$a&&(this._labelPadding=H$a,this._setLabelChanged())}),H$e(0,H$b,"direction",function(){return this._direction},function(H$a){this._direction=H$a,this._setLabelChanged()}),H$e(0,H$b,"space",function(){return this._space},function(H$a){this._space=H$a,this._setLabelChanged()}),H$e(0,H$b,"items",function(){return this._items}),H$e(0,H$b,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(H$a){this.selectedIndex=this._items.indexOf(H$a)}),H$e(0,H$b,"dataSource",H$a.prototype._$get_dataSource,function(H$a){"number"==typeof(this._dataSource=H$a)&&Math.floor(H$a)==H$a||"string"==typeof H$a?this.selectedIndex=parseInt(H$a):H$a instanceof Array?this.labels=H$a.join(","):H$p.superSet(H$H,this,"dataSource",H$a)}),H$c}(H$H),H$$=function(H$b){function H$c(H$a,H$b){this._value=null,void 0===H$b&&(H$b=""),H$c.__super.call(this,H$a,H$b)}H$f(H$c,"laya.ui.Radio",H$b);var H$a=H$c.prototype;return H$a.destroy=function(H$a){void 0===H$a&&(H$a=!0),H$b.prototype.destroy.call(this,H$a),this._value=null},H$a.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},H$a.initialize=function(){H$b.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},H$a.onClick=function(H$a){this.selected=!0},H$e(0,H$a,"value",function(){return null!=this._value?this._value:this.label},function(H$a){this._value=H$a}),H$c}(H$I),H$_=function(H$a){function H$b(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,H$b.__super.call(this),this.width=this.height=200}H$f(H$b,"laya.ui.Tree",H$a);var H$c=H$b.prototype;return H$p.imps(H$c,{"laya.ui.IRender":!0}),H$c.destroy=function(H$a){void 0===H$a&&(H$a=!0),laya.ui.Component.prototype.destroy.call(this,H$a),this._list&&this._list.destroy(H$a),this._list=null,this._source=null,this._renderHandler=null},H$c.createChildren=function(){this.addChild(this._list=new H$V),this._list.renderHandler=H$m.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},H$c.onListChange=function(H$a){this.event("change")},H$c.getArray=function(){var H$a,H$b=[];for(var H$c in this._source)H$a=this._source[H$c],this.getParentOpenStatus(H$a)&&(H$a.x=this._spaceLeft*this.getDepth(H$a),H$b.push(H$a));return H$b},H$c.getDepth=function(H$a,H$b){return void 0===H$b&&(H$b=0),null==H$a.nodeParent?H$b:this.getDepth(H$a.nodeParent,H$b+1)},H$c.getParentOpenStatus=function(H$a){var H$b=H$a.nodeParent;return null==H$b||!!H$b.isOpen&&(null==H$b.nodeParent||this.getParentOpenStatus(H$b))},H$c.renderItem=function(H$a,H$b){var H$c=H$a.dataSource;if(H$c){H$a.left=H$c.x;var H$d=H$a.getChildByName("arrow");H$d&&(H$c.hasChild?(H$d.visible=!0,H$d.index=H$c.isOpen?1:0,H$d.tag=H$b,H$d.off("click",this,this.onArrowClick),H$d.on("click",this,this.onArrowClick)):H$d.visible=!1);var H$e=H$a.getChildByName("folder");H$e&&(2==H$e.clipY?H$e.index=H$c.isDirectory?0:1:H$e.index=H$c.isDirectory?H$c.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([H$a,H$b])}},H$c.onArrowClick=function(H$a){var H$b=H$a.currentTarget.tag;this._list.array[H$b].isOpen=!this._list.array[H$b].isOpen,this.event("open"),this._list.array=this.getArray()},H$c.setItemState=function(H$a,H$b){this._list.array[H$a]&&(this._list.array[H$a].isOpen=H$b,this._list.array=this.getArray())},H$c.fresh=function(){this._list.array=this.getArray(),this.repaint()},H$c.parseXml=function(H$a,H$b,H$c,H$d){var H$e,H$f=H$a.childNodes,H$g=H$f.length;if(!H$d){H$e={};var H$h,H$i=H$a.attributes;for(var H$j in H$i){var H$k=(H$h=H$i[H$j]).nodeName,H$l=H$h.nodeValue;H$e[H$k]="true"==H$l||"false"!=H$l&&H$l}H$e.nodeParent=H$c,0<H$g&&(H$e.isDirectory=!0),H$e.hasChild=0<H$g,H$b.push(H$e)}for(var H$m=0;H$m<H$g;H$m++){var H$n=H$f[H$m];this.parseXml(H$n,H$b,H$e,!1)}},H$c.parseOpenStatus=function(H$a,H$b){for(var H$c=0,H$d=H$b.length;H$c<H$d;H$c++){var H$e=H$b[H$c];if(H$e.isDirectory)for(var H$f=0,H$g=H$a.length;H$f<H$g;H$f++){var H$h=H$a[H$f];if(H$h.isDirectory&&this.isSameParent(H$h,H$e)&&H$e.label==H$h.label){H$e.isOpen=H$h.isOpen;break}}}},H$c.isSameParent=function(H$a,H$b){return null==H$a.nodeParent&&null==H$b.nodeParent||null!=H$a.nodeParent&&null!=H$b.nodeParent&&(H$a.nodeParent.label==H$b.nodeParent.label&&this.isSameParent(H$a.nodeParent,H$b.nodeParent))},H$c.filter=function(H$a){if(Boolean(H$a)){var H$b=[];this.getFilterSource(this._source,H$b,H$a),this._list.array=H$b}else this._list.array=this.getArray()},H$c.getFilterSource=function(H$a,H$b,H$c){var H$d;for(var H$e in H$c=H$c.toLocaleLowerCase(),H$a)!(H$d=H$a[H$e]).isDirectory&&-1<String(H$d.label).toLowerCase().indexOf(H$c)&&(H$d.x=0,H$b.push(H$d)),H$d.child&&0<H$d.child.length&&this.getFilterSource(H$d.child,H$b,H$c)},H$e(0,H$c,"spaceBottom",function(){return this._list.spaceY},function(H$a){this._list.spaceY=H$a}),H$e(0,H$c,"keepStatus",function(){return this._keepStatus},function(H$a){this._keepStatus=H$a}),H$e(0,H$c,"itemRender",function(){return this._list.itemRender},function(H$a){this._list.itemRender=H$a}),H$e(0,H$c,"array",function(){return this._list.array},function(H$a){this._keepStatus&&this._list.array&&H$a&&this.parseOpenStatus(this._list.array,H$a),this._source=H$a,this._list.array=this.getArray()}),H$e(0,H$c,"mouseHandler",function(){return this._list.mouseHandler},function(H$a){this._list.mouseHandler=H$a}),H$e(0,H$c,"dataSource",H$a.prototype._$get_dataSource,function(H$a){this._dataSource=H$a,H$p.superSet(H$H,this,"dataSource",H$a)}),H$e(0,H$c,"source",function(){return this._source}),H$e(0,H$c,"scrollBar",function(){return this._list.scrollBar}),H$e(0,H$c,"list",function(){return this._list}),H$e(0,H$c,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(H$a){this._list.vScrollBarSkin=H$a}),H$e(0,H$c,"renderHandler",function(){return this._renderHandler},function(H$a){this._renderHandler=H$a}),H$e(0,H$c,"selectedIndex",function(){return this._list.selectedIndex},function(H$a){this._list.selectedIndex=H$a}),H$e(0,H$c,"spaceLeft",function(){return this._spaceLeft},function(H$a){this._spaceLeft=H$a}),H$e(0,H$c,"selectedItem",function(){return this._list.selectedItem},function(H$a){this._list.selectedItem=H$a}),H$e(0,H$c,"width",H$a.prototype._$get_width,function(H$a){H$p.superSet(H$H,this,"width",H$a),this._list.width=H$a}),H$e(0,H$c,"height",H$a.prototype._$get_height,function(H$a){H$p.superSet(H$H,this,"height",H$a),this._list.height=H$a}),H$e(0,H$c,"xml",null,function(H$a){var H$b=[];this.parseXml(H$a.childNodes[0],H$b,null,!0),this.array=H$b}),H$e(0,H$c,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),H$b}(H$H),H$aa=function(H$a){function H$b(){this._items=null,this._selectedIndex=0,H$b.__super.call(this),this._setIndexHandler=H$m.create(this,this.setIndex,null,!1)}H$f(H$b,"laya.ui.ViewStack",H$a);var H$c=H$b.prototype;return H$p.imps(H$c,{"laya.ui.IItem":!0}),H$c.setItems=function(H$a){this.removeChildren();for(var H$b=0,H$c=0,H$d=H$a.length;H$c<H$d;H$c++){var H$e=H$a[H$c];H$e&&(H$e.name="item"+H$b,this.addChild(H$e),H$b++)}this.initItems()},H$c.addItem=function(H$a){H$a.name="item"+this._items.length,this.addChild(H$a),this.initItems()},H$c.initItems=function(){this._items=[];for(var H$a=0;H$a<1e4;H$a++){var H$b=this.getChildByName("item"+H$a);if(null==H$b)break;this._items.push(H$b),H$b.visible=H$a==this._selectedIndex}},H$c.setSelect=function(H$a,H$b){this._items&&-1<H$a&&H$a<this._items.length&&(this._items[H$a].visible=H$b)},H$c.setIndex=function(H$a){this.selectedIndex=H$a},H$e(0,H$c,"dataSource",H$a.prototype._$get_dataSource,function(H$a){if("number"==typeof(this._dataSource=H$a)&&Math.floor(H$a)==H$a||"string"==typeof H$a)this.selectedIndex=parseInt(H$a);else for(var H$b in this._dataSource)this.hasOwnProperty(H$b)&&(this[H$b]=this._dataSource[H$b])}),H$e(0,H$c,"selectedIndex",function(){return this._selectedIndex},function(H$a){this._selectedIndex!=H$a&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=H$a,this.setSelect(this._selectedIndex,!0))}),H$e(0,H$c,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(H$a){this.selectedIndex=this._items.indexOf(H$a)}),H$e(0,H$c,"items",function(){return this._items}),H$e(0,H$c,"setIndexHandler",function(){return this._setIndexHandler},function(H$a){this._setIndexHandler=H$a}),H$b}(H$H),H$ba=function(H$a){function H$b(){H$b.__super.call(this)}return H$f(H$b,"laya.ui.VScrollBar",H$M),H$b}(),H$ca=function(H$b){function H$c(H$a){this._bg=null,this._skin=null,H$c.__super.call(this),void 0===H$a&&(H$a=""),this.text=H$a,this.skin=this.skin}H$f(H$c,"laya.ui.TextInput",H$b);var H$a=H$c.prototype;return H$a.preinitialize=function(){this.mouseEnabled=!0},H$a.destroy=function(H$a){H$s.clearCache(this,this._skin),void 0===H$a&&(H$a=!0),H$b.prototype.destroy.call(this,H$a),this._bg&&this._bg.destroy(),this._bg=null},H$a.createChildren=function(){this.addChild(this._tf=new H$n),this._tf.padding=H$B.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},H$a._onFocus=function(){this.event("focus",this)},H$a._onBlur=function(){this.event("blur",this)},H$a._onInput=function(){this.event("input",this)},H$a._onEnter=function(){this.event("enter",this)},H$a.initialize=function(){this.width=128,this.height=22},H$a.select=function(){this._tf.select()},H$a.setSelection=function(H$a,H$b){this._tf.setSelection(H$a,H$b)},H$e(0,H$a,"text",H$b.prototype._$get_text,function(H$a){this._tf.text!=H$a&&(H$a+="",this._tf.text=H$a,this.event("change"))}),H$e(0,H$a,"bg",function(){return this._bg},function(H$a){this.graphics=this._bg=H$a}),H$e(0,H$a,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(H$a){this._tf.inputElementYAdjuster=H$a}),H$e(0,H$a,"multiline",function(){return this._tf.multiline},function(H$a){this._tf.multiline=H$a}),H$e(0,H$a,"skin",function(){return this._skin},function(H$a){this._skin!=H$a&&(H$s.clearCache(this,this._skin),this._skin=H$a,this._bg||(this.graphics=this._bg=new H$E),H$s.keepCache(this,this._skin),this._bg.source=H$s.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),H$e(0,H$a,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(H$a){this._bg||(this.graphics=this._bg=new H$E),this._bg.sizeGrid=H$C.fillArray(H$B.defaultSizeGrid,H$a,Number)}),H$e(0,H$a,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(H$a){this._tf.inputElementXAdjuster=H$a}),H$e(0,H$a,"width",H$b.prototype._$get_width,function(H$a){H$p.superSet(H$P,this,"width",H$a),this._bg&&(this._bg.width=H$a)}),H$e(0,H$a,"height",H$b.prototype._$get_height,function(H$a){H$p.superSet(H$P,this,"height",H$a),this._bg&&(this._bg.height=H$a)}),H$e(0,H$a,"editable",function(){return this._tf.editable},function(H$a){this._tf.editable=H$a}),H$e(0,H$a,"restrict",function(){return this._tf.restrict},function(H$a){this._tf.restrict=H$a}),H$e(0,H$a,"prompt",function(){return this._tf.prompt},function(H$a){this._tf.prompt=H$a}),H$e(0,H$a,"promptColor",function(){return this._tf.promptColor},function(H$a){this._tf.promptColor=H$a}),H$e(0,H$a,"maxChars",function(){return this._tf.maxChars},function(H$a){this._tf.maxChars=H$a}),H$e(0,H$a,"focus",function(){return this._tf.focus},function(H$a){this._tf.focus=H$a}),H$e(0,H$a,"type",function(){return this._tf.type},function(H$a){this._tf.type=H$a}),H$e(0,H$a,"asPassword",function(){return this._tf.asPassword},function(H$a){this._tf.asPassword=H$a}),H$c}(H$P),H$da=function(H$a){function H$b(){H$b.__super.call(this)}return H$f(H$b,"laya.ui.VSlider",H$N),H$b}(),H$ea=function(H$a){function H$d(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,H$d.__super.call(this)}H$f(H$d,"laya.ui.Dialog",H$a);var H$b=H$d.prototype;return H$b.initialize=function(){this.popupEffect=H$d.manager.popupEffectHandler,this.closeEffect=H$d.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},H$b._dealDragArea=function(){var H$a=this.getChildByName("drag");H$a&&(this.dragArea=H$a.x+","+H$a.y+","+H$a.width+","+H$a.height,H$a.removeSelf())},H$b._onClick=function(H$a){var H$b=H$a.target;if(H$b)switch(H$b.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(H$b.name)}},H$b.show=function(H$a,H$b){void 0===H$a&&(H$a=!1),void 0===H$b&&(H$b=!0),this._open(!1,H$a,H$b)},H$b.popup=function(H$a,H$b){void 0===H$a&&(H$a=!1),void 0===H$b&&(H$b=!0),this._open(!0,H$a,H$b)},H$b._open=function(H$a,H$b,H$c){H$d.manager.lock(!1),this.isModal=H$a,H$d.manager.open(this,H$b,H$c)},H$b.onOpened=function(){},H$b.close=function(H$a,H$b){void 0===H$b&&(H$b=!0),H$d.manager.close(this,H$a,H$b)},H$b.onClosed=function(H$a){},H$b._onMouseDown=function(H$a){var H$b=this.getMousePoint();this._dragArea.contains(H$b.x,H$b.y)?this.startDrag():this.stopDrag()},H$e(0,H$b,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(H$a){if(H$a){var H$b=H$C.fillArray([0,0,0,0],H$a,Number);this._dragArea=new H$r(H$b[0],H$b[1],H$b[2],H$b[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),H$e(0,H$b,"isPopup",function(){return null!=this.parent}),H$e(0,H$b,"zOrder",H$a.prototype._$get_zOrder,function(H$a){H$p.superSet(H$R,this,"zOrder",H$a),H$d.manager._checkMask()}),H$e(1,H$d,"manager",function(){return H$d._manager=H$d._manager||new H$G},function(H$a){H$d._manager=H$a}),H$d.setLockView=function(H$a){H$d.manager.setLockView(H$a)},H$d.lock=function(H$a){H$d.manager.lock(H$a)},H$d.closeAll=function(){H$d.manager.closeAll()},H$d.getDialogsByGroup=function(H$a){return H$d.manager.getDialogsByGroup(H$a)},H$d.closeByGroup=function(H$a){return H$d.manager.closeByGroup(H$a)},H$d.CLOSE="close",H$d.CANCEL="cancel",H$d.SURE="sure",H$d.NO="no",H$d.OK="ok",H$d.YES="yes",H$d._manager=null,H$d}(H$R),H$fa=function(H$a){function H$b(){H$b.__super.call(this)}H$f(H$b,"laya.ui.HBox",H$a);var H$c=H$b.prototype;return H$c.sortItem=function(H$a){H$a&&H$a.sort(function(H$a,H$b){return H$a.x-H$b.x})},H$c.changeItems=function(){this._itemChanged=!1;for(var H$a=[],H$b=0,H$c=0,H$d=this.numChildren;H$c<H$d;H$c++){var H$e=this.getChildAt(H$c);H$e&&H$e.layoutEnabled&&(H$a.push(H$e),H$b=this._height?this._height:Math.max(H$b,H$e.height*H$e.scaleY))}this.sortItem(H$a);var H$f=0;for(H$c=0,H$d=H$a.length;H$c<H$d;H$c++)(H$e=H$a[H$c]).x=H$f,H$f+=H$e.width*H$e.scaleX+this._space,"top"==this._align?H$e.y=0:"middle"==this._align?H$e.y=.5*(H$b-H$e.height*H$e.scaleY):"bottom"==this._align&&(H$e.y=H$b-H$e.height*H$e.scaleY);this.changeSize()},H$e(0,H$c,"height",H$a.prototype._$get_height,function(H$a){this._height!=H$a&&(H$p.superSet(H$T,this,"height",H$a),this.callLater(this.changeItems))}),H$b.NONE="none",H$b.TOP="top",H$b.MIDDLE="middle",H$b.BOTTOM="bottom",H$b}(H$T),H$ga=function(H$a){function H$b(){H$b.__super.call(this)}H$f(H$b,"laya.ui.VBox",H$a);var H$c=H$b.prototype;return H$c.changeItems=function(){this._itemChanged=!1;for(var H$a=[],H$b=0,H$c=0,H$d=this.numChildren;H$c<H$d;H$c++){var H$e=this.getChildAt(H$c);H$e&&H$e.layoutEnabled&&(H$a.push(H$e),H$b=this._width?this._width:Math.max(H$b,H$e.width*H$e.scaleX))}this.sortItem(H$a);var H$f=0;for(H$c=0,H$d=H$a.length;H$c<H$d;H$c++)(H$e=H$a[H$c]).y=H$f,H$f+=H$e.height*H$e.scaleY+this._space,"left"==this._align?H$e.x=0:"center"==this._align?H$e.x=.5*(H$b-H$e.width*H$e.scaleX):"right"==this._align&&(H$e.x=H$b-H$e.width*H$e.scaleX);this.changeSize()},H$e(0,H$c,"width",H$a.prototype._$get_width,function(H$a){this._width!=H$a&&(H$p.superSet(H$T,this,"width",H$a),this.callLater(this.changeItems))}),H$b.NONE="none",H$b.LEFT="left",H$b.CENTER="center",H$b.RIGHT="right",H$b}(H$T),H$ha=function(H$a){function H$b(){H$b.__super.call(this)}return H$f(H$b,"laya.ui.RadioGroup",H$Z),H$b.prototype.createItem=function(H$a,H$b){return new H$$(H$a,H$b)},H$b}(),H$ia=function(H$a){function H$b(){H$b.__super.call(this)}return H$f(H$b,"laya.ui.Tab",H$Z),H$b.prototype.createItem=function(H$a,H$b){return new H$I(H$a,H$b)},H$b}(),H$ja=function(H$b){function H$c(H$a){this._vScrollBar=null,this._hScrollBar=null,void 0===H$a&&(H$a=""),H$c.__super.call(this,H$a)}H$f(H$c,"laya.ui.TextArea",H$b);var H$a=H$c.prototype;return H$a.destroy=function(H$a){void 0===H$a&&(H$a=!0),H$b.prototype.destroy.call(this,H$a),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},H$a.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},H$a.onVBarChanged=function(H$a){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},H$a.onHBarChanged=function(H$a){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},H$a.changeScroll=function(){var H$a=this._vScrollBar&&0<this._tf.maxScrollY,H$b=this._hScrollBar&&0<this._tf.maxScrollX,H$c=H$a?this._width-this._vScrollBar.width:this._width,H$d=H$b?this._height-this._hScrollBar.height:this._height,H$e=this._tf.padding||H$B.labelPadding;this._tf.width=H$c,this._tf.height=H$d,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-H$e[2],this._vScrollBar.y=H$e[1],this._vScrollBar.height=this._height-(H$b?this._hScrollBar.height:0)-H$e[1]-H$e[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=H$d/Math.max(this._tf.textHeight,H$d),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=H$a),this._hScrollBar&&(this._hScrollBar.x=H$e[0],this._hScrollBar.y=this._height-this._hScrollBar.height-H$e[3],this._hScrollBar.width=this._width-(H$a?this._vScrollBar.width:0)-H$e[0]-H$e[2],this._hScrollBar.scrollSize=Math.max(.033*H$c,1),this._hScrollBar.thumbPercent=H$c/Math.max(this._tf.textWidth,H$c),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=H$b)},H$a.scrollTo=function(H$a){this.commitMeasure(),this._tf.scrollY=H$a},H$e(0,H$a,"scrollY",function(){return this._tf.scrollY}),H$e(0,H$a,"width",H$b.prototype._$get_width,function(H$a){H$p.superSet(H$ca,this,"width",H$a),this.callLater(this.changeScroll)}),H$e(0,H$a,"hScrollBar",function(){return this._hScrollBar}),H$e(0,H$a,"height",H$b.prototype._$get_height,function(H$a){H$p.superSet(H$ca,this,"height",H$a),this.callLater(this.changeScroll)}),H$e(0,H$a,"maxScrollX",function(){return this._tf.maxScrollX}),H$e(0,H$a,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(H$a){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new H$ba),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=H$a}),H$e(0,H$a,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(H$a){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new H$W),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=H$a}),H$e(0,H$a,"vScrollBar",function(){return this._vScrollBar}),H$e(0,H$a,"maxScrollY",function(){return this._tf.maxScrollY}),H$e(0,H$a,"scrollX",function(){return this._tf.scrollX}),H$c}(H$ca);!function(H$a){function H$b(){this._uiView=null,this.isCloseOther=!1,H$b.__super.call(this)}H$f(H$b,"laya.ui.AsynDialog",H$ea);var H$c=H$b.prototype;H$c.createView=function(H$a){this._uiView=H$a},H$c._open=function(H$a,H$b,H$c){this.isModal=H$a,this.isCloseOther=H$b,H$ea.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},H$c.onCreated=function(){this.createUI(),this.onOpen()},H$c.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},H$c.onOpen=function(){H$ea.manager.open(this,this.isCloseOther),H$ea.manager.lock(!1)},H$c.close=function(H$a,H$b){void 0===H$b&&(H$b=!0),H$ea.manager.close(this),this.onClose()},H$c.onClose=function(){},H$c.destroy=function(H$a){void 0===H$a&&(H$a=!0),laya.ui.View.prototype.destroy.call(this,H$a),this._uiView=null,this.onDestroy()},H$c.onDestroy=function(){}}();H$p.__init([H$R])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H$a,H$b){"use strict";for(var H$c in Object.defineProperty(H$b,"__esModule",{value:!0}),Laya){var H$d=Laya[H$c];H$d&&H$d.__isclass&&(H$b[H$c]=H$d)}}),function(H$m,H$a,H$v){H$v.un,H$v.uns;var H$l=H$v.static,H$n=H$v.class,H$o=H$v.getset,H$d=H$v.__newvec,H$u=laya.maths.Arith,H$g=laya.webgl.atlas.AtlasResourceManager,H$c=laya.webgl.shader.BaseShader,H$F=laya.utils.Browser,H$h=laya.webgl.utils.Buffer,H$w=laya.utils.Byte,H$e=laya.utils.ClassUtils,H$i=H$v.Config,H$f=(laya.events.Event,laya.events.EventDispatcher),H$B=laya.utils.Handler,H$r=laya.net.Loader,H$b=laya.net.LoaderManager,H$j=(laya.maths.MathUtil,laya.display.Node),H$p=laya.renders.Render,H$k=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),H$q=laya.resource.Resource,H$s=laya.utils.RunDriver,H$t=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),H$x=laya.display.Sprite,H$y=laya.utils.Stat,H$z=laya.utils.StringKey,H$C=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),H$A=laya.utils.Utils,H$D=laya.webgl.WebGL,H$E=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;H$v.interface("laya.d3.core.IClone"),H$v.interface("laya.d3.graphics.IVertex"),H$v.interface("laya.d3.core.render.IUpdate"),H$v.interface("laya.d3.core.scene.ITreeNode"),H$v.interface("laya.d3.core.render.IRenderable");(function(){function H$I(){}H$n(H$I,"laya.d3.animation.AnimationClipParser01"),H$I.READ_DATA=function(){H$I._DATA.offset=H$I._reader.getUint32(),H$I._DATA.size=H$I._reader.getUint32()},H$I.READ_BLOCK=function(){for(var H$a=H$I._BLOCK.count=H$I._reader.getUint16(),H$b=H$I._BLOCK.blockStarts=[],H$c=H$I._BLOCK.blockLengths=[],H$d=0;H$d<H$a;H$d++)H$b.push(H$I._reader.getUint32()),H$c.push(H$I._reader.getUint32())},H$I.READ_STRINGS=function(){var H$a=H$I._reader.getUint32(),H$b=H$I._reader.getUint16(),H$c=H$I._reader.pos;H$I._reader.pos=H$a+H$I._DATA.offset;for(var H$d=0;H$d<H$b;H$d++)H$I._strings[H$d]=H$I._reader.readUTFString();H$I._reader.pos=H$c},H$I.parse=function(H$a,H$b){H$I._animationClip=H$a;(H$I._reader=H$b).__getBuffer();H$I.READ_DATA(),H$I.READ_BLOCK(),H$I.READ_STRINGS();for(var H$c=0,H$d=H$I._BLOCK.count;H$c<H$d;H$c++){var H$e=H$b.getUint16(),H$f=H$I._strings[H$e],H$g=H$I["READ_"+H$f];if(null==H$g)throw new Error("model file err,no this function:"+H$e+" "+H$f);H$g.call()}},H$I.READ_ANIMATIONS=function(){var H$a,H$b=0,H$c=0,H$d=H$I._reader,H$e=H$d.__getBuffer(),H$f=[],H$g=H$d.getUint8();for(H$f.length=H$g,H$b=0;H$b<H$g;H$b++)H$f[H$b]=H$d.getUint16();var H$h=[],H$i=H$d.getUint16();for(H$h.length=H$i,H$b=0;H$b<H$i;H$b++)H$h[H$b]=H$d.getFloat32();var H$j=H$I._animationClip;H$j.name=H$I._strings[H$d.getUint16()];var H$k=H$j._duration=H$d.getFloat32();H$j.islooping=!!H$d.getByte(),H$j._frameRate=H$d.getInt16();var H$l=H$d.getInt16(),H$m=H$j._nodes=new Array;H$m.length=H$l,(H$j._publicClipDatas=[]).length=H$l;var H$n=H$j._nodesMap={},H$o=0,H$p=0;for(H$b=0;H$b<H$l;H$b++){H$a=H$m[H$b]=new H$Q;var H$q=H$d.getUint16(),H$r=H$a.path=[];for(H$r.length=H$q,H$c=0;H$c<H$q;H$c++)H$r[H$c]=H$I._strings[H$d.getUint16()];var H$s=H$r.join("/"),H$t=H$n[H$s];H$t||(H$n[H$s]=H$t=[]),H$t.push(H$a);var H$u=H$d.getInt16();-1!==H$u&&(H$a.componentType=H$I._strings[H$u]);var H$v=H$O._propertyIndexDic[H$I._strings[H$d.getUint16()]];if(null==H$v)throw new Error("AnimationClipParser01:unknown property name.");var H$w=H$v<4,H$x=!H$w||H$w&&""===H$r[0];(H$a._cacheProperty=H$x)?H$o++:H$p++,H$a.propertyNameID=H$v;var H$y=H$f[H$d.getUint8()];H$a.keyFrameWidth=H$y/4;var H$z=H$a.keyFrames=[],H$A=H$z.length=H$d.getUint16(),H$B=null,H$C=NaN;for(H$c=0;H$c<H$A;H$c++){var H$D=H$z[H$c]=new H$P;H$C=H$D.startTime=H$h[H$d.getUint16()];var H$E=H$d.pos;H$D.inTangent=new Float32Array(H$e.slice(H$E,H$E+H$y)),H$d.pos+=H$y,H$E=H$d.pos,H$D.outTangent=new Float32Array(H$e.slice(H$E,H$E+H$y)),H$d.pos+=H$y,H$E=H$d.pos,H$D.data=new Float32Array(H$e.slice(H$E,H$E+H$y)),H$d.pos+=H$y,H$B&&(H$B.next=H$D,H$B.duration=H$C-H$B.startTime),H$B=H$D}H$D.next=null,H$D.duration=H$k-H$C}var H$F=H$j._nodeToCachePropertyMap=new Int32Array(H$l),H$G=H$j._cachePropertyMap=new Int32Array(H$o),H$H=H$j._unCachePropertyMap=new Int32Array(H$p);for(H$o=H$p=0,H$b=0;H$b<H$l;H$b++)(H$a=H$m[H$b])._cacheProperty?(H$F[H$b]=H$o,H$G[H$o++]=H$b):H$H[H$p++]=H$b},H$I._animationClip=null,H$I._reader=null,H$I._strings=[],H$l(H$I,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function H$M(){}H$n(H$M,"laya.d3.animation.AnimationClipParser02"),H$M.READ_DATA=function(){H$M._DATA.offset=H$M._reader.getUint32(),H$M._DATA.size=H$M._reader.getUint32()},H$M.READ_BLOCK=function(){for(var H$a=H$M._BLOCK.count=H$M._reader.getUint16(),H$b=H$M._BLOCK.blockStarts=[],H$c=H$M._BLOCK.blockLengths=[],H$d=0;H$d<H$a;H$d++)H$b.push(H$M._reader.getUint32()),H$c.push(H$M._reader.getUint32())},H$M.READ_STRINGS=function(){var H$a=H$M._reader.getUint32(),H$b=H$M._reader.getUint16(),H$c=H$M._reader.pos;H$M._reader.pos=H$a+H$M._DATA.offset;for(var H$d=0;H$d<H$b;H$d++)H$M._strings[H$d]=H$M._reader.readUTFString();H$M._reader.pos=H$c},H$M.parse=function(H$a,H$b){H$M._animationClip=H$a;(H$M._reader=H$b).__getBuffer();H$M.READ_DATA(),H$M.READ_BLOCK(),H$M.READ_STRINGS();for(var H$c=0,H$d=H$M._BLOCK.count;H$c<H$d;H$c++){var H$e=H$b.getUint16(),H$f=H$M._strings[H$e],H$g=H$M["READ_"+H$f];if(null==H$g)throw new Error("model file err,no this function:"+H$e+" "+H$f);H$g.call()}},H$M.READ_ANIMATIONS=function(){var H$a,H$b=0,H$c=0,H$d=H$M._reader,H$e=H$d.__getBuffer(),H$f=[],H$g=H$d.getUint8();for(H$f.length=H$g,H$b=0;H$b<H$g;H$b++)H$f[H$b]=H$d.getUint16();var H$h=[],H$i=H$d.getUint16();for(H$h.length=H$i,H$b=0;H$b<H$i;H$b++)H$h[H$b]=H$d.getFloat32();var H$j=H$M._animationClip;H$j.name=H$M._strings[H$d.getUint16()];var H$k=H$j._duration=H$d.getFloat32();H$j.islooping=!!H$d.getByte(),H$j._frameRate=H$d.getInt16();var H$l=H$d.getInt16(),H$m=H$j._nodes=new Array;H$m.length=H$l,(H$j._publicClipDatas=[]).length=H$l;var H$n=H$j._nodesMap={},H$o=0,H$p=0;for(H$b=0;H$b<H$l;H$b++){H$a=H$m[H$b]=new H$Q;var H$q=H$d.getUint16(),H$r=H$a.path=[];for(H$r.length=H$q,H$c=0;H$c<H$q;H$c++)H$r[H$c]=H$M._strings[H$d.getUint16()];var H$s=H$r.join("/"),H$t=H$n[H$s];H$t||(H$n[H$s]=H$t=[]),H$t.push(H$a);var H$u=H$d.getInt16();-1!==H$u&&(H$a.componentType=H$M._strings[H$u]);var H$v=H$O._propertyIndexDic[H$M._strings[H$d.getUint16()]];if(null==H$v)throw new Error("AnimationClipParser02:unknown property name.");var H$w=H$v<4,H$x=!H$w||H$w&&""===H$r[0];(H$a._cacheProperty=H$x)?H$o++:H$p++,H$a.propertyNameID=H$v;var H$y=H$f[H$d.getUint8()];H$a.keyFrameWidth=H$y/4;var H$z=H$a.keyFrames=[],H$A=H$z.length=H$d.getUint16(),H$B=null,H$C=NaN;for(H$c=0;H$c<H$A;H$c++){var H$D=H$z[H$c]=new H$P;H$C=H$D.startTime=H$h[H$d.getUint16()];var H$E=H$d.pos;H$D.inTangent=new Float32Array(H$e.slice(H$E,H$E+H$y)),H$d.pos+=H$y,H$E=H$d.pos,H$D.outTangent=new Float32Array(H$e.slice(H$E,H$E+H$y)),H$d.pos+=H$y,H$E=H$d.pos,H$D.data=new Float32Array(H$e.slice(H$E,H$E+H$y)),H$d.pos+=H$y,H$B&&(H$B.next=H$D,H$B.duration=H$C-H$B.startTime),H$B=H$D}H$D.next=null,H$D.duration=H$k-H$C}var H$F=H$d.getUint16();for(H$b=0;H$b<H$F;H$b++){var H$G,H$H=new H$N;H$H.time=H$d.getFloat32(),H$H.eventName=H$M._strings[H$d.getUint16()];var H$I=H$d.getUint16();for(0<H$I&&(H$H.params=H$G=[]),H$c=0;H$c<H$I;H$c++){switch(H$d.getByte()){case 0:H$G.push(!!H$d.getByte());break;case 1:H$G.push(H$d.getInt32());break;case 2:H$G.push(H$d.getFloat32());break;case 3:H$G.push(H$M._strings[H$d.getUint16()]);break;default:throw new Error("unknown type.")}}H$j.addEvent(H$H)}var H$J=H$j._nodeToCachePropertyMap=new Int32Array(H$l),H$K=H$j._cachePropertyMap=new Int32Array(H$o),H$L=H$j._unCachePropertyMap=new Int32Array(H$p);for(H$o=H$p=0,H$b=0;H$b<H$l;H$b++)(H$a=H$m[H$b])._cacheProperty?(H$J[H$b]=H$o,H$K[H$o++]=H$b):H$L[H$p++]=H$b},H$M._animationClip=null,H$M._reader=null,H$M._strings=[],H$l(H$M,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var H$N=function(){function H$a(){this.time=NaN,this.eventName=null,this.params=null}return H$n(H$a,"laya.d3.animation.AnimationEvent"),H$a}(),H$O=function(){function H$d(){this._childs=[],this.transform=new H$sb(this)}H$n(H$d,"laya.d3.animation.AnimationNode");var H$a=H$d.prototype;return H$v.imps(H$a,{"laya.d3.core.IClone":!0}),H$a.addChild=function(H$a){H$a._parent=this,H$a.transform.setParent(this.transform),this._childs.push(H$a)},H$a.removeChild=function(H$a){var H$b=this._childs.indexOf(H$a);-1!==H$b&&this._childs.splice(H$b,1)},H$a.getChildByName=function(H$a){for(var H$b=0,H$c=this._childs.length;H$b<H$c;H$b++){var H$d=this._childs[H$b];if(H$d.name===H$a)return H$d}return null},H$a.getChildByIndex=function(H$a){return this._childs[H$a]},H$a.getChildCount=function(){return this._childs.length},H$a.cloneTo=function(H$a){var H$b=H$a;H$b.name=this.name;for(var H$c=0,H$d=this._childs.length;H$c<H$d;H$c++){var H$e=this._childs[H$c],H$f=H$e.clone();H$b.addChild(H$f);var H$g=H$e.transform,H$h=H$f.transform;H$h.setLocalPosition(H$g.getLocalPosition()),H$h.setLocalRotation(H$g.getLocalRotation()),H$h.setLocalScale(H$g.getLocalScale()),H$h._localRotationEuler=H$g._localRotationEuler,H$h._setWorldMatrixIgnoreUpdate(H$g.getWorldMatrix())}},H$a.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$d.__init__=function(){H$d.registerAnimationNodeProperty("localPosition",H$d._getLocalPosition,H$d._setLocalPosition),H$d.registerAnimationNodeProperty("localRotation",H$d._getLocalRotation,H$d._setLocalRotation),H$d.registerAnimationNodeProperty("localScale",H$d._getLocalScale,H$d._setLocalScale),H$d.registerAnimationNodeProperty("localRotationEuler",H$d._getLocalRotationEuler,H$d._setLocalRotationEuler),H$d.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",H$d._getParticleRenderSharedMaterialTintColor,H$d._setParticleRenderSharedMaterialTintColor),H$d.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",H$d._getMeshRenderSharedMaterialTilingOffset,H$d._setMeshRenderSharedMaterialTilingOffset),H$d.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",H$d._getMeshRenderSharedMaterialAlbedo,H$d._setMeshRenderSharedMaterialAlbedo),H$d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",H$d._getSkinnedMeshRenderSharedMaterialTilingOffset,H$d._setSkinnedMeshRenderSharedMaterialTilingOffset),H$d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",H$d._getSkinnedMeshRenderSharedMaterialAlbedo,H$d._setSkinnedMeshRenderSharedMaterialAlbedo),H$d.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",H$d._getMeshRenderSharedMaterialAlbedo,H$d._setMeshRenderSharedMaterialAlbedo),H$d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",H$d._getSkinnedMeshRenderSharedMaterialAlbedo,H$d._setSkinnedMeshRenderSharedMaterialAlbedo),H$d.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",H$d._getMeshRenderSharedMaterialIntensity,H$d._setMeshRenderSharedMaterialIntensity),H$d.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",H$d._getMeshRenderSharedMaterialAlpha,H$d._setMeshRenderSharedMaterialAlpha),H$d.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",H$d._getMeshRenderSharedMaterialAlphaColor,H$d._setMeshRenderSharedMaterialAlphaColor),H$d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",H$d._getMeshRenderSharedMaterialBaseColor,H$d._setMeshRenderSharedMaterialBaseColor),H$d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",H$d._getMeshRenderSharedMaterialDissolve,H$d._setMeshRenderSharedMaterialDissolve),H$d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",H$d._getMeshRenderSharedMaterialDissolveSpeed,H$d._setMeshRenderSharedMaterialDissolveSpeed),H$d.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",H$d._getMeshRenderSharedMaterialMMultiplier,H$d._setMeshRenderSharedMaterialMMultiplier),H$d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",H$d._getMeshRenderSharedMaterialBaseScrollSpeedX,H$d._setMeshRenderSharedMaterialBaseScrollSpeedX),H$d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",H$d._getMeshRenderSharedMaterialBaseScrollSpeedY,H$d._setMeshRenderSharedMaterialBaseScrollSpeedY),H$d.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",H$d._getMeshRenderSharedMaterialSecondScrollSpeedX,H$d._setMeshRenderSharedMaterialSecondScrollSpeedX),H$d.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",H$d._getMeshRenderSharedMaterialSecondScrollSpeedY,H$d._setMeshRenderSharedMaterialSecondScrollSpeedY),H$d.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",H$d._getMeshRenderSharedMaterialDetailTilingOffset,H$d._setMeshRenderSharedMaterialDetailTilingOffset),H$d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",H$d._getMeshRenderSharedMaterialDissolveTilingOffset,H$d._setMeshRenderSharedMaterialDissolveTilingOffset),H$d.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",H$d._getMeshRenderSharedMaterialMaskTilingOffset,H$d._setMeshRenderSharedMaterialMaskTilingOffset)},H$d.registerAnimationNodeProperty=function(H$a,H$b,H$c){if(H$d._propertyIndexDic[H$a])throw new Error("AnimationNode: this propertyName has registered.");H$d._propertyIndexDic[H$a]=H$d._propertyIDCounter,H$d._propertyGetFuncs[H$d._propertyIDCounter]=H$b,H$d._propertySetFuncs[H$d._propertyIDCounter]=H$c,H$d._propertyIDCounter++},H$d._getLocalPosition=function(H$a,H$b){return H$a?H$a.transform.getLocalPosition():H$b._transform.localPosition.elements},H$d._setLocalPosition=function(H$a,H$b,H$c){if(H$a)H$a.transform.setLocalPosition(H$c);else{var H$d=H$b._transform,H$e=H$d.localPosition;H$e.elements=H$c,H$d.localPosition=H$e}},H$d._getLocalRotation=function(H$a,H$b){return H$a?H$a.transform.getLocalRotation():H$b._transform.localRotation.elements},H$d._setLocalRotation=function(H$a,H$b,H$c){if(H$a)H$a.transform.setLocalRotation(H$c);else{var H$d=H$b._transform,H$e=H$d.localRotation;H$e.elements=H$c,H$d.localRotation=H$e}},H$d._getLocalScale=function(H$a,H$b){return H$a?H$a.transform.getLocalScale():H$b._transform.localScale.elements},H$d._setLocalScale=function(H$a,H$b,H$c){if(H$a)H$a.transform.setLocalScale(H$c);else{var H$d=H$b._transform,H$e=H$d.localScale;H$e.elements=H$c,H$d.localScale=H$e}},H$d._getLocalRotationEuler=function(H$a,H$b){return H$a?H$a.transform.getLocalRotationEuler():H$b._transform.localRotationEuler.elements},H$d._setLocalRotationEuler=function(H$a,H$b,H$c){if(H$a)H$a.transform.setLocalRotationEuler(H$c);else{var H$d=H$b._transform,H$e=H$d.localRotationEuler;H$e.elements=H$c,H$d.localRotationEuler=H$e}},H$d._getMeshRenderSharedMaterialTilingOffset=function(H$a,H$b){if(H$a){var H$c=H$a.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return H$b.meshRender.sharedMaterial.tilingOffset.elements},H$d._setMeshRenderSharedMaterialTilingOffset=function(H$a,H$b,H$c){var H$d,H$e;if(H$a){var H$f=H$a.transform._entity;H$f&&((H$e=(H$d=H$f.owner.meshRender.material).tilingOffset).elements=H$c,H$d.tilingOffset=H$e)}else(H$e=(H$d=H$b.meshRender.material).tilingOffset).elements=H$c,H$d.tilingOffset=H$e},H$d._getMeshRenderSharedMaterialAlbedo=function(H$a,H$b){if(H$a){var H$c=H$a.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.albedoColor.elements:null}return H$b.meshRender.sharedMaterial.albedoColor.elements},H$d._setMeshRenderSharedMaterialAlbedo=function(H$a,H$b,H$c){var H$d,H$e;if(H$a){var H$f=H$a.transform._entity;H$f&&((H$e=(H$d=H$f.owner.meshRender.material).albedoColor).elements=H$c,H$d.albedoColor=H$e)}else(H$e=(H$d=H$b.meshRender.material).albedoColor).elements=H$c,H$d.albedoColor=H$e},H$d._getSkinnedMeshRenderSharedMaterialTilingOffset=function(H$a,H$b){if(H$a){var H$c=H$a.transform._entity;return H$c?H$c.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return H$b.skinnedMeshRender.sharedMaterial.tilingOffset.elements},H$d._setSkinnedMeshRenderSharedMaterialTilingOffset=function(H$a,H$b,H$c){var H$d,H$e;if(H$a){var H$f=H$a.transform._entity;H$f&&((H$e=(H$d=H$f.owner.skinnedMeshRender.material).tilingOffset).elements=H$c,H$d.tilingOffset=H$e)}else(H$e=(H$d=H$b.skinnedMeshRender.material).tilingOffset).elements=H$c,H$d.tilingOffset=H$e},H$d._getSkinnedMeshRenderSharedMaterialAlbedo=function(H$a,H$b){if(H$a){var H$c=H$a.transform._entity;return H$c?H$c.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return H$b.skinnedMeshRender.sharedMaterial.albedoColor.elements},H$d._setSkinnedMeshRenderSharedMaterialAlbedo=function(H$a,H$b,H$c){var H$d,H$e;if(H$a){var H$f=H$a.transform._entity;H$f&&((H$e=(H$d=H$f.owner.skinnedMeshRender.material).albedoColor).elements=H$c,H$d.albedoColor=H$e)}else(H$e=(H$d=H$b.skinnedMeshRender.material).albedoColor).elements=H$c,H$d.albedoColor=H$e},H$d._getParticleRenderSharedMaterialTintColor=function(H$a,H$b){if(H$a){var H$c=H$a.transform._entity;return H$c?H$c.owner.particleRender.sharedMaterial.tintColor.elements:null}return H$b.particleRender.sharedMaterial.tintColor.elements},H$d._setParticleRenderSharedMaterialTintColor=function(H$a,H$b,H$c){var H$d,H$e;if(H$a){var H$f=H$a.transform._entity;H$f&&((H$e=(H$d=H$f.owner.particleRender.material).tintColor).elements=H$c,H$d.tintColor=H$e)}else(H$e=(H$d=H$b.particleRender.material).tintColor).elements=H$c,H$d.tintColor=H$e},H$d._getMeshRenderSharedMaterialAlphaColor=function(H$a,H$b){if(H$a){var H$c=H$a.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.alphaColor.elements:null}return H$b.meshRender.sharedMaterial.alphaColor.elements},H$d._setMeshRenderSharedMaterialAlphaColor=function(H$a,H$b,H$c){var H$d,H$e;if(H$a){var H$f=H$a.transform._entity;H$f&&((H$e=(H$d=H$f.owner.meshRender.material).alphaColor).elements=H$c,H$d.alphaColor=H$e)}else(H$e=(H$d=H$b.meshRender.material).alphaColor).elements=H$c,H$d.alphaColor=H$e},H$d._getMeshRenderSharedMaterialBaseColor=function(H$a,H$b){if(H$a){var H$c=H$a.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.baseColor.elements:null}return H$b.meshRender.sharedMaterial.baseColor.elements},H$d._setMeshRenderSharedMaterialBaseColor=function(H$a,H$b,H$c){var H$d,H$e;if(H$a){var H$f=H$a.transform._entity;H$f&&((H$e=(H$d=H$f.owner.meshRender.material).baseColor).elements=H$c,H$d.baseColor=H$e)}else(H$e=(H$d=H$b.meshRender.material).baseColor).elements=H$c,H$d.baseColor=H$e},H$d._getMeshRenderSharedMaterialDissolve=function(H$a,H$b){if(H$a){var H$c=H$a.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.dissolve:0}return H$b.meshRender.sharedMaterial.dissolve},H$d._setMeshRenderSharedMaterialDissolve=function(H$a,H$b,H$c){if(H$a){var H$d=H$a.transform._entity;H$d&&(H$d.owner.meshRender.material.dissolve=H$c[0])}else H$b.meshRender.material.dissolve=H$c[0]},H$d._getMeshRenderSharedMaterialDissolveSpeed=function(H$a,H$b){if(H$a){var H$c=H$a.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.dissolveSpeed:0}return H$b.meshRender.sharedMaterial.dissolveSpeed},H$d._setMeshRenderSharedMaterialDissolveSpeed=function(H$a,H$b,H$c){if(H$a){var H$d=H$a.transform._entity;H$d&&(H$d.owner.meshRender.material.dissolveSpeed=H$c[0])}else H$b.meshRender.material.dissolveSpeed=H$c[0]},H$d._getMeshRenderSharedMaterialMMultiplier=function(H$a,H$b){if(H$a){var H$c=H$a.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.mMultiplier:0}return H$b.meshRender.sharedMaterial.mMultiplier},H$d._setMeshRenderSharedMaterialMMultiplier=function(H$a,H$b,H$c){if(H$a){var H$d=H$a.transform._entity;H$d&&(H$d.owner.meshRender.material.mMultiplier=H$c[0])}else H$b.meshRender.material.mMultiplier=H$c[0]},H$d._getMeshRenderSharedMaterialBaseScrollSpeedX=function(H$a,H$b){if(H$a){var H$c=H$a.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return H$b.meshRender.sharedMaterial.baseScrollSpeedX},H$d._setMeshRenderSharedMaterialBaseScrollSpeedX=function(H$a,H$b,H$c){if(H$a){var H$d=H$a.transform._entity;H$d&&(H$d.owner.meshRender.material.baseScrollSpeedX=H$c[0])}else H$b.meshRender.material.baseScrollSpeedX=H$c[0]},H$d._getMeshRenderSharedMaterialBaseScrollSpeedY=function(H$a,H$b){if(H$a){var H$c=H$a.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return H$b.meshRender.sharedMaterial.baseScrollSpeedY},H$d._setMeshRenderSharedMaterialBaseScrollSpeedY=function(H$a,H$b,H$c){if(H$a){var H$d=H$a.transform._entity;H$d&&(H$d.owner.meshRender.material.baseScrollSpeedY=H$c[0])}else H$b.meshRender.material.baseScrollSpeedY=H$c[0]},H$d._getMeshRenderSharedMaterialSecondScrollSpeedX=function(H$a,H$b){if(H$a){var H$c=H$a.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return H$b.meshRender.sharedMaterial.secondScrollSpeedX},H$d._setMeshRenderSharedMaterialSecondScrollSpeedX=function(H$a,H$b,H$c){if(H$a){var H$d=H$a.transform._entity;H$d&&(H$d.owner.meshRender.material.secondScrollSpeedX=H$c[0])}else H$b.meshRender.material.secondScrollSpeedX=H$c[0]},H$d._getMeshRenderSharedMaterialSecondScrollSpeedY=function(H$a,H$b){if(H$a){var H$c=H$a.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return H$b.meshRender.sharedMaterial.secondScrollSpeedY},H$d._setMeshRenderSharedMaterialSecondScrollSpeedY=function(H$a,H$b,H$c){if(H$a){var H$d=H$a.transform._entity;H$d&&(H$d.owner.meshRender.material.secondScrollSpeedY=H$c[0])}else H$b.meshRender.material.secondScrollSpeedY=H$c[0]},H$d._getMeshRenderSharedMaterialAlpha=function(H$a,H$b){if(H$a){var H$c=H$a.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.alpha:0}return H$b.meshRender.sharedMaterial.alpha},H$d._setMeshRenderSharedMaterialAlpha=function(H$a,H$b,H$c){if(H$a){var H$d=H$a.transform._entity;H$d&&(H$d.owner.meshRender.material.alpha=H$c[0])}else H$b.meshRender.material.alpha=H$c[0]},H$d._getMeshRenderSharedMaterialIntensity=function(H$a,H$b){if(H$a){var H$c=H$a.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.intensity:0}return H$b.meshRender.sharedMaterial.intensity},H$d._setMeshRenderSharedMaterialIntensity=function(H$a,H$b,H$c){if(H$a){var H$d=H$a.transform._entity;H$d&&(H$d.owner.meshRender.material.intensity=H$c[0])}else H$b.meshRender.material.intensity=H$c[0]},H$d._getMeshRenderSharedMaterialDetailTilingOffset=function(H$a,H$b){if(H$a){var H$c=H$a.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return H$b.meshRender.sharedMaterial.detailTilingOffset.elements},H$d._setMeshRenderSharedMaterialDetailTilingOffset=function(H$a,H$b,H$c){var H$d,H$e;if(H$a){var H$f=H$a.transform._entity;H$f&&((H$e=(H$d=H$f.owner.meshRender.material).detailTilingOffset).elements=H$c,H$d.detailTilingOffset=H$e)}else(H$e=(H$d=H$b.meshRender.material).detailTilingOffset).elements=H$c,H$d.detailTilingOffset=H$e},H$d._getMeshRenderSharedMaterialDissolveTilingOffset=function(H$a,H$b){if(H$a){var H$c=H$a.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return H$b.meshRender.sharedMaterial.dissolveTilingOffset.elements},H$d._setMeshRenderSharedMaterialDissolveTilingOffset=function(H$a,H$b,H$c){var H$d,H$e;if(H$a){var H$f=H$a.transform._entity;H$f&&((H$e=(H$d=H$f.owner.meshRender.material).dissolveTilingOffset).elements=H$c,H$d.dissolveTilingOffset=H$e)}else(H$e=(H$d=H$b.meshRender.material).dissolveTilingOffset).elements=H$c,H$d.dissolveTilingOffset=H$e},H$d._getMeshRenderSharedMaterialMaskTilingOffset=function(H$a,H$b){if(H$a){var H$c=H$a.transform._entity;return H$c?H$c.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return H$b.meshRender.sharedMaterial.maskTilingOffset.elements},H$d._setMeshRenderSharedMaterialMaskTilingOffset=function(H$a,H$b,H$c){var H$d,H$e;if(H$a){var H$f=H$a.transform._entity;H$f&&((H$e=(H$d=H$f.owner.meshRender.material).maskTilingOffset).elements=H$c,H$d.maskTilingOffset=H$e)}else(H$e=(H$d=H$b.meshRender.material).maskTilingOffset).elements=H$c,H$d.maskTilingOffset=H$e},H$d._propertyIDCounter=0,H$d._propertyIndexDic={},H$d._propertySetFuncs=[],H$d._propertyGetFuncs=[],H$d}(),H$P=function(){function H$a(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return H$n(H$a,"laya.d3.animation.Keyframe"),H$a}(),H$Q=function(){function H$a(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return H$n(H$a,"laya.d3.animation.KeyframeNode"),H$a}(),H$G=(function(){function H$a(){this._tempVector30=new H$gb,this._tempVector31=new H$gb,this._tempVector32=new H$gb,this._a=new H$gb,this._b=new H$gb,this._c=new H$gb,this._d=new H$gb}H$n(H$a,"laya.d3.core.glitter.SplineCurvePositionVelocity");var H$b=H$a.prototype;H$b.Init=function(H$a,H$b,H$c,H$d){H$a.cloneTo(this._d),H$b.cloneTo(this._c),H$gb.scale(H$a,2,this._a),H$gb.scale(H$c,2,this._tempVector30),H$gb.subtract(this._a,this._tempVector30,this._a),H$gb.add(this._a,H$b,this._a),H$gb.add(this._a,H$d,this._a),H$gb.scale(H$c,3,this._b),H$gb.scale(H$a,3,this._tempVector30),H$gb.subtract(this._b,this._tempVector30,this._b),H$gb.subtract(this._b,H$d,this._b),H$gb.scale(H$b,2,this._tempVector30),H$gb.subtract(this._b,this._tempVector30,this._b)},H$b.Slerp=function(H$a,H$b){H$gb.scale(this._a,H$a*H$a*H$a,this._tempVector30),H$gb.scale(this._b,H$a*H$a,this._tempVector31),H$gb.scale(this._c,H$a,this._tempVector32),H$gb.add(this._tempVector30,this._tempVector31,H$b),H$gb.add(H$b,this._tempVector32,H$b),H$gb.add(H$b,this._d,H$b)}}(),function(){function H$K(H$a,H$b,H$c,H$d){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=H$a,this._h=H$b,this._minHeight=H$c,this._maxHeight=H$d}H$n(H$K,"laya.d3.core.HeightMap");var H$a=H$K.prototype;H$a._inBounds=function(H$a,H$b){return 0<=H$a&&H$a<this._h&&0<=H$b&&H$b<this._w},H$a.getHeight=function(H$a,H$b){return this._inBounds(H$a,H$b)?this._datas[H$a][H$b]:NaN},H$o(0,H$a,"width",function(){return this._w}),H$o(0,H$a,"height",function(){return this._h}),H$o(0,H$a,"maxHeight",function(){return this._maxHeight}),H$o(0,H$a,"minHeight",function(){return this._minHeight}),H$K.creatFromMesh=function(H$a,H$b,H$c,H$d){for(var H$e=[],H$f=[],H$g=H$a.getSubMeshCount(),H$h=0;H$h<H$g;H$h++){for(var H$i=H$a.getSubMesh(H$h),H$j=H$i._getVertexBuffer(),H$k=H$j.getData(),H$l=[],H$m=0;H$m<H$k.length;H$m+=H$j.vertexDeclaration.vertexStride/4){var H$n=new H$gb(H$k[H$m+0],H$k[H$m+1],H$k[H$m+2]);H$l.push(H$n)}H$e.push(H$l);var H$o=H$i._getIndexBuffer();H$f.push(H$o.getData())}var H$p=H$a.boundingBox,H$q=H$p.min.x,H$r=H$p.min.z,H$s=H$p.max.x,H$t=H$p.max.z,H$u=H$p.min.y,H$v=H$p.max.y,H$w=H$s-H$q,H$x=H$t-H$r,H$y=H$d.elements[0]=H$w/(H$b-1),H$z=H$d.elements[1]=H$x/(H$c-1),H$A=new H$K(H$b,H$c,H$u,H$v),H$B=H$K._tempRay,H$C=H$B.direction.elements;H$C[0]=0,H$C[1]=-1,H$C[2]=0;var H$D=H$v+.1;H$B.origin.elements[1]=H$D;for(var H$E=0;H$E<H$c;H$E++){var H$F=H$r+H$E*H$z;H$A._datas[H$E]=[];for(var H$G=0;H$G<H$b;H$G++){var H$H=H$q+H$G*H$y,H$I=H$B.origin.elements;H$I[0]=H$H,H$I[2]=H$F;var H$J=H$K._getPosition(H$B,H$e,H$f);H$A._datas[H$E][H$G]=H$J===Number.MAX_VALUE?NaN:H$D-H$J}}return H$A},H$K.createFromImage=function(H$a,H$b,H$c){for(var H$d=H$a.width,H$e=H$a.height,H$f=new H$K(H$d,H$e,H$b,H$c),H$g=(H$c-H$b)/254,H$h=H$a.getPixels(),H$i=0,H$j=0;H$j<H$e;H$j++)for(var H$k=H$f._datas[H$j]=[],H$l=0;H$l<H$d;H$l++){var H$m=H$h[H$i++],H$n=H$h[H$i++],H$o=H$h[H$i++],H$p=H$h[H$i++];H$k[H$l]=255==H$m&&255==H$n&&255==H$o&&255==H$p?NaN:(H$m+H$n+H$o)/3*H$g+H$b}return H$f},H$K._getPosition=function(H$a,H$b,H$c){for(var H$d=Number.MAX_VALUE,H$e=0;H$e<H$b.length;H$e++)for(var H$f=H$b[H$e],H$g=H$c[H$e],H$h=0;H$h<H$g.length;H$h+=3){var H$i=H$f[H$g[H$h+0]],H$j=H$f[H$g[H$h+1]],H$k=H$f[H$g[H$h+2]],H$l=H$ob.rayIntersectsTriangle(H$a,H$i,H$j,H$k);!isNaN(H$l)&&H$l<H$d&&(H$d=H$l)}return H$d},H$l(H$K,["_tempRay",function(){return this._tempRay=new H$eb(new H$gb,new H$gb)}])}(),function(){function H$e(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}H$n(H$e,"laya.d3.core.Layer");var H$a=H$e.prototype;return H$a._binarySearchIndex=function(){for(var H$a=0,H$b=H$e._collsionTestList.length-1,H$c=0;H$a<=H$b;){H$c=Math.floor((H$a+H$b)/2);var H$d=H$e._collsionTestList[H$c];if(H$d==this._number)return H$c;H$d>this._number?H$b=H$c-1:H$a=H$c+1}return H$a},H$a._addCollider=function(H$a){0===this._colliders.length&&H$e._collsionTestList.splice(this._binarySearchIndex(),0,this._number),H$a._isRigidbody?(this._colliders.unshift(H$a),this._nonRigidbodyOffset++):this._colliders.push(H$a)},H$a._removeCollider=function(H$a){var H$b=this._colliders.indexOf(H$a);H$b<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(H$b,1),0===this._colliders.length&&H$e._collsionTestList.splice(H$e._collsionTestList.indexOf(this._number),1)},H$o(0,H$a,"number",function(){return this._number}),H$o(0,H$a,"visible",function(){return this._visible},function(H$a){this._visible=H$a,H$e._visibleLayers=H$a?H$e._visibleLayers|this.mask:H$e._visibleLayers&~this.mask}),H$o(0,H$a,"mask",function(){return this._mask}),H$o(1,H$e,"visibleLayers",function(){return H$e._visibleLayers},function(H$a){H$e._visibleLayers=H$a;for(var H$b=0,H$c=H$e._layerList.length;H$b<H$c;H$b++){var H$d=H$e._layerList[H$b];H$d._visible=0!=(H$d._mask&H$e._visibleLayers)}}),H$e.__init__=function(){H$e._layerList.length=31;for(var H$a=0;H$a<31;H$a++){var H$b=new H$e;H$e._layerList[H$a]=H$b,0===H$a?(H$b.name="Default Layer",H$b.visible=!0):(H$b.name="Layer-"+H$a,H$b.visible=!1),H$b._number=H$a,H$b._mask=Math.pow(2,H$a)}H$e.currentCreationLayer=H$e._layerList[0]},H$e.getLayerByNumber=function(H$a){if(H$a<0||30<H$a)throw new Error("无法返回指定Layer，该number超出范围！");return H$e._layerList[H$a]},H$e.getLayerByName=function(H$a){for(var H$b=0;H$b<31;H$b++)if(H$e._layerList[H$b].name===H$a)return H$e._layerList[H$b];throw new Error("无法返回指定Layer,该name不存在")},H$e.isVisible=function(H$a){return 0!=(H$a&H$e._currentCameraCullingMask&H$e._visibleLayers)},H$e._layerList=[],H$e._visibleLayers=2147483647,H$e._collsionTestList=[],H$e._currentCameraCullingMask=2147483647,H$e.maxCount=31,H$e.currentCreationLayer=null,H$e}()),H$H=(function(){function H$a(H$a,H$b,H$c){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=H$a,this._minCount=H$b,this._maxCount=H$c}H$n(H$a,"laya.d3.core.particleShuriKen.module.Burst");var H$b=H$a.prototype;H$v.imps(H$b,{"laya.d3.core.IClone":!0}),H$b.cloneTo=function(H$a){var H$b=H$a;H$b._time=this._time,H$b._minCount=this._minCount,H$b._maxCount=this._maxCount},H$b.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$o(0,H$b,"time",function(){return this._time}),H$o(0,H$b,"minCount",function(){return this._minCount}),H$o(0,H$b,"maxCount",function(){return this._maxCount})}(),function(){function H$a(H$a){this._color=null,this.enbale=!1,this._color=H$a}H$n(H$a,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var H$b=H$a.prototype;H$b.cloneTo=function(H$a){var H$b=H$a;this._color.cloneTo(H$b._color),H$b.enbale=this.enbale},H$b.clone=function(){var H$a;switch(this._color.type){case 0:H$a=H$J.createByConstant(this._color.constant.clone());break;case 1:H$a=H$J.createByGradient(this._color.gradient.clone());break;case 2:H$a=H$J.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:H$a=H$J.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var H$b=new this.constructor(H$a);return H$b.enbale=this.enbale,H$b},H$o(0,H$b,"color",function(){return this._color})}(),function(){function H$a(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}H$n(H$a,"laya.d3.core.particleShuriKen.module.Emission");var H$b=H$a.prototype;H$v.imps(H$b,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),H$b._destroy=function(){this._bursts=null,this._destroyed=!0},H$b.getBurstsCount=function(){return this._bursts.length},H$b.getBurstByIndex=function(H$a){return this._bursts[H$a]},H$b.addBurst=function(H$a){var H$b=this._bursts.length;if(0<H$b)for(var H$c=0;H$c<H$b;H$c++)this._bursts[H$c].time>H$a.time&&this._bursts.splice(H$c,0,H$a);this._bursts.push(H$a)},H$b.removeBurst=function(H$a){var H$b=this._bursts.indexOf(H$a);-1!==H$b&&this._bursts.splice(H$b,1)},H$b.removeBurstByIndex=function(H$a){this._bursts.splice(H$a,1)},H$b.clearBurst=function(){this._bursts.length=0},H$b.cloneTo=function(H$a){var H$b=H$a,H$c=H$b._bursts;H$c.length=this._bursts.length;for(var H$d=0,H$e=this._bursts.length;H$d<H$e;H$d++){var H$f=H$c[H$d];H$f?this._bursts[H$d].cloneTo(H$f):H$c[H$d]=this._bursts[H$d].clone()}H$b._emissionRate=this._emissionRate,H$b.enbale=this.enbale},H$b.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$o(0,H$b,"destroyed",function(){return this._destroyed}),H$o(0,H$b,"emissionRate",function(){return this._emissionRate},function(H$a){if(H$a<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=H$a})}(),function(){function H$d(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}H$n(H$d,"laya.d3.core.particleShuriKen.module.FrameOverTime");var H$a=H$d.prototype;return H$v.imps(H$a,{"laya.d3.core.IClone":!0}),H$a.cloneTo=function(H$a){var H$b=H$a;H$b._type=this._type,H$b._constant=this._constant,this._overTime.cloneTo(H$b._overTime),H$b._constantMin=this._constantMin,H$b._constantMax=this._constantMax,this._overTimeMin.cloneTo(H$b._overTimeMin),this._overTimeMax.cloneTo(H$b._overTimeMax)},H$a.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$o(0,H$a,"frameOverTimeData",function(){return this._overTime}),H$o(0,H$a,"constant",function(){return this._constant}),H$o(0,H$a,"type",function(){return this._type}),H$o(0,H$a,"frameOverTimeDataMin",function(){return this._overTimeMin}),H$o(0,H$a,"constantMin",function(){return this._constantMin}),H$o(0,H$a,"frameOverTimeDataMax",function(){return this._overTimeMax}),H$o(0,H$a,"constantMax",function(){return this._constantMax}),H$d.createByConstant=function(H$a){var H$b=new H$d;return H$b._type=0,H$b._constant=H$a,H$b},H$d.createByOverTime=function(H$a){var H$b=new H$d;return H$b._type=1,H$b._overTime=H$a,H$b},H$d.createByRandomTwoConstant=function(H$a,H$b){var H$c=new H$d;return H$c._type=2,H$c._constantMin=H$a,H$c._constantMax=H$b,H$c},H$d.createByRandomTwoOverTime=function(H$a,H$b){var H$c=new H$d;return H$c._type=3,H$c._overTimeMin=H$a,H$c._overTimeMax=H$b,H$c},H$d}()),H$I=function(){function H$j(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}H$n(H$j,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var H$a=H$j.prototype;return H$v.imps(H$a,{"laya.d3.core.IClone":!0}),H$a.cloneTo=function(H$a){var H$b=H$a;H$b._type=this._type,H$b._separateAxes=this._separateAxes,H$b._constant=this._constant,this._constantSeparate.cloneTo(H$b._constantSeparate),this._gradient.cloneTo(H$b._gradient),this._gradientX.cloneTo(H$b._gradientX),this._gradientY.cloneTo(H$b._gradientY),this._gradientZ.cloneTo(H$b._gradientZ),H$b._constantMin=this._constantMin,H$b._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(H$b._constantMinSeparate),this._constantMaxSeparate.cloneTo(H$b._constantMaxSeparate),this._gradientMin.cloneTo(H$b._gradientMin),this._gradientMax.cloneTo(H$b._gradientMax),this._gradientXMin.cloneTo(H$b._gradientXMin),this._gradientXMax.cloneTo(H$b._gradientXMax),this._gradientYMin.cloneTo(H$b._gradientYMin),this._gradientYMax.cloneTo(H$b._gradientYMax),this._gradientZMin.cloneTo(H$b._gradientZMin),this._gradientZMax.cloneTo(H$b._gradientZMax)},H$a.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$o(0,H$a,"gradientZ",function(){return this._gradientZ}),H$o(0,H$a,"constant",function(){return this._constant}),H$o(0,H$a,"gradient",function(){return this._gradient}),H$o(0,H$a,"separateAxes",function(){return this._separateAxes}),H$o(0,H$a,"type",function(){return this._type}),H$o(0,H$a,"constantSeparate",function(){return this._constantSeparate}),H$o(0,H$a,"gradientX",function(){return this._gradientX}),H$o(0,H$a,"gradientY",function(){return this._gradientY}),H$o(0,H$a,"gradientW",function(){return this._gradientW}),H$o(0,H$a,"gradientMin",function(){return this._gradientMin}),H$o(0,H$a,"constantMin",function(){return this._constantMin}),H$o(0,H$a,"gradientMax",function(){return this._gradientMax}),H$o(0,H$a,"constantMax",function(){return this._constantMax}),H$o(0,H$a,"gradientWMin",function(){return this._gradientWMin}),H$o(0,H$a,"constantMinSeparate",function(){return this._constantMinSeparate}),H$o(0,H$a,"constantMaxSeparate",function(){return this._constantMaxSeparate}),H$o(0,H$a,"gradientXMin",function(){return this._gradientXMin}),H$o(0,H$a,"gradientXMax",function(){return this._gradientXMax}),H$o(0,H$a,"gradientWMax",function(){return this._gradientWMax}),H$o(0,H$a,"gradientYMin",function(){return this._gradientYMin}),H$o(0,H$a,"gradientYMax",function(){return this._gradientYMax}),H$o(0,H$a,"gradientZMin",function(){return this._gradientZMin}),H$o(0,H$a,"gradientZMax",function(){return this._gradientZMax}),H$j.createByConstant=function(H$a){var H$b=new H$j;return H$b._type=0,H$b._separateAxes=!1,H$b._constant=H$a,H$b},H$j.createByConstantSeparate=function(H$a){var H$b=new H$j;return H$b._type=0,H$b._separateAxes=!0,H$b._constantSeparate=H$a,H$b},H$j.createByGradient=function(H$a){var H$b=new H$j;return H$b._type=1,H$b._separateAxes=!1,H$b._gradient=H$a,H$b},H$j.createByGradientSeparate=function(H$a,H$b,H$c,H$d){var H$e=new H$j;return H$e._type=1,H$e._separateAxes=!0,H$e._gradientX=H$a,H$e._gradientY=H$b,H$e._gradientZ=H$c,H$e._gradientW=H$d,H$e},H$j.createByRandomTwoConstant=function(H$a,H$b){var H$c=new H$j;return H$c._type=2,H$c._separateAxes=!1,H$c._constantMin=H$a,H$c._constantMax=H$b,H$c},H$j.createByRandomTwoConstantSeparate=function(H$a,H$b){var H$c=new H$j;return H$c._type=2,H$c._separateAxes=!0,H$c._constantMinSeparate=H$a,H$c._constantMaxSeparate=H$b,H$c},H$j.createByRandomTwoGradient=function(H$a,H$b){var H$c=new H$j;return H$c._type=3,H$c._separateAxes=!1,H$c._gradientMin=H$a,H$c._gradientMax=H$b,H$c},H$j.createByRandomTwoGradientSeparate=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){var H$i=new H$j;return H$i._type=3,H$i._separateAxes=!0,H$i._gradientXMin=H$a,H$i._gradientXMax=H$b,H$i._gradientYMin=H$c,H$i._gradientYMax=H$d,H$i._gradientZMin=H$e,H$i._gradientZMax=H$f,H$i._gradientWMin=H$g,H$i._gradientWMax=H$h,H$i},H$j}(),H$J=function(){function H$d(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}H$n(H$d,"laya.d3.core.particleShuriKen.module.GradientColor");var H$a=H$d.prototype;return H$v.imps(H$a,{"laya.d3.core.IClone":!0}),H$a.cloneTo=function(H$a){var H$b=H$a;H$b._type=this._type,this._constant.cloneTo(H$b._constant),this._constantMin.cloneTo(H$b._constantMin),this._constantMax.cloneTo(H$b._constantMax),this._gradient.cloneTo(H$b._gradient),this._gradientMin.cloneTo(H$b._gradientMin),this._gradientMax.cloneTo(H$b._gradientMax)},H$a.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$o(0,H$a,"gradient",function(){return this._gradient}),H$o(0,H$a,"constant",function(){return this._constant}),H$o(0,H$a,"type",function(){return this._type}),H$o(0,H$a,"gradientMin",function(){return this._gradientMin}),H$o(0,H$a,"constantMin",function(){return this._constantMin}),H$o(0,H$a,"gradientMax",function(){return this._gradientMax}),H$o(0,H$a,"constantMax",function(){return this._constantMax}),H$d.createByConstant=function(H$a){var H$b=new H$d;return H$b._type=0,H$b._constant=H$a,H$b},H$d.createByGradient=function(H$a){var H$b=new H$d;return H$b._type=1,H$b._gradient=H$a,H$b},H$d.createByRandomTwoConstant=function(H$a,H$b){var H$c=new H$d;return H$c._type=2,H$c._constantMin=H$a,H$c._constantMax=H$b,H$c},H$d.createByRandomTwoGradient=function(H$a,H$b){var H$c=new H$d;return H$c._type=3,H$c._gradientMin=H$a,H$c._gradientMax=H$b,H$c},H$d}(),H$K=(function(){function H$a(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}H$n(H$a,"laya.d3.core.particleShuriKen.module.GradientDataColor");var H$b=H$a.prototype;H$v.imps(H$b,{"laya.d3.core.IClone":!0}),H$b.addAlpha=function(H$a,H$b){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==H$a&&(H$a=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=H$a,this._alphaElements[this._alphaCurrentLength++]=H$b):DEBUG},H$b.addRGB=function(H$a,H$b){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==H$a&&(H$a=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=H$a,this._rgbElements[this._rgbCurrentLength++]=H$b.x,this._rgbElements[this._rgbCurrentLength++]=H$b.y,this._rgbElements[this._rgbCurrentLength++]=H$b.z):DEBUG},H$b.cloneTo=function(H$a){var H$b=H$a,H$c=0,H$d=0;H$b._alphaCurrentLength=this._alphaCurrentLength;var H$e=H$b._alphaElements;for(H$e.length=this._alphaElements.length,H$c=0,H$d=this._alphaElements.length;H$c<H$d;H$c++)H$e[H$c]=this._alphaElements[H$c];H$b._rgbCurrentLength=this._rgbCurrentLength;var H$f=H$b._rgbElements;for(H$f.length=this._rgbElements.length,H$c=0,H$d=this._rgbElements.length;H$c<H$d;H$c++)H$f[H$c]=this._rgbElements[H$c]},H$b.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$o(0,H$b,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),H$o(0,H$b,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function H$a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}H$n(H$a,"laya.d3.core.particleShuriKen.module.GradientDataInt");var H$b=H$a.prototype;H$v.imps(H$b,{"laya.d3.core.IClone":!0}),H$b.add=function(H$a,H$b){this._currentLength<8?(6===this._currentLength&&1!==H$a&&(H$a=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=H$a,this._elements[this._currentLength++]=H$b):console.log("Warning:data count must lessEqual than 4")},H$b.cloneTo=function(H$a){var H$b=H$a;H$b._currentLength=this._currentLength;var H$c=H$b._elements;H$c.length=this._elements.length;for(var H$d=0,H$e=this._elements.length;H$d<H$e;H$d++)H$c[H$d]=this._elements[H$d]},H$b.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$o(0,H$b,"gradientCount",function(){return this._currentLength/2})}(),function(){function H$a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}H$n(H$a,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var H$b=H$a.prototype;H$v.imps(H$b,{"laya.d3.core.IClone":!0}),H$b.add=function(H$a,H$b){this._currentLength<8?(6===this._currentLength&&1!==H$a&&(H$a=1,DEBUG),this._elements[this._currentLength++]=H$a,this._elements[this._currentLength++]=H$b):DEBUG},H$b.getKeyByIndex=function(H$a){return this._elements[2*H$a]},H$b.getValueByIndex=function(H$a){return this._elements[2*H$a+1]},H$b.getAverageValue=function(){for(var H$a=0,H$b=this._currentLength-2;H$a<H$b;H$a+=2){this._elements[H$a+1];this._elements[H$a+3],this._elements[H$a+2]-this._elements[H$a]}return 0},H$b.cloneTo=function(H$a){var H$b=H$a;H$b._currentLength=this._currentLength;var H$c=H$b._elements;H$c.length=this._elements.length;for(var H$d=0,H$e=this._elements.length;H$d<H$e;H$d++)H$c[H$d]=this._elements[H$d]},H$b.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$o(0,H$b,"gradientCount",function(){return this._currentLength/2})}(),function(){function H$a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}H$n(H$a,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var H$b=H$a.prototype;H$v.imps(H$b,{"laya.d3.core.IClone":!0}),H$b.add=function(H$a,H$b){this._currentLength<8?(6===this._currentLength&&1!==H$a&&(H$a=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=H$a,this._elements[this._currentLength++]=H$b.x,this._elements[this._currentLength++]=H$b.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},H$b.cloneTo=function(H$a){var H$b=H$a;H$b._currentLength=this._currentLength;var H$c=H$b._elements;H$c.length=this._elements.length;for(var H$d=0,H$e=this._elements.length;H$d<H$e;H$d++)H$c[H$d]=this._elements[H$d]},H$b.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$o(0,H$b,"gradientCount",function(){return this._currentLength/3})}(),function(){function H$h(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}H$n(H$h,"laya.d3.core.particleShuriKen.module.GradientSize");var H$a=H$h.prototype;return H$v.imps(H$a,{"laya.d3.core.IClone":!0}),H$a.getMaxSizeInGradient=function(){var H$a=0,H$b=0,H$c=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(H$a=0,H$b=this._gradientX.gradientCount;H$a<H$b;H$a++)H$c=Math.max(H$c,this._gradientX.getValueByIndex(H$a));for(H$a=0,H$b=this._gradientY.gradientCount;H$a<H$b;H$a++)H$c=Math.max(H$c,this._gradientY.getValueByIndex(H$a))}else for(H$a=0,H$b=this._gradient.gradientCount;H$a<H$b;H$a++)H$c=Math.max(H$c,this._gradient.getValueByIndex(H$a));break;case 1:H$c=this._separateAxes?(H$c=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),H$c=Math.max(H$c,this._constantMinSeparate.y),Math.max(H$c,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(H$a=0,H$b=this._gradientXMin.gradientCount;H$a<H$b;H$a++)H$c=Math.max(H$c,this._gradientXMin.getValueByIndex(H$a));for(H$a=0,H$b=this._gradientXMax.gradientCount;H$a<H$b;H$a++)H$c=Math.max(H$c,this._gradientXMax.getValueByIndex(H$a));for(H$a=0,H$b=this._gradientYMin.gradientCount;H$a<H$b;H$a++)H$c=Math.max(H$c,this._gradientYMin.getValueByIndex(H$a));for(H$a=0,H$b=this._gradientZMax.gradientCount;H$a<H$b;H$a++)H$c=Math.max(H$c,this._gradientZMax.getValueByIndex(H$a))}else{for(H$a=0,H$b=this._gradientMin.gradientCount;H$a<H$b;H$a++)H$c=Math.max(H$c,this._gradientMin.getValueByIndex(H$a));for(H$a=0,H$b=this._gradientMax.gradientCount;H$a<H$b;H$a++)H$c=Math.max(H$c,this._gradientMax.getValueByIndex(H$a))}}return H$c},H$a.cloneTo=function(H$a){var H$b=H$a;H$b._type=this._type,H$b._separateAxes=this._separateAxes,this._gradient.cloneTo(H$b._gradient),this._gradientX.cloneTo(H$b._gradientX),this._gradientY.cloneTo(H$b._gradientY),this._gradientZ.cloneTo(H$b._gradientZ),H$b._constantMin=this._constantMin,H$b._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(H$b._constantMinSeparate),this._constantMaxSeparate.cloneTo(H$b._constantMaxSeparate),this._gradientMin.cloneTo(H$b._gradientMin),this._gradientMax.cloneTo(H$b._gradientMax),this._gradientXMin.cloneTo(H$b._gradientXMin),this._gradientXMax.cloneTo(H$b._gradientXMax),this._gradientYMin.cloneTo(H$b._gradientYMin),this._gradientYMax.cloneTo(H$b._gradientYMax),this._gradientZMin.cloneTo(H$b._gradientZMin),this._gradientZMax.cloneTo(H$b._gradientZMax)},H$a.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$o(0,H$a,"gradientZ",function(){return this._gradientZ}),H$o(0,H$a,"gradient",function(){return this._gradient}),H$o(0,H$a,"separateAxes",function(){return this._separateAxes}),H$o(0,H$a,"type",function(){return this._type}),H$o(0,H$a,"gradientMin",function(){return this._gradientMin}),H$o(0,H$a,"constantMin",function(){return this._constantMin}),H$o(0,H$a,"gradientX",function(){return this._gradientX}),H$o(0,H$a,"gradientY",function(){return this._gradientY}),H$o(0,H$a,"gradientMax",function(){return this._gradientMax}),H$o(0,H$a,"constantMax",function(){return this._constantMax}),H$o(0,H$a,"constantMinSeparate",function(){return this._constantMinSeparate}),H$o(0,H$a,"constantMaxSeparate",function(){return this._constantMaxSeparate}),H$o(0,H$a,"gradientXMin",function(){return this._gradientXMin}),H$o(0,H$a,"gradientXMax",function(){return this._gradientXMax}),H$o(0,H$a,"gradientYMin",function(){return this._gradientYMin}),H$o(0,H$a,"gradientYMax",function(){return this._gradientYMax}),H$o(0,H$a,"gradientZMin",function(){return this._gradientZMin}),H$o(0,H$a,"gradientZMax",function(){return this._gradientZMax}),H$h.createByGradient=function(H$a){var H$b=new H$h;return H$b._type=0,H$b._separateAxes=!1,H$b._gradient=H$a,H$b},H$h.createByGradientSeparate=function(H$a,H$b,H$c){var H$d=new H$h;return H$d._type=0,H$d._separateAxes=!0,H$d._gradientX=H$a,H$d._gradientY=H$b,H$d._gradientZ=H$c,H$d},H$h.createByRandomTwoConstant=function(H$a,H$b){var H$c=new H$h;return H$c._type=1,H$c._separateAxes=!1,H$c._constantMin=H$a,H$c._constantMax=H$b,H$c},H$h.createByRandomTwoConstantSeparate=function(H$a,H$b){var H$c=new H$h;return H$c._type=1,H$c._separateAxes=!0,H$c._constantMinSeparate=H$a,H$c._constantMaxSeparate=H$b,H$c},H$h.createByRandomTwoGradient=function(H$a,H$b){var H$c=new H$h;return H$c._type=2,H$c._separateAxes=!1,H$c._gradientMin=H$a,H$c._gradientMax=H$b,H$c},H$h.createByRandomTwoGradientSeparate=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g=new H$h;return H$g._type=2,H$g._separateAxes=!0,H$g._gradientXMin=H$a,H$g._gradientXMax=H$b,H$g._gradientYMin=H$c,H$g._gradientYMax=H$d,H$g._gradientZMin=H$e,H$g._gradientZMax=H$f,H$g},H$h}()),H$L=function(){function H$h(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}H$n(H$h,"laya.d3.core.particleShuriKen.module.GradientVelocity");var H$a=H$h.prototype;return H$v.imps(H$a,{"laya.d3.core.IClone":!0}),H$a.cloneTo=function(H$a){var H$b=H$a;H$b._type=this._type,this._constant.cloneTo(H$b._constant),this._gradientX.cloneTo(H$b._gradientX),this._gradientY.cloneTo(H$b._gradientY),this._gradientZ.cloneTo(H$b._gradientZ),this._constantMin.cloneTo(H$b._constantMin),this._constantMax.cloneTo(H$b._constantMax),this._gradientXMin.cloneTo(H$b._gradientXMin),this._gradientXMax.cloneTo(H$b._gradientXMax),this._gradientYMin.cloneTo(H$b._gradientYMin),this._gradientYMax.cloneTo(H$b._gradientYMax),this._gradientZMin.cloneTo(H$b._gradientZMin),this._gradientZMax.cloneTo(H$b._gradientZMax)},H$a.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$o(0,H$a,"gradientZ",function(){return this._gradientZ}),H$o(0,H$a,"constant",function(){return this._constant}),H$o(0,H$a,"type",function(){return this._type}),H$o(0,H$a,"gradientXMax",function(){return this._gradientXMax}),H$o(0,H$a,"constantMin",function(){return this._constantMin}),H$o(0,H$a,"gradientX",function(){return this._gradientX}),H$o(0,H$a,"gradientY",function(){return this._gradientY}),H$o(0,H$a,"gradientXMin",function(){return this._gradientXMin}),H$o(0,H$a,"constantMax",function(){return this._constantMax}),H$o(0,H$a,"gradientYMin",function(){return this._gradientYMin}),H$o(0,H$a,"gradientYMax",function(){return this._gradientYMax}),H$o(0,H$a,"gradientZMin",function(){return this._gradientZMin}),H$o(0,H$a,"gradientZMax",function(){return this._gradientZMax}),H$h.createByConstant=function(H$a){var H$b=new H$h;return H$b._type=0,H$b._constant=H$a,H$b},H$h.createByGradient=function(H$a,H$b,H$c){var H$d=new H$h;return H$d._type=1,H$d._gradientX=H$a,H$d._gradientY=H$b,H$d._gradientZ=H$c,H$d},H$h.createByRandomTwoConstant=function(H$a,H$b){var H$c=new H$h;return H$c._type=2,H$c._constantMin=H$a,H$c._constantMax=H$b,H$c},H$h.createByRandomTwoGradient=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g=new H$h;return H$g._type=3,H$g._gradientXMin=H$a,H$g._gradientXMax=H$b,H$g._gradientYMin=H$c,H$g._gradientYMax=H$d,H$g._gradientZMin=H$e,H$g._gradientZMax=H$f,H$g},H$h}(),H$M=(function(){function H$a(H$a){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=H$a}H$n(H$a,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var H$b=H$a.prototype;H$v.imps(H$b,{"laya.d3.core.IClone":!0}),H$b.cloneTo=function(H$a){var H$b=H$a;this._angularVelocity.cloneTo(H$b._angularVelocity),H$b.enbale=this.enbale},H$b.clone=function(){var H$a;switch(this._angularVelocity.type){case 0:H$a=this._angularVelocity.separateAxes?H$I.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):H$I.createByConstant(this._angularVelocity.constant);break;case 1:H$a=this._angularVelocity.separateAxes?H$I.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):H$I.createByGradient(this._angularVelocity.gradient.clone());break;case 2:H$a=this._angularVelocity.separateAxes?H$I.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):H$I.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:H$a=this._angularVelocity.separateAxes?H$I.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):H$I.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var H$b=new this.constructor(H$a);return H$b.enbale=this.enbale,H$b},H$o(0,H$b,"angularVelocity",function(){return this._angularVelocity})}(),function(){function H$a(){this.enable=!1,this.randomDirection=!1}H$n(H$a,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.core.IClone":!0}),H$b._getShapeBoundBox=function(H$a){throw new Error("BaseShape: must override it.")},H$b._getSpeedBoundBox=function(H$a){throw new Error("BaseShape: must override it.")},H$b.generatePositionAndDirection=function(H$a,H$b,H$c,H$d){throw new Error("BaseShape: must override it.")},H$b._calculateProceduralBounds=function(H$a,H$b,H$c){this._getShapeBoundBox(H$a);var H$d=H$a.min,H$e=H$a.max;H$gb.multiply(H$d,H$b,H$d),H$gb.multiply(H$e,H$b,H$e);var H$f=new H$Xa(new H$gb,new H$gb);this.randomDirection?(H$f.min=new H$gb(-1,-1,-1),H$f.max=new H$gb(1,1,1)):this._getSpeedBoundBox(H$f);var H$g=new H$Xa(new H$gb,new H$gb),H$h=H$g.min,H$i=H$g.max;H$gb.scale(H$f.min,H$c.y,H$h),H$gb.scale(H$f.max,H$c.y,H$i),H$gb.add(H$a.min,H$h,H$h),H$gb.add(H$a.max,H$i,H$i),H$gb.min(H$a.min,H$h,H$a.min),H$gb.max(H$a.max,H$h,H$a.max);var H$j=new H$Xa(new H$gb,new H$gb),H$k=H$j.min,H$l=H$j.max;H$gb.scale(H$f.min,H$c.x,H$k),H$gb.scale(H$f.max,H$c.x,H$l),H$gb.min(H$j.min,H$l,H$h),H$gb.max(H$j.min,H$l,H$i),H$gb.min(H$a.min,H$h,H$a.min),H$gb.max(H$a.max,H$h,H$a.max)},H$b.cloneTo=function(H$a){H$a.enable=this.enable},H$b.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$a}()),H$R=function(){function H$f(){}return H$n(H$f,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),H$f._randomPointUnitArcCircle=function(H$a,H$b,H$c){var H$d=H$b.elements,H$e=NaN;H$e=H$c?H$c.getFloat()*H$a:Math.random()*H$a,H$d[0]=Math.cos(H$e),H$d[1]=Math.sin(H$e)},H$f._randomPointInsideUnitArcCircle=function(H$a,H$b,H$c){var H$d=H$b.elements;H$f._randomPointUnitArcCircle(H$a,H$b,H$c);var H$e=NaN;H$e=H$c?Math.pow(H$c.getFloat(),.5):Math.pow(Math.random(),.5),H$d[0]=H$d[0]*H$e,H$d[1]=H$d[1]*H$e},H$f._randomPointUnitCircle=function(H$a,H$b){var H$c=H$a.elements,H$d=NaN;H$d=H$b?H$b.getFloat()*Math.PI*2:Math.random()*Math.PI*2,H$c[0]=Math.cos(H$d),H$c[1]=Math.sin(H$d)},H$f._randomPointInsideUnitCircle=function(H$a,H$b){var H$c=H$a.elements;H$f._randomPointUnitCircle(H$a);var H$d=NaN;H$d=H$b?Math.pow(H$b.getFloat(),.5):Math.pow(Math.random(),.5),H$c[0]=H$c[0]*H$d,H$c[1]=H$c[1]*H$d},H$f._randomPointUnitSphere=function(H$a,H$b){var H$c=H$a.elements,H$d=NaN,H$e=NaN;H$e=H$b?(H$d=H$c[2]=2*H$b.getFloat()-1,H$b.getFloat()*Math.PI*2):(H$d=H$c[2]=2*Math.random()-1,Math.random()*Math.PI*2);var H$f=Math.sqrt(1-H$d*H$d);H$c[0]=H$f*Math.cos(H$e),H$c[1]=H$f*Math.sin(H$e)},H$f._randomPointInsideUnitSphere=function(H$a,H$b){var H$c=H$a.elements;H$f._randomPointUnitSphere(H$a);var H$d=NaN;H$d=H$b?Math.pow(H$b.getFloat(),1/3):Math.pow(Math.random(),1/3),H$c[0]=H$c[0]*H$d,H$c[1]=H$c[1]*H$d,H$c[2]=H$c[2]*H$d},H$f._randomPointInsideHalfUnitBox=function(H$a,H$b){var H$c=H$a.elements;H$b?(H$c[0]=H$b.getFloat()-.5,H$c[1]=H$b.getFloat()-.5,H$c[2]=H$b.getFloat()-.5):(H$c[0]=Math.random()-.5,H$c[1]=Math.random()-.5,H$c[2]=Math.random()-.5)},H$f}(),H$S=(function(){function H$a(H$a){this._size=null,this.enbale=!1,this._size=H$a}H$n(H$a,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var H$b=H$a.prototype;H$v.imps(H$b,{"laya.d3.core.IClone":!0}),H$b.cloneTo=function(H$a){var H$b=H$a;this._size.cloneTo(H$b._size),H$b.enbale=this.enbale},H$b.clone=function(){var H$a;switch(this._size.type){case 0:H$a=this._size.separateAxes?H$K.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):H$K.createByGradient(this._size.gradient.clone());break;case 1:H$a=this._size.separateAxes?H$K.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):H$K.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:H$a=this._size.separateAxes?H$K.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):H$K.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var H$b=new this.constructor(H$a);return H$b.enbale=this.enbale,H$b},H$o(0,H$b,"size",function(){return this._size})}(),function(){function H$d(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}H$n(H$d,"laya.d3.core.particleShuriKen.module.StartFrame");var H$a=H$d.prototype;return H$v.imps(H$a,{"laya.d3.core.IClone":!0}),H$a.cloneTo=function(H$a){var H$b=H$a;H$b._type=this._type,H$b._constant=this._constant,H$b._constantMin=this._constantMin,H$b._constantMax=this._constantMax},H$a.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$o(0,H$a,"constant",function(){return this._constant}),H$o(0,H$a,"type",function(){return this._type}),H$o(0,H$a,"constantMin",function(){return this._constantMin}),H$o(0,H$a,"constantMax",function(){return this._constantMax}),H$d.createByConstant=function(H$a){var H$b=new H$d;return H$b._type=0,H$b._constant=H$a,H$b},H$d.createByRandomTwoConstant=function(H$a,H$b){var H$c=new H$d;return H$c._type=1,H$c._constantMin=H$a,H$c._constantMax=H$b,H$c},H$d}()),H$T=(function(){function H$a(H$a,H$b){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new H$fb(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=H$a,this._startFrame=H$b}H$n(H$a,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var H$b=H$a.prototype;H$v.imps(H$b,{"laya.d3.core.IClone":!0}),H$b.cloneTo=function(H$a){var H$b=H$a;this.tiles.cloneTo(H$b.tiles),H$b.type=this.type,H$b.randomRow=this.randomRow,this._frame.cloneTo(H$b._frame),this._startFrame.cloneTo(H$b._startFrame),H$b.cycles=this.cycles,H$b.enableUVChannels=this.enableUVChannels,H$b.enable=this.enable},H$b.clone=function(){var H$a,H$b;switch(this._frame.type){case 0:H$a=H$H.createByConstant(this._frame.constant);break;case 1:H$a=H$H.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:H$a=H$H.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:H$a=H$H.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:H$b=H$S.createByConstant(this._startFrame.constant);break;case 1:H$b=H$S.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var H$c=new this.constructor(H$a,H$b);return this.tiles.cloneTo(H$c.tiles),H$c.type=this.type,H$c.randomRow=this.randomRow,H$c.cycles=this.cycles,H$c.enableUVChannels=this.enableUVChannels,H$c.enable=this.enable,H$c},H$o(0,H$b,"frame",function(){return this._frame}),H$o(0,H$b,"startFrame",function(){return this._startFrame})}(),function(){function H$a(H$a){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=H$a}H$n(H$a,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var H$b=H$a.prototype;H$v.imps(H$b,{"laya.d3.core.IClone":!0}),H$b.cloneTo=function(H$a){var H$b=H$a;this._velocity.cloneTo(H$b._velocity),H$b.enbale=this.enbale,H$b.space=this.space},H$b.clone=function(){var H$a;switch(this._velocity.type){case 0:H$a=H$L.createByConstant(this._velocity.constant.clone());break;case 1:H$a=H$L.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:H$a=H$L.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:H$a=H$L.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var H$b=new this.constructor(H$a);return H$b.enbale=this.enbale,H$b.space=this.space,H$b},H$o(0,H$b,"velocity",function(){return this._velocity})}(),function(){function H$a(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new H$mb,this._vb=H$Mb.create(H$a._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=H$Lb.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=H$Jb.nameKey.getID("LINE"),this._shaderCompile=H$yb._preCompileShader[this._sharderNameID]}H$n(H$a,"laya.d3.core.PhasorSpriter3D");var H$b=H$a.prototype;return H$b.line=function(H$a,H$b,H$c,H$d){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(H$a.x,H$a.y,H$a.z,H$b.x,H$b.y,H$b.z,H$b.w),this.addVertex(H$c.x,H$c.y,H$c.z,H$d.x,H$d.y,H$d.z,H$d.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},H$b.circle=function(H$a,H$b,H$c,H$d,H$e,H$f){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*H$b,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/H$b,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*H$a,Math.cos(this._tempNumver0)*H$a,0,H$c,H$d,H$e,H$f),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},H$b.plane=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=H$d/2,this._tempNumver1=H$e/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(H$a-this._tempNumver0,H$b+this._tempNumver1,H$c,H$f,H$g,H$h,H$i),this.addVertex(H$a+this._tempNumver0,H$b+this._tempNumver1,H$c,H$f,H$g,H$h,H$i),this.addVertex(H$a-this._tempNumver0,H$b-this._tempNumver1,H$c,H$f,H$g,H$h,H$i),this.addVertex(H$a+this._tempNumver0,H$b-this._tempNumver1,H$c,H$f,H$g,H$h,H$i),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},H$b.box=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=H$d/2,this._tempNumver1=H$e/2,this._tempNumver2=H$f/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(H$a-this._tempNumver0,H$b+this._tempNumver1,H$c+this._tempNumver2,H$g,H$h,H$i,H$j),this.addVertex(H$a+this._tempNumver0,H$b+this._tempNumver1,H$c+this._tempNumver2,H$g,H$h,H$i,H$j),this.addVertex(H$a-this._tempNumver0,H$b-this._tempNumver1,H$c+this._tempNumver2,H$g,H$h,H$i,H$j),this.addVertex(H$a+this._tempNumver0,H$b-this._tempNumver1,H$c+this._tempNumver2,H$g,H$h,H$i,H$j),this.addVertex(H$a+this._tempNumver0,H$b+this._tempNumver1,H$c-this._tempNumver2,H$g,H$h,H$i,H$j),this.addVertex(H$a-this._tempNumver0,H$b+this._tempNumver1,H$c-this._tempNumver2,H$g,H$h,H$i,H$j),this.addVertex(H$a+this._tempNumver0,H$b-this._tempNumver1,H$c-this._tempNumver2,H$g,H$h,H$i,H$j),this.addVertex(H$a-this._tempNumver0,H$b-this._tempNumver1,H$c-this._tempNumver2,H$g,H$h,H$i,H$j),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},H$b.cone=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*H$c+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*H$c>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/H$c,this.addVertexIndex(0,H$b,0,H$d,H$e,H$f,H$g,this._tempUint0),this.addVertexIndex(0,0,0,H$d,H$e,H$f,H$g,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<H$c;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(H$a*this._tempNumver2,0,H$a*this._tempNumver3,H$d,H$e,H$f,H$g,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==H$c-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(H$a*this._tempNumver2,0,H$a*this._tempNumver3,H$d,H$e,H$f,H$g,this._tempUint0+(this._tempInt0+H$c)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==H$c-1?this.addIndexes(this._tempUint1+H$c+2):this.addIndexes(this._tempUint1+this._tempInt0+H$c+1),this.addIndexes(this._tempUint1+this._tempInt0+H$c),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},H$b.boundingBoxLine=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(H$a,H$e,H$f,H$g,H$h,H$i,H$j),this.addVertex(H$d,H$e,H$f,H$g,H$h,H$i,H$j),this.addVertex(H$a,H$b,H$f,H$g,H$h,H$i,H$j),this.addVertex(H$d,H$b,H$f,H$g,H$h,H$i,H$j),this.addVertex(H$d,H$e,H$c,H$g,H$h,H$i,H$j),this.addVertex(H$a,H$e,H$c,H$g,H$h,H$i,H$j),this.addVertex(H$d,H$b,H$c,H$g,H$h,H$i,H$j),this.addVertex(H$a,H$b,H$c,H$g,H$h,H$i,H$j),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},H$b.addVertex=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=H$a,this._vbData[this._posInVBData+1]=H$b,this._vbData[this._posInVBData+2]=H$c,this._vbData[this._posInVBData+3]=H$d,this._vbData[this._posInVBData+4]=H$e,this._vbData[this._posInVBData+5]=H$f,this._vbData[this._posInVBData+6]=H$g,this._posInVBData+=this._floatSizePerVer,this},H$b.addVertexIndex=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){return this._hasBegun||this.addVertexIndexException(),this._vbData[H$h]=H$a,this._vbData[H$h+1]=H$b,this._vbData[H$h+2]=H$c,this._vbData[H$h+3]=H$d,this._vbData[H$h+4]=H$e,this._vbData[H$h+5]=H$f,this._vbData[H$h+6]=H$g,(H$h+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=H$h),this},H$b.addIndexes=function(H$a){var H$b=arguments;this._hasBegun||this.addVertexIndexException();for(var H$c=0;H$c<H$b.length;H$c++)this._ibData[this._posInIBData]=H$b[H$c],this._posInIBData++;return this},H$b.begin=function(H$a,H$b){return this._hasBegun&&this.beginException0(),1!==H$a&&4!==H$a&&this.beginException1(),this._primitiveType=H$a,this._camera=H$b,this._hasBegun=!0,this},H$b.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},H$b.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(H$a._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),H$y.drawCall++,H$D.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},H$b.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},H$b.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},H$b.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},H$b.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},H$b.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},H$b.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(28,[new H$ga(0,"vector3",0),new H$ga(12,"vector4",1)])}]),H$a}()),H$U=function(){function H$a(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++H$a._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new H$mb}H$n(H$a,"laya.d3.core.render.RenderElement");var H$b=H$a.prototype;return H$b.getDynamicBatchBakedVertexs=function(H$a){for(var H$b=this._renderObj._getVertexBuffer(H$a),H$c=H$b.getData().slice(),H$d=H$b.vertexDeclaration,H$e=H$d.getVertexElementByUsage(0).offset/4,H$f=H$d.getVertexElementByUsage(3).offset/4,H$g=this._sprite3D.transform,H$h=H$g.worldMatrix,H$i=H$g.rotation,H$j=H$d.vertexStride/4,H$k=0,H$l=H$c.length;H$k<H$l;H$k+=H$j){var H$m=H$k+H$e,H$n=H$k+H$f;H$qb.transformVector3ArrayToVector3ArrayCoordinate(H$c,H$m,H$h,H$c,H$m),H$qb.transformVector3ArrayByQuat(H$c,H$n,H$i,H$c,H$n)}return H$c},H$b.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},H$b._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},H$o(0,H$b,"id",function(){return this._id}),H$o(0,H$b,"renderObj",function(){return this._renderObj},function(H$a){this._renderObj!==H$a&&(this._renderObj=H$a)}),H$a._uniqueIDCounter=0,H$a}(),H$V=function(){function H$b(H$a){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++H$b._uniqueIDCounter,this._needSort=!1,this._scene=H$a,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}H$n(H$b,"laya.d3.core.render.RenderQueue");var H$a=H$b.prototype;return H$a._sortOpaqueFunc=function(H$a,H$b){if(H$a._render&&H$b._render){var H$c=H$a._material.renderQueue-H$b._material.renderQueue;return 0==H$c?H$a._render._distanceForSort-H$b._render._distanceForSort:H$c}return 0},H$a._sortAlphaFunc=function(H$a,H$b){if(H$a._render&&H$b._render){var H$c=H$a._material.renderQueue-H$b._material.renderQueue;return 0==H$c?H$b._render._distanceForSort-H$a._render._distanceForSort:H$c}return 0},H$a._begainRenderElement=function(H$a,H$b,H$c){return!!H$b._beforeRender(H$a)},H$a._sortAlpha=function(H$a){H$b._cameraPosition=H$a,this._finalElements.sort(this._sortAlphaFunc)},H$a._sortOpaque=function(H$a){H$b._cameraPosition=H$a,this._finalElements.sort(this._sortOpaqueFunc)},H$a._preRender=function(H$a){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},H$a._render=function(H$a,H$b){for(var H$c,H$d,H$e,H$f,H$g,H$h,H$i=H$y.loopCount,H$j=this._scene,H$k=H$a.camera,H$l=(H$k.id,!1),H$m=0,H$n=this._finalElements.length;H$m<H$n;H$m++){var H$o,H$p,H$q,H$r=this._finalElements[H$m];if(null!=H$r._onPreRenderFunction&&H$r._onPreRenderFunction.call(H$r._sprite3D,H$a),0===H$r._type){if(H$a.owner=H$q=H$r._sprite3D,H$a.renderElement=H$r,H$q._preRenderUpdateComponents(H$a),H$o=H$r.renderObj,H$p=H$r._material,this._begainRenderElement(H$a,H$o,H$p)){if(H$c=H$o._getVertexBuffers(),!(H$e=(H$d=H$o._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[H$d.id]){this._errorRecord[H$d.id]=1;var H$s="vertexBuffer:"+("("+H$d._destroyed+","+H$d._released+","+H$d._referenceCount+","+H$d._buffer+")")+", material:"+(H$p?H$p.__className+"("+H$p._destroyed+","+H$p._released+")":"null")+", owner:"+(H$q?H$q.__className+"("+H$q._destroyed+","+H$q._activeInHierarchy+","+H$q._displayedInStage+")":"null")+", renderObj:"+(H$o?H$o.__className+"("+H$o._destroyed+","+H$o._released+","+H$o._referenceCount+")":"")+", parent:, url:"+(H$q?H$q.url:"")+", disposeStack:"+H$d.disposeStack;H$v.recordError("报错：unknown vertexDeclaration  "+H$s)}continue}if(H$l=(H$f=H$a._shader=H$p._getShader(H$j._shaderDefineValue,H$e.shaderDefineValue,H$q._shaderDefineValue)).bind()||H$i!==H$f._uploadLoopCount,H$c){if(H$f._uploadVertexBuffer!==H$c||H$l){for(var H$t=0;H$t<H$c.length;H$t++){var H$u=H$c[H$t];H$f.uploadAttributesX(H$u.vertexDeclaration.shaderValues.data,H$u)}H$f._uploadVertexBuffer=H$c}}else(H$f._uploadVertexBuffer!==H$d||H$l)&&(H$f.uploadAttributes(H$e.shaderValues.data,null),H$f._uploadVertexBuffer=H$d);(H$f._uploadScene!==H$j||H$l)&&(H$f.uploadSceneUniforms(H$j._shaderValues.data),H$f._uploadScene=H$j),(H$k!==H$f._uploadCamera||H$f._uploadSprite3D!==H$q||H$l)&&(H$f.uploadSpriteUniforms(H$q._shaderValues.data),H$f._uploadSprite3D=H$q),(H$k!==H$f._uploadCamera||H$l)&&(H$f.uploadCameraUniforms(H$k._shaderValues.data),H$f._uploadCamera=H$k),(H$f._uploadMaterial!==H$p||H$l)&&(H$p._upload(),H$f._uploadMaterial=H$p),H$g!==H$p?(H$p._setRenderStateBlendDepth(),H$p._setRenderStateFrontFace(H$b,H$q.transform),H$g=H$p,H$h=H$q):H$h!==H$q&&(H$p._setRenderStateFrontFace(H$b,H$q.transform),H$h=H$q),H$o._render(H$a),H$f._uploadLoopCount=H$i}H$q._postRenderUpdateComponents(H$a)}else if(2===H$r._type){H$r.renderObj;H$a.owner=H$q=H$r._sprite3D,H$a.renderElement=H$r,H$a._batchIndexStart=H$r._tempBatchIndexStart,H$a._batchIndexEnd=H$r._tempBatchIndexEnd,H$o=H$r.renderObj,H$p=H$r._material,this._begainRenderElement(H$a,H$o,H$p)&&(H$e=(H$d=H$o._getVertexBuffer(0)).vertexDeclaration,H$l=(H$f=H$a._shader=H$p._getShader(H$j._shaderDefineValue,H$e.shaderDefineValue,H$q._shaderDefineValue)).bind()||H$i!==H$f._uploadLoopCount,(H$f._uploadVertexBuffer!==H$d||H$l)&&(H$f.uploadAttributes(H$e.shaderValues.data,null),H$f._uploadVertexBuffer=H$d),(H$f._uploadScene!==H$j||H$l)&&(H$f.uploadSceneUniforms(H$j._shaderValues.data),H$f._uploadScene=H$j),(H$k!==H$f._uploadCamera||H$f._uploadSprite3D!==H$q||H$l)&&(H$f.uploadSpriteUniforms(H$q._shaderValues.data),H$f._uploadSprite3D=H$q),(H$k!==H$f._uploadCamera||H$l)&&(H$f.uploadCameraUniforms(H$k._shaderValues.data),H$f._uploadCamera=H$k),(H$f._uploadMaterial!==H$p||H$l)&&(H$p._upload(),H$f._uploadMaterial=H$p),H$g!==H$p?(H$p._setRenderStateBlendDepth(),H$p._setRenderStateFrontFace(H$b,H$q.transform),H$g=H$p,H$h=H$q):H$h!==H$q&&(H$p._setRenderStateFrontFace(H$b,H$q.transform),H$h=H$q),H$o._render(H$a),H$f._uploadLoopCount=H$i)}}},H$a._renderShadow=function(H$a,H$b){for(var H$c,H$d,H$e,H$f,H$g,H$h=H$y.loopCount,H$i=this._scene,H$j=H$a.camera,H$k=!1,H$l=0,H$m=this._finalElements.length;H$l<H$m;H$l++){var H$n,H$o,H$p,H$q=this._finalElements[H$l];0===H$q._type&&(H$a.owner=H$p=H$q._sprite3D,H$b||H$p._projectionViewWorldUpdateCamera===H$j&&H$p._projectionViewWorldUpdateLoopCount===H$y.loopCount||(H$p._render._renderUpdate(H$a._projectionViewMatrix),H$p._projectionViewWorldUpdateLoopCount=H$y.loopCount,H$p._projectionViewWorldUpdateCamera=H$j),H$a.renderElement=H$q,H$p._preRenderUpdateComponents(H$a),H$n=H$q.renderObj,H$o=H$q._material,this._begainRenderElement(H$a,H$n,null)&&(H$d=(H$c=H$n._getVertexBuffer(0)).vertexDeclaration,H$k=(H$e=H$a._shader=H$o._getShader(H$i._shaderDefineValue,H$d.shaderDefineValue,H$p._shaderDefineValue)).bind()||H$h!==H$e._uploadLoopCount,(H$e._uploadVertexBuffer!==H$c||H$k)&&(H$e.uploadAttributes(H$d.shaderValues.data,null),H$e._uploadVertexBuffer=H$c),(H$j!==H$e._uploadCamera||H$e._uploadSprite3D!==H$p||H$k)&&(H$e.uploadSpriteUniforms(H$p._shaderValues.data),H$e._uploadSprite3D=H$p),(H$j!==H$e._uploadCamera||H$k)&&(H$e.uploadCameraUniforms(H$j._shaderValues.data),H$e._uploadCamera=H$j),(H$e._uploadMaterial!==H$o||H$k)&&(H$o._upload(),H$e._uploadMaterial=H$o),H$e._uploadRenderElement,H$f!==H$o?(H$o._setRenderStateFrontFace(!1,H$p.transform),H$f=H$o,H$g=H$p):H$g!==H$p&&(H$o._setRenderStateFrontFace(!1,H$p.transform),H$g=H$p),H$n._render(H$a),H$e._uploadLoopCount=H$h),H$p._postRenderUpdateComponents(H$a))}},H$a._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},H$a._addRenderElement=function(H$a){this._renderElements.push(H$a),this._needSort=!0},H$a._addDynamicBatchElement=function(H$a){this._dynamicBatchCombineRenderElements.push(H$a)},H$o(0,H$a,"id",function(){return this._id}),H$b._uniqueIDCounter=0,H$b._cameraPosition=null,H$b}(),H$W=function(){function H$a(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return H$n(H$a,"laya.d3.core.render.RenderState"),H$a.clientWidth=0,H$a.clientHeight=0,H$a}(),H$X=function(){function H$g(H$a,H$b){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new H$Za(new H$gb,0),this._corners=[new H$gb,new H$gb,new H$gb,new H$gb,new H$gb,new H$gb,new H$gb,new H$gb],this._boundingBoxCenter=new H$gb,this._children=H$d(8),this._objects=[],this._tempBoundBoxCorners=[new H$gb,new H$gb,new H$gb,new H$gb,new H$gb,new H$gb,new H$gb,new H$gb],this._scene=H$a,this._currentDepth=H$b}H$n(H$g,"laya.d3.core.scene.OctreeNode");var H$a=H$g.prototype;return H$v.imps(H$a,{"laya.d3.core.scene.ITreeNode":!0}),H$a.init=function(H$a,H$b){var H$c=new H$gb,H$d=new H$gb;H$gb.scale(H$b,-.5,H$c),H$gb.scale(H$b,.5,H$d),H$gb.add(H$c,H$a,H$c),H$gb.add(H$d,H$a,H$d),this.exactBox=new H$Xa(H$c,H$d),this.relaxBox=new H$Xa(H$c,H$d)},H$a.addTreeNode=function(H$a){1===Collision.boxContainsBox(this._relaxBox,H$a.boundingBox)?this.addNodeDown(H$a,0):this.addObject(H$a)},H$a.addChild=function(H$a){var H$b=this._children[H$a];if(null==H$b){H$b=new H$g(this._scene,this._currentDepth+1),(this._children[H$a]=H$b)._parent=this,H$gb.subtract(this._exactBox.max,this._exactBox.min,H$g.tempSize),H$gb.multiply(H$g.tempSize,H$g._octreeSplit[H$a],H$g.tempCenter),H$gb.add(this._exactBox.min,H$g.tempCenter,H$g.tempCenter),H$gb.scale(H$g.tempSize,.25,H$g.tempSize);var H$c=new H$gb,H$d=new H$gb;H$gb.subtract(H$g.tempCenter,H$g.tempSize,H$c),H$gb.add(H$g.tempCenter,H$g.tempSize,H$d),H$b.exactBox=new H$Xa(H$c,H$d),H$gb.scale(H$g.tempSize,H$g.relax,H$g.tempSize);var H$e=new H$gb,H$f=new H$gb;H$gb.subtract(H$g.tempCenter,H$g.tempSize,H$e),H$gb.add(H$g.tempCenter,H$g.tempSize,H$f),H$b.relaxBox=new H$Xa(H$e,H$f)}return H$b},H$a.addObject=function(H$a){(H$a._treeNode=this)._objects.push(H$a)},H$a.removeObject=function(H$a){if(H$a._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var H$b=this._objects.indexOf(H$a);return-1!==H$b&&(this._objects.splice(H$b,1),!0)},H$a.clearObject=function(){this._objects.length=0},H$a.addNodeUp=function(H$a,H$b){this._parent&&1!==Collision.boxContainsBox(this._exactBox,H$a.boundingBox)?this._parent.addNodeUp(H$a,H$b-1):this.addNodeDown(H$a,H$b)},H$a.addNodeDown=function(H$a,H$b){if(H$b<this._scene.treeLevel){var H$c=this.inChildIndex(H$a.boundingBoxCenter),H$d=this.addChild(H$c);1===Collision.boxContainsBox(H$d._relaxBox,H$a.boundingBox)?H$d.addNodeDown(H$a,++H$b):this.addObject(H$a)}else this.addObject(H$a)},H$a.inChildIndex=function(H$a){return 4*(H$a.z<this._boundingBoxCenter.z?0:1)+2*(H$a.y<this._boundingBoxCenter.y?0:1)+(H$a.x<this._boundingBoxCenter.x?0:1)},H$a.updateObject=function(H$a){1===Collision.boxContainsBox(this._relaxBox,H$a.boundingBox)?(this.removeObject(H$a),H$a._treeNode=null,this.addNodeDown(H$a,this._currentDepth)):this._parent&&(this.removeObject(H$a),H$a._treeNode=null,this._parent.addNodeUp(H$a,this._currentDepth-1))},H$a.cullingObjects=function(H$a,H$b,H$c,H$d,H$e){var H$f,H$g=0,H$h=0,H$i=0,H$j=this._scene._dynamicBatchManager;for(H$g=0,H$f=this._objects.length;H$g<H$f;H$g++){var H$k=this._objects[H$g];if(H$G.isVisible(H$k._owner.layer.mask)&&H$k.enable){if(H$b&&(H$y.treeSpriteCollision+=1,0===H$a.containsBoundSphere(H$k.boundingSphere)))continue;H$k._renderUpdate(H$e),H$k._distanceForSort=H$gb.distance(H$k.boundingSphere.center,H$d)+H$k.sortingFudge;var H$l=H$k._renderElements;for(H$h=0,H$i=H$l.length;H$h<H$i;H$h++){var H$m=H$l[H$h],H$n=H$m._staticBatch;if(H$n&&H$n._material===H$m._material)H$n._addBatchRenderElement(H$m);else{var H$o=H$m.renderObj;H$o.triangleCount<10&&1===H$o._vertexBufferCount&&H$o._getIndexBuffer()&&H$m._material.renderQueue<2&&H$m._canDynamicBatch&&!H$k._owner.isStatic?H$j._addPrepareRenderElement(H$m):this._scene.getRenderQueue(H$m._material.renderQueue)._addRenderElement(H$m)}}}}for(H$g=0;H$g<8;H$g++){var H$p=this._children[H$g];if(null!=H$p){var H$q=H$b;if(H$b){var H$r=H$a.containsBoundBox(H$p._relaxBox);if(H$y.treeNodeCollision+=1,0===H$r)continue;H$q=2===H$r}H$p.cullingObjects(H$a,H$q,H$c,H$d,H$e)}}},H$a.cullingShadowObjects=function(H$a,H$b,H$c,H$d,H$e){var H$f,H$g=0,H$h=0,H$i=0;this._scene._dynamicBatchManager;for(H$g=0,H$f=this._objects.length;H$g<H$f;H$g++){var H$j=this._objects[H$g];if(H$j.castShadow&&H$G.isVisible(H$j._owner.layer.mask)&&H$j.enable){if(H$c&&0===H$a[0].containsBoundSphere(H$j.boundingSphere))continue;for(var H$k=1,H$l=H$a.length;H$k<H$l;H$k++){var H$m=H$b[H$k-1];if(0!==H$a[H$k].containsBoundSphere(H$j.boundingSphere)){var H$n=H$j._renderElements;for(H$h=0,H$i=H$n.length;H$h<H$i;H$h++)H$m._addRenderElement(H$n[H$h])}}}}for(H$g=0;H$g<8;H$g++){var H$o=this._children[H$g];if(null!=H$o){var H$p=H$c;if(H$c){var H$q=H$a[0].containsBoundBox(H$o._relaxBox);if(0===H$q)continue;H$p=2===H$q}H$o.cullingShadowObjects(H$a,H$b,H$p,H$d,H$e)}}},H$a.cullingShadowObjectsOnePSSM=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g,H$h=H$b[0],H$i=0,H$j=0,H$k=0;for(H$i=0,H$g=this._objects.length;H$i<H$g;H$i++){var H$l=this._objects[H$i];if(H$l.castShadow&&H$G.isVisible(H$l._owner.layer.mask)&&H$l.enable){if(H$d&&0===H$a.containsBoundSphere(H$l.boundingSphere))continue;H$l._renderUpdate(H$c);var H$m=H$l._renderElements;for(H$j=0,H$k=H$m.length;H$j<H$k;H$j++)H$h._addRenderElement(H$m[H$j])}}for(H$i=0;H$i<8;H$i++){var H$n=this._children[H$i];if(null!=H$n){var H$o=H$d;if(H$d){var H$p=H$a.containsBoundBox(H$n._relaxBox);if(0===H$p)continue;H$o=2===H$p}H$n.cullingShadowObjectsOnePSSM(H$a,H$b,H$c,H$o,H$e,H$f)}}},H$a.renderBoudingBox=function(H$a){this._renderBoudingBox(H$a);for(var H$b=0;H$b<8;++H$b){var H$c=this._children[H$b];H$c&&H$c.renderBoudingBox(H$a)}},H$a.buildAllChild=function(H$a){if(H$a<this._scene.treeLevel)for(var H$b=0;H$b<8;H$b++){this.addChild(H$b).buildAllChild(H$a+1)}},H$a._renderBoudingBox=function(H$a){},H$o(0,H$a,"exactBox",function(){return this._exactBox},function(H$a){this._exactBox=H$a,H$gb.add(H$a.min,H$a.max,this._boundingBoxCenter),H$gb.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),H$o(0,H$a,"relaxBox",function(){return this._relaxBox},function(H$a){(this._relaxBox=H$a).getCorners(this._corners),H$Za.createfromPoints(this._corners,this._boundingSphere)}),H$g.debugMode=!1,H$g.relax=1.15,H$g.CHILDNUM=8,H$l(H$g,["tempVector0",function(){return this.tempVector0=new H$gb},"tempSize",function(){return this.tempSize=new H$gb},"tempCenter",function(){return this.tempCenter=new H$gb},"_octreeSplit",function(){return this._octreeSplit=[new H$gb(.25,.25,.25),new H$gb(.75,.25,.25),new H$gb(.25,.75,.25),new H$gb(.75,.75,.25),new H$gb(.25,.25,.75),new H$gb(.75,.25,.75),new H$gb(.25,.75,.75),new H$gb(.75,.75,.75)]}]),H$g}(),H$Y=(function(){function H$a(){}H$n(H$a,"laya.d3.core.scene.SceneManager")}(),function(){function H$a(H$a,H$b,H$c,H$d){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===H$a&&(H$a=1),void 0===H$b&&(H$b=1),void 0===H$c&&(H$c=1),void 0===H$d&&(H$d=1),this._r=H$a,this._g=H$b,this._b=H$c,this._a=H$d}return H$n(H$a,"laya.d3.core.trail.module.Color",null,"Color$1"),H$a.prototype.cloneTo=function(H$a){H$a._r=this._r,H$a._g=this._g,H$a._b=this._b,H$a._a=this._a},H$l(H$a,["RED",function(){return this.RED=new H$a(1,0,0,1)},"GREEN",function(){return this.GREEN=new H$a(0,1,0,1)},"BLUE",function(){return this.BLUE=new H$a(0,0,1,1)},"CYAN",function(){return this.CYAN=new H$a(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new H$a(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new H$a(1,0,1,1)},"GRAY",function(){return this.GRAY=new H$a(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new H$a(1,1,1,1)},"BLACK",function(){return this.BLACK=new H$a(0,0,0,1)}]),H$a}()),H$Z=(function(){function H$a(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}H$n(H$a,"laya.d3.core.trail.module.Gradient");var H$b=H$a.prototype;H$b.setKeys=function(H$a,H$b){var H$c,H$d;this._colorKeys=H$a;for(var H$e=this.index=0;H$e<H$a.length;H$e++){var H$f=(H$c=H$a[H$e]).color;this._colorKeyData[this.index++]=H$f._r,this._colorKeyData[this.index++]=H$f._g,this._colorKeyData[this.index++]=H$f._b,this._colorKeyData[this.index++]=H$c.time}this._alphaKeys=H$b;for(var H$g=this.index=0;H$g<H$b.length;H$g++)H$d=H$b[H$g],this._alphaKeyData[this.index++]=H$d.alpha,this._alphaKeyData[this.index++]=H$d.time},H$b.cloneTo=function(H$a){var H$b=0,H$c=0,H$d=this.colorKeys,H$e=[];for(H$b=0,H$c=H$d.length;H$b<H$c;H$b++){var H$f=new H$$;H$d[H$b].cloneTo(H$f),H$e.push(H$f)}var H$g=this.alphaKeys,H$h=[];for(H$b=0,H$c=H$g.length;H$b<H$c;H$b++){var H$i=new H$Z;H$g[H$b].cloneTo(H$i),H$h.push(H$i)}H$a.setKeys(H$e,H$h)},H$o(0,H$b,"mode",function(){return this._mode},function(H$a){this._mode=H$a}),H$o(0,H$b,"colorKeys",function(){return this._colorKeys},function(H$a){this._colorKeys=H$a;for(var H$b=this.index=0;H$b<H$a.length;H$b++){var H$c=H$a[H$b],H$d=H$c.color;this._colorKeyData[this.index++]=H$d._r,this._colorKeyData[this.index++]=H$d._g,this._colorKeyData[this.index++]=H$d._b,this._colorKeyData[this.index++]=H$c.time}}),H$o(0,H$b,"alphaKeys",function(){return this._alphaKeys},function(H$a){this._alphaKeys=H$a;for(var H$b=this.index=0;H$b<H$a.length;H$b++){var H$c=H$a[H$b];this._alphaKeyData[this.index++]=H$c.alpha,this._alphaKeyData[this.index++]=H$c.time}})}(),function(){function H$a(H$a,H$b){this._alpha=NaN,this._time=NaN,void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=0),this._alpha=H$a,this._time=H$b}H$n(H$a,"laya.d3.core.trail.module.GradientAlphaKey");var H$b=H$a.prototype;return H$b.cloneTo=function(H$a){H$a.alpha=this.alpha,H$a.time=this.time},H$o(0,H$b,"alpha",function(){return this._alpha},function(H$a){this._alpha=H$a}),H$o(0,H$b,"time",function(){return this._time},function(H$a){this._time=H$a}),H$a}()),H$$=function(){function H$a(H$a,H$b){this._color=null,this._time=NaN,void 0===H$b&&(H$b=0),this._color=H$a||new H$Y,this._time=H$b}H$n(H$a,"laya.d3.core.trail.module.GradientColorKey");var H$b=H$a.prototype;return H$b.cloneTo=function(H$a){this.color.cloneTo(H$a.color),H$a.time=this.time},H$o(0,H$b,"color",function(){return this._color},function(H$a){this._color=H$a}),H$o(0,H$b,"time",function(){return this._time},function(H$a){this._time=H$a}),H$a}(),H$_=(function(){function H$a(){}H$n(H$a,"laya.d3.core.trail.module.GradientMode"),H$a.Blend=0,H$a.Fixed=1}(),function(){function H$a(){}H$n(H$a,"laya.d3.core.trail.module.TextureMode"),H$a.Stretch=0,H$a.Tile=1}(),function(){function H$a(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}H$n(H$a,"laya.d3.core.trail.module.TrailKeyFrame"),H$a.prototype.cloneTo=function(H$a){H$a.time=this.time,H$a.inTangent=this.inTangent,H$a.outTangent=this.outTangent,H$a.value=this.value}}(),function(){function H$b(H$a){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new H$gb,this._curPosition=new H$gb,this._delVector3=new H$gb,this._lastFixedVertexPosition=new H$gb,this._pointAtoBVector3=new H$gb,this._pointA=new H$gb,this._pointB=new H$gb,this._owner=H$a,this._id=H$b.renderElementCount++,0==this._id?H$a._owner.transform.position.cloneTo(this._lastPosition):H$a._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new H$Mb(H$_.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new H$Mb(H$_.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}H$n(H$b,"laya.d3.core.trail.TrailRenderElement");var H$a=H$b.prototype;H$v.imps(H$a,{"laya.d3.core.render.IRenderable":!0}),H$a._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},H$a._addTrailByFirstPosition=function(H$a,H$b){H$gb.subtract(H$b,H$a,this._delVector3),H$gb.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),H$gb.normalize(this._pointAtoBVector3,this._pointAtoBVector3),H$gb.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(H$a),H$a.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},H$a._addTrailByNextPosition=function(H$a){H$gb.subtract(H$a,this._lastFixedVertexPosition,this._delVector3),H$gb.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),H$gb.normalize(this._pointAtoBVector3,this._pointAtoBVector3),H$gb.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=H$gb.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=H$$a.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(H$a),H$a.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(H$a),this._virtualVerticesCount=2)},H$a._updateVerticesByPosition=function(H$a){this._pointe=H$a.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},H$a._updateVertexBuffer2=function(){var H$a,H$b=0,H$c=0,H$d=0;for(H$d=0,H$a=(this._verticesCount+this._virtualVerticesCount)/2;H$d<H$a;H$d++)H$c=0==this._owner.textureMode?(this._VerticesToTailLength[H$d]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[H$d],this._vertices2[H$b++]=1-H$c,this._vertices2[H$b++]=1-H$c;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},H$a._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},H$a._updateDisappear=function(){var H$a,H$b=0;for(H$b=this._curDisappearIndex,H$a=(this._verticesCount+this._virtualVerticesCount)/2;H$b<H$a;H$b++)this._owner._curtime-this._everyGroupVertexBirthTime[H$b]>=this._owner.time+H$$a.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},H$a._beforeRender=function(H$a){return this._camera=H$a.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),H$gb.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},H$a._render=function(H$a){this._isDead||(H$D.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),H$y.drawCall++,H$y.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},H$a._getVertexBuffer=function(H$a){return void 0===H$a&&(H$a=0),0===H$a?this._vertexBuffer1:1===H$a?this._vertexBuffer2:null},H$a._getVertexBuffers=function(){return this._vertexBuffers},H$a._getIndexBuffer=function(){return null},H$a.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},H$a._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},H$o(0,H$a,"_vertexBufferCount",function(){return this._vertexBuffers.length}),H$o(0,H$a,"triangleCount",function(){return 0}),H$b.renderElementCount=0}(),function(){function H$a(){}H$n(H$a,"laya.d3.core.trail.VertexTrail");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration1}),H$o(1,H$a,"vertexDeclaration1",function(){return H$a._vertexDeclaration1}),H$o(1,H$a,"vertexDeclaration2",function(){return H$a._vertexDeclaration2}),H$l(H$a,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new H$fa(32,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",41),new H$ga(24,"single",33),new H$ga(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new H$fa(4,[new H$ga(0,"single",38)])}]),H$a}()),H$aa=function(){function H$u(H$a){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=H$a}H$n(H$u,"laya.d3.graphics.DynamicBatch");var H$a=H$u.prototype;return H$v.imps(H$a,{"laya.d3.core.render.IRenderable":!0}),H$a._getVertexBuffer=function(H$a){return void 0===H$a&&(H$a=0),0===H$a?this._vertexBuffer:null},H$a._getIndexBuffer=function(){return this._indexBuffer},H$a._getCombineRenderElementFromPool=function(H$a,H$b,H$c){var H$d=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return H$d||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=H$d=new H$U,H$d._sprite3D=new H$Vb),H$d._sprite3D._render._renderUpdate(H$c),H$d},H$a._getRenderElement=function(H$a,H$b,H$c){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*H$u.maxVertexCount),this._indexDatas=new Uint16Array(H$u.maxIndexCount),this._vertexBuffer=H$Mb.create(this._vertexDeclaration,H$u.maxVertexCount,35048),this._indexBuffer=H$Lb.create("ushort",H$u.maxIndexCount,35048));for(var H$d=this._merageElements.length=0,H$e=0,H$f=0,H$g=this._combineRenderElements.length;H$f<H$g;H$f++){var H$h=this._combineRenderElements[H$f],H$i=H$h.getDynamicBatchBakedVertexs(0),H$j=H$h.getBakedIndices(),H$k=H$h._sprite3D.transform._isFrontFaceInvert,H$l=H$d/(this._vertexDeclaration.vertexStride/4),H$m=H$e,H$n=H$m+H$j.length;H$h._tempBatchIndexStart=H$m,H$h._tempBatchIndexEnd=H$n,this._indexDatas.set(H$j,H$e);var H$o=0;if(H$k)for(H$o=H$m;H$o<H$n;H$o+=3){this._indexDatas[H$o]=H$l+this._indexDatas[H$o];var H$p=this._indexDatas[H$o+1],H$q=this._indexDatas[H$o+2];this._indexDatas[H$o+1]=H$l+H$q,this._indexDatas[H$o+2]=H$l+H$p}else for(H$o=H$m;H$o<H$n;H$o+=3)this._indexDatas[H$o]=H$l+this._indexDatas[H$o],this._indexDatas[H$o+1]=H$l+this._indexDatas[H$o+1],this._indexDatas[H$o+2]=H$l+this._indexDatas[H$o+2];H$e+=H$j.length,this._vertexDatas.set(H$i,H$d),H$d+=H$i.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),H$f=this._combineRenderElementPoolIndex=0,H$g=this._materials.length;H$f<H$g;H$f++){var H$r=this._getCombineRenderElementFromPool(H$a,H$b,H$c);H$r._type=2,H$r._staticBatch=null;var H$s=(H$r.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[H$f]]._tempBatchIndexStart,H$t=H$f+1===this._materialToRenderElementsOffsets.length?H$e:this._combineRenderElements[this._materialToRenderElementsOffsets[H$f+1]]._tempBatchIndexStart;H$r._tempBatchIndexStart=H$s,H$r._tempBatchIndexEnd=H$t,H$r._material=this._materials[H$f],this._merageElements.push(H$r)}},H$a._addCombineRenderObjTest=function(H$a){var H$b=H$a.renderObj,H$c=this._currentCombineIndexCount+H$b._getIndexBuffer().indexCount,H$d=this._currentCombineVertexCount+H$b._getVertexBuffer().vertexCount;return!(H$u.maxVertexCount<H$d||H$u.maxIndexCount<H$c)},H$a._addCombineRenderObj=function(H$a){var H$b=H$a.renderObj;this._combineRenderElements.push(H$a),this._currentCombineIndexCount=this._currentCombineIndexCount+H$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+H$b._getVertexBuffer().vertexCount},H$a._addCombineMaterial=function(H$a){this._materials.push(H$a)},H$a._addMaterialToRenderElementOffset=function(H$a){this._materialToRenderElementsOffsets.push(H$a)},H$a._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},H$a._addToRenderQueue=function(H$a,H$b,H$c,H$d){this._getRenderElement(H$b,H$c,H$d);for(var H$e=0,H$f=this._materials.length;H$e<H$f;H$e++)H$a.getRenderQueue(this._materials[H$e].renderQueue)._addDynamicBatchElement(this._merageElements[H$e])},H$a._beforeRender=function(H$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},H$a._render=function(H$a){var H$b=H$a._batchIndexEnd-H$a._batchIndexStart;H$D.mainContext.drawElements(4,H$b,5123,2*H$a._batchIndexStart),H$y.drawCall++,H$y.trianglesFaces+=H$b/3},H$a._getVertexBuffers=function(){return null},H$o(0,H$a,"_vertexBufferCount",function(){return 1}),H$o(0,H$a,"triangleCount",function(){return this._indexBuffer.indexCount/3}),H$o(0,H$a,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),H$u.maxVertexCount=2e4,H$u.maxIndexCount=4e4,H$u.maxCombineTriangleCount=10,H$u}(),H$ba=function(){function H$u(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}H$n(H$u,"laya.d3.graphics.DynamicBatchManager");var H$a=H$u.prototype;return H$a.getDynamicBatch=function(H$a,H$b){var H$c,H$d=H$a.id.toString()+H$b;return this._dynamicBatches[H$d]?H$c=this._dynamicBatches[H$d]:this._dynamicBatches[H$d]=H$c=new H$aa(H$a),H$c},H$a._garbageCollection=function(){for(var H$a in this._dynamicBatches)0===this._dynamicBatches[H$a].combineRenderElementsCount&&delete this._dynamicBatches[H$a]},H$a._addPrepareRenderElement=function(H$a){this._prepareDynamicBatchCombineElements.push(H$a)},H$a._finishCombineDynamicBatch=function(H$a){var H$b,H$c,H$d;this._prepareDynamicBatchCombineElements.sort(H$u._sortPrepareDynamicBatch);for(var H$e,H$f,H$g,H$h,H$i,H$j=-1,H$k=!0,H$l=0,H$m=-1,H$n=0,H$o=this._prepareDynamicBatchCombineElements.length;H$n<H$o;H$n++){var H$p=(H$f=this._prepareDynamicBatchCombineElements[H$n]).renderObj._getVertexBuffer(0).vertexDeclaration,H$q=H$c!==H$p;H$q&&(H$l=0,H$c=H$p);var H$r=H$l!==H$j;if(H$r&&(H$j=H$l),(H$q||H$r)&&(H$g=this.getDynamicBatch(H$p,H$l),H$b=null),H$k)if(H$g._addCombineRenderObjTest(H$f)){if(H$b!==(H$e=H$f._material))H$h&&(H$a.getRenderQueue(H$i._material.renderQueue)._addRenderElement(H$i),H$i=H$h=null,H$m=-1),H$h=H$e,H$m=H$g.combineRenderElementsCount,H$i=H$f,H$b=H$e;else if(H$h){var H$s=H$i.renderObj,H$t=H$f.renderObj;H$s._getVertexBuffer().vertexCount+H$t._getVertexBuffer().vertexCount>H$aa.maxVertexCount||H$s._getIndexBuffer().indexCount+H$t._getIndexBuffer().indexCount>H$aa.maxIndexCount?(H$a.getRenderQueue(H$i._material.renderQueue)._addRenderElement(H$i),H$h=H$e,H$m=H$g.combineRenderElementsCount,H$i=H$f):(H$g._addCombineMaterial(H$h),H$g._addMaterialToRenderElementOffset(H$m),H$g._addCombineRenderObj(H$i),H$i=H$h=null,H$m=-1,H$g._addCombineRenderObj(H$f))}else H$g._addCombineRenderObj(H$f);H$k=!0}else H$h&&(H$a.getRenderQueue(H$i._material.renderQueue)._addRenderElement(H$i),H$i=H$h=null,H$m=-1),H$l++,H$k=!1;else H$d=this._prepareDynamicBatchCombineElements[H$n-1],H$g._addMaterialToRenderElementOffset(H$g.combineRenderElementsCount),H$b=H$d._material,H$g._addCombineMaterial(H$b),H$g._addCombineRenderObj(H$d),H$k=!0,H$b!==(H$e=H$f._material)?(H$h=H$e,H$m=H$g.combineRenderElementsCount,H$i=H$f):H$g._addCombineRenderObj(H$f),H$b=H$e}H$h&&(H$a.getRenderQueue(H$i._material.renderQueue)._addRenderElement(H$i),H$i=H$h=null,H$m=-1),this._prepareDynamicBatchCombineElements.length=0},H$a._clearRenderElements=function(){for(var H$a in this._dynamicBatches)this._dynamicBatches[H$a]._clearRenderElements()},H$a._addToRenderQueue=function(H$a,H$b,H$c,H$d){for(var H$e in this._dynamicBatches){var H$f=this._dynamicBatches[H$e];0<H$f.combineRenderElementsCount&&H$f._addToRenderQueue(H$a,H$b,H$c,H$d)}},H$a.dispose=function(){this._dynamicBatches=null},H$u._sortPrepareDynamicBatch=function(H$a,H$b){return H$a._mainSortID-H$b._mainSortID},H$u}(),H$ca=function(){function H$a(){}return H$n(H$a,"laya.d3.graphics.FrustumCulling"),H$a.renderShadowObjectCulling=function(H$a,H$b,H$c,H$d,H$e){var H$f=0,H$g=0,H$h=0,H$i=0;for(H$f=0,H$h=H$c.length;H$f<H$h;H$f++){var H$j=H$c[H$f];H$j&&H$j._clearRenderElements()}var H$k,H$l,H$m,H$n=H$a._cullingRenders;if(1<H$e){for(H$f=0,H$h=H$a._cullingRendersLength;H$f<H$h;H$f++)if((H$k=H$n[H$f]).castShadow&&H$G.isVisible(H$k._owner.layer.mask)&&H$k.enable)for(var H$o=1,H$p=H$b.length;H$o<H$p;H$o++)if(H$l=H$c[H$o-1],0!==H$b[H$o].containsBoundSphere(H$k.boundingSphere))for(H$g=0,H$i=(H$m=H$k._renderElements).length;H$g<H$i;H$g++)H$l._addRenderElement(H$m[H$g])}else for(H$f=0,H$h=H$a._cullingRendersLength;H$f<H$h;H$f++)if((H$k=H$n[H$f]).castShadow&&H$G.isVisible(H$k._owner.layer.mask)&&H$k.enable&&0!==H$b[0].containsBoundSphere(H$k.boundingSphere))for(H$k._renderUpdate(H$d),H$l=H$c[0],H$g=0,H$i=(H$m=H$k._renderElements).length;H$g<H$i;H$g++)H$l._addRenderElement(H$m[H$g])},H$a.renderShadowObjectCullingOctree=function(H$a,H$b,H$c,H$d,H$e){for(var H$f=0,H$g=H$c.length;H$f<H$g;H$f++){var H$h=H$c[H$f];H$h&&H$h._clearRenderElements()}1<H$e?H$a.treeRoot.cullingShadowObjects(H$b,H$c,!0,0,H$a):H$a.treeRoot.cullingShadowObjectsOnePSSM(H$b[0],H$c,H$d,!0,0,H$a)},H$a.renderObjectCulling=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g=0,H$h=0,H$i=0,H$j=0,H$k=H$b._quenes,H$l=H$b._dynamicBatchManager,H$m=H$b._cullingRenders;for(H$g=0,H$h=H$k.length;H$g<H$h;H$g++){var H$n=H$k[H$g];H$n&&H$n._clearRenderElements()}var H$o=H$da._staticBatchManagers;for(H$g=0,H$h=H$o.length;H$g<H$h;H$g++)H$o[H$g]._clearRenderElements();H$l._clearRenderElements();var H$p=H$c.transform.position;for(H$g=0,H$h=H$b._cullingRendersLength;H$g<H$h;H$g++){var H$q=H$m[H$g];if(H$G.isVisible(H$q._owner.layer.mask)&&H$q.enable&&0!==H$a.containsBoundSphere(H$q.boundingSphere)&&H$q._renderUpdate(H$f)){H$q._distanceForSort=H$gb.distance(H$q.boundingSphere.center,H$p)+H$q.sortingFudge;var H$r=H$q._renderElements;for(H$i=0,H$j=H$r.length;H$i<H$j;H$i++){var H$s=H$r[H$i],H$t=H$s._staticBatch;if(H$t&&H$t._material===H$s._material)H$t._addBatchRenderElement(H$s);else{var H$u=H$s.renderObj;H$u.triangleCount<10&&1===H$u._vertexBufferCount&&H$u._getIndexBuffer()&&H$s._material.renderQueue<2&&H$s._canDynamicBatch&&!H$q._owner.isStatic?H$l._addPrepareRenderElement(H$s):H$b.getRenderQueue(H$s._material.renderQueue)._addRenderElement(H$s)}}}}for(H$g=0,H$h=H$o.length;H$g<H$h;H$g++)H$o[H$g]._addToRenderQueue(H$b,H$d,H$e,H$f);H$l._finishCombineDynamicBatch(H$b),H$l._addToRenderQueue(H$b,H$d,H$e,H$f)},H$a.renderObjectCullingOctree=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g=0,H$h=0,H$i=H$b._quenes,H$j=H$b._dynamicBatchManager;for(H$g=0,H$h=H$i.length;H$g<H$h;H$g++){var H$k=H$i[H$g];H$k&&H$k._clearRenderElements()}var H$l=H$da._staticBatchManagers;for(H$g=0,H$h=H$l.length;H$g<H$h;H$g++)H$l[H$g]._clearRenderElements();for(H$j._clearRenderElements(),H$b._cullingRenders.length=0,H$b.treeRoot.cullingObjects(H$a,!0,0,H$c.transform.position,H$f),H$g=0,H$h=H$l.length;H$g<H$h;H$g++)H$l[H$g]._addToRenderQueue(H$b,H$d,H$e,H$f);H$j._finishCombineDynamicBatch(H$b),H$j._addToRenderQueue(H$b,H$d,H$e,H$f)},H$a.renderObjectCullingNoBoundFrustum=function(H$a,H$b,H$c,H$d,H$e){var H$f=0,H$g=0,H$h=0,H$i=0,H$j=H$a._quenes,H$k=H$a._dynamicBatchManager,H$l=H$a._cullingRenders;for(H$f=0,H$g=H$j.length;H$f<H$g;H$f++){var H$m=H$j[H$f];H$m&&H$m._clearRenderElements()}var H$n=H$da._staticBatchManagers;for(H$f=0,H$g=H$n.length;H$f<H$g;H$f++)H$n[H$f]._clearRenderElements();H$k._clearRenderElements();var H$o=H$b.transform.position;for(H$f=0,H$g=H$a._cullingRendersLength;H$f<H$g;H$f++){var H$p=H$l[H$f];if(H$G.isVisible(H$p._owner.layer.mask)&&H$p.enable){H$p._renderUpdate(H$e),H$p._distanceForSort=H$gb.distance(H$p.boundingSphere.center,H$o)+H$p.sortingFudge;var H$q=H$p._renderElements;for(H$h=0,H$i=H$q.length;H$h<H$i;H$h++){var H$r=H$q[H$h],H$s=H$r._staticBatch;if(H$s&&H$s._material===H$r._material)H$s._addBatchRenderElement(H$r);else{var H$t=H$r.renderObj;H$t.triangleCount<10&&1===H$t._vertexBufferCount&&H$t._getIndexBuffer()&&H$r._material.renderQueue<2&&H$r._canDynamicBatch&&!H$p._owner.isStatic?H$k._addPrepareRenderElement(H$r):H$a.getRenderQueue(H$r._material.renderQueue)._addRenderElement(H$r)}}}}for(H$f=0,H$g=H$n.length;H$f<H$g;H$f++)H$n[H$f]._addToRenderQueue(H$a,H$c,H$d,H$e);H$k._finishCombineDynamicBatch(H$a),H$k._addToRenderQueue(H$a,H$c,H$d,H$e)},H$a}(),H$da=function(){function H$f(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}H$n(H$f,"laya.d3.graphics.StaticBatchManager");var H$a=H$f.prototype;return H$a._finishInit=function(){for(var H$a in this._staticBatches)this._staticBatches[H$a]._finishInit();this._initBatchRenderElements.length=0},H$a._initStaticBatchs=function(H$a){throw new Error("StaticBatchManager:must override this function.")},H$a._addInitBatchSprite=function(H$a){for(var H$b=H$a._render._renderElements,H$c=0,H$d=H$b.length;H$c<H$d;H$c++)this._initBatchRenderElements.push(H$b[H$c])},H$a._clearRenderElements=function(){for(var H$a in this._staticBatches)this._staticBatches[H$a]._clearRenderElements()},H$a._garbageCollection=function(H$a){var H$b=H$a._staticBatch,H$c=H$b._initBatchRenderElements,H$d=H$c.indexOf(H$a);H$c.splice(H$d,1),0===H$c.length&&(H$b.dispose(),delete this._staticBatches[H$b._key])},H$a._addToRenderQueue=function(H$a,H$b,H$c,H$d){for(var H$e in this._staticBatches){var H$f=this._staticBatches[H$e];0<H$f._batchRenderElements.length&&H$f._updateToRenderQueue(H$a,H$d)}},H$a.dispose=function(){this._staticBatches=null},H$f._addToStaticBatchQueue=function(H$a){H$a instanceof laya.d3.core.RenderableSprite3D&&H$a._addToInitStaticBatchManager();for(var H$b=0,H$c=H$a.numChildren;H$b<H$c;H$b++)H$f._addToStaticBatchQueue(H$a._childs[H$b])},H$f.combine=function(H$a,H$b){var H$c,H$d=0,H$e=0;if(H$b)for(H$d=0,H$e=H$b.length;H$d<H$e;H$d++){H$b[H$d]._addToInitStaticBatchManager()}else H$a&&H$f._addToStaticBatchQueue(H$a);for(H$d=0,H$e=H$f._staticBatchManagers.length;H$d<H$e;H$d++)(H$c=H$f._staticBatchManagers[H$d])._initStaticBatchs(H$a),H$c._finishInit()},H$f._staticBatchManagers=[],H$f}(),H$ea=function(){function H$a(H$a,H$b,H$c){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=H$a,this._manager=H$b,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=H$c}H$n(H$a,"laya.d3.graphics.StaticBatch");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),H$b._binarySearch=function(H$a){for(var H$b=0,H$c=this._batchRenderElements.length-1,H$d=0;H$b<=H$c;)H$d=Math.floor((H$b+H$c)/2),this._compareBatchRenderElement(this._batchRenderElements[H$d],H$a)?H$c=H$d-1:H$b=H$d+1;return H$b},H$b._compareBatchRenderElement=function(H$a,H$b){throw new Error("StaticBatch:must override this function.")},H$b._getVertexDecLightMap=function(H$a){return H$a===H$La.vertexDeclaration?H$Ga.vertexDeclaration:H$a===H$Ka.vertexDeclaration?H$Fa.vertexDeclaration:H$a===H$za.vertexDeclaration?H$ua.vertexDeclaration:H$a===H$Pa.vertexDeclaration?null:H$a===H$pa.vertexDeclaration?H$qa.vertexDeclaration:H$a===H$Na.vertexDeclaration?H$Ia.vertexDeclaration:H$a===H$Da.vertexDeclaration?H$Ea.vertexDeclaration:H$a===H$Ma.vertexDeclaration?H$Ha.vertexDeclaration:H$a===H$Ka.vertexDeclaration?H$Fa.vertexDeclaration:H$a===H$Aa.vertexDeclaration?H$va.vertexDeclaration:H$a===H$Pa.vertexDeclaration?null:H$a===H$pa.vertexDeclaration?H$qa.vertexDeclaration:H$a===H$Oa.vertexDeclaration?H$Ja.vertexDeclaration:H$a===H$Da.vertexDeclaration?H$Ea.vertexDeclaration:H$a},H$b._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},H$b._addBatchRenderElement=function(H$a){this._batchRenderElements.splice(this._binarySearch(H$a),0,H$a)},H$b._updateToRenderQueue=function(H$a,H$b){this._combineRenderElementPoolIndex=0,this._getRenderElement(H$a.getRenderQueue(this._material.renderQueue)._renderElements,H$a,H$b)},H$b._getRenderElement=function(H$a,H$b,H$c){throw new Error("StaticBatch:must override this function.")},H$b._finishInit=function(){throw new Error("StaticBatch:must override this function.")},H$b._clearRenderElements=function(){this._batchRenderElements.length=0},H$b.dispose=function(){},H$b._getVertexBuffer=function(H$a){return void 0===H$a&&(H$a=0),null},H$b._getIndexBuffer=function(){return null},H$b._beforeRender=function(H$a){return!0},H$b._render=function(H$a){},H$b._getVertexBuffers=function(){return null},H$o(0,H$b,"_vertexBufferCount",function(){return 1}),H$o(0,H$b,"triangleCount",function(){return 0}),H$a.combine=function(H$a){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),H$da.combine(H$a)},H$a.maxBatchVertexCount=65535,H$a}(),H$fa=function(){function H$g(H$a,H$b){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++H$g._uniqueIDCounter,this._id>H$g.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",H$g.maxVertexDeclaration);this._shaderValues=new H$mb,this._vertexElementsDic={},this._vertexStride=H$a,this._vertexElements=H$b;for(var H$c=0;H$c<H$b.length;H$c++){var H$d=H$b[H$c],H$e=H$d.elementUsage;this._vertexElementsDic[H$e]=H$d;var H$f=[H$g._getTypeSize(H$d.elementFormat)/4,5126,!1,this._vertexStride,H$d.offset];switch(this._shaderValues.setValue(H$e,H$f),H$e){case 1:this._addShaderDefine(H$yb.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(H$yb.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(H$yb.SHADERDEFINE_UV1)}}}H$n(H$g,"laya.d3.graphics.VertexDeclaration");var H$a=H$g.prototype;return H$a._addShaderDefine=function(H$a){this._shaderDefineValue|=H$a},H$a._removeShaderDefine=function(H$a){this._shaderDefineValue&=~H$a},H$a.getVertexElements=function(){return this._vertexElements.slice()},H$a.getVertexElementByUsage=function(H$a){return this._vertexElementsDic[H$a]},H$a.unBinding=function(){},H$o(0,H$a,"shaderDefineValue",function(){return this._shaderDefineValue}),H$o(0,H$a,"id",function(){return this._id}),H$o(0,H$a,"vertexStride",function(){return this._vertexStride}),H$o(0,H$a,"shaderValues",function(){return this._shaderValues}),H$g._getTypeSize=function(H$a){switch(H$a){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},H$g.getVertexStride=function(H$a){for(var H$b=0,H$c=0;H$c<H$a.Length;H$c++){var H$d=H$a[H$c],H$e=H$d.offset+H$g._getTypeSize(H$d.elementFormat);H$b<H$e&&(H$b=H$e)}return H$b},H$g._maxVertexDeclarationBit=1e3,H$g._uniqueIDCounter=1,H$l(H$g,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),H$g}(),H$ga=function(){function H$a(H$a,H$b,H$c){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=H$a,this.elementFormat=H$b,this.elementUsage=H$c}return H$n(H$a,"laya.d3.graphics.VertexElement"),H$a}(),H$ha=(function(){function H$a(){}H$n(H$a,"laya.d3.graphics.VertexElementFormat"),H$a.Single="single",H$a.Vector2="vector2",H$a.Vector3="vector3",H$a.Vector4="vector4",H$a.Color="color",H$a.Byte4="byte4",H$a.Short2="short2",H$a.Short4="short4",H$a.NormalizedShort2="normalizedshort2",H$a.NormalizedShort4="normalizedshort4",H$a.HalfVector2="halfvector2",H$a.HalfVector4="halfvector4"}(),function(){function H$a(){}H$n(H$a,"laya.d3.graphics.VertexElementUsage"),H$a.POSITION0=0,H$a.COLOR0=1,H$a.TEXTURECOORDINATE0=2,H$a.NORMAL0=3,H$a.BINORMAL0=4,H$a.TANGENT0=5,H$a.BLENDINDICES0=6,H$a.BLENDWEIGHT0=7,H$a.DEPTH0=8,H$a.FOG0=9,H$a.POINTSIZE0=10,H$a.SAMPLE0=11,H$a.TESSELLATEFACTOR0=12,H$a.COLOR1=13,H$a.NEXTTEXTURECOORDINATE0=14,H$a.TEXTURECOORDINATE1=15,H$a.NEXTTEXTURECOORDINATE1=16,H$a.CORNERTEXTURECOORDINATE0=17,H$a.VELOCITY0=18,H$a.STARTCOLOR0=19,H$a.STARTSIZE=20,H$a.AGEADDSCALE0=21,H$a.STARTROTATION=22,H$a.ENDCOLOR0=23,H$a.STARTLIFETIME=24,H$a.TIME0=33,H$a.SHAPEPOSITIONSTARTLIFETIME=30,H$a.DIRECTIONTIME=32,H$a.SIZEROTATION0=27,H$a.RADIUS0=28,H$a.RADIAN0=29,H$a.STARTSPEED=31,H$a.RANDOM0=34,H$a.RANDOM1=35,H$a.SIMULATIONWORLDPOSTION=36,H$a.SIMULATIONWORLDROTATION=37,H$a.TEXTURECOORDINATE0X=38,H$a.TEXTURECOORDINATE0X1=39,H$a.TEXTURECOORDINATE0Y=40,H$a.OFFSETVECTOR=41}(),function(){function H$a(H$a,H$b,H$c){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=H$a,this._textureCoordinate0=H$b,this._time=H$c}H$n(H$a,"laya.d3.graphics.VertexGlitter");var H$b=H$a.prototype;H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"textureCoordinate",function(){return this._textureCoordinate0}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"time",function(){return this._time}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(24,[new H$ga(0,"vector3",0),new H$ga(12,"vector2",2),new H$ga(20,"single",33)])}])}(),function(){function H$a(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=H$a,this._position=H$b,this._velocity=H$c,this._startColor=H$d,this._endColor=H$e,this._sizeRotation=H$f,this._radius=H$g,this._radian=H$h,this._ageAddScale=H$i,this._time=H$j}H$n(H$a,"laya.d3.graphics.VertexParticle");var H$b=H$a.prototype;H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"endColor",function(){return this._endColor}),H$o(0,H$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),H$o(0,H$b,"sizeRotation",function(){return this._sizeRotation}),H$o(0,H$b,"velocity",function(){return this._velocity}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"startColor",function(){return this._startColor}),H$o(0,H$b,"radius",function(){return this._radius}),H$o(0,H$b,"radian",function(){return this._radian}),H$o(0,H$b,"ageAddScale",function(){return this._ageAddScale}),H$o(0,H$b,"time",function(){return this._time}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(116,[new H$ga(0,"vector4",17),new H$ga(16,"vector3",0),new H$ga(28,"vector3",18),new H$ga(40,"vector4",19),new H$ga(56,"vector4",23),new H$ga(72,"vector3",27),new H$ga(84,"vector2",28),new H$ga(92,"vector4",29),new H$ga(108,"single",24),new H$ga(112,"single",33)])}])}(),function(){function H$a(H$a){this._position=null,this._position=H$a}H$n(H$a,"laya.d3.graphics.VertexPosition");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(12,[new H$ga(0,"vector3",0)])}]),H$a}()),H$ia=function(){function H$a(H$a,H$b){this._position=null,this._normal=null,this._position=H$a,this._normal=H$b}H$n(H$a,"laya.d3.graphics.VertexPositionNormal");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(24,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3)])}]),H$a}(),H$ja=function(){function H$a(H$a,H$b,H$c){this._position=null,this._normal=null,this._color=null,this._position=H$a,this._normal=H$b,this._color=H$c}H$n(H$a,"laya.d3.graphics.VertexPositionNormalColor");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"color",function(){return this._color}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(40,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector4",1)])}]),H$a}(),H$ka=function(){function H$a(H$a,H$b,H$c,H$d,H$e){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=H$a,this._normal=H$b,this._color=H$c,this._blendIndex=H$d,this._blendWeight=H$e}H$n(H$a,"laya.d3.graphics.VertexPositionNormalColorSkin");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"blendWeight",function(){return this._blendWeight}),H$o(0,H$b,"color",function(){return this._color}),H$o(0,H$b,"blendIndex",function(){return this._blendIndex}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(72,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector4",1),new H$ga(40,"vector4",7),new H$ga(56,"vector4",6)])}]),H$a}(),H$la=function(){function H$a(H$a,H$b,H$c,H$d,H$e,H$f){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$a,this._normal=H$b,this._color=H$c,this._tangent=H$d,this._blendIndex=H$e,this._blendWeight=H$f}H$n(H$a,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"blendWeight",function(){return this._blendWeight}),H$o(0,H$b,"color",function(){return this._color}),H$o(0,H$b,"blendIndex",function(){return this._blendIndex}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(88,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector4",1),new H$ga(40,"vector4",7),new H$ga(56,"vector4",6),new H$ga(72,"vector4",5)])}]),H$a}(),H$ma=function(){function H$a(H$a,H$b,H$c,H$d,H$e,H$f){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$a,this._normal=H$b,this._color=H$c,this._tangent=H$d,this._blendIndex=H$e,this._blendWeight=H$f}H$n(H$a,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"blendWeight",function(){return this._blendWeight}),H$o(0,H$b,"color",function(){return this._color}),H$o(0,H$b,"blendIndex",function(){return this._blendIndex}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(84,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector4",1),new H$ga(40,"vector4",7),new H$ga(56,"vector4",6),new H$ga(72,"vector3",5)])}]),H$a}(),H$na=function(){function H$a(H$a,H$b,H$c,H$d){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=H$a,this._normal=H$b,this._color=H$c,this._tangent=H$d}H$n(H$a,"laya.d3.graphics.VertexPositionNormalColorSTangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"color",function(){return this._color}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(56,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector4",1),new H$ga(40,"vector4",5)])}]),H$a}(),H$oa=function(){function H$a(H$a,H$b,H$c,H$d){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=H$a,this._normal=H$b,this._color=H$c,this._tangent=H$d}H$n(H$a,"laya.d3.graphics.VertexPositionNormalColorTangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"color",function(){return this._color}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(52,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector4",1),new H$ga(40,"vector3",5)])}]),H$a}(),H$pa=function(){function H$a(H$a,H$b,H$c,H$d){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=H$a,this._normal=H$b,this._color=H$c,this._textureCoordinate=H$d}H$n(H$a,"laya.d3.graphics.VertexPositionNormalColorTexture");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"textureCoordinate",function(){return this._textureCoordinate}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"color",function(){return this._color}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(48,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector4",1),new H$ga(40,"vector2",2)])}]),H$a}(),H$qa=function(){function H$a(H$a,H$b,H$c,H$d,H$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=H$a,this._normal=H$b,this._color=H$c,this._textureCoordinate0=H$d,this._textureCoordinate1=H$e}H$n(H$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"color",function(){return this._color}),H$o(0,H$b,"textureCoordinate0",function(){return this._textureCoordinate0}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(0,H$b,"textureCoordinate1",function(){return this._textureCoordinate1}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(56,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector4",1),new H$ga(40,"vector2",2),new H$ga(48,"vector2",15)])}]),H$a}(),H$ra=function(){function H$a(H$a,H$b,H$c,H$d,H$e,H$f,H$g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=H$a,this._normal=H$b,this._color=H$c,this._textureCoordinate0=H$d,this._textureCoordinate1=H$e,this._blendIndex=H$f,this._blendWeight=H$g}H$n(H$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"blendWeight",function(){return this._blendWeight}),H$o(0,H$b,"color",function(){return this._color}),H$o(0,H$b,"textureCoordinate0",function(){return this._textureCoordinate0}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(0,H$b,"textureCoordinate1",function(){return this._textureCoordinate1}),H$o(0,H$b,"blendIndex",function(){return this._blendIndex}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(88,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector4",1),new H$ga(40,"vector2",2),new H$ga(48,"vector2",15),new H$ga(56,"vector4",7),new H$ga(72,"vector4",6)])}]),H$a}(),H$sa=function(){function H$a(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$a,this._normal=H$b,this._color=H$c,this._textureCoordinate0=H$d,this._textureCoordinate1=H$e,this._tangent=H$f,this._blendIndex=H$g,this._blendWeight=H$h}H$n(H$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"blendWeight",function(){return this._blendWeight}),H$o(0,H$b,"color",function(){return this._color}),H$o(0,H$b,"textureCoordinate0",function(){return this._textureCoordinate0}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(0,H$b,"textureCoordinate1",function(){return this._textureCoordinate1}),H$o(0,H$b,"blendIndex",function(){return this._blendIndex}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(104,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector4",1),new H$ga(40,"vector2",2),new H$ga(48,"vector2",15),new H$ga(56,"vector4",7),new H$ga(72,"vector4",6),new H$ga(88,"vector4",5)])}]),H$a}(),H$ta=function(){function H$a(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}H$n(H$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$b.VertexPositionNormalColorTexture0SkinTangent=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){this._position=H$a,this._normal=H$b,this._color=H$c,this._textureCoordinate0=H$d,this._textureCoordinate1=H$e,this._tangent=H$f,this._blendIndex=H$g,this._blendWeight=H$h},H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"blendWeight",function(){return this._blendWeight}),H$o(0,H$b,"color",function(){return this._color}),H$o(0,H$b,"textureCoordinate0",function(){return this._textureCoordinate0}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(0,H$b,"textureCoordinate1",function(){return this._textureCoordinate1}),H$o(0,H$b,"blendIndex",function(){return this._blendIndex}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(100,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector4",1),new H$ga(40,"vector2",2),new H$ga(48,"vector2",15),new H$ga(56,"vector4",7),new H$ga(72,"vector4",6),new H$ga(88,"vector3",5)])}]),H$a}(),H$ua=function(){function H$a(H$a,H$b,H$c,H$d,H$e,H$f){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=H$a,this._normal=H$b,this._color=H$c,this._textureCoordinate0=H$d,this._textureCoordinate1=H$e,this._tangent=H$f}H$n(H$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"color",function(){return this._color}),H$o(0,H$b,"textureCoordinate0",function(){return this._textureCoordinate0}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(0,H$b,"textureCoordinate1",function(){return this._textureCoordinate1}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(72,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector4",1),new H$ga(40,"vector2",2),new H$ga(48,"vector2",15),new H$ga(56,"vector4",5)])}]),H$a}(),H$va=function(){function H$a(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}H$n(H$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$b.VertexPositionNormalColorTexture0Tangent=function(H$a,H$b,H$c,H$d,H$e,H$f){this._position=H$a,this._normal=H$b,this._color=H$c,this._textureCoordinate0=H$d,this._textureCoordinate1=H$e,this._tangent=H$f},H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"color",function(){return this._color}),H$o(0,H$b,"textureCoordinate0",function(){return this._textureCoordinate0}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(0,H$b,"textureCoordinate1",function(){return this._textureCoordinate1}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(68,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector4",1),new H$ga(40,"vector2",2),new H$ga(48,"vector2",15),new H$ga(56,"vector3",5)])}]),H$a}(),H$wa=function(){function H$a(H$a,H$b,H$c,H$d,H$e,H$f){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=H$a,this._normal=H$b,this._color=H$c,this._textureCoordinate=H$d,this._blendIndex=H$e,this._blendWeight=H$f}H$n(H$a,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"textureCoordinate",function(){return this._textureCoordinate}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"blendWeight",function(){return this._blendWeight}),H$o(0,H$b,"color",function(){return this._color}),H$o(0,H$b,"blendIndex",function(){return this._blendIndex}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(80,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector4",1),new H$ga(40,"vector2",2),new H$ga(48,"vector4",7),new H$ga(64,"vector4",6)])}]),H$a}(),H$xa=function(){function H$a(H$a,H$b,H$c,H$d,H$e,H$f,H$g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$a,this._normal=H$b,this._color=H$c,this._textureCoordinate=H$d,this._tangent=H$e,this._blendIndex=H$f,this._blendWeight=H$g}H$n(H$a,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"textureCoordinate",function(){return this._textureCoordinate}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"blendWeight",function(){return this._blendWeight}),H$o(0,H$b,"color",function(){return this._color}),H$o(0,H$b,"blendIndex",function(){return this._blendIndex}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(96,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector4",1),new H$ga(40,"vector2",2),new H$ga(48,"vector4",7),new H$ga(64,"vector4",6),new H$ga(80,"vector4",5)])}]),H$a}(),H$ya=function(){function H$a(H$a,H$b,H$c,H$d,H$e,H$f,H$g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$a,this._normal=H$b,this._color=H$c,this._textureCoordinate=H$d,this._tangent=H$e,this._blendIndex=H$f,this._blendWeight=H$g}H$n(H$a,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"textureCoordinate",function(){return this._textureCoordinate}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"blendWeight",function(){return this._blendWeight}),H$o(0,H$b,"color",function(){return this._color}),H$o(0,H$b,"blendIndex",function(){return this._blendIndex}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(92,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector4",1),new H$ga(40,"vector2",2),new H$ga(48,"vector4",7),new H$ga(64,"vector4",6),new H$ga(80,"vector3",5)])}]),H$a}(),H$za=function(){function H$a(H$a,H$b,H$c,H$d,H$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=H$a,this._normal=H$b,this._color=H$c,this._textureCoordinate=H$d,this._tangent=H$e}H$n(H$a,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"textureCoordinate",function(){return this._textureCoordinate}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"color",function(){return this._color}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(64,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector4",1),new H$ga(40,"vector2",2),new H$ga(48,"vector4",5)])}]),H$a}(),H$Aa=function(){function H$a(H$a,H$b,H$c,H$d,H$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=H$a,this._normal=H$b,this._color=H$c,this._textureCoordinate=H$d,this._tangent=H$e}H$n(H$a,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"textureCoordinate",function(){return this._textureCoordinate}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"color",function(){return this._color}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(60,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector4",1),new H$ga(40,"vector2",2),new H$ga(48,"vector3",5)])}]),H$a}(),H$Ba=function(){function H$a(H$a,H$b,H$c){this._position=null,this._normal=null,this._tangent=null,this._position=H$a,this._normal=H$b,this._tangent=H$c}H$n(H$a,"laya.d3.graphics.VertexPositionNormalSTangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(40,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector4",5)])}]),H$a}(),H$Ca=function(){function H$a(H$a,H$b,H$c){this._position=null,this._normal=null,this._tangent=null,this._position=H$a,this._normal=H$b,this._tangent=H$c}H$n(H$a,"laya.d3.graphics.VertexPositionNormalTangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(36,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector3",5)])}]),H$a}(),H$Da=function(){function H$a(H$a,H$b,H$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=H$a,this._normal=H$b,this._textureCoordinate=H$c}H$n(H$a,"laya.d3.graphics.VertexPositionNormalTexture");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"textureCoordinate",function(){return this._textureCoordinate}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(32,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector2",2)])}]),H$a}(),H$Ea=function(){function H$a(H$a,H$b,H$c,H$d){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=H$a,this._normal=H$b,this._textureCoordinate0=H$c,this._textureCoordinate1=H$d}H$n(H$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"textureCoordinate0",function(){return this._textureCoordinate0}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(0,H$b,"textureCoordinate1",function(){return this._textureCoordinate1}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(40,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector2",2),new H$ga(32,"vector2",15)])}]),H$a}(),H$Fa=function(){function H$a(H$a,H$b,H$c,H$d,H$e,H$f){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=H$a,this._normal=H$b,this._textureCoordinate0=H$c,this._textureCoordinate1=H$d,this._blendIndex=H$e,this._blendWeight=H$f}H$n(H$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"textureCoordinate0",function(){return this._textureCoordinate0}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(0,H$b,"textureCoordinate1",function(){return this._textureCoordinate1}),H$o(0,H$b,"blendIndex",function(){return this._blendIndex}),H$o(0,H$b,"blendWeight",function(){return this._blendWeight}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(72,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector2",2),new H$ga(32,"vector2",15),new H$ga(40,"vector4",7),new H$ga(56,"vector4",6)])}]),H$a}(),H$Ga=function(){function H$a(H$a,H$b,H$c,H$d,H$e,H$f,H$g){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$a,this._normal=H$b,this._textureCoordinate0=H$c,this._textureCoordinate1=H$d,this._tangent=H$e,this._blendIndex=H$f,this._blendWeight=H$g}H$n(H$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"textureCoordinate0",function(){return this._textureCoordinate0}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(0,H$b,"textureCoordinate1",function(){return this._textureCoordinate1}),H$o(0,H$b,"blendIndex",function(){return this._blendIndex}),H$o(0,H$b,"blendWeight",function(){return this._blendWeight}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(88,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector2",2),new H$ga(32,"vector2",15),new H$ga(40,"vector4",7),new H$ga(56,"vector4",6),new H$ga(72,"vector4",5)])}]),H$a}(),H$Ha=function(){function H$a(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}H$n(H$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$b.VertexPositionNormalTexture0SkinTangent=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){this._position=H$a,this._normal=H$b,this._textureCoordinate0=H$c,this._textureCoordinate1=H$d,this._tangent=H$e,this._blendIndex=H$f,this._blendWeight=H$g},H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"textureCoordinate0",function(){return this._textureCoordinate0}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(0,H$b,"textureCoordinate1",function(){return this._textureCoordinate1}),H$o(0,H$b,"blendIndex",function(){return this._blendIndex}),H$o(0,H$b,"blendWeight",function(){return this._blendWeight}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(84,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector2",2),new H$ga(32,"vector2",15),new H$ga(40,"vector4",7),new H$ga(56,"vector4",6),new H$ga(72,"vector3",5)])}]),H$a}(),H$Ia=function(){function H$a(H$a,H$b,H$c,H$d,H$e){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=H$a,this._normal=H$b,this._textureCoordinate0=H$c,this._textureCoordinate1=H$d,this._tangent=H$e}H$n(H$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"textureCoordinate0",function(){return this._textureCoordinate0}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(0,H$b,"textureCoordinate1",function(){return this._textureCoordinate1}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(56,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector2",2),new H$ga(32,"vector2",15),new H$ga(40,"vector4",5)])}]),H$a}(),H$Ja=function(){function H$a(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}H$n(H$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$b.VertexPositionNormalTexture0Tangent=function(H$a,H$b,H$c,H$d,H$e){this._position=H$a,this._normal=H$b,this._textureCoordinate0=H$c,this._textureCoordinate1=H$d,this._tangent=H$e},H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"textureCoordinate0",function(){return this._textureCoordinate0}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(0,H$b,"textureCoordinate1",function(){return this._textureCoordinate1}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(52,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector2",2),new H$ga(32,"vector2",15),new H$ga(40,"vector3",5)])}]),H$a}(),H$Ka=function(){function H$a(H$a,H$b,H$c,H$d,H$e){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=H$a,this._normal=H$b,this._textureCoordinate=H$c,this._blendIndex=H$d,this._blendWeight=H$e}H$n(H$a,"laya.d3.graphics.VertexPositionNormalTextureSkin");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"textureCoordinate",function(){return this._textureCoordinate}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"blendIndex",function(){return this._blendIndex}),H$o(0,H$b,"blendWeight",function(){return this._blendWeight}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(64,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector2",2),new H$ga(32,"vector4",7),new H$ga(48,"vector4",6)])}]),H$a}(),H$La=function(){function H$a(H$a,H$b,H$c,H$d,H$e,H$f){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$a,this._normal=H$b,this._textureCoordinate=H$c,this._tangent=H$d,this._blendIndex=H$e,this._blendWeight=H$f}H$n(H$a,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"textureCoordinate",function(){return this._textureCoordinate}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"blendIndex",function(){return this._blendIndex}),H$o(0,H$b,"blendWeight",function(){return this._blendWeight}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(80,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector2",2),new H$ga(32,"vector4",7),new H$ga(48,"vector4",6),new H$ga(64,"vector4",5)])}]),H$a}(),H$Ma=function(){function H$a(H$a,H$b,H$c,H$d,H$e,H$f){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$a,this._normal=H$b,this._textureCoordinate=H$c,this._tangent=H$d,this._blendIndex=H$e,this._blendWeight=H$f}H$n(H$a,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"textureCoordinate",function(){return this._textureCoordinate}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"blendIndex",function(){return this._blendIndex}),H$o(0,H$b,"blendWeight",function(){return this._blendWeight}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(76,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector2",2),new H$ga(32,"vector4",7),new H$ga(48,"vector4",6),new H$ga(64,"vector3",5)])}]),H$a}(),H$Na=function(){function H$a(H$a,H$b,H$c,H$d){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=H$a,this._normal=H$b,this._textureCoordinate=H$c,this._tangent=H$d}H$n(H$a,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"textureCoordinate",function(){return this._textureCoordinate}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(48,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector2",2),new H$ga(32,"vector4",5)])}]),H$a}(),H$Oa=function(){function H$a(H$a,H$b,H$c,H$d){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=H$a,this._normal=H$b,this._textureCoordinate=H$c,this._tangent=H$d}H$n(H$a,"laya.d3.graphics.VertexPositionNormalTextureTangent");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"textureCoordinate",function(){return this._textureCoordinate}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(44,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector2",2),new H$ga(32,"vector3",5)])}]),H$a}(),H$Pa=function(){function H$a(H$a,H$b,H$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=H$a,this._normal=H$b,this._textureCoordinate=H$c}H$n(H$a,"laya.d3.graphics.VertexPositionNTBTexture");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"textureCoordinate",function(){return this._textureCoordinate}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(56,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector3",5),new H$ga(36,"vector3",4),new H$ga(48,"vector2",2)])}]),H$a}(),H$Qa=function(){function H$a(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=H$a,this._normal=H$b,this._textureCoordinate0=H$d,this._textureCoordinate1=H$e,this._tangent=H$f,H$c=H$c,this._blendIndex=H$g,this._blendWeight=H$h}H$n(H$a,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"tangent",function(){return this._tangent}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"textureCoordinate0",function(){return this._textureCoordinate0}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(0,H$b,"textureCoordinate1",function(){return this._textureCoordinate1}),H$o(0,H$b,"blendIndex",function(){return this._blendIndex}),H$o(0,H$b,"blendWeight",function(){return this._blendWeight}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(96,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector3",5),new H$ga(36,"vector3",4),new H$ga(48,"vector2",2),new H$ga(56,"vector2",15),new H$ga(64,"vector4",7),new H$ga(80,"vector4",6)])}]),H$a}(),H$Ra=function(){function H$a(H$a,H$b,H$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=H$a,this._normal=H$b,this._textureCoordinate=H$c}H$n(H$a,"laya.d3.graphics.VertexPositionNTBTextureSkin");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"textureCoordinate",function(){return this._textureCoordinate}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(88,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector3",5),new H$ga(36,"vector3",4),new H$ga(48,"vector2",2),new H$ga(56,"vector4",7),new H$ga(72,"vector4",6)])}]),H$a}(),H$Sa=(function(){function H$a(H$a,H$b,H$c,H$d){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=H$a,this._normal=H$b,this._textureCoord0=H$c,this._textureCoord1=H$d}H$n(H$a,"laya.d3.graphics.VertexPositionTerrain");var H$b=H$a.prototype;H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"normal",function(){return this._normal}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"textureCoord0",function(){return this._textureCoord0}),H$o(0,H$b,"textureCoord1",function(){return this._textureCoord1}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(40,[new H$ga(0,"vector3",0),new H$ga(12,"vector3",3),new H$ga(24,"vector2",2),new H$ga(32,"vector2",15)])}])}(),function(){function H$a(H$a,H$b){this._position=null,this._textureCoordinate0=null,this._position=H$a,this._textureCoordinate0=H$b}H$n(H$a,"laya.d3.graphics.VertexPositionTexture0");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"position",function(){return this._position}),H$o(0,H$b,"textureCoordinate0",function(){return this._textureCoordinate0}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(20,[new H$ga(0,"vector3",0),new H$ga(12,"vector2",2)])}]),H$a}()),H$Ta=(function(){function H$a(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j,H$k,H$l,H$m,H$n){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=H$a,this._positionStartLifeTime=H$b,this._velocity=H$c,this._startColor=H$d,this._startSize=H$e,this._startRotation0=H$f,this._startRotation1=H$g,this._startRotation2=H$h,this._startLifeTime=H$i,this._time=H$j,this._startSpeed=H$k,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=H$n}H$n(H$a,"laya.d3.graphics.VertexShurikenParticleBillboard");var H$b=H$a.prototype;H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),H$o(0,H$b,"random1",function(){return this._randoms1}),H$o(0,H$b,"startRotation2",function(){return this._startRotation2}),H$o(0,H$b,"positionStartLifeTime",function(){return this._positionStartLifeTime}),H$o(0,H$b,"velocity",function(){return this._velocity}),H$o(0,H$b,"random0",function(){return this._randoms0}),H$o(0,H$b,"startSize",function(){return this._startSize}),H$o(0,H$b,"startColor",function(){return this._startColor}),H$o(0,H$b,"startRotation0",function(){return this._startRotation0}),H$o(0,H$b,"startRotation1",function(){return this._startRotation1}),H$o(0,H$b,"startLifeTime",function(){return this._startLifeTime}),H$o(0,H$b,"time",function(){return this._time}),H$o(0,H$b,"startSpeed",function(){return this._startSpeed}),H$o(0,H$b,"simulationWorldPostion",function(){return this._simulationWorldPostion}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(152,[new H$ga(0,"vector4",17),new H$ga(16,"vector4",30),new H$ga(32,"vector4",32),new H$ga(48,"vector4",19),new H$ga(64,"vector3",20),new H$ga(76,"vector3",22),new H$ga(88,"single",31),new H$ga(92,"vector4",34),new H$ga(108,"vector4",35),new H$ga(124,"vector3",36),new H$ga(136,"vector4",37)])}])}(),function(){function H$a(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j,H$k,H$l,H$m,H$n){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=H$a,this._positionStartLifeTime=H$b,this._velocity=H$c,this._startColor=H$d,this._startSize=H$e,this._startRotation0=H$f,this._startRotation1=H$g,this._startRotation2=H$h,this._startLifeTime=H$i,this._time=H$j,this._startSpeed=H$k,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=H$n}H$n(H$a,"laya.d3.graphics.VertexShurikenParticleMesh");var H$b=H$a.prototype;H$v.imps(H$b,{"laya.d3.graphics.IVertex":!0}),H$o(0,H$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),H$o(0,H$b,"velocity",function(){return this._velocity}),H$o(0,H$b,"position",function(){return this._positionStartLifeTime}),H$o(0,H$b,"random0",function(){return this._randoms0}),H$o(0,H$b,"startSize",function(){return this._startSize}),H$o(0,H$b,"startColor",function(){return this._startColor}),H$o(0,H$b,"startRotation0",function(){return this._startRotation0}),H$o(0,H$b,"startRotation1",function(){return this._startRotation1}),H$o(0,H$b,"random1",function(){return this._randoms1}),H$o(0,H$b,"startRotation2",function(){return this._startRotation2}),H$o(0,H$b,"startLifeTime",function(){return this._startLifeTime}),H$o(0,H$b,"time",function(){return this._time}),H$o(0,H$b,"startSpeed",function(){return this._startSpeed}),H$o(0,H$b,"simulationWorldPostion",function(){return this._simulationWorldPostion}),H$o(0,H$b,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$o(1,H$a,"vertexDeclaration",function(){return H$a._vertexDeclaration}),H$l(H$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$fa(172,[new H$ga(0,"vector3",0),new H$ga(12,"vector4",1),new H$ga(28,"vector2",2),new H$ga(36,"vector4",30),new H$ga(52,"vector4",32),new H$ga(68,"vector4",19),new H$ga(84,"vector3",20),new H$ga(96,"vector3",22),new H$ga(108,"single",31),new H$ga(112,"vector4",34),new H$ga(128,"vector4",35),new H$ga(144,"vector3",36),new H$ga(156,"vector4",37)])}])}(),function(){function H$t(H$a,H$b,H$c,H$d,H$e,H$f){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=H$c,this._materials=H$d,this._subMeshes=H$e,this._materialMap=H$f,this._version=H$b,this._onLoaded(H$a)}H$n(H$t,"laya.d3.loaders.LoadModelV01");var H$a=H$t.prototype;return H$a._onLoaded=function(H$a){this._readData=H$a,this.READ_BLOCK();for(var H$b=0;H$b<this._BLOCK.count;H$b++){var H$c=this._readData.getUint16(),H$d=this._strings[H$c],H$e=this["READ_"+H$d];if(null==H$e)throw new Error("model file err,no this function:"+H$c+" "+H$d);if(!H$e.call(this))break}return this._mesh},H$a.onError=function(){},H$a._readString=function(){return this._strings[this._readData.getUint16()]},H$a.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},H$a.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},H$a.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var H$a=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var H$b=0;H$b<this._STRINGS.size;H$b++)this._strings[H$b]=this._readData.readUTFString();return this._readData.pos=H$a,!0},H$a.READ_MATERIAL=function(){var H$a=this._readData.getUint16(),H$b=(this._readString(),this._readString());return this._materials[H$a]="null"!==H$b?H$r.getRes(this._materialMap[H$b]):new H$Cb,!0},H$a.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var H$a,H$b=this._readData.__getBuffer(),H$c=0,H$d=this._readData.getUint32(),H$e=this._readData.getUint32(),H$f=(new Float32Array(H$b.slice(H$d+this._DATA.offset,H$d+this._DATA.offset+H$e)),this._readData.getUint32()),H$g=this._readData.getUint32(),H$h=new Float32Array(H$b.slice(H$f+this._DATA.offset,H$f+this._DATA.offset+H$g));for(this.mesh._inverseBindPoses=[],H$c=0,H$a=H$h.length;H$c<H$a;H$c+=16){var H$i=new H$ab(H$h[H$c+0],H$h[H$c+1],H$h[H$c+2],H$h[H$c+3],H$h[H$c+4],H$h[H$c+5],H$h[H$c+6],H$h[H$c+7],H$h[H$c+8],H$h[H$c+9],H$h[H$c+10],H$h[H$c+11],H$h[H$c+12],H$h[H$c+13],H$h[H$c+14],H$h[H$c+15]);this.mesh._inverseBindPoses.push(H$i)}break;default:throw new Error("LoadModel:unknown version.")}return!0},H$a.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var H$a=this._readString();this._shaderAttributes=H$a.match(H$t._attrReg);var H$b=this._readData.getUint32(),H$c=this._readData.getUint32(),H$d=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),H$e=this._readData.getUint32(),H$f=this._readData.getUint32(),H$g=this._readData.getUint32(),H$h=this._readData.__getBuffer(),H$i=new H$jb(this._mesh),H$j=this._getVertexDeclaration(),H$k=H$Mb.create(H$j,H$e/H$j.vertexStride,35044,!0),H$l=H$d+this._DATA.offset,H$m=H$h.slice(H$l,H$l+H$e);H$k.setData(new Float32Array(H$m));for(var H$n=(H$i._vertexBuffer=H$k).vertexDeclaration.getVertexElements(),H$o=0;H$o<H$n.length;H$o++)H$i._bufferUsage[H$n[H$o].elementUsage]=H$k;var H$p=H$Lb.create("ushort",H$c/2,35044,!0),H$q=H$b+this._DATA.offset,H$r=H$h.slice(H$q,H$q+H$c);H$p.setData(new Uint16Array(H$r)),H$i._indexBuffer=H$p;var H$s=H$h.slice(H$f+this._DATA.offset,H$f+this._DATA.offset+H$g);return H$i._boneIndicesList[0]=new Uint8Array(H$s),this._subMeshes.push(H$i),!0},H$a.READ_DATAAREA=function(){return!1},H$a._getVertexDeclaration=function(){for(var H$a,H$b=!1,H$c=!1,H$d=!1,H$e=!1,H$f=!1,H$g=!1,H$h=!1,H$i=!1,H$j=!1,H$k=0;H$k<this._shaderAttributes.length;H$k+=8)switch(this._shaderAttributes[H$k]){case"POSITION":H$b=!0;break;case"NORMAL":H$c=!0;break;case"COLOR":H$d=!0;break;case"UV":H$e=!0;break;case"UV1":H$f=!0;break;case"BLENDWEIGHT":H$h=!0;break;case"BLENDINDICES":H$i=!0;break;case"TANGENT":H$g=!0;break;case"BINORMAL":H$j=!0}return H$b&&H$c&&H$d&&H$e&&H$f&&H$h&&H$i&&H$g?H$a=H$ta.vertexDeclaration:H$b&&H$c&&H$d&&H$e&&H$f&&H$h&&H$i?H$a=H$ra.vertexDeclaration:H$b&&H$c&&H$e&&H$f&&H$h&&H$i&&H$g?H$a=H$Ha.vertexDeclaration:H$b&&H$c&&H$e&&H$f&&H$h&&H$i?H$a=H$Fa.vertexDeclaration:H$b&&H$c&&H$d&&H$e&&H$h&&H$i&&H$g?H$a=H$ya.vertexDeclaration:H$b&&H$c&&H$d&&H$e&&H$h&&H$i?H$a=H$wa.vertexDeclaration:H$b&&H$c&&H$g&&H$j&&H$e&&H$h&&H$i?H$a=H$Ra.vertexDeclaration:H$b&&H$c&&H$e&&H$h&&H$i&&H$g?H$a=H$Ma.vertexDeclaration:H$b&&H$c&&H$e&&H$h&&H$i?H$a=H$Ka.vertexDeclaration:H$b&&H$c&&H$d&&H$h&&H$i&&H$g?H$a=H$ma.vertexDeclaration:H$b&&H$c&&H$d&&H$h&&H$i?H$a=H$ka.vertexDeclaration:H$b&&H$c&&H$d&&H$e&&H$f&&H$g?H$a=H$va.vertexDeclaration:H$b&&H$c&&H$d&&H$e&&H$f?H$a=H$qa.vertexDeclaration:H$b&&H$c&&H$e&&H$f&&H$g?H$a=H$Ja.vertexDeclaration:H$b&&H$c&&H$e&&H$f?H$a=H$Ea.vertexDeclaration:H$b&&H$c&&H$d&&H$e&&H$g?H$a=H$Aa.vertexDeclaration:H$b&&H$c&&H$e&&H$g&&H$j?H$a=H$Pa.vertexDeclaration:H$b&&H$c&&H$d&&H$e?H$a=H$pa.vertexDeclaration:H$b&&H$c&&H$e&&H$g?H$a=H$Oa.vertexDeclaration:H$b&&H$c&&H$e?H$a=H$Da.vertexDeclaration:H$b&&H$c&&H$d&&H$g?H$a=H$oa.vertexDeclaration:H$b&&H$c&&H$d&&(H$a=H$ja.vertexDeclaration),H$a},H$o(0,H$a,"mesh",function(){return this._mesh}),H$t._attrReg=new RegExp("(\\w+)|([:,;])","g"),H$t}()),H$Ua=function(){function H$x(){}return H$n(H$x,"laya.d3.loaders.LoadModelV02"),H$x.parse=function(H$a,H$b,H$c,H$d,H$e,H$f){H$x._mesh=H$c,H$x._materials=H$d,H$x._subMeshes=H$e,H$x._materialMap=H$f,H$x._version=H$b,H$x._readData=H$a,H$x.READ_DATA(),H$x.READ_BLOCK(),H$x.READ_STRINGS();for(var H$g=0,H$h=H$x._BLOCK.count;H$g<H$h;H$g++){H$x._readData.pos=H$x._BLOCK.blockStarts[H$g];var H$i=H$x._readData.getUint16(),H$j=H$x._strings[H$i],H$k=H$x["READ_"+H$j];if(null==H$k)throw new Error("model file err,no this function:"+H$i+" "+H$j);H$k.call()}H$x._strings.length=0,H$x._readData=null,H$x._version=null,H$x._mesh=null,H$x._materials=null,H$x._subMeshes=null,H$x._materialMap=null},H$x._readString=function(){return H$x._strings[H$x._readData.getUint16()]},H$x.READ_DATA=function(){H$x._DATA.offset=H$x._readData.getUint32(),H$x._DATA.size=H$x._readData.getUint32()},H$x.READ_BLOCK=function(){for(var H$a=H$x._BLOCK.count=H$x._readData.getUint16(),H$b=H$x._BLOCK.blockStarts=[],H$c=H$x._BLOCK.blockLengths=[],H$d=0;H$d<H$a;H$d++)H$b.push(H$x._readData.getUint32()),H$c.push(H$x._readData.getUint32())},H$x.READ_STRINGS=function(){var H$a=H$x._readData.getUint32(),H$b=H$x._readData.getUint16(),H$c=H$x._readData.pos;H$x._readData.pos=H$a+H$x._DATA.offset;for(var H$d=0;H$d<H$b;H$d++)H$x._strings[H$d]=H$x._readData.readUTFString();H$x._readData.pos=H$c},H$x.READ_MATERIAL=function(){H$x._readString(),H$x._readString();var H$a=H$x._readString();return""!==H$a&&H$x._materials.push(H$r.getRes(H$x._materialMap[H$a])),!0},H$x.READ_MESH=function(){H$x._readString();var H$a,H$b=H$x._readData.__getBuffer(),H$c=0,H$d=H$x._readData.getInt16(),H$e=H$x._DATA.offset;for(H$c=0;H$c<H$d;H$c++){var H$f=H$e+H$x._readData.getUint32(),H$g=H$x._readData.getUint32(),H$h=new Float32Array(H$b.slice(H$f,H$f+H$g)),H$i=H$x._readString().match(H$x._attrReg),H$j=H$x._getVertexDeclaration(H$i),H$k=H$Mb.create(H$j,4*H$h.length/H$j.vertexStride,35044,!0);H$k.setData(H$h),H$x._mesh._vertexBuffers.push(H$k)}var H$l=H$e+H$x._readData.getUint32(),H$m=H$x._readData.getUint32(),H$n=new Uint16Array(H$b.slice(H$l,H$l+H$m)),H$o=H$Lb.create("ushort",H$m/2,35044,!0);H$o.setData(H$n),H$x._mesh._indexBuffer=H$o;var H$p=H$x._mesh._boneNames=[],H$q=H$x._readData.getUint16();for(H$p.length=H$q,H$c=0;H$c<H$q;H$c++)H$p[H$c]=H$x._strings[H$x._readData.getUint16()];var H$r=H$x._readData.getUint32(),H$s=H$x._readData.getUint32(),H$t=(new Float32Array(H$b.slice(H$e+H$r,H$e+H$r+H$s)),H$x._readData.getUint32()),H$u=H$x._readData.getUint32(),H$v=new Float32Array(H$b.slice(H$e+H$t,H$e+H$t+H$u));for(H$x._mesh._inverseBindPoses=[],H$c=0,H$a=H$v.length;H$c<H$a;H$c+=16){var H$w=new H$ab(H$v[H$c+0],H$v[H$c+1],H$v[H$c+2],H$v[H$c+3],H$v[H$c+4],H$v[H$c+5],H$v[H$c+6],H$v[H$c+7],H$v[H$c+8],H$v[H$c+9],H$v[H$c+10],H$v[H$c+11],H$v[H$c+12],H$v[H$c+13],H$v[H$c+14],H$v[H$c+15]);H$x._mesh._inverseBindPoses.push(H$w)}return H$x._mesh._skinnedDatas=new Float32Array(16*H$v.length),!0},H$x.READ_SUBMESH=function(){var H$a=H$x._readData.__getBuffer(),H$b=new H$jb(H$x._mesh),H$c=H$x._readData.getInt16(),H$d=H$x._readData.getUint32(),H$e=H$x._readData.getUint32();H$b._vertexBuffer=H$x._mesh._vertexBuffers[H$c],H$b._vertexStart=H$d,H$b._vertexCount=H$e;var H$f=H$x._readData.getUint32(),H$g=H$x._readData.getUint32(),H$h=H$x._mesh._indexBuffer;H$b._indexBuffer=H$h,H$b._indexStart=H$f,H$b._indexCount=H$g,H$b._indices=new Uint16Array(H$h.getData().buffer,2*H$f,H$g);var H$i=H$x._DATA.offset,H$j=H$b._subIndexBufferStart,H$k=H$b._subIndexBufferCount,H$l=H$b._boneIndicesList,H$m=H$x._readData.getUint16();H$j.length=H$m,H$k.length=H$m,H$l.length=H$m;for(var H$n=0;H$n<H$m;H$n++){H$j[H$n]=H$x._readData.getUint32(),H$k[H$n]=H$x._readData.getUint32();var H$o=H$x._readData.getUint32(),H$p=H$x._readData.getUint32();H$b._boneIndicesList[H$n]=new Uint8Array(H$a.slice(H$i+H$o,H$i+H$o+H$p))}return H$x._subMeshes.push(H$b),!0},H$x._getVertexDeclaration=function(H$a){for(var H$b,H$c=!1,H$d=!1,H$e=!1,H$f=!1,H$g=!1,H$h=!1,H$i=!1,H$j=!1,H$k=!1,H$l=0;H$l<H$a.length;H$l++)switch(H$a[H$l]){case"POSITION":H$c=!0;break;case"NORMAL":H$d=!0;break;case"COLOR":H$e=!0;break;case"UV":H$f=!0;break;case"UV1":H$g=!0;break;case"BLENDWEIGHT":H$i=!0;break;case"BLENDINDICES":H$j=!0;break;case"TANGENT":H$h=!0;break;case"BINORMAL":H$k=!0}return H$c&&H$d&&H$e&&H$f&&H$g&&H$i&&H$j&&H$h?H$b=H$ta.vertexDeclaration:H$c&&H$d&&H$e&&H$f&&H$g&&H$i&&H$j?H$b=H$ra.vertexDeclaration:H$c&&H$d&&H$f&&H$g&&H$i&&H$j&&H$h?H$b=H$Ha.vertexDeclaration:H$c&&H$d&&H$f&&H$g&&H$i&&H$j?H$b=H$Fa.vertexDeclaration:H$c&&H$d&&H$e&&H$f&&H$i&&H$j&&H$h?H$b=H$ya.vertexDeclaration:H$c&&H$d&&H$e&&H$f&&H$i&&H$j?H$b=H$wa.vertexDeclaration:H$c&&H$d&&H$f&&H$i&&H$j&&H$h?H$b=H$Ma.vertexDeclaration:H$c&&H$d&&H$f&&H$i&&H$j?H$b=H$Ka.vertexDeclaration:H$c&&H$d&&H$e&&H$i&&H$j&&H$h?H$b=H$ma.vertexDeclaration:H$c&&H$d&&H$e&&H$i&&H$j?H$b=H$ka.vertexDeclaration:H$c&&H$d&&H$e&&H$f&&H$g&&H$h?H$b=H$va.vertexDeclaration:H$c&&H$d&&H$e&&H$f&&H$g?H$b=H$qa.vertexDeclaration:H$c&&H$d&&H$f&&H$g&&H$h?H$b=H$Ja.vertexDeclaration:H$c&&H$d&&H$f&&H$g?H$b=H$Ea.vertexDeclaration:H$c&&H$d&&H$e&&H$f&&H$h?H$b=H$Aa.vertexDeclaration:H$c&&H$d&&H$f&&H$h&&H$k?H$b=H$Pa.vertexDeclaration:H$c&&H$d&&H$e&&H$f?H$b=H$pa.vertexDeclaration:H$c&&H$d&&H$f&&H$h?H$b=H$Oa.vertexDeclaration:H$c&&H$d&&H$f?H$b=H$Da.vertexDeclaration:H$c&&H$d&&H$e&&H$h?H$b=H$oa.vertexDeclaration:H$c&&H$d&&H$e&&(H$b=H$ja.vertexDeclaration),H$b},H$x._attrReg=new RegExp("(\\w+)|([:,;])","g"),H$x._strings=[],H$x._readData=null,H$x._version=null,H$x._mesh=null,H$x._materials=null,H$x._subMeshes=null,H$x._materialMap=null,H$l(H$x,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),H$x}(),H$Va=function(){function H$w(){}return H$n(H$w,"laya.d3.loaders.LoadModelV03"),H$w.parse=function(H$a,H$b,H$c,H$d,H$e){H$w._mesh=H$c,H$w._subMeshes=H$d,H$w._materialMap=H$e,H$w._version=H$b,H$w._readData=H$a,H$w.READ_DATA(),H$w.READ_BLOCK(),H$w.READ_STRINGS();for(var H$f=0,H$g=H$w._BLOCK.count;H$f<H$g;H$f++){H$w._readData.pos=H$w._BLOCK.blockStarts[H$f];var H$h=H$w._readData.getUint16(),H$i=H$w._strings[H$h],H$j=H$w["READ_"+H$i];if(null==H$j)throw new Error("model file err,no this function:"+H$h+" "+H$i);H$j.call()}H$w._strings.length=0,H$w._readData=null,H$w._version=null,H$w._mesh=null,H$w._subMeshes=null,H$w._materialMap=null},H$w._readString=function(){return H$w._strings[H$w._readData.getUint16()]},H$w.READ_DATA=function(){H$w._DATA.offset=H$w._readData.getUint32(),H$w._DATA.size=H$w._readData.getUint32()},H$w.READ_BLOCK=function(){for(var H$a=H$w._BLOCK.count=H$w._readData.getUint16(),H$b=H$w._BLOCK.blockStarts=[],H$c=H$w._BLOCK.blockLengths=[],H$d=0;H$d<H$a;H$d++)H$b.push(H$w._readData.getUint32()),H$c.push(H$w._readData.getUint32())},H$w.READ_STRINGS=function(){var H$a=H$w._readData.getUint32(),H$b=H$w._readData.getUint16(),H$c=H$w._readData.pos;H$w._readData.pos=H$a+H$w._DATA.offset;for(var H$d=0;H$d<H$b;H$d++)H$w._strings[H$d]=H$w._readData.readUTFString();H$w._readData.pos=H$c},H$w.READ_MESH=function(){var H$a,H$b=H$w._readString(),H$c=H$w._readData.__getBuffer(),H$d=0,H$e=H$w._readData.getInt16(),H$f=H$w._DATA.offset;for(H$d=0;H$d<H$e;H$d++){var H$g,H$h=H$f+H$w._readData.getUint32(),H$i=H$w._readData.getUint32(),H$j=new Float32Array(H$c.slice(H$h,H$h+H$i)),H$k=H$w._readString();switch(H$w._version){case"LAYAMODEL:03":H$g=H$w._vertexDeclarationMap_Discard[H$k];break;case"LAYAMODEL:0301":H$g=H$w._vertexDeclarationMap[H$k];break;default:throw new Error("LoadModelV03: unknown version.")}if(!H$g)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+H$w._version+"  bufferAttribute="+H$k+"  name="+H$b+"  url="+(H$w._mesh?H$w._mesh.url:"null"));var H$l=H$Mb.create(H$g,4*H$j.length/H$g.vertexStride,35044,!0,H$w._mesh._url+"_"+H$d);H$l.setData(H$j),H$w._mesh._vertexBuffers.push(H$l)}var H$m=H$f+H$w._readData.getUint32(),H$n=H$w._readData.getUint32(),H$o=new Uint16Array(H$c.slice(H$m,H$m+H$n)),H$p=H$Lb.create("ushort",H$n/2,35044,!0,H$w._mesh._url);H$p.setData(H$o),H$w._mesh._indexBuffer=H$p;var H$q=H$w._mesh._boneNames=[],H$r=H$w._readData.getUint16();for(H$q.length=H$r,H$d=0;H$d<H$r;H$d++)H$q[H$d]=H$w._strings[H$w._readData.getUint16()];H$w._readData.pos+=8;var H$s=H$w._readData.getUint32(),H$t=H$w._readData.getUint32(),H$u=new Float32Array(H$c.slice(H$f+H$s,H$f+H$s+H$t));for(H$w._mesh._inverseBindPoses=[],H$d=0,H$a=H$u.length;H$d<H$a;H$d+=16){var H$v=new H$ab(H$u[H$d+0],H$u[H$d+1],H$u[H$d+2],H$u[H$d+3],H$u[H$d+4],H$u[H$d+5],H$u[H$d+6],H$u[H$d+7],H$u[H$d+8],H$u[H$d+9],H$u[H$d+10],H$u[H$d+11],H$u[H$d+12],H$u[H$d+13],H$u[H$d+14],H$u[H$d+15]);H$w._mesh._inverseBindPoses.push(H$v)}return H$w._mesh._skinnedDatas=new Float32Array(16*H$u.length),!0},H$w.READ_SUBMESH=function(){var H$a=H$w._readData.__getBuffer(),H$b=new H$jb(H$w._mesh),H$c=H$w._readData.getInt16(),H$d=H$w._readData.getUint32(),H$e=H$w._readData.getUint32();H$b._vertexBuffer=H$w._mesh._vertexBuffers[H$c],H$b._vertexStart=H$d,H$b._vertexCount=H$e;var H$f=H$w._readData.getUint32(),H$g=H$w._readData.getUint32(),H$h=H$w._mesh._indexBuffer;H$b._indexBuffer=H$h,H$b._indexStart=H$f,H$b._indexCount=H$g,H$b._indices=new Uint16Array(H$h.getData().buffer,2*H$f,H$g);var H$i=H$w._DATA.offset,H$j=H$b._subIndexBufferStart,H$k=H$b._subIndexBufferCount,H$l=H$b._boneIndicesList,H$m=H$w._readData.getUint16();H$j.length=H$m,H$k.length=H$m,H$l.length=H$m;for(var H$n=0;H$n<H$m;H$n++){H$j[H$n]=H$w._readData.getUint32(),H$k[H$n]=H$w._readData.getUint32();var H$o=H$w._readData.getUint32(),H$p=H$w._readData.getUint32();H$l[H$n]=new Uint8Array(H$a.slice(H$i+H$o,H$i+H$o+H$p))}return H$w._subMeshes.push(H$b),!0},H$w._strings=[],H$w._readData=null,H$w._version=null,H$w._mesh=null,H$w._subMeshes=null,H$w._materialMap=null,H$l(H$w,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":H$ta.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":H$ra.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":H$Qa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":H$Ha.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":H$Fa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":H$ya.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":H$wa.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":H$Ma.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":H$Ka.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":H$ma.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":H$ka.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":H$va.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":H$qa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":H$Ja.vertexDeclaration,"POSITION,NORMAL,UV,UV1":H$Ea.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":H$Aa.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":H$Pa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":H$pa.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":H$Oa.vertexDeclaration,"POSITION,NORMAL,UV":H$Da.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":H$oa.vertexDeclaration,"POSITION,NORMAL,COLOR":H$ja.vertexDeclaration,"POSITION,NORMAL,TANGENT":H$Ca.vertexDeclaration,"POSITION,NORMAL":H$ia.vertexDeclaration,"POSITION,UV":H$Sa.vertexDeclaration,POSITION:H$ha.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":H$sa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":H$ra.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":H$Qa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":H$Ga.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":H$Fa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":H$xa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":H$wa.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":H$La.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":H$Ka.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":H$la.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":H$ka.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":H$ua.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":H$qa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":H$Ia.vertexDeclaration,"POSITION,NORMAL,UV,UV1":H$Ea.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":H$za.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":H$Pa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":H$pa.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":H$Na.vertexDeclaration,"POSITION,NORMAL,UV":H$Da.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":H$na.vertexDeclaration,"POSITION,NORMAL,COLOR":H$ja.vertexDeclaration,"POSITION,NORMAL,TANGENT":H$Ba.vertexDeclaration,"POSITION,NORMAL":H$ia.vertexDeclaration,"POSITION,UV":H$Sa.vertexDeclaration,POSITION:H$ha.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),H$w}(),H$Wa=function(){function H$h(){}return H$n(H$h,"laya.d3.loaders.MeshReader"),H$h.read=function(H$a,H$b,H$c,H$d,H$e){var H$f=new H$w(H$a);H$f.pos=0;var H$g=H$f.readUTFString();switch(H$g){case"LAYAMODEL:01":case"LAYASKINANI:01":H$h._readVersion01(H$f,H$g,H$b,H$c,H$d,H$e);break;case"LAYAMODEL:02":H$Ua.parse(H$f,H$g,H$b,H$c,H$d,H$e);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":H$Va.parse(H$f,H$g,H$b,H$d,H$e);break;default:throw new Error("MeshReader: unknown mesh version.")}H$b._setSubMeshes(H$d)},H$h._readVersion01=function(H$a,H$b,H$c,H$d,H$e,H$f){new H$Ta(H$a,H$b,H$c,H$d,H$e,H$f)},H$h}(),H$Xa=function(){function H$a(H$a,H$b){this.min=null,this.max=null,this.min=H$a,this.max=H$b}H$n(H$a,"laya.d3.math.BoundBox");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.core.IClone":!0}),H$b.getCorners=function(H$a){H$a.length=8;var H$b=this.min.elements,H$c=this.max.elements,H$d=H$b[0],H$e=H$b[1],H$f=H$b[2],H$g=H$c[0],H$h=H$c[1],H$i=H$c[2];H$a[0]=new H$gb(H$d,H$h,H$i),H$a[1]=new H$gb(H$g,H$h,H$i),H$a[2]=new H$gb(H$g,H$e,H$i),H$a[3]=new H$gb(H$d,H$e,H$i),H$a[4]=new H$gb(H$d,H$h,H$f),H$a[5]=new H$gb(H$g,H$h,H$f),H$a[6]=new H$gb(H$g,H$e,H$f),H$a[7]=new H$gb(H$d,H$e,H$f)},H$b.toDefault=function(){this.min.toDefault(),this.max.toDefault()},H$b.cloneTo=function(H$a){var H$b=H$a;this.min.cloneTo(H$b.min),this.max.cloneTo(H$b.max)},H$b.clone=function(){var H$a=new this.constructor(new H$gb,new H$gb);return this.cloneTo(H$a),H$a},H$a.createfromPoints=function(H$a,H$b){if(null==H$a)throw new Error("points");var H$c=H$b.min,H$d=H$b.max,H$e=H$c.elements;H$e[0]=Number.MAX_VALUE,H$e[1]=Number.MAX_VALUE,H$e[2]=Number.MAX_VALUE;var H$f=H$d.elements;H$f[0]=-Number.MAX_VALUE,H$f[1]=-Number.MAX_VALUE,H$f[2]=-Number.MAX_VALUE;for(var H$g=0,H$h=H$a.length;H$g<H$h;++H$g)H$gb.min(H$c,H$a[H$g],H$c),H$gb.max(H$d,H$a[H$g],H$d)},H$a.merge=function(H$a,H$b,H$c){H$gb.min(H$a.min,H$b.min,H$c.min),H$gb.max(H$a.max,H$b.max,H$c.max)},H$a}(),H$Ya=function(){function H$j(H$a){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=H$a,this._near=new H$bb(new H$gb),this._far=new H$bb(new H$gb),this._left=new H$bb(new H$gb),this._right=new H$bb(new H$gb),this._top=new H$bb(new H$gb),this._bottom=new H$bb(new H$gb),H$j._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}H$n(H$j,"laya.d3.math.BoundFrustum");var H$a=H$j.prototype;return H$a.equalsBoundFrustum=function(H$a){return this._matrix.equalsOtherMatrix(H$a.matrix)},H$a.equalsObj=function(H$a){if(H$a instanceof laya.d3.math.BoundFrustum){var H$b=H$a;return this.equalsBoundFrustum(H$b)}return!1},H$a.getPlane=function(H$a){switch(H$a){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},H$a.getCorners=function(H$a){H$j._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(H$a[0]),H$j._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(H$a[1]),H$j._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(H$a[2]),H$j._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(H$a[3]),H$j._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(H$a[4]),H$j._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(H$a[5]),H$j._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(H$a[6]),H$j._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(H$a[7])},H$a.containsPoint=function(H$a){for(var H$b=H$bb.PlaneIntersectionType_Front,H$c=H$bb.PlaneIntersectionType_Front,H$d=0;H$d<6;H$d++){switch(H$d){case 0:H$c=Collision.intersectsPlaneAndPoint(this._near,H$a);break;case 1:H$c=Collision.intersectsPlaneAndPoint(this._far,H$a);break;case 2:H$c=Collision.intersectsPlaneAndPoint(this._left,H$a);break;case 3:H$c=Collision.intersectsPlaneAndPoint(this._right,H$a);break;case 4:H$c=Collision.intersectsPlaneAndPoint(this._top,H$a);break;case 5:H$c=Collision.intersectsPlaneAndPoint(this._bottom,H$a)}switch(H$c){case H$bb.PlaneIntersectionType_Back:return 0;case H$bb.PlaneIntersectionType_Intersecting:H$b=H$bb.PlaneIntersectionType_Intersecting}}switch(H$b){case H$bb.PlaneIntersectionType_Intersecting:return 2;default:return 1}},H$a.containsBoundBox=function(H$a){for(var H$b,H$c=H$j._tempV30,H$d=H$j._tempV31,H$e=1,H$f=0;H$f<6;H$f++){if(H$b=this.getPlane(H$f),this._getBoxToPlanePVertexNVertex(H$a,H$b.normal,H$c,H$d),Collision.intersectsPlaneAndPoint(H$b,H$c)===H$bb.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(H$b,H$d)===H$bb.PlaneIntersectionType_Back&&(H$e=2)}return H$e},H$a.containsBoundSphere=function(H$a){for(var H$b=H$bb.PlaneIntersectionType_Front,H$c=H$bb.PlaneIntersectionType_Front,H$d=0;H$d<6;H$d++){switch(H$d){case 0:H$c=Collision.intersectsPlaneAndSphere(this._near,H$a);break;case 1:H$c=Collision.intersectsPlaneAndSphere(this._far,H$a);break;case 2:H$c=Collision.intersectsPlaneAndSphere(this._left,H$a);break;case 3:H$c=Collision.intersectsPlaneAndSphere(this._right,H$a);break;case 4:H$c=Collision.intersectsPlaneAndSphere(this._top,H$a);break;case 5:H$c=Collision.intersectsPlaneAndSphere(this._bottom,H$a)}switch(H$c){case H$bb.PlaneIntersectionType_Back:return 0;case H$bb.PlaneIntersectionType_Intersecting:H$b=H$bb.PlaneIntersectionType_Intersecting}}switch(H$b){case H$bb.PlaneIntersectionType_Intersecting:return 2;default:return 1}},H$a._getBoxToPlanePVertexNVertex=function(H$a,H$b,H$c,H$d){var H$e=H$a.min,H$f=H$e.elements,H$g=H$a.max,H$h=H$g.elements,H$i=H$b.elements,H$j=H$i[0],H$k=H$i[1],H$l=H$i[2];H$e.cloneTo(H$c);var H$m=H$c.elements;0<=H$j&&(H$m[0]=H$h[0]),0<=H$k&&(H$m[1]=H$h[1]),0<=H$l&&(H$m[2]=H$h[2]),H$g.cloneTo(H$d);var H$n=H$d.elements;0<=H$j&&(H$n[0]=H$f[0]),0<=H$k&&(H$n[1]=H$f[1]),0<=H$l&&(H$n[2]=H$f[2])},H$o(0,H$a,"top",function(){return this._top}),H$o(0,H$a,"matrix",function(){return this._matrix},function(H$a){this._matrix=H$a,H$j._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),H$o(0,H$a,"near",function(){return this._near}),H$o(0,H$a,"far",function(){return this._far}),H$o(0,H$a,"left",function(){return this._left}),H$o(0,H$a,"right",function(){return this._right}),H$o(0,H$a,"bottom",function(){return this._bottom}),H$j._getPlanesFromMatrix=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){var H$h=H$a.elements,H$i=H$h[0],H$j=H$h[1],H$k=H$h[2],H$l=H$h[3],H$m=H$h[4],H$n=H$h[5],H$o=H$h[6],H$p=H$h[7],H$q=H$h[8],H$r=H$h[9],H$s=H$h[10],H$t=H$h[11],H$u=H$h[12],H$v=H$h[13],H$w=H$h[14],H$x=H$h[15],H$y=H$b.normal.elements;H$y[0]=H$l+H$k,H$y[1]=H$p+H$o,H$y[2]=H$t+H$s,H$b.distance=H$x+H$w,H$b.normalize();var H$z=H$c.normal.elements;H$z[0]=H$l-H$k,H$z[1]=H$p-H$o,H$z[2]=H$t-H$s,H$c.distance=H$x-H$w,H$c.normalize();var H$A=H$d.normal.elements;H$A[0]=H$l+H$i,H$A[1]=H$p+H$m,H$A[2]=H$t+H$q,H$d.distance=H$x+H$u,H$d.normalize();var H$B=H$e.normal.elements;H$B[0]=H$l-H$i,H$B[1]=H$p-H$m,H$B[2]=H$t-H$q,H$e.distance=H$x-H$u,H$e.normalize();var H$C=H$f.normal.elements;H$C[0]=H$l-H$j,H$C[1]=H$p-H$n,H$C[2]=H$t-H$r,H$f.distance=H$x-H$v,H$f.normalize();var H$D=H$g.normal.elements;H$D[0]=H$l+H$j,H$D[1]=H$p+H$n,H$D[2]=H$t+H$r,H$g.distance=H$x+H$v,H$g.normalize()},H$j._get3PlaneInterPoint=function(H$a,H$b,H$c){var H$d=H$a.normal,H$e=H$b.normal,H$f=H$c.normal;H$gb.cross(H$e,H$f,H$j._tempV30),H$gb.cross(H$f,H$d,H$j._tempV31),H$gb.cross(H$d,H$e,H$j._tempV32);var H$g=H$gb.dot(H$d,H$j._tempV30),H$h=H$gb.dot(H$e,H$j._tempV31),H$i=H$gb.dot(H$f,H$j._tempV32);return H$gb.scale(H$j._tempV30,-H$a.distance/H$g,H$j._tempV33),H$gb.scale(H$j._tempV31,-H$b.distance/H$h,H$j._tempV34),H$gb.scale(H$j._tempV32,-H$c.distance/H$i,H$j._tempV35),H$gb.add(H$j._tempV33,H$j._tempV34,H$j._tempV36),H$gb.add(H$j._tempV35,H$j._tempV36,H$j._tempV37),H$j._tempV37},H$l(H$j,["_tempV30",function(){return this._tempV30=new H$gb},"_tempV31",function(){return this._tempV31=new H$gb},"_tempV32",function(){return this._tempV32=new H$gb},"_tempV33",function(){return this._tempV33=new H$gb},"_tempV34",function(){return this._tempV34=new H$gb},"_tempV35",function(){return this._tempV35=new H$gb},"_tempV36",function(){return this._tempV36=new H$gb},"_tempV37",function(){return this._tempV37=new H$gb}]),H$j}(),H$Za=function(){function H$k(H$a,H$b){this.center=null,this.radius=NaN,this.center=H$a,this.radius=H$b}H$n(H$k,"laya.d3.math.BoundSphere");var H$a=H$k.prototype;return H$v.imps(H$a,{"laya.d3.core.IClone":!0}),H$a.toDefault=function(){this.center.toDefault(),this.radius=0},H$a.intersectsRayDistance=function(H$a){return Collision.intersectsRayAndSphereRD(H$a,this)},H$a.intersectsRayPoint=function(H$a,H$b){return Collision.intersectsRayAndSphereRP(H$a,this,H$b)},H$a.cloneTo=function(H$a){var H$b=H$a;this.center.cloneTo(H$b.center),H$b.radius=this.radius},H$a.clone=function(){var H$a=new this.constructor(new H$gb,new H$gb);return this.cloneTo(H$a),H$a},H$k.createFromSubPoints=function(H$a,H$b,H$c,H$d){if(null==H$a)throw new Error("points");if(H$b<0||H$b>=H$a.length)throw new Error("start"+H$b+"Must be in the range [0, "+(H$a.length-1)+"]");if(H$c<0||H$b+H$c>H$a.length)throw new Error("count"+H$c+"Must be in the range <= "+H$a.length+"}");var H$e=H$b+H$c,H$f=H$k._tempVector3;H$f.elements[0]=0,H$f.elements[1]=0,H$f.elements[2]=0;for(var H$g=H$b;H$g<H$e;++H$g)H$gb.add(H$a[H$g],H$f,H$f);var H$h=H$d.center;H$gb.scale(H$f,1/H$c,H$h);var H$i=0;for(H$g=H$b;H$g<H$e;++H$g){var H$j=H$gb.distanceSquared(H$h,H$a[H$g]);H$i<H$j&&(H$i=H$j)}H$d.radius=Math.sqrt(H$i)},H$k.createfromPoints=function(H$a,H$b){if(null==H$a)throw new Error("points");H$k.createFromSubPoints(H$a,0,H$a.length,H$b)},H$l(H$k,["_tempVector3",function(){return this._tempVector3=new H$gb}]),H$k}(),H$$a=(function(){function H$a(){}H$n(H$a,"laya.d3.math.ContainmentType"),H$a.Disjoint=0,H$a.Contains=1,H$a.Intersects=2}(),function(){function H$c(){}return H$n(H$c,"laya.d3.math.MathUtils3D"),H$c.isZero=function(H$a){return Math.abs(H$a)<H$c.zeroTolerance},H$c.nearEqual=function(H$a,H$b){return!!H$c.isZero(H$a-H$b)},H$c.fastInvSqrt=function(H$a){return H$c.isZero(H$a)?H$a:1/Math.sqrt(H$a)},H$l(H$c,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),H$c}()),H$_a=function(){function H$i(){var H$a=this.elements=new Float32Array(9);H$a[0]=1,H$a[1]=0,H$a[2]=0,H$a[3]=0,H$a[4]=1,H$a[5]=0,H$a[6]=0,H$a[7]=0,H$a[8]=1}H$n(H$i,"laya.d3.math.Matrix3x3");var H$a=H$i.prototype;return H$v.imps(H$a,{"laya.d3.core.IClone":!0}),H$a.determinant=function(){var H$a=this.elements,H$b=H$a[0],H$c=H$a[1],H$d=H$a[2],H$e=H$a[3],H$f=H$a[4],H$g=H$a[5],H$h=H$a[6],H$i=H$a[7],H$j=H$a[8];return H$b*(H$j*H$f-H$g*H$i)+H$c*(-H$j*H$e+H$g*H$h)+H$d*(H$i*H$e-H$f*H$h)},H$a.translate=function(H$a,H$b){var H$c=H$b.elements,H$d=this.elements,H$e=H$a.elements,H$f=H$d[0],H$g=H$d[1],H$h=H$d[2],H$i=H$d[3],H$j=H$d[4],H$k=H$d[5],H$l=H$d[6],H$m=H$d[7],H$n=H$d[8],H$o=H$e[0],H$p=H$e[1];H$c[0]=H$f,H$c[1]=H$g,H$c[2]=H$h,H$c[3]=H$i,H$c[4]=H$j,H$c[5]=H$k,H$c[6]=H$o*H$f+H$p*H$i+H$l,H$c[7]=H$o*H$g+H$p*H$j+H$m,H$c[8]=H$o*H$h+H$p*H$k+H$n},H$a.rotate=function(H$a,H$b){var H$c=H$b.elements,H$d=this.elements,H$e=H$d[0],H$f=H$d[1],H$g=H$d[2],H$h=H$d[3],H$i=H$d[4],H$j=H$d[5],H$k=H$d[6],H$l=H$d[7],H$m=H$d[8],H$n=Math.sin(H$a),H$o=Math.cos(H$a);H$c[0]=H$o*H$e+H$n*H$h,H$c[1]=H$o*H$f+H$n*H$i,H$c[2]=H$o*H$g+H$n*H$j,H$c[3]=H$o*H$h-H$n*H$e,H$c[4]=H$o*H$i-H$n*H$f,H$c[5]=H$o*H$j-H$n*H$g,H$c[6]=H$k,H$c[7]=H$l,H$c[8]=H$m},H$a.scale=function(H$a,H$b){var H$c=H$b.elements,H$d=this.elements,H$e=H$a.elements,H$f=H$e[0],H$g=H$e[1];H$c[0]=H$f*H$d[0],H$c[1]=H$f*H$d[1],H$c[2]=H$f*H$d[2],H$c[3]=H$g*H$d[3],H$c[4]=H$g*H$d[4],H$c[5]=H$g*H$d[5],H$c[6]=H$d[6],H$c[7]=H$d[7],H$c[8]=H$d[8]},H$a.invert=function(H$a){var H$b=H$a.elements,H$c=this.elements,H$d=H$c[0],H$e=H$c[1],H$f=H$c[2],H$g=H$c[3],H$h=H$c[4],H$i=H$c[5],H$j=H$c[6],H$k=H$c[7],H$l=H$c[8],H$m=H$l*H$h-H$i*H$k,H$n=-H$l*H$g+H$i*H$j,H$o=H$k*H$g-H$h*H$j,H$p=H$d*H$m+H$e*H$n+H$f*H$o;H$p||(H$a=null),H$p=1/H$p,H$b[0]=H$m*H$p,H$b[1]=(-H$l*H$e+H$f*H$k)*H$p,H$b[2]=(H$i*H$e-H$f*H$h)*H$p,H$b[3]=H$n*H$p,H$b[4]=(H$l*H$d-H$f*H$j)*H$p,H$b[5]=(-H$i*H$d+H$f*H$g)*H$p,H$b[6]=H$o*H$p,H$b[7]=(-H$k*H$d+H$e*H$j)*H$p,H$b[8]=(H$h*H$d-H$e*H$g)*H$p},H$a.transpose=function(H$a){var H$b=H$a.elements,H$c=this.elements;if(H$a===this){var H$d=H$c[1],H$e=H$c[2],H$f=H$c[5];H$b[1]=H$c[3],H$b[2]=H$c[6],H$b[3]=H$d,H$b[5]=H$c[7],H$b[6]=H$e,H$b[7]=H$f}else H$b[0]=H$c[0],H$b[1]=H$c[3],H$b[2]=H$c[6],H$b[3]=H$c[1],H$b[4]=H$c[4],H$b[5]=H$c[7],H$b[6]=H$c[2],H$b[7]=H$c[5],H$b[8]=H$c[8]},H$a.identity=function(){var H$a=this.elements;H$a[0]=1,H$a[1]=0,H$a[2]=0,H$a[3]=0,H$a[4]=1,H$a[5]=0,H$a[6]=0,H$a[7]=0,H$a[8]=1},H$a.cloneTo=function(H$a){var H$b,H$c,H$d;if((H$c=this.elements)!==(H$d=H$a.elements))for(H$b=0;H$b<9;++H$b)H$d[H$b]=H$c[H$b]},H$a.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$i.createFromTranslation=function(H$a,H$b){H$b.elements;var H$c=H$a.elements;H$b[0]=1,H$b[1]=0,H$b[2]=0,H$b[3]=0,H$b[4]=1,H$b[5]=0,H$b[6]=H$c[0],H$b[7]=H$c[1],H$b[8]=1},H$i.createFromRotation=function(H$a,H$b){var H$c=H$b.elements,H$d=Math.sin(H$a),H$e=Math.cos(H$a);H$c[0]=H$e,H$c[1]=H$d,H$c[2]=0,H$c[3]=-H$d,H$c[4]=H$e,H$c[5]=0,H$c[6]=0,H$c[7]=0,H$c[8]=1},H$i.createFromScaling=function(H$a,H$b){var H$c=H$b.elements,H$d=H$a.elements;H$c[0]=H$d[0],H$c[1]=0,H$c[2]=0,H$c[3]=0,H$c[4]=H$d[1],H$c[5]=0,H$c[6]=0,H$c[7]=0,H$c[8]=1},H$i.createFromMatrix4x4=function(H$a,H$b){H$b[0]=H$a[0],H$b[1]=H$a[1],H$b[2]=H$a[2],H$b[3]=H$a[4],H$b[4]=H$a[5],H$b[5]=H$a[6],H$b[6]=H$a[8],H$b[7]=H$a[9],H$b[8]=H$a[10]},H$i.multiply=function(H$a,H$b,H$c){var H$d=H$c.elements,H$e=H$a.elements,H$f=H$b.elements,H$g=H$e[0],H$h=H$e[1],H$i=H$e[2],H$j=H$e[3],H$k=H$e[4],H$l=H$e[5],H$m=H$e[6],H$n=H$e[7],H$o=H$e[8],H$p=H$f[0],H$q=H$f[1],H$r=H$f[2],H$s=H$f[3],H$t=H$f[4],H$u=H$f[5],H$v=H$f[6],H$w=H$f[7],H$x=H$f[8];H$d[0]=H$p*H$g+H$q*H$j+H$r*H$m,H$d[1]=H$p*H$h+H$q*H$k+H$r*H$n,H$d[2]=H$p*H$i+H$q*H$l+H$r*H$o,H$d[3]=H$s*H$g+H$t*H$j+H$u*H$m,H$d[4]=H$s*H$h+H$t*H$k+H$u*H$n,H$d[5]=H$s*H$i+H$t*H$l+H$u*H$o,H$d[6]=H$v*H$g+H$w*H$j+H$x*H$m,H$d[7]=H$v*H$h+H$w*H$k+H$x*H$n,H$d[8]=H$v*H$i+H$w*H$l+H$x*H$o},H$i.lookAt=function(H$a,H$b,H$c,H$d){H$gb.subtract(H$a,H$b,H$i._tempV30),H$gb.normalize(H$i._tempV30,H$i._tempV30),H$gb.cross(H$c,H$i._tempV30,H$i._tempV31),H$gb.normalize(H$i._tempV31,H$i._tempV31),H$gb.cross(H$i._tempV30,H$i._tempV31,H$i._tempV32);var H$e=H$i._tempV30.elements,H$f=H$i._tempV31.elements,H$g=H$i._tempV32.elements,H$h=H$d.elements;H$h[0]=H$f[0],H$h[3]=H$f[1],H$h[6]=H$f[2],H$h[1]=H$g[0],H$h[4]=H$g[1],H$h[7]=H$g[2],H$h[2]=H$e[0],H$h[5]=H$e[1],H$h[8]=H$e[2]},H$i.DEFAULT=new H$i,H$l(H$i,["_tempV30",function(){return this._tempV30=new H$gb},"_tempV31",function(){return this._tempV31=new H$gb},"_tempV32",function(){return this._tempV32=new H$gb}]),H$i}(),H$ab=function(){function H$z(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j,H$k,H$l,H$m,H$n,H$o,H$p){void 0===H$a&&(H$a=1),void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0),void 0===H$d&&(H$d=0),void 0===H$e&&(H$e=0),void 0===H$f&&(H$f=1),void 0===H$g&&(H$g=0),void 0===H$h&&(H$h=0),void 0===H$i&&(H$i=0),void 0===H$j&&(H$j=0),void 0===H$k&&(H$k=1),void 0===H$l&&(H$l=0),void 0===H$m&&(H$m=0),void 0===H$n&&(H$n=0),void 0===H$o&&(H$o=0),void 0===H$p&&(H$p=1);var H$q=this.elements=new Float32Array(16);H$q[0]=H$a,H$q[1]=H$b,H$q[2]=H$c,H$q[3]=H$d,H$q[4]=H$e,H$q[5]=H$f,H$q[6]=H$g,H$q[7]=H$h,H$q[8]=H$i,H$q[9]=H$j,H$q[10]=H$k,H$q[11]=H$l,H$q[12]=H$m,H$q[13]=H$n,H$q[14]=H$o,H$q[15]=H$p}H$n(H$z,"laya.d3.math.Matrix4x4");var H$a=H$z.prototype;return H$v.imps(H$a,{"laya.d3.core.IClone":!0}),H$a.getElementByRowColumn=function(H$a,H$b){if(H$a<0||3<H$a)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(H$b<0||3<H$b)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*H$a+H$b]},H$a.setElementByRowColumn=function(H$a,H$b,H$c){if(H$a<0||3<H$a)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(H$b<0||3<H$b)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*H$a+H$b]=H$c},H$a.equalsOtherMatrix=function(H$a){var H$b=this.elements,H$c=H$a.elements;return H$$a.nearEqual(H$b[0],H$c[0])&&H$$a.nearEqual(H$b[1],H$c[1])&&H$$a.nearEqual(H$b[2],H$c[2])&&H$$a.nearEqual(H$b[3],H$c[3])&&H$$a.nearEqual(H$b[4],H$c[4])&&H$$a.nearEqual(H$b[5],H$c[5])&&H$$a.nearEqual(H$b[6],H$c[6])&&H$$a.nearEqual(H$b[7],H$c[7])&&H$$a.nearEqual(H$b[8],H$c[8])&&H$$a.nearEqual(H$b[9],H$c[9])&&H$$a.nearEqual(H$b[10],H$c[10])&&H$$a.nearEqual(H$b[11],H$c[11])&&H$$a.nearEqual(H$b[12],H$c[12])&&H$$a.nearEqual(H$b[13],H$c[13])&&H$$a.nearEqual(H$b[14],H$c[14])&&H$$a.nearEqual(H$b[15],H$c[15])},H$a.decomposeTransRotScale=function(H$a,H$b,H$c){var H$d=H$z._tempMatrix4x4;return this.decomposeTransRotMatScale(H$a,H$d,H$c)?(H$cb.createFromMatrix4x4(H$d,H$b),!0):(H$b.identity(),!1)},H$a.decomposeTransRotMatScale=function(H$a,H$b,H$c){var H$d=this.elements,H$e=H$a.elements,H$f=H$b.elements,H$g=H$c.elements;H$e[0]=H$d[12],H$e[1]=H$d[13],H$e[2]=H$d[14];var H$h=H$d[0],H$i=H$d[1],H$j=H$d[2],H$k=H$d[4],H$l=H$d[5],H$m=H$d[6],H$n=H$d[8],H$o=H$d[9],H$p=H$d[10],H$q=H$g[0]=Math.sqrt(H$h*H$h+H$i*H$i+H$j*H$j),H$r=H$g[1]=Math.sqrt(H$k*H$k+H$l*H$l+H$m*H$m),H$s=H$g[2]=Math.sqrt(H$n*H$n+H$o*H$o+H$p*H$p);if(H$$a.isZero(H$q)||H$$a.isZero(H$r)||H$$a.isZero(H$s))return H$f[1]=H$f[2]=H$f[3]=H$f[4]=H$f[6]=H$f[7]=H$f[8]=H$f[9]=H$f[11]=H$f[12]=H$f[13]=H$f[14]=0,H$f[0]=H$f[5]=H$f[10]=H$f[15]=1,!1;var H$t=H$z._tempVector0,H$u=H$t.elements;H$u[0]=H$n/H$s,H$u[1]=H$o/H$s,H$u[2]=H$p/H$s;var H$v=H$z._tempVector1,H$w=H$v.elements;H$w[0]=H$h/H$q,H$w[1]=H$i/H$q,H$w[2]=H$j/H$q;var H$x=H$z._tempVector2;H$gb.cross(H$t,H$v,H$x);var H$y=H$z._tempVector1;return H$gb.cross(H$x,H$t,H$y),H$f[3]=H$f[7]=H$f[11]=H$f[12]=H$f[13]=H$f[14]=0,H$f[15]=1,H$f[0]=H$y.x,H$f[1]=H$y.y,H$f[2]=H$y.z,H$f[4]=H$x.x,H$f[5]=H$x.y,H$f[6]=H$x.z,H$f[8]=H$t.x,H$f[9]=H$t.y,H$f[10]=H$t.z,H$f[0]*H$h+H$f[1]*H$i+H$f[2]*H$j<0&&(H$g[0]=-H$q),H$f[4]*H$k+H$f[5]*H$l+H$f[6]*H$m<0&&(H$g[1]=-H$r),H$f[8]*H$n+H$f[9]*H$o+H$f[10]*H$p<0&&(H$g[2]=-H$s),!0},H$a.decomposeYawPitchRoll=function(H$a){var H$b=H$a.elements,H$c=Math.asin(-this.elements[9]);H$b[1]=H$c,Math.cos(H$c)>H$$a.zeroTolerance?(H$b[2]=Math.atan2(this.elements[1],this.elements[5]),H$b[0]=Math.atan2(this.elements[8],this.elements[10])):(H$b[2]=Math.atan2(-this.elements[4],this.elements[0]),H$b[0]=0)},H$a.normalize=function(){var H$a=this.elements,H$b=H$a[0],H$c=H$a[1],H$d=H$a[2],H$e=Math.sqrt(H$b*H$b+H$c*H$c+H$d*H$d);if(!H$e)return H$a[0]=0,H$a[1]=0,void(H$a[2]=0);1!=H$e&&(H$e=1/H$e,H$a[0]=H$b*H$e,H$a[1]=H$c*H$e,H$a[2]=H$d*H$e)},H$a.transpose=function(){var H$a,H$b;return H$b=(H$a=this.elements)[1],H$a[1]=H$a[4],H$a[4]=H$b,H$b=H$a[2],H$a[2]=H$a[8],H$a[8]=H$b,H$b=H$a[3],H$a[3]=H$a[12],H$a[12]=H$b,H$b=H$a[6],H$a[6]=H$a[9],H$a[9]=H$b,H$b=H$a[7],H$a[7]=H$a[13],H$a[13]=H$b,H$b=H$a[11],H$a[11]=H$a[14],H$a[14]=H$b,this},H$a.invert=function(H$a){var H$b=this.elements,H$c=H$a.elements,H$d=H$b[0],H$e=H$b[1],H$f=H$b[2],H$g=H$b[3],H$h=H$b[4],H$i=H$b[5],H$j=H$b[6],H$k=H$b[7],H$l=H$b[8],H$m=H$b[9],H$n=H$b[10],H$o=H$b[11],H$p=H$b[12],H$q=H$b[13],H$r=H$b[14],H$s=H$b[15],H$t=H$d*H$i-H$e*H$h,H$u=H$d*H$j-H$f*H$h,H$v=H$d*H$k-H$g*H$h,H$w=H$e*H$j-H$f*H$i,H$x=H$e*H$k-H$g*H$i,H$y=H$f*H$k-H$g*H$j,H$z=H$l*H$q-H$m*H$p,H$A=H$l*H$r-H$n*H$p,H$B=H$l*H$s-H$o*H$p,H$C=H$m*H$r-H$n*H$q,H$D=H$m*H$s-H$o*H$q,H$E=H$n*H$s-H$o*H$r,H$F=H$t*H$E-H$u*H$D+H$v*H$C+H$w*H$B-H$x*H$A+H$y*H$z;0!==Math.abs(H$F)&&(H$F=1/H$F,H$c[0]=(H$i*H$E-H$j*H$D+H$k*H$C)*H$F,H$c[1]=(H$f*H$D-H$e*H$E-H$g*H$C)*H$F,H$c[2]=(H$q*H$y-H$r*H$x+H$s*H$w)*H$F,H$c[3]=(H$n*H$x-H$m*H$y-H$o*H$w)*H$F,H$c[4]=(H$j*H$B-H$h*H$E-H$k*H$A)*H$F,H$c[5]=(H$d*H$E-H$f*H$B+H$g*H$A)*H$F,H$c[6]=(H$r*H$v-H$p*H$y-H$s*H$u)*H$F,H$c[7]=(H$l*H$y-H$n*H$v+H$o*H$u)*H$F,H$c[8]=(H$h*H$D-H$i*H$B+H$k*H$z)*H$F,H$c[9]=(H$e*H$B-H$d*H$D-H$g*H$z)*H$F,H$c[10]=(H$p*H$x-H$q*H$v+H$s*H$t)*H$F,H$c[11]=(H$m*H$v-H$l*H$x-H$o*H$t)*H$F,H$c[12]=(H$i*H$A-H$h*H$C-H$j*H$z)*H$F,H$c[13]=(H$d*H$C-H$e*H$A+H$f*H$z)*H$F,H$c[14]=(H$q*H$u-H$p*H$w-H$r*H$t)*H$F,H$c[15]=(H$l*H$w-H$m*H$u+H$n*H$t)*H$F)},H$a.identity=function(){var H$a=this.elements;H$a[1]=H$a[2]=H$a[3]=H$a[4]=H$a[6]=H$a[7]=H$a[8]=H$a[9]=H$a[11]=H$a[12]=H$a[13]=H$a[14]=0,H$a[0]=H$a[5]=H$a[10]=H$a[15]=1},H$a.cloneTo=function(H$a){var H$b,H$c,H$d;if((H$c=this.elements)!==(H$d=H$a.elements))for(H$b=0;H$b<16;++H$b)H$d[H$b]=H$c[H$b]},H$a.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$a.getTranslationVector=function(H$a){var H$b=this.elements,H$c=H$a.elements;H$c[0]=H$b[12],H$c[1]=H$b[13],H$c[2]=H$b[14]},H$a.setTranslationVector=function(H$a){var H$b=this.elements,H$c=H$a.elements;H$b[12]=H$c[0],H$b[13]=H$c[1],H$b[14]=H$c[2]},H$a.getForward=function(H$a){var H$b=this.elements,H$c=H$a.elements;H$c[0]=-H$b[8],H$c[1]=-H$b[9],H$c[2]=-H$b[10]},H$a.setForward=function(H$a){var H$b=this.elements,H$c=H$a.elements;H$b[8]=-H$c[0],H$b[9]=-H$c[1],H$b[10]=-H$c[2]},H$z.createRotationX=function(H$a,H$b){var H$c=H$b.elements,H$d=Math.sin(H$a),H$e=Math.cos(H$a);H$c[1]=H$c[2]=H$c[3]=H$c[4]=H$c[7]=H$c[8]=H$c[11]=H$c[12]=H$c[13]=H$c[14]=0,H$c[0]=H$c[15]=1,H$c[5]=H$c[10]=H$e,H$c[6]=H$d,H$c[9]=-H$d},H$z.createRotationY=function(H$a,H$b){var H$c=H$b.elements,H$d=Math.sin(H$a),H$e=Math.cos(H$a);H$c[1]=H$c[3]=H$c[4]=H$c[6]=H$c[7]=H$c[9]=H$c[11]=H$c[12]=H$c[13]=H$c[14]=0,H$c[5]=H$c[15]=1,H$c[0]=H$c[10]=H$e,H$c[2]=-H$d,H$c[8]=H$d},H$z.createRotationZ=function(H$a,H$b){var H$c=H$b.elements,H$d=Math.sin(H$a),H$e=Math.cos(H$a);H$c[2]=H$c[3]=H$c[6]=H$c[7]=H$c[8]=H$c[9]=H$c[11]=H$c[12]=H$c[13]=H$c[14]=0,H$c[10]=H$c[15]=1,H$c[0]=H$c[5]=H$e,H$c[1]=H$d,H$c[4]=-H$d},H$z.createRotationYawPitchRoll=function(H$a,H$b,H$c,H$d){H$cb.createFromYawPitchRoll(H$a,H$b,H$c,H$z._tempQuaternion),H$z.createRotationQuaternion(H$z._tempQuaternion,H$d)},H$z.createRotationAxis=function(H$a,H$b,H$c){var H$d=H$a.elements,H$e=H$d[0],H$f=H$d[1],H$g=H$d[2],H$h=Math.cos(H$b),H$i=Math.sin(H$b),H$j=H$e*H$e,H$k=H$f*H$f,H$l=H$g*H$g,H$m=H$e*H$f,H$n=H$e*H$g,H$o=H$f*H$g,H$p=H$c.elements;H$p[3]=H$p[7]=H$p[11]=H$p[12]=H$p[13]=H$p[14]=0,H$p[15]=1,H$p[0]=H$j+H$h*(1-H$j),H$p[1]=H$m-H$h*H$m+H$i*H$g,H$p[2]=H$n-H$h*H$n-H$i*H$f,H$p[4]=H$m-H$h*H$m-H$i*H$g,H$p[5]=H$k+H$h*(1-H$k),H$p[6]=H$o-H$h*H$o+H$i*H$e,H$p[8]=H$n-H$h*H$n+H$i*H$f,H$p[9]=H$o-H$h*H$o-H$i*H$e,H$p[10]=H$l+H$h*(1-H$l)},H$z.createRotationQuaternion=function(H$a,H$b){var H$c=H$a.elements,H$d=H$b.elements,H$e=H$c[0],H$f=H$c[1],H$g=H$c[2],H$h=H$c[3],H$i=H$e*H$e,H$j=H$f*H$f,H$k=H$g*H$g,H$l=H$e*H$f,H$m=H$g*H$h,H$n=H$g*H$e,H$o=H$f*H$h,H$p=H$f*H$g,H$q=H$e*H$h;H$d[3]=H$d[7]=H$d[11]=H$d[12]=H$d[13]=H$d[14]=0,H$d[15]=1,H$d[0]=1-2*(H$j+H$k),H$d[1]=2*(H$l+H$m),H$d[2]=2*(H$n-H$o),H$d[4]=2*(H$l-H$m),H$d[5]=1-2*(H$k+H$i),H$d[6]=2*(H$p+H$q),H$d[8]=2*(H$n+H$o),H$d[9]=2*(H$p-H$q),H$d[10]=1-2*(H$j+H$i)},H$z.createTranslate=function(H$a,H$b){var H$c=H$a.elements,H$d=H$b.elements;H$d[4]=H$d[8]=H$d[1]=H$d[9]=H$d[2]=H$d[6]=H$d[3]=H$d[7]=H$d[11]=0,H$d[0]=H$d[5]=H$d[10]=H$d[15]=1,H$d[12]=H$c[0],H$d[13]=H$c[1],H$d[14]=H$c[2]},H$z.createScaling=function(H$a,H$b){var H$c=H$a.elements,H$d=H$b.elements;H$d[0]=H$c[0],H$d[5]=H$c[1],H$d[10]=H$c[2],H$d[1]=H$d[4]=H$d[8]=H$d[12]=H$d[9]=H$d[13]=H$d[2]=H$d[6]=H$d[14]=H$d[3]=H$d[7]=H$d[11]=0,H$d[15]=1},H$z.multiply=function(H$a,H$b,H$c){var H$d,H$e,H$f,H$g,H$h,H$i,H$j,H$k;for(H$e=H$c.elements,H$f=H$a.elements,H$e===(H$g=H$b.elements)&&(H$g=H$g.slice()),H$d=0;H$d<4;H$d++)H$h=H$f[H$d],H$i=H$f[H$d+4],H$j=H$f[H$d+8],H$k=H$f[H$d+12],H$e[H$d]=H$h*H$g[0]+H$i*H$g[1]+H$j*H$g[2]+H$k*H$g[3],H$e[H$d+4]=H$h*H$g[4]+H$i*H$g[5]+H$j*H$g[6]+H$k*H$g[7],H$e[H$d+8]=H$h*H$g[8]+H$i*H$g[9]+H$j*H$g[10]+H$k*H$g[11],H$e[H$d+12]=H$h*H$g[12]+H$i*H$g[13]+H$j*H$g[14]+H$k*H$g[15]},H$z.createFromQuaternion=function(H$a,H$b){var H$c=H$b.elements,H$d=H$a.elements,H$e=H$d[0],H$f=H$d[1],H$g=H$d[2],H$h=H$d[3],H$i=H$e+H$e,H$j=H$f+H$f,H$k=H$g+H$g,H$l=H$e*H$i,H$m=H$f*H$i,H$n=H$f*H$j,H$o=H$g*H$i,H$p=H$g*H$j,H$q=H$g*H$k,H$r=H$h*H$i,H$s=H$h*H$j,H$t=H$h*H$k;H$c[0]=1-H$n-H$q,H$c[1]=H$m+H$t,H$c[2]=H$o-H$s,H$c[3]=0,H$c[4]=H$m-H$t,H$c[5]=1-H$l-H$q,H$c[6]=H$p+H$r,H$c[7]=0,H$c[8]=H$o+H$s,H$c[9]=H$p-H$r,H$c[10]=1-H$l-H$n,H$c[11]=0,H$c[12]=0,H$c[13]=0,H$c[14]=0,H$c[15]=1},H$z.createAffineTransformation=function(H$a,H$b,H$c,H$d){var H$e=H$a.elements,H$f=H$b.elements,H$g=H$c.elements,H$h=H$d.elements,H$i=H$f[0],H$j=H$f[1],H$k=H$f[2],H$l=H$f[3],H$m=H$i+H$i,H$n=H$j+H$j,H$o=H$k+H$k,H$p=H$i*H$m,H$q=H$i*H$n,H$r=H$i*H$o,H$s=H$j*H$n,H$t=H$j*H$o,H$u=H$k*H$o,H$v=H$l*H$m,H$w=H$l*H$n,H$x=H$l*H$o,H$y=H$g[0],H$z=H$g[1],H$A=H$g[2];H$h[0]=(1-(H$s+H$u))*H$y,H$h[1]=(H$q+H$x)*H$y,H$h[2]=(H$r-H$w)*H$y,H$h[3]=0,H$h[4]=(H$q-H$x)*H$z,H$h[5]=(1-(H$p+H$u))*H$z,H$h[6]=(H$t+H$v)*H$z,H$h[7]=0,H$h[8]=(H$r+H$w)*H$A,H$h[9]=(H$t-H$v)*H$A,H$h[10]=(1-(H$p+H$s))*H$A,H$h[11]=0,H$h[12]=H$e[0],H$h[13]=H$e[1],H$h[14]=H$e[2],H$h[15]=1},H$z.createLookAt=function(H$a,H$b,H$c,H$d){var H$e=H$d.elements,H$f=H$z._tempVector0,H$g=H$z._tempVector1,H$h=H$z._tempVector2;H$gb.subtract(H$a,H$b,H$h),H$gb.normalize(H$h,H$h),H$gb.cross(H$c,H$h,H$f),H$gb.normalize(H$f,H$f),H$gb.cross(H$h,H$f,H$g),H$d.identity(),H$e[0]=H$f.x,H$e[4]=H$f.y,H$e[8]=H$f.z,H$e[1]=H$g.x,H$e[5]=H$g.y,H$e[9]=H$g.z,H$e[2]=H$h.x,H$e[6]=H$h.y,H$e[10]=H$h.z,H$e[12]=-H$gb.dot(H$f,H$a),H$e[13]=-H$gb.dot(H$g,H$a),H$e[14]=-H$gb.dot(H$h,H$a)},H$z.createPerspective=function(H$a,H$b,H$c,H$d,H$e){var H$f=H$e.elements,H$g=1/Math.tan(H$a/2),H$h=1/(H$c-H$d);H$f[0]=H$g/H$b,H$f[5]=H$g,H$f[10]=(H$d+H$c)*H$h,H$f[11]=-1,H$f[14]=2*H$d*H$c*H$h,H$f[1]=H$f[2]=H$f[3]=H$f[4]=H$f[6]=H$f[7]=H$f[8]=H$f[9]=H$f[12]=H$f[13]=H$f[15]=0},H$z.createOrthoOffCenterRH=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){var H$h=H$g.elements,H$i=1/(H$a-H$b),H$j=1/(H$c-H$d),H$k=1/(H$e-H$f);H$h[1]=H$h[2]=H$h[3]=H$h[4]=H$h[6]=H$h[7]=H$h[8]=H$h[9]=H$h[11]=0,H$h[15]=1,H$h[0]=-2*H$i,H$h[5]=-2*H$j,H$h[10]=2*H$k,H$h[12]=(H$a+H$b)*H$i,H$h[13]=(H$d+H$c)*H$j,H$h[14]=(H$f+H$e)*H$k},H$z.translation=function(H$a,H$b){var H$c=H$a.elements,H$d=H$b.elements;H$d[0]=H$d[5]=H$d[10]=H$d[15]=1,H$d[12]=H$c[0],H$d[13]=H$c[1],H$d[14]=H$c[2]},H$l(H$z,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new H$z},"_tempVector0",function(){return this._tempVector0=new H$gb},"_tempVector1",function(){return this._tempVector1=new H$gb},"_tempVector2",function(){return this._tempVector2=new H$gb},"_tempQuaternion",function(){return this._tempQuaternion=new H$cb},"DEFAULT",function(){return this.DEFAULT=new H$z},"ZERO",function(){return this.ZERO=new H$z(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),H$z}(),H$bb=(function(){function H$t(H$a,H$b){this.extents=null,this.transformation=null,this.extents=H$a,this.transformation=H$b}H$n(H$t,"laya.d3.math.OrientedBoundBox");var H$a=H$t.prototype;H$a.getCorners=function(H$a){var H$b=H$t._tempV30.elements,H$c=H$t._tempV31.elements,H$d=H$t._tempV32.elements,H$e=this.extents.elements;H$b[0]=H$e[0],H$b[1]=H$b[2]=0,H$c[1]=H$e[1],H$c[0]=H$c[2]=0,H$d[2]=H$e[2],H$d[0]=H$d[1]=0,H$gb.TransformNormal(H$t._tempV30,this.transformation,H$t._tempV30),H$gb.TransformNormal(H$t._tempV31,this.transformation,H$t._tempV31),H$gb.TransformNormal(H$t._tempV32,this.transformation,H$t._tempV32);var H$f=H$t._tempV33;this.transformation.getTranslationVector(H$f),H$a.length=8,H$gb.add(H$f,H$t._tempV30,H$t._tempV34),H$gb.add(H$t._tempV34,H$t._tempV31,H$t._tempV34),H$gb.add(H$t._tempV34,H$t._tempV32,H$a[0]),H$gb.add(H$f,H$t._tempV30,H$t._tempV34),H$gb.add(H$t._tempV34,H$t._tempV31,H$t._tempV34),H$gb.subtract(H$t._tempV34,H$t._tempV32,H$a[1]),H$gb.subtract(H$f,H$t._tempV30,H$t._tempV34),H$gb.add(H$t._tempV34,H$t._tempV31,H$t._tempV34),H$gb.subtract(H$t._tempV34,H$t._tempV32,H$a[2]),H$gb.subtract(H$f,H$t._tempV30,H$t._tempV34),H$gb.add(H$t._tempV34,H$t._tempV31,H$t._tempV34),H$gb.add(H$t._tempV34,H$t._tempV32,H$a[3]),H$gb.add(H$f,H$t._tempV30,H$t._tempV34),H$gb.subtract(H$t._tempV34,H$t._tempV31,H$t._tempV34),H$gb.add(H$t._tempV34,H$t._tempV32,H$a[4]),H$gb.add(H$f,H$t._tempV30,H$t._tempV34),H$gb.subtract(H$t._tempV34,H$t._tempV31,H$t._tempV34),H$gb.subtract(H$t._tempV34,H$t._tempV32,H$a[5]),H$gb.subtract(H$f,H$t._tempV30,H$t._tempV34),H$gb.subtract(H$t._tempV34,H$t._tempV31,H$t._tempV34),H$gb.subtract(H$t._tempV34,H$t._tempV32,H$a[6]),H$gb.subtract(H$f,H$t._tempV30,H$t._tempV34),H$gb.subtract(H$t._tempV34,H$t._tempV31,H$t._tempV34),H$gb.add(H$t._tempV34,H$t._tempV32,H$a[7])},H$a.transform=function(H$a){H$ab.multiply(this.transformation,H$a,this.transformation)},H$a.scale=function(H$a){H$gb.multiply(this.extents,H$a,this.extents)},H$a.translate=function(H$a){this.transformation.getTranslationVector(H$t._tempV30),H$gb.add(H$t._tempV30,H$a,H$t._tempV31),this.transformation.setTranslationVector(H$t._tempV31)},H$a.Size=function(H$a){H$gb.scale(this.extents,2,H$a)},H$a.getSize=function(H$a){var H$b=this.extents.elements;H$t._tempV30.x=H$b[0],H$t._tempV31.y=H$b[1],H$t._tempV32.z=H$b[2],H$gb.TransformNormal(H$t._tempV30,this.transformation,H$t._tempV30),H$gb.TransformNormal(H$t._tempV31,this.transformation,H$t._tempV31),H$gb.TransformNormal(H$t._tempV31,this.transformation,H$t._tempV32);var H$c=H$a.elements;H$c[0]=H$gb.scalarLength(H$t._tempV30),H$c[1]=H$gb.scalarLength(H$t._tempV31),H$c[2]=H$gb.scalarLength(H$t._tempV32)},H$a.getSizeSquared=function(H$a){var H$b=this.extents.elements;H$t._tempV30.x=H$b[0],H$t._tempV31.y=H$b[1],H$t._tempV32.z=H$b[2],H$gb.TransformNormal(H$t._tempV30,this.transformation,H$t._tempV30),H$gb.TransformNormal(H$t._tempV31,this.transformation,H$t._tempV31),H$gb.TransformNormal(H$t._tempV31,this.transformation,H$t._tempV32);var H$c=H$a.elements;H$c[0]=H$gb.scalarLengthSquared(H$t._tempV30),H$c[1]=H$gb.scalarLengthSquared(H$t._tempV31),H$c[2]=H$gb.scalarLengthSquared(H$t._tempV32)},H$a.getCenter=function(H$a){this.transformation.getTranslationVector(H$a)},H$a.containsPoint=function(H$a){var H$b=this.extents.elements,H$c=H$b[0],H$d=H$b[1],H$e=H$b[2];this.transformation.invert(H$t._tempM0),H$gb.transformCoordinate(H$a,H$t._tempM0,H$t._tempV30);var H$f=H$t._tempV30.elements,H$g=Math.abs(H$f[0]),H$h=Math.abs(H$f[1]),H$i=Math.abs(H$f[2]);return H$$a.nearEqual(H$g,H$c)&&H$$a.nearEqual(H$h,H$d)&&H$$a.nearEqual(H$i,H$e)?2:H$g<H$c&&H$h<H$d&&H$i<H$e?1:0},H$a.containsPoints=function(H$a){var H$b=this.extents.elements,H$c=H$b[0],H$d=H$b[1],H$e=H$b[2];this.transformation.invert(H$t._tempM0);for(var H$f=!0,H$g=!1,H$h=0;H$h<H$a.length;H$h++){H$gb.transformCoordinate(H$a[H$h],H$t._tempM0,H$t._tempV30);var H$i=H$t._tempV30.elements,H$j=Math.abs(H$i[0]),H$k=Math.abs(H$i[1]),H$l=Math.abs(H$i[2]);H$$a.nearEqual(H$j,H$c)&&H$$a.nearEqual(H$k,H$d)&&H$$a.nearEqual(H$l,H$e)&&(H$g=!0),H$j<H$c&&H$k<H$d&&H$l<H$e?H$g=!0:H$f=!1}return H$f?1:H$g?2:0},H$a.containsSphere=function(H$a,H$b){void 0===H$b&&(H$b=!1);var H$c=this.extents.elements,H$d=H$c[0],H$e=H$c[1],H$f=H$c[2],H$g=H$a.radius;this.transformation.invert(H$t._tempM0),H$gb.transformCoordinate(H$a.center,H$t._tempM0,H$t._tempV30);var H$h=NaN;if(H$h=H$b?H$g:(H$gb.scale(H$gb.UnitX,H$g,H$t._tempV31),H$gb.TransformNormal(H$t._tempV31,H$t._tempM0,H$t._tempV31),H$gb.scalarLength(H$t._tempV31)),H$gb.scale(this.extents,-1,H$t._tempV32),H$gb.Clamp(H$t._tempV30,H$t._tempV32,this.extents,H$t._tempV33),H$h*H$h<H$gb.distanceSquared(H$t._tempV30,H$t._tempV33))return 0;var H$i=H$t._tempV30.elements,H$j=H$i[0],H$k=H$i[1],H$l=H$i[2],H$m=H$t._tempV32.elements,H$n=H$m[0],H$o=H$m[1],H$p=H$m[2];return H$n+H$h<=H$j&&H$j<=H$d-H$h&&H$h<H$d-H$n&&H$o+H$h<=H$k&&H$k<=H$e-H$h&&H$h<H$e-H$o&&H$p+H$h<=H$l&&H$l<=H$f-H$h&&H$h<H$f-H$p?1:2},H$a.containsOrientedBoundBox=function(H$a){var H$b=0,H$c=0;H$a.getCorners(H$t._corners);var H$d=this.containsPoints(H$t._corners);if(0!=H$d)return H$d;var H$e=this.extents.elements;H$a.extents.cloneTo(H$t._tempV35);var H$f=H$t._tempV35.elements;H$t._getRows(this.transformation,H$t._rows1),H$t._getRows(H$a.transformation,H$t._rows2);var H$g=NaN;for(H$b=0;H$b<4;H$b++)for(H$c=0;H$c<4;H$c++)3==H$b||3==H$c?(H$t._tempM0.setElementByRowColumn(H$b,H$c,0),H$t._tempM1.setElementByRowColumn(H$b,H$c,0)):(H$g=H$gb.dot(H$t._rows1[H$b],H$t._rows2[H$c]),H$t._tempM0.setElementByRowColumn(H$b,H$c,H$g),H$t._tempM1.setElementByRowColumn(H$b,H$c,Math.abs(H$g)));H$a.getCenter(H$t._tempV34),this.getCenter(H$t._tempV36),H$gb.subtract(H$t._tempV34,H$t._tempV36,H$t._tempV30);var H$h=H$t._tempV31.elements;H$h[0]=H$gb.dot(H$t._tempV30,H$t._rows1[0]),H$h[1]=H$gb.dot(H$t._tempV30,H$t._rows1[1]),H$h[2]=H$gb.dot(H$t._tempV30,H$t._rows1[2]);var H$i=H$t._tempV32.elements,H$j=H$t._tempV33.elements;for(H$b=0;H$b<3;H$b++)if(H$i[0]=H$t._tempM1.getElementByRowColumn(H$b,0),H$i[1]=H$t._tempM1.getElementByRowColumn(H$b,1),H$i[2]=H$t._tempM1.getElementByRowColumn(H$b,2),H$e[H$b]+H$gb.dot(H$t._tempV35,H$t._tempV32)<Math.abs(H$h[H$b]))return 0;for(H$c=0;H$c<3;H$c++)if(H$i[0]=H$t._tempM1.getElementByRowColumn(0,H$c),H$i[1]=H$t._tempM1.getElementByRowColumn(1,H$c),H$i[2]=H$t._tempM1.getElementByRowColumn(2,H$c),H$j[0]=H$t._tempM0.getElementByRowColumn(0,H$c),H$j[1]=H$t._tempM0.getElementByRowColumn(1,H$c),H$j[2]=H$t._tempM0.getElementByRowColumn(2,H$c),H$gb.dot(this.extents,H$t._tempV32)+H$f[H$c]<Math.abs(H$gb.dot(H$t._tempV31,H$t._tempV33)))return 0;for(H$b=0;H$b<3;H$b++)for(H$c=0;H$c<3;H$c++){var H$k=(H$b+1)%3,H$l=(H$b+2)%3,H$m=(H$c+1)%3,H$n=(H$c+2)%3;if(H$e[H$k]*H$t._tempM1.getElementByRowColumn(H$l,H$c)+H$e[H$l]*H$t._tempM1.getElementByRowColumn(H$k,H$c)+(H$f[H$m]*H$t._tempM1.getElementByRowColumn(H$b,H$n)+H$f[H$n]*H$t._tempM1.getElementByRowColumn(H$b,H$m))<Math.abs(H$h[H$l]*H$t._tempM0.getElementByRowColumn(H$k,H$c)-H$h[H$k]*H$t._tempM0.getElementByRowColumn(H$l,H$c)))return 0}return 2},H$a.containsLine=function(H$a,H$b){H$t._corners[0]=H$a,H$t._corners[1]=H$b;var H$c=this.containsPoints(H$t._corners);if(0!=H$c)return H$c;var H$d=this.extents.elements,H$e=H$d[0],H$f=H$d[1],H$g=H$d[2];this.transformation.invert(H$t._tempM0),H$gb.transformCoordinate(H$a,H$t._tempM0,H$t._tempV30),H$gb.transformCoordinate(H$b,H$t._tempM0,H$t._tempV31),H$gb.add(H$t._tempV30,H$t._tempV31,H$t._tempV32),H$gb.scale(H$t._tempV32,.5,H$t._tempV32),H$gb.subtract(H$t._tempV30,H$t._tempV32,H$t._tempV33);var H$h=H$t._tempV33.elements,H$i=H$h[0],H$j=H$h[1],H$k=H$h[2],H$l=H$t._tempV34.elements,H$m=H$l[0]=Math.abs(H$h[0]),H$n=H$l[1]=Math.abs(H$h[1]),H$o=H$l[2]=Math.abs(H$h[2]),H$p=H$t._tempV32.elements,H$q=H$p[0],H$r=H$p[1],H$s=H$p[2];return Math.abs(H$q)>H$e+H$m?0:Math.abs(H$r)>H$f+H$n?0:Math.abs(H$s)>H$g+H$o?0:Math.abs(H$r*H$k-H$s*H$j)>H$f*H$o+H$g*H$n?0:Math.abs(H$q*H$k-H$s*H$i)>H$e*H$o+H$g*H$m?0:Math.abs(H$q*H$j-H$r*H$i)>H$e*H$n+H$f*H$m?0:2},H$a.containsBoundBox=function(H$a){var H$b=0,H$c=0,H$d=H$a.min,H$e=H$a.max;H$a.getCorners(H$t._corners);var H$f=this.containsPoints(H$t._corners);if(0!=H$f)return H$f;H$gb.subtract(H$e,H$d,H$t._tempV30),H$gb.scale(H$t._tempV30,.5,H$t._tempV30),H$gb.add(H$d,H$t._tempV30,H$t._tempV30),H$gb.subtract(H$e,H$t._tempV30,H$t._tempV31);var H$g=this.extents.elements,H$h=H$t._tempV31.elements;H$t._getRows(this.transformation,H$t._rows1),this.transformation.invert(H$t._tempM0);for(H$b=0;H$b<3;H$b++)for(H$c=0;H$c<3;H$c++)H$t._tempM1.setElementByRowColumn(H$b,H$c,Math.abs(H$t._tempM0.getElementByRowColumn(H$b,H$c)));this.getCenter(H$t._tempV35),H$gb.subtract(H$t._tempV30,H$t._tempV35,H$t._tempV32);var H$i=H$t._tempV31.elements;H$i[0]=H$gb.dot(H$t._tempV32,H$t._rows1[0]),H$i[1]=H$gb.dot(H$t._tempV32,H$t._rows1[1]),H$i[2]=H$gb.dot(H$t._tempV32,H$t._rows1[2]);var H$j=H$t._tempV33.elements,H$k=H$t._tempV34.elements;for(H$b=0;H$b<3;H$b++)if(H$j[0]=H$t._tempM1.getElementByRowColumn(H$b,0),H$j[1]=H$t._tempM1.getElementByRowColumn(H$b,1),H$j[2]=H$t._tempM1.getElementByRowColumn(H$b,2),H$g[H$b]+H$gb.dot(H$t._tempV31,H$t._tempV33)<Math.abs(H$i[H$b]))return 0;for(H$c=0;H$c<3;H$c++)if(H$j[0]=H$t._tempM1.getElementByRowColumn(0,H$c),H$j[1]=H$t._tempM1.getElementByRowColumn(1,H$c),H$j[2]=H$t._tempM1.getElementByRowColumn(2,H$c),H$k[0]=H$t._tempM0.getElementByRowColumn(0,H$c),H$k[1]=H$t._tempM0.getElementByRowColumn(1,H$c),H$k[2]=H$t._tempM0.getElementByRowColumn(2,H$c),H$gb.dot(this.extents,H$t._tempV33)+H$h[H$c]<Math.abs(H$gb.dot(H$t._tempV31,H$t._tempV34)))return 0;for(H$b=0;H$b<3;H$b++)for(H$c=0;H$c<3;H$c++){var H$l=(H$b+1)%3,H$m=(H$b+2)%3,H$n=(H$c+1)%3,H$o=(H$c+2)%3;if(H$g[H$l]*H$t._tempM1.getElementByRowColumn(H$m,H$c)+H$g[H$m]*H$t._tempM1.getElementByRowColumn(H$l,H$c)+(H$h[H$n]*H$t._tempM1.getElementByRowColumn(H$b,H$o)+H$h[H$o]*H$t._tempM1.getElementByRowColumn(H$b,H$n))<Math.abs(H$i[H$m]*H$t._tempM0.getElementByRowColumn(H$l,H$c)-H$i[H$l]*H$t._tempM0.getElementByRowColumn(H$m,H$c)))return 0}return 2},H$a.intersectsRay=function(H$a,H$b){H$gb.scale(this.extents,-1,H$t._tempV30),this.transformation.invert(H$t._tempM0),H$gb.TransformNormal(H$a.direction,H$t._tempM0,H$t._ray.direction),H$gb.transformCoordinate(H$a.origin,H$t._tempM0,H$t._ray.origin),H$t._boxBound1.min=H$t._tempV30,H$t._boxBound1.max=this.extents;var H$c=Collision.intersectsRayAndBoxRP(H$t._ray,H$t._boxBound1,H$b);return-1!==H$c&&H$gb.transformCoordinate(H$b,this.transformation,H$b),H$c},H$a._getLocalCorners=function(H$a){H$a.length=8;var H$b=this.extents.elements;H$t._tempV30.x=H$b[0],H$t._tempV31.y=H$b[1],H$t._tempV32.z=H$b[2],H$gb.add(H$t._tempV30,H$t._tempV31,H$t._tempV33),H$gb.add(H$t._tempV33,H$t._tempV32,H$a[0]),H$gb.add(H$t._tempV30,H$t._tempV31,H$t._tempV33),H$gb.subtract(H$t._tempV33,H$t._tempV32,H$a[1]),H$gb.subtract(H$t._tempV31,H$t._tempV30,H$t._tempV33),H$gb.subtract(H$t._tempV33,H$t._tempV30,H$a[2]),H$gb.subtract(H$t._tempV31,H$t._tempV30,H$t._tempV33),H$gb.add(H$t._tempV33,H$t._tempV32,H$a[3]),H$gb.subtract(H$t._tempV30,H$t._tempV31,H$t._tempV33),H$gb.add(H$t._tempV33,H$t._tempV32,H$a[4]),H$gb.subtract(H$t._tempV30,H$t._tempV31,H$t._tempV33),H$gb.subtract(H$t._tempV33,H$t._tempV32,H$a[5]),H$gb.scale(H$a[0],-1,H$a[6]),H$gb.subtract(H$t._tempV32,H$t._tempV30,H$t._tempV33),H$gb.subtract(H$t._tempV33,H$t._tempV31,H$a[7])},H$a.equals=function(H$a){return this.extents==H$a.extents&&this.transformation==H$a.transformation},H$a.cloneTo=function(H$a){var H$b=H$a;this.extents.cloneTo(H$b.extents),this.transformation.cloneTo(H$b.transformation)},H$t.createByBoundBox=function(H$a,H$b){var H$c=H$a.min,H$d=H$a.max;H$gb.subtract(H$d,H$c,H$t._tempV30),H$gb.scale(H$t._tempV30,.5,H$t._tempV30),H$gb.add(H$c,H$t._tempV30,H$t._tempV31),H$gb.subtract(H$d,H$t._tempV31,H$t._tempV32),H$ab.translation(H$t._tempV31,H$t._tempM0);var H$e=H$t._tempV32.clone(),H$f=H$t._tempM0.clone();H$b.extents=H$e,H$b.transformation=H$f},H$t.createByMinAndMaxVertex=function(H$a,H$b){return H$gb.subtract(H$b,H$a,H$t._tempV30),H$gb.scale(H$t._tempV30,.5,H$t._tempV30),H$gb.add(H$a,H$t._tempV30,H$t._tempV31),H$gb.subtract(H$b,H$t._tempV31,H$t._tempV32),H$ab.translation(H$t._tempV31,H$t._tempM0),new H$t(H$t._tempV32,H$t._tempM0)},H$t._getRows=function(H$a,H$b){H$b.length=3;var H$c=H$a.elements,H$d=H$b[0].elements;H$d[0]=H$c[0],H$d[1]=H$c[1],H$d[2]=H$c[2];var H$e=H$b[1].elements;H$e[0]=H$c[4],H$e[1]=H$c[5],H$e[2]=H$c[6];var H$f=H$b[2].elements;H$f[0]=H$c[8],H$f[1]=H$c[9],H$f[2]=H$c[10]},H$t.getObbtoObbMatrix4x4=function(H$a,H$b,H$c,H$d){var H$e=H$a.transformation,H$f=H$b.transformation;if(H$c){H$t._getRows(H$e,H$t._rows1),H$t._getRows(H$f,H$t._rows2);for(var H$g=0;H$g<3;H$g++)for(var H$h=0;H$h<3;H$h++)H$d.setElementByRowColumn(H$g,H$h,H$gb.dot(H$t._rows2[H$g],H$t._rows1[H$h]));H$b.getCenter(H$t._tempV30),H$a.getCenter(H$t._tempV31),H$gb.subtract(H$t._tempV30,H$t._tempV31,H$t._tempV32);var H$i=H$d.elements;H$i[12]=H$gb.dot(H$t._tempV32,H$t._rows1[0]),H$i[13]=H$gb.dot(H$t._tempV32,H$t._rows1[1]),H$i[14]=H$gb.dot(H$t._tempV32,H$t._rows1[2]),H$i[15]=1}else H$e.invert(H$t._tempM0),H$ab.multiply(H$f,H$t._tempM0,H$d)},H$t.merge=function(H$a,H$b,H$c){var H$d=H$a.extents,H$e=H$a.transformation;H$t.getObbtoObbMatrix4x4(H$a,H$b,H$c,H$t._tempM0),H$b._getLocalCorners(H$t._corners),H$gb.transformCoordinate(H$t._corners[0],H$t._tempM0,H$t._corners[0]),H$gb.transformCoordinate(H$t._corners[1],H$t._tempM0,H$t._corners[1]),H$gb.transformCoordinate(H$t._corners[2],H$t._tempM0,H$t._corners[2]),H$gb.transformCoordinate(H$t._corners[3],H$t._tempM0,H$t._corners[3]),H$gb.transformCoordinate(H$t._corners[4],H$t._tempM0,H$t._corners[4]),H$gb.transformCoordinate(H$t._corners[5],H$t._tempM0,H$t._corners[5]),H$gb.transformCoordinate(H$t._corners[6],H$t._tempM0,H$t._corners[6]),H$gb.transformCoordinate(H$t._corners[7],H$t._tempM0,H$t._corners[7]),H$gb.scale(H$d,-1,H$t._boxBound1.min),H$d.cloneTo(H$t._boxBound1.max),H$Xa.createfromPoints(H$t._corners,H$t._boxBound2),H$Xa.merge(H$t._boxBound2,H$t._boxBound1,H$t._boxBound3);var H$f=H$t._boxBound3.min,H$g=H$t._boxBound3.max;H$gb.subtract(H$g,H$f,H$t._tempV30),H$gb.scale(H$t._tempV30,.5,H$t._tempV30),H$gb.add(H$f,H$t._tempV30,H$t._tempV32),H$gb.subtract(H$g,H$t._tempV32,H$d),H$gb.transformCoordinate(H$t._tempV32,H$e,H$t._tempV33)},H$l(H$t,["_tempV30",function(){return this._tempV30=new H$gb},"_tempV31",function(){return this._tempV31=new H$gb},"_tempV32",function(){return this._tempV32=new H$gb},"_tempV33",function(){return this._tempV33=new H$gb},"_tempV34",function(){return this._tempV34=new H$gb},"_tempV35",function(){return this._tempV35=new H$gb},"_tempV36",function(){return this._tempV36=new H$gb},"_tempM0",function(){return this._tempM0=new H$ab},"_tempM1",function(){return this._tempM1=new H$ab},"_corners",function(){return this._corners=[new H$gb,new H$gb,new H$gb,new H$gb,new H$gb,new H$gb,new H$gb,new H$gb]},"_rows1",function(){return this._rows1=[new H$gb,new H$gb,new H$gb]},"_rows2",function(){return this._rows2=[new H$gb,new H$gb,new H$gb]},"_ray",function(){return this._ray=new H$eb(new H$gb,new H$gb)},"_boxBound1",function(){return this._boxBound1=new H$Xa(new H$gb,new H$gb)},"_boxBound2",function(){return this._boxBound2=new H$Xa(new H$gb,new H$gb)},"_boxBound3",function(){return this._boxBound3=new H$Xa(new H$gb,new H$gb)}])}(),function(){function H$v(H$a,H$b){this.normal=null,this.distance=NaN,void 0===H$b&&(H$b=0),this.normal=H$a,this.distance=H$b}return H$n(H$v,"laya.d3.math.Plane"),H$v.prototype.normalize=function(){var H$a=this.normal.elements,H$b=H$a[0],H$c=H$a[1],H$d=H$a[2],H$e=1/Math.sqrt(H$b*H$b+H$c*H$c+H$d*H$d);H$a[0]=H$b*H$e,H$a[1]=H$c*H$e,H$a[2]=H$d*H$e,this.distance*=H$e},H$v.createPlaneBy3P=function(H$a,H$b,H$c){var H$d=H$a.elements,H$e=H$b.elements,H$f=H$c.elements,H$g=H$e[0]-H$d[0],H$h=H$e[1]-H$d[1],H$i=H$e[2]-H$d[2],H$j=H$f[0]-H$d[0],H$k=H$f[1]-H$d[1],H$l=H$f[2]-H$d[2],H$m=H$h*H$l-H$i*H$k,H$n=H$i*H$j-H$g*H$l,H$o=H$g*H$k-H$h*H$j,H$p=1/Math.sqrt(H$m*H$m+H$n*H$n+H$o*H$o),H$q=H$m*H$p,H$r=H$n*H$p,H$s=H$o*H$p,H$t=H$v._TEMPVec3.elements;H$t[0]=H$q,H$t[1]=H$r,H$t[2]=H$s;var H$u=-(H$q*H$d[0]+H$r*H$d[1]+H$s*H$d[2]);return new H$v(H$v._TEMPVec3,H$u)},H$v.PlaneIntersectionType_Back=0,H$v.PlaneIntersectionType_Front=1,H$v.PlaneIntersectionType_Intersecting=2,H$l(H$v,["_TEMPVec3",function(){return this._TEMPVec3=new H$gb}]),H$v}()),H$cb=function(){function H$e(H$a,H$b,H$c,H$d){this.elements=new Float32Array(4),void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0),void 0===H$d&&(H$d=1),this.elements[0]=H$a,this.elements[1]=H$b,this.elements[2]=H$c,this.elements[3]=H$d}H$n(H$e,"laya.d3.math.Quaternion");var H$a=H$e.prototype;return H$v.imps(H$a,{"laya.d3.core.IClone":!0}),H$a.scaling=function(H$a,H$b){var H$c=H$b.elements,H$d=this.elements;H$c[0]=H$d[0]*H$a,H$c[1]=H$d[1]*H$a,H$c[2]=H$d[2]*H$a,H$c[3]=H$d[3]*H$a},H$a.normalize=function(H$a){var H$b=H$a.elements,H$c=this.elements,H$d=H$c[0],H$e=H$c[1],H$f=H$c[2],H$g=H$c[3],H$h=H$d*H$d+H$e*H$e+H$f*H$f+H$g*H$g;0<H$h&&(H$h=1/Math.sqrt(H$h),H$b[0]=H$d*H$h,H$b[1]=H$e*H$h,H$b[2]=H$f*H$h,H$b[3]=H$g*H$h)},H$a.length=function(){var H$a=this.elements,H$b=H$a[0],H$c=H$a[1],H$d=H$a[2],H$e=H$a[3];return Math.sqrt(H$b*H$b+H$c*H$c+H$d*H$d+H$e*H$e)},H$a.rotateX=function(H$a,H$b){var H$c=H$b.elements,H$d=this.elements;H$a*=.5;var H$e=H$d[0],H$f=H$d[1],H$g=H$d[2],H$h=H$d[3],H$i=Math.sin(H$a),H$j=Math.cos(H$a);H$c[0]=H$e*H$j+H$h*H$i,H$c[1]=H$f*H$j+H$g*H$i,H$c[2]=H$g*H$j-H$f*H$i,H$c[3]=H$h*H$j-H$e*H$i},H$a.rotateY=function(H$a,H$b){var H$c=H$b.elements,H$d=this.elements;H$a*=.5;var H$e=H$d[0],H$f=H$d[1],H$g=H$d[2],H$h=H$d[3],H$i=Math.sin(H$a),H$j=Math.cos(H$a);H$c[0]=H$e*H$j-H$g*H$i,H$c[1]=H$f*H$j+H$h*H$i,H$c[2]=H$g*H$j+H$e*H$i,H$c[3]=H$h*H$j-H$f*H$i},H$a.rotateZ=function(H$a,H$b){var H$c=H$b.elements,H$d=this.elements;H$a*=.5;var H$e=H$d[0],H$f=H$d[1],H$g=H$d[2],H$h=H$d[3],H$i=Math.sin(H$a),H$j=Math.cos(H$a);H$c[0]=H$e*H$j+H$f*H$i,H$c[1]=H$f*H$j-H$e*H$i,H$c[2]=H$g*H$j+H$h*H$i,H$c[3]=H$h*H$j-H$g*H$i},H$a.getYawPitchRoll=function(H$a){H$gb.transformQuat(H$gb.ForwardRH,this,H$e.TEMPVector31),H$gb.transformQuat(H$gb.Up,this,H$e.TEMPVector32);var H$b=H$e.TEMPVector32.elements;H$e.angleTo(H$gb.ZERO,H$e.TEMPVector31,H$e.TEMPVector33);var H$c=H$e.TEMPVector33.elements;H$c[0]==Math.PI/2?(H$c[1]=H$e.arcTanAngle(H$b[2],H$b[0]),H$c[2]=0):H$c[0]==-Math.PI/2?(H$c[1]=H$e.arcTanAngle(-H$b[2],-H$b[0]),H$c[2]=0):(H$ab.createRotationY(-H$c[1],H$e.TEMPMatrix0),H$ab.createRotationX(-H$c[0],H$e.TEMPMatrix1),H$gb.transformCoordinate(H$e.TEMPVector32,H$e.TEMPMatrix0,H$e.TEMPVector32),H$gb.transformCoordinate(H$e.TEMPVector32,H$e.TEMPMatrix1,H$e.TEMPVector32),H$c[2]=H$e.arcTanAngle(H$b[1],-H$b[0])),H$c[1]<=-Math.PI&&(H$c[1]=Math.PI),H$c[2]<=-Math.PI&&(H$c[2]=Math.PI),H$c[1]>=Math.PI&&H$c[2]>=Math.PI&&(H$c[1]=0,H$c[2]=0,H$c[0]=Math.PI-H$c[0]);var H$d=H$a.elements;H$d[0]=H$c[1],H$d[1]=H$c[0],H$d[2]=H$c[2]},H$a.invert=function(H$a){var H$b=H$a.elements,H$c=this.elements,H$d=H$c[0],H$e=H$c[1],H$f=H$c[2],H$g=H$c[3],H$h=H$d*H$d+H$e*H$e+H$f*H$f+H$g*H$g,H$i=H$h?1/H$h:0;H$b[0]=-H$d*H$i,H$b[1]=-H$e*H$i,H$b[2]=-H$f*H$i,H$b[3]=H$g*H$i},H$a.identity=function(){var H$a=this.elements;H$a[0]=0,H$a[1]=0,H$a[2]=0,H$a[3]=1},H$a.fromArray=function(H$a,H$b){void 0===H$b&&(H$b=0),this.elements[0]=H$a[H$b+0],this.elements[1]=H$a[H$b+1],this.elements[2]=H$a[H$b+2],this.elements[3]=H$a[H$b+3]},H$a.cloneTo=function(H$a){var H$b,H$c,H$d;if((H$c=this.elements)!==(H$d=H$a.elements))for(H$b=0;H$b<4;++H$b)H$d[H$b]=H$c[H$b]},H$a.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$a.equals=function(H$a){var H$b=this.elements,H$c=H$a.elements;return H$$a.nearEqual(H$b[0],H$c[0])&&H$$a.nearEqual(H$b[1],H$c[1])&&H$$a.nearEqual(H$b[2],H$c[2])&&H$$a.nearEqual(H$b[3],H$c[3])},H$a.lengthSquared=function(){var H$a=this.elements[0],H$b=this.elements[1],H$c=this.elements[2],H$d=this.elements[3];return H$a*H$a+H$b*H$b+H$c*H$c+H$d*H$d},H$o(0,H$a,"x",function(){return this.elements[0]}),H$o(0,H$a,"y",function(){return this.elements[1]}),H$o(0,H$a,"z",function(){return this.elements[2]}),H$o(0,H$a,"w",function(){return this.elements[3]}),H$e.createFromYawPitchRoll=function(H$a,H$b,H$c,H$d){var H$e=.5*H$c,H$f=.5*H$b,H$g=.5*H$a,H$h=Math.sin(H$e),H$i=Math.cos(H$e),H$j=Math.sin(H$f),H$k=Math.cos(H$f),H$l=Math.sin(H$g),H$m=Math.cos(H$g),H$n=H$d.elements;H$n[0]=H$m*H$j*H$i+H$l*H$k*H$h,H$n[1]=H$l*H$k*H$i-H$m*H$j*H$h,H$n[2]=H$m*H$k*H$h-H$l*H$j*H$i,H$n[3]=H$m*H$k*H$i+H$l*H$j*H$h},H$e.multiply=function(H$a,H$b,H$c){var H$d=H$a.elements,H$e=H$b.elements,H$f=H$c.elements,H$g=H$d[0],H$h=H$d[1],H$i=H$d[2],H$j=H$d[3],H$k=H$e[0],H$l=H$e[1],H$m=H$e[2],H$n=H$e[3],H$o=H$h*H$m-H$i*H$l,H$p=H$i*H$k-H$g*H$m,H$q=H$g*H$l-H$h*H$k,H$r=H$g*H$k+H$h*H$l+H$i*H$m;H$f[0]=H$g*H$n+H$k*H$j+H$o,H$f[1]=H$h*H$n+H$l*H$j+H$p,H$f[2]=H$i*H$n+H$m*H$j+H$q,H$f[3]=H$j*H$n-H$r},H$e.arcTanAngle=function(H$a,H$b){return 0==H$a?1==H$b?Math.PI/2:-Math.PI/2:0<H$a?Math.atan(H$b/H$a):H$a<0?0<H$b?Math.atan(H$b/H$a)+Math.PI:Math.atan(H$b/H$a)-Math.PI:0},H$e.angleTo=function(H$a,H$b,H$c){H$gb.subtract(H$b,H$a,H$e.TEMPVector30),H$gb.normalize(H$e.TEMPVector30,H$e.TEMPVector30),H$c.elements[0]=Math.asin(H$e.TEMPVector30.y),H$c.elements[1]=H$e.arcTanAngle(-H$e.TEMPVector30.z,-H$e.TEMPVector30.x)},H$e.createFromAxisAngle=function(H$a,H$b,H$c){var H$d=H$c.elements,H$e=H$a.elements;H$b*=.5;var H$f=Math.sin(H$b);H$d[0]=H$f*H$e[0],H$d[1]=H$f*H$e[1],H$d[2]=H$f*H$e[2],H$d[3]=Math.cos(H$b)},H$e.createFromMatrix3x3=function(H$a,H$b){var H$c,H$d=H$b.elements,H$e=H$a.elements,H$f=H$e[0]+H$e[4]+H$e[8];if(0<H$f)H$c=Math.sqrt(H$f+1),H$d[3]=.5*H$c,H$c=.5/H$c,H$d[0]=(H$e[5]-H$e[7])*H$c,H$d[1]=(H$e[6]-H$e[2])*H$c,H$d[2]=(H$e[1]-H$e[3])*H$c;else{var H$g=0;H$e[4]>H$e[0]&&(H$g=1),H$e[8]>H$e[3*H$g+H$g]&&(H$g=2);var H$h=(H$g+1)%3,H$i=(H$g+2)%3;H$c=Math.sqrt(H$e[3*H$g+H$g]-H$e[3*H$h+H$h]-H$e[3*H$i+H$i]+1),H$d[H$g]=.5*H$c,H$c=.5/H$c,H$d[3]=(H$e[3*H$h+H$i]-H$e[3*H$i+H$h])*H$c,H$d[H$h]=(H$e[3*H$h+H$g]+H$e[3*H$g+H$h])*H$c,H$d[H$i]=(H$e[3*H$i+H$g]+H$e[3*H$g+H$i])*H$c}},H$e.createFromMatrix4x4=function(H$a,H$b){var H$c,H$d,H$e=H$a.elements,H$f=H$b.elements,H$g=H$e[0]+H$e[5]+H$e[10];0<H$g?(H$c=Math.sqrt(H$g+1),H$f[3]=.5*H$c,H$c=.5/H$c,H$f[0]=(H$e[6]-H$e[9])*H$c,H$f[1]=(H$e[8]-H$e[2])*H$c,H$f[2]=(H$e[1]-H$e[4])*H$c):H$e[0]>=H$e[5]&&H$e[0]>=H$e[10]?(H$d=.5/(H$c=Math.sqrt(1+H$e[0]-H$e[5]-H$e[10])),H$f[0]=.5*H$c,H$f[1]=(H$e[1]+H$e[4])*H$d,H$f[2]=(H$e[2]+H$e[8])*H$d,H$f[3]=(H$e[6]-H$e[9])*H$d):H$e[5]>H$e[10]?(H$d=.5/(H$c=Math.sqrt(1+H$e[5]-H$e[0]-H$e[10])),H$f[0]=(H$e[4]+H$e[1])*H$d,H$f[1]=.5*H$c,H$f[2]=(H$e[9]+H$e[6])*H$d,H$f[3]=(H$e[8]-H$e[2])*H$d):(H$d=.5/(H$c=Math.sqrt(1+H$e[10]-H$e[0]-H$e[5])),H$f[0]=(H$e[8]+H$e[2])*H$d,H$f[1]=(H$e[9]+H$e[6])*H$d,H$f[2]=.5*H$c,H$f[3]=(H$e[1]-H$e[4])*H$d)},H$e.slerp=function(H$a,H$b,H$c,H$d){var H$e,H$f,H$g,H$h,H$i,H$j=H$a.elements,H$k=H$b.elements,H$l=H$d.elements,H$m=H$j[0],H$n=H$j[1],H$o=H$j[2],H$p=H$j[3],H$q=H$k[0],H$r=H$k[1],H$s=H$k[2],H$t=H$k[3];return(H$f=H$m*H$q+H$n*H$r+H$o*H$s+H$p*H$t)<0&&(H$f=-H$f,H$q=-H$q,H$r=-H$r,H$s=-H$s,H$t=-H$t),H$i=1e-6<1-H$f?(H$e=Math.acos(H$f),H$g=Math.sin(H$e),H$h=Math.sin((1-H$c)*H$e)/H$g,Math.sin(H$c*H$e)/H$g):(H$h=1-H$c,H$c),H$l[0]=H$h*H$m+H$i*H$q,H$l[1]=H$h*H$n+H$i*H$r,H$l[2]=H$h*H$o+H$i*H$s,H$l[3]=H$h*H$p+H$i*H$t,H$l},H$e.lerp=function(H$a,H$b,H$c,H$d){var H$e=H$d.elements,H$f=H$a.elements,H$g=H$b.elements,H$h=H$f[0],H$i=H$f[1],H$j=H$f[2],H$k=H$f[3];H$e[0]=H$h+H$c*(H$g[0]-H$h),H$e[1]=H$i+H$c*(H$g[1]-H$i),H$e[2]=H$j+H$c*(H$g[2]-H$j),H$e[3]=H$k+H$c*(H$g[3]-H$k)},H$e.add=function(H$a,H$b,H$c){var H$d=H$c.elements,H$e=H$a.elements,H$f=H$b.elements;H$d[0]=H$e[0]+H$f[0],H$d[1]=H$e[1]+H$f[1],H$d[2]=H$e[2]+H$f[2],H$d[3]=H$e[3]+H$f[3]},H$e.dot=function(H$a,H$b){var H$c=H$a.elements,H$d=H$b.elements;return H$c[0]*H$d[0]+H$c[1]*H$d[1]+H$c[2]*H$d[2]+H$c[3]*H$d[3]},H$e.rotationLookAt=function(H$a,H$b,H$c){H$e.lookAt(H$gb.ZERO,H$a,H$b,H$c)},H$e.lookAt=function(H$a,H$b,H$c,H$d){H$_a.lookAt(H$a,H$b,H$c,H$e._tempMatrix3x3),H$e.rotationMatrix(H$e._tempMatrix3x3,H$d)},H$e.invert=function(H$a,H$b){var H$c=H$a.elements,H$d=H$b.elements,H$e=H$a.lengthSquared();H$$a.isZero(H$e)||(H$e=1/H$e,H$d[0]=-H$c[0]*H$e,H$d[1]=-H$c[1]*H$e,H$d[2]=-H$c[2]*H$e,H$d[3]=H$c[3]*H$e)},H$e.rotationMatrix=function(H$a,H$b){var H$c=H$a.elements,H$d=H$c[0],H$e=H$c[1],H$f=H$c[2],H$g=H$c[3],H$h=H$c[4],H$i=H$c[5],H$j=H$c[6],H$k=H$c[7],H$l=H$c[8],H$m=H$b.elements,H$n=NaN,H$o=NaN,H$p=H$d+H$h+H$l;0<H$p?(H$n=Math.sqrt(H$p+1),H$m[3]=.5*H$n,H$n=.5/H$n,H$m[0]=(H$i-H$k)*H$n,H$m[1]=(H$j-H$f)*H$n,H$m[2]=(H$e-H$g)*H$n):H$h<=H$d&&H$l<=H$d?(H$o=.5/(H$n=Math.sqrt(1+H$d-H$h-H$l)),H$m[0]=.5*H$n,H$m[1]=(H$e+H$g)*H$o,H$m[2]=(H$f+H$j)*H$o,H$m[3]=(H$i-H$k)*H$o):H$l<H$h?(H$o=.5/(H$n=Math.sqrt(1+H$h-H$d-H$l)),H$m[0]=(H$g+H$e)*H$o,H$m[1]=.5*H$n,H$m[2]=(H$k+H$i)*H$o,H$m[3]=(H$j-H$f)*H$o):(H$o=.5/(H$n=Math.sqrt(1+H$l-H$d-H$h)),H$m[0]=(H$j+H$f)*H$o,H$m[1]=(H$k+H$i)*H$o,H$m[2]=.5*H$n,H$m[3]=(H$e-H$g)*H$o)},H$e.DEFAULT=new H$e,H$l(H$e,["TEMPVector30",function(){return this.TEMPVector30=new H$gb},"TEMPVector31",function(){return this.TEMPVector31=new H$gb},"TEMPVector32",function(){return this.TEMPVector32=new H$gb},"TEMPVector33",function(){return this.TEMPVector33=new H$gb},"TEMPMatrix0",function(){return this.TEMPMatrix0=new H$ab},"TEMPMatrix1",function(){return this.TEMPMatrix1=new H$ab},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new H$_a},"NAN",function(){return this.NAN=new H$e(NaN,NaN,NaN,NaN)}]),H$e}(),H$db=function(){function H$a(H$a){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=H$a,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}H$n(H$a,"laya.d3.math.Rand");var H$b=H$a.prototype;return H$b.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},H$b.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},H$b.getSignedFloat=function(){return 2*this.getFloat()-1},H$o(0,H$b,"seed",function(){return this.seeds[0]},function(H$a){this.seeds[0]=H$a,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),H$a.getFloatFromInt=function(H$a){return 1/8388607*(8388607&H$a)},H$a.getByteFromInt=function(H$a){return(8388607&H$a)>>>15},H$a}(),H$eb=(function(){function H$e(H$a){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(H$a instanceof Array)||4!==H$a.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|H$a[0],this._state0L=0|H$a[1],this._state1U=0|H$a[2],this._state1L=0|H$a[3]}H$n(H$e,"laya.d3.math.RandX");var H$a=H$e.prototype;H$a.randomint=function(){var H$a=this._state0U,H$b=this._state0L,H$c=this._state1U,H$d=this._state1L,H$e=(H$d>>>0)+(H$b>>>0),H$f=H$c+H$a+(H$e/2>>>31)>>>0,H$g=H$e>>>0,H$h=0,H$i=0;H$h=(H$a^=H$h=H$a<<23|(-512&H$b)>>>9)^(this._state0U=H$c),H$i=(H$b^=H$i=H$b<<23)^(this._state0L=H$d);H$h^=H$a>>>18,H$i^=H$b>>>18|(262143&H$a)<<14;return H$h^=H$c>>>5,H$i^=H$d>>>5|(31&H$c)<<27,this._state1U=H$h,this._state1L=H$i,[H$f,H$g]},H$a.random=function(){var H$a=this.randomint(),H$b=H$a[0],H$c=1023<<20|H$b>>>12,H$d=0|(H$a[1]>>>12|(4095&H$b)<<20);return H$e._CONVERTION_BUFFER.setUint32(0,H$c,!1),H$e._CONVERTION_BUFFER.setUint32(4,H$d,!1),H$db._CONVERTION_BUFFER.getFloat64(0,!1)-1},H$l(H$e,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new H$db([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function H$a(H$a,H$b){this.origin=null,this.direction=null,this.origin=H$a,this.direction=H$b}return H$n(H$a,"laya.d3.math.Ray"),H$a}()),H$fb=function(){function H$a(H$a,H$b){this.elements=new Float32Array(2),void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=0);var H$c=this.elements;H$c[0]=H$a,H$c[1]=H$b}H$n(H$a,"laya.d3.math.Vector2");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.core.IClone":!0}),H$b.fromArray=function(H$a,H$b){void 0===H$b&&(H$b=0),this.elements[0]=H$a[H$b+0],this.elements[1]=H$a[H$b+1]},H$b.cloneTo=function(H$a){var H$b=H$a.elements,H$c=this.elements;H$b[0]=H$c[0],H$b[1]=H$c[1]},H$b.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$o(0,H$b,"x",function(){return this.elements[0]},function(H$a){this.elements[0]=H$a}),H$o(0,H$b,"y",function(){return this.elements[1]},function(H$a){this.elements[1]=H$a}),H$a.scale=function(H$a,H$b,H$c){var H$d=H$c.elements,H$e=H$a.elements;H$d[0]=H$e[0]*H$b,H$d[1]=H$e[1]*H$b},H$l(H$a,["ZERO",function(){return this.ZERO=new H$a(0,0)},"ONE",function(){return this.ONE=new H$a(1,1)}]),H$a}(),H$gb=function(){function H$k(H$a,H$b,H$c){this.elements=new Float32Array(3),void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0);var H$d=this.elements;H$d[0]=H$a,H$d[1]=H$b,H$d[2]=H$c}H$n(H$k,"laya.d3.math.Vector3");var H$a=H$k.prototype;return H$v.imps(H$a,{"laya.d3.core.IClone":!0}),H$a.fromArray=function(H$a,H$b){void 0===H$b&&(H$b=0),this.elements[0]=H$a[H$b+0],this.elements[1]=H$a[H$b+1],this.elements[2]=H$a[H$b+2]},H$a.cloneTo=function(H$a){var H$b=H$a.elements,H$c=this.elements;H$b[0]=H$c[0],H$b[1]=H$c[1],H$b[2]=H$c[2]},H$a.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$a.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},H$a.reset=function(H$a,H$b,H$c){this.elements[0]=H$a,this.elements[1]=H$b,this.elements[2]=H$c},H$o(0,H$a,"x",function(){return this.elements[0]},function(H$a){this.elements[0]=H$a}),H$o(0,H$a,"y",function(){return this.elements[1]},function(H$a){this.elements[1]=H$a}),H$o(0,H$a,"z",function(){return this.elements[2]},function(H$a){this.elements[2]=H$a}),H$k.distanceSquared=function(H$a,H$b){var H$c=H$a.elements,H$d=H$b.elements,H$e=H$c[0]-H$d[0],H$f=H$c[1]-H$d[1],H$g=H$c[2]-H$d[2];return H$e*H$e+H$f*H$f+H$g*H$g},H$k.distance=function(H$a,H$b){var H$c=H$a.elements,H$d=H$b.elements,H$e=H$c[0]-H$d[0],H$f=H$c[1]-H$d[1],H$g=H$c[2]-H$d[2];return Math.sqrt(H$e*H$e+H$f*H$f+H$g*H$g)},H$k.min=function(H$a,H$b,H$c){var H$d=H$c.elements,H$e=H$a.elements,H$f=H$b.elements;H$d[0]=Math.min(H$e[0],H$f[0]),H$d[1]=Math.min(H$e[1],H$f[1]),H$d[2]=Math.min(H$e[2],H$f[2])},H$k.max=function(H$a,H$b,H$c){var H$d=H$c.elements,H$e=H$a.elements,H$f=H$b.elements;H$d[0]=Math.max(H$e[0],H$f[0]),H$d[1]=Math.max(H$e[1],H$f[1]),H$d[2]=Math.max(H$e[2],H$f[2])},H$k.transformQuat=function(H$a,H$b,H$c){var H$d=H$c.elements,H$e=H$a.elements,H$f=H$b.elements,H$g=H$e[0],H$h=H$e[1],H$i=H$e[2],H$j=H$f[0],H$k=H$f[1],H$l=H$f[2],H$m=H$f[3],H$n=H$m*H$g+H$k*H$i-H$l*H$h,H$o=H$m*H$h+H$l*H$g-H$j*H$i,H$p=H$m*H$i+H$j*H$h-H$k*H$g,H$q=-H$j*H$g-H$k*H$h-H$l*H$i;H$d[0]=H$n*H$m+H$q*-H$j+H$o*-H$l-H$p*-H$k,H$d[1]=H$o*H$m+H$q*-H$k+H$p*-H$j-H$n*-H$l,H$d[2]=H$p*H$m+H$q*-H$l+H$n*-H$k-H$o*-H$j},H$k.scalarLength=function(H$a){var H$b=H$a.elements,H$c=H$b[0],H$d=H$b[1],H$e=H$b[2];return Math.sqrt(H$c*H$c+H$d*H$d+H$e*H$e)},H$k.scalarLengthSquared=function(H$a){var H$b=H$a.elements,H$c=H$b[0],H$d=H$b[1],H$e=H$b[2];return H$c*H$c+H$d*H$d+H$e*H$e},H$k.normalize=function(H$a,H$b){var H$c=H$a.elements,H$d=H$b.elements,H$e=H$c[0],H$f=H$c[1],H$g=H$c[2],H$h=H$e*H$e+H$f*H$f+H$g*H$g;0<H$h&&(H$h=1/Math.sqrt(H$h),H$d[0]=H$c[0]*H$h,H$d[1]=H$c[1]*H$h,H$d[2]=H$c[2]*H$h)},H$k.multiply=function(H$a,H$b,H$c){var H$d=H$c.elements,H$e=H$a.elements,H$f=H$b.elements;H$d[0]=H$e[0]*H$f[0],H$d[1]=H$e[1]*H$f[1],H$d[2]=H$e[2]*H$f[2]},H$k.scale=function(H$a,H$b,H$c){var H$d=H$c.elements,H$e=H$a.elements;H$d[0]=H$e[0]*H$b,H$d[1]=H$e[1]*H$b,H$d[2]=H$e[2]*H$b},H$k.lerp=function(H$a,H$b,H$c,H$d){var H$e=H$d.elements,H$f=H$a.elements,H$g=H$b.elements,H$h=H$f[0],H$i=H$f[1],H$j=H$f[2];H$e[0]=H$h+H$c*(H$g[0]-H$h),H$e[1]=H$i+H$c*(H$g[1]-H$i),H$e[2]=H$j+H$c*(H$g[2]-H$j)},H$k.transformV3ToV3=function(H$a,H$b,H$c){var H$d=H$k._tempVector4;H$k.transformV3ToV4(H$a,H$b,H$d);var H$e=H$d.elements,H$f=H$c.elements;H$f[0]=H$e[0],H$f[1]=H$e[1],H$f[2]=H$e[2]},H$k.transformV3ToV4=function(H$a,H$b,H$c){var H$d=H$a.elements,H$e=H$d[0],H$f=H$d[1],H$g=H$d[2],H$h=H$b.elements,H$i=H$c.elements;H$i[0]=H$e*H$h[0]+H$f*H$h[4]+H$g*H$h[8]+H$h[12],H$i[1]=H$e*H$h[1]+H$f*H$h[5]+H$g*H$h[9]+H$h[13],H$i[2]=H$e*H$h[2]+H$f*H$h[6]+H$g*H$h[10]+H$h[14],H$i[3]=H$e*H$h[3]+H$f*H$h[7]+H$g*H$h[11]+H$h[15]},H$k.TransformNormal=function(H$a,H$b,H$c){var H$d=H$a.elements,H$e=H$d[0],H$f=H$d[1],H$g=H$d[2],H$h=H$b.elements,H$i=H$c.elements;H$i[0]=H$e*H$h[0]+H$f*H$h[4]+H$g*H$h[8],H$i[1]=H$e*H$h[1]+H$f*H$h[5]+H$g*H$h[9],H$i[2]=H$e*H$h[2]+H$f*H$h[6]+H$g*H$h[10]},H$k.transformCoordinate=function(H$a,H$b,H$c){var H$d=H$k._tempVector4.elements,H$e=H$a.elements,H$f=H$e[0],H$g=H$e[1],H$h=H$e[2],H$i=H$b.elements;H$d[0]=H$f*H$i[0]+H$g*H$i[4]+H$h*H$i[8]+H$i[12],H$d[1]=H$f*H$i[1]+H$g*H$i[5]+H$h*H$i[9]+H$i[13],H$d[2]=H$f*H$i[2]+H$g*H$i[6]+H$h*H$i[10]+H$i[14],H$d[3]=1/(H$f*H$i[3]+H$g*H$i[7]+H$h*H$i[11]+H$i[15]);var H$j=H$c.elements;H$j[0]=H$d[0]*H$d[3],H$j[1]=H$d[1]*H$d[3],H$j[2]=H$d[2]*H$d[3]},H$k.Clamp=function(H$a,H$b,H$c,H$d){var H$e=H$a.elements,H$f=H$e[0],H$g=H$e[1],H$h=H$e[2],H$i=H$b.elements,H$j=H$i[0],H$k=H$i[1],H$l=H$i[2],H$m=H$c.elements,H$n=H$m[0],H$o=H$m[1],H$p=H$m[2],H$q=H$d.elements;H$f=(H$f=H$n<H$f?H$n:H$f)<H$j?H$j:H$f,H$g=(H$g=H$o<H$g?H$o:H$g)<H$k?H$k:H$g,H$h=(H$h=H$p<H$h?H$p:H$h)<H$l?H$l:H$h,H$q[0]=H$f,H$q[1]=H$g,H$q[2]=H$h},H$k.add=function(H$a,H$b,H$c){var H$d=H$c.elements,H$e=H$a.elements,H$f=H$b.elements;H$d[0]=H$e[0]+H$f[0],H$d[1]=H$e[1]+H$f[1],H$d[2]=H$e[2]+H$f[2]},H$k.subtract=function(H$a,H$b,H$c){var H$d=H$c.elements,H$e=H$a.elements,H$f=H$b.elements;H$d[0]=H$e[0]-H$f[0],H$d[1]=H$e[1]-H$f[1],H$d[2]=H$e[2]-H$f[2]},H$k.cross=function(H$a,H$b,H$c){var H$d=H$a.elements,H$e=H$b.elements,H$f=H$c.elements,H$g=H$d[0],H$h=H$d[1],H$i=H$d[2],H$j=H$e[0],H$k=H$e[1],H$l=H$e[2];H$f[0]=H$h*H$l-H$i*H$k,H$f[1]=H$i*H$j-H$g*H$l,H$f[2]=H$g*H$k-H$h*H$j},H$k.dot=function(H$a,H$b){var H$c=H$a.elements,H$d=H$b.elements;return H$c[0]*H$d[0]+H$c[1]*H$d[1]+H$c[2]*H$d[2]},H$k.equals=function(H$a,H$b){var H$c=H$a.elements,H$d=H$b.elements;return H$$a.nearEqual(Math.abs(H$c[0]),Math.abs(H$d[0]))&&H$$a.nearEqual(Math.abs(H$c[1]),Math.abs(H$d[1]))&&H$$a.nearEqual(Math.abs(H$c[2]),Math.abs(H$d[2]))},H$k.ZERO=new H$k(0,0,0),H$k.ONE=new H$k(1,1,1),H$k.NegativeUnitX=new H$k(-1,0,0),H$k.UnitX=new H$k(1,0,0),H$k.UnitY=new H$k(0,1,0),H$k.UnitZ=new H$k(0,0,1),H$k.ForwardRH=new H$k(0,0,-1),H$k.ForwardLH=new H$k(0,0,1),H$k.Up=new H$k(0,1,0),H$k.NAN=new H$k(NaN,NaN,NaN),H$l(H$k,["_tempVector4",function(){return this._tempVector4=new H$hb}]),H$k}(),H$hb=function(){function H$a(H$a,H$b,H$c,H$d){this.elements=new Float32Array(4),void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0),void 0===H$d&&(H$d=0);var H$e=this.elements;H$e[0]=H$a,H$e[1]=H$b,H$e[2]=H$c,H$e[3]=H$d}H$n(H$a,"laya.d3.math.Vector4");var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.core.IClone":!0}),H$b.fromArray=function(H$a,H$b){void 0===H$b&&(H$b=0),this.elements[0]=H$a[H$b+0],this.elements[1]=H$a[H$b+1],this.elements[2]=H$a[H$b+2],this.elements[3]=H$a[H$b+3]},H$b.cloneTo=function(H$a){var H$b=H$a.elements,H$c=this.elements;H$b[0]=H$c[0],H$b[1]=H$c[1],H$b[2]=H$c[2],H$b[3]=H$c[3]},H$b.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$b.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},H$b.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},H$o(0,H$b,"x",function(){return this.elements[0]},function(H$a){this.elements[0]=H$a}),H$o(0,H$b,"y",function(){return this.elements[1]},function(H$a){this.elements[1]=H$a}),H$o(0,H$b,"z",function(){return this.elements[2]},function(H$a){this.elements[2]=H$a}),H$o(0,H$b,"w",function(){return this.elements[3]},function(H$a){this.elements[3]=H$a}),H$a.lerp=function(H$a,H$b,H$c,H$d){var H$e=H$d.elements,H$f=H$a.elements,H$g=H$b.elements,H$h=H$f[0],H$i=H$f[1],H$j=H$f[2],H$k=H$f[3];H$e[0]=H$h+H$c*(H$g[0]-H$h),H$e[1]=H$i+H$c*(H$g[1]-H$i),H$e[2]=H$j+H$c*(H$g[2]-H$j),H$e[3]=H$k+H$c*(H$g[3]-H$k)},H$a.transformByM4x4=function(H$a,H$b,H$c){var H$d=H$a.elements,H$e=H$d[0],H$f=H$d[1],H$g=H$d[2],H$h=H$d[3],H$i=H$b.elements,H$j=H$c.elements;H$j[0]=H$e*H$i[0]+H$f*H$i[4]+H$g*H$i[8]+H$h*H$i[12],H$j[1]=H$e*H$i[1]+H$f*H$i[5]+H$g*H$i[9]+H$h*H$i[13],H$j[2]=H$e*H$i[2]+H$f*H$i[6]+H$g*H$i[10]+H$h*H$i[14],H$j[3]=H$e*H$i[3]+H$f*H$i[7]+H$g*H$i[11]+H$h*H$i[15]},H$a.equals=function(H$a,H$b){var H$c=H$a.elements,H$d=H$b.elements;return H$$a.nearEqual(Math.abs(H$c[0]),Math.abs(H$d[0]))&&H$$a.nearEqual(Math.abs(H$c[1]),Math.abs(H$d[1]))&&H$$a.nearEqual(Math.abs(H$c[2]),Math.abs(H$d[2]))&&H$$a.nearEqual(Math.abs(H$c[3]),Math.abs(H$d[3]))},H$a.normalize=function(H$a,H$b){var H$c=H$a.elements,H$d=H$b.elements,H$e=H$a.length();0<H$e&&(H$d[0]=H$c[0]*H$e,H$d[1]=H$c[1]*H$e,H$d[2]=H$c[2]*H$e,H$d[3]=H$c[3]*H$e)},H$a.add=function(H$a,H$b,H$c){var H$d=H$c.elements,H$e=H$a.elements,H$f=H$b.elements;H$d[0]=H$e[0]+H$f[0],H$d[1]=H$e[1]+H$f[1],H$d[2]=H$e[2]+H$f[2],H$d[3]=H$e[3]+H$f[3]},H$a.subtract=function(H$a,H$b,H$c){var H$d=H$c.elements,H$e=H$a.elements,H$f=H$b.elements;H$d[0]=H$e[0]-H$f[0],H$d[1]=H$e[1]-H$f[1],H$d[2]=H$e[2]-H$f[2],H$d[3]=H$e[3]-H$f[3]},H$a.multiply=function(H$a,H$b,H$c){var H$d=H$c.elements,H$e=H$a.elements,H$f=H$b.elements;H$d[0]=H$e[0]*H$f[0],H$d[1]=H$e[1]*H$f[1],H$d[2]=H$e[2]*H$f[2],H$d[3]=H$e[3]*H$f[3]},H$a.scale=function(H$a,H$b,H$c){var H$d=H$c.elements,H$e=H$a.elements;H$d[0]=H$e[0]*H$b,H$d[1]=H$e[1]*H$b,H$d[2]=H$e[2]*H$b,H$d[3]=H$e[3]*H$b},H$a.Clamp=function(H$a,H$b,H$c,H$d){var H$e=H$a.elements,H$f=H$e[0],H$g=H$e[1],H$h=H$e[2],H$i=H$e[3],H$j=H$b.elements,H$k=H$j[0],H$l=H$j[1],H$m=H$j[2],H$n=H$j[3],H$o=H$c.elements,H$p=H$o[0],H$q=H$o[1],H$r=H$o[2],H$s=H$o[3],H$t=H$d.elements;H$f=(H$f=H$p<H$f?H$p:H$f)<H$k?H$k:H$f,H$g=(H$g=H$q<H$g?H$q:H$g)<H$l?H$l:H$g,H$h=(H$h=H$r<H$h?H$r:H$h)<H$m?H$m:H$h,H$i=(H$i=H$s<H$i?H$s:H$i)<H$n?H$n:H$i,H$t[0]=H$f,H$t[1]=H$g,H$t[2]=H$h,H$t[3]=H$i},H$a.distanceSquared=function(H$a,H$b){var H$c=H$a.elements,H$d=H$b.elements,H$e=H$c[0]-H$d[0],H$f=H$c[1]-H$d[1],H$g=H$c[2]-H$d[2],H$h=H$c[3]-H$d[3];return H$e*H$e+H$f*H$f+H$g*H$g+H$h*H$h},H$a.distance=function(H$a,H$b){var H$c=H$a.elements,H$d=H$b.elements,H$e=H$c[0]-H$d[0],H$f=H$c[1]-H$d[1],H$g=H$c[2]-H$d[2],H$h=H$c[3]-H$d[3];return Math.sqrt(H$e*H$e+H$f*H$f+H$g*H$g+H$h*H$h)},H$a.dot=function(H$a,H$b){var H$c=H$a.elements,H$d=H$b.elements;return H$c[0]*H$d[0]+H$c[1]*H$d[1]+H$c[2]*H$d[2]+H$c[3]*H$d[3]},H$a.min=function(H$a,H$b,H$c){var H$d=H$c.elements,H$e=H$a.elements,H$f=H$b.elements;H$d[0]=Math.min(H$e[0],H$f[0]),H$d[1]=Math.min(H$e[1],H$f[1]),H$d[2]=Math.min(H$e[2],H$f[2]),H$d[3]=Math.min(H$e[3],H$f[3])},H$a.max=function(H$a,H$b,H$c){var H$d=H$c.elements,H$e=H$a.elements,H$f=H$b.elements;H$d[0]=Math.max(H$e[0],H$f[0]),H$d[1]=Math.max(H$e[1],H$f[1]),H$d[2]=Math.max(H$e[2],H$f[2]),H$d[3]=Math.max(H$e[3],H$f[3])},H$l(H$a,["ZERO",function(){return this.ZERO=new H$a},"ONE",function(){return this.ONE=new H$a(1,1,1,1)},"UnitX",function(){return this.UnitX=new H$a(1,0,0,0)},"UnitY",function(){return this.UnitY=new H$a(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new H$a(0,0,1,0)},"UnitW",function(){return this.UnitW=new H$a(0,0,0,1)}]),H$a}(),H$ib=function(){function H$f(H$a,H$b,H$c,H$d){this.minDepth=0,this.maxDepth=1,this.x=H$a,this.y=H$b,this.width=H$c,this.height=H$d}H$n(H$f,"laya.d3.math.Viewport");var H$a=H$f.prototype;return H$a.project=function(H$a,H$b,H$c){H$gb.transformV3ToV3(H$a,H$b,H$c);var H$d=H$a.elements,H$e=H$b.elements,H$f=H$c.elements,H$g=H$d[0]*H$e[3]+H$d[1]*H$e[7]+H$d[2]*H$e[11]+H$e[15];1!==H$g&&(H$f[0]=H$f[0]/H$g,H$f[1]=H$f[1]/H$g,H$f[2]=H$f[2]/H$g),H$f[0]=.5*(H$f[0]+1)*this.width+this.x,H$f[1]=.5*(1-H$f[1])*this.height+this.y,H$f[2]=H$f[2]*(this.maxDepth-this.minDepth)+this.minDepth},H$a.unprojectFromMat=function(H$a,H$b,H$c){var H$d=H$a.elements,H$e=H$b.elements,H$f=H$c.elements;H$f[0]=(H$d[0]-this.x)/this.width*2-1,H$f[1]=-((H$d[1]-this.y)/this.height*2-1);var H$g=(this.maxDepth-this.minDepth)/2;H$f[2]=(H$d[2]-this.minDepth-H$g)/H$g;var H$h=H$f[0]*H$e[3]+H$f[1]*H$e[7]+H$f[2]*H$e[11]+H$e[15];H$gb.transformV3ToV3(H$c,H$b,H$c),1!==H$h&&(H$f[0]=H$f[0]/H$h,H$f[1]=H$f[1]/H$h,H$f[2]=H$f[2]/H$h)},H$a.unprojectFromWVP=function(H$a,H$b,H$c,H$d,H$e){H$ab.multiply(H$b,H$c,H$f._tempMatrix4x4),H$d&&H$ab.multiply(H$f._tempMatrix4x4,H$d,H$f._tempMatrix4x4),H$f._tempMatrix4x4.invert(H$f._tempMatrix4x4),this.unprojectFromMat(H$a,H$f._tempMatrix4x4,H$e)},H$l(H$f,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new H$ab}]),H$f}(),H$jb=function(){function H$C(H$a){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=H$a,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}H$n(H$C,"laya.d3.resource.models.SubMesh");var H$a=H$C.prototype;return H$v.imps(H$a,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),H$a._getVertexBuffer=function(H$a){return void 0===H$a&&(H$a=0),0===H$a?this._vertexBuffer:null},H$a._getIndexBuffer=function(){return this._indexBuffer},H$a._getStaticBatchBakedVertexs=function(H$a,H$b){var H$c,H$d,H$e=this._vertexBuffer,H$f=H$e.vertexDeclaration,H$g=H$f.getVertexElementByUsage(0).offset/4,H$h=H$f.getVertexElementByUsage(3).offset/4,H$i=H$b.meshRender.lightmapScaleOffset,H$j=0,H$k=0,H$l=0,H$m=0,H$n=0,H$o=0;if(H$i)if(H$d=H$f.getVertexElementByUsage(15))H$l=H$f.vertexStride/4,H$c=0<this._vertexCount?H$e.getData().slice(this._vertexStart*H$l,(this._vertexStart+this._vertexCount)*H$l):H$e.getData().slice(),H$m=H$d.offset/4;else{H$l=(H$o=H$f.vertexStride/4)+2,H$c=this._vertexCount?new Float32Array(this._vertexCount*(H$e.vertexDeclaration.vertexStride/4+2)):new Float32Array(H$e.vertexCount*(H$e.vertexDeclaration.vertexStride/4+2)),H$m=(H$n=H$f.getVertexElementByUsage(2).offset/4)+2;var H$p=H$e.getData();for(H$j=0,H$k=H$p.length/H$o;H$j<H$k;H$j++){var H$q=0;H$q=0<this._vertexCount?(this._vertexStart+H$j)*H$o:H$j*H$o;var H$r=H$j*H$l,H$s=0;for(H$s=0;H$s<H$m;H$s++)H$c[H$r+H$s]=H$p[H$q+H$s];for(H$s=H$m;H$s<H$o;H$s++)H$c[H$r+H$s+2]=H$p[H$q+H$s]}}else H$l=H$f.vertexStride/4,H$c=this._vertexCount?H$e.getData().slice(this._vertexStart*H$l,(this._vertexStart+this._vertexCount)*H$l):H$e.getData().slice();if(H$a){var H$t=H$a.worldMatrix,H$u=H$C._tempMatrix4x40;H$t.invert(H$u);var H$v=H$C._tempMatrix4x41,H$w=H$b.transform.worldMatrix;H$ab.multiply(H$u,H$w,H$v)}else H$v=H$b.transform.worldMatrix;var H$x=H$C._tempQuaternion0;for(H$v.decomposeTransRotScale(H$C._tempVector30,H$x,H$C._tempVector31),H$j=0,H$k=H$c.length/H$l;H$j<H$k;H$j++){var H$y=H$j*H$l+H$g,H$z=H$j*H$l+H$h;if(H$qb.transformVector3ArrayToVector3ArrayCoordinate(H$c,H$y,H$v,H$c,H$y),H$qb.transformVector3ArrayByQuat(H$c,H$z,H$x,H$c,H$z),H$i){var H$A=H$j*H$l+H$m;if(H$d)H$qb.transformLightingMapTexcoordByUV1Array(H$c,H$A,H$i,H$c,H$A);else{var H$B=H$j*H$o+H$n;H$qb.transformLightingMapTexcoordByUV0Array(H$p,H$B,H$i,H$c,H$A)}}}return H$c},H$a._getVertexBuffers=function(){return null},H$a._beforeRender=function(H$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},H$a._render=function(H$a){var H$b,H$c=0,H$d=H$a.renderElement;if(1<this._indexCount){var H$e=this._boneIndicesList.length;if(1<H$e){for(var H$f=0;H$f<H$e;H$f++)(H$b=H$d._skinAnimationDatas||this._skinAnimationDatas)&&(H$d._shaderValue.setValue(0,H$b[H$f]),H$a._shader.uploadRenderElementUniforms(H$d._shaderValue.data)),H$D.mainContext.drawElements(4,this._subIndexBufferCount[H$f],5123,2*this._subIndexBufferStart[H$f]);H$y.drawCall+=H$e}else(H$b=H$d._skinAnimationDatas||this._skinAnimationDatas)&&(H$d._shaderValue.setValue(0,H$b[0]),H$a._shader.uploadRenderElementUniforms(H$d._shaderValue.data)),H$D.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),H$y.drawCall++;H$c=this._indexCount}else H$c=this._indexBuffer.indexCount,(H$b=H$d._skinAnimationDatas||this._skinAnimationDatas)&&(H$d._shaderValue.setValue(0,H$b[0]),H$a._shader.uploadRenderElementUniforms(H$d._shaderValue.data)),H$D.mainContext.drawElements(4,H$c,5123,0),H$y.drawCall++;H$y.trianglesFaces+=H$c/3},H$a.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},H$a.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},H$o(0,H$a,"_vertexBufferCount",function(){return 1}),H$o(0,H$a,"triangleCount",function(){return this._indexBuffer.indexCount/3}),H$l(H$C,["_tempVector30",function(){return this._tempVector30=new H$gb},"_tempVector31",function(){return this._tempVector31=new H$gb},"_tempQuaternion0",function(){return this._tempQuaternion0=new H$cb},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new H$ab},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new H$ab}]),H$C}(),H$kb=function(){function H$a(H$a){this.defineCounter=0,this.defines=null,H$a?(this.defineCounter=H$a.defineCounter,this.defines=H$a.defines.slice()):(this.defineCounter=0,this.defines=[])}return H$n(H$a,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),H$a.prototype.registerDefine=function(H$a){var H$b=Math.pow(2,this.defineCounter++);return this.defines[H$b]=H$a,H$b},H$a}(),H$lb=function(){function H$a(){}return H$n(H$a,"laya.d3.shader.ShaderInit3D"),H$a.__init__=function(){var H$a,H$b;H$yb._globalRegDefine("HIGHPRECISION",H$yb.SHADERDEFINE_HIGHPRECISION),H$yb._globalRegDefine("FOG",H$yb.SHADERDEFINE_FOG),H$yb._globalRegDefine("DIRECTIONLIGHT",H$yb.SHADERDEFINE_DIRECTIONLIGHT),H$yb._globalRegDefine("POINTLIGHT",H$yb.SHADERDEFINE_POINTLIGHT),H$yb._globalRegDefine("SPOTLIGHT",H$yb.SHADERDEFINE_SPOTLIGHT),H$yb._globalRegDefine("UV",H$yb.SHADERDEFINE_UV0),H$yb._globalRegDefine("COLOR",H$yb.SHADERDEFINE_COLOR),H$yb._globalRegDefine("UV1",H$yb.SHADERDEFINE_UV1),H$yb._globalRegDefine("CASTSHADOW",H$nb.SHADERDEFINE_CAST_SHADOW),H$yb._globalRegDefine("SHADOWMAP_PSSM1",H$nb.SHADERDEFINE_SHADOW_PSSM1),H$yb._globalRegDefine("SHADOWMAP_PSSM2",H$nb.SHADERDEFINE_SHADOW_PSSM2),H$yb._globalRegDefine("SHADOWMAP_PSSM3",H$nb.SHADERDEFINE_SHADOW_PSSM3),H$yb._globalRegDefine("SHADOWMAP_PCF_NO",H$nb.SHADERDEFINE_SHADOW_PCF_NO),H$yb._globalRegDefine("SHADOWMAP_PCF1",H$nb.SHADERDEFINE_SHADOW_PCF1),H$yb._globalRegDefine("SHADOWMAP_PCF2",H$nb.SHADERDEFINE_SHADOW_PCF2),H$yb._globalRegDefine("SHADOWMAP_PCF3",H$nb.SHADERDEFINE_SHADOW_PCF3),H$yb._globalRegDefine("DEPTHFOG",H$yb.SAHDERDEFINE_DEPTHFOG),H$Jb.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),H$Jb.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),H$a={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},H$b={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var H$c=H$Jb.nameKey.add("SIMPLE");shaderCompile=H$yb.add(H$c,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',H$a,H$b),H$Kb.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),H$Kb.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),H$Kb.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),H$Kb.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),H$Kb.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),H$Kb.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),H$Kb.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),H$Kb.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),H$Kb.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},H$a}(),H$mb=function(){function H$a(){this._data=null,this._data=[]}H$n(H$a,"laya.d3.shader.ValusArray");var H$b=H$a.prototype;return H$b.setValue=function(H$a,H$b){this._data[H$a]=H$b},H$o(0,H$b,"data",function(){return this._data}),H$a}(),H$nb=function(){function H$a(){}return H$a.SHADERDEFINE_RECEIVE_SHADOW=1,H$a.SHADERDEFINE_CAST_SHADOW=512,H$a.SHADERDEFINE_SHADOW_PSSM1=1024,H$a.SHADERDEFINE_SHADOW_PSSM2=2048,H$a.SHADERDEFINE_SHADOW_PSSM3=4096,H$a.SHADERDEFINE_SHADOW_PCF_NO=8192,H$a.SHADERDEFINE_SHADOW_PCF1=16384,H$a.SHADERDEFINE_SHADOW_PCF2=32768,H$a.SHADERDEFINE_SHADOW_PCF3=65536,H$a.MAX_PSSM_COUNT=3,H$a}(),H$ob=function(){function H$V(){}return H$n(H$V,"laya.d3.utils.Picker"),H$V.calculateCursorRay=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g=H$a.elements[0],H$h=H$a.elements[1],H$i=H$V._tempVector30,H$j=H$i.elements;H$j[0]=H$g,H$j[1]=H$h,H$j[2]=H$b.minDepth;var H$k=H$V._tempVector31,H$l=H$k.elements;H$l[0]=H$g,H$l[1]=H$h,H$l[2]=H$b.maxDepth;var H$m=H$f.origin,H$n=H$V._tempVector32;H$b.unprojectFromWVP(H$i,H$c,H$d,H$e,H$m),H$b.unprojectFromWVP(H$k,H$c,H$d,H$e,H$n);var H$o=H$f.direction.elements;H$o[0]=H$n.x-H$m.x,H$o[1]=H$n.y-H$m.y,H$o[2]=H$n.z-H$m.z,H$gb.normalize(H$f.direction,H$f.direction)},H$V.rayIntersectsPositionsAndIndices=function(H$a,H$b,H$c,H$d,H$e){for(var H$f=H$c.vertexStride/4,H$g=H$c.getVertexElementByUsage(0).offset/4,H$h=Number.MAX_VALUE,H$i=-1,H$j=-1,H$k=-1,H$l=0;H$l<H$d.length;H$l+=3){var H$m=H$V._tempVector35,H$n=H$m.elements,H$o=H$d[H$l]*H$f,H$p=H$o+H$g;H$n[0]=H$b[H$p],H$n[1]=H$b[1+H$p],H$n[2]=H$b[2+H$p];var H$q=H$V._tempVector36,H$r=H$q.elements,H$s=H$d[H$l+1]*H$f,H$t=H$s+H$g;H$r[0]=H$b[H$t],H$r[1]=H$b[1+H$t],H$r[2]=H$b[2+H$t];var H$u=H$V._tempVector37,H$v=H$u.elements,H$w=H$d[H$l+2]*H$f,H$x=H$w+H$g;H$v[0]=H$b[H$x],H$v[1]=H$b[1+H$x],H$v[2]=H$b[2+H$x];var H$y=laya.d3.utils.Picker.rayIntersectsTriangle(H$a,H$m,H$q,H$u);!isNaN(H$y)&&H$y<H$h&&(H$h=H$y,H$i=H$o,H$j=H$s,H$k=H$w)}if(H$h===Number.MAX_VALUE)return H$e.position.toDefault(),H$e.distance=Number.MAX_VALUE,H$e.trianglePositions[0].toDefault(),H$e.trianglePositions[1].toDefault(),H$e.trianglePositions[2].toDefault(),H$e.triangleNormals[0].toDefault(),H$e.triangleNormals[1].toDefault(),H$e.triangleNormals[2].toDefault(),!1;H$e.distance=H$h,H$gb.scale(H$a.direction,H$h,H$e.position),H$gb.add(H$a.origin,H$e.position,H$e.position);var H$z=H$e.trianglePositions,H$A=H$z[0],H$B=H$z[1],H$C=H$z[2],H$D=H$A.elements,H$E=H$B.elements,H$F=H$C.elements,H$G=H$i+H$g;H$D[0]=H$b[H$G],H$D[1]=H$b[H$G+1],H$D[2]=H$b[H$G+2];var H$H=H$j+H$g;H$E[0]=H$b[H$H],H$E[1]=H$b[H$H+1],H$E[2]=H$b[H$H+2];var H$I=H$k+H$g;H$F[0]=H$b[H$I],H$F[1]=H$b[H$I+1],H$F[2]=H$b[H$I+2];var H$J=H$c.getVertexElementByUsage(3);if(H$J){var H$K=H$J.offset/4,H$L=H$e.triangleNormals,H$M=H$L[0],H$N=H$L[1],H$O=H$L[2],H$P=H$M.elements,H$Q=H$N.elements,H$R=H$O.elements,H$S=H$i+H$K;H$P[0]=H$b[H$S],H$P[1]=H$b[H$S+1],H$P[2]=H$b[H$S+2];var H$T=H$j+H$K;H$Q[0]=H$b[H$T],H$Q[1]=H$b[H$T+1],H$Q[2]=H$b[H$T+2];var H$U=H$k+H$K;H$R[0]=H$b[H$U],H$R[1]=H$b[H$U+1],H$R[2]=H$b[H$U+2]}return!0},H$V.rayIntersectsTriangle=function(H$a,H$b,H$c,H$d){var H$e=H$V._tempVector30,H$f=H$V._tempVector31;H$gb.subtract(H$c,H$b,H$e),H$gb.subtract(H$d,H$b,H$f);var H$g,H$h=H$V._tempVector32;if(H$gb.cross(H$a.direction,H$f,H$h),(H$g=H$gb.dot(H$e,H$h))>-Number.MIN_VALUE&&H$g<Number.MIN_VALUE)return Number.NaN;var H$i,H$j=1/H$g,H$k=H$V._tempVector33;if(H$gb.subtract(H$a.origin,H$b,H$k),H$i=H$gb.dot(H$k,H$h),(H$i*=H$j)<0||1<H$i)return Number.NaN;var H$l,H$m,H$n=H$V._tempVector34;return H$gb.cross(H$k,H$e,H$n),H$l=H$gb.dot(H$a.direction,H$n),(H$l*=H$j)<0||1<H$i+H$l?Number.NaN:(H$m=H$gb.dot(H$f,H$n),(H$m*=H$j)<0?Number.NaN:H$m)},H$l(H$V,["_tempVector30",function(){return this._tempVector30=new H$gb},"_tempVector31",function(){return this._tempVector31=new H$gb},"_tempVector32",function(){return this._tempVector32=new H$gb},"_tempVector33",function(){return this._tempVector33=new H$gb},"_tempVector34",function(){return this._tempVector34=new H$gb},"_tempVector35",function(){return this._tempVector35=new H$gb},"_tempVector36",function(){return this._tempVector36=new H$gb},"_tempVector37",function(){return this._tempVector37=new H$gb}]),H$V}(),H$pb=(function(){function H$a(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new H$gb,new H$gb,new H$gb],this.trianglePositions.length=3,this.triangleNormals=[new H$gb,new H$gb,new H$gb],this.triangleNormals.length=3,this.position=new H$gb}H$n(H$a,"laya.d3.utils.RaycastHit"),H$a.prototype.cloneTo=function(H$a){H$a.distance=this.distance,this.trianglePositions[0].cloneTo(H$a.trianglePositions[0]),this.trianglePositions[1].cloneTo(H$a.trianglePositions[1]),this.trianglePositions[2].cloneTo(H$a.trianglePositions[2]),this.triangleNormals[0].cloneTo(H$a.triangleNormals[0]),this.triangleNormals[1].cloneTo(H$a.triangleNormals[1]),this.triangleNormals[2].cloneTo(H$a.triangleNormals[2]),this.position.cloneTo(H$a.position),H$a.sprite3D=this.sprite3D}}(),function(){function H$a(H$a,H$b){this._width=0,this._height=0,this._width=H$a,this._height=H$b}H$n(H$a,"laya.d3.utils.Size");var H$b=H$a.prototype;return H$o(0,H$b,"width",function(){return-1===this._width?H$W.clientWidth:this._width}),H$o(0,H$b,"height",function(){return-1===this._height?H$W.clientHeight:this._height}),H$o(1,H$a,"fullScreen",function(){return new H$a(-1,-1)}),H$a}()),H$qb=function(){function H$G(){}return H$n(H$G,"laya.d3.utils.Utils3D"),H$G._rotationTransformScaleSkinAnimation=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j,H$k,H$l){var H$m,H$n,H$o,H$p,H$q,H$r=H$G._tempArray16_0,H$s=H$G._tempArray16_1,H$t=H$G._tempArray16_2,H$u=H$d+H$d,H$v=H$e+H$e,H$w=H$f+H$f,H$x=H$d*H$u,H$y=H$e*H$u,H$z=H$e*H$v,H$A=H$f*H$u,H$B=H$f*H$v,H$C=H$f*H$w,H$D=H$g*H$u,H$E=H$g*H$v,H$F=H$g*H$w;for(H$r[15]=1,H$r[0]=1-H$z-H$C,H$r[1]=H$y+H$F,H$r[2]=H$A-H$E,H$r[4]=H$y-H$F,H$r[5]=1-H$x-H$C,H$r[6]=H$B+H$D,H$r[8]=H$A+H$E,H$r[9]=H$B-H$D,H$r[10]=1-H$x-H$z,H$s[15]=1,H$s[0]=H$h,H$s[5]=H$i,H$s[10]=H$j,H$m=0;H$m<4;H$m++)H$n=H$r[H$m],H$o=H$r[H$m+4],H$p=H$r[H$m+8],H$q=H$r[H$m+12],H$t[H$m]=H$n,H$t[H$m+4]=H$o,H$t[H$m+8]=H$p,H$t[H$m+12]=H$n*H$a+H$o*H$b+H$p*H$c+H$q;for(H$m=0;H$m<4;H$m++)H$n=H$t[H$m],H$o=H$t[H$m+4],H$p=H$t[H$m+8],H$q=H$t[H$m+12],H$k[H$m+H$l]=H$n*H$s[0]+H$o*H$s[1]+H$p*H$s[2]+H$q*H$s[3],H$k[H$m+H$l+4]=H$n*H$s[4]+H$o*H$s[5]+H$p*H$s[6]+H$q*H$s[7],H$k[H$m+H$l+8]=H$n*H$s[8]+H$o*H$s[9]+H$p*H$s[10]+H$q*H$s[11],H$k[H$m+H$l+12]=H$n*H$s[12]+H$o*H$s[13]+H$p*H$s[14]+H$q*H$s[15]},H$G._createNodeByJson=function(H$a,H$b,H$c,H$d){if(!H$c)switch(H$b.type){case"Sprite3D":H$c=new H$Ib;break;case"MeshSprite3D":H$c=new H$Vb;break;case"SkinnedMeshSprite3D":H$c=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":H$c=new ShuriKenParticle3D;break;case"TrailSprite3D":H$c=new TrailSprite3D;break;case"Terrain":H$c=new Terrain;break;case"Camera":H$c=new H$Ub;break;case"DirectionLight":H$c=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var H$e=H$b.props;if(H$e)for(var H$f in H$e)H$c[H$f]=H$e[H$f];var H$g=H$b.customProps;H$g&&(H$c instanceof laya.d3.core.Sprite3D?(H$c._parseBaseCustomProps(H$g),H$c._parseCustomProps(H$a,H$d,H$g,H$b),H$c._parseCustomComponent(H$a,H$d,H$b.components)):H$c._parseCustomProps(H$a,H$d,H$g,H$b));var H$h=H$b.child;if(H$h)for(var H$i=0,H$j=H$h.length;H$i<H$j;H$i++){var H$k=H$G._createNodeByJson(H$a,H$h[H$i],null,H$d);H$c.addChild(H$k)}return H$c},H$G._computeBoneAndAnimationDatasByBindPoseMatrxix=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g,H$h,H$i=0,H$j=0,H$k=H$a.length;for(H$g=0;H$g<H$k;H$i+=H$a[H$g].keyframeWidth,H$j+=16,H$g++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(H$b[H$i+0],H$b[H$i+1],H$b[H$i+2],H$b[H$i+3],H$b[H$i+4],H$b[H$i+5],H$b[H$i+6],H$b[H$i+7],H$b[H$i+8],H$b[H$i+9],H$d,H$j),0!=H$g&&(H$h=16*H$a[H$g].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(H$d,H$h,H$d,H$j,H$d,H$j));var H$l=H$c.length;for(H$g=0;H$g<H$l;H$g++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(H$d,16*H$f[H$g],H$c[H$g],H$e,16*H$g)},H$G._computeAnimationDatasByArrayAndMatrixFast=function(H$a,H$b,H$c,H$d){for(var H$e=0,H$f=H$a.length;H$e<H$f;H$e++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(H$b,16*H$d[H$e],H$a[H$e],H$c,16*H$e)},H$G._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(H$a,H$b,H$c,H$d,H$e){var H$f,H$g,H$h=0,H$i=0,H$j=H$a.length;for(H$f=0;H$f<H$j;H$h+=H$a[H$f].keyframeWidth,H$i+=16,H$f++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(H$b[H$h+7],H$b[H$h+8],H$b[H$h+9],H$b[H$h+3],H$b[H$h+4],H$b[H$h+5],H$b[H$h+6],H$b[H$h+0],H$b[H$h+1],H$b[H$h+2],H$d,H$i),0!=H$f&&(H$g=16*H$a[H$f].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(H$d,H$g,H$d,H$i,H$d,H$i));var H$k=H$c.length;for(H$f=0;H$f<H$k;H$f++){var H$l=16*H$f;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(H$d,H$l,H$c[H$f],H$e,H$l)}},H$G._computeAnimationDatasByArrayAndMatrixFastOld=function(H$a,H$b,H$c){for(var H$d=H$a.length,H$e=0;H$e<H$d;H$e++){var H$f=16*H$e;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(H$b,H$f,H$a[H$e],H$c,H$f)}},H$G._computeRootAnimationData=function(H$a,H$b,H$c){for(var H$d=0,H$e=0,H$f=0,H$g=H$a.length;H$d<H$g;H$e+=H$a[H$d].keyframeWidth,H$f+=16,H$d++)laya.d3.utils.Utils3D.createAffineTransformationArray(H$b[H$e+0],H$b[H$e+1],H$b[H$e+2],H$b[H$e+3],H$b[H$e+4],H$b[H$e+5],H$b[H$e+6],H$b[H$e+7],H$b[H$e+8],H$b[H$e+9],H$c,H$f)},H$G.transformVector3ArrayByQuat=function(H$a,H$b,H$c,H$d,H$e){var H$f=H$c.elements,H$g=H$a[H$b],H$h=H$a[H$b+1],H$i=H$a[H$b+2],H$j=H$f[0],H$k=H$f[1],H$l=H$f[2],H$m=H$f[3],H$n=H$m*H$g+H$k*H$i-H$l*H$h,H$o=H$m*H$h+H$l*H$g-H$j*H$i,H$p=H$m*H$i+H$j*H$h-H$k*H$g,H$q=-H$j*H$g-H$k*H$h-H$l*H$i;H$d[H$e]=H$n*H$m+H$q*-H$j+H$o*-H$l-H$p*-H$k,H$d[H$e+1]=H$o*H$m+H$q*-H$k+H$p*-H$j-H$n*-H$l,H$d[H$e+2]=H$p*H$m+H$q*-H$l+H$n*-H$k-H$o*-H$j},H$G.mulMatrixByArray=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g,H$h,H$i,H$j,H$k;if(H$e===H$c){for(H$c=H$G._tempArray16_3,H$g=0;H$g<16;++H$g)H$c[H$g]=H$e[H$f+H$g];H$d=0}for(H$g=0;H$g<4;H$g++)H$h=H$a[H$b+H$g],H$i=H$a[H$b+H$g+4],H$j=H$a[H$b+H$g+8],H$k=H$a[H$b+H$g+12],H$e[H$f+H$g]=H$h*H$c[H$d+0]+H$i*H$c[H$d+1]+H$j*H$c[H$d+2]+H$k*H$c[H$d+3],H$e[H$f+H$g+4]=H$h*H$c[H$d+4]+H$i*H$c[H$d+5]+H$j*H$c[H$d+6]+H$k*H$c[H$d+7],H$e[H$f+H$g+8]=H$h*H$c[H$d+8]+H$i*H$c[H$d+9]+H$j*H$c[H$d+10]+H$k*H$c[H$d+11],H$e[H$f+H$g+12]=H$h*H$c[H$d+12]+H$i*H$c[H$d+13]+H$j*H$c[H$d+14]+H$k*H$c[H$d+15]},H$G.mulMatrixByArrayFast=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g,H$h,H$i,H$j,H$k;for(H$g=0;H$g<4;H$g++)H$h=H$a[H$b+H$g],H$i=H$a[H$b+H$g+4],H$j=H$a[H$b+H$g+8],H$k=H$a[H$b+H$g+12],H$e[H$f+H$g]=H$h*H$c[H$d+0]+H$i*H$c[H$d+1]+H$j*H$c[H$d+2]+H$k*H$c[H$d+3],H$e[H$f+H$g+4]=H$h*H$c[H$d+4]+H$i*H$c[H$d+5]+H$j*H$c[H$d+6]+H$k*H$c[H$d+7],H$e[H$f+H$g+8]=H$h*H$c[H$d+8]+H$i*H$c[H$d+9]+H$j*H$c[H$d+10]+H$k*H$c[H$d+11],H$e[H$f+H$g+12]=H$h*H$c[H$d+12]+H$i*H$c[H$d+13]+H$j*H$c[H$d+14]+H$k*H$c[H$d+15]},H$G.mulMatrixByArrayAndMatrixFast=function(H$a,H$b,H$c,H$d,H$e){var H$f,H$g,H$h,H$i,H$j,H$k=H$c.elements,H$l=H$k[0],H$m=H$k[1],H$n=H$k[2],H$o=H$k[3],H$p=H$k[4],H$q=H$k[5],H$r=H$k[6],H$s=H$k[7],H$t=H$k[8],H$u=H$k[9],H$v=H$k[10],H$w=H$k[11],H$x=H$k[12],H$y=H$k[13],H$z=H$k[14],H$A=H$k[15],H$B=H$b,H$C=H$b+4,H$D=H$b+8,H$E=H$b+12,H$F=H$e,H$G=H$e+4,H$H=H$e+8,H$I=H$e+12;for(H$f=0;H$f<4;H$f++)H$g=H$a[H$B+H$f],H$h=H$a[H$C+H$f],H$i=H$a[H$D+H$f],H$j=H$a[H$E+H$f],H$d[H$F+H$f]=H$g*H$l+H$h*H$m+H$i*H$n+H$j*H$o,H$d[H$G+H$f]=H$g*H$p+H$h*H$q+H$i*H$r+H$j*H$s,H$d[H$H+H$f]=H$g*H$t+H$h*H$u+H$i*H$v+H$j*H$w,H$d[H$I+H$f]=H$g*H$x+H$h*H$y+H$i*H$z+H$j*H$A},H$G.createAffineTransformationArray=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j,H$k,H$l){var H$m=H$d+H$d,H$n=H$e+H$e,H$o=H$f+H$f,H$p=H$d*H$m,H$q=H$d*H$n,H$r=H$d*H$o,H$s=H$e*H$n,H$t=H$e*H$o,H$u=H$f*H$o,H$v=H$g*H$m,H$w=H$g*H$n,H$x=H$g*H$o;H$k[H$l+0]=(1-(H$s+H$u))*H$h,H$k[H$l+1]=(H$q+H$x)*H$h,H$k[H$l+2]=(H$r-H$w)*H$h,H$k[H$l+3]=0,H$k[H$l+4]=(H$q-H$x)*H$i,H$k[H$l+5]=(1-(H$p+H$u))*H$i,H$k[H$l+6]=(H$t+H$v)*H$i,H$k[H$l+7]=0,H$k[H$l+8]=(H$r+H$w)*H$j,H$k[H$l+9]=(H$t-H$v)*H$j,H$k[H$l+10]=(1-(H$p+H$s))*H$j,H$k[H$l+11]=0,H$k[H$l+12]=H$a,H$k[H$l+13]=H$b,H$k[H$l+14]=H$c,H$k[H$l+15]=1},H$G.transformVector3ArrayToVector3ArrayCoordinate=function(H$a,H$b,H$c,H$d,H$e){var H$f=H$G._tempArray4_0,H$g=H$a[H$b+0],H$h=H$a[H$b+1],H$i=H$a[H$b+2],H$j=H$c.elements;H$f[0]=H$g*H$j[0]+H$h*H$j[4]+H$i*H$j[8]+H$j[12],H$f[1]=H$g*H$j[1]+H$h*H$j[5]+H$i*H$j[9]+H$j[13],H$f[2]=H$g*H$j[2]+H$h*H$j[6]+H$i*H$j[10]+H$j[14],H$f[3]=1/(H$g*H$j[3]+H$h*H$j[7]+H$i*H$j[11]+H$j[15]),H$d[H$e+0]=H$f[0]*H$f[3],H$d[H$e+1]=H$f[1]*H$f[3],H$d[H$e+2]=H$f[2]*H$f[3]},H$G.transformLightingMapTexcoordByUV0Array=function(H$a,H$b,H$c,H$d,H$e){var H$f=H$c.elements;H$d[H$e+0]=H$a[H$b+0]*H$f[0]+H$f[2],H$d[H$e+1]=(H$a[H$b+1]-1)*H$f[1]+H$f[3]},H$G.transformLightingMapTexcoordByUV1Array=function(H$a,H$b,H$c,H$d,H$e){var H$f=H$c.elements;H$d[H$e+0]=H$a[H$b+0]*H$f[0]+H$f[2],H$d[H$e+1]=1+H$a[H$b+1]*H$f[1]+H$f[3]},H$G.getURLVerion=function(H$a){var H$b=H$a.indexOf("?");return 0<=H$b?H$a.substr(H$b):null},H$G._quaternionCreateFromYawPitchRollArray=function(H$a,H$b,H$c,H$d){var H$e=.5*H$c,H$f=.5*H$b,H$g=.5*H$a,H$h=Math.sin(H$e),H$i=Math.cos(H$e),H$j=Math.sin(H$f),H$k=Math.cos(H$f),H$l=Math.sin(H$g),H$m=Math.cos(H$g);H$d[0]=H$m*H$j*H$i+H$l*H$k*H$h,H$d[1]=H$l*H$k*H$i-H$m*H$j*H$h,H$d[2]=H$m*H$k*H$h-H$l*H$j*H$i,H$d[3]=H$m*H$k*H$i+H$l*H$j*H$h},H$G._createAffineTransformationArray=function(H$a,H$b,H$c,H$d){var H$e=H$b[0],H$f=H$b[1],H$g=H$b[2],H$h=H$b[3],H$i=H$e+H$e,H$j=H$f+H$f,H$k=H$g+H$g,H$l=H$e*H$i,H$m=H$e*H$j,H$n=H$e*H$k,H$o=H$f*H$j,H$p=H$f*H$k,H$q=H$g*H$k,H$r=H$h*H$i,H$s=H$h*H$j,H$t=H$h*H$k,H$u=H$c[0],H$v=H$c[1],H$w=H$c[2];H$d[0]=(1-(H$o+H$q))*H$u,H$d[1]=(H$m+H$t)*H$u,H$d[2]=(H$n-H$s)*H$u,H$d[3]=0,H$d[4]=(H$m-H$t)*H$v,H$d[5]=(1-(H$l+H$q))*H$v,H$d[6]=(H$p+H$r)*H$v,H$d[7]=0,H$d[8]=(H$n+H$s)*H$w,H$d[9]=(H$p-H$r)*H$w,H$d[10]=(1-(H$l+H$o))*H$w,H$d[11]=0,H$d[12]=H$a[0],H$d[13]=H$a[1],H$d[14]=H$a[2],H$d[15]=1},H$G._mulMatrixArray=function(H$a,H$b,H$c,H$d){var H$e,H$f,H$g,H$h,H$i,H$j=H$b.elements,H$k=H$j[0],H$l=H$j[1],H$m=H$j[2],H$n=H$j[3],H$o=H$j[4],H$p=H$j[5],H$q=H$j[6],H$r=H$j[7],H$s=H$j[8],H$t=H$j[9],H$u=H$j[10],H$v=H$j[11],H$w=H$j[12],H$x=H$j[13],H$y=H$j[14],H$z=H$j[15],H$A=H$d,H$B=H$d+4,H$C=H$d+8,H$D=H$d+12;for(H$e=0;H$e<4;H$e++)H$f=H$a[H$e],H$g=H$a[H$e+4],H$h=H$a[H$e+8],H$i=H$a[H$e+12],H$c[H$A+H$e]=H$f*H$k+H$g*H$l+H$h*H$m+H$i*H$n,H$c[H$B+H$e]=H$f*H$o+H$g*H$p+H$h*H$q+H$i*H$r,H$c[H$C+H$e]=H$f*H$s+H$g*H$t+H$h*H$u+H$i*H$v,H$c[H$D+H$e]=H$f*H$w+H$g*H$x+H$h*H$y+H$i*H$z},H$G.getYawPitchRoll=function(H$a,H$b){H$G.transformQuat(H$gb.ForwardRH,H$a,H$cb.TEMPVector31),H$G.transformQuat(H$gb.Up,H$a,H$cb.TEMPVector32);var H$c=H$cb.TEMPVector32.elements;H$G.angleTo(H$gb.ZERO,H$cb.TEMPVector31,H$cb.TEMPVector33);var H$d=H$cb.TEMPVector33.elements;H$d[0]==Math.PI/2?(H$d[1]=H$G.arcTanAngle(H$c[2],H$c[0]),H$d[2]=0):H$d[0]==-Math.PI/2?(H$d[1]=H$G.arcTanAngle(-H$c[2],-H$c[0]),H$d[2]=0):(H$ab.createRotationY(-H$d[1],H$cb.TEMPMatrix0),H$ab.createRotationX(-H$d[0],H$cb.TEMPMatrix1),H$gb.transformCoordinate(H$cb.TEMPVector32,H$cb.TEMPMatrix0,H$cb.TEMPVector32),H$gb.transformCoordinate(H$cb.TEMPVector32,H$cb.TEMPMatrix1,H$cb.TEMPVector32),H$d[2]=H$G.arcTanAngle(H$c[1],-H$c[0])),H$d[1]<=-Math.PI&&(H$d[1]=Math.PI),H$d[2]<=-Math.PI&&(H$d[2]=Math.PI),H$d[1]>=Math.PI&&H$d[2]>=Math.PI&&(H$d[1]=0,H$d[2]=0,H$d[0]=Math.PI-H$d[0]),H$b[0]=H$d[1],H$b[1]=H$d[0],H$b[2]=H$d[2]},H$G.arcTanAngle=function(H$a,H$b){return 0==H$a?1==H$b?Math.PI/2:-Math.PI/2:0<H$a?Math.atan(H$b/H$a):H$a<0?0<H$b?Math.atan(H$b/H$a)+Math.PI:Math.atan(H$b/H$a)-Math.PI:0},H$G.angleTo=function(H$a,H$b,H$c){H$gb.subtract(H$b,H$a,H$cb.TEMPVector30),H$gb.normalize(H$cb.TEMPVector30,H$cb.TEMPVector30),H$c.elements[0]=Math.asin(H$cb.TEMPVector30.y),H$c.elements[1]=H$G.arcTanAngle(-H$cb.TEMPVector30.z,-H$cb.TEMPVector30.x)},H$G.transformQuat=function(H$a,H$b,H$c){var H$d=H$c.elements,H$e=H$a.elements,H$f=H$b,H$g=H$e[0],H$h=H$e[1],H$i=H$e[2],H$j=H$f[0],H$k=H$f[1],H$l=H$f[2],H$m=H$f[3],H$n=H$m*H$g+H$k*H$i-H$l*H$h,H$o=H$m*H$h+H$l*H$g-H$j*H$i,H$p=H$m*H$i+H$j*H$h-H$k*H$g,H$q=-H$j*H$g-H$k*H$h-H$l*H$i;H$d[0]=H$n*H$m+H$q*-H$j+H$o*-H$l-H$p*-H$k,H$d[1]=H$o*H$m+H$q*-H$k+H$p*-H$j-H$n*-H$l,H$d[2]=H$p*H$m+H$q*-H$l+H$n*-H$k-H$o*-H$j},H$G.quaterionNormalize=function(H$a,H$b){var H$c=H$a[0],H$d=H$a[1],H$e=H$a[2],H$f=H$a[3],H$g=H$c*H$c+H$d*H$d+H$e*H$e+H$f*H$f;0<H$g&&(H$g=1/Math.sqrt(H$g),H$b[0]=H$c*H$g,H$b[1]=H$d*H$g,H$b[2]=H$e*H$g,H$b[3]=H$f*H$g)},H$G.matrix4x4MultiplyFFF=function(H$a,H$b,H$c){var H$d,H$e,H$f,H$g,H$h;if(H$c===H$b)for(H$b=new Float32Array(16),H$d=0;H$d<16;++H$d)H$b[H$d]=H$c[H$d];for(H$d=0;H$d<4;H$d++)H$e=H$a[H$d],H$f=H$a[H$d+4],H$g=H$a[H$d+8],H$h=H$a[H$d+12],H$c[H$d]=H$e*H$b[0]+H$f*H$b[1]+H$g*H$b[2]+H$h*H$b[3],H$c[H$d+4]=H$e*H$b[4]+H$f*H$b[5]+H$g*H$b[6]+H$h*H$b[7],H$c[H$d+8]=H$e*H$b[8]+H$f*H$b[9]+H$g*H$b[10]+H$h*H$b[11],H$c[H$d+12]=H$e*H$b[12]+H$f*H$b[13]+H$g*H$b[14]+H$h*H$b[15]},H$G.matrix4x4MultiplyMFM=function(H$a,H$b,H$c){H$G.matrix4x4MultiplyFFF(H$a.elements,H$b,H$c.elements)},H$l(H$G,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new H$gb},"_tempVector3_1",function(){return this._tempVector3_1=new H$gb},"_tempVector3_2",function(){return this._tempVector3_2=new H$gb},"_tempVector3_3",function(){return this._tempVector3_3=new H$gb},"_tempVector3_4",function(){return this._tempVector3_4=new H$gb},"_tempVector3_5",function(){return this._tempVector3_5=new H$gb},"_tempVector3_6",function(){return this._tempVector3_6=new H$gb},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),H$G}(),H$rb=function(){function H$E(){}return H$n(H$E,"Laya3D"),H$E._cancelLoadByUrl=function(H$a){H$v.loader.cancelLoadByUrl(H$a),H$E._innerFirstLevelLoaderManager.cancelLoadByUrl(H$a),H$E._innerSecondLevelLoaderManager.cancelLoadByUrl(H$a),H$E._innerThirdLevelLoaderManager.cancelLoadByUrl(H$a),H$E._innerFourthLevelLoaderManager.cancelLoadByUrl(H$a)},H$E._changeWebGLSize=function(H$a,H$b){H$D.onStageResize(H$a,H$b),H$W.clientWidth=H$a,H$W.clientHeight=H$b},H$E.__init__=function(){var H$a=H$b.createMap;H$a.lh=[H$Ib,"SPRITE3DHIERARCHY"],H$a.ls=[H$Hb,"SPRITE3DHIERARCHY"],H$a.lm=[H$Pb,"MESH"],H$a.lmat=[H$Kb,"MATERIAL"],H$a.jpg=[H$Rb,"nativeimage"],H$a.jpeg=[H$Rb,"nativeimage"],H$a.png=[H$Rb,"nativeimage"],H$a.pkm=[H$Rb,"arraybuffer"],H$a.raw=[H$Nb,"arraybuffer"],H$a.mipmaps=[H$Nb,"arraybuffer"],H$r.parserMap.SPRITE3DHIERARCHY=H$E._loadHierarchy,H$r.parserMap.MESH=H$E._loadMesh,H$r.parserMap.MATERIAL=H$E._loadMaterial,H$r.parserMap.TEXTURECUBE=H$E._loadTextureCube,H$r.parserMap.TERRAIN=H$E._loadTerrain,H$E._innerFirstLevelLoaderManager.on("error",null,H$E._eventLoadManagerError),H$E._innerSecondLevelLoaderManager.on("error",null,H$E._eventLoadManagerError),H$E._innerThirdLevelLoaderManager.on("error",null,H$E._eventLoadManagerError),H$E._innerFourthLevelLoaderManager.on("error",null,H$E._eventLoadManagerError)},H$E.READ_BLOCK=function(){return H$E._readData.pos+=4,!0},H$E.READ_DATA=function(){return H$E._DATA.offset=H$E._readData.getUint32(),H$E._DATA.size=H$E._readData.getUint32(),!0},H$E.READ_STRINGS=function(){var H$a=[],H$b={offset:0,size:0};H$b.offset=H$E._readData.getUint16(),H$b.size=H$E._readData.getUint16();H$E._readData.pos;H$E._readData.pos=H$b.offset+H$E._DATA.offset;for(var H$c=0;H$c<H$b.size;H$c++){var H$d=H$E._readData.readUTFString();-1===H$d.lastIndexOf(".lmat")&&-1===H$d.lastIndexOf(".lpbr")||H$a.push(H$d)}return H$a},H$E.formatRelativePath=function(H$a,H$b){var H$c;if("."===H$b.charAt(0)){for(var H$d=(H$a+H$b).split("/"),H$e=0,H$f=H$d.length;H$e<H$f;H$e++)if(".."==H$d[H$e]){var H$g=H$e-1;0<H$g&&".."!==H$d[H$g]&&(H$d.splice(H$g,2),H$e-=2)}H$c=H$d.join("/")}else H$c=H$a+H$b;return null!=H$C.customFormat&&(H$c=H$C.customFormat(H$c,null)),H$c},H$E._eventLoadManagerError=function(H$a){H$v.loader.event("error",H$a)},H$E._addHierarchyInnerUrls=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g=H$E.formatRelativePath(H$d,H$e);H$c&&(H$g+=H$c),H$a.push({url:H$g,clas:H$f}),H$b[H$e]=H$g},H$E._getSprite3DHierarchyInnerUrls=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){var H$h,H$i=0,H$j=0;switch(H$a.type){case"Scene":var H$k=H$a.customProps.lightmaps;for(H$i=0,H$j=H$k.length;H$i<H$j;H$i++){var H$l=H$k[H$i].replace(".exr",".png");H$E._addHierarchyInnerUrls(H$d,H$e,H$f,H$g,H$l,H$Rb)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var H$m;if(H$a.instanceParams)(H$m=H$a.instanceParams.loadPath)&&H$E._addHierarchyInnerUrls(H$b,H$e,H$f,H$g,H$m,H$Pb);else{(H$m=(H$h=H$a.customProps).meshPath)&&H$E._addHierarchyInnerUrls(H$b,H$e,H$f,H$g,H$m,H$Pb);var H$n=H$h.materials;if(H$n)for(H$i=0,H$j=H$n.length;H$i<H$j;H$i++){for(var H$o=H$n[H$i],H$p=H$o.type.split("."),H$q=H$F.window,H$r=0,H$s=H$p.length;H$r<H$s;++H$r){H$q=H$q[this.clasPaths[H$r]]}if("function"!=typeof H$q)throw"_getSprite3DHierarchyInnerUrls 错误: "+H$o.type+" 不是类";H$E._addHierarchyInnerUrls(H$c,H$e,H$f,H$g,H$o.path,H$q)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var H$t=(H$h=H$a.customProps).meshPath;H$t&&H$E._addHierarchyInnerUrls(H$b,H$e,H$f,H$g,H$t,H$Pb);var H$u=H$h.material;if(H$u){H$p=H$u.type.split("."),H$q=H$F.window;for(H$r=0,H$s=H$p.length;H$r<H$s;++H$r){H$q=H$q[this.clasPaths[H$r]]}H$E._addHierarchyInnerUrls(H$c,H$e,H$f,H$g,H$u.path,H$q)}else{var H$v=H$h.materialPath;if(H$v)H$E._addHierarchyInnerUrls(H$c,H$e,H$f,H$g,H$v,ShurikenParticleMaterial);else{var H$w=H$h.texturePath;H$w&&H$E._addHierarchyInnerUrls(H$d,H$e,H$f,H$g,H$w,H$Rb)}}break;case"Terrain":H$E._addHierarchyInnerUrls(H$d,H$e,H$f,H$g,H$a.customProps.dataPath,TerrainRes)}var H$x=H$a.components;for(var H$y in H$x){var H$z=H$x[H$y];switch(H$y){case"Animator":var H$A=H$z.avatarPath;if(H$A)H$E._addHierarchyInnerUrls(H$d,H$e,H$f,H$g,H$A,Avatar);else{var H$B=H$z.avatar;H$B&&H$E._addHierarchyInnerUrls(H$d,H$e,H$f,H$g,H$B.path,Avatar)}var H$C=H$z.clipPaths;for(H$i=0,H$j=H$C.length;H$i<H$j;H$i++)H$E._addHierarchyInnerUrls(H$d,H$e,H$f,H$g,H$C[H$i],AnimationClip)}}var H$D=H$a.child;for(H$i=0,H$j=H$D.length;H$i<H$j;H$i++)H$E._getSprite3DHierarchyInnerUrls(H$D[H$i],H$b,H$c,H$d,H$e,H$f,H$g)},H$E._loadHierarchy=function(H$a){H$a.on("loaded",null,H$E._onHierarchylhLoaded,[H$a,H$a._class._getGroup()]),H$a.load(H$a.url,"json",!1,null,!0)},H$E._onHierarchylhLoaded=function(H$a,H$b,H$c){if(H$a._class.destroyed)H$a.endLoad();else{var H$d=H$a.url,H$e=H$qb.getURLVerion(H$d),H$f=H$C.getPath(H$d),H$g=[],H$h=[],H$i=[],H$j={};H$E._getSprite3DHierarchyInnerUrls(H$c,H$g,H$h,H$i,H$j,H$e,H$f);var H$k=H$g.length+H$h.length+H$i.length,H$l=H$k+1,H$m=1/H$l;if(H$E._onProcessChange(H$a,0,H$m,1),0<H$i.length){var H$n=H$k/H$l,H$o=H$B.create(null,H$E._onProcessChange,[H$a,H$m,H$n],!1);H$E._innerFourthLevelLoaderManager.create(H$i,H$B.create(null,H$E._onHierarchyInnerForthLevResouLoaded,[H$a,H$b,H$o,H$c,H$j,H$g,H$h,H$m+H$n*H$i.length,H$n]),H$o,null,null,1,!0,H$b)}else H$E._onHierarchyInnerForthLevResouLoaded(H$a,H$b,null,H$c,H$j,H$g,H$h,H$m,H$n)}},H$E._onHierarchyInnerForthLevResouLoaded=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i){if(H$a._class.destroyed)H$a.endLoad();else if(H$c&&H$c.recover(),0<H$g.length){var H$j=H$B.create(null,H$E._onProcessChange,[H$a,H$h,H$i],!1);H$E._innerSecondLevelLoaderManager.create(H$g,H$B.create(null,H$E._onHierarchyInnerSecondLevResouLoaded,[H$a,H$b,H$j,H$d,H$e,H$f,H$h+H$i*H$g.length,H$i]),H$c,null,null,1,!0,H$b)}else H$E._onHierarchyInnerSecondLevResouLoaded(H$a,H$b,null,H$d,H$e,H$f,H$h,H$i)},H$E._onHierarchyInnerSecondLevResouLoaded=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h){if(H$a._class.destroyed)H$a.endLoad();else if(H$c&&H$c.recover(),0<H$f.length){var H$i=H$B.create(null,H$E._onProcessChange,[H$a,H$g,H$h],!1);H$E._innerFirstLevelLoaderManager.create(H$f,H$B.create(null,H$E._onHierarchyInnerFirstLevResouLoaded,[H$a,H$i,H$d,H$e]),H$c,null,null,1,!0,H$b)}else H$E._onHierarchyInnerFirstLevResouLoaded(H$a,null,H$d,H$e)},H$E._onHierarchyInnerFirstLevResouLoaded=function(H$a,H$b,H$c,H$d){H$b&&H$b.recover(),H$a.endLoad([H$c,H$d])},H$E._loadTerrain=function(H$a){H$a.on("loaded",null,H$E._onTerrainLtLoaded,[H$a,H$a._class._getGroup()]),H$a.load(H$a.url,"json",!1,null,!0)},H$E._onTerrainLtLoaded=function(H$a,H$b,H$c){if(H$a._class.destroyed)H$a.endLoad();else{var H$d,H$e,H$f=H$a.url,H$g=H$qb.getURLVerion(H$f),H$h=H$C.getPath(H$f),H$i=[],H$j={},H$k=0,H$l=0,H$m=H$c.heightData;H$d=H$m.url,H$e=H$E.formatRelativePath(H$h,H$d),H$g&&(H$e+=H$g),H$d=H$j[H$d]=H$e;var H$n=H$c.detailTexture;for(H$k=0,H$l=H$n.length;H$k<H$l;H$k++)H$i.push({url:H$n[H$k].diffuse});var H$o=H$c.normalMap;for(H$k=0,H$l=H$o.length;H$k<H$l;H$k++)H$i.push({url:H$o[H$k]});var H$p=H$c.alphaMap;for(H$k=0,H$l=H$p.length;H$k<H$l;H$k++)H$i.push({url:H$p[H$k],params:[!1,!1,6408,!0]});for(H$k=0,H$l=H$i.length;H$k<H$l;H$k++){var H$q=H$i[H$k].url;H$e=H$E.formatRelativePath(H$h,H$q),H$g&&(H$e+=H$g),H$i[H$k].url=H$e,H$j[H$q]=H$e}var H$r=H$i.length,H$s=H$r+2,H$t=1/H$s;H$E._onProcessChange(H$a,0,H$t,1);var H$u={heightMapLoaded:!1,texturesLoaded:!1},H$v=H$B.create(null,H$E._onProcessChange,[H$a,H$t,H$t],!1);H$E._innerFourthLevelLoaderManager.create(H$d,H$B.create(null,H$E._onTerrainHeightMapLoaded,[H$a,H$v,H$c,H$j,H$u]),H$v,null,[H$m.numX,H$m.numZ,H$m.bitType,H$m.value],1,!0,H$b);var H$w=H$B.create(null,H$E._onProcessChange,[H$a,2*H$t,H$r/H$s],!1);H$E._innerFourthLevelLoaderManager.create(H$i,H$B.create(null,H$E._onTerrainTexturesLoaded,[H$a,H$w,H$c,H$j,H$u]),H$w,null,null,1,!0,H$b)}},H$E._onTerrainHeightMapLoaded=function(H$a,H$b,H$c,H$d,H$e){H$e.heightMapLoaded=!0,H$e.texturesLoaded&&(H$a.endLoad([H$c,H$d]),H$b.recover())},H$E._onTerrainTexturesLoaded=function(H$a,H$b,H$c,H$d,H$e){H$e.texturesLoaded=!0,H$e.heightMapLoaded&&(H$a.endLoad([H$c,H$d]),H$b.recover())},H$E._loadMesh=function(H$a){H$a.on("loaded",null,H$E._onMeshLmLoaded,[H$a,H$a._class._getGroup()]),H$a.load(H$a.url,"arraybuffer",!1,null,!0)},H$E._onMeshLmLoaded=function(H$a,H$b,H$c){if(H$a._class.destroyed)H$a.endLoad();else{var H$d,H$e,H$f,H$g=H$a.url,H$h=H$qb.getURLVerion(H$g),H$i=H$C.getPath(H$g),H$j={},H$k=0,H$l=0;switch((H$E._readData=new H$w(H$c)).pos=0,H$E._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var H$m=H$E._readData.getUint32();H$E._readData.pos=H$E._readData.pos+4,H$l=H$E._readData.getUint16(),H$E._readData.pos=H$E._readData.pos+8*H$l;var H$n=H$E._readData.getUint32();for(H$l=H$E._readData.getUint16(),H$E._readData.pos=H$m+H$n,H$d=[],H$k=0;H$k<H$l;H$k++){var H$o=H$E._readData.readUTFString();-1!==H$o.lastIndexOf(".lmat")&&H$d.push(H$o)}break;default:for(H$E.READ_BLOCK(),H$k=0;H$k<2;H$k++){var H$p=H$E._readData.getUint16(),H$q=H$E._strings[H$p],H$r=H$E["READ_"+H$q];if(null==H$r)throw new Error("model file err,no this function:"+H$p+" "+H$q);1===H$k?H$d=H$r.call():H$r.call()}}for(H$k=0,H$f=H$d.length;H$k<H$f;H$k++){var H$s=H$d[H$k];H$e=H$E.formatRelativePath(H$i,H$s),H$h&&(H$e+=H$h),H$d[H$k]=H$e,H$j[H$s]=H$e}if(0<H$d.length){H$E._onProcessChange(H$a,0,.5,1);var H$t=H$B.create(null,H$E._onProcessChange,[H$a,.5,.5],!1);H$E._innerSecondLevelLoaderManager.create(H$d,H$B.create(null,H$E._onMeshMateialLoaded,[H$a,H$t,H$c,H$j]),H$t,null,null,1,!0,H$b)}else H$a.endLoad([H$c,H$j])}},H$E._onMeshMateialLoaded=function(H$a,H$b,H$c,H$d){H$a.endLoad([H$c,H$d]),H$b.recover()},H$E._getMaterialTexturePath=function(H$a,H$b,H$c){var H$d=H$a.length-4;return H$a.indexOf(".dds")!=H$d&&H$a.indexOf(".tga")!=H$d&&H$a.indexOf(".exr")!=H$d&&H$a.indexOf(".DDS")!=H$d&&H$a.indexOf(".TGA")!=H$d&&H$a.indexOf(".EXR")!=H$d||(H$a=H$a.substr(0,H$d)+".png"),H$a=H$E.formatRelativePath(H$c,H$a),H$b&&(H$a+=H$b),H$a},H$E._loadMaterial=function(H$a){H$a.on("loaded",null,H$E._onMaterilLmatLoaded,[H$a,H$a._class._getGroup()]),H$a.load(H$a.url,"json",!1,null,!0)},H$E._onMaterilLmatLoaded=function(H$a,H$b,H$c){if(H$a._class.destroyed)H$a.endLoad();else{var H$d,H$e=H$a.url,H$f=H$qb.getURLVerion(H$e),H$g=H$C.getPath(H$e),H$h=[],H$i={},H$j=H$c.customProps,H$k=H$c.version;if(H$k)switch(H$k){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var H$l=H$c.props.textures,H$m=0,H$n=H$l.length;H$m<H$n;H$m++){var H$o=H$l[H$m],H$p=H$o.path;if(H$p){var H$q=H$p.length-4;H$p.indexOf(".exr")!=H$q&&H$p.indexOf(".EXR")!=H$q||(H$p=H$p.substr(0,H$q)+".png"),H$d=H$E.formatRelativePath(H$g,H$p),H$f&&(H$d+=H$f),H$h.push({url:H$d,params:H$o.params}),H$i[H$p]=H$d}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var H$r=H$j.diffuseTexture.texture2D;if(H$r&&(H$d=H$E._getMaterialTexturePath(H$r,H$f,H$g),H$h.push(H$d),H$i[H$r]=H$d),H$j.normalTexture){var H$s=H$j.normalTexture.texture2D;H$s&&(H$d=H$E._getMaterialTexturePath(H$s,H$f,H$g),H$h.push(H$d),H$i[H$s]=H$d)}if(H$j.specularTexture){var H$t=H$j.specularTexture.texture2D;H$t&&(H$d=H$E._getMaterialTexturePath(H$t,H$f,H$g),H$h.push(H$d),H$i[H$t]=H$d)}if(H$j.emissiveTexture){var H$u=H$j.emissiveTexture.texture2D;H$u&&(H$d=H$E._getMaterialTexturePath(H$u,H$f,H$g),H$h.push(H$d),H$i[H$u]=H$d)}if(H$j.ambientTexture){var H$v=H$j.ambientTexture.texture2D;H$v&&(H$d=H$E._getMaterialTexturePath(H$v,H$f,H$g),H$h.push(H$d),H$i[H$v]=H$d)}if(H$j.reflectTexture){var H$w=H$j.reflectTexture.texture2D;H$w&&(H$d=H$E._getMaterialTexturePath(H$w,H$f,H$g),H$h.push(H$d),H$i[H$w]=H$d)}}var H$x=H$h.length,H$y=H$x+1,H$z=1/H$y;if(H$E._onProcessChange(H$a,0,H$z,1),0<H$x){var H$A=H$B.create(null,H$E._onProcessChange,[H$a,H$z,H$x/H$y],!1);H$E._innerFourthLevelLoaderManager.create(H$h,H$B.create(null,H$E._onMateialTexturesLoaded,[H$a,H$A,H$c,H$i]),H$A,H$Rb,null,1,!0,H$b)}else H$E._onMateialTexturesLoaded(H$a,null,H$c,null)}},H$E._onMateialTexturesLoaded=function(H$a,H$b,H$c,H$d){H$a.endLoad([H$c,H$d]),H$b&&H$b.recover()},H$E._loadTextureCube=function(H$a){H$a.on("loaded",null,H$E._onTextureCubeLtcLoaded,[H$a]),H$a.load(H$a.url,"json",!1,null,!0)},H$E._onTextureCubeLtcLoaded=function(H$a,H$b){if(H$a._class.destroyed)H$a.endLoad();else{var H$c=H$C.getPath(H$a.url),H$d=[H$E.formatRelativePath(H$c,H$b.px),H$E.formatRelativePath(H$c,H$b.nx),H$E.formatRelativePath(H$c,H$b.py),H$E.formatRelativePath(H$c,H$b.ny),H$E.formatRelativePath(H$c,H$b.pz),H$E.formatRelativePath(H$c,H$b.nz)];H$E._onProcessChange(H$a,0,1/7,1);var H$e=H$B.create(null,H$E._onProcessChange,[H$a,1/7,6/7],!1);H$E._innerFourthLevelLoaderManager.load(H$d,H$B.create(null,H$E._onTextureCubeImagesLoaded,[H$a,H$d,H$e]),H$e,"nativeimage")}},H$E._onTextureCubeImagesLoaded=function(H$a,H$b,H$c){var H$d=[];H$d.length=6;for(var H$e=0;H$e<6;H$e++){var H$f=H$b[H$e];H$d[H$e]=H$r.getRes(H$f),H$r.clearRes(H$f)}H$a.endLoad(H$d),H$c.recover()},H$E._onProcessChange=function(H$a,H$b,H$c,H$d){(H$d=H$b+H$d*H$c)<1&&H$a.event("progress",H$d)},H$E.init=function(H$a,H$b,H$c,H$d,H$e,H$f){if(void 0===H$c&&(H$c=!1),void 0===H$d&&(H$d=!1),void 0===H$e&&(H$e=!0),void 0===H$f&&(H$f=!0),H$s.update3DLoop=function(){},H$s.cancelLoadByUrl=function(H$a){H$E._cancelLoadByUrl(H$a)},H$i.isAntialias=H$c,H$i.isAlpha=H$d,H$i.premultipliedAlpha=H$e,H$i.isStencil=H$f,!H$D.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");H$s.changeWebGLSize=H$E._changeWebGLSize,H$p.is3DMode=!0,H$v.init(H$a,H$b),H$G.__init__(),H$lb.__init__(),H$Vb.__init__(),H$O.__init__(),H$E.__init__(),H$g.maxTextureCount=2,(H$E.debugMode||H$X.debugMode)&&(H$E._debugPhasorSprite=new H$T)},H$E.HIERARCHY="SPRITE3DHIERARCHY",H$E.MESH="MESH",H$E.MATERIAL="MATERIAL",H$E.PBRMATERIAL="PBRMTL",H$E.TEXTURECUBE="TEXTURECUBE",H$E.TERRAIN="TERRAIN",H$E._readData=null,H$E._debugPhasorSprite=null,H$E.debugMode=!1,H$l(H$E,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new H$b},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new H$b},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new H$b},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new H$b}]),H$E}(),H$sb=function(H$a){function H$e(H$a){H$e.__super.call(this),this._owner=H$a,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}H$n(H$e,"laya.d3.animation.AnimationTransform3D",H$f);var H$b=H$e.prototype;return H$b._getlocalMatrix=function(){return this._localUpdate&&(H$qb._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},H$b._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var H$a=0,H$b=this._childs.length;H$a<H$b;H$a++)this._childs[H$a]._onWorldTransform()}},H$b._setWorldMatrixAndUpdate=function(H$a){if(this._worldMatrix=H$a,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var H$b=this._getlocalMatrix(),H$c=0;H$c<16;++H$c)this._worldMatrix[H$c]=H$b[H$c];else H$qb.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},H$b._setWorldMatrixNoUpdate=function(H$a){this._worldMatrix=H$a},H$b._setWorldMatrixIgnoreUpdate=function(H$a){this._worldMatrix=H$a,this._worldUpdate=!1},H$b.getLocalPosition=function(){return this._localPosition},H$b.setLocalPosition=function(H$a){if(this._parent)this._localPosition=H$a,this._localUpdate=!0,this._onWorldTransform();else{var H$b=this._entity.owner._transform,H$c=this._entity.localPosition,H$d=H$c.elements;H$d[0]=H$a[0],H$d[1]=H$a[1],H$d[2]=H$a[2],H$b.localPosition=H$c}},H$b.getLocalRotation=function(){if(this._localQuaternionUpdate){var H$a=this._localRotationEuler;H$qb._quaternionCreateFromYawPitchRollArray(H$a[1]/H$e._angleToRandin,H$a[0]/H$e._angleToRandin,H$a[2]/H$e._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},H$b.setLocalRotation=function(H$a){if(this._parent)this._localRotation=H$a,H$qb.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var H$b=this._entity.owner._transform,H$c=this._entity.localRotation,H$d=H$c.elements;H$d[0]=H$a[0],H$d[1]=H$a[1],H$d[2]=H$a[2],H$d[3]=H$a[3],H$b.localRotation=H$c}},H$b.getLocalScale=function(){return this._localScale},H$b.setLocalScale=function(H$a){if(this._parent)this._localScale=H$a,this._localUpdate=!0,this._onWorldTransform();else{var H$b=this._entity.owner._transform,H$c=this._entity.localScale,H$d=H$c.elements;H$d[0]=H$a[0],H$d[1]=H$a[1],H$d[2]=H$a[2],H$b.localScale=H$c}},H$b.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){H$qb.getYawPitchRoll(this._localRotation,H$e._tempVector3);var H$a=H$e._tempVector3,H$b=this._localRotationEuler;H$b[0]=H$a[1]*H$e._angleToRandin,H$b[1]=H$a[0]*H$e._angleToRandin,H$b[2]=H$a[2]*H$e._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},H$b.setLocalRotationEuler=function(H$a){if(this._parent)H$qb._quaternionCreateFromYawPitchRollArray(H$a[1]/H$e._angleToRandin,H$a[0]/H$e._angleToRandin,H$a[2]/H$e._angleToRandin,this._localRotation),this._localRotationEuler=H$a,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var H$b=this._entity.owner._transform,H$c=this._entity.localRotationEuler,H$d=H$c.elements;H$d[0]=H$a[0],H$d[1]=H$a[1],H$d[2]=H$a[2],H$b.localRotationEuler=H$c}},H$b.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)H$qb.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var H$a=this._getlocalMatrix(),H$b=0;H$b<16;++H$b)this._worldMatrix[H$b]=H$a[H$b];this._worldUpdate=!1}return this._worldMatrix},H$b.setParent=function(H$a){if(this._parent!==H$a){if(this._parent){var H$b=this._parent._childs,H$c=H$b.indexOf(this);H$b.splice(H$c,1)}H$a&&(H$a._childs.push(this),H$a&&this._onWorldTransform()),this._parent=H$a}},H$l(H$e,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),H$e}(),H$tb=function(H$a){function H$b(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,H$b.__super.call(this),this._destroyed=!1,this._id=H$b._uniqueIDCounter,H$b._uniqueIDCounter++}H$n(H$b,"laya.d3.component.Component3D",H$f);var H$c=H$b.prototype;return H$v.imps(H$c,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),H$c._initialize=function(H$a){this._owner=H$a,this._enable=!0,this.started=!1,this._load(H$a)},H$c._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},H$c._load=function(H$a){},H$c._start=function(H$a){},H$c._update=function(H$a){},H$c._lateUpdate=function(H$a){},H$c._preRenderUpdate=function(H$a){},H$c._postRenderUpdate=function(H$a){},H$c._unload=function(H$a){this.offAll()},H$c._cloneTo=function(H$a){},H$o(0,H$c,"id",function(){return this._id}),H$o(0,H$c,"destroyed",function(){return this._destroyed}),H$o(0,H$c,"owner",function(){return this._owner}),H$o(0,H$c,"enable",function(){return this._enable},function(H$a){this._enable!==H$a&&(this._enable=H$a,this.event("enablechanged",this._enable))}),H$o(0,H$c,"isSingleton",function(){return H$b._isSingleton}),H$b._isSingleton=!0,H$b._uniqueIDCounter=1,H$b}(),H$ub=function(H$a){function H$b(){this._destroyed=!1,H$b.__super.call(this),this._destroyed=!1}H$n(H$b,"laya.d3.core.GeometryFilter",H$f);var H$c=H$b.prototype;return H$v.imps(H$c,{"laya.resource.IDestroy":!0}),H$c._destroy=function(){this.offAll(),this._destroyed=!0},H$o(0,H$c,"_isAsyncLoaded",function(){return!0}),H$o(0,H$c,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),H$o(0,H$c,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),H$o(0,H$c,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),H$o(0,H$c,"destroyed",function(){return this._destroyed}),H$b}(),H$vb=function(H$a){function H$d(H$a){H$d.__super.call(this),this._id=++H$d._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new H$Xa(new H$gb,new H$gb),this._boundingBoxCenter=new H$gb,this._boundingSphere=new H$Za(new H$gb,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=H$a,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}H$n(H$d,"laya.d3.core.render.BaseRender",H$f);var H$b=H$d.prototype;return H$v.imps(H$b,{"laya.resource.IDestroy":!0}),H$b._changeMaterialReference=function(H$a,H$b){H$a&&H$a._removeReference(),H$b._addReference()},H$b._getInstanceMaterial=function(H$a,H$b){var H$c=new H$a.constructor;return H$a.cloneTo(H$c),H$c.name=H$c.name+"(Instance)",this._materialsInstance[H$b]=!0,this._changeMaterialReference(this._materials[H$b],H$c),this._materials[H$b]=H$c},H$b._setShaderValuelightMap=function(H$a){this._setShaderValueTexture(3,H$a)},H$b._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},H$b._renderRenderableBoundBox=function(){var H$a=H$rb._debugPhasorSprite,H$b=this.boundingBox,H$c=H$d._tempBoundBoxCorners;H$b.getCorners(H$c),H$a.line(H$c[0],H$d._greenColor,H$c[1],H$d._greenColor),H$a.line(H$c[2],H$d._greenColor,H$c[3],H$d._greenColor),H$a.line(H$c[4],H$d._greenColor,H$c[5],H$d._greenColor),H$a.line(H$c[6],H$d._greenColor,H$c[7],H$d._greenColor),H$a.line(H$c[0],H$d._greenColor,H$c[3],H$d._greenColor),H$a.line(H$c[1],H$d._greenColor,H$c[2],H$d._greenColor),H$a.line(H$c[2],H$d._greenColor,H$c[6],H$d._greenColor),H$a.line(H$c[3],H$d._greenColor,H$c[7],H$d._greenColor),H$a.line(H$c[0],H$d._greenColor,H$c[4],H$d._greenColor),H$a.line(H$c[1],H$d._greenColor,H$c[5],H$d._greenColor),H$a.line(H$c[4],H$d._greenColor,H$c[7],H$d._greenColor),H$a.line(H$c[5],H$d._greenColor,H$c[6],H$d._greenColor)},H$b._calculateBoundingSphere=function(){throw"BaseRender: must override it."},H$b._calculateBoundingBox=function(){throw"BaseRender: must override it."},H$b._setShaderValueTexture=function(H$a,H$b){this._owner._shaderValues.setValue(H$a,H$b)},H$b._setShaderValueMatrix4x4=function(H$a,H$b){this._owner._shaderValues.setValue(H$a,H$b?H$b.elements:null)},H$b._setShaderValueColor=function(H$a,H$b){this._owner._shaderValues.setValue(H$a,H$b?H$b.elements:null)},H$b._setShaderValueBuffer=function(H$a,H$b){this._owner._shaderValues.setValue(H$a,H$b)},H$b._setShaderValueInt=function(H$a,H$b){this._owner._shaderValues.setValue(H$a,H$b)},H$b._setShaderValueBool=function(H$a,H$b){this._owner._shaderValues.setValue(H$a,H$b)},H$b._setShaderValueNumber=function(H$a,H$b){this._owner._shaderValues.setValue(H$a,H$b)},H$b._setShaderValueVector2=function(H$a,H$b){this._owner._shaderValues.setValue(H$a,H$b?H$b.elements:null)},H$b._addShaderDefine=function(H$a){this._owner._shaderDefineValue|=H$a},H$b._removeShaderDefine=function(H$a){this._owner._shaderDefineValue&=~H$a},H$b._renderUpdate=function(H$a){return!0},H$b._applyLightMapParams=function(){if(0<=this._lightmapIndex){var H$a=this._owner.scene;if(H$a){var H$b=H$a.getlightmaps()[this._lightmapIndex];H$b?(this._addShaderDefine(H$Tb.SAHDERDEFINE_LIGHTMAP),H$b.loaded?this._setShaderValuelightMap(H$b):H$b.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(H$Tb.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(H$Tb.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(H$Tb.SAHDERDEFINE_LIGHTMAP)},H$b._updateOctreeNode=function(){var H$a=this._treeNode;H$a&&this._octreeNodeNeedChange&&(H$a.updateObject(this),this._octreeNodeNeedChange=!1)},H$b._destroy=function(){this.offAll();var H$a=0,H$b=0;for(H$a=0,H$b=this._renderElements.length;H$a<H$b;H$a++)this._renderElements[H$a]._destroy();for(H$a=0,H$b=this._materials.length;H$a<H$b;H$a++)this._materials[H$a]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},H$o(0,H$b,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),H$o(0,H$b,"id",function(){return this._id}),H$o(0,H$b,"material",function(){var H$a=this._materials[0];if(H$a&&!this._materialsInstance[0]){var H$b=this._getInstanceMaterial(H$a,0);this.event("materialchanged",[this,0,H$b])}return this._materials[0]},function(H$a){this.sharedMaterial=H$a}),H$o(0,H$b,"sharedMaterial",function(){return this._materials[0]},function(H$a){var H$b=this._materials[0];H$b!==H$a&&(this._materials[0]=H$a,this._materialsInstance[0]=!1,this._changeMaterialReference(H$b,H$a),this.event("materialchanged",[this,0,H$a]))}),H$o(0,H$b,"lightmapIndex",function(){return this._lightmapIndex},function(H$a){this._lightmapIndex=H$a,this._applyLightMapParams()}),H$o(0,H$b,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(H$a){this._lightmapScaleOffset=H$a,this._setShaderValueColor(2,H$a),this._addShaderDefine(H$Tb.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),H$o(0,H$b,"enable",function(){return this._enable},function(H$a){this._enable=H$a,this.event("enablechanged",[this,H$a])}),H$o(0,H$b,"materials",function(){for(var H$a=0,H$b=this._materials.length;H$a<H$b;H$a++)if(!this._materialsInstance[H$a]){var H$c=this._getInstanceMaterial(this._materials[H$a],H$a);this.event("materialchanged",[this,H$a,H$c])}return this._materials.slice()},function(H$a){this.sharedMaterials=H$a}),H$o(0,H$b,"sharedMaterials",function(){return this._materials.slice()},function(H$a){if(!H$a)throw new Error("MeshRender: shadredMaterials value can't be null.");var H$b=H$a.length;this._materialsInstance.length=H$b;for(var H$c=0;H$c<H$b;H$c++){var H$d=this._materials[H$c];H$d!==H$a[H$c]&&(this._materialsInstance[H$c]=!1,this._changeMaterialReference(H$d,H$a[H$c]),this.event("materialchanged",[this,H$c,H$a[H$c]]))}this._materials=H$a}),H$o(0,H$b,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),H$o(0,H$b,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var H$a=this.boundingBox;H$gb.add(H$a.min,H$a.max,this._boundingBoxCenter),H$gb.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),H$o(0,H$b,"receiveShadow",function(){return this._receiveShadow},function(H$a){this._receiveShadow!==H$a&&((this._receiveShadow=H$a)?this._addShaderDefine(H$nb.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(H$nb.SHADERDEFINE_RECEIVE_SHADOW))}),H$o(0,H$b,"destroyed",function(){return this._destroyed}),H$d._uniqueIDCounter=0,H$l(H$d,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new H$gb,new H$gb,new H$gb,new H$gb,new H$gb,new H$gb,new H$gb,new H$gb]},"_greenColor",function(){return this._greenColor=new H$hb(0,1,0,1)}]),H$d}(),H$wb=function(H$a){function H$h(H$a){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,H$h.__super.call(this),this._localPosition=new H$gb,this._localRotation=new H$cb(0,0,0,1),this._localScale=new H$gb(1,1,1),this._localRotationEuler=new H$gb,this._localMatrix=new H$ab,this._position=new H$gb,this._rotation=new H$cb(0,0,0,1),this._scale=new H$gb(1,1,1),this._worldMatrix=new H$ab,this._forward=new H$gb,this._up=new H$gb,this._right=new H$gb,this._owner=H$a,this._childs=[]}H$n(H$h,"laya.d3.core.Transform3D",H$f);var H$b=H$h.prototype;return H$b._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)H$ab.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var H$a=H$h._tempVector30;H$gb.multiply(this.pivot,this._localScale,H$a);var H$b=H$h._tempVector31;H$gb.subtract(H$a,this.pivot,H$b);var H$c=H$h._tempVector32,H$d=this.localRotation;H$gb.transformQuat(H$a,H$d,H$c),H$gb.subtract(H$c,H$a,H$c);var H$e=H$h._tempVector33;H$gb.subtract(this._localPosition,H$b,H$e),H$gb.subtract(H$e,H$c,H$e),H$ab.createAffineTransformation(H$e,H$d,this._localScale,this._localMatrix)}},H$b._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var H$a=0,H$b=this._childs.length;H$a<H$b;H$a++)this._childs[H$a]._onWorldPositionRotationTransform()}},H$b._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var H$a=0,H$b=this._childs.length;H$a<H$b;H$a++)this._childs[H$a]._onWorldPositionScaleTransform()}},H$b._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var H$a=0,H$b=this._childs.length;H$a<H$b;H$a++)this._childs[H$a]._onWorldPositionTransform()}},H$b._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var H$a=0,H$b=this._childs.length;H$a<H$b;H$a++)this._childs[H$a]._onWorldPositionRotationTransform()}},H$b._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var H$a=0,H$b=this._childs.length;H$a<H$b;H$a++)this._childs[H$a]._onWorldPositionScaleTransform()}},H$b._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var H$a=0,H$b=this._childs.length;H$a<H$b;H$a++)this._childs[H$a]._onWorldTransform()}},H$b.translate=function(H$a,H$b){void 0===H$b&&(H$b=!0),H$b?(H$ab.createFromQuaternion(this.localRotation,H$h._tempMatrix0),H$gb.transformCoordinate(H$a,H$h._tempMatrix0,H$h._tempVector30),H$gb.add(this.localPosition,H$h._tempVector30,this._localPosition),this.localPosition=this._localPosition):(H$gb.add(this.position,H$a,this._position),this.position=this._position)},H$b.rotate=function(H$a,H$b,H$c){var H$d;void 0===H$b&&(H$b=!0),void 0===H$c&&(H$c=!0),H$d=H$c?H$a:(H$gb.scale(H$a,Math.PI/180,H$h._tempVector30),H$h._tempVector30),H$cb.createFromYawPitchRoll(H$d.y,H$d.x,H$d.z,H$h._tempQuaternion0),H$b?(H$cb.multiply(this._localRotation,H$h._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(H$cb.multiply(H$h._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},H$b.lookAt=function(H$a,H$b,H$c){void 0===H$c&&(H$c=!1);var H$d,H$e=H$a.elements;if(H$c){if(H$d=this._localPosition.elements,Math.abs(H$d[0]-H$e[0])<H$$a.zeroTolerance&&Math.abs(H$d[1]-H$e[1])<H$$a.zeroTolerance&&Math.abs(H$d[2]-H$e[2])<H$$a.zeroTolerance)return;H$cb.lookAt(this._localPosition,H$a,H$b,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var H$f=this.position;if(H$d=H$f.elements,Math.abs(H$d[0]-H$e[0])<H$$a.zeroTolerance&&Math.abs(H$d[1]-H$e[1])<H$$a.zeroTolerance&&Math.abs(H$d[2]-H$e[2])<H$$a.zeroTolerance)return;H$cb.lookAt(H$f,H$a,H$b,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},H$o(0,H$b,"_isFrontFaceInvert",function(){var H$a=this.scale,H$b=H$a.x<0;return H$a.y<0&&(H$b=!H$b),H$a.z<0&&(H$b=!H$b),H$b}),H$o(0,H$b,"owner",function(){return this._owner}),H$o(0,H$b,"localRotation",function(){if(this._localQuaternionUpdate){var H$a=this._localRotationEuler.elements;H$cb.createFromYawPitchRoll(H$a[1]/H$h._angleToRandin,H$a[0]/H$h._angleToRandin,H$a[2]/H$h._angleToRandin,this._localRotation)}return this._localRotation},function(H$a){this._localRotation=H$a,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),H$o(0,H$b,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?H$ab.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(H$a){null===this._parent?H$a.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),H$ab.multiply(this._localMatrix,H$a,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=H$a,this._worldUpdate=!1}),H$o(0,H$b,"worldNeedUpdate",function(){return this._worldUpdate}),H$o(0,H$b,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(H$a){this._localMatrix=H$a,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),H$o(0,H$b,"dummy",function(){return this._dummy},function(H$a){this._dummy!==H$a&&(this._dummy&&(this._dummy._entity=null),H$a&&(H$a._entity=this),this._dummy=H$a)}),H$o(0,H$b,"localPosition",function(){return this._localPosition},function(H$a){this._localPosition=H$a,this._localUpdate=!0,this._onWorldPositionTransform()}),H$o(0,H$b,"position",function(){if(this._positionUpdate){if(null!=this._parent){var H$a=this._parent.position;H$gb.multiply(this._localPosition,this._parent.scale,H$h._tempVector30),H$gb.transformQuat(H$h._tempVector30,this._parent.rotation,H$h._tempVector30),H$gb.add(H$a,H$h._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(H$a){if(null!=this._parent){H$gb.subtract(H$a,this._parent.position,this._localPosition);var H$b=this._parent.scale.elements,H$c=H$b[0],H$d=H$b[1],H$e=H$b[2];if(1!==H$c||1!==H$d||1!==H$e){var H$f=H$h._tempVector30,H$g=H$f.elements;H$g[0]=1/H$c,H$g[1]=1/H$d,H$g[2]=1/H$e,H$gb.multiply(this._localPosition,H$f,this._localPosition)}this._parent.rotation.invert(H$h._tempQuaternion0),H$gb.transformQuat(this._localPosition,H$h._tempQuaternion0,this._localPosition)}else H$a.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=H$a,this._positionUpdate=!1}),H$o(0,H$b,"localScale",function(){return this._localScale},function(H$a){this._localScale=H$a,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),H$o(0,H$b,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(H$h._tempVector30);var H$a=H$h._tempVector30.elements,H$b=this._localRotationEuler.elements;H$b[0]=H$a[1]*H$h._angleToRandin,H$b[1]=H$a[0]*H$h._angleToRandin,H$b[2]=H$a[2]*H$h._angleToRandin}return this._localRotationEuler},function(H$a){this._localRotationEuler=H$a,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),H$o(0,H$b,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?H$cb.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(H$a){null!=this._parent?(this._parent.rotation.invert(H$h._tempQuaternion0),H$cb.multiply(H$a,H$h._tempQuaternion0,this._localRotation)):H$a.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=H$a,this._rotationUpdate=!1}),H$o(0,H$b,"scale",function(){return this._scaleUpdate&&(null!==this._parent?H$gb.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(H$a){if(null!==this._parent){var H$b=this._parent.scale.elements,H$c=H$h._tempVector30.elements;H$c[0]=1/H$b[0],H$c[1]=1/H$b[1],H$c[2]=1/H$b[2],H$gb.multiply(H$a,H$h._tempVector30,this._localScale)}else H$a.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=H$a,this._scaleUpdate=!1}),H$o(0,H$b,"rotationEuler",null,function(H$a){H$cb.createFromYawPitchRoll(H$a.y,H$a.x,H$a.z,this._rotation),this.rotation=this._rotation}),H$o(0,H$b,"forward",function(){var H$a=this.worldMatrix.elements;return this._forward.elements[0]=-H$a[8],this._forward.elements[1]=-H$a[9],this._forward.elements[2]=-H$a[10],this._forward}),H$o(0,H$b,"up",function(){var H$a=this.worldMatrix.elements;return this._up.elements[0]=H$a[4],this._up.elements[1]=H$a[5],this._up.elements[2]=H$a[6],this._up}),H$o(0,H$b,"right",function(){var H$a=this.worldMatrix.elements;return this._right.elements[0]=H$a[0],this._right.elements[1]=H$a[1],this._right.elements[2]=H$a[2],this._right}),H$o(0,H$b,"parent",function(){return this._parent},function(H$a){if(this._parent!==H$a){if(this._parent){var H$b=this._parent._childs,H$c=H$b.indexOf(this);H$b.splice(H$c,1)}H$a&&(H$a._childs.push(this),H$a&&this._onWorldTransform()),this._parent=H$a}}),H$l(H$h,["_tempVector30",function(){return this._tempVector30=new H$gb},"_tempVector31",function(){return this._tempVector31=new H$gb},"_tempVector32",function(){return this._tempVector32=new H$gb},"_tempVector33",function(){return this._tempVector33=new H$gb},"_tempQuaternion0",function(){return this._tempQuaternion0=new H$cb},"_tempMatrix0",function(){return this._tempMatrix0=new H$ab},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),H$h}(),H$xb=(function(H$a){function H$b(){this._rotation=0,this._matNeedUpdte=!1,H$b.__super.call(this),this._matrix=new H$ab,this._offset=new H$fb,this._tiling=new H$fb(1,1)}H$n(H$b,"laya.d3.core.TransformUV",H$f);var H$c=H$b.prototype;H$v.imps(H$c,{"laya.d3.core.IClone":!0}),H$c._updateMatrix=function(){H$b._tempOffsetV3.elements[0]=this._offset.x,H$b._tempOffsetV3.elements[1]=this._offset.y,H$cb.createFromYawPitchRoll(0,0,this._rotation,H$b._tempRotationQua),H$b._tempTitlingV3.elements[0]=this._tiling.x,H$b._tempTitlingV3.elements[1]=this._tiling.y,H$ab.createAffineTransformation(H$b._tempOffsetV3,H$b._tempRotationQua,H$b._tempTitlingV3,this._matrix)},H$c.cloneTo=function(H$a){H$a._matrix=this._matrix.clone(),H$a._offset=this._offset.clone(),H$a._rotation=this._rotation,H$a._tiling=this._tiling.clone()},H$c.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$o(0,H$c,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),H$o(0,H$c,"tiling",function(){return this._tiling},function(H$a){this._tiling=H$a,this._matNeedUpdte=!0}),H$o(0,H$c,"offset",function(){return this._offset},function(H$a){this._offset=H$a,this._matNeedUpdte=!0}),H$o(0,H$c,"rotation",function(){return this._rotation},function(H$a){this._rotation=H$a,this._matNeedUpdte=!0}),H$l(H$b,["_tempOffsetV3",function(){return this._tempOffsetV3=new H$gb(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new H$cb},"_tempTitlingV3",function(){return this._tempTitlingV3=new H$gb(1,1,1)}])}(),function(H$c){function H$a(){this.x=NaN,this.y=NaN,this.z=NaN,H$a.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}H$n(H$a,"laya.d3.core.particleShuriKen.module.shape.BoxShape",H$c);var H$b=H$a.prototype;H$b._getShapeBoundBox=function(H$a){var H$b=H$a.min.elements;H$b[0]=.5*-this.x,H$b[1]=.5*-this.y,H$b[2]=.5*-this.z;var H$c=H$a.max.elements;H$c[0]=.5*this.x,H$c[1]=.5*this.y,H$c[2]=.5*this.z},H$b._getSpeedBoundBox=function(H$a){var H$b=H$a.min.elements;H$b[0]=0,H$b[1]=0,H$b[2]=0;var H$c=H$a.max.elements;H$c[0]=0,H$c[1]=1,H$c[2]=0},H$b.generatePositionAndDirection=function(H$a,H$b,H$c,H$d){var H$e=H$a.elements,H$f=H$b.elements;H$c?(H$c.seed=H$d[16],H$R._randomPointInsideHalfUnitBox(H$a,H$c),H$d[16]=H$c.seed):H$R._randomPointInsideHalfUnitBox(H$a),H$e[0]=this.x*H$e[0],H$e[1]=this.y*H$e[1],H$e[2]=this.z*H$e[2],this.randomDirection?H$c?(H$c.seed=H$d[17],H$R._randomPointUnitSphere(H$b,H$c),H$d[17]=H$c.seed):H$R._randomPointUnitSphere(H$b):(H$f[0]=0,H$f[1]=0,H$f[2]=1)},H$b.cloneTo=function(H$a){H$c.prototype.cloneTo.call(this,H$a);var H$b=H$a;H$b.x=this.x,H$b.y=this.y,H$b.z=this.z,H$b.randomDirection=this.randomDirection}}(H$M),function(H$c){function H$g(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,H$g.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}H$n(H$g,"laya.d3.core.particleShuriKen.module.shape.CircleShape",H$c);var H$a=H$g.prototype;H$a._getShapeBoundBox=function(H$a){var H$b=H$a.min.elements;H$b[0]=H$b[2]=-this.radius,H$b[1]=0;var H$c=H$a.max.elements;H$c[0]=H$c[2]=this.radius,H$c[1]=0},H$a._getSpeedBoundBox=function(H$a){var H$b=H$a.min.elements;H$b[0]=H$b[1]=-1,H$b[2]=0;var H$c=H$a.max.elements;H$c[0]=H$c[1]=1,H$c[2]=0},H$a.generatePositionAndDirection=function(H$a,H$b,H$c,H$d){var H$e=H$a.elements,H$f=H$g._tempPositionPoint.elements;H$c?(H$c.seed=H$d[16],this.emitFromEdge?H$R._randomPointUnitArcCircle(this.arc,H$g._tempPositionPoint,H$c):H$R._randomPointInsideUnitArcCircle(this.arc,H$g._tempPositionPoint,H$c),H$d[16]=H$c.seed):this.emitFromEdge?H$R._randomPointUnitArcCircle(this.arc,H$g._tempPositionPoint):H$R._randomPointInsideUnitArcCircle(this.arc,H$g._tempPositionPoint),H$e[0]=-H$f[0],H$e[1]=H$f[1],H$e[2]=0,H$gb.scale(H$a,this.radius,H$a),this.randomDirection?H$c?(H$c.seed=H$d[17],H$R._randomPointUnitSphere(H$b,H$c),H$d[17]=H$c.seed):H$R._randomPointUnitSphere(H$b):H$a.cloneTo(H$b)},H$a.cloneTo=function(H$a){H$c.prototype.cloneTo.call(this,H$a);var H$b=H$a;H$b.radius=this.radius,H$b.arc=this.arc,H$b.emitFromEdge=this.emitFromEdge,H$b.randomDirection=this.randomDirection},H$l(H$g,["_tempPositionPoint",function(){return this._tempPositionPoint=new H$fb}])}(H$M),function(H$c){function H$m(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,H$m.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}H$n(H$m,"laya.d3.core.particleShuriKen.module.shape.ConeShape",H$c);var H$a=H$m.prototype;H$a._getShapeBoundBox=function(H$a){var H$b=this.radius+this.length*Math.sin(this.angle),H$c=this.length*Math.cos(this.angle),H$d=H$a.min.elements;H$d[0]=H$d[1]=-H$b,H$d[2]=0;var H$e=H$a.max.elements;H$e[0]=H$e[1]=H$b,H$e[2]=H$c},H$a._getSpeedBoundBox=function(H$a){var H$b=Math.sin(this.angle),H$c=H$a.min.elements;H$c[0]=H$c[1]=-H$b,H$c[2]=0;var H$d=H$a.max.elements;H$d[0]=H$c[1]=H$b,H$d[2]=1},H$a.generatePositionAndDirection=function(H$a,H$b,H$c,H$d){var H$e,H$f=H$a.elements,H$g=H$b.elements,H$h=H$m._tempPositionPoint.elements,H$i=NaN,H$j=NaN,H$k=Math.cos(this.angle),H$l=Math.sin(this.angle);switch(this.emitType){case 0:H$c?(H$c.seed=H$d[16],H$R._randomPointInsideUnitCircle(H$m._tempPositionPoint,H$c),H$d[16]=H$c.seed):H$R._randomPointInsideUnitCircle(H$m._tempPositionPoint),H$i=H$h[0],H$j=H$h[1],H$f[0]=H$i*this.radius,H$f[1]=H$j*this.radius,H$f[2]=0,this.randomDirection?(H$c?(H$c.seed=H$d[17],H$R._randomPointInsideUnitCircle(H$m._tempDirectionPoint,H$c),H$d[17]=H$c.seed):H$R._randomPointInsideUnitCircle(H$m._tempDirectionPoint),H$e=H$m._tempDirectionPoint.elements,H$g[0]=H$e[0]*H$l,H$g[1]=H$e[1]*H$l):(H$g[0]=H$i*H$l,H$g[1]=H$j*H$l),H$g[2]=H$k;break;case 1:H$c?(H$c.seed=H$d[16],H$R._randomPointUnitCircle(H$m._tempPositionPoint,H$c),H$d[16]=H$c.seed):H$R._randomPointUnitCircle(H$m._tempPositionPoint),H$i=H$h[0],H$j=H$h[1],H$f[0]=H$i*this.radius,H$f[1]=H$j*this.radius,H$f[2]=0,this.randomDirection?(H$c?(H$c.seed=H$d[17],H$R._randomPointInsideUnitCircle(H$m._tempDirectionPoint,H$c),H$d[17]=H$c.seed):H$R._randomPointInsideUnitCircle(H$m._tempDirectionPoint),H$e=H$m._tempDirectionPoint.elements,H$g[0]=H$e[0]*H$l,H$g[1]=H$e[1]*H$l):(H$g[0]=H$i*H$l,H$g[1]=H$j*H$l),H$g[2]=H$k;break;case 2:H$c?(H$c.seed=H$d[16],H$R._randomPointInsideUnitCircle(H$m._tempPositionPoint,H$c)):H$R._randomPointInsideUnitCircle(H$m._tempPositionPoint),H$i=H$h[0],H$j=H$h[1],H$f[0]=H$i*this.radius,H$f[1]=H$j*this.radius,H$g[H$f[2]=0]=H$i*H$l,H$g[1]=H$j*H$l,H$g[2]=H$k,H$gb.normalize(H$b,H$b),H$c?(H$gb.scale(H$b,this.length*H$c.getFloat(),H$b),H$d[16]=H$c.seed):H$gb.scale(H$b,this.length*Math.random(),H$b),H$gb.add(H$a,H$b,H$a),this.randomDirection&&(H$c?(H$c.seed=H$d[17],H$R._randomPointUnitSphere(H$b,H$c),H$d[17]=H$c.seed):H$R._randomPointUnitSphere(H$b));break;case 3:H$c?(H$c.seed=H$d[16],H$R._randomPointUnitCircle(H$m._tempPositionPoint,H$c)):H$R._randomPointUnitCircle(H$m._tempPositionPoint),H$i=H$h[0],H$j=H$h[1],H$f[0]=H$i*this.radius,H$f[1]=H$j*this.radius,H$g[H$f[2]=0]=H$i*H$l,H$g[1]=H$j*H$l,H$g[2]=H$k,H$gb.normalize(H$b,H$b),H$c?(H$gb.scale(H$b,this.length*H$c.getFloat(),H$b),H$d[16]=H$c.seed):H$gb.scale(H$b,this.length*Math.random(),H$b),H$gb.add(H$a,H$b,H$a),this.randomDirection&&(H$c?(H$c.seed=H$d[17],H$R._randomPointUnitSphere(H$b,H$c),H$d[17]=H$c.seed):H$R._randomPointUnitSphere(H$b));break;default:throw new Error("ConeShape:emitType is invalid.")}},H$a.cloneTo=function(H$a){H$c.prototype.cloneTo.call(this,H$a);var H$b=H$a;H$b.angle=this.angle,H$b.radius=this.radius,H$b.length=this.length,H$b.emitType=this.emitType,H$b.randomDirection=this.randomDirection},H$l(H$m,["_tempPositionPoint",function(){return this._tempPositionPoint=new H$fb},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new H$fb}])}(H$M),function(H$c){function H$a(){this.radius=NaN,this.emitFromShell=!1,H$a.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}H$n(H$a,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",H$c);var H$b=H$a.prototype;H$b._getShapeBoundBox=function(H$a){var H$b=H$a.min.elements;H$b[0]=H$b[1]=H$b[2]=-this.radius;var H$c=H$a.max.elements;H$c[0]=H$c[1]=this.radius,H$c[2]=0},H$b._getSpeedBoundBox=function(H$a){var H$b=H$a.min.elements;H$b[0]=H$b[1]=-1,H$b[2]=0;var H$c=H$a.max.elements;H$c[0]=H$c[1]=H$c[2]=1},H$b.generatePositionAndDirection=function(H$a,H$b,H$c,H$d){var H$e=H$a.elements;H$c?(H$c.seed=H$d[16],this.emitFromShell?H$R._randomPointUnitSphere(H$a,H$c):H$R._randomPointInsideUnitSphere(H$a,H$c),H$d[16]=H$c.seed):this.emitFromShell?H$R._randomPointUnitSphere(H$a):H$R._randomPointInsideUnitSphere(H$a),H$gb.scale(H$a,this.radius,H$a);var H$f=H$e[2];H$f<0&&(H$e[2]=-1*H$f),this.randomDirection?H$c?(H$c.seed=H$d[17],H$R._randomPointUnitSphere(H$b,H$c),H$d[17]=H$c.seed):H$R._randomPointUnitSphere(H$b):H$a.cloneTo(H$b)},H$b.cloneTo=function(H$a){H$c.prototype.cloneTo.call(this,H$a);var H$b=H$a;H$b.radius=this.radius,H$b.emitFromShell=this.emitFromShell,H$b.randomDirection=this.randomDirection}}(H$M),function(H$c){function H$a(){this.radius=NaN,this.emitFromShell=!1,H$a.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}H$n(H$a,"laya.d3.core.particleShuriKen.module.shape.SphereShape",H$c);var H$b=H$a.prototype;H$b._getShapeBoundBox=function(H$a){var H$b=H$a.min.elements;H$b[0]=H$b[1]=H$b[2]=-this.radius;var H$c=H$a.max.elements;H$c[0]=H$c[1]=H$c[2]=this.radius},H$b._getSpeedBoundBox=function(H$a){var H$b=H$a.min.elements;H$b[0]=H$b[1]=H$b[2]=-1;var H$c=H$a.max.elements;H$c[0]=H$c[1]=H$c[2]=1},H$b.generatePositionAndDirection=function(H$a,H$b,H$c,H$d){H$c?(H$c.seed=H$d[16],this.emitFromShell?H$R._randomPointUnitSphere(H$a,H$c):H$R._randomPointInsideUnitSphere(H$a,H$c),H$d[16]=H$c.seed):this.emitFromShell?H$R._randomPointUnitSphere(H$a):H$R._randomPointInsideUnitSphere(H$a),H$gb.scale(H$a,this.radius,H$a),this.randomDirection?H$c?(H$c.seed=H$d[17],H$R._randomPointUnitSphere(H$b,H$c),H$d[17]=H$c.seed):H$R._randomPointUnitSphere(H$b):H$a.cloneTo(H$b)},H$b.cloneTo=function(H$a){H$c.prototype.cloneTo.call(this,H$a);var H$b=H$a;H$b.radius=this.radius,H$b.emitFromShell=this.emitFromShell,H$b.randomDirection=this.randomDirection}}(H$M),function(H$a){function H$b(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,H$b.__super.call(this)}return H$n(H$b,"laya.d3.core.render.SubMeshRenderElement",H$U),H$b}()),H$yb=function(H$a){function H$q(H$a,H$b,H$c,H$d,H$e,H$f){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=H$a,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[H$nb.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[H$Tb.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[H$Tb.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[H$Cb.SHADERDEFINE_ALPHATEST]="ALPHATEST";H$q.__super.call(this,H$a,H$b,H$c,null,{}),this._attributeMap=H$d;var H$g;for(H$g in H$e){var H$h=H$e[H$g];switch(H$h[1]){case 0:this._renderElementUniformMap[H$g]=H$h[0];break;case 1:this._materialUniformMap[H$g]=H$h[0];break;case 2:this._spriteUniformMap[H$g]=H$h[0];break;case 3:this._cameraUniformMap[H$g]=H$h[0];break;case 4:this._sceneUniformMap[H$g]=H$h[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}H$n(H$q,"laya.d3.shader.ShaderCompile3D",H$t);var H$b=H$q.prototype;return H$b._definesToNameDic=function(H$a,H$b){for(var H$c={},H$d=1,H$e=0;H$e<32&&!(H$a<(H$d=1<<H$e));H$e++)if(H$a&H$d){var H$f=H$b[H$d];H$f&&(H$c[H$f]="")}return H$c},H$b.withCompile=function(H$a,H$b,H$c,H$d){var H$e,H$f,H$g;if(H$f=this.sharders[H$a])if(H$g=H$f[H$b]){if(H$e=H$g[H$c])return H$e}else H$g=H$f[H$b]=[];else H$g=(H$f=this.sharders[H$a]=[])[H$b]=[];var H$h,H$i=this._definesToNameDic(H$a,H$q._globalInt2name),H$j=this._definesToNameDic(H$b,this._spriteInt2name),H$k=this._definesToNameDic(H$c,this._materialInt2name),H$l={},H$m="";if(H$i)for(H$h in H$i)H$m+="#define "+H$h+"\n",H$l[H$h]=!0;if(H$j)for(H$h in H$j)H$m+="#define "+H$h+"\n",H$l[H$h]=!0;if(H$k)for(H$h in H$k)H$m+="#define "+H$h+"\n",H$l[H$h]=!0;var H$n=H$Jb.nameKey.getName(this._name)+" compile ("+H$a+","+H$b+","+H$c+")",H$o=this._VS.toscript(H$l,[]),H$p=this._PS.toscript(H$l,[]);H$F.now();if(H$e=H$Jb.create(H$m+H$o.join("\n"),H$m+H$p.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,H$d,H$n),H$g[H$c]=H$e,laya.d3.shader.ShaderCompile3D.debugMode)H$F.now();return H$e},H$b.precompileShaderWithShaderDefine=function(H$a,H$b,H$c){this.withCompile(H$a,H$b,H$c,!0)},H$b.addMaterialDefines=function(H$a){var H$b=H$a.defines;for(var H$c in H$b){var H$d=H$b[H$c],H$e=parseInt(H$c);this._materialInt2name[H$e]=H$d,this._materialName2Int[H$d]=H$e}},H$b.addSpriteDefines=function(H$a){var H$b=H$a.defines;for(var H$c in H$b){var H$d=H$b[H$c],H$e=parseInt(H$c);this._spriteInt2name[H$e]=H$d,this._spriteName2Int[H$d]=H$e}},H$b.getMaterialDefineByName=function(H$a){return this._materialName2Int[H$a]},H$b.registerMaterialDefine=function(H$a){var H$b=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[H$b]=H$a,this._materialName2Int[H$a]=H$b},H$b.registerSpriteDefine=function(H$a){var H$b=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[H$b]=H$a,this._spriteName2Int[H$a]=H$b},H$q._globalRegDefine=function(H$a,H$b){H$q._globalInt2name[H$b]=H$a},H$q.add=function(H$a,H$b,H$c,H$d,H$e){return laya.d3.shader.ShaderCompile3D._preCompileShader[H$a]=new H$q(H$a,H$b,H$c,H$d,H$e,H$t.includes)},H$q.get=function(H$a){return laya.d3.shader.ShaderCompile3D._preCompileShader[H$Jb.nameKey.getID(H$a)]},H$q._preCompileShader={},H$q._globalInt2name=[],H$q.debugMode=!1,H$q.SHADERDEFINE_HIGHPRECISION=1,H$q.SHADERDEFINE_FOG=4,H$q.SHADERDEFINE_DIRECTIONLIGHT=8,H$q.SHADERDEFINE_POINTLIGHT=16,H$q.SHADERDEFINE_SPOTLIGHT=32,H$q.SHADERDEFINE_UV0=64,H$q.SHADERDEFINE_COLOR=128,H$q.SHADERDEFINE_UV1=256,H$q.SAHDERDEFINE_DEPTHFOG=131072,H$q}(),H$zb=function(H$a){function H$o(){H$o.__super.call(this)}H$n(H$o,"laya.d3.graphics.MeshSprite3DStaticBatchManager",H$da);var H$b=H$o.prototype;return H$b._getStaticBatch=function(H$a,H$b,H$c,H$d){var H$e,H$f;return H$f=H$a?H$a.id.toString()+H$c.id.toString()+H$b.id.toString()+H$d.toString():H$c.id.toString()+H$b.id.toString()+H$d.toString(),this._staticBatches[H$f]?H$e=this._staticBatches[H$f]:this._staticBatches[H$f]=H$e=new H$Ab(H$f,this,H$a,H$b,H$c),H$e},H$b._initStaticBatchs=function(H$a){var H$b,H$c;this._initBatchRenderElements.sort(H$o._sortPrepareStaticBatch);for(var H$d,H$e=!1,H$f=0,H$g=0,H$h=this._initBatchRenderElements.length;H$g<H$h;H$g++){var H$i,H$j=this._initBatchRenderElements[H$g],H$k=H$j.renderObj._getVertexBuffer(0);H$j._sprite3D;if(H$c===H$k.vertexDeclaration&&H$b===H$j._material)if(H$e)H$d._addCombineBatchRenderObjTest(H$j)?(H$i=H$j._staticBatch)!==H$d&&(H$i&&H$i._deleteCombineBatchRenderObj(H$j),H$d._addCombineBatchRenderObj(H$j)):(H$e=!1,H$f++);else{var H$l=this._initBatchRenderElements[H$g-1],H$m=H$l.renderObj,H$n=H$j.renderObj;H$e=!(65535<H$m._getVertexBuffer().vertexCount+H$n._getVertexBuffer().vertexCount)&&(H$d=this._getStaticBatch(H$a,H$c,H$b,H$f),(H$i=H$l._staticBatch)!==H$d&&(H$i&&H$i._deleteCombineBatchRenderObj(H$l),H$d._addCombineBatchRenderObj(H$l)),(H$i=H$j._staticBatch)!==H$d&&(H$i&&H$i._deleteCombineBatchRenderObj(H$j),H$d._addCombineBatchRenderObj(H$j)),!0)}else H$e=!1,H$f=0;H$b=H$j._material,H$c=H$k.vertexDeclaration}},H$o._sortPrepareStaticBatch=function(H$a,H$b){var H$c=H$a._render,H$d=H$b._render,H$e=H$c.lightmapIndex-H$d.lightmapIndex;if(0!=H$e)return H$e;var H$f=H$c.receiveShadow-H$d.receiveShadow;if(0!=H$f)return H$f;var H$g=H$a._mainSortID-H$b._mainSortID;return 0==H$g?H$a.renderObj.triangleCount-H$b.renderObj.triangleCount:H$g},H$o}(),H$Ab=function(H$a){function H$f(H$a,H$b,H$c,H$d,H$e){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,H$f.__super.call(this,H$a,H$b,H$c),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=H$d,this._material=H$e}H$n(H$f,"laya.d3.graphics.SubMeshStaticBatch",H$ea);var H$b=H$f.prototype;return H$b._compareBatchRenderElement=function(H$a,H$b){return H$a._batchIndexStart>H$b._batchIndexStart},H$b._addCombineBatchRenderObjTest=function(H$a){var H$b=H$a.renderObj._vertexCount;return!(65535<(0<H$b?this._currentCombineVertexCount+H$b:this._currentCombineVertexCount+H$a.renderObj._getVertexBuffer().vertexCount))},H$b._addCombineBatchRenderObj=function(H$a){var H$b=H$a.renderObj,H$c=H$b._vertexCount;this._initBatchRenderElements.push(H$a),H$a._staticBatch=this,0<H$c?(this._currentCombineIndexCount+=H$b._indexCount,this._currentCombineVertexCount+=H$c):(this._currentCombineIndexCount=this._currentCombineIndexCount+H$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+H$b._getVertexBuffer().vertexCount),this._needFinishCombine=!0},H$b._deleteCombineBatchRenderObj=function(H$a){var H$b=H$a.renderObj,H$c=this._initBatchRenderElements.indexOf(H$a);if(-1!==H$c){this._initBatchRenderElements.splice(H$c,1),H$a._staticBatch=null;var H$d=H$b._vertexCount;0<H$d?(this._currentCombineIndexCount=this._currentCombineIndexCount-H$b._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-H$d):(this._currentCombineIndexCount=this._currentCombineIndexCount-H$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-H$b._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},H$b._finishInit=function(){if(this._needFinishCombine){var H$a=0,H$b=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var H$c=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),H$d=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=H$Mb.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=H$Lb.create("ushort",this._currentCombineIndexCount,35044);for(var H$e=0,H$f=this._initBatchRenderElements.length;H$e<H$f;H$e++){var H$g=this._initBatchRenderElements[H$e],H$h=H$g.renderObj,H$i=H$h._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,H$g._sprite3D),H$j=H$h.getIndices(),H$k=H$g._sprite3D.transform._isFrontFaceInvert,H$l=H$a/(this._vertexDeclaration.vertexStride/4)-H$h._vertexStart,H$m=H$b,H$n=H$m+H$j.length;H$g._batchIndexStart=H$m,H$g._batchIndexEnd=H$n,H$d.set(H$j,H$b);var H$o=0;if(H$k)for(H$o=H$m;H$o<H$n;H$o+=3){H$d[H$o]=H$l+H$d[H$o];var H$p=H$d[H$o+1],H$q=H$d[H$o+2];H$d[H$o+1]=H$l+H$q,H$d[H$o+2]=H$l+H$p}else for(H$o=H$m;H$o<H$n;H$o+=3)H$d[H$o]=H$l+H$d[H$o],H$d[H$o+1]=H$l+H$d[H$o+1],H$d[H$o+2]=H$l+H$d[H$o+2];H$b+=H$j.length,H$c.set(H$i,H$a),H$a+=H$i.length}this._vertexBuffer.setData(H$c),this._indexBuffer.setData(H$d),this._needFinishCombine=!1}},H$b._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new H$xb)},H$b._getRenderElement=function(H$a,H$b,H$c){for(var H$d,H$e,H$f=this._batchRenderElements.length,H$g=!0,H$h=0;H$h<H$f;H$h++){var H$i,H$j,H$k=(H$e=this._batchRenderElements[H$h])._sprite3D._render;if(0!==H$h&&(H$g=(H$i=(H$d=this._batchRenderElements[H$h-1])._sprite3D._render).lightmapIndex!==H$k.lightmapIndex||H$i.receiveShadow!==H$k.receiveShadow||H$d._batchIndexEnd!==H$e._batchIndexStart),H$g){(H$j=this._getCombineRenderElementFromPool()).renderObj=this,H$j._material=this._material,H$j._batchIndexStart=H$e._batchIndexStart,H$j._batchIndexEnd=H$e._batchIndexEnd;var H$l=H$k.lightmapIndex,H$m=H$l+1,H$n=this._batchOwnerIndices[H$m];H$n||(H$n=this._batchOwnerIndices[H$m]=[]);var H$o,H$p=H$n[H$e._render.receiveShadow?1:0];void 0===H$p?(H$n[H$k.receiveShadow?1:0]=this._batchOwners.length,(H$o=new H$Vb(null,"StaticBatchMeshSprite3D"))._scene=H$b,H$o._transform=this._rootOwner?this._rootOwner._transform:null,H$o._render.lightmapIndex=H$l,H$o._render.receiveShadow=H$e._render.receiveShadow,this._batchOwners.push(H$o)):H$o=this._batchOwners[H$p],H$o._render._renderUpdate(H$c),H$j._sprite3D=H$o,H$a.push(H$j)}else H$j._batchIndexEnd=H$e._batchIndexEnd}},H$b._beforeRender=function(H$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},H$b._render=function(H$a){var H$b=H$a.renderElement,H$c=H$b._batchIndexStart,H$d=H$b._batchIndexEnd-H$c;H$D.mainContext.drawElements(4,H$d,5123,2*H$c),H$y.drawCall++,H$y.trianglesFaces+=H$d/3},H$b.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},H$b._getVertexBuffer=function(H$a){return void 0===H$a&&(H$a=0),this._vertexBuffer},H$f}(),H$Bb=function(H$a){function H$b(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,H$b.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}H$n(H$b,"laya.d3.core.ComponentNode",H$j);var H$c=H$b.prototype;return H$c.addComponent=function(H$a){var H$b,H$c=this._componentsMap.indexOf(H$a);if(-1===H$c)H$b=[],this._componentsMap.push(H$a),this._typeComponentsIndices.push(H$b);else if(H$b=this._typeComponentsIndices[H$c],this._components[H$b[0]].isSingleton)throw new Error("无法单实例创建"+H$a+"组件，"+H$a+"组件已存在！");var H$d=H$e.getInstance(H$a);return H$b.push(this._components.length),this._components.push(H$d),H$d instanceof laya.d3.component.Script&&this._scripts.push(H$d),H$d._initialize(this),H$d},H$c._removeComponent=function(H$a,H$b){var H$c=this._typeComponentsIndices[H$a],H$d=H$c[H$b],H$e=this._components[H$d];this._components.splice(H$d,1),H$e instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(H$e),1),H$c.splice(H$b,1),0===H$c.length&&(this._typeComponentsIndices.splice(H$a,1),this._componentsMap.splice(H$a,1));for(var H$f=0,H$g=this._componentsMap.length;H$f<H$g;H$f++)for(var H$h=(H$c=this._typeComponentsIndices[H$f]).length-1;0<=H$h;H$h--){var H$i=H$c[H$h];if(!(H$d<H$i))break;H$c[H$h]=--H$i}H$e._destroy()},H$c.getComponentByType=function(H$a,H$b){void 0===H$b&&(H$b=0);var H$c=this._componentsMap.indexOf(H$a);return-1===H$c?null:this._components[this._typeComponentsIndices[H$c][H$b]]},H$c.getComponentsByType=function(H$a,H$b){var H$c=this._componentsMap.indexOf(H$a);if(-1!==H$c){var H$d=this._typeComponentsIndices[H$c],H$e=H$d.length;H$b.length=H$e;for(var H$f=0;H$f<H$e;H$f++)H$b[H$f]=this._components[H$d[H$f]]}else H$b.length=0},H$c.getComponentByIndex=function(H$a){return this._components[H$a]},H$c.removeComponentByType=function(H$a,H$b){void 0===H$b&&(H$b=0);var H$c=this._componentsMap.indexOf(H$a);-1!==H$c&&this._removeComponent(H$c,H$b)},H$c.removeComponentsByType=function(H$a){var H$b=this._componentsMap.indexOf(H$a);if(-1!==H$b)for(var H$c=this._typeComponentsIndices[H$b],H$d=0,H$e=H$c.length;H$d<H$e;H$c.length<H$e?H$e--:H$d++)this._removeComponent(H$b,H$d)},H$c.removeAllComponent=function(){for(var H$a=0,H$b=this._componentsMap.length;H$a<H$b;this._componentsMap.length<H$b?H$b--:H$a++)this.removeComponentsByType(this._componentsMap[H$a])},H$c._updateComponents=function(H$a){for(var H$b=0,H$c=this._components.length;H$b<H$c;H$b++){var H$d=this._components[H$b];!H$d.started&&(H$d._start(H$a),H$d.started=!0),H$d.enable&&H$d._update(H$a)}},H$c._lateUpdateComponents=function(H$a){for(var H$b=0;H$b<this._components.length;H$b++){var H$c=this._components[H$b];!H$c.started&&(H$c._start(H$a),H$c.started=!0),H$c.enable&&H$c._lateUpdate(H$a)}},H$c._preRenderUpdateComponents=function(H$a){for(var H$b=0;H$b<this._components.length;H$b++){var H$c=this._components[H$b];!H$c.started&&(H$c._start(H$a),H$c.started=!0),H$c.enable&&H$c._preRenderUpdate(H$a)}},H$c._postRenderUpdateComponents=function(H$a){for(var H$b=0;H$b<this._components.length;H$b++){var H$c=this._components[H$b];!H$c.started&&(H$c._start(H$a),H$c.started=!0),H$c.enable&&H$c._postRenderUpdate(H$a)}},H$b}(),H$Cb=function(H$d){function H$a(){H$a.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new H$mb,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new H$hb(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}H$n(H$a,"laya.d3.core.material.BaseMaterial",H$d);var H$b=H$a.prototype;return H$v.imps(H$b,{"laya.d3.core.IClone":!0}),H$b._addShaderDefine=function(H$a){this._shaderDefineValue|=H$a},H$b._removeShaderDefine=function(H$a){this._shaderDefineValue&=~H$a},H$b._addDisablePublicShaderDefine=function(H$a){this._disablePublicShaderDefine|=H$a},H$b._removeDisablePublicShaderDefine=function(H$a){this._disablePublicShaderDefine&=~H$a},H$b._setBuffer=function(H$a,H$b){this._shaderValues.setValue(H$a,H$b),this._values[H$a]=H$b},H$b._getBuffer=function(H$a){return this._values[H$a]},H$b._setMatrix4x4=function(H$a,H$b){this._shaderValues.setValue(H$a,H$b?H$b.elements:null),this._values[H$a]=H$b},H$b._getMatrix4x4=function(H$a){return this._values[H$a]},H$b._setInt=function(H$a,H$b){this._shaderValues.setValue(H$a,H$b),this._values[H$a]=H$b},H$b._getInt=function(H$a){return this._values[H$a]},H$b._setNumber=function(H$a,H$b){this._shaderValues.setValue(H$a,H$b),this._values[H$a]=H$b},H$b._getNumber=function(H$a){return this._values[H$a]},H$b._setBool=function(H$a,H$b){this._shaderValues.setValue(H$a,H$b),this._values[H$a]=H$b},H$b._getBool=function(H$a){return this._values[H$a]},H$b._setVector2=function(H$a,H$b){this._shaderValues.setValue(H$a,H$b?H$b.elements:null),this._values[H$a]=H$b},H$b._getVector2=function(H$a){return this._values[H$a]},H$b._setColor=function(H$a,H$b){this._shaderValues.setValue(H$a,H$b?H$b.elements:null),this._values[H$a]=H$b},H$b._getColor=function(H$a){return this._values[H$a]},H$b._setTexture=function(H$a,H$b){var H$c=this._values[H$a];this._values[H$a]=H$b,this._shaderValues.setValue(H$a,H$b),0<this.referenceCount&&(H$c&&H$c._removeReference(),H$b&&H$b._addReference())},H$b._getTexture=function(H$a){return this._values[H$a]},H$b._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},H$b._getShader=function(H$a,H$b,H$c){var H$d=(H$a|H$b)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(H$d,H$c,this._shaderDefineValue),this._shader},H$b._setRenderStateBlendDepth=function(){var H$a=H$D.mainContext;switch(H$E.setDepthMask(H$a,this.depthWrite),0===this.depthTest?H$E.setDepthTest(H$a,!1):(H$E.setDepthTest(H$a,!0),H$E.setDepthFunc(H$a,this.depthTest)),this.blend){case 0:H$E.setBlend(H$a,!1);break;case 1:H$E.setBlend(H$a,!0),H$E.setBlendFunc(H$a,this.srcBlend,this.dstBlend);break;case 2:H$E.setBlend(H$a,!0)}},H$b._setRenderStateFrontFace=function(H$a,H$b){var H$c=H$D.mainContext,H$d=0;switch(this.cull){case 0:H$E.setCullFace(H$c,!1);break;case 1:H$E.setCullFace(H$c,!0),H$d=H$a?H$b&&H$b._isFrontFaceInvert?2305:2304:H$b&&H$b._isFrontFaceInvert?2304:2305,H$E.setFrontFace(H$c,H$d);break;case 2:H$E.setCullFace(H$c,!0),H$d=H$a?H$b&&H$b._isFrontFaceInvert?2304:2305:H$b&&H$b._isFrontFaceInvert?2305:2304,H$E.setFrontFace(H$c,H$d)}},H$b.onAsynLoaded=function(H$a,H$b,H$c){var H$d=H$b[0],H$e=H$b[1];switch(H$d.version){case"LAYAMATERIAL:01":var H$f=0,H$g=0,H$h=H$d.props;for(var H$i in H$h)switch(H$i){case"vectors":var H$j=H$h[H$i];for(H$f=0,H$g=H$j.length;H$f<H$g;H$f++){var H$k=H$j[H$f],H$l=H$k.value;switch(H$l.length){case 2:this[H$k.name]=new H$fb(H$l[0],H$l[1]);break;case 3:this[H$k.name]=new H$gb(H$l[0],H$l[1],H$l[2]);break;case 4:this[H$k.name]=new H$hb(H$l[0],H$l[1],H$l[2],H$l[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var H$m=H$h[H$i];for(H$f=0,H$g=H$m.length;H$f<H$g;H$f++){var H$n=H$m[H$f],H$o=H$n.path;H$o&&(this[H$n.name]=H$r.getRes(H$e[H$o]))}break;case"defines":var H$p=H$h[H$i];for(H$f=0,H$g=H$p.length;H$f<H$g;H$f++){var H$q=this._shaderCompile.getMaterialDefineByName(H$p[H$f]);this._addShaderDefine(H$q)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[H$i]=H$h[H$i];break;case"renderQueue":switch(H$h[H$i]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[H$i]=H$h[H$i]}break;case"LAYAMATERIAL:02":for(H$i in H$h=H$d.props)switch(H$i){case"vectors":for(H$f=0,H$g=(H$j=H$h[H$i]).length;H$f<H$g;H$f++)switch((H$l=(H$k=H$j[H$f]).value).length){case 2:this[H$k.name]=new H$fb(H$l[0],H$l[1]);break;case 3:this[H$k.name]=new H$gb(H$l[0],H$l[1],H$l[2]);break;case 4:this[H$k.name]=new H$hb(H$l[0],H$l[1],H$l[2],H$l[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(H$f=0,H$g=(H$m=H$h[H$i]).length;H$f<H$g;H$f++)(H$o=(H$n=H$m[H$f]).path)&&(this[H$n.name]=H$r.getRes(H$e[H$o]));break;case"defines":for(H$f=0,H$g=(H$p=H$h[H$i]).length;H$f<H$g;H$f++)H$q=this._shaderCompile.getMaterialDefineByName(H$p[H$f]),this._addShaderDefine(H$q);break;default:this[H$i]=H$h[H$i]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},H$b._addReference=function(){H$d.prototype._addReference.call(this);for(var H$a=0,H$b=this._values.length;H$a<H$b;H$a++){var H$c=this._values[H$a];H$c&&H$c instanceof laya.d3.resource.BaseTexture&&H$c._addReference()}},H$b._removeReference=function(){H$d.prototype._removeReference.call(this);for(var H$a=0,H$b=this._values.length;H$a<H$b;H$a++){var H$c=this._values[H$a];H$c&&H$c instanceof laya.d3.resource.BaseTexture&&H$c._removeReference()}},H$b.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},H$b.setShaderName=function(H$a){var H$b=H$Jb.nameKey.getID(H$a);if(-1===H$b)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=H$yb._preCompileShader[H$b]},H$b.cloneTo=function(H$a){var H$b=H$a;H$b.name=this.name,H$b.cull=this.cull,H$b.blend=this.blend,H$b.srcBlend=this.srcBlend,H$b.dstBlend=this.dstBlend,H$b.srcBlendRGB=this.srcBlendRGB,H$b.dstBlendRGB=this.dstBlendRGB,H$b.srcBlendAlpha=this.srcBlendAlpha,H$b.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(H$b.blendConstColor),H$b.blendEquation=this.blendEquation,H$b.blendEquationRGB=this.blendEquationRGB,H$b.blendEquationAlpha=this.blendEquationAlpha,H$b.depthTest=this.depthTest,H$b.depthWrite=this.depthWrite,H$b.renderQueue=this.renderQueue,H$b._shader=this._shader,H$b._disablePublicShaderDefine=this._disablePublicShaderDefine,H$b._shaderDefineValue=this._shaderDefineValue;var H$c,H$d=0,H$e=H$b._shaderValues;H$b._shaderValues.data.length=this._shaderValues.data.length;var H$f=this._values.length,H$g=H$b._values;for(H$d=0,H$c=H$g.length=H$f;H$d<H$c;H$d++){var H$h=this._values[H$d];if(H$h)if("number"==typeof H$h)H$g[H$d]=H$h,H$e.data[H$d]=H$h;else if("number"==typeof H$h&&Math.floor(H$h)==H$h)H$g[H$d]=H$h,H$e.data[H$d]=H$h;else if("boolean"==typeof H$h)H$g[H$d]=H$h,H$e.data[H$d]=H$h;else if(H$h instanceof laya.d3.math.Vector2){var H$i=H$g[H$d]||(H$g[H$d]=new H$fb);H$h.cloneTo(H$i),H$e.data[H$d]=H$i.elements}else if(H$h instanceof laya.d3.math.Vector3){var H$j=H$g[H$d]||(H$g[H$d]=new H$gb);H$h.cloneTo(H$j),H$e.data[H$d]=H$j.elements}else if(H$h instanceof laya.d3.math.Vector4){var H$k=H$g[H$d]||(H$g[H$d]=new H$hb);H$h.cloneTo(H$k),H$e.data[H$d]=H$k.elements}else if(H$h instanceof laya.d3.math.Matrix4x4){var H$l=H$g[H$d]||(H$g[H$d]=new H$ab);H$h.cloneTo(H$l),H$e.data[H$d]=H$l.elements}else H$h instanceof laya.d3.resource.BaseTexture&&(H$g[H$d]=H$h,H$e.data[H$d]=H$h)}},H$b.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$o(0,H$b,"alphaTestValue",function(){return this._getNumber(0)},function(H$a){this._setNumber(0,H$a)}),H$o(0,H$b,"alphaTest",function(){return this._alphaTest},function(H$a){(this._alphaTest=H$a)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),H$a.__init__=function(){H$a.SHADERDEFINE_ALPHATEST=H$a.shaderDefines.registerDefine("ALPHATEST")},H$a.RENDERQUEUE_OPAQUE=2e3,H$a.RENDERQUEUE_ALPHATEST=2450,H$a.RENDERQUEUE_TRANSPARENT=3e3,H$a.CULL_NONE=0,H$a.CULL_FRONT=1,H$a.CULL_BACK=2,H$a.BLEND_DISABLE=0,H$a.BLEND_ENABLE_ALL=1,H$a.BLEND_ENABLE_SEPERATE=2,H$a.BLENDPARAM_ZERO=0,H$a.BLENDPARAM_ONE=1,H$a.BLENDPARAM_SRC_COLOR=768,H$a.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,H$a.BLENDPARAM_DST_COLOR=774,H$a.BLENDPARAM_ONE_MINUS_DST_COLOR=775,H$a.BLENDPARAM_SRC_ALPHA=770,H$a.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,H$a.BLENDPARAM_DST_ALPHA=772,H$a.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,H$a.BLENDPARAM_SRC_ALPHA_SATURATE=776,H$a.BLENDEQUATION_ADD=0,H$a.BLENDEQUATION_SUBTRACT=1,H$a.BLENDEQUATION_REVERSE_SUBTRACT=2,H$a.DEPTHTEST_OFF=0,H$a.DEPTHTEST_NEVER=512,H$a.DEPTHTEST_LESS=513,H$a.DEPTHTEST_EQUAL=514,H$a.DEPTHTEST_LEQUAL=515,H$a.DEPTHTEST_GREATER=516,H$a.DEPTHTEST_NOTEQUAL=517,H$a.DEPTHTEST_GEQUAL=518,H$a.DEPTHTEST_ALWAYS=519,H$a.SHADERDEFINE_ALPHATEST=1,H$a.ALPHATESTVALUE=0,H$l(H$a,["shaderDefines",function(){return this.shaderDefines=new H$kb}]),H$a}(H$q),H$Db=function(H$a){function H$b(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,H$b.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}H$n(H$b,"laya.d3.resource.BaseTexture",H$q);var H$c=H$b.prototype;return H$o(0,H$c,"width",function(){return this._width}),H$o(0,H$c,"repeat",function(){return this._repeat},function(H$a){if(this._repeat!==H$a&&(this._repeat=H$a,this._source)){var H$b=H$D.mainContext;H$E.bindTexture(H$b,this._type,this._source),H$u.isPOT(this._width,this._height)&&this._repeat?(H$b.texParameteri(this._type,10242,10497),H$b.texParameteri(this._type,10243,10497)):(H$b.texParameteri(this._type,10242,33071),H$b.texParameteri(this._type,10243,33071))}}),H$o(0,H$c,"height",function(){return this._height}),H$o(0,H$c,"magFifter",function(){return this._magFifter},function(H$a){(this._magFifter=H$a)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(H$a)}),H$o(0,H$c,"wrapModeV",function(){return this._wrapModeV}),H$o(0,H$c,"size",function(){return this._size}),H$o(0,H$c,"wrapModeU",function(){return this._wrapModeU}),H$o(0,H$c,"mipmap",function(){return this._mipmap},function(H$a){this._mipmap=H$a,this._mipmap!=H$a&&this._conchTexture&&this._conchTexture.setMipMap(H$a)}),H$o(0,H$c,"minFifter",function(){return this._minFifter},function(H$a){this._minFifter=H$a,this._minFifter!=H$a&&this._conchTexture&&this._conchTexture.setMinFifter(H$a)}),H$o(0,H$c,"format",function(){return this._format}),H$o(0,H$c,"source",function(){return this.activeResource(),this._source}),H$o(0,H$c,"defaulteTexture",function(){return H$Qb.grayTexture}),H$b.WARPMODE_REPEAT=0,H$b.WARPMODE_CLAMP=1,H$b}(),H$Eb=function(H$a){function H$b(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,H$b.__super.call(this),this._boundingBoxCorners=H$d(8,null)}H$n(H$b,"laya.d3.resource.models.BaseMesh",H$q);var H$c=H$b.prototype;return H$c._getPositions=function(){throw new Error("未Override,请重载该属性！")},H$c._generateBoundingObject=function(){this._boundingSphere=new H$Za(new H$gb,0),H$Za.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new H$Xa(new H$gb,new H$gb),H$Xa.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},H$c.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},H$c.getRenderElement=function(H$a){throw new Error("未Override,请重载该属性！")},H$o(0,H$c,"subMeshCount",function(){return this._subMeshCount}),H$o(0,H$c,"boundingBox",function(){return this._boundingBox}),H$o(0,H$c,"boundingBoxCorners",function(){return this._boundingBoxCorners}),H$o(0,H$c,"boundingSphere",function(){return this._boundingSphere}),H$b}(),H$Fb=(function(H$a){function H$b(){H$b.__super.call(this)}H$n(H$b,"laya.d3.component.Script",H$tb);var H$c=H$b.prototype;H$c.onTriggerEnter=function(H$a){},H$c.onTriggerExit=function(H$a){},H$c.onTriggerStay=function(H$a){},H$o(0,H$c,"isSingleton",function(){return H$b._isSingleton}),H$b._isSingleton=!1}(),function(H$a){function H$b(H$a){this._owner=null,this._sharedMesh=null,H$b.__super.call(this),this._owner=H$a}H$n(H$b,"laya.d3.core.MeshFilter",H$a);var H$c=H$b.prototype;return H$c._sharedMeshLoaded=function(){this.event("loaded")},H$c._destroy=function(){H$a.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},H$o(0,H$c,"sharedMesh",function(){return this._sharedMesh},function(H$a){var H$b=this._sharedMesh;H$b&&H$b._removeReference(),(this._sharedMesh=H$a)._addReference(),this.event("meshchanged",[this,H$b,H$a]),H$a.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),H$o(0,H$c,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),H$o(0,H$c,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),H$o(0,H$c,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),H$o(0,H$c,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),H$b}(H$ub)),H$Gb=function(H$a){function H$b(H$a){H$b.__super.call(this,H$a),H$a.meshFilter.on("meshchanged",this,this._onMeshChanged)}H$n(H$b,"laya.d3.core.MeshRender",H$vb);var H$c=H$b.prototype;return H$c._onMeshChanged=function(H$a,H$b,H$c){H$c.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:H$c.once("loaded",this,this._onMeshLoaed)},H$c._onMeshLoaed=function(H$a,H$b){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},H$c._calculateBoundingSphereByInitSphere=function(H$a){var H$b=NaN,H$c=this._owner.transform,H$d=H$c.scale.elements,H$e=Math.abs(H$d[0]),H$f=Math.abs(H$d[1]),H$g=Math.abs(H$d[2]);H$b=H$f<=H$e&&H$g<=H$e?H$e:H$g<=H$f?H$f:H$g,H$gb.transformCoordinate(H$a.center,H$c.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=H$a.radius*H$b},H$c._calculateBoundBoxByInitCorners=function(H$a){for(var H$b=this._owner.transform.worldMatrix,H$c=0;H$c<8;H$c++)H$gb.transformCoordinate(H$a[H$c],H$b,H$vb._tempBoundBoxCorners[H$c]);H$Xa.createfromPoints(H$vb._tempBoundBoxCorners,this._boundingBox)},H$c._calculateBoundingSphere=function(){var H$a=this._owner.meshFilter.sharedMesh;null==H$a||null==H$a.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(H$a.boundingSphere)},H$c._calculateBoundingBox=function(){var H$a=this._owner.meshFilter.sharedMesh;null==H$a||null==H$a.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(H$a.boundingBoxCorners)},H$c._renderUpdate=function(H$a){var H$b=this._owner.transform;if(H$b){this._setShaderValueMatrix4x4(0,H$b.worldMatrix);var H$c=this._owner.getProjectionViewWorldMatrix(H$a);this._setShaderValueMatrix4x4(1,H$c)}else this._setShaderValueMatrix4x4(0,H$ab.DEFAULT),this._setShaderValueMatrix4x4(1,H$a);return H$rb.debugMode&&this._renderRenderableBoundBox(),!0},H$b}(),H$Hb=function(H$b){function H$d(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,H$d.__super.call(this),this._renderState=new H$W,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new H$mb,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new H$ba,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new H$gb(.7,.7,.7),this.ambientColor=new H$gb(.212,.227,.259),H$D.shaderHighPrecision&&this.addShaderDefine(H$yb.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}H$n(H$d,"laya.d3.core.scene.Scene",H$b);var H$a=H$d.prototype;return H$v.imps(H$a,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),H$a._setUrl=function(H$a){this._url=H$a},H$a._getGroup=function(){return this._group},H$a._setGroup=function(H$a){this._group=H$a},H$a._display=function(){H$v.stage._scenes.push(this),H$v.stage._scenes.sort(H$d._sortScenes);for(var H$a=0,H$b=this._childs.length;H$a<H$b;H$a++){var H$c=this._childs[H$a];H$c.active&&H$c._activeHierarchy()}},H$a._unDisplay=function(){var H$a=H$v.stage._scenes;H$a.splice(H$a.indexOf(this),1);for(var H$b=0,H$c=this._childs.length;H$b<H$c;H$b++){var H$d=this._childs[H$b];H$d.active&&H$d._inActiveHierarchy()}},H$a._addChild3D=function(H$a){H$a.transform._onWorldTransform(),H$a._setBelongScene(this),this.displayedInStage&&H$a.active&&H$a._activeHierarchy()},H$a._removeChild3D=function(H$a){H$a.transform.parent=null,this.displayedInStage&&H$a.active&&H$a._inActiveHierarchy(),H$a._setUnBelongScene()},H$a.initOctree=function(H$a,H$b,H$c,H$d,H$e){void 0===H$e&&(H$e=6),this.treeSize=new H$gb(H$a,H$b,H$c),this.treeLevel=H$e,this.treeRoot=new H$X(this,0),this.treeRoot.init(H$d,this.treeSize)},H$a._prepareUpdateToRenderState=function(H$a,H$b){H$b.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,H$b.scene=this},H$a._prepareSceneToRender=function(H$a){var H$b=this._lights.length;if(0<H$b)for(var H$c=0,H$d=0;H$d<H$b&&!(this._lights[H$d]._prepareToScene(H$a)&&++H$c>=this._enableLightCount);H$d++);},H$a._updateChilds=function(H$a){for(var H$b=0,H$c=this._childs.length;H$b<H$c;++H$b)this._childs[H$b]._update(H$a)},H$a._preRenderScene=function(H$a,H$b,H$c){var H$d,H$e=H$b._viewMatrix,H$f=H$b._projectionMatrix,H$g=H$b._projectionViewMatrix,H$h=0,H$i=H$b.camera;for(H$i.useOcclusionCulling?this.treeRoot?H$ca.renderObjectCullingOctree(H$c,this,H$i,H$e,H$f,H$g):H$ca.renderObjectCulling(H$c,this,H$i,H$e,H$f,H$g):H$ca.renderObjectCullingNoBoundFrustum(this,H$i,H$e,H$f,H$g),H$h=0,H$d=this._quenes.length;H$h<H$d;H$h++)this._quenes[H$h]&&this._quenes[H$h]._preRender(H$b)},H$a._clear=function(H$a,H$b){var H$c=H$b._viewport,H$d=H$b.camera,H$e=H$c.x,H$f=H$d.renderTargetSize.height-H$c.y-H$c.height,H$g=H$c.width,H$h=H$c.height;H$a.viewport(H$e,H$f,H$g,H$h);var H$i=256,H$j=H$d.renderTarget;switch(H$d.clearFlag){case 0:var H$k=H$d.clearColor;if(H$k){H$a.enable(3089),H$a.scissor(H$e,H$f,H$g,H$h);var H$l=H$k.elements;H$a.clearColor(H$l[0],H$l[1],H$l[2],H$l[3]),H$i|=16384}if(H$j)switch(H$k||(H$i=16384),H$j.depthStencilFormat){case 33189:H$i|=256;break;case 36168:H$i|=1024;break;case 34041:H$i|=256,H$i|=1024}H$a.clear(H$i),H$k&&H$a.disable(3089);break;case 1:case 2:if(H$j)switch(H$i=16384,H$j.depthStencilFormat){case 33189:H$i|=256;break;case 36168:H$i|=1024;break;case 34041:H$i|=256,H$i|=1024}H$a.clear(H$i);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},H$a._renderScene=function(H$a,H$b){var H$c,H$d,H$e=H$b.camera,H$f=0;for(H$f=0;H$f<2;H$f++)(H$d=this._quenes[H$f])&&(H$e.renderTarget?H$d._render(H$b,!0):H$d._render(H$b,!1));if(1===H$e.clearFlag){var H$g=H$e.sky;H$g&&(H$E.setCullFace(H$a,!1),H$E.setDepthFunc(H$a,515),H$E.setDepthMask(H$a,!1),H$g._render(H$b),H$E.setDepthFunc(H$a,513),H$E.setDepthMask(H$a,!0))}for(H$f=2,H$c=this._quenes.length;H$f<H$c;H$f++)(H$d=this._quenes[H$f])&&(H$d._sortAlpha(H$b.camera.transform.position),H$e.renderTarget?H$d._render(H$b,!0):H$d._render(H$b,!1))},H$a._set3DRenderConfig=function(H$a){H$a.disable(3042),H$E._blend=!1,H$a.blendFunc(770,771),H$E._sFactor=770,H$E._dFactor=771,H$a.disable(2929),H$E._depthTest=!1,H$a.enable(2884),H$E._cullFace=!0,H$a.depthMask(1),H$E._depthMask=!0,H$a.frontFace(2304),H$E._frontFace=2304},H$a._set2DRenderConfig=function(H$a){H$E.setBlend(H$a,!0),H$E.setBlendFunc(H$a,1,771),H$E.setDepthTest(H$a,!1),H$E.setCullFace(H$a,!1),H$E.setDepthMask(H$a,!0),H$E.setFrontFace(H$a,2305),H$a.viewport(0,0,H$k.width,H$k.height)},H$a._parseCustomProps=function(H$a,H$b,H$c,H$d){var H$e=H$d.customProps.lightmaps,H$f=H$e.length,H$g=this._lightmaps;H$g.length=H$f;for(var H$h=0;H$h<H$f;H$h++)H$g[H$h]=H$r.getRes(H$b[H$e[H$h].replace(".exr",".png")]);this.setlightmaps(H$g);var H$i=H$d.customProps.ambientColor;H$i&&(this.ambientColor=new H$gb(H$i[0],H$i[1],H$i[2]));var H$j=H$d.customProps.fogColor;H$j&&(this.fogColor=new H$gb(H$j[0],H$j[1],H$j[2]))},H$a._addLight=function(H$a){this._lights.indexOf(H$a)<0&&this._lights.push(H$a)},H$a._removeLight=function(H$a){var H$b=this._lights.indexOf(H$a);0<=H$b&&this._lights.splice(H$b,1)},H$a._updateScene=function(){var H$a=this._renderState;this._prepareUpdateToRenderState(H$D.mainContext,H$a),this._updateComponents(H$a),this._updateChilds(H$a),this._lateUpdateComponents(H$a),this._time+=H$a.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},H$a._updateSceneConch=function(){var H$a=this._renderState;this._prepareUpdateToRenderState(H$D.mainContext,H$a),this._updateComponents(H$a),this._lateUpdateComponents(H$a),this._prepareSceneToRender(H$a);for(var H$b=0,H$c=this._cameraPool.length;H$b<H$c;H$b++){var H$d=this._cameraPool[H$b];(H$a.camera=H$d)._prepareCameraToRender()}},H$a._preRenderShadow=function(H$a,H$b,H$c,H$d,H$e){this.treeRoot?H$ca.renderShadowObjectCullingOctree(this,H$b,H$c,H$d,H$e):H$ca.renderShadowObjectCulling(this,H$b,H$c,H$d,H$e);for(var H$f=0,H$g=H$c.length;H$f<H$g;H$f++)H$c[H$f]&&H$c[H$f]._preRender(H$a)},H$a._renderShadowMap=function(H$a,H$b,H$c){var H$d=this.parallelSplitShadowMaps[0];H$d._calcAllLightCameraInfo(H$c);var H$e,H$f,H$g,H$h=H$d.PSSMNum;if(this._preRenderShadow(H$b,H$d._lightCulling,H$d._shadowQuenes,H$d._lightVPMatrix[0],H$h),this.addShaderDefine(H$nb.SHADERDEFINE_CAST_SHADOW),1<H$h)for(var H$i=0;H$i<H$h;H$i++)H$e=H$d.getRenderTarget(H$i+1),H$d.beginRenderTarget(H$i+1),H$a.clearColor(1,1,1,1),H$a.clear(16640),H$a.viewport(0,0,H$e.width,H$e.height),H$b.camera=H$g=H$d.getLightCamera(H$i),H$g._prepareCameraToRender(),H$g._prepareCameraViewProject(H$g.viewMatrix,H$g.projectionMatrix),H$b._projectionViewMatrix=H$d._lightVPMatrix[H$i+1],(H$f=H$d._shadowQuenes[H$i])._preRender(H$b),H$f._renderShadow(H$b,!1),H$d.endRenderTarget(H$i+1);else H$e=H$d.getRenderTarget(1),H$d.beginRenderTarget(1),H$a.clearColor(1,1,1,1),H$a.clear(16640),H$a.viewport(0,0,H$e.width,H$e.height),H$b.camera=H$g=H$d.getLightCamera(0),H$g._prepareCameraToRender(),H$g._prepareCameraViewProject(H$g.viewMatrix,H$g.projectionMatrix),H$b._projectionViewMatrix=H$d._lightVPMatrix[0],(H$f=H$d._shadowQuenes[0])._preRender(H$b),H$f._renderShadow(H$b,!0),H$d.endRenderTarget(1);this.removeShaderDefine(H$nb.SHADERDEFINE_CAST_SHADOW)},H$a.addTreeNode=function(H$a){this.treeRoot.addTreeNode(H$a)},H$a.removeTreeNode=function(H$a){this.treeSize&&H$a._treeNode&&H$a._treeNode.removeObject(H$a)},H$a.setlightmaps=function(H$a){this._lightmaps=H$a;for(var H$b=0,H$c=this._renderableSprite3Ds.length;H$b<H$c;H$b++)this._renderableSprite3Ds[H$b]._render._applyLightMapParams()},H$a.getlightmaps=function(){return this._lightmaps},H$a.addChildAt=function(H$a,H$b){if(!(H$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(H$a&&H$a.__className));if(!H$a||this.destroyed||H$a===this)return H$a;if(H$a.zOrder&&this._set$P("hasZorder",!0),0<=H$b&&H$b<=this._childs.length){if(H$a._parent===this){var H$c=this.getChildIndex(H$a);this._childs.splice(H$c,1),this._childs.splice(H$b,0,H$a),this.conchModel&&(this.conchModel.removeChild(H$a.conchModel),this.conchModel.addChildAt(H$a.conchModel,H$b)),this._childChanged()}else H$a.parent&&H$a.parent.removeChild(H$a),this._childs===H$j.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(H$b,0,H$a),this.conchModel&&this.conchModel.addChildAt(H$a.conchModel,H$b),(H$a.parent=this)._addChild3D(H$a);return H$a}throw new Error("appendChildAt:The index is out of bounds")},H$a.addChild=function(H$a){if(!(H$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!H$a||this.destroyed||H$a===this)return H$a;if(H$a.zOrder&&this._set$P("hasZorder",!0),H$a._parent===this){var H$b=this.getChildIndex(H$a);H$b!==this._childs.length-1&&(this._childs.splice(H$b,1),this._childs.push(H$a),this.conchModel&&(this.conchModel.removeChild(H$a.conchModel),this.conchModel.addChildAt(H$a.conchModel,this._childs.length-1)),this._childChanged())}else H$a.parent&&H$a.parent.removeChild(H$a),this._childs===H$j.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(H$a),this.conchModel&&this.conchModel.addChildAt(H$a.conchModel,this._childs.length-1),(H$a.parent=this)._childChanged(),this._addChild3D(H$a);return H$a},H$a.removeChildAt=function(H$a){var H$b=this.getChildAt(H$a);return H$b&&(this._removeChild3D(H$b),this._childs.splice(H$a,1),this.conchModel&&this.conchModel.removeChild(H$b.conchModel),H$b.parent=null),H$b},H$a.removeChildren=function(H$a,H$b){if(void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=2147483647),this._childs&&0<this._childs.length){var H$c=this._childs;if(0===H$a&&H$f<=H$b){var H$d=H$c;this._childs=H$j.ARRAY_EMPTY}else H$d=H$c.splice(H$a,H$b-H$a);for(var H$e=0,H$f=H$d.length;H$e<H$f;H$e++)this._removeChild3D(H$d[H$e]),H$d[H$e].parent=null,this.conchModel&&this.conchModel.removeChild(H$d[H$e].conchModel)}return this},H$a.addFrustumCullingObject=function(H$a){this.treeRoot?this.addTreeNode(H$a):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(H$a):this._cullingRenders[this._cullingRendersLength]=H$a,H$a._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},H$a.removeFrustumCullingObject=function(H$a){if(this.treeRoot)this.removeTreeNode(H$a);else{this._cullingRendersLength--;var H$b=H$a._indexInSceneFrustumCullingObjects;if(H$b!==this._cullingRendersLength){var H$c=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[H$b]=H$c)._indexInSceneFrustumCullingObjects=H$b,H$a._indexInSceneFrustumCullingObjects=-1}}},H$a.getRenderQueue=function(H$a){return H$a<3e3?this._quenes[1]||(this._quenes[1]=new H$V(this)):this._quenes[2]||(this._quenes[2]=new H$V(this))},H$a.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new H$V(this)},H$a.addShaderDefine=function(H$a){this._shaderDefineValue|=H$a},H$a.removeShaderDefine=function(H$a){this._shaderDefineValue&=~H$a},H$a.addScript=function(H$a){return this._addComponent(H$a)},H$a.getScriptByType=function(H$a,H$b){return void 0===H$b&&(H$b=0),this._getComponentByType(H$a,H$b)},H$a.getScriptsByType=function(H$a,H$b){this._getComponentsByType(H$a,H$b)},H$a.getScriptByIndex=function(H$a){return this._getComponentByIndex(H$a)},H$a.removeScriptByType=function(H$a,H$b){void 0===H$b&&(H$b=0),this._removeComponentByType(H$a,H$b)},H$a.removeScriptsByType=function(H$a){this._removeComponentByType(H$a)},H$a.removeAllScript=function(){this._removeAllComponent()},H$a.render=function(H$a,H$b,H$c){(H$p._context.ctx._renderKey=0)<this._childs.length&&H$a.addRenderObject(this)},H$a.renderSubmit=function(){var H$a=H$D.mainContext,H$b=this._renderState;this._set3DRenderConfig(H$a),this._prepareSceneToRender(this._renderState);var H$c,H$d=0,H$e=0;if(H$rb.debugMode||H$X.debugMode)for(H$d=0,H$e=this._cameraPool.length;H$d<H$e;H$d++)H$c=this._cameraPool[H$d],H$rb._debugPhasorSprite.begin(1,H$c),H$c.activeInHierarchy&&H$c._renderCamera(H$a,H$b,this),H$rb._debugPhasorSprite.end();else for(H$d=0,H$e=this._cameraPool.length;H$d<H$e;H$d++)(H$c=this._cameraPool[H$d]).activeInHierarchy&&H$c._renderCamera(H$a,H$b,this);return this._set2DRenderConfig(H$a),1},H$a.onAsynLoaded=function(H$a,H$b,H$c){var H$d=H$b[0];if("Scene"!==H$d.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var H$e=H$b[1];H$qb._createNodeByJson(this,H$d,this,H$e),this.event("hierarchyloaded",[this]),this.__loaded=!0},H$a.destroy=function(H$a){void 0===H$a&&(H$a=!0),this.destroyed||(H$b.prototype.destroy.call(this,H$a),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,H$r.clearRes(this.url),this.loaded||H$rb._cancelLoadByUrl(this.url))},H$a.getRenderType=function(){return 0},H$a.releaseRender=function(){},H$a._addComponent=function(H$a){var H$b,H$c=this._componentsMap.indexOf(H$a);if(-1===H$c)H$b=[],this._componentsMap.push(H$a),this._typeComponentsIndices.push(H$b);else if(H$b=this._typeComponentsIndices[H$c],this._components[H$b[0]].isSingleton)throw new Error("无法单实例创建"+H$a+"组件，"+H$a+"组件已存在！");var H$d=H$e.getInstance(H$a);H$b.push(this._components.length),this._components.push(H$d);return H$d._initialize(this),H$d},H$a._removeComponent=function(H$a,H$b){var H$c=this._typeComponentsIndices[H$a],H$d=H$c[H$b],H$e=this._components[H$d];this._components.splice(H$d,1),H$c.splice(H$b,1),0===H$c.length&&(this._typeComponentsIndices.splice(H$a,1),this._componentsMap.splice(H$a,1));for(var H$f=0,H$g=this._componentsMap.length;H$f<H$g;H$f++)for(var H$h=(H$c=this._typeComponentsIndices[H$f]).length-1;0<=H$h;H$h--){var H$i=H$c[H$h];if(!(H$d<H$i))break;H$c[H$h]=--H$i}H$e._destroy()},H$a._getComponentByType=function(H$a,H$b){void 0===H$b&&(H$b=0);var H$c=this._componentsMap.indexOf(H$a);return-1===H$c?null:this._components[this._typeComponentsIndices[H$c][H$b]]},H$a._getComponentsByType=function(H$a,H$b){var H$c=this._componentsMap.indexOf(H$a);if(-1!==H$c){var H$d=this._typeComponentsIndices[H$c],H$e=H$d.length;H$b.length=H$e;for(var H$f=0;H$f<H$e;H$f++)H$b[H$f]=this._components[H$d[H$f]]}else H$b.length=0},H$a._getComponentByIndex=function(H$a){return this._components[H$a]},H$a._removeComponentByType=function(H$a,H$b){void 0===H$b&&(H$b=0);var H$c=this._componentsMap.indexOf(H$a);-1!==H$c&&this._removeComponent(H$c,H$b)},H$a._removeComponentsByType=function(H$a){var H$b=this._componentsMap.indexOf(H$a);if(-1!==H$b)for(var H$c=this._typeComponentsIndices[H$b],H$d=0,H$e=H$c.length;H$d<H$e;H$c.length<H$e?H$e--:H$d++)this._removeComponent(H$b,H$d)},H$a._removeAllComponent=function(){for(var H$a=0,H$b=this._componentsMap.length;H$a<H$b;this._componentsMap.length<H$b?H$b--:H$a++)this._removeComponentsByType(this._componentsMap[H$a])},H$a._updateComponents=function(H$a){for(var H$b=0,H$c=this._components.length;H$b<H$c;H$b++){var H$d=this._components[H$b];!H$d.started&&(H$d._start(H$a),H$d.started=!0),H$d.enable&&H$d._update(H$a)}},H$a._lateUpdateComponents=function(H$a){for(var H$b=0;H$b<this._components.length;H$b++){var H$c=this._components[H$b];!H$c.started&&(H$c._start(H$a),H$c.started=!0),H$c.enable&&H$c._lateUpdate(H$a)}},H$a._preRenderUpdateComponents=function(H$a){for(var H$b=0;H$b<this._components.length;H$b++){var H$c=this._components[H$b];!H$c.started&&(H$c._start(H$a),H$c.started=!0),H$c.enable&&H$c._preRenderUpdate(H$a)}},H$a._postRenderUpdateComponents=function(H$a){for(var H$b=0;H$b<this._components.length;H$b++){var H$c=this._components[H$b];!H$c.started&&(H$c._start(H$a),H$c.started=!0),H$c.enable&&H$c._postRenderUpdate(H$a)}},H$o(0,H$a,"_loaded",null,function(H$a){this.__loaded=H$a}),H$o(0,H$a,"fogColor",function(){return this._fogColor},function(H$a){this._fogColor=H$a,this._shaderValues.setValue(0,H$a.elements)}),H$o(0,H$a,"enableFog",function(){return this._enableFog},function(H$a){this._enableFog!==H$a&&((this._enableFog=H$a)?(this.addShaderDefine(H$yb.SHADERDEFINE_FOG),this.removeShaderDefine(H$yb.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(H$yb.SHADERDEFINE_FOG))}),H$o(0,H$a,"url",function(){return this._url}),H$o(0,H$a,"loaded",function(){return this.__loaded}),H$o(0,H$a,"enableDepthFog",function(){return this._enableDepthFog},function(H$a){this._enableDepthFog!=H$a&&((this._enableDepthFog=H$a)?(this.addShaderDefine(H$yb.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(H$yb.SHADERDEFINE_FOG)):this.removeShaderDefine(H$yb.SAHDERDEFINE_DEPTHFOG))}),H$o(0,H$a,"fogStart",function(){return this._fogStart},function(H$a){this._fogStart=H$a,this._shaderValues.setValue(1,H$a)}),H$o(0,H$a,"fogRange",function(){return this._fogRange},function(H$a){this._fogRange=H$a,this._shaderValues.setValue(2,H$a)}),H$o(0,H$a,"ambientColor",function(){return this._ambientColor},function(H$a){this._ambientColor=H$a,this._shaderValues.setValue(21,H$a.elements)}),H$o(0,H$a,"scene",function(){return this}),H$o(0,H$a,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),H$d._sortScenes=function(H$a,H$b){if(H$a.parent!==H$v.stage||H$b.parent!==H$v.stage)return H$a.parent!==H$v.stage&&H$b.parent!==H$v.stage?H$d._sortScenes(H$a.parent,H$b.parent):H$a.parent===H$v.stage?-1:1;var H$c=H$v.stage._childs;return H$c.indexOf(H$a)-H$c.indexOf(H$b)},H$d.load=function(H$a){return H$v.loader.create(H$a,null,null,H$d)},H$d.FOGCOLOR=0,H$d.FOGSTART=1,H$d.FOGRANGE=2,H$d.LIGHTDIRECTION=3,H$d.LIGHTDIRCOLOR=4,H$d.POINTLIGHTPOS=5,H$d.POINTLIGHTRANGE=6,H$d.POINTLIGHTATTENUATION=7,H$d.POINTLIGHTCOLOR=8,H$d.SPOTLIGHTPOS=9,H$d.SPOTLIGHTDIRECTION=10,H$d.SPOTLIGHTSPOT=11,H$d.SPOTLIGHTRANGE=12,H$d.SPOTLIGHTATTENUATION=13,H$d.SPOTLIGHTCOLOR=14,H$d.SHADOWDISTANCE=15,H$d.SHADOWLIGHTVIEWPROJECT=16,H$d.SHADOWMAPPCFOFFSET=17,H$d.SHADOWMAPTEXTURE1=18,H$d.SHADOWMAPTEXTURE2=19,H$d.SHADOWMAPTEXTURE3=20,H$d.AMBIENTCOLOR=21,H$d.TIME=22,H$d}(H$x),H$Ib=function(H$a){function H$b(H$a){H$b.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new H$ab,this._shaderValues=new H$mb,this._colliders=[],this._id=++H$b._uniqueIDCounter,this._transform=new H$wb(this),this.name=H$a||"Sprite3D-"+H$b._nameNumberCounter++,this.layer=H$G.currentCreationLayer,this.active=!0}H$n(H$b,"laya.d3.core.Sprite3D",H$Bb);var H$c=H$b.prototype;return H$v.imps(H$c,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),H$c._setUrl=function(H$a){this._url=H$a},H$c._getGroup=function(){return this._group},H$c._setGroup=function(H$a){this._group=H$a},H$c._addChild3D=function(H$a){H$a.transform.parent=this.transform,this._hierarchyAnimator&&(!H$a._hierarchyAnimator&&H$a._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(H$a,!0,[H$a.name])),this._scene&&(H$a._setBelongScene(this._scene),this._activeInHierarchy&&H$a._active&&H$a._activeHierarchy())},H$c._removeChild3D=function(H$a){H$a.transform.parent=null,this._scene&&(this._activeInHierarchy&&H$a._active&&H$a._inActiveHierarchy(),H$a._setUnBelongScene()),this._hierarchyAnimator&&(H$a._hierarchyAnimator==this._hierarchyAnimator&&H$a._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(H$a,!1,[H$a.name]))},H$c._parseBaseCustomProps=function(H$a){var H$b=this.transform.localPosition;H$a.translate?(H$b.fromArray(H$a.translate),H$b.x*=100,H$b.y*=100,H$b.z*=100):H$b.elements.fill(0),this.transform.localPosition=H$b;var H$c=this.transform.localRotation;H$a.rotation?H$c.fromArray(H$a.rotation):H$c.fromArray([0,0,0,-1]),this.transform.localRotation=H$c;var H$d=this.transform.localScale;H$a.scale?H$d.fromArray(H$a.scale):H$d.elements.fill(1),this.transform.localScale=H$d;var H$e=H$a.layer;null!=H$e&&(this.layer=H$G.getLayerByNumber(H$e))},H$c._parseCustomComponent=function(H$a,H$b,H$c){for(var H$d in H$c){var H$e=H$c[H$d];switch(H$d){case"Animator":var H$f=this.addComponent(Animator);if(H$e.avatarPath)H$f.avatar=H$r.getRes(H$b[H$e.avatarPath]);else{var H$g=H$e.avatar;if(H$g){H$f.avatar=H$r.getRes(H$b[H$g.path]);var H$h=H$g.linkSprites;H$h&&H$a.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[H$f,H$h])}}for(var H$i=H$e.clipPaths,H$j=H$i.length,H$k=0;H$k<H$j;H$k++)H$f.addClip(H$r.getRes(H$b[H$i[H$k]]));H$f.clip=H$r.getRes(H$b[H$i[0]]);var H$l=H$e.playOnWake;void 0!==H$l&&(H$f.playOnWake=H$l);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var H$m=this.addComponent(SphereCollider);H$m.isTrigger=H$e.isTrigger;var H$n=H$m.center;H$n.fromArray(H$e.center),H$m.center=H$n,H$m.radius=H$e.radius;break;case"BoxCollider":var H$o=this.addComponent(BoxCollider);H$o.isTrigger=H$e.isTrigger,H$o.center.fromArray(H$e.center);var H$p=H$o.size;H$p.fromArray(H$e.size),H$o.size=H$p;break;case"MeshCollider":this.addComponent(MeshCollider)}}},H$c._onRootNodeHierarchyLoaded=function(H$a,H$b){for(var H$c in H$b){for(var H$d=this,H$e=H$b[H$c],H$f=0,H$g=H$e.length;H$f<H$g;H$f++){var H$h=H$e[H$f];if(""===H$h)break;if(!(H$d=H$d.getChildByName(H$h)))break}H$d&&H$a.linkSprite3DToAvatarNode(H$c,H$d)}},H$c._setHierarchyAnimator=function(H$a,H$b){this._changeHierarchyAnimator(H$a);for(var H$c=0,H$d=this._childs.length;H$c<H$d;H$c++){var H$e=this._childs[H$c];H$e._hierarchyAnimator==H$b&&H$e._setHierarchyAnimator(H$a,H$b)}},H$c._clearHierarchyAnimator=function(H$a,H$b){this._changeHierarchyAnimator(H$b);for(var H$c=0,H$d=this._childs.length;H$c<H$d;H$c++){var H$e=this._childs[H$c];H$e._hierarchyAnimator==H$a&&H$e._clearHierarchyAnimator(H$a,H$b)}},H$c._getAnimatorToLinkSprite3D=function(H$a,H$b,H$c){var H$d=this.getComponentByType(Animator);if(H$d&&(H$d.avatar?H$d.avatar._version||H$a._setAnimatorToLinkAvatar(H$d,H$b):H$a._setAnimatorToLinkSprite3DNoAvatar(H$d,H$b,H$c)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){H$c.unshift(this._parent.name);var H$e=this._parent;H$e._hierarchyAnimator&&H$e._getAnimatorToLinkSprite3D(H$a,H$b,H$c)}},H$c._setAnimatorToLinkSprite3DNoAvatar=function(H$a,H$b,H$c){var H$d=0,H$e=0;for(H$d=0,H$e=H$a.getClipCount();H$d<H$e;H$d++)H$a._handleSpriteOwnersBySprite(H$d,H$b,H$c,this);for(H$d=0,H$e=this._childs.length;H$d<H$e;H$d++){var H$f=this._childs[H$d],H$g=H$c.length;H$c.push(H$f.name),H$f._setAnimatorToLinkSprite3DNoAvatar(H$a,H$b,H$c),H$c.splice(H$g,1)}},H$c._changeHierarchyAnimator=function(H$a){this._hierarchyAnimator=H$a},H$c._isLinkSpriteToAnimationNode=function(H$a,H$b,H$c){var H$d=H$a._avatarNodes.indexOf(H$b),H$e=H$a._cacheSpriteToNodesMap;if(H$c)this._transform.dummy=H$b.transform,H$a._cacheNodesToSpriteMap[H$d]=H$e.length,H$e.push(H$d);else{this._transform.dummy=null;var H$f=H$a._cacheNodesToSpriteMap[H$d];H$a._cacheNodesToSpriteMap[H$d]=null,H$e.splice(H$f,1)}},H$c._setBelongScene=function(H$a){this._scene=H$a;for(var H$b=0,H$c=this._childs.length;H$b<H$c;H$b++)this._childs[H$b]._setBelongScene(H$a)},H$c._setUnBelongScene=function(){this._scene=null;for(var H$a=0,H$b=this._childs.length;H$a<H$b;H$a++)this._childs[H$a]._setUnBelongScene()},H$c._activeHierarchy=function(){var H$a=0,H$b=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),H$a=0,H$b=this._colliders.length;H$a<H$b;H$a++)this._layer._addCollider(this._colliders[H$a]);for(this.event("activeinhierarchychanged",!0),H$a=0,H$b=this._childs.length;H$a<H$b;H$a++){var H$c=this._childs[H$a];H$c._active&&H$c._activeHierarchy()}},H$c._inActiveHierarchy=function(){var H$a=0,H$b=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),H$a=0,H$b=this._colliders.length;H$a<H$b;H$a++){var H$c=this._colliders[H$a];H$c._clearCollsionMap(),this._layer._removeCollider(H$c)}for(this.event("activeinhierarchychanged",!1),H$a=0,H$b=this._childs.length;H$a<H$b;H$a++){var H$d=this._childs[H$a];H$d._active&&H$d._inActiveHierarchy()}},H$c.addComponent=function(H$a){var H$b,H$c=this._componentsMap.indexOf(H$a);if(-1===H$c)H$b=[],this._componentsMap.push(H$a),this._typeComponentsIndices.push(H$b);else if(H$b=this._typeComponentsIndices[H$c],this._components[H$b[0]].isSingleton)throw new Error("无法单实例创建"+H$a+"组件，"+H$a+"组件已存在！");var H$d=H$e.getInstance(H$a);return H$b.push(this._components.length),this._components.push(H$d),H$d instanceof laya.d3.component.Script&&this._scripts.push(H$d),H$d._initialize(this),H$d},H$c._removeComponent=function(H$a,H$b){var H$c,H$d=0,H$e=this._typeComponentsIndices[H$a],H$f=H$e[H$b],H$g=this._components[H$f];for(H$g instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(H$g),1),H$e.splice(H$b,1),0===H$e.length&&(this._typeComponentsIndices.splice(H$a,1),this._componentsMap.splice(H$a,1)),H$d=0,H$c=this._componentsMap.length;H$d<H$c;H$d++)for(var H$h=(H$e=this._typeComponentsIndices[H$d]).length-1;0<=H$h;H$h--){var H$i=H$e[H$h];if(!(H$f<H$i))break;H$e[H$h]=--H$i}H$g._destroy()},H$c._clearSelfRenderObjects=function(){},H$c._addSelfRenderObjects=function(){},H$c._parseCustomProps=function(H$a,H$b,H$c,H$d){},H$c._updateChilds=function(H$a){var H$b=this._childs.length;if(0!==H$b)for(var H$c=0;H$c<H$b;++H$c)this._childs[H$c]._update(H$a)},H$c._getSortID=function(H$a,H$b){return 1e3*H$b.id+H$a._getVertexBuffer().vertexDeclaration.id},H$c._update=function(H$a){(H$a.owner=this)._activeInHierarchy&&(this._updateComponents(H$a),this._lateUpdateComponents(H$a),H$y.spriteCount++,this._childs.length&&this._updateChilds(H$a))},H$c.getProjectionViewWorldMatrix=function(H$a){return H$ab.multiply(H$a,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},H$c.loadHierarchy=function(H$a){this.addChild(laya.d3.core.Sprite3D.load(H$a))},H$c.addChildAt=function(H$a,H$b){if(!(H$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!H$a||this.destroyed||H$a===this)return H$a;if(H$a.zOrder&&this._set$P("hasZorder",!0),0<=H$b&&H$b<=this._childs.length){if(H$a._parent===this){var H$c=this.getChildIndex(H$a);this._childs.splice(H$c,1),this._childs.splice(H$b,0,H$a),this.conchModel&&(this.conchModel.removeChild(H$a.conchModel),this.conchModel.addChildAt(H$a.conchModel,H$b)),this._childChanged()}else H$a.parent&&H$a.parent.removeChild(H$a),this._childs===H$j.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(H$b,0,H$a),this.conchModel&&this.conchModel.addChildAt(H$a.conchModel,H$b),(H$a.parent=this)._addChild3D(H$a);return H$a}throw new Error("appendChildAt:The index is out of bounds")},H$c.addChild=function(H$a){if(!(H$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!H$a||this.destroyed||H$a===this)return H$a;if(H$a.zOrder&&this._set$P("hasZorder",!0),H$a._parent===this){var H$b=this.getChildIndex(H$a);H$b!==this._childs.length-1&&(this._childs.splice(H$b,1),this._childs.push(H$a),this.conchModel&&(this.conchModel.removeChild(H$a.conchModel),this.conchModel.addChildAt(H$a.conchModel,this._childs.length-1)),this._childChanged())}else H$a.parent&&H$a.parent.removeChild(H$a),this._childs===H$j.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(H$a),this.conchModel&&this.conchModel.addChildAt(H$a.conchModel,this._childs.length-1),(H$a.parent=this)._childChanged(),this._addChild3D(H$a);return H$a},H$c.removeChildAt=function(H$a){var H$b=this.getChildAt(H$a);return H$b&&(this._removeChild3D(H$b),this._childs.splice(H$a,1),this.conchModel&&this.conchModel.removeChild(H$b.conchModel),H$b.parent=null),H$b},H$c.removeChildren=function(H$a,H$b){if(void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=2147483647),this._childs&&0<this._childs.length){var H$c=this._childs;if(0===H$a&&H$f<=H$b){var H$d=H$c;this._childs=H$j.ARRAY_EMPTY}else H$d=H$c.splice(H$a,H$b-H$a);for(var H$e=0,H$f=H$d.length;H$e<H$f;H$e++)this._removeChild3D(H$d[H$e]),H$d[H$e].parent=null,this.conchModel&&this.conchModel.removeChild(H$d[H$e].conchModel)}return this},H$c.onAsynLoaded=function(H$a,H$b,H$c){var H$d=H$b[0];if("Sprite3D"!==H$d.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var H$e=H$b[1];H$qb._createNodeByJson(this,H$d,this,H$e),this.event("hierarchyloaded",[this]),this.__loaded=!0},H$c.cloneTo=function(H$a){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var H$b=H$a;H$b.name=this.name,H$b._destroyed=this._destroyed,H$b.timer=this.timer,H$b._$P=this._$P,H$b.active=this._active;var H$c=H$b.transform.localPosition;this.transform.localPosition.cloneTo(H$c),H$b.transform.localPosition=H$c;var H$d=H$b.transform.localRotation;this.transform.localRotation.cloneTo(H$d),H$b.transform.localRotation=H$d;var H$e=H$b.transform.localScale;this.transform.localScale.cloneTo(H$e),H$b.transform.localScale=H$e,H$b.isStatic=this.isStatic;var H$f=0,H$g=0;for(H$f=0,H$g=this._componentsMap.length;H$f<H$g;H$f++){var H$h=H$b.addComponent(this._componentsMap[H$f]);this._components[H$f]._cloneTo(H$h)}for(H$f=0,H$g=this._childs.length;H$f<H$g;H$f++)H$b.addChild(this._childs[H$f].clone());var H$i=H$b.getComponentByType(Animator);if(H$i){var H$j=H$i._linkSpritesData;if(H$j)for(var H$k in H$j){for(var H$l=H$j[H$k],H$m=H$b,H$n=0,H$o=H$l.length;H$n<H$o&&(H$m=H$m.getChildByName(H$l[H$n]));H$n++);if(H$m){var H$p=H$i._avatarNodeMap[H$k];H$m._isLinkSpriteToAnimationNode(H$i,H$p,!0)}}}},H$c.clone=function(){var H$a=new this.constructor;return this.cloneTo(H$a),H$a},H$c.destroy=function(H$a){if(void 0===H$a&&(H$a=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,H$a);var H$b,H$c=0;for(H$c=0,H$b=this._components.length;H$c<H$b;H$c++)this._components[H$c]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,H$r.clearRes(this.url),this.loaded||H$rb._cancelLoadByUrl(this.url)}},H$c._handleSpriteToAvatar=function(H$a,H$b){H$a._avatarNodes;var H$c=H$a._avatarNodeMap[this.name];H$c&&H$c.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(H$a,H$c,H$b)},H$c._setAnimatorToLinkAvatar=function(H$a,H$b){this._handleSpriteToAvatar(H$a,H$b);for(var H$c=0,H$d=this._childs.length;H$c<H$d;H$c++){this._childs[H$c]._setAnimatorToLinkAvatar(H$a,H$b)}},H$o(0,H$c,"activeInHierarchy",function(){return this._activeInHierarchy}),H$o(0,H$c,"_loaded",null,function(H$a){this.__loaded=H$a}),H$o(0,H$c,"active",function(){return this._active},function(H$a){this._active!==H$a&&(this._active=H$a,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(H$a?this._activeHierarchy():this._inActiveHierarchy()))}),H$o(0,H$c,"componentsCount",function(){return this._components.length}),H$o(0,H$c,"loaded",function(){return this.__loaded}),H$o(0,H$c,"id",function(){return this._id}),H$o(0,H$c,"url",function(){return this._url}),H$o(0,H$c,"layer",function(){return this._layer},function(H$a){if(this._layer!==H$a){if(!H$a)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var H$b=0,H$c=this._colliders.length;if(this._layer)for(H$b=0;H$b<H$c;H$b++)this._layer._removeCollider(this._colliders[H$b]);for(H$b=0;H$b<H$c;H$b++)H$a._addCollider(this._colliders[H$b])}this._layer=H$a,this.event("layerchanged",H$a)}}),H$o(0,H$c,"scene",function(){return this._scene}),H$o(0,H$c,"transform",function(){return this._transform}),H$b.instantiate=function(H$a,H$b,H$c,H$d,H$e){void 0===H$c&&(H$c=!0);var H$f=H$a.clone();H$b&&H$b.addChild(H$f);var H$g=H$f.transform;if(H$c){var H$h=H$g.worldMatrix;H$a.transform.worldMatrix.cloneTo(H$h),H$g.worldMatrix=H$h}else H$d&&(H$g.position=H$d),H$e&&(H$g.rotation=H$e);return H$f},H$b.load=function(H$a){return H$v.loader.create(H$a,null,null,H$b)},H$b.WORLDMATRIX=0,H$b.MVPMATRIX=1,H$b._uniqueIDCounter=0,H$b._nameNumberCounter=0,H$b}(),H$Jb=function(H$a){function H$k(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],H$k.__super.call(this),!H$a||!H$b)throw"Shader Error";this._id=++H$k._count,this._vs=H$a,this._ps=H$b,this._attributeMap=H$c,this._sceneUniformMap=H$d,this._cameraUniformMap=H$e,this._spriteUniformMap=H$f,this._materialUniformMap=H$g,this._renderElementUniformMap=H$h,this._precompile=H$i,this._define=H$j,this._precompile&&H$k.extCompileObj&&H$k.extCompileFunc?H$k.extCompileFunc.call(H$k.extCompileObj,H$a,H$b,H$j):this.recreateResource()}H$n(H$k,"laya.d3.shader.Shader3D",H$c);var H$b=H$k.prototype;return H$b.recreateResource=function(){H$F.now();this._compile(),this.completeCreate(),this.memorySize=0},H$b.disposeResource=function(){H$D.mainContext.deleteShader(this._vshader),H$D.mainContext.deleteShader(this._pshader),H$D.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},H$b._compile=function(){if(!H$D.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var H$a=[this._vs,this._ps],H$b=H$D.mainContext;if(this._program=H$b.createProgram(),this._vshader=H$k._createShader(H$b,H$a[0],35633),this._pshader=H$k._createShader(H$b,H$a[1],35632),H$b.attachShader(this._program,this._vshader),H$b.attachShader(this._program,this._pshader),H$b.linkProgram(this._program),!H$p.isConchApp&&H$yb.debugMode&&!H$b.getProgramParameter(this._program,35714))throw H$b.getProgramInfoLog(this._program);var H$c,H$d=0,H$e=0,H$f=0;for(H$f=H$p.isConchApp?H$b.getProgramParameterEx(this._vs,this._ps,"",35721):H$b.getProgramParameter(this._program,35721),H$d=0;H$d<H$f;H$d++){var H$g=null;H$c={vartype:"attribute",ivartype:0,attrib:H$g=H$p.isConchApp?H$b.getActiveAttribEx(this._vs,this._ps,"",H$d):H$b.getActiveAttrib(this._program,H$d),location:H$b.getAttribLocation(this._program,H$g.name),name:H$g.name,type:H$g.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(H$c)}var H$h=0;for(H$h=H$p.isConchApp?H$b.getProgramParameterEx(this._vs,this._ps,"",35718):H$b.getProgramParameter(this._program,35718),H$d=0;H$d<H$h;H$d++){var H$i=null;H$i=H$p.isConchApp?H$b.getActiveUniformEx(this._vs,this._ps,"",H$d):H$b.getActiveUniform(this._program,H$d),0<(H$c={vartype:"uniform",ivartype:1,attrib:H$g,location:H$b.getUniformLocation(this._program,H$i.name),name:H$i.name,type:H$i.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(H$c.name=H$c.name.substr(0,H$c.name.length-3),H$c.isArray=!0,H$c.location=H$b.getUniformLocation(this._program,H$c.name)),this._uniformParams.push(H$c)}for(H$d=0,H$e=this._attributeParams.length;H$d<H$e;H$d++)(H$c=this._attributeParams[H$d]).indexOfParams=H$d,H$c.index=1,H$c.value=[H$c.location,null],H$c.codename=H$c.name,H$c.name=null!=this._attributeMap[H$c.codename]?this._attributeMap[H$c.codename]:H$c.codename,this._attributeParamsMap.push(H$c.name),this._attributeParamsMap.push(H$c),H$c._this=this,H$c.uploadedValue=[],H$c.fun=this._attribute;for(H$d=0,H$e=this._uniformParams.length;H$d<H$e;H$d++)switch((H$c=this._uniformParams[H$d]).indexOfParams=H$d,H$c.index=1,H$c.value=[H$c.location,null],H$c.codename=H$c.name,null!=this._sceneUniformMap[H$c.codename]?(H$c.name=this._sceneUniformMap[H$c.codename],this._sceneUniformParamsMap.push(H$c.name),this._sceneUniformParamsMap.push(H$c)):null!=this._cameraUniformMap[H$c.codename]?(H$c.name=this._cameraUniformMap[H$c.codename],this._cameraUniformParamsMap.push(H$c.name),this._cameraUniformParamsMap.push(H$c)):null!=this._spriteUniformMap[H$c.codename]?(H$c.name=this._spriteUniformMap[H$c.codename],this._spriteUniformParamsMap.push(H$c.name),this._spriteUniformParamsMap.push(H$c)):null!=this._materialUniformMap[H$c.codename]?(H$c.name=this._materialUniformMap[H$c.codename],this._materialUniformParamsMap.push(H$c.name),this._materialUniformParamsMap.push(H$c)):null!=this._renderElementUniformMap[H$c.codename]?(H$c.name=this._renderElementUniformMap[H$c.codename],this._renderElementUniformParamsMap.push(H$c.name),this._renderElementUniformParamsMap.push(H$c)):console.log("Shader:can't find uinform name:"+H$c.codename+" in shader file."),H$c._this=this,H$c.uploadedValue=[],H$c.type){case 5124:H$c.fun=H$c.isArray?this._uniform1iv:this._uniform1i;break;case 5126:H$c.fun=H$c.isArray?this._uniform1fv:this._uniform1f;break;case 35664:H$c.fun=H$c.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:H$c.fun=H$c.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:H$c.fun=H$c.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:H$c.fun=this._uniform_sampler2D;break;case 35680:H$c.fun=this._uniform_samplerCube;break;case 35676:H$c.fun=this._uniformMatrix4fv;break;case 35670:H$c.fun=this._uniform1i;break;case 35674:H$c.fun=this._uinformMatrix2fv;break;case 35675:H$c.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},H$b._attribute=function(H$a,H$b){var H$c=H$D.mainContext,H$d=H$h._enableAtributes,H$e=H$a.location;return H$d[H$e]||H$c.enableVertexAttribArray(H$e),H$c.vertexAttribPointer(H$e,H$b[0],H$b[1],H$b[2],H$b[3],H$b[4]),H$d[H$e]=H$h._bindVertexBuffer,1},H$b._uniform1f=function(H$a,H$b){var H$c=H$a.uploadedValue;return H$c[0]!==H$b?(H$D.mainContext.uniform1f(H$a.location,H$c[0]=H$b),1):0},H$b._uniform1fv=function(H$a,H$b){if(H$b.length<4){var H$c=H$a.uploadedValue;return H$c[0]!==H$b[0]||H$c[1]!==H$b[1]||H$c[2]!==H$b[2]||H$c[3]!==H$b[3]?(H$D.mainContext.uniform1fv(H$a.location,H$b),H$c[0]=H$b[0],H$c[1]=H$b[1],H$c[2]=H$b[2],H$c[3]=H$b[3],1):0}return H$D.mainContext.uniform1fv(H$a.location,H$b),1},H$b._uniform_vec2=function(H$a,H$b){var H$c=H$a.uploadedValue;return H$c[0]!==H$b[0]||H$c[1]!==H$b[1]?(H$D.mainContext.uniform2f(H$a.location,H$c[0]=H$b[0],H$c[1]=H$b[1]),1):0},H$b._uniform_vec2v=function(H$a,H$b){if(H$b.length<2){var H$c=H$a.uploadedValue;return H$c[0]!==H$b[0]||H$c[1]!==H$b[1]||H$c[2]!==H$b[2]||H$c[3]!==H$b[3]?(H$D.mainContext.uniform2fv(H$a.location,H$b),H$c[0]=H$b[0],H$c[1]=H$b[1],H$c[2]=H$b[2],H$c[3]=H$b[3],1):0}return H$D.mainContext.uniform2fv(H$a.location,H$b),1},H$b._uniform_vec3=function(H$a,H$b){var H$c=H$a.uploadedValue;return H$c[0]!==H$b[0]||H$c[1]!==H$b[1]||H$c[2]!==H$b[2]?(H$D.mainContext.uniform3f(H$a.location,H$c[0]=H$b[0],H$c[1]=H$b[1],H$c[2]=H$b[2]),1):0},H$b._uniform_vec3v=function(H$a,H$b){return H$D.mainContext.uniform3fv(H$a.location,H$b),1},H$b._uniform_vec4=function(H$a,H$b){var H$c=H$a.uploadedValue;return H$c[0]!==H$b[0]||H$c[1]!==H$b[1]||H$c[2]!==H$b[2]||H$c[3]!==H$b[3]?(H$D.mainContext.uniform4f(H$a.location,H$c[0]=H$b[0],H$c[1]=H$b[1],H$c[2]=H$b[2],H$c[3]=H$b[3]),1):0},H$b._uniform_vec4v=function(H$a,H$b){return H$D.mainContext.uniform4fv(H$a.location,H$b),1},H$b._uniformMatrix2fv=function(H$a,H$b){return H$D.mainContext.uniformMatrix2fv(H$a.location,!1,H$b),1},H$b._uniformMatrix3fv=function(H$a,H$b){return H$D.mainContext.uniformMatrix3fv(H$a.location,!1,H$b),1},H$b._uniformMatrix4fv=function(H$a,H$b){return H$D.mainContext.uniformMatrix4fv(H$a.location,!1,H$b),1},H$b._uinformMatrix2fv=function(H$a,H$b){return H$D.mainContext.uniformMatrix2fv(H$a.location,!1,H$b),1},H$b._uinformMatrix3fv=function(H$a,H$b){return H$D.mainContext.uniformMatrix3fv(H$a.location,!1,H$b),1},H$b._uniform1i=function(H$a,H$b){var H$c=H$a.uploadedValue;return H$c[0]!==H$b?(H$D.mainContext.uniform1i(H$a.location,H$c[0]=H$b),1):0},H$b._uniform1iv=function(H$a,H$b){return H$D.mainContext.uniform1iv(H$a.location,H$b),1},H$b._uniform_ivec2=function(H$a,H$b){var H$c=H$a.uploadedValue;return H$c[0]!==H$b[0]||H$c[1]!==H$b[1]?(H$D.mainContext.uniform2i(H$a.location,H$c[0]=H$b[0],H$c[1]=H$b[1]),1):0},H$b._uniform_ivec2v=function(H$a,H$b){return H$D.mainContext.uniform2iv(H$a.location,H$b),1},H$b._uniform_vec3i=function(H$a,H$b){var H$c=H$a.uploadedValue;return H$c[0]!==H$b[0]||H$c[1]!==H$b[1]||H$c[2]!==H$b[2]?(H$D.mainContext.uniform3i(H$a.location,H$c[0]=H$b[0],H$c[1]=H$b[1],H$c[2]=H$b[2]),1):0},H$b._uniform_vec3vi=function(H$a,H$b){return H$D.mainContext.uniform3iv(H$a.location,H$b),1},H$b._uniform_vec4i=function(H$a,H$b){var H$c=H$a.uploadedValue;return H$c[0]!==H$b[0]||H$c[1]!==H$b[1]||H$c[2]!==H$b[2]||H$c[3]!==H$b[3]?(H$D.mainContext.uniform4i(H$a.location,H$c[0]=H$b[0],H$c[1]=H$b[1],H$c[2]=H$b[2],H$c[3]=H$b[3]),1):0},H$b._uniform_vec4vi=function(H$a,H$b){return H$D.mainContext.uniform4iv(H$a.location,H$b),1},H$b._uniform_sampler2D=function(H$a,H$b){var H$c=H$b.source||H$b.defaulteTexture.source,H$d=H$D.mainContext,H$e=H$a.uploadedValue;if(null!=H$e[0])return H$d.activeTexture(H$k._TEXTURES[H$e[0]]),H$c&&H$E.bindTexture(H$d,3553,H$c),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return H$e[0]=this._curActTexIndex,H$d.uniform1i(H$a.location,this._curActTexIndex),H$d.activeTexture(H$k._TEXTURES[this._curActTexIndex]),H$c&&H$E.bindTexture(H$d,3553,H$c),this._curActTexIndex++,1},H$b._uniform_samplerCube=function(H$a,H$b){var H$c=H$b.source||H$b.defaulteTexture.source,H$d=H$D.mainContext,H$e=H$a.uploadedValue;if(null!=H$e[0])return H$d.activeTexture(H$k._TEXTURES[H$e[0]]),H$c?H$E.bindTexture(H$d,34067,H$c):H$E.bindTexture(H$d,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return H$e[0]=this._curActTexIndex,H$d.uniform1i(H$a.location,this._curActTexIndex),H$d.activeTexture(H$k._TEXTURES[this._curActTexIndex]),H$c?H$E.bindTexture(H$d,34067,H$c):H$E.bindTexture(H$d,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},H$b._noSetValue=function(H$a){console.log("no....:"+H$a.name)},H$b.bind=function(){return H$c.activeShader=this,(H$c.bindShader=this).activeResource(),H$E.UseProgram(this._program)},H$b.uploadAttributes=function(H$a,H$b){for(var H$c,H$d,H$e=0,H$f=0,H$g=this._attributeParamsMap.length;H$f<H$g;H$f+=2)H$d=this._attributeParamsMap[H$f+1],null!=(H$c=H$a[this._attributeParamsMap[H$f]])&&(H$b&&H$b[H$d.name]&&H$b[H$d.name].bind(),H$e+=H$d.fun.call(this,H$d,H$c));H$y.shaderCall+=H$e},H$b.uploadAttributesX=function(H$a,H$b){for(var H$c,H$d,H$e=0,H$f=0,H$g=this._attributeParamsMap.length;H$f<H$g;H$f+=2)H$d=this._attributeParamsMap[H$f+1],null!=(H$c=H$a[this._attributeParamsMap[H$f]])&&(H$b._bind(),H$e+=H$d.fun.call(this,H$d,H$c));H$y.shaderCall+=H$e},H$b.uploadSceneUniforms=function(H$a){for(var H$b,H$c,H$d=0,H$e=0,H$f=this._sceneUniformParamsMap.length;H$e<H$f;H$e+=2)H$c=this._sceneUniformParamsMap[H$e+1],null!=(H$b=H$a[this._sceneUniformParamsMap[H$e]])&&(H$d+=H$c.fun.call(this,H$c,H$b));H$y.shaderCall+=H$d},H$b.uploadCameraUniforms=function(H$a){for(var H$b,H$c,H$d=0,H$e=0,H$f=this._cameraUniformParamsMap.length;H$e<H$f;H$e+=2)H$c=this._cameraUniformParamsMap[H$e+1],null!=(H$b=H$a[this._cameraUniformParamsMap[H$e]])&&(H$d+=H$c.fun.call(this,H$c,H$b));H$y.shaderCall+=H$d},H$b.uploadSpriteUniforms=function(H$a){for(var H$b,H$c,H$d=0,H$e=0,H$f=this._spriteUniformParamsMap.length;H$e<H$f;H$e+=2)H$c=this._spriteUniformParamsMap[H$e+1],null!=(H$b=H$a[this._spriteUniformParamsMap[H$e]])&&(H$d+=H$c.fun.call(this,H$c,H$b));H$y.shaderCall+=H$d},H$b.uploadMaterialUniforms=function(H$a){for(var H$b,H$c,H$d=0,H$e=0,H$f=this._materialUniformParamsMap.length;H$e<H$f;H$e+=2)H$c=this._materialUniformParamsMap[H$e+1],null!=(H$b=H$a[this._materialUniformParamsMap[H$e]])&&(H$d+=H$c.fun.call(this,H$c,H$b));H$y.shaderCall+=H$d},H$b.uploadRenderElementUniforms=function(H$a){for(var H$b,H$c,H$d=0,H$e=0,H$f=this._renderElementUniformParamsMap.length;H$e<H$f;H$e+=2)H$c=this._renderElementUniformParamsMap[H$e+1],null!=(H$b=H$a[this._renderElementUniformParamsMap[H$e]])&&(H$d+=H$c.fun.call(this,H$c,H$b));H$y.shaderCall+=H$d},H$k.create=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j){return new H$k(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j)},H$k.addInclude=function(H$a,H$b){H$t.addInclude(H$a,H$b)},H$k._createShader=function(H$a,H$b,H$c){var H$d=H$a.createShader(H$c);if(H$a.shaderSource(H$d,H$b),H$a.compileShader(H$d),H$yb.debugMode&&!H$a.getShaderParameter(H$d,35713))throw H$a.getShaderInfoLog(H$d);return H$d},H$k.PERIOD_RENDERELEMENT=0,H$k.PERIOD_MATERIAL=1,H$k.PERIOD_SPRITE=2,H$k.PERIOD_CAMERA=3,H$k.PERIOD_SCENE=4,H$k._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],H$k._count=0,H$k._preCompile=!1,H$k.extCompileFunc=null,H$k.extCompileObj=null,H$l(H$k,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new H$z}]),H$k}(),H$Kb=function(H$h){function H$i(){this._transformUV=null,H$i.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new H$gb(.6,.6,.6)),this._setColor(10,new H$gb(1,1,1)),this._setColor(11,new H$hb(1,1,1,8)),this._setColor(12,new H$gb(1,1,1)),this._setColor(7,new H$hb(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new H$hb(1,1,0,0)),this.renderMode=1}H$n(H$i,"laya.d3.core.material.StandardMaterial",H$h);var H$a=H$i.prototype;return H$a.disableLight=function(){this._addDisablePublicShaderDefine(H$yb.SHADERDEFINE_POINTLIGHT|H$yb.SHADERDEFINE_SPOTLIGHT|H$yb.SHADERDEFINE_DIRECTIONLIGHT)},H$a.disableFog=function(){this._addDisablePublicShaderDefine(H$yb.SHADERDEFINE_FOG)},H$a.onAsynLoaded=function(H$a,H$b,H$c){var H$d=H$b[0];if(H$d.version)H$h.prototype.onAsynLoaded.call(this,H$a,H$b,H$c);else{var H$e=H$b[1],H$f=H$d.props;for(var H$g in H$f)this[H$g]=H$f[H$g];H$i._parseStandardMaterial(H$e,this,H$d),this._endLoaded()}},H$a.cloneTo=function(H$a){H$h.prototype.cloneTo.call(this,H$a);var H$b=H$a;this._transformUV&&(H$b._transformUV=this._transformUV.clone())},H$o(0,H$a,"ambientColor",function(){return this._getColor(9)},function(H$a){this._setColor(9,H$a)}),H$o(0,H$a,"ambientTexture",function(){return this._getTexture(5)},function(H$a){H$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,H$a)}),H$o(0,H$a,"renderMode",null,function(H$a){switch(H$a){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(H$i.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(H$i.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(H$i.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(H$i.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H$i.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H$i.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H$i.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H$i.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H$i.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H$i.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H$i.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H$i.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H$i.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H$i.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H$i.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H$i.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(H$a)}),H$o(0,H$a,"reflectColor",function(){return this._getColor(12)},function(H$a){this._setColor(12,H$a)}),H$o(0,H$a,"tilingOffset",function(){return this._getColor(15)},function(H$a){if(H$a){var H$b=H$a.elements;1!=H$b[0]||1!=H$b[1]||0!=H$b[2]||0!=H$b[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,H$a)}),H$o(0,H$a,"albedo",function(){return this._getColor(7)},function(H$a){this._setColor(7,H$a)}),H$o(0,H$a,"diffuseColor",function(){return this._getColor(10)},function(H$a){this._setColor(10,H$a)}),H$o(0,H$a,"albedoColor",function(){return this._getColor(7)},function(H$a){this._setColor(7,H$a)}),H$o(0,H$a,"specularColor",function(){return this._getColor(11)},function(H$a){this._setColor(11,H$a)}),H$o(0,H$a,"diffuseTexture",function(){return this._getTexture(1)},function(H$a){H$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,H$a)}),H$o(0,H$a,"normalTexture",function(){return this._getTexture(2)},function(H$a){H$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,H$a)}),H$o(0,H$a,"specularTexture",function(){return this._getTexture(3)},function(H$a){H$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,H$a)}),H$o(0,H$a,"emissiveTexture",function(){return this._getTexture(4)},function(H$a){H$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,H$a)}),H$o(0,H$a,"reflectTexture",function(){return this._getTexture(6)},function(H$a){H$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,H$a)}),H$o(0,H$a,"transformUV",function(){return this._transformUV},function(H$a){this._transformUV=H$a,this._setMatrix4x4(13,H$a.matrix),H$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,H$a.matrix.elements,0)}),H$i.__init__=function(){H$i.SHADERDEFINE_DIFFUSEMAP=H$i.shaderDefines.registerDefine("DIFFUSEMAP"),H$i.SHADERDEFINE_NORMALMAP=H$i.shaderDefines.registerDefine("NORMALMAP"),H$i.SHADERDEFINE_SPECULARMAP=H$i.shaderDefines.registerDefine("SPECULARMAP"),H$i.SHADERDEFINE_EMISSIVEMAP=H$i.shaderDefines.registerDefine("EMISSIVEMAP"),H$i.SHADERDEFINE_AMBIENTMAP=H$i.shaderDefines.registerDefine("AMBIENTMAP"),H$i.SHADERDEFINE_REFLECTMAP=H$i.shaderDefines.registerDefine("REFLECTMAP"),H$i.SHADERDEFINE_UVTRANSFORM=H$i.shaderDefines.registerDefine("UVTRANSFORM"),H$i.SHADERDEFINE_TILINGOFFSET=H$i.shaderDefines.registerDefine("TILINGOFFSET"),H$i.SHADERDEFINE_ADDTIVEFOG=H$i.shaderDefines.registerDefine("ADDTIVEFOG")},H$i.load=function(H$a){return H$v.loader.create(H$a,null,null,H$i)},H$i._parseStandardMaterial=function(H$a,H$b,H$c){var H$d=H$c.customProps,H$e=H$d.ambientColor;H$b.ambientColor=new H$gb(H$e[0],H$e[1],H$e[2]);var H$f=H$d.diffuseColor;H$b.diffuseColor=new H$gb(H$f[0],H$f[1],H$f[2]);var H$g=H$d.specularColor;H$b.specularColor=new H$hb(H$g[0],H$g[1],H$g[2],H$g[3]);var H$h=H$d.reflectColor;H$b.reflectColor=new H$gb(H$h[0],H$h[1],H$h[2]);var H$i=H$d.albedoColor;H$i&&(H$b.albedo=new H$hb(H$i[0],H$i[1],H$i[2],H$i[3]));var H$j=H$d.diffuseTexture.texture2D;H$j&&(H$b.diffuseTexture=H$r.getRes(H$a[H$j]));var H$k=H$d.normalTexture.texture2D;H$k&&(H$b.normalTexture=H$r.getRes(H$a[H$k]));var H$l=H$d.specularTexture.texture2D;H$l&&(H$b.specularTexture=H$r.getRes(H$a[H$l]));var H$m=H$d.emissiveTexture.texture2D;H$m&&(H$b.emissiveTexture=H$r.getRes(H$a[H$m]));var H$n=H$d.ambientTexture.texture2D;H$n&&(H$b.ambientTexture=H$r.getRes(H$a[H$n]));var H$o=H$d.reflectTexture.texture2D;H$o&&(H$b.reflectTexture=H$r.getRes(H$a[H$o]))},H$i.RENDERMODE_OPAQUE=1,H$i.RENDERMODE_OPAQUEDOUBLEFACE=2,H$i.RENDERMODE_CUTOUT=3,H$i.RENDERMODE_CUTOUTDOUBLEFACE=4,H$i.RENDERMODE_TRANSPARENT=13,H$i.RENDERMODE_TRANSPARENTDOUBLEFACE=14,H$i.RENDERMODE_ADDTIVE=15,H$i.RENDERMODE_ADDTIVEDOUBLEFACE=16,H$i.RENDERMODE_DEPTHREAD_TRANSPARENT=5,H$i.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,H$i.RENDERMODE_DEPTHREAD_ADDTIVE=7,H$i.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,H$i.RENDERMODE_NONDEPTH_TRANSPARENT=9,H$i.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,H$i.RENDERMODE_NONDEPTH_ADDTIVE=11,H$i.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,H$i.SHADERDEFINE_DIFFUSEMAP=0,H$i.SHADERDEFINE_NORMALMAP=0,H$i.SHADERDEFINE_SPECULARMAP=0,H$i.SHADERDEFINE_EMISSIVEMAP=0,H$i.SHADERDEFINE_AMBIENTMAP=0,H$i.SHADERDEFINE_REFLECTMAP=0,H$i.SHADERDEFINE_UVTRANSFORM=0,H$i.SHADERDEFINE_TILINGOFFSET=0,H$i.SHADERDEFINE_ADDTIVEFOG=0,H$i.DIFFUSETEXTURE=1,H$i.NORMALTEXTURE=2,H$i.SPECULARTEXTURE=3,H$i.EMISSIVETEXTURE=4,H$i.AMBIENTTEXTURE=5,H$i.REFLECTTEXTURE=6,H$i.ALBEDO=7,H$i.UVANIAGE=8,H$i.MATERIALAMBIENT=9,H$i.MATERIALDIFFUSE=10,H$i.MATERIALSPECULAR=11,H$i.MATERIALREFLECT=12,H$i.UVMATRIX=13,H$i.UVAGE=14,H$i.TILINGOFFSET=15,H$l(H$i,["defaultMaterial",function(){var H$a=new H$i;return H$a.lock=!0,this.defaultMaterial=H$a},"shaderDefines",function(){return this.shaderDefines=new H$kb(H$Cb.shaderDefines)}]),H$i}(H$Cb),H$Lb=function(H$a){function H$g(H$a,H$b,H$c,H$d,H$e){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===H$c&&(H$c=35044),void 0===H$d&&(H$d=!1),H$g.__super.call(this),this._indexType=H$a,this._indexCount=H$b,this._bufferUsage=H$c,this._bufferType=34963,this._canRead=H$d;var H$f;if("ushort"==H$a)this._indexTypeByteCount=2;else{if("ubyte"!=H$a)throw new Error("unidentification index type.");this._indexTypeByteCount=1}H$f=this._indexTypeByteCount*H$b,this._byteLength=H$f,this._bind(),H$h._gl.bufferData(this._bufferType,H$f,this._bufferUsage),this.uri=H$e,H$d?("ushort"==H$a?this._buffer=new Uint16Array(H$b):"ubyte"==H$a&&(this._buffer=new Uint8Array(H$b)),this.memorySize=2*H$f):this.memorySize=H$f}H$n(H$g,"laya.d3.graphics.IndexBuffer3D",H$a);var H$b=H$g.prototype;return H$b.setData=function(H$a,H$b,H$c,H$d){void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0),void 0===H$d&&(H$d=4294967295);var H$e=0;if("ushort"==this._indexType?(H$e=2,0===H$c&&4294967295===H$d||(H$a=new Uint16Array(H$a.buffer,H$c*H$e,H$d))):"ubyte"==this._indexType&&(H$e=1,0===H$c&&4294967295===H$d||(H$a=new Uint8Array(H$a.buffer,H$c*H$e,H$d))),this._bind(),H$h._gl.bufferSubData(this._bufferType,H$b*H$e,H$a),this._canRead)if(0!==H$b||0!==H$c||4294967295!==H$d){var H$f=this._buffer.length-H$b;H$f<H$d&&(H$d=H$f);for(var H$g=0;H$g<H$d;H$g++)this._buffer[H$b+H$g]=H$a[H$g]}else this._buffer=H$a},H$b.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},H$b.disposeResource=function(){H$a.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},H$o(0,H$b,"indexType",function(){return this._indexType}),H$o(0,H$b,"indexTypeByteCount",function(){return this._indexTypeByteCount}),H$o(0,H$b,"indexCount",function(){return this._indexCount}),H$o(0,H$b,"canRead",function(){return this._canRead}),H$g.INDEXTYPE_UBYTE="ubyte",H$g.INDEXTYPE_USHORT="ushort",H$g.create=function(H$a,H$b,H$c,H$d,H$e){return void 0===H$c&&(H$c=35044),void 0===H$d&&(H$d=!1),new H$g(H$a,H$b,H$c,H$d,H$e)},H$g}(H$h),H$Mb=function(H$f){function H$g(H$a,H$b,H$c,H$d,H$e){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===H$d&&(H$d=!1),H$g.__super.call(this),this._vertexDeclaration=H$a,this._vertexCount=H$b,this._bufferUsage=H$c,this._bufferType=34962,this._canRead=H$d,this.uri=H$e,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*H$b,this._bind(),H$h._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),H$d&&(this._buffer=new Float32Array(this._byteLength/4))}H$n(H$g,"laya.d3.graphics.VertexBuffer3D",H$f);var H$a=H$g.prototype;return H$a.bindWithIndexBuffer=function(H$a){H$a&&H$a._bind(),this._bind()},H$a.setData=function(H$a,H$b,H$c,H$d){if(void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0),void 0===H$d&&(H$d=4294967295),0===H$c&&4294967295===H$d||(H$a=new Float32Array(H$a.buffer,4*H$c,H$d)),this._bind(),H$h._gl.bufferSubData(this._bufferType,4*H$b,H$a),this._canRead)if(0!==H$b||0!==H$c||4294967295!==H$d){var H$e=this._buffer.length-H$b;H$e<H$d&&(H$d=H$e);for(var H$f=0;H$f<H$d;H$f++)this._buffer[H$b+H$f]=H$a[H$f]}else this._buffer=H$a},H$a.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},H$a.disposeResource=function(){for(var H$a=H$D.mainContext,H$b=this._vertexDeclaration.getVertexElements(),H$c=H$h._enableAtributes,H$d=0,H$e=H$b.length;H$d<H$e;H$d++)H$c[H$d]===this._glBuffer&&(H$a.disableVertexAttribArray(H$d),H$c[H$d]=null);H$f.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},H$o(0,H$a,"vertexDeclaration",function(){return this._vertexDeclaration}),H$o(0,H$a,"vertexCount",function(){return this._vertexCount}),H$o(0,H$a,"canRead",function(){return this._canRead}),H$g.create=function(H$a,H$b,H$c,H$d,H$e){return void 0===H$c&&(H$c=35044),void 0===H$d&&(H$d=!1),new H$g(H$a,H$b,H$c,H$d,H$e)},H$g}(H$h),H$Nb=function(H$a){function H$t(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,H$t.__super.call(this),this._type=3553}H$n(H$t,"laya.d3.resource.DataTexture2D",H$Db);var H$b=H$t.prototype;return H$b.genDebugMipmaps=function(){var H$a=[];return H$a.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),H$a.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),H$a.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),H$a.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),H$a.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),H$a.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),H$a.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),H$a.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),H$a.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),H$a.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),H$a},H$b._onTextureLoaded=function(H$a){},H$b._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var H$a=H$D.mainContext,H$b=this._source=H$a.createTexture(),H$c=this._width,H$d=this._height,H$e=H$E.curBindTexTarget,H$f=H$E.curBindTexValue,H$g=!1;if(H$E.bindTexture(H$a,this._type,H$b),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var H$h=0;H$a.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var H$i=0;H$i<this._mipmaps.length;H$i++){if(this._mipmaps[H$i].byteLength!=H$j*H$k*4)throw"mipmap size error  level:"+H$i;H$a.texSubImage2D(this._type,0,H$t.simLodRect[H$h++],H$t.simLodRect[H$h++],H$t.simLodRect[H$h++],H$t.simLodRect[H$h++],6408,5121,new Uint8Array(this._mipmaps[H$i]))}this.minFifter=9729,this.magFifter=9729}else{var H$j=this._width,H$k=this._height;for(H$h=0,H$a.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),H$i=0;H$i<this._mipmaps.length;H$i++){if(this._mipmaps[H$i].byteLength!=H$j*H$k*4)throw"mipmap size error  level:"+H$i;H$a.texImage2D(this._type,H$i,6408,H$j,H$k,0,6408,5121,new Uint8Array(this._mipmaps[H$i])),(H$j/=2)<1&&(H$j=1),(H$k/=2)<1&&(H$k=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&H$a.pixelStorei(H$a.UNPACK_ALIGNMENT,1),H$a.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var H$l=0,H$m=!1,H$n=!1;this._buffer.byteLength==4*H$c*H$d?(H$l=6408,H$m=!0):this._buffer.byteLength==3*H$c*H$d?(H$l=6407,H$n=!0):H$l=this._format,H$m||H$n?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),H$n&&H$a.pixelStorei(H$a.UNPACK_ALIGNMENT,1),H$a.texImage2D(this._type,0,H$l,H$c,H$d,0,H$l,5121,this._buffer)):H$a&&H$l==H$a.ALPHA?(H$a.texImage2D(3553,0,H$l,H$c,H$d,0,H$l,H$a.UNSIGNED_BYTE,this._buffer),H$g=!0):0!=H$l&&(H$a.compressedTexImage2D(3553,0,H$l,H$c,H$d,0,this._buffer),H$g=!0)}var H$o=this._minFifter,H$p=this._magFifter,H$q=0==this._wrapModeU?10497:33071,H$r=0==this._wrapModeV?10497:33071,H$s=H$u.isPOT(H$c,H$d);H$s?(this._mipmap||this._mipmaps?-1!==H$o||(H$o=9987):-1!==H$o||(H$o=9729),-1!==H$p||(H$p=9729),H$a.texParameteri(this._type,10241,H$o),H$a.texParameteri(this._type,10240,H$p),H$a.texParameteri(this._type,10242,H$q),H$a.texParameteri(this._type,10243,H$r),this._mipmap&&H$a.generateMipmap(this._type)):(-1!==H$o||(H$o=9729),-1!==H$p||(H$p=9729),H$a.texParameteri(this._type,10241,H$o),H$a.texParameteri(this._type,10240,H$p),H$a.texParameteri(this._type,10242,33071),H$a.texParameteri(this._type,10243,33071)),H$e&&H$f&&H$E.bindTexture(H$a,H$e,H$f),this.memorySize=H$g?this._buffer.length:H$s?H$c*H$d*4*(1+1/3):H$c*H$d*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},H$b.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},H$b.onAsynLoaded=function(H$a,H$b,H$c){var H$d;H$c&&(H$d=H$c[0].call(this,H$b)),H$d&&(this._width=H$d.width,this._height=H$d.height,this._buffer=H$d.data),this._src=H$a,this._size=new H$pb(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},H$b.getPixels=function(){return new Uint8Array(this._buffer)},H$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(H$D.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},H$o(0,H$b,"src",function(){return this._src}),H$t.create=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){if(void 0===H$d&&(H$d=9729),void 0===H$e&&(H$e=9729),void 0===H$f&&(H$f=!0),!H$a||H$a.byteLength<H$b*H$c*4)throw"DataTexture2D create error";var H$h=new H$t;return H$h.uri=H$g,H$h._buffer=H$a,H$h._width=H$b,H$h._height=H$c,H$h._mipmap=H$f,H$h._magFifter=H$d,H$h._minFifter=H$e,H$h._size=new H$pb(H$h._width,H$h._height),H$h._conchTexture?alert("怎么给runtime传递datatexture数据"):H$h.activeResource(),H$h},H$t.load=function(H$a,H$b,H$c,H$d,H$e){if(void 0===H$b&&(H$b=0),void 0===H$c&&(H$c=0),void 0===H$d&&(H$d=9729),void 0===H$e&&(H$e=9729),"mipmaps"===H$A.getFileExtension(H$a)){var H$f=H$v.loader.create(H$a,null,null,H$t,[function(H$a){this._mipmaps=[];var H$b=new Uint32Array(H$a);this._width=H$b[0];var H$c=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,H$c=1024),this._width!=H$c)throw"现在只支持512x256的环境贴图。当前的是"+H$b[0];this._height=H$b[1];for(var H$d=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,H$e=this._height,H$f=8;;){var H$g=H$d*H$e*4;if(H$f+H$g>H$a.byteLength)throw"load mipmaps data size error ";var H$h=new Uint8Array(H$a,H$f,H$g);if(this._mipmaps.push(H$h),H$f+=H$g,1==H$d&&1==H$e)break;(H$d/=2)<1&&(H$d=1),(H$e/=2)<1&&(H$e=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){H$f.simLodInfo=new Float32Array(40);for(var H$g=0;H$g<H$f.simLodInfo.length;)H$f.simLodInfo[H$g]=(H$t.simLodRect[H$g]+.5)/1024,H$g++,H$f.simLodInfo[H$g]=(H$t.simLodRect[H$g]+.5)/256,H$g++,H$f.simLodInfo[H$g]=Math.max(H$t.simLodRect[H$g]-1,.1)/1024,H$g++,H$f.simLodInfo[H$g]=Math.max(H$t.simLodRect[H$g]-1.5,.1)/256,H$g++}return H$f}if("number"==typeof H$b)return H$v.loader.create(H$a,null,null,H$t,[function(H$a){return this._width=H$b,this._height=H$c,this._buffer=H$a,null}]);if("function"==typeof H$b)return H$v.loader.create(H$a,null,null,H$t,[H$b]);throw new Error("unknown params.")},H$t.lodasatlas=!1,H$l(H$t,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),H$t}(),H$Ob=function(H$a){function H$b(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,H$b.__super.call(this)}H$n(H$b,"laya.d3.resource.models.PrimitiveMesh",H$Eb);var H$c=H$b.prototype;return H$v.imps(H$c,{"laya.d3.core.render.IRenderable":!0}),H$c._getVertexBuffer=function(H$a){return void 0===H$a&&(H$a=0),0===H$a?this._vertexBuffer:null},H$c._getVertexBuffers=function(){return null},H$c._getIndexBuffer=function(){return this._indexBuffer},H$c._getPositions=function(){var H$a,H$b=[],H$c=this._vertexBuffer.vertexDeclaration.getVertexElements(),H$d=0;for(H$d=0;H$d<H$c.length;H$d++){var H$e=H$c[H$d];if("vector3"===H$e.elementFormat&&0===H$e.elementUsage){H$a=H$e;break}}var H$f=this._vertexBuffer.getData();for(H$d=0;H$d<H$f.length;H$d+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var H$g=H$d+H$a.offset/4,H$h=new H$gb(H$f[H$g+0],H$f[H$g+1],H$f[H$g+2]);H$b.push(H$h)}return H$b},H$c.getRenderElement=function(H$a){return this},H$c.getRenderElementsCount=function(){return 1},H$c.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},H$c._beforeRender=function(H$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},H$c._render=function(H$a){H$D.mainContext.drawElements(4,this._numberIndices,5123,0),H$y.drawCall++,H$y.trianglesFaces+=this._numberIndices/3},H$o(0,H$c,"_vertexBufferCount",function(){return 1}),H$o(0,H$c,"triangleCount",function(){return this._indexBuffer.indexCount/3}),H$b}(),H$Pb=function(H$a){function H$b(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,H$b.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}H$n(H$b,"laya.d3.resource.models.Mesh",H$Eb);var H$c=H$b.prototype;return H$c._getPositions=function(){var H$a,H$b,H$c,H$d,H$e,H$f=[],H$g=0,H$h=0,H$i=0;if(0!==this._vertexBuffers.length){var H$j=this._vertexBuffers.length;for(H$g=0;H$g<H$j;H$g++){for(H$c=(H$a=this._vertexBuffers[H$g]).vertexDeclaration.getVertexElements(),H$h=0;H$h<H$c.length;H$h++)if("vector3"===(H$d=H$c[H$h]).elementFormat&&0===H$d.elementUsage){H$b=H$d;break}for(H$e=H$a.getData(),H$h=0;H$h<H$e.length;H$h+=H$a.vertexDeclaration.vertexStride/4)H$i=H$h+H$b.offset/4,H$f.push(new H$gb(H$e[H$i+0],H$e[H$i+1],H$e[H$i+2]))}}else{var H$k=this._subMeshes.length;for(H$g=0;H$g<H$k;H$g++){for(H$c=(H$a=this._subMeshes[H$g]._getVertexBuffer()).vertexDeclaration.getVertexElements(),H$h=0;H$h<H$c.length;H$h++)if("vector3"===(H$d=H$c[H$h]).elementFormat&&0===H$d.elementUsage){H$b=H$d;break}for(H$e=H$a.getData(),H$h=0;H$h<H$e.length;H$h+=H$a.vertexDeclaration.vertexStride/4)H$i=H$h+H$b.offset/4,H$f.push(new H$gb(H$e[H$i+0],H$e[H$i+1],H$e[H$i+2]))}}return H$f},H$c._setSubMeshes=function(H$a){this._subMeshes=H$a,this._subMeshCount=H$a.length;for(var H$b=0;H$b<this._subMeshCount;H$b++)H$a[H$b]._indexInMesh=H$b;this._positions=this._getPositions(),this._generateBoundingObject()},H$c.onAsynLoaded=function(H$a,H$b,H$c){var H$d=H$b[0],H$e=H$b[1];H$Wa.read(H$d,this,this._materials,this._subMeshes,H$e),this.completeCreate(),this._endLoaded()},H$c.getSubMesh=function(H$a){return this._subMeshes[H$a]},H$c.getSubMeshCount=function(){return this._subMeshes.length},H$c.getRenderElementsCount=function(){return this._subMeshes.length},H$c.getRenderElement=function(H$a){return this._subMeshes[H$a]},H$c.disposeResource=function(){for(var H$a=0;H$a<this._subMeshes.length;H$a++)this._subMeshes[H$a].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},H$o(0,H$c,"materials",function(){return this._materials.slice()}),H$o(0,H$c,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),H$b.load=function(H$a){return H$v.loader.create(H$a,null,null,H$b)},H$b}(),H$Qb=(function(H$a){function H$j(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===H$c&&(H$c=6408),void 0===H$d&&(H$d=5121),void 0===H$e&&(H$e=33189),void 0===H$f&&(H$f=!1),void 0===H$g&&(H$g=!1),void 0===H$h&&(H$h=-1),void 0===H$i&&(H$i=-1),H$j.__super.call(this),this._type=3553,this._width=H$a,this._height=H$b,this._size=new H$pb(H$a,H$b),this._surfaceFormat=H$c,this._surfaceType=H$d,this._depthStencilFormat=H$e,H$p.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=H$f,this._repeat=H$g,this._minFifter=H$h,this._magFifter=H$i,this.activeResource(),this._alreadyResolved=!0}H$n(H$j,"laya.d3.resource.RenderTexture",H$Db);var H$b=H$j.prototype;H$b.recreateResource=function(){var H$a=H$D.mainContext;this._frameBuffer=H$a.createFramebuffer(),this._source=H$a.createTexture();var H$b=H$E.curBindTexTarget,H$c=H$E.curBindTexValue;H$E.bindTexture(H$a,this._type,this._source),H$a.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var H$d=this._minFifter,H$e=this._magFifter,H$f=this._repeat?10497:33071;if(H$u.isPOT(this._width,this._height)?(this._mipmap?-1!==H$d||(H$d=9987):-1!==H$d||(H$d=9729),-1!==H$e||(H$e=9729),H$a.texParameteri(this._type,10241,H$d),H$a.texParameteri(this._type,10240,H$e),H$a.texParameteri(this._type,10242,H$f),H$a.texParameteri(this._type,10243,H$f),this._mipmap&&H$a.generateMipmap(this._type)):(-1!==H$d||(H$d=9729),-1!==H$e||(H$e=9729),H$a.texParameteri(this._type,10241,H$d),H$a.texParameteri(this._type,10240,H$e),H$a.texParameteri(this._type,10242,33071),H$a.texParameteri(this._type,10243,33071)),H$b&&H$c&&H$E.bindTexture(H$a,H$b,H$c),H$a.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=H$a.createRenderbuffer(),H$a.bindRenderbuffer(36161,this._depthStencilBuffer),H$a.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),H$a.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:H$a.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:H$a.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:H$a.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}H$a.framebufferTexture2D(36160,36064,3553,this._source,0),H$a.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},H$b.start=function(){H$D.mainContext.bindFramebuffer(36160,this.frameBuffer),(H$j._currentRenderTarget=this)._alreadyResolved=!1},H$b.end=function(){H$D.mainContext.bindFramebuffer(36160,null),H$j._currentRenderTarget=null,this._alreadyResolved=!0},H$b.getData=function(H$a,H$b,H$c,H$d){var H$e=H$D.mainContext;if(H$e.bindFramebuffer(36160,this._frameBuffer),!(36053===H$e.checkFramebufferStatus(36160)))return H$e.bindFramebuffer(36160,null),null;var H$f=new Uint8Array(this._width*this._height*4);return H$e.readPixels(H$a,H$b,H$c,H$d,this._surfaceFormat,this._surfaceType,H$f),H$e.bindFramebuffer(36160,null),H$f},H$b.disposeResource=function(){if(this._frameBuffer){var H$a=H$D.mainContext;H$a.deleteTexture(this._source),H$a.deleteFramebuffer(this._frameBuffer),H$a.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},H$o(0,H$b,"surfaceFormat",function(){return this._surfaceFormat}),H$o(0,H$b,"surfaceType",function(){return this._surfaceType}),H$o(0,H$b,"depthStencilFormat",function(){return this._depthStencilFormat}),H$o(0,H$b,"source",function(){return this._alreadyResolved?H$v.superGet(H$Db,this,"source"):null}),H$o(0,H$b,"depthStencilBuffer",function(){return this._depthStencilBuffer}),H$o(0,H$b,"frameBuffer",function(){return this._frameBuffer}),H$j._currentRenderTarget=null}(),function(H$a){function H$b(H$a){this._color=null,this._pixels=null,H$b.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new H$pb(this.width,this.height),this._color=H$a,this._pixels=new Uint8Array([255*H$a.x,255*H$a.y,255*H$a.z,255*H$a.w]),this.uri="SolidColorTexture2D_"+this.id}H$n(H$b,"laya.d3.resource.SolidColorTexture2D",H$Db);var H$c=H$b.prototype;return H$c._createWebGlTexture=function(){var H$a=H$D.mainContext,H$b=this._source=H$a.createTexture(),H$c=this._width,H$d=this._height,H$e=H$E.curBindTexTarget,H$f=H$E.curBindTexValue;H$E.bindTexture(H$a,this._type,H$b),H$a.texImage2D(this._type,0,6408,H$c,H$d,0,6408,5121,this._pixels);var H$g=this._minFifter,H$h=this._magFifter,H$i=this._repeat?10497:33071,H$j=H$u.isPOT(H$c,H$d);H$j?(this._mipmap?-1!==H$g||(H$g=9987):-1!==H$g||(H$g=9729),-1!==H$h||(H$h=9729),H$a.texParameteri(this._type,10241,H$g),H$a.texParameteri(this._type,10240,H$h),H$a.texParameteri(this._type,10242,H$i),H$a.texParameteri(this._type,10243,H$i),this._mipmap&&H$a.generateMipmap(this._type)):(-1!==H$g||(H$g=9729),-1!==H$h||(H$h=9729),H$a.texParameteri(this._type,10241,H$g),H$a.texParameteri(this._type,10240,H$h),H$a.texParameteri(this._type,10242,33071),H$a.texParameteri(this._type,10243,33071)),H$e&&H$f&&H$E.bindTexture(H$a,H$e,H$f),this.memorySize=H$j?H$c*H$d*4*(1+1/3):H$c*H$d*4},H$c.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},H$c.disposeResource=function(){this._source&&(H$D.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},H$l(H$b,["magentaTexture",function(){var H$a=new H$b(new H$hb(1,0,1,1));return H$a.lock=!0,this.magentaTexture=H$a},"grayTexture",function(){var H$a=new H$b(new H$hb(.5,.5,.5,1));return H$a.lock=!0,this.grayTexture=H$a}]),H$b}()),H$Rb=function(H$a){function H$e(H$a,H$b,H$c,H$d){this._canRead=!1,this._image=null,this._pixels=null,void 0===H$a&&(H$a=!1),void 0===H$b&&(H$b=!0),void 0===H$c&&(H$c=6408),void 0===H$d&&(H$d=!0),H$e.__super.call(this),this._type=3553,this._repeat=H$b,this._canRead=H$a,this._format=H$c,this._mipmap=H$d}H$n(H$e,"laya.d3.resource.Texture2D",H$Db);var H$b=H$e.prototype;return H$b._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var H$a=H$D.mainContext,H$b=this._source=H$a.createTexture(),H$c=this._width,H$d=this._height,H$e=H$E.curBindTexTarget,H$f=H$E.curBindTexValue;switch(H$E.bindTexture(H$a,this._type,H$b),this._format){case 6407:case 6408:this._canRead?H$a.texImage2D(this._type,0,this._format,H$c,H$d,0,this._format,5121,this._pixels):this._image instanceof laya.webgl.resource.WebGLImage?H$a.texImage2D(this._type,0,this._image._format,H$c,H$d,0,this._image._format,5121,this._image.atlasSource):H$a.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case H$D.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:H$a.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var H$g=this._minFifter,H$h=this._magFifter,H$i=this._repeat?10497:33071,H$j=0==this._wrapModeU?10497:33071,H$k=0==this._wrapModeV?10497:33071,H$l=H$u.isPOT(H$c,H$d);H$l?(this._mipmap?-1!==H$g||(H$g=9987):-1!==H$g||(H$g=9729),-1!==H$h||(H$h=9729),H$a.texParameteri(this._type,10241,H$g),H$a.texParameteri(this._type,10240,H$h),H$a.texParameteri(this._type,10242,H$i),H$a.texParameteri(this._type,10243,H$i),H$a.texParameteri(this._type,10242,H$j),H$a.texParameteri(this._type,10243,H$k),this._mipmap&&H$a.generateMipmap(this._type)):(-1!==H$g||(H$g=9729),-1!==H$h||(H$h=9729),H$a.texParameteri(this._type,10241,H$g),H$a.texParameteri(this._type,10240,H$h),H$a.texParameteri(this._type,10242,33071),H$a.texParameteri(this._type,10243,33071)),H$e&&H$f&&H$E.bindTexture(H$a,H$e,H$f),this._image.onload=null,this._image=null,this.memorySize=H$l?H$c*H$d*4*(1+1/3):H$c*H$d*4},H$b.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},H$b.onAsynLoaded=function(H$a,H$b,H$c){if(H$c){var H$d=H$c[0];void 0!==H$d&&(this._canRead=H$d);var H$e=H$c[1];void 0!==H$e&&(this._repeat=H$e);var H$f=H$c[2];void 0!==H$f&&(this._format=H$f);var H$g=H$c[3];void 0!==H$g&&(this._mipmap=H$g);var H$h=H$c.wrapModeU;void 0!==H$h&&(this._wrapModeU=H$h);var H$i=H$c.wrapModeV;void 0!==H$i&&(this._wrapModeV=H$i)}switch(this._format){case 6407:case 6408:var H$j=(this._image=H$b).width,H$k=H$b.height;this._width=H$j,this._height=H$k,this._size=new H$pb(H$j,H$k),this._canRead&&(H$p.isConchApp?H$b instanceof H$m.HTMLElement&&(this._pixels=new Uint8Array(H$b.getImageData(0,0,H$j,H$k))):(H$F.canvas.size(H$j,H$k),H$F.canvas.clear(),H$F.context.drawImage(H$b,0,0,H$j,H$k),this._pixels=new Uint8Array(H$F.context.getImageData(0,0,H$j,H$k).data.buffer)));break;case H$D.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var H$l=new H$w(H$b);H$l.readUTFBytes(4),H$l.readUTFBytes(2),H$l.getInt16();H$l.endian="bigEndian",this._width=H$l.getInt16(),this._height=H$l.getInt16(),this._size=new H$pb(this._width,this._height);H$l.getInt16(),H$l.getInt16();this._image=new Uint8Array(H$b,H$l.pos)}this.recreateResource(),this._endLoaded()},H$b.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},H$b.disposeResource=function(){this._source&&(H$D.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},H$o(0,H$b,"_src",function(){return this.url}),H$o(0,H$b,"src",function(){return this.url}),H$e.load=function(H$a){return H$v.loader.create(H$a,null,null,H$e)},H$e}(),H$Sb=function(H$b){function H$c(H$a,H$b){H$c.__super.call(this),void 0===H$a&&(H$a=.3),void 0===H$b&&(H$b=1e3),this._tempVector3=new H$gb,this._position=new H$gb,this._up=new H$gb,this._forward=new H$gb,this._right=new H$gb,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=H$pb.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=H$a,this._farPlane=H$b,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),H$v.stage.on("resize",this,this._onScreenSizeChanged)}H$n(H$c,"laya.d3.core.BaseCamera",H$b);var H$a=H$c.prototype;return H$a._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var H$a=this.scene._cameraPool,H$b=H$a.length-1,H$c=0;H$c<H$b;H$c++)if(H$a[H$c].renderingOrder>H$a[H$b].renderingOrder){var H$d=H$a[H$c];H$a[H$c]=H$a[H$b],H$a[H$b]=H$d}},H$a._calculateProjectionMatrix=function(){},H$a._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},H$a._prepareCameraToRender=function(){H$G._currentCameraCullingMask=this.cullingMask;var H$a=this._shaderValues;H$a.setValue(0,this.transform.position.elements),H$a.setValue(5,this.forward.elements),H$a.setValue(6,this.up.elements)},H$a._prepareCameraViewProject=function(H$a,H$b){var H$c=this._shaderValues;H$c.setValue(1,H$a.elements),H$c.setValue(2,H$b.elements)},H$a._renderCamera=function(H$a,H$b,H$c){},H$a.addLayer=function(H$a){29!==H$a.number&&30!=H$a.number&&(this.cullingMask=this.cullingMask|H$a.mask)},H$a.removeLayer=function(H$a){29!==H$a.number&&30!=H$a.number&&(this.cullingMask=this.cullingMask&~H$a.mask)},H$a.addAllLayers=function(){this.cullingMask=2147483647},H$a.removeAllLayers=function(){this.cullingMask=0|H$G.getLayerByNumber(29).mask|H$G.getLayerByNumber(30).mask},H$a.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},H$a.moveForward=function(H$a){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=H$a,this.transform.translate(this._tempVector3)},H$a.moveRight=function(H$a){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=H$a,this.transform.translate(this._tempVector3)},H$a.moveVertical=function(H$a){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=H$a,this.transform.translate(this._tempVector3,!1)},H$a._addSelfRenderObjects=function(){var H$a=this.scene._cameraPool,H$b=H$a.length;if(0<H$b){for(var H$c=H$b-1;0<=H$c;H$c--)if(this.renderingOrder<=H$a[H$c].renderingOrder){H$a.splice(H$c+1,0,this);break}}else H$a.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},H$a._clearSelfRenderObjects=function(){var H$a=this.scene._cameraPool;H$a.splice(H$a.indexOf(this),1)},H$a.destroy=function(H$a){void 0===H$a&&(H$a=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,H$v.stage.off("resize",this,this._onScreenSizeChanged),H$b.prototype.destroy.call(this,H$a)},H$o(0,H$a,"sky",function(){return this._sky},function(H$a){(this._sky=H$a)._ownerCamera=this}),H$o(0,H$a,"forward",function(){var H$a=this.transform.worldMatrix.elements,H$b=this._forward.elements;return H$b[0]=-H$a[8],H$b[1]=-H$a[9],H$b[2]=-H$a[10],this._forward}),H$o(0,H$a,"position",function(){var H$a=this.transform.worldMatrix.elements,H$b=this._position.elements;return H$b[0]=H$a[12],H$b[1]=H$a[13],H$b[2]=H$a[14],this._position}),H$o(0,H$a,"renderTarget",function(){return this._renderTarget},function(H$a){null!=(this._renderTarget=H$a)&&(this._renderTargetSize=H$a.size)}),H$o(0,H$a,"up",function(){var H$a=this.transform.worldMatrix.elements,H$b=this._up.elements;return H$b[0]=H$a[4],H$b[1]=H$a[5],H$b[2]=H$a[6],this._up}),H$o(0,H$a,"right",function(){var H$a=this.transform.worldMatrix.elements,H$b=this._right.elements;return H$b[0]=H$a[0],H$b[1]=H$a[1],H$b[2]=H$a[2],this._right}),H$o(0,H$a,"renderTargetSize",function(){return this._renderTargetSize},function(H$a){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=H$a,this._calculateProjectionMatrix()}),H$o(0,H$a,"fieldOfView",function(){return this._fieldOfView},function(H$a){this._fieldOfView=H$a,this._calculateProjectionMatrix()}),H$o(0,H$a,"nearPlane",function(){return this._nearPlane},function(H$a){this._nearPlane=H$a,this._calculateProjectionMatrix()}),H$o(0,H$a,"farPlane",function(){return this._farPlane},function(H$a){this._farPlane=H$a,this._calculateProjectionMatrix()}),H$o(0,H$a,"orthographic",function(){return this._orthographic},function(H$a){this._orthographic=H$a,this._calculateProjectionMatrix()}),H$o(0,H$a,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(H$a){this._orthographicVerticalSize=H$a,this._calculateProjectionMatrix()}),H$o(0,H$a,"renderingOrder",function(){return this._renderingOrder},function(H$a){this._renderingOrder=H$a,this._sortCamerasByRenderingOrder()}),H$c.CAMERAPOS=0,H$c.VIEWMATRIX=1,H$c.PROJECTMATRIX=2,H$c.VPMATRIX=3,H$c.VPMATRIX_NO_TRANSLATE=4,H$c.CAMERADIRECTION=5,H$c.CAMERAUP=6,H$c.ENVIRONMENTDIFFUSE=7,H$c.ENVIRONMENTSPECULAR=8,H$c.SIMLODINFO=9,H$c.DIFFUSEIRRADMATR=10,H$c.DIFFUSEIRRADMATG=11,H$c.DIFFUSEIRRADMATB=12,H$c.HDREXPOSURE=13,H$c.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",H$c.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",H$c.CLEARFLAG_SOLIDCOLOR=0,H$c.CLEARFLAG_SKY=1,H$c.CLEARFLAG_DEPTHONLY=2,H$c.CLEARFLAG_NONE=3,H$l(H$c,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new H$ab(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new H$ab},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new H$ab}]),H$c}(H$Ib),H$Tb=function(H$c){function H$b(H$a){this._render=null,this._geometryFilter=null,H$b.__super.call(this,H$a)}H$n(H$b,"laya.d3.core.RenderableSprite3D",H$c);var H$a=H$b.prototype;return H$a._addToInitStaticBatchManager=function(){},H$a._setBelongScene=function(H$a){H$c.prototype._setBelongScene.call(this,H$a),H$a._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},H$a._setUnBelongScene=function(){var H$a=this._scene._renderableSprite3Ds,H$b=H$a.indexOf(this);H$a.splice(H$b,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),H$c.prototype._setUnBelongScene.call(this)},H$a._update=function(H$a){(H$a.owner=this)._activeInHierarchy&&(this._updateComponents(H$a),this._render._updateOctreeNode(),this._lateUpdateComponents(H$a),H$y.spriteCount++,this._childs.length&&this._updateChilds(H$a))},H$a.destroy=function(H$a){void 0===H$a&&(H$a=!0),H$c.prototype.destroy.call(this,H$a),this._render._destroy(),this._render=null},H$b.__init__=function(){H$b.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=H$b.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),H$b.SAHDERDEFINE_LIGHTMAP=H$b.shaderDefines.registerDefine("LIGHTMAP")},H$b.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,H$b.SAHDERDEFINE_LIGHTMAP=4,H$b.LIGHTMAPSCALEOFFSET=2,H$b.LIGHTMAP=3,H$l(H$b,["shaderDefines",function(){return this.shaderDefines=new H$kb}]),H$b}(H$Ib),H$Ub=(function(H$a){function H$d(H$a,H$b,H$c){this._long=NaN,this._width=NaN,this._height=NaN,void 0===H$a&&(H$a=1),void 0===H$b&&(H$b=1),void 0===H$c&&(H$c=1),H$d.__super.call(this),this._long=H$a,this._width=H$b,this._height=H$c,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}H$n(H$d,"laya.d3.resource.models.BoxMesh",H$Ob);var H$b=H$d.prototype;H$b.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var H$a=H$Da.vertexDeclaration,H$b=(H$a.vertexStride,this._long/2),H$c=this._height/2,H$d=this._width/2,H$e=new Float32Array([-H$b,H$c,-H$d,0,1,0,0,0,H$b,H$c,-H$d,0,1,0,1,0,H$b,H$c,H$d,0,1,0,1,1,-H$b,H$c,H$d,0,1,0,0,1,-H$b,-H$c,-H$d,0,-1,0,0,1,H$b,-H$c,-H$d,0,-1,0,1,1,H$b,-H$c,H$d,0,-1,0,1,0,-H$b,-H$c,H$d,0,-1,0,0,0,-H$b,H$c,-H$d,-1,0,0,0,0,-H$b,H$c,H$d,-1,0,0,1,0,-H$b,-H$c,H$d,-1,0,0,1,1,-H$b,-H$c,-H$d,-1,0,0,0,1,H$b,H$c,-H$d,1,0,0,1,0,H$b,H$c,H$d,1,0,0,0,0,H$b,-H$c,H$d,1,0,0,0,1,H$b,-H$c,-H$d,1,0,0,1,1,-H$b,H$c,H$d,0,0,1,0,0,H$b,H$c,H$d,0,0,1,1,0,H$b,-H$c,H$d,0,0,1,1,1,-H$b,-H$c,H$d,0,0,1,0,1,-H$b,H$c,-H$d,0,0,-1,1,0,H$b,H$c,-H$d,0,0,-1,0,0,H$b,-H$c,-H$d,0,0,-1,0,1,-H$b,-H$c,-H$d,0,0,-1,1,1]),H$f=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new H$Mb(H$a,this._numberVertices,35044,!0),this._indexBuffer=new H$Lb("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(H$e),this._indexBuffer.setData(H$f),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},H$o(0,H$b,"long",function(){return this._long},function(H$a){this._long!==H$a&&(this._long=H$a,this.releaseResource(),this.activeResource())}),H$o(0,H$b,"width",function(){return this._width},function(H$a){this._width!==H$a&&(this._width=H$a,this.releaseResource(),this.activeResource())}),H$o(0,H$b,"height",function(){return this._height},function(H$a){this._height!==H$a&&(this._height=H$a,this.releaseResource(),this.activeResource())})}(),function(H$a){function H$g(H$a,H$b,H$c){void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=.3),void 0===H$c&&(H$c=1e3),this._viewMatrix=new H$ab,this._projectionMatrix=new H$ab,this._projectionViewMatrix=new H$ab,this._viewport=new H$ib(0,0,0,0),this._normalizedViewport=new H$ib(0,0,1,1),this._aspectRatio=H$a,this._boundFrustumUpdate=!0,this._boundFrustum=new H$Ya(H$ab.DEFAULT),H$g.__super.call(this,H$b,H$c),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}H$n(H$g,"laya.d3.core.Camera",H$Sb);var H$b=H$g.prototype;return H$b._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},H$b._parseCustomProps=function(H$a,H$b,H$c,H$d){var H$e=H$c.clearColor;this.clearColor=new H$hb(H$e[0],H$e[1],H$e[2],H$e[3]);var H$f=H$c.viewport;this.normalizedViewport=new H$ib(H$f[0],H$f[1],H$f[2],H$f[3])},H$b._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var H$a=this.orthographicVerticalSize*this.aspectRatio*.5,H$b=.5*this.orthographicVerticalSize;H$ab.createOrthoOffCenterRH(-H$a,H$a,-H$b,H$b,this.nearPlane,this.farPlane,this._projectionMatrix)}else H$ab.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},H$b._update=function(H$a){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,H$a)},H$b._renderCamera=function(H$a,H$b,H$c){var H$d,H$e;H$c.parallelSplitShadowMaps[0]&&H$c._renderShadowMap(H$a,H$b,this),(H$b.camera=this)._prepareCameraToRender(),H$c._preRenderUpdateComponents(H$b),H$d=H$b._viewMatrix=this.viewMatrix;var H$f=this._renderTarget;H$f?(H$f.start(),H$ab.multiply(H$Sb._invertYScaleMatrix,this._projectionMatrix,H$Sb._invertYProjectionMatrix),H$ab.multiply(H$Sb._invertYScaleMatrix,this.projectionViewMatrix,H$Sb._invertYProjectionViewMatrix),H$e=H$b._projectionMatrix=H$Sb._invertYProjectionMatrix,H$b._projectionViewMatrix=H$Sb._invertYProjectionViewMatrix):(H$e=H$b._projectionMatrix=this._projectionMatrix,H$b._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(H$d,H$e),H$b._viewport=this.viewport,H$c._preRenderScene(H$a,H$b,this.boundFrustum),H$c._clear(H$a,H$b),H$c._renderScene(H$a,H$b),H$c._postRenderUpdateComponents(H$b),H$f&&H$f.end()},H$b.viewportPointToRay=function(H$a,H$b){H$ob.calculateCursorRay(H$a,this.viewport,this._projectionMatrix,this.viewMatrix,null,H$b)},H$b.normalizedViewportPointToRay=function(H$a,H$b){var H$c=H$g._tempVector20,H$d=this.viewport,H$e=H$a.elements,H$f=H$c.elements;H$f[0]=H$e[0]*H$d.width,H$f[1]=H$e[1]*H$d.height,H$ob.calculateCursorRay(H$c,this.viewport,this._projectionMatrix,this.viewMatrix,null,H$b)},H$b.worldToViewportPoint=function(H$a,H$b){H$ab.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(H$a,this._projectionViewMatrix,H$b);var H$c=H$b.elements;H$c[0]=H$c[0]/H$v.stage.clientScaleX,H$c[1]=H$c[1]/H$v.stage.clientScaleY},H$b.worldToNormalizedViewportPoint=function(H$a,H$b){H$ab.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(H$a,this._projectionViewMatrix,H$b);var H$c=H$b.elements;H$c[0]=H$c[0]/H$v.stage.clientScaleX,H$c[1]=H$c[1]/H$v.stage.clientScaleY},H$b.convertScreenCoordToOrthographicCoord=function(H$a,H$b){if(this._orthographic){var H$c=H$W.clientWidth,H$d=H$W.clientHeight,H$e=this.orthographicVerticalSize*this.aspectRatio/H$c,H$f=this.orthographicVerticalSize/H$d,H$g=H$a.elements,H$h=H$b.elements;return H$h[0]=(-H$c/2+H$g[0])*H$e,H$h[1]=(H$d/2-H$g[1])*H$f,H$h[2]=(this.nearPlane-this.farPlane)*(H$g[2]+1)/2-this.nearPlane,H$gb.transformCoordinate(H$b,this.transform.worldMatrix,H$b),!0}return!1},H$o(0,H$b,"projectionViewMatrix",function(){return H$ab.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),H$o(0,H$b,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var H$a=this.viewport;return H$a.width/H$a.height},function(H$a){if(H$a<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=H$a,this._calculateProjectionMatrix()}),H$o(0,H$b,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),H$o(0,H$b,"needViewport",function(){var H$a=this.normalizedViewport;return 0===H$a.x&&0===H$a.y&&1===H$a.width&&1===H$a.height}),H$o(0,H$b,"viewport",function(){if(this._viewportExpressedInClipSpace){var H$a=this._normalizedViewport,H$b=this.renderTargetSize,H$c=H$b.width,H$d=H$b.height;this._viewport.x=H$a.x*H$c,this._viewport.y=H$a.y*H$d,this._viewport.width=H$a.width*H$c,this._viewport.height=H$a.height*H$d}return this._viewport},function(H$a){if(null!=this.renderTarget&&(H$a.x<0||H$a.y<0||0==H$a.width||0==H$a.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=H$a,this._calculateProjectionMatrix()}),H$o(0,H$b,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var H$a=this._viewport,H$b=this.renderTargetSize,H$c=H$b.width,H$d=H$b.height;this._normalizedViewport.x=H$a.x/H$c,this._normalizedViewport.y=H$a.y/H$d,this._normalizedViewport.width=H$a.width/H$c,this._normalizedViewport.height=H$a.height/H$d}return this._normalizedViewport},function(H$a){H$a.x<0&&(H$a.x=0,console.warn("Camera: viewport.x must large than 0.0.")),H$a.y<0&&(H$a.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<H$a.x+H$a.width&&(H$a.width=1-H$a.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<H$a.y+H$a.height&&(H$a.height=1-H$a.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=H$a,this._calculateProjectionMatrix()}),H$o(0,H$b,"projectionMatrix",function(){return this._projectionMatrix},function(H$a){this._projectionMatrix=H$a,this._useUserProjectionMatrix=!0}),H$o(0,H$b,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),H$l(H$g,["_tempVector20",function(){return this._tempVector20=new H$fb}]),H$g}()),H$Vb=function(H$c){function H$d(H$a,H$b){H$d.__super.call(this,H$b),this._geometryFilter=new H$Fb(this),this._render=new H$Gb(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),H$a&&(this._geometryFilter.sharedMesh=H$a)instanceof laya.d3.resource.models.Mesh&&(H$a.loaded?this._render.sharedMaterials=H$a.materials:H$a.once("loaded",this,this._applyMeshMaterials))}H$n(H$d,"laya.d3.core.MeshSprite3D",H$c);var H$a=H$d.prototype;return H$a._changeRenderObjectByMesh=function(H$a){var H$b=this._render._renderElements,H$c=H$b[H$a];H$c||(H$c=H$b[H$a]=new H$xb),H$c._render=this._render;var H$d=this._render.sharedMaterials[H$a];H$d||(H$d=H$Kb.defaultMaterial);var H$e=this._geometryFilter.sharedMesh.getRenderElement(H$a);return H$c._mainSortID=this._getSortID(H$e,H$d),H$c._sprite3D=this,H$c.renderObj=H$e,H$c._material=H$d,H$c},H$a._changeRenderObjectByMaterial=function(H$a,H$b){var H$c=this._render._renderElements[H$a];H$b||(H$b=H$Kb.defaultMaterial);var H$d=this._geometryFilter.sharedMesh.getRenderElement(H$a);return H$c._mainSortID=this._getSortID(H$d,H$b),H$c._sprite3D=this,H$c.renderObj=H$d,H$c._material=H$b,H$c},H$a._changeRenderObjectsByMesh=function(){var H$a=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=H$a;for(var H$b=0;H$b<H$a;H$b++)this._changeRenderObjectByMesh(H$b)},H$a._onMeshChanged=function(H$a){var H$b=H$a.sharedMesh;H$b.loaded?this._changeRenderObjectsByMesh():H$b.once("loaded",this,this._onMeshLoaded)},H$a._onMeshLoaded=function(H$a){H$a===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},H$a._onMaterialChanged=function(H$a,H$b,H$c){H$b<this._render._renderElements.length&&this._changeRenderObjectByMaterial(H$b,H$c)},H$a._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},H$a._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},H$a._parseCustomProps=function(H$a,H$b,H$c,H$d){var H$e=this.meshRender,H$f=H$c.lightmapIndex;null!=H$f&&(H$e.lightmapIndex=H$f);var H$g,H$h,H$i=H$c.lightmapScaleOffset;if(H$i&&(H$e.lightmapScaleOffset=new H$hb(H$i[0],H$i[1],H$i[2],H$i[3])),H$d.instanceParams)(H$g=H$d.instanceParams.loadPath)&&(H$h=H$r.getRes(H$b[H$g]),(this.meshFilter.sharedMesh=H$h).loaded?H$e.sharedMaterials=H$h.materials:H$h.once("loaded",this,this._applyMeshMaterials));else{(H$g=H$c.meshPath)&&(H$h=H$r.getRes(H$b[H$g]),this.meshFilter.sharedMesh=H$h);var H$j=H$c.materials;if(H$j){var H$k=H$e.sharedMaterials,H$l=H$j.length;H$k.length=H$l;for(var H$m=0;H$m<H$l;H$m++)H$k[H$m]=H$r.getRes(H$b[H$j[H$m].path]);H$e.sharedMaterials=H$k}}},H$a._applyMeshMaterials=function(H$a){for(var H$b=this._render.sharedMaterials,H$c=H$a.materials,H$d=0,H$e=H$c.length;H$d<H$e;H$d++)H$b[H$d]||(H$b[H$d]=H$c[H$d]);this._render.sharedMaterials=H$b},H$a._addToInitStaticBatchManager=function(){H$d._staticBatchManager._addInitBatchSprite(this)},H$a.cloneTo=function(H$a){var H$b=H$a;H$b._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var H$c=this._render,H$d=H$b._render;H$d.enable=H$c.enable,H$d.sharedMaterials=H$c.sharedMaterials,H$d.castShadow=H$c.castShadow;var H$e=H$c.lightmapScaleOffset;H$e&&(H$d.lightmapScaleOffset=H$e.clone()),H$d.lightmapIndex=H$c.lightmapIndex,H$d.receiveShadow=H$c.receiveShadow,H$d.sortingFudge=H$c.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,H$a)},H$a.destroy=function(H$a){if(void 0===H$a&&(H$a=!0),!this.destroyed){var H$b=this.meshFilter.sharedMesh;null!=H$b&&(H$b.loaded||H$b.off("loaded",this,this._applyMeshMaterials)),H$c.prototype.destroy.call(this,H$a),this._geometryFilter._destroy()}},H$o(0,H$a,"meshFilter",function(){return this._geometryFilter}),H$o(0,H$a,"meshRender",function(){return this._render}),H$d.__init__=function(){H$da._staticBatchManagers.push(H$d._staticBatchManager)},H$d.load=function(H$a){return H$v.loader.create(H$a,null,null,H$d)},H$l(H$d,["_staticBatchManager",function(){return this._staticBatchManager=new H$zb}]),H$d}(H$Tb)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H$a,H$b){"use strict";for(var H$c in Object.defineProperty(H$b,"__esModule",{value:!0}),Laya){var H$d=Laya[H$c];H$d&&H$d.__isclass&&(H$b[H$c]=H$d)}}),function(H$a,H$b,H$ea){H$ea.un,H$ea.uns;var H$c=H$ea.static,H$d=H$ea.class,H$f=H$ea.getset,H$p=H$ea.__newvec,H$h=laya.maths.Bezier,H$l=laya.utils.Browser,H$Da=laya.utils.Byte,H$e=(laya.events.Event,laya.events.EventDispatcher),H$g=laya.display.Graphics,H$i=(laya.resource.HTMLCanvas,laya.utils.Handler),H$j=laya.net.Loader,H$m=laya.maths.MathUtil,H$Ea=laya.maths.Matrix,H$q=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),H$k=(laya.renders.RenderContext,laya.resource.Resource),H$n=laya.utils.RunDriver,H$fa=laya.display.Sprite,H$o=laya.utils.Stat,H$Fa=laya.resource.Texture,H$r=(laya.net.URL,laya.utils.Utils),H$E=function(){function H$a(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return H$d(H$a,"laya.ani.AnimationContent"),H$a}(),H$F=function(){function H$a(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return H$d(H$a,"laya.ani.AnimationNodeContent"),H$a}(),H$t=function(){function H$a(){}return H$d(H$a,"laya.ani.AnimationParser01"),H$a.parse=function(H$a,H$b){var H$c=H$b.__getBuffer(),H$d=0,H$e=0,H$f=0,H$g=0,H$h=0,H$i=0,H$j=0,H$k=H$b.readUTFString();H$a._aniClassName=H$k;var H$l,H$m=H$b.readUTFString().split("\n"),H$n=H$b.getUint8(),H$o=H$b.getUint32(),H$p=H$b.getUint32();0<H$o&&(H$l=H$c.slice(H$o,H$p));var H$q=new H$Da(H$l);for(0<H$p&&(H$a._publicExtData=H$c.slice(H$p,H$c.byteLength)),H$a._useParent=!!H$b.getUint8(),H$a._anis.length=H$n,H$d=0;H$d<H$n;H$d++){var H$r=H$a._anis[H$d]=new H$E;H$r.nodes=new Array;var H$s=H$r.name=H$m[H$b.getUint16()];H$a._aniMap[H$s]=H$d,H$r.bone3DMap={},H$r.playTime=H$b.getFloat32(),H$r.playTime<=0&&console.error("播放时间不能为0  url="+H$a.url+" name="+H$r.name);var H$t=H$r.nodes.length=H$b.getUint8();for(H$e=H$r.totalKeyframeDatasLength=0;H$e<H$t;H$e++){var H$u=H$r.nodes[H$e]=new H$F;H$u.childs=[];var H$v=H$b.getInt16();0<=H$v&&(H$u.name=H$m[H$v],H$r.bone3DMap[H$u.name]=H$e),H$u.keyFrame=new Array,H$u.parentIndex=H$b.getInt16(),-1==H$u.parentIndex?H$u.parent=null:H$u.parent=H$r.nodes[H$u.parentIndex],H$u.lerpType=H$b.getUint8();var H$w=H$b.getUint32();H$q.pos=H$w;var H$x=H$u.keyframeWidth=H$q.getUint16();if(H$r.totalKeyframeDatasLength+=H$x,0===H$u.lerpType||1===H$u.lerpType)for(H$u.interpolationMethod=[],H$u.interpolationMethod.length=H$x,H$f=0;H$f<H$x;H$f++)H$u.interpolationMethod[H$f]=H$I.interpolation[H$q.getUint8()];null!=H$u.parent&&H$u.parent.childs.push(H$u);var H$y=H$b.getUint16();0<H$y&&(H$u.extenData=H$c.slice(H$b.pos,H$b.pos+H$y),H$b.pos+=H$y);var H$z,H$A=H$b.getUint16(),H$B=0;for(H$f=0,H$g=H$u.keyFrame.length=H$A;H$f<H$g;H$f++){if((H$z=H$u.keyFrame[H$f]=new H$G).duration=H$b.getFloat32(),H$z.startTime=H$B,2===H$u.lerpType){H$z.interpolationData=[];var H$C,H$D=H$b.getUint8();switch(H$C=H$b.getFloat32()){case 254:for(H$z.interpolationData.length=H$x,H$j=0;H$j<H$x;H$j++)H$z.interpolationData[H$j]=0;break;case 255:for(H$z.interpolationData.length=H$x,H$j=0;H$j<H$x;H$j++)H$z.interpolationData[H$j]=5;break;default:for(H$z.interpolationData.push(H$C),H$i=1;H$i<H$D;H$i++)H$z.interpolationData.push(H$b.getFloat32())}}for(H$z.data=new Float32Array(H$x),H$h=0;H$h<H$x;H$h++)H$z.data[H$h]=H$b.getFloat32(),-1e-8<H$z.data[H$h]&&H$z.data[H$h]<1e-8&&(H$z.data[H$h]=0);H$B+=H$z.duration}H$z.startTime=H$r.playTime,H$u.playTime=H$r.playTime,H$a._calculateKeyFrame(H$u,H$A,H$x)}}},H$a}(),H$u=function(){function H$v(){}return H$d(H$v,"laya.ani.AnimationParser02"),H$v.READ_DATA=function(){H$v._DATA.offset=H$v._reader.getUint32(),H$v._DATA.size=H$v._reader.getUint32()},H$v.READ_BLOCK=function(){for(var H$a=H$v._BLOCK.count=H$v._reader.getUint16(),H$b=H$v._BLOCK.blockStarts=[],H$c=H$v._BLOCK.blockLengths=[],H$d=0;H$d<H$a;H$d++)H$b.push(H$v._reader.getUint32()),H$c.push(H$v._reader.getUint32())},H$v.READ_STRINGS=function(){var H$a=H$v._reader.getUint32(),H$b=H$v._reader.getUint16(),H$c=H$v._reader.pos;H$v._reader.pos=H$a+H$v._DATA.offset;for(var H$d=0;H$d<H$b;H$d++)H$v._strings[H$d]=H$v._reader.readUTFString();H$v._reader.pos=H$c},H$v.parse=function(H$a,H$b){H$v._templet=H$a;(H$v._reader=H$b).__getBuffer();H$v.READ_DATA(),H$v.READ_BLOCK(),H$v.READ_STRINGS();for(var H$c=0,H$d=H$v._BLOCK.count;H$c<H$d;H$c++){var H$e=H$b.getUint16(),H$f=H$v._strings[H$e],H$g=H$v["READ_"+H$f];if(null==H$g)throw new Error("model file err,no this function:"+H$e+" "+H$f);H$g.call()}},H$v.READ_ANIMATIONS=function(){var H$a=H$v._reader,H$b=H$a.__getBuffer(),H$c=0,H$d=0,H$e=0,H$f=0,H$g=H$a.getUint16(),H$h=[];for(H$h.length=H$g,H$c=0;H$c<H$g;H$c++)H$h[H$c]=H$I.interpolation[H$a.getByte()];var H$i=H$a.getUint8();for(H$v._templet._anis.length=H$i,H$c=0;H$c<H$i;H$c++){var H$j=H$v._templet._anis[H$c]={};H$j.nodes=new Array;var H$k=H$j.name=H$v._strings[H$a.getUint16()];H$v._templet._aniMap[H$k]=H$c,H$j.bone3DMap={},H$j.playTime=H$a.getFloat32();var H$l=H$j.nodes.length=H$a.getInt16();for(H$d=H$j.totalKeyframeDatasLength=0;H$d<H$l;H$d++){var H$m=H$j.nodes[H$d]={};H$m.keyframeWidth=H$g,H$m.childs=[];var H$n=H$a.getUint16();0<=H$n&&(H$m.name=H$v._strings[H$n],H$j.bone3DMap[H$m.name]=H$d),H$m.keyFrame=new Array,H$m.parentIndex=H$a.getInt16(),-1==H$m.parentIndex?H$m.parent=null:H$m.parent=H$j.nodes[H$m.parentIndex],H$j.totalKeyframeDatasLength+=H$g,H$m.interpolationMethod=H$h,null!=H$m.parent&&H$m.parent.childs.push(H$m);var H$o=H$a.getUint16(),H$p=null,H$q=null;for(H$e=0,H$f=H$m.keyFrame.length=H$o;H$e<H$f;H$e++){(H$p=H$m.keyFrame[H$e]={}).startTime=H$a.getFloat32(),H$q&&(H$q.duration=H$p.startTime-H$q.startTime);var H$r=H$v._DATA.offset,H$s=H$a.getUint32(),H$t=4*H$g,H$u=H$b.slice(H$r+H$s,H$r+H$s+H$t);H$p.data=new Float32Array(H$u),H$q=H$p}H$p.duration=0,H$m.playTime=H$j.playTime,H$v._templet._calculateKeyFrame(H$m,H$o,H$g)}}},H$v._templet=null,H$v._reader=null,H$v._strings=[],H$c(H$v,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),H$v}(),H$Ga=(function(){function H$a(){}H$d(H$a,"laya.ani.AnimationState"),H$a.stopped=0,H$a.paused=1,H$a.playing=2}(),function(){function H$e(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new H$Ta,this.resultMatrix=new H$Ea,this._children=[]}H$d(H$e,"laya.ani.bone.Bone");var H$a=H$e.prototype;return H$a.setTempMatrix=function(H$a){this._tempMatrix=H$a;var H$b,H$c=0;for(H$c=0,H$b=this._children.length;H$c<H$b;H$c++)this._children[H$c].setTempMatrix(this._tempMatrix)},H$a.update=function(H$a){var H$b;if(this.rotation=this.transform.skX,H$a)H$b=this.resultTransform.getMatrix(),H$Ea.mul(H$b,H$a,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)H$b=this.resultTransform.getMatrix(),H$Ea.mul(H$b,this.parentBone.resultMatrix,this.resultMatrix);else{var H$c=this.parentBone,H$d=NaN,H$e=NaN,H$f=NaN,H$g=this.parentBone.resultMatrix;H$b=this.resultTransform.getMatrix();var H$h=H$g.a*H$b.tx+H$g.c*H$b.ty+H$g.tx,H$i=H$g.b*H$b.tx+H$g.d*H$b.ty+H$g.ty,H$j=new H$Ea;this.inheritRotation?(H$d=Math.atan2(H$c.resultMatrix.b,H$c.resultMatrix.a),H$e=Math.cos(H$d),H$f=Math.sin(H$d),H$j.setTo(H$e,H$f,-H$f,H$e,0,0),H$Ea.mul(this._tempMatrix,H$j,H$Ea.TEMP),H$Ea.TEMP.copyTo(H$j),H$b=this.resultTransform.getMatrix(),H$Ea.mul(H$b,H$j,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,H$b=this.resultTransform.getMatrix(),H$Ea.TEMP.identity(),H$Ea.TEMP.d=this.d,H$Ea.mul(H$b,H$Ea.TEMP,this.resultMatrix)),this.resultMatrix.tx=H$h,this.resultMatrix.ty=H$i}else(H$b=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var H$k,H$l=0;for(H$l=0,H$k=this._children.length;H$l<H$k;H$l++)this._children[H$l].update()},H$a.updateChild=function(){var H$a,H$b=0;for(H$b=0,H$a=this._children.length;H$b<H$a;H$b++)this._children[H$b].update()},H$a.setRotation=function(H$a){this._sprite&&(this._sprite.rotation=180*H$a/Math.PI)},H$a.updateDraw=function(H$a,H$b){H$e.ShowBones&&!H$e.ShowBones[this.name]||(this._sprite||(this._sprite=new H$fa,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),H$ea.stage.addChild(this._sprite)),this._sprite.x=H$a+this.resultMatrix.tx,this._sprite.y=H$b+this.resultMatrix.ty);var H$c,H$d=0;for(H$d=0,H$c=this._children.length;H$d<H$c;H$d++)this._children[H$d].updateDraw(H$a,H$b)},H$a.addChild=function(H$a){this._children.push(H$a),H$a.parentBone=this},H$a.findBone=function(H$a){if(this.name==H$a)return this;var H$b,H$c,H$d=0;for(H$d=0,H$b=this._children.length;H$d<H$b;H$d++)if(H$c=this._children[H$d].findBone(H$a))return H$c;return null},H$a.localToWorld=function(H$a){var H$b=H$a[0],H$c=H$a[1];H$a[0]=H$b*this.resultMatrix.a+H$c*this.resultMatrix.c+this.resultMatrix.tx,H$a[1]=H$b*this.resultMatrix.b+H$c*this.resultMatrix.d+this.resultMatrix.ty},H$e.ShowBones={},H$e}()),H$Ha=function(){function H$p(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}H$d(H$p,"laya.ani.bone.BoneSlot");var H$a=H$p.prototype;return H$a.showSlotData=function(H$a,H$b){void 0===H$b&&(H$b=!0),this.currSlotData=H$a,H$b&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},H$a.showDisplayByName=function(H$a){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(H$a))},H$a.replaceDisplayByName=function(H$a,H$b){if(this.currSlotData){var H$c;H$c=this.currSlotData.getDisplayByName(H$a);var H$d;H$d=this.currSlotData.getDisplayByName(H$b),this.replaceDisplayByIndex(H$c,H$d)}},H$a.replaceDisplayByIndex=function(H$a,H$b){this.currSlotData&&(this._replaceDic[H$a]=H$b,this.displayIndex==H$a&&this.showDisplayByIndex(H$a))},H$a.showDisplayByIndex=function(H$a){if(null!=this._replaceDic[H$a]&&(H$a=this._replaceDic[H$a]),this.currSlotData&&-1<H$a&&H$a<this.currSlotData.displayArr.length){if(this.displayIndex=H$a,this.currDisplayData=this.currSlotData.displayArr[H$a],this.currDisplayData){var H$b=this.currDisplayData.name;this.currTexture=this.templet.getTexture(H$b),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!H$q.isConchApp||H$q.isConchApp&&"0.9.15"<H$fa.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},H$a.replaceSkin=function(H$a){this._diyTexture=H$a,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},H$a.setParentMatrix=function(H$a){this._parentMatrix=H$a},H$a.draw=function(H$a,H$b,H$c,H$d){if(void 0===H$c&&(H$c=!1),void 0===H$d&&(H$d=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var H$e,H$f=this.currTexture;switch(this._diyTexture&&(H$f=this._diyTexture),this.currDisplayData.type){case 0:if(H$a){var H$g=this.getDisplayMatrix();if(this._parentMatrix){var H$h=!1;if(H$g){var H$i;if(H$Ea.mul(H$g,this._parentMatrix,H$Ea.TEMP),H$i=H$c?(null==this._resultMatrix&&(this._resultMatrix=new H$Ea),this._resultMatrix):new H$Ea,!H$q.isWebGL&&this.currDisplayData.uvs||H$q.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var H$j=H$p._tempMatrix;H$j.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(H$j.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(H$h=!0,H$j.rotate(-Math.PI/2)),H$Ea.mul(H$j,H$Ea.TEMP,H$i)}else H$Ea.TEMP.copyTo(H$i);H$h?H$a.drawTexture(H$f,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,H$i):H$a.drawTexture(H$f,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,H$i)}}}break;case 1:if(null==(H$e=H$c?(null==this._skinSprite&&(this._skinSprite=H$p.createSkinMesh()),this._skinSprite):H$p.createSkinMesh()))return;var H$k;if(null==this.currDisplayData.bones){var H$l,H$m=this.currDisplayData.weights;this.deformData&&(H$m=this.deformData),H$l=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=H$x.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=H$x.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=H$m;this.currDisplayData.triangles.length;H$k=this.currDisplayData.triangles,H$e.init2(H$f,null,H$k,this._mVerticleArr,H$l);var H$n,H$o=this.getDisplayMatrix();if(this._parentMatrix)if(H$o)H$Ea.mul(H$o,this._parentMatrix,H$Ea.TEMP),H$n=H$c?(null==this._resultMatrix&&(this._resultMatrix=new H$Ea),this._resultMatrix):new H$Ea,H$Ea.TEMP.copyTo(H$n),H$e.transform=H$n}else this.skinMesh(H$b,H$e,H$d);H$a.drawSkin(H$e);break;case 2:if(null==(H$e=H$c?(null==this._skinSprite&&(this._skinSprite=H$p.createSkinMesh()),this._skinSprite):H$p.createSkinMesh()))return;this.skinMesh(H$b,H$e,H$d),H$a.drawSkin(H$e)}}},H$a.skinMesh=function(H$a,H$b,H$c){var H$d,H$e=this.currTexture,H$f=this.currDisplayData.bones;H$d=this._diyTexture?(H$e=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=H$x.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=H$x.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var H$g,H$h,H$i=this.currDisplayData.weights,H$j=this.currDisplayData.triangles,H$k=0,H$l=0,H$m=0,H$n=NaN,H$o=NaN,H$p=0,H$q=0,H$r=[],H$s=0,H$t=0;if(this.deformData&&0<this.deformData.length){var H$u=0;for(H$s=0,H$t=H$f.length;H$s<H$t;){for(H$m=H$f[H$s++]+H$s,H$l=H$k=0;H$s<H$m;H$s++)H$h=H$a[H$f[H$s]],H$n=H$i[H$p]+this.deformData[H$u++],H$o=H$i[H$p+1]+this.deformData[H$u++],H$q=H$i[H$p+2],H$k+=(H$n*H$h.a+H$o*H$h.c+H$h.tx)*H$q,H$l+=(H$n*H$h.b+H$o*H$h.d+H$h.ty)*H$q,H$p+=3;H$r.push(H$k,H$l)}}else for(H$s=0,H$t=H$f.length;H$s<H$t;){for(H$m=H$f[H$s++]+H$s,H$l=H$k=0;H$s<H$m;H$s++)H$h=H$a[H$f[H$s]],H$n=H$i[H$p],H$o=H$i[H$p+1],H$q=H$i[H$p+2],H$k+=(H$n*H$h.a+H$o*H$h.c+H$h.tx)*H$q,H$l+=(H$n*H$h.b+H$o*H$h.d+H$h.ty)*H$q,H$p+=3;H$r.push(H$k,H$l)}this._mVerticleArr=H$r,H$g=H$j,H$b.init2(H$e,null,H$g,this._mVerticleArr,H$d)},H$a.drawBonePoint=function(H$a){H$a&&this._parentMatrix&&H$a.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},H$a.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},H$a.getMatrix=function(){return this._resultMatrix},H$a.copy=function(){var H$a=new H$p;return H$a.type="copy",H$a.name=this.name,H$a.attachmentName=this.attachmentName,H$a.srcDisplayIndex=this.srcDisplayIndex,H$a.parent=this.parent,H$a.displayIndex=this.displayIndex,H$a.templet=this.templet,H$a.currSlotData=this.currSlotData,H$a.currTexture=this.currTexture,H$a.currDisplayData=this.currDisplayData,H$a},H$p.createSkinMesh=function(){return H$q.isWebGL||H$q.isConchApp?H$n.skinAniSprite():(H$q.isWebGL,null)},H$c(H$p,["_tempMatrix",function(){return this._tempMatrix=new H$Ea}]),H$p}(),H$Ia=function(){function H$a(){this.skinName=null,this.deformSlotDataList=[]}return H$d(H$a,"laya.ani.bone.DeformAniData"),H$a}(),H$Ja=function(){function H$a(){this.deformSlotDisplayList=[]}return H$d(H$a,"laya.ani.bone.DeformSlotData"),H$a}(),H$Ka=function(){function H$a(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}H$d(H$a,"laya.ani.bone.DeformSlotDisplayData");var H$b=H$a.prototype;return H$b.binarySearch1=function(H$a,H$b){var H$c=0,H$d=H$a.length-2;if(0==H$d)return 1;for(var H$e=H$d>>>1;;){if(H$a[Math.floor(H$e+1)]<=H$b?H$c=H$e+1:H$d=H$e,H$c==H$d)return H$c+1;H$e=H$c+H$d>>>1}return 0},H$b.apply=function(H$a,H$b,H$c){if(void 0===H$c&&(H$c=1),H$a+=.05,!(this.timeList.length<=0)){var H$d=0;if(!(H$a<this.timeList[0])){var H$e=this.vectices[0].length,H$f=[],H$g=this.binarySearch1(this.timeList,H$a);if(this.frameIndex=H$g,H$a>=this.timeList[this.timeList.length-1]){var H$h=this.vectices[this.vectices.length-1];if(H$c<1)for(H$d=0;H$d<H$e;H$d++)H$f[H$d]+=(H$h[H$d]-H$f[H$d])*H$c;else for(H$d=0;H$d<H$e;H$d++)H$f[H$d]=H$h[H$d];this.deformData=H$f}else{this.tweenKeyList[this.frameIndex];var H$i=this.vectices[this.frameIndex-1],H$j=this.vectices[this.frameIndex],H$k=this.timeList[this.frameIndex-1],H$l=this.timeList[this.frameIndex];H$c=this.tweenKeyList[H$g-1]?(H$a-H$k)/(H$l-H$k):0;var H$m=NaN;for(H$d=0;H$d<H$e;H$d++)H$m=H$i[H$d],H$f[H$d]=H$m+(H$j[H$d]-H$m)*H$c;this.deformData=H$f}}}},H$a}(),H$La=function(){function H$a(){this.time=NaN,this.drawOrder=[]}return H$d(H$a,"laya.ani.bone.DrawOrderData"),H$a}(),H$Ma=function(){function H$a(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return H$d(H$a,"laya.ani.bone.EventData"),H$a}(),H$s=function(){function H$da(H$a,H$b){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=H$a,this._targetBone=H$b[H$a.targetBoneIndex],this.isSpine=H$a.isSpine,null==this._bones&&(this._bones=[]);for(var H$c=this._bones.length=0,H$d=H$a.boneIndexs.length;H$c<H$d;H$c++)this._bones.push(H$b[H$a.boneIndexs[H$c]]);this.name=H$a.name,this.mix=H$a.mix,this.bendDirection=H$a.bendDirection}H$d(H$da,"laya.ani.bone.IkConstraint");var H$a=H$da.prototype;return H$a.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},H$a._applyIk1=function(H$a,H$b,H$c,H$d){var H$e=H$a.parentBone,H$f=1/(H$e.resultMatrix.a*H$e.resultMatrix.d-H$e.resultMatrix.b*H$e.resultMatrix.c),H$g=H$b-H$e.resultMatrix.tx,H$h=H$c-H$e.resultMatrix.ty,H$i=(H$g*H$e.resultMatrix.d-H$h*H$e.resultMatrix.c)*H$f-H$a.transform.x,H$j=(H$h*H$e.resultMatrix.a-H$g*H$e.resultMatrix.b)*H$f-H$a.transform.y,H$k=Math.atan2(H$j,H$i)*H$da.radDeg-0-H$a.transform.skX;H$a.transform.scX<0&&(H$k+=180),180<H$k?H$k-=360:H$k<-180&&(H$k+=360),H$a.transform.skX=H$a.transform.skY=H$a.transform.skX+H$k*H$d,H$a.update()},H$a.updatePos=function(H$a,H$b){this._sp&&this._sp.pos(H$a,H$b)},H$a._applyIk2=function(H$a,H$b,H$c,H$d,H$e,H$f){if(0!=H$f){var H$g=H$a.resultTransform.x,H$h=H$a.resultTransform.y,H$i=H$a.transform.scX,H$j=H$a.transform.scY,H$k=H$b.transform.scX,H$l=0,H$m=0,H$n=0;H$n=H$i<0?(H$i=-H$i,H$l=180,-1):(H$l=0,1),H$j<0&&(H$j=-H$j,H$n=-H$n),H$m=H$k<0?(H$k=-H$k,180):0;var H$o=H$b.resultTransform.x,H$p=NaN,H$q=NaN,H$r=NaN,H$s=H$a.resultMatrix.a,H$t=H$a.resultMatrix.c,H$u=H$a.resultMatrix.b,H$v=H$a.resultMatrix.d,H$w=Math.abs(H$i-H$j)<=1e-4;H$r=H$w?(H$q=H$s*H$o+H$t*(H$p=H$b.resultTransform.y)+H$a.resultMatrix.tx,H$u*H$o+H$v*H$p+H$a.resultMatrix.ty):(H$p=0,H$q=H$s*H$o+H$a.resultMatrix.tx,H$u*H$o+H$a.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new H$fa,H$ea.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(H$c,H$d,15,"#ffff00"),this._sp.graphics.drawCircle(H$q,H$r,15,"#ff00ff")),H$a.setRotation(Math.atan2(H$r-H$a.resultMatrix.ty,H$q-H$a.resultMatrix.tx));var H$x=H$a.parentBone;H$s=H$x.resultMatrix.a,H$t=H$x.resultMatrix.c,H$u=H$x.resultMatrix.b;var H$y=1/(H$s*(H$v=H$x.resultMatrix.d)-H$t*H$u),H$z=H$c-H$x.resultMatrix.tx,H$A=H$d-H$x.resultMatrix.ty,H$B=(H$z*H$v-H$A*H$t)*H$y-H$g,H$C=(H$A*H$s-H$z*H$u)*H$y-H$h,H$D=((H$z=H$q-H$x.resultMatrix.tx)*H$v-(H$A=H$r-H$x.resultMatrix.ty)*H$t)*H$y-H$g,H$E=(H$A*H$s-H$z*H$u)*H$y-H$h,H$F=Math.sqrt(H$D*H$D+H$E*H$E),H$G=H$b.length*H$k,H$H=NaN,H$I=NaN;if(H$w){var H$J=(H$B*H$B+H$C*H$C-H$F*H$F-(H$G*=H$i)*H$G)/(2*H$F*H$G);H$J<-1?H$J=-1:1<H$J&&(H$J=1),H$I=Math.acos(H$J)*H$e,H$s=H$F+H$G*H$J,H$t=H$G*Math.sin(H$I),H$H=Math.atan2(H$C*H$s-H$B*H$t,H$B*H$s+H$C*H$t)}else{var H$K=(H$s=H$i*H$G)*H$s,H$L=(H$t=H$j*H$G)*H$t,H$M=H$B*H$B+H$C*H$C,H$N=Math.atan2(H$C,H$B),H$O=-2*H$L*H$F,H$P=H$L-H$K;if(0<(H$v=H$O*H$O-4*H$P*(H$u=H$L*H$F*H$F+H$K*H$M-H$K*H$L))){var H$Q=Math.sqrt(H$v);H$O<0&&(H$Q=-H$Q);var H$R=(H$Q=-(H$O+H$Q)/2)/H$P,H$S=H$u/H$Q,H$T=Math.abs(H$R)<Math.abs(H$S)?H$R:H$S;H$T*H$T<=H$M&&(H$A=Math.sqrt(H$M-H$T*H$T)*H$e,H$H=H$N-Math.atan2(H$A,H$T),H$I=Math.atan2(H$A/H$j,(H$T-H$F)/H$i))}var H$U=0,H$V=Number.MAX_VALUE,H$W=0,H$X=0,H$Y=0,H$Z=0,H$$=0,H$_=0;H$Z<(H$v=(H$z=H$F+H$s)*H$z)&&(H$Y=0,H$Z=H$v,H$$=H$z),(H$v=(H$z=H$F-H$s)*H$z)<H$V&&(H$U=Math.PI,H$V=H$v,H$W=H$z);var H$aa=Math.acos(-H$s*H$F/(H$K-H$L));(H$v=(H$z=H$s*Math.cos(H$aa)+H$F)*H$z+(H$A=H$t*Math.sin(H$aa))*H$A)<H$V&&(H$U=H$aa,H$V=H$v,H$W=H$z,H$X=H$A),H$Z<H$v&&(H$Y=H$aa,H$Z=H$v,H$$=H$z,H$_=H$A),H$I=H$M<=(H$V+H$Z)/2?(H$H=H$N-Math.atan2(H$X*H$e,H$W),H$U*H$e):(H$H=H$N-Math.atan2(H$_*H$e,H$$),H$Y*H$e)}var H$ba=Math.atan2(H$p,H$o)*H$n,H$ca=H$a.resultTransform.skX;180<(H$H=(H$H-H$ba)*H$da.radDeg+H$l-H$ca)?H$H-=360:H$H<-180&&(H$H+=360),H$a.resultTransform.x=H$g,H$a.resultTransform.y=H$h,H$a.resultTransform.skX=H$a.resultTransform.skY=H$ca+H$H*H$f,H$ca=H$b.resultTransform.skX,180<(H$I=((H$I+H$ba)*H$da.radDeg-0)*H$n+H$m-(H$ca%=360))?H$I-=360:H$I<-180&&(H$I+=360),H$b.resultTransform.x=H$o,H$b.resultTransform.y=H$p,H$b.resultTransform.skX=H$b.resultTransform.skY=H$b.resultTransform.skY+H$I*H$f,H$a.update()}},H$a._applyIk3=function(H$a,H$b,H$c,H$d,H$e,H$f){if(0!=H$f){var H$g,H$h,H$i=H$b.resultMatrix.a*H$b.length,H$j=H$b.resultMatrix.b*H$b.length,H$k=H$i*H$i+H$j*H$j,H$l=Math.sqrt(H$k),H$m=H$a.resultMatrix.tx,H$n=H$a.resultMatrix.ty,H$o=H$b.resultMatrix.tx,H$p=H$b.resultMatrix.ty,H$q=H$o-H$m,H$r=H$p-H$n,H$s=H$q*H$q+H$r*H$r,H$t=Math.sqrt(H$s),H$u=(H$q=H$c-H$a.resultMatrix.tx)*H$q+(H$r=H$d-H$a.resultMatrix.ty)*H$r,H$v=Math.sqrt(H$u);if(H$l+H$t<=H$v||H$v+H$l<=H$t||H$v+H$t<=H$l){var H$w=NaN;H$o=H$m+(H$w=H$l+H$t<=H$v?1:-1)*(H$c-H$m)*H$t/H$v,H$p=H$n+H$w*(H$d-H$n)*H$t/H$v}else{var H$x=(H$s-H$k+H$u)/(2*H$u),H$y=Math.sqrt(H$s-H$x*H$x*H$u)/H$v,H$z=H$m+H$q*H$x,H$A=H$n+H$r*H$x,H$B=-H$r*H$y,H$C=H$q*H$y;H$p=0<H$e?(H$o=H$z-H$B,H$A-H$C):(H$o=H$z+H$B,H$A+H$C)}H$g=H$o,H$h=H$p,this.isDebug&&(this._sp||(this._sp=new H$fa,H$ea.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(H$m,H$n,15,"#ff00ff"),this._sp.graphics.drawCircle(H$c,H$d,15,"#ffff00"),this._sp.graphics.drawCircle(H$g,H$h,15,"#ff00ff"));var H$D,H$E;H$D=Math.atan2(H$h-H$a.resultMatrix.ty,H$g-H$a.resultMatrix.tx),H$a.setRotation(H$D),(H$E=H$da._tempMatrix).identity(),H$E.rotate(H$D),H$E.scale(H$a.resultMatrix.getScaleX(),H$a.resultMatrix.getScaleY()),H$E.translate(H$a.resultMatrix.tx,H$a.resultMatrix.ty),H$E.copyTo(H$a.resultMatrix),H$a.updateChild();var H$F,H$G;H$F=Math.atan2(H$d-H$h,H$c-H$g),H$b.setRotation(H$F),(H$G=H$da._tempMatrix).identity(),H$G.rotate(H$F),H$G.scale(H$b.resultMatrix.getScaleX(),H$b.resultMatrix.getScaleY()),H$G.translate(H$g,H$h),H$E.copyTo(H$b.resultMatrix),H$b.updateChild()}},H$c(H$da,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new H$Ea}]),H$da}(),H$Na=function(){function H$a(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return H$d(H$a,"laya.ani.bone.IkConstraintData"),H$a}(),H$v=function(){function H$G(H$a,H$b){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=H$a,this.position=H$a.position,this.spacing=H$a.spacing,this.rotateMix=H$a.rotateMix,this.translateMix=H$a.translateMix,this.bones=[];for(var H$c=this.data.bones,H$d=0,H$e=H$c.length;H$d<H$e;H$d++)this.bones.push(H$b[H$c[H$d]])}H$d(H$G,"laya.ani.bone.PathConstraint");var H$a=H$G.prototype;return H$a.apply=function(H$a,H$b){if(this.target){var H$c=this.translateMix,H$d=this.translateMix,H$e=0<H$d,H$f=this.data.spacingMode,H$g="length"==H$f,H$h=this.data.rotateMode,H$i="tangent"==H$h,H$j="chainScale"==H$h,H$k=[],H$l=this.bones.length,H$m=H$i?H$l:H$l+1,H$n=[];(this._spaces=H$n)[0]=this.position;var H$o=this.spacing;if(H$j||H$g)for(var H$p=0,H$q=H$m-1;H$p<H$q;){var H$r=this.bones[H$p],H$s=H$r.length,H$t=H$s*H$r.resultMatrix.a,H$u=H$s*H$r.resultMatrix.b;H$s=Math.sqrt(H$t*H$t+H$u*H$u),H$j&&(H$k[H$p]=H$s),H$n[++H$p]=H$g?Math.max(0,H$s+H$o):H$o}else for(H$p=1;H$p<H$m;H$p++)H$n[H$p]=H$o;var H$v=this.computeWorldPositions(this.target,H$a,H$b,H$m,H$i,"percent"==this.data.positionMode,"percent"==H$f);if(this._debugKey){for(H$p=0;H$p<H$v.length;H$p++)H$b.drawCircle(H$v[H$p++],H$v[H$p++],5,"#00ff00");var H$w=[];for(H$p=0;H$p<H$v.length;H$p++)H$w.push(H$v[H$p++],H$v[H$p++]);H$b.drawLines(0,0,H$w,"#ff0000")}var H$x=H$v[0],H$y=H$v[1],H$z=this.data.offsetRotation,H$A="chain"==H$h&&0==H$z,H$B=NaN;for(H$p=0,H$B=3;H$p<H$l;H$p++,H$B+=3){(H$r=this.bones[H$p]).resultMatrix.tx+=(H$x-H$r.resultMatrix.tx)*H$c,H$r.resultMatrix.ty+=(H$y-H$r.resultMatrix.ty)*H$c;var H$C=(H$t=H$v[H$B])-H$x,H$D=(H$u=H$v[H$B+1])-H$y;if(H$j&&0!=(H$s=H$k[H$p])){var H$E=(Math.sqrt(H$C*H$C+H$D*H$D)/H$s-1)*H$d+1;H$r.resultMatrix.a*=H$E,H$r.resultMatrix.c*=H$E}if(H$x=H$t,H$y=H$u,H$e){var H$F=H$r.resultMatrix.a,H$G=H$r.resultMatrix.c,H$H=H$r.resultMatrix.b,H$I=H$r.resultMatrix.d,H$J=NaN,H$K=NaN,H$L=NaN;H$J=H$i?H$v[H$B-1]:0==H$n[H$p+1]?H$v[H$B+2]:Math.atan2(H$D,H$C),H$J-=Math.atan2(H$H,H$F)-H$z/180*Math.PI,H$A&&(H$K=Math.cos(H$J),H$L=Math.sin(H$J),H$x+=((H$s=H$r.length)*(H$K*H$F-H$L*H$H)-H$C)*H$d,H$y+=(H$s*(H$L*H$F+H$K*H$H)-H$D)*H$d),H$J>Math.PI?H$J-=2*Math.PI:H$J<-Math.PI&&(H$J+=2*Math.PI),H$J*=H$d,H$K=Math.cos(H$J),H$L=Math.sin(H$J),H$r.resultMatrix.a=H$K*H$F-H$L*H$H,H$r.resultMatrix.c=H$K*H$G-H$L*H$I,H$r.resultMatrix.b=H$L*H$F+H$K*H$H,H$r.resultMatrix.d=H$L*H$G+H$K*H$I}}}},H$a.computeWorldVertices2=function(H$a,H$b,H$c,H$d,H$e,H$f){var H$g,H$h,H$i=H$a.currDisplayData.bones,H$j=H$a.currDisplayData.weights,H$k=H$a.currDisplayData.triangles,H$l=0,H$m=0,H$n=0,H$o=0,H$p=0,H$q=0,H$r=0,H$s=0,H$t=0,H$u=0,H$v=0;if(null!=H$i){for(H$l=0;H$l<H$c;H$l+=2)H$m+=(H$o=H$i[H$m])+1,H$n+=H$o;var H$w=H$b;for(H$p=H$f,H$q=3*H$n;H$p<H$d;H$p+=2){for(H$s=H$r=0,H$o=H$i[H$m++],H$o+=H$m;H$m<H$o;H$m++,H$q+=3){H$g=H$w[H$i[H$m]].resultMatrix,H$t=H$j[H$q],H$u=H$j[H$q+1];var H$x=H$j[H$q+2];H$r+=(H$t*H$g.a+H$u*H$g.c+H$g.tx)*H$x,H$s+=(H$t*H$g.b+H$u*H$g.d+H$g.ty)*H$x}H$e[H$p]=H$r,H$e[H$p+1]=H$s}}else{var H$y,H$z;if(H$k||(H$k=H$j),H$a.deformData&&(H$k=H$a.deformData),H$y=H$a.parent,H$b)for(H$v=H$b.length,H$l=0;H$l<H$v;H$l++)if(H$b[H$l].name==H$y){H$h=H$b[H$l];break}H$h&&(H$z=H$h.resultMatrix),H$z||(H$z=H$G._tempMt);var H$A=H$z.tx,H$B=H$z.ty,H$C=H$z.a,H$D=H$z.b,H$E=H$z.c,H$F=H$z.d;for(H$h&&(H$F*=H$h.d),H$m=H$c,H$p=H$f;H$p<H$d;H$m+=2,H$p+=2)H$t=H$k[H$m],H$u=H$k[H$m+1],H$e[H$p]=H$t*H$C+H$u*H$D+H$A,H$e[H$p+1]=-(H$t*H$E+H$u*H$F+H$B)}},H$a.computeWorldPositions=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g){H$a.currDisplayData.bones,H$a.currDisplayData.weights,H$a.currDisplayData.triangles;var H$h=[],H$i=0,H$j=H$a.currDisplayData.verLen,H$k=this.position,H$l=this._spaces,H$m=[],H$n=[],H$o=H$j/6,H$p=-1,H$q=NaN,H$r=0,H$s=0,H$t=NaN,H$u=NaN,H$v=NaN,H$w=NaN;if(H$o--,H$j-=4,this.computeWorldVertices2(H$a,H$b,2,H$j,H$h,0),this._debugKey)for(H$i=0;H$i<H$h.length;)H$c.drawCircle(H$h[H$i++],H$h[H$i++],10,"#ff0000");H$m=H$h,this._curves.length=H$o;var H$x=this._curves,H$y=H$m[H$q=0],H$z=H$m[1],H$A=0,H$B=0,H$C=0,H$D=0,H$E=0,H$F=0,H$G=NaN,H$H=NaN,H$I=NaN,H$J=NaN,H$K=NaN,H$L=NaN,H$M=NaN,H$N=NaN,H$O=0;for(H$i=0,H$O=2;H$i<H$o;H$i++,H$O+=6)H$A=H$m[H$O],H$B=H$m[H$O+1],H$C=H$m[H$O+2],H$D=H$m[H$O+3],H$K=2*(H$G=.1875*(H$y-2*H$A+H$C))+(H$I=.09375*(3*(H$A-H$C)-H$y+(H$E=H$m[H$O+4]))),H$L=2*(H$H=.1875*(H$z-2*H$B+H$D))+(H$J=.09375*(3*(H$B-H$D)-H$z+(H$F=H$m[H$O+5]))),H$M=.75*(H$A-H$y)+H$G+.16666667*H$I,H$N=.75*(H$B-H$z)+H$H+.16666667*H$J,H$q+=Math.sqrt(H$M*H$M+H$N*H$N),H$M+=H$K,H$N+=H$L,H$K+=H$I,H$L+=H$J,H$q+=Math.sqrt(H$M*H$M+H$N*H$N),H$M+=H$K,H$N+=H$L,H$q+=Math.sqrt(H$M*H$M+H$N*H$N),H$M+=H$K+H$I,H$N+=H$L+H$J,H$q+=Math.sqrt(H$M*H$M+H$N*H$N),H$x[H$i]=H$q,H$y=H$E,H$z=H$F;if(H$f&&(H$k*=H$q),H$g)for(H$i=0;H$i<H$d;H$i++)H$l[H$i]*=H$q;var H$P=this._segments,H$Q=0,H$R=0;for(H$R=H$s=H$r=H$i=0;H$i<H$d;H$i++,H$r+=3)if((H$t=H$k+=H$u=H$l[H$i])<0)this.addBeforePosition(H$t,H$m,0,H$n,H$r);else if(H$q<H$t)this.addAfterPosition(H$t-H$q,H$m,H$j-4,H$n,H$r);else{for(;;H$s++)if(!((H$w=H$x[H$s])<H$t)){0==H$s?H$t/=H$w:H$t=(H$t-(H$v=H$x[H$s-1]))/(H$w-H$v);break}if(H$s!=H$p){var H$S=6*(H$p=H$s);for(H$y=H$m[H$S],H$z=H$m[H$S+1],H$A=H$m[H$S+2],H$B=H$m[H$S+3],H$C=H$m[H$S+4],H$D=H$m[H$S+5],H$K=2*(H$G=.03*(H$y-2*H$A+H$C))+(H$I=.006*(3*(H$A-H$C)-H$y+(H$E=H$m[H$S+6]))),H$L=2*(H$H=.03*(H$z-2*H$B+H$D))+(H$J=.006*(3*(H$B-H$D)-H$z+(H$F=H$m[H$S+7]))),H$M=.3*(H$A-H$y)+H$G+.16666667*H$I,H$N=.3*(H$B-H$z)+H$H+.16666667*H$J,H$Q=Math.sqrt(H$M*H$M+H$N*H$N),H$P[0]=H$Q,H$S=1;H$S<8;H$S++)H$M+=H$K,H$N+=H$L,H$K+=H$I,H$L+=H$J,H$Q+=Math.sqrt(H$M*H$M+H$N*H$N),H$P[H$S]=H$Q;H$M+=H$K,H$N+=H$L,H$Q+=Math.sqrt(H$M*H$M+H$N*H$N),H$P[8]=H$Q,H$M+=H$K+H$I,H$N+=H$L+H$J,H$Q+=Math.sqrt(H$M*H$M+H$N*H$N),H$P[9]=H$Q,H$R=0}for(H$t*=H$Q;;H$R++)if(!((H$w=H$P[H$R])<H$t)){0==H$R?H$t/=H$w:H$t=H$R+(H$t-(H$v=H$P[H$R-1]))/(H$w-H$v);break}this.addCurvePosition(.1*H$t,H$y,H$z,H$A,H$B,H$C,H$D,H$E,H$F,H$n,H$r,H$e||0<H$i&&0==H$u)}return H$n},H$a.addBeforePosition=function(H$a,H$b,H$c,H$d,H$e){var H$f=H$b[H$c],H$g=H$b[H$c+1],H$h=H$b[H$c+2]-H$f,H$i=H$b[H$c+3]-H$g,H$j=Math.atan2(H$i,H$h);H$d[H$e]=H$f+H$a*Math.cos(H$j),H$d[H$e+1]=H$g+H$a*Math.sin(H$j),H$d[H$e+2]=H$j},H$a.addAfterPosition=function(H$a,H$b,H$c,H$d,H$e){var H$f=H$b[H$c+2],H$g=H$b[H$c+3],H$h=H$f-H$b[H$c],H$i=H$g-H$b[H$c+1],H$j=Math.atan2(H$i,H$h);H$d[H$e]=H$f+H$a*Math.cos(H$j),H$d[H$e+1]=H$g+H$a*Math.sin(H$j),H$d[H$e+2]=H$j},H$a.addCurvePosition=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j,H$k,H$l){0==H$a&&(H$a=1e-4);var H$m=H$a*H$a,H$n=H$m*H$a,H$o=1-H$a,H$p=H$o*H$o,H$q=H$p*H$o,H$r=H$o*H$a,H$s=3*H$r,H$t=H$o*H$s,H$u=H$s*H$a,H$v=H$b*H$q+H$d*H$t+H$f*H$u+H$h*H$n,H$w=H$c*H$q+H$e*H$t+H$g*H$u+H$i*H$n;H$j[H$k]=H$v,H$j[H$k+1]=H$w,H$j[H$k+2]=H$l?Math.atan2(H$w-(H$c*H$p+H$e*H$r*2+H$g*H$m),H$v-(H$b*H$p+H$d*H$r*2+H$f*H$m)):0},H$G.NONE=-1,H$G.BEFORE=-2,H$G.AFTER=-3,H$c(H$G,["_tempMt",function(){return this._tempMt=new H$Ea}]),H$G}(),H$Oa=function(){function H$a(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return H$d(H$a,"laya.ani.bone.PathConstraintData"),H$a}(),H$Pa=function(){function H$a(){this.name=null,this.slotArr=[]}return H$d(H$a,"laya.ani.bone.SkinData"),H$a}(),H$Qa=function(){function H$a(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}H$d(H$a,"laya.ani.bone.SkinSlotDisplayData");var H$b=H$a.prototype;return H$b.createTexture=function(H$a){return this.texture||(this.texture=new H$Fa(H$a.bitmap,this.uvs),H$a.bitmap.alphaTexture&&(this.texture.alphaTexture=new H$Fa(H$a.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=H$a.height,this.texture.height=H$a.width,this.texture.offsetX=-H$a.offsetX,this.texture.offsetY=-H$a.offsetY,this.texture.sourceWidth=H$a.sourceHeight,this.texture.sourceHeight=H$a.sourceWidth):(this.texture.width=H$a.width,this.texture.height=H$a.height,this.texture.offsetX=-H$a.offsetX,this.texture.offsetY=-H$a.offsetY,this.texture.sourceWidth=H$a.sourceWidth,this.texture.sourceHeight=H$a.sourceHeight),H$q.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},H$b.destory=function(){this.texture&&this.texture.destroy()},H$a}(),H$Ra=function(){function H$a(){this.name=null,this.displayArr=[]}return H$d(H$a,"laya.ani.bone.SlotData"),H$a.prototype.getDisplayByName=function(H$a){for(var H$b=0,H$c=this.displayArr.length;H$b<H$c;H$b++)if(this.displayArr[H$b].attachmentName==H$a)return H$b;return-1},H$a}(),H$w=function(){function H$a(H$a,H$b){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=H$p(2,0),this._data=H$a,null==this._bones&&(this._bones=[]),this.target=H$b[H$a.targetIndex];var H$c,H$d=0;for(H$d=0,H$c=H$a.boneIndexs.length;H$d<H$c;H$d++)this._bones.push(H$b[H$a.boneIndexs[H$d]]);this.rotateMix=H$a.rotateMix,this.translateMix=H$a.translateMix,this.scaleMix=H$a.scaleMix,this.shearMix=H$a.shearMix}return H$d(H$a,"laya.ani.bone.TfConstraint"),H$a.prototype.apply=function(){for(var H$a,H$b=this.target.resultMatrix.a,H$c=this.target.resultMatrix.b,H$d=this.target.resultMatrix.c,H$e=this.target.resultMatrix.d,H$f=0,H$g=this._bones.length;H$f<H$g;H$f++){if(H$a=this._bones[H$f],0<this.rotateMix){var H$h=H$a.resultMatrix.a,H$i=H$a.resultMatrix.b,H$j=H$a.resultMatrix.c,H$k=H$a.resultMatrix.d,H$l=Math.atan2(H$d,H$b)-Math.atan2(H$j,H$h)+this._data.offsetRotation*Math.PI/180;H$l>Math.PI?H$l-=2*Math.PI:H$l<-Math.PI&&(H$l+=2*Math.PI),H$l*=this.rotateMix;var H$m=Math.cos(H$l),H$n=Math.sin(H$l);H$a.resultMatrix.a=H$m*H$h-H$n*H$j,H$a.resultMatrix.b=H$m*H$i-H$n*H$k,H$a.resultMatrix.c=H$n*H$h+H$m*H$j,H$a.resultMatrix.d=H$n*H$i+H$m*H$k}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),H$a.resultMatrix.tx+=(this._temp[0]-H$a.resultMatrix.tx)*this.translateMix,H$a.resultMatrix.ty+=(this._temp[1]-H$a.resultMatrix.ty)*this.translateMix,H$a.updateChild()),0<this.scaleMix){var H$o=Math.sqrt(H$a.resultMatrix.a*H$a.resultMatrix.a+H$a.resultMatrix.c*H$a.resultMatrix.c),H$p=Math.sqrt(H$b*H$b+H$d*H$d),H$q=1e-5<H$o?(H$o+(H$p-H$o+this._data.offsetScaleX)*this.scaleMix)/H$o:0;H$a.resultMatrix.a*=H$q,H$a.resultMatrix.c*=H$q,H$o=Math.sqrt(H$a.resultMatrix.b*H$a.resultMatrix.b+H$a.resultMatrix.d*H$a.resultMatrix.d),H$p=Math.sqrt(H$c*H$c+H$e*H$e),H$q=1e-5<H$o?(H$o+(H$p-H$o+this._data.offsetScaleY)*this.scaleMix)/H$o:0,H$a.resultMatrix.b*=H$q,H$a.resultMatrix.d*=H$q}if(0<this.shearMix){H$i=H$a.resultMatrix.b,H$k=H$a.resultMatrix.d;var H$r=Math.atan2(H$k,H$i);(H$l=Math.atan2(H$e,H$c)-Math.atan2(H$d,H$b)-(H$r-Math.atan2(H$a.resultMatrix.c,H$a.resultMatrix.a)))>Math.PI?H$l-=2*Math.PI:H$l<-Math.PI&&(H$l+=2*Math.PI),H$l=H$r+(H$l+this._data.offsetShearY*Math.PI/180)*this.shearMix,H$q=Math.sqrt(H$i*H$i+H$k*H$k),H$a.resultMatrix.b=Math.cos(H$l)*H$q,H$a.resultMatrix.d=Math.sin(H$l)*H$q}}},H$a}(),H$Sa=function(){function H$a(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return H$d(H$a,"laya.ani.bone.TfConstraintData"),H$a}(),H$Ta=function(){function H$a(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}H$d(H$a,"laya.ani.bone.Transform");var H$b=H$a.prototype;return H$b.initData=function(H$a){null!=H$a.x&&(this.x=H$a.x),null!=H$a.y&&(this.y=H$a.y),null!=H$a.skX&&(this.skX=H$a.skX),null!=H$a.skY&&(this.skY=H$a.skY),null!=H$a.scX&&(this.scX=H$a.scX),null!=H$a.scY&&(this.scY=H$a.scY)},H$b.getMatrix=function(){var H$a;return(H$a=this.mMatrix?this.mMatrix:this.mMatrix=new H$Ea).identity(),H$a.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(H$a,this.skewX*Math.PI/180,this.skewY*Math.PI/180),H$a.rotate(this.skX*Math.PI/180),H$a.translate(this.x,this.y),H$a},H$b.skew=function(H$a,H$b,H$c){var H$d=Math.sin(H$c),H$e=Math.cos(H$c),H$f=Math.sin(H$b),H$g=Math.cos(H$b);return H$a.setTo(H$a.a*H$g-H$a.b*H$d,H$a.a*H$f+H$a.b*H$e,H$a.c*H$g-H$a.d*H$d,H$a.c*H$f+H$a.d*H$e,H$a.tx*H$g-H$a.ty*H$d,H$a.tx*H$f+H$a.ty*H$e),H$a},H$a}(),H$x=function(){function H$a(){}return H$d(H$a,"laya.ani.bone.UVTools"),H$a.getRelativeUV=function(H$a,H$b,H$c){var H$d=H$a[0],H$e=H$a[2]-H$a[0],H$f=H$a[1],H$g=H$a[5]-H$a[1];H$c||(H$c=[]),H$c.length=H$b.length;var H$h,H$i=0;H$h=H$c.length;var H$j=1/H$e,H$k=1/H$g;for(H$i=0;H$i<H$h;H$i+=2)H$c[H$i]=(H$b[H$i]-H$d)*H$j,H$c[H$i+1]=(H$b[H$i+1]-H$f)*H$k;return H$c},H$a.getAbsoluteUV=function(H$a,H$b,H$c){if(0==H$a[0]&&0==H$a[1]&&1==H$a[4]&&1==H$a[5])return H$c?(H$r.copyArray(H$c,H$b),H$c):H$b;var H$d=H$a[0],H$e=H$a[2]-H$a[0],H$f=H$a[1],H$g=H$a[5]-H$a[1];H$c||(H$c=[]),H$c.length=H$b.length;var H$h,H$i=0;for(H$h=H$c.length,H$i=0;H$i<H$h;H$i+=2)H$c[H$i]=H$b[H$i]*H$e+H$d,H$c[H$i+1]=H$b[H$i+1]*H$g+H$f;return H$c},H$a}(),H$G=function(){function H$a(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return H$d(H$a,"laya.ani.KeyFramesContent"),H$a}(),H$y=function(){function H$k(){}return H$d(H$k,"laya.ani.math.BezierLerp"),H$k.getBezierRate=function(H$a,H$b,H$c,H$d,H$e){var H$f=H$k._getBezierParamKey(H$b,H$c,H$d,H$e),H$g=100*H$f+H$a;if(H$k._bezierResultCache[H$g])return H$k._bezierResultCache[H$g];var H$h,H$i=H$k._getBezierPoints(H$b,H$c,H$d,H$e,H$f),H$j=0;for(H$h=H$i.length,H$j=0;H$j<H$h;H$j+=2)if(H$a<=H$i[H$j])return H$k._bezierResultCache[H$g]=H$i[H$j+1],H$i[H$j+1];return H$k._bezierResultCache[H$g]=1},H$k._getBezierParamKey=function(H$a,H$b,H$c,H$d){return 100*(100*(100*(100*H$a+H$b)+H$c)+H$d)},H$k._getBezierPoints=function(H$a,H$b,H$c,H$d,H$e){return H$k._bezierPointsCache[H$e]?H$k._bezierPointsCache[H$e]:(H$f=[0,0,H$a,H$b,H$c,H$d,1,1],H$g=(new H$h).getBezierPoints(H$f,100,3),H$k._bezierPointsCache[H$e]=H$g);var H$f,H$g},H$k._bezierResultCache={},H$k._bezierPointsCache={},H$k}(),H$z=function(H$a){function H$b(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,H$b.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}H$d(H$b,"laya.ani.AnimationPlayer",H$e);var H$c=H$b.prototype;return H$ea.imps(H$c,{"laya.resource.IDestroy":!0}),H$c._onTempletLoadedComputeFullKeyframeIndices=function(H$a,H$b,H$c){this._templet===H$c&&this._cachePlayRate===H$a&&this._cacheFrameRate===H$b&&this._computeFullKeyframeIndices()},H$c._computeFullKeyframeIndices=function(){for(var H$a=this._fullFrames=[],H$b=this._templet,H$c=this._cacheFrameRateInterval*this._cachePlayRate,H$d=0,H$e=H$b.getAnimationCount();H$d<H$e;H$d++){for(var H$f=[],H$g=0,H$h=H$b.getAnimation(H$d).nodes.length;H$g<H$h;H$g++){for(var H$i=H$b.getAnimation(H$d).nodes[H$g],H$j=Math.floor(H$i.playTime/H$c+.01),H$k=new Uint16Array(H$j+1),H$l=-1,H$m=0,H$n=H$i.keyFrame.length;H$m<H$n;H$m++){var H$o=H$i.keyFrame[H$m],H$p=H$o.startTime,H$q=H$p+H$o.duration+H$c;do{for(var H$r=Math.floor(H$p/H$c+.5),H$s=H$l+1;H$s<H$r;H$s++)H$k[H$s]=H$m;H$k[H$l=H$r]=H$m,H$p+=H$c}while(H$p<=H$q)}H$f.push(H$k)}H$a.push(H$f)}},H$c._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},H$c._calculatePlayDuration=function(){if(0!==this.state){var H$a=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=H$a),this._playEnd>H$a&&(this._playEnd=H$a),this._playDuration=this._playEnd-this._playStart}},H$c._setPlayParams=function(H$a,H$b){this._currentTime=H$a,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/H$b+.01),0),this._currentFrameTime=this._currentKeyframeIndex*H$b},H$c._setPlayParamsWhenStop=function(H$a,H$b){this._currentTime=H$a,this._currentKeyframeIndex=Math.max(Math.floor(H$a/H$b+.01),0),this._currentFrameTime=this._currentKeyframeIndex*H$b,this._currentAnimationClipIndex=-1},H$c._update=function(H$a){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var H$b=this._cacheFrameRateInterval*this._cachePlayRate,H$c=0;this._startUpdateLoopCount!==H$o.loopCount&&(H$c=H$a*this.playbackRate,this._elapsedPlaybackTime+=H$c);var H$d=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=H$d)return this._setPlayParamsWhenStop(H$d,H$b),void this.event("stopped");if(H$c+=this._currentTime,0<H$d)if(H$d<=H$c)do{if(H$c-=H$d,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(H$d,H$b),this._stopWhenCircleFinish=!1,void this.event("stopped");H$c<H$d&&(this._setPlayParams(H$c,H$b),this.event("complete"))}while(H$d<=H$c);else this._setPlayParams(H$c,H$b);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(H$d,H$b),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},H$c._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},H$c.play=function(H$a,H$b,H$c,H$d,H$e){if(void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=1),void 0===H$c&&(H$c=2147483647),void 0===H$d&&(H$d=0),void 0===H$e&&(H$e=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(H$c<0||H$d<0||H$e<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==H$e&&H$e<H$d)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=H$b,this._overallDuration=H$c,this._playStart=H$d,this._playEnd=H$e,this._paused=!1,this._currentAnimationClipIndex=H$a,this._currentKeyframeIndex=0,this._startUpdateLoopCount=H$o.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},H$c.playByFrame=function(H$a,H$b,H$c,H$d,H$e,H$f){void 0===H$a&&(H$a=0),void 0===H$b&&(H$b=1),void 0===H$c&&(H$c=2147483647),void 0===H$d&&(H$d=0),void 0===H$e&&(H$e=0),void 0===H$f&&(H$f=30);var H$g=1e3/H$f;this.play(H$a,H$b,H$c,H$d*H$g,H$e*H$g)},H$c.stop=function(H$a){void 0===H$a&&(H$a=!0),H$a?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},H$f(0,H$c,"playEnd",function(){return this._playEnd}),H$f(0,H$c,"templet",function(){return this._templet},function(H$a){0===!this.state&&this.stop(!0),this._templet!==H$a&&((this._templet=H$a).loaded?this._computeFullKeyframeIndices():H$a.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),H$f(0,H$c,"playStart",function(){return this._playStart}),H$f(0,H$c,"playDuration",function(){return this._playDuration}),H$f(0,H$c,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),H$f(0,H$c,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),H$f(0,H$c,"overallDuration",function(){return this._overallDuration}),H$f(0,H$c,"currentFrameTime",function(){return this._currentFrameTime}),H$f(0,H$c,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),H$f(0,H$c,"currentPlayTime",function(){return this._currentTime+this._playStart}),H$f(0,H$c,"cachePlayRate",function(){return this._cachePlayRate},function(H$a){this._cachePlayRate!==H$a&&(this._cachePlayRate=H$a,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[H$a,this._cacheFrameRate])))}),H$f(0,H$c,"cacheFrameRate",function(){return this._cacheFrameRate},function(H$a){this._cacheFrameRate!==H$a&&(this._cacheFrameRate=H$a,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,H$a])))}),H$f(0,H$c,"currentTime",null,function(H$a){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(H$a<this._playStart||H$a>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=H$o.loopCount;var H$b=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=H$a,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/H$b),0),this._currentFrameTime=this._currentKeyframeIndex*H$b}}),H$f(0,H$c,"paused",function(){return this._paused},function(H$a){(this._paused=H$a)&&this.event("paused")}),H$f(0,H$c,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),H$f(0,H$c,"destroyed",function(){return this._destroyed}),H$b}(),H$H=function(H$a){function H$b(){H$b.__super.call(this),H$q.isConchNode&&(this.drawSkin=function(H$a){H$a.transform||(H$a.transform=H$Ea.EMPTY),this._addCmd([H$a]),this.setSkinMesh&&this.setSkinMesh(H$a._ps,H$a.mVBData,H$a.mEleNum,0,H$a.mTexture,H$a.transform)})}return H$d(H$b,"laya.ani.GraphicsAni",H$g),H$b.prototype.drawSkin=function(H$a){var H$b=[H$a];this._saveToCmd(H$q._context._drawSkin,H$b)},H$b.create=function(){return H$b._caches.pop()||new H$b},H$b.recycle=function(H$a){H$a.clear(),H$b._caches.push(H$a)},H$b._caches=[],H$b}(),H$I=function(H$a){function H$s(){this._aniMap={},this.unfixedLastAniIndex=-1,H$s.__super.call(this),this._anis=new Array}H$d(H$s,"laya.ani.AnimationTemplet",H$k);var H$b=H$s.prototype;return H$b.parse=function(H$a){var H$b=new H$Da(H$a);this._aniVersion=H$b.readUTFString(),H$t.parse(this,H$b)},H$b._calculateKeyFrame=function(H$a,H$b,H$c){var H$d=H$a.keyFrame;H$d[H$b]=H$d[0];for(var H$e=0;H$e<H$b;H$e++){var H$f=H$d[H$e];H$f.nextData=0===H$f.duration?H$f.data:H$d[H$e+1].data}H$d.length--},H$b.onAsynLoaded=function(H$a,H$b,H$c){var H$d=new H$Da(H$b);switch(this._aniVersion=H$d.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":H$u.parse(this,H$d);break;default:H$t.parse(this,H$d)}this._endLoaded()},H$b.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},H$b.getAnimationCount=function(){return this._anis.length},H$b.getAnimation=function(H$a){return this._anis[H$a]},H$b.getAniDuration=function(H$a){return this._anis[H$a].playTime},H$b.getNodes=function(H$a){return this._anis[H$a].nodes},H$b.getNodeIndexWithName=function(H$a,H$b){return this._anis[H$a].bone3DMap[H$b]},H$b.getNodeCount=function(H$a){return this._anis[H$a].nodes.length},H$b.getTotalkeyframesLength=function(H$a){return this._anis[H$a].totalKeyframeDatasLength},H$b.getPublicExtData=function(){return this._publicExtData},H$b.getAnimationDataWithCache=function(H$a,H$b,H$c,H$d){var H$e=H$b[H$c];if(H$e){var H$f=H$e[H$a];return H$f?H$f[H$d]:null}return null},H$b.setAnimationDataWithCache=function(H$a,H$b,H$c,H$d,H$e){var H$f=H$b[H$c]||(H$b[H$c]={});(H$f[H$a]||(H$f[H$a]=[]))[H$d]=H$e},H$b.getOriginalData=function(H$a,H$b,H$c,H$d,H$e){for(var H$f=this._anis[H$a].nodes,H$g=0,H$h=0,H$i=H$f.length,H$j=0;H$h<H$i;H$h++){var H$k,H$l=H$f[H$h];H$k=H$l.keyFrame[H$c[H$h][H$d]],H$l.dataOffset=H$j;var H$m=H$e-H$k.startTime,H$n=H$l.lerpType;if(H$n)switch(H$n){case 0:case 1:for(H$g=0;H$g<H$l.keyframeWidth;)H$g+=H$l.interpolationMethod[H$g](H$l,H$g,H$b,H$j+H$g,H$k.data,H$m,null,H$k.duration,H$k.nextData);break;case 2:var H$o=H$k.interpolationData,H$p=H$o.length,H$q=0;for(H$g=0;H$g<H$p;){var H$r=H$o[H$g];switch(H$r){case 6:case 7:H$g+=H$s.interpolation[H$r](H$l,H$q,H$b,H$j+H$q,H$k.data,H$m,null,H$k.duration,H$k.nextData,H$o,H$g+1);break;default:H$g+=H$s.interpolation[H$r](H$l,H$q,H$b,H$j+H$q,H$k.data,H$m,null,H$k.duration,H$k.nextData)}H$q++}}else for(H$g=0;H$g<H$l.keyframeWidth;)H$g+=H$l.interpolationMethod[H$g](H$l,H$g,H$b,H$j+H$g,H$k.data,H$m,null,H$k.duration,H$k.nextData);H$j+=H$l.keyframeWidth}},H$b.getNodesCurrentFrameIndex=function(H$a,H$b){var H$c=this._anis[H$a].nodes;H$a!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(H$c.length),this.unfixedCurrentTimes=new Float32Array(H$c.length),this.unfixedLastAniIndex=H$a);for(var H$d=0,H$e=H$c.length;H$d<H$e;H$d++){var H$f=H$c[H$d];for(H$b<this.unfixedCurrentTimes[H$d]&&(this.unfixedCurrentFrameIndexes[H$d]=0),this.unfixedCurrentTimes[H$d]=H$b;this.unfixedCurrentFrameIndexes[H$d]<H$f.keyFrame.length&&!(H$f.keyFrame[this.unfixedCurrentFrameIndexes[H$d]].startTime>this.unfixedCurrentTimes[H$d]);)this.unfixedCurrentFrameIndexes[H$d]++;this.unfixedCurrentFrameIndexes[H$d]--}return this.unfixedCurrentFrameIndexes},H$b.getOriginalDataUnfixedRate=function(H$a,H$b,H$c){var H$d=this._anis[H$a].nodes;H$a!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(H$d.length),this.unfixedCurrentTimes=new Float32Array(H$d.length),this.unfixedKeyframes=H$p(H$d.length),this.unfixedLastAniIndex=H$a);for(var H$e=0,H$f=0,H$g=H$d.length,H$h=0;H$f<H$g;H$f++){var H$i=H$d[H$f];for(H$c<this.unfixedCurrentTimes[H$f]&&(this.unfixedCurrentFrameIndexes[H$f]=0),this.unfixedCurrentTimes[H$f]=H$c;this.unfixedCurrentFrameIndexes[H$f]<H$i.keyFrame.length&&!(H$i.keyFrame[this.unfixedCurrentFrameIndexes[H$f]].startTime>this.unfixedCurrentTimes[H$f]);)this.unfixedKeyframes[H$f]=H$i.keyFrame[this.unfixedCurrentFrameIndexes[H$f]],this.unfixedCurrentFrameIndexes[H$f]++;var H$j=this.unfixedKeyframes[H$f];H$i.dataOffset=H$h;var H$k=H$c-H$j.startTime;if(H$i.lerpType)switch(H$i.lerpType){case 0:case 1:for(H$e=0;H$e<H$i.keyframeWidth;)H$e+=H$i.interpolationMethod[H$e](H$i,H$e,H$b,H$h+H$e,H$j.data,H$k,null,H$j.duration,H$j.nextData);break;case 2:var H$l=H$j.interpolationData,H$m=H$l.length,H$n=0;for(H$e=0;H$e<H$m;){var H$o=H$l[H$e];switch(H$o){case 6:case 7:H$e+=H$s.interpolation[H$o](H$i,H$n,H$b,H$h+H$n,H$j.data,H$k,null,H$j.duration,H$j.nextData,H$l,H$e+1);break;default:H$e+=H$s.interpolation[H$o](H$i,H$n,H$b,H$h+H$n,H$j.data,H$k,null,H$j.duration,H$j.nextData)}H$n++}}else for(H$e=0;H$e<H$i.keyframeWidth;)H$e+=H$i.interpolationMethod[H$e](H$i,H$e,H$b,H$h+H$e,H$j.data,H$k,null,H$j.duration,H$j.nextData);H$h+=H$i.keyframeWidth}},H$s._LinearInterpolation_0=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j){var H$k=0===H$h?0:H$f/H$h;return H$c[H$d]=(1-H$k)*H$e[H$b]+H$k*H$i[H$b],1},H$s._QuaternionInterpolation_1=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j){var H$k=0===H$h?0:H$f/H$h;return H$m.slerpQuaternionArray(H$e,H$b,H$i,H$b,H$k,H$c,H$d),4},H$s._AngleInterpolation_2=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j){return 0},H$s._RadiansInterpolation_3=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j){return 0},H$s._Matrix4x4Interpolation_4=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j){for(var H$k=0;H$k<16;H$k++,H$b++)H$c[H$d+H$k]=H$e[H$b]+H$f*H$g[H$b];return 16},H$s._NoInterpolation_5=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j){return H$c[H$d]=H$e[H$b],1},H$s._BezierInterpolation_6=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j,H$k){return void 0===H$k&&(H$k=0),H$c[H$d]=H$e[H$b]+(H$i[H$b]-H$e[H$b])*H$y.getBezierRate(H$f/H$h,H$j[H$k],H$j[H$k+1],H$j[H$k+2],H$j[H$k+3]),5},H$s._BezierInterpolation_7=function(H$a,H$b,H$c,H$d,H$e,H$f,H$g,H$h,H$i,H$j,H$k){return void 0===H$k&&(H$k=0),H$c[H$d]=H$j[H$k+4]+H$j[H$k+5]*H$y.getBezierRate((.001*H$f+H$j[H$k+6])/H$j[H$k+7],H$j[H$k],H$j[H$k+1],H$j[H$k+2],H$j[H$k+3]),9},H$s.load=function(H$a){return H$ea.loader.create(H$a,null,null,H$s)},H$s.interpolation=[H$s._LinearInterpolation_0,H$s._QuaternionInterpolation_1,H$s._AngleInterpolation_2,H$s._RadiansInterpolation_3,H$s._Matrix4x4Interpolation_4,H$s._NoInterpolation_5,H$s._BezierInterpolation_6,H$s._BezierInterpolation_7],H$s}(),H$A=function(H$b){function H$c(H$a,H$b){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,H$c.__super.call(this),void 0===H$b&&(H$b=0),H$a&&this.init(H$a,H$b)}H$d(H$c,"laya.ani.bone.Skeleton",H$b);var H$a=H$c.prototype;return H$a.init=function(H$a,H$b){void 0===H$b&&(H$b=0);var H$c,H$d,H$e,H$f=0,H$g=0;if(1==H$b)for(this._graphicsCache=[],H$f=0,H$g=H$a.getAnimationCount();H$f<H$g;H$f++)this._graphicsCache.push([]);if(this._yReverseMatrix=H$a.yReverseMatrix,this._aniMode=H$b,this._templet=H$a,this._player=new H$z,this._player.cacheFrameRate=H$a.rate,this._player.templet=H$a,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=H$a.mBoneArr,this._rootBone=H$a.mRootBone,this._aniSectionDic=H$a.aniSectionDic,0<H$a.ikArr.length)for(this._ikArr=[],H$f=0,H$g=H$a.ikArr.length;H$f<H$g;H$f++)this._ikArr.push(new H$s(H$a.ikArr[H$f],this._boneList));if(0<H$a.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),H$f=0,H$g=H$a.pathArr.length;H$f<H$g;H$f++)H$c=H$a.pathArr[H$f],H$d=new H$v(H$c,this._boneList),(H$e=this._boneSlotDic[H$c.name])&&((H$d=new H$v(H$c,this._boneList)).target=H$e),this._pathDic[H$c.name]=H$d;if(0<H$a.tfArr.length)for(this._tfArr=[],H$f=0,H$g=H$a.tfArr.length;H$f<H$g;H$f++)this._tfArr.push(new H$w(H$a.tfArr[H$f],this._boneList));if(0<H$a.skinDataArray.length){var H$h=this._templet.skinDataArray[this._skinIndex];this._skinName=H$h.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},H$a.load=function(H$a,H$b,H$c){},H$a._onLoaded=function(){},H$a._parseComplete=function(){var H$a=H$B.TEMPLET_DICTIONARY[this._aniPath];H$a&&(this.init(H$a,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},H$a._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},H$a._onPlay=function(){this.event("played")},H$a._onStop=function(){var H$a,H$b=this._templet.eventAniArr[this._aniClipIndex];if(H$b&&this._eventIndex<H$b.length)for(;this._eventIndex<H$b.length;this._eventIndex++)(H$a=H$b[this._eventIndex]).time>=this._player.playStart&&H$a.time<=this._player.playEnd&&this.event("label",H$a);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},H$a._onPause=function(){this.event("paused")},H$a._parseSrcBoneMatrix=function(){var H$a=0,H$b=0;for(H$b=this._templet.srcBoneMatrixArr.length,H$a=0;H$a<H$b;H$a++)this._boneMatrixArray.push(new H$Ea);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var H$c,H$d,H$e=this._templet.boneSlotArray;for(H$a=0,H$b=H$e.length;H$a<H$b;H$a++)H$c=H$e[H$a],null==(H$d=this._bindBoneBoneSlotDic[H$c.parent])&&(this._bindBoneBoneSlotDic[H$c.parent]=H$d=[]),this._boneSlotDic[H$c.name]=H$c=H$c.copy(),H$d.push(H$c),this._boneSlotArray.push(H$c)}},H$a._emitMissedEvents=function(H$a,H$b,H$c){void 0===H$c&&(H$c=0);var H$d=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(H$d){var H$e,H$f,H$g=0;for(H$e=H$d.length,H$g=H$c;H$g<H$e;H$g++)(H$f=H$d[H$g]).time>=this._player.playStart&&H$f.time<=this._player.playEnd&&this.event("label",H$f)}},H$a._update=function(H$a){if(void 0===H$a&&(H$a=!0),!(this._pause||H$a&&this._indexControl)){var H$b=this.timer.currTimer,H$c=this._player.currentKeyframeIndex,H$d=H$b-this._lastTime;if(H$a?this._player._update(H$d):H$c=-1,this._lastTime=H$b,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<H$d&&this._clipIndex==H$c&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var H$e;this._lastUpdateAniClipIndex=this._aniClipIndex,H$c>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var H$f,H$g=this._templet.eventAniArr[this._aniClipIndex];if(H$g&&this._eventIndex<H$g.length&&((H$e=H$g[this._eventIndex]).time>=this._player.playStart&&H$e.time<=this._player.playEnd?this._player.currentPlayTime>=H$e.time&&(this.event("label",H$e),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(H$f=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=H$f&&(this.graphics=H$f));var H$h=0,H$i=0;for(H$i=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,H$i-1)&&0<H$i;)H$i--;if(H$i<this._clipIndex)for(H$h=H$i;H$h<this._clipIndex;H$h++)this._createGraphics(H$h)}else if(1==this._aniMode){if(H$f=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=H$f&&(this.graphics=H$f));for(H$i=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,H$i-1)&&0<H$i;)H$i--;if(H$i<this._clipIndex)for(H$h=H$i;H$h<this._clipIndex;H$h++)this._createGraphics(H$h)}this._createGraphics()}}},H$a._createGraphics=function(H$a){void 0===H$a&&(H$a=-1),-1==H$a&&(H$a=this._clipIndex);var H$b,H$c,H$d=H$a*this._player.cacheFrameRateInterval,H$e=this._templet.drawOrderAniArr[this._aniClipIndex];if(H$e&&0<H$e.length)for(this._drawOrderIndex=0,H$b=H$e[this._drawOrderIndex];H$d>=H$b.time&&(this._drawOrder=H$b.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=H$e.length));)H$b=H$e[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=H$H.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=H$H.create(),H$c=this.graphics;var H$f=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],H$a,H$d);var H$g,H$h,H$i,H$j,H$k=this._aniSectionDic[this._aniClipIndex],H$l=0,H$m=0,H$n=0,H$o=0,H$p=0,H$q=this._templet.srcBoneMatrixArr.length;for(H$p=H$k[H$m=0];H$m<H$q;H$m++)H$j=this._boneList[H$m],H$i=this._templet.srcBoneMatrixArr[H$m],H$j.resultTransform.scX=H$i.scX*this._curOriginalData[H$l++],H$j.resultTransform.skX=H$i.skX+this._curOriginalData[H$l++],H$j.resultTransform.skY=H$i.skY+this._curOriginalData[H$l++],H$j.resultTransform.scY=H$i.scY*this._curOriginalData[H$l++],H$j.resultTransform.x=H$i.x+this._curOriginalData[H$l++],H$j.resultTransform.y=H$i.y+this._curOriginalData[H$l++],8===this._templet.tMatrixDataLen&&(H$j.resultTransform.skewX=H$i.skewX+this._curOriginalData[H$l++],H$j.resultTransform.skewY=H$i.skewY+this._curOriginalData[H$l++]);var H$r,H$s={},H$t={};for(H$p+=H$k[1];H$m<H$p;H$m++)H$s[(H$r=H$f[H$m]).name]=this._curOriginalData[H$l++],H$t[H$r.name]=this._curOriginalData[H$l++],this._curOriginalData[H$l++],this._curOriginalData[H$l++],this._curOriginalData[H$l++],this._curOriginalData[H$l++];var H$u,H$v,H$w={},H$x={};for(H$p+=H$k[2];H$m<H$p;H$m++)H$w[(H$r=H$f[H$m]).name]=this._curOriginalData[H$l++],H$x[H$r.name]=this._curOriginalData[H$l++],this._curOriginalData[H$l++],this._curOriginalData[H$l++],this._curOriginalData[H$l++],this._curOriginalData[H$l++];if(this._pathDic)for(H$p+=H$k[3];H$m<H$p;H$m++){if(H$r=H$f[H$m],H$u=this._pathDic[H$r.name])switch(new H$Da(H$r.extenData).getByte()){case 1:H$u.position=this._curOriginalData[H$l++];break;case 2:H$u.spacing=this._curOriginalData[H$l++];break;case 3:H$u.rotateMix=this._curOriginalData[H$l++],H$u.translateMix=this._curOriginalData[H$l++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(H$Ea.TEMP.identity()),this._ikArr)for(H$m=0,H$p=this._ikArr.length;H$m<H$p;H$m++)H$v=this._ikArr[H$m],H$w.hasOwnProperty(H$v.name)&&(H$v.bendDirection=H$w[H$v.name]),H$x.hasOwnProperty(H$v.name)&&(H$v.mix=H$x[H$v.name]),H$v.apply();if(this._pathDic)for(var H$y in this._pathDic)(H$u=this._pathDic[H$y]).apply(this._boneList,H$c);if(this._tfArr)for(H$m=0,H$o=this._tfArr.length;H$m<H$o;H$m++)this._tfArr[H$m].apply();for(H$m=0,H$o=this._boneList.length;H$m<H$o;H$m++)if(H$j=this._boneList[H$m],H$h=this._bindBoneBoneSlotDic[H$j.name],H$j.resultMatrix.copyTo(this._boneMatrixArray[H$m]),H$h)for(H$n=0,H$p=H$h.length;H$n<H$p;H$n++)(H$g=H$h[H$n])&&H$g.setParentMatrix(H$j.resultMatrix);var H$z,H$A,H$B,H$C,H$D={},H$E=this._templet.deformAniArr;if(H$E&&0<H$E.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,H$m=0,H$p=this._boneSlotArray.length;H$m<H$p;H$m++)(H$g=this._boneSlotArray[H$m]).deformData=null;var H$F,H$G=H$E[this._aniClipIndex];for(H$F in H$z=H$G.default,this._setDeform(H$z,H$D,this._boneSlotArray,H$d),H$G)"default"!=H$F&&H$F!=this._skinName&&(H$z=H$G[H$F],this._setDeform(H$z,H$D,this._boneSlotArray,H$d));H$z=H$G[this._skinName],this._setDeform(H$z,H$D,this._boneSlotArray,H$d)}if(this._drawOrder)for(H$m=0,H$p=this._drawOrder.length;H$m<H$p;H$m++)H$A=H$s[(H$g=this._boneSlotArray[this._drawOrder[H$m]]).name],H$B=H$t[H$g.name],isNaN(H$B)||(H$c.save(),H$c.alpha(H$B)),isNaN(H$A)||-2==H$A||(this._templet.attachmentNames?H$g.showDisplayByName(this._templet.attachmentNames[H$A]):H$g.showDisplayByIndex(H$A)),H$D[this._drawOrder[H$m]]?(H$C=H$D[this._drawOrder[H$m]],H$g.currDisplayData&&H$C[H$g.currDisplayData.attachmentName]?H$g.deformData=H$C[H$g.currDisplayData.attachmentName]:H$g.deformData=null):H$g.deformData=null,isNaN(H$B)?H$g.draw(H$c,this._boneMatrixArray,2==this._aniMode):H$g.draw(H$c,this._boneMatrixArray,2==this._aniMode,H$B),isNaN(H$B)||H$c.restore();else for(H$m=0,H$p=this._boneSlotArray.length;H$m<H$p;H$m++)H$A=H$s[(H$g=this._boneSlotArray[H$m]).name],H$B=H$t[H$g.name],isNaN(H$B)||(H$c.save(),H$c.alpha(H$B)),isNaN(H$A)||-2==H$A||(this._templet.attachmentNames?H$g.showDisplayByName(this._templet.attachmentNames[H$A]):H$g.showDisplayByIndex(H$A)),H$D[H$m]?(H$C=H$D[H$m],H$g.currDisplayData&&H$C[H$g.currDisplayData.attachmentName]?H$g.deformData=H$C[H$g.currDisplayData.attachmentName]:H$g.deformData=null):H$g.deformData=null,isNaN(H$B)?H$g.draw(H$c,this._boneMatrixArray,2==this._aniMode):H$g.draw(H$c,this._boneMatrixArray,2==this._aniMode,H$B),isNaN(H$B)||H$c.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,H$a,H$c):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,H$a,H$c)},H$a._setDeform=function(H$a,H$b,H$c,H$d){if(H$a){var H$e,H$f,H$g,H$h=0,H$i=0,H$j=0;if(H$a)for(H$h=0,H$i=H$a.deformSlotDataList.length;H$h<H$i;H$h++)for(H$e=H$a.deformSlotDataList[H$h],H$j=0;H$j<H$e.deformSlotDisplayList.length;H$j++)H$g=H$c[(H$f=H$e.deformSlotDisplayList[H$j]).slotIndex],H$f.apply(H$d,H$g),H$b[H$f.slotIndex]||(H$b[H$f.slotIndex]={}),H$b[H$f.slotIndex][H$f.attachment]=H$f.deformData}},H$a.getAnimNum=function(){return this._templet.getAnimationCount()},H$a.getAniNameByIndex=function(H$a){return this._templet.getAniNameByIndex(H$a)},H$a.getSlotByName=function(H$a){return this._boneSlotDic[H$a]},H$a.showSkinByName=function(H$a,H$b){void 0===H$b&&(H$b=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(H$a),H$b)},H$a.showSkinByIndex=function(H$a,H$b){void 0===H$b&&(H$b=!0);for(var H$c=0;H$c<this._boneSlotArray.length;H$c++)this._boneSlotArray[H$c].showSlotData(null,H$b);if(this._templet.showSkinByIndex(this._boneSlotDic,H$a,H$b)){var H$d=this._templet.skinDataArray[H$a];this._skinIndex=H$a,this._skinName=H$d.name}this._clearCache()},H$a.showSlotSkinByIndex=function(H$a,H$b){if(0!=this._aniMode){var H$c=this.getSlotByName(H$a);H$c&&H$c.showDisplayByIndex(H$b),this._clearCache()}},H$a.showSlotSkinByName=function(H$a,H$b){if(0!=this._aniMode){var H$c=this.getSlotByName(H$a);H$c&&H$c.showDisplayByName(H$b),this._clearCache()}},H$a.replaceSlotSkinName=function(H$a,H$b,H$c){if(0!=this._aniMode){var H$d=this.getSlotByName(H$a);H$d&&H$d.replaceDisplayByName(H$b,H$c),this._clearCache()}},H$a.replaceSlotSkinByIndex=function(H$a,H$b,H$c){if(0!=this._aniMode){var H$d=this.getSlotByName(H$a);H$d&&H$d.replaceDisplayByIndex(H$b,H$c),this._clearCache()}},H$a.setSlotSkin=function(H$a,H$b){if(0!=this._aniMode){var H$c=this.getSlotByName(H$a);H$c&&H$c.replaceSkin(H$b),this._clearCache()}},H$a._clearCache=function(){if(1==this._aniMode)for(var H$a=0,H$b=this._graphicsCache.length;H$a<H$b;H$a++){for(var H$c=0,H$d=this._graphicsCache[H$a].length;H$c<H$d;H$c++){var H$e=this._graphicsCache[H$a][H$c];H$e!=this.graphics&&H$H.recycle(H$e)}this._graphicsCache[H$a].length=0}},H$a.play=function(H$a,H$b,H$c,H$d,H$e,H$f){void 0===H$c&&(H$c=!0),void 0===H$d&&(H$d=0),void 0===H$e&&(H$e=0),void 0===H$f&&(H$f=!0),this._indexControl=!1;var H$g=-1,H$h=NaN;if(H$h=H$b?2147483647:0,"string"==typeof H$a)for(var H$i=0,H$j=this._templet.getAnimationCount();H$i<H$j;H$i++){var H$k=this._templet.getAnimation(H$i);if(H$k&&H$a==H$k.name){H$g=H$i;break}}else H$g=H$a;-1<H$g&&H$g<this.getAnimNum()&&(this._aniClipIndex=H$g,(H$c||this._pause||this._currAniIndex!=H$g)&&(this._currAniIndex=H$g,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(H$g)),this._drawOrder=null,this._eventIndex=0,this._player.play(H$g,this._player.playbackRate,H$h,H$d,H$e),H$f&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=H$l.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},H$a.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},H$a.playbackRate=function(H$a){this._player&&(this._player.playbackRate=H$a)},H$a.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},H$a.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=H$l.now(),this.timer.frameLoop(1,this,this._update,null,!0))},H$a._getGrahicsDataWithCache=function(H$a,H$b){return this._graphicsCache[H$a][H$b]},H$a._setGrahicsDataWithCache=function(H$a,H$b,H$c){this._graphicsCache[H$a][H$b]=H$c},H$a.destroy=function(H$a){void 0===H$a&&(H$a=!0),H$b.prototype.destroy.call(this,H$a),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},H$f(0,H$a,"url",function(){return this._aniPath},function(H$a){this.load(H$a)}),H$f(0,H$a,"index",function(){return this._index},function(H$a){this.player&&(this._index=H$a,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),H$f(0,H$a,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),H$f(0,H$a,"templet",function(){return this._templet}),H$f(0,H$a,"player",function(){return this._player}),H$c.useSimpleMeshInCanvas=!1,H$c}(H$fa),H$B=function(H$b){function H$e(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,H$e.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}H$d(H$e,"laya.ani.bone.Templet",H$b);var H$a=H$e.prototype;return H$a.getLoadList=function(){return this._loadList},H$a.loadAni=function(H$a){this._skBufferUrl=H$a,H$ea.loader.load(H$a,H$i.create(this,this.onComplete),null,"arraybuffer")},H$a.onComplete=function(H$a){if(this._isDestroyed)this.destroy();else{var H$b=H$j.getRes(this._skBufferUrl);H$b?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,H$b)):this.event("error","load failed:"+this._skBufferUrl)}},H$a.parseData=function(H$a,H$b,H$c){void 0===H$c&&(H$c=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=H$a,this._mainTexture&&H$q.isWebGL&&H$a.bitmap&&(H$a.bitmap.enableMerageInAtlas=!1),this._rate=H$c,this.parse(H$b)},H$a.buildArmature=function(H$a){return void 0===H$a&&(H$a=0),new H$A(this,H$a)},H$a.parse=function(H$a){H$b.prototype.parse.call(this,H$a),this._endLoaded(),this._aniVersion!=H$e.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+H$e.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},H$a._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var H$a=0;this._loadList=[];var H$b,H$c=new H$Da(this.getPublicExtData()),H$d=0,H$e=0,H$f=0,H$g=H$c.getInt32(),H$h=H$c.readUTFString(),H$i=H$h.split("\n");for(H$a=0;H$a<H$g;H$a++)H$b=this._path+H$i[2*H$a],H$h=H$i[2*H$a+1],H$c.getFloat32(),H$c.getFloat32(),H$d=H$c.getFloat32(),H$e=H$c.getFloat32(),H$f=H$c.getFloat32(),isNaN(H$f)?0:H$f,H$f=H$c.getFloat32(),isNaN(H$f)?0:H$f,H$f=H$c.getFloat32(),isNaN(H$f)?H$d:H$f,H$f=H$c.getFloat32(),isNaN(H$f)?H$e:H$f,-1==this._loadList.indexOf(H$b)&&this._loadList.push(H$b);this.event("inited",this)}},H$a._textureComplete=function(){for(var H$a,H$b,H$c=0,H$d=this._loadList.length;H$c<H$d;H$c++)H$b=this._loadList[H$c],H$a=this._textureDic[H$b]=H$j.getRes(H$b),H$q.isWebGL&&H$a&&H$a.bitmap&&(H$a.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},H$a._parsePublicExtData=function(){var H$a=0,H$b=0,H$c=0,H$d=0,H$e=0;for(H$a=0,H$e=this.getAnimationCount();H$a<H$e;H$a++)this._graphicsCache.push([]);var H$f;H$f="Dragon"!=this._aniClassName;var H$g,H$h,H$i=new H$Da(this.getPublicExtData()),H$j=0,H$k=0,H$l=0,H$m=0,H$n=0,H$o=0,H$p=0,H$q=0,H$r=0,H$s=H$i.getInt32(),H$t=H$i.readUTFString(),H$u=H$t.split("\n");for(H$a=0;H$a<H$s;H$a++){if(H$g=this._mainTexture,H$h=this._path+H$u[2*H$a],H$t=H$u[2*H$a+1],null==this._mainTexture&&(H$g=this._textureDic[H$h]),!H$g)return this.event("error",this),void(this.isParseFail=!0);H$j=H$i.getFloat32(),H$k=H$i.getFloat32(),H$l=H$i.getFloat32(),H$m=H$i.getFloat32(),H$r=H$i.getFloat32(),H$n=isNaN(H$r)?0:H$r,H$r=H$i.getFloat32(),H$o=isNaN(H$r)?0:H$r,H$r=H$i.getFloat32(),H$p=isNaN(H$r)?H$l:H$r,H$r=H$i.getFloat32(),H$q=isNaN(H$r)?H$m:H$r,this.subTextureDic[H$t]=H$Fa.create(H$g,H$j,H$k,H$l,H$m,-H$n,-H$o,H$p,H$q),H$g.alphaTexture&&(this.subTextureDic[H$t].alphaTexture=H$Fa.create(H$g.alphaTexture,H$j,H$k,H$l,H$m,-H$n,-H$o,H$p,H$q))}this._mainTexture=H$g;var H$v,H$w,H$x,H$y,H$z,H$A=H$i.getUint16();for(H$a=0;H$a<H$A;H$a++)(H$v=[]).push(H$i.getUint16()),H$v.push(H$i.getUint16()),H$v.push(H$i.getUint16()),H$v.push(H$i.getUint16()),this.aniSectionDic[H$a]=H$v;var H$B,H$C=H$i.getInt16(),H$D={};for(H$a=0;H$a<H$C;H$a++)H$w=new H$Ga,0==H$a?H$B=H$w:H$w.root=H$B,H$w.d=H$f?-1:1,H$y=H$i.readUTFString(),H$z=H$i.readUTFString(),H$w.length=H$i.getFloat32(),1==H$i.getByte()&&(H$w.inheritRotation=!1),1==H$i.getByte()&&(H$w.inheritScale=!1),H$w.name=H$y,H$z&&((H$x=H$D[H$z])?H$x.addChild(H$w):this.mRootBone=H$w),H$D[H$y]=H$w,this.mBoneArr.push(H$w);this.tMatrixDataLen=H$i.getUint16();var H$E,H$F,H$G=H$i.getUint16(),H$H=Math.floor(H$G/this.tMatrixDataLen),H$I=this.srcBoneMatrixArr;for(H$a=0;H$a<H$H;H$a++)(H$E=new H$Ta).scX=H$i.getFloat32(),H$E.skX=H$i.getFloat32(),H$E.skY=H$i.getFloat32(),H$E.scY=H$i.getFloat32(),H$E.x=H$i.getFloat32(),H$E.y=H$i.getFloat32(),8===this.tMatrixDataLen&&(H$E.skewX=H$i.getFloat32(),H$E.skewY=H$i.getFloat32()),H$I.push(H$E),(H$w=this.mBoneArr[H$a]).transform=H$E;var H$J,H$K=H$i.getUint16(),H$L=0;for(H$a=0;H$a<H$K;H$a++){for(H$F=new H$Na,H$L=H$i.getUint16(),H$b=0;H$b<H$L;H$b++)H$F.boneNames.push(H$i.readUTFString()),H$F.boneIndexs.push(H$i.getInt16());H$F.name=H$i.readUTFString(),H$F.targetBoneName=H$i.readUTFString(),H$F.targetBoneIndex=H$i.getInt16(),H$F.bendDirection=H$i.getFloat32(),H$F.mix=H$i.getFloat32(),H$F.isSpine=H$f,this.ikArr.push(H$F)}var H$M,H$N=H$i.getUint16(),H$O=0;for(H$a=0;H$a<H$N;H$a++){for(H$J=new H$Sa,H$O=H$i.getUint16(),H$b=0;H$b<H$O;H$b++)H$J.boneIndexs.push(H$i.getInt16());H$J.name=H$i.getUTFString(),H$J.targetIndex=H$i.getInt16(),H$J.rotateMix=H$i.getFloat32(),H$J.translateMix=H$i.getFloat32(),H$J.scaleMix=H$i.getFloat32(),H$J.shearMix=H$i.getFloat32(),H$J.offsetRotation=H$i.getFloat32(),H$J.offsetX=H$i.getFloat32(),H$J.offsetY=H$i.getFloat32(),H$J.offsetScaleX=H$i.getFloat32(),H$J.offsetScaleY=H$i.getFloat32(),H$J.offsetShearY=H$i.getFloat32(),this.tfArr.push(H$J)}var H$P=H$i.getUint16(),H$Q=0;for(H$a=0;H$a<H$P;H$a++){for((H$M=new H$Oa).name=H$i.readUTFString(),H$Q=H$i.getUint16(),H$b=0;H$b<H$Q;H$b++)H$M.bones.push(H$i.getInt16());H$M.target=H$i.readUTFString(),H$M.positionMode=H$i.readUTFString(),H$M.spacingMode=H$i.readUTFString(),H$M.rotateMode=H$i.readUTFString(),H$M.offsetRotation=H$i.getFloat32(),H$M.position=H$i.getFloat32(),H$M.spacing=H$i.getFloat32(),H$M.rotateMix=H$i.getFloat32(),H$M.translateMix=H$i.getFloat32(),this.pathArr.push(H$M)}var H$R,H$S,H$T,H$U,H$V,H$W=0,H$X=0,H$Y=0,H$Z=NaN,H$$=0,H$_=H$i.getInt16();for(H$a=0;H$a<H$_;H$a++){var H$aa=H$i.getUint8(),H$ba={};this.deformAniArr.push(H$ba);for(var H$ca=0;H$ca<H$aa;H$ca++)for((H$R=new H$Ia).skinName=H$i.getUTFString(),H$ba[H$R.skinName]=H$R,H$W=H$i.getInt16(),H$b=0;H$b<H$W;H$b++)for(H$S=new H$Ja,H$R.deformSlotDataList.push(H$S),H$X=H$i.getInt16(),H$c=0;H$c<H$X;H$c++)for(H$T=new H$Ka,H$S.deformSlotDisplayList.push(H$T),H$T.slotIndex=H$i.getInt16(),H$T.attachment=H$i.getUTFString(),H$Y=H$i.getInt16(),H$d=0;H$d<H$Y;H$d++)for(1==H$i.getByte()?H$T.tweenKeyList.push(!0):H$T.tweenKeyList.push(!1),H$Z=H$i.getFloat32(),H$T.timeList.push(H$Z),H$U=[],H$T.vectices.push(H$U),H$$=H$i.getInt16(),H$e=0;H$e<H$$;H$e++)H$U.push(H$i.getFloat32())}var H$da,H$ea,H$fa=H$i.getInt16(),H$ga=0,H$ha=0;for(H$a=0;H$a<H$fa;H$a++){for(H$ga=H$i.getInt16(),H$V=[],H$b=0;H$b<H$ga;H$b++){for((H$da=new H$La).time=H$i.getFloat32(),H$ha=H$i.getInt16(),H$c=0;H$c<H$ha;H$c++)H$da.drawOrder.push(H$i.getInt16());H$V.push(H$da)}this.drawOrderAniArr.push(H$V)}var H$ia,H$ja=H$i.getInt16(),H$ka=0;for(H$a=0;H$a<H$ja;H$a++){for(H$ka=H$i.getInt16(),H$ea=[],H$b=0;H$b<H$ka;H$b++)(H$ia=new H$Ma).name=H$i.getUTFString(),H$ia.intValue=H$i.getInt32(),H$ia.floatValue=H$i.getFloat32(),H$ia.stringValue=H$i.getUTFString(),H$ia.time=H$i.getFloat32(),H$ea.push(H$ia);this.eventAniArr.push(H$ea)}var H$la=H$i.getInt16();if(0<H$la)for(this.attachmentNames=[],H$a=0;H$a<H$la;H$a++)this.attachmentNames.push(H$i.getUTFString());var H$ma,H$na,H$oa=H$i.getInt16();for(H$a=0;H$a<H$oa;H$a++)(H$ma=new H$Ha).name=H$i.readUTFString(),H$ma.parent=H$i.readUTFString(),H$ma.attachmentName=H$i.readUTFString(),H$ma.srcDisplayIndex=H$ma.displayIndex=H$i.getInt16(),(H$ma.templet=this).boneSlotDic[H$ma.name]=H$ma,null==(H$na=this.bindBoneBoneSlotDic[H$ma.parent])&&(this.bindBoneBoneSlotDic[H$ma.parent]=H$na=[]),H$na.push(H$ma),this.boneSlotArray.push(H$ma);var H$pa,H$qa,H$ra,H$sa=H$i.readUTFString().split("\n"),H$ta=0,H$ua=H$i.getUint8(),H$va=0,H$wa=0,H$xa=0,H$ya=0,H$za=0,H$Aa=0,H$Ba=0;for(H$a=0;H$a<H$ua;H$a++){for((H$pa=new H$Pa).name=H$sa[H$ta++],H$va=H$i.getUint8(),H$b=0;H$b<H$va;H$b++){for((H$qa=new H$Ra).name=H$sa[H$ta++],H$ma=this.boneSlotDic[H$qa.name],H$wa=H$i.getUint8(),H$c=0;H$c<H$wa;H$c++){if(H$ra=new H$Qa,this.skinSlotDisplayDataArr.push(H$ra),H$ra.name=H$sa[H$ta++],H$ra.attachmentName=H$sa[H$ta++],H$ra.transform=new H$Ta,H$ra.transform.scX=H$i.getFloat32(),H$ra.transform.skX=H$i.getFloat32(),H$ra.transform.skY=H$i.getFloat32(),H$ra.transform.scY=H$i.getFloat32(),H$ra.transform.x=H$i.getFloat32(),H$ra.transform.y=H$i.getFloat32(),H$qa.displayArr.push(H$ra),H$ra.width=H$i.getFloat32(),H$ra.height=H$i.getFloat32(),H$ra.type=H$i.getUint8(),H$ra.verLen=H$i.getUint16(),0<(H$C=H$i.getUint16()))for(H$ra.bones=[],H$d=0;H$d<H$C;H$d++){var H$Ca=H$i.getUint16();H$ra.bones.push(H$Ca)}if(0<(H$xa=H$i.getUint16()))for(H$ra.uvs=[],H$d=0;H$d<H$xa;H$d++)H$ra.uvs.push(H$i.getFloat32());if(0<(H$ya=H$i.getUint16()))for(H$ra.weights=[],H$d=0;H$d<H$ya;H$d++)H$ra.weights.push(H$i.getFloat32());if(0<(H$za=H$i.getUint16()))for(H$ra.triangles=[],H$d=0;H$d<H$za;H$d++)H$ra.triangles.push(H$i.getUint16());if(0<(H$Aa=H$i.getUint16()))for(H$ra.vertices=[],H$d=0;H$d<H$Aa;H$d++)H$ra.vertices.push(H$i.getFloat32());if(0<(H$Ba=H$i.getUint16()))for(H$ra.lengths=[],H$d=0;H$d<H$Ba;H$d++)H$ra.lengths.push(H$i.getFloat32())}H$pa.slotArr.push(H$qa)}this.skinDic[H$pa.name]=H$pa,this.skinDataArray.push(H$pa)}1==H$i.getUint8()?(this.yReverseMatrix=new H$Ea(1,0,0,-1,0,0),H$B&&H$B.setTempMatrix(this.yReverseMatrix)):H$B&&H$B.setTempMatrix(new H$Ea),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},H$a.getTexture=function(H$a){var H$b=this.subTextureDic[H$a];return H$b||(H$b=this.subTextureDic[H$a.substr(0,H$a.length-1)]),null==H$b?this._mainTexture:H$b},H$a.showSkinByIndex=function(H$a,H$b,H$c){if(void 0===H$c&&(H$c=!0),H$b<0&&H$b>=this.skinDataArray.length)return!1;var H$d,H$e,H$f=0,H$g=0,H$h=this.skinDataArray[H$b];if(H$h){for(H$f=0,H$g=H$h.slotArr.length;H$f<H$g;H$f++)(H$e=H$h.slotArr[H$f])&&(H$d=H$a[H$e.name])&&(H$d.showSlotData(H$e,H$c),H$c&&"undefined"!=H$d.attachmentName&&"null"!=H$d.attachmentName?H$d.showDisplayByName(H$d.attachmentName):H$d.showDisplayByIndex(H$d.displayIndex));return!0}return!1},H$a.getSkinIndexByName=function(H$a){for(var H$b=0,H$c=this.skinDataArray.length;H$b<H$c;H$b++)if(this.skinDataArray[H$b].name==H$a)return H$b;return-1},H$a.getGrahicsDataWithCache=function(H$a,H$b){return this._graphicsCache[H$a][H$b]},H$a.setGrahicsDataWithCache=function(H$a,H$b,H$c){this._graphicsCache[H$a][H$b]=H$c},H$a.destroy=function(){var H$a;for(var H$b in this._isDestroyed=!0,this.subTextureDic)(H$a=this.subTextureDic[H$b])&&H$a.destroy();for(H$b in this._textureDic)(H$a=this._textureDic[H$b])&&H$a.destroy();for(var H$c=0,H$d=this.skinSlotDisplayDataArr.length;H$c<H$d;H$c++)this.skinSlotDisplayDataArr[H$c].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete H$e.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},H$a.getAniNameByIndex=function(H$a){var H$b=this.getAnimation(H$a);return H$b?H$b.name:null},H$f(0,H$a,"rate",function(){return this._rate},function(H$a){this._rate=H$a}),H$e.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",H$e.TEMPLET_DICTIONARY=null,H$e}(H$I)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H$a,H$b){"use strict";for(var H$c in Object.defineProperty(H$b,"__esModule",{value:!0}),Laya){var H$d=Laya[H$c];H$d&&H$d.__isclass&&(H$b[H$c]=H$d)}});