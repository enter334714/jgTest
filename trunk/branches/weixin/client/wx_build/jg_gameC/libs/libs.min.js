var Laya=window.Laya=function(c$l,c$a){var c$m={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(c$a,c$b){return 1==arguments.length?c$m.__presubstr.call(this,c$a):c$m.__presubstr.call(this,c$a,0<c$b?c$b:this.length+c$b)},__init:function(c$a){c$a.forEach(function(c$a){c$a.__init$&&c$a.__init$()})},__isClass:function(c$a){return c$a&&(c$a.__isclass||c$a==Object||c$a==String||c$a==Array)},__newvec:function(c$a,c$b){var c$c=[];c$c.length=c$a;for(var c$d=0;c$d<c$a;c$d++)c$c[c$d]=c$b;return c$c},__extend:function(c$a,c$b){for(var c$c in c$b)if(c$b.hasOwnProperty(c$c)){var c$d=Object.getOwnPropertyDescriptor(c$b,c$c),c$g=c$d.get,c$h=c$d.set;c$g||c$h?c$g&&c$h?Object.defineProperty(c$a,c$c,c$d):(c$g&&Object.defineProperty(c$a,c$c,c$g),c$h&&Object.defineProperty(c$a,c$c,c$h)):c$a[c$c]=c$b[c$c]}function c$i(){c$m.un(this,"constructor",c$a)}c$i.prototype=c$b.prototype,c$a.prototype=new c$i,c$m.un(c$a.prototype,"__imps",c$m.__copy({},c$b.prototype.__imps))},__copy:function(c$a,c$b){if(!c$b)return null;for(var c$c in c$a=c$a||{},c$b)c$a[c$c]=c$b[c$c];return c$a},__package:function(c$a,c$b){if(!c$m.__packages[c$a]){c$m.__packages[c$a]=!0;var c$c=c$l,c$d=c$a.split(".");if(1<c$d.length)for(var c$g=0,c$h=c$d.length-1;c$g<c$h;c$g++){var c$i=c$c[c$d[c$g]];c$c=c$i||(c$c[c$d[c$g]]={})}c$c[c$d[c$d.length-1]]||(c$c[c$d[c$d.length-1]]=c$b||{})}},__hasOwnProperty:function(c$a,c$b){return c$b=c$b||this,Object.hasOwnProperty.call(c$b,c$a)||function c$a(c$b,c$c){if(Object.hasOwnProperty.call(c$c.prototype,c$b))return!0;var c$d=c$c.prototype.__super;return null==c$d?null:c$a(c$b,c$d)}(c$a,c$b.__class)},__typeof:function(c$a,c$b){if(!c$a||!c$b)return!1;if(c$b===String)return"string"==typeof c$a;if(c$b===Number)return"number"==typeof c$a;if(c$b.__interface__)c$b=c$b.__interface__;else if("string"!=typeof c$b)return c$a instanceof c$b;return c$a.__imps&&c$a.__imps[c$b]||c$a.__class==c$b},__as:function(c$a,c$b){return this.__typeof(c$a,c$b)?c$a:null},__int:function(c$a){return c$a?parseInt(c$a):0},interface:function(c$a,c$b){c$m.__package(c$a,{});var c$c=c$m.__internals,c$d=c$c[c$a]=c$c[c$a]||{self:c$a};if(c$b){var c$g=c$b.split(",");c$d.extend=[];for(var c$h=0;c$h<c$g.length;c$h++){var c$i=c$g[c$h];c$c[c$i]=c$c[c$i]||{self:c$i},c$d.extend.push(c$c[c$i])}}var c$j=c$l,c$k=c$a.split(".");for(c$h=0;c$h<c$k.length-1;c$h++)c$j=c$j[c$k[c$h]];c$j[c$k[c$k.length-1]]={__interface__:c$a}},class:function(c$a,c$b,c$c,c$d){if(c$c&&c$m.__extend(c$a,c$c),c$b)if(c$m.__package(c$b,c$a),c$m.__classmap[c$b]=c$a,0<c$b.indexOf(".")){if(0==c$b.indexOf("laya.")){var c$g=c$b.split(".");c$d=c$d||c$g[c$g.length-1],c$m[c$d]&&console.log("Warning!,this class["+c$d+"] already exist:",c$m[c$d]),c$m[c$d]=c$a}}else"Main"==c$b?c$l.Main=c$a:"MainWX"==c$b?c$l.MainWX=c$a:(c$m[c$b]&&console.log("Error!,this class["+c$b+"] already exist:",c$m[c$b]),c$m[c$b]=c$a);var c$h=c$m.un,c$i=c$a.prototype;c$h(c$i,"hasOwnProperty",c$m.__hasOwnProperty),c$h(c$i,"__class",c$a),c$h(c$i,"__super",c$c),c$h(c$i,"__className",c$b),c$h(c$a,"__super",c$c),c$h(c$a,"__className",c$b),c$h(c$a,"__isclass",!0),c$h(c$a,"super",function(c$a){this.__super.call(c$a)})},imps:function(c$a,c$b){if(!c$b)return null;var c$g=c$a.__imps||c$m.un(c$a,"__imps",{});function c$h(c$a){var c$b,c$c;if((c$b=c$m.__internals[c$a])&&(c$g[c$a]=!0,c$c=c$b.extend))for(var c$d=0;c$d<c$c.length;c$d++)c$h(c$c[c$d].self)}for(var c$c in c$b)c$h(c$c)},superSet:function(c$a,c$b,c$c,c$d){var c$g=c$a.prototype["_$set_"+c$c];c$g&&c$g.call(c$b,c$d)},superGet:function(c$a,c$b,c$c){var c$d=c$a.prototype["_$get_"+c$c];return c$d?c$d.call(c$b):null},getset:function(c$a,c$b,c$c,c$d,c$g){c$a?(c$d&&(c$b["_$GET_"+c$c]=c$d),c$g&&(c$b["_$SET_"+c$c]=c$g)):(c$d&&c$m.un(c$b,"_$get_"+c$c,c$d),c$g&&c$m.un(c$b,"_$set_"+c$c,c$g)),c$d&&c$g?Object.defineProperty(c$b,c$c,{get:c$d,set:c$g,enumerable:!1,configurable:!0}):(c$d&&Object.defineProperty(c$b,c$c,{get:c$d,enumerable:!1,configurable:!0}),c$g&&Object.defineProperty(c$b,c$c,{set:c$g,enumerable:!1,configurable:!0}))},static:function(c$c,c$d){for(var c$g=0,c$a=c$d.length;c$g<c$a;c$g+=2)if("length"==c$d[c$g])c$c.length=c$d[c$g+1].call(c$c);else{function c$b(){var c$b=c$d[c$g],c$a=c$d[c$g+1];Object.defineProperty(c$c,c$b,{get:function(){return delete this[c$b],this[c$b]=c$a.call(this)},set:function(c$a){delete this[c$b],this[c$b]=c$a},enumerable:!0,configurable:!0})}c$b()}},un:function(c$a,c$b,c$c){return c$c||(c$c=c$a[c$b]),c$m.__propun.value=c$c,Object.defineProperty(c$a,c$b,c$m.__propun),c$c},uns:function(c$b,c$a){c$a.forEach(function(c$a){c$m.un(c$b,c$a)})}};return c$l.console=c$l.console||{log:function(){}},c$l.trace=c$l.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),c$m}(window,document);!function(c$a,c$b,c$c){c$c.un,c$c.uns,c$c.static,c$c.class,c$c.getset,c$c.__newvec}(window,document,Laya),function(c$i,c$b,c$z){c$z.un,c$z.uns;var c$k=c$z.static,c$m=c$z.class,c$q=c$z.getset;c$z.__newvec;c$z.interface("laya.runtime.IMarket"),c$z.interface("laya.filters.IFilter"),c$z.interface("laya.display.ILayout"),c$z.interface("laya.resource.IDispose"),c$z.interface("laya.runtime.IPlatform"),c$z.interface("laya.resource.IDestroy"),c$z.interface("laya.runtime.IConchNode"),c$z.interface("laya.filters.IFilterAction"),c$z.interface("laya.runtime.ICPlatformClass"),c$z.interface("laya.resource.ICreateResource"),c$z.interface("laya.runtime.IConchRenderObject"),c$z.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var c$F=function(){function c$h(){}return c$m(c$h,"laya.utils.RunDriver"),c$h.FILTER_ACTIONS=[],c$h.pixelRatio=-1,c$h._charSizeTestDiv=null,c$h.now=function(){return Date.now()},c$h.getWindow=function(){return c$i},c$h.getPixelRatio=function(){if(c$h.pixelRatio<0){var c$a=c$O.context,c$b=c$a.backingStorePixelRatio||c$a.webkitBackingStorePixelRatio||c$a.mozBackingStorePixelRatio||c$a.msBackingStorePixelRatio||c$a.oBackingStorePixelRatio||c$a.backingStorePixelRatio||1;(c$h.pixelRatio=(c$O.window.devicePixelRatio||1)/c$b)<1&&(c$h.pixelRatio=1)}return c$h.pixelRatio},c$h.getIncludeStr=function(c$a){return null},c$h.createShaderCondition=function(c$a){var c$b="(function() {return "+c$a+";})";return c$z._runScript(c$b)},c$h.fontMap=[],c$h.measureText=function(c$a,c$b){var c$c=c$h.hanzi.test(c$a);if(c$c&&c$h.fontMap[c$b])return c$h.fontMap[c$b];var c$d=c$O.context;c$d.font=c$b;var c$g=c$d.measureText(c$a);return c$c&&(c$h.fontMap[c$b]=c$g),c$g},c$h.getWebGLContext=function(c$a){},c$h.beginFlush=function(){},c$h.endFinish=function(){},c$h.addToAtlas=null,c$h.flashFlushImage=function(c$a){},c$h.drawToCanvas=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i=c$va.create("2D"),c$j=new c$K(c$c,c$d,c$i);return c$L.renders[c$b]._fun(c$a,c$j,c$g,c$h),c$i},c$h.createParticleTemplate2D=null,c$h.createGLTextur=null,c$h.createWebGLContext2D=null,c$h.changeWebGLSize=function(c$a,c$b){},c$h.createRenderSprite=function(c$a,c$b){return new c$L(c$a,c$b)},c$h.createFilterAction=function(c$a){return new c$v},c$h.createGraphics=function(){return new c$o},c$h.clear=function(c$a){c$J._context.ctx.clear()},c$h.cancelLoadByUrl=function(c$a){},c$h.clearAtlas=function(c$a){},c$h.isAtlas=function(c$a){return!1},c$h.addTextureToAtlas=function(c$a){},c$h.getTexturePixels=function(c$a,c$b,c$c,c$d,c$g){return null},c$h.skinAniSprite=function(){return null},c$h.update3DLoop=function(){},c$k(c$h,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),c$h}(),c$d=(c$q(1,c$z,"alertGlobalError",null,function(c$a){var c$h=0;c$O.window.onerror=c$a?function(c$a,c$b,c$c,c$d,c$g){c$h++<5&&c$g&&alert(c$g.stack||c$g)}:null}),c$z.init=function(c$a,c$b,c$c){for(var c$d=[],c$g=2,c$h=arguments.length;c$g<c$h;c$g++)c$d.push(arguments[c$g]);if(!c$z._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=c$z._arrayBufferSlice),c$z._isinit=!0,c$O.__init__(),c$M.__init__(),c$o.__init__(),c$z.timer=new c$Y,c$z.scaleTimer=new c$Y,c$z.loader=new c$ka,c$e.__init__(),c$g=0;for(var c$i=c$d.length;c$g<c$i;c$g++)c$d[c$g].enable&&c$d[c$g].enable();return c$p.__init__(),c$j.__init__(),c$N.__init__(),c$Q.beginCheck(),c$z._currentStage=c$z.stage=new c$ta,c$z.stage.conchModel&&c$z.stage.conchModel.setRootNode(),c$z._getUrlPath(),c$z.render=new c$J(0,0),c$z.stage.size(c$a,c$b),c$L.__init__(),c$n.__init__(),c$r.instance.__init__(c$z.stage,c$J.canvas),c$xa.__init__(),c$E.autoStopMusic=!0,c$C.__init__(),c$J.canvas}},c$z._getUrlPath=function(){var c$a=c$O.window.location,c$b=c$a.pathname;c$b=c$b&&":"==c$b.charAt(2)?c$b.substring(1):c$b,c$I.rootPath=c$I.basePath=c$I.getPath("file:"==c$a.protocol?c$b:c$a.protocol+"//"+c$a.host+c$a.pathname)},c$z._arrayBufferSlice=function(c$a,c$b){var c$c=new Uint8Array(this,c$a,c$b-c$a),c$d=new Uint8Array(c$c.length);return c$d.set(c$c),c$d.buffer},c$z._runScript=function(c$a){return c$O.window[c$z._evcode](c$a)},c$z.stage=null,c$z.timer=null,c$z.scaleTimer=null,c$z.loader=null,c$z.version="1.8.6",c$z.render=null,c$z._currentStage=null,c$z._isinit=!1,c$z.isDebug=!1,c$z.MiniAdpter={init:function(){c$i.navigator&&c$i.navigator.userAgent&&-1<c$i.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},c$k(c$z,["conchMarket",function(){return this.conchMarket=c$i.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=c$i.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function c$a(){}return c$m(c$a,"Config"),c$a.WebGLTextCacheCount=500,c$a.atlasEnable=!1,c$a.showCanvasMark=!1,c$a.animationInterval=50,c$a.isAntialias=!1,c$a.isAlpha=!1,c$a.premultipliedAlpha=!0,c$a.isStencil=!0,c$a.preserveDrawingBuffer=!1,c$a}()),c$l=function(){function c$l(){this._events=null}c$m(c$l,"laya.events.EventDispatcher");var c$a=c$l.prototype;return c$a.hasListener=function(c$a){return!!(this._events&&this._events[c$a])},c$a.event=function(c$a,c$b){if(!this._events||!this._events[c$a])return!1;var c$c=this._events[c$a];if(c$c.lock)c$c.queue||(c$c.queue=[]),c$c.queue.push(c$b);else{var c$d;for(c$c.lock=!0,c$c.cursor=c$c.head;c$c.cursor;)c$d=c$c.cursor,c$c.cursor=c$d.next,c$d.once&&c$l.delNode(c$c,c$d),null!=c$b?c$d.args?c$d.method.apply(c$d.caller,c$d.args.concat(c$b)):c$b instanceof Array?c$d.method.apply(c$d.caller,c$b):c$d.method.call(c$d.caller,c$b):c$d.method.apply(c$d.caller,c$d.args),c$d.once&&c$l.recoverHandler(c$d);c$c.lock=!1,!c$c.head&&this._events&&this._events[c$a]==c$c&&delete this._events[c$a],c$c.queue&&c$c.queue.length&&this.event(c$a,c$c.queue.shift())}return!0},c$a.on=function(c$a,c$b,c$c,c$d){return this._createListener(c$a,c$b,c$c,c$d,!1)},c$a.once=function(c$a,c$b,c$c,c$d){return this._createListener(c$a,c$b,c$c,c$d,!0)},c$a._createListener=function(c$a,c$b,c$c,c$d,c$g,c$h){void 0===c$h&&(c$h=!0),c$h&&this.off(c$a,c$b,c$c,c$g);var c$i=c$l.createHandler(c$b||this,c$c,c$d,c$g);this._events||(this._events={});var c$j=this._events,c$k=c$j[c$a];return c$k?c$k.tail?(c$i.prev=c$k.tail,c$k.tail.next=c$i,c$k.tail=c$i):c$k.head=c$k.tail=c$i:c$j[c$a]={head:c$i,tail:c$i,cursor:null,lock:!1},this},c$a.off=function(c$a,c$b,c$c,c$d){if(void 0===c$d&&(c$d=!1),!this._events||!this._events[c$a])return this;for(var c$g=this._events[c$a],c$h=c$g.head;c$h;){if((!c$b||c$h.caller===c$b)&&c$h.method===c$c&&(!c$d||c$h.once)){c$l.delNode(c$g,c$h),c$g.cursor==c$h&&(c$g.cursor=c$h.next),c$l.recoverHandler(c$h);break}c$h=c$h.next}return this},c$a.offAll=function(c$a){var c$b=this._events;if(!c$b)return this;if(c$a)this._recoverHandlers(c$b[c$a]),delete c$b[c$a];else{for(var c$c in c$b)this._recoverHandlers(c$b[c$c]);this._events=null}return this},c$a._recoverHandlers=function(c$a){if(c$a){for(var c$b=c$a.head;c$b;){c$l.delNode(c$a,c$b);var c$c=c$b.next;c$l.recoverHandler(c$b),c$b=c$c}c$a.cursor=null}},c$a.isMouseEvent=function(c$a){return c$l.MOUSE_EVENTS[c$a]},c$l.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},c$l.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},c$l.delNode=function(c$a,c$b){c$b.prev?c$b.prev.next=c$b.next:c$a.head=c$b.next,c$b.next?c$b.next.prev=c$b.prev:c$a.tail=c$b.prev},c$l.createHandler=function(c$a,c$b,c$c,c$d){var c$g=c$l._freeHandler;return c$g?(c$l._freeCount--,c$l._freeHandler=c$g.next,c$g.caller=c$a,c$g.method=c$b,c$g.args=c$c,c$g.once=c$d):c$g={caller:c$a,method:c$b,args:c$c,once:c$d},c$g.prev=c$g.next=null,c$g},c$l.recoverHandler=function(c$a){c$a.caller=c$a.method=c$a.args=c$a.prev=null,c$a.next=c$l._freeHandler,c$l._freeHandler=c$a,c$l._freeCount++},c$l._freeHandler=null,c$l._freeCount=0,c$l}(),c$u=function(){function c$g(c$a,c$b,c$c,c$d){this.once=!1,void(this._id=0)===c$d&&(c$d=!1),this.setTo(c$a,c$b,c$c,c$d)}c$m(c$g,"laya.utils.Handler");var c$a=c$g.prototype;return c$a.setTo=function(c$a,c$b,c$c,c$d){return this._id=c$g._gid++,this.caller=c$a,this.method=c$b,this.args=c$c,this.once=c$d,this},c$a.run=function(){if(null==this.method)return null;var c$a=this._id,c$b=this.method.apply(this.caller,this.args);return this._id===c$a&&this.once&&this.recover(),c$b},c$a.runWith=function(c$a){if(null==this.method)return null;var c$b=this._id;if(null==c$a)var c$c=this.method.apply(this.caller,this.args);else c$c=this.args||c$a.unshift?this.args?this.method.apply(this.caller,this.args.concat(c$a)):this.method.apply(this.caller,c$a):this.method.call(this.caller,c$a);return this._id===c$b&&this.once&&this.recover(),c$c},c$a.clear=function(){return this.caller=null,this.method=null,this.args=null,this},c$a.recover=function(){0<this._id&&(this._id=0,this.clear())},c$g.create=function(c$a,c$b,c$c,c$d){return void 0===c$d&&(c$d=!0),new c$g(c$a,c$b,c$c,c$d)},c$g._gid=1,c$g}(),c$D=function(){function c$a(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}c$m(c$a,"laya.display.BitmapFont");var c$b=c$a.prototype;return c$b.loadFont=function(c$a,c$b){this._path=c$a,this._complete=c$b,c$z.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],c$u.create(this,this.onLoaded))},c$b.onLoaded=function(){this.parseFont(c$ja.getRes(this._path),c$ja.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},c$b.parseFont=function(c$a,c$b){if(null!=c$a&&null!=c$b){this._texture=c$b;var c$c=c$a.getElementsByTagName("info");if(!c$c[0].getAttributeNode)return this.parseFont2(c$a,c$b);this.fontSize=parseInt(c$c[0].getAttributeNode("size").nodeValue);var c$d,c$g=c$c[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(c$g[0]),parseInt(c$g[1]),parseInt(c$g[2]),parseInt(c$g[3])],c$d=c$a.getElementsByTagName("char");var c$h=0;for(c$h=0;c$h<c$d.length;c$h++){var c$i=c$d[c$h],c$j=parseInt(c$i.getAttributeNode("id").nodeValue),c$k=parseInt(c$i.getAttributeNode("xoffset").nodeValue)/1,c$l=parseInt(c$i.getAttributeNode("yoffset").nodeValue)/1,c$m=parseInt(c$i.getAttributeNode("xadvance").nodeValue)/1,c$n=new c$B;c$n.x=parseInt(c$i.getAttributeNode("x").nodeValue),c$n.y=parseInt(c$i.getAttributeNode("y").nodeValue),c$n.width=parseInt(c$i.getAttributeNode("width").nodeValue),c$n.height=parseInt(c$i.getAttributeNode("height").nodeValue);var c$o=c$ma.create(c$b,c$n.x,c$n.y,c$n.width,c$n.height,c$k,c$l);this._maxWidth=Math.max(this._maxWidth,c$m+this.letterSpacing),this._fontCharDic[c$j]=c$o,this._fontWidthMap[c$j]=c$m}}},c$b.parseFont2=function(c$a,c$b){if(null!=c$a&&null!=c$b){this._texture=c$b;var c$c=c$a.getElementsByTagName("info");this.fontSize=parseInt(c$c[0].attributes.size.nodeValue);var c$d=c$c[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(c$d[0]),parseInt(c$d[1]),parseInt(c$d[2]),parseInt(c$d[3])];var c$g=c$a.getElementsByTagName("char"),c$h=0;for(c$h=0;c$h<c$g.length;c$h++){var c$i=c$g[c$h].attributes,c$j=parseInt(c$i.id.nodeValue),c$k=parseInt(c$i.xoffset.nodeValue)/1,c$l=parseInt(c$i.yoffset.nodeValue)/1,c$m=parseInt(c$i.xadvance.nodeValue)/1,c$n=new c$B;c$n.x=parseInt(c$i.x.nodeValue),c$n.y=parseInt(c$i.y.nodeValue),c$n.width=parseInt(c$i.width.nodeValue),c$n.height=parseInt(c$i.height.nodeValue);var c$o=c$ma.create(c$b,c$n.x,c$n.y,c$n.width,c$n.height,c$k,c$l);this._maxWidth=Math.max(this._maxWidth,c$m+this.letterSpacing),this._fontCharDic[c$j]=c$o,this._fontWidthMap[c$j]=c$m}}},c$b.getCharTexture=function(c$a){return this._fontCharDic[c$a.charCodeAt(0)]},c$b.destroy=function(){if(this._texture){for(var c$a in this._fontCharDic){var c$b=this._fontCharDic[c$a];c$b&&c$b.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},c$b.setSpaceWidth=function(c$a){this._spaceWidth=c$a},c$b.getCharWidth=function(c$a){var c$b=c$a.charCodeAt(0);return this._fontWidthMap[c$b]?this._fontWidthMap[c$b]+this.letterSpacing:" "==c$a?this._spaceWidth+this.letterSpacing:0},c$b.getTextWidth=function(c$a){for(var c$b=0,c$c=0,c$d=c$a.length;c$c<c$d;c$c++)c$b+=this.getCharWidth(c$a.charAt(c$c));return c$b},c$b.getMaxWidth=function(){return this._maxWidth},c$b.getMaxHeight=function(){return this.fontSize},c$b.drawText=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i,c$j=this.getTextWidth(c$a),c$k=0;"center"===c$g&&(c$k=(c$h-c$j)/2),"right"===c$g&&(c$k=c$h-c$j);for(var c$l=0,c$m=0,c$n=c$a.length;c$m<c$n;c$m++)(c$i=this.getCharTexture(c$a.charAt(c$m)))&&(c$b.graphics.drawTexture(c$i,c$c+c$l+c$k,c$d),c$l+=this.getCharWidth(c$a.charAt(c$m)))},c$a}(),c$j=function(){function c$c(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=c$c._TF_EMPTY}c$m(c$c,"laya.display.css.Style");var c$a=c$c.prototype;return c$a.getTransform=function(){return this._tf},c$a.setTransform=function(c$a){this._tf="none"!==c$a&&c$a?c$a:c$c._TF_EMPTY},c$a.setTranslateX=function(c$a){this._tf===c$c._TF_EMPTY&&(this._tf=new c$g),this._tf.translateX=c$a},c$a.setTranslateY=function(c$a){this._tf===c$c._TF_EMPTY&&(this._tf=new c$g),this._tf.translateY=c$a},c$a.setScaleX=function(c$a){this._tf===c$c._TF_EMPTY&&(this._tf=new c$g),this._tf.scaleX=c$a},c$a.setScale=function(c$a,c$b){this._tf===c$c._TF_EMPTY&&(this._tf=new c$g),this._tf.scaleX=c$a,this._tf.scaleY=c$b},c$a.setScaleY=function(c$a){this._tf===c$c._TF_EMPTY&&(this._tf=new c$g),this._tf.scaleY=c$a},c$a.setRotate=function(c$a){this._tf===c$c._TF_EMPTY&&(this._tf=new c$g),this._tf.rotate=c$a},c$a.setSkewX=function(c$a){this._tf===c$c._TF_EMPTY&&(this._tf=new c$g),this._tf.skewX=c$a},c$a.setSkewY=function(c$a){this._tf===c$c._TF_EMPTY&&(this._tf=new c$g),this._tf.skewY=c$a},c$a.destroy=function(){this.scrollRect=null},c$a.render=function(c$a,c$b,c$c,c$d){},c$a.getCSSStyle=function(){return c$ba.EMPTY},c$a._enableLayout=function(){return!1},c$q(0,c$a,"scaleX",function(){return this._tf.scaleX},function(c$a){this.setScaleX(c$a)}),c$q(0,c$a,"transform",function(){return this.getTransform()},function(c$a){this.setTransform(c$a)}),c$q(0,c$a,"translateX",function(){return this._tf.translateX},function(c$a){this.setTranslateX(c$a)}),c$q(0,c$a,"translateY",function(){return this._tf.translateY},function(c$a){this.setTranslateY(c$a)}),c$q(0,c$a,"scaleY",function(){return this._tf.scaleY},function(c$a){this.setScaleY(c$a)}),c$q(0,c$a,"block",function(){return 0!=(1&this._type)}),c$q(0,c$a,"skewY",function(){return this._tf.skewY},function(c$a){this.setSkewY(c$a)}),c$q(0,c$a,"rotate",function(){return this._tf.rotate},function(c$a){this.setRotate(c$a)}),c$q(0,c$a,"skewX",function(){return this._tf.skewX},function(c$a){this.setSkewX(c$a)}),c$q(0,c$a,"paddingLeft",function(){return 0}),c$q(0,c$a,"paddingTop",function(){return 0}),c$q(0,c$a,"absolute",function(){return!0}),c$c.__init__=function(){c$c._TF_EMPTY=new c$g,c$c.EMPTY=new c$c},c$c.EMPTY=null,c$c._TF_EMPTY=null,c$c}(),c$p=function(){function c$b(c$a){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=c$S.create(c$b.defaultColor),this.family=c$b.defaultFamily,this.stroke=c$b._STROKE,this.size=c$b.defaultSize,c$a&&c$a!==c$b.EMPTY&&c$a.copyTo(this)}c$m(c$b,"laya.display.css.Font");var c$a=c$b.prototype;return c$a.set=function(c$a){this._text=null;for(var c$b=c$a.split(" "),c$c=0,c$d=c$b.length;c$c<c$d;c$c++){var c$g=c$b[c$c];switch(c$g){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<c$g.indexOf("px")&&(this.size=parseInt(c$g),this.family=c$b[c$c+1],c$c++)}},c$a.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},c$a.copyTo=function(c$a){c$a._type=this._type,c$a._text=this._text,c$a._weight=this._weight,c$a._color=this._color,c$a.family=this.family,c$a.stroke=this.stroke!=c$b._STROKE?this.stroke.slice():c$b._STROKE,c$a.indent=this.indent,c$a.size=this.size},c$q(0,c$a,"password",function(){return 0!=(1024&this._type)},function(c$a){c$a?this._type|=1024:this._type&=-1025}),c$q(0,c$a,"color",function(){return this._color.strColor},function(c$a){this._color=c$S.create(c$a)}),c$q(0,c$a,"italic",function(){return 0!=(512&this._type)},function(c$a){c$a?this._type|=512:this._type&=-513}),c$q(0,c$a,"bold",function(){return 0!=(2048&this._type)},function(c$a){c$a?this._type|=2048:this._type&=-2049}),c$q(0,c$a,"weight",function(){return""+this._weight},function(c$a){var c$b=0;switch(c$a){case"normal":break;case"bold":this.bold=!0,c$b=700;break;case"bolder":c$b=800;break;case"lighter":c$b=100;break;default:c$b=parseInt(c$a)}this._weight=c$b,this._text=null}),c$q(0,c$a,"decoration",function(){return this._decoration?this._decoration.value:null},function(c$a){var c$b=c$a.split(" ");switch(this._decoration||(this._decoration={}),c$b[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=c$b[0]}c$b[1]&&(this._decoration.color=c$S.create(c$b)),this._decoration.value=c$a}),c$b.__init__=function(){c$b.EMPTY=new c$b(null)},c$b.EMPTY=null,c$b.defaultColor="#000000",c$b.defaultSize=12,c$b.defaultFamily="Arial",c$b.defaultFont="12px Arial",c$b._STROKE=[0,"#000000"],c$b._ITALIC=512,c$b._PASSWORD=1024,c$b._BOLD=2048,c$b}(),c$g=function(){function c$a(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return c$m(c$a,"laya.display.css.TransformInfo"),c$a}(),c$o=function(){function c$n(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,c$J.isConchNode){this._nativeObj=new c$i._conchGraphics,this.id=this._nativeObj.conchID}}c$m(c$n,"laya.display.Graphics");var c$a=c$n.prototype;return c$a.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},c$a.clear=function(c$a){void 0===c$a&&(c$a=!1);var c$b=0,c$c=0;if(c$a){var c$d=this._one;if(this._cmds){for(c$c=this._cmds.length,c$b=0;c$b<c$c;c$b++)!(c$d=this._cmds[c$b])||c$d.callee!==c$J._context._drawTexture&&c$d.callee!==c$J._context._drawTextureWithTransform||(c$d[0]=null,c$n._cache.push(c$d));this._cmds.length=0}else c$d&&(!c$d||c$d.callee!==c$J._context._drawTexture&&c$d.callee!==c$J._context._drawTextureWithTransform||(c$d[0]=null,c$n._cache.push(c$d)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(c$b=0,c$c=this._vectorgraphArray.length;c$b<c$c;c$b++)c$_.getInstance().deleteShape(this._vectorgraphArray[c$b]);this._vectorgraphArray.length=0}},c$a._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},c$a._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new c$c,this._graphicBounds._graphics=this)},c$a._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},c$a._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},c$a.getBounds=function(c$a){return void 0===c$a&&(c$a=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(c$a)},c$a.getBoundPoints=function(c$a){return void 0===c$a&&(c$a=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(c$a)},c$a._addCmd=function(c$a){this._cmds=this._cmds||[],c$a.callee=c$a.shift(),this._cmds.push(c$a)},c$a.setFilters=function(c$a){this._saveToCmd(c$J._context._setFilters,c$a)},c$a.drawTexture=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){if(void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0),void 0===c$d&&(c$d=0),void 0===c$g&&(c$g=0),void 0===c$i&&(c$i=1),!c$a||c$i<.01)return null;c$d||(c$d=c$a.sourceWidth),c$g||(c$g=c$a.sourceHeight),c$i=c$i<0?0:1<c$i?1:c$i;var c$j,c$k=!c$J.isWebGL&&(c$O.onFirefox||c$O.onEdge||c$O.onIE||c$O.onSafari)?.5:0,c$l=c$d/c$a.sourceWidth,c$m=c$g/c$a.sourceHeight;return c$d=c$a.width*c$l,c$g=c$a.height*c$m,c$a.loaded&&(c$d<=0||c$g<=0)?null:(c$b+=c$a.offsetX*c$l,c$c+=c$a.offsetY*c$m,this._sp&&(this._sp._renderType|=512),c$b-=c$k,c$c-=c$k,c$d+=2*c$k,c$g+=2*c$k,c$n._cache.length?((c$j=c$n._cache.pop())[0]=c$a,c$j[1]=c$b,c$j[2]=c$c,c$j[3]=c$d,c$j[4]=c$g,c$j[5]=c$h,c$j[6]=c$i):c$j=[c$a,c$b,c$c,c$d,c$g,c$h,c$i],c$j.callee=c$h||1!=c$i?c$J._context._drawTextureWithTransform:c$J._context._drawTexture,null!=this._one||c$h||1!=c$i?this._saveToCmd(c$j.callee,c$j):(this._one=c$j,this._render=this._renderOneImg),c$a.loaded||c$a.once("loaded",this,this._textureLoaded,[c$a,c$j]),this._repaint(),c$j)},c$a.cleanByTexture=function(c$a,c$b,c$c,c$d,c$g){if(void 0===c$d&&(c$d=0),void 0===c$g&&(c$g=0),!c$a)return this.clear();if(this._one&&this._render===this._renderOneImg){c$d||(c$d=c$a.sourceWidth),c$g||(c$g=c$a.sourceHeight);var c$h=c$d/c$a.sourceWidth,c$i=c$g/c$a.sourceHeight;c$d=c$a.width*c$h,c$g=c$a.height*c$i,c$b+=c$a.offsetX*c$h,c$c+=c$a.offsetY*c$i,this._one[0]=c$a,this._one[1]=c$b,this._one[2]=c$c,this._one[3]=c$d,this._one[4]=c$g,this._repaint()}else this.clear(),c$a&&this.drawTexture(c$a,c$b,c$c,c$d,c$g)},c$a.drawTextures=function(c$a,c$b){c$a&&this._saveToCmd(c$J._context._drawTextures,[c$a,c$b])},c$a.fillTexture=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){if(void 0===c$d&&(c$d=0),void 0===c$g&&(c$g=0),void 0===c$h&&(c$h="repeat"),c$a){var c$j=[c$a,c$b,c$c,c$d,c$g,c$h,c$i||c$A.EMPTY,{}];c$a.loaded||c$a.once("loaded",this,this._textureLoaded,[c$a,c$j]),this._saveToCmd(c$J._context._fillTexture,c$j)}},c$a._textureLoaded=function(c$a,c$b){c$b[3]=c$b[3]||c$a.width,c$b[4]=c$b[4]||c$a.height,this._repaint()},c$a.fillCircle=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){c$c.bitmap.enableMerageInAtlas=!1;var c$j=new Float32Array(2*(c$i+1)),c$k=new Float32Array(2*(c$i+1)),c$l=new Uint16Array(3*c$i),c$m=2*Math.PI/c$i,c$n=0;c$j[0]=c$d,c$j[1]=c$g,c$k[0]=c$d/c$c.width,c$k[1]=c$g/c$c.height;for(var c$o=2,c$p=0;c$p<c$i;c$p++){var c$q=c$h*Math.cos(c$n)+c$d,c$r=c$h*Math.sin(c$n)+c$g;c$j[c$o]=c$q,c$j[c$o+1]=c$r,c$k[c$o]=c$q/c$c.width,c$k[c$o+1]=c$r/c$c.height,c$n+=c$m,c$o+=2}for(c$p=c$o=0;c$p<c$i;c$p++)c$l[c$o++]=0,c$l[c$o++]=c$p+1,c$l[c$o++]=c$i+1<=c$p+2?1:c$p+2;this.drawTriangles(c$c,c$a,c$b,c$j,c$k,c$l)},c$a.drawTriangles=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l){void 0===c$j&&(c$j=1),this._saveToCmd(c$J._context.drawTriangles,[c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l])},c$a._saveToCmd=function(c$a,c$b){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=c$b,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(c$b)),c$b.callee=c$a,this._repaint(),c$b},c$a.clipRect=function(c$a,c$b,c$c,c$d){this._saveToCmd(c$J._context._clipRect,[c$a,c$b,c$c,c$d])},c$a.fillText=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){void 0===c$i&&(c$i=0),this._saveToCmd(c$J._context._fillText,[c$a,c$b,c$c,c$d||c$p.defaultFont,c$g,c$h])},c$a.fillBorderText=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){this._saveToCmd(c$J._context._fillBorderText,[c$a,c$b,c$c,c$d||c$p.defaultFont,c$g,c$h,c$i,c$j])},c$a.strokeText=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){this._saveToCmd(c$J._context._strokeText,[c$a,c$b,c$c,c$d||c$p.defaultFont,c$g,c$h,c$i])},c$a.alpha=function(c$a){c$a=c$a<0?0:1<c$a?1:c$a,this._saveToCmd(c$J._context._alpha,[c$a])},c$a.setAlpha=function(c$a){c$a=c$a<0?0:1<c$a?1:c$a,this._saveToCmd(c$J._context._setAlpha,[c$a])},c$a.transform=function(c$a,c$b,c$c){void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0),this._saveToCmd(c$J._context._transform,[c$a,c$b,c$c])},c$a.rotate=function(c$a,c$b,c$c){void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0),this._saveToCmd(c$J._context._rotate,[c$a,c$b,c$c])},c$a.scale=function(c$a,c$b,c$c,c$d){void 0===c$c&&(c$c=0),void 0===c$d&&(c$d=0),this._saveToCmd(c$J._context._scale,[c$a,c$b,c$c,c$d])},c$a.translate=function(c$a,c$b){this._saveToCmd(c$J._context._translate,[c$a,c$b])},c$a.save=function(){this._saveToCmd(c$J._context._save,[])},c$a.restore=function(){this._saveToCmd(c$J._context._restore,[])},c$a.replaceText=function(c$a){this._repaint();var c$b=this._cmds;if(c$b){for(var c$c=c$b.length-1;-1<c$c;c$c--)if(this._isTextCmd(c$b[c$c].callee))return c$b[c$c][0].toUpperCase?c$b[c$c][0]=c$a:c$b[c$c][0].setText(c$a),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=c$a:this._one[0].setText(c$a),!0;return!1},c$a._isTextCmd=function(c$a){return c$a===c$J._context._fillText||c$a===c$J._context._fillBorderText||c$a===c$J._context._strokeText},c$a.replaceTextColor=function(c$a){this._repaint();var c$b=this._cmds;if(c$b)for(var c$c=c$b.length-1;-1<c$c;c$c--)this._isTextCmd(c$b[c$c].callee)&&(c$b[c$c][4]=c$a,c$b[c$c][0].toUpperCase||(c$b[c$c][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=c$a,this._one[0].toUpperCase||(this._one[0].changed=!0))},c$a.loadImage=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i=this;void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0),void 0===c$d&&(c$d=0),void 0===c$g&&(c$g=0);var c$j=c$ja.getRes(c$a);function c$k(c$a){c$a&&(c$i.drawTexture(c$a,c$b,c$c,c$d,c$g),null!=c$h&&c$h.call(c$i._sp,c$a))}c$j?c$k(c$j):c$z.loader.load(c$a,c$u.create(null,c$k),null,"image")},c$a._renderEmpty=function(c$a,c$b,c$c,c$d){},c$a._renderAll=function(c$a,c$b,c$c,c$d){for(var c$g,c$h=this._cmds,c$i=0,c$j=c$h.length;c$i<c$j;c$i++)(c$g=c$h[c$i]).callee.call(c$b,c$c,c$d,c$g)},c$a._renderOne=function(c$a,c$b,c$c,c$d){this._one.callee.call(c$b,c$c,c$d,this._one)},c$a._renderOneImg=function(c$a,c$b,c$c,c$d){this._one.callee.call(c$b,c$c,c$d,this._one),2305!==c$a._renderType&&(c$a._renderType|=1)},c$a.drawLine=function(c$a,c$b,c$c,c$d,c$g,c$h){void 0===c$h&&(c$h=1);var c$i=0;c$J.isWebGL&&(c$i=c$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(c$i));var c$j=c$h%2==0?0:.5,c$k=[c$a+c$j,c$b+c$j,c$c+c$j,c$d+c$j,c$g,c$h,c$i];this._saveToCmd(c$J._context._drawLine,c$k)},c$a.drawLines=function(c$a,c$b,c$c,c$d,c$g){void 0===c$g&&(c$g=1);var c$h=0;if(c$c&&!(c$c.length<4)){c$J.isWebGL&&(c$h=c$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(c$h));var c$i=c$g%2==0?0:.5,c$j=[c$a+c$i,c$b+c$i,c$c,c$d,c$g,c$h];this._saveToCmd(c$J._context._drawLines,c$j)}},c$a.drawCurves=function(c$a,c$b,c$c,c$d,c$g){void 0===c$g&&(c$g=1);var c$h=[c$a,c$b,c$c,c$d,c$g];this._saveToCmd(c$J._context._drawCurves,c$h)},c$a.drawRect=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){void 0===c$i&&(c$i=1);var c$j=c$h?c$i/2:0,c$k=c$h?c$i:0,c$l=[c$a+c$j,c$b+c$j,c$c-c$k,c$d-c$k,c$g,c$h,c$i];this._saveToCmd(c$J._context._drawRect,c$l)},c$a.drawCircle=function(c$a,c$b,c$c,c$d,c$g,c$h){void 0===c$h&&(c$h=1);var c$i=c$g?c$h/2:0,c$j=0;c$J.isWebGL&&(c$j=c$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(c$j));var c$k=[c$a,c$b,c$c-c$i,c$d,c$g,c$h,c$j];this._saveToCmd(c$J._context._drawCircle,c$k)},c$a.drawPie=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){void 0===c$j&&(c$j=1);var c$k=c$i?c$j/2:0,c$l=c$i?c$j:0,c$m=0;c$J.isWebGL&&(c$m=c$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(c$m));var c$n=[c$a+c$k,c$b+c$k,c$c-c$l,c$d,c$g,c$h,c$i,c$j,c$m];c$n[3]=c$$.toRadian(c$d),c$n[4]=c$$.toRadian(c$g),this._saveToCmd(c$J._context._drawPie,c$n)},c$a.drawPoly=function(c$a,c$b,c$c,c$d,c$g,c$h){void 0===c$h&&(c$h=1);var c$i=0,c$j=!1;c$J.isWebGL&&(c$i=c$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(c$i),c$j=!(6<c$c.length));var c$k=c$g?c$h%2==0?0:.5:0,c$l=[c$a+c$k,c$b+c$k,c$c,c$d,c$g,c$h,c$i,c$j];this._saveToCmd(c$J._context._drawPoly,c$l)},c$a.drawPath=function(c$a,c$b,c$c,c$d,c$g){var c$h=[c$a,c$b,c$c,c$d,c$g];this._saveToCmd(c$J._context._drawPath,c$h)},c$q(0,c$a,"cmds",function(){return this._cmds},function(c$a){this._sp&&(this._sp._renderType|=512),this._cmds=c$a,this._render=this._renderAll,this._repaint()}),c$n.__init__=function(){if(c$J.isConchNode){for(var c$a=laya.display.Graphics.prototype,c$b=c$O.window.ConchGraphics.prototype,c$c=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],c$d=0,c$g=c$c.length;c$d<=c$g;c$d++){var c$h=c$c[c$d];c$a[c$h]=c$b[c$h]}c$a._saveToCmd=null,c$b.drawImageS&&(c$a.drawTextures=function(c$a,c$b){if(c$a&&c$a.loaded&&c$a.bitmap&&c$a.source){var c$c=c$a.uv,c$d=c$a.bitmap.width,c$g=c$a.bitmap.height;this.drawImageS(c$a.bitmap.source,c$c[0]*c$d,c$c[1]*c$g,(c$c[2]-c$c[0])*c$d,(c$c[5]-c$c[3])*c$g,c$a.offsetX,c$a.offsetY,c$a.width,c$a.height,c$b)}}),c$a.drawTexture=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){if(void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0),void 0===c$d&&(c$d=0),void 0===c$g&&(c$g=0),void 0===c$i&&(c$i=1),c$a)if(c$a.loaded){if(c$a.loaded&&c$a.bitmap&&c$a.source&&(c$d||(c$d=c$a.sourceWidth),c$g||(c$g=c$a.sourceHeight),c$i=c$i<0?0:1<c$i?1:c$i,c$d=c$d-c$a.sourceWidth+c$a.width,c$g=c$g-c$a.sourceHeight+c$a.height,!(c$d<=0||c$g<=0))){c$b+=c$a.offsetX,c$c+=c$a.offsetY;var c$j=c$a.uv,c$k=c$a.bitmap.width,c$l=c$a.bitmap.height;c$j[4]<c$j[0]&&c$j[5]<c$j[1]?this.drawImageM(c$a.bitmap.source,c$j[4]*c$k,c$j[5]*c$l,(c$j[0]-c$j[4])*c$k,(c$j[1]-c$j[5])*c$l,c$b,c$c,c$d,c$g,c$h,c$i):this.drawImageM(c$a.bitmap.source,c$j[0]*c$k,c$j[1]*c$l,(c$j[2]-c$j[0])*c$k,(c$j[5]-c$j[3])*c$l,c$b,c$c,c$d,c$g,c$h,c$i),this._repaint()}}else c$a.once("loaded",this,function(){this.drawTexture(c$a,c$b,c$c,c$d,c$g,c$h)})},c$a.fillTexture=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){if(void 0===c$d&&(c$d=0),void 0===c$g&&(c$g=0),void 0===c$h&&(c$h="repeat"),c$a&&c$a.loaded){var c$j,c$k=c$J._context.ctx,c$l=c$a.bitmap.width,c$m=c$a.bitmap.height,c$n=c$a.uv;c$j=c$a.uv!=c$ma.DEF_UV?c$k.createPattern(c$a.bitmap.source,c$h,c$n[0]*c$l,c$n[1]*c$m,(c$n[2]-c$n[0])*c$l,(c$n[5]-c$n[3])*c$m):c$k.createPattern(c$a.bitmap.source,c$h);var c$o=0,c$p=0;c$i&&(c$b+=c$i.x%c$a.width,c$c+=c$i.y%c$a.height,c$o-=c$i.x%c$a.width,c$p-=c$i.y%c$a.height),this._fillImage(c$j,c$b,c$c,c$o,c$p,c$d,c$g)}}}},c$n._cache=[],c$n}(),c$c=function(){function c$v(){this._cacheBoundsType=!1}c$m(c$v,"laya.display.GraphicsBounds");var c$a=c$v.prototype;return c$a.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},c$a.reset=function(){this._temp&&(this._temp.length=0)},c$a.getBounds=function(c$a){return void 0===c$a&&(c$a=!1),(!this._bounds||!this._temp||this._temp.length<1||c$a!=this._cacheBoundsType)&&(this._bounds=c$B._getWrapRec(this.getBoundPoints(c$a),this._bounds)),this._cacheBoundsType=c$a,this._bounds},c$a.getBoundPoints=function(c$a){return void 0===c$a&&(c$a=!1),(!this._temp||this._temp.length<1||c$a!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(c$a)),this._cacheBoundsType=c$a,this._rstBoundPoints=c$$.copyArray(this._rstBoundPoints,this._temp)},c$a._getCmdPoints=function(c$a){void 0===c$a&&(c$a=!1);var c$b,c$c,c$d=c$J._context,c$g=this._graphics.cmds;if((c$b=this._temp||(this._temp=[])).length=0,c$g||null==this._graphics._one||(c$v._tempCmds.length=0,c$v._tempCmds.push(this._graphics._one),c$g=c$v._tempCmds),!c$g)return c$b;(c$c=c$v._tempMatrixArrays).length=0;var c$h=c$v._initMatrix;c$h.identity();for(var c$i,c$j,c$k=c$v._tempMatrix,c$l=NaN,c$m=NaN,c$n=NaN,c$o=NaN,c$p=NaN,c$q=NaN,c$r=0,c$s=c$g.length;c$r<c$s;c$r++)if((c$i=c$g[c$r]).callee)switch(c$i.callee){case c$d._save:case 7:c$c.push(c$h),c$h=c$h.clone();break;case c$d._restore:case 8:c$h=c$c.pop();break;case c$d._scale:case 5:c$k.identity(),c$k.translate(-c$i[2],-c$i[3]),c$k.scale(c$i[0],c$i[1]),c$k.translate(c$i[2],c$i[3]),this._switchMatrix(c$h,c$k);break;case c$d._rotate:case 3:c$k.identity(),c$k.translate(-c$i[1],-c$i[2]),c$k.rotate(c$i[0]),c$k.translate(c$i[1],c$i[2]),this._switchMatrix(c$h,c$k);break;case c$d._translate:case 6:c$k.identity(),c$k.translate(c$i[0],c$i[1]),this._switchMatrix(c$h,c$k);break;case c$d._transform:case 4:c$k.identity(),c$k.translate(-c$i[1],-c$i[2]),c$k.concat(c$i[0]),c$k.translate(c$i[1],c$i[2]),this._switchMatrix(c$h,c$k);break;case 16:case 24:c$v._addPointArrToRst(c$b,c$B._getBoundPointS(c$i[0],c$i[1],c$i[2],c$i[3]),c$h);break;case 17:c$h.copyTo(c$k),c$k.concat(c$i[4]),c$v._addPointArrToRst(c$b,c$B._getBoundPointS(c$i[0],c$i[1],c$i[2],c$i[3]),c$k);break;case c$d._drawTexture:c$j=c$i[0],c$a?c$i[3]&&c$i[4]?c$v._addPointArrToRst(c$b,c$B._getBoundPointS(c$i[1],c$i[2],c$i[3],c$i[4]),c$h):(c$j=c$i[0],c$v._addPointArrToRst(c$b,c$B._getBoundPointS(c$i[1],c$i[2],c$j.width,c$j.height),c$h)):(c$l=(c$i[3]||c$j.sourceWidth)/c$j.width,c$m=(c$i[4]||c$j.sourceHeight)/c$j.height,c$n=c$l*c$j.sourceWidth,c$o=c$m*c$j.sourceHeight,c$p=0<c$j.offsetX?c$j.offsetX:0,c$q=0<c$j.offsetY?c$j.offsetY:0,c$p*=c$l,c$q*=c$m,c$v._addPointArrToRst(c$b,c$B._getBoundPointS(c$i[1]-c$p,c$i[2]-c$q,c$n,c$o),c$h));break;case c$d._fillTexture:c$i[3]&&c$i[4]?c$v._addPointArrToRst(c$b,c$B._getBoundPointS(c$i[1],c$i[2],c$i[3],c$i[4]),c$h):(c$j=c$i[0],c$v._addPointArrToRst(c$b,c$B._getBoundPointS(c$i[1],c$i[2],c$j.width,c$j.height),c$h));break;case c$d._drawTextureWithTransform:var c$t;c$t=c$i[5]?(c$h.copyTo(c$k),c$k.concat(c$i[5]),c$k):c$h,c$a?c$i[3]&&c$i[4]?c$v._addPointArrToRst(c$b,c$B._getBoundPointS(c$i[1],c$i[2],c$i[3],c$i[4]),c$t):(c$j=c$i[0],c$v._addPointArrToRst(c$b,c$B._getBoundPointS(c$i[1],c$i[2],c$j.width,c$j.height),c$t)):(c$j=c$i[0],c$l=(c$i[3]||c$j.sourceWidth)/c$j.width,c$m=(c$i[4]||c$j.sourceHeight)/c$j.height,c$n=c$l*c$j.sourceWidth,c$o=c$m*c$j.sourceHeight,c$p=0<c$j.offsetX?c$j.offsetX:0,c$q=0<c$j.offsetY?c$j.offsetY:0,c$p*=c$l,c$q*=c$m,c$v._addPointArrToRst(c$b,c$B._getBoundPointS(c$i[1]-c$p,c$i[2]-c$q,c$n,c$o),c$t));break;case c$d._drawRect:case 13:c$v._addPointArrToRst(c$b,c$B._getBoundPointS(c$i[0],c$i[1],c$i[2],c$i[3]),c$h);break;case c$d._drawCircle:case c$d._fillCircle:case 14:c$v._addPointArrToRst(c$b,c$B._getBoundPointS(c$i[0]-c$i[2],c$i[1]-c$i[2],c$i[2]+c$i[2],c$i[2]+c$i[2]),c$h);break;case c$d._drawLine:case 20:c$v._tempPoints.length=0;var c$u;c$u=.5*c$i[5],c$i[0]==c$i[2]?c$v._tempPoints.push(c$i[0]+c$u,c$i[1],c$i[2]+c$u,c$i[3],c$i[0]-c$u,c$i[1],c$i[2]-c$u,c$i[3]):c$i[1]==c$i[3]?c$v._tempPoints.push(c$i[0],c$i[1]+c$u,c$i[2],c$i[3]+c$u,c$i[0],c$i[1]-c$u,c$i[2],c$i[3]-c$u):c$v._tempPoints.push(c$i[0],c$i[1],c$i[2],c$i[3]),c$v._addPointArrToRst(c$b,c$v._tempPoints,c$h);break;case c$d._drawCurves:case 22:c$v._addPointArrToRst(c$b,c$w.I.getBezierPoints(c$i[2]),c$h,c$i[0],c$i[1]);break;case c$d._drawPoly:case c$d._drawLines:case 18:c$v._addPointArrToRst(c$b,c$i[2],c$h,c$i[0],c$i[1]);break;case c$d._drawPath:case 19:c$v._addPointArrToRst(c$b,this._getPathPoints(c$i[2]),c$h,c$i[0],c$i[1]);break;case c$d._drawPie:case 15:c$v._addPointArrToRst(c$b,this._getPiePoints(c$i[0],c$i[1],c$i[2],c$i[3],c$i[4]),c$h)}return 200<c$b.length?c$b=c$$.copyArray(c$b,c$B._getWrapRec(c$b)._getBoundPoints()):8<c$b.length&&(c$b=c$x.scanPList(c$b)),c$b},c$a._switchMatrix=function(c$a,c$b){c$b.concat(c$a),c$b.copyTo(c$a)},c$a._getPiePoints=function(c$a,c$b,c$c,c$d,c$g){var c$h=c$v._tempPoints;c$v._tempPoints.length=0,c$h.push(c$a,c$b);var c$i=(c$g-c$d)%(2*Math.PI)/10,c$j=NaN,c$k=c$d;for(c$j=0;c$j<=10;c$j++)c$h.push(c$a+c$c*Math.cos(c$k),c$b+c$c*Math.sin(c$k)),c$k+=c$i;return c$h},c$a._getPathPoints=function(c$a){var c$b,c$c,c$d=0,c$g=c$v._tempPoints;for(c$g.length=0,c$b=c$a.length,c$d=0;c$d<c$b;c$d++)1<(c$c=c$a[c$d]).length&&(c$g.push(c$c[1],c$c[2]),3<c$c.length&&c$g.push(c$c[3],c$c[4]));return c$g},c$v._addPointArrToRst=function(c$a,c$b,c$c,c$d,c$g){void 0===c$d&&(c$d=0),void 0===c$g&&(c$g=0);var c$h,c$i=0;for(c$h=c$b.length,c$i=0;c$i<c$h;c$i+=2)c$v._addPointToRst(c$a,c$b[c$i]+c$d,c$b[c$i+1]+c$g,c$c)},c$v._addPointToRst=function(c$a,c$b,c$c,c$d){var c$g=c$A.TEMP;c$g.setTo(c$b||0,c$c||0),c$d.transformPoint(c$g),c$a.push(c$g.x,c$g.y)},c$v._tempPoints=[],c$v._tempMatrixArrays=[],c$v._tempCmds=[],c$k(c$v,["_tempMatrix",function(){return this._tempMatrix=new c$G},"_initMatrix",function(){return this._initMatrix=new c$G}]),c$v}(),c$h=function(){function c$a(){}c$m(c$a,"laya.events.Event");var c$b=c$a.prototype;return c$b.setTo=function(c$a,c$b,c$c){return this.type=c$a,this.currentTarget=c$b,this.target=c$c,this},c$b.stopPropagation=function(){this._stoped=!0},c$q(0,c$b,"stageY",function(){return c$z.stage.mouseY}),c$q(0,c$b,"charCode",function(){return this.nativeEvent.charCode}),c$q(0,c$b,"touches",function(){var c$a=this.nativeEvent.touches;if(c$a)for(var c$b=c$z.stage,c$c=0,c$d=c$a.length;c$c<c$d;c$c++){var c$g=c$a[c$c],c$h=c$A.TEMP;c$h.setTo(c$g.clientX,c$g.clientY),c$b._canvasTransform.invertTransformPoint(c$h),c$b.transform.invertTransformPoint(c$h),c$g.stageX=c$h.x,c$g.stageY=c$h.y}return c$a}),c$q(0,c$b,"keyLocation",function(){return this.nativeEvent.keyLocation}),c$q(0,c$b,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),c$q(0,c$b,"altKey",function(){return this.nativeEvent.altKey}),c$q(0,c$b,"shiftKey",function(){return this.nativeEvent.shiftKey}),c$q(0,c$b,"stageX",function(){return c$z.stage.mouseX}),c$a.EMPTY=new c$a,c$a.MOUSE_DOWN="mousedown",c$a.MOUSE_UP="mouseup",c$a.CLICK="click",c$a.RIGHT_MOUSE_DOWN="rightmousedown",c$a.RIGHT_MOUSE_UP="rightmouseup",c$a.RIGHT_CLICK="rightclick",c$a.MOUSE_MOVE="mousemove",c$a.MOUSE_OVER="mouseover",c$a.MOUSE_OUT="mouseout",c$a.MOUSE_WHEEL="mousewheel",c$a.ROLL_OVER="mouseover",c$a.ROLL_OUT="mouseout",c$a.DOUBLE_CLICK="doubleclick",c$a.CHANGE="change",c$a.CHANGED="changed",c$a.RESIZE="resize",c$a.ADDED="added",c$a.REMOVED="removed",c$a.DISPLAY="display",c$a.UNDISPLAY="undisplay",c$a.ERROR="error",c$a.COMPLETE="complete",c$a.LOADED="loaded",c$a.INITED="inited",c$a.PROGRESS="progress",c$a.INPUT="input",c$a.RENDER="render",c$a.OPEN="open",c$a.MESSAGE="message",c$a.CLOSE="close",c$a.KEY_DOWN="keydown",c$a.KEY_PRESS="keypress",c$a.KEY_UP="keyup",c$a.FRAME="enterframe",c$a.DRAG_START="dragstart",c$a.DRAG_MOVE="dragmove",c$a.DRAG_END="dragend",c$a.ENTER="enter",c$a.SELECT="select",c$a.BLUR="blur",c$a.FOCUS="focus",c$a.VISIBILITY_CHANGE="visibilitychange",c$a.FOCUS_CHANGE="focuschange",c$a.PLAYED="played",c$a.PAUSED="paused",c$a.STOPPED="stopped",c$a.START="start",c$a.END="end",c$a.ENABLE_CHANGED="enablechanged",c$a.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",c$a.COMPONENT_ADDED="componentadded",c$a.COMPONENT_REMOVED="componentremoved",c$a.LAYER_CHANGED="layerchanged",c$a.HIERARCHY_LOADED="hierarchyloaded",c$a.RECOVERED="recovered",c$a.RELEASED="released",c$a.LINK="link",c$a.LABEL="label",c$a.FULL_SCREEN_CHANGE="fullscreenchange",c$a.DEVICE_LOST="devicelost",c$a.MESH_CHANGED="meshchanged",c$a.MATERIAL_CHANGED="materialchanged",c$a.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",c$a.ANIMATION_CHANGED="animationchanged",c$a.TRIGGER_ENTER="triggerenter",c$a.TRIGGER_STAY="triggerstay",c$a.TRIGGER_EXIT="triggerexit",c$a.TRAIL_FILTER_CHANGE="trailfilterchange",c$a.DOMINO_FILTER_CHANGE="dominofilterchange",c$a}(),c$n=(function(){function c$a(){}c$m(c$a,"laya.events.Keyboard"),c$a.NUMBER_0=48,c$a.NUMBER_1=49,c$a.NUMBER_2=50,c$a.NUMBER_3=51,c$a.NUMBER_4=52,c$a.NUMBER_5=53,c$a.NUMBER_6=54,c$a.NUMBER_7=55,c$a.NUMBER_8=56,c$a.NUMBER_9=57,c$a.A=65,c$a.B=66,c$a.C=67,c$a.D=68,c$a.E=69,c$a.F=70,c$a.G=71,c$a.H=72,c$a.I=73,c$a.J=74,c$a.K=75,c$a.L=76,c$a.M=77,c$a.N=78,c$a.O=79,c$a.P=80,c$a.Q=81,c$a.R=82,c$a.S=83,c$a.T=84,c$a.U=85,c$a.V=86,c$a.W=87,c$a.X=88,c$a.Y=89,c$a.Z=90,c$a.F1=112,c$a.F2=113,c$a.F3=114,c$a.F4=115,c$a.F5=116,c$a.F6=117,c$a.F7=118,c$a.F8=119,c$a.F9=120,c$a.F10=121,c$a.F11=122,c$a.F12=123,c$a.F13=124,c$a.F14=125,c$a.F15=126,c$a.NUMPAD=21,c$a.NUMPAD_0=96,c$a.NUMPAD_1=97,c$a.NUMPAD_2=98,c$a.NUMPAD_3=99,c$a.NUMPAD_4=100,c$a.NUMPAD_5=101,c$a.NUMPAD_6=102,c$a.NUMPAD_7=103,c$a.NUMPAD_8=104,c$a.NUMPAD_9=105,c$a.NUMPAD_ADD=107,c$a.NUMPAD_DECIMAL=110,c$a.NUMPAD_DIVIDE=111,c$a.NUMPAD_ENTER=108,c$a.NUMPAD_MULTIPLY=106,c$a.NUMPAD_SUBTRACT=109,c$a.SEMICOLON=186,c$a.EQUAL=187,c$a.COMMA=188,c$a.MINUS=189,c$a.PERIOD=190,c$a.SLASH=191,c$a.BACKQUOTE=192,c$a.LEFTBRACKET=219,c$a.BACKSLASH=220,c$a.RIGHTBRACKET=221,c$a.QUOTE=222,c$a.ALTERNATE=18,c$a.BACKSPACE=8,c$a.CAPS_LOCK=20,c$a.COMMAND=15,c$a.CONTROL=17,c$a.DELETE=46,c$a.ENTER=13,c$a.ESCAPE=27,c$a.PAGE_UP=33,c$a.PAGE_DOWN=34,c$a.END=35,c$a.HOME=36,c$a.LEFT=37,c$a.UP=38,c$a.RIGHT=39,c$a.DOWN=40,c$a.SHIFT=16,c$a.SPACE=32,c$a.TAB=9,c$a.INSERT=45}(),function(){function c$g(){}return c$m(c$g,"laya.events.KeyBoardManager"),c$g.__init__=function(){c$g._addEvent("keydown"),c$g._addEvent("keypress"),c$g._addEvent("keyup")},c$g._addEvent=function(c$b){c$O.document.addEventListener(c$b,function(c$a){laya.events.KeyBoardManager._dispatch(c$a,c$b)},!0)},c$g._dispatch=function(c$a,c$b){if(c$g.enabled){c$g._event._stoped=!1,c$g._event.nativeEvent=c$a,c$g._event.keyCode=c$a.keyCode||c$a.which||c$a.charCode,"keydown"===c$b?c$g._pressKeys[c$g._event.keyCode]=!0:"keyup"===c$b&&(c$g._pressKeys[c$g._event.keyCode]=null);for(var c$c=c$z.stage.focus&&null!=c$z.stage.focus.event&&c$z.stage.focus.displayedInStage?c$z.stage.focus:c$z.stage,c$d=c$c;c$d;)c$d.event(c$b,c$g._event.setTo(c$b,c$d,c$c)),c$d=c$d.parent}},c$g.hasKeyDown=function(c$a){return c$g._pressKeys[c$a]},c$g._pressKeys={},c$g.enabled=!0,c$k(c$g,["_event",function(){return this._event=new c$h}]),c$g}()),c$r=(function(){function c$a(){}c$m(c$a,"laya.events.KeyLocation"),c$a.STANDARD=0,c$a.LEFT=1,c$a.RIGHT=2,c$a.NUM_PAD=3}(),function(){function c$l(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=c$O.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new c$h,this._matrix=new c$G,this._point=new c$A,this._rect=new c$B,this._prePoint=new c$A,this._curTouchID=NaN}c$m(c$l,"laya.events.MouseManager");var c$a=c$l.prototype;return c$a.__init__=function(c$a,c$b){var c$c=this;this._stage=c$a;var c$d=this,c$g=this._eventList;c$b.oncontextmenu=function(c$a){if(c$l.enabled)return!1},c$b.addEventListener("mousedown",function(c$a){c$l.enabled&&(c$O.onIE||c$a.preventDefault(),c$g.push(c$a),c$d.mouseDownTime=c$O.now())}),c$b.addEventListener("mouseup",function(c$a){c$l.enabled&&(c$a.preventDefault(),c$g.push(c$a),c$d.mouseDownTime=-c$O.now())},!0),c$b.addEventListener("mousemove",function(c$a){if(c$l.enabled){c$a.preventDefault();var c$b=c$O.now();if(c$b-c$d._lastMoveTimer<10)return;c$d._lastMoveTimer=c$b,c$g.push(c$a)}},!0),c$b.addEventListener("mouseout",function(c$a){c$l.enabled&&c$g.push(c$a)}),c$b.addEventListener("mouseover",function(c$a){c$l.enabled&&c$g.push(c$a)}),c$b.addEventListener("touchstart",function(c$a){c$l.enabled&&(c$g.push(c$a),c$l._isFirstTouch||c$xa.isInputting||c$a.preventDefault(),c$d.mouseDownTime=c$O.now())}),c$b.addEventListener("touchend",function(c$a){c$l.enabled?(c$l._isFirstTouch||c$xa.isInputting||c$a.preventDefault(),c$l._isFirstTouch=!1,c$g.push(c$a),c$d.mouseDownTime=-c$O.now()):c$c._curTouchID=NaN},!0),c$b.addEventListener("touchmove",function(c$a){c$l.enabled&&(c$a.preventDefault(),c$g.push(c$a))},!0),c$b.addEventListener("touchcancel",function(c$a){c$l.enabled?(c$a.preventDefault(),c$g.push(c$a)):c$c._curTouchID=NaN},!0),c$b.addEventListener("mousewheel",function(c$a){c$l.enabled&&c$g.push(c$a)}),c$b.addEventListener("DOMMouseScroll",function(c$a){c$l.enabled&&c$g.push(c$a)})},c$a.initEvent=function(c$a,c$b){var c$c;this._event._stoped=!1,this._event.nativeEvent=c$b||c$a,this._target=null,this._point.setTo(c$a.pageX||c$a.clientX,c$a.pageY||c$a.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=c$a.identifier||0,this._tTouchID=this._event.touchId,(c$c=c$s.I._event)._stoped=!1,c$c.nativeEvent=this._event.nativeEvent,c$c.touchId=this._event.touchId},c$a.checkMouseWheel=function(c$a){this._event.delta=c$a.wheelDelta?.025*c$a.wheelDelta:-c$a.detail;for(var c$b=c$s.I.getLastOvers(),c$c=0,c$d=c$b.length;c$c<c$d;c$c++){var c$g=c$b[c$c];c$g.event("mousewheel",this._event.setTo("mousewheel",c$g,this._target))}},c$a.onMouseMove=function(c$a){c$s.I.onMouseMove(c$a,this._tTouchID)},c$a.onMouseDown=function(c$a){if(c$xa.isInputting&&c$z.stage.focus&&c$z.stage.focus.focus&&!c$z.stage.focus.contains(this._target)){var c$b=c$z.stage.focus._tf||c$z.stage.focus,c$c=c$a._tf||c$a;c$c instanceof laya.display.Input&&c$c.multiline==c$b.multiline?c$b._focusOut():c$b.focus=!1}c$s.I.onMouseDown(c$a,this._tTouchID,this._isLeftMouse)},c$a.onMouseUp=function(c$a){c$s.I.onMouseUp(c$a,this._tTouchID,this._isLeftMouse)},c$a.check=function(c$a,c$b,c$c,c$d){this._point.setTo(c$b,c$c),c$a.fromParentPoint(this._point),c$b=this._point.x,c$c=this._point.y;var c$g=c$a.scrollRect;if(c$g&&(this._rect.setTo(c$g.x,c$g.y,c$g.width,c$g.height),!this._rect.contains(c$b,c$c)))return!1;if(!this.disableMouseEvent){if(c$a.hitTestPrior&&!c$a.mouseThrough&&!this.hitTest(c$a,c$b,c$c))return!1;for(var c$h=c$a._childs.length-1;-1<c$h;c$h--){var c$i=c$a._childs[c$h];if(!c$i.destroyed&&c$i.mouseEnabled&&c$i.visible&&this.check(c$i,c$b,c$c,c$d))return!0}}var c$j=!(!c$a.hitTestPrior||c$a.mouseThrough||this.disableMouseEvent)||this.hitTest(c$a,c$b,c$c);return c$j?(this._target=c$a,c$d.call(this,c$a)):c$d===this.onMouseUp&&c$a===this._stage&&(this._target=this._stage,c$d.call(this,this._target)),c$j},c$a.hitTest=function(c$a,c$b,c$c){var c$d=!1;if(c$a.scrollRect&&(c$b-=c$a.scrollRect.x,c$c-=c$a.scrollRect.y),c$a.hitArea instanceof laya.utils.HitArea)return c$a.hitArea.isHit(c$b,c$c);if(0<c$a.width&&0<c$a.height||c$a.mouseThrough||c$a.hitArea)if(c$a.mouseThrough)c$d=c$a.getGraphicBounds().contains(c$b,c$c);else{var c$g=this._rect;c$a.hitArea?c$g=c$a.hitArea:c$g.setTo(0,0,c$a.width,c$a.height),c$d=c$g.contains(c$b,c$c)}return c$d},c$a.runEvent=function(){var c$a=this._eventList.length;if(c$a){this.mouseEventTime=c$O.now();var c$b,c$c=0,c$d=0,c$g=0;try{for(;c$c<c$a;){var c$h=this._eventList[c$c];switch("mousemove"!==c$h.type&&(this._prePoint.x=this._prePoint.y=-1e6),c$h.type){case"mousedown":this._touchIDs[0]=this._id++,c$l._isTouchRespond?c$l._isTouchRespond=!1:(this._isLeftMouse=0===c$h.button,this.initEvent(c$h),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===c$h.button,this.initEvent(c$h),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-c$h.clientX)+Math.abs(this._prePoint.y-c$h.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=c$h.clientX,this._prePoint.y=c$h.clientY,this.initEvent(c$h),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":c$l._isTouchRespond=!0,this._isLeftMouse=!0;var c$i=c$h.changedTouches;for(c$d=0,c$g=c$i.length;c$d<c$g;c$d++)c$b=c$i[c$d],(c$l.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=c$b.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[c$b.identifier]=this._id++,this.initEvent(c$b,c$h),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":c$l._isTouchRespond=!0,this._isLeftMouse=!0;var c$j=c$h.changedTouches;for(c$d=0,c$g=c$j.length;c$d<c$g;c$d++)if(c$b=c$j[c$d],c$l.multiTouchEnabled||c$b.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(c$b,c$h);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var c$k=c$h.changedTouches;for(c$d=0,c$g=c$k.length;c$d<c$g;c$d++)c$b=c$k[c$d],(c$l.multiTouchEnabled||c$b.identifier==this._curTouchID)&&(this.initEvent(c$b,c$h),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(c$h);break;case"mouseout":c$s.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}c$c++}}catch(c$a){throw this._eventList.length=0,c$a}this._eventList.length=0}},c$l.enabled=!0,c$l.multiTouchEnabled=!0,c$l._isTouchRespond=!1,c$l._isFirstTouch=!0,c$k(c$l,["instance",function(){return this.instance=new c$l}]),c$l}()),c$s=function(){function c$q(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new c$h}c$m(c$q,"laya.events.TouchManager");var c$a=c$q.prototype;return c$a._clearTempArrs=function(){c$q._oldArr.length=0,c$q._newArr.length=0,c$q._tEleArr.length=0},c$a.getTouchFromArr=function(c$a,c$b){var c$c,c$d,c$g=0;for(c$c=c$b.length,c$g=0;c$g<c$c;c$g++)if((c$d=c$b[c$g]).id==c$a)return c$d;return null},c$a.removeTouchFromArr=function(c$a,c$b){var c$c=0;for(c$c=c$b.length-1;0<=c$c;c$c--)c$b[c$c].id==c$a&&c$b.splice(c$c,1)},c$a.createTouchO=function(c$a,c$b){var c$c;return(c$c=c$W.getItem("TouchData")||{}).id=c$b,c$c.tar=c$a,c$c},c$a.onMouseDown=function(c$a,c$b,c$c){var c$d,c$g,c$h,c$i;(void 0===c$c&&(c$c=!1),this.enable)&&(c$d=this.getTouchFromArr(c$b,this.preOvers),c$h=this.getEles(c$a,null,c$q._tEleArr),c$d?c$d.tar=c$a:(c$g=this.createTouchO(c$a,c$b),this.preOvers.push(c$g)),c$O.onMobile&&this.sendEvents(c$h,"mouseover",c$b),c$i=c$c?this.preDowns:this.preRightDowns,(c$d=this.getTouchFromArr(c$b,c$i))?c$d.tar=c$a:(c$g=this.createTouchO(c$a,c$b),c$i.push(c$g)),this.sendEvents(c$h,c$c?"mousedown":"rightmousedown",c$b),this._clearTempArrs())},c$a.sendEvents=function(c$a,c$b,c$c){void 0===c$c&&(c$c=0);var c$d,c$g,c$h,c$i=0;for(c$d=c$a.length,this._event._stoped=!1,c$g=c$a[0],c$i=0;c$i<c$d;c$i++){if((c$h=c$a[c$i]).destroyed)return;if(c$h.event(c$b,this._event.setTo(c$b,c$h,c$g)),this._event._stoped)break}},c$a.getEles=function(c$a,c$b,c$c){for(c$c?c$c.length=0:c$c=[];c$a&&c$a!=c$b;)c$c.push(c$a),c$a=c$a.parent;return c$c},c$a.checkMouseOutAndOverOfMove=function(c$a,c$b,c$c){if(void 0===c$c&&(c$c=0),c$b!=c$a){var c$d,c$g,c$h=0,c$i=0;if(c$b.contains(c$a))c$g=this.getEles(c$a,c$b,c$q._tEleArr),this.sendEvents(c$g,"mouseover",c$c);else if(c$a.contains(c$b))c$g=this.getEles(c$b,c$a,c$q._tEleArr),this.sendEvents(c$g,"mouseout",c$c);else{var c$j,c$k;(c$g=c$q._tEleArr).length=0,c$j=this.getEles(c$b,null,c$q._oldArr),c$k=this.getEles(c$a,null,c$q._newArr),c$i=c$j.length;var c$l=0;for(c$h=0;c$h<c$i;c$h++){if(c$d=c$j[c$h],0<=(c$l=c$k.indexOf(c$d))){c$k.splice(c$l,c$k.length-c$l);break}c$g.push(c$d)}0<c$g.length&&this.sendEvents(c$g,"mouseout",c$c),0<c$k.length&&this.sendEvents(c$k,"mouseover",c$c)}}},c$a.onMouseMove=function(c$a,c$b){var c$c,c$d;this.enable&&((c$c=this.getTouchFromArr(c$b,this.preOvers))?(this.checkMouseOutAndOverOfMove(c$a,c$c.tar),c$c.tar=c$a,c$d=this.getEles(c$a,null,c$q._tEleArr)):(c$d=this.getEles(c$a,null,c$q._tEleArr),this.sendEvents(c$d,"mouseover",c$b),this.preOvers.push(this.createTouchO(c$a,c$b))),this.sendEvents(c$d,"mousemove",c$b),this._clearTempArrs())},c$a.getLastOvers=function(){return(c$q._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,c$q._tEleArr):(c$q._tEleArr.push(c$z.stage),c$q._tEleArr)},c$a.stageMouseOut=function(){var c$a;c$a=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(c$a,"mouseout",0)},c$a.onMouseUp=function(c$a,c$b,c$c){if(void 0===c$c&&(c$c=!1),this.enable){var c$d,c$g,c$h,c$i,c$j,c$k,c$l=0,c$m=0,c$n=c$O.onMobile;if(c$g=this.getEles(c$a,null,c$q._tEleArr),this.sendEvents(c$g,c$c?"mouseup":"rightmouseup",c$b),c$k=c$c?this.preDowns:this.preRightDowns,c$d=this.getTouchFromArr(c$b,c$k)){var c$o,c$p=c$O.now();if(c$o=c$p-this._lastClickTime<300,this._lastClickTime=c$p,c$a==c$d.tar)c$j=c$g;else for(c$h=this.getEles(c$d.tar,null,c$q._oldArr),(c$j=c$q._newArr).length=0,c$m=c$h.length,c$l=0;c$l<c$m;c$l++)c$i=c$h[c$l],0<=c$g.indexOf(c$i)&&c$j.push(c$i);0<c$j.length&&this.sendEvents(c$j,c$c?"click":"rightclick",c$b),c$c&&c$o&&this.sendEvents(c$j,"doubleclick",c$b),this.removeTouchFromArr(c$b,c$k),c$d.tar=null,c$W.recover("TouchData",c$d)}else;(c$d=this.getTouchFromArr(c$b,this.preOvers))&&c$n&&((c$j=this.getEles(c$d.tar,null,c$j))&&0<c$j.length&&this.sendEvents(c$j,"mouseout",c$b),this.removeTouchFromArr(c$b,this.preOvers),c$d.tar=null,c$W.recover("TouchData",c$d)),this._clearTempArrs()}},c$q._oldArr=[],c$q._newArr=[],c$q._tEleArr=[],c$k(c$q,["I",function(){return this.I=new c$q}]),c$q}(),c$t=function(){function c$a(){this._action=null}c$m(c$a,"laya.filters.Filter");var c$b=c$a.prototype;return c$z.imps(c$b,{"laya.filters.IFilter":!0}),c$b.callNative=function(c$a){},c$q(0,c$b,"type",function(){return-1}),c$q(0,c$b,"action",function(){return this._action}),c$a.BLUR=16,c$a.COLOR=32,c$a.GLOW=8,c$a._filterStart=null,c$a._filterEnd=null,c$a._EndTarget=null,c$a._recycleScope=null,c$a._filter=null,c$a._useSrc=null,c$a._endSrc=null,c$a._useOut=null,c$a._endOut=null,c$a}(),c$v=function(){function c$a(){this.data=null}c$m(c$a,"laya.filters.ColorFilterAction");var c$b=c$a.prototype;return c$z.imps(c$b,{"laya.filters.IFilterAction":!0}),c$b.apply=function(c$a){var c$b=c$a.ctx.ctx,c$c=c$a.ctx.ctx.canvas;if(0==c$c.width||0==c$c.height)return c$c;for(var c$d,c$g=c$b.getImageData(0,0,c$c.width,c$c.height),c$h=c$g.data,c$i=0,c$j=c$h.length;c$i<c$j;c$i+=4)c$d=this.getColor(c$h[c$i],c$h[c$i+1],c$h[c$i+2],c$h[c$i+3]),0!=c$h[c$i+3]&&(c$h[c$i]=c$d[0],c$h[c$i+1]=c$d[1],c$h[c$i+2]=c$d[2],c$h[c$i+3]=c$d[3]);return c$b.putImageData(c$g,0,0),c$a},c$b.getColor=function(c$a,c$b,c$c,c$d){var c$g=[];if(this.data._mat&&this.data._alpha){var c$h=this.data._mat,c$i=this.data._alpha;c$g[0]=c$h[0]*c$a+c$h[1]*c$b+c$h[2]*c$c+c$h[3]*c$d+c$i[0],c$g[1]=c$h[4]*c$a+c$h[5]*c$b+c$h[6]*c$c+c$h[7]*c$d+c$i[1],c$g[2]=c$h[8]*c$a+c$h[9]*c$b+c$h[10]*c$c+c$h[11]*c$d+c$i[2],c$g[3]=c$h[12]*c$a+c$h[13]*c$b+c$h[14]*c$c+c$h[15]*c$d+c$i[3]}return c$g},c$a}(),c$w=(function(){function c$a(){}c$m(c$a,"laya.maths.Arith"),c$a.formatR=function(c$a){return c$a>Math.PI&&(c$a-=2*Math.PI),c$a<-Math.PI&&(c$a+=2*Math.PI),c$a},c$a.isPOT=function(c$a,c$b){return 0<c$a&&0==(c$a&c$a-1)&&0<c$b&&0==(c$b&c$b-1)},c$a.setMatToArray=function(c$a,c$b){c$a.a,c$a.b,c$a.c,c$a.d,c$a.tx,c$a.ty,c$b[0]=c$a.a,c$b[1]=c$a.b,c$b[4]=c$a.c,c$b[5]=c$a.d,c$b[12]=c$a.tx,c$b[13]=c$a.ty}}(),function(){function c$a(){this._controlPoints=[new c$A,new c$A,new c$A],this._calFun=this.getPoint2}c$m(c$a,"laya.maths.Bezier");var c$b=c$a.prototype;return c$b._switchPoint=function(c$a,c$b){var c$c=this._controlPoints.shift();c$c.setTo(c$a,c$b),this._controlPoints.push(c$c)},c$b.getPoint2=function(c$a,c$b){var c$c=this._controlPoints[0],c$d=this._controlPoints[1],c$g=this._controlPoints[2],c$h=Math.pow(1-c$a,2)*c$c.x+2*c$a*(1-c$a)*c$d.x+Math.pow(c$a,2)*c$g.x,c$i=Math.pow(1-c$a,2)*c$c.y+2*c$a*(1-c$a)*c$d.y+Math.pow(c$a,2)*c$g.y;c$b.push(c$h,c$i)},c$b.getPoint3=function(c$a,c$b){var c$c=this._controlPoints[0],c$d=this._controlPoints[1],c$g=this._controlPoints[2],c$h=this._controlPoints[3],c$i=Math.pow(1-c$a,3)*c$c.x+3*c$d.x*c$a*(1-c$a)*(1-c$a)+3*c$g.x*c$a*c$a*(1-c$a)+c$h.x*Math.pow(c$a,3),c$j=Math.pow(1-c$a,3)*c$c.y+3*c$d.y*c$a*(1-c$a)*(1-c$a)+3*c$g.y*c$a*c$a*(1-c$a)+c$h.y*Math.pow(c$a,3);c$b.push(c$i,c$j)},c$b.insertPoints=function(c$a,c$b){var c$c,c$d=NaN;for(c$c=1/(c$a=0<c$a?c$a:5),c$d=0;c$d<=1;c$d+=c$c)this._calFun(c$d,c$b)},c$b.getBezierPoints=function(c$a,c$b,c$c){void 0===c$b&&(c$b=5),void 0===c$c&&(c$c=2);var c$d,c$g,c$h=0;if((c$d=c$a.length)<2*(c$c+1))return[];switch(c$g=[],c$c){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=c$c;)this._controlPoints.push(new c$A);for(c$h=0;c$h<2*c$c;c$h+=2)this._switchPoint(c$a[c$h],c$a[c$h+1]);for(c$h=2*c$c;c$h<c$d;c$h+=2)this._switchPoint(c$a[c$h],c$a[c$h+1]),c$h/2%c$c==0&&this.insertPoints(c$b,c$g);return c$g},c$k(c$a,["I",function(){return this.I=new c$a}]),c$a}()),c$x=function(){function c$l(){}return c$m(c$l,"laya.maths.GrahamScan"),c$l.multiply=function(c$a,c$b,c$c){return(c$a.x-c$c.x)*(c$b.y-c$c.y)-(c$b.x-c$c.x)*(c$a.y-c$c.y)},c$l.dis=function(c$a,c$b){return(c$a.x-c$b.x)*(c$a.x-c$b.x)+(c$a.y-c$b.y)*(c$a.y-c$b.y)},c$l._getPoints=function(c$a,c$b,c$c){for(void 0===c$b&&(c$b=!1),c$l._mPointList||(c$l._mPointList=[]);c$l._mPointList.length<c$a;)c$l._mPointList.push(new c$A);return c$c||(c$c=[]),c$c.length=0,c$b?c$l.getFrom(c$c,c$l._mPointList,c$a):c$l.getFromR(c$c,c$l._mPointList,c$a),c$c},c$l.getFrom=function(c$a,c$b,c$c){var c$d=0;for(c$d=0;c$d<c$c;c$d++)c$a.push(c$b[c$d]);return c$a},c$l.getFromR=function(c$a,c$b,c$c){var c$d=0;for(c$d=0;c$d<c$c;c$d++)c$a.push(c$b.pop());return c$a},c$l.pListToPointList=function(c$a,c$b){void 0===c$b&&(c$b=!1);var c$c=0,c$d=c$a.length/2,c$g=c$l._getPoints(c$d,c$b,c$l._tempPointList);for(c$c=0;c$c<c$d;c$c++)c$g[c$c].setTo(c$a[c$c+c$c],c$a[c$c+c$c+1]);return c$g},c$l.pointListToPlist=function(c$a){var c$b,c$c=0,c$d=c$a.length,c$g=c$l._temPList;for(c$c=c$g.length=0;c$c<c$d;c$c++)c$b=c$a[c$c],c$g.push(c$b.x,c$b.y);return c$g},c$l.scanPList=function(c$a){return c$$.copyArray(c$a,c$l.pointListToPlist(c$l.scan(c$l.pListToPointList(c$a,!0))))},c$l.scan=function(c$a){var c$b,c$c,c$d,c$g=0,c$h=0,c$i=0,c$j=c$a.length,c$k={};for((c$c=c$l._temArr).length=0,c$g=(c$j=c$a.length)-1;0<=c$g;c$g--)c$d=(c$b=c$a[c$g]).x+"_"+c$b.y,c$k.hasOwnProperty(c$d)||(c$k[c$d]=!0,c$c.push(c$b));for(c$j=c$c.length,c$$.copyArray(c$a,c$c),c$g=1;c$g<c$j;c$g++)(c$a[c$g].y<c$a[c$i].y||c$a[c$g].y==c$a[c$i].y&&c$a[c$g].x<c$a[c$i].x)&&(c$i=c$g);for(c$b=c$a[0],c$a[0]=c$a[c$i],c$a[c$i]=c$b,c$g=1;c$g<c$j-1;c$g++){for(c$h=(c$i=c$g)+1;c$h<c$j;c$h++)(0<c$l.multiply(c$a[c$h],c$a[c$i],c$a[0])||0==c$l.multiply(c$a[c$h],c$a[c$i],c$a[0])&&c$l.dis(c$a[0],c$a[c$h])<c$l.dis(c$a[0],c$a[c$i]))&&(c$i=c$h);c$b=c$a[c$g],c$a[c$g]=c$a[c$i],c$a[c$i]=c$b}if((c$c=c$l._temArr).length=0,c$a.length<3)return c$$.copyArray(c$c,c$a);for(c$c.push(c$a[0],c$a[1],c$a[2]),c$g=3;c$g<c$j;c$g++){for(;2<=c$c.length&&0<=c$l.multiply(c$a[c$g],c$c[c$c.length-1],c$c[c$c.length-2]);)c$c.pop();c$a[c$g]&&c$c.push(c$a[c$g])}return c$c},c$l._mPointList=null,c$l._tempPointList=[],c$l._temPList=[],c$l._temArr=[],c$l}(),c$y=function(){function c$g(){}return c$m(c$g,"laya.maths.MathUtil"),c$g.subtractVector3=function(c$a,c$b,c$c){c$c[0]=c$a[0]-c$b[0],c$c[1]=c$a[1]-c$b[1],c$c[2]=c$a[2]-c$b[2]},c$g.lerp=function(c$a,c$b,c$c){return c$a*(1-c$c)+c$b*c$c},c$g.scaleVector3=function(c$a,c$b,c$c){c$c[0]=c$a[0]*c$b,c$c[1]=c$a[1]*c$b,c$c[2]=c$a[2]*c$b},c$g.lerpVector3=function(c$a,c$b,c$c,c$d){var c$g=c$a[0],c$h=c$a[1],c$i=c$a[2];c$d[0]=c$g+c$c*(c$b[0]-c$g),c$d[1]=c$h+c$c*(c$b[1]-c$h),c$d[2]=c$i+c$c*(c$b[2]-c$i)},c$g.lerpVector4=function(c$a,c$b,c$c,c$d){var c$g=c$a[0],c$h=c$a[1],c$i=c$a[2],c$j=c$a[3];c$d[0]=c$g+c$c*(c$b[0]-c$g),c$d[1]=c$h+c$c*(c$b[1]-c$h),c$d[2]=c$i+c$c*(c$b[2]-c$i),c$d[3]=c$j+c$c*(c$b[3]-c$j)},c$g.slerpQuaternionArray=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){var c$j,c$k,c$l,c$m,c$n,c$o=c$a[c$b+0],c$p=c$a[c$b+1],c$q=c$a[c$b+2],c$r=c$a[c$b+3],c$s=c$c[c$d+0],c$t=c$c[c$d+1],c$u=c$c[c$d+2],c$v=c$c[c$d+3];return(c$k=c$o*c$s+c$p*c$t+c$q*c$u+c$r*c$v)<0&&(c$k=-c$k,c$s=-c$s,c$t=-c$t,c$u=-c$u,c$v=-c$v),c$n=1e-6<1-c$k?(c$j=Math.acos(c$k),c$l=Math.sin(c$j),c$m=Math.sin((1-c$g)*c$j)/c$l,Math.sin(c$g*c$j)/c$l):(c$m=1-c$g,c$g),c$h[c$i+0]=c$m*c$o+c$n*c$s,c$h[c$i+1]=c$m*c$p+c$n*c$t,c$h[c$i+2]=c$m*c$q+c$n*c$u,c$h[c$i+3]=c$m*c$r+c$n*c$v,c$h},c$g.getRotation=function(c$a,c$b,c$c,c$d){return Math.atan2(c$d-c$b,c$c-c$a)/Math.PI*180},c$g.sortBigFirst=function(c$a,c$b){return c$a==c$b?0:c$a<c$b?1:-1},c$g.sortSmallFirst=function(c$a,c$b){return c$a==c$b?0:c$a<c$b?-1:1},c$g.sortNumBigFirst=function(c$a,c$b){return parseFloat(c$b)-parseFloat(c$a)},c$g.sortNumSmallFirst=function(c$a,c$b){return parseFloat(c$a)-parseFloat(c$b)},c$g.sortByKey=function(c$c,c$a,c$b){var c$d;return void 0===c$a&&(c$a=!1),void 0===c$b&&(c$b=!0),c$d=c$a?c$b?c$g.sortNumBigFirst:c$g.sortBigFirst:c$b?c$g.sortNumSmallFirst:c$g.sortSmallFirst,function(c$a,c$b){return c$d(c$a[c$c],c$b[c$c])}},c$g}(),c$G=function(){function c$c(c$a,c$b,c$c,c$d,c$g,c$h){this.inPool=!1,this.bTransform=!1,void 0===c$a&&(c$a=1),void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0),void 0===c$d&&(c$d=1),void 0===c$g&&(c$g=0),void 0===c$h&&(c$h=0),this.a=c$a,this.b=c$b,this.c=c$c,this.d=c$d,this.tx=c$g,this.ty=c$h,this._checkTransform()}c$m(c$c,"laya.maths.Matrix");var c$a=c$c.prototype;return c$a.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},c$a._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},c$a.setTranslate=function(c$a,c$b){return this.tx=c$a,this.ty=c$b,this},c$a.translate=function(c$a,c$b){return this.tx+=c$a,this.ty+=c$b,this},c$a.scale=function(c$a,c$b){this.a*=c$a,this.d*=c$b,this.c*=c$a,this.b*=c$b,this.tx*=c$a,this.ty*=c$b,this.bTransform=!0},c$a.rotate=function(c$a){var c$b=Math.cos(c$a),c$c=Math.sin(c$a),c$d=this.a,c$g=this.c,c$h=this.tx;this.a=c$d*c$b-this.b*c$c,this.b=c$d*c$c+this.b*c$b,this.c=c$g*c$b-this.d*c$c,this.d=c$g*c$c+this.d*c$b,this.tx=c$h*c$b-this.ty*c$c,this.ty=c$h*c$c+this.ty*c$b,this.bTransform=!0},c$a.skew=function(c$a,c$b){var c$c=Math.tan(c$a),c$d=Math.tan(c$b),c$g=this.a,c$h=this.b;return this.a+=c$d*this.c,this.b+=c$d*this.d,this.c+=c$c*c$g,this.d+=c$c*c$h,this},c$a.invertTransformPoint=function(c$a){var c$b=this.a,c$c=this.b,c$d=this.c,c$g=this.d,c$h=this.tx,c$i=c$b*c$g-c$c*c$d,c$j=c$g/c$i,c$k=-c$c/c$i,c$l=-c$d/c$i,c$m=c$b/c$i,c$n=(c$d*this.ty-c$g*c$h)/c$i,c$o=-(c$b*this.ty-c$c*c$h)/c$i;return c$a.setTo(c$j*c$a.x+c$l*c$a.y+c$n,c$k*c$a.x+c$m*c$a.y+c$o)},c$a.transformPoint=function(c$a){return c$a.setTo(this.a*c$a.x+this.c*c$a.y+this.tx,this.b*c$a.x+this.d*c$a.y+this.ty)},c$a.transformPointN=function(c$a){return c$a.setTo(this.a*c$a.x+this.c*c$a.y,this.b*c$a.x+this.d*c$a.y)},c$a.transformPointArray=function(c$a,c$b){for(var c$c=c$a.length,c$d=0;c$d<c$c;c$d+=2){var c$g=c$a[c$d],c$h=c$a[c$d+1];c$b[c$d]=this.a*c$g+this.c*c$h+this.tx,c$b[c$d+1]=this.b*c$g+this.d*c$h+this.ty}return c$b},c$a.transformPointArrayScale=function(c$a,c$b){for(var c$c=c$a.length,c$d=0;c$d<c$c;c$d+=2){var c$g=c$a[c$d],c$h=c$a[c$d+1];c$b[c$d]=this.a*c$g+this.c*c$h,c$b[c$d+1]=this.b*c$g+this.d*c$h}return c$b},c$a.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},c$a.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},c$a.invert=function(){var c$a=this.a,c$b=this.b,c$c=this.c,c$d=this.d,c$g=this.tx,c$h=c$a*c$d-c$b*c$c;return this.a=c$d/c$h,this.b=-c$b/c$h,this.c=-c$c/c$h,this.d=c$a/c$h,this.tx=(c$c*this.ty-c$d*c$g)/c$h,this.ty=-(c$a*this.ty-c$b*c$g)/c$h,this},c$a.setTo=function(c$a,c$b,c$c,c$d,c$g,c$h){return this.a=c$a,this.b=c$b,this.c=c$c,this.d=c$d,this.tx=c$g,this.ty=c$h,this},c$a.concat=function(c$a){var c$b=this.a,c$c=this.c,c$d=this.tx;return this.a=c$b*c$a.a+this.b*c$a.c,this.b=c$b*c$a.b+this.b*c$a.d,this.c=c$c*c$a.a+this.d*c$a.c,this.d=c$c*c$a.b+this.d*c$a.d,this.tx=c$d*c$a.a+this.ty*c$a.c+c$a.tx,this.ty=c$d*c$a.b+this.ty*c$a.d+c$a.ty,this},c$a.scaleEx=function(c$a,c$b){var c$c=this.a,c$d=this.b,c$g=this.c,c$h=this.d;0!==c$d||0!==c$g?(this.a=c$a*c$c,this.b=c$a*c$d,this.c=c$b*c$g):(this.a=c$a*c$c,this.b=0*c$h,this.c=0*c$c),this.d=c$b*c$h,this.bTransform=!0},c$a.rotateEx=function(c$a){var c$b=Math.cos(c$a),c$c=Math.sin(c$a),c$d=this.a,c$g=this.b,c$h=this.c,c$i=this.d;0!==c$g||0!==c$h?(this.a=c$b*c$d+c$c*c$h,this.b=c$b*c$g+c$c*c$i,this.c=-c$c*c$d+c$b*c$h,this.d=-c$c*c$g+c$b*c$i):(this.a=c$b*c$d,this.b=c$c*c$i,this.c=-c$c*c$d,this.d=c$b*c$i),this.bTransform=!0},c$a.clone=function(){var c$a=c$c.create();return c$a.a=this.a,c$a.b=this.b,c$a.c=this.c,c$a.d=this.d,c$a.tx=this.tx,c$a.ty=this.ty,c$a.bTransform=this.bTransform,c$a},c$a.copyTo=function(c$a){return c$a.a=this.a,c$a.b=this.b,c$a.c=this.c,c$a.d=this.d,c$a.tx=this.tx,c$a.ty=this.ty,c$a.bTransform=this.bTransform,c$a},c$a.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},c$a.destroy=function(){if(!this.inPool){var c$a=c$c._cache;this.inPool=!0,c$a._length||(c$a._length=0),(c$a[c$a._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},c$c.mul=function(c$a,c$b,c$c){var c$d=c$a.a,c$g=c$a.b,c$h=c$a.c,c$i=c$a.d,c$j=c$a.tx,c$k=c$a.ty,c$l=c$b.a,c$m=c$b.b,c$n=c$b.c,c$o=c$b.d,c$p=c$b.tx,c$q=c$b.ty;return 0!==c$m||0!==c$n?(c$c.a=c$d*c$l+c$g*c$n,c$c.b=c$d*c$m+c$g*c$o,c$c.c=c$h*c$l+c$i*c$n,c$c.d=c$h*c$m+c$i*c$o,c$c.tx=c$l*c$j+c$n*c$k+c$p,c$c.ty=c$m*c$j+c$o*c$k+c$q):(c$c.a=c$d*c$l,c$c.b=c$g*c$o,c$c.c=c$h*c$l,c$c.d=c$i*c$o,c$c.tx=c$l*c$j+c$p,c$c.ty=c$o*c$k+c$q),c$c},c$c.mul16=function(c$a,c$b,c$c){var c$d=c$a.a,c$g=c$a.b,c$h=c$a.c,c$i=c$a.d,c$j=c$a.tx,c$k=c$a.ty,c$l=c$b.a,c$m=c$b.b,c$n=c$b.c,c$o=c$b.d,c$p=c$b.tx,c$q=c$b.ty;return 0!==c$m||0!==c$n?(c$c[0]=c$d*c$l+c$g*c$n,c$c[1]=c$d*c$m+c$g*c$o,c$c[4]=c$h*c$l+c$i*c$n,c$c[5]=c$h*c$m+c$i*c$o,c$c[12]=c$l*c$j+c$n*c$k+c$p,c$c[13]=c$m*c$j+c$o*c$k+c$q):(c$c[0]=c$d*c$l,c$c[1]=c$g*c$o,c$c[4]=c$h*c$l,c$c[5]=c$i*c$o,c$c[12]=c$l*c$j+c$p,c$c[13]=c$o*c$k+c$q),c$c},c$c.mulPre=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){var c$k=c$a.a,c$l=c$a.b,c$m=c$a.c,c$n=c$a.d,c$o=c$a.tx,c$p=c$a.ty;return 0!==c$c||0!==c$d?(c$j.a=c$k*c$b+c$l*c$d,c$j.b=c$k*c$c+c$l*c$g,c$j.c=c$m*c$b+c$n*c$d,c$j.d=c$m*c$c+c$n*c$g,c$j.tx=c$b*c$o+c$d*c$p+c$h,c$j.ty=c$c*c$o+c$g*c$p+c$i):(c$j.a=c$k*c$b,c$j.b=c$l*c$g,c$j.c=c$m*c$b,c$j.d=c$n*c$g,c$j.tx=c$b*c$o+c$h,c$j.ty=c$g*c$p+c$i),c$j},c$c.mulPos=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){var c$k=c$a.a,c$l=c$a.b,c$m=c$a.c,c$n=c$a.d,c$o=c$a.tx,c$p=c$a.ty;return 0!==c$l||0!==c$m?(c$j.a=c$b*c$k+c$c*c$m,c$j.b=c$b*c$l+c$c*c$n,c$j.c=c$d*c$k+c$g*c$m,c$j.d=c$d*c$l+c$g*c$n,c$j.tx=c$k*c$h+c$m*c$i+c$o,c$j.ty=c$l*c$h+c$n*c$i+c$p):(c$j.a=c$b*c$k,c$j.b=c$c*c$n,c$j.c=c$d*c$k,c$j.d=c$g*c$n,c$j.tx=c$k*c$h+c$o,c$j.ty=c$n*c$i+c$p),c$j},c$c.preMul=function(c$a,c$b,c$c){var c$d=c$a.a,c$g=c$a.b,c$h=c$a.c,c$i=c$a.d,c$j=c$b.a,c$k=c$b.b,c$l=c$b.c,c$m=c$b.d,c$n=c$b.tx,c$o=c$b.ty;return c$c.a=c$j*c$d,c$c.b=c$c.c=0,c$c.d=c$m*c$i,c$c.tx=c$n*c$d+c$a.tx,c$c.ty=c$o*c$i+c$a.ty,0===c$k&&0===c$l&&0===c$g&&0===c$h||(c$c.a+=c$k*c$h,c$c.d+=c$l*c$g,c$c.b+=c$j*c$g+c$k*c$i,c$c.c+=c$l*c$d+c$m*c$h,c$c.tx+=c$o*c$h,c$c.ty+=c$n*c$g),c$c},c$c.preMulXY=function(c$a,c$b,c$c,c$d){var c$g=c$a.a,c$h=c$a.b,c$i=c$a.c,c$j=c$a.d;return c$d.a=c$g,c$d.b=c$h,c$d.c=c$i,c$d.d=c$j,c$d.tx=c$b*c$g+c$a.tx+c$c*c$i,c$d.ty=c$c*c$j+c$a.ty+c$b*c$h,c$d},c$c.create=function(){var c$a=c$c._cache,c$b=c$a._length?c$a[--c$a._length]:new c$c;return c$b.inPool=!1,c$b},c$c.EMPTY=new c$c,c$c.TEMP=new c$c,c$c._cache=[],c$c}(),c$A=function(){function c$a(c$a,c$b){void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=0),this.x=c$a,this.y=c$b}c$m(c$a,"laya.maths.Point");var c$b=c$a.prototype;return c$b.setTo=function(c$a,c$b){return this.x=c$a,this.y=c$b,this},c$b.distance=function(c$a,c$b){return Math.sqrt((this.x-c$a)*(this.x-c$a)+(this.y-c$b)*(this.y-c$b))},c$b.toString=function(){return this.x+","+this.y},c$b.normalize=function(){var c$a=Math.sqrt(this.x*this.x+this.y*this.y);if(0<c$a){var c$b=1/c$a;this.x*=c$b,this.y*=c$b}},c$a.TEMP=new c$a,c$a.EMPTY=new c$a,c$a}(),c$B=function(){function c$l(c$a,c$b,c$c,c$d){void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0),void 0===c$d&&(c$d=0),this.x=c$a,this.y=c$b,this.width=c$c,this.height=c$d}c$m(c$l,"laya.maths.Rectangle");var c$a=c$l.prototype;return c$a.setTo=function(c$a,c$b,c$c,c$d){return this.x=c$a,this.y=c$b,this.width=c$c,this.height=c$d,this},c$a.copyFrom=function(c$a){return this.x=c$a.x,this.y=c$a.y,this.width=c$a.width,this.height=c$a.height,this},c$a.contains=function(c$a,c$b){return!(this.width<=0||this.height<=0)&&(c$a>=this.x&&c$a<this.right&&c$b>=this.y&&c$b<this.bottom)},c$a.intersects=function(c$a){return!(c$a.x>this.x+this.width||c$a.x+c$a.width<this.x||c$a.y>this.y+this.height||c$a.y+c$a.height<this.y)},c$a.intersection=function(c$a,c$b){return this.intersects(c$a)?(c$b||(c$b=new c$l),c$b.x=Math.max(this.x,c$a.x),c$b.y=Math.max(this.y,c$a.y),c$b.width=Math.min(this.right,c$a.right)-c$b.x,c$b.height=Math.min(this.bottom,c$a.bottom)-c$b.y,c$b):null},c$a.union=function(c$a,c$b){return c$b||(c$b=new c$l),this.clone(c$b),c$a.width<=0||c$a.height<=0?c$b:(c$b.addPoint(c$a.x,c$a.y),c$b.addPoint(c$a.right,c$a.bottom),this)},c$a.clone=function(c$a){return c$a||(c$a=new c$l),c$a.x=this.x,c$a.y=this.y,c$a.width=this.width,c$a.height=this.height,c$a},c$a.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},c$a.equals=function(c$a){return!(!c$a||c$a.x!==this.x||c$a.y!==this.y||c$a.width!==this.width||c$a.height!==this.height)},c$a.addPoint=function(c$a,c$b){return this.x>c$a&&(this.width+=this.x-c$a,this.x=c$a),this.y>c$b&&(this.height+=this.y-c$b,this.y=c$b),this.width<c$a-this.x&&(this.width=c$a-this.x),this.height<c$b-this.y&&(this.height=c$b-this.y),this},c$a._getBoundPoints=function(){var c$a=c$l._temB;return(c$a.length=0)==this.width||0==this.height||c$a.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),c$a},c$a.isEmpty=function(){return this.width<=0||this.height<=0},c$q(0,c$a,"right",function(){return this.x+this.width}),c$q(0,c$a,"bottom",function(){return this.y+this.height}),c$l._getBoundPointS=function(c$a,c$b,c$c,c$d){var c$g=c$l._temA;return(c$g.length=0)==c$c||0==c$d||c$g.push(c$a,c$b,c$a+c$c,c$b,c$a,c$b+c$d,c$a+c$c,c$b+c$d),c$g},c$l._getWrapRec=function(c$a,c$b){if(!c$a||c$a.length<1)return c$b?c$b.setTo(0,0,0,0):c$l.TEMP.setTo(0,0,0,0);c$b=c$b||new c$l;var c$c,c$d,c$g,c$h,c$i,c$j=c$a.length,c$k=c$A.TEMP;for(c$g=c$i=-(c$d=c$h=99999),c$c=0;c$c<c$j;c$c+=2)c$k.x=c$a[c$c],c$k.y=c$a[c$c+1],c$d=c$d<c$k.x?c$d:c$k.x,c$h=c$h<c$k.y?c$h:c$k.y,c$g=c$g>c$k.x?c$g:c$k.x,c$i=c$i>c$k.y?c$i:c$k.y;return c$b.setTo(c$d,c$h,c$g-c$d,c$i-c$h)},c$l.EMPTY=new c$l,c$l.TEMP=new c$l,c$l._temB=[],c$l._temA=[],c$l}(),c$E=function(){function c$k(){}return c$m(c$k,"laya.media.SoundManager"),c$q(1,c$k,"useAudioMusic",function(){return c$k._useAudioMusic},function(c$a){c$k._useAudioMusic=c$a,c$k._musicClass=c$a?c$ca:null}),c$q(1,c$k,"autoStopMusic",function(){return c$k._autoStopMusic},function(c$a){c$z.stage.off("blur",null,c$k._stageOnBlur),c$z.stage.off("focus",null,c$k._stageOnFocus),c$z.stage.off("visibilitychange",null,c$k._visibilityChange),(c$k._autoStopMusic=c$a)&&(c$z.stage.on("blur",null,c$k._stageOnBlur),c$z.stage.on("focus",null,c$k._stageOnFocus),c$z.stage.on("visibilitychange",null,c$k._visibilityChange))}),c$q(1,c$k,"muted",function(){return c$k._muted},function(c$a){c$a!=c$k._muted&&(c$a&&c$k.stopAllSound(),c$k.musicMuted=c$a,c$k._muted=c$a)}),c$q(1,c$k,"musicMuted",function(){return c$k._musicMuted},function(c$a){c$a!=c$k._musicMuted&&(c$a?(c$k._tMusic&&c$k._musicChannel&&!c$k._musicChannel.isStopped?c$k._musicChannel.pause():c$k._musicChannel=null,c$k._musicMuted=c$a):(c$k._musicMuted=c$a,c$k._tMusic&&c$k._musicChannel&&c$k._musicChannel.resume()))}),c$q(1,c$k,"soundMuted",function(){return c$k._soundMuted},function(c$a){c$k._soundMuted=c$a}),c$k.addChannel=function(c$a){0<=c$k._channels.indexOf(c$a)||(c$k._channels.push(c$a),c$k.autoReleaseSound&&0!=c$k._notUsedCount&&c$k._notUsedUrls[c$a.url]&&(delete c$k._notUsedUrls[c$a.url],0==--c$k._notUsedCount&&c$z.timer.clear(c$k,c$k.disposeSoundIfNotUsed)))},c$k.removeChannel=function(c$a){var c$b=c$k._channels,c$c=c$b.indexOf(c$a);if(-1!=c$c&&(c$b.splice(c$c,1),c$k.autoReleaseSound)){var c$d=c$a.url,c$g=c$k.defaultIntervals[c$d]||2e4;if(0<c$g){var c$h=!0;for(c$c=c$b.length-1;0<=c$c;c$c--)if(c$b[c$c].url==c$d){c$h=!1;break}c$h&&(c$k._notUsedUrls[c$d]=Date.now()+c$g,0==c$k._notUsedCount++&&c$z.timer.loop(1e4,c$k,c$k.disposeSoundIfNotUsed))}}},c$k.disposeSoundIfNotUsed=function(){var c$a=c$k._notUsedUrls;if(0!=c$k._notUsedCount){var c$b=Date.now();for(var c$c in c$a)c$b>=c$a[c$c]&&(delete c$a[c$c],--c$k._notUsedCount,c$k.destroySound(c$c));if(0!=c$k._notUsedCount)return}c$z.timer.clear(c$k,c$k.disposeSoundIfNotUsed)},c$k._visibilityChange=function(){c$z.stage.isVisibility?c$k._stageOnFocus():c$k._stageOnBlur()},c$k._stageOnBlur=function(){c$k._isActive=!1,c$k._musicChannel&&(c$k._musicChannel.isStopped||(c$k._blurPaused=!0,c$k._musicChannel.pause())),c$k.stopAllSound(),c$z.stage.once("mousedown",null,c$k._stageOnFocus)},c$k._recoverWebAudio=function(){c$ha.ctx&&"running"!=c$ha.ctx.state&&c$ha.ctx.resume&&c$ha.ctx.resume()},c$k._stageOnFocus=function(){if(c$k._isActive=!0,c$k._recoverWebAudio(),c$z.stage.off("mousedown",null,c$k._stageOnFocus),c$k._blurPaused){var c$a=c$k._musicChannel;c$a&&c$k._music&&c$a.isStopped&&(c$k._blurPaused=!1,c$k._music._disposed?c$k.playMusic(c$a.url,c$a.loops,c$a.startHandler,c$a.completeHandler,c$a.startTime):c$a.audioBuffer?c$a.resume():c$k._music.play(c$a.startTime,c$a.loops,c$a.startHandler,c$a))}},c$k.playSound=function(c$a,c$b,c$c,c$d,c$g,c$h){if(void 0===c$b&&(c$b=1),void 0===c$h&&(c$h=0),!c$a)return null;if(c$k._muted)return null;if(c$k._recoverWebAudio(),c$a==c$k._tMusic){if(c$k._musicMuted)return null}else{if(!c$k._isActive)return null;if(c$k._soundMuted)return null}var c$i,c$j=c$k._pool[c$a];return c$g||(c$g=c$k._soundClass),c$j||((c$j=new c$g).load(c$a),c$k._pool[c$a]=c$j),(c$i=c$j.play(c$h,c$b,c$c))?(c$a==c$k._tMusic&&(c$k._music=c$j,c$k._isActive||(c$k._blurPaused=!0,c$i.pause())),c$i.url=c$a,c$i.volume=c$a==c$k._tMusic?c$k.musicVolume:c$k.soundVolume,c$i.completeHandler=c$d,c$i):null},c$k.destroySound=function(c$a){var c$b=c$k._pool[c$a];c$b&&(delete c$k._pool[c$a],c$b.dispose())},c$k.playMusic=function(c$a,c$b,c$c,c$d,c$g){return void 0===c$b&&(c$b=0),void 0===c$g&&(c$g=0),c$k._tMusic=c$a,c$k._musicChannel&&c$k._musicChannel.stop(),c$k._musicChannel=c$k.playSound(c$a,c$b,c$c,c$d,null,c$g)},c$k.stopSound=function(c$a){for(var c$b,c$c=c$k._channels.length-1;0<=c$c;c$c--)(c$b=c$k._channels[c$c]).url==c$a&&c$b.stop()},c$k.stopAll=function(){c$k._tMusic=null;var c$a=0;for(c$a=c$k._channels.length-1;0<=c$a;c$a--)c$k._channels[c$a].stop()},c$k.stopAllSound=function(){var c$a,c$b=0;for(c$b=c$k._channels.length-1;0<=c$b;c$b--)(c$a=c$k._channels[c$b]).url!=c$k._tMusic&&c$a.stop()},c$k.stopMusic=function(){c$k._musicChannel&&c$k._musicChannel.stop(),c$k._tMusic=null},c$k.setSoundVolume=function(c$a,c$b){if(c$b)c$k._setVolume(c$b,c$a);else{c$k.soundVolume=c$a;var c$c,c$d=0;for(c$d=c$k._channels.length-1;0<=c$d;c$d--)(c$c=c$k._channels[c$d]).url!=c$k._tMusic&&(c$c.volume=c$a)}},c$k.setMusicVolume=function(c$a){c$k.musicVolume=c$a,c$k._setVolume(c$k._tMusic,c$a)},c$k._setVolume=function(c$a,c$b){for(var c$c,c$d=c$k._channels.length-1;0<=c$d;c$d--)(c$c=c$k._channels[c$d]).url==c$a&&(c$c.volume=c$b)},c$k.musicVolume=1,c$k.soundVolume=1,c$k.playbackRate=1,c$k._useAudioMusic=!0,c$k._muted=!1,c$k._soundMuted=!1,c$k._musicMuted=!1,c$k._tMusic=null,c$k._musicChannel=null,c$k._music=null,c$k._channels=[],c$k._autoStopMusic=!1,c$k._blurPaused=!1,c$k._isActive=!0,c$k._soundClass=null,c$k._musicClass=null,c$k.autoReleaseSound=!0,c$k._pool={},c$k.defaultIntervals={},c$k._notUsedUrls={},c$k._notUsedCount=0,c$k}(),c$C=function(){var c$a;function c$c(){}return c$m(c$c,"laya.net.LocalStorage"),c$c.__init__=function(){c$c._baseClass||(c$c._baseClass=c$a).init(),c$c.items=c$c._baseClass.items,c$c.support=c$c._baseClass.support},c$c.setItem=function(c$a,c$b){c$c._baseClass.setItem(c$a,c$b)},c$c.getItem=function(c$a){return c$c._baseClass.getItem(c$a)},c$c.setJSON=function(c$a,c$b){c$c._baseClass.setJSON(c$a,c$b)},c$c.getJSON=function(c$a){return c$c._baseClass.getJSON(c$a)},c$c.removeItem=function(c$a){c$c._baseClass.removeItem(c$a)},c$c.clear=function(){c$c._baseClass.clear()},c$c._baseClass=null,c$c.items=null,c$c.support=!1,c$c.__init$=function(){c$a=function(){function c$c(){}return c$m(c$c,""),c$c.init=function(){try{c$c.support=!0,c$c.items=c$i.localStorage,c$c.setItem("laya","1"),c$c.removeItem("laya")}catch(c$a){c$c.support=!1}c$c.support||console.log("LocalStorage is not supprot or browser is private mode.")},c$c.setItem=function(c$a,c$b){try{c$c.support&&c$c.items.setItem(c$a,c$b)}catch(c$a){console.warn("set localStorage failed",c$a)}},c$c.getItem=function(c$a){return c$c.support?c$c.items.getItem(c$a):null},c$c.setJSON=function(c$a,c$b){try{c$c.support&&c$c.items.setItem(c$a,JSON.stringify(c$b))}catch(c$a){console.warn("set localStorage failed",c$a)}},c$c.getJSON=function(c$a){return JSON.parse(c$c.support?c$c.items.getItem(c$a):null)},c$c.removeItem=function(c$a){c$c.support&&c$c.items.removeItem(c$a)},c$c.clear=function(){c$c.support&&c$c.items.clear()},c$c.items=null,c$c.support=!1,c$c}()},c$c}(),c$H=(function(){function c$d(){}c$m(c$d,"laya.net.ResourceVersion"),c$d.enable=function(c$a,c$b,c$c){void 0===c$c&&(c$c=2),laya.net.ResourceVersion.type=c$c,c$z.loader.load(c$a,c$u.create(null,c$d.onManifestLoaded,[c$b]),null,"json"),c$I.customFormat=c$d.addVersionPrefix},c$d.onManifestLoaded=function(c$a,c$b){c$d.manifest=c$b,c$a.run(),c$b||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},c$d.addVersionPrefix=function(c$a){return c$d.manifest&&c$d.manifest[c$a]?2==c$d.type?c$d.manifest[c$a]:c$d.manifest[c$a]+"/"+c$a:c$a},c$d.FOLDER_VERSION=1,c$d.FILENAME_VERSION=2,c$d.manifest=null,c$d.type=1}(),function(){function c$a(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}c$m(c$a,"laya.net.TTFLoader");var c$b=c$a.prototype;return c$b.load=function(c$a){var c$b=(this._url=c$a).split(".ttf")[0].split("/");this.fontName=c$b[c$b.length-1],c$O.window.conch?this._loadConch():c$O.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},c$b._loadConch=function(){this._http=new c$ia,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},c$b._onHttpLoaded=function(c$a){c$O.window.conch.setFontFaceFromBuffer(this.fontName,c$a),this._clearHttp(),this._complete()},c$b._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},c$b._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},c$b._complete=function(){c$z.timer.clear(this,this._complete),c$z.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},c$b._checkComplete=function(){c$F.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},c$b._loadWithFontFace=function(){var c$a=new c$O.window.FontFace(this.fontName,"url('"+this._url+"')");c$O.window.document.fonts.add(c$a);var c$b=this;c$a.loaded.then(function(){c$b._complete()}),c$a.load()},c$b._createDiv=function(){this._div=c$O.createElement("div"),this._div.innerHTML="laya";var c$a=this._div.style;c$a.fontFamily=this.fontName,c$a.position="absolute",c$a.left="-100px",c$a.top="-100px",c$O.document.body.appendChild(this._div)},c$b._loadWithCSS=function(){var c$a=this,c$b=c$O.createElement("style");c$b.type="text/css",c$O.document.body.appendChild(c$b),c$b.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=c$F.measureText("LayaTTFFont",this._fontTxt).width;var c$c=this;c$b.onload=function(){c$z.timer.once(1e4,c$c,c$a._complete)},c$z.timer.loop(20,this,this._checkComplete),this._createDiv()},c$a._testString="LayaTTFFont",c$a}()),c$I=function(){function c$d(c$a){this._url=null,this._path=null,this._url=c$d.formatURL(c$a),this._path=c$d.getPath(c$a)}c$m(c$d,"laya.net.URL");var c$a=c$d.prototype;return c$q(0,c$a,"path",function(){return this._path}),c$q(0,c$a,"url",function(){return this._url}),c$d.formatURL=function(c$a,c$b){if(!c$a)return"null path";if(0<c$a.indexOf(":"))return c$a;null!=c$d.customFormat&&(c$a=c$d.customFormat(c$a,c$b));var c$c=c$a.charAt(0);if("."===c$c)return c$d.formatRelativePath((c$b||c$d.basePath)+c$a);if("~"===c$c)return c$d.rootPath+c$a.substring(1);if("d"===c$c){if(0===c$a.indexOf("data:image"))return c$a}else if("/"===c$c)return c$a;return(c$b||c$d.basePath)+c$a},c$d.formatRelativePath=function(c$a){for(var c$b=c$a.split("/"),c$c=0,c$d=c$b.length;c$c<c$d;c$c++)".."==c$b[c$c]&&(c$b.splice(c$c-1,2),c$c-=2);return c$b.join("/")},c$d.isAbsolute=function(c$a){return 0<c$a.indexOf(":")||"/"==c$a.charAt(0)},c$d.getPath=function(c$a){var c$b=c$a.lastIndexOf("/");return 0<c$b?c$a.substr(0,c$b+1):""},c$d.getFileName=function(c$a){var c$b=c$a.lastIndexOf("/");return 0<c$b?c$a.substr(c$b+1):c$a},c$d.version={},c$d.basePath="",c$d.rootPath="",c$d.customFormat=function(c$a){var c$b=c$d.version[c$a];return!c$J.isConchApp&&c$b&&(c$a+="?v="+c$b),c$a},c$d}(),c$J=function(){function c$g(c$a,c$b){this._timeId=0;var c$c=c$g._mainCanvas.source.style;c$c.position="absolute",c$c.top=c$c.left="0px",c$c.background="#000000",c$g._mainCanvas.source.id="layaCanvas";var c$d=laya.renders.Render.isWebGL;c$g._mainCanvas.source.width=c$a,c$g._mainCanvas.source.height=c$b,c$d&&c$g.WebGL.init(c$g._mainCanvas,c$a,c$b),c$O.container.appendChild(c$g._mainCanvas.source),(c$g._context=new c$K(c$a,c$b,c$d?null:c$g._mainCanvas)).ctx.setIsMainContext(),c$O.window.requestAnimationFrame(function c$a(c$b){c$O.window.requestAnimationFrame(c$a);c$z.stage._loop()}),c$z.stage.on("visibilitychange",this,this._onVisibilitychange)}c$m(c$g,"laya.renders.Render");var c$a=c$g.prototype;return c$a._onVisibilitychange=function(){c$z.stage.isVisibility?0!=this._timeId&&c$O.window.clearInterval(this._timeId):this._timeId=c$O.window.setInterval(this._enterFrame,1e3)},c$a._enterFrame=function(c$a){c$z.stage._loop()},c$q(1,c$g,"context",function(){return c$g._context}),c$q(1,c$g,"canvas",function(){return c$g._mainCanvas.source}),c$g._context=null,c$g._mainCanvas=null,c$g.WebGL=null,c$g.isConchNode=!1,c$g.isConchApp=!1,c$g.isConchWebGL=!1,c$g.isWebGL=!1,c$g.is3DMode=!1,c$g.optimizeTextureMemory=function(c$a,c$b){return!0},c$g.__init$=function(){c$i.ConchRenderType=c$i.ConchRenderType||1,c$i.ConchRenderType|=c$i.conch?4:0,c$g.isConchNode=5==(5&c$i.ConchRenderType),c$g.isConchApp=4==(4&c$i.ConchRenderType),c$g.isConchWebGL=6==c$i.ConchRenderType},c$g}(),c$K=function(){function c$i(c$a,c$b,c$c){this.x=0,this.y=0,this._drawTexture=function(c$a,c$b,c$c){c$c[0].loaded&&this.ctx.drawTexture(c$c[0],c$c[1],c$c[2],c$c[3],c$c[4],c$a,c$b)},this._fillTexture=function(c$a,c$b,c$c){c$c[0].loaded&&this.ctx.fillTexture(c$c[0],c$c[1]+c$a,c$c[2]+c$b,c$c[3],c$c[4],c$c[5],c$c[6],c$c[7])},this._drawTextureWithTransform=function(c$a,c$b,c$c){c$c[0].loaded&&this.ctx.drawTextureWithTransform(c$c[0],c$c[1],c$c[2],c$c[3],c$c[4],c$c[5],c$a,c$b,c$c[6])},this._fillQuadrangle=function(c$a,c$b,c$c){this.ctx.fillQuadrangle(c$c[0],c$c[1],c$c[2],c$c[3],c$c[4])},this._drawRect=function(c$a,c$b,c$c){var c$d=this.ctx;null!=c$c[4]&&(c$d.fillStyle=c$c[4],c$d.fillRect(c$a+c$c[0],c$b+c$c[1],c$c[2],c$c[3],null)),null!=c$c[5]&&(c$d.strokeStyle=c$c[5],c$d.lineWidth=c$c[6],c$d.strokeRect(c$a+c$c[0],c$b+c$c[1],c$c[2],c$c[3],c$c[6]))},this._drawPie=function(c$a,c$b,c$c){var c$d=this.ctx;c$J.isWebGL&&c$d.setPathId(c$c[8]),c$d.beginPath(),c$J.isWebGL?(c$d.movePath(c$c[0]+c$a,c$c[1]+c$b),c$d.moveTo(0,0)):c$d.moveTo(c$a+c$c[0],c$b+c$c[1]),c$d.arc(c$a+c$c[0],c$b+c$c[1],c$c[2],c$c[3],c$c[4]),c$d.closePath(),this._fillAndStroke(c$c[5],c$c[6],c$c[7],!0)},this._clipRect=function(c$a,c$b,c$c){this.ctx.clipRect(c$a+c$c[0],c$b+c$c[1],c$c[2],c$c[3])},this._fillRect=function(c$a,c$b,c$c){this.ctx.fillRect(c$a+c$c[0],c$b+c$c[1],c$c[2],c$c[3],c$c[4])},this._drawCircle=function(c$a,c$b,c$c){var c$d=this.ctx;c$J.isWebGL&&c$d.setPathId(c$c[6]),c$X.drawCall++,c$d.beginPath(),c$J.isWebGL&&c$d.movePath(c$c[0]+c$a,c$c[1]+c$b),c$d.arc(c$c[0]+c$a,c$c[1]+c$b,c$c[2],0,c$i.PI2),c$d.closePath(),this._fillAndStroke(c$c[3],c$c[4],c$c[5],!0)},this._fillCircle=function(c$a,c$b,c$c){c$X.drawCall++;var c$d=this.ctx;c$d.beginPath(),c$d.fillStyle=c$c[3],c$d.arc(c$c[0]+c$a,c$c[1]+c$b,c$c[2],0,c$i.PI2),c$d.fill()},this._setShader=function(c$a,c$b,c$c){this.ctx.setShader(c$c[0])},this._drawLine=function(c$a,c$b,c$c){var c$d=this.ctx;c$J.isWebGL&&c$d.setPathId(c$c[6]),c$d.beginPath(),c$d.strokeStyle=c$c[4],c$d.lineWidth=c$c[5],c$J.isWebGL?(c$d.movePath(c$a,c$b),c$d.moveTo(c$c[0],c$c[1]),c$d.lineTo(c$c[2],c$c[3])):(c$d.moveTo(c$a+c$c[0],c$b+c$c[1]),c$d.lineTo(c$a+c$c[2],c$b+c$c[3])),c$d.stroke()},this._drawLines=function(c$a,c$b,c$c){var c$d=this.ctx;c$J.isWebGL&&c$d.setPathId(c$c[5]),c$d.beginPath(),c$a+=c$c[0],c$b+=c$c[1],c$J.isWebGL&&c$d.movePath(c$a,c$b),c$d.strokeStyle=c$c[3],c$d.lineWidth=c$c[4];var c$g=c$c[2],c$h=2,c$i=c$g.length;if(c$J.isWebGL)for(c$d.moveTo(c$g[0],c$g[1]);c$h<c$i;)c$d.lineTo(c$g[c$h++],c$g[c$h++]);else for(c$d.moveTo(c$a+c$g[0],c$b+c$g[1]);c$h<c$i;)c$d.lineTo(c$a+c$g[c$h++],c$b+c$g[c$h++]);c$d.stroke()},this._drawLinesWebGL=function(c$a,c$b,c$c){this.ctx.drawLines(c$a+this.x+c$c[0],c$b+this.y+c$c[1],c$c[2],c$c[3],c$c[4])},this._drawCurves=function(c$a,c$b,c$c){this.ctx.drawCurves(c$a,c$b,c$c)},this._draw=function(c$a,c$b,c$c){c$c[0].call(null,this,c$a,c$b)},this._transformByMatrix=function(c$a,c$b,c$c){this.ctx.transformByMatrix(c$c[0])},this._setTransform=function(c$a,c$b,c$c){this.ctx.setTransform(c$c[0],c$c[1],c$c[2],c$c[3],c$c[4],c$c[5])},this._setTransformByMatrix=function(c$a,c$b,c$c){this.ctx.setTransformByMatrix(c$c[0])},this._save=function(c$a,c$b,c$c){this.ctx.save()},this._restore=function(c$a,c$b,c$c){this.ctx.restore()},this._translate=function(c$a,c$b,c$c){this.ctx.translate(c$c[0],c$c[1])},this._transform=function(c$a,c$b,c$c){this.ctx.translate(c$c[1]+c$a,c$c[2]+c$b);var c$d=c$c[0];this.ctx.transform(c$d.a,c$d.b,c$d.c,c$d.d,c$d.tx,c$d.ty),this.ctx.translate(-c$a-c$c[1],-c$b-c$c[2])},this._rotate=function(c$a,c$b,c$c){this.ctx.translate(c$c[1]+c$a,c$c[2]+c$b),this.ctx.rotate(c$c[0]),this.ctx.translate(-c$a-c$c[1],-c$b-c$c[2])},this._scale=function(c$a,c$b,c$c){this.ctx.translate(c$c[2]+c$a,c$c[3]+c$b),this.ctx.scale(c$c[0],c$c[1]),this.ctx.translate(-c$a-c$c[2],-c$b-c$c[3])},this._alpha=function(c$a,c$b,c$c){this.ctx.globalAlpha*=c$c[0]},this._setAlpha=function(c$a,c$b,c$c){this.ctx.globalAlpha=c$c[0]},this._fillText=function(c$a,c$b,c$c){this.ctx.fillText(c$c[0],c$c[1]+c$a,c$c[2]+c$b,c$c[3],c$c[4],c$c[5])},this._strokeText=function(c$a,c$b,c$c){this.ctx.strokeText(c$c[0],c$c[1]+c$a,c$c[2]+c$b,c$c[3],c$c[4],c$c[5],c$c[6])},this._fillBorderText=function(c$a,c$b,c$c){this.ctx.fillBorderText(c$c[0],c$c[1]+c$a,c$c[2]+c$b,c$c[3],c$c[4],c$c[5],c$c[6],c$c[7])},this._blendMode=function(c$a,c$b,c$c){this.ctx.globalCompositeOperation=c$c[0]},this._beginClip=function(c$a,c$b,c$c){this.ctx.beginClip&&this.ctx.beginClip(c$a+c$c[0],c$b+c$c[1],c$c[2],c$c[3])},this._setIBVB=function(c$a,c$b,c$c){this.ctx.setIBVB(c$c[0]+c$a,c$c[1]+c$b,c$c[2],c$c[3],c$c[4],c$c[5],c$c[6],c$c[7])},this._fillTrangles=function(c$a,c$b,c$c){this.ctx.fillTrangles(c$c[0],c$c[1]+c$a,c$c[2]+c$b,c$c[3],c$c[4])},this._drawPath=function(c$a,c$b,c$c){var c$d=this.ctx;c$J.isWebGL&&c$d.setPathId(-1),c$d.beginPath(),c$a+=c$c[0],c$b+=c$c[1],c$J.isWebGL&&c$d.movePath(c$a,c$b);for(var c$g=c$c[2],c$h=0,c$i=c$g.length;c$h<c$i;c$h++){var c$j=c$g[c$h];switch(c$j[0]){case"moveTo":c$J.isWebGL?c$d.moveTo(c$j[1],c$j[2]):c$d.moveTo(c$a+c$j[1],c$b+c$j[2]);break;case"lineTo":c$J.isWebGL?c$d.lineTo(c$j[1],c$j[2]):c$d.lineTo(c$a+c$j[1],c$b+c$j[2]);break;case"arcTo":c$J.isWebGL?c$d.arcTo(c$j[1],c$j[2],c$j[3],c$j[4],c$j[5]):c$d.arcTo(c$a+c$j[1],c$b+c$j[2],c$a+c$j[3],c$b+c$j[4],c$j[5]);break;case"closePath":c$d.closePath()}}var c$k=c$c[3];null!=c$k&&(c$d.fillStyle=c$k.fillStyle,c$d.fill());var c$l=c$c[4];null!=c$l&&(c$d.strokeStyle=c$l.strokeStyle,c$d.lineWidth=c$l.lineWidth||1,c$d.lineJoin=c$l.lineJoin,c$d.lineCap=c$l.lineCap,c$d.miterLimit=c$l.miterLimit,c$d.stroke())},this.drawPoly=function(c$a,c$b,c$c){this.ctx.drawPoly(c$a+this.x+c$c[0],c$b+this.y+c$c[1],c$c[2],c$c[3],c$c[4],c$c[5],c$c[6])},this._drawPoly=function(c$a,c$b,c$c){var c$d=this.ctx,c$g=c$c[2],c$h=2,c$i=c$g.length;if(c$J.isWebGL)for(c$d.setPathId(c$c[6]),c$d.beginPath(),c$a+=c$c[0],c$b+=c$c[1],c$d.movePath(c$a,c$b),c$d.moveTo(c$g[0],c$g[1]);c$h<c$i;)c$d.lineTo(c$g[c$h++],c$g[c$h++]);else for(c$d.beginPath(),c$a+=c$c[0],c$b+=c$c[1],c$d.moveTo(c$a+c$g[0],c$b+c$g[1]);c$h<c$i;)c$d.lineTo(c$a+c$g[c$h++],c$b+c$g[c$h++]);c$d.closePath(),this._fillAndStroke(c$c[3],c$c[4],c$c[5],c$c[7])},this._drawSkin=function(c$a,c$b,c$c){var c$d=c$c[0];if(c$d){var c$g=this.ctx;c$d.render(c$g,c$a,c$b)}},this._drawParticle=function(c$a,c$b,c$c){this.ctx.drawParticle(c$a+this.x,c$b+this.y,c$c[0])},this._setFilters=function(c$a,c$b,c$c){this.ctx.setFilters(c$c)},c$c?this.ctx=c$c.getContext("2d"):(c$c=c$va.create("3D"),this.ctx=c$F.createWebGLContext2D(c$c),c$c._setContext(this.ctx)),c$c.size(c$a,c$b),this.canvas=c$c}c$m(c$i,"laya.renders.RenderContext");var c$a=c$i.prototype;return c$a.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},c$a.drawTexture=function(c$a,c$b,c$c,c$d,c$g){c$a.loaded&&this.ctx.drawTexture(c$a,c$b,c$c,c$d,c$g,this.x,this.y)},c$a._drawTextures=function(c$a,c$b,c$c){c$c[0].loaded&&this.ctx.drawTextures(c$c[0],c$c[1],c$a+this.x,c$b+this.y)},c$a.drawTextureWithTransform=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){c$a.loaded&&this.ctx.drawTextureWithTransform(c$a,c$b,c$c,c$d,c$g,c$h,this.x,this.y,c$i)},c$a.fillQuadrangle=function(c$a,c$b,c$c,c$d,c$g){this.ctx.fillQuadrangle(c$a,c$b,c$c,c$d,c$g)},c$a.drawCanvas=function(c$a,c$b,c$c,c$d,c$g){this.ctx.drawCanvas(c$a,c$b+this.x,c$c+this.y,c$d,c$g)},c$a.drawRect=function(c$a,c$b,c$c,c$d,c$g,c$h){void 0===c$h&&(c$h=1);var c$i=this.ctx;c$i.strokeStyle=c$g,c$i.lineWidth=c$h,c$i.strokeRect(c$a+this.x,c$b+this.y,c$c,c$d,c$h)},c$a._fillAndStroke=function(c$a,c$b,c$c,c$d){void 0===c$d&&(c$d=!1);var c$g=this.ctx;null!=c$a&&(c$g.fillStyle=c$a,c$J.isWebGL?c$g.fill(c$d):c$g.fill()),null!=c$b&&0<c$c&&(c$g.strokeStyle=c$b,c$g.lineWidth=c$c,c$g.stroke())},c$a.clipRect=function(c$a,c$b,c$c,c$d){this.ctx.clipRect(c$a+this.x,c$b+this.y,c$c,c$d)},c$a.fillRect=function(c$a,c$b,c$c,c$d,c$g){this.ctx.fillRect(c$a+this.x,c$b+this.y,c$c,c$d,c$g)},c$a.drawCircle=function(c$a,c$b,c$c,c$d,c$g){void 0===c$g&&(c$g=1),c$X.drawCall++;var c$h=this.ctx;c$h.beginPath(),c$h.strokeStyle=c$d,c$h.lineWidth=c$g,c$h.arc(c$a+this.x,c$b+this.y,c$c,0,c$i.PI2),c$h.stroke()},c$a.drawTriangles=function(c$a,c$b,c$c){if(c$J.isWebGL)this.ctx.drawTriangles(c$c[0],c$a+c$c[1],c$b+c$c[2],c$c[3],c$c[4],c$c[5],c$c[6],c$c[7],c$c[8],c$c[9]);else{var c$d=c$c[5],c$g=0,c$h=c$d.length,c$i=this.ctx;for(c$g=0;c$g<c$h;c$g+=3){var c$j=2*c$d[c$g],c$k=2*c$d[c$g+1],c$l=2*c$d[c$g+2];c$i.drawTriangle(c$c[0],c$c[3],c$c[4],c$j,c$k,c$l,c$c[6],!0)}}},c$a.fillCircle=function(c$a,c$b,c$c,c$d){c$X.drawCall++;var c$g=this.ctx;c$g.beginPath(),c$g.fillStyle=c$d,c$g.arc(c$a+this.x,c$b+this.y,c$c,0,c$i.PI2),c$g.fill()},c$a.setShader=function(c$a){this.ctx.setShader(c$a)},c$a.drawLine=function(c$a,c$b,c$c,c$d,c$g,c$h){void 0===c$h&&(c$h=1);var c$i=this.ctx;c$i.beginPath(),c$i.strokeStyle=c$g,c$i.lineWidth=c$h,c$i.moveTo(this.x+c$a,this.y+c$b),c$i.lineTo(this.x+c$c,this.y+c$d),c$i.stroke()},c$a.clear=function(){this.ctx.clear()},c$a.transformByMatrix=function(c$a){this.ctx.transformByMatrix(c$a)},c$a.setTransform=function(c$a,c$b,c$c,c$d,c$g,c$h){this.ctx.setTransform(c$a,c$b,c$c,c$d,c$g,c$h)},c$a.setTransformByMatrix=function(c$a){this.ctx.setTransformByMatrix(c$a)},c$a.save=function(){this.ctx.save()},c$a.restore=function(){this.ctx.restore()},c$a.translate=function(c$a,c$b){this.ctx.translate(c$a,c$b)},c$a.transform=function(c$a,c$b,c$c,c$d,c$g,c$h){this.ctx.transform(c$a,c$b,c$c,c$d,c$g,c$h)},c$a.rotate=function(c$a){this.ctx.rotate(c$a)},c$a.scale=function(c$a,c$b){this.ctx.scale(c$a,c$b)},c$a.alpha=function(c$a){this.ctx.globalAlpha*=c$a},c$a.setAlpha=function(c$a){this.ctx.globalAlpha=c$a},c$a.fillWords=function(c$a,c$b,c$c,c$d,c$g,c$h){void 0===c$h&&(c$h=0),this.ctx.fillWords(c$a,c$b,c$c,c$d,c$g,c$h)},c$a.fillBorderWords=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){this.ctx.fillBorderWords(c$a,c$b,c$c,c$d,c$g,c$h,c$i)},c$a.fillText=function(c$a,c$b,c$c,c$d,c$g,c$h){this.ctx.fillText(c$a,c$b+this.x,c$c+this.y,c$d,c$g,c$h)},c$a.strokeText=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){this.ctx.strokeText(c$a,c$b+this.x,c$c+this.y,c$d,c$g,c$h,c$i)},c$a.blendMode=function(c$a){this.ctx.globalCompositeOperation=c$a},c$a.flush=function(){this.ctx.flush&&this.ctx.flush()},c$a.addRenderObject=function(c$a){this.ctx.addRenderObject(c$a)},c$a.beginClip=function(c$a,c$b,c$c,c$d){this.ctx.beginClip&&this.ctx.beginClip(c$a,c$b,c$c,c$d)},c$a.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},c$a.fillTrangles=function(c$a,c$b,c$c){this.ctx.fillTrangles(c$c[0],c$c[1],c$c[2],c$c[3],4<c$c.length?c$c[4]:null)},c$i.PI2=2*Math.PI,c$i}(),c$L=function(){function c$i(c$a,c$b){switch(this._next=c$b||c$i.NORENDER,c$a){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=c$t._filter);case 69905:return void(this._fun=c$i._initRenderFun)}this.onCreate(c$a)}c$m(c$i,"laya.renders.RenderSprite");var c$a=c$i.prototype;return c$a.onCreate=function(c$a){},c$a._style=function(c$a,c$b,c$c,c$d){c$a._style.render(c$a,c$b,c$c,c$d);var c$g=this._next;c$g._fun.call(c$g,c$a,c$b,c$c,c$d)},c$a._no=function(c$a,c$b,c$c,c$d){},c$a._custom=function(c$a,c$b,c$c,c$d){c$a.customRender(c$b,c$c,c$d);var c$g=c$a._style._tf;this._next._fun.call(this._next,c$a,c$b,c$c-c$g.translateX,c$d-c$g.translateY)},c$a._clip=function(c$a,c$b,c$c,c$d){var c$g=this._next;if(c$g!=c$i.NORENDER){var c$h=c$a._style.scrollRect;c$b.ctx.save(),c$b.ctx.clipRect(c$c,c$d,c$h.width,c$h.height),c$g._fun.call(c$g,c$a,c$b,c$c-c$h.x,c$d-c$h.y),c$b.ctx.restore()}},c$a._blend=function(c$a,c$b,c$c,c$d){var c$g=c$a._style;c$g.blendMode&&(c$b.ctx.globalCompositeOperation=c$g.blendMode);var c$h=this._next;c$h._fun.call(c$h,c$a,c$b,c$c,c$d),c$b.ctx.globalCompositeOperation="source-over"},c$a._mask=function(c$a,c$b,c$c,c$d){var c$g=this._next;c$g._fun.call(c$g,c$a,c$b,c$c,c$d);var c$h=c$a.mask;c$h&&(c$b.ctx.globalCompositeOperation="destination-in",(0<c$h.numChildren||!c$h.graphics._isOnlyOne())&&(c$h.cacheAsBitmap=!0),c$h.render(c$b,c$c-c$a.pivotX,c$d-c$a.pivotY)),c$b.ctx.globalCompositeOperation="source-over"},c$a._graphics=function(c$a,c$b,c$c,c$d){var c$g=c$a._style._tf;c$a._graphics&&c$a._graphics._render(c$a,c$b,c$c-c$g.translateX,c$d-c$g.translateY);var c$h=this._next;c$h._fun.call(c$h,c$a,c$b,c$c,c$d)},c$a._image=function(c$a,c$b,c$c,c$d){var c$g=c$a._style;c$b.ctx.drawTexture2(c$c,c$d,c$g._tf.translateX,c$g._tf.translateY,c$a.transform,c$g.alpha,c$g.blendMode,c$a._graphics._one)},c$a._image2=function(c$a,c$b,c$c,c$d){var c$g=c$a._style._tf;c$b.ctx.drawTexture2(c$c,c$d,c$g.translateX,c$g.translateY,c$a.transform,1,null,c$a._graphics._one)},c$a._alpha=function(c$a,c$b,c$c,c$d){var c$g;if(.01<(c$g=c$a._style.alpha)||c$a._needRepaint()){var c$h=c$b.ctx.globalAlpha;c$b.ctx.globalAlpha*=c$g;var c$i=this._next;c$i._fun.call(c$i,c$a,c$b,c$c,c$d),c$b.ctx.globalAlpha=c$h}},c$a._transform=function(c$a,c$b,c$c,c$d){var c$g=c$a.transform,c$h=this._next;c$g&&c$h!=c$i.NORENDER?(c$b.save(),c$b.transform(c$g.a,c$g.b,c$g.c,c$g.d,c$g.tx+c$c,c$g.ty+c$d),c$h._fun.call(c$h,c$a,c$b,0,0),c$b.restore()):c$h._fun.call(c$h,c$a,c$b,c$c,c$d)},c$a._childs=function(c$a,c$b,c$c,c$d){var c$g=c$a._style,c$h=c$g._tf;if(c$c=c$c-c$h.translateX+c$g.paddingLeft,c$d=c$d-c$h.translateY+c$g.paddingTop,c$g._calculation){var c$i=c$a._getWords();if(c$i){var c$j=c$g;c$j&&(c$j.stroke?c$b.fillBorderWords(c$i,c$c,c$d,c$j.font,c$j.color,c$j.strokeColor,c$j.stroke):c$b.fillWords(c$i,c$c,c$d,c$j.font,c$j.color,"none"!=c$j.textDecoration&&c$j.underLine?1:0))}}var c$k,c$l=c$a._childs,c$m=c$l.length;if(c$a.viewport||c$a.optimizeScrollRect&&c$a._style.scrollRect){var c$n=c$a.viewport||c$a._style.scrollRect,c$o=c$n.x,c$p=c$n.y,c$q=c$n.right,c$r=c$n.bottom,c$s=NaN,c$t=NaN;for(c$u=0;c$u<c$m;++c$u)(c$k=c$l[c$u]).visible&&(c$s=c$k._x)<c$q&&c$s+c$k.width>c$o&&(c$t=c$k._y)<c$r&&c$t+c$k.height>c$p&&c$k.render(c$b,c$c,c$d)}else for(var c$u=0;c$u<c$m;++c$u)(c$k=c$l[c$u])._style.visible&&c$k.render(c$b,c$c,c$d)},c$a._canvas=function(c$a,c$b,c$c,c$d){var c$g=c$a._$P.cacheCanvas;if(c$g){"bitmap"===c$g.type?c$X.canvasBitmap++:c$X.canvasNormal++;var c$h=c$g.ctx;if(c$a._needRepaint()||!c$h)this._canvas_repaint(c$a,c$b,c$c,c$d);else{var c$i=c$g._cacheRec;c$b.drawCanvas(c$h.canvas,c$c+c$i.x,c$d+c$i.y,c$i.width,c$i.height)}}else this._next._fun.call(this._next,c$a,c$b,c$c,c$d)},c$a._canvas_repaint=function(c$a,c$b,c$c,c$d){var c$g=c$a._$P.cacheCanvas,c$h=this._next;if(c$g){var c$i,c$j,c$k,c$l,c$m=c$g.ctx,c$n=c$a._needRepaint()||!c$m,c$o=c$g.type;if("bitmap"===c$o?c$X.canvasBitmap++:c$X.canvasNormal++,c$n){var c$p,c$q;c$g._cacheRec||(c$g._cacheRec=new c$B),c$J.isWebGL&&"bitmap"!==c$o?c$g._cacheRec.setTo(-c$a.pivotX,-c$a.pivotY,1,1):((c$l=c$a.getSelfBounds()).x=c$l.x-c$a.pivotX,c$l.y=c$l.y-c$a.pivotY,c$l.x=c$l.x-16,c$l.y=c$l.y-16,c$l.width=c$l.width+32,c$l.height=c$l.height+32,c$l.x=Math.floor(c$l.x+c$c)-c$c,c$l.y=Math.floor(c$l.y+c$d)-c$d,c$l.width=Math.floor(c$l.width),c$l.height=Math.floor(c$l.height),c$g._cacheRec.copyFrom(c$l)),c$l=c$g._cacheRec;var c$r,c$s=c$J.isWebGL?1:c$O.pixelRatio*c$z.stage.clientScaleX,c$t=c$J.isWebGL?1:c$O.pixelRatio*c$z.stage.clientScaleY;if(!c$J.isWebGL){var c$u,c$v=1,c$w=1;for(c$u=c$a;c$u&&c$u!=c$z.stage;)c$v*=c$u.scaleX,c$w*=c$u.scaleY,c$u=c$u.parent;c$J.isWebGL?(c$v<1&&(c$s*=c$v),c$w<1&&(c$t*=c$w)):(1<c$v&&(c$s*=c$v),1<c$w&&(c$t*=c$w))}if(c$a.scrollRect){var c$x=c$a.scrollRect;c$l.x-=c$x.x,c$l.y-=c$x.y}if(c$p=c$l.width*c$s,c$q=c$l.height*c$t,c$j=c$l.x,c$k=c$l.y,c$J.isWebGL&&"bitmap"===c$o&&(2048<c$p||2048<c$q))return console.warn("cache bitmap size larger than 2048,cache ignored"),c$g.ctx&&(c$W.recover("RenderContext",c$g.ctx),c$g.ctx.canvas.size(0,0),c$g.ctx=null),void c$h._fun.call(c$h,c$a,c$b,c$c,c$d);if(c$m||(c$m=c$g.ctx=c$W.getItem("RenderContext")||new c$K(c$p,c$q,c$va.create("AUTO"))),c$m.ctx.sprite=c$a,(c$i=c$m.canvas).clear(),(c$i.width!=c$p||c$i.height!=c$q)&&c$i.size(c$p,c$q),"bitmap"===c$o?c$i.context.asBitmap=!0:"normal"===c$o&&(c$i.context.asBitmap=!1),1!=c$s||1!=c$t){var c$y=c$m.ctx;c$y.save(),c$y.scale(c$s,c$t),!c$J.isConchWebGL&&c$J.isConchApp&&(c$r=c$a._$P.cf)&&c$y.setFilterMatrix&&c$y.setFilterMatrix(c$r._mat,c$r._alpha),c$h._fun.call(c$h,c$a,c$m,-c$j,-c$k),c$y.restore(),c$J.isConchApp&&!c$J.isConchWebGL||c$a._applyFilters()}else c$y=c$m.ctx,!c$J.isConchWebGL&&c$J.isConchApp&&(c$r=c$a._$P.cf)&&c$y.setFilterMatrix&&c$y.setFilterMatrix(c$r._mat,c$r._alpha),c$h._fun.call(c$h,c$a,c$m,-c$j,-c$k),c$J.isConchApp&&!c$J.isConchWebGL||c$a._applyFilters();c$a._$P.staticCache&&(c$g.reCache=!1),c$X.canvasReCache++}else c$j=(c$l=c$g._cacheRec).x,c$k=c$l.y,c$i=c$m.canvas;c$b.drawCanvas(c$i,c$c+c$j,c$d+c$k,c$l.width,c$l.height)}else c$h._fun.call(c$h,c$a,c$m,c$c,c$d)},c$i.__init__=function(){var c$a,c$b,c$c=0;for(c$b=c$F.createRenderSprite(69905,null),c$a=c$i.renders.length=4096,c$c=0;c$c<c$a;c$c++)c$i.renders[c$c]=c$b;c$i.renders[0]=c$F.createRenderSprite(0,null),function(c$a,c$b){for(var c$c=0,c$d=0;c$d<c$a.length;c$d++)c$c|=c$a[c$d],c$i.renders[c$c]=c$b}([1,512,4,2],new c$i(1,null)),c$i.renders[513]=c$F.createRenderSprite(513,null),c$i.renders[517]=new c$i(517,null)},c$i._initRenderFun=function(c$a,c$b,c$c,c$d){var c$g=c$a._renderType;(c$i.renders[c$g]=c$i._getTypeRender(c$g))._fun(c$a,c$b,c$c,c$d)},c$i._getTypeRender=function(c$a){for(var c$b=null,c$c=2048;1<c$c;)c$c&c$a&&(c$b=c$F.createRenderSprite(c$c,c$b)),c$c>>=1;return c$b},c$i.IMAGE=1,c$i.ALPHA=2,c$i.TRANSFORM=4,c$i.BLEND=8,c$i.CANVAS=16,c$i.FILTERS=32,c$i.MASK=64,c$i.CLIP=128,c$i.STYLE=256,c$i.GRAPHICS=512,c$i.CUSTOM=1024,c$i.CHILDS=2048,c$i.INIT=69905,c$i.renders=[],c$i.NORENDER=new c$i(0,null),c$i}(),c$M=function(){function c$j(){this._repaint=!1}c$m(c$j,"laya.resource.Context");var c$a=c$j.prototype;return c$a.replaceReset=function(){var c$a,c$b,c$c=0;for(c$a=c$j.replaceKeys.length,c$c=0;c$c<c$a;c$c++)c$b=c$j.replaceKeys[c$c],this[c$j.newKeys[c$c]]=this[c$b]},c$a.replaceResotre=function(){this.__restore(),this.__reset()},c$a.setIsMainContext=function(){},c$a.drawTextures=function(c$a,c$b,c$c,c$d){c$X.drawCall+=c$b.length/2;for(var c$g=c$a.width,c$h=c$a.height,c$i=0,c$j=c$b.length;c$i<c$j;c$i+=2)this.drawTexture(c$a,c$b[c$i],c$b[c$i+1],c$g,c$h,c$c,c$d)},c$a.drawCanvas=function(c$a,c$b,c$c,c$d,c$g){c$X.drawCall++,this.drawImage(c$a.source,c$b,c$c,c$d,c$g)},c$a.fillRect=function(c$a,c$b,c$c,c$d,c$g){c$X.drawCall++,c$g&&(this.fillStyle=c$g),this.__fillRect(c$a,c$b,c$c,c$d)},c$a.fillText=function(c$a,c$b,c$c,c$d,c$g,c$h){c$X.drawCall++,3<arguments.length&&null!=c$d&&(this.font=c$d,this.fillStyle=c$g,this.textAlign=c$h,this.textBaseline="top"),this.__fillText(c$a,c$b,c$c)},c$a.fillBorderText=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){c$X.drawCall++,this.font=c$d,this.fillStyle=c$g,this.textBaseline="top",this.strokeStyle=c$h,this.lineWidth=c$i,this.textAlign=c$j,this.__strokeText(c$a,c$b,c$c),this.__fillText(c$a,c$b,c$c)},c$a.strokeText=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){c$X.drawCall++,3<arguments.length&&null!=c$d&&(this.font=c$d,this.strokeStyle=c$g,this.lineWidth=c$h,this.textAlign=c$i,this.textBaseline="top"),this.__strokeText(c$a,c$b,c$c)},c$a.transformByMatrix=function(c$a){this.transform(c$a.a,c$a.b,c$a.c,c$a.d,c$a.tx,c$a.ty)},c$a.setTransformByMatrix=function(c$a){this.setTransform(c$a.a,c$a.b,c$a.c,c$a.d,c$a.tx,c$a.ty)},c$a.clipRect=function(c$a,c$b,c$c,c$d){c$X.drawCall++,this.beginPath(),this.rect(c$a,c$b,c$c,c$d),this.clip()},c$a.drawTexture=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){c$X.drawCall++;var c$j=c$a.uv,c$k=c$a.bitmap.width,c$l=c$a.bitmap.height;this.drawImage(c$a.source,c$j[0]*c$k,c$j[1]*c$l,(c$j[2]-c$j[0])*c$k,(c$j[5]-c$j[3])*c$l,c$b+c$h,c$c+c$i,c$d,c$g)},c$a.drawTextureWithTransform=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k){c$X.drawCall++;var c$l=c$a.uv,c$m=c$a.bitmap.width,c$n=c$a.bitmap.height;this.save(),1!=c$k&&(this.globalAlpha*=c$k),c$h?(this.transform(c$h.a,c$h.b,c$h.c,c$h.d,c$h.tx+c$i,c$h.ty+c$j),this.drawImage(c$a.source,c$l[0]*c$m,c$l[1]*c$n,(c$l[2]-c$l[0])*c$m,(c$l[5]-c$l[3])*c$n,c$b,c$c,c$d,c$g)):this.drawImage(c$a.source,c$l[0]*c$m,c$l[1]*c$n,(c$l[2]-c$l[0])*c$m,(c$l[5]-c$l[3])*c$n,c$b+c$i,c$c+c$j,c$d,c$g),this.restore()},c$a.drawTexture2=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){var c$k=c$j[0];if(c$k.loaded&&c$k.bitmap&&c$k.source){c$X.drawCall++;var c$l=1!==c$h;if(c$l){var c$m=this.globalAlpha;this.globalAlpha*=c$h}var c$n=c$k.uv,c$o=c$k.bitmap.width,c$p=c$k.bitmap.height;c$g?(this.save(),this.transform(c$g.a,c$g.b,c$g.c,c$g.d,c$g.tx+c$a,c$g.ty+c$b),this.drawImage(c$k.source,c$n[0]*c$o,c$n[1]*c$p,(c$n[2]-c$n[0])*c$o,(c$n[5]-c$n[3])*c$p,c$j[1]-c$c,c$j[2]-c$d,c$j[3],c$j[4]),this.restore()):this.drawImage(c$k.source,c$n[0]*c$o,c$n[1]*c$p,(c$n[2]-c$n[0])*c$o,(c$n[5]-c$n[3])*c$p,c$j[1]-c$c+c$a,c$j[2]-c$d+c$b,c$j[3],c$j[4]),c$l&&(this.globalAlpha=c$m)}},c$a.fillTexture=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){if(!c$j.pat){if(c$a.uv!=c$ma.DEF_UV){var c$k=new c$va("2D");c$k.getContext("2d"),c$k.size(c$a.width,c$a.height),c$k.context.drawTexture(c$a,0,0,c$a.width,c$a.height,0,0),c$a=new c$ma(c$k)}c$j.pat=this.createPattern(c$a.bitmap.source,c$h)}var c$l=c$b,c$m=c$c,c$n=0,c$o=0;c$i&&(c$l+=c$i.x%c$a.width,c$m+=c$i.y%c$a.height,c$n-=c$i.x%c$a.width,c$o-=c$i.y%c$a.height),this.translate(c$l,c$m),this.fillRect(c$n,c$o,c$d,c$g,c$j.pat),this.translate(-c$l,-c$m)},c$a.drawTriangle=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){var c$k=c$a.bitmap,c$l=c$k.source,c$m=c$a.width,c$n=c$a.height,c$o=c$k.width,c$p=c$k.height,c$q=c$c[c$d]*c$o,c$r=c$c[c$g]*c$o,c$s=c$c[c$h]*c$o,c$t=c$c[c$d+1]*c$p,c$u=c$c[c$g+1]*c$p,c$v=c$c[c$h+1]*c$p,c$w=c$b[c$d],c$x=c$b[c$g],c$y=c$b[c$h],c$z=c$b[c$d+1],c$A=c$b[c$g+1],c$B=c$b[c$h+1];if(c$j){var c$C=(c$w+c$x+c$y)/3,c$D=(c$z+c$A+c$B)/3,c$E=c$w-c$C,c$F=c$z-c$D,c$G=Math.sqrt(c$E*c$E+c$F*c$F);c$w=c$C+c$E/c$G*(c$G+1),c$z=c$D+c$F/c$G*(c$G+1),c$F=c$A-c$D,c$x=c$C+(c$E=c$x-c$C)/(c$G=Math.sqrt(c$E*c$E+c$F*c$F))*(c$G+1),c$A=c$D+c$F/c$G*(c$G+1),c$F=c$B-c$D,c$y=c$C+(c$E=c$y-c$C)/(c$G=Math.sqrt(c$E*c$E+c$F*c$F))*(c$G+1),c$B=c$D+c$F/c$G*(c$G+1)}this.save(),c$i&&this.transform(c$i.a,c$i.b,c$i.c,c$i.d,c$i.tx,c$i.ty),this.beginPath(),this.moveTo(c$w,c$z),this.lineTo(c$x,c$A),this.lineTo(c$y,c$B),this.closePath(),this.clip();var c$H=1/(c$q*c$u+c$t*c$s+c$r*c$v-c$u*c$s-c$t*c$r-c$q*c$v),c$I=c$w*c$u+c$t*c$y+c$x*c$v-c$u*c$y-c$t*c$x-c$w*c$v,c$J=c$q*c$x+c$w*c$s+c$r*c$y-c$x*c$s-c$w*c$r-c$q*c$y,c$K=c$q*c$u*c$y+c$t*c$x*c$s+c$w*c$r*c$v-c$w*c$u*c$s-c$t*c$r*c$y-c$q*c$x*c$v,c$L=c$z*c$u+c$t*c$B+c$A*c$v-c$u*c$B-c$t*c$A-c$z*c$v,c$M=c$q*c$A+c$z*c$s+c$r*c$B-c$A*c$s-c$z*c$r-c$q*c$B,c$N=c$q*c$u*c$B+c$t*c$A*c$s+c$z*c$r*c$v-c$z*c$u*c$s-c$t*c$r*c$B-c$q*c$A*c$v;this.transform(c$I*c$H,c$L*c$H,c$J*c$H,c$M*c$H,c$K*c$H,c$N*c$H),this.drawImage(c$l,c$a.uv[0]*c$o,c$a.uv[1]*c$p,c$m,c$n,c$a.uv[0]*c$o,c$a.uv[1]*c$p,c$m,c$n),this.restore()},c$a.flush=function(){return 0},c$a.fillWords=function(c$a,c$b,c$c,c$d,c$g,c$h){c$d&&(this.font=c$d),c$g&&(this.fillStyle=c$g);this.textBaseline="top",this.textAlign="left";for(var c$i=0,c$j=c$a.length;c$i<c$j;c$i++){var c$k=c$a[c$i];if(this.__fillText(c$k.char,c$k.x+c$b,c$k.y+c$c),1===c$h){var c$l=c$k.height,c$m=.5*c$k.style.letterSpacing;c$m||(c$m=0),this.beginPath(),this.strokeStyle=c$g,this.lineWidth=1,this.moveTo(c$b+c$k.x-c$m+.5,c$c+c$k.y+c$l+.5),this.lineTo(c$b+c$k.x+c$k.width+c$m+.5,c$c+c$k.y+c$l+.5),this.stroke()}}},c$a.fillBorderWords=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){c$d&&(this.font=c$d),c$g&&(this.fillStyle=c$g),this.textBaseline="top",this.lineWidth=c$i,this.textAlign="left",this.strokeStyle=c$h;for(var c$j=0,c$k=c$a.length;c$j<c$k;c$j++){var c$l=c$a[c$j];this.__strokeText(c$l.char,c$l.x+c$b,c$l.y+c$c),this.__fillText(c$l.char,c$l.x+c$b,c$l.y+c$c)}},c$a.destroy=function(){this.canvas.width=this.canvas.height=0},c$a.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},c$a.drawCurves=function(c$a,c$b,c$c){this.beginPath(),this.strokeStyle=c$c[3],this.lineWidth=c$c[4];var c$d=c$c[2];c$a+=c$c[0],c$b+=c$c[1],this.moveTo(c$a+c$d[0],c$b+c$d[1]);for(var c$g=2,c$h=c$d.length;c$g<c$h;)this.quadraticCurveTo(c$a+c$d[c$g++],c$b+c$d[c$g++],c$a+c$d[c$g++],c$b+c$d[c$g++]);this.stroke()},c$j.__init__=function(c$b){var c$c=laya.resource.Context.prototype;if(!(c$b=c$b||CanvasRenderingContext2D.prototype).inited){c$b.inited=!0,c$b.__fillText=c$b.fillText,c$b.__fillRect=c$b.fillRect,c$b.__strokeText=c$b.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(c$a){c$b[c$a]=c$c[c$a]})}},c$j.replaceCanvasGetSet=function(c$a,c$b){var c$c=Object.getOwnPropertyDescriptor(c$a,c$b);if(!c$c||!c$c.configurable)return!1;var c$d,c$g={};for(c$d in c$c)"set"!=c$d&&(c$g[c$d]=c$c[c$d]);var c$h=c$c.set;return c$g.set=function(c$a){c$h.call(this,c$a);var c$b=this.getContext("2d");c$b&&"__reset"in c$b&&c$b.__reset()},Object.defineProperty(c$a,c$b,c$g),!0},c$j.replaceGetSet=function(c$a,c$b){var c$c=Object.getOwnPropertyDescriptor(c$a,c$b);if(!c$c||!c$c.configurable)return!1;var c$d,c$g={};for(c$d in c$c)"set"!=c$d&&(c$g[c$d]=c$c[c$d]);var c$h=c$c.set,c$i="___"+c$b+"__";return c$j.newKeys.push(c$i),c$g.set=function(c$a){c$a!=this[c$i]&&(this[c$i]=c$a,c$h.call(this,c$a))},Object.defineProperty(c$a,c$b,c$g),!0},c$j._default=new c$j,c$j.newKeys=[],c$k(c$j,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),c$j}(),c$N=function(){function c$h(c$a){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++c$h._uniqueIDCounter,this._name=c$a||"Content Manager",c$h._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,c$h._resourceManagers.push(this),this._resources=[],this._records={}}c$m(c$h,"laya.resource.ResourceManager");var c$a=c$h.prototype;return c$z.imps(c$a,{"laya.resource.IDispose":!0}),c$a.getResourceByIndex=function(c$a){return this._resources[c$a]},c$a.getResourcesLength=function(){return this._resources.length},c$a.addResource=function(c$a){return c$a.resourceManager&&c$a.resourceManager.removeResource(c$a),-1===this._resources.indexOf(c$a)&&((c$a._resourceManager=this)._resources.push(c$a),this.addRecord(c$a.uri,c$a.__className,c$a.memorySize),this.addSize(c$a.memorySize),!0)},c$a.removeResource=function(c$a){var c$b=this._resources.indexOf(c$a);return-1!==c$b&&(this._resources.splice(c$b,1),c$a._resourceManager=null,this._memorySize-=c$a.memorySize,this.addRecord(c$a.uri,c$a.__className,-c$a.memorySize),!0)},c$a.unload=function(){for(var c$a=this._resources.slice(0,this._resources.length),c$b=0;c$b<c$a.length;c$b++){c$a[c$b].destroy()}c$a.length=0},c$a.dispose=function(){if(this===c$h._systemResourceManager)throw new Error("systemResourceManager不能被释放！");c$h._resourceManagers.splice(c$h._resourceManagers.indexOf(this),1),c$h._isResourceManagersSorted=!1;for(var c$a=this._resources.slice(0,this._resources.length),c$b=0;c$b<c$a.length;c$b++){var c$c=c$a[c$b];c$c.resourceManager.removeResource(c$c),c$c.destroy()}c$a.length=0},c$a.addSize=function(c$a){c$a&&(this.autoRelease&&0<c$a&&this._memorySize+c$a>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=c$a)},c$a.addRecord=function(c$a,c$b,c$c){DEBUG&&c$c&&!c$a&&console.error(c$a,c$b,c$c),c$a&&(this._records.hasOwnProperty(c$b+"|"+c$a)||(this._records[c$b+"|"+c$a]=0),this._records[c$b+"|"+c$a]+=c$c,DEBUG&&this._records[c$b+"|"+c$a]<0&&console.error(c$a,c$b,this._records[c$b+"|"+c$a]))},c$a.garbageCollection=function(c$a){var c$b=this._resources;(c$b=c$b.slice()).sort(function(c$a,c$b){if(!c$a||!c$b)throw new Error("a或b不能为空！");return c$a.released&&c$b.released?0:c$a.released?1:c$b.released?-1:c$a._lastUseFrameCount-c$b._lastUseFrameCount});for(var c$c=c$X.loopCount,c$d=0,c$g=c$b.length;c$d<c$g;c$d++){var c$h=c$b[c$d];if(!(1<c$c-c$h._lastUseFrameCount))return void(this._memorySize>=c$a&&(this._isOverflow=!0));if(c$h.releaseResource(),this._memorySize<c$a)return void(this._isOverflow=!1)}},c$q(0,c$a,"id",function(){return this._id}),c$q(0,c$a,"name",function(){return this._name},function(c$a){!c$a&&""===c$a||this._name===c$a||(this._name=c$a,c$h._isResourceManagersSorted=!1)}),c$q(0,c$a,"memorySize",function(){return this._memorySize}),c$q(0,c$a,"records",function(){return this._records}),c$q(1,c$h,"systemResourceManager",function(){return c$h._systemResourceManager}),c$h.__init__=function(){c$h.currentResourceManager=c$h.systemResourceManager},c$h.getLoadedResourceManagerByIndex=function(c$a){return c$h._resourceManagers[c$a]},c$h.getLoadedResourceManagersCount=function(){return c$h._resourceManagers.length},c$h.recreateContentManagers=function(c$a){void 0===c$a&&(c$a=!1);for(var c$b=c$h.currentResourceManager,c$c=0;c$c<c$h._resourceManagers.length;c$c++){c$h.currentResourceManager=c$h._resourceManagers[c$c];for(var c$d=0;c$d<c$h.currentResourceManager._resources.length;c$d++)c$h.currentResourceManager._resources[c$d].releaseResource(c$a),c$h.currentResourceManager._resources[c$d].activeResource(c$a)}c$h.currentResourceManager=c$b},c$h.releaseContentManagers=function(c$a){void 0===c$a&&(c$a=!1);for(var c$b=c$h.currentResourceManager,c$c=0;c$c<c$h._resourceManagers.length;c$c++){c$h.currentResourceManager=c$h._resourceManagers[c$c];for(var c$d=0;c$d<c$h.currentResourceManager._resources.length;c$d++){var c$g=c$h.currentResourceManager._resources[c$d];!c$g.released&&c$g.releaseResource(c$a)}}c$h.currentResourceManager=c$b},c$h._uniqueIDCounter=0,c$h._isResourceManagersSorted=!1,c$h._resourceManagers=[],c$k(c$h,["_systemResourceManager",function(){return this._systemResourceManager=new c$h("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=c$h._systemResourceManager}]),c$h}(),c$O=(function(){function c$a(){}c$m(c$a,"laya.system.System"),c$a.changeDefinition=function(c$a,c$b){c$z[c$a]=c$b;var c$c=c$a+"=classObj";c$z._runScript(c$c)},c$a.__init__=function(){c$J.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function c$c(){}return c$m(c$c,"laya.utils.Browser"),c$q(1,c$c,"pixelRatio",function(){return c$c.__init__(),-1<c$c.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:c$F.getPixelRatio()}),c$q(1,c$c,"height",function(){return c$c.__init__(),(c$z.stage&&c$z.stage.canvasRotation?c$c.clientWidth:c$c.clientHeight)*c$c.pixelRatio}),c$q(1,c$c,"clientWidth",function(){return c$c.__init__(),c$c.window.innerWidth||c$c.document.body.clientWidth}),c$q(1,c$c,"window",function(){return c$c.__init__(),c$c._window}),c$q(1,c$c,"clientHeight",function(){return c$c.__init__(),c$c.window.innerHeight||c$c.document.body.clientHeight||c$c.document.documentElement.clientHeight}),c$q(1,c$c,"width",function(){return c$c.__init__(),(c$z.stage&&c$z.stage.canvasRotation?c$c.clientHeight:c$c.clientWidth)*c$c.pixelRatio}),c$q(1,c$c,"container",function(){return c$c.__init__(),c$c._container||((c$c._container=c$c.createElement("div")).id="layaContainer",c$c.document.body.appendChild(c$c._container)),c$c._container},function(c$a){c$c._container=c$a}),c$q(1,c$c,"document",function(){return c$c.__init__(),c$c._document}),c$c.__init__=function(){if(!c$c._window){c$c._window=c$F.getWindow(),c$c._document=c$c.window.document,c$c._window.addEventListener("message",function(c$a){laya.utils.Browser._onMessage(c$a)},!1),c$c.document.__createElement=c$c.document.createElement,c$i.requestAnimationFrame=c$i.requestAnimationFrame||c$i.webkitRequestAnimationFrame||c$i.mozRequestAnimationFrame||c$i.oRequestAnimationFrame||c$i.msRequestAnimationFrame||function(c$a){return c$i.setTimeout(c$a,1e3/60)};var c$a=c$i.document.body.style;c$a["-webkit-user-select"]="none",c$a["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",c$c.userAgent=c$c.window.navigator.userAgent,c$c.onIOS=!!(c$c.u=c$c.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),c$c.onMobile=-1<c$c.u.indexOf("Mobile"),c$c.onIPhone=-1<c$c.u.indexOf("iPhone"),c$c.onMac=-1<c$c.u.indexOf("Mac OS X"),c$c.onIPad=-1<c$c.u.indexOf("iPad"),c$c.onAndroid=-1<c$c.u.indexOf("Android")||-1<c$c.u.indexOf("Adr"),c$c.onWP=-1<c$c.u.indexOf("Windows Phone"),c$c.onQQBrowser=-1<c$c.u.indexOf("QQBrowser"),c$c.onMQQBrowser=-1<c$c.u.indexOf("MQQBrowser")||-1<c$c.u.indexOf("Mobile")&&-1<c$c.u.indexOf("QQ"),c$c.onIE=!!c$c.window.ActiveXObject||"ActiveXObject"in c$c.window,c$c.onWeiXin=-1<c$c.u.indexOf("MicroMessenger"),c$c.onPC=!c$c.onMobile,c$c.onSafari=-1<c$c.u.indexOf("Safari"),c$c.onFirefox=-1<c$c.u.indexOf("Firefox"),c$c.onEdge=-1<c$c.u.indexOf("Edge"),c$c.onMiniGame=-1<c$c.u.indexOf("MiniGame"),c$c.onLimixiu=-1<c$c.u.indexOf("limixiu"),c$c.httpProtocol="http:"==c$c.window.location.protocol,c$c.onMiniGame&&null==c$c.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),c$c.webAudioEnabled=!!(c$c.window.AudioContext||c$c.window.webkitAudioContext||c$c.window.mozAudioContext),c$c.soundType=c$c.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",c$ga=c$c.webAudioEnabled?c$ha:c$ca,c$c.webAudioEnabled&&c$ha.initWebAudio(),c$ca._initMusicAudio(),c$c.enableTouch="ontouchstart"in c$i||c$i.DocumentTouch&&c$b instanceof DocumentTouch,c$i.focus(),c$E._soundClass=c$ga,c$E._musicClass=c$ca,c$J._mainCanvas=c$J._mainCanvas||c$va.create("2D"),c$c.canvas||(c$c.canvas=c$va.create("2D"),c$c.context=c$c.canvas.getContext("2d"))}},c$c._onMessage=function(c$a){if(c$a.data&&"size"==c$a.data.name){if(c$c.window.innerWidth=c$a.data.width,c$c.window.innerHeight=c$a.data.height,c$c.window.__innerHeight=c$a.data.clientHeight,!c$c.document.createEvent)return void console.warn("no document.createEvent");var c$b=c$c.document.createEvent("HTMLEvents");return c$b.initEvent("resize",!1,!1),void c$c.window.dispatchEvent(c$b)}},c$c.createElement=function(c$a){return c$c.__init__(),c$c.document.__createElement(c$a)},c$c.getElementById=function(c$a){return c$c.__init__(),c$c.document.getElementById(c$a)},c$c.removeElement=function(c$a){c$a&&c$a.parentNode&&c$a.parentNode.removeChild(c$a)},c$c.now=function(){return c$F.now()},c$c._window=null,c$c._document=null,c$c._container=null,c$c.userAgent=null,c$c.u=null,c$c.onIOS=!1,c$c.onMac=!1,c$c.onMobile=!1,c$c.onIPhone=!1,c$c.onIPad=!1,c$c.onAndroid=!1,c$c.onWP=!1,c$c.onQQBrowser=!1,c$c.onMQQBrowser=!1,c$c.onSafari=!1,c$c.onFirefox=!1,c$c.onEdge=!1,c$c.onIE=!1,c$c.onWeiXin=!1,c$c.onMiniGame=!1,c$c.onLimixiu=!1,c$c.onPC=!1,c$c.httpProtocol=!1,c$c.webAudioEnabled=!1,c$c.soundType=null,c$c.enableTouch=!1,c$c.canvas=null,c$c.context=null,c$c.__init$=function(){},c$c}()),c$P=function(){function c$b(c$a){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,c$a?(this._u8d_=new Uint8Array(c$a),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}c$m(c$b,"laya.utils.Byte");var c$a=c$b.prototype;return c$a.___resizeBuffer=function(c$b){try{var c$a=new Uint8Array(c$b);null!=this._u8d_&&(this._u8d_.length<=c$b?c$a.set(this._u8d_):c$a.set(this._u8d_.subarray(0,c$b))),this._u8d_=c$a,this._d_=new DataView(c$a.buffer)}catch(c$a){throw"___resizeBuffer err:"+c$b}},c$a.getString=function(){return this.rUTF(this.getUint16())},c$a.getFloat32Array=function(c$a,c$b){var c$c=c$a+c$b;c$c=c$c>this._length?this._length:c$c;var c$d=new Float32Array(this._d_.buffer.slice(c$a,c$c));return this._pos_=c$c,c$d},c$a.getUint8Array=function(c$a,c$b){var c$c=c$a+c$b;c$c=c$c>this._length?this._length:c$c;var c$d=new Uint8Array(this._d_.buffer.slice(c$a,c$c));return this._pos_=c$c,c$d},c$a.getInt16Array=function(c$a,c$b){var c$c=c$a+c$b;c$c=c$c>this._length?this._length:c$c;var c$d=new Int16Array(this._d_.buffer.slice(c$a,c$c));return this._pos_=c$c,c$d},c$a.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var c$a=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,c$a},c$a.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var c$a=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,c$a},c$a.writeFloat32=function(c$a){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,c$a,this._xd_),this._pos_+=4},c$a.writeFloat64=function(c$a){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,c$a,this._xd_),this._pos_+=8},c$a.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var c$a=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,c$a},c$a.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var c$a=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,c$a},c$a.writeInt32=function(c$a){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,c$a,this._xd_),this._pos_+=4},c$a.writeUint32=function(c$a){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,c$a,this._xd_),this._pos_+=4},c$a.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var c$a=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,c$a},c$a.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var c$a=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,c$a},c$a.writeUint16=function(c$a){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,c$a,this._xd_),this._pos_+=2},c$a.writeInt16=function(c$a){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,c$a,this._xd_),this._pos_+=2},c$a.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},c$a.writeUint8=function(c$a){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,c$a),this._pos_++},c$a._getUInt8=function(c$a){return this._d_.getUint8(c$a)},c$a._getUint16=function(c$a){return this._d_.getUint16(c$a,this._xd_)},c$a._getMatrix=function(){return new c$G(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},c$a.rUTF=function(c$a){for(var c$b=[],c$c=this._pos_+c$a,c$d=0,c$g=0,c$h=0,c$i=String.fromCharCode,c$j=this._u8d_;this._pos_<c$c;)(c$d=c$j[this._pos_++])<128?0!=c$d&&c$b.push(c$i(c$d)):c$d<224?c$b.push(c$i((63&c$d)<<6|127&c$j[this._pos_++])):c$d<240?(c$g=c$j[this._pos_++],c$b.push(c$i((31&c$d)<<12|(127&c$g)<<6|127&c$j[this._pos_++]))):(c$g=c$j[this._pos_++],c$h=c$j[this._pos_++],c$b.push(c$i((15&c$d)<<18|(127&c$g)<<12|c$h<<6&127|127&c$j[this._pos_++]))),0;return c$b.join("")},c$a.getCustomString=function(c$a){for(var c$b=[],c$c=0,c$d=0,c$g=0,c$h=String.fromCharCode,c$i=this._u8d_;0<c$a;)if((c$d=c$i[this._pos_])<128)c$b.push(c$h(c$d)),this._pos_++,c$a--;else for(c$c=c$d-128,this._pos_++,c$a-=c$c;0<c$c;)c$d=c$i[this._pos_++],c$g=c$i[this._pos_++],c$b.push(c$h(c$g<<8|c$d)),c$c--;return c$b.join("")},c$a.clear=function(){this._pos_=0,this.length=0},c$a.__getBuffer=function(){return this._d_.buffer},c$a.writeUTFBytes=function(c$a){for(var c$b=0,c$c=(c$a+="").length;c$b<c$c;c$b++){var c$d=c$a.charCodeAt(c$b);c$d<=127?this.writeByte(c$d):c$d<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|c$d>>6,128|63&c$d],this._pos_),this._pos_+=2):c$d<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|c$d>>12,128|c$d>>6&63,128|63&c$d],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|c$d>>18,128|c$d>>12&63,128|c$d>>6&63,128|63&c$d],this._pos_),this._pos_+=4)}},c$a.writeUTFString=function(c$a){var c$b=this.pos;this.writeUint16(1),this.writeUTFBytes(c$a);var c$c=this.pos-c$b-2;if(65536<=c$c)throw"writeUTFString byte len more than 65536";this._d_.setUint16(c$b,c$c,this._xd_)},c$a.readUTFString=function(){return this.readUTFBytes(this.getUint16())},c$a.getUTFString=function(){return this.readUTFString()},c$a.readUTFBytes=function(c$a){if(void 0===c$a&&(c$a=-1),0==c$a)return"";var c$b=this.bytesAvailable;if(c$b<c$a)throw"readUTFBytes error - Out of bounds";return c$a=0<c$a?c$a:c$b,this.rUTF(c$a)},c$a.getUTFBytes=function(c$a){return void 0===c$a&&(c$a=-1),this.readUTFBytes(c$a)},c$a.writeByte=function(c$a){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,c$a),this._pos_+=1},c$a.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},c$a.getByte=function(){return this.readByte()},c$a.ensureWrite=function(c$a){this._length<c$a&&(this._length=c$a),this._allocated_<c$a&&(this.length=c$a)},c$a.writeArrayBuffer=function(c$a,c$b,c$c){if(void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0),c$b<0||c$c<0)throw"writeArrayBuffer error - Out of bounds";0==c$c&&(c$c=c$a.byteLength-c$b),this.ensureWrite(this._pos_+c$c);var c$d=new Uint8Array(c$a);this._u8d_.set(c$d.subarray(c$b,c$b+c$c),this._pos_),this._pos_+=c$c},c$q(0,c$a,"buffer",function(){var c$a=this._d_.buffer;return c$a.byteLength==this.length?c$a:c$a.slice(0,this.length)}),c$q(0,c$a,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(c$a){this._xd_="littleEndian"==c$a}),c$q(0,c$a,"length",function(){return this._length},function(c$a){this._allocated_<c$a?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(c$a,2*this._allocated_))):this._allocated_>c$a&&this.___resizeBuffer(this._allocated_=c$a),this._length=c$a}),c$q(0,c$a,"pos",function(){return this._pos_},function(c$a){this._pos_=c$a}),c$q(0,c$a,"bytesAvailable",function(){return this._length-this._pos_}),c$b.getSystemEndian=function(){if(!c$b._sysEndian){var c$a=new ArrayBuffer(2);new DataView(c$a).setInt16(0,256,!0),c$b._sysEndian=256===new Int16Array(c$a)[0]?"littleEndian":"bigEndian"}return c$b._sysEndian},c$b.BIG_ENDIAN="bigEndian",c$b.LITTLE_ENDIAN="littleEndian",c$b._sysEndian=null,c$b}(),c$Q=function(){function c$g(){}return c$m(c$g,"laya.utils.CacheManager"),c$g.regCacheByFunction=function(c$a,c$b){var c$c;c$g.unRegCacheByFunction(c$a,c$b),c$c={tryDispose:c$a,getCacheList:c$b},c$g._cacheList.push(c$c)},c$g.unRegCacheByFunction=function(c$a,c$b){var c$c,c$d=0;for(c$c=c$g._cacheList.length,c$d=0;c$d<c$c;c$d++)if(c$g._cacheList[c$d].tryDispose==c$a&&c$g._cacheList[c$d].getCacheList==c$b)return void c$g._cacheList.splice(c$d,1)},c$g.forceDispose=function(){var c$a=0,c$b=c$g._cacheList.length;for(c$a=0;c$a<c$b;c$a++)c$g._cacheList[c$a].tryDispose(!0)},c$g.beginCheck=function(c$a){void 0===c$a&&(c$a=15e3),c$z.timer.loop(c$a,null,c$g._checkLoop)},c$g.stopCheck=function(){c$z.timer.clear(null,c$g._checkLoop)},c$g._checkLoop=function(){var c$a=c$g._cacheList;if(!(c$a.length<1)){var c$b,c$c=c$O.now(),c$d=0;for(c$b=c$d=c$a.length;0<c$d&&(c$a[c$g._index=++c$g._index%c$b].tryDispose(!1),!(c$O.now()-c$c>c$g.loopTimeLimit));)c$d--}},c$g.loopTimeLimit=2,c$g._cacheList=[],c$g._index=0,c$g}(),c$R=function(){function c$p(){}return c$m(c$p,"laya.utils.ClassUtils"),c$p.regClass=function(c$a,c$b){c$p._classMap[c$a]=c$b},c$p.getRegClass=function(c$a){return c$p._classMap[c$a]},c$p.getInstance=function(c$a){var c$b=c$p.getClass(c$a);return c$b?new c$b:(console.warn("[error] Undefined class:",c$a),null)},c$p.createByJson=function(c$a,c$b,c$c,c$d,c$g){"string"==typeof c$a&&(c$a=JSON.parse(c$a));var c$h=c$a.props;if(!c$b&&!(c$b=c$g?c$g.runWith(c$a):c$p.getInstance(c$h.runtime||c$a.type)))return null;var c$i=c$a.child;if(c$i)for(var c$j=0,c$k=c$i.length;c$j<c$k;c$j++){var c$l=c$i[c$j];if("render"!==c$l.props.name&&"render"!==c$l.props.renderType||!c$b._$set_itemRender)if("Graphic"==c$l.type)c$p.addGraphicsToSprite(c$l,c$b);else if(c$p.isDrawType(c$l.type))c$p.addGraphicToSprite(c$l,c$b,!0);else{var c$m=c$p.createByJson(c$l,null,c$c,c$d,c$g);"Script"==c$l.type?c$m.hasOwnProperty("owner")?c$m.owner=c$b:c$m.hasOwnProperty("target")&&(c$m.target=c$b):"mask"==c$l.props.renderType?c$b.mask=c$m:c$b.addChild(c$m)}else c$b.itemRender=c$l}if(c$h)for(var c$n in c$h){var c$o=c$h[c$n];"var"===c$n&&c$c?c$c[c$o]=c$b:c$o instanceof Array&&"function"==typeof c$b[c$n]?c$b[c$n].apply(c$b,c$o):c$b[c$n]=c$o}return c$d&&c$a.customProps&&c$d.runWith([c$b,c$a]),c$b.created&&c$b.created(),c$b},c$p.addGraphicsToSprite=function(c$a,c$b){var c$c;if((c$c=c$a.child)&&!(c$c.length<1)){var c$d;c$d=c$p._getGraphicsFromSprite(c$a,c$b);var c$g=0,c$h=0;c$a.props&&(c$g=c$p._getObjVar(c$a.props,"x",0),c$h=c$p._getObjVar(c$a.props,"y",0)),0!=c$g&&0!=c$h&&c$d.translate(c$g,c$h);var c$i,c$j=0;for(c$i=c$c.length,c$j=0;c$j<c$i;c$j++)c$p._addGraphicToGraphics(c$c[c$j],c$d);0!=c$g&&0!=c$h&&c$d.translate(-c$g,-c$h)}},c$p.addGraphicToSprite=function(c$a,c$b,c$c){var c$d;void 0===c$c&&(c$c=!1),c$d=c$c?c$p._getGraphicsFromSprite(c$a,c$b):c$b.graphics,c$p._addGraphicToGraphics(c$a,c$d)},c$p._getGraphicsFromSprite=function(c$a,c$b){var c$c,c$d;if(!c$a||!c$a.props)return c$b.graphics;switch(c$d=c$a.props.renderType){case"hit":case"unHit":var c$g;c$b.hitArea||(c$b.hitArea=new c$V),(c$g=c$b.hitArea)[c$d]||(c$g[c$d]=new c$o),c$c=c$g[c$d]}return c$c||(c$c=c$b.graphics),c$c},c$p._getTransformData=function(c$a){var c$b;(c$a.hasOwnProperty("pivotX")||c$a.hasOwnProperty("pivotY"))&&(c$b=c$b||new c$G).translate(-c$p._getObjVar(c$a,"pivotX",0),-c$p._getObjVar(c$a,"pivotY",0));var c$c=c$p._getObjVar(c$a,"scaleX",1),c$d=c$p._getObjVar(c$a,"scaleY",1),c$g=c$p._getObjVar(c$a,"rotation",0);c$p._getObjVar(c$a,"skewX",0),c$p._getObjVar(c$a,"skewY",0);return 1==c$c&&1==c$d&&0==c$g||((c$b=c$b||new c$G).scale(c$c,c$d),c$b.rotate(.0174532922222222*c$g)),c$b},c$p._addGraphicToGraphics=function(c$a,c$b){var c$c,c$d;if((c$c=c$a.props)&&(c$d=c$p.DrawTypeDic[c$a.type])){var c$g,c$h;c$g=c$b;var c$i=c$p._getParams(c$c,c$d[1],c$d[2],c$d[3]);((c$h=c$p._tM)||1!=c$p._alpha)&&(c$g.save(),c$h&&c$g.transform(c$h),1!=c$p._alpha&&c$g.alpha(c$p._alpha)),c$g[c$d[0]].apply(c$g,c$i),(c$h||1!=c$p._alpha)&&c$g.restore()}},c$p._adptLineData=function(c$a){return c$a[2]=parseFloat(c$a[0])+parseFloat(c$a[2]),c$a[3]=parseFloat(c$a[1])+parseFloat(c$a[3]),c$a},c$p._adptTextureData=function(c$a){return c$a[0]=c$ja.getRes(c$a[0]),c$a},c$p._adptLinesData=function(c$a){return c$a[2]=c$p._getPointListByStr(c$a[2]),c$a},c$p.isDrawType=function(c$a){return"Image"!=c$a&&c$p.DrawTypeDic.hasOwnProperty(c$a)},c$p._getParams=function(c$a,c$b,c$c,c$d){var c$g;void 0===c$c&&(c$c=0),(c$g=c$p._temParam).length=c$b.length;var c$h,c$i,c$j=0;for(c$h=c$b.length,c$j=0;c$j<c$h;c$j++)c$g[c$j]=c$p._getObjVar(c$a,c$b[c$j][0],c$b[c$j][1]);return c$p._alpha=c$p._getObjVar(c$a,"alpha",1),c$i=c$p._getTransformData(c$a),c$p._tM=c$i?(c$c||(c$c=0),c$i.translate(c$g[c$c],c$g[c$c+1]),c$g[c$c]=c$g[c$c+1]=0,c$i):null,c$d&&c$p[c$d]&&(c$g=c$p[c$d](c$g)),c$g},c$p._getPointListByStr=function(c$a){var c$b,c$c,c$d=0;for(c$c=(c$b=c$a.split(",")).length,c$d=0;c$d<c$c;c$d++)c$b[c$d]=parseFloat(c$b[c$d]);return c$b},c$p._getObjVar=function(c$a,c$b,c$c){return c$a.hasOwnProperty(c$b)?c$a[c$b]:c$c},c$p._temParam=[],c$p._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},c$p.getClass=function(c$a){var c$b=c$p._classMap[c$a]||c$a;return"string"==typeof c$b?c$z.__classmap[c$b]:c$b},c$p._tM=null,c$p._alpha=NaN,c$k(c$p,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),c$p}(),c$S=function(){function c$h(c$a){if(this._color=[],"string"==typeof c$a){null===(this.strColor=c$a)&&(c$a="#000000"),"#"==c$a.charAt(0)&&(c$a=c$a.substr(1));var c$b=c$a.length;if(3==c$b||4==c$b){for(var c$c="",c$d=0;c$d<c$b;c$d++)c$c+=c$a[c$d]+c$a[c$d];c$a=c$c}var c$g=this.numColor=parseInt(c$a,16);if(8==c$a.length)return void(this._color=[parseInt(c$a.substr(0,2),16)/255,((16711680&c$g)>>16)/255,((65280&c$g)>>8)/255,(255&c$g)/255])}else c$g=this.numColor=c$a,this.strColor=c$$.toHexColor(c$g);this._color=[((16711680&c$g)>>16)/255,((65280&c$g)>>8)/255,(255&c$g)/255,1],this._color.__id=++c$h._COLODID}return c$m(c$h,"laya.utils.Color"),c$h._initDefault=function(){for(var c$a in c$h._DEFAULT={},c$h._COLOR_MAP)c$h._SAVE[c$a]=c$h._DEFAULT[c$a]=new c$h(c$h._COLOR_MAP[c$a]);return c$h._DEFAULT},c$h._initSaveMap=function(){for(var c$a in c$h._SAVE_SIZE=0,c$h._SAVE={},c$h._DEFAULT)c$h._SAVE[c$a]=c$h._DEFAULT[c$a]},c$h.create=function(c$a){var c$b=c$h._SAVE[c$a+""];return null!=c$b?c$b:(c$h._SAVE_SIZE<1e3||c$h._initSaveMap(),c$h._SAVE[c$a+""]=new c$h(c$a))},c$h._SAVE={},c$h._SAVE_SIZE=0,c$h._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},c$h._DEFAULT=c$h._initDefault(),c$h._COLODID=1,c$h}(),c$T=(function(){function c$a(){this._values=[],this._keys=[]}c$m(c$a,"laya.utils.Dictionary");var c$b=c$a.prototype;c$b.set=function(c$a,c$b){var c$c=this.indexOf(c$a);0<=c$c?this._values[c$c]=c$b:(this._keys.push(c$a),this._values.push(c$b))},c$b.indexOf=function(c$a){var c$b=this._keys.indexOf(c$a);return 0<=c$b?c$b:(c$a="string"==typeof c$a?Number(c$a):"number"==typeof c$a?c$a.toString():c$a,this._keys.indexOf(c$a))},c$b.get=function(c$a){var c$b=this.indexOf(c$a);return c$b<0?null:this._values[c$b]},c$b.remove=function(c$a){var c$b=this.indexOf(c$a);return 0<=c$b&&(this._keys.splice(c$b,1),this._values.splice(c$b,1),!0)},c$b.clear=function(){this._values.length=0,this._keys.length=0},c$q(0,c$b,"values",function(){return this._values}),c$q(0,c$b,"keys",function(){return this._keys})}(),function(){function c$a(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}c$m(c$a,"laya.utils.Dragging");var c$b=c$a.prototype;return c$b.start=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){void 0===c$j&&(c$j=.92),this.clearTimer(),this.target=c$a,this.area=c$b,this.hasInertia=c$c,this.elasticDistance=c$b?c$d:0,this.elasticBackTime=c$g,this.data=c$h,this._disableMouseEvent=c$i,this.ratio=c$j,1!=c$a.globalScaleX||1!=c$a.globalScaleY?this._parent=c$a.parent:this._parent=c$z.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,c$z.stage.on("mouseup",this,this.onStageMouseUp),c$z.stage.on("mouseout",this,this.onStageMouseUp),c$z.timer.frameLoop(1,this,this.loop)},c$b.clearTimer=function(){c$z.timer.clear(this,this.loop),c$z.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},c$b.stop=function(){this._dragging&&(c$r.instance.disableMouseEvent=!1,c$z.stage.off("mouseup",this,this.onStageMouseUp),c$z.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},c$b.loop=function(){var c$a=this._parent.getMousePoint(),c$b=c$a.x,c$c=c$a.y,c$d=c$b-this._lastX,c$g=c$c-this._lastY;if(this._clickOnly){if(!(1<Math.abs(c$d*c$z.stage._canvasTransform.getScaleX())||1<Math.abs(c$g*c$z.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),c$r.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(c$d,c$g);0==c$d&&0==c$g||(this._lastX=c$b,this._lastY=c$c,this.target.x+=c$d*this._elasticRateX,this.target.y+=c$g*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},c$b.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var c$a=this.area.x-this.target.x;else c$a=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-c$a/this.elasticDistance),this.target.y<this.area.y)var c$b=this.area.y-this.target.y;else c$b=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-c$b/this.elasticDistance)}},c$b.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},c$b.onStageMouseUp=function(c$a){if(c$r.instance.disableMouseEvent=!1,c$z.stage.off("mouseup",this,this.onStageMouseUp),c$z.stage.off("mouseout",this,this.onStageMouseUp),c$z.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var c$b=this._offsets.length,c$c=Math.min(c$b,6),c$d=this._offsets.length-c$c,c$g=c$b-1;c$d<c$g;c$g--)this._offsetY+=this._offsets[c$g--],this._offsetX+=this._offsets[c$g];this._offsetX=this._offsetX/c$c*2,this._offsetY=this._offsetY/c$c*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),c$z.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},c$b.checkElastic=function(){var c$a=NaN,c$b=NaN;if(this.target.x<this.area.x?c$a=this.area.x:this.target.x>this.area.x+this.area.width&&(c$a=this.area.x+this.area.width),this.target.y<this.area.y?c$b=this.area.y:this.target.y>this.area.y+this.area.height&&(c$b=this.area.y+this.area.height),isNaN(c$a)&&isNaN(c$b))this.clear();else{var c$c={};isNaN(c$a)||(c$c.x=c$a),isNaN(c$b)||(c$c.y=c$b),this._tween=c$Z.to(this.target,c$c,this.elasticBackTime,c$U.sineOut,c$u.create(this,this.clear),0,!1,!1)}},c$b.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(c$z.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},c$b.clear=function(){if(this.target){this.clearTimer();var c$a=this.target;this.target=null,this._parent=null,c$a.event("dragend",this.data)}},c$a}()),c$U=function(){function c$j(){}return c$m(c$j,"laya.utils.Ease"),c$j.linearNone=function(c$a,c$b,c$c,c$d){return c$c*c$a/c$d+c$b},c$j.linearIn=function(c$a,c$b,c$c,c$d){return c$c*c$a/c$d+c$b},c$j.linearInOut=function(c$a,c$b,c$c,c$d){return c$c*c$a/c$d+c$b},c$j.linearOut=function(c$a,c$b,c$c,c$d){return c$c*c$a/c$d+c$b},c$j.bounceIn=function(c$a,c$b,c$c,c$d){return c$c-c$j.bounceOut(c$d-c$a,0,c$c,c$d)+c$b},c$j.bounceInOut=function(c$a,c$b,c$c,c$d){return c$a<.5*c$d?.5*c$j.bounceIn(2*c$a,0,c$c,c$d)+c$b:.5*c$j.bounceOut(2*c$a-c$d,0,c$c,c$d)+.5*c$c+c$b},c$j.bounceOut=function(c$a,c$b,c$c,c$d){return(c$a/=c$d)<1/2.75?c$c*(7.5625*c$a*c$a)+c$b:c$a<2/2.75?c$c*(7.5625*(c$a-=1.5/2.75)*c$a+.75)+c$b:c$a<2.5/2.75?c$c*(7.5625*(c$a-=2.25/2.75)*c$a+.9375)+c$b:c$c*(7.5625*(c$a-=2.625/2.75)*c$a+.984375)+c$b},c$j.backIn=function(c$a,c$b,c$c,c$d,c$g){return void 0===c$g&&(c$g=1.70158),c$c*(c$a/=c$d)*c$a*((c$g+1)*c$a-c$g)+c$b},c$j.backInOut=function(c$a,c$b,c$c,c$d,c$g){return void 0===c$g&&(c$g=1.70158),(c$a/=.5*c$d)<1?.5*c$c*(c$a*c$a*((1+(c$g*=1.525))*c$a-c$g))+c$b:c$c/2*((c$a-=2)*c$a*((1+(c$g*=1.525))*c$a+c$g)+2)+c$b},c$j.backOut=function(c$a,c$b,c$c,c$d,c$g){return void 0===c$g&&(c$g=1.70158),c$c*((c$a=c$a/c$d-1)*c$a*((c$g+1)*c$a+c$g)+1)+c$b},c$j.elasticIn=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i;return void 0===c$g&&(c$g=0),void 0===c$h&&(c$h=0),0==c$a?c$b:1==(c$a/=c$d)?c$b+c$c:(c$h||(c$h=.3*c$d),c$i=!c$g||0<c$c&&c$g<c$c||c$c<0&&c$g<-c$c?(c$g=c$c,c$h/4):c$h/c$j.PI2*Math.asin(c$c/c$g),-c$g*Math.pow(2,10*(c$a-=1))*Math.sin((c$a*c$d-c$i)*c$j.PI2/c$h)+c$b)},c$j.elasticInOut=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i;return void 0===c$g&&(c$g=0),void 0===c$h&&(c$h=0),0==c$a?c$b:2==(c$a/=.5*c$d)?c$b+c$c:(c$h||(c$h=c$d*(.3*1.5)),c$i=!c$g||0<c$c&&c$g<c$c||c$c<0&&c$g<-c$c?(c$g=c$c,c$h/4):c$h/c$j.PI2*Math.asin(c$c/c$g),c$a<1?c$g*Math.pow(2,10*(c$a-=1))*Math.sin((c$a*c$d-c$i)*c$j.PI2/c$h)*-.5+c$b:c$g*Math.pow(2,-10*(c$a-=1))*Math.sin((c$a*c$d-c$i)*c$j.PI2/c$h)*.5+c$c+c$b)},c$j.elasticOut=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i;return void 0===c$g&&(c$g=0),void 0===c$h&&(c$h=0),0==c$a?c$b:1==(c$a/=c$d)?c$b+c$c:(c$h||(c$h=.3*c$d),c$i=!c$g||0<c$c&&c$g<c$c||c$c<0&&c$g<-c$c?(c$g=c$c,c$h/4):c$h/c$j.PI2*Math.asin(c$c/c$g),c$g*Math.pow(2,-10*c$a)*Math.sin((c$a*c$d-c$i)*c$j.PI2/c$h)+c$c+c$b)},c$j.strongIn=function(c$a,c$b,c$c,c$d){return c$c*(c$a/=c$d)*c$a*c$a*c$a*c$a+c$b},c$j.strongInOut=function(c$a,c$b,c$c,c$d){return(c$a/=.5*c$d)<1?.5*c$c*c$a*c$a*c$a*c$a*c$a+c$b:.5*c$c*((c$a-=2)*c$a*c$a*c$a*c$a+2)+c$b},c$j.strongOut=function(c$a,c$b,c$c,c$d){return c$c*((c$a=c$a/c$d-1)*c$a*c$a*c$a*c$a+1)+c$b},c$j.sineInOut=function(c$a,c$b,c$c,c$d){return.5*-c$c*(Math.cos(Math.PI*c$a/c$d)-1)+c$b},c$j.sineIn=function(c$a,c$b,c$c,c$d){return-c$c*Math.cos(c$a/c$d*c$j.HALF_PI)+c$c+c$b},c$j.sineOut=function(c$a,c$b,c$c,c$d){return c$c*Math.sin(c$a/c$d*c$j.HALF_PI)+c$b},c$j.quintIn=function(c$a,c$b,c$c,c$d){return c$c*(c$a/=c$d)*c$a*c$a*c$a*c$a+c$b},c$j.quintInOut=function(c$a,c$b,c$c,c$d){return(c$a/=.5*c$d)<1?.5*c$c*c$a*c$a*c$a*c$a*c$a+c$b:.5*c$c*((c$a-=2)*c$a*c$a*c$a*c$a+2)+c$b},c$j.quintOut=function(c$a,c$b,c$c,c$d){return c$c*((c$a=c$a/c$d-1)*c$a*c$a*c$a*c$a+1)+c$b},c$j.quartIn=function(c$a,c$b,c$c,c$d){return c$c*(c$a/=c$d)*c$a*c$a*c$a+c$b},c$j.quartInOut=function(c$a,c$b,c$c,c$d){return(c$a/=.5*c$d)<1?.5*c$c*c$a*c$a*c$a*c$a+c$b:.5*-c$c*((c$a-=2)*c$a*c$a*c$a-2)+c$b},c$j.quartOut=function(c$a,c$b,c$c,c$d){return-c$c*((c$a=c$a/c$d-1)*c$a*c$a*c$a-1)+c$b},c$j.cubicIn=function(c$a,c$b,c$c,c$d){return c$c*(c$a/=c$d)*c$a*c$a+c$b},c$j.cubicInOut=function(c$a,c$b,c$c,c$d){return(c$a/=.5*c$d)<1?.5*c$c*c$a*c$a*c$a+c$b:.5*c$c*((c$a-=2)*c$a*c$a+2)+c$b},c$j.cubicOut=function(c$a,c$b,c$c,c$d){return c$c*((c$a=c$a/c$d-1)*c$a*c$a+1)+c$b},c$j.quadIn=function(c$a,c$b,c$c,c$d){return c$c*(c$a/=c$d)*c$a+c$b},c$j.quadInOut=function(c$a,c$b,c$c,c$d){return(c$a/=.5*c$d)<1?.5*c$c*c$a*c$a+c$b:.5*-c$c*(--c$a*(c$a-2)-1)+c$b},c$j.quadOut=function(c$a,c$b,c$c,c$d){return-c$c*(c$a/=c$d)*(c$a-2)+c$b},c$j.expoIn=function(c$a,c$b,c$c,c$d){return 0==c$a?c$b:c$c*Math.pow(2,10*(c$a/c$d-1))+c$b-.001*c$c},c$j.expoInOut=function(c$a,c$b,c$c,c$d){return 0==c$a?c$b:c$a==c$d?c$b+c$c:(c$a/=.5*c$d)<1?.5*c$c*Math.pow(2,10*(c$a-1))+c$b:.5*c$c*(2-Math.pow(2,-10*--c$a))+c$b},c$j.expoOut=function(c$a,c$b,c$c,c$d){return c$a==c$d?c$b+c$c:c$c*(1-Math.pow(2,-10*c$a/c$d))+c$b},c$j.circIn=function(c$a,c$b,c$c,c$d){return-c$c*(Math.sqrt(1-(c$a/=c$d)*c$a)-1)+c$b},c$j.circInOut=function(c$a,c$b,c$c,c$d){return(c$a/=.5*c$d)<1?.5*-c$c*(Math.sqrt(1-c$a*c$a)-1)+c$b:.5*c$c*(Math.sqrt(1-(c$a-=2)*c$a)+1)+c$b},c$j.circOut=function(c$a,c$b,c$c,c$d){return c$c*Math.sqrt(1-(c$a=c$a/c$d-1)*c$a)+c$b},c$j.HALF_PI=.5*Math.PI,c$j.PI2=2*Math.PI,c$j}(),c$V=function(){function c$n(){this._hit=null,this._unHit=null}c$m(c$n,"laya.utils.HitArea");var c$a=c$n.prototype;return c$a.isHit=function(c$a,c$b){return!!c$n.isHitGraphic(c$a,c$b,this.hit)&&!c$n.isHitGraphic(c$a,c$b,this.unHit)},c$a.contains=function(c$a,c$b){return this.isHit(c$a,c$b)},c$q(0,c$a,"hit",function(){return this._hit||(this._hit=new c$o),this._hit},function(c$a){this._hit=c$a}),c$q(0,c$a,"unHit",function(){return this._unHit||(this._unHit=new c$o),this._unHit},function(c$a){this._unHit=c$a}),c$n.isHitGraphic=function(c$a,c$b,c$c){if(!c$c)return!1;var c$d;if(!(c$d=c$c.cmds)&&c$c._one&&((c$d=c$n._cmds).length=1,c$d[0]=c$c._one),!c$d)return!1;var c$g,c$h,c$i=0;for(c$g=c$d.length,c$i=0;c$i<c$g;c$i++)if(c$h=c$d[c$i]){var c$j=c$J._context;switch(c$h.callee){case c$j._translate:case 6:c$a-=c$h[0],c$b-=c$h[1]}if(c$n.isHitCmd(c$a,c$b,c$h))return!0}return!1},c$n.isHitCmd=function(c$a,c$b,c$c){if(!c$c)return!1;var c$d=c$J._context,c$g=!1;switch(c$c.callee){case c$d._drawRect:case 13:c$n._rec.setTo(c$c[0],c$c[1],c$c[2],c$c[3]),c$g=c$n._rec.contains(c$a,c$b);break;case c$d._drawCircle:case c$d._fillCircle:case 14:c$g=(c$a-=c$c[0])*c$a+(c$b-=c$c[1])*c$b<c$c[2]*c$c[2];break;case c$d._drawPoly:case 18:c$a-=c$c[0],c$b-=c$c[1],c$g=c$n.ptInPolygon(c$a,c$b,c$c[2])}return c$g},c$n.ptInPolygon=function(c$a,c$b,c$c){var c$d;(c$d=c$n._ptPoint).setTo(c$a,c$b);var c$g,c$h=0,c$i=NaN,c$j=NaN,c$k=NaN,c$l=NaN;c$g=c$c.length;for(var c$m=0;c$m<c$g;c$m+=2){if(c$i=c$c[c$m],c$j=c$c[c$m+1],c$k=c$c[(c$m+2)%c$g],c$j!=(c$l=c$c[(c$m+3)%c$g]))if(!(c$d.y<Math.min(c$j,c$l)))if(!(c$d.y>=Math.max(c$j,c$l)))(c$d.y-c$j)*(c$k-c$i)/(c$l-c$j)+c$i>c$d.x&&c$h++}return c$h%2==1},c$n._cmds=[],c$k(c$n,["_rec",function(){return this._rec=new c$B},"_ptPoint",function(){return this._ptPoint=new c$A}]),c$n}(),c$W=(function(){function c$g(c$a,c$b,c$c,c$d){this.char=c$a,this.charNum=c$a.charCodeAt(0),this._x=this._y=0,this.width=c$b,this.height=c$c,this.style=c$d,this.isWord=!c$g._isWordRegExp.test(c$a)}c$m(c$g,"laya.utils.HTMLChar");var c$a=c$g.prototype;c$z.imps(c$a,{"laya.display.ILayout":!0}),c$a.setSprite=function(c$a){this._sprite=c$a},c$a.getSprite=function(){return this._sprite},c$a._isChar=function(){return!0},c$a._getCSSStyle=function(){return this.style},c$q(0,c$a,"width",function(){return this._w},function(c$a){this._w=c$a}),c$q(0,c$a,"x",function(){return this._x},function(c$a){this._sprite&&(this._sprite.x=c$a),this._x=c$a}),c$q(0,c$a,"y",function(){return this._y},function(c$a){this._sprite&&(this._sprite.y=c$a),this._y=c$a}),c$q(0,c$a,"height",function(){return this._h},function(c$a){this._h=c$a}),c$g._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function c$b(){}c$m(c$b,"laya.utils.Log"),c$b.enable=function(){c$b._logdiv||(c$b._logdiv=c$O.window.document.createElement("div"),c$O.window.document.body.appendChild(c$b._logdiv),c$b._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},c$b.toggle=function(){var c$a=c$b._logdiv.style;"1px"==c$a.width?c$a.width=c$a.height="50%":c$a.width=c$a.height="1px"},c$b.print=function(c$a){c$b._logdiv&&(c$b.maxCount<=c$b._count&&c$b.clear(),c$b._count++,c$b._logdiv.innerText+=c$a+"\n",c$b._logdiv.scrollTop=c$b._logdiv.scrollHeight)},c$b.clear=function(){c$b._logdiv.innerText="",c$b._count=0},c$b._logdiv=null,c$b._count=0,c$b.maxCount=20}(),function(){function c$b(){}c$m(c$b,"laya.utils.Mouse"),c$q(1,c$b,"cursor",function(){return c$b._style.cursor},function(c$a){c$b._style.cursor=c$a}),c$b.hide=function(){"none"!=c$b.cursor&&(c$b._preCursor=c$b.cursor,c$b.cursor="none")},c$b.show=function(){"none"==c$b.cursor&&(c$b.cursor=c$b._preCursor?c$b._preCursor:"auto")},c$b._preCursor=null,c$k(c$b,["_style",function(){return this._style=c$O.document.body.style}])}(),function(){function c$h(){}return c$m(c$h,"laya.utils.Pool"),c$h.getPoolBySign=function(c$a){return c$h._poolDic[c$a]||(c$h._poolDic[c$a]=[])},c$h.clearBySign=function(c$a){c$h._poolDic[c$a]&&(c$h._poolDic[c$a].length=0)},c$h.recover=function(c$a,c$b){c$b.__InPool||(c$b.__InPool=!0,c$h.getPoolBySign(c$a).push(c$b))},c$h.getItemByClass=function(c$a,c$b){var c$c=c$h.getPoolBySign(c$a),c$d=c$c.length?c$c.pop():new c$b;return c$d.__InPool=!1,c$d},c$h.getItemByCreateFun=function(c$a,c$b,c$c){var c$d=c$h.getPoolBySign(c$a),c$g=c$d.length?c$d.pop():c$b.call(c$c);return c$g.__InPool=!1,c$g},c$h.getItem=function(c$a){var c$b=c$h.getPoolBySign(c$a),c$c=c$b.length?c$b.pop():null;return c$c&&(c$c.__InPool=!1),c$c},c$h._poolDic={},c$h.InPoolSign="__InPool",c$h}()),c$X=function(){function c$k(){}return c$m(c$k,"laya.utils.Stat"),c$q(1,c$k,"onclick",null,function(c$a){c$k._sp&&c$k._sp.on("click",c$k._sp,c$a),c$k._canvas&&(c$k._canvas.source.onclick=c$a,c$k._canvas.source.style.pointerEvents="")}),c$k.show=function(c$a,c$b,c$c){if(void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0),!c$J.isConchApp||c$J.isConchWebGL){if(c$J.isConchWebGL||c$O.onMiniGame||c$O.onLimixiu||(c$k._useCanvas=!0),c$k._show=!0,c$k._fpsData.length=60,c$k._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},c$k._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},c$k._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},c$k._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},c$J.isWebGL)if(c$k._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},c$J.is3DMode){if(c$k._view[0].title="FPS(3D)",c$k._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},c$k._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},c$k._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==c$c){var c$d=8;c$k._view[c$d++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},c$k._view[c$d++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},c$k._view[c$d++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},c$k._view[c$d++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},c$k._view[c$d++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},c$k._view[c$d++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},c$k._view[c$d++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},c$k._view[c$d++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},c$k._view[c$d++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==c$c){c$d=8;c$k._view[c$d++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},c$k._view[c$d++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},c$k._view[c$d++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},c$k._view[c$d++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},c$k._view[c$d++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},c$k._view[c$d++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},c$k._view[c$d++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else c$k._view[0].title="FPS(WebGL)",c$k._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else c$k._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};c$k._useCanvas?c$k.createUIPre(c$a,c$b):c$k.createUI(c$a,c$b),c$k.enable()}else c$O.window.conch.showFPS&&c$O.window.conch.showFPS(c$a,c$b)},c$k.createUIPre=function(c$a,c$b){var c$c=c$O.pixelRatio;c$k._width=170*c$c,c$k._vx=75*c$c,c$k._height=c$c*(12*c$k._view.length+3*c$c)+4,c$k._fontSize=12*c$c;for(var c$d=0;c$d<c$k._view.length;c$d++)c$k._view[c$d].x=4,c$k._view[c$d].y=c$d*c$k._fontSize+2*c$c;c$k._canvas||((c$k._canvas=new c$va("2D")).size(c$k._width,c$k._height),(c$k._ctx=c$k._canvas.getContext("2d")).textBaseline="top",c$k._ctx.font=c$k._fontSize+"px Sans-serif",c$k._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+c$a+"px;top:"+c$b+"px;width:"+c$k._width/c$c+"px;height:"+c$k._height/c$c+"px;"),c$k._first=!0,c$k.loop(),c$k._first=!1,c$O.container.appendChild(c$k._canvas.source)},c$k.createUI=function(c$a,c$b){var c$c=c$k._sp,c$d=c$O.pixelRatio;c$c||(c$c=new c$na,(c$k._leftText=new c$sa).pos(5,5),c$k._leftText.color="#ffffff",c$c.addChild(c$k._leftText),(c$k._txt=new c$sa).pos(80*c$d,5),c$k._txt.color="#ffffff",c$c.addChild(c$k._txt),c$k._sp=c$c),c$c.pos(c$a,c$b);for(var c$g="",c$h=0;c$h<c$k._view.length;c$h++){c$g+=c$k._view[c$h].title+"\n"}c$k._leftText.text=c$g;var c$i=170*c$d,c$j=c$d*(12*c$k._view.length+3*c$d)+4;c$k._txt.fontSize=c$k._fontSize*c$d,c$k._leftText.fontSize=c$k._fontSize*c$d,c$c.size(c$i,c$j),c$c.graphics.clear(),c$c.graphics.setAlpha(.5),c$c.graphics.drawRect(0,0,c$i,c$j,"#999999"),c$c.graphics.setAlpha(1),c$k.loop()},c$k.enable=function(){c$z.timer.frameLoop(1,c$k,c$k.loop)},c$k.hide=function(){c$k._show=!1,c$z.timer.clear(c$k,c$k.loop),c$k._canvas&&c$O.removeElement(c$k._canvas.source)},c$k.clear=function(){c$k.trianglesFaces=c$k.drawCall=c$k.shaderCall=c$k.spriteCount=c$k.spriteRenderUseCacheCount=c$k.treeNodeCollision=c$k.treeSpriteCollision=c$k.canvasNormal=c$k.canvasBitmap=c$k.canvasReCache=0},c$k.loop=function(){c$k._count++;var c$a=c$O.now();if(!(c$a-c$k._timer<1e3)){var c$b=c$k._count;if(c$k.FPS=Math.round(1e3*c$b/(c$a-c$k._timer)),c$k._show){c$k.trianglesFaces=Math.round(c$k.trianglesFaces/c$b),c$k.spriteCount=c$k._useCanvas?(c$k.drawCall=Math.round(c$k.drawCall/c$b)-2,c$k.shaderCall=Math.round(c$k.shaderCall/c$b),Math.round(c$k.spriteCount/c$b)-1):(c$k.drawCall=Math.round(c$k.drawCall/c$b)-2,c$k.shaderCall=Math.round(c$k.shaderCall/c$b)-4,Math.round(c$k.spriteCount/c$b)-4),c$k.spriteRenderUseCacheCount=Math.round(c$k.spriteRenderUseCacheCount/c$b),c$k.canvasNormal=Math.round(c$k.canvasNormal/c$b),c$k.canvasBitmap=Math.round(c$k.canvasBitmap/c$b),c$k.canvasReCache=Math.ceil(c$k.canvasReCache/c$b),c$k.treeNodeCollision=Math.round(c$k.treeNodeCollision/c$b),c$k.treeSpriteCollision=Math.round(c$k.treeSpriteCollision/c$b);var c$c=0<c$k.FPS?Math.floor(1e3/c$k.FPS).toString():" ";c$k._fpsStr=c$k.FPS+(c$k.renderSlow?" slow":"")+" "+c$c,c$k._spriteStr=c$k.spriteCount+(c$k.spriteRenderUseCacheCount?"/"+c$k.spriteRenderUseCacheCount:""),c$k._canvasStr=c$k.canvasReCache+"/"+c$k.canvasNormal+"/"+c$k.canvasBitmap,c$k.currentMemorySize=c$N.systemResourceManager.memorySize,c$k._useCanvas?c$k.renderInfoPre():c$k.renderInfo(),c$k.clear()}c$k._count=0,c$k._timer=c$a}},c$k.renderInfoPre=function(){if(c$k._canvas){var c$a=c$k._ctx;c$a.clearRect(c$k._first?0:c$k._vx,0,c$k._width,c$k._height);for(var c$b=c$J.WebGL.mainContext,c$c=0;c$c<c$k._view.length;c$c++){var c$d=c$k._view[c$c];c$k._first&&(c$a.fillStyle="white",c$a.fillText(c$d.title,c$d.x,c$d.y,null,null,null)),c$a.fillStyle=c$d.color;var c$g=-1;if((c$d=c$k._view[c$c]).varying){if(c$b)switch(c$d.varying){case 1:c$g=c$b.getParameter(c$b[c$d.value]);break;case 2:c$g=c$b.getExtension(c$d.value)}}else c$g=c$k[c$d.value];"M"==c$d.units&&(c$g=Math.floor(c$g/1048576*100)/100+" M"),"K"==c$d.units&&(c$g=Math.floor(c$g/1024*100)/100+" K"),"string"==c$d.units&&(c$g=c$g.match(/\d+\.?\d/i)),c$a.fillText(c$g+"",c$d.x+c$k._vx,c$d.y,null,null,null)}}},c$k.renderInfo=function(){for(var c$a="",c$b=c$J.WebGL.mainContext,c$c=0;c$c<c$k._view.length;c$c++){var c$d=c$k._view[c$c],c$g=-1;if(c$d.varying){if(c$b)switch(c$d.varying){case 1:c$g=c$b.getParameter(c$b[c$d.value]);break;case 2:c$g=c$b.getExtension(c$d.value)}}else c$g=c$k[c$d.value];"M"==c$d.units&&(c$g=Math.floor(c$g/1048576*100)/100+" M"),"K"==c$d.units&&(c$g=Math.floor(c$g/1024*100)/100+" K"),"string"==c$d.units&&(c$g=c$g.match(/\d+\.?\d/i)),c$a+=c$g+"\n"}c$k._txt.text=c$a},c$k.FPS=0,c$k.loopCount=0,c$k.shaderCall=0,c$k.drawCall=0,c$k.trianglesFaces=0,c$k.spriteCount=0,c$k.spriteRenderUseCacheCount=0,c$k.treeNodeCollision=0,c$k.treeSpriteCollision=0,c$k.canvasNormal=0,c$k.canvasBitmap=0,c$k.canvasReCache=0,c$k.renderSlow=!1,c$k.currentMemorySize=0,c$k._fpsStr=null,c$k._canvasStr=null,c$k._spriteStr=null,c$k._fpsData=[],c$k._timer=0,c$k._count=0,c$k._view=[],c$k._fontSize=12,c$k._txt=null,c$k._leftText=null,c$k._sp=null,c$k._show=!1,c$k._useCanvas=!1,c$k._canvas=null,c$k._ctx=null,c$k._first=!1,c$k._vx=NaN,c$k._width=0,c$k._height=100,c$k}(),c$Y=(function(){function c$a(){this._strsToID={},this._idToStrs=[],this._length=0}c$m(c$a,"laya.utils.StringKey");var c$b=c$a.prototype;c$b.add=function(c$a){var c$b=this._strsToID[c$a];return null!=c$b?c$b:(this._idToStrs[this._length]=c$a,this._strsToID[c$a]=this._length++)},c$b.getID=function(c$a){var c$b=this._strsToID[c$a];return null==c$b?-1:c$b},c$b.getName=function(c$a){var c$b=this._idToStrs[c$a];return null==c$b?void 0:c$b}}(),function(){var c$l;function c$a(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}c$m(c$a,"laya.utils.Timer");var c$b=c$a.prototype;return c$b._init=function(){c$z.timer&&c$z.timer.frameLoop(1,this,this._update)},c$b._now=function(){return Date.now()},c$b._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var c$a=this.currFrame=this.currFrame+this.scale,c$b=this._now();this._delta=(c$b-this._lastTimer)*this.scale;var c$c=this.currTimer=this.currTimer+this._delta;c$z.isDebug&&6e4<Math.abs(c$b-this._lastTimer)&&console.error("系统时间错误！"+(c$b-this._lastTimer)),this._lastTimer=c$b;var c$d=this._handlers;for(c$i=this._count=0,c$j=c$d.length;c$i<c$j;c$i++)if(null!==(c$k=c$d[c$i]).method){var c$g=c$k.userFrame?c$a:c$c;if(c$g>=c$k.exeTime)if(c$k.repeat)if(c$k.jumpFrame)for(;c$g>=c$k.exeTime;)c$k.exeTime+=c$k.delay,c$k.run(!1);else c$k.exeTime+=c$k.delay,c$k.run(!1),c$g>c$k.exeTime&&(c$k.exeTime+=Math.ceil((c$g-c$k.exeTime)/c$k.delay)*c$k.delay);else c$k.run(!0)}else this._count++;(30<this._count||c$a%200==0)&&this._clearHandlers();for(var c$h=this._laters,c$i=0,c$j=c$h.length-1;c$i<=c$j;c$i++){var c$k=c$h[c$i];this._isIgnoreRecover(c$k)||(null!==c$k.method&&(delete this._map[c$k.key],c$k.run(!1)),this._recoverHandler(c$k)),c$i===c$j&&(c$j=c$h.length-1)}c$h.length=0}},c$b._clearHandlers=function(){for(var c$a=this._handlers,c$b=0,c$c=c$a.length;c$b<c$c;c$b++){var c$d=c$a[c$b];null!==c$d.method?this._temp.push(c$d):this._isIgnoreRecover(c$d)?this._temp.push(c$d):this._recoverHandler(c$d)}this._handlers=this._temp,this._temp=c$a,this._temp.length=0},c$b._recoverHandler=function(c$a){this._map[c$a.key]==c$a&&delete this._map[c$a.key],c$a.recover()},c$b._create=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){if(!c$c)return c$g.apply(c$d,c$h),null;if(c$i){var c$k=this._getHandler(c$d,c$g);if(c$k)return c$k.repeat=c$b,c$k.userFrame=c$a,c$k.delay=c$c,c$k.ignoreRecover=c$j,c$k.caller=c$d,c$k.method=c$g,c$k.args=c$h,c$k.exeTime=c$c+(c$a?this.currFrame:this.currTimer+this._now()-this._lastTimer),c$k}return(c$k=c$l.create()).repeat=c$b,c$k.userFrame=c$a,c$k.delay=c$c,c$k.ignoreRecover=c$j,c$k.caller=c$d,c$k.method=c$g,c$k.args=c$h,c$k.exeTime=c$c+(c$a?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(c$k),this._handlers.push(c$k),c$k},c$b._indexHandler=function(c$a){var c$b=c$a.caller,c$c=c$a.method,c$d=c$b?c$b.$_GID||(c$b.$_GID=c$$.getGID()):0,c$g=c$c.$_TID||(c$c.$_TID=this._mid++);c$a.key=c$d+"_"+c$g,this._map[c$a.key]=c$a},c$b.once=function(c$a,c$b,c$c,c$d,c$g){void 0===c$g&&(c$g=!0),this._create(!1,!1,c$a,c$b,c$c,c$d,c$g,!1)},c$b.loop=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){void 0===c$g&&(c$g=!0),void 0===c$h&&(c$h=!1),void 0===c$i&&(c$i=!1);var c$j=this._create(!1,!0,c$a,c$b,c$c,c$d,c$g,c$i);c$j&&(c$j.jumpFrame=c$h)},c$b.frameOnce=function(c$a,c$b,c$c,c$d,c$g){void 0===c$g&&(c$g=!0),this._create(!0,!1,c$a,c$b,c$c,c$d,c$g,!1)},c$b.frameLoop=function(c$a,c$b,c$c,c$d,c$g,c$h){void 0===c$g&&(c$g=!0),void 0===c$h&&(c$h=!1),this._create(!0,!0,c$a,c$b,c$c,c$d,c$g,c$h)},c$b.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+c$l._freeCount},c$b.clear=function(c$a,c$b){var c$c=this._getHandler(c$a,c$b);return!(!c$c||this._isIgnoreRecover(c$c))&&(delete this._map[c$c.key],c$c.key=null,c$c.clear(),!0)},c$b.clearAll=function(c$a){if(c$a)for(var c$b=0,c$c=this._handlers.length;c$b<c$c;c$b++){var c$d=this._handlers[c$b];c$d.caller===c$a&&(this._isIgnoreRecover(c$d)||(delete this._map[c$d.key],c$d.key=null,c$d.clear()))}},c$b._getHandler=function(c$a,c$b){var c$c=c$a?c$a.$_GID||(c$a.$_GID=c$$.getGID()):0,c$d=c$b.$_TID||(c$b.$_TID=this._mid++);return this._map[c$c+"_"+c$d]},c$b._isIgnoreRecover=function(c$a){if(c$a.ignoreRecover||c$a.caller&&"IgnoreRecover"==c$a.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var c$b="";try{arguments.propertyIsEnumerable.caller}catch(c$a){c$b=c$a.stack}c$z.recordError("报错：核心定时器销毁忽略  "+c$b)}return!0}return!1},c$b.hasHandler=function(c$a,c$b){return this._map[c$a.$_GID+"_"+c$b.$_TID]},c$b.callLater=function(c$a,c$b,c$c){if(null==this._getHandler(c$a,c$b)){var c$d=c$l.create();c$d.caller=c$a,c$d.method=c$b,c$d.args=c$c,this._indexHandler(c$d),this._laters.push(c$d)}},c$b.runCallLater=function(c$a,c$b){var c$c=this._getHandler(c$a,c$b);c$c&&null!=c$c.method&&(this._isIgnoreRecover(c$c)||(delete this._map[c$c.key],c$c.run(!0)))},c$b.runTimer=function(c$a,c$b){this.runCallLater(c$a,c$b)},c$q(0,c$b,"delta",function(){return this._delta}),c$a.__init$=function(){c$l=function(){function c$b(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}c$m(c$b,"");var c$a=c$b.prototype;return c$a.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},c$a.recover=function(){this.clear(),this.args=c$b._freeHandler,c$b._freeHandler=this,c$b._freeCount++},c$a.run=function(c$a){var c$b=this.caller;if(c$b&&c$b.destroyed)return this.clear();var c$c=this.method,c$d=this.args;c$a&&this.clear(),null!=c$c&&(c$d?c$c.apply(c$b,c$d):c$c.call(c$b))},c$b._freeHandler=null,c$b._freeCount=0,c$b.create=function(){var c$a=c$b._freeHandler;return c$a?(c$b._freeHandler=c$a.args,--c$b._freeCount,c$a.args=null,c$a):new c$b},c$b}()},c$a}()),c$Z=function(){function c$n(){this.gid=0}c$m(c$n,"laya.utils.Tween");var c$a=c$n.prototype;return c$a.to=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){return void 0===c$h&&(c$h=0),void 0===c$i&&(c$i=!1),this._create(c$a,c$b,c$c,c$d,c$g,c$h,c$i,!0,!1,!0)},c$a.from=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){return void 0===c$h&&(c$h=0),void 0===c$i&&(c$i=!1),this._create(c$a,c$b,c$c,c$d,c$g,c$h,c$i,!1,!1,!0)},c$a._create=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l){if(!c$a)throw new Error("Tween:target is null");this._target=c$a,this._duration=c$c,this._ease=c$d||c$b.ease||c$n.easeNone,this._complete=c$g||c$b.complete,this._delay=c$h,this._props=[],this._usedTimer=0,this._startTimer=c$O.now(),this._usedPool=c$k,this._delayParam=null,this.update=c$b.update;var c$m=c$a.$_GID||(c$a.$_GID=c$$.getGID());return c$n.tweenMap[c$m]?(c$i&&c$n.clearTween(c$a),c$n.tweenMap[c$m].push(this)):c$n.tweenMap[c$m]=[this],c$l?c$h<=0?this.firstStart(c$a,c$b,c$j):(this._delayParam=[c$a,c$b,c$j],c$z.scaleTimer.once(c$h,this,this.firstStart,this._delayParam)):this._initProps(c$a,c$b,c$j),this},c$a.firstStart=function(c$a,c$b,c$c){this._delayParam=null,c$a.destroyed?this.clear():(this._initProps(c$a,c$b,c$c),this._beginLoop())},c$a._initProps=function(c$a,c$b,c$c){for(var c$d in c$b)if("number"==typeof c$a[c$d]){var c$g=c$c?c$a[c$d]:c$b[c$d],c$h=c$c?c$b[c$d]:c$a[c$d];this._props.push([c$d,c$g,c$h-c$g]),c$c||(c$a[c$d]=c$g)}},c$a._beginLoop=function(){c$z.scaleTimer.frameLoop(1,this,this._doEase)},c$a._doEase=function(){this._updateEase(c$O.now())},c$a._updateEase=function(c$a){var c$b=this._target;if(c$b){if(c$b.destroyed)return c$n.clearTween(c$b);var c$c=this._usedTimer=c$a-this._startTimer-this._delay;if(!(c$c<0)){if(c$c>=this._duration)return this.complete();for(var c$d=0<c$c?this._ease(c$c,0,1,this._duration):0,c$g=this._props,c$h=0,c$i=c$g.length;c$h<c$i;c$h++){var c$j=c$g[c$h];c$b[c$j[0]]=c$j[1]+c$d*c$j[2]}this.update&&this.update.run()}}},c$a.complete=function(){if(this._target){c$z.scaleTimer.runTimer(this,this.firstStart);for(var c$a=this._target,c$b=this._props,c$c=this._complete,c$d=0,c$g=c$b.length;c$d<c$g;c$d++){var c$h=c$b[c$d];c$a[c$h[0]]=c$h[1]+c$h[2]}this.update&&this.update.run(),this.clear(),c$c&&c$c.run()}},c$a.pause=function(){c$z.scaleTimer.clear(this,this._beginLoop),c$z.scaleTimer.clear(this,this._doEase),c$z.scaleTimer.clear(this,this.firstStart);var c$a;(c$a=c$O.now()-this._startTimer-this._delay)<0&&(this._usedTimer=c$a)},c$a.setStartTime=function(c$a){this._startTimer=c$a},c$a.clear=function(){this._target&&(this._remove(),this._clear())},c$a._clear=function(){this.pause(),c$z.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,c$W.recover("tween",this))},c$a.recover=function(){this._usedPool=!0,this._clear()},c$a._remove=function(){var c$a=c$n.tweenMap[this._target.$_GID];if(c$a)for(var c$b=0,c$c=c$a.length;c$b<c$c;c$b++)if(c$a[c$b]===this){c$a.splice(c$b,1);break}},c$a.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=c$O.now(),this._delayParam)c$z.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var c$a=this._props,c$b=0,c$c=c$a.length;c$b<c$c;c$b++){var c$d=c$a[c$b];this._target[c$d[0]]=c$d[1]}c$z.scaleTimer.once(this._delay,this,this._beginLoop)}},c$a.resume=function(){this._usedTimer>=this._duration||(this._startTimer=c$O.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?c$z.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},c$q(0,c$a,"progress",null,function(c$a){var c$b=c$a*this._duration;this._startTimer=c$O.now()-this._delay-c$b}),c$n.to=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){return void 0===c$h&&(c$h=0),void 0===c$i&&(c$i=!1),void 0===c$j&&(c$j=!0),c$W.getItemByClass("tween",c$n)._create(c$a,c$b,c$c,c$d,c$g,c$h,c$i,!0,c$j,!0)},c$n.from=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){return void 0===c$h&&(c$h=0),void 0===c$i&&(c$i=!1),void 0===c$j&&(c$j=!0),c$W.getItemByClass("tween",c$n)._create(c$a,c$b,c$c,c$d,c$g,c$h,c$i,!1,c$j,!0)},c$n.clearAll=function(c$a){if(c$a&&c$a.$_GID){var c$b=c$n.tweenMap[c$a.$_GID];if(c$b){for(var c$c=0,c$d=c$b.length;c$c<c$d;c$c++)c$b[c$c]._clear();c$b.length=0}}},c$n.clear=function(c$a){c$a.clear()},c$n.clearTween=function(c$a){c$n.clearAll(c$a)},c$n.easeNone=function(c$a,c$b,c$c,c$d){return c$c*c$a/c$d+c$b},c$n.tweenMap={},c$n}(),c$$=function(){function c$j(){}return c$m(c$j,"laya.utils.Utils"),c$j.toRadian=function(c$a){return c$a*c$j._pi2},c$j.toAngle=function(c$a){return c$a*c$j._pi},c$j.toHexColor=function(c$a){if(c$a<0||isNaN(c$a))return null;for(var c$b=c$a.toString(16);c$b.length<6;)c$b="0"+c$b;return"#"+c$b},c$j.getGID=function(){return c$j._gid++},c$j.concatArray=function(c$a,c$b){if(!c$b)return c$a;if(!c$a)return c$b;var c$c=0,c$d=c$b.length;for(c$c=0;c$c<c$d;c$c++)c$a.push(c$b[c$c]);return c$a},c$j.clearArray=function(c$a){return c$a&&(c$a.length=0),c$a},c$j.copyArray=function(c$a,c$b){if(c$a||(c$a=[]),!c$b)return c$a;c$a.length=c$b.length;var c$c=0,c$d=c$b.length;for(c$c=0;c$c<c$d;c$c++)c$a[c$c]=c$b[c$c];return c$a},c$j.getGlobalRecByPoints=function(c$a,c$b,c$c,c$d,c$g){var c$h,c$i;return c$h=new c$A(c$b,c$c),c$h=c$a.localToGlobal(c$h),c$i=new c$A(c$d,c$g),c$i=c$a.localToGlobal(c$i),c$B._getWrapRec([c$h.x,c$h.y,c$i.x,c$i.y])},c$j.getGlobalPosAndScale=function(c$a){return c$j.getGlobalRecByPoints(c$a,0,0,1,1)},c$j.bind=function(c$a,c$b){return c$a.bind(c$b)},c$j.measureText=function(c$a,c$b){return c$F.measureText(c$a,c$b)},c$j.updateOrder=function(c$a){if(!c$a||c$a.length<2)return!1;for(var c$b,c$c=1,c$d=0,c$g=c$a.length,c$h=NaN;c$c<c$g;){for(c$b=c$a[c$d=c$c],c$h=c$a[c$d]._zOrder;-1<--c$d&&c$a[c$d]._zOrder>c$h;)c$a[c$d+1]=c$a[c$d];c$a[c$d+1]=c$b,c$c++}var c$i=c$b.parent.conchModel;if(c$i)if(null!=c$i.updateZOrder)c$i.updateZOrder();else{for(c$c=0;c$c<c$g;c$c++)c$i.removeChild(c$a[c$c].conchModel);for(c$c=0;c$c<c$g;c$c++)c$i.addChildAt(c$a[c$c].conchModel,c$c)}return!0},c$j.transPointList=function(c$a,c$b,c$c){var c$d=0,c$g=c$a.length;for(c$d=0;c$d<c$g;c$d+=2)c$a[c$d]+=c$b,c$a[c$d+1]+=c$c},c$j.parseInt=function(c$a,c$b){void 0===c$b&&(c$b=0);var c$c=c$O.window.parseInt(c$a,c$b);return isNaN(c$c)?0:c$c},c$j.getFileExtension=function(c$a){c$j._extReg.lastIndex=c$a.lastIndexOf(".");var c$b=c$j._extReg.exec(c$a);return c$b&&1<c$b.length?c$b[1].toLowerCase():null},c$j.getTransformRelativeToWindow=function(c$a,c$b,c$c){var c$d=c$z.stage,c$g=laya.utils.Utils.getGlobalPosAndScale(c$a),c$h=c$d._canvasTransform.clone(),c$i=c$h.tx,c$j=c$h.ty;c$h.rotate(-Math.PI/180*c$z.stage.canvasDegree),c$h.scale(c$z.stage.clientScaleX,c$z.stage.clientScaleY);var c$k=c$z.stage.canvasDegree%180!=0,c$l=NaN,c$m=NaN;c$k?(c$l=c$c+c$g.y,c$m=c$b+c$g.x,c$l*=c$h.d,c$m*=c$h.a,90==c$z.stage.canvasDegree?(c$l=c$i-c$l,c$m+=c$j):(c$l+=c$i,c$m=c$j-c$m)):(c$l=c$b+c$g.x,c$m=c$c+c$g.y,c$l*=c$h.a,c$m*=c$h.d,c$l+=c$i,c$m+=c$j);var c$n=NaN,c$o=NaN;return c$o=c$k?(c$n=c$h.d*c$g.height,c$h.a*c$g.width):(c$n=c$h.a*c$g.width,c$h.d*c$g.height),{x:c$l,y:c$m,scaleX:c$n,scaleY:c$o}},c$j.fitDOMElementInArea=function(c$a,c$b,c$c,c$d,c$g,c$h){c$a._fitLayaAirInitialized||(c$a._fitLayaAirInitialized=!0,c$a.style.transformOrigin=c$a.style.webKittransformOrigin="left top",c$a.style.position="absolute");var c$i=c$j.getTransformRelativeToWindow(c$b,c$c,c$d);c$a.style.transform=c$a.style.webkitTransform="scale("+c$i.scaleX+","+c$i.scaleY+") rotate("+c$z.stage.canvasDegree+"deg)",c$a.style.width=c$g+"px",c$a.style.height=c$h+"px",c$a.style.left=c$i.x+"px",c$a.style.top=c$i.y+"px"},c$j.isOkTextureList=function(c$a){if(!c$a)return!1;var c$b,c$c=0,c$d=c$a.length;for(c$c=0;c$c<c$d;c$c++)if(!(c$b=c$a[c$c])||!c$b.source)return!1;return!0},c$j.isOKCmdList=function(c$a){if(!c$a)return!1;var c$b,c$c,c$d=0,c$g=c$a.length,c$h=c$J._context;for(c$d=0;c$d<c$g;c$d++)switch((c$b=c$a[c$d]).callee){case c$h._drawTexture:case c$h._fillTexture:case c$h._drawTextureWithTransform:if(!(c$c=c$b[0])||!c$c.source)return!1}return!0},c$j._gid=1,c$j._pi=180/Math.PI,c$j._pi2=Math.PI/180,c$j._extReg=/\.(\w+)\??/g,c$j.parseXMLFromString=function(c$a){var c$b;if(c$a=c$a.replace(/>\s+</g,"><"),-1<(c$b=(new DOMParser).parseFromString(c$a,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(c$b.firstChild.firstChild.textContent);return c$b},c$j}(),c$_=function(){function c$a(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],c$J.isWebGL&&c$Q.regCacheByFunction(c$$.bind(this.startDispose,this),c$$.bind(this.getCacheList,this))}c$m(c$a,"laya.utils.VectorGraphManager");var c$b=c$a.prototype;return c$b.getId=function(){return this._id++},c$b.addShape=function(c$a,c$b){this.shapeDic[c$a]=c$b,this.useDic[c$a]||(this.useDic[c$a]=!0)},c$b.addLine=function(c$a,c$b){this.shapeLineDic[c$a]=c$b,this.shapeLineDic[c$a]||(this.shapeLineDic[c$a]=!0)},c$b.getShape=function(c$a){this._checkKey&&null!=this.useDic[c$a]&&(this.useDic[c$a]=!0)},c$b.deleteShape=function(c$a){this.shapeDic[c$a]&&(this.shapeDic[c$a]=null,delete this.shapeDic[c$a]),this.shapeLineDic[c$a]&&(this.shapeLineDic[c$a]=null,delete this.shapeLineDic[c$a]),null!=this.useDic[c$a]&&delete this.useDic[c$a]},c$b.getCacheList=function(){var c$a,c$b=[];for(c$a in this.shapeDic)c$b.push(this.shapeDic[c$a]);for(c$a in this.shapeLineDic)c$b.push(this.shapeLineDic[c$a]);return c$b},c$b.startDispose=function(c$a){var c$b;for(c$b in this.useDic)this.useDic[c$b]=!1;this._checkKey=!0},c$b.endDispose=function(){if(this._checkKey){var c$a;for(c$a in this.useDic)this.useDic[c$a]||this.deleteShape(c$a);this._checkKey=!1}},c$a.getInstance=function(){return c$a.instance=c$a.instance||new c$a},c$a.instance=null,c$a}(),c$e=function(){function c$d(){this._obj=null,this._obj=c$d.supportWeakMap?new c$O.window.WeakMap:{},c$d.supportWeakMap||c$d._maps.push(this)}c$m(c$d,"laya.utils.WeakObject");var c$a=c$d.prototype;return c$a.set=function(c$a,c$b){if(null!=c$a)if(c$d.supportWeakMap){var c$c=c$a;"string"!=typeof c$a&&"number"!=typeof c$a||(c$c=c$d._keys[c$a])||(c$c=c$d._keys[c$a]={k:c$a}),this._obj.set(c$c,c$b)}else"string"==typeof c$a||"number"==typeof c$a?this._obj[c$a]=c$b:(c$a.$_GID||(c$a.$_GID=c$$.getGID()),this._obj[c$a.$_GID]=c$b)},c$a.get=function(c$a){if(null==c$a)return null;if(c$d.supportWeakMap){var c$b="string"==typeof c$a||"number"==typeof c$a?c$d._keys[c$a]:c$a;return c$b?this._obj.get(c$b):null}return"string"==typeof c$a||"number"==typeof c$a?this._obj[c$a]:this._obj[c$a.$_GID]},c$a.del=function(c$a){if(null!=c$a)if(c$d.supportWeakMap){var c$b="string"==typeof c$a||"number"==typeof c$a?c$d._keys[c$a]:c$a;if(!c$b)return;this._obj.delete(c$b)}else"string"==typeof c$a||"number"==typeof c$a?delete this._obj[c$a]:delete this._obj[this._obj.$_GID]},c$a.has=function(c$a){if(null==c$a)return!1;if(c$d.supportWeakMap){var c$b="string"==typeof c$a||"number"==typeof c$a?c$d._keys[c$a]:c$a;return this._obj.has(c$b)}return"string"==typeof c$a||"number"==typeof c$a?null!=this._obj[c$a]:null!=this._obj[this._obj.$_GID]},c$d.__init__=function(){(c$d.supportWeakMap=null!=c$O.window.WeakMap)||c$z.timer.loop(c$d.delInterval,null,c$d.clearCache)},c$d.clearCache=function(){for(var c$a=0,c$b=c$d._maps.length;c$a<c$b;c$a++){c$d._maps[c$a]._obj={}}},c$d.supportWeakMap=!1,c$d.delInterval=3e5,c$d._keys={},c$d._maps=[],c$k(c$d,["I",function(){return this.I=new c$d}]),c$d}(),c$f=function(){function c$a(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}c$m(c$a,"laya.utils.WordText");var c$b=c$a.prototype;return c$b.setText=function(c$a){this.changed=!0,this._text=c$a},c$b.toString=function(){return this._text},c$b.charCodeAt=function(c$a){return this._text?this._text.charCodeAt(c$a):NaN},c$b.charAt=function(c$a){return this._text?this._text.charAt(c$a):null},c$q(0,c$b,"length",function(){return this._text?this._text.length:0}),c$a}(),c$aa=function(c$a){function c$i(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,c$i.__super.call(this),this._childs=c$i.ARRAY_EMPTY,this._$P=c$i.PROP_EMPTY,this.timer=c$z.scaleTimer,this.conchModel=c$J.isConchNode?this.createConchModel():null}c$m(c$i,"laya.display.Node",c$l);var c$b=c$i.prototype;return c$b._setBit=function(c$a,c$b){1==c$a&&(this._getBit(c$a)!=c$b&&this._updateDisplayedInstage());c$b?this._bits|=c$a:this._bits&=~c$a},c$b._getBit=function(c$a){return 0!=(this._bits&c$a)},c$b._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},c$b._setUpNoticeType=function(c$a){var c$b=this;for(c$b._setBit(c$a,!0),c$b=c$b.parent;c$b;){if(c$b._getBit(c$a))return;c$b._setBit(c$a,!0),c$b=c$b.parent}},c$b.on=function(c$a,c$b,c$c,c$d){return"display"!==c$a&&"undisplay"!==c$a||this._getBit(1)||this._setUpNoticeType(1),this._createListener(c$a,c$b,c$c,c$d,!1)},c$b.once=function(c$a,c$b,c$c,c$d){return"display"!==c$a&&"undisplay"!==c$a||this._getBit(1)||this._setUpNoticeType(1),this._createListener(c$a,c$b,c$c,c$d,!0)},c$b.createConchModel=function(){return null},c$b.destroy=function(c$a){void 0===c$a&&(c$a=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(c$a?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},c$b.destroyChildren=function(){if(this._childs)for(var c$a=this._childs.length-1;-1<c$a;c$a--)this._childs[c$a].destroy(!0)},c$b.addChild=function(c$a){if(!c$a||this.destroyed||c$a===this)return c$a;if(c$a.zOrder&&this._set$P("hasZorder",!0),c$a._parent===this){var c$b=this.getChildIndex(c$a);c$b!==this._childs.length-1&&(this._childs.splice(c$b,1),this._childs.push(c$a),this.conchModel&&(this.conchModel.removeChild(c$a.conchModel),this.conchModel.addChildAt(c$a.conchModel,this._childs.length-1)),this._childChanged())}else c$a.parent&&c$a.parent.removeChild(c$a),this._childs===c$i.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(c$a),this.conchModel&&this.conchModel.addChildAt(c$a.conchModel,this._childs.length-1),(c$a.parent=this)._childChanged();return c$a},c$b.addChildren=function(c$a){for(var c$b=arguments,c$c=0,c$d=c$b.length;c$c<c$d;)this.addChild(c$b[c$c++])},c$b.addChildAt=function(c$a,c$b){if(!c$a||this.destroyed||c$a===this)return c$a;if(c$a.zOrder&&this._set$P("hasZorder",!0),0<=c$b&&c$b<=this._childs.length){if(c$a._parent===this){var c$c=this.getChildIndex(c$a);this._childs.splice(c$c,1),this._childs.splice(c$b,0,c$a),this.conchModel&&(this.conchModel.removeChild(c$a.conchModel),this.conchModel.addChildAt(c$a.conchModel,c$b)),this._childChanged()}else c$a.parent&&c$a.parent.removeChild(c$a),this._childs===c$i.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(c$b,0,c$a),this.conchModel&&this.conchModel.addChildAt(c$a.conchModel,c$b),c$a.parent=this;return c$a}throw new Error("appendChildAt:The index is out of bounds")},c$b.getChildIndex=function(c$a){return this._childs.indexOf(c$a)},c$b.getChildByName=function(c$a){var c$b=this._childs;if(c$b)for(var c$c=0,c$d=c$b.length;c$c<c$d;c$c++){var c$g=c$b[c$c];if(c$g.name===c$a)return c$g}return null},c$b._get$P=function(c$a){return this._$P[c$a]},c$b._set$P=function(c$a,c$b){return this.destroyed||(this._$P===c$i.PROP_EMPTY&&(this._$P={}),this._$P[c$a]=c$b),c$b},c$b.getChildAt=function(c$a){return this._childs[c$a]},c$b.setChildIndex=function(c$a,c$b){var c$c=this._childs;if(c$b<0||c$b>=c$c.length)throw new Error("setChildIndex:The index is out of bounds.");var c$d=this.getChildIndex(c$a);if(c$d<0)throw new Error("setChildIndex:node is must child of this object.");return c$c.splice(c$d,1),c$c.splice(c$b,0,c$a),this.conchModel&&(this.conchModel.removeChild(c$a.conchModel),this.conchModel.addChildAt(c$a.conchModel,c$b)),this._childChanged(),c$a},c$b._childChanged=function(c$a){},c$b.removeChild=function(c$a){if(!this._childs)return c$a;var c$b=this._childs.indexOf(c$a);return this.removeChildAt(c$b)},c$b.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},c$b.removeChildByName=function(c$a){var c$b=this.getChildByName(c$a);return c$b&&this.removeChild(c$b),c$b},c$b.removeChildAt=function(c$a){var c$b=this.getChildAt(c$a);if(c$b){for(var c$c=this._childs.length-1,c$d=c$a;c$d<c$c;++c$d)this._childs[c$d]=this._childs[c$d+1];this._childs.length=c$c,this.conchModel&&this.conchModel.removeChild(c$b.conchModel),c$b.parent=null}return c$b},c$b.removeChildren=function(c$a,c$b){if(void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=2147483647),this._childs&&0<this._childs.length){var c$c=this._childs;if(0===c$a&&c$h<=c$b){var c$d=c$c;this._childs=c$i.ARRAY_EMPTY}else c$d=c$c.splice(c$a,c$b-c$a);for(var c$g=0,c$h=c$d.length;c$g<c$h;c$g++)c$d[c$g].parent=null,this.conchModel&&this.conchModel.removeChild(c$d[c$g].conchModel)}return this},c$b.replaceChild=function(c$a,c$b){var c$c=this._childs.indexOf(c$b);return-1<c$c?(this._childs.splice(c$c,1,c$a),this.conchModel&&(this.conchModel.removeChild(c$b.conchModel),this.conchModel.addChildAt(c$a.conchModel,c$c)),c$b.parent=null,c$a.parent=this,c$a):null},c$b._updateDisplayedInstage=function(){var c$a;c$a=this;var c$b=c$z.stage;for(this._displayedInStage=!1;c$a;){if(c$a._getBit(1)){this._displayedInStage=c$a._displayedInStage;break}if(c$a==c$b||c$a._displayedInStage){this._displayedInStage=!0;break}c$a=c$a.parent}},c$b._setDisplay=function(c$a){this._displayedInStage!==c$a&&((this._displayedInStage=c$a)?this.event("display"):this.event("undisplay"))},c$b._displayChild=function(c$a,c$b){var c$c=c$a._childs;if(c$c)for(var c$d=0;c$d<c$c.length;c$d++){var c$g=c$c[c$d];c$g&&c$g._getBit(1)&&(0<c$g._childs.length?this._displayChild(c$g,c$b):c$g._setDisplay(c$b))}c$a._setDisplay(c$b)},c$b.contains=function(c$a){if(c$a===this)return!0;for(;c$a;){if(c$a.parent===this)return!0;c$a=c$a.parent}return!1},c$b.timerLoop=function(c$a,c$b,c$c,c$d,c$g,c$h){void 0===c$g&&(c$g=!0),void 0===c$h&&(c$h=!1),this.timer.loop(c$a,c$b,c$c,c$d,c$g,c$h)},c$b.timerOnce=function(c$a,c$b,c$c,c$d,c$g){void 0===c$g&&(c$g=!0),this.timer._create(!1,!1,c$a,c$b,c$c,c$d,c$g)},c$b.frameLoop=function(c$a,c$b,c$c,c$d,c$g){void 0===c$g&&(c$g=!0),this.timer._create(!0,!0,c$a,c$b,c$c,c$d,c$g)},c$b.frameOnce=function(c$a,c$b,c$c,c$d,c$g){void 0===c$g&&(c$g=!0),this.timer._create(!0,!1,c$a,c$b,c$c,c$d,c$g)},c$b.clearTimer=function(c$a,c$b){this.timer.clear(c$a,c$b)},c$q(0,c$b,"numChildren",function(){return this._childs.length}),c$q(0,c$b,"destroyed",function(){return this._destroyed}),c$q(0,c$b,"parent",function(){return this._parent},function(c$a){this._parent!==c$a&&(c$a?(this._parent=c$a,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),c$a.displayedInStage&&this._displayChild(this,!0)),c$a._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=c$a))}),c$q(0,c$b,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),c$i.ARRAY_EMPTY=[],c$i.PROP_EMPTY={},c$i.NOTICE_DISPLAY=1,c$i.MOUSEENABLE=2,c$i}(),c$ba=function(c$a){function c$o(c$a){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,c$o.__super.call(this),this._padding=c$o._PADDING,this._spacing=c$o._SPACING,this._aligns=c$o._ALIGNS,this._font=c$p.EMPTY,this._ower=c$a}c$m(c$o,"laya.display.css.CSSStyle",c$a);var c$b=c$o.prototype;return c$b.destroy=function(){this._ower=null,this._font=null,this._rect=null},c$b.inherit=function(c$a){this._font=c$a._font,this._spacing=c$a._spacing===c$o._SPACING?c$o._SPACING:c$a._spacing.slice(),this.lineHeight=c$a.lineHeight},c$b._widthAuto=function(){return 0!=(262144&this._type)},c$b.widthed=function(c$a){return 0!=(8&this._type)},c$b._calculation=function(c$a,c$b){if(c$b.indexOf("%")<0)return!1;var c$d=this._ower,c$g=c$d.parent,c$h=this._rect;function c$i(c$a,c$b,c$c){return c$a*c$c[0]+c$b*c$c[1]+c$c[2]}function c$c(c$a){var c$b=c$g.width,c$c=c$d.width;c$h.width&&(c$d.width=c$i(c$b,c$c,c$h.width)),c$h.height&&(c$d.height=c$i(c$b,c$c,c$h.height)),c$h.left&&(c$d.x=c$i(c$b,c$c,c$h.left)),c$h.top&&(c$d.y=c$i(c$b,c$c,c$h.top))}null===c$h&&(c$g._getCSSStyle()._type|=524288,c$g.on("resize",this,c$c),this._rect=c$h={input:{}});var c$j=c$b.split(" ");return c$j[0]=parseFloat(c$j[0])/100,1==c$j.length?c$j[1]=c$j[2]=0:(c$j[1]=parseFloat(c$j[1])/100,c$j[2]=parseFloat(c$j[2])),c$h[c$a]=c$j,c$h.input[c$a]=c$b,c$c(),!0},c$b.heighted=function(c$a){return 0!=(8192&this._type)},c$b.size=function(c$a,c$b){var c$c=this._ower,c$d=!1;-1!==c$a&&c$a!=this._ower.width&&(this._type|=8,this._ower.width=c$a,c$d=!0),-1!==c$b&&c$b!=this._ower.height&&(this._type|=8192,this._ower.height=c$b,c$d=!0),c$d&&(c$c._layoutLater(),524288&this._type&&c$c.event("resize",this))},c$b._getAlign=function(){return this._aligns[0]},c$b._getValign=function(){return this._aligns[1]},c$b._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},c$b._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new c$p(this._font))},c$b.render=function(c$a,c$b,c$c,c$d){var c$g=c$a.width,c$h=c$a.height;c$c-=c$a.pivotX,c$d-=c$a.pivotY,this._bgground&&null!=this._bgground.color&&c$b.ctx.fillRect(c$c,c$d,c$g,c$h,this._bgground.color),this._border&&this._border.color&&c$b.drawRect(c$c,c$d,c$g,c$h,this._border.color.strColor,this._border.size)},c$b.getCSSStyle=function(){return this},c$b.cssText=function(c$a){this.attrs(c$o.parseOneCSS(c$a,";"))},c$b.attrs=function(c$a){if(c$a)for(var c$b=0,c$c=c$a.length;c$b<c$c;c$b++){var c$d=c$a[c$b];this[c$d[0]]=c$d[1]}},c$b.setTransform=function(c$a){"none"===c$a?this._tf=c$j._TF_EMPTY:this.attrs(c$o.parseOneCSS(c$a,","))},c$b.translate=function(c$a,c$b){this._tf===c$j._TF_EMPTY&&(this._tf=new c$g),this._tf.translateX=c$a,this._tf.translateY=c$b},c$b.scale=function(c$a,c$b){this._tf===c$j._TF_EMPTY&&(this._tf=new c$g),this._tf.scaleX=c$a,this._tf.scaleY=c$b},c$b._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},c$q(0,c$b,"block",c$a.prototype._$get_block,function(c$a){c$a?this._type|=1:this._type&=-2}),c$q(0,c$b,"valign",function(){return c$o._valigndef[this._aligns[1]]},function(c$a){this._aligns===c$o._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=c$o._valigndef[c$a]}),c$q(0,c$b,"height",null,function(c$a){if(this._type|=8192,"string"==typeof c$a){if(this._calculation("height",c$a))return;c$a=parseInt(c$a)}this.size(-1,c$a)}),c$q(0,c$b,"width",null,function(c$a){if(this._type|=8,"string"==typeof c$a){var c$b=c$a.indexOf("auto");if(0<=c$b&&(this._type|=262144,c$a=c$a.substr(0,c$b)),this._calculation("width",c$a))return;c$a=parseInt(c$a)}this.size(c$a,-1)}),c$q(0,c$b,"fontWeight",function(){return this._font.weight},function(c$a){this._createFont().weight=c$a}),c$q(0,c$b,"left",null,function(c$a){var c$b=this._ower;if("string"==typeof c$a){if("center"===c$a?c$a="50% -50% 0":"right"===c$a&&(c$a="100% -100% 0"),this._calculation("left",c$a))return;c$a=parseInt(c$a)}c$b.x=c$a}),c$q(0,c$b,"_translate",null,function(c$a){this.translate(c$a[0],c$a[1])}),c$q(0,c$b,"absolute",function(){return 0!=(4&this._type)}),c$q(0,c$b,"top",null,function(c$a){var c$b=this._ower;if("string"==typeof c$a){if("middle"===c$a?c$a="50% -50% 0":"bottom"===c$a&&(c$a="100% -100% 0"),this._calculation("top",c$a))return;c$a=parseInt(c$a)}c$b.y=c$a}),c$q(0,c$b,"align",function(){return c$o._aligndef[this._aligns[0]]},function(c$a){this._aligns===c$o._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=c$o._aligndef[c$a]}),c$q(0,c$b,"bold",function(){return this._font.bold},function(c$a){this._createFont().bold=c$a}),c$q(0,c$b,"padding",function(){return this._padding},function(c$a){this._padding=c$a}),c$q(0,c$b,"leading",function(){return this._spacing[1]},function(c$a){"string"==typeof c$a&&(c$a=parseInt(c$a+"")),this._spacing===c$o._SPACING&&(this._spacing=[0,0]),this._spacing[1]=c$a}),c$q(0,c$b,"lineElement",function(){return 0!=(65536&this._type)},function(c$a){c$a?this._type|=65536:this._type&=-65537}),c$q(0,c$b,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(c$a){this.lineElement=!1,"right"===c$a?this._type|=32768:this._type&=-32769}),c$q(0,c$b,"textDecoration",function(){return this._font.decoration},function(c$a){this._createFont().decoration=c$a}),c$q(0,c$b,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(c$a){"nowrap"===c$a&&(this._type|=131072),"none"===c$a&&(this._type&=-131073)}),c$q(0,c$b,"background",null,function(c$a){c$a?(this._bgground||(this._bgground={}),this._bgground.color=c$a,this._ower.conchModel&&this._ower.conchModel.bgColor(c$a),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),c$q(0,c$b,"wordWrap",function(){return 0==(131072&this._type)},function(c$a){c$a?this._type&=-131073:this._type|=131072}),c$q(0,c$b,"color",function(){return this._font.color},function(c$a){this._createFont().color=c$a}),c$q(0,c$b,"password",function(){return this._font.password},function(c$a){this._createFont().password=c$a}),c$q(0,c$b,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(c$a){"none"===c$a?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=c$a),this._ower.conchModel&&this._ower.conchModel.bgColor(c$a),this._ower._renderType|=256}),c$q(0,c$b,"font",function(){return this._font.toString()},function(c$a){this._createFont().set(c$a)}),c$q(0,c$b,"weight",null,function(c$a){this._createFont().weight=c$a}),c$q(0,c$b,"letterSpacing",function(){return this._spacing[0]},function(c$a){"string"==typeof c$a&&(c$a=parseInt(c$a+"")),this._spacing===c$o._SPACING&&(this._spacing=[0,0]),this._spacing[0]=c$a}),c$q(0,c$b,"fontSize",function(){return this._font.size},function(c$a){this._createFont().size=c$a}),c$q(0,c$b,"italic",function(){return this._font.italic},function(c$a){this._createFont().italic=c$a}),c$q(0,c$b,"fontFamily",function(){return this._font.family},function(c$a){this._createFont().family=c$a}),c$q(0,c$b,"stroke",function(){return this._font.stroke[0]},function(c$a){this._createFont().stroke===c$p._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=c$a}),c$q(0,c$b,"strokeColor",function(){return this._font.stroke[1]},function(c$a){this._createFont().stroke===c$p._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=c$a}),c$q(0,c$b,"border",function(){return this._border?this._border.value:""},function(c$a){if("none"!=c$a){this._border||(this._border={});var c$b=(this._border.value=c$a).split(" ");if(this._border.color=c$S.create(c$b[c$b.length-1]),1==c$b.length)return this._border.size=1,void(this._border.type="solid");var c$c=0;0<c$b[0].indexOf("px")?(this._border.size=parseInt(c$b[0]),c$c++):this._border.size=1,this._border.type=c$b[c$c],this._ower._renderType|=256}else this._border=null}),c$q(0,c$b,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(c$a){c$a?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==c$a?null:c$S.create(c$a),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),c$q(0,c$b,"position",function(){return 4&this._type?"absolute":""},function(c$a){"absolute"==c$a?this._type|=4:this._type&=-5}),c$q(0,c$b,"display",null,function(c$a){switch(c$a){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),c$q(0,c$b,"paddingLeft",function(){return this.padding[3]}),c$q(0,c$b,"paddingTop",function(){return this.padding[0]}),c$q(0,c$b,"_scale",null,function(c$a){this._ower.scale(c$a[0],c$a[1])}),c$q(0,c$b,"_rotate",null,function(c$a){this._ower.rotation=c$a}),c$o.parseOneCSS=function(c$a,c$b){for(var c$c,c$d=[],c$g=c$a.split(c$b),c$h=0,c$i=c$g.length;c$h<c$i;c$h++){var c$j=c$g[c$h],c$k=c$j.indexOf(":"),c$l=c$j.substr(0,c$k).replace(/^\s+|\s+$/g,"");if(0!=c$l.length){var c$m=c$j.substr(c$k+1).replace(/^\s+|\s+$/g,""),c$n=[c$l,c$m];switch(c$l){case"italic":case"bold":c$n[1]="true"==c$m;break;case"line-height":c$n[0]="lineHeight",c$n[1]=parseInt(c$m);break;case"font-size":c$n[0]="fontSize",c$n[1]=parseInt(c$m);break;case"padding":1<(c$c=c$m.split(" ")).length||(c$c[1]=c$c[2]=c$c[3]=c$c[0]),c$n[1]=[parseInt(c$c[0]),parseInt(c$c[1]),parseInt(c$c[2]),parseInt(c$c[3])];break;case"rotate":c$n[0]="_rotate",c$n[1]=parseFloat(c$m);break;case"scale":c$c=c$m.split(" "),c$n[0]="_scale",c$n[1]=[parseFloat(c$c[0]),parseFloat(c$c[1])];break;case"translate":c$c=c$m.split(" "),c$n[0]="_translate",c$n[1]=[parseInt(c$c[0]),parseInt(c$c[1])];break;default:(c$n[0]=c$o._CSSTOVALUE[c$l])||(c$n[0]=c$l)}c$d.push(c$n)}}return c$d},c$o.parseCSS=function(c$a,c$b){for(var c$c;null!=(c$c=c$o._parseCSSRegExp.exec(c$a));)c$o.styleSheets[c$c[1]]=c$o.parseOneCSS(c$c[2],";")},c$o.EMPTY=new c$o(null),c$o._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},c$o._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),c$o._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},c$o._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},c$o.styleSheets={},c$o.ALIGN_CENTER=1,c$o.ALIGN_RIGHT=2,c$o.VALIGN_MIDDLE=1,c$o.VALIGN_BOTTOM=2,c$o._CSS_BLOCK=1,c$o._DISPLAY_NONE=2,c$o._ABSOLUTE=4,c$o._WIDTH_SET=8,c$o._PADDING=[0,0,0,0],c$o._RECT=[-1,-1,-1,-1],c$o._SPACING=[0,0],c$o._ALIGNS=[0,0,0],c$o.ADDLAYOUTED=512,c$o._NEWFONT=4096,c$o._HEIGHT_SET=8192,c$o._BACKGROUND_SET=16384,c$o._FLOAT_RIGHT=32768,c$o._LINE_ELEMENT=65536,c$o._NOWARP=131072,c$o._WIDTHAUTO=262144,c$o._LISTERRESZIE=524288,c$o}(c$j),c$ca=function(c$a){function c$i(){this.url=null,this.audio=null,this.loaded=!1,c$i.__super.call(this)}c$m(c$i,"laya.media.h5audio.AudioSound",c$l);var c$b=c$i.prototype;return c$b.dispose=function(){var c$a=c$i._audioCache[this.url];c$a&&(c$a.src="",delete c$i._audioCache[this.url])},c$b.load=function(c$a){var c$b;if(c$a=c$I.formatURL(c$a),(this.url=c$a)==c$E._tMusic?(c$i._initMusicAudio(),(c$b=c$i._musicAudio).src!=c$a&&(c$i._audioCache[c$b.src]=null,c$b=null)):c$b=c$i._audioCache[c$a],c$b&&2<=c$b.readyState)this.event("complete");else{c$b||(c$b=c$a==c$E._tMusic?(c$i._initMusicAudio(),c$i._musicAudio):c$O.createElement("audio"),(c$i._audioCache[c$a]=c$b).src=c$a),c$b.addEventListener("canplaythrough",c$d),c$b.addEventListener("error",c$g);var c$c=this;(this.audio=c$b).load?c$b.load():c$g()}function c$d(){c$h(),c$c.loaded=!0,c$c.event("complete")}function c$g(){c$b.load=null,c$h(),c$c.event("error")}function c$h(){c$b.removeEventListener("canplaythrough",c$d),c$b.removeEventListener("error",c$g)}},c$b.play=function(c$a,c$b,c$c){if(void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=0),!this.url)return null;var c$d,c$g;if(!(c$d=this.url==c$E._tMusic?c$i._musicAudio:c$i._audioCache[this.url]))return null;c$g=c$W.getItem("audio:"+this.url),c$J.isConchApp?c$g||((c$g=c$O.createElement("audio")).src=this.url):this.url==c$E._tMusic?(c$i._initMusicAudio(),(c$g=c$i._musicAudio).src=this.url):c$g=c$g||c$d.cloneNode(!0);var c$h=new c$oa(c$g);return c$h.url=this.url,c$h.loops=c$b,c$h.startTime=c$a,c$h.startHandler=c$c,c$h.play(!1),c$E.addChannel(c$h),c$h},c$q(0,c$b,"duration",function(){var c$a;return(c$a=c$i._audioCache[this.url])?c$a.duration:0}),c$i._initMusicAudio=function(){c$i._musicAudio||(c$i._musicAudio||(c$i._musicAudio=c$O.createElement("audio")),c$J.isConchApp||c$O.document.addEventListener("mousedown",c$i._makeMusicOK))},c$i._makeMusicOK=function(){c$O.document.removeEventListener("mousedown",c$i._makeMusicOK),c$i._musicAudio.src?c$i._musicAudio.play():(c$i._musicAudio.src="",c$i._musicAudio.load())},c$i._audioCache={},c$i._musicAudio=null,c$i}(),c$da=function(c$a){function c$b(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,c$b.__super.call(this)}c$m(c$b,"laya.media.SoundChannel",c$l);var c$c=c$b.prototype;return c$c.play=function(){},c$c.stop=function(){},c$c.pause=function(){},c$c.resume=function(){},c$c.__runComplete=function(c$a){c$a&&c$a.run()},c$q(0,c$c,"volume",function(){return 1},function(c$a){}),c$q(0,c$c,"position",function(){return 0}),c$q(0,c$c,"duration",function(){return 0}),c$b}(),c$ga=function(c$a){function c$b(){c$b.__super.call(this)}c$m(c$b,"laya.media.Sound",c$l);var c$c=c$b.prototype;return c$c.load=function(c$a){},c$c.play=function(c$a,c$b,c$c){return void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=0),null},c$c.dispose=function(){},c$q(0,c$c,"duration",function(){return 0}),c$b}(),c$ha=function(c$a){function c$g(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,c$g.__super.call(this)}c$m(c$g,"laya.media.webaudio.WebAudioSound",c$l);var c$b=c$g.prototype;return c$b.load=function(c$a){this.url=c$a,this.audioBuffer=c$g._dataCache[c$a],this.audioBuffer?this._loaded(this.audioBuffer):(c$g.e.on("loaded:"+c$a,this,this._loaded),c$g.e.on("err:"+c$a,this,this._err),c$g.__loadingSound[c$a]||(c$g.__loadingSound[c$a]=!0,c$z.loader.load(c$a,c$u.create(this,this.onloaded),null,c$ja.BUFFER,4,!1,null,!0)))},c$b.onloaded=function(c$a){c$a||this._err(),this._disposed?this._removeLoadEvents():(this.data=c$a,c$g.buffs.push({buffer:this.data,url:this.url}),c$g.decode())},c$b._err=function(){if(this._removeLoadEvents(),c$g.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var c$a,c$b,c$c,c$d=0;for(c$a=(c$b=this.__toPlays).length,c$d=0;c$d<c$a;c$d++)(c$c=c$b[c$d])[3]&&!c$c[3].isStopped&&c$c[3].event("error");this.__toPlays.length=0}},c$b._loaded=function(c$a){this._removeLoadEvents(),this._disposed||(this.audioBuffer=c$a,this.loaded=!0,this.event("complete"))},c$b._removeLoadEvents=function(){c$g.e.off("loaded:"+this.url,this,this._loaded),c$g.e.off("err:"+this.url,this,this._err)},c$b.__playAfterLoaded=function(){if(this.__toPlays){var c$a,c$b,c$c,c$d=0;for(c$a=(c$b=this.__toPlays).length,c$d=0;c$d<c$a;c$d++)(c$c=c$b[c$d])[3]&&!c$c[3].isStopped&&this.play(c$c[0],c$c[1],c$c[2],c$c[3]);this.__toPlays.length=0}},c$b.play=function(c$a,c$b,c$c,c$d){return void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=0),c$d=c$d||new c$pa,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([c$a,c$b,c$c,c$d]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),c$d.url=this.url,c$d.loops=c$b,c$d.audioBuffer=this.audioBuffer,c$d.startTime=c$a,c$d.startHandler=c$c,c$d.play(!1),c$E.addChannel(c$d),c$d},c$b.dispose=function(){this._disposed=!0,delete c$g._dataCache[this.url],delete c$g.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},c$q(0,c$b,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),c$g.decode=function(){if(!(c$g.buffs.length<=0||c$g.isDecoding))if(c$g.isDecoding=!0,(c$g.tInfo=c$g.buffs.shift())&&c$g.tInfo.buffer&&c$g.tInfo.buffer.byteLength)try{c$g.ctx.decodeAudioData(c$g.tInfo.buffer,c$g._done,c$g._fail)}catch(c$a){console.error("decodeAudioData error  byteLength:"+c$g.tInfo.buffer.byteLength+"  url:"+c$g.tInfo.url)}else c$g._fail()},c$g._done=function(c$a){c$g.e.event("loaded:"+c$g.tInfo.url,c$a),c$g._dataCache[c$g.tInfo.url]=c$a,c$g.isDecoding=!1,c$g.decode()},c$g._fail=function(){c$g.e.event("err:"+c$g.tInfo.url,null),c$g.isDecoding=!1,c$g.decode()},c$g._playEmptySound=function(){if(null!=c$g.ctx){if(c$g._emptySource&&(c$g._emptySource.stop(),c$g._emptySource.disconnect(0),!c$pa._tryCleanFailed))try{c$g._emptySource.buffer=null}catch(c$a){c$pa._tryCleanFailed=!0}var c$a=c$g.ctx.createBufferSource();c$a.buffer=c$g._miniBuffer,c$a.connect(c$g.ctx.destination),c$a.start(0,0,0),c$g._emptySource=c$a}},c$g._unlock=function(){c$g._unlocked||(c$g._playEmptySound(),"running"==c$g.ctx.state?(c$O.document.removeEventListener("mousedown",c$g._unlock,!0),c$O.document.removeEventListener("touchend",c$g._unlock,!0),c$O.document.removeEventListener("touchstart",c$g._unlock,!0),c$g._unlocked=!0):"suspended"==c$g.ctx.state&&c$E._recoverWebAudio())},c$g.initWebAudio=function(){"running"!=c$g.ctx.state&&(c$g._unlock(),c$O.document.addEventListener("mousedown",c$g._unlock,!0),c$O.document.addEventListener("touchend",c$g._unlock,!0),c$O.document.addEventListener("touchstart",c$g._unlock,!0))},c$g._emptySource=null,c$g._dataCache={},c$g.buffs=[],c$g.isDecoding=!1,c$g._unlocked=!1,c$g.tInfo=null,c$g.__loadingSound={},c$k(c$g,["window",function(){return this.window=c$O.window},"webAudioEnabled",function(){return this.webAudioEnabled=c$g.window.AudioContext||c$g.window.webkitAudioContext||c$g.window.mozAudioContext},"ctx",function(){return this.ctx=c$g.webAudioEnabled?new(c$g.window.AudioContext||c$g.window.webkitAudioContext||c$g.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=c$g.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new c$l}]),c$g}(),c$ia=function(c$a){function c$b(){this._responseType=null,this._data=null,c$b.__super.call(this),this._http=new c$O.window.XMLHttpRequest}c$m(c$b,"laya.net.HttpRequest",c$l);var c$c=c$b.prototype;return c$c.send=function(c$a,c$b,c$c,c$d,c$g){void 0===c$c&&(c$c="get"),void 0===c$d&&(c$d="text"),this._responseType=c$d,this._data=null;var c$h=this,c$i=this._http;if(c$i.open(c$c,c$a,!0),c$g)for(var c$j=0;c$j<c$g.length;c$j++)c$i.setRequestHeader(c$g[c$j++],c$g[c$j]);else c$J.isConchApp||(c$b&&"string"!=typeof c$b?c$i.setRequestHeader("Content-Type","application/json"):c$i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));c$i.responseType="arraybuffer"!==c$d?"text":"arraybuffer",c$i.onerror=function(c$a){c$h._onError(c$a)},c$i.onabort=function(c$a){c$h._onAbort(c$a)},c$i.onprogress=function(c$a){c$h._onProgress(c$a)},c$i.onload=function(c$a){c$h._onLoad(c$a)},c$i.send(c$b)},c$c._onProgress=function(c$a){c$a&&c$a.lengthComputable&&this.event("progress",c$a.loaded/c$a.total)},c$c._onAbort=function(c$a){this.error("Request was aborted by user")},c$c._onError=function(c$a){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},c$c._onLoad=function(c$a){var c$b=this._http,c$c=void 0!==c$b.status?c$b.status:200;200===c$c||204===c$c||0===c$c?this.complete():this.error("["+c$b.status+"]"+c$b.statusText+":"+c$b.responseURL)},c$c.error=function(c$a){this.clear(),this.event("error",c$a)},c$c.complete=function(){this.clear();var c$b=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=c$$.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(c$a){c$b=!1,this.error(c$a.message)}c$b&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},c$c.clear=function(){var c$a=this._http;c$a.onerror=c$a.onabort=c$a.onprogress=c$a.onload=null},c$q(0,c$c,"url",function(){return this._http.responseURL}),c$q(0,c$c,"http",function(){return this._http}),c$q(0,c$c,"data",function(){return this._data}),c$b}(),c$ja=function(c$a){function c$C(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,c$C.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}c$m(c$C,"laya.net.Loader",c$l);var c$b=c$C.prototype;return c$b.load=function(c$a,c$b,c$c,c$d,c$g){if(c$a&&""!=c$a||console.error("Loader 加载的url不合法 "+c$a),void 0===c$c&&(c$c=!0),void 0===c$g&&(c$g=!1),0===(this._url=c$a).indexOf("data:image")?this._type=c$b="image":this._type=c$b||(c$b=this.getTypeFromUrl(c$a)),this._cache=c$c,this._data=null,!c$g&&c$C.loadedMap[c$a])return this._data=c$C.loadedMap[c$a],this.event("progress",1),void this.event("complete",this._data);if(c$d&&c$C.setGroup(c$a,c$d),null!=c$C.parserMap[c$b])return this._customParse=!0,void(c$C.parserMap[c$b]instanceof laya.utils.Handler?c$C.parserMap[c$b].runWith(this):c$C.parserMap[c$b].call(null,this));if("image"===c$b||"htmlimage"===c$b||"nativeimage"===c$b)return this._loadImage(c$a);if("ttf"===c$b)return this._loadTTF(c$a);switch(c$b){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:c$b}c$C.preLoadedMap[c$a]?this.onLoaded(c$C.preLoadedMap[c$a]):c$i.resMgrLoad(c$a,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},c$b.getTypeFromUrl=function(c$a){var c$b=c$$.getFileExtension(c$a);return c$b?c$C.typeMap[c$b]:(console.warn("Not recognize the resources suffix",c$a),"text")},c$b._loadTTF=function(c$a){c$a=c$I.formatURL(c$a);var c$b=new c$H;c$b.complete=c$u.create(this,this.onLoaded),c$b.load(c$a)},c$b._loadImage=function(c$a){c$i.imgMgrLoad(c$a,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},c$b._loadImageComplete=function(c$a,c$b,c$c){if(null!=c$c)if(c$c instanceof ArrayBuffer){var c$d=new DataView(c$c),c$g=new laya.webgl.resource.WebGLImage(new Uint8Array(c$c,8),c$a,0,!1,c$d.getUint32(0),c$d.getUint32(4));this.onLoaded(c$g)}else if(c$c instanceof c$ma)c$C.imgMgrSet[c$a]=c$b,c$i.imgMgrLock(c$a,c$C.imgMgrSet[c$a]),this._url=c$a,this.complete(c$c);else{var c$h=-1!=c$a.indexOf(".png",c$a.length-4)?6408:6407;c$g=new laya.webgl.resource.WebGLImage(c$c,c$a,c$h,!1,c$c.width,c$c.height);this.onLoaded(c$g)}else this.event("error","Load image failed")},c$b._loadSound=function(c$a){var c$b=new c$E._soundClass,c$c=this;function c$d(){c$b.offAll()}c$b.on("complete",this,function(){c$d(),c$c.onLoaded(c$b)}),c$b.on("error",this,function(){c$d(),c$b.dispose(),c$c.event("error","Load sound failed")}),c$b.load(c$a)},c$b.onProgress=function(c$a){"atlas"===this._type?this.event("progress",.3*c$a):this.event("progress",c$a)},c$b.onError=function(c$a){this.event("error",c$a)},c$b._loadedComplete=function(c$a,c$b,c$c){if(null!=c$c)switch(this._type){case"atlas":case"plf":case"json":var c$d=new c$P(c$c);this.onLoaded(JSON.parse(c$d.readUTFBytes()));break;case"font":c$d=new c$P(c$c);this.onLoaded(c$$.parseXMLFromString(c$d.readUTFBytes()));break;default:this.onLoaded(c$c)}else this.event("error",c$a)},c$b.onLoaded=function(c$a){var c$b=this._type;if("plf"==c$b)this.parsePLFData(c$a),this.complete(c$a);else if("image"===c$b){var c$c=new c$ma(c$a);c$c.url=this._url,this.complete(c$c)}else if("sound"===c$b||"htmlimage"===c$b||"nativeimage"===c$b)this.complete(c$a);else if("atlas"===c$b){if(!c$a.src&&!c$a._setContext){if(!this._data){if((this._data=c$a).meta&&c$a.meta.image)for(var c$d=c$a.meta.image.split(","),c$g=0<=this._url.indexOf("/")?"/":"\\",c$h=this._url.lastIndexOf(c$g),c$i=0<=c$h?this._url.substr(0,c$h+1):"",c$j=0,c$k=c$d.length;c$j<c$k;c$j++)c$d[c$j]=c$i+c$d[c$j];else c$d=[this._url.replace(".json",".png")];c$d.reverse(),c$a.toLoads=c$d,c$a.pics=[]}return this.event("progress",.3+1/c$d.length*.6),this._loadImage(c$d.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(c$a),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var c$l=this._data.frames,c$m=this._url.split("?")[0],c$n=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:c$m.substring(0,c$m.lastIndexOf("."))+"/",c$o=this._data.pics,c$p=c$I.formatURL(this._url),c$q=c$C.atlasMap[c$p]||(c$C.atlasMap[c$p]=[]);c$q.dir=c$n;var c$r=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var c$s in c$r=parseFloat(this._data.meta.scale),c$l){var c$t,c$u=c$l[c$s],c$v=c$o[c$u.frame.idx?c$u.frame.idx:0],c$w=c$I.formatURL(c$n+c$s);c$v.scaleRate=c$r,c$t=c$ma.create(c$v,c$u.frame.x,c$u.frame.y,c$u.frame.w,c$u.frame.h,c$u.spriteSourceSize.x,c$u.spriteSourceSize.y,c$u.sourceSize.w,c$u.sourceSize.h),c$C.cacheRes(c$w,c$t),c$C.keepCache(this._url,c$n+c$s),c$t.url=c$w,c$q.push(c$w)}else for(c$s in c$l)c$v=c$o[(c$u=c$l[c$s]).frame.idx?c$u.frame.idx:0],c$w=c$I.formatURL(c$n+c$s),c$C.cacheRes(c$w,c$ma.create(c$v,c$u.frame.x,c$u.frame.y,c$u.frame.w,c$u.frame.h,c$u.spriteSourceSize.x,c$u.spriteSourceSize.y,c$u.sourceSize.w,c$u.sourceSize.h)),c$C.loadedMap[c$w].url=c$w,c$C.keepCache(this._url,c$n+c$s),c$q.push(c$w);delete this._data.pics,this.complete(this._data)}else if("font"==c$b){if(!c$a.src)return this._data=c$a,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var c$x=new c$D;c$x.parseFont(this._data,c$a);var c$y=this._url.split(".fnt")[0].split("/"),c$z=c$y[c$y.length-1];c$sa.registerBitmapFont(c$z,c$x),this._data=c$x,this.complete(this._data)}else if("pkm"==c$b){var c$A=c$ya.create(c$a,this._url),c$B=new c$ma(c$A);c$B.url=this._url,this.complete(c$B)}else this.complete(c$a)},c$b.parsePLFData=function(c$a){var c$b,c$c,c$d;for(c$b in c$a)switch(c$d=c$a[c$b],c$b){case"json":case"text":for(c$c in c$d)c$C.preLoadedMap[c$I.formatURL(c$c)]=c$d[c$c];break;default:for(c$c in c$d)c$C.preLoadedMap[c$I.formatURL(c$c)]=c$d[c$c]}},c$b.complete=function(c$a){this._data=c$a,this._customParse?this.event("loaded",c$a instanceof Array?[c$a]:c$a):(c$C._loaders.push(this),c$C._isWorking||c$C.checkNext())},c$b.endLoad=function(c$a){c$a&&(this._data=c$a),this._cache&&c$C.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},c$q(0,c$b,"url",function(){return this._url}),c$q(0,c$b,"data",function(){return this._data}),c$q(0,c$b,"cache",function(){return this._cache}),c$q(0,c$b,"type",function(){return this._type}),c$C.checkNext=function(){c$C._isWorking=!0;for(var c$a=c$O.now();c$C._startIndex<c$C._loaders.length;)if(c$O.now(),c$C._loaders[c$C._startIndex].endLoad(),c$C._startIndex++,c$O.now()-c$a>c$C.maxTimeOut)return console.warn("loader callback cost a long time:"+(c$O.now()-c$a)+" url="+c$C._loaders[c$C._startIndex-1].url),void c$z.timer.frameOnce(1,null,c$C.checkNext);c$C._loaders.length=0,c$C._startIndex=0,c$C._isWorking=!1},c$C.clearRes=function(c$a,c$b){if(null!=c$a){void 0===c$b&&(c$b=!1),c$a=c$I.formatURL(c$a);var c$c=c$C.getAtlas(c$a);if(c$c){for(var c$d=0,c$g=c$c.length;c$d<c$g;c$d++){var c$h=c$c[c$d],c$i=c$C.getRes(c$h);delete c$C.loadedMap[c$h],c$C.clearCache(c$a.substring(c$I.basePath.length),c$h.substring(c$I.basePath.length)),c$i&&c$i.destroy(c$b)}c$c.length=0,delete c$C.atlasMap[c$a],delete c$C.loadedMap[c$a]}else{var c$j=c$C.loadedMap[c$a];c$j&&(delete c$C.loadedMap[c$a],c$j instanceof laya.resource.Texture&&c$j.bitmap&&c$j.destroy(c$b))}}},c$C.clearTextureRes=function(c$a){c$a=c$I.formatURL(c$a);var c$b=laya.net.Loader.getAtlas(c$a),c$c=c$b&&0<c$b.length?laya.net.Loader.getRes(c$b[0]):laya.net.Loader.getRes(c$a);c$c&&c$c.bitmap&&(c$J.isConchApp&&!c$J.isConchWebGL?c$c.bitmap.source.releaseTexture&&c$c.bitmap.source.releaseTexture():null==c$c.bitmap._atlaser&&c$c.bitmap.releaseResource(!0))},c$C.getRes=function(c$a){return c$C.loadedMap[c$I.formatURL(c$a)]},c$C.getAtlas=function(c$a){return c$C.atlasMap[c$I.formatURL(c$a)]},c$C.cacheRes=function(c$a,c$b){c$a=c$I.formatURL(c$a),null!=c$C.loadedMap[c$a]?console.warn("Resources already exist,is repeated loading:",c$a):c$C.loadedMap[c$a]=c$b},c$C.setGroup=function(c$a,c$b){c$C.groupMap[c$b]||(c$C.groupMap[c$b]=[]),c$C.groupMap[c$b].push(c$a)},c$C.clearResByGroup=function(c$a){if(c$C.groupMap[c$a]){var c$b=c$C.groupMap[c$a],c$c=0,c$d=c$b.length;for(c$c=0;c$c<c$d;c$c++)c$C.clearRes(c$b[c$c]);c$b.length=0}},c$C.keepCache=function(c$a,c$b){if(c$a&&c$b){var c$c=c$C.cacheSet[c$b];c$c?-1==c$c.indexOf(c$a)&&c$c.push(c$a):c$C.cacheSet[c$b]=[c$a]}},c$C.clearCache=function(c$a,c$b){if(c$a&&c$b){var c$c=c$C.cacheSet[c$b];if(c$c){var c$d=c$c.indexOf(c$a);if(-1!==c$d){var c$g=c$c.length-1;0==c$g?(delete c$C.cacheSet[c$b],0<c$C.imgMgrSet[c$b]?c$i.imgMgrFree(c$b,c$C.imgMgrSet[c$b]):c$C.clearRes(c$b,!0)):(c$c[c$d]=c$c[c$g],c$c.length=c$g)}}}},c$C.saveObject=function(c$a,c$b,c$c){if(c$b&&c$a){var c$d=c$C.objectSet[c$a];c$d?(console.warn("Loader.saveObject: "+c$a),c$d[0]=c$b,c$d[1]=c$c):c$C.objectSet[c$a]=[c$b,c$c,[]]}},c$C.findObject=function(c$a){if(c$a){var c$b=c$C.objectSet[c$a];if(c$b)return c$b[0]}return null},c$C.keepObject=function(c$a,c$b){if(c$a&&c$b){var c$c=c$C.objectSet[c$b];c$c&&-1===c$c[2].indexOf(c$a)&&c$c[2].push(c$a)}},c$C.clearObject=function(c$a,c$b){if(c$a&&c$b){var c$c=c$C.objectSet[c$b];if(c$c){var c$d=c$c[2],c$g=c$d.indexOf(c$a);if(-1!==c$g){var c$h=c$d.length-1;0==c$h?(delete c$C.objectSet[c$b],c$c[1]&&c$c[1].call(null,c$c[0])):(c$d[c$g]=c$d[c$h],c$d.length=c$h)}}}},c$C.TEXT="text",c$C.JSON="json",c$C.XML="xml",c$C.BUFFER="arraybuffer",c$C.IMAGE="image",c$C.SOUND="sound",c$C.ATLAS="atlas",c$C.FONT="font",c$C.TTF="ttf",c$C.PLF="plf",c$C.PKM="pkm",c$C.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},c$C.parserMap={},c$C.groupMap={},c$C.maxTimeOut=100,c$C.loadedMap={},c$C.preLoadedMap={},c$C.atlasMap={},c$C._loaders=[],c$C._isWorking=!1,c$C._startIndex=0,c$C.imgCache={},c$C.cacheSet={},c$C.objectSet={},c$C.imgMgrSet={},c$C}(),c$ka=function(c$a){var c$o;function c$p(){this.retryNum=3,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},c$p.__super.call(this);for(var c$a=0;c$a<this._maxPriority;c$a++)this._resInfos[c$a]=[]}c$m(c$p,"laya.net.LoaderManager",c$l);var c$b=c$p.prototype;return c$b.create=function(c$a,c$c,c$b,c$d,c$g,c$h,c$i,c$j){if(null==c$h&&(c$h=2),null==c$i&&(c$i=!0),c$a instanceof Array){var c$k=c$a,c$l=c$k.length,c$m=0;if(c$b)var c$n=c$u.create(c$b.caller,c$b.method,c$b.args,!1);for(var c$o=0;c$o<c$l;c$o++){var c$p=c$k[c$o];"string"==typeof c$p&&(c$p=c$k[c$o]={url:c$p}),c$p.progress=0}for(c$o=0;c$o<c$l;c$o++){c$p=c$k[c$o];var c$q=c$b?c$u.create(null,c$t,[c$p],!1):null,c$r=c$b||c$c?c$u.create(null,c$s,[c$p]):null;this._create(c$p.url,c$r,c$q,c$p.clas||c$d,c$p.params||c$g,null!=c$p.priority&&0<=c$p.priority?c$p.priority:c$h,c$i,c$p.group||c$j)}function c$s(c$a,c$b){c$m++,c$a.progress=1,c$m===c$l&&c$c&&c$c.run()}function c$t(c$a,c$b){c$a.progress=c$b;for(var c$c=0,c$d=0;c$d<c$l;c$d++){c$c+=c$k[c$d].progress}var c$g=c$c/c$l;c$n.runWith(c$g)}return!0}return this._create(c$a,c$c,c$b,c$d,c$g,c$h,c$i,c$j)},c$b._create=function(c$b,c$c,c$a,c$d,c$g,c$h,c$i,c$j){c$b&&""!=c$b||console.error("加载的url不合法 "+c$b),null==c$h&&(c$h=2),null==c$i&&(c$i=!0);var c$k=c$I.formatURL(c$b),c$l=this.getRes(c$k);if(c$l)!c$l.hasOwnProperty("loaded")||c$l.loaded?(c$a&&c$a.runWith(1),c$c&&c$c.run()):c$c&&c$z.loader._createListener(c$b,c$c.caller,c$c.method,c$c.args,!0,!1);else{var c$m=c$$.getFileExtension(c$b),c$n=c$p.createMap[c$m];if(!c$n)throw new Error("LoaderManager:unknown file("+c$b+") extension with: "+c$m+".");c$d||(c$d=c$n[0]);var c$o=c$n[1];if("atlas"==c$m)this.load(c$b,c$c,c$a,c$o,c$h,c$i);else{c$d===c$ma&&(c$o="htmlimage"),(c$l=c$d?new c$d:null).hasOwnProperty("_loaded")&&(c$l._loaded=!1),c$l._setUrl(c$b),c$j&&c$l._setGroup(c$j),this._createLoad(c$l,c$b,c$u.create(null,function(c$a){c$l&&!c$l.destroyed&&c$a&&c$l.onAsynLoaded.call(c$l,c$b,c$a,c$g),c$c&&c$c.run();c$z.loader.event(c$b)}),c$a,c$o,c$h,!1,c$j,!0),c$i&&this.cacheRes(c$k,c$l)}}return c$l},c$b.load=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){c$a&&""!=c$a||console.error("加载的url不合法 "+c$a);var c$k=this;if(null==c$g&&(c$g=2),null==c$h&&(c$h=!0),void 0===c$j&&(c$j=!1),c$a instanceof Array)return this._loadAssets(c$a,c$b,c$c,c$d,c$g,c$h,c$i);var c$l=c$ja.getRes(c$a);if(null!=c$l)c$z.timer.frameOnce(1,null,function(){c$c&&c$c.runWith(1),c$b&&c$b.runWith(c$l),c$k._loaderCount||c$k.event("complete")});else{var c$m=c$p._resMap[c$a];c$m?(c$b&&c$m._createListener("complete",c$b.caller,c$b.method,c$b.args,!1,!1),c$c&&c$m._createListener("progress",c$c.caller,c$c.method,c$c.args,!1,!1)):((c$m=this._infoPool.length?this._infoPool.pop():new c$o).url=c$a,c$m.type=c$d,c$m.cache=c$h,c$m.group=c$i,c$m.ignoreCache=c$j,c$m.priority=c$g,c$b&&c$m.on("complete",c$b.caller,c$b.method,c$b.args),c$c&&c$m.on("progress",c$c.caller,c$c.method,c$c.args),c$p._resMap[c$a]=c$m,c$g=c$g<this._maxPriority?0<=c$g?c$g:0:this._maxPriority-1,this._resInfos[c$g].push(c$m),this._next())}return this},c$b._createLoad=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k){var c$l=this;if(null==c$h&&(c$h=2),null==c$i&&(c$i=!0),void 0===c$k&&(c$k=!1),c$b instanceof Array)return this._loadAssets(c$b,c$c,c$d,c$g,c$h,c$i,c$j);var c$m=c$ja.getRes(c$b);if(null!=c$m)c$z.timer.frameOnce(1,null,function(){c$d&&c$d.runWith(1),c$c&&c$c.runWith(c$m),c$l._loaderCount||c$l.event("complete")});else{var c$n=c$p._resMap[c$b];c$n?(c$c&&c$n._createListener("complete",c$c.caller,c$c.method,c$c.args,!1,!1),c$d&&c$n._createListener("progress",c$d.caller,c$d.method,c$d.args,!1,!1)):((c$n=this._infoPool.length?this._infoPool.pop():new c$o).url=c$b,c$n.clas=c$a,c$n.type=c$g,c$n.cache=c$i,c$n.group=c$j,c$n.ignoreCache=c$k,c$n.priority=c$h,c$c&&c$n.on("complete",c$c.caller,c$c.method,c$c.args),c$d&&c$n.on("progress",c$d.caller,c$d.method,c$d.args),c$p._resMap[c$b]=c$n,c$h=c$h<this._maxPriority?0<=c$h?c$h:0:this._maxPriority-1,this._resInfos[c$h].push(c$n),this._next())}return this},c$b._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var c$a=0;c$a<this._maxPriority;c$a++)for(var c$b=this._resInfos[c$a];0<c$b.length;){var c$c=c$b.shift();if(c$c)return this._doLoad(c$c)}this._loaderCount||this.event("complete")}},c$b._doLoad=function(c$b){this._loaderCount++;var c$c=this._loaders.length?this._loaders.pop():new c$ja;c$c.on("complete",null,c$g),c$c.on("progress",null,function(c$a){c$b.event("progress",c$a)}),c$c.on("error",null,function(c$a){c$g(null)});var c$d=this;function c$g(c$a){c$c.offAll(),c$c._data=null,c$c._customParse=!1,c$d._loaders.push(c$c),c$d._endLoad(c$b,c$a instanceof Array?[c$a]:c$a),c$d._loaderCount--,c$d._next()}c$c._class=c$b.clas,1<=c$b.priority?(c$c.priority=c$b.priority,c$c.realTime=!1):(c$c.priority=0,c$c.realTime=!0),c$c.load(c$b.url,c$b.type,c$b.cache,c$b.group,c$b.ignoreCache)},c$b._endLoad=function(c$a,c$b){var c$c=c$a.url;if(null==c$b){var c$d=this._failRes[c$c]||0;if(c$d<this.retryNum)return console.warn("[warn]Retry to load:",c$c),this._failRes[c$c]=c$d+1,void c$z.timer.once(this.retryDelay,this,this._addReTry,[c$a],!1);console.warn("[error]Failed to load:",c$c),this.event("error",c$c)}this._failRes[c$c]&&(this._failRes[c$c]=0),delete c$p._resMap[c$c],c$a.event("complete",c$b),c$a.offAll(),this._infoPool.push(c$a)},c$b._addReTry=function(c$a){this._resInfos[this._maxPriority-1].push(c$a),this._next()},c$b.clearRes=function(c$a,c$b){void 0===c$b&&(c$b=!1),c$ja.clearRes(c$a,c$b)},c$b.getRes=function(c$a){return c$ja.getRes(c$a)},c$b.cacheRes=function(c$a,c$b){c$ja.cacheRes(c$a,c$b)},c$b.clearTextureRes=function(c$a){c$ja.clearTextureRes(c$a)},c$b.setGroup=function(c$a,c$b){c$ja.setGroup(c$a,c$b)},c$b.clearResByGroup=function(c$a){c$ja.clearResByGroup(c$a)},c$b.clearUnLoaded=function(){for(var c$a=0;c$a<this._maxPriority;c$a++){for(var c$b=this._resInfos[c$a],c$c=c$b.length-1;-1<c$c;c$c--){var c$d=c$b[c$c];c$d&&(c$d.offAll(),this._infoPool.push(c$d))}c$b.length=0}this._loaderCount=0,c$p._resMap={}},c$b.cancelLoadByUrls=function(c$a){if(c$a)for(var c$b=0,c$c=c$a.length;c$b<c$c;c$b++)this.cancelLoadByUrl(c$a[c$b])},c$b.cancelLoadByUrl=function(c$a){for(var c$b=0;c$b<this._maxPriority;c$b++)for(var c$c=this._resInfos[c$b],c$d=c$c.length-1;-1<c$d;c$d--){var c$g=c$c[c$d];c$g&&c$g.url===c$a&&(c$c[c$d]=null,c$g.offAll(),this._infoPool.push(c$g))}c$p._resMap[c$a]&&delete c$p._resMap[c$a]},c$b._loadAssets=function(c$a,c$c,c$i,c$b,c$d,c$g,c$h){null==c$d&&(c$d=2),null==c$g&&(c$g=!0);for(var c$j=c$a.length,c$k=0,c$l=0,c$m=[],c$n=!0,c$o=0;c$o<c$j;c$o++){var c$p=c$a[c$o];if(!c$p)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+c$a);"string"==typeof c$p&&(c$p={url:c$p,type:c$b,size:1,priority:c$d}),c$p.size||(c$p.size=1),c$p.progress=0,c$l+=c$p.size,c$m.push(c$p);var c$q=c$i?c$u.create(null,c$t,[c$p],!1):null,c$r=c$c||c$i?c$u.create(null,c$s,[c$p]):null;this.load(c$p.url,c$r,c$q,c$p.type,null!=c$p.priority&&0<=c$p.priority?c$p.priority:2,c$g,c$p.group||c$h)}function c$s(c$a,c$b){c$k++,c$a.progress=1,c$b||(c$n=!1),c$k===c$j&&c$c&&c$c.runWith(c$n)}function c$t(c$a,c$b){if(null!=c$i){c$a.progress=c$b;for(var c$c=0,c$d=0;c$d<c$m.length;c$d++){var c$g=c$m[c$d];c$c+=c$g.size*c$g.progress}var c$h=c$c/c$l;c$i.runWith(c$h)}}return this},c$p.cacheRes=function(c$a,c$b){c$ja.cacheRes(c$a,c$b)},c$p._resMap={},c$k(c$p,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),c$p.__init$=function(){c$o=function(c$a){function c$b(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.priority=-1,c$b.__super.call(this)}return c$m(c$b,"",c$l),c$b}()},c$p}(),c$la=(function(c$a){function c$g(c$a){c$g.__super.call(this),c$a||(c$a=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var c$b=0,c$c=0,c$d=0;c$d<20;c$d++)c$d%5!=4?this._mat[c$b++]=c$a[c$d]:this._alpha[c$c++]=c$a[c$d];this._action=c$F.createFilterAction(32),this._action.data=this}c$m(c$g,"laya.filters.ColorFilter",c$t);var c$b=c$g.prototype;c$z.imps(c$b,{"laya.filters.IFilter":!0}),c$b.callNative=function(c$a){c$a._$P.cf=this;c$a.conchModel&&c$a.conchModel.setFilterMatrix&&c$a.conchModel.setFilterMatrix(this._mat,this._alpha)},c$q(0,c$b,"type",function(){return 32}),c$q(0,c$b,"action",function(){return this._action})}(),function(c$a){function c$d(c$a,c$b,c$c){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===c$b&&(c$b=0),c$d.__super.call(this),this._byteClass=c$c||c$P,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,c$a&&0<c$b&&c$b<65535&&this.connect(c$a,c$b)}c$m(c$d,"laya.net.Socket",c$l);var c$b=c$d.prototype;c$b.connect=function(c$a,c$b){var c$c="ws://"+c$a+":"+c$b;c$c="https:"==c$O.window.location.protocol?"wss://"+c$a+":"+c$b:"ws://"+c$a+":"+c$b,this.connectByUrl(c$c)},c$b.connectByUrl=function(c$a){var c$b=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new c$O.window.WebSocket(c$a,this.protocols):this._socket=new c$O.window.WebSocket(c$a),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(c$a){c$b._onOpen(c$a)},this._socket.onmessage=function(c$a){c$b._onMessage(c$a)},this._socket.onclose=function(c$a){c$b._onClose(c$a)},this._socket.onerror=function(c$a){c$b._onError(c$a)}},c$b.cleanSocket=function(){try{this._socket.close()}catch(c$a){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},c$b.close=function(){if(null!=this._socket)try{this._socket.close()}catch(c$a){}},c$b._onOpen=function(c$a){this._connected=!0,this.event("open",c$a)},c$b._onMessage=function(c$a){if(c$a&&c$a.data){var c$b=c$a.data;if(this.disableInput&&c$b)this.event("message",c$b);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var c$c=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,c$b&&("string"==typeof c$b?this._input.writeUTFBytes(c$b):this._input.writeArrayBuffer(c$b),this._addInputPosition=this._input.pos,this._input.pos=c$c),this.event("message",c$b)}}},c$b._onClose=function(c$a){this._connected=!1,this.event("close",c$a)},c$b._onError=function(c$a){this.event("error",c$a)},c$b.send=function(c$a){this._socket.send(c$a)},c$b.flush=function(){if(this._output&&0<this._output.length){var c$b;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(c$a){c$b=c$a}this._output.endian=this.endian,this._output.clear(),c$b&&this.event("error",c$b)}},c$q(0,c$b,"input",function(){return this._input}),c$q(0,c$b,"output",function(){return this._output}),c$q(0,c$b,"connected",function(){return this._connected}),c$q(0,c$b,"endian",function(){return this._endian},function(c$a){this._endian=c$a,null!=this._input&&(this._input.endian=c$a),null!=this._output&&(this._output.endian=c$a)}),c$d.LITTLE_ENDIAN="littleEndian",c$d.BIG_ENDIAN="bigEndian"}(),function(c$a){function c$j(){c$j.__super.call(this),this._$1__id=++c$j._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(c$j._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,c$N.currentResourceManager&&c$N.currentResourceManager.addResource(this)}c$m(c$j,"laya.resource.Resource",c$l);var c$b=c$j.prototype;return c$z.imps(c$b,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),c$b._setUrl=function(c$a){var c$b;this._url!==c$a&&(this._url&&((c$b=c$j._urlResourcesMap[this._url]).splice(c$b.indexOf(this),1),0===c$b.length&&delete c$j._urlResourcesMap[this._url]),c$a&&((c$b=c$j._urlResourcesMap[c$a])||(c$j._urlResourcesMap[c$a]=c$b=[]),c$b.push(this)),this._url=c$a)},c$b._getGroup=function(){return this._group},c$b._setGroup=function(c$a){var c$b;this._group!==c$a&&(this._group&&((c$b=c$j._groupResourcesMap[this._group]).splice(c$b.indexOf(this),1),0===c$b.length&&delete c$j._groupResourcesMap[this._group]),c$a&&((c$b=c$j._groupResourcesMap[c$a])||(c$j._groupResourcesMap[c$a]=c$b=[]),c$b.push(this)),this._group=c$a)},c$b._addReference=function(){this._referenceCount++},c$b._removeReference=function(){this._referenceCount--},c$b._clearReference=function(){this._referenceCount=0},c$b._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},c$b.recreateResource=function(){this.completeCreate()},c$b.disposeResource=function(){},c$b.activeResource=function(c$a){void 0===c$a&&(c$a=!1),this._lastUseFrameCount=c$X.loopCount,!this._destroyed&&this.__loaded&&(this._released||c$a)&&this.recreateResource()},c$b.releaseResource=function(c$a){return void 0===c$a&&(c$a=!0),!(!c$a&&this.lock)&&(!(this._released&&!c$a)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},c$b.onAsynLoaded=function(c$a,c$b,c$c){throw new Error("Resource: must override this function!")},c$b.destroy=function(){var c$a;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete c$j._idResourcesMap[this.id],this._url&&((c$a=c$j._urlResourcesMap[this._url])&&(c$a.splice(c$a.indexOf(this),1),0===c$a.length&&delete c$j._urlResourcesMap[this.url]),c$ja.clearRes(this._url),this.__loaded||c$F.cancelLoadByUrl(this._url)),this._group&&((c$a=c$j._groupResourcesMap[this._group]).splice(c$a.indexOf(this),1),0===c$a.length&&delete c$j._groupResourcesMap[this.url]))},c$b.completeCreate=function(){this._released=!1,this.event("recovered",this)},c$b.dispose=function(){this.destroy()},c$q(0,c$b,"memorySize",function(){return this._memorySize},function(c$a){var c$b=c$a-this._memorySize;this._memorySize=c$a,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,c$b),this.resourceManager&&this.resourceManager.addSize(c$b)}),c$q(0,c$b,"_loaded",null,function(c$a){this.__loaded=c$a}),c$q(0,c$b,"loaded",function(){return this.__loaded}),c$q(0,c$b,"id",function(){return this._$1__id}),c$q(0,c$b,"destroyed",function(){return this._destroyed}),c$q(0,c$b,"group",function(){return this._getGroup()},function(c$a){this._setGroup(c$a)}),c$q(0,c$b,"resourceManager",function(){return this._resourceManager}),c$q(0,c$b,"url",function(){return this._url}),c$q(0,c$b,"released",function(){return this._released}),c$q(0,c$b,"referenceCount",function(){return this._referenceCount}),c$j.getResourceByID=function(c$a){return c$j._idResourcesMap[c$a]},c$j.getResourceByURL=function(c$a,c$b){return void 0===c$b&&(c$b=0),null==c$j._urlResourcesMap[c$a]?null:c$j._urlResourcesMap[c$a][c$b]},c$j.getResourceCountByURL=function(c$a){return c$j._urlResourcesMap[c$a].length},c$j.destroyUnusedResources=function(c$a){var c$b;if(c$a){var c$c=c$j._groupResourcesMap[c$a];if(c$c)for(var c$d=c$c.slice(),c$g=0,c$h=c$d.length;c$g<c$h;c$g++)(c$b=c$d[c$g]).lock||0!==c$b._referenceCount||c$b.destroy()}else for(var c$i in c$j._idResourcesMap)(c$b=c$j._idResourcesMap[c$i]).lock||0!==c$b._referenceCount||c$b.destroy()},c$j._uniqueIDCounter=0,c$j._idResourcesMap={},c$j._urlResourcesMap={},c$j._groupResourcesMap={},c$j}()),c$ma=function(c$a){function c$C(c$a,c$b){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,c$C.__super.call(this),c$a&&null!=c$a._addReference&&c$a._addReference(),this.setTo(c$a,c$b)}c$m(c$C,"laya.resource.Texture",c$l);var c$b=c$C.prototype;return c$b._setUrl=function(c$a){this.url=c$a},c$b.setTo=function(c$a,c$b){if(c$a instanceof c$i.HTMLElement){var c$c=c$va.create("2D",c$a);this.bitmap=c$c}else this.bitmap=c$a;if(this.uv=c$b||c$C.DEF_UV,c$a){this._w=c$a.width,this._h=c$a.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var c$d=this;if(this._loaded)c$F.addToAtlas&&c$F.addToAtlas(c$d);else{var c$g=c$a;c$g instanceof laya.resource.HTMLImage&&c$g.image&&c$g.image.addEventListener("load",function(c$a){c$F.addToAtlas&&c$F.addToAtlas(c$d)},!1)}}},c$b.active=function(){this.bitmap&&this.bitmap.activeResource()},c$b.destroy=function(c$a){if(void 0===c$a&&(c$a=!1),this.alphaTexture&&(this.alphaTexture.destroy(c$a),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var c$b=this.bitmap;c$a?(c$J.isConchApp&&c$b.source&&c$b.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,c$b.dispose(),c$b._clearReference()):(c$b._removeReference(),0==c$b.referenceCount&&(c$J.isConchApp&&c$b.source&&c$b.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,c$b.dispose())),this.url&&this===c$z.loader.getRes(this.url)&&c$z.loader.clearRes(this.url,c$a),this._loaded=!1}},c$b.load=function(c$a){var c$b=this;this._loaded=!1,c$a=c$I.customFormat(c$a);var c$c=this.bitmap||(this.bitmap=c$ya.create(c$a));c$c.uri=c$a,c$c&&c$c._addReference();var c$d=this;c$c.onload=function(){c$c.onload=null,c$d._loaded=!0,c$b.sourceWidth=c$b._w=c$c.width,c$b.sourceHeight=c$b._h=c$c.height,c$d.event("loaded",this),c$F.addToAtlas&&c$F.addToAtlas(c$d)}},c$b.addTextureToAtlas=function(c$a){c$F.addTextureToAtlas(this)},c$b.getPixels=function(c$a,c$b,c$c,c$d){if(c$J.isConchApp){var c$g=this.bitmap;if(c$g.source&&c$g.source.getImageData){var c$h=c$g.source.getImageData(c$a,c$b,c$c,c$d),c$i=new Uint8Array(c$h);return Array.from(c$i)}return null}return c$J.isWebGL?c$F.getTexturePixels(this,c$a,c$b,c$c,c$d):(c$O.canvas.size(c$c,c$d),c$O.canvas.clear(),c$O.context.drawTexture(this,-c$a,-c$b,this.width,this.height,0,0),c$O.context.getImageData(0,0,c$c,c$d).data)},c$b.onAsynLoaded=function(c$a,c$b){if(c$b){if("function"!=typeof c$b._addReference)throw new Error("bitmap._addReference is not a function. "+c$b.className+" "+typeof c$b._addReference+" "+c$b.constructor);c$b._addReference()}this.setTo(c$b,this.uv),this._loaded&&this.event("loaded",this)},c$q(0,c$b,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),c$q(0,c$b,"loaded",function(){return this._loaded}),c$q(0,c$b,"released",function(){return!this.bitmap||this.bitmap.released}),c$q(0,c$b,"width",function(){return this._w?this._w:this.uv&&this.uv!==c$C.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(c$a){this._w=c$a,this.sourceWidth||(this.sourceWidth=c$a)}),c$q(0,c$b,"repeat",function(){return!c$J.isWebGL||!this.bitmap||this.bitmap.repeat},function(c$a){c$a&&c$J.isWebGL&&this.bitmap&&(this.bitmap.repeat=c$a)&&(this.bitmap.enableMerageInAtlas=!1)}),c$q(0,c$b,"height",function(){return this._h?this._h:this.uv&&this.uv!==c$C.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(c$a){this._h=c$a,this.sourceHeight||(this.sourceHeight=c$a)}),c$q(0,c$b,"isLinearSampling",function(){return!c$J.isWebGL||9728!=this.bitmap.minFifter},function(c$a){!c$a&&c$J.isWebGL&&(c$a||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),c$C.moveUV=function(c$a,c$b,c$c){for(var c$d=0;c$d<8;c$d+=2)c$c[c$d]+=c$a,c$c[c$d+1]+=c$b;return c$c},c$C.create=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k){void 0===c$h&&(c$h=0),void 0===c$i&&(c$i=0),void 0===c$j&&(c$j=0),void 0===c$k&&(c$k=0);var c$l=c$a instanceof laya.resource.Texture,c$m=c$l?c$a.uv:c$C.DEF_UV,c$n=c$l?c$a.bitmap:c$a,c$o=c$F.isAtlas(c$n);if(c$o){var c$p=c$n._atlaser,c$q=c$a._atlasID;if(-1==c$q)throw new Error("create texture error");c$n=c$p._inAtlasTextureBitmapValue[c$q],c$m=c$p._inAtlasTextureOriUVValue[c$q]}var c$r=new c$C(c$n,null);c$n.width&&c$b+c$d>c$n.width&&(c$d=c$n.width-c$b),c$n.height&&c$c+c$g>c$n.height&&(c$g=c$n.height-c$c),c$r.width=c$d,c$r.height=c$g,c$r.offsetX=c$h,c$r.offsetY=c$i,c$r.sourceWidth=c$j||c$d,c$r.sourceHeight=c$k||c$g;var c$s=1/c$n.width,c$t=1/c$n.height;c$b*=c$s,c$c*=c$t,c$d*=c$s,c$g*=c$t;var c$u=c$r.uv[0],c$v=c$r.uv[1],c$w=c$r.uv[4],c$x=c$r.uv[5],c$y=c$w-c$u,c$z=c$x-c$v,c$A=c$C.moveUV(c$m[0],c$m[1],[c$b,c$c,c$b+c$d,c$c,c$b+c$d,c$c+c$g,c$b,c$c+c$g]);c$r.uv=[c$u+c$A[0]*c$y,c$v+c$A[1]*c$z,c$w-(1-c$A[2])*c$y,c$v+c$A[3]*c$z,c$w-(1-c$A[4])*c$y,c$x-(1-c$A[5])*c$z,c$u+c$A[6]*c$y,c$x-(1-c$A[7])*c$z],c$o&&c$r.addTextureToAtlas();var c$B=c$n.scaleRate;return c$B&&1!=c$B?(c$r.sourceWidth/=c$B,c$r.sourceHeight/=c$B,c$r.width/=c$B,c$r.height/=c$B,c$r.scaleRate=c$B,c$r.offsetX/=c$B,c$r.offsetY/=c$B):c$r.scaleRate=1,c$r},c$C.createFromTexture=function(c$a,c$b,c$c,c$d,c$g){var c$h=c$a.scaleRate;1!=c$h&&(c$b*=c$h,c$c*=c$h,c$d*=c$h,c$g*=c$h);var c$i=c$B.TEMP.setTo(c$b-c$a.offsetX,c$c-c$a.offsetY,c$d,c$g),c$j=c$i.intersection(c$C._rect1.setTo(0,0,c$a.width,c$a.height),c$C._rect2);if(!c$j)return null;var c$k=c$C.create(c$a,c$j.x,c$j.y,c$j.width,c$j.height,c$j.x-c$i.x,c$j.y-c$i.y,c$d,c$g);if(c$k.bitmap&&c$k.bitmap._removeReference)return c$k.bitmap._removeReference(),c$k;var c$l="bitmap:"+(c$k.bitmap?c$k.bitmap.constructor?c$k.bitmap.constructor.name:c$k.bitmap.__className:"")+", url:"+(c$a.url+" | "+(c$k.bitmap?c$k.bitmap.url:c$a.url))+", x="+c$b+",y="+c$c+",width="+c$d+",height="+c$g+", result="+(c$j?c$j.x+","+c$j.y+","+c$j.width+","+c$j.height:"null")+", rect="+c$i.x+","+c$i.y+","+c$i.width+","+c$i.height;throw new Error("报错：bitmap._removeReference is not a function  "+c$l)},c$C.DEF_UV=[0,0,1,0,1,1,0,1],c$C.INV_UV=[0,1,1,1,1,0,0,0],c$C._rect1=new c$B,c$C._rect2=new c$B,c$C}(),c$a=function(c$a){var c$j;function c$h(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,c$h.__super.call(this)}c$m(c$h,"laya.utils.TimeLine",c$l);var c$b=c$h.prototype;return c$b.to=function(c$a,c$b,c$c,c$d,c$g){return void 0===c$g&&(c$g=0),this._create(c$a,c$b,c$c,c$d,c$g,!0)},c$b.from=function(c$a,c$b,c$c,c$d,c$g){return void 0===c$g&&(c$g=0),this._create(c$a,c$b,c$c,c$d,c$g,!1)},c$b._create=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i=c$W.getItemByClass("tweenData",c$j);return c$i.isTo=c$h,c$i.type=0,c$i.target=c$a,c$i.duration=c$c,c$i.data=c$b,c$i.startTime=this._startTime+c$g,c$i.endTime=c$i.startTime+c$i.duration,c$i.ease=c$d,this._startTime=Math.max(c$i.endTime,this._startTime),this._tweenDataList.push(c$i),this._startTimeSort=!0,this._endTimeSort=!0,this},c$b.addLabel=function(c$a,c$b){var c$c=c$W.getItemByClass("tweenData",c$j);return c$c.type=1,c$c.data=c$a,c$c.endTime=c$c.startTime=this._startTime+c$b,this._labelDic||(this._labelDic={}),this._labelDic[c$a]=c$c,this._tweenDataList.push(c$c),this},c$b.removeLabel=function(c$a){if(this._labelDic&&this._labelDic[c$a]){var c$b=this._labelDic[c$a];if(c$b){var c$c=this._tweenDataList.indexOf(c$b);-1<c$c&&this._tweenDataList.splice(c$c,1)}delete this._labelDic[c$a]}},c$b.gotoTime=function(c$a){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var c$b,c$c,c$d,c$g;for(var c$h in this._firstTweenDic)if(c$c=this._firstTweenDic[c$h])for(var c$i in c$c)c$c.diyTarget.hasOwnProperty(c$i)&&(c$c.diyTarget[c$i]=c$c[c$i]);for(c$h in this._tweenDic)(c$b=this._tweenDic[c$h]).clear(),delete this._tweenDic[c$h];if(this._index=0,this._gidIndex=0,this._currTime=c$a,this._lastTime=c$O.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=c$d=this._tweenDataList.concat(),c$d.sort(function(c$a,c$b){return c$a.endTime>c$b.endTime?1:c$a.endTime<c$b.endTime?-1:0})}else c$d=this._endTweenDataList;for(var c$j=0,c$k=c$d.length;c$j<c$k;c$j++)if(0==(c$g=c$d[c$j]).type){if(!(c$a>=c$g.endTime))break;this._index=Math.max(this._index,c$j+1);var c$l=c$g.data;if(c$g.isTo)for(var c$m in c$l)c$g.target[c$m]=c$l[c$m]}for(c$j=0,c$k=this._tweenDataList.length;c$j<c$k;c$j++)0==(c$g=this._tweenDataList[c$j]).type&&c$a>=c$g.startTime&&c$a<c$g.endTime&&(this._index=Math.max(this._index,c$j+1),this._gidIndex++,(c$b=c$W.getItemByClass("tween",c$Z))._create(c$g.target,c$g.data,c$g.duration,c$g.ease,c$u.create(this,this._animComplete,[this._gidIndex]),0,!1,c$g.isTo,!0,!1),c$b.setStartTime(this._currTime-(c$a-c$g.startTime)),c$b._updateEase(this._currTime),c$b.gid=this._gidIndex,this._tweenDic[this._gidIndex]=c$b)}},c$b.gotoLabel=function(c$a){if(null!=this._labelDic){var c$b=this._labelDic[c$a];c$b&&this.gotoTime(c$b.startTime)}},c$b.pause=function(){c$z.timer.clear(this,this._update)},c$b.resume=function(){this.play(this._currTime,this._loopKey)},c$b.play=function(c$a,c$b){if(void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(c$a,c$b){return c$a.startTime>c$b.startTime?1:c$a.startTime<c$b.startTime?-1:0});for(var c$c=0,c$d=this._tweenDataList.length;c$c<c$d;c$c++){var c$g=this._tweenDataList[c$c];if(null!=c$g&&0==c$g.type){var c$h=c$g.target,c$i=c$h.$_GID||(c$h.$_GID=c$$.getGID()),c$j=null;for(var c$k in null==this._firstTweenDic[c$i]?((c$j={}).diyTarget=c$h,this._firstTweenDic[c$i]=c$j):c$j=this._firstTweenDic[c$i],c$g.data)null==c$j[c$k]&&(c$j[c$k]=c$h[c$k])}}}"string"==typeof c$a?this.gotoLabel(c$a):this.gotoTime(c$a),this._loopKey=c$b,this._lastTime=c$O.now(),c$z.timer.frameLoop(1,this,this._update)}},c$b._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var c$a in this._tweenDic)(c$b=this._tweenDic[c$a]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var c$b,c$c=c$O.now(),c$d=c$c-this._lastTime,c$g=this._currTime+=c$d*this.scale;for(c$a in this._lastTime=c$c,this._tweenDic)(c$b=this._tweenDic[c$a])._updateEase(c$g);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var c$h=this._tweenDataList[this._index];c$g>=c$h.startTime&&(this._index++,0==c$h.type?(this._gidIndex++,(c$b=c$W.getItemByClass("tween",c$Z))._create(c$h.target,c$h.data,c$h.duration,c$h.ease,c$u.create(this,this._animComplete,[this._gidIndex]),0,!1,c$h.isTo,!0,!1),c$b.setStartTime(c$g),c$b.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=c$b)._updateEase(c$g)):this.event("label",c$h.data))}},c$b._animComplete=function(c$a){this._tweenDic[c$a]&&delete this._tweenDic[c$a]},c$b._complete=function(){this.event("complete")},c$b.reset=function(){var c$a;if(this._labelDic)for(c$a in this._labelDic)delete this._labelDic[c$a];for(c$a in this._tweenDic)this._tweenDic[c$a].clear(),delete this._tweenDic[c$a];for(c$a in this._firstTweenDic)delete this._firstTweenDic[c$a];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var c$b,c$c=0;for(c$b=this._tweenDataList.length,c$c=0;c$c<c$b;c$c++)this._tweenDataList[c$c]&&this._tweenDataList[c$c].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,c$z.timer.clear(this,this._update)},c$b.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},c$q(0,c$b,"index",function(){return this._frameIndex},function(c$a){this._frameIndex=c$a,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),c$q(0,c$b,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),c$h.to=function(c$a,c$b,c$c,c$d,c$g){return void 0===c$g&&(c$g=0),(new c$h).to(c$a,c$b,c$c,c$d,c$g)},c$h.from=function(c$a,c$b,c$c,c$d,c$g){return void 0===c$g&&(c$g=0),(new c$h).from(c$a,c$b,c$c,c$d,c$g)},c$h.__init$=function(){c$j=function(){function c$a(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return c$m(c$a,""),c$a.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,c$W.recover("tweenData",this)},c$a}()},c$h}(),c$na=function(c$g){function c$c(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,c$c.__super.call(this),this._style=c$j.EMPTY}c$m(c$c,"laya.display.Sprite",c$g);var c$a=c$c.prototype;return c$z.imps(c$a,{"laya.display.ILayout":!0}),c$a.createConchModel=function(){return new ConchNode},c$a.destroy=function(c$a){if(void 0===c$a&&(c$a=!0),this._releaseMem(),!this._destroyed){this.filters=null;var c$b=this.mask;c$b&&(this.mask=null,c$b.destroy(c$a))}c$g.prototype.destroy.call(this,c$a),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},c$a.updateZOrder=function(){c$$.updateOrder(this._childs)&&this.repaint()},c$a.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},c$a.setBounds=function(c$a){this._set$P("uBounds",c$a)},c$a.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new c$B),c$B._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},c$a.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new c$B),c$B._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},c$a._boundPointsToParent=function(c$a){void 0===c$a&&(c$a=!1);var c$b=0,c$c=0;this._style&&(c$b=this._style._tf.translateX,c$c=this._style._tf.translateY,c$a=c$a||0!==this._style._tf.rotate,this._style.scrollRect&&(c$b+=this._style.scrollRect.x,c$c+=this._style.scrollRect.y));var c$d=this._getBoundPointsM(c$a);if(!c$d||c$d.length<1)return c$d;if(8!=c$d.length&&(c$d=c$a?c$x.scanPList(c$d):c$B._getWrapRec(c$d,c$B.TEMP)._getBoundPoints()),!this.transform)return c$$.transPointList(c$d,this._x-c$b,this._y-c$c),c$d;var c$g=c$A.TEMP,c$h=0,c$i=c$d.length;for(c$h=0;c$h<c$i;c$h+=2)c$g.x=c$d[c$h],c$g.y=c$d[c$h+1],this.toParentPoint(c$g),c$d[c$h]=c$g.x,c$d[c$h+1]=c$g.y;return c$d},c$a.getGraphicBounds=function(c$a){return void 0===c$a&&(c$a=!1),this._graphics?this._graphics.getBounds(c$a):c$B.TEMP.setTo(0,0,0,0)},c$a._getBoundPointsM=function(c$a){if(void 0===c$a&&(c$a=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var c$b=c$$.clearArray(this._$P.temBM),c$c=c$B.TEMP;return c$c.copyFrom(this.scrollRect),c$$.concatArray(c$b,c$c._getBoundPoints()),c$b}for(var c$d,c$g,c$h,c$i=this._graphics?this._graphics.getBoundPoints():c$$.clearArray(this._$P.temBM),c$j=0,c$k=(c$h=this._childs).length;c$j<c$k;c$j++)(c$d=c$h[c$j])instanceof laya.display.Sprite&&1==c$d.visible&&(c$g=c$d._boundPointsToParent(c$a))&&(c$i=c$i?c$$.concatArray(c$i,c$g):c$g);return c$i},c$a.getStyle=function(){return this._style===c$j.EMPTY&&(this._style=new c$j),this._style},c$a.setStyle=function(c$a){this._style=c$a},c$a._adjustTransform=function(){this._tfChanged=!1;var c$a,c$b=this._style._tf,c$c=c$b.scaleX,c$d=c$b.scaleY;if(c$b.rotate||1!==c$c||1!==c$d||c$b.skewX||c$b.skewY){(c$a=this._transform||(this._transform=c$G.create())).bTransform=!0;var c$g=.0174532922222222*(c$b.rotate-c$b.skewX),c$h=.0174532922222222*(c$b.rotate+c$b.skewY),c$i=Math.cos(c$h),c$j=Math.sin(c$h),c$k=Math.sin(c$g),c$l=Math.cos(c$g);return c$a.a=c$c*c$i,c$a.b=c$c*c$j,c$a.c=-c$d*c$k,c$a.d=c$d*c$l,c$a.tx=c$a.ty=0,c$a}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,c$a},c$a.pos=function(c$a,c$b,c$c){if(void 0===c$c&&(c$c=!1),this._x!==c$a||this._y!==c$b){if(this.destroyed)return this;if(c$c){this._x=c$a,this._y=c$b,this.conchModel&&this.conchModel.pos(this._x,this._y);var c$d=this._parent;c$d&&0===c$d._repaint&&(c$d._repaint=1,c$d.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=c$a,this.y=c$b}return this},c$a.pivot=function(c$a,c$b){return this.pivotX=c$a,this.pivotY=c$b,this},c$a.size=function(c$a,c$b){return this.width=c$a,this.height=c$b,this},c$a.scale=function(c$a,c$b,c$c){void 0===c$c&&(c$c=!1);var c$d=this.getStyle(),c$g=c$d._tf;if(c$g.scaleX!=c$a||c$g.scaleY!=c$b){if(this.destroyed)return this;if(c$c){c$d.setScale(c$a,c$b),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(c$a,c$b),this._renderType|=4;var c$h=this._parent;c$h&&0===c$h._repaint&&(c$h._repaint=1,c$h.parentRepaint())}else this.scaleX=c$a,this.scaleY=c$b}return this},c$a.skew=function(c$a,c$b){return this.skewX=c$a,this.skewY=c$b,this},c$a.render=function(c$a,c$b,c$c){c$X.spriteCount++,c$L.renders[this._renderType]._fun(this,c$a,c$b+this._x,c$c+this._y),this._repaint=0},c$a.drawToCanvas=function(c$a,c$b,c$c,c$d){if(c$J.isConchNode){var c$g=c$va.create("2D");return new c$K(c$a,c$b,c$g).ctx.setCanvasType(1),this.conchModel.drawToCanvas(c$g.source,c$c,c$d),c$g}return c$F.drawToCanvas(this,this._renderType,c$a,c$b,c$c,c$d)},c$a.customRender=function(c$a,c$b,c$c){this._renderType|=1024},c$a._applyFilters=function(){var c$a;if(!c$J.isWebGL&&((c$a=this._$P.filters)&&!(c$a.length<1)))for(var c$b=0,c$c=c$a.length;c$b<c$c;c$b++)c$a[c$b].action.apply(this._$P.cacheCanvas)},c$a._isHaveGlowFilter=function(){var c$a,c$b=0;if(this.filters)for(c$b=0;c$b<this.filters.length;c$b++)if(8==this.filters[c$b].type)return!0;for(c$b=0,c$a=this._childs.length;c$b<c$a;c$b++)if(this._childs[c$b]._isHaveGlowFilter())return!0;return!1},c$a.localToGlobal=function(c$a,c$b){void 0===c$b&&(c$b=!1),!0===c$b&&(c$a=new c$A(c$a.x,c$a.y));for(var c$c=this;c$c&&c$c!=c$z.stage;)c$a=c$c.toParentPoint(c$a),c$c=c$c.parent;return c$a},c$a.globalToLocal=function(c$a,c$b){void 0===c$b&&(c$b=!1),c$b&&(c$a=new c$A(c$a.x,c$a.y));for(var c$c=this,c$d=[];c$c&&c$c!=c$z.stage;)c$d.push(c$c),c$c=c$c.parent;for(var c$g=c$d.length-1;0<=c$g;)c$a=(c$c=c$d[c$g]).fromParentPoint(c$a),c$g--;return c$a},c$a.toParentPoint=function(c$a){if(!c$a)return c$a;c$a.x-=this.pivotX,c$a.y-=this.pivotY,this.transform&&this._transform.transformPoint(c$a),c$a.x+=this._x,c$a.y+=this._y;var c$b=this._style.scrollRect;return c$b&&(c$a.x-=c$b.x,c$a.y-=c$b.y),c$a},c$a.fromParentPoint=function(c$a){if(!c$a)return c$a;c$a.x-=this._x,c$a.y-=this._y;var c$b=this._style.scrollRect;return c$b&&(c$a.x+=c$b.x,c$a.y+=c$b.y),this.transform&&this._transform.invertTransformPoint(c$a),c$a.x+=this.pivotX,c$a.y+=this.pivotY,c$a},c$a.on=function(c$a,c$b,c$c,c$d){return 1!==this._mouseEnableState&&this.isMouseEvent(c$a)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(c$a,c$b,c$c,c$d,!1)):c$g.prototype.on.call(this,c$a,c$b,c$c,c$d)},c$a.once=function(c$a,c$b,c$c,c$d){return 1!==this._mouseEnableState&&this.isMouseEvent(c$a)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(c$a,c$b,c$c,c$d,!0)):c$g.prototype.once.call(this,c$a,c$b,c$c,c$d)},c$a._$2__onDisplay=function(){if(1!==this._mouseEnableState){var c$a=this;for(c$a=c$a.parent;c$a&&1!==c$a._mouseEnableState&&!c$a._getBit(2);)c$a.mouseEnabled=!0,c$a._setBit(2,!0),c$a=c$a.parent}},c$a.loadImage=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i=this;return void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0),void 0===c$d&&(c$d=0),void 0===c$g&&(c$g=0),this.graphics.loadImage(c$a,c$b,c$c,c$d,c$g,function(c$a){c$i.destroyed||(c$i.size(c$b+(c$d||c$a.width),c$c+(c$g||c$a.height)),c$i.repaint(),c$h&&c$h.runWith(c$a))}),this},c$a.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},c$a._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},c$a._childChanged=function(c$a){this._childs.length?this._renderType|=2048:this._renderType&=-2049,c$a&&this._get$P("hasZorder")&&c$z.timer.callLater(this,this.updateZOrder),this.repaint()},c$a.parentRepaint=function(){var c$a=this._parent;c$a&&0===c$a._repaint&&(c$a._repaint=1,c$a.parentRepaint())},c$a.startDrag=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){void 0===c$b&&(c$b=!1),void 0===c$c&&(c$c=0),void 0===c$d&&(c$d=300),void 0===c$h&&(c$h=!1),void 0===c$i&&(c$i=.92),this._$P.dragging||this._set$P("dragging",new c$T),this._$P.dragging.start(this,c$a,c$b,c$c,c$d,c$g,c$h,c$i)},c$a.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},c$a._releaseMem=function(){if(this._$P){var c$a=this._$P.cacheCanvas;c$a&&c$a.ctx&&(c$W.recover("RenderContext",c$a.ctx),c$a.ctx.canvas.size(0,0),c$a.ctx=null);var c$b=this._$P._filterCache;c$b&&(c$b.destroy(),c$b.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},c$a._setDisplay=function(c$a){c$a||this._releaseMem(),c$g.prototype._setDisplay.call(this,c$a)},c$a.hitTestPoint=function(c$a,c$b){var c$c=this.globalToLocal(c$A.TEMP.setTo(c$a,c$b));return c$a=c$c.x,c$b=c$c.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?c$B.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(c$a,c$b)},c$a.getMousePoint=function(){return this.globalToLocal(c$A.TEMP.setTo(c$z.stage.mouseX,c$z.stage.mouseY))},c$a._getWords=function(){return null},c$a._addChildsToLayout=function(c$a){var c$b=this._getWords();if(null==c$b&&0==this._childs.length)return!1;if(c$b)for(var c$c=0,c$d=c$b.length;c$c<c$d;c$c++)c$a.push(c$b[c$c]);c$c=0;for(var c$g=this._childs.length;c$c<c$g;++c$c){var c$h=this._childs[c$c];c$h._style._enableLayout()&&c$h._addToLayout(c$a)}return!0},c$a._addToLayout=function(c$a){this._style.absolute||(this._style.block?c$a.push(this):this._addChildsToLayout(c$a)&&(this.x=this.y=0))},c$a._isChar=function(){return!1},c$a._getCSSStyle=function(){return this._style.getCSSStyle()},c$a._setAttributes=function(c$a,c$b){switch(c$a){case"x":this.x=parseFloat(c$b);break;case"y":this.y=parseFloat(c$b);break;case"width":this.width=parseFloat(c$b);break;case"height":this.height=parseFloat(c$b);break;default:this[c$a]=c$b}},c$a._layoutLater=function(){this.parent&&this.parent._layoutLater()},c$q(0,c$a,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(c$a){this._optimizeScrollRect!=c$a&&(this._optimizeScrollRect=c$a,this.conchModel&&this.conchModel.optimizeScrollRect(c$a))}),c$q(0,c$a,"customRenderEnable",null,function(c$a){if(c$a&&(this._renderType|=1024,c$J.isConchNode)){c$c.CustomList.push(this);var c$b=new c$va("2d");c$b._setContext(new CanvasRenderingContext2D),this.customContext=new c$K(0,0,c$b),c$b.context.setCanvasType&&c$b.context.setCanvasType(2),this.conchModel.custom(c$b.context)}}),c$q(0,c$a,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(c$a){this.cacheAs=c$a?this._$P.hasFilter?"none":"normal":"none"}),c$q(0,c$a,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(c$a){var c$b=this._$P.cacheCanvas;if(c$a!==(c$b?c$b.type:"none")){if("none"!==c$a)this._getBit(1)||this._setUpNoticeType(1),c$b||(c$b=this._set$P("cacheCanvas",c$W.getItemByClass("cacheCanvas",Object))),c$b.type=c$a,c$b.reCache=!0,this._renderType|=16,"bitmap"==c$a&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(c$b){var c$c=c$b;c$c&&c$c.ctx&&(c$W.recover("RenderContext",c$c.ctx),c$c.ctx.canvas.size(0,0),c$c.ctx=null),c$W.recover("cacheCanvas",c$b)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),c$q(0,c$a,"zOrder",function(){return this._zOrder},function(c$a){this._zOrder!=c$a&&(this._zOrder=c$a,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(c$a),this._parent&&(c$a&&this._parent._set$P("hasZorder",!0),c$z.timer.callLater(this._parent,this.updateZOrder)))}),c$q(0,c$a,"rotation",function(){return this._style._tf.rotate},function(c$a){var c$b=this.getStyle();if(c$b._tf.rotate!==c$a){c$b.setRotate(c$a),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(c$a),this._renderType|=4;var c$c=this._parent;c$c&&0===c$c._repaint&&(c$c._repaint=1,c$c.parentRepaint())}}),c$q(0,c$a,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(c$a){this._width!==c$a&&(this._width=c$a,this.conchModel&&this.conchModel.size(c$a,this._height),this.repaint())}),c$q(0,c$a,"x",function(){return this._x},function(c$a){if(this._x!==c$a){if(this.destroyed)return;this._x=c$a,this.conchModel&&this.conchModel.pos(c$a,this._y);var c$b=this._parent;c$b&&0===c$b._repaint&&(c$b._repaint=1,c$b.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),c$q(0,c$a,"globalScaleY",function(){for(var c$a=1,c$b=this;c$b&&c$b!==c$z.stage;)c$a*=c$b.scaleY,c$b=c$b.parent;return c$a}),c$q(0,c$a,"hitArea",function(){return this._$P.hitArea},function(c$a){this._set$P("hitArea",c$a)}),c$q(0,c$a,"staticCache",function(){return this._$P.staticCache},function(c$a){this._set$P("staticCache",c$a),c$a||this.reCache()}),c$q(0,c$a,"texture",function(){return this._texture},function(c$a){this._texture!=c$a&&(this._texture=c$a,this.graphics.cleanByTexture(c$a,0,0))}),c$q(0,c$a,"y",function(){return this._y},function(c$a){if(this._y!==c$a){if(this.destroyed)return;this._y=c$a,this.conchModel&&this.conchModel.pos(this._x,c$a);var c$b=this._parent;c$b&&0===c$b._repaint&&(c$b._repaint=1,c$b.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),c$q(0,c$a,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(c$a){this._height!==c$a&&(this._height=c$a,this.conchModel&&this.conchModel.size(this._width,c$a),this.repaint())}),c$q(0,c$a,"blendMode",function(){return this._style.blendMode},function(c$a){this.getStyle().blendMode=c$a,this.conchModel&&this.conchModel.blendMode(c$a),c$a&&"source-over"!=c$a?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),c$q(0,c$a,"scaleX",function(){return this._style._tf.scaleX},function(c$a){var c$b=this.getStyle();if(c$b._tf.scaleX!==c$a){c$b.setScaleX(c$a),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(c$a,c$b._tf.scaleY),this._renderType|=4;var c$c=this._parent;c$c&&0===c$c._repaint&&(c$c._repaint=1,c$c.parentRepaint())}}),c$q(0,c$a,"scaleY",function(){return this._style._tf.scaleY},function(c$a){var c$b=this.getStyle();if(c$b._tf.scaleY!==c$a){c$b.setScaleY(c$a),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(c$b._tf.scaleX,c$a),this._renderType|=4;var c$c=this._parent;c$c&&0===c$c._repaint&&(c$c._repaint=1,c$c.parentRepaint())}}),c$q(0,c$a,"stage",function(){return c$z.stage}),c$q(0,c$a,"skewX",function(){return this._style._tf.skewX},function(c$a){var c$b=this.getStyle();if(c$b._tf.skewX!==c$a){c$b.setSkewX(c$a),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(c$a,c$b._tf.skewY),this._renderType|=4;var c$c=this._parent;c$c&&0===c$c._repaint&&(c$c._repaint=1,c$c.parentRepaint())}}),c$q(0,c$a,"scrollRect",function(){return this._style.scrollRect},function(c$a){this.getStyle().scrollRect=c$a,this.repaint(),c$a?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(c$a.x,c$a.y,c$a.width,c$a.height)):(this._renderType&=-129,this.conchModel&&(c$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),c$q(0,c$a,"skewY",function(){return this._style._tf.skewY},function(c$a){var c$b=this.getStyle();if(c$b._tf.skewY!==c$a){c$b.setSkewY(c$a),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(c$b._tf.skewX,c$a),this._renderType|=4;var c$c=this._parent;c$c&&0===c$c._repaint&&(c$c._repaint=1,c$c.parentRepaint())}}),c$q(0,c$a,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(c$a){this._tfChanged=!1,(this._transform=c$a)&&(this._x=c$a.tx,this._y=c$a.ty,c$a.tx=c$a.ty=0,this.conchModel&&this.conchModel.transform(c$a.a,c$a.b,c$a.c,c$a.d,this._x,this._y)),c$a?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),c$q(0,c$a,"pivotX",function(){return this._style._tf.translateX},function(c$a){this.getStyle().setTranslateX(c$a),this.conchModel&&this.conchModel.pivot(c$a,this._style._tf.translateY),this.repaint()}),c$q(0,c$a,"pivotY",function(){return this._style._tf.translateY},function(c$a){this.getStyle().setTranslateY(c$a),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,c$a),this.repaint()}),c$q(0,c$a,"alpha",function(){return this._style.alpha},function(c$a){this._style&&this._style.alpha!==c$a&&(c$a=c$a<0?0:1<c$a?1:c$a,this.getStyle().alpha=c$a,this.conchModel&&this.conchModel.alpha(c$a),1!==c$a?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),c$q(0,c$a,"visible",function(){return this._style.visible},function(c$a){this._style&&this._style.visible!==c$a&&(this.getStyle().visible=c$a,this.conchModel&&this.conchModel.visible(c$a),this.parentRepaint())}),c$q(0,c$a,"graphics",function(){return this._graphics||(this.graphics=c$F.createGraphics())},function(c$a){this._graphics&&(this._graphics._sp=null),(this._graphics=c$a)?(this._renderType&=-2,this._renderType|=512,(c$a._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(c$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),c$q(0,c$a,"filters",function(){return this._$P.filters},function(c$a){c$a&&0===c$a.length&&(c$a=null),this._$P.filters!=c$a&&(this._set$P("filters",c$a?c$a.slice():null),c$J.isConchApp&&(this.conchModel&&(c$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),c$J.isWebGL&&(c$a&&c$a.length?this._renderType|=32:this._renderType&=-33),c$a&&0<c$a.length?(this._getBit(1)||this._setUpNoticeType(1),c$J.isWebGL&&1==c$a.length&&c$a[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(c$J.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),c$q(0,c$a,"parent",c$g.prototype._$get_parent,function(c$a){c$z.superSet(c$aa,this,"parent",c$a),c$a&&this._getBit(2)&&this._$2__onDisplay()}),c$q(0,c$a,"mask",function(){return this._$P._mask},function(c$a){c$a&&this.mask&&this.mask._$P.maskParent||(c$a?(this.cacheAs="bitmap",this._set$P("_mask",c$a),c$a._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",c$a),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(c$a?c$a.conchModel:null),this._renderType|=64,this.parentRepaint())}),c$q(0,c$a,"mouseEnabled",function(){return 1<this._mouseEnableState},function(c$a){this._mouseEnableState=c$a?2:1}),c$q(0,c$a,"globalScaleX",function(){for(var c$a=1,c$b=this;c$b&&c$b!==c$z.stage;)c$a*=c$b.scaleX,c$b=c$b.parent;return c$a}),c$q(0,c$a,"mouseX",function(){return this.getMousePoint().x}),c$q(0,c$a,"mouseY",function(){return this.getMousePoint().y}),c$c.fromImage=function(c$a){return(new c$c).loadImage(c$a)},c$c._cachePool=[],c$c.CustomList=[],c$k(c$c,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=c$i.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),c$c}(c$aa),c$oa=function(c$a){function c$b(c$a){this._audio=null,this._onEnd=null,this._resumePlay=null,c$b.__super.call(this),this._onEnd=c$$.bind(this.__onEnd,this),this._resumePlay=c$$.bind(this.__resumePlay,this),c$a.addEventListener("ended",this._onEnd),this._audio=c$a}c$m(c$b,"laya.media.h5audio.AudioSoundChannel",c$da);var c$c=c$b.prototype;return c$c.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(c$z.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},c$c.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,c$O.container.appendChild(this._audio),this._audio.play()}catch(c$a){this.event("error")}},c$c.play=function(c$a){this.isStopped=!1;try{this._audio.playbackRate=c$E.playbackRate,this._audio.currentTime=this.startTime}catch(c$a){return void this._audio.addEventListener("canplay",this._resumePlay)}c$E.addChannel(this),c$O.container.appendChild(this._audio),!c$a&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},c$c.stop=function(){this.isStopped=!0,c$E.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&c$J.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),c$O.onIE||this._audio!=c$ca._musicAudio&&c$W.recover("audio:"+this.url,this._audio),c$O.removeElement(this._audio),this._audio=null)},c$c.pause=function(){this.isStopped=!0,c$E.removeChannel(this),"pause"in this._audio&&this._audio.pause()},c$c.resume=function(){this._audio&&(this.isStopped=!1,c$E.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},c$q(0,c$c,"position",function(){return this._audio?this._audio.currentTime:0}),c$q(0,c$c,"duration",function(){return this._audio?this._audio.duration:0}),c$q(0,c$c,"volume",function(){return this._audio?this._audio.volume:1},function(c$a){this._audio&&(this._audio.volume=c$a)}),c$b}(),c$pa=function(c$a){function c$b(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=c$ha.ctx,c$b.__super.call(this),this._onPlayEnd=c$$.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}c$m(c$b,"laya.media.webaudio.WebAudioSoundChannel",c$da);var c$c=c$b.prototype;return c$c.play=function(c$a){if(c$E.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var c$b=this.context,c$c=this.gain,c$d=c$b.createBufferSource();(this.bufferSource=c$d).buffer=this.audioBuffer,c$d.connect(c$c),c$c&&c$c.disconnect(),c$c.connect(c$b.destination),c$d.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=c$O.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(c$d.loop=!0),c$d.playbackRate.setTargetAtTime?c$d.playbackRate.setTargetAtTime(c$E.playbackRate,this.context.currentTime,.1):c$d.playbackRate.value=c$E.playbackRate,c$d.start(0,this.startTime),!c$a&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},c$c.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(c$z.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},c$c._clearBufferSource=function(){if(this.bufferSource){var c$a=this.bufferSource;c$a.stop?c$a.stop(0):c$a.noteOff(0),c$a.disconnect(0),c$a.onended=null,c$b._tryCleanFailed||this._tryClearBuffer(c$a),this.bufferSource=null}},c$c._tryClearBuffer=function(c$a){try{c$a.buffer=null}catch(c$a){c$b._tryCleanFailed=!0}},c$c.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,c$E.removeChannel(this),this.startHandler=null,this.completeHandler=null},c$c.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,c$E.removeChannel(this)},c$c.resume=function(){this.startTime=this._pauseTime,this.play(!1)},c$q(0,c$c,"position",function(){return this.bufferSource?(c$O.now()-this._startTime)/1e3+this.startTime:0}),c$q(0,c$c,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),c$q(0,c$c,"volume",function(){return this._volume},function(c$a){this.isStopped||(this._volume=c$a,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(c$a,this.context.currentTime,.1):this.gain.gain.value=c$a)}),c$b._tryCleanFailed=!1,c$b}(),c$qa=function(c$a){function c$b(){c$b.__super.call(this),this._w=0,this._h=0}c$m(c$b,"laya.resource.Bitmap",c$la);var c$c=c$b.prototype;return c$q(0,c$c,"width",function(){return this._w}),c$q(0,c$c,"height",function(){return this._h}),c$q(0,c$c,"source",function(){return this._source}),c$b}(),c$ra=function(c$b){function c$a(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,c$a.__super.call(this),this._interval=c$d.animationInterval,this._setUpNoticeType(1)}c$m(c$a,"laya.display.AnimationPlayerBase",c$b);var c$c=c$a.prototype;return c$c.play=function(c$a,c$b,c$c,c$d){void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=!0),void 0===c$c&&(c$c=""),void 0===c$d&&(c$d=!0),this._isPlaying=!0,this.index="string"==typeof c$a?this._getFrameByLabel(c$a):c$a,this.loop=c$b,this._actionName=c$c,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},c$c._getFrameByLabel=function(c$a){var c$b=0;for(c$b=0;c$b<this._count;c$b++)if(this._labels[c$b]&&0<=this._labels[c$b].indexOf(c$a))return c$b;return 0},c$c._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},c$c._setControlNode=function(c$a){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=c$a)&&c$a!=this&&(c$a.on("display",this,this._checkResumePlaying),c$a.on("undisplay",this,this._checkResumePlaying))},c$c._setDisplay=function(c$a){c$b.prototype._setDisplay.call(this,c$a),this._checkResumePlaying()},c$c._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},c$c.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},c$c.addLabel=function(c$a,c$b){this._labels||(this._labels={}),this._labels[c$b]||(this._labels[c$b]=[]),this._labels[c$b].push(c$a)},c$c.removeLabel=function(c$a){if(c$a){if(this._labels)for(var c$b in this._labels)this._removeLabelFromLabelList(this._labels[c$b],c$a)}else this._labels=null},c$c._removeLabelFromLabelList=function(c$a,c$b){if(c$a)for(var c$c=c$a.length-1;0<=c$c;c$c--)c$a[c$c]==c$b&&c$a.splice(c$c,1)},c$c.gotoAndStop=function(c$a){this.index="string"==typeof c$a?this._getFrameByLabel(c$a):c$a,this.stop()},c$c._displayToIndex=function(c$a){},c$c.clear=function(){this.stop(),this._labels=null},c$q(0,c$c,"interval",function(){return this._interval},function(c$a){this._interval!=c$a&&(this._frameRateChanged=!0,this._interval=c$a,this._isPlaying&&0<c$a&&this.timerLoop(c$a,this,this._frameLoop,null,!0,!0))}),c$q(0,c$c,"isPlaying",function(){return this._isPlaying}),c$q(0,c$c,"index",function(){return this._index},function(c$a){if(this._index=c$a,this._displayToIndex(c$a),this._labels&&this._labels[c$a])for(var c$b=this._labels[c$a],c$c=0,c$d=c$b.length;c$c<c$d;c$c++)this.event("label",c$b[c$c])}),c$q(0,c$c,"count",function(){return this._count}),c$a.WRAP_POSITIVE=0,c$a.WRAP_REVERSE=1,c$a.WRAP_PINGPONG=2,c$a}(c$na),c$sa=function(c$b){function c$p(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,c$p.__super.call(this),this.overflow=c$p.VISIBLE,this._style=new c$ba(this),this._style.wordWrap=!1}c$m(c$p,"laya.display.Text",c$b);var c$a=c$p.prototype;return c$a.destroy=function(c$a){void 0===c$a&&(c$a=!0),c$b.prototype.destroy.call(this,c$a),this._lines=null,this._words&&(this._words.length=0,this._words=null)},c$a._getBoundPointsM=function(c$a){void 0===c$a&&(c$a=!1);var c$b=c$B.TEMP;return c$b.setTo(0,0,this.width,this.height),c$b._getBoundPoints()},c$a.getGraphicBounds=function(c$a){void 0===c$a&&(c$a=!1);var c$b=c$B.TEMP;return c$b.setTo(0,0,this.width,this.height),c$b},c$a._getCSSStyle=function(){return this._style},c$a.lang=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l,c$m){if(c$a=c$p.langPacks&&c$p.langPacks[c$a]?c$p.langPacks[c$a]:c$a,arguments.length<2)this._text=c$a;else{for(var c$n=0,c$o=arguments.length;c$n<c$o;c$n++)c$a=c$a.replace("{"+c$n+"}",arguments[c$n+1]);this._text=c$a}},c$a._isPassWordMode=function(){var c$a=this._style.password;return"prompt"in this&&this.prompt==this._text&&(c$a=!1),c$a},c$a._getPassWordTxt=function(c$a){var c$b;c$b="";for(var c$c=c$a.length;0<c$c;c$c--)c$b+="●";return c$b},c$a.renderText=function(c$a,c$b){var c$c=this.graphics;c$c.clear(!0);var c$d=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(c$O.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);c$O.context.font=c$d;var c$g=this.padding,c$h=c$g[3],c$i="left",c$j=this._lines,c$k=this.leading+this._charSize.height,c$l=this._currBitmapFont;c$l&&(c$k=this.leading+c$l.getMaxHeight());var c$m=c$g[0];if(!c$l&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(c$i="right",c$h=this._width-c$g[1]):"center"==this.align&&(c$i="center",c$h=.5*this._width+c$g[3]-c$g[1])),0<this._height){var c$n=this._textHeight>this._height?"top":this.valign;"middle"===c$n?c$m=.5*(this._height-c$b*c$k)+c$g[0]-c$g[2]:"bottom"===c$n&&(c$m=this._height-c$b*c$k-c$g[2])}var c$o=this._style;if(c$l&&c$l.autoScaleSize)var c$p=c$l.fontSize/this.fontSize;if(this._clipPoint)if(c$c.save(),c$l&&c$l.autoScaleSize){var c$q=0,c$r=0;c$q=this._width?this._width-c$g[3]-c$g[1]:this._textWidth,c$r=this._height?this._height-c$g[0]-c$g[2]:this._textHeight,c$q*=c$p,c$r*=c$p,c$c.clipRect(c$g[3],c$g[0],c$q,c$r)}else c$c.clipRect(c$g[3],c$g[0],this._width?this._width-c$g[3]-c$g[1]:this._textWidth,this._height?this._height-c$g[0]-c$g[2]:this._textHeight);var c$s=c$o.password;"prompt"in this&&this.prompt==this._text&&(c$s=!1);for(var c$t=0,c$u=0,c$v=Math.min(this._lines.length,c$b+c$a)||1,c$w=c$a;c$w<c$v;c$w++){var c$x,c$y=c$j[c$w];if(c$s){var c$z=c$y.length;c$y="";for(var c$A=c$z;0<c$A;c$A--)c$y+="●"}if(c$t=c$h-(this._clipPoint?this._clipPoint.x:0),c$u=c$m+c$k*c$w-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(c$i,c$t,c$u,c$w),c$l){var c$B=this.width;c$l.autoScaleSize&&(c$B=this.width*c$p),c$l.drawText(c$y,this,c$t,c$u,this.align,c$B)}else c$J.isWebGL?(this._words||(this._words=[]),(c$x=this._words.length>c$w-c$a?this._words[c$w-c$a]:new c$f).setText(c$y)):c$x=c$y,c$o.stroke?c$c.fillBorderText(c$x,c$t,c$u,c$d,this.color,c$o.strokeColor,c$o.stroke,c$i):c$c.fillText(c$x,c$t,c$u,c$d,this.color,c$i)}if(c$l&&c$l.autoScaleSize){var c$C=1/c$p;this.scale(c$C,c$C)}this._clipPoint&&c$c.restore(),this._startX=c$h,this._startY=c$m},c$a.drawUnderline=function(c$a,c$b,c$c,c$d){var c$g=this._lineWidths[c$d];switch(c$a){case"center":c$b-=c$g/2;break;case"right":c$b-=c$g}c$c+=this._charSize.height,this._graphics.drawLine(c$b,c$c,c$b+c$g,c$c,this.underlineColor||this.color,1)},c$a.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);c$O.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new c$A(0,0)):this._clipPoint=null;var c$a=this._lines.length;if(this.overflow!=c$p.VISIBLE){var c$b=this.overflow==c$p.HIDDEN?Math.floor:Math.ceil;c$a=Math.min(c$a,c$b((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var c$c=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(c$c,c$a),this.repaint()},c$a.evalTextSize=function(){var c$a,c$b=NaN;c$a=Math.max.apply(this,this._lineWidths),c$b=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],c$a==this._textWidth&&c$b==this._textHeight||(this._textWidth=c$a,this._textHeight=c$b,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},c$a.checkEnabledViewportOrNot=function(){return this.overflow==c$p.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},c$a.changeText=function(c$a){this._text!==c$a&&(this.lang(c$a+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},c$a.parseLines=function(c$a){var c$b=this.wordWrap||this.overflow==c$p.HIDDEN;if(c$b)var c$c=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var c$d=c$O.context.measureText(c$p._testWord);c$J.isConchApp&&0===c$d.width&&0===c$d.height&&(c$d=c$O.context.measureText("W")),this._charSize.width=c$d.width,this._charSize.height=c$d.height||this.fontSize}for(var c$g=c$a.replace(/\r\n/g,"\n").split("\n"),c$h=0,c$i=c$g.length;c$h<c$i;c$h++){var c$j=c$g[c$h];c$b?this.parseLine(c$j,c$c):(this._lineWidths.push(this.getTextWidth(c$j)),this._lines.push(c$j))}},c$a.parseLine=function(c$a,c$b){c$O.context;var c$c,c$d=this._lines,c$g=0,c$h=NaN,c$i=NaN,c$j=0;if((c$h=this.getTextWidth(c$a))<=c$b)return c$d.push(c$a),void this._lineWidths.push(c$h);c$h=this._charSize.width,0==(c$g=Math.floor(c$b/c$h))&&(c$g=1),c$i=c$h=this.getTextWidth(c$a.substring(0,c$g));for(var c$k=c$g,c$l=c$a.length;c$k<c$l;c$k++)if(c$b<(c$i+=c$h=this.getTextWidth(c$a.charAt(c$k))))if(this.wordWrap){var c$m=c$a.substring(c$j,c$k);if(c$m.charCodeAt(c$m.length-1)<255?(c$c=/(?:\w|-)+$/.exec(c$m))&&(c$k=c$c.index+c$j,0==c$c.index?c$k+=c$m.length:c$m=c$a.substring(c$j,c$k)):c$p.RightToLeft&&(c$c=/([\u0600-\u06FF])+$/.exec(c$m))&&(c$k=c$c.index+c$j,0==c$c.index?c$k+=c$m.length:c$m=c$a.substring(c$j,c$k)),c$d.push(c$m),this._lineWidths.push(c$i-c$h),!((c$j=c$k)+c$g<c$l)){c$d.push(c$a.substring(c$j,c$l)),this._lineWidths.push(this.getTextWidth(c$d[c$d.length-1])),c$j=-1;break}c$k+=c$g,c$i=c$h=this.getTextWidth(c$a.substring(c$j,c$k)),c$k--}else if(this.overflow==c$p.HIDDEN)return c$d.push(c$a.substring(0,c$k)),void this._lineWidths.push(this.getTextWidth(c$d[c$d.length-1]));this.wordWrap&&-1!=c$j&&(c$d.push(c$a.substring(c$j,c$l)),this._lineWidths.push(this.getTextWidth(c$d[c$d.length-1])))},c$a.getTextWidth=function(c$a){return this._currBitmapFont?this._currBitmapFont.getTextWidth(c$a):c$O.context.measureText(c$a).width},c$a.getWordWrapWidth=function(){var c$a=this.padding,c$b=NaN;return(c$b=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(c$b=this.wordWrap?100:c$O.width),c$b<=0&&(c$b=100),c$b-c$a[3]-c$a[1]},c$a.getCharPoint=function(c$a,c$b){this._isChanged&&c$z.timer.runCallLater(this,this.typeset);for(var c$c=0,c$d=this._lines,c$g=0,c$h=0,c$i=c$d.length;c$h<c$i;c$h++){if(c$a<(c$c+=c$d[c$h].length)){var c$j=c$h;break}c$g=c$c}var c$k=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;c$O.context.font=c$k;var c$l=this.getTextWidth(this._text.substring(c$g,c$a));return(c$b||new c$A).setTo(this._startX+c$l-(this._clipPoint?this._clipPoint.x:0),this._startY+c$j*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},c$q(0,c$a,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(c$a){c$a!=this._width&&(c$z.superSet(c$na,this,"width",c$a),this.isChanged=!0)}),c$q(0,c$a,"textWidth",function(){return this._isChanged&&c$z.timer.runCallLater(this,this.typeset),this._textWidth}),c$q(0,c$a,"height",function(){return this._height?this._height:this.textHeight},function(c$a){c$a!=this._height&&(c$z.superSet(c$na,this,"height",c$a),this.isChanged=!0)}),c$q(0,c$a,"textHeight",function(){return this._isChanged&&c$z.timer.runCallLater(this,this.typeset),this._textHeight}),c$q(0,c$a,"padding",function(){return this._getCSSStyle().padding},function(c$a){this._getCSSStyle().padding=c$a,this.isChanged=!0}),c$q(0,c$a,"bold",function(){return this._getCSSStyle().bold},function(c$a){this._getCSSStyle().bold=c$a,this.isChanged=!0}),c$q(0,c$a,"text",function(){return this._text||""},function(c$a){this._text!==c$a&&(this.lang(c$a+""),this.isChanged=!0,this.event("change"))}),c$q(0,c$a,"color",function(){return this._getCSSStyle().color},function(c$a){this._getCSSStyle().color!=c$a&&(this._getCSSStyle().color=c$a,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),c$q(0,c$a,"font",function(){return this._getCSSStyle().fontFamily},function(c$a){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),c$p._bitmapFonts&&c$p._bitmapFonts[c$a]&&(this._currBitmapFont=c$p._bitmapFonts[c$a]),this._getCSSStyle().fontFamily=c$a,this.isChanged=!0}),c$q(0,c$a,"fontSize",function(){return this._getCSSStyle().fontSize},function(c$a){this._getCSSStyle().fontSize=c$a,this.isChanged=!0}),c$q(0,c$a,"italic",function(){return this._getCSSStyle().italic},function(c$a){this._getCSSStyle().italic=c$a,this.isChanged=!0}),c$q(0,c$a,"align",function(){return this._getCSSStyle().align},function(c$a){this._getCSSStyle().align=c$a,this.isChanged=!0}),c$q(0,c$a,"valign",function(){return this._getCSSStyle().valign},function(c$a){this._getCSSStyle().valign=c$a,this.isChanged=!0}),c$q(0,c$a,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(c$a){this._getCSSStyle().wordWrap=c$a,this.isChanged=!0}),c$q(0,c$a,"leading",function(){return this._getCSSStyle().leading},function(c$a){this._getCSSStyle().leading=c$a,this.isChanged=!0}),c$q(0,c$a,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(c$a){this._getCSSStyle().backgroundColor=c$a,this.isChanged=!0}),c$q(0,c$a,"borderColor",function(){return this._getCSSStyle().borderColor},function(c$a){this._getCSSStyle().borderColor=c$a,this.isChanged=!0}),c$q(0,c$a,"stroke",function(){return this._getCSSStyle().stroke},function(c$a){this._getCSSStyle().stroke=c$a,this.isChanged=!0}),c$q(0,c$a,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(c$a){this._getCSSStyle().strokeColor=c$a,this.isChanged=!0}),c$q(0,c$a,"isChanged",null,function(c$a){this._isChanged!==c$a&&(this._isChanged=c$a)&&c$z.timer.callLater(this,this.typeset)}),c$q(0,c$a,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(c$a){if(!(this.overflow!=c$p.SCROLL||this.textWidth<this._width)&&this._clipPoint){c$a=c$a<this.padding[3]?this.padding[3]:c$a;var c$b=this._textWidth-this._width;c$a=c$b<c$a?c$b:c$a;var c$c=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=c$a,this.renderText(this._lastVisibleLineIndex,c$c)}}),c$q(0,c$a,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(c$a){if(!(this.overflow!=c$p.SCROLL||this.textHeight<this._height)&&this._clipPoint){c$a=c$a<this.padding[0]?this.padding[0]:c$a;var c$b=this._textHeight-this._height,c$c=(c$a=c$b<c$a?c$b:c$a)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=c$c;var c$d=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=c$a,this.renderText(c$c,c$d)}}),c$q(0,c$a,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),c$q(0,c$a,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),c$q(0,c$a,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),c$q(0,c$a,"underlineColor",function(){return this._underlineColor},function(c$a){this._underlineColor=c$a,this._isChanged=!0,this.typeset()}),c$p.registerBitmapFont=function(c$a,c$b){c$p._bitmapFonts||(c$p._bitmapFonts={}),c$p._bitmapFonts[c$a]=c$b},c$p.unregisterBitmapFont=function(c$a,c$b){if(void 0===c$b&&(c$b=!0),c$p._bitmapFonts&&c$p._bitmapFonts[c$a]){var c$c=c$p._bitmapFonts[c$a];c$b&&c$c.destroy(),delete c$p._bitmapFonts[c$a]}},c$p.setTextRightToLeft=function(){var c$a;(c$a=c$O.canvas.source.style).display="none",c$a.position="absolute",c$a.direction="rtl",c$J._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,c$O.document.body.appendChild(c$O.canvas.source)},c$p.supportFont=function(c$a){c$O.context.font="10px sans-serif";var c$b=c$O.context.measureText("abcji").width;c$O.context.font="10px "+c$a;var c$c=c$O.context.measureText("abcji").width;return console.log(c$b,c$c),c$b!==c$c},c$p._testWord="游",c$p.langPacks=null,c$p.VISIBLE="visible",c$p.SCROLL="scroll",c$p.HIDDEN="hidden",c$p.CharacterCache=!0,c$p.RightToLeft=!1,c$p._bitmapFonts=null,c$k(c$p,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),c$p}(c$na),c$ta=function(c$n){function c$i(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",c$i.__super.call(this),this.offset=new c$A,this._canvasTransform=new c$G,this._previousOrientation=c$O.window.orientation;var c$b=this;this.transform=c$G.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var c$a=c$O.window,c$c=this;c$a.addEventListener("focus",function(){c$b._isFocused=!0,c$c.event("focus"),c$c.event("focuschange")}),c$a.addEventListener("blur",function(){c$b._isFocused=!1,c$c.event("blur"),c$c.event("focuschange"),c$c._isInputting()&&(c$xa.inputElement.target.focus=!1)});var c$d="visibilityState",c$g="visibilitychange",c$h=c$a.document;void 0!==c$h.hidden?(c$g="visibilitychange",c$d="visibilityState"):void 0!==c$h.mozHidden?(c$g="mozvisibilitychange",c$d="mozVisibilityState"):void 0!==c$h.msHidden?(c$g="msvisibilitychange",c$d="msVisibilityState"):void 0!==c$h.webkitHidden&&(c$g="webkitvisibilitychange",c$d="webkitVisibilityState"),c$a.document.addEventListener(c$g,function(){"hidden"==c$O.document[c$d]?c$c._setStageVisible(!1):c$c._setStageVisible(!0)}),c$a.document.addEventListener("qbrowserVisibilityChange",function(c$a){c$c._setStageVisible(!c$a.hidden)}),c$a.addEventListener("resize",function(){var c$a=c$O.window.orientation;null!=c$a&&c$a!=c$b._previousOrientation&&c$c._isInputting()&&(c$xa.inputElement.target.focus=!1),c$b._previousOrientation=c$a,c$c._isInputting()||c$c._resetCanvas()}),c$a.addEventListener("orientationchange",function(c$a){c$c._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),c$O.onMobile&&this.on("mousedown",this,this._onmouseMove)}c$m(c$i,"laya.display.Stage",c$n);var c$a=c$i.prototype;return c$a._setStageVisible=function(c$a){this._isVisibility!=c$a&&(this._isVisibility=c$a,this._isVisibility||this._isInputting()&&(c$xa.inputElement.target.focus=!1),this.event("visibilitychange"))},c$a._isInputting=function(){return c$O.onMobile&&c$xa.isInputting},c$a._changeCanvasSize=function(){this.setScreenSize(c$O.clientWidth*c$O.pixelRatio,c$O.clientHeight*c$O.pixelRatio)},c$a._resetCanvas=function(){if(this.screenAdaptationEnabled){var c$a=c$J._mainCanvas;c$a.source.style;c$a.size(1,1),c$z.timer.once(100,this,this._changeCanvasSize)}},c$a.setScreenSize=function(c$a,c$b){var c$c=!1;if("none"!==this._screenMode&&(c$c=(c$a/c$b<1?"vertical":"horizontal")!==this._screenMode)){var c$d=c$b;c$b=c$a,c$a=c$d}this.canvasRotation=c$c;var c$g=c$J._mainCanvas,c$h=c$g.source.style,c$i=this._canvasTransform.identity(),c$j=this._scaleMode,c$k=c$a/this.designWidth,c$l=c$b/this.designHeight,c$m=this.designWidth,c$n=this.designHeight,c$o=c$a,c$p=c$b,c$q=c$O.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,c$j){case"noscale":c$k=c$l=1,c$o=this.designWidth,c$p=this.designHeight;break;case"showall":c$k=c$l=Math.min(c$k,c$l),c$m=c$o=Math.round(this.designWidth*c$k),c$n=c$p=Math.round(this.designHeight*c$l);break;case"noborder":c$k=c$l=Math.max(c$k,c$l),c$o=Math.round(this.designWidth*c$k),c$p=Math.round(this.designHeight*c$l);break;case"full":c$k=c$l=1,this._width=c$m=c$a,this._height=c$n=c$b;break;case"fixedwidth":c$l=c$k,this._height=c$n=Math.round(c$b/c$k);break;case"fixedheight":c$k=c$l,this._width=c$m=Math.round(c$a/c$l);break;case"fixedauto":c$a/c$b<this.designWidth/this.designHeight?(c$l=c$k,this._height=c$n=Math.round(c$b/c$k)):(c$k=c$l,this._width=c$m=Math.round(c$a/c$l))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,c$m=c$m+1&2147483646,c$n=c$n+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),c$k*=this.scaleX,c$l*=this.scaleY,1===c$k&&1===c$l?this.transform.identity():(this.transform.a=this._formatData(c$k/(c$o/c$m)),this.transform.d=this._formatData(c$l/(c$p/c$n)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),c$g.size(c$m,c$n),c$F.changeWebGLSize(c$m,c$n),c$i.scale(c$o/c$m/c$q,c$p/c$n/c$q),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(c$a-c$o)/c$q:this.offset.x=.5*(c$a-c$o)/c$q,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(c$b-c$p)/c$q:this.offset.y=.5*(c$b-c$p)/c$q,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),c$i.translate(this.offset.x,this.offset.y),this.canvasDegree=0,c$c&&("horizontal"===this._screenMode?(c$i.rotate(Math.PI/2),c$i.translate(c$b/c$q,0),this.canvasDegree=90):(c$i.rotate(-Math.PI/2),c$i.translate(0,c$a/c$q),this.canvasDegree=-90)),c$i.a=this._formatData(c$i.a),c$i.d=this._formatData(c$i.d),c$i.tx=this._formatData(c$i.tx),c$i.ty=this._formatData(c$i.ty),c$h.transformOrigin=c$h.webkitTransformOrigin=c$h.msTransformOrigin=c$h.mozTransformOrigin=c$h.oTransformOrigin="0px 0px 0px",c$h.transform=c$h.webkitTransform=c$h.msTransform=c$h.mozTransform=c$h.oTransform="matrix("+c$i.toString()+")",c$i.translate(parseInt(c$h.left)||0,parseInt(c$h.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},c$a._formatData=function(c$a){return Math.abs(c$a)<1e-6?0:Math.abs(1-c$a)<.001?0<c$a?1:-1:c$a},c$a.getMousePoint=function(){return c$A.TEMP.setTo(this.mouseX,this.mouseY)},c$a.repaint=function(){this._repaint=1},c$a.parentRepaint=function(){},c$a._loop=function(){return this.render(c$J.context,0,0),!0},c$a._onmouseMove=function(c$a){this._mouseMoveTime=c$O.now()},c$a.getTimeFromFrameStart=function(){return c$O.now()-this._frameStartTime},c$a.render=function(c$a,c$b,c$c){if("sleep"===this._frameRate&&!c$J.isConchApp){var c$d=c$O.now();if(!(1e3<=c$d-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(c$X.loopCount++,c$r.instance.runEvent(),c$z.timer._update()));this._frameStartTime=c$d}if(this._renderCount++,c$J.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=c$O.now();var c$g="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),c$h=this._renderCount%2==0;if(c$X.renderSlow=!c$g,c$g||c$h||c$J.isConchApp){var c$i;c$X.loopCount++,c$r.instance.runEvent(),c$z.timer._update(),c$F.update3DLoop();var c$j=0,c$k=0;if(c$J.isConchNode)for(c$j=0,c$k=this._scenes.length;c$j<c$k;c$j++)(c$i=this._scenes[c$j])&&c$i._updateSceneConch();else for(c$j=0,c$k=this._scenes.length;c$j<c$k;c$j++)(c$i=this._scenes[c$j])&&c$i._updateScene();if(c$J.isConchNode){var c$l=c$na.CustomList;for(c$j=0,c$k=c$l.length;c$j<c$k;c$j++){var c$m=c$l[c$j];c$m.customRender(c$m.customContext,0,0)}return}}c$J.isConchNode||this.renderingEnabled&&(c$g||!c$h||c$J.isConchWebGL)&&(c$J.isWebGL?(c$a.clear(),c$n.prototype.render.call(this,c$a,c$b,c$c),c$X._show&&c$X._sp&&c$X._sp.render(c$a,c$b,c$c),c$F.clear(this._bgColor),c$F.beginFlush(),c$a.flush(),c$F.endFinish(),c$_.instance&&c$_.getInstance().endDispose()):(c$F.clear(this._bgColor),c$n.prototype.render.call(this,c$a,c$b,c$c),c$X._show&&c$X._sp&&c$X._sp.render(c$a,c$b,c$c)))}else this._renderCount%5==0&&(c$X.loopCount++,c$r.instance.runEvent(),c$z.timer._update())},c$a._requestFullscreen=function(){var c$a=c$O.document.documentElement;c$a.requestFullscreen?c$a.requestFullscreen():c$a.mozRequestFullScreen?c$a.mozRequestFullScreen():c$a.webkitRequestFullscreen?c$a.webkitRequestFullscreen():c$a.msRequestFullscreen&&c$a.msRequestFullscreen()},c$a._fullScreenChanged=function(){c$z.stage.event("fullscreenchange")},c$a.exitFullscreen=function(){var c$a=c$O.document;c$a.exitFullscreen?c$a.exitFullscreen():c$a.mozCancelFullScreen?c$a.mozCancelFullScreen():c$a.webkitExitFullscreen&&c$a.webkitExitFullscreen()},c$q(0,c$a,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),c$q(0,c$a,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),c$q(0,c$a,"frameRate",function(){return this._frameRate},function(c$a){if(this._frameRate=c$a,c$J.isConchApp)switch(this._frameRate){case"slow":c$O.window.conch&&c$O.window.conchConfig.setSlowFrame&&c$O.window.conchConfig.setSlowFrame(!0);break;case"fast":c$O.window.conch&&c$O.window.conchConfig.setSlowFrame&&c$O.window.conchConfig.setSlowFrame(!1);break;case"mouse":c$O.window.conch&&c$O.window.conchConfig.setMouseFrame&&c$O.window.conchConfig.setMouseFrame(2e3);break;case"sleep":c$O.window.conch&&c$O.window.conchConfig.setLimitFPS&&c$O.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),c$q(0,c$a,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),c$q(0,c$a,"width",c$n.prototype._$get_width,function(c$a){this.designWidth=c$a,c$z.superSet(c$na,this,"width",c$a),c$z.timer.callLater(this,this._changeCanvasSize)}),c$q(0,c$a,"alignH",function(){return this._alignH},function(c$a){this._alignH=c$a,c$z.timer.callLater(this,this._changeCanvasSize)}),c$q(0,c$a,"isFocused",function(){return this._isFocused}),c$q(0,c$a,"height",c$n.prototype._$get_height,function(c$a){this.designHeight=c$a,c$z.superSet(c$na,this,"height",c$a),c$z.timer.callLater(this,this._changeCanvasSize)}),c$q(0,c$a,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||c$G.create()},c$n.prototype._$set_transform),c$q(0,c$a,"isVisibility",function(){return this._isVisibility}),c$q(0,c$a,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),c$q(0,c$a,"scaleMode",function(){return this._scaleMode},function(c$a){this._scaleMode=c$a,c$z.timer.callLater(this,this._changeCanvasSize)}),c$q(0,c$a,"alignV",function(){return this._alignV},function(c$a){this._alignV=c$a,c$z.timer.callLater(this,this._changeCanvasSize)}),c$q(0,c$a,"bgColor",function(){return this._bgColor},function(c$a){this._bgColor=c$a,this.conchModel&&this.conchModel.bgColor(c$a),c$J.isWebGL&&(c$a?c$i._wgColor=c$S.create(c$a)._color:c$O.onMiniGame||(c$i._wgColor=null)),c$O.onLimixiu?c$i._wgColor=c$S.create(c$a)._color:c$J.canvas.style.background=c$a||"none"}),c$q(0,c$a,"mouseX",function(){return Math.round(c$r.instance.mouseX/this.clientScaleX)}),c$q(0,c$a,"mouseY",function(){return Math.round(c$r.instance.mouseY/this.clientScaleY)}),c$q(0,c$a,"screenMode",function(){return this._screenMode},function(c$a){this._screenMode=c$a}),c$q(0,c$a,"visible",c$n.prototype._$get_visible,function(c$a){this.visible!==c$a&&(c$z.superSet(c$na,this,"visible",c$a),c$J._mainCanvas.source.style.visibility=c$a?"visible":"hidden")}),c$q(0,c$a,"fullScreenEnabled",null,function(c$a){var c$b=c$O.document,c$c=c$J.canvas;c$a?(c$c.addEventListener("mousedown",this._requestFullscreen),c$c.addEventListener("touchstart",this._requestFullscreen),c$b.addEventListener("fullscreenchange",this._fullScreenChanged),c$b.addEventListener("mozfullscreenchange",this._fullScreenChanged),c$b.addEventListener("webkitfullscreenchange",this._fullScreenChanged),c$b.addEventListener("msfullscreenchange",this._fullScreenChanged)):(c$c.removeEventListener("mousedown",this._requestFullscreen),c$c.removeEventListener("touchstart",this._requestFullscreen),c$b.removeEventListener("fullscreenchange",this._fullScreenChanged),c$b.removeEventListener("mozfullscreenchange",this._fullScreenChanged),c$b.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),c$b.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),c$i.SCALE_NOSCALE="noscale",c$i.SCALE_EXACTFIT="exactfit",c$i.SCALE_SHOWALL="showall",c$i.SCALE_NOBORDER="noborder",c$i.SCALE_FULL="full",c$i.SCALE_FIXED_WIDTH="fixedwidth",c$i.SCALE_FIXED_HEIGHT="fixedheight",c$i.SCALE_FIXED_AUTO="fixedauto",c$i.ALIGN_LEFT="left",c$i.ALIGN_RIGHT="right",c$i.ALIGN_CENTER="center",c$i.ALIGN_TOP="top",c$i.ALIGN_MIDDLE="middle",c$i.ALIGN_BOTTOM="bottom",c$i.SCREEN_NONE="none",c$i.SCREEN_HORIZONTAL="horizontal",c$i.SCREEN_VERTICAL="vertical",c$i.FRAME_FAST="fast",c$i.FRAME_SLOW="slow",c$i.FRAME_MOUSE="mouse",c$i.FRAME_SLEEP="sleep",c$i.FRAME_MOUSE_THREDHOLD=2e3,c$k(c$i,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),c$i}(c$na),c$ua=(function(c$a){function c$b(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,c$b.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}c$m(c$b,"laya.media.SoundNode",c$na);var c$c=c$b.prototype;c$c._onParentChange=function(){this.target=this.parent},c$c.play=function(c$a,c$b){void 0===c$a&&(c$a=1),isNaN(c$a)&&(c$a=1),this.url&&(this.stop(),this._channel=c$E.playSound(this.url,c$a,null,c$b))},c$c.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},c$c._setPlayAction=function(c$a,c$b,c$c,c$d){void 0===c$d&&(c$d=!0),this[c$c]&&c$a&&(c$d?c$a.on(c$b,this,this[c$c]):c$a.off(c$b,this,this[c$c]))},c$c._setPlayActions=function(c$a,c$b,c$c,c$d){if(void 0===c$d&&(c$d=!0),c$a&&c$b){var c$g,c$h=c$b.split(","),c$i=0;for(c$g=c$h.length,c$i=0;c$i<c$g;c$i++)this._setPlayAction(c$a,c$h[c$i],c$c,c$d)}},c$q(0,c$c,"playEvent",null,function(c$a){(this._playEvents=c$a)&&this._tar&&this._setPlayActions(this._tar,c$a,"play")}),c$q(0,c$c,"target",null,function(c$a){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=c$a,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),c$q(0,c$c,"stopEvent",null,function(c$a){(this._stopEvents=c$a)&&this._tar&&this._setPlayActions(this._tar,c$a,"stop")})}(),function(c$a){function c$b(){this._src=null,this._onload=null,this._onerror=null,c$b.__super.call(this)}c$m(c$b,"laya.resource.FileBitmap",c$qa);var c$c=c$b.prototype;return c$q(0,c$c,"src",function(){return this._src},function(c$a){this._src=c$a}),c$q(0,c$c,"onload",null,function(c$a){}),c$q(0,c$c,"onerror",null,function(c$a){}),c$b}()),c$va=function(c$a){function c$c(c$a,c$b){this._is2D=!1,c$c.__super.call(this);var c$d=this;if(this._source=this,"2D"===c$a||"AUTO"===c$a&&!c$J.isWebGL){this._is2D=!0,this._source=c$b||c$O.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var c$g=this;c$g.getContext=function(c$a,c$b){if(c$d._ctx)return c$d._ctx;var c$c=c$d._ctx=c$d._source.getContext(c$a,c$b);return c$c&&(c$c._canvas=c$g,c$J.isFlash||c$O.onLimixiu||(c$c.size=function(c$a,c$b){})),c$c}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}c$m(c$c,"laya.resource.HTMLCanvas",c$qa);var c$b=c$c.prototype;return c$b.clear=function(){this._ctx&&this._ctx.clear()},c$b.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},c$b.release=function(){},c$b._setContext=function(c$a){this._ctx=c$a},c$b.getContext=function(c$a,c$b){return this._ctx?this._ctx:this._ctx=c$c._createContext(this)},c$b.getMemSize=function(){return 0},c$b.size=function(c$a,c$b){(this._w!=c$a||this._h!=c$b||this._source&&(this._source.width!=c$a||this._source.height!=c$b))&&(this._w=c$a,this._h=c$b,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(c$a,c$b),this._source&&(this._source.height=c$b,this._source.width=c$a))},c$b.getCanvas=function(){return this._source},c$b.toBase64=function(c$a,c$b,c$c){if(this._source)if(c$J.isConchApp&&this._source.toBase64)this._source.toBase64(c$a,c$b,c$c);else{var c$d=this._source.toDataURL(c$a,c$b);c$c.call(this,c$d)}},c$q(0,c$b,"context",function(){return this._ctx}),c$q(0,c$b,"asBitmap",null,function(c$a){}),c$c.create=function(c$a,c$b){return new c$c(c$a,c$b)},c$c.TYPE2D="2D",c$c.TYPE3D="3D",c$c.TYPEAUTO="AUTO",c$c._createContext=null,c$c}(),c$wa=(function(c$a){function c$k(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){throw c$k.__super.call(this),new Error("不允许new！")}c$m(c$k,"laya.resource.HTMLSubImage",c$qa),c$k.create=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){return void 0===c$j&&(c$j=!1),new c$k(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j)}}(),function(c$a){function c$n(){this._frames=null,this._url=null,c$n.__super.call(this),this._setControlNode(this)}c$m(c$n,"laya.display.Animation",c$a);var c$b=c$n.prototype;c$b.destroy=function(c$a){void 0===c$a&&(c$a=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,c$a),this._frames=null,this._labels=null},c$b.play=function(c$a,c$b,c$c,c$d){void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=!0),void 0===c$c&&(c$c=""),void 0===c$d&&(c$d=!0),c$c&&this._setFramesFromCache(c$c,c$d),this._isPlaying=!0,this.index="string"==typeof c$a?this._getFrameByLabel(c$a):c$a,this.loop=c$b,this._actionName=c$c,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},c$b._setFramesFromCache=function(c$a,c$b){var c$c;return void 0===c$b&&(c$b=!1),this._url&&(c$a=this._url+"#"+c$a),c$a&&c$n.framesMap[c$a]?((c$c=c$n.framesMap[c$a])instanceof Array?(this._frames=c$n.framesMap[c$a],this._count=this._frames.length):(c$c.nodeRoot&&(c$n.framesMap[c$a]=this._parseGraphicAnimationByData(c$c),c$c=c$n.framesMap[c$a]),this._frames=c$c.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=c$c.interval),this._labels=this._copyLabels(c$c.labels)),!0):(c$b&&console.log("ani not found:",c$a),!1)},c$b._copyLabels=function(c$a){if(!c$a)return null;var c$b,c$c;for(c$c in c$b={},c$a)c$b[c$c]=c$$.copyArray([],c$a[c$c]);return c$b},c$b._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&c$a.prototype._frameLoop.call(this)},c$b._displayToIndex=function(c$a){this._frames&&(this.graphics=this._frames[c$a])},c$b.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},c$b.loadImages=function(c$a,c$b){return void 0===c$b&&(c$b=""),this._url="",this._setFramesFromCache(c$b)||(this.frames=c$n.framesMap[c$b]?c$n.framesMap[c$b]:c$n.createFrames(c$a,c$b)),this},c$b.loadAtlas=function(c$b,c$c,c$d){void 0===c$d&&(c$d=""),this._url="";var c$g=this;function c$a(c$a){c$b===c$a&&(c$g.frames=c$n.framesMap[c$d]?c$n.framesMap[c$d]:c$n.createFrames(c$b,c$d),c$c&&c$c.run())}return c$g._setFramesFromCache(c$d)||(c$ja.getAtlas(c$b)?c$a(c$b):c$z.loader.load(c$b,c$u.create(null,c$a,[c$b]),null,"atlas")),this},c$b.loadAnimation=function(c$a,c$b,c$c){this._url=c$a;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,c$b&&c$b.run()):!c$c||c$ja.getAtlas(c$c)?this._loadAnimationData(c$a,c$b,c$c):c$z.loader.load(c$c,c$u.create(this,this._loadAnimationData,[c$a,c$b,c$c]),null,"atlas"),this},c$b._loadAnimationData=function(c$j,c$k,c$a){var c$l=this;if(!c$a||c$ja.getAtlas(c$a)){var c$m=this;c$ja.getRes(c$j)?c$b(c$j):c$z.loader.load(c$j,c$u.create(null,c$b,[c$j]),null,"json"),c$ja.clearRes(c$j)}else console.warn("atlas load fail:"+c$a);function c$b(c$a){if(c$ja.getRes(c$a)&&c$j===c$a){var c$b;if(c$n.framesMap[c$j+"#"])c$m._setFramesFromCache(c$l._actionName,!0),c$l.index=0,c$l._checkResumePlaying();else{var c$c=c$m._parseGraphicAnimation(c$ja.getRes(c$j));if(!c$c)return;var c$d,c$g=c$c.animationList,c$h=0,c$i=c$g.length;for(c$h=0;c$h<c$i;c$h++)c$b=c$g[c$h],c$n.framesMap[c$j+"#"+c$b.name]=c$b,c$d||(c$d=c$b);c$d&&(c$n.framesMap[c$j+"#"]=c$d,c$m._setFramesFromCache(c$l._actionName,!0),c$l.index=0),c$l._checkResumePlaying()}c$k&&c$k.run()}}},c$b._parseGraphicAnimation=function(c$a){return c$za.parseAnimationData(c$a)},c$b._parseGraphicAnimationByData=function(c$a){return c$za.parseAnimationByData(c$a)},c$q(0,c$b,"frames",function(){return this._frames},function(c$a){(this._frames=c$a)&&(this._count=c$a.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),c$q(0,c$b,"autoPlay",null,function(c$a){c$a?this.play():this.stop()}),c$q(0,c$b,"source",null,function(c$a){-1<c$a.indexOf(".ani")?this.loadAnimation(c$a):-1<c$a.indexOf(".json")||-1<c$a.indexOf("als")||-1<c$a.indexOf("atlas")?this.loadAtlas(c$a):this.loadImages(c$a.split(","))}),c$q(0,c$b,"autoAnimation",null,function(c$a){this.play(0,!0,c$a,!1)}),c$n.createFrames=function(c$a,c$b){var c$c,c$d,c$g=0,c$h=0;if("string"==typeof c$a){var c$i=c$ja.getAtlas(c$a);if(c$i&&c$i.length)for(c$c=[],c$g=0,c$h=c$i.length;c$g<c$h;c$g++)(c$d=new c$F.createGraphics).drawTexture(c$ja.getRes(c$i[c$g]),0,0),c$c.push(c$d)}else if(c$a instanceof Array)for(c$c=[],c$g=0,c$h=c$a.length;c$g<c$h;c$g++)(c$d=new c$F.createGraphics).loadImage(c$a[c$g],0,0),c$c.push(c$d);return c$b&&(c$n.framesMap[c$b]=c$c),c$c},c$n.clearCache=function(c$a){var c$b,c$c=c$n.framesMap,c$d=c$a+"#";for(c$b in c$c)c$b!==c$a&&0!=c$b.indexOf(c$d)||delete c$n.framesMap[c$b]},c$n.framesMap={}}(c$ra),function(c$a){function c$h(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,c$h.__super.call(this),null==c$h._sortIndexFun&&(c$h._sortIndexFun=c$y.sortByKey("index",!1,!0))}c$m(c$h,"laya.display.FrameAnimation",c$a);var c$b=c$h.prototype;return c$b._setUp=function(c$a,c$b){this._labels=null,this._animationNewFrames=null,this._targetDic=c$a,this._animationData=c$b,this.interval=1e3/c$b.frameRate,c$b.parsed?(this._count=c$b.count,this._labels=c$b.labels,this._animationNewFrames=c$b.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),c$b.parsed=!0,c$b.labels=this._labels,c$b.count=this._count,c$b.animationNewFrames=this._animationNewFrames},c$b.clear=function(){c$a.prototype.clear.call(this),this._targetDic=null,this._animationData=null},c$b._displayToIndex=function(c$a){if(this._animationData){c$a<0&&(c$a=0),c$a>this._count&&(c$a=this._count);var c$b=this._animationData.nodes,c$c=0,c$d=c$b.length;for(c$c=0;c$c<c$d;c$c++)this._displayNodeToFrame(c$b[c$c],c$a)}},c$b._displayNodeToFrame=function(c$a,c$b,c$c){c$c||(c$c=this._targetDic);var c$d=c$c[c$a.target];if(c$d){var c$g,c$h,c$i,c$j=c$a.frames,c$k=c$a.keys,c$l=0,c$m=c$k.length;for(c$l=0;c$l<c$m;c$l++)c$i=(c$h=c$j[c$g=c$k[c$l]]).length>c$b?c$h[c$b]:c$h[c$h.length-1],c$d[c$g]=c$i}},c$b._calculateDatas=function(){if(this._animationData){var c$a,c$b=this._animationData.nodes,c$c=0,c$d=c$b.length;for(c$c=this._count=0;c$c<c$d;c$c++)c$a=c$b[c$c],this._calculateNodeKeyFrames(c$a);this._count+=1}},c$b._calculateNodeKeyFrames=function(c$a){var c$b,c$c,c$d=c$a.keyframes,c$g=c$a.target;for(c$b in c$a.frames||(c$a.frames={}),c$a.keys?c$a.keys.length=0:c$a.keys=[],c$a.initValues||(c$a.initValues={}),c$d)c$c=c$d[c$b],c$a.frames[c$b]||(c$a.frames[c$b]=[]),this._targetDic&&this._targetDic[c$g]&&(c$a.initValues[c$b]=this._targetDic[c$g][c$b]),c$c.sort(c$h._sortIndexFun),c$a.keys.push(c$b),this._calculateNodePropFrames(c$c,c$a.frames[c$b],c$b,c$g)},c$b.resetToInitState=function(){if(this._targetDic&&this._animationData){var c$a,c$b,c$c=this._animationData.nodes,c$d=0,c$g=c$c.length;for(c$d=0;c$d<c$g;c$d++)if(c$b=(c$a=c$c[c$d]).initValues){var c$h,c$i=this._targetDic[c$a.target];if(c$i)for(c$h in c$b)c$i[c$h]=c$b[c$h]}}},c$b._calculateNodePropFrames=function(c$a,c$b,c$c,c$d){var c$g=0,c$h=c$a.length-1;if(0<c$h){for(c$b.length=c$a[c$h].index+1,c$g=0;c$g<c$h;c$g++)this._dealKeyFrame(c$a[c$g]),this._calculateFrameValues(c$a[c$g],c$a[c$g+1],c$b);this._dealKeyFrame(c$a[c$g])}0==c$h&&(c$b[c$a[0].index]=c$a[0].value,this._animationNewFrames&&(this._animationNewFrames[c$a[0].index]=!0))},c$b._dealKeyFrame=function(c$a){c$a.label&&""!=c$a.label&&this.addLabel(c$a.label,c$a.index)},c$b._calculateFrameValues=function(c$a,c$b,c$c){var c$d,c$g=0,c$h=c$a.index,c$i=c$b.index,c$j=c$a.value,c$k=c$b.value-c$a.value,c$l=c$i-c$h;if(c$i>this._count&&(this._count=c$i),c$a.tween)for(null==(c$d=c$U[c$a.tweenMethod])&&(c$d=c$U.linearNone),c$g=c$h;c$g<c$i;c$g++)c$c[c$g]=c$d(c$g-c$h,c$j,c$k,c$l),this._animationNewFrames&&(this._animationNewFrames[c$g]=!0);else for(c$g=c$h;c$g<c$i;c$g++)c$c[c$g]=c$j;this._animationNewFrames&&(this._animationNewFrames[c$a.index]=!0,this._animationNewFrames[c$b.index]=!0),c$c[c$b.index]=c$b.value},c$h._sortIndexFun=null,c$h}(c$ra)),c$xa=function(c$b){function c$g(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",c$g.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=c$sa.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}c$m(c$g,"laya.display.Input",c$b);var c$a=c$g.prototype;return c$a.setSelection=function(c$a,c$b){this.focus=!0,laya.display.Input.inputElement.selectionStart=c$a,laya.display.Input.inputElement.selectionEnd=c$b},c$a._onUnDisplay=function(c$a){this.focus=!1},c$a._onMouseDown=function(c$a){this.focus=!0},c$a._syncInputTransform=function(){var c$a=this.nativeInput,c$b=c$$.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),c$c=this._width-this.padding[1]-this.padding[3],c$d=this._height-this.padding[0]-this.padding[2];c$J.isConchApp?(c$a.setScale(c$b.scaleX,c$b.scaleY),c$a.setSize(c$c,c$d),c$a.setPos(c$b.x,c$b.y)):(c$g.inputContainer.style.transform=c$g.inputContainer.style.webkitTransform="scale("+c$b.scaleX+","+c$b.scaleY+") rotate("+c$z.stage.canvasDegree+"deg)",c$a.style.width=c$c+"px",c$a.style.height=c$d+"px",c$g.inputContainer.style.left=c$b.x+"px",c$g.inputContainer.style.top=c$b.y+"px")},c$a.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},c$a._setInputMethod=function(){c$g.input.parentElement&&c$g.inputContainer.removeChild(c$g.input),c$g.area.parentElement&&c$g.inputContainer.removeChild(c$g.area),c$g.inputElement=this._multiline?c$g.area:c$g.input,c$g.inputContainer.appendChild(c$g.inputElement),c$sa.RightToLeft&&(c$g.inputElement.style.direction="rtl")},c$a._focusIn=function(){laya.display.Input.isInputting=!0;var c$a=this.nativeInput;this._focus=!0;var c$b=c$a.style;c$b.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),c$a.readOnly=!this._editable,c$J.isConchApp&&(c$a.setType(this._type),c$a.setForbidEdit(!this._editable)),c$a.maxLength=this._maxChars;this.padding;if(c$a.type=this._type,c$a.value=this._content,c$a.placeholder=this._prompt,c$z.stage.off("keydown",this,this._onKeyDown),c$z.stage.on("keydown",this,this._onKeyDown),(c$z.stage.focus=this).event("focus"),c$O.onPC&&c$a.focus(),!c$O.onMiniGame){this._text;this._text=null}this.typeset(),c$a.setColor(this._originColor),c$a.setFontSize(this.fontSize),c$a.setFontFace(c$O.onIPhone&&c$sa._fontFamilyMap[this.font]||this.font),c$J.isConchApp&&c$a.setMultiAble&&c$a.setMultiAble(this._multiline),c$b.lineHeight=this.leading+this.fontSize+"px",c$b.fontStyle=this.italic?"italic":"normal",c$b.fontWeight=this.bold?"bold":"normal",c$b.textAlign=this.align,c$b.padding="0 0",this._syncInputTransform(),!c$J.isConchApp&&c$O.onPC&&c$z.timer.frameLoop(1,this,this._syncInputTransform)},c$a._setPromptColor=function(){(c$g.promptStyleDOM=c$O.getElementById("promptStyle"))||((c$g.promptStyleDOM=c$O.createElement("style")).setAttribute("id","promptStyle"),c$O.document.head.appendChild(c$g.promptStyleDOM)),c$g.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},c$a._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(c$z.superSet(c$sa,this,"text",this._content),c$z.superSet(c$sa,this,"color",this._originColor)):(c$z.superSet(c$sa,this,"text",this._prompt),c$z.superSet(c$sa,this,"color",this._promptColor)),c$z.stage.off("keydown",this,this._onKeyDown),c$z.stage.focus=null,this.event("blur"),c$J.isConchApp&&this.nativeInput.blur(),c$O.onPC&&c$z.timer.clear(this,this._syncInputTransform)},c$a._onKeyDown=function(c$a){13===c$a.keyCode&&(c$O.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},c$a.changeText=function(c$a){this._content=c$a,this._focus?(this.nativeInput.value=c$a||"",this.event("change")):c$b.prototype.changeText.call(this,c$a)},c$q(0,c$a,"color",c$b.prototype._$get_color,function(c$a){this._focus&&this.nativeInput.setColor(c$a),c$z.superSet(c$sa,this,"color",this._content?c$a:this._promptColor),this._originColor=c$a}),c$q(0,c$a,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(c$a){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),c$q(0,c$a,"multiline",function(){return this._multiline},function(c$a){this._multiline=c$a,this.valign=c$a?"top":"middle"}),c$q(0,c$a,"maxChars",function(){return this._maxChars},function(c$a){c$a<=0&&(c$a=1e5),this._maxChars=c$a}),c$q(0,c$a,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(c$a){c$z.superSet(c$sa,this,"color",this._originColor),c$a+="",this._focus?(this.nativeInput.value=c$a||"",this.event("change")):(this._multiline||(c$a=c$a.replace(/\r?\n/g,"")),(this._content=c$a)?c$z.superSet(c$sa,this,"text",c$a):(c$z.superSet(c$sa,this,"text",this._prompt),c$z.superSet(c$sa,this,"color",this.promptColor)))}),c$q(0,c$a,"nativeInput",function(){return this._multiline?c$g.area:c$g.input}),c$q(0,c$a,"prompt",function(){return this._prompt},function(c$a){!this._text&&c$a&&c$z.superSet(c$sa,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?c$z.superSet(c$sa,this,"text",this._text==this._prompt?c$a:this._text):c$z.superSet(c$sa,this,"text",c$a),this._prompt=c$sa.langPacks&&c$sa.langPacks[c$a]?c$sa.langPacks[c$a]:c$a}),c$q(0,c$a,"focus",function(){return this._focus},function(c$a){var c$b=this.nativeInput;this._focus!==c$a&&(c$a?(c$b.target?c$b.target._focusOut():this._setInputMethod(),(c$b.target=this)._focusIn()):(c$b.target=null,this._focusOut(),c$O.document.body.scrollTop=0,c$b.blur(),c$J.isConchApp?c$b.setPos(-1e4,-1e4):c$g.inputContainer.contains(c$b)&&c$g.inputContainer.removeChild(c$b)))}),c$q(0,c$a,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(c$a){c$a?(-1<(c$a="[^"+c$a+"]").indexOf("^^")&&(c$a=c$a.replace("^^","")),this._restrictPattern=new RegExp(c$a,"g")):this._restrictPattern=null}),c$q(0,c$a,"editable",function(){return this._editable},function(c$a){this._editable=c$a,c$J.isConchApp&&c$g.input.setForbidEdit(!c$a)}),c$q(0,c$a,"promptColor",function(){return this._promptColor},function(c$a){this._promptColor=c$a,this._content||c$z.superSet(c$sa,this,"color",c$a)}),c$q(0,c$a,"type",function(){return this._type},function(c$a){this._getCSSStyle().password="password"==c$a,this._type=c$a,c$J.isConchApp&&this.nativeInput.setType(c$a)}),c$q(0,c$a,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(c$a){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),c$q(0,c$a,"asPassword",function(){return this._getCSSStyle().password},function(c$a){this._getCSSStyle().password=c$a,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),c$g.__init__=function(){c$g._createInputElement(),c$O.onMobile&&c$J.canvas.addEventListener(c$g.IOS_IFRAME?c$O.onMiniGame?"touchend":"click":"touchend",c$g._popupInputMethod)},c$g._popupInputMethod=function(c$a){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},c$g._createInputElement=function(){c$g._initInput(c$g.area=c$O.createElement("textarea")),c$g._initInput(c$g.input=c$O.createElement("input")),(c$g.inputContainer=c$O.createElement("div")).style.position="absolute",c$g.inputContainer.style.zIndex=1e5,c$O.container.appendChild(c$g.inputContainer),c$g.inputContainer.setPos=function(c$a,c$b){c$g.inputContainer.style.left=c$a+"px",c$g.inputContainer.style.top=c$b+"px"}},c$g._initInput=function(c$b){var c$a=c$b.style;c$a.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",c$a.resize="none",c$a.backgroundColor="transparent",c$a.border="none",c$a.outline="none",c$a.zIndex=1,c$b.addEventListener("input",c$g._processInputting),c$b.addEventListener("mousemove",c$g._stopEvent),c$b.addEventListener("mousedown",c$g._stopEvent),c$b.addEventListener("touchmove",c$g._stopEvent),c$b.setFontFace=function(c$a){c$b.style.fontFamily=c$a},c$J.isConchApp||(c$b.setColor=function(c$a){c$b.style.color=c$a},c$b.setFontSize=function(c$a){c$b.style.fontSize=c$a+"px"})},c$g._processInputting=function(c$a){var c$b=laya.display.Input.inputElement.target;if(c$b){var c$c=laya.display.Input.inputElement.value;c$b._restrictPattern&&(c$c=c$c.replace(/\u2006|\x27/g,""),c$b._restrictPattern.test(c$c)&&(c$c=c$c.replace(c$b._restrictPattern,""),laya.display.Input.inputElement.value=c$c)),c$b._text=c$c,c$b.event("input")}},c$g._stopEvent=function(c$a){"touchmove"==c$a.type&&c$a.preventDefault(),c$a.stopPropagation&&c$a.stopPropagation()},c$g.TYPE_TEXT="text",c$g.TYPE_PASSWORD="password",c$g.TYPE_EMAIL="email",c$g.TYPE_URL="url",c$g.TYPE_NUMBER="number",c$g.TYPE_RANGE="range",c$g.TYPE_DATE="date",c$g.TYPE_MONTH="month",c$g.TYPE_WEEK="week",c$g.TYPE_TIME="time",c$g.TYPE_DATE_TIME="datetime",c$g.TYPE_DATE_TIME_LOCAL="datetime-local",c$g.TYPE_SEARCH="search",c$g.input=null,c$g.area=null,c$g.inputElement=null,c$g.inputContainer=null,c$g.confirmButton=null,c$g.promptStyleDOM=null,c$g.inputHeight=45,c$g.isInputting=!1,c$g.stageMatrix=null,c$k(c$g,["IOS_IFRAME",function(){return this.IOS_IFRAME=c$O.onIOS&&c$O.window.top!=c$O.window.self}]),c$g}(c$sa),c$ya=function(c$a){function c$c(c$a,c$b){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,c$c.__super.call(this),c$a&&this._init_(c$a,c$b)}c$m(c$c,"laya.resource.HTMLImage",c$ua);var c$b=c$c.prototype;return c$b._init_=function(c$a,c$b){this._src=c$a,this._source=new c$O.window.Image,c$b&&(c$b.onload&&(this.onload=c$b.onload),c$b.onerror&&(this.onerror=c$b.onerror),c$b.onCreate&&c$b.onCreate(this)),0!=c$a.indexOf("data:image")&&(this._source.crossOrigin=""),c$a&&(this._source.src=c$a)},c$b.recreateResource=function(){var c$a=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var c$b=this;this._source=new c$O.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(c$b._needReleaseAgain)return c$b._needReleaseAgain=!1,c$b._source.onload=null,void(c$b._source=null);c$b._source.onload=null,c$b.memorySize=c$a._w*c$a._h*4,c$b._recreateLock=!1,c$b.completeCreate()},this._source.src=this._src}},c$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},c$b.onresize=function(){this._w=this._source.width,this._h=this._source.height},c$q(0,c$b,"onload",null,function(c$a){var c$b=this;this._onload=c$a,this._source&&(this._source.onload=null!=this._onload?function(){c$b.onresize(),c$b._onload()}:null)}),c$q(0,c$b,"onerror",null,function(c$a){var c$b=this;this._onerror=c$a,this._source&&(this._source.onerror=null!=this._onerror?function(){c$b._onerror()}:null)}),c$q(0,c$b,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(c$a){this._enableMerageInAtlas=c$a,c$J.isConchApp&&this._source&&(this._source.enableMerageInAtlas=c$a)}),c$c.create=function(c$a,c$b){return new c$c(c$a,c$b)},c$c}(),c$za=(function(c$h){function c$a(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,c$a.__super.call(this)}c$m(c$a,"laya.display.EffectAnimation",c$h);var c$b=c$a.prototype;c$b._onOtherBegin=function(c$a){c$a!=this&&this.stop()},c$b.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},c$b._onPlayAction=function(){this.play(0,!1)},c$b.play=function(c$a,c$b,c$c,c$d){void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=!0),void 0===c$c&&(c$c=""),void 0===c$d&&(c$d=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,c$a,c$b,c$c,c$d))},c$b._recordInitData=function(){if(this._aniKeys){var c$a,c$b,c$c=0;for(c$a=this._aniKeys.length,c$c=0;c$c<c$a;c$c++)c$b=this._aniKeys[c$c],this._initData[c$b]=this._target[c$b]}},c$b._displayToIndex=function(c$a){if(this._animationData){c$a<0&&(c$a=0),c$a>this._count&&(c$a=this._count);var c$b=this._animationData.nodes,c$c=0,c$d=c$b.length;for(c$d=1<c$d?1:c$d,c$c=0;c$c<c$d;c$c++)this._displayNodeToFrame(c$b[c$c],c$a)}},c$b._displayNodeToFrame=function(c$a,c$b,c$c){if(this._target){var c$d;c$d=this._target;var c$g,c$h,c$i,c$j,c$k=c$a.frames,c$l=c$a.keys,c$m=0,c$n=c$l.length;c$j=c$a.secondFrames;var c$o,c$p,c$q,c$r,c$s=0;for(c$m=0;c$m<c$n;c$m++)c$h=c$k[c$g=c$l[c$m]],c$i=-1==(c$s=c$j[c$g])?this._initData[c$g]:c$b<c$s?(c$q=(c$p=c$a.keyframes[c$g])[0]).tween?(null==(c$o=c$U[c$q.tweenMethod])&&(c$o=c$U.linearNone),c$r=c$p[1],c$o(c$b,this._initData[c$g],c$r.value-this._initData[c$g],c$r.index)):this._initData[c$g]:c$h.length>c$b?c$h[c$b]:c$h[c$h.length-1],c$d[c$g]=c$i}},c$b._calculateNodeKeyFrames=function(c$a){c$h.prototype._calculateNodeKeyFrames.call(this,c$a);var c$b,c$c,c$d,c$g=c$a.keyframes;c$a.target;for(c$b in c$d={},c$a.secondFrames=c$d,c$g)(c$c=c$g[c$b]).length<=1?c$d[c$b]=-1:c$d[c$b]=c$c[1].index},c$q(0,c$b,"target",function(){return this._target},function(c$a){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=c$a,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),c$q(0,c$b,"playEvent",null,function(c$a){(this._playEvents=c$a)&&this.addEvent()}),c$q(0,c$b,"effectData",null,function(c$a){var c$b;c$a&&((c$b=c$a.animations)&&c$b[0]&&(this._setUp({},c$b[0]),c$b[0].nodes&&c$b[0].nodes[0]&&(this._aniKeys=c$b[0].nodes[0].keys)))}),c$q(0,c$b,"effectClass",null,function(c$a){var c$b,c$c;(this._effectClass=c$R.getClass(c$a),this._effectClass)&&((c$b=this._effectClass.uiView)&&(c$c=c$b.animations)&&c$c[0]&&(this._setUp({},c$c[0]),c$c[0].nodes&&c$c[0].nodes[0]&&(this._aniKeys=c$c[0].nodes[0].keys)))}),c$a.EffectAnimationBegin="effectanimationbegin"}(c$wa),function(c$b){var c$D;function c$E(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,c$E.__super.call(this)}c$m(c$E,"laya.utils.GraphicAnimation",c$b);var c$a=c$E.prototype;return c$a._parseNodeList=function(c$a){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[c$a.compId]=c$a.props,c$a.compId&&this._nodeList.push(c$a.compId);var c$b=c$a.child;if(c$b){var c$c=0,c$d=c$b.length;for(c$c=0;c$c<c$d;c$c++)this._parseNodeList(c$b[c$c])}},c$a._calGraphicData=function(c$a){var c$b;if(this._setUp(null,c$a),this._createGraphicData(),this._nodeIDAniDic)for(c$b in this._nodeIDAniDic)this._nodeIDAniDic[c$b]=null},c$a._createGraphicData=function(){var c$a,c$b=[],c$c=0,c$d=this.count,c$g=this._animationNewFrames;for(c$g||(c$g=[]),c$c=0;c$c<c$d;c$c++)!c$g[c$c]&&c$a||(c$a=this._createFrameGraphic(c$c)),c$b.push(c$a);this._gList=c$b},c$a._createFrameGraphic=function(c$a){var c$b=c$F.createGraphics();return c$E._rootMatrix||(c$E._rootMatrix=new c$G),this._updateNodeGraphic(this._rootNode,c$a,c$E._rootMatrix,c$b),c$b},c$a._updateNodeGraphic=function(c$a,c$b,c$c,c$d,c$g){var c$h;void 0===c$g&&(c$g=1);var c$i,c$j,c$k,c$l=(c$h=this._nodeGDic[c$a.compId]=this._getNodeGraphicData(c$a.compId,c$b,this._nodeGDic[c$a.compId])).alpha*c$g;if(!(c$l<.01)&&(c$h.resultTransform||(c$h.resultTransform=c$G.create()),c$i=c$h.resultTransform,c$G.mul(c$h.transform,c$c,c$i),c$h.skin&&(c$j=this._getTextureByUrl(c$h.skin))&&(c$i._checkTransform()?(c$d.drawTexture(c$j,0,0,c$h.width,c$h.height,c$i,c$l),c$h.resultTransform=null):c$d.drawTexture(c$j,c$i.tx,c$i.ty,c$h.width,c$h.height,null,c$l)),c$k=c$a.child)){var c$m,c$n=0;for(c$m=c$k.length,c$n=0;c$n<c$m;c$n++)this._updateNodeGraphic(c$k[c$n],c$b,c$i,c$d,c$l)}},c$a._updateNoChilds=function(c$a,c$b){if(c$a.skin){var c$c=this._getTextureByUrl(c$a.skin);if(c$c){var c$d=c$a.transform;c$d._checkTransform();!c$d.bTransform?c$b.drawTexture(c$c,c$d.tx,c$d.ty,c$a.width,c$a.height,null,c$a.alpha):c$b.drawTexture(c$c,0,0,c$a.width,c$a.height,c$d.clone(),c$a.alpha)}}},c$a._updateNodeGraphic2=function(c$a,c$b,c$c){var c$d;if(c$d=this._nodeGDic[c$a.compId]=this._getNodeGraphicData(c$a.compId,c$b,this._nodeGDic[c$a.compId]),c$a.child){var c$g=c$d.transform;c$g._checkTransform();var c$h,c$i;c$i=(c$h=!c$g.bTransform)&&(0!=c$g.tx||0!=c$g.ty);var c$j,c$k,c$l;if((c$j=c$g.bTransform||1!=c$d.alpha)&&c$c.save(),1!=c$d.alpha&&c$c.alpha(c$d.alpha),c$h?c$i&&c$c.translate(c$g.tx,c$g.ty):c$c.transform(c$g.clone()),c$k=c$a.child,c$d.skin&&(c$l=this._getTextureByUrl(c$d.skin))&&c$c.drawTexture(c$l,0,0,c$d.width,c$d.height),c$k){var c$m,c$n=0;for(c$m=c$k.length,c$n=0;c$n<c$m;c$n++)this._updateNodeGraphic2(c$k[c$n],c$b,c$c)}c$j?c$c.restore():c$h?c$i&&c$c.translate(-c$g.tx,-c$g.ty):c$c.transform(c$g.clone().invert())}else this._updateNoChilds(c$d,c$c)},c$a._calculateNodeKeyFrames=function(c$a){c$b.prototype._calculateNodeKeyFrames.call(this,c$a),this._nodeIDAniDic[c$a.target]=c$a},c$a.getNodeDataByID=function(c$a){return this._nodeIDAniDic[c$a]},c$a._getParams=function(c$a,c$b,c$c,c$d){var c$g=c$E._temParam;c$g.length=c$b.length;var c$h=0,c$i=c$b.length;for(c$h=0;c$h<c$i;c$h++)c$g[c$h]=this._getObjVar(c$a,c$b[c$h][0],c$c,c$b[c$h][1],c$d);return c$g},c$a._getObjVar=function(c$a,c$b,c$c,c$d,c$g){if(c$a.hasOwnProperty(c$b)){var c$h=c$a[c$b];if(c$c>=c$h.length&&(c$c=c$h.length-1),null!=c$a[c$b][c$c])return c$a[c$b][c$c]}return c$g.hasOwnProperty(c$b)?c$g[c$b]:c$d},c$a._getNodeGraphicData=function(c$a,c$b,c$c){c$c||(c$c=c$D.create()),c$c.transform?c$c.transform.identity():c$c.transform=c$G.create();var c$d=this.getNodeDataByID(c$a);if(!c$d)return c$c;var c$g,c$h,c$i=c$d.frames,c$j=this._getParams(c$i,c$E._drawTextureCmd,c$b,this._nodeDefaultProps[c$a]),c$k=c$j[0],c$l=NaN,c$m=NaN,c$n=c$j[5],c$o=c$j[6],c$p=c$j[13],c$q=c$j[14],c$r=c$j[7],c$s=c$j[8],c$t=c$j[9],c$u=c$j[11],c$v=c$j[12];c$l=c$j[3],c$m=c$j[4],0!=c$l&&0!=c$m||(c$k=null),-1==c$l&&(c$l=0),-1==c$m&&(c$m=0),c$c.skin=c$k,c$c.width=c$l,c$c.height=c$m,c$k&&((c$g=this._getTextureByUrl(c$k))?(c$l||(c$l=c$g.sourceWidth),c$m||(c$m=c$g.sourceHeight)):console.warn("lost skin:",c$k,",you may load pics first")),c$c.alpha=c$j[10],c$h=c$c.transform,0!=c$p&&(c$n=c$p*c$l),0!=c$q&&(c$o=c$q*c$m),0==c$n&&0==c$o||c$h.translate(-c$n,-c$o);var c$w=null;if(c$t||1!==c$r||1!==c$s||c$u||c$v){(c$w=c$E._tempMt).identity(),c$w.bTransform=!0;var c$x=.0174532922222222*(c$t-c$u),c$y=.0174532922222222*(c$t+c$v),c$z=Math.cos(c$y),c$A=Math.sin(c$y),c$B=Math.sin(c$x),c$C=Math.cos(c$x);c$w.a=c$r*c$z,c$w.b=c$r*c$A,c$w.c=-c$s*c$B,c$w.d=c$s*c$C,c$w.tx=c$w.ty=0}return c$w&&(c$h=c$G.mul(c$h,c$w,c$h)),c$h.translate(c$j[1],c$j[2]),c$c},c$a._getTextureByUrl=function(c$a){return c$ja.getRes(c$a)},c$a.setAniData=function(c$a,c$b){if(c$a.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=c$a,this._parseNodeList(c$a);var c$c,c$d={},c$g=[],c$h=c$a.animations,c$i=0,c$j=c$h.length;for(c$i=0;c$i<c$j;c$i++)if(c$c=c$h[c$i],this._labels=null,(!c$b||c$b==c$c.name)&&c$c){try{this._calGraphicData(c$c)}catch(c$a){console.warn("parse animation fail:"+c$c.name+",empty animation created"),this._gList=[]}var c$k={};c$k.interval=1e3/c$c.frameRate,c$k.frames=this._gList,c$k.labels=this._labels,c$k.name=c$c.name,c$g.push(c$k),c$d[c$c.name]=c$k}this.animationList=c$g,this.animationDic=c$d}c$E._temParam.length=0},c$a.parseByData=function(c$a){var c$b,c$c;c$b=c$a.nodeRoot,c$c=c$a.aniO,delete c$a.nodeRoot,delete c$a.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=c$b,this._parseNodeList(c$b),this._labels=null;try{this._calGraphicData(c$c)}catch(c$a){console.warn("parse animation fail:"+c$c.name+",empty animation created"),this._gList=[]}var c$d=c$a;return c$d.interval=1e3/c$c.frameRate,c$d.frames=this._gList,c$d.labels=this._labels,c$d.name=c$c.name,c$d},c$a.setUpAniData=function(c$a){if(c$a.animations){var c$b,c$c={},c$d=[],c$g=c$a.animations,c$h=0,c$i=c$g.length;for(c$h=0;c$h<c$i;c$h++)if(c$b=c$g[c$h]){var c$j={};c$j.name=c$b.name,c$j.aniO=c$b,c$j.nodeRoot=c$a,c$d.push(c$j),c$c[c$b.name]=c$j}this.animationList=c$d,this.animationDic=c$c}},c$a._clear=function(){var c$a,c$b;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(c$a in this._nodeGDic)(c$b=this._nodeGDic[c$a])&&c$b.recover();this._nodeGDic=null},c$E.parseAnimationByData=function(c$a){var c$b;return c$E._I||(c$E._I=new c$E),c$b=c$E._I.parseByData(c$a),c$E._I._clear(),c$b},c$E.parseAnimationData=function(c$a){var c$b;return c$E._I||(c$E._I=new c$E),c$E._I.setUpAniData(c$a),(c$b={}).animationList=c$E._I.animationList,c$b.animationDic=c$E._I.animationDic,c$E._I._clear(),c$b},c$E._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],c$E._temParam=[],c$E._I=null,c$E._rootMatrix=null,c$k(c$E,["_tempMt",function(){return this._tempMt=new c$G}]),c$E.__init$=function(){c$D=function(){function c$a(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return c$m(c$a,""),c$a.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),c$W.recover("GraphicNode",this)},c$a.create=function(){return c$W.getItemByClass("GraphicNode",c$a)},c$a}()},c$E}(c$wa));c$z.__init([c$l,c$ka,c$J,c$O,c$Y,c$C,c$a,c$za])}(window,document,Laya),function(c$a,c$b,c$c){c$c.un,c$c.uns,c$c.static;var c$d=c$c.class;c$c.getset,c$c.__newvec;new(function(){function c$a(){}return c$d(c$a,"LayaMain"),c$a}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(c$a,c$b){"use strict";for(var c$c in Object.defineProperty(c$b,"__esModule",{value:!0}),Laya){var c$d=Laya[c$c];c$d&&c$d.__isclass&&(c$b[c$c]=c$d)}}),function(c$a,c$b,c$y){c$y.un,c$y.uns;var c$i=c$y.static,c$o=c$y.class,c$d=c$y.getset,c$h=c$y.__newvec,c$m=laya.maths.Arith,c$n=laya.maths.Bezier,c$c=laya.resource.Bitmap,c$p=laya.utils.Browser,c$k=laya.utils.Byte,c$q=laya.utils.Color,c$z=(laya.filters.ColorFilter,c$y.Config),c$g=laya.resource.Context,c$A=(laya.events.Event,laya.filters.Filter),c$j=laya.display.Graphics,c$l=laya.resource.HTMLCanvas,c$r=(laya.utils.HTMLChar,laya.resource.HTMLImage),c$s=laya.resource.HTMLSubImage,c$B=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),c$C=laya.maths.Point,c$D=laya.maths.Rectangle,c$t=laya.renders.Render,c$u=(laya.renders.RenderContext,laya.renders.RenderSprite),c$v=laya.resource.Resource,c$w=laya.resource.ResourceManager,c$x=laya.utils.RunDriver,c$E=laya.display.Sprite,c$F=laya.display.Stage,c$G=laya.utils.Stat,c$H=laya.utils.StringKey,c$I=(laya.display.css.Style,laya.system.System),c$J=laya.display.Text,c$K=laya.resource.Texture,c$L=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),c$M=laya.utils.VectorGraphManager;laya.utils.WordText;c$y.interface("laya.webgl.shapes.IShape"),c$y.interface("laya.webgl.submit.ISubmit"),c$y.interface("laya.webgl.text.ICharSegment"),c$y.interface("laya.webgl.canvas.save.ISaveData"),c$y.interface("laya.webgl.resource.IMergeAtlasBitmap"),c$y.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var c$N=function(){function c$a(){}c$o(c$a,"laya.filters.webgl.FilterActionGL");var c$b=c$a.prototype;return c$y.imps(c$b,{"laya.filters.IFilterActionGL":!0}),c$b.setValue=function(c$a){},c$b.setValueMix=function(c$a){},c$b.apply3d=function(c$a,c$b,c$c,c$d,c$g){return null},c$b.apply=function(c$a){return null},c$d(0,c$b,"typeMix",function(){return 0}),c$a}(),c$O=function(){function c$a(){}return c$o(c$a,"laya.webgl.shader.ShaderValue"),c$a}(),c$P=function(){var c$d,c$g;function c$a(c$a,c$b,c$c){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new c$g,void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0),this._cells=null,this._rowInfo=null,this._init(c$a,c$b),this._atlasID=c$c}c$o(c$a,"laya.webgl.atlas.AtlasGrid");var c$b=c$a.prototype;return c$b.getAltasID=function(){return this._atlasID},c$b.setAltasID=function(c$a){0<=c$a&&(this._atlasID=c$a)},c$b.addTex=function(c$a,c$b,c$c){var c$d=this._get(c$b,c$c);return 0==c$d.ret||(this._fill(c$d.x,c$d.y,c$b,c$c,c$a),this._texCount++),c$d},c$b._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},c$b._init=function(c$a,c$b){if(this._width=c$a,this._height=c$b,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=c$h(this._height);for(var c$c=0;c$c<this._height;c$c++)this._rowInfo[c$c]=new c$d;return this._clear(),!0},c$b._get=function(c$a,c$b){var c$c=new c$R;if(c$a>=this._failSize.width&&c$b>=this._failSize.height)return c$c;for(var c$d=-1,c$g=-1,c$h=this._width,c$i=this._height,c$j=this._cells,c$k=0;c$k<c$i;c$k++)if(!(this._rowInfo[c$k].spaceCount<c$a))for(var c$l=0;c$l<c$h;){var c$m=3*(c$k*c$h+c$l);if(0!=c$j[c$m]||c$j[1+c$m]<c$a||c$j[2+c$m]<c$b)c$l+=c$j[1+c$m];else{c$d=c$l,c$g=c$k;for(var c$n=0;c$n<c$a;c$n++)if(c$j[3*c$n+c$m+2]<c$b){c$d=-1;break}if(!(c$d<0))return c$c.ret=!0,c$c.x=c$d,c$c.y=c$g,c$c;c$l+=c$j[1+c$m]}}return c$c},c$b._fill=function(c$a,c$b,c$c,c$d,c$g){var c$h=this._width,c$i=this._height;this._check(c$a+c$c<=c$h&&c$b+c$d<=c$i);for(var c$j=c$b;c$j<c$d+c$b;++c$j){this._check(this._rowInfo[c$j].spaceCount>=c$c),this._rowInfo[c$j].spaceCount-=c$c;for(var c$k=0;c$k<c$c;c$k++){var c$l=3*(c$a+c$j*c$h+c$k);this._check(0==this._cells[c$l]),this._cells[c$l]=c$g,this._cells[1+c$l]=c$c,this._cells[2+c$l]=c$d}}if(0<c$a)for(c$j=0;c$j<c$d;++c$j){var c$m=0;for(c$k=c$a-1;0<=c$k&&0==this._cells[3*((c$b+c$j)*c$h+c$k)];--c$k,++c$m);for(c$k=c$m;0<c$k;--c$k)this._cells[3*((c$b+c$j)*c$h+c$a-c$k)+1]=c$k,this._check(0<c$k)}if(0<c$b)for(c$k=c$a;c$k<c$a+c$c;++c$k){for(c$m=0,c$j=c$b-1;0<=c$j&&0==this._cells[3*(c$k+c$j*c$h)];--c$j,c$m++);for(c$j=c$m;0<c$j;--c$j)this._cells[3*(c$k+(c$b-c$j)*c$h)+2]=c$j,this._check(0<c$j)}},c$b._check=function(c$a){0==c$a&&console.log("xtexMerger 错误啦")},c$b._clear=function(){for(var c$a=this._texCount=0;c$a<this._height;c$a++)this._rowInfo[c$a].spaceCount=this._width;for(var c$b=0;c$b<this._height;c$b++)for(var c$c=0;c$c<this._width;c$c++){var c$d=3*(c$b*this._width+c$c);this._cells[c$d]=0,this._cells[1+c$d]=this._width-c$c,this._cells[2+c$d]=this._width-c$b}this._failSize.width=this._width+1,this._failSize.height=this._height+1},c$a.__init$=function(){c$d=function(){function c$a(){this.spaceCount=0}return c$o(c$a,""),c$a}(),c$g=function(){function c$a(){this.width=0,this.height=0}return c$o(c$a,""),c$a}()},c$a}(),c$Q=function(){function c$t(c$a,c$b,c$c,c$d){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=c$a,this._height=c$b,this._gridSize=c$c,this._maxAtlaserCount=c$d,this._gridNumX=c$a/c$c,this._gridNumY=c$b/c$c,this._curAtlasIndex=0,this._atlaserArray=[]}c$o(c$t,"laya.webgl.atlas.AtlasResourceManager");var c$a=c$t.prototype;return c$a.setAtlasParam=function(c$a,c$b,c$c,c$d){if(1==this._setAtlasParam)return c$t._sid_=0,this._width=c$a,this._height=c$b,this._gridSize=c$c,this._maxAtlaserCount=c$d,this._gridNumX=c$a/c$c,this._gridNumY=c$b/c$c,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},c$a.pushData=function(c$a){var c$b,c$c=c$a.bitmap,c$d=-1,c$g=null,c$h=0,c$i=0;for(c$h=0,c$b=this._atlaserArray.length;c$h<c$b&&(c$i=(this._curAtlasIndex+c$h)%c$b,-1==(c$d=(c$g=this._atlaserArray[c$i]).findBitmapIsExist(c$c)));c$h++);if(-1!=c$d){var c$j=c$g.InAtlasWebGLImagesOffsetValue[c$d];return c$q=c$j[0],c$r=c$j[1],c$g.addToAtlas(c$a,c$q,c$r),!0}this._setAtlasParam=!1;for(var c$k=Math.ceil((c$a.bitmap.width+2)/this._gridSize),c$l=Math.ceil((c$a.bitmap.height+2)/this._gridSize),c$m=!1,c$n=0;c$n<2;c$n++){var c$o=this._maxAtlaserCount;for(c$h=0;c$h<c$o;c$h++){c$i=(this._curAtlasIndex+c$h)%c$o,this._atlaserArray.length-1>=c$i||this._atlaserArray.push(new c$Da(this._gridNumX,this._gridNumY,this._width,this._height,c$t._sid_++));var c$p=this._atlaserArray[c$i],c$q=0,c$r=0,c$s=c$p.addTex(1,c$k,c$l);if(c$s.ret){c$q=c$s.x*this._gridSize+1,c$r=c$s.y*this._gridSize+1,c$c.lock=!0,c$p.addToAtlasTexture(c$c,c$q,c$r),c$p.addToAtlas(c$a,c$q,c$r),c$m=!0,this._curAtlasIndex=c$i;break}}if(c$m)break;this._atlaserArray.push(new c$Da(this._gridNumX,this._gridNumY,this._width,this._height,c$t._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return c$m||console.log(">>>AtlasManager pushData error"),c$m},c$a.addToAtlas=function(c$a){laya.webgl.atlas.AtlasResourceManager.instance.pushData(c$a)},c$a.garbageCollection=function(){if(!0===this._needGC){for(var c$a=this._atlaserArray.length-this._maxAtlaserCount,c$b=0;c$b<c$a;c$b++)this._atlaserArray[c$b].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+c$a),this._atlaserArray.splice(0,c$a),this._needGC=!1}return!0},c$a.freeAll=function(){for(var c$a=0,c$b=this._atlaserArray.length;c$a<c$b;c$a++)this._atlaserArray[c$a].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},c$a.getAtlaserCount=function(){return this._atlaserArray.length},c$a.getAtlaserByIndex=function(c$a){return this._atlaserArray[c$a]},c$d(1,c$t,"instance",function(){return c$t._Instance||(c$t._Instance=new c$t(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),c$t._Instance}),c$d(1,c$t,"enabled",function(){return c$z.atlasEnable}),c$d(1,c$t,"atlasLimitWidth",function(){return c$t._atlasLimitWidth},function(c$a){c$t._atlasLimitWidth=c$a}),c$d(1,c$t,"atlasLimitHeight",function(){return c$t._atlasLimitHeight},function(c$a){c$t._atlasLimitHeight=c$a}),c$t._enable=function(){c$z.atlasEnable=!0},c$t._disable=function(){c$z.atlasEnable=!1},c$t.__init__=function(){c$t.atlasTextureWidth=2048,c$t.atlasTextureHeight=2048,c$t.maxTextureCount=6,c$t.atlasLimitWidth=512,c$t.atlasLimitHeight=512},c$t._atlasLimitWidth=0,c$t._atlasLimitHeight=0,c$t.gridSize=16,c$t.atlasTextureWidth=0,c$t.atlasTextureHeight=0,c$t.maxTextureCount=0,c$t._atlasRestore=0,c$t.BOARDER_TYPE_NO=0,c$t.BOARDER_TYPE_RIGHT=1,c$t.BOARDER_TYPE_LEFT=2,c$t.BOARDER_TYPE_BOTTOM=4,c$t.BOARDER_TYPE_TOP=8,c$t.BOARDER_TYPE_ALL=15,c$t._sid_=0,c$t._Instance=null,c$t}(),c$R=function(){function c$a(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return c$o(c$a,"laya.webgl.atlas.MergeFillInfo"),c$a}(),c$S=function(){function c$b(){}return c$o(c$b,"laya.webgl.canvas.BlendMode"),c$b._init_=function(c$a){c$b.fns=[c$b.BlendNormal,c$b.BlendAdd,c$b.BlendMultiply,c$b.BlendScreen,c$b.BlendOverlay,c$b.BlendLight,c$b.BlendMask,c$b.BlendDestinationOut],c$b.targetFns=[c$b.BlendNormalTarget,c$b.BlendAddTarget,c$b.BlendMultiplyTarget,c$b.BlendScreenTarget,c$b.BlendOverlayTarget,c$b.BlendLightTarget,c$b.BlendMask,c$b.BlendDestinationOut]},c$b.BlendNormal=function(c$a){c$a.blendFunc(1,771)},c$b.BlendAdd=function(c$a){c$a.blendFunc(1,772)},c$b.BlendMultiply=function(c$a){c$a.blendFunc(774,771)},c$b.BlendScreen=function(c$a){c$a.blendFunc(1,1)},c$b.BlendOverlay=function(c$a){c$a.blendFunc(1,769)},c$b.BlendLight=function(c$a){c$a.blendFunc(1,1)},c$b.BlendNormalTarget=function(c$a){c$a.blendFunc(1,771)},c$b.BlendAddTarget=function(c$a){c$a.blendFunc(1,772)},c$b.BlendMultiplyTarget=function(c$a){c$a.blendFunc(774,771)},c$b.BlendScreenTarget=function(c$a){c$a.blendFunc(1,1)},c$b.BlendOverlayTarget=function(c$a){c$a.blendFunc(1,769)},c$b.BlendLightTarget=function(c$a){c$a.blendFunc(1,1)},c$b.BlendMask=function(c$a){c$a.blendFunc(0,770)},c$b.BlendDestinationOut=function(c$a){c$a.blendFunc(0,0)},c$b.activeBlendFunction=null,c$b.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],c$b.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},c$b.NORMAL="normal",c$b.ADD="add",c$b.MULTIPLY="multiply",c$b.SCREEN="screen",c$b.LIGHT="light",c$b.OVERLAY="overlay",c$b.DESTINATIONOUT="destination-out",c$b.fns=[],c$b.targetFns=[],c$b}(),c$T=function(){function c$c(c$a){this._color=c$q.create("black"),this.setValue(c$a)}c$o(c$c,"laya.webgl.canvas.DrawStyle");var c$a=c$c.prototype;return c$a.setValue=function(c$a){if(c$a){if("string"==typeof c$a)return void(this._color=c$q.create(c$a));if(c$a instanceof laya.utils.Color)return void(this._color=c$a)}},c$a.reset=function(){this._color=c$q.create("black")},c$a.equal=function(c$a){return"string"==typeof c$a?this._color.strColor===c$a:c$a instanceof laya.utils.Color&&this._color.numColor===c$a.numColor},c$a.toColorStr=function(){return this._color.strColor},c$c.create=function(c$a){var c$b;if(c$a&&("string"==typeof c$a?c$b=c$q.create(c$a):c$a instanceof laya.utils.Color&&(c$b=c$a),c$b))return c$b._drawStyle||(c$b._drawStyle=new c$c(c$a));return laya.webgl.canvas.DrawStyle.DEFAULT},c$i(c$c,["DEFAULT",function(){return this.DEFAULT=new c$c("#000000")}]),c$c}(),c$U=function(){function c$a(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];c$wa.mainContext;this.ib=c$ea.create(35048),this.vb=c$fa.create(5)}c$o(c$a,"laya.webgl.canvas.Path");var c$b=c$a.prototype;return c$b.addPoint=function(c$a,c$b){this.tempArray.push(c$a,c$b)},c$b.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},c$b.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},c$b.polygon=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i;return this.geomatrys.push(this._curGeomatry=c$i=new c$Ha(c$a,c$b,c$c,c$d,c$g,c$h)),c$d||(c$i.fill=!1),null==c$h&&(c$i.borderWidth=0),c$i},c$b.setGeomtry=function(c$a){this.geomatrys.push(this._curGeomatry=c$a)},c$b.drawLine=function(c$a,c$b,c$c,c$d,c$g){var c$h;return this.closePath?this.geomatrys.push(this._curGeomatry=c$h=new c$Ga(c$a,c$b,c$c,c$d,c$g)):this.geomatrys.push(this._curGeomatry=c$h=new c$Fa(c$a,c$b,c$c,c$d,c$g)),c$h.fill=!1,c$h},c$b.update=function(){var c$a=this.ib._byteLength,c$b=this.geomatrys.length;this.offset=c$a;for(var c$c=this.geoStart;c$c<c$b;c$c++)this.geomatrys[c$c].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=c$b,this.count=(this.ib._byteLength-c$a)/c$ra.BYTES_PIDX},c$b.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},c$b.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},c$a}(),c$V=function(){function c$j(){}c$o(c$j,"laya.webgl.canvas.save.SaveBase");var c$a=c$j.prototype;return c$y.imps(c$a,{"laya.webgl.canvas.save.ISaveData":!0}),c$a.isSaveMark=function(){return!1},c$a.restore=function(c$a){this._dataObj[this._valueName]=this._value,(c$j._cache[c$j._cache._length++]=this)._newSubmit&&(c$a._curSubmit=c$ha.RENDERBASE,c$a._renderKey=0)},c$j._createArray=function(){var c$a=[];return c$a._length=0,c$a},c$j._init=function(){var c$a=c$j._namemap={};return c$a[1]="ALPHA",c$a[2]="fillStyle",c$a[8]="font",c$a[256]="lineWidth",c$a[512]="strokeStyle",c$a[8192]="_mergeID",c$a[1024]=c$a[2048]=c$a[4096]=[],c$a[16384]="textBaseline",c$a[32768]="textAlign",c$a[65536]="_nBlendType",c$a[1048576]="shader",c$a[2097152]="filters",c$a},c$j.save=function(c$a,c$b,c$c,c$d){if((c$a._saveMark._saveuse&c$b)!==c$b){c$a._saveMark._saveuse|=c$b;var c$g=c$j._cache,c$h=0<c$g._length?c$g[--c$g._length]:new c$j;c$h._value=c$c[c$h._valueName=c$j._namemap[c$b]],c$h._dataObj=c$c,c$h._newSubmit=c$d;var c$i=c$a._save;c$i[c$i._length++]=c$h}},c$j._cache=laya.webgl.canvas.save.SaveBase._createArray(),c$j._namemap=c$j._init(),c$j}(),c$W=function(){function c$h(){this._clipRect=new c$D}c$o(c$h,"laya.webgl.canvas.save.SaveClipRect");var c$a=c$h.prototype;return c$y.imps(c$a,{"laya.webgl.canvas.save.ISaveData":!0}),c$a.isSaveMark=function(){return!1},c$a.restore=function(c$a){c$a._clipRect=this._clipSaveRect,(c$h._cache[c$h._cache._length++]=this)._submitScissor.submitLength=c$a._submits._length-this._submitScissor.submitIndex,c$a._curSubmit=c$ha.RENDERBASE,c$a._renderKey=0},c$h.save=function(c$a,c$b){if(131072!=(131072&c$a._saveMark._saveuse)){c$a._saveMark._saveuse|=131072;var c$c=c$h._cache,c$d=0<c$c._length?c$c[--c$c._length]:new c$h;c$d._clipSaveRect=c$a._clipRect,c$a._clipRect=c$d._clipRect.copyFrom(c$a._clipRect),c$d._submitScissor=c$b;var c$g=c$a._save;c$g[c$g._length++]=c$d}},c$i(c$h,["_cache",function(){return this._cache=c$V._createArray()}]),c$h}(),c$X=function(){function c$p(){this._contextX=0,this._contextY=0,this._clipRect=new c$D,this._rect=new c$D,this._matrix=new c$B}c$o(c$p,"laya.webgl.canvas.save.SaveClipRectStencil");var c$a=c$p.prototype;return c$y.imps(c$a,{"laya.webgl.canvas.save.ISaveData":!0}),c$a.isSaveMark=function(){return!1},c$a.restore=function(c$a){c$ma.restore(c$a,this._rect,this._saveMatrix,this._contextX,this._contextY),c$a._clipRect=this._clipSaveRect,c$a._curMat=this._saveMatrix,c$a._x=this._contextX,c$a._y=this._contextY,c$p._cache[c$p._cache._length++]=this,c$a._curSubmit=c$ha.RENDERBASE},c$p.save=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l){if(262144!=(262144&c$a._saveMark._saveuse)){c$a._saveMark._saveuse|=262144;var c$m=c$p._cache,c$n=0<c$m._length?c$m[--c$m._length]:new c$p;c$n._clipSaveRect=c$a._clipRect,c$n._clipRect.setTo(c$i,c$j,c$k,c$l),c$a._clipRect=c$n._clipRect,c$n._rect.x=c$c,c$n._rect.y=c$d,c$n._rect.width=c$g,c$n._rect.height=c$h,c$n._contextX=c$a._x,c$n._contextY=c$a._y,c$n._saveMatrix=c$a._curMat,c$a._curMat.copyTo(c$n._matrix),c$a._curMat=c$n._matrix,c$n._submitStencil=c$b;var c$o=c$a._save;c$o[c$o._length++]=c$n}},c$i(c$p,["_cache",function(){return this._cache=c$V._createArray()}]),c$p}(),c$Y=function(){function c$d(){this._saveuse=0}c$o(c$d,"laya.webgl.canvas.save.SaveMark");var c$a=c$d.prototype;return c$y.imps(c$a,{"laya.webgl.canvas.save.ISaveData":!0}),c$a.isSaveMark=function(){return!0},c$a.restore=function(c$a){c$a._saveMark=this._preSaveMark,c$d._no[c$d._no._length++]=this},c$d.Create=function(c$a){var c$b=c$d._no,c$c=0<c$b._length?c$b[--c$b._length]:new c$d;return c$c._saveuse=0,c$c._preSaveMark=c$a._saveMark,c$a._saveMark=c$c},c$i(c$d,["_no",function(){return this._no=c$V._createArray()}]),c$d}(),c$Z=function(){function c$h(){this._matrix=new c$B}c$o(c$h,"laya.webgl.canvas.save.SaveTransform");var c$a=c$h.prototype;return c$y.imps(c$a,{"laya.webgl.canvas.save.ISaveData":!0}),c$a.isSaveMark=function(){return!1},c$a.restore=function(c$a){c$a._curMat=this._savematrix,c$h._no[c$h._no._length++]=this},c$h.save=function(c$a){var c$b=c$a._saveMark;if(2048!=(2048&c$b._saveuse)){c$b._saveuse|=2048;var c$c=c$h._no,c$d=0<c$c._length?c$c[--c$c._length]:new c$h;c$d._savematrix=c$a._curMat,c$a._curMat=c$a._curMat.copyTo(c$d._matrix);var c$g=c$a._save;c$g[c$g._length++]=c$d}},c$i(c$h,["_no",function(){return this._no=c$V._createArray()}]),c$h}(),c$$=function(){function c$g(){}c$o(c$g,"laya.webgl.canvas.save.SaveTranslate");var c$a=c$g.prototype;return c$y.imps(c$a,{"laya.webgl.canvas.save.ISaveData":!0}),c$a.isSaveMark=function(){return!1},c$a.restore=function(c$a){c$a._curMat;c$a._x=this._x,c$a._y=this._y,c$g._no[c$g._no._length++]=this},c$g.save=function(c$a){var c$b=c$g._no,c$c=0<c$b._length?c$b[--c$b._length]:new c$g;c$c._x=c$a._x,c$c._y=c$a._y;var c$d=c$a._save;c$d[c$d._length++]=c$c},c$i(c$g,["_no",function(){return this._no=c$V._createArray()}]),c$g}(),c$_=function(){function c$a(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new c$D}c$o(c$a,"laya.webgl.resource.RenderTargetMAX");var c$b=c$a.prototype;return c$b.setSP=function(c$a){this._sp=c$a},c$b.size=function(c$a,c$b){var c$c=this;this._width!==c$a||this._height!==c$b?(this.repaint=!0,this._width=c$a,this._height=c$b,this.target?this.target.size(c$a,c$b):this.target=c$Ma.create(c$a,c$b),this.target.hasListener("recovered")||this.target.on("recovered",this,function(c$a){c$y.timer.callLater(c$c._sp,c$c._sp.repaint)})):this.target.size(c$a,c$b)},c$b._flushToTarget=function(c$a,c$b){if(!c$b._destroy){var c$c=c$ua.worldScissorTest,c$d=c$ua.worldClipRect;c$ua.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,c$ua.worldScissorTest=!1,c$wa.mainContext.disable(3089);var c$g=c$ua.worldAlpha,c$h=c$ua.worldMatrix4,c$i=c$ua.worldMatrix,c$j=c$ua.worldFilters,c$k=c$ua.worldShaderDefines;if(c$ua.worldMatrix=c$B.EMPTY,c$ua.restoreTempArray(),c$ua.worldMatrix4=c$ua.TEMPMAT4_ARRAY,c$ua.worldAlpha=1,c$ua.worldFilters=null,c$ua.worldShaderDefines=null,c$La.activeShader=null,c$b.start(),c$z.showCanvasMark?c$b.clear(0,1,0,.3):c$b.clear(0,0,0,0),c$a.flush(),c$b.end(),c$La.activeShader=null,c$ua.worldAlpha=c$g,c$ua.worldMatrix4=c$h,c$ua.worldMatrix=c$i,c$ua.worldFilters=c$j,c$ua.worldShaderDefines=c$k,c$ua.worldScissorTest=c$c){var c$l=c$ua.height-c$d.y-c$d.height;c$wa.mainContext.scissor(c$d.x,c$l,c$d.width,c$d.height),c$wa.mainContext.enable(3089)}c$ua.worldClipRect=c$d}},c$b.flush=function(c$a){this.repaint&&(this._flushToTarget(c$a,this.target),this.repaint=!1)},c$b.drawTo=function(c$a,c$b,c$c,c$d,c$g){c$a.drawTexture(this.target.getTexture(),c$b,c$c,c$d,c$g,0,0)},c$b.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},c$a}(),c$e=function(){function c$a(){this.ALPHA=1,this.shaderType=0,this.defines=new c$Ea}return c$o(c$a,"laya.webgl.shader.d2.Shader2D"),c$a.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},c$a.__init__=function(){var c$a,c$b;c$Ya.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),c$Ya.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),c$Ya.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),c$Ya.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),c$Ya.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),c$Ya.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),c$Ya.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),c$Ya.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),c$a="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",c$b='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',c$Ya.preCompile2D(0,1,c$a,c$b,null),c$a="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",c$b='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',c$Ya.preCompile2D(0,2,c$a,c$b,null),c$a="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",c$b="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",c$Ya.preCompile2D(0,4,c$a,c$b,null),c$a="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",c$b='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',c$Ya.preCompile2D(0,256,c$a,c$b,null),c$a="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",c$b="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",c$Ya.preCompile2D(0,512,c$a,c$b,null)},c$a}(),c$f=function(){function c$b(c$a,c$b,c$c){this._value=0,this._name2int=c$a,this._int2name=c$b,this._int2nameMap=c$c}c$o(c$b,"laya.webgl.shader.ShaderDefines");var c$a=c$b.prototype;return c$a.add=function(c$a){return"string"==typeof c$a&&(c$a=this._name2int[c$a]),this._value|=c$a,this._value},c$a.addInt=function(c$a){return this._value|=c$a,this._value},c$a.remove=function(c$a){return"string"==typeof c$a&&(c$a=this._name2int[c$a]),this._value&=~c$a,this._value},c$a.isDefine=function(c$a){return(this._value&c$a)===c$a},c$a.getValue=function(){return this._value},c$a.setValue=function(c$a){this._value=c$a},c$a.toNameDic=function(){var c$a=this._int2nameMap[this._value];return c$a||c$b._toText(this._value,this._int2name,this._int2nameMap)},c$b._reg=function(c$a,c$b,c$c,c$d){c$d[c$c[c$a]=c$b]=c$a},c$b._toText=function(c$a,c$b,c$c){var c$d=c$c[c$a];if(c$d)return c$d;for(var c$g={},c$h=1,c$i=0;c$i<32&&!(c$a<(c$h=1<<c$i));c$i++)if(c$a&c$h){var c$j=c$b[c$h];c$j&&(c$g[c$j]="")}return c$c[c$a]=c$g},c$b._toInt=function(c$a,c$b){for(var c$c=c$a.split("."),c$d=0,c$g=0,c$h=c$c.length;c$g<c$h;c$g++){var c$i=c$b[c$c[c$g]];if(!c$i)throw new Error("Defines to int err:"+c$a+"/"+c$c[c$g]);c$d|=c$i}return c$d},c$b}(),c$aa=function(){function c$i(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new c$B}c$o(c$i,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var c$a=c$i.prototype;return c$a.init=function(c$a,c$b,c$c){if(c$b)this._vs=c$b;else{this._vs=[];var c$d=c$a.width,c$g=c$a.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(c$d,0,1,0,1,1,1,1),this._vs.push(c$d,c$g,1,1,1,1,1,1),this._vs.push(0,c$g,0,1,1,1,1,1)}c$c?this._ps=c$c:(c$i._defaultPS||(c$i._defaultPS=[]).push(0,1,3,3,1,2),this._ps=c$i._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=c$a},c$a.init2=function(c$a,c$b,c$c,c$d,c$g){this.transform&&(this.transform=null),c$c?this._ps=c$c:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=c$d,this._uvs=c$g,this.mEleNum=this._ps.length,this.mTexture=c$a,(c$t.isConchNode||c$t.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},c$a._initMyData=function(){var c$a=0,c$b=0,c$c=4*this._verticles.length;this._vs=c$i._tempVS;var c$d=!1;if(c$t.isConchNode||c$t.isConchApp?(this._vs.length=c$c,c$d=!0):this._vs.length<c$c&&(this._vs.length=c$c,c$d=!0),c$i._tVSLen=c$c,c$d)for(;c$a<c$c;)this._vs[c$a]=this._verticles[c$b],this._vs[c$a+1]=this._verticles[c$b+1],this._vs[c$a+2]=this._uvs[c$b],this._vs[c$a+3]=this._uvs[c$b+1],this._vs[c$a+4]=1,this._vs[c$a+5]=1,this._vs[c$a+6]=1,this._vs[c$a+7]=1,c$a+=8,c$b+=2;else for(;c$a<c$c;)this._vs[c$a]=this._verticles[c$b],this._vs[c$a+1]=this._verticles[c$b+1],this._vs[c$a+2]=this._uvs[c$b],this._vs[c$a+3]=this._uvs[c$b+1],c$a+=8,c$b+=2},c$a.getData2=function(c$a,c$b,c$c){var c$d;this.mVBBuffer=c$a,this.mIBBuffer=c$b,this._initMyData(),c$a.appendEx2(this._vs,Float32Array,c$i._tVSLen,4),this._indexStart=c$b._byteLength,(c$d=c$i._tempIB).length<this._ps.length&&(c$d.length=this._ps.length);for(var c$g=0,c$h=this._ps.length;c$g<c$h;c$g++)c$d[c$g]=this._ps[c$g]+c$c;c$b.appendEx2(c$d,Uint16Array,this._ps.length,2)},c$a.getData=function(c$a,c$b,c$c){if(this.mVBBuffer=c$a,this.mIBBuffer=c$b,c$a.append(this.mVBData),this._indexStart=c$b._byteLength,this.mIBData.start!=c$c){for(var c$d=0,c$g=this._ps.length;c$d<c$g;c$d++)this.mIBData[c$d]=this._ps[c$d]+c$c;this.mIBData.start=c$c}c$b.append(this.mIBData)},c$a.render=function(c$a,c$b,c$c){if(c$t.isWebGL&&this.mTexture){c$a._renderKey=0,c$a._shader2D.glTexture=null,c$ba.getInstance().addSkinMesh(this);var c$d=c$ha.createShape(c$a,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,c$Aa.create(512,0));this.transform||(this.transform=c$B.EMPTY),this.transform.translate(c$b,c$c),c$B.mul(this.transform,c$a._curMat,this._tempMatrix),this.transform.translate(-c$b,-c$c);var c$g=c$d.shaderValue,c$h=c$g.u_mmat2||c$ua.getMatrArray();c$ua.mat2MatArray(this._tempMatrix,c$h),c$g.textureHost=this.mTexture,c$g.offsetX=0,c$g.offsetY=0,c$g.u_mmat2=c$h,c$g.ALPHA=c$a._shader2D.ALPHA,c$a._submits[c$a._submits._length++]=c$d}else c$t.isConchApp&&this.mTexture&&(this.transform||(this.transform=c$B.EMPTY),c$a.setSkinMesh&&c$a.setSkinMesh(c$b,c$c,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},c$i._tempVS=[],c$i._tempIB=[],c$i._defaultPS=null,c$i._tVSLen=0,c$i}(),c$ba=function(){function c$a(){this.ib=null,this.vb=null;c$wa.mainContext;this.ib=c$ea.create(35048),this.vb=c$fa.create(8)}c$o(c$a,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var c$b=c$a.prototype;return c$b.addSkinMesh=function(c$a){c$a.getData2(this.vb,this.ib,this.vb._byteLength/32)},c$b.reset=function(){this.vb.clear(),this.ib.clear()},c$a.getInstance=function(){return c$a.instance=c$a.instance||new c$a},c$a.instance=null,c$a}(),c$ca=function(){function c$a(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===c$k&&(c$k=0),this.x=c$a,this.y=c$b,this.width=c$c,this.height=c$d,this.edges=c$g,this.color=c$h,this.borderWidth=c$i,this.borderColor=c$j}c$o(c$a,"laya.webgl.shapes.BasePoly");var c$b=c$a.prototype;return c$y.imps(c$b,{"laya.webgl.shapes.IShape":!0}),c$b.getData=function(c$a,c$b,c$c){},c$b.rebuild=function(c$a){},c$b.setMatrix=function(c$a){},c$b.needUpdate=function(c$a){return!0},c$b.sector=function(c$a,c$b,c$c){var c$d=this.x,c$g=this.y,c$h=this.edges,c$i=(this.r1-this.r0)/c$h,c$j=this.width,c$k=this.height,c$l=this.color,c$m=(c$l>>16&255)/255,c$n=(c$l>>8&255)/255,c$o=(255&c$l)/255;c$a.push(c$d,c$g,c$m,c$n,c$o);for(var c$p=0;c$p<c$h+1;c$p++)c$a.push(c$d+Math.sin(c$i*c$p+this.r0)*c$j,c$g+Math.cos(c$i*c$p+this.r0)*c$k),c$a.push(c$m,c$n,c$o);for(c$p=0;c$p<c$h;c$p++)c$b.push(c$c,c$c+c$p+1,c$c+c$p+2)},c$b.createLine2=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i,c$j,c$k,c$l,c$m,c$n,c$o,c$p,c$q,c$r,c$s,c$t,c$u,c$v,c$w,c$x,c$y,c$z,c$A,c$B,c$C=c$a.concat(),c$D=c$g,c$E=this.borderColor,c$F=(c$E>>16&255)/255,c$G=(c$E>>8&255)/255,c$H=(255&c$E)/255,c$I=c$C.length/2,c$J=c$d,c$K=c$c/2;c$k=c$C[0],c$l=c$C[1],c$r=c$k-(c$m=c$C[2]),c$q=(c$q=-(c$l-(c$n=c$C[3])))/(c$B=Math.sqrt(c$q*c$q+c$r*c$r))*c$K,c$r=c$r/c$B*c$K,c$D.push(c$k-c$q+this.x,c$l-c$r+this.y,c$F,c$G,c$H,c$k+c$q+this.x,c$l+c$r+this.y,c$F,c$G,c$H);for(var c$L=1;c$L<c$I-1;c$L++)c$k=c$C[2*(c$L-1)],c$l=c$C[2*(c$L-1)+1],c$m=c$C[2*c$L],c$n=c$C[2*c$L+1],c$o=c$C[2*(c$L+1)],c$p=c$C[2*(c$L+1)+1],c$r=c$k-c$m,c$t=c$m-c$o,c$w=(-(c$q=(c$q=-(c$l-c$n))/(c$B=Math.sqrt(c$q*c$q+c$r*c$r))*c$K)+c$k)*(-(c$r=c$r/c$B*c$K)+c$n)-(-c$q+c$m)*(-c$r+c$l),c$z=(-(c$s=(c$s=-(c$n-c$p))/(c$B=Math.sqrt(c$s*c$s+c$t*c$t))*c$K)+c$o)*(-(c$t=c$t/c$B*c$K)+c$n)-(-c$s+c$m)*(-c$t+c$p),c$A=(c$u=-c$r+c$l-(-c$r+c$n))*(c$y=-c$s+c$m-(-c$s+c$o))-(c$x=-c$t+c$p-(-c$t+c$n))*(c$v=-c$q+c$m-(-c$q+c$k)),Math.abs(c$A)<.1?(c$A+=10.1,c$D.push(c$m-c$q+this.x,c$n-c$r+this.y,c$F,c$G,c$H,c$m+c$q+this.x,c$n+c$r+this.y,c$F,c$G,c$H)):(((c$i=(c$v*c$z-c$y*c$w)/c$A)-c$m)*(c$i-c$m)+((c$j=(c$x*c$w-c$u*c$z)/c$A)-c$n)+(c$j-c$n),c$D.push(c$i+this.x,c$j+this.y,c$F,c$G,c$H,c$m-(c$i-c$m)+this.x,c$n-(c$j-c$n)+this.y,c$F,c$G,c$H));c$k=c$C[c$C.length-4],c$l=c$C[c$C.length-3],c$r=c$k-(c$m=c$C[c$C.length-2]),c$q=(c$q=-(c$l-(c$n=c$C[c$C.length-1])))/(c$B=Math.sqrt(c$q*c$q+c$r*c$r))*c$K,c$r=c$r/c$B*c$K,c$D.push(c$m-c$q+this.x,c$n-c$r+this.y,c$F,c$G,c$H,c$m+c$q+this.x,c$n+c$r+this.y,c$F,c$G,c$H);var c$M=c$h;for(c$L=1;c$L<c$M;c$L++)c$b.push(c$J+2*(c$L-1),c$J+2*(c$L-1)+1,c$J+2*c$L+1,c$J+2*c$L+1,c$J+2*c$L,c$J+2*(c$L-1));return c$D},c$b.createLine=function(c$a,c$b,c$c,c$d){var c$g=c$a.concat(),c$h=c$a,c$i=this.borderColor,c$j=(c$i>>16&255)/255,c$k=(c$i>>8&255)/255,c$l=(255&c$i)/255;c$g.splice(0,5);var c$m,c$n,c$o,c$p,c$q,c$r,c$s,c$t,c$u,c$v,c$w,c$x,c$y,c$z,c$A,c$B,c$C,c$D,c$E,c$F,c$G=c$g.length/5,c$H=c$d,c$I=c$c/2;c$o=c$g[0],c$p=c$g[1],c$v=c$o-(c$q=c$g[5]),c$u=(c$u=-(c$p-(c$r=c$g[6])))/(c$F=Math.sqrt(c$u*c$u+c$v*c$v))*c$I,c$v=c$v/c$F*c$I,c$h.push(c$o-c$u,c$p-c$v,c$j,c$k,c$l,c$o+c$u,c$p+c$v,c$j,c$k,c$l);for(var c$J=1;c$J<c$G-1;c$J++)c$o=c$g[5*(c$J-1)],c$p=c$g[5*(c$J-1)+1],c$q=c$g[5*c$J],c$r=c$g[5*c$J+1],c$s=c$g[5*(c$J+1)],c$t=c$g[5*(c$J+1)+1],c$v=c$o-c$q,c$x=c$q-c$s,c$A=(-(c$u=(c$u=-(c$p-c$r))/(c$F=Math.sqrt(c$u*c$u+c$v*c$v))*c$I)+c$o)*(-(c$v=c$v/c$F*c$I)+c$r)-(-c$u+c$q)*(-c$v+c$p),c$D=(-(c$w=(c$w=-(c$r-c$t))/(c$F=Math.sqrt(c$w*c$w+c$x*c$x))*c$I)+c$s)*(-(c$x=c$x/c$F*c$I)+c$r)-(-c$w+c$q)*(-c$x+c$t),c$E=(c$y=-c$v+c$p-(-c$v+c$r))*(c$C=-c$w+c$q-(-c$w+c$s))-(c$B=-c$x+c$t-(-c$x+c$r))*(c$z=-c$u+c$q-(-c$u+c$o)),Math.abs(c$E)<.1?(c$E+=10.1,c$h.push(c$q-c$u,c$r-c$v,c$j,c$k,c$l,c$q+c$u,c$r+c$v,c$j,c$k,c$l)):(((c$m=(c$z*c$D-c$C*c$A)/c$E)-c$q)*(c$m-c$q)+((c$n=(c$B*c$A-c$y*c$D)/c$E)-c$r)+(c$n-c$r),c$h.push(c$m,c$n,c$j,c$k,c$l,c$q-(c$m-c$q),c$r-(c$n-c$r),c$j,c$k,c$l));c$o=c$g[c$g.length-10],c$p=c$g[c$g.length-9],c$v=c$o-(c$q=c$g[c$g.length-5]),c$u=(c$u=-(c$p-(c$r=c$g[c$g.length-4])))/(c$F=Math.sqrt(c$u*c$u+c$v*c$v))*c$I,c$v=c$v/c$F*c$I,c$h.push(c$q-c$u,c$r-c$v,c$j,c$k,c$l,c$q+c$u,c$r+c$v,c$j,c$k,c$l);var c$K=this.edges+1;for(c$J=1;c$J<c$K;c$J++)c$b.push(c$H+2*(c$J-1),c$H+2*(c$J-1)+1,c$H+2*c$J+1,c$H+2*c$J+1,c$H+2*c$J,c$H+2*(c$J-1));return c$h},c$b.createLoopLine=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i=c$a.concat(),c$j=c$g||c$a,c$k=this.borderColor,c$l=(c$k>>16&255)/255,c$m=(c$k>>8&255)/255,c$n=(255&c$k)/255;c$i.splice(0,5);var c$o=[c$i[0],c$i[1]],c$p=[c$i[c$i.length-5],c$i[c$i.length-4]],c$q=c$p[0]+.5*(c$o[0]-c$p[0]),c$r=c$p[1]+.5*(c$o[1]-c$p[1]);c$i.unshift(c$q,c$r,0,0,0),c$i.push(c$q,c$r,0,0,0);var c$s,c$t,c$u,c$v,c$w,c$x,c$y,c$z,c$A,c$B,c$C,c$D,c$E,c$F,c$G,c$H,c$I,c$J,c$K,c$L,c$M=c$i.length/5,c$N=c$d,c$O=c$c/2;c$u=c$i[0],c$v=c$i[1],c$B=c$u-(c$w=c$i[5]),c$A=(c$A=-(c$v-(c$x=c$i[6])))/(c$L=Math.sqrt(c$A*c$A+c$B*c$B))*c$O,c$B=c$B/c$L*c$O,c$j.push(c$u-c$A,c$v-c$B,c$l,c$m,c$n,c$u+c$A,c$v+c$B,c$l,c$m,c$n);for(var c$P=1;c$P<c$M-1;c$P++)c$u=c$i[5*(c$P-1)],c$v=c$i[5*(c$P-1)+1],c$w=c$i[5*c$P],c$x=c$i[5*c$P+1],c$y=c$i[5*(c$P+1)],c$z=c$i[5*(c$P+1)+1],c$B=c$u-c$w,c$D=c$w-c$y,c$G=(-(c$A=(c$A=-(c$v-c$x))/(c$L=Math.sqrt(c$A*c$A+c$B*c$B))*c$O)+c$u)*(-(c$B=c$B/c$L*c$O)+c$x)-(-c$A+c$w)*(-c$B+c$v),c$J=(-(c$C=(c$C=-(c$x-c$z))/(c$L=Math.sqrt(c$C*c$C+c$D*c$D))*c$O)+c$y)*(-(c$D=c$D/c$L*c$O)+c$x)-(-c$C+c$w)*(-c$D+c$z),c$K=(c$E=-c$B+c$v-(-c$B+c$x))*(c$I=-c$C+c$w-(-c$C+c$y))-(c$H=-c$D+c$z-(-c$D+c$x))*(c$F=-c$A+c$w-(-c$A+c$u)),Math.abs(c$K)<.1?(c$K+=10.1,c$j.push(c$w-c$A,c$x-c$B,c$l,c$m,c$n,c$w+c$A,c$x+c$B,c$l,c$m,c$n)):(((c$s=(c$F*c$J-c$I*c$G)/c$K)-c$w)*(c$s-c$w)+((c$t=(c$H*c$G-c$E*c$J)/c$K)-c$x)+(c$t-c$x),c$j.push(c$s,c$t,c$l,c$m,c$n,c$w-(c$s-c$w),c$x-(c$t-c$x),c$l,c$m,c$n));c$h&&(c$b=c$h);var c$Q=this.edges+1;for(c$P=1;c$P<c$Q;c$P++)c$b.push(c$N+2*(c$P-1),c$N+2*(c$P-1)+1,c$N+2*c$P+1,c$N+2*c$P+1,c$N+2*c$P,c$N+2*(c$P-1));return c$b.push(c$N+2*(c$P-1),c$N+2*(c$P-1)+1,c$N+1,c$N+1,c$N,c$N+2*(c$P-1)),c$j},c$a}(),c$da=function(){function c$r(){}return c$o(c$r,"laya.webgl.shapes.Earcut"),c$r.earcut=function(c$a,c$b,c$c){c$c=c$c||2;var c$d,c$g,c$h,c$i,c$j,c$k,c$l,c$m=c$b&&c$b.length,c$n=c$m?c$b[0]*c$c:c$a.length,c$o=c$r.linkedList(c$a,0,c$n,c$c,!0),c$p=[];if(!c$o)return c$p;if(c$m&&(c$o=c$r.eliminateHoles(c$a,c$b,c$o,c$c)),c$a.length>80*c$c){c$d=c$h=c$a[0],c$g=c$i=c$a[1];for(var c$q=c$c;c$q<c$n;c$q+=c$c)(c$j=c$a[c$q])<c$d&&(c$d=c$j),(c$k=c$a[c$q+1])<c$g&&(c$g=c$k),c$h<c$j&&(c$h=c$j),c$i<c$k&&(c$i=c$k);c$l=0!==(c$l=Math.max(c$h-c$d,c$i-c$g))?1/c$l:0}return c$r.earcutLinked(c$o,c$p,c$c,c$d,c$g,c$l),c$p},c$r.linkedList=function(c$a,c$b,c$c,c$d,c$g){var c$h,c$i;if(c$g===0<c$r.signedArea(c$a,c$b,c$c,c$d))for(c$h=c$b;c$h<c$c;c$h+=c$d)c$i=c$r.insertNode(c$h,c$a[c$h],c$a[c$h+1],c$i);else for(c$h=c$c-c$d;c$b<=c$h;c$h-=c$d)c$i=c$r.insertNode(c$h,c$a[c$h],c$a[c$h+1],c$i);return c$i&&c$r.equals(c$i,c$i.next)&&(c$r.removeNode(c$i),c$i=c$i.next),c$i},c$r.filterPoints=function(c$a,c$b){if(!c$a)return c$a;c$b||(c$b=c$a);var c$c,c$d=c$a;do{if(c$c=!1,c$d.steiner||!c$r.equals(c$d,c$d.next)&&0!==c$r.area(c$d.prev,c$d,c$d.next))c$d=c$d.next;else{if(c$r.removeNode(c$d),(c$d=c$b=c$d.prev)===c$d.next)break;c$c=!0}}while(c$c||c$d!==c$b);return c$b},c$r.earcutLinked=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){if(c$a){!c$i&&c$h&&c$r.indexCurve(c$a,c$d,c$g,c$h);for(var c$j,c$k,c$l=c$a;c$a.prev!==c$a.next;)if(c$j=c$a.prev,c$k=c$a.next,c$h?c$r.isEarHashed(c$a,c$d,c$g,c$h):c$r.isEar(c$a))c$b.push(c$j.i/c$c),c$b.push(c$a.i/c$c),c$b.push(c$k.i/c$c),c$r.removeNode(c$a),c$a=c$k.next,c$l=c$k.next;else if((c$a=c$k)===c$l){c$i?1===c$i?(c$a=c$r.cureLocalIntersections(c$a,c$b,c$c),c$r.earcutLinked(c$a,c$b,c$c,c$d,c$g,c$h,2)):2===c$i&&c$r.splitEarcut(c$a,c$b,c$c,c$d,c$g,c$h):c$r.earcutLinked(c$r.filterPoints(c$a,null),c$b,c$c,c$d,c$g,c$h,1);break}}},c$r.isEar=function(c$a){var c$b=c$a.prev,c$c=c$a,c$d=c$a.next;if(0<=c$r.area(c$b,c$c,c$d))return!1;for(var c$g=c$a.next.next;c$g!==c$a.prev;){if(c$r.pointInTriangle(c$b.x,c$b.y,c$c.x,c$c.y,c$d.x,c$d.y,c$g.x,c$g.y)&&0<=c$r.area(c$g.prev,c$g,c$g.next))return!1;c$g=c$g.next}return!0},c$r.isEarHashed=function(c$a,c$b,c$c,c$d){var c$g=c$a.prev,c$h=c$a,c$i=c$a.next;if(0<=c$r.area(c$g,c$h,c$i))return!1;for(var c$j=c$g.x<c$h.x?c$g.x<c$i.x?c$g.x:c$i.x:c$h.x<c$i.x?c$h.x:c$i.x,c$k=c$g.y<c$h.y?c$g.y<c$i.y?c$g.y:c$i.y:c$h.y<c$i.y?c$h.y:c$i.y,c$l=c$g.x>c$h.x?c$g.x>c$i.x?c$g.x:c$i.x:c$h.x>c$i.x?c$h.x:c$i.x,c$m=c$g.y>c$h.y?c$g.y>c$i.y?c$g.y:c$i.y:c$h.y>c$i.y?c$h.y:c$i.y,c$n=c$r.zOrder(c$j,c$k,c$b,c$c,c$d),c$o=c$r.zOrder(c$l,c$m,c$b,c$c,c$d),c$p=c$a.nextZ;c$p&&c$p.z<=c$o;){if(c$p!==c$a.prev&&c$p!==c$a.next&&c$r.pointInTriangle(c$g.x,c$g.y,c$h.x,c$h.y,c$i.x,c$i.y,c$p.x,c$p.y)&&0<=c$r.area(c$p.prev,c$p,c$p.next))return!1;c$p=c$p.nextZ}for(c$p=c$a.prevZ;c$p&&c$p.z>=c$n;){if(c$p!==c$a.prev&&c$p!==c$a.next&&c$r.pointInTriangle(c$g.x,c$g.y,c$h.x,c$h.y,c$i.x,c$i.y,c$p.x,c$p.y)&&0<=c$r.area(c$p.prev,c$p,c$p.next))return!1;c$p=c$p.prevZ}return!0},c$r.cureLocalIntersections=function(c$a,c$b,c$c){var c$d=c$a;do{var c$g=c$d.prev,c$h=c$d.next.next;!c$r.equals(c$g,c$h)&&c$r.intersects(c$g,c$d,c$d.next,c$h)&&c$r.locallyInside(c$g,c$h)&&c$r.locallyInside(c$h,c$g)&&(c$b.push(c$g.i/c$c),c$b.push(c$d.i/c$c),c$b.push(c$h.i/c$c),c$r.removeNode(c$d),c$r.removeNode(c$d.next),c$d=c$a=c$h),c$d=c$d.next}while(c$d!==c$a);return c$d},c$r.splitEarcut=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i=c$a;do{for(var c$j=c$i.next.next;c$j!==c$i.prev;){if(c$i.i!==c$j.i&&c$r.isValidDiagonal(c$i,c$j)){var c$k=c$r.splitPolygon(c$i,c$j);return c$i=c$r.filterPoints(c$i,c$i.next),c$k=c$r.filterPoints(c$k,c$k.next),c$r.earcutLinked(c$i,c$b,c$c,c$d,c$g,c$h),void c$r.earcutLinked(c$k,c$b,c$c,c$d,c$g,c$h)}c$j=c$j.next}c$i=c$i.next}while(c$i!==c$a)},c$r.eliminateHoles=function(c$a,c$b,c$c,c$d){var c$g,c$h,c$i,c$j,c$k,c$l=[];for(c$g=0,c$h=c$b.length;c$g<c$h;c$g++)c$i=c$b[c$g]*c$d,c$j=c$g<c$h-1?c$b[c$g+1]*c$d:c$a.length,(c$k=c$r.linkedList(c$a,c$i,c$j,c$d,!1))===c$k.next&&(c$k.steiner=!0),c$l.push(c$r.getLeftmost(c$k));for(c$l.sort(c$r.compareX),c$g=0;c$g<c$l.length;c$g++)c$r.eliminateHole(c$l[c$g],c$c),c$c=c$r.filterPoints(c$c,c$c.next);return c$c},c$r.compareX=function(c$a,c$b){return c$a.x-c$b.x},c$r.eliminateHole=function(c$a,c$b){if(c$b=c$r.findHoleBridge(c$a,c$b)){var c$c=c$r.splitPolygon(c$b,c$a);c$r.filterPoints(c$c,c$c.next)}},c$r.findHoleBridge=function(c$a,c$b){var c$c,c$d=c$b,c$g=c$a.x,c$h=c$a.y,c$i=-1/0;do{if(c$h<=c$d.y&&c$h>=c$d.next.y&&c$d.next.y!==c$d.y){var c$j=c$d.x+(c$h-c$d.y)*(c$d.next.x-c$d.x)/(c$d.next.y-c$d.y);if(c$j<=c$g&&c$i<c$j){if((c$i=c$j)===c$g){if(c$h===c$d.y)return c$d;if(c$h===c$d.next.y)return c$d.next}c$c=c$d.x<c$d.next.x?c$d:c$d.next}}c$d=c$d.next}while(c$d!==c$b);if(!c$c)return null;if(c$g===c$i)return c$c.prev;var c$k,c$l=c$c,c$m=c$c.x,c$n=c$c.y,c$o=1/0;for(c$d=c$c.next;c$d!==c$l;)c$g>=c$d.x&&c$d.x>=c$m&&c$g!==c$d.x&&c$r.pointInTriangle(c$h<c$n?c$g:c$i,c$h,c$m,c$n,c$h<c$n?c$i:c$g,c$h,c$d.x,c$d.y)&&((c$k=Math.abs(c$h-c$d.y)/(c$g-c$d.x))<c$o||c$k===c$o&&c$d.x>c$c.x)&&c$r.locallyInside(c$d,c$a)&&(c$c=c$d,c$o=c$k),c$d=c$d.next;return c$c},c$r.indexCurve=function(c$a,c$b,c$c,c$d){for(var c$g=c$a;null===c$g.z&&(c$g.z=c$r.zOrder(c$g.x,c$g.y,c$b,c$c,c$d)),c$g.prevZ=c$g.prev,c$g.nextZ=c$g.next,(c$g=c$g.next)!==c$a;);c$g.prevZ.nextZ=null,c$g.prevZ=null,c$r.sortLinked(c$g)},c$r.sortLinked=function(c$a){var c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l=1;do{for(c$c=c$a,c$h=c$a=null,c$i=0;c$c;){for(c$i++,c$d=c$c,c$b=c$j=0;c$b<c$l&&(c$j++,c$d=c$d.nextZ);c$b++);for(c$k=c$l;0<c$j||0<c$k&&c$d;)0!==c$j&&(0===c$k||!c$d||c$c.z<=c$d.z)?(c$c=(c$g=c$c).nextZ,c$j--):(c$d=(c$g=c$d).nextZ,c$k--),c$h?c$h.nextZ=c$g:c$a=c$g,c$g.prevZ=c$h,c$h=c$g;c$c=c$d}c$h.nextZ=null,c$l*=2}while(1<c$i);return c$a},c$r.zOrder=function(c$a,c$b,c$c,c$d,c$g){return(c$a=1431655765&((c$a=858993459&((c$a=252645135&((c$a=16711935&((c$a=32767*(c$a-c$c)*c$g)|c$a<<8))|c$a<<4))|c$a<<2))|c$a<<1))|(c$b=1431655765&((c$b=858993459&((c$b=252645135&((c$b=16711935&((c$b=32767*(c$b-c$d)*c$g)|c$b<<8))|c$b<<4))|c$b<<2))|c$b<<1))<<1},c$r.getLeftmost=function(c$a){for(var c$b=c$a,c$c=c$a;c$b.x<c$c.x&&(c$c=c$b),(c$b=c$b.next)!==c$a;);return c$c},c$r.pointInTriangle=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){return 0<=(c$g-c$i)*(c$b-c$j)-(c$a-c$i)*(c$h-c$j)&&0<=(c$a-c$i)*(c$d-c$j)-(c$c-c$i)*(c$b-c$j)&&0<=(c$c-c$i)*(c$h-c$j)-(c$g-c$i)*(c$d-c$j)},c$r.isValidDiagonal=function(c$a,c$b){return c$a.next.i!==c$b.i&&c$a.prev.i!==c$b.i&&!c$r.intersectsPolygon(c$a,c$b)&&c$r.locallyInside(c$a,c$b)&&c$r.locallyInside(c$b,c$a)&&c$r.middleInside(c$a,c$b)},c$r.area=function(c$a,c$b,c$c){return(c$b.y-c$a.y)*(c$c.x-c$b.x)-(c$b.x-c$a.x)*(c$c.y-c$b.y)},c$r.equals=function(c$a,c$b){return c$a.x===c$b.x&&c$a.y===c$b.y},c$r.intersects=function(c$a,c$b,c$c,c$d){return!!(c$r.equals(c$a,c$b)&&c$r.equals(c$c,c$d)||c$r.equals(c$a,c$d)&&c$r.equals(c$c,c$b))||0<c$r.area(c$a,c$b,c$c)!=0<c$r.area(c$a,c$b,c$d)&&0<c$r.area(c$c,c$d,c$a)!=0<c$r.area(c$c,c$d,c$b)},c$r.intersectsPolygon=function(c$a,c$b){var c$c=c$a;do{if(c$c.i!==c$a.i&&c$c.next.i!==c$a.i&&c$c.i!==c$b.i&&c$c.next.i!==c$b.i&&c$r.intersects(c$c,c$c.next,c$a,c$b))return!0;c$c=c$c.next}while(c$c!==c$a);return!1},c$r.locallyInside=function(c$a,c$b){return c$r.area(c$a.prev,c$a,c$a.next)<0?0<=c$r.area(c$a,c$b,c$a.next)&&0<=c$r.area(c$a,c$a.prev,c$b):c$r.area(c$a,c$b,c$a.prev)<0||c$r.area(c$a,c$a.next,c$b)<0},c$r.middleInside=function(c$a,c$b){for(var c$c=c$a,c$d=!1,c$g=(c$a.x+c$b.x)/2,c$h=(c$a.y+c$b.y)/2;c$c.y>c$h!=c$c.next.y>c$h&&c$c.next.y!==c$c.y&&c$g<(c$c.next.x-c$c.x)*(c$h-c$c.y)/(c$c.next.y-c$c.y)+c$c.x&&(c$d=!c$d),(c$c=c$c.next)!==c$a;);return c$d},c$r.splitPolygon=function(c$a,c$b){var c$c=new c$ga(c$a.i,c$a.x,c$a.y),c$d=new c$ga(c$b.i,c$b.x,c$b.y),c$g=c$a.next,c$h=c$b.prev;return(c$a.next=c$b).prev=c$a,(c$c.next=c$g).prev=c$c,(c$d.next=c$c).prev=c$d,(c$h.next=c$d).prev=c$h,c$d},c$r.insertNode=function(c$a,c$b,c$c,c$d){var c$g=new c$ga(c$a,c$b,c$c);return c$d?(c$g.next=c$d.next,(c$g.prev=c$d).next.prev=c$g,c$d.next=c$g):(c$g.prev=c$g).next=c$g,c$g},c$r.removeNode=function(c$a){c$a.next.prev=c$a.prev,c$a.prev.next=c$a.next,c$a.prevZ&&(c$a.prevZ.nextZ=c$a.nextZ),c$a.nextZ&&(c$a.nextZ.prevZ=c$a.prevZ)},c$r.signedArea=function(c$a,c$b,c$c,c$d){for(var c$g=0,c$h=c$b,c$i=c$c-c$d;c$h<c$c;c$h+=c$d)c$g+=(c$a[c$i]-c$a[c$h])*(c$a[c$h+1]+c$a[c$i+1]),c$i=c$h;return c$g},c$r}(),c$ga=function(){function c$a(c$a,c$b,c$c){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=c$a,this.x=c$b,this.y=c$c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return c$o(c$a,"laya.webgl.shapes.EarcutNode"),c$a}(),c$ha=(function(){function c$a(c$a,c$b,c$c,c$d,c$g,c$h,c$i){this.lineWidth=c$a,this.lineColor=c$b,this.lineAlpha=c$c,this.fillColor=c$d,this.fillAlpha=c$g,this.shape=c$i,this.fill=c$h}c$o(c$a,"laya.webgl.shapes.GeometryData");var c$b=c$a.prototype;c$b.clone=function(){return new c$a(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},c$b.getIndexData=function(){return null},c$b.getVertexData=function(){return null},c$b.destroy=function(){this.shape=null}}(),function(){function c$a(c$a){if(c$a instanceof Float32Array)this.points=c$a;else if(c$a instanceof Array){c$a.length;this.points=new Float32Array(c$a)}}c$o(c$a,"laya.webgl.shapes.Vertex");var c$b=c$a.prototype;c$y.imps(c$b,{"laya.webgl.shapes.IShape":!0}),c$b.getData=function(c$a,c$b,c$c){},c$b.needUpdate=function(c$a){return!1},c$b.rebuild=function(c$a){},c$b.setMatrix=function(c$a){}}(),function(){function c$k(c$a){void 0===c$a&&(c$a=1e4),this._renderType=c$a}c$o(c$k,"laya.webgl.submit.Submit");var c$a=c$k.prototype;return c$y.imps(c$a,{"laya.webgl.submit.ISubmit":!0}),c$a.releaseRender=function(){var c$a=c$k._cache;(c$a[c$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},c$a.getRenderType=function(){return this._renderType},c$a.renderSubmit=function(){if(0===this._numEle)return 1;var c$a=this.shaderValue.textureHost;if(c$a){var c$b=c$a.source;if(!c$a.bitmap||!c$b)return 1;this.shaderValue.texture=c$b,c$a.alphaTexture&&c$a.alphaTexture.source&&(this.shaderValue.texture1=c$a.alphaTexture.source)}this._vb.bind_upload(this._ib);var c$c=c$wa.mainContext;return this.shaderValue.upload(),c$S.activeBlendFunction!==this._blendFn&&(c$c.enable(3042),this._blendFn(c$c),c$S.activeBlendFunction=this._blendFn),c$G.drawCall++,c$G.trianglesFaces+=this._numEle/3,c$c.drawElements(4,this._numEle,5123,this._startIdx),1},c$k.__init__=function(){var c$a=c$k.RENDERBASE=new c$k(-1);c$a.shaderValue=new c$Aa(0,0),c$a.shaderValue.ALPHA=-1234},c$k.createSubmit=function(c$a,c$b,c$c,c$d,c$g){var c$h=c$k._cache._length?c$k._cache[--c$k._cache._length]:new c$k;null==c$c&&((c$c=c$h._selfVb||(c$h._selfVb=c$fa.create(-1))).clear(),c$d=0),c$h._ib=c$b,c$h._vb=c$c,c$h._startIdx=c$d*c$ra.BYTES_PIDX,c$h._numEle=0;var c$i=c$a._nBlendType;c$h._blendFn=c$a._targets?c$S.targetFns[c$i]:c$S.fns[c$i],c$h.shaderValue=c$g,c$h.shaderValue.setValue(c$a._shader2D);var c$j=c$a._shader2D.filters;return c$j&&c$h.shaderValue.setFilters(c$j),c$h},c$k.createShape=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i=c$k._cache._length?c$k._cache[--c$k._cache._length]:new c$k;c$i._ib=c$b,c$i._vb=c$c,c$i._numEle=c$d,c$i._startIdx=c$g,c$i.shaderValue=c$h,c$i.shaderValue.setValue(c$a._shader2D);var c$j=c$a._nBlendType;return c$i._blendFn=c$a._targets?c$S.targetFns[c$j]:c$S.fns[c$j],c$i},c$k.TYPE_2D=1e4,c$k.TYPE_CANVAS=10003,c$k.TYPE_CMDSETRT=10004,c$k.TYPE_CUSTOM=10005,c$k.TYPE_BLURRT=10006,c$k.TYPE_CMDDESTORYPRERT=10007,c$k.TYPE_DISABLESTENCIL=10008,c$k.TYPE_OTHERIBVB=10009,c$k.TYPE_PRIMITIVE=10010,c$k.TYPE_RT=10011,c$k.TYPE_BLUR_RT=10012,c$k.TYPE_TARGET=10013,c$k.TYPE_CHANGE_VALUE=10014,c$k.TYPE_SHAPE=10015,c$k.TYPE_TEXTURE=10016,c$k.TYPE_FILLTEXTURE=10017,c$k.RENDERBASE=null,c$k._cache=((c$k._cache=[])._length=0,c$k._cache),c$k}()),c$ia=function(){function c$d(){this.fun=null,this.args=null}c$o(c$d,"laya.webgl.submit.SubmitCMD");var c$a=c$d.prototype;return c$y.imps(c$a,{"laya.webgl.submit.ISubmit":!0}),c$a.renderSubmit=function(){return this.fun.apply(null,this.args),1},c$a.getRenderType=function(){return 0},c$a.releaseRender=function(){var c$a=c$d._cache;c$a[c$a._length++]=this},c$d.create=function(c$a,c$b){var c$c=c$d._cache._length?c$d._cache[--c$d._cache._length]:new c$d;return c$c.fun=c$b,c$c.args=c$a,c$c},c$d._cache=((c$d._cache=[])._length=0,c$d._cache),c$d}(),c$ja=function(){function c$b(){this.variables={}}c$o(c$b,"laya.webgl.submit.SubmitCMDScope");var c$a=c$b.prototype;return c$a.getValue=function(c$a){return this.variables[c$a]},c$a.addValue=function(c$a,c$b){return this.variables[c$a]=c$b},c$a.setValue=function(c$a,c$b){return this.variables.hasOwnProperty(c$a)?this.variables[c$a]=c$b:null},c$a.clear=function(){for(var c$a in this.variables)delete this.variables[c$a]},c$a.recycle=function(){this.clear(),c$b.POOL.push(this)},c$b.create=function(){var c$a=c$b.POOL.pop();return c$a||(c$a=new c$b),c$a},c$b.POOL=[],c$b}(),c$ka=function(){function c$n(){this.offset=0,this.startIndex=0,this._mat=c$B.create()}c$o(c$n,"laya.webgl.submit.SubmitOtherIBVB");var c$a=c$n.prototype;return c$y.imps(c$a,{"laya.webgl.submit.ISubmit":!0}),c$a.releaseRender=function(){var c$a=c$n._cache;(c$a[c$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},c$a.getRenderType=function(){return 10009},c$a.renderSubmit=function(){var c$a=this._shaderValue.textureHost;if(c$a){var c$b=c$a.source;if(!c$a.bitmap||!c$b)return 1;this._shaderValue.texture=c$b}this._vb.bind_upload(this._ib);var c$c=c$ua.worldMatrix4,c$d=c$B.TEMP;c$B.mulPre(this._mat,c$c[0],c$c[1],c$c[4],c$c[5],c$c[12],c$c[13],c$d);var c$g=c$ua.worldMatrix4=c$n.tempMatrix4;c$g[0]=c$d.a,c$g[1]=c$d.b,c$g[4]=c$d.c,c$g[5]=c$d.d,c$g[12]=c$d.tx,c$g[13]=c$d.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var c$h=c$wa.mainContext;return c$S.activeBlendFunction!==this._blendFn&&(c$h.enable(3042),this._blendFn(c$h),c$S.activeBlendFunction=this._blendFn),c$G.drawCall++,c$G.trianglesFaces+=this._numEle/3,c$h.drawElements(4,this._numEle,5123,this.startIndex),c$ua.worldMatrix4=c$c,c$La.activeShader=null,1},c$n.create=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k){void 0===c$k&&(c$k=0);var c$l=c$n._cache._length?c$n._cache[--c$n._cache._length]:new c$n;c$l._ib=c$c,c$l._vb=c$b,c$l._numEle=c$d,c$l._shader=c$g,c$l._shaderValue=c$h;var c$m=c$a._nBlendType;switch(c$l._blendFn=c$a._targets?c$S.targetFns[c$m]:c$S.fns[c$m],c$k){case 0:c$l.offset=0,c$l.startIndex=c$j/(c$ra.BYTES_PE*c$b.vertexStride)*1.5,c$l.startIndex*=c$ra.BYTES_PIDX;break;case 1:c$l.startIndex=c$i,c$l.offset=c$j}return c$l},c$n._cache=((c$n._cache=[])._length=0,c$n._cache),c$n.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],c$n}(),c$la=function(){function c$c(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new c$D,this.screenRect=new c$D}c$o(c$c,"laya.webgl.submit.SubmitScissor");var c$a=c$c.prototype;return c$y.imps(c$a,{"laya.webgl.submit.ISubmit":!0}),c$a._scissor=function(c$a,c$b,c$c,c$d){var c$g=c$ua.worldMatrix4,c$h=c$g[0],c$i=c$g[5],c$j=c$g[12],c$k=c$g[13];if(c$d*=c$i,(c$c*=c$h)<1||c$d<1)return!1;var c$l=(c$a=c$a*c$h+c$j)+c$c,c$m=(c$b=c$b*c$i+c$k)+c$d;c$a<0&&(c$c=c$l-(c$a=0)),c$b<0&&(c$d=c$m-(c$b=0));var c$n=c$ua.worldClipRect;if(c$a=Math.max(c$a,c$n.x),c$b=Math.max(c$b,c$n.y),c$c=Math.min(c$l,c$n.right)-c$a,c$d=Math.min(c$m,c$n.bottom)-c$b,c$c<1||c$d<1)return!1;var c$o=c$ua.worldScissorTest;return this.screenRect.copyFrom(c$n),c$n.x=c$a,c$n.y=c$b,c$n.width=c$c,c$n.height=c$d,c$ua.worldScissorTest=!0,c$b=c$ua.height-c$b-c$d,c$wa.mainContext.scissor(c$a,c$b,c$c,c$d),c$wa.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),c$o?(c$b=c$ua.height-this.screenRect.y-this.screenRect.height,c$wa.mainContext.scissor(this.screenRect.x,c$b,this.screenRect.width,this.screenRect.height),c$wa.mainContext.enable(3089)):(c$wa.mainContext.disable(3089),c$ua.worldScissorTest=!1),c$n.copyFrom(this.screenRect),!0},c$a._scissorWithTagart=function(c$a,c$b,c$c,c$d){if(c$c<1||c$d<1)return!1;var c$g=c$a+c$c,c$h=c$b+c$d;c$a<0&&(c$c=c$g-(c$a=0)),c$b<0&&(c$d=c$h-(c$b=0));var c$i=c$ua.worldClipRect;if(c$a=Math.max(c$a,c$i.x),c$b=Math.max(c$b,c$i.y),c$c=Math.min(c$g,c$i.right)-c$a,c$d=Math.min(c$h,c$i.bottom)-c$b,c$c<1||c$d<1)return!1;var c$j=c$ua.worldScissorTest;return this.screenRect.copyFrom(c$i),c$ua.worldScissorTest=!0,c$i.x=c$a,c$i.y=c$b,c$i.width=c$c,c$i.height=c$d,c$b=c$ua.height-c$b-c$d,c$wa.mainContext.scissor(c$a,c$b,c$c,c$d),c$wa.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),c$j?(c$b=c$ua.height-this.screenRect.y-this.screenRect.height,c$wa.mainContext.scissor(this.screenRect.x,c$b,this.screenRect.width,this.screenRect.height),c$wa.mainContext.enable(3089)):(c$wa.mainContext.disable(3089),c$ua.worldScissorTest=!1),c$i.copyFrom(this.screenRect),!0},c$a.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},c$a.getRenderType=function(){return 0},c$a.releaseRender=function(){var c$a=c$c._cache;(c$a[c$a._length++]=this).context=null},c$c.create=function(c$a){var c$b=c$c._cache._length?c$c._cache[--c$c._cache._length]:new c$c;return c$b.context=c$a,c$b},c$c._cache=((c$c._cache=[])._length=0,c$c._cache),c$c}(),c$ma=function(){function c$k(){this.step=0,this.blendMode=null,this.level=0}c$o(c$k,"laya.webgl.submit.SubmitStencil");var c$a=c$k.prototype;return c$y.imps(c$a,{"laya.webgl.submit.ISubmit":!0}),c$a.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},c$a.getRenderType=function(){return 0},c$a.releaseRender=function(){var c$a=c$k._cache;c$a[c$a._length++]=this},c$a.do1=function(){var c$a=c$wa.mainContext;c$a.enable(2960),c$a.clear(1024),c$a.colorMask(!1,!1,!1,!1),c$a.stencilFunc(514,this.level,255),c$a.stencilOp(7680,7680,7682)},c$a.do2=function(){var c$a=c$wa.mainContext;c$a.stencilFunc(514,this.level+1,255),c$a.colorMask(!0,!0,!0,!0),c$a.stencilOp(7680,7680,7680)},c$a.do3=function(){var c$a=c$wa.mainContext;c$a.colorMask(!0,!0,!0,!0),c$a.stencilOp(7680,7680,7680),c$a.clear(1024),c$a.disable(2960)},c$a.do4=function(){var c$a=c$wa.mainContext;0==this.level&&(c$a.enable(2960),c$a.clear(1024)),c$a.colorMask(!1,!1,!1,!1),c$a.stencilFunc(519,0,255),c$a.stencilOp(7680,7680,7682)},c$a.do5=function(){var c$a=c$wa.mainContext;c$a.stencilFunc(514,this.level,255),c$a.colorMask(!0,!0,!0,!0),c$a.stencilOp(7680,7680,7680)},c$a.do6=function(){var c$a=c$wa.mainContext;c$S.targetFns[c$S.TOINT[this.blendMode]](c$a)},c$a.do7=function(){var c$a=c$wa.mainContext;c$a.colorMask(!1,!1,!1,!1),c$a.stencilOp(7680,7680,7683)},c$a.do8=function(){var c$a=c$wa.mainContext;c$a.colorMask(!0,!0,!0,!0),c$a.stencilFunc(514,this.level,255),c$a.stencilOp(7680,7680,7680)},c$k.restore=function(c$a,c$b,c$c,c$d,c$g){var c$h;if((c$a._renderKey=0)<c$k._mask&&c$k._mask--,0==c$k._mask)c$h=laya.webgl.submit.SubmitStencil.create(3),c$a.addRenderObject(c$h),c$a._curSubmit=c$ha.RENDERBASE;else{c$h=laya.webgl.submit.SubmitStencil.create(7),c$a.addRenderObject(c$h);var c$i=c$a._vb;c$i._byteLength;if(c$sa.fillRectImgVb(c$i,null,c$b.x,c$b.y,c$b.width,c$b.height,c$K.DEF_UV,c$c,c$d,c$g,0,0)){c$a._shader2D.glTexture=null;var c$j=c$a._curSubmit=c$ha.createSubmit(c$a,c$a._ib,c$i,(c$i._byteLength-64)/32*3,c$Aa.create(2,0));c$j.shaderValue.ALPHA=1,c$a._submits[c$a._submits._length++]=c$j,c$a._curSubmit._numEle+=6,c$a._curSubmit=c$ha.RENDERBASE}else alert("clipRect calc stencil rect error");c$h=laya.webgl.submit.SubmitStencil.create(8),c$a.addRenderObject(c$h)}},c$k.restore2=function(c$a,c$b){var c$c;(c$a._renderKey=0)<c$k._mask&&c$k._mask--,0==c$k._mask?(c$c=laya.webgl.submit.SubmitStencil.create(3),c$a.addRenderObject(c$c),c$a._curSubmit=c$ha.RENDERBASE):(c$c=laya.webgl.submit.SubmitStencil.create(7),c$a.addRenderObject(c$c),c$a._submits[c$a._submits._length++]=c$b,c$c=laya.webgl.submit.SubmitStencil.create(8),c$a.addRenderObject(c$c))},c$k.create=function(c$a){var c$b=c$k._cache._length?c$k._cache[--c$k._cache._length]:new c$k;return 5==(c$b.step=c$a)&&++c$k._mask,c$b.level=c$k._mask,c$b},c$k._cache=((c$k._cache=[])._length=0,c$k._cache),c$k._mask=0,c$k}(),c$na=function(){function c$j(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}c$o(c$j,"laya.webgl.submit.SubmitTarget");var c$a=c$j.prototype;return c$y.imps(c$a,{"laya.webgl.submit.ISubmit":!0}),c$a.renderSubmit=function(){this._vb.bind_upload(this._ib);var c$a=this.scope.getValue(this.proName);return c$a&&(this.shaderValue.texture=c$a.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[c$a.width,c$a.height]),this.shaderValue.upload(),this.blend(),c$G.drawCall++,c$G.trianglesFaces+=this._numEle/3,c$wa.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},c$a.blend=function(){if(c$S.activeBlendFunction!==c$S.fns[this.blendType]){var c$a=c$wa.mainContext;c$a.enable(3042),c$S.fns[this.blendType](c$a),c$S.activeBlendFunction=c$S.fns[this.blendType]}},c$a.getRenderType=function(){return 0},c$a.releaseRender=function(){var c$a=c$j._cache;(c$a[c$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},c$j.create=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i=c$j._cache._length?c$j._cache[--c$j._cache._length]:new c$j;return c$i._ib=c$b,c$i._vb=c$c,c$i.proName=c$h,c$i._startIdx=c$d*c$ra.BYTES_PIDX,c$i._numEle=0,c$i.blendType=c$a._nBlendType,c$i.shaderValue=c$g,c$i.shaderValue.setValue(c$a._shader2D),c$i},c$j._cache=((c$j._cache=[])._length=0,c$j._cache),c$j}(),c$oa=function(){function c$a(){this._sourceStr=null}c$o(c$a,"laya.webgl.text.CharSegment");var c$b=c$a.prototype;return c$y.imps(c$b,{"laya.webgl.text.ICharSegment":!0}),c$b.textToSpit=function(c$a){this._sourceStr=c$a},c$b.getChar=function(c$a){return this._sourceStr.charAt(c$a)},c$b.getCharCode=function(c$a){return this._sourceStr.charCodeAt(c$a)},c$b.length=function(){return this._sourceStr.length},c$a}(),c$pa=function(){var c$a;function c$G(){}return c$o(c$G,"laya.webgl.text.DrawText"),c$G.__init__=function(){c$G._charsTemp=new Array,c$G._drawValue=new c$a,c$G._charSeg=new c$oa},c$G.customCharSeg=function(c$a){c$G._charSeg=c$a},c$G.getChar=function(c$a,c$b,c$c){var c$d=c$Va.createOneChar(c$a,c$c);return-1!=c$b&&(c$G._charsCache[c$b]=c$d),c$d},c$G._drawSlow=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l,c$m,c$n,c$o,c$p,c$q){var c$r,c$s,c$t=c$G._drawValue.value(c$h,c$j,c$k,c$l,c$o,c$p,c$q),c$u=0,c$v=0,c$w=c$G._charsTemp,c$x=0,c$y=NaN;if(c$d)for(c$w.length=c$d.length,c$u=0,c$v=c$d.length;c$u<c$v;c$u++)(c$s=c$d[c$u])&&(c$y=c$s.charNum+c$t.txtID,c$w[c$u]=c$r=c$G._charsCache[c$y]||c$G.getChar(c$s.char,c$y,c$t),c$r.active());else{var c$z=c$c instanceof laya.utils.WordText?c$c.toString():c$c;if(c$J.CharacterCache){c$G._charSeg.textToSpit(c$z);var c$A=c$G._charSeg.length();for(c$u=0,c$v=c$w.length=c$A;c$u<c$v;c$u++)c$y=c$G._charSeg.getCharCode(c$u)+c$t.txtID,c$w[c$u]=c$r=c$G._charsCache[c$y]||c$G.getChar(c$G._charSeg.getChar(c$u),c$y,c$t),c$r.active(),c$x+=c$r.cw}else c$w.length=0,(c$r=c$G.getChar(c$z,-1,c$t)).active(),c$x+=c$r.cw,c$w[0]=c$r}var c$B=0;null!==c$i&&"left"!==c$i&&(c$B=-("center"==c$i?c$x/2:c$x));var c$C,c$D,c$E=NaN,c$F=0;if(c$d)for(c$u=0,c$v=c$w.length;c$u<c$v;c$u++)c$r=c$w[c$u],c$s=c$d[c$u],c$r&&c$s&&!c$r.isSpace&&(c$E=c$r.borderSize,c$C=c$r.texture,c$b._drawText(c$C,c$m+c$B+c$s.x*c$o-c$E,c$n+c$s.y*c$p-c$E,c$C.width,c$C.height,c$g,0,0,0,0));else{for(c$u=0,c$v=c$w.length;c$u<c$v;c$u++)(c$r=c$w[c$u])&&!c$r.isSpace&&(c$E=c$r.borderSize,c$C=c$r.texture,c$b._drawText(c$C,c$m+c$B-c$E,c$n-c$E,c$C.width,c$C.height,c$g,0,0,0,0),c$a&&((c$D=c$a[c$F++])||(c$D=c$a[c$F-1]=[]),c$D[0]=c$C,c$D[1]=c$B-c$E,c$D[2]=-c$E)),c$B+=c$r.cw;c$a&&(c$a.length=c$F)}},c$G._drawFast=function(c$a,c$b,c$c,c$d,c$g){for(var c$h,c$i,c$j=0,c$k=c$a.length;c$j<c$k;c$j++)(c$h=(c$i=c$a[c$j])[0]).active(),c$b._drawText(c$h,c$d+c$i[1],c$g+c$i[2],c$h.width,c$h.height,c$c,0,0,0,0)},c$G.drawText=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l,c$m,c$n){if(void 0===c$n&&(c$n=0),!(c$b&&0===c$b.length||c$c&&0===c$c.length)){var c$o=c$d.a,c$p=c$d.d;(0!==c$d.b||0!==c$d.c)&&(c$o=c$p=1);var c$q=1!==c$o||1!==c$p;if(c$q&&c$y.stage.transform){var c$r=c$y.stage.transform;c$q=c$r.a===c$o&&c$r.d===c$p}else c$q=!1;if(c$q){var c$s=(c$d=c$d.copyTo(c$za._tmpMatrix)).tx,c$t=c$d.ty;c$d.scale(1/c$o,1/c$p),c$d._checkTransform(),c$l*=c$o,c$m*=c$p,c$l+=c$s-c$d.tx,c$m+=c$t-c$d.ty}else c$o=c$p=1;if(c$c)c$G._drawSlow(null,c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l,c$m,c$o,c$p,c$n);else{if(null===c$b.toUpperCase){var c$u=c$o+1e5*c$p,c$v=c$b;return void(c$v.changed||c$v.id!==c$u?(c$v.id=c$u,c$v.changed=!1,c$G._drawSlow(c$v.save,c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l,c$m,c$o,c$p,c$n)):c$G._drawFast(c$v.save,c$a,c$d,c$l,c$m))}var c$w=c$b+c$g.toString()+c$i+c$j+c$k+c$o+c$p+c$h,c$x=c$G._textsCache[c$w];c$J.CharacterCache?c$x?c$G._drawFast(c$x,c$a,c$d,c$l,c$m):(c$G._textsCache.__length||(c$G._textsCache.__length=0),c$G._textsCache.__length>c$z.WebGLTextCacheCount&&((c$G._textsCache={}).__length=0,c$G._curPoolIndex=0),c$G._textCachesPool[c$G._curPoolIndex]?(c$x=c$G._textsCache[c$w]=c$G._textCachesPool[c$G._curPoolIndex]).length=0:c$G._textCachesPool[c$G._curPoolIndex]=c$x=c$G._textsCache[c$w]=[],c$G._textsCache.__length++,c$G._curPoolIndex++,c$G._drawSlow(c$x,c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l,c$m,c$o,c$p,c$n)):c$G._drawSlow(c$x,c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l,c$m,c$o,c$p,c$n)}}},c$G._charsTemp=null,c$G._textCachesPool=[],c$G._curPoolIndex=0,c$G._charsCache={},c$G._textsCache={},c$G._drawValue=null,c$G.d=[],c$G._charSeg=null,c$G.__init$=function(){c$a=function(){function c$k(){}return c$o(c$k,""),c$k.prototype.value=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){this.font=c$a,this.fillColor=c$b,this.borderColor=c$c,this.lineWidth=c$d,this.scaleX=c$g,this.scaleY=c$h,this.underLine=c$i;var c$j=c$a.toString()+c$g+c$h+c$d+(c$b?c$b.toLowerCase():" ")+(c$c?c$c.toLowerCase():" ")+c$i;return this.txtID=c$k._keymap[c$j],this.txtID||(this.txtID=1e-7*++c$k._keymapCount,c$k._keymap[c$j]=this.txtID),this},c$k.clear=function(){c$k._keymap={},c$k._keymapCount=1},c$k._keymap={},c$k._keymapCount=1,c$k}()},c$G}(),c$qa=function(){function c$g(c$a){this._index=0,this._size=14,this._italic=-2,c$g._cache2=c$g._cache2||[],this.setFont(c$a||"14px Arial")}c$o(c$g,"laya.webgl.text.FontInContext");var c$a=c$g.prototype;return c$a.setFont=function(c$a){var c$b=c$g._cache2[c$a];if(c$b)this._words=c$b[0],this._size=c$b[1];else{this._words=c$a.split(" ");for(var c$c=0,c$d=this._words.length;c$c<c$d;c$c++)if(0<this._words[c$c].indexOf("px")){this._index=c$c;break}this._size=parseInt(this._words[this._index]),c$g._cache2[c$a]=[this._words,this._size]}this._text=null,this._italic=-2},c$a.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},c$a.hasType=function(c$a){for(var c$b=0,c$c=this._words.length;c$b<c$c;c$b++)if(this._words[c$b]===c$a)return c$b;return-1},c$a.removeType=function(c$a){for(var c$b=0,c$c=this._words.length;c$b<c$c;c$b++)if(this._words[c$b]===c$a){this._words.splice(c$b,1),this._index>c$b&&this._index--;break}this._text=null,this._italic=-2},c$a.copyTo=function(c$a){return c$a._text=this._text,c$a._size=this._size,c$a._index=this._index,c$a._words=this._words.slice(),c$a._italic=-2,c$a},c$a.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},c$d(0,c$a,"size",function(){return this._size},function(c$a){this._size=c$a,this._words[this._index]=c$a+"px",this._text=null}),c$g.create=function(c$a){var c$b=c$g._cache[c$a];return c$b||(c$b=c$g._cache[c$a]=new c$g(c$a))},c$g.EMPTY=new c$g,c$g._cache={},c$g._cache2=null,c$g}(),c$ra=function(){function c$a(){}return c$o(c$a,"laya.webgl.utils.CONST3D2D"),c$a.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],c$a.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],c$a.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],c$a._TMPARRAY=[],c$a._OFFSETX=0,c$a._OFFSETY=0,c$i(c$a,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),c$a}(),c$sa=function(){function c$q(){}return c$o(c$q,"laya.webgl.utils.GlUtils"),c$q.make2DProjection=function(c$a,c$b,c$c){return[2/c$a,0,0,0,0,-2/c$b,0,0,0,0,2/c$c,0,-1,1,0,1]},c$q.fillIBQuadrangle=function(c$a,c$b){if(65535/4<c$b)throw Error("IBQuadrangle count:"+c$b+" must<:"+Math.floor(65535/4));c$b=Math.floor(c$b),c$a._resizeBuffer(6*(c$b+1)*2,!1),c$a.byteLength=c$a.bufferLength;for(var c$c=c$a.getUint16Array(),c$d=0,c$g=0;c$g<c$b;c$g++)c$c[c$d++]=4*c$g,c$c[c$d++]=4*c$g+2,c$c[c$d++]=4*c$g+1,c$c[c$d++]=4*c$g,c$c[c$d++]=4*c$g+3,c$c[c$d++]=4*c$g+2;return c$a.setNeedUpload(),!0},c$q.expandIBQuadrangle=function(c$a,c$b){c$a.bufferLength>=6*c$b*2||c$q.fillIBQuadrangle(c$a,c$b)},c$q.mathCeilPowerOfTwo=function(c$a){return c$a--,c$a|=c$a>>1,c$a|=c$a>>2,c$a|=c$a>>4,c$a|=c$a>>8,c$a|=c$a>>16,++c$a},c$q.fillQuadrangleImgVb=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){var c$k=16+(c$a._byteLength>>2);c$a.byteLength=c$k<<2;var c$l=c$a.getFloat32Array();c$l[(c$k-=16)+2]=c$g[0],c$l[c$k+3]=c$g[1],c$l[c$k+6]=c$g[2],c$l[c$k+7]=c$g[3],c$l[c$k+10]=c$g[4],c$l[c$k+11]=c$g[5],c$l[c$k+14]=c$g[6],c$l[c$k+15]=c$g[7];var c$m=c$h.a,c$n=c$h.b,c$o=c$h.c,c$p=c$h.d;if(1!==c$m||0!==c$n||0!==c$o||1!==c$p){c$h.bTransform=!0;var c$q=c$h.tx+c$i,c$r=c$h.ty+c$j;c$l[c$k]=(c$d[0]+c$b)*c$m+(c$d[1]+c$c)*c$o+c$q,c$l[c$k+1]=(c$d[0]+c$b)*c$n+(c$d[1]+c$c)*c$p+c$r,c$l[c$k+4]=(c$d[2]+c$b)*c$m+(c$d[3]+c$c)*c$o+c$q,c$l[c$k+5]=(c$d[2]+c$b)*c$n+(c$d[3]+c$c)*c$p+c$r,c$l[c$k+8]=(c$d[4]+c$b)*c$m+(c$d[5]+c$c)*c$o+c$q,c$l[c$k+9]=(c$d[4]+c$b)*c$n+(c$d[5]+c$c)*c$p+c$r,c$l[c$k+12]=(c$d[6]+c$b)*c$m+(c$d[7]+c$c)*c$o+c$q,c$l[c$k+13]=(c$d[6]+c$b)*c$n+(c$d[7]+c$c)*c$p+c$r}else c$h.bTransform=!1,c$b+=c$h.tx+c$i,c$c+=c$h.ty+c$j,c$l[c$k]=c$b+c$d[0],c$l[c$k+1]=c$c+c$d[1],c$l[c$k+4]=c$b+c$d[2],c$l[c$k+5]=c$c+c$d[3],c$l[c$k+8]=c$b+c$d[4],c$l[c$k+9]=c$c+c$d[5],c$l[c$k+12]=c$b+c$d[6],c$l[c$k+13]=c$c+c$d[7];return c$a._upload=!0},c$q.fillTranglesVB=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){var c$j=(c$a._byteLength>>2)+c$d.length;c$a.byteLength=c$j<<2;var c$k=c$a.getFloat32Array();c$j-=c$d.length;for(var c$l=c$d.length,c$m=c$g.a,c$n=c$g.b,c$o=c$g.c,c$p=c$g.d,c$q=0;c$q<c$l;c$q+=4)if(c$k[c$j+c$q+2]=c$d[c$q+2],c$k[c$j+c$q+3]=c$d[c$q+3],1!==c$m||0!==c$n||0!==c$o||1!==c$p){c$g.bTransform=!0;var c$r=c$g.tx+c$h,c$s=c$g.ty+c$i;c$k[c$j+c$q]=(c$d[c$q]+c$b)*c$m+(c$d[c$q+1]+c$c)*c$o+c$r,c$k[c$j+c$q+1]=(c$d[c$q]+c$b)*c$n+(c$d[c$q+1]+c$c)*c$p+c$s}else c$g.bTransform=!1,c$b+=c$g.tx+c$h,c$c+=c$g.ty+c$i,c$k[c$j+c$q]=c$b+c$d[c$q],c$k[c$j+c$q+1]=c$c+c$d[c$q+1];return c$a._upload=!0},c$q.copyPreImgVb=function(c$a,c$b,c$c){var c$d=c$a._byteLength>>2;c$a.byteLength=c$d+16<<2;for(var c$g=c$a.getFloat32Array(),c$h=0,c$i=c$d-16;c$h<4;c$h++)c$g[c$d]=c$g[c$i]+c$b,++c$i,c$g[++c$d]=c$g[c$i]+c$c,++c$i,c$g[++c$d]=c$g[c$i],++c$i,c$g[++c$d]=c$g[c$i],++c$d,++c$i;c$a._upload=!0},c$q.fillRectImgVb=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l,c$m,c$n,c$o){void 0===c$o&&(c$o=!1);var c$p,c$q,c$r,c$s,c$t,c$u,c$v,c$w,c$x,c$y,c$z,c$A,c$B,c$C,c$D,c$E,c$F=1,c$G=c$j.a,c$H=c$j.b,c$I=c$j.c,c$J=c$j.d,c$K=c$b&&c$b.width<99999999;if(1!==c$G||0!==c$H||0!==c$I||1!==c$J?(c$j.bTransform=!0,0===c$H&&0===c$I&&(c$F=23,c$x=c$g+c$c,c$y=c$h+c$d,c$p=c$G*c$c+(c$z=c$j.tx+c$k),c$r=c$G*c$x+c$z,c$q=c$J*c$d+(c$A=c$j.ty+c$l),c$s=c$J*c$y+c$A)):(c$F=23,c$j.bTransform=!1,c$r=(c$p=c$c+c$j.tx+c$k)+c$g,c$s=(c$q=c$d+c$j.ty+c$l)+c$h),c$K&&(c$t=c$b.x,c$u=c$b.y,c$v=c$b.width+c$t,c$w=c$b.height+c$u),1!==c$F){if(Math.min(c$p,c$r)>=c$v)return!1;if(Math.min(c$q,c$s)>=c$w)return!1;if(Math.max(c$r,c$p)<=c$t)return!1;if(Math.max(c$s,c$q)<=c$u)return!1}var c$L=c$a._byteLength>>2;c$a.byteLength=16+c$L<<2;var c$M=c$a.getFloat32Array();switch(c$M[2+c$L]=c$i[0],c$M[3+c$L]=c$i[1],c$M[6+c$L]=c$i[2],c$M[7+c$L]=c$i[3],c$M[10+c$L]=c$i[4],c$M[11+c$L]=c$i[5],c$M[14+c$L]=c$i[6],c$M[15+c$L]=c$i[7],c$F){case 1:c$z=c$j.tx+c$k,c$A=c$j.ty+c$l;var c$N=c$G*c$c,c$O=c$I*c$d,c$P=c$J*c$d,c$Q=c$H*c$c,c$R=c$G*(c$x=c$g+c$c),c$S=c$I*(c$y=c$h+c$d),c$T=c$J*c$y,c$U=c$H*c$x;c$o?(c$B=c$N+c$O+c$z,c$D=Math.round(c$B)-c$B,c$C=c$P+c$Q+c$A,c$E=Math.round(c$C)-c$C,c$M[c$L]=c$B+c$D,c$M[1+c$L]=c$C+c$E,c$M[4+c$L]=c$R+c$O+c$z+c$D,c$M[5+c$L]=c$P+c$U+c$A+c$E,c$M[8+c$L]=c$R+c$S+c$z+c$D,c$M[9+c$L]=c$T+c$U+c$A+c$E,c$M[12+c$L]=c$N+c$S+c$z+c$D,c$M[13+c$L]=c$T+c$Q+c$A+c$E):(c$M[c$L]=c$N+c$O+c$z,c$M[1+c$L]=c$P+c$Q+c$A,c$M[4+c$L]=c$R+c$O+c$z,c$M[5+c$L]=c$P+c$U+c$A,c$M[8+c$L]=c$R+c$S+c$z,c$M[9+c$L]=c$T+c$U+c$A,c$M[12+c$L]=c$N+c$S+c$z,c$M[13+c$L]=c$T+c$Q+c$A);break;case 23:c$o?(c$B=c$p+c$m,c$D=Math.round(c$B)-c$B,c$C=c$q,c$E=Math.round(c$C)-c$C,c$M[c$L]=c$B+c$D,c$M[1+c$L]=c$C+c$E,c$M[4+c$L]=c$r+c$m+c$D,c$M[5+c$L]=c$q+c$E,c$M[8+c$L]=c$r+c$D,c$M[9+c$L]=c$s+c$E,c$M[12+c$L]=c$p+c$D,c$M[13+c$L]=c$s+c$E):(c$M[c$L]=c$p+c$m,c$M[1+c$L]=c$q,c$M[4+c$L]=c$r+c$m,c$M[5+c$L]=c$q,c$M[8+c$L]=c$r,c$M[9+c$L]=c$s,c$M[12+c$L]=c$p,c$M[13+c$L]=c$s)}return c$a._upload=!0},c$q.fillLineVb=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){var c$k=.5*c$i,c$l=c$q._fillLineArray,c$m=-(c$d-c$h),c$n=c$c-c$g,c$o=Math.sqrt(c$m*c$m+c$n*c$n);c$m/=c$o,c$n/=c$o,c$m*=c$k,c$n*=c$k,c$l[0]=c$c-c$m,c$l[1]=c$d-c$n,c$l[4]=c$c+c$m,c$l[5]=c$d+c$n,c$l[8]=c$g+c$m,c$l[9]=c$h+c$n,c$l[12]=c$g-c$m,c$l[13]=c$h-c$n,c$j&&c$j.transformPointArray(c$l,c$l);var c$p=16+(c$a._byteLength>>2);return c$a.byteLength=c$p<<2,c$a.insertData(c$l,c$p-16),!0},c$q._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c$q}(),c$ta=(function(){function c$k(){}c$o(c$k,"laya.webgl.utils.MatirxArray"),c$k.ArrayMul=function(c$a,c$b,c$c){if(c$a)if(c$b)for(var c$d=NaN,c$g=NaN,c$h=NaN,c$i=NaN,c$j=0;c$j<4;c$j++)c$d=c$a[c$j],c$g=c$a[c$j+4],c$h=c$a[c$j+8],c$i=c$a[c$j+12],c$c[c$j]=c$d*c$b[0]+c$g*c$b[1]+c$h*c$b[2]+c$i*c$b[3],c$c[c$j+4]=c$d*c$b[4]+c$g*c$b[5]+c$h*c$b[6]+c$i*c$b[7],c$c[c$j+8]=c$d*c$b[8]+c$g*c$b[9]+c$h*c$b[10]+c$i*c$b[11],c$c[c$j+12]=c$d*c$b[12]+c$g*c$b[13]+c$h*c$b[14]+c$i*c$b[15];else c$k.copyArray(c$a,c$c);else c$k.copyArray(c$b,c$c)},c$k.copyArray=function(c$a,c$b){if(c$a&&c$b)for(var c$c=0;c$c<c$a.length;c$c++)c$b[c$c]=c$a[c$c]}}(),function(){function c$b(c$a,c$b,c$c){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=c$a,this._vb=new c$fa(c$a,35048),c$b&&this._vb._resizeBuffer(c$b,!1),this._ib=new c$ea,c$c&&this._ib._resizeBuffer(c$c,!1)}c$o(c$b,"laya.webgl.utils.Mesh2D");var c$a=c$b.prototype;return c$a.cloneWithNewVB=function(){var c$a=new c$b(this._stride,0,0);return c$a._ib=this._ib,c$a._quadNum=this._quadNum,c$a._attribInfo=this._attribInfo,c$a},c$a.cloneWithNewVBIB=function(){var c$a=new c$b(this._stride,0,0);return c$a._attribInfo=this._attribInfo,c$a},c$a.getVBW=function(){return this._vb.setNeedUpload(),this._vb},c$a.getVBR=function(){return this._vb},c$a.getIBR=function(){return this._ib},c$a.getIBW=function(){return this._ib.setNeedUpload(),this._ib},c$a.createQuadIB=function(c$a){this._quadNum=c$a,this._ib._resizeBuffer(6*c$a*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var c$b=this._ib.getUint16Array(),c$c=0,c$d=0,c$g=0;c$g<c$a;c$g++)c$b[c$c++]=c$d,c$b[c$c++]=c$d+2,c$b[c$c++]=c$d+1,c$b[c$c++]=c$d,c$b[c$c++]=c$d+3,c$b[c$c++]=c$d+2,c$d+=4;this._ib.setNeedUpload()},c$a.setAttributes=function(c$a){if(this._attribInfo=c$a,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},c$a.getEleNum=function(){return this._ib.getBuffer().byteLength/2},c$a.releaseMesh=function(){},c$a.destroy=function(){},c$a.clearVB=function(){this._vb.clear()},c$b._gvaoid=0,c$b}()),c$ua=function(){function c$g(){}return c$o(c$g,"laya.webgl.utils.RenderState2D"),c$g.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},c$g.mat2MatArray=function(c$a,c$b){var c$c=c$a,c$d=c$b;return c$d[0]=c$c.a,c$d[1]=c$c.b,c$d[2]=c$g.EMPTYMAT4_ARRAY[2],c$d[3]=c$g.EMPTYMAT4_ARRAY[3],c$d[4]=c$c.c,c$d[5]=c$c.d,c$d[6]=c$g.EMPTYMAT4_ARRAY[6],c$d[7]=c$g.EMPTYMAT4_ARRAY[7],c$d[8]=c$g.EMPTYMAT4_ARRAY[8],c$d[9]=c$g.EMPTYMAT4_ARRAY[9],c$d[10]=c$g.EMPTYMAT4_ARRAY[10],c$d[11]=c$g.EMPTYMAT4_ARRAY[11],c$d[12]=c$c.tx,c$d[13]=c$c.ty,c$d[14]=c$g.EMPTYMAT4_ARRAY[14],c$d[15]=c$g.EMPTYMAT4_ARRAY[15],c$b},c$g.restoreTempArray=function(){c$g.TEMPMAT4_ARRAY[0]=1,c$g.TEMPMAT4_ARRAY[1]=0,c$g.TEMPMAT4_ARRAY[4]=0,c$g.TEMPMAT4_ARRAY[5]=1,c$g.TEMPMAT4_ARRAY[12]=0,c$g.TEMPMAT4_ARRAY[13]=0},c$g.clear=function(){c$g.worldScissorTest=!1,c$g.worldShaderDefines=null,c$g.worldFilters=null,c$g.worldAlpha=1,c$g.worldClipRect.x=c$g.worldClipRect.y=0,c$g.worldClipRect.width=c$g.width,c$g.worldClipRect.height=c$g.height,c$g.curRenderTarget=null},c$g._MAXSIZE=99999999,c$g.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],c$g.worldMatrix4=c$g.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],c$g.worldAlpha=1,c$g.worldScissorTest=!1,c$g.worldFilters=null,c$g.worldShaderDefines=null,c$g.curRenderTarget=null,c$g.width=0,c$g.height=0,c$i(c$g,["worldMatrix",function(){return this.worldMatrix=new c$B},"worldClipRect",function(){return this.worldClipRect=new c$D(0,0,99999999,99999999)}]),c$g}(),c$va=function(){var c$u,c$c;function c$v(c$a,c$b,c$c,c$d,c$g){var c$h=this;function c$i(c$a){var c$b=[],c$c=new c$u(c$b);return c$h._compileToTree(c$c,c$a.split("\n"),0,c$b,c$g),c$c}var c$j=c$p.now();this._VS=c$i(c$b),this._PS=c$i(c$c),this._nameMap=c$d,2<c$p.now()-c$j&&console.log("ShaderCompile use time:"+(c$p.now()-c$j)+"  size:"+c$b.length+"/"+c$c.length)}c$o(c$v,"laya.webgl.utils.ShaderCompile");var c$a=c$v.prototype;return c$a._compileToTree=function(c$a,c$b,c$c,c$d,c$g){var c$h,c$i,c$j,c$k,c$l,c$m,c$n,c$o=0,c$p=0,c$q=0,c$r=0;for(c$p=c$c;c$p<c$b.length;c$p++)if(!((c$j=c$b[c$p]).length<1)&&0!==(c$o=c$j.indexOf("//"))){if(0<=c$o&&(c$j=c$j.substr(0,c$o)),c$h=c$n||new c$u(c$d),c$n=null,c$h.text=c$j,c$h.noCompile=!0,0<=(c$o=c$j.indexOf("#"))){for(c$k="#",c$r=c$o+1,c$q=c$j.length;c$r<c$q;c$r++){var c$s=c$j.charAt(c$r);if(" "===c$s||"\t"===c$s||"\r"===c$s||"\n"===c$s||"?"===c$s)break;c$k+=c$s}switch(c$h.name=c$k){case"#ifdef":case"#ifndef":if(c$h.src=c$j,c$h.noCompile=null!=c$j.match(/[!&|()=<>]/),c$h.noCompile?console.log("function():Boolean{return "+c$j.substr(c$o+c$h.name.length)+"}"):(c$m=c$j.replace(/^\s*/,"").split(/\s+/),c$h.setCondition(c$m[1],"#ifdef"===c$k?1:2),c$h.text="//"+c$h.text),c$h.setParent(c$a),c$a=c$h,c$g)for(c$m=c$j.substr(c$r).split(c$v._splitToWordExps3),c$r=0;c$r<c$m.length;c$r++)(c$j=c$m[c$r]).length&&(c$g[c$j]=!0);continue;case"#if":if(c$h.src=c$j,c$h.noCompile=!0,c$h.setParent(c$a),c$a=c$h,c$g)for(c$m=c$j.substr(c$r).split(c$v._splitToWordExps3),c$r=0;c$r<c$m.length;c$r++)(c$j=c$m[c$r]).length&&"defined"!=c$j&&(c$g[c$j]=!0);continue;case"#else":c$h.src=c$j,c$i=(c$a=c$a.parent).childs[c$a.childs.length-1],c$h.noCompile=c$i.noCompile,c$h.noCompile||(c$h.condition=c$i.condition,c$h.conditionType=1==c$i.conditionType?2:1,c$h.text="//"+c$h.text+" "+c$i.text+" "+c$h.conditionType),c$h.setParent(c$a),c$a=c$h;continue;case"#endif":c$i=(c$a=c$a.parent).childs[c$a.childs.length-1],c$h.noCompile=c$i.noCompile,c$h.noCompile||(c$h.text="//"+c$h.text),c$h.setParent(c$a);continue;case"#include":c$m=c$v.splitToWords(c$j,null);var c$t=c$v.includes[c$m[1]];if(!c$t)throw"ShaderCompile error no this include file:"+c$m[1];if((c$o=c$m[0].indexOf("?"))<0){c$h.setParent(c$a),c$j=c$t.getWith("with"==c$m[2]?c$m[3]:null),this._compileToTree(c$h,c$j.split("\n"),0,c$d,c$g),c$h.text="";continue}c$h.setCondition(c$m[0].substr(c$o+1),1),c$h.text=c$t.getWith("with"==c$m[2]?c$m[3]:null);break;case"#import":c$l=(c$m=c$v.splitToWords(c$j,null))[1],c$d.push({node:c$h,file:c$v.includes[c$l],ofs:c$h.text.length});continue}}else{if((c$i=c$a.childs[c$a.childs.length-1])&&!c$i.name){0<c$d.length&&c$v.splitToWords(c$j,c$i),c$n=c$h,c$i.text+="\n"+c$j;continue}0<c$d.length&&c$v.splitToWords(c$j,c$h)}c$h.setParent(c$a)}},c$a.createShader=function(c$a,c$b,c$c){var c$d={},c$g="";if(c$a)for(var c$h in c$a)c$g+="#define "+c$h+"\n",c$d[c$h]=!0;var c$i=this._VS.toscript(c$d,[]),c$j=this._PS.toscript(c$d,[]);return(c$c||c$Ya.create)(c$g+c$i.join("\n"),c$g+c$j.join("\n"),c$b,this._nameMap)},c$v._parseOne=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i={type:c$v.shaderParamsMap[c$c[c$d+1]],name:c$c[c$d+2],size:isNaN(parseInt(c$c[c$d+3]))?1:parseInt(c$c[c$d+3])};return c$h&&("attribute"==c$g?c$a.push(c$i):c$b.push(c$i)),":"==c$c[c$d+3]&&(c$i.type=c$c[c$d+4],c$d+=2),c$d+=2},c$v.addInclude=function(c$a,c$b){if(!c$b||0===c$b.length)throw new Error("add shader include file err:"+c$a);if(c$v.includes[c$a])throw new Error("add shader include file err, has add:"+c$a);c$v.includes[c$a]=new c$c(c$b)},c$v.preGetParams=function(c$a,c$b){var c$c=[c$a,c$b],c$d={},c$g=[],c$h=[],c$i={},c$j=[];c$d.attributes=c$g,c$d.uniforms=c$h,c$d.defines=c$i;for(var c$k=0,c$l=0,c$m=0;c$m<2;c$m++){c$c[c$m]=c$c[c$m].replace(c$v._removeAnnotation,"");var c$n,c$o=c$c[c$m].match(c$v._reg);for(c$k=0,c$l=c$o.length;c$k<c$l;c$k++){var c$p=c$o[c$k];if("attribute"==c$p||"uniform"==c$p)c$k=c$v._parseOne(c$g,c$h,c$o,c$k,c$p,!0);else{if("#define"==c$p){c$j[c$p=c$o[++c$k]]=1;continue}if("#ifdef"==c$p){c$i[c$n=c$o[++c$k]]=c$i[c$n]||[];for(c$k++;c$k<c$l;c$k++)if("attribute"==(c$p=c$o[c$k])||"uniform"==c$p)c$k=c$v._parseOne(c$g,c$h,c$o,c$k,c$p,c$j[c$n]);else if("#else"==c$p)for(c$k++;c$k<c$l;c$k++)if("attribute"==(c$p=c$o[c$k])||"uniform"==c$p)c$k=c$v._parseOne(c$g,c$h,c$o,c$k,c$p,!c$j[c$n]);else if("#endif"==c$p)break}}}}return c$d},c$v.splitToWords=function(c$a,c$b){for(var c$c,c$d,c$g=[],c$h=-1,c$i=0,c$j=c$a.length;c$i<c$j;c$i++)if(c$c=c$a.charAt(c$i),0<=" \t=+-*/&%!<>()'\",;".indexOf(c$c)){if(0<=c$h&&1<c$i-c$h&&(c$d=c$a.substr(c$h,c$i-c$h),c$g.push(c$d)),'"'==c$c||"'"==c$c){var c$k=c$a.indexOf(c$c,c$i+1);if(c$k<0)throw"Sharder err:"+c$a;c$g.push(c$a.substr(c$i+1,c$k-c$i-1)),c$i=c$k,c$h=-1;continue}"("==c$c&&c$b&&0<c$g.length&&(c$d=c$g[c$g.length-1]+";","vec4;main;".indexOf(c$d)<0&&(c$b.useFuns+=c$d)),c$h=-1}else c$h<0&&(c$h=c$i);return c$h<c$j&&1<c$j-c$h&&(c$d=c$a.substr(c$h,c$j-c$h),c$g.push(c$d)),c$g},c$v.IFDEF_NO=0,c$v.IFDEF_YES=1,c$v.IFDEF_ELSE=2,c$v.IFDEF_PARENT=3,c$v._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),c$v._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),c$v._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),c$v.includes={},c$i(c$v,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),c$v.__init$=function(){c$u=function(){function c$c(c$a){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=c$a}c$o(c$c,"");var c$a=c$c.prototype;return c$a.setParent=function(c$a){c$a.childs.push(this),this.z=c$a.z+1,this.parent=c$a},c$a.setCondition=function(c$a,c$b){c$a&&(this.conditionType=c$b,c$a=c$a.replace(/(\s*$)/g,""),this.condition=function(){return this[c$a]},this.condition.__condition=c$a)},c$a.toscript=function(c$a,c$b){return this._toscript(c$a,c$b,++c$c.__id)},c$a._toscript=function(c$d,c$g,c$h){if(this.childs.length<1&&!this.text)return c$g;c$g.length;if(this.condition){var c$a=!!this.condition.call(c$d);if(2===this.conditionType&&(c$a=!c$a),!c$a)return c$g}if(this.text&&c$g.push(this.text),0<this.childs.length&&this.childs.forEach(function(c$a,c$b,c$c){c$a._toscript(c$d,c$g,c$h)}),0<this.includefiles.length&&0<this.useFuns.length)for(var c$b,c$c=0,c$i=this.includefiles.length;c$c<c$i;c$c++)this.includefiles[c$c].curUseID!=c$h&&0<(c$b=this.includefiles[c$c].file.getFunsScript(this.useFuns)).length&&(this.includefiles[c$c].curUseID=c$h,c$g[0]=c$b+c$g[0]);return c$g},c$c.__id=1,c$c}(),c$c=function(){function c$a(c$a){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=c$a;for(var c$b=0,c$c=0,c$d=0;!((c$b=c$a.indexOf("#begin",c$b))<0);){for(c$d=c$b+5;!((c$d=c$a.indexOf("#end",c$d))<0)&&"i"===c$a.charAt(c$d+4);)c$d+=5;if(c$d<0)throw"add include err,no #end:"+c$a;c$c=c$a.indexOf("\n",c$b);var c$g=c$v.splitToWords(c$a.substr(c$b,c$c-c$b),null);"code"==c$g[1]?this.codes[c$g[2]]=c$a.substr(c$c+1,c$d-c$c-1):"function"==c$g[1]&&(c$c=c$a.indexOf("function",c$b),c$c+="function".length,this.funs[c$g[3]]=c$a.substr(c$c+1,c$d-c$c-1),this.funnames+=c$g[3]+";"),c$b=c$d+1}}c$o(c$a,"");var c$b=c$a.prototype;return c$b.getWith=function(c$a){var c$b=c$a?this.codes[c$a]:this.script;if(!c$b)throw"get with error:"+c$a;return c$b},c$b.getFunsScript=function(c$a){var c$b="";for(var c$c in this.funs)0<=c$a.indexOf(c$c+";")&&(c$b+=this.funs[c$c]);return c$b},c$a}()},c$v}(),c$wa=function(){function c$i(){}return c$o(c$i,"laya.webgl.WebGL"),c$i._uint8ArraySlice=function(){for(var c$a=this.length,c$b=new Uint8Array(this.length),c$c=0;c$c<c$a;c$c++)c$b[c$c]=this[c$c];return c$b},c$i._float32ArraySlice=function(){for(var c$a=this.length,c$b=new Float32Array(this.length),c$c=0;c$c<c$a;c$c++)c$b[c$c]=this[c$c];return c$b},c$i._uint16ArraySlice=function(c$a){var c$b,c$c=arguments,c$d=0,c$g=0;if(0===c$c.length)for(c$d=this.length,c$b=new Uint16Array(c$d),c$g=0;c$g<c$d;c$g++)c$b[c$g]=this[c$g];else if(2===c$c.length){var c$h=c$c[0],c$i=c$c[1];if(c$h<c$i)for(c$d=c$i-c$h,c$b=new Uint16Array(c$d),c$g=c$h;c$g<c$i;c$g++)c$b[c$g-c$h]=this[c$g];else c$b=new Uint16Array(0)}return c$b},c$i.expandContext=function(){var c$a=c$g.prototype,c$b=CanvasRenderingContext2D.prototype;c$b.fillTrangles=c$a.fillTrangles,c$Za.__int__(null),c$b.setIBVB=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l){void 0===c$k&&(c$k=0),void 0===c$l&&(c$l=0),null===c$c&&(this._ib=this._ib||c$ea.QuadrangleIB,c$c=this._ib,c$sa.expandIBQuadrangle(c$c,c$d._byteLength/64+8)),this._setIBVB(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l)},c$b.fillTrangles=function(c$a,c$b,c$c,c$d,c$g){this._curMat=this._curMat||c$B.create(),this._vb=this._vb||c$fa.create(),this._ib||(this._ib=c$ea.create(),c$sa.fillIBQuadrangle(this._ib,c$i/4));var c$h=this._vb,c$i=c$d.length>>4;c$sa.fillTranglesVB(c$h,c$b,c$c,c$d,c$g||this._curMat,0,0),c$sa.expandIBQuadrangle(this._ib,c$h._byteLength/64+8);var c$j=new c$Aa(1,0);c$j.textureHost=c$a;var c$k=new c$_a("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");c$h._vertType=3,this._setIBVB(c$b,c$c,this._ib,c$h,6*c$i,c$g,c$k,c$j,0,0)}},c$i.enable=function(){if(c$p.__init__(),c$t.isConchApp&&!c$t.isConchWebGL)return c$x.skinAniSprite=function(){return new c$aa},c$i.expandContext(),!1;if(c$x.getWebGLContext=function(c$a){for(var c$b,c$c=["webgl","experimental-webgl","webkit-3d","moz-webgl"],c$d=0;c$d<c$c.length;c$d++){try{c$b=c$a.getContext(c$c[c$d],{stencil:c$z.isStencil,alpha:c$z.isAlpha,antialias:c$z.isAntialias,premultipliedAlpha:c$z.premultipliedAlpha,preserveDrawingBuffer:c$z.preserveDrawingBuffer})}catch(c$a){}if(c$b)return c$b}return null},null==(c$i.mainContext=c$x.getWebGLContext(c$t._mainCanvas)))return!1;if(c$t.isWebGL)return!0;c$r.create=function(c$a,c$b){return new c$ab(c$a,c$b)},c$s.create=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){return new c$Xa(c$a,c$b,c$c,c$d,c$g,c$h,c$i)},c$t.WebGL=c$i,c$t.isWebGL=!0,c$pa.__init__(),c$x.createRenderSprite=function(c$a,c$b){return new c$Ba(c$a,c$b)},c$x.createWebGLContext2D=function(c$a){return new c$za(c$a)},c$x.changeWebGLSize=function(c$a,c$b){laya.webgl.WebGL.onStageResize(c$a,c$b)},c$x.createGraphics=function(){return new c$ya};var c$a=c$x.createFilterAction;return c$x.createFilterAction=c$a||function(c$a){return new c$Ca},c$x.clear=function(c$a){c$ua.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var c$b=c$t.context.ctx,c$c=0==c$b._submits._length||c$z.preserveDrawingBuffer?c$q.create(c$a)._color:c$F._wgColor;c$c&&c$b.clearBG(c$c[0],c$c[1],c$c[2],c$c[3]),c$ua.clear()},c$x.addToAtlas=function(c$a,c$b){void 0===c$b&&(c$b=!1);var c$c=c$a.bitmap;c$t.optimizeTextureMemory(c$a.url,c$a)?c$y.__typeof(c$c,"laya.webgl.resource.IMergeAtlasBitmap")&&c$c.allowMerageInAtlas&&c$c.on("recovered",c$a,c$a.addTextureToAtlas):c$c.enableMerageInAtlas=!1},c$x.isAtlas=function(c$a){return c$a instanceof laya.webgl.atlas.AtlasWebGLCanvas},c$Q._enable(),c$x.beginFlush=function(){for(var c$a=c$Q.instance,c$b=c$a.getAtlaserCount(),c$c=0;c$c<c$b;c$c++){var c$d=c$a.getAtlaserByIndex(c$c).texture;c$d._flashCacheImageNeedFlush&&c$x.flashFlushImage(c$d)}},c$x.drawToCanvas=function(c$a,c$b,c$c,c$d,c$g,c$h){(c$c<=0||c$d<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),c$c|=0,c$d|=0,c$g|=0,c$h|=0;var c$i=c$Ma.create(c$c,c$d,6408,5121,0,!1);c$i.start(),c$i.clear(0,0,0,0),c$t.context.clear(),c$u.renders[c$b]._fun(c$a,c$t.context,c$g,c$ua.height-c$d+c$h),c$t.context.flush(),c$i.end();var c$j=c$i.getData(0,0,c$c,c$d);if(c$i.recycle(),c$j.byteLength==c$c*c$d*4){var c$k=new c$Ua;c$k._canvas=c$p.createElement("canvas"),c$k.size(c$c,c$d);var c$l=c$k._canvas.getContext("2d");c$p.canvas.size(c$c,c$d);var c$m=c$p.context,c$n=c$m.createImageData(c$c,c$d);return c$n.data.set(new Uint8ClampedArray(c$j.buffer)),c$k._imgData=c$n,c$m.putImageData(c$n,0,0),c$l.save(),c$l.translate(0,c$d),c$l.scale(1,-1),c$l.drawImage(c$p.canvas.source,0,0),c$l.restore(),c$k}console.log("drawToCanvas error: w:"+c$c+",h:"+c$d+",datalen:"+c$j.byteLength)},c$x.createFilterAction=function(c$a){var c$b;switch(c$a){case 32:c$b=new c$Ca}return c$b},c$x.addTextureToAtlas=function(c$a){c$a._uvID++,c$Q._atlasRestore++,c$a.bitmap.enableMerageInAtlas&&c$Q.instance.addToAtlas(c$a)},c$x.getTexturePixels=function(c$a,c$b,c$c,c$d,c$g){c$t.context.ctx.clear();var c$h=new c$E;c$h.graphics.drawTexture(c$a,-c$b,-c$c);var c$i=c$Ma.create(c$d,c$g);c$i.start(),c$i.clear(0,0,0,0),c$h.render(c$t.context,0,0),c$t.context.ctx.flush(),c$i.end();for(var c$j=c$i.getData(0,0,c$d,c$g),c$k=[],c$l=0,c$m=c$g-1;0<=c$m;c$m--)for(var c$n=0;c$n<c$d;c$n++)c$l=4*(c$m*c$d+c$n),c$k.push(c$j[c$l]),c$k.push(c$j[c$l+1]),c$k.push(c$j[c$l+2]),c$k.push(c$j[c$l+3]);return c$k},c$x.skinAniSprite=function(){return new c$aa},c$l.create=function(c$a,c$b){var c$c=new c$Ua;return c$c._imgData=c$b,c$c.flipY=!1,c$c},c$A._filterStart=function(c$a,c$b,c$c,c$d,c$g){var c$h=c$a.getValue("bounds"),c$i=c$Ma.create(c$h.width,c$h.height);if(c$i.start(),c$i.clear(0,0,0,0),c$a.addValue("src",c$i),c$a.addValue("ScissorTest",c$ua.worldScissorTest),c$ua.worldScissorTest){var c$j=new c$D;c$j.copyFrom(c$c.ctx._clipRect),c$a.addValue("clipRect",c$j),c$ua.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},c$A._filterEnd=function(c$a,c$b,c$c,c$d,c$g){var c$h=c$a.getValue("bounds");c$a.getValue("src").end();var c$i=c$Ma.create(c$h.width,c$h.height);c$i.start(),c$i.clear(0,0,0,0),c$a.addValue("out",c$i),c$b._set$P("_filterCache",c$i),c$b._set$P("_isHaveGlowFilter",c$a.getValue("_isHaveGlowFilter"))},c$A._EndTarget=function(c$a,c$b){if(c$a.getValue("src").recycle(),c$a.getValue("out").end(),c$a.getValue("ScissorTest")){c$ua.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),c$b.ctx.save();var c$c=c$a.getValue("clipRect");c$b.ctx.clipRect(c$c.x,c$c.y,c$c.width,c$c.height)}},c$A._useSrc=function(c$a){var c$b=c$a.getValue("out");c$b.end(),(c$b=c$a.getValue("src")).start(),c$b.clear(0,0,0,0)},c$A._endSrc=function(c$a){c$a.getValue("src").end()},c$A._useOut=function(c$a){var c$b=c$a.getValue("src");c$b.end(),(c$b=c$a.getValue("out")).start(),c$b.clear(0,0,0,0)},c$A._endOut=function(c$a){c$a.getValue("out").end()},c$A._recycleScope=function(c$a){c$a.recycle()},c$A._filter=function(c$a,c$b,c$c,c$d){var c$g=this._next;if(c$g){var c$h,c$i,c$j=c$a.filters,c$k=c$j.length;if(1==c$k&&32==c$j[0].type)return c$b.ctx.save(),c$b.ctx.setFilters([c$j[0]]),c$g._fun.call(c$g,c$a,c$b,c$c,c$d),void c$b.ctx.restore();var c$l=c$ja.create(),c$m=c$C.TEMP,c$n=c$b.ctx._getTransformMatrix(),c$o=c$B.create();c$n.copyTo(c$o);var c$p=0,c$q=0,c$r=!1,c$s=c$a._$P._filterCache?c$a._$P._filterCache:null;if(!c$s||c$a._repaint){c$r=c$a._isHaveGlowFilter(),c$l.addValue("_isHaveGlowFilter",c$r),c$r&&(c$p=50,c$q=25),(c$i=new c$D).copyFrom(c$a.getSelfBounds()),c$i.x+=c$a.x,c$i.y+=c$a.y,c$i.x-=c$a.pivotX+4,c$i.y-=c$a.pivotY+4;var c$t=c$i.x,c$u=c$i.y;if(c$i.width+=c$p+8,c$i.height+=c$p+8,c$m.x=c$i.x*c$o.a+c$i.y*c$o.c,c$m.y=c$i.y*c$o.d+c$i.x*c$o.b,c$i.x=c$m.x,c$i.y=c$m.y,c$m.x=c$i.width*c$o.a+c$i.height*c$o.c,c$m.y=c$i.height*c$o.d+c$i.width*c$o.b,c$i.width=c$m.x,c$i.height=c$m.y,c$i.width<=0||c$i.height<=0)return;c$s&&c$s.recycle(),c$l.addValue("bounds",c$i);var c$v=c$ia.create([c$l,c$a,c$b,0,0],c$A._filterStart);c$b.addRenderObject(c$v),c$b.ctx._renderKey=0,c$b.ctx._shader2D.glTexture=null;var c$w=c$a.x-c$t+c$q,c$x=c$a.y-c$u+c$q;c$g._fun.call(c$g,c$a,c$b,c$w,c$x),c$v=c$ia.create([c$l,c$a,c$b,0,0],c$A._filterEnd),c$b.addRenderObject(c$v);for(var c$y=0;c$y<c$k;c$y++){0!=c$y&&(c$v=c$ia.create([c$l],c$A._useSrc),c$b.addRenderObject(c$v),c$h=c$Aa.create(1,0),c$B.TEMP.identity(),c$b.ctx.drawTarget(c$l,0,0,c$i.width,c$i.height,c$B.TEMP,"out",c$h,null,c$S.TOINT.overlay),c$v=c$ia.create([c$l],c$A._useOut),c$b.addRenderObject(c$v)),c$j[c$y].action.apply3d(c$l,c$a,c$b,0,0)}c$v=c$ia.create([c$l,c$b],c$A._EndTarget),c$b.addRenderObject(c$v)}else{if((c$r=!!c$a._$P._isHaveGlowFilter&&c$a._$P._isHaveGlowFilter)&&(c$p=50,c$q=25),(c$i=c$a.getBounds()).width<=0||c$i.height<=0)return;c$i.width+=c$p,c$i.height+=c$p,c$m.x=c$i.x*c$o.a+c$i.y*c$o.c,c$m.y=c$i.y*c$o.d+c$i.x*c$o.b,c$i.x=c$m.x,c$i.y=c$m.y,c$m.x=c$i.width*c$o.a+c$i.height*c$o.c,c$m.y=c$i.height*c$o.d+c$i.width*c$o.b,c$i.width=c$m.x,c$i.height=c$m.y,c$l.addValue("out",c$s)}c$c=c$c-c$q-c$a.x,c$d=c$d-c$q-c$a.y,c$m.setTo(c$c,c$d),c$o.transformPoint(c$m),c$c=c$m.x+c$i.x,c$d=c$m.y+c$i.y,c$h=c$Aa.create(1,0),c$B.TEMP.identity(),c$b.ctx.drawTarget(c$l,c$c,c$d,c$i.width,c$i.height,c$B.TEMP,"out",c$h,null,c$S.TOINT.overlay),c$v=c$ia.create([c$l],c$A._recycleScope),c$b.addRenderObject(c$v),c$o.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=c$i._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=c$i._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=c$i._uint8ArraySlice),!0},c$i.onStageResize=function(c$a,c$b){null!=c$i.mainContext&&(c$i.mainContext.viewport(0,0,c$a,c$b),c$ua.width=c$a,c$ua.height=c$b)},c$i.onInvalidGLRes=function(){c$Q.instance.freeAll(),c$w.releaseContentManagers(!0),c$i.doNodeRepaint(c$y.stage),c$i.mainContext.viewport(0,0,c$ua.width,c$ua.height),c$y.stage.event("devicelost")},c$i.doNodeRepaint=function(c$a){0==c$a.numChildren&&c$a.repaint();for(var c$b=0;c$b<c$a.numChildren;c$b++)c$i.doNodeRepaint(c$a.getChildAt(c$b))},c$i.init=function(c$a,c$b,c$c){c$i.mainCanvas=c$a,c$l._createContext=function(c$a){return new c$za(c$a)},c$Ua._createContext=function(c$a){return new c$za(c$a)};var c$d=laya.webgl.WebGL.mainContext;if(null!=c$d.getShaderPrecisionFormat){var c$g=c$d.getShaderPrecisionFormat(35633,36338),c$h=c$d.getShaderPrecisionFormat(35632,36338);c$i.shaderHighPrecision=!(!c$g.precision||!c$h.precision)}else c$i.shaderHighPrecision=!1;if(c$i.compressAstc=c$d.getExtension("WEBGL_compressed_texture_astc"),c$i.compressAtc=c$d.getExtension("WEBGL_compressed_texture_atc"),c$i.compressEtc=c$d.getExtension("WEBGL_compressed_texture_etc"),c$i.compressEtc1=c$d.getExtension("WEBGL_compressed_texture_etc1"),c$i.compressPvrtc=c$d.getExtension("WEBGL_compressed_texture_pvrtc"),c$i.compressS3tc=c$d.getExtension("WEBGL_compressed_texture_s3tc"),c$i.compressS3tc_srgb=c$d.getExtension("WEBGL_compressed_texture_s3tc_srgb"),c$i.compressAstc=c$i.compressAstc?c$i.compressAstc:{},c$i.compressAtc=c$i.compressAtc?c$i.compressAtc:{},c$i.compressEtc=c$i.compressEtc?c$i.compressEtc:{},c$i.compressEtc1=c$i.compressEtc1?c$i.compressEtc1:{},c$i.compressPvrtc=c$i.compressPvrtc?c$i.compressPvrtc:{},c$i.compressS3tc=c$i.compressS3tc?c$i.compressS3tc:{},c$i.compressS3tc_srgb=c$i.compressS3tc_srgb?c$i.compressS3tc_srgb:{},c$d.deleteTexture1=c$d.deleteTexture,c$d.deleteTexture=function(c$a){c$a==c$xa.curBindTexValue&&(c$xa.curBindTexValue=null),c$d.deleteTexture1(c$a)},c$i.onStageResize(c$b,c$c),null==c$i.mainContext)throw new Error("webGL getContext err!");c$I.__init__(),c$Q.__init__(),c$Ea.__init__(),c$ha.__init__(),c$za.__init__(),c$Aa.__init__(),c$e.__init__(),c$Za.__int__(c$d),c$S._init_(c$d),c$t.isConchApp&&conch.setOnInvalidGLRes(c$i.onInvalidGLRes)},c$i.compressAstc={},c$i.compressAtc={},c$i.compressEtc={},c$i.compressEtc1={},c$i.compressPvrtc={},c$i.compressS3tc={},c$i.compressS3tc_srgb={},c$i.mainCanvas=null,c$i.mainContext=null,c$i.antialias=!0,c$i.shaderHighPrecision=!1,c$i._bg_null=[0,0,0,0],c$i}(),c$xa=function(){function c$d(){}return c$o(c$d,"laya.webgl.WebGLContext"),c$d.UseProgram=function(c$a){return c$d._useProgram!==c$a&&(c$wa.mainContext.useProgram(c$a),c$d._useProgram=c$a,!0)},c$d.setDepthTest=function(c$a,c$b){c$b!==c$d._depthTest&&((c$d._depthTest=c$b)?c$a.enable(2929):c$a.disable(2929))},c$d.setDepthMask=function(c$a,c$b){c$b!==c$d._depthMask&&(c$d._depthMask=c$b,c$a.depthMask(c$b))},c$d.setDepthFunc=function(c$a,c$b){c$b!==c$d._depthFunc&&(c$d._depthFunc=c$b,c$a.depthFunc(c$b))},c$d.setBlend=function(c$a,c$b){c$b!==c$d._blend&&((c$d._blend=c$b)?c$a.enable(3042):c$a.disable(3042))},c$d.setBlendFunc=function(c$a,c$b,c$c){(c$b!==c$d._sFactor||c$c!==c$d._dFactor)&&(c$d._sFactor=c$b,c$d._dFactor=c$c,c$a.blendFunc(c$b,c$c))},c$d.setCullFace=function(c$a,c$b){c$b!==c$d._cullFace&&((c$d._cullFace=c$b)?c$a.enable(2884):c$a.disable(2884))},c$d.setFrontFace=function(c$a,c$b){c$b!==c$d._frontFace&&(c$d._frontFace=c$b,c$a.frontFace(c$b))},c$d.bindTexture=function(c$a,c$b,c$c){c$a.bindTexture(c$b,c$c),c$d.curBindTexTarget=c$b,c$d.curBindTexValue=c$c},c$d.DEPTH_BUFFER_BIT=256,c$d.STENCIL_BUFFER_BIT=1024,c$d.COLOR_BUFFER_BIT=16384,c$d.POINTS=0,c$d.LINES=1,c$d.LINE_LOOP=2,c$d.LINE_STRIP=3,c$d.TRIANGLES=4,c$d.TRIANGLE_STRIP=5,c$d.TRIANGLE_FAN=6,c$d.ZERO=0,c$d.ONE=1,c$d.SRC_COLOR=768,c$d.ONE_MINUS_SRC_COLOR=769,c$d.SRC_ALPHA=770,c$d.ONE_MINUS_SRC_ALPHA=771,c$d.DST_ALPHA=772,c$d.ONE_MINUS_DST_ALPHA=773,c$d.DST_COLOR=774,c$d.ONE_MINUS_DST_COLOR=775,c$d.SRC_ALPHA_SATURATE=776,c$d.FUNC_ADD=32774,c$d.BLEND_EQUATION=32777,c$d.BLEND_EQUATION_RGB=32777,c$d.BLEND_EQUATION_ALPHA=34877,c$d.FUNC_SUBTRACT=32778,c$d.FUNC_REVERSE_SUBTRACT=32779,c$d.BLEND_DST_RGB=32968,c$d.BLEND_SRC_RGB=32969,c$d.BLEND_DST_ALPHA=32970,c$d.BLEND_SRC_ALPHA=32971,c$d.CONSTANT_COLOR=32769,c$d.ONE_MINUS_CONSTANT_COLOR=32770,c$d.CONSTANT_ALPHA=32771,c$d.ONE_MINUS_CONSTANT_ALPHA=32772,c$d.BLEND_COLOR=32773,c$d.ARRAY_BUFFER=34962,c$d.ELEMENT_ARRAY_BUFFER=34963,c$d.ARRAY_BUFFER_BINDING=34964,c$d.ELEMENT_ARRAY_BUFFER_BINDING=34965,c$d.STREAM_DRAW=35040,c$d.STATIC_DRAW=35044,c$d.DYNAMIC_DRAW=35048,c$d.BUFFER_SIZE=34660,c$d.BUFFER_USAGE=34661,c$d.CURRENT_VERTEX_ATTRIB=34342,c$d.FRONT=1028,c$d.BACK=1029,c$d.CULL_FACE=2884,c$d.FRONT_AND_BACK=1032,c$d.BLEND=3042,c$d.DITHER=3024,c$d.STENCIL_TEST=2960,c$d.DEPTH_TEST=2929,c$d.SCISSOR_TEST=3089,c$d.POLYGON_OFFSET_FILL=32823,c$d.SAMPLE_ALPHA_TO_COVERAGE=32926,c$d.SAMPLE_COVERAGE=32928,c$d.NO_ERROR=0,c$d.INVALID_ENUM=1280,c$d.INVALID_VALUE=1281,c$d.INVALID_OPERATION=1282,c$d.OUT_OF_MEMORY=1285,c$d.CW=2304,c$d.CCW=2305,c$d.LINE_WIDTH=2849,c$d.ALIASED_POINT_SIZE_RANGE=33901,c$d.ALIASED_LINE_WIDTH_RANGE=33902,c$d.CULL_FACE_MODE=2885,c$d.FRONT_FACE=2886,c$d.DEPTH_RANGE=2928,c$d.DEPTH_WRITEMASK=2930,c$d.DEPTH_CLEAR_VALUE=2931,c$d.DEPTH_FUNC=2932,c$d.STENCIL_CLEAR_VALUE=2961,c$d.STENCIL_FUNC=2962,c$d.STENCIL_FAIL=2964,c$d.STENCIL_PASS_DEPTH_FAIL=2965,c$d.STENCIL_PASS_DEPTH_PASS=2966,c$d.STENCIL_REF=2967,c$d.STENCIL_VALUE_MASK=2963,c$d.STENCIL_WRITEMASK=2968,c$d.STENCIL_BACK_FUNC=34816,c$d.STENCIL_BACK_FAIL=34817,c$d.STENCIL_BACK_PASS_DEPTH_FAIL=34818,c$d.STENCIL_BACK_PASS_DEPTH_PASS=34819,c$d.STENCIL_BACK_REF=36003,c$d.STENCIL_BACK_VALUE_MASK=36004,c$d.STENCIL_BACK_WRITEMASK=36005,c$d.VIEWPORT=2978,c$d.SCISSOR_BOX=3088,c$d.COLOR_CLEAR_VALUE=3106,c$d.COLOR_WRITEMASK=3107,c$d.UNPACK_ALIGNMENT=3317,c$d.PACK_ALIGNMENT=3333,c$d.MAX_TEXTURE_SIZE=3379,c$d.MAX_VIEWPORT_DIMS=3386,c$d.SUBPIXEL_BITS=3408,c$d.RED_BITS=3410,c$d.GREEN_BITS=3411,c$d.BLUE_BITS=3412,c$d.ALPHA_BITS=3413,c$d.DEPTH_BITS=3414,c$d.STENCIL_BITS=3415,c$d.POLYGON_OFFSET_UNITS=10752,c$d.POLYGON_OFFSET_FACTOR=32824,c$d.TEXTURE_BINDING_2D=32873,c$d.SAMPLE_BUFFERS=32936,c$d.SAMPLES=32937,c$d.SAMPLE_COVERAGE_VALUE=32938,c$d.SAMPLE_COVERAGE_INVERT=32939,c$d.NUM_COMPRESSED_TEXTURE_FORMATS=34466,c$d.COMPRESSED_TEXTURE_FORMATS=34467,c$d.DONT_CARE=4352,c$d.FASTEST=4353,c$d.NICEST=4354,c$d.GENERATE_MIPMAP_HINT=33170,c$d.BYTE=5120,c$d.UNSIGNED_BYTE=5121,c$d.SHORT=5122,c$d.UNSIGNED_SHORT=5123,c$d.INT=5124,c$d.UNSIGNED_INT=5125,c$d.FLOAT=5126,c$d.DEPTH_COMPONENT=6402,c$d.ALPHA=6406,c$d.RGB=6407,c$d.RGBA=6408,c$d.LUMINANCE=6409,c$d.LUMINANCE_ALPHA=6410,c$d.UNSIGNED_SHORT_4_4_4_4=32819,c$d.UNSIGNED_SHORT_5_5_5_1=32820,c$d.UNSIGNED_SHORT_5_6_5=33635,c$d.FRAGMENT_SHADER=35632,c$d.VERTEX_SHADER=35633,c$d.MAX_VERTEX_ATTRIBS=34921,c$d.MAX_VERTEX_UNIFORM_VECTORS=36347,c$d.MAX_VARYING_VECTORS=36348,c$d.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,c$d.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,c$d.MAX_TEXTURE_IMAGE_UNITS=34930,c$d.MAX_FRAGMENT_UNIFORM_VECTORS=36349,c$d.SHADER_TYPE=35663,c$d.DELETE_STATUS=35712,c$d.LINK_STATUS=35714,c$d.VALIDATE_STATUS=35715,c$d.ATTACHED_SHADERS=35717,c$d.ACTIVE_UNIFORMS=35718,c$d.ACTIVE_ATTRIBUTES=35721,c$d.SHADING_LANGUAGE_VERSION=35724,c$d.CURRENT_PROGRAM=35725,c$d.NEVER=512,c$d.LESS=513,c$d.EQUAL=514,c$d.LEQUAL=515,c$d.GREATER=516,c$d.NOTEQUAL=517,c$d.GEQUAL=518,c$d.ALWAYS=519,c$d.KEEP=7680,c$d.REPLACE=7681,c$d.INCR=7682,c$d.DECR=7683,c$d.INVERT=5386,c$d.INCR_WRAP=34055,c$d.DECR_WRAP=34056,c$d.VENDOR=7936,c$d.RENDERER=7937,c$d.VERSION=7938,c$d.NEAREST=9728,c$d.LINEAR=9729,c$d.NEAREST_MIPMAP_NEAREST=9984,c$d.LINEAR_MIPMAP_NEAREST=9985,c$d.NEAREST_MIPMAP_LINEAR=9986,c$d.LINEAR_MIPMAP_LINEAR=9987,c$d.TEXTURE_MAG_FILTER=10240,c$d.TEXTURE_MIN_FILTER=10241,c$d.TEXTURE_WRAP_S=10242,c$d.TEXTURE_WRAP_T=10243,c$d.TEXTURE_2D=3553,c$d.TEXTURE=5890,c$d.TEXTURE_CUBE_MAP=34067,c$d.TEXTURE_BINDING_CUBE_MAP=34068,c$d.TEXTURE_CUBE_MAP_POSITIVE_X=34069,c$d.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,c$d.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,c$d.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,c$d.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,c$d.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,c$d.MAX_CUBE_MAP_TEXTURE_SIZE=34076,c$d.TEXTURE0=33984,c$d.TEXTURE1=33985,c$d.TEXTURE2=33986,c$d.TEXTURE3=33987,c$d.TEXTURE4=33988,c$d.TEXTURE5=33989,c$d.TEXTURE6=33990,c$d.TEXTURE7=33991,c$d.TEXTURE8=33992,c$d.TEXTURE9=33993,c$d.TEXTURE10=33994,c$d.TEXTURE11=33995,c$d.TEXTURE12=33996,c$d.TEXTURE13=33997,c$d.TEXTURE14=33998,c$d.TEXTURE15=33999,c$d.TEXTURE16=34e3,c$d.TEXTURE17=34001,c$d.TEXTURE18=34002,c$d.TEXTURE19=34003,c$d.TEXTURE20=34004,c$d.TEXTURE21=34005,c$d.TEXTURE22=34006,c$d.TEXTURE23=34007,c$d.TEXTURE24=34008,c$d.TEXTURE25=34009,c$d.TEXTURE26=34010,c$d.TEXTURE27=34011,c$d.TEXTURE28=34012,c$d.TEXTURE29=34013,c$d.TEXTURE30=34014,c$d.TEXTURE31=34015,c$d.ACTIVE_TEXTURE=34016,c$d.REPEAT=10497,c$d.CLAMP_TO_EDGE=33071,c$d.MIRRORED_REPEAT=33648,c$d.FLOAT_VEC2=35664,c$d.FLOAT_VEC3=35665,c$d.FLOAT_VEC4=35666,c$d.INT_VEC2=35667,c$d.INT_VEC3=35668,c$d.INT_VEC4=35669,c$d.BOOL=35670,c$d.BOOL_VEC2=35671,c$d.BOOL_VEC3=35672,c$d.BOOL_VEC4=35673,c$d.FLOAT_MAT2=35674,c$d.FLOAT_MAT3=35675,c$d.FLOAT_MAT4=35676,c$d.SAMPLER_2D=35678,c$d.SAMPLER_CUBE=35680,c$d.VERTEX_ATTRIB_ARRAY_ENABLED=34338,c$d.VERTEX_ATTRIB_ARRAY_SIZE=34339,c$d.VERTEX_ATTRIB_ARRAY_STRIDE=34340,c$d.VERTEX_ATTRIB_ARRAY_TYPE=34341,c$d.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,c$d.VERTEX_ATTRIB_ARRAY_POINTER=34373,c$d.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,c$d.COMPILE_STATUS=35713,c$d.LOW_FLOAT=36336,c$d.MEDIUM_FLOAT=36337,c$d.HIGH_FLOAT=36338,c$d.LOW_INT=36339,c$d.MEDIUM_INT=36340,c$d.HIGH_INT=36341,c$d.FRAMEBUFFER=36160,c$d.RENDERBUFFER=36161,c$d.RGBA4=32854,c$d.RGB5_A1=32855,c$d.RGB565=36194,c$d.DEPTH_COMPONENT16=33189,c$d.STENCIL_INDEX=6401,c$d.STENCIL_INDEX8=36168,c$d.DEPTH_STENCIL=34041,c$d.RENDERBUFFER_WIDTH=36162,c$d.RENDERBUFFER_HEIGHT=36163,c$d.RENDERBUFFER_INTERNAL_FORMAT=36164,c$d.RENDERBUFFER_RED_SIZE=36176,c$d.RENDERBUFFER_GREEN_SIZE=36177,c$d.RENDERBUFFER_BLUE_SIZE=36178,c$d.RENDERBUFFER_ALPHA_SIZE=36179,c$d.RENDERBUFFER_DEPTH_SIZE=36180,c$d.RENDERBUFFER_STENCIL_SIZE=36181,c$d.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,c$d.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,c$d.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,c$d.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,c$d.COLOR_ATTACHMENT0=36064,c$d.DEPTH_ATTACHMENT=36096,c$d.STENCIL_ATTACHMENT=36128,c$d.DEPTH_STENCIL_ATTACHMENT=33306,c$d.NONE=0,c$d.FRAMEBUFFER_COMPLETE=36053,c$d.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,c$d.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,c$d.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,c$d.FRAMEBUFFER_UNSUPPORTED=36061,c$d.FRAMEBUFFER_BINDING=36006,c$d.RENDERBUFFER_BINDING=36007,c$d.MAX_RENDERBUFFER_SIZE=34024,c$d.INVALID_FRAMEBUFFER_OPERATION=1286,c$d.UNPACK_FLIP_Y_WEBGL=37440,c$d.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,c$d.CONTEXT_LOST_WEBGL=37442,c$d.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,c$d.BROWSER_DEFAULT_WEBGL=37444,c$d._useProgram=null,c$d._depthTest=!0,c$d._depthMask=!0,c$d._blend=!1,c$d._cullFace=!1,c$d.curBindTexTarget=null,c$d.curBindTexValue=null,c$i(c$d,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),c$d}(),c$ya=function(c$a){function c$b(){c$b.__super.call(this)}c$o(c$b,"laya.webgl.display.GraphicsGL",c$j);var c$c=c$b.prototype;return c$c.setShader=function(c$a){this._saveToCmd(c$t.context._setShader,[c$a])},c$c.setIBVB=function(c$a,c$b,c$c,c$d,c$g,c$h){this._saveToCmd(c$t.context._setIBVB,[c$a,c$b,c$c,c$d,c$g,c$h])},c$c.drawParticle=function(c$a,c$b,c$c){var c$d=c$x.createParticleTemplate2D(c$c);c$d.x=c$a,c$d.y=c$b,this._saveToCmd(c$t.context._drawParticle,[c$d])},c$b}(),c$za=function(c$a){var c$c;function c$P(c$a){this._x=0,this._y=0,this._id=++c$P._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,c$P.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=c$P.MAXCLIPRECT,this.mOutPoint,this._canvas=c$a,this._canvas._addReference(),c$P._contextcount++,c$t.isFlash?(this._ib=c$ea.create(35044),c$sa.fillIBQuadrangle(this._ib,16)):this._ib=c$ea.QuadrangleIB,this.clear()}c$o(c$P,"laya.webgl.canvas.WebGLContext2D",c$g);var c$b=c$P.prototype;return c$b.setIsMainContext=function(){this._isMain=!0},c$b.clearBG=function(c$a,c$b,c$c,c$d){var c$g=c$wa.mainContext;c$g.clearColor(c$a,c$b,c$c,c$d),c$g.clear(16384)},c$b._getSubmits=function(){return this._submits},c$b._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var c$a=0,c$b=this._submits._length;c$a<c$b;c$a++)this._submits[c$a].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},c$b.destroy=function(){--c$P._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=c$ea.QuadrangleIB&&this._ib.releaseResource()},c$b.clear=function(){this._submits||(this._other=c$c.DEFAULT,this._curMat=c$B.create(),this._vb=c$fa.create(-1),this._submits=[],this._save=[c$Y.Create(this)],this._save.length=10,this._shader2D=new c$e,this._triangleMesh=c$Ka.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=c$c.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=c$P.MAXCLIPRECT,this._curSubmit=c$ha.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=c$T.DEFAULT;for(var c$a=0,c$b=this._submits._length;c$a<c$b;c$a++)this._submits[c$a].releaseRender(),this._submits[c$a]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},c$b.size=function(c$a,c$b){if(this._width!=c$a||this._height!=c$b)if(0==c$a||0==c$b){0!=this._vb._byteLength&&(this._width=c$a,this._height=c$b,this._vb.clear(),this._vb.upload());for(var c$c=0,c$d=this._submits._length;c$c<c$d;c$c++)this._submits[c$c].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=c$a,this._height=c$b,this._targets&&this._targets.size(c$a,c$b),this._canvas.memorySize-=this._canvas.memorySize;0===c$a&&0===c$b&&this._releaseMem()},c$b._getTransformMatrix=function(){return this._curMat},c$b.translate=function(c$a,c$b){0===c$a&&0===c$b||(c$$.save(this),this._curMat.bTransform&&(c$Z.save(this),this._curMat.transformPointN(c$C.TEMP.setTo(c$a,c$b)),c$a=c$C.TEMP.x,c$b=c$C.TEMP.y),this._x+=c$a,this._y+=c$b)},c$b.save=function(){this._save[this._save._length++]=c$Y.Create(this)},c$b.restore=function(){var c$a=this._save._length;if(!(c$a<1))for(var c$b=c$a-1;0<=c$b;c$b--){var c$c=this._save[c$b];if(c$c.restore(this),c$c.isSaveMark())return void(this._save._length=c$b)}},c$b._fillText=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l){void 0===c$l&&(c$l=0);var c$m=this._shader2D,c$n=this._curSubmit.shaderValue,c$o=c$g?c$qa.create(c$g):this._other.font;if(c$Q.enabled)c$m.ALPHA!==c$n.ALPHA&&(c$m.glTexture=null),c$pa.drawText(this,c$a,c$b,this._curMat,c$o,c$k||this._other.textAlign,c$h,c$i,c$j,c$c,c$d,c$l);else{this._shader2D.defines.getValue();var c$p=c$h?c$q.create(c$h)._color:c$m.colorAdd;c$m.ALPHA===c$n.ALPHA&&c$p===c$m.colorAdd&&c$n.colorAdd===c$m.colorAdd||(c$m.glTexture=null,c$m.colorAdd=c$p),c$pa.drawText(this,c$a,c$b,this._curMat,c$o,c$k||this._other.textAlign,c$h,c$i,c$j,c$c,c$d,c$l)}},c$b.fillWords=function(c$a,c$b,c$c,c$d,c$g,c$h){this._fillText(null,c$a,c$b,c$c,c$d,c$g,null,-1,null,c$h)},c$b.fillBorderWords=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){this._fillBorderText(null,c$a,c$b,c$c,c$d,c$g,c$h,c$i,null)},c$b.fillText=function(c$a,c$b,c$c,c$d,c$g,c$h){this._fillText(c$a,null,c$b,c$c,c$d,c$g,null,-1,c$h)},c$b.strokeText=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){this._fillText(c$a,null,c$b,c$c,c$d,null,c$g,c$h||1,c$i)},c$b.fillBorderText=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){this._fillBorderText(c$a,null,c$b,c$c,c$d,c$g,c$h,c$i,c$j)},c$b._fillBorderText=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k){if(!c$Q.enabled)return this._fillText(c$a,c$b,c$c,c$d,c$g,null,c$i,c$j||1,c$k),void this._fillText(c$a,c$b,c$c,c$d,c$g,c$h,null,-1,c$k);var c$l=this._shader2D,c$m=this._curSubmit.shaderValue;c$l.ALPHA!==c$m.ALPHA&&(c$l.glTexture=null);var c$n=c$g?(c$P._fontTemp.setFont(c$g),c$P._fontTemp):this._other.font;c$pa.drawText(this,c$a,c$b,this._curMat,c$n,c$k||this._other.textAlign,c$h,c$i,c$j||1,c$c,c$d,0)},c$b.fillRect=function(c$a,c$b,c$c,c$d,c$g){var c$h=this._vb;if(c$sa.fillRectImgVb(c$h,this._clipRect,c$a,c$b,c$c,c$d,c$K.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var c$i=this._shader2D.fillStyle;c$g&&(this._shader2D.fillStyle=c$T.create(c$g));var c$j=this._shader2D,c$k=this._curSubmit.shaderValue;if(c$j.fillStyle!==c$k.fillStyle||c$j.ALPHA!==c$k.ALPHA){c$j.glTexture=null;var c$l=this._curSubmit=c$ha.createSubmit(this,this._ib,c$h,(c$h._byteLength-64)/32*3,c$Aa.create(2,0));c$l.shaderValue.color=c$j.fillStyle._color._color,c$l.shaderValue.ALPHA=c$j.ALPHA,this._submits[this._submits._length++]=c$l}this._curSubmit._numEle+=6,this._shader2D.fillStyle=c$i}},c$b.fillTexture=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){if(c$a.loaded&&c$a.bitmap&&c$a.source){var c$k=this._vb,c$l=c$a.bitmap.width,c$m=c$a.bitmap.height,c$n=c$a.uv,c$o=c$i.x%c$a.width,c$p=c$i.y%c$a.height;if(c$l!=c$j.w||c$m!=c$j.h){if(!c$j.w&&!c$j.h)switch(c$j.oy=c$j.ox=0,c$h){case"repeat":c$j.width=c$d,c$j.height=c$g;break;case"repeat-x":c$j.width=c$d,c$p<0?c$a.height+c$p>c$g?c$j.height=c$g:c$j.height=c$a.height+c$p:(c$j.oy=c$p,c$a.height+c$p>c$g?c$j.height=c$g-c$p:c$j.height=c$a.height);break;case"repeat-y":c$o<0?c$a.width+c$o>c$d?c$j.width=c$d:c$j.width=c$a.width+c$o:(c$j.ox=c$o,c$a.width+c$o>c$d?c$j.width=c$d-c$o:c$j.width=c$a.width),c$j.height=c$g;break;case"no-repeat":c$o<0?c$a.width+c$o>c$d?c$j.width=c$d:c$j.width=c$a.width+c$o:(c$j.ox=c$o,c$a.width+c$o>c$d?c$j.width=c$d-c$o:c$j.width=c$a.width),c$p<0?c$a.height+c$p>c$g?c$j.height=c$g:c$j.height=c$a.height+c$p:(c$j.oy=c$p,c$a.height+c$p>c$g?c$j.height=c$g-c$p:c$j.height=c$a.height);break;default:c$j.width=c$d,c$j.height=c$g}c$j.w=c$l,c$j.h=c$m,c$j.uv=[0,0,c$j.width/c$l,0,c$j.width/c$l,c$j.height/c$m,0,c$j.height/c$m]}if(c$b+=c$j.ox,c$c+=c$j.oy,c$o-=c$j.ox,c$p-=c$j.oy,c$sa.fillRectImgVb(c$k,this._clipRect,c$b,c$c,c$j.width,c$j.height,c$j.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var c$q=c$Ja.create(this,this._ib,c$k,(c$k._byteLength-64)/32*3,c$Aa.create(256,0)),c$r=(this._submits[this._submits._length++]=c$q).shaderValue;c$r.textureHost=c$a;var c$s=c$n[0]*c$l,c$t=c$n[1]*c$m,c$u=(c$n[2]-c$n[0])*c$l,c$v=(c$n[5]-c$n[3])*c$m,c$w=-c$o/c$l,c$x=-c$p/c$m;c$r.u_TexRange[0]=c$s/c$l,c$r.u_TexRange[1]=c$u/c$l,c$r.u_TexRange[2]=c$t/c$m,c$r.u_TexRange[3]=c$v/c$m,c$r.u_offset[0]=c$w,c$r.u_offset[1]=c$x,c$Q.enabled&&!this._isMain&&c$q.addTexture(c$a,(c$k._byteLength>>2)-16),(this._curSubmit=c$q)._renderType=10017,c$q._numEle+=6}}else this.sprite&&c$y.timer.callLater(this,this._repaintSprite)},c$b.setShader=function(c$a){c$V.save(this,1048576,this._shader2D,!0),this._shader2D.shader=c$a},c$b.setFilters=function(c$a){c$V.save(this,2097152,this._shader2D,!0),this._shader2D.filters=c$a,this._curSubmit=c$ha.RENDERBASE,this._renderKey=0,this._drawCount++},c$b.drawTexture=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){this._drawTextureM(c$a,c$b,c$c,c$d,c$g,c$h,c$i,null,1)},c$b.addTextureVb=function(c$a,c$b,c$c){var c$d=this._curSubmit._vb||this._vb,c$g=c$d._byteLength>>2;c$d.byteLength=c$g+16<<2;for(var c$h=c$d.getFloat32Array(),c$i=0;c$i<16;c$i+=4)c$h[c$g++]=c$a[c$i]+c$b,c$h[c$g++]=c$a[c$i+1]+c$c,c$h[c$g++]=c$a[c$i+2],c$h[c$g++]=c$a[c$i+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),c$d._upload=!0},c$b.willDrawTexture=function(c$a,c$b){if(!(c$a.loaded&&c$a.bitmap&&c$a.source))return this.sprite&&c$y.timer.callLater(this,this._repaintSprite),0;var c$c=c$a.bitmap,c$d=c$c.id+this._shader2D.ALPHA*c$b+10016;if(c$d==this._renderKey)return c$d;var c$g=this._shader2D,c$h=c$g.ALPHA,c$i=this._curSubmit.shaderValue;c$g.ALPHA*=c$b,this._renderKey=c$d,this._drawCount++,c$g.glTexture=c$c;var c$j=this._vb,c$k=null,c$l=c$j._byteLength/32*3,c$m=c$i.textureHost&&c$i.textureHost==c$a&&c$i.textureHost.alphaTexture==c$a.alphaTexture;return c$k=c$Ja.create(this,this._ib,c$j,c$l,c$Aa.create(1,0)),(this._submits[this._submits._length++]=c$k).shaderValue.textureHost=c$a,c$k._renderType=10016,c$k._preIsSameTextureShader=10016===this._curSubmit._renderType&&c$g.ALPHA===c$i.ALPHA&&c$m,this._curSubmit=c$k,c$g.ALPHA=c$h,c$d},c$b.drawTextures=function(c$a,c$b,c$c,c$d){if(c$a.loaded&&c$a.bitmap&&c$a.source){var c$g=this._clipRect;if(this._clipRect=c$P.MAXCLIPRECT,this._drawTextureM(c$a,c$b[0],c$b[1],c$a.width,c$a.height,c$c,c$d,null,1)){if(this._clipRect=c$g,c$G.drawCall++,!(c$b.length<4)){for(var c$h=this._curSubmit._vb||this._vb,c$i=this._curMat.a,c$j=this._curMat.d,c$k=2,c$l=c$b.length;c$k<c$l;c$k+=2)c$sa.copyPreImgVb(c$h,(c$b[c$k]-c$b[c$k-2])*c$i,(c$b[c$k+1]-c$b[c$k-1])*c$j),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&c$y.timer.callLater(this,this._repaintSprite)},c$b._drawTextureM=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k){if(!c$a.loaded||!c$a.source)return this.sprite&&c$y.timer.callLater(this,this._repaintSprite),!1;var c$l=this._curSubmit._vb||this._vb,c$m=c$a.bitmap;c$b+=c$h,c$c+=c$i,this._drawCount++;var c$n=c$m.id+this._shader2D.ALPHA*c$k+10016;if(c$n!=this._renderKey){this._renderKey=c$n;var c$o=this._curSubmit.shaderValue,c$p=this._shader2D,c$q=c$p.ALPHA;c$p.ALPHA*=c$k,c$p.glTexture=c$m;var c$r=this._vb,c$s=null,c$t=c$r._byteLength/32*3,c$u=c$o.textureHost&&c$o.textureHost==c$a&&c$o.textureHost.alphaTexture==c$a.alphaTexture;c$s=c$Ja.create(this,this._ib,c$r,c$t,c$Aa.create(1,0)),(this._submits[this._submits._length++]=c$s).shaderValue.textureHost=c$a,c$s._renderType=10016,c$s._preIsSameTextureShader=10016===this._curSubmit._renderType&&c$p.ALPHA===c$o.ALPHA&&c$u,this._curSubmit=c$s,c$l=this._curSubmit._vb||this._vb,c$p.ALPHA=c$q}return!!c$sa.fillRectImgVb(c$l,this._clipRect,c$b,c$c,c$d||c$a.width,c$g||c$a.height,c$a.uv,c$j||this._curMat,this._x,this._y,0,0)&&(c$Q.enabled&&!this._isMain&&this._curSubmit.addTexture(c$a,(c$l._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},c$b._repaintSprite=function(){this.sprite&&this.sprite.repaint()},c$b._drawText=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l){var c$m=c$a.bitmap;this._drawCount++;var c$n=c$m.id+this._shader2D.ALPHA+10016;if(c$n!=this._renderKey){this._renderKey=c$n;var c$o=this._curSubmit.shaderValue,c$p=this._shader2D;c$p.glTexture=c$m;var c$q=this._vb,c$r=null,c$s=c$q._byteLength/32*3,c$t=c$o.textureHost&&c$o.textureHost==c$a&&c$o.textureHost.alphaTexture==c$a.alphaTexture;(c$r=c$Q.enabled?c$Ja.create(this,this._ib,c$q,c$s,c$Aa.create(1,0)):c$Ja.create(this,this._ib,c$q,c$s,c$$a.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&c$p.ALPHA===c$o.ALPHA&&c$t,(this._submits[this._submits._length++]=c$r).shaderValue.textureHost=c$a,c$r._renderType=10016,this._curSubmit=c$r}c$a.active();var c$u=this._curSubmit._vb||this._vb;c$sa.fillRectImgVb(c$u,this._clipRect,c$b+c$i,c$c+c$j,c$d||c$a.width,c$g||c$a.height,c$a.uv,c$h||this._curMat,this._x,this._y,c$k,c$l,!0)&&(c$Q.enabled&&!this._isMain&&this._curSubmit.addTexture(c$a,(c$u._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},c$b.drawTextureWithTransform=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k){if(c$h){var c$l=this._curMat,c$m=this._x,c$n=this._y;(0!==c$i||0!==c$j)&&(this._x=c$i*c$l.a+c$j*c$l.c,this._y=c$j*c$l.d+c$i*c$l.b),c$h&&c$l.bTransform?(c$B.mul(c$h,c$l,c$P._tmpMatrix),(c$h=c$P._tmpMatrix)._checkTransform()):(this._x+=c$l.tx,this._y+=c$l.ty),this._drawTextureM(c$a,c$b,c$c,c$d,c$g,0,0,c$h,c$k),this._x=c$m,this._y=c$n}else this._drawTextureM(c$a,c$b,c$c,c$d,c$g,c$i,c$j,null,c$k)},c$b.fillQuadrangle=function(c$a,c$b,c$c,c$d,c$g){var c$h=this._curSubmit,c$i=this._vb,c$j=this._shader2D,c$k=c$h.shaderValue;if(this._renderKey=0,c$a.bitmap){var c$l=c$a.bitmap;c$j.glTexture==c$l&&c$j.ALPHA===c$k.ALPHA||(c$j.glTexture=c$l,(c$h=this._curSubmit=c$ha.createSubmit(this,this._ib,c$i,c$i._byteLength/32*3,c$Aa.create(1,0))).shaderValue.glTexture=c$l,this._submits[this._submits._length++]=c$h),c$sa.fillQuadrangleImgVb(c$i,c$b,c$c,c$d,c$a.uv,c$g||this._curMat,this._x,this._y)}else c$h.shaderValue.fillStyle&&c$h.shaderValue.fillStyle.equal(c$a)&&c$j.ALPHA===c$k.ALPHA||(c$j.glTexture=null,(c$h=this._curSubmit=c$ha.createSubmit(this,this._ib,c$i,c$i._byteLength/32*3,c$Aa.create(2,0))).shaderValue.defines.add(2),c$h.shaderValue.fillStyle=c$T.create(c$a),this._submits[this._submits._length++]=c$h),c$sa.fillQuadrangleImgVb(c$i,c$b,c$c,c$d,c$K.DEF_UV,c$g||this._curMat,this._x,this._y);c$h._numEle+=6},c$b.drawTexture2=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){if(0!=c$h){var c$k=this._curMat;if(this._x=c$a*c$k.a+c$b*c$k.c,this._y=c$b*c$k.d+c$a*c$k.b,c$g&&(c$g=c$k.bTransform||c$g.bTransform?(c$B.mul(c$g,c$k,c$P._tmpMatrix),c$P._tmpMatrix):(this._x+=c$g.tx+c$k.tx,this._y+=c$g.ty+c$k.ty,c$B.EMPTY)),1!==c$h||c$i){var c$l=this._shader2D.ALPHA,c$m=this._nBlendType;this._shader2D.ALPHA=c$h,c$i&&(this._nBlendType=c$S.TOINT(c$i)),this._drawTextureM(c$j[0],c$j[1]-c$c,c$j[2]-c$d,c$j[3],c$j[4],0,0,c$g,1),this._shader2D.ALPHA=c$l,this._nBlendType=c$m}else this._drawTextureM(c$j[0],c$j[1]-c$c,c$j[2]-c$d,c$j[3],c$j[4],0,0,c$g,1);this._x=this._y=0}},c$b.drawCanvas=function(c$a,c$b,c$c,c$d,c$g){var c$h=c$a.context;if(this._renderKey=0,c$h._targets)this._submits[this._submits._length++]=c$Ia.create(c$h,0,null),this._curSubmit=c$ha.RENDERBASE,c$h._targets.drawTo(this,c$b,c$c,c$d,c$g);else{var c$i=this._submits[this._submits._length++]=c$Ia.create(c$h,this._shader2D.ALPHA,this._shader2D.filters),c$j=c$d/c$a.width,c$k=c$g/c$a.height,c$l=c$i._matrix;this._curMat.copyTo(c$l),1!=c$j&&1!=c$k&&c$l.scale(c$j,c$k);var c$m=c$l.tx,c$n=c$l.ty;c$l.tx=c$l.ty=0,c$l.transformPoint(c$C.TEMP.setTo(c$b,c$c)),c$l.translate(c$C.TEMP.x+c$m,c$C.TEMP.y+c$n),this._curSubmit=c$ha.RENDERBASE}c$z.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=c$h._targets?"yellow":"green",this.strokeRect(c$b-1,c$c-1,c$d+2,c$g+2,1),this.strokeRect(c$b,c$c,c$d,c$g,1),this.restore())},c$b.drawTarget=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l){void 0===c$l&&(c$l=-1);var c$m=this._vb;if(c$sa.fillRectImgVb(c$m,this._clipRect,c$b,c$c,c$d,c$g,c$k||c$K.DEF_UV,c$h||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var c$n=this._curSubmit=c$na.create(this,this._ib,c$m,(c$m._byteLength-64)/32*3,c$j,c$i);c$n.blendType=-1==c$l?this._nBlendType:c$l,c$n.scope=c$a,this._submits[this._submits._length++]=c$n,this._curSubmit._numEle+=6}},c$b.mixRGBandAlpha=function(c$a){return this._mixRGBandAlpha(c$a,this._shader2D.ALPHA)},c$b._mixRGBandAlpha=function(c$a,c$b){var c$c=(4278190080&c$a)>>>24;return 0!=c$c?c$c*=c$b:c$c=255*c$b,16777215&c$a|c$c<<24},c$b.drawTriangles=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l){if(!c$a.loaded||!c$a.source)return this.sprite&&c$y.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;c$a.bitmap;var c$m=this._mixRGBandAlpha(4294967295,c$j),c$n=(c$d.length,c$h.length);this._renderKey=-1;var c$o=this._curSubmit=c$Ja.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,c$Aa.create(1,0));return c$o.shaderValue.textureHost=c$a,c$o._renderType=10016,this._submits[this._submits._length++]=c$o,c$i?(c$P._tmpMatrix.a=c$i.a,c$P._tmpMatrix.b=c$i.b,c$P._tmpMatrix.c=c$i.c,c$P._tmpMatrix.d=c$i.d,c$P._tmpMatrix.tx=c$i.tx+c$b,c$P._tmpMatrix.ty=c$i.ty+c$c,c$B.mul(c$P._tmpMatrix,this._curMat,c$P._tmpMatrix)):(c$P._tmpMatrix.a=this._curMat.a,c$P._tmpMatrix.b=this._curMat.b,c$P._tmpMatrix.c=this._curMat.c,c$P._tmpMatrix.d=this._curMat.d,c$P._tmpMatrix.tx=this._curMat.tx+c$b,c$P._tmpMatrix.ty=this._curMat.ty+c$c),this._triangleMesh.addData(c$d,c$g,c$h,c$P._tmpMatrix,c$m,this),this._curSubmit._numEle+=c$n,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},c$b.transform=function(c$a,c$b,c$c,c$d,c$g,c$h){c$Z.save(this),c$B.mul(c$B.TEMP.setTo(c$a,c$b,c$c,c$d,c$g,c$h),this._curMat,this._curMat),this._curMat._checkTransform()},c$b.setTransformByMatrix=function(c$a){c$a.copyTo(this._curMat)},c$b.transformByMatrix=function(c$a){c$Z.save(this),c$B.mul(c$a,this._curMat,this._curMat),this._curMat._checkTransform()},c$b.rotate=function(c$a){c$Z.save(this),this._curMat.rotateEx(c$a)},c$b.scale=function(c$a,c$b){c$Z.save(this),this._curMat.scaleEx(c$a,c$b)},c$b.clipRect=function(c$a,c$b,c$c,c$d){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var c$g=c$ma.create(4);this.addRenderObject(c$g);var c$h=this._vb,c$i=c$h._byteLength>>2;if(c$sa.fillRectImgVb(c$h,null,c$a,c$b,c$c,c$d,c$K.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var c$j=this._curSubmit=c$ha.createSubmit(this,this._ib,c$h,(c$h._byteLength-64)/32*3,c$Aa.create(2,0));c$j.shaderValue.ALPHA=1,this._submits[this._submits._length++]=c$j,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var c$k=c$ma.create(5);this.addRenderObject(c$k);var c$l=c$h.getFloat32Array(),c$m=Math.min(Math.min(Math.min(c$l[0+c$i],c$l[4+c$i]),c$l[8+c$i]),c$l[12+c$i]),c$n=Math.max(Math.max(Math.max(c$l[0+c$i],c$l[4+c$i]),c$l[8+c$i]),c$l[12+c$i]),c$o=Math.min(Math.min(Math.min(c$l[1+c$i],c$l[5+c$i]),c$l[9+c$i]),c$l[13+c$i]),c$p=Math.max(Math.max(Math.max(c$l[1+c$i],c$l[5+c$i]),c$l[9+c$i]),c$l[13+c$i]);c$X.save(this,c$k,c$a,c$b,c$c,c$d,c$m,c$o,c$n-c$m,c$p-c$o),this._curSubmit=c$ha.RENDERBASE}else{c$c*=this._curMat.a,c$d*=this._curMat.d;var c$q=c$C.TEMP;this._curMat.transformPoint(c$q.setTo(c$a,c$b)),c$c<0&&(c$q.x=c$q.x+c$c,c$c=-c$c),c$d<0&&(c$q.y=c$q.y+c$d,c$d=-c$d),this._renderKey=0;var c$r=this._curSubmit=c$la.create(this);(this._submits[this._submits._length++]=c$r).submitIndex=this._submits._length,c$r.submitLength=9999999,c$W.save(this,c$r);var c$s=this._clipRect,c$t=c$s.x,c$u=c$s.y,c$v=c$q.x+c$c,c$w=c$q.y+c$d;c$t<c$q.x&&(c$s.x=c$q.x),c$u<c$q.y&&(c$s.y=c$q.y),c$s.width=Math.min(c$v,c$t+c$s.width)-c$s.x,c$s.height=Math.min(c$w,c$u+c$s.height)-c$s.y,this._shader2D.glTexture=null,c$r.clipRect.copyFrom(c$s),this._curSubmit=c$ha.RENDERBASE}},c$b.setIBVB=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l,c$m){if(void 0===c$k&&(c$k=0),void 0===c$l&&(c$l=0),void 0===c$m&&(c$m=0),null===c$c){if(c$t.isFlash){var c$n=c$d;c$n._selfIB||(c$n._selfIB=c$ea.create(35044)),c$n._selfIB.clear(),c$c=c$n._selfIB}else c$c=this._ib;c$sa.expandIBQuadrangle(c$c,c$d._byteLength/(4*c$d.vertexStride*4))}if(!c$j||!c$i)throw Error("setIBVB must input:shader shaderValues");var c$o=c$ka.create(this,c$d,c$c,c$g,c$i,c$j,c$k,c$l,c$m);c$h||(c$h=c$B.EMPTY),c$h.translate(c$a,c$b),c$B.mul(c$h,this._curMat,c$o._mat),c$h.translate(-c$a,-c$b),this._submits[this._submits._length++]=c$o,this._curSubmit=c$ha.RENDERBASE,this._renderKey=0},c$b.addRenderObject=function(c$a){this._submits[this._submits._length++]=c$a},c$b.fillTrangles=function(c$a,c$b,c$c,c$d,c$g){var c$h=this._curSubmit,c$i=this._vb,c$j=this._shader2D,c$k=c$h.shaderValue,c$l=c$d.length>>4,c$m=c$a.bitmap;this._renderKey=0,c$j.glTexture==c$m&&c$j.ALPHA===c$k.ALPHA||((c$h=this._curSubmit=c$ha.createSubmit(this,this._ib,c$i,c$i._byteLength/32*3,c$Aa.create(1,0))).shaderValue.textureHost=c$a,this._submits[this._submits._length++]=c$h),c$sa.fillTranglesVB(c$i,c$b,c$c,c$d,c$g||this._curMat,this._x,this._y),c$h._numEle+=6*c$l},c$b.submitElement=function(c$a,c$b){var c$c=this._submits;for(c$b<0&&(c$b=c$c._length);c$a<c$b;)c$a+=c$c[c$a].renderSubmit()},c$b.finish=function(){c$wa.mainContext.finish()},c$b.flush=function(){var c$a=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(c$a>this._ib.bufferLength/12&&c$sa.expandIBQuadrangle(this._ib,c$a),!this._isMain&&c$Q.enabled&&c$Q._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=c$Q._atlasRestore;for(var c$b=this._submits,c$c=0,c$d=c$b._length;c$c<c$d;c$c++){var c$g=c$b[c$c];10016===c$g.getRenderType()&&c$g.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),c$ba.instance&&c$ba.getInstance().reset();var c$h;for(c$c=0,c$h=this.meshlist.length;c$c<c$h;c$c++){var c$i=this.meshlist[c$c];c$i.canReuse?c$i.releaseMesh():c$i.destroy()}return this.meshlist.length=0,this._curSubmit=c$ha.RENDERBASE,this._renderKey=0,this._triangleMesh=c$Ka.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},c$b.setPathId=function(c$a){if(this.mId=c$a,-1!=this.mId){this.mHaveKey=!1;var c$b=c$M.getInstance();c$b.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,c$b.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},c$b.movePath=function(c$a,c$b){var c$c=c$a,c$d=c$b;c$a=this._curMat.a*c$c+this._curMat.c*c$d+this._curMat.tx,c$b=this._curMat.b*c$c+this._curMat.d*c$d+this._curMat.ty,this.mX+=c$a,this.mY+=c$b},c$b.beginPath=function(){var c$a=this._getPath();c$a.tempArray.length=0,c$a.closePath=!1,this.mX=0,this.mY=0},c$b.closePath=function(){this._path.closePath=!0},c$b.fill=function(c$a){void 0===c$a&&(c$a=!1);var c$b=this._getPath();this.drawPoly(0,0,c$b.tempArray,this.fillStyle._color.numColor,0,0,c$a)},c$b.stroke=function(){var c$a=this._getPath();if(0<this.lineWidth){if(-1==this.mId)c$a.drawLine(0,0,c$a.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var c$b=c$M.getInstance().shapeLineDic[this.mId];c$b.rebuild(c$a.tempArray),c$a.setGeomtry(c$b)}else c$M.getInstance().addLine(this.mId,c$a.drawLine(0,0,c$a.tempArray,this.lineWidth,this.strokeStyle._color.numColor));c$a.update();var c$c=[this.mX,this.mY],c$d=c$ha.createShape(this,c$a.ib,c$a.vb,c$a.count,c$a.offset,c$Aa.create(4,0));c$d.shaderValue.ALPHA=this._shader2D.ALPHA,c$d.shaderValue.u_pos=c$c,c$d.shaderValue.u_mmat2=c$ua.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=c$d,this._renderKey=-1}},c$b.line=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i=this._curSubmit,c$j=this._vb;if(c$sa.fillLineVb(c$j,this._clipRect,c$a,c$b,c$c,c$d,c$g,c$h)){this._renderKey=0;var c$k=this._shader2D,c$l=c$i.shaderValue;c$k.strokeStyle===c$l.strokeStyle&&c$k.ALPHA===c$l.ALPHA||(c$k.glTexture=null,(c$i=this._curSubmit=c$ha.createSubmit(this,this._ib,c$j,(c$j._byteLength-64)/32*3,c$Aa.create(2,0))).shaderValue.strokeStyle=c$k.strokeStyle,c$i.shaderValue.mainID=2,c$i.shaderValue.ALPHA=c$k.ALPHA,this._submits[this._submits._length++]=c$i),c$i._numEle+=6}},c$b.moveTo=function(c$a,c$b,c$c){void 0===c$c&&(c$c=!0);var c$d=this._getPath();if(c$c){var c$g=c$a,c$h=c$b;c$a=this._curMat.a*c$g+this._curMat.c*c$h,c$b=this._curMat.b*c$g+this._curMat.d*c$h}c$d.addPoint(c$a,c$b)},c$b.lineTo=function(c$a,c$b,c$c){void 0===c$c&&(c$c=!0);var c$d=this._getPath();if(c$c){var c$g=c$a,c$h=c$b;c$a=this._curMat.a*c$g+this._curMat.c*c$h,c$b=this._curMat.b*c$g+this._curMat.d*c$h}c$d.addPoint(c$a,c$b)},c$b.drawCurves=function(c$a,c$b,c$c){this.setPathId(-1),this.beginPath(),this.strokeStyle=c$c[3],this.lineWidth=c$c[4];var c$d=c$c[2];c$a+=c$c[0],c$b+=c$c[1],this.movePath(c$a,c$b),this.moveTo(c$d[0],c$d[1]);for(var c$g=2,c$h=c$d.length;c$g<c$h;)this.quadraticCurveTo(c$d[c$g++],c$d[c$g++],c$d[c$g++],c$d[c$g++]);this.stroke()},c$b.arcTo=function(c$a,c$b,c$c,c$d,c$g){if(-1==this.mId||!this.mHaveKey){var c$h=0,c$i=0,c$j=0,c$k=this._getPath();this._curMat.copyTo(c$P._tmpMatrix),c$P._tmpMatrix.tx=c$P._tmpMatrix.ty=0,c$P._tempPoint.setTo(c$k.getEndPointX(),c$k.getEndPointY()),c$P._tmpMatrix.invertTransformPoint(c$P._tempPoint);var c$l=c$P._tempPoint.x-c$a,c$m=c$P._tempPoint.y-c$b,c$n=Math.sqrt(c$l*c$l+c$m*c$m);if(!(c$n<=1e-6)){var c$o=c$l/c$n,c$p=c$m/c$n,c$q=c$c-c$a,c$r=c$d-c$b,c$s=c$q*c$q+c$r*c$r,c$t=Math.sqrt(c$s);if(!(c$t<=1e-6)){var c$u=c$q/c$t,c$v=c$r/c$t,c$w=c$o+c$u,c$x=c$p+c$v,c$y=Math.sqrt(c$w*c$w+c$x*c$x);if(!(c$y<=1e-6)){var c$z=c$w/c$y,c$A=c$x/c$y,c$B=Math.acos(c$z*c$o+c$A*c$p),c$C=Math.PI/2-c$B,c$D=(c$n=c$g/Math.tan(c$C))*c$o+c$a,c$E=c$n*c$p+c$b,c$F=Math.sqrt(c$n*c$n+c$g*c$g),c$G=c$a+c$z*c$F,c$H=c$b+c$A*c$F,c$I=0,c$J=0;if(0<=c$o*c$v-c$p*c$u){var c$K=2*c$C/c$P.SEGNUM;c$I=Math.sin(c$K),c$J=Math.cos(c$K)}else c$K=2*-c$C/c$P.SEGNUM,c$I=Math.sin(c$K),c$J=Math.cos(c$K);c$i=this._curMat.a*c$D+this._curMat.c*c$E,c$j=this._curMat.b*c$D+this._curMat.d*c$E,c$i==this._path.getEndPointX()&&c$j==this._path.getEndPointY()||c$k.addPoint(c$i,c$j);var c$L=c$D-c$G,c$M=c$E-c$H;for(c$h=0;c$h<c$P.SEGNUM;c$h++){var c$N=c$L*c$J+c$M*c$I,c$O=-c$L*c$I+c$M*c$J;c$i=c$N+c$G,c$j=c$O+c$H,c$a=this._curMat.a*c$i+this._curMat.c*c$j,c$j=c$b=this._curMat.b*c$i+this._curMat.d*c$j,(c$i=c$a)==this._path.getEndPointX()&&c$j==this._path.getEndPointY()||c$k.addPoint(c$i,c$j),c$L=c$N,c$M=c$O}}}}}},c$b.arc=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){if(void 0===c$h&&(c$h=!1),void 0===c$i&&(c$i=!0),-1!=this.mId){var c$j=c$M.getInstance().shapeDic[this.mId];if(c$j&&this.mHaveKey&&!c$j.needUpdate(this._curMat))return;c$b=c$a=0}var c$k,c$l=0,c$m=0,c$n=0,c$o=0,c$p=0,c$q=0,c$r=0;if(c$m=c$g-c$d,c$h)if(Math.abs(c$m)>=2*Math.PI)c$m=2*-Math.PI;else for(;0<c$m;)c$m-=2*Math.PI;else if(Math.abs(c$m)>=2*Math.PI)c$m=2*Math.PI;else for(;c$m<0;)c$m+=2*Math.PI;c$k=c$m/(c$r=c$c<101?Math.max(10,c$m*c$c/5):c$c<201?Math.max(10,c$m*c$c/20):Math.max(10,c$m*c$c/40))/2,c$n=Math.abs(4/3*(1-Math.cos(c$k))/Math.sin(c$k)),c$h&&(c$n=-c$n);var c$s=this._getPath(),c$t=NaN,c$u=NaN;for(c$q=0;c$q<=c$r;c$q++)c$l=c$d+c$m*(c$q/c$r),c$o=c$a+Math.cos(c$l)*c$c,c$p=c$b+Math.sin(c$l)*c$c,c$i&&(c$t=c$o,c$u=c$p,c$o=this._curMat.a*c$t+this._curMat.c*c$u,c$p=this._curMat.b*c$t+this._curMat.d*c$u),c$o==this._path.getEndPointX()&&c$p==this._path.getEndPointY()||c$s.addPoint(c$o,c$p);c$o=c$a+Math.cos(c$g)*c$c,c$p=c$b+Math.sin(c$g)*c$c,c$i&&(c$t=c$o,c$u=c$p,c$o=this._curMat.a*c$t+this._curMat.c*c$u,c$p=this._curMat.b*c$t+this._curMat.d*c$u),c$o==this._path.getEndPointX()&&c$p==this._path.getEndPointY()||c$s.addPoint(c$o,c$p)},c$b.quadraticCurveTo=function(c$a,c$b,c$c,c$d){var c$g=c$n.I,c$h=c$c,c$i=c$d;c$c=this._curMat.a*c$h+this._curMat.c*c$i,c$d=this._curMat.b*c$h+this._curMat.d*c$i,c$h=c$a,c$i=c$b,c$a=this._curMat.a*c$h+this._curMat.c*c$i,c$b=this._curMat.b*c$h+this._curMat.d*c$i;for(var c$j=c$g.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),c$a,c$b,c$c,c$d],30,2),c$k=0,c$l=c$j.length/2;c$k<c$l;c$k++)this.lineTo(c$j[2*c$k],c$j[2*c$k+1],!1);this.lineTo(c$c,c$d,!1)},c$b.rect=function(c$a,c$b,c$c,c$d){this._other=this._other.make(),this._other.path||(this._other.path=new c$U),this._other.path.rect(c$a,c$b,c$c,c$d)},c$b.strokeRect=function(c$a,c$b,c$c,c$d,c$g){var c$h=.5*c$g;this.line(c$a-c$h,c$b,c$a+c$c+c$h,c$b,c$g,this._curMat),this.line(c$a+c$c,c$b,c$a+c$c,c$b+c$d,c$g,this._curMat),this.line(c$a,c$b,c$a,c$b+c$d,c$g,this._curMat),this.line(c$a-c$h,c$b+c$d,c$a+c$c+c$h,c$b+c$d,c$g,this._curMat)},c$b.clip=function(){},c$b.drawPoly=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){void 0===c$i&&(c$i=!1),this._renderKey=0,this._shader2D.glTexture=null;var c$j=this._getPath();if(-1==this.mId)c$j.polygon(c$a,c$b,c$c,c$d,c$g||1,c$h);else if(this.mHaveKey){var c$k=c$M.getInstance().shapeDic[this.mId];c$k.setMatrix(this._curMat),c$k.rebuild(c$j.tempArray),c$j.setGeomtry(c$k)}else{var c$l=c$j.polygon(c$a,c$b,c$c,c$d,c$g||1,c$h);c$M.getInstance().addShape(this.mId,c$l),c$l.setMatrix(this._curMat)}c$j.update();var c$m,c$n=[this.mX,this.mY];if((c$m=c$ha.createShape(this,c$j.ib,c$j.vb,c$j.count,c$j.offset,c$Aa.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,c$m.shaderValue.u_pos=c$n,c$m.shaderValue.u_mmat2=c$ua.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=c$m,0<c$g){if(this.mHaveLineKey){var c$o=c$M.getInstance().shapeLineDic[this.mId];c$o.rebuild(c$j.tempArray),c$j.setGeomtry(c$o)}else c$M.getInstance().addShape(this.mId,c$j.drawLine(c$a,c$b,c$c,c$g,c$h));c$j.update(),(c$m=c$ha.createShape(this,c$j.ib,c$j.vb,c$j.count,c$j.offset,c$Aa.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,c$m.shaderValue.u_mmat2=c$ua.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=c$m}},c$b.drawParticle=function(c$a,c$b,c$c){c$c.x=c$a,c$c.y=c$b,this._submits[this._submits._length++]=c$c},c$b._getPath=function(){return this._path||(this._path=new c$U)},c$d(0,c$b,"globalCompositeOperation",function(){return c$S.NAMES[this._nBlendType]},function(c$a){var c$b=c$S.TOINT[c$a];null==c$b||this._nBlendType===c$b||(c$V.save(this,65536,this,!0),this._curSubmit=c$ha.RENDERBASE,this._renderKey=0,this._nBlendType=c$b)}),c$d(0,c$b,"strokeStyle",function(){return this._shader2D.strokeStyle},function(c$a){this._shader2D.strokeStyle.equal(c$a)||(c$V.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=c$T.create(c$a))}),c$d(0,c$b,"globalAlpha",function(){return this._shader2D.ALPHA},function(c$a){(c$a=Math.floor(1e3*c$a)/1e3)!=this._shader2D.ALPHA&&(c$V.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=c$a)}),c$d(0,c$b,"asBitmap",null,function(c$a){if(c$a){if(this._targets||(this._targets=new c$_),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),c$d(0,c$b,"fillStyle",function(){return this._shader2D.fillStyle},function(c$a){this._shader2D.fillStyle.equal(c$a)||(c$V.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=c$T.create(c$a))}),c$d(0,c$b,"textAlign",function(){return this._other.textAlign},function(c$a){this._other.textAlign===c$a||(this._other=this._other.make(),c$V.save(this,32768,this._other,!1),this._other.textAlign=c$a)}),c$d(0,c$b,"lineWidth",function(){return this._other.lineWidth},function(c$a){this._other.lineWidth===c$a||(this._other=this._other.make(),c$V.save(this,256,this._other,!1),this._other.lineWidth=c$a)}),c$d(0,c$b,"textBaseline",function(){return this._other.textBaseline},function(c$a){this._other.textBaseline===c$a||(this._other=this._other.make(),c$V.save(this,16384,this._other,!1),this._other.textBaseline=c$a)}),c$d(0,c$b,"font",null,function(c$a){c$a!=this._other.font.toString()&&(this._other=this._other.make(),c$V.save(this,8,this._other,!1),this._other.font===c$qa.EMPTY?this._other.font=new c$qa(c$a):this._other.font.setFont(c$a))}),c$P.__init__=function(){c$c.DEFAULT=new c$c},c$P._tempPoint=new c$C,c$P._SUBMITVBSIZE=32e3,c$P._MAXSIZE=99999999,c$P._RECTVBSIZE=16,c$P.MAXCLIPRECT=new c$D(0,0,99999999,99999999),c$P._COUNT=0,c$P._tmpMatrix=new c$B,c$P.SEGNUM=32,c$P._contextcount=0,c$i(c$P,["_fontTemp",function(){return this._fontTemp=new c$qa},"_drawStyleTemp",function(){return this._drawStyleTemp=new c$T(null)}]),c$P.__init$=function(){c$c=function(){function c$a(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=c$qa.EMPTY}c$o(c$a,"");var c$b=c$a.prototype;return c$b.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=c$qa.EMPTY},c$b.make=function(){return this===c$a.DEFAULT?new c$a:this},c$a.DEFAULT=null,c$a}()},c$P}(),c$Aa=function(c$a){function c$d(c$a,c$b){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,c$d.__super.call(this),this.defines=new c$Ea,this.position=c$d._POSITION,this.mainID=c$a,this.subID=c$b,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=c$a|c$b,this._inClassCache=c$d._cache[this._cacheID],0<c$a&&!this._inClassCache&&(this._inClassCache=c$d._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}c$o(c$d,"laya.webgl.shader.d2.value.Value2D",c$O);var c$b=c$d.prototype;return c$b.setValue=function(c$a){},c$b.refresh=function(){var c$a=this.size;return c$a[0]=c$ua.width,c$a[1]=c$ua.height,this.alpha=this.ALPHA*c$ua.worldAlpha,this.mmat=c$ua.worldMatrix4,this},c$b._ShaderWithCompile=function(){return c$Ya.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,c$_a.create)},c$b._withWorldShaderDefines=function(){var c$a=c$ua.worldShaderDefines,c$b=c$Ya.sharders[this.mainID|this.defines._value|c$a.getValue()];if(!c$b){var c$c,c$d={};for(c$c in this.defines.toNameDic())c$d[c$c]="";for(c$c in c$a.toNameDic())c$d[c$c]="";c$b=c$Ya.withCompile2D(0,this.mainID,c$d,this.mainID|this.defines._value|c$a.getValue(),c$_a.create)}var c$g=c$ua.worldFilters;if(!c$g)return c$b;for(var c$h,c$i=c$g.length,c$j=0;c$j<c$i;c$j++)(c$h=c$g[c$j])&&c$h.action.setValue(this);return c$b},c$b.upload=function(){var c$a=c$ua;this.alpha=this.ALPHA*c$a.worldAlpha,c$ua.worldMatrix4!==c$ua.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),c$wa.shaderHighPrecision&&this.defines.add(1024);var c$b,c$c=c$a.worldShaderDefines?this._withWorldShaderDefines():c$Ya.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=c$a.width,this.size[1]=c$a.height,this.mmat=c$a.worldMatrix4,c$La.activeShader!==c$c?c$c._shaderValueWidth!==c$a.width||c$c._shaderValueHeight!==c$a.height?(c$c._shaderValueWidth=c$a.width,c$c._shaderValueHeight=c$a.height):c$b=c$c._params2dQuick2||c$c._make2dQuick2():c$c._shaderValueWidth!==c$a.width||c$c._shaderValueHeight!==c$a.height?(c$c._shaderValueWidth=c$a.width,c$c._shaderValueHeight=c$a.height):c$b=c$c._params2dQuick1||c$c._make2dQuick1(),c$c.upload(this,c$b)},c$b.setFilters=function(c$a){if(this.filters=c$a)for(var c$b,c$c=c$a.length,c$d=0;c$d<c$c;c$d++)(c$b=c$a[c$d])&&(this.defines.add(c$b.type),c$b.action.setValue(this))},c$b.clear=function(){this.defines.setValue(this.subID)},c$b.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},c$d._initone=function(c$a,c$b){c$d._typeClass[c$a]=c$b,c$d._cache[c$a]=[],c$d._cache[c$a]._length=0},c$d.__init__=function(){c$d._POSITION=[2,5126,!1,4*c$ra.BYTES_PE,0],c$d._TEXCOORD=[2,5126,!1,4*c$ra.BYTES_PE,2*c$ra.BYTES_PE],c$d._initone(2,c$Pa),c$d._initone(4,c$Sa),c$d._initone(256,c$Qa),c$d._initone(512,c$Oa),c$d._initone(1,c$Ra),c$d._initone(65,c$$a),c$d._initone(9,c$Ra)},c$d.create=function(c$a,c$b){var c$c=c$d._cache[c$a|c$b];return c$c._length?c$c[--c$c._length]:new c$d._typeClass[c$a|c$b](c$b)},c$d._POSITION=null,c$d._TEXCOORD=null,c$d._cache=[],c$d._typeClass=[],c$d.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],c$d}(),c$Ba=function(c$a){function c$s(c$a,c$b){c$s.__super.call(this,c$a,c$b)}c$o(c$s,"laya.webgl.utils.RenderSprite3D",c$u);var c$b=c$s.prototype;return c$b.onCreate=function(c$a){switch(c$a){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},c$b._mask=function(c$a,c$b,c$c,c$d){var c$g,c$h,c$i=this._next,c$j=c$a.mask;if(c$j){c$b.ctx.save();var c$k=c$b.ctx.globalCompositeOperation,c$l=new c$D;if(c$l.copyFrom(c$j.getBounds()),c$l.width=Math.round(c$l.width),c$l.height=Math.round(c$l.height),c$l.x=Math.round(c$l.x),c$l.y=Math.round(c$l.y),0<c$l.width&&0<c$l.height){var c$m=c$a._style._tf,c$n=c$ja.create();c$n.addValue("bounds",c$l),c$g=c$ia.create([c$n,c$b],laya.webgl.utils.RenderSprite3D.tmpTarget),c$b.addRenderObject(c$g),c$j.render(c$b,-c$l.x,-c$l.y),c$g=c$ia.create([c$n],laya.webgl.utils.RenderSprite3D.endTmpTarget),c$b.addRenderObject(c$g),c$b.ctx.save(),c$b.clipRect(c$c-c$m.translateX+c$l.x,c$d-c$m.translateY+c$l.y,c$l.width,c$l.height),c$i._fun.call(c$i,c$a,c$b,c$c,c$d),c$b.ctx.restore(),c$h=c$ma.create(6),c$k=c$b.ctx.globalCompositeOperation,c$h.blendMode="mask",c$b.addRenderObject(c$h),c$B.TEMP.identity();var c$o=c$Aa.create(1,0),c$p=c$K.INV_UV,c$q=c$l.width,c$r=c$l.height;(c$l.width<32||c$l.height<32)&&((c$p=c$s.tempUV)[0]=0,c$p[1]=0,c$p[2]=32<=c$l.width?1:c$l.width/32,c$p[3]=0,c$p[4]=32<=c$l.width?1:c$l.width/32,c$p[5]=32<=c$l.height?1:c$l.height/32,c$p[6]=0,c$p[7]=32<=c$l.height?1:c$l.height/32,c$l.width=32<=c$l.width?c$l.width:32,c$l.height=32<=c$l.height?c$l.height:32,c$p[1]*=-1,c$p[3]*=-1,c$p[5]*=-1,c$p[7]*=-1,c$p[1]+=1,c$p[3]+=1,c$p[5]+=1,c$p[7]+=1),c$b.ctx.drawTarget(c$n,c$c+c$l.x-c$m.translateX,c$d+c$l.y-c$m.translateY,c$q,c$r,c$B.TEMP,"tmpTarget",c$o,c$p,6),c$g=c$ia.create([c$n],laya.webgl.utils.RenderSprite3D.recycleTarget),c$b.addRenderObject(c$g),(c$h=c$ma.create(6)).blendMode=c$k,c$b.addRenderObject(c$h)}c$b.ctx.restore()}else c$i._fun.call(c$i,c$a,c$b,c$c,c$d)},c$b._blend=function(c$a,c$b,c$c,c$d){var c$g=c$a._style,c$h=this._next;c$g.blendMode?(c$b.ctx.save(),c$b.ctx.globalCompositeOperation=c$g.blendMode,c$h._fun.call(c$h,c$a,c$b,c$c,c$d),c$b.ctx.restore()):c$h._fun.call(c$h,c$a,c$b,c$c,c$d)},c$b._transform=function(c$a,c$b,c$c,c$d){var c$g=c$a.transform,c$h=this._next;if(c$g&&c$h!=c$u.NORENDER){var c$i=c$b.ctx;c$a._style;c$g.tx=c$c,c$g.ty=c$d;var c$j=c$i._getTransformMatrix(),c$k=c$j.clone();c$B.mul(c$g,c$j,c$j),c$j._checkTransform(),c$g.tx=c$g.ty=0,c$h._fun.call(c$h,c$a,c$b,0,0),c$k.copyTo(c$j),c$k.destroy()}else c$h._fun.call(c$h,c$a,c$b,c$c,c$d)},c$s.tmpTarget=function(c$a,c$b){var c$c=c$a.getValue("bounds"),c$d=c$Ma.create(c$c.width,c$c.height);c$d.start(),c$d.clear(0,0,0,0),c$a.addValue("tmpTarget",c$d)},c$s.endTmpTarget=function(c$a){c$a.getValue("tmpTarget").end()},c$s.recycleTarget=function(c$a){c$a.getValue("tmpTarget").recycle(),c$a.recycle()},c$i(c$s,["tempUV",function(){return this.tempUV=new Array(8)}]),c$s}(),c$Ca=function(c$a){function c$b(){this.data=null,c$b.__super.call(this)}c$o(c$b,"laya.filters.webgl.ColorFilterActionGL",c$N);var c$c=c$b.prototype;return c$y.imps(c$c,{"laya.filters.IFilterActionGL":!0}),c$c.setValue=function(c$a){c$a.colorMat=this.data._mat,c$a.colorAlpha=this.data._alpha},c$c.apply3d=function(c$a,c$b,c$c,c$d,c$g){var c$h=c$a.getValue("bounds"),c$i=c$Aa.create(1,0);c$i.setFilters([this.data]);var c$j=c$B.TEMP;c$j.identity(),c$c.ctx.drawTarget(c$a,0,0,c$h.width,c$h.height,c$j,"src",c$i)},c$b}(),c$Da=function(c$a){function c$h(c$a,c$b,c$c,c$d,c$g){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,c$h.__super.call(this,c$a,c$b,c$g),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new c$Ta,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=c$c,this._atlasCanvas.height=c$d,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}c$o(c$h,"laya.webgl.atlas.Atlaser",c$P);var c$b=c$h.prototype;return c$b.computeUVinAtlasTexture=function(c$a,c$b,c$c,c$d){var c$g=c$Q.atlasTextureWidth,c$h=c$Q.atlasTextureHeight,c$i=c$c/c$g,c$j=c$d/c$h,c$k=(c$c+c$a.bitmap.width)/c$g,c$l=(c$d+c$a.bitmap.height)/c$h,c$m=c$a.bitmap.width/c$g,c$n=c$a.bitmap.height/c$h;c$a.uv=[c$i+c$b[0]*c$m,c$j+c$b[1]*c$n,c$k-(1-c$b[2])*c$m,c$j+c$b[3]*c$n,c$k-(1-c$b[4])*c$m,c$l-(1-c$b[5])*c$n,c$i+c$b[6]*c$m,c$l-(1-c$b[7])*c$n]},c$b.findBitmapIsExist=function(c$a){if(c$a instanceof laya.webgl.resource.WebGLImage){var c$b=c$a,c$c=c$b.url,c$d=this._InAtlasWebGLImagesKey[c$c||c$b.id];if(c$d)return c$d.offsetInfoID}return-1},c$b.addToAtlasTexture=function(c$a,c$b,c$c){if(c$a instanceof laya.webgl.resource.WebGLImage){var c$d=c$a,c$g=c$d.url;this._InAtlasWebGLImagesKey[c$g||c$d.id]={bitmap:c$a,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([c$b,c$c])}this._atlasCanvas.texSubImage2D(c$b,c$c,c$a.atlasSource),c$a.clearAtlasSource()},c$b.addToAtlas=function(c$a,c$b,c$c){c$a._atlasID=this._inAtlasTextureKey.length;var c$d=c$a.uv.slice(),c$g=c$a.bitmap;this._inAtlasTextureKey.push(c$a),this._inAtlasTextureOriUVValue.push(c$d),this._inAtlasTextureBitmapValue.push(c$g),this.computeUVinAtlasTexture(c$a,c$d,c$b,c$c),c$a.bitmap=this._atlasCanvas},c$b.clear=function(){for(var c$a=0,c$b=this._inAtlasTextureKey.length;c$a<c$b;c$a++)this._inAtlasTextureKey[c$a].bitmap=this._inAtlasTextureBitmapValue[c$a],this._inAtlasTextureKey[c$a].uv=this._inAtlasTextureOriUVValue[c$a],this._inAtlasTextureKey[c$a]._atlasID=-1,this._inAtlasTextureKey[c$a].bitmap.lock=!1,this._inAtlasTextureKey[c$a].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},c$b.dispose=function(){this.clear(),this._atlasCanvas.destroy()},c$d(0,c$b,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),c$d(0,c$b,"texture",function(){return this._atlasCanvas}),c$d(0,c$b,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),c$h}(),c$Ea=function(c$a){function c$c(){c$c.__super.call(this,c$c.__name2int,c$c.__int2name,c$c.__int2nameMap)}return c$o(c$c,"laya.webgl.shader.d2.ShaderDefines2D",c$f),c$c.__init__=function(){c$c.reg("TEXTURE2D",1),c$c.reg("COLOR2D",2),c$c.reg("PRIMITIVE",4),c$c.reg("GLOW_FILTER",8),c$c.reg("BLUR_FILTER",16),c$c.reg("COLOR_FILTER",32),c$c.reg("COLOR_ADD",64),c$c.reg("WORLDMAT",128),c$c.reg("FILLTEXTURE",256),c$c.reg("FSHIGHPRECISION",1024),c$c.reg("TXTALPHA",2048),c$c.reg("TXTCOMPRESS",4096)},c$c.reg=function(c$a,c$b){c$f._reg(c$a,c$b,c$c.__name2int,c$c.__int2name)},c$c.toText=function(c$a,c$b,c$c){return c$f._toText(c$a,c$b,c$c)},c$c.toInt=function(c$a){return c$f._toInt(c$a,c$c.__name2int)},c$c.TEXTURE2D=1,c$c.COLOR2D=2,c$c.PRIMITIVE=4,c$c.FILTERGLOW=8,c$c.FILTERBLUR=16,c$c.FILTERCOLOR=32,c$c.COLORADD=64,c$c.WORLDMAT=128,c$c.FILLTEXTURE=256,c$c.SKINMESH=512,c$c.SHADERDEFINE_FSHIGHPRECISION=1024,c$c.TXTALPHA=2048,c$c.TXTCOMPRESS=4096,c$c.__name2int={},c$c.__int2name=[],c$c.__int2nameMap=[],c$c}(),c$Fa=(function(c$a){function c$j(c$a,c$b,c$c,c$d,c$g,c$h,c$i){c$j.__super.call(this,c$a,c$b,c$c,c$d,40,c$g,c$h,c$i)}c$o(c$j,"laya.webgl.shapes.Ellipse",c$ca)}(),function(c$a){function c$h(c$a,c$b,c$c,c$d,c$g){this._points=[],this.rebuild(c$c),c$h.__super.call(this,c$a,c$b,0,0,0,c$g,c$d,c$g,0)}c$o(c$h,"laya.webgl.shapes.Line",c$ca);var c$b=c$h.prototype;return c$b.rebuild=function(c$a){var c$b=c$a.length;c$b!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(c$b/2-1)),this.mFloat32Array=new Float32Array(5*c$b)),this._points.length=0;for(var c$c=NaN,c$d=NaN,c$g=-1,c$h=-1,c$i=c$a.length/2,c$j=0;c$j<c$i;c$j++)c$c=c$a[2*c$j],c$d=c$a[2*c$j+1],(.01<Math.abs(c$g-c$c)||.01<Math.abs(c$h-c$d))&&this._points.push(c$c,c$d),c$g=c$c,c$h=c$d},c$b.getData=function(c$a,c$b,c$c){var c$d=[],c$g=[];0<this.borderWidth&&this.createLine2(this._points,c$d,this.borderWidth,c$c,c$g,this._points.length/2),this.mUint16Array.set(c$d,0),this.mFloat32Array.set(c$g,0),c$a.append(this.mUint16Array),c$b.append(this.mFloat32Array)},c$h}()),c$Ga=function(c$a){function c$n(c$a,c$b,c$c,c$d,c$g){this._points=[];for(var c$h=NaN,c$i=NaN,c$j=-1,c$k=-1,c$l=c$c.length/2-1,c$m=0;c$m<c$l;c$m++)c$h=c$c[2*c$m],c$i=c$c[2*c$m+1],(.01<Math.abs(c$j-c$h)||.01<Math.abs(c$k-c$i))&&this._points.push(c$h,c$i),c$j=c$h,c$k=c$i;c$h=c$c[2*c$l],c$i=c$c[2*c$l+1],c$j=this._points[0],c$k=this._points[1],(.01<Math.abs(c$j-c$h)||.01<Math.abs(c$k-c$i))&&this._points.push(c$h,c$i),c$n.__super.call(this,c$a,c$b,0,0,this._points.length/2,0,c$d,c$g)}c$o(c$n,"laya.webgl.shapes.LoopLine",c$ca);var c$b=c$n.prototype;return c$b.getData=function(c$a,c$b,c$c){if(0<this.borderWidth){for(var c$d=this.color,c$g=(c$d>>16&255)/255,c$h=(c$d>>8&255)/255,c$i=(255&c$d)/255,c$j=[],c$k=0,c$l=0,c$m=[],c$n=Math.floor(this._points.length/2),c$o=0;c$o<c$n;c$o++)c$k=this._points[2*c$o],c$l=this._points[2*c$o+1],c$j.push(this.x+c$k,this.y+c$l,c$g,c$h,c$i);this.createLoopLine(c$j,c$m,this.borderWidth,c$c+c$j.length/5),c$a.append(new Uint16Array(c$m)),c$b.append(new Float32Array(c$j))}},c$b.createLoopLine=function(c$a,c$b,c$c,c$d,c$g,c$h){c$a.length;var c$i=c$a.concat(),c$j=c$g||c$a,c$k=this.borderColor,c$l=(c$k>>16&255)/255,c$m=(c$k>>8&255)/255,c$n=(255&c$k)/255,c$o=[c$i[0],c$i[1]],c$p=[c$i[c$i.length-5],c$i[c$i.length-4]],c$q=c$p[0]+.5*(c$o[0]-c$p[0]),c$r=c$p[1]+.5*(c$o[1]-c$p[1]);c$i.unshift(c$q,c$r,0,0,0),c$i.push(c$q,c$r,0,0,0);var c$s,c$t,c$u,c$v,c$w,c$x,c$y,c$z,c$A,c$B,c$C,c$D,c$E,c$F,c$G,c$H,c$I,c$J,c$K,c$L,c$M=c$i.length/5,c$N=c$d,c$O=c$c/2;c$u=c$i[0],c$v=c$i[1],c$B=c$u-(c$w=c$i[5]),c$A=(c$A=-(c$v-(c$x=c$i[6])))/(c$L=Math.sqrt(c$A*c$A+c$B*c$B))*c$O,c$B=c$B/c$L*c$O,c$j.push(c$u-c$A,c$v-c$B,c$l,c$m,c$n,c$u+c$A,c$v+c$B,c$l,c$m,c$n);for(var c$P=1;c$P<c$M-1;c$P++)c$u=c$i[5*(c$P-1)],c$v=c$i[5*(c$P-1)+1],c$w=c$i[5*c$P],c$x=c$i[5*c$P+1],c$y=c$i[5*(c$P+1)],c$z=c$i[5*(c$P+1)+1],c$B=c$u-c$w,c$D=c$w-c$y,c$G=(-(c$A=(c$A=-(c$v-c$x))/(c$L=Math.sqrt(c$A*c$A+c$B*c$B))*c$O)+c$u)*(-(c$B=c$B/c$L*c$O)+c$x)-(-c$A+c$w)*(-c$B+c$v),c$J=(-(c$C=(c$C=-(c$x-c$z))/(c$L=Math.sqrt(c$C*c$C+c$D*c$D))*c$O)+c$y)*(-(c$D=c$D/c$L*c$O)+c$x)-(-c$C+c$w)*(-c$D+c$z),c$K=(c$E=-c$B+c$v-(-c$B+c$x))*(c$I=-c$C+c$w-(-c$C+c$y))-(c$H=-c$D+c$z-(-c$D+c$x))*(c$F=-c$A+c$w-(-c$A+c$u)),Math.abs(c$K)<.1?(c$K+=10.1,c$j.push(c$w-c$A,c$x-c$B,c$l,c$m,c$n,c$w+c$A,c$x+c$B,c$l,c$m,c$n)):(((c$s=(c$F*c$J-c$I*c$G)/c$K)-c$w)*(c$s-c$w)+((c$t=(c$H*c$G-c$E*c$J)/c$K)-c$x)+(c$t-c$x),c$j.push(c$s,c$t,c$l,c$m,c$n,c$w-(c$s-c$w),c$x-(c$t-c$x),c$l,c$m,c$n));c$h&&(c$b=c$h);var c$Q=this.edges+1;for(c$P=1;c$P<c$Q;c$P++)c$b.push(c$N+2*(c$P-1),c$N+2*(c$P-1)+1,c$N+2*c$P+1,c$N+2*c$P+1,c$N+2*c$P,c$N+2*(c$P-1));return c$b.push(c$N+2*(c$P-1),c$N+2*(c$P-1)+1,c$N+1,c$N+1,c$N,c$N+2*(c$P-1)),c$j},c$n}(),c$Ha=function(c$a){function c$i(c$a,c$b,c$c,c$d,c$g,c$h){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=c$B.create(),this._points=c$c.slice(0,c$c.length),c$i.__super.call(this,c$a,c$b,0,0,this._points.length/2,c$d,c$g,c$h)}c$o(c$i,"laya.webgl.shapes.Polygon",c$ca);var c$b=c$i.prototype;return c$b.rebuild=function(c$a){this._repaint||(this._points.length=0,this._points=this._points.concat(c$a))},c$b.setMatrix=function(c$a){c$a.copyTo(this._mat)},c$b.needUpdate=function(c$a){return this._repaint=this._mat.a==c$a.a&&this._mat.b==c$a.b&&this._mat.c==c$a.c&&this._mat.d==c$a.d&&this._mat.tx==c$a.tx&&this._mat.ty==c$a.ty,!this._repaint},c$b.getData=function(c$a,c$b,c$c){var c$d,c$g=0,c$h=this._points,c$i=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=c$c){for(this._start=c$c,c$d=[],c$i=this.earcutTriangles.length,c$g=0;c$g<c$i;c$g++)c$d.push(this.earcutTriangles[c$g]+c$c);this.mUint16Array=new Uint16Array(c$d)}}else{this._start=c$c,c$d=[];var c$j=[],c$k=[],c$l=this.color,c$m=(c$l>>16&255)/255,c$n=(c$l>>8&255)/255,c$o=(255&c$l)/255;for(c$i=Math.floor(c$h.length/2),c$g=0;c$g<c$i;c$g++)c$j.push(this.x+c$h[2*c$g],this.y+c$h[2*c$g+1],c$m,c$n,c$o),c$k.push(this.x+c$h[2*c$g],this.y+c$h[2*c$g+1]);for(this.earcutTriangles=c$da.earcut(c$k,null,2),c$i=this.earcutTriangles.length,c$g=0;c$g<c$i;c$g++)c$d.push(this.earcutTriangles[c$g]+c$c);this.mUint16Array=new Uint16Array(c$d),this.mFloat32Array=new Float32Array(c$j)}c$a.append(this.mUint16Array),c$b.append(this.mFloat32Array)},c$i}(),c$Ia=function(c$a){function c$h(){this._matrix=new c$B,this._matrix4=c$ra.defaultMatrix4.concat(),c$h.__super.call(this,1e4),this.shaderValue=new c$Aa(0,0)}c$o(c$h,"laya.webgl.submit.SubmitCanvas",c$ha);var c$b=c$h.prototype;return c$b.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var c$a=c$ua.worldAlpha,c$b=c$ua.worldMatrix4,c$c=c$ua.worldMatrix,c$d=c$ua.worldFilters,c$g=c$ua.worldShaderDefines,c$h=this.shaderValue,c$i=this._matrix,c$j=this._matrix4,c$k=c$B.TEMP;return c$B.mul(c$i,c$c,c$k),c$j[0]=c$k.a,c$j[1]=c$k.b,c$j[4]=c$k.c,c$j[5]=c$k.d,c$j[12]=c$k.tx,c$j[13]=c$k.ty,c$ua.worldMatrix=c$k.clone(),c$ua.worldMatrix4=c$j,c$ua.worldAlpha=c$ua.worldAlpha*c$h.alpha,c$h.filters&&c$h.filters.length&&(c$ua.worldFilters=c$h.filters,c$ua.worldShaderDefines=c$h.defines),this._ctx_src.flush(),c$ua.worldAlpha=c$a,c$ua.worldMatrix4=c$b,c$ua.worldMatrix.destroy(),c$ua.worldMatrix=c$c,c$ua.worldFilters=c$d,c$ua.worldShaderDefines=c$g,1},c$b.releaseRender=function(){var c$a=c$h._cache;this._ctx_src=null,c$a[c$a._length++]=this},c$b.getRenderType=function(){return 10003},c$h.create=function(c$a,c$b,c$c){var c$d=c$h._cache._length?c$h._cache[--c$h._cache._length]:new c$h;c$d._ctx_src=c$a;var c$g=c$d.shaderValue;return c$g.alpha=c$b,c$g.defines.setValue(0),c$c&&c$c.length&&c$g.setFilters(c$c),c$d},c$h._cache=((c$h._cache=[])._length=0,c$h._cache),c$h}(),c$Ja=function(c$a){function c$l(c$a){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===c$a&&(c$a=1e4),c$l.__super.call(this,c$a)}c$o(c$l,"laya.webgl.submit.SubmitTexture",c$ha);var c$b=c$l.prototype;return c$b.releaseRender=function(){var c$a=c$l._cache;(c$a[c$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},c$b.addTexture=function(c$a,c$b){this._texsID[this._texs.length]=c$a._uvID,this._texs.push(c$a),this._vbPos.push(c$b)},c$b.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var c$a=this.shaderValue.textureHost.bitmap;if(null!==c$a)for(var c$b=this._vb.getFloat32Array(),c$c=0,c$d=this._texs.length;c$c<c$d;c$c++){var c$g=this._texs[c$c];c$g.active();var c$h=c$g.uv;if(this._texsID[c$c]!==c$g._uvID){this._texsID[c$c]=c$g._uvID;var c$i=this._vbPos[c$c];c$b[c$i+2]=c$h[0],c$b[c$i+3]=c$h[1],c$b[c$i+6]=c$h[2],c$b[c$i+7]=c$h[3],c$b[c$i+10]=c$h[4],c$b[c$i+11]=c$h[5],c$b[c$i+14]=c$h[6],c$b[c$i+15]=c$h[7],this._vb.setNeedUpload()}c$g.bitmap!==c$a&&(this._isSameTexture=!1)}}},c$b.renderSubmit=function(){if(0===this._numEle)return c$l._shaderSet=!1,1;var c$a=this.shaderValue.textureHost;if(c$a){var c$b=c$a.source;if(!c$a.bitmap||!c$b)return c$l._shaderSet=!1,1;this.shaderValue.texture=c$b,c$a.alphaTexture&&c$a.alphaTexture.source&&(this.shaderValue.texture1=c$a.alphaTexture.source)}this._vb.bind_upload(this._ib);var c$c=c$wa.mainContext;if(c$S.activeBlendFunction!==this._blendFn&&(c$c.enable(3042),this._blendFn(c$c),c$S.activeBlendFunction=this._blendFn),c$G.drawCall++,c$G.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&c$La.activeShader&&c$l._shaderSet?(c$La.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&c$La.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),c$l._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var c$d=c$a.bitmap,c$g=0,c$h=c$La.activeShader,c$i=0,c$j=this._texs.length;c$i<c$j;c$i++){var c$k=this._texs[c$i];c$k.bitmap===c$d&&c$i+1!==c$j||(c$h.uploadTexture2D(c$k.source),c$c.drawElements(4,6*(c$i-c$g+1),5123,this._startIdx+6*c$g*c$ra.BYTES_PIDX),c$d=c$k.bitmap,c$g=c$i)}else c$c.drawElements(4,this._numEle,5123,this._startIdx);return 1},c$l.create=function(c$a,c$b,c$c,c$d,c$g){var c$h=c$l._cache._length?c$l._cache[--c$l._cache._length]:new c$l;null==c$c&&((c$c=c$h._selfVb||(c$h._selfVb=c$fa.create(-1))).clear(),c$d=0),c$h._ib=c$b,c$h._vb=c$c,c$h._startIdx=c$d*c$ra.BYTES_PIDX,c$h._numEle=0;var c$i=c$a._nBlendType;c$h._blendFn=c$a._targets?c$S.targetFns[c$i]:c$S.fns[c$i],c$h.shaderValue=c$g,c$h.shaderValue.setValue(c$a._shader2D);var c$j=c$a._shader2D.filters;return c$j&&c$h.shaderValue.setFilters(c$j),c$h},c$l._cache=((c$l._cache=[])._length=0,c$l._cache),c$l._shaderSet=!0,c$l}(),c$Ka=function(c$a){function c$t(){c$t.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}c$o(c$t,"laya.webgl.utils.MeshTexture",c$ta);var c$b=c$t.prototype;return c$b.addData=function(c$a,c$b,c$c,c$d,c$g,c$h){for(var c$i=c$a.length/2,c$j=this._vb.needSize(c$i*c$t.const_stride)>>2,c$k=this._vb.getFloat32Array(),c$l=0,c$m=0;c$m<c$i;c$m++){var c$n=c$a[c$l],c$o=c$a[c$l+1],c$p=c$n*c$d.a+c$o*c$d.c+c$d.tx,c$q=c$n*c$d.b+c$o*c$d.d+c$d.ty;c$k[c$j++]=c$p,c$k[c$j++]=c$q,c$k[c$j++]=c$b[c$l],c$k[c$j++]=c$b[c$l+1],c$l+=2}this._vb.setNeedUpload();var c$r=this.vertNum;if(0<c$r){(c$i=c$c.length)>c$t.tmpIdx.length&&(c$t.tmpIdx=new Uint16Array(c$i));for(var c$s=0;c$s<c$i;c$s++)c$t.tmpIdx[c$s]=c$c[c$s]+c$r;this._ib.appendU16Array(c$t.tmpIdx,c$c.length)}else this._ib.append(c$c);this._ib.setNeedUpload(),this.vertNum+=c$i,this.indexNum+=c$c.length},c$b.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},c$b.destroy=function(){this._ib.destroy(),this._vb.destroy()},c$t.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new c$t},c$t.const_stride=16,c$t._POOL=[],c$i(c$t,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),c$t}(),c$La=function(c$a){function c$b(){c$b.__super.call(this),this.lock=!0}return c$o(c$b,"laya.webgl.shader.BaseShader",c$v),c$b.activeShader=null,c$b.bindShader=null,c$b}(),c$Ma=function(c$b){function c$m(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===c$c&&(c$c=6408),void 0===c$d&&(c$d=5121),void 0===c$g&&(c$g=34041),void 0===c$h&&(c$h=!1),void 0===c$i&&(c$i=!1),void 0===c$j&&(c$j=-1),void 0===c$k&&(c$k=-1),this._type=1,this._w=c$a,this._h=c$b,this._surfaceFormat=c$c,this._surfaceType=c$d,this._depthStencilFormat=c$g,c$t.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=c$h,this._repeat=c$i,this._minFifter=c$j,this._magFifter=c$k,this._createWebGLRenderTarget(),this.bitmap.lock=!0,c$m.__super.call(this,this.bitmap,c$K.INV_UV)}c$o(c$m,"laya.webgl.resource.RenderTarget2D",c$b);var c$a=c$m.prototype;return c$y.imps(c$a,{"laya.resource.IDispose":!0}),c$a.getType=function(){return this._type},c$a.getTexture=function(){return this},c$a.size=function(c$a,c$b){this._w==c$a&&this._h==c$b||(this._w=c$a,this._h=c$b,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},c$a.release=function(){this.destroy()},c$a.recycle=function(){c$m.POOL.push(this)},c$a.start=function(){var c$a=c$wa.mainContext;return this._preRenderTarget=c$ua.curRenderTarget,c$ua.curRenderTarget=this,c$a.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(c$a.viewport(0,0,this._w,this._h),this._svWidth=c$ua.width,this._svHeight=c$ua.height,c$ua.width=this._w,c$ua.height=this._h,c$La.activeShader=null),this},c$a.clear=function(c$a,c$b,c$c,c$d){void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0),void 0===c$d&&(c$d=1);var c$g=c$wa.mainContext;c$g.clearColor(c$a,c$b,c$c,c$d);var c$h=16384;switch(this._depthStencilFormat){case 33189:c$h|=256;break;case 36168:c$h|=1024;break;case 34041:c$h|=256,c$h|=1024}c$g.clear(c$h)},c$a.end=function(){var c$a=c$wa.mainContext;c$a.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,c$ua.curRenderTarget=this._preRenderTarget,1==this._type?(c$a.viewport(0,0,this._svWidth,this._svHeight),c$ua.width=this._svWidth,c$ua.height=this._svHeight,c$La.activeShader=null):c$a.viewport(0,0,c$y.stage.width,c$y.stage.height)},c$a.getData=function(c$a,c$b,c$c,c$d){var c$g=c$wa.mainContext;if(c$g.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===c$g.checkFramebufferStatus(36160)))return c$g.bindFramebuffer(36160,null),null;var c$h=new Uint8Array(this._w*this._h*4);return c$g.readPixels(c$a,c$b,c$c,c$d,this._surfaceFormat,this._surfaceType,c$h),c$g.bindFramebuffer(36160,null),c$h},c$a.destroy=function(c$a){void 0===c$a&&(c$a=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,c$b.prototype.destroy.call(this))},c$a.dispose=function(){},c$a._createWebGLRenderTarget=function(){this.bitmap=new c$Wa(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(c$a){this.event("recovered")})},c$d(0,c$a,"surfaceFormat",function(){return this._surfaceFormat}),c$d(0,c$a,"magFifter",function(){return this._magFifter}),c$d(0,c$a,"surfaceType",function(){return this._surfaceType}),c$d(0,c$a,"mipMap",function(){return this._mipMap}),c$d(0,c$a,"depthStencilFormat",function(){return this._depthStencilFormat}),c$d(0,c$a,"minFifter",function(){return this._minFifter}),c$d(0,c$a,"source",function(){return this._alreadyResolved?c$y.superGet(c$K,this,"source"):null}),c$m.create=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k){void 0===c$c&&(c$c=6408),void 0===c$d&&(c$d=5121),void 0===c$g&&(c$g=34041),void 0===c$h&&(c$h=!1),void 0===c$i&&(c$i=!1),void 0===c$j&&(c$j=-1),void 0===c$k&&(c$k=-1);var c$l=c$m.POOL.pop();return c$l||(c$l=new c$m(c$a,c$b)),c$l.bitmap&&c$l._w==c$a&&c$l._h==c$b&&c$l._surfaceFormat==c$c&&c$l._surfaceType==c$d&&c$l._depthStencilFormat==c$g&&c$l._mipMap==c$h&&c$l._repeat==c$i&&c$l._minFifter==c$j&&c$l._magFifter==c$k||(c$l._w=c$a,c$l._h=c$b,c$l._surfaceFormat=c$c,c$l._surfaceType=c$d,c$l._depthStencilFormat=c$g,c$t.isConchWebGL&&34041===c$l._depthStencilFormat&&(c$l._depthStencilFormat=33189),c$l._mipMap=c$h,c$l._repeat=c$i,c$l._minFifter=c$j,c$l._magFifter=c$k,c$l.release(),c$l._createWebGLRenderTarget()),c$l},c$m.TYPE2D=1,c$m.TYPE3D=2,c$m.POOL=[],c$m}(c$K),c$Na=function(c$a){function c$b(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,c$b.__super.call(this),c$b._gl=c$wa.mainContext}c$o(c$b,"laya.webgl.utils.Buffer",c$v);var c$c=c$b.prototype;return c$c._bind=function(){this.activeResource(),c$b._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(c$b._bindVertexBuffer=this._glBuffer),c$b._gl.bindBuffer(this._bufferType,c$b._bindActive[this._bufferType]=this._glBuffer),c$La.activeShader=null)},c$c.recreateResource=function(){this._glBuffer||(this._glBuffer=c$b._gl.createBuffer()),this.completeCreate()},c$c.disposeResource=function(){this._glBuffer&&(c$wa.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},c$d(0,c$c,"bufferUsage",function(){return this._bufferUsage}),c$b._gl=null,c$b._bindActive={},c$b._bindVertexBuffer=null,c$b._enableAtributes=[],c$b}(),c$Oa=function(c$a){function c$c(c$a){this.texcoord=null,this.offsetX=300,this.offsetY=0,c$c.__super.call(this,512,0);var c$b=8*c$ra.BYTES_PE;this.position=[2,5126,!1,c$b,0],this.texcoord=[2,5126,!1,c$b,2*c$ra.BYTES_PE],this.color=[4,5126,!1,c$b,4*c$ra.BYTES_PE]}return c$o(c$c,"laya.webgl.shader.d2.skinAnishader.SkinSV",c$Aa),c$c}(),c$Pa=function(c$a){function c$b(c$a){c$b.__super.call(this,2,0),this.color=[]}return c$o(c$b,"laya.webgl.shader.d2.value.Color2dSV",c$Aa),c$b.prototype.setValue=function(c$a){c$a.fillStyle&&(this.color=c$a.fillStyle._color._color),c$a.strokeStyle&&(this.color=c$a.strokeStyle._color._color)},c$b}(),c$Qa=function(c$a){function c$b(c$a){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=c$Aa._TEXCOORD,c$b.__super.call(this,256,0)}c$o(c$b,"laya.webgl.shader.d2.value.FillTextureSV",c$Aa);var c$c=c$b.prototype;return c$c.setValue=function(c$a){this.ALPHA=c$a.ALPHA,c$a.filters&&this.setFilters(c$a.filters)},c$c.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},c$b}(),c$Ra=function(c$a){function c$b(c$a){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=c$Aa._TEXCOORD,void 0===c$a&&(c$a=0),c$b.__super.call(this,1,c$a)}c$o(c$b,"laya.webgl.shader.d2.value.TextureSV",c$Aa);var c$c=c$b.prototype;return c$c.setValue=function(c$a){this.ALPHA=c$a.ALPHA,c$a.filters&&this.setFilters(c$a.filters)},c$c.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},c$b}(),c$Sa=function(c$a){function c$b(c$a){this.a_color=null,this.u_pos=[0,0],c$b.__super.call(this,4,0),this.position=[2,5126,!1,5*c$ra.BYTES_PE,0],this.a_color=[3,5126,!1,5*c$ra.BYTES_PE,2*c$ra.BYTES_PE]}return c$o(c$b,"laya.webgl.shader.d2.value.PrimitiveSV",c$Aa),c$b}(),c$Ta=function(c$a){function c$b(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,c$b.__super.call(this)}c$o(c$b,"laya.webgl.atlas.AtlasWebGLCanvas",c$a);var c$c=c$b.prototype;return c$c.recreateResource=function(){var c$a=c$wa.mainContext,c$b=this._source=c$a.createTexture(),c$c=c$xa.curBindTexTarget,c$d=c$xa.curBindTexValue;c$xa.bindTexture(c$a,3553,c$b),c$a.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),c$a.texParameteri(3553,10241,9729),c$a.texParameteri(3553,10240,9729),c$a.texParameteri(3553,10242,33071),c$a.texParameteri(3553,10243,33071),c$c&&c$d&&c$xa.bindTexture(c$a,c$c,c$d),this.memorySize=this._w*this._h*4,this.completeCreate()},c$c.disposeResource=function(){this._source&&(c$wa.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},c$c.texSubImage2D=function(c$a,c$b,c$c){if(c$t.isFlash){this._flashCacheImage||(this._flashCacheImage=c$r.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var c$d=c$c.bitmapdata;this._flashCacheImage._image.copyPixels(c$d,0,0,c$d.width,c$d.height,c$a,c$b),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var c$g=c$wa.mainContext,c$h=c$xa.curBindTexTarget,c$i=c$xa.curBindTexValue;c$xa.bindTexture(c$g,3553,this._source),c$g.pixelStorei(37441,!0),0<=c$a-1&&c$g.texSubImage2D(3553,0,c$a-1,c$b,6408,5121,c$c),c$a+1<=this._w&&c$g.texSubImage2D(3553,0,c$a+1,c$b,6408,5121,c$c),0<=c$b-1&&c$g.texSubImage2D(3553,0,c$a,c$b-1,6408,5121,c$c),c$b+1<=this._h&&c$g.texSubImage2D(3553,0,c$a,c$b+1,6408,5121,c$c),c$g.texSubImage2D(3553,0,c$a,c$b,6408,5121,c$c),c$g.pixelStorei(37441,!1),c$h&&c$i&&c$xa.bindTexture(c$g,c$h,c$i)}},c$c.texSubImage2DPixel=function(c$a,c$b,c$c,c$d,c$g){var c$h=c$wa.mainContext,c$i=c$xa.curBindTexTarget,c$j=c$xa.curBindTexValue;c$xa.bindTexture(c$h,3553,this._source);var c$k=new Uint8Array(c$g.data);c$h.pixelStorei(37441,!0),c$h.texSubImage2D(3553,0,c$a,c$b,c$c,c$d,6408,5121,c$k),c$h.pixelStorei(37441,!1),c$i&&c$j&&c$xa.bindTexture(c$h,c$i,c$j)},c$d(0,c$c,"width",c$a.prototype._$get_width,function(c$a){this._w=c$a}),c$d(0,c$c,"height",c$a.prototype._$get_height,function(c$a){this._h=c$a}),c$b}(c$c),c$Ua=function(c$a){function c$g(){this.flipY=!0,this.alwaysChange=!1,c$g.__super.call(this)}c$o(c$g,"laya.webgl.resource.WebGLCanvas",c$c);var c$b=c$g.prototype;return c$b.getCanvas=function(){return this._canvas},c$b.clear=function(){this._ctx&&this._ctx.clear()},c$b.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},c$b._setContext=function(c$a){this._ctx=c$a},c$b.getContext=function(c$a,c$b){return this._ctx?this._ctx:this._ctx=c$g._createContext(this)},c$b.size=function(c$a,c$b){this._w==c$a&&this._h==c$b||(this._w=c$a,this._h=c$b,this._ctx&&this._ctx.size(c$a,c$b),this._canvas&&(this._canvas.height=c$b,this._canvas.width=c$a))},c$b.activeResource=function(c$a){void 0===c$a&&(c$a=!1),this._source||this.recreateResource()},c$b.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},c$b.disposeResource=function(){this._source&&!this.iscpuSource&&(c$wa.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},c$b.createWebGlTexture=function(){var c$a=c$wa.mainContext;this._canvas;var c$b=this._source=c$a.createTexture();this.iscpuSource=!1;var c$c=c$xa.curBindTexTarget,c$d=c$xa.curBindTexValue;c$xa.bindTexture(c$a,3553,c$b),c$a.pixelStorei(37440,this.flipY?1:0),c$g.premulAlpha&&c$a.pixelStorei(37441,!0),c$a.texImage2D(3553,0,6408,6408,5121,this._imgData),c$g.premulAlpha&&c$a.pixelStorei(37441,!1),c$a.texParameteri(3553,10240,9729),c$a.texParameteri(3553,10241,9729),c$a.texParameteri(3553,10242,33071),c$a.texParameteri(3553,10243,33071),c$a.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,c$c&&c$d&&c$xa.bindTexture(c$a,c$c,c$d)},c$b.reloadCanvasData=function(){var c$a=c$wa.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var c$b=c$xa.curBindTexTarget,c$c=c$xa.curBindTexValue;c$xa.bindTexture(c$a,3553,this._source),c$g.premulAlpha&&c$a.pixelStorei(37441,!0),c$a.texImage2D(3553,0,6408,6408,5121,this._imgData),c$g.premulAlpha&&c$a.pixelStorei(37441,!1),c$a.pixelStorei(37440,0),c$b&&c$c&&c$xa.bindTexture(c$a,c$b,c$c)},c$b.texSubImage2D=function(c$a,c$b,c$c){var c$d=c$wa.mainContext,c$g=c$xa.curBindTexTarget,c$h=c$xa.curBindTexValue;c$xa.bindTexture(c$d,3553,this._source),c$d.pixelStorei(37441,!0),c$d.texSubImage2D(3553,0,c$b,c$c,6408,5121,c$a._source),c$d.pixelStorei(37441,!1),c$g&&c$h&&c$xa.bindTexture(c$d,c$g,c$h)},c$b.toBase64=function(c$a,c$b,c$c){var c$d=null;this._canvas&&(c$d=this._canvas.toDataURL(c$a,c$b)),c$c.call(this,c$d)},c$d(0,c$b,"context",function(){return this._ctx}),c$d(0,c$b,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),c$d(0,c$b,"asBitmap",null,function(c$a){this._ctx&&(this._ctx.asBitmap=c$a)}),c$g._createContext=null,c$g.premulAlpha=!1,c$g}(),c$Va=function(c$a){function c$h(c$a,c$b){this.CborderSize=12,c$h.__super.call(this),this.char=c$a,this.isSpace=" "===c$a,this.xs=c$b.scaleX,this.ys=c$b.scaleY,this.font=c$b.font.toString(),this.fontSize=c$b.font.size,this.fillColor=c$b.fillColor,this.borderColor=c$b.borderColor,this.lineWidth=c$b.lineWidth,this.underLine=c$b.underLine;var c$c,c$d=c$t.isConchApp;c$d?((c$c=ConchTextCanvas)._source=ConchTextCanvas,c$c._source.canvas=ConchTextCanvas):c$c=c$p.canvas.source,this.canvas=c$c,this._enableMerageInAtlas=!0,this._ctx=c$d?c$c:this.canvas.getContext("2d",void 0);var c$g=c$L.measureText(this.char,this.font);this.cw=c$g.width*this.xs,this.ch=(c$g.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new c$K(this)}c$o(c$h,"laya.webgl.resource.WebGLCharImage",c$c);var c$b=c$h.prototype;return c$y.imps(c$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),c$b.active=function(){this.texture.active()},c$b.recreateResource=function(){var c$a=c$t.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),c$a){var c$b=this.fontSize;1==this.xs&&1==this.ys||(c$b=parseInt(c$b*(this.xs>this.ys?this.xs:this.ys)+""));var c$c="normal 100 "+this.font;c$c=c$c.replace(c$h._fontSizeReg,c$b),this.borderColor&&(c$c+=" 1 "+this.borderColor),this._ctx.font=c$c,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,c$J.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var c$d=this._ctx.measureText(this.char).width+1;this._ctx.lineTo(c$d,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},c$b.onresize=function(c$a,c$b){this._w=c$a,this._h=c$b,this._allowMerageInAtlas=!0},c$b.clearAtlasSource=function(){},c$d(0,c$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),c$d(0,c$b,"atlasSource",function(){return this.canvas}),c$d(0,c$b,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(c$a){this._enableMerageInAtlas=c$a}),c$h.createOneChar=function(c$a,c$b){return new c$h(c$a,c$b)},c$h._fontSizeReg=new RegExp("\\d+(?=px)","g"),c$h}(),c$Wa=function(c$a){function c$l(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k){void 0===c$c&&(c$c=6408),void 0===c$d&&(c$d=5121),void 0===c$g&&(c$g=34041),void 0===c$h&&(c$h=!1),void 0===c$i&&(c$i=!1),void 0===c$j&&(c$j=-1),void 0===c$k&&(c$k=1),c$l.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=c$a,this._h=c$b,this._surfaceFormat=c$c,this._surfaceType=c$d,this._depthStencilFormat=c$g,this._mipMap=c$h,this._repeat=c$i,this._minFifter=c$j,this._magFifter=c$k}c$o(c$l,"laya.webgl.resource.WebGLRenderTarget",c$c);var c$b=c$l.prototype;return c$b.recreateResource=function(){var c$a=c$wa.mainContext;this._frameBuffer||(this._frameBuffer=c$a.createFramebuffer()),this._source||(this._source=c$a.createTexture());var c$b=c$xa.curBindTexTarget,c$c=c$xa.curBindTexValue;c$xa.bindTexture(c$a,3553,this._source),c$a.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var c$d=this._minFifter,c$g=this._magFifter,c$h=this._repeat?10497:33071,c$i=c$m.isPOT(this._w,this._h);if(c$i?(this._mipMap?-1!==c$d||(c$d=9987):-1!==c$d||(c$d=9729),-1!==c$g||(c$g=9729),c$a.texParameteri(3553,10241,c$d),c$a.texParameteri(3553,10240,c$g),c$a.texParameteri(3553,10242,c$h),c$a.texParameteri(3553,10243,c$h),this._mipMap&&c$a.generateMipmap(3553)):(-1!==c$d||(c$d=9729),-1!==c$g||(c$g=9729),c$a.texParameteri(3553,10241,c$d),c$a.texParameteri(3553,10240,c$g),c$a.texParameteri(3553,10242,33071),c$a.texParameteri(3553,10243,33071)),c$a.bindFramebuffer(36160,this._frameBuffer),c$a.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=c$a.createRenderbuffer()),c$a.bindRenderbuffer(36161,this._depthStencilBuffer),c$a.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:c$a.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:c$a.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:c$a.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}c$a.bindFramebuffer(36160,null),c$b&&c$c&&c$xa.bindTexture(c$a,c$b,c$c),c$a.bindRenderbuffer(36161,null),c$i&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},c$b.disposeResource=function(){this._frameBuffer&&(c$wa.mainContext.deleteTexture(this._source),c$wa.mainContext.deleteFramebuffer(this._frameBuffer),c$wa.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},c$d(0,c$b,"depthStencilBuffer",function(){return this._depthStencilBuffer}),c$d(0,c$b,"frameBuffer",function(){return this._frameBuffer}),c$l}(),c$Xa=function(c$a){function c$j(c$a,c$b,c$c,c$d,c$g,c$h,c$i){this.offsetX=0,this.offsetY=0,c$j.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=c$h,this.canvas=c$a,this._ctx=c$a.getContext("2d",void 0),this._w=c$d,this._h=c$g,this.offsetX=c$b,this.offsetY=c$c,this.src=c$i,this._enableMerageInAtlas=!0,c$Q.enabled&&this._w<c$Q.atlasLimitWidth&&this._h<c$Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}c$o(c$j,"laya.webgl.resource.WebGLSubImage",c$c);var c$b=c$j.prototype;return c$y.imps(c$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),c$b.size=function(c$a,c$b){this._w=c$a,this._h=c$b,this._ctx&&this._ctx.size(c$a,c$b),this.canvas&&(this.canvas.height=c$b,this.canvas.width=c$a)},c$b.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},c$b.createWebGlTexture=function(){var c$a=c$wa.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var c$b=this._source=c$a.createTexture(),c$c=c$xa.curBindTexTarget,c$d=c$xa.curBindTexValue;c$xa.bindTexture(c$a,3553,c$b),c$a.pixelStorei(37441,!0),c$a.texImage2D(3553,0,6408,6408,5121,this.canvas),c$a.pixelStorei(37441,!1);var c$g=this.minFifter,c$h=this.magFifter,c$i=this.repeat?10497:33071,c$j=c$m.isPOT(this.width,this.height);c$j?(this.mipmap?-1!==c$g||(c$g=9987):-1!==c$g||(c$g=9729),-1!==c$h||(c$h=9729),c$a.texParameteri(3553,10240,c$h),c$a.texParameteri(3553,10241,c$g),c$a.texParameteri(3553,10242,c$i),c$a.texParameteri(3553,10243,c$i),this.mipmap&&c$a.generateMipmap(3553)):(-1!==c$g||(c$g=9729),-1!==c$h||(c$h=9729),c$a.texParameteri(3553,10241,c$g),c$a.texParameteri(3553,10240,c$h),c$a.texParameteri(3553,10242,33071),c$a.texParameteri(3553,10243,33071)),c$c&&c$d&&c$xa.bindTexture(c$a,c$c,c$d),this.canvas=null,c$j&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},c$b.disposeResource=function(){c$Q.enabled&&this._allowMerageInAtlas||!this._source||(c$wa.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},c$b.clearAtlasSource=function(){},c$d(0,c$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),c$d(0,c$b,"atlasSource",function(){return this.canvas}),c$d(0,c$b,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(c$a){this._allowMerageInAtlas=c$a}),c$j}(),c$Ya=function(c$a){function c$l(c$a,c$b,c$c,c$d){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,c$l.__super.call(this),!c$a||!c$b)throw"Shader Error";this._id=++c$l._count,this._vs=c$a,this._ps=c$b,this._nameMap=c$d||{},null!=c$c&&(c$l.sharders[c$c]=this)}c$o(c$l,"laya.webgl.shader.Shader",c$La);var c$b=c$l.prototype;return c$b.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},c$b.disposeResource=function(){c$wa.mainContext.deleteShader(this._vshader),c$wa.mainContext.deleteShader(this._pshader),c$wa.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},c$b._compile=function(){if(this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var c$a=[this._vs,this._ps],c$b=c$wa.mainContext;if(this._program=c$b.createProgram(),this._vshader=c$l._createShader(c$b,c$a[0],35633),this._pshader=c$l._createShader(c$b,c$a[1],35632),c$b.attachShader(this._program,this._vshader),c$b.attachShader(this._program,this._pshader),c$b.linkProgram(this._program),!c$t.isConchApp&&!c$b.getProgramParameter(this._program,35714))throw c$b.getProgramInfoLog(this._program);var c$c,c$d,c$g=0,c$h=0;for(c$h=c$t.isConchApp?c$b.getProgramParameterEx(this._vs,this._ps,"",35721):c$b.getProgramParameter(this._program,35721),c$g=0;c$g<c$h;c$g++){var c$i=null;c$c={vartype:"attribute",glfun:null,ivartype:0,attrib:c$i=c$t.isConchApp?c$b.getActiveAttribEx(this._vs,this._ps,"",c$g):c$b.getActiveAttrib(this._program,c$g),location:c$b.getAttribLocation(this._program,c$i.name),name:c$i.name,type:c$i.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(c$c)}var c$j=0;for(c$j=c$t.isConchApp?c$b.getProgramParameterEx(this._vs,this._ps,"",35718):c$b.getProgramParameter(this._program,35718),c$g=0;c$g<c$j;c$g++){var c$k=null;c$k=c$t.isConchApp?c$b.getActiveUniformEx(this._vs,this._ps,"",c$g):c$b.getActiveUniform(this._program,c$g),0<(c$c={vartype:"uniform",glfun:null,ivartype:1,attrib:c$i,location:c$b.getUniformLocation(this._program,c$k.name),name:c$k.name,type:c$k.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(c$c.name=c$c.name.substr(0,c$c.name.length-3),c$c.isArray=!0,c$c.location=c$b.getUniformLocation(this._program,c$c.name)),this._params.push(c$c)}for(c$g=0,c$d=this._params.length;c$g<c$d;c$g++)if((c$c=this._params[c$g]).indexOfParams=c$g,c$c.index=1,c$c.value=[c$c.location,null],c$c.codename=c$c.name,c$c.name=this._nameMap[c$c.codename]?this._nameMap[c$c.codename]:c$c.codename,(this._paramsMap[c$c.name]=c$c)._this=this,c$c.uploadedValue=[],"attribute"!==c$c.vartype)switch(c$c.type){case 5124:c$c.fun=c$c.isArray?this._uniform1iv:this._uniform1i;break;case 5126:c$c.fun=c$c.isArray?this._uniform1fv:this._uniform1f;break;case 35664:c$c.fun=c$c.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:c$c.fun=c$c.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:c$c.fun=c$c.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:c$c.fun=this._uniform_sampler2D;break;case 35680:c$c.fun=this._uniform_samplerCube;break;case 35676:c$c.glfun=c$b.uniformMatrix4fv,c$c.fun=this._uniformMatrix4fv;break;case 35670:c$c.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else c$c.fun=this._attribute}},c$b.getUniform=function(c$a){return this._paramsMap[c$a]},c$b._attribute=function(c$a,c$b){var c$c=c$wa.mainContext,c$d=c$Na._enableAtributes,c$g=c$a.location;return c$d[c$g]||c$c.enableVertexAttribArray(c$g),c$c.vertexAttribPointer(c$g,c$b[0],c$b[1],c$b[2],c$b[3],c$b[4]+this._offset),c$d[c$g]=c$Na._bindVertexBuffer,1},c$b._uniform1f=function(c$a,c$b){var c$c=c$a.uploadedValue;return c$c[0]!==c$b?(c$wa.mainContext.uniform1f(c$a.location,c$c[0]=c$b),1):0},c$b._uniform1fv=function(c$a,c$b){if(c$b.length<4){var c$c=c$a.uploadedValue;return c$c[0]!==c$b[0]||c$c[1]!==c$b[1]||c$c[2]!==c$b[2]||c$c[3]!==c$b[3]?(c$wa.mainContext.uniform1fv(c$a.location,c$b),c$c[0]=c$b[0],c$c[1]=c$b[1],c$c[2]=c$b[2],c$c[3]=c$b[3],1):0}return c$wa.mainContext.uniform1fv(c$a.location,c$b),1},c$b._uniform_vec2=function(c$a,c$b){var c$c=c$a.uploadedValue;return c$c[0]!==c$b[0]||c$c[1]!==c$b[1]?(c$wa.mainContext.uniform2f(c$a.location,c$c[0]=c$b[0],c$c[1]=c$b[1]),1):0},c$b._uniform_vec2v=function(c$a,c$b){if(c$b.length<2){var c$c=c$a.uploadedValue;return c$c[0]!==c$b[0]||c$c[1]!==c$b[1]||c$c[2]!==c$b[2]||c$c[3]!==c$b[3]?(c$wa.mainContext.uniform2fv(c$a.location,c$b),c$c[0]=c$b[0],c$c[1]=c$b[1],c$c[2]=c$b[2],c$c[3]=c$b[3],1):0}return c$wa.mainContext.uniform2fv(c$a.location,c$b),1},c$b._uniform_vec3=function(c$a,c$b){var c$c=c$a.uploadedValue;return c$c[0]!==c$b[0]||c$c[1]!==c$b[1]||c$c[2]!==c$b[2]?(c$wa.mainContext.uniform3f(c$a.location,c$c[0]=c$b[0],c$c[1]=c$b[1],c$c[2]=c$b[2]),1):0},c$b._uniform_vec3v=function(c$a,c$b){return c$wa.mainContext.uniform3fv(c$a.location,c$b),1},c$b._uniform_vec4=function(c$a,c$b){var c$c=c$a.uploadedValue;return c$c[0]!==c$b[0]||c$c[1]!==c$b[1]||c$c[2]!==c$b[2]||c$c[3]!==c$b[3]?(c$wa.mainContext.uniform4f(c$a.location,c$c[0]=c$b[0],c$c[1]=c$b[1],c$c[2]=c$b[2],c$c[3]=c$b[3]),1):0},c$b._uniform_vec4v=function(c$a,c$b){return c$wa.mainContext.uniform4fv(c$a.location,c$b),1},c$b._uniformMatrix2fv=function(c$a,c$b){return c$wa.mainContext.uniformMatrix2fv(c$a.location,!1,c$b),1},c$b._uniformMatrix3fv=function(c$a,c$b){return c$wa.mainContext.uniformMatrix3fv(c$a.location,!1,c$b),1},c$b._uniformMatrix4fv=function(c$a,c$b){return c$wa.mainContext.uniformMatrix4fv(c$a.location,!1,c$b),1},c$b._uniform1i=function(c$a,c$b){var c$c=c$a.uploadedValue;return c$c[0]!==c$b?(c$wa.mainContext.uniform1i(c$a.location,c$c[0]=c$b),1):0},c$b._uniform1iv=function(c$a,c$b){return c$wa.mainContext.uniform1iv(c$a.location,c$b),1},c$b._uniform_ivec2=function(c$a,c$b){var c$c=c$a.uploadedValue;return c$c[0]!==c$b[0]||c$c[1]!==c$b[1]?(c$wa.mainContext.uniform2i(c$a.location,c$c[0]=c$b[0],c$c[1]=c$b[1]),1):0},c$b._uniform_ivec2v=function(c$a,c$b){return c$wa.mainContext.uniform2iv(c$a.location,c$b),1},c$b._uniform_vec3i=function(c$a,c$b){var c$c=c$a.uploadedValue;return c$c[0]!==c$b[0]||c$c[1]!==c$b[1]||c$c[2]!==c$b[2]?(c$wa.mainContext.uniform3i(c$a.location,c$c[0]=c$b[0],c$c[1]=c$b[1],c$c[2]=c$b[2]),1):0},c$b._uniform_vec3vi=function(c$a,c$b){return c$wa.mainContext.uniform3iv(c$a.location,c$b),1},c$b._uniform_vec4i=function(c$a,c$b){var c$c=c$a.uploadedValue;return c$c[0]!==c$b[0]||c$c[1]!==c$b[1]||c$c[2]!==c$b[2]||c$c[3]!==c$b[3]?(c$wa.mainContext.uniform4i(c$a.location,c$c[0]=c$b[0],c$c[1]=c$b[1],c$c[2]=c$b[2],c$c[3]=c$b[3]),1):0},c$b._uniform_vec4vi=function(c$a,c$b){return c$wa.mainContext.uniform4iv(c$a.location,c$b),1},c$b._uniform_sampler2D=function(c$a,c$b){var c$c=c$wa.mainContext,c$d=c$a.uploadedValue;return null==c$d[0]?(c$d[0]=this._curActTexIndex,c$c.uniform1i(c$a.location,this._curActTexIndex),c$c.activeTexture(c$l._TEXTURES[this._curActTexIndex]),c$xa.bindTexture(c$c,3553,c$b),this._curActTexIndex++,1):(c$c.activeTexture(c$l._TEXTURES[c$d[0]]),c$xa.bindTexture(c$c,3553,c$b),0)},c$b._uniform_samplerCube=function(c$a,c$b){var c$c=c$wa.mainContext,c$d=c$a.uploadedValue;return null==c$d[0]?(c$d[0]=this._curActTexIndex,c$c.uniform1i(c$a.location,this._curActTexIndex),c$c.activeTexture(c$l._TEXTURES[this._curActTexIndex]),c$xa.bindTexture(c$c,34067,c$b),this._curActTexIndex++,1):(c$c.activeTexture(c$l._TEXTURES[c$d[0]]),c$xa.bindTexture(c$c,34067,c$b),0)},c$b._noSetValue=function(c$a){console.log("no....:"+c$a.name)},c$b.uploadOne=function(c$a,c$b){this.activeResource(),c$xa.UseProgram(this._program);var c$c=this._paramsMap[c$a];c$c.fun.call(this,c$c,c$b)},c$b.uploadTexture2D=function(c$a){c$G.shaderCall++;var c$b=c$wa.mainContext;c$b.activeTexture(33984),c$xa.bindTexture(c$b,3553,c$a)},c$b.uploadTexture2D1=function(c$a){c$G.shaderCall++;var c$b=c$wa.mainContext;c$b.activeTexture(33985),c$xa.bindTexture(c$b,3553,c$a)},c$b.upload=function(c$a,c$b){c$La.activeShader=c$La.bindShader=this,this._lastUseFrameCount===c$G.loopCount||this.activeResource(),c$xa.UseProgram(this._program),this._reCompile?(c$b=this._params,this._reCompile=!1):c$b=c$b||this._params;c$wa.mainContext;for(var c$c,c$d,c$g=c$b.length,c$h=0,c$i=0;c$i<c$g;c$i++)null!==(c$d=c$a[(c$c=c$b[c$i]).name])&&(c$h+=c$c.fun.call(this,c$c,c$d));c$G.shaderCall+=c$h},c$b.uploadArray=function(c$a,c$b,c$c){c$La.activeShader=this,(c$La.bindShader=this).activeResource(),c$xa.UseProgram(this._program);this._params;for(var c$d,c$g,c$h=0,c$i=c$b-2;0<=c$i;c$i-=2)(c$g=this._paramsMap[c$a[c$i]])&&null!=(c$d=c$a[c$i+1])&&(c$c&&c$c[c$g.name]&&c$c[c$g.name].bind(),c$h+=c$g.fun.call(this,c$g,c$d));c$G.shaderCall+=c$h},c$b.getParams=function(){return this._params},c$l.getShader=function(c$a){return c$l.sharders[c$a]},c$l.create=function(c$a,c$b,c$c,c$d){return new c$l(c$a,c$b,c$c,c$d)},c$l.withCompile=function(c$a,c$b,c$c,c$d){if(c$c&&c$l.sharders[c$c])return c$l.sharders[c$c];var c$g=c$l._preCompileShader[2e-4*c$a];if(!c$g)throw new Error("withCompile shader err!"+c$a);return c$g.createShader(c$b,c$c,c$d)},c$l.withCompile2D=function(c$a,c$b,c$c,c$d,c$g){if(c$d&&c$l.sharders[c$d])return c$l.sharders[c$d];var c$h=c$l._preCompileShader[2e-4*c$a+c$b];if(!c$h)throw new Error("withCompile shader err!"+c$a+" "+c$b);return c$h.createShader(c$c,c$d,c$g)},c$l.addInclude=function(c$a,c$b){c$va.addInclude(c$a,c$b)},c$l.preCompile=function(c$a,c$b,c$c,c$d){var c$g=2e-4*c$a;c$l._preCompileShader[c$g]=new c$va(c$g,c$b,c$c,c$d)},c$l.preCompile2D=function(c$a,c$b,c$c,c$d,c$g){var c$h=2e-4*c$a+c$b;c$l._preCompileShader[c$h]=new c$va(c$h,c$c,c$d,c$g)},c$l._createShader=function(c$a,c$b,c$c){var c$d=c$a.createShader(c$c);return c$a.shaderSource(c$d,c$b),c$a.compileShader(c$d),c$d},c$l._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],c$l._count=0,c$l._preCompileShader={},c$l.SHADERNAME2ID=2e-4,c$l.sharders=((c$l.sharders=[]).length=32,c$l.sharders),c$i(c$l,["nameKey",function(){return this.nameKey=new c$H}]),c$l}(),c$Za=function(c$a){function c$b(){this._maxsize=0,this._upload=!0,this._uploadSize=0,c$b.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}c$o(c$b,"laya.webgl.utils.Buffer2D",c$a);var c$c=c$b.prototype;return c$c.needSize=function(c$a){var c$b=this._byteLength;if(c$a){var c$c=this._byteLength+c$a;c$c<=this._buffer.byteLength||this._resizeBuffer(c$c<<1,!0),this._byteLength=c$c}return c$b},c$c._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),c$G.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,c$Na._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),c$Na._gl.bufferSubData(this._bufferType,0,this._buffer)},c$c._bufferSubData=function(c$a,c$b,c$c){if(void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0),this._maxsize=Math.max(this._maxsize,this._byteLength),c$G.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,c$Na._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),c$b||c$c){var c$d=this._buffer.slice(c$b,c$c);c$Na._gl.bufferSubData(this._bufferType,c$a,c$d)}else c$Na._gl.bufferSubData(this._bufferType,c$a,this._buffer)},c$c._checkArrayUse=function(){},c$c._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},c$c._bind_subUpload=function(c$a,c$b,c$c){return void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(c$a,c$b,c$c),!0)},c$c._resizeBuffer=function(c$a,c$b){if(c$a<this._buffer.byteLength)return this;if(this.memorySize=c$a,c$b&&this._buffer&&0<this._buffer.byteLength){var c$c=new ArrayBuffer(c$a);new Uint8Array(c$c).set(new Uint8Array(this._buffer),0),this._buffer=c$c}else this._buffer=new ArrayBuffer(c$a);return this._checkArrayUse(),this._upload=!0,this},c$c.append=function(c$a){this._upload=!0;var c$b,c$c;c$b=c$a.byteLength,c$a instanceof Uint8Array?(this._resizeBuffer(this._byteLength+c$b,!0),c$c=new Uint8Array(this._buffer,this._byteLength)):c$a instanceof Uint16Array?(this._resizeBuffer(this._byteLength+c$b,!0),c$c=new Uint16Array(this._buffer,this._byteLength)):c$a instanceof Float32Array&&(this._resizeBuffer(this._byteLength+c$b,!0),c$c=new Float32Array(this._buffer,this._byteLength)),c$c.set(c$a,0),this._byteLength+=c$b,this._checkArrayUse()},c$c.appendU16Array=function(c$a,c$b){this._resizeBuffer(this._byteLength+2*c$b,!0);for(var c$c=new Uint16Array(this._buffer,this._byteLength,c$b),c$d=0;c$d<c$b;c$d++)c$c[c$d]=c$a[c$d];this._byteLength+=2*c$b,this._checkArrayUse()},c$c.appendEx=function(c$a,c$b){this._upload=!0;var c$c;c$c=c$a.byteLength,this._resizeBuffer(this._byteLength+c$c,!0),new c$b(this._buffer,this._byteLength).set(c$a,0),this._byteLength+=c$c,this._checkArrayUse()},c$c.appendEx2=function(c$a,c$b,c$c,c$d){void 0===c$d&&(c$d=1),this._upload=!0;var c$g,c$h;c$g=c$c*c$d,this._resizeBuffer(this._byteLength+c$g,!0),c$h=new c$b(this._buffer,this._byteLength);var c$i=0;for(c$i=0;c$i<c$c;c$i++)c$h[c$i]=c$a[c$i];this._byteLength+=c$g,this._checkArrayUse()},c$c.getBuffer=function(){return this._buffer},c$c.setNeedUpload=function(){this._upload=!0},c$c.getNeedUpload=function(){return this._upload},c$c.upload=function(){var c$a=this._bind_upload();return c$Na._gl.bindBuffer(this._bufferType,null),c$Na._bindActive[this._bufferType]=null,c$La.activeShader=null,c$a},c$c.subUpload=function(c$a,c$b,c$c){void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0);var c$d=this._bind_subUpload();return c$Na._gl.bindBuffer(this._bufferType,null),c$Na._bindActive[this._bufferType]=null,c$La.activeShader=null,c$d},c$c.disposeResource=function(){c$a.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},c$c.clear=function(){this._byteLength=0,this._upload=!0},c$d(0,c$c,"bufferLength",function(){return this._buffer.byteLength}),c$d(0,c$c,"byteLength",null,function(c$a){this._byteLength!==c$a&&(c$a<=this._buffer.byteLength||this._resizeBuffer(2*c$a+256,!0),this._byteLength=c$a)}),c$b.__int__=function(c$a){c$ea.QuadrangleIB=c$ea.create(35044),c$sa.fillIBQuadrangle(c$ea.QuadrangleIB,16)},c$b.FLOAT32=4,c$b.SHORT=2,c$b}(c$Na),c$$a=(function(c$b){function c$c(c$a){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,c$c.__super.call(this,9)}c$o(c$c,"laya.webgl.shader.d2.value.GlowSV",c$b);var c$a=c$c.prototype;c$a.setValue=function(c$a){c$b.prototype.setValue.call(this,c$a)},c$a.clear=function(){c$b.prototype.clear.call(this)}}(c$Ra),function(c$a){function c$b(c$a){c$b.__super.call(this,64),this.defines.add(64)}c$o(c$b,"laya.webgl.shader.d2.value.TextSV",c$a);var c$c=c$b.prototype;return c$c.release=function(){(c$b.pool[c$b._length++]=this).clear()},c$c.clear=function(){c$a.prototype.clear.call(this)},c$b.create=function(){return c$b._length?c$b.pool[--c$b._length]:new c$b(null)},c$b.pool=[],c$b._length=0,c$b}(c$Ra)),c$_a=function(c$a){function c$g(c$a,c$b,c$c,c$d){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,c$g.__super.call(this,c$a,c$b,c$c,c$d)}c$o(c$g,"laya.webgl.shader.d2.Shader2X",c$a);var c$b=c$g.prototype;return c$b.upload2dQuick1=function(c$a){this.upload(c$a,this._params2dQuick1||this._make2dQuick1())},c$b._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var c$a,c$b=this._params,c$c=0,c$d=c$b.length;c$c<c$d;c$c++)c$a=c$b[c$c],(c$t.isFlash||"size"!==c$a.name&&"position"!==c$a.name&&"texcoord"!==c$a.name)&&this._params2dQuick1.push(c$a)}return this._params2dQuick1},c$b.disposeResource=function(){c$a.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},c$b.upload2dQuick2=function(c$a){this.upload(c$a,this._params2dQuick2||this._make2dQuick2())},c$b._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var c$a,c$b=this._params,c$c=0,c$d=c$b.length;c$c<c$d;c$c++)c$a=c$b[c$c],(c$t.isFlash||"size"!==c$a.name)&&this._params2dQuick2.push(c$a)}return this._params2dQuick2},c$g.create=function(c$a,c$b,c$c,c$d){return new c$g(c$a,c$b,c$c,c$d)},c$g}(c$Ya),c$ea=function(c$a){function c$b(c$a){this._uint8Array=null,this._uint16Array=null,void 0===c$a&&(c$a=35044),c$b.__super.call(this),this._bufferUsage=c$a,this._bufferType=34963,c$t.isFlash||(this._buffer=new ArrayBuffer(8))}c$o(c$b,"laya.webgl.utils.IndexBuffer2D",c$Za);var c$c=c$b.prototype;return c$c._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},c$c.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},c$c.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},c$c.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},c$b.QuadrangleIB=null,c$b.create=function(c$a){return void 0===c$a&&(c$a=35044),new c$b(c$a)},c$b}(),c$fa=function(c$a){function c$c(c$a,c$b){this._floatArray32=null,this._vertexStride=0,c$c.__super.call(this),this._vertexStride=c$a,this._bufferUsage=c$b,this._bufferType=34962,c$t.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}c$o(c$c,"laya.webgl.utils.VertexBuffer2D",c$a);var c$b=c$c.prototype;return c$b.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},c$b.bind=function(c$a){c$a&&c$a._bind(),this._bind()},c$b.insertData=function(c$a,c$b){this.getFloat32Array().set(c$a,c$b),this._upload=!0},c$b.bind_upload=function(c$a){c$a._bind_upload()||c$a._bind(),this._bind_upload()||this._bind()},c$b._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},c$b.disposeResource=function(){c$a.prototype.disposeResource.call(this)},c$b.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},c$d(0,c$b,"vertexStride",function(){return this._vertexStride}),c$c.create=function(c$a,c$b){return void 0===c$b&&(c$b=35048),new c$c(c$a,c$b)},c$c}(c$Za),c$ab=function(c$a){function c$j(c$a,c$b,c$c,c$d,c$g,c$h){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===c$c&&(c$c=6408),void 0===c$d&&(c$d=!0),c$j.__super.call(this,c$a,c$b),c$a){if(this._format=c$c,this._mipmap=c$d,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof c$a)this._url=c$a,this._src=c$a,this._image=new c$p.window.Image,c$b&&(c$b.onload&&(this.onload=c$b.onload),c$b.onerror&&(this.onerror=c$b.onerror),c$b.onCreate&&c$b.onCreate(this)),this._image.crossOrigin=c$a&&0==c$a.indexOf("data:")?null:"",c$a&&(this._image.src=c$a);else if(c$a instanceof ArrayBuffer){this._src=c$b,this._url=this._src;var c$i=new c$k(c$a);c$i.readUTFBytes(4),c$i.readUTFBytes(2),c$i.getInt16();c$i.endian="bigEndian",this._w=c$i.getInt16(),this._h=c$i.getInt16();c$i.getInt16(),c$i.getInt16();this._image=new Uint8Array(c$a,c$i.pos),this._format=c$wa.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,c$Q.enabled&&this._w<c$Q.atlasLimitWidth&&this._h<c$Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(c$a instanceof Uint8Array))return this._src=c$b,this._url=this._src,this._image=c$a.source||c$a,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=c$b,this._url=this._src,this._w=c$g,this._h=c$h,this._image=c$a,this._format=0===c$c?c$a.byteLength/(c$g*c$h)==4?6408:6407:c$c}this._$5__enableMerageInAtlas=!0}}c$o(c$j,"laya.webgl.resource.WebGLImage",c$r);var c$b=c$j.prototype;return c$y.imps(c$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),c$b._init_=function(c$a,c$b){},c$b._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var c$a=c$wa.mainContext,c$b=this._source=c$a.createTexture(),c$c=c$xa.curBindTexTarget,c$d=c$xa.curBindTexValue;c$xa.bindTexture(c$a,3553,c$b);var c$g=this.minFifter,c$h=this.magFifter,c$i=this.repeat?10497:33071,c$j=c$m.isPOT(this._w,this._h),c$k=!1;switch(c$j?(this.mipmap?-1!==c$g||(c$g=9987):-1!==c$g||(c$g=9729),-1!==c$h||(c$h=9729),c$a.texParameteri(3553,10241,c$g),c$a.texParameteri(3553,10240,c$h),c$a.texParameteri(3553,10242,c$i),c$a.texParameteri(3553,10243,c$i),this.mipmap&&c$a.generateMipmap(3553)):(-1!==c$g||(c$g=9729),-1!==c$h||(c$h=9729),c$a.texParameteri(3553,10241,c$g),c$a.texParameteri(3553,10240,c$h),c$a.texParameteri(3553,10242,33071),c$a.texParameteri(3553,10243,33071)),c$a.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&c$a.pixelStorei(c$a.UNPACK_ALIGNMENT,1),c$a.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&c$a.pixelStorei(c$a.UNPACK_ALIGNMENT,1),c$a.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:c$k=!0,c$a.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case c$wa.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:c$k=!0,c$a.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}c$a.pixelStorei(37441,!1),c$c&&c$d&&c$xa.bindTexture(c$a,c$c,c$d),this.uri||(this.uri=this._url),c$k?this.memorySize=this._image.length:c$j&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},c$b.recreateResource=function(){var c$a=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var c$b=this;this._image=new c$p.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(c$b._needReleaseAgain)return c$b._needReleaseAgain=!1,c$b._image.onload=null,void(c$b._image=null);c$b._allowMerageInAtlas&&c$b._enableMerageInAtlas?(c$a.memorySize=0,c$a._recreateLock=!1):c$b._createWebGlTexture(),c$b.completeCreate()},this._image.src=this._src}},c$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&c$wa.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},c$b.onresize=function(){this._w=this._image.width,this._h=this._image.height,c$Q.enabled&&this._w<c$Q.atlasLimitWidth&&this._h<c$Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},c$b.clearAtlasSource=function(){this._image=null},c$d(0,c$b,"format",function(){return this._format}),c$d(0,c$b,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(c$a){this._$5__enableMerageInAtlas=c$a}),c$d(0,c$b,"mipmap",function(){return this._mipmap}),c$d(0,c$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),c$d(0,c$b,"atlasSource",function(){return this._image}),c$d(0,c$b,"onload",null,function(c$a){var c$b=this;this._onload=c$a,this._image&&(this._image.onload=null!=this._onload?function(){c$b.onresize(),c$b._onload()}:null)}),c$d(0,c$b,"onerror",null,function(c$a){var c$b=this;this._onerror=c$a,this._image&&(this._image.onerror=null!=this._onerror?function(){c$b._onerror()}:null)}),c$j}();c$y.__init([c$pa,c$P,c$za,c$va])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(c$a,c$b){"use strict";for(var c$c in Object.defineProperty(c$b,"__esModule",{value:!0}),Laya){var c$d=Laya[c$c];c$d&&c$d.__isclass&&(c$b[c$c]=c$d)}}),function(c$h,c$a,c$d){c$d.un,c$d.uns;var c$g=c$d.static,c$i=c$d.class,c$j=c$d.getset,c$k=(c$d.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),c$q=laya.utils.ClassUtils,c$n=(laya.events.Event,laya.utils.HTMLChar),c$l=laya.net.Loader,c$m=(laya.display.Node,laya.maths.Rectangle),c$o=laya.renders.Render,c$p=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),c$r=laya.utils.Stat,c$L=laya.display.Text,c$s=laya.resource.Texture,c$t=laya.net.URL,c$u=laya.utils.Utils,c$v=function(){function c$p(){}return c$i(c$p,"laya.html.utils.HTMLParse"),c$p.parse=function(c$a,c$b,c$c){c$b=(c$b="<root>"+(c$b=c$b.replace(/<br>/g,"<br/>"))+"</root>").replace(c$p.spacePattern,c$p.char255);var c$d=c$u.parseXMLFromString(c$b);c$p._parseXML(c$a,c$d.childNodes[0].childNodes,c$c)},c$p._parseXML=function(c$a,c$b,c$c,c$d){var c$g=0,c$h=0;if(c$b.join||c$b.item)for(c$g=0,c$h=c$b.length;c$g<c$h;++c$g)c$p._parseXML(c$a,c$b[c$g],c$c,c$d);else{var c$i,c$j,c$k;if(3==c$b.nodeType)return void(c$a instanceof laya.html.dom.HTMLDivElement?(null==c$b.nodeName&&(c$b.nodeName="#text"),c$j=c$b.nodeName.toLowerCase(),0<(c$k=c$b.textContent.replace(/^\s+|\s+$/g,"")).length&&(c$i=c$q.getInstance(c$j))&&(c$a.addChild(c$i),c$i.innerTEXT=c$k.replace(c$p.char255AndOneSpacePattern," "))):0<(c$k=c$b.textContent.replace(/^\s+|\s+$/g,"")).length&&(c$a.innerTEXT=c$k.replace(c$p.char255AndOneSpacePattern," ")));if("#comment"==(c$j=c$b.nodeName.toLowerCase()))return;if(c$i=c$q.getInstance(c$j)){(c$i=c$a.addChild(c$i)).URI=c$c,c$i.href=c$d;var c$l=c$b.attributes;if(c$l&&0<c$l.length)for(c$g=0,c$h=c$l.length;c$g<c$h;++c$g){var c$m=c$l[c$g],c$n=c$m.nodeName,c$o=c$m.value;c$i._setAttributes(c$n,c$o)}c$p._parseXML(c$i,c$b.childNodes,c$c,c$i.href)}else c$p._parseXML(c$a,c$b.childNodes,c$c,c$d)}},c$p.char255=String.fromCharCode(255),c$p.spacePattern=/&nbsp;|&#160;/g,c$p.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),c$p}(),c$w=function(){function c$K(){}return c$i(c$K,"laya.html.utils.Layout"),c$K.later=function(c$a){null==c$K._will&&(c$K._will=[],c$d.stage.frameLoop(1,null,function(){if(!(c$K._will.length<1)){for(var c$a=0;c$a<c$K._will.length;c$a++)laya.html.utils.Layout.layout(c$K._will[c$a]);c$K._will.length=0}})),c$K._will.push(c$a)},c$K.layout=function(c$a){if(!c$a||!c$a._style)return null;if(0==(512&c$a._style._type))return null;c$a.getStyle()._type&=-513;var c$b=c$K._multiLineLayout(c$a);return c$o.isConchApp&&c$a.layaoutCallNative&&c$a.layaoutCallNative(),c$b},c$K._multiLineLayout=function(c$a){if(c$L.RightToLeft)return c$K._multiLineLayout2(c$a);var c$b=new Array;c$a._addChildsToLayout(c$b);var c$c,c$d,c$g,c$h,c$i,c$j=0,c$k=c$b.length,c$l=c$a._getCSSStyle(),c$m=c$l.letterSpacing,c$n=c$l.leading,c$o=c$l.lineHeight,c$p=c$l._widthAuto()||!c$l.wordWrap,c$q=c$p?999999:c$a.width,c$r=(c$a.height,0),c$s=c$l.italic?c$l.fontSize/3:0,c$t=c$l._getAlign(),c$u=c$l._getValign(),c$v=0!==c$u||0!==c$t||0!=c$o,c$w=0,c$x=0,c$y=0,c$z=0,c$A=new Array,c$B=c$A[0]=new c$M,c$C=!1,c$D=!1;c$B.h=0,c$l.italic&&(c$q-=c$l.fontSize/3);var c$E=0,c$F=!0;function c$G(){c$B.y=c$x,c$x+=c$B.h+c$n,0==c$B.h&&(c$x+=c$o),c$B.mWidth=c$E,c$E=0,c$B=new c$M,c$A.push(c$B),c$B.h=0,c$C=!(c$F=!(c$w=0))}for(c$j=0;c$j<c$k;c$j++)if(null!=(c$c=c$b[c$j]))if(c$F=!1,c$c instanceof laya.html.dom.HTMLBrElement)c$G(),c$B.y=c$x;else{if(c$c._isChar()){if((c$h=c$c).isWord)c$C=c$D||"\n"===c$h.char,c$B.wordStartIndex=c$B.elements.length;else{if(c$y=c$h.width+c$h.style.letterSpacin,0<c$A.length&&c$q<c$w+c$y&&0<c$B.wordStartIndex){var c$H;c$H=c$B.elements.length-c$B.wordStartIndex+1,c$B.elements.length=c$B.wordStartIndex,c$j-=c$H,c$G();continue}c$C=!1,c$E+=c$h.width}c$y=c$h.width+c$m,c$z=c$h.height,c$D=!1,(c$C=c$C||c$q<c$w+c$y)&&c$G(),c$B.minTextHeight=Math.min(c$B.minTextHeight,c$c.height)}else c$d=c$c._getCSSStyle(),c$i=c$c,c$g=c$d.padding,0===c$d._getCssFloat()||(c$v=!0),c$C=c$D||c$d.lineElement,c$y=c$i.width*c$i._style._tf.scaleX+c$g[1]+c$g[3]+c$m,c$z=c$i.height*c$i._style._tf.scaleY+c$g[0]+c$g[2],c$D=c$d.lineElement,(c$C=c$C||c$q<c$w+c$y&&c$d.wordWrap)&&c$G();c$B.elements.push(c$c),c$B.h=Math.max(c$B.h,c$z),c$c.x=c$w,c$c.y=c$x,c$w+=c$y,c$B.w=c$w-c$m,c$B.y=c$x,c$r=Math.max(c$w+c$s,c$r)}else c$F||(c$w+=c$K.DIV_ELEMENT_PADDING),c$B.wordStartIndex=c$B.elements.length;if(c$x=c$B.y+c$B.h,c$v){var c$I=0,c$J=c$q;for(c$p&&0<c$a.width&&(c$J=c$a.width),c$j=0,c$k=c$A.length;c$j<c$k;c$j++)c$A[c$j].updatePos(0,c$J,c$j,c$I,c$t,c$u,c$o),c$I+=Math.max(c$o,c$A[c$j].h+c$n);c$x=c$I}return c$p&&(c$a.width=c$r),c$x>c$a.height&&(c$a.height=c$x),[c$r,c$x]},c$K._multiLineLayout2=function(c$a){var c$b=new Array;c$a._addChildsToLayout(c$b);var c$c,c$d,c$g,c$h,c$i,c$j=0,c$k=c$b.length,c$l=c$a._getCSSStyle(),c$m=c$l.letterSpacing,c$n=c$l.leading,c$o=c$l.lineHeight,c$p=c$l._widthAuto()||!c$l.wordWrap,c$q=c$p?999999:c$a.width,c$r=(c$a.height,0),c$s=c$l.italic?c$l.fontSize/3:0,c$t=2-c$l._getAlign(),c$u=c$l._getValign(),c$v=0!==c$u||0!=c$t||0!=c$o,c$w=0,c$x=0,c$y=0,c$z=0,c$A=new Array,c$B=c$A[0]=new c$M,c$C=!1,c$D=!1;c$B.h=0,c$l.italic&&(c$q-=c$l.fontSize/3);var c$E=0,c$F=!0;function c$G(){c$B.y=c$x,c$x+=c$B.h+c$n,0==c$B.h&&(c$x+=c$o),c$B.mWidth=c$E,c$E=0,c$B=new c$M,c$A.push(c$B),c$B.h=0,c$C=!(c$F=!(c$w=0))}for(c$j=0;c$j<c$k;c$j++)if(null!=(c$c=c$b[c$j]))if(c$F=!1,c$c instanceof laya.html.dom.HTMLBrElement)c$G(),c$B.y=c$x;else{if(c$c._isChar()){if((c$h=c$c).isWord)c$C=c$D||"\n"===c$h.char,c$B.wordStartIndex=c$B.elements.length;else{if(0<c$A.length&&c$q<c$w+c$y&&0<c$B.wordStartIndex){var c$H;c$H=c$B.elements.length-c$B.wordStartIndex+1,c$B.elements.length=c$B.wordStartIndex,c$j-=c$H,c$G();continue}c$C=!1,c$E+=c$h.width}c$y=c$h.width+c$m,c$z=c$h.height,c$D=!1,(c$C=c$C||c$q<c$w+c$y)&&c$G(),c$B.minTextHeight=Math.min(c$B.minTextHeight,c$c.height)}else c$d=c$c._getCSSStyle(),c$i=c$c,c$g=c$d.padding,0===c$d._getCssFloat()||(c$v=!0),c$C=c$D||c$d.lineElement,c$y=c$i.width*c$i._style._tf.scaleX+c$g[1]+c$g[3]+c$m,c$z=c$i.height*c$i._style._tf.scaleY+c$g[0]+c$g[2],c$D=c$d.lineElement,(c$C=c$C||c$q<c$w+c$y&&c$d.wordWrap)&&c$G();c$B.elements.push(c$c),c$B.h=Math.max(c$B.h,c$z),c$c.x=c$w,c$c.y=c$x,c$w+=c$y,c$B.w=c$w-c$m,c$B.y=c$x,c$r=Math.max(c$w+c$s,c$r)}else c$F||(c$w+=c$K.DIV_ELEMENT_PADDING),c$B.wordStartIndex=c$B.elements.length;if(c$x=c$B.y+c$B.h,c$v){var c$I=0,c$J=c$q;for(c$j=0,c$k=c$A.length;c$j<c$k;c$j++)c$A[c$j].updatePos(0,c$J,c$j,c$I,c$t,c$u,c$o),c$I+=Math.max(c$o,c$A[c$j].h+c$n);c$x=c$I}for(c$p&&(c$a.width=c$r),c$x>c$a.height&&(c$a.height=c$x),c$j=0,c$k=c$A.length;c$j<c$k;c$j++)c$A[c$j].revertOrder(c$q);return[c$r,c$x]},c$K._will=null,c$K.DIV_ELEMENT_PADDING=0,c$K}(),c$M=function(){function c$a(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}c$i(c$a,"laya.html.utils.LayoutLine");var c$b=c$a.prototype;return c$b.updatePos=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){var c$j,c$k=0;0<this.elements.length&&(c$k=(c$j=this.elements[this.elements.length-1]).x+c$j.width-this.elements[0].x);var c$l=0,c$m=NaN;1===c$g&&(c$l=(c$b-c$k)/2),2===c$g&&(c$l=c$b-c$k),0===c$i||0!=c$h||(c$h=1);for(var c$n=0,c$o=this.elements.length;c$n<c$o;c$n++){var c$p=(c$j=this.elements[c$n])._getCSSStyle();switch(0!==c$l&&(c$j.x+=c$l),c$p._getValign()){case 0:c$j.y=c$d;break;case 1:var c$q=0;99999!=this.minTextHeight&&(c$q=this.minTextHeight);var c$r=(c$q+c$i)/2;c$r=Math.max(c$r,this.h),c$m=(laya.html.dom.HTMLImageElement,c$d+c$r-c$j.height),c$j.y=c$m;break;case 2:c$j.y=c$d+(c$i-c$j.height)}}},c$b.revertOrder=function(c$a){var c$b;if(0<this.elements.length){var c$c,c$d=0;for(c$c=this.elements.length,c$d=0;c$d<c$c;c$d++)(c$b=this.elements[c$d]).x=c$a-c$b.x-c$b.width}},c$a}(),c$x=function(c$c){function c$b(){this.URI=null,this._href=null,c$b.__super.call(this),this._text=c$b._EMPTYTEXT,this.setStyle(new c$k(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}c$i(c$b,"laya.html.dom.HTMLElement",c$c);var c$a=c$b.prototype;return c$a.layaoutCallNative=function(){var c$a=0;if(this._childs&&0<(c$a=this._childs.length))for(var c$b=0;c$b<c$a;c$b++)this._childs[c$b].layaoutCallNative&&this._childs[c$b].layaoutCallNative();var c$c=this._getWords();c$c?laya.html.dom.HTMLElement.fillWords(this,c$c,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},c$a.appendChild=function(c$a){return this.addChild(c$a)},c$a._getWords2=function(){var c$a=this._text.text;if(!c$a||0===c$a.length)return null;var c$b,c$c,c$d=0,c$g=0;if(this._text.drawWords)c$c=this._text.drawWords;else{for(c$g=(c$b=c$a.split(" ")).length-1,c$c=[],c$d=0;c$d<c$g;c$d++)c$c.push(c$b[c$d]," ");0<=c$g&&c$c.push(c$b[c$g]),this._text.drawWords=c$c}var c$h,c$i=this._text.words;if(c$i&&c$i.length===c$c.length)return c$i;null===c$i&&(this._text.words=c$i=[]),c$i.length=c$c.length;var c$j=this.style,c$k=c$j.font;for(c$d=0,c$g=c$c.length;c$d<c$g;c$d++){c$h=c$u.measureText(c$c[c$d],c$k);var c$l=c$i[c$d]=new c$n(c$c[c$d],c$h.width,c$h.height||c$j.fontSize,c$j);if(1<c$l.char.length&&(c$l.charNum=c$l.char),this.href){var c$m=new c$p;this.addChild(c$m),c$l.setSprite(c$m)}}return c$i},c$a._getWords=function(){if(!c$L.CharacterCache)return this._getWords2();var c$a=this._text.text;if(!c$a||0===c$a.length)return null;var c$b,c$c=this._text.words;if(c$c&&c$c.length===c$a.length)return c$c;null===c$c&&(this._text.words=c$c=[]),c$c.length=c$a.length;for(var c$d=this.style,c$g=c$d.font,c$h=0,c$i=c$a.length;c$h<c$i;c$h++)if(c$b=c$u.measureText(c$a.charAt(c$h),c$g)){var c$j=c$c[c$h]=new c$n(c$a.charAt(c$h),c$b.width,c$b.height||c$d.fontSize,c$d);if(this.href){var c$k=new c$p;this.addChild(c$k),c$j.setSprite(c$k)}}else console.warn("_getWords size is null"+c$a.charAt(c$h),c$g);return c$c},c$a.showLinkSprite=function(){var c$a=this._text.words;if(c$a)for(var c$b,c$c,c$d=[],c$g=0;c$g<c$a.length;c$g++)c$c=c$a[c$g],(c$b=new c$p).graphics.drawRect(0,0,c$c.width,c$c.height,"#ff0000"),c$b.width=c$c.width,c$b.height=c$c.height,this.addChild(c$b),c$d.push(c$b)},c$a._layoutLater=function(){var c$a=this.style;512&c$a._type||(c$a.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&c$a.block?(c$w.later(this),c$a._type|=512):this.parent&&this.parent._layoutLater())},c$a._setAttributes=function(c$a,c$b){switch(c$a){case"style":return void this.style.cssText(c$b);case"class":return void(this.className=c$b)}c$c.prototype._setAttributes.call(this,c$a,c$b)},c$a.updateHref=function(){if(null!=this._href){var c$a=this._getWords();if(c$a)for(var c$b,c$c,c$d=0;c$d<c$a.length;c$d++)(c$c=(c$b=c$a[c$d]).getSprite())&&(c$c.size(c$b.width,c$b.height),c$c.on("click",this,this.onLinkHandler))}},c$a.onLinkHandler=function(c$a){switch(c$a.type){case"click":for(var c$b=this;c$b;)c$b.event("link",[this.href]),c$b=c$b.parent}},c$a.formatURL=function(c$a){return this.URI?c$t.formatURL(c$a,this.URI?this.URI.path:null):c$a},c$j(0,c$a,"href",function(){return this._href},function(c$a){null!=(this._href=c$a)&&(this._getCSSStyle().underLine=1,this.updateHref())}),c$j(0,c$a,"color",null,function(c$a){this.style.color=c$a}),c$j(0,c$a,"onClick",null,function(c$a){c$d._runScript("fn=function(event){"+c$a+";}"),this.on("click",this,void 0)}),c$j(0,c$a,"id",null,function(c$a){c$y.document.setElementById(c$a,this)}),c$j(0,c$a,"innerTEXT",function(){return this._text.text},function(c$a){this.text=c$a}),c$j(0,c$a,"style",function(){return this._style}),c$j(0,c$a,"text",function(){return this._text.text},function(c$a){this._text==c$b._EMPTYTEXT?this._text={text:c$a,words:null}:(this._text.text=c$a,this._text.words&&(this._text.words.length=0)),c$o.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),c$j(0,c$a,"parent",c$c.prototype._$get_parent,function(c$a){if(c$a instanceof laya.html.dom.HTMLElement){var c$b=c$a;this.URI||(this.URI=c$b.URI),this.style.inherit(c$b.style)}c$d.superSet(c$p,this,"parent",c$a)}),c$j(0,c$a,"className",null,function(c$a){this.style.attrs(c$y.document.styleSheets["."+c$a])}),c$b.fillWords=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){c$a.graphics.clear();for(var c$j=0,c$k=c$b.length;c$j<c$k;c$j++){var c$l=c$b[c$j];c$a.graphics.fillText(c$l.char,c$l.x+c$c,c$l.y+c$d,c$g,c$h,"left",c$i)}},c$b._EMPTYTEXT={text:null,words:null},c$b}(c$p),c$b=(function(c$a){function c$b(){c$b.__super.call(this),this.style.lineElement=!0,this.style.block=!0}c$i(c$b,"laya.html.dom.HTMLBrElement",c$x)}(),function(c$a){function c$b(){this.contextHeight=NaN,this.contextWidth=NaN,c$b.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}c$i(c$b,"laya.html.dom.HTMLDivElement",c$a);var c$c=c$b.prototype;return c$c.appendHTML=function(c$a){c$v.parse(this,c$a,this.URI),this.layout()},c$c._addChildsToLayout=function(c$b){var c$a=this._getWords();if(null==c$a&&0==this._childs.length)return!1;c$a&&c$a.forEach(function(c$a){c$b.push(c$a)});for(var c$c=!0,c$d=0,c$g=this._childs.length;c$d<c$g;c$d++){var c$h=this._childs[c$d];c$c?c$c=!1:c$b.push(null),c$h._addToLayout(c$b)}return!0},c$c._addToLayout=function(c$a){this.layout()},c$c.layout=function(){if(this.style){this.style._type|=512;var c$a=c$w.layout(this);if(c$a){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new c$m);var c$b=this._$P.mHtmlBounds;c$b.x=c$b.y=0,c$b.width=this.contextWidth=c$a[0],c$b.height=this.contextHeight=c$a[1],this.setBounds(c$b)}}},c$j(0,c$c,"height",function(){return this._height?this._height:this.contextHeight},c$a.prototype._$set_height),c$j(0,c$c,"innerHTML",null,function(c$a){this.destroyChildren(),this.appendHTML(c$a)}),c$j(0,c$c,"width",function(){return this._width?this._width:this.contextWidth},function(c$a){var c$b=!1;c$b=0===c$a?c$a!=this._width:c$a!=this.width,c$d.superSet(c$x,this,"width",c$a),c$b&&this.layout()}),c$b}(c$x)),c$y=function(c$a){function c$b(){this.all=new Array,this.styleSheets=c$k.styleSheets,c$b.__super.call(this)}c$i(c$b,"laya.html.dom.HTMLDocument",c$x);var c$c=c$b.prototype;return c$c.getElementById=function(c$a){return this.all[c$a]},c$c.setElementById=function(c$a,c$b){this.all[c$a]=c$b},c$g(c$b,["document",function(){return this.document=new c$b}]),c$b}();(function(c$a){function c$b(){this._tex=null,this._url=null,this._renderArgs=[],c$b.__super.call(this),this.style.block=!0}c$i(c$b,"laya.html.dom.HTMLImageElement",c$x);var c$c=c$b.prototype;c$c._addToLayout=function(c$a){!this._style.absolute&&c$a.push(this)},c$c.render=function(c$a,c$b,c$c){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(c$r.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,c$a.ctx.drawTexture2(c$b,c$c,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},c$c.layaoutCallNative=function(){var c$a=0;if(this._childs&&0<(c$a=this._childs.length))for(var c$b=0;c$b<c$a;c$b++)this._childs[c$b].layaoutCallNative&&this._childs[c$b].layaoutCallNative()},c$j(0,c$c,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(c$a){this._width!==c$a&&(this._width=c$a,this._style.width=c$a,this.repaint())}),c$j(0,c$c,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(c$a){this._height!==c$a&&(this._height=c$a,this._style.height=c$a,this.repaint())}),c$c.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),c$l.clearCache(this,this._url),this._tex=null),c$x.prototype.destroy.call(this)},c$c.onloaded=function(){var c$a=this._style;c$a&&!c$a.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),c$a&&!c$a.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),c$o.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},c$c._loadImageComplete=function(c$a,c$b,c$c){if(!this._destroyed)if(null!=c$c)if(c$c instanceof ArrayBuffer){var c$d=new DataView(c$c);new laya.webgl.resource.WebGLImage(new Uint8Array(c$c,8),c$a,0,!1,c$d.getUint32(0),c$d.getUint32(4));this.onloaded()}else if(c$c instanceof c$s)c$l.imgMgrSet[c$a]=c$b,c$h.imgMgrLock(c$a,c$l.imgMgrSet[c$a]),this._url=c$a,this._tex=c$c,c$l.keepCache(this,c$a),c$l.cacheRes(c$a,this._tex),this.onloaded();else{var c$g=-1!=c$a.indexOf(".png",c$a.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(c$c,c$a,c$g,!1,c$c.width,c$c.height);this.onloaded()}else this.event("error","Load image failed")},c$j(0,c$c,"src",null,function(c$a){(c$a=this.formatURL(c$a),this._url!=c$a)&&(null!=this._tex&&(c$l.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=c$a,(this._tex=c$l.getRes(c$a))?(c$l.keepCache(this,c$a),this.onloaded()):c$h.imgMgrLoad(c$a,this._loadImageComplete.bind(this),2,!1))})})(),function(c$a){function c$b(){this.type=null,c$b.__super.call(this),this.visible=!1}c$i(c$b,"laya.html.dom.HTMLLinkElement",c$a);var c$c=c$b.prototype;c$c._onload=function(c$a){switch(this.type){case"text/css":c$k.parseCSS(c$a,this.URI)}},c$j(0,c$c,"href",c$a.prototype._$get_href,function(c$a){var c$b=this;c$a=this.formatURL(c$a),this.URI=new c$t(c$a);var c$c=new c$l;c$c.once("complete",null,function(c$a){c$b._onload(c$a)}),c$c.load(c$a,"text")}),c$b._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(c$x),function(c$a){function c$b(){c$b.__super.call(this),this.visible=!1}c$i(c$b,"laya.html.dom.HTMLStyleElement",c$a),c$j(0,c$b.prototype,"text",c$a.prototype._$get_text,function(c$a){c$k.parseCSS(c$a,null)})}(c$x),function(c$a){function c$b(){c$b.__super.call(this),this._getCSSStyle().valign="middle"}c$i(c$b,"laya.html.dom.HTMLIframeElement",c$a),c$j(0,c$b.prototype,"href",c$a.prototype._$get_href,function(c$c){var c$d=this;c$c=this.formatURL(c$c);var c$a=new c$l;c$a.once("complete",null,function(c$a){var c$b=c$d.URI;c$d.URI=new c$t(c$c),c$d.innerHTML=c$a,!c$b||(c$d.URI=c$b)}),c$a.load(c$c,"text")})}(c$b)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(c$a,c$b){"use strict";for(var c$c in Object.defineProperty(c$b,"__esModule",{value:!0}),Laya){var c$d=Laya[c$c];c$d&&c$d.__isclass&&(c$b[c$c]=c$d)}}),function(c$a,c$b,c$r){c$r.un,c$r.uns;var c$d=c$r.static,c$h=c$r.class,c$g=c$r.getset,c$c=(c$r.__newvec,laya.display.Animation),c$s=(laya.utils.Browser,laya.utils.ClassUtils),c$i=laya.filters.ColorFilter,c$j=laya.utils.Ease,c$k=laya.events.Event,c$l=(laya.events.EventDispatcher,laya.display.css.Font),c$m=laya.display.FrameAnimation,c$n=laya.display.Graphics,c$o=laya.utils.Handler,c$p=laya.display.Input,c$u=laya.net.Loader,c$q=(laya.display.Node,laya.maths.Point),c$t=laya.maths.Rectangle,c$v=laya.renders.Render,c$w=laya.display.Sprite,c$x=laya.display.Text,c$y=laya.resource.Texture,c$z=laya.utils.Tween,c$A=laya.utils.Utils,c$B=laya.utils.WeakObject;c$r.interface("laya.ui.IItem"),c$r.interface("laya.ui.ISelect"),c$r.interface("laya.ui.IRender"),c$r.interface("laya.ui.IComponent"),c$r.interface("laya.ui.IBox","IComponent");var c$C=function(){function c$a(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return c$h(c$a,"laya.ui.LayoutStyle"),c$d(c$a,["EMPTY",function(){return this.EMPTY=new c$a}]),c$a}(),c$D=function(){function c$a(){}return c$h(c$a,"laya.ui.Styles"),c$a.labelColor="#000000",c$a.buttonStateNum=3,c$a.scrollBarMinNum=15,c$a.scrollBarDelayTime=500,c$d(c$a,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),c$a}(),c$E=function(){function c$g(){}return c$h(c$g,"laya.ui.UIUtils"),c$g.fillArray=function(c$a,c$b,c$c){var c$d=c$a.concat();if(c$b)for(var c$g=c$b.split(","),c$h=0,c$i=Math.min(c$d.length,c$g.length);c$h<c$i;c$h++){var c$j=c$g[c$h];c$d[c$h]="true"==c$j||"false"!=c$j&&c$j,null!=c$c&&(c$d[c$h]=c$c(c$j))}return c$d},c$g.toColor=function(c$a){return c$A.toHexColor(c$a)},c$g.gray=function(c$a,c$b){void 0===c$b&&(c$b=!0),c$b?c$g.addFilter(c$a,c$g.grayFilter):c$g.clearFilter(c$a,c$i)},c$g.addFilter=function(c$a,c$b){var c$c=c$a.filters||[];c$c.push(c$b),c$a.filters=c$c},c$g.clearFilter=function(c$a,c$b){var c$c=c$a.filters;if(null!=c$c&&0<c$c.length){for(var c$d=c$c.length-1;-1<c$d;c$d--){var c$g=c$c[c$d];c$r.__typeof(c$g,c$b)&&c$c.splice(c$d,1)}c$a.filters=c$c}},c$g._getReplaceStr=function(c$a){return c$g.escapeSequence[c$a]},c$g.adptString=function(c$a){return c$a.replace(/\\(\w)/g,c$g._getReplaceStr)},c$g.getBindFun=function(c$a){var c$b=c$g._funMap.get(c$a);if(null==c$b){var c$c='"'+c$a+'"',c$d="(function(data){if(data==null)return;with(data){try{\nreturn "+(c$c=c$c.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";c$b=c$r._runScript(c$d),c$g._funMap.set(c$a,c$b)}return c$b},c$d(c$g,["grayFilter",function(){return this.grayFilter=new c$i([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new c$B}]),c$g}(),c$F=function(){function c$a(){}return c$h(c$a,"UIConfig"),c$a.touchScrollEnable=!0,c$a.mouseWheelEnable=!0,c$a.showButtons=!0,c$a.popupBgColor="#000000",c$a.popupBgAlpha=.5,c$a.closeDialogOnSide=!0,c$a}(),c$G=function(c$c){function c$t(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,c$t.__super.call(this),this._weakKeys=[]}c$h(c$t,"laya.ui.AutoBitmap",c$c);var c$a=c$t.prototype;return c$a.destroy=function(){if(c$u.clearObject(this,this._weakKey),this._weakKeys){for(var c$a=0,c$b=this._weakKeys.length;c$a<c$b;++c$a)c$u.clearObject(this,this._weakKeys[c$a]);this._weakKeys=null}c$c.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},c$a._setChanged=function(){this._isChanged||(this._isChanged=!0,c$r.timer.callLater(this,this.changeSource))},c$a.changeSource=function(){this._isChanged=!1;var c$a=this._source;if(c$a&&c$a.bitmap){var c$b=this.width,c$c=this.height,c$d=this._sizeGrid,c$g=c$a.sourceWidth,c$h=c$a.sourceHeight;if(!c$d||c$g===c$b&&c$h===c$c)this.cleanByTexture(c$a,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,c$b,c$c);else{c$u.clearObject(this,this._weakKey),c$a.$_GID||(c$a.$_GID=c$A.getGID());var c$i=c$a.$_GID+"."+c$b+"."+c$c+"."+c$d.join("."),c$j=c$u.findObject(c$i);if(c$A.isOKCmdList(c$j))return this._weakKey=c$i,c$u.keepObject(this,this._weakKey),void(this.cmds=c$j);this.clear();var c$k,c$l,c$m=c$d[0],c$n=c$d[1],c$o=c$d[2],c$p=c$d[3],c$q=c$d[4],c$r=!1;if(c$b==c$g&&(c$p=c$n=0),c$c==c$h&&(c$m=c$o=0),c$b<c$p+c$n){var c$s=c$b;c$r=!0,c$b=c$p+c$n,this.save(),this.clipRect(0,0,c$s,c$c)}c$p&&c$m&&(c$k=c$t.getTexture(c$a,0,0,c$p,c$m),c$l=this._weakKeys[0],c$k?(c$l!=c$k.weakKey&&(c$u.clearObject(this,c$l),c$u.keepObject(this,c$k.weakKey),this._weakKeys[0]=c$k.weakKey),this.drawTexture(c$k,0,0,c$p,c$m)):(c$u.clearObject(this,c$l),this._weakKeys[0]="")),c$n&&c$m&&(c$k=c$t.getTexture(c$a,c$g-c$n,0,c$n,c$m),c$l=this._weakKeys[1],c$k?(c$l!=c$k.weakKey&&(c$u.clearObject(this,c$l),c$u.keepObject(this,c$k.weakKey),this._weakKeys[1]=c$k.weakKey),this.drawTexture(c$k,c$b-c$n,0,c$n,c$m)):(c$u.clearObject(this,c$l),this._weakKeys[1]="")),c$p&&c$o&&(c$k=c$t.getTexture(c$a,0,c$h-c$o,c$p,c$o),c$l=this._weakKeys[2],c$k?(c$l!=c$k.weakKey&&(c$u.clearObject(this,c$l),c$u.keepObject(this,c$k.weakKey),this._weakKeys[2]=c$k.weakKey),this.drawTexture(c$k,0,c$c-c$o,c$p,c$o)):(c$u.clearObject(this,c$l),this._weakKeys[2]="")),c$n&&c$o&&(c$k=c$t.getTexture(c$a,c$g-c$n,c$h-c$o,c$n,c$o),c$l=this._weakKeys[3],c$k?(c$l!=c$k.weakKey&&(c$u.clearObject(this,c$l),c$u.keepObject(this,c$k.weakKey),this._weakKeys[3]=c$k.weakKey),this.drawTexture(c$k,c$b-c$n,c$c-c$o,c$n,c$o)):(c$u.clearObject(this,c$l),this._weakKeys[3]="")),c$m&&(c$k=c$t.getTexture(c$a,c$p,0,c$g-c$p-c$n,c$m),c$l=this._weakKeys[4],c$k?(c$l!=c$k.weakKey&&(c$u.clearObject(this,c$l),c$u.keepObject(this,c$k.weakKey),this._weakKeys[4]=c$k.weakKey),this.drawBitmap(c$q,c$k,c$p,0,c$b-c$p-c$n,c$m)):(c$u.clearObject(this,c$l),this._weakKeys[4]="")),c$o&&(c$k=c$t.getTexture(c$a,c$p,c$h-c$o,c$g-c$p-c$n,c$o),c$l=this._weakKeys[5],c$k?(c$l!=c$k.weakKey&&(c$u.clearObject(this,c$l),c$u.keepObject(this,c$k.weakKey),this._weakKeys[5]=c$k.weakKey),this.drawBitmap(c$q,c$k,c$p,c$c-c$o,c$b-c$p-c$n,c$o)):(c$u.clearObject(this,c$l),this._weakKeys[5]="")),c$p&&(c$k=c$t.getTexture(c$a,0,c$m,c$p,c$h-c$m-c$o),c$l=this._weakKeys[6],c$k?(c$l!=c$k.weakKey&&(c$u.clearObject(this,c$l),c$u.keepObject(this,c$k.weakKey),this._weakKeys[6]=c$k.weakKey),this.drawBitmap(c$q,c$k,0,c$m,c$p,c$c-c$m-c$o)):(c$u.clearObject(this,c$l),this._weakKeys[6]="")),c$n&&(c$k=c$t.getTexture(c$a,c$g-c$n,c$m,c$n,c$h-c$m-c$o),c$l=this._weakKeys[7],c$k?(c$l!=c$k.weakKey&&(c$u.clearObject(this,c$l),c$u.keepObject(this,c$k.weakKey),this._weakKeys[7]=c$k.weakKey),this.drawBitmap(c$q,c$k,c$b-c$n,c$m,c$n,c$c-c$m-c$o)):(c$u.clearObject(this,c$l),this._weakKeys[7]="")),c$k=c$t.getTexture(c$a,c$p,c$m,c$g-c$p-c$n,c$h-c$m-c$o),c$l=this._weakKeys[8],c$k?(c$l!=c$k.weakKey&&(c$u.clearObject(this,c$l),c$u.keepObject(this,c$k.weakKey),this._weakKeys[8]=c$k.weakKey),this.drawBitmap(c$q,c$k,c$p,c$m,c$b-c$p-c$n,c$c-c$m-c$o)):(c$u.clearObject(this,c$l),this._weakKeys[8]=""),c$r&&this.restore(),this.autoCacheCmd&&!c$v.isConchApp&&(c$u.saveObject(c$i,this.cmds,null),this._weakKey=c$i,c$u.keepObject(this,this._weakKey))}this._repaint()}},c$a.drawBitmap=function(c$a,c$b,c$c,c$d,c$g,c$h){void 0===c$g&&(c$g=0),void 0===c$h&&(c$h=0),c$g<.1||c$h<.1||(!c$a||c$b.width==c$g&&c$b.height==c$h?this.drawTexture(c$b,c$c,c$d,c$g,c$h):this.fillTexture(c$b,c$c,c$d,c$g,c$h))},c$a.clear=function(c$a){void 0===c$a&&(c$a=!0),c$c.prototype.clear.call(this,!1)},c$g(0,c$a,"sizeGrid",function(){return this._sizeGrid},function(c$a){this._sizeGrid=c$a,this._setChanged()}),c$g(0,c$a,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(c$a){this._width!=c$a&&(this._width=c$a,this._setChanged())}),c$g(0,c$a,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(c$a){this._height!=c$a&&(this._height=c$a,this._setChanged())}),c$g(0,c$a,"source",function(){return this._source},function(c$a){c$a?(this._source=c$a,this._setChanged()):(this._source=null,this.clear())}),c$t.getTexture=function(c$a,c$b,c$c,c$d,c$g){c$d<=0&&(c$d=1),c$g<=0&&(c$g=1),c$a.$_GID||(c$a.$_GID=c$A.getGID());var c$h=c$a.$_GID+"."+c$b+"."+c$c+"."+c$d+"."+c$g,c$i=c$u.findObject(c$h);if((!c$i||!c$i.source)&&(c$i=c$y.createFromTexture(c$a,c$b,c$c,c$d,c$g))){if(c$a.alphaTexture){var c$j=c$a.width/c$a.alphaTexture.width;c$i.alphaTexture=c$y.createFromTexture(c$a.alphaTexture,c$b/c$j,c$c/c$j,c$d/c$j,c$g/c$j)}c$u.saveObject(c$h,c$i),c$i.weakKey=c$h}return c$i},c$t}(c$n),c$H=(function(c$a){function c$b(){c$b.__super.call(this)}c$h(c$b,"laya.ui.UIEvent",c$k),c$b.SHOW_TIP="showtip",c$b.HIDE_TIP="hidetip"}(),function(c$b){function c$a(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,c$a.__super.call(this),this._layout=c$C.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}c$h(c$a,"laya.ui.Component",c$b);var c$c=c$a.prototype;return c$r.imps(c$c,{"laya.ui.IComponent":!0}),c$c.destroy=function(c$a){void 0===c$a&&(c$a=!0),c$b.prototype.destroy.call(this,c$a),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},c$c.preinitialize=function(){},c$c.createChildren=function(){},c$c.initialize=function(){},c$c.callLater=function(c$a,c$b){c$r.timer.callLater(this,c$a,c$b)},c$c.runCallLater=function(c$a){c$r.timer.runCallLater(this,c$a)},c$c.commitMeasure=function(){},c$c.changeSize=function(){this.event("resize")},c$c.getLayout=function(){return this._layout===c$C.EMPTY&&(this._layout=new c$C),this._layout},c$c._setLayoutEnabled=function(c$a){this._layout&&this._layout.enable!=c$a&&(this._layout.enable=c$a,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},c$c.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},c$c.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},c$c.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},c$c.resetLayoutX=function(){var c$a=this._layout;if(isNaN(c$a.anchorX)||(this.pivotX=c$a.anchorX*this.width),this.layoutEnabled){var c$b=this.parent;c$b&&(isNaN(c$a.centerX)?isNaN(c$a.left)?isNaN(c$a.right)||(this.x=Math.round(c$b.width-this.displayWidth-c$a.right+this.pivotX*this.scaleX)):(this.x=Math.round(c$a.left+this.pivotX*this.scaleX),isNaN(c$a.right)||(this.width=(c$b._width-c$a.left-c$a.right)/(this.scaleX||.01))):this.x=Math.round(.5*(c$b.width-this.displayWidth)+c$a.centerX+this.pivotX*this.scaleX))}},c$c.resetLayoutY=function(){var c$a=this._layout;if(isNaN(c$a.anchorY)||(this.pivotY=c$a.anchorY*this.height),this.layoutEnabled){var c$b=this.parent;c$b&&(isNaN(c$a.centerY)?isNaN(c$a.top)?isNaN(c$a.bottom)||(this.y=Math.round(c$b.height-this.displayHeight-c$a.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(c$a.top+this.pivotY*this.scaleY),isNaN(c$a.bottom)||(this.height=(c$b._height-c$a.top-c$a.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(c$b.height-this.displayHeight)+c$a.centerY+this.pivotY*this.scaleY))}},c$c.onMouseOver=function(c$a){c$r.stage.event("showtip",this._toolTip)},c$c.onMouseOut=function(c$a){c$r.stage.event("hidetip",this._toolTip)},c$g(0,c$c,"displayWidth",function(){return this.width*this.scaleX}),c$g(0,c$c,"width",function(){return this._width?this._width:this.measureWidth},function(c$a){this._width!=c$a&&(this._width=c$a,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),c$g(0,c$c,"measureWidth",function(){var c$a=0;this.commitMeasure();for(var c$b=this.numChildren-1;-1<c$b;c$b--){var c$c=this.getChildAt(c$b);c$c.visible&&(c$a=Math.max(c$c.x+c$c.width*c$c.scaleX,c$a))}return c$a}),c$g(0,c$c,"displayHeight",function(){return this.height*this.scaleY}),c$g(0,c$c,"height",function(){return this._height?this._height:this.measureHeight},function(c$a){this._height!=c$a&&(this._height=c$a,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),c$g(0,c$c,"dataSource",function(){return this._dataSource},function(c$a){for(var c$b in this._dataSource=c$a,this._dataSource)this.hasOwnProperty(c$b)&&"function"!=typeof this[c$b]&&(this[c$b]=this._dataSource[c$b])}),c$g(0,c$c,"scaleY",c$b.prototype._$get_scaleY,function(c$a){c$r.superGet(c$w,this,"scaleY")!=c$a&&(c$r.superSet(c$w,this,"scaleY",c$a),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),c$g(0,c$c,"measureHeight",function(){var c$a=0;this.commitMeasure();for(var c$b=this.numChildren-1;-1<c$b;c$b--){var c$c=this.getChildAt(c$b);c$c.visible&&(c$a=Math.max(c$c.y+c$c.height*c$c.scaleY,c$a))}return c$a}),c$g(0,c$c,"scaleX",c$b.prototype._$get_scaleX,function(c$a){c$r.superGet(c$w,this,"scaleX")!=c$a&&(c$r.superSet(c$w,this,"scaleX",c$a),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),c$g(0,c$c,"top",function(){return this._layout.top},function(c$a){c$a!=this._layout.top&&(this.getLayout().top=c$a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),c$g(0,c$c,"bottom",function(){return this._layout.bottom},function(c$a){c$a!=this._layout.bottom&&(this.getLayout().bottom=c$a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),c$g(0,c$c,"left",function(){return this._layout.left},function(c$a){c$a!=this._layout.left&&(this.getLayout().left=c$a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),c$g(0,c$c,"right",function(){return this._layout.right},function(c$a){c$a!=this._layout.right&&(this.getLayout().right=c$a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),c$g(0,c$c,"centerX",function(){return this._layout.centerX},function(c$a){c$a!=this._layout.centerX&&(this.getLayout().centerX=c$a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),c$g(0,c$c,"centerY",function(){return this._layout.centerY},function(c$a){c$a!=this._layout.centerY&&(this.getLayout().centerY=c$a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),c$g(0,c$c,"anchorX",function(){return this._layout.anchorX},function(c$a){c$a!=this._layout.anchorX&&(this.getLayout().anchorX=c$a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),c$g(0,c$c,"anchorY",function(){return this._layout.anchorY},function(c$a){c$a!=this._layout.anchorY&&(this.getLayout().anchorY=c$a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),c$g(0,c$c,"tag",function(){return this._tag},function(c$a){this._tag=c$a}),c$g(0,c$c,"toolTip",function(){return this._toolTip},function(c$a){this._toolTip!=c$a&&(null!=(this._toolTip=c$a)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),c$g(0,c$c,"comXml",function(){return this._comXml},function(c$a){this._comXml=c$a}),c$g(0,c$c,"gray",function(){return this._gray},function(c$a){c$a!==this._gray&&(this._gray=c$a,c$E.gray(this,c$a))}),c$g(0,c$c,"disabled",function(){return this._disabled},function(c$a){c$a!==this._disabled&&(this.gray=this._disabled=c$a,this.mouseEnabled=!c$a)}),c$a}(c$w)),c$I=function(c$a){function c$b(){this.lockLayer=null,this.popupEffect=function(c$a){c$a.scale(1,1),c$z.from(c$a,{x:c$r.stage.width/2,y:c$r.stage.height/2,scaleX:0,scaleY:0},300,c$j.backOut,c$o.create(this,this.doOpen,[c$a]))},this.closeEffect=function(c$a,c$b){c$z.to(c$a,{x:c$r.stage.width/2,y:c$r.stage.height/2,scaleX:0,scaleY:0},300,c$j.strongOut,c$o.create(this,this.doClose,[c$a,c$b]))},c$b.__super.call(this),this.maskLayer=new c$w,this.popupEffectHandler=c$o.create(this,this.popupEffect,null,!1),this.closeEffectHandler=c$o.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,c$r.stage.addChild(this),c$r.stage.on("resize",this,this._onResize),c$F.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}c$h(c$b,"laya.ui.DialogManager",c$w);var c$c=c$b.prototype;return c$c._closeOnSide=function(){var c$a=this.getChildAt(this.numChildren-1);c$a instanceof laya.ui.Dialog&&c$a.close("side")},c$c.setLockView=function(c$a){this.lockLayer||(this.lockLayer=new c$J,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(c$r.stage.width,c$r.stage.height)),this.lockLayer.removeChildren(),c$a&&(c$a.centerX=c$a.centerY=0,this.lockLayer.addChild(c$a))},c$c._onResize=function(c$a){var c$b=this.maskLayer.width=c$r.stage.width,c$c=this.maskLayer.height=c$r.stage.height;this.lockLayer&&this.lockLayer.size(c$b,c$c),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,c$b,c$c,c$F.popupBgColor),this.maskLayer.alpha=c$F.popupBgAlpha;for(var c$d=this.numChildren-1;-1<c$d;c$d--){var c$g=this.getChildAt(c$d);c$g.popupCenter&&this._centerDialog(c$g)}},c$c._centerDialog=function(c$a){c$a.x=Math.round((c$r.stage.width-c$a.width>>1)+c$a.pivotX),c$a.y=Math.round((c$r.stage.height-c$a.height>>1)+c$a.pivotY)},c$c.open=function(c$a,c$b,c$c){void 0===c$b&&(c$b=!1),void 0===c$c&&(c$c=!1),c$b&&this._closeAll(),c$a.popupCenter&&this._centerDialog(c$a),this.addChild(c$a),(c$a.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),c$c&&null!=c$a.popupEffect?c$a.popupEffect.runWith(c$a):this.doOpen(c$a),this.event("open")},c$c.doOpen=function(c$a){c$a.onOpened()},c$c.lock=function(c$a){this.lockLayer&&(c$a?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},c$c.close=function(c$a,c$b,c$c){void 0===c$c&&(c$c=!1),c$c&&null!=c$a.closeEffect?c$a.closeEffect.runWith([c$a,c$b]):this.doClose(c$a,c$b),this.event("close")},c$c.doClose=function(c$a,c$b){c$a.removeSelf(),c$a.isModal&&this._checkMask(),c$a.closeHandler&&c$a.closeHandler.runWith(c$b),c$a.onClosed(c$b)},c$c.closeAll=function(){this._closeAll(),this.event("close")},c$c._closeAll=function(){for(var c$a=this.numChildren-1;-1<c$a;c$a--){var c$b=this.getChildAt(c$a);c$b&&null!=c$b.close&&this.doClose(c$b)}},c$c.getDialogsByGroup=function(c$a){for(var c$b=[],c$c=this.numChildren-1;-1<c$c;c$c--){var c$d=this.getChildAt(c$c);c$d&&c$d.group===c$a&&c$b.push(c$d)}return c$b},c$c.closeByGroup=function(c$a){for(var c$b=[],c$c=this.numChildren-1;-1<c$c;c$c--){var c$d=this.getChildAt(c$c);c$d&&c$d.group===c$a&&(c$d.close(),c$b.push(c$d))}return c$b},c$c._checkMask=function(){this.maskLayer.removeSelf();for(var c$a=this.numChildren-1;-1<c$a;c$a--){var c$b=this.getChildAt(c$a);if(c$b&&c$b.isModal)return void this.addChildAt(this.maskLayer,c$a)}},c$b}(),c$J=function(c$a){function c$b(){c$b.__super.call(this)}c$h(c$b,"laya.ui.Box",c$a);var c$c=c$b.prototype;return c$r.imps(c$c,{"laya.ui.IBox":!0}),c$g(0,c$c,"dataSource",c$a.prototype._$get_dataSource,function(c$a){for(var c$b in this._dataSource=c$a){var c$c=this.getChildByName(c$b);c$c?c$c.dataSource=c$a[c$b]:this.hasOwnProperty(c$b)&&"function"!=typeof this[c$b]&&(this[c$b]=c$a[c$b])}}),c$b}(c$H),c$K=function(c$b){function c$c(c$a,c$b){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,c$c.__super.call(this),this._labelColors=c$D.buttonLabelColors,this._stateNum=c$D.buttonStateNum,void 0===c$b&&(c$b=""),this.skin=c$a,this.label=c$b}c$h(c$c,"laya.ui.Button",c$b);var c$a=c$c.prototype;return c$r.imps(c$a,{"laya.ui.ISelect":!0}),c$a.destroy=function(c$a){c$u.clearCache(this,this._skin),c$u.clearObject(this,this._weakKey),void 0===c$a&&(c$a=!0),c$b.prototype.destroy.call(this,c$a),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(c$a),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},c$a.createChildren=function(){this.graphics=this._bitmap=new c$G},c$a.createText=function(){this._text||(this._text=new c$x,this._text.overflow=c$x.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},c$a.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},c$a.onMouse=function(c$a){if(!1!==this.toggle||!this._selected)return"click"===c$a.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=c$c.stateMap[c$a.type]))},c$a.changeClips=function(){var c$a=c$u.getRes(this._skin);if(c$a&&this._skin&&""!=this._skin){c$u.clearObject(this,this._weakKey);var c$b=c$a.sourceWidth,c$c=c$a.sourceHeight/this._stateNum;c$a.$_GID||(c$a.$_GID=c$A.getGID());var c$d=c$a.$_GID+"-"+this._stateNum,c$g=c$u.findObject(c$d);if(c$A.isOkTextureList(c$g)||(c$g=null),c$g)this._weakKey=c$d,c$u.keepObject(this,this._weakKey),this._sources=c$g;else{if(this._sources=[],1===this._stateNum)this._sources.push(c$a);else for(var c$h=0;c$h<this._stateNum;c$h++){var c$i=c$y.createFromTexture(c$a,0,c$c*c$h,c$b,c$c);if(c$a.alphaTexture){var c$j=c$a.width/c$a.alphaTexture.width;c$i.alphaTexture=c$y.createFromTexture(c$a.alphaTexture,0/c$j,c$c*c$h/c$j,c$b/c$j,c$c/c$j)}this._sources.push(c$i)}c$u.saveObject(c$d,this._sources),this._weakKey=c$d,c$u.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||c$b,this._bitmap.height=this._height||c$c,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=c$b)}else console.warn("lose skin ",this._skin,this.name,this.__className)},c$a.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var c$a=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[c$a]),this.label&&(this._text.color=this._labelColors[c$a],this._strokeColors&&(this._text.strokeColor=this._strokeColors[c$a]))},c$a._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},c$g(0,c$a,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(c$a){this.createText(),this._text.strokeColor=c$a}),c$g(0,c$a,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),c$g(0,c$a,"skin",function(){return this._skin},function(c$a){this._skin!=c$a&&(c$u.clearCache(this,this._skin),this._skin=c$a,c$u.keepCache(this,this._skin),this.callLater(this.changeClips),this._setStateChanged())}),c$g(0,c$a,"state",function(){return this._state},function(c$a){this._state!=c$a&&(this._state=c$a,this._setStateChanged())}),c$g(0,c$a,"text",function(){return this.createText(),this._text}),c$g(0,c$a,"stateNum",function(){return this._stateNum},function(c$a){"string"==typeof c$a&&(c$a=parseInt(c$a)),this._stateNum!=c$a&&(this._stateNum=c$a<1?1:3<c$a?3:c$a,this.callLater(this.changeClips))}),c$g(0,c$a,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(c$a){this._strokeColors=c$E.fillArray(c$D.buttonLabelColors,c$a,String),this._setStateChanged()}),c$g(0,c$a,"labelColors",function(){return this._labelColors.join(",")},function(c$a){this._labelColors=c$E.fillArray(c$D.buttonLabelColors,c$a,String),this._setStateChanged()}),c$g(0,c$a,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),c$g(0,c$a,"label",function(){return this._text?this._text.text:null},function(c$a){(this._text||c$a)&&(this.createText(),this._text.text!=c$a&&(c$a&&!this._text.parent&&this.addChild(this._text),this._text.text=(c$a+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),c$g(0,c$a,"selected",function(){return this._selected},function(c$a){this._selected!=c$a&&(this._selected=c$a,this.state=this._selected?2:0,this.event("change"))}),c$g(0,c$a,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(c$a){this.createText(),this._text.padding=c$E.fillArray(c$D.labelPadding,c$a,Number)}),c$g(0,c$a,"labelSize",function(){return this.createText(),this._text.fontSize},function(c$a){this.createText(),this._text.fontSize=c$a}),c$g(0,c$a,"labelStroke",function(){return this.createText(),this._text.stroke},function(c$a){this.createText(),this._text.stroke=c$a}),c$g(0,c$a,"labelBold",function(){return this.createText(),this._text.bold},function(c$a){this.createText(),this._text.bold=c$a}),c$g(0,c$a,"labelFont",function(){return this.createText(),this._text.font},function(c$a){this.createText(),this._text.font=c$a}),c$g(0,c$a,"labelAlign",function(){return this.createText(),this._text.align},function(c$a){this.createText(),this._text.align=c$a}),c$g(0,c$a,"clickHandler",function(){return this._clickHandler},function(c$a){this._clickHandler=c$a}),c$g(0,c$a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(c$a){this._bitmap.sizeGrid=c$E.fillArray(c$D.defaultSizeGrid,c$a,Number)}),c$g(0,c$a,"width",c$b.prototype._$get_width,function(c$a){c$r.superSet(c$H,this,"width",c$a),this._autoSize&&(this._bitmap.width=c$a,this._text&&(this._text.width=c$a))}),c$g(0,c$a,"height",c$b.prototype._$get_height,function(c$a){c$r.superSet(c$H,this,"height",c$a),this._autoSize&&(this._bitmap.height=c$a,this._text&&(this._text.height=c$a))}),c$g(0,c$a,"dataSource",c$b.prototype._$get_dataSource,function(c$a){"number"==typeof(this._dataSource=c$a)||"string"==typeof c$a?this.label=c$a+"":c$r.superSet(c$H,this,"dataSource",c$a)}),c$g(0,c$a,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(c$a){this._bitmap._offset=c$a?c$E.fillArray([1,1],c$a,Number):[]}),c$d(c$c,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),c$c}(c$H),c$L=function(c$b){function c$d(c$a,c$b,c$c){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._complete=null,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,c$d.__super.call(this),void 0===c$b&&(c$b=1),void 0===c$c&&(c$c=1),this._clipX=c$b,this._clipY=c$c,this.skin=c$a}c$h(c$d,"laya.ui.Clip",c$b);var c$a=c$d.prototype;return c$a.destroy=function(c$a){c$u.clearCache(this,this._skin),c$u.clearObject(this,this._weakKey),void 0===c$a&&(c$a=!0),c$b.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},c$a.dispose=function(){this.destroy(!0),c$r.loader.clearRes(this._skin)},c$a.createChildren=function(){this.graphics=this._bitmap=new c$G},c$a._onDisplay=function(c$a){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},c$a.changeClip=function(){if(this._clipChanged=!1,this._skin){var c$a=c$u.getRes(this._skin);c$a?this.loadComplete(this._skin,c$a):c$r.loader.load(this._skin,c$o.create(this,this.loadComplete,[this._skin]))}},c$a.loadComplete=function(c$a,c$b){if(c$a===this._skin&&c$b){c$u.clearObject(this,this._weakKey);var c$c=this._clipWidth||Math.ceil(c$b.sourceWidth/this._clipX),c$d=this._clipHeight||Math.ceil(c$b.sourceHeight/this._clipY),c$g=this._skin+c$c+c$d,c$h=c$u.findObject(c$g);if(c$A.isOkTextureList(c$h)||(c$h=null),c$h)this._weakKey=c$g,c$u.keepObject(this,this._weakKey),this._sources=c$h;else{this._sources=[];for(var c$i=0;c$i<this._clipY;c$i++)for(var c$j=0;c$j<this._clipX;c$j++){var c$k=c$y.createFromTexture(c$b,c$c*c$j,c$d*c$i,c$c,c$d);if(c$b.alphaTexture){var c$l=c$b.width/c$b.alphaTexture.width;c$k.alphaTexture=c$y.createFromTexture(c$b.alphaTexture,c$c*c$j/c$l,c$d*c$i/c$l,c$c/c$l,c$d/c$l)}this._sources.push(c$k)}c$u.saveObject(c$g,this._sources),this._weakKey=c$g,c$u.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},c$a.play=function(c$a,c$b){void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=-1),this._isPlaying=!0,this.index=c$a,this._toIndex=c$b,this._index++,c$r.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},c$a._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},c$a.stop=function(){this._isPlaying=!1,c$r.timer.clear(this,this._loop),this.event("complete")},c$a._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},c$g(0,c$a,"interval",function(){return this._interval},function(c$a){this._interval!=c$a&&(this._interval=c$a,this._isPlaying&&this.play())}),c$g(0,c$a,"skin",function(){return this._skin},function(c$a){this._skin!=c$a&&(c$u.clearCache(this,this._skin),(this._skin=c$a)?(c$u.keepCache(this,this._skin),this._setClipChanged()):this._bitmap.source=null)}),c$g(0,c$a,"sources",function(){return this._sources},function(c$a){this._sources=c$a,this.index=this._index,this.event("loaded")}),c$g(0,c$a,"clipX",function(){return this._clipX},function(c$a){this._clipX=c$a||1,this._setClipChanged()}),c$g(0,c$a,"clipY",function(){return this._clipY},function(c$a){this._clipY=c$a||1,this._setClipChanged()}),c$g(0,c$a,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),c$g(0,c$a,"clipWidth",function(){return this._clipWidth},function(c$a){this._clipWidth=c$a,this._setClipChanged()}),c$g(0,c$a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(c$a){this._bitmap.sizeGrid=c$E.fillArray(c$D.defaultSizeGrid,c$a,Number)}),c$g(0,c$a,"group",function(){return this._group},function(c$a){c$a&&this._skin&&c$u.setGroup(this._skin,c$a),this._group=c$a}),c$g(0,c$a,"clipHeight",function(){return this._clipHeight},function(c$a){this._clipHeight=c$a,this._setClipChanged()}),c$g(0,c$a,"width",c$b.prototype._$get_width,function(c$a){c$r.superSet(c$H,this,"width",c$a),this._bitmap.width=c$a}),c$g(0,c$a,"height",c$b.prototype._$get_height,function(c$a){c$r.superSet(c$H,this,"height",c$a),this._bitmap.height=c$a}),c$g(0,c$a,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),c$g(0,c$a,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),c$g(0,c$a,"index",function(){return this._index},function(c$a){this._index=c$a,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[c$a]),this.event("change")}),c$g(0,c$a,"autoPlay",function(){return this._autoPlay},function(c$a){this._autoPlay!=c$a&&((this._autoPlay=c$a)?this.play():this.stop())}),c$g(0,c$a,"isPlaying",function(){return this._isPlaying},function(c$a){this._isPlaying=c$a}),c$g(0,c$a,"dataSource",c$b.prototype._$get_dataSource,function(c$a){"number"==typeof(this._dataSource=c$a)&&Math.floor(c$a)==c$a||"string"==typeof c$a?this.index=parseInt(c$a):c$r.superSet(c$H,this,"dataSource",c$a)}),c$g(0,c$a,"bitmap",function(){return this._bitmap}),c$d}(c$H),c$M=function(c$b){function c$a(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,c$a.__super.call(this)}c$h(c$a,"laya.ui.ColorPicker",c$b);var c$c=c$a.prototype;return c$c.destroy=function(c$a){void 0===c$a&&(c$a=!0),c$b.prototype.destroy.call(this,c$a),this._colorPanel&&this._colorPanel.destroy(c$a),this._colorButton&&this._colorButton.destroy(c$a),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},c$c.createChildren=function(){this.addChild(this._colorButton=new c$K),this._colorPanel=new c$J,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new c$w),this._colorPanel.addChild(this._colorBlock=new c$w),this._colorPanel.addChild(this._colorInput=new c$p)},c$c.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},c$c.onPanelMouseDown=function(c$a){c$a.stopPropagation()},c$c.changePanel=function(){this._panelChanged=!1;var c$a=this._colorPanel.graphics;c$a.clear(),c$a.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(c$a=this._colorTiles.graphics).clear();for(var c$b=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],c$c=0;c$c<12;c$c++)for(var c$d=0;c$d<20;c$d++){var c$g=0;c$g=0===c$d?c$b[c$c]:1===c$d?0:51*(((3*c$c+c$d/6)%3<<0)+3*(c$c/6<<0))<<16|c$d%6*51<<8|(c$c<<0)%6*51;var c$h=c$E.toColor(c$g);this._colors.push(c$h);var c$i=c$d*this._gridSize,c$j=c$c*this._gridSize;c$a.drawRect(c$i,c$j,this._gridSize,this._gridSize,c$h,"#000000")}},c$c.onColorButtonClick=function(c$a){this._colorPanel.parent?this.close():this.open()},c$c.open=function(){var c$a=this.localToGlobal(new c$q),c$b=c$a.x+this._colorPanel.width<=c$r.stage.width?c$a.x:c$r.stage.width-this._colorPanel.width,c$c=c$a.y+this._colorButton.height;c$c=c$c+this._colorPanel.height<=c$r.stage.height?c$c:c$a.y-this._colorPanel.height,this._colorPanel.pos(c$b,c$c),this._colorPanel.zOrder=1001,c$r._currentStage.addChild(this._colorPanel),c$r.stage.on("mousedown",this,this.removeColorBox)},c$c.close=function(){c$r.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},c$c.removeColorBox=function(c$a){this.close()},c$c.onColorFieldKeyDown=function(c$a){13==c$a.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),c$a.stopPropagation())},c$c.onColorInputChange=function(c$a){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},c$c.onColorTilesClick=function(c$a){this.selectedColor=this.getColorByMouse(),this.close()},c$c.onColorTilesMouseMove=function(c$a){this._colorInput.focus=!1;var c$b=this.getColorByMouse();this._colorInput.text=c$b,this.drawBlock(c$b)},c$c.getColorByMouse=function(){var c$a=this._colorTiles.getMousePoint(),c$b=Math.floor(c$a.x/this._gridSize),c$c=Math.floor(c$a.y/this._gridSize);return this._colors[20*c$c+c$b]},c$c.drawBlock=function(c$a){var c$b=this._colorBlock.graphics;c$b.clear();var c$c=c$a||"#ffffff";c$b.drawRect(0,0,50,20,c$c,this._borderColor),c$a||c$b.drawLine(0,0,50,20,"#ff0000")},c$c.changeColor=function(){var c$a=this.graphics;c$a.clear();var c$b=this._selectedColor||"#000000";c$a.drawRect(0,0,this._colorButton.width,this._colorButton.height,c$b)},c$c._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},c$g(0,c$c,"inputBgColor",function(){return this._inputBgColor},function(c$a){this._inputBgColor=c$a,this._setPanelChanged()}),c$g(0,c$c,"selectedColor",function(){return this._selectedColor},function(c$a){this._selectedColor!=c$a&&(this._selectedColor=this._colorInput.text=c$a,this.drawBlock(c$a),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",c$k.EMPTY.setTo("change",this,this)))}),c$g(0,c$c,"skin",function(){return this._colorButton.skin},function(c$a){this._colorButton.skin=c$a,this.changeColor()}),c$g(0,c$c,"bgColor",function(){return this._bgColor},function(c$a){this._bgColor=c$a,this._setPanelChanged()}),c$g(0,c$c,"borderColor",function(){return this._borderColor},function(c$a){this._borderColor=c$a,this._setPanelChanged()}),c$g(0,c$c,"inputColor",function(){return this._inputColor},function(c$a){this._inputColor=c$a,this._setPanelChanged()}),c$a}(c$H),c$N=function(c$b){function c$c(c$a,c$b){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,c$c.__super.call(this),this._itemColors=c$D.comboBoxItemColors,this.skin=c$a,this.labels=c$b}c$h(c$c,"laya.ui.ComboBox",c$b);var c$a=c$c.prototype;return c$a.destroy=function(c$a){void 0===c$a&&(c$a=!0),c$b.prototype.destroy.call(this,c$a),this._button&&this._button.destroy(c$a),this._list&&this._list.destroy(c$a),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},c$a.createChildren=function(){this.addChild(this._button=new c$K),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},c$a._createList=function(){this._list=new c$X,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},c$a._setListEvent=function(c$a){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=c$o.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},c$a.onListDown=function(c$a){c$a.stopPropagation()},c$a.onScrollBarDown=function(c$a){c$a.stopPropagation()},c$a.onButtonMouseDown=function(c$a){this.callLater(this.switchTo,[!this._isOpen])},c$a.changeList=function(){this._listChanged=!1;var c$a=this.width-2,c$b=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:c$a,height:this._itemHeight,fontSize:this._itemSize,color:c$b}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},c$a.onlistItemMouse=function(c$a,c$b){var c$c=c$a.type;if("mouseover"===c$c||"mouseout"===c$c){if(this._isCustomList)return;var c$d=this._list.getCell(c$b);if(!c$d)return;var c$g=c$d.getChildByName("label");c$g&&("mouseover"===c$c?(c$g.bgColor=this._itemColors[0],c$g.color=this._itemColors[1]):(c$g.bgColor=null,c$g.color=this._itemColors[2]))}else"click"===c$c&&(this.selectedIndex=c$b,this.isOpen=!1)},c$a.switchTo=function(c$a){this.isOpen=c$a},c$a.changeOpen=function(){this.isOpen=!this._isOpen},c$a.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var c$a=this._list.graphics;c$a.clear(),c$a.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var c$b=this._list.array||[],c$c=c$b.length=0,c$d=this._labels.length;c$c<c$d;c$c++)c$b.push({label:this._labels[c$c]});this._list.height=this._listHeight,this._list.array=c$b},c$a.changeSelected=function(){this._button.label=this.selectedLabel},c$a._onStageMouseWheel=function(c$a){this._list&&!this._list.contains(c$a.target)&&this.removeList(null)},c$a.removeList=function(c$a){c$r.stage.off("mousedown",this,this.removeList),c$r.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},c$g(0,c$a,"selectedIndex",function(){return this._selectedIndex},function(c$a){this._selectedIndex!=c$a&&(this._selectedIndex=c$a,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[c$k.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),c$g(0,c$a,"measureHeight",function(){return this._button.height}),c$g(0,c$a,"skin",function(){return this._button.skin},function(c$a){this._button.skin!=c$a&&(this._button.skin=c$a,this._listChanged=!0)}),c$g(0,c$a,"measureWidth",function(){return this._button.width}),c$g(0,c$a,"width",c$b.prototype._$get_width,function(c$a){c$r.superSet(c$H,this,"width",c$a),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),c$g(0,c$a,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(c$a){this.selectedIndex=this._labels.indexOf(c$a)}),c$g(0,c$a,"labels",function(){return this._labels.join(",")},function(c$a){0<this._labels.length&&(this.selectedIndex=-1),c$a?this._labels=c$a.split(","):this._labels.length=0,this._itemChanged=!0}),c$g(0,c$a,"height",c$b.prototype._$get_height,function(c$a){c$r.superSet(c$H,this,"height",c$a),this._button.height=this._height}),c$g(0,c$a,"selectHandler",function(){return this._selectHandler},function(c$a){this._selectHandler=c$a}),c$g(0,c$a,"visibleNum",function(){return this._visibleNum},function(c$a){this._visibleNum=c$a,this._listChanged=!0}),c$g(0,c$a,"labelBold",function(){return this._button.text.bold},function(c$a){this._button.text.bold=c$a}),c$g(0,c$a,"itemColors",function(){return String(this._itemColors)},function(c$a){this._itemColors=c$E.fillArray(this._itemColors,c$a,String),this._listChanged=!0}),c$g(0,c$a,"itemSize",function(){return this._itemSize},function(c$a){this._itemSize=c$a,this._listChanged=!0}),c$g(0,c$a,"scrollBar",function(){return this.list.scrollBar}),c$g(0,c$a,"isOpen",function(){return this._isOpen},function(c$a){if(this._isOpen!=c$a)if(this._isOpen=c$a,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var c$b=this.localToGlobal(c$q.TEMP.setTo(0,0)),c$c=c$b.y+this._button.height;c$c=c$c+this._listHeight<=c$r.stage.height?c$c:c$b.y-this._listHeight,this._list.pos(c$b.x,c$c),this._list.zOrder=1001,c$r._currentStage.addChild(this._list),c$r.stage.once("mousedown",this,this.removeList),c$r.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),c$g(0,c$a,"scrollBarSkin",function(){return this._scrollBarSkin},function(c$a){this._scrollBarSkin=c$a}),c$g(0,c$a,"sizeGrid",function(){return this._button.sizeGrid},function(c$a){this._button.sizeGrid=c$a}),c$g(0,c$a,"button",function(){return this._button}),c$g(0,c$a,"list",function(){return this._list||this._createList(),this._list},function(c$a){c$a&&(c$a.removeSelf(),this._isCustomList=!0,this._list=c$a,this._setListEvent(c$a),this._itemHeight=c$a.getCell(0).height+c$a.spaceY)}),c$g(0,c$a,"dataSource",c$b.prototype._$get_dataSource,function(c$a){"number"==typeof(this._dataSource=c$a)&&Math.floor(c$a)==c$a||"string"==typeof c$a?this.selectedIndex=parseInt(c$a):c$a instanceof Array?this.labels=c$a.join(","):c$r.superSet(c$H,this,"dataSource",c$a)}),c$g(0,c$a,"labelColors",function(){return this._button.labelColors},function(c$a){this._button.labelColors!=c$a&&(this._button.labelColors=c$a)}),c$g(0,c$a,"labelPadding",function(){return this._button.text.padding.join(",")},function(c$a){this._button.text.padding=c$E.fillArray(c$D.labelPadding,c$a,Number)}),c$g(0,c$a,"labelSize",function(){return this._button.text.fontSize},function(c$a){this._button.text.fontSize=c$a}),c$g(0,c$a,"labelFont",function(){return this._button.text.font},function(c$a){this._button.text.font=c$a}),c$g(0,c$a,"stateNum",function(){return this._button.stateNum},function(c$a){this._button.stateNum=c$a}),c$c}(c$H),c$O=function(c$b){function c$c(c$a){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,c$c.__super.call(this),this._showButtons=c$F.showButtons,this._touchScrollEnable=c$F.touchScrollEnable,this._mouseWheelEnable=c$F.mouseWheelEnable,this.skin=c$a,this.max=1}c$h(c$c,"laya.ui.ScrollBar",c$b);var c$a=c$c.prototype;return c$a.destroy=function(c$a){void 0===c$a&&(c$a=!0),this.stopScroll(),this.target=null,c$b.prototype.destroy.call(this,c$a),this.upButton&&this.upButton.destroy(c$a),this.downButton&&this.downButton.destroy(c$a),this.slider&&this.slider.destroy(c$a),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},c$a.createChildren=function(){this.addChild(this.slider=new c$P),this.addChild(this.upButton=new c$K),this.addChild(this.downButton=new c$K)},c$a.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},c$a.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},c$a.onButtonMouseDown=function(c$a){var c$b=c$a.currentTarget===this.upButton;this.slide(c$b),c$r.timer.once(c$D.scrollBarDelayTime,this,this.startLoop,[c$b]),c$r.stage.once("mouseup",this,this.onStageMouseUp)},c$a.startLoop=function(c$a){c$r.timer.frameLoop(1,this,this.slide,[c$a])},c$a.slide=function(c$a){c$a?this.value-=this._scrollSize:this.value+=this._scrollSize},c$a.onStageMouseUp=function(c$a){c$r.timer.clear(this,this.startLoop),c$r.timer.clear(this,this.slide)},c$a.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},c$a.changeSize=function(){c$b.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},c$a.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},c$a.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},c$a.setScroll=function(c$a,c$b,c$c){this.runCallLater(this.changeSize),this.slider.setSlider(c$a,c$b,c$c),this.slider.bar.visible=0<c$b,!this._hide&&this.autoHide&&(this.visible=!1)},c$a.onTargetMouseWheel=function(c$a){this.value-=c$a.delta*this._scrollSize,this.target=this._target},c$a.onTargetMouseDown=function(c$a){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new c$q),this._lastPoint.setTo(c$r.stage.mouseX,c$r.stage.mouseY),c$r.timer.clear(this,this.tweenMove),c$z.clearTween(this),c$r.stage.once("mouseup",this,this.onStageMouseUp2),c$r.stage.once("mouseout",this,this.onStageMouseUp2),c$r.timer.frameLoop(1,this,this.loop)},c$a.loop=function(){var c$a=c$r.stage.mouseY,c$b=c$r.stage.mouseX;if(this._lastOffset=this.isVertical?c$a-this._lastPoint.y:c$b-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?c$r.stage._canvasTransform.getScaleY():c$r.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=c$b,this._lastPoint.y=c$a,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},c$a.onStageMouseUp2=function(c$a){if(c$r.stage.off("mouseup",this,this.onStageMouseUp2),c$r.stage.off("mouseout",this,this.onStageMouseUp2),c$r.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?c$z.to(this,{value:this.min},this.elasticBackTime,c$j.sineOut,c$o.create(this,this.elasticOver)):this._value>this.max&&c$z.to(this,{value:this.max},this.elasticBackTime,c$j.sineOut,c$o.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?c$r.stage.mouseY-this._lastPoint.y:c$r.stage.mouseX-this._lastPoint.x);for(var c$b=0,c$c=Math.min(this._offsets.length,3),c$d=0;c$d<c$c;c$d++)c$b+=this._offsets[this._offsets.length-1-c$d];if(this._lastOffset=c$b/c$c,(c$b=Math.abs(this._lastOffset))<2)return void this.event("end");60<c$b&&(this._lastOffset=0<this._lastOffset?60:-60);var c$g=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));c$r.timer.frameLoop(1,this,this.tweenMove,[c$g])}},c$a.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&c$z.to(this,{alpha:0},500),this.event("end")},c$a.tweenMove=function(c$a){this._lastOffset*=this.rollRatio;var c$b=NaN;if(0<c$a&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,c$b=.5*-(this.min-c$a-this.value),this._lastOffset>c$b&&(this._lastOffset=c$b)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,c$b=.5*-(this.max+c$a-this.value),this._lastOffset<c$b&&(this._lastOffset=c$b))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(c$r.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?c$z.to(this,{value:this.min},this.elasticBackTime,c$j.sineOut,c$o.create(this,this.elasticOver)):this._value>this.max?c$z.to(this,{value:this.max},this.elasticBackTime,c$j.sineOut,c$o.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&c$z.to(this,{alpha:0},500)}},c$a.stopScroll=function(){this.onStageMouseUp2(null),c$r.timer.clear(this,this.tweenMove),c$z.clearTween(this)},c$g(0,c$a,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),c$g(0,c$a,"skin",function(){return this._skin},function(c$a){this._skin!=c$a&&(this._skin=c$a,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),c$g(0,c$a,"max",function(){return this.slider.max},function(c$a){this.slider.max=c$a}),c$g(0,c$a,"showButtons",function(){return this._showButtons},function(c$a){this._showButtons=c$a,this.callLater(this.changeScrollBar)}),c$g(0,c$a,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),c$g(0,c$a,"min",function(){return this.slider.min},function(c$a){this.slider.min=c$a}),c$g(0,c$a,"value",function(){return this._value},function(c$a){c$a!==this._value&&(this._value=c$a,this._isElastic||(this.slider._value!=c$a&&(this.slider._value=c$a,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),c$g(0,c$a,"isVertical",function(){return this.slider.isVertical},function(c$a){this.slider.isVertical=c$a}),c$g(0,c$a,"sizeGrid",function(){return this.slider.sizeGrid},function(c$a){this.slider.sizeGrid=c$a}),c$g(0,c$a,"scrollSize",function(){return this._scrollSize},function(c$a){this._scrollSize=c$a}),c$g(0,c$a,"dataSource",c$b.prototype._$get_dataSource,function(c$a){"number"==typeof(this._dataSource=c$a)||"string"==typeof c$a?this.value=Number(c$a):c$r.superSet(c$H,this,"dataSource",c$a)}),c$g(0,c$a,"thumbPercent",function(){return this._thumbPercent},function(c$a){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),c$a=1<=c$a?.99:c$a,this._thumbPercent=c$a,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*c$a,c$D.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*c$a,c$D.scrollBarMinNum))}),c$g(0,c$a,"target",function(){return this._target},function(c$a){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=c$a)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),c$g(0,c$a,"hide",function(){return this._hide},function(c$a){this._hide=c$a,this.visible=!c$a}),c$g(0,c$a,"touchScrollEnable",function(){return this._touchScrollEnable},function(c$a){this._touchScrollEnable=c$a,this.target=this._target}),c$g(0,c$a,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(c$a){this._mouseWheelEnable=c$a,this.target=this._target}),c$g(0,c$a,"tick",function(){return this.slider.tick},function(c$a){this.slider.tick=c$a}),c$c}(c$H),c$P=function(c$b){function c$c(c$a){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,c$c.__super.call(this),this.skin=c$a}c$h(c$c,"laya.ui.Slider",c$b);var c$a=c$c.prototype;return c$a.destroy=function(c$a){void 0===c$a&&(c$a=!0),c$b.prototype.destroy.call(this,c$a),this._bg&&this._bg.destroy(c$a),this._bar&&this._bar.destroy(c$a),this._progress&&this._progress.destroy(c$a),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},c$a.createChildren=function(){this.addChild(this._bg=new c$Q),this.addChild(this._bar=new c$K)},c$a.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},c$a.onBarMouseDown=function(c$a){this._globalSacle||(this._globalSacle=new c$q),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=c$r.stage.mouseX,this._ty=c$r.stage.mouseY,c$r.stage.on("mousemove",this,this.mouseMove),c$r.stage.once("mouseup",this,this.mouseUp),c$r.stage.once("mouseout",this,this.mouseUp),this.showValueText()},c$a.showValueText=function(){if(this.showLabel){var c$a=laya.ui.Slider.label;this.addChild(c$a),c$a.textField.changeText(this._value+""),this.isVertical?(c$a.x=this._bar.x+20,c$a.y=.5*(this._bar.height-c$a.height)+this._bar.y):(c$a.y=this._bar.y-20,c$a.x=.5*(this._bar.width-c$a.width)+this._bar.x)}},c$a.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},c$a.mouseUp=function(c$a){c$r.stage.off("mousemove",this,this.mouseMove),c$r.stage.off("mouseup",this,this.mouseUp),c$r.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},c$a.mouseMove=function(c$a){var c$b=this._value;this.isVertical?(this._bar.y+=(c$r.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(c$r.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=c$r.stage.mouseX,this._ty=c$r.stage.mouseY;var c$c=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*c$c)/c$c,this._value!=c$b&&this.sendChangeEvent(),this.showValueText()},c$a.sendChangeEvent=function(c$a){void 0===c$a&&(c$a="change"),this.event(c$a),this.changeHandler&&this.changeHandler.runWith(this._value)},c$a.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},c$a.changeSize=function(){c$b.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},c$a.setSlider=function(c$a,c$b,c$c){this._value=-1,this._min=c$a,this._max=c$a<c$b?c$b:c$a,this.value=c$c<c$a?c$a:c$b<c$c?c$b:c$c},c$a.changeValue=function(){var c$a=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*c$a)/c$a,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var c$b=this._max-this._min;0===c$b&&(c$b=1),this.isVertical?(this._bar.y=(this._value-this._min)/c$b*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/c$b*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},c$a.onBgMouseDown=function(c$a){var c$b=this._bg.getMousePoint();this.isVertical?this.value=c$b.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=c$b.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},c$g(0,c$a,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),c$g(0,c$a,"skin",function(){return this._skin},function(c$a){if(this._skin!=c$a){this._skin=c$a,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var c$b=this._skin.replace(".png","$progress.png");c$u.getRes(c$b)&&(this._progress||(this.addChild(this._progress=new c$Q),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=c$b),this.setBarPoint(),this.callLater(this.changeValue)}}),c$g(0,c$a,"allowClickBack",function(){return this._allowClickBack},function(c$a){this._allowClickBack!=c$a&&((this._allowClickBack=c$a)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),c$g(0,c$a,"max",function(){return this._max},function(c$a){this._max!=c$a&&(this._max=c$a,this.callLater(this.changeValue))}),c$g(0,c$a,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),c$g(0,c$a,"tick",function(){return this._tick},function(c$a){this._tick!=c$a&&(this._tick=c$a,this.callLater(this.changeValue))}),c$g(0,c$a,"sizeGrid",function(){return this._bg.sizeGrid},function(c$a){this._bg.sizeGrid=c$a,this._bar.sizeGrid=c$a,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),c$g(0,c$a,"min",function(){return this._min},function(c$a){this._min!=c$a&&(this._min=c$a,this.callLater(this.changeValue))}),c$g(0,c$a,"value",function(){return this._value},function(c$a){if(this._value!=c$a){var c$b=this._value;this._value=c$a,this.changeValue(),this._value!=c$b&&this.sendChangeEvent()}}),c$g(0,c$a,"dataSource",c$b.prototype._$get_dataSource,function(c$a){"number"==typeof(this._dataSource=c$a)||"string"==typeof c$a?this.value=Number(c$a):c$r.superSet(c$H,this,"dataSource",c$a)}),c$g(0,c$a,"bar",function(){return this._bar}),c$d(c$c,["label",function(){return this.label=new c$R}]),c$c}(c$H),c$Q=function(c$b){function c$c(c$a){this._bitmap=null,this._skin=null,this._group=null,c$c.__super.call(this),this.skin=c$a}c$h(c$c,"laya.ui.Image",c$b);var c$a=c$c.prototype;return c$a.destroy=function(c$a){void 0===c$a&&(c$a=!0),c$b.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,c$u.clearCache(this,this._skin)},c$a.dispose=function(){this.destroy(!0),c$u.clearCache(this,this._skin)},c$a.createChildren=function(){this.graphics=this._bitmap=new c$G},c$a.setSource=function(c$a,c$b){c$a===this._skin&&c$b&&(this.source=c$b,this.onCompResize())},c$g(0,c$a,"source",function(){return this._bitmap.source},function(c$a){this._bitmap&&(this._bitmap.source=c$a,this.event("loaded"),this.repaint())}),c$g(0,c$a,"dataSource",c$b.prototype._$get_dataSource,function(c$a){"string"==typeof(this._dataSource=c$a)?this.skin=c$a:c$r.superSet(c$H,this,"dataSource",c$a)}),c$g(0,c$a,"measureHeight",function(){return this._bitmap.height}),c$g(0,c$a,"skin",function(){return this._skin},function(c$a){if(this._skin!=c$a)if(c$u.clearCache(this,this._skin),this._skin=c$a){c$u.keepCache(this,this._skin);var c$b=c$u.getRes(c$a);c$b?(this.source=c$b,this.onCompResize()):c$r.loader.load(this._skin,c$o.create(this,this.setSource,[this._skin]),null,"image",1,!0,this._group)}else this.source=null}),c$g(0,c$a,"group",function(){return this._group},function(c$a){c$a&&this._skin&&c$u.setGroup(this._skin,c$a),this._group=c$a}),c$g(0,c$a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(c$a){this._bitmap.sizeGrid=c$E.fillArray(c$D.defaultSizeGrid,c$a,Number)}),c$g(0,c$a,"measureWidth",function(){return this._bitmap.width}),c$g(0,c$a,"width",c$b.prototype._$get_width,function(c$a){c$r.superSet(c$H,this,"width",c$a),this._bitmap.width=0==c$a?1e-7:c$a}),c$g(0,c$a,"height",c$b.prototype._$get_height,function(c$a){c$r.superSet(c$H,this,"height",c$a),this._bitmap.height=0==c$a?1e-7:c$a}),c$c}(c$H),c$R=function(c$b){function c$c(c$a){this._tf=null,c$c.__super.call(this),void 0===c$a&&(c$a=""),c$l.defaultColor=c$D.labelColor,this.text=c$a}c$h(c$c,"laya.ui.Label",c$b);var c$a=c$c.prototype;return c$a.destroy=function(c$a){void 0===c$a&&(c$a=!0),c$b.prototype.destroy.call(this,c$a),this._tf=null},c$a.createChildren=function(){this.addChild(this._tf=new c$x)},c$a.changeText=function(c$a){this._tf.changeText(c$a)},c$g(0,c$a,"padding",function(){return this._tf.padding.join(",")},function(c$a){this._tf.padding=c$E.fillArray(c$D.labelPadding,c$a,Number)}),c$g(0,c$a,"bold",function(){return this._tf.bold},function(c$a){this._tf.bold=c$a}),c$g(0,c$a,"align",function(){return this._tf.align},function(c$a){this._tf.align=c$a}),c$g(0,c$a,"text",function(){return this._tf.text},function(c$a){this._tf.text!=c$a&&(c$a&&(c$a=c$E.adptString(c$a+"")),this._tf.text=c$a,this.event("change"),this._width&&this._height||this.onCompResize())}),c$g(0,c$a,"italic",function(){return this._tf.italic},function(c$a){this._tf.italic=c$a}),c$g(0,c$a,"wordWrap",function(){return this._tf.wordWrap},function(c$a){this._tf.wordWrap=c$a}),c$g(0,c$a,"font",function(){return this._tf.font},function(c$a){this._tf.font=c$a}),c$g(0,c$a,"dataSource",c$b.prototype._$get_dataSource,function(c$a){"number"==typeof(this._dataSource=c$a)||"string"==typeof c$a?this.text=c$a+"":c$r.superSet(c$H,this,"dataSource",c$a)}),c$g(0,c$a,"color",function(){return this._tf.color},function(c$a){this._tf.color=c$a}),c$g(0,c$a,"valign",function(){return this._tf.valign},function(c$a){this._tf.valign=c$a}),c$g(0,c$a,"leading",function(){return this._tf.leading},function(c$a){this._tf.leading=c$a}),c$g(0,c$a,"fontSize",function(){return this._tf.fontSize},function(c$a){this._tf.fontSize=c$a}),c$g(0,c$a,"bgColor",function(){return this._tf.bgColor},function(c$a){this._tf.bgColor=c$a}),c$g(0,c$a,"borderColor",function(){return this._tf.borderColor},function(c$a){this._tf.borderColor=c$a}),c$g(0,c$a,"stroke",function(){return this._tf.stroke},function(c$a){this._tf.stroke=c$a}),c$g(0,c$a,"strokeColor",function(){return this._tf.strokeColor},function(c$a){this._tf.strokeColor=c$a}),c$g(0,c$a,"textField",function(){return this._tf}),c$g(0,c$a,"measureWidth",function(){return this._tf.width}),c$g(0,c$a,"measureHeight",function(){return this._tf.height}),c$g(0,c$a,"width",function(){return this._width||this._tf.text?c$r.superGet(c$H,this,"width"):0},function(c$a){c$r.superSet(c$H,this,"width",c$a),this._tf.width=c$a}),c$g(0,c$a,"height",function(){return this._height||this._tf.text?c$r.superGet(c$H,this,"height"):0},function(c$a){c$r.superSet(c$H,this,"height",c$a),this._tf.height=c$a}),c$g(0,c$a,"overflow",function(){return this._tf.overflow},function(c$a){this._tf.overflow=c$a}),c$g(0,c$a,"underline",function(){return this._tf.underline},function(c$a){this._tf.underline=c$a}),c$g(0,c$a,"underlineColor",function(){return this._tf.underlineColor},function(c$a){this._tf.underlineColor=c$a}),c$c}(c$H),c$S=function(c$b){function c$c(c$a){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,c$c.__super.call(this),this.skin=c$a}c$h(c$c,"laya.ui.ProgressBar",c$b);var c$a=c$c.prototype;return c$a.destroy=function(c$a){void 0===c$a&&(c$a=!0),c$b.prototype.destroy.call(this,c$a),this._bg&&this._bg.destroy(c$a),this._bar&&this._bar.destroy(c$a),this._bg=this._bar=null,this.changeHandler=null},c$a.createChildren=function(){this.addChild(this._bg=new c$Q),this.addChild(this._bar=new c$Q)},c$a.changeValue=function(){if(this.sizeGrid){var c$a=this.sizeGrid.split(","),c$b=Number(c$a[3]),c$c=Number(c$a[1]),c$d=(this.width-c$b-c$c)*this._value;this._bar.width=c$b+c$c+c$d,this._bar.visible=this._bar.width>c$b+c$c}else this._bar.width=this.width*this._value},c$g(0,c$a,"measureHeight",function(){return this._bg.height}),c$g(0,c$a,"skin",function(){return this._skin},function(c$a){this._skin!=c$a&&(this._skin=c$a,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),c$g(0,c$a,"measureWidth",function(){return this._bg.width}),c$g(0,c$a,"height",c$b.prototype._$get_height,function(c$a){c$r.superSet(c$H,this,"height",c$a),this._bg.height=this._height,this._bar.height=this._height}),c$g(0,c$a,"bar",function(){return this._bar}),c$g(0,c$a,"value",function(){return this._value},function(c$a){this._value!=c$a&&(c$a=1<c$a?1:c$a<0?0:c$a,this._value=c$a,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(c$a))}),c$g(0,c$a,"bg",function(){return this._bg}),c$g(0,c$a,"sizeGrid",function(){return this._bg.sizeGrid},function(c$a){this._bg.sizeGrid=this._bar.sizeGrid=c$a}),c$g(0,c$a,"width",c$b.prototype._$get_width,function(c$a){c$r.superSet(c$H,this,"width",c$a),this._bg.width=this._width,this.callLater(this.changeValue)}),c$g(0,c$a,"dataSource",c$b.prototype._$get_dataSource,function(c$a){"number"==typeof(this._dataSource=c$a)||"string"==typeof c$a?this.value=Number(c$a):c$r.superSet(c$H,this,"dataSource",c$a)}),c$c}(c$H),c$T=(function(c$a){function c$c(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,c$c.__super.call(this),this._tipBox=new c$H,this._tipBox.addChild(this._tipText=new c$x),this._tipText.x=this._tipText.y=5,this._tipText.color=c$c.tipTextColor,this._defaultTipHandler=this._showDefaultTip,c$r.stage.on("showtip",this,this._onStageShowTip),c$r.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}c$h(c$c,"laya.ui.TipManager",c$H);var c$b=c$c.prototype;c$b._onStageHideTip=function(c$a){c$r.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},c$b._onStageShowTip=function(c$a){c$r.timer.once(c$c.tipDelay,this,this._showTip,[c$a],!0)},c$b._showTip=function(c$a){if("string"==typeof c$a){var c$b=String(c$a);Boolean(c$b)&&this._defaultTipHandler(c$b)}else c$a instanceof laya.utils.Handler?c$a.run():"function"==typeof c$a&&c$a.apply();c$r.stage.on("mousemove",this,this._onStageMouseMove),c$r.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},c$b._onStageMouseDown=function(c$a){this.closeAll()},c$b._onStageMouseMove=function(c$a){this._showToStage(this,c$c.offsetX,c$c.offsetY)},c$b._showToStage=function(c$a,c$b,c$c){void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0);var c$d=c$a.getBounds();c$a.x=c$r.stage.mouseX+c$b,c$a.y=c$r.stage.mouseY+c$c,c$a.x+c$d.width>c$r.stage.width&&(c$a.x-=c$d.width+c$b),c$a.y+c$d.height>c$r.stage.height&&(c$a.y-=c$d.height+c$c)},c$b.closeAll=function(){c$r.timer.clear(this,this._showTip),c$r.stage.off("mousemove",this,this._onStageMouseMove),c$r.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},c$b.showDislayTip=function(c$a){this.addChild(c$a),this._showToStage(this),c$r._currentStage.addChild(this)},c$b._showDefaultTip=function(c$a){this._tipText.text=c$a;var c$b=this._tipBox.graphics;c$b.clear(),c$b.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,c$c.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),c$r._currentStage.addChild(this)},c$g(0,c$b,"defaultTipHandler",function(){return this._defaultTipHandler},function(c$a){this._defaultTipHandler=c$a}),c$c.offsetX=10,c$c.offsetY=15,c$c.tipTextColor="#ffffff",c$c.tipBackColor="#111111",c$c.tipDelay=200}(),function(c$a){var c$p;function c$q(){this._idMap=null,this._aniList=null,this._watchMap={},c$q.__super.call(this)}c$h(c$q,"laya.ui.View",c$J);var c$b=c$q.prototype;return c$b.createView=function(c$a){if(c$a.animations&&!this._idMap&&(this._idMap={}),c$q.createComp(c$a,this,this),c$a.animations){var c$b,c$c,c$d=[],c$g=c$a.animations,c$h=0,c$i=c$g.length;for(c$h=0;c$h<c$i;c$h++){switch(c$b=new c$m,c$c=c$g[c$h],c$b._setUp(this._idMap,c$c),(this[c$c.name]=c$b)._setControlNode(this),c$c.action){case 1:c$b.play(0,!1);break;case 2:c$b.play(0,!0)}c$d.push(c$b)}this._aniList=c$d}0<this._width&&null==c$a.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},c$b.onEvent=function(c$a,c$b){},c$b.loadUI=function(c$a){var c$b=c$q.uiMap[c$a];c$b&&this.createView(c$b)},c$b.destroy=function(c$a){void 0===c$a&&(c$a=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,c$a)},c$b.changeData=function(c$a){var c$b=this._watchMap[c$a];if(c$b){console.log("change",c$a);for(var c$c=0,c$d=c$b.length;c$c<c$d;c$c++){c$b[c$c].exe(this)}}},c$q._regs=function(){for(var c$a in c$q.uiClassMap)c$s.regClass(c$a,c$q.uiClassMap[c$a])},c$q.createComp=function(c$a,c$b,c$c,c$d){if(!(c$b=c$b||c$q.getCompInstance(c$a)))return console.warn("can not create:"+c$a.type),null;var c$g=c$a.child;if(c$g)for(var c$h=c$b instanceof laya.ui.List,c$i=0,c$j=c$g.length;c$i<c$j;c$i++){var c$k=c$g[c$i];if(!c$b.hasOwnProperty("itemRender")||"render"!=c$k.props.name&&"render"!==c$k.props.renderType)if("Graphic"==c$k.type)c$s.addGraphicsToSprite(c$k,c$b);else if(c$s.isDrawType(c$k.type))c$s.addGraphicToSprite(c$k,c$b,!0);else{if(c$h){var c$l=[],c$m=c$q.createComp(c$k,null,c$c,c$l);c$l.length&&(c$m._$bindData=c$l)}else c$m=c$q.createComp(c$k,null,c$c,c$d);"Script"==c$k.type?"owner"in c$m?c$m.owner=c$b:"target"in c$m&&(c$m.target=c$b):"mask"==c$k.props.renderType||"mask"==c$k.props.name?c$b.mask=c$m:c$m instanceof laya.display.Sprite&&c$b.addChild(c$m)}else c$b.itemRender=c$k}var c$n=c$a.props;for(var c$o in c$n){var c$p=c$n[c$o];c$q.eventDic[c$o]?c$p&&c$c&&c$b.on(c$o,c$c,c$c.onEvent,[c$p]):c$q.setCompValue(c$b,c$o,c$p,c$c,c$d)}return c$r.__typeof(c$b,"laya.ui.IItem")&&c$b.initItems(),c$a.compId&&c$c&&c$c._idMap&&(c$c._idMap[c$a.compId]=c$b),c$b},c$q.setCompValue=function(c$a,c$b,c$c,c$d,c$g){if("string"==typeof c$c&&-1<c$c.indexOf("${")){if(c$q._sheet||(c$q._sheet=c$s.getClass("laya.data.Table")),!c$q._sheet)return void console.warn("Can not find class Sheet");if(c$g)c$g.push(c$a,c$b,c$c);else if(c$d){-1==c$c.indexOf("].")&&(c$c=c$c.replace(".","[0]."));var c$h,c$i,c$j=new c$p(c$a,c$b,c$c);c$j.exe(c$d);for(var c$k=c$c.replace(/\[.*?\]\./g,".");null!=(c$h=c$q._parseWatchData.exec(c$k));){for(var c$l=c$h[1];null!=(c$i=c$q._parseKeyWord.exec(c$l));){var c$m=c$i[0],c$n=c$d._watchMap[c$m]||(c$d._watchMap[c$m]=[]);c$n.push(c$j),c$q._sheet.I.notifer.on(c$m,c$d,c$d.changeData,[c$m])}(c$n=c$d._watchMap[c$l]||(c$d._watchMap[c$l]=[])).push(c$j),c$q._sheet.I.notifer.on(c$l,c$d,c$d.changeData,[c$l])}}}else if("var"===c$b&&c$d)c$d[c$c]=c$a;else if("onClick"==c$b){var c$o=c$r._runScript("(function(){"+c$c+"})");c$a.on("click",c$d,c$o)}else c$a[c$b]="true"===c$c||"false"!==c$c&&c$c},c$q.getCompInstance=function(c$a){var c$b,c$c=c$a.props?c$a.props.runtime:null;return c$b=c$c?c$q.viewClassMap[c$c]||c$q.uiClassMap[c$c]||c$r.__classmap[c$c]:c$q.uiClassMap[c$a.type],c$a.props&&c$a.props.hasOwnProperty("renderType")&&"instance"==c$a.props.renderType?c$b.instance:c$b?new c$b:null},c$q.regComponent=function(c$a,c$b){c$q.uiClassMap[c$a]=c$b,c$s.regClass(c$a,c$b)},c$q.regViewRuntime=function(c$a,c$b){c$q.viewClassMap[c$a]=c$b},c$q.uiMap={},c$q.viewClassMap={},c$q._sheet=null,c$d(c$q,["uiClassMap",function(){return this.uiClassMap={ViewStack:c$aa,LinkButton:c$K,TextArea:c$la,ColorPicker:c$M,Box:c$J,Button:c$K,CheckBox:c$U,Clip:c$L,ComboBox:c$N,Component:c$H,HScrollBar:c$Y,HSlider:c$$,Image:c$Q,Label:c$R,List:c$X,Panel:c$Z,ProgressBar:c$S,Radio:c$e,RadioGroup:c$ja,ScrollBar:c$O,Slider:c$P,Tab:c$ka,TextInput:c$ca,View:c$q,VScrollBar:c$ba,VSlider:c$da,Tree:c$f,HBox:c$ha,VBox:c$ia,Sprite:c$w,Animation:c$c,Text:c$x,FontClip:c$W}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),c$q.__init$=function(){c$q._regs(),c$p=function(){function c$a(c$a,c$b,c$c){this.comp=null,this.prop=null,this.value=null,this.comp=c$a,this.prop=c$b,this.value=c$c}return c$h(c$a,""),c$a.prototype.exe=function(c$a){var c$b=c$E.getBindFun(this.value);this.comp[this.prop]=c$b.call(this,c$a)},c$a}()},c$q}()),c$U=function(c$a){function c$c(c$a,c$b){void 0===c$b&&(c$b=""),c$c.__super.call(this,c$a,c$b)}c$h(c$c,"laya.ui.CheckBox",c$a);var c$b=c$c.prototype;return c$b.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},c$b.initialize=function(){c$a.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},c$g(0,c$b,"dataSource",c$a.prototype._$get_dataSource,function(c$a){"boolean"==typeof(this._dataSource=c$a)?this.selected=c$a:"string"==typeof c$a?this.selected="true"===c$a:c$r.superSet(c$K,this,"dataSource",c$a)}),c$c}(c$K),c$V=function(c$a){function c$b(){this._space=0,this._align="none",this._itemChanged=!1,c$b.__super.call(this)}c$h(c$b,"laya.ui.LayoutBox",c$J);var c$c=c$b.prototype;return c$c.addChild=function(c$a){return c$a.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,c$a)},c$c.onResize=function(c$a){this._setItemChanged()},c$c.addChildAt=function(c$a,c$b){return c$a.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,c$a,c$b)},c$c.removeChild=function(c$a){return c$a.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,c$a)},c$c.removeChildAt=function(c$a){return this.getChildAt(c$a).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,c$a)},c$c.refresh=function(){this._setItemChanged()},c$c.changeItems=function(){this._itemChanged=!1},c$c.sortItem=function(c$a){c$a&&c$a.sort(function(c$a,c$b){return c$a.y-c$b.y})},c$c._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},c$g(0,c$c,"space",function(){return this._space},function(c$a){this._space=c$a,this._setItemChanged()}),c$g(0,c$c,"align",function(){return this._align},function(c$a){this._align=c$a,this._setItemChanged()}),c$b}(),c$W=function(c$b){function c$c(c$a,c$b){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,c$c.__super.call(this),c$a&&(this.skin=c$a),c$b&&(this.sheet=c$b)}c$h(c$c,"laya.ui.FontClip",c$b);var c$a=c$c.prototype;return c$a.createChildren=function(){this._bitmap=new c$G,this.on("loaded",this,this._onClipLoaded)},c$a._onClipLoaded=function(){this.callLater(this.changeValue)},c$a.changeValue=function(){var c$a;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),c$a=this._sources[0]))){var c$b="horizontal"===this._direction;c$b?(this._wordsW=this._valueArr.length*(c$a.sourceWidth+this.spaceX),this._wordsH=c$a.sourceHeight):(this._wordsW=c$a.sourceWidth,this._wordsH=(c$a.sourceHeight+this.spaceY)*this._valueArr.length);var c$c=0;if(this._width)switch(this._align){case"center":c$c=.5*(this._width-this._wordsW);break;case"right":c$c=this._width-this._wordsW;break;default:c$c=0}for(var c$d=0,c$g=this._valueArr.length;c$d<c$g;c$d++){var c$h=this._indexMap[this._valueArr.charAt(c$d)];this.sources[c$h]&&(c$a=this.sources[c$h],c$b?this.graphics.drawTexture(c$a,c$c+c$d*(c$a.sourceWidth+this.spaceX),0,c$a.sourceWidth,c$a.sourceHeight):this.graphics.drawTexture(c$a,0+c$c,c$d*(c$a.sourceHeight+this.spaceY),c$a.sourceWidth,c$a.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},c$a.destroy=function(c$a){void 0===c$a&&(c$a=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),c$b.prototype.destroy.call(this,c$a)},c$g(0,c$a,"sheet",function(){return this._sheet},function(c$a){c$a+="";var c$b=(this._sheet=c$a).split(" ");this._clipX=String(c$b[0]).length,this.clipY=c$b.length,this._indexMap={};for(var c$c=0;c$c<this._clipY;c$c++)for(var c$d=c$b[c$c].split(""),c$g=0,c$h=c$d.length;c$g<c$h;c$g++)this._indexMap[c$d[c$g]]=c$c*this._clipX+c$g}),c$g(0,c$a,"height",c$b.prototype._$get_height,function(c$a){c$r.superSet(c$L,this,"height",c$a),this.callLater(this.changeValue)}),c$g(0,c$a,"direction",function(){return this._direction},function(c$a){this._direction=c$a,this.callLater(this.changeValue)}),c$g(0,c$a,"value",function(){return this._valueArr?this._valueArr:""},function(c$a){c$a+="",this._valueArr=c$a,this.callLater(this.changeValue)}),c$g(0,c$a,"width",c$b.prototype._$get_width,function(c$a){c$r.superSet(c$L,this,"width",c$a),this.callLater(this.changeValue)}),c$g(0,c$a,"spaceX",function(){return this._spaceX},function(c$a){this._spaceX=c$a,"horizontal"===this._direction&&this.callLater(this.changeValue)}),c$g(0,c$a,"spaceY",function(){return this._spaceY},function(c$a){this._spaceY=c$a,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),c$g(0,c$a,"align",function(){return this._align},function(c$a){this._align=c$a,this.callLater(this.changeValue)}),c$g(0,c$a,"measureWidth",function(){return this._wordsW}),c$g(0,c$a,"measureHeight",function(){return this._wordsH}),c$c}(c$L),c$X=function(c$a){function c$b(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new c$q,c$b.__super.call(this)}c$h(c$b,"laya.ui.List",c$a);var c$c=c$b.prototype;return c$r.imps(c$c,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),c$c.destroy=function(c$a){void 0===c$a&&(c$a=!0),this._content&&this._content.destroy(c$a),this._scrollBar&&this._scrollBar.destroy(c$a),laya.ui.Component.prototype.destroy.call(this,c$a),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},c$c.createChildren=function(){this.addChild(this._content=new c$J)},c$c.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=c$r.superGet(c$J,this,"cacheAs")),c$r.superSet(c$J,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},c$c.onScrollEnd=function(){c$r.superSet(c$J,this,"cacheAs",this._$P.cacheAs)},c$c._removePreScrollBar=function(){var c$a=this.removeChildByName("scrollBar");c$a&&c$a.destroy(!0)},c$c.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var c$a=this._getOneCell(),c$b=c$a.width+this._spaceX||1,c$c=c$a.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/c$b):Math.ceil(this._width/c$b)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/c$c):Math.round(this._height/c$c));var c$d=this._width?this._width:c$b*this.repeatX-this._spaceX,c$g=this._height?this._height:c$c*this.repeatY-this._spaceY;this._cellSize=this._isVertical?c$c:c$b,this._cellOffset=this._isVertical?c$c*Math.max(this._repeatY2,this._repeatY)-c$g-this._spaceY:c$b*Math.max(this._repeatX2,this._repeatX)-c$d-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=c$g:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=c$d),this.setContentSize(c$d,c$g);var c$h=this._isVertical?this.repeatX:this.repeatY,c$i=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,c$h,c$i),this._createdLine=c$i,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},c$c._getOneCell=function(){if(0===this._cells.length){var c$a=this.createItem();if(this._offset.setTo(c$a.x,c$a.y),this.cacheContent)return c$a;this._cells.push(c$a)}return this._cells[0]},c$c._createItems=function(c$a,c$b,c$c){var c$d=this._content,c$g=this._getOneCell(),c$h=c$g.width+this._spaceX,c$i=c$g.height+this._spaceY;if(this.cacheContent){var c$j=new c$J;c$j.cacheAsBitmap=!0,c$j.pos((this._isVertical?0:c$a)*c$h,(this._isVertical?c$a:0)*c$i),this._content.addChild(c$j),this._content.optimizeScrollRect=!0,c$d=c$j}else{for(var c$k=[],c$l=this._cells.length-1;-1<c$l;c$l--){var c$m=this._cells[c$l];c$m.removeSelf(),c$k.push(c$m)}this._cells.length=0}for(var c$n=c$a;c$n<c$c;c$n++)for(var c$o=0;c$o<c$b;c$o++)(c$g=c$k&&c$k.length?c$k.pop():this.createItem()).x=(this._isVertical?c$o:c$n)*c$h-c$d.x,c$g.y=(this._isVertical?c$n:c$o)*c$i-c$d.y,c$g.name="item"+(c$n*c$b+c$o),c$d.addChild(c$g),this.addCell(c$g)},c$c.createItem=function(){var c$a=[];if("function"==typeof this._itemRender)var c$b=new this._itemRender;else c$b=c$T.createComp(this._itemRender,null,null,c$a);if(0==c$a.length&&c$b._watchMap){var c$c=c$b._watchMap;for(var c$d in c$c)for(var c$g=c$c[c$d],c$h=0;c$h<c$g.length;c$h++){var c$i=c$g[c$h];c$a.push(c$i.comp,c$i.prop,c$i.value)}}return c$a.length&&(c$b._$bindData=c$a),c$b},c$c.addCell=function(c$a){c$a.on("click",this,this.onCellMouse),c$a.on("rightclick",this,this.onCellMouse),c$a.on("mouseover",this,this.onCellMouse),c$a.on("mouseout",this,this.onCellMouse),c$a.on("mousedown",this,this.onCellMouse),c$a.on("mouseup",this,this.onCellMouse),this._cells.push(c$a)},c$c.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var c$a=0,c$b=c$a=0;c$b<1e4;c$b++){var c$c=this.getChildByName("item"+c$b);if(!c$c)break;this.addCell(c$c),c$a++}this.repeatY=c$a}},c$c.setContentSize=function(c$a,c$b){this._content.width=c$a,this._content.height=c$b,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new c$t),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,c$a,c$b),this._content.scrollRect=this._content.scrollRect),this.event("resize")},c$c.onCellMouse=function(c$a){"mousedown"===c$a.type&&(this._isMoved=!1);var c$b=c$a.currentTarget,c$c=this._startIndex+this._cells.indexOf(c$b);c$c<0||("click"===c$a.type||"rightclick"===c$a.type?this.selectEnable&&!this._isMoved?this.selectedIndex=c$c:this.changeCellState(c$b,!0,0):"mouseover"!==c$a.type&&"mouseout"!==c$a.type||this._selectedIndex===c$c||this.changeCellState(c$b,"mouseover"===c$a.type,0),this.mouseHandler&&this.mouseHandler.runWith([c$a,c$c]))},c$c.changeCellState=function(c$a,c$b,c$c){var c$d=c$a.getChildByName("selectBox");c$d&&(this.selectEnable=!0,c$d.visible=c$b,c$d.index=c$c)},c$c.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},c$c.onScrollBarChange=function(c$a){this.runCallLater(this.changeCells);var c$b=this._scrollBar.value,c$c=this._isVertical?this.repeatX:this.repeatY,c$d=this._isVertical?this.repeatY:this.repeatX,c$g=Math.floor(c$b/this._cellSize);if(this.cacheContent)c$i=c$d+1,this._createdLine-c$g<c$i&&(this._createItems(this._createdLine,c$c,this._createdLine+c$i),this.renderItems(this._createdLine*c$c,0),this._createdLine+=c$i);else{var c$h=c$g*c$c,c$i=0;if(c$h>this._startIndex){c$i=c$h-this._startIndex;var c$j=!0,c$k=this._startIndex+c$c*(c$d+1);this._isMoved=!0}else c$h<this._startIndex&&(c$i=this._startIndex-c$h,c$j=!1,c$k=this._startIndex-1,this._isMoved=!0);for(var c$l=0;c$l<c$i;c$l++){if(c$j){var c$m=this._cells.shift();this._cells[this._cells.length]=c$m;var c$n=c$k+c$l}else c$m=this._cells.pop(),this._cells.unshift(c$m),c$n=c$k-c$l;var c$o=Math.floor(c$n/c$c)*this._cellSize;this._isVertical?c$m.y=c$o:c$m.x=c$o,this.renderItem(c$m,c$n)}this._startIndex=c$h,this.changeSelectStatus()}var c$p=this._content.scrollRect;this._isVertical?(c$p.y=c$b-this._offset.y,c$p.x=-this._offset.x):(c$p.y=-this._offset.y,c$p.x=c$b-this._offset.x),this._content.scrollRect=c$p},c$c.posCell=function(c$a,c$b){if(this._scrollBar){var c$c=this._isVertical?this.repeatX:this.repeatY,c$d=(this._isVertical?this.repeatY:this.repeatX,Math.floor(c$b/c$c)*this._cellSize);this._isVertical?c$a.y=c$d:c$a.x=c$d}},c$c.changeSelectStatus=function(){for(var c$a=0,c$b=this._cells.length;c$a<c$b;c$a++)this.changeCellState(this._cells[c$a],this._selectedIndex===this._startIndex+c$a,1)},c$c.renderItems=function(c$a,c$b){void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=0);for(var c$c=c$a,c$d=c$b||this._cells.length;c$c<c$d;c$c++)this.renderItem(this._cells[c$c],this._startIndex+c$c);this.changeSelectStatus()},c$c.renderItem=function(c$a,c$b){this._array&&0<=c$b&&c$b<this._array.length?(c$a.visible=!0,c$a._$bindData?(c$a._dataSource=this._array[c$b],this._bindData(c$a,this._array[c$b])):c$a.dataSource=this._array[c$b],this.cacheContent||this.posCell(c$a,c$b),this.hasListener("render")&&this.event("render",[c$a,c$b]),this.renderHandler&&this.renderHandler.runWith([c$a,c$b])):(c$a.visible=!1,c$a.dataSource=null)},c$c._bindData=function(c$a,c$b){for(var c$c=c$a._$bindData,c$d=0,c$g=c$c.length;c$d<c$g;c$d++){var c$h=c$c[c$d++],c$i=c$c[c$d++],c$j=c$c[c$d],c$k=c$E.getBindFun(c$j);c$h[c$i]=c$k.call(this,c$b)}},c$c.refresh=function(){this.array=this._array},c$c.getItem=function(c$a){return-1<c$a&&c$a<this._array.length?this._array[c$a]:null},c$c.changeItem=function(c$a,c$b){-1<c$a&&c$a<this._array.length&&(this._array[c$a]=c$b,c$a>=this._startIndex&&c$a<this._startIndex+this._cells.length&&this.renderItem(this.getCell(c$a),c$a))},c$c.setItem=function(c$a,c$b){this.changeItem(c$a,c$b)},c$c.addItem=function(c$a){this._array.push(c$a),this.array=this._array},c$c.addItemAt=function(c$a,c$b){this._array.splice(c$b,0,c$a),this.array=this._array},c$c.deleteItem=function(c$a){this._array.splice(c$a,1),this.array=this._array},c$c.getCell=function(c$a){return this.runCallLater(this.changeCells),-1<c$a&&this._cells?this._cells[(c$a-this._startIndex)%this._cells.length]:null},c$c.scrollTo=function(c$a){if(this._scrollBar){var c$b=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(c$a/c$b)*this._cellSize}else this.startIndex=c$a},c$c.tweenTo=function(c$a,c$b,c$c){if(void 0===c$b&&(c$b=200),this._scrollBar){var c$d=this._isVertical?this.repeatX:this.repeatY;c$z.to(this._scrollBar,{value:Math.floor(c$a/c$d)*this._cellSize},c$b,null,c$c,0,!0)}else this.startIndex=c$a,c$c&&c$c.run()},c$c._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},c$c.commitMeasure=function(){this.runCallLater(this.changeCells)},c$g(0,c$c,"cacheAs",c$a.prototype._$get_cacheAs,function(c$a){c$r.superSet(c$J,this,"cacheAs",c$a),this._scrollBar&&(this._$P.cacheAs=null,"none"!==c$a?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),c$g(0,c$c,"content",function(){return this._content}),c$g(0,c$c,"height",c$a.prototype._$get_height,function(c$a){c$a!=this._height&&(c$r.superSet(c$J,this,"height",c$a),this._setCellChanged())}),c$g(0,c$c,"itemRender",function(){return this._itemRender},function(c$a){if(this._itemRender!=c$a){this._itemRender=c$a;for(var c$b=this._cells.length-1;-1<c$b;c$b--)this._cells[c$b].destroy();this._cells.length=0,this._setCellChanged()}}),c$g(0,c$c,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(c$a){this._removePreScrollBar();var c$b=new c$ba;c$b.name="scrollBar",c$b.right=0,c$a&&" "!=c$a&&(c$b.skin=c$a),this.scrollBar=c$b,this.addChild(c$b),this._setCellChanged()}),c$g(0,c$c,"page",function(){return this._page},function(c$a){this._page=c$a,this._array&&(this._page=0<c$a?c$a:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),c$g(0,c$c,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(c$a){this._removePreScrollBar();var c$b=new c$Y;c$b.name="scrollBar",c$b.bottom=0,c$a&&" "!=c$a&&(c$b.skin=c$a),this.scrollBar=c$b,this.addChild(c$b),this._setCellChanged()}),c$g(0,c$c,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(c$a){this._repeatX=c$a,this._setCellChanged()}),c$g(0,c$c,"scrollBar",function(){return this._scrollBar},function(c$a){this._scrollBar!=c$a&&(this._scrollBar=c$a)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),c$g(0,c$c,"width",c$a.prototype._$get_width,function(c$a){c$a!=this._width&&(c$r.superSet(c$J,this,"width",c$a),this._setCellChanged())}),c$g(0,c$c,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(c$a){this._repeatY=c$a,this._setCellChanged()}),c$g(0,c$c,"spaceX",function(){return this._spaceX},function(c$a){this._spaceX=c$a,this._setCellChanged()}),c$g(0,c$c,"spaceY",function(){return this._spaceY},function(c$a){this._spaceY=c$a,this._setCellChanged()}),c$g(0,c$c,"selectedIndex",function(){return this._selectedIndex},function(c$a){this._selectedIndex!=c$a&&(this._selectedIndex=c$a,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(c$a),this.startIndex=this._startIndex)}),c$g(0,c$c,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(c$a){this.selectedIndex=this._array.indexOf(c$a)}),c$g(0,c$c,"length",function(){return this._array?this._array.length:0}),c$g(0,c$c,"selection",function(){return this.getCell(this._selectedIndex)},function(c$a){this.selectedIndex=this._startIndex+this._cells.indexOf(c$a)}),c$g(0,c$c,"startIndex",function(){return this._startIndex},function(c$a){this._startIndex=0<c$a?c$a:0,this.callLater(this.renderItems)}),c$g(0,c$c,"array",function(){return this._array},function(c$a){this.runCallLater(this.changeCells),this._array=c$a||[];var c$b=this._array.length;if(this.totalPage=Math.ceil(c$b/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<c$b?this._selectedIndex:c$b-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var c$c=this._isVertical?this.repeatX:this.repeatY,c$d=this._isVertical?this.repeatY:this.repeatX,c$g=Math.ceil(c$b/c$c);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=c$d/c$g,this._scrollBar.setScroll(0,(c$g-c$d)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),c$g(0,c$c,"dataSource",c$a.prototype._$get_dataSource,function(c$a){"number"==typeof(this._dataSource=c$a)&&Math.floor(c$a)==c$a||"string"==typeof c$a?this.selectedIndex=parseInt(c$a):c$a instanceof Array?this.array=c$a:c$r.superSet(c$J,this,"dataSource",c$a)}),c$g(0,c$c,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),c$b}(c$J),c$Y=function(c$a){function c$b(){c$b.__super.call(this)}return c$h(c$b,"laya.ui.HScrollBar",c$a),c$b.prototype.initialize=function(){c$a.prototype.initialize.call(this),this.slider.isVertical=!1},c$b}(c$O),c$Z=function(c$a){function c$b(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,c$b.__super.call(this),this.width=this.height=100}c$h(c$b,"laya.ui.Panel",c$a);var c$c=c$b.prototype;return c$c.destroy=function(c$a){void 0===c$a&&(c$a=!0),laya.ui.Component.prototype.destroy.call(this,c$a),this._content&&this._content.destroy(c$a),this._vScrollBar&&this._vScrollBar.destroy(c$a),this._hScrollBar&&this._hScrollBar.destroy(c$a),this._vScrollBar=null,this._hScrollBar=null,this._content=null},c$c.destroyChildren=function(){this._content.destroyChildren()},c$c.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new c$J)},c$c.addChild=function(c$a){return c$a.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(c$a)},c$c.onResize=function(){this._setScrollChanged()},c$c.addChildAt=function(c$a,c$b){return c$a.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(c$a,c$b)},c$c.removeChild=function(c$a){return c$a.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(c$a)},c$c.removeChildAt=function(c$a){return this.getChildAt(c$a).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(c$a)},c$c.removeChildren=function(c$a,c$b){return void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=2147483647),this._content.removeChildren(c$a,c$b),this._setScrollChanged(),this},c$c.getChildAt=function(c$a){return this._content.getChildAt(c$a)},c$c.getChildByName=function(c$a){return this._content.getChildByName(c$a)},c$c.getChildIndex=function(c$a){return this._content.getChildIndex(c$a)},c$c.changeScroll=function(){this._scrollChanged=!1;var c$a=this.contentWidth||1,c$b=this.contentHeight||1,c$c=this._vScrollBar,c$d=this._hScrollBar,c$g=c$c&&c$b>this._height,c$h=c$d&&c$a>this._width,c$i=c$g?this._width-c$c.width:this._width,c$j=c$h?this._height-c$d.height:this._height;c$c&&(c$c.x=this._width-c$c.width,c$c.y=0,c$c.height=this._height-(c$h?c$d.height:0),c$c.scrollSize=Math.max(.033*this._height,1),c$c.thumbPercent=c$j/c$b,c$c.setScroll(0,c$b-c$j,c$c.value)),c$d&&(c$d.x=0,c$d.y=this._height-c$d.height,c$d.width=this._width-(c$g?c$c.width:0),c$d.scrollSize=Math.max(.033*this._width,1),c$d.thumbPercent=c$i/c$a,c$d.setScroll(0,c$a-c$i,c$d.value))},c$c.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},c$c.setContentSize=function(c$a,c$b){var c$c=this._content;c$c.width=c$a,c$c.height=c$b,c$c.scrollRect||(c$c.scrollRect=new c$t),c$c.scrollRect.setTo(0,0,c$a,c$b),c$c.scrollRect=c$c.scrollRect},c$c.onScrollBarChange=function(c$a){var c$b=this._content.scrollRect;if(c$b){var c$c=Math.round(c$a.value);c$a.isVertical?c$b.y=c$c:c$b.x=c$c,this._content.scrollRect=c$b}},c$c.scrollTo=function(c$a,c$b){void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=0),this.vScrollBar&&(this.vScrollBar.value=c$b),this.hScrollBar&&(this.hScrollBar.value=c$a)},c$c.refresh=function(){this.changeScroll()},c$c.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=c$r.superGet(c$J,this,"cacheAs")),c$r.superSet(c$J,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},c$c.onScrollEnd=function(){c$r.superSet(c$J,this,"cacheAs",this._$P.cacheAs)},c$c._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},c$g(0,c$c,"numChildren",function(){return this._content.numChildren}),c$g(0,c$c,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(c$a){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new c$Y),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=c$a}),c$g(0,c$c,"contentWidth",function(){for(var c$a=0,c$b=this._content.numChildren-1;-1<c$b;c$b--){var c$c=this._content.getChildAt(c$b);c$a=Math.max(c$c.x+c$c.width*c$c.scaleX,c$a)}return c$a}),c$g(0,c$c,"contentHeight",function(){for(var c$a=0,c$b=this._content.numChildren-1;-1<c$b;c$b--){var c$c=this._content.getChildAt(c$b);c$a=Math.max(c$c.y+c$c.height*c$c.scaleY,c$a)}return c$a}),c$g(0,c$c,"width",c$a.prototype._$get_width,function(c$a){c$r.superSet(c$J,this,"width",c$a),this._setScrollChanged()}),c$g(0,c$c,"hScrollBar",function(){return this._hScrollBar}),c$g(0,c$c,"content",function(){return this._content}),c$g(0,c$c,"height",c$a.prototype._$get_height,function(c$a){c$r.superSet(c$J,this,"height",c$a),this._setScrollChanged()}),c$g(0,c$c,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(c$a){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new c$ba),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=c$a}),c$g(0,c$c,"vScrollBar",function(){return this._vScrollBar}),c$g(0,c$c,"cacheAs",c$a.prototype._$get_cacheAs,function(c$a){c$r.superSet(c$J,this,"cacheAs",c$a),this._$P.cacheAs=null,"none"!==c$a?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),c$b}(c$J),c$$=function(c$a){function c$b(c$a){c$b.__super.call(this,c$a),this.isVertical=!1}return c$h(c$b,"laya.ui.HSlider",c$P),c$b}(),c$_=function(c$a){function c$c(c$a,c$b){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,c$c.__super.call(this),this.skin=c$b,this.labels=c$a}c$h(c$c,"laya.ui.UIGroup",c$a);var c$b=c$c.prototype;return c$r.imps(c$b,{"laya.ui.IItem":!0}),c$b.preinitialize=function(){this.mouseEnabled=!0},c$b.destroy=function(c$a){void 0===c$a&&(c$a=!0),laya.ui.Component.prototype.destroy.call(this,c$a),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},c$b.addItem=function(c$a,c$b){void 0===c$b&&(c$b=!0);var c$c=c$a,c$d=this._items.length;if(c$c.name="item"+c$d,this.addChild(c$c),this.initItems(),c$b&&0<c$d){var c$g=this._items[c$d-1];"horizontal"==this._direction?c$c.x=c$g.x+c$g.width+this._space:c$c.y=c$g.y+c$g.height+this._space}else c$b&&(c$c.x=0,c$c.y=0);return c$d},c$b.delItem=function(c$a,c$b){void 0===c$b&&(c$b=!0);var c$c=this._items.indexOf(c$a);if(-1!=c$c){var c$d=c$a;this.removeChild(c$d);for(var c$g=c$c+1,c$h=this._items.length;c$g<c$h;c$g++){var c$i=this._items[c$g];c$i.name="item"+(c$g-1),c$b&&("horizontal"==this._direction?c$i.x-=c$d.width+this._space:c$i.y-=c$d.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var c$j;c$j=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=c$j}}},c$b.initItems=function(){this._items||(this._items=[]);for(var c$a=this._items.length=0;c$a<1e4;c$a++){var c$b=this.getChildByName("item"+c$a);if(null==c$b)break;this._items.push(c$b),c$b.selected=c$a===this._selectedIndex,c$b.clickHandler=c$o.create(this,this.itemClick,[c$a],!1)}},c$b.itemClick=function(c$a){this.selectedIndex=c$a},c$b.setSelect=function(c$a,c$b){this._items&&-1<c$a&&c$a<this._items.length&&(this._items[c$a].selected=c$b)},c$b.createItem=function(c$a,c$b){return null},c$b.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var c$a=0,c$b=0,c$c=this._items.length;c$b<c$c;c$b++){var c$d=this._items[c$b];this._skin&&(c$d.skin=this._skin),this._labelColors&&(c$d.labelColors=this._labelColors),this._labelSize&&(c$d.labelSize=this._labelSize),this._labelStroke&&(c$d.labelStroke=this._labelStroke),this._labelStrokeColor&&(c$d.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(c$d.strokeColors=this._strokeColors),this._labelBold&&(c$d.labelBold=this._labelBold),this._labelPadding&&(c$d.labelPadding=this._labelPadding),this._labelAlign&&(c$d.labelAlign=this._labelAlign),this._stateNum&&(c$d.stateNum=this._stateNum),this._labelFont&&(c$d.labelFont=this._labelFont),"horizontal"===this._direction?(c$d.y=0,c$d.x=c$a,c$a+=c$d.width+this._space):(c$d.x=0,c$d.y=c$a,c$a+=c$d.height+this._space)}this.changeSize()},c$b.commitMeasure=function(){this.runCallLater(this.changeLabels)},c$b._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},c$g(0,c$b,"labelStrokeColor",function(){return this._labelStrokeColor},function(c$a){this._labelStrokeColor!=c$a&&(this._labelStrokeColor=c$a,this._setLabelChanged())}),c$g(0,c$b,"skin",function(){return this._skin},function(c$a){this._skin!=c$a&&(this._skin=c$a,this._setLabelChanged())}),c$g(0,c$b,"selectedIndex",function(){return this._selectedIndex},function(c$a){this._selectedIndex!=c$a&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=c$a,this.setSelect(c$a,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),c$g(0,c$b,"labels",function(){return this._labels},function(c$a){if(this._labels!=c$a){if(this._labels=c$a,this.removeChildren(),this._setLabelChanged(),this._labels)for(var c$b=this._labels.split(","),c$c=0,c$d=c$b.length;c$c<c$d;c$c++){var c$g=this.createItem(this._skin,c$b[c$c]);c$g.name="item"+c$c,this.addChild(c$g)}this.initItems()}}),c$g(0,c$b,"strokeColors",function(){return this._strokeColors},function(c$a){this._strokeColors!=c$a&&(this._strokeColors=c$a,this._setLabelChanged())}),c$g(0,c$b,"labelColors",function(){return this._labelColors},function(c$a){this._labelColors!=c$a&&(this._labelColors=c$a,this._setLabelChanged())}),c$g(0,c$b,"labelStroke",function(){return this._labelStroke},function(c$a){this._labelStroke!=c$a&&(this._labelStroke=c$a,this._setLabelChanged())}),c$g(0,c$b,"labelSize",function(){return this._labelSize},function(c$a){this._labelSize!=c$a&&(this._labelSize=c$a,this._setLabelChanged())}),c$g(0,c$b,"stateNum",function(){return this._stateNum},function(c$a){this._stateNum!=c$a&&(this._stateNum=c$a,this._setLabelChanged())}),c$g(0,c$b,"labelBold",function(){return this._labelBold},function(c$a){this._labelBold!=c$a&&(this._labelBold=c$a,this._setLabelChanged())}),c$g(0,c$b,"labelFont",function(){return this._labelFont},function(c$a){this._labelFont!=c$a&&(this._labelFont=c$a,this._setLabelChanged())}),c$g(0,c$b,"labelPadding",function(){return this._labelPadding},function(c$a){this._labelPadding!=c$a&&(this._labelPadding=c$a,this._setLabelChanged())}),c$g(0,c$b,"direction",function(){return this._direction},function(c$a){this._direction=c$a,this._setLabelChanged()}),c$g(0,c$b,"space",function(){return this._space},function(c$a){this._space=c$a,this._setLabelChanged()}),c$g(0,c$b,"items",function(){return this._items}),c$g(0,c$b,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(c$a){this.selectedIndex=this._items.indexOf(c$a)}),c$g(0,c$b,"dataSource",c$a.prototype._$get_dataSource,function(c$a){"number"==typeof(this._dataSource=c$a)&&Math.floor(c$a)==c$a||"string"==typeof c$a?this.selectedIndex=parseInt(c$a):c$a instanceof Array?this.labels=c$a.join(","):c$r.superSet(c$J,this,"dataSource",c$a)}),c$c}(c$J),c$e=function(c$b){function c$c(c$a,c$b){this._value=null,void 0===c$b&&(c$b=""),c$c.__super.call(this,c$a,c$b)}c$h(c$c,"laya.ui.Radio",c$b);var c$a=c$c.prototype;return c$a.destroy=function(c$a){void 0===c$a&&(c$a=!0),c$b.prototype.destroy.call(this,c$a),this._value=null},c$a.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},c$a.initialize=function(){c$b.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},c$a.onClick=function(c$a){this.selected=!0},c$g(0,c$a,"value",function(){return null!=this._value?this._value:this.label},function(c$a){this._value=c$a}),c$c}(c$K),c$f=function(c$a){function c$b(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,c$b.__super.call(this),this.width=this.height=200}c$h(c$b,"laya.ui.Tree",c$a);var c$c=c$b.prototype;return c$r.imps(c$c,{"laya.ui.IRender":!0}),c$c.destroy=function(c$a){void 0===c$a&&(c$a=!0),laya.ui.Component.prototype.destroy.call(this,c$a),this._list&&this._list.destroy(c$a),this._list=null,this._source=null,this._renderHandler=null},c$c.createChildren=function(){this.addChild(this._list=new c$X),this._list.renderHandler=c$o.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},c$c.onListChange=function(c$a){this.event("change")},c$c.getArray=function(){var c$a,c$b=[];for(var c$c in this._source)c$a=this._source[c$c],this.getParentOpenStatus(c$a)&&(c$a.x=this._spaceLeft*this.getDepth(c$a),c$b.push(c$a));return c$b},c$c.getDepth=function(c$a,c$b){return void 0===c$b&&(c$b=0),null==c$a.nodeParent?c$b:this.getDepth(c$a.nodeParent,c$b+1)},c$c.getParentOpenStatus=function(c$a){var c$b=c$a.nodeParent;return null==c$b||!!c$b.isOpen&&(null==c$b.nodeParent||this.getParentOpenStatus(c$b))},c$c.renderItem=function(c$a,c$b){var c$c=c$a.dataSource;if(c$c){c$a.left=c$c.x;var c$d=c$a.getChildByName("arrow");c$d&&(c$c.hasChild?(c$d.visible=!0,c$d.index=c$c.isOpen?1:0,c$d.tag=c$b,c$d.off("click",this,this.onArrowClick),c$d.on("click",this,this.onArrowClick)):c$d.visible=!1);var c$g=c$a.getChildByName("folder");c$g&&(2==c$g.clipY?c$g.index=c$c.isDirectory?0:1:c$g.index=c$c.isDirectory?c$c.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([c$a,c$b])}},c$c.onArrowClick=function(c$a){var c$b=c$a.currentTarget.tag;this._list.array[c$b].isOpen=!this._list.array[c$b].isOpen,this.event("open"),this._list.array=this.getArray()},c$c.setItemState=function(c$a,c$b){this._list.array[c$a]&&(this._list.array[c$a].isOpen=c$b,this._list.array=this.getArray())},c$c.fresh=function(){this._list.array=this.getArray(),this.repaint()},c$c.parseXml=function(c$a,c$b,c$c,c$d){var c$g,c$h=c$a.childNodes,c$i=c$h.length;if(!c$d){c$g={};var c$j,c$k=c$a.attributes;for(var c$l in c$k){var c$m=(c$j=c$k[c$l]).nodeName,c$n=c$j.nodeValue;c$g[c$m]="true"==c$n||"false"!=c$n&&c$n}c$g.nodeParent=c$c,0<c$i&&(c$g.isDirectory=!0),c$g.hasChild=0<c$i,c$b.push(c$g)}for(var c$o=0;c$o<c$i;c$o++){var c$p=c$h[c$o];this.parseXml(c$p,c$b,c$g,!1)}},c$c.parseOpenStatus=function(c$a,c$b){for(var c$c=0,c$d=c$b.length;c$c<c$d;c$c++){var c$g=c$b[c$c];if(c$g.isDirectory)for(var c$h=0,c$i=c$a.length;c$h<c$i;c$h++){var c$j=c$a[c$h];if(c$j.isDirectory&&this.isSameParent(c$j,c$g)&&c$g.label==c$j.label){c$g.isOpen=c$j.isOpen;break}}}},c$c.isSameParent=function(c$a,c$b){return null==c$a.nodeParent&&null==c$b.nodeParent||null!=c$a.nodeParent&&null!=c$b.nodeParent&&(c$a.nodeParent.label==c$b.nodeParent.label&&this.isSameParent(c$a.nodeParent,c$b.nodeParent))},c$c.filter=function(c$a){if(Boolean(c$a)){var c$b=[];this.getFilterSource(this._source,c$b,c$a),this._list.array=c$b}else this._list.array=this.getArray()},c$c.getFilterSource=function(c$a,c$b,c$c){var c$d;for(var c$g in c$c=c$c.toLocaleLowerCase(),c$a)!(c$d=c$a[c$g]).isDirectory&&-1<String(c$d.label).toLowerCase().indexOf(c$c)&&(c$d.x=0,c$b.push(c$d)),c$d.child&&0<c$d.child.length&&this.getFilterSource(c$d.child,c$b,c$c)},c$g(0,c$c,"spaceBottom",function(){return this._list.spaceY},function(c$a){this._list.spaceY=c$a}),c$g(0,c$c,"keepStatus",function(){return this._keepStatus},function(c$a){this._keepStatus=c$a}),c$g(0,c$c,"itemRender",function(){return this._list.itemRender},function(c$a){this._list.itemRender=c$a}),c$g(0,c$c,"array",function(){return this._list.array},function(c$a){this._keepStatus&&this._list.array&&c$a&&this.parseOpenStatus(this._list.array,c$a),this._source=c$a,this._list.array=this.getArray()}),c$g(0,c$c,"mouseHandler",function(){return this._list.mouseHandler},function(c$a){this._list.mouseHandler=c$a}),c$g(0,c$c,"dataSource",c$a.prototype._$get_dataSource,function(c$a){this._dataSource=c$a,c$r.superSet(c$J,this,"dataSource",c$a)}),c$g(0,c$c,"source",function(){return this._source}),c$g(0,c$c,"scrollBar",function(){return this._list.scrollBar}),c$g(0,c$c,"list",function(){return this._list}),c$g(0,c$c,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(c$a){this._list.vScrollBarSkin=c$a}),c$g(0,c$c,"renderHandler",function(){return this._renderHandler},function(c$a){this._renderHandler=c$a}),c$g(0,c$c,"selectedIndex",function(){return this._list.selectedIndex},function(c$a){this._list.selectedIndex=c$a}),c$g(0,c$c,"spaceLeft",function(){return this._spaceLeft},function(c$a){this._spaceLeft=c$a}),c$g(0,c$c,"selectedItem",function(){return this._list.selectedItem},function(c$a){this._list.selectedItem=c$a}),c$g(0,c$c,"width",c$a.prototype._$get_width,function(c$a){c$r.superSet(c$J,this,"width",c$a),this._list.width=c$a}),c$g(0,c$c,"height",c$a.prototype._$get_height,function(c$a){c$r.superSet(c$J,this,"height",c$a),this._list.height=c$a}),c$g(0,c$c,"xml",null,function(c$a){var c$b=[];this.parseXml(c$a.childNodes[0],c$b,null,!0),this.array=c$b}),c$g(0,c$c,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),c$b}(c$J),c$aa=function(c$a){function c$b(){this._items=null,this._selectedIndex=0,c$b.__super.call(this),this._setIndexHandler=c$o.create(this,this.setIndex,null,!1)}c$h(c$b,"laya.ui.ViewStack",c$a);var c$c=c$b.prototype;return c$r.imps(c$c,{"laya.ui.IItem":!0}),c$c.setItems=function(c$a){this.removeChildren();for(var c$b=0,c$c=0,c$d=c$a.length;c$c<c$d;c$c++){var c$g=c$a[c$c];c$g&&(c$g.name="item"+c$b,this.addChild(c$g),c$b++)}this.initItems()},c$c.addItem=function(c$a){c$a.name="item"+this._items.length,this.addChild(c$a),this.initItems()},c$c.initItems=function(){this._items=[];for(var c$a=0;c$a<1e4;c$a++){var c$b=this.getChildByName("item"+c$a);if(null==c$b)break;this._items.push(c$b),c$b.visible=c$a==this._selectedIndex}},c$c.setSelect=function(c$a,c$b){this._items&&-1<c$a&&c$a<this._items.length&&(this._items[c$a].visible=c$b)},c$c.setIndex=function(c$a){this.selectedIndex=c$a},c$g(0,c$c,"dataSource",c$a.prototype._$get_dataSource,function(c$a){if("number"==typeof(this._dataSource=c$a)&&Math.floor(c$a)==c$a||"string"==typeof c$a)this.selectedIndex=parseInt(c$a);else for(var c$b in this._dataSource)this.hasOwnProperty(c$b)&&(this[c$b]=this._dataSource[c$b])}),c$g(0,c$c,"selectedIndex",function(){return this._selectedIndex},function(c$a){this._selectedIndex!=c$a&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=c$a,this.setSelect(this._selectedIndex,!0))}),c$g(0,c$c,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(c$a){this.selectedIndex=this._items.indexOf(c$a)}),c$g(0,c$c,"items",function(){return this._items}),c$g(0,c$c,"setIndexHandler",function(){return this._setIndexHandler},function(c$a){this._setIndexHandler=c$a}),c$b}(c$J),c$ba=function(c$a){function c$b(){c$b.__super.call(this)}return c$h(c$b,"laya.ui.VScrollBar",c$O),c$b}(),c$ca=function(c$b){function c$c(c$a){this._bg=null,this._skin=null,c$c.__super.call(this),void 0===c$a&&(c$a=""),this.text=c$a,this.skin=this.skin}c$h(c$c,"laya.ui.TextInput",c$b);var c$a=c$c.prototype;return c$a.preinitialize=function(){this.mouseEnabled=!0},c$a.destroy=function(c$a){c$u.clearCache(this,this._skin),void 0===c$a&&(c$a=!0),c$b.prototype.destroy.call(this,c$a),this._bg&&this._bg.destroy(),this._bg=null},c$a.createChildren=function(){this.addChild(this._tf=new c$p),this._tf.padding=c$D.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},c$a._onFocus=function(){this.event("focus",this)},c$a._onBlur=function(){this.event("blur",this)},c$a._onInput=function(){this.event("input",this)},c$a._onEnter=function(){this.event("enter",this)},c$a.initialize=function(){this.width=128,this.height=22},c$a.select=function(){this._tf.select()},c$a.setSelection=function(c$a,c$b){this._tf.setSelection(c$a,c$b)},c$g(0,c$a,"text",c$b.prototype._$get_text,function(c$a){this._tf.text!=c$a&&(c$a+="",this._tf.text=c$a,this.event("change"))}),c$g(0,c$a,"bg",function(){return this._bg},function(c$a){this.graphics=this._bg=c$a}),c$g(0,c$a,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(c$a){this._tf.inputElementYAdjuster=c$a}),c$g(0,c$a,"multiline",function(){return this._tf.multiline},function(c$a){this._tf.multiline=c$a}),c$g(0,c$a,"skin",function(){return this._skin},function(c$a){this._skin!=c$a&&(c$u.clearCache(this,this._skin),this._skin=c$a,this._bg||(this.graphics=this._bg=new c$G),c$u.keepCache(this,this._skin),this._bg.source=c$u.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),c$g(0,c$a,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(c$a){this._bg||(this.graphics=this._bg=new c$G),this._bg.sizeGrid=c$E.fillArray(c$D.defaultSizeGrid,c$a,Number)}),c$g(0,c$a,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(c$a){this._tf.inputElementXAdjuster=c$a}),c$g(0,c$a,"width",c$b.prototype._$get_width,function(c$a){c$r.superSet(c$R,this,"width",c$a),this._bg&&(this._bg.width=c$a)}),c$g(0,c$a,"height",c$b.prototype._$get_height,function(c$a){c$r.superSet(c$R,this,"height",c$a),this._bg&&(this._bg.height=c$a)}),c$g(0,c$a,"editable",function(){return this._tf.editable},function(c$a){this._tf.editable=c$a}),c$g(0,c$a,"restrict",function(){return this._tf.restrict},function(c$a){this._tf.restrict=c$a}),c$g(0,c$a,"prompt",function(){return this._tf.prompt},function(c$a){this._tf.prompt=c$a}),c$g(0,c$a,"promptColor",function(){return this._tf.promptColor},function(c$a){this._tf.promptColor=c$a}),c$g(0,c$a,"maxChars",function(){return this._tf.maxChars},function(c$a){this._tf.maxChars=c$a}),c$g(0,c$a,"focus",function(){return this._tf.focus},function(c$a){this._tf.focus=c$a}),c$g(0,c$a,"type",function(){return this._tf.type},function(c$a){this._tf.type=c$a}),c$g(0,c$a,"asPassword",function(){return this._tf.asPassword},function(c$a){this._tf.asPassword=c$a}),c$c}(c$R),c$da=function(c$a){function c$b(){c$b.__super.call(this)}return c$h(c$b,"laya.ui.VSlider",c$P),c$b}(),c$ga=function(c$a){function c$d(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,c$d.__super.call(this)}c$h(c$d,"laya.ui.Dialog",c$a);var c$b=c$d.prototype;return c$b.initialize=function(){this.popupEffect=c$d.manager.popupEffectHandler,this.closeEffect=c$d.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},c$b._dealDragArea=function(){var c$a=this.getChildByName("drag");c$a&&(this.dragArea=c$a.x+","+c$a.y+","+c$a.width+","+c$a.height,c$a.removeSelf())},c$b._onClick=function(c$a){var c$b=c$a.target;if(c$b)switch(c$b.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(c$b.name)}},c$b.show=function(c$a,c$b){void 0===c$a&&(c$a=!1),void 0===c$b&&(c$b=!0),this._open(!1,c$a,c$b)},c$b.popup=function(c$a,c$b){void 0===c$a&&(c$a=!1),void 0===c$b&&(c$b=!0),this._open(!0,c$a,c$b)},c$b._open=function(c$a,c$b,c$c){c$d.manager.lock(!1),this.isModal=c$a,c$d.manager.open(this,c$b,c$c)},c$b.onOpened=function(){},c$b.close=function(c$a,c$b){void 0===c$b&&(c$b=!0),c$d.manager.close(this,c$a,c$b)},c$b.onClosed=function(c$a){},c$b._onMouseDown=function(c$a){var c$b=this.getMousePoint();this._dragArea.contains(c$b.x,c$b.y)?this.startDrag():this.stopDrag()},c$g(0,c$b,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(c$a){if(c$a){var c$b=c$E.fillArray([0,0,0,0],c$a,Number);this._dragArea=new c$t(c$b[0],c$b[1],c$b[2],c$b[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),c$g(0,c$b,"isPopup",function(){return null!=this.parent}),c$g(0,c$b,"zOrder",c$a.prototype._$get_zOrder,function(c$a){c$r.superSet(c$T,this,"zOrder",c$a),c$d.manager._checkMask()}),c$g(1,c$d,"manager",function(){return c$d._manager=c$d._manager||new c$I},function(c$a){c$d._manager=c$a}),c$d.setLockView=function(c$a){c$d.manager.setLockView(c$a)},c$d.lock=function(c$a){c$d.manager.lock(c$a)},c$d.closeAll=function(){c$d.manager.closeAll()},c$d.getDialogsByGroup=function(c$a){return c$d.manager.getDialogsByGroup(c$a)},c$d.closeByGroup=function(c$a){return c$d.manager.closeByGroup(c$a)},c$d.CLOSE="close",c$d.CANCEL="cancel",c$d.SURE="sure",c$d.NO="no",c$d.OK="ok",c$d.YES="yes",c$d._manager=null,c$d}(c$T),c$ha=function(c$a){function c$b(){c$b.__super.call(this)}c$h(c$b,"laya.ui.HBox",c$a);var c$c=c$b.prototype;return c$c.sortItem=function(c$a){c$a&&c$a.sort(function(c$a,c$b){return c$a.x-c$b.x})},c$c.changeItems=function(){this._itemChanged=!1;for(var c$a=[],c$b=0,c$c=0,c$d=this.numChildren;c$c<c$d;c$c++){var c$g=this.getChildAt(c$c);c$g&&c$g.layoutEnabled&&(c$a.push(c$g),c$b=this._height?this._height:Math.max(c$b,c$g.height*c$g.scaleY))}this.sortItem(c$a);var c$h=0;for(c$c=0,c$d=c$a.length;c$c<c$d;c$c++)(c$g=c$a[c$c]).x=c$h,c$h+=c$g.width*c$g.scaleX+this._space,"top"==this._align?c$g.y=0:"middle"==this._align?c$g.y=.5*(c$b-c$g.height*c$g.scaleY):"bottom"==this._align&&(c$g.y=c$b-c$g.height*c$g.scaleY);this.changeSize()},c$g(0,c$c,"height",c$a.prototype._$get_height,function(c$a){this._height!=c$a&&(c$r.superSet(c$V,this,"height",c$a),this.callLater(this.changeItems))}),c$b.NONE="none",c$b.TOP="top",c$b.MIDDLE="middle",c$b.BOTTOM="bottom",c$b}(c$V),c$ia=function(c$a){function c$b(){c$b.__super.call(this)}c$h(c$b,"laya.ui.VBox",c$a);var c$c=c$b.prototype;return c$c.changeItems=function(){this._itemChanged=!1;for(var c$a=[],c$b=0,c$c=0,c$d=this.numChildren;c$c<c$d;c$c++){var c$g=this.getChildAt(c$c);c$g&&c$g.layoutEnabled&&(c$a.push(c$g),c$b=this._width?this._width:Math.max(c$b,c$g.width*c$g.scaleX))}this.sortItem(c$a);var c$h=0;for(c$c=0,c$d=c$a.length;c$c<c$d;c$c++)(c$g=c$a[c$c]).y=c$h,c$h+=c$g.height*c$g.scaleY+this._space,"left"==this._align?c$g.x=0:"center"==this._align?c$g.x=.5*(c$b-c$g.width*c$g.scaleX):"right"==this._align&&(c$g.x=c$b-c$g.width*c$g.scaleX);this.changeSize()},c$g(0,c$c,"width",c$a.prototype._$get_width,function(c$a){this._width!=c$a&&(c$r.superSet(c$V,this,"width",c$a),this.callLater(this.changeItems))}),c$b.NONE="none",c$b.LEFT="left",c$b.CENTER="center",c$b.RIGHT="right",c$b}(c$V),c$ja=function(c$a){function c$b(){c$b.__super.call(this)}return c$h(c$b,"laya.ui.RadioGroup",c$_),c$b.prototype.createItem=function(c$a,c$b){return new c$e(c$a,c$b)},c$b}(),c$ka=function(c$a){function c$b(){c$b.__super.call(this)}return c$h(c$b,"laya.ui.Tab",c$_),c$b.prototype.createItem=function(c$a,c$b){return new c$K(c$a,c$b)},c$b}(),c$la=function(c$b){function c$c(c$a){this._vScrollBar=null,this._hScrollBar=null,void 0===c$a&&(c$a=""),c$c.__super.call(this,c$a)}c$h(c$c,"laya.ui.TextArea",c$b);var c$a=c$c.prototype;return c$a.destroy=function(c$a){void 0===c$a&&(c$a=!0),c$b.prototype.destroy.call(this,c$a),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},c$a.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},c$a.onVBarChanged=function(c$a){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},c$a.onHBarChanged=function(c$a){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},c$a.changeScroll=function(){var c$a=this._vScrollBar&&0<this._tf.maxScrollY,c$b=this._hScrollBar&&0<this._tf.maxScrollX,c$c=c$a?this._width-this._vScrollBar.width:this._width,c$d=c$b?this._height-this._hScrollBar.height:this._height,c$g=this._tf.padding||c$D.labelPadding;this._tf.width=c$c,this._tf.height=c$d,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-c$g[2],this._vScrollBar.y=c$g[1],this._vScrollBar.height=this._height-(c$b?this._hScrollBar.height:0)-c$g[1]-c$g[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=c$d/Math.max(this._tf.textHeight,c$d),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=c$a),this._hScrollBar&&(this._hScrollBar.x=c$g[0],this._hScrollBar.y=this._height-this._hScrollBar.height-c$g[3],this._hScrollBar.width=this._width-(c$a?this._vScrollBar.width:0)-c$g[0]-c$g[2],this._hScrollBar.scrollSize=Math.max(.033*c$c,1),this._hScrollBar.thumbPercent=c$c/Math.max(this._tf.textWidth,c$c),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=c$b)},c$a.scrollTo=function(c$a){this.commitMeasure(),this._tf.scrollY=c$a},c$g(0,c$a,"scrollY",function(){return this._tf.scrollY}),c$g(0,c$a,"width",c$b.prototype._$get_width,function(c$a){c$r.superSet(c$ca,this,"width",c$a),this.callLater(this.changeScroll)}),c$g(0,c$a,"hScrollBar",function(){return this._hScrollBar}),c$g(0,c$a,"height",c$b.prototype._$get_height,function(c$a){c$r.superSet(c$ca,this,"height",c$a),this.callLater(this.changeScroll)}),c$g(0,c$a,"maxScrollX",function(){return this._tf.maxScrollX}),c$g(0,c$a,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(c$a){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new c$ba),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=c$a}),c$g(0,c$a,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(c$a){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new c$Y),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=c$a}),c$g(0,c$a,"vScrollBar",function(){return this._vScrollBar}),c$g(0,c$a,"maxScrollY",function(){return this._tf.maxScrollY}),c$g(0,c$a,"scrollX",function(){return this._tf.scrollX}),c$c}(c$ca);!function(c$a){function c$b(){this._uiView=null,this.isCloseOther=!1,c$b.__super.call(this)}c$h(c$b,"laya.ui.AsynDialog",c$ga);var c$c=c$b.prototype;c$c.createView=function(c$a){this._uiView=c$a},c$c._open=function(c$a,c$b,c$c){this.isModal=c$a,this.isCloseOther=c$b,c$ga.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},c$c.onCreated=function(){this.createUI(),this.onOpen()},c$c.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},c$c.onOpen=function(){c$ga.manager.open(this,this.isCloseOther),c$ga.manager.lock(!1)},c$c.close=function(c$a,c$b){void 0===c$b&&(c$b=!0),c$ga.manager.close(this),this.onClose()},c$c.onClose=function(){},c$c.destroy=function(c$a){void 0===c$a&&(c$a=!0),laya.ui.View.prototype.destroy.call(this,c$a),this._uiView=null,this.onDestroy()},c$c.onDestroy=function(){}}();c$r.__init([c$T])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(c$a,c$b){"use strict";for(var c$c in Object.defineProperty(c$b,"__esModule",{value:!0}),Laya){var c$d=Laya[c$c];c$d&&c$d.__isclass&&(c$b[c$c]=c$d)}}),function(c$o,c$a,c$x){c$x.un,c$x.uns;var c$n=c$x.static,c$p=c$x.class,c$q=c$x.getset,c$d=c$x.__newvec,c$w=laya.maths.Arith,c$i=laya.webgl.atlas.AtlasResourceManager,c$c=laya.webgl.shader.BaseShader,c$H=laya.utils.Browser,c$j=laya.webgl.utils.Buffer,c$y=laya.utils.Byte,c$g=laya.utils.ClassUtils,c$k=c$x.Config,c$h=(laya.events.Event,laya.events.EventDispatcher),c$D=laya.utils.Handler,c$t=laya.net.Loader,c$b=laya.net.LoaderManager,c$l=(laya.maths.MathUtil,laya.display.Node),c$r=laya.renders.Render,c$m=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),c$s=laya.resource.Resource,c$u=laya.utils.RunDriver,c$v=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),c$z=laya.display.Sprite,c$A=laya.utils.Stat,c$B=laya.utils.StringKey,c$E=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),c$C=laya.utils.Utils,c$F=laya.webgl.WebGL,c$G=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;c$x.interface("laya.d3.core.IClone"),c$x.interface("laya.d3.graphics.IVertex"),c$x.interface("laya.d3.core.render.IUpdate"),c$x.interface("laya.d3.core.scene.ITreeNode"),c$x.interface("laya.d3.core.render.IRenderable");(function(){function c$K(){}c$p(c$K,"laya.d3.animation.AnimationClipParser01"),c$K.READ_DATA=function(){c$K._DATA.offset=c$K._reader.getUint32(),c$K._DATA.size=c$K._reader.getUint32()},c$K.READ_BLOCK=function(){for(var c$a=c$K._BLOCK.count=c$K._reader.getUint16(),c$b=c$K._BLOCK.blockStarts=[],c$c=c$K._BLOCK.blockLengths=[],c$d=0;c$d<c$a;c$d++)c$b.push(c$K._reader.getUint32()),c$c.push(c$K._reader.getUint32())},c$K.READ_STRINGS=function(){var c$a=c$K._reader.getUint32(),c$b=c$K._reader.getUint16(),c$c=c$K._reader.pos;c$K._reader.pos=c$a+c$K._DATA.offset;for(var c$d=0;c$d<c$b;c$d++)c$K._strings[c$d]=c$K._reader.readUTFString();c$K._reader.pos=c$c},c$K.parse=function(c$a,c$b){c$K._animationClip=c$a;(c$K._reader=c$b).__getBuffer();c$K.READ_DATA(),c$K.READ_BLOCK(),c$K.READ_STRINGS();for(var c$c=0,c$d=c$K._BLOCK.count;c$c<c$d;c$c++){var c$g=c$b.getUint16(),c$h=c$K._strings[c$g],c$i=c$K["READ_"+c$h];if(null==c$i)throw new Error("model file err,no this function:"+c$g+" "+c$h);c$i.call()}},c$K.READ_ANIMATIONS=function(){var c$a,c$b=0,c$c=0,c$d=c$K._reader,c$g=c$d.__getBuffer(),c$h=[],c$i=c$d.getUint8();for(c$h.length=c$i,c$b=0;c$b<c$i;c$b++)c$h[c$b]=c$d.getUint16();var c$j=[],c$k=c$d.getUint16();for(c$j.length=c$k,c$b=0;c$b<c$k;c$b++)c$j[c$b]=c$d.getFloat32();var c$l=c$K._animationClip;c$l.name=c$K._strings[c$d.getUint16()];var c$m=c$l._duration=c$d.getFloat32();c$l.islooping=!!c$d.getByte(),c$l._frameRate=c$d.getInt16();var c$n=c$d.getInt16(),c$o=c$l._nodes=new Array;c$o.length=c$n,(c$l._publicClipDatas=[]).length=c$n;var c$p=c$l._nodesMap={},c$q=0,c$r=0;for(c$b=0;c$b<c$n;c$b++){c$a=c$o[c$b]=new c$S;var c$s=c$d.getUint16(),c$t=c$a.path=[];for(c$t.length=c$s,c$c=0;c$c<c$s;c$c++)c$t[c$c]=c$K._strings[c$d.getUint16()];var c$u=c$t.join("/"),c$v=c$p[c$u];c$v||(c$p[c$u]=c$v=[]),c$v.push(c$a);var c$w=c$d.getInt16();-1!==c$w&&(c$a.componentType=c$K._strings[c$w]);var c$x=c$Q._propertyIndexDic[c$K._strings[c$d.getUint16()]];if(null==c$x)throw new Error("AnimationClipParser01:unknown property name.");var c$y=c$x<4,c$z=!c$y||c$y&&""===c$t[0];(c$a._cacheProperty=c$z)?c$q++:c$r++,c$a.propertyNameID=c$x;var c$A=c$h[c$d.getUint8()];c$a.keyFrameWidth=c$A/4;var c$B=c$a.keyFrames=[],c$C=c$B.length=c$d.getUint16(),c$D=null,c$E=NaN;for(c$c=0;c$c<c$C;c$c++){var c$F=c$B[c$c]=new c$R;c$E=c$F.startTime=c$j[c$d.getUint16()];var c$G=c$d.pos;c$F.inTangent=new Float32Array(c$g.slice(c$G,c$G+c$A)),c$d.pos+=c$A,c$G=c$d.pos,c$F.outTangent=new Float32Array(c$g.slice(c$G,c$G+c$A)),c$d.pos+=c$A,c$G=c$d.pos,c$F.data=new Float32Array(c$g.slice(c$G,c$G+c$A)),c$d.pos+=c$A,c$D&&(c$D.next=c$F,c$D.duration=c$E-c$D.startTime),c$D=c$F}c$F.next=null,c$F.duration=c$m-c$E}var c$H=c$l._nodeToCachePropertyMap=new Int32Array(c$n),c$I=c$l._cachePropertyMap=new Int32Array(c$q),c$J=c$l._unCachePropertyMap=new Int32Array(c$r);for(c$q=c$r=0,c$b=0;c$b<c$n;c$b++)(c$a=c$o[c$b])._cacheProperty?(c$H[c$b]=c$q,c$I[c$q++]=c$b):c$J[c$r++]=c$b},c$K._animationClip=null,c$K._reader=null,c$K._strings=[],c$n(c$K,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function c$O(){}c$p(c$O,"laya.d3.animation.AnimationClipParser02"),c$O.READ_DATA=function(){c$O._DATA.offset=c$O._reader.getUint32(),c$O._DATA.size=c$O._reader.getUint32()},c$O.READ_BLOCK=function(){for(var c$a=c$O._BLOCK.count=c$O._reader.getUint16(),c$b=c$O._BLOCK.blockStarts=[],c$c=c$O._BLOCK.blockLengths=[],c$d=0;c$d<c$a;c$d++)c$b.push(c$O._reader.getUint32()),c$c.push(c$O._reader.getUint32())},c$O.READ_STRINGS=function(){var c$a=c$O._reader.getUint32(),c$b=c$O._reader.getUint16(),c$c=c$O._reader.pos;c$O._reader.pos=c$a+c$O._DATA.offset;for(var c$d=0;c$d<c$b;c$d++)c$O._strings[c$d]=c$O._reader.readUTFString();c$O._reader.pos=c$c},c$O.parse=function(c$a,c$b){c$O._animationClip=c$a;(c$O._reader=c$b).__getBuffer();c$O.READ_DATA(),c$O.READ_BLOCK(),c$O.READ_STRINGS();for(var c$c=0,c$d=c$O._BLOCK.count;c$c<c$d;c$c++){var c$g=c$b.getUint16(),c$h=c$O._strings[c$g],c$i=c$O["READ_"+c$h];if(null==c$i)throw new Error("model file err,no this function:"+c$g+" "+c$h);c$i.call()}},c$O.READ_ANIMATIONS=function(){var c$a,c$b=0,c$c=0,c$d=c$O._reader,c$g=c$d.__getBuffer(),c$h=[],c$i=c$d.getUint8();for(c$h.length=c$i,c$b=0;c$b<c$i;c$b++)c$h[c$b]=c$d.getUint16();var c$j=[],c$k=c$d.getUint16();for(c$j.length=c$k,c$b=0;c$b<c$k;c$b++)c$j[c$b]=c$d.getFloat32();var c$l=c$O._animationClip;c$l.name=c$O._strings[c$d.getUint16()];var c$m=c$l._duration=c$d.getFloat32();c$l.islooping=!!c$d.getByte(),c$l._frameRate=c$d.getInt16();var c$n=c$d.getInt16(),c$o=c$l._nodes=new Array;c$o.length=c$n,(c$l._publicClipDatas=[]).length=c$n;var c$p=c$l._nodesMap={},c$q=0,c$r=0;for(c$b=0;c$b<c$n;c$b++){c$a=c$o[c$b]=new c$S;var c$s=c$d.getUint16(),c$t=c$a.path=[];for(c$t.length=c$s,c$c=0;c$c<c$s;c$c++)c$t[c$c]=c$O._strings[c$d.getUint16()];var c$u=c$t.join("/"),c$v=c$p[c$u];c$v||(c$p[c$u]=c$v=[]),c$v.push(c$a);var c$w=c$d.getInt16();-1!==c$w&&(c$a.componentType=c$O._strings[c$w]);var c$x=c$Q._propertyIndexDic[c$O._strings[c$d.getUint16()]];if(null==c$x)throw new Error("AnimationClipParser02:unknown property name.");var c$y=c$x<4,c$z=!c$y||c$y&&""===c$t[0];(c$a._cacheProperty=c$z)?c$q++:c$r++,c$a.propertyNameID=c$x;var c$A=c$h[c$d.getUint8()];c$a.keyFrameWidth=c$A/4;var c$B=c$a.keyFrames=[],c$C=c$B.length=c$d.getUint16(),c$D=null,c$E=NaN;for(c$c=0;c$c<c$C;c$c++){var c$F=c$B[c$c]=new c$R;c$E=c$F.startTime=c$j[c$d.getUint16()];var c$G=c$d.pos;c$F.inTangent=new Float32Array(c$g.slice(c$G,c$G+c$A)),c$d.pos+=c$A,c$G=c$d.pos,c$F.outTangent=new Float32Array(c$g.slice(c$G,c$G+c$A)),c$d.pos+=c$A,c$G=c$d.pos,c$F.data=new Float32Array(c$g.slice(c$G,c$G+c$A)),c$d.pos+=c$A,c$D&&(c$D.next=c$F,c$D.duration=c$E-c$D.startTime),c$D=c$F}c$F.next=null,c$F.duration=c$m-c$E}var c$H=c$d.getUint16();for(c$b=0;c$b<c$H;c$b++){var c$I,c$J=new c$P;c$J.time=c$d.getFloat32(),c$J.eventName=c$O._strings[c$d.getUint16()];var c$K=c$d.getUint16();for(0<c$K&&(c$J.params=c$I=[]),c$c=0;c$c<c$K;c$c++){switch(c$d.getByte()){case 0:c$I.push(!!c$d.getByte());break;case 1:c$I.push(c$d.getInt32());break;case 2:c$I.push(c$d.getFloat32());break;case 3:c$I.push(c$O._strings[c$d.getUint16()]);break;default:throw new Error("unknown type.")}}c$l.addEvent(c$J)}var c$L=c$l._nodeToCachePropertyMap=new Int32Array(c$n),c$M=c$l._cachePropertyMap=new Int32Array(c$q),c$N=c$l._unCachePropertyMap=new Int32Array(c$r);for(c$q=c$r=0,c$b=0;c$b<c$n;c$b++)(c$a=c$o[c$b])._cacheProperty?(c$L[c$b]=c$q,c$M[c$q++]=c$b):c$N[c$r++]=c$b},c$O._animationClip=null,c$O._reader=null,c$O._strings=[],c$n(c$O,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var c$P=function(){function c$a(){this.time=NaN,this.eventName=null,this.params=null}return c$p(c$a,"laya.d3.animation.AnimationEvent"),c$a}(),c$Q=function(){function c$d(){this._childs=[],this.transform=new c$ub(this)}c$p(c$d,"laya.d3.animation.AnimationNode");var c$a=c$d.prototype;return c$x.imps(c$a,{"laya.d3.core.IClone":!0}),c$a.addChild=function(c$a){c$a._parent=this,c$a.transform.setParent(this.transform),this._childs.push(c$a)},c$a.removeChild=function(c$a){var c$b=this._childs.indexOf(c$a);-1!==c$b&&this._childs.splice(c$b,1)},c$a.getChildByName=function(c$a){for(var c$b=0,c$c=this._childs.length;c$b<c$c;c$b++){var c$d=this._childs[c$b];if(c$d.name===c$a)return c$d}return null},c$a.getChildByIndex=function(c$a){return this._childs[c$a]},c$a.getChildCount=function(){return this._childs.length},c$a.cloneTo=function(c$a){var c$b=c$a;c$b.name=this.name;for(var c$c=0,c$d=this._childs.length;c$c<c$d;c$c++){var c$g=this._childs[c$c],c$h=c$g.clone();c$b.addChild(c$h);var c$i=c$g.transform,c$j=c$h.transform;c$j.setLocalPosition(c$i.getLocalPosition()),c$j.setLocalRotation(c$i.getLocalRotation()),c$j.setLocalScale(c$i.getLocalScale()),c$j._localRotationEuler=c$i._localRotationEuler,c$j._setWorldMatrixIgnoreUpdate(c$i.getWorldMatrix())}},c$a.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$d.__init__=function(){c$d.registerAnimationNodeProperty("localPosition",c$d._getLocalPosition,c$d._setLocalPosition),c$d.registerAnimationNodeProperty("localRotation",c$d._getLocalRotation,c$d._setLocalRotation),c$d.registerAnimationNodeProperty("localScale",c$d._getLocalScale,c$d._setLocalScale),c$d.registerAnimationNodeProperty("localRotationEuler",c$d._getLocalRotationEuler,c$d._setLocalRotationEuler),c$d.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",c$d._getParticleRenderSharedMaterialTintColor,c$d._setParticleRenderSharedMaterialTintColor),c$d.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",c$d._getMeshRenderSharedMaterialTilingOffset,c$d._setMeshRenderSharedMaterialTilingOffset),c$d.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",c$d._getMeshRenderSharedMaterialAlbedo,c$d._setMeshRenderSharedMaterialAlbedo),c$d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",c$d._getSkinnedMeshRenderSharedMaterialTilingOffset,c$d._setSkinnedMeshRenderSharedMaterialTilingOffset),c$d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",c$d._getSkinnedMeshRenderSharedMaterialAlbedo,c$d._setSkinnedMeshRenderSharedMaterialAlbedo),c$d.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",c$d._getMeshRenderSharedMaterialAlbedo,c$d._setMeshRenderSharedMaterialAlbedo),c$d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",c$d._getSkinnedMeshRenderSharedMaterialAlbedo,c$d._setSkinnedMeshRenderSharedMaterialAlbedo),c$d.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",c$d._getMeshRenderSharedMaterialIntensity,c$d._setMeshRenderSharedMaterialIntensity),c$d.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",c$d._getMeshRenderSharedMaterialAlpha,c$d._setMeshRenderSharedMaterialAlpha),c$d.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",c$d._getMeshRenderSharedMaterialAlphaColor,c$d._setMeshRenderSharedMaterialAlphaColor),c$d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",c$d._getMeshRenderSharedMaterialBaseColor,c$d._setMeshRenderSharedMaterialBaseColor),c$d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",c$d._getMeshRenderSharedMaterialDissolve,c$d._setMeshRenderSharedMaterialDissolve),c$d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",c$d._getMeshRenderSharedMaterialDissolveSpeed,c$d._setMeshRenderSharedMaterialDissolveSpeed),c$d.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",c$d._getMeshRenderSharedMaterialMMultiplier,c$d._setMeshRenderSharedMaterialMMultiplier),c$d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",c$d._getMeshRenderSharedMaterialBaseScrollSpeedX,c$d._setMeshRenderSharedMaterialBaseScrollSpeedX),c$d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",c$d._getMeshRenderSharedMaterialBaseScrollSpeedY,c$d._setMeshRenderSharedMaterialBaseScrollSpeedY),c$d.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",c$d._getMeshRenderSharedMaterialSecondScrollSpeedX,c$d._setMeshRenderSharedMaterialSecondScrollSpeedX),c$d.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",c$d._getMeshRenderSharedMaterialSecondScrollSpeedY,c$d._setMeshRenderSharedMaterialSecondScrollSpeedY),c$d.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",c$d._getMeshRenderSharedMaterialDetailTilingOffset,c$d._setMeshRenderSharedMaterialDetailTilingOffset),c$d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",c$d._getMeshRenderSharedMaterialDissolveTilingOffset,c$d._setMeshRenderSharedMaterialDissolveTilingOffset),c$d.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",c$d._getMeshRenderSharedMaterialMaskTilingOffset,c$d._setMeshRenderSharedMaterialMaskTilingOffset)},c$d.registerAnimationNodeProperty=function(c$a,c$b,c$c){if(c$d._propertyIndexDic[c$a])throw new Error("AnimationNode: this propertyName has registered.");c$d._propertyIndexDic[c$a]=c$d._propertyIDCounter,c$d._propertyGetFuncs[c$d._propertyIDCounter]=c$b,c$d._propertySetFuncs[c$d._propertyIDCounter]=c$c,c$d._propertyIDCounter++},c$d._getLocalPosition=function(c$a,c$b){return c$a?c$a.transform.getLocalPosition():c$b._transform.localPosition.elements},c$d._setLocalPosition=function(c$a,c$b,c$c){if(c$a)c$a.transform.setLocalPosition(c$c);else{var c$d=c$b._transform,c$g=c$d.localPosition;c$g.elements=c$c,c$d.localPosition=c$g}},c$d._getLocalRotation=function(c$a,c$b){return c$a?c$a.transform.getLocalRotation():c$b._transform.localRotation.elements},c$d._setLocalRotation=function(c$a,c$b,c$c){if(c$a)c$a.transform.setLocalRotation(c$c);else{var c$d=c$b._transform,c$g=c$d.localRotation;c$g.elements=c$c,c$d.localRotation=c$g}},c$d._getLocalScale=function(c$a,c$b){return c$a?c$a.transform.getLocalScale():c$b._transform.localScale.elements},c$d._setLocalScale=function(c$a,c$b,c$c){if(c$a)c$a.transform.setLocalScale(c$c);else{var c$d=c$b._transform,c$g=c$d.localScale;c$g.elements=c$c,c$d.localScale=c$g}},c$d._getLocalRotationEuler=function(c$a,c$b){return c$a?c$a.transform.getLocalRotationEuler():c$b._transform.localRotationEuler.elements},c$d._setLocalRotationEuler=function(c$a,c$b,c$c){if(c$a)c$a.transform.setLocalRotationEuler(c$c);else{var c$d=c$b._transform,c$g=c$d.localRotationEuler;c$g.elements=c$c,c$d.localRotationEuler=c$g}},c$d._getMeshRenderSharedMaterialTilingOffset=function(c$a,c$b){if(c$a){var c$c=c$a.transform._entity;return c$c?c$c.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return c$b.meshRender.sharedMaterial.tilingOffset.elements},c$d._setMeshRenderSharedMaterialTilingOffset=function(c$a,c$b,c$c){var c$d,c$g;if(c$a){var c$h=c$a.transform._entity;c$h&&((c$g=(c$d=c$h.owner.meshRender.material).tilingOffset).elements=c$c,c$d.tilingOffset=c$g)}else(c$g=(c$d=c$b.meshRender.material).tilingOffset).elements=c$c,c$d.tilingOffset=c$g},c$d._getMeshRenderSharedMaterialAlbedo=function(c$a,c$b){if(c$a){var c$c=c$a.transform._entity;return c$c?c$c.owner.meshRender.sharedMaterial.albedoColor.elements:null}return c$b.meshRender.sharedMaterial.albedoColor.elements},c$d._setMeshRenderSharedMaterialAlbedo=function(c$a,c$b,c$c){var c$d,c$g;if(c$a){var c$h=c$a.transform._entity;c$h&&((c$g=(c$d=c$h.owner.meshRender.material).albedoColor).elements=c$c,c$d.albedoColor=c$g)}else(c$g=(c$d=c$b.meshRender.material).albedoColor).elements=c$c,c$d.albedoColor=c$g},c$d._getSkinnedMeshRenderSharedMaterialTilingOffset=function(c$a,c$b){if(c$a){var c$c=c$a.transform._entity;return c$c?c$c.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return c$b.skinnedMeshRender.sharedMaterial.tilingOffset.elements},c$d._setSkinnedMeshRenderSharedMaterialTilingOffset=function(c$a,c$b,c$c){var c$d,c$g;if(c$a){var c$h=c$a.transform._entity;c$h&&((c$g=(c$d=c$h.owner.skinnedMeshRender.material).tilingOffset).elements=c$c,c$d.tilingOffset=c$g)}else(c$g=(c$d=c$b.skinnedMeshRender.material).tilingOffset).elements=c$c,c$d.tilingOffset=c$g},c$d._getSkinnedMeshRenderSharedMaterialAlbedo=function(c$a,c$b){if(c$a){var c$c=c$a.transform._entity;return c$c?c$c.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return c$b.skinnedMeshRender.sharedMaterial.albedoColor.elements},c$d._setSkinnedMeshRenderSharedMaterialAlbedo=function(c$a,c$b,c$c){var c$d,c$g;if(c$a){var c$h=c$a.transform._entity;c$h&&((c$g=(c$d=c$h.owner.skinnedMeshRender.material).albedoColor).elements=c$c,c$d.albedoColor=c$g)}else(c$g=(c$d=c$b.skinnedMeshRender.material).albedoColor).elements=c$c,c$d.albedoColor=c$g},c$d._getParticleRenderSharedMaterialTintColor=function(c$a,c$b){if(c$a){var c$c=c$a.transform._entity;return c$c?c$c.owner.particleRender.sharedMaterial.tintColor.elements:null}return c$b.particleRender.sharedMaterial.tintColor.elements},c$d._setParticleRenderSharedMaterialTintColor=function(c$a,c$b,c$c){var c$d,c$g;if(c$a){var c$h=c$a.transform._entity;c$h&&((c$g=(c$d=c$h.owner.particleRender.material).tintColor).elements=c$c,c$d.tintColor=c$g)}else(c$g=(c$d=c$b.particleRender.material).tintColor).elements=c$c,c$d.tintColor=c$g},c$d._getMeshRenderSharedMaterialAlphaColor=function(c$a,c$b){if(c$a){var c$c=c$a.transform._entity;return c$c?c$c.owner.meshRender.sharedMaterial.alphaColor.elements:null}return c$b.meshRender.sharedMaterial.alphaColor.elements},c$d._setMeshRenderSharedMaterialAlphaColor=function(c$a,c$b,c$c){var c$d,c$g;if(c$a){var c$h=c$a.transform._entity;c$h&&((c$g=(c$d=c$h.owner.meshRender.material).alphaColor).elements=c$c,c$d.alphaColor=c$g)}else(c$g=(c$d=c$b.meshRender.material).alphaColor).elements=c$c,c$d.alphaColor=c$g},c$d._getMeshRenderSharedMaterialBaseColor=function(c$a,c$b){if(c$a){var c$c=c$a.transform._entity;return c$c?c$c.owner.meshRender.sharedMaterial.baseColor.elements:null}return c$b.meshRender.sharedMaterial.baseColor.elements},c$d._setMeshRenderSharedMaterialBaseColor=function(c$a,c$b,c$c){var c$d,c$g;if(c$a){var c$h=c$a.transform._entity;c$h&&((c$g=(c$d=c$h.owner.meshRender.material).baseColor).elements=c$c,c$d.baseColor=c$g)}else(c$g=(c$d=c$b.meshRender.material).baseColor).elements=c$c,c$d.baseColor=c$g},c$d._getMeshRenderSharedMaterialDissolve=function(c$a,c$b){if(c$a){var c$c=c$a.transform._entity;return c$c?c$c.owner.meshRender.sharedMaterial.dissolve:0}return c$b.meshRender.sharedMaterial.dissolve},c$d._setMeshRenderSharedMaterialDissolve=function(c$a,c$b,c$c){if(c$a){var c$d=c$a.transform._entity;c$d&&(c$d.owner.meshRender.material.dissolve=c$c[0])}else c$b.meshRender.material.dissolve=c$c[0]},c$d._getMeshRenderSharedMaterialDissolveSpeed=function(c$a,c$b){if(c$a){var c$c=c$a.transform._entity;return c$c?c$c.owner.meshRender.sharedMaterial.dissolveSpeed:0}return c$b.meshRender.sharedMaterial.dissolveSpeed},c$d._setMeshRenderSharedMaterialDissolveSpeed=function(c$a,c$b,c$c){if(c$a){var c$d=c$a.transform._entity;c$d&&(c$d.owner.meshRender.material.dissolveSpeed=c$c[0])}else c$b.meshRender.material.dissolveSpeed=c$c[0]},c$d._getMeshRenderSharedMaterialMMultiplier=function(c$a,c$b){if(c$a){var c$c=c$a.transform._entity;return c$c?c$c.owner.meshRender.sharedMaterial.mMultiplier:0}return c$b.meshRender.sharedMaterial.mMultiplier},c$d._setMeshRenderSharedMaterialMMultiplier=function(c$a,c$b,c$c){if(c$a){var c$d=c$a.transform._entity;c$d&&(c$d.owner.meshRender.material.mMultiplier=c$c[0])}else c$b.meshRender.material.mMultiplier=c$c[0]},c$d._getMeshRenderSharedMaterialBaseScrollSpeedX=function(c$a,c$b){if(c$a){var c$c=c$a.transform._entity;return c$c?c$c.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return c$b.meshRender.sharedMaterial.baseScrollSpeedX},c$d._setMeshRenderSharedMaterialBaseScrollSpeedX=function(c$a,c$b,c$c){if(c$a){var c$d=c$a.transform._entity;c$d&&(c$d.owner.meshRender.material.baseScrollSpeedX=c$c[0])}else c$b.meshRender.material.baseScrollSpeedX=c$c[0]},c$d._getMeshRenderSharedMaterialBaseScrollSpeedY=function(c$a,c$b){if(c$a){var c$c=c$a.transform._entity;return c$c?c$c.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return c$b.meshRender.sharedMaterial.baseScrollSpeedY},c$d._setMeshRenderSharedMaterialBaseScrollSpeedY=function(c$a,c$b,c$c){if(c$a){var c$d=c$a.transform._entity;c$d&&(c$d.owner.meshRender.material.baseScrollSpeedY=c$c[0])}else c$b.meshRender.material.baseScrollSpeedY=c$c[0]},c$d._getMeshRenderSharedMaterialSecondScrollSpeedX=function(c$a,c$b){if(c$a){var c$c=c$a.transform._entity;return c$c?c$c.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return c$b.meshRender.sharedMaterial.secondScrollSpeedX},c$d._setMeshRenderSharedMaterialSecondScrollSpeedX=function(c$a,c$b,c$c){if(c$a){var c$d=c$a.transform._entity;c$d&&(c$d.owner.meshRender.material.secondScrollSpeedX=c$c[0])}else c$b.meshRender.material.secondScrollSpeedX=c$c[0]},c$d._getMeshRenderSharedMaterialSecondScrollSpeedY=function(c$a,c$b){if(c$a){var c$c=c$a.transform._entity;return c$c?c$c.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return c$b.meshRender.sharedMaterial.secondScrollSpeedY},c$d._setMeshRenderSharedMaterialSecondScrollSpeedY=function(c$a,c$b,c$c){if(c$a){var c$d=c$a.transform._entity;c$d&&(c$d.owner.meshRender.material.secondScrollSpeedY=c$c[0])}else c$b.meshRender.material.secondScrollSpeedY=c$c[0]},c$d._getMeshRenderSharedMaterialAlpha=function(c$a,c$b){if(c$a){var c$c=c$a.transform._entity;return c$c?c$c.owner.meshRender.sharedMaterial.alpha:0}return c$b.meshRender.sharedMaterial.alpha},c$d._setMeshRenderSharedMaterialAlpha=function(c$a,c$b,c$c){if(c$a){var c$d=c$a.transform._entity;c$d&&(c$d.owner.meshRender.material.alpha=c$c[0])}else c$b.meshRender.material.alpha=c$c[0]},c$d._getMeshRenderSharedMaterialIntensity=function(c$a,c$b){if(c$a){var c$c=c$a.transform._entity;return c$c?c$c.owner.meshRender.sharedMaterial.intensity:0}return c$b.meshRender.sharedMaterial.intensity},c$d._setMeshRenderSharedMaterialIntensity=function(c$a,c$b,c$c){if(c$a){var c$d=c$a.transform._entity;c$d&&(c$d.owner.meshRender.material.intensity=c$c[0])}else c$b.meshRender.material.intensity=c$c[0]},c$d._getMeshRenderSharedMaterialDetailTilingOffset=function(c$a,c$b){if(c$a){var c$c=c$a.transform._entity;return c$c?c$c.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return c$b.meshRender.sharedMaterial.detailTilingOffset.elements},c$d._setMeshRenderSharedMaterialDetailTilingOffset=function(c$a,c$b,c$c){var c$d,c$g;if(c$a){var c$h=c$a.transform._entity;c$h&&((c$g=(c$d=c$h.owner.meshRender.material).detailTilingOffset).elements=c$c,c$d.detailTilingOffset=c$g)}else(c$g=(c$d=c$b.meshRender.material).detailTilingOffset).elements=c$c,c$d.detailTilingOffset=c$g},c$d._getMeshRenderSharedMaterialDissolveTilingOffset=function(c$a,c$b){if(c$a){var c$c=c$a.transform._entity;return c$c?c$c.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return c$b.meshRender.sharedMaterial.dissolveTilingOffset.elements},c$d._setMeshRenderSharedMaterialDissolveTilingOffset=function(c$a,c$b,c$c){var c$d,c$g;if(c$a){var c$h=c$a.transform._entity;c$h&&((c$g=(c$d=c$h.owner.meshRender.material).dissolveTilingOffset).elements=c$c,c$d.dissolveTilingOffset=c$g)}else(c$g=(c$d=c$b.meshRender.material).dissolveTilingOffset).elements=c$c,c$d.dissolveTilingOffset=c$g},c$d._getMeshRenderSharedMaterialMaskTilingOffset=function(c$a,c$b){if(c$a){var c$c=c$a.transform._entity;return c$c?c$c.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return c$b.meshRender.sharedMaterial.maskTilingOffset.elements},c$d._setMeshRenderSharedMaterialMaskTilingOffset=function(c$a,c$b,c$c){var c$d,c$g;if(c$a){var c$h=c$a.transform._entity;c$h&&((c$g=(c$d=c$h.owner.meshRender.material).maskTilingOffset).elements=c$c,c$d.maskTilingOffset=c$g)}else(c$g=(c$d=c$b.meshRender.material).maskTilingOffset).elements=c$c,c$d.maskTilingOffset=c$g},c$d._propertyIDCounter=0,c$d._propertyIndexDic={},c$d._propertySetFuncs=[],c$d._propertyGetFuncs=[],c$d}(),c$R=function(){function c$a(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return c$p(c$a,"laya.d3.animation.Keyframe"),c$a}(),c$S=function(){function c$a(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return c$p(c$a,"laya.d3.animation.KeyframeNode"),c$a}(),c$I=(function(){function c$a(){this._tempVector30=new c$ib,this._tempVector31=new c$ib,this._tempVector32=new c$ib,this._a=new c$ib,this._b=new c$ib,this._c=new c$ib,this._d=new c$ib}c$p(c$a,"laya.d3.core.glitter.SplineCurvePositionVelocity");var c$b=c$a.prototype;c$b.Init=function(c$a,c$b,c$c,c$d){c$a.cloneTo(this._d),c$b.cloneTo(this._c),c$ib.scale(c$a,2,this._a),c$ib.scale(c$c,2,this._tempVector30),c$ib.subtract(this._a,this._tempVector30,this._a),c$ib.add(this._a,c$b,this._a),c$ib.add(this._a,c$d,this._a),c$ib.scale(c$c,3,this._b),c$ib.scale(c$a,3,this._tempVector30),c$ib.subtract(this._b,this._tempVector30,this._b),c$ib.subtract(this._b,c$d,this._b),c$ib.scale(c$b,2,this._tempVector30),c$ib.subtract(this._b,this._tempVector30,this._b)},c$b.Slerp=function(c$a,c$b){c$ib.scale(this._a,c$a*c$a*c$a,this._tempVector30),c$ib.scale(this._b,c$a*c$a,this._tempVector31),c$ib.scale(this._c,c$a,this._tempVector32),c$ib.add(this._tempVector30,this._tempVector31,c$b),c$ib.add(c$b,this._tempVector32,c$b),c$ib.add(c$b,this._d,c$b)}}(),function(){function c$M(c$a,c$b,c$c,c$d){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=c$a,this._h=c$b,this._minHeight=c$c,this._maxHeight=c$d}c$p(c$M,"laya.d3.core.HeightMap");var c$a=c$M.prototype;c$a._inBounds=function(c$a,c$b){return 0<=c$a&&c$a<this._h&&0<=c$b&&c$b<this._w},c$a.getHeight=function(c$a,c$b){return this._inBounds(c$a,c$b)?this._datas[c$a][c$b]:NaN},c$q(0,c$a,"width",function(){return this._w}),c$q(0,c$a,"height",function(){return this._h}),c$q(0,c$a,"maxHeight",function(){return this._maxHeight}),c$q(0,c$a,"minHeight",function(){return this._minHeight}),c$M.creatFromMesh=function(c$a,c$b,c$c,c$d){for(var c$g=[],c$h=[],c$i=c$a.getSubMeshCount(),c$j=0;c$j<c$i;c$j++){for(var c$k=c$a.getSubMesh(c$j),c$l=c$k._getVertexBuffer(),c$m=c$l.getData(),c$n=[],c$o=0;c$o<c$m.length;c$o+=c$l.vertexDeclaration.vertexStride/4){var c$p=new c$ib(c$m[c$o+0],c$m[c$o+1],c$m[c$o+2]);c$n.push(c$p)}c$g.push(c$n);var c$q=c$k._getIndexBuffer();c$h.push(c$q.getData())}var c$r=c$a.boundingBox,c$s=c$r.min.x,c$t=c$r.min.z,c$u=c$r.max.x,c$v=c$r.max.z,c$w=c$r.min.y,c$x=c$r.max.y,c$y=c$u-c$s,c$z=c$v-c$t,c$A=c$d.elements[0]=c$y/(c$b-1),c$B=c$d.elements[1]=c$z/(c$c-1),c$C=new c$M(c$b,c$c,c$w,c$x),c$D=c$M._tempRay,c$E=c$D.direction.elements;c$E[0]=0,c$E[1]=-1,c$E[2]=0;var c$F=c$x+.1;c$D.origin.elements[1]=c$F;for(var c$G=0;c$G<c$c;c$G++){var c$H=c$t+c$G*c$B;c$C._datas[c$G]=[];for(var c$I=0;c$I<c$b;c$I++){var c$J=c$s+c$I*c$A,c$K=c$D.origin.elements;c$K[0]=c$J,c$K[2]=c$H;var c$L=c$M._getPosition(c$D,c$g,c$h);c$C._datas[c$G][c$I]=c$L===Number.MAX_VALUE?NaN:c$F-c$L}}return c$C},c$M.createFromImage=function(c$a,c$b,c$c){for(var c$d=c$a.width,c$g=c$a.height,c$h=new c$M(c$d,c$g,c$b,c$c),c$i=(c$c-c$b)/254,c$j=c$a.getPixels(),c$k=0,c$l=0;c$l<c$g;c$l++)for(var c$m=c$h._datas[c$l]=[],c$n=0;c$n<c$d;c$n++){var c$o=c$j[c$k++],c$p=c$j[c$k++],c$q=c$j[c$k++],c$r=c$j[c$k++];c$m[c$n]=255==c$o&&255==c$p&&255==c$q&&255==c$r?NaN:(c$o+c$p+c$q)/3*c$i+c$b}return c$h},c$M._getPosition=function(c$a,c$b,c$c){for(var c$d=Number.MAX_VALUE,c$g=0;c$g<c$b.length;c$g++)for(var c$h=c$b[c$g],c$i=c$c[c$g],c$j=0;c$j<c$i.length;c$j+=3){var c$k=c$h[c$i[c$j+0]],c$l=c$h[c$i[c$j+1]],c$m=c$h[c$i[c$j+2]],c$n=c$qb.rayIntersectsTriangle(c$a,c$k,c$l,c$m);!isNaN(c$n)&&c$n<c$d&&(c$d=c$n)}return c$d},c$n(c$M,["_tempRay",function(){return this._tempRay=new c$gb(new c$ib,new c$ib)}])}(),function(){function c$g(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}c$p(c$g,"laya.d3.core.Layer");var c$a=c$g.prototype;return c$a._binarySearchIndex=function(){for(var c$a=0,c$b=c$g._collsionTestList.length-1,c$c=0;c$a<=c$b;){c$c=Math.floor((c$a+c$b)/2);var c$d=c$g._collsionTestList[c$c];if(c$d==this._number)return c$c;c$d>this._number?c$b=c$c-1:c$a=c$c+1}return c$a},c$a._addCollider=function(c$a){0===this._colliders.length&&c$g._collsionTestList.splice(this._binarySearchIndex(),0,this._number),c$a._isRigidbody?(this._colliders.unshift(c$a),this._nonRigidbodyOffset++):this._colliders.push(c$a)},c$a._removeCollider=function(c$a){var c$b=this._colliders.indexOf(c$a);c$b<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(c$b,1),0===this._colliders.length&&c$g._collsionTestList.splice(c$g._collsionTestList.indexOf(this._number),1)},c$q(0,c$a,"number",function(){return this._number}),c$q(0,c$a,"visible",function(){return this._visible},function(c$a){this._visible=c$a,c$g._visibleLayers=c$a?c$g._visibleLayers|this.mask:c$g._visibleLayers&~this.mask}),c$q(0,c$a,"mask",function(){return this._mask}),c$q(1,c$g,"visibleLayers",function(){return c$g._visibleLayers},function(c$a){c$g._visibleLayers=c$a;for(var c$b=0,c$c=c$g._layerList.length;c$b<c$c;c$b++){var c$d=c$g._layerList[c$b];c$d._visible=0!=(c$d._mask&c$g._visibleLayers)}}),c$g.__init__=function(){c$g._layerList.length=31;for(var c$a=0;c$a<31;c$a++){var c$b=new c$g;c$g._layerList[c$a]=c$b,0===c$a?(c$b.name="Default Layer",c$b.visible=!0):(c$b.name="Layer-"+c$a,c$b.visible=!1),c$b._number=c$a,c$b._mask=Math.pow(2,c$a)}c$g.currentCreationLayer=c$g._layerList[0]},c$g.getLayerByNumber=function(c$a){if(c$a<0||30<c$a)throw new Error("无法返回指定Layer，该number超出范围！");return c$g._layerList[c$a]},c$g.getLayerByName=function(c$a){for(var c$b=0;c$b<31;c$b++)if(c$g._layerList[c$b].name===c$a)return c$g._layerList[c$b];throw new Error("无法返回指定Layer,该name不存在")},c$g.isVisible=function(c$a){return 0!=(c$a&c$g._currentCameraCullingMask&c$g._visibleLayers)},c$g._layerList=[],c$g._visibleLayers=2147483647,c$g._collsionTestList=[],c$g._currentCameraCullingMask=2147483647,c$g.maxCount=31,c$g.currentCreationLayer=null,c$g}()),c$J=(function(){function c$a(c$a,c$b,c$c){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=c$a,this._minCount=c$b,this._maxCount=c$c}c$p(c$a,"laya.d3.core.particleShuriKen.module.Burst");var c$b=c$a.prototype;c$x.imps(c$b,{"laya.d3.core.IClone":!0}),c$b.cloneTo=function(c$a){var c$b=c$a;c$b._time=this._time,c$b._minCount=this._minCount,c$b._maxCount=this._maxCount},c$b.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$q(0,c$b,"time",function(){return this._time}),c$q(0,c$b,"minCount",function(){return this._minCount}),c$q(0,c$b,"maxCount",function(){return this._maxCount})}(),function(){function c$a(c$a){this._color=null,this.enbale=!1,this._color=c$a}c$p(c$a,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var c$b=c$a.prototype;c$b.cloneTo=function(c$a){var c$b=c$a;this._color.cloneTo(c$b._color),c$b.enbale=this.enbale},c$b.clone=function(){var c$a;switch(this._color.type){case 0:c$a=c$L.createByConstant(this._color.constant.clone());break;case 1:c$a=c$L.createByGradient(this._color.gradient.clone());break;case 2:c$a=c$L.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:c$a=c$L.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var c$b=new this.constructor(c$a);return c$b.enbale=this.enbale,c$b},c$q(0,c$b,"color",function(){return this._color})}(),function(){function c$a(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}c$p(c$a,"laya.d3.core.particleShuriKen.module.Emission");var c$b=c$a.prototype;c$x.imps(c$b,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),c$b._destroy=function(){this._bursts=null,this._destroyed=!0},c$b.getBurstsCount=function(){return this._bursts.length},c$b.getBurstByIndex=function(c$a){return this._bursts[c$a]},c$b.addBurst=function(c$a){var c$b=this._bursts.length;if(0<c$b)for(var c$c=0;c$c<c$b;c$c++)this._bursts[c$c].time>c$a.time&&this._bursts.splice(c$c,0,c$a);this._bursts.push(c$a)},c$b.removeBurst=function(c$a){var c$b=this._bursts.indexOf(c$a);-1!==c$b&&this._bursts.splice(c$b,1)},c$b.removeBurstByIndex=function(c$a){this._bursts.splice(c$a,1)},c$b.clearBurst=function(){this._bursts.length=0},c$b.cloneTo=function(c$a){var c$b=c$a,c$c=c$b._bursts;c$c.length=this._bursts.length;for(var c$d=0,c$g=this._bursts.length;c$d<c$g;c$d++){var c$h=c$c[c$d];c$h?this._bursts[c$d].cloneTo(c$h):c$c[c$d]=this._bursts[c$d].clone()}c$b._emissionRate=this._emissionRate,c$b.enbale=this.enbale},c$b.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$q(0,c$b,"destroyed",function(){return this._destroyed}),c$q(0,c$b,"emissionRate",function(){return this._emissionRate},function(c$a){if(c$a<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=c$a})}(),function(){function c$d(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}c$p(c$d,"laya.d3.core.particleShuriKen.module.FrameOverTime");var c$a=c$d.prototype;return c$x.imps(c$a,{"laya.d3.core.IClone":!0}),c$a.cloneTo=function(c$a){var c$b=c$a;c$b._type=this._type,c$b._constant=this._constant,this._overTime.cloneTo(c$b._overTime),c$b._constantMin=this._constantMin,c$b._constantMax=this._constantMax,this._overTimeMin.cloneTo(c$b._overTimeMin),this._overTimeMax.cloneTo(c$b._overTimeMax)},c$a.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$q(0,c$a,"frameOverTimeData",function(){return this._overTime}),c$q(0,c$a,"constant",function(){return this._constant}),c$q(0,c$a,"type",function(){return this._type}),c$q(0,c$a,"frameOverTimeDataMin",function(){return this._overTimeMin}),c$q(0,c$a,"constantMin",function(){return this._constantMin}),c$q(0,c$a,"frameOverTimeDataMax",function(){return this._overTimeMax}),c$q(0,c$a,"constantMax",function(){return this._constantMax}),c$d.createByConstant=function(c$a){var c$b=new c$d;return c$b._type=0,c$b._constant=c$a,c$b},c$d.createByOverTime=function(c$a){var c$b=new c$d;return c$b._type=1,c$b._overTime=c$a,c$b},c$d.createByRandomTwoConstant=function(c$a,c$b){var c$c=new c$d;return c$c._type=2,c$c._constantMin=c$a,c$c._constantMax=c$b,c$c},c$d.createByRandomTwoOverTime=function(c$a,c$b){var c$c=new c$d;return c$c._type=3,c$c._overTimeMin=c$a,c$c._overTimeMax=c$b,c$c},c$d}()),c$K=function(){function c$l(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}c$p(c$l,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var c$a=c$l.prototype;return c$x.imps(c$a,{"laya.d3.core.IClone":!0}),c$a.cloneTo=function(c$a){var c$b=c$a;c$b._type=this._type,c$b._separateAxes=this._separateAxes,c$b._constant=this._constant,this._constantSeparate.cloneTo(c$b._constantSeparate),this._gradient.cloneTo(c$b._gradient),this._gradientX.cloneTo(c$b._gradientX),this._gradientY.cloneTo(c$b._gradientY),this._gradientZ.cloneTo(c$b._gradientZ),c$b._constantMin=this._constantMin,c$b._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(c$b._constantMinSeparate),this._constantMaxSeparate.cloneTo(c$b._constantMaxSeparate),this._gradientMin.cloneTo(c$b._gradientMin),this._gradientMax.cloneTo(c$b._gradientMax),this._gradientXMin.cloneTo(c$b._gradientXMin),this._gradientXMax.cloneTo(c$b._gradientXMax),this._gradientYMin.cloneTo(c$b._gradientYMin),this._gradientYMax.cloneTo(c$b._gradientYMax),this._gradientZMin.cloneTo(c$b._gradientZMin),this._gradientZMax.cloneTo(c$b._gradientZMax)},c$a.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$q(0,c$a,"gradientZ",function(){return this._gradientZ}),c$q(0,c$a,"constant",function(){return this._constant}),c$q(0,c$a,"gradient",function(){return this._gradient}),c$q(0,c$a,"separateAxes",function(){return this._separateAxes}),c$q(0,c$a,"type",function(){return this._type}),c$q(0,c$a,"constantSeparate",function(){return this._constantSeparate}),c$q(0,c$a,"gradientX",function(){return this._gradientX}),c$q(0,c$a,"gradientY",function(){return this._gradientY}),c$q(0,c$a,"gradientW",function(){return this._gradientW}),c$q(0,c$a,"gradientMin",function(){return this._gradientMin}),c$q(0,c$a,"constantMin",function(){return this._constantMin}),c$q(0,c$a,"gradientMax",function(){return this._gradientMax}),c$q(0,c$a,"constantMax",function(){return this._constantMax}),c$q(0,c$a,"gradientWMin",function(){return this._gradientWMin}),c$q(0,c$a,"constantMinSeparate",function(){return this._constantMinSeparate}),c$q(0,c$a,"constantMaxSeparate",function(){return this._constantMaxSeparate}),c$q(0,c$a,"gradientXMin",function(){return this._gradientXMin}),c$q(0,c$a,"gradientXMax",function(){return this._gradientXMax}),c$q(0,c$a,"gradientWMax",function(){return this._gradientWMax}),c$q(0,c$a,"gradientYMin",function(){return this._gradientYMin}),c$q(0,c$a,"gradientYMax",function(){return this._gradientYMax}),c$q(0,c$a,"gradientZMin",function(){return this._gradientZMin}),c$q(0,c$a,"gradientZMax",function(){return this._gradientZMax}),c$l.createByConstant=function(c$a){var c$b=new c$l;return c$b._type=0,c$b._separateAxes=!1,c$b._constant=c$a,c$b},c$l.createByConstantSeparate=function(c$a){var c$b=new c$l;return c$b._type=0,c$b._separateAxes=!0,c$b._constantSeparate=c$a,c$b},c$l.createByGradient=function(c$a){var c$b=new c$l;return c$b._type=1,c$b._separateAxes=!1,c$b._gradient=c$a,c$b},c$l.createByGradientSeparate=function(c$a,c$b,c$c,c$d){var c$g=new c$l;return c$g._type=1,c$g._separateAxes=!0,c$g._gradientX=c$a,c$g._gradientY=c$b,c$g._gradientZ=c$c,c$g._gradientW=c$d,c$g},c$l.createByRandomTwoConstant=function(c$a,c$b){var c$c=new c$l;return c$c._type=2,c$c._separateAxes=!1,c$c._constantMin=c$a,c$c._constantMax=c$b,c$c},c$l.createByRandomTwoConstantSeparate=function(c$a,c$b){var c$c=new c$l;return c$c._type=2,c$c._separateAxes=!0,c$c._constantMinSeparate=c$a,c$c._constantMaxSeparate=c$b,c$c},c$l.createByRandomTwoGradient=function(c$a,c$b){var c$c=new c$l;return c$c._type=3,c$c._separateAxes=!1,c$c._gradientMin=c$a,c$c._gradientMax=c$b,c$c},c$l.createByRandomTwoGradientSeparate=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){var c$k=new c$l;return c$k._type=3,c$k._separateAxes=!0,c$k._gradientXMin=c$a,c$k._gradientXMax=c$b,c$k._gradientYMin=c$c,c$k._gradientYMax=c$d,c$k._gradientZMin=c$g,c$k._gradientZMax=c$h,c$k._gradientWMin=c$i,c$k._gradientWMax=c$j,c$k},c$l}(),c$L=function(){function c$d(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}c$p(c$d,"laya.d3.core.particleShuriKen.module.GradientColor");var c$a=c$d.prototype;return c$x.imps(c$a,{"laya.d3.core.IClone":!0}),c$a.cloneTo=function(c$a){var c$b=c$a;c$b._type=this._type,this._constant.cloneTo(c$b._constant),this._constantMin.cloneTo(c$b._constantMin),this._constantMax.cloneTo(c$b._constantMax),this._gradient.cloneTo(c$b._gradient),this._gradientMin.cloneTo(c$b._gradientMin),this._gradientMax.cloneTo(c$b._gradientMax)},c$a.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$q(0,c$a,"gradient",function(){return this._gradient}),c$q(0,c$a,"constant",function(){return this._constant}),c$q(0,c$a,"type",function(){return this._type}),c$q(0,c$a,"gradientMin",function(){return this._gradientMin}),c$q(0,c$a,"constantMin",function(){return this._constantMin}),c$q(0,c$a,"gradientMax",function(){return this._gradientMax}),c$q(0,c$a,"constantMax",function(){return this._constantMax}),c$d.createByConstant=function(c$a){var c$b=new c$d;return c$b._type=0,c$b._constant=c$a,c$b},c$d.createByGradient=function(c$a){var c$b=new c$d;return c$b._type=1,c$b._gradient=c$a,c$b},c$d.createByRandomTwoConstant=function(c$a,c$b){var c$c=new c$d;return c$c._type=2,c$c._constantMin=c$a,c$c._constantMax=c$b,c$c},c$d.createByRandomTwoGradient=function(c$a,c$b){var c$c=new c$d;return c$c._type=3,c$c._gradientMin=c$a,c$c._gradientMax=c$b,c$c},c$d}(),c$M=(function(){function c$a(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}c$p(c$a,"laya.d3.core.particleShuriKen.module.GradientDataColor");var c$b=c$a.prototype;c$x.imps(c$b,{"laya.d3.core.IClone":!0}),c$b.addAlpha=function(c$a,c$b){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==c$a&&(c$a=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=c$a,this._alphaElements[this._alphaCurrentLength++]=c$b):DEBUG},c$b.addRGB=function(c$a,c$b){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==c$a&&(c$a=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=c$a,this._rgbElements[this._rgbCurrentLength++]=c$b.x,this._rgbElements[this._rgbCurrentLength++]=c$b.y,this._rgbElements[this._rgbCurrentLength++]=c$b.z):DEBUG},c$b.cloneTo=function(c$a){var c$b=c$a,c$c=0,c$d=0;c$b._alphaCurrentLength=this._alphaCurrentLength;var c$g=c$b._alphaElements;for(c$g.length=this._alphaElements.length,c$c=0,c$d=this._alphaElements.length;c$c<c$d;c$c++)c$g[c$c]=this._alphaElements[c$c];c$b._rgbCurrentLength=this._rgbCurrentLength;var c$h=c$b._rgbElements;for(c$h.length=this._rgbElements.length,c$c=0,c$d=this._rgbElements.length;c$c<c$d;c$c++)c$h[c$c]=this._rgbElements[c$c]},c$b.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$q(0,c$b,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),c$q(0,c$b,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function c$a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}c$p(c$a,"laya.d3.core.particleShuriKen.module.GradientDataInt");var c$b=c$a.prototype;c$x.imps(c$b,{"laya.d3.core.IClone":!0}),c$b.add=function(c$a,c$b){this._currentLength<8?(6===this._currentLength&&1!==c$a&&(c$a=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=c$a,this._elements[this._currentLength++]=c$b):console.log("Warning:data count must lessEqual than 4")},c$b.cloneTo=function(c$a){var c$b=c$a;c$b._currentLength=this._currentLength;var c$c=c$b._elements;c$c.length=this._elements.length;for(var c$d=0,c$g=this._elements.length;c$d<c$g;c$d++)c$c[c$d]=this._elements[c$d]},c$b.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$q(0,c$b,"gradientCount",function(){return this._currentLength/2})}(),function(){function c$a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}c$p(c$a,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var c$b=c$a.prototype;c$x.imps(c$b,{"laya.d3.core.IClone":!0}),c$b.add=function(c$a,c$b){this._currentLength<8?(6===this._currentLength&&1!==c$a&&(c$a=1,DEBUG),this._elements[this._currentLength++]=c$a,this._elements[this._currentLength++]=c$b):DEBUG},c$b.getKeyByIndex=function(c$a){return this._elements[2*c$a]},c$b.getValueByIndex=function(c$a){return this._elements[2*c$a+1]},c$b.getAverageValue=function(){for(var c$a=0,c$b=this._currentLength-2;c$a<c$b;c$a+=2){this._elements[c$a+1];this._elements[c$a+3],this._elements[c$a+2]-this._elements[c$a]}return 0},c$b.cloneTo=function(c$a){var c$b=c$a;c$b._currentLength=this._currentLength;var c$c=c$b._elements;c$c.length=this._elements.length;for(var c$d=0,c$g=this._elements.length;c$d<c$g;c$d++)c$c[c$d]=this._elements[c$d]},c$b.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$q(0,c$b,"gradientCount",function(){return this._currentLength/2})}(),function(){function c$a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}c$p(c$a,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var c$b=c$a.prototype;c$x.imps(c$b,{"laya.d3.core.IClone":!0}),c$b.add=function(c$a,c$b){this._currentLength<8?(6===this._currentLength&&1!==c$a&&(c$a=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=c$a,this._elements[this._currentLength++]=c$b.x,this._elements[this._currentLength++]=c$b.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},c$b.cloneTo=function(c$a){var c$b=c$a;c$b._currentLength=this._currentLength;var c$c=c$b._elements;c$c.length=this._elements.length;for(var c$d=0,c$g=this._elements.length;c$d<c$g;c$d++)c$c[c$d]=this._elements[c$d]},c$b.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$q(0,c$b,"gradientCount",function(){return this._currentLength/3})}(),function(){function c$j(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}c$p(c$j,"laya.d3.core.particleShuriKen.module.GradientSize");var c$a=c$j.prototype;return c$x.imps(c$a,{"laya.d3.core.IClone":!0}),c$a.getMaxSizeInGradient=function(){var c$a=0,c$b=0,c$c=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(c$a=0,c$b=this._gradientX.gradientCount;c$a<c$b;c$a++)c$c=Math.max(c$c,this._gradientX.getValueByIndex(c$a));for(c$a=0,c$b=this._gradientY.gradientCount;c$a<c$b;c$a++)c$c=Math.max(c$c,this._gradientY.getValueByIndex(c$a))}else for(c$a=0,c$b=this._gradient.gradientCount;c$a<c$b;c$a++)c$c=Math.max(c$c,this._gradient.getValueByIndex(c$a));break;case 1:c$c=this._separateAxes?(c$c=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),c$c=Math.max(c$c,this._constantMinSeparate.y),Math.max(c$c,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(c$a=0,c$b=this._gradientXMin.gradientCount;c$a<c$b;c$a++)c$c=Math.max(c$c,this._gradientXMin.getValueByIndex(c$a));for(c$a=0,c$b=this._gradientXMax.gradientCount;c$a<c$b;c$a++)c$c=Math.max(c$c,this._gradientXMax.getValueByIndex(c$a));for(c$a=0,c$b=this._gradientYMin.gradientCount;c$a<c$b;c$a++)c$c=Math.max(c$c,this._gradientYMin.getValueByIndex(c$a));for(c$a=0,c$b=this._gradientZMax.gradientCount;c$a<c$b;c$a++)c$c=Math.max(c$c,this._gradientZMax.getValueByIndex(c$a))}else{for(c$a=0,c$b=this._gradientMin.gradientCount;c$a<c$b;c$a++)c$c=Math.max(c$c,this._gradientMin.getValueByIndex(c$a));for(c$a=0,c$b=this._gradientMax.gradientCount;c$a<c$b;c$a++)c$c=Math.max(c$c,this._gradientMax.getValueByIndex(c$a))}}return c$c},c$a.cloneTo=function(c$a){var c$b=c$a;c$b._type=this._type,c$b._separateAxes=this._separateAxes,this._gradient.cloneTo(c$b._gradient),this._gradientX.cloneTo(c$b._gradientX),this._gradientY.cloneTo(c$b._gradientY),this._gradientZ.cloneTo(c$b._gradientZ),c$b._constantMin=this._constantMin,c$b._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(c$b._constantMinSeparate),this._constantMaxSeparate.cloneTo(c$b._constantMaxSeparate),this._gradientMin.cloneTo(c$b._gradientMin),this._gradientMax.cloneTo(c$b._gradientMax),this._gradientXMin.cloneTo(c$b._gradientXMin),this._gradientXMax.cloneTo(c$b._gradientXMax),this._gradientYMin.cloneTo(c$b._gradientYMin),this._gradientYMax.cloneTo(c$b._gradientYMax),this._gradientZMin.cloneTo(c$b._gradientZMin),this._gradientZMax.cloneTo(c$b._gradientZMax)},c$a.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$q(0,c$a,"gradientZ",function(){return this._gradientZ}),c$q(0,c$a,"gradient",function(){return this._gradient}),c$q(0,c$a,"separateAxes",function(){return this._separateAxes}),c$q(0,c$a,"type",function(){return this._type}),c$q(0,c$a,"gradientMin",function(){return this._gradientMin}),c$q(0,c$a,"constantMin",function(){return this._constantMin}),c$q(0,c$a,"gradientX",function(){return this._gradientX}),c$q(0,c$a,"gradientY",function(){return this._gradientY}),c$q(0,c$a,"gradientMax",function(){return this._gradientMax}),c$q(0,c$a,"constantMax",function(){return this._constantMax}),c$q(0,c$a,"constantMinSeparate",function(){return this._constantMinSeparate}),c$q(0,c$a,"constantMaxSeparate",function(){return this._constantMaxSeparate}),c$q(0,c$a,"gradientXMin",function(){return this._gradientXMin}),c$q(0,c$a,"gradientXMax",function(){return this._gradientXMax}),c$q(0,c$a,"gradientYMin",function(){return this._gradientYMin}),c$q(0,c$a,"gradientYMax",function(){return this._gradientYMax}),c$q(0,c$a,"gradientZMin",function(){return this._gradientZMin}),c$q(0,c$a,"gradientZMax",function(){return this._gradientZMax}),c$j.createByGradient=function(c$a){var c$b=new c$j;return c$b._type=0,c$b._separateAxes=!1,c$b._gradient=c$a,c$b},c$j.createByGradientSeparate=function(c$a,c$b,c$c){var c$d=new c$j;return c$d._type=0,c$d._separateAxes=!0,c$d._gradientX=c$a,c$d._gradientY=c$b,c$d._gradientZ=c$c,c$d},c$j.createByRandomTwoConstant=function(c$a,c$b){var c$c=new c$j;return c$c._type=1,c$c._separateAxes=!1,c$c._constantMin=c$a,c$c._constantMax=c$b,c$c},c$j.createByRandomTwoConstantSeparate=function(c$a,c$b){var c$c=new c$j;return c$c._type=1,c$c._separateAxes=!0,c$c._constantMinSeparate=c$a,c$c._constantMaxSeparate=c$b,c$c},c$j.createByRandomTwoGradient=function(c$a,c$b){var c$c=new c$j;return c$c._type=2,c$c._separateAxes=!1,c$c._gradientMin=c$a,c$c._gradientMax=c$b,c$c},c$j.createByRandomTwoGradientSeparate=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i=new c$j;return c$i._type=2,c$i._separateAxes=!0,c$i._gradientXMin=c$a,c$i._gradientXMax=c$b,c$i._gradientYMin=c$c,c$i._gradientYMax=c$d,c$i._gradientZMin=c$g,c$i._gradientZMax=c$h,c$i},c$j}()),c$N=function(){function c$j(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}c$p(c$j,"laya.d3.core.particleShuriKen.module.GradientVelocity");var c$a=c$j.prototype;return c$x.imps(c$a,{"laya.d3.core.IClone":!0}),c$a.cloneTo=function(c$a){var c$b=c$a;c$b._type=this._type,this._constant.cloneTo(c$b._constant),this._gradientX.cloneTo(c$b._gradientX),this._gradientY.cloneTo(c$b._gradientY),this._gradientZ.cloneTo(c$b._gradientZ),this._constantMin.cloneTo(c$b._constantMin),this._constantMax.cloneTo(c$b._constantMax),this._gradientXMin.cloneTo(c$b._gradientXMin),this._gradientXMax.cloneTo(c$b._gradientXMax),this._gradientYMin.cloneTo(c$b._gradientYMin),this._gradientYMax.cloneTo(c$b._gradientYMax),this._gradientZMin.cloneTo(c$b._gradientZMin),this._gradientZMax.cloneTo(c$b._gradientZMax)},c$a.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$q(0,c$a,"gradientZ",function(){return this._gradientZ}),c$q(0,c$a,"constant",function(){return this._constant}),c$q(0,c$a,"type",function(){return this._type}),c$q(0,c$a,"gradientXMax",function(){return this._gradientXMax}),c$q(0,c$a,"constantMin",function(){return this._constantMin}),c$q(0,c$a,"gradientX",function(){return this._gradientX}),c$q(0,c$a,"gradientY",function(){return this._gradientY}),c$q(0,c$a,"gradientXMin",function(){return this._gradientXMin}),c$q(0,c$a,"constantMax",function(){return this._constantMax}),c$q(0,c$a,"gradientYMin",function(){return this._gradientYMin}),c$q(0,c$a,"gradientYMax",function(){return this._gradientYMax}),c$q(0,c$a,"gradientZMin",function(){return this._gradientZMin}),c$q(0,c$a,"gradientZMax",function(){return this._gradientZMax}),c$j.createByConstant=function(c$a){var c$b=new c$j;return c$b._type=0,c$b._constant=c$a,c$b},c$j.createByGradient=function(c$a,c$b,c$c){var c$d=new c$j;return c$d._type=1,c$d._gradientX=c$a,c$d._gradientY=c$b,c$d._gradientZ=c$c,c$d},c$j.createByRandomTwoConstant=function(c$a,c$b){var c$c=new c$j;return c$c._type=2,c$c._constantMin=c$a,c$c._constantMax=c$b,c$c},c$j.createByRandomTwoGradient=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i=new c$j;return c$i._type=3,c$i._gradientXMin=c$a,c$i._gradientXMax=c$b,c$i._gradientYMin=c$c,c$i._gradientYMax=c$d,c$i._gradientZMin=c$g,c$i._gradientZMax=c$h,c$i},c$j}(),c$O=(function(){function c$a(c$a){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=c$a}c$p(c$a,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var c$b=c$a.prototype;c$x.imps(c$b,{"laya.d3.core.IClone":!0}),c$b.cloneTo=function(c$a){var c$b=c$a;this._angularVelocity.cloneTo(c$b._angularVelocity),c$b.enbale=this.enbale},c$b.clone=function(){var c$a;switch(this._angularVelocity.type){case 0:c$a=this._angularVelocity.separateAxes?c$K.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):c$K.createByConstant(this._angularVelocity.constant);break;case 1:c$a=this._angularVelocity.separateAxes?c$K.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):c$K.createByGradient(this._angularVelocity.gradient.clone());break;case 2:c$a=this._angularVelocity.separateAxes?c$K.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):c$K.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:c$a=this._angularVelocity.separateAxes?c$K.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):c$K.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var c$b=new this.constructor(c$a);return c$b.enbale=this.enbale,c$b},c$q(0,c$b,"angularVelocity",function(){return this._angularVelocity})}(),function(){function c$a(){this.enable=!1,this.randomDirection=!1}c$p(c$a,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.core.IClone":!0}),c$b._getShapeBoundBox=function(c$a){throw new Error("BaseShape: must override it.")},c$b._getSpeedBoundBox=function(c$a){throw new Error("BaseShape: must override it.")},c$b.generatePositionAndDirection=function(c$a,c$b,c$c,c$d){throw new Error("BaseShape: must override it.")},c$b._calculateProceduralBounds=function(c$a,c$b,c$c){this._getShapeBoundBox(c$a);var c$d=c$a.min,c$g=c$a.max;c$ib.multiply(c$d,c$b,c$d),c$ib.multiply(c$g,c$b,c$g);var c$h=new c$Za(new c$ib,new c$ib);this.randomDirection?(c$h.min=new c$ib(-1,-1,-1),c$h.max=new c$ib(1,1,1)):this._getSpeedBoundBox(c$h);var c$i=new c$Za(new c$ib,new c$ib),c$j=c$i.min,c$k=c$i.max;c$ib.scale(c$h.min,c$c.y,c$j),c$ib.scale(c$h.max,c$c.y,c$k),c$ib.add(c$a.min,c$j,c$j),c$ib.add(c$a.max,c$k,c$k),c$ib.min(c$a.min,c$j,c$a.min),c$ib.max(c$a.max,c$j,c$a.max);var c$l=new c$Za(new c$ib,new c$ib),c$m=c$l.min,c$n=c$l.max;c$ib.scale(c$h.min,c$c.x,c$m),c$ib.scale(c$h.max,c$c.x,c$n),c$ib.min(c$l.min,c$n,c$j),c$ib.max(c$l.min,c$n,c$k),c$ib.min(c$a.min,c$j,c$a.min),c$ib.max(c$a.max,c$j,c$a.max)},c$b.cloneTo=function(c$a){c$a.enable=this.enable},c$b.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$a}()),c$T=function(){function c$h(){}return c$p(c$h,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),c$h._randomPointUnitArcCircle=function(c$a,c$b,c$c){var c$d=c$b.elements,c$g=NaN;c$g=c$c?c$c.getFloat()*c$a:Math.random()*c$a,c$d[0]=Math.cos(c$g),c$d[1]=Math.sin(c$g)},c$h._randomPointInsideUnitArcCircle=function(c$a,c$b,c$c){var c$d=c$b.elements;c$h._randomPointUnitArcCircle(c$a,c$b,c$c);var c$g=NaN;c$g=c$c?Math.pow(c$c.getFloat(),.5):Math.pow(Math.random(),.5),c$d[0]=c$d[0]*c$g,c$d[1]=c$d[1]*c$g},c$h._randomPointUnitCircle=function(c$a,c$b){var c$c=c$a.elements,c$d=NaN;c$d=c$b?c$b.getFloat()*Math.PI*2:Math.random()*Math.PI*2,c$c[0]=Math.cos(c$d),c$c[1]=Math.sin(c$d)},c$h._randomPointInsideUnitCircle=function(c$a,c$b){var c$c=c$a.elements;c$h._randomPointUnitCircle(c$a);var c$d=NaN;c$d=c$b?Math.pow(c$b.getFloat(),.5):Math.pow(Math.random(),.5),c$c[0]=c$c[0]*c$d,c$c[1]=c$c[1]*c$d},c$h._randomPointUnitSphere=function(c$a,c$b){var c$c=c$a.elements,c$d=NaN,c$g=NaN;c$g=c$b?(c$d=c$c[2]=2*c$b.getFloat()-1,c$b.getFloat()*Math.PI*2):(c$d=c$c[2]=2*Math.random()-1,Math.random()*Math.PI*2);var c$h=Math.sqrt(1-c$d*c$d);c$c[0]=c$h*Math.cos(c$g),c$c[1]=c$h*Math.sin(c$g)},c$h._randomPointInsideUnitSphere=function(c$a,c$b){var c$c=c$a.elements;c$h._randomPointUnitSphere(c$a);var c$d=NaN;c$d=c$b?Math.pow(c$b.getFloat(),1/3):Math.pow(Math.random(),1/3),c$c[0]=c$c[0]*c$d,c$c[1]=c$c[1]*c$d,c$c[2]=c$c[2]*c$d},c$h._randomPointInsideHalfUnitBox=function(c$a,c$b){var c$c=c$a.elements;c$b?(c$c[0]=c$b.getFloat()-.5,c$c[1]=c$b.getFloat()-.5,c$c[2]=c$b.getFloat()-.5):(c$c[0]=Math.random()-.5,c$c[1]=Math.random()-.5,c$c[2]=Math.random()-.5)},c$h}(),c$U=(function(){function c$a(c$a){this._size=null,this.enbale=!1,this._size=c$a}c$p(c$a,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var c$b=c$a.prototype;c$x.imps(c$b,{"laya.d3.core.IClone":!0}),c$b.cloneTo=function(c$a){var c$b=c$a;this._size.cloneTo(c$b._size),c$b.enbale=this.enbale},c$b.clone=function(){var c$a;switch(this._size.type){case 0:c$a=this._size.separateAxes?c$M.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):c$M.createByGradient(this._size.gradient.clone());break;case 1:c$a=this._size.separateAxes?c$M.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):c$M.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:c$a=this._size.separateAxes?c$M.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):c$M.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var c$b=new this.constructor(c$a);return c$b.enbale=this.enbale,c$b},c$q(0,c$b,"size",function(){return this._size})}(),function(){function c$d(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}c$p(c$d,"laya.d3.core.particleShuriKen.module.StartFrame");var c$a=c$d.prototype;return c$x.imps(c$a,{"laya.d3.core.IClone":!0}),c$a.cloneTo=function(c$a){var c$b=c$a;c$b._type=this._type,c$b._constant=this._constant,c$b._constantMin=this._constantMin,c$b._constantMax=this._constantMax},c$a.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$q(0,c$a,"constant",function(){return this._constant}),c$q(0,c$a,"type",function(){return this._type}),c$q(0,c$a,"constantMin",function(){return this._constantMin}),c$q(0,c$a,"constantMax",function(){return this._constantMax}),c$d.createByConstant=function(c$a){var c$b=new c$d;return c$b._type=0,c$b._constant=c$a,c$b},c$d.createByRandomTwoConstant=function(c$a,c$b){var c$c=new c$d;return c$c._type=1,c$c._constantMin=c$a,c$c._constantMax=c$b,c$c},c$d}()),c$V=(function(){function c$a(c$a,c$b){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new c$hb(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=c$a,this._startFrame=c$b}c$p(c$a,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var c$b=c$a.prototype;c$x.imps(c$b,{"laya.d3.core.IClone":!0}),c$b.cloneTo=function(c$a){var c$b=c$a;this.tiles.cloneTo(c$b.tiles),c$b.type=this.type,c$b.randomRow=this.randomRow,this._frame.cloneTo(c$b._frame),this._startFrame.cloneTo(c$b._startFrame),c$b.cycles=this.cycles,c$b.enableUVChannels=this.enableUVChannels,c$b.enable=this.enable},c$b.clone=function(){var c$a,c$b;switch(this._frame.type){case 0:c$a=c$J.createByConstant(this._frame.constant);break;case 1:c$a=c$J.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:c$a=c$J.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:c$a=c$J.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:c$b=c$U.createByConstant(this._startFrame.constant);break;case 1:c$b=c$U.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var c$c=new this.constructor(c$a,c$b);return this.tiles.cloneTo(c$c.tiles),c$c.type=this.type,c$c.randomRow=this.randomRow,c$c.cycles=this.cycles,c$c.enableUVChannels=this.enableUVChannels,c$c.enable=this.enable,c$c},c$q(0,c$b,"frame",function(){return this._frame}),c$q(0,c$b,"startFrame",function(){return this._startFrame})}(),function(){function c$a(c$a){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=c$a}c$p(c$a,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var c$b=c$a.prototype;c$x.imps(c$b,{"laya.d3.core.IClone":!0}),c$b.cloneTo=function(c$a){var c$b=c$a;this._velocity.cloneTo(c$b._velocity),c$b.enbale=this.enbale,c$b.space=this.space},c$b.clone=function(){var c$a;switch(this._velocity.type){case 0:c$a=c$N.createByConstant(this._velocity.constant.clone());break;case 1:c$a=c$N.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:c$a=c$N.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:c$a=c$N.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var c$b=new this.constructor(c$a);return c$b.enbale=this.enbale,c$b.space=this.space,c$b},c$q(0,c$b,"velocity",function(){return this._velocity})}(),function(){function c$a(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new c$ob,this._vb=c$Ob.create(c$a._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=c$Nb.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=c$Lb.nameKey.getID("LINE"),this._shaderCompile=c$Ab._preCompileShader[this._sharderNameID]}c$p(c$a,"laya.d3.core.PhasorSpriter3D");var c$b=c$a.prototype;return c$b.line=function(c$a,c$b,c$c,c$d){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(c$a.x,c$a.y,c$a.z,c$b.x,c$b.y,c$b.z,c$b.w),this.addVertex(c$c.x,c$c.y,c$c.z,c$d.x,c$d.y,c$d.z,c$d.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},c$b.circle=function(c$a,c$b,c$c,c$d,c$g,c$h){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*c$b,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/c$b,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*c$a,Math.cos(this._tempNumver0)*c$a,0,c$c,c$d,c$g,c$h),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},c$b.plane=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=c$d/2,this._tempNumver1=c$g/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(c$a-this._tempNumver0,c$b+this._tempNumver1,c$c,c$h,c$i,c$j,c$k),this.addVertex(c$a+this._tempNumver0,c$b+this._tempNumver1,c$c,c$h,c$i,c$j,c$k),this.addVertex(c$a-this._tempNumver0,c$b-this._tempNumver1,c$c,c$h,c$i,c$j,c$k),this.addVertex(c$a+this._tempNumver0,c$b-this._tempNumver1,c$c,c$h,c$i,c$j,c$k),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},c$b.box=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=c$d/2,this._tempNumver1=c$g/2,this._tempNumver2=c$h/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(c$a-this._tempNumver0,c$b+this._tempNumver1,c$c+this._tempNumver2,c$i,c$j,c$k,c$l),this.addVertex(c$a+this._tempNumver0,c$b+this._tempNumver1,c$c+this._tempNumver2,c$i,c$j,c$k,c$l),this.addVertex(c$a-this._tempNumver0,c$b-this._tempNumver1,c$c+this._tempNumver2,c$i,c$j,c$k,c$l),this.addVertex(c$a+this._tempNumver0,c$b-this._tempNumver1,c$c+this._tempNumver2,c$i,c$j,c$k,c$l),this.addVertex(c$a+this._tempNumver0,c$b+this._tempNumver1,c$c-this._tempNumver2,c$i,c$j,c$k,c$l),this.addVertex(c$a-this._tempNumver0,c$b+this._tempNumver1,c$c-this._tempNumver2,c$i,c$j,c$k,c$l),this.addVertex(c$a+this._tempNumver0,c$b-this._tempNumver1,c$c-this._tempNumver2,c$i,c$j,c$k,c$l),this.addVertex(c$a-this._tempNumver0,c$b-this._tempNumver1,c$c-this._tempNumver2,c$i,c$j,c$k,c$l),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},c$b.cone=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*c$c+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*c$c>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/c$c,this.addVertexIndex(0,c$b,0,c$d,c$g,c$h,c$i,this._tempUint0),this.addVertexIndex(0,0,0,c$d,c$g,c$h,c$i,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<c$c;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(c$a*this._tempNumver2,0,c$a*this._tempNumver3,c$d,c$g,c$h,c$i,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==c$c-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(c$a*this._tempNumver2,0,c$a*this._tempNumver3,c$d,c$g,c$h,c$i,this._tempUint0+(this._tempInt0+c$c)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==c$c-1?this.addIndexes(this._tempUint1+c$c+2):this.addIndexes(this._tempUint1+this._tempInt0+c$c+1),this.addIndexes(this._tempUint1+this._tempInt0+c$c),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},c$b.boundingBoxLine=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(c$a,c$g,c$h,c$i,c$j,c$k,c$l),this.addVertex(c$d,c$g,c$h,c$i,c$j,c$k,c$l),this.addVertex(c$a,c$b,c$h,c$i,c$j,c$k,c$l),this.addVertex(c$d,c$b,c$h,c$i,c$j,c$k,c$l),this.addVertex(c$d,c$g,c$c,c$i,c$j,c$k,c$l),this.addVertex(c$a,c$g,c$c,c$i,c$j,c$k,c$l),this.addVertex(c$d,c$b,c$c,c$i,c$j,c$k,c$l),this.addVertex(c$a,c$b,c$c,c$i,c$j,c$k,c$l),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},c$b.addVertex=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=c$a,this._vbData[this._posInVBData+1]=c$b,this._vbData[this._posInVBData+2]=c$c,this._vbData[this._posInVBData+3]=c$d,this._vbData[this._posInVBData+4]=c$g,this._vbData[this._posInVBData+5]=c$h,this._vbData[this._posInVBData+6]=c$i,this._posInVBData+=this._floatSizePerVer,this},c$b.addVertexIndex=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){return this._hasBegun||this.addVertexIndexException(),this._vbData[c$j]=c$a,this._vbData[c$j+1]=c$b,this._vbData[c$j+2]=c$c,this._vbData[c$j+3]=c$d,this._vbData[c$j+4]=c$g,this._vbData[c$j+5]=c$h,this._vbData[c$j+6]=c$i,(c$j+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=c$j),this},c$b.addIndexes=function(c$a){var c$b=arguments;this._hasBegun||this.addVertexIndexException();for(var c$c=0;c$c<c$b.length;c$c++)this._ibData[this._posInIBData]=c$b[c$c],this._posInIBData++;return this},c$b.begin=function(c$a,c$b){return this._hasBegun&&this.beginException0(),1!==c$a&&4!==c$a&&this.beginException1(),this._primitiveType=c$a,this._camera=c$b,this._hasBegun=!0,this},c$b.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},c$b.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(c$a._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),c$A.drawCall++,c$F.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},c$b.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},c$b.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},c$b.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},c$b.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},c$b.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},c$b.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(28,[new c$ia(0,"vector3",0),new c$ia(12,"vector4",1)])}]),c$a}()),c$W=function(){function c$a(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++c$a._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new c$ob}c$p(c$a,"laya.d3.core.render.RenderElement");var c$b=c$a.prototype;return c$b.getDynamicBatchBakedVertexs=function(c$a){for(var c$b=this._renderObj._getVertexBuffer(c$a),c$c=c$b.getData().slice(),c$d=c$b.vertexDeclaration,c$g=c$d.getVertexElementByUsage(0).offset/4,c$h=c$d.getVertexElementByUsage(3).offset/4,c$i=this._sprite3D.transform,c$j=c$i.worldMatrix,c$k=c$i.rotation,c$l=c$d.vertexStride/4,c$m=0,c$n=c$c.length;c$m<c$n;c$m+=c$l){var c$o=c$m+c$g,c$p=c$m+c$h;c$sb.transformVector3ArrayToVector3ArrayCoordinate(c$c,c$o,c$j,c$c,c$o),c$sb.transformVector3ArrayByQuat(c$c,c$p,c$k,c$c,c$p)}return c$c},c$b.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},c$b._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},c$q(0,c$b,"id",function(){return this._id}),c$q(0,c$b,"renderObj",function(){return this._renderObj},function(c$a){this._renderObj!==c$a&&(this._renderObj=c$a)}),c$a._uniqueIDCounter=0,c$a}(),c$X=function(){function c$b(c$a){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++c$b._uniqueIDCounter,this._needSort=!1,this._scene=c$a,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}c$p(c$b,"laya.d3.core.render.RenderQueue");var c$a=c$b.prototype;return c$a._sortOpaqueFunc=function(c$a,c$b){if(c$a._render&&c$b._render){var c$c=c$a._material.renderQueue-c$b._material.renderQueue;return 0==c$c?c$a._render._distanceForSort-c$b._render._distanceForSort:c$c}return 0},c$a._sortAlphaFunc=function(c$a,c$b){if(c$a._render&&c$b._render){var c$c=c$a._material.renderQueue-c$b._material.renderQueue;return 0==c$c?c$b._render._distanceForSort-c$a._render._distanceForSort:c$c}return 0},c$a._begainRenderElement=function(c$a,c$b,c$c){return!!c$b._beforeRender(c$a)},c$a._sortAlpha=function(c$a){c$b._cameraPosition=c$a,this._finalElements.sort(this._sortAlphaFunc)},c$a._sortOpaque=function(c$a){c$b._cameraPosition=c$a,this._finalElements.sort(this._sortOpaqueFunc)},c$a._preRender=function(c$a){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},c$a._render=function(c$a,c$b){for(var c$c,c$d,c$g,c$h,c$i,c$j,c$k=c$A.loopCount,c$l=this._scene,c$m=c$a.camera,c$n=(c$m.id,!1),c$o=0,c$p=this._finalElements.length;c$o<c$p;c$o++){var c$q,c$r,c$s,c$t=this._finalElements[c$o];if(null!=c$t._onPreRenderFunction&&c$t._onPreRenderFunction.call(c$t._sprite3D,c$a),0===c$t._type){if(c$a.owner=c$s=c$t._sprite3D,c$a.renderElement=c$t,c$s._preRenderUpdateComponents(c$a),c$q=c$t.renderObj,c$r=c$t._material,this._begainRenderElement(c$a,c$q,c$r)){if(c$c=c$q._getVertexBuffers(),!(c$g=(c$d=c$q._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[c$d.id]){this._errorRecord[c$d.id]=1;var c$u="vertexBuffer:"+("("+c$d._destroyed+","+c$d._released+","+c$d._referenceCount+","+c$d._buffer+")")+", material:"+(c$r?c$r.__className+"("+c$r._destroyed+","+c$r._released+")":"null")+", owner:"+(c$s?c$s.__className+"("+c$s._destroyed+","+c$s._activeInHierarchy+","+c$s._displayedInStage+")":"null")+", renderObj:"+(c$q?c$q.__className+"("+c$q._destroyed+","+c$q._released+","+c$q._referenceCount+")":"")+", parent:, url:"+(c$s?c$s.url:"")+", disposeStack:"+c$d.disposeStack;c$x.recordError("报错：unknown vertexDeclaration  "+c$u)}continue}if(c$n=(c$h=c$a._shader=c$r._getShader(c$l._shaderDefineValue,c$g.shaderDefineValue,c$s._shaderDefineValue)).bind()||c$k!==c$h._uploadLoopCount,c$c){if(c$h._uploadVertexBuffer!==c$c||c$n){for(var c$v=0;c$v<c$c.length;c$v++){var c$w=c$c[c$v];c$h.uploadAttributesX(c$w.vertexDeclaration.shaderValues.data,c$w)}c$h._uploadVertexBuffer=c$c}}else(c$h._uploadVertexBuffer!==c$d||c$n)&&(c$h.uploadAttributes(c$g.shaderValues.data,null),c$h._uploadVertexBuffer=c$d);(c$h._uploadScene!==c$l||c$n)&&(c$h.uploadSceneUniforms(c$l._shaderValues.data),c$h._uploadScene=c$l),(c$m!==c$h._uploadCamera||c$h._uploadSprite3D!==c$s||c$n)&&(c$h.uploadSpriteUniforms(c$s._shaderValues.data),c$h._uploadSprite3D=c$s),(c$m!==c$h._uploadCamera||c$n)&&(c$h.uploadCameraUniforms(c$m._shaderValues.data),c$h._uploadCamera=c$m),(c$h._uploadMaterial!==c$r||c$n)&&(c$r._upload(),c$h._uploadMaterial=c$r),c$i!==c$r?(c$r._setRenderStateBlendDepth(),c$r._setRenderStateFrontFace(c$b,c$s.transform),c$i=c$r,c$j=c$s):c$j!==c$s&&(c$r._setRenderStateFrontFace(c$b,c$s.transform),c$j=c$s),c$q._render(c$a),c$h._uploadLoopCount=c$k}c$s._postRenderUpdateComponents(c$a)}else if(2===c$t._type){c$t.renderObj;c$a.owner=c$s=c$t._sprite3D,c$a.renderElement=c$t,c$a._batchIndexStart=c$t._tempBatchIndexStart,c$a._batchIndexEnd=c$t._tempBatchIndexEnd,c$q=c$t.renderObj,c$r=c$t._material,this._begainRenderElement(c$a,c$q,c$r)&&(c$g=(c$d=c$q._getVertexBuffer(0)).vertexDeclaration,c$n=(c$h=c$a._shader=c$r._getShader(c$l._shaderDefineValue,c$g.shaderDefineValue,c$s._shaderDefineValue)).bind()||c$k!==c$h._uploadLoopCount,(c$h._uploadVertexBuffer!==c$d||c$n)&&(c$h.uploadAttributes(c$g.shaderValues.data,null),c$h._uploadVertexBuffer=c$d),(c$h._uploadScene!==c$l||c$n)&&(c$h.uploadSceneUniforms(c$l._shaderValues.data),c$h._uploadScene=c$l),(c$m!==c$h._uploadCamera||c$h._uploadSprite3D!==c$s||c$n)&&(c$h.uploadSpriteUniforms(c$s._shaderValues.data),c$h._uploadSprite3D=c$s),(c$m!==c$h._uploadCamera||c$n)&&(c$h.uploadCameraUniforms(c$m._shaderValues.data),c$h._uploadCamera=c$m),(c$h._uploadMaterial!==c$r||c$n)&&(c$r._upload(),c$h._uploadMaterial=c$r),c$i!==c$r?(c$r._setRenderStateBlendDepth(),c$r._setRenderStateFrontFace(c$b,c$s.transform),c$i=c$r,c$j=c$s):c$j!==c$s&&(c$r._setRenderStateFrontFace(c$b,c$s.transform),c$j=c$s),c$q._render(c$a),c$h._uploadLoopCount=c$k)}}},c$a._renderShadow=function(c$a,c$b){for(var c$c,c$d,c$g,c$h,c$i,c$j=c$A.loopCount,c$k=this._scene,c$l=c$a.camera,c$m=!1,c$n=0,c$o=this._finalElements.length;c$n<c$o;c$n++){var c$p,c$q,c$r,c$s=this._finalElements[c$n];0===c$s._type&&(c$a.owner=c$r=c$s._sprite3D,c$b||c$r._projectionViewWorldUpdateCamera===c$l&&c$r._projectionViewWorldUpdateLoopCount===c$A.loopCount||(c$r._render._renderUpdate(c$a._projectionViewMatrix),c$r._projectionViewWorldUpdateLoopCount=c$A.loopCount,c$r._projectionViewWorldUpdateCamera=c$l),c$a.renderElement=c$s,c$r._preRenderUpdateComponents(c$a),c$p=c$s.renderObj,c$q=c$s._material,this._begainRenderElement(c$a,c$p,null)&&(c$d=(c$c=c$p._getVertexBuffer(0)).vertexDeclaration,c$m=(c$g=c$a._shader=c$q._getShader(c$k._shaderDefineValue,c$d.shaderDefineValue,c$r._shaderDefineValue)).bind()||c$j!==c$g._uploadLoopCount,(c$g._uploadVertexBuffer!==c$c||c$m)&&(c$g.uploadAttributes(c$d.shaderValues.data,null),c$g._uploadVertexBuffer=c$c),(c$l!==c$g._uploadCamera||c$g._uploadSprite3D!==c$r||c$m)&&(c$g.uploadSpriteUniforms(c$r._shaderValues.data),c$g._uploadSprite3D=c$r),(c$l!==c$g._uploadCamera||c$m)&&(c$g.uploadCameraUniforms(c$l._shaderValues.data),c$g._uploadCamera=c$l),(c$g._uploadMaterial!==c$q||c$m)&&(c$q._upload(),c$g._uploadMaterial=c$q),c$g._uploadRenderElement,c$h!==c$q?(c$q._setRenderStateFrontFace(!1,c$r.transform),c$h=c$q,c$i=c$r):c$i!==c$r&&(c$q._setRenderStateFrontFace(!1,c$r.transform),c$i=c$r),c$p._render(c$a),c$g._uploadLoopCount=c$j),c$r._postRenderUpdateComponents(c$a))}},c$a._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},c$a._addRenderElement=function(c$a){this._renderElements.push(c$a),this._needSort=!0},c$a._addDynamicBatchElement=function(c$a){this._dynamicBatchCombineRenderElements.push(c$a)},c$q(0,c$a,"id",function(){return this._id}),c$b._uniqueIDCounter=0,c$b._cameraPosition=null,c$b}(),c$Y=function(){function c$a(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return c$p(c$a,"laya.d3.core.render.RenderState"),c$a.clientWidth=0,c$a.clientHeight=0,c$a}(),c$Z=function(){function c$i(c$a,c$b){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new c$_a(new c$ib,0),this._corners=[new c$ib,new c$ib,new c$ib,new c$ib,new c$ib,new c$ib,new c$ib,new c$ib],this._boundingBoxCenter=new c$ib,this._children=c$d(8),this._objects=[],this._tempBoundBoxCorners=[new c$ib,new c$ib,new c$ib,new c$ib,new c$ib,new c$ib,new c$ib,new c$ib],this._scene=c$a,this._currentDepth=c$b}c$p(c$i,"laya.d3.core.scene.OctreeNode");var c$a=c$i.prototype;return c$x.imps(c$a,{"laya.d3.core.scene.ITreeNode":!0}),c$a.init=function(c$a,c$b){var c$c=new c$ib,c$d=new c$ib;c$ib.scale(c$b,-.5,c$c),c$ib.scale(c$b,.5,c$d),c$ib.add(c$c,c$a,c$c),c$ib.add(c$d,c$a,c$d),this.exactBox=new c$Za(c$c,c$d),this.relaxBox=new c$Za(c$c,c$d)},c$a.addTreeNode=function(c$a){1===Collision.boxContainsBox(this._relaxBox,c$a.boundingBox)?this.addNodeDown(c$a,0):this.addObject(c$a)},c$a.addChild=function(c$a){var c$b=this._children[c$a];if(null==c$b){c$b=new c$i(this._scene,this._currentDepth+1),(this._children[c$a]=c$b)._parent=this,c$ib.subtract(this._exactBox.max,this._exactBox.min,c$i.tempSize),c$ib.multiply(c$i.tempSize,c$i._octreeSplit[c$a],c$i.tempCenter),c$ib.add(this._exactBox.min,c$i.tempCenter,c$i.tempCenter),c$ib.scale(c$i.tempSize,.25,c$i.tempSize);var c$c=new c$ib,c$d=new c$ib;c$ib.subtract(c$i.tempCenter,c$i.tempSize,c$c),c$ib.add(c$i.tempCenter,c$i.tempSize,c$d),c$b.exactBox=new c$Za(c$c,c$d),c$ib.scale(c$i.tempSize,c$i.relax,c$i.tempSize);var c$g=new c$ib,c$h=new c$ib;c$ib.subtract(c$i.tempCenter,c$i.tempSize,c$g),c$ib.add(c$i.tempCenter,c$i.tempSize,c$h),c$b.relaxBox=new c$Za(c$g,c$h)}return c$b},c$a.addObject=function(c$a){(c$a._treeNode=this)._objects.push(c$a)},c$a.removeObject=function(c$a){if(c$a._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var c$b=this._objects.indexOf(c$a);return-1!==c$b&&(this._objects.splice(c$b,1),!0)},c$a.clearObject=function(){this._objects.length=0},c$a.addNodeUp=function(c$a,c$b){this._parent&&1!==Collision.boxContainsBox(this._exactBox,c$a.boundingBox)?this._parent.addNodeUp(c$a,c$b-1):this.addNodeDown(c$a,c$b)},c$a.addNodeDown=function(c$a,c$b){if(c$b<this._scene.treeLevel){var c$c=this.inChildIndex(c$a.boundingBoxCenter),c$d=this.addChild(c$c);1===Collision.boxContainsBox(c$d._relaxBox,c$a.boundingBox)?c$d.addNodeDown(c$a,++c$b):this.addObject(c$a)}else this.addObject(c$a)},c$a.inChildIndex=function(c$a){return 4*(c$a.z<this._boundingBoxCenter.z?0:1)+2*(c$a.y<this._boundingBoxCenter.y?0:1)+(c$a.x<this._boundingBoxCenter.x?0:1)},c$a.updateObject=function(c$a){1===Collision.boxContainsBox(this._relaxBox,c$a.boundingBox)?(this.removeObject(c$a),c$a._treeNode=null,this.addNodeDown(c$a,this._currentDepth)):this._parent&&(this.removeObject(c$a),c$a._treeNode=null,this._parent.addNodeUp(c$a,this._currentDepth-1))},c$a.cullingObjects=function(c$a,c$b,c$c,c$d,c$g){var c$h,c$i=0,c$j=0,c$k=0,c$l=this._scene._dynamicBatchManager;for(c$i=0,c$h=this._objects.length;c$i<c$h;c$i++){var c$m=this._objects[c$i];if(c$I.isVisible(c$m._owner.layer.mask)&&c$m.enable){if(c$b&&(c$A.treeSpriteCollision+=1,0===c$a.containsBoundSphere(c$m.boundingSphere)))continue;c$m._renderUpdate(c$g),c$m._distanceForSort=c$ib.distance(c$m.boundingSphere.center,c$d)+c$m.sortingFudge;var c$n=c$m._renderElements;for(c$j=0,c$k=c$n.length;c$j<c$k;c$j++){var c$o=c$n[c$j],c$p=c$o._staticBatch;if(c$p&&c$p._material===c$o._material)c$p._addBatchRenderElement(c$o);else{var c$q=c$o.renderObj;c$q.triangleCount<10&&1===c$q._vertexBufferCount&&c$q._getIndexBuffer()&&c$o._material.renderQueue<2&&c$o._canDynamicBatch&&!c$m._owner.isStatic?c$l._addPrepareRenderElement(c$o):this._scene.getRenderQueue(c$o._material.renderQueue)._addRenderElement(c$o)}}}}for(c$i=0;c$i<8;c$i++){var c$r=this._children[c$i];if(null!=c$r){var c$s=c$b;if(c$b){var c$t=c$a.containsBoundBox(c$r._relaxBox);if(c$A.treeNodeCollision+=1,0===c$t)continue;c$s=2===c$t}c$r.cullingObjects(c$a,c$s,c$c,c$d,c$g)}}},c$a.cullingShadowObjects=function(c$a,c$b,c$c,c$d,c$g){var c$h,c$i=0,c$j=0,c$k=0;this._scene._dynamicBatchManager;for(c$i=0,c$h=this._objects.length;c$i<c$h;c$i++){var c$l=this._objects[c$i];if(c$l.castShadow&&c$I.isVisible(c$l._owner.layer.mask)&&c$l.enable){if(c$c&&0===c$a[0].containsBoundSphere(c$l.boundingSphere))continue;for(var c$m=1,c$n=c$a.length;c$m<c$n;c$m++){var c$o=c$b[c$m-1];if(0!==c$a[c$m].containsBoundSphere(c$l.boundingSphere)){var c$p=c$l._renderElements;for(c$j=0,c$k=c$p.length;c$j<c$k;c$j++)c$o._addRenderElement(c$p[c$j])}}}}for(c$i=0;c$i<8;c$i++){var c$q=this._children[c$i];if(null!=c$q){var c$r=c$c;if(c$c){var c$s=c$a[0].containsBoundBox(c$q._relaxBox);if(0===c$s)continue;c$r=2===c$s}c$q.cullingShadowObjects(c$a,c$b,c$r,c$d,c$g)}}},c$a.cullingShadowObjectsOnePSSM=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i,c$j=c$b[0],c$k=0,c$l=0,c$m=0;for(c$k=0,c$i=this._objects.length;c$k<c$i;c$k++){var c$n=this._objects[c$k];if(c$n.castShadow&&c$I.isVisible(c$n._owner.layer.mask)&&c$n.enable){if(c$d&&0===c$a.containsBoundSphere(c$n.boundingSphere))continue;c$n._renderUpdate(c$c);var c$o=c$n._renderElements;for(c$l=0,c$m=c$o.length;c$l<c$m;c$l++)c$j._addRenderElement(c$o[c$l])}}for(c$k=0;c$k<8;c$k++){var c$p=this._children[c$k];if(null!=c$p){var c$q=c$d;if(c$d){var c$r=c$a.containsBoundBox(c$p._relaxBox);if(0===c$r)continue;c$q=2===c$r}c$p.cullingShadowObjectsOnePSSM(c$a,c$b,c$c,c$q,c$g,c$h)}}},c$a.renderBoudingBox=function(c$a){this._renderBoudingBox(c$a);for(var c$b=0;c$b<8;++c$b){var c$c=this._children[c$b];c$c&&c$c.renderBoudingBox(c$a)}},c$a.buildAllChild=function(c$a){if(c$a<this._scene.treeLevel)for(var c$b=0;c$b<8;c$b++){this.addChild(c$b).buildAllChild(c$a+1)}},c$a._renderBoudingBox=function(c$a){},c$q(0,c$a,"exactBox",function(){return this._exactBox},function(c$a){this._exactBox=c$a,c$ib.add(c$a.min,c$a.max,this._boundingBoxCenter),c$ib.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),c$q(0,c$a,"relaxBox",function(){return this._relaxBox},function(c$a){(this._relaxBox=c$a).getCorners(this._corners),c$_a.createfromPoints(this._corners,this._boundingSphere)}),c$i.debugMode=!1,c$i.relax=1.15,c$i.CHILDNUM=8,c$n(c$i,["tempVector0",function(){return this.tempVector0=new c$ib},"tempSize",function(){return this.tempSize=new c$ib},"tempCenter",function(){return this.tempCenter=new c$ib},"_octreeSplit",function(){return this._octreeSplit=[new c$ib(.25,.25,.25),new c$ib(.75,.25,.25),new c$ib(.25,.75,.25),new c$ib(.75,.75,.25),new c$ib(.25,.25,.75),new c$ib(.75,.25,.75),new c$ib(.25,.75,.75),new c$ib(.75,.75,.75)]}]),c$i}(),c$$=(function(){function c$a(){}c$p(c$a,"laya.d3.core.scene.SceneManager")}(),function(){function c$a(c$a,c$b,c$c,c$d){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===c$a&&(c$a=1),void 0===c$b&&(c$b=1),void 0===c$c&&(c$c=1),void 0===c$d&&(c$d=1),this._r=c$a,this._g=c$b,this._b=c$c,this._a=c$d}return c$p(c$a,"laya.d3.core.trail.module.Color",null,"Color$1"),c$a.prototype.cloneTo=function(c$a){c$a._r=this._r,c$a._g=this._g,c$a._b=this._b,c$a._a=this._a},c$n(c$a,["RED",function(){return this.RED=new c$a(1,0,0,1)},"GREEN",function(){return this.GREEN=new c$a(0,1,0,1)},"BLUE",function(){return this.BLUE=new c$a(0,0,1,1)},"CYAN",function(){return this.CYAN=new c$a(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new c$a(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new c$a(1,0,1,1)},"GRAY",function(){return this.GRAY=new c$a(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new c$a(1,1,1,1)},"BLACK",function(){return this.BLACK=new c$a(0,0,0,1)}]),c$a}()),c$_=(function(){function c$a(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}c$p(c$a,"laya.d3.core.trail.module.Gradient");var c$b=c$a.prototype;c$b.setKeys=function(c$a,c$b){var c$c,c$d;this._colorKeys=c$a;for(var c$g=this.index=0;c$g<c$a.length;c$g++){var c$h=(c$c=c$a[c$g]).color;this._colorKeyData[this.index++]=c$h._r,this._colorKeyData[this.index++]=c$h._g,this._colorKeyData[this.index++]=c$h._b,this._colorKeyData[this.index++]=c$c.time}this._alphaKeys=c$b;for(var c$i=this.index=0;c$i<c$b.length;c$i++)c$d=c$b[c$i],this._alphaKeyData[this.index++]=c$d.alpha,this._alphaKeyData[this.index++]=c$d.time},c$b.cloneTo=function(c$a){var c$b=0,c$c=0,c$d=this.colorKeys,c$g=[];for(c$b=0,c$c=c$d.length;c$b<c$c;c$b++){var c$h=new c$e;c$d[c$b].cloneTo(c$h),c$g.push(c$h)}var c$i=this.alphaKeys,c$j=[];for(c$b=0,c$c=c$i.length;c$b<c$c;c$b++){var c$k=new c$_;c$i[c$b].cloneTo(c$k),c$j.push(c$k)}c$a.setKeys(c$g,c$j)},c$q(0,c$b,"mode",function(){return this._mode},function(c$a){this._mode=c$a}),c$q(0,c$b,"colorKeys",function(){return this._colorKeys},function(c$a){this._colorKeys=c$a;for(var c$b=this.index=0;c$b<c$a.length;c$b++){var c$c=c$a[c$b],c$d=c$c.color;this._colorKeyData[this.index++]=c$d._r,this._colorKeyData[this.index++]=c$d._g,this._colorKeyData[this.index++]=c$d._b,this._colorKeyData[this.index++]=c$c.time}}),c$q(0,c$b,"alphaKeys",function(){return this._alphaKeys},function(c$a){this._alphaKeys=c$a;for(var c$b=this.index=0;c$b<c$a.length;c$b++){var c$c=c$a[c$b];this._alphaKeyData[this.index++]=c$c.alpha,this._alphaKeyData[this.index++]=c$c.time}})}(),function(){function c$a(c$a,c$b){this._alpha=NaN,this._time=NaN,void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=0),this._alpha=c$a,this._time=c$b}c$p(c$a,"laya.d3.core.trail.module.GradientAlphaKey");var c$b=c$a.prototype;return c$b.cloneTo=function(c$a){c$a.alpha=this.alpha,c$a.time=this.time},c$q(0,c$b,"alpha",function(){return this._alpha},function(c$a){this._alpha=c$a}),c$q(0,c$b,"time",function(){return this._time},function(c$a){this._time=c$a}),c$a}()),c$e=function(){function c$a(c$a,c$b){this._color=null,this._time=NaN,void 0===c$b&&(c$b=0),this._color=c$a||new c$$,this._time=c$b}c$p(c$a,"laya.d3.core.trail.module.GradientColorKey");var c$b=c$a.prototype;return c$b.cloneTo=function(c$a){this.color.cloneTo(c$a.color),c$a.time=this.time},c$q(0,c$b,"color",function(){return this._color},function(c$a){this._color=c$a}),c$q(0,c$b,"time",function(){return this._time},function(c$a){this._time=c$a}),c$a}(),c$f=(function(){function c$a(){}c$p(c$a,"laya.d3.core.trail.module.GradientMode"),c$a.Blend=0,c$a.Fixed=1}(),function(){function c$a(){}c$p(c$a,"laya.d3.core.trail.module.TextureMode"),c$a.Stretch=0,c$a.Tile=1}(),function(){function c$a(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}c$p(c$a,"laya.d3.core.trail.module.TrailKeyFrame"),c$a.prototype.cloneTo=function(c$a){c$a.time=this.time,c$a.inTangent=this.inTangent,c$a.outTangent=this.outTangent,c$a.value=this.value}}(),function(){function c$b(c$a){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new c$ib,this._curPosition=new c$ib,this._delVector3=new c$ib,this._lastFixedVertexPosition=new c$ib,this._pointAtoBVector3=new c$ib,this._pointA=new c$ib,this._pointB=new c$ib,this._owner=c$a,this._id=c$b.renderElementCount++,0==this._id?c$a._owner.transform.position.cloneTo(this._lastPosition):c$a._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new c$Ob(c$f.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new c$Ob(c$f.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}c$p(c$b,"laya.d3.core.trail.TrailRenderElement");var c$a=c$b.prototype;c$x.imps(c$a,{"laya.d3.core.render.IRenderable":!0}),c$a._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},c$a._addTrailByFirstPosition=function(c$a,c$b){c$ib.subtract(c$b,c$a,this._delVector3),c$ib.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),c$ib.normalize(this._pointAtoBVector3,this._pointAtoBVector3),c$ib.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(c$a),c$a.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},c$a._addTrailByNextPosition=function(c$a){c$ib.subtract(c$a,this._lastFixedVertexPosition,this._delVector3),c$ib.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),c$ib.normalize(this._pointAtoBVector3,this._pointAtoBVector3),c$ib.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=c$ib.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=c$ea.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(c$a),c$a.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(c$a),this._virtualVerticesCount=2)},c$a._updateVerticesByPosition=function(c$a){this._pointe=c$a.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},c$a._updateVertexBuffer2=function(){var c$a,c$b=0,c$c=0,c$d=0;for(c$d=0,c$a=(this._verticesCount+this._virtualVerticesCount)/2;c$d<c$a;c$d++)c$c=0==this._owner.textureMode?(this._VerticesToTailLength[c$d]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[c$d],this._vertices2[c$b++]=1-c$c,this._vertices2[c$b++]=1-c$c;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},c$a._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},c$a._updateDisappear=function(){var c$a,c$b=0;for(c$b=this._curDisappearIndex,c$a=(this._verticesCount+this._virtualVerticesCount)/2;c$b<c$a;c$b++)this._owner._curtime-this._everyGroupVertexBirthTime[c$b]>=this._owner.time+c$ea.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},c$a._beforeRender=function(c$a){return this._camera=c$a.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),c$ib.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},c$a._render=function(c$a){this._isDead||(c$F.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),c$A.drawCall++,c$A.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},c$a._getVertexBuffer=function(c$a){return void 0===c$a&&(c$a=0),0===c$a?this._vertexBuffer1:1===c$a?this._vertexBuffer2:null},c$a._getVertexBuffers=function(){return this._vertexBuffers},c$a._getIndexBuffer=function(){return null},c$a.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},c$a._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},c$q(0,c$a,"_vertexBufferCount",function(){return this._vertexBuffers.length}),c$q(0,c$a,"triangleCount",function(){return 0}),c$b.renderElementCount=0}(),function(){function c$a(){}c$p(c$a,"laya.d3.core.trail.VertexTrail");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration1}),c$q(1,c$a,"vertexDeclaration1",function(){return c$a._vertexDeclaration1}),c$q(1,c$a,"vertexDeclaration2",function(){return c$a._vertexDeclaration2}),c$n(c$a,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new c$ha(32,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",41),new c$ia(24,"single",33),new c$ia(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new c$ha(4,[new c$ia(0,"single",38)])}]),c$a}()),c$aa=function(){function c$w(c$a){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=c$a}c$p(c$w,"laya.d3.graphics.DynamicBatch");var c$a=c$w.prototype;return c$x.imps(c$a,{"laya.d3.core.render.IRenderable":!0}),c$a._getVertexBuffer=function(c$a){return void 0===c$a&&(c$a=0),0===c$a?this._vertexBuffer:null},c$a._getIndexBuffer=function(){return this._indexBuffer},c$a._getCombineRenderElementFromPool=function(c$a,c$b,c$c){var c$d=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return c$d||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=c$d=new c$W,c$d._sprite3D=new c$Xb),c$d._sprite3D._render._renderUpdate(c$c),c$d},c$a._getRenderElement=function(c$a,c$b,c$c){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*c$w.maxVertexCount),this._indexDatas=new Uint16Array(c$w.maxIndexCount),this._vertexBuffer=c$Ob.create(this._vertexDeclaration,c$w.maxVertexCount,35048),this._indexBuffer=c$Nb.create("ushort",c$w.maxIndexCount,35048));for(var c$d=this._merageElements.length=0,c$g=0,c$h=0,c$i=this._combineRenderElements.length;c$h<c$i;c$h++){var c$j=this._combineRenderElements[c$h],c$k=c$j.getDynamicBatchBakedVertexs(0),c$l=c$j.getBakedIndices(),c$m=c$j._sprite3D.transform._isFrontFaceInvert,c$n=c$d/(this._vertexDeclaration.vertexStride/4),c$o=c$g,c$p=c$o+c$l.length;c$j._tempBatchIndexStart=c$o,c$j._tempBatchIndexEnd=c$p,this._indexDatas.set(c$l,c$g);var c$q=0;if(c$m)for(c$q=c$o;c$q<c$p;c$q+=3){this._indexDatas[c$q]=c$n+this._indexDatas[c$q];var c$r=this._indexDatas[c$q+1],c$s=this._indexDatas[c$q+2];this._indexDatas[c$q+1]=c$n+c$s,this._indexDatas[c$q+2]=c$n+c$r}else for(c$q=c$o;c$q<c$p;c$q+=3)this._indexDatas[c$q]=c$n+this._indexDatas[c$q],this._indexDatas[c$q+1]=c$n+this._indexDatas[c$q+1],this._indexDatas[c$q+2]=c$n+this._indexDatas[c$q+2];c$g+=c$l.length,this._vertexDatas.set(c$k,c$d),c$d+=c$k.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),c$h=this._combineRenderElementPoolIndex=0,c$i=this._materials.length;c$h<c$i;c$h++){var c$t=this._getCombineRenderElementFromPool(c$a,c$b,c$c);c$t._type=2,c$t._staticBatch=null;var c$u=(c$t.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[c$h]]._tempBatchIndexStart,c$v=c$h+1===this._materialToRenderElementsOffsets.length?c$g:this._combineRenderElements[this._materialToRenderElementsOffsets[c$h+1]]._tempBatchIndexStart;c$t._tempBatchIndexStart=c$u,c$t._tempBatchIndexEnd=c$v,c$t._material=this._materials[c$h],this._merageElements.push(c$t)}},c$a._addCombineRenderObjTest=function(c$a){var c$b=c$a.renderObj,c$c=this._currentCombineIndexCount+c$b._getIndexBuffer().indexCount,c$d=this._currentCombineVertexCount+c$b._getVertexBuffer().vertexCount;return!(c$w.maxVertexCount<c$d||c$w.maxIndexCount<c$c)},c$a._addCombineRenderObj=function(c$a){var c$b=c$a.renderObj;this._combineRenderElements.push(c$a),this._currentCombineIndexCount=this._currentCombineIndexCount+c$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+c$b._getVertexBuffer().vertexCount},c$a._addCombineMaterial=function(c$a){this._materials.push(c$a)},c$a._addMaterialToRenderElementOffset=function(c$a){this._materialToRenderElementsOffsets.push(c$a)},c$a._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},c$a._addToRenderQueue=function(c$a,c$b,c$c,c$d){this._getRenderElement(c$b,c$c,c$d);for(var c$g=0,c$h=this._materials.length;c$g<c$h;c$g++)c$a.getRenderQueue(this._materials[c$g].renderQueue)._addDynamicBatchElement(this._merageElements[c$g])},c$a._beforeRender=function(c$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},c$a._render=function(c$a){var c$b=c$a._batchIndexEnd-c$a._batchIndexStart;c$F.mainContext.drawElements(4,c$b,5123,2*c$a._batchIndexStart),c$A.drawCall++,c$A.trianglesFaces+=c$b/3},c$a._getVertexBuffers=function(){return null},c$q(0,c$a,"_vertexBufferCount",function(){return 1}),c$q(0,c$a,"triangleCount",function(){return this._indexBuffer.indexCount/3}),c$q(0,c$a,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),c$w.maxVertexCount=2e4,c$w.maxIndexCount=4e4,c$w.maxCombineTriangleCount=10,c$w}(),c$ba=function(){function c$w(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}c$p(c$w,"laya.d3.graphics.DynamicBatchManager");var c$a=c$w.prototype;return c$a.getDynamicBatch=function(c$a,c$b){var c$c,c$d=c$a.id.toString()+c$b;return this._dynamicBatches[c$d]?c$c=this._dynamicBatches[c$d]:this._dynamicBatches[c$d]=c$c=new c$aa(c$a),c$c},c$a._garbageCollection=function(){for(var c$a in this._dynamicBatches)0===this._dynamicBatches[c$a].combineRenderElementsCount&&delete this._dynamicBatches[c$a]},c$a._addPrepareRenderElement=function(c$a){this._prepareDynamicBatchCombineElements.push(c$a)},c$a._finishCombineDynamicBatch=function(c$a){var c$b,c$c,c$d;this._prepareDynamicBatchCombineElements.sort(c$w._sortPrepareDynamicBatch);for(var c$g,c$h,c$i,c$j,c$k,c$l=-1,c$m=!0,c$n=0,c$o=-1,c$p=0,c$q=this._prepareDynamicBatchCombineElements.length;c$p<c$q;c$p++){var c$r=(c$h=this._prepareDynamicBatchCombineElements[c$p]).renderObj._getVertexBuffer(0).vertexDeclaration,c$s=c$c!==c$r;c$s&&(c$n=0,c$c=c$r);var c$t=c$n!==c$l;if(c$t&&(c$l=c$n),(c$s||c$t)&&(c$i=this.getDynamicBatch(c$r,c$n),c$b=null),c$m)if(c$i._addCombineRenderObjTest(c$h)){if(c$b!==(c$g=c$h._material))c$j&&(c$a.getRenderQueue(c$k._material.renderQueue)._addRenderElement(c$k),c$k=c$j=null,c$o=-1),c$j=c$g,c$o=c$i.combineRenderElementsCount,c$k=c$h,c$b=c$g;else if(c$j){var c$u=c$k.renderObj,c$v=c$h.renderObj;c$u._getVertexBuffer().vertexCount+c$v._getVertexBuffer().vertexCount>c$aa.maxVertexCount||c$u._getIndexBuffer().indexCount+c$v._getIndexBuffer().indexCount>c$aa.maxIndexCount?(c$a.getRenderQueue(c$k._material.renderQueue)._addRenderElement(c$k),c$j=c$g,c$o=c$i.combineRenderElementsCount,c$k=c$h):(c$i._addCombineMaterial(c$j),c$i._addMaterialToRenderElementOffset(c$o),c$i._addCombineRenderObj(c$k),c$k=c$j=null,c$o=-1,c$i._addCombineRenderObj(c$h))}else c$i._addCombineRenderObj(c$h);c$m=!0}else c$j&&(c$a.getRenderQueue(c$k._material.renderQueue)._addRenderElement(c$k),c$k=c$j=null,c$o=-1),c$n++,c$m=!1;else c$d=this._prepareDynamicBatchCombineElements[c$p-1],c$i._addMaterialToRenderElementOffset(c$i.combineRenderElementsCount),c$b=c$d._material,c$i._addCombineMaterial(c$b),c$i._addCombineRenderObj(c$d),c$m=!0,c$b!==(c$g=c$h._material)?(c$j=c$g,c$o=c$i.combineRenderElementsCount,c$k=c$h):c$i._addCombineRenderObj(c$h),c$b=c$g}c$j&&(c$a.getRenderQueue(c$k._material.renderQueue)._addRenderElement(c$k),c$k=c$j=null,c$o=-1),this._prepareDynamicBatchCombineElements.length=0},c$a._clearRenderElements=function(){for(var c$a in this._dynamicBatches)this._dynamicBatches[c$a]._clearRenderElements()},c$a._addToRenderQueue=function(c$a,c$b,c$c,c$d){for(var c$g in this._dynamicBatches){var c$h=this._dynamicBatches[c$g];0<c$h.combineRenderElementsCount&&c$h._addToRenderQueue(c$a,c$b,c$c,c$d)}},c$a.dispose=function(){this._dynamicBatches=null},c$w._sortPrepareDynamicBatch=function(c$a,c$b){return c$a._mainSortID-c$b._mainSortID},c$w}(),c$ca=function(){function c$a(){}return c$p(c$a,"laya.d3.graphics.FrustumCulling"),c$a.renderShadowObjectCulling=function(c$a,c$b,c$c,c$d,c$g){var c$h=0,c$i=0,c$j=0,c$k=0;for(c$h=0,c$j=c$c.length;c$h<c$j;c$h++){var c$l=c$c[c$h];c$l&&c$l._clearRenderElements()}var c$m,c$n,c$o,c$p=c$a._cullingRenders;if(1<c$g){for(c$h=0,c$j=c$a._cullingRendersLength;c$h<c$j;c$h++)if((c$m=c$p[c$h]).castShadow&&c$I.isVisible(c$m._owner.layer.mask)&&c$m.enable)for(var c$q=1,c$r=c$b.length;c$q<c$r;c$q++)if(c$n=c$c[c$q-1],0!==c$b[c$q].containsBoundSphere(c$m.boundingSphere))for(c$i=0,c$k=(c$o=c$m._renderElements).length;c$i<c$k;c$i++)c$n._addRenderElement(c$o[c$i])}else for(c$h=0,c$j=c$a._cullingRendersLength;c$h<c$j;c$h++)if((c$m=c$p[c$h]).castShadow&&c$I.isVisible(c$m._owner.layer.mask)&&c$m.enable&&0!==c$b[0].containsBoundSphere(c$m.boundingSphere))for(c$m._renderUpdate(c$d),c$n=c$c[0],c$i=0,c$k=(c$o=c$m._renderElements).length;c$i<c$k;c$i++)c$n._addRenderElement(c$o[c$i])},c$a.renderShadowObjectCullingOctree=function(c$a,c$b,c$c,c$d,c$g){for(var c$h=0,c$i=c$c.length;c$h<c$i;c$h++){var c$j=c$c[c$h];c$j&&c$j._clearRenderElements()}1<c$g?c$a.treeRoot.cullingShadowObjects(c$b,c$c,!0,0,c$a):c$a.treeRoot.cullingShadowObjectsOnePSSM(c$b[0],c$c,c$d,!0,0,c$a)},c$a.renderObjectCulling=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i=0,c$j=0,c$k=0,c$l=0,c$m=c$b._quenes,c$n=c$b._dynamicBatchManager,c$o=c$b._cullingRenders;for(c$i=0,c$j=c$m.length;c$i<c$j;c$i++){var c$p=c$m[c$i];c$p&&c$p._clearRenderElements()}var c$q=c$da._staticBatchManagers;for(c$i=0,c$j=c$q.length;c$i<c$j;c$i++)c$q[c$i]._clearRenderElements();c$n._clearRenderElements();var c$r=c$c.transform.position;for(c$i=0,c$j=c$b._cullingRendersLength;c$i<c$j;c$i++){var c$s=c$o[c$i];if(c$I.isVisible(c$s._owner.layer.mask)&&c$s.enable&&0!==c$a.containsBoundSphere(c$s.boundingSphere)&&c$s._renderUpdate(c$h)){c$s._distanceForSort=c$ib.distance(c$s.boundingSphere.center,c$r)+c$s.sortingFudge;var c$t=c$s._renderElements;for(c$k=0,c$l=c$t.length;c$k<c$l;c$k++){var c$u=c$t[c$k],c$v=c$u._staticBatch;if(c$v&&c$v._material===c$u._material)c$v._addBatchRenderElement(c$u);else{var c$w=c$u.renderObj;c$w.triangleCount<10&&1===c$w._vertexBufferCount&&c$w._getIndexBuffer()&&c$u._material.renderQueue<2&&c$u._canDynamicBatch&&!c$s._owner.isStatic?c$n._addPrepareRenderElement(c$u):c$b.getRenderQueue(c$u._material.renderQueue)._addRenderElement(c$u)}}}}for(c$i=0,c$j=c$q.length;c$i<c$j;c$i++)c$q[c$i]._addToRenderQueue(c$b,c$d,c$g,c$h);c$n._finishCombineDynamicBatch(c$b),c$n._addToRenderQueue(c$b,c$d,c$g,c$h)},c$a.renderObjectCullingOctree=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i=0,c$j=0,c$k=c$b._quenes,c$l=c$b._dynamicBatchManager;for(c$i=0,c$j=c$k.length;c$i<c$j;c$i++){var c$m=c$k[c$i];c$m&&c$m._clearRenderElements()}var c$n=c$da._staticBatchManagers;for(c$i=0,c$j=c$n.length;c$i<c$j;c$i++)c$n[c$i]._clearRenderElements();for(c$l._clearRenderElements(),c$b._cullingRenders.length=0,c$b.treeRoot.cullingObjects(c$a,!0,0,c$c.transform.position,c$h),c$i=0,c$j=c$n.length;c$i<c$j;c$i++)c$n[c$i]._addToRenderQueue(c$b,c$d,c$g,c$h);c$l._finishCombineDynamicBatch(c$b),c$l._addToRenderQueue(c$b,c$d,c$g,c$h)},c$a.renderObjectCullingNoBoundFrustum=function(c$a,c$b,c$c,c$d,c$g){var c$h=0,c$i=0,c$j=0,c$k=0,c$l=c$a._quenes,c$m=c$a._dynamicBatchManager,c$n=c$a._cullingRenders;for(c$h=0,c$i=c$l.length;c$h<c$i;c$h++){var c$o=c$l[c$h];c$o&&c$o._clearRenderElements()}var c$p=c$da._staticBatchManagers;for(c$h=0,c$i=c$p.length;c$h<c$i;c$h++)c$p[c$h]._clearRenderElements();c$m._clearRenderElements();var c$q=c$b.transform.position;for(c$h=0,c$i=c$a._cullingRendersLength;c$h<c$i;c$h++){var c$r=c$n[c$h];if(c$I.isVisible(c$r._owner.layer.mask)&&c$r.enable){c$r._renderUpdate(c$g),c$r._distanceForSort=c$ib.distance(c$r.boundingSphere.center,c$q)+c$r.sortingFudge;var c$s=c$r._renderElements;for(c$j=0,c$k=c$s.length;c$j<c$k;c$j++){var c$t=c$s[c$j],c$u=c$t._staticBatch;if(c$u&&c$u._material===c$t._material)c$u._addBatchRenderElement(c$t);else{var c$v=c$t.renderObj;c$v.triangleCount<10&&1===c$v._vertexBufferCount&&c$v._getIndexBuffer()&&c$t._material.renderQueue<2&&c$t._canDynamicBatch&&!c$r._owner.isStatic?c$m._addPrepareRenderElement(c$t):c$a.getRenderQueue(c$t._material.renderQueue)._addRenderElement(c$t)}}}}for(c$h=0,c$i=c$p.length;c$h<c$i;c$h++)c$p[c$h]._addToRenderQueue(c$a,c$c,c$d,c$g);c$m._finishCombineDynamicBatch(c$a),c$m._addToRenderQueue(c$a,c$c,c$d,c$g)},c$a}(),c$da=function(){function c$h(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}c$p(c$h,"laya.d3.graphics.StaticBatchManager");var c$a=c$h.prototype;return c$a._finishInit=function(){for(var c$a in this._staticBatches)this._staticBatches[c$a]._finishInit();this._initBatchRenderElements.length=0},c$a._initStaticBatchs=function(c$a){throw new Error("StaticBatchManager:must override this function.")},c$a._addInitBatchSprite=function(c$a){for(var c$b=c$a._render._renderElements,c$c=0,c$d=c$b.length;c$c<c$d;c$c++)this._initBatchRenderElements.push(c$b[c$c])},c$a._clearRenderElements=function(){for(var c$a in this._staticBatches)this._staticBatches[c$a]._clearRenderElements()},c$a._garbageCollection=function(c$a){var c$b=c$a._staticBatch,c$c=c$b._initBatchRenderElements,c$d=c$c.indexOf(c$a);c$c.splice(c$d,1),0===c$c.length&&(c$b.dispose(),delete this._staticBatches[c$b._key])},c$a._addToRenderQueue=function(c$a,c$b,c$c,c$d){for(var c$g in this._staticBatches){var c$h=this._staticBatches[c$g];0<c$h._batchRenderElements.length&&c$h._updateToRenderQueue(c$a,c$d)}},c$a.dispose=function(){this._staticBatches=null},c$h._addToStaticBatchQueue=function(c$a){c$a instanceof laya.d3.core.RenderableSprite3D&&c$a._addToInitStaticBatchManager();for(var c$b=0,c$c=c$a.numChildren;c$b<c$c;c$b++)c$h._addToStaticBatchQueue(c$a._childs[c$b])},c$h.combine=function(c$a,c$b){var c$c,c$d=0,c$g=0;if(c$b)for(c$d=0,c$g=c$b.length;c$d<c$g;c$d++){c$b[c$d]._addToInitStaticBatchManager()}else c$a&&c$h._addToStaticBatchQueue(c$a);for(c$d=0,c$g=c$h._staticBatchManagers.length;c$d<c$g;c$d++)(c$c=c$h._staticBatchManagers[c$d])._initStaticBatchs(c$a),c$c._finishInit()},c$h._staticBatchManagers=[],c$h}(),c$ga=function(){function c$a(c$a,c$b,c$c){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=c$a,this._manager=c$b,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=c$c}c$p(c$a,"laya.d3.graphics.StaticBatch");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),c$b._binarySearch=function(c$a){for(var c$b=0,c$c=this._batchRenderElements.length-1,c$d=0;c$b<=c$c;)c$d=Math.floor((c$b+c$c)/2),this._compareBatchRenderElement(this._batchRenderElements[c$d],c$a)?c$c=c$d-1:c$b=c$d+1;return c$b},c$b._compareBatchRenderElement=function(c$a,c$b){throw new Error("StaticBatch:must override this function.")},c$b._getVertexDecLightMap=function(c$a){return c$a===c$Na.vertexDeclaration?c$Ia.vertexDeclaration:c$a===c$Ma.vertexDeclaration?c$Ha.vertexDeclaration:c$a===c$Ba.vertexDeclaration?c$wa.vertexDeclaration:c$a===c$Ra.vertexDeclaration?null:c$a===c$ra.vertexDeclaration?c$sa.vertexDeclaration:c$a===c$Pa.vertexDeclaration?c$Ka.vertexDeclaration:c$a===c$Fa.vertexDeclaration?c$Ga.vertexDeclaration:c$a===c$Oa.vertexDeclaration?c$Ja.vertexDeclaration:c$a===c$Ma.vertexDeclaration?c$Ha.vertexDeclaration:c$a===c$Ca.vertexDeclaration?c$xa.vertexDeclaration:c$a===c$Ra.vertexDeclaration?null:c$a===c$ra.vertexDeclaration?c$sa.vertexDeclaration:c$a===c$Qa.vertexDeclaration?c$La.vertexDeclaration:c$a===c$Fa.vertexDeclaration?c$Ga.vertexDeclaration:c$a},c$b._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},c$b._addBatchRenderElement=function(c$a){this._batchRenderElements.splice(this._binarySearch(c$a),0,c$a)},c$b._updateToRenderQueue=function(c$a,c$b){this._combineRenderElementPoolIndex=0,this._getRenderElement(c$a.getRenderQueue(this._material.renderQueue)._renderElements,c$a,c$b)},c$b._getRenderElement=function(c$a,c$b,c$c){throw new Error("StaticBatch:must override this function.")},c$b._finishInit=function(){throw new Error("StaticBatch:must override this function.")},c$b._clearRenderElements=function(){this._batchRenderElements.length=0},c$b.dispose=function(){},c$b._getVertexBuffer=function(c$a){return void 0===c$a&&(c$a=0),null},c$b._getIndexBuffer=function(){return null},c$b._beforeRender=function(c$a){return!0},c$b._render=function(c$a){},c$b._getVertexBuffers=function(){return null},c$q(0,c$b,"_vertexBufferCount",function(){return 1}),c$q(0,c$b,"triangleCount",function(){return 0}),c$a.combine=function(c$a){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),c$da.combine(c$a)},c$a.maxBatchVertexCount=65535,c$a}(),c$ha=function(){function c$i(c$a,c$b){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++c$i._uniqueIDCounter,this._id>c$i.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",c$i.maxVertexDeclaration);this._shaderValues=new c$ob,this._vertexElementsDic={},this._vertexStride=c$a,this._vertexElements=c$b;for(var c$c=0;c$c<c$b.length;c$c++){var c$d=c$b[c$c],c$g=c$d.elementUsage;this._vertexElementsDic[c$g]=c$d;var c$h=[c$i._getTypeSize(c$d.elementFormat)/4,5126,!1,this._vertexStride,c$d.offset];switch(this._shaderValues.setValue(c$g,c$h),c$g){case 1:this._addShaderDefine(c$Ab.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(c$Ab.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(c$Ab.SHADERDEFINE_UV1)}}}c$p(c$i,"laya.d3.graphics.VertexDeclaration");var c$a=c$i.prototype;return c$a._addShaderDefine=function(c$a){this._shaderDefineValue|=c$a},c$a._removeShaderDefine=function(c$a){this._shaderDefineValue&=~c$a},c$a.getVertexElements=function(){return this._vertexElements.slice()},c$a.getVertexElementByUsage=function(c$a){return this._vertexElementsDic[c$a]},c$a.unBinding=function(){},c$q(0,c$a,"shaderDefineValue",function(){return this._shaderDefineValue}),c$q(0,c$a,"id",function(){return this._id}),c$q(0,c$a,"vertexStride",function(){return this._vertexStride}),c$q(0,c$a,"shaderValues",function(){return this._shaderValues}),c$i._getTypeSize=function(c$a){switch(c$a){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},c$i.getVertexStride=function(c$a){for(var c$b=0,c$c=0;c$c<c$a.Length;c$c++){var c$d=c$a[c$c],c$g=c$d.offset+c$i._getTypeSize(c$d.elementFormat);c$b<c$g&&(c$b=c$g)}return c$b},c$i._maxVertexDeclarationBit=1e3,c$i._uniqueIDCounter=1,c$n(c$i,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),c$i}(),c$ia=function(){function c$a(c$a,c$b,c$c){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=c$a,this.elementFormat=c$b,this.elementUsage=c$c}return c$p(c$a,"laya.d3.graphics.VertexElement"),c$a}(),c$ja=(function(){function c$a(){}c$p(c$a,"laya.d3.graphics.VertexElementFormat"),c$a.Single="single",c$a.Vector2="vector2",c$a.Vector3="vector3",c$a.Vector4="vector4",c$a.Color="color",c$a.Byte4="byte4",c$a.Short2="short2",c$a.Short4="short4",c$a.NormalizedShort2="normalizedshort2",c$a.NormalizedShort4="normalizedshort4",c$a.HalfVector2="halfvector2",c$a.HalfVector4="halfvector4"}(),function(){function c$a(){}c$p(c$a,"laya.d3.graphics.VertexElementUsage"),c$a.POSITION0=0,c$a.COLOR0=1,c$a.TEXTURECOORDINATE0=2,c$a.NORMAL0=3,c$a.BINORMAL0=4,c$a.TANGENT0=5,c$a.BLENDINDICES0=6,c$a.BLENDWEIGHT0=7,c$a.DEPTH0=8,c$a.FOG0=9,c$a.POINTSIZE0=10,c$a.SAMPLE0=11,c$a.TESSELLATEFACTOR0=12,c$a.COLOR1=13,c$a.NEXTTEXTURECOORDINATE0=14,c$a.TEXTURECOORDINATE1=15,c$a.NEXTTEXTURECOORDINATE1=16,c$a.CORNERTEXTURECOORDINATE0=17,c$a.VELOCITY0=18,c$a.STARTCOLOR0=19,c$a.STARTSIZE=20,c$a.AGEADDSCALE0=21,c$a.STARTROTATION=22,c$a.ENDCOLOR0=23,c$a.STARTLIFETIME=24,c$a.TIME0=33,c$a.SHAPEPOSITIONSTARTLIFETIME=30,c$a.DIRECTIONTIME=32,c$a.SIZEROTATION0=27,c$a.RADIUS0=28,c$a.RADIAN0=29,c$a.STARTSPEED=31,c$a.RANDOM0=34,c$a.RANDOM1=35,c$a.SIMULATIONWORLDPOSTION=36,c$a.SIMULATIONWORLDROTATION=37,c$a.TEXTURECOORDINATE0X=38,c$a.TEXTURECOORDINATE0X1=39,c$a.TEXTURECOORDINATE0Y=40,c$a.OFFSETVECTOR=41}(),function(){function c$a(c$a,c$b,c$c){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=c$a,this._textureCoordinate0=c$b,this._time=c$c}c$p(c$a,"laya.d3.graphics.VertexGlitter");var c$b=c$a.prototype;c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"textureCoordinate",function(){return this._textureCoordinate0}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"time",function(){return this._time}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(24,[new c$ia(0,"vector3",0),new c$ia(12,"vector2",2),new c$ia(20,"single",33)])}])}(),function(){function c$a(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=c$a,this._position=c$b,this._velocity=c$c,this._startColor=c$d,this._endColor=c$g,this._sizeRotation=c$h,this._radius=c$i,this._radian=c$j,this._ageAddScale=c$k,this._time=c$l}c$p(c$a,"laya.d3.graphics.VertexParticle");var c$b=c$a.prototype;c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"endColor",function(){return this._endColor}),c$q(0,c$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),c$q(0,c$b,"sizeRotation",function(){return this._sizeRotation}),c$q(0,c$b,"velocity",function(){return this._velocity}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"startColor",function(){return this._startColor}),c$q(0,c$b,"radius",function(){return this._radius}),c$q(0,c$b,"radian",function(){return this._radian}),c$q(0,c$b,"ageAddScale",function(){return this._ageAddScale}),c$q(0,c$b,"time",function(){return this._time}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(116,[new c$ia(0,"vector4",17),new c$ia(16,"vector3",0),new c$ia(28,"vector3",18),new c$ia(40,"vector4",19),new c$ia(56,"vector4",23),new c$ia(72,"vector3",27),new c$ia(84,"vector2",28),new c$ia(92,"vector4",29),new c$ia(108,"single",24),new c$ia(112,"single",33)])}])}(),function(){function c$a(c$a){this._position=null,this._position=c$a}c$p(c$a,"laya.d3.graphics.VertexPosition");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(12,[new c$ia(0,"vector3",0)])}]),c$a}()),c$ka=function(){function c$a(c$a,c$b){this._position=null,this._normal=null,this._position=c$a,this._normal=c$b}c$p(c$a,"laya.d3.graphics.VertexPositionNormal");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(24,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3)])}]),c$a}(),c$la=function(){function c$a(c$a,c$b,c$c){this._position=null,this._normal=null,this._color=null,this._position=c$a,this._normal=c$b,this._color=c$c}c$p(c$a,"laya.d3.graphics.VertexPositionNormalColor");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"color",function(){return this._color}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(40,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector4",1)])}]),c$a}(),c$ma=function(){function c$a(c$a,c$b,c$c,c$d,c$g){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=c$a,this._normal=c$b,this._color=c$c,this._blendIndex=c$d,this._blendWeight=c$g}c$p(c$a,"laya.d3.graphics.VertexPositionNormalColorSkin");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"blendWeight",function(){return this._blendWeight}),c$q(0,c$b,"color",function(){return this._color}),c$q(0,c$b,"blendIndex",function(){return this._blendIndex}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(72,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector4",1),new c$ia(40,"vector4",7),new c$ia(56,"vector4",6)])}]),c$a}(),c$na=function(){function c$a(c$a,c$b,c$c,c$d,c$g,c$h){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=c$a,this._normal=c$b,this._color=c$c,this._tangent=c$d,this._blendIndex=c$g,this._blendWeight=c$h}c$p(c$a,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"blendWeight",function(){return this._blendWeight}),c$q(0,c$b,"color",function(){return this._color}),c$q(0,c$b,"blendIndex",function(){return this._blendIndex}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(88,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector4",1),new c$ia(40,"vector4",7),new c$ia(56,"vector4",6),new c$ia(72,"vector4",5)])}]),c$a}(),c$oa=function(){function c$a(c$a,c$b,c$c,c$d,c$g,c$h){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=c$a,this._normal=c$b,this._color=c$c,this._tangent=c$d,this._blendIndex=c$g,this._blendWeight=c$h}c$p(c$a,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"blendWeight",function(){return this._blendWeight}),c$q(0,c$b,"color",function(){return this._color}),c$q(0,c$b,"blendIndex",function(){return this._blendIndex}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(84,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector4",1),new c$ia(40,"vector4",7),new c$ia(56,"vector4",6),new c$ia(72,"vector3",5)])}]),c$a}(),c$pa=function(){function c$a(c$a,c$b,c$c,c$d){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=c$a,this._normal=c$b,this._color=c$c,this._tangent=c$d}c$p(c$a,"laya.d3.graphics.VertexPositionNormalColorSTangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"color",function(){return this._color}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(56,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector4",1),new c$ia(40,"vector4",5)])}]),c$a}(),c$qa=function(){function c$a(c$a,c$b,c$c,c$d){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=c$a,this._normal=c$b,this._color=c$c,this._tangent=c$d}c$p(c$a,"laya.d3.graphics.VertexPositionNormalColorTangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"color",function(){return this._color}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(52,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector4",1),new c$ia(40,"vector3",5)])}]),c$a}(),c$ra=function(){function c$a(c$a,c$b,c$c,c$d){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=c$a,this._normal=c$b,this._color=c$c,this._textureCoordinate=c$d}c$p(c$a,"laya.d3.graphics.VertexPositionNormalColorTexture");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"textureCoordinate",function(){return this._textureCoordinate}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"color",function(){return this._color}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(48,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector4",1),new c$ia(40,"vector2",2)])}]),c$a}(),c$sa=function(){function c$a(c$a,c$b,c$c,c$d,c$g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=c$a,this._normal=c$b,this._color=c$c,this._textureCoordinate0=c$d,this._textureCoordinate1=c$g}c$p(c$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"color",function(){return this._color}),c$q(0,c$b,"textureCoordinate0",function(){return this._textureCoordinate0}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(0,c$b,"textureCoordinate1",function(){return this._textureCoordinate1}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(56,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector4",1),new c$ia(40,"vector2",2),new c$ia(48,"vector2",15)])}]),c$a}(),c$ta=function(){function c$a(c$a,c$b,c$c,c$d,c$g,c$h,c$i){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=c$a,this._normal=c$b,this._color=c$c,this._textureCoordinate0=c$d,this._textureCoordinate1=c$g,this._blendIndex=c$h,this._blendWeight=c$i}c$p(c$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"blendWeight",function(){return this._blendWeight}),c$q(0,c$b,"color",function(){return this._color}),c$q(0,c$b,"textureCoordinate0",function(){return this._textureCoordinate0}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(0,c$b,"textureCoordinate1",function(){return this._textureCoordinate1}),c$q(0,c$b,"blendIndex",function(){return this._blendIndex}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(88,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector4",1),new c$ia(40,"vector2",2),new c$ia(48,"vector2",15),new c$ia(56,"vector4",7),new c$ia(72,"vector4",6)])}]),c$a}(),c$ua=function(){function c$a(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=c$a,this._normal=c$b,this._color=c$c,this._textureCoordinate0=c$d,this._textureCoordinate1=c$g,this._tangent=c$h,this._blendIndex=c$i,this._blendWeight=c$j}c$p(c$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"blendWeight",function(){return this._blendWeight}),c$q(0,c$b,"color",function(){return this._color}),c$q(0,c$b,"textureCoordinate0",function(){return this._textureCoordinate0}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(0,c$b,"textureCoordinate1",function(){return this._textureCoordinate1}),c$q(0,c$b,"blendIndex",function(){return this._blendIndex}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(104,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector4",1),new c$ia(40,"vector2",2),new c$ia(48,"vector2",15),new c$ia(56,"vector4",7),new c$ia(72,"vector4",6),new c$ia(88,"vector4",5)])}]),c$a}(),c$va=function(){function c$a(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}c$p(c$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$b.VertexPositionNormalColorTexture0SkinTangent=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){this._position=c$a,this._normal=c$b,this._color=c$c,this._textureCoordinate0=c$d,this._textureCoordinate1=c$g,this._tangent=c$h,this._blendIndex=c$i,this._blendWeight=c$j},c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"blendWeight",function(){return this._blendWeight}),c$q(0,c$b,"color",function(){return this._color}),c$q(0,c$b,"textureCoordinate0",function(){return this._textureCoordinate0}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(0,c$b,"textureCoordinate1",function(){return this._textureCoordinate1}),c$q(0,c$b,"blendIndex",function(){return this._blendIndex}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(100,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector4",1),new c$ia(40,"vector2",2),new c$ia(48,"vector2",15),new c$ia(56,"vector4",7),new c$ia(72,"vector4",6),new c$ia(88,"vector3",5)])}]),c$a}(),c$wa=function(){function c$a(c$a,c$b,c$c,c$d,c$g,c$h){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=c$a,this._normal=c$b,this._color=c$c,this._textureCoordinate0=c$d,this._textureCoordinate1=c$g,this._tangent=c$h}c$p(c$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"color",function(){return this._color}),c$q(0,c$b,"textureCoordinate0",function(){return this._textureCoordinate0}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(0,c$b,"textureCoordinate1",function(){return this._textureCoordinate1}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(72,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector4",1),new c$ia(40,"vector2",2),new c$ia(48,"vector2",15),new c$ia(56,"vector4",5)])}]),c$a}(),c$xa=function(){function c$a(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}c$p(c$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$b.VertexPositionNormalColorTexture0Tangent=function(c$a,c$b,c$c,c$d,c$g,c$h){this._position=c$a,this._normal=c$b,this._color=c$c,this._textureCoordinate0=c$d,this._textureCoordinate1=c$g,this._tangent=c$h},c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"color",function(){return this._color}),c$q(0,c$b,"textureCoordinate0",function(){return this._textureCoordinate0}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(0,c$b,"textureCoordinate1",function(){return this._textureCoordinate1}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(68,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector4",1),new c$ia(40,"vector2",2),new c$ia(48,"vector2",15),new c$ia(56,"vector3",5)])}]),c$a}(),c$ya=function(){function c$a(c$a,c$b,c$c,c$d,c$g,c$h){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=c$a,this._normal=c$b,this._color=c$c,this._textureCoordinate=c$d,this._blendIndex=c$g,this._blendWeight=c$h}c$p(c$a,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"textureCoordinate",function(){return this._textureCoordinate}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"blendWeight",function(){return this._blendWeight}),c$q(0,c$b,"color",function(){return this._color}),c$q(0,c$b,"blendIndex",function(){return this._blendIndex}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(80,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector4",1),new c$ia(40,"vector2",2),new c$ia(48,"vector4",7),new c$ia(64,"vector4",6)])}]),c$a}(),c$za=function(){function c$a(c$a,c$b,c$c,c$d,c$g,c$h,c$i){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=c$a,this._normal=c$b,this._color=c$c,this._textureCoordinate=c$d,this._tangent=c$g,this._blendIndex=c$h,this._blendWeight=c$i}c$p(c$a,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"textureCoordinate",function(){return this._textureCoordinate}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"blendWeight",function(){return this._blendWeight}),c$q(0,c$b,"color",function(){return this._color}),c$q(0,c$b,"blendIndex",function(){return this._blendIndex}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(96,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector4",1),new c$ia(40,"vector2",2),new c$ia(48,"vector4",7),new c$ia(64,"vector4",6),new c$ia(80,"vector4",5)])}]),c$a}(),c$Aa=function(){function c$a(c$a,c$b,c$c,c$d,c$g,c$h,c$i){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=c$a,this._normal=c$b,this._color=c$c,this._textureCoordinate=c$d,this._tangent=c$g,this._blendIndex=c$h,this._blendWeight=c$i}c$p(c$a,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"textureCoordinate",function(){return this._textureCoordinate}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"blendWeight",function(){return this._blendWeight}),c$q(0,c$b,"color",function(){return this._color}),c$q(0,c$b,"blendIndex",function(){return this._blendIndex}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(92,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector4",1),new c$ia(40,"vector2",2),new c$ia(48,"vector4",7),new c$ia(64,"vector4",6),new c$ia(80,"vector3",5)])}]),c$a}(),c$Ba=function(){function c$a(c$a,c$b,c$c,c$d,c$g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=c$a,this._normal=c$b,this._color=c$c,this._textureCoordinate=c$d,this._tangent=c$g}c$p(c$a,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"textureCoordinate",function(){return this._textureCoordinate}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"color",function(){return this._color}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(64,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector4",1),new c$ia(40,"vector2",2),new c$ia(48,"vector4",5)])}]),c$a}(),c$Ca=function(){function c$a(c$a,c$b,c$c,c$d,c$g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=c$a,this._normal=c$b,this._color=c$c,this._textureCoordinate=c$d,this._tangent=c$g}c$p(c$a,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"textureCoordinate",function(){return this._textureCoordinate}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"color",function(){return this._color}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(60,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector4",1),new c$ia(40,"vector2",2),new c$ia(48,"vector3",5)])}]),c$a}(),c$Da=function(){function c$a(c$a,c$b,c$c){this._position=null,this._normal=null,this._tangent=null,this._position=c$a,this._normal=c$b,this._tangent=c$c}c$p(c$a,"laya.d3.graphics.VertexPositionNormalSTangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(40,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector4",5)])}]),c$a}(),c$Ea=function(){function c$a(c$a,c$b,c$c){this._position=null,this._normal=null,this._tangent=null,this._position=c$a,this._normal=c$b,this._tangent=c$c}c$p(c$a,"laya.d3.graphics.VertexPositionNormalTangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(36,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector3",5)])}]),c$a}(),c$Fa=function(){function c$a(c$a,c$b,c$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=c$a,this._normal=c$b,this._textureCoordinate=c$c}c$p(c$a,"laya.d3.graphics.VertexPositionNormalTexture");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"textureCoordinate",function(){return this._textureCoordinate}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(32,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector2",2)])}]),c$a}(),c$Ga=function(){function c$a(c$a,c$b,c$c,c$d){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=c$a,this._normal=c$b,this._textureCoordinate0=c$c,this._textureCoordinate1=c$d}c$p(c$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"textureCoordinate0",function(){return this._textureCoordinate0}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(0,c$b,"textureCoordinate1",function(){return this._textureCoordinate1}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(40,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector2",2),new c$ia(32,"vector2",15)])}]),c$a}(),c$Ha=function(){function c$a(c$a,c$b,c$c,c$d,c$g,c$h){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=c$a,this._normal=c$b,this._textureCoordinate0=c$c,this._textureCoordinate1=c$d,this._blendIndex=c$g,this._blendWeight=c$h}c$p(c$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"textureCoordinate0",function(){return this._textureCoordinate0}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(0,c$b,"textureCoordinate1",function(){return this._textureCoordinate1}),c$q(0,c$b,"blendIndex",function(){return this._blendIndex}),c$q(0,c$b,"blendWeight",function(){return this._blendWeight}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(72,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector2",2),new c$ia(32,"vector2",15),new c$ia(40,"vector4",7),new c$ia(56,"vector4",6)])}]),c$a}(),c$Ia=function(){function c$a(c$a,c$b,c$c,c$d,c$g,c$h,c$i){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=c$a,this._normal=c$b,this._textureCoordinate0=c$c,this._textureCoordinate1=c$d,this._tangent=c$g,this._blendIndex=c$h,this._blendWeight=c$i}c$p(c$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"textureCoordinate0",function(){return this._textureCoordinate0}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(0,c$b,"textureCoordinate1",function(){return this._textureCoordinate1}),c$q(0,c$b,"blendIndex",function(){return this._blendIndex}),c$q(0,c$b,"blendWeight",function(){return this._blendWeight}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(88,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector2",2),new c$ia(32,"vector2",15),new c$ia(40,"vector4",7),new c$ia(56,"vector4",6),new c$ia(72,"vector4",5)])}]),c$a}(),c$Ja=function(){function c$a(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}c$p(c$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$b.VertexPositionNormalTexture0SkinTangent=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){this._position=c$a,this._normal=c$b,this._textureCoordinate0=c$c,this._textureCoordinate1=c$d,this._tangent=c$g,this._blendIndex=c$h,this._blendWeight=c$i},c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"textureCoordinate0",function(){return this._textureCoordinate0}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(0,c$b,"textureCoordinate1",function(){return this._textureCoordinate1}),c$q(0,c$b,"blendIndex",function(){return this._blendIndex}),c$q(0,c$b,"blendWeight",function(){return this._blendWeight}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(84,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector2",2),new c$ia(32,"vector2",15),new c$ia(40,"vector4",7),new c$ia(56,"vector4",6),new c$ia(72,"vector3",5)])}]),c$a}(),c$Ka=function(){function c$a(c$a,c$b,c$c,c$d,c$g){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=c$a,this._normal=c$b,this._textureCoordinate0=c$c,this._textureCoordinate1=c$d,this._tangent=c$g}c$p(c$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"textureCoordinate0",function(){return this._textureCoordinate0}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(0,c$b,"textureCoordinate1",function(){return this._textureCoordinate1}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(56,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector2",2),new c$ia(32,"vector2",15),new c$ia(40,"vector4",5)])}]),c$a}(),c$La=function(){function c$a(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}c$p(c$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$b.VertexPositionNormalTexture0Tangent=function(c$a,c$b,c$c,c$d,c$g){this._position=c$a,this._normal=c$b,this._textureCoordinate0=c$c,this._textureCoordinate1=c$d,this._tangent=c$g},c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"textureCoordinate0",function(){return this._textureCoordinate0}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(0,c$b,"textureCoordinate1",function(){return this._textureCoordinate1}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(52,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector2",2),new c$ia(32,"vector2",15),new c$ia(40,"vector3",5)])}]),c$a}(),c$Ma=function(){function c$a(c$a,c$b,c$c,c$d,c$g){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=c$a,this._normal=c$b,this._textureCoordinate=c$c,this._blendIndex=c$d,this._blendWeight=c$g}c$p(c$a,"laya.d3.graphics.VertexPositionNormalTextureSkin");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"textureCoordinate",function(){return this._textureCoordinate}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"blendIndex",function(){return this._blendIndex}),c$q(0,c$b,"blendWeight",function(){return this._blendWeight}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(64,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector2",2),new c$ia(32,"vector4",7),new c$ia(48,"vector4",6)])}]),c$a}(),c$Na=function(){function c$a(c$a,c$b,c$c,c$d,c$g,c$h){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=c$a,this._normal=c$b,this._textureCoordinate=c$c,this._tangent=c$d,this._blendIndex=c$g,this._blendWeight=c$h}c$p(c$a,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"textureCoordinate",function(){return this._textureCoordinate}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"blendIndex",function(){return this._blendIndex}),c$q(0,c$b,"blendWeight",function(){return this._blendWeight}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(80,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector2",2),new c$ia(32,"vector4",7),new c$ia(48,"vector4",6),new c$ia(64,"vector4",5)])}]),c$a}(),c$Oa=function(){function c$a(c$a,c$b,c$c,c$d,c$g,c$h){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=c$a,this._normal=c$b,this._textureCoordinate=c$c,this._tangent=c$d,this._blendIndex=c$g,this._blendWeight=c$h}c$p(c$a,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"textureCoordinate",function(){return this._textureCoordinate}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"blendIndex",function(){return this._blendIndex}),c$q(0,c$b,"blendWeight",function(){return this._blendWeight}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(76,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector2",2),new c$ia(32,"vector4",7),new c$ia(48,"vector4",6),new c$ia(64,"vector3",5)])}]),c$a}(),c$Pa=function(){function c$a(c$a,c$b,c$c,c$d){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=c$a,this._normal=c$b,this._textureCoordinate=c$c,this._tangent=c$d}c$p(c$a,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"textureCoordinate",function(){return this._textureCoordinate}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(48,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector2",2),new c$ia(32,"vector4",5)])}]),c$a}(),c$Qa=function(){function c$a(c$a,c$b,c$c,c$d){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=c$a,this._normal=c$b,this._textureCoordinate=c$c,this._tangent=c$d}c$p(c$a,"laya.d3.graphics.VertexPositionNormalTextureTangent");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"textureCoordinate",function(){return this._textureCoordinate}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(44,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector2",2),new c$ia(32,"vector3",5)])}]),c$a}(),c$Ra=function(){function c$a(c$a,c$b,c$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=c$a,this._normal=c$b,this._textureCoordinate=c$c}c$p(c$a,"laya.d3.graphics.VertexPositionNTBTexture");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"textureCoordinate",function(){return this._textureCoordinate}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(56,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector3",5),new c$ia(36,"vector3",4),new c$ia(48,"vector2",2)])}]),c$a}(),c$Sa=function(){function c$a(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=c$a,this._normal=c$b,this._textureCoordinate0=c$d,this._textureCoordinate1=c$g,this._tangent=c$h,c$c=c$c,this._blendIndex=c$i,this._blendWeight=c$j}c$p(c$a,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"tangent",function(){return this._tangent}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"textureCoordinate0",function(){return this._textureCoordinate0}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(0,c$b,"textureCoordinate1",function(){return this._textureCoordinate1}),c$q(0,c$b,"blendIndex",function(){return this._blendIndex}),c$q(0,c$b,"blendWeight",function(){return this._blendWeight}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(96,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector3",5),new c$ia(36,"vector3",4),new c$ia(48,"vector2",2),new c$ia(56,"vector2",15),new c$ia(64,"vector4",7),new c$ia(80,"vector4",6)])}]),c$a}(),c$Ta=function(){function c$a(c$a,c$b,c$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=c$a,this._normal=c$b,this._textureCoordinate=c$c}c$p(c$a,"laya.d3.graphics.VertexPositionNTBTextureSkin");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"textureCoordinate",function(){return this._textureCoordinate}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(88,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector3",5),new c$ia(36,"vector3",4),new c$ia(48,"vector2",2),new c$ia(56,"vector4",7),new c$ia(72,"vector4",6)])}]),c$a}(),c$Ua=(function(){function c$a(c$a,c$b,c$c,c$d){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=c$a,this._normal=c$b,this._textureCoord0=c$c,this._textureCoord1=c$d}c$p(c$a,"laya.d3.graphics.VertexPositionTerrain");var c$b=c$a.prototype;c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"normal",function(){return this._normal}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"textureCoord0",function(){return this._textureCoord0}),c$q(0,c$b,"textureCoord1",function(){return this._textureCoord1}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(40,[new c$ia(0,"vector3",0),new c$ia(12,"vector3",3),new c$ia(24,"vector2",2),new c$ia(32,"vector2",15)])}])}(),function(){function c$a(c$a,c$b){this._position=null,this._textureCoordinate0=null,this._position=c$a,this._textureCoordinate0=c$b}c$p(c$a,"laya.d3.graphics.VertexPositionTexture0");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"position",function(){return this._position}),c$q(0,c$b,"textureCoordinate0",function(){return this._textureCoordinate0}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(20,[new c$ia(0,"vector3",0),new c$ia(12,"vector2",2)])}]),c$a}()),c$Va=(function(){function c$a(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l,c$m,c$n,c$o,c$p){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=c$a,this._positionStartLifeTime=c$b,this._velocity=c$c,this._startColor=c$d,this._startSize=c$g,this._startRotation0=c$h,this._startRotation1=c$i,this._startRotation2=c$j,this._startLifeTime=c$k,this._time=c$l,this._startSpeed=c$m,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=c$p}c$p(c$a,"laya.d3.graphics.VertexShurikenParticleBillboard");var c$b=c$a.prototype;c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),c$q(0,c$b,"random1",function(){return this._randoms1}),c$q(0,c$b,"startRotation2",function(){return this._startRotation2}),c$q(0,c$b,"positionStartLifeTime",function(){return this._positionStartLifeTime}),c$q(0,c$b,"velocity",function(){return this._velocity}),c$q(0,c$b,"random0",function(){return this._randoms0}),c$q(0,c$b,"startSize",function(){return this._startSize}),c$q(0,c$b,"startColor",function(){return this._startColor}),c$q(0,c$b,"startRotation0",function(){return this._startRotation0}),c$q(0,c$b,"startRotation1",function(){return this._startRotation1}),c$q(0,c$b,"startLifeTime",function(){return this._startLifeTime}),c$q(0,c$b,"time",function(){return this._time}),c$q(0,c$b,"startSpeed",function(){return this._startSpeed}),c$q(0,c$b,"simulationWorldPostion",function(){return this._simulationWorldPostion}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(152,[new c$ia(0,"vector4",17),new c$ia(16,"vector4",30),new c$ia(32,"vector4",32),new c$ia(48,"vector4",19),new c$ia(64,"vector3",20),new c$ia(76,"vector3",22),new c$ia(88,"single",31),new c$ia(92,"vector4",34),new c$ia(108,"vector4",35),new c$ia(124,"vector3",36),new c$ia(136,"vector4",37)])}])}(),function(){function c$a(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l,c$m,c$n,c$o,c$p){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=c$a,this._positionStartLifeTime=c$b,this._velocity=c$c,this._startColor=c$d,this._startSize=c$g,this._startRotation0=c$h,this._startRotation1=c$i,this._startRotation2=c$j,this._startLifeTime=c$k,this._time=c$l,this._startSpeed=c$m,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=c$p}c$p(c$a,"laya.d3.graphics.VertexShurikenParticleMesh");var c$b=c$a.prototype;c$x.imps(c$b,{"laya.d3.graphics.IVertex":!0}),c$q(0,c$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),c$q(0,c$b,"velocity",function(){return this._velocity}),c$q(0,c$b,"position",function(){return this._positionStartLifeTime}),c$q(0,c$b,"random0",function(){return this._randoms0}),c$q(0,c$b,"startSize",function(){return this._startSize}),c$q(0,c$b,"startColor",function(){return this._startColor}),c$q(0,c$b,"startRotation0",function(){return this._startRotation0}),c$q(0,c$b,"startRotation1",function(){return this._startRotation1}),c$q(0,c$b,"random1",function(){return this._randoms1}),c$q(0,c$b,"startRotation2",function(){return this._startRotation2}),c$q(0,c$b,"startLifeTime",function(){return this._startLifeTime}),c$q(0,c$b,"time",function(){return this._time}),c$q(0,c$b,"startSpeed",function(){return this._startSpeed}),c$q(0,c$b,"simulationWorldPostion",function(){return this._simulationWorldPostion}),c$q(0,c$b,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$q(1,c$a,"vertexDeclaration",function(){return c$a._vertexDeclaration}),c$n(c$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new c$ha(172,[new c$ia(0,"vector3",0),new c$ia(12,"vector4",1),new c$ia(28,"vector2",2),new c$ia(36,"vector4",30),new c$ia(52,"vector4",32),new c$ia(68,"vector4",19),new c$ia(84,"vector3",20),new c$ia(96,"vector3",22),new c$ia(108,"single",31),new c$ia(112,"vector4",34),new c$ia(128,"vector4",35),new c$ia(144,"vector3",36),new c$ia(156,"vector4",37)])}])}(),function(){function c$v(c$a,c$b,c$c,c$d,c$g,c$h){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=c$c,this._materials=c$d,this._subMeshes=c$g,this._materialMap=c$h,this._version=c$b,this._onLoaded(c$a)}c$p(c$v,"laya.d3.loaders.LoadModelV01");var c$a=c$v.prototype;return c$a._onLoaded=function(c$a){this._readData=c$a,this.READ_BLOCK();for(var c$b=0;c$b<this._BLOCK.count;c$b++){var c$c=this._readData.getUint16(),c$d=this._strings[c$c],c$g=this["READ_"+c$d];if(null==c$g)throw new Error("model file err,no this function:"+c$c+" "+c$d);if(!c$g.call(this))break}return this._mesh},c$a.onError=function(){},c$a._readString=function(){return this._strings[this._readData.getUint16()]},c$a.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},c$a.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},c$a.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var c$a=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var c$b=0;c$b<this._STRINGS.size;c$b++)this._strings[c$b]=this._readData.readUTFString();return this._readData.pos=c$a,!0},c$a.READ_MATERIAL=function(){var c$a=this._readData.getUint16(),c$b=(this._readString(),this._readString());return this._materials[c$a]="null"!==c$b?c$t.getRes(this._materialMap[c$b]):new c$Eb,!0},c$a.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var c$a,c$b=this._readData.__getBuffer(),c$c=0,c$d=this._readData.getUint32(),c$g=this._readData.getUint32(),c$h=(new Float32Array(c$b.slice(c$d+this._DATA.offset,c$d+this._DATA.offset+c$g)),this._readData.getUint32()),c$i=this._readData.getUint32(),c$j=new Float32Array(c$b.slice(c$h+this._DATA.offset,c$h+this._DATA.offset+c$i));for(this.mesh._inverseBindPoses=[],c$c=0,c$a=c$j.length;c$c<c$a;c$c+=16){var c$k=new c$ab(c$j[c$c+0],c$j[c$c+1],c$j[c$c+2],c$j[c$c+3],c$j[c$c+4],c$j[c$c+5],c$j[c$c+6],c$j[c$c+7],c$j[c$c+8],c$j[c$c+9],c$j[c$c+10],c$j[c$c+11],c$j[c$c+12],c$j[c$c+13],c$j[c$c+14],c$j[c$c+15]);this.mesh._inverseBindPoses.push(c$k)}break;default:throw new Error("LoadModel:unknown version.")}return!0},c$a.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var c$a=this._readString();this._shaderAttributes=c$a.match(c$v._attrReg);var c$b=this._readData.getUint32(),c$c=this._readData.getUint32(),c$d=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),c$g=this._readData.getUint32(),c$h=this._readData.getUint32(),c$i=this._readData.getUint32(),c$j=this._readData.__getBuffer(),c$k=new c$lb(this._mesh),c$l=this._getVertexDeclaration(),c$m=c$Ob.create(c$l,c$g/c$l.vertexStride,35044,!0),c$n=c$d+this._DATA.offset,c$o=c$j.slice(c$n,c$n+c$g);c$m.setData(new Float32Array(c$o));for(var c$p=(c$k._vertexBuffer=c$m).vertexDeclaration.getVertexElements(),c$q=0;c$q<c$p.length;c$q++)c$k._bufferUsage[c$p[c$q].elementUsage]=c$m;var c$r=c$Nb.create("ushort",c$c/2,35044,!0),c$s=c$b+this._DATA.offset,c$t=c$j.slice(c$s,c$s+c$c);c$r.setData(new Uint16Array(c$t)),c$k._indexBuffer=c$r;var c$u=c$j.slice(c$h+this._DATA.offset,c$h+this._DATA.offset+c$i);return c$k._boneIndicesList[0]=new Uint8Array(c$u),this._subMeshes.push(c$k),!0},c$a.READ_DATAAREA=function(){return!1},c$a._getVertexDeclaration=function(){for(var c$a,c$b=!1,c$c=!1,c$d=!1,c$g=!1,c$h=!1,c$i=!1,c$j=!1,c$k=!1,c$l=!1,c$m=0;c$m<this._shaderAttributes.length;c$m+=8)switch(this._shaderAttributes[c$m]){case"POSITION":c$b=!0;break;case"NORMAL":c$c=!0;break;case"COLOR":c$d=!0;break;case"UV":c$g=!0;break;case"UV1":c$h=!0;break;case"BLENDWEIGHT":c$j=!0;break;case"BLENDINDICES":c$k=!0;break;case"TANGENT":c$i=!0;break;case"BINORMAL":c$l=!0}return c$b&&c$c&&c$d&&c$g&&c$h&&c$j&&c$k&&c$i?c$a=c$va.vertexDeclaration:c$b&&c$c&&c$d&&c$g&&c$h&&c$j&&c$k?c$a=c$ta.vertexDeclaration:c$b&&c$c&&c$g&&c$h&&c$j&&c$k&&c$i?c$a=c$Ja.vertexDeclaration:c$b&&c$c&&c$g&&c$h&&c$j&&c$k?c$a=c$Ha.vertexDeclaration:c$b&&c$c&&c$d&&c$g&&c$j&&c$k&&c$i?c$a=c$Aa.vertexDeclaration:c$b&&c$c&&c$d&&c$g&&c$j&&c$k?c$a=c$ya.vertexDeclaration:c$b&&c$c&&c$i&&c$l&&c$g&&c$j&&c$k?c$a=c$Ta.vertexDeclaration:c$b&&c$c&&c$g&&c$j&&c$k&&c$i?c$a=c$Oa.vertexDeclaration:c$b&&c$c&&c$g&&c$j&&c$k?c$a=c$Ma.vertexDeclaration:c$b&&c$c&&c$d&&c$j&&c$k&&c$i?c$a=c$oa.vertexDeclaration:c$b&&c$c&&c$d&&c$j&&c$k?c$a=c$ma.vertexDeclaration:c$b&&c$c&&c$d&&c$g&&c$h&&c$i?c$a=c$xa.vertexDeclaration:c$b&&c$c&&c$d&&c$g&&c$h?c$a=c$sa.vertexDeclaration:c$b&&c$c&&c$g&&c$h&&c$i?c$a=c$La.vertexDeclaration:c$b&&c$c&&c$g&&c$h?c$a=c$Ga.vertexDeclaration:c$b&&c$c&&c$d&&c$g&&c$i?c$a=c$Ca.vertexDeclaration:c$b&&c$c&&c$g&&c$i&&c$l?c$a=c$Ra.vertexDeclaration:c$b&&c$c&&c$d&&c$g?c$a=c$ra.vertexDeclaration:c$b&&c$c&&c$g&&c$i?c$a=c$Qa.vertexDeclaration:c$b&&c$c&&c$g?c$a=c$Fa.vertexDeclaration:c$b&&c$c&&c$d&&c$i?c$a=c$qa.vertexDeclaration:c$b&&c$c&&c$d&&(c$a=c$la.vertexDeclaration),c$a},c$q(0,c$a,"mesh",function(){return this._mesh}),c$v._attrReg=new RegExp("(\\w+)|([:,;])","g"),c$v}()),c$Wa=function(){function c$z(){}return c$p(c$z,"laya.d3.loaders.LoadModelV02"),c$z.parse=function(c$a,c$b,c$c,c$d,c$g,c$h){c$z._mesh=c$c,c$z._materials=c$d,c$z._subMeshes=c$g,c$z._materialMap=c$h,c$z._version=c$b,c$z._readData=c$a,c$z.READ_DATA(),c$z.READ_BLOCK(),c$z.READ_STRINGS();for(var c$i=0,c$j=c$z._BLOCK.count;c$i<c$j;c$i++){c$z._readData.pos=c$z._BLOCK.blockStarts[c$i];var c$k=c$z._readData.getUint16(),c$l=c$z._strings[c$k],c$m=c$z["READ_"+c$l];if(null==c$m)throw new Error("model file err,no this function:"+c$k+" "+c$l);c$m.call()}c$z._strings.length=0,c$z._readData=null,c$z._version=null,c$z._mesh=null,c$z._materials=null,c$z._subMeshes=null,c$z._materialMap=null},c$z._readString=function(){return c$z._strings[c$z._readData.getUint16()]},c$z.READ_DATA=function(){c$z._DATA.offset=c$z._readData.getUint32(),c$z._DATA.size=c$z._readData.getUint32()},c$z.READ_BLOCK=function(){for(var c$a=c$z._BLOCK.count=c$z._readData.getUint16(),c$b=c$z._BLOCK.blockStarts=[],c$c=c$z._BLOCK.blockLengths=[],c$d=0;c$d<c$a;c$d++)c$b.push(c$z._readData.getUint32()),c$c.push(c$z._readData.getUint32())},c$z.READ_STRINGS=function(){var c$a=c$z._readData.getUint32(),c$b=c$z._readData.getUint16(),c$c=c$z._readData.pos;c$z._readData.pos=c$a+c$z._DATA.offset;for(var c$d=0;c$d<c$b;c$d++)c$z._strings[c$d]=c$z._readData.readUTFString();c$z._readData.pos=c$c},c$z.READ_MATERIAL=function(){c$z._readString(),c$z._readString();var c$a=c$z._readString();return""!==c$a&&c$z._materials.push(c$t.getRes(c$z._materialMap[c$a])),!0},c$z.READ_MESH=function(){c$z._readString();var c$a,c$b=c$z._readData.__getBuffer(),c$c=0,c$d=c$z._readData.getInt16(),c$g=c$z._DATA.offset;for(c$c=0;c$c<c$d;c$c++){var c$h=c$g+c$z._readData.getUint32(),c$i=c$z._readData.getUint32(),c$j=new Float32Array(c$b.slice(c$h,c$h+c$i)),c$k=c$z._readString().match(c$z._attrReg),c$l=c$z._getVertexDeclaration(c$k),c$m=c$Ob.create(c$l,4*c$j.length/c$l.vertexStride,35044,!0);c$m.setData(c$j),c$z._mesh._vertexBuffers.push(c$m)}var c$n=c$g+c$z._readData.getUint32(),c$o=c$z._readData.getUint32(),c$p=new Uint16Array(c$b.slice(c$n,c$n+c$o)),c$q=c$Nb.create("ushort",c$o/2,35044,!0);c$q.setData(c$p),c$z._mesh._indexBuffer=c$q;var c$r=c$z._mesh._boneNames=[],c$s=c$z._readData.getUint16();for(c$r.length=c$s,c$c=0;c$c<c$s;c$c++)c$r[c$c]=c$z._strings[c$z._readData.getUint16()];var c$t=c$z._readData.getUint32(),c$u=c$z._readData.getUint32(),c$v=(new Float32Array(c$b.slice(c$g+c$t,c$g+c$t+c$u)),c$z._readData.getUint32()),c$w=c$z._readData.getUint32(),c$x=new Float32Array(c$b.slice(c$g+c$v,c$g+c$v+c$w));for(c$z._mesh._inverseBindPoses=[],c$c=0,c$a=c$x.length;c$c<c$a;c$c+=16){var c$y=new c$ab(c$x[c$c+0],c$x[c$c+1],c$x[c$c+2],c$x[c$c+3],c$x[c$c+4],c$x[c$c+5],c$x[c$c+6],c$x[c$c+7],c$x[c$c+8],c$x[c$c+9],c$x[c$c+10],c$x[c$c+11],c$x[c$c+12],c$x[c$c+13],c$x[c$c+14],c$x[c$c+15]);c$z._mesh._inverseBindPoses.push(c$y)}return c$z._mesh._skinnedDatas=new Float32Array(16*c$x.length),!0},c$z.READ_SUBMESH=function(){var c$a=c$z._readData.__getBuffer(),c$b=new c$lb(c$z._mesh),c$c=c$z._readData.getInt16(),c$d=c$z._readData.getUint32(),c$g=c$z._readData.getUint32();c$b._vertexBuffer=c$z._mesh._vertexBuffers[c$c],c$b._vertexStart=c$d,c$b._vertexCount=c$g;var c$h=c$z._readData.getUint32(),c$i=c$z._readData.getUint32(),c$j=c$z._mesh._indexBuffer;c$b._indexBuffer=c$j,c$b._indexStart=c$h,c$b._indexCount=c$i,c$b._indices=new Uint16Array(c$j.getData().buffer,2*c$h,c$i);var c$k=c$z._DATA.offset,c$l=c$b._subIndexBufferStart,c$m=c$b._subIndexBufferCount,c$n=c$b._boneIndicesList,c$o=c$z._readData.getUint16();c$l.length=c$o,c$m.length=c$o,c$n.length=c$o;for(var c$p=0;c$p<c$o;c$p++){c$l[c$p]=c$z._readData.getUint32(),c$m[c$p]=c$z._readData.getUint32();var c$q=c$z._readData.getUint32(),c$r=c$z._readData.getUint32();c$b._boneIndicesList[c$p]=new Uint8Array(c$a.slice(c$k+c$q,c$k+c$q+c$r))}return c$z._subMeshes.push(c$b),!0},c$z._getVertexDeclaration=function(c$a){for(var c$b,c$c=!1,c$d=!1,c$g=!1,c$h=!1,c$i=!1,c$j=!1,c$k=!1,c$l=!1,c$m=!1,c$n=0;c$n<c$a.length;c$n++)switch(c$a[c$n]){case"POSITION":c$c=!0;break;case"NORMAL":c$d=!0;break;case"COLOR":c$g=!0;break;case"UV":c$h=!0;break;case"UV1":c$i=!0;break;case"BLENDWEIGHT":c$k=!0;break;case"BLENDINDICES":c$l=!0;break;case"TANGENT":c$j=!0;break;case"BINORMAL":c$m=!0}return c$c&&c$d&&c$g&&c$h&&c$i&&c$k&&c$l&&c$j?c$b=c$va.vertexDeclaration:c$c&&c$d&&c$g&&c$h&&c$i&&c$k&&c$l?c$b=c$ta.vertexDeclaration:c$c&&c$d&&c$h&&c$i&&c$k&&c$l&&c$j?c$b=c$Ja.vertexDeclaration:c$c&&c$d&&c$h&&c$i&&c$k&&c$l?c$b=c$Ha.vertexDeclaration:c$c&&c$d&&c$g&&c$h&&c$k&&c$l&&c$j?c$b=c$Aa.vertexDeclaration:c$c&&c$d&&c$g&&c$h&&c$k&&c$l?c$b=c$ya.vertexDeclaration:c$c&&c$d&&c$h&&c$k&&c$l&&c$j?c$b=c$Oa.vertexDeclaration:c$c&&c$d&&c$h&&c$k&&c$l?c$b=c$Ma.vertexDeclaration:c$c&&c$d&&c$g&&c$k&&c$l&&c$j?c$b=c$oa.vertexDeclaration:c$c&&c$d&&c$g&&c$k&&c$l?c$b=c$ma.vertexDeclaration:c$c&&c$d&&c$g&&c$h&&c$i&&c$j?c$b=c$xa.vertexDeclaration:c$c&&c$d&&c$g&&c$h&&c$i?c$b=c$sa.vertexDeclaration:c$c&&c$d&&c$h&&c$i&&c$j?c$b=c$La.vertexDeclaration:c$c&&c$d&&c$h&&c$i?c$b=c$Ga.vertexDeclaration:c$c&&c$d&&c$g&&c$h&&c$j?c$b=c$Ca.vertexDeclaration:c$c&&c$d&&c$h&&c$j&&c$m?c$b=c$Ra.vertexDeclaration:c$c&&c$d&&c$g&&c$h?c$b=c$ra.vertexDeclaration:c$c&&c$d&&c$h&&c$j?c$b=c$Qa.vertexDeclaration:c$c&&c$d&&c$h?c$b=c$Fa.vertexDeclaration:c$c&&c$d&&c$g&&c$j?c$b=c$qa.vertexDeclaration:c$c&&c$d&&c$g&&(c$b=c$la.vertexDeclaration),c$b},c$z._attrReg=new RegExp("(\\w+)|([:,;])","g"),c$z._strings=[],c$z._readData=null,c$z._version=null,c$z._mesh=null,c$z._materials=null,c$z._subMeshes=null,c$z._materialMap=null,c$n(c$z,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),c$z}(),c$Xa=function(){function c$y(){}return c$p(c$y,"laya.d3.loaders.LoadModelV03"),c$y.parse=function(c$a,c$b,c$c,c$d,c$g){c$y._mesh=c$c,c$y._subMeshes=c$d,c$y._materialMap=c$g,c$y._version=c$b,c$y._readData=c$a,c$y.READ_DATA(),c$y.READ_BLOCK(),c$y.READ_STRINGS();for(var c$h=0,c$i=c$y._BLOCK.count;c$h<c$i;c$h++){c$y._readData.pos=c$y._BLOCK.blockStarts[c$h];var c$j=c$y._readData.getUint16(),c$k=c$y._strings[c$j],c$l=c$y["READ_"+c$k];if(null==c$l)throw new Error("model file err,no this function:"+c$j+" "+c$k);c$l.call()}c$y._strings.length=0,c$y._readData=null,c$y._version=null,c$y._mesh=null,c$y._subMeshes=null,c$y._materialMap=null},c$y._readString=function(){return c$y._strings[c$y._readData.getUint16()]},c$y.READ_DATA=function(){c$y._DATA.offset=c$y._readData.getUint32(),c$y._DATA.size=c$y._readData.getUint32()},c$y.READ_BLOCK=function(){for(var c$a=c$y._BLOCK.count=c$y._readData.getUint16(),c$b=c$y._BLOCK.blockStarts=[],c$c=c$y._BLOCK.blockLengths=[],c$d=0;c$d<c$a;c$d++)c$b.push(c$y._readData.getUint32()),c$c.push(c$y._readData.getUint32())},c$y.READ_STRINGS=function(){var c$a=c$y._readData.getUint32(),c$b=c$y._readData.getUint16(),c$c=c$y._readData.pos;c$y._readData.pos=c$a+c$y._DATA.offset;for(var c$d=0;c$d<c$b;c$d++)c$y._strings[c$d]=c$y._readData.readUTFString();c$y._readData.pos=c$c},c$y.READ_MESH=function(){var c$a,c$b=c$y._readString(),c$c=c$y._readData.__getBuffer(),c$d=0,c$g=c$y._readData.getInt16(),c$h=c$y._DATA.offset;for(c$d=0;c$d<c$g;c$d++){var c$i,c$j=c$h+c$y._readData.getUint32(),c$k=c$y._readData.getUint32(),c$l=new Float32Array(c$c.slice(c$j,c$j+c$k)),c$m=c$y._readString();switch(c$y._version){case"LAYAMODEL:03":c$i=c$y._vertexDeclarationMap_Discard[c$m];break;case"LAYAMODEL:0301":c$i=c$y._vertexDeclarationMap[c$m];break;default:throw new Error("LoadModelV03: unknown version.")}if(!c$i)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+c$y._version+"  bufferAttribute="+c$m+"  name="+c$b+"  url="+(c$y._mesh?c$y._mesh.url:"null"));var c$n=c$Ob.create(c$i,4*c$l.length/c$i.vertexStride,35044,!0,c$y._mesh._url+"_"+c$d);c$n.setData(c$l),c$y._mesh._vertexBuffers.push(c$n)}var c$o=c$h+c$y._readData.getUint32(),c$p=c$y._readData.getUint32(),c$q=new Uint16Array(c$c.slice(c$o,c$o+c$p)),c$r=c$Nb.create("ushort",c$p/2,35044,!0,c$y._mesh._url);c$r.setData(c$q),c$y._mesh._indexBuffer=c$r;var c$s=c$y._mesh._boneNames=[],c$t=c$y._readData.getUint16();for(c$s.length=c$t,c$d=0;c$d<c$t;c$d++)c$s[c$d]=c$y._strings[c$y._readData.getUint16()];c$y._readData.pos+=8;var c$u=c$y._readData.getUint32(),c$v=c$y._readData.getUint32(),c$w=new Float32Array(c$c.slice(c$h+c$u,c$h+c$u+c$v));for(c$y._mesh._inverseBindPoses=[],c$d=0,c$a=c$w.length;c$d<c$a;c$d+=16){var c$x=new c$ab(c$w[c$d+0],c$w[c$d+1],c$w[c$d+2],c$w[c$d+3],c$w[c$d+4],c$w[c$d+5],c$w[c$d+6],c$w[c$d+7],c$w[c$d+8],c$w[c$d+9],c$w[c$d+10],c$w[c$d+11],c$w[c$d+12],c$w[c$d+13],c$w[c$d+14],c$w[c$d+15]);c$y._mesh._inverseBindPoses.push(c$x)}return c$y._mesh._skinnedDatas=new Float32Array(16*c$w.length),!0},c$y.READ_SUBMESH=function(){var c$a=c$y._readData.__getBuffer(),c$b=new c$lb(c$y._mesh),c$c=c$y._readData.getInt16(),c$d=c$y._readData.getUint32(),c$g=c$y._readData.getUint32();c$b._vertexBuffer=c$y._mesh._vertexBuffers[c$c],c$b._vertexStart=c$d,c$b._vertexCount=c$g;var c$h=c$y._readData.getUint32(),c$i=c$y._readData.getUint32(),c$j=c$y._mesh._indexBuffer;c$b._indexBuffer=c$j,c$b._indexStart=c$h,c$b._indexCount=c$i,c$b._indices=new Uint16Array(c$j.getData().buffer,2*c$h,c$i);var c$k=c$y._DATA.offset,c$l=c$b._subIndexBufferStart,c$m=c$b._subIndexBufferCount,c$n=c$b._boneIndicesList,c$o=c$y._readData.getUint16();c$l.length=c$o,c$m.length=c$o,c$n.length=c$o;for(var c$p=0;c$p<c$o;c$p++){c$l[c$p]=c$y._readData.getUint32(),c$m[c$p]=c$y._readData.getUint32();var c$q=c$y._readData.getUint32(),c$r=c$y._readData.getUint32();c$n[c$p]=new Uint8Array(c$a.slice(c$k+c$q,c$k+c$q+c$r))}return c$y._subMeshes.push(c$b),!0},c$y._strings=[],c$y._readData=null,c$y._version=null,c$y._mesh=null,c$y._subMeshes=null,c$y._materialMap=null,c$n(c$y,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":c$va.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":c$ta.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":c$Sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":c$Ja.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":c$Ha.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":c$Aa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":c$ya.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":c$Oa.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":c$Ma.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":c$oa.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":c$ma.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":c$xa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":c$sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":c$La.vertexDeclaration,"POSITION,NORMAL,UV,UV1":c$Ga.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":c$Ca.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":c$Ra.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":c$ra.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":c$Qa.vertexDeclaration,"POSITION,NORMAL,UV":c$Fa.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":c$qa.vertexDeclaration,"POSITION,NORMAL,COLOR":c$la.vertexDeclaration,"POSITION,NORMAL,TANGENT":c$Ea.vertexDeclaration,"POSITION,NORMAL":c$ka.vertexDeclaration,"POSITION,UV":c$Ua.vertexDeclaration,POSITION:c$ja.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":c$ua.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":c$ta.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":c$Sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":c$Ia.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":c$Ha.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":c$za.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":c$ya.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":c$Na.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":c$Ma.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":c$na.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":c$ma.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":c$wa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":c$sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":c$Ka.vertexDeclaration,"POSITION,NORMAL,UV,UV1":c$Ga.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":c$Ba.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":c$Ra.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":c$ra.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":c$Pa.vertexDeclaration,"POSITION,NORMAL,UV":c$Fa.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":c$pa.vertexDeclaration,"POSITION,NORMAL,COLOR":c$la.vertexDeclaration,"POSITION,NORMAL,TANGENT":c$Da.vertexDeclaration,"POSITION,NORMAL":c$ka.vertexDeclaration,"POSITION,UV":c$Ua.vertexDeclaration,POSITION:c$ja.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),c$y}(),c$Ya=function(){function c$j(){}return c$p(c$j,"laya.d3.loaders.MeshReader"),c$j.read=function(c$a,c$b,c$c,c$d,c$g){var c$h=new c$y(c$a);c$h.pos=0;var c$i=c$h.readUTFString();switch(c$i){case"LAYAMODEL:01":case"LAYASKINANI:01":c$j._readVersion01(c$h,c$i,c$b,c$c,c$d,c$g);break;case"LAYAMODEL:02":c$Wa.parse(c$h,c$i,c$b,c$c,c$d,c$g);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":c$Xa.parse(c$h,c$i,c$b,c$d,c$g);break;default:throw new Error("MeshReader: unknown mesh version.")}c$b._setSubMeshes(c$d)},c$j._readVersion01=function(c$a,c$b,c$c,c$d,c$g,c$h){new c$Va(c$a,c$b,c$c,c$d,c$g,c$h)},c$j}(),c$Za=function(){function c$a(c$a,c$b){this.min=null,this.max=null,this.min=c$a,this.max=c$b}c$p(c$a,"laya.d3.math.BoundBox");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.core.IClone":!0}),c$b.getCorners=function(c$a){c$a.length=8;var c$b=this.min.elements,c$c=this.max.elements,c$d=c$b[0],c$g=c$b[1],c$h=c$b[2],c$i=c$c[0],c$j=c$c[1],c$k=c$c[2];c$a[0]=new c$ib(c$d,c$j,c$k),c$a[1]=new c$ib(c$i,c$j,c$k),c$a[2]=new c$ib(c$i,c$g,c$k),c$a[3]=new c$ib(c$d,c$g,c$k),c$a[4]=new c$ib(c$d,c$j,c$h),c$a[5]=new c$ib(c$i,c$j,c$h),c$a[6]=new c$ib(c$i,c$g,c$h),c$a[7]=new c$ib(c$d,c$g,c$h)},c$b.toDefault=function(){this.min.toDefault(),this.max.toDefault()},c$b.cloneTo=function(c$a){var c$b=c$a;this.min.cloneTo(c$b.min),this.max.cloneTo(c$b.max)},c$b.clone=function(){var c$a=new this.constructor(new c$ib,new c$ib);return this.cloneTo(c$a),c$a},c$a.createfromPoints=function(c$a,c$b){if(null==c$a)throw new Error("points");var c$c=c$b.min,c$d=c$b.max,c$g=c$c.elements;c$g[0]=Number.MAX_VALUE,c$g[1]=Number.MAX_VALUE,c$g[2]=Number.MAX_VALUE;var c$h=c$d.elements;c$h[0]=-Number.MAX_VALUE,c$h[1]=-Number.MAX_VALUE,c$h[2]=-Number.MAX_VALUE;for(var c$i=0,c$j=c$a.length;c$i<c$j;++c$i)c$ib.min(c$c,c$a[c$i],c$c),c$ib.max(c$d,c$a[c$i],c$d)},c$a.merge=function(c$a,c$b,c$c){c$ib.min(c$a.min,c$b.min,c$c.min),c$ib.max(c$a.max,c$b.max,c$c.max)},c$a}(),c$$a=function(){function c$l(c$a){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=c$a,this._near=new c$bb(new c$ib),this._far=new c$bb(new c$ib),this._left=new c$bb(new c$ib),this._right=new c$bb(new c$ib),this._top=new c$bb(new c$ib),this._bottom=new c$bb(new c$ib),c$l._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}c$p(c$l,"laya.d3.math.BoundFrustum");var c$a=c$l.prototype;return c$a.equalsBoundFrustum=function(c$a){return this._matrix.equalsOtherMatrix(c$a.matrix)},c$a.equalsObj=function(c$a){if(c$a instanceof laya.d3.math.BoundFrustum){var c$b=c$a;return this.equalsBoundFrustum(c$b)}return!1},c$a.getPlane=function(c$a){switch(c$a){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},c$a.getCorners=function(c$a){c$l._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(c$a[0]),c$l._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(c$a[1]),c$l._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(c$a[2]),c$l._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(c$a[3]),c$l._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(c$a[4]),c$l._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(c$a[5]),c$l._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(c$a[6]),c$l._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(c$a[7])},c$a.containsPoint=function(c$a){for(var c$b=c$bb.PlaneIntersectionType_Front,c$c=c$bb.PlaneIntersectionType_Front,c$d=0;c$d<6;c$d++){switch(c$d){case 0:c$c=Collision.intersectsPlaneAndPoint(this._near,c$a);break;case 1:c$c=Collision.intersectsPlaneAndPoint(this._far,c$a);break;case 2:c$c=Collision.intersectsPlaneAndPoint(this._left,c$a);break;case 3:c$c=Collision.intersectsPlaneAndPoint(this._right,c$a);break;case 4:c$c=Collision.intersectsPlaneAndPoint(this._top,c$a);break;case 5:c$c=Collision.intersectsPlaneAndPoint(this._bottom,c$a)}switch(c$c){case c$bb.PlaneIntersectionType_Back:return 0;case c$bb.PlaneIntersectionType_Intersecting:c$b=c$bb.PlaneIntersectionType_Intersecting}}switch(c$b){case c$bb.PlaneIntersectionType_Intersecting:return 2;default:return 1}},c$a.containsBoundBox=function(c$a){for(var c$b,c$c=c$l._tempV30,c$d=c$l._tempV31,c$g=1,c$h=0;c$h<6;c$h++){if(c$b=this.getPlane(c$h),this._getBoxToPlanePVertexNVertex(c$a,c$b.normal,c$c,c$d),Collision.intersectsPlaneAndPoint(c$b,c$c)===c$bb.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(c$b,c$d)===c$bb.PlaneIntersectionType_Back&&(c$g=2)}return c$g},c$a.containsBoundSphere=function(c$a){for(var c$b=c$bb.PlaneIntersectionType_Front,c$c=c$bb.PlaneIntersectionType_Front,c$d=0;c$d<6;c$d++){switch(c$d){case 0:c$c=Collision.intersectsPlaneAndSphere(this._near,c$a);break;case 1:c$c=Collision.intersectsPlaneAndSphere(this._far,c$a);break;case 2:c$c=Collision.intersectsPlaneAndSphere(this._left,c$a);break;case 3:c$c=Collision.intersectsPlaneAndSphere(this._right,c$a);break;case 4:c$c=Collision.intersectsPlaneAndSphere(this._top,c$a);break;case 5:c$c=Collision.intersectsPlaneAndSphere(this._bottom,c$a)}switch(c$c){case c$bb.PlaneIntersectionType_Back:return 0;case c$bb.PlaneIntersectionType_Intersecting:c$b=c$bb.PlaneIntersectionType_Intersecting}}switch(c$b){case c$bb.PlaneIntersectionType_Intersecting:return 2;default:return 1}},c$a._getBoxToPlanePVertexNVertex=function(c$a,c$b,c$c,c$d){var c$g=c$a.min,c$h=c$g.elements,c$i=c$a.max,c$j=c$i.elements,c$k=c$b.elements,c$l=c$k[0],c$m=c$k[1],c$n=c$k[2];c$g.cloneTo(c$c);var c$o=c$c.elements;0<=c$l&&(c$o[0]=c$j[0]),0<=c$m&&(c$o[1]=c$j[1]),0<=c$n&&(c$o[2]=c$j[2]),c$i.cloneTo(c$d);var c$p=c$d.elements;0<=c$l&&(c$p[0]=c$h[0]),0<=c$m&&(c$p[1]=c$h[1]),0<=c$n&&(c$p[2]=c$h[2])},c$q(0,c$a,"top",function(){return this._top}),c$q(0,c$a,"matrix",function(){return this._matrix},function(c$a){this._matrix=c$a,c$l._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),c$q(0,c$a,"near",function(){return this._near}),c$q(0,c$a,"far",function(){return this._far}),c$q(0,c$a,"left",function(){return this._left}),c$q(0,c$a,"right",function(){return this._right}),c$q(0,c$a,"bottom",function(){return this._bottom}),c$l._getPlanesFromMatrix=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){var c$j=c$a.elements,c$k=c$j[0],c$l=c$j[1],c$m=c$j[2],c$n=c$j[3],c$o=c$j[4],c$p=c$j[5],c$q=c$j[6],c$r=c$j[7],c$s=c$j[8],c$t=c$j[9],c$u=c$j[10],c$v=c$j[11],c$w=c$j[12],c$x=c$j[13],c$y=c$j[14],c$z=c$j[15],c$A=c$b.normal.elements;c$A[0]=c$n+c$m,c$A[1]=c$r+c$q,c$A[2]=c$v+c$u,c$b.distance=c$z+c$y,c$b.normalize();var c$B=c$c.normal.elements;c$B[0]=c$n-c$m,c$B[1]=c$r-c$q,c$B[2]=c$v-c$u,c$c.distance=c$z-c$y,c$c.normalize();var c$C=c$d.normal.elements;c$C[0]=c$n+c$k,c$C[1]=c$r+c$o,c$C[2]=c$v+c$s,c$d.distance=c$z+c$w,c$d.normalize();var c$D=c$g.normal.elements;c$D[0]=c$n-c$k,c$D[1]=c$r-c$o,c$D[2]=c$v-c$s,c$g.distance=c$z-c$w,c$g.normalize();var c$E=c$h.normal.elements;c$E[0]=c$n-c$l,c$E[1]=c$r-c$p,c$E[2]=c$v-c$t,c$h.distance=c$z-c$x,c$h.normalize();var c$F=c$i.normal.elements;c$F[0]=c$n+c$l,c$F[1]=c$r+c$p,c$F[2]=c$v+c$t,c$i.distance=c$z+c$x,c$i.normalize()},c$l._get3PlaneInterPoint=function(c$a,c$b,c$c){var c$d=c$a.normal,c$g=c$b.normal,c$h=c$c.normal;c$ib.cross(c$g,c$h,c$l._tempV30),c$ib.cross(c$h,c$d,c$l._tempV31),c$ib.cross(c$d,c$g,c$l._tempV32);var c$i=c$ib.dot(c$d,c$l._tempV30),c$j=c$ib.dot(c$g,c$l._tempV31),c$k=c$ib.dot(c$h,c$l._tempV32);return c$ib.scale(c$l._tempV30,-c$a.distance/c$i,c$l._tempV33),c$ib.scale(c$l._tempV31,-c$b.distance/c$j,c$l._tempV34),c$ib.scale(c$l._tempV32,-c$c.distance/c$k,c$l._tempV35),c$ib.add(c$l._tempV33,c$l._tempV34,c$l._tempV36),c$ib.add(c$l._tempV35,c$l._tempV36,c$l._tempV37),c$l._tempV37},c$n(c$l,["_tempV30",function(){return this._tempV30=new c$ib},"_tempV31",function(){return this._tempV31=new c$ib},"_tempV32",function(){return this._tempV32=new c$ib},"_tempV33",function(){return this._tempV33=new c$ib},"_tempV34",function(){return this._tempV34=new c$ib},"_tempV35",function(){return this._tempV35=new c$ib},"_tempV36",function(){return this._tempV36=new c$ib},"_tempV37",function(){return this._tempV37=new c$ib}]),c$l}(),c$_a=function(){function c$m(c$a,c$b){this.center=null,this.radius=NaN,this.center=c$a,this.radius=c$b}c$p(c$m,"laya.d3.math.BoundSphere");var c$a=c$m.prototype;return c$x.imps(c$a,{"laya.d3.core.IClone":!0}),c$a.toDefault=function(){this.center.toDefault(),this.radius=0},c$a.intersectsRayDistance=function(c$a){return Collision.intersectsRayAndSphereRD(c$a,this)},c$a.intersectsRayPoint=function(c$a,c$b){return Collision.intersectsRayAndSphereRP(c$a,this,c$b)},c$a.cloneTo=function(c$a){var c$b=c$a;this.center.cloneTo(c$b.center),c$b.radius=this.radius},c$a.clone=function(){var c$a=new this.constructor(new c$ib,new c$ib);return this.cloneTo(c$a),c$a},c$m.createFromSubPoints=function(c$a,c$b,c$c,c$d){if(null==c$a)throw new Error("points");if(c$b<0||c$b>=c$a.length)throw new Error("start"+c$b+"Must be in the range [0, "+(c$a.length-1)+"]");if(c$c<0||c$b+c$c>c$a.length)throw new Error("count"+c$c+"Must be in the range <= "+c$a.length+"}");var c$g=c$b+c$c,c$h=c$m._tempVector3;c$h.elements[0]=0,c$h.elements[1]=0,c$h.elements[2]=0;for(var c$i=c$b;c$i<c$g;++c$i)c$ib.add(c$a[c$i],c$h,c$h);var c$j=c$d.center;c$ib.scale(c$h,1/c$c,c$j);var c$k=0;for(c$i=c$b;c$i<c$g;++c$i){var c$l=c$ib.distanceSquared(c$j,c$a[c$i]);c$k<c$l&&(c$k=c$l)}c$d.radius=Math.sqrt(c$k)},c$m.createfromPoints=function(c$a,c$b){if(null==c$a)throw new Error("points");c$m.createFromSubPoints(c$a,0,c$a.length,c$b)},c$n(c$m,["_tempVector3",function(){return this._tempVector3=new c$ib}]),c$m}(),c$ea=(function(){function c$a(){}c$p(c$a,"laya.d3.math.ContainmentType"),c$a.Disjoint=0,c$a.Contains=1,c$a.Intersects=2}(),function(){function c$c(){}return c$p(c$c,"laya.d3.math.MathUtils3D"),c$c.isZero=function(c$a){return Math.abs(c$a)<c$c.zeroTolerance},c$c.nearEqual=function(c$a,c$b){return!!c$c.isZero(c$a-c$b)},c$c.fastInvSqrt=function(c$a){return c$c.isZero(c$a)?c$a:1/Math.sqrt(c$a)},c$n(c$c,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),c$c}()),c$fa=function(){function c$k(){var c$a=this.elements=new Float32Array(9);c$a[0]=1,c$a[1]=0,c$a[2]=0,c$a[3]=0,c$a[4]=1,c$a[5]=0,c$a[6]=0,c$a[7]=0,c$a[8]=1}c$p(c$k,"laya.d3.math.Matrix3x3");var c$a=c$k.prototype;return c$x.imps(c$a,{"laya.d3.core.IClone":!0}),c$a.determinant=function(){var c$a=this.elements,c$b=c$a[0],c$c=c$a[1],c$d=c$a[2],c$g=c$a[3],c$h=c$a[4],c$i=c$a[5],c$j=c$a[6],c$k=c$a[7],c$l=c$a[8];return c$b*(c$l*c$h-c$i*c$k)+c$c*(-c$l*c$g+c$i*c$j)+c$d*(c$k*c$g-c$h*c$j)},c$a.translate=function(c$a,c$b){var c$c=c$b.elements,c$d=this.elements,c$g=c$a.elements,c$h=c$d[0],c$i=c$d[1],c$j=c$d[2],c$k=c$d[3],c$l=c$d[4],c$m=c$d[5],c$n=c$d[6],c$o=c$d[7],c$p=c$d[8],c$q=c$g[0],c$r=c$g[1];c$c[0]=c$h,c$c[1]=c$i,c$c[2]=c$j,c$c[3]=c$k,c$c[4]=c$l,c$c[5]=c$m,c$c[6]=c$q*c$h+c$r*c$k+c$n,c$c[7]=c$q*c$i+c$r*c$l+c$o,c$c[8]=c$q*c$j+c$r*c$m+c$p},c$a.rotate=function(c$a,c$b){var c$c=c$b.elements,c$d=this.elements,c$g=c$d[0],c$h=c$d[1],c$i=c$d[2],c$j=c$d[3],c$k=c$d[4],c$l=c$d[5],c$m=c$d[6],c$n=c$d[7],c$o=c$d[8],c$p=Math.sin(c$a),c$q=Math.cos(c$a);c$c[0]=c$q*c$g+c$p*c$j,c$c[1]=c$q*c$h+c$p*c$k,c$c[2]=c$q*c$i+c$p*c$l,c$c[3]=c$q*c$j-c$p*c$g,c$c[4]=c$q*c$k-c$p*c$h,c$c[5]=c$q*c$l-c$p*c$i,c$c[6]=c$m,c$c[7]=c$n,c$c[8]=c$o},c$a.scale=function(c$a,c$b){var c$c=c$b.elements,c$d=this.elements,c$g=c$a.elements,c$h=c$g[0],c$i=c$g[1];c$c[0]=c$h*c$d[0],c$c[1]=c$h*c$d[1],c$c[2]=c$h*c$d[2],c$c[3]=c$i*c$d[3],c$c[4]=c$i*c$d[4],c$c[5]=c$i*c$d[5],c$c[6]=c$d[6],c$c[7]=c$d[7],c$c[8]=c$d[8]},c$a.invert=function(c$a){var c$b=c$a.elements,c$c=this.elements,c$d=c$c[0],c$g=c$c[1],c$h=c$c[2],c$i=c$c[3],c$j=c$c[4],c$k=c$c[5],c$l=c$c[6],c$m=c$c[7],c$n=c$c[8],c$o=c$n*c$j-c$k*c$m,c$p=-c$n*c$i+c$k*c$l,c$q=c$m*c$i-c$j*c$l,c$r=c$d*c$o+c$g*c$p+c$h*c$q;c$r||(c$a=null),c$r=1/c$r,c$b[0]=c$o*c$r,c$b[1]=(-c$n*c$g+c$h*c$m)*c$r,c$b[2]=(c$k*c$g-c$h*c$j)*c$r,c$b[3]=c$p*c$r,c$b[4]=(c$n*c$d-c$h*c$l)*c$r,c$b[5]=(-c$k*c$d+c$h*c$i)*c$r,c$b[6]=c$q*c$r,c$b[7]=(-c$m*c$d+c$g*c$l)*c$r,c$b[8]=(c$j*c$d-c$g*c$i)*c$r},c$a.transpose=function(c$a){var c$b=c$a.elements,c$c=this.elements;if(c$a===this){var c$d=c$c[1],c$g=c$c[2],c$h=c$c[5];c$b[1]=c$c[3],c$b[2]=c$c[6],c$b[3]=c$d,c$b[5]=c$c[7],c$b[6]=c$g,c$b[7]=c$h}else c$b[0]=c$c[0],c$b[1]=c$c[3],c$b[2]=c$c[6],c$b[3]=c$c[1],c$b[4]=c$c[4],c$b[5]=c$c[7],c$b[6]=c$c[2],c$b[7]=c$c[5],c$b[8]=c$c[8]},c$a.identity=function(){var c$a=this.elements;c$a[0]=1,c$a[1]=0,c$a[2]=0,c$a[3]=0,c$a[4]=1,c$a[5]=0,c$a[6]=0,c$a[7]=0,c$a[8]=1},c$a.cloneTo=function(c$a){var c$b,c$c,c$d;if((c$c=this.elements)!==(c$d=c$a.elements))for(c$b=0;c$b<9;++c$b)c$d[c$b]=c$c[c$b]},c$a.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$k.createFromTranslation=function(c$a,c$b){c$b.elements;var c$c=c$a.elements;c$b[0]=1,c$b[1]=0,c$b[2]=0,c$b[3]=0,c$b[4]=1,c$b[5]=0,c$b[6]=c$c[0],c$b[7]=c$c[1],c$b[8]=1},c$k.createFromRotation=function(c$a,c$b){var c$c=c$b.elements,c$d=Math.sin(c$a),c$g=Math.cos(c$a);c$c[0]=c$g,c$c[1]=c$d,c$c[2]=0,c$c[3]=-c$d,c$c[4]=c$g,c$c[5]=0,c$c[6]=0,c$c[7]=0,c$c[8]=1},c$k.createFromScaling=function(c$a,c$b){var c$c=c$b.elements,c$d=c$a.elements;c$c[0]=c$d[0],c$c[1]=0,c$c[2]=0,c$c[3]=0,c$c[4]=c$d[1],c$c[5]=0,c$c[6]=0,c$c[7]=0,c$c[8]=1},c$k.createFromMatrix4x4=function(c$a,c$b){c$b[0]=c$a[0],c$b[1]=c$a[1],c$b[2]=c$a[2],c$b[3]=c$a[4],c$b[4]=c$a[5],c$b[5]=c$a[6],c$b[6]=c$a[8],c$b[7]=c$a[9],c$b[8]=c$a[10]},c$k.multiply=function(c$a,c$b,c$c){var c$d=c$c.elements,c$g=c$a.elements,c$h=c$b.elements,c$i=c$g[0],c$j=c$g[1],c$k=c$g[2],c$l=c$g[3],c$m=c$g[4],c$n=c$g[5],c$o=c$g[6],c$p=c$g[7],c$q=c$g[8],c$r=c$h[0],c$s=c$h[1],c$t=c$h[2],c$u=c$h[3],c$v=c$h[4],c$w=c$h[5],c$x=c$h[6],c$y=c$h[7],c$z=c$h[8];c$d[0]=c$r*c$i+c$s*c$l+c$t*c$o,c$d[1]=c$r*c$j+c$s*c$m+c$t*c$p,c$d[2]=c$r*c$k+c$s*c$n+c$t*c$q,c$d[3]=c$u*c$i+c$v*c$l+c$w*c$o,c$d[4]=c$u*c$j+c$v*c$m+c$w*c$p,c$d[5]=c$u*c$k+c$v*c$n+c$w*c$q,c$d[6]=c$x*c$i+c$y*c$l+c$z*c$o,c$d[7]=c$x*c$j+c$y*c$m+c$z*c$p,c$d[8]=c$x*c$k+c$y*c$n+c$z*c$q},c$k.lookAt=function(c$a,c$b,c$c,c$d){c$ib.subtract(c$a,c$b,c$k._tempV30),c$ib.normalize(c$k._tempV30,c$k._tempV30),c$ib.cross(c$c,c$k._tempV30,c$k._tempV31),c$ib.normalize(c$k._tempV31,c$k._tempV31),c$ib.cross(c$k._tempV30,c$k._tempV31,c$k._tempV32);var c$g=c$k._tempV30.elements,c$h=c$k._tempV31.elements,c$i=c$k._tempV32.elements,c$j=c$d.elements;c$j[0]=c$h[0],c$j[3]=c$h[1],c$j[6]=c$h[2],c$j[1]=c$i[0],c$j[4]=c$i[1],c$j[7]=c$i[2],c$j[2]=c$g[0],c$j[5]=c$g[1],c$j[8]=c$g[2]},c$k.DEFAULT=new c$k,c$n(c$k,["_tempV30",function(){return this._tempV30=new c$ib},"_tempV31",function(){return this._tempV31=new c$ib},"_tempV32",function(){return this._tempV32=new c$ib}]),c$k}(),c$ab=function(){function c$B(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l,c$m,c$n,c$o,c$p,c$q,c$r){void 0===c$a&&(c$a=1),void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0),void 0===c$d&&(c$d=0),void 0===c$g&&(c$g=0),void 0===c$h&&(c$h=1),void 0===c$i&&(c$i=0),void 0===c$j&&(c$j=0),void 0===c$k&&(c$k=0),void 0===c$l&&(c$l=0),void 0===c$m&&(c$m=1),void 0===c$n&&(c$n=0),void 0===c$o&&(c$o=0),void 0===c$p&&(c$p=0),void 0===c$q&&(c$q=0),void 0===c$r&&(c$r=1);var c$s=this.elements=new Float32Array(16);c$s[0]=c$a,c$s[1]=c$b,c$s[2]=c$c,c$s[3]=c$d,c$s[4]=c$g,c$s[5]=c$h,c$s[6]=c$i,c$s[7]=c$j,c$s[8]=c$k,c$s[9]=c$l,c$s[10]=c$m,c$s[11]=c$n,c$s[12]=c$o,c$s[13]=c$p,c$s[14]=c$q,c$s[15]=c$r}c$p(c$B,"laya.d3.math.Matrix4x4");var c$a=c$B.prototype;return c$x.imps(c$a,{"laya.d3.core.IClone":!0}),c$a.getElementByRowColumn=function(c$a,c$b){if(c$a<0||3<c$a)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(c$b<0||3<c$b)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*c$a+c$b]},c$a.setElementByRowColumn=function(c$a,c$b,c$c){if(c$a<0||3<c$a)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(c$b<0||3<c$b)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*c$a+c$b]=c$c},c$a.equalsOtherMatrix=function(c$a){var c$b=this.elements,c$c=c$a.elements;return c$ea.nearEqual(c$b[0],c$c[0])&&c$ea.nearEqual(c$b[1],c$c[1])&&c$ea.nearEqual(c$b[2],c$c[2])&&c$ea.nearEqual(c$b[3],c$c[3])&&c$ea.nearEqual(c$b[4],c$c[4])&&c$ea.nearEqual(c$b[5],c$c[5])&&c$ea.nearEqual(c$b[6],c$c[6])&&c$ea.nearEqual(c$b[7],c$c[7])&&c$ea.nearEqual(c$b[8],c$c[8])&&c$ea.nearEqual(c$b[9],c$c[9])&&c$ea.nearEqual(c$b[10],c$c[10])&&c$ea.nearEqual(c$b[11],c$c[11])&&c$ea.nearEqual(c$b[12],c$c[12])&&c$ea.nearEqual(c$b[13],c$c[13])&&c$ea.nearEqual(c$b[14],c$c[14])&&c$ea.nearEqual(c$b[15],c$c[15])},c$a.decomposeTransRotScale=function(c$a,c$b,c$c){var c$d=c$B._tempMatrix4x4;return this.decomposeTransRotMatScale(c$a,c$d,c$c)?(c$cb.createFromMatrix4x4(c$d,c$b),!0):(c$b.identity(),!1)},c$a.decomposeTransRotMatScale=function(c$a,c$b,c$c){var c$d=this.elements,c$g=c$a.elements,c$h=c$b.elements,c$i=c$c.elements;c$g[0]=c$d[12],c$g[1]=c$d[13],c$g[2]=c$d[14];var c$j=c$d[0],c$k=c$d[1],c$l=c$d[2],c$m=c$d[4],c$n=c$d[5],c$o=c$d[6],c$p=c$d[8],c$q=c$d[9],c$r=c$d[10],c$s=c$i[0]=Math.sqrt(c$j*c$j+c$k*c$k+c$l*c$l),c$t=c$i[1]=Math.sqrt(c$m*c$m+c$n*c$n+c$o*c$o),c$u=c$i[2]=Math.sqrt(c$p*c$p+c$q*c$q+c$r*c$r);if(c$ea.isZero(c$s)||c$ea.isZero(c$t)||c$ea.isZero(c$u))return c$h[1]=c$h[2]=c$h[3]=c$h[4]=c$h[6]=c$h[7]=c$h[8]=c$h[9]=c$h[11]=c$h[12]=c$h[13]=c$h[14]=0,c$h[0]=c$h[5]=c$h[10]=c$h[15]=1,!1;var c$v=c$B._tempVector0,c$w=c$v.elements;c$w[0]=c$p/c$u,c$w[1]=c$q/c$u,c$w[2]=c$r/c$u;var c$x=c$B._tempVector1,c$y=c$x.elements;c$y[0]=c$j/c$s,c$y[1]=c$k/c$s,c$y[2]=c$l/c$s;var c$z=c$B._tempVector2;c$ib.cross(c$v,c$x,c$z);var c$A=c$B._tempVector1;return c$ib.cross(c$z,c$v,c$A),c$h[3]=c$h[7]=c$h[11]=c$h[12]=c$h[13]=c$h[14]=0,c$h[15]=1,c$h[0]=c$A.x,c$h[1]=c$A.y,c$h[2]=c$A.z,c$h[4]=c$z.x,c$h[5]=c$z.y,c$h[6]=c$z.z,c$h[8]=c$v.x,c$h[9]=c$v.y,c$h[10]=c$v.z,c$h[0]*c$j+c$h[1]*c$k+c$h[2]*c$l<0&&(c$i[0]=-c$s),c$h[4]*c$m+c$h[5]*c$n+c$h[6]*c$o<0&&(c$i[1]=-c$t),c$h[8]*c$p+c$h[9]*c$q+c$h[10]*c$r<0&&(c$i[2]=-c$u),!0},c$a.decomposeYawPitchRoll=function(c$a){var c$b=c$a.elements,c$c=Math.asin(-this.elements[9]);c$b[1]=c$c,Math.cos(c$c)>c$ea.zeroTolerance?(c$b[2]=Math.atan2(this.elements[1],this.elements[5]),c$b[0]=Math.atan2(this.elements[8],this.elements[10])):(c$b[2]=Math.atan2(-this.elements[4],this.elements[0]),c$b[0]=0)},c$a.normalize=function(){var c$a=this.elements,c$b=c$a[0],c$c=c$a[1],c$d=c$a[2],c$g=Math.sqrt(c$b*c$b+c$c*c$c+c$d*c$d);if(!c$g)return c$a[0]=0,c$a[1]=0,void(c$a[2]=0);1!=c$g&&(c$g=1/c$g,c$a[0]=c$b*c$g,c$a[1]=c$c*c$g,c$a[2]=c$d*c$g)},c$a.transpose=function(){var c$a,c$b;return c$b=(c$a=this.elements)[1],c$a[1]=c$a[4],c$a[4]=c$b,c$b=c$a[2],c$a[2]=c$a[8],c$a[8]=c$b,c$b=c$a[3],c$a[3]=c$a[12],c$a[12]=c$b,c$b=c$a[6],c$a[6]=c$a[9],c$a[9]=c$b,c$b=c$a[7],c$a[7]=c$a[13],c$a[13]=c$b,c$b=c$a[11],c$a[11]=c$a[14],c$a[14]=c$b,this},c$a.invert=function(c$a){var c$b=this.elements,c$c=c$a.elements,c$d=c$b[0],c$g=c$b[1],c$h=c$b[2],c$i=c$b[3],c$j=c$b[4],c$k=c$b[5],c$l=c$b[6],c$m=c$b[7],c$n=c$b[8],c$o=c$b[9],c$p=c$b[10],c$q=c$b[11],c$r=c$b[12],c$s=c$b[13],c$t=c$b[14],c$u=c$b[15],c$v=c$d*c$k-c$g*c$j,c$w=c$d*c$l-c$h*c$j,c$x=c$d*c$m-c$i*c$j,c$y=c$g*c$l-c$h*c$k,c$z=c$g*c$m-c$i*c$k,c$A=c$h*c$m-c$i*c$l,c$B=c$n*c$s-c$o*c$r,c$C=c$n*c$t-c$p*c$r,c$D=c$n*c$u-c$q*c$r,c$E=c$o*c$t-c$p*c$s,c$F=c$o*c$u-c$q*c$s,c$G=c$p*c$u-c$q*c$t,c$H=c$v*c$G-c$w*c$F+c$x*c$E+c$y*c$D-c$z*c$C+c$A*c$B;0!==Math.abs(c$H)&&(c$H=1/c$H,c$c[0]=(c$k*c$G-c$l*c$F+c$m*c$E)*c$H,c$c[1]=(c$h*c$F-c$g*c$G-c$i*c$E)*c$H,c$c[2]=(c$s*c$A-c$t*c$z+c$u*c$y)*c$H,c$c[3]=(c$p*c$z-c$o*c$A-c$q*c$y)*c$H,c$c[4]=(c$l*c$D-c$j*c$G-c$m*c$C)*c$H,c$c[5]=(c$d*c$G-c$h*c$D+c$i*c$C)*c$H,c$c[6]=(c$t*c$x-c$r*c$A-c$u*c$w)*c$H,c$c[7]=(c$n*c$A-c$p*c$x+c$q*c$w)*c$H,c$c[8]=(c$j*c$F-c$k*c$D+c$m*c$B)*c$H,c$c[9]=(c$g*c$D-c$d*c$F-c$i*c$B)*c$H,c$c[10]=(c$r*c$z-c$s*c$x+c$u*c$v)*c$H,c$c[11]=(c$o*c$x-c$n*c$z-c$q*c$v)*c$H,c$c[12]=(c$k*c$C-c$j*c$E-c$l*c$B)*c$H,c$c[13]=(c$d*c$E-c$g*c$C+c$h*c$B)*c$H,c$c[14]=(c$s*c$w-c$r*c$y-c$t*c$v)*c$H,c$c[15]=(c$n*c$y-c$o*c$w+c$p*c$v)*c$H)},c$a.identity=function(){var c$a=this.elements;c$a[1]=c$a[2]=c$a[3]=c$a[4]=c$a[6]=c$a[7]=c$a[8]=c$a[9]=c$a[11]=c$a[12]=c$a[13]=c$a[14]=0,c$a[0]=c$a[5]=c$a[10]=c$a[15]=1},c$a.cloneTo=function(c$a){var c$b,c$c,c$d;if((c$c=this.elements)!==(c$d=c$a.elements))for(c$b=0;c$b<16;++c$b)c$d[c$b]=c$c[c$b]},c$a.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$a.getTranslationVector=function(c$a){var c$b=this.elements,c$c=c$a.elements;c$c[0]=c$b[12],c$c[1]=c$b[13],c$c[2]=c$b[14]},c$a.setTranslationVector=function(c$a){var c$b=this.elements,c$c=c$a.elements;c$b[12]=c$c[0],c$b[13]=c$c[1],c$b[14]=c$c[2]},c$a.getForward=function(c$a){var c$b=this.elements,c$c=c$a.elements;c$c[0]=-c$b[8],c$c[1]=-c$b[9],c$c[2]=-c$b[10]},c$a.setForward=function(c$a){var c$b=this.elements,c$c=c$a.elements;c$b[8]=-c$c[0],c$b[9]=-c$c[1],c$b[10]=-c$c[2]},c$B.createRotationX=function(c$a,c$b){var c$c=c$b.elements,c$d=Math.sin(c$a),c$g=Math.cos(c$a);c$c[1]=c$c[2]=c$c[3]=c$c[4]=c$c[7]=c$c[8]=c$c[11]=c$c[12]=c$c[13]=c$c[14]=0,c$c[0]=c$c[15]=1,c$c[5]=c$c[10]=c$g,c$c[6]=c$d,c$c[9]=-c$d},c$B.createRotationY=function(c$a,c$b){var c$c=c$b.elements,c$d=Math.sin(c$a),c$g=Math.cos(c$a);c$c[1]=c$c[3]=c$c[4]=c$c[6]=c$c[7]=c$c[9]=c$c[11]=c$c[12]=c$c[13]=c$c[14]=0,c$c[5]=c$c[15]=1,c$c[0]=c$c[10]=c$g,c$c[2]=-c$d,c$c[8]=c$d},c$B.createRotationZ=function(c$a,c$b){var c$c=c$b.elements,c$d=Math.sin(c$a),c$g=Math.cos(c$a);c$c[2]=c$c[3]=c$c[6]=c$c[7]=c$c[8]=c$c[9]=c$c[11]=c$c[12]=c$c[13]=c$c[14]=0,c$c[10]=c$c[15]=1,c$c[0]=c$c[5]=c$g,c$c[1]=c$d,c$c[4]=-c$d},c$B.createRotationYawPitchRoll=function(c$a,c$b,c$c,c$d){c$cb.createFromYawPitchRoll(c$a,c$b,c$c,c$B._tempQuaternion),c$B.createRotationQuaternion(c$B._tempQuaternion,c$d)},c$B.createRotationAxis=function(c$a,c$b,c$c){var c$d=c$a.elements,c$g=c$d[0],c$h=c$d[1],c$i=c$d[2],c$j=Math.cos(c$b),c$k=Math.sin(c$b),c$l=c$g*c$g,c$m=c$h*c$h,c$n=c$i*c$i,c$o=c$g*c$h,c$p=c$g*c$i,c$q=c$h*c$i,c$r=c$c.elements;c$r[3]=c$r[7]=c$r[11]=c$r[12]=c$r[13]=c$r[14]=0,c$r[15]=1,c$r[0]=c$l+c$j*(1-c$l),c$r[1]=c$o-c$j*c$o+c$k*c$i,c$r[2]=c$p-c$j*c$p-c$k*c$h,c$r[4]=c$o-c$j*c$o-c$k*c$i,c$r[5]=c$m+c$j*(1-c$m),c$r[6]=c$q-c$j*c$q+c$k*c$g,c$r[8]=c$p-c$j*c$p+c$k*c$h,c$r[9]=c$q-c$j*c$q-c$k*c$g,c$r[10]=c$n+c$j*(1-c$n)},c$B.createRotationQuaternion=function(c$a,c$b){var c$c=c$a.elements,c$d=c$b.elements,c$g=c$c[0],c$h=c$c[1],c$i=c$c[2],c$j=c$c[3],c$k=c$g*c$g,c$l=c$h*c$h,c$m=c$i*c$i,c$n=c$g*c$h,c$o=c$i*c$j,c$p=c$i*c$g,c$q=c$h*c$j,c$r=c$h*c$i,c$s=c$g*c$j;c$d[3]=c$d[7]=c$d[11]=c$d[12]=c$d[13]=c$d[14]=0,c$d[15]=1,c$d[0]=1-2*(c$l+c$m),c$d[1]=2*(c$n+c$o),c$d[2]=2*(c$p-c$q),c$d[4]=2*(c$n-c$o),c$d[5]=1-2*(c$m+c$k),c$d[6]=2*(c$r+c$s),c$d[8]=2*(c$p+c$q),c$d[9]=2*(c$r-c$s),c$d[10]=1-2*(c$l+c$k)},c$B.createTranslate=function(c$a,c$b){var c$c=c$a.elements,c$d=c$b.elements;c$d[4]=c$d[8]=c$d[1]=c$d[9]=c$d[2]=c$d[6]=c$d[3]=c$d[7]=c$d[11]=0,c$d[0]=c$d[5]=c$d[10]=c$d[15]=1,c$d[12]=c$c[0],c$d[13]=c$c[1],c$d[14]=c$c[2]},c$B.createScaling=function(c$a,c$b){var c$c=c$a.elements,c$d=c$b.elements;c$d[0]=c$c[0],c$d[5]=c$c[1],c$d[10]=c$c[2],c$d[1]=c$d[4]=c$d[8]=c$d[12]=c$d[9]=c$d[13]=c$d[2]=c$d[6]=c$d[14]=c$d[3]=c$d[7]=c$d[11]=0,c$d[15]=1},c$B.multiply=function(c$a,c$b,c$c){var c$d,c$g,c$h,c$i,c$j,c$k,c$l,c$m;for(c$g=c$c.elements,c$h=c$a.elements,c$g===(c$i=c$b.elements)&&(c$i=c$i.slice()),c$d=0;c$d<4;c$d++)c$j=c$h[c$d],c$k=c$h[c$d+4],c$l=c$h[c$d+8],c$m=c$h[c$d+12],c$g[c$d]=c$j*c$i[0]+c$k*c$i[1]+c$l*c$i[2]+c$m*c$i[3],c$g[c$d+4]=c$j*c$i[4]+c$k*c$i[5]+c$l*c$i[6]+c$m*c$i[7],c$g[c$d+8]=c$j*c$i[8]+c$k*c$i[9]+c$l*c$i[10]+c$m*c$i[11],c$g[c$d+12]=c$j*c$i[12]+c$k*c$i[13]+c$l*c$i[14]+c$m*c$i[15]},c$B.createFromQuaternion=function(c$a,c$b){var c$c=c$b.elements,c$d=c$a.elements,c$g=c$d[0],c$h=c$d[1],c$i=c$d[2],c$j=c$d[3],c$k=c$g+c$g,c$l=c$h+c$h,c$m=c$i+c$i,c$n=c$g*c$k,c$o=c$h*c$k,c$p=c$h*c$l,c$q=c$i*c$k,c$r=c$i*c$l,c$s=c$i*c$m,c$t=c$j*c$k,c$u=c$j*c$l,c$v=c$j*c$m;c$c[0]=1-c$p-c$s,c$c[1]=c$o+c$v,c$c[2]=c$q-c$u,c$c[3]=0,c$c[4]=c$o-c$v,c$c[5]=1-c$n-c$s,c$c[6]=c$r+c$t,c$c[7]=0,c$c[8]=c$q+c$u,c$c[9]=c$r-c$t,c$c[10]=1-c$n-c$p,c$c[11]=0,c$c[12]=0,c$c[13]=0,c$c[14]=0,c$c[15]=1},c$B.createAffineTransformation=function(c$a,c$b,c$c,c$d){var c$g=c$a.elements,c$h=c$b.elements,c$i=c$c.elements,c$j=c$d.elements,c$k=c$h[0],c$l=c$h[1],c$m=c$h[2],c$n=c$h[3],c$o=c$k+c$k,c$p=c$l+c$l,c$q=c$m+c$m,c$r=c$k*c$o,c$s=c$k*c$p,c$t=c$k*c$q,c$u=c$l*c$p,c$v=c$l*c$q,c$w=c$m*c$q,c$x=c$n*c$o,c$y=c$n*c$p,c$z=c$n*c$q,c$A=c$i[0],c$B=c$i[1],c$C=c$i[2];c$j[0]=(1-(c$u+c$w))*c$A,c$j[1]=(c$s+c$z)*c$A,c$j[2]=(c$t-c$y)*c$A,c$j[3]=0,c$j[4]=(c$s-c$z)*c$B,c$j[5]=(1-(c$r+c$w))*c$B,c$j[6]=(c$v+c$x)*c$B,c$j[7]=0,c$j[8]=(c$t+c$y)*c$C,c$j[9]=(c$v-c$x)*c$C,c$j[10]=(1-(c$r+c$u))*c$C,c$j[11]=0,c$j[12]=c$g[0],c$j[13]=c$g[1],c$j[14]=c$g[2],c$j[15]=1},c$B.createLookAt=function(c$a,c$b,c$c,c$d){var c$g=c$d.elements,c$h=c$B._tempVector0,c$i=c$B._tempVector1,c$j=c$B._tempVector2;c$ib.subtract(c$a,c$b,c$j),c$ib.normalize(c$j,c$j),c$ib.cross(c$c,c$j,c$h),c$ib.normalize(c$h,c$h),c$ib.cross(c$j,c$h,c$i),c$d.identity(),c$g[0]=c$h.x,c$g[4]=c$h.y,c$g[8]=c$h.z,c$g[1]=c$i.x,c$g[5]=c$i.y,c$g[9]=c$i.z,c$g[2]=c$j.x,c$g[6]=c$j.y,c$g[10]=c$j.z,c$g[12]=-c$ib.dot(c$h,c$a),c$g[13]=-c$ib.dot(c$i,c$a),c$g[14]=-c$ib.dot(c$j,c$a)},c$B.createPerspective=function(c$a,c$b,c$c,c$d,c$g){var c$h=c$g.elements,c$i=1/Math.tan(c$a/2),c$j=1/(c$c-c$d);c$h[0]=c$i/c$b,c$h[5]=c$i,c$h[10]=(c$d+c$c)*c$j,c$h[11]=-1,c$h[14]=2*c$d*c$c*c$j,c$h[1]=c$h[2]=c$h[3]=c$h[4]=c$h[6]=c$h[7]=c$h[8]=c$h[9]=c$h[12]=c$h[13]=c$h[15]=0},c$B.createOrthoOffCenterRH=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){var c$j=c$i.elements,c$k=1/(c$a-c$b),c$l=1/(c$c-c$d),c$m=1/(c$g-c$h);c$j[1]=c$j[2]=c$j[3]=c$j[4]=c$j[6]=c$j[7]=c$j[8]=c$j[9]=c$j[11]=0,c$j[15]=1,c$j[0]=-2*c$k,c$j[5]=-2*c$l,c$j[10]=2*c$m,c$j[12]=(c$a+c$b)*c$k,c$j[13]=(c$d+c$c)*c$l,c$j[14]=(c$h+c$g)*c$m},c$B.translation=function(c$a,c$b){var c$c=c$a.elements,c$d=c$b.elements;c$d[0]=c$d[5]=c$d[10]=c$d[15]=1,c$d[12]=c$c[0],c$d[13]=c$c[1],c$d[14]=c$c[2]},c$n(c$B,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new c$B},"_tempVector0",function(){return this._tempVector0=new c$ib},"_tempVector1",function(){return this._tempVector1=new c$ib},"_tempVector2",function(){return this._tempVector2=new c$ib},"_tempQuaternion",function(){return this._tempQuaternion=new c$cb},"DEFAULT",function(){return this.DEFAULT=new c$B},"ZERO",function(){return this.ZERO=new c$B(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),c$B}(),c$bb=(function(){function c$v(c$a,c$b){this.extents=null,this.transformation=null,this.extents=c$a,this.transformation=c$b}c$p(c$v,"laya.d3.math.OrientedBoundBox");var c$a=c$v.prototype;c$a.getCorners=function(c$a){var c$b=c$v._tempV30.elements,c$c=c$v._tempV31.elements,c$d=c$v._tempV32.elements,c$g=this.extents.elements;c$b[0]=c$g[0],c$b[1]=c$b[2]=0,c$c[1]=c$g[1],c$c[0]=c$c[2]=0,c$d[2]=c$g[2],c$d[0]=c$d[1]=0,c$ib.TransformNormal(c$v._tempV30,this.transformation,c$v._tempV30),c$ib.TransformNormal(c$v._tempV31,this.transformation,c$v._tempV31),c$ib.TransformNormal(c$v._tempV32,this.transformation,c$v._tempV32);var c$h=c$v._tempV33;this.transformation.getTranslationVector(c$h),c$a.length=8,c$ib.add(c$h,c$v._tempV30,c$v._tempV34),c$ib.add(c$v._tempV34,c$v._tempV31,c$v._tempV34),c$ib.add(c$v._tempV34,c$v._tempV32,c$a[0]),c$ib.add(c$h,c$v._tempV30,c$v._tempV34),c$ib.add(c$v._tempV34,c$v._tempV31,c$v._tempV34),c$ib.subtract(c$v._tempV34,c$v._tempV32,c$a[1]),c$ib.subtract(c$h,c$v._tempV30,c$v._tempV34),c$ib.add(c$v._tempV34,c$v._tempV31,c$v._tempV34),c$ib.subtract(c$v._tempV34,c$v._tempV32,c$a[2]),c$ib.subtract(c$h,c$v._tempV30,c$v._tempV34),c$ib.add(c$v._tempV34,c$v._tempV31,c$v._tempV34),c$ib.add(c$v._tempV34,c$v._tempV32,c$a[3]),c$ib.add(c$h,c$v._tempV30,c$v._tempV34),c$ib.subtract(c$v._tempV34,c$v._tempV31,c$v._tempV34),c$ib.add(c$v._tempV34,c$v._tempV32,c$a[4]),c$ib.add(c$h,c$v._tempV30,c$v._tempV34),c$ib.subtract(c$v._tempV34,c$v._tempV31,c$v._tempV34),c$ib.subtract(c$v._tempV34,c$v._tempV32,c$a[5]),c$ib.subtract(c$h,c$v._tempV30,c$v._tempV34),c$ib.subtract(c$v._tempV34,c$v._tempV31,c$v._tempV34),c$ib.subtract(c$v._tempV34,c$v._tempV32,c$a[6]),c$ib.subtract(c$h,c$v._tempV30,c$v._tempV34),c$ib.subtract(c$v._tempV34,c$v._tempV31,c$v._tempV34),c$ib.add(c$v._tempV34,c$v._tempV32,c$a[7])},c$a.transform=function(c$a){c$ab.multiply(this.transformation,c$a,this.transformation)},c$a.scale=function(c$a){c$ib.multiply(this.extents,c$a,this.extents)},c$a.translate=function(c$a){this.transformation.getTranslationVector(c$v._tempV30),c$ib.add(c$v._tempV30,c$a,c$v._tempV31),this.transformation.setTranslationVector(c$v._tempV31)},c$a.Size=function(c$a){c$ib.scale(this.extents,2,c$a)},c$a.getSize=function(c$a){var c$b=this.extents.elements;c$v._tempV30.x=c$b[0],c$v._tempV31.y=c$b[1],c$v._tempV32.z=c$b[2],c$ib.TransformNormal(c$v._tempV30,this.transformation,c$v._tempV30),c$ib.TransformNormal(c$v._tempV31,this.transformation,c$v._tempV31),c$ib.TransformNormal(c$v._tempV31,this.transformation,c$v._tempV32);var c$c=c$a.elements;c$c[0]=c$ib.scalarLength(c$v._tempV30),c$c[1]=c$ib.scalarLength(c$v._tempV31),c$c[2]=c$ib.scalarLength(c$v._tempV32)},c$a.getSizeSquared=function(c$a){var c$b=this.extents.elements;c$v._tempV30.x=c$b[0],c$v._tempV31.y=c$b[1],c$v._tempV32.z=c$b[2],c$ib.TransformNormal(c$v._tempV30,this.transformation,c$v._tempV30),c$ib.TransformNormal(c$v._tempV31,this.transformation,c$v._tempV31),c$ib.TransformNormal(c$v._tempV31,this.transformation,c$v._tempV32);var c$c=c$a.elements;c$c[0]=c$ib.scalarLengthSquared(c$v._tempV30),c$c[1]=c$ib.scalarLengthSquared(c$v._tempV31),c$c[2]=c$ib.scalarLengthSquared(c$v._tempV32)},c$a.getCenter=function(c$a){this.transformation.getTranslationVector(c$a)},c$a.containsPoint=function(c$a){var c$b=this.extents.elements,c$c=c$b[0],c$d=c$b[1],c$g=c$b[2];this.transformation.invert(c$v._tempM0),c$ib.transformCoordinate(c$a,c$v._tempM0,c$v._tempV30);var c$h=c$v._tempV30.elements,c$i=Math.abs(c$h[0]),c$j=Math.abs(c$h[1]),c$k=Math.abs(c$h[2]);return c$ea.nearEqual(c$i,c$c)&&c$ea.nearEqual(c$j,c$d)&&c$ea.nearEqual(c$k,c$g)?2:c$i<c$c&&c$j<c$d&&c$k<c$g?1:0},c$a.containsPoints=function(c$a){var c$b=this.extents.elements,c$c=c$b[0],c$d=c$b[1],c$g=c$b[2];this.transformation.invert(c$v._tempM0);for(var c$h=!0,c$i=!1,c$j=0;c$j<c$a.length;c$j++){c$ib.transformCoordinate(c$a[c$j],c$v._tempM0,c$v._tempV30);var c$k=c$v._tempV30.elements,c$l=Math.abs(c$k[0]),c$m=Math.abs(c$k[1]),c$n=Math.abs(c$k[2]);c$ea.nearEqual(c$l,c$c)&&c$ea.nearEqual(c$m,c$d)&&c$ea.nearEqual(c$n,c$g)&&(c$i=!0),c$l<c$c&&c$m<c$d&&c$n<c$g?c$i=!0:c$h=!1}return c$h?1:c$i?2:0},c$a.containsSphere=function(c$a,c$b){void 0===c$b&&(c$b=!1);var c$c=this.extents.elements,c$d=c$c[0],c$g=c$c[1],c$h=c$c[2],c$i=c$a.radius;this.transformation.invert(c$v._tempM0),c$ib.transformCoordinate(c$a.center,c$v._tempM0,c$v._tempV30);var c$j=NaN;if(c$j=c$b?c$i:(c$ib.scale(c$ib.UnitX,c$i,c$v._tempV31),c$ib.TransformNormal(c$v._tempV31,c$v._tempM0,c$v._tempV31),c$ib.scalarLength(c$v._tempV31)),c$ib.scale(this.extents,-1,c$v._tempV32),c$ib.Clamp(c$v._tempV30,c$v._tempV32,this.extents,c$v._tempV33),c$j*c$j<c$ib.distanceSquared(c$v._tempV30,c$v._tempV33))return 0;var c$k=c$v._tempV30.elements,c$l=c$k[0],c$m=c$k[1],c$n=c$k[2],c$o=c$v._tempV32.elements,c$p=c$o[0],c$q=c$o[1],c$r=c$o[2];return c$p+c$j<=c$l&&c$l<=c$d-c$j&&c$j<c$d-c$p&&c$q+c$j<=c$m&&c$m<=c$g-c$j&&c$j<c$g-c$q&&c$r+c$j<=c$n&&c$n<=c$h-c$j&&c$j<c$h-c$r?1:2},c$a.containsOrientedBoundBox=function(c$a){var c$b=0,c$c=0;c$a.getCorners(c$v._corners);var c$d=this.containsPoints(c$v._corners);if(0!=c$d)return c$d;var c$g=this.extents.elements;c$a.extents.cloneTo(c$v._tempV35);var c$h=c$v._tempV35.elements;c$v._getRows(this.transformation,c$v._rows1),c$v._getRows(c$a.transformation,c$v._rows2);var c$i=NaN;for(c$b=0;c$b<4;c$b++)for(c$c=0;c$c<4;c$c++)3==c$b||3==c$c?(c$v._tempM0.setElementByRowColumn(c$b,c$c,0),c$v._tempM1.setElementByRowColumn(c$b,c$c,0)):(c$i=c$ib.dot(c$v._rows1[c$b],c$v._rows2[c$c]),c$v._tempM0.setElementByRowColumn(c$b,c$c,c$i),c$v._tempM1.setElementByRowColumn(c$b,c$c,Math.abs(c$i)));c$a.getCenter(c$v._tempV34),this.getCenter(c$v._tempV36),c$ib.subtract(c$v._tempV34,c$v._tempV36,c$v._tempV30);var c$j=c$v._tempV31.elements;c$j[0]=c$ib.dot(c$v._tempV30,c$v._rows1[0]),c$j[1]=c$ib.dot(c$v._tempV30,c$v._rows1[1]),c$j[2]=c$ib.dot(c$v._tempV30,c$v._rows1[2]);var c$k=c$v._tempV32.elements,c$l=c$v._tempV33.elements;for(c$b=0;c$b<3;c$b++)if(c$k[0]=c$v._tempM1.getElementByRowColumn(c$b,0),c$k[1]=c$v._tempM1.getElementByRowColumn(c$b,1),c$k[2]=c$v._tempM1.getElementByRowColumn(c$b,2),c$g[c$b]+c$ib.dot(c$v._tempV35,c$v._tempV32)<Math.abs(c$j[c$b]))return 0;for(c$c=0;c$c<3;c$c++)if(c$k[0]=c$v._tempM1.getElementByRowColumn(0,c$c),c$k[1]=c$v._tempM1.getElementByRowColumn(1,c$c),c$k[2]=c$v._tempM1.getElementByRowColumn(2,c$c),c$l[0]=c$v._tempM0.getElementByRowColumn(0,c$c),c$l[1]=c$v._tempM0.getElementByRowColumn(1,c$c),c$l[2]=c$v._tempM0.getElementByRowColumn(2,c$c),c$ib.dot(this.extents,c$v._tempV32)+c$h[c$c]<Math.abs(c$ib.dot(c$v._tempV31,c$v._tempV33)))return 0;for(c$b=0;c$b<3;c$b++)for(c$c=0;c$c<3;c$c++){var c$m=(c$b+1)%3,c$n=(c$b+2)%3,c$o=(c$c+1)%3,c$p=(c$c+2)%3;if(c$g[c$m]*c$v._tempM1.getElementByRowColumn(c$n,c$c)+c$g[c$n]*c$v._tempM1.getElementByRowColumn(c$m,c$c)+(c$h[c$o]*c$v._tempM1.getElementByRowColumn(c$b,c$p)+c$h[c$p]*c$v._tempM1.getElementByRowColumn(c$b,c$o))<Math.abs(c$j[c$n]*c$v._tempM0.getElementByRowColumn(c$m,c$c)-c$j[c$m]*c$v._tempM0.getElementByRowColumn(c$n,c$c)))return 0}return 2},c$a.containsLine=function(c$a,c$b){c$v._corners[0]=c$a,c$v._corners[1]=c$b;var c$c=this.containsPoints(c$v._corners);if(0!=c$c)return c$c;var c$d=this.extents.elements,c$g=c$d[0],c$h=c$d[1],c$i=c$d[2];this.transformation.invert(c$v._tempM0),c$ib.transformCoordinate(c$a,c$v._tempM0,c$v._tempV30),c$ib.transformCoordinate(c$b,c$v._tempM0,c$v._tempV31),c$ib.add(c$v._tempV30,c$v._tempV31,c$v._tempV32),c$ib.scale(c$v._tempV32,.5,c$v._tempV32),c$ib.subtract(c$v._tempV30,c$v._tempV32,c$v._tempV33);var c$j=c$v._tempV33.elements,c$k=c$j[0],c$l=c$j[1],c$m=c$j[2],c$n=c$v._tempV34.elements,c$o=c$n[0]=Math.abs(c$j[0]),c$p=c$n[1]=Math.abs(c$j[1]),c$q=c$n[2]=Math.abs(c$j[2]),c$r=c$v._tempV32.elements,c$s=c$r[0],c$t=c$r[1],c$u=c$r[2];return Math.abs(c$s)>c$g+c$o?0:Math.abs(c$t)>c$h+c$p?0:Math.abs(c$u)>c$i+c$q?0:Math.abs(c$t*c$m-c$u*c$l)>c$h*c$q+c$i*c$p?0:Math.abs(c$s*c$m-c$u*c$k)>c$g*c$q+c$i*c$o?0:Math.abs(c$s*c$l-c$t*c$k)>c$g*c$p+c$h*c$o?0:2},c$a.containsBoundBox=function(c$a){var c$b=0,c$c=0,c$d=c$a.min,c$g=c$a.max;c$a.getCorners(c$v._corners);var c$h=this.containsPoints(c$v._corners);if(0!=c$h)return c$h;c$ib.subtract(c$g,c$d,c$v._tempV30),c$ib.scale(c$v._tempV30,.5,c$v._tempV30),c$ib.add(c$d,c$v._tempV30,c$v._tempV30),c$ib.subtract(c$g,c$v._tempV30,c$v._tempV31);var c$i=this.extents.elements,c$j=c$v._tempV31.elements;c$v._getRows(this.transformation,c$v._rows1),this.transformation.invert(c$v._tempM0);for(c$b=0;c$b<3;c$b++)for(c$c=0;c$c<3;c$c++)c$v._tempM1.setElementByRowColumn(c$b,c$c,Math.abs(c$v._tempM0.getElementByRowColumn(c$b,c$c)));this.getCenter(c$v._tempV35),c$ib.subtract(c$v._tempV30,c$v._tempV35,c$v._tempV32);var c$k=c$v._tempV31.elements;c$k[0]=c$ib.dot(c$v._tempV32,c$v._rows1[0]),c$k[1]=c$ib.dot(c$v._tempV32,c$v._rows1[1]),c$k[2]=c$ib.dot(c$v._tempV32,c$v._rows1[2]);var c$l=c$v._tempV33.elements,c$m=c$v._tempV34.elements;for(c$b=0;c$b<3;c$b++)if(c$l[0]=c$v._tempM1.getElementByRowColumn(c$b,0),c$l[1]=c$v._tempM1.getElementByRowColumn(c$b,1),c$l[2]=c$v._tempM1.getElementByRowColumn(c$b,2),c$i[c$b]+c$ib.dot(c$v._tempV31,c$v._tempV33)<Math.abs(c$k[c$b]))return 0;for(c$c=0;c$c<3;c$c++)if(c$l[0]=c$v._tempM1.getElementByRowColumn(0,c$c),c$l[1]=c$v._tempM1.getElementByRowColumn(1,c$c),c$l[2]=c$v._tempM1.getElementByRowColumn(2,c$c),c$m[0]=c$v._tempM0.getElementByRowColumn(0,c$c),c$m[1]=c$v._tempM0.getElementByRowColumn(1,c$c),c$m[2]=c$v._tempM0.getElementByRowColumn(2,c$c),c$ib.dot(this.extents,c$v._tempV33)+c$j[c$c]<Math.abs(c$ib.dot(c$v._tempV31,c$v._tempV34)))return 0;for(c$b=0;c$b<3;c$b++)for(c$c=0;c$c<3;c$c++){var c$n=(c$b+1)%3,c$o=(c$b+2)%3,c$p=(c$c+1)%3,c$q=(c$c+2)%3;if(c$i[c$n]*c$v._tempM1.getElementByRowColumn(c$o,c$c)+c$i[c$o]*c$v._tempM1.getElementByRowColumn(c$n,c$c)+(c$j[c$p]*c$v._tempM1.getElementByRowColumn(c$b,c$q)+c$j[c$q]*c$v._tempM1.getElementByRowColumn(c$b,c$p))<Math.abs(c$k[c$o]*c$v._tempM0.getElementByRowColumn(c$n,c$c)-c$k[c$n]*c$v._tempM0.getElementByRowColumn(c$o,c$c)))return 0}return 2},c$a.intersectsRay=function(c$a,c$b){c$ib.scale(this.extents,-1,c$v._tempV30),this.transformation.invert(c$v._tempM0),c$ib.TransformNormal(c$a.direction,c$v._tempM0,c$v._ray.direction),c$ib.transformCoordinate(c$a.origin,c$v._tempM0,c$v._ray.origin),c$v._boxBound1.min=c$v._tempV30,c$v._boxBound1.max=this.extents;var c$c=Collision.intersectsRayAndBoxRP(c$v._ray,c$v._boxBound1,c$b);return-1!==c$c&&c$ib.transformCoordinate(c$b,this.transformation,c$b),c$c},c$a._getLocalCorners=function(c$a){c$a.length=8;var c$b=this.extents.elements;c$v._tempV30.x=c$b[0],c$v._tempV31.y=c$b[1],c$v._tempV32.z=c$b[2],c$ib.add(c$v._tempV30,c$v._tempV31,c$v._tempV33),c$ib.add(c$v._tempV33,c$v._tempV32,c$a[0]),c$ib.add(c$v._tempV30,c$v._tempV31,c$v._tempV33),c$ib.subtract(c$v._tempV33,c$v._tempV32,c$a[1]),c$ib.subtract(c$v._tempV31,c$v._tempV30,c$v._tempV33),c$ib.subtract(c$v._tempV33,c$v._tempV30,c$a[2]),c$ib.subtract(c$v._tempV31,c$v._tempV30,c$v._tempV33),c$ib.add(c$v._tempV33,c$v._tempV32,c$a[3]),c$ib.subtract(c$v._tempV30,c$v._tempV31,c$v._tempV33),c$ib.add(c$v._tempV33,c$v._tempV32,c$a[4]),c$ib.subtract(c$v._tempV30,c$v._tempV31,c$v._tempV33),c$ib.subtract(c$v._tempV33,c$v._tempV32,c$a[5]),c$ib.scale(c$a[0],-1,c$a[6]),c$ib.subtract(c$v._tempV32,c$v._tempV30,c$v._tempV33),c$ib.subtract(c$v._tempV33,c$v._tempV31,c$a[7])},c$a.equals=function(c$a){return this.extents==c$a.extents&&this.transformation==c$a.transformation},c$a.cloneTo=function(c$a){var c$b=c$a;this.extents.cloneTo(c$b.extents),this.transformation.cloneTo(c$b.transformation)},c$v.createByBoundBox=function(c$a,c$b){var c$c=c$a.min,c$d=c$a.max;c$ib.subtract(c$d,c$c,c$v._tempV30),c$ib.scale(c$v._tempV30,.5,c$v._tempV30),c$ib.add(c$c,c$v._tempV30,c$v._tempV31),c$ib.subtract(c$d,c$v._tempV31,c$v._tempV32),c$ab.translation(c$v._tempV31,c$v._tempM0);var c$g=c$v._tempV32.clone(),c$h=c$v._tempM0.clone();c$b.extents=c$g,c$b.transformation=c$h},c$v.createByMinAndMaxVertex=function(c$a,c$b){return c$ib.subtract(c$b,c$a,c$v._tempV30),c$ib.scale(c$v._tempV30,.5,c$v._tempV30),c$ib.add(c$a,c$v._tempV30,c$v._tempV31),c$ib.subtract(c$b,c$v._tempV31,c$v._tempV32),c$ab.translation(c$v._tempV31,c$v._tempM0),new c$v(c$v._tempV32,c$v._tempM0)},c$v._getRows=function(c$a,c$b){c$b.length=3;var c$c=c$a.elements,c$d=c$b[0].elements;c$d[0]=c$c[0],c$d[1]=c$c[1],c$d[2]=c$c[2];var c$g=c$b[1].elements;c$g[0]=c$c[4],c$g[1]=c$c[5],c$g[2]=c$c[6];var c$h=c$b[2].elements;c$h[0]=c$c[8],c$h[1]=c$c[9],c$h[2]=c$c[10]},c$v.getObbtoObbMatrix4x4=function(c$a,c$b,c$c,c$d){var c$g=c$a.transformation,c$h=c$b.transformation;if(c$c){c$v._getRows(c$g,c$v._rows1),c$v._getRows(c$h,c$v._rows2);for(var c$i=0;c$i<3;c$i++)for(var c$j=0;c$j<3;c$j++)c$d.setElementByRowColumn(c$i,c$j,c$ib.dot(c$v._rows2[c$i],c$v._rows1[c$j]));c$b.getCenter(c$v._tempV30),c$a.getCenter(c$v._tempV31),c$ib.subtract(c$v._tempV30,c$v._tempV31,c$v._tempV32);var c$k=c$d.elements;c$k[12]=c$ib.dot(c$v._tempV32,c$v._rows1[0]),c$k[13]=c$ib.dot(c$v._tempV32,c$v._rows1[1]),c$k[14]=c$ib.dot(c$v._tempV32,c$v._rows1[2]),c$k[15]=1}else c$g.invert(c$v._tempM0),c$ab.multiply(c$h,c$v._tempM0,c$d)},c$v.merge=function(c$a,c$b,c$c){var c$d=c$a.extents,c$g=c$a.transformation;c$v.getObbtoObbMatrix4x4(c$a,c$b,c$c,c$v._tempM0),c$b._getLocalCorners(c$v._corners),c$ib.transformCoordinate(c$v._corners[0],c$v._tempM0,c$v._corners[0]),c$ib.transformCoordinate(c$v._corners[1],c$v._tempM0,c$v._corners[1]),c$ib.transformCoordinate(c$v._corners[2],c$v._tempM0,c$v._corners[2]),c$ib.transformCoordinate(c$v._corners[3],c$v._tempM0,c$v._corners[3]),c$ib.transformCoordinate(c$v._corners[4],c$v._tempM0,c$v._corners[4]),c$ib.transformCoordinate(c$v._corners[5],c$v._tempM0,c$v._corners[5]),c$ib.transformCoordinate(c$v._corners[6],c$v._tempM0,c$v._corners[6]),c$ib.transformCoordinate(c$v._corners[7],c$v._tempM0,c$v._corners[7]),c$ib.scale(c$d,-1,c$v._boxBound1.min),c$d.cloneTo(c$v._boxBound1.max),c$Za.createfromPoints(c$v._corners,c$v._boxBound2),c$Za.merge(c$v._boxBound2,c$v._boxBound1,c$v._boxBound3);var c$h=c$v._boxBound3.min,c$i=c$v._boxBound3.max;c$ib.subtract(c$i,c$h,c$v._tempV30),c$ib.scale(c$v._tempV30,.5,c$v._tempV30),c$ib.add(c$h,c$v._tempV30,c$v._tempV32),c$ib.subtract(c$i,c$v._tempV32,c$d),c$ib.transformCoordinate(c$v._tempV32,c$g,c$v._tempV33)},c$n(c$v,["_tempV30",function(){return this._tempV30=new c$ib},"_tempV31",function(){return this._tempV31=new c$ib},"_tempV32",function(){return this._tempV32=new c$ib},"_tempV33",function(){return this._tempV33=new c$ib},"_tempV34",function(){return this._tempV34=new c$ib},"_tempV35",function(){return this._tempV35=new c$ib},"_tempV36",function(){return this._tempV36=new c$ib},"_tempM0",function(){return this._tempM0=new c$ab},"_tempM1",function(){return this._tempM1=new c$ab},"_corners",function(){return this._corners=[new c$ib,new c$ib,new c$ib,new c$ib,new c$ib,new c$ib,new c$ib,new c$ib]},"_rows1",function(){return this._rows1=[new c$ib,new c$ib,new c$ib]},"_rows2",function(){return this._rows2=[new c$ib,new c$ib,new c$ib]},"_ray",function(){return this._ray=new c$gb(new c$ib,new c$ib)},"_boxBound1",function(){return this._boxBound1=new c$Za(new c$ib,new c$ib)},"_boxBound2",function(){return this._boxBound2=new c$Za(new c$ib,new c$ib)},"_boxBound3",function(){return this._boxBound3=new c$Za(new c$ib,new c$ib)}])}(),function(){function c$x(c$a,c$b){this.normal=null,this.distance=NaN,void 0===c$b&&(c$b=0),this.normal=c$a,this.distance=c$b}return c$p(c$x,"laya.d3.math.Plane"),c$x.prototype.normalize=function(){var c$a=this.normal.elements,c$b=c$a[0],c$c=c$a[1],c$d=c$a[2],c$g=1/Math.sqrt(c$b*c$b+c$c*c$c+c$d*c$d);c$a[0]=c$b*c$g,c$a[1]=c$c*c$g,c$a[2]=c$d*c$g,this.distance*=c$g},c$x.createPlaneBy3P=function(c$a,c$b,c$c){var c$d=c$a.elements,c$g=c$b.elements,c$h=c$c.elements,c$i=c$g[0]-c$d[0],c$j=c$g[1]-c$d[1],c$k=c$g[2]-c$d[2],c$l=c$h[0]-c$d[0],c$m=c$h[1]-c$d[1],c$n=c$h[2]-c$d[2],c$o=c$j*c$n-c$k*c$m,c$p=c$k*c$l-c$i*c$n,c$q=c$i*c$m-c$j*c$l,c$r=1/Math.sqrt(c$o*c$o+c$p*c$p+c$q*c$q),c$s=c$o*c$r,c$t=c$p*c$r,c$u=c$q*c$r,c$v=c$x._TEMPVec3.elements;c$v[0]=c$s,c$v[1]=c$t,c$v[2]=c$u;var c$w=-(c$s*c$d[0]+c$t*c$d[1]+c$u*c$d[2]);return new c$x(c$x._TEMPVec3,c$w)},c$x.PlaneIntersectionType_Back=0,c$x.PlaneIntersectionType_Front=1,c$x.PlaneIntersectionType_Intersecting=2,c$n(c$x,["_TEMPVec3",function(){return this._TEMPVec3=new c$ib}]),c$x}()),c$cb=function(){function c$g(c$a,c$b,c$c,c$d){this.elements=new Float32Array(4),void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0),void 0===c$d&&(c$d=1),this.elements[0]=c$a,this.elements[1]=c$b,this.elements[2]=c$c,this.elements[3]=c$d}c$p(c$g,"laya.d3.math.Quaternion");var c$a=c$g.prototype;return c$x.imps(c$a,{"laya.d3.core.IClone":!0}),c$a.scaling=function(c$a,c$b){var c$c=c$b.elements,c$d=this.elements;c$c[0]=c$d[0]*c$a,c$c[1]=c$d[1]*c$a,c$c[2]=c$d[2]*c$a,c$c[3]=c$d[3]*c$a},c$a.normalize=function(c$a){var c$b=c$a.elements,c$c=this.elements,c$d=c$c[0],c$g=c$c[1],c$h=c$c[2],c$i=c$c[3],c$j=c$d*c$d+c$g*c$g+c$h*c$h+c$i*c$i;0<c$j&&(c$j=1/Math.sqrt(c$j),c$b[0]=c$d*c$j,c$b[1]=c$g*c$j,c$b[2]=c$h*c$j,c$b[3]=c$i*c$j)},c$a.length=function(){var c$a=this.elements,c$b=c$a[0],c$c=c$a[1],c$d=c$a[2],c$g=c$a[3];return Math.sqrt(c$b*c$b+c$c*c$c+c$d*c$d+c$g*c$g)},c$a.rotateX=function(c$a,c$b){var c$c=c$b.elements,c$d=this.elements;c$a*=.5;var c$g=c$d[0],c$h=c$d[1],c$i=c$d[2],c$j=c$d[3],c$k=Math.sin(c$a),c$l=Math.cos(c$a);c$c[0]=c$g*c$l+c$j*c$k,c$c[1]=c$h*c$l+c$i*c$k,c$c[2]=c$i*c$l-c$h*c$k,c$c[3]=c$j*c$l-c$g*c$k},c$a.rotateY=function(c$a,c$b){var c$c=c$b.elements,c$d=this.elements;c$a*=.5;var c$g=c$d[0],c$h=c$d[1],c$i=c$d[2],c$j=c$d[3],c$k=Math.sin(c$a),c$l=Math.cos(c$a);c$c[0]=c$g*c$l-c$i*c$k,c$c[1]=c$h*c$l+c$j*c$k,c$c[2]=c$i*c$l+c$g*c$k,c$c[3]=c$j*c$l-c$h*c$k},c$a.rotateZ=function(c$a,c$b){var c$c=c$b.elements,c$d=this.elements;c$a*=.5;var c$g=c$d[0],c$h=c$d[1],c$i=c$d[2],c$j=c$d[3],c$k=Math.sin(c$a),c$l=Math.cos(c$a);c$c[0]=c$g*c$l+c$h*c$k,c$c[1]=c$h*c$l-c$g*c$k,c$c[2]=c$i*c$l+c$j*c$k,c$c[3]=c$j*c$l-c$i*c$k},c$a.getYawPitchRoll=function(c$a){c$ib.transformQuat(c$ib.ForwardRH,this,c$g.TEMPVector31),c$ib.transformQuat(c$ib.Up,this,c$g.TEMPVector32);var c$b=c$g.TEMPVector32.elements;c$g.angleTo(c$ib.ZERO,c$g.TEMPVector31,c$g.TEMPVector33);var c$c=c$g.TEMPVector33.elements;c$c[0]==Math.PI/2?(c$c[1]=c$g.arcTanAngle(c$b[2],c$b[0]),c$c[2]=0):c$c[0]==-Math.PI/2?(c$c[1]=c$g.arcTanAngle(-c$b[2],-c$b[0]),c$c[2]=0):(c$ab.createRotationY(-c$c[1],c$g.TEMPMatrix0),c$ab.createRotationX(-c$c[0],c$g.TEMPMatrix1),c$ib.transformCoordinate(c$g.TEMPVector32,c$g.TEMPMatrix0,c$g.TEMPVector32),c$ib.transformCoordinate(c$g.TEMPVector32,c$g.TEMPMatrix1,c$g.TEMPVector32),c$c[2]=c$g.arcTanAngle(c$b[1],-c$b[0])),c$c[1]<=-Math.PI&&(c$c[1]=Math.PI),c$c[2]<=-Math.PI&&(c$c[2]=Math.PI),c$c[1]>=Math.PI&&c$c[2]>=Math.PI&&(c$c[1]=0,c$c[2]=0,c$c[0]=Math.PI-c$c[0]);var c$d=c$a.elements;c$d[0]=c$c[1],c$d[1]=c$c[0],c$d[2]=c$c[2]},c$a.invert=function(c$a){var c$b=c$a.elements,c$c=this.elements,c$d=c$c[0],c$g=c$c[1],c$h=c$c[2],c$i=c$c[3],c$j=c$d*c$d+c$g*c$g+c$h*c$h+c$i*c$i,c$k=c$j?1/c$j:0;c$b[0]=-c$d*c$k,c$b[1]=-c$g*c$k,c$b[2]=-c$h*c$k,c$b[3]=c$i*c$k},c$a.identity=function(){var c$a=this.elements;c$a[0]=0,c$a[1]=0,c$a[2]=0,c$a[3]=1},c$a.fromArray=function(c$a,c$b){void 0===c$b&&(c$b=0),this.elements[0]=c$a[c$b+0],this.elements[1]=c$a[c$b+1],this.elements[2]=c$a[c$b+2],this.elements[3]=c$a[c$b+3]},c$a.cloneTo=function(c$a){var c$b,c$c,c$d;if((c$c=this.elements)!==(c$d=c$a.elements))for(c$b=0;c$b<4;++c$b)c$d[c$b]=c$c[c$b]},c$a.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$a.equals=function(c$a){var c$b=this.elements,c$c=c$a.elements;return c$ea.nearEqual(c$b[0],c$c[0])&&c$ea.nearEqual(c$b[1],c$c[1])&&c$ea.nearEqual(c$b[2],c$c[2])&&c$ea.nearEqual(c$b[3],c$c[3])},c$a.lengthSquared=function(){var c$a=this.elements[0],c$b=this.elements[1],c$c=this.elements[2],c$d=this.elements[3];return c$a*c$a+c$b*c$b+c$c*c$c+c$d*c$d},c$q(0,c$a,"x",function(){return this.elements[0]}),c$q(0,c$a,"y",function(){return this.elements[1]}),c$q(0,c$a,"z",function(){return this.elements[2]}),c$q(0,c$a,"w",function(){return this.elements[3]}),c$g.createFromYawPitchRoll=function(c$a,c$b,c$c,c$d){var c$g=.5*c$c,c$h=.5*c$b,c$i=.5*c$a,c$j=Math.sin(c$g),c$k=Math.cos(c$g),c$l=Math.sin(c$h),c$m=Math.cos(c$h),c$n=Math.sin(c$i),c$o=Math.cos(c$i),c$p=c$d.elements;c$p[0]=c$o*c$l*c$k+c$n*c$m*c$j,c$p[1]=c$n*c$m*c$k-c$o*c$l*c$j,c$p[2]=c$o*c$m*c$j-c$n*c$l*c$k,c$p[3]=c$o*c$m*c$k+c$n*c$l*c$j},c$g.multiply=function(c$a,c$b,c$c){var c$d=c$a.elements,c$g=c$b.elements,c$h=c$c.elements,c$i=c$d[0],c$j=c$d[1],c$k=c$d[2],c$l=c$d[3],c$m=c$g[0],c$n=c$g[1],c$o=c$g[2],c$p=c$g[3],c$q=c$j*c$o-c$k*c$n,c$r=c$k*c$m-c$i*c$o,c$s=c$i*c$n-c$j*c$m,c$t=c$i*c$m+c$j*c$n+c$k*c$o;c$h[0]=c$i*c$p+c$m*c$l+c$q,c$h[1]=c$j*c$p+c$n*c$l+c$r,c$h[2]=c$k*c$p+c$o*c$l+c$s,c$h[3]=c$l*c$p-c$t},c$g.arcTanAngle=function(c$a,c$b){return 0==c$a?1==c$b?Math.PI/2:-Math.PI/2:0<c$a?Math.atan(c$b/c$a):c$a<0?0<c$b?Math.atan(c$b/c$a)+Math.PI:Math.atan(c$b/c$a)-Math.PI:0},c$g.angleTo=function(c$a,c$b,c$c){c$ib.subtract(c$b,c$a,c$g.TEMPVector30),c$ib.normalize(c$g.TEMPVector30,c$g.TEMPVector30),c$c.elements[0]=Math.asin(c$g.TEMPVector30.y),c$c.elements[1]=c$g.arcTanAngle(-c$g.TEMPVector30.z,-c$g.TEMPVector30.x)},c$g.createFromAxisAngle=function(c$a,c$b,c$c){var c$d=c$c.elements,c$g=c$a.elements;c$b*=.5;var c$h=Math.sin(c$b);c$d[0]=c$h*c$g[0],c$d[1]=c$h*c$g[1],c$d[2]=c$h*c$g[2],c$d[3]=Math.cos(c$b)},c$g.createFromMatrix3x3=function(c$a,c$b){var c$c,c$d=c$b.elements,c$g=c$a.elements,c$h=c$g[0]+c$g[4]+c$g[8];if(0<c$h)c$c=Math.sqrt(c$h+1),c$d[3]=.5*c$c,c$c=.5/c$c,c$d[0]=(c$g[5]-c$g[7])*c$c,c$d[1]=(c$g[6]-c$g[2])*c$c,c$d[2]=(c$g[1]-c$g[3])*c$c;else{var c$i=0;c$g[4]>c$g[0]&&(c$i=1),c$g[8]>c$g[3*c$i+c$i]&&(c$i=2);var c$j=(c$i+1)%3,c$k=(c$i+2)%3;c$c=Math.sqrt(c$g[3*c$i+c$i]-c$g[3*c$j+c$j]-c$g[3*c$k+c$k]+1),c$d[c$i]=.5*c$c,c$c=.5/c$c,c$d[3]=(c$g[3*c$j+c$k]-c$g[3*c$k+c$j])*c$c,c$d[c$j]=(c$g[3*c$j+c$i]+c$g[3*c$i+c$j])*c$c,c$d[c$k]=(c$g[3*c$k+c$i]+c$g[3*c$i+c$k])*c$c}},c$g.createFromMatrix4x4=function(c$a,c$b){var c$c,c$d,c$g=c$a.elements,c$h=c$b.elements,c$i=c$g[0]+c$g[5]+c$g[10];0<c$i?(c$c=Math.sqrt(c$i+1),c$h[3]=.5*c$c,c$c=.5/c$c,c$h[0]=(c$g[6]-c$g[9])*c$c,c$h[1]=(c$g[8]-c$g[2])*c$c,c$h[2]=(c$g[1]-c$g[4])*c$c):c$g[0]>=c$g[5]&&c$g[0]>=c$g[10]?(c$d=.5/(c$c=Math.sqrt(1+c$g[0]-c$g[5]-c$g[10])),c$h[0]=.5*c$c,c$h[1]=(c$g[1]+c$g[4])*c$d,c$h[2]=(c$g[2]+c$g[8])*c$d,c$h[3]=(c$g[6]-c$g[9])*c$d):c$g[5]>c$g[10]?(c$d=.5/(c$c=Math.sqrt(1+c$g[5]-c$g[0]-c$g[10])),c$h[0]=(c$g[4]+c$g[1])*c$d,c$h[1]=.5*c$c,c$h[2]=(c$g[9]+c$g[6])*c$d,c$h[3]=(c$g[8]-c$g[2])*c$d):(c$d=.5/(c$c=Math.sqrt(1+c$g[10]-c$g[0]-c$g[5])),c$h[0]=(c$g[8]+c$g[2])*c$d,c$h[1]=(c$g[9]+c$g[6])*c$d,c$h[2]=.5*c$c,c$h[3]=(c$g[1]-c$g[4])*c$d)},c$g.slerp=function(c$a,c$b,c$c,c$d){var c$g,c$h,c$i,c$j,c$k,c$l=c$a.elements,c$m=c$b.elements,c$n=c$d.elements,c$o=c$l[0],c$p=c$l[1],c$q=c$l[2],c$r=c$l[3],c$s=c$m[0],c$t=c$m[1],c$u=c$m[2],c$v=c$m[3];return(c$h=c$o*c$s+c$p*c$t+c$q*c$u+c$r*c$v)<0&&(c$h=-c$h,c$s=-c$s,c$t=-c$t,c$u=-c$u,c$v=-c$v),c$k=1e-6<1-c$h?(c$g=Math.acos(c$h),c$i=Math.sin(c$g),c$j=Math.sin((1-c$c)*c$g)/c$i,Math.sin(c$c*c$g)/c$i):(c$j=1-c$c,c$c),c$n[0]=c$j*c$o+c$k*c$s,c$n[1]=c$j*c$p+c$k*c$t,c$n[2]=c$j*c$q+c$k*c$u,c$n[3]=c$j*c$r+c$k*c$v,c$n},c$g.lerp=function(c$a,c$b,c$c,c$d){var c$g=c$d.elements,c$h=c$a.elements,c$i=c$b.elements,c$j=c$h[0],c$k=c$h[1],c$l=c$h[2],c$m=c$h[3];c$g[0]=c$j+c$c*(c$i[0]-c$j),c$g[1]=c$k+c$c*(c$i[1]-c$k),c$g[2]=c$l+c$c*(c$i[2]-c$l),c$g[3]=c$m+c$c*(c$i[3]-c$m)},c$g.add=function(c$a,c$b,c$c){var c$d=c$c.elements,c$g=c$a.elements,c$h=c$b.elements;c$d[0]=c$g[0]+c$h[0],c$d[1]=c$g[1]+c$h[1],c$d[2]=c$g[2]+c$h[2],c$d[3]=c$g[3]+c$h[3]},c$g.dot=function(c$a,c$b){var c$c=c$a.elements,c$d=c$b.elements;return c$c[0]*c$d[0]+c$c[1]*c$d[1]+c$c[2]*c$d[2]+c$c[3]*c$d[3]},c$g.rotationLookAt=function(c$a,c$b,c$c){c$g.lookAt(c$ib.ZERO,c$a,c$b,c$c)},c$g.lookAt=function(c$a,c$b,c$c,c$d){c$fa.lookAt(c$a,c$b,c$c,c$g._tempMatrix3x3),c$g.rotationMatrix(c$g._tempMatrix3x3,c$d)},c$g.invert=function(c$a,c$b){var c$c=c$a.elements,c$d=c$b.elements,c$g=c$a.lengthSquared();c$ea.isZero(c$g)||(c$g=1/c$g,c$d[0]=-c$c[0]*c$g,c$d[1]=-c$c[1]*c$g,c$d[2]=-c$c[2]*c$g,c$d[3]=c$c[3]*c$g)},c$g.rotationMatrix=function(c$a,c$b){var c$c=c$a.elements,c$d=c$c[0],c$g=c$c[1],c$h=c$c[2],c$i=c$c[3],c$j=c$c[4],c$k=c$c[5],c$l=c$c[6],c$m=c$c[7],c$n=c$c[8],c$o=c$b.elements,c$p=NaN,c$q=NaN,c$r=c$d+c$j+c$n;0<c$r?(c$p=Math.sqrt(c$r+1),c$o[3]=.5*c$p,c$p=.5/c$p,c$o[0]=(c$k-c$m)*c$p,c$o[1]=(c$l-c$h)*c$p,c$o[2]=(c$g-c$i)*c$p):c$j<=c$d&&c$n<=c$d?(c$q=.5/(c$p=Math.sqrt(1+c$d-c$j-c$n)),c$o[0]=.5*c$p,c$o[1]=(c$g+c$i)*c$q,c$o[2]=(c$h+c$l)*c$q,c$o[3]=(c$k-c$m)*c$q):c$n<c$j?(c$q=.5/(c$p=Math.sqrt(1+c$j-c$d-c$n)),c$o[0]=(c$i+c$g)*c$q,c$o[1]=.5*c$p,c$o[2]=(c$m+c$k)*c$q,c$o[3]=(c$l-c$h)*c$q):(c$q=.5/(c$p=Math.sqrt(1+c$n-c$d-c$j)),c$o[0]=(c$l+c$h)*c$q,c$o[1]=(c$m+c$k)*c$q,c$o[2]=.5*c$p,c$o[3]=(c$g-c$i)*c$q)},c$g.DEFAULT=new c$g,c$n(c$g,["TEMPVector30",function(){return this.TEMPVector30=new c$ib},"TEMPVector31",function(){return this.TEMPVector31=new c$ib},"TEMPVector32",function(){return this.TEMPVector32=new c$ib},"TEMPVector33",function(){return this.TEMPVector33=new c$ib},"TEMPMatrix0",function(){return this.TEMPMatrix0=new c$ab},"TEMPMatrix1",function(){return this.TEMPMatrix1=new c$ab},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new c$fa},"NAN",function(){return this.NAN=new c$g(NaN,NaN,NaN,NaN)}]),c$g}(),c$db=function(){function c$a(c$a){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=c$a,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}c$p(c$a,"laya.d3.math.Rand");var c$b=c$a.prototype;return c$b.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},c$b.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},c$b.getSignedFloat=function(){return 2*this.getFloat()-1},c$q(0,c$b,"seed",function(){return this.seeds[0]},function(c$a){this.seeds[0]=c$a,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),c$a.getFloatFromInt=function(c$a){return 1/8388607*(8388607&c$a)},c$a.getByteFromInt=function(c$a){return(8388607&c$a)>>>15},c$a}(),c$gb=(function(){function c$g(c$a){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(c$a instanceof Array)||4!==c$a.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|c$a[0],this._state0L=0|c$a[1],this._state1U=0|c$a[2],this._state1L=0|c$a[3]}c$p(c$g,"laya.d3.math.RandX");var c$a=c$g.prototype;c$a.randomint=function(){var c$a=this._state0U,c$b=this._state0L,c$c=this._state1U,c$d=this._state1L,c$g=(c$d>>>0)+(c$b>>>0),c$h=c$c+c$a+(c$g/2>>>31)>>>0,c$i=c$g>>>0,c$j=0,c$k=0;c$j=(c$a^=c$j=c$a<<23|(-512&c$b)>>>9)^(this._state0U=c$c),c$k=(c$b^=c$k=c$b<<23)^(this._state0L=c$d);c$j^=c$a>>>18,c$k^=c$b>>>18|(262143&c$a)<<14;return c$j^=c$c>>>5,c$k^=c$d>>>5|(31&c$c)<<27,this._state1U=c$j,this._state1L=c$k,[c$h,c$i]},c$a.random=function(){var c$a=this.randomint(),c$b=c$a[0],c$c=1023<<20|c$b>>>12,c$d=0|(c$a[1]>>>12|(4095&c$b)<<20);return c$g._CONVERTION_BUFFER.setUint32(0,c$c,!1),c$g._CONVERTION_BUFFER.setUint32(4,c$d,!1),c$db._CONVERTION_BUFFER.getFloat64(0,!1)-1},c$n(c$g,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new c$db([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function c$a(c$a,c$b){this.origin=null,this.direction=null,this.origin=c$a,this.direction=c$b}return c$p(c$a,"laya.d3.math.Ray"),c$a}()),c$hb=function(){function c$a(c$a,c$b){this.elements=new Float32Array(2),void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=0);var c$c=this.elements;c$c[0]=c$a,c$c[1]=c$b}c$p(c$a,"laya.d3.math.Vector2");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.core.IClone":!0}),c$b.fromArray=function(c$a,c$b){void 0===c$b&&(c$b=0),this.elements[0]=c$a[c$b+0],this.elements[1]=c$a[c$b+1]},c$b.cloneTo=function(c$a){var c$b=c$a.elements,c$c=this.elements;c$b[0]=c$c[0],c$b[1]=c$c[1]},c$b.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$q(0,c$b,"x",function(){return this.elements[0]},function(c$a){this.elements[0]=c$a}),c$q(0,c$b,"y",function(){return this.elements[1]},function(c$a){this.elements[1]=c$a}),c$a.scale=function(c$a,c$b,c$c){var c$d=c$c.elements,c$g=c$a.elements;c$d[0]=c$g[0]*c$b,c$d[1]=c$g[1]*c$b},c$n(c$a,["ZERO",function(){return this.ZERO=new c$a(0,0)},"ONE",function(){return this.ONE=new c$a(1,1)}]),c$a}(),c$ib=function(){function c$m(c$a,c$b,c$c){this.elements=new Float32Array(3),void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0);var c$d=this.elements;c$d[0]=c$a,c$d[1]=c$b,c$d[2]=c$c}c$p(c$m,"laya.d3.math.Vector3");var c$a=c$m.prototype;return c$x.imps(c$a,{"laya.d3.core.IClone":!0}),c$a.fromArray=function(c$a,c$b){void 0===c$b&&(c$b=0),this.elements[0]=c$a[c$b+0],this.elements[1]=c$a[c$b+1],this.elements[2]=c$a[c$b+2]},c$a.cloneTo=function(c$a){var c$b=c$a.elements,c$c=this.elements;c$b[0]=c$c[0],c$b[1]=c$c[1],c$b[2]=c$c[2]},c$a.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$a.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},c$a.reset=function(c$a,c$b,c$c){this.elements[0]=c$a,this.elements[1]=c$b,this.elements[2]=c$c},c$q(0,c$a,"x",function(){return this.elements[0]},function(c$a){this.elements[0]=c$a}),c$q(0,c$a,"y",function(){return this.elements[1]},function(c$a){this.elements[1]=c$a}),c$q(0,c$a,"z",function(){return this.elements[2]},function(c$a){this.elements[2]=c$a}),c$m.distanceSquared=function(c$a,c$b){var c$c=c$a.elements,c$d=c$b.elements,c$g=c$c[0]-c$d[0],c$h=c$c[1]-c$d[1],c$i=c$c[2]-c$d[2];return c$g*c$g+c$h*c$h+c$i*c$i},c$m.distance=function(c$a,c$b){var c$c=c$a.elements,c$d=c$b.elements,c$g=c$c[0]-c$d[0],c$h=c$c[1]-c$d[1],c$i=c$c[2]-c$d[2];return Math.sqrt(c$g*c$g+c$h*c$h+c$i*c$i)},c$m.min=function(c$a,c$b,c$c){var c$d=c$c.elements,c$g=c$a.elements,c$h=c$b.elements;c$d[0]=Math.min(c$g[0],c$h[0]),c$d[1]=Math.min(c$g[1],c$h[1]),c$d[2]=Math.min(c$g[2],c$h[2])},c$m.max=function(c$a,c$b,c$c){var c$d=c$c.elements,c$g=c$a.elements,c$h=c$b.elements;c$d[0]=Math.max(c$g[0],c$h[0]),c$d[1]=Math.max(c$g[1],c$h[1]),c$d[2]=Math.max(c$g[2],c$h[2])},c$m.transformQuat=function(c$a,c$b,c$c){var c$d=c$c.elements,c$g=c$a.elements,c$h=c$b.elements,c$i=c$g[0],c$j=c$g[1],c$k=c$g[2],c$l=c$h[0],c$m=c$h[1],c$n=c$h[2],c$o=c$h[3],c$p=c$o*c$i+c$m*c$k-c$n*c$j,c$q=c$o*c$j+c$n*c$i-c$l*c$k,c$r=c$o*c$k+c$l*c$j-c$m*c$i,c$s=-c$l*c$i-c$m*c$j-c$n*c$k;c$d[0]=c$p*c$o+c$s*-c$l+c$q*-c$n-c$r*-c$m,c$d[1]=c$q*c$o+c$s*-c$m+c$r*-c$l-c$p*-c$n,c$d[2]=c$r*c$o+c$s*-c$n+c$p*-c$m-c$q*-c$l},c$m.scalarLength=function(c$a){var c$b=c$a.elements,c$c=c$b[0],c$d=c$b[1],c$g=c$b[2];return Math.sqrt(c$c*c$c+c$d*c$d+c$g*c$g)},c$m.scalarLengthSquared=function(c$a){var c$b=c$a.elements,c$c=c$b[0],c$d=c$b[1],c$g=c$b[2];return c$c*c$c+c$d*c$d+c$g*c$g},c$m.normalize=function(c$a,c$b){var c$c=c$a.elements,c$d=c$b.elements,c$g=c$c[0],c$h=c$c[1],c$i=c$c[2],c$j=c$g*c$g+c$h*c$h+c$i*c$i;0<c$j&&(c$j=1/Math.sqrt(c$j),c$d[0]=c$c[0]*c$j,c$d[1]=c$c[1]*c$j,c$d[2]=c$c[2]*c$j)},c$m.multiply=function(c$a,c$b,c$c){var c$d=c$c.elements,c$g=c$a.elements,c$h=c$b.elements;c$d[0]=c$g[0]*c$h[0],c$d[1]=c$g[1]*c$h[1],c$d[2]=c$g[2]*c$h[2]},c$m.scale=function(c$a,c$b,c$c){var c$d=c$c.elements,c$g=c$a.elements;c$d[0]=c$g[0]*c$b,c$d[1]=c$g[1]*c$b,c$d[2]=c$g[2]*c$b},c$m.lerp=function(c$a,c$b,c$c,c$d){var c$g=c$d.elements,c$h=c$a.elements,c$i=c$b.elements,c$j=c$h[0],c$k=c$h[1],c$l=c$h[2];c$g[0]=c$j+c$c*(c$i[0]-c$j),c$g[1]=c$k+c$c*(c$i[1]-c$k),c$g[2]=c$l+c$c*(c$i[2]-c$l)},c$m.transformV3ToV3=function(c$a,c$b,c$c){var c$d=c$m._tempVector4;c$m.transformV3ToV4(c$a,c$b,c$d);var c$g=c$d.elements,c$h=c$c.elements;c$h[0]=c$g[0],c$h[1]=c$g[1],c$h[2]=c$g[2]},c$m.transformV3ToV4=function(c$a,c$b,c$c){var c$d=c$a.elements,c$g=c$d[0],c$h=c$d[1],c$i=c$d[2],c$j=c$b.elements,c$k=c$c.elements;c$k[0]=c$g*c$j[0]+c$h*c$j[4]+c$i*c$j[8]+c$j[12],c$k[1]=c$g*c$j[1]+c$h*c$j[5]+c$i*c$j[9]+c$j[13],c$k[2]=c$g*c$j[2]+c$h*c$j[6]+c$i*c$j[10]+c$j[14],c$k[3]=c$g*c$j[3]+c$h*c$j[7]+c$i*c$j[11]+c$j[15]},c$m.TransformNormal=function(c$a,c$b,c$c){var c$d=c$a.elements,c$g=c$d[0],c$h=c$d[1],c$i=c$d[2],c$j=c$b.elements,c$k=c$c.elements;c$k[0]=c$g*c$j[0]+c$h*c$j[4]+c$i*c$j[8],c$k[1]=c$g*c$j[1]+c$h*c$j[5]+c$i*c$j[9],c$k[2]=c$g*c$j[2]+c$h*c$j[6]+c$i*c$j[10]},c$m.transformCoordinate=function(c$a,c$b,c$c){var c$d=c$m._tempVector4.elements,c$g=c$a.elements,c$h=c$g[0],c$i=c$g[1],c$j=c$g[2],c$k=c$b.elements;c$d[0]=c$h*c$k[0]+c$i*c$k[4]+c$j*c$k[8]+c$k[12],c$d[1]=c$h*c$k[1]+c$i*c$k[5]+c$j*c$k[9]+c$k[13],c$d[2]=c$h*c$k[2]+c$i*c$k[6]+c$j*c$k[10]+c$k[14],c$d[3]=1/(c$h*c$k[3]+c$i*c$k[7]+c$j*c$k[11]+c$k[15]);var c$l=c$c.elements;c$l[0]=c$d[0]*c$d[3],c$l[1]=c$d[1]*c$d[3],c$l[2]=c$d[2]*c$d[3]},c$m.Clamp=function(c$a,c$b,c$c,c$d){var c$g=c$a.elements,c$h=c$g[0],c$i=c$g[1],c$j=c$g[2],c$k=c$b.elements,c$l=c$k[0],c$m=c$k[1],c$n=c$k[2],c$o=c$c.elements,c$p=c$o[0],c$q=c$o[1],c$r=c$o[2],c$s=c$d.elements;c$h=(c$h=c$p<c$h?c$p:c$h)<c$l?c$l:c$h,c$i=(c$i=c$q<c$i?c$q:c$i)<c$m?c$m:c$i,c$j=(c$j=c$r<c$j?c$r:c$j)<c$n?c$n:c$j,c$s[0]=c$h,c$s[1]=c$i,c$s[2]=c$j},c$m.add=function(c$a,c$b,c$c){var c$d=c$c.elements,c$g=c$a.elements,c$h=c$b.elements;c$d[0]=c$g[0]+c$h[0],c$d[1]=c$g[1]+c$h[1],c$d[2]=c$g[2]+c$h[2]},c$m.subtract=function(c$a,c$b,c$c){var c$d=c$c.elements,c$g=c$a.elements,c$h=c$b.elements;c$d[0]=c$g[0]-c$h[0],c$d[1]=c$g[1]-c$h[1],c$d[2]=c$g[2]-c$h[2]},c$m.cross=function(c$a,c$b,c$c){var c$d=c$a.elements,c$g=c$b.elements,c$h=c$c.elements,c$i=c$d[0],c$j=c$d[1],c$k=c$d[2],c$l=c$g[0],c$m=c$g[1],c$n=c$g[2];c$h[0]=c$j*c$n-c$k*c$m,c$h[1]=c$k*c$l-c$i*c$n,c$h[2]=c$i*c$m-c$j*c$l},c$m.dot=function(c$a,c$b){var c$c=c$a.elements,c$d=c$b.elements;return c$c[0]*c$d[0]+c$c[1]*c$d[1]+c$c[2]*c$d[2]},c$m.equals=function(c$a,c$b){var c$c=c$a.elements,c$d=c$b.elements;return c$ea.nearEqual(Math.abs(c$c[0]),Math.abs(c$d[0]))&&c$ea.nearEqual(Math.abs(c$c[1]),Math.abs(c$d[1]))&&c$ea.nearEqual(Math.abs(c$c[2]),Math.abs(c$d[2]))},c$m.ZERO=new c$m(0,0,0),c$m.ONE=new c$m(1,1,1),c$m.NegativeUnitX=new c$m(-1,0,0),c$m.UnitX=new c$m(1,0,0),c$m.UnitY=new c$m(0,1,0),c$m.UnitZ=new c$m(0,0,1),c$m.ForwardRH=new c$m(0,0,-1),c$m.ForwardLH=new c$m(0,0,1),c$m.Up=new c$m(0,1,0),c$m.NAN=new c$m(NaN,NaN,NaN),c$n(c$m,["_tempVector4",function(){return this._tempVector4=new c$jb}]),c$m}(),c$jb=function(){function c$a(c$a,c$b,c$c,c$d){this.elements=new Float32Array(4),void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0),void 0===c$d&&(c$d=0);var c$g=this.elements;c$g[0]=c$a,c$g[1]=c$b,c$g[2]=c$c,c$g[3]=c$d}c$p(c$a,"laya.d3.math.Vector4");var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.core.IClone":!0}),c$b.fromArray=function(c$a,c$b){void 0===c$b&&(c$b=0),this.elements[0]=c$a[c$b+0],this.elements[1]=c$a[c$b+1],this.elements[2]=c$a[c$b+2],this.elements[3]=c$a[c$b+3]},c$b.cloneTo=function(c$a){var c$b=c$a.elements,c$c=this.elements;c$b[0]=c$c[0],c$b[1]=c$c[1],c$b[2]=c$c[2],c$b[3]=c$c[3]},c$b.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$b.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},c$b.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},c$q(0,c$b,"x",function(){return this.elements[0]},function(c$a){this.elements[0]=c$a}),c$q(0,c$b,"y",function(){return this.elements[1]},function(c$a){this.elements[1]=c$a}),c$q(0,c$b,"z",function(){return this.elements[2]},function(c$a){this.elements[2]=c$a}),c$q(0,c$b,"w",function(){return this.elements[3]},function(c$a){this.elements[3]=c$a}),c$a.lerp=function(c$a,c$b,c$c,c$d){var c$g=c$d.elements,c$h=c$a.elements,c$i=c$b.elements,c$j=c$h[0],c$k=c$h[1],c$l=c$h[2],c$m=c$h[3];c$g[0]=c$j+c$c*(c$i[0]-c$j),c$g[1]=c$k+c$c*(c$i[1]-c$k),c$g[2]=c$l+c$c*(c$i[2]-c$l),c$g[3]=c$m+c$c*(c$i[3]-c$m)},c$a.transformByM4x4=function(c$a,c$b,c$c){var c$d=c$a.elements,c$g=c$d[0],c$h=c$d[1],c$i=c$d[2],c$j=c$d[3],c$k=c$b.elements,c$l=c$c.elements;c$l[0]=c$g*c$k[0]+c$h*c$k[4]+c$i*c$k[8]+c$j*c$k[12],c$l[1]=c$g*c$k[1]+c$h*c$k[5]+c$i*c$k[9]+c$j*c$k[13],c$l[2]=c$g*c$k[2]+c$h*c$k[6]+c$i*c$k[10]+c$j*c$k[14],c$l[3]=c$g*c$k[3]+c$h*c$k[7]+c$i*c$k[11]+c$j*c$k[15]},c$a.equals=function(c$a,c$b){var c$c=c$a.elements,c$d=c$b.elements;return c$ea.nearEqual(Math.abs(c$c[0]),Math.abs(c$d[0]))&&c$ea.nearEqual(Math.abs(c$c[1]),Math.abs(c$d[1]))&&c$ea.nearEqual(Math.abs(c$c[2]),Math.abs(c$d[2]))&&c$ea.nearEqual(Math.abs(c$c[3]),Math.abs(c$d[3]))},c$a.normalize=function(c$a,c$b){var c$c=c$a.elements,c$d=c$b.elements,c$g=c$a.length();0<c$g&&(c$d[0]=c$c[0]*c$g,c$d[1]=c$c[1]*c$g,c$d[2]=c$c[2]*c$g,c$d[3]=c$c[3]*c$g)},c$a.add=function(c$a,c$b,c$c){var c$d=c$c.elements,c$g=c$a.elements,c$h=c$b.elements;c$d[0]=c$g[0]+c$h[0],c$d[1]=c$g[1]+c$h[1],c$d[2]=c$g[2]+c$h[2],c$d[3]=c$g[3]+c$h[3]},c$a.subtract=function(c$a,c$b,c$c){var c$d=c$c.elements,c$g=c$a.elements,c$h=c$b.elements;c$d[0]=c$g[0]-c$h[0],c$d[1]=c$g[1]-c$h[1],c$d[2]=c$g[2]-c$h[2],c$d[3]=c$g[3]-c$h[3]},c$a.multiply=function(c$a,c$b,c$c){var c$d=c$c.elements,c$g=c$a.elements,c$h=c$b.elements;c$d[0]=c$g[0]*c$h[0],c$d[1]=c$g[1]*c$h[1],c$d[2]=c$g[2]*c$h[2],c$d[3]=c$g[3]*c$h[3]},c$a.scale=function(c$a,c$b,c$c){var c$d=c$c.elements,c$g=c$a.elements;c$d[0]=c$g[0]*c$b,c$d[1]=c$g[1]*c$b,c$d[2]=c$g[2]*c$b,c$d[3]=c$g[3]*c$b},c$a.Clamp=function(c$a,c$b,c$c,c$d){var c$g=c$a.elements,c$h=c$g[0],c$i=c$g[1],c$j=c$g[2],c$k=c$g[3],c$l=c$b.elements,c$m=c$l[0],c$n=c$l[1],c$o=c$l[2],c$p=c$l[3],c$q=c$c.elements,c$r=c$q[0],c$s=c$q[1],c$t=c$q[2],c$u=c$q[3],c$v=c$d.elements;c$h=(c$h=c$r<c$h?c$r:c$h)<c$m?c$m:c$h,c$i=(c$i=c$s<c$i?c$s:c$i)<c$n?c$n:c$i,c$j=(c$j=c$t<c$j?c$t:c$j)<c$o?c$o:c$j,c$k=(c$k=c$u<c$k?c$u:c$k)<c$p?c$p:c$k,c$v[0]=c$h,c$v[1]=c$i,c$v[2]=c$j,c$v[3]=c$k},c$a.distanceSquared=function(c$a,c$b){var c$c=c$a.elements,c$d=c$b.elements,c$g=c$c[0]-c$d[0],c$h=c$c[1]-c$d[1],c$i=c$c[2]-c$d[2],c$j=c$c[3]-c$d[3];return c$g*c$g+c$h*c$h+c$i*c$i+c$j*c$j},c$a.distance=function(c$a,c$b){var c$c=c$a.elements,c$d=c$b.elements,c$g=c$c[0]-c$d[0],c$h=c$c[1]-c$d[1],c$i=c$c[2]-c$d[2],c$j=c$c[3]-c$d[3];return Math.sqrt(c$g*c$g+c$h*c$h+c$i*c$i+c$j*c$j)},c$a.dot=function(c$a,c$b){var c$c=c$a.elements,c$d=c$b.elements;return c$c[0]*c$d[0]+c$c[1]*c$d[1]+c$c[2]*c$d[2]+c$c[3]*c$d[3]},c$a.min=function(c$a,c$b,c$c){var c$d=c$c.elements,c$g=c$a.elements,c$h=c$b.elements;c$d[0]=Math.min(c$g[0],c$h[0]),c$d[1]=Math.min(c$g[1],c$h[1]),c$d[2]=Math.min(c$g[2],c$h[2]),c$d[3]=Math.min(c$g[3],c$h[3])},c$a.max=function(c$a,c$b,c$c){var c$d=c$c.elements,c$g=c$a.elements,c$h=c$b.elements;c$d[0]=Math.max(c$g[0],c$h[0]),c$d[1]=Math.max(c$g[1],c$h[1]),c$d[2]=Math.max(c$g[2],c$h[2]),c$d[3]=Math.max(c$g[3],c$h[3])},c$n(c$a,["ZERO",function(){return this.ZERO=new c$a},"ONE",function(){return this.ONE=new c$a(1,1,1,1)},"UnitX",function(){return this.UnitX=new c$a(1,0,0,0)},"UnitY",function(){return this.UnitY=new c$a(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new c$a(0,0,1,0)},"UnitW",function(){return this.UnitW=new c$a(0,0,0,1)}]),c$a}(),c$kb=function(){function c$h(c$a,c$b,c$c,c$d){this.minDepth=0,this.maxDepth=1,this.x=c$a,this.y=c$b,this.width=c$c,this.height=c$d}c$p(c$h,"laya.d3.math.Viewport");var c$a=c$h.prototype;return c$a.project=function(c$a,c$b,c$c){c$ib.transformV3ToV3(c$a,c$b,c$c);var c$d=c$a.elements,c$g=c$b.elements,c$h=c$c.elements,c$i=c$d[0]*c$g[3]+c$d[1]*c$g[7]+c$d[2]*c$g[11]+c$g[15];1!==c$i&&(c$h[0]=c$h[0]/c$i,c$h[1]=c$h[1]/c$i,c$h[2]=c$h[2]/c$i),c$h[0]=.5*(c$h[0]+1)*this.width+this.x,c$h[1]=.5*(1-c$h[1])*this.height+this.y,c$h[2]=c$h[2]*(this.maxDepth-this.minDepth)+this.minDepth},c$a.unprojectFromMat=function(c$a,c$b,c$c){var c$d=c$a.elements,c$g=c$b.elements,c$h=c$c.elements;c$h[0]=(c$d[0]-this.x)/this.width*2-1,c$h[1]=-((c$d[1]-this.y)/this.height*2-1);var c$i=(this.maxDepth-this.minDepth)/2;c$h[2]=(c$d[2]-this.minDepth-c$i)/c$i;var c$j=c$h[0]*c$g[3]+c$h[1]*c$g[7]+c$h[2]*c$g[11]+c$g[15];c$ib.transformV3ToV3(c$c,c$b,c$c),1!==c$j&&(c$h[0]=c$h[0]/c$j,c$h[1]=c$h[1]/c$j,c$h[2]=c$h[2]/c$j)},c$a.unprojectFromWVP=function(c$a,c$b,c$c,c$d,c$g){c$ab.multiply(c$b,c$c,c$h._tempMatrix4x4),c$d&&c$ab.multiply(c$h._tempMatrix4x4,c$d,c$h._tempMatrix4x4),c$h._tempMatrix4x4.invert(c$h._tempMatrix4x4),this.unprojectFromMat(c$a,c$h._tempMatrix4x4,c$g)},c$n(c$h,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new c$ab}]),c$h}(),c$lb=function(){function c$E(c$a){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=c$a,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}c$p(c$E,"laya.d3.resource.models.SubMesh");var c$a=c$E.prototype;return c$x.imps(c$a,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),c$a._getVertexBuffer=function(c$a){return void 0===c$a&&(c$a=0),0===c$a?this._vertexBuffer:null},c$a._getIndexBuffer=function(){return this._indexBuffer},c$a._getStaticBatchBakedVertexs=function(c$a,c$b){var c$c,c$d,c$g=this._vertexBuffer,c$h=c$g.vertexDeclaration,c$i=c$h.getVertexElementByUsage(0).offset/4,c$j=c$h.getVertexElementByUsage(3).offset/4,c$k=c$b.meshRender.lightmapScaleOffset,c$l=0,c$m=0,c$n=0,c$o=0,c$p=0,c$q=0;if(c$k)if(c$d=c$h.getVertexElementByUsage(15))c$n=c$h.vertexStride/4,c$c=0<this._vertexCount?c$g.getData().slice(this._vertexStart*c$n,(this._vertexStart+this._vertexCount)*c$n):c$g.getData().slice(),c$o=c$d.offset/4;else{c$n=(c$q=c$h.vertexStride/4)+2,c$c=this._vertexCount?new Float32Array(this._vertexCount*(c$g.vertexDeclaration.vertexStride/4+2)):new Float32Array(c$g.vertexCount*(c$g.vertexDeclaration.vertexStride/4+2)),c$o=(c$p=c$h.getVertexElementByUsage(2).offset/4)+2;var c$r=c$g.getData();for(c$l=0,c$m=c$r.length/c$q;c$l<c$m;c$l++){var c$s=0;c$s=0<this._vertexCount?(this._vertexStart+c$l)*c$q:c$l*c$q;var c$t=c$l*c$n,c$u=0;for(c$u=0;c$u<c$o;c$u++)c$c[c$t+c$u]=c$r[c$s+c$u];for(c$u=c$o;c$u<c$q;c$u++)c$c[c$t+c$u+2]=c$r[c$s+c$u]}}else c$n=c$h.vertexStride/4,c$c=this._vertexCount?c$g.getData().slice(this._vertexStart*c$n,(this._vertexStart+this._vertexCount)*c$n):c$g.getData().slice();if(c$a){var c$v=c$a.worldMatrix,c$w=c$E._tempMatrix4x40;c$v.invert(c$w);var c$x=c$E._tempMatrix4x41,c$y=c$b.transform.worldMatrix;c$ab.multiply(c$w,c$y,c$x)}else c$x=c$b.transform.worldMatrix;var c$z=c$E._tempQuaternion0;for(c$x.decomposeTransRotScale(c$E._tempVector30,c$z,c$E._tempVector31),c$l=0,c$m=c$c.length/c$n;c$l<c$m;c$l++){var c$A=c$l*c$n+c$i,c$B=c$l*c$n+c$j;if(c$sb.transformVector3ArrayToVector3ArrayCoordinate(c$c,c$A,c$x,c$c,c$A),c$sb.transformVector3ArrayByQuat(c$c,c$B,c$z,c$c,c$B),c$k){var c$C=c$l*c$n+c$o;if(c$d)c$sb.transformLightingMapTexcoordByUV1Array(c$c,c$C,c$k,c$c,c$C);else{var c$D=c$l*c$q+c$p;c$sb.transformLightingMapTexcoordByUV0Array(c$r,c$D,c$k,c$c,c$C)}}}return c$c},c$a._getVertexBuffers=function(){return null},c$a._beforeRender=function(c$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},c$a._render=function(c$a){var c$b,c$c=0,c$d=c$a.renderElement;if(1<this._indexCount){var c$g=this._boneIndicesList.length;if(1<c$g){for(var c$h=0;c$h<c$g;c$h++)(c$b=c$d._skinAnimationDatas||this._skinAnimationDatas)&&(c$d._shaderValue.setValue(0,c$b[c$h]),c$a._shader.uploadRenderElementUniforms(c$d._shaderValue.data)),c$F.mainContext.drawElements(4,this._subIndexBufferCount[c$h],5123,2*this._subIndexBufferStart[c$h]);c$A.drawCall+=c$g}else(c$b=c$d._skinAnimationDatas||this._skinAnimationDatas)&&(c$d._shaderValue.setValue(0,c$b[0]),c$a._shader.uploadRenderElementUniforms(c$d._shaderValue.data)),c$F.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),c$A.drawCall++;c$c=this._indexCount}else c$c=this._indexBuffer.indexCount,(c$b=c$d._skinAnimationDatas||this._skinAnimationDatas)&&(c$d._shaderValue.setValue(0,c$b[0]),c$a._shader.uploadRenderElementUniforms(c$d._shaderValue.data)),c$F.mainContext.drawElements(4,c$c,5123,0),c$A.drawCall++;c$A.trianglesFaces+=c$c/3},c$a.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},c$a.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},c$q(0,c$a,"_vertexBufferCount",function(){return 1}),c$q(0,c$a,"triangleCount",function(){return this._indexBuffer.indexCount/3}),c$n(c$E,["_tempVector30",function(){return this._tempVector30=new c$ib},"_tempVector31",function(){return this._tempVector31=new c$ib},"_tempQuaternion0",function(){return this._tempQuaternion0=new c$cb},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new c$ab},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new c$ab}]),c$E}(),c$mb=function(){function c$a(c$a){this.defineCounter=0,this.defines=null,c$a?(this.defineCounter=c$a.defineCounter,this.defines=c$a.defines.slice()):(this.defineCounter=0,this.defines=[])}return c$p(c$a,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),c$a.prototype.registerDefine=function(c$a){var c$b=Math.pow(2,this.defineCounter++);return this.defines[c$b]=c$a,c$b},c$a}(),c$nb=function(){function c$a(){}return c$p(c$a,"laya.d3.shader.ShaderInit3D"),c$a.__init__=function(){var c$a,c$b;c$Ab._globalRegDefine("HIGHPRECISION",c$Ab.SHADERDEFINE_HIGHPRECISION),c$Ab._globalRegDefine("FOG",c$Ab.SHADERDEFINE_FOG),c$Ab._globalRegDefine("DIRECTIONLIGHT",c$Ab.SHADERDEFINE_DIRECTIONLIGHT),c$Ab._globalRegDefine("POINTLIGHT",c$Ab.SHADERDEFINE_POINTLIGHT),c$Ab._globalRegDefine("SPOTLIGHT",c$Ab.SHADERDEFINE_SPOTLIGHT),c$Ab._globalRegDefine("UV",c$Ab.SHADERDEFINE_UV0),c$Ab._globalRegDefine("COLOR",c$Ab.SHADERDEFINE_COLOR),c$Ab._globalRegDefine("UV1",c$Ab.SHADERDEFINE_UV1),c$Ab._globalRegDefine("CASTSHADOW",c$pb.SHADERDEFINE_CAST_SHADOW),c$Ab._globalRegDefine("SHADOWMAP_PSSM1",c$pb.SHADERDEFINE_SHADOW_PSSM1),c$Ab._globalRegDefine("SHADOWMAP_PSSM2",c$pb.SHADERDEFINE_SHADOW_PSSM2),c$Ab._globalRegDefine("SHADOWMAP_PSSM3",c$pb.SHADERDEFINE_SHADOW_PSSM3),c$Ab._globalRegDefine("SHADOWMAP_PCF_NO",c$pb.SHADERDEFINE_SHADOW_PCF_NO),c$Ab._globalRegDefine("SHADOWMAP_PCF1",c$pb.SHADERDEFINE_SHADOW_PCF1),c$Ab._globalRegDefine("SHADOWMAP_PCF2",c$pb.SHADERDEFINE_SHADOW_PCF2),c$Ab._globalRegDefine("SHADOWMAP_PCF3",c$pb.SHADERDEFINE_SHADOW_PCF3),c$Ab._globalRegDefine("DEPTHFOG",c$Ab.SAHDERDEFINE_DEPTHFOG),c$Lb.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),c$Lb.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),c$a={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},c$b={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var c$c=c$Lb.nameKey.add("SIMPLE");shaderCompile=c$Ab.add(c$c,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',c$a,c$b),c$Mb.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),c$Mb.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),c$Mb.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),c$Mb.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),c$Mb.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),c$Mb.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),c$Mb.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),c$Mb.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),c$Mb.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},c$a}(),c$ob=function(){function c$a(){this._data=null,this._data=[]}c$p(c$a,"laya.d3.shader.ValusArray");var c$b=c$a.prototype;return c$b.setValue=function(c$a,c$b){this._data[c$a]=c$b},c$q(0,c$b,"data",function(){return this._data}),c$a}(),c$pb=function(){function c$a(){}return c$a.SHADERDEFINE_RECEIVE_SHADOW=1,c$a.SHADERDEFINE_CAST_SHADOW=512,c$a.SHADERDEFINE_SHADOW_PSSM1=1024,c$a.SHADERDEFINE_SHADOW_PSSM2=2048,c$a.SHADERDEFINE_SHADOW_PSSM3=4096,c$a.SHADERDEFINE_SHADOW_PCF_NO=8192,c$a.SHADERDEFINE_SHADOW_PCF1=16384,c$a.SHADERDEFINE_SHADOW_PCF2=32768,c$a.SHADERDEFINE_SHADOW_PCF3=65536,c$a.MAX_PSSM_COUNT=3,c$a}(),c$qb=function(){function c$X(){}return c$p(c$X,"laya.d3.utils.Picker"),c$X.calculateCursorRay=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i=c$a.elements[0],c$j=c$a.elements[1],c$k=c$X._tempVector30,c$l=c$k.elements;c$l[0]=c$i,c$l[1]=c$j,c$l[2]=c$b.minDepth;var c$m=c$X._tempVector31,c$n=c$m.elements;c$n[0]=c$i,c$n[1]=c$j,c$n[2]=c$b.maxDepth;var c$o=c$h.origin,c$p=c$X._tempVector32;c$b.unprojectFromWVP(c$k,c$c,c$d,c$g,c$o),c$b.unprojectFromWVP(c$m,c$c,c$d,c$g,c$p);var c$q=c$h.direction.elements;c$q[0]=c$p.x-c$o.x,c$q[1]=c$p.y-c$o.y,c$q[2]=c$p.z-c$o.z,c$ib.normalize(c$h.direction,c$h.direction)},c$X.rayIntersectsPositionsAndIndices=function(c$a,c$b,c$c,c$d,c$g){for(var c$h=c$c.vertexStride/4,c$i=c$c.getVertexElementByUsage(0).offset/4,c$j=Number.MAX_VALUE,c$k=-1,c$l=-1,c$m=-1,c$n=0;c$n<c$d.length;c$n+=3){var c$o=c$X._tempVector35,c$p=c$o.elements,c$q=c$d[c$n]*c$h,c$r=c$q+c$i;c$p[0]=c$b[c$r],c$p[1]=c$b[1+c$r],c$p[2]=c$b[2+c$r];var c$s=c$X._tempVector36,c$t=c$s.elements,c$u=c$d[c$n+1]*c$h,c$v=c$u+c$i;c$t[0]=c$b[c$v],c$t[1]=c$b[1+c$v],c$t[2]=c$b[2+c$v];var c$w=c$X._tempVector37,c$x=c$w.elements,c$y=c$d[c$n+2]*c$h,c$z=c$y+c$i;c$x[0]=c$b[c$z],c$x[1]=c$b[1+c$z],c$x[2]=c$b[2+c$z];var c$A=laya.d3.utils.Picker.rayIntersectsTriangle(c$a,c$o,c$s,c$w);!isNaN(c$A)&&c$A<c$j&&(c$j=c$A,c$k=c$q,c$l=c$u,c$m=c$y)}if(c$j===Number.MAX_VALUE)return c$g.position.toDefault(),c$g.distance=Number.MAX_VALUE,c$g.trianglePositions[0].toDefault(),c$g.trianglePositions[1].toDefault(),c$g.trianglePositions[2].toDefault(),c$g.triangleNormals[0].toDefault(),c$g.triangleNormals[1].toDefault(),c$g.triangleNormals[2].toDefault(),!1;c$g.distance=c$j,c$ib.scale(c$a.direction,c$j,c$g.position),c$ib.add(c$a.origin,c$g.position,c$g.position);var c$B=c$g.trianglePositions,c$C=c$B[0],c$D=c$B[1],c$E=c$B[2],c$F=c$C.elements,c$G=c$D.elements,c$H=c$E.elements,c$I=c$k+c$i;c$F[0]=c$b[c$I],c$F[1]=c$b[c$I+1],c$F[2]=c$b[c$I+2];var c$J=c$l+c$i;c$G[0]=c$b[c$J],c$G[1]=c$b[c$J+1],c$G[2]=c$b[c$J+2];var c$K=c$m+c$i;c$H[0]=c$b[c$K],c$H[1]=c$b[c$K+1],c$H[2]=c$b[c$K+2];var c$L=c$c.getVertexElementByUsage(3);if(c$L){var c$M=c$L.offset/4,c$N=c$g.triangleNormals,c$O=c$N[0],c$P=c$N[1],c$Q=c$N[2],c$R=c$O.elements,c$S=c$P.elements,c$T=c$Q.elements,c$U=c$k+c$M;c$R[0]=c$b[c$U],c$R[1]=c$b[c$U+1],c$R[2]=c$b[c$U+2];var c$V=c$l+c$M;c$S[0]=c$b[c$V],c$S[1]=c$b[c$V+1],c$S[2]=c$b[c$V+2];var c$W=c$m+c$M;c$T[0]=c$b[c$W],c$T[1]=c$b[c$W+1],c$T[2]=c$b[c$W+2]}return!0},c$X.rayIntersectsTriangle=function(c$a,c$b,c$c,c$d){var c$g=c$X._tempVector30,c$h=c$X._tempVector31;c$ib.subtract(c$c,c$b,c$g),c$ib.subtract(c$d,c$b,c$h);var c$i,c$j=c$X._tempVector32;if(c$ib.cross(c$a.direction,c$h,c$j),(c$i=c$ib.dot(c$g,c$j))>-Number.MIN_VALUE&&c$i<Number.MIN_VALUE)return Number.NaN;var c$k,c$l=1/c$i,c$m=c$X._tempVector33;if(c$ib.subtract(c$a.origin,c$b,c$m),c$k=c$ib.dot(c$m,c$j),(c$k*=c$l)<0||1<c$k)return Number.NaN;var c$n,c$o,c$p=c$X._tempVector34;return c$ib.cross(c$m,c$g,c$p),c$n=c$ib.dot(c$a.direction,c$p),(c$n*=c$l)<0||1<c$k+c$n?Number.NaN:(c$o=c$ib.dot(c$h,c$p),(c$o*=c$l)<0?Number.NaN:c$o)},c$n(c$X,["_tempVector30",function(){return this._tempVector30=new c$ib},"_tempVector31",function(){return this._tempVector31=new c$ib},"_tempVector32",function(){return this._tempVector32=new c$ib},"_tempVector33",function(){return this._tempVector33=new c$ib},"_tempVector34",function(){return this._tempVector34=new c$ib},"_tempVector35",function(){return this._tempVector35=new c$ib},"_tempVector36",function(){return this._tempVector36=new c$ib},"_tempVector37",function(){return this._tempVector37=new c$ib}]),c$X}(),c$rb=(function(){function c$a(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new c$ib,new c$ib,new c$ib],this.trianglePositions.length=3,this.triangleNormals=[new c$ib,new c$ib,new c$ib],this.triangleNormals.length=3,this.position=new c$ib}c$p(c$a,"laya.d3.utils.RaycastHit"),c$a.prototype.cloneTo=function(c$a){c$a.distance=this.distance,this.trianglePositions[0].cloneTo(c$a.trianglePositions[0]),this.trianglePositions[1].cloneTo(c$a.trianglePositions[1]),this.trianglePositions[2].cloneTo(c$a.trianglePositions[2]),this.triangleNormals[0].cloneTo(c$a.triangleNormals[0]),this.triangleNormals[1].cloneTo(c$a.triangleNormals[1]),this.triangleNormals[2].cloneTo(c$a.triangleNormals[2]),this.position.cloneTo(c$a.position),c$a.sprite3D=this.sprite3D}}(),function(){function c$a(c$a,c$b){this._width=0,this._height=0,this._width=c$a,this._height=c$b}c$p(c$a,"laya.d3.utils.Size");var c$b=c$a.prototype;return c$q(0,c$b,"width",function(){return-1===this._width?c$Y.clientWidth:this._width}),c$q(0,c$b,"height",function(){return-1===this._height?c$Y.clientHeight:this._height}),c$q(1,c$a,"fullScreen",function(){return new c$a(-1,-1)}),c$a}()),c$sb=function(){function c$I(){}return c$p(c$I,"laya.d3.utils.Utils3D"),c$I._rotationTransformScaleSkinAnimation=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l,c$m,c$n){var c$o,c$p,c$q,c$r,c$s,c$t=c$I._tempArray16_0,c$u=c$I._tempArray16_1,c$v=c$I._tempArray16_2,c$w=c$d+c$d,c$x=c$g+c$g,c$y=c$h+c$h,c$z=c$d*c$w,c$A=c$g*c$w,c$B=c$g*c$x,c$C=c$h*c$w,c$D=c$h*c$x,c$E=c$h*c$y,c$F=c$i*c$w,c$G=c$i*c$x,c$H=c$i*c$y;for(c$t[15]=1,c$t[0]=1-c$B-c$E,c$t[1]=c$A+c$H,c$t[2]=c$C-c$G,c$t[4]=c$A-c$H,c$t[5]=1-c$z-c$E,c$t[6]=c$D+c$F,c$t[8]=c$C+c$G,c$t[9]=c$D-c$F,c$t[10]=1-c$z-c$B,c$u[15]=1,c$u[0]=c$j,c$u[5]=c$k,c$u[10]=c$l,c$o=0;c$o<4;c$o++)c$p=c$t[c$o],c$q=c$t[c$o+4],c$r=c$t[c$o+8],c$s=c$t[c$o+12],c$v[c$o]=c$p,c$v[c$o+4]=c$q,c$v[c$o+8]=c$r,c$v[c$o+12]=c$p*c$a+c$q*c$b+c$r*c$c+c$s;for(c$o=0;c$o<4;c$o++)c$p=c$v[c$o],c$q=c$v[c$o+4],c$r=c$v[c$o+8],c$s=c$v[c$o+12],c$m[c$o+c$n]=c$p*c$u[0]+c$q*c$u[1]+c$r*c$u[2]+c$s*c$u[3],c$m[c$o+c$n+4]=c$p*c$u[4]+c$q*c$u[5]+c$r*c$u[6]+c$s*c$u[7],c$m[c$o+c$n+8]=c$p*c$u[8]+c$q*c$u[9]+c$r*c$u[10]+c$s*c$u[11],c$m[c$o+c$n+12]=c$p*c$u[12]+c$q*c$u[13]+c$r*c$u[14]+c$s*c$u[15]},c$I._createNodeByJson=function(c$a,c$b,c$c,c$d){if(!c$c)switch(c$b.type){case"Sprite3D":c$c=new c$Kb;break;case"MeshSprite3D":c$c=new c$Xb;break;case"SkinnedMeshSprite3D":c$c=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":c$c=new ShuriKenParticle3D;break;case"TrailSprite3D":c$c=new TrailSprite3D;break;case"Terrain":c$c=new Terrain;break;case"Camera":c$c=new c$Wb;break;case"DirectionLight":c$c=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var c$g=c$b.props;if(c$g)for(var c$h in c$g)c$c[c$h]=c$g[c$h];var c$i=c$b.customProps;c$i&&(c$c instanceof laya.d3.core.Sprite3D?(c$c._parseBaseCustomProps(c$i),c$c._parseCustomProps(c$a,c$d,c$i,c$b),c$c._parseCustomComponent(c$a,c$d,c$b.components)):c$c._parseCustomProps(c$a,c$d,c$i,c$b));var c$j=c$b.child;if(c$j)for(var c$k=0,c$l=c$j.length;c$k<c$l;c$k++){var c$m=c$I._createNodeByJson(c$a,c$j[c$k],null,c$d);c$c.addChild(c$m)}return c$c},c$I._computeBoneAndAnimationDatasByBindPoseMatrxix=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i,c$j,c$k=0,c$l=0,c$m=c$a.length;for(c$i=0;c$i<c$m;c$k+=c$a[c$i].keyframeWidth,c$l+=16,c$i++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(c$b[c$k+0],c$b[c$k+1],c$b[c$k+2],c$b[c$k+3],c$b[c$k+4],c$b[c$k+5],c$b[c$k+6],c$b[c$k+7],c$b[c$k+8],c$b[c$k+9],c$d,c$l),0!=c$i&&(c$j=16*c$a[c$i].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(c$d,c$j,c$d,c$l,c$d,c$l));var c$n=c$c.length;for(c$i=0;c$i<c$n;c$i++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(c$d,16*c$h[c$i],c$c[c$i],c$g,16*c$i)},c$I._computeAnimationDatasByArrayAndMatrixFast=function(c$a,c$b,c$c,c$d){for(var c$g=0,c$h=c$a.length;c$g<c$h;c$g++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(c$b,16*c$d[c$g],c$a[c$g],c$c,16*c$g)},c$I._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(c$a,c$b,c$c,c$d,c$g){var c$h,c$i,c$j=0,c$k=0,c$l=c$a.length;for(c$h=0;c$h<c$l;c$j+=c$a[c$h].keyframeWidth,c$k+=16,c$h++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(c$b[c$j+7],c$b[c$j+8],c$b[c$j+9],c$b[c$j+3],c$b[c$j+4],c$b[c$j+5],c$b[c$j+6],c$b[c$j+0],c$b[c$j+1],c$b[c$j+2],c$d,c$k),0!=c$h&&(c$i=16*c$a[c$h].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(c$d,c$i,c$d,c$k,c$d,c$k));var c$m=c$c.length;for(c$h=0;c$h<c$m;c$h++){var c$n=16*c$h;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(c$d,c$n,c$c[c$h],c$g,c$n)}},c$I._computeAnimationDatasByArrayAndMatrixFastOld=function(c$a,c$b,c$c){for(var c$d=c$a.length,c$g=0;c$g<c$d;c$g++){var c$h=16*c$g;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(c$b,c$h,c$a[c$g],c$c,c$h)}},c$I._computeRootAnimationData=function(c$a,c$b,c$c){for(var c$d=0,c$g=0,c$h=0,c$i=c$a.length;c$d<c$i;c$g+=c$a[c$d].keyframeWidth,c$h+=16,c$d++)laya.d3.utils.Utils3D.createAffineTransformationArray(c$b[c$g+0],c$b[c$g+1],c$b[c$g+2],c$b[c$g+3],c$b[c$g+4],c$b[c$g+5],c$b[c$g+6],c$b[c$g+7],c$b[c$g+8],c$b[c$g+9],c$c,c$h)},c$I.transformVector3ArrayByQuat=function(c$a,c$b,c$c,c$d,c$g){var c$h=c$c.elements,c$i=c$a[c$b],c$j=c$a[c$b+1],c$k=c$a[c$b+2],c$l=c$h[0],c$m=c$h[1],c$n=c$h[2],c$o=c$h[3],c$p=c$o*c$i+c$m*c$k-c$n*c$j,c$q=c$o*c$j+c$n*c$i-c$l*c$k,c$r=c$o*c$k+c$l*c$j-c$m*c$i,c$s=-c$l*c$i-c$m*c$j-c$n*c$k;c$d[c$g]=c$p*c$o+c$s*-c$l+c$q*-c$n-c$r*-c$m,c$d[c$g+1]=c$q*c$o+c$s*-c$m+c$r*-c$l-c$p*-c$n,c$d[c$g+2]=c$r*c$o+c$s*-c$n+c$p*-c$m-c$q*-c$l},c$I.mulMatrixByArray=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i,c$j,c$k,c$l,c$m;if(c$g===c$c){for(c$c=c$I._tempArray16_3,c$i=0;c$i<16;++c$i)c$c[c$i]=c$g[c$h+c$i];c$d=0}for(c$i=0;c$i<4;c$i++)c$j=c$a[c$b+c$i],c$k=c$a[c$b+c$i+4],c$l=c$a[c$b+c$i+8],c$m=c$a[c$b+c$i+12],c$g[c$h+c$i]=c$j*c$c[c$d+0]+c$k*c$c[c$d+1]+c$l*c$c[c$d+2]+c$m*c$c[c$d+3],c$g[c$h+c$i+4]=c$j*c$c[c$d+4]+c$k*c$c[c$d+5]+c$l*c$c[c$d+6]+c$m*c$c[c$d+7],c$g[c$h+c$i+8]=c$j*c$c[c$d+8]+c$k*c$c[c$d+9]+c$l*c$c[c$d+10]+c$m*c$c[c$d+11],c$g[c$h+c$i+12]=c$j*c$c[c$d+12]+c$k*c$c[c$d+13]+c$l*c$c[c$d+14]+c$m*c$c[c$d+15]},c$I.mulMatrixByArrayFast=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i,c$j,c$k,c$l,c$m;for(c$i=0;c$i<4;c$i++)c$j=c$a[c$b+c$i],c$k=c$a[c$b+c$i+4],c$l=c$a[c$b+c$i+8],c$m=c$a[c$b+c$i+12],c$g[c$h+c$i]=c$j*c$c[c$d+0]+c$k*c$c[c$d+1]+c$l*c$c[c$d+2]+c$m*c$c[c$d+3],c$g[c$h+c$i+4]=c$j*c$c[c$d+4]+c$k*c$c[c$d+5]+c$l*c$c[c$d+6]+c$m*c$c[c$d+7],c$g[c$h+c$i+8]=c$j*c$c[c$d+8]+c$k*c$c[c$d+9]+c$l*c$c[c$d+10]+c$m*c$c[c$d+11],c$g[c$h+c$i+12]=c$j*c$c[c$d+12]+c$k*c$c[c$d+13]+c$l*c$c[c$d+14]+c$m*c$c[c$d+15]},c$I.mulMatrixByArrayAndMatrixFast=function(c$a,c$b,c$c,c$d,c$g){var c$h,c$i,c$j,c$k,c$l,c$m=c$c.elements,c$n=c$m[0],c$o=c$m[1],c$p=c$m[2],c$q=c$m[3],c$r=c$m[4],c$s=c$m[5],c$t=c$m[6],c$u=c$m[7],c$v=c$m[8],c$w=c$m[9],c$x=c$m[10],c$y=c$m[11],c$z=c$m[12],c$A=c$m[13],c$B=c$m[14],c$C=c$m[15],c$D=c$b,c$E=c$b+4,c$F=c$b+8,c$G=c$b+12,c$H=c$g,c$I=c$g+4,c$J=c$g+8,c$K=c$g+12;for(c$h=0;c$h<4;c$h++)c$i=c$a[c$D+c$h],c$j=c$a[c$E+c$h],c$k=c$a[c$F+c$h],c$l=c$a[c$G+c$h],c$d[c$H+c$h]=c$i*c$n+c$j*c$o+c$k*c$p+c$l*c$q,c$d[c$I+c$h]=c$i*c$r+c$j*c$s+c$k*c$t+c$l*c$u,c$d[c$J+c$h]=c$i*c$v+c$j*c$w+c$k*c$x+c$l*c$y,c$d[c$K+c$h]=c$i*c$z+c$j*c$A+c$k*c$B+c$l*c$C},c$I.createAffineTransformationArray=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l,c$m,c$n){var c$o=c$d+c$d,c$p=c$g+c$g,c$q=c$h+c$h,c$r=c$d*c$o,c$s=c$d*c$p,c$t=c$d*c$q,c$u=c$g*c$p,c$v=c$g*c$q,c$w=c$h*c$q,c$x=c$i*c$o,c$y=c$i*c$p,c$z=c$i*c$q;c$m[c$n+0]=(1-(c$u+c$w))*c$j,c$m[c$n+1]=(c$s+c$z)*c$j,c$m[c$n+2]=(c$t-c$y)*c$j,c$m[c$n+3]=0,c$m[c$n+4]=(c$s-c$z)*c$k,c$m[c$n+5]=(1-(c$r+c$w))*c$k,c$m[c$n+6]=(c$v+c$x)*c$k,c$m[c$n+7]=0,c$m[c$n+8]=(c$t+c$y)*c$l,c$m[c$n+9]=(c$v-c$x)*c$l,c$m[c$n+10]=(1-(c$r+c$u))*c$l,c$m[c$n+11]=0,c$m[c$n+12]=c$a,c$m[c$n+13]=c$b,c$m[c$n+14]=c$c,c$m[c$n+15]=1},c$I.transformVector3ArrayToVector3ArrayCoordinate=function(c$a,c$b,c$c,c$d,c$g){var c$h=c$I._tempArray4_0,c$i=c$a[c$b+0],c$j=c$a[c$b+1],c$k=c$a[c$b+2],c$l=c$c.elements;c$h[0]=c$i*c$l[0]+c$j*c$l[4]+c$k*c$l[8]+c$l[12],c$h[1]=c$i*c$l[1]+c$j*c$l[5]+c$k*c$l[9]+c$l[13],c$h[2]=c$i*c$l[2]+c$j*c$l[6]+c$k*c$l[10]+c$l[14],c$h[3]=1/(c$i*c$l[3]+c$j*c$l[7]+c$k*c$l[11]+c$l[15]),c$d[c$g+0]=c$h[0]*c$h[3],c$d[c$g+1]=c$h[1]*c$h[3],c$d[c$g+2]=c$h[2]*c$h[3]},c$I.transformLightingMapTexcoordByUV0Array=function(c$a,c$b,c$c,c$d,c$g){var c$h=c$c.elements;c$d[c$g+0]=c$a[c$b+0]*c$h[0]+c$h[2],c$d[c$g+1]=(c$a[c$b+1]-1)*c$h[1]+c$h[3]},c$I.transformLightingMapTexcoordByUV1Array=function(c$a,c$b,c$c,c$d,c$g){var c$h=c$c.elements;c$d[c$g+0]=c$a[c$b+0]*c$h[0]+c$h[2],c$d[c$g+1]=1+c$a[c$b+1]*c$h[1]+c$h[3]},c$I.getURLVerion=function(c$a){var c$b=c$a.indexOf("?");return 0<=c$b?c$a.substr(c$b):null},c$I._quaternionCreateFromYawPitchRollArray=function(c$a,c$b,c$c,c$d){var c$g=.5*c$c,c$h=.5*c$b,c$i=.5*c$a,c$j=Math.sin(c$g),c$k=Math.cos(c$g),c$l=Math.sin(c$h),c$m=Math.cos(c$h),c$n=Math.sin(c$i),c$o=Math.cos(c$i);c$d[0]=c$o*c$l*c$k+c$n*c$m*c$j,c$d[1]=c$n*c$m*c$k-c$o*c$l*c$j,c$d[2]=c$o*c$m*c$j-c$n*c$l*c$k,c$d[3]=c$o*c$m*c$k+c$n*c$l*c$j},c$I._createAffineTransformationArray=function(c$a,c$b,c$c,c$d){var c$g=c$b[0],c$h=c$b[1],c$i=c$b[2],c$j=c$b[3],c$k=c$g+c$g,c$l=c$h+c$h,c$m=c$i+c$i,c$n=c$g*c$k,c$o=c$g*c$l,c$p=c$g*c$m,c$q=c$h*c$l,c$r=c$h*c$m,c$s=c$i*c$m,c$t=c$j*c$k,c$u=c$j*c$l,c$v=c$j*c$m,c$w=c$c[0],c$x=c$c[1],c$y=c$c[2];c$d[0]=(1-(c$q+c$s))*c$w,c$d[1]=(c$o+c$v)*c$w,c$d[2]=(c$p-c$u)*c$w,c$d[3]=0,c$d[4]=(c$o-c$v)*c$x,c$d[5]=(1-(c$n+c$s))*c$x,c$d[6]=(c$r+c$t)*c$x,c$d[7]=0,c$d[8]=(c$p+c$u)*c$y,c$d[9]=(c$r-c$t)*c$y,c$d[10]=(1-(c$n+c$q))*c$y,c$d[11]=0,c$d[12]=c$a[0],c$d[13]=c$a[1],c$d[14]=c$a[2],c$d[15]=1},c$I._mulMatrixArray=function(c$a,c$b,c$c,c$d){var c$g,c$h,c$i,c$j,c$k,c$l=c$b.elements,c$m=c$l[0],c$n=c$l[1],c$o=c$l[2],c$p=c$l[3],c$q=c$l[4],c$r=c$l[5],c$s=c$l[6],c$t=c$l[7],c$u=c$l[8],c$v=c$l[9],c$w=c$l[10],c$x=c$l[11],c$y=c$l[12],c$z=c$l[13],c$A=c$l[14],c$B=c$l[15],c$C=c$d,c$D=c$d+4,c$E=c$d+8,c$F=c$d+12;for(c$g=0;c$g<4;c$g++)c$h=c$a[c$g],c$i=c$a[c$g+4],c$j=c$a[c$g+8],c$k=c$a[c$g+12],c$c[c$C+c$g]=c$h*c$m+c$i*c$n+c$j*c$o+c$k*c$p,c$c[c$D+c$g]=c$h*c$q+c$i*c$r+c$j*c$s+c$k*c$t,c$c[c$E+c$g]=c$h*c$u+c$i*c$v+c$j*c$w+c$k*c$x,c$c[c$F+c$g]=c$h*c$y+c$i*c$z+c$j*c$A+c$k*c$B},c$I.getYawPitchRoll=function(c$a,c$b){c$I.transformQuat(c$ib.ForwardRH,c$a,c$cb.TEMPVector31),c$I.transformQuat(c$ib.Up,c$a,c$cb.TEMPVector32);var c$c=c$cb.TEMPVector32.elements;c$I.angleTo(c$ib.ZERO,c$cb.TEMPVector31,c$cb.TEMPVector33);var c$d=c$cb.TEMPVector33.elements;c$d[0]==Math.PI/2?(c$d[1]=c$I.arcTanAngle(c$c[2],c$c[0]),c$d[2]=0):c$d[0]==-Math.PI/2?(c$d[1]=c$I.arcTanAngle(-c$c[2],-c$c[0]),c$d[2]=0):(c$ab.createRotationY(-c$d[1],c$cb.TEMPMatrix0),c$ab.createRotationX(-c$d[0],c$cb.TEMPMatrix1),c$ib.transformCoordinate(c$cb.TEMPVector32,c$cb.TEMPMatrix0,c$cb.TEMPVector32),c$ib.transformCoordinate(c$cb.TEMPVector32,c$cb.TEMPMatrix1,c$cb.TEMPVector32),c$d[2]=c$I.arcTanAngle(c$c[1],-c$c[0])),c$d[1]<=-Math.PI&&(c$d[1]=Math.PI),c$d[2]<=-Math.PI&&(c$d[2]=Math.PI),c$d[1]>=Math.PI&&c$d[2]>=Math.PI&&(c$d[1]=0,c$d[2]=0,c$d[0]=Math.PI-c$d[0]),c$b[0]=c$d[1],c$b[1]=c$d[0],c$b[2]=c$d[2]},c$I.arcTanAngle=function(c$a,c$b){return 0==c$a?1==c$b?Math.PI/2:-Math.PI/2:0<c$a?Math.atan(c$b/c$a):c$a<0?0<c$b?Math.atan(c$b/c$a)+Math.PI:Math.atan(c$b/c$a)-Math.PI:0},c$I.angleTo=function(c$a,c$b,c$c){c$ib.subtract(c$b,c$a,c$cb.TEMPVector30),c$ib.normalize(c$cb.TEMPVector30,c$cb.TEMPVector30),c$c.elements[0]=Math.asin(c$cb.TEMPVector30.y),c$c.elements[1]=c$I.arcTanAngle(-c$cb.TEMPVector30.z,-c$cb.TEMPVector30.x)},c$I.transformQuat=function(c$a,c$b,c$c){var c$d=c$c.elements,c$g=c$a.elements,c$h=c$b,c$i=c$g[0],c$j=c$g[1],c$k=c$g[2],c$l=c$h[0],c$m=c$h[1],c$n=c$h[2],c$o=c$h[3],c$p=c$o*c$i+c$m*c$k-c$n*c$j,c$q=c$o*c$j+c$n*c$i-c$l*c$k,c$r=c$o*c$k+c$l*c$j-c$m*c$i,c$s=-c$l*c$i-c$m*c$j-c$n*c$k;c$d[0]=c$p*c$o+c$s*-c$l+c$q*-c$n-c$r*-c$m,c$d[1]=c$q*c$o+c$s*-c$m+c$r*-c$l-c$p*-c$n,c$d[2]=c$r*c$o+c$s*-c$n+c$p*-c$m-c$q*-c$l},c$I.quaterionNormalize=function(c$a,c$b){var c$c=c$a[0],c$d=c$a[1],c$g=c$a[2],c$h=c$a[3],c$i=c$c*c$c+c$d*c$d+c$g*c$g+c$h*c$h;0<c$i&&(c$i=1/Math.sqrt(c$i),c$b[0]=c$c*c$i,c$b[1]=c$d*c$i,c$b[2]=c$g*c$i,c$b[3]=c$h*c$i)},c$I.matrix4x4MultiplyFFF=function(c$a,c$b,c$c){var c$d,c$g,c$h,c$i,c$j;if(c$c===c$b)for(c$b=new Float32Array(16),c$d=0;c$d<16;++c$d)c$b[c$d]=c$c[c$d];for(c$d=0;c$d<4;c$d++)c$g=c$a[c$d],c$h=c$a[c$d+4],c$i=c$a[c$d+8],c$j=c$a[c$d+12],c$c[c$d]=c$g*c$b[0]+c$h*c$b[1]+c$i*c$b[2]+c$j*c$b[3],c$c[c$d+4]=c$g*c$b[4]+c$h*c$b[5]+c$i*c$b[6]+c$j*c$b[7],c$c[c$d+8]=c$g*c$b[8]+c$h*c$b[9]+c$i*c$b[10]+c$j*c$b[11],c$c[c$d+12]=c$g*c$b[12]+c$h*c$b[13]+c$i*c$b[14]+c$j*c$b[15]},c$I.matrix4x4MultiplyMFM=function(c$a,c$b,c$c){c$I.matrix4x4MultiplyFFF(c$a.elements,c$b,c$c.elements)},c$n(c$I,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new c$ib},"_tempVector3_1",function(){return this._tempVector3_1=new c$ib},"_tempVector3_2",function(){return this._tempVector3_2=new c$ib},"_tempVector3_3",function(){return this._tempVector3_3=new c$ib},"_tempVector3_4",function(){return this._tempVector3_4=new c$ib},"_tempVector3_5",function(){return this._tempVector3_5=new c$ib},"_tempVector3_6",function(){return this._tempVector3_6=new c$ib},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),c$I}(),c$tb=function(){function c$G(){}return c$p(c$G,"Laya3D"),c$G._cancelLoadByUrl=function(c$a){c$x.loader.cancelLoadByUrl(c$a),c$G._innerFirstLevelLoaderManager.cancelLoadByUrl(c$a),c$G._innerSecondLevelLoaderManager.cancelLoadByUrl(c$a),c$G._innerThirdLevelLoaderManager.cancelLoadByUrl(c$a),c$G._innerFourthLevelLoaderManager.cancelLoadByUrl(c$a)},c$G._changeWebGLSize=function(c$a,c$b){c$F.onStageResize(c$a,c$b),c$Y.clientWidth=c$a,c$Y.clientHeight=c$b},c$G.__init__=function(){var c$a=c$b.createMap;c$a.lh=[c$Kb,"SPRITE3DHIERARCHY"],c$a.ls=[c$Jb,"SPRITE3DHIERARCHY"],c$a.lm=[c$Rb,"MESH"],c$a.lmat=[c$Mb,"MATERIAL"],c$a.jpg=[c$Tb,"nativeimage"],c$a.jpeg=[c$Tb,"nativeimage"],c$a.png=[c$Tb,"nativeimage"],c$a.pkm=[c$Tb,"arraybuffer"],c$a.raw=[c$Pb,"arraybuffer"],c$a.mipmaps=[c$Pb,"arraybuffer"],c$t.parserMap.SPRITE3DHIERARCHY=c$G._loadHierarchy,c$t.parserMap.MESH=c$G._loadMesh,c$t.parserMap.MATERIAL=c$G._loadMaterial,c$t.parserMap.TEXTURECUBE=c$G._loadTextureCube,c$t.parserMap.TERRAIN=c$G._loadTerrain,c$G._innerFirstLevelLoaderManager.on("error",null,c$G._eventLoadManagerError),c$G._innerSecondLevelLoaderManager.on("error",null,c$G._eventLoadManagerError),c$G._innerThirdLevelLoaderManager.on("error",null,c$G._eventLoadManagerError),c$G._innerFourthLevelLoaderManager.on("error",null,c$G._eventLoadManagerError)},c$G.READ_BLOCK=function(){return c$G._readData.pos+=4,!0},c$G.READ_DATA=function(){return c$G._DATA.offset=c$G._readData.getUint32(),c$G._DATA.size=c$G._readData.getUint32(),!0},c$G.READ_STRINGS=function(){var c$a=[],c$b={offset:0,size:0};c$b.offset=c$G._readData.getUint16(),c$b.size=c$G._readData.getUint16();c$G._readData.pos;c$G._readData.pos=c$b.offset+c$G._DATA.offset;for(var c$c=0;c$c<c$b.size;c$c++){var c$d=c$G._readData.readUTFString();-1===c$d.lastIndexOf(".lmat")&&-1===c$d.lastIndexOf(".lpbr")||c$a.push(c$d)}return c$a},c$G.formatRelativePath=function(c$a,c$b){var c$c;if("."===c$b.charAt(0)){for(var c$d=(c$a+c$b).split("/"),c$g=0,c$h=c$d.length;c$g<c$h;c$g++)if(".."==c$d[c$g]){var c$i=c$g-1;0<c$i&&".."!==c$d[c$i]&&(c$d.splice(c$i,2),c$g-=2)}c$c=c$d.join("/")}else c$c=c$a+c$b;return null!=c$E.customFormat&&(c$c=c$E.customFormat(c$c,null)),c$c},c$G._eventLoadManagerError=function(c$a){c$x.loader.event("error",c$a)},c$G._addHierarchyInnerUrls=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i=c$G.formatRelativePath(c$d,c$g);c$c&&(c$i+=c$c),c$a.push({url:c$i,clas:c$h}),c$b[c$g]=c$i},c$G._getSprite3DHierarchyInnerUrls=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){var c$j,c$k=0,c$l=0;switch(c$a.type){case"Scene":var c$m=c$a.customProps.lightmaps;for(c$k=0,c$l=c$m.length;c$k<c$l;c$k++){var c$n=c$m[c$k].replace(".exr",".png");c$G._addHierarchyInnerUrls(c$d,c$g,c$h,c$i,c$n,c$Tb)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var c$o;if(c$a.instanceParams)(c$o=c$a.instanceParams.loadPath)&&c$G._addHierarchyInnerUrls(c$b,c$g,c$h,c$i,c$o,c$Rb);else{(c$o=(c$j=c$a.customProps).meshPath)&&c$G._addHierarchyInnerUrls(c$b,c$g,c$h,c$i,c$o,c$Rb);var c$p=c$j.materials;if(c$p)for(c$k=0,c$l=c$p.length;c$k<c$l;c$k++){for(var c$q=c$p[c$k],c$r=c$q.type.split("."),c$s=c$H.window,c$t=0,c$u=c$r.length;c$t<c$u;++c$t){c$s=c$s[this.clasPaths[c$t]]}if("function"!=typeof c$s)throw"_getSprite3DHierarchyInnerUrls 错误: "+c$q.type+" 不是类";c$G._addHierarchyInnerUrls(c$c,c$g,c$h,c$i,c$q.path,c$s)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var c$v=(c$j=c$a.customProps).meshPath;c$v&&c$G._addHierarchyInnerUrls(c$b,c$g,c$h,c$i,c$v,c$Rb);var c$w=c$j.material;if(c$w){c$r=c$w.type.split("."),c$s=c$H.window;for(c$t=0,c$u=c$r.length;c$t<c$u;++c$t){c$s=c$s[this.clasPaths[c$t]]}c$G._addHierarchyInnerUrls(c$c,c$g,c$h,c$i,c$w.path,c$s)}else{var c$x=c$j.materialPath;if(c$x)c$G._addHierarchyInnerUrls(c$c,c$g,c$h,c$i,c$x,ShurikenParticleMaterial);else{var c$y=c$j.texturePath;c$y&&c$G._addHierarchyInnerUrls(c$d,c$g,c$h,c$i,c$y,c$Tb)}}break;case"Terrain":c$G._addHierarchyInnerUrls(c$d,c$g,c$h,c$i,c$a.customProps.dataPath,TerrainRes)}var c$z=c$a.components;for(var c$A in c$z){var c$B=c$z[c$A];switch(c$A){case"Animator":var c$C=c$B.avatarPath;if(c$C)c$G._addHierarchyInnerUrls(c$d,c$g,c$h,c$i,c$C,Avatar);else{var c$D=c$B.avatar;c$D&&c$G._addHierarchyInnerUrls(c$d,c$g,c$h,c$i,c$D.path,Avatar)}var c$E=c$B.clipPaths;for(c$k=0,c$l=c$E.length;c$k<c$l;c$k++)c$G._addHierarchyInnerUrls(c$d,c$g,c$h,c$i,c$E[c$k],AnimationClip)}}var c$F=c$a.child;for(c$k=0,c$l=c$F.length;c$k<c$l;c$k++)c$G._getSprite3DHierarchyInnerUrls(c$F[c$k],c$b,c$c,c$d,c$g,c$h,c$i)},c$G._loadHierarchy=function(c$a){c$a.on("loaded",null,c$G._onHierarchylhLoaded,[c$a,c$a._class._getGroup()]),c$a.load(c$a.url,"json",!1,null,!0)},c$G._onHierarchylhLoaded=function(c$a,c$b,c$c){if(c$a._class.destroyed)c$a.endLoad();else{var c$d=c$a.url,c$g=c$sb.getURLVerion(c$d),c$h=c$E.getPath(c$d),c$i=[],c$j=[],c$k=[],c$l={};c$G._getSprite3DHierarchyInnerUrls(c$c,c$i,c$j,c$k,c$l,c$g,c$h);var c$m=c$i.length+c$j.length+c$k.length,c$n=c$m+1,c$o=1/c$n;if(c$G._onProcessChange(c$a,0,c$o,1),0<c$k.length){var c$p=c$m/c$n,c$q=c$D.create(null,c$G._onProcessChange,[c$a,c$o,c$p],!1);c$G._innerFourthLevelLoaderManager.create(c$k,c$D.create(null,c$G._onHierarchyInnerForthLevResouLoaded,[c$a,c$b,c$q,c$c,c$l,c$i,c$j,c$o+c$p*c$k.length,c$p]),c$q,null,null,1,!0,c$b)}else c$G._onHierarchyInnerForthLevResouLoaded(c$a,c$b,null,c$c,c$l,c$i,c$j,c$o,c$p)}},c$G._onHierarchyInnerForthLevResouLoaded=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k){if(c$a._class.destroyed)c$a.endLoad();else if(c$c&&c$c.recover(),0<c$i.length){var c$l=c$D.create(null,c$G._onProcessChange,[c$a,c$j,c$k],!1);c$G._innerSecondLevelLoaderManager.create(c$i,c$D.create(null,c$G._onHierarchyInnerSecondLevResouLoaded,[c$a,c$b,c$l,c$d,c$g,c$h,c$j+c$k*c$i.length,c$k]),c$c,null,null,1,!0,c$b)}else c$G._onHierarchyInnerSecondLevResouLoaded(c$a,c$b,null,c$d,c$g,c$h,c$j,c$k)},c$G._onHierarchyInnerSecondLevResouLoaded=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j){if(c$a._class.destroyed)c$a.endLoad();else if(c$c&&c$c.recover(),0<c$h.length){var c$k=c$D.create(null,c$G._onProcessChange,[c$a,c$i,c$j],!1);c$G._innerFirstLevelLoaderManager.create(c$h,c$D.create(null,c$G._onHierarchyInnerFirstLevResouLoaded,[c$a,c$k,c$d,c$g]),c$c,null,null,1,!0,c$b)}else c$G._onHierarchyInnerFirstLevResouLoaded(c$a,null,c$d,c$g)},c$G._onHierarchyInnerFirstLevResouLoaded=function(c$a,c$b,c$c,c$d){c$b&&c$b.recover(),c$a.endLoad([c$c,c$d])},c$G._loadTerrain=function(c$a){c$a.on("loaded",null,c$G._onTerrainLtLoaded,[c$a,c$a._class._getGroup()]),c$a.load(c$a.url,"json",!1,null,!0)},c$G._onTerrainLtLoaded=function(c$a,c$b,c$c){if(c$a._class.destroyed)c$a.endLoad();else{var c$d,c$g,c$h=c$a.url,c$i=c$sb.getURLVerion(c$h),c$j=c$E.getPath(c$h),c$k=[],c$l={},c$m=0,c$n=0,c$o=c$c.heightData;c$d=c$o.url,c$g=c$G.formatRelativePath(c$j,c$d),c$i&&(c$g+=c$i),c$d=c$l[c$d]=c$g;var c$p=c$c.detailTexture;for(c$m=0,c$n=c$p.length;c$m<c$n;c$m++)c$k.push({url:c$p[c$m].diffuse});var c$q=c$c.normalMap;for(c$m=0,c$n=c$q.length;c$m<c$n;c$m++)c$k.push({url:c$q[c$m]});var c$r=c$c.alphaMap;for(c$m=0,c$n=c$r.length;c$m<c$n;c$m++)c$k.push({url:c$r[c$m],params:[!1,!1,6408,!0]});for(c$m=0,c$n=c$k.length;c$m<c$n;c$m++){var c$s=c$k[c$m].url;c$g=c$G.formatRelativePath(c$j,c$s),c$i&&(c$g+=c$i),c$k[c$m].url=c$g,c$l[c$s]=c$g}var c$t=c$k.length,c$u=c$t+2,c$v=1/c$u;c$G._onProcessChange(c$a,0,c$v,1);var c$w={heightMapLoaded:!1,texturesLoaded:!1},c$x=c$D.create(null,c$G._onProcessChange,[c$a,c$v,c$v],!1);c$G._innerFourthLevelLoaderManager.create(c$d,c$D.create(null,c$G._onTerrainHeightMapLoaded,[c$a,c$x,c$c,c$l,c$w]),c$x,null,[c$o.numX,c$o.numZ,c$o.bitType,c$o.value],1,!0,c$b);var c$y=c$D.create(null,c$G._onProcessChange,[c$a,2*c$v,c$t/c$u],!1);c$G._innerFourthLevelLoaderManager.create(c$k,c$D.create(null,c$G._onTerrainTexturesLoaded,[c$a,c$y,c$c,c$l,c$w]),c$y,null,null,1,!0,c$b)}},c$G._onTerrainHeightMapLoaded=function(c$a,c$b,c$c,c$d,c$g){c$g.heightMapLoaded=!0,c$g.texturesLoaded&&(c$a.endLoad([c$c,c$d]),c$b.recover())},c$G._onTerrainTexturesLoaded=function(c$a,c$b,c$c,c$d,c$g){c$g.texturesLoaded=!0,c$g.heightMapLoaded&&(c$a.endLoad([c$c,c$d]),c$b.recover())},c$G._loadMesh=function(c$a){c$a.on("loaded",null,c$G._onMeshLmLoaded,[c$a,c$a._class._getGroup()]),c$a.load(c$a.url,"arraybuffer",!1,null,!0)},c$G._onMeshLmLoaded=function(c$a,c$b,c$c){if(c$a._class.destroyed)c$a.endLoad();else{var c$d,c$g,c$h,c$i=c$a.url,c$j=c$sb.getURLVerion(c$i),c$k=c$E.getPath(c$i),c$l={},c$m=0,c$n=0;switch((c$G._readData=new c$y(c$c)).pos=0,c$G._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var c$o=c$G._readData.getUint32();c$G._readData.pos=c$G._readData.pos+4,c$n=c$G._readData.getUint16(),c$G._readData.pos=c$G._readData.pos+8*c$n;var c$p=c$G._readData.getUint32();for(c$n=c$G._readData.getUint16(),c$G._readData.pos=c$o+c$p,c$d=[],c$m=0;c$m<c$n;c$m++){var c$q=c$G._readData.readUTFString();-1!==c$q.lastIndexOf(".lmat")&&c$d.push(c$q)}break;default:for(c$G.READ_BLOCK(),c$m=0;c$m<2;c$m++){var c$r=c$G._readData.getUint16(),c$s=c$G._strings[c$r],c$t=c$G["READ_"+c$s];if(null==c$t)throw new Error("model file err,no this function:"+c$r+" "+c$s);1===c$m?c$d=c$t.call():c$t.call()}}for(c$m=0,c$h=c$d.length;c$m<c$h;c$m++){var c$u=c$d[c$m];c$g=c$G.formatRelativePath(c$k,c$u),c$j&&(c$g+=c$j),c$d[c$m]=c$g,c$l[c$u]=c$g}if(0<c$d.length){c$G._onProcessChange(c$a,0,.5,1);var c$v=c$D.create(null,c$G._onProcessChange,[c$a,.5,.5],!1);c$G._innerSecondLevelLoaderManager.create(c$d,c$D.create(null,c$G._onMeshMateialLoaded,[c$a,c$v,c$c,c$l]),c$v,null,null,1,!0,c$b)}else c$a.endLoad([c$c,c$l])}},c$G._onMeshMateialLoaded=function(c$a,c$b,c$c,c$d){c$a.endLoad([c$c,c$d]),c$b.recover()},c$G._getMaterialTexturePath=function(c$a,c$b,c$c){var c$d=c$a.length-4;return c$a.indexOf(".dds")!=c$d&&c$a.indexOf(".tga")!=c$d&&c$a.indexOf(".exr")!=c$d&&c$a.indexOf(".DDS")!=c$d&&c$a.indexOf(".TGA")!=c$d&&c$a.indexOf(".EXR")!=c$d||(c$a=c$a.substr(0,c$d)+".png"),c$a=c$G.formatRelativePath(c$c,c$a),c$b&&(c$a+=c$b),c$a},c$G._loadMaterial=function(c$a){c$a.on("loaded",null,c$G._onMaterilLmatLoaded,[c$a,c$a._class._getGroup()]),c$a.load(c$a.url,"json",!1,null,!0)},c$G._onMaterilLmatLoaded=function(c$a,c$b,c$c){if(c$a._class.destroyed)c$a.endLoad();else{var c$d,c$g=c$a.url,c$h=c$sb.getURLVerion(c$g),c$i=c$E.getPath(c$g),c$j=[],c$k={},c$l=c$c.customProps,c$m=c$c.version;if(c$m)switch(c$m){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var c$n=c$c.props.textures,c$o=0,c$p=c$n.length;c$o<c$p;c$o++){var c$q=c$n[c$o],c$r=c$q.path;if(c$r){var c$s=c$r.length-4;c$r.indexOf(".exr")!=c$s&&c$r.indexOf(".EXR")!=c$s||(c$r=c$r.substr(0,c$s)+".png"),c$d=c$G.formatRelativePath(c$i,c$r),c$h&&(c$d+=c$h),c$j.push({url:c$d,params:c$q.params}),c$k[c$r]=c$d}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var c$t=c$l.diffuseTexture.texture2D;if(c$t&&(c$d=c$G._getMaterialTexturePath(c$t,c$h,c$i),c$j.push(c$d),c$k[c$t]=c$d),c$l.normalTexture){var c$u=c$l.normalTexture.texture2D;c$u&&(c$d=c$G._getMaterialTexturePath(c$u,c$h,c$i),c$j.push(c$d),c$k[c$u]=c$d)}if(c$l.specularTexture){var c$v=c$l.specularTexture.texture2D;c$v&&(c$d=c$G._getMaterialTexturePath(c$v,c$h,c$i),c$j.push(c$d),c$k[c$v]=c$d)}if(c$l.emissiveTexture){var c$w=c$l.emissiveTexture.texture2D;c$w&&(c$d=c$G._getMaterialTexturePath(c$w,c$h,c$i),c$j.push(c$d),c$k[c$w]=c$d)}if(c$l.ambientTexture){var c$x=c$l.ambientTexture.texture2D;c$x&&(c$d=c$G._getMaterialTexturePath(c$x,c$h,c$i),c$j.push(c$d),c$k[c$x]=c$d)}if(c$l.reflectTexture){var c$y=c$l.reflectTexture.texture2D;c$y&&(c$d=c$G._getMaterialTexturePath(c$y,c$h,c$i),c$j.push(c$d),c$k[c$y]=c$d)}}var c$z=c$j.length,c$A=c$z+1,c$B=1/c$A;if(c$G._onProcessChange(c$a,0,c$B,1),0<c$z){var c$C=c$D.create(null,c$G._onProcessChange,[c$a,c$B,c$z/c$A],!1);c$G._innerFourthLevelLoaderManager.create(c$j,c$D.create(null,c$G._onMateialTexturesLoaded,[c$a,c$C,c$c,c$k]),c$C,c$Tb,null,1,!0,c$b)}else c$G._onMateialTexturesLoaded(c$a,null,c$c,null)}},c$G._onMateialTexturesLoaded=function(c$a,c$b,c$c,c$d){c$a.endLoad([c$c,c$d]),c$b&&c$b.recover()},c$G._loadTextureCube=function(c$a){c$a.on("loaded",null,c$G._onTextureCubeLtcLoaded,[c$a]),c$a.load(c$a.url,"json",!1,null,!0)},c$G._onTextureCubeLtcLoaded=function(c$a,c$b){if(c$a._class.destroyed)c$a.endLoad();else{var c$c=c$E.getPath(c$a.url),c$d=[c$G.formatRelativePath(c$c,c$b.px),c$G.formatRelativePath(c$c,c$b.nx),c$G.formatRelativePath(c$c,c$b.py),c$G.formatRelativePath(c$c,c$b.ny),c$G.formatRelativePath(c$c,c$b.pz),c$G.formatRelativePath(c$c,c$b.nz)];c$G._onProcessChange(c$a,0,1/7,1);var c$g=c$D.create(null,c$G._onProcessChange,[c$a,1/7,6/7],!1);c$G._innerFourthLevelLoaderManager.load(c$d,c$D.create(null,c$G._onTextureCubeImagesLoaded,[c$a,c$d,c$g]),c$g,"nativeimage")}},c$G._onTextureCubeImagesLoaded=function(c$a,c$b,c$c){var c$d=[];c$d.length=6;for(var c$g=0;c$g<6;c$g++){var c$h=c$b[c$g];c$d[c$g]=c$t.getRes(c$h),c$t.clearRes(c$h)}c$a.endLoad(c$d),c$c.recover()},c$G._onProcessChange=function(c$a,c$b,c$c,c$d){(c$d=c$b+c$d*c$c)<1&&c$a.event("progress",c$d)},c$G.init=function(c$a,c$b,c$c,c$d,c$g,c$h){if(void 0===c$c&&(c$c=!1),void 0===c$d&&(c$d=!1),void 0===c$g&&(c$g=!0),void 0===c$h&&(c$h=!0),c$u.update3DLoop=function(){},c$u.cancelLoadByUrl=function(c$a){c$G._cancelLoadByUrl(c$a)},c$k.isAntialias=c$c,c$k.isAlpha=c$d,c$k.premultipliedAlpha=c$g,c$k.isStencil=c$h,!c$F.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");c$u.changeWebGLSize=c$G._changeWebGLSize,c$r.is3DMode=!0,c$x.init(c$a,c$b),c$I.__init__(),c$nb.__init__(),c$Xb.__init__(),c$Q.__init__(),c$G.__init__(),c$i.maxTextureCount=2,(c$G.debugMode||c$Z.debugMode)&&(c$G._debugPhasorSprite=new c$V)},c$G.HIERARCHY="SPRITE3DHIERARCHY",c$G.MESH="MESH",c$G.MATERIAL="MATERIAL",c$G.PBRMATERIAL="PBRMTL",c$G.TEXTURECUBE="TEXTURECUBE",c$G.TERRAIN="TERRAIN",c$G._readData=null,c$G._debugPhasorSprite=null,c$G.debugMode=!1,c$n(c$G,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new c$b},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new c$b},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new c$b},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new c$b}]),c$G}(),c$ub=function(c$a){function c$g(c$a){c$g.__super.call(this),this._owner=c$a,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}c$p(c$g,"laya.d3.animation.AnimationTransform3D",c$h);var c$b=c$g.prototype;return c$b._getlocalMatrix=function(){return this._localUpdate&&(c$sb._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},c$b._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var c$a=0,c$b=this._childs.length;c$a<c$b;c$a++)this._childs[c$a]._onWorldTransform()}},c$b._setWorldMatrixAndUpdate=function(c$a){if(this._worldMatrix=c$a,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var c$b=this._getlocalMatrix(),c$c=0;c$c<16;++c$c)this._worldMatrix[c$c]=c$b[c$c];else c$sb.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},c$b._setWorldMatrixNoUpdate=function(c$a){this._worldMatrix=c$a},c$b._setWorldMatrixIgnoreUpdate=function(c$a){this._worldMatrix=c$a,this._worldUpdate=!1},c$b.getLocalPosition=function(){return this._localPosition},c$b.setLocalPosition=function(c$a){if(this._parent)this._localPosition=c$a,this._localUpdate=!0,this._onWorldTransform();else{var c$b=this._entity.owner._transform,c$c=this._entity.localPosition,c$d=c$c.elements;c$d[0]=c$a[0],c$d[1]=c$a[1],c$d[2]=c$a[2],c$b.localPosition=c$c}},c$b.getLocalRotation=function(){if(this._localQuaternionUpdate){var c$a=this._localRotationEuler;c$sb._quaternionCreateFromYawPitchRollArray(c$a[1]/c$g._angleToRandin,c$a[0]/c$g._angleToRandin,c$a[2]/c$g._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},c$b.setLocalRotation=function(c$a){if(this._parent)this._localRotation=c$a,c$sb.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var c$b=this._entity.owner._transform,c$c=this._entity.localRotation,c$d=c$c.elements;c$d[0]=c$a[0],c$d[1]=c$a[1],c$d[2]=c$a[2],c$d[3]=c$a[3],c$b.localRotation=c$c}},c$b.getLocalScale=function(){return this._localScale},c$b.setLocalScale=function(c$a){if(this._parent)this._localScale=c$a,this._localUpdate=!0,this._onWorldTransform();else{var c$b=this._entity.owner._transform,c$c=this._entity.localScale,c$d=c$c.elements;c$d[0]=c$a[0],c$d[1]=c$a[1],c$d[2]=c$a[2],c$b.localScale=c$c}},c$b.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){c$sb.getYawPitchRoll(this._localRotation,c$g._tempVector3);var c$a=c$g._tempVector3,c$b=this._localRotationEuler;c$b[0]=c$a[1]*c$g._angleToRandin,c$b[1]=c$a[0]*c$g._angleToRandin,c$b[2]=c$a[2]*c$g._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},c$b.setLocalRotationEuler=function(c$a){if(this._parent)c$sb._quaternionCreateFromYawPitchRollArray(c$a[1]/c$g._angleToRandin,c$a[0]/c$g._angleToRandin,c$a[2]/c$g._angleToRandin,this._localRotation),this._localRotationEuler=c$a,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var c$b=this._entity.owner._transform,c$c=this._entity.localRotationEuler,c$d=c$c.elements;c$d[0]=c$a[0],c$d[1]=c$a[1],c$d[2]=c$a[2],c$b.localRotationEuler=c$c}},c$b.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)c$sb.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var c$a=this._getlocalMatrix(),c$b=0;c$b<16;++c$b)this._worldMatrix[c$b]=c$a[c$b];this._worldUpdate=!1}return this._worldMatrix},c$b.setParent=function(c$a){if(this._parent!==c$a){if(this._parent){var c$b=this._parent._childs,c$c=c$b.indexOf(this);c$b.splice(c$c,1)}c$a&&(c$a._childs.push(this),c$a&&this._onWorldTransform()),this._parent=c$a}},c$n(c$g,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),c$g}(),c$vb=function(c$a){function c$b(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,c$b.__super.call(this),this._destroyed=!1,this._id=c$b._uniqueIDCounter,c$b._uniqueIDCounter++}c$p(c$b,"laya.d3.component.Component3D",c$h);var c$c=c$b.prototype;return c$x.imps(c$c,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),c$c._initialize=function(c$a){this._owner=c$a,this._enable=!0,this.started=!1,this._load(c$a)},c$c._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},c$c._load=function(c$a){},c$c._start=function(c$a){},c$c._update=function(c$a){},c$c._lateUpdate=function(c$a){},c$c._preRenderUpdate=function(c$a){},c$c._postRenderUpdate=function(c$a){},c$c._unload=function(c$a){this.offAll()},c$c._cloneTo=function(c$a){},c$q(0,c$c,"id",function(){return this._id}),c$q(0,c$c,"destroyed",function(){return this._destroyed}),c$q(0,c$c,"owner",function(){return this._owner}),c$q(0,c$c,"enable",function(){return this._enable},function(c$a){this._enable!==c$a&&(this._enable=c$a,this.event("enablechanged",this._enable))}),c$q(0,c$c,"isSingleton",function(){return c$b._isSingleton}),c$b._isSingleton=!0,c$b._uniqueIDCounter=1,c$b}(),c$wb=function(c$a){function c$b(){this._destroyed=!1,c$b.__super.call(this),this._destroyed=!1}c$p(c$b,"laya.d3.core.GeometryFilter",c$h);var c$c=c$b.prototype;return c$x.imps(c$c,{"laya.resource.IDestroy":!0}),c$c._destroy=function(){this.offAll(),this._destroyed=!0},c$q(0,c$c,"_isAsyncLoaded",function(){return!0}),c$q(0,c$c,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),c$q(0,c$c,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),c$q(0,c$c,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),c$q(0,c$c,"destroyed",function(){return this._destroyed}),c$b}(),c$xb=function(c$a){function c$d(c$a){c$d.__super.call(this),this._id=++c$d._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new c$Za(new c$ib,new c$ib),this._boundingBoxCenter=new c$ib,this._boundingSphere=new c$_a(new c$ib,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=c$a,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}c$p(c$d,"laya.d3.core.render.BaseRender",c$h);var c$b=c$d.prototype;return c$x.imps(c$b,{"laya.resource.IDestroy":!0}),c$b._changeMaterialReference=function(c$a,c$b){c$a&&c$a._removeReference(),c$b._addReference()},c$b._getInstanceMaterial=function(c$a,c$b){var c$c=new c$a.constructor;return c$a.cloneTo(c$c),c$c.name=c$c.name+"(Instance)",this._materialsInstance[c$b]=!0,this._changeMaterialReference(this._materials[c$b],c$c),this._materials[c$b]=c$c},c$b._setShaderValuelightMap=function(c$a){this._setShaderValueTexture(3,c$a)},c$b._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},c$b._renderRenderableBoundBox=function(){var c$a=c$tb._debugPhasorSprite,c$b=this.boundingBox,c$c=c$d._tempBoundBoxCorners;c$b.getCorners(c$c),c$a.line(c$c[0],c$d._greenColor,c$c[1],c$d._greenColor),c$a.line(c$c[2],c$d._greenColor,c$c[3],c$d._greenColor),c$a.line(c$c[4],c$d._greenColor,c$c[5],c$d._greenColor),c$a.line(c$c[6],c$d._greenColor,c$c[7],c$d._greenColor),c$a.line(c$c[0],c$d._greenColor,c$c[3],c$d._greenColor),c$a.line(c$c[1],c$d._greenColor,c$c[2],c$d._greenColor),c$a.line(c$c[2],c$d._greenColor,c$c[6],c$d._greenColor),c$a.line(c$c[3],c$d._greenColor,c$c[7],c$d._greenColor),c$a.line(c$c[0],c$d._greenColor,c$c[4],c$d._greenColor),c$a.line(c$c[1],c$d._greenColor,c$c[5],c$d._greenColor),c$a.line(c$c[4],c$d._greenColor,c$c[7],c$d._greenColor),c$a.line(c$c[5],c$d._greenColor,c$c[6],c$d._greenColor)},c$b._calculateBoundingSphere=function(){throw"BaseRender: must override it."},c$b._calculateBoundingBox=function(){throw"BaseRender: must override it."},c$b._setShaderValueTexture=function(c$a,c$b){this._owner._shaderValues.setValue(c$a,c$b)},c$b._setShaderValueMatrix4x4=function(c$a,c$b){this._owner._shaderValues.setValue(c$a,c$b?c$b.elements:null)},c$b._setShaderValueColor=function(c$a,c$b){this._owner._shaderValues.setValue(c$a,c$b?c$b.elements:null)},c$b._setShaderValueBuffer=function(c$a,c$b){this._owner._shaderValues.setValue(c$a,c$b)},c$b._setShaderValueInt=function(c$a,c$b){this._owner._shaderValues.setValue(c$a,c$b)},c$b._setShaderValueBool=function(c$a,c$b){this._owner._shaderValues.setValue(c$a,c$b)},c$b._setShaderValueNumber=function(c$a,c$b){this._owner._shaderValues.setValue(c$a,c$b)},c$b._setShaderValueVector2=function(c$a,c$b){this._owner._shaderValues.setValue(c$a,c$b?c$b.elements:null)},c$b._addShaderDefine=function(c$a){this._owner._shaderDefineValue|=c$a},c$b._removeShaderDefine=function(c$a){this._owner._shaderDefineValue&=~c$a},c$b._renderUpdate=function(c$a){return!0},c$b._applyLightMapParams=function(){if(0<=this._lightmapIndex){var c$a=this._owner.scene;if(c$a){var c$b=c$a.getlightmaps()[this._lightmapIndex];c$b?(this._addShaderDefine(c$Vb.SAHDERDEFINE_LIGHTMAP),c$b.loaded?this._setShaderValuelightMap(c$b):c$b.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(c$Vb.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(c$Vb.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(c$Vb.SAHDERDEFINE_LIGHTMAP)},c$b._updateOctreeNode=function(){var c$a=this._treeNode;c$a&&this._octreeNodeNeedChange&&(c$a.updateObject(this),this._octreeNodeNeedChange=!1)},c$b._destroy=function(){this.offAll();var c$a=0,c$b=0;for(c$a=0,c$b=this._renderElements.length;c$a<c$b;c$a++)this._renderElements[c$a]._destroy();for(c$a=0,c$b=this._materials.length;c$a<c$b;c$a++)this._materials[c$a]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},c$q(0,c$b,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),c$q(0,c$b,"id",function(){return this._id}),c$q(0,c$b,"material",function(){var c$a=this._materials[0];if(c$a&&!this._materialsInstance[0]){var c$b=this._getInstanceMaterial(c$a,0);this.event("materialchanged",[this,0,c$b])}return this._materials[0]},function(c$a){this.sharedMaterial=c$a}),c$q(0,c$b,"sharedMaterial",function(){return this._materials[0]},function(c$a){var c$b=this._materials[0];c$b!==c$a&&(this._materials[0]=c$a,this._materialsInstance[0]=!1,this._changeMaterialReference(c$b,c$a),this.event("materialchanged",[this,0,c$a]))}),c$q(0,c$b,"lightmapIndex",function(){return this._lightmapIndex},function(c$a){this._lightmapIndex=c$a,this._applyLightMapParams()}),c$q(0,c$b,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(c$a){this._lightmapScaleOffset=c$a,this._setShaderValueColor(2,c$a),this._addShaderDefine(c$Vb.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),c$q(0,c$b,"enable",function(){return this._enable},function(c$a){this._enable=c$a,this.event("enablechanged",[this,c$a])}),c$q(0,c$b,"materials",function(){for(var c$a=0,c$b=this._materials.length;c$a<c$b;c$a++)if(!this._materialsInstance[c$a]){var c$c=this._getInstanceMaterial(this._materials[c$a],c$a);this.event("materialchanged",[this,c$a,c$c])}return this._materials.slice()},function(c$a){this.sharedMaterials=c$a}),c$q(0,c$b,"sharedMaterials",function(){return this._materials.slice()},function(c$a){if(!c$a)throw new Error("MeshRender: shadredMaterials value can't be null.");var c$b=c$a.length;this._materialsInstance.length=c$b;for(var c$c=0;c$c<c$b;c$c++){var c$d=this._materials[c$c];c$d!==c$a[c$c]&&(this._materialsInstance[c$c]=!1,this._changeMaterialReference(c$d,c$a[c$c]),this.event("materialchanged",[this,c$c,c$a[c$c]]))}this._materials=c$a}),c$q(0,c$b,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),c$q(0,c$b,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var c$a=this.boundingBox;c$ib.add(c$a.min,c$a.max,this._boundingBoxCenter),c$ib.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),c$q(0,c$b,"receiveShadow",function(){return this._receiveShadow},function(c$a){this._receiveShadow!==c$a&&((this._receiveShadow=c$a)?this._addShaderDefine(c$pb.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(c$pb.SHADERDEFINE_RECEIVE_SHADOW))}),c$q(0,c$b,"destroyed",function(){return this._destroyed}),c$d._uniqueIDCounter=0,c$n(c$d,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new c$ib,new c$ib,new c$ib,new c$ib,new c$ib,new c$ib,new c$ib,new c$ib]},"_greenColor",function(){return this._greenColor=new c$jb(0,1,0,1)}]),c$d}(),c$yb=function(c$a){function c$j(c$a){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,c$j.__super.call(this),this._localPosition=new c$ib,this._localRotation=new c$cb(0,0,0,1),this._localScale=new c$ib(1,1,1),this._localRotationEuler=new c$ib,this._localMatrix=new c$ab,this._position=new c$ib,this._rotation=new c$cb(0,0,0,1),this._scale=new c$ib(1,1,1),this._worldMatrix=new c$ab,this._forward=new c$ib,this._up=new c$ib,this._right=new c$ib,this._owner=c$a,this._childs=[]}c$p(c$j,"laya.d3.core.Transform3D",c$h);var c$b=c$j.prototype;return c$b._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)c$ab.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var c$a=c$j._tempVector30;c$ib.multiply(this.pivot,this._localScale,c$a);var c$b=c$j._tempVector31;c$ib.subtract(c$a,this.pivot,c$b);var c$c=c$j._tempVector32,c$d=this.localRotation;c$ib.transformQuat(c$a,c$d,c$c),c$ib.subtract(c$c,c$a,c$c);var c$g=c$j._tempVector33;c$ib.subtract(this._localPosition,c$b,c$g),c$ib.subtract(c$g,c$c,c$g),c$ab.createAffineTransformation(c$g,c$d,this._localScale,this._localMatrix)}},c$b._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var c$a=0,c$b=this._childs.length;c$a<c$b;c$a++)this._childs[c$a]._onWorldPositionRotationTransform()}},c$b._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var c$a=0,c$b=this._childs.length;c$a<c$b;c$a++)this._childs[c$a]._onWorldPositionScaleTransform()}},c$b._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var c$a=0,c$b=this._childs.length;c$a<c$b;c$a++)this._childs[c$a]._onWorldPositionTransform()}},c$b._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var c$a=0,c$b=this._childs.length;c$a<c$b;c$a++)this._childs[c$a]._onWorldPositionRotationTransform()}},c$b._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var c$a=0,c$b=this._childs.length;c$a<c$b;c$a++)this._childs[c$a]._onWorldPositionScaleTransform()}},c$b._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var c$a=0,c$b=this._childs.length;c$a<c$b;c$a++)this._childs[c$a]._onWorldTransform()}},c$b.translate=function(c$a,c$b){void 0===c$b&&(c$b=!0),c$b?(c$ab.createFromQuaternion(this.localRotation,c$j._tempMatrix0),c$ib.transformCoordinate(c$a,c$j._tempMatrix0,c$j._tempVector30),c$ib.add(this.localPosition,c$j._tempVector30,this._localPosition),this.localPosition=this._localPosition):(c$ib.add(this.position,c$a,this._position),this.position=this._position)},c$b.rotate=function(c$a,c$b,c$c){var c$d;void 0===c$b&&(c$b=!0),void 0===c$c&&(c$c=!0),c$d=c$c?c$a:(c$ib.scale(c$a,Math.PI/180,c$j._tempVector30),c$j._tempVector30),c$cb.createFromYawPitchRoll(c$d.y,c$d.x,c$d.z,c$j._tempQuaternion0),c$b?(c$cb.multiply(this._localRotation,c$j._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(c$cb.multiply(c$j._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},c$b.lookAt=function(c$a,c$b,c$c){void 0===c$c&&(c$c=!1);var c$d,c$g=c$a.elements;if(c$c){if(c$d=this._localPosition.elements,Math.abs(c$d[0]-c$g[0])<c$ea.zeroTolerance&&Math.abs(c$d[1]-c$g[1])<c$ea.zeroTolerance&&Math.abs(c$d[2]-c$g[2])<c$ea.zeroTolerance)return;c$cb.lookAt(this._localPosition,c$a,c$b,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var c$h=this.position;if(c$d=c$h.elements,Math.abs(c$d[0]-c$g[0])<c$ea.zeroTolerance&&Math.abs(c$d[1]-c$g[1])<c$ea.zeroTolerance&&Math.abs(c$d[2]-c$g[2])<c$ea.zeroTolerance)return;c$cb.lookAt(c$h,c$a,c$b,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},c$q(0,c$b,"_isFrontFaceInvert",function(){var c$a=this.scale,c$b=c$a.x<0;return c$a.y<0&&(c$b=!c$b),c$a.z<0&&(c$b=!c$b),c$b}),c$q(0,c$b,"owner",function(){return this._owner}),c$q(0,c$b,"localRotation",function(){if(this._localQuaternionUpdate){var c$a=this._localRotationEuler.elements;c$cb.createFromYawPitchRoll(c$a[1]/c$j._angleToRandin,c$a[0]/c$j._angleToRandin,c$a[2]/c$j._angleToRandin,this._localRotation)}return this._localRotation},function(c$a){this._localRotation=c$a,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),c$q(0,c$b,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?c$ab.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(c$a){null===this._parent?c$a.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),c$ab.multiply(this._localMatrix,c$a,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=c$a,this._worldUpdate=!1}),c$q(0,c$b,"worldNeedUpdate",function(){return this._worldUpdate}),c$q(0,c$b,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(c$a){this._localMatrix=c$a,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),c$q(0,c$b,"dummy",function(){return this._dummy},function(c$a){this._dummy!==c$a&&(this._dummy&&(this._dummy._entity=null),c$a&&(c$a._entity=this),this._dummy=c$a)}),c$q(0,c$b,"localPosition",function(){return this._localPosition},function(c$a){this._localPosition=c$a,this._localUpdate=!0,this._onWorldPositionTransform()}),c$q(0,c$b,"position",function(){if(this._positionUpdate){if(null!=this._parent){var c$a=this._parent.position;c$ib.multiply(this._localPosition,this._parent.scale,c$j._tempVector30),c$ib.transformQuat(c$j._tempVector30,this._parent.rotation,c$j._tempVector30),c$ib.add(c$a,c$j._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(c$a){if(null!=this._parent){c$ib.subtract(c$a,this._parent.position,this._localPosition);var c$b=this._parent.scale.elements,c$c=c$b[0],c$d=c$b[1],c$g=c$b[2];if(1!==c$c||1!==c$d||1!==c$g){var c$h=c$j._tempVector30,c$i=c$h.elements;c$i[0]=1/c$c,c$i[1]=1/c$d,c$i[2]=1/c$g,c$ib.multiply(this._localPosition,c$h,this._localPosition)}this._parent.rotation.invert(c$j._tempQuaternion0),c$ib.transformQuat(this._localPosition,c$j._tempQuaternion0,this._localPosition)}else c$a.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=c$a,this._positionUpdate=!1}),c$q(0,c$b,"localScale",function(){return this._localScale},function(c$a){this._localScale=c$a,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),c$q(0,c$b,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(c$j._tempVector30);var c$a=c$j._tempVector30.elements,c$b=this._localRotationEuler.elements;c$b[0]=c$a[1]*c$j._angleToRandin,c$b[1]=c$a[0]*c$j._angleToRandin,c$b[2]=c$a[2]*c$j._angleToRandin}return this._localRotationEuler},function(c$a){this._localRotationEuler=c$a,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),c$q(0,c$b,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?c$cb.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(c$a){null!=this._parent?(this._parent.rotation.invert(c$j._tempQuaternion0),c$cb.multiply(c$a,c$j._tempQuaternion0,this._localRotation)):c$a.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=c$a,this._rotationUpdate=!1}),c$q(0,c$b,"scale",function(){return this._scaleUpdate&&(null!==this._parent?c$ib.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(c$a){if(null!==this._parent){var c$b=this._parent.scale.elements,c$c=c$j._tempVector30.elements;c$c[0]=1/c$b[0],c$c[1]=1/c$b[1],c$c[2]=1/c$b[2],c$ib.multiply(c$a,c$j._tempVector30,this._localScale)}else c$a.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=c$a,this._scaleUpdate=!1}),c$q(0,c$b,"rotationEuler",null,function(c$a){c$cb.createFromYawPitchRoll(c$a.y,c$a.x,c$a.z,this._rotation),this.rotation=this._rotation}),c$q(0,c$b,"forward",function(){var c$a=this.worldMatrix.elements;return this._forward.elements[0]=-c$a[8],this._forward.elements[1]=-c$a[9],this._forward.elements[2]=-c$a[10],this._forward}),c$q(0,c$b,"up",function(){var c$a=this.worldMatrix.elements;return this._up.elements[0]=c$a[4],this._up.elements[1]=c$a[5],this._up.elements[2]=c$a[6],this._up}),c$q(0,c$b,"right",function(){var c$a=this.worldMatrix.elements;return this._right.elements[0]=c$a[0],this._right.elements[1]=c$a[1],this._right.elements[2]=c$a[2],this._right}),c$q(0,c$b,"parent",function(){return this._parent},function(c$a){if(this._parent!==c$a){if(this._parent){var c$b=this._parent._childs,c$c=c$b.indexOf(this);c$b.splice(c$c,1)}c$a&&(c$a._childs.push(this),c$a&&this._onWorldTransform()),this._parent=c$a}}),c$n(c$j,["_tempVector30",function(){return this._tempVector30=new c$ib},"_tempVector31",function(){return this._tempVector31=new c$ib},"_tempVector32",function(){return this._tempVector32=new c$ib},"_tempVector33",function(){return this._tempVector33=new c$ib},"_tempQuaternion0",function(){return this._tempQuaternion0=new c$cb},"_tempMatrix0",function(){return this._tempMatrix0=new c$ab},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),c$j}(),c$zb=(function(c$a){function c$b(){this._rotation=0,this._matNeedUpdte=!1,c$b.__super.call(this),this._matrix=new c$ab,this._offset=new c$hb,this._tiling=new c$hb(1,1)}c$p(c$b,"laya.d3.core.TransformUV",c$h);var c$c=c$b.prototype;c$x.imps(c$c,{"laya.d3.core.IClone":!0}),c$c._updateMatrix=function(){c$b._tempOffsetV3.elements[0]=this._offset.x,c$b._tempOffsetV3.elements[1]=this._offset.y,c$cb.createFromYawPitchRoll(0,0,this._rotation,c$b._tempRotationQua),c$b._tempTitlingV3.elements[0]=this._tiling.x,c$b._tempTitlingV3.elements[1]=this._tiling.y,c$ab.createAffineTransformation(c$b._tempOffsetV3,c$b._tempRotationQua,c$b._tempTitlingV3,this._matrix)},c$c.cloneTo=function(c$a){c$a._matrix=this._matrix.clone(),c$a._offset=this._offset.clone(),c$a._rotation=this._rotation,c$a._tiling=this._tiling.clone()},c$c.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$q(0,c$c,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),c$q(0,c$c,"tiling",function(){return this._tiling},function(c$a){this._tiling=c$a,this._matNeedUpdte=!0}),c$q(0,c$c,"offset",function(){return this._offset},function(c$a){this._offset=c$a,this._matNeedUpdte=!0}),c$q(0,c$c,"rotation",function(){return this._rotation},function(c$a){this._rotation=c$a,this._matNeedUpdte=!0}),c$n(c$b,["_tempOffsetV3",function(){return this._tempOffsetV3=new c$ib(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new c$cb},"_tempTitlingV3",function(){return this._tempTitlingV3=new c$ib(1,1,1)}])}(),function(c$c){function c$a(){this.x=NaN,this.y=NaN,this.z=NaN,c$a.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}c$p(c$a,"laya.d3.core.particleShuriKen.module.shape.BoxShape",c$c);var c$b=c$a.prototype;c$b._getShapeBoundBox=function(c$a){var c$b=c$a.min.elements;c$b[0]=.5*-this.x,c$b[1]=.5*-this.y,c$b[2]=.5*-this.z;var c$c=c$a.max.elements;c$c[0]=.5*this.x,c$c[1]=.5*this.y,c$c[2]=.5*this.z},c$b._getSpeedBoundBox=function(c$a){var c$b=c$a.min.elements;c$b[0]=0,c$b[1]=0,c$b[2]=0;var c$c=c$a.max.elements;c$c[0]=0,c$c[1]=1,c$c[2]=0},c$b.generatePositionAndDirection=function(c$a,c$b,c$c,c$d){var c$g=c$a.elements,c$h=c$b.elements;c$c?(c$c.seed=c$d[16],c$T._randomPointInsideHalfUnitBox(c$a,c$c),c$d[16]=c$c.seed):c$T._randomPointInsideHalfUnitBox(c$a),c$g[0]=this.x*c$g[0],c$g[1]=this.y*c$g[1],c$g[2]=this.z*c$g[2],this.randomDirection?c$c?(c$c.seed=c$d[17],c$T._randomPointUnitSphere(c$b,c$c),c$d[17]=c$c.seed):c$T._randomPointUnitSphere(c$b):(c$h[0]=0,c$h[1]=0,c$h[2]=1)},c$b.cloneTo=function(c$a){c$c.prototype.cloneTo.call(this,c$a);var c$b=c$a;c$b.x=this.x,c$b.y=this.y,c$b.z=this.z,c$b.randomDirection=this.randomDirection}}(c$O),function(c$c){function c$i(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,c$i.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}c$p(c$i,"laya.d3.core.particleShuriKen.module.shape.CircleShape",c$c);var c$a=c$i.prototype;c$a._getShapeBoundBox=function(c$a){var c$b=c$a.min.elements;c$b[0]=c$b[2]=-this.radius,c$b[1]=0;var c$c=c$a.max.elements;c$c[0]=c$c[2]=this.radius,c$c[1]=0},c$a._getSpeedBoundBox=function(c$a){var c$b=c$a.min.elements;c$b[0]=c$b[1]=-1,c$b[2]=0;var c$c=c$a.max.elements;c$c[0]=c$c[1]=1,c$c[2]=0},c$a.generatePositionAndDirection=function(c$a,c$b,c$c,c$d){var c$g=c$a.elements,c$h=c$i._tempPositionPoint.elements;c$c?(c$c.seed=c$d[16],this.emitFromEdge?c$T._randomPointUnitArcCircle(this.arc,c$i._tempPositionPoint,c$c):c$T._randomPointInsideUnitArcCircle(this.arc,c$i._tempPositionPoint,c$c),c$d[16]=c$c.seed):this.emitFromEdge?c$T._randomPointUnitArcCircle(this.arc,c$i._tempPositionPoint):c$T._randomPointInsideUnitArcCircle(this.arc,c$i._tempPositionPoint),c$g[0]=-c$h[0],c$g[1]=c$h[1],c$g[2]=0,c$ib.scale(c$a,this.radius,c$a),this.randomDirection?c$c?(c$c.seed=c$d[17],c$T._randomPointUnitSphere(c$b,c$c),c$d[17]=c$c.seed):c$T._randomPointUnitSphere(c$b):c$a.cloneTo(c$b)},c$a.cloneTo=function(c$a){c$c.prototype.cloneTo.call(this,c$a);var c$b=c$a;c$b.radius=this.radius,c$b.arc=this.arc,c$b.emitFromEdge=this.emitFromEdge,c$b.randomDirection=this.randomDirection},c$n(c$i,["_tempPositionPoint",function(){return this._tempPositionPoint=new c$hb}])}(c$O),function(c$c){function c$o(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,c$o.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}c$p(c$o,"laya.d3.core.particleShuriKen.module.shape.ConeShape",c$c);var c$a=c$o.prototype;c$a._getShapeBoundBox=function(c$a){var c$b=this.radius+this.length*Math.sin(this.angle),c$c=this.length*Math.cos(this.angle),c$d=c$a.min.elements;c$d[0]=c$d[1]=-c$b,c$d[2]=0;var c$g=c$a.max.elements;c$g[0]=c$g[1]=c$b,c$g[2]=c$c},c$a._getSpeedBoundBox=function(c$a){var c$b=Math.sin(this.angle),c$c=c$a.min.elements;c$c[0]=c$c[1]=-c$b,c$c[2]=0;var c$d=c$a.max.elements;c$d[0]=c$c[1]=c$b,c$d[2]=1},c$a.generatePositionAndDirection=function(c$a,c$b,c$c,c$d){var c$g,c$h=c$a.elements,c$i=c$b.elements,c$j=c$o._tempPositionPoint.elements,c$k=NaN,c$l=NaN,c$m=Math.cos(this.angle),c$n=Math.sin(this.angle);switch(this.emitType){case 0:c$c?(c$c.seed=c$d[16],c$T._randomPointInsideUnitCircle(c$o._tempPositionPoint,c$c),c$d[16]=c$c.seed):c$T._randomPointInsideUnitCircle(c$o._tempPositionPoint),c$k=c$j[0],c$l=c$j[1],c$h[0]=c$k*this.radius,c$h[1]=c$l*this.radius,c$h[2]=0,this.randomDirection?(c$c?(c$c.seed=c$d[17],c$T._randomPointInsideUnitCircle(c$o._tempDirectionPoint,c$c),c$d[17]=c$c.seed):c$T._randomPointInsideUnitCircle(c$o._tempDirectionPoint),c$g=c$o._tempDirectionPoint.elements,c$i[0]=c$g[0]*c$n,c$i[1]=c$g[1]*c$n):(c$i[0]=c$k*c$n,c$i[1]=c$l*c$n),c$i[2]=c$m;break;case 1:c$c?(c$c.seed=c$d[16],c$T._randomPointUnitCircle(c$o._tempPositionPoint,c$c),c$d[16]=c$c.seed):c$T._randomPointUnitCircle(c$o._tempPositionPoint),c$k=c$j[0],c$l=c$j[1],c$h[0]=c$k*this.radius,c$h[1]=c$l*this.radius,c$h[2]=0,this.randomDirection?(c$c?(c$c.seed=c$d[17],c$T._randomPointInsideUnitCircle(c$o._tempDirectionPoint,c$c),c$d[17]=c$c.seed):c$T._randomPointInsideUnitCircle(c$o._tempDirectionPoint),c$g=c$o._tempDirectionPoint.elements,c$i[0]=c$g[0]*c$n,c$i[1]=c$g[1]*c$n):(c$i[0]=c$k*c$n,c$i[1]=c$l*c$n),c$i[2]=c$m;break;case 2:c$c?(c$c.seed=c$d[16],c$T._randomPointInsideUnitCircle(c$o._tempPositionPoint,c$c)):c$T._randomPointInsideUnitCircle(c$o._tempPositionPoint),c$k=c$j[0],c$l=c$j[1],c$h[0]=c$k*this.radius,c$h[1]=c$l*this.radius,c$i[c$h[2]=0]=c$k*c$n,c$i[1]=c$l*c$n,c$i[2]=c$m,c$ib.normalize(c$b,c$b),c$c?(c$ib.scale(c$b,this.length*c$c.getFloat(),c$b),c$d[16]=c$c.seed):c$ib.scale(c$b,this.length*Math.random(),c$b),c$ib.add(c$a,c$b,c$a),this.randomDirection&&(c$c?(c$c.seed=c$d[17],c$T._randomPointUnitSphere(c$b,c$c),c$d[17]=c$c.seed):c$T._randomPointUnitSphere(c$b));break;case 3:c$c?(c$c.seed=c$d[16],c$T._randomPointUnitCircle(c$o._tempPositionPoint,c$c)):c$T._randomPointUnitCircle(c$o._tempPositionPoint),c$k=c$j[0],c$l=c$j[1],c$h[0]=c$k*this.radius,c$h[1]=c$l*this.radius,c$i[c$h[2]=0]=c$k*c$n,c$i[1]=c$l*c$n,c$i[2]=c$m,c$ib.normalize(c$b,c$b),c$c?(c$ib.scale(c$b,this.length*c$c.getFloat(),c$b),c$d[16]=c$c.seed):c$ib.scale(c$b,this.length*Math.random(),c$b),c$ib.add(c$a,c$b,c$a),this.randomDirection&&(c$c?(c$c.seed=c$d[17],c$T._randomPointUnitSphere(c$b,c$c),c$d[17]=c$c.seed):c$T._randomPointUnitSphere(c$b));break;default:throw new Error("ConeShape:emitType is invalid.")}},c$a.cloneTo=function(c$a){c$c.prototype.cloneTo.call(this,c$a);var c$b=c$a;c$b.angle=this.angle,c$b.radius=this.radius,c$b.length=this.length,c$b.emitType=this.emitType,c$b.randomDirection=this.randomDirection},c$n(c$o,["_tempPositionPoint",function(){return this._tempPositionPoint=new c$hb},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new c$hb}])}(c$O),function(c$c){function c$a(){this.radius=NaN,this.emitFromShell=!1,c$a.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}c$p(c$a,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",c$c);var c$b=c$a.prototype;c$b._getShapeBoundBox=function(c$a){var c$b=c$a.min.elements;c$b[0]=c$b[1]=c$b[2]=-this.radius;var c$c=c$a.max.elements;c$c[0]=c$c[1]=this.radius,c$c[2]=0},c$b._getSpeedBoundBox=function(c$a){var c$b=c$a.min.elements;c$b[0]=c$b[1]=-1,c$b[2]=0;var c$c=c$a.max.elements;c$c[0]=c$c[1]=c$c[2]=1},c$b.generatePositionAndDirection=function(c$a,c$b,c$c,c$d){var c$g=c$a.elements;c$c?(c$c.seed=c$d[16],this.emitFromShell?c$T._randomPointUnitSphere(c$a,c$c):c$T._randomPointInsideUnitSphere(c$a,c$c),c$d[16]=c$c.seed):this.emitFromShell?c$T._randomPointUnitSphere(c$a):c$T._randomPointInsideUnitSphere(c$a),c$ib.scale(c$a,this.radius,c$a);var c$h=c$g[2];c$h<0&&(c$g[2]=-1*c$h),this.randomDirection?c$c?(c$c.seed=c$d[17],c$T._randomPointUnitSphere(c$b,c$c),c$d[17]=c$c.seed):c$T._randomPointUnitSphere(c$b):c$a.cloneTo(c$b)},c$b.cloneTo=function(c$a){c$c.prototype.cloneTo.call(this,c$a);var c$b=c$a;c$b.radius=this.radius,c$b.emitFromShell=this.emitFromShell,c$b.randomDirection=this.randomDirection}}(c$O),function(c$c){function c$a(){this.radius=NaN,this.emitFromShell=!1,c$a.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}c$p(c$a,"laya.d3.core.particleShuriKen.module.shape.SphereShape",c$c);var c$b=c$a.prototype;c$b._getShapeBoundBox=function(c$a){var c$b=c$a.min.elements;c$b[0]=c$b[1]=c$b[2]=-this.radius;var c$c=c$a.max.elements;c$c[0]=c$c[1]=c$c[2]=this.radius},c$b._getSpeedBoundBox=function(c$a){var c$b=c$a.min.elements;c$b[0]=c$b[1]=c$b[2]=-1;var c$c=c$a.max.elements;c$c[0]=c$c[1]=c$c[2]=1},c$b.generatePositionAndDirection=function(c$a,c$b,c$c,c$d){c$c?(c$c.seed=c$d[16],this.emitFromShell?c$T._randomPointUnitSphere(c$a,c$c):c$T._randomPointInsideUnitSphere(c$a,c$c),c$d[16]=c$c.seed):this.emitFromShell?c$T._randomPointUnitSphere(c$a):c$T._randomPointInsideUnitSphere(c$a),c$ib.scale(c$a,this.radius,c$a),this.randomDirection?c$c?(c$c.seed=c$d[17],c$T._randomPointUnitSphere(c$b,c$c),c$d[17]=c$c.seed):c$T._randomPointUnitSphere(c$b):c$a.cloneTo(c$b)},c$b.cloneTo=function(c$a){c$c.prototype.cloneTo.call(this,c$a);var c$b=c$a;c$b.radius=this.radius,c$b.emitFromShell=this.emitFromShell,c$b.randomDirection=this.randomDirection}}(c$O),function(c$a){function c$b(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,c$b.__super.call(this)}return c$p(c$b,"laya.d3.core.render.SubMeshRenderElement",c$W),c$b}()),c$Ab=function(c$a){function c$s(c$a,c$b,c$c,c$d,c$g,c$h){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=c$a,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[c$pb.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[c$Vb.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[c$Vb.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[c$Eb.SHADERDEFINE_ALPHATEST]="ALPHATEST";c$s.__super.call(this,c$a,c$b,c$c,null,{}),this._attributeMap=c$d;var c$i;for(c$i in c$g){var c$j=c$g[c$i];switch(c$j[1]){case 0:this._renderElementUniformMap[c$i]=c$j[0];break;case 1:this._materialUniformMap[c$i]=c$j[0];break;case 2:this._spriteUniformMap[c$i]=c$j[0];break;case 3:this._cameraUniformMap[c$i]=c$j[0];break;case 4:this._sceneUniformMap[c$i]=c$j[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}c$p(c$s,"laya.d3.shader.ShaderCompile3D",c$v);var c$b=c$s.prototype;return c$b._definesToNameDic=function(c$a,c$b){for(var c$c={},c$d=1,c$g=0;c$g<32&&!(c$a<(c$d=1<<c$g));c$g++)if(c$a&c$d){var c$h=c$b[c$d];c$h&&(c$c[c$h]="")}return c$c},c$b.withCompile=function(c$a,c$b,c$c,c$d){var c$g,c$h,c$i;if(c$h=this.sharders[c$a])if(c$i=c$h[c$b]){if(c$g=c$i[c$c])return c$g}else c$i=c$h[c$b]=[];else c$i=(c$h=this.sharders[c$a]=[])[c$b]=[];var c$j,c$k=this._definesToNameDic(c$a,c$s._globalInt2name),c$l=this._definesToNameDic(c$b,this._spriteInt2name),c$m=this._definesToNameDic(c$c,this._materialInt2name),c$n={},c$o="";if(c$k)for(c$j in c$k)c$o+="#define "+c$j+"\n",c$n[c$j]=!0;if(c$l)for(c$j in c$l)c$o+="#define "+c$j+"\n",c$n[c$j]=!0;if(c$m)for(c$j in c$m)c$o+="#define "+c$j+"\n",c$n[c$j]=!0;var c$p=c$Lb.nameKey.getName(this._name)+" compile ("+c$a+","+c$b+","+c$c+")",c$q=this._VS.toscript(c$n,[]),c$r=this._PS.toscript(c$n,[]);c$H.now();if(c$g=c$Lb.create(c$o+c$q.join("\n"),c$o+c$r.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,c$d,c$p),c$i[c$c]=c$g,laya.d3.shader.ShaderCompile3D.debugMode)c$H.now();return c$g},c$b.precompileShaderWithShaderDefine=function(c$a,c$b,c$c){this.withCompile(c$a,c$b,c$c,!0)},c$b.addMaterialDefines=function(c$a){var c$b=c$a.defines;for(var c$c in c$b){var c$d=c$b[c$c],c$g=parseInt(c$c);this._materialInt2name[c$g]=c$d,this._materialName2Int[c$d]=c$g}},c$b.addSpriteDefines=function(c$a){var c$b=c$a.defines;for(var c$c in c$b){var c$d=c$b[c$c],c$g=parseInt(c$c);this._spriteInt2name[c$g]=c$d,this._spriteName2Int[c$d]=c$g}},c$b.getMaterialDefineByName=function(c$a){return this._materialName2Int[c$a]},c$b.registerMaterialDefine=function(c$a){var c$b=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[c$b]=c$a,this._materialName2Int[c$a]=c$b},c$b.registerSpriteDefine=function(c$a){var c$b=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[c$b]=c$a,this._spriteName2Int[c$a]=c$b},c$s._globalRegDefine=function(c$a,c$b){c$s._globalInt2name[c$b]=c$a},c$s.add=function(c$a,c$b,c$c,c$d,c$g){return laya.d3.shader.ShaderCompile3D._preCompileShader[c$a]=new c$s(c$a,c$b,c$c,c$d,c$g,c$v.includes)},c$s.get=function(c$a){return laya.d3.shader.ShaderCompile3D._preCompileShader[c$Lb.nameKey.getID(c$a)]},c$s._preCompileShader={},c$s._globalInt2name=[],c$s.debugMode=!1,c$s.SHADERDEFINE_HIGHPRECISION=1,c$s.SHADERDEFINE_FOG=4,c$s.SHADERDEFINE_DIRECTIONLIGHT=8,c$s.SHADERDEFINE_POINTLIGHT=16,c$s.SHADERDEFINE_SPOTLIGHT=32,c$s.SHADERDEFINE_UV0=64,c$s.SHADERDEFINE_COLOR=128,c$s.SHADERDEFINE_UV1=256,c$s.SAHDERDEFINE_DEPTHFOG=131072,c$s}(),c$Bb=function(c$a){function c$q(){c$q.__super.call(this)}c$p(c$q,"laya.d3.graphics.MeshSprite3DStaticBatchManager",c$da);var c$b=c$q.prototype;return c$b._getStaticBatch=function(c$a,c$b,c$c,c$d){var c$g,c$h;return c$h=c$a?c$a.id.toString()+c$c.id.toString()+c$b.id.toString()+c$d.toString():c$c.id.toString()+c$b.id.toString()+c$d.toString(),this._staticBatches[c$h]?c$g=this._staticBatches[c$h]:this._staticBatches[c$h]=c$g=new c$Cb(c$h,this,c$a,c$b,c$c),c$g},c$b._initStaticBatchs=function(c$a){var c$b,c$c;this._initBatchRenderElements.sort(c$q._sortPrepareStaticBatch);for(var c$d,c$g=!1,c$h=0,c$i=0,c$j=this._initBatchRenderElements.length;c$i<c$j;c$i++){var c$k,c$l=this._initBatchRenderElements[c$i],c$m=c$l.renderObj._getVertexBuffer(0);c$l._sprite3D;if(c$c===c$m.vertexDeclaration&&c$b===c$l._material)if(c$g)c$d._addCombineBatchRenderObjTest(c$l)?(c$k=c$l._staticBatch)!==c$d&&(c$k&&c$k._deleteCombineBatchRenderObj(c$l),c$d._addCombineBatchRenderObj(c$l)):(c$g=!1,c$h++);else{var c$n=this._initBatchRenderElements[c$i-1],c$o=c$n.renderObj,c$p=c$l.renderObj;c$g=!(65535<c$o._getVertexBuffer().vertexCount+c$p._getVertexBuffer().vertexCount)&&(c$d=this._getStaticBatch(c$a,c$c,c$b,c$h),(c$k=c$n._staticBatch)!==c$d&&(c$k&&c$k._deleteCombineBatchRenderObj(c$n),c$d._addCombineBatchRenderObj(c$n)),(c$k=c$l._staticBatch)!==c$d&&(c$k&&c$k._deleteCombineBatchRenderObj(c$l),c$d._addCombineBatchRenderObj(c$l)),!0)}else c$g=!1,c$h=0;c$b=c$l._material,c$c=c$m.vertexDeclaration}},c$q._sortPrepareStaticBatch=function(c$a,c$b){var c$c=c$a._render,c$d=c$b._render,c$g=c$c.lightmapIndex-c$d.lightmapIndex;if(0!=c$g)return c$g;var c$h=c$c.receiveShadow-c$d.receiveShadow;if(0!=c$h)return c$h;var c$i=c$a._mainSortID-c$b._mainSortID;return 0==c$i?c$a.renderObj.triangleCount-c$b.renderObj.triangleCount:c$i},c$q}(),c$Cb=function(c$a){function c$h(c$a,c$b,c$c,c$d,c$g){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,c$h.__super.call(this,c$a,c$b,c$c),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=c$d,this._material=c$g}c$p(c$h,"laya.d3.graphics.SubMeshStaticBatch",c$ga);var c$b=c$h.prototype;return c$b._compareBatchRenderElement=function(c$a,c$b){return c$a._batchIndexStart>c$b._batchIndexStart},c$b._addCombineBatchRenderObjTest=function(c$a){var c$b=c$a.renderObj._vertexCount;return!(65535<(0<c$b?this._currentCombineVertexCount+c$b:this._currentCombineVertexCount+c$a.renderObj._getVertexBuffer().vertexCount))},c$b._addCombineBatchRenderObj=function(c$a){var c$b=c$a.renderObj,c$c=c$b._vertexCount;this._initBatchRenderElements.push(c$a),c$a._staticBatch=this,0<c$c?(this._currentCombineIndexCount+=c$b._indexCount,this._currentCombineVertexCount+=c$c):(this._currentCombineIndexCount=this._currentCombineIndexCount+c$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+c$b._getVertexBuffer().vertexCount),this._needFinishCombine=!0},c$b._deleteCombineBatchRenderObj=function(c$a){var c$b=c$a.renderObj,c$c=this._initBatchRenderElements.indexOf(c$a);if(-1!==c$c){this._initBatchRenderElements.splice(c$c,1),c$a._staticBatch=null;var c$d=c$b._vertexCount;0<c$d?(this._currentCombineIndexCount=this._currentCombineIndexCount-c$b._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-c$d):(this._currentCombineIndexCount=this._currentCombineIndexCount-c$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-c$b._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},c$b._finishInit=function(){if(this._needFinishCombine){var c$a=0,c$b=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var c$c=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),c$d=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=c$Ob.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=c$Nb.create("ushort",this._currentCombineIndexCount,35044);for(var c$g=0,c$h=this._initBatchRenderElements.length;c$g<c$h;c$g++){var c$i=this._initBatchRenderElements[c$g],c$j=c$i.renderObj,c$k=c$j._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,c$i._sprite3D),c$l=c$j.getIndices(),c$m=c$i._sprite3D.transform._isFrontFaceInvert,c$n=c$a/(this._vertexDeclaration.vertexStride/4)-c$j._vertexStart,c$o=c$b,c$p=c$o+c$l.length;c$i._batchIndexStart=c$o,c$i._batchIndexEnd=c$p,c$d.set(c$l,c$b);var c$q=0;if(c$m)for(c$q=c$o;c$q<c$p;c$q+=3){c$d[c$q]=c$n+c$d[c$q];var c$r=c$d[c$q+1],c$s=c$d[c$q+2];c$d[c$q+1]=c$n+c$s,c$d[c$q+2]=c$n+c$r}else for(c$q=c$o;c$q<c$p;c$q+=3)c$d[c$q]=c$n+c$d[c$q],c$d[c$q+1]=c$n+c$d[c$q+1],c$d[c$q+2]=c$n+c$d[c$q+2];c$b+=c$l.length,c$c.set(c$k,c$a),c$a+=c$k.length}this._vertexBuffer.setData(c$c),this._indexBuffer.setData(c$d),this._needFinishCombine=!1}},c$b._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new c$zb)},c$b._getRenderElement=function(c$a,c$b,c$c){for(var c$d,c$g,c$h=this._batchRenderElements.length,c$i=!0,c$j=0;c$j<c$h;c$j++){var c$k,c$l,c$m=(c$g=this._batchRenderElements[c$j])._sprite3D._render;if(0!==c$j&&(c$i=(c$k=(c$d=this._batchRenderElements[c$j-1])._sprite3D._render).lightmapIndex!==c$m.lightmapIndex||c$k.receiveShadow!==c$m.receiveShadow||c$d._batchIndexEnd!==c$g._batchIndexStart),c$i){(c$l=this._getCombineRenderElementFromPool()).renderObj=this,c$l._material=this._material,c$l._batchIndexStart=c$g._batchIndexStart,c$l._batchIndexEnd=c$g._batchIndexEnd;var c$n=c$m.lightmapIndex,c$o=c$n+1,c$p=this._batchOwnerIndices[c$o];c$p||(c$p=this._batchOwnerIndices[c$o]=[]);var c$q,c$r=c$p[c$g._render.receiveShadow?1:0];void 0===c$r?(c$p[c$m.receiveShadow?1:0]=this._batchOwners.length,(c$q=new c$Xb(null,"StaticBatchMeshSprite3D"))._scene=c$b,c$q._transform=this._rootOwner?this._rootOwner._transform:null,c$q._render.lightmapIndex=c$n,c$q._render.receiveShadow=c$g._render.receiveShadow,this._batchOwners.push(c$q)):c$q=this._batchOwners[c$r],c$q._render._renderUpdate(c$c),c$l._sprite3D=c$q,c$a.push(c$l)}else c$l._batchIndexEnd=c$g._batchIndexEnd}},c$b._beforeRender=function(c$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},c$b._render=function(c$a){var c$b=c$a.renderElement,c$c=c$b._batchIndexStart,c$d=c$b._batchIndexEnd-c$c;c$F.mainContext.drawElements(4,c$d,5123,2*c$c),c$A.drawCall++,c$A.trianglesFaces+=c$d/3},c$b.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},c$b._getVertexBuffer=function(c$a){return void 0===c$a&&(c$a=0),this._vertexBuffer},c$h}(),c$Db=function(c$a){function c$b(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,c$b.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}c$p(c$b,"laya.d3.core.ComponentNode",c$l);var c$c=c$b.prototype;return c$c.addComponent=function(c$a){var c$b,c$c=this._componentsMap.indexOf(c$a);if(-1===c$c)c$b=[],this._componentsMap.push(c$a),this._typeComponentsIndices.push(c$b);else if(c$b=this._typeComponentsIndices[c$c],this._components[c$b[0]].isSingleton)throw new Error("无法单实例创建"+c$a+"组件，"+c$a+"组件已存在！");var c$d=c$g.getInstance(c$a);return c$b.push(this._components.length),this._components.push(c$d),c$d instanceof laya.d3.component.Script&&this._scripts.push(c$d),c$d._initialize(this),c$d},c$c._removeComponent=function(c$a,c$b){var c$c=this._typeComponentsIndices[c$a],c$d=c$c[c$b],c$g=this._components[c$d];this._components.splice(c$d,1),c$g instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(c$g),1),c$c.splice(c$b,1),0===c$c.length&&(this._typeComponentsIndices.splice(c$a,1),this._componentsMap.splice(c$a,1));for(var c$h=0,c$i=this._componentsMap.length;c$h<c$i;c$h++)for(var c$j=(c$c=this._typeComponentsIndices[c$h]).length-1;0<=c$j;c$j--){var c$k=c$c[c$j];if(!(c$d<c$k))break;c$c[c$j]=--c$k}c$g._destroy()},c$c.getComponentByType=function(c$a,c$b){void 0===c$b&&(c$b=0);var c$c=this._componentsMap.indexOf(c$a);return-1===c$c?null:this._components[this._typeComponentsIndices[c$c][c$b]]},c$c.getComponentsByType=function(c$a,c$b){var c$c=this._componentsMap.indexOf(c$a);if(-1!==c$c){var c$d=this._typeComponentsIndices[c$c],c$g=c$d.length;c$b.length=c$g;for(var c$h=0;c$h<c$g;c$h++)c$b[c$h]=this._components[c$d[c$h]]}else c$b.length=0},c$c.getComponentByIndex=function(c$a){return this._components[c$a]},c$c.removeComponentByType=function(c$a,c$b){void 0===c$b&&(c$b=0);var c$c=this._componentsMap.indexOf(c$a);-1!==c$c&&this._removeComponent(c$c,c$b)},c$c.removeComponentsByType=function(c$a){var c$b=this._componentsMap.indexOf(c$a);if(-1!==c$b)for(var c$c=this._typeComponentsIndices[c$b],c$d=0,c$g=c$c.length;c$d<c$g;c$c.length<c$g?c$g--:c$d++)this._removeComponent(c$b,c$d)},c$c.removeAllComponent=function(){for(var c$a=0,c$b=this._componentsMap.length;c$a<c$b;this._componentsMap.length<c$b?c$b--:c$a++)this.removeComponentsByType(this._componentsMap[c$a])},c$c._updateComponents=function(c$a){for(var c$b=0,c$c=this._components.length;c$b<c$c;c$b++){var c$d=this._components[c$b];!c$d.started&&(c$d._start(c$a),c$d.started=!0),c$d.enable&&c$d._update(c$a)}},c$c._lateUpdateComponents=function(c$a){for(var c$b=0;c$b<this._components.length;c$b++){var c$c=this._components[c$b];!c$c.started&&(c$c._start(c$a),c$c.started=!0),c$c.enable&&c$c._lateUpdate(c$a)}},c$c._preRenderUpdateComponents=function(c$a){for(var c$b=0;c$b<this._components.length;c$b++){var c$c=this._components[c$b];!c$c.started&&(c$c._start(c$a),c$c.started=!0),c$c.enable&&c$c._preRenderUpdate(c$a)}},c$c._postRenderUpdateComponents=function(c$a){for(var c$b=0;c$b<this._components.length;c$b++){var c$c=this._components[c$b];!c$c.started&&(c$c._start(c$a),c$c.started=!0),c$c.enable&&c$c._postRenderUpdate(c$a)}},c$b}(),c$Eb=function(c$d){function c$a(){c$a.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new c$ob,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new c$jb(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}c$p(c$a,"laya.d3.core.material.BaseMaterial",c$d);var c$b=c$a.prototype;return c$x.imps(c$b,{"laya.d3.core.IClone":!0}),c$b._addShaderDefine=function(c$a){this._shaderDefineValue|=c$a},c$b._removeShaderDefine=function(c$a){this._shaderDefineValue&=~c$a},c$b._addDisablePublicShaderDefine=function(c$a){this._disablePublicShaderDefine|=c$a},c$b._removeDisablePublicShaderDefine=function(c$a){this._disablePublicShaderDefine&=~c$a},c$b._setBuffer=function(c$a,c$b){this._shaderValues.setValue(c$a,c$b),this._values[c$a]=c$b},c$b._getBuffer=function(c$a){return this._values[c$a]},c$b._setMatrix4x4=function(c$a,c$b){this._shaderValues.setValue(c$a,c$b?c$b.elements:null),this._values[c$a]=c$b},c$b._getMatrix4x4=function(c$a){return this._values[c$a]},c$b._setInt=function(c$a,c$b){this._shaderValues.setValue(c$a,c$b),this._values[c$a]=c$b},c$b._getInt=function(c$a){return this._values[c$a]},c$b._setNumber=function(c$a,c$b){this._shaderValues.setValue(c$a,c$b),this._values[c$a]=c$b},c$b._getNumber=function(c$a){return this._values[c$a]},c$b._setBool=function(c$a,c$b){this._shaderValues.setValue(c$a,c$b),this._values[c$a]=c$b},c$b._getBool=function(c$a){return this._values[c$a]},c$b._setVector2=function(c$a,c$b){this._shaderValues.setValue(c$a,c$b?c$b.elements:null),this._values[c$a]=c$b},c$b._getVector2=function(c$a){return this._values[c$a]},c$b._setColor=function(c$a,c$b){this._shaderValues.setValue(c$a,c$b?c$b.elements:null),this._values[c$a]=c$b},c$b._getColor=function(c$a){return this._values[c$a]},c$b._setTexture=function(c$a,c$b){var c$c=this._values[c$a];this._values[c$a]=c$b,this._shaderValues.setValue(c$a,c$b),0<this.referenceCount&&(c$c&&c$c._removeReference(),c$b&&c$b._addReference())},c$b._getTexture=function(c$a){return this._values[c$a]},c$b._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},c$b._getShader=function(c$a,c$b,c$c){var c$d=(c$a|c$b)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(c$d,c$c,this._shaderDefineValue),this._shader},c$b._setRenderStateBlendDepth=function(){var c$a=c$F.mainContext;switch(c$G.setDepthMask(c$a,this.depthWrite),0===this.depthTest?c$G.setDepthTest(c$a,!1):(c$G.setDepthTest(c$a,!0),c$G.setDepthFunc(c$a,this.depthTest)),this.blend){case 0:c$G.setBlend(c$a,!1);break;case 1:c$G.setBlend(c$a,!0),c$G.setBlendFunc(c$a,this.srcBlend,this.dstBlend);break;case 2:c$G.setBlend(c$a,!0)}},c$b._setRenderStateFrontFace=function(c$a,c$b){var c$c=c$F.mainContext,c$d=0;switch(this.cull){case 0:c$G.setCullFace(c$c,!1);break;case 1:c$G.setCullFace(c$c,!0),c$d=c$a?c$b&&c$b._isFrontFaceInvert?2305:2304:c$b&&c$b._isFrontFaceInvert?2304:2305,c$G.setFrontFace(c$c,c$d);break;case 2:c$G.setCullFace(c$c,!0),c$d=c$a?c$b&&c$b._isFrontFaceInvert?2304:2305:c$b&&c$b._isFrontFaceInvert?2305:2304,c$G.setFrontFace(c$c,c$d)}},c$b.onAsynLoaded=function(c$a,c$b,c$c){var c$d=c$b[0],c$g=c$b[1];switch(c$d.version){case"LAYAMATERIAL:01":var c$h=0,c$i=0,c$j=c$d.props;for(var c$k in c$j)switch(c$k){case"vectors":var c$l=c$j[c$k];for(c$h=0,c$i=c$l.length;c$h<c$i;c$h++){var c$m=c$l[c$h],c$n=c$m.value;switch(c$n.length){case 2:this[c$m.name]=new c$hb(c$n[0],c$n[1]);break;case 3:this[c$m.name]=new c$ib(c$n[0],c$n[1],c$n[2]);break;case 4:this[c$m.name]=new c$jb(c$n[0],c$n[1],c$n[2],c$n[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var c$o=c$j[c$k];for(c$h=0,c$i=c$o.length;c$h<c$i;c$h++){var c$p=c$o[c$h],c$q=c$p.path;c$q&&(this[c$p.name]=c$t.getRes(c$g[c$q]))}break;case"defines":var c$r=c$j[c$k];for(c$h=0,c$i=c$r.length;c$h<c$i;c$h++){var c$s=this._shaderCompile.getMaterialDefineByName(c$r[c$h]);this._addShaderDefine(c$s)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[c$k]=c$j[c$k];break;case"renderQueue":switch(c$j[c$k]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[c$k]=c$j[c$k]}break;case"LAYAMATERIAL:02":for(c$k in c$j=c$d.props)switch(c$k){case"vectors":for(c$h=0,c$i=(c$l=c$j[c$k]).length;c$h<c$i;c$h++)switch((c$n=(c$m=c$l[c$h]).value).length){case 2:this[c$m.name]=new c$hb(c$n[0],c$n[1]);break;case 3:this[c$m.name]=new c$ib(c$n[0],c$n[1],c$n[2]);break;case 4:this[c$m.name]=new c$jb(c$n[0],c$n[1],c$n[2],c$n[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(c$h=0,c$i=(c$o=c$j[c$k]).length;c$h<c$i;c$h++)(c$q=(c$p=c$o[c$h]).path)&&(this[c$p.name]=c$t.getRes(c$g[c$q]));break;case"defines":for(c$h=0,c$i=(c$r=c$j[c$k]).length;c$h<c$i;c$h++)c$s=this._shaderCompile.getMaterialDefineByName(c$r[c$h]),this._addShaderDefine(c$s);break;default:this[c$k]=c$j[c$k]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},c$b._addReference=function(){c$d.prototype._addReference.call(this);for(var c$a=0,c$b=this._values.length;c$a<c$b;c$a++){var c$c=this._values[c$a];c$c&&c$c instanceof laya.d3.resource.BaseTexture&&c$c._addReference()}},c$b._removeReference=function(){c$d.prototype._removeReference.call(this);for(var c$a=0,c$b=this._values.length;c$a<c$b;c$a++){var c$c=this._values[c$a];c$c&&c$c instanceof laya.d3.resource.BaseTexture&&c$c._removeReference()}},c$b.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},c$b.setShaderName=function(c$a){var c$b=c$Lb.nameKey.getID(c$a);if(-1===c$b)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=c$Ab._preCompileShader[c$b]},c$b.cloneTo=function(c$a){var c$b=c$a;c$b.name=this.name,c$b.cull=this.cull,c$b.blend=this.blend,c$b.srcBlend=this.srcBlend,c$b.dstBlend=this.dstBlend,c$b.srcBlendRGB=this.srcBlendRGB,c$b.dstBlendRGB=this.dstBlendRGB,c$b.srcBlendAlpha=this.srcBlendAlpha,c$b.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(c$b.blendConstColor),c$b.blendEquation=this.blendEquation,c$b.blendEquationRGB=this.blendEquationRGB,c$b.blendEquationAlpha=this.blendEquationAlpha,c$b.depthTest=this.depthTest,c$b.depthWrite=this.depthWrite,c$b.renderQueue=this.renderQueue,c$b._shader=this._shader,c$b._disablePublicShaderDefine=this._disablePublicShaderDefine,c$b._shaderDefineValue=this._shaderDefineValue;var c$c,c$d=0,c$g=c$b._shaderValues;c$b._shaderValues.data.length=this._shaderValues.data.length;var c$h=this._values.length,c$i=c$b._values;for(c$d=0,c$c=c$i.length=c$h;c$d<c$c;c$d++){var c$j=this._values[c$d];if(c$j)if("number"==typeof c$j)c$i[c$d]=c$j,c$g.data[c$d]=c$j;else if("number"==typeof c$j&&Math.floor(c$j)==c$j)c$i[c$d]=c$j,c$g.data[c$d]=c$j;else if("boolean"==typeof c$j)c$i[c$d]=c$j,c$g.data[c$d]=c$j;else if(c$j instanceof laya.d3.math.Vector2){var c$k=c$i[c$d]||(c$i[c$d]=new c$hb);c$j.cloneTo(c$k),c$g.data[c$d]=c$k.elements}else if(c$j instanceof laya.d3.math.Vector3){var c$l=c$i[c$d]||(c$i[c$d]=new c$ib);c$j.cloneTo(c$l),c$g.data[c$d]=c$l.elements}else if(c$j instanceof laya.d3.math.Vector4){var c$m=c$i[c$d]||(c$i[c$d]=new c$jb);c$j.cloneTo(c$m),c$g.data[c$d]=c$m.elements}else if(c$j instanceof laya.d3.math.Matrix4x4){var c$n=c$i[c$d]||(c$i[c$d]=new c$ab);c$j.cloneTo(c$n),c$g.data[c$d]=c$n.elements}else c$j instanceof laya.d3.resource.BaseTexture&&(c$i[c$d]=c$j,c$g.data[c$d]=c$j)}},c$b.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$q(0,c$b,"alphaTestValue",function(){return this._getNumber(0)},function(c$a){this._setNumber(0,c$a)}),c$q(0,c$b,"alphaTest",function(){return this._alphaTest},function(c$a){(this._alphaTest=c$a)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),c$a.__init__=function(){c$a.SHADERDEFINE_ALPHATEST=c$a.shaderDefines.registerDefine("ALPHATEST")},c$a.RENDERQUEUE_OPAQUE=2e3,c$a.RENDERQUEUE_ALPHATEST=2450,c$a.RENDERQUEUE_TRANSPARENT=3e3,c$a.CULL_NONE=0,c$a.CULL_FRONT=1,c$a.CULL_BACK=2,c$a.BLEND_DISABLE=0,c$a.BLEND_ENABLE_ALL=1,c$a.BLEND_ENABLE_SEPERATE=2,c$a.BLENDPARAM_ZERO=0,c$a.BLENDPARAM_ONE=1,c$a.BLENDPARAM_SRC_COLOR=768,c$a.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,c$a.BLENDPARAM_DST_COLOR=774,c$a.BLENDPARAM_ONE_MINUS_DST_COLOR=775,c$a.BLENDPARAM_SRC_ALPHA=770,c$a.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,c$a.BLENDPARAM_DST_ALPHA=772,c$a.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,c$a.BLENDPARAM_SRC_ALPHA_SATURATE=776,c$a.BLENDEQUATION_ADD=0,c$a.BLENDEQUATION_SUBTRACT=1,c$a.BLENDEQUATION_REVERSE_SUBTRACT=2,c$a.DEPTHTEST_OFF=0,c$a.DEPTHTEST_NEVER=512,c$a.DEPTHTEST_LESS=513,c$a.DEPTHTEST_EQUAL=514,c$a.DEPTHTEST_LEQUAL=515,c$a.DEPTHTEST_GREATER=516,c$a.DEPTHTEST_NOTEQUAL=517,c$a.DEPTHTEST_GEQUAL=518,c$a.DEPTHTEST_ALWAYS=519,c$a.SHADERDEFINE_ALPHATEST=1,c$a.ALPHATESTVALUE=0,c$n(c$a,["shaderDefines",function(){return this.shaderDefines=new c$mb}]),c$a}(c$s),c$Fb=function(c$a){function c$b(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,c$b.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}c$p(c$b,"laya.d3.resource.BaseTexture",c$s);var c$c=c$b.prototype;return c$q(0,c$c,"width",function(){return this._width}),c$q(0,c$c,"repeat",function(){return this._repeat},function(c$a){if(this._repeat!==c$a&&(this._repeat=c$a,this._source)){var c$b=c$F.mainContext;c$G.bindTexture(c$b,this._type,this._source),c$w.isPOT(this._width,this._height)&&this._repeat?(c$b.texParameteri(this._type,10242,10497),c$b.texParameteri(this._type,10243,10497)):(c$b.texParameteri(this._type,10242,33071),c$b.texParameteri(this._type,10243,33071))}}),c$q(0,c$c,"height",function(){return this._height}),c$q(0,c$c,"magFifter",function(){return this._magFifter},function(c$a){(this._magFifter=c$a)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(c$a)}),c$q(0,c$c,"wrapModeV",function(){return this._wrapModeV}),c$q(0,c$c,"size",function(){return this._size}),c$q(0,c$c,"wrapModeU",function(){return this._wrapModeU}),c$q(0,c$c,"mipmap",function(){return this._mipmap},function(c$a){this._mipmap=c$a,this._mipmap!=c$a&&this._conchTexture&&this._conchTexture.setMipMap(c$a)}),c$q(0,c$c,"minFifter",function(){return this._minFifter},function(c$a){this._minFifter=c$a,this._minFifter!=c$a&&this._conchTexture&&this._conchTexture.setMinFifter(c$a)}),c$q(0,c$c,"format",function(){return this._format}),c$q(0,c$c,"source",function(){return this.activeResource(),this._source}),c$q(0,c$c,"defaulteTexture",function(){return c$Sb.grayTexture}),c$b.WARPMODE_REPEAT=0,c$b.WARPMODE_CLAMP=1,c$b}(),c$Gb=function(c$a){function c$b(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,c$b.__super.call(this),this._boundingBoxCorners=c$d(8,null)}c$p(c$b,"laya.d3.resource.models.BaseMesh",c$s);var c$c=c$b.prototype;return c$c._getPositions=function(){throw new Error("未Override,请重载该属性！")},c$c._generateBoundingObject=function(){this._boundingSphere=new c$_a(new c$ib,0),c$_a.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new c$Za(new c$ib,new c$ib),c$Za.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},c$c.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},c$c.getRenderElement=function(c$a){throw new Error("未Override,请重载该属性！")},c$q(0,c$c,"subMeshCount",function(){return this._subMeshCount}),c$q(0,c$c,"boundingBox",function(){return this._boundingBox}),c$q(0,c$c,"boundingBoxCorners",function(){return this._boundingBoxCorners}),c$q(0,c$c,"boundingSphere",function(){return this._boundingSphere}),c$b}(),c$Hb=(function(c$a){function c$b(){c$b.__super.call(this)}c$p(c$b,"laya.d3.component.Script",c$vb);var c$c=c$b.prototype;c$c.onTriggerEnter=function(c$a){},c$c.onTriggerExit=function(c$a){},c$c.onTriggerStay=function(c$a){},c$q(0,c$c,"isSingleton",function(){return c$b._isSingleton}),c$b._isSingleton=!1}(),function(c$a){function c$b(c$a){this._owner=null,this._sharedMesh=null,c$b.__super.call(this),this._owner=c$a}c$p(c$b,"laya.d3.core.MeshFilter",c$a);var c$c=c$b.prototype;return c$c._sharedMeshLoaded=function(){this.event("loaded")},c$c._destroy=function(){c$a.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},c$q(0,c$c,"sharedMesh",function(){return this._sharedMesh},function(c$a){var c$b=this._sharedMesh;c$b&&c$b._removeReference(),(this._sharedMesh=c$a)._addReference(),this.event("meshchanged",[this,c$b,c$a]),c$a.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),c$q(0,c$c,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),c$q(0,c$c,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),c$q(0,c$c,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),c$q(0,c$c,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),c$b}(c$wb)),c$Ib=function(c$a){function c$b(c$a){c$b.__super.call(this,c$a),c$a.meshFilter.on("meshchanged",this,this._onMeshChanged)}c$p(c$b,"laya.d3.core.MeshRender",c$xb);var c$c=c$b.prototype;return c$c._onMeshChanged=function(c$a,c$b,c$c){c$c.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:c$c.once("loaded",this,this._onMeshLoaed)},c$c._onMeshLoaed=function(c$a,c$b){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},c$c._calculateBoundingSphereByInitSphere=function(c$a){var c$b=NaN,c$c=this._owner.transform,c$d=c$c.scale.elements,c$g=Math.abs(c$d[0]),c$h=Math.abs(c$d[1]),c$i=Math.abs(c$d[2]);c$b=c$h<=c$g&&c$i<=c$g?c$g:c$i<=c$h?c$h:c$i,c$ib.transformCoordinate(c$a.center,c$c.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=c$a.radius*c$b},c$c._calculateBoundBoxByInitCorners=function(c$a){for(var c$b=this._owner.transform.worldMatrix,c$c=0;c$c<8;c$c++)c$ib.transformCoordinate(c$a[c$c],c$b,c$xb._tempBoundBoxCorners[c$c]);c$Za.createfromPoints(c$xb._tempBoundBoxCorners,this._boundingBox)},c$c._calculateBoundingSphere=function(){var c$a=this._owner.meshFilter.sharedMesh;null==c$a||null==c$a.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(c$a.boundingSphere)},c$c._calculateBoundingBox=function(){var c$a=this._owner.meshFilter.sharedMesh;null==c$a||null==c$a.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(c$a.boundingBoxCorners)},c$c._renderUpdate=function(c$a){var c$b=this._owner.transform;if(c$b){this._setShaderValueMatrix4x4(0,c$b.worldMatrix);var c$c=this._owner.getProjectionViewWorldMatrix(c$a);this._setShaderValueMatrix4x4(1,c$c)}else this._setShaderValueMatrix4x4(0,c$ab.DEFAULT),this._setShaderValueMatrix4x4(1,c$a);return c$tb.debugMode&&this._renderRenderableBoundBox(),!0},c$b}(),c$Jb=function(c$b){function c$d(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,c$d.__super.call(this),this._renderState=new c$Y,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new c$ob,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new c$ba,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new c$ib(.7,.7,.7),this.ambientColor=new c$ib(.212,.227,.259),c$F.shaderHighPrecision&&this.addShaderDefine(c$Ab.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}c$p(c$d,"laya.d3.core.scene.Scene",c$b);var c$a=c$d.prototype;return c$x.imps(c$a,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),c$a._setUrl=function(c$a){this._url=c$a},c$a._getGroup=function(){return this._group},c$a._setGroup=function(c$a){this._group=c$a},c$a._display=function(){c$x.stage._scenes.push(this),c$x.stage._scenes.sort(c$d._sortScenes);for(var c$a=0,c$b=this._childs.length;c$a<c$b;c$a++){var c$c=this._childs[c$a];c$c.active&&c$c._activeHierarchy()}},c$a._unDisplay=function(){var c$a=c$x.stage._scenes;c$a.splice(c$a.indexOf(this),1);for(var c$b=0,c$c=this._childs.length;c$b<c$c;c$b++){var c$d=this._childs[c$b];c$d.active&&c$d._inActiveHierarchy()}},c$a._addChild3D=function(c$a){c$a.transform._onWorldTransform(),c$a._setBelongScene(this),this.displayedInStage&&c$a.active&&c$a._activeHierarchy()},c$a._removeChild3D=function(c$a){c$a.transform.parent=null,this.displayedInStage&&c$a.active&&c$a._inActiveHierarchy(),c$a._setUnBelongScene()},c$a.initOctree=function(c$a,c$b,c$c,c$d,c$g){void 0===c$g&&(c$g=6),this.treeSize=new c$ib(c$a,c$b,c$c),this.treeLevel=c$g,this.treeRoot=new c$Z(this,0),this.treeRoot.init(c$d,this.treeSize)},c$a._prepareUpdateToRenderState=function(c$a,c$b){c$b.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,c$b.scene=this},c$a._prepareSceneToRender=function(c$a){var c$b=this._lights.length;if(0<c$b)for(var c$c=0,c$d=0;c$d<c$b&&!(this._lights[c$d]._prepareToScene(c$a)&&++c$c>=this._enableLightCount);c$d++);},c$a._updateChilds=function(c$a){for(var c$b=0,c$c=this._childs.length;c$b<c$c;++c$b)this._childs[c$b]._update(c$a)},c$a._preRenderScene=function(c$a,c$b,c$c){var c$d,c$g=c$b._viewMatrix,c$h=c$b._projectionMatrix,c$i=c$b._projectionViewMatrix,c$j=0,c$k=c$b.camera;for(c$k.useOcclusionCulling?this.treeRoot?c$ca.renderObjectCullingOctree(c$c,this,c$k,c$g,c$h,c$i):c$ca.renderObjectCulling(c$c,this,c$k,c$g,c$h,c$i):c$ca.renderObjectCullingNoBoundFrustum(this,c$k,c$g,c$h,c$i),c$j=0,c$d=this._quenes.length;c$j<c$d;c$j++)this._quenes[c$j]&&this._quenes[c$j]._preRender(c$b)},c$a._clear=function(c$a,c$b){var c$c=c$b._viewport,c$d=c$b.camera,c$g=c$c.x,c$h=c$d.renderTargetSize.height-c$c.y-c$c.height,c$i=c$c.width,c$j=c$c.height;c$a.viewport(c$g,c$h,c$i,c$j);var c$k=256,c$l=c$d.renderTarget;switch(c$d.clearFlag){case 0:var c$m=c$d.clearColor;if(c$m){c$a.enable(3089),c$a.scissor(c$g,c$h,c$i,c$j);var c$n=c$m.elements;c$a.clearColor(c$n[0],c$n[1],c$n[2],c$n[3]),c$k|=16384}if(c$l)switch(c$m||(c$k=16384),c$l.depthStencilFormat){case 33189:c$k|=256;break;case 36168:c$k|=1024;break;case 34041:c$k|=256,c$k|=1024}c$a.clear(c$k),c$m&&c$a.disable(3089);break;case 1:case 2:if(c$l)switch(c$k=16384,c$l.depthStencilFormat){case 33189:c$k|=256;break;case 36168:c$k|=1024;break;case 34041:c$k|=256,c$k|=1024}c$a.clear(c$k);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},c$a._renderScene=function(c$a,c$b){var c$c,c$d,c$g=c$b.camera,c$h=0;for(c$h=0;c$h<2;c$h++)(c$d=this._quenes[c$h])&&(c$g.renderTarget?c$d._render(c$b,!0):c$d._render(c$b,!1));if(1===c$g.clearFlag){var c$i=c$g.sky;c$i&&(c$G.setCullFace(c$a,!1),c$G.setDepthFunc(c$a,515),c$G.setDepthMask(c$a,!1),c$i._render(c$b),c$G.setDepthFunc(c$a,513),c$G.setDepthMask(c$a,!0))}for(c$h=2,c$c=this._quenes.length;c$h<c$c;c$h++)(c$d=this._quenes[c$h])&&(c$d._sortAlpha(c$b.camera.transform.position),c$g.renderTarget?c$d._render(c$b,!0):c$d._render(c$b,!1))},c$a._set3DRenderConfig=function(c$a){c$a.disable(3042),c$G._blend=!1,c$a.blendFunc(770,771),c$G._sFactor=770,c$G._dFactor=771,c$a.disable(2929),c$G._depthTest=!1,c$a.enable(2884),c$G._cullFace=!0,c$a.depthMask(1),c$G._depthMask=!0,c$a.frontFace(2304),c$G._frontFace=2304},c$a._set2DRenderConfig=function(c$a){c$G.setBlend(c$a,!0),c$G.setBlendFunc(c$a,1,771),c$G.setDepthTest(c$a,!1),c$G.setCullFace(c$a,!1),c$G.setDepthMask(c$a,!0),c$G.setFrontFace(c$a,2305),c$a.viewport(0,0,c$m.width,c$m.height)},c$a._parseCustomProps=function(c$a,c$b,c$c,c$d){var c$g=c$d.customProps.lightmaps,c$h=c$g.length,c$i=this._lightmaps;c$i.length=c$h;for(var c$j=0;c$j<c$h;c$j++)c$i[c$j]=c$t.getRes(c$b[c$g[c$j].replace(".exr",".png")]);this.setlightmaps(c$i);var c$k=c$d.customProps.ambientColor;c$k&&(this.ambientColor=new c$ib(c$k[0],c$k[1],c$k[2]));var c$l=c$d.customProps.fogColor;c$l&&(this.fogColor=new c$ib(c$l[0],c$l[1],c$l[2]))},c$a._addLight=function(c$a){this._lights.indexOf(c$a)<0&&this._lights.push(c$a)},c$a._removeLight=function(c$a){var c$b=this._lights.indexOf(c$a);0<=c$b&&this._lights.splice(c$b,1)},c$a._updateScene=function(){var c$a=this._renderState;this._prepareUpdateToRenderState(c$F.mainContext,c$a),this._updateComponents(c$a),this._updateChilds(c$a),this._lateUpdateComponents(c$a),this._time+=c$a.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},c$a._updateSceneConch=function(){var c$a=this._renderState;this._prepareUpdateToRenderState(c$F.mainContext,c$a),this._updateComponents(c$a),this._lateUpdateComponents(c$a),this._prepareSceneToRender(c$a);for(var c$b=0,c$c=this._cameraPool.length;c$b<c$c;c$b++){var c$d=this._cameraPool[c$b];(c$a.camera=c$d)._prepareCameraToRender()}},c$a._preRenderShadow=function(c$a,c$b,c$c,c$d,c$g){this.treeRoot?c$ca.renderShadowObjectCullingOctree(this,c$b,c$c,c$d,c$g):c$ca.renderShadowObjectCulling(this,c$b,c$c,c$d,c$g);for(var c$h=0,c$i=c$c.length;c$h<c$i;c$h++)c$c[c$h]&&c$c[c$h]._preRender(c$a)},c$a._renderShadowMap=function(c$a,c$b,c$c){var c$d=this.parallelSplitShadowMaps[0];c$d._calcAllLightCameraInfo(c$c);var c$g,c$h,c$i,c$j=c$d.PSSMNum;if(this._preRenderShadow(c$b,c$d._lightCulling,c$d._shadowQuenes,c$d._lightVPMatrix[0],c$j),this.addShaderDefine(c$pb.SHADERDEFINE_CAST_SHADOW),1<c$j)for(var c$k=0;c$k<c$j;c$k++)c$g=c$d.getRenderTarget(c$k+1),c$d.beginRenderTarget(c$k+1),c$a.clearColor(1,1,1,1),c$a.clear(16640),c$a.viewport(0,0,c$g.width,c$g.height),c$b.camera=c$i=c$d.getLightCamera(c$k),c$i._prepareCameraToRender(),c$i._prepareCameraViewProject(c$i.viewMatrix,c$i.projectionMatrix),c$b._projectionViewMatrix=c$d._lightVPMatrix[c$k+1],(c$h=c$d._shadowQuenes[c$k])._preRender(c$b),c$h._renderShadow(c$b,!1),c$d.endRenderTarget(c$k+1);else c$g=c$d.getRenderTarget(1),c$d.beginRenderTarget(1),c$a.clearColor(1,1,1,1),c$a.clear(16640),c$a.viewport(0,0,c$g.width,c$g.height),c$b.camera=c$i=c$d.getLightCamera(0),c$i._prepareCameraToRender(),c$i._prepareCameraViewProject(c$i.viewMatrix,c$i.projectionMatrix),c$b._projectionViewMatrix=c$d._lightVPMatrix[0],(c$h=c$d._shadowQuenes[0])._preRender(c$b),c$h._renderShadow(c$b,!0),c$d.endRenderTarget(1);this.removeShaderDefine(c$pb.SHADERDEFINE_CAST_SHADOW)},c$a.addTreeNode=function(c$a){this.treeRoot.addTreeNode(c$a)},c$a.removeTreeNode=function(c$a){this.treeSize&&c$a._treeNode&&c$a._treeNode.removeObject(c$a)},c$a.setlightmaps=function(c$a){this._lightmaps=c$a;for(var c$b=0,c$c=this._renderableSprite3Ds.length;c$b<c$c;c$b++)this._renderableSprite3Ds[c$b]._render._applyLightMapParams()},c$a.getlightmaps=function(){return this._lightmaps},c$a.addChildAt=function(c$a,c$b){if(!(c$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(c$a&&c$a.__className));if(!c$a||this.destroyed||c$a===this)return c$a;if(c$a.zOrder&&this._set$P("hasZorder",!0),0<=c$b&&c$b<=this._childs.length){if(c$a._parent===this){var c$c=this.getChildIndex(c$a);this._childs.splice(c$c,1),this._childs.splice(c$b,0,c$a),this.conchModel&&(this.conchModel.removeChild(c$a.conchModel),this.conchModel.addChildAt(c$a.conchModel,c$b)),this._childChanged()}else c$a.parent&&c$a.parent.removeChild(c$a),this._childs===c$l.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(c$b,0,c$a),this.conchModel&&this.conchModel.addChildAt(c$a.conchModel,c$b),(c$a.parent=this)._addChild3D(c$a);return c$a}throw new Error("appendChildAt:The index is out of bounds")},c$a.addChild=function(c$a){if(!(c$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!c$a||this.destroyed||c$a===this)return c$a;if(c$a.zOrder&&this._set$P("hasZorder",!0),c$a._parent===this){var c$b=this.getChildIndex(c$a);c$b!==this._childs.length-1&&(this._childs.splice(c$b,1),this._childs.push(c$a),this.conchModel&&(this.conchModel.removeChild(c$a.conchModel),this.conchModel.addChildAt(c$a.conchModel,this._childs.length-1)),this._childChanged())}else c$a.parent&&c$a.parent.removeChild(c$a),this._childs===c$l.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(c$a),this.conchModel&&this.conchModel.addChildAt(c$a.conchModel,this._childs.length-1),(c$a.parent=this)._childChanged(),this._addChild3D(c$a);return c$a},c$a.removeChildAt=function(c$a){var c$b=this.getChildAt(c$a);return c$b&&(this._removeChild3D(c$b),this._childs.splice(c$a,1),this.conchModel&&this.conchModel.removeChild(c$b.conchModel),c$b.parent=null),c$b},c$a.removeChildren=function(c$a,c$b){if(void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=2147483647),this._childs&&0<this._childs.length){var c$c=this._childs;if(0===c$a&&c$h<=c$b){var c$d=c$c;this._childs=c$l.ARRAY_EMPTY}else c$d=c$c.splice(c$a,c$b-c$a);for(var c$g=0,c$h=c$d.length;c$g<c$h;c$g++)this._removeChild3D(c$d[c$g]),c$d[c$g].parent=null,this.conchModel&&this.conchModel.removeChild(c$d[c$g].conchModel)}return this},c$a.addFrustumCullingObject=function(c$a){this.treeRoot?this.addTreeNode(c$a):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(c$a):this._cullingRenders[this._cullingRendersLength]=c$a,c$a._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},c$a.removeFrustumCullingObject=function(c$a){if(this.treeRoot)this.removeTreeNode(c$a);else{this._cullingRendersLength--;var c$b=c$a._indexInSceneFrustumCullingObjects;if(c$b!==this._cullingRendersLength){var c$c=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[c$b]=c$c)._indexInSceneFrustumCullingObjects=c$b,c$a._indexInSceneFrustumCullingObjects=-1}}},c$a.getRenderQueue=function(c$a){return c$a<3e3?this._quenes[1]||(this._quenes[1]=new c$X(this)):this._quenes[2]||(this._quenes[2]=new c$X(this))},c$a.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new c$X(this)},c$a.addShaderDefine=function(c$a){this._shaderDefineValue|=c$a},c$a.removeShaderDefine=function(c$a){this._shaderDefineValue&=~c$a},c$a.addScript=function(c$a){return this._addComponent(c$a)},c$a.getScriptByType=function(c$a,c$b){return void 0===c$b&&(c$b=0),this._getComponentByType(c$a,c$b)},c$a.getScriptsByType=function(c$a,c$b){this._getComponentsByType(c$a,c$b)},c$a.getScriptByIndex=function(c$a){return this._getComponentByIndex(c$a)},c$a.removeScriptByType=function(c$a,c$b){void 0===c$b&&(c$b=0),this._removeComponentByType(c$a,c$b)},c$a.removeScriptsByType=function(c$a){this._removeComponentByType(c$a)},c$a.removeAllScript=function(){this._removeAllComponent()},c$a.render=function(c$a,c$b,c$c){(c$r._context.ctx._renderKey=0)<this._childs.length&&c$a.addRenderObject(this)},c$a.renderSubmit=function(){var c$a=c$F.mainContext,c$b=this._renderState;this._set3DRenderConfig(c$a),this._prepareSceneToRender(this._renderState);var c$c,c$d=0,c$g=0;if(c$tb.debugMode||c$Z.debugMode)for(c$d=0,c$g=this._cameraPool.length;c$d<c$g;c$d++)c$c=this._cameraPool[c$d],c$tb._debugPhasorSprite.begin(1,c$c),c$c.activeInHierarchy&&c$c._renderCamera(c$a,c$b,this),c$tb._debugPhasorSprite.end();else for(c$d=0,c$g=this._cameraPool.length;c$d<c$g;c$d++)(c$c=this._cameraPool[c$d]).activeInHierarchy&&c$c._renderCamera(c$a,c$b,this);return this._set2DRenderConfig(c$a),1},c$a.onAsynLoaded=function(c$a,c$b,c$c){var c$d=c$b[0];if("Scene"!==c$d.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var c$g=c$b[1];c$sb._createNodeByJson(this,c$d,this,c$g),this.event("hierarchyloaded",[this]),this.__loaded=!0},c$a.destroy=function(c$a){void 0===c$a&&(c$a=!0),this.destroyed||(c$b.prototype.destroy.call(this,c$a),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,c$t.clearRes(this.url),this.loaded||c$tb._cancelLoadByUrl(this.url))},c$a.getRenderType=function(){return 0},c$a.releaseRender=function(){},c$a._addComponent=function(c$a){var c$b,c$c=this._componentsMap.indexOf(c$a);if(-1===c$c)c$b=[],this._componentsMap.push(c$a),this._typeComponentsIndices.push(c$b);else if(c$b=this._typeComponentsIndices[c$c],this._components[c$b[0]].isSingleton)throw new Error("无法单实例创建"+c$a+"组件，"+c$a+"组件已存在！");var c$d=c$g.getInstance(c$a);c$b.push(this._components.length),this._components.push(c$d);return c$d._initialize(this),c$d},c$a._removeComponent=function(c$a,c$b){var c$c=this._typeComponentsIndices[c$a],c$d=c$c[c$b],c$g=this._components[c$d];this._components.splice(c$d,1),c$c.splice(c$b,1),0===c$c.length&&(this._typeComponentsIndices.splice(c$a,1),this._componentsMap.splice(c$a,1));for(var c$h=0,c$i=this._componentsMap.length;c$h<c$i;c$h++)for(var c$j=(c$c=this._typeComponentsIndices[c$h]).length-1;0<=c$j;c$j--){var c$k=c$c[c$j];if(!(c$d<c$k))break;c$c[c$j]=--c$k}c$g._destroy()},c$a._getComponentByType=function(c$a,c$b){void 0===c$b&&(c$b=0);var c$c=this._componentsMap.indexOf(c$a);return-1===c$c?null:this._components[this._typeComponentsIndices[c$c][c$b]]},c$a._getComponentsByType=function(c$a,c$b){var c$c=this._componentsMap.indexOf(c$a);if(-1!==c$c){var c$d=this._typeComponentsIndices[c$c],c$g=c$d.length;c$b.length=c$g;for(var c$h=0;c$h<c$g;c$h++)c$b[c$h]=this._components[c$d[c$h]]}else c$b.length=0},c$a._getComponentByIndex=function(c$a){return this._components[c$a]},c$a._removeComponentByType=function(c$a,c$b){void 0===c$b&&(c$b=0);var c$c=this._componentsMap.indexOf(c$a);-1!==c$c&&this._removeComponent(c$c,c$b)},c$a._removeComponentsByType=function(c$a){var c$b=this._componentsMap.indexOf(c$a);if(-1!==c$b)for(var c$c=this._typeComponentsIndices[c$b],c$d=0,c$g=c$c.length;c$d<c$g;c$c.length<c$g?c$g--:c$d++)this._removeComponent(c$b,c$d)},c$a._removeAllComponent=function(){for(var c$a=0,c$b=this._componentsMap.length;c$a<c$b;this._componentsMap.length<c$b?c$b--:c$a++)this._removeComponentsByType(this._componentsMap[c$a])},c$a._updateComponents=function(c$a){for(var c$b=0,c$c=this._components.length;c$b<c$c;c$b++){var c$d=this._components[c$b];!c$d.started&&(c$d._start(c$a),c$d.started=!0),c$d.enable&&c$d._update(c$a)}},c$a._lateUpdateComponents=function(c$a){for(var c$b=0;c$b<this._components.length;c$b++){var c$c=this._components[c$b];!c$c.started&&(c$c._start(c$a),c$c.started=!0),c$c.enable&&c$c._lateUpdate(c$a)}},c$a._preRenderUpdateComponents=function(c$a){for(var c$b=0;c$b<this._components.length;c$b++){var c$c=this._components[c$b];!c$c.started&&(c$c._start(c$a),c$c.started=!0),c$c.enable&&c$c._preRenderUpdate(c$a)}},c$a._postRenderUpdateComponents=function(c$a){for(var c$b=0;c$b<this._components.length;c$b++){var c$c=this._components[c$b];!c$c.started&&(c$c._start(c$a),c$c.started=!0),c$c.enable&&c$c._postRenderUpdate(c$a)}},c$q(0,c$a,"_loaded",null,function(c$a){this.__loaded=c$a}),c$q(0,c$a,"fogColor",function(){return this._fogColor},function(c$a){this._fogColor=c$a,this._shaderValues.setValue(0,c$a.elements)}),c$q(0,c$a,"enableFog",function(){return this._enableFog},function(c$a){this._enableFog!==c$a&&((this._enableFog=c$a)?(this.addShaderDefine(c$Ab.SHADERDEFINE_FOG),this.removeShaderDefine(c$Ab.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(c$Ab.SHADERDEFINE_FOG))}),c$q(0,c$a,"url",function(){return this._url}),c$q(0,c$a,"loaded",function(){return this.__loaded}),c$q(0,c$a,"enableDepthFog",function(){return this._enableDepthFog},function(c$a){this._enableDepthFog!=c$a&&((this._enableDepthFog=c$a)?(this.addShaderDefine(c$Ab.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(c$Ab.SHADERDEFINE_FOG)):this.removeShaderDefine(c$Ab.SAHDERDEFINE_DEPTHFOG))}),c$q(0,c$a,"fogStart",function(){return this._fogStart},function(c$a){this._fogStart=c$a,this._shaderValues.setValue(1,c$a)}),c$q(0,c$a,"fogRange",function(){return this._fogRange},function(c$a){this._fogRange=c$a,this._shaderValues.setValue(2,c$a)}),c$q(0,c$a,"ambientColor",function(){return this._ambientColor},function(c$a){this._ambientColor=c$a,this._shaderValues.setValue(21,c$a.elements)}),c$q(0,c$a,"scene",function(){return this}),c$q(0,c$a,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),c$d._sortScenes=function(c$a,c$b){if(c$a.parent!==c$x.stage||c$b.parent!==c$x.stage)return c$a.parent!==c$x.stage&&c$b.parent!==c$x.stage?c$d._sortScenes(c$a.parent,c$b.parent):c$a.parent===c$x.stage?-1:1;var c$c=c$x.stage._childs;return c$c.indexOf(c$a)-c$c.indexOf(c$b)},c$d.load=function(c$a){return c$x.loader.create(c$a,null,null,c$d)},c$d.FOGCOLOR=0,c$d.FOGSTART=1,c$d.FOGRANGE=2,c$d.LIGHTDIRECTION=3,c$d.LIGHTDIRCOLOR=4,c$d.POINTLIGHTPOS=5,c$d.POINTLIGHTRANGE=6,c$d.POINTLIGHTATTENUATION=7,c$d.POINTLIGHTCOLOR=8,c$d.SPOTLIGHTPOS=9,c$d.SPOTLIGHTDIRECTION=10,c$d.SPOTLIGHTSPOT=11,c$d.SPOTLIGHTRANGE=12,c$d.SPOTLIGHTATTENUATION=13,c$d.SPOTLIGHTCOLOR=14,c$d.SHADOWDISTANCE=15,c$d.SHADOWLIGHTVIEWPROJECT=16,c$d.SHADOWMAPPCFOFFSET=17,c$d.SHADOWMAPTEXTURE1=18,c$d.SHADOWMAPTEXTURE2=19,c$d.SHADOWMAPTEXTURE3=20,c$d.AMBIENTCOLOR=21,c$d.TIME=22,c$d}(c$z),c$Kb=function(c$a){function c$b(c$a){c$b.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new c$ab,this._shaderValues=new c$ob,this._colliders=[],this._id=++c$b._uniqueIDCounter,this._transform=new c$yb(this),this.name=c$a||"Sprite3D-"+c$b._nameNumberCounter++,this.layer=c$I.currentCreationLayer,this.active=!0}c$p(c$b,"laya.d3.core.Sprite3D",c$Db);var c$c=c$b.prototype;return c$x.imps(c$c,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),c$c._setUrl=function(c$a){this._url=c$a},c$c._getGroup=function(){return this._group},c$c._setGroup=function(c$a){this._group=c$a},c$c._addChild3D=function(c$a){c$a.transform.parent=this.transform,this._hierarchyAnimator&&(!c$a._hierarchyAnimator&&c$a._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(c$a,!0,[c$a.name])),this._scene&&(c$a._setBelongScene(this._scene),this._activeInHierarchy&&c$a._active&&c$a._activeHierarchy())},c$c._removeChild3D=function(c$a){c$a.transform.parent=null,this._scene&&(this._activeInHierarchy&&c$a._active&&c$a._inActiveHierarchy(),c$a._setUnBelongScene()),this._hierarchyAnimator&&(c$a._hierarchyAnimator==this._hierarchyAnimator&&c$a._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(c$a,!1,[c$a.name]))},c$c._parseBaseCustomProps=function(c$a){var c$b=this.transform.localPosition;c$a.translate?(c$b.fromArray(c$a.translate),c$b.x*=100,c$b.y*=100,c$b.z*=100):c$b.elements.fill(0),this.transform.localPosition=c$b;var c$c=this.transform.localRotation;c$a.rotation?c$c.fromArray(c$a.rotation):c$c.fromArray([0,0,0,-1]),this.transform.localRotation=c$c;var c$d=this.transform.localScale;c$a.scale?c$d.fromArray(c$a.scale):c$d.elements.fill(1),this.transform.localScale=c$d;var c$g=c$a.layer;null!=c$g&&(this.layer=c$I.getLayerByNumber(c$g))},c$c._parseCustomComponent=function(c$a,c$b,c$c){for(var c$d in c$c){var c$g=c$c[c$d];switch(c$d){case"Animator":var c$h=this.addComponent(Animator);if(c$g.avatarPath)c$h.avatar=c$t.getRes(c$b[c$g.avatarPath]);else{var c$i=c$g.avatar;if(c$i){c$h.avatar=c$t.getRes(c$b[c$i.path]);var c$j=c$i.linkSprites;c$j&&c$a.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[c$h,c$j])}}for(var c$k=c$g.clipPaths,c$l=c$k.length,c$m=0;c$m<c$l;c$m++)c$h.addClip(c$t.getRes(c$b[c$k[c$m]]));c$h.clip=c$t.getRes(c$b[c$k[0]]);var c$n=c$g.playOnWake;void 0!==c$n&&(c$h.playOnWake=c$n);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var c$o=this.addComponent(SphereCollider);c$o.isTrigger=c$g.isTrigger;var c$p=c$o.center;c$p.fromArray(c$g.center),c$o.center=c$p,c$o.radius=c$g.radius;break;case"BoxCollider":var c$q=this.addComponent(BoxCollider);c$q.isTrigger=c$g.isTrigger,c$q.center.fromArray(c$g.center);var c$r=c$q.size;c$r.fromArray(c$g.size),c$q.size=c$r;break;case"MeshCollider":this.addComponent(MeshCollider)}}},c$c._onRootNodeHierarchyLoaded=function(c$a,c$b){for(var c$c in c$b){for(var c$d=this,c$g=c$b[c$c],c$h=0,c$i=c$g.length;c$h<c$i;c$h++){var c$j=c$g[c$h];if(""===c$j)break;if(!(c$d=c$d.getChildByName(c$j)))break}c$d&&c$a.linkSprite3DToAvatarNode(c$c,c$d)}},c$c._setHierarchyAnimator=function(c$a,c$b){this._changeHierarchyAnimator(c$a);for(var c$c=0,c$d=this._childs.length;c$c<c$d;c$c++){var c$g=this._childs[c$c];c$g._hierarchyAnimator==c$b&&c$g._setHierarchyAnimator(c$a,c$b)}},c$c._clearHierarchyAnimator=function(c$a,c$b){this._changeHierarchyAnimator(c$b);for(var c$c=0,c$d=this._childs.length;c$c<c$d;c$c++){var c$g=this._childs[c$c];c$g._hierarchyAnimator==c$a&&c$g._clearHierarchyAnimator(c$a,c$b)}},c$c._getAnimatorToLinkSprite3D=function(c$a,c$b,c$c){var c$d=this.getComponentByType(Animator);if(c$d&&(c$d.avatar?c$d.avatar._version||c$a._setAnimatorToLinkAvatar(c$d,c$b):c$a._setAnimatorToLinkSprite3DNoAvatar(c$d,c$b,c$c)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){c$c.unshift(this._parent.name);var c$g=this._parent;c$g._hierarchyAnimator&&c$g._getAnimatorToLinkSprite3D(c$a,c$b,c$c)}},c$c._setAnimatorToLinkSprite3DNoAvatar=function(c$a,c$b,c$c){var c$d=0,c$g=0;for(c$d=0,c$g=c$a.getClipCount();c$d<c$g;c$d++)c$a._handleSpriteOwnersBySprite(c$d,c$b,c$c,this);for(c$d=0,c$g=this._childs.length;c$d<c$g;c$d++){var c$h=this._childs[c$d],c$i=c$c.length;c$c.push(c$h.name),c$h._setAnimatorToLinkSprite3DNoAvatar(c$a,c$b,c$c),c$c.splice(c$i,1)}},c$c._changeHierarchyAnimator=function(c$a){this._hierarchyAnimator=c$a},c$c._isLinkSpriteToAnimationNode=function(c$a,c$b,c$c){var c$d=c$a._avatarNodes.indexOf(c$b),c$g=c$a._cacheSpriteToNodesMap;if(c$c)this._transform.dummy=c$b.transform,c$a._cacheNodesToSpriteMap[c$d]=c$g.length,c$g.push(c$d);else{this._transform.dummy=null;var c$h=c$a._cacheNodesToSpriteMap[c$d];c$a._cacheNodesToSpriteMap[c$d]=null,c$g.splice(c$h,1)}},c$c._setBelongScene=function(c$a){this._scene=c$a;for(var c$b=0,c$c=this._childs.length;c$b<c$c;c$b++)this._childs[c$b]._setBelongScene(c$a)},c$c._setUnBelongScene=function(){this._scene=null;for(var c$a=0,c$b=this._childs.length;c$a<c$b;c$a++)this._childs[c$a]._setUnBelongScene()},c$c._activeHierarchy=function(){var c$a=0,c$b=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),c$a=0,c$b=this._colliders.length;c$a<c$b;c$a++)this._layer._addCollider(this._colliders[c$a]);for(this.event("activeinhierarchychanged",!0),c$a=0,c$b=this._childs.length;c$a<c$b;c$a++){var c$c=this._childs[c$a];c$c._active&&c$c._activeHierarchy()}},c$c._inActiveHierarchy=function(){var c$a=0,c$b=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),c$a=0,c$b=this._colliders.length;c$a<c$b;c$a++){var c$c=this._colliders[c$a];c$c._clearCollsionMap(),this._layer._removeCollider(c$c)}for(this.event("activeinhierarchychanged",!1),c$a=0,c$b=this._childs.length;c$a<c$b;c$a++){var c$d=this._childs[c$a];c$d._active&&c$d._inActiveHierarchy()}},c$c.addComponent=function(c$a){var c$b,c$c=this._componentsMap.indexOf(c$a);if(-1===c$c)c$b=[],this._componentsMap.push(c$a),this._typeComponentsIndices.push(c$b);else if(c$b=this._typeComponentsIndices[c$c],this._components[c$b[0]].isSingleton)throw new Error("无法单实例创建"+c$a+"组件，"+c$a+"组件已存在！");var c$d=c$g.getInstance(c$a);return c$b.push(this._components.length),this._components.push(c$d),c$d instanceof laya.d3.component.Script&&this._scripts.push(c$d),c$d._initialize(this),c$d},c$c._removeComponent=function(c$a,c$b){var c$c,c$d=0,c$g=this._typeComponentsIndices[c$a],c$h=c$g[c$b],c$i=this._components[c$h];for(c$i instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(c$i),1),c$g.splice(c$b,1),0===c$g.length&&(this._typeComponentsIndices.splice(c$a,1),this._componentsMap.splice(c$a,1)),c$d=0,c$c=this._componentsMap.length;c$d<c$c;c$d++)for(var c$j=(c$g=this._typeComponentsIndices[c$d]).length-1;0<=c$j;c$j--){var c$k=c$g[c$j];if(!(c$h<c$k))break;c$g[c$j]=--c$k}c$i._destroy()},c$c._clearSelfRenderObjects=function(){},c$c._addSelfRenderObjects=function(){},c$c._parseCustomProps=function(c$a,c$b,c$c,c$d){},c$c._updateChilds=function(c$a){var c$b=this._childs.length;if(0!==c$b)for(var c$c=0;c$c<c$b;++c$c)this._childs[c$c]._update(c$a)},c$c._getSortID=function(c$a,c$b){return 1e3*c$b.id+c$a._getVertexBuffer().vertexDeclaration.id},c$c._update=function(c$a){(c$a.owner=this)._activeInHierarchy&&(this._updateComponents(c$a),this._lateUpdateComponents(c$a),c$A.spriteCount++,this._childs.length&&this._updateChilds(c$a))},c$c.getProjectionViewWorldMatrix=function(c$a){return c$ab.multiply(c$a,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},c$c.loadHierarchy=function(c$a){this.addChild(laya.d3.core.Sprite3D.load(c$a))},c$c.addChildAt=function(c$a,c$b){if(!(c$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!c$a||this.destroyed||c$a===this)return c$a;if(c$a.zOrder&&this._set$P("hasZorder",!0),0<=c$b&&c$b<=this._childs.length){if(c$a._parent===this){var c$c=this.getChildIndex(c$a);this._childs.splice(c$c,1),this._childs.splice(c$b,0,c$a),this.conchModel&&(this.conchModel.removeChild(c$a.conchModel),this.conchModel.addChildAt(c$a.conchModel,c$b)),this._childChanged()}else c$a.parent&&c$a.parent.removeChild(c$a),this._childs===c$l.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(c$b,0,c$a),this.conchModel&&this.conchModel.addChildAt(c$a.conchModel,c$b),(c$a.parent=this)._addChild3D(c$a);return c$a}throw new Error("appendChildAt:The index is out of bounds")},c$c.addChild=function(c$a){if(!(c$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!c$a||this.destroyed||c$a===this)return c$a;if(c$a.zOrder&&this._set$P("hasZorder",!0),c$a._parent===this){var c$b=this.getChildIndex(c$a);c$b!==this._childs.length-1&&(this._childs.splice(c$b,1),this._childs.push(c$a),this.conchModel&&(this.conchModel.removeChild(c$a.conchModel),this.conchModel.addChildAt(c$a.conchModel,this._childs.length-1)),this._childChanged())}else c$a.parent&&c$a.parent.removeChild(c$a),this._childs===c$l.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(c$a),this.conchModel&&this.conchModel.addChildAt(c$a.conchModel,this._childs.length-1),(c$a.parent=this)._childChanged(),this._addChild3D(c$a);return c$a},c$c.removeChildAt=function(c$a){var c$b=this.getChildAt(c$a);return c$b&&(this._removeChild3D(c$b),this._childs.splice(c$a,1),this.conchModel&&this.conchModel.removeChild(c$b.conchModel),c$b.parent=null),c$b},c$c.removeChildren=function(c$a,c$b){if(void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=2147483647),this._childs&&0<this._childs.length){var c$c=this._childs;if(0===c$a&&c$h<=c$b){var c$d=c$c;this._childs=c$l.ARRAY_EMPTY}else c$d=c$c.splice(c$a,c$b-c$a);for(var c$g=0,c$h=c$d.length;c$g<c$h;c$g++)this._removeChild3D(c$d[c$g]),c$d[c$g].parent=null,this.conchModel&&this.conchModel.removeChild(c$d[c$g].conchModel)}return this},c$c.onAsynLoaded=function(c$a,c$b,c$c){var c$d=c$b[0];if("Sprite3D"!==c$d.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var c$g=c$b[1];c$sb._createNodeByJson(this,c$d,this,c$g),this.event("hierarchyloaded",[this]),this.__loaded=!0},c$c.cloneTo=function(c$a){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var c$b=c$a;c$b.name=this.name,c$b._destroyed=this._destroyed,c$b.timer=this.timer,c$b._$P=this._$P,c$b.active=this._active;var c$c=c$b.transform.localPosition;this.transform.localPosition.cloneTo(c$c),c$b.transform.localPosition=c$c;var c$d=c$b.transform.localRotation;this.transform.localRotation.cloneTo(c$d),c$b.transform.localRotation=c$d;var c$g=c$b.transform.localScale;this.transform.localScale.cloneTo(c$g),c$b.transform.localScale=c$g,c$b.isStatic=this.isStatic;var c$h=0,c$i=0;for(c$h=0,c$i=this._componentsMap.length;c$h<c$i;c$h++){var c$j=c$b.addComponent(this._componentsMap[c$h]);this._components[c$h]._cloneTo(c$j)}for(c$h=0,c$i=this._childs.length;c$h<c$i;c$h++)c$b.addChild(this._childs[c$h].clone());var c$k=c$b.getComponentByType(Animator);if(c$k){var c$l=c$k._linkSpritesData;if(c$l)for(var c$m in c$l){for(var c$n=c$l[c$m],c$o=c$b,c$p=0,c$q=c$n.length;c$p<c$q&&(c$o=c$o.getChildByName(c$n[c$p]));c$p++);if(c$o){var c$r=c$k._avatarNodeMap[c$m];c$o._isLinkSpriteToAnimationNode(c$k,c$r,!0)}}}},c$c.clone=function(){var c$a=new this.constructor;return this.cloneTo(c$a),c$a},c$c.destroy=function(c$a){if(void 0===c$a&&(c$a=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,c$a);var c$b,c$c=0;for(c$c=0,c$b=this._components.length;c$c<c$b;c$c++)this._components[c$c]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,c$t.clearRes(this.url),this.loaded||c$tb._cancelLoadByUrl(this.url)}},c$c._handleSpriteToAvatar=function(c$a,c$b){c$a._avatarNodes;var c$c=c$a._avatarNodeMap[this.name];c$c&&c$c.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(c$a,c$c,c$b)},c$c._setAnimatorToLinkAvatar=function(c$a,c$b){this._handleSpriteToAvatar(c$a,c$b);for(var c$c=0,c$d=this._childs.length;c$c<c$d;c$c++){this._childs[c$c]._setAnimatorToLinkAvatar(c$a,c$b)}},c$q(0,c$c,"activeInHierarchy",function(){return this._activeInHierarchy}),c$q(0,c$c,"_loaded",null,function(c$a){this.__loaded=c$a}),c$q(0,c$c,"active",function(){return this._active},function(c$a){this._active!==c$a&&(this._active=c$a,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(c$a?this._activeHierarchy():this._inActiveHierarchy()))}),c$q(0,c$c,"componentsCount",function(){return this._components.length}),c$q(0,c$c,"loaded",function(){return this.__loaded}),c$q(0,c$c,"id",function(){return this._id}),c$q(0,c$c,"url",function(){return this._url}),c$q(0,c$c,"layer",function(){return this._layer},function(c$a){if(this._layer!==c$a){if(!c$a)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var c$b=0,c$c=this._colliders.length;if(this._layer)for(c$b=0;c$b<c$c;c$b++)this._layer._removeCollider(this._colliders[c$b]);for(c$b=0;c$b<c$c;c$b++)c$a._addCollider(this._colliders[c$b])}this._layer=c$a,this.event("layerchanged",c$a)}}),c$q(0,c$c,"scene",function(){return this._scene}),c$q(0,c$c,"transform",function(){return this._transform}),c$b.instantiate=function(c$a,c$b,c$c,c$d,c$g){void 0===c$c&&(c$c=!0);var c$h=c$a.clone();c$b&&c$b.addChild(c$h);var c$i=c$h.transform;if(c$c){var c$j=c$i.worldMatrix;c$a.transform.worldMatrix.cloneTo(c$j),c$i.worldMatrix=c$j}else c$d&&(c$i.position=c$d),c$g&&(c$i.rotation=c$g);return c$h},c$b.load=function(c$a){return c$x.loader.create(c$a,null,null,c$b)},c$b.WORLDMATRIX=0,c$b.MVPMATRIX=1,c$b._uniqueIDCounter=0,c$b._nameNumberCounter=0,c$b}(),c$Lb=function(c$a){function c$m(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],c$m.__super.call(this),!c$a||!c$b)throw"Shader Error";this._id=++c$m._count,this._vs=c$a,this._ps=c$b,this._attributeMap=c$c,this._sceneUniformMap=c$d,this._cameraUniformMap=c$g,this._spriteUniformMap=c$h,this._materialUniformMap=c$i,this._renderElementUniformMap=c$j,this._precompile=c$k,this._define=c$l,this._precompile&&c$m.extCompileObj&&c$m.extCompileFunc?c$m.extCompileFunc.call(c$m.extCompileObj,c$a,c$b,c$l):this.recreateResource()}c$p(c$m,"laya.d3.shader.Shader3D",c$c);var c$b=c$m.prototype;return c$b.recreateResource=function(){c$H.now();this._compile(),this.completeCreate(),this.memorySize=0},c$b.disposeResource=function(){c$F.mainContext.deleteShader(this._vshader),c$F.mainContext.deleteShader(this._pshader),c$F.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},c$b._compile=function(){if(this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var c$a=[this._vs,this._ps],c$b=c$F.mainContext;if(this._program=c$b.createProgram(),this._vshader=c$m._createShader(c$b,c$a[0],35633),this._pshader=c$m._createShader(c$b,c$a[1],35632),c$b.attachShader(this._program,this._vshader),c$b.attachShader(this._program,this._pshader),c$b.linkProgram(this._program),!c$r.isConchApp&&c$Ab.debugMode&&!c$b.getProgramParameter(this._program,35714))throw c$b.getProgramInfoLog(this._program);var c$c,c$d=0,c$g=0,c$h=0;for(c$h=c$r.isConchApp?c$b.getProgramParameterEx(this._vs,this._ps,"",35721):c$b.getProgramParameter(this._program,35721),c$d=0;c$d<c$h;c$d++){var c$i=null;c$c={vartype:"attribute",ivartype:0,attrib:c$i=c$r.isConchApp?c$b.getActiveAttribEx(this._vs,this._ps,"",c$d):c$b.getActiveAttrib(this._program,c$d),location:c$b.getAttribLocation(this._program,c$i.name),name:c$i.name,type:c$i.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(c$c)}var c$j=0;for(c$j=c$r.isConchApp?c$b.getProgramParameterEx(this._vs,this._ps,"",35718):c$b.getProgramParameter(this._program,35718),c$d=0;c$d<c$j;c$d++){var c$k=null;c$k=c$r.isConchApp?c$b.getActiveUniformEx(this._vs,this._ps,"",c$d):c$b.getActiveUniform(this._program,c$d),0<(c$c={vartype:"uniform",ivartype:1,attrib:c$i,location:c$b.getUniformLocation(this._program,c$k.name),name:c$k.name,type:c$k.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(c$c.name=c$c.name.substr(0,c$c.name.length-3),c$c.isArray=!0,c$c.location=c$b.getUniformLocation(this._program,c$c.name)),this._uniformParams.push(c$c)}for(c$d=0,c$g=this._attributeParams.length;c$d<c$g;c$d++)(c$c=this._attributeParams[c$d]).indexOfParams=c$d,c$c.index=1,c$c.value=[c$c.location,null],c$c.codename=c$c.name,c$c.name=null!=this._attributeMap[c$c.codename]?this._attributeMap[c$c.codename]:c$c.codename,this._attributeParamsMap.push(c$c.name),this._attributeParamsMap.push(c$c),c$c._this=this,c$c.uploadedValue=[],c$c.fun=this._attribute;for(c$d=0,c$g=this._uniformParams.length;c$d<c$g;c$d++)switch((c$c=this._uniformParams[c$d]).indexOfParams=c$d,c$c.index=1,c$c.value=[c$c.location,null],c$c.codename=c$c.name,null!=this._sceneUniformMap[c$c.codename]?(c$c.name=this._sceneUniformMap[c$c.codename],this._sceneUniformParamsMap.push(c$c.name),this._sceneUniformParamsMap.push(c$c)):null!=this._cameraUniformMap[c$c.codename]?(c$c.name=this._cameraUniformMap[c$c.codename],this._cameraUniformParamsMap.push(c$c.name),this._cameraUniformParamsMap.push(c$c)):null!=this._spriteUniformMap[c$c.codename]?(c$c.name=this._spriteUniformMap[c$c.codename],this._spriteUniformParamsMap.push(c$c.name),this._spriteUniformParamsMap.push(c$c)):null!=this._materialUniformMap[c$c.codename]?(c$c.name=this._materialUniformMap[c$c.codename],this._materialUniformParamsMap.push(c$c.name),this._materialUniformParamsMap.push(c$c)):null!=this._renderElementUniformMap[c$c.codename]?(c$c.name=this._renderElementUniformMap[c$c.codename],this._renderElementUniformParamsMap.push(c$c.name),this._renderElementUniformParamsMap.push(c$c)):console.log("Shader:can't find uinform name:"+c$c.codename+" in shader file."),c$c._this=this,c$c.uploadedValue=[],c$c.type){case 5124:c$c.fun=c$c.isArray?this._uniform1iv:this._uniform1i;break;case 5126:c$c.fun=c$c.isArray?this._uniform1fv:this._uniform1f;break;case 35664:c$c.fun=c$c.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:c$c.fun=c$c.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:c$c.fun=c$c.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:c$c.fun=this._uniform_sampler2D;break;case 35680:c$c.fun=this._uniform_samplerCube;break;case 35676:c$c.fun=this._uniformMatrix4fv;break;case 35670:c$c.fun=this._uniform1i;break;case 35674:c$c.fun=this._uinformMatrix2fv;break;case 35675:c$c.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},c$b._attribute=function(c$a,c$b){var c$c=c$F.mainContext,c$d=c$j._enableAtributes,c$g=c$a.location;return c$d[c$g]||c$c.enableVertexAttribArray(c$g),c$c.vertexAttribPointer(c$g,c$b[0],c$b[1],c$b[2],c$b[3],c$b[4]),c$d[c$g]=c$j._bindVertexBuffer,1},c$b._uniform1f=function(c$a,c$b){var c$c=c$a.uploadedValue;return c$c[0]!==c$b?(c$F.mainContext.uniform1f(c$a.location,c$c[0]=c$b),1):0},c$b._uniform1fv=function(c$a,c$b){if(c$b.length<4){var c$c=c$a.uploadedValue;return c$c[0]!==c$b[0]||c$c[1]!==c$b[1]||c$c[2]!==c$b[2]||c$c[3]!==c$b[3]?(c$F.mainContext.uniform1fv(c$a.location,c$b),c$c[0]=c$b[0],c$c[1]=c$b[1],c$c[2]=c$b[2],c$c[3]=c$b[3],1):0}return c$F.mainContext.uniform1fv(c$a.location,c$b),1},c$b._uniform_vec2=function(c$a,c$b){var c$c=c$a.uploadedValue;return c$c[0]!==c$b[0]||c$c[1]!==c$b[1]?(c$F.mainContext.uniform2f(c$a.location,c$c[0]=c$b[0],c$c[1]=c$b[1]),1):0},c$b._uniform_vec2v=function(c$a,c$b){if(c$b.length<2){var c$c=c$a.uploadedValue;return c$c[0]!==c$b[0]||c$c[1]!==c$b[1]||c$c[2]!==c$b[2]||c$c[3]!==c$b[3]?(c$F.mainContext.uniform2fv(c$a.location,c$b),c$c[0]=c$b[0],c$c[1]=c$b[1],c$c[2]=c$b[2],c$c[3]=c$b[3],1):0}return c$F.mainContext.uniform2fv(c$a.location,c$b),1},c$b._uniform_vec3=function(c$a,c$b){var c$c=c$a.uploadedValue;return c$c[0]!==c$b[0]||c$c[1]!==c$b[1]||c$c[2]!==c$b[2]?(c$F.mainContext.uniform3f(c$a.location,c$c[0]=c$b[0],c$c[1]=c$b[1],c$c[2]=c$b[2]),1):0},c$b._uniform_vec3v=function(c$a,c$b){return c$F.mainContext.uniform3fv(c$a.location,c$b),1},c$b._uniform_vec4=function(c$a,c$b){var c$c=c$a.uploadedValue;return c$c[0]!==c$b[0]||c$c[1]!==c$b[1]||c$c[2]!==c$b[2]||c$c[3]!==c$b[3]?(c$F.mainContext.uniform4f(c$a.location,c$c[0]=c$b[0],c$c[1]=c$b[1],c$c[2]=c$b[2],c$c[3]=c$b[3]),1):0},c$b._uniform_vec4v=function(c$a,c$b){return c$F.mainContext.uniform4fv(c$a.location,c$b),1},c$b._uniformMatrix2fv=function(c$a,c$b){return c$F.mainContext.uniformMatrix2fv(c$a.location,!1,c$b),1},c$b._uniformMatrix3fv=function(c$a,c$b){return c$F.mainContext.uniformMatrix3fv(c$a.location,!1,c$b),1},c$b._uniformMatrix4fv=function(c$a,c$b){return c$F.mainContext.uniformMatrix4fv(c$a.location,!1,c$b),1},c$b._uinformMatrix2fv=function(c$a,c$b){return c$F.mainContext.uniformMatrix2fv(c$a.location,!1,c$b),1},c$b._uinformMatrix3fv=function(c$a,c$b){return c$F.mainContext.uniformMatrix3fv(c$a.location,!1,c$b),1},c$b._uniform1i=function(c$a,c$b){var c$c=c$a.uploadedValue;return c$c[0]!==c$b?(c$F.mainContext.uniform1i(c$a.location,c$c[0]=c$b),1):0},c$b._uniform1iv=function(c$a,c$b){return c$F.mainContext.uniform1iv(c$a.location,c$b),1},c$b._uniform_ivec2=function(c$a,c$b){var c$c=c$a.uploadedValue;return c$c[0]!==c$b[0]||c$c[1]!==c$b[1]?(c$F.mainContext.uniform2i(c$a.location,c$c[0]=c$b[0],c$c[1]=c$b[1]),1):0},c$b._uniform_ivec2v=function(c$a,c$b){return c$F.mainContext.uniform2iv(c$a.location,c$b),1},c$b._uniform_vec3i=function(c$a,c$b){var c$c=c$a.uploadedValue;return c$c[0]!==c$b[0]||c$c[1]!==c$b[1]||c$c[2]!==c$b[2]?(c$F.mainContext.uniform3i(c$a.location,c$c[0]=c$b[0],c$c[1]=c$b[1],c$c[2]=c$b[2]),1):0},c$b._uniform_vec3vi=function(c$a,c$b){return c$F.mainContext.uniform3iv(c$a.location,c$b),1},c$b._uniform_vec4i=function(c$a,c$b){var c$c=c$a.uploadedValue;return c$c[0]!==c$b[0]||c$c[1]!==c$b[1]||c$c[2]!==c$b[2]||c$c[3]!==c$b[3]?(c$F.mainContext.uniform4i(c$a.location,c$c[0]=c$b[0],c$c[1]=c$b[1],c$c[2]=c$b[2],c$c[3]=c$b[3]),1):0},c$b._uniform_vec4vi=function(c$a,c$b){return c$F.mainContext.uniform4iv(c$a.location,c$b),1},c$b._uniform_sampler2D=function(c$a,c$b){var c$c=c$b.source||c$b.defaulteTexture.source,c$d=c$F.mainContext,c$g=c$a.uploadedValue;if(null!=c$g[0])return c$d.activeTexture(c$m._TEXTURES[c$g[0]]),c$c&&c$G.bindTexture(c$d,3553,c$c),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return c$g[0]=this._curActTexIndex,c$d.uniform1i(c$a.location,this._curActTexIndex),c$d.activeTexture(c$m._TEXTURES[this._curActTexIndex]),c$c&&c$G.bindTexture(c$d,3553,c$c),this._curActTexIndex++,1},c$b._uniform_samplerCube=function(c$a,c$b){var c$c=c$b.source||c$b.defaulteTexture.source,c$d=c$F.mainContext,c$g=c$a.uploadedValue;if(null!=c$g[0])return c$d.activeTexture(c$m._TEXTURES[c$g[0]]),c$c?c$G.bindTexture(c$d,34067,c$c):c$G.bindTexture(c$d,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return c$g[0]=this._curActTexIndex,c$d.uniform1i(c$a.location,this._curActTexIndex),c$d.activeTexture(c$m._TEXTURES[this._curActTexIndex]),c$c?c$G.bindTexture(c$d,34067,c$c):c$G.bindTexture(c$d,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},c$b._noSetValue=function(c$a){console.log("no....:"+c$a.name)},c$b.bind=function(){return c$c.activeShader=this,(c$c.bindShader=this).activeResource(),c$G.UseProgram(this._program)},c$b.uploadAttributes=function(c$a,c$b){for(var c$c,c$d,c$g=0,c$h=0,c$i=this._attributeParamsMap.length;c$h<c$i;c$h+=2)c$d=this._attributeParamsMap[c$h+1],null!=(c$c=c$a[this._attributeParamsMap[c$h]])&&(c$b&&c$b[c$d.name]&&c$b[c$d.name].bind(),c$g+=c$d.fun.call(this,c$d,c$c));c$A.shaderCall+=c$g},c$b.uploadAttributesX=function(c$a,c$b){for(var c$c,c$d,c$g=0,c$h=0,c$i=this._attributeParamsMap.length;c$h<c$i;c$h+=2)c$d=this._attributeParamsMap[c$h+1],null!=(c$c=c$a[this._attributeParamsMap[c$h]])&&(c$b._bind(),c$g+=c$d.fun.call(this,c$d,c$c));c$A.shaderCall+=c$g},c$b.uploadSceneUniforms=function(c$a){for(var c$b,c$c,c$d=0,c$g=0,c$h=this._sceneUniformParamsMap.length;c$g<c$h;c$g+=2)c$c=this._sceneUniformParamsMap[c$g+1],null!=(c$b=c$a[this._sceneUniformParamsMap[c$g]])&&(c$d+=c$c.fun.call(this,c$c,c$b));c$A.shaderCall+=c$d},c$b.uploadCameraUniforms=function(c$a){for(var c$b,c$c,c$d=0,c$g=0,c$h=this._cameraUniformParamsMap.length;c$g<c$h;c$g+=2)c$c=this._cameraUniformParamsMap[c$g+1],null!=(c$b=c$a[this._cameraUniformParamsMap[c$g]])&&(c$d+=c$c.fun.call(this,c$c,c$b));c$A.shaderCall+=c$d},c$b.uploadSpriteUniforms=function(c$a){for(var c$b,c$c,c$d=0,c$g=0,c$h=this._spriteUniformParamsMap.length;c$g<c$h;c$g+=2)c$c=this._spriteUniformParamsMap[c$g+1],null!=(c$b=c$a[this._spriteUniformParamsMap[c$g]])&&(c$d+=c$c.fun.call(this,c$c,c$b));c$A.shaderCall+=c$d},c$b.uploadMaterialUniforms=function(c$a){for(var c$b,c$c,c$d=0,c$g=0,c$h=this._materialUniformParamsMap.length;c$g<c$h;c$g+=2)c$c=this._materialUniformParamsMap[c$g+1],null!=(c$b=c$a[this._materialUniformParamsMap[c$g]])&&(c$d+=c$c.fun.call(this,c$c,c$b));c$A.shaderCall+=c$d},c$b.uploadRenderElementUniforms=function(c$a){for(var c$b,c$c,c$d=0,c$g=0,c$h=this._renderElementUniformParamsMap.length;c$g<c$h;c$g+=2)c$c=this._renderElementUniformParamsMap[c$g+1],null!=(c$b=c$a[this._renderElementUniformParamsMap[c$g]])&&(c$d+=c$c.fun.call(this,c$c,c$b));c$A.shaderCall+=c$d},c$m.create=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l){return new c$m(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l)},c$m.addInclude=function(c$a,c$b){c$v.addInclude(c$a,c$b)},c$m._createShader=function(c$a,c$b,c$c){var c$d=c$a.createShader(c$c);if(c$a.shaderSource(c$d,c$b),c$a.compileShader(c$d),c$Ab.debugMode&&!c$a.getShaderParameter(c$d,35713))throw c$a.getShaderInfoLog(c$d);return c$d},c$m.PERIOD_RENDERELEMENT=0,c$m.PERIOD_MATERIAL=1,c$m.PERIOD_SPRITE=2,c$m.PERIOD_CAMERA=3,c$m.PERIOD_SCENE=4,c$m._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],c$m._count=0,c$m._preCompile=!1,c$m.extCompileFunc=null,c$m.extCompileObj=null,c$n(c$m,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new c$B}]),c$m}(),c$Mb=function(c$j){function c$k(){this._transformUV=null,c$k.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new c$ib(.6,.6,.6)),this._setColor(10,new c$ib(1,1,1)),this._setColor(11,new c$jb(1,1,1,8)),this._setColor(12,new c$ib(1,1,1)),this._setColor(7,new c$jb(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new c$jb(1,1,0,0)),this.renderMode=1}c$p(c$k,"laya.d3.core.material.StandardMaterial",c$j);var c$a=c$k.prototype;return c$a.disableLight=function(){this._addDisablePublicShaderDefine(c$Ab.SHADERDEFINE_POINTLIGHT|c$Ab.SHADERDEFINE_SPOTLIGHT|c$Ab.SHADERDEFINE_DIRECTIONLIGHT)},c$a.disableFog=function(){this._addDisablePublicShaderDefine(c$Ab.SHADERDEFINE_FOG)},c$a.onAsynLoaded=function(c$a,c$b,c$c){var c$d=c$b[0];if(c$d.version)c$j.prototype.onAsynLoaded.call(this,c$a,c$b,c$c);else{var c$g=c$b[1],c$h=c$d.props;for(var c$i in c$h)this[c$i]=c$h[c$i];c$k._parseStandardMaterial(c$g,this,c$d),this._endLoaded()}},c$a.cloneTo=function(c$a){c$j.prototype.cloneTo.call(this,c$a);var c$b=c$a;this._transformUV&&(c$b._transformUV=this._transformUV.clone())},c$q(0,c$a,"ambientColor",function(){return this._getColor(9)},function(c$a){this._setColor(9,c$a)}),c$q(0,c$a,"ambientTexture",function(){return this._getTexture(5)},function(c$a){c$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,c$a)}),c$q(0,c$a,"renderMode",null,function(c$a){switch(c$a){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(c$k.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(c$k.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(c$k.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(c$k.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(c$k.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(c$k.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(c$k.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(c$k.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(c$k.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(c$k.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(c$k.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(c$k.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(c$k.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(c$k.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(c$k.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(c$k.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(c$a)}),c$q(0,c$a,"reflectColor",function(){return this._getColor(12)},function(c$a){this._setColor(12,c$a)}),c$q(0,c$a,"tilingOffset",function(){return this._getColor(15)},function(c$a){if(c$a){var c$b=c$a.elements;1!=c$b[0]||1!=c$b[1]||0!=c$b[2]||0!=c$b[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,c$a)}),c$q(0,c$a,"albedo",function(){return this._getColor(7)},function(c$a){this._setColor(7,c$a)}),c$q(0,c$a,"diffuseColor",function(){return this._getColor(10)},function(c$a){this._setColor(10,c$a)}),c$q(0,c$a,"albedoColor",function(){return this._getColor(7)},function(c$a){this._setColor(7,c$a)}),c$q(0,c$a,"specularColor",function(){return this._getColor(11)},function(c$a){this._setColor(11,c$a)}),c$q(0,c$a,"diffuseTexture",function(){return this._getTexture(1)},function(c$a){c$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,c$a)}),c$q(0,c$a,"normalTexture",function(){return this._getTexture(2)},function(c$a){c$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,c$a)}),c$q(0,c$a,"specularTexture",function(){return this._getTexture(3)},function(c$a){c$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,c$a)}),c$q(0,c$a,"emissiveTexture",function(){return this._getTexture(4)},function(c$a){c$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,c$a)}),c$q(0,c$a,"reflectTexture",function(){return this._getTexture(6)},function(c$a){c$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,c$a)}),c$q(0,c$a,"transformUV",function(){return this._transformUV},function(c$a){this._transformUV=c$a,this._setMatrix4x4(13,c$a.matrix),c$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,c$a.matrix.elements,0)}),c$k.__init__=function(){c$k.SHADERDEFINE_DIFFUSEMAP=c$k.shaderDefines.registerDefine("DIFFUSEMAP"),c$k.SHADERDEFINE_NORMALMAP=c$k.shaderDefines.registerDefine("NORMALMAP"),c$k.SHADERDEFINE_SPECULARMAP=c$k.shaderDefines.registerDefine("SPECULARMAP"),c$k.SHADERDEFINE_EMISSIVEMAP=c$k.shaderDefines.registerDefine("EMISSIVEMAP"),c$k.SHADERDEFINE_AMBIENTMAP=c$k.shaderDefines.registerDefine("AMBIENTMAP"),c$k.SHADERDEFINE_REFLECTMAP=c$k.shaderDefines.registerDefine("REFLECTMAP"),c$k.SHADERDEFINE_UVTRANSFORM=c$k.shaderDefines.registerDefine("UVTRANSFORM"),c$k.SHADERDEFINE_TILINGOFFSET=c$k.shaderDefines.registerDefine("TILINGOFFSET"),c$k.SHADERDEFINE_ADDTIVEFOG=c$k.shaderDefines.registerDefine("ADDTIVEFOG")},c$k.load=function(c$a){return c$x.loader.create(c$a,null,null,c$k)},c$k._parseStandardMaterial=function(c$a,c$b,c$c){var c$d=c$c.customProps,c$g=c$d.ambientColor;c$b.ambientColor=new c$ib(c$g[0],c$g[1],c$g[2]);var c$h=c$d.diffuseColor;c$b.diffuseColor=new c$ib(c$h[0],c$h[1],c$h[2]);var c$i=c$d.specularColor;c$b.specularColor=new c$jb(c$i[0],c$i[1],c$i[2],c$i[3]);var c$j=c$d.reflectColor;c$b.reflectColor=new c$ib(c$j[0],c$j[1],c$j[2]);var c$k=c$d.albedoColor;c$k&&(c$b.albedo=new c$jb(c$k[0],c$k[1],c$k[2],c$k[3]));var c$l=c$d.diffuseTexture.texture2D;c$l&&(c$b.diffuseTexture=c$t.getRes(c$a[c$l]));var c$m=c$d.normalTexture.texture2D;c$m&&(c$b.normalTexture=c$t.getRes(c$a[c$m]));var c$n=c$d.specularTexture.texture2D;c$n&&(c$b.specularTexture=c$t.getRes(c$a[c$n]));var c$o=c$d.emissiveTexture.texture2D;c$o&&(c$b.emissiveTexture=c$t.getRes(c$a[c$o]));var c$p=c$d.ambientTexture.texture2D;c$p&&(c$b.ambientTexture=c$t.getRes(c$a[c$p]));var c$q=c$d.reflectTexture.texture2D;c$q&&(c$b.reflectTexture=c$t.getRes(c$a[c$q]))},c$k.RENDERMODE_OPAQUE=1,c$k.RENDERMODE_OPAQUEDOUBLEFACE=2,c$k.RENDERMODE_CUTOUT=3,c$k.RENDERMODE_CUTOUTDOUBLEFACE=4,c$k.RENDERMODE_TRANSPARENT=13,c$k.RENDERMODE_TRANSPARENTDOUBLEFACE=14,c$k.RENDERMODE_ADDTIVE=15,c$k.RENDERMODE_ADDTIVEDOUBLEFACE=16,c$k.RENDERMODE_DEPTHREAD_TRANSPARENT=5,c$k.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,c$k.RENDERMODE_DEPTHREAD_ADDTIVE=7,c$k.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,c$k.RENDERMODE_NONDEPTH_TRANSPARENT=9,c$k.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,c$k.RENDERMODE_NONDEPTH_ADDTIVE=11,c$k.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,c$k.SHADERDEFINE_DIFFUSEMAP=0,c$k.SHADERDEFINE_NORMALMAP=0,c$k.SHADERDEFINE_SPECULARMAP=0,c$k.SHADERDEFINE_EMISSIVEMAP=0,c$k.SHADERDEFINE_AMBIENTMAP=0,c$k.SHADERDEFINE_REFLECTMAP=0,c$k.SHADERDEFINE_UVTRANSFORM=0,c$k.SHADERDEFINE_TILINGOFFSET=0,c$k.SHADERDEFINE_ADDTIVEFOG=0,c$k.DIFFUSETEXTURE=1,c$k.NORMALTEXTURE=2,c$k.SPECULARTEXTURE=3,c$k.EMISSIVETEXTURE=4,c$k.AMBIENTTEXTURE=5,c$k.REFLECTTEXTURE=6,c$k.ALBEDO=7,c$k.UVANIAGE=8,c$k.MATERIALAMBIENT=9,c$k.MATERIALDIFFUSE=10,c$k.MATERIALSPECULAR=11,c$k.MATERIALREFLECT=12,c$k.UVMATRIX=13,c$k.UVAGE=14,c$k.TILINGOFFSET=15,c$n(c$k,["defaultMaterial",function(){var c$a=new c$k;return c$a.lock=!0,this.defaultMaterial=c$a},"shaderDefines",function(){return this.shaderDefines=new c$mb(c$Eb.shaderDefines)}]),c$k}(c$Eb),c$Nb=function(c$a){function c$i(c$a,c$b,c$c,c$d,c$g){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===c$c&&(c$c=35044),void 0===c$d&&(c$d=!1),c$i.__super.call(this),this._indexType=c$a,this._indexCount=c$b,this._bufferUsage=c$c,this._bufferType=34963,this._canRead=c$d;var c$h;if("ushort"==c$a)this._indexTypeByteCount=2;else{if("ubyte"!=c$a)throw new Error("unidentification index type.");this._indexTypeByteCount=1}c$h=this._indexTypeByteCount*c$b,this._byteLength=c$h,this._bind(),c$j._gl.bufferData(this._bufferType,c$h,this._bufferUsage),this.uri=c$g,c$d?("ushort"==c$a?this._buffer=new Uint16Array(c$b):"ubyte"==c$a&&(this._buffer=new Uint8Array(c$b)),this.memorySize=2*c$h):this.memorySize=c$h}c$p(c$i,"laya.d3.graphics.IndexBuffer3D",c$a);var c$b=c$i.prototype;return c$b.setData=function(c$a,c$b,c$c,c$d){void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0),void 0===c$d&&(c$d=4294967295);var c$g=0;if("ushort"==this._indexType?(c$g=2,0===c$c&&4294967295===c$d||(c$a=new Uint16Array(c$a.buffer,c$c*c$g,c$d))):"ubyte"==this._indexType&&(c$g=1,0===c$c&&4294967295===c$d||(c$a=new Uint8Array(c$a.buffer,c$c*c$g,c$d))),this._bind(),c$j._gl.bufferSubData(this._bufferType,c$b*c$g,c$a),this._canRead)if(0!==c$b||0!==c$c||4294967295!==c$d){var c$h=this._buffer.length-c$b;c$h<c$d&&(c$d=c$h);for(var c$i=0;c$i<c$d;c$i++)this._buffer[c$b+c$i]=c$a[c$i]}else this._buffer=c$a},c$b.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},c$b.disposeResource=function(){c$a.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},c$q(0,c$b,"indexType",function(){return this._indexType}),c$q(0,c$b,"indexTypeByteCount",function(){return this._indexTypeByteCount}),c$q(0,c$b,"indexCount",function(){return this._indexCount}),c$q(0,c$b,"canRead",function(){return this._canRead}),c$i.INDEXTYPE_UBYTE="ubyte",c$i.INDEXTYPE_USHORT="ushort",c$i.create=function(c$a,c$b,c$c,c$d,c$g){return void 0===c$c&&(c$c=35044),void 0===c$d&&(c$d=!1),new c$i(c$a,c$b,c$c,c$d,c$g)},c$i}(c$j),c$Ob=function(c$h){function c$i(c$a,c$b,c$c,c$d,c$g){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===c$d&&(c$d=!1),c$i.__super.call(this),this._vertexDeclaration=c$a,this._vertexCount=c$b,this._bufferUsage=c$c,this._bufferType=34962,this._canRead=c$d,this.uri=c$g,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*c$b,this._bind(),c$j._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),c$d&&(this._buffer=new Float32Array(this._byteLength/4))}c$p(c$i,"laya.d3.graphics.VertexBuffer3D",c$h);var c$a=c$i.prototype;return c$a.bindWithIndexBuffer=function(c$a){c$a&&c$a._bind(),this._bind()},c$a.setData=function(c$a,c$b,c$c,c$d){if(void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0),void 0===c$d&&(c$d=4294967295),0===c$c&&4294967295===c$d||(c$a=new Float32Array(c$a.buffer,4*c$c,c$d)),this._bind(),c$j._gl.bufferSubData(this._bufferType,4*c$b,c$a),this._canRead)if(0!==c$b||0!==c$c||4294967295!==c$d){var c$g=this._buffer.length-c$b;c$g<c$d&&(c$d=c$g);for(var c$h=0;c$h<c$d;c$h++)this._buffer[c$b+c$h]=c$a[c$h]}else this._buffer=c$a},c$a.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},c$a.disposeResource=function(){for(var c$a=c$F.mainContext,c$b=this._vertexDeclaration.getVertexElements(),c$c=c$j._enableAtributes,c$d=0,c$g=c$b.length;c$d<c$g;c$d++)c$c[c$d]===this._glBuffer&&(c$a.disableVertexAttribArray(c$d),c$c[c$d]=null);c$h.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},c$q(0,c$a,"vertexDeclaration",function(){return this._vertexDeclaration}),c$q(0,c$a,"vertexCount",function(){return this._vertexCount}),c$q(0,c$a,"canRead",function(){return this._canRead}),c$i.create=function(c$a,c$b,c$c,c$d,c$g){return void 0===c$c&&(c$c=35044),void 0===c$d&&(c$d=!1),new c$i(c$a,c$b,c$c,c$d,c$g)},c$i}(c$j),c$Pb=function(c$a){function c$v(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,c$v.__super.call(this),this._type=3553}c$p(c$v,"laya.d3.resource.DataTexture2D",c$Fb);var c$b=c$v.prototype;return c$b.genDebugMipmaps=function(){var c$a=[];return c$a.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),c$a.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),c$a.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),c$a.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),c$a.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),c$a.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),c$a.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),c$a.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),c$a.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),c$a.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),c$a},c$b._onTextureLoaded=function(c$a){},c$b._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var c$a=c$F.mainContext;c$a.getExtension("EXT_shader_texture_lod");var c$b=this._source=c$a.createTexture(),c$c=this._width,c$d=this._height,c$g=c$G.curBindTexTarget,c$h=c$G.curBindTexValue,c$i=!1;if(c$G.bindTexture(c$a,this._type,c$b),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var c$j=0;c$a.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var c$k=0;c$k<this._mipmaps.length;c$k++){if(this._mipmaps[c$k].byteLength!=c$l*c$m*4)throw"mipmap size error  level:"+c$k;c$a.texSubImage2D(this._type,0,c$v.simLodRect[c$j++],c$v.simLodRect[c$j++],c$v.simLodRect[c$j++],c$v.simLodRect[c$j++],6408,5121,new Uint8Array(this._mipmaps[c$k]))}this.minFifter=9729,this.magFifter=9729}else{var c$l=this._width,c$m=this._height;for(c$j=0,c$a.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),c$k=0;c$k<this._mipmaps.length;c$k++){if(this._mipmaps[c$k].byteLength!=c$l*c$m*4)throw"mipmap size error  level:"+c$k;c$a.texImage2D(this._type,c$k,6408,c$l,c$m,0,6408,5121,new Uint8Array(this._mipmaps[c$k])),(c$l/=2)<1&&(c$l=1),(c$m/=2)<1&&(c$m=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&c$a.pixelStorei(c$a.UNPACK_ALIGNMENT,1),c$a.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var c$n=0,c$o=!1,c$p=!1;this._buffer.byteLength==4*c$c*c$d?(c$n=6408,c$o=!0):this._buffer.byteLength==3*c$c*c$d?(c$n=6407,c$p=!0):c$n=this._format,c$o||c$p?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),c$p&&c$a.pixelStorei(c$a.UNPACK_ALIGNMENT,1),c$a.texImage2D(this._type,0,c$n,c$c,c$d,0,c$n,5121,this._buffer)):c$a&&c$n==c$a.ALPHA?(c$a.texImage2D(3553,0,c$n,c$c,c$d,0,c$n,c$a.UNSIGNED_BYTE,this._buffer),c$i=!0):0!=c$n&&(c$a.compressedTexImage2D(3553,0,c$n,c$c,c$d,0,this._buffer),c$i=!0)}var c$q=this._minFifter,c$r=this._magFifter,c$s=0==this._wrapModeU?10497:33071,c$t=0==this._wrapModeV?10497:33071,c$u=c$w.isPOT(c$c,c$d);c$u?(this._mipmap||this._mipmaps?-1!==c$q||(c$q=9987):-1!==c$q||(c$q=9729),-1!==c$r||(c$r=9729),c$a.texParameteri(this._type,10241,c$q),c$a.texParameteri(this._type,10240,c$r),c$a.texParameteri(this._type,10242,c$s),c$a.texParameteri(this._type,10243,c$t),this._mipmap&&c$a.generateMipmap(this._type)):(-1!==c$q||(c$q=9729),-1!==c$r||(c$r=9729),c$a.texParameteri(this._type,10241,c$q),c$a.texParameteri(this._type,10240,c$r),c$a.texParameteri(this._type,10242,33071),c$a.texParameteri(this._type,10243,33071)),c$g&&c$h&&c$G.bindTexture(c$a,c$g,c$h),this.memorySize=c$i?this._buffer.length:c$u?c$c*c$d*4*(1+1/3):c$c*c$d*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},c$b.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},c$b.onAsynLoaded=function(c$a,c$b,c$c){var c$d;c$c&&(c$d=c$c[0].call(this,c$b)),c$d&&(this._width=c$d.width,this._height=c$d.height,this._buffer=c$d.data),this._src=c$a,this._size=new c$rb(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},c$b.getPixels=function(){return new Uint8Array(this._buffer)},c$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(c$F.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},c$q(0,c$b,"src",function(){return this._src}),c$v.create=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){if(void 0===c$d&&(c$d=9729),void 0===c$g&&(c$g=9729),void 0===c$h&&(c$h=!0),!c$a||c$a.byteLength<c$b*c$c*4)throw"DataTexture2D create error";var c$j=new c$v;return c$j.uri=c$i,c$j._buffer=c$a,c$j._width=c$b,c$j._height=c$c,c$j._mipmap=c$h,c$j._magFifter=c$d,c$j._minFifter=c$g,c$j._size=new c$rb(c$j._width,c$j._height),c$j._conchTexture?alert("怎么给runtime传递datatexture数据"):c$j.activeResource(),c$j},c$v.load=function(c$a,c$b,c$c,c$d,c$g){if(void 0===c$b&&(c$b=0),void 0===c$c&&(c$c=0),void 0===c$d&&(c$d=9729),void 0===c$g&&(c$g=9729),"mipmaps"===c$C.getFileExtension(c$a)){var c$h=c$x.loader.create(c$a,null,null,c$v,[function(c$a){this._mipmaps=[];var c$b=new Uint32Array(c$a);this._width=c$b[0];var c$c=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,c$c=1024),this._width!=c$c)throw"现在只支持512x256的环境贴图。当前的是"+c$b[0];this._height=c$b[1];for(var c$d=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,c$g=this._height,c$h=8;;){var c$i=c$d*c$g*4;if(c$h+c$i>c$a.byteLength)throw"load mipmaps data size error ";var c$j=new Uint8Array(c$a,c$h,c$i);if(this._mipmaps.push(c$j),c$h+=c$i,1==c$d&&1==c$g)break;(c$d/=2)<1&&(c$d=1),(c$g/=2)<1&&(c$g=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){c$h.simLodInfo=new Float32Array(40);for(var c$i=0;c$i<c$h.simLodInfo.length;)c$h.simLodInfo[c$i]=(c$v.simLodRect[c$i]+.5)/1024,c$i++,c$h.simLodInfo[c$i]=(c$v.simLodRect[c$i]+.5)/256,c$i++,c$h.simLodInfo[c$i]=Math.max(c$v.simLodRect[c$i]-1,.1)/1024,c$i++,c$h.simLodInfo[c$i]=Math.max(c$v.simLodRect[c$i]-1.5,.1)/256,c$i++}return c$h}if("number"==typeof c$b)return c$x.loader.create(c$a,null,null,c$v,[function(c$a){return this._width=c$b,this._height=c$c,this._buffer=c$a,null}]);if("function"==typeof c$b)return c$x.loader.create(c$a,null,null,c$v,[c$b]);throw new Error("unknown params.")},c$v.lodasatlas=!1,c$n(c$v,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),c$v}(),c$Qb=function(c$a){function c$b(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,c$b.__super.call(this)}c$p(c$b,"laya.d3.resource.models.PrimitiveMesh",c$Gb);var c$c=c$b.prototype;return c$x.imps(c$c,{"laya.d3.core.render.IRenderable":!0}),c$c._getVertexBuffer=function(c$a){return void 0===c$a&&(c$a=0),0===c$a?this._vertexBuffer:null},c$c._getVertexBuffers=function(){return null},c$c._getIndexBuffer=function(){return this._indexBuffer},c$c._getPositions=function(){var c$a,c$b=[],c$c=this._vertexBuffer.vertexDeclaration.getVertexElements(),c$d=0;for(c$d=0;c$d<c$c.length;c$d++){var c$g=c$c[c$d];if("vector3"===c$g.elementFormat&&0===c$g.elementUsage){c$a=c$g;break}}var c$h=this._vertexBuffer.getData();for(c$d=0;c$d<c$h.length;c$d+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var c$i=c$d+c$a.offset/4,c$j=new c$ib(c$h[c$i+0],c$h[c$i+1],c$h[c$i+2]);c$b.push(c$j)}return c$b},c$c.getRenderElement=function(c$a){return this},c$c.getRenderElementsCount=function(){return 1},c$c.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},c$c._beforeRender=function(c$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},c$c._render=function(c$a){c$F.mainContext.drawElements(4,this._numberIndices,5123,0),c$A.drawCall++,c$A.trianglesFaces+=this._numberIndices/3},c$q(0,c$c,"_vertexBufferCount",function(){return 1}),c$q(0,c$c,"triangleCount",function(){return this._indexBuffer.indexCount/3}),c$b}(),c$Rb=function(c$a){function c$b(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,c$b.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}c$p(c$b,"laya.d3.resource.models.Mesh",c$Gb);var c$c=c$b.prototype;return c$c._getPositions=function(){var c$a,c$b,c$c,c$d,c$g,c$h=[],c$i=0,c$j=0,c$k=0;if(0!==this._vertexBuffers.length){var c$l=this._vertexBuffers.length;for(c$i=0;c$i<c$l;c$i++){for(c$c=(c$a=this._vertexBuffers[c$i]).vertexDeclaration.getVertexElements(),c$j=0;c$j<c$c.length;c$j++)if("vector3"===(c$d=c$c[c$j]).elementFormat&&0===c$d.elementUsage){c$b=c$d;break}for(c$g=c$a.getData(),c$j=0;c$j<c$g.length;c$j+=c$a.vertexDeclaration.vertexStride/4)c$k=c$j+c$b.offset/4,c$h.push(new c$ib(c$g[c$k+0],c$g[c$k+1],c$g[c$k+2]))}}else{var c$m=this._subMeshes.length;for(c$i=0;c$i<c$m;c$i++){for(c$c=(c$a=this._subMeshes[c$i]._getVertexBuffer()).vertexDeclaration.getVertexElements(),c$j=0;c$j<c$c.length;c$j++)if("vector3"===(c$d=c$c[c$j]).elementFormat&&0===c$d.elementUsage){c$b=c$d;break}for(c$g=c$a.getData(),c$j=0;c$j<c$g.length;c$j+=c$a.vertexDeclaration.vertexStride/4)c$k=c$j+c$b.offset/4,c$h.push(new c$ib(c$g[c$k+0],c$g[c$k+1],c$g[c$k+2]))}}return c$h},c$c._setSubMeshes=function(c$a){this._subMeshes=c$a,this._subMeshCount=c$a.length;for(var c$b=0;c$b<this._subMeshCount;c$b++)c$a[c$b]._indexInMesh=c$b;this._positions=this._getPositions(),this._generateBoundingObject()},c$c.onAsynLoaded=function(c$a,c$b,c$c){var c$d=c$b[0],c$g=c$b[1];c$Ya.read(c$d,this,this._materials,this._subMeshes,c$g),this.completeCreate(),this._endLoaded()},c$c.getSubMesh=function(c$a){return this._subMeshes[c$a]},c$c.getSubMeshCount=function(){return this._subMeshes.length},c$c.getRenderElementsCount=function(){return this._subMeshes.length},c$c.getRenderElement=function(c$a){return this._subMeshes[c$a]},c$c.disposeResource=function(){for(var c$a=0;c$a<this._subMeshes.length;c$a++)this._subMeshes[c$a].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},c$q(0,c$c,"materials",function(){return this._materials.slice()}),c$q(0,c$c,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),c$b.load=function(c$a){return c$x.loader.create(c$a,null,null,c$b)},c$b}(),c$Sb=(function(c$a){function c$l(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===c$c&&(c$c=6408),void 0===c$d&&(c$d=5121),void 0===c$g&&(c$g=33189),void 0===c$h&&(c$h=!1),void 0===c$i&&(c$i=!1),void 0===c$j&&(c$j=-1),void 0===c$k&&(c$k=-1),c$l.__super.call(this),this._type=3553,this._width=c$a,this._height=c$b,this._size=new c$rb(c$a,c$b),this._surfaceFormat=c$c,this._surfaceType=c$d,this._depthStencilFormat=c$g,c$r.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=c$h,this._repeat=c$i,this._minFifter=c$j,this._magFifter=c$k,this.activeResource(),this._alreadyResolved=!0}c$p(c$l,"laya.d3.resource.RenderTexture",c$Fb);var c$b=c$l.prototype;c$b.recreateResource=function(){var c$a=c$F.mainContext;this._frameBuffer=c$a.createFramebuffer(),this._source=c$a.createTexture();var c$b=c$G.curBindTexTarget,c$c=c$G.curBindTexValue;c$G.bindTexture(c$a,this._type,this._source),c$a.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var c$d=this._minFifter,c$g=this._magFifter,c$h=this._repeat?10497:33071;if(c$w.isPOT(this._width,this._height)?(this._mipmap?-1!==c$d||(c$d=9987):-1!==c$d||(c$d=9729),-1!==c$g||(c$g=9729),c$a.texParameteri(this._type,10241,c$d),c$a.texParameteri(this._type,10240,c$g),c$a.texParameteri(this._type,10242,c$h),c$a.texParameteri(this._type,10243,c$h),this._mipmap&&c$a.generateMipmap(this._type)):(-1!==c$d||(c$d=9729),-1!==c$g||(c$g=9729),c$a.texParameteri(this._type,10241,c$d),c$a.texParameteri(this._type,10240,c$g),c$a.texParameteri(this._type,10242,33071),c$a.texParameteri(this._type,10243,33071)),c$b&&c$c&&c$G.bindTexture(c$a,c$b,c$c),c$a.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=c$a.createRenderbuffer(),c$a.bindRenderbuffer(36161,this._depthStencilBuffer),c$a.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),c$a.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:c$a.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:c$a.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:c$a.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}c$a.framebufferTexture2D(36160,36064,3553,this._source,0),c$a.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},c$b.start=function(){c$F.mainContext.bindFramebuffer(36160,this.frameBuffer),(c$l._currentRenderTarget=this)._alreadyResolved=!1},c$b.end=function(){c$F.mainContext.bindFramebuffer(36160,null),c$l._currentRenderTarget=null,this._alreadyResolved=!0},c$b.getData=function(c$a,c$b,c$c,c$d){var c$g=c$F.mainContext;if(c$g.bindFramebuffer(36160,this._frameBuffer),!(36053===c$g.checkFramebufferStatus(36160)))return c$g.bindFramebuffer(36160,null),null;var c$h=new Uint8Array(this._width*this._height*4);return c$g.readPixels(c$a,c$b,c$c,c$d,this._surfaceFormat,this._surfaceType,c$h),c$g.bindFramebuffer(36160,null),c$h},c$b.disposeResource=function(){if(this._frameBuffer){var c$a=c$F.mainContext;c$a.deleteTexture(this._source),c$a.deleteFramebuffer(this._frameBuffer),c$a.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},c$q(0,c$b,"surfaceFormat",function(){return this._surfaceFormat}),c$q(0,c$b,"surfaceType",function(){return this._surfaceType}),c$q(0,c$b,"depthStencilFormat",function(){return this._depthStencilFormat}),c$q(0,c$b,"source",function(){return this._alreadyResolved?c$x.superGet(c$Fb,this,"source"):null}),c$q(0,c$b,"depthStencilBuffer",function(){return this._depthStencilBuffer}),c$q(0,c$b,"frameBuffer",function(){return this._frameBuffer}),c$l._currentRenderTarget=null}(),function(c$a){function c$b(c$a){this._color=null,this._pixels=null,c$b.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new c$rb(this.width,this.height),this._color=c$a,this._pixels=new Uint8Array([255*c$a.x,255*c$a.y,255*c$a.z,255*c$a.w]),this.uri="SolidColorTexture2D_"+this.id}c$p(c$b,"laya.d3.resource.SolidColorTexture2D",c$Fb);var c$c=c$b.prototype;return c$c._createWebGlTexture=function(){var c$a=c$F.mainContext,c$b=this._source=c$a.createTexture(),c$c=this._width,c$d=this._height,c$g=c$G.curBindTexTarget,c$h=c$G.curBindTexValue;c$G.bindTexture(c$a,this._type,c$b),c$a.texImage2D(this._type,0,6408,c$c,c$d,0,6408,5121,this._pixels);var c$i=this._minFifter,c$j=this._magFifter,c$k=this._repeat?10497:33071,c$l=c$w.isPOT(c$c,c$d);c$l?(this._mipmap?-1!==c$i||(c$i=9987):-1!==c$i||(c$i=9729),-1!==c$j||(c$j=9729),c$a.texParameteri(this._type,10241,c$i),c$a.texParameteri(this._type,10240,c$j),c$a.texParameteri(this._type,10242,c$k),c$a.texParameteri(this._type,10243,c$k),this._mipmap&&c$a.generateMipmap(this._type)):(-1!==c$i||(c$i=9729),-1!==c$j||(c$j=9729),c$a.texParameteri(this._type,10241,c$i),c$a.texParameteri(this._type,10240,c$j),c$a.texParameteri(this._type,10242,33071),c$a.texParameteri(this._type,10243,33071)),c$g&&c$h&&c$G.bindTexture(c$a,c$g,c$h),this.memorySize=c$l?c$c*c$d*4*(1+1/3):c$c*c$d*4},c$c.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},c$c.disposeResource=function(){this._source&&(c$F.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},c$n(c$b,["magentaTexture",function(){var c$a=new c$b(new c$jb(1,0,1,1));return c$a.lock=!0,this.magentaTexture=c$a},"grayTexture",function(){var c$a=new c$b(new c$jb(.5,.5,.5,1));return c$a.lock=!0,this.grayTexture=c$a}]),c$b}()),c$Tb=function(c$a){function c$g(c$a,c$b,c$c,c$d){this._canRead=!1,this._image=null,this._pixels=null,void 0===c$a&&(c$a=!1),void 0===c$b&&(c$b=!0),void 0===c$c&&(c$c=6408),void 0===c$d&&(c$d=!0),c$g.__super.call(this),this._type=3553,this._repeat=c$b,this._canRead=c$a,this._format=c$c,this._mipmap=c$d}c$p(c$g,"laya.d3.resource.Texture2D",c$Fb);var c$b=c$g.prototype;return c$b._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var c$a=c$F.mainContext,c$b=this._source=c$a.createTexture(),c$c=this._width,c$d=this._height,c$g=c$G.curBindTexTarget,c$h=c$G.curBindTexValue;switch(c$G.bindTexture(c$a,this._type,c$b),this._format){case 6407:case 6408:this._canRead?c$a.texImage2D(this._type,0,this._format,c$c,c$d,0,this._format,5121,this._pixels):this._image instanceof laya.webgl.resource.WebGLImage?c$a.texImage2D(this._type,0,this._image._format,c$c,c$d,0,this._image._format,5121,this._image.atlasSource):c$a.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case c$F.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:c$a.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var c$i=this._minFifter,c$j=this._magFifter,c$k=this._repeat?10497:33071,c$l=0==this._wrapModeU?10497:33071,c$m=0==this._wrapModeV?10497:33071,c$n=c$w.isPOT(c$c,c$d);c$n?(this._mipmap?-1!==c$i||(c$i=9987):-1!==c$i||(c$i=9729),-1!==c$j||(c$j=9729),c$a.texParameteri(this._type,10241,c$i),c$a.texParameteri(this._type,10240,c$j),c$a.texParameteri(this._type,10242,c$k),c$a.texParameteri(this._type,10243,c$k),c$a.texParameteri(this._type,10242,c$l),c$a.texParameteri(this._type,10243,c$m),this._mipmap&&c$a.generateMipmap(this._type)):(-1!==c$i||(c$i=9729),-1!==c$j||(c$j=9729),c$a.texParameteri(this._type,10241,c$i),c$a.texParameteri(this._type,10240,c$j),c$a.texParameteri(this._type,10242,33071),c$a.texParameteri(this._type,10243,33071)),c$g&&c$h&&c$G.bindTexture(c$a,c$g,c$h),this._image.onload=null,this._image=null,this.memorySize=c$n?c$c*c$d*4*(1+1/3):c$c*c$d*4},c$b.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},c$b.onAsynLoaded=function(c$a,c$b,c$c){if(c$c){var c$d=c$c[0];void 0!==c$d&&(this._canRead=c$d);var c$g=c$c[1];void 0!==c$g&&(this._repeat=c$g);var c$h=c$c[2];void 0!==c$h&&(this._format=c$h);var c$i=c$c[3];void 0!==c$i&&(this._mipmap=c$i);var c$j=c$c.wrapModeU;void 0!==c$j&&(this._wrapModeU=c$j);var c$k=c$c.wrapModeV;void 0!==c$k&&(this._wrapModeV=c$k)}switch(this._format){case 6407:case 6408:var c$l=(this._image=c$b).width,c$m=c$b.height;this._width=c$l,this._height=c$m,this._size=new c$rb(c$l,c$m),this._canRead&&(c$r.isConchApp?c$b instanceof c$o.HTMLElement&&(this._pixels=new Uint8Array(c$b.getImageData(0,0,c$l,c$m))):(c$H.canvas.size(c$l,c$m),c$H.canvas.clear(),c$H.context.drawImage(c$b,0,0,c$l,c$m),this._pixels=new Uint8Array(c$H.context.getImageData(0,0,c$l,c$m).data.buffer)));break;case c$F.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var c$n=new c$y(c$b);c$n.readUTFBytes(4),c$n.readUTFBytes(2),c$n.getInt16();c$n.endian="bigEndian",this._width=c$n.getInt16(),this._height=c$n.getInt16(),this._size=new c$rb(this._width,this._height);c$n.getInt16(),c$n.getInt16();this._image=new Uint8Array(c$b,c$n.pos)}this.recreateResource(),this._endLoaded()},c$b.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},c$b.disposeResource=function(){this._source&&(c$F.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},c$q(0,c$b,"_src",function(){return this.url}),c$q(0,c$b,"src",function(){return this.url}),c$g.load=function(c$a){return c$x.loader.create(c$a,null,null,c$g)},c$g}(),c$Ub=function(c$b){function c$c(c$a,c$b){c$c.__super.call(this),void 0===c$a&&(c$a=.3),void 0===c$b&&(c$b=1e3),this._tempVector3=new c$ib,this._position=new c$ib,this._up=new c$ib,this._forward=new c$ib,this._right=new c$ib,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=c$rb.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=c$a,this._farPlane=c$b,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),c$x.stage.on("resize",this,this._onScreenSizeChanged)}c$p(c$c,"laya.d3.core.BaseCamera",c$b);var c$a=c$c.prototype;return c$a._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var c$a=this.scene._cameraPool,c$b=c$a.length-1,c$c=0;c$c<c$b;c$c++)if(c$a[c$c].renderingOrder>c$a[c$b].renderingOrder){var c$d=c$a[c$c];c$a[c$c]=c$a[c$b],c$a[c$b]=c$d}},c$a._calculateProjectionMatrix=function(){},c$a._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},c$a._prepareCameraToRender=function(){c$I._currentCameraCullingMask=this.cullingMask;var c$a=this._shaderValues;c$a.setValue(0,this.transform.position.elements),c$a.setValue(5,this.forward.elements),c$a.setValue(6,this.up.elements)},c$a._prepareCameraViewProject=function(c$a,c$b){var c$c=this._shaderValues;c$c.setValue(1,c$a.elements),c$c.setValue(2,c$b.elements)},c$a._renderCamera=function(c$a,c$b,c$c){},c$a.addLayer=function(c$a){29!==c$a.number&&30!=c$a.number&&(this.cullingMask=this.cullingMask|c$a.mask)},c$a.removeLayer=function(c$a){29!==c$a.number&&30!=c$a.number&&(this.cullingMask=this.cullingMask&~c$a.mask)},c$a.addAllLayers=function(){this.cullingMask=2147483647},c$a.removeAllLayers=function(){this.cullingMask=0|c$I.getLayerByNumber(29).mask|c$I.getLayerByNumber(30).mask},c$a.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},c$a.moveForward=function(c$a){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=c$a,this.transform.translate(this._tempVector3)},c$a.moveRight=function(c$a){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=c$a,this.transform.translate(this._tempVector3)},c$a.moveVertical=function(c$a){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=c$a,this.transform.translate(this._tempVector3,!1)},c$a._addSelfRenderObjects=function(){var c$a=this.scene._cameraPool,c$b=c$a.length;if(0<c$b){for(var c$c=c$b-1;0<=c$c;c$c--)if(this.renderingOrder<=c$a[c$c].renderingOrder){c$a.splice(c$c+1,0,this);break}}else c$a.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},c$a._clearSelfRenderObjects=function(){var c$a=this.scene._cameraPool;c$a.splice(c$a.indexOf(this),1)},c$a.destroy=function(c$a){void 0===c$a&&(c$a=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,c$x.stage.off("resize",this,this._onScreenSizeChanged),c$b.prototype.destroy.call(this,c$a)},c$q(0,c$a,"sky",function(){return this._sky},function(c$a){(this._sky=c$a)._ownerCamera=this}),c$q(0,c$a,"forward",function(){var c$a=this.transform.worldMatrix.elements,c$b=this._forward.elements;return c$b[0]=-c$a[8],c$b[1]=-c$a[9],c$b[2]=-c$a[10],this._forward}),c$q(0,c$a,"position",function(){var c$a=this.transform.worldMatrix.elements,c$b=this._position.elements;return c$b[0]=c$a[12],c$b[1]=c$a[13],c$b[2]=c$a[14],this._position}),c$q(0,c$a,"renderTarget",function(){return this._renderTarget},function(c$a){null!=(this._renderTarget=c$a)&&(this._renderTargetSize=c$a.size)}),c$q(0,c$a,"up",function(){var c$a=this.transform.worldMatrix.elements,c$b=this._up.elements;return c$b[0]=c$a[4],c$b[1]=c$a[5],c$b[2]=c$a[6],this._up}),c$q(0,c$a,"right",function(){var c$a=this.transform.worldMatrix.elements,c$b=this._right.elements;return c$b[0]=c$a[0],c$b[1]=c$a[1],c$b[2]=c$a[2],this._right}),c$q(0,c$a,"renderTargetSize",function(){return this._renderTargetSize},function(c$a){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=c$a,this._calculateProjectionMatrix()}),c$q(0,c$a,"fieldOfView",function(){return this._fieldOfView},function(c$a){this._fieldOfView=c$a,this._calculateProjectionMatrix()}),c$q(0,c$a,"nearPlane",function(){return this._nearPlane},function(c$a){this._nearPlane=c$a,this._calculateProjectionMatrix()}),c$q(0,c$a,"farPlane",function(){return this._farPlane},function(c$a){this._farPlane=c$a,this._calculateProjectionMatrix()}),c$q(0,c$a,"orthographic",function(){return this._orthographic},function(c$a){this._orthographic=c$a,this._calculateProjectionMatrix()}),c$q(0,c$a,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(c$a){this._orthographicVerticalSize=c$a,this._calculateProjectionMatrix()}),c$q(0,c$a,"renderingOrder",function(){return this._renderingOrder},function(c$a){this._renderingOrder=c$a,this._sortCamerasByRenderingOrder()}),c$c.CAMERAPOS=0,c$c.VIEWMATRIX=1,c$c.PROJECTMATRIX=2,c$c.VPMATRIX=3,c$c.VPMATRIX_NO_TRANSLATE=4,c$c.CAMERADIRECTION=5,c$c.CAMERAUP=6,c$c.ENVIRONMENTDIFFUSE=7,c$c.ENVIRONMENTSPECULAR=8,c$c.SIMLODINFO=9,c$c.DIFFUSEIRRADMATR=10,c$c.DIFFUSEIRRADMATG=11,c$c.DIFFUSEIRRADMATB=12,c$c.HDREXPOSURE=13,c$c.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",c$c.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",c$c.CLEARFLAG_SOLIDCOLOR=0,c$c.CLEARFLAG_SKY=1,c$c.CLEARFLAG_DEPTHONLY=2,c$c.CLEARFLAG_NONE=3,c$n(c$c,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new c$ab(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new c$ab},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new c$ab}]),c$c}(c$Kb),c$Vb=function(c$c){function c$b(c$a){this._render=null,this._geometryFilter=null,c$b.__super.call(this,c$a)}c$p(c$b,"laya.d3.core.RenderableSprite3D",c$c);var c$a=c$b.prototype;return c$a._addToInitStaticBatchManager=function(){},c$a._setBelongScene=function(c$a){c$c.prototype._setBelongScene.call(this,c$a),c$a._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},c$a._setUnBelongScene=function(){var c$a=this._scene._renderableSprite3Ds,c$b=c$a.indexOf(this);c$a.splice(c$b,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),c$c.prototype._setUnBelongScene.call(this)},c$a._update=function(c$a){(c$a.owner=this)._activeInHierarchy&&(this._updateComponents(c$a),this._render._updateOctreeNode(),this._lateUpdateComponents(c$a),c$A.spriteCount++,this._childs.length&&this._updateChilds(c$a))},c$a.destroy=function(c$a){void 0===c$a&&(c$a=!0),c$c.prototype.destroy.call(this,c$a),this._render._destroy(),this._render=null},c$b.__init__=function(){c$b.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=c$b.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),c$b.SAHDERDEFINE_LIGHTMAP=c$b.shaderDefines.registerDefine("LIGHTMAP")},c$b.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,c$b.SAHDERDEFINE_LIGHTMAP=4,c$b.LIGHTMAPSCALEOFFSET=2,c$b.LIGHTMAP=3,c$n(c$b,["shaderDefines",function(){return this.shaderDefines=new c$mb}]),c$b}(c$Kb),c$Wb=(function(c$a){function c$d(c$a,c$b,c$c){this._long=NaN,this._width=NaN,this._height=NaN,void 0===c$a&&(c$a=1),void 0===c$b&&(c$b=1),void 0===c$c&&(c$c=1),c$d.__super.call(this),this._long=c$a,this._width=c$b,this._height=c$c,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}c$p(c$d,"laya.d3.resource.models.BoxMesh",c$Qb);var c$b=c$d.prototype;c$b.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var c$a=c$Fa.vertexDeclaration,c$b=(c$a.vertexStride,this._long/2),c$c=this._height/2,c$d=this._width/2,c$g=new Float32Array([-c$b,c$c,-c$d,0,1,0,0,0,c$b,c$c,-c$d,0,1,0,1,0,c$b,c$c,c$d,0,1,0,1,1,-c$b,c$c,c$d,0,1,0,0,1,-c$b,-c$c,-c$d,0,-1,0,0,1,c$b,-c$c,-c$d,0,-1,0,1,1,c$b,-c$c,c$d,0,-1,0,1,0,-c$b,-c$c,c$d,0,-1,0,0,0,-c$b,c$c,-c$d,-1,0,0,0,0,-c$b,c$c,c$d,-1,0,0,1,0,-c$b,-c$c,c$d,-1,0,0,1,1,-c$b,-c$c,-c$d,-1,0,0,0,1,c$b,c$c,-c$d,1,0,0,1,0,c$b,c$c,c$d,1,0,0,0,0,c$b,-c$c,c$d,1,0,0,0,1,c$b,-c$c,-c$d,1,0,0,1,1,-c$b,c$c,c$d,0,0,1,0,0,c$b,c$c,c$d,0,0,1,1,0,c$b,-c$c,c$d,0,0,1,1,1,-c$b,-c$c,c$d,0,0,1,0,1,-c$b,c$c,-c$d,0,0,-1,1,0,c$b,c$c,-c$d,0,0,-1,0,0,c$b,-c$c,-c$d,0,0,-1,0,1,-c$b,-c$c,-c$d,0,0,-1,1,1]),c$h=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new c$Ob(c$a,this._numberVertices,35044,!0),this._indexBuffer=new c$Nb("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(c$g),this._indexBuffer.setData(c$h),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},c$q(0,c$b,"long",function(){return this._long},function(c$a){this._long!==c$a&&(this._long=c$a,this.releaseResource(),this.activeResource())}),c$q(0,c$b,"width",function(){return this._width},function(c$a){this._width!==c$a&&(this._width=c$a,this.releaseResource(),this.activeResource())}),c$q(0,c$b,"height",function(){return this._height},function(c$a){this._height!==c$a&&(this._height=c$a,this.releaseResource(),this.activeResource())})}(),function(c$a){function c$i(c$a,c$b,c$c){void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=.3),void 0===c$c&&(c$c=1e3),this._viewMatrix=new c$ab,this._projectionMatrix=new c$ab,this._projectionViewMatrix=new c$ab,this._viewport=new c$kb(0,0,0,0),this._normalizedViewport=new c$kb(0,0,1,1),this._aspectRatio=c$a,this._boundFrustumUpdate=!0,this._boundFrustum=new c$$a(c$ab.DEFAULT),c$i.__super.call(this,c$b,c$c),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}c$p(c$i,"laya.d3.core.Camera",c$Ub);var c$b=c$i.prototype;return c$b._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},c$b._parseCustomProps=function(c$a,c$b,c$c,c$d){var c$g=c$c.clearColor;this.clearColor=new c$jb(c$g[0],c$g[1],c$g[2],c$g[3]);var c$h=c$c.viewport;this.normalizedViewport=new c$kb(c$h[0],c$h[1],c$h[2],c$h[3])},c$b._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var c$a=this.orthographicVerticalSize*this.aspectRatio*.5,c$b=.5*this.orthographicVerticalSize;c$ab.createOrthoOffCenterRH(-c$a,c$a,-c$b,c$b,this.nearPlane,this.farPlane,this._projectionMatrix)}else c$ab.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},c$b._update=function(c$a){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,c$a)},c$b._renderCamera=function(c$a,c$b,c$c){var c$d,c$g;c$c.parallelSplitShadowMaps[0]&&c$c._renderShadowMap(c$a,c$b,this),(c$b.camera=this)._prepareCameraToRender(),c$c._preRenderUpdateComponents(c$b),c$d=c$b._viewMatrix=this.viewMatrix;var c$h=this._renderTarget;c$h?(c$h.start(),c$ab.multiply(c$Ub._invertYScaleMatrix,this._projectionMatrix,c$Ub._invertYProjectionMatrix),c$ab.multiply(c$Ub._invertYScaleMatrix,this.projectionViewMatrix,c$Ub._invertYProjectionViewMatrix),c$g=c$b._projectionMatrix=c$Ub._invertYProjectionMatrix,c$b._projectionViewMatrix=c$Ub._invertYProjectionViewMatrix):(c$g=c$b._projectionMatrix=this._projectionMatrix,c$b._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(c$d,c$g),c$b._viewport=this.viewport,c$c._preRenderScene(c$a,c$b,this.boundFrustum),c$c._clear(c$a,c$b),c$c._renderScene(c$a,c$b),c$c._postRenderUpdateComponents(c$b),c$h&&c$h.end()},c$b.viewportPointToRay=function(c$a,c$b){c$qb.calculateCursorRay(c$a,this.viewport,this._projectionMatrix,this.viewMatrix,null,c$b)},c$b.normalizedViewportPointToRay=function(c$a,c$b){var c$c=c$i._tempVector20,c$d=this.viewport,c$g=c$a.elements,c$h=c$c.elements;c$h[0]=c$g[0]*c$d.width,c$h[1]=c$g[1]*c$d.height,c$qb.calculateCursorRay(c$c,this.viewport,this._projectionMatrix,this.viewMatrix,null,c$b)},c$b.worldToViewportPoint=function(c$a,c$b){c$ab.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(c$a,this._projectionViewMatrix,c$b);var c$c=c$b.elements;c$c[0]=c$c[0]/c$x.stage.clientScaleX,c$c[1]=c$c[1]/c$x.stage.clientScaleY},c$b.worldToNormalizedViewportPoint=function(c$a,c$b){c$ab.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(c$a,this._projectionViewMatrix,c$b);var c$c=c$b.elements;c$c[0]=c$c[0]/c$x.stage.clientScaleX,c$c[1]=c$c[1]/c$x.stage.clientScaleY},c$b.convertScreenCoordToOrthographicCoord=function(c$a,c$b){if(this._orthographic){var c$c=c$Y.clientWidth,c$d=c$Y.clientHeight,c$g=this.orthographicVerticalSize*this.aspectRatio/c$c,c$h=this.orthographicVerticalSize/c$d,c$i=c$a.elements,c$j=c$b.elements;return c$j[0]=(-c$c/2+c$i[0])*c$g,c$j[1]=(c$d/2-c$i[1])*c$h,c$j[2]=(this.nearPlane-this.farPlane)*(c$i[2]+1)/2-this.nearPlane,c$ib.transformCoordinate(c$b,this.transform.worldMatrix,c$b),!0}return!1},c$q(0,c$b,"projectionViewMatrix",function(){return c$ab.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),c$q(0,c$b,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var c$a=this.viewport;return c$a.width/c$a.height},function(c$a){if(c$a<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=c$a,this._calculateProjectionMatrix()}),c$q(0,c$b,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),c$q(0,c$b,"needViewport",function(){var c$a=this.normalizedViewport;return 0===c$a.x&&0===c$a.y&&1===c$a.width&&1===c$a.height}),c$q(0,c$b,"viewport",function(){if(this._viewportExpressedInClipSpace){var c$a=this._normalizedViewport,c$b=this.renderTargetSize,c$c=c$b.width,c$d=c$b.height;this._viewport.x=c$a.x*c$c,this._viewport.y=c$a.y*c$d,this._viewport.width=c$a.width*c$c,this._viewport.height=c$a.height*c$d}return this._viewport},function(c$a){if(null!=this.renderTarget&&(c$a.x<0||c$a.y<0||0==c$a.width||0==c$a.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=c$a,this._calculateProjectionMatrix()}),c$q(0,c$b,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var c$a=this._viewport,c$b=this.renderTargetSize,c$c=c$b.width,c$d=c$b.height;this._normalizedViewport.x=c$a.x/c$c,this._normalizedViewport.y=c$a.y/c$d,this._normalizedViewport.width=c$a.width/c$c,this._normalizedViewport.height=c$a.height/c$d}return this._normalizedViewport},function(c$a){c$a.x<0&&(c$a.x=0,console.warn("Camera: viewport.x must large than 0.0.")),c$a.y<0&&(c$a.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<c$a.x+c$a.width&&(c$a.width=1-c$a.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<c$a.y+c$a.height&&(c$a.height=1-c$a.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=c$a,this._calculateProjectionMatrix()}),c$q(0,c$b,"projectionMatrix",function(){return this._projectionMatrix},function(c$a){this._projectionMatrix=c$a,this._useUserProjectionMatrix=!0}),c$q(0,c$b,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),c$n(c$i,["_tempVector20",function(){return this._tempVector20=new c$hb}]),c$i}()),c$Xb=function(c$c){function c$d(c$a,c$b){c$d.__super.call(this,c$b),this._geometryFilter=new c$Hb(this),this._render=new c$Ib(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),c$a&&(this._geometryFilter.sharedMesh=c$a)instanceof laya.d3.resource.models.Mesh&&(c$a.loaded?this._render.sharedMaterials=c$a.materials:c$a.once("loaded",this,this._applyMeshMaterials))}c$p(c$d,"laya.d3.core.MeshSprite3D",c$c);var c$a=c$d.prototype;return c$a._changeRenderObjectByMesh=function(c$a){var c$b=this._render._renderElements,c$c=c$b[c$a];c$c||(c$c=c$b[c$a]=new c$zb),c$c._render=this._render;var c$d=this._render.sharedMaterials[c$a];c$d||(c$d=c$Mb.defaultMaterial);var c$g=this._geometryFilter.sharedMesh.getRenderElement(c$a);return c$c._mainSortID=this._getSortID(c$g,c$d),c$c._sprite3D=this,c$c.renderObj=c$g,c$c._material=c$d,c$c},c$a._changeRenderObjectByMaterial=function(c$a,c$b){var c$c=this._render._renderElements[c$a];c$b||(c$b=c$Mb.defaultMaterial);var c$d=this._geometryFilter.sharedMesh.getRenderElement(c$a);return c$c._mainSortID=this._getSortID(c$d,c$b),c$c._sprite3D=this,c$c.renderObj=c$d,c$c._material=c$b,c$c},c$a._changeRenderObjectsByMesh=function(){var c$a=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=c$a;for(var c$b=0;c$b<c$a;c$b++)this._changeRenderObjectByMesh(c$b)},c$a._onMeshChanged=function(c$a){var c$b=c$a.sharedMesh;c$b.loaded?this._changeRenderObjectsByMesh():c$b.once("loaded",this,this._onMeshLoaded)},c$a._onMeshLoaded=function(c$a){c$a===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},c$a._onMaterialChanged=function(c$a,c$b,c$c){c$b<this._render._renderElements.length&&this._changeRenderObjectByMaterial(c$b,c$c)},c$a._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},c$a._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},c$a._parseCustomProps=function(c$a,c$b,c$c,c$d){var c$g=this.meshRender,c$h=c$c.lightmapIndex;null!=c$h&&(c$g.lightmapIndex=c$h);var c$i,c$j,c$k=c$c.lightmapScaleOffset;if(c$k&&(c$g.lightmapScaleOffset=new c$jb(c$k[0],c$k[1],c$k[2],c$k[3])),c$d.instanceParams)(c$i=c$d.instanceParams.loadPath)&&(c$j=c$t.getRes(c$b[c$i]),(this.meshFilter.sharedMesh=c$j).loaded?c$g.sharedMaterials=c$j.materials:c$j.once("loaded",this,this._applyMeshMaterials));else{(c$i=c$c.meshPath)&&(c$j=c$t.getRes(c$b[c$i]),this.meshFilter.sharedMesh=c$j);var c$l=c$c.materials;if(c$l){var c$m=c$g.sharedMaterials,c$n=c$l.length;c$m.length=c$n;for(var c$o=0;c$o<c$n;c$o++)c$m[c$o]=c$t.getRes(c$b[c$l[c$o].path]);c$g.sharedMaterials=c$m}}},c$a._applyMeshMaterials=function(c$a){for(var c$b=this._render.sharedMaterials,c$c=c$a.materials,c$d=0,c$g=c$c.length;c$d<c$g;c$d++)c$b[c$d]||(c$b[c$d]=c$c[c$d]);this._render.sharedMaterials=c$b},c$a._addToInitStaticBatchManager=function(){c$d._staticBatchManager._addInitBatchSprite(this)},c$a.cloneTo=function(c$a){var c$b=c$a;c$b._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var c$c=this._render,c$d=c$b._render;c$d.enable=c$c.enable,c$d.sharedMaterials=c$c.sharedMaterials,c$d.castShadow=c$c.castShadow;var c$g=c$c.lightmapScaleOffset;c$g&&(c$d.lightmapScaleOffset=c$g.clone()),c$d.lightmapIndex=c$c.lightmapIndex,c$d.receiveShadow=c$c.receiveShadow,c$d.sortingFudge=c$c.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,c$a)},c$a.destroy=function(c$a){if(void 0===c$a&&(c$a=!0),!this.destroyed){var c$b=this.meshFilter.sharedMesh;null!=c$b&&(c$b.loaded||c$b.off("loaded",this,this._applyMeshMaterials)),c$c.prototype.destroy.call(this,c$a),this._geometryFilter._destroy()}},c$q(0,c$a,"meshFilter",function(){return this._geometryFilter}),c$q(0,c$a,"meshRender",function(){return this._render}),c$d.__init__=function(){c$da._staticBatchManagers.push(c$d._staticBatchManager)},c$d.load=function(c$a){return c$x.loader.create(c$a,null,null,c$d)},c$n(c$d,["_staticBatchManager",function(){return this._staticBatchManager=new c$Bb}]),c$d}(c$Vb)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(c$a,c$b){"use strict";for(var c$c in Object.defineProperty(c$b,"__esModule",{value:!0}),Laya){var c$d=Laya[c$c];c$d&&c$d.__isclass&&(c$b[c$c]=c$d)}}),function(c$a,c$b,c$ga){c$ga.un,c$ga.uns;var c$c=c$ga.static,c$d=c$ga.class,c$h=c$ga.getset,c$r=c$ga.__newvec,c$j=laya.maths.Bezier,c$n=laya.utils.Browser,c$Fa=laya.utils.Byte,c$g=(laya.events.Event,laya.events.EventDispatcher),c$i=laya.display.Graphics,c$k=(laya.resource.HTMLCanvas,laya.utils.Handler),c$l=laya.net.Loader,c$o=laya.maths.MathUtil,c$Ga=laya.maths.Matrix,c$s=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),c$m=(laya.renders.RenderContext,laya.resource.Resource),c$p=laya.utils.RunDriver,c$ha=laya.display.Sprite,c$q=laya.utils.Stat,c$Ha=laya.resource.Texture,c$t=(laya.net.URL,laya.utils.Utils),c$G=function(){function c$a(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return c$d(c$a,"laya.ani.AnimationContent"),c$a}(),c$H=function(){function c$a(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return c$d(c$a,"laya.ani.AnimationNodeContent"),c$a}(),c$v=function(){function c$a(){}return c$d(c$a,"laya.ani.AnimationParser01"),c$a.parse=function(c$a,c$b){var c$c=c$b.__getBuffer(),c$d=0,c$g=0,c$h=0,c$i=0,c$j=0,c$k=0,c$l=0,c$m=c$b.readUTFString();c$a._aniClassName=c$m;var c$n,c$o=c$b.readUTFString().split("\n"),c$p=c$b.getUint8(),c$q=c$b.getUint32(),c$r=c$b.getUint32();0<c$q&&(c$n=c$c.slice(c$q,c$r));var c$s=new c$Fa(c$n);for(0<c$r&&(c$a._publicExtData=c$c.slice(c$r,c$c.byteLength)),c$a._useParent=!!c$b.getUint8(),c$a._anis.length=c$p,c$d=0;c$d<c$p;c$d++){var c$t=c$a._anis[c$d]=new c$G;c$t.nodes=new Array;var c$u=c$t.name=c$o[c$b.getUint16()];c$a._aniMap[c$u]=c$d,c$t.bone3DMap={},c$t.playTime=c$b.getFloat32(),c$t.playTime<=0&&console.error("播放时间不能为0  url="+c$a.url+" name="+c$t.name);var c$v=c$t.nodes.length=c$b.getUint8();for(c$g=c$t.totalKeyframeDatasLength=0;c$g<c$v;c$g++){var c$w=c$t.nodes[c$g]=new c$H;c$w.childs=[];var c$x=c$b.getInt16();0<=c$x&&(c$w.name=c$o[c$x],c$t.bone3DMap[c$w.name]=c$g),c$w.keyFrame=new Array,c$w.parentIndex=c$b.getInt16(),-1==c$w.parentIndex?c$w.parent=null:c$w.parent=c$t.nodes[c$w.parentIndex],c$w.lerpType=c$b.getUint8();var c$y=c$b.getUint32();c$s.pos=c$y;var c$z=c$w.keyframeWidth=c$s.getUint16();if(c$t.totalKeyframeDatasLength+=c$z,0===c$w.lerpType||1===c$w.lerpType)for(c$w.interpolationMethod=[],c$w.interpolationMethod.length=c$z,c$h=0;c$h<c$z;c$h++)c$w.interpolationMethod[c$h]=c$K.interpolation[c$s.getUint8()];null!=c$w.parent&&c$w.parent.childs.push(c$w);var c$A=c$b.getUint16();0<c$A&&(c$w.extenData=c$c.slice(c$b.pos,c$b.pos+c$A),c$b.pos+=c$A);var c$B,c$C=c$b.getUint16(),c$D=0;for(c$h=0,c$i=c$w.keyFrame.length=c$C;c$h<c$i;c$h++){if((c$B=c$w.keyFrame[c$h]=new c$I).duration=c$b.getFloat32(),c$B.startTime=c$D,2===c$w.lerpType){c$B.interpolationData=[];var c$E,c$F=c$b.getUint8();switch(c$E=c$b.getFloat32()){case 254:for(c$B.interpolationData.length=c$z,c$l=0;c$l<c$z;c$l++)c$B.interpolationData[c$l]=0;break;case 255:for(c$B.interpolationData.length=c$z,c$l=0;c$l<c$z;c$l++)c$B.interpolationData[c$l]=5;break;default:for(c$B.interpolationData.push(c$E),c$k=1;c$k<c$F;c$k++)c$B.interpolationData.push(c$b.getFloat32())}}for(c$B.data=new Float32Array(c$z),c$j=0;c$j<c$z;c$j++)c$B.data[c$j]=c$b.getFloat32(),-1e-8<c$B.data[c$j]&&c$B.data[c$j]<1e-8&&(c$B.data[c$j]=0);c$D+=c$B.duration}c$B.startTime=c$t.playTime,c$w.playTime=c$t.playTime,c$a._calculateKeyFrame(c$w,c$C,c$z)}}},c$a}(),c$w=function(){function c$x(){}return c$d(c$x,"laya.ani.AnimationParser02"),c$x.READ_DATA=function(){c$x._DATA.offset=c$x._reader.getUint32(),c$x._DATA.size=c$x._reader.getUint32()},c$x.READ_BLOCK=function(){for(var c$a=c$x._BLOCK.count=c$x._reader.getUint16(),c$b=c$x._BLOCK.blockStarts=[],c$c=c$x._BLOCK.blockLengths=[],c$d=0;c$d<c$a;c$d++)c$b.push(c$x._reader.getUint32()),c$c.push(c$x._reader.getUint32())},c$x.READ_STRINGS=function(){var c$a=c$x._reader.getUint32(),c$b=c$x._reader.getUint16(),c$c=c$x._reader.pos;c$x._reader.pos=c$a+c$x._DATA.offset;for(var c$d=0;c$d<c$b;c$d++)c$x._strings[c$d]=c$x._reader.readUTFString();c$x._reader.pos=c$c},c$x.parse=function(c$a,c$b){c$x._templet=c$a;(c$x._reader=c$b).__getBuffer();c$x.READ_DATA(),c$x.READ_BLOCK(),c$x.READ_STRINGS();for(var c$c=0,c$d=c$x._BLOCK.count;c$c<c$d;c$c++){var c$g=c$b.getUint16(),c$h=c$x._strings[c$g],c$i=c$x["READ_"+c$h];if(null==c$i)throw new Error("model file err,no this function:"+c$g+" "+c$h);c$i.call()}},c$x.READ_ANIMATIONS=function(){var c$a=c$x._reader,c$b=c$a.__getBuffer(),c$c=0,c$d=0,c$g=0,c$h=0,c$i=c$a.getUint16(),c$j=[];for(c$j.length=c$i,c$c=0;c$c<c$i;c$c++)c$j[c$c]=c$K.interpolation[c$a.getByte()];var c$k=c$a.getUint8();for(c$x._templet._anis.length=c$k,c$c=0;c$c<c$k;c$c++){var c$l=c$x._templet._anis[c$c]={};c$l.nodes=new Array;var c$m=c$l.name=c$x._strings[c$a.getUint16()];c$x._templet._aniMap[c$m]=c$c,c$l.bone3DMap={},c$l.playTime=c$a.getFloat32();var c$n=c$l.nodes.length=c$a.getInt16();for(c$d=c$l.totalKeyframeDatasLength=0;c$d<c$n;c$d++){var c$o=c$l.nodes[c$d]={};c$o.keyframeWidth=c$i,c$o.childs=[];var c$p=c$a.getUint16();0<=c$p&&(c$o.name=c$x._strings[c$p],c$l.bone3DMap[c$o.name]=c$d),c$o.keyFrame=new Array,c$o.parentIndex=c$a.getInt16(),-1==c$o.parentIndex?c$o.parent=null:c$o.parent=c$l.nodes[c$o.parentIndex],c$l.totalKeyframeDatasLength+=c$i,c$o.interpolationMethod=c$j,null!=c$o.parent&&c$o.parent.childs.push(c$o);var c$q=c$a.getUint16(),c$r=null,c$s=null;for(c$g=0,c$h=c$o.keyFrame.length=c$q;c$g<c$h;c$g++){(c$r=c$o.keyFrame[c$g]={}).startTime=c$a.getFloat32(),c$s&&(c$s.duration=c$r.startTime-c$s.startTime);var c$t=c$x._DATA.offset,c$u=c$a.getUint32(),c$v=4*c$i,c$w=c$b.slice(c$t+c$u,c$t+c$u+c$v);c$r.data=new Float32Array(c$w),c$s=c$r}c$r.duration=0,c$o.playTime=c$l.playTime,c$x._templet._calculateKeyFrame(c$o,c$q,c$i)}}},c$x._templet=null,c$x._reader=null,c$x._strings=[],c$c(c$x,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),c$x}(),c$Ia=(function(){function c$a(){}c$d(c$a,"laya.ani.AnimationState"),c$a.stopped=0,c$a.paused=1,c$a.playing=2}(),function(){function c$g(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new c$Va,this.resultMatrix=new c$Ga,this._children=[]}c$d(c$g,"laya.ani.bone.Bone");var c$a=c$g.prototype;return c$a.setTempMatrix=function(c$a){this._tempMatrix=c$a;var c$b,c$c=0;for(c$c=0,c$b=this._children.length;c$c<c$b;c$c++)this._children[c$c].setTempMatrix(this._tempMatrix)},c$a.update=function(c$a){var c$b;if(this.rotation=this.transform.skX,c$a)c$b=this.resultTransform.getMatrix(),c$Ga.mul(c$b,c$a,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)c$b=this.resultTransform.getMatrix(),c$Ga.mul(c$b,this.parentBone.resultMatrix,this.resultMatrix);else{var c$c=this.parentBone,c$d=NaN,c$g=NaN,c$h=NaN,c$i=this.parentBone.resultMatrix;c$b=this.resultTransform.getMatrix();var c$j=c$i.a*c$b.tx+c$i.c*c$b.ty+c$i.tx,c$k=c$i.b*c$b.tx+c$i.d*c$b.ty+c$i.ty,c$l=new c$Ga;this.inheritRotation?(c$d=Math.atan2(c$c.resultMatrix.b,c$c.resultMatrix.a),c$g=Math.cos(c$d),c$h=Math.sin(c$d),c$l.setTo(c$g,c$h,-c$h,c$g,0,0),c$Ga.mul(this._tempMatrix,c$l,c$Ga.TEMP),c$Ga.TEMP.copyTo(c$l),c$b=this.resultTransform.getMatrix(),c$Ga.mul(c$b,c$l,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,c$b=this.resultTransform.getMatrix(),c$Ga.TEMP.identity(),c$Ga.TEMP.d=this.d,c$Ga.mul(c$b,c$Ga.TEMP,this.resultMatrix)),this.resultMatrix.tx=c$j,this.resultMatrix.ty=c$k}else(c$b=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var c$m,c$n=0;for(c$n=0,c$m=this._children.length;c$n<c$m;c$n++)this._children[c$n].update()},c$a.updateChild=function(){var c$a,c$b=0;for(c$b=0,c$a=this._children.length;c$b<c$a;c$b++)this._children[c$b].update()},c$a.setRotation=function(c$a){this._sprite&&(this._sprite.rotation=180*c$a/Math.PI)},c$a.updateDraw=function(c$a,c$b){c$g.ShowBones&&!c$g.ShowBones[this.name]||(this._sprite||(this._sprite=new c$ha,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),c$ga.stage.addChild(this._sprite)),this._sprite.x=c$a+this.resultMatrix.tx,this._sprite.y=c$b+this.resultMatrix.ty);var c$c,c$d=0;for(c$d=0,c$c=this._children.length;c$d<c$c;c$d++)this._children[c$d].updateDraw(c$a,c$b)},c$a.addChild=function(c$a){this._children.push(c$a),c$a.parentBone=this},c$a.findBone=function(c$a){if(this.name==c$a)return this;var c$b,c$c,c$d=0;for(c$d=0,c$b=this._children.length;c$d<c$b;c$d++)if(c$c=this._children[c$d].findBone(c$a))return c$c;return null},c$a.localToWorld=function(c$a){var c$b=c$a[0],c$c=c$a[1];c$a[0]=c$b*this.resultMatrix.a+c$c*this.resultMatrix.c+this.resultMatrix.tx,c$a[1]=c$b*this.resultMatrix.b+c$c*this.resultMatrix.d+this.resultMatrix.ty},c$g.ShowBones={},c$g}()),c$Ja=function(){function c$r(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}c$d(c$r,"laya.ani.bone.BoneSlot");var c$a=c$r.prototype;return c$a.showSlotData=function(c$a,c$b){void 0===c$b&&(c$b=!0),this.currSlotData=c$a,c$b&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},c$a.showDisplayByName=function(c$a){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(c$a))},c$a.replaceDisplayByName=function(c$a,c$b){if(this.currSlotData){var c$c;c$c=this.currSlotData.getDisplayByName(c$a);var c$d;c$d=this.currSlotData.getDisplayByName(c$b),this.replaceDisplayByIndex(c$c,c$d)}},c$a.replaceDisplayByIndex=function(c$a,c$b){this.currSlotData&&(this._replaceDic[c$a]=c$b,this.displayIndex==c$a&&this.showDisplayByIndex(c$a))},c$a.showDisplayByIndex=function(c$a){if(null!=this._replaceDic[c$a]&&(c$a=this._replaceDic[c$a]),this.currSlotData&&-1<c$a&&c$a<this.currSlotData.displayArr.length){if(this.displayIndex=c$a,this.currDisplayData=this.currSlotData.displayArr[c$a],this.currDisplayData){var c$b=this.currDisplayData.name;this.currTexture=this.templet.getTexture(c$b),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!c$s.isConchApp||c$s.isConchApp&&"0.9.15"<c$ha.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},c$a.replaceSkin=function(c$a){this._diyTexture=c$a,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},c$a.setParentMatrix=function(c$a){this._parentMatrix=c$a},c$a.draw=function(c$a,c$b,c$c,c$d){if(void 0===c$c&&(c$c=!1),void 0===c$d&&(c$d=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var c$g,c$h=this.currTexture;switch(this._diyTexture&&(c$h=this._diyTexture),this.currDisplayData.type){case 0:if(c$a){var c$i=this.getDisplayMatrix();if(this._parentMatrix){var c$j=!1;if(c$i){var c$k;if(c$Ga.mul(c$i,this._parentMatrix,c$Ga.TEMP),c$k=c$c?(null==this._resultMatrix&&(this._resultMatrix=new c$Ga),this._resultMatrix):new c$Ga,!c$s.isWebGL&&this.currDisplayData.uvs||c$s.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var c$l=c$r._tempMatrix;c$l.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(c$l.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(c$j=!0,c$l.rotate(-Math.PI/2)),c$Ga.mul(c$l,c$Ga.TEMP,c$k)}else c$Ga.TEMP.copyTo(c$k);c$j?c$a.drawTexture(c$h,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,c$k):c$a.drawTexture(c$h,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,c$k)}}}break;case 1:if(null==(c$g=c$c?(null==this._skinSprite&&(this._skinSprite=c$r.createSkinMesh()),this._skinSprite):c$r.createSkinMesh()))return;var c$m;if(null==this.currDisplayData.bones){var c$n,c$o=this.currDisplayData.weights;this.deformData&&(c$o=this.deformData),c$n=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=c$z.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=c$z.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=c$o;this.currDisplayData.triangles.length;c$m=this.currDisplayData.triangles,c$g.init2(c$h,null,c$m,this._mVerticleArr,c$n);var c$p,c$q=this.getDisplayMatrix();if(this._parentMatrix)if(c$q)c$Ga.mul(c$q,this._parentMatrix,c$Ga.TEMP),c$p=c$c?(null==this._resultMatrix&&(this._resultMatrix=new c$Ga),this._resultMatrix):new c$Ga,c$Ga.TEMP.copyTo(c$p),c$g.transform=c$p}else this.skinMesh(c$b,c$g,c$d);c$a.drawSkin(c$g);break;case 2:if(null==(c$g=c$c?(null==this._skinSprite&&(this._skinSprite=c$r.createSkinMesh()),this._skinSprite):c$r.createSkinMesh()))return;this.skinMesh(c$b,c$g,c$d),c$a.drawSkin(c$g)}}},c$a.skinMesh=function(c$a,c$b,c$c){var c$d,c$g=this.currTexture,c$h=this.currDisplayData.bones;c$d=this._diyTexture?(c$g=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=c$z.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=c$z.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var c$i,c$j,c$k=this.currDisplayData.weights,c$l=this.currDisplayData.triangles,c$m=0,c$n=0,c$o=0,c$p=NaN,c$q=NaN,c$r=0,c$s=0,c$t=[],c$u=0,c$v=0;if(this.deformData&&0<this.deformData.length){var c$w=0;for(c$u=0,c$v=c$h.length;c$u<c$v;){for(c$o=c$h[c$u++]+c$u,c$n=c$m=0;c$u<c$o;c$u++)c$j=c$a[c$h[c$u]],c$p=c$k[c$r]+this.deformData[c$w++],c$q=c$k[c$r+1]+this.deformData[c$w++],c$s=c$k[c$r+2],c$m+=(c$p*c$j.a+c$q*c$j.c+c$j.tx)*c$s,c$n+=(c$p*c$j.b+c$q*c$j.d+c$j.ty)*c$s,c$r+=3;c$t.push(c$m,c$n)}}else for(c$u=0,c$v=c$h.length;c$u<c$v;){for(c$o=c$h[c$u++]+c$u,c$n=c$m=0;c$u<c$o;c$u++)c$j=c$a[c$h[c$u]],c$p=c$k[c$r],c$q=c$k[c$r+1],c$s=c$k[c$r+2],c$m+=(c$p*c$j.a+c$q*c$j.c+c$j.tx)*c$s,c$n+=(c$p*c$j.b+c$q*c$j.d+c$j.ty)*c$s,c$r+=3;c$t.push(c$m,c$n)}this._mVerticleArr=c$t,c$i=c$l,c$b.init2(c$g,null,c$i,this._mVerticleArr,c$d)},c$a.drawBonePoint=function(c$a){c$a&&this._parentMatrix&&c$a.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},c$a.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},c$a.getMatrix=function(){return this._resultMatrix},c$a.copy=function(){var c$a=new c$r;return c$a.type="copy",c$a.name=this.name,c$a.attachmentName=this.attachmentName,c$a.srcDisplayIndex=this.srcDisplayIndex,c$a.parent=this.parent,c$a.displayIndex=this.displayIndex,c$a.templet=this.templet,c$a.currSlotData=this.currSlotData,c$a.currTexture=this.currTexture,c$a.currDisplayData=this.currDisplayData,c$a},c$r.createSkinMesh=function(){return c$s.isWebGL||c$s.isConchApp?c$p.skinAniSprite():(c$s.isWebGL,null)},c$c(c$r,["_tempMatrix",function(){return this._tempMatrix=new c$Ga}]),c$r}(),c$Ka=function(){function c$a(){this.skinName=null,this.deformSlotDataList=[]}return c$d(c$a,"laya.ani.bone.DeformAniData"),c$a}(),c$La=function(){function c$a(){this.deformSlotDisplayList=[]}return c$d(c$a,"laya.ani.bone.DeformSlotData"),c$a}(),c$Ma=function(){function c$a(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}c$d(c$a,"laya.ani.bone.DeformSlotDisplayData");var c$b=c$a.prototype;return c$b.binarySearch1=function(c$a,c$b){var c$c=0,c$d=c$a.length-2;if(0==c$d)return 1;for(var c$g=c$d>>>1;;){if(c$a[Math.floor(c$g+1)]<=c$b?c$c=c$g+1:c$d=c$g,c$c==c$d)return c$c+1;c$g=c$c+c$d>>>1}return 0},c$b.apply=function(c$a,c$b,c$c){if(void 0===c$c&&(c$c=1),c$a+=.05,!(this.timeList.length<=0)){var c$d=0;if(!(c$a<this.timeList[0])){var c$g=this.vectices[0].length,c$h=[],c$i=this.binarySearch1(this.timeList,c$a);if(this.frameIndex=c$i,c$a>=this.timeList[this.timeList.length-1]){var c$j=this.vectices[this.vectices.length-1];if(c$c<1)for(c$d=0;c$d<c$g;c$d++)c$h[c$d]+=(c$j[c$d]-c$h[c$d])*c$c;else for(c$d=0;c$d<c$g;c$d++)c$h[c$d]=c$j[c$d];this.deformData=c$h}else{this.tweenKeyList[this.frameIndex];var c$k=this.vectices[this.frameIndex-1],c$l=this.vectices[this.frameIndex],c$m=this.timeList[this.frameIndex-1],c$n=this.timeList[this.frameIndex];c$c=this.tweenKeyList[c$i-1]?(c$a-c$m)/(c$n-c$m):0;var c$o=NaN;for(c$d=0;c$d<c$g;c$d++)c$o=c$k[c$d],c$h[c$d]=c$o+(c$l[c$d]-c$o)*c$c;this.deformData=c$h}}}},c$a}(),c$Na=function(){function c$a(){this.time=NaN,this.drawOrder=[]}return c$d(c$a,"laya.ani.bone.DrawOrderData"),c$a}(),c$Oa=function(){function c$a(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return c$d(c$a,"laya.ani.bone.EventData"),c$a}(),c$u=function(){function c$da(c$a,c$b){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=c$a,this._targetBone=c$b[c$a.targetBoneIndex],this.isSpine=c$a.isSpine,null==this._bones&&(this._bones=[]);for(var c$c=this._bones.length=0,c$d=c$a.boneIndexs.length;c$c<c$d;c$c++)this._bones.push(c$b[c$a.boneIndexs[c$c]]);this.name=c$a.name,this.mix=c$a.mix,this.bendDirection=c$a.bendDirection}c$d(c$da,"laya.ani.bone.IkConstraint");var c$a=c$da.prototype;return c$a.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},c$a._applyIk1=function(c$a,c$b,c$c,c$d){var c$g=c$a.parentBone,c$h=1/(c$g.resultMatrix.a*c$g.resultMatrix.d-c$g.resultMatrix.b*c$g.resultMatrix.c),c$i=c$b-c$g.resultMatrix.tx,c$j=c$c-c$g.resultMatrix.ty,c$k=(c$i*c$g.resultMatrix.d-c$j*c$g.resultMatrix.c)*c$h-c$a.transform.x,c$l=(c$j*c$g.resultMatrix.a-c$i*c$g.resultMatrix.b)*c$h-c$a.transform.y,c$m=Math.atan2(c$l,c$k)*c$da.radDeg-0-c$a.transform.skX;c$a.transform.scX<0&&(c$m+=180),180<c$m?c$m-=360:c$m<-180&&(c$m+=360),c$a.transform.skX=c$a.transform.skY=c$a.transform.skX+c$m*c$d,c$a.update()},c$a.updatePos=function(c$a,c$b){this._sp&&this._sp.pos(c$a,c$b)},c$a._applyIk2=function(c$a,c$b,c$c,c$d,c$g,c$h){if(0!=c$h){var c$i=c$a.resultTransform.x,c$j=c$a.resultTransform.y,c$k=c$a.transform.scX,c$l=c$a.transform.scY,c$m=c$b.transform.scX,c$n=0,c$o=0,c$p=0;c$p=c$k<0?(c$k=-c$k,c$n=180,-1):(c$n=0,1),c$l<0&&(c$l=-c$l,c$p=-c$p),c$o=c$m<0?(c$m=-c$m,180):0;var c$q=c$b.resultTransform.x,c$r=NaN,c$s=NaN,c$t=NaN,c$u=c$a.resultMatrix.a,c$v=c$a.resultMatrix.c,c$w=c$a.resultMatrix.b,c$x=c$a.resultMatrix.d,c$y=Math.abs(c$k-c$l)<=1e-4;c$t=c$y?(c$s=c$u*c$q+c$v*(c$r=c$b.resultTransform.y)+c$a.resultMatrix.tx,c$w*c$q+c$x*c$r+c$a.resultMatrix.ty):(c$r=0,c$s=c$u*c$q+c$a.resultMatrix.tx,c$w*c$q+c$a.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new c$ha,c$ga.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(c$c,c$d,15,"#ffff00"),this._sp.graphics.drawCircle(c$s,c$t,15,"#ff00ff")),c$a.setRotation(Math.atan2(c$t-c$a.resultMatrix.ty,c$s-c$a.resultMatrix.tx));var c$z=c$a.parentBone;c$u=c$z.resultMatrix.a,c$v=c$z.resultMatrix.c,c$w=c$z.resultMatrix.b;var c$A=1/(c$u*(c$x=c$z.resultMatrix.d)-c$v*c$w),c$B=c$c-c$z.resultMatrix.tx,c$C=c$d-c$z.resultMatrix.ty,c$D=(c$B*c$x-c$C*c$v)*c$A-c$i,c$E=(c$C*c$u-c$B*c$w)*c$A-c$j,c$F=((c$B=c$s-c$z.resultMatrix.tx)*c$x-(c$C=c$t-c$z.resultMatrix.ty)*c$v)*c$A-c$i,c$G=(c$C*c$u-c$B*c$w)*c$A-c$j,c$H=Math.sqrt(c$F*c$F+c$G*c$G),c$I=c$b.length*c$m,c$J=NaN,c$K=NaN;if(c$y){var c$L=(c$D*c$D+c$E*c$E-c$H*c$H-(c$I*=c$k)*c$I)/(2*c$H*c$I);c$L<-1?c$L=-1:1<c$L&&(c$L=1),c$K=Math.acos(c$L)*c$g,c$u=c$H+c$I*c$L,c$v=c$I*Math.sin(c$K),c$J=Math.atan2(c$E*c$u-c$D*c$v,c$D*c$u+c$E*c$v)}else{var c$M=(c$u=c$k*c$I)*c$u,c$N=(c$v=c$l*c$I)*c$v,c$O=c$D*c$D+c$E*c$E,c$P=Math.atan2(c$E,c$D),c$Q=-2*c$N*c$H,c$R=c$N-c$M;if(0<(c$x=c$Q*c$Q-4*c$R*(c$w=c$N*c$H*c$H+c$M*c$O-c$M*c$N))){var c$S=Math.sqrt(c$x);c$Q<0&&(c$S=-c$S);var c$T=(c$S=-(c$Q+c$S)/2)/c$R,c$U=c$w/c$S,c$V=Math.abs(c$T)<Math.abs(c$U)?c$T:c$U;c$V*c$V<=c$O&&(c$C=Math.sqrt(c$O-c$V*c$V)*c$g,c$J=c$P-Math.atan2(c$C,c$V),c$K=Math.atan2(c$C/c$l,(c$V-c$H)/c$k))}var c$W=0,c$X=Number.MAX_VALUE,c$Y=0,c$Z=0,c$$=0,c$_=0,c$e=0,c$f=0;c$_<(c$x=(c$B=c$H+c$u)*c$B)&&(c$$=0,c$_=c$x,c$e=c$B),(c$x=(c$B=c$H-c$u)*c$B)<c$X&&(c$W=Math.PI,c$X=c$x,c$Y=c$B);var c$aa=Math.acos(-c$u*c$H/(c$M-c$N));(c$x=(c$B=c$u*Math.cos(c$aa)+c$H)*c$B+(c$C=c$v*Math.sin(c$aa))*c$C)<c$X&&(c$W=c$aa,c$X=c$x,c$Y=c$B,c$Z=c$C),c$_<c$x&&(c$$=c$aa,c$_=c$x,c$e=c$B,c$f=c$C),c$K=c$O<=(c$X+c$_)/2?(c$J=c$P-Math.atan2(c$Z*c$g,c$Y),c$W*c$g):(c$J=c$P-Math.atan2(c$f*c$g,c$e),c$$*c$g)}var c$ba=Math.atan2(c$r,c$q)*c$p,c$ca=c$a.resultTransform.skX;180<(c$J=(c$J-c$ba)*c$da.radDeg+c$n-c$ca)?c$J-=360:c$J<-180&&(c$J+=360),c$a.resultTransform.x=c$i,c$a.resultTransform.y=c$j,c$a.resultTransform.skX=c$a.resultTransform.skY=c$ca+c$J*c$h,c$ca=c$b.resultTransform.skX,180<(c$K=((c$K+c$ba)*c$da.radDeg-0)*c$p+c$o-(c$ca%=360))?c$K-=360:c$K<-180&&(c$K+=360),c$b.resultTransform.x=c$q,c$b.resultTransform.y=c$r,c$b.resultTransform.skX=c$b.resultTransform.skY=c$b.resultTransform.skY+c$K*c$h,c$a.update()}},c$a._applyIk3=function(c$a,c$b,c$c,c$d,c$g,c$h){if(0!=c$h){var c$i,c$j,c$k=c$b.resultMatrix.a*c$b.length,c$l=c$b.resultMatrix.b*c$b.length,c$m=c$k*c$k+c$l*c$l,c$n=Math.sqrt(c$m),c$o=c$a.resultMatrix.tx,c$p=c$a.resultMatrix.ty,c$q=c$b.resultMatrix.tx,c$r=c$b.resultMatrix.ty,c$s=c$q-c$o,c$t=c$r-c$p,c$u=c$s*c$s+c$t*c$t,c$v=Math.sqrt(c$u),c$w=(c$s=c$c-c$a.resultMatrix.tx)*c$s+(c$t=c$d-c$a.resultMatrix.ty)*c$t,c$x=Math.sqrt(c$w);if(c$n+c$v<=c$x||c$x+c$n<=c$v||c$x+c$v<=c$n){var c$y=NaN;c$q=c$o+(c$y=c$n+c$v<=c$x?1:-1)*(c$c-c$o)*c$v/c$x,c$r=c$p+c$y*(c$d-c$p)*c$v/c$x}else{var c$z=(c$u-c$m+c$w)/(2*c$w),c$A=Math.sqrt(c$u-c$z*c$z*c$w)/c$x,c$B=c$o+c$s*c$z,c$C=c$p+c$t*c$z,c$D=-c$t*c$A,c$E=c$s*c$A;c$r=0<c$g?(c$q=c$B-c$D,c$C-c$E):(c$q=c$B+c$D,c$C+c$E)}c$i=c$q,c$j=c$r,this.isDebug&&(this._sp||(this._sp=new c$ha,c$ga.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(c$o,c$p,15,"#ff00ff"),this._sp.graphics.drawCircle(c$c,c$d,15,"#ffff00"),this._sp.graphics.drawCircle(c$i,c$j,15,"#ff00ff"));var c$F,c$G;c$F=Math.atan2(c$j-c$a.resultMatrix.ty,c$i-c$a.resultMatrix.tx),c$a.setRotation(c$F),(c$G=c$da._tempMatrix).identity(),c$G.rotate(c$F),c$G.scale(c$a.resultMatrix.getScaleX(),c$a.resultMatrix.getScaleY()),c$G.translate(c$a.resultMatrix.tx,c$a.resultMatrix.ty),c$G.copyTo(c$a.resultMatrix),c$a.updateChild();var c$H,c$I;c$H=Math.atan2(c$d-c$j,c$c-c$i),c$b.setRotation(c$H),(c$I=c$da._tempMatrix).identity(),c$I.rotate(c$H),c$I.scale(c$b.resultMatrix.getScaleX(),c$b.resultMatrix.getScaleY()),c$I.translate(c$i,c$j),c$G.copyTo(c$b.resultMatrix),c$b.updateChild()}},c$c(c$da,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new c$Ga}]),c$da}(),c$Pa=function(){function c$a(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return c$d(c$a,"laya.ani.bone.IkConstraintData"),c$a}(),c$x=function(){function c$I(c$a,c$b){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=c$a,this.position=c$a.position,this.spacing=c$a.spacing,this.rotateMix=c$a.rotateMix,this.translateMix=c$a.translateMix,this.bones=[];for(var c$c=this.data.bones,c$d=0,c$g=c$c.length;c$d<c$g;c$d++)this.bones.push(c$b[c$c[c$d]])}c$d(c$I,"laya.ani.bone.PathConstraint");var c$a=c$I.prototype;return c$a.apply=function(c$a,c$b){if(this.target){var c$c=this.translateMix,c$d=this.translateMix,c$g=0<c$d,c$h=this.data.spacingMode,c$i="length"==c$h,c$j=this.data.rotateMode,c$k="tangent"==c$j,c$l="chainScale"==c$j,c$m=[],c$n=this.bones.length,c$o=c$k?c$n:c$n+1,c$p=[];(this._spaces=c$p)[0]=this.position;var c$q=this.spacing;if(c$l||c$i)for(var c$r=0,c$s=c$o-1;c$r<c$s;){var c$t=this.bones[c$r],c$u=c$t.length,c$v=c$u*c$t.resultMatrix.a,c$w=c$u*c$t.resultMatrix.b;c$u=Math.sqrt(c$v*c$v+c$w*c$w),c$l&&(c$m[c$r]=c$u),c$p[++c$r]=c$i?Math.max(0,c$u+c$q):c$q}else for(c$r=1;c$r<c$o;c$r++)c$p[c$r]=c$q;var c$x=this.computeWorldPositions(this.target,c$a,c$b,c$o,c$k,"percent"==this.data.positionMode,"percent"==c$h);if(this._debugKey){for(c$r=0;c$r<c$x.length;c$r++)c$b.drawCircle(c$x[c$r++],c$x[c$r++],5,"#00ff00");var c$y=[];for(c$r=0;c$r<c$x.length;c$r++)c$y.push(c$x[c$r++],c$x[c$r++]);c$b.drawLines(0,0,c$y,"#ff0000")}var c$z=c$x[0],c$A=c$x[1],c$B=this.data.offsetRotation,c$C="chain"==c$j&&0==c$B,c$D=NaN;for(c$r=0,c$D=3;c$r<c$n;c$r++,c$D+=3){(c$t=this.bones[c$r]).resultMatrix.tx+=(c$z-c$t.resultMatrix.tx)*c$c,c$t.resultMatrix.ty+=(c$A-c$t.resultMatrix.ty)*c$c;var c$E=(c$v=c$x[c$D])-c$z,c$F=(c$w=c$x[c$D+1])-c$A;if(c$l&&0!=(c$u=c$m[c$r])){var c$G=(Math.sqrt(c$E*c$E+c$F*c$F)/c$u-1)*c$d+1;c$t.resultMatrix.a*=c$G,c$t.resultMatrix.c*=c$G}if(c$z=c$v,c$A=c$w,c$g){var c$H=c$t.resultMatrix.a,c$I=c$t.resultMatrix.c,c$J=c$t.resultMatrix.b,c$K=c$t.resultMatrix.d,c$L=NaN,c$M=NaN,c$N=NaN;c$L=c$k?c$x[c$D-1]:0==c$p[c$r+1]?c$x[c$D+2]:Math.atan2(c$F,c$E),c$L-=Math.atan2(c$J,c$H)-c$B/180*Math.PI,c$C&&(c$M=Math.cos(c$L),c$N=Math.sin(c$L),c$z+=((c$u=c$t.length)*(c$M*c$H-c$N*c$J)-c$E)*c$d,c$A+=(c$u*(c$N*c$H+c$M*c$J)-c$F)*c$d),c$L>Math.PI?c$L-=2*Math.PI:c$L<-Math.PI&&(c$L+=2*Math.PI),c$L*=c$d,c$M=Math.cos(c$L),c$N=Math.sin(c$L),c$t.resultMatrix.a=c$M*c$H-c$N*c$J,c$t.resultMatrix.c=c$M*c$I-c$N*c$K,c$t.resultMatrix.b=c$N*c$H+c$M*c$J,c$t.resultMatrix.d=c$N*c$I+c$M*c$K}}}},c$a.computeWorldVertices2=function(c$a,c$b,c$c,c$d,c$g,c$h){var c$i,c$j,c$k=c$a.currDisplayData.bones,c$l=c$a.currDisplayData.weights,c$m=c$a.currDisplayData.triangles,c$n=0,c$o=0,c$p=0,c$q=0,c$r=0,c$s=0,c$t=0,c$u=0,c$v=0,c$w=0,c$x=0;if(null!=c$k){for(c$n=0;c$n<c$c;c$n+=2)c$o+=(c$q=c$k[c$o])+1,c$p+=c$q;var c$y=c$b;for(c$r=c$h,c$s=3*c$p;c$r<c$d;c$r+=2){for(c$u=c$t=0,c$q=c$k[c$o++],c$q+=c$o;c$o<c$q;c$o++,c$s+=3){c$i=c$y[c$k[c$o]].resultMatrix,c$v=c$l[c$s],c$w=c$l[c$s+1];var c$z=c$l[c$s+2];c$t+=(c$v*c$i.a+c$w*c$i.c+c$i.tx)*c$z,c$u+=(c$v*c$i.b+c$w*c$i.d+c$i.ty)*c$z}c$g[c$r]=c$t,c$g[c$r+1]=c$u}}else{var c$A,c$B;if(c$m||(c$m=c$l),c$a.deformData&&(c$m=c$a.deformData),c$A=c$a.parent,c$b)for(c$x=c$b.length,c$n=0;c$n<c$x;c$n++)if(c$b[c$n].name==c$A){c$j=c$b[c$n];break}c$j&&(c$B=c$j.resultMatrix),c$B||(c$B=c$I._tempMt);var c$C=c$B.tx,c$D=c$B.ty,c$E=c$B.a,c$F=c$B.b,c$G=c$B.c,c$H=c$B.d;for(c$j&&(c$H*=c$j.d),c$o=c$c,c$r=c$h;c$r<c$d;c$o+=2,c$r+=2)c$v=c$m[c$o],c$w=c$m[c$o+1],c$g[c$r]=c$v*c$E+c$w*c$F+c$C,c$g[c$r+1]=-(c$v*c$G+c$w*c$H+c$D)}},c$a.computeWorldPositions=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i){c$a.currDisplayData.bones,c$a.currDisplayData.weights,c$a.currDisplayData.triangles;var c$j=[],c$k=0,c$l=c$a.currDisplayData.verLen,c$m=this.position,c$n=this._spaces,c$o=[],c$p=[],c$q=c$l/6,c$r=-1,c$s=NaN,c$t=0,c$u=0,c$v=NaN,c$w=NaN,c$x=NaN,c$y=NaN;if(c$q--,c$l-=4,this.computeWorldVertices2(c$a,c$b,2,c$l,c$j,0),this._debugKey)for(c$k=0;c$k<c$j.length;)c$c.drawCircle(c$j[c$k++],c$j[c$k++],10,"#ff0000");c$o=c$j,this._curves.length=c$q;var c$z=this._curves,c$A=c$o[c$s=0],c$B=c$o[1],c$C=0,c$D=0,c$E=0,c$F=0,c$G=0,c$H=0,c$I=NaN,c$J=NaN,c$K=NaN,c$L=NaN,c$M=NaN,c$N=NaN,c$O=NaN,c$P=NaN,c$Q=0;for(c$k=0,c$Q=2;c$k<c$q;c$k++,c$Q+=6)c$C=c$o[c$Q],c$D=c$o[c$Q+1],c$E=c$o[c$Q+2],c$F=c$o[c$Q+3],c$M=2*(c$I=.1875*(c$A-2*c$C+c$E))+(c$K=.09375*(3*(c$C-c$E)-c$A+(c$G=c$o[c$Q+4]))),c$N=2*(c$J=.1875*(c$B-2*c$D+c$F))+(c$L=.09375*(3*(c$D-c$F)-c$B+(c$H=c$o[c$Q+5]))),c$O=.75*(c$C-c$A)+c$I+.16666667*c$K,c$P=.75*(c$D-c$B)+c$J+.16666667*c$L,c$s+=Math.sqrt(c$O*c$O+c$P*c$P),c$O+=c$M,c$P+=c$N,c$M+=c$K,c$N+=c$L,c$s+=Math.sqrt(c$O*c$O+c$P*c$P),c$O+=c$M,c$P+=c$N,c$s+=Math.sqrt(c$O*c$O+c$P*c$P),c$O+=c$M+c$K,c$P+=c$N+c$L,c$s+=Math.sqrt(c$O*c$O+c$P*c$P),c$z[c$k]=c$s,c$A=c$G,c$B=c$H;if(c$h&&(c$m*=c$s),c$i)for(c$k=0;c$k<c$d;c$k++)c$n[c$k]*=c$s;var c$R=this._segments,c$S=0,c$T=0;for(c$T=c$u=c$t=c$k=0;c$k<c$d;c$k++,c$t+=3)if((c$v=c$m+=c$w=c$n[c$k])<0)this.addBeforePosition(c$v,c$o,0,c$p,c$t);else if(c$s<c$v)this.addAfterPosition(c$v-c$s,c$o,c$l-4,c$p,c$t);else{for(;;c$u++)if(!((c$y=c$z[c$u])<c$v)){0==c$u?c$v/=c$y:c$v=(c$v-(c$x=c$z[c$u-1]))/(c$y-c$x);break}if(c$u!=c$r){var c$U=6*(c$r=c$u);for(c$A=c$o[c$U],c$B=c$o[c$U+1],c$C=c$o[c$U+2],c$D=c$o[c$U+3],c$E=c$o[c$U+4],c$F=c$o[c$U+5],c$M=2*(c$I=.03*(c$A-2*c$C+c$E))+(c$K=.006*(3*(c$C-c$E)-c$A+(c$G=c$o[c$U+6]))),c$N=2*(c$J=.03*(c$B-2*c$D+c$F))+(c$L=.006*(3*(c$D-c$F)-c$B+(c$H=c$o[c$U+7]))),c$O=.3*(c$C-c$A)+c$I+.16666667*c$K,c$P=.3*(c$D-c$B)+c$J+.16666667*c$L,c$S=Math.sqrt(c$O*c$O+c$P*c$P),c$R[0]=c$S,c$U=1;c$U<8;c$U++)c$O+=c$M,c$P+=c$N,c$M+=c$K,c$N+=c$L,c$S+=Math.sqrt(c$O*c$O+c$P*c$P),c$R[c$U]=c$S;c$O+=c$M,c$P+=c$N,c$S+=Math.sqrt(c$O*c$O+c$P*c$P),c$R[8]=c$S,c$O+=c$M+c$K,c$P+=c$N+c$L,c$S+=Math.sqrt(c$O*c$O+c$P*c$P),c$R[9]=c$S,c$T=0}for(c$v*=c$S;;c$T++)if(!((c$y=c$R[c$T])<c$v)){0==c$T?c$v/=c$y:c$v=c$T+(c$v-(c$x=c$R[c$T-1]))/(c$y-c$x);break}this.addCurvePosition(.1*c$v,c$A,c$B,c$C,c$D,c$E,c$F,c$G,c$H,c$p,c$t,c$g||0<c$k&&0==c$w)}return c$p},c$a.addBeforePosition=function(c$a,c$b,c$c,c$d,c$g){var c$h=c$b[c$c],c$i=c$b[c$c+1],c$j=c$b[c$c+2]-c$h,c$k=c$b[c$c+3]-c$i,c$l=Math.atan2(c$k,c$j);c$d[c$g]=c$h+c$a*Math.cos(c$l),c$d[c$g+1]=c$i+c$a*Math.sin(c$l),c$d[c$g+2]=c$l},c$a.addAfterPosition=function(c$a,c$b,c$c,c$d,c$g){var c$h=c$b[c$c+2],c$i=c$b[c$c+3],c$j=c$h-c$b[c$c],c$k=c$i-c$b[c$c+1],c$l=Math.atan2(c$k,c$j);c$d[c$g]=c$h+c$a*Math.cos(c$l),c$d[c$g+1]=c$i+c$a*Math.sin(c$l),c$d[c$g+2]=c$l},c$a.addCurvePosition=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l,c$m,c$n){0==c$a&&(c$a=1e-4);var c$o=c$a*c$a,c$p=c$o*c$a,c$q=1-c$a,c$r=c$q*c$q,c$s=c$r*c$q,c$t=c$q*c$a,c$u=3*c$t,c$v=c$q*c$u,c$w=c$u*c$a,c$x=c$b*c$s+c$d*c$v+c$h*c$w+c$j*c$p,c$y=c$c*c$s+c$g*c$v+c$i*c$w+c$k*c$p;c$l[c$m]=c$x,c$l[c$m+1]=c$y,c$l[c$m+2]=c$n?Math.atan2(c$y-(c$c*c$r+c$g*c$t*2+c$i*c$o),c$x-(c$b*c$r+c$d*c$t*2+c$h*c$o)):0},c$I.NONE=-1,c$I.BEFORE=-2,c$I.AFTER=-3,c$c(c$I,["_tempMt",function(){return this._tempMt=new c$Ga}]),c$I}(),c$Qa=function(){function c$a(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return c$d(c$a,"laya.ani.bone.PathConstraintData"),c$a}(),c$Ra=function(){function c$a(){this.name=null,this.slotArr=[]}return c$d(c$a,"laya.ani.bone.SkinData"),c$a}(),c$Sa=function(){function c$a(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}c$d(c$a,"laya.ani.bone.SkinSlotDisplayData");var c$b=c$a.prototype;return c$b.createTexture=function(c$a){return this.texture||(this.texture=new c$Ha(c$a.bitmap,this.uvs),c$a.bitmap.alphaTexture&&(this.texture.alphaTexture=new c$Ha(c$a.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=c$a.height,this.texture.height=c$a.width,this.texture.offsetX=-c$a.offsetX,this.texture.offsetY=-c$a.offsetY,this.texture.sourceWidth=c$a.sourceHeight,this.texture.sourceHeight=c$a.sourceWidth):(this.texture.width=c$a.width,this.texture.height=c$a.height,this.texture.offsetX=-c$a.offsetX,this.texture.offsetY=-c$a.offsetY,this.texture.sourceWidth=c$a.sourceWidth,this.texture.sourceHeight=c$a.sourceHeight),c$s.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},c$b.destory=function(){this.texture&&this.texture.destroy()},c$a}(),c$Ta=function(){function c$a(){this.name=null,this.displayArr=[]}return c$d(c$a,"laya.ani.bone.SlotData"),c$a.prototype.getDisplayByName=function(c$a){for(var c$b=0,c$c=this.displayArr.length;c$b<c$c;c$b++)if(this.displayArr[c$b].attachmentName==c$a)return c$b;return-1},c$a}(),c$y=function(){function c$a(c$a,c$b){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=c$r(2,0),this._data=c$a,null==this._bones&&(this._bones=[]),this.target=c$b[c$a.targetIndex];var c$c,c$d=0;for(c$d=0,c$c=c$a.boneIndexs.length;c$d<c$c;c$d++)this._bones.push(c$b[c$a.boneIndexs[c$d]]);this.rotateMix=c$a.rotateMix,this.translateMix=c$a.translateMix,this.scaleMix=c$a.scaleMix,this.shearMix=c$a.shearMix}return c$d(c$a,"laya.ani.bone.TfConstraint"),c$a.prototype.apply=function(){for(var c$a,c$b=this.target.resultMatrix.a,c$c=this.target.resultMatrix.b,c$d=this.target.resultMatrix.c,c$g=this.target.resultMatrix.d,c$h=0,c$i=this._bones.length;c$h<c$i;c$h++){if(c$a=this._bones[c$h],0<this.rotateMix){var c$j=c$a.resultMatrix.a,c$k=c$a.resultMatrix.b,c$l=c$a.resultMatrix.c,c$m=c$a.resultMatrix.d,c$n=Math.atan2(c$d,c$b)-Math.atan2(c$l,c$j)+this._data.offsetRotation*Math.PI/180;c$n>Math.PI?c$n-=2*Math.PI:c$n<-Math.PI&&(c$n+=2*Math.PI),c$n*=this.rotateMix;var c$o=Math.cos(c$n),c$p=Math.sin(c$n);c$a.resultMatrix.a=c$o*c$j-c$p*c$l,c$a.resultMatrix.b=c$o*c$k-c$p*c$m,c$a.resultMatrix.c=c$p*c$j+c$o*c$l,c$a.resultMatrix.d=c$p*c$k+c$o*c$m}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),c$a.resultMatrix.tx+=(this._temp[0]-c$a.resultMatrix.tx)*this.translateMix,c$a.resultMatrix.ty+=(this._temp[1]-c$a.resultMatrix.ty)*this.translateMix,c$a.updateChild()),0<this.scaleMix){var c$q=Math.sqrt(c$a.resultMatrix.a*c$a.resultMatrix.a+c$a.resultMatrix.c*c$a.resultMatrix.c),c$r=Math.sqrt(c$b*c$b+c$d*c$d),c$s=1e-5<c$q?(c$q+(c$r-c$q+this._data.offsetScaleX)*this.scaleMix)/c$q:0;c$a.resultMatrix.a*=c$s,c$a.resultMatrix.c*=c$s,c$q=Math.sqrt(c$a.resultMatrix.b*c$a.resultMatrix.b+c$a.resultMatrix.d*c$a.resultMatrix.d),c$r=Math.sqrt(c$c*c$c+c$g*c$g),c$s=1e-5<c$q?(c$q+(c$r-c$q+this._data.offsetScaleY)*this.scaleMix)/c$q:0,c$a.resultMatrix.b*=c$s,c$a.resultMatrix.d*=c$s}if(0<this.shearMix){c$k=c$a.resultMatrix.b,c$m=c$a.resultMatrix.d;var c$t=Math.atan2(c$m,c$k);(c$n=Math.atan2(c$g,c$c)-Math.atan2(c$d,c$b)-(c$t-Math.atan2(c$a.resultMatrix.c,c$a.resultMatrix.a)))>Math.PI?c$n-=2*Math.PI:c$n<-Math.PI&&(c$n+=2*Math.PI),c$n=c$t+(c$n+this._data.offsetShearY*Math.PI/180)*this.shearMix,c$s=Math.sqrt(c$k*c$k+c$m*c$m),c$a.resultMatrix.b=Math.cos(c$n)*c$s,c$a.resultMatrix.d=Math.sin(c$n)*c$s}}},c$a}(),c$Ua=function(){function c$a(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return c$d(c$a,"laya.ani.bone.TfConstraintData"),c$a}(),c$Va=function(){function c$a(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}c$d(c$a,"laya.ani.bone.Transform");var c$b=c$a.prototype;return c$b.initData=function(c$a){null!=c$a.x&&(this.x=c$a.x),null!=c$a.y&&(this.y=c$a.y),null!=c$a.skX&&(this.skX=c$a.skX),null!=c$a.skY&&(this.skY=c$a.skY),null!=c$a.scX&&(this.scX=c$a.scX),null!=c$a.scY&&(this.scY=c$a.scY)},c$b.getMatrix=function(){var c$a;return(c$a=this.mMatrix?this.mMatrix:this.mMatrix=new c$Ga).identity(),c$a.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(c$a,this.skewX*Math.PI/180,this.skewY*Math.PI/180),c$a.rotate(this.skX*Math.PI/180),c$a.translate(this.x,this.y),c$a},c$b.skew=function(c$a,c$b,c$c){var c$d=Math.sin(c$c),c$g=Math.cos(c$c),c$h=Math.sin(c$b),c$i=Math.cos(c$b);return c$a.setTo(c$a.a*c$i-c$a.b*c$d,c$a.a*c$h+c$a.b*c$g,c$a.c*c$i-c$a.d*c$d,c$a.c*c$h+c$a.d*c$g,c$a.tx*c$i-c$a.ty*c$d,c$a.tx*c$h+c$a.ty*c$g),c$a},c$a}(),c$z=function(){function c$a(){}return c$d(c$a,"laya.ani.bone.UVTools"),c$a.getRelativeUV=function(c$a,c$b,c$c){var c$d=c$a[0],c$g=c$a[2]-c$a[0],c$h=c$a[1],c$i=c$a[5]-c$a[1];c$c||(c$c=[]),c$c.length=c$b.length;var c$j,c$k=0;c$j=c$c.length;var c$l=1/c$g,c$m=1/c$i;for(c$k=0;c$k<c$j;c$k+=2)c$c[c$k]=(c$b[c$k]-c$d)*c$l,c$c[c$k+1]=(c$b[c$k+1]-c$h)*c$m;return c$c},c$a.getAbsoluteUV=function(c$a,c$b,c$c){if(0==c$a[0]&&0==c$a[1]&&1==c$a[4]&&1==c$a[5])return c$c?(c$t.copyArray(c$c,c$b),c$c):c$b;var c$d=c$a[0],c$g=c$a[2]-c$a[0],c$h=c$a[1],c$i=c$a[5]-c$a[1];c$c||(c$c=[]),c$c.length=c$b.length;var c$j,c$k=0;for(c$j=c$c.length,c$k=0;c$k<c$j;c$k+=2)c$c[c$k]=c$b[c$k]*c$g+c$d,c$c[c$k+1]=c$b[c$k+1]*c$i+c$h;return c$c},c$a}(),c$I=function(){function c$a(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return c$d(c$a,"laya.ani.KeyFramesContent"),c$a}(),c$A=function(){function c$m(){}return c$d(c$m,"laya.ani.math.BezierLerp"),c$m.getBezierRate=function(c$a,c$b,c$c,c$d,c$g){var c$h=c$m._getBezierParamKey(c$b,c$c,c$d,c$g),c$i=100*c$h+c$a;if(c$m._bezierResultCache[c$i])return c$m._bezierResultCache[c$i];var c$j,c$k=c$m._getBezierPoints(c$b,c$c,c$d,c$g,c$h),c$l=0;for(c$j=c$k.length,c$l=0;c$l<c$j;c$l+=2)if(c$a<=c$k[c$l])return c$m._bezierResultCache[c$i]=c$k[c$l+1],c$k[c$l+1];return c$m._bezierResultCache[c$i]=1},c$m._getBezierParamKey=function(c$a,c$b,c$c,c$d){return 100*(100*(100*(100*c$a+c$b)+c$c)+c$d)},c$m._getBezierPoints=function(c$a,c$b,c$c,c$d,c$g){return c$m._bezierPointsCache[c$g]?c$m._bezierPointsCache[c$g]:(c$h=[0,0,c$a,c$b,c$c,c$d,1,1],c$i=(new c$j).getBezierPoints(c$h,100,3),c$m._bezierPointsCache[c$g]=c$i);var c$h,c$i},c$m._bezierResultCache={},c$m._bezierPointsCache={},c$m}(),c$B=function(c$a){function c$b(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,c$b.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}c$d(c$b,"laya.ani.AnimationPlayer",c$g);var c$c=c$b.prototype;return c$ga.imps(c$c,{"laya.resource.IDestroy":!0}),c$c._onTempletLoadedComputeFullKeyframeIndices=function(c$a,c$b,c$c){this._templet===c$c&&this._cachePlayRate===c$a&&this._cacheFrameRate===c$b&&this._computeFullKeyframeIndices()},c$c._computeFullKeyframeIndices=function(){for(var c$a=this._fullFrames=[],c$b=this._templet,c$c=this._cacheFrameRateInterval*this._cachePlayRate,c$d=0,c$g=c$b.getAnimationCount();c$d<c$g;c$d++){for(var c$h=[],c$i=0,c$j=c$b.getAnimation(c$d).nodes.length;c$i<c$j;c$i++){for(var c$k=c$b.getAnimation(c$d).nodes[c$i],c$l=Math.floor(c$k.playTime/c$c+.01),c$m=new Uint16Array(c$l+1),c$n=-1,c$o=0,c$p=c$k.keyFrame.length;c$o<c$p;c$o++){var c$q=c$k.keyFrame[c$o],c$r=c$q.startTime,c$s=c$r+c$q.duration+c$c;do{for(var c$t=Math.floor(c$r/c$c+.5),c$u=c$n+1;c$u<c$t;c$u++)c$m[c$u]=c$o;c$m[c$n=c$t]=c$o,c$r+=c$c}while(c$r<=c$s)}c$h.push(c$m)}c$a.push(c$h)}},c$c._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},c$c._calculatePlayDuration=function(){if(0!==this.state){var c$a=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=c$a),this._playEnd>c$a&&(this._playEnd=c$a),this._playDuration=this._playEnd-this._playStart}},c$c._setPlayParams=function(c$a,c$b){this._currentTime=c$a,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/c$b+.01),0),this._currentFrameTime=this._currentKeyframeIndex*c$b},c$c._setPlayParamsWhenStop=function(c$a,c$b){this._currentTime=c$a,this._currentKeyframeIndex=Math.max(Math.floor(c$a/c$b+.01),0),this._currentFrameTime=this._currentKeyframeIndex*c$b,this._currentAnimationClipIndex=-1},c$c._update=function(c$a){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var c$b=this._cacheFrameRateInterval*this._cachePlayRate,c$c=0;this._startUpdateLoopCount!==c$q.loopCount&&(c$c=c$a*this.playbackRate,this._elapsedPlaybackTime+=c$c);var c$d=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=c$d)return this._setPlayParamsWhenStop(c$d,c$b),void this.event("stopped");if(c$c+=this._currentTime,0<c$d)if(c$d<=c$c)do{if(c$c-=c$d,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(c$d,c$b),this._stopWhenCircleFinish=!1,void this.event("stopped");c$c<c$d&&(this._setPlayParams(c$c,c$b),this.event("complete"))}while(c$d<=c$c);else this._setPlayParams(c$c,c$b);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(c$d,c$b),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},c$c._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},c$c.play=function(c$a,c$b,c$c,c$d,c$g){if(void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=1),void 0===c$c&&(c$c=2147483647),void 0===c$d&&(c$d=0),void 0===c$g&&(c$g=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(c$c<0||c$d<0||c$g<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==c$g&&c$g<c$d)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=c$b,this._overallDuration=c$c,this._playStart=c$d,this._playEnd=c$g,this._paused=!1,this._currentAnimationClipIndex=c$a,this._currentKeyframeIndex=0,this._startUpdateLoopCount=c$q.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},c$c.playByFrame=function(c$a,c$b,c$c,c$d,c$g,c$h){void 0===c$a&&(c$a=0),void 0===c$b&&(c$b=1),void 0===c$c&&(c$c=2147483647),void 0===c$d&&(c$d=0),void 0===c$g&&(c$g=0),void 0===c$h&&(c$h=30);var c$i=1e3/c$h;this.play(c$a,c$b,c$c,c$d*c$i,c$g*c$i)},c$c.stop=function(c$a){void 0===c$a&&(c$a=!0),c$a?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},c$h(0,c$c,"playEnd",function(){return this._playEnd}),c$h(0,c$c,"templet",function(){return this._templet},function(c$a){0===!this.state&&this.stop(!0),this._templet!==c$a&&((this._templet=c$a).loaded?this._computeFullKeyframeIndices():c$a.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),c$h(0,c$c,"playStart",function(){return this._playStart}),c$h(0,c$c,"playDuration",function(){return this._playDuration}),c$h(0,c$c,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),c$h(0,c$c,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),c$h(0,c$c,"overallDuration",function(){return this._overallDuration}),c$h(0,c$c,"currentFrameTime",function(){return this._currentFrameTime}),c$h(0,c$c,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),c$h(0,c$c,"currentPlayTime",function(){return this._currentTime+this._playStart}),c$h(0,c$c,"cachePlayRate",function(){return this._cachePlayRate},function(c$a){this._cachePlayRate!==c$a&&(this._cachePlayRate=c$a,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[c$a,this._cacheFrameRate])))}),c$h(0,c$c,"cacheFrameRate",function(){return this._cacheFrameRate},function(c$a){this._cacheFrameRate!==c$a&&(this._cacheFrameRate=c$a,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,c$a])))}),c$h(0,c$c,"currentTime",null,function(c$a){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(c$a<this._playStart||c$a>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=c$q.loopCount;var c$b=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=c$a,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/c$b),0),this._currentFrameTime=this._currentKeyframeIndex*c$b}}),c$h(0,c$c,"paused",function(){return this._paused},function(c$a){(this._paused=c$a)&&this.event("paused")}),c$h(0,c$c,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),c$h(0,c$c,"destroyed",function(){return this._destroyed}),c$b}(),c$J=function(c$a){function c$b(){c$b.__super.call(this),c$s.isConchNode&&(this.drawSkin=function(c$a){c$a.transform||(c$a.transform=c$Ga.EMPTY),this._addCmd([c$a]),this.setSkinMesh&&this.setSkinMesh(c$a._ps,c$a.mVBData,c$a.mEleNum,0,c$a.mTexture,c$a.transform)})}return c$d(c$b,"laya.ani.GraphicsAni",c$i),c$b.prototype.drawSkin=function(c$a){var c$b=[c$a];this._saveToCmd(c$s._context._drawSkin,c$b)},c$b.create=function(){return c$b._caches.pop()||new c$b},c$b.recycle=function(c$a){c$a.clear(),c$b._caches.push(c$a)},c$b._caches=[],c$b}(),c$K=function(c$a){function c$u(){this._aniMap={},this.unfixedLastAniIndex=-1,c$u.__super.call(this),this._anis=new Array}c$d(c$u,"laya.ani.AnimationTemplet",c$m);var c$b=c$u.prototype;return c$b.parse=function(c$a){var c$b=new c$Fa(c$a);this._aniVersion=c$b.readUTFString(),c$v.parse(this,c$b)},c$b._calculateKeyFrame=function(c$a,c$b,c$c){var c$d=c$a.keyFrame;c$d[c$b]=c$d[0];for(var c$g=0;c$g<c$b;c$g++){var c$h=c$d[c$g];c$h.nextData=0===c$h.duration?c$h.data:c$d[c$g+1].data}c$d.length--},c$b.onAsynLoaded=function(c$a,c$b,c$c){var c$d=new c$Fa(c$b);switch(this._aniVersion=c$d.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":c$w.parse(this,c$d);break;default:c$v.parse(this,c$d)}this._endLoaded()},c$b.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},c$b.getAnimationCount=function(){return this._anis.length},c$b.getAnimation=function(c$a){return this._anis[c$a]},c$b.getAniDuration=function(c$a){return this._anis[c$a].playTime},c$b.getNodes=function(c$a){return this._anis[c$a].nodes},c$b.getNodeIndexWithName=function(c$a,c$b){return this._anis[c$a].bone3DMap[c$b]},c$b.getNodeCount=function(c$a){return this._anis[c$a].nodes.length},c$b.getTotalkeyframesLength=function(c$a){return this._anis[c$a].totalKeyframeDatasLength},c$b.getPublicExtData=function(){return this._publicExtData},c$b.getAnimationDataWithCache=function(c$a,c$b,c$c,c$d){var c$g=c$b[c$c];if(c$g){var c$h=c$g[c$a];return c$h?c$h[c$d]:null}return null},c$b.setAnimationDataWithCache=function(c$a,c$b,c$c,c$d,c$g){var c$h=c$b[c$c]||(c$b[c$c]={});(c$h[c$a]||(c$h[c$a]=[]))[c$d]=c$g},c$b.getOriginalData=function(c$a,c$b,c$c,c$d,c$g){for(var c$h=this._anis[c$a].nodes,c$i=0,c$j=0,c$k=c$h.length,c$l=0;c$j<c$k;c$j++){var c$m,c$n=c$h[c$j];c$m=c$n.keyFrame[c$c[c$j][c$d]],c$n.dataOffset=c$l;var c$o=c$g-c$m.startTime,c$p=c$n.lerpType;if(c$p)switch(c$p){case 0:case 1:for(c$i=0;c$i<c$n.keyframeWidth;)c$i+=c$n.interpolationMethod[c$i](c$n,c$i,c$b,c$l+c$i,c$m.data,c$o,null,c$m.duration,c$m.nextData);break;case 2:var c$q=c$m.interpolationData,c$r=c$q.length,c$s=0;for(c$i=0;c$i<c$r;){var c$t=c$q[c$i];switch(c$t){case 6:case 7:c$i+=c$u.interpolation[c$t](c$n,c$s,c$b,c$l+c$s,c$m.data,c$o,null,c$m.duration,c$m.nextData,c$q,c$i+1);break;default:c$i+=c$u.interpolation[c$t](c$n,c$s,c$b,c$l+c$s,c$m.data,c$o,null,c$m.duration,c$m.nextData)}c$s++}}else for(c$i=0;c$i<c$n.keyframeWidth;)c$i+=c$n.interpolationMethod[c$i](c$n,c$i,c$b,c$l+c$i,c$m.data,c$o,null,c$m.duration,c$m.nextData);c$l+=c$n.keyframeWidth}},c$b.getNodesCurrentFrameIndex=function(c$a,c$b){var c$c=this._anis[c$a].nodes;c$a!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(c$c.length),this.unfixedCurrentTimes=new Float32Array(c$c.length),this.unfixedLastAniIndex=c$a);for(var c$d=0,c$g=c$c.length;c$d<c$g;c$d++){var c$h=c$c[c$d];for(c$b<this.unfixedCurrentTimes[c$d]&&(this.unfixedCurrentFrameIndexes[c$d]=0),this.unfixedCurrentTimes[c$d]=c$b;this.unfixedCurrentFrameIndexes[c$d]<c$h.keyFrame.length&&!(c$h.keyFrame[this.unfixedCurrentFrameIndexes[c$d]].startTime>this.unfixedCurrentTimes[c$d]);)this.unfixedCurrentFrameIndexes[c$d]++;this.unfixedCurrentFrameIndexes[c$d]--}return this.unfixedCurrentFrameIndexes},c$b.getOriginalDataUnfixedRate=function(c$a,c$b,c$c){var c$d=this._anis[c$a].nodes;c$a!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(c$d.length),this.unfixedCurrentTimes=new Float32Array(c$d.length),this.unfixedKeyframes=c$r(c$d.length),this.unfixedLastAniIndex=c$a);for(var c$g=0,c$h=0,c$i=c$d.length,c$j=0;c$h<c$i;c$h++){var c$k=c$d[c$h];for(c$c<this.unfixedCurrentTimes[c$h]&&(this.unfixedCurrentFrameIndexes[c$h]=0),this.unfixedCurrentTimes[c$h]=c$c;this.unfixedCurrentFrameIndexes[c$h]<c$k.keyFrame.length&&!(c$k.keyFrame[this.unfixedCurrentFrameIndexes[c$h]].startTime>this.unfixedCurrentTimes[c$h]);)this.unfixedKeyframes[c$h]=c$k.keyFrame[this.unfixedCurrentFrameIndexes[c$h]],this.unfixedCurrentFrameIndexes[c$h]++;var c$l=this.unfixedKeyframes[c$h];c$k.dataOffset=c$j;var c$m=c$c-c$l.startTime;if(c$k.lerpType)switch(c$k.lerpType){case 0:case 1:for(c$g=0;c$g<c$k.keyframeWidth;)c$g+=c$k.interpolationMethod[c$g](c$k,c$g,c$b,c$j+c$g,c$l.data,c$m,null,c$l.duration,c$l.nextData);break;case 2:var c$n=c$l.interpolationData,c$o=c$n.length,c$p=0;for(c$g=0;c$g<c$o;){var c$q=c$n[c$g];switch(c$q){case 6:case 7:c$g+=c$u.interpolation[c$q](c$k,c$p,c$b,c$j+c$p,c$l.data,c$m,null,c$l.duration,c$l.nextData,c$n,c$g+1);break;default:c$g+=c$u.interpolation[c$q](c$k,c$p,c$b,c$j+c$p,c$l.data,c$m,null,c$l.duration,c$l.nextData)}c$p++}}else for(c$g=0;c$g<c$k.keyframeWidth;)c$g+=c$k.interpolationMethod[c$g](c$k,c$g,c$b,c$j+c$g,c$l.data,c$m,null,c$l.duration,c$l.nextData);c$j+=c$k.keyframeWidth}},c$u._LinearInterpolation_0=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l){var c$m=0===c$j?0:c$h/c$j;return c$c[c$d]=(1-c$m)*c$g[c$b]+c$m*c$k[c$b],1},c$u._QuaternionInterpolation_1=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l){var c$m=0===c$j?0:c$h/c$j;return c$o.slerpQuaternionArray(c$g,c$b,c$k,c$b,c$m,c$c,c$d),4},c$u._AngleInterpolation_2=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l){return 0},c$u._RadiansInterpolation_3=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l){return 0},c$u._Matrix4x4Interpolation_4=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l){for(var c$m=0;c$m<16;c$m++,c$b++)c$c[c$d+c$m]=c$g[c$b]+c$h*c$i[c$b];return 16},c$u._NoInterpolation_5=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l){return c$c[c$d]=c$g[c$b],1},c$u._BezierInterpolation_6=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l,c$m){return void 0===c$m&&(c$m=0),c$c[c$d]=c$g[c$b]+(c$k[c$b]-c$g[c$b])*c$A.getBezierRate(c$h/c$j,c$l[c$m],c$l[c$m+1],c$l[c$m+2],c$l[c$m+3]),5},c$u._BezierInterpolation_7=function(c$a,c$b,c$c,c$d,c$g,c$h,c$i,c$j,c$k,c$l,c$m){return void 0===c$m&&(c$m=0),c$c[c$d]=c$l[c$m+4]+c$l[c$m+5]*c$A.getBezierRate((.001*c$h+c$l[c$m+6])/c$l[c$m+7],c$l[c$m],c$l[c$m+1],c$l[c$m+2],c$l[c$m+3]),9},c$u.load=function(c$a){return c$ga.loader.create(c$a,null,null,c$u)},c$u.interpolation=[c$u._LinearInterpolation_0,c$u._QuaternionInterpolation_1,c$u._AngleInterpolation_2,c$u._RadiansInterpolation_3,c$u._Matrix4x4Interpolation_4,c$u._NoInterpolation_5,c$u._BezierInterpolation_6,c$u._BezierInterpolation_7],c$u}(),c$C=function(c$b){function c$c(c$a,c$b){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,c$c.__super.call(this),void 0===c$b&&(c$b=0),c$a&&this.init(c$a,c$b)}c$d(c$c,"laya.ani.bone.Skeleton",c$b);var c$a=c$c.prototype;return c$a.init=function(c$a,c$b){void 0===c$b&&(c$b=0);var c$c,c$d,c$g,c$h=0,c$i=0;if(1==c$b)for(this._graphicsCache=[],c$h=0,c$i=c$a.getAnimationCount();c$h<c$i;c$h++)this._graphicsCache.push([]);if(this._yReverseMatrix=c$a.yReverseMatrix,this._aniMode=c$b,this._templet=c$a,this._player=new c$B,this._player.cacheFrameRate=c$a.rate,this._player.templet=c$a,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=c$a.mBoneArr,this._rootBone=c$a.mRootBone,this._aniSectionDic=c$a.aniSectionDic,0<c$a.ikArr.length)for(this._ikArr=[],c$h=0,c$i=c$a.ikArr.length;c$h<c$i;c$h++)this._ikArr.push(new c$u(c$a.ikArr[c$h],this._boneList));if(0<c$a.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),c$h=0,c$i=c$a.pathArr.length;c$h<c$i;c$h++)c$c=c$a.pathArr[c$h],c$d=new c$x(c$c,this._boneList),(c$g=this._boneSlotDic[c$c.name])&&((c$d=new c$x(c$c,this._boneList)).target=c$g),this._pathDic[c$c.name]=c$d;if(0<c$a.tfArr.length)for(this._tfArr=[],c$h=0,c$i=c$a.tfArr.length;c$h<c$i;c$h++)this._tfArr.push(new c$y(c$a.tfArr[c$h],this._boneList));if(0<c$a.skinDataArray.length){var c$j=this._templet.skinDataArray[this._skinIndex];this._skinName=c$j.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},c$a.load=function(c$a,c$b,c$c){},c$a._onLoaded=function(){},c$a._parseComplete=function(){var c$a=c$D.TEMPLET_DICTIONARY[this._aniPath];c$a&&(this.init(c$a,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},c$a._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},c$a._onPlay=function(){this.event("played")},c$a._onStop=function(){var c$a,c$b=this._templet.eventAniArr[this._aniClipIndex];if(c$b&&this._eventIndex<c$b.length)for(;this._eventIndex<c$b.length;this._eventIndex++)(c$a=c$b[this._eventIndex]).time>=this._player.playStart&&c$a.time<=this._player.playEnd&&this.event("label",c$a);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},c$a._onPause=function(){this.event("paused")},c$a._parseSrcBoneMatrix=function(){var c$a=0,c$b=0;for(c$b=this._templet.srcBoneMatrixArr.length,c$a=0;c$a<c$b;c$a++)this._boneMatrixArray.push(new c$Ga);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var c$c,c$d,c$g=this._templet.boneSlotArray;for(c$a=0,c$b=c$g.length;c$a<c$b;c$a++)c$c=c$g[c$a],null==(c$d=this._bindBoneBoneSlotDic[c$c.parent])&&(this._bindBoneBoneSlotDic[c$c.parent]=c$d=[]),this._boneSlotDic[c$c.name]=c$c=c$c.copy(),c$d.push(c$c),this._boneSlotArray.push(c$c)}},c$a._emitMissedEvents=function(c$a,c$b,c$c){void 0===c$c&&(c$c=0);var c$d=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(c$d){var c$g,c$h,c$i=0;for(c$g=c$d.length,c$i=c$c;c$i<c$g;c$i++)(c$h=c$d[c$i]).time>=this._player.playStart&&c$h.time<=this._player.playEnd&&this.event("label",c$h)}},c$a._update=function(c$a){if(void 0===c$a&&(c$a=!0),!(this._pause||c$a&&this._indexControl)){var c$b=this.timer.currTimer,c$c=this._player.currentKeyframeIndex,c$d=c$b-this._lastTime;if(c$a?this._player._update(c$d):c$c=-1,this._lastTime=c$b,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<c$d&&this._clipIndex==c$c&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var c$g;this._lastUpdateAniClipIndex=this._aniClipIndex,c$c>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var c$h,c$i=this._templet.eventAniArr[this._aniClipIndex];if(c$i&&this._eventIndex<c$i.length&&((c$g=c$i[this._eventIndex]).time>=this._player.playStart&&c$g.time<=this._player.playEnd?this._player.currentPlayTime>=c$g.time&&(this.event("label",c$g),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(c$h=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=c$h&&(this.graphics=c$h));var c$j=0,c$k=0;for(c$k=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,c$k-1)&&0<c$k;)c$k--;if(c$k<this._clipIndex)for(c$j=c$k;c$j<this._clipIndex;c$j++)this._createGraphics(c$j)}else if(1==this._aniMode){if(c$h=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=c$h&&(this.graphics=c$h));for(c$k=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,c$k-1)&&0<c$k;)c$k--;if(c$k<this._clipIndex)for(c$j=c$k;c$j<this._clipIndex;c$j++)this._createGraphics(c$j)}this._createGraphics()}}},c$a._createGraphics=function(c$a){void 0===c$a&&(c$a=-1),-1==c$a&&(c$a=this._clipIndex);var c$b,c$c,c$d=c$a*this._player.cacheFrameRateInterval,c$g=this._templet.drawOrderAniArr[this._aniClipIndex];if(c$g&&0<c$g.length)for(this._drawOrderIndex=0,c$b=c$g[this._drawOrderIndex];c$d>=c$b.time&&(this._drawOrder=c$b.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=c$g.length));)c$b=c$g[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=c$J.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=c$J.create(),c$c=this.graphics;var c$h=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],c$a,c$d);var c$i,c$j,c$k,c$l,c$m=this._aniSectionDic[this._aniClipIndex],c$n=0,c$o=0,c$p=0,c$q=0,c$r=0,c$s=this._templet.srcBoneMatrixArr.length;for(c$r=c$m[c$o=0];c$o<c$s;c$o++)c$l=this._boneList[c$o],c$k=this._templet.srcBoneMatrixArr[c$o],c$l.resultTransform.scX=c$k.scX*this._curOriginalData[c$n++],c$l.resultTransform.skX=c$k.skX+this._curOriginalData[c$n++],c$l.resultTransform.skY=c$k.skY+this._curOriginalData[c$n++],c$l.resultTransform.scY=c$k.scY*this._curOriginalData[c$n++],c$l.resultTransform.x=c$k.x+this._curOriginalData[c$n++],c$l.resultTransform.y=c$k.y+this._curOriginalData[c$n++],8===this._templet.tMatrixDataLen&&(c$l.resultTransform.skewX=c$k.skewX+this._curOriginalData[c$n++],c$l.resultTransform.skewY=c$k.skewY+this._curOriginalData[c$n++]);var c$t,c$u={},c$v={};for(c$r+=c$m[1];c$o<c$r;c$o++)c$u[(c$t=c$h[c$o]).name]=this._curOriginalData[c$n++],c$v[c$t.name]=this._curOriginalData[c$n++],this._curOriginalData[c$n++],this._curOriginalData[c$n++],this._curOriginalData[c$n++],this._curOriginalData[c$n++];var c$w,c$x,c$y={},c$z={};for(c$r+=c$m[2];c$o<c$r;c$o++)c$y[(c$t=c$h[c$o]).name]=this._curOriginalData[c$n++],c$z[c$t.name]=this._curOriginalData[c$n++],this._curOriginalData[c$n++],this._curOriginalData[c$n++],this._curOriginalData[c$n++],this._curOriginalData[c$n++];if(this._pathDic)for(c$r+=c$m[3];c$o<c$r;c$o++){if(c$t=c$h[c$o],c$w=this._pathDic[c$t.name])switch(new c$Fa(c$t.extenData).getByte()){case 1:c$w.position=this._curOriginalData[c$n++];break;case 2:c$w.spacing=this._curOriginalData[c$n++];break;case 3:c$w.rotateMix=this._curOriginalData[c$n++],c$w.translateMix=this._curOriginalData[c$n++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(c$Ga.TEMP.identity()),this._ikArr)for(c$o=0,c$r=this._ikArr.length;c$o<c$r;c$o++)c$x=this._ikArr[c$o],c$y.hasOwnProperty(c$x.name)&&(c$x.bendDirection=c$y[c$x.name]),c$z.hasOwnProperty(c$x.name)&&(c$x.mix=c$z[c$x.name]),c$x.apply();if(this._pathDic)for(var c$A in this._pathDic)(c$w=this._pathDic[c$A]).apply(this._boneList,c$c);if(this._tfArr)for(c$o=0,c$q=this._tfArr.length;c$o<c$q;c$o++)this._tfArr[c$o].apply();for(c$o=0,c$q=this._boneList.length;c$o<c$q;c$o++)if(c$l=this._boneList[c$o],c$j=this._bindBoneBoneSlotDic[c$l.name],c$l.resultMatrix.copyTo(this._boneMatrixArray[c$o]),c$j)for(c$p=0,c$r=c$j.length;c$p<c$r;c$p++)(c$i=c$j[c$p])&&c$i.setParentMatrix(c$l.resultMatrix);var c$B,c$C,c$D,c$E,c$F={},c$G=this._templet.deformAniArr;if(c$G&&0<c$G.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,c$o=0,c$r=this._boneSlotArray.length;c$o<c$r;c$o++)(c$i=this._boneSlotArray[c$o]).deformData=null;var c$H,c$I=c$G[this._aniClipIndex];for(c$H in c$B=c$I.default,this._setDeform(c$B,c$F,this._boneSlotArray,c$d),c$I)"default"!=c$H&&c$H!=this._skinName&&(c$B=c$I[c$H],this._setDeform(c$B,c$F,this._boneSlotArray,c$d));c$B=c$I[this._skinName],this._setDeform(c$B,c$F,this._boneSlotArray,c$d)}if(this._drawOrder)for(c$o=0,c$r=this._drawOrder.length;c$o<c$r;c$o++)c$C=c$u[(c$i=this._boneSlotArray[this._drawOrder[c$o]]).name],c$D=c$v[c$i.name],isNaN(c$D)||(c$c.save(),c$c.alpha(c$D)),isNaN(c$C)||-2==c$C||(this._templet.attachmentNames?c$i.showDisplayByName(this._templet.attachmentNames[c$C]):c$i.showDisplayByIndex(c$C)),c$F[this._drawOrder[c$o]]?(c$E=c$F[this._drawOrder[c$o]],c$i.currDisplayData&&c$E[c$i.currDisplayData.attachmentName]?c$i.deformData=c$E[c$i.currDisplayData.attachmentName]:c$i.deformData=null):c$i.deformData=null,isNaN(c$D)?c$i.draw(c$c,this._boneMatrixArray,2==this._aniMode):c$i.draw(c$c,this._boneMatrixArray,2==this._aniMode,c$D),isNaN(c$D)||c$c.restore();else for(c$o=0,c$r=this._boneSlotArray.length;c$o<c$r;c$o++)c$C=c$u[(c$i=this._boneSlotArray[c$o]).name],c$D=c$v[c$i.name],isNaN(c$D)||(c$c.save(),c$c.alpha(c$D)),isNaN(c$C)||-2==c$C||(this._templet.attachmentNames?c$i.showDisplayByName(this._templet.attachmentNames[c$C]):c$i.showDisplayByIndex(c$C)),c$F[c$o]?(c$E=c$F[c$o],c$i.currDisplayData&&c$E[c$i.currDisplayData.attachmentName]?c$i.deformData=c$E[c$i.currDisplayData.attachmentName]:c$i.deformData=null):c$i.deformData=null,isNaN(c$D)?c$i.draw(c$c,this._boneMatrixArray,2==this._aniMode):c$i.draw(c$c,this._boneMatrixArray,2==this._aniMode,c$D),isNaN(c$D)||c$c.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,c$a,c$c):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,c$a,c$c)},c$a._setDeform=function(c$a,c$b,c$c,c$d){if(c$a){var c$g,c$h,c$i,c$j=0,c$k=0,c$l=0;if(c$a)for(c$j=0,c$k=c$a.deformSlotDataList.length;c$j<c$k;c$j++)for(c$g=c$a.deformSlotDataList[c$j],c$l=0;c$l<c$g.deformSlotDisplayList.length;c$l++)c$i=c$c[(c$h=c$g.deformSlotDisplayList[c$l]).slotIndex],c$h.apply(c$d,c$i),c$b[c$h.slotIndex]||(c$b[c$h.slotIndex]={}),c$b[c$h.slotIndex][c$h.attachment]=c$h.deformData}},c$a.getAnimNum=function(){return this._templet.getAnimationCount()},c$a.getAniNameByIndex=function(c$a){return this._templet.getAniNameByIndex(c$a)},c$a.getSlotByName=function(c$a){return this._boneSlotDic[c$a]},c$a.showSkinByName=function(c$a,c$b){void 0===c$b&&(c$b=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(c$a),c$b)},c$a.showSkinByIndex=function(c$a,c$b){void 0===c$b&&(c$b=!0);for(var c$c=0;c$c<this._boneSlotArray.length;c$c++)this._boneSlotArray[c$c].showSlotData(null,c$b);if(this._templet.showSkinByIndex(this._boneSlotDic,c$a,c$b)){var c$d=this._templet.skinDataArray[c$a];this._skinIndex=c$a,this._skinName=c$d.name}this._clearCache()},c$a.showSlotSkinByIndex=function(c$a,c$b){if(0!=this._aniMode){var c$c=this.getSlotByName(c$a);c$c&&c$c.showDisplayByIndex(c$b),this._clearCache()}},c$a.showSlotSkinByName=function(c$a,c$b){if(0!=this._aniMode){var c$c=this.getSlotByName(c$a);c$c&&c$c.showDisplayByName(c$b),this._clearCache()}},c$a.replaceSlotSkinName=function(c$a,c$b,c$c){if(0!=this._aniMode){var c$d=this.getSlotByName(c$a);c$d&&c$d.replaceDisplayByName(c$b,c$c),this._clearCache()}},c$a.replaceSlotSkinByIndex=function(c$a,c$b,c$c){if(0!=this._aniMode){var c$d=this.getSlotByName(c$a);c$d&&c$d.replaceDisplayByIndex(c$b,c$c),this._clearCache()}},c$a.setSlotSkin=function(c$a,c$b){if(0!=this._aniMode){var c$c=this.getSlotByName(c$a);c$c&&c$c.replaceSkin(c$b),this._clearCache()}},c$a._clearCache=function(){if(1==this._aniMode)for(var c$a=0,c$b=this._graphicsCache.length;c$a<c$b;c$a++){for(var c$c=0,c$d=this._graphicsCache[c$a].length;c$c<c$d;c$c++){var c$g=this._graphicsCache[c$a][c$c];c$g!=this.graphics&&c$J.recycle(c$g)}this._graphicsCache[c$a].length=0}},c$a.play=function(c$a,c$b,c$c,c$d,c$g,c$h){void 0===c$c&&(c$c=!0),void 0===c$d&&(c$d=0),void 0===c$g&&(c$g=0),void 0===c$h&&(c$h=!0),this._indexControl=!1;var c$i=-1,c$j=NaN;if(c$j=c$b?2147483647:0,"string"==typeof c$a)for(var c$k=0,c$l=this._templet.getAnimationCount();c$k<c$l;c$k++){var c$m=this._templet.getAnimation(c$k);if(c$m&&c$a==c$m.name){c$i=c$k;break}}else c$i=c$a;-1<c$i&&c$i<this.getAnimNum()&&(this._aniClipIndex=c$i,(c$c||this._pause||this._currAniIndex!=c$i)&&(this._currAniIndex=c$i,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(c$i)),this._drawOrder=null,this._eventIndex=0,this._player.play(c$i,this._player.playbackRate,c$j,c$d,c$g),c$h&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=c$n.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},c$a.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},c$a.playbackRate=function(c$a){this._player&&(this._player.playbackRate=c$a)},c$a.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},c$a.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=c$n.now(),this.timer.frameLoop(1,this,this._update,null,!0))},c$a._getGrahicsDataWithCache=function(c$a,c$b){return this._graphicsCache[c$a][c$b]},c$a._setGrahicsDataWithCache=function(c$a,c$b,c$c){this._graphicsCache[c$a][c$b]=c$c},c$a.destroy=function(c$a){void 0===c$a&&(c$a=!0),c$b.prototype.destroy.call(this,c$a),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},c$h(0,c$a,"url",function(){return this._aniPath},function(c$a){this.load(c$a)}),c$h(0,c$a,"index",function(){return this._index},function(c$a){this.player&&(this._index=c$a,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),c$h(0,c$a,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),c$h(0,c$a,"templet",function(){return this._templet}),c$h(0,c$a,"player",function(){return this._player}),c$c.useSimpleMeshInCanvas=!1,c$c}(c$ha),c$D=function(c$b){function c$g(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,c$g.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}c$d(c$g,"laya.ani.bone.Templet",c$b);var c$a=c$g.prototype;return c$a.getLoadList=function(){return this._loadList},c$a.loadAni=function(c$a){this._skBufferUrl=c$a,c$ga.loader.load(c$a,c$k.create(this,this.onComplete),null,"arraybuffer")},c$a.onComplete=function(c$a){if(this._isDestroyed)this.destroy();else{var c$b=c$l.getRes(this._skBufferUrl);c$b?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,c$b)):this.event("error","load failed:"+this._skBufferUrl)}},c$a.parseData=function(c$a,c$b,c$c){void 0===c$c&&(c$c=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=c$a,this._mainTexture&&c$s.isWebGL&&c$a.bitmap&&(c$a.bitmap.enableMerageInAtlas=!1),this._rate=c$c,this.parse(c$b)},c$a.buildArmature=function(c$a){return void 0===c$a&&(c$a=0),new c$C(this,c$a)},c$a.parse=function(c$a){c$b.prototype.parse.call(this,c$a),this._endLoaded(),this._aniVersion!=c$g.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+c$g.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},c$a._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var c$a=0;this._loadList=[];var c$b,c$c=new c$Fa(this.getPublicExtData()),c$d=0,c$g=0,c$h=0,c$i=c$c.getInt32(),c$j=c$c.readUTFString(),c$k=c$j.split("\n");for(c$a=0;c$a<c$i;c$a++)c$b=this._path+c$k[2*c$a],c$j=c$k[2*c$a+1],c$c.getFloat32(),c$c.getFloat32(),c$d=c$c.getFloat32(),c$g=c$c.getFloat32(),c$h=c$c.getFloat32(),isNaN(c$h)?0:c$h,c$h=c$c.getFloat32(),isNaN(c$h)?0:c$h,c$h=c$c.getFloat32(),isNaN(c$h)?c$d:c$h,c$h=c$c.getFloat32(),isNaN(c$h)?c$g:c$h,-1==this._loadList.indexOf(c$b)&&this._loadList.push(c$b);this.event("inited",this)}},c$a._textureComplete=function(){for(var c$a,c$b,c$c=0,c$d=this._loadList.length;c$c<c$d;c$c++)c$b=this._loadList[c$c],c$a=this._textureDic[c$b]=c$l.getRes(c$b),c$s.isWebGL&&c$a&&c$a.bitmap&&(c$a.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},c$a._parsePublicExtData=function(){var c$a=0,c$b=0,c$c=0,c$d=0,c$g=0;for(c$a=0,c$g=this.getAnimationCount();c$a<c$g;c$a++)this._graphicsCache.push([]);var c$h;c$h="Dragon"!=this._aniClassName;var c$i,c$j,c$k=new c$Fa(this.getPublicExtData()),c$l=0,c$m=0,c$n=0,c$o=0,c$p=0,c$q=0,c$r=0,c$s=0,c$t=0,c$u=c$k.getInt32(),c$v=c$k.readUTFString(),c$w=c$v.split("\n");for(c$a=0;c$a<c$u;c$a++){if(c$i=this._mainTexture,c$j=this._path+c$w[2*c$a],c$v=c$w[2*c$a+1],null==this._mainTexture&&(c$i=this._textureDic[c$j]),!c$i)return this.event("error",this),void(this.isParseFail=!0);c$l=c$k.getFloat32(),c$m=c$k.getFloat32(),c$n=c$k.getFloat32(),c$o=c$k.getFloat32(),c$t=c$k.getFloat32(),c$p=isNaN(c$t)?0:c$t,c$t=c$k.getFloat32(),c$q=isNaN(c$t)?0:c$t,c$t=c$k.getFloat32(),c$r=isNaN(c$t)?c$n:c$t,c$t=c$k.getFloat32(),c$s=isNaN(c$t)?c$o:c$t,this.subTextureDic[c$v]=c$Ha.create(c$i,c$l,c$m,c$n,c$o,-c$p,-c$q,c$r,c$s),c$i.alphaTexture&&(this.subTextureDic[c$v].alphaTexture=c$Ha.create(c$i.alphaTexture,c$l,c$m,c$n,c$o,-c$p,-c$q,c$r,c$s))}this._mainTexture=c$i;var c$x,c$y,c$z,c$A,c$B,c$C=c$k.getUint16();for(c$a=0;c$a<c$C;c$a++)(c$x=[]).push(c$k.getUint16()),c$x.push(c$k.getUint16()),c$x.push(c$k.getUint16()),c$x.push(c$k.getUint16()),this.aniSectionDic[c$a]=c$x;var c$D,c$E=c$k.getInt16(),c$F={};for(c$a=0;c$a<c$E;c$a++)c$y=new c$Ia,0==c$a?c$D=c$y:c$y.root=c$D,c$y.d=c$h?-1:1,c$A=c$k.readUTFString(),c$B=c$k.readUTFString(),c$y.length=c$k.getFloat32(),1==c$k.getByte()&&(c$y.inheritRotation=!1),1==c$k.getByte()&&(c$y.inheritScale=!1),c$y.name=c$A,c$B&&((c$z=c$F[c$B])?c$z.addChild(c$y):this.mRootBone=c$y),c$F[c$A]=c$y,this.mBoneArr.push(c$y);this.tMatrixDataLen=c$k.getUint16();var c$G,c$H,c$I=c$k.getUint16(),c$J=Math.floor(c$I/this.tMatrixDataLen),c$K=this.srcBoneMatrixArr;for(c$a=0;c$a<c$J;c$a++)(c$G=new c$Va).scX=c$k.getFloat32(),c$G.skX=c$k.getFloat32(),c$G.skY=c$k.getFloat32(),c$G.scY=c$k.getFloat32(),c$G.x=c$k.getFloat32(),c$G.y=c$k.getFloat32(),8===this.tMatrixDataLen&&(c$G.skewX=c$k.getFloat32(),c$G.skewY=c$k.getFloat32()),c$K.push(c$G),(c$y=this.mBoneArr[c$a]).transform=c$G;var c$L,c$M=c$k.getUint16(),c$N=0;for(c$a=0;c$a<c$M;c$a++){for(c$H=new c$Pa,c$N=c$k.getUint16(),c$b=0;c$b<c$N;c$b++)c$H.boneNames.push(c$k.readUTFString()),c$H.boneIndexs.push(c$k.getInt16());c$H.name=c$k.readUTFString(),c$H.targetBoneName=c$k.readUTFString(),c$H.targetBoneIndex=c$k.getInt16(),c$H.bendDirection=c$k.getFloat32(),c$H.mix=c$k.getFloat32(),c$H.isSpine=c$h,this.ikArr.push(c$H)}var c$O,c$P=c$k.getUint16(),c$Q=0;for(c$a=0;c$a<c$P;c$a++){for(c$L=new c$Ua,c$Q=c$k.getUint16(),c$b=0;c$b<c$Q;c$b++)c$L.boneIndexs.push(c$k.getInt16());c$L.name=c$k.getUTFString(),c$L.targetIndex=c$k.getInt16(),c$L.rotateMix=c$k.getFloat32(),c$L.translateMix=c$k.getFloat32(),c$L.scaleMix=c$k.getFloat32(),c$L.shearMix=c$k.getFloat32(),c$L.offsetRotation=c$k.getFloat32(),c$L.offsetX=c$k.getFloat32(),c$L.offsetY=c$k.getFloat32(),c$L.offsetScaleX=c$k.getFloat32(),c$L.offsetScaleY=c$k.getFloat32(),c$L.offsetShearY=c$k.getFloat32(),this.tfArr.push(c$L)}var c$R=c$k.getUint16(),c$S=0;for(c$a=0;c$a<c$R;c$a++){for((c$O=new c$Qa).name=c$k.readUTFString(),c$S=c$k.getUint16(),c$b=0;c$b<c$S;c$b++)c$O.bones.push(c$k.getInt16());c$O.target=c$k.readUTFString(),c$O.positionMode=c$k.readUTFString(),c$O.spacingMode=c$k.readUTFString(),c$O.rotateMode=c$k.readUTFString(),c$O.offsetRotation=c$k.getFloat32(),c$O.position=c$k.getFloat32(),c$O.spacing=c$k.getFloat32(),c$O.rotateMix=c$k.getFloat32(),c$O.translateMix=c$k.getFloat32(),this.pathArr.push(c$O)}var c$T,c$U,c$V,c$W,c$X,c$Y=0,c$Z=0,c$$=0,c$_=NaN,c$e=0,c$f=c$k.getInt16();for(c$a=0;c$a<c$f;c$a++){var c$aa=c$k.getUint8(),c$ba={};this.deformAniArr.push(c$ba);for(var c$ca=0;c$ca<c$aa;c$ca++)for((c$T=new c$Ka).skinName=c$k.getUTFString(),c$ba[c$T.skinName]=c$T,c$Y=c$k.getInt16(),c$b=0;c$b<c$Y;c$b++)for(c$U=new c$La,c$T.deformSlotDataList.push(c$U),c$Z=c$k.getInt16(),c$c=0;c$c<c$Z;c$c++)for(c$V=new c$Ma,c$U.deformSlotDisplayList.push(c$V),c$V.slotIndex=c$k.getInt16(),c$V.attachment=c$k.getUTFString(),c$$=c$k.getInt16(),c$d=0;c$d<c$$;c$d++)for(1==c$k.getByte()?c$V.tweenKeyList.push(!0):c$V.tweenKeyList.push(!1),c$_=c$k.getFloat32(),c$V.timeList.push(c$_),c$W=[],c$V.vectices.push(c$W),c$e=c$k.getInt16(),c$g=0;c$g<c$e;c$g++)c$W.push(c$k.getFloat32())}var c$da,c$ga,c$ha=c$k.getInt16(),c$ia=0,c$ja=0;for(c$a=0;c$a<c$ha;c$a++){for(c$ia=c$k.getInt16(),c$X=[],c$b=0;c$b<c$ia;c$b++){for((c$da=new c$Na).time=c$k.getFloat32(),c$ja=c$k.getInt16(),c$c=0;c$c<c$ja;c$c++)c$da.drawOrder.push(c$k.getInt16());c$X.push(c$da)}this.drawOrderAniArr.push(c$X)}var c$ka,c$la=c$k.getInt16(),c$ma=0;for(c$a=0;c$a<c$la;c$a++){for(c$ma=c$k.getInt16(),c$ga=[],c$b=0;c$b<c$ma;c$b++)(c$ka=new c$Oa).name=c$k.getUTFString(),c$ka.intValue=c$k.getInt32(),c$ka.floatValue=c$k.getFloat32(),c$ka.stringValue=c$k.getUTFString(),c$ka.time=c$k.getFloat32(),c$ga.push(c$ka);this.eventAniArr.push(c$ga)}var c$na=c$k.getInt16();if(0<c$na)for(this.attachmentNames=[],c$a=0;c$a<c$na;c$a++)this.attachmentNames.push(c$k.getUTFString());var c$oa,c$pa,c$qa=c$k.getInt16();for(c$a=0;c$a<c$qa;c$a++)(c$oa=new c$Ja).name=c$k.readUTFString(),c$oa.parent=c$k.readUTFString(),c$oa.attachmentName=c$k.readUTFString(),c$oa.srcDisplayIndex=c$oa.displayIndex=c$k.getInt16(),(c$oa.templet=this).boneSlotDic[c$oa.name]=c$oa,null==(c$pa=this.bindBoneBoneSlotDic[c$oa.parent])&&(this.bindBoneBoneSlotDic[c$oa.parent]=c$pa=[]),c$pa.push(c$oa),this.boneSlotArray.push(c$oa);var c$ra,c$sa,c$ta,c$ua=c$k.readUTFString().split("\n"),c$va=0,c$wa=c$k.getUint8(),c$xa=0,c$ya=0,c$za=0,c$Aa=0,c$Ba=0,c$Ca=0,c$Da=0;for(c$a=0;c$a<c$wa;c$a++){for((c$ra=new c$Ra).name=c$ua[c$va++],c$xa=c$k.getUint8(),c$b=0;c$b<c$xa;c$b++){for((c$sa=new c$Ta).name=c$ua[c$va++],c$oa=this.boneSlotDic[c$sa.name],c$ya=c$k.getUint8(),c$c=0;c$c<c$ya;c$c++){if(c$ta=new c$Sa,this.skinSlotDisplayDataArr.push(c$ta),c$ta.name=c$ua[c$va++],c$ta.attachmentName=c$ua[c$va++],c$ta.transform=new c$Va,c$ta.transform.scX=c$k.getFloat32(),c$ta.transform.skX=c$k.getFloat32(),c$ta.transform.skY=c$k.getFloat32(),c$ta.transform.scY=c$k.getFloat32(),c$ta.transform.x=c$k.getFloat32(),c$ta.transform.y=c$k.getFloat32(),c$sa.displayArr.push(c$ta),c$ta.width=c$k.getFloat32(),c$ta.height=c$k.getFloat32(),c$ta.type=c$k.getUint8(),c$ta.verLen=c$k.getUint16(),0<(c$E=c$k.getUint16()))for(c$ta.bones=[],c$d=0;c$d<c$E;c$d++){var c$Ea=c$k.getUint16();c$ta.bones.push(c$Ea)}if(0<(c$za=c$k.getUint16()))for(c$ta.uvs=[],c$d=0;c$d<c$za;c$d++)c$ta.uvs.push(c$k.getFloat32());if(0<(c$Aa=c$k.getUint16()))for(c$ta.weights=[],c$d=0;c$d<c$Aa;c$d++)c$ta.weights.push(c$k.getFloat32());if(0<(c$Ba=c$k.getUint16()))for(c$ta.triangles=[],c$d=0;c$d<c$Ba;c$d++)c$ta.triangles.push(c$k.getUint16());if(0<(c$Ca=c$k.getUint16()))for(c$ta.vertices=[],c$d=0;c$d<c$Ca;c$d++)c$ta.vertices.push(c$k.getFloat32());if(0<(c$Da=c$k.getUint16()))for(c$ta.lengths=[],c$d=0;c$d<c$Da;c$d++)c$ta.lengths.push(c$k.getFloat32())}c$ra.slotArr.push(c$sa)}this.skinDic[c$ra.name]=c$ra,this.skinDataArray.push(c$ra)}1==c$k.getUint8()?(this.yReverseMatrix=new c$Ga(1,0,0,-1,0,0),c$D&&c$D.setTempMatrix(this.yReverseMatrix)):c$D&&c$D.setTempMatrix(new c$Ga),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},c$a.getTexture=function(c$a){var c$b=this.subTextureDic[c$a];return c$b||(c$b=this.subTextureDic[c$a.substr(0,c$a.length-1)]),null==c$b?this._mainTexture:c$b},c$a.showSkinByIndex=function(c$a,c$b,c$c){if(void 0===c$c&&(c$c=!0),c$b<0&&c$b>=this.skinDataArray.length)return!1;var c$d,c$g,c$h=0,c$i=0,c$j=this.skinDataArray[c$b];if(c$j){for(c$h=0,c$i=c$j.slotArr.length;c$h<c$i;c$h++)(c$g=c$j.slotArr[c$h])&&(c$d=c$a[c$g.name])&&(c$d.showSlotData(c$g,c$c),c$c&&"undefined"!=c$d.attachmentName&&"null"!=c$d.attachmentName?c$d.showDisplayByName(c$d.attachmentName):c$d.showDisplayByIndex(c$d.displayIndex));return!0}return!1},c$a.getSkinIndexByName=function(c$a){for(var c$b=0,c$c=this.skinDataArray.length;c$b<c$c;c$b++)if(this.skinDataArray[c$b].name==c$a)return c$b;return-1},c$a.getGrahicsDataWithCache=function(c$a,c$b){return this._graphicsCache[c$a][c$b]},c$a.setGrahicsDataWithCache=function(c$a,c$b,c$c){this._graphicsCache[c$a][c$b]=c$c},c$a.destroy=function(){var c$a;for(var c$b in this._isDestroyed=!0,this.subTextureDic)(c$a=this.subTextureDic[c$b])&&c$a.destroy();for(c$b in this._textureDic)(c$a=this._textureDic[c$b])&&c$a.destroy();for(var c$c=0,c$d=this.skinSlotDisplayDataArr.length;c$c<c$d;c$c++)this.skinSlotDisplayDataArr[c$c].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete c$g.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},c$a.getAniNameByIndex=function(c$a){var c$b=this.getAnimation(c$a);return c$b?c$b.name:null},c$h(0,c$a,"rate",function(){return this._rate},function(c$a){this._rate=c$a}),c$g.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",c$g.TEMPLET_DICTIONARY=null,c$g}(c$K)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(c$a,c$b){"use strict";for(var c$c in Object.defineProperty(c$b,"__esModule",{value:!0}),Laya){var c$d=Laya[c$c];c$d&&c$d.__isclass&&(c$b[c$c]=c$d)}});