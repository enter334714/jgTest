var window = window || GameGlobal;var aladinSDK=function(a){var n={};function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=a,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(r.sdkVersion="3.9.7",r.envVersion="release",r.appId="",r.version="1.0.0",r.openId="",r.unionId="",r.testAppid="wx9797c6a657767e49",r.testOpenId="7E16011DCA2B1BDA3241D4B94E87F984",r.ReportMarketDomain=window.ReportMarketDev?"https://distribution-beta.boomegg.cn":"https://mprogram.boomegg.cn",r.ImgDomain="https://ad-static.boomegg.cn",r.token="",r.RunEnv={},r.GamePlatform="",r.AutoPayCb=!0,r.base64Test="http://ad-static.boomegg.cn/flypic/%E4%B8%8A%E6%8A%A5%E6%A3%80%E6%9F%A5.png",r.AccountInfo=null,r);function r(){}t.ALConfig=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(r.opts=null,r.scene=0,r.shareScene=0,r.topInviter="0",r.inviter="0",r.level=1,r.score=1,r.isVertical=!1,r.isTSA=!1,r.allowShare=!1,r.appIdListStr="",r.sdkData=null,r.moreData=null,r.iconData=null,r.curShareData=null,r.curShareScene="",r.shareData=[],r);function r(){}t.ALData=n;var o,i,p=(s.NickName="",s.AvatarUrl="",s.Country="",s.Gender=0,s.Language="",s.Province="",s.Model="",s.NewPlayer=!1,s.Openid="",s.City="",s.SessionKey="",s);function s(){}t.UserInfoData=p,(i=o=o||{}).QQ="qq",i.WeChat="weixin",i.TouTiao="tt",i.Oppo="oppo",i.Vivo="vivo",i.HuaWei="hw",i.Other="other",t.PlatformEnum=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(4),r=a(3),o=a(0),i=a(1),p=(s.LOG=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];this.DEBUG&&console.log("[AladinSDK]",e,t)},s.addAppidPrefix=function(e){return o.ALConfig.GamePlatform==i.PlatformEnum.Oppo||o.ALConfig.GamePlatform==i.PlatformEnum.Vivo||o.ALConfig.GamePlatform==i.PlatformEnum.HuaWei?o.ALConfig.GamePlatform+e:e},s.wxNotExist=function(){return"undefined"==typeof wx},s.wxExist=function(){return"undefined"!=typeof wx},s.ttExist=function(){return"undefined"!=typeof tt},s.ttNotExist=function(){return"undefined"==typeof tt},s.qgExist=function(){return"undefined"!=typeof qg},s.qgNotExist=function(){return"undefined"==typeof qg},s.hbsExist=function(){return"undefined"!=typeof hbs},s.hbsNotExist=function(){return"undefined"==typeof hbs},s.qqNotExist=function(){return"undefined"==typeof qq},s.qqExist=function(){return"undefined"!=typeof qq},s.runEnvExist=function(){return"undefined"!=typeof wx||"undefined"!=typeof qq||"undefined"!=typeof tt||"undefined"!=typeof qg||"undefined"!=typeof hbs},s.runEnvNotExist=function(){return"undefined"==typeof wx&&"undefined"==typeof qq&&"undefined"==typeof tt&&"undefined"==typeof qg&&"undefined"==typeof hbs},s.initRunEnv=function(){switch(o.ALConfig.GamePlatform){case i.PlatformEnum.QQ:o.ALConfig.RunEnv=qq;break;case i.PlatformEnum.WeChat:o.ALConfig.RunEnv=wx;break;case i.PlatformEnum.TouTiao:o.ALConfig.RunEnv=tt;break;case i.PlatformEnum.HuaWei:o.ALConfig.RunEnv=hbs;break;case i.PlatformEnum.Oppo||i.PlatformEnum.Vivo:o.ALConfig.RunEnv=qg;break;default:throw Error("getRunEnv erro: no match runtime environment")}},s.initGamePlatform=function(){if(s.qqExist())o.ALConfig.GamePlatform=i.PlatformEnum.QQ;else if(s.wxExist())o.ALConfig.GamePlatform=i.PlatformEnum.WeChat;else if(s.ttExist())o.ALConfig.GamePlatform=i.PlatformEnum.TouTiao;else if(s.hbsExist())o.ALConfig.GamePlatform=i.PlatformEnum.HuaWei;else{if(s.qgExist())try{var e=qg.getSystemInfoSync();if(e&&e.brand)return void(o.ALConfig.GamePlatform=e.brand.toLowerCase())}catch(e){console.error("initGamePlatform catch error:",e)}o.ALConfig.GamePlatform=i.PlatformEnum.Other}},s.readAppIDList=function(){return new Promise(function(r,e){var t="devtools"===o.ALConfig.RunEnv.getSystemInfoSync().platform?"game.json":"app-config.json";o.ALConfig.RunEnv.getFileSystemManager().readFile({filePath:t,encoding:"utf-8",success:function(e){var t=e.data,a=JSON.parse(t).navigateToMiniProgramAppIdList,n="";a&&(n=a.join(",")),s.LOG("ALSDK readAppIDList appIdListStr ",n),r(n)},fail:function(e){s.LOG("ALSDK readAppIDList error ",e),r("")}})})},s.getUrlFileName=function(e){return e.split("/").pop().split("?")[0].split("#")[0]},s.getUrlReportName=function(e){var t=e.split(o.ALConfig.ImgDomain);return 1<t.length?t[1].toString():t[0].toString()},s._buildQueryString=function(e){var t=new Array;for(var a in e)e.hasOwnProperty(a)&&t.push(a+"="+e[a]);return t.join("&")},s._mergeParams=function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},s._getInitParams=function(e,t){if(t)for(var a in t)t.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(e[a]=t[a]);return s._buildQueryString(e)},s._parseQueryString=function(e){var t={};if(!e)return t;for(var a=e.split("&"),n=null,r=0,o=a.length;r<o;r++)t[(n=a[r].split("="))[0]]=n[1];return t},s.parseNavigateParam=function(e){var t=e[0],a=e[1],n=e[2]||"pages/index/index",r=this._parseQueryString(e[3]);if(-1<n.indexOf("?")){var o=n.split("?"),i=this._parseQueryString(o[1]);this._mergeParams(r,i)}return r.tgt=e[1],{appId:t,path:n+="?"+this._buildQueryString(r),extraData:r,target_appid:a}},s.isInteger=function(e){return Math.floor(e)===e},s.isFunction=function(e){return"[object Function]"===Object.prototype.toString.call(e)},s.convertVersionStringToNumber=function(e){var t=e.split(".");return Number(t[0])<<24|Number(t[1])<<16|0|Number(t[2])},s.reportUserInfo=function(){o.ALConfig.GamePlatform!=i.PlatformEnum.WeChat&&o.ALConfig.GamePlatform!=i.PlatformEnum.QQ||o.ALConfig.RunEnv.getUserInfo({success:function(e){if(e&&e.userInfo&&0!=e.userInfo.gender&&""!=e.userInfo.language&&""!=e.userInfo.country){var t={};t.nickName=i.UserInfoData.NickName=e.userInfo.nickName||"",t.avatarUrl=i.UserInfoData.AvatarUrl=e.userInfo.avatarUrl||"",t.country=i.UserInfoData.Country=e.userInfo.country||"",t.gender=i.UserInfoData.Gender=void 0!==e.userInfo.gender?e.userInfo.gender:0,t.language=i.UserInfoData.Language=e.userInfo.language||"",t.province=i.UserInfoData.Province=e.userInfo.province||"",t.city=i.UserInfoData.City=e.userInfo.city||"",r.ALReport.reportDataToServer(t)}else console.log("getUserInfo interface return anonymous userinfo!")},fail:function(e){console.warn("reportUserInfo getUserInfo fail:",e)}})},s.saveSystemInfo=function(){if(!s.runEnvNotExist())try{i.UserInfoData.Model=o.ALConfig.RunEnv.getSystemInfoSync().model}catch(e){console.error("getSystemInfoSync erro")}},s.saveNetworkType=function(){if(!s.runEnvNotExist())try{o.ALConfig.RunEnv.getNetworkType({success:function(e){n.ALIntercept.NetworkType=e.networkType}})}catch(e){console.error("getNetworkType erro")}},s.saveAccountInfo=function(){if(o.ALConfig.GamePlatform==i.PlatformEnum.WeChat)try{o.ALConfig.AccountInfo=o.ALConfig.RunEnv.getAccountInfoSync()}catch(e){console.error("saveAccountInfo catch error:",e)}},s.showString=function(e){if((o.ALConfig.GamePlatform==i.PlatformEnum.WeChat||o.ALConfig.GamePlatform==i.PlatformEnum.QQ)&&window.ShowReportTips){var t=function(){s.Showing||0!=s.ToastStrList.length&&(s.Showing=!0,o.ALConfig.RunEnv.showToast({title:"打点:"+s.ToastStrList.shift(),icon:"success",duration:300,success:function(){s.TimerID&&clearTimeout(s.TimerID),s.TimerID=setTimeout(function(){s.Showing=!1,s.TimerID=null,t()},300),console.log("showtoast success")},fail:function(){s.Showing=!1},complete:function(){s.Showing=!0}}))};s.ToastStrList.push(e),t()}},s.DEBUG=!0,s.ToastStrList=[],s.TimerID=null,s.Showing=!1,s);function s(){}t.ALUtil=p},function(e,s,t){"use strict";var l=this&&this.__assign||function(){return(l=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0});var f=t(1),c=t(0),u=t(5),d=t(2),i=t(4),a=(A.getAdsPos=function(){return this.Ads+"|"+this.AdsPos},A.init=function(){this._inited||(this._inited=!0,d.ALUtil.LOG("GamePlatform:",c.ALConfig.GamePlatform),d.ALUtil.LOG("ALReport init"),this.initStartTime(),d.ALUtil.runEnvNotExist()||(this._initAdsPos(),this._initReportData(),d.ALUtil.LOG("ALReport init success")))},A.initStartTime=function(){A.startTime=(new Date).getTime(),d.ALUtil.LOG("初始化游戏开始时间",A.startTime)},A.reportTime=function(e){if(0!=A.startTime){var t=(new Date).getTime(),a=l(l({},A.publicParam),{report_type:"loadtime",typeStr:s.REPORT_TYPE_TIME,value:t-A.startTime});A.reportCheck.startTime=t-A.startTime,this.reportDataToMarketNew(a)}},A.reportAnalytics=function(e,t){if(isNaN(t))d.ALUtil.LOG("ALReport step error --- ",t);else if(A.CustomNode[t])console.warn("[AladinSDK] repeat reportAnalytics",t);else{A.CustomNode[t]=!0,this._inited||(console.warn("请先调用init方法"),c.ALConfig.appId=e,this.init()),this._initReportData(),this.reportPrefix,this._getCurrentDate(),this._getTimeStamp(),this.reportDevice2Sence,f.ALData.level,c.ALConfig.openId,f.ALData.topInviter,f.UserInfoData.Gender;var a=l(l({},A.publicParam),{report_type:"analytics",typeStr:"10_"+t,ply:f.ALData.level,node:"0",open_id:c.ALConfig.openId,type:"10",sub_type:t,value:"",extra:"",uuid:"",p_open_id:f.ALData.topInviter,gender:f.UserInfoData.Gender});d.ALUtil.showString("10_"+t),u.HttpUtil.POST(c.ALConfig.ReportMarketDomain+"/box/stats_sdk_new",a,function(e){e.isSucc||d.ALUtil.LOG("ALReport _report fail --- ",e.reason)});var n=0,r=(new Date).getTime(),o=A.LastCustomNode;n=0==A.CusRepLastTime?r-A.startTime:r-A.CusRepLastTime,A.CusRepLastTime=r,A.LastCustomNode=Number(t),d.ALUtil.LOG("reportAnalytics with time",t,n,A.CusRepLastTime,i.ALIntercept.NetworkType,i.ALIntercept.IsOnShow,A.publicParam.channel,A.publicParam.benchmarkLevel),A.CustomDataCache.push({step:Number(t),dtime:n,network_type:i.ALIntercept.NetworkType,is_onshow:i.ALIntercept.IsOnShow,last_node:o})}},A.report=function(e,t){if(this._inited||this.init(),e!=s.REPORT_TYPE_TIME){var a=e.split("_");if(a.length<2)console.warn("ALReport 参数传递错误");else{d.ALUtil.showString(e);var n=t||"";if(e===s.REPORT_TYPE_OPEN_ID)return c.ALConfig.openId=t,""==A.reportCheck.openid?A.reportCheck.openid=t:console.warn("openid重复上报"),window.ALOpenId=t,this.reportOpenId(),this.reportPerformanceData(),void this._initLevelData();if(e===s.REPORT_TYPE_VIDEO_BTN_SHOW&&(A.reportCheck.video_sence=t,A.publicParam.video_sence=t),"16_1"===e&&(A.reportCheck.level=t),e===s.REPORT_TYPE_VIDEO_WATCH_NORMAL&&A.reportCheck.video_play++,e!==s.REPORT_TYPE_PAY_MENT_IOS){var r=a[0],o=a[1];this._initReportData(),this.reportPrefix,this._getCurrentDate(),this._getTimeStamp(),this.reportDevice2Sence,f.ALData.level,c.ALConfig.openId,f.ALData.topInviter,f.UserInfoData.Gender;var i=l(l({},A.publicParam),{report_type:"normal",typeStr:e,ply:f.ALData.level,node:"0",open_id:c.ALConfig.openId,type:r,sub_type:o,value:"0",extra:n,uuid:"",p_open_id:f.ALData.topInviter,gender:f.UserInfoData.Gender});e===s.REPORT_TYPE_SHARE_READY&&(i.video_sence=f.ALData.curShareScene),u.HttpUtil.POST(c.ALConfig.ReportMarketDomain+"/box/stats_sdk_new",i,function(e){e.isSucc||d.ALUtil.LOG("ALReport _report fail --- ",e.reason)})}else{d.ALUtil.LOG("ios支付数据",t);var p=l(l({},A.publicParam),{report_type:"iospay",typeStr:s.REPORT_TYPE_PAY_MENT_IOS,extra_data:t});this.reportDataToMarketNew(p)}}}else this.reportTime(t)},A.reportPerformanceData=function(){if(c.ALConfig.openId&&0<A.CustomDataCache.length){var e=(new Date).getTime(),t=e-A.CusRepLastTime;A.CusRepLastTime=e,A.CustomDataCache.push({step:100,dtime:t,network_type:i.ALIntercept.NetworkType,is_onshow:i.ALIntercept.IsOnShow,last_node:A.LastCustomNode}),A.CustomDataCache.push({step:200,dtime:e-A.startTime,network_type:i.ALIntercept.NetworkType,is_onshow:i.ALIntercept.IsOnShow,last_node:i.ALIntercept.OnHideAllTime}),d.ALUtil.LOG("[性能数据]reportPerformanceData:",A.CustomDataCache);var a=l(l({},A.publicParam),{report_type:"performance",typeStr:"20_1",open_id:c.ALConfig.openId,type:20,sub_type:1,p_open_id:f.ALData.topInviter,gender:f.UserInfoData.Gender,ply:A.publicParam.benchmarkLevel,video_sence:JSON.stringify(A.CustomDataCache)});u.HttpUtil.POST(c.ALConfig.ReportMarketDomain+"/box/stats_sdk_new",a,function(e){e.isSucc||d.ALUtil.LOG("reportPerformanceData fail --- ",e.reason)}),A.CustomDataCache=[],A.LastCustomNode=-1}},A.reportOpenId=function(){var e=l(l({},A.publicParam),{report_type:"openId",typeStr:s.REPORT_TYPE_OPEN_ID,extra_data:this.getAdsPos(),value:(new Date).getTime()-A.startTime});A.ad_appid&&(e.ad_appid=A.ad_appid),e.nickName=f.UserInfoData.NickName,e.avatarUrl=f.UserInfoData.AvatarUrl,e.country=f.UserInfoData.Country,e.gender=f.UserInfoData.Gender,e.language=f.UserInfoData.Language,e.province=f.UserInfoData.Province,e.networkType=i.ALIntercept.NetworkType,e.model=f.UserInfoData.Model,A.reportDataToMarketNew(e)},A.reportDataToServer=function(t){var e={appid:c.ALConfig.appId,openid:c.ALConfig.openId,nickName:t.nickName,gender:t.gender,avatarUrl:t.avatarUrl,country:t.country,province:t.province,city:t.city,language:t.language};u.HttpUtil.POST(c.ALConfig.ReportMarketDomain+"/box/userInfo/save",e,function(e){t.complete&&t.complete(e)})},A.reportPay=function(e){d.ALUtil.LOG("拦截支付数据",e);var t=e.split("|");2<=t.length&&"1"==t[1]&&(A.reportCheck.payAmount+=parseInt(t[0]));var a=l(l({},A.publicParam),{report_type:"pay",typeStr:s.REPORT_TYPE_PAY_MENT_ENTER,extra_data:e});this.reportDataToMarketNew(a)},A.reportShareState=function(e){var t=e?"1":"2",a=l(l({},A.publicParam),{report_type:"share",typeStr:s.REPORT_TYPE_SHARE_SUCCESS,diff_key:t});this.reportDataToMarketNew(a)},A.reportDataToMarket=function(e){e.id=c.ALConfig.appId,e.openid=c.ALConfig.openId,d.ALUtil.LOG("reportDataToMarket param --- ",e),u.HttpUtil.POST(c.ALConfig.ReportMarketDomain+"/box/stats_sdk",e,function(e){e.isSucc||d.ALUtil.LOG("ALReport reportServer fail --- ",e.reason)})},A.reportDataToMarketNew=function(e){var t=e.typeStr.split("_");t.length<2?console.warn("ALReport 参数传递错误"):(e.type=t[0],e.sub_type=t[1],e.project_id=c.ALConfig.appId,e.open_id=c.ALConfig.openId,e.ply=f.ALData.level,e.p_open_id=f.ALData.topInviter,e.gender=f.UserInfoData.Gender,d.ALUtil.LOG("reportDataToMarket param --- ",e),u.HttpUtil.POST(c.ALConfig.ReportMarketDomain+"/box/stats_sdk_new",e,function(e){e.isSucc||d.ALUtil.LOG("ALReport reportServer fail --- ",e.reason)}))},A.getPublicParam=function(){var e=l({},A.publicParam);return e.project_id=c.ALConfig.appId,e.open_id=c.ALConfig.openId,e.ply=f.ALData.level,e.p_open_id=f.ALData.topInviter,e.gender=f.UserInfoData.Gender,e},A._initAdsPos=function(){if(c.ALConfig.GamePlatform==f.PlatformEnum.WeChat||c.ALConfig.GamePlatform==f.PlatformEnum.QQ||c.ALConfig.GamePlatform==f.PlatformEnum.TouTiao||c.ALConfig.GamePlatform==f.PlatformEnum.Oppo){console.log("init ads pos gameplatefrom:",c.ALConfig.GamePlatform);var e="",t="";try{var a=c.ALConfig.RunEnv.getLaunchOptionsSync();d.ALUtil.LOG("ALReport opts --- ",a);var n=a.query,r=a.referrerInfo&&a.referrerInfo.extraData;if(A.publicParam.query_str=d.ALUtil._getInitParams(l({},n),l({},r)),d.ALUtil.LOG("ALReport query_str --- ",A.publicParam.query_str),c.ALConfig.GamePlatform!=f.PlatformEnum.Oppo){if(f.ALData.opts=a,f.ALData.scene=a.scene,(s=a.query).qz_gdt&&(this.qz_gdt=s.qz_gdt?s.qz_gdt:""),s.ad_appid&&(this.ad_appid=s.ad_appid?s.ad_appid:""),s.scene){var o=decodeURIComponent(s.scene).split(",");e=o[1],t=o[2]}else if(s.Ads||s.AdsPos||s["?Ads"])e=s.Ads?s.Ads:"",t=s.AdsPos?s.AdsPos:"",s["?Ads"]&&d.ALUtil.qqExist()&&-1<(e=s["?Ads"]).indexOf("TSA")&&3<e.length&&(t=e.split("TSA")[1],e="TSA");else if(a.referrerInfo&&a.referrerInfo.extraData){var i=a.referrerInfo.extraData;e=i.Ads?i.Ads:"",t=i.AdsPos?i.AdsPos:""}""===e&&(t="1037"==a.scene||"011009"==a.scene||"021009"==a.scene||"061009"==a.scene?(e="fromMini",a.referrerInfo.appId||"0"):(e=c.ALConfig.GamePlatform,a.scene||"0"))}else{if(f.ALData.opts=a){if(a&&a.query&&(a.query.Ads||a.query.AdsPos))e=a.query.Ads?a.query.Ads:"",t=a.query.AdsPos?a.query.AdsPos:"";else if(a&&a.referrerInfo&&a.referrerInfo.extraData){var p=a.referrerInfo.extraData;e=p.Ads?p.Ads:"",t=p.AdsPos?p.AdsPos:""}}else e="oppo",t="0";""===e&&(a&&a.referrerInfo&&a.referrerInfo.package?(e="fromMini",t=a.referrerInfo.package||"0",a.referrerInfo.package&&u.HttpUtil.POST(c.ALConfig.ReportMarketDomain+"/box/sdk/pkg_appid",{pkgs:a.referrerInfo.package,platform:c.ALConfig.GamePlatform},function(e){e.isSucc?e.data&&0<e.data.length&&(A.AdsPos=e.data[0],A.publicParam.ads_pos=e.data[0]):console.warn("pkgToAppid fail:",e.reason)})):(e="oppo",t="0"))}}catch(e){console.log("ALReport _initAdSource catch--- ",e)}if(this.Ads=e,this.AdsPos=t,A.publicParam.ads=e,A.publicParam.ads_pos=t,1044==f.ALData.scene||1007==f.ALData.scene||1036==f.ALData.scene||1008==f.ALData.scene){var s=f.ALData.opts.query;f.ALData.topInviter=s.a_top_inviter||"0",f.ALData.level=s.a_level||1}}},A._initLevelData=function(){var e=null;if(1044==f.ALData.scene||1007==f.ALData.scene||1036==f.ALData.scene||1008==f.ALData.scene){var t=f.ALData.opts.query;e={appid:c.ALConfig.appId,openid:c.ALConfig.openId,level:t.a_level||"",inviter:t.a_inviter||"",top_inviter:t.a_top_inviter||""}}else e={appid:c.ALConfig.appId,openid:c.ALConfig.openId};this.qz_gdt?e.adsinfo=this.Ads+"|"+this.AdsPos+"|"+this.qz_gdt:e.adsinfo=this.Ads+"|"+this.AdsPos,A.ad_appid&&(e.ad_appid=A.ad_appid),u.HttpUtil.GET(c.ALConfig.ReportMarketDomain+"/box/accountinfo",e,function(e){if(e.isSucc){var t=e.data.info;d.ALUtil.LOG("ALReport _initLevelData data --- ",e.data),d.ALUtil.LOG("初始化得到的分享数据：",t),f.ALData.topInviter=t.top_inviter||"0",f.ALData.inviter=c.ALConfig.openId,f.ALData.level=t.share_level?parseInt(t.share_level)+1:1,f.ALData.score=t.score?parseInt(t.score):0,i.ALIntercept._execOnShareApp()}else d.ALUtil.LOG("ALReport _initLevelData fail --- ",e.reason)})},A._initReportData=function(){var e="",t="",a="",n="",r="",o="",i=-1;if(d.ALUtil.runEnvExist()){try{var p=c.ALConfig.RunEnv.getSystemInfoSync();e=p.platform.toLowerCase(),t=p.model,a=p.system,n=p.language,r=p.version,o=p.platform.toLowerCase(),i=p.benchmarkLevel,d.ALUtil.qqExist()&&(A.appPlatform=p.AppPlatform),d.ALUtil.qgExist()&&(r=p.platformVersionCode)}catch(e){console.warn("ALReport _initParam error--- ",e)}t&&"unknown"!==t||(t="android")}this.reportPrefix="t_event|distribute_all|",this.reportDevice2Sence=e+"|"+t+"|"+c.ALConfig.version+"|"+a+"||0.0.0.0||"+n+"||"+r+"|"+c.ALConfig.appId+"|"+this.Ads+"|"+this.AdsPos+"|",A.publicParam.gamePlatform=c.ALConfig.GamePlatform,A.publicParam.platform=o,A.publicParam.device=e,A.publicParam.channel=t,A.publicParam.version=c.ALConfig.version,A.publicParam.os=a,A.publicParam.language=n,A.publicParam.wx_version=r,A.publicParam.project_id=c.ALConfig.appId,A.publicParam.qz_gdt=this.qz_gdt,A.publicParam.benchmarkLevel=i},A._getCurrentDate=function(){var e=new Date,t=e.getFullYear().toString(),a=(e.getMonth()+1).toString(),n=e.getDate().toString();return 1===a.length&&(a="0"+a),1===n.length&&(n="0"+n),t+a+n},A._getTimeStamp=function(){return Math.round(Date.now()/1e3)},A.publicParam={gamePlatform:"",qz_gdt:"",platform:"",sdkVersion:c.ALConfig.sdkVersion,report_type:"",typeStr:"",device:"",channel:"",version:"",os:"",language:"",wx_version:"",project_id:"",ads:"",ads_pos:"",ply:"",node:"",open_id:"",type:"",sub_type:"",value:"",extra:"",uuid:"",p_open_id:"",gender:"",video_sence:"",query_str:"",benchmarkLevel:-1},A.reportCheck={appid:"",openid:"",startTime:"",level:"",video_sence:"",video_play:0,payAmount:0,gameTime:0,gameShow:"",sharePic:"",jumpData:""},A.CustomNode=[],A.CustomDataCache=[],A.Ads="",A.AdsPos="",A.reportPrefix="",A.reportDevice2Sence="",A.qz_gdt="",A.ad_appid="",A.appPlatform="",A._inited=!1,A.startTime=0,A.CusRepLastTime=0,A.LastCustomNode=-1,A);function A(){}s.ALReport=a,s.REPORT_TYPE_SHOW="1_1",s.REPORT_TYPE_LOGIN="1_2",s.REPORT_TYPE_OPEN_ID="1_3",s.REPORT_TYPE_AUTH="1_4",s.REPORT_TYPE_LIKE_CLICK="1_6",s.REPORT_TYPE_LIKE_SHOW="1_8",s.REPORT_TYPE_DRAWER_CLICK="1_7",s.REPORT_TYPE_DRAWER_SHOW="1_9",s.REPORT_TYPE_CLICK_SUCCESS="3_1",s.REPORT_TYPE_SHARE_READY="1_10",s.REPORT_TYPE_SHARE_SUCCESS="1_5",s.REPORT_TYPE_GAME_DURATION="1_12",s.REPORT_TYPE_SCENE_CLICK="1_13",s.REPORT_TYPE_SCENE_CLICK_SUCCESS="1_14",s.REPORT_TYPE_PAY_MENT="6_0",s.REPORT_TYPE_PAY_MENT_START="6_2",s.REPORT_TYPE_PAY_MENT_ENTER="6_3",s.REPORT_TYPE_PAY_MENT_IOS="6_5",s.REPORT_TYPE_MORE_SHOW="2_0",s.REPORT_TYPE_MORE_CLICK="2_1",s.REPORT_TYPE_MORE_CLICK_O="2_2",s.REPORT_TYPE_MORE_LONG_CLICK_O="2_3",s.REPORT_TYPE_VIDEO_OPEN="2_4",s.REPORT_TYPE_VIDEO_WATCH_FAIL="2_5",s.REPORT_TYPE_VIDEO_WATCH_NORMAL="2_6",s.REPORT_TYPE_GAME_BOX_SHOW="8_1",s.REPORT_TYPE_GAME_BOX_CLICK="8_2",s.REPORT_TYPE_GAME_BOX_BANNER_CLICK="8_3",s.REPORT_TYPE_VIDEO_BTN_SHOW="5_6",s.REPORT_TYPE_VIDEO_CLICK="5_7",s.REPORT_TYPE_SHARE_BTN_SHOW="5_8",s.REPORT_TYPE_SHARE_CLICK="5_9",s.REPORT_TYPE_TIME="15_1",s.REPORT_TYPE_QQ_SUBSCRIBE="18_1",s.REPORT_TYPE_QQ_UNSUBSCRIBE="18_2"},function(e,t,a){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(1),u=a(2),d=a(3),n=a(6),p=a(0),r=(s.EmptyFn=function(){u.ALUtil.LOG("empty fn")},s.init=function(){this._inited||(this._inited=!0,u.ALUtil.LOG("ALIntercept init "),u.ALUtil.runEnvNotExist()||(this._pay(),this._shareApp(),this._execShowHide(),this._onShareApp(),this._rewardedVideoAd(),this._qqSubscribe(),this._wxSubscribe(),this._getUserProfile(),u.ALUtil.LOG("ALIntercept init success ")))},s._execShowHide=function(){s.TimeShow=Date.now(),s.Params=i(i({},d.ALReport.publicParam),{report_type:"duration",typeStr:d.REPORT_TYPE_GAME_DURATION,value:""}),p.ALConfig.RunEnv.onShow(function(e){s.IsOnShow=!0,s.TimeShow=Date.now(),s.FirstOnShow?s.FirstOnShow=!1:s.OnHideAllTime+=s.TimeShow-s.OnHideTimestamp,n.ALSDK.paycallback(e),n.ALSDK.handleNaviTime(e),u.ALUtil.LOG("ALIntercept onShow",e)}),p.ALConfig.RunEnv.onHide(function(e){s.IsOnShow=!1,s.OnHideTimestamp=Date.now();var t=Math.ceil((Date.now()-s.TimeShow)/1e3);2<t&&(d.ALReport.reportCheck.gameTime+=t,s.Params.value=t.toString(),d.ALReport.reportDataToMarketNew(s.Params)),u.ALUtil.LOG("ALIntercept onHide")}),p.ALConfig.GamePlatform!=c.PlatformEnum.WeChat&&p.ALConfig.GamePlatform!=c.PlatformEnum.QQ||(p.ALConfig.RunEnv.getNetworkType({success:function(e){u.ALUtil.LOG("getNetworkType:",e),s.NetworkType=e.networkType}}),p.ALConfig.RunEnv.onNetworkStatusChange(function(e){u.ALUtil.LOG("onNetworkStatusChange:",e),s.NetworkType=e.networkType}))},s._qqSubscribe=function(){if(!u.ALUtil.qqNotExist()&&p.ALConfig.RunEnv.subscribeAppMsg){var t=p.ALConfig.RunEnv.subscribeAppMsg;Object.defineProperty(p.ALConfig.RunEnv,"subscribeAppMsg",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=arguments[0]||{},n=e.success||null,r=e.subscribe,o=e.tmplIds||null;return e.success=function(e){if(u.ALUtil.LOG("ALIntercept _qqSubscribe success --- ",e),o){for(var t=0;t<o.length;t++)if(e[o[t]]&&"accept"==e[o[t]]){var a=i(i({},d.ALReport.publicParam),{report_type:"wx_subscribe",typeStr:d.REPORT_TYPE_QQ_SUBSCRIBE,extra:o[t]});d.ALReport.reportDataToMarketNew(a)}}else r?d.ALReport.report(d.REPORT_TYPE_QQ_SUBSCRIBE):d.ALReport.report(d.REPORT_TYPE_QQ_UNSUBSCRIBE);n&&n(e)},t.apply(this,arguments)}}),s._qqSubscribe=s.EmptyFn}},s._wxSubscribe=function(){if(!(u.ALUtil.wxNotExist()||u.ALUtil.wxExist()&&!p.ALConfig.RunEnv.requestSubscribeMessage)){var t=p.ALConfig.RunEnv.requestSubscribeMessage;Object.defineProperty(p.ALConfig.RunEnv,"requestSubscribeMessage",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=arguments[0]||{},n=e.success||null,r=e.tmplIds||[];return e.success=function(e){u.ALUtil.LOG("ALIntercept _wxSubscribe success --- ",e);for(var t=0;t<r.length;t++)if(e[r[t]]&&"accept"==e[r[t]]){var a=i(i({},d.ALReport.publicParam),{report_type:"wx_subscribe",typeStr:d.REPORT_TYPE_QQ_SUBSCRIBE,extra:r[t]});d.ALReport.reportDataToMarketNew(a)}n&&n(e)},t.apply(this,arguments)}}),s._wxSubscribe=s.EmptyFn}},s._rewardedVideoAd=function(){if(!u.ALUtil.runEnvNotExist()&&p.ALConfig.RunEnv.createRewardedVideoAd){console.log("_rewardedVideoAd run");var r=p.ALConfig.RunEnv.createRewardedVideoAd;Object.defineProperty(p.ALConfig.RunEnv,"createRewardedVideoAd",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=r.apply(this,arguments),t=arguments[0]||{};if(s.VideoId=t.adUnitId,p.ALConfig.GamePlatform===c.PlatformEnum.Vivo&&(s.VideoId=t.posId),e.isIntercept)return e;e.isIntercept=!0;var a=e.show;Object.defineProperty(e,"show",{configurable:!0,enumerable:!0,writable:!0,value:function(){return u.ALUtil.LOG("ALIntercept _rewardedVideoAd show ---"),d.ALReport.report(d.REPORT_TYPE_VIDEO_OPEN,s.VideoId),a.apply(this,arguments)}}),e.onClose(s.VideoClose);var n=e.offClose;return Object.defineProperty(e,"offClose",{configurable:!0,enumerable:!0,writable:!0,value:function(){u.ALUtil.LOG("ALIntercept _rewardedVideoAd offClose!!!"),n.apply(this,arguments),0==arguments.length&&this.onClose(s.VideoClose)}}),e}}),s._rewardedVideoAd=s.EmptyFn}},s.VideoClose=function(e){u.ALUtil.LOG("ALIntercept _rewardedVideoAd VideoClose--- ",e),void 0===e||e&&e.isEnded?d.ALReport.report(d.REPORT_TYPE_VIDEO_WATCH_NORMAL,s.VideoId):d.ALReport.report(d.REPORT_TYPE_VIDEO_WATCH_FAIL,s.VideoId)},s._pay=function(){if(p.ALConfig.GamePlatform==c.PlatformEnum.WeChat||p.ALConfig.GamePlatform==c.PlatformEnum.QQ||p.ALConfig.GamePlatform==c.PlatformEnum.TouTiao){var e="requestMidasPayment",o=p.ALConfig.RunEnv.requestMidasPayment;u.ALUtil.ttExist()&&(e="requestGamePayment",o=p.ALConfig.RunEnv.requestGamePayment),Object.defineProperty(p.ALConfig.RunEnv,e,{configurable:!0,enumerable:!0,writable:!0,value:function(){d.ALReport.report(d.REPORT_TYPE_PAY_MENT_START);var e=arguments[0]||{},t="0";t=u.ALUtil.qqExist()?e.starCurrency:e.buyQuantity;var a=null,n=e.success||null;e.success=function(e){a&&(u.ALUtil.LOG("ALIntercept clearInterval sdkPaySuc"),clearInterval(a)),u.ALUtil.LOG("ALIntercept _pay success --- ",e),t+="|1",d.ALReport.reportPay(t),n&&n(e)};var r=e.fail||null;return e.fail=function(e){a&&(u.ALUtil.LOG("ALIntercept clearInterval sdkPaySuc"),clearInterval(a)),u.ALUtil.LOG("ALIntercept _pay fail --- ",e),t+="|0",d.ALReport.reportPay(t),r&&r(e)},p.ALConfig.GamePlatform==c.PlatformEnum.WeChat&&p.ALConfig.AutoPayCb&&(a=setInterval(function(){a&&(u.ALUtil.LOG("ALIntercept clearInterval sdkPaySuc"),clearInterval(a)),n&&(u.ALUtil.LOG("ALIntercept sdkPaySuc callback"),n({sdkPaySuc:!0,errMsg:"requestMidasPayment:ok"}))},13e3)),o.apply(this,arguments)}}),s._pay=s.EmptyFn}},s._execOnShareApp=function(){s.InfoGot=!0,s.ShareParamFunc&&(p.ALConfig.RunEnv.offShareAppMessage(s.ShareParamFunc),p.ALConfig.RunEnv.onShareAppMessage(s.ShareParamFunc))},s._shareApp=function(){if(p.ALConfig.GamePlatform==c.PlatformEnum.WeChat||p.ALConfig.GamePlatform==c.PlatformEnum.QQ||p.ALConfig.GamePlatform==c.PlatformEnum.TouTiao){var t=p.ALConfig.RunEnv.shareAppMessage;Object.defineProperty(p.ALConfig.RunEnv,"shareAppMessage",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=arguments[0]||{};return s._handleShareParam(e),e.query=e.query+"&a_inviter="+c.ALData.inviter+"&a_level="+c.ALData.level+"&a_top_inviter="+c.ALData.topInviter,u.ALUtil.LOG("ALIntercept shareAppMessage query ",e.query),t.apply(this,arguments)}}),s._shareApp=s.EmptyFn}},s._onShareApp=function(){if(p.ALConfig.GamePlatform==c.PlatformEnum.WeChat||p.ALConfig.GamePlatform==c.PlatformEnum.QQ||p.ALConfig.GamePlatform==c.PlatformEnum.TouTiao){var e=p.ALConfig.RunEnv.onShareAppMessage;Object.defineProperty(p.ALConfig.RunEnv,"onShareAppMessage",{configurable:!0,enumerable:!0,writable:!0,value:function(){u.ALUtil.LOG("开始拦截_onShareApp");var t=arguments[0];return t?s.InfoGot?(u.ALUtil.LOG("ALIntercept onShareAppMessage _infoExist"),arguments[0]=function(){var e=t();return s._handleShareParam(e,!1),e.query=e.query+"&a_inviter="+c.ALData.inviter+"&a_level="+c.ALData.level+"&a_top_inviter="+c.ALData.topInviter,u.ALUtil.LOG("ALIntercept onShareAppMessage query ",e.query),u.ALUtil.ttExist()?{title:e.title,imageUrl:e.imageUrl,templateId:e.templateId,query:e.query}:{title:e.title,imageUrl:e.imageUrl,imageUrlId:e.imageUrlId,query:e.query}}):(s.ShareParamFunc=t,u.ALUtil.LOG("ALIntercept onShareAppMessage _infoExist not")):u.ALUtil.LOG("ALIntercept onShareAppMessage argument0F empty"),e.apply(this,arguments)}});var t=p.ALConfig.RunEnv.offShareAppMessage;Object.defineProperty(p.ALConfig.RunEnv,"offShareAppMessage",{configurable:!0,enumerable:!0,writable:!0,value:function(){t.apply(this,arguments),u.ALUtil.LOG("ALIntercept offShareAppMessage !!!")}}),s._onShareApp=s.EmptyFn}},s._handleShareParam=function(e,t){void 0===t&&(t=!0);var a=e.query||"",n=e.imageUrl,r=e.imageUrlId,o=e.templateId,i=u.ALUtil._parseQueryString(a);u.ALUtil.LOG("ALIntercept _handleShareParam queryObj ",i),c.ALData.shareScene=i.shareScene||0;var p="default";if(!i.Ads){if(c.ALData.curShareData&&t){var s=c.ALData.curShareData;e.imageUrl=s.url,e.title=s.desc,p=s.shareid}else if(r)p=r;else if(o)p=o;else if(n){var l=u.ALUtil.getUrlFileName(n);u.ALUtil.LOG("ALIntercept _handleShareParam ",n,l),p=0!==n.indexOf("http")&&-1===l.indexOf(".")?"screenShot":l.replace(".","_")}var f="&Ads=a_Share&AdsPos="+p;u.ALUtil.LOG("ALIntercept _handleShareParam ads_str ",f),e.query=a+f}t&&(d.ALReport.reportCheck.sharePic=p,d.ALReport.report(d.REPORT_TYPE_SHARE_READY,p))},s._getUserProfile=function(){if(p.ALConfig.GamePlatform==c.PlatformEnum.WeChat)try{var e=p.ALConfig.RunEnv.getSystemInfoSync().SDKVersion;if(u.ALUtil.convertVersionStringToNumber(e)<u.ALUtil.convertVersionStringToNumber("2.10.4"))return void console.log("now use lib version not support getUserProfile SDKVersion:"+e);var t=p.ALConfig.RunEnv.getUserProfile;if(!t)return void console.error("no found function getUserProfile");Object.defineProperty(p.ALConfig.RunEnv,"getUserProfile",{configurable:!0,enumerable:!0,writable:!0,value:function(){u.ALUtil.LOG("开始拦截_getUserProfile");var e=arguments[0],n=e.success;return e.success=function(e){var t=e.userInfo,a={};c.UserInfoData.NickName=a.nickName=t.nickName||"",c.UserInfoData.Gender=a.gender=void 0!==t.gender?e.userInfo.gender:0,c.UserInfoData.AvatarUrl=a.avatarUrl=t.avatarUrl||"",c.UserInfoData.Country=a.country=t.country||"",c.UserInfoData.Province=a.province=t.province||"",c.UserInfoData.City=a.city=t.city||"",c.UserInfoData.Language=a.language=t.language||"",d.ALReport.reportDataToServer(a),n&&n(e)},t.apply(this,arguments)}})}catch(e){console.error("getUserProfile getSystemInfoSync catch error")}},s._inited=!1,s.IsOnShow=!0,s.NetworkType="",s.TimeShow=null,s.Params=null,s.FirstOnShow=!0,s.OnHideTimestamp=0,s.OnHideAllTime=0,s.VideoId=null,s.InfoGot=!1,s.ShareParamFunc=null,s);function s(){}t.ALIntercept=r},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=t(2),l=t(0),f=t(1);r.METHOD_GET="GET",r.METHOD_POST="POST";var a=(n.GET=function(e,t,a,n){this._request(e,r.METHOD_GET,t,a,n)},n.POST=function(e,t,a,n){this._request(e,r.METHOD_POST,t,a,n)},n._request=function(e,t,a,n,r){if(s.ALUtil.LOG("请求参数[param]",a),a.request_time=(new Date).getTime(),l.ALConfig.GamePlatform==f.PlatformEnum.WeChat||l.ALConfig.GamePlatform==f.PlatformEnum.QQ||l.ALConfig.GamePlatform==f.PlatformEnum.TouTiao||l.ALConfig.GamePlatform==f.PlatformEnum.Vivo){"GET"==t&&a&&(e+=encodeURI("?"+this.objParam2PostString(a))),s.ALUtil.LOG("HttpUtil url ----- ",e);var o={url:e,method:t,success:function(e){s.ALUtil.LOG("HttpUtil responseText---",e);try{var t=e.data;return t&&0!==t.code&&0!==t.ret?(s.ALUtil.LOG("HttpUtil json---"),void n({isSucc:!1,reason:t.msg})):void n({isSucc:!0,data:t?t.data:null})}catch(e){return s.ALUtil.LOG("HttpUtil parse---",e),void n({isSucc:!1,reason:"json_parse_error"})}},fail:function(e){s.ALUtil.LOG("HttpUtil fail---",e),n({isSucc:!1,reason:"network_error"})}};this.Authorization?o.header={"content-type":"application/x-www-form-urlencoded",Authorization:this.Authorization}:o.header={"content-type":"application/x-www-form-urlencoded"},r&&r["content-type"]&&"application/x-www-form-urlencoded"!=r["content-type"]&&(o.header["content-type"]=r["content-type"]),a&&(o.data=a),l.ALConfig.RunEnv.request(o)}else{var i=new XMLHttpRequest,p=null;"GET"==t&&a&&(e+=encodeURI("?"+this.objParam2PostString(a))),i.open(t,e,!0),r&&r["content-type"]&&"application/x-www-form-urlencoded"!=r["content-type"]?(i.setRequestHeader("content-type",r["content-type"]),a&&(p=a)):(i.setRequestHeader("content-type","application/x-www-form-urlencoded"),p=null==a?null:encodeURI(this.objParam2PostString(a))),this.Authorization&&i.setRequestHeader("Authorization",this.Authorization),i.onreadystatechange=function(){if(4===i.readyState&&199<i.status&&i.status<400){s.ALUtil.LOG("HttpUtil responseText---",i.responseText);try{var e=i.responseText?JSON.parse(i.responseText):null;return e&&0!==e.code&&0!==e.ret?(s.ALUtil.LOG("HttpUtil json---"),void n({isSucc:!1,reason:e.msg})):void n({isSucc:!0,data:e?e.data:null})}catch(e){return s.ALUtil.LOG("HttpUtil parse---",e),void n({isSucc:!1,reason:"json_parse_error"})}}},i.onerror=function(e){s.ALUtil.LOG("HttpUtil onerror---",e),n({isSucc:!1,reason:"network_error"})},i.ontimeout=function(e){s.ALUtil.LOG("HttpUtil ontimeout---",e),n({isSucc:!1,reason:"timeout_error"})},i.send(p)}},n.objParam2PostString=function(e){var t="";for(var a in e)t+=a+"="+e[a],t+="&";return""!=t&&(t=t.slice(0,t.length-1)),t},n.Authorization=null,n);function n(){}r.HttpUtil=a},function(e,t,a){"use strict";var m=this&&this.__assign||function(){return(m=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var g=a(0),_=a(2),d=a(3),A=a(1),P=a(5),n=(v.init=function(e,t,a,n){this._inited||(this._inited=!0,""==e&&console.warn("初始化appid不能为空"),g.ALConfig.appId=e,g.ALConfig.version=t,d.ALReport.reportCheck.appid=e,g.ALConfig.GamePlatform==A.PlatformEnum.WeChat&&P.HttpUtil.POST(g.ALConfig.ReportMarketDomain+"/box/opr/sharepic/list",{appid:g.ALConfig.appId},function(e){e.isSucc?(_.ALUtil.LOG("share data:",e.data),A.ALData.shareData=e.data):_.ALUtil.LOG("get sharepic fail:",e.reason)}))},v.toMiniProgram=function(e,t,a,n,r,o,i){var p=_.ALUtil.parseNavigateParam(e),s=e[14]||e[4],l=e[11]||"",f=m(m({},d.ALReport.publicParam),{target_appid:p.target_appid,report_type:"click",typeStr:t,diff_key:s,extra_data:a,scene:n}),c=m(m({},d.ALReport.publicParam),{target_appid:p.target_appid,report_type:"jump",typeStr:d.REPORT_TYPE_SCENE_CLICK_SUCCESS,extra_data:a,scene:n});if(_.ALUtil.LOG("[ALSDK] 跳转参数如下：",e),_.ALUtil.LOG("[ALSDK] data.appId:>>",p.appId),_.ALUtil.LOG("[ALSDK] data.path:>>",p.path),_.ALUtil.LOG("[ALSDK] data.extraData:>>",p.extraData),_.ALUtil.LOG("[ALSDK] pkgName:>>",l),_.ALUtil.LOG("[ALSDK] Data.conf.envVersion:>>",g.ALConfig.envVersion),!_.ALUtil.runEnvNotExist()){var u=e[6]||null;d.ALReport.reportDataToMarketNew(f),!u||g.ALConfig.RunEnv.navigateToMiniProgram||g.ALConfig.RunEnv.navigateToMiniGame?g.ALConfig.GamePlatform==A.PlatformEnum.WeChat?g.ALConfig.RunEnv.navigateToMiniProgram({appId:p.appId,path:p.path,extraData:p.extraData,envVersion:g.ALConfig.envVersion,success:function(e){console.log("navigateToMiniProgram:",Date.now(),p.appId),v.NavigeteTime=Date.now(),v.NavigeteAppid=p.appId,d.ALReport.reportCheck.jumpData=c,d.ALReport.reportDataToMarketNew(c),r&&r(e)},fail:function(e){_.ALUtil.LOG("ALSDK navigateToMiniProgram fail ",e),e&&e.errMsg&&-1===e.errMsg.indexOf("cancel")&&u&&v._preview(u,c),o&&o(e)},complete:function(e){i&&i(e)}}):g.ALConfig.GamePlatform==A.PlatformEnum.Oppo&&(l||console.warn("包名为空无法跳转"),g.ALConfig.RunEnv.navigateToMiniGame({pkgName:l,path:p.path,extraData:p.extraData,success:function(e){console.log("navigateToMiniGame:",Date.now(),p.appId),v.NavigeteTime=Date.now(),v.NavigeteAppid=p.appId,d.ALReport.reportCheck.jumpData=c,d.ALReport.reportDataToMarketNew(c),r&&r(e)},fail:function(e){_.ALUtil.LOG("ALSDK navigateToMiniGame fail ",e),e&&e.errMsg&&-1===e.errMsg.indexOf("cancel")&&u&&v._preview(u,c),o&&o(e)},complete:function(e){i&&i(e)}})):v._preview(u,c)}},v.handleNaviTime=function(e){if(_.ALUtil.LOG("handleNaviTime param",e,v.NavigeteAppid),e&&1038==e.scene&&v.NavigeteAppid&&v.NavigeteTime){var t=Math.ceil((Date.now()-v.NavigeteTime)/1e3);if(_.ALUtil.LOG("handleNaviTime delta",t),15<=t){_.ALUtil.LOG("handleNaviTime report",v.NavigeteAppid);var a={appid:g.ALConfig.appId,openid:g.ALConfig.openId,targetAppid:v.NavigeteAppid};return void P.HttpUtil.POST(g.ALConfig.ReportMarketDomain+"/box/sdk/flow_report_click",a,function(e){e.isSucc||console.warn("handleNaviTime report err:",e.reason)})}}v.NavigeteAppid="",v.NavigeteTime=null},v._preview=function(e,t){g.ALConfig.RunEnv.previewImage({urls:[e],success:function(){_.ALUtil.LOG("ALSDK _preview success "),d.ALReport.reportDataToMarketNew(t)},fail:function(e){console.warn("ALSDK _preview error ",e)}})},v.requestModuleData=function(a,n,e,t){void 0===e&&(e=400),void 0===t&&(t="");var r={appid:g.ALConfig.appId,module:a,openid:g.ALConfig.openId,size:e,nickName:A.UserInfoData.NickName,avatarUrl:A.UserInfoData.AvatarUrl,country:A.UserInfoData.Country,gender:A.UserInfoData.Gender,language:A.UserInfoData.Language,province:A.UserInfoData.Province,scene:t};"Icon"===a?A.ALData.iconData:A.ALData.moreData,P.HttpUtil.GET(g.ALConfig.ReportMarketDomain+"/box/sdk/module_new",r,function(e){if(e.isSucc){var t=v.handleHttpData(e);"Icon"===a?A.ALData.iconData=t:"more"===a&&(A.ALData.moreData=t),n(t)}else console.warn("ALSDK requestModuleData fail !!!",e.reason,a)})},v.handleHttpData=function(e){var t=e.data.values||[],a=e.data.base;if(a&&0<t.length)for(var n=0,r=t.length;n<r;n++){var o=t[n];o[4]=a+o[4]}return t},v.reportFlowShow=function(e){var t=m(m({},d.ALReport.getPublicParam()),{appid:g.ALConfig.appId,openid:g.ALConfig.openId,gamelist:e});P.HttpUtil.POST(g.ALConfig.ReportMarketDomain+"/box/sdk/flow_report_show",t,function(e){e.isSucc||_.ALUtil.LOG("ALSDK reportFlowShow fail --- ",e.reason)})},v.paycheck=function(e,t){var a={game_appid:g.ALConfig.appId,game_openid:g.ALConfig.openId,limit:e},n={switch:0,msg:""};return"android"==d.ALReport.publicParam.platform?(n.switch=1,void t(n)):""==g.ALConfig.appId||""==g.ALConfig.openId?(console.warn("[AladinSDK]:请先调用ALSDK.init和ALSDK.reportOpenId方法"),n.msg="请先调用ALSDK.init和ALSDK.reportOpenId方法",void t(n)):void P.HttpUtil.POST(g.ALConfig.ReportMarketDomain+"/wxpay/paycheck",a,function(e){return e.isSucc?n.switch=1:n.msg=e.reason,void t(n)})},v.pay=function(e,t,p,s,l,f,c,a,n,u,d,A){v.oriPayParam={appid:e,openid:t,amount:p,pid:s,zoneId:l,orderTitle:f,orderDesc:c,imgUrl:a,limit:n,params:u,cb:d,env:A},g.ALConfig.appId=e,g.ALConfig.openId=t;var r={appid:g.ALConfig.appId,openid:g.ALConfig.openId,price:p,title:f,desc:c,pid:s,params:u,img:a,zoneid:l,limit:n};v.invalidAppid&&0==v.invalidAppid.indexOf("wx")&&(r.invalid_appid=v.invalidAppid,v.invalidAppid="");var L={ret:0,msg:"",pid:s,payMethod:0,amount:p,params:u,payCount:1,qrCode:""};return""==g.ALConfig.appId||""==g.ALConfig.openId?(console.error("[AladinSDK]:请先调用ALSDK.init和ALSDK.reportOpenId方法"),L.msg="请先调用ALSDK.init和ALSDK.reportOpenId方法",void d(L)):1==v.PayStatus?(L.msg="重复支付",void d(L)):(v.PayStatus=1,v.RetCallback=d,void P.HttpUtil.POST(g.ALConfig.ReportMarketDomain+"/wxpay/paymethod",r,function(e){if(!e.isSucc)return L.msg="PayMethod fail:"+e.reason,v.PayMethod=0,v.PayStatus=0,void d(L);console.log("paymethod:",m({},e.data)),v.PayMethod=e.data.pay_method,L.payMethod=e.data.pay_method,v.PayId=e.data.pay_id,v.RetObj=L;var t=e.data.pre_img,r=e.data.offer_id,a=e.data.appid,o=e.data.buy_quantity,n=e.data.qr_code,i=e.data.order_id;switch(i&&(A=e.data.env,v.oriPayParam.env=e.data.env),e.data.pay_method){case 1:g.ALConfig.RunEnv.navigateToMiniProgram({appId:a,path:"pages/index/index",envVersion:g.ALConfig.envVersion,extraData:{appid:g.ALConfig.appId,openid:g.ALConfig.openId,orderid:(new Date).getTime(),amount:p,params:u,orderTitle:f,orderDesc:c,a_pid:s},success:function(e){_.ALUtil.LOG("navigateToMiniProgram pay suc",e),v.PayStatus=2},fail:function(e){_.ALUtil.LOG("navigateToMiniProgram pay fail",e),L.msg="navigateToMiniProgram pay fail:"+e.errMsg,v.PayMethod=0,v.PayStatus=0,d(L)},complete:function(e){_.ALUtil.LOG("navigateToMiniProgram pay complete",e)}});break;case 2:g.ALConfig.RunEnv.openCustomerServiceConversation({sessionFrom:"pay|"+v.PayId,showMessageCard:!0,sendMessageTitle:"充值",sendMessagePath:"/pages/index/index",sendMessageImg:t,success:function(e){_.ALUtil.LOG("openCustomerServiceConversation pay suc",e),v.PayStatus=2},fail:function(e){_.ALUtil.LOG("openCustomerServiceConversation pay fail",e),L.msg="openCustomerServiceConversation pay fail:"+e.errMsg,v.PayMethod=0,v.PayStatus=0,d(L)},complete:function(e){_.ALUtil.LOG("openCustomerServiceConversation pay complete",e)}});break;case 3:g.ALConfig.RunEnv.requestMidasPayment({mode:"game",env:A,offerId:r,currencyType:"CNY",platform:"android",buyQuantity:o,zoneId:l,success:function(e){if(_.ALUtil.LOG("android pay suc",e),L.ret=1,L.msg="android pay suc",e&&e.sdkPaySuc?L.ret=2:v.reportMidasPayStatus({game_appid:g.ALConfig.appId,game_openid:g.ALConfig.openId,order_id:i,status:"success",offerId:r,buyQuantity:o,zoneId:l}),i){var t={game_appid:g.ALConfig.appId,game_openid:g.ALConfig.openId,order_id:i,sdk_pay:0,tryNum:0};e&&e.sdkPaySuc&&(t.sdk_pay=1);var a=(new Date).getTime()+6e5,n=function(){t.tryNum++,g.ALConfig.RunEnv.request({url:g.ALConfig.ReportMarketDomain+"/wxpay/midas/settle",method:"POST",data:t,timeout:15e3,header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){return e&&e.data&&200==e.statusCode?(0==e.data.ret?_.ALUtil.LOG("requestMidasPayment suc---",e):(L.msg="android pay fail:"+e.data.msg,L.ret=0),void d(L)):(_.ALUtil.LOG("requestMidasPayment res err---",e),a>(new Date).getTime()?void n():(L.msg="android pay fail:try end",L.ret=0,void d(L)))},fail:function(e){if(_.ALUtil.LOG("requestMidasPayment request fail---",e),!(a>(new Date).getTime()))return L.msg="android pay fail:try end",L.ret=0,void d(L);n()}})};n()}else d(L)},fail:function(e){_.ALUtil.LOG("android pay fail",e,A,r,o,l),L.msg="android pay fail:"+e.errMsg,L.ret=0,v.reportMidasPayStatus({game_appid:g.ALConfig.appId,game_openid:g.ALConfig.openId,order_id:i,status:"fail",offerId:r,buyQuantity:o,zoneId:l}),d(L)},complete:function(e){v.PayMethod=0,v.PayStatus=0,v.reportMidasPayStatus({game_appid:g.ALConfig.appId,game_openid:g.ALConfig.openId,order_id:i,status:"complete",offerId:r,buyQuantity:o,zoneId:l}),_.ALUtil.LOG("android pay complete",e)}});break;case 4:return n?(L.qrCode=n,L.ret=1,L.msg="qrCode pay suc"):(L.ret=0,L.msg="qrCode pay fail"),v.PayStatus=0,v.PayMethod=0,void d(L);default:return L.msg="pay_method error",void d(L)}}))},v.reportMidasPayStatus=function(t){P.HttpUtil.POST(g.ALConfig.ReportMarketDomain+"/wxpay/midas/callback_report",t,function(e){_.ALUtil.LOG("reportMidasPayStatus suc:",t,e)})},v.paycallback=function(e){return _.ALUtil.LOG("paycallback",e,v.PayMethod,v.PayStatus),e&&e.referrerInfo&&e.referrerInfo.extraData&&1==v.PayMethod&&2==v.PayStatus?e.referrerInfo.extraData.aladinPayStatus?(v.RetObj.ret=1,v.RetObj.msg="MiniProgram pay suc",_.ALUtil.LOG("MiniProgram pay suc"),v.RetCallback(v.RetObj),v.PayMethod=0,void(v.PayStatus=0)):(v.RetObj.ret=0,v.RetObj.msg="MiniProgram pay fail",_.ALUtil.LOG("MiniProgram pay fail"),v.PayMethod=0,v.PayStatus=0,void(e.referrerInfo&&e.referrerInfo.extraData&&e.referrerInfo.extraData.mchLimit&&e.referrerInfo.extraData.pay_appid?(v.invalidAppid=e.referrerInfo.extraData.pay_appid,v.pay(v.oriPayParam.appid,v.oriPayParam.openid,v.oriPayParam.amount,v.oriPayParam.pid,v.oriPayParam.zoneId,v.oriPayParam.orderTitle,v.oriPayParam.orderDesc,v.oriPayParam.imgUrl,v.oriPayParam.limit,v.oriPayParam.params,v.oriPayParam.cb,v.oriPayParam.env)):v.RetCallback(v.RetObj))):2==v.PayMethod&&2==v.PayStatus?(v.RetObj.ret=1,v.RetObj.msg="h5 pay suc",_.ALUtil.LOG("h5 pay suc"),v.RetCallback(v.RetObj),v.PayMethod=0,void(v.PayStatus=0)):void 0},v.payinit=function(){v.RetObj=null,v.RetCallback=null,v.PayMethod=0,v.PayStatus=0},v.qqpay=function(e,t,a,n,r,o,i){var p={ret:0,msg:"",params:i,starCurrency:0,prepayId:""},s={appid:e,openid:t,amt:a,goodid:n,good_num:r,params:i};_.ALUtil.LOG("qqpay 参数：",s),P.HttpUtil.POST(g.ALConfig.ReportMarketDomain+"/wxpay/qqgame/order",s,function(e){if(!e.isSucc)return p.msg="qqpay http fail:"+e.reason,void o(p);_.ALUtil.LOG("qqpay http ret:",m({},e.data));var t=e.data.prepayId,a=e.data.starCurrency;if(""==t||!_.ALUtil.isInteger(a)||a<1)return p.msg="qqpay return params err:"+t+":"+a,void o(p);p.starCurrency=a,p.prepayId=t,g.ALConfig.RunEnv.requestMidasPayment({prepayId:t,starCurrency:a,setEnv:0,success:function(e){_.ALUtil.LOG("qqpay requestMidasPayment success---",e),p.ret=1,o(p)},fail:function(e){_.ALUtil.LOG("qqpay requestMidasPayment fail---",e),p.msg="qqpay requestMidasPayment fail:"+e.errMsg,o(p)},complete:function(e){_.ALUtil.LOG("qqpay requestMidasPayment complete---",e)}})})},v._inited=!1,v.NavigeteTime=null,v.NavigeteAppid="",v.RetObj=null,v.RetCallback=null,v.PayMethod=0,v.PayStatus=0,v.PayId=0,v.oriPayParam=null,v.invalidAppid="",v);function v(){}t.ALSDK=n,t.SDK_MODULE_LIKE="Icon",t.SDK_MODULE_ICONS_CLICK="ICONS_CLICK",t.SDK_MODULE_BANNER_CLICK="BANNER_CLICK"},function(e,t,a){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var d=a(6),i=a(3),p=a(2),A=a(0),L=a(1),n=a(4),s=a(5),r=(l.allowDebug=function(e){p.ALUtil.DEBUG=e},l.changeAutoPay=function(e){A.ALConfig.AutoPayCb=e},l.getAds=function(){return i.ALReport.Ads},l.getAdsPos=function(){return i.ALReport.AdsPos},l.readAppidList=function(t){A.ALConfig.GamePlatform==L.PlatformEnum.WeChat||A.ALConfig.GamePlatform==L.PlatformEnum.QQ?L.ALData.appIdListStr?t(L.ALData.appIdListStr):p.ALUtil.readAppIDList().then(function(e){L.ALData.appIdListStr=e,t(L.ALData.appIdListStr),p.ALUtil.LOG("AladinSDK readAppIDList",e)}):console.warn("当前环境无法调用此接口")},l.init=function(e,t,a,n){d.ALSDK.init(p.ALUtil.addAppidPrefix(e),t,a,n)},l.login=function(n){var r={code:-1,msg:"",openid:"",token:""};A.ALConfig.GamePlatform==L.PlatformEnum.WeChat||A.ALConfig.GamePlatform==L.PlatformEnum.QQ?A.ALConfig.RunEnv.login({success:function(e){p.ALUtil.LOG("login init code:",e.code);var t=L.ALData.opts.query,a={code:e.code,appid:A.ALConfig.appId,codetype:A.ALConfig.GamePlatform,ads:i.ALReport.Ads,ads_pos:i.ALReport.AdsPos,share_level:t.a_level||"",inviter:t.a_inviter||"",top_inviter:t.a_top_inviter||"",ad_appid:t.ad_appid?t.ad_appid:"",query:JSON.stringify(t),model:i.ALReport.publicParam.channel};s.HttpUtil.POST(A.ALConfig.ReportMarketDomain+"/box/sdk/user_login",a,function(e){e.isSucc?(p.ALUtil.LOG("httpRsp:",e),A.ALConfig.token=e.data.token,L.UserInfoData.Openid=A.ALConfig.openId=e.data.openid,L.UserInfoData.NewPlayer=e.data.is_new,L.UserInfoData.Gender=e.data.gender||"",L.UserInfoData.NickName=e.data.nickName||"",L.UserInfoData.SessionKey=e.data.session_key||"",A.ALConfig.appId=e.data.appid,r.code=0,r.openid=e.data.openid,r.token=e.data.token):(p.ALUtil.LOG("login state:",e.reason),r.msg=e.reason),n&&n(r)})},fail:function(e){r.msg="wx login fail",n&&n(r)}}):(console.warn("登录功能仅支持微信和手Q平台！"),r.msg="登录功能仅支持微信和手Q平台",n&&n(r))},l.getHttpData=function(t,a,n){if(""!=A.ALConfig.appId){var r={ret:0,data:[]};s.HttpUtil.POST(A.ALConfig.ReportMarketDomain+t,o(o({},a),{appid:A.ALConfig.appId,openid:A.ALConfig.openId}),function(e){e.isSucc?e.data&&(r.data=e.data):(console.warn("getHttpData fail:",t,a,e.reason),r.ret=-1),n(r)})}else console.warn("appId为空，请先调用init接口")},l.getUserInfo=function(){var e={};return e.NickName=L.UserInfoData.NickName,e.AvatarUrl=L.UserInfoData.AvatarUrl,e.Country=L.UserInfoData.Country,e.Gender=L.UserInfoData.Gender,e.Language=L.UserInfoData.Language,e.Province=L.UserInfoData.Province,e.Model=L.UserInfoData.Model,e.NewPlayer=L.UserInfoData.NewPlayer,e.Openid=L.UserInfoData.Openid,e.City=L.UserInfoData.City,e.SessionKey=L.UserInfoData.SessionKey,e},l.msgCheck=function(e,t){var a={ret:0,msg:"",content:e};if(""==A.ALConfig.appId)return console.warn("appId为空，请先调用init接口"),a.ret=-1,a.msg="appId为空，请先调用init接口",void t(a);s.HttpUtil.POST(A.ALConfig.ReportMarketDomain+"/box/wx/msgSecCheck",{appid:A.ALConfig.appId,content:e},function(e){e.isSucc||(console.warn("msgCheck fail:",e.reason),a.ret=-1,a.msg="msgCheck fail:"+e.reason),t(a)})},l.imgCheck=function(e,t){var a={ret:0,msg:""};if(""==A.ALConfig.appId)return console.warn("appId为空，请先调用init接口"),a.ret=-1,a.msg="appId为空，请先调用init接口",void t(a);var n=new FormData;n.append("media",e),n.append("appid",A.ALConfig.appId),s.HttpUtil.POST(A.ALConfig.ReportMarketDomain+"/box/wx/imgSecCheck",n,function(e){e.isSucc||(console.warn("msgCheck fail:",e.reason),a.ret=-1,a.msg="msgCheck fail:"+e.reason),t(a)},{"content-type":"multipart/form-data"})},l.openShop=function(e,t){A.ALConfig.GamePlatform==L.PlatformEnum.WeChat&&A.ALConfig.RunEnv.openCustomerServiceConversation({sessionFrom:"shop|"+e,showMessageCard:!0,sendMessageTitle:"商城",sendMessagePath:"/pages/index/index",sendMessageImg:t})},l.reportData=function(e,t,a){p.ALUtil.LOG("上报的[value extra]:",t,a),""!=A.ALConfig.appId&&""!=A.ALConfig.openId||console.warn("请先调用init接口和上报openid接口!");var n=o(o({},i.ALReport.publicParam),{report_type:"normal",typeStr:e,value:t,extra:a});i.ALReport.reportDataToMarketNew(n)},l.initShareData=function(e){if(A.ALConfig.GamePlatform==L.PlatformEnum.WeChat){if(L.ALData.shareData&&0<L.ALData.shareData.length){L.ALData.curShareData=null,L.ALData.curShareScene="";var t=[];if(e)for(var a=0;a<L.ALData.shareData.length;a++)L.ALData.shareData[a].sceneid==e&&t.push(L.ALData.shareData[a]);else t=L.ALData.shareData;if(0<t.length){var n=Math.floor(Math.random()*t.length);L.ALData.curShareData=t[n],L.ALData.curShareScene=e||"",p.ALUtil.LOG("ShareData:",L.ALData.curShareData,L.ALData.curShareScene)}else p.ALUtil.LOG("ShareData is empty")}}else console.warn("当前环境无法调用此接口")},l.getToken=function(){if(A.ALConfig.GamePlatform==L.PlatformEnum.WeChat||A.ALConfig.GamePlatform==L.PlatformEnum.QQ)return""==A.ALConfig.token&&console.warn("获取token失败，请先调用init方法"),A.ALConfig.token;console.warn("当前环境无法调用此接口")},l.paycheck=function(e,t){A.ALConfig.GamePlatform==L.PlatformEnum.WeChat?d.ALSDK.paycheck(e,t):console.warn("当前环境无法调用此接口")},l.pay=function(e,t,a,n,r,o,i,p,s,l,f,c){if(A.ALConfig.GamePlatform==L.PlatformEnum.WeChat){var u=0;c&&(u=c),d.ALSDK.pay(e,t,a,n,"1",o,i,p,s,l,f,u)}else console.warn("当前环境无法调用此接口")},l.qqpay=function(e){if(A.ALConfig.GamePlatform==L.PlatformEnum.QQ)if(""!=A.ALConfig.appId&&""!=A.ALConfig.openId)if(""==e.goodid||!p.ALUtil.isInteger(e.good_num)||e.good_num<1||!p.ALUtil.isInteger(e.amt)||e.amt<1||!e.callback||!p.ALUtil.isFunction(e.callback))console.warn("qqpay:参数传递错误",e);else{var t=e.params?e.params:"";d.ALSDK.qqpay(A.ALConfig.appId,A.ALConfig.openId,e.amt,e.goodid,e.good_num,e.callback,t)}else console.warn("qqpay:获取appid和openid失败",A.ALConfig.appId,A.ALConfig.openId);else console.warn("qqpay:当前环境无法调用此接口",A.ALConfig.GamePlatform)},l.ipShield=function(t){var a={ip:"",province:"",city:"",status:1};s.HttpUtil.POST(A.ALConfig.ReportMarketDomain+"/box/sdk/shield",{},function(e){return e.isSucc?e.data&&(a.status=e.data.status,a.ip=e.data.ip,a.province=e.data.province,a.city=e.data.city):console.warn("ipShield:",e.reason),void t(a)})},l.reportOpenId=function(e,t){if(p.ALUtil.LOG("上报的[OPENID]:",e),A.ALConfig.openId&&""==e)return p.ALUtil.LOG("[AladinSDK OPENID]:",A.ALConfig.openId),void i.ALReport.report(i.REPORT_TYPE_OPEN_ID,A.ALConfig.openId);i.ALReport.report(i.REPORT_TYPE_OPEN_ID,e)},l.reportAnalytics=function(e,t,a){var n=p.ALUtil.addAppidPrefix(e);""==A.ALConfig.appId&&(console.warn("请先调用init方法"),A.ALConfig.appId=n),A.ALConfig.appId!=n&&console.warn("init appid和reportAnalytics appid不一致"),i.ALReport.reportAnalytics(n,t)},l.reportFlowShow=function(e){A.ALConfig.GamePlatform==L.PlatformEnum.WeChat||A.ALConfig.GamePlatform==L.PlatformEnum.Oppo?(i.ALReport.reportCheck.gameShow=e,d.ALSDK.reportFlowShow(e)):console.warn("当前环境无法调用此接口")},l.reportWithAppId=function(e,t,a){void 0===a&&(a="");var n=p.ALUtil.addAppidPrefix(e);""==A.ALConfig.appId&&(console.warn("请先调用init方法"),A.ALConfig.appId=n),A.ALConfig.appId!=n&&console.warn("init appid和reportWithAppId appid不一致"),i.ALReport.report(t,a)},l.clickToMiniProgram=function(e,t,a,n,r,o){void 0===a&&(a=""),void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=null),A.ALConfig.GamePlatform==L.PlatformEnum.WeChat||A.ALConfig.GamePlatform==L.PlatformEnum.Oppo?t===this.ClickTypes.ICONS_CLICK?d.ALSDK.toMiniProgram(e,this.ClickTypes.ICONS_CLICK,d.SDK_MODULE_ICONS_CLICK,a||"icons",n,r,o):t===this.ClickTypes.BANNER_CLICK?d.ALSDK.toMiniProgram(e,this.ClickTypes.BANNER_CLICK,d.SDK_MODULE_BANNER_CLICK,a||"banner",n,r,o):d.ALSDK.toMiniProgram(e,this.ClickTypes.ICONS_CLICK,d.SDK_MODULE_ICONS_CLICK,a,n,r,o):console.warn("当前环境无法调用此接口")},l.getFavoData=function(e,t,a){void 0===t&&(t=400),void 0===a&&(a=""),A.ALConfig.GamePlatform==L.PlatformEnum.WeChat||A.ALConfig.GamePlatform==L.PlatformEnum.Oppo?d.ALSDK.requestModuleData(d.SDK_MODULE_LIKE,e,t,a):console.warn("当前环境无法调用此接口")},l.reportCheckSingle=function(e){i.ALReport.reportCheck[e]?console.log("[AladinSDK上报检查]上报成功：",i.ALReport.reportCheck[e]):console.warn("[AladinSDK上报检查]上报失败")},l.reportCheck=function(){if(console.log("[AladinSDK上报检查]SDK版本：",A.ALConfig.sdkVersion),console.log("[AladinSDK上报检查]SDK域名：",A.ALConfig.ReportMarketDomain),i.ALReport.reportCheck.appid?console.log("[AladinSDK上报检查]appid：",i.ALReport.reportCheck.appid):console.warn("[AladinSDK上报检查]appid：没有初始化SDK"),i.ALReport.reportCheck.openid?console.log("[AladinSDK上报检查]openid上报成功：",i.ALReport.reportCheck.openid):console.warn("[AladinSDK上报检查]openid：没有上报"),0<i.ALReport.CustomNode.length){for(var e="",t=0;t<i.ALReport.CustomNode.length;t++)i.ALReport.CustomNode[t]&&(e=e+t+",");console.log("[AladinSDK上报检查]自定义打点上报成功：",e)}else console.warn("[AladinSDK上报检查]自定义打点：没有上报");i.ALReport.reportCheck.startTime?console.log("[AladinSDK上报检查]启动时长上报成功：",i.ALReport.reportCheck.startTime):console.warn("[AladinSDK上报检查]启动时长：没有上报"),i.ALReport.reportCheck.level?console.log("[AladinSDK上报检查]用户等级上报成功：",i.ALReport.reportCheck.level):console.warn("[AladinSDK上报检查]用户等级：没有上报"),i.ALReport.reportCheck.video_sence?console.log("[AladinSDK上报检查]视频广告场景上报成功：",i.ALReport.reportCheck.video_sence):console.warn("[AladinSDK上报检查]视频广告场景：没有上报"),i.ALReport.reportCheck.video_play?console.log("[AladinSDK上报检查]视频广告播放次数上报成功：",i.ALReport.reportCheck.video_play):console.warn("[AladinSDK上报检查]视频广告播放次数：","没有上报"),i.ALReport.reportCheck.video_play?console.log("[AladinSDK上报检查]视频广告播放次数上报成功：",i.ALReport.reportCheck.video_play):console.warn("[AladinSDK上报检查]视频广告播放次数：","没有上报"),i.ALReport.reportCheck.payAmount?console.log("[AladinSDK上报检查]安卓支付金额上报成功：",i.ALReport.reportCheck.payAmount):console.warn("[AladinSDK上报检查]安卓支付金额：","没有上报"),i.ALReport.reportCheck.gameTime?console.log("[AladinSDK上报检查]在线时长上报成功：",i.ALReport.reportCheck.gameTime):console.warn("[AladinSDK上报检查]在线时长：","没有上报"),i.ALReport.reportCheck.gameShow?console.log("[AladinSDK上报检查]展示的游戏上报成功：",i.ALReport.reportCheck.gameShow):console.warn("[AladinSDK上报检查]展示的游戏：","没有上报"),i.ALReport.reportCheck.sharePic?console.log("[AladinSDK上报检查]分享图ID上报成功：",i.ALReport.reportCheck.sharePic):console.warn("[AladinSDK上报检查]分享图ID：","没有上报"),i.ALReport.reportCheck.jumpData?console.log("[AladinSDK上报检查]跳转数据上报成功：",[i.ALReport.reportCheck.jumpData]):console.warn("[AladinSDK上报检查]跳转数据：","没有上报")},l.ClickTypes={ICONS_CLICK:"0_11",BANNER_CLICK:"0_12"},l.ReportTypes={SHOW:"1_1",LOGIN:"1_2",OPEN_ID:"1_3",AUTH:"1_4",SHARE:"1_5",LIKE_CLICK:"1_6",DRAWER_CLICK:"1_7",LIKE_SHOW:"1_8",DRAWER_SHOW:"1_9",SHARE_Ready:"1_10",PAY_MENT:"6_1",PAY_MENT_STAR:"6_2",PAY_MENT_INTER:"6_3",PAY_MENT_FAIL:"6_4",MORE_SHOW:"2_0",MORE_FOLD:"2_1",MORE_CLICK:"2_2",MORE_LONG_CLICK:"2_3",VIDEO_OPEN:"2_4",VIDEO_WATCH_FAIL:"2_5",VIDEO_WATCH_NORMAL:"2_6",GAME_BOX_SHOW:"8_1",GAME_BOX_CLICK:"8_2",GAME_BOX_BANNER_CLICK:"8_3",VIDEO_BTN_SHOW:"5_6",VIDEO_CLICK:"5_7",SHARE_BTN_SHOW:"5_8",SHARE_CLICK:"5_9"},l);function l(){}t.AladinSDK=r,p.ALUtil.qgExist()&&console.log("test1"),console.log("test consol log 1112"),p.ALUtil.runEnvExist()?(console.log("runEnvExist"),p.ALUtil.initGamePlatform(),console.log("GamePlatform:",A.ALConfig.GamePlatform),p.ALUtil.initRunEnv(),console.log("RunEnv:",A.ALConfig.RunEnv),i.ALReport.init(),n.ALIntercept.init(),p.ALUtil.reportUserInfo(),p.ALUtil.saveSystemInfo(),p.ALUtil.saveNetworkType(),r.login(function(){r.reportAnalytics(A.ALConfig.appId,0)})):console.warn("当前运行环境错误，请勿调用相关接口！！！"),window.AladinSDK=r}]);window.AladinSDK=aladinSDK.AladinSDK;module.exports={AladinSDK:aladinSDK.AladinSDK};
