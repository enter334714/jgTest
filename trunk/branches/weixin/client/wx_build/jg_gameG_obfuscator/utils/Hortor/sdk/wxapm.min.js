module.exports = function (e) {
  var t = {};function n(r) {
    if (t[r]) return t[r].exports;var o = t[r] = { i: r, l: !1, exports: {} };return e[r].call(o.exports, o, o.exports, n), o.l = !0, o.exports;
  }return n.m = e, n.c = t, n.d = function (e, t, r) {
    n.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: r });
  }, n.r = function (e) {
    "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 });
  }, n.t = function (e, t) {
    if (1 & t && (e = n(e)), 8 & t) return e;if (4 & t && "object" == typeof e && e && e.__esModule) return e;var r = Object.create(null);if (n.r(r), Object.defineProperty(r, "default", { enumerable: !0, value: e }), 2 & t && "string" != typeof e) for (var o in e) n.d(r, o, function (t) {
      return e[t];
    }.bind(null, o));return r;
  }, n.n = function (e) {
    var t = e && e.__esModule ? function () {
      return e.default;
    } : function () {
      return e;
    };return n.d(t, "a", t), t;
  }, n.o = function (e, t) {
    return Object.prototype.hasOwnProperty.call(e, t);
  }, n.p = "", n(n.s = 6);
}([function (e, t, n) {
  "use strict";

  Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {
    function e(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }return function (t, n, r) {
      return n && e(t.prototype, n), r && e(t, r), t;
    };
  }();var o = 1,
      i = (t.LOG_TYPE = { UNCAUGHT_ERROR: "unc-err", RES_REQ: "res-req", RES_ERROR: "res-err", DOWNLOAD_ERROR: "down-err", DOWNLOAD_REQ: "down-req", UPLOAD_REQ: "up-req", UPLOAD_ERROR: "up-err", SOCKET_REQ: "soc-req", SOCKET_ERROR: "soc-err", APP_LANCH: "app-lanch", APP_ERROR: "app-err", PAGE_NOT_FIND: "page-null", PAGE_LOAD: "page-load", PAGE_READY: "page-ready", GAME_NOTICE: "game-notice", GAME_TRACK: "game-track", MEMORY_WARN: "mem-warn" }, function () {
    function e(t) {
      var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};!function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
      }(this, e), this.id = o++, this.logType = t, this.extra = {}, this.collected = !1, this.collector = n;
    }return r(e, [{ key: "setType", value: function (e) {
        return this.logType = e, this;
      } }, { key: "addExtra", value: function (e) {
        return e.url && (this.resURI = e.url), e.errMsg && !e.msg && (e.msg = e.errMsg), this.extra = Object.assign(this.extra, e), this;
      } }, { key: "start", value: function () {
        return this.startTime = new Date().getTime(), this;
      } }, { key: "end", value: function () {
        return this.timestamp = new Date().getTime() - this.startTime, this.timestamp = this.timestamp < 0 ? 0 : this.timestamp, this.collect(), this;
      } }, { key: "collect", value: function () {
        return this.collected || "function" != typeof this.collector.collect || (this.collected = !0, this.collector.collect(this)), this;
      } }, { key: "tryReport", value: function () {
        return this.collected || "function" != typeof this.collector.tryReport || (this.collected = !0, this.collector.tryReport(this)), this;
      } }, { key: "toJSON", value: function () {
        return { res: this.resURI, type: this.logType, ts: this.timestamp, ext: this.extra };
      } }]), e;
  }());t.default = i;
}, function (e, t, n) {
  "use strict";

  Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {
    function e(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }return function (t, n, r) {
      return n && e(t.prototype, n), r && e(t, r), t;
    };
  }(),
      o = function (e) {
    return e && e.__esModule ? e : { default: e };
  }(n(0));var i = function () {
    function e(t) {
      var n = t.wx,
          r = t.config,
          o = t.collector;!function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
      }(this, e), this.wx = n, this.config = r, this.collector = o;
    }return r(e, [{ key: "handle", value: function () {} }, { key: "isFun", value: function (e) {
        return !(!e || "function" != typeof e);
      } }, { key: "tracker", value: function (e) {
        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};return new o.default(e, this.collector).addExtra(t);
      } }]), e;
  }();t.default = i;
}, function (e, t, n) {
  "use strict";

  Object.defineProperty(t, "__esModule", { value: !0 }), t.default = function (e, t, n) {
    var r = e[t];Object.defineProperty(e, t, { value: n(r) });
  };
}, function (e, t, n) {
  "use strict";

  Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {
    function e(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }return function (t, n, r) {
      return n && e(t.prototype, n), r && e(t, r), t;
    };
  }();var o = ["wxmini", "wxmini-log", "platform", "wxmini-test", "platform-test", "wxmini-dev", "platform-dev"],
      i = (t.TIMES_TYPE = { RES_TIMES: "requestTimes", DOWNLOAD_TIMES: "downloadTimes" }, function () {
    function e(t) {
      !function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
      }(this, e), this.collector = t, this.reset();
    }return r(e, [{ key: "getPlatformByUrl", value: function (e) {
        var t = e.split("//"),
            n = t.length ? t[1].split(".") : [],
            r = n.length ? n[0] : "";return o.indexOf(r) > -1 ? "platformSource" : "gameSource";
      } }, { key: "add", value: function (e, t) {
        if (e) {
          this.hadData = !0;var n = this.getPlatformByUrl(e);this.requestInfo[n][t] += 1;
        }
      } }, { key: "reset", value: function () {
        this.hadData = !1, this.requestInfo = { platformSource: { requestTimes: 0, downloadTimes: 0 }, gameSource: { requestTimes: 0, downloadTimes: 0 } };
      } }, { key: "getInfo", value: function () {
        return this.hadData ? this.requestInfo : void 0;
      } }]), e;
  }());t.default = i;
}, function (e, t, n) {
  "use strict";

  Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {
    function e(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }return function (t, n, r) {
      return n && e(t.prototype, n), r && e(t, r), t;
    };
  }();t.SOCKET_TIMES_TYPE = { CONNECT_TIMES: "connectTimes", DISCONNECT_TIMES: "disconnectTimes" };var o = function () {
    function e(t) {
      !function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
      }(this, e), this.collector = t, this.reset();
    }return r(e, [{ key: "add", value: function (e) {
        e && (this.hasSocketData = !0, this.socketInfo[e] += 1);
      } }, { key: "reset", value: function () {
        this.hasSocketData = !1, this.socketInfo = { connectTimes: 0, disconnectTimes: 0 };
      } }, { key: "getInfo", value: function () {
        return this.hasSocketData ? this.socketInfo : void 0;
      } }]), e;
  }();t.default = o;
}, function (e, t, n) {
  "use strict";

  Object.defineProperty(t, "__esModule", { value: !0 });t.DEFAULT_CONFIG = { Debug: !1, ReportDelay: 6e4, ErrorReportDelay: 2e3, ClearRepeatLog: !0, EnabledDownLoadErr: !0, EnabledDownLoadPerf: !1, EnabledUpLoadErr: !0, EnabledUpLoadPerf: !1, EnabledConsoleErr: !1, EnabledAppOnErr: !0, EnabledAppLaunch: !1, EnabledPagePerf: !1, EnabledResErr: !0, EnabledResPerf: !1, EnabledSocket: !1, EnabledSocketTimes: !0, EnabledMemoryWarning: !0, EnabledTempFailLog: !1, MaxTempFailLogLength: 100, Filters: [], reportUrlProc: "https://platform.hortorgames.com/wxlog/api/v1/apmlog", reportUrlDev: "https://platform-test.hortorgames.com/wxlog/api/v1/apmlog" }, t.Extra_CONFIG = { Filters: [/\/v1\/statlog$/, /\/v1\/log$/, /\/v1\/log\/multi$/] };
}, function (e, t, n) {
  "use strict";

  var r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
    return typeof e;
  } : function (e) {
    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  },
      o = function () {
    function e(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }return function (t, n, r) {
      return n && e(t.prototype, n), r && e(t, r), t;
    };
  }(),
      i = c(n(7)),
      a = n(5),
      s = n(0),
      u = c(n(18));function c(e) {
    return e && e.__esModule ? e : { default: e };
  }var l = function () {
    function e() {
      !function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
      }(this, e);
    }return o(e, [{ key: "init", value: function (e) {
        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : a.DEFAULT_CONFIG;"string" == typeof e ? t.gameId = e : "object" === (void 0 === e ? "undefined" : r(e)) && (t = Object.assign({}, t, e)), t.Debug = !t.env || "Prod" !== t.env || t.Debug, console.log("[APM] config", t), this.wxTracker = new i.default(wx, Object.assign({}, a.DEFAULT_CONFIG, u.default, t)).track();
      } }, { key: "notify", value: function (e, t) {
        return this.wxTracker ? this.wxTracker.tracker(s.LOG_TYPE.GAME_NOTICE, Object.assign({ msg: e }, t)).collect() : { errMsg: "please init apm first" };
      } }, { key: "notifyError", value: function (e, t) {
        return this.notify(e, t);
      } }, { key: "newTracker", value: function (e, t) {
        return this.wxTracker ? this.wxTracker.tracker(s.LOG_TYPE.GAME_TRACK, Object.assign({ msg: e }, t)) : { errMsg: "please init apm first" };
      } }, { key: "setUserInfo", value: function (e) {
        this.wxTracker && this.wxTracker.setUserInfo(e);
      } }]), e;
  }();e.exports = new l();
}, function (e, t, n) {
  "use strict";

  Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {
    function e(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }return function (t, n, r) {
      return n && e(t.prototype, n), r && e(t, r), t;
    };
  }(),
      o = h(n(8)),
      i = h(n(0)),
      a = h(n(12)),
      s = h(n(13)),
      u = h(n(14)),
      c = h(n(15)),
      l = h(n(16)),
      f = h(n(17));function h(e) {
    return e && e.__esModule ? e : { default: e };
  }var d = function () {
    function e(t, n) {
      !function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
      }(this, e), this.wx = t, this.config = n, this.collector = new o.default(t, n);var r = { wx: t, config: n, collector: this.collector };this.handlers = [new c.default(r), new l.default(r), new s.default(r), new a.default(r), new u.default(r), new f.default(r)];
    }return r(e, [{ key: "track", value: function () {
        return this.handlers.forEach(function (e) {
          e.handle();
        }), this;
      } }, { key: "tracker", value: function (e) {
        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};return new i.default(e, this.collector).addExtra(t);
      } }, { key: "setUserInfo", value: function (e) {
        this.collector && this.collector.reporter.setUserInfo(e);
      } }]), e;
  }();t.default = d;
}, function (e, t, n) {
  "use strict";

  Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {
    function e(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }return function (t, n, r) {
      return n && e(t.prototype, n), r && e(t, r), t;
    };
  }(),
      o = c(n(9)),
      i = c(n(3)),
      a = c(n(4)),
      s = n(5),
      u = c(n(11));function c(e) {
    return e && e.__esModule ? e : { default: e };
  }var l = function () {
    function e(t, n) {
      !function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
      }(this, e), this.logs = [], this.started = !1, this.wx = t, this.modal = new u.default(t), this.config = n, this.reporter = new o.default(this.wx, n), this.timeser = new i.default(), this.socketTimeser = new a.default();
    }return r(e, [{ key: "clearReporter", value: function (e) {
        return e && clearTimeout(e), null;
      } }, { key: "finalReport", value: function () {
        var e = this,
            t = this.logs,
            n = this.timeser.getInfo(),
            r = this.socketTimeser.getInfo();this.reporter.report({ logs: t, times: n, sockets: r }, function () {
          var t = (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}).data || [];if (t.length) {
            var n = t.join(", ");n && e.modal.alert("" + n, "错误ID");
          }
        }), this.logs = [], this.timeser.reset(), this.socketTimeser.reset(), this.errorReporter = this.clearReporter(this.errorReporter), this.fixedReporter = this.clearReporter(this.fixedReporter), this.fixedReport();
      } }, { key: "fixedReport", value: function () {
        this.fixedReporter = setTimeout(this.finalReport.bind(this), this.config.ReportDelay);
      } }, { key: "startFixedReport", value: function () {
        this.started || (this.started = !0, this.fixedReport());
      } }, { key: "tryReport", value: function (e) {
        this.checkValid(e) && (this.add(e), this.errorReporter || (this.errorReporter = setTimeout(this.finalReport.bind(this), this.config.ErrorReportDelay)));
      } }, { key: "collect", value: function (e) {
        this.checkValid(e) && this.add(e);
      } }, { key: "checkValid", value: function (e) {
        return !(!e || e.resURI && e.resURI.startsWith(this.reporter.getReportUrl())) && (!e.resURI || (this.filters || (this.filters = s.Extra_CONFIG.Filters || [], this.filters = this.filters.concat(this.config.Filters)), !this.filters.length || !this.filters.some(function (t) {
          return t && t.test && t.test(e.resURI);
        })));
      } }, { key: "isRepeat", value: function () {
        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
            t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};if (e.id && e.id === t.id) return !0;if (!this.config.ClearRepeatLog) return !1;return ["resURI", "logType", "extra"].every(function (n) {
          return JSON.stringify(e[n]) == JSON.stringify(t[n]);
        });
      } }, { key: "add", value: function (e) {
        var t = this;this.logs.some(function (n, r) {
          if (t.isRepeat(e, n)) return (!e.timestamp || e.timestamp > n.timestamp) && (t.logs[r] = e), !0;
        }) || (this.logs.push(e), this.startFixedReport());
      } }, { key: "addTimes", value: function (e, t) {
        this.checkValid({ resURI: e }) && (this.timeser.add(e, t), this.startFixedReport());
      } }, { key: "addSocketTimes", value: function (e) {
        this.socketTimeser.add(e), this.startFixedReport();
      } }]), e;
  }();t.default = l;
}, function (e, t, n) {
  "use strict";

  Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {
    function e(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }return function (t, n, r) {
      return n && e(t.prototype, n), r && e(t, r), t;
    };
  }(),
      o = function (e) {
    return e && e.__esModule ? e : { default: e };
  }(n(10));var i = function () {
    function e(t, n) {
      !function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
      }(this, e), this.clientInfo = null, this.wx = t, this.config = n, this.initNetworkType(), this.logTemper = new o.default(this.wx, n);
    }return r(e, [{ key: "setUserInfo", value: function (e) {
        this.config.userInfo = Object.assign(this.config.userInfo || {}, e);
      } }, { key: "initNetworkType", value: function () {
        var e = this;this.netTp = "unknown", this.wx.getNetworkType({ success: function (t) {
            e.netTp = t.networkType;
          } }), this.wx.onNetworkStatusChange && "function" == typeof this.wx.onNetworkStatusChange && (this.bindedNetChangge || (this.bindedNetChangge = !0, this.wx.onNetworkStatusChange(function (t) {
          e.netTp = t.networkType;
        })));
      } }, { key: "getClientInfo", value: function () {
        if (this.clientInfo) return this.clientInfo.netType = this.netTp, this.clientInfo;var e = this.wx.getSystemInfoSync();return this.clientInfo = { version: e.version, system: e.system, platform: e.platform, sdk: e.SDKVersion, model: e.model, netType: this.netTp, brand: e.brand };
      } }, { key: "report", value: function () {
        var e = this,
            t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
            n = arguments[1],
            r = t.logs,
            o = t.times,
            i = t.sockets;if (this.logTemper.checkTemp() || t.logs && t.logs.length || t.times || t.sockets) {
          var a = [];0 === r.length ? (o && (a = [{ type: "req-times" }]), i && (a = [{ type: "socket-track" }])) : a = r.map(function (e) {
            return e.toJSON();
          });var s = this.logTemper.getTemp({ logs: a, times: o, sockets: i }),
              u = this.config,
              c = { game: { gameId: u.gameId, version: u.gameVersion, env: u.env }, client: this.getClientInfo(), user: u.userInfo, logs: s.logs, requestInfo: s.times, socketInfo: s.sockets };this.post(c, function (t, r) {
            r ? e.logTemper.setTemp(s) : n && n(t);
          });
        }
      } }, { key: "getReportUrl", value: function () {
        return this.config.Debug ? this.config.reportUrlDev : this.config.reportUrlProc;
      } }, { key: "post", value: function (e, t) {
        this.wx.request({ url: this.getReportUrl(), method: "POST", data: e, header: { "content-type": "application/json" }, success: function () {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};t && t(e.data);
          }, fail: function (e) {
            t && t(null, e);
          } });
      } }]), e;
  }();t.default = i;
}, function (e, t, n) {
  "use strict";

  Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {
    function e(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }return function (t, n, r) {
      return n && e(t.prototype, n), r && e(t, r), t;
    };
  }();var o = function () {
    function e(t, n) {
      !function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
      }(this, e), this.wx = t, this._temp = null, this._max = n.MaxTempFailLogLength || 0, this.enable = n.EnabledTempFailLog;
    }return r(e, [{ key: "setStorage", value: function (e) {
        try {
          this._temp = e, this.wx.setStorageSync("__APM_TEMP_LOGS", e);
        } catch (e) {
          console.log("[APM] set storage err: ", e);
        }
      } }, { key: "getStorage", value: function () {
        var e = this._temp;if (e) return e;try {
          e = this.wx.getStorageSync("__APM_TEMP_LOGS"), this._temp = e;
        } catch (t) {
          e = "", console.log("[APM] get storage err: ", t);
        }return e;
      } }, { key: "limitLens", value: function (e, t) {
        var n = e,
            r = e.length - t;return t > 0 && r > 0 && (n = e.slice(r)), n;
      } }, { key: "setTemp", value: function (e) {
        if (this.enable) {
          var t = this._temp || [];t.push(e), this._temp = this.limitLens(t, this._max), console.log("[APM] storage fail log: ", this._temp), this.setStorage(this._temp);
        }
      } }, { key: "mergeNum", value: function (e, t) {
        var n = e || t;if (n) {
          for (var r in t = t || {}, e = e || {}, n) t[r] = t[r] || 0, t[r] += e[r] || 0;return t;
        }
      } }, { key: "mergeTemp", value: function (e, t) {
        var n = t || {},
            r = n.logs,
            o = n.sockets,
            i = n.times,
            a = e || {},
            s = a.logs,
            u = a.sockets,
            c = a.times,
            l = {};l.logs = this.limitLens((s || []).concat(r || []), this._max), l.sockets = this.mergeNum(o, u);var f = i || c;if (f) for (var h in l.times = {}, f) l.times[h] = this.mergeNum((i || {})[h], (c || {})[h]);return l;
      } }, { key: "getTemp", value: function (e) {
        var t = this;if (!this.enable) return e;var n = this.getStorage(),
            r = Object.assign({}, e || {});return n && n.length && (n.forEach(function (e) {
          r = t.mergeTemp(e, r);
        }), console.log("[APM] merge storage log: ", r), this.clear()), r;
      } }, { key: "checkTemp", value: function () {
        return this.enable && this.getStorage();
      } }, { key: "clear", value: function () {
        this.setStorage("");
      } }]), e;
  }();t.default = o;
}, function (e, t, n) {
  "use strict";

  Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {
    function e(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }return function (t, n, r) {
      return n && e(t.prototype, n), r && e(t, r), t;
    };
  }();var o = function () {
    function e(t) {
      !function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
      }(this, e), this.modalStack = [], this.showIng = !1, this.wx = t;
    }return r(e, [{ key: "isFun", value: function (e) {
        return !(!e || "function" != typeof e);
      } }, { key: "show", value: function (e) {
        var t = this;if (this.showIng) return this.modalStack.push(this.show.bind(this, e));this.showIng = !0;var n = e.success;this.wx.showModal(Object.assign(e, { success: function (e) {
            if (t.showIng = !1, t.modalStack.length) {
              var r = t.modalStack.pop();t.isFun(r) && r();
            }t.isFun(n) && n(e);
          } }));
      } }, { key: "alert", value: function (e, t, n) {
        this.show({ title: t, content: e, showCancel: !1, confirmText: "知道了", success: n });
      } }]), e;
  }();t.default = o;
}, function (e, t, n) {
  "use strict";

  Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {
    function e(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }return function (t, n, r) {
      return n && e(t.prototype, n), r && e(t, r), t;
    };
  }(),
      o = u(n(1)),
      i = u(n(2)),
      a = n(0),
      s = n(3);function u(e) {
    return e && e.__esModule ? e : { default: e };
  }var c = function (e) {
    function t(e) {
      return function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
      }(this, t), function (e, t) {
        if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return !t || "object" != typeof t && "function" != typeof t ? e : t;
      }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e));
    }return function (e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
    }(t, o.default), r(t, [{ key: "handle", value: function () {
        (this.config.EnabledDownLoadErr || this.config.EnabledDownLoadPerf) && (0, i.default)(this.wx, "downloadFile", this.downloadFileHandler.bind(this));
      } }, { key: "downloadFileHandler", value: function (e) {
        var t = this;return function (n) {
          var r = t.tracker("", { url: n.url, filePath: n.filePath }).start();t.collector.addTimes(n.url, s.TIMES_TYPE.DOWNLOAD_TIMES);var o = function (e) {
            console.log("[APM] download err", e), t.config.EnabledDownLoadErr && r.setType(a.LOG_TYPE.DOWNLOAD_ERROR).addExtra(e).end();
          };return e(Object.assign({}, n, { success: function () {
              var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                  i = e.statusCode,
                  s = e.header ? e.header["Content-Length"] : 0;200 == i ? function (e) {
                t.config.EnabledDownLoadPerf && r.setType(a.LOG_TYPE.DOWNLOAD_REQ).addExtra(e).end();
              }({ status: i, size: s }) : o({ status: i, err: e.data, size: s }), n.success && n.success.call(this, e);
            }, fail: function (e) {
              o({ err: e }), n.fail && n.fail.call(this, e);
            } }));
        };
      } }]), t;
  }();t.default = c;
}, function (e, t, n) {
  "use strict";

  Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {
    function e(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }return function (t, n, r) {
      return n && e(t.prototype, n), r && e(t, r), t;
    };
  }(),
      o = u(n(1)),
      i = u(n(2)),
      a = n(0),
      s = n(3);function u(e) {
    return e && e.__esModule ? e : { default: e };
  }var c = function (e) {
    function t(e) {
      return function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
      }(this, t), function (e, t) {
        if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return !t || "object" != typeof t && "function" != typeof t ? e : t;
      }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e));
    }return function (e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
    }(t, o.default), r(t, [{ key: "handle", value: function () {
        (this.config.EnabledResErr || this.config.EnabledResPerf) && (0, i.default)(this.wx, "request", this.requestHandler.bind(this));
      } }, { key: "requestHandler", value: function (e) {
        var t = this;return function (n) {
          var r = t.tracker("", { url: n.url, method: n.method }).start();t.collector.addTimes(n.url, s.TIMES_TYPE.RES_TIMES);var o = function (e) {
            console.log("[APM] request err", e), t.config.EnabledResErr && r.setType(a.LOG_TYPE.RES_ERROR).addExtra(e).end();
          };return e(Object.assign({}, n, { success: function () {
              var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                  i = e.header ? e.header["Content-Length"] : 0,
                  s = e.statusCode;200 == s ? function (e) {
                t.config.EnabledResPerf && r.setType(a.LOG_TYPE.RES_REQ).addExtra(e).end();
              }({ status: s, size: i }) : o({ status: s, err: e.data, size: i }), n.success && n.success.call(this, e);
            }, fail: function (e) {
              o({ err: e }), n.fail && n.fail.call(this, e);
            } }));
        };
      } }]), t;
  }();t.default = c;
}, function (e, t, n) {
  "use strict";

  Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {
    function e(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }return function (t, n, r) {
      return n && e(t.prototype, n), r && e(t, r), t;
    };
  }(),
      o = s(n(1)),
      i = s(n(2)),
      a = n(0);function s(e) {
    return e && e.__esModule ? e : { default: e };
  }var u = function (e) {
    function t(e) {
      return function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
      }(this, t), function (e, t) {
        if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return !t || "object" != typeof t && "function" != typeof t ? e : t;
      }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e));
    }return function (e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
    }(t, o.default), r(t, [{ key: "handle", value: function () {
        (this.config.EnabledUpLoadErr || this.config.EnabledUpLoadPerf) && (0, i.default)(this.wx, "uploadFile", this.uploadFileHandler.bind(this));
      } }, { key: "uploadFileHandler", value: function (e) {
        var t = this;return function (n) {
          var r = t.tracker("", { url: n.url, filePath: n.method }).start(),
              o = function (e) {
            console.log("[APM] upload err", e), t.config.EnabledUpLoadErr && r.setType(a.LOG_TYPE.UPLOAD_ERROR).addExtra(e).end();
          };return e(Object.assign({}, n, { success: function () {
              var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                  i = e.statusCode,
                  s = e.header ? e.header["Content-Length"] : 0;200 == i ? function (e) {
                t.config.EnabledUpLoadPerf && r.setType(a.LOG_TYPE.UPLOAD_REQ).addExtra(e).end();
              }({ status: i, size: s }) : o({ status: i, err: e.data, size: s }), n.success && n.success.call(this, e);
            }, fail: function (e) {
              o({ err: e }), n.fail && n.fail.call(this, e);
            } }));
        };
      } }]), t;
  }();t.default = u;
}, function (e, t, n) {
  "use strict";

  Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {
    function e(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }return function (t, n, r) {
      return n && e(t.prototype, n), r && e(t, r), t;
    };
  }(),
      o = u(n(1)),
      i = u(n(2)),
      a = n(0),
      s = n(4);function u(e) {
    return e && e.__esModule ? e : { default: e };
  }var c = function (e) {
    function t(e) {
      return function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
      }(this, t), function (e, t) {
        if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return !t || "object" != typeof t && "function" != typeof t ? e : t;
      }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e));
    }return function (e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
    }(t, o.default), r(t, [{ key: "handle", value: function () {
        (this.config.EnabledSocket || this.config.EnabledSocketTimes) && (0, i.default)(this.wx, "connectSocket", this.connectSocketHandler.bind(this));
      } }, { key: "connectSocketHandler", value: function (e) {
        var t = this;return function (n) {
          var r = void 0;if (t.config.EnabledSocket) {
            var o = { url: n.url, method: n.method, protocols: n.protocols },
                i = t.tracker("", o).start();(r = e(Object.assign({}, n, { success: function (e) {
                !function (e) {
                  i.setType(a.LOG_TYPE.SOCKET_REQ).addExtra(e).end();
                }({ status: 200 }), n.success && n.success.call(this, e);
              }, fail: function (e) {
                !function (e) {
                  i.setType(a.LOG_TYPE.SOCKET_ERROR).addExtra(e).end();
                }({ err: e }), n.fail && n.fail.call(this, e);
              } }))) && r.onError(function (e) {
              !function (e) {
                t.tracker(a.LOG_TYPE.SOCKET_ERROR, o).addExtra(e).collect();
              }({ err: e });
            });
          } else r = e(n);return r && t.config.EnabledSocketTimes && (t.collector.addSocketTimes(s.SOCKET_TIMES_TYPE.CONNECT_TIMES), r.onClose(function (e) {
            1e3 !== e.code && t.collector.addSocketTimes(s.SOCKET_TIMES_TYPE.DISCONNECT_TIMES);
          })), r;
        };
      } }]), t;
  }();t.default = c;
}, function (e, t, n) {
  "use strict";

  Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {
    function e(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }return function (t, n, r) {
      return n && e(t.prototype, n), r && e(t, r), t;
    };
  }(),
      o = s(n(1)),
      i = s(n(2)),
      a = n(0);function s(e) {
    return e && e.__esModule ? e : { default: e };
  }var u = function (e) {
    function t(e) {
      return function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
      }(this, t), function (e, t) {
        if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return !t || "object" != typeof t && "function" != typeof t ? e : t;
      }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e));
    }return function (e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
    }(t, o.default), r(t, [{ key: "handle", value: function () {
        "undefined" != typeof console && this.config.EnabledConsoleErr && (0, i.default)(console, "error", this.consoleErrorHandler.bind(this)), this.wx.onError && this.config.EnabledAppOnErr && ((0, i.default)(this.wx, "onError", this.onErrorhandler.bind(this)), this.bindOnError(), this.wx.offError && (0, i.default)(this.wx, "offError", this.offErrorhandler.bind(this)));
      } }, { key: "renderErrMsg", value: function () {
        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "";if (e && "string" != typeof e) return { msg: JSON.stringify(e) };var t = e.split("\n"),
            n = t.slice(0, 2).join("\n"),
            r = t.slice(2),
            o = (r[1] || "").split(":"),
            i = (o.pop() || "").replace(")", "") - 0,
            a = (o.pop() || "") - 0;return { line: a = isNaN(a) ? 0 : a, column: i, msg: n, stack: r };
      } }, { key: "bindOnError", value: function () {
        var e = this;this.bindedOnError || (this.bindedOnError = !0, this.wx.onError(function (t) {
          console.log("[APM] onError error", t);var n = e.renderErrMsg(t.message);n.stack = t.stack || n.stack, e.tracker(a.LOG_TYPE.UNCAUGHT_ERROR).addExtra(n).tryReport();
        }));
      } }, { key: "onErrorhandler", value: function (e) {
        var t = this;return function (n) {
          return t.bindOnError(), e(n);
        };
      } }, { key: "offErrorhandler", value: function (e) {
        var t = this;return function (n) {
          var r = e(n);return n || (t.bindedOnError = !1, t.bindOnError()), r;
        };
      } }, { key: "consoleErrorHandler", value: function (e) {
        var t = this;return function () {
          for (var n = arguments.length, r = Array(n), o = 0; o < n; o++) r[o] = arguments[o];return function () {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                n = t.renderErrMsg(e[0]);t.tracker(a.LOG_TYPE.UNCAUGHT_ERROR).addExtra(n).tryReport();
          }(r), e.apply(void 0, r);
        };
      } }]), t;
  }();t.default = u;
}, function (e, t, n) {
  "use strict";

  Object.defineProperty(t, "__esModule", { value: !0 });var r = function () {
    function e(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }return function (t, n, r) {
      return n && e(t.prototype, n), r && e(t, r), t;
    };
  }(),
      o = s(n(1)),
      i = s(n(2)),
      a = n(0);function s(e) {
    return e && e.__esModule ? e : { default: e };
  }var u = function (e) {
    function t(e) {
      !function (e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
      }(this, t);var n = function (e, t) {
        if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return !t || "object" != typeof t && "function" != typeof t ? e : t;
      }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e));return n.bindTimes = 0, n.reported = !1, n;
    }return function (e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
    }(t, o.default), r(t, [{ key: "handle", value: function () {
        this.isFun(this.wx.onMemoryWarning) && this.config.EnabledMemoryWarning && ((0, i.default)(this.wx, "onMemoryWarning", this.memoryWranHandler.bind(this)), this.firstBind());
      } }, { key: "firstBind", value: function () {
        this.wx.onMemoryWarning(function (e) {});
      } }, { key: "report", value: function (e, t) {
        this.reported || t != this.bindTimes || (console.log("[APM] onMemoryWarning", e), this.tracker(a.LOG_TYPE.MEMORY_WARN).addExtra(e || {}).collect(), this.reported = !0);
      } }, { key: "memoryWranHandler", value: function (e) {
        var t = this;return function (n) {
          var r = ++t.bindTimes;return e(function (e) {
            t.report(e, r), t.isFun(n) && n(e);
          });
        };
      } }]), t;
  }();t.default = u;
}, function (e, t, n) {
  "use strict";

  e.exports = { version: "0.2.1-2019-12-25", date: 1577249433164, mode: "dev" };
}]);
//# sourceMappingURL=wxapm.min.js.map